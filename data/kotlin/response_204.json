[{"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 4533, "user_id": 10648865, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FZ5ePNXHoPg/AAAAAAAAAAI/AAAAAAAAOGs/HY80R-CL6D4/photo.jpg?sz=128", "display_name": "dglozano", "link": "https://stackoverflow.com/users/10648865/dglozano"}, "edited": false, "score": 2, "creation_date": 1544056645, "post_id": 53642633, "comment_id": 94145091, "body": "&quot;But once the list is loaded, its set to the middle of the list.&quot; I don&#39;t get that. Also, could yo provide some images of what is happening now if you put the height equals to 0 and what happens when you set it to wrap content instead ?"}, {"owner": {"reputation": 12184, "user_id": 3544839, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/PH19M.jpg?s=128&g=1", "display_name": "Moinkhan", "link": "https://stackoverflow.com/users/3544839/moinkhan"}, "edited": false, "score": 0, "creation_date": 1544077426, "post_id": 53642633, "comment_id": 94149894, "body": "make the height of your recyclerview 0dp.."}, {"owner": {"reputation": 6959, "user_id": 2059819, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/UhKVs.jpg?s=128&g=1", "display_name": "Siavash", "link": "https://stackoverflow.com/users/2059819/siavash"}, "reply_to_user": {"reputation": 4533, "user_id": 10648865, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FZ5ePNXHoPg/AAAAAAAAAAI/AAAAAAAAOGs/HY80R-CL6D4/photo.jpg?sz=128", "display_name": "dglozano", "link": "https://stackoverflow.com/users/10648865/dglozano"}, "edited": false, "score": 0, "creation_date": 1544211747, "post_id": 53642633, "comment_id": 94209541, "body": "@dglozano the list would start off being scrolled to the middle"}], "answers": [{"tags": [], "owner": {"reputation": 7532, "user_id": 1753073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c84fc25306e27dd3393559721ba869cd?s=128&d=identicon&r=PG", "display_name": "navylover", "link": "https://stackoverflow.com/users/1753073/navylover"}, "is_accepted": false, "score": 0, "last_activity_date": 1544057421, "creation_date": 1544057421, "answer_id": 53643022, "question_id": 53642633, "link": "https://stackoverflow.com/questions/53642633/recyclerview-starts-in-the-middle-when-not-using-wrap-content/53643022#53643022", "title": "RecyclerView starts in the middle when not using wrap_content", "body": "<p>Notice:</p>\n\n<pre><code>stackFromEnd = true \n</code></pre>\n\n<p>When stackFromEnd is true the list fills its content starting from the bottom of the view.</p>\n"}, {"tags": [], "owner": {"reputation": 12184, "user_id": 3544839, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/PH19M.jpg?s=128&g=1", "display_name": "Moinkhan", "link": "https://stackoverflow.com/users/3544839/moinkhan"}, "is_accepted": false, "score": 0, "last_activity_date": 1544077986, "creation_date": 1544077986, "answer_id": 53645801, "question_id": 53642633, "link": "https://stackoverflow.com/questions/53642633/recyclerview-starts-in-the-middle-when-not-using-wrap-content/53645801#53645801", "title": "RecyclerView starts in the middle when not using wrap_content", "body": "<p>Just set your <strong>recyclerview height to 0dp</strong>.</p>\n\n<pre><code>&lt;ConstraintLayout&gt;\n  &lt;view above&gt;\n  &lt;android.support.v7.widget.RecyclerView\n        android:id=\"@+id/messagesRecyclerView\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"0dp\"\n        app:layout_constraintTop_toBottomOf=\"view above\"\n        app:layout_constraintBottom_toTopOf=\"view below\"\n        android:layout_marginBottom=\"10dp\" /&gt;\n  &lt;view below&gt;\n&lt;/ConstraintLayout&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8316, "user_id": 1616317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4533abb0fab9a5a284c2cdcb40512e85?s=128&d=identicon&r=PG&f=1", "display_name": "karan", "link": "https://stackoverflow.com/users/1616317/karan"}, "is_accepted": false, "score": 0, "last_activity_date": 1544079002, "creation_date": 1544079002, "answer_id": 53645988, "question_id": 53642633, "link": "https://stackoverflow.com/questions/53642633/recyclerview-starts-in-the-middle-when-not-using-wrap-content/53645988#53645988", "title": "RecyclerView starts in the middle when not using wrap_content", "body": "<p>you have set your constraints to top and bottom of parent view, So the view will stretch to top and bottom. You need to set your constraints as below</p>\n\n<pre><code>&lt;ConstraintLayout&gt;\n  &lt;view above&gt;\n  &lt;android.support.v7.widget.RecyclerView\n        android:id=\"@+id/messagesRecyclerView\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"0dp\"\n        app:layout_constraintTop_toBottomOf=\"@id/your_above_view_id\"\n        app:layout_constraintBottom_toTopOf=\"@id/your_below_view_id\"\n        android:layout_marginBottom=\"10dp\" /&gt;\n  &lt;view below&gt;\n&lt;/ConstraintLayout&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6959, "user_id": 2059819, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/UhKVs.jpg?s=128&g=1", "display_name": "Siavash", "link": "https://stackoverflow.com/users/2059819/siavash"}, "is_accepted": false, "score": 4, "last_activity_date": 1544211411, "creation_date": 1544211411, "answer_id": 53675829, "question_id": 53642633, "link": "https://stackoverflow.com/questions/53642633/recyclerview-starts-in-the-middle-when-not-using-wrap-content/53675829#53675829", "title": "RecyclerView starts in the middle when not using wrap_content", "body": "<p>Turns out that if you set the RV (RecyclerView) height to 0dp (aka match constraint), you also have to set the width to 0dp as well. This is an android bug.</p>\n\n<p>this is the code that fixed it:</p>\n\n<pre><code>&lt;android.support.v7.widget.RecyclerView\n    android:id=\"@+id/messagesRecyclerView\"\n    android:layout_width=\"0dp\"\n    android:layout_height=\"0dp\"\n    app:layout_constraintTop_toBottomOf=\"[view above]\"\n    app:layout_constraintBottom_toTopOf=\"[view below]\"\n    app:layout_constraintEnd_toEndOf=\"parent\"\n    app:layout_constraintStart_toStartOf=\"parent\"\n    android:layout_marginBottom=\"10dp\" /&gt;\n</code></pre>\n"}], "owner": {"reputation": 6959, "user_id": 2059819, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/UhKVs.jpg?s=128&g=1", "display_name": "Siavash", "link": "https://stackoverflow.com/users/2059819/siavash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 434, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1544211461, "creation_date": 1544054337, "last_edit_date": 1544211461, "question_id": 53642633, "link": "https://stackoverflow.com/questions/53642633/recyclerview-starts-in-the-middle-when-not-using-wrap-content", "title": "RecyclerView starts in the middle when not using wrap_content", "body": "<p>I have a <code>RecyclerView</code> inside of a <code>ConstraintLayout</code>, I need to set the height to 0dp so that it respects its constraints and doesn't go under the other views. But once the list is loaded, its set to the middle of the list. \nIf I set the height to <code>wrap_content</code>, the issue is fixed, but then it doesn't look right because it fills the screen and it goes under the other views\nI even tried wrapping the RV in a <code>FrameLayout</code>, so that I can set my RV to wrap content and still have it respect the constraints, but that took me to issue one (loads in the middle). </p>\n\n<pre><code>&lt;ConstraintLayout&gt;\n  &lt;view above&gt;\n  &lt;android.support.v7.widget.RecyclerView\n        android:id=\"@+id/messagesRecyclerView\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"0dp\"\n        app:layout_constraintTop_toBottomOf=\"view above\"\n        app:layout_constraintBottom_toTopOf=\"view below\"\n        android:layout_marginBottom=\"10dp\" /&gt;\n  &lt;view below&gt;\n&lt;/ConstraintLayout&gt;\n</code></pre>\n\n<p>and my code for setting up the RV:</p>\n\n<pre><code>with(recyclerView){\n  setHasFixedSize(true)\n  overScrollMode = View.OVER_SCROLL_NEVER\n  setLayoutManager(LinearLayoutManager(context).apply { stackFromEnd = true })\n  setAdapter(adapter)\n  setItemAnimator(itemAnimator)\n}\n</code></pre>\n\n<p>I know I can use <code>scrollToPosition()</code>, but then when there are images I'm the list, I have to wait till they are all loaded before I call it, and this takes a few seconds and it shows up as stutter to the user.</p>\n\n<p><em>UPDATE</em> I was setting the height to 0dp initially, which would cause the list to start off scrolled to the middle. Later I set it to wrap_content and match_parent which would cause the list to span the whole width or window and overlap the other views in the container. </p>\n"}, {"tags": ["performance", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 9899740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b2760cd67e27e884a5791bdca1ccab1?s=128&d=identicon&r=PG&f=1", "display_name": "user9899740", "link": "https://stackoverflow.com/users/9899740/user9899740"}, "is_accepted": false, "score": 0, "last_activity_date": 1544085340, "last_edit_date": 1544085340, "creation_date": 1544085238, "answer_id": 53647414, "question_id": 53641874, "link": "https://stackoverflow.com/questions/53641874/using-android-vibrator-seems-a-bit-slow-whats-a-good-strategy/53647414#53647414", "title": "Using Android vibrator seems a bit slow, what&#39;s a good strategy?", "body": "<p>Try this.</p>\n\n<pre><code>// this initiates the android vibrator [ put this on the onCreate ]\nval vibe = this@MainActivity.getSystemService(Context.VIBRATOR_SERVICE) as Vibrator\n</code></pre>\n\n<p>then</p>\n\n<pre><code>// put this where you want the vibrator to activate (fun bump*())\nval vibratorService = getSystemService(Context.VIBRATOR_SERVICE) as Vibrator\nvibratorService.vibrate(40)\n</code></pre>\n"}], "owner": {"reputation": 7099, "user_id": 1475548, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/09sbK.jpg?s=128&g=1", "display_name": "Octopus", "link": "https://stackoverflow.com/users/1475548/octopus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1544085340, "creation_date": 1544049677, "last_edit_date": 1544078237, "question_id": 53641874, "link": "https://stackoverflow.com/questions/53641874/using-android-vibrator-seems-a-bit-slow-whats-a-good-strategy", "title": "Using Android vibrator seems a bit slow, what&#39;s a good strategy?", "body": "<p>I am trying to make a relatively simple game in Kotlin with force feedback. Every time an object hits a wall I want the phone to vibrate.</p>\n\n<p>Here is my code, which generally works:</p>\n\n<pre><code>val vibT = 0L\nval vibrator: Vibrator by lazy {\n    getSystemService(Context.VIBRATOR_SERVICE) as Vibrator\n}\n</code></pre>\n\n<p>and then:</p>\n\n<pre><code>fun bump() {\n    var now = System.currentTimeMillis()\n    if ( vibrator.hasVibrator() &amp;&amp; now&gt;vibT+51) {\n        vibrator.cancel()\n        vibrator.vibrate(VibrationEffect.createOneShot(50, VibrationEffect.DEFAULT_AMPLITUDE))\n        vibT = now\n    }\n}\n</code></pre>\n\n<p>It seems that when the code runs the bump() function in rapid succession (for example, when several objects hit the wall), it gets rather sluggish with the redraws. If I comment out the line vibrator.vibrate(...) then the game runs smoothly. </p>\n\n<p>At first, I thought maybe I was just trying to call the function while it was still vibrating, hence causing a backlog of vibration requests, but even after adding in the timing check with <code>now</code> and <code>vibT</code> it's still a bit sluggish when a lot of calls are made to the function.</p>\n\n<p>I'm assuming this is not a synchronous call, and that the code continues executing as soon as I've requested a vibration, but I can't find documentation to back that up.</p>\n\n<p>Is there a better strategy? Maybe there are some gotcha's that I ought to be aware of when doing this?</p>\n"}, {"tags": ["android", "json", "serialization", "kotlin"], "comments": [{"owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "edited": false, "score": 0, "creation_date": 1544094847, "post_id": 53641364, "comment_id": 94158510, "body": "The error describes exactly what you need to do if you use experimental features. What&#39;s the question, exactly?"}], "answers": [{"comments": [{"owner": {"reputation": 54, "user_id": 1554643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34767df4fa71bf059937b87fa36ad9da?s=128&d=identicon&r=PG", "display_name": "Tor Langballe", "link": "https://stackoverflow.com/users/1554643/tor-langballe"}, "edited": false, "score": 0, "creation_date": 1544180384, "post_id": 53656369, "comment_id": 94193787, "body": "Ah, OK. All the examples using it didn&#39;t mention it. However, when I annotate the function that uses it with @UseExperimental... , then functions that call that need to be annotated as well, all the way up to the top level I think. Is there a way to avoid this?"}, {"owner": {"reputation": 4301, "user_id": 10326373, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gELRFaHltbo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNsdj9V1baYsQJixyXkjgDgjTYtUg/mo/photo.jpg?sz=128", "display_name": "Yoni Gibbs", "link": "https://stackoverflow.com/users/10326373/yoni-gibbs"}, "reply_to_user": {"reputation": 54, "user_id": 1554643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34767df4fa71bf059937b87fa36ad9da?s=128&d=identicon&r=PG", "display_name": "Tor Langballe", "link": "https://stackoverflow.com/users/1554643/tor-langballe"}, "edited": false, "score": 0, "creation_date": 1544181501, "post_id": 53656369, "comment_id": 94194370, "body": "I&#39;m not sure that&#39;s true. I just tried there and when I annotate <code>Class1.method1()</code> with <code>@UseExperimental</code> I can call it from <code>Class2.method2()</code> without annotating that second class/method with <code>@UseExperimental</code>. Are you getting different results?"}, {"owner": {"reputation": 4301, "user_id": 10326373, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gELRFaHltbo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNsdj9V1baYsQJixyXkjgDgjTYtUg/mo/photo.jpg?sz=128", "display_name": "Yoni Gibbs", "link": "https://stackoverflow.com/users/10326373/yoni-gibbs"}, "reply_to_user": {"reputation": 54, "user_id": 1554643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34767df4fa71bf059937b87fa36ad9da?s=128&d=identicon&r=PG", "display_name": "Tor Langballe", "link": "https://stackoverflow.com/users/1554643/tor-langballe"}, "edited": false, "score": 0, "creation_date": 1544181568, "post_id": 53656369, "comment_id": 94194410, "body": "In fact this is explicitly stated in the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-use-experimental/index.html\" rel=\"nofollow noreferrer\">documentation</a>:  &quot;If a declaration is annotated with UseExperimental, its usages are <b>not</b> required to opt-in to that experimental API.&quot;"}, {"owner": {"reputation": 54, "user_id": 1554643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34767df4fa71bf059937b87fa36ad9da?s=128&d=identicon&r=PG", "display_name": "Tor Langballe", "link": "https://stackoverflow.com/users/1554643/tor-langballe"}, "edited": false, "score": 0, "creation_date": 1544184183, "post_id": 53656369, "comment_id": 94195757, "body": "Thanks, just using. I was using  &#39;@kotlinx.serialization.ImplicitReflectionSerializer&#39;  &#39;@UseExperimental(kotlinx.serialization.ImplicitReflectionSe&zwnj;&#8203;rializer::class)&#39;"}], "tags": [], "owner": {"reputation": 4301, "user_id": 10326373, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gELRFaHltbo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNsdj9V1baYsQJixyXkjgDgjTYtUg/mo/photo.jpg?sz=128", "display_name": "Yoni Gibbs", "link": "https://stackoverflow.com/users/10326373/yoni-gibbs"}, "is_accepted": false, "score": 4, "last_activity_date": 1544116218, "last_edit_date": 1544116218, "creation_date": 1544115760, "answer_id": 53656369, "question_id": 53641364, "link": "https://stackoverflow.com/questions/53641364/using-json-stringify-on-object-without-serializer-needs-to-be-marked-as-experime/53656369#53656369", "title": "Using JSON.stringify on object without serializer needs to be marked as experimental", "body": "<p>The overload of <code>StringFormat.stringify</code> which doesn't take in a serializer (<code>SerializationStrategy</code>) is still experimental. If you view its definition (e.g. ctrl+click on it in the IDE) you'll see it looks as follows:</p>\n\n<pre><code>@ImplicitReflectionSerializer\ninline fun &lt;reified T : Any&gt; StringFormat.stringify(obj: T): String = stringify(context.getOrDefault(T::class), obj)\n</code></pre>\n\n<p>Where that <code>ImplicitReflectionSerializer</code> annotation is itself declared in that same file (<code>SerialImplicits.kt</code>):</p>\n\n<pre><code>@Experimental\nannotation class ImplicitReflectionSerializer\n</code></pre>\n\n<p>So because it's still experimental, you need to do exactly as the warning says, i.e. tell the compiler to allow the use of experimental features, by adding an annotation such as <code>@UseExperimental...</code> where you're using it.</p>\n\n<p>Note that the <a href=\"https://github.com/Kotlin/kotlinx.serialization#quick-example\" rel=\"nofollow noreferrer\">quick example</a> shown on the <code>kotlinx.serialization</code> GitHub repo's main readme shows that you need to pass in a serializer when calling <code>stringify</code>.</p>\n"}], "owner": {"reputation": 54, "user_id": 1554643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34767df4fa71bf059937b87fa36ad9da?s=128&d=identicon&r=PG", "display_name": "Tor Langballe", "link": "https://stackoverflow.com/users/1554643/tor-langballe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2631, "favorite_count": 2, "answer_count": 1, "score": 3, "last_activity_date": 1544116218, "creation_date": 1544046962, "question_id": 53641364, "link": "https://stackoverflow.com/questions/53641364/using-json-stringify-on-object-without-serializer-needs-to-be-marked-as-experime", "title": "Using JSON.stringify on object without serializer needs to be marked as experimental", "body": "<p>Using kotlin plugin 1.3.10 in Android Studio,\nwhen I try to stringify a simple class' object to JSON, it wont compile:</p>\n\n<p>This declaration is experimental and its usage must be marked with '@kotlinx.serialization.ImplicitReflectionSerializer' or '@UseExperimental(kotlinx.serialization.ImplicitReflectionSerializer::class)'</p>\n\n<pre><code>@Serializable data class Data(val a: Int, val b: Int)\nval data = Data(1, 2)\nval x = JSON.stringify(data)\n</code></pre>\n\n<p>However, giving a serialiser works:</p>\n\n<pre><code>val x = JSON.stringify(Data.serializer(), data)\n</code></pre>\n\n<p>I can't see anybody else having this problem, any idea what the problem is? I've set up using serialisation in gradle.build.</p>\n\n<p>I import with:</p>\n\n<pre><code>import kotlinx.serialization.*\nimport kotlinx.serialization.json.JSON\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-databinding", "2-way-object-databinding", "checkedtextview"], "comments": [{"owner": {"reputation": 1720, "user_id": 8490194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/003116725d07e12e51de7c159bd2f218?s=128&d=identicon&r=PG&f=1", "display_name": "ConstOrVar", "link": "https://stackoverflow.com/users/8490194/constorvar"}, "edited": false, "score": 1, "creation_date": 1544090435, "post_id": 53641238, "comment_id": 94155916, "body": "You need to mark <code>CheckedTextView.getChecked()</code> with <code>@BindingAdapter(&quot;checked&quot;)</code> annotation. In case of two-way databinding you need additional method with <code>@InverseBindingAdapter(&quot;checked&quot;)</code>. Detailed guide described <a href=\"https://developer.android.com/topic/libraries/data-binding/two-way\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 1779, "user_id": 3795043, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0QTMP.jpg?s=128&g=1", "display_name": "findusl", "link": "https://stackoverflow.com/users/3795043/findusl"}, "reply_to_user": {"reputation": 1720, "user_id": 8490194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/003116725d07e12e51de7c159bd2f218?s=128&d=identicon&r=PG&f=1", "display_name": "ConstOrVar", "link": "https://stackoverflow.com/users/8490194/constorvar"}, "edited": false, "score": 0, "creation_date": 1544090673, "post_id": 53641238, "comment_id": 94156043, "body": "@ConstOrVar But this guide is only for custom attributes. I am not using a custom attribute or a custom view. Isn&#39;t there a way I can tell the 2-way-binding to use the existing isChecked function as getter?"}, {"owner": {"reputation": 1720, "user_id": 8490194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/003116725d07e12e51de7c159bd2f218?s=128&d=identicon&r=PG&f=1", "display_name": "ConstOrVar", "link": "https://stackoverflow.com/users/8490194/constorvar"}, "edited": false, "score": 0, "creation_date": 1544100088, "post_id": 53641238, "comment_id": 94161412, "body": "Yes, you are right. Can you show <code>SimpleCheckableListItemViewModel</code> class?"}, {"owner": {"reputation": 1779, "user_id": 3795043, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0QTMP.jpg?s=128&g=1", "display_name": "findusl", "link": "https://stackoverflow.com/users/3795043/findusl"}, "reply_to_user": {"reputation": 1720, "user_id": 8490194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/003116725d07e12e51de7c159bd2f218?s=128&d=identicon&r=PG&f=1", "display_name": "ConstOrVar", "link": "https://stackoverflow.com/users/8490194/constorvar"}, "edited": false, "score": 0, "creation_date": 1544100266, "post_id": 53641238, "comment_id": 94161527, "body": "@ConstOrVar see the second code snippet in the question"}], "answers": [{"tags": [], "owner": {"reputation": 1972, "user_id": 7098269, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/SPI6D.jpg?s=128&g=1", "display_name": "Ehsan", "link": "https://stackoverflow.com/users/7098269/ehsan"}, "is_accepted": false, "score": 0, "last_activity_date": 1544426624, "creation_date": 1544426624, "answer_id": 53701148, "question_id": 53641238, "link": "https://stackoverflow.com/questions/53641238/cannot-find-the-getter-for-attribute-androidchecked/53701148#53701148", "title": "Cannot find the getter for attribute &#39;android:checked&#39;", "body": "<p>There might be different reasons for this error but in my case, the problem raised up because I didn't add apply plugin: 'kotlin-kapt' And apply plugin: 'kotlin-android-extensions' in my Gradle.</p>\n\n<p>After adding these plugins you have to replaced your annotationProcessors with kapt.</p>\n\n<p>After that, every thing might be going well.</p>\n"}], "owner": {"reputation": 1779, "user_id": 3795043, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0QTMP.jpg?s=128&g=1", "display_name": "findusl", "link": "https://stackoverflow.com/users/3795043/findusl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 643, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544426624, "creation_date": 1544046439, "last_edit_date": 1544047143, "question_id": 53641238, "link": "https://stackoverflow.com/questions/53641238/cannot-find-the-getter-for-attribute-androidchecked", "title": "Cannot find the getter for attribute &#39;android:checked&#39;", "body": "<blockquote>\n  <p>data binding error ****msg:Cannot find the getter for attribute 'android:checked' with value type java.lang.Boolean on android.widget.CheckedTextView.</p>\n</blockquote>\n\n<p>I have a Kotlin Android app and one of the XML layouts contains a <code>CheckedTextView</code> and I want to two-way bind the checked property to the checked value of the ViewModel. The idea is that the checked property in the viewModel will represent the one on the view itself. This fails with the error message above. Now I wonder whether this is because checked is a boolean value and the getter is called <code>isChecked</code>. Can Databinding not recognize that? So I tried extending it with a <code>getChecked</code> function, but that didn't resolve the error. Maybe because while Kotlin supports extension functions, Java does not. Any ideas how this can be solved?</p>\n\n<p>XML file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;layout xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt;\n    &lt;data&gt;\n        &lt;variable name=\"viewModel\"\n            type=\"lehrbaum.de.onenightcomps.view.SimpleCheckableListItemViewModel\"/&gt;\n    &lt;/data&gt;\n    &lt;CheckedTextView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:id=\"@+id/textView\"\n        android:padding=\"@dimen/text_margin\"\n        android:gravity=\"center_vertical\"\n        android:textStyle=\"bold\"\n        android:checkMark=\"?android:attr/listChoiceIndicatorSingle\"\n        android:checkMarkTint=\"@color/colorPrimary\"\n        android:checked=\"@={viewModel.checked}\"\n        android:text=\"@{viewModel.text}\"/&gt;\n&lt;/layout&gt;\n</code></pre>\n\n<p>ViewModel class:</p>\n\n<pre><code>class SimpleCheckableListItemViewModel {\n    val checked : MutableLiveData&lt;Boolean&gt; = MutableLiveData()\n    val text : MutableLiveData&lt;String&gt; = MutableLiveData()\n}\n</code></pre>\n\n<p>Extension function:</p>\n\n<pre><code>fun CheckedTextView.getChecked(): Boolean {\n    return this.isChecked\n}\n</code></pre>\n"}, {"tags": ["kotlin", "telegram-bot", "ktor"], "comments": [{"owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "edited": false, "score": 0, "creation_date": 1544046396, "post_id": 53639980, "comment_id": 94142031, "body": "Do I understand correctly that your actual problem is how to upload multipart/form-data using either plain Kotlin or Ktor, and Telegram bot is not really related?"}, {"owner": {"reputation": 31, "user_id": 10751410, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dyhnc.jpg?s=128&g=1", "display_name": "Waffle Lapkin", "link": "https://stackoverflow.com/users/10751410/waffle-lapkin"}, "reply_to_user": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "edited": false, "score": 0, "creation_date": 1544088255, "post_id": 53639980, "comment_id": 94154700, "body": "@AlexeySoshin yes"}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 10751410, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dyhnc.jpg?s=128&g=1", "display_name": "Waffle Lapkin", "link": "https://stackoverflow.com/users/10751410/waffle-lapkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1544519899, "creation_date": 1544519899, "answer_id": 53720856, "question_id": 53639980, "link": "https://stackoverflow.com/questions/53639980/uploading-files-to-telegram-bot-api-using-ktor/53720856#53720856", "title": "Uploading files to telegram bot api using ktor", "body": "<p>Ok, I finally find the answer. Fixed <code>makeRequest</code> function:</p>\n\n<pre><code>internal suspend inline fun &lt;reified T&gt; makeRequest(token: String, method: TelegramMethod, vararg params: Pair&lt;String, Any?&gt;): T {\n    try {\n        val response = client.submitForm&lt;HttpResponse&gt; {\n            this.method = HttpMethod.Post\n            url {\n                protocol = URLProtocol.HTTPS\n                host = API_HOST\n                encodedPath = API_PATH_PATTERN.format(token, method.methodName)\n            }\n            body = MultiPartFormDataContent(\n                    formData {\n                        params.forEach { (key, value) -&gt;\n                            when (value) {\n                                null -&gt; {}\n                                is MultipartFile -&gt; append(\n                                        key,\n                                        value.file.inputStream().asInput(),\n                                        Headers.build {\n                                            append(HttpHeaders.ContentType, value.mimeType)\n                                            append(HttpHeaders.ContentDisposition, \"filename=${value.filename}\")\n                                        }\n                                )\n                                is FileId -&gt; append(key, value.fileId)\n                                else -&gt; append(key, value.toString())\n                            }\n                        }\n                    }\n            )\n        }\n        val result = response.receive&lt;String&gt;()\n        val r = parseTelegramAnswer&lt;T&gt;(response, result)\n        return r\n    } catch (e: BadResponseStatusException) {\n        val answer = mapper.readValue&lt;TResult&lt;T&gt;&gt;(e.response.content.readUTF8Line()!!)\n        throw checkTelegramError(e.response.status, answer)\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 10751410, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dyhnc.jpg?s=128&g=1", "display_name": "Waffle Lapkin", "link": "https://stackoverflow.com/users/10751410/waffle-lapkin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1156, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1544519899, "creation_date": 1544040542, "question_id": 53639980, "link": "https://stackoverflow.com/questions/53639980/uploading-files-to-telegram-bot-api-using-ktor", "title": "Uploading files to telegram bot api using ktor", "body": "<p>I'm writing wrapper for telegram-bot-api using <code>kotlin</code> and <a href=\"https://ktor.io/\" rel=\"nofollow noreferrer\">ktor</a>.\nI have a problem - can't find working way to upload files.</p>\n\n<p>(from tg bot api <a href=\"https://core.telegram.org/bots/api#sending-files\" rel=\"nofollow noreferrer\">docs</a>)<br>\n<strong>There are three ways to send files (photos, stickers, audio, media, etc.):</strong></p>\n\n<ol>\n<li>If the file is already stored somewhere on the Telegram servers, you don't need to reupload it: each file object has a file_id field, simply pass this file_id as a parameter instead of uploading. There are no limits for files sent this way.</li>\n<li>Provide Telegram with an HTTP URL for the file to be sent. Telegram will download and send the file. 5 MB max size for photos and 20 MB max for other types of content.</li>\n<li>Post the file using multipart/form-data in the usual way that files are uploaded via the browser. 10 MB max size for photos, 50 MB for other files.  </li>\n</ol>\n\n<p>With 1-st and 2-nd ways I haven't  any problems.</p>\n\n<p>For now I have that ugly function that makes request to tg and parse answer:</p>\n\n<pre><code>internal suspend inline fun &lt;reified T&gt; makeRequest(token: String, method: TelegramMethod, vararg params: Pair&lt;String, Any?&gt;, files: Map&lt;String, String&gt; = emptyMap()): T {\n    try {\n        val data: List&lt;PartData&gt; = formData {\n            files.forEach { key, fileName -&gt;\n                append(key, Files.newInputStream(Paths.get(fileName)).asInput())\n            }\n        }\n        val response = client.submitFormWithBinaryData&lt;HttpResponse&gt;(data) {\n            this.method = HttpMethod.Post\n            url {\n                protocol = URLProtocol(\"https\", 42)\n                host = API_HOST\n                encodedPath = API_PATH_PATTERN.format(token, method.methodName)\n                params.forEach { (name, value) -&gt;\n                    if (value != null) { this.parameters[name] = value as String }\n                }\n            }\n        }\n        val result = response.receive&lt;String&gt;()\n        return parseTelegramAnswer&lt;T&gt;(response, result)\n    } catch (e: BadResponseStatusException) {\n        val answer = mapper.readValue&lt;TResult&lt;T&gt;&gt;(e.response.content.readUTF8Line()!!)\n        throw checkTelegramError(e.response.status, answer)\n    }\n}\n</code></pre>\n\n<p>Without files it works, with files - it doesn't. (I think that I doing everything wrong)</p>\n\n<p>Usage example:</p>\n\n<pre><code>suspend fun getUpdates(offset: Long? = null, limit: Int? = null, timeout: Int? = null, allowedUpdates: List&lt;String&gt;? = null): List&lt;Update&gt; =\n        api.makeRequest(\n            token,\n            TelegramMethod.getUpdates,\n            \"offset\" to offset?.toString(),\n            \"limit\" to limit?.toString(),\n            \"timeout\" to timeout?.toString(),\n            \"allowed_updates\" to allowedUpdates\n        )\n</code></pre>\n\n<p>I have test it on different files and I find that:</p>\n\n<ol>\n<li><p>if I send files between <code>17,9 KiB</code> and <code>56,6 KiB</code> I get from tg following error: <code>Bad Request: wrong URL host</code></p></li>\n<li><p>if I send files between <code>75,6 KiB</code> and <code>913,2 KiB</code> I get error <code>413 Request Entity Too Large</code></p></li>\n</ol>\n\n<p><em>* I were using <code>sendDocument</code> method</em></p>\n\n<p>What is true way to send files using <code>ktor</code>?</p>\n"}, {"tags": ["kotlin", "gradle-plugin"], "answers": [{"tags": [], "owner": {"reputation": 3788, "user_id": 2067157, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wZBy6.jpg?s=128&g=1", "display_name": "Allan Veloso", "link": "https://stackoverflow.com/users/2067157/allan-veloso"}, "is_accepted": false, "score": 0, "last_activity_date": 1544042240, "creation_date": 1544042240, "answer_id": 53640351, "question_id": 53639410, "link": "https://stackoverflow.com/questions/53639410/get-jar-resources-from-taskaction/53640351#53640351", "title": "Get jar resources from TaskAction", "body": "<p>I got it:</p>\n\n<pre><code>open class MyTask : DefaultTask() {\n\n    @InputDirectory\n    var projectResources: File = project.file(\"${project.projectDir}/src/main/resources\")\n\n    @TaskAction\n    fun perform() {\n\n        // I can iterate over the project resources files like that\n        projectResources.walk().forEach { file -&gt; \n            doStuffWithFile(file) \n        }\n\n        // Get the default configuration that contains the dependency jars and unzip it\n        project.configurations.getAt(\"default\")\n            .filter { it.name.endsWith(\"jar\") }\n            .map { project.zipTree(it) }\n            .flatten()\n            .forEach { file -&gt;\n                doStuffWithFile(file)\n            }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 3788, "user_id": 2067157, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wZBy6.jpg?s=128&g=1", "display_name": "Allan Veloso", "link": "https://stackoverflow.com/users/2067157/allan-veloso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544042240, "creation_date": 1544037970, "question_id": 53639410, "link": "https://stackoverflow.com/questions/53639410/get-jar-resources-from-taskaction", "title": "Get jar resources from TaskAction", "body": "<p>I am creating a gradle plugin and one of the tasks need some XML resources files that are inside some of the dependencies JARs.</p>\n\n<p>How can I access the resources files of dependencies inside the method annotated with @TaskAction?</p>\n\n<pre><code>open class MyTask : DefaultTask() {\n\n    @InputDirectory\n    var projectResources: File = project.file(\"${project.projectDir}/src/main/resources\")\n\n    @TaskAction\n    fun perform() {\n\n        // I can iterate over the project resources files like that\n        projectResources.walk().forEach { file -&gt; \n            doStuffWithFile(file) \n        }\n\n        // TODO but how to interate over resources files of dependencies?\n\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "encryption", "kotlin", "bouncycastle", "private-key"], "comments": [{"owner": {"reputation": 168160, "user_id": 19679, "user_type": "moderator", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/52a2ffb44b1c11ab9001cb67e0a0021c?s=128&d=identicon&r=PG", "display_name": "Brad Larson", "link": "https://stackoverflow.com/users/19679/brad-larson"}, "edited": false, "score": 0, "creation_date": 1544214390, "post_id": 53638955, "comment_id": 94210630, "body": "Please do not use comments to ask others to answer your questions. These comments have been flagged and removed across the site."}], "answers": [{"comments": [{"owner": {"reputation": 36469, "user_id": 238704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VgOZI.png?s=128&g=1", "display_name": "President James K. Polk", "link": "https://stackoverflow.com/users/238704/president-james-k-polk"}, "edited": false, "score": 0, "creation_date": 1544108022, "post_id": 53643056, "comment_id": 94166546, "body": "It is best practice to <i>not</i> specify the provider."}], "tags": [], "owner": {"reputation": 1248, "user_id": 1724770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gEV5L.jpg?s=128&g=1", "display_name": "linehrr", "link": "https://stackoverflow.com/users/1724770/linehrr"}, "is_accepted": true, "score": 2, "last_activity_date": 1544057626, "creation_date": 1544057626, "answer_id": 53643056, "question_id": 53638955, "link": "https://stackoverflow.com/questions/53638955/asn-1-encoding-routinesopenssl-internalheader-too-long/53643056#53643056", "title": "ASN.1 encoding routines:OPENSSL_internal:HEADER_TOO_LONG", "body": "<p>I used BouncyCastle as the security provider, so you can try it as well.\nlooks like the spec you are using is <code>secp256r1</code>. in this case, try following code to regen the PrivateKey object from the byte array that represents the key. remember, the byte array is just a BigInteger in Java. </p>\n\n<p>let me know if it works or not.</p>\n\n<pre><code>public PrivateKey generatePrivateKey(byte[] keyBin) throws InvalidKeySpecException, NoSuchAlgorithmException {\n    ECNamedCurveParameterSpec spec = ECNamedCurveTable.getParameterSpec(\"secp256r1\");\n    KeyFactory kf = KeyFactory.getInstance(\"ECDSA\", new BouncyCastleProvider());\n    ECNamedCurveSpec params = new ECNamedCurveSpec(\"secp256r1\", spec.getCurve(), spec.getG(), spec.getN());\n    ECPrivateKeySpec privKeySpec = new ECPrivateKeySpec(new BigInteger(keyBin), params);\n    return kf.generatePrivate(privKeySpec);\n}\n</code></pre>\n"}], "owner": {"reputation": 3759, "user_id": 5434346, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/77a6965f12ed6d5082ed4a990f715f59?s=128&d=identicon&r=PG&f=1", "display_name": "K.Os", "link": "https://stackoverflow.com/users/5434346/k-os"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1142, "favorite_count": 0, "accepted_answer_id": 53643056, "answer_count": 1, "score": 1, "last_activity_date": 1544057626, "creation_date": 1544036034, "last_edit_date": 1544039572, "question_id": 53638955, "link": "https://stackoverflow.com/questions/53638955/asn-1-encoding-routinesopenssl-internalheader-too-long", "title": "ASN.1 encoding routines:OPENSSL_internal:HEADER_TOO_LONG", "body": "<p>I have a problem with rconstructing the private key from byte array in Kotlin (using Android Studio)</p>\n\n<p>I must load the private key that I have defined like below. \nFrom what I know, this EC Private key is 32 bytes long which correspond to secp256r1 curve</p>\n\n<pre><code>0x3C, 0x6D, etc... (this have 32 in total)\n</code></pre>\n\n<p>This is what i have: </p>\n\n<pre><code>val privateKeyArray = arrayOf(0x3C, 0x6D, etc...) //this have 32 size\n</code></pre>\n\n<p>Then I am trying to convert it to byteArray:</p>\n\n<pre><code>val privateKeyBytes = privateKeyArray.map { it.toByte() }.toByteArray())\n</code></pre>\n\n<p>And then I want to sign some data with it:</p>\n\n<pre><code>val keyFactory = KeyFactory.getInstance(\"EC\")\nval privateKey = keyFactory.generatePrivate(PKCS8EncodedKeySpec(privateKeyBytes))  //THIS line gives the Exception\n\nval content = \"random string\".toByteArray()\nval signer = Signature.getInstance(\"SHA256withECDSA\")\nsigner.initSign(privateKey)\nsigner.update(content)\nval signature = signer.sign()\n</code></pre>\n\n<p>However, when i am trying to generate the privateKey from the keyFactory I am getting the following Exception:</p>\n\n<blockquote>\n  <p>java.security.spec.InvalidKeySpecException: java.lang.RuntimeException: error:0c000079:ASN.1 encoding routines:OPENSSL_internal:HEADER_TOO_LONG\n          at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2927)</p>\n</blockquote>\n\n<p>How can I properly read the private key in this case?</p>\n"}, {"tags": ["java", "android", "kotlin", "android-resources"], "answers": [{"comments": [{"owner": {"reputation": 2385, "user_id": 6883143, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-6eVI86TCKZ8/AAAAAAAAAAI/AAAAAAAAAB4/AmD0k6JZYN4/photo.jpg?sz=128", "display_name": "Axbor Axrorov", "link": "https://stackoverflow.com/users/6883143/axbor-axrorov"}, "edited": false, "score": 0, "creation_date": 1544094600, "post_id": 53649763, "comment_id": 94158375, "body": "Thank you for answer, but I need default android drawable."}, {"owner": {"reputation": 1728, "user_id": 5265414, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/DaPmy.jpg?s=128&g=1", "display_name": "OGx09", "link": "https://stackoverflow.com/users/5265414/ogx09"}, "reply_to_user": {"reputation": 2385, "user_id": 6883143, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-6eVI86TCKZ8/AAAAAAAAAAI/AAAAAAAAAB4/AmD0k6JZYN4/photo.jpg?sz=128", "display_name": "Axbor Axrorov", "link": "https://stackoverflow.com/users/6883143/axbor-axrorov"}, "edited": false, "score": 0, "creation_date": 1544094792, "post_id": 53649763, "comment_id": 94158481, "body": "This worked fine. I don&#39;t really see the reason why you should downvote it. Moreover, the XML code I posted is copied from the default vector drawable."}, {"owner": {"reputation": 1728, "user_id": 5265414, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/DaPmy.jpg?s=128&g=1", "display_name": "OGx09", "link": "https://stackoverflow.com/users/5265414/ogx09"}, "reply_to_user": {"reputation": 2385, "user_id": 6883143, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-6eVI86TCKZ8/AAAAAAAAAAI/AAAAAAAAAB4/AmD0k6JZYN4/photo.jpg?sz=128", "display_name": "Axbor Axrorov", "link": "https://stackoverflow.com/users/6883143/axbor-axrorov"}, "edited": false, "score": 0, "creation_date": 1544094954, "post_id": 53649763, "comment_id": 94158571, "body": "You can find the original source for the back button here: <a href=\"https://chromium.googlesource.com/android_tools/+/1a05e6e0c759f1bb95f1c698150fa17a986d7619/sdk/extras/android/support/v7/appcompat/res/drawable/abc_ic_ab_back_material.xml\" rel=\"nofollow noreferrer\">chromium.googlesource.com/android_tools/+/&hellip;</a> and home as indicator here <a href=\"https://android.googlesource.com/platform/frameworks/support/+/ff6a18ccc12673e67ae2b143de1bb27048824365/v7/appcompat/res/values-v21/themes_base.xml\" rel=\"nofollow noreferrer\">android.googlesource.com/platform/frameworks/support/+/&hellip;</a>"}, {"owner": {"reputation": 2385, "user_id": 6883143, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-6eVI86TCKZ8/AAAAAAAAAAI/AAAAAAAAAB4/AmD0k6JZYN4/photo.jpg?sz=128", "display_name": "Axbor Axrorov", "link": "https://stackoverflow.com/users/6883143/axbor-axrorov"}, "edited": false, "score": 0, "creation_date": 1544094982, "post_id": 53649763, "comment_id": 94158585, "body": "By default i mean not adding my drawable."}, {"owner": {"reputation": 1728, "user_id": 5265414, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/DaPmy.jpg?s=128&g=1", "display_name": "OGx09", "link": "https://stackoverflow.com/users/5265414/ogx09"}, "reply_to_user": {"reputation": 2385, "user_id": 6883143, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-6eVI86TCKZ8/AAAAAAAAAAI/AAAAAAAAAB4/AmD0k6JZYN4/photo.jpg?sz=128", "display_name": "Axbor Axrorov", "link": "https://stackoverflow.com/users/6883143/axbor-axrorov"}, "edited": false, "score": 1, "creation_date": 1544095759, "post_id": 53649763, "comment_id": 94158997, "body": "Check the edit I did to my post, if that doesn&#39;t work for you.Then you need to explain what you really want."}], "tags": [], "owner": {"reputation": 1728, "user_id": 5265414, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/DaPmy.jpg?s=128&g=1", "display_name": "OGx09", "link": "https://stackoverflow.com/users/5265414/ogx09"}, "is_accepted": true, "score": 5, "last_activity_date": 1544095691, "last_edit_date": 1544095691, "creation_date": 1544093492, "answer_id": 53649763, "question_id": 53638923, "link": "https://stackoverflow.com/questions/53638923/id-of-the-back-arrow-drawable-in-the-actionbar-in-programming-side/53649763#53649763", "title": "ID of the back arrow drawable in the ActionBar in programming side", "body": "<p>Create the drawable and pass the drawable id to the function. For example, I create a vector drawable called <code>arrow_back.xml</code>. </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n    &lt;vector xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        android:width=\"24dp\"\n        android:height=\"24dp\"\n        android:viewportWidth=\"24.0\"\n        android:viewportHeight=\"24.0\"\n        android:autoMirrored=\"true\"&gt;\n        &lt;path\n            android:pathData=\"M20,11L7.8,11l5.6,-5.6L12,4l-8,8l8,8l1.4,-1.4L7.8,13L20,13L20,11z\"\n            android:fillColor=\"#fff\"/&gt;\n    &lt;/vector&gt;\n</code></pre>\n\n<blockquote>\n  <p><strong>Note</strong>: the drawable that <code>homeAsUpIndicatorId</code> is referencing has a\n  private modifier, so you can't access it directly. However, the above\n  code was copied from the vector drawable with little modification.</p>\n</blockquote>\n\n<p>I will pass the id to the <code>getDrawable()</code> function like this.</p>\n\n<pre><code>ContextCompat.getDrawable(context, R.drawable.arrow_back);\n</code></pre>\n\n<p><strong>EDIT:</strong>\nDo the following to get the drawable from <code>homeAsUpIndicatorId</code>:</p>\n\n<pre><code>    TypedArray a = getTheme().obtainStyledAttributes(R.style.AppTheme, new int[] {R.attr.homeAsUpIndicator});\n    int attributeResourceId = a.getResourceId(0, 0);\n    ContextCompat.getDrawable(context, attributeResourceId);\n    a.recycle()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 9781161, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YPbCv.png?s=128&g=1", "display_name": "DDk9499", "link": "https://stackoverflow.com/users/9781161/ddk9499"}, "is_accepted": false, "score": 2, "last_activity_date": 1544096063, "creation_date": 1544096063, "answer_id": 53650534, "question_id": 53638923, "link": "https://stackoverflow.com/questions/53638923/id-of-the-back-arrow-drawable-in-the-actionbar-in-programming-side/53650534#53650534", "title": "ID of the back arrow drawable in the ActionBar in programming side", "body": "<p>You can use this snippet</p>\n\n<pre><code>val a = theme.obtainStyledAttributes(R.style.AppTheme, (R.attr.homeAsUpIndicator))\nval attributeResourceId = a.getResourceId(0, 0)\nval drawable = ContextCompat.getDrawable(this, attributeResourceId)\n</code></pre>\n"}], "owner": {"reputation": 2385, "user_id": 6883143, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-6eVI86TCKZ8/AAAAAAAAAAI/AAAAAAAAAB4/AmD0k6JZYN4/photo.jpg?sz=128", "display_name": "Axbor Axrorov", "link": "https://stackoverflow.com/users/6883143/axbor-axrorov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 985, "favorite_count": 0, "accepted_answer_id": 53649763, "answer_count": 2, "score": 3, "last_activity_date": 1561654431, "creation_date": 1544035920, "last_edit_date": 1561654431, "question_id": 53638923, "link": "https://stackoverflow.com/questions/53638923/id-of-the-back-arrow-drawable-in-the-actionbar-in-programming-side", "title": "ID of the back arrow drawable in the ActionBar in programming side", "body": "<p>I am searching for default drawable of back arrow. In <a href=\"https://stackoverflow.com/questions/44807847/what-is-the-id-of-the-back-arrow-drawable-in-the-actionbar\">this question</a> showed how to get it in xml. But I am searching for using in programming side (java/kotlin). </p>\n\n<p>I want to use this drawable id in code like:</p>\n\n<pre><code>ContextCompat.getDrawable(context, homeAsUpIndicatorId);\n</code></pre>\n"}, {"tags": ["spring", "spring-boot", "kotlin", "yaml"], "comments": [{"owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "edited": false, "score": 0, "creation_date": 1544038672, "post_id": 53638743, "comment_id": 94138578, "body": "Your approach won&#39;t work, since you&#39;re using wrong tool for the job. <code>fillProperties</code> discard idents, and YAML is all about idents. Parse YAML files line by line and keep track of idents by yourself, if you don&#39;t want to use a library for that."}, {"owner": {"reputation": 20934, "user_id": 1261825, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/44eaaa3783922a617281e96bfe3f5343?s=128&d=identicon&r=PG", "display_name": "samanime", "link": "https://stackoverflow.com/users/1261825/samanime"}, "reply_to_user": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "edited": false, "score": 0, "creation_date": 1544041248, "post_id": 53638743, "comment_id": 94139680, "body": "Spring is able to parse YAML property files somehow and do everything properly. Is there any way to parse it like Spring does, just avoiding specifying the config file at startup."}, {"owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "edited": false, "score": 2, "creation_date": 1544045890, "post_id": 53638743, "comment_id": 94141827, "body": "Spring just uses SnakeYAML under the hood. I would suggest doing the same."}], "owner": {"reputation": 20934, "user_id": 1261825, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/44eaaa3783922a617281e96bfe3f5343?s=128&d=identicon&r=PG", "display_name": "samanime", "link": "https://stackoverflow.com/users/1261825/samanime"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 252, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1544035130, "creation_date": 1544035130, "question_id": 53638743, "link": "https://stackoverflow.com/questions/53638743/spring-boot-programmatically-load-properties-files-including-yaml", "title": "Spring Boot - Programmatically load properties files, including YAML", "body": "<p>I'm trying to programmatically read Spring-style properties files, including YAML-formatted files.</p>\n\n<p>What I have somewhat works, but it ends up flattening the YAML and so I end up with keys that are all mixed up and when I try to map it to a specific object, it gets confused.</p>\n\n<p>Here is what I have (in Kotlin):</p>\n\n<pre><code>import my.project.Properties\nimport java.util.Properties as JavaProperties\n\nfun loadConfig(configFiles: List&lt;String&gt;): Properties =\n  JavaProperties().apply {\n    putAll(appProperties.defaultConfig)\n    (if (configFiles.isEmpty()) appProperties.defaultConfigFiles else configFiles)\n      .forEach { PropertiesLoaderUtils.fillProperties(this, FileSystemResource(it)) }\n  }.let {\n    // throws exception because it was flattened\n    objectMapper.convertValue(it, Properties::class.java)\n  }\n</code></pre>\n\n<p>If I have a config file like this:</p>\n\n<pre><code>a:\n  b:\n    c: 1\n</code></pre>\n\n<p>I would want it to end up something equivalent to this in the Java Properties:</p>\n\n<pre><code>mapOf(\"a\" to mapOf(\"b\" to mapOf(\"c\" to 1)))\n</code></pre>\n\n<p>Instead, I just get something like this:</p>\n\n<pre><code>mapOf(\"c\" to 1)\n</code></pre>\n\n<p>It totally flattens it out and throws away the hierarchy entirely.</p>\n\n<p>I'd prefer not to just use a YAML parser and do it myself, because I would like to allow the \"normal\" Spring style property files as well.</p>\n\n<p>Note: These have to be loaded at run-time because the application is actually for running against something else, so I can't just let Spring handle it automatically like a normally would.</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 851, "user_id": 2764866, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/cUip8.png?s=128&g=1", "display_name": "Wietlol", "link": "https://stackoverflow.com/users/2764866/wietlol"}, "edited": false, "score": 3, "creation_date": 1544027928, "post_id": 53636768, "comment_id": 94133446, "body": "^ this explains well what the issue is, but to actually solve it, you might want to try to produce one expression that would give you the value you desire, in this case <code>map[it]?.plus(1) ?: 1</code>"}, {"owner": {"reputation": 128160, "user_id": 321697, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/FHlMy.jpg?s=128&g=1", "display_name": "Kevin Coppock", "link": "https://stackoverflow.com/users/321697/kevin-coppock"}, "edited": false, "score": 2, "creation_date": 1544031532, "post_id": 53636768, "comment_id": 94135365, "body": "You could also just change it to <code>ar.forEach { map[it] = map.getOrDefault(it, 0) + 1 }</code> to avoid nullability issues altogether."}], "tags": [], "owner": {"reputation": 4301, "user_id": 10326373, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gELRFaHltbo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNsdj9V1baYsQJixyXkjgDgjTYtUg/mo/photo.jpg?sz=128", "display_name": "Yoni Gibbs", "link": "https://stackoverflow.com/users/10326373/yoni-gibbs"}, "is_accepted": true, "score": 1, "last_activity_date": 1544027608, "creation_date": 1544027608, "answer_id": 53636768, "question_id": 53636728, "link": "https://stackoverflow.com/questions/53636728/why-does-kotlin-mutablemap-require-null-checks/53636768#53636768", "title": "Why does Kotlin MutableMap require null checks?", "body": "<p>It's because <code>map[it]</code> might return null if there's no entry in the map corresponding to that key. Even though you checked by calling <code>containsKey</code> on the line before, that doesn't guarantee that when you call <code>map[it]</code> you'll get a value back, as another thread might update the map's contents in between those two calls.</p>\n"}], "owner": {"reputation": 10162, "user_id": 430720, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/028694798d002eba1e272107640656ee?s=128&d=identicon&r=PG", "display_name": "Jaguar", "link": "https://stackoverflow.com/users/430720/jaguar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 627, "favorite_count": 0, "closed_date": 1544027610, "accepted_answer_id": 53636768, "answer_count": 1, "score": 0, "last_activity_date": 1544027680, "creation_date": 1544027520, "last_edit_date": 1544027680, "question_id": 53636728, "link": "https://stackoverflow.com/questions/53636728/why-does-kotlin-mutablemap-require-null-checks", "closed_reason": "Duplicate", "title": "Why does Kotlin MutableMap require null checks?", "body": "<p>This code doesn't compile:</p>\n\n<pre><code>val map = mutableMapOf&lt;Int, Int&gt;()\nar.forEach{\n    if(!map.containsKey(it)) {\n        map[it] = 1\n    } else {\n        map[it] = map[it] + 1\n    }\n}\n</code></pre>\n\n<p>This is the compilation error:</p>\n\n<blockquote>\n  <p>Operator call corresponds to a dot-qualified call 'map[it].plus(1)'\n  which is not allowed on a nullable receiver 'map[it]'.</p>\n</blockquote>\n\n<p>Since the <code>mutableMap</code> I created is <strong>not</strong> having nullable parameters, I am wondering why do I need to add not null checks later on? This code passes:</p>\n\n<pre><code> else map[it] = map[it]!! + 1\n</code></pre>\n"}, {"tags": ["spring-boot", "kotlin", "apache-kafka", "spring-kafka"], "comments": [{"owner": {"reputation": 91346, "user_id": 2756547, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2158ce6e7c048277890eb64458864c1c?s=128&d=identicon&r=PG", "display_name": "Artem Bilan", "link": "https://stackoverflow.com/users/2756547/artem-bilan"}, "edited": false, "score": 0, "creation_date": 1544028929, "post_id": 53636395, "comment_id": 94133997, "body": "May you can share some simple Spring Boot project on GitHub to let us to play with and reproduce? Looking to the code so far, I don&#39;t see any issues. The <code>kafkaConsumerFactory</code> overrides one auto-configured in the <code>KafkaAutoConfiguration</code>, so a <code>kafkaListenerContainerFactory</code> should accept your one with the <code>JavaTimeModule</code> for deserialization. Not clear what can cause to use a default <code>JsonDeserializer</code>. I can suggest to remove the <code>spring.kafka.consumer.value-deserializer</code> property though, but not sure how that may cause override. So, the project to investigate would be helpful."}, {"owner": {"reputation": 91346, "user_id": 2756547, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2158ce6e7c048277890eb64458864c1c?s=128&d=identicon&r=PG", "display_name": "Artem Bilan", "link": "https://stackoverflow.com/users/2756547/artem-bilan"}, "edited": false, "score": 0, "creation_date": 1544028973, "post_id": 53636395, "comment_id": 94134030, "body": "After making your simple project working, that would be great to ask you for the contribution to our Spring for Apache Kafka samples: <a href=\"https://github.com/spring-projects/spring-kafka/tree/master/samples\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-kafka/tree/master/samples</a>"}, {"owner": {"reputation": 13, "user_id": 9803006, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Remus Richard Dumitrache", "link": "https://stackoverflow.com/users/9803006/remus-richard-dumitrache"}, "reply_to_user": {"reputation": 91346, "user_id": 2756547, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2158ce6e7c048277890eb64458864c1c?s=128&d=identicon&r=PG", "display_name": "Artem Bilan", "link": "https://stackoverflow.com/users/2756547/artem-bilan"}, "edited": false, "score": 0, "creation_date": 1544042692, "post_id": 53636395, "comment_id": 94140359, "body": "@ArtemBilan Sure!, No problem with that. Edit: I just added the repo to the post"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9803006, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Remus Richard Dumitrache", "link": "https://stackoverflow.com/users/9803006/remus-richard-dumitrache"}, "edited": false, "score": 0, "creation_date": 1544173468, "post_id": 53657856, "comment_id": 94190229, "body": "Great! made it work.   One of the problems was the one that you mentioned, I also removed one of each consumer and producer beans(I am editing the post in order to add it)  Also, the DateTimeFormatter.ISO_DATE was unnecessary.  I have few more questions if you dont mind.  1. Is it correct to configure the factories as &lt;Object, Object&gt;?  2. Is it fine to have the same deserialiser for both consumerFactory and producerFactory?"}, {"owner": {"reputation": 91346, "user_id": 2756547, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2158ce6e7c048277890eb64458864c1c?s=128&d=identicon&r=PG", "display_name": "Artem Bilan", "link": "https://stackoverflow.com/users/2756547/artem-bilan"}, "reply_to_user": {"reputation": 13, "user_id": 9803006, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Remus Richard Dumitrache", "link": "https://stackoverflow.com/users/9803006/remus-richard-dumitrache"}, "edited": false, "score": 0, "creation_date": 1544192216, "post_id": 53657856, "comment_id": 94199943, "body": "1. Yes, that\u2019s fine. The target listener can be any type to expect as long as you deal with JSON. 2. No, that\u2019s related. Producer needs <code>serializer</code>, but consumer- <code>deserializer</code>. They are different objects. However you can use the same <code>ObjectMapper</code> for both of them"}, {"owner": {"reputation": 13, "user_id": 9803006, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Remus Richard Dumitrache", "link": "https://stackoverflow.com/users/9803006/remus-richard-dumitrache"}, "edited": false, "score": 0, "creation_date": 1544192615, "post_id": 53657856, "comment_id": 94200187, "body": "Thanks, you are super helpful, I would like to ask one more question, It is a little unrelated but I have been not able to find info about it, maybe I should open another question on SO.  The question is: When and who should create/send the events in a microservice architecture? I guess it depends on the context, but, in a simple spring boot app, should it be created in the service layer? I mean, should I call the repository to persist and produce the event?"}, {"owner": {"reputation": 91346, "user_id": 2756547, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2158ce6e7c048277890eb64458864c1c?s=128&d=identicon&r=PG", "display_name": "Artem Bilan", "link": "https://stackoverflow.com/users/2756547/artem-bilan"}, "reply_to_user": {"reputation": 13, "user_id": 9803006, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Remus Richard Dumitrache", "link": "https://stackoverflow.com/users/9803006/remus-richard-dumitrache"}, "edited": false, "score": 0, "creation_date": 1544193056, "post_id": 53657856, "comment_id": 94200425, "body": "Yes, this is definitely a new SO question  with more info to determine your issue."}], "tags": [], "owner": {"reputation": 91346, "user_id": 2756547, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2158ce6e7c048277890eb64458864c1c?s=128&d=identicon&r=PG", "display_name": "Artem Bilan", "link": "https://stackoverflow.com/users/2756547/artem-bilan"}, "is_accepted": true, "score": 0, "last_activity_date": 1544122059, "creation_date": 1544122059, "answer_id": 53657856, "question_id": 53636395, "link": "https://stackoverflow.com/questions/53636395/custom-spring-kafka-deserializer-for-localdatetime/53657856#53657856", "title": "Custom spring-kafka deserializer for LocalDateTime", "body": "<p>Your problem that you populate your customized <code>JsonDeserializer</code> into the <code>keyDeserializer</code> on the <code>ConsumerFactory</code>:</p>\n\n<pre><code>@Bean\nfun defaultKafkaConsumerFactory(): ConsumerFactory&lt;Any, Any&gt; {\n    val objectMapper = jackson2ObjectMapperBuilder.build() as ObjectMapper\n    objectMapper.registerModule(JavaTimeModule())\n    val jsonDeserializer = JsonDeserializer&lt;Any&gt;(objectMapper)\n    jsonDeserializer.configure(kafkaProperties.buildConsumerProperties(), false)\n    val kafkaConsumerFactory = DefaultKafkaConsumerFactory&lt;Any, Any&gt;(\n        kafkaProperties.buildConsumerProperties()\n    )\n    kafkaConsumerFactory.setKeyDeserializer(jsonDeserializer)\n    return kafkaConsumerFactory\n}\n</code></pre>\n\n<p>Use <code>setValueDeserializer()</code> or just remove this one in favor of that <code>kafkaConsumerFactory</code>. </p>\n\n<p>Fully not sure why do you have a pair of <code>ConsumerFactory</code> and <code>ProducerFactory</code>...</p>\n"}], "owner": {"reputation": 13, "user_id": 9803006, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Remus Richard Dumitrache", "link": "https://stackoverflow.com/users/9803006/remus-richard-dumitrache"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1947, "favorite_count": 0, "accepted_answer_id": 53657856, "answer_count": 1, "score": 1, "last_activity_date": 1544173634, "creation_date": 1544026362, "last_edit_date": 1544173634, "question_id": 53636395, "link": "https://stackoverflow.com/questions/53636395/custom-spring-kafka-deserializer-for-localdatetime", "title": "Custom spring-kafka deserializer for LocalDateTime", "body": "<p>I'm building a simple project with spring boot and spring-kafka, I can't configure it in order to make it work, it's a simple application that generates notes(author, content, createddatetime, lastmodifieddatetime) and sends events based on the notes when they are created. </p>\n\n<p>I have been playing with it with 2 days but I guess I'm not getting it.</p>\n\n<p>Here is my configuration, I'm pretty sure it has a lot of boiler plate but I've been using several examples to make mine work. </p>\n\n<p>I have 2 producer and consumer factories because I need a default one, is that true? Do I need to create a custom factory for each type of message I am willing to send?</p>\n\n<p>My application.yml</p>\n\n<pre><code>spring.datasource.url: jdbc:mysql://localhost:3306/notes\nspring.datasource.username: root\nspring.datasource.password:\n\nlogging.level.org.hibernate.SQL: debug\n\nspring.jpa.database:  MYSQL\nspring.jpa.open-in-view: true\nspring.jpa.show-sql:  true\nspring.data.jpa.repositories.bootstrap-mode: default\n\nspring.jpa.database-platform: org.hibernate.dialect.MySQL5Dialect\nspring.jpa.hibernate.ddl-auto: update\n\nlogging.level.org.springframework: DEBUG\nspring:\n  datasource:\n    driver-class-name: com.mysql.cj.jdbc.Driver\n\nspring.kafka.bootstrap-servers: 192.168.169.22:9092\nspring.kafka.consumer.group-id: noteGroup\nspring.kafka.consumer.auto-offset-reset: earliest\nspring.kafka.consumer.properties.spring.json.trusted.packages: com.remusrd.notesample.domain.event\nspring.kafka.consumer.value-deserializer: org.springframework.kafka.support.serializer.JsonDeserializer\nspring.kafka.consumer.properties.spring.json.add.type.headers: true\nspring.kafka.producer.value-serializer: org.springframework.kafka.support.serializer.JsonSerializer\n</code></pre>\n\n<p>My producer</p>\n\n<pre><code>package com.remusrd.notesample.service\n\nimport arrow.core.Option\nimport arrow.core.getOrElse\nimport arrow.data.NonEmptyList\nimport com.remusrd.notesample.data.NoteRepository\nimport com.remusrd.notesample.domain.Note\nimport com.remusrd.notesample.domain.event.NoteEvent\nimport org.springframework.beans.factory.annotation.Autowired\nimport org.springframework.kafka.core.KafkaTemplate\nimport org.springframework.stereotype.Service\nimport org.springframework.transaction.annotation.Transactional\n\n\n@Service\n@Transactional\nclass JpaNoteService : NoteService {\n    val TOPIC_NAME = \"notes\"\n\n    @Autowired\n    private lateinit var noteRepository: NoteRepository\n    @Autowired\n    private lateinit var kafkaTemplate: KafkaTemplate&lt;String, NoteEvent&gt;\n\n    override fun getAllNotes(): Option&lt;NonEmptyList&lt;Note&gt;&gt; =\n        NonEmptyList.fromList(noteRepository.findAll())\n\n    override fun createNote(note: Option&lt;Note&gt;) : Note {\n        note.map {\n            kafkaTemplate.send(TOPIC_NAME,  NoteEvent.Created(it))\n        }\n        return note.getOrElse { Note(id=0) }\n    }\n\n    @Override\n    @Transactional(readOnly = true)\n    override fun getNotesByAuthor(author: String): Option&lt;NonEmptyList&lt;Note&gt;&gt; {\n        val noteList = noteRepository.findByAuthor(author)\n        return NonEmptyList.fromList(noteList)\n    }\n}\n</code></pre>\n\n<p>My consumer </p>\n\n<pre><code>package com.remusrd.notesample.service\n\nimport org.springframework.kafka.annotation.KafkaListener\nimport org.springframework.messaging.Message\nimport org.springframework.stereotype.Component\n\n@Component\nclass createdNotesConsumer {\n\n\n    @KafkaListener(topics = [\"notes\"], groupId = \"noteGroup\")\n    fun recieve(noteEvent: Message&lt;Any&gt;) {\n        println(\"received\" + noteEvent + noteEvent.javaClass)\n    }\n}\n</code></pre>\n\n<p>The entity </p>\n\n<pre><code>package com.remusrd.notesample.domain\n\nimport java.time.LocalDateTime\nimport javax.persistence.*\n\n@Entity\n@Table(name = \"note\")\ndata class Note(\n    @Id @GeneratedValue(strategy = GenerationType.IDENTITY)\n    val id: Long,\n    val content: String = \"\",\n    val creationDate: LocalDateTime = LocalDateTime.now(),\n    val lastModified: LocalDateTime = LocalDateTime.now(),\n    val author: String = \"\"\n)\n</code></pre>\n\n<p>And my build.gradle</p>\n\n<pre><code>buildscript {\n    ext {\n        kotlinVersion = \"1.3.10\"\n        springBootVersion = \"2.1.1.RELEASE\"\n        springCloudVersion = \"Greenwich.M3\"\n        arrow_version = \"0.8.1\"\n    }\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath(\"org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}\")\n        classpath(\"org.jetbrains.kotlin:kotlin-gradle-plugin:${kotlinVersion}\")\n        classpath(\"org.jetbrains.kotlin:kotlin-allopen:${kotlinVersion}\")\n        classpath(\"org.jetbrains.kotlin:kotlin-noarg:${kotlinVersion}\")\n        classpath(\"io.spring.gradle:dependency-management-plugin:1.0.2.RELEASE\")\n    }\n}\n\napply plugin: \"kotlin\"\napply plugin: \"kotlin-spring\"\napply plugin: \"org.springframework.boot\"\napply plugin: \"io.spring.dependency-management\"\napply plugin: \"kotlin-allopen\"\napply plugin: \"kotlin-noarg\"\napply plugin: \"kotlin-jpa\"\n\n\ngroup \"com.remusrd\"\nversion \"0.0.1-SNAPSHOT\"\n\nsourceCompatibility = 1.8\n\nrepositories {\n    mavenCentral()\n    maven { url 'http://repo.spring.io/milestone' }\n}\nnoArg{\n    annotation(\"com.remusrd.notesample.domain.annotation.NoArg\")\n}\nallOpen{\n    annotation(\"com.remusrd.notesample.domain.annotation.Open\")\n}\n\ndependencies {\n    // Kotlin\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib\"\n    implementation \"org.jetbrains.kotlin:kotlin-reflect\"\n    implementation \"com.fasterxml.jackson.module:jackson-module-kotlin\"\n    implementation \"io.arrow-kt:arrow-core:$arrow_version\"\n    implementation \"io.arrow-kt:arrow-data:$arrow_version\"\n\n    // Spring Boot\n    implementation \"org.springframework.cloud:spring-cloud-starter-netflix-eureka-client\"\n    implementation \"org.springframework.boot:spring-boot-starter-web:$springBootVersion\"\n    implementation \"org.springframework.boot:spring-boot-starter-data-jpa:$springBootVersion\"\n    implementation \"org.springframework.kafka:spring-kafka\"\n    implementation \"com.fasterxml.jackson.module:jackson-module-kotlin:2.9.7\"\n\n\n\n    // BBDD\n    implementation \"mysql:mysql-connector-java:8.0.13\"\n    implementation \"com.h2database:h2:1.4.197\"\n\n\n    // Test\n    testImplementation \"junit:junit:4.12\"\n    testImplementation(\"org.springframework.boot:spring-boot-starter-test\")\n}\n\ndependencyManagement {\n    imports {\n        mavenBom \"org.springframework.boot:spring-boot-dependencies:${springBootVersion}\"\n        mavenBom \"org.springframework.cloud:spring-cloud-dependencies:${springCloudVersion}\"\n    }\n}\n\ncompileKotlin {\n    kotlinOptions {\n        freeCompilerArgs = [\"-Xjsr305=strict\"]\n        jvmTarget = \"1.8\"\n    }\n}\ncompileTestKotlin {\n    kotlinOptions {\n        freeCompilerArgs = [\"-Xjsr305=strict\"]\n        jvmTarget = \"1.8\"\n    }\n}\n</code></pre>\n\n<p>This is the trace I'm getting</p>\n\n<pre><code>2018-12-05 16:48:56.884 ERROR 8331 --- [ntainer#0-0-C-1] o.s.kafka.listener.LoggingErrorHandler   : Error while processing: null\n\norg.apache.kafka.common.errors.SerializationException: Error deserializing key/value for partition notes-0 at offset 0. If needed, please seek past the record to continue consumption.\nCaused by: org.apache.kafka.common.errors.SerializationException: Can't deserialize data [[123, 34, 110, 111, 116, 101, 34, 58, 123, 34, 105, 100, 34, 58, 48, 44, 34, 99, 111, 110, 116, 101, 110, 116, 34, 58, 34, 72, 111, 108, 97, 32, 113, 117, -61, -87, 32, 116, 97, 108, 34, 44, 34, 99, 114, 101, 97, 116, 105, 111, 110, 68, 97, 116, 101, 34, 58, 34, 50, 48, 49, 56, 45, 49, 50, 45, 48, 53, 32, 49, 54, 58, 52, 53, 58, 53, 57, 34, 44, 34, 108, 97, 115, 116, 77, 111, 100, 105, 102, 105, 101, 100, 34, 58, 34, 50, 48, 49, 56, 45, 49, 50, 45, 48, 53, 32, 49, 54, 58, 52, 53, 58, 53, 57, 34, 44, 34, 97, 117, 116, 104, 111, 114, 34, 58, 34, 82, 105, 99, 104, 97, 114, 100, 34, 125, 125]] from topic [notes]\nCaused by: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of `java.time.LocalDateTime` (no Creators, like default construct, exist): no String-argument constructor/factory method to deserialize from String value ('2018-12-05 16:45:59')\n at [Source: (byte[])\"{\"note\":{\"id\":0,\"content\":\"yo\",\"creationDate\":\"2018-12-05 16:45:59\",\"lastModified\":\"2018-12-05 16:45:59\",\"author\":\"Richard\"}}\"; line: 1, column: 58] (through reference chain: com.remusrd.notesample.domain.event.NoteEvent$Modified[\"note\"]-&gt;com.remusrd.notesample.domain.Note[\"creationDate\"])\n    at com.fasterxml.jackson.databind.exc.InvalidDefinitionException.from(InvalidDefinitionException.java:67) ~[jackson-databind-2.9.7.jar:2.9.7]\n    at com.fasterxml.jackson.databind.DeserializationContext.reportBadDefinition(DeserializationContext.java:1452) ~[jackson-databind-2.9.7.jar:2.9.7]\n    at com.fasterxml.jackson.databind.DeserializationContext.handleMissingInstantiator(DeserializationContext.java:1028) ~[jackson-databind-2.9.7.jar:2.9.7]\n    at com.fasterxml.jackson.databind.deser.ValueInstantiator._createFromStringFallbacks(ValueInstantiator.java:371) ~[jackson-databind-2.9.7.jar:2.9.7]\n    at com.fasterxml.jackson.databind.deser.std.StdValueInstantiator.createFromString(StdValueInstantiator.java:323) ~[jackson-databind-2.9.7.jar:2.9.7]\n    at com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeFromString(BeanDeserializerBase.java:1373) ~[jackson-databind-2.9.7.jar:2.9.7]\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeOther(BeanDeserializer.java:171) ~[jackson-databind-2.9.7.jar:2.9.7]\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:161) ~[jackson-databind-2.9.7.jar:2.9.7]\n    at com.fasterxml.jackson.databind.deser.impl.FieldProperty.deserializeAndSet(FieldProperty.java:136) ~[jackson-databind-2.9.7.jar:2.9.7]\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:369) ~[jackson-databind-2.9.7.jar:2.9.7]\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:159) ~[jackson-databind-2.9.7.jar:2.9.7]\n    at com.fasterxml.jackson.databind.deser.impl.FieldProperty.deserializeAndSet(FieldProperty.java:136) ~[jackson-databind-2.9.7.jar:2.9.7]\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:369) ~[jackson-databind-2.9.7.jar:2.9.7]\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:159) ~[jackson-databind-2.9.7.jar:2.9.7]\n    at com.fasterxml.jackson.databind.ObjectReader._bindAndClose(ObjectReader.java:1611) ~[jackson-databind-2.9.7.jar:2.9.7]\n    at com.fasterxml.jackson.databind.ObjectReader.readValue(ObjectReader.java:1234) ~[jackson-databind-2.9.7.jar:2.9.7]\n    at org.springframework.kafka.support.serializer.JsonDeserializer.deserialize(JsonDeserializer.java:328) ~[spring-kafka-2.2.2.RELEASE.jar:2.2.2.RELEASE]\n    at org.apache.kafka.clients.consumer.internals.Fetcher.parseRecord(Fetcher.java:1041) ~[kafka-clients-2.0.1.jar:na]\n    at org.apache.kafka.clients.consumer.internals.Fetcher.access$3300(Fetcher.java:110) ~[kafka-clients-2.0.1.jar:na]\n    at org.apache.kafka.clients.consumer.internals.Fetcher$PartitionRecords.fetchRecords(Fetcher.java:1223) ~[kafka-clients-2.0.1.jar:na]\n    at org.apache.kafka.clients.consumer.internals.Fetcher$PartitionRecords.access$1400(Fetcher.java:1072) ~[kafka-clients-2.0.1.jar:na]\n    at org.apache.kafka.clients.consumer.internals.Fetcher.fetchRecords(Fetcher.java:562) ~[kafka-clients-2.0.1.jar:na]\n    at org.apache.kafka.clients.consumer.internals.Fetcher.fetchedRecords(Fetcher.java:523) ~[kafka-clients-2.0.1.jar:na]\n    at org.apache.kafka.clients.consumer.KafkaConsumer.pollForFetches(KafkaConsumer.java:1230) ~[kafka-clients-2.0.1.jar:na]\n    at org.apache.kafka.clients.consumer.KafkaConsumer.poll(KafkaConsumer.java:1187) ~[kafka-clients-2.0.1.jar:na]\n    at org.apache.kafka.clients.consumer.KafkaConsumer.poll(KafkaConsumer.java:1154) ~[kafka-clients-2.0.1.jar:na]\n    at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:719) ~[spring-kafka-2.2.2.RELEASE.jar:2.2.2.RELEASE]\n    at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:676) ~[spring-kafka-2.2.2.RELEASE.jar:2.2.2.RELEASE]\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [na:1.8.0_171]\n    at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266) [na:1.8.0_171]\n    at java.util.concurrent.FutureTask.run(FutureTask.java) [na:1.8.0_171]\n    at java.lang.Thread.run(Thread.java:748) [na:1.8.0_171]\n</code></pre>\n\n<p>Edit: <a href=\"https://github.com/RemusRD/notesample\" rel=\"nofollow noreferrer\">https://github.com/RemusRD/notesample</a> this is the repo, if you have any recommendations in order to improve the code just tell me </p>\n\n<p>Edit2: Here is the new KafkaConfig</p>\n\n<pre><code>package com.remusrd.notesample.configuration\n\nimport com.fasterxml.jackson.databind.ObjectMapper\nimport org.springframework.beans.factory.annotation.Autowired\nimport org.springframework.boot.autoconfigure.jackson.Jackson2ObjectMapperBuilderCustomizer\nimport org.springframework.boot.autoconfigure.kafka.KafkaProperties\nimport org.springframework.context.annotation.Bean\nimport org.springframework.context.annotation.Configuration\nimport org.springframework.http.converter.json.Jackson2ObjectMapperBuilder\nimport org.springframework.kafka.core.*\nimport org.springframework.kafka.support.serializer.JsonDeserializer\nimport org.springframework.kafka.support.serializer.JsonSerializer\n\n\n@Configuration\nclass KafkaConfig {\n    @Autowired\n    lateinit var jackson2ObjectMapperBuilder: Jackson2ObjectMapperBuilder\n    @Autowired\n    lateinit var kafkaProperties: KafkaProperties\n\n\n    @Bean\n    fun kafkaTemplate(): KafkaTemplate&lt;Any, Any&gt; {\n        return KafkaTemplate&lt;Any, Any&gt;(defaultKafkaProducerFactory())\n    }\n\n\n    @Bean\n    fun defaultKafkaConsumerFactory(): ConsumerFactory&lt;Any, Any&gt; {\n        val objectMapper = jackson2ObjectMapperBuilder.build() as ObjectMapper\n        val jsonDeserializer = JsonDeserializer&lt;Any&gt;(objectMapper)\n        jsonDeserializer.configure(kafkaProperties.buildConsumerProperties(), false)\n        val kafkaConsumerFactory = DefaultKafkaConsumerFactory&lt;Any, Any&gt;(\n            kafkaProperties.buildConsumerProperties(),\n            jsonDeserializer,\n            jsonDeserializer\n        )\n        kafkaConsumerFactory.setValueDeserializer(jsonDeserializer)\n        return kafkaConsumerFactory\n    }\n\n    @Bean\n    fun defaultKafkaProducerFactory(): ProducerFactory&lt;Any, Any&gt; {\n        val jsonSerializer = JsonSerializer&lt;Any&gt;(jackson2ObjectMapperBuilder.build())\n        jsonSerializer.configure(kafkaProperties.buildProducerProperties(), false)\n        val factory = DefaultKafkaProducerFactory&lt;Any, Any&gt;(\n            kafkaProperties.buildProducerProperties(),\n            jsonSerializer,\n            jsonSerializer\n        )\n        val transactionIdPrefix = kafkaProperties.producer\n            .transactionIdPrefix\n        if (transactionIdPrefix != null) {\n            factory.setTransactionIdPrefix(transactionIdPrefix)\n        }\n        return factory\n    }\n}\n</code></pre>\n"}, {"tags": ["java", "kotlin", "project-reactor"], "owner": {"reputation": 11, "user_id": 9864726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5672bb057fcb3a9d407dc9c6202a3703?s=128&d=identicon&r=PG&f=1", "display_name": "eginwong", "link": "https://stackoverflow.com/users/9864726/eginwong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 172, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1544026083, "creation_date": 1544026083, "question_id": 53636322, "link": "https://stackoverflow.com/questions/53636322/reactor-thread-safe-way-to-propagate-thread-local-variables-either-using-decora", "title": "Reactor: Thread-safe way to propagate thread local variables either using decorated scheduler or subscriberContext?", "body": "<p>I am currently using Reactor in my project. For multi-threading with Reactor, is there a best practice for how to propagate thread local variables? We currently have one approach where we use SubscriberContext and Schedulers. The other approach we tried is using decorated Schedulers via Schedulers.setFactory(ThreadLocalSchedulerFactory) and setting a Context object in each thread. Is there anything wrong with either approach and why?</p>\n\n<p>We are slightly favoring the second approach because it may be more straightforward to our developers but we are not sure if it is robust enough.</p>\n"}, {"tags": ["android", "android-activity", "kotlin", "boolean"], "comments": [{"owner": {"reputation": 4301, "user_id": 10326373, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gELRFaHltbo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNsdj9V1baYsQJixyXkjgDgjTYtUg/mo/photo.jpg?sz=128", "display_name": "Yoni Gibbs", "link": "https://stackoverflow.com/users/10326373/yoni-gibbs"}, "edited": false, "score": 1, "creation_date": 1544025004, "post_id": 53635745, "comment_id": 94131678, "body": "Why do you want <code>!==</code> instead of <code>!=</code> ?  If you&#39;re just comparing two boolean values for equality then you can just use the latter (even if one is nullable and one isn&#39;t)."}], "answers": [{"comments": [{"owner": {"reputation": 537, "user_id": 8631622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb8c3c8025900b42d95e64cd0d1518ee?s=128&d=identicon&r=PG&f=1", "display_name": "Pie", "link": "https://stackoverflow.com/users/8631622/pie"}, "edited": false, "score": 0, "creation_date": 1544179225, "post_id": 53636101, "comment_id": 94193171, "body": "can i have your email?"}], "tags": [], "owner": {"reputation": 128160, "user_id": 321697, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/FHlMy.jpg?s=128&g=1", "display_name": "Kevin Coppock", "link": "https://stackoverflow.com/users/321697/kevin-coppock"}, "is_accepted": true, "score": 2, "last_activity_date": 1544038514, "last_edit_date": 1544038514, "creation_date": 1544025295, "answer_id": 53636101, "question_id": 53635745, "link": "https://stackoverflow.com/questions/53635745/boolean-arguments-issue-when-creating-settings-activity/53636101#53636101", "title": "Boolean arguments issue when creating Settings activity", "body": "<p>So first I can explain the issue it describes. Let's propose a very contrived scenario:</p>\n\n<p><strong>BooleanProvider.java</strong></p>\n\n<pre><code>class BooleanProvider {\n    @NonNull Boolean wrapMyBoolean(boolean state) {\n        return new Boolean(state);\n    }\n}\n</code></pre>\n\n<p><strong>BooleanProviderTest.kt</strong></p>\n\n<pre><code>class BooleanProviderTest {\n    @Test fun `it returns a true value when true is provided`() {\n        assertSame(BooleanProvider().wrapMyBoolean(true), true)\n    }\n}\n</code></pre>\n\n<p>This test will actually fail, because the instances of <code>Boolean</code> are not the same. In the Java code, we initialized a new instance of <code>Boolean</code> (rather than the statically defined <code>Boolean.TRUE</code> and <code>Boolean.FALSE</code> instances that you'll get when a primitive is auto-boxed to a <code>java.lang.Boolean</code>). So to avoid a potential unexpected result, it is recommending that you don't compare these types by reference.</p>\n\n<p>The simplest fix would be to just change your equality test to <code>!=</code> instead of <code>!==</code>. This would perform identity equality testing rather than reference equality testing, and will handle a null value on either side appropriately. This is what you want 99% of the time anyway.</p>\n\n<p>Secondly, you can also just declare <code>mCurrentValue</code> as a non-null type, and give it a default value, if you don't need to handle a null value in a specific way. Just declare it as:</p>\n\n<pre><code>private var mCurrentValue: Boolean = false // false is the default here\n</code></pre>\n"}], "owner": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 53636101, "answer_count": 1, "score": 1, "last_activity_date": 1544038514, "creation_date": 1544024105, "question_id": 53635745, "link": "https://stackoverflow.com/questions/53635745/boolean-arguments-issue-when-creating-settings-activity", "title": "Boolean arguments issue when creating Settings activity", "body": "<p>After creating an activity for a Settings page I noticed that, <code>mCurrentValue !== value</code> in <code>if (mCurrentValue !== value)</code> returned a warning:</p>\n\n<blockquote>\n  <p>Identity equality for arguments of types Boolean? and Boolean can be unstable because of implicit boxing</p>\n</blockquote>\n\n<p>I tried resolving this warning by adding a <code>?</code> next to <code>Boolean</code> in <code>override fun onXchange(value:Boolean) {</code>, but then the following error returned:</p>\n\n<blockquote>\n  <p>'onXchange' overrides nothing</p>\n</blockquote>\n\n<p>Any ideas on how to resolve this issue?</p>\n\n<p><strong>Activity class</strong></p>\n\n<pre><code>import android.content.Intent\nimport android.graphics.Color\nimport android.graphics.drawable.ColorDrawable\nimport android.os.Bundle\nimport android.preference.PreferenceManager\nimport android.support.v7.app.AppCompatActivity\nimport android.view.MenuItem\n\nclass MySettingsActivity : AppCompatActivity(), MySettingsFragment.PreferenceXchangeListener {\n    private var mCurrentValue: Boolean? = null\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        val mSharedPreferences = PreferenceManager.getDefaultSharedPreferences(this)\n        mCurrentValue = mSharedPreferences.getBoolean(\"preference_a\", false)\n        if (mCurrentValue as Boolean)\n        {\n            setTheme(R.style.MyDarkAppCompatTheme)\n        }\n        else\n        {\n            setTheme(R.style.MyLightAppCompatTheme)\n        }\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_mysettings)\n\n        val settingsFragment = MySettingsFragment()\n        supportFragmentManager\n                .beginTransaction()\n                .replace(R.id.settings_container, settingsFragment)\n                .commit()\n\n        val myActionBar = actionBar\n\n        if (myActionBar != null)\n        {\n            myActionBar.setTitle(R.string.settings)\n            myActionBar.setBackgroundDrawable(ColorDrawable(Color.BLACK))\n            myActionBar.setDisplayHomeAsUpEnabled(true)\n            myActionBar.setDisplayShowHomeEnabled(true)\n            myActionBar.setHomeAsUpIndicator(resources.getDrawable(R.drawable.ic_arrow_back_white, null))\n        }\n    }\n\n    override fun onXchange(value:Boolean?) {\n        if (mCurrentValue !== value) {\n            mCurrentValue = value\n            recreate()\n        }\n    }\n\n\n    override fun onOptionsItemSelected(item: MenuItem): Boolean {\n        when (item.itemId) {\n            android.R.id.home -&gt; {\n                val intent = parentActivityIntent\n                intent?.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION)\n                onBackPressed()\n                return true\n            }\n\n            else -&gt;\n                return super.onOptionsItemSelected(item)\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Fragment class</strong></p>\n\n<pre><code>class MySettingsFragment : PreferenceFragmentCompat(), Preference.OnPreferenceChangeListener {\n    override fun onCreatePreferences(savedInstanceState: Bundle?, rootKey: String?) {\n        addPreferencesFromResource(R.xml.app_preferences)\n\n        val mCheckBoxPreference = findPreference(\"preference_a\") as CheckBoxPreference\n        mCheckBoxPreference.onPreferenceChangeListener = this\n    }\n\n    private var mPreferenceXchangeListener: PreferenceXchangeListener? = null\n\n    interface PreferenceXchangeListener {\n        fun onXchange(value:Boolean)\n    }\n\n    override fun onAttach(context: Context) {\n        super.onAttach(context)\n\n        try\n        {\n            mPreferenceXchangeListener = context as MySettingsFragment.PreferenceXchangeListener\n        }\n        catch (e:ClassCastException) {\n            Log.e(TAG, \"onAttach::::: PreferenceXchangeListener must be set in parent Activity\")\n        }\n    }\n\n    override fun onPreferenceChange(preference: Preference, newValue:Any):Boolean {\n        val preferenceKey = preference.key\n\n        if (preferenceKey == \"preference_a\")\n        {\n            (preference as CheckBoxPreference).isChecked = newValue as Boolean\n\n            mPreferenceXchangeListener!!.onXchange(newValue)\n            return true\n        }\n\n        return false\n    }\n\n    companion object {\n        private val TAG = MySettingsFragment::class.java.simpleName\n    }\n}\n</code></pre>\n"}, {"tags": ["kotlin", "kotlinx.coroutines"], "comments": [{"owner": {"reputation": 3743, "user_id": 10630900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ece5V.png?s=128&g=1", "display_name": "Minn", "link": "https://stackoverflow.com/users/10630900/minn"}, "edited": false, "score": 4, "creation_date": 1544023427, "post_id": 53635487, "comment_id": 94130703, "body": "<code>join</code> does not <i>start</i> the coroutine, it only waits for the completion. <code>launch</code> already starts it."}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1544024371, "post_id": 53635487, "comment_id": 94131300, "body": "<code>launch</code> launches the co-routines immediately so you print 3, then <code>job2</code> finishes first (while you are waiting for <code>job</code>)"}, {"owner": {"reputation": 10456, "user_id": 9241978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7f9d2a03452f74bfd802e36d50b7db?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel", "link": "https://stackoverflow.com/users/9241978/pawel"}, "edited": false, "score": 0, "creation_date": 1544024477, "post_id": 53635487, "comment_id": 94131351, "body": "You&#39;d get that output if you used <code>GlobalScope.launch(start = CoroutineStart.LAZY) { ... }</code> which postpones start until <code>start()</code>, <code>await()</code> or <code>join()</code>."}], "answers": [{"tags": [], "owner": {"reputation": 16518, "user_id": 1515052, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/87d59872c339c0c66860831e77d764c0?s=128&d=identicon&r=PG", "display_name": "Simulant", "link": "https://stackoverflow.com/users/1515052/simulant"}, "is_accepted": true, "score": 3, "last_activity_date": 1544028295, "last_edit_date": 1544028295, "creation_date": 1544027531, "answer_id": 53636736, "question_id": 53635487, "link": "https://stackoverflow.com/questions/53635487/why-do-these-coroutines-not-give-the-expected-output/53636736#53636736", "title": "Why do these coroutines not give the expected output?", "body": "<p>Reading from the <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/launch.html\" rel=\"nofollow noreferrer\">documentation of kotlinx.coroutines#launch</a>:</p>\n\n<blockquote>\n  <p>By default, the coroutine is immediately scheduled for execution. Other start options can be specified via start parameter. See CoroutineStart for details. An optional start parameter can be set to CoroutineStart.LAZY to start coroutine lazily. In this case, the coroutine Job is created in new state. It can be explicitly started with start function and will be started implicitly on the first invocation of join.</p>\n</blockquote>\n\n<p>So your coroutine starts immediate after the <code>launch</code> command. This should explain the order of executed commands. The <code>delay</code> in your async coroutines is executed right away while the main thread executes the next statements. <code>3</code> before <code>2</code> before <code>1</code>. Then you wait until your first job is finished (printing <code>1</code>) before printing <code>4</code> from the main thread.</p>\n\n<p>If you want your code to be executed like you expect it, you can add the <code>start = CoroutineStart.LAZY</code> parameter to the <code>launch</code> like this:</p>\n\n<pre><code>println(\"0\")\nrunBlocking {\n    val job = GlobalScope.launch(start = CoroutineStart.LAZY) {\n        // launch new coroutine and keep a reference to its Job\n        delay(1200L)\n        println(\"1\")\n    }\n    val job2 = GlobalScope.launch(start = CoroutineStart.LAZY) {\n        // launch new coroutine and keep a reference to its Job\n        delay(1000L)\n        println(\"2\")\n    }\n\n    println(\"3\")\n    job.join() // wait until child coroutine completes\n    println(\"4\")\n    job2.join() // wait until child coroutine\n    println(\"5\")\n}\nprintln(\"6\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5302, "user_id": 4265739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19cd59393a5b86c48f0da7bd5504c5b8?s=128&d=identicon&r=PG&f=1", "display_name": "leonardkraemer", "link": "https://stackoverflow.com/users/4265739/leonardkraemer"}, "is_accepted": false, "score": 4, "last_activity_date": 1544092152, "last_edit_date": 1544092152, "creation_date": 1544028772, "answer_id": 53637123, "question_id": 53635487, "link": "https://stackoverflow.com/questions/53635487/why-do-these-coroutines-not-give-the-expected-output/53637123#53637123", "title": "Why do these coroutines not give the expected output?", "body": "<p>This is what happens: </p>\n\n<ol>\n<li><strong>print 0</strong></li>\n<li>enter <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/run-blocking.html\" rel=\"nofollow noreferrer\"><code>runBlocking</code></a>, which blocks the current thread until the block is finished.</li>\n<li>setup and <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/launch.html\" rel=\"nofollow noreferrer\">launch</a> <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/-job/index.html\" rel=\"nofollow noreferrer\">job</a> 1; The job starts execution immediately and is suspended for 1200ms by the delay statement.</li>\n<li>setup and launch job2; The job starts execution immediately and is suspended for 1000m by delay statement.</li>\n<li><strong>print 3</strong> </li>\n<li>wait (execution is suspended) until job 1 finished (<code>job.join()</code>).</li>\n<li>after 1000 ms job2 <strong>prints 2</strong> and finishes</li>\n<li>after 1200 ms job1 <strong>prints 1</strong> and finishes</li>\n<li><strong>print 4</strong> (because job 1 has finished)</li>\n<li>wait (execution is suspended) until job2 finished (<code>job2.join()</code>). This returns immediately, as job2 has already finished.</li>\n<li><strong>print 5</strong></li>\n<li><strong>print 6</strong>, after the <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/run-blocking.html\" rel=\"nofollow noreferrer\">runBlocking</a>-block finishes and the thread where it was started continues.</li>\n</ol>\n\n<p>You may read <a href=\"https://kotlinlang.org/docs/reference/coroutines/composing-suspending-functions.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/coroutines/composing-suspending-functions.html</a> to get a better insight into suspending  functions. What helped me understand coroutines was this video: <a href=\"https://www.youtube.com/watch?v=_hfBv0a09Jc\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=_hfBv0a09Jc</a></p>\n"}], "owner": {"reputation": 9242, "user_id": 1009013, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/6174cad2ce82830389069b98a1d07cbe?s=128&d=identicon&r=PG", "display_name": "vrwim", "link": "https://stackoverflow.com/users/1009013/vrwim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 354, "favorite_count": 0, "accepted_answer_id": 53636736, "answer_count": 2, "score": 2, "last_activity_date": 1544092152, "creation_date": 1544023326, "question_id": 53635487, "link": "https://stackoverflow.com/questions/53635487/why-do-these-coroutines-not-give-the-expected-output", "title": "Why do these coroutines not give the expected output?", "body": "<p>I am trying to understand coroutines in Kotlin, but I've hit a bit of a roadblock. In the following example I would expect the following to happen:</p>\n\n<ul>\n<li>Prints 0</li>\n<li>Setup job 1</li>\n<li>Setup job 2</li>\n<li>Prints 3</li>\n<li>Run job 1</li>\n<li>Waits 1.2 seconds</li>\n<li>Prints 1</li>\n<li>Prints 4</li>\n<li>Run job 2</li>\n<li>Waits 1 second</li>\n<li>Prints 2</li>\n<li>Prints 5</li>\n<li>Prints 6</li>\n</ul>\n\n<p>But it prints this:</p>\n\n<p>0<br>\n3<br>\n2<br>\n1<br>\n4<br>\n5<br>\n6</p>\n\n<p>I don't really understand why this is happening. I mostly don't understand how the output of <code>job2</code> can come before <code>4</code>. I am very confused.</p>\n\n<pre><code>println(\"0\")\nrunBlocking {\n    val job = GlobalScope.launch {\n        // launch new coroutine and keep a reference to its Job\n        delay(1200L)\n        println(\"1\")\n    }\n    val job2 = GlobalScope.launch {\n        // launch new coroutine and keep a reference to its Job\n        delay(1000L)\n        println(\"2\")\n    }\n\n    println(\"3\")\n    job.join() // wait until child coroutine completes\n    println(\"4\")\n    job2.join() // wait until child coroutine\n    println(\"5\")\n}\nprintln(\"6\")\n</code></pre>\n"}, {"tags": ["gradle", "kotlin", "annotations", "annotation-processing", "kapt"], "answers": [{"tags": [], "owner": {"reputation": 92, "user_id": 1309260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b701fb8a351a8a30adf58380edf2317c?s=128&d=identicon&r=PG", "display_name": "Manos Batsis", "link": "https://stackoverflow.com/users/1309260/manos-batsis"}, "is_accepted": false, "score": 1, "last_activity_date": 1572326049, "creation_date": 1572326049, "answer_id": 58601744, "question_id": 53635191, "link": "https://stackoverflow.com/questions/53635191/change-kapt-class-generation-path/58601744#58601744", "title": "Change KAPT class generation path", "body": "<p>Use a different option name:</p>\n\n<pre><code>kapt{\n    arguments {\n        arg(\"kapt.kotlin.custom.generated\",\n                rootProject.file(\"foobar/build/generated/source/kaptKotlin/main\").absolutePath)\n    }\n}\n\n</code></pre>\n\n<p>then retrieve the custom option in your annotation processor and use that as the target</p>\n"}], "owner": {"reputation": 576, "user_id": 8874071, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/depb8.jpg?s=128&g=1", "display_name": "iFanie", "link": "https://stackoverflow.com/users/8874071/ifanie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 350, "favorite_count": 2, "answer_count": 1, "score": 5, "last_activity_date": 1572326049, "creation_date": 1544022293, "last_edit_date": 1544022989, "question_id": 53635191, "link": "https://stackoverflow.com/questions/53635191/change-kapt-class-generation-path", "title": "Change KAPT class generation path", "body": "<p>I want to instruct my Kotlin annotation processor to change the output directory of the generated classes.</p>\n\n<p>I want from my Gradle build script to change the <code>kapt.kotlin.generated</code> argument. I have tried the following to no avail.</p>\n\n<ol>\n<li><p>Doesn't work, path doesn't change</p>\n\n<p><code>kapt {\n    arguments {\n        arg(\"kapt.kotlin.generated\", new File('path'))\n    }\n }</code></p></li>\n<li><p>Doesn't work, path doesn't change</p>\n\n<p><code>kapt {\n    javacOptions {\n        option(\"kapt.kotlin.generated\", new File('path'))\n    }\n }</code></p></li>\n<li><p>Doesn't work, NullPointerException when building</p>\n\n<p><code>kapt {\n    javacOptions {\n        option(\"-Akapt.kotlin.generated\", new File('path'))\n    }\n }</code></p></li>\n</ol>\n\n<p>Same results for all three when using a string path instead of a file.</p>\n\n<p>I am at a loss, any help would be appreciated.</p>\n"}, {"tags": ["android", "kotlin", "visibility", "android-collapsingtoolbarlayout"], "answers": [{"tags": [], "owner": {"reputation": 339, "user_id": 1279818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd98739414715d9dcd16a68510f8b22f?s=128&d=identicon&r=PG", "display_name": "Master Fathi", "link": "https://stackoverflow.com/users/1279818/master-fathi"}, "is_accepted": false, "score": 0, "last_activity_date": 1544026272, "creation_date": 1544026272, "answer_id": 53636375, "question_id": 53635085, "link": "https://stackoverflow.com/questions/53635085/how-to-hide-part-of-content-of-the-toolbar-when-using-coordinatorlayout/53636375#53636375", "title": "How to hide part of content of the toolbar when using CoordinatorLayout", "body": "<p>if you want to do it with animation it requires a library \nif you want something similar without animation you just have to put the part you don't want to disappear inside the toolbar and the rest outside.</p>\n\n<p>and in your code you can follow the state of the app bar and change the visibility accordingly </p>\n\n<pre><code>appBarLayout.addOnOffsetChangedListener(new AppBarStateChangeListener() {\n            @Override\n            public void onStateChanged(AppBarLayout appBarLayout, State state) {\n\n                if (state.name().equals(\"EXPANDED\")) {\n\n\n                } else if (state.name().equals(\"COLLAPSED\")) {\n\n                }\n            }\n        });\n</code></pre>\n"}], "owner": {"reputation": 6818, "user_id": 1282166, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Hd0XQ.jpg?s=128&g=1", "display_name": "Shudy", "link": "https://stackoverflow.com/users/1282166/shudy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 141, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1544033518, "creation_date": 1544021917, "last_edit_date": 1544033518, "question_id": 53635085, "link": "https://stackoverflow.com/questions/53635085/how-to-hide-part-of-content-of-the-toolbar-when-using-coordinatorlayout", "title": "How to hide part of content of the toolbar when using CoordinatorLayout", "body": "<p>What I'm trying to achieve is to do some effect with collapsing toolbar.</p>\n\n<p><a href=\"https://i.stack.imgur.com/FwCcS.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FwCcS.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>I have a \"title\" that when collapsing toolbar is expanded, must be shown under the cross (<code>im1</code>), but collapsing is scrolled, the title must \"move\" to the next of the cross(<code>im2</code>).</p>\n\n<p>I'm trying do this:</p>\n\n<pre><code>&lt;android.support.design.widget.CoordinatorLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:id=\"@+id/topic_choise_root_container\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:background=\"@color/white\"\n    android:fitsSystemWindows=\"true\"&gt;\n\n    &lt;android.support.design.widget.AppBarLayout\n        android:id=\"@+id/topic_choise_appbar\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"&gt;\n\n        &lt;android.support.design.widget.CollapsingToolbarLayout\n            android:id=\"@+id/topic_choise_collapsing_toolbar\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            android:background=\"@color/white\"\n            app:contentScrim=\"@color/white\"\n            app:expandedTitleMarginStart=\"120dp\"\n            app:layout_scrollFlags=\"scroll|exitUntilCollapsed\"&gt;\n\n            &lt;TextView\n                android:id=\"@+id/topic_choise_collpasing_title\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"128dp\"\n                android:layout_marginStart=\"16dp\"\n                android:layout_marginEnd=\"16dp\"\n                android:fontFamily=\"@font/montserrat_bold\"\n                android:gravity=\"bottom\"\n                android:lineSpacingExtra=\"8sp\"\n                android:textColor=\"@color/black\"\n                android:textSize=\"24sp\"\n                tools:text=\"\u00bfQu\u00e9 te gusta hacer?\" /&gt;\n\n            &lt;android.support.v7.widget.Toolbar\n                android:id=\"@+id/topic_choise_toolbar\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"?attr/actionBarSize\"\n                android:background=\"@color/white\"\n                app:layout_collapseMode=\"pin\"&gt;\n\n                &lt;LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"wrap_content\"&gt;\n\n                    &lt;ImageView\n                        android:layout_width=\"wrap_content\"\n                        android:layout_height=\"wrap_content\"\n                        android:src=\"@drawable/ic_32_px_cross\" /&gt;\n\n                    &lt;TextView\n                        android:layout_width=\"match_parent\"\n                        android:layout_height=\"wrap_content\"\n                        android:layout_gravity=\"center\"\n                        android:gravity=\"center_horizontal\"\n                        android:lineSpacingExtra=\"17sp\"\n                        android:text=\"What are you into?\"\n                        android:textColor=\"#253238\"\n                        android:textSize=\"15sp\" /&gt;\n\n                &lt;/LinearLayout&gt;\n\n            &lt;/android.support.v7.widget.Toolbar&gt;\n\n        &lt;/android.support.design.widget.CollapsingToolbarLayout&gt;\n\n    &lt;/android.support.design.widget.AppBarLayout&gt;\n</code></pre>\n\n<p>What I've done is create a \"custom toolbar\" with the cross and the title. And then add a another textview (with higher text, bolded..etc). But I don't know how to hide the toolbar title when is expanded.</p>\n\n<p>Some real images:</p>\n\n<p><strong>Not Collapsed</strong> (the textview of the toolbar must not be visible)\n<a href=\"https://i.stack.imgur.com/9sOFy.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9sOFy.jpg\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Collapsed</strong>\n<a href=\"https://i.stack.imgur.com/VQ8Lh.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VQ8Lh.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 35715, "user_id": 2850651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ooWVw.jpg?s=128&g=1", "display_name": "Mike M.", "link": "https://stackoverflow.com/users/2850651/mike-m"}, "edited": false, "score": 0, "creation_date": 1544021185, "post_id": 53634652, "comment_id": 94129225, "body": "You can&#39;t call <code>findViewById()</code> in a property initializer; i.e., outside of a class method. Move those calls to inside <code>onCreate()</code>, after the <code>setContentView()</code> call."}, {"owner": {"reputation": 29, "user_id": 7908835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28f71b602d788b94f4a1995efd707388?s=128&d=identicon&r=PG&f=1", "display_name": "programmer211216", "link": "https://stackoverflow.com/users/7908835/programmer211216"}, "reply_to_user": {"reputation": 35715, "user_id": 2850651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ooWVw.jpg?s=128&g=1", "display_name": "Mike M.", "link": "https://stackoverflow.com/users/2850651/mike-m"}, "edited": false, "score": 0, "creation_date": 1544021720, "post_id": 53634652, "comment_id": 94129611, "body": "after changing that, it works when i tapped on Register button only."}, {"owner": {"reputation": 35715, "user_id": 2850651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ooWVw.jpg?s=128&g=1", "display_name": "Mike M.", "link": "https://stackoverflow.com/users/2850651/mike-m"}, "edited": false, "score": 0, "creation_date": 1544021990, "post_id": 53634652, "comment_id": 94129793, "body": "I&#39;m not sure what you&#39;re saying. You have to move those calls in <code>LoginActivity</code>, too. If you&#39;ve done that correctly, and it&#39;s still crashing on that one, then your stack trace should&#39;ve changed, and it&#39;s likely a separate issue."}, {"owner": {"reputation": 29, "user_id": 7908835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28f71b602d788b94f4a1995efd707388?s=128&d=identicon&r=PG&f=1", "display_name": "programmer211216", "link": "https://stackoverflow.com/users/7908835/programmer211216"}, "reply_to_user": {"reputation": 35715, "user_id": 2850651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ooWVw.jpg?s=128&g=1", "display_name": "Mike M.", "link": "https://stackoverflow.com/users/2850651/mike-m"}, "edited": false, "score": 0, "creation_date": 1544023427, "post_id": 53634652, "comment_id": 94130702, "body": "how do i change the stack trace? it&#39;s still crashing when i tapped on the Login button."}, {"owner": {"reputation": 35715, "user_id": 2850651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ooWVw.jpg?s=128&g=1", "display_name": "Mike M.", "link": "https://stackoverflow.com/users/2850651/mike-m"}, "edited": false, "score": 0, "creation_date": 1544023631, "post_id": 53634652, "comment_id": 94130817, "body": "No, I mean, you should be seeing a new stack trace in your logcat. Make sure you&#39;re looking at the most current logs."}, {"owner": {"reputation": 29, "user_id": 7908835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28f71b602d788b94f4a1995efd707388?s=128&d=identicon&r=PG&f=1", "display_name": "programmer211216", "link": "https://stackoverflow.com/users/7908835/programmer211216"}, "reply_to_user": {"reputation": 35715, "user_id": 2850651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ooWVw.jpg?s=128&g=1", "display_name": "Mike M.", "link": "https://stackoverflow.com/users/2850651/mike-m"}, "edited": false, "score": 0, "creation_date": 1544024625, "post_id": 53634652, "comment_id": 94131442, "body": "This is what i got on logcat....  <code>Caused by: kotlin.TypeCastException: null cannot be cast to non-null type android.widget.Button         at com.example.acer.alertbox.LoginActivity.onCreate(LoginActivi&zwnj;&#8203;ty.kt:35)         at android.app.Activity.performCreate(Activity.java:6910)  at android.app.Instrumentation.callActivityOnCreate(Instrumenta&zwnj;&#8203;tion.java:1123)         at android.app.ActivityThread.performLaunchActivity(ActivityThr&zwnj;&#8203;ead.java:2746)</code>"}, {"owner": {"reputation": 35715, "user_id": 2850651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ooWVw.jpg?s=128&g=1", "display_name": "Mike M.", "link": "https://stackoverflow.com/users/2850651/mike-m"}, "edited": false, "score": 0, "creation_date": 1544024979, "post_id": 53634652, "comment_id": 94131662, "body": "If you&#39;ve still the same <code>findViewById()</code> calls in <code>LoginActivity</code>, then it sounds like <code>btnLogin</code> and/or <code>btnRegister</code> is not in the <code>activity_login</code> layout."}, {"owner": {"reputation": 29, "user_id": 7908835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28f71b602d788b94f4a1995efd707388?s=128&d=identicon&r=PG&f=1", "display_name": "programmer211216", "link": "https://stackoverflow.com/users/7908835/programmer211216"}, "reply_to_user": {"reputation": 35715, "user_id": 2850651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ooWVw.jpg?s=128&g=1", "display_name": "Mike M.", "link": "https://stackoverflow.com/users/2850651/mike-m"}, "edited": false, "score": 1, "creation_date": 1544025642, "post_id": 53634652, "comment_id": 94132093, "body": "yes you&#39;re right, i forgot to change the id on activity_login layout. Thanks a lot for pointing it out. Problem is solved now."}], "owner": {"reputation": 29, "user_id": 7908835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28f71b602d788b94f4a1995efd707388?s=128&d=identicon&r=PG&f=1", "display_name": "programmer211216", "link": "https://stackoverflow.com/users/7908835/programmer211216"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "closed_date": 1544020715, "answer_count": 0, "score": 0, "last_activity_date": 1544020850, "creation_date": 1544020478, "question_id": 53634652, "link": "https://stackoverflow.com/questions/53634652/intent-is-not-working-login-and-register-buttons-do-not-lead-to-the-respective", "closed_reason": "Duplicate", "title": "Intent is not working - Login and Register buttons do not lead to the respective activities", "body": "<p>I'm currently working on a simple app whereby users only need to login or register into the app. It is just for testing since i am a beginner in android programming. However, I couldn't get the intent to work. Like, there are 2 buttons on the MainActivity, Login and Register buttons. I tapped on both during the execution but the app kinda like crashing or just stopped working. Can anyone tell me where my mistake is?</p>\n\n<p>Here's the MainActivity code:</p>\n\n<pre><code>import android.content.Intent\nimport android.support.v7.app.AppCompatActivity\nimport android.os.Bundle\nimport android.widget.Button\n\nclass MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        val btnLogin  = findViewById&lt;Button&gt;(R.id.btnLogin)\n        val btnRegister = findViewById&lt;Button&gt;(R.id.btnRegister)\n\n        btnLogin.setOnClickListener {\n            val intent = Intent(this@MainActivity, LoginActivity::class.java)\n            startActivity(intent)\n        }\n\n        btnRegister.setOnClickListener {\n            val regIntent = Intent(this@MainActivity, RegisterActivity::class.java)\n            startActivity(regIntent)\n        }\n\n    }\n}\n</code></pre>\n\n<p>LoginActivity code:</p>\n\n<pre><code>import android.content.Intent\nimport android.os.Bundle\nimport android.support.v7.app.AppCompatActivity\nimport android.text.TextUtils\nimport android.view.View\nimport android.widget.Button\nimport android.widget.EditText\nimport android.widget.Toast\nimport com.example.acer.alertbox.R.id.*\nimport com.google.android.gms.tasks.OnCompleteListener\nimport com.google.android.gms.tasks.Task\nimport com.google.firebase.auth.AuthResult\nimport com.google.firebase.auth.FirebaseAuth\nimport org.w3c.dom.Text\n\nclass LoginActivity : AppCompatActivity() {\n\n    private var email = findViewById&lt;EditText&gt;(R.id.Email)\n    private var password = findViewById&lt;EditText&gt;(R.id.Password)\n    private var btnLogin = findViewById&lt;Button&gt;(R.id.btnLogin)\n    private var btnRegister = findViewById&lt;Button&gt;(R.id.btnRegister)\n    private var auth = FirebaseAuth.getInstance()\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n\n        //auth = FirebaseAuth.getInstance()\n\n        /*if (auth.currentUser!=null) {\n            startActivity(Intent(this@LoginActivity, MainActivity::class.java))\n            finish()\n        }*/\n\n        setContentView(R.layout.activity_login)\n\n        email = findViewById&lt;View&gt;(R.id.Email) as EditText\n        password = findViewById&lt;View&gt;(R.id.Password) as EditText\n        btnLogin = findViewById&lt;View&gt;(R.id.btnLogin) as Button\n        btnRegister = findViewById&lt;View&gt;(R.id.btnRegister) as Button\n\n        auth = FirebaseAuth.getInstance()\n\n        btnRegister.setOnClickListener {\n            val intent = Intent(this@LoginActivity, RegisterActivity::class.java)\n            startActivity(intent)\n        }\n\n        btnLogin.setOnClickListener(View.OnClickListener {\n            val email = Email.toString()\n            val password = Password.toString()\n\n            if (TextUtils.isEmpty(email)) {\n                Toast.makeText(applicationContext, \"Enter your email address\", Toast.LENGTH_SHORT).show()\n                return@OnClickListener\n            }\n\n            if (TextUtils.isEmpty(password)) {\n                Toast.makeText(applicationContext, \"Enter your password\", Toast.LENGTH_SHORT).show()\n                return@OnClickListener\n            }\n\n            auth.signInWithEmailAndPassword(email, password)\n                .addOnCompleteListener(this@LoginActivity) { task -&gt;\n                    if (!task.isSuccessful) {\n\n                        if (password.length &lt; 6) {\n                            getString(R.string.minimum_password)\n                        } else {\n                            Toast.makeText(this@LoginActivity, getString(R.string.auth_failed), Toast.LENGTH_LONG)\n                                .show()\n                        }\n                    } else {\n                        val intent = Intent(this@LoginActivity, MainActivity::class.java)\n                        startActivity(intent)\n                        finish()\n                    }\n                }\n        })\n    }\n}\n</code></pre>\n\n<p>RegisterActivity code:</p>\n\n<pre><code>import android.content.Intent\nimport android.support.v7.app.AppCompatActivity\nimport android.os.Bundle\nimport android.text.TextUtils\nimport android.view.View\nimport android.widget.Button\nimport android.widget.EditText\nimport android.widget.TextView\nimport android.widget.Toast\nimport com.google.android.gms.tasks.OnCompleteListener\nimport com.google.android.gms.tasks.Task\nimport com.google.firebase.auth.AuthResult\nimport com.google.firebase.auth.FirebaseAuth\nimport com.google.firebase.firestore.FirebaseFirestore\nimport org.w3c.dom.Text\n\nclass RegisterActivity : AppCompatActivity() {\n\n    private var Email = findViewById(R.id.Email) as EditText\n    private var Password = findViewById(R.id.Password) as EditText\n    private var Username = findViewById(R.id.username) as EditText\n    private var btnBack = findViewById(R.id.btnBack) as Button\n    private var btnReg = findViewById(R.id.btnReg) as Button\n    private var auth = FirebaseAuth.getInstance()\n    private var mFirestore = FirebaseFirestore.getInstance()\n\n    //private StoragePreference mStorage;\n    //private var mAuth: FirebaseAuth? = null\n    //private var mFirestore: FirebaseFirestore? = null\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_register)\n\n        auth = FirebaseAuth.getInstance()\n        mFirestore = FirebaseFirestore.getInstance()\n\n        Email = findViewById&lt;View&gt;(R.id.Email) as EditText\n        Password = findViewById&lt;View&gt;(R.id.Password) as EditText\n        Username = findViewById&lt;View&gt;(R.id.username) as EditText\n        btnReg = findViewById&lt;View&gt;(R.id.btnReg) as Button\n        btnBack = findViewById&lt;View&gt;(R.id.btnBack) as Button\n\n\n        btnReg.setOnClickListener(View.OnClickListener {\n            val name = Username.text.toString()\n            val email = Email.text.toString()\n            val password = Password.text.toString()\n\n            if (TextUtils.isEmpty(email)) {\n                Toast.makeText(applicationContext, \"Enter email address!\", Toast.LENGTH_SHORT).show()\n                return@OnClickListener\n            }\n\n            if (TextUtils.isEmpty(password)) {\n                Toast.makeText(applicationContext, \"Enter your password!\", Toast.LENGTH_SHORT).show()\n                return@OnClickListener\n            }\n\n            if (password.length &lt; 6) {\n                Toast.makeText(\n                    applicationContext,\n                    \"Password too short! Enter at least 6 characters\",\n                    Toast.LENGTH_SHORT\n                ).show()\n                return@OnClickListener\n            }\n\n            if (TextUtils.isEmpty(name)) {\n                Toast.makeText(applicationContext, \"Enter your username\", Toast.LENGTH_SHORT).show()\n                return@OnClickListener\n            }\n\n            auth.createUserWithEmailAndPassword(email, password)\n                .addOnCompleteListener(this@RegisterActivity) { task -&gt;\n                    Toast.makeText(\n                        this@RegisterActivity,\n                        \"createUserWithEmail:onComplete:\" + task.isSuccessful,\n                        Toast.LENGTH_SHORT\n                    ).show()\n                    if (!task.isSuccessful) {\n                        Toast.makeText(\n                            this@RegisterActivity,\n                            \"Authentication failed.\" + task.exception!!,\n                            Toast.LENGTH_SHORT\n                        ).show()\n                    } else {\n                        startActivity(Intent(this@RegisterActivity, MainActivity::class.java))\n                        finish()\n                    }\n                }\n        })\n    }\n}\n</code></pre>\n\n<p>AndroidManifest.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n          xmlns:tools=\"http://schemas.android.com/tools\"\n          package=\"com.example.acer.alertbox\"&gt;\n\n    &lt;uses-permission android:name=\"android.permission.INTERNET\"/&gt;\n    &lt;uses-permission android:name=\"android.permission.READ_PHONE_STATE\"/&gt;\n\n    &lt;application\n            android:allowBackup=\"true\"\n            android:icon=\"@mipmap/ic_launcher\"\n            android:label=\"@string/app_name\"\n            android:roundIcon=\"@mipmap/ic_launcher_round\"\n            android:supportsRtl=\"true\"\n            android:theme=\"@style/AppTheme\"\n            tools:ignore=\"GoogleAppIndexingWarning\"&gt;\n\n        &lt;activity android:name=\".MainActivity\"&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"android.intent.action.MAIN\"/&gt;\n                &lt;category android:name=\"android.intent.category.LAUNCHER\"/&gt;\n                &lt;category android:name=\"android.intent.category.DEFAULT\"/&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n\n        &lt;activity\n                android:name=\".LoginActivity\"\n                android:parentActivityName=\".MainActivity\"&gt;\n        &lt;/activity&gt;\n        &lt;activity\n                android:name=\".RegisterActivity\"\n                android:parentActivityName=\".MainActivity\"&gt;\n        &lt;/activity&gt;\n\n\n        &lt;service android:name=\".MyFirebaseMessagingService\"&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"com.google.firebase.MESSAGING_EVENT\"/&gt;\n            &lt;/intent-filter&gt;\n        &lt;/service&gt;\n        &lt;service android:name=\".MyFirebaseInstanceIDService\"&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"com.google.firebase.INSTANCE_ID_EVENT\"/&gt;\n            &lt;/intent-filter&gt;\n        &lt;/service&gt;\n\n        &lt;meta-data\n                android:name=\"android.app.alertbox\"\n                android:resource=\"@xml/automotive_app_desc\"/&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n\n<p>The Log Error:</p>\n\n<pre><code>Caused by: java.lang.NullPointerException: Attempt to invoke virtual method 'android.view.Window$Callback android.view.Window.getCallback()' on a null object reference\n    at android.support.v7.app.AppCompatDelegateImpl.&lt;init&gt;(AppCompatDelegateImpl.java:249)\n    at android.support.v7.app.AppCompatDelegate.create(AppCompatDelegate.java:182)\n    at android.support.v7.app.AppCompatActivity.getDelegate(AppCompatActivity.java:520)\n    at android.support.v7.app.AppCompatActivity.findViewById(AppCompatActivity.java:191)\n    at com.example.acer.alertbox.LoginActivity.&lt;init&gt;(LoginActivity.kt:20)\n    at java.lang.Class.newInstance(Native Method)\n    at android.app.Instrumentation.newActivity(Instrumentation.java:1083)\n    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2682)\n    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2864)\u00a0\n    at android.app.ActivityThread.-wrap12(ActivityThread.java)\u00a0\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1567)\u00a0\n    at android.os.Handler.dispatchMessage(Handler.java:105)\u00a0\n    at android.os.Looper.loop(Looper.java:156)\u00a0\n    at android.app.ActivityThread.main(ActivityThread.java:6523)\u00a0\n    at java.lang.reflect.Method.invoke(Native Method)\u00a0\n    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:941)\u00a0\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:831)\u00a0\n</code></pre>\n\n<p>**I removed the package name on each activity btw (Only for this questioning purpose).</p>\n\n<p>**I know the log says to look at line 20 in LoginActivity but i just couldn't figure out what is wrong with that line. I mean, it seems fine to me and no red underlines shows up either.</p>\n"}, {"tags": ["android", "kotlin", "zxing"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 10460529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb84a6026b1704ec41a55fae44a662b4?s=128&d=identicon&r=PG&f=1", "display_name": "Gueguen Kevin", "link": "https://stackoverflow.com/users/10460529/gueguen-kevin"}, "edited": false, "score": 0, "creation_date": 1544022599, "post_id": 53634589, "comment_id": 94130196, "body": "Gabe Sechan how can I allow nulls in my function ?"}, {"owner": {"reputation": 77347, "user_id": 1631193, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c713494416ceac454d71c524e15f1c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Sechan", "link": "https://stackoverflow.com/users/1631193/gabe-sechan"}, "reply_to_user": {"reputation": 23, "user_id": 10460529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb84a6026b1704ec41a55fae44a662b4?s=128&d=identicon&r=PG&f=1", "display_name": "Gueguen Kevin", "link": "https://stackoverflow.com/users/10460529/gueguen-kevin"}, "edited": false, "score": 0, "creation_date": 1544022739, "post_id": 53634589, "comment_id": 94130290, "body": "Make onActivityResult take an Intent? instead of an Intent."}, {"owner": {"reputation": 23, "user_id": 10460529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb84a6026b1704ec41a55fae44a662b4?s=128&d=identicon&r=PG&f=1", "display_name": "Gueguen Kevin", "link": "https://stackoverflow.com/users/10460529/gueguen-kevin"}, "edited": false, "score": 0, "creation_date": 1544024266, "post_id": 53634589, "comment_id": 94131243, "body": "i have try to return a intent in OnPause and OnBackPress but nothing new.           val data = Intent()         data.putExtra(&quot;code&quot;, &quot;error&quot;)         setResult(Activity.RESULT_CANCELED, data)         finish()"}], "tags": [], "owner": {"reputation": 77347, "user_id": 1631193, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c713494416ceac454d71c524e15f1c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Sechan", "link": "https://stackoverflow.com/users/1631193/gabe-sechan"}, "is_accepted": true, "score": 1, "last_activity_date": 1544020278, "creation_date": 1544020278, "answer_id": 53634589, "question_id": 53634395, "link": "https://stackoverflow.com/questions/53634395/why-my-app-quit-after-i-launch-onpause-on-a-zxing-app-kotlin/53634589#53634589", "title": "Why my app quit after i launch &quot;OnPause&quot; on a &quot;zxing&quot; app &quot;Kotlin&quot;", "body": "<p>The problem is that your onActivityResult is claiming the data parameter must be non-null.  Its actually null.  I'd try to change your signature to make it nullable.  If that doesn't work due to the fact its an override, make sure that your other acitivity always sets a result intent, even if the result is no answer.</p>\n\n<p>There's nothing wrong with your onPause, its totally unrelated.</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 10460529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb84a6026b1704ec41a55fae44a662b4?s=128&d=identicon&r=PG&f=1", "display_name": "Gueguen Kevin", "link": "https://stackoverflow.com/users/10460529/gueguen-kevin"}, "edited": false, "score": 0, "creation_date": 1544021249, "post_id": 53634643, "comment_id": 94129270, "body": "I have try but nothing new"}], "tags": [], "owner": {"reputation": 479, "user_id": 6180827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wwwQa.jpg?s=128&g=1", "display_name": "Khojiakbar", "link": "https://stackoverflow.com/users/6180827/khojiakbar"}, "is_accepted": false, "score": 0, "last_activity_date": 1544020456, "creation_date": 1544020456, "answer_id": 53634643, "question_id": 53634395, "link": "https://stackoverflow.com/questions/53634395/why-my-app-quit-after-i-launch-onpause-on-a-zxing-app-kotlin/53634643#53634643", "title": "Why my app quit after i launch &quot;OnPause&quot; on a &quot;zxing&quot; app &quot;Kotlin&quot;", "body": "<p>It might be because you're not entering <code>handleResult()</code> method so your activity result is not set. Just call <code>setResult()</code> from <code>onPause()</code> or <code>onBackPressed()</code> methods, and return some result (<code>Activity.RESULT_CANCELED</code> for instance), even if there's nothing to return. </p>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 10460529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb84a6026b1704ec41a55fae44a662b4?s=128&d=identicon&r=PG&f=1", "display_name": "Gueguen Kevin", "link": "https://stackoverflow.com/users/10460529/gueguen-kevin"}, "is_accepted": false, "score": 0, "last_activity_date": 1544193136, "creation_date": 1544193136, "answer_id": 53671576, "question_id": 53634395, "link": "https://stackoverflow.com/questions/53634395/why-my-app-quit-after-i-launch-onpause-on-a-zxing-app-kotlin/53671576#53671576", "title": "Why my app quit after i launch &quot;OnPause&quot; on a &quot;zxing&quot; app &quot;Kotlin&quot;", "body": "<p>Thanks all</p>\n\n<p>i jus add a \"?\" to the intent param.</p>\n\n<pre><code>    public override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\n    if (requestCode == PICK_CONTACT_REQUEST) {\n        if (resultCode == Activity.RESULT_OK) {\n            val cb = data?.getStringExtra(\"code\")\n            println(cb)\n            tvresult.text = cb.toString()\n        }}\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 10460529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb84a6026b1704ec41a55fae44a662b4?s=128&d=identicon&r=PG&f=1", "display_name": "Gueguen Kevin", "link": "https://stackoverflow.com/users/10460529/gueguen-kevin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "accepted_answer_id": 53634589, "answer_count": 3, "score": 0, "last_activity_date": 1544193136, "creation_date": 1544019611, "question_id": 53634395, "link": "https://stackoverflow.com/questions/53634395/why-my-app-quit-after-i-launch-onpause-on-a-zxing-app-kotlin", "title": "Why my app quit after i launch &quot;OnPause&quot; on a &quot;zxing&quot; app &quot;Kotlin&quot;", "body": "<p>I have a problem with the \"Onpause\" method on my app.\nWhen i am in my ScanView activity and i press \"back button\" my app crash.</p>\n\n<p>Here my clicklistener on my MainActivity.</p>\n\n<pre><code>        btn!!.setOnClickListener {\n        val intent = Intent(this@MainActivity, ScanActivity::class.java)\n        //startActivity(intent)\n        startActivityForResult(intent,PICK_CONTACT_REQUEST)\n    }\n</code></pre>\n\n<p>Here my class ScanActivity</p>\n\n<pre><code>class ScanActivity : Activity(), ZXingScannerView.ResultHandler {\n\n\nprivate var mScannerView: ZXingScannerView? = null\n\npublic override fun onCreate(state: Bundle?) {\n    super.onCreate(state)\n    mScannerView = ZXingScannerView(this)    // Programmatically initialize the scanner view\n    setContentView(mScannerView)                // Set the scanner view as the content view\n}\n\npublic override fun onResume() {\n    super.onResume()\n    mScannerView!!.setResultHandler(this) // Register ourselves as a handler for scan results.\n    mScannerView!!.startCamera()          // Start camera on resume\n}\n\npublic override fun onPause() {\n    super.onPause()\n    mScannerView!!.stopCamera()\n}\n\noverride fun handleResult(p0: com.google.zxing.Result?) {\n\n    val data = Intent()\n    data.putExtra(\"code\", p0!!.text)\n    setResult(Activity.RESULT_OK, data)\n    finish()\n    mScannerView!!.resumeCameraPreview(this)\n}\n</code></pre>\n\n<p>In my MainActivity the Onactivityresult </p>\n\n<pre><code>    public override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent) {\n    if (requestCode == PICK_CONTACT_REQUEST) {\n        if (resultCode == Activity.RESULT_OK) {\n            val cb = data.getStringExtra(\"code\")\n            println(cb)\n            tvresult.text = cb.toString()\n        }}\n}\n</code></pre>\n\n<p>And finally the error code.</p>\n\n<pre><code>    java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=0, data=null} to activity {fr.tais.riocb/fr.tais.riocb.MainActivity}: java.lang.IllegalArgumentException: Parameter specified as non-null is null: method kotlin.jvm.internal.Intrinsics.checkParameterIsNotNull, parameter data\n    at android.app.ActivityThread.deliverResults(ActivityThread.java:4268)\n    at android.app.ActivityThread.handleSendResult(ActivityThread.java:4312)\n    at android.app.ActivityThread.-wrap19(Unknown Source:0)\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1644)\n    at android.os.Handler.dispatchMessage(Handler.java:106)\n    at android.os.Looper.loop(Looper.java:164)\n    at android.app.ActivityThread.main(ActivityThread.java:6494)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:438)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:807)\n Caused by: java.lang.IllegalArgumentException: Parameter specified as non-null is null: method kotlin.jvm.internal.Intrinsics.checkParameterIsNotNull, parameter data\n    at fr.tais.riocb.MainActivity.onActivityResult(Unknown Source:2)\n    at android.app.Activity.dispatchActivityResult(Activity.java:7276)\n    at android.app.ActivityThread.deliverResults(ActivityThread.java:4264)\n    at android.app.ActivityThread.handleSendResult(ActivityThread.java:4312)\u00a0\n    at android.app.ActivityThread.-wrap19(Unknown Source:0)\u00a0\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1644)\u00a0\n    at android.os.Handler.dispatchMessage(Handler.java:106)\u00a0\n    at android.os.Looper.loop(Looper.java:164)\u00a0\n    at android.app.ActivityThread.main(ActivityThread.java:6494)\u00a0\n    at java.lang.reflect.Method.invoke(Native Method)\u00a0\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:438)\u00a0\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:807)\u00a0\n</code></pre>\n\n<p>Have you an idea on my problem ?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["kotlin", "android-testing", "dagger"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 10723154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77b0e2f5d8cd20a5538fcde7163ea83e?s=128&d=identicon&r=PG&f=1", "display_name": "user10723154", "link": "https://stackoverflow.com/users/10723154/user10723154"}, "is_accepted": true, "score": 1, "last_activity_date": 1547466399, "creation_date": 1547466399, "answer_id": 54180926, "question_id": 53633711, "link": "https://stackoverflow.com/questions/53633711/dagger-2-empty-test-component-unresolved/54180926#54180926", "title": "Dagger 2. Empty test component unresolved", "body": "<p>My apologize to who posted the right answer a few times ago.</p>\n\n<p>The key strings to be added to gradle:</p>\n\n<pre><code>    kaptAndroidTest \"com.google.dagger:dagger-compiler:$libraries.dagger\"\n    kaptAndroidTest \"com.google.dagger:dagger-android-processor:$libraries.dagger\"\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10723154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77b0e2f5d8cd20a5538fcde7163ea83e?s=128&d=identicon&r=PG&f=1", "display_name": "user10723154", "link": "https://stackoverflow.com/users/10723154/user10723154"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 54180926, "answer_count": 1, "score": 1, "last_activity_date": 1547466399, "creation_date": 1544017290, "last_edit_date": 1544098624, "question_id": 53633711, "link": "https://stackoverflow.com/questions/53633711/dagger-2-empty-test-component-unresolved", "title": "Dagger 2. Empty test component unresolved", "body": "<p>I've just started off compiling classes and modules for UI testing of android project. The one is using di and there is a necessity of injecting some dependencies in my tests. Right away I've faced some troubles resolving my test component. Trying to simplify the issue, I created an empty test and empty test component. Despite this the component stays unresolved while the same construct was successfully resolved inside the other android project.</p>\n\n<p>In my opinion using such empty component allows to cut off the majority of places where the mistake can be hided except for gradle files (anyway it can be wrong). </p>\n\n<p>Here are component and test class:</p>\n\n<pre><code>class LoginTest {\n    init {\n        try {\n            UiThreadStatement.runOnUiThread {\n                val testTest: TestComponent = DaggerTestComponent\n                    .builder()\n                    .build()\n            }\n        } catch (throwable: Throwable) {\n            throwable.printStackTrace()\n        }\n    }\n\n    @Test\n    fun test() {\n\n    }\n}\n\n---------------------\n\n@Component\ninterface TestComponent {\n\n}\n</code></pre>\n\n<p>And here is an app gradle:</p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'kotlin-kapt'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\napply plugin: 'com.google.gms.google-services'\n\nrepositories {\n    maven { url 'https://maven.fabric.io/public' }\n}\n\nandroid {\n    compileSdkVersion configuration.compileSdkVersion\n    buildToolsVersion configuration.buildToolsVersion\n\n    defaultConfig {\n        applicationId configuration.package\n        minSdkVersion configuration.minSdkVersion\n        targetSdkVersion configuration.targetSdkVersion\n        versionCode configuration.versionCode\n        versionName \"${configuration.versionMajor}\" +\n                \".${configuration.versionMinor}\" +\n                \".${configuration.versionPatch}\"\n        testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n        vectorDrawables.useSupportLibrary = true\n    }\n\n    signingConfigs {\n        debug {\n            storeFile file(\"debug.keystore\")\n        }\n        release {\n            storePassword KEYSTORE_PASSWORD\n            keyAlias KEY_ALIAS\n            keyPassword KEY_PASSWORD\n        }\n    }\n\n    buildTypes {\n        debug {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n\n    flavorDimensions \"default\"\n\n    productFlavors {\n        mock {\n            dimension \"default\"\n            minSdkVersion configuration.minSdkVersion\n            ext.enableCrashlytics = false\n        }\n        dev {\n            versionNameSuffix \"-dev\"\n            applicationIdSuffix '.dev'\n            minSdkVersion configuration.minSdkVersion\n            ext.enableCrashlytics = false\n        }\n        prod {\n            dimension \"default\"\n            minSdkVersion configuration.minSdkVersion\n        }\n    }\n\n    kapt {\n        generateStubs = true\n    }\n\n    sourceSets {\n        main.java.srcDirs += 'src/main/kotlin'\n        prod.java.srcDirs += 'src/prod/kotlin'\n        dev.java.srcDirs += 'src/dev/kotlin'\n        debug.java.srcDirs += 'src/debug/kotlin'\n        test.java.srcDirs += 'src/test/kotlin'\n        mock.java.srcDirs += 'src/mock/kotlin'\n        androidTest.java.srcDirs += 'src/androidTest/kotlin'\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n}\n\ndependencies {\n    implementation fileTree(include: ['*.jar'], dir: 'libs')\n\n    // Kotlin\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$libraries.kotlin_version\"\n\n    // Support\n    implementation \"com.android.support:appcompat-v7:$libraries.supportVersion\"\n    implementation \"com.android.support:design:$libraries.supportVersion\"\n    implementation \"com.android.support:recyclerview-v7:$libraries.supportVersion\"\n\n    // Rx\n    implementation \"io.reactivex.rxjava2:rxjava:$libraries.rxjava\"\n    implementation \"io.reactivex.rxjava2:rxandroid:$libraries.rxandroid\"\n    implementation \"com.jakewharton.rxbinding2:rxbinding-kotlin:$libraries.rxbinding\"\n    implementation \"com.jakewharton.rxbinding2:rxbinding-design-kotlin:$libraries.rxbinding\"\n    implementation \"com.jakewharton.rxbinding2:rxbinding-recyclerview-v7-kotlin:$libraries.rxbinding\"\n\n    // OkHttpVersion\n    implementation \"com.squareup.okhttp3:okhttp:$libraries.okhttpVersion\"\n    implementation \"com.squareup.okhttp3:logging-interceptor:$libraries.okhttpVersion\"\n\n    // Retrofit\n    implementation \"com.squareup.retrofit2:converter-gson:$libraries.retrofit\"\n    implementation \"com.squareup.retrofit2:retrofit:$libraries.retrofit\"\n    implementation \"com.squareup.retrofit2:adapter-rxjava2:$libraries.retrofit\"\n\n    // Dagger\n    implementation \"com.google.dagger:dagger:$libraries.dagger\"\n    implementation \"com.google.dagger:dagger-android-support:$libraries.dagger\"\n    kapt \"com.google.dagger:dagger-android-processor:$libraries.dagger\"\n    kapt \"com.google.dagger:dagger-compiler:$libraries.dagger_compiler\"\n\n    // Junit\n    testImplementation \"junit:junit:$libraries.junitVersion\"\n\n    // Runner\n    androidTestImplementation \"com.android.support.test:runner:$libraries.testRunner\"\n\n    // Espresso\n    androidTestImplementation \"com.android.support.test.espresso:espresso-core:$libraries.espressoCore\"\n\n    // Spoon\n    androidTestImplementation 'com.squareup.spoon:spoon-client:1.7.1'\n}\n</code></pre>\n\n<p>UPD: The error is extremely uninformative and looks like:</p>\n\n<pre><code>e: ...\\LoginTest.kt: (11, 37): Unresolved reference: DaggerTestComponent\n:app:compileMockDebugAndroidTestKotlin FAILED\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':app:compileMockDebugAndroidTestKotlin'.\n&gt; Compilation error. See log for more details\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\n</code></pre>\n"}, {"tags": ["android", "arraylist", "kotlin", "merge"], "comments": [{"owner": {"reputation": 130, "user_id": 6931953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45421d840640935e2ddba3cb73d8fef5?s=128&d=identicon&r=PG&f=1", "display_name": "Bartosz", "link": "https://stackoverflow.com/users/6931953/bartosz"}, "edited": false, "score": 0, "creation_date": 1544017057, "post_id": 53633425, "comment_id": 94126561, "body": "Hi :) Function which you probably need is zip. More information under link: <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/zip.html\" rel=\"nofollow noreferrer\">kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "is_accepted": false, "score": 1, "last_activity_date": 1544018102, "creation_date": 1544018102, "answer_id": 53633967, "question_id": 53633425, "link": "https://stackoverflow.com/questions/53633425/kotlin-merge-two-different-list-into-one-with-selected-data-from-both-lists/53633967#53633967", "title": "Kotlin: Merge two different list into one with selected data from both lists", "body": "<p>I think your classes have errors in the data type of some properties, so I changed them like this:</p>\n\n<pre><code>class Employee(val employeeId: Int, val employeeName: String, val address: String)\nclass LaptopInfo(val laptopId: Int, val employeeId: Int, val team: String)\nclass EmployeeLaptopInfo(val laptopId: Int, val employeeId: Int, val employeeName: String, val address: String)\n</code></pre>\n\n<p>If these are the initial lists:</p>\n\n<pre><code>val employeeList = mutableListOf&lt;Employee&gt;()\nval laptopInfoList = mutableListOf&lt;LaptopInfo&gt;()\n</code></pre>\n\n<p>then you map <code>employeeList</code> by finding corresponding values for <code>employeeId</code> in both lists:  </p>\n\n<pre><code>val employeeLaptopInfoList =\n        employeeList.mapNotNull { emp -&gt;\n            val laptop = laptopInfoList.find { it.employeeId == emp.employeeId }\n            if (laptop == null) null \n            else EmployeeLaptopInfo(\n                laptop.laptopId,\n                emp.employeeId,\n                emp.employeeName,\n                emp.address)\n        }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4301, "user_id": 10326373, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gELRFaHltbo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNsdj9V1baYsQJixyXkjgDgjTYtUg/mo/photo.jpg?sz=128", "display_name": "Yoni Gibbs", "link": "https://stackoverflow.com/users/10326373/yoni-gibbs"}, "is_accepted": false, "score": 0, "last_activity_date": 1544019029, "creation_date": 1544019029, "answer_id": 53634229, "question_id": 53633425, "link": "https://stackoverflow.com/questions/53633425/kotlin-merge-two-different-list-into-one-with-selected-data-from-both-lists/53634229#53634229", "title": "Kotlin: Merge two different list into one with selected data from both lists", "body": "<p>I think it might be best to first create two maps, one for the laptops and one for the employees, where both are keyed on the employeeId. Then you can do the following:</p>\n\n<pre><code>    val employees = listOf&lt;Employee&gt;()\n    val laptops = listOf&lt;LaptopInfo&gt;()\n\n    val laptopsByEmployeeId: Map&lt;Int, List&lt;LaptopInfo&gt;&gt; = laptops.groupBy { it.employeeId }\n    val employeesById: Map&lt;Int, Employee&gt; = employees.associateBy { it.employeeId }\n    val result = laptopsByEmployeeId.flatMap { (employeeId, laptops) -&gt;\n        laptops.mapNotNull { laptop -&gt;\n            employeesById[employeeId]?.let { employee -&gt;\n                EmployeeLaptopInfo(laptop.laptopId, employeeId, employee.employeeName, employee.address)\n            }\n        }\n    }\n</code></pre>\n\n<p>This means that you're never looping round one list inside a loop round another list, which could be inefficient. Instead, you're using the maps to get at items quickly by their IDs.</p>\n\n<p>(Also, as per the answer from forpas, I'm assuming that the data type for employeeId should be the same in all the classes, e.g. Int.)</p>\n"}, {"tags": [], "owner": {"reputation": 538, "user_id": 4129661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3edf4f82816b29a89c7c102f1939c97?s=128&d=identicon&r=PG&f=1", "display_name": "Abhay Agarwal", "link": "https://stackoverflow.com/users/4129661/abhay-agarwal"}, "is_accepted": true, "score": 12, "last_activity_date": 1544038841, "creation_date": 1544038841, "answer_id": 53639580, "question_id": 53633425, "link": "https://stackoverflow.com/questions/53633425/kotlin-merge-two-different-list-into-one-with-selected-data-from-both-lists/53639580#53639580", "title": "Kotlin: Merge two different list into one with selected data from both lists", "body": "<p>I've optimized <strong>Yoni Gibbs's</strong> solution. The idea is to <code>filter</code> the laptops in which the <code>employeeId</code> is present in <code>Employee</code>. Then transform each <code>laptop</code> into <code>EmployeeLaptopInfo</code>.</p>\n\n<pre><code>data class Employee(val employeeId: Int, val employeeName: String, val address: String)\n\ndata class LaptopInfo(val laptopId: Int, val employeeId: Int, val team: String)\n\ndata class EmployeeLaptopInfo(val laptopId: Int, val employeeId: Int, val employeeName: String, val address: String)\n\nfun main(args: Array&lt;String&gt;) {\n    val employees = listOf&lt;Employee&gt;()\n    val laptops = listOf&lt;LaptopInfo&gt;()\n\n    val employeesById: Map&lt;Int, Employee&gt; = employees.associateBy { it.employeeId }\n\n    val result = laptops.filter { employeesById[it.employeeId] != null }.map { laptop -&gt;\n        employeesById[laptop.employeeId]?.let { employee -&gt;\n            EmployeeLaptopInfo(laptop.laptopId, laptop.employeeId, employee.employeeName, employee.address)\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 740, "user_id": 1288005, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/56b8a758a1d14581d0dd2be7725e97a5?s=128&d=identicon&r=PG&f=1", "display_name": "user1288005", "link": "https://stackoverflow.com/users/1288005/user1288005"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9862, "favorite_count": 0, "accepted_answer_id": 53639580, "answer_count": 3, "score": 8, "last_activity_date": 1544038841, "creation_date": 1544016390, "last_edit_date": 1544016528, "question_id": 53633425, "link": "https://stackoverflow.com/questions/53633425/kotlin-merge-two-different-list-into-one-with-selected-data-from-both-lists", "title": "Kotlin: Merge two different list into one with selected data from both lists", "body": "<p>I want to merge two list with different type and create and another list which contains data from both lists. Also, merging should only happen when identifier match(like id match in both list)</p>\n\n<pre><code>Employee(val employeeId: Int,\n         val employeeName: String,\n         val address: String)\n\nLaptopInfo(val laptopId: Int,\n         val employeeId: String,\n         val team: String)\n\nEmployeeLaptopInfo(val laptopId: Int,\n         val employeeId: String,\n         val employeeName: String,\n         val address: String)\n</code></pre>\n\n<p>So there is list of <code>Employee</code> and <code>LaptopInfo</code> and I want to add EmployeeLaptopInfo to <code>List&lt;EmployeeLaptopInfo&gt;</code> only when employeeId match in both lists</p>\n\n<pre><code>val employeeLaptopInfoList = mutableListOf&lt;EmployeeLaptopInfo&gt;()\nval employeeIds = employeeList.map { it.employeeId }.toSet()\n\nlapTopInfoList.filter { employeeIds.contains(it.employeeId) }\n   .map {\n      val employeeLaptopInfo = EmployeeLaptopInfo(it.laptopId, laptopId.employeeId, \"can't get info\", \"can't get info\")\n      employeeLaptopInfoList.add(employeeLaptopInfo)\n   }\n</code></pre>\n\n<p>But this way I don't get details from both list. Is there any way to do it without using for loop and in efficient manner.</p>\n"}, {"tags": ["android", "kotlin", "android-collapsingtoolbarlayout", "android-bottomappbar"], "answers": [{"tags": [], "owner": {"reputation": 690, "user_id": 7252861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/851a29c5fd64d453382b5bd1412fd4dd?s=128&d=identicon&r=PG&f=1", "display_name": "Yashovardhan99", "link": "https://stackoverflow.com/users/7252861/yashovardhan99"}, "is_accepted": false, "score": 0, "last_activity_date": 1544016987, "creation_date": 1544016987, "answer_id": 53633611, "question_id": 53633341, "link": "https://stackoverflow.com/questions/53633341/can-we-implement-collapsing-toolbar-behaviour-in-bottom-appbar/53633611#53633611", "title": "Can we implement collapsing Toolbar behaviour in Bottom Appbar?", "body": "<p>Side note : This question is too broad to be considered here. They are better off searched on Google.</p>\n\n<p>However, to answer your question : <strong>yes</strong> you can do that if you want to but there is pretty much no reason to do so. It goes against material design principles, there are no built in components to accomplish this (so you will have to <strong>make your custom views</strong>) and it will also confuse the user since this is not a design seen anywhere in android.</p>\n\n<p>You are better off using a <a href=\"https://material.io/design/components/app-bars-bottom.html#\" rel=\"nofollow noreferrer\">Bottom app bar with a navigation drawer</a> (which pulls up from the bottom instead of the side).</p>\n"}], "owner": {"reputation": 115, "user_id": 1884742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72d25d3470d8c4c8f7c834d4f2a83f53?s=128&d=identicon&r=PG", "display_name": "karthi", "link": "https://stackoverflow.com/users/1884742/karthi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 172, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1544016987, "creation_date": 1544016127, "question_id": 53633341, "link": "https://stackoverflow.com/questions/53633341/can-we-implement-collapsing-toolbar-behaviour-in-bottom-appbar", "title": "Can we implement collapsing Toolbar behaviour in Bottom Appbar?", "body": "<p>How can we implement collapsing Toolbar behaviour in Bottom Appbar? Is it possible to do it?</p>\n"}, {"tags": ["list", "collections", "kotlin"], "comments": [{"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 1, "creation_date": 1544016360, "post_id": 53633329, "comment_id": 94126129, "body": "The syntax <code>coll + element</code> is the difference, i&#39;d say."}], "answers": [{"comments": [{"owner": {"reputation": 8818, "user_id": 994153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93223e5ce701c54b075a45e57f61f37d?s=128&d=identicon&r=PG", "display_name": "Colin D Bennett", "link": "https://stackoverflow.com/users/994153/colin-d-bennett"}, "edited": false, "score": 0, "creation_date": 1587573603, "post_id": 53633521, "comment_id": 108566715, "body": "This is wrong. The fact that <code>plus()</code> is an operator overload does not explain the difference (you can simply call <code>.plus()</code> explicitly as well &lt; <a href=\"https://pl.kotl.in/FhQgoIgtx\" rel=\"nofollow noreferrer\">pl.kotl.in/FhQgoIgtx</a> &gt;). @Roland&#39;s answer is correct, the real difference is that if you have a collection of collections, there may be two interpretations of the <code>plus()</code> function call. The <code>plusElement()</code> function provides a way to force a list to be added to a list-of-lists, and not have its elements separately added."}], "tags": [], "owner": {"reputation": 1295, "user_id": 1016326, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c603e7c3d4c6af8d15288dcee48750d1?s=128&d=identicon&r=PG", "display_name": "Jere K&#228;pyaho", "link": "https://stackoverflow.com/users/1016326/jere-k%c3%a4pyaho"}, "is_accepted": true, "score": 3, "last_activity_date": 1544016723, "creation_date": 1544016723, "answer_id": 53633521, "question_id": 53633329, "link": "https://stackoverflow.com/questions/53633329/kotlin-collection-plus-%c3%97-pluselement-difference/53633521#53633521", "title": "Kotlin - collection plus() &#215; plusElement() difference", "body": "<p>The first one is an overloaded operator, as indicated by the <code>operator</code> keyword. It allows you to use the <code>+</code> operator with a <code>List&lt;T&gt;</code>.</p>\n\n<p>The second one is a regular function, called in the normal function call style.</p>\n\n<p>Both return a new <code>List&lt;T&gt;</code> with the <code>element</code> appended.</p>\n\n<p>Transcript from the Kotlin REPL:</p>\n\n<pre><code>&gt;&gt;&gt;val a = listOf(1, 2, 3)\n&gt;&gt;&gt;a + 4\n[1, 2, 3, 4]\n&gt;&gt;&gt; a.plusElement(4)\n[1, 2, 3, 4]\n</code></pre>\n\n<p>For more information about Kotlin operator overloading, see <a href=\"https://kotlinlang.org/docs/reference/operator-overloading.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/operator-overloading.html</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "is_accepted": false, "score": 4, "last_activity_date": 1544028123, "last_edit_date": 1544028123, "creation_date": 1544025298, "answer_id": 53636103, "question_id": 53633329, "link": "https://stackoverflow.com/questions/53633329/kotlin-collection-plus-%c3%97-pluselement-difference/53636103#53636103", "title": "Kotlin - collection plus() &#215; plusElement() difference", "body": "<p>Besides <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/plus.html\" rel=\"nofollow noreferrer\"><code>plus</code></a> and <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/minus.html\" rel=\"nofollow noreferrer\"><code>minus</code></a> being <a href=\"https://kotlinlang.org/docs/reference/operator-overloading.html\" rel=\"nofollow noreferrer\">operators</a> and therefore simplifiable to <code>+</code> and <code>-</code> respectively, I wanted to share an example, that may make it more clear, why <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/plus-element.html\" rel=\"nofollow noreferrer\"><code>plusElement</code></a> or <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/minus-element.html\" rel=\"nofollow noreferrer\"><code>minusElement</code></a> may also make sense to use. Basically that's the case when you do not want the overloaded operator methods to be called (e.g. <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/plus.html\" rel=\"nofollow noreferrer\"><code>plus(elements : Iterable&lt;T&gt;)</code></a>), which may be the case when you are dealing with a list of lists.</p>\n\n<p>Maybe the following samples make that clearer. In the samples all variable assignments show the type they got assigned when calling the respective function and contain the result in the comment at the end of the line. The variable ~ending naming convention is the following:</p>\n\n<ul>\n<li><code>PlusT</code> show calls to <code>plus(element : T)</code></li>\n<li><code>PlusIterable</code> show calls to <code>plus(elements : Iterable&lt;T&gt;)</code></li>\n<li><code>PlusElementT</code> show calls to <code>plusElement(element : T)</code></li>\n</ul>\n\n<p>Samples:</p>\n\n<pre><code>val someEntry = \"some entry\"\nval listOfSomeEntry = listOf(someEntry)\n\nval los : List&lt;String&gt; = listOf(\"listOfString\")\nval lsPlusT         : List&lt;String&gt; = los.plus(someEntry)               // [listOfString, some entry]\nval lsPlusIterable1 : List&lt;String&gt; = los.plus(listOfSomeEntry)         // [listOfString, some entry]\nval lsPlusIterable2 : List&lt;Any&gt;    = los.plus(listOf(listOfSomeEntry)) // [listOfString, [some entry]]\nval lsPlusElementT1 : List&lt;String&gt; = los.plusElement(someEntry)        // [listOfString, some entry]\nval lsPlusElementT2 : List&lt;Any&gt;    = los.plusElement(listOfSomeEntry)  // [listOfString, [some entry]]\n\nval lol : List&lt;List&lt;String&gt;&gt; = listOf(listOf(\"listOfList\"))\n// the following is basically not really correct as we are now dealing with a list of lists of strings, but it shows that llPlusT and llPlusIterable lead to the same (in this case probably wrong) result..\nval llPlusT         : List&lt;Any&gt;          = lol.plus(someEntry)               // [[listOfList], some entry]\nval llPlusIterable  : List&lt;Any&gt;          = lol.plus(listOfSomeEntry)         // [[listOfList], some entry]\nval llPlusIterable2 : List&lt;List&lt;String&gt;&gt; = lol.plus(listOf(listOfSomeEntry)) // [[listOfList], [some entry]]\nval llPlusElement1  : List&lt;Any&gt;          = lol.plusElement(someEntry)        // [[listOfList], some entry]\nval llPlusElement2  : List&lt;List&lt;String&gt;&gt; = lol.plusElement(listOfSomeEntry)  // [[listOfList], [some entry]]\n</code></pre>\n\n<p>As you can see when using <code>+</code> the overloaded variant <code>plus(elements : Iterable&lt;T&gt;)</code> might be used, which will probably make sense in most cases, but may not make sense in some others, e.g. (most of the times) when dealing with a list of lists. Instead of forcing the <code>+</code> to add a list of lists by using <code>+ listOf(anotherList)</code>, you may rather want to use <code>plusElement</code> (<code>plusElement(anotherList)</code>) or if you are sure you want to add only a single element, you may want to omit <code>plus</code> in favor of <code>plusElement</code> (probably a very rare and very special use case... that would be reflected with variant <code>llPlusElement1</code>).</p>\n\n<p>Finally the <code>plusElement</code> or <code>minusElement</code> make it really clear from the naming that what you pass reflects 1 single item of the list, whereas <code>+</code> leaves that basically open... (you should see that however from the context, which with a list of list is probably not that clear anyways ;-)). And a disclaimer at the end: that should not mean that you should use a list of lists, but just in case you find something like that you have <code>plus/minusElement</code> at hand ;-)</p>\n"}], "owner": {"reputation": 4377, "user_id": 4353365, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fOb7w8Ofk5E/AAAAAAAAAAI/AAAAAAAADmc/nymnI-_Ng9g/photo.jpg?sz=128", "display_name": "Francis", "link": "https://stackoverflow.com/users/4353365/francis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1090, "favorite_count": 0, "accepted_answer_id": 53633521, "answer_count": 2, "score": 4, "last_activity_date": 1544028123, "creation_date": 1544016062, "last_edit_date": 1544016376, "question_id": 53633329, "link": "https://stackoverflow.com/questions/53633329/kotlin-collection-plus-%c3%97-pluselement-difference", "title": "Kotlin - collection plus() &#215; plusElement() difference", "body": "<p>What is difference between <code>plus</code> and <code>plusElement</code> (<code>minus</code>, <code>minusElement</code>) functions over the (immutable) <code>List</code> in practice?</p>\n\n<pre><code>operator fun &lt;T&gt; Collection&lt;T&gt;.plus(element: T): List&lt;T&gt;\n\nfun &lt;T&gt; Collection&lt;T&gt;.plusElement(element: T): List&lt;T&gt;\n</code></pre>\n"}, {"tags": ["android", "android-studio", "kotlin", "android-developer-api"], "comments": [{"owner": {"reputation": 5476, "user_id": 2128166, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/87fc02ec60657bdadb80a43b088a7017?s=128&d=identicon&r=PG", "display_name": "Wasim K. Memon", "link": "https://stackoverflow.com/users/2128166/wasim-k-memon"}, "edited": false, "score": 0, "creation_date": 1544012781, "post_id": 53632163, "comment_id": 94123948, "body": "Never store such data in application class. as it will remain in memory even you don&#39;t require it anymore. so try to pass data between activities using <b>Parceable</b> and perform all operation over there."}, {"owner": {"reputation": 41, "user_id": 10743520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b2701e13e79bbbe42238aac53b1a0d9?s=128&d=identicon&r=PG&f=1", "display_name": "nirilo", "link": "https://stackoverflow.com/users/10743520/nirilo"}, "reply_to_user": {"reputation": 5476, "user_id": 2128166, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/87fc02ec60657bdadb80a43b088a7017?s=128&d=identicon&r=PG", "display_name": "Wasim K. Memon", "link": "https://stackoverflow.com/users/2128166/wasim-k-memon"}, "edited": false, "score": 0, "creation_date": 1544013077, "post_id": 53632163, "comment_id": 94124155, "body": "@WasimK.Memon Thanks! However for this assignment I&#39;m to use this only.."}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1544014399, "post_id": 53632163, "comment_id": 94124945, "body": "Please consider the fact that this approach you are trying to do here is considered to be bad practice, so if this is an assignment, the limitations should be specified clearly, and the task that you intend to achieve (not just what code you&#39;ve written)."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 10743520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b2701e13e79bbbe42238aac53b1a0d9?s=128&d=identicon&r=PG&f=1", "display_name": "nirilo", "link": "https://stackoverflow.com/users/10743520/nirilo"}, "edited": false, "score": 0, "creation_date": 1544013278, "post_id": 53632331, "comment_id": 94124282, "body": "Many thanks! However when I try to access it, I get an error &quot; Expecting member declaration&quot; Am I suppose to add something to the manifest?"}, {"owner": {"reputation": 7305, "user_id": 1268507, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/pW5el.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/1268507/alex"}, "reply_to_user": {"reputation": 41, "user_id": 10743520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b2701e13e79bbbe42238aac53b1a0d9?s=128&d=identicon&r=PG&f=1", "display_name": "nirilo", "link": "https://stackoverflow.com/users/10743520/nirilo"}, "edited": false, "score": 0, "creation_date": 1544014489, "post_id": 53632331, "comment_id": 94125011, "body": "@nirilo see the updated answer"}], "tags": [], "owner": {"reputation": 7305, "user_id": 1268507, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/pW5el.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/1268507/alex"}, "is_accepted": false, "score": 0, "last_activity_date": 1544014472, "last_edit_date": 1544014472, "creation_date": 1544012839, "answer_id": 53632331, "question_id": 53632163, "link": "https://stackoverflow.com/questions/53632163/kotlin-how-do-i-use-application-classes/53632331#53632331", "title": "Kotlin How do I use Application Classes?", "body": "<p>You can use companion object, it is like static in java. You can do something like this inside TicketApplication:</p>\n\n<pre><code>companion object {\n    @JvmStatic fun addTicket(ticket:TicketClass){\n        ticketArray?.add(ticket)\n    }\n\n    @JvmStatic fun getArray():ArrayList&lt;TicketClass&gt;?{\n        return ticketArray\n    }\n\n    var ticketArray:ArrayList&lt;TicketClass&gt;? = null\n}\n\ninit {\n     ticketArray = ArrayList&lt;TicketClass&gt;()\n}\n</code></pre>\n\n<p>And access it something like this:</p>\n\n<pre><code>TicketApplication.getArray()\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 10743520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b2701e13e79bbbe42238aac53b1a0d9?s=128&d=identicon&r=PG&f=1", "display_name": "nirilo", "link": "https://stackoverflow.com/users/10743520/nirilo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 797, "favorite_count": 0, "closed_date": 1544012819, "answer_count": 1, "score": 0, "last_activity_date": 1544014472, "creation_date": 1544012251, "question_id": 53632163, "link": "https://stackoverflow.com/questions/53632163/kotlin-how-do-i-use-application-classes", "closed_reason": "Duplicate", "title": "Kotlin How do I use Application Classes?", "body": "<p>How do I make use of application classes to store non-persistent data that can be shared among activities ? The following application has an array of type TicketClass. I would liek to be able to access and append to this array in any activities. I can't seem to find any information on this. Kindly guide me, thank you.</p>\n\n<pre><code>import android.app.Application\nimport java.text.SimpleDateFormat\n\nclass TicketApplication: Application()     {\n\n\n    var moviesArray:ArrayList&lt;TicketClass&gt;? = null\n\n    var sdf:SimpleDateFormat? = null\n\n\n\n    init {\n\n    }\n\n    fun getDateFormat():SimpleDateFormat?{\n        return sdf\n    }\n\n    fun addTicket(ticket:TicketClass){\n        ticketArray?.add(ticket)\n    }\n\n    fun getArray():ArrayList&lt;TicketClass&gt;?{\n        return ticketArray\n    }\n\n\n\n\n}\n</code></pre>\n"}, {"tags": ["kotlin", "dao", "jooq"], "answers": [{"tags": [], "owner": {"reputation": 179634, "user_id": 521799, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb96efa7a5664ba1c4ebf586abd4121f?s=128&d=identicon&r=PG", "display_name": "Lukas Eder", "link": "https://stackoverflow.com/users/521799/lukas-eder"}, "is_accepted": true, "score": 2, "last_activity_date": 1544011512, "creation_date": 1544011512, "answer_id": 53631923, "question_id": 53631766, "link": "https://stackoverflow.com/questions/53631766/using-jooq-dao-to-delete-a-record-with-composite-key/53631923#53631923", "title": "Using jOOQ DAO to delete a record with composite key", "body": "<p>There is currently no other way than to either:</p>\n\n<ul>\n<li>Use the entire POJO type (as you did)</li>\n<li><p>Supply the <code>Record2</code> type as follows</p>\n\n<pre><code>ctx.newRecord(TABLE.COL1, TABLE.COL2).values(key1Uuid, key2Uuid)\n</code></pre>\n\n<p>See: <a href=\"https://www.jooq.org/javadoc/latest/org/jooq/DSLContext.html#newRecord-org.jooq.Field-org.jooq.Field-\" rel=\"nofollow noreferrer\"><code>DSLContext.newRecord(Field&lt;T1&gt;, Field&lt;T2&gt;)</code></a></p></li>\n</ul>\n"}], "owner": {"reputation": 1467, "user_id": 980915, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/93beb63e76fbcf6ee23758450667cd51?s=128&d=identicon&r=PG", "display_name": "Ynv", "link": "https://stackoverflow.com/users/980915/ynv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 53631923, "answer_count": 1, "score": 1, "last_activity_date": 1544017696, "creation_date": 1544010941, "last_edit_date": 1544017696, "question_id": 53631766, "link": "https://stackoverflow.com/questions/53631766/using-jooq-dao-to-delete-a-record-with-composite-key", "title": "Using jOOQ DAO to delete a record with composite key", "body": "<p>I have a table with a composite key, and one additional field. Using standard generated jOOQ DAO, how can a I delete a record? </p>\n\n<p>The API wants a <code>Record2</code>, but I'm not sure how to create one? This is what I currently do:</p>\n\n<pre><code>    val pojo = Pojo(key1Uuid, key2Uuid, LocalDateTime.MIN)\n    dao.delete(pojo)\n</code></pre>\n\n<p>I don't like that I need to provide some bogus data to the last field.</p>\n\n<p>Is there a more elegant way of doing this?</p>\n"}, {"tags": ["android", "kotlin", "sql-update", "android-room"], "answers": [{"tags": [], "owner": {"reputation": 314, "user_id": 4874842, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Mk88WO7hU5Q/AAAAAAAAAAI/AAAAAAAAABg/W9qGoLxl1iE/photo.jpg?sz=128", "display_name": "Mohammad Asheri", "link": "https://stackoverflow.com/users/4874842/mohammad-asheri"}, "is_accepted": false, "score": 4, "last_activity_date": 1544011974, "creation_date": 1544011974, "answer_id": 53632069, "question_id": 53630852, "link": "https://stackoverflow.com/questions/53630852/room-db-update-multiple-rows-with-query/53632069#53632069", "title": "room db update multiple rows with @query", "body": "<p>This is what you need for doing your work.</p>\n\n<pre><code>    @Query(\"Update brand_table set  name = :name where id In (:ids)\")\n    void updateBrands(List&lt;Integer&gt; ids, String name);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 596, "user_id": 2295524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26fa6e0ebc571bb1c95d5fb1015ec020?s=128&d=identicon&r=PG", "display_name": "kphil", "link": "https://stackoverflow.com/users/2295524/kphil"}, "is_accepted": true, "score": 6, "last_activity_date": 1544014609, "creation_date": 1544014609, "answer_id": 53632880, "question_id": 53630852, "link": "https://stackoverflow.com/questions/53630852/room-db-update-multiple-rows-with-query/53632880#53632880", "title": "room db update multiple rows with @query", "body": "<pre><code>@Query(\"UPDATE items SET place = :new_place WHERE id IN (:ids)\")\nfun updateItemPlaces(ids:List&lt;Int&gt;, new_place:String)\n</code></pre>\n\n<p>But keep in mind if your list of ids contains more than 999 items SQLite will throw an exception: </p>\n\n<p><code>SQLiteException too many SQL variables (Sqlite code 1)</code></p>\n"}], "owner": {"reputation": 49, "user_id": 10710852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/363688ce593d9d28e5b1bfec76e9aff4?s=128&d=identicon&r=PG&f=1", "display_name": "E. Reuter", "link": "https://stackoverflow.com/users/10710852/e-reuter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5481, "favorite_count": 0, "accepted_answer_id": 53632880, "answer_count": 2, "score": 1, "last_activity_date": 1544083828, "creation_date": 1544007967, "last_edit_date": 1544010974, "question_id": 53630852, "link": "https://stackoverflow.com/questions/53630852/room-db-update-multiple-rows-with-query", "title": "room db update multiple rows with @query", "body": "<p>I would like to update multiple rows in a room database. But I don't have the objects - I have only the ids.</p>\n\n<p>If I update one row I write something like this to my DAO:</p>\n\n<pre><code>@Query(\"UPDATE items SET place = :new_place WHERE id = :id;\")\nfun updateItemPlace(id:Int, new_place:String)\n</code></pre>\n\n<p>With multiple rows I would need something like this:</p>\n\n<pre><code>@Query(\"UPDATE items SET place = :new_place WHERE id = :ids;\")\nfun updateItemPlaces(ids:List&lt;Int&gt;, new_place:String)\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>@Query(\"UPDATE items SET place = :new_place WHERE id IN :ids;\")\nfun updateItemPlaces(ids:String, new_place:String)\n</code></pre>\n\n<p>where I write something like '(1,4,7,15)' to my ids-String</p>\n\n<p>Can someone tell me a good way to make such an update</p>\n\n<p>because something like</p>\n\n<pre><code>val ids = ListOf(1,4,7,15)\nids.forEach{\n    itemDao.updateItemPlace(it,'new place')\n}\n</code></pre>\n\n<p>does not seem to be a good solution</p>\n"}, {"tags": ["java", "android", "kotlin", "drawerlayout", "arcore"], "owner": {"reputation": 93, "user_id": 9062722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/184fa1c998979d4186a857fc6080b477?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Carrasco Alonso", "link": "https://stackoverflow.com/users/9062722/ivan-carrasco-alonso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1581096367, "creation_date": 1544007944, "last_edit_date": 1544008872, "question_id": 53630846, "link": "https://stackoverflow.com/questions/53630846/why-drawerlayout-doesnt-work-when-arcore-fragment-is-working", "title": "Why DrawerLayout doesnt work when Arcore fragment is working?", "body": "<h1>Problem</h1>\n\n<p>Before than I tap the screen to init ARcore my DrawerLayout works perfectly but when I init ARcore and then I try to open the Drawer Menu It doesnt open I dont understand why, I think it is a problem with ARcore maybe. Some idea ?</p>\n\n<h1>Layout</h1>\n\n<pre><code>      &lt;android.support.v4.widget.DrawerLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\nandroid:id=\"@+id/drawer_layout\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"match_parent\"&gt;\n&lt;!-- The main content view --&gt;\n&lt;RelativeLayout\n    android:id=\"@+id/content_frame\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"&gt;\n\n    &lt;fragment\n        android:id=\"@+id/ar_fragment\"\n        android:name=\"com.google.ar.sceneform.ux.ArFragment\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\" /&gt;\n\n    &lt;ImageView\n        android:layout_width=\"100dp\"\n        android:layout_height=\"100dp\"\n        android:layout_alignParentTop=\"true\"\n        android:layout_alignParentEnd=\"true\"\n        android:padding=\"20dp\"\n        android:src=\"@drawable/logo\" /&gt;\n&lt;/RelativeLayout&gt;\n\n&lt;android.support.v7.widget.RecyclerView\n    android:id=\"@+id/recycler_view\"\n    android:layout_width=\"240dp\"\n    android:layout_height=\"match_parent\"\n    android:layout_gravity=\"start\"\n    android:background=\"@color/backBlue\"\n    android:choiceMode=\"singleChoice\"\n    android:divider=\"@android:color/transparent\"\n    android:dividerHeight=\"0dp\"\n    android:scrollbars=\"vertical\" /&gt;\n</code></pre>\n\n<p></p>\n\n<h1>Code</h1>\n\n<pre><code>class MainActivity : AppCompatActivity() {\nprivate val arFragment: ArFragment by lazy {\n    supportFragmentManager.findFragmentById(R.id.ar_fragment) as         ArFragment\n}\n\nprivate val drawerLayout: DrawerLayout by lazy {\n    findViewById&lt;DrawerLayout&gt;(R.id.drawer_layout)\n}\n\nprivate val drawerRecyclerView: RecyclerView by lazy {\n    findViewById&lt;RecyclerView&gt;(R.id.recycler_view)\n}\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_ar)\n    drawerRecyclerView.setHasFixedSize(true)\n    drawerRecyclerView.layoutManager = LinearLayoutManager(this)\n    initLogic()\n\n}\n    private fun initLogic() {\n    val arController = ArHandler(this, arFragment)\n    drawerRecyclerView.adapter = DrawerRecyclerViewAdapter(GameDAO.instance.game.possession)\n    arController.initAR()\n}\n</code></pre>\n"}, {"tags": ["android", "mvvm", "kotlin", "android-livedata"], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 8310050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/680ec66e1a38c53ae493b65a52528ad0?s=128&d=identicon&r=PG&f=1", "display_name": "\u041d\u0438\u043a\u043e\u043b\u0430\u0439 \u041c\u0435\u0434\u0432\u0435\u0434\u0435\u0432", "link": "https://stackoverflow.com/users/8310050/%d0%9d%d0%b8%d0%ba%d0%be%d0%bb%d0%b0%d0%b9-%d0%9c%d0%b5%d0%b4%d0%b2%d0%b5%d0%b4%d0%b5%d0%b2"}, "is_accepted": false, "score": 0, "last_activity_date": 1544037702, "creation_date": 1544037702, "answer_id": 53639349, "question_id": 53630434, "link": "https://stackoverflow.com/questions/53630434/i-do-not-receive-changes-to-onchange-when-inserting-data-into-the-database/53639349#53639349", "title": "I do not receive changes to onChange when inserting data into the database", "body": "<p>Found what the problem was ...\nIn order for LiveData to be notified of data changes, the method for retrieving data from the database should not have the suspend keyword.</p>\n"}], "owner": {"reputation": 71, "user_id": 8310050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/680ec66e1a38c53ae493b65a52528ad0?s=128&d=identicon&r=PG&f=1", "display_name": "\u041d\u0438\u043a\u043e\u043b\u0430\u0439 \u041c\u0435\u0434\u0432\u0435\u0434\u0435\u0432", "link": "https://stackoverflow.com/users/8310050/%d0%9d%d0%b8%d0%ba%d0%be%d0%bb%d0%b0%d0%b9-%d0%9c%d0%b5%d0%b4%d0%b2%d0%b5%d0%b4%d0%b5%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1544037702, "creation_date": 1544006509, "last_edit_date": 1544009333, "question_id": 53630434, "link": "https://stackoverflow.com/questions/53630434/i-do-not-receive-changes-to-onchange-when-inserting-data-into-the-database", "title": "I do not receive changes to onChange when inserting data into the database", "body": "<p>I'm trying to write applications with mvvm architecture. But I do not receive changes in onChange when I insert data into a database. The logic that I want to achieve: Go to the cache, take the data. Then we go to the server and receive data. If there are changes, update both the cache and ui. Tell me what I'm doing wrong?</p>\n\n<pre><code>class PageFragment : BaseFragment() {\n\n    private val pageName= \"fly\"\n\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n\n        ...\n\n        val viewModel = ViewModelProviders.of(this).get(PageViewModel(activity!!.appliacation)::class.java)\n\n        viewModel.getPages().observe(this, Observer&lt;Page&gt; { page -&gt;\n            adapter.contents = page!!.content\n\n        })\n        viewModel.pageName = pageName\n\n        return view\n    }\n}\n</code></pre>\n\n<p>ViewModel class</p>\n\n<pre><code>class PageViewModel constructor(application: Application) : AndroidViewModel(application) {\n    private var repository: Repository = Repository(application)\n\n    private var mutablePages = MutableLiveData&lt;Page&gt;()\n    fun getPages(): LiveData&lt;Page&gt; = mutablePages\n\n    var pageName: String = \"\"\n        set(value) {\n            field = value\n            loadData(value)\n        }\n\n    private fun loadData(pageName: String) {\n        GlobalScope.launch {\n            withContext(Dispatchers.Main) {\n                mutablePages.value = repository.getPage(pageName)\n            }\n        }\n\n    }\n}\n</code></pre>\n\n<p>Repository class</p>\n\n<pre><code>class Repository(context: Context) {\n\nprivate var dbRepository: DbRepository = DbRepository(context)\n\n....\n\nsuspend fun getPage(pageName: String): Page =\n            dbRepository.getPage(pageName).let { pagesMapper.dbToBusinessEntity(it) }.also {\n//get data from the server and put it into db\n//data from the server put into db successful. By this I will not write how I do it. \n                GlobalScope.launch { updatePage(pageName) }\n            }\n\n....\n\n    }\n</code></pre>\n\n<p>DbRepository class</p>\n\n<pre><code>class DbRepository(context: Context) {\n\nprivate var pagesDao: pagesDao = AppDatabase.getInstance(context).pagesDao()\n\n....\n\nsuspend fun getpage(pageName: String): PageDb =\n            GlobalScope.async { pagesDao.getPage(pageName) }.await()\n\n....\n\n}\n</code></pre>\n\n<p>Dao class</p>\n\n<pre><code>@Dao\ninterface PagesDao {\n\n    @Query(\"SELECT * FROM pages WHERE pageName= :pageName\")\n    fun getPage(pageName: String): PageDb\n\n}\n</code></pre>\n\n<p>Entity data class</p>\n\n<pre><code>@Entity(tableName = \"pages\")\ndata class PageDb(\n\n        var content: List&lt;Any&gt;,\n        @PrimaryKey(autoGenerate = false)\n        var pageName: String\n\n)\n</code></pre>\n\n<p>I would also like to hear criticism of this code. Thanks!</p>\n"}, {"tags": ["android", "android-layout", "kotlin", "admob", "banner"], "comments": [{"owner": {"reputation": 399, "user_id": 10653973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dde25b33460d7a7cc3a0f492bc1d997?s=128&d=identicon&r=PG&f=1", "display_name": "Ibrar Raza", "link": "https://stackoverflow.com/users/10653973/ibrar-raza"}, "edited": false, "score": 0, "creation_date": 1544361131, "post_id": 53629859, "comment_id": 94240845, "body": "try remove admob codes from all activities also from manifest , xml and gradle and check if it happens again."}, {"owner": {"reputation": 33, "user_id": 10382753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3abbdeb98fd233be70e20b1f66402e4f?s=128&d=identicon&r=PG&f=1", "display_name": "Gumangan", "link": "https://stackoverflow.com/users/10382753/gumangan"}, "reply_to_user": {"reputation": 399, "user_id": 10653973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dde25b33460d7a7cc3a0f492bc1d997?s=128&d=identicon&r=PG&f=1", "display_name": "Ibrar Raza", "link": "https://stackoverflow.com/users/10653973/ibrar-raza"}, "edited": false, "score": 0, "creation_date": 1544362324, "post_id": 53629859, "comment_id": 94241125, "body": "App is working and not crashing. But when I pud admob codes it crashes on first open but on next open all is functional"}, {"owner": {"reputation": 399, "user_id": 10653973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dde25b33460d7a7cc3a0f492bc1d997?s=128&d=identicon&r=PG&f=1", "display_name": "Ibrar Raza", "link": "https://stackoverflow.com/users/10653973/ibrar-raza"}, "edited": false, "score": 0, "creation_date": 1544362540, "post_id": 53629859, "comment_id": 94241181, "body": "ok, now try to remove only load ad code from your dictionaryactivity."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 10382753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3abbdeb98fd233be70e20b1f66402e4f?s=128&d=identicon&r=PG&f=1", "display_name": "Gumangan", "link": "https://stackoverflow.com/users/10382753/gumangan"}, "edited": false, "score": 0, "creation_date": 1544008845, "post_id": 53631045, "comment_id": 94121592, "body": "Thanks for the help but still doesnt work,it just said unused import directive, by the way theres error in logcat and &quot;12-05 19:18:40.965 7938-8048/com.gumangan.uecfispiritualhymns.free E/chromium: [ERROR:gl_surface_egl.cc(289)] eglChooseConfig failed with error EGL_SUCCESS&quot;"}, {"owner": {"reputation": 399, "user_id": 10653973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dde25b33460d7a7cc3a0f492bc1d997?s=128&d=identicon&r=PG&f=1", "display_name": "Ibrar Raza", "link": "https://stackoverflow.com/users/10653973/ibrar-raza"}, "reply_to_user": {"reputation": 33, "user_id": 10382753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3abbdeb98fd233be70e20b1f66402e4f?s=128&d=identicon&r=PG&f=1", "display_name": "Gumangan", "link": "https://stackoverflow.com/users/10382753/gumangan"}, "edited": false, "score": 2, "creation_date": 1544009032, "post_id": 53631045, "comment_id": 94121717, "body": "Ok try to remove this line : import kotlinx.android.synthetic.main.activity_main.*"}, {"owner": {"reputation": 33, "user_id": 10382753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3abbdeb98fd233be70e20b1f66402e4f?s=128&d=identicon&r=PG&f=1", "display_name": "Gumangan", "link": "https://stackoverflow.com/users/10382753/gumangan"}, "edited": false, "score": 0, "creation_date": 1544009361, "post_id": 53631045, "comment_id": 94121931, "body": "Im getting errors in &quot;val toggle = ActionBarDrawerToggle(&quot; if I remove that"}, {"owner": {"reputation": 33, "user_id": 10382753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3abbdeb98fd233be70e20b1f66402e4f?s=128&d=identicon&r=PG&f=1", "display_name": "Gumangan", "link": "https://stackoverflow.com/users/10382753/gumangan"}, "edited": false, "score": 0, "creation_date": 1544010064, "post_id": 53631045, "comment_id": 94122377, "body": "There is no error in adView, I can run the project and its showing banner on other activity and also intestial. But on main activity banner is not showing but it is loaded"}, {"owner": {"reputation": 399, "user_id": 10653973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dde25b33460d7a7cc3a0f492bc1d997?s=128&d=identicon&r=PG&f=1", "display_name": "Ibrar Raza", "link": "https://stackoverflow.com/users/10653973/ibrar-raza"}, "reply_to_user": {"reputation": 33, "user_id": 10382753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3abbdeb98fd233be70e20b1f66402e4f?s=128&d=identicon&r=PG&f=1", "display_name": "Gumangan", "link": "https://stackoverflow.com/users/10382753/gumangan"}, "edited": false, "score": 2, "creation_date": 1544010519, "post_id": 53631045, "comment_id": 94122651, "body": "I think you are calling adView from activity_main.xm while adView is in content_main.xml . I will update my answer. See new update."}, {"owner": {"reputation": 399, "user_id": 10653973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dde25b33460d7a7cc3a0f492bc1d997?s=128&d=identicon&r=PG&f=1", "display_name": "Ibrar Raza", "link": "https://stackoverflow.com/users/10653973/ibrar-raza"}, "reply_to_user": {"reputation": 33, "user_id": 10382753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3abbdeb98fd233be70e20b1f66402e4f?s=128&d=identicon&r=PG&f=1", "display_name": "Gumangan", "link": "https://stackoverflow.com/users/10382753/gumangan"}, "edited": false, "score": 0, "creation_date": 1544014285, "post_id": 53631045, "comment_id": 94124877, "body": "@Gumangan Have you added internet permission in manifest ? if yes check your adView app:adUnitId=&quot;@string/ad_unit_banner_list&quot; in content_main.xml"}, {"owner": {"reputation": 33, "user_id": 10382753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3abbdeb98fd233be70e20b1f66402e4f?s=128&d=identicon&r=PG&f=1", "display_name": "Gumangan", "link": "https://stackoverflow.com/users/10382753/gumangan"}, "edited": false, "score": 0, "creation_date": 1544063081, "post_id": 53631045, "comment_id": 94146469, "body": "Thanks for the help I manage to fix it by rearranging the order of codes. I put the AdMob codes below my main codes so the priority is the app codes and second is just the ads."}, {"owner": {"reputation": 33, "user_id": 10382753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3abbdeb98fd233be70e20b1f66402e4f?s=128&d=identicon&r=PG&f=1", "display_name": "Gumangan", "link": "https://stackoverflow.com/users/10382753/gumangan"}, "edited": false, "score": 0, "creation_date": 1544331250, "post_id": 53631045, "comment_id": 94235329, "body": "Hi can you help me fix the bug in my app again."}], "tags": [], "owner": {"reputation": 399, "user_id": 10653973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dde25b33460d7a7cc3a0f492bc1d997?s=128&d=identicon&r=PG&f=1", "display_name": "Ibrar Raza", "link": "https://stackoverflow.com/users/10653973/ibrar-raza"}, "is_accepted": false, "score": 2, "last_activity_date": 1544011216, "last_edit_date": 1544011216, "creation_date": 1544008566, "answer_id": 53631045, "question_id": 53629859, "link": "https://stackoverflow.com/questions/53629859/app-crashes-on-first-open-only-when-admob-is-added-but-working-fine-on-next-open/53631045#53631045", "title": "App crashes on First Open only when AdMob is added but working fine on next open", "body": "<p>In your MainActivity.kt . Try replace this: </p>\n\n<pre><code>lateinit var mAdView: AdView\n\nMobileAds.initialize(this, \"ca-app-pub-3940256099942544~3347511713\")\n\n//Google Ads Banner\nmAdView = findViewById(R.id.adView)\nval adRequest = AdRequest.Builder().build()\nmAdView.loadAd(adRequest)\nmAdView.adListener = object: AdListener() {\n    override fun onAdLoaded() {\n        //adView.visibility = View.VISIBLE\n        //divider.visibility = View.VISIBLE\n        Toast.makeText(applicationContext,\"Banner Ad Loaded\", Toast.LENGTH_LONG).show()\n    }\n    override fun onAdFailedToLoad(errorCode : Int) {\n        //adView.visibility = View.GONE\n        //divider.visibility = View.GONE\n\n        //Timer for Loading Ads\n        Handler().postDelayed({\n\n            mAdView.loadAd(adRequest)\n\n        }, 300000)\n\n        //mAdView.loadAd(adRequest)\n        Toast.makeText(applicationContext,\"Banner Ad Failed to Load\", Toast.LENGTH_LONG).show()\n    }\n    override fun onAdOpened() {\n        // Code to be executed when the ad is displayed.\n    }\n    override fun onAdLeftApplication() {\n        // Code to be executed when the user has left the app.\n    }\n    override fun onAdClosed() {\n        //mAdView.loadAd(adRequest)\n        //Toast.makeText(applicationContext,\"Banner Ad Loaded Again\", Toast.LENGTH_LONG).show()\n    }\n}\n</code></pre>\n\n<p>with this:</p>\n\n<pre><code>import kotlinx.android.synthetic.main.content_main.*\n\nMobileAds.initialize(this,\"ca-app-pub-3940256099942544~3347511713\")\n\nadView.loadAd(AdRequest.Builder().build())\n</code></pre>\n\n<p>and make you sure that adView is visible.</p>\n"}], "owner": {"reputation": 33, "user_id": 10382753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3abbdeb98fd233be70e20b1f66402e4f?s=128&d=identicon&r=PG&f=1", "display_name": "Gumangan", "link": "https://stackoverflow.com/users/10382753/gumangan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1012, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1544331199, "creation_date": 1544004805, "last_edit_date": 1544331199, "question_id": 53629859, "link": "https://stackoverflow.com/questions/53629859/app-crashes-on-first-open-only-when-admob-is-added-but-working-fine-on-next-open", "title": "App crashes on First Open only when AdMob is added but working fine on next open", "body": "<p>My App is working fine and then I tried to add AdMob dependencies. That's when things get complicated. On first install and then open App crashes. But on second and consecutive open the app is working fine, all ads are showing.</p>\n\n<p>For me, this is a bad user experience because at first open they think it is not a good app. And maybe they will uninstall it immediately.</p>\n\n<p>Maybe there's something I need to improve or add but I can't figure it out. I need help regarding polishing my code.</p>\n\n<p><strong>Android Manifest</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\npackage=\"com.gumangan.uecfispiritualhymns\"&gt;\n\n&lt;uses-permission android:name=\"android.permission.INTERNET\" /&gt;\n\n&lt;application\n    android:allowBackup=\"true\"\n    android:icon=\"@mipmap/ic_launcher\"\n    android:label=\"@string/app_name\"\n    android:roundIcon=\"@mipmap/ic_launcher_round\"\n    android:supportsRtl=\"true\"\n    android:theme=\"@style/AppTheme\"&gt;\n\n    &lt;!-- TODO: Change android:value when final building  --&gt;\n    &lt;!--Sample AdMob App ID: ca-app-pub-3940256099942544~3347511713--&gt;\n    &lt;meta-data\n        android:name=\"com.google.android.gms.ads.APPLICATION_ID\"\n        android:value=\"ca-app-pub-3940256099942544~3347511713\"/&gt;\n\n    &lt;activity\n        android:name=\"com.gumangan.uecfispiritualhymns.DictionaryActivity\"\n        android:label=\"@string/app_name\"\n        android:launchMode=\"singleTop\"\n        android:theme=\"@style/AppTheme.NoActionBar\"&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=\"android.intent.action.MAIN\" /&gt;\n\n            &lt;category android:name=\"android.intent.category.LAUNCHER\" /&gt;\n\n            &lt;action android:name=\"android.intent.action.SEARCH\" /&gt;\n        &lt;/intent-filter&gt;\n\n        &lt;meta-data\n            android:name=\"android.app.searchable\"\n            android:resource=\"@xml/searchable\" /&gt;\n    &lt;/activity&gt;\n    &lt;activity \nandroid:name=\"com.gumangan.uecfispiritualhymns.WordDetailActivity\"\n</code></pre>\n\n<p>android:parentActivityName=\"com.gumangan.uecfispiritualhymns.DictionaryActivity\">\n            \n\n<pre><code>android:value=\"com.gumangan.uecfispiritualhymns.DictionaryActivity\"/&gt;\n    &lt;/activity&gt;\n&lt;/application&gt;\n</code></pre>\n\n<p><strong>Gradle Properties</strong></p>\n\n<pre><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.\n\nbuildscript {\next.kotlin_version = '1.3.10'\nrepositories {\n    google()\n    jcenter()\n}\ndependencies {\n    classpath 'com.android.tools.build:gradle:3.2.1'\n    classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n\n    // NOTE: Do not place your application dependencies here; they belong\n    // in the individual module build.gradle files\n}\n}\n\nallprojects {\nrepositories {\n    google()\n    jcenter()\n    maven {\n        url \"https://maven.google.com\"\n    }\n}\n}\n\ntask clean(type: Delete) {\ndelete rootProject.buildDir\n}\n</code></pre>\n\n<p><strong>Gradle Dependencies</strong></p>\n\n<pre><code>apply plugin: 'com.android.application'\n\napply plugin: 'kotlin-android'\n\napply plugin: 'kotlin-android-extensions'\n\nandroid {\ncompileSdkVersion 27\ndefaultConfig {\n    applicationId \"com.gumangan.uecfispiritualhymns\"\n    minSdkVersion 16\n    targetSdkVersion 27\n    versionCode 1\n    versionName \"1.0\"\n    testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n}\nbuildTypes {\n    release {\n        minifyEnabled false\n        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n    }\n}\n}\n\ndependencies {\nimplementation fileTree(dir: 'libs', include: ['*.jar'])\nimplementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\nimplementation 'com.android.support:appcompat-v7:27.1.1'\nimplementation 'com.android.support:support-v4:27.1.1'\nimplementation 'com.android.support.constraint:constraint-layout:1.1.3'\nimplementation 'com.android.support:design:27.1.1'\nimplementation 'com.android.support:cardview-v7:27.1.1'\nimplementation 'com.android.support:customtabs:27.1.1'\n\nimplementation 'com.google.android.gms:play-services-ads:17.1.2'\n\ntestImplementation 'junit:junit:4.12'\nandroidTestImplementation 'com.android.support.test:runner:1.0.2'\nandroidTestImplementation 'com.android.support.test.espresso:espresso-core:3.0.2'\n}\n</code></pre>\n\n<p><strong>DatabaseHelper</strong></p>\n\n<pre><code>package com.gumangan.uecfispiritualhymns\n\nimport android.content.Context\nimport android.database.Cursor\nimport android.database.sqlite.SQLiteDatabase\nimport android.database.sqlite.SQLiteOpenHelper\nimport android.preference.PreferenceManager\n\nimport java.io.FileOutputStream\nimport java.io.IOException\nimport java.io.InputStream\nimport java.io.OutputStream\n\nclass DatabaseHelper(private var mContext: Context) : SQLiteOpenHelper(mContext, DATABASE_NAME, null, DATABASE_VERSION) {\ncompanion object {\n    private val DATABASE_NAME = \"simple_dict.db\"\n    private val DATABASE_VERSION = 1\n    val DB_CREATED = \"DB_CREATED\"\n}\n\nprivate var mCreateDb = false\nprivate var mUpgradeDb = false\n\nprivate fun copyDatabaseFromAssets(db: SQLiteDatabase?) {\n    var inputStream: InputStream? = null\n    var outputStream: OutputStream? = null\n\n    try {\n        inputStream = mContext.assets.open(DATABASE_NAME)\n        outputStream = FileOutputStream(db?.path)\n\n        val buffer = ByteArray(1024)\n        var length: Int = inputStream!!.read(buffer)\n        while (length &gt; 0) {\n            outputStream.write(buffer, 0, length)\n            length = inputStream.read(buffer)\n        }\n        outputStream.flush()\n\n        val  copiedDb = mContext.openOrCreateDatabase(DATABASE_NAME, 0, null)\n\n        val isDbCreated = copiedDb != null\n\n        copiedDb.execSQL(\"PRAGMA user_version = $DATABASE_VERSION\")\n        copiedDb.close()\n\n        // DB_CREATED\n        val sharedPref = PreferenceManager.getDefaultSharedPreferences(mContext)\n        val sharePrefEditor = sharedPref.edit()\n        sharePrefEditor.putBoolean(DB_CREATED, isDbCreated)\n        sharePrefEditor.apply()\n    } catch (e: IOException) {\n        e.printStackTrace()\n        throw Error(\"copyDatabaseFromAssets: Error copying database.\")\n    } finally {\n        try {\n            outputStream?.close()\n            inputStream?.close()\n        }catch (e: IOException) {\n            e.printStackTrace()\n            throw Error(\"copyDatabaseFromAssets: Error closing stream.\")\n        }\n    }\n\n}\n\noverride fun onCreate(db: SQLiteDatabase?) {\n    mCreateDb = true\n}\n\noverride fun onUpgrade(db: SQLiteDatabase?, oldVersion: Int, newVersion: Int) {\n    if(newVersion &gt; oldVersion) {\n        mUpgradeDb = true\n    }\n}\n\noverride fun onOpen(db: SQLiteDatabase?) {\n    if(mCreateDb) {\n        mCreateDb = false\n        copyDatabaseFromAssets(db)\n    }\n\n    if(mUpgradeDb) {\n        mUpgradeDb = false\n        copyDatabaseFromAssets(db)\n    }\n}\n\nfun getWords(wordPrefix: String = \"\"): Cursor {\n    return if(wordPrefix.isBlank()) {\n        readableDatabase.query(DictionaryEntryContract.TABLE_NAME, null,\n                null, null, null, null,\n                \"${DictionaryEntryContract.COLUMN_ID} ASC\")\n    } else {\n        readableDatabase.query(DictionaryEntryContract.TABLE_NAME, null,\n                \"${DictionaryEntryContract.COLUMN_WORD} LIKE ?\", arrayOf(\"$wordPrefix%\"),\n                null, null, \"${DictionaryEntryContract.COLUMN_ID} ASC\")\n    }\n}\n\nfun getWord(id: String): Cursor {\n    return readableDatabase.query(DictionaryEntryContract.TABLE_NAME, null,\n            \"${DictionaryEntryContract.COLUMN_ID}= ?\", arrayOf(id),\n            null, null, null)\n}\n}\n</code></pre>\n\n<p><strong>SearchListAdapter</strong></p>\n\n<pre><code>package com.gumangan.uecfispiritualhymns\n\nimport android.content.Context\nimport android.database.Cursor\nimport android.graphics.Color\nimport android.view.LayoutInflater\nimport android.view.View\nimport android.view.ViewGroup\nimport android.widget.CursorAdapter\nimport android.widget.TextView\n\nclass SearchListAdapter(context: Context, cursor: Cursor) : CursorAdapter(context, cursor, 0) {\nprivate class ViewHolder {\n    var txtWord: TextView? = null\n    var txtType: TextView? = null\n    var txtMeaning: TextView? = null\n\n    var wordColumnIndex: Int = 0\n    var typeColumnIndex: Int = 0\n    var meaningColumnIndex: Int = 0\n}\n\noverride fun newView(context: Context?, cursor: Cursor?, parent: ViewGroup?): View {\n    val layoutInflater = LayoutInflater.from(context)\n    val newView = layoutInflater.inflate(R.layout.search_list_item, parent, false)\n\n    val viewHolder = ViewHolder()\n    viewHolder.txtWord = newView.findViewById&lt;TextView&gt;(R.id.txtWord)\n    viewHolder.txtType = newView.findViewById&lt;TextView&gt;(R.id.txtType)\n    viewHolder.txtMeaning = newView.findViewById&lt;TextView&gt;(R.id.txtMeaning)\n\n    viewHolder.wordColumnIndex = cursor!!.getColumnIndexOrThrow(DictionaryEntryContract.COLUMN_WORD)\n    viewHolder.typeColumnIndex = cursor!!.getColumnIndexOrThrow(DictionaryEntryContract.COLUMN_TYPE)\n    viewHolder.meaningColumnIndex = cursor!!.getColumnIndexOrThrow(DictionaryEntryContract.COLUMN_MEANING)\n\n    newView.tag = viewHolder\n\n    return newView\n}\n\noverride fun bindView(view: View?, context: Context?, cursor: Cursor?) {\n    val viewHolder = view!!.tag as ViewHolder\n\n    viewHolder.txtWord?.text = cursor?.getString(viewHolder.wordColumnIndex)\n    viewHolder.txtType?.text = cursor?.getString(viewHolder.typeColumnIndex)\n    viewHolder.txtMeaning?.text = cursor?.getString(viewHolder.meaningColumnIndex)\n}\n\noverride fun getView(position: Int, convertView: View?, parent: ViewGroup?): View {\n    val view = super.getView(position, convertView, parent)\n\n    if(position % 2 == 0) {\n        view.setBackgroundColor(Color.LTGRAY)\n    } else {\n        view.setBackgroundColor(Color.WHITE)\n    }\n\n    return view;\n}\n}\n</code></pre>\n\n<p><strong>DictionaryEntryContract</strong></p>\n\n<pre><code>package com.gumangan.uecfispiritualhymns\n\nimport android.provider.BaseColumns\n\nclass DictionaryEntryContract : BaseColumns {\nprivate constructor()\n\ncompanion object {\n    val TABLE_NAME = \"english_words\"\n\n    val COLUMN_ID = BaseColumns._ID\n    val COLUMN_WORD = \"word\"\n    val COLUMN_TYPE = \"type\"\n    val COLUMN_MEANING = \"meaning\"\n}\n}\n</code></pre>\n\n<p><strong>DictionaryActivity</strong></p>\n\n<pre><code>package com.gumangan.uecfispiritualhymns\n\nimport android.app.SearchManager\nimport android.content.Context\nimport android.content.Intent\nimport android.os.AsyncTask\nimport android.os.Bundle\nimport android.preference.PreferenceManager\nimport android.support.v7.app.AppCompatActivity\nimport android.support.v7.widget.Toolbar\nimport android.support.v7.widget.SearchView\nimport android.util.Log\nimport android.view.Menu\nimport android.view.MenuItem\nimport android.widget.AdapterView\nimport android.widget.ListView\nimport com.google.android.gms.ads.AdRequest\nimport com.google.android.gms.ads.AdView\nimport com.google.android.gms.ads.MobileAds\nimport java.lang.ref.WeakReference\n\nclass DictionaryActivity : AppCompatActivity() {\n\ncompanion object {\n    val TAG = \"DictionaryActivity\"\n    val LAST_SEARCH_WORD: String = \"LAST_SEARCH_WORD\"\n}\n\nvar mDbHelper: DatabaseHelper? = null\nprivate var mSearchListAdapter: SearchListAdapter? = null\nprivate var mSearchQuery: String = \"\"\n\n//Google Ads Banner Variable\nlateinit var mAdView : AdView\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.content_dictionary)\n\n    mSearchQuery = savedInstanceState?.getString(LAST_SEARCH_WORD) ?: \"\"\n    mDbHelper = DatabaseHelper(applicationContext)\n\n    if(!isDbLoaded()) {\n        showLoadingUI()\n        LoadViewTask(this).execute()\n    } else {\n        showDictUI()\n    }\n\n    /* TODO: Change ADMOB ID's when final building  */\n    //Google Ads\n    //MobileAds.initialize(this, \"ca-app-pub-3940256099942544~3347511713\")\n    //Google Test Ads\n    MobileAds.initialize(this, \"ca-app-pub-3940256099942544~3347511713\")\n\n    //Google Ads Banner\n    mAdView = findViewById(R.id.adView)\n    val adRequest = AdRequest.Builder().build()\n    mAdView.loadAd(adRequest)\n\n}\n\nprivate fun isDbLoaded(): Boolean {\n    val sharedPref = PreferenceManager.getDefaultSharedPreferences(this)\n    return sharedPref.getBoolean(DatabaseHelper.DB_CREATED, false)\n}\n\nprivate fun showLoadingUI() {\n    setContentView(R.layout.activity_dictionary_loading)\n}\n\nprivate fun showDictUI() {\n    setContentView(R.layout.activity_dictionary)\n\n    val toolbar = findViewById&lt;Toolbar&gt;(R.id.toolbar)\n    setSupportActionBar(toolbar)\n\n    supportActionBar?.setIcon(R.mipmap.ic_launcher)\n\n    mSearchListAdapter = SearchListAdapter(applicationContext, mDbHelper!!.getWords(mSearchQuery))\n    val lstWords = (findViewById&lt;ListView&gt;(R.id.lstWords))\n    lstWords.adapter = mSearchListAdapter\n    lstWords.onItemClickListener = AdapterView.OnItemClickListener { _, _, _, id -&gt;\n        val wordDetailIntent = Intent(applicationContext, WordDetailActivity::class.java)\n        wordDetailIntent.putExtra(WordDetailActivity.WORD_ID, \"$id\")\n        startActivity(wordDetailIntent)\n    }\n}\n\noverride fun onSaveInstanceState(outState: Bundle?) {\n    super.onSaveInstanceState(outState)\n    outState?.putString(LAST_SEARCH_WORD, mSearchQuery)\n}\n\noverride fun onRestoreInstanceState(savedInstanceState: Bundle?) {\n    mSearchQuery = savedInstanceState?.getString(LAST_SEARCH_WORD) ?: \"\"\n    super.onRestoreInstanceState(savedInstanceState)\n}\n\noverride fun onNewIntent(intent: Intent?) {\n    super.onNewIntent(intent)\n\n    if(intent?.action.equals(Intent.ACTION_SEARCH)) {\n        val searchQuery = intent?.getStringExtra(SearchManager.QUERY) ?: \"\"\n        updateListByQuery(searchQuery)\n    }\n}\n\noverride fun onCreateOptionsMenu(menu: Menu): Boolean {\n    menuInflater.inflate(R.menu.menu_dictionary, menu)\n\n    val searchView: SearchView? = menu.findItem(R.id.action_search).actionView as? SearchView\n    val searchManager: SearchManager = getSystemService(Context.SEARCH_SERVICE) as SearchManager\n    searchView?.setSearchableInfo(searchManager.getSearchableInfo(componentName))\n\n    searchView?.setOnQueryTextListener(object : SearchView.OnQueryTextListener{\n        override fun onQueryTextSubmit(query: String?): Boolean {\n            return false\n        }\n\n        override fun onQueryTextChange(newText: String?): Boolean {\n            updateListByQuery(newText ?: \"\")\n            return true\n        }\n    })\n\n    return true\n}\n\nprivate fun updateListByQuery(searchQuery: String) {\n    mSearchQuery = searchQuery\n    mSearchListAdapter?.changeCursor(mDbHelper!!.getWords(searchQuery))\n}\n\noverride fun onOptionsItemSelected(item: MenuItem): Boolean {\n    return when (item.itemId) {\n        R.id.action_search -&gt; {\n            onSearchRequested()\n            true\n        }\n        else -&gt; super.onOptionsItemSelected(item)\n    }\n}\n\nprivate class LoadViewTask(activity: DictionaryActivity) : AsyncTask&lt;Void, Void, Void&gt;() {\n    private var mActivity = WeakReference&lt;DictionaryActivity&gt;(activity)\n\n    override fun doInBackground(vararg params: Void): Void? {\n        if(getActivityInstance()?.mDbHelper?.readableDatabase?.isOpen == true) {\n            Log.d(TAG, \"Db is OK.\")\n        }\n        return null\n    }\n\n    override fun onPostExecute(result: Void?) {\n        if(getActivityInstance()?.isDbLoaded() == true) {\n            getActivityInstance()?.showDictUI()\n        }\n    }\n\n    private fun getActivityInstance() = mActivity.get()\n}\n}\n</code></pre>\n\n<p><strong>WordDetailActivity</strong></p>\n\n<pre><code>package com.gumangan.uecfispiritualhymns\n\nimport android.support.v7.app.AppCompatActivity\nimport android.os.Bundle\nimport android.widget.TextView\n\nclass WordDetailActivity : AppCompatActivity() {\n\ncompanion object {\n    const val WORD_ID = \"WORD_ID\"\n}\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_word_detail)\n\n    val wordId = intent.getStringExtra(WORD_ID) ?: \"\"\n    if(wordId.isBlank()) {\n        finish()\n    }\n\n    val dbHelper = DatabaseHelper(applicationContext)\n    val cursor = dbHelper.getWord(wordId)\n    if(cursor.moveToFirst()) {\n        val txtWord = findViewById&lt;TextView&gt;(R.id.txtWord)\n        val txtType = findViewById&lt;TextView&gt;(R.id.txtType)\n        val txtMeaning = findViewById&lt;TextView&gt;(R.id.txtMeaning)\n\n        txtWord?.text = cursor.getString(cursor.getColumnIndexOrThrow(DictionaryEntryContract.COLUMN_WORD))\n        txtType?.text = cursor.getString(cursor.getColumnIndexOrThrow(DictionaryEntryContract.COLUMN_TYPE))\n        txtMeaning?.text = cursor.getString(cursor.getColumnIndexOrThrow(DictionaryEntryContract.COLUMN_MEANING))\n    }\n}\n}\n</code></pre>\n\n<p><strong>activity_dictionary.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.design.widget.CoordinatorLayout \nxmlns:android=\"http://schemas.android.com/apk/res/android\"\nxmlns:app=\"http://schemas.android.com/apk/res-auto\"\nxmlns:tools=\"http://schemas.android.com/tools\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"match_parent\"\ntools:context=\"com.gumangan.uecfispiritualhymns.DictionaryActivity\"&gt;\n\n&lt;android.support.design.widget.AppBarLayout\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:theme=\"@style/AppTheme.AppBarOverlay\"&gt;\n\n    &lt;android.support.v7.widget.Toolbar\n        android:id=\"@+id/toolbar\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"?attr/actionBarSize\"\n        android:background=\"?attr/colorPrimary\"\n        app:popupTheme=\"@style/AppTheme.PopupOverlay\" /&gt;\n\n&lt;/android.support.design.widget.AppBarLayout&gt;\n\n&lt;include layout=\"@layout/content_dictionary\" /&gt;\n\n&lt;/android.support.design.widget.CoordinatorLayout&gt;\n</code></pre>\n\n<p><strong>content_dictionary.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.constraint.ConstraintLayout \nxmlns:android=\"http://schemas.android.com/apk/res/android\"\nxmlns:app=\"http://schemas.android.com/apk/res-auto\"\nxmlns:tools=\"http://schemas.android.com/tools\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"match_parent\"\napp:layout_behavior=\"@string/appbar_scrolling_view_behavior\"\ntools:context=\"com.gumangan.uecfispiritualhymns.DictionaryActivity\"\ntools:showIn=\"@layout/activity_dictionary\"&gt;\n\n&lt;ListView\n    android:id=\"@+id/lstWords\"\n    android:layout_width=\"0dp\"\n    android:layout_height=\"0dp\"\n    android:layout_marginBottom=\"0dp\"\n    android:layout_marginEnd=\"0dp\"\n    android:layout_marginStart=\"0dp\"\n    android:layout_marginTop=\"0dp\"\n    app:layout_constraintBottom_toBottomOf=\"parent\"\n    app:layout_constraintEnd_toEndOf=\"parent\"\n    app:layout_constraintStart_toStartOf=\"parent\"\n    app:layout_constraintTop_toTopOf=\"parent\" /&gt;\n\n\n    &lt;!--Google Ads Banner Display--&gt;\n    &lt;com.google.android.gms.ads.AdView\n        xmlns:ads=\"http://schemas.android.com/apk/res-auto\"\n        android:id=\"@+id/adView\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_alignParentBottom=\"true\"\n        android:layout_centerHorizontal=\"true\"\n        android:layout_marginBottom=\"5dp\"\n        android:visibility=\"visible\"\n        ads:adSize=\"LARGE_BANNER\"\n        ads:adUnitId=\"ca-app-pub-3940256099942544/6300978111\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintLeft_toLeftOf=\"parent\"\n        app:layout_constraintRight_toRightOf=\"parent\"&gt;\n\n    &lt;/com.google.android.gms.ads.AdView&gt;\n\n&lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n\n<p><strong>activity_dictionary_loading.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.constraint.ConstraintLayout \nxmlns:android=\"http://schemas.android.com/apk/res/android\"\nxmlns:app=\"http://schemas.android.com/apk/res-auto\"\nxmlns:tools=\"http://schemas.android.com/tools\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"match_parent\"\ntools:context=\"com.gumangan.uecfispiritualhymns.DictionaryActivity\"&gt;\n\n&lt;TextView\n    android:id=\"@+id/textView\"\n    android:layout_width=\"0dp\"\n    android:layout_height=\"wrap_content\"\n    android:layout_marginBottom=\"8dp\"\n    android:layout_marginEnd=\"8dp\"\n    android:layout_marginStart=\"8dp\"\n    android:layout_marginTop=\"8dp\"\n    android:text=\"@string/dictionary_db_preparing\"\n    android:textAlignment=\"center\"\n    android:textSize=\"18sp\"\n    app:layout_constraintBottom_toBottomOf=\"parent\"\n    app:layout_constraintEnd_toEndOf=\"parent\"\n    app:layout_constraintStart_toStartOf=\"parent\"\n    app:layout_constraintTop_toTopOf=\"parent\"\n    tools:text=\"@string/dictionary_db_preparing\" /&gt;\n&lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n\n<p><strong>search_list_item.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\nxmlns:tools=\"http://schemas.android.com/tools\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"match_parent\"\nandroid:orientation=\"vertical\"\nandroid:padding=\"16dp\"&gt;\n\n&lt;TextView\n    android:id=\"@+id/txtWord\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:textSize=\"18sp\"\n    android:textStyle=\"bold\"\n    tools:text=\"Word\" /&gt;\n\n&lt;TextView\n    android:id=\"@+id/txtType\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:textSize=\"14sp\"\n    android:textStyle=\"italic\"\n    tools:text=\"Type\" /&gt;\n\n&lt;TextView\n    android:id=\"@+id/txtMeaning\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:textSize=\"18sp\"\n    tools:text=\"Meaning\" /&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p><strong>activity_word_detail.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\nxmlns:tools=\"http://schemas.android.com/tools\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"match_parent\"\nandroid:orientation=\"vertical\"\nandroid:padding=\"16dp\"\ntools:context=\"com.gumangan.uecfispiritualhymns.WordDetailActivity\"&gt;\n\n&lt;TextView\n    android:id=\"@+id/txtWord\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:textSize=\"20sp\"\n    android:textStyle=\"bold\"\n    tools:text=\"Word\" /&gt;\n\n&lt;TextView\n    android:id=\"@+id/txtType\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:textSize=\"18sp\"\n    android:textStyle=\"italic\"\n    tools:text=\"Type\" /&gt;\n\n&lt;TextView\n    android:id=\"@+id/txtMeaning\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:textSize=\"20sp\"\n    tools:text=\"Meaning\" /&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p><strong>This is the LogCat error</strong></p>\n\n<pre><code>12-09 07:52:40.554 14146-14146/com.gumangan.uecfispiritualhymns E/AndroidRuntime: FATAL EXCEPTION: main\n    java.lang.RuntimeException: Unable to start activity\nComponentInfo{com.gumangan.uecfispiritualhymns/com.gumangan.uecfispiritualhymns.DictionaryActivity}: java.lang.IllegalStateException: findViewById(R.id.adView) must not be null\n        at \n    android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)\n        at \n    android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)\n        at android.app.ActivityThread.access$600(ActivityThread.java:130)\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)\n        at android.os.Handler.dispatchMessage(Handler.java:99)\n        at android.os.Looper.loop(Looper.java:137)\n        at android.app.ActivityThread.main(ActivityThread.java:4745)\n        at java.lang.reflect.Method.invokeNative(Native Method)\n        at java.lang.reflect.Method.invoke(Method.java:511)\n        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)\n        at dalvik.system.NativeStart.main(Native Method)\n     Caused by: java.lang.IllegalStateException: findViewById(R.id.adView) must not be null\n        at com.gumangan.uecfispiritualhymns.DictionaryActivity.onCreate(DictionaryActivity.kt:57)\n        at android.app.Activity.performCreate(Activity.java:5008)\n        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)\u00a0\n        at android.app.ActivityThread.access$600(ActivityThread.java:130)\u00a0\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)\u00a0\n        at android.os.Handler.dispatchMessage(Handler.java:99)\u00a0\n        at android.os.Looper.loop(Looper.java:137)\u00a0\n        at android.app.ActivityThread.main(ActivityThread.java:4745)\u00a0\n        at java.lang.reflect.Method.invokeNative(Native Method)\u00a0\n        at java.lang.reflect.Method.invoke(Method.java:511)\u00a0\n        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)\u00a0\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)\u00a0\n        at dalvik.system.NativeStart.main(Native Method)\u00a0\n</code></pre>\n\n<p>The app is about dictionary</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 11, "user_id": 9641672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c198941edbd9cea2a3e4dc129148213a?s=128&d=identicon&r=PG&f=1", "display_name": "Bhavin Vala", "link": "https://stackoverflow.com/users/9641672/bhavin-vala"}, "edited": false, "score": 0, "creation_date": 1544004551, "post_id": 53629759, "comment_id": 94119058, "body": "here is a full code"}, {"owner": {"reputation": 11, "user_id": 9641672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c198941edbd9cea2a3e4dc129148213a?s=128&d=identicon&r=PG&f=1", "display_name": "Bhavin Vala", "link": "https://stackoverflow.com/users/9641672/bhavin-vala"}, "edited": false, "score": 0, "creation_date": 1544004664, "post_id": 53629759, "comment_id": 94119127, "body": "ops.add(             ContentProviderOperation                 .newInsert(ContactsContract.Data.CONTENT_URI)                 .withValueBackReference(                     ContactsContract.Data.RAW_CONTACT_ID,                     rawContactInsertIndex )                 .withValue(ContactsContract.Data.MIMETYPE, Phone.CONTENT_ITEM_TYPE)                 .withValue(Phone.NUMBER, &quot;9X-XXXXXXXXX&quot;)                 .withValue(ContactsContract.Data.MIMETYPE, Phone.CONTENT_ITEM_TYPE)                 .withValue(Phone.TYPE, &quot;1&quot;).build()         )"}, {"owner": {"reputation": 11, "user_id": 9641672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c198941edbd9cea2a3e4dc129148213a?s=128&d=identicon&r=PG&f=1", "display_name": "Bhavin Vala", "link": "https://stackoverflow.com/users/9641672/bhavin-vala"}, "edited": false, "score": 0, "creation_date": 1544004677, "post_id": 53629759, "comment_id": 94119135, "body": "ops.add(             ContentProviderOperation                 .newInsert(ContactsContract.Data.CONTENT_URI)                 .withValueBackReference(                     ContactsContract.Data.RAW_CONTACT_ID,                     rawContactInsertIndex                 )                 .withValue(ContactsContract.Data.MIMETYPE, StructuredName.CONTENT_ITEM_TYPE)                 .withValue(StructuredName.DISPLAY_NAME, &quot;Mike Sullivan&quot;)                 .build()         )"}, {"owner": {"reputation": 11, "user_id": 9641672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c198941edbd9cea2a3e4dc129148213a?s=128&d=identicon&r=PG&f=1", "display_name": "Bhavin Vala", "link": "https://stackoverflow.com/users/9641672/bhavin-vala"}, "edited": false, "score": 0, "creation_date": 1544004693, "post_id": 53629759, "comment_id": 94119144, "body": "try {             val res = contentResolver.applyBatch(ContactsContract.AUTHORITY, ops)            Toast.makeText(this, &quot;contact add$res&quot;, Toast.LENGTH_SHORT).show()         } catch (e: RemoteException) {             // TODO Auto-generated catch block             e.printStackTrace()         } catch (e: OperationApplicationException) {             // TODO Auto-generated catch block             e.printStackTrace()         }"}, {"owner": {"reputation": 4231, "user_id": 10524205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81adbc979c58baca9d3e85db4a7ea421?s=128&d=identicon&r=PG", "display_name": "Bsquare \u212c\u212c", "link": "https://stackoverflow.com/users/10524205/bsquare-%e2%84%ac%e2%84%ac"}, "edited": false, "score": 0, "creation_date": 1544007486, "post_id": 53629759, "comment_id": 94120819, "body": "Improved legibility (not enough to get a clear question)."}], "owner": {"reputation": 11, "user_id": 9641672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c198941edbd9cea2a3e4dc129148213a?s=128&d=identicon&r=PG&f=1", "display_name": "Bhavin Vala", "link": "https://stackoverflow.com/users/9641672/bhavin-vala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544007486, "creation_date": 1544004524, "last_edit_date": 1544007486, "question_id": 53629759, "link": "https://stackoverflow.com/questions/53629759/how-to-add-contact-in-mobile-contact-list-using-content-provider-kolin-android", "title": "how to add contact in mobile contact list using content provider kolin android?", "body": "<blockquote>\n  <p>how to add contact in mobile contact list using content provider \n  <strong>please help me</strong></p>\n</blockquote>\n\n<p><strong>here is an error</strong>                        </p>\n\n<pre><code>val res = contentResolver.applyBatch(ContactsContract.AUTHORITY, ops)\n</code></pre>\n"}, {"tags": ["android", "unit-testing", "junit", "kotlin", "mockito"], "comments": [{"owner": {"reputation": 719, "user_id": 4608819, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/Inopt.jpg?s=128&g=1", "display_name": "Pradeep Deshmukh", "link": "https://stackoverflow.com/users/4608819/pradeep-deshmukh"}, "edited": false, "score": 0, "creation_date": 1544004543, "post_id": 53629611, "comment_id": 94119044, "body": "can you share your logs too"}, {"owner": {"reputation": 21, "user_id": 10748680, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-84FW37sWj0Q/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-iHlx6Y5lE0qZVjKeNWp4c7Y59c5Q/mo/photo.jpg?sz=128", "display_name": "Abhishek Dubey", "link": "https://stackoverflow.com/users/10748680/abhishek-dubey"}, "reply_to_user": {"reputation": 719, "user_id": 4608819, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/Inopt.jpg?s=128&g=1", "display_name": "Pradeep Deshmukh", "link": "https://stackoverflow.com/users/4608819/pradeep-deshmukh"}, "edited": false, "score": 0, "creation_date": 1544004731, "post_id": 53629611, "comment_id": 94119166, "body": "Done i have shared"}, {"owner": {"reputation": 413, "user_id": 1392654, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/MC2Xb.jpg?s=128&g=1", "display_name": "While True", "link": "https://stackoverflow.com/users/1392654/while-true"}, "edited": false, "score": 0, "creation_date": 1544022402, "post_id": 53629611, "comment_id": 94130073, "body": "I don&#39;t see NullPointerExceptio. It fails because of an assertion. So, I guess, when you tell the mock to return a response only when it&#39;s <code>sdem&#47;sdem</code> it does. And when you fills different arguments, it doesn&#39;t return anything and fails, or returns null and you get your NPE. Can you clarify some more what&#39;s wrong?)"}], "answers": [{"tags": [], "owner": {"reputation": 495, "user_id": 4064174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d98f3e1d7061d5ce29668eae3f435b1e?s=128&d=identicon&r=PG", "display_name": "Kadir Erturk", "link": "https://stackoverflow.com/users/4064174/kadir-erturk"}, "is_accepted": false, "score": 1, "last_activity_date": 1572279938, "creation_date": 1572279938, "answer_id": 58594727, "question_id": 53629611, "link": "https://stackoverflow.com/questions/53629611/unit-testing-viewmodel-in-android-using-mockito-mvvm-pattern/58594727#58594727", "title": "Unit testing viewmodel in android using mockito MVVM pattern", "body": "<p>I was able to test ViewModel with following</p>\n\n<pre><code>@RunWith(MockitoJUnitRunner.class)\npublic class AutoConfigureViewModelTest {\n\n   private final String TAG = this.getClass().getSimpleName();\n\n   @Mock\n   private Application application;\n\n   @Rule\n   public InstantTaskExecutorRule instantTaskExecutorRule = new InstantTaskExecutorRule();\n\n   private AutoConfigureViewModel viewModel;\n\n   @Before\n   public void setup() throws Exception {\n       /* test actual method */\n       viewModel = Mockito.spy(new AutoConfigureViewModel(application));\n\n   }\n\n   @Test\n   public void getTestStringForEMH() {\n       /* this test is to make sure CRC function works as expected for EMH */\n       byte[] test = viewModel.getTestStringForDevice(\"EMH\");\n       byte[] exp = {95, 81, 48, 48, 48, 49, 50, 1, -93, 13 };\n\n       String strEMH = new String(test);\n       String strExp = new String(exp);\n       assertEquals(strEMH, strExp);\n   }\n\n\n   @After\n   public void tearDown() throws Exception {\n       viewModel = null;\n   }\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10748680, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-84FW37sWj0Q/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-iHlx6Y5lE0qZVjKeNWp4c7Y59c5Q/mo/photo.jpg?sz=128", "display_name": "Abhishek Dubey", "link": "https://stackoverflow.com/users/10748680/abhishek-dubey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3243, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1572279938, "creation_date": 1544004051, "last_edit_date": 1544004719, "question_id": 53629611, "link": "https://stackoverflow.com/questions/53629611/unit-testing-viewmodel-in-android-using-mockito-mvvm-pattern", "title": "Unit testing viewmodel in android using mockito MVVM pattern", "body": "<p>This is my repository class </p>\n\n<pre><code>class UserRepository (private val apiInterface: ApiInterface, private val utils: Utils) {\n\nfun makeLoginOnServer(userName: String , password : String): Single&lt;UserResponse&gt;? {\n    val hasConnection = utils.isConnectedToInternet()\n    var observableFromApi: Single&lt;UserResponse&gt;? = null\n    if (hasConnection) {\n        observableFromApi = loginUser(userName,password)\n    }\n    return if (hasConnection)\n        observableFromApi!!\n    else\n        null\n}\n\nprivate fun loginUser(userName: String , password : String): Single&lt;UserResponse&gt; {\n    return apiInterface.makeLoginOnServer(userName,password)\n}\n\n}\n</code></pre>\n\n<p>This is my Viewmodel</p>\n\n<pre><code>class LoginViewModel(private val userRepository: UserRepository) : ViewModel() {\n\nvar userResult: MutableLiveData&lt;UserResponse&gt; = MutableLiveData()\nvar userError: MutableLiveData&lt;String&gt; = MutableLiveData()\nvar userLoader: MutableLiveData&lt;Boolean&gt; = MutableLiveData()\nprivate lateinit var disposableObserver: DisposableSingleObserver&lt;UserResponse&gt;\n\nfun userResult(): LiveData&lt;UserResponse&gt; {\n    return userResult\n}\n\nfun userError(): LiveData&lt;String&gt; {\n    return userError\n}\n\nfun userLoader(): LiveData&lt;Boolean&gt; {\n    return userLoader\n}\n\nfun makeLoginOnServer(userName: String , password: String) {\n    disposableObserver = object : DisposableSingleObserver&lt;UserResponse&gt;() {\n        override fun onSuccess(t: UserResponse) {\n            userResult.postValue(t)\n            userLoader.postValue(false)\n        }\n        override fun onError(e: Throwable) {\n            userError.postValue(Constants.getErrorMessage(e))\n            userLoader.postValue(false)\n        }\n    }\n    userRepository.makeLoginOnServer(userName, password)\n            ?.subscribeOn(Schedulers.io())\n            ?.observeOn(AndroidSchedulers.mainThread())\n            ?.subscribe(disposableObserver)\n}\n\nfun disposeElements() {\n    if (!disposableObserver.isDisposed) disposableObserver.dispose()\n}\n\n}\n</code></pre>\n\n<p>I want to write unit test cases for my code.\nI have written a sample test class here</p>\n\n<pre><code> @RunWith(MockitoJUnitRunner::class)\n class GithubActivityViewModelTest {\n\n@Rule\n@JvmField\nvar rule = InstantTaskExecutorRule()\n\ncompanion object {\n    @ClassRule\n    @JvmField\n    val schedulers = RxImmediateSchedulerRule()\n}\n\n@Mock\nlateinit var userRepository: UserRepository\n\n@Mock\nlateinit var observer: Observer&lt;UserResponse&gt;\n\nlateinit var loginViewModel: LoginViewModel\n\n\n@Before\nfun setUp() {\n    loginViewModel = LoginViewModel(userRepository)\n}\n\n@Test\nfun shouldShowGithubAccountLoginName() {\n    val githubAccount = UserResponse()\n    Mockito.`when`(userRepository.makeLoginOnServer(\"sdemo\",\"sdemo\"))\n        .thenReturn(Single.just(githubAccount))\n    loginViewModel.userResult.observeForever(observer)\n    loginViewModel.makeLoginOnServer(\"sdemo\",\"sdemo\")\n    assert(loginViewModel.userResult.value == githubAccount)\n\n}\n}\n</code></pre>\n\n<p>Now i need some clarification here what happens is that when the parameters are <code>\"sdemo\" &amp;&amp; \"sdemo\"</code> i get test pass for the cases but if i change any single value at one place i get a null pointer exception and my test fails.\nI want to know how to assert that exception with mockito.\nPlease help</p>\n\n<p>This is the log i get when i change sdemo to sdem</p>\n\n<pre><code>java.lang.AssertionError: Assertion failed\n\nat com.connect.viewmodels.GithubActivityViewModelTest.shouldShowGithubAccountLoginName(LoginViewModelTest.kt:54)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:498)\nat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\nat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\nat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\nat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\nat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\nat org.junit.rules.TestWatcher$1.evaluate(TestWatcher.java:55)\nat org.junit.rules.RunRules.evaluate(RunRules.java:20)\nat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\nat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\nat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\nat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\nat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\nat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\nat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\nat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\nat com.connect.RxImmediateSchedulerRule$apply$1.evaluate(RxImmediateSchedulerRule.kt:39)\nat org.junit.rules.RunRules.evaluate(RunRules.java:20)\nat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\nat org.mockito.internal.runners.DefaultInternalRunner$1.run(DefaultInternalRunner.java:79)\nat org.mockito.internal.runners.DefaultInternalRunner.run(DefaultInternalRunner.java:85)\nat org.mockito.internal.runners.StrictRunner.run(StrictRunner.java:39)\nat org.mockito.junit.MockitoJUnitRunner.run(MockitoJUnitRunner.java:163)\nat org.junit.runner.JUnitCore.run(JUnitCore.java:137)\nat com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)\nat com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)\nat com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)\nat com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:498)\nat com.intellij.rt.execution.application.AppMainV2.main(AppMainV2.java:131)\n</code></pre>\n"}, {"tags": ["function", "kotlin", "parameter-passing"], "answers": [{"tags": [], "owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "is_accepted": false, "score": 0, "last_activity_date": 1544005693, "creation_date": 1544005693, "answer_id": 53630165, "question_id": 53629560, "link": "https://stackoverflow.com/questions/53629560/cannot-reach-class-parameter-in-function/53630165#53630165", "title": "Cannot reach class parameter in function", "body": "<p>In your code, <code>application</code> is a parameter passed to the constructor.\u00a0 It's only available while an instance is being constructed: while running any <code>init { }</code> blocks, and initialising any properties.\u00a0 (The latter is why you can use it to initialise <code>taskEntities</code>.)\u00a0 It doesn't persist after that.</p>\n\n<p>If you want your instance to \u2018remember\u2019 the value of the parameter, add <code>val</code> (or <code>var</code>) before it, to make it a property:</p>\n\n<pre><code>class VM_MainActivity(val application: Application) // \u2026\n</code></pre>\n"}], "owner": {"reputation": 36, "user_id": 8108153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5525b490ab6f37fccf09376a6d608108?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Chernov", "link": "https://stackoverflow.com/users/8108153/ivan-chernov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544005693, "creation_date": 1544003901, "question_id": 53629560, "link": "https://stackoverflow.com/questions/53629560/cannot-reach-class-parameter-in-function", "title": "Cannot reach class parameter in function", "body": "<p>I cannot reach class parameter (application) in class function.\nExplain please what's the reasoning behind that? Why parameter is accessable within class body but isn't from class function?</p>\n\n<pre><code>class VM_MainActivity(application: Application) : AndroidViewModel(application) {\n\nval taskEntities:List&lt;TaskEntity&gt;?= Repository(application.applicationContext).taskEntities //\"application\" is reachable\n\n  fun fillWithSampleData() {\n    Repository(**application**.applicationContext).fillDBwithSampleData()  //error: Unresolved refernce: application\n}\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["android", "kotlin", "cryptography", "bouncycastle", "ecdsa"], "answers": [{"comments": [{"owner": {"reputation": 3759, "user_id": 5434346, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/77a6965f12ed6d5082ed4a990f715f59?s=128&d=identicon&r=PG&f=1", "display_name": "K.Os", "link": "https://stackoverflow.com/users/5434346/k-os"}, "edited": false, "score": 0, "creation_date": 1544016618, "post_id": 53631577, "comment_id": 94126300, "body": "Thanks, can you explain more if it covers the part that i described in my question: Signature format ASN.1. The r and s values of the ECDSA signature must be positive integers, and DER-encoded as such."}, {"owner": {"reputation": 3759, "user_id": 5434346, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/77a6965f12ed6d5082ed4a990f715f59?s=128&d=identicon&r=PG&f=1", "display_name": "K.Os", "link": "https://stackoverflow.com/users/5434346/k-os"}, "edited": false, "score": 0, "creation_date": 1544016695, "post_id": 53631577, "comment_id": 94126350, "body": "Regarding the signature I will be using &quot;SHA256withECDSA&quot;"}, {"owner": {"reputation": 45782, "user_id": 5542, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/qSMgT.jpg?s=128&g=1", "display_name": "Rasmus Faber", "link": "https://stackoverflow.com/users/5542/rasmus-faber"}, "reply_to_user": {"reputation": 3759, "user_id": 5434346, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/77a6965f12ed6d5082ed4a990f715f59?s=128&d=identicon&r=PG&f=1", "display_name": "K.Os", "link": "https://stackoverflow.com/users/5434346/k-os"}, "edited": false, "score": 0, "creation_date": 1544017815, "post_id": 53631577, "comment_id": 94127003, "body": "@K.Os Perhaps this helps."}, {"owner": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 0, "creation_date": 1544019445, "post_id": 53631577, "comment_id": 94127976, "body": "The ASN.1 / DER signature format is X9.62 compatible and is the default for Java. The other format is sometimes called a &quot;flat&quot; signature as the r and s value are not embedded in a hierarchical structure. DER encoded ASN.1 INTEGER values are signed, but the numbers will be padded with zero bytes if the most significant bit is set, so the result is always positive."}, {"owner": {"reputation": 14334, "user_id": 1380680, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/TRgwX.png?s=128&g=1", "display_name": "Reinier Torenbeek", "link": "https://stackoverflow.com/users/1380680/reinier-torenbeek"}, "reply_to_user": {"reputation": 3759, "user_id": 5434346, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/77a6965f12ed6d5082ed4a990f715f59?s=128&d=identicon&r=PG&f=1", "display_name": "K.Os", "link": "https://stackoverflow.com/users/5434346/k-os"}, "edited": false, "score": 0, "creation_date": 1544034964, "post_id": 53631577, "comment_id": 94136998, "body": "@K.Os: with regard to the ECDSA signature format, <a href=\"https://crypto.stackexchange.com/a/1797/18307\">this answer to the question &quot;How can I convert a DER ECDSA signature to ASN.1?&quot;</a> is educational as well."}, {"owner": {"reputation": 45782, "user_id": 5542, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/qSMgT.jpg?s=128&g=1", "display_name": "Rasmus Faber", "link": "https://stackoverflow.com/users/5542/rasmus-faber"}, "reply_to_user": {"reputation": 3759, "user_id": 5434346, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/77a6965f12ed6d5082ed4a990f715f59?s=128&d=identicon&r=PG&f=1", "display_name": "K.Os", "link": "https://stackoverflow.com/users/5434346/k-os"}, "edited": false, "score": 1, "creation_date": 1544085098, "post_id": 53631577, "comment_id": 94152993, "body": "@K.Os I think linehrr already have answered this correctly. Ping me again if his solution doesn&#39;t work."}, {"owner": {"reputation": 3759, "user_id": 5434346, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/77a6965f12ed6d5082ed4a990f715f59?s=128&d=identicon&r=PG&f=1", "display_name": "K.Os", "link": "https://stackoverflow.com/users/5434346/k-os"}, "edited": false, "score": 0, "creation_date": 1544103904, "post_id": 53631577, "comment_id": 94163840, "body": "@RasmusFaber thanks - IMPORTANT NOTE to my question: Can you provide specifically what dependencies i need to be able to invoke publicKey.q.getEncoded(true)? I switch the machines and now cannot resolve this issue"}, {"owner": {"reputation": 3759, "user_id": 5434346, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/77a6965f12ed6d5082ed4a990f715f59?s=128&d=identicon&r=PG&f=1", "display_name": "K.Os", "link": "https://stackoverflow.com/users/5434346/k-os"}, "edited": false, "score": 0, "creation_date": 1544105059, "post_id": 53631577, "comment_id": 94164577, "body": "@RasmusFaber I cannot pass the &quot;true&quot; boolean to the getEncoded() method"}, {"owner": {"reputation": 45782, "user_id": 5542, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/qSMgT.jpg?s=128&g=1", "display_name": "Rasmus Faber", "link": "https://stackoverflow.com/users/5542/rasmus-faber"}, "reply_to_user": {"reputation": 3759, "user_id": 5434346, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/77a6965f12ed6d5082ed4a990f715f59?s=128&d=identicon&r=PG&f=1", "display_name": "K.Os", "link": "https://stackoverflow.com/users/5434346/k-os"}, "edited": false, "score": 0, "creation_date": 1544174315, "post_id": 53631577, "comment_id": 94190694, "body": "@K.Os It looks like you have figured it out yourself, but just to be sure, I think the reason you couldn&#39;t call getEncoded(Boolean) is because you were casting to the wrong ECPublicKey. I have updated the answer to use the full class name."}, {"owner": {"reputation": 3759, "user_id": 5434346, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/77a6965f12ed6d5082ed4a990f715f59?s=128&d=identicon&r=PG&f=1", "display_name": "K.Os", "link": "https://stackoverflow.com/users/5434346/k-os"}, "edited": false, "score": 0, "creation_date": 1544448788, "post_id": 53631577, "comment_id": 94268000, "body": "@RasmusFaber Hi again, maybe you can help me again with <a href=\"https://stackoverflow.com/questions/53706767/how-to-reconstruct-33-byte-compressed-nist-p-256-public-key-from-33-bytes\" title=\"how to reconstruct 33 byte compressed nist p 256 public key from 33 bytes\">stackoverflow.com/questions/53706767/&hellip;</a>?"}], "tags": [], "owner": {"reputation": 45782, "user_id": 5542, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/qSMgT.jpg?s=128&g=1", "display_name": "Rasmus Faber", "link": "https://stackoverflow.com/users/5542/rasmus-faber"}, "is_accepted": true, "score": 3, "last_activity_date": 1544174220, "last_edit_date": 1544174220, "creation_date": 1544010368, "answer_id": 53631577, "question_id": 53629537, "link": "https://stackoverflow.com/questions/53629537/how-to-generate-33-byte-compressed-nist-p-256-public-key/53631577#53631577", "title": "How to generate 33-byte compressed NIST P-256 public key?", "body": "<p>To encode a Bouncy Castle elliptic curve public key in compressed format:</p>\n\n<pre><code>Security.addProvider(BouncyCastleProvider())  \n\ngenerator = KeyPairGenerator.getInstance(\"ECDSA\")\nval ecSpec = ECNamedCurveTable.getParameterSpec(\"prime256v1\")        \ngenerator.initialize(ecSpec)\nval keyPair = generator.generateKeyPair()\n\nval publicKey = keyPair.public as org.bouncycastle.jce.interfaces.ECPublicKey\nval compressedPublicKey = publicKey.q.getEncoded(true)\n</code></pre>\n\n<p>You are not including all the necessary details about how to sign the key and encode the signature, but my best guess would be a standard ECDSA signature on the public key with a standard encoding:</p>\n\n<pre><code>val signer = Signature.getInstance(\"SHA256withECDSA\")\nsigner.initSign(otherPrivateKey)\nsigner.update(compressedPublicKey)\nval signature = signer.sign()\n</code></pre>\n\n<p>This hashes the public key using SHA256, signs it using ECDSA and formats and serializes it as the DER encoding of the ASN.1 structure ECDSASignature.</p>\n\n<pre><code>ECDSASignature ::= SEQUENCE {\n    r   INTEGER,\n    s   INTEGER\n}\n</code></pre>\n\n<p><code>r</code> and <code>s</code> will be positive integers and encoded with DER. There are other ways of doing so, but this is by far the most common way (the only other common ECDSA signature format is just padding r and s with zeroes and concatenating them).</p>\n"}], "owner": {"reputation": 3759, "user_id": 5434346, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/77a6965f12ed6d5082ed4a990f715f59?s=128&d=identicon&r=PG&f=1", "display_name": "K.Os", "link": "https://stackoverflow.com/users/5434346/k-os"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 924, "favorite_count": 0, "accepted_answer_id": 53631577, "answer_count": 1, "score": 0, "last_activity_date": 1544174220, "creation_date": 1544003845, "last_edit_date": 1544008602, "question_id": 53629537, "link": "https://stackoverflow.com/questions/53629537/how-to-generate-33-byte-compressed-nist-p-256-public-key", "title": "How to generate 33-byte compressed NIST P-256 public key?", "body": "<p>I need to generate such public key and do the additional signing of the bytes (which will include this generated previously key)</p>\n\n<p>I need to construct bytes of:\nASN.1 prefix + signature of (33-byte compressed NIST P-256 public key)</p>\n\n<p>The signature should be delivered from other defined private key</p>\n\n<p>The ECDSA specifications:</p>\n\n<p>\u25cf Curve: </p>\n\n<p>NIST P-256 Otherwise known as secp256r1 and prime256v1 (openssl)</p>\n\n<p>\u25cf Signature format\nASN.1. The r and s values of the ECDSA signature must be positive\nintegers, and DER-encoded as such.</p>\n\n<p>Is there API in Android to do such process? How can I use it then?</p>\n\n<p>WHAT I've tried: </p>\n\n<pre><code> try {\n        val generator = KeyPairGenerator.getInstance(\"ECDSA\")\n        val ecSpec = ECNamedCurveTable\n                .getParameterSpec(\"prime256v1\")\n        generator.initialize(ecSpec)\n        val keyPair = generator.generateKeyPair()\n\n        val privKey = keyPair.private\n        val encodedPrivKey = privKey.encoded\n        System.out.println(toHex(encodedPrivKey))\n\n        val pubKey = keyPair.public\n        val encodedPubKey = pubKey.encoded\n        System.out.println(toHex(encodedPubKey))\n\n        val keyFactory = KeyFactory.getInstance(\"ECDSA\")\n        val pubKey2 = keyFactory.generatePublic(X509EncodedKeySpec(encodedPubKey))\n        if (Arrays.equals(pubKey2.getEncoded(), encodedPubKey)) {\n            println(\"That worked for the public key\")\n        }\n\n        val privKey2 = keyFactory.generatePrivate(PKCS8EncodedKeySpec(encodedPrivKey))\n        if (Arrays.equals(privKey2.getEncoded(), encodedPrivKey)) {\n            println(\"That worked for the private key\")\n        }\n\n    } catch (e: GeneralSecurityException) {\n        throw IllegalStateException(e)\n    }\n</code></pre>\n\n<p>Here - the encoded public key has the lenght of 90 bytes which i guess i want it to be 33 bytes</p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 413, "user_id": 1392654, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/MC2Xb.jpg?s=128&g=1", "display_name": "While True", "link": "https://stackoverflow.com/users/1392654/while-true"}, "edited": false, "score": 1, "creation_date": 1544022601, "post_id": 53629485, "comment_id": 94130197, "body": "methods doesn&#39;t have &#39;override&#39; specified, but it should have been a compile-time error"}], "answers": [{"tags": [], "owner": {"reputation": 151, "user_id": 7447054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aabe9bc43a54779eb5eaed01660d6067?s=128&d=identicon&r=PG&f=1", "display_name": "nani", "link": "https://stackoverflow.com/users/7447054/nani"}, "is_accepted": false, "score": 1, "last_activity_date": 1559811646, "creation_date": 1559811646, "answer_id": 56474189, "question_id": 53629485, "link": "https://stackoverflow.com/questions/53629485/sliding-up-panel-java-to-kotlin/56474189#56474189", "title": "Sliding Up Panel (Java to Kotlin)", "body": "<p>You need to  load up the Slidinglayout.</p>\n\n<pre><code>private lateinit var slidingLayout: SlidingUpPanelLayout\noverride fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n    return inflater.inflate(R.layout.activity_main, container, false).also {\n        slidingLayout = it.findViewById(R.id.sliding_Layout)\n    }\n}\n</code></pre>\n\n<p>than you check for the PanelState</p>\n\n<pre><code>if (slidingLayout.panelState == SlidingUpPanelLayout.PanelState.HIDDEN)\n</code></pre>\n\n<p>You also have the states ANCHORED, EXPANDED, COLLAPSED, DRAGGING</p>\n\n<p>If you want to set up the Listener in Kotlin I have done it like This.</p>\n\n<pre><code>slidingLayout.addPanelSlideListener(object : SlidingUpPanelLayout.PanelSlideListener {\n        override fun onPanelSlide(panel: View?, slideOffset: Float) {\n            TODO(\"not implemented\") //To change body of created functions use File | Settings | File Templates.\n        }\n\n        override fun onPanelStateChanged(panel: View?, previousState: SlidingUpPanelLayout.PanelState?, newState: SlidingUpPanelLayout.PanelState?) {\n           TODO(\"not implemented\") //To change body of created functions use File | Settings | File Templates.\n        }\n    })\n</code></pre>\n"}], "owner": {"reputation": 526, "user_id": 9311961, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6qoWo.jpg?s=128&g=1", "display_name": "Robert Pal", "link": "https://stackoverflow.com/users/9311961/robert-pal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1019, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1587555422, "creation_date": 1544003658, "last_edit_date": 1587555422, "question_id": 53629485, "link": "https://stackoverflow.com/questions/53629485/sliding-up-panel-java-to-kotlin", "title": "Sliding Up Panel (Java to Kotlin)", "body": "<p>How can I display panel states of SlidingUpPanel in Kotlin?</p>\n\n<p>I want to use <a href=\"https://github.com/umano/AndroidSlidingUpPanel\" rel=\"nofollow noreferrer\">https://github.com/umano/AndroidSlidingUpPanel</a> library, following this tutorial:</p>\n\n<p><a href=\"http://www.devexchanges.info/2015/05/making-sliding-up-panel-like-google.html\" rel=\"nofollow noreferrer\">http://www.devexchanges.info/2015/05/making-sliding-up-panel-like-google.html</a></p>\n\n<p>and the result should look like this:</p>\n\n<p><a href=\"https://www.youtube.com/watch?v=g464fp-2dQU\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=g464fp-2dQU</a></p>\n\n<p>The code in Java from tutorial link:</p>\n\n<pre><code>private SlidingUpPanelLayout.PanelSlideListener onSlideListener() {\n    return new SlidingUpPanelLayout.PanelSlideListener() {\n        @Override\n        public void onPanelSlide(View view, float v) {\n            textView.setText(\"panel is sliding\");\n        }\n\n        @Override\n        public void onPanelCollapsed(View view) {\n            textView.setText(\"panel Collapse\");\n        }\n\n        @Override\n        public void onPanelExpanded(View view) {\n            textView.setText(\"panel expand\");\n        }\n\n        @Override\n        public void onPanelAnchored(View view) {\n            textView.setText(\"panel anchored\");\n        }\n\n        @Override\n        public void onPanelHidden(View view) {\n            textView.setText(\"panel is Hidden\");\n        }\n    };\n}\n</code></pre>\n\n<p>The converted code from Java to Kotlin (I put toast from anko library instead of textView):</p>\n\n<pre><code>private fun onSlideListener(): SlidingUpPanelLayout.PanelSlideListener {\n    return object : SlidingUpPanelLayout.PanelSlideListener {\n        override fun onPanelSlide(view: View, v: Float) {\n            toast(\"panel is sliding\")\n        }\n\n        override fun onPanelCollapsed(view: View) {\n            toast(\"panel Collapse\")\n        }\n\n        override fun onPanelExpanded(view: View) {\n            toast(\"panel expand\")\n        }\n\n        override fun onPanelAnchored(view: View) {\n            toast(\"panel anchored\")\n        }\n\n        override fun onPanelHidden(view: View) {\n            toast(\"panel is Hidden\")\n        }\n    }\n}\n</code></pre>\n\n<p>In Java code, in onCreate method, I have:         </p>\n\n<pre><code>slidingLayout.setPanelSlideListener(onSlideListener());\n</code></pre>\n\n<p>which doesn't seems to work in Kotlin, because the methods I have are Click, Drag, Hover, Key and Touch (listeners).</p>\n\n<p>I guess other good approach could be to implement </p>\n\n<pre><code>SlidingPaneLayout.PanelSlideListener\n</code></pre>\n\n<p>on my class, but I still couldn't make it work.</p>\n\n<p>Any solution to find up if the panel is displayed or hidden in Kotlin?</p>\n"}, {"tags": ["android", "webview", "kotlin", "youtube-iframe-api", "autoplay"], "answers": [{"tags": [], "owner": {"reputation": 486, "user_id": 4201730, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qtE6VzJE10c/AAAAAAAAAAI/AAAAAAAAANo/FiPc1vOjjFA/photo.jpg?sz=128", "display_name": "darshan patel", "link": "https://stackoverflow.com/users/4201730/darshan-patel"}, "is_accepted": false, "score": 0, "last_activity_date": 1544002743, "creation_date": 1544002743, "answer_id": 53629211, "question_id": 53629210, "link": "https://stackoverflow.com/questions/53629210/how-to-programmatically-change-seekbar-time-and-enable-full-screen-in-youtube-if/53629211#53629211", "title": "How to programmatically change seekbar time and enable full screen in youtube iframe api using webView?", "body": "<pre><code> val frameVideo = \"&lt;html&gt;\n                    &lt;body style='margin:0px;padding:0px;'&gt;\\n\" +\n                     \"&lt;script type='text/javascript' src='http://www.youtube.com/iframe_api'&gt;\n                      &lt;/script&gt;\n                      &lt;script type='text/javascript'&gt;\\n\" +\n                        \"var player;\\n\" +\n                        \"function onYouTubeIframeAPIReady()\\n\" +\n                        \"{player=new YT.Player('playerId',{events {onReady:onPlayerReady}})}\\n\" +\n                        \"function onPlayerReady(event){player.playVideo(); player.seekTo(mNubmer,true);}\\n\" +\n                      \"&lt;/script&gt;\\n\" +\n                        \"&lt;iframe id='playerId' type='text/html' width='100%' height='100%'\\n\" +\n                         \"src='https://www.youtube.com/embed/\" + mVideoId + \"?enablejsapi=1&amp;autoplay=1' frameborder='0' allowfullscreen&gt;\\n\"+\n                   \"&lt;/body&gt;\n                 &lt;/html&gt;\"\n\nwebView.loadDataWithBaseURL(\"http://www.youtube.com\", frameVideo, \"text/html\", \"utf-8\", null)\n</code></pre>\n\n<p>For adding seekbar to youtube-iframe api, add <code>player.seekTo(mNubmer,true);</code>.</p>\n\n<p>Replace <code>$mNumber</code> with your time in seconds(non-decimal value).</p>\n\n<p>Add <code>allowfullscreen</code> to enable full screen in iframe API.</p>\n"}], "owner": {"reputation": 486, "user_id": 4201730, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qtE6VzJE10c/AAAAAAAAAAI/AAAAAAAAANo/FiPc1vOjjFA/photo.jpg?sz=128", "display_name": "darshan patel", "link": "https://stackoverflow.com/users/4201730/darshan-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 253, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544002743, "creation_date": 1544002743, "question_id": 53629210, "link": "https://stackoverflow.com/questions/53629210/how-to-programmatically-change-seekbar-time-and-enable-full-screen-in-youtube-if", "title": "How to programmatically change seekbar time and enable full screen in youtube iframe api using webView?", "body": "<pre><code>val frameVideo = \"&lt;html&gt;\n                    &lt;body style='margin:0px;padding:0px;'&gt;\\n\" +\n                     \"&lt;script type='text/javascript' src='http://www.youtube.com/iframe_api'&gt;\n                      &lt;/script&gt;\n                      &lt;script type='text/javascript'&gt;\\n\" +\n                        \"var player;\\n\" +\n                        \"function onYouTubeIframeAPIReady()\\n\" +\n                        \"{player=new YT.Player('playerId',{events {onReady:onPlayerReady}})}\\n\" +\n                        \"function onPlayerReady(event){player.playVideo();}\\n\" +\n                      \"&lt;/script&gt;\\n\" +\n                        \"&lt;iframe id='playerId' type='text/html' width='100%' height='100%'\\n\" +\n                         \"src='https://www.youtube.com/embed/\" + mVideoId + \"?enablejsapi=1&amp;autoplay=1' frameborder='0'&gt;\\n\" +\n                   \"&lt;/body&gt;\n                 &lt;/html&gt;\"\n\nwebView.loadDataWithBaseURL(\"http://www.youtube.com\", frameVideo, \"text/html\", \"utf-8\", null)\n</code></pre>\n\n<p>Replace <code>$mVideoId</code> with your video id.</p>\n\n<p>I have tried above code and it's working fine for autoplay but it doesn't show fullscreen button as enabled.</p>\n"}, {"tags": ["android", "mvvm", "kotlin", "viewmodel"], "comments": [{"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1544003798, "post_id": 53629046, "comment_id": 94118582, "body": "You got exactly the behavior you requested when you used <code>WeakReference</code>. Maybe you <i>don&#39;t</i> want to use it."}, {"owner": {"reputation": 1063, "user_id": 9188790, "user_type": "registered", "profile_image": "https://graph.facebook.com/1960869044240152/picture?type=large", "display_name": "Angelina", "link": "https://stackoverflow.com/users/9188790/angelina"}, "reply_to_user": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1544003954, "post_id": 53629046, "comment_id": 94118677, "body": "@MarkoTopolnik but I have heard that it is not a good practice to have a strong reference to Views like Fragment or Activities."}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1544004207, "post_id": 53629046, "comment_id": 94118849, "body": "OK, but why are you surprised at seeing exactly the behavior you requested? You seem to have your cake and eat it, too. If you could always get a non-null reference, that would make it a strong reference."}, {"owner": {"reputation": 1063, "user_id": 9188790, "user_type": "registered", "profile_image": "https://graph.facebook.com/1960869044240152/picture?type=large", "display_name": "Angelina", "link": "https://stackoverflow.com/users/9188790/angelina"}, "reply_to_user": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1544004426, "post_id": 53629046, "comment_id": 94118966, "body": "@MarkoTopolnik i think I wanted to &quot;fix&quot; bad architecture by this hack. It was recommented by a colleague :( ideally, View should not pass View-related objects to lower layers. do you agree?"}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1544004545, "post_id": 53629046, "comment_id": 94119045, "body": "The &quot;fix&quot; consists exactly of getting a <code>null</code> when the object is GC&#39;d. The &quot;bad architecture&quot; moment occurs when you require it to be non-null all the time."}], "owner": {"reputation": 1063, "user_id": 9188790, "user_type": "registered", "profile_image": "https://graph.facebook.com/1960869044240152/picture?type=large", "display_name": "Angelina", "link": "https://stackoverflow.com/users/9188790/angelina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1544002184, "creation_date": 1544002184, "question_id": 53629046, "link": "https://stackoverflow.com/questions/53629046/weakreference-getter-returns-null", "title": "WeakReference getter returns null", "body": "<p>I use MVVM architecture, but at one point I pass clicklistener into ViewModel. I do it in Fragment <code>onCreate</code> - i pass listener to ViewModel and wrap it in WeakReference object and store in ViewModel as a field.</p>\n\n<pre><code>private var weakRefListener: WeakReference&lt;ClickListener&gt;? = null\nprivate val listenerViewModel = object : ClickListener {\n    override fun onClicked(id: Long) {\n        weakRefListener?.get()?.onClicked(id)\n    }\n}\n\n/* called in Fragment */\nfun setClickListener(clickListener: ClickListener) {\n    weakRefListener = WeakReference(clickListener)\n}\n</code></pre>\n\n<p>The reason why I do it - I have UI elements which are represented as data classes and I want to preserve them after screen rotation.</p>\n\n<p>ViewModel has objects which need this clicklistener and they reference <code>listenerViewModel</code>. Unfortunately, I have observed undeterministic behaviour - sometimes <code>weakRefListener?.get()</code> returns <code>null</code> and I cannot predict when. This leads to bad User Experience as click does not work.</p>\n\n<p>Question: \n- why does this happen?\n- what is a better way to organize the code?</p>\n"}, {"tags": ["android", "kotlin", "retrofit2", "rx-java2"], "comments": [{"owner": {"reputation": 148364, "user_id": 501696, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/shkBF.png?s=128&g=1", "display_name": "Blackbelt", "link": "https://stackoverflow.com/users/501696/blackbelt"}, "edited": false, "score": 1, "creation_date": 1544001681, "post_id": 53628854, "comment_id": 94117320, "body": "<code>mDataManager.insertDataToDB(object).subscribe()</code> is missing error handling"}, {"owner": {"reputation": 4960, "user_id": 5719935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eaDss.jpg?s=128&g=1", "display_name": "Uttam Panchasara", "link": "https://stackoverflow.com/users/5719935/uttam-panchasara"}, "reply_to_user": {"reputation": 148364, "user_id": 501696, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/shkBF.png?s=128&g=1", "display_name": "Blackbelt", "link": "https://stackoverflow.com/users/501696/blackbelt"}, "edited": false, "score": 0, "creation_date": 1544001783, "post_id": 53628854, "comment_id": 94117371, "body": "I tried by adding <code>doOnError</code> and <code>onErrorReturn</code> after data insertion, but not worked"}, {"owner": {"reputation": 12184, "user_id": 3544839, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/PH19M.jpg?s=128&g=1", "display_name": "Moinkhan", "link": "https://stackoverflow.com/users/3544839/moinkhan"}, "edited": false, "score": 0, "creation_date": 1544001897, "post_id": 53628854, "comment_id": 94117443, "body": "what if in login api you got an error.. you need to handle onError before flatmap of login response"}, {"owner": {"reputation": 4960, "user_id": 5719935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eaDss.jpg?s=128&g=1", "display_name": "Uttam Panchasara", "link": "https://stackoverflow.com/users/5719935/uttam-panchasara"}, "edited": false, "score": 0, "creation_date": 1544002237, "post_id": 53628854, "comment_id": 94117628, "body": "I guess that should be handled at the end on <code>throwable</code>"}, {"owner": {"reputation": 4960, "user_id": 5719935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eaDss.jpg?s=128&g=1", "display_name": "Uttam Panchasara", "link": "https://stackoverflow.com/users/5719935/uttam-panchasara"}, "reply_to_user": {"reputation": 12184, "user_id": 3544839, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/PH19M.jpg?s=128&g=1", "display_name": "Moinkhan", "link": "https://stackoverflow.com/users/3544839/moinkhan"}, "edited": false, "score": 0, "creation_date": 1544002345, "post_id": 53628854, "comment_id": 94117681, "body": "@Moinkhan not working as well I tried that"}], "answers": [{"comments": [{"owner": {"reputation": 4960, "user_id": 5719935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eaDss.jpg?s=128&g=1", "display_name": "Uttam Panchasara", "link": "https://stackoverflow.com/users/5719935/uttam-panchasara"}, "edited": false, "score": 0, "creation_date": 1544006524, "post_id": 53629563, "comment_id": 94120213, "body": "Thank for your answer!!, I have tried your solution but still not working!! getting same error."}, {"owner": {"reputation": 4960, "user_id": 5719935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eaDss.jpg?s=128&g=1", "display_name": "Uttam Panchasara", "link": "https://stackoverflow.com/users/5719935/uttam-panchasara"}, "edited": false, "score": 0, "creation_date": 1544008230, "post_id": 53629563, "comment_id": 94121237, "body": "Actually you are right, initially i only tried by replacing map with flapMap but then I  tried by avoiding subsribe inner flapMap for all flatMap and it&#39;s works!  Check my updated Question with solution."}, {"owner": {"reputation": 839, "user_id": 1151799, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/f386b4d43ec2db8888cec5be46254a90?s=128&d=identicon&r=PG", "display_name": "arungiri_10", "link": "https://stackoverflow.com/users/1151799/arungiri-10"}, "reply_to_user": {"reputation": 4960, "user_id": 5719935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eaDss.jpg?s=128&g=1", "display_name": "Uttam Panchasara", "link": "https://stackoverflow.com/users/5719935/uttam-panchasara"}, "edited": false, "score": 0, "creation_date": 1544060907, "post_id": 53629563, "comment_id": 94145992, "body": "Exactly as I mentioned, we shouldn&#39;t subscribe within a stream. It just breaks the complete chain."}], "tags": [], "owner": {"reputation": 839, "user_id": 1151799, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/f386b4d43ec2db8888cec5be46254a90?s=128&d=identicon&r=PG", "display_name": "arungiri_10", "link": "https://stackoverflow.com/users/1151799/arungiri-10"}, "is_accepted": true, "score": 1, "last_activity_date": 1544003911, "creation_date": 1544003911, "answer_id": 53629563, "question_id": 53628854, "link": "https://stackoverflow.com/questions/53628854/rx-exception-handling-fail/53629563#53629563", "title": "Rx Exception Handling Fail", "body": "<p>The reason is you are subscribing here</p>\n\n<pre><code>.map {\n    // here inserting data to DB\n    mDataManager.insertDataToDB(object).subscribe()\n    return@map true\n}\n</code></pre>\n\n<p>And this subscribe is not handling the error scenario.</p>\n\n<p>I feel it's not a good practice to call subscribe() for the inner streams. In your scenario the flow is broken in-between.</p>\n\n<p>The best way according to me is instead of using map and calling subscribe() here, use,</p>\n\n<pre><code>flatMap{\n    object -&gt; mDataManager.insertDataToDB(object)\n}\n</code></pre>\n\n<p>This way, if any error, it will be caught in last outer subscribe().</p>\n\n<p>Hope this answer helps.</p>\n"}], "owner": {"reputation": 4960, "user_id": 5719935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eaDss.jpg?s=128&g=1", "display_name": "Uttam Panchasara", "link": "https://stackoverflow.com/users/5719935/uttam-panchasara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1330, "favorite_count": 0, "accepted_answer_id": 53629563, "answer_count": 1, "score": 0, "last_activity_date": 1544008087, "creation_date": 1544001562, "last_edit_date": 1544008087, "question_id": 53628854, "link": "https://stackoverflow.com/questions/53628854/rx-exception-handling-fail", "title": "Rx Exception Handling Fail", "body": "<p>I'm using RxJava with a retrofit to make API calls,</p>\n\n<p>By using RxJava methods like <strong>flatMap</strong> and <strong>map</strong> I'm making API calls as well as performing DB operations in room database on the background thread.</p>\n\n<p>My implementation is perfect and working fine if there is no error, but In the case when I got an error or any exception while performing DB Operation, Application getting crashed due to following Rx error.</p>\n\n<pre><code>E/AndroidRuntime: FATAL EXCEPTION: RxCachedThreadScheduler-1\n\nThe exception was not handled due to missing onError handler in the subscribe() method call.\n</code></pre>\n\n<p>I have used RxJava to perform my operation as below :</p>\n\n<pre><code>mDataManager.login(params)\n                .flatMap { loginResponse: LoginResponse -&gt;\n\n                    // here making another API call based on previos API result\n                    return@flatMap mDatamanager....\n                }\n                .flatMap { object: SomeDataModel -&gt;\n\n                    // here inserting data to DB\n                    mDataManager.insertDataToDB(object).subscribe()\n\n                    // here making another API call based on previos API \n                    return@flatMap mDataManager...\n                }.map {\n\n                    // here inserting data to DB\n                    mDataManager.insertDataToDB(object).subscribe()\n\n                    return@map true\n                }\n                .observeOn(mSchedulerProvider.ui())\n                .subscribeOn(mSchedulerProvider.io())\n                .subscribe({ result -&gt;\n                    // updating view\n                }, { throwable -&gt;\n                    throwable.printStackTrace()\n                })\n</code></pre>\n\n<p>I'm getting an exception while inserting data to DB </p>\n\n<p>Exception <code>java.lang.IllegalStateException: attempt to re-open an already-closed object: SQLiteDatabase:</code></p>\n\n<p>But the error not handled and Application getting crash.</p>\n\n<p>The error says that <code>missing onError handler in the subscribe() method</code> but in my code, I already override throwable to handle exception/errors.</p>\n\n<p>Can anyone find, what I'm missing or what mistake I have done in code.</p>\n\n<hr>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Found the solution, Mistake was here : </p>\n\n<p><code>mDataManager.insertDataToDB(object).subscribe()</code></p>\n\n<p>In the Above statement, I'm subscribing but was not handling the error for that and because of that error was not handled by rxJava and in the result, the application gets crashed.</p>\n\n<p>Final Code as below :</p>\n\n<pre><code>mDataManager.login(params)\n            .flatMap { loginResponse: LoginResponse -&gt;\n\n                // here making another API call based on previos API result\n                return@flatMap mDatamanager....\n            }\n            .flatMap { object: SomeDataModel -&gt;\n\n                // avoid this inner subscribe\n                // mDataManager.insertDataToDB(object).subscribe()\n\n                return@flatMap mDataManager.insertDataToDB(object)\n            }\n            .flatMap {\n                // here making another API call based on previos API result\n                return@flatMap mDatamanager....\n            }\n            .flatMap {\n\n                // avoid this inner subscribe\n                //mDataManager.insertDataToDB(object).subscribe()\n\n                return@flatMap mDataManager.insertDataToDB(object)\n            }\n            .observeOn(mSchedulerProvider.ui())\n            .subscribeOn(mSchedulerProvider.io())\n            .subscribe({ result -&gt;\n                // updating view\n            }, { throwable -&gt;\n                throwable.printStackTrace()\n            })\n</code></pre>\n\n<p>Above code is working Fine!</p>\n"}, {"tags": ["android", "kotlin", "navigation", "android-architecture-components", "android-livedata"], "comments": [{"owner": {"reputation": 7491, "user_id": 1806099, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/xT2cr.png?s=128&g=1", "display_name": "Skynet", "link": "https://stackoverflow.com/users/1806099/skynet"}, "edited": false, "score": 1, "creation_date": 1544001625, "post_id": 53628730, "comment_id": 94117296, "body": "Not a concrete answer - Why dont you use a Room DB to hold your data? Its not an ideal thing to parse JSON and construst an object from that when you can use the Serializable interface to marshall your object the good old java way. Having said that Parcelable is a better choice than Serializable as <code>Parcelable does not use Reflection</code> In-fact Parcelable was created with a motive of having less fingerprint than Serializable."}, {"owner": {"reputation": 2583, "user_id": 9248718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WzbRd.png?s=128&g=1", "display_name": "Some random IT boy", "link": "https://stackoverflow.com/users/9248718/some-random-it-boy"}, "reply_to_user": {"reputation": 7491, "user_id": 1806099, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/xT2cr.png?s=128&g=1", "display_name": "Skynet", "link": "https://stackoverflow.com/users/1806099/skynet"}, "edited": false, "score": 0, "creation_date": 1544001816, "post_id": 53628730, "comment_id": 94117387, "body": "This is a toy project and I haven&#39;t got into Room yet, so I didn&#39;t consider it. Also I got it working with a static variable elsewhere typed as <code>Any</code> and then cast it back to its type in the creation of the fragment. But this a filthy dirty trick and I don&#39;t want to do that."}, {"owner": {"reputation": 7305, "user_id": 1268507, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/pW5el.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/1268507/alex"}, "edited": false, "score": 1, "creation_date": 1544001927, "post_id": 53628730, "comment_id": 94117462, "body": "Your ViewModel approach not working because you creating it with scope of HomeFragment fragment, so when you navigating to another fragment another viewmodel instance created with SessionDetailsFragment scope, you need to create them with activity scope, like this: sharedViewModel = ViewModelProviders.of(activity!!).get(SessionSharedViewModel&zwnj;&#8203;::class.java)"}, {"owner": {"reputation": 2583, "user_id": 9248718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WzbRd.png?s=128&g=1", "display_name": "Some random IT boy", "link": "https://stackoverflow.com/users/9248718/some-random-it-boy"}, "edited": false, "score": 0, "creation_date": 1544002591, "post_id": 53628730, "comment_id": 94117829, "body": "That solves my problem with that approach@Alex, thank you very much."}], "answers": [{"tags": [], "owner": {"reputation": 2583, "user_id": 9248718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WzbRd.png?s=128&g=1", "display_name": "Some random IT boy", "link": "https://stackoverflow.com/users/9248718/some-random-it-boy"}, "is_accepted": true, "score": 2, "last_activity_date": 1579791258, "creation_date": 1579791258, "answer_id": 59881330, "question_id": 53628730, "link": "https://stackoverflow.com/questions/53628730/passing-complex-objects-as-a-parameter-in-androids-navigation-architecture-comp/59881330#59881330", "title": "Passing complex objects as a parameter in Android&#39;s Navigation Architecture Component", "body": "<h1>TL; DR</h1>\n\n<p>You can't.</p>\n\n<h1>Actual explanation</h1>\n\n<p>First thing; the following statement</p>\n\n<blockquote>\n  <p>The thing about these options is that I've read that Parcelable makes use of reflection and it can get quite expensive regarding time.</p>\n</blockquote>\n\n<h3>IS A LIE</h3>\n\n<p>Since you implement <code>Parcelable</code> you're just providing methods on how to serialize and deserialize using basic primitive types: IE: <code>writeBytes</code>, <code>readBytes</code>, <code>readInt</code>, <code>writeInt</code>. </p>\n\n<p><strong><code>Parcelable</code> does NOT use reflection. <code>Serializable</code> does!</strong></p>\n\n<p>While it's true you are forced to use <code>Parcelable</code> jet brains developed a very useful annotation that takes away the pain of having to write the parcelable implementation called <code>@Parcelize</code>.</p>\n\n<p>Sample usage:</p>\n\n<pre><code>@Parcelize\ndata class User(val username: String, val password: String) : Parcelable\n</code></pre>\n\n<p>And now you're able to pass instances of the class without writing a single line of <code>Parcelable</code> implementation.</p>\n\n<p>More info <a href=\"https://kotlinlang.org/docs/tutorials/android-plugin.html#parcelable-implementations-generator\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 2583, "user_id": 9248718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WzbRd.png?s=128&g=1", "display_name": "Some random IT boy", "link": "https://stackoverflow.com/users/9248718/some-random-it-boy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2672, "favorite_count": 0, "accepted_answer_id": 59881330, "answer_count": 1, "score": 2, "last_activity_date": 1579791258, "creation_date": 1544001123, "question_id": 53628730, "link": "https://stackoverflow.com/questions/53628730/passing-complex-objects-as-a-parameter-in-androids-navigation-architecture-comp", "title": "Passing complex objects as a parameter in Android&#39;s Navigation Architecture Component", "body": "<p>I've been looking for some time to android architechture components and lately to the Navigation component.</p>\n\n<p>I'm trying to pass as a parameter an object, so the next fragment can retrieve that data, but to do so I'm required to do one of two things:</p>\n\n<ol>\n<li>Pass it through a Bundle, which will make me implement the Parcelable interface to that object.</li>\n<li>Use the \"Safeargs\" plugin which I've tried and it looks like behind the hood makes use of Bundles and requires the implementation of the Parcelable interface anyway.</li>\n</ol>\n\n<p>The thing about these options is that I've read that Parcelable makes use of reflection and it can get quite expensive regarding time</p>\n\n<hr>\n\n<p>I have also tried to build a \"SharedMasterDetailsViewModel\" but with no luck since the observable callbacks are not being performed on my newly created Fragment. (I think LiveData performs the callback before my fragment is created)</p>\n\n<p><strong>Here's some code about how I've tried to approach this</strong></p>\n\n<p><strong>SharedSessionViewModel</strong></p>\n\n<pre><code>class SessionSharedViewModel : ViewModel() {\n\n\n    var sharedSession: LiveData&lt;Session&gt; = MutableLiveData()\n        private set\n\n    fun setSession(data: Session) {\n        val casted = this.sharedSession as MutableLiveData&lt;Session&gt;\n        casted.postValue(data)\n    }\n}\n</code></pre>\n\n<p><strong>MasterFragment</strong></p>\n\n<pre><code>override fun onItemClicked(item: Session) {\n    sessionSharedViewModel.setSession(item) // Item is a complex object of mine\n    this@HomeFragment.findNavController().navigate(R.id.sessionDetailsFragment)\n}\n</code></pre>\n\n<p><strong>DetailsFragment</strong></p>\n\n<pre><code>class SessionDetailsFragment : Fragment() {\n\n    companion object {\n        fun newInstance() = SessionDetailsFragment()\n    }\n\n    private lateinit var sharedViewModel: SessionSharedViewModel\n\n    override fun onCreateView(\n        inflater: LayoutInflater, container: ViewGroup?,\n        savedInstanceState: Bundle?\n    ): View? {\n        return inflater.inflate(R.layout.session_details_fragment, container, false)\n    }\n\n    override fun onActivityCreated(savedInstanceState: Bundle?) {\n        Log.d(\"SESSIONDETAILS\",\"created!\")\n\n        super.onActivityCreated(savedInstanceState)\n        sharedViewModel = ViewModelProviders.of(this).get(SessionSharedViewModel::class.java)\n        sharedViewModel.sharedSession.observe({this.lifecycle},{ handleUI(it!!)})\n    }\n\n    fun handleUI(sharedSession: Session) {\n        Toast.makeText(activity, \"This is inside new activity: ${sharedSession.title()}\", Toast.LENGTH_SHORT)\n    }\n}\n</code></pre>\n\n<hr>\n\n<p>My last hope is to serialize my object into a JSON string and reparse that object on the onCreateActivity lyfecycle hook of my Detail fragment but I feel like that is not the proper solution.</p>\n\n<p>In the worst case scenerio I would just pass the id of the object and re-fetch it from the network, but since I already have the info I want to show I'd like to pass it as a parameter.</p>\n"}, {"tags": ["java", "kotlin", "operator-overloading"], "comments": [{"owner": {"reputation": 80378, "user_id": 637853, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/72baa38005eb8de126b2dd2e6fa1d660?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/637853/thomas"}, "edited": false, "score": 1, "creation_date": 1544000526, "post_id": 53628434, "comment_id": 94116727, "body": "Would it be that bad to have both especially when <code>add()</code> gets called in the end? You could add some documentation though. Java users are used to this after all, there are several cases where multiple methods actually do the same thing."}, {"owner": {"reputation": 1583, "user_id": 5362029, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yMl70.jpg?s=128&g=1", "display_name": "Gil Goldzweig", "link": "https://stackoverflow.com/users/5362029/gil-goldzweig"}, "reply_to_user": {"reputation": 80378, "user_id": 637853, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/72baa38005eb8de126b2dd2e6fa1d660?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/637853/thomas"}, "edited": false, "score": 0, "creation_date": 1544000615, "post_id": 53628434, "comment_id": 94116769, "body": "That&#39;s what I&#39;ll do if I won&#39;t receive any solution, but that also forces me to make the function &#39;closed&#39;"}, {"owner": {"reputation": 12184, "user_id": 3544839, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/PH19M.jpg?s=128&g=1", "display_name": "Moinkhan", "link": "https://stackoverflow.com/users/3544839/moinkhan"}, "edited": false, "score": 0, "creation_date": 1544002310, "post_id": 53628434, "comment_id": 94117661, "body": "have you tried <code>internal</code> on plus function.?"}, {"owner": {"reputation": 1583, "user_id": 5362029, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yMl70.jpg?s=128&g=1", "display_name": "Gil Goldzweig", "link": "https://stackoverflow.com/users/5362029/gil-goldzweig"}, "reply_to_user": {"reputation": 12184, "user_id": 3544839, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/PH19M.jpg?s=128&g=1", "display_name": "Moinkhan", "link": "https://stackoverflow.com/users/3544839/moinkhan"}, "edited": false, "score": 0, "creation_date": 1544002539, "post_id": 53628434, "comment_id": 94117801, "body": "@Moinkhan But that will also remove the functionality from kotlin users..."}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 1, "creation_date": 1544008831, "post_id": 53628434, "comment_id": 94121585, "body": "Unless you want <code>plus</code> to be changed <i>independently from <code>add</code></i>, there&#39;s no need for it to be <code>open</code> and you can use <code>@JvmName</code>."}, {"owner": {"reputation": 1583, "user_id": 5362029, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yMl70.jpg?s=128&g=1", "display_name": "Gil Goldzweig", "link": "https://stackoverflow.com/users/5362029/gil-goldzweig"}, "edited": false, "score": 0, "creation_date": 1544009070, "post_id": 53628434, "comment_id": 94121739, "body": "@ Alexey Romanov I don&#39;t mind if it&#39;s the same or not I just don&#39;t want to force it on my users"}, {"owner": {"reputation": 1081, "user_id": 9080066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5hYG0.jpg?s=128&g=1", "display_name": "Dean", "link": "https://stackoverflow.com/users/9080066/dean"}, "edited": false, "score": 0, "creation_date": 1544019117, "post_id": 53628434, "comment_id": 94127766, "body": "As Alexy Romanov has said, just don&#39;t make the operator method open. There should be no reason that <code>add</code> and <code>plus</code> should diverge in implementation."}], "owner": {"reputation": 1583, "user_id": 5362029, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yMl70.jpg?s=128&g=1", "display_name": "Gil Goldzweig", "link": "https://stackoverflow.com/users/5362029/gil-goldzweig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1544000077, "creation_date": 1544000077, "question_id": 53628434, "link": "https://stackoverflow.com/questions/53628434/hiding-kotlin-operator-overloading-function-in-java", "title": "Hiding Kotlin Operator overloading function in java", "body": "<p>I have a library that I'm developing for kotlin users, and I'm also kinda supporting Java.</p>\n\n<p>One of my functions is 'add'\nIt looks similar to this </p>\n\n<pre><code>open fun add(element: T, position: Int = elements.size) {\n    elements.add(position, element)\n\n    if (!updateUi) return\n    if (isUiThread()) notifyItemInserted(position) else throw uiThreadException\n}\n</code></pre>\n\n<p>Which is great, to make it a bit cooler I added an Operator overloading function for the spoken 'add' function which looks like this</p>\n\n<pre><code>open operator fun plus(element: T): Unit = add(element)\n</code></pre>\n\n<p>The problem is when a java user uses it looks like a duplicate function which can cause some confusion</p>\n\n<p>Kotlin:</p>\n\n<pre><code>someClass.add(item)\nsomeClass + item\n</code></pre>\n\n<p>Java:</p>\n\n<pre><code>someClass.add(item);\nsomeClass.plus(item);\n</code></pre>\n\n<p>In the Java version, it's not that clear which one you should use and I want to hide it for java users.</p>\n\n<p>I tried changing the name using <code>@JvmName</code> but I can't use it if the function is 'open function' which I want it to be because I want to give the user the possibility to change it if that's the desire.</p>\n\n<p>Do I have a way to hide it? if not any other solution will be appreciated.</p>\n"}, {"tags": ["spring-boot", "kotlin", "swagger-ui"], "owner": {"reputation": 984, "user_id": 2293768, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/099dcc815c0819d45efc52ea46fde348?s=128&d=identicon&r=PG", "display_name": "MiguelAngel_LV", "link": "https://stackoverflow.com/users/2293768/miguelangel-lv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 289, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1591020635, "creation_date": 1543996534, "question_id": 53627590, "link": "https://stackoverflow.com/questions/53627590/swagger-kotlin-spring-boot-and-javadoc", "title": "Swagger, Kotlin, Spring Boot and javadoc", "body": "<p>I have a project with Spring  Boot + Kotlin, and I want use Swagger to make the documentation.</p>\n\n<p>The problem, I don't want repeat the document usen Javadoc and Swagger Annotations.</p>\n\n<p>I show \"enunciate\" that use javadoc to generate data for swagger, but it does not work with Kotlin, only with java.</p>\n\n<p>Using dokka I can genarate javadoc json data, but I don't know how use it for swagger.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["android", "android-studio", "kotlin", "android-developer-api"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 10743520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b2701e13e79bbbe42238aac53b1a0d9?s=128&d=identicon&r=PG&f=1", "display_name": "nirilo", "link": "https://stackoverflow.com/users/10743520/nirilo"}, "edited": false, "score": 0, "creation_date": 1544007031, "post_id": 53627535, "comment_id": 94120552, "body": "Which do I use?"}], "tags": [], "owner": {"reputation": 884, "user_id": 7074278, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hVaMu.jpg?s=128&g=1", "display_name": "SkypeDogg", "link": "https://stackoverflow.com/users/7074278/skypedogg"}, "is_accepted": false, "score": 0, "last_activity_date": 1543996284, "creation_date": 1543996284, "answer_id": 53627535, "question_id": 53627138, "link": "https://stackoverflow.com/questions/53627138/android-studio-kotlin-passing-intents-multiple-times-and-global-array/53627535#53627535", "title": "Android Studio Kotlin Passing Intents multiple times and global array?", "body": "<blockquote>\n  <p>Is it possible to pass intent from e.g activity A to B. Then at B more information is added. Then from B back to A ?</p>\n</blockquote>\n\n<p>While creating new Intent, you read data from previous and add previus data + current data and send it to next activity.</p>\n"}], "owner": {"reputation": 41, "user_id": 10743520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b2701e13e79bbbe42238aac53b1a0d9?s=128&d=identicon&r=PG&f=1", "display_name": "nirilo", "link": "https://stackoverflow.com/users/10743520/nirilo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1543996284, "creation_date": 1543994526, "question_id": 53627138, "link": "https://stackoverflow.com/questions/53627138/android-studio-kotlin-passing-intents-multiple-times-and-global-array", "title": "Android Studio Kotlin Passing Intents multiple times and global array?", "body": "<p>I have 3 activities:</p>\n\n<ul>\n<li>Home</li>\n<li>Add Ticket </li>\n<li>Ticket summary</li>\n<li>Add ticket issuer</li>\n</ul>\n\n<p>At Home, it will show a ListView of all the tickets added from \"Add Ticket\".\nWhen user submit details they entered in \"Add Ticket\" activity, they will be brought to \"Ticket summary\".\nWhen user clicks on \"add issuer\", he will be brought to \"Add ticket issuer\" activity where he can add more information. After submitting, he will be brought back to \"Ticket Summary\" activity that shows the original data along with the new (ticket issuer) data.</p>\n\n<p>When user navigates to \"Home\" activity, the list should be updated.</p>\n\n<p>How should I do this? Is it possible to pass intent from e.g activity A to B. Then at B more information is added. Then from B back to A ?</p>\n\n<p>How do I maintain that? I have the following code snippet:</p>\n\n<pre><code>class Ticketing: Application()     {\n\n\nvar ticketArray:ArrayList&lt;Ticketing&gt;? = null\n\n\nprivate val ticketinstance= Ticketing()\n\nfun getInstance():Ticketing{\n\n    return ticketinstance\n}\n\n\n\n\nfun addMovie(ticket:TicketingClass){\n    ticketArray?.add(ticket)\n}\n\nfun getArray():ArrayList&lt;Tickets&gt;?{\n    return ticketArray\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "qr-code"], "comments": [{"owner": {"reputation": 1171, "user_id": 1050407, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G820Y.jpg?s=128&g=1", "display_name": "pablobu", "link": "https://stackoverflow.com/users/1050407/pablobu"}, "edited": false, "score": 0, "creation_date": 1544015577, "post_id": 53626805, "comment_id": 94125685, "body": "Welcome Satyendra. What&#39;s the exception when you reach the catch?"}, {"owner": {"reputation": 1, "user_id": 10573758, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wFZ4fTMbss4/AAAAAAAAAAI/AAAAAAAAADI/O6f_dbgQDW8/photo.jpg?sz=128", "display_name": "Satyendra Pratap Mishra", "link": "https://stackoverflow.com/users/10573758/satyendra-pratap-mishra"}, "reply_to_user": {"reputation": 1171, "user_id": 1050407, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G820Y.jpg?s=128&g=1", "display_name": "pablobu", "link": "https://stackoverflow.com/users/1050407/pablobu"}, "edited": false, "score": 0, "creation_date": 1544084697, "post_id": 53626805, "comment_id": 94152830, "body": "First of all. pablobu thanx for your response, &quot;Failed to load image&quot; message i got, when i am select the image from gallery and it direct goes to exception block."}, {"owner": {"reputation": 1, "user_id": 10573758, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wFZ4fTMbss4/AAAAAAAAAAI/AAAAAAAAADI/O6f_dbgQDW8/photo.jpg?sz=128", "display_name": "Satyendra Pratap Mishra", "link": "https://stackoverflow.com/users/10573758/satyendra-pratap-mishra"}, "reply_to_user": {"reputation": 1171, "user_id": 1050407, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G820Y.jpg?s=128&g=1", "display_name": "pablobu", "link": "https://stackoverflow.com/users/1050407/pablobu"}, "edited": false, "score": 0, "creation_date": 1544085007, "post_id": 53626805, "comment_id": 94152950, "body": "Actually, i want to implement the qr code application in kotlin, by both method, camera and by selecting image from gallery and scan it , i succeded in the camera      part but i got error in gallery image selection, it directly goes to exception block."}], "owner": {"reputation": 1, "user_id": 10573758, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wFZ4fTMbss4/AAAAAAAAAAI/AAAAAAAAADI/O6f_dbgQDW8/photo.jpg?sz=128", "display_name": "Satyendra Pratap Mishra", "link": "https://stackoverflow.com/users/10573758/satyendra-pratap-mishra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 453, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544019989, "creation_date": 1543993062, "last_edit_date": 1544019989, "question_id": 53626805, "link": "https://stackoverflow.com/questions/53626805/in-kotlin-qr-code-scan-from-image-which-is-picking-from-the-gallery-working-fin", "title": "In kotlin QR Code scan from image which is picking from the gallery, working fine via camera but not with gallery image?", "body": "<p>In kotlin, It is a good response, when we capture image from camera, but if i want to scan qr code from image which we are selecting from gallery, it does not work. i apply the same code, with same  logic i  implemented in camera capturing image code. Select image from gallery does not work.  Please help me.  Thank you in advance.</p>\n\n<p>the code is, which i am implementing when i got imagepath of gallery.\nIt always goes to exception part because it does not load the image.</p>\n\n<pre><code>if (requestCode == IDEA_ATTACHMENTS &amp;&amp; resultCode == Activity.RESULT_OK) {\n\n\n                val mediaScanIntent = Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE)\n                mediaScanIntent.data = imagePath\n                launchMediaScanIntent(mediaScanIntent)\n                try {\n                    val bitmap = decodeBitmapUri(this, imagePath)\n                    if (detector!!.isOperational &amp;&amp; bitmap != null) {\n                        val frame = Frame.Builder().setBitmap(bitmap).build()\n                        val barcodes = detector!!.detect(frame)\n                        for (index in 0 until barcodes.size()) {\n                            val code = barcodes.valueAt(index)\n                            scanResults!!.text = scanResults!!.text.toString() + code.displayValue\n                            System.out.println(\"Satyendra=scanresult\"+scanResults!!.text)\n                            Toast.makeText(this, scanResults!!.text, Toast.LENGTH_LONG).show()\n                            val type = barcodes.valueAt(index).valueFormat\n\n                            when (type) {\n                                Barcode.CONTACT_INFO -&gt; Log.i(LOG_TAG, code.contactInfo.title)\n                                Barcode.EMAIL -&gt; Log.i(LOG_TAG, code.email.address)\n                                Barcode.ISBN -&gt; Log.i(LOG_TAG, code.rawValue)\n                                Barcode.PHONE -&gt; Log.i(LOG_TAG, code.phone.number)\n                                Barcode.PRODUCT -&gt; Log.i(LOG_TAG, code.rawValue)\n                                Barcode.SMS -&gt; Log.i(LOG_TAG, code.sms.message)\n                                Barcode.TEXT -&gt; Log.i(LOG_TAG, code.rawValue)\n                                Barcode.URL -&gt; Log.i(LOG_TAG, \"url: \" + code.url.url)\n                                Barcode.WIFI -&gt; Log.i(LOG_TAG, code.wifi.ssid)\n                                Barcode.GEO -&gt; Log.i(LOG_TAG, code.geoPoint.lat.toString() + \":\" + code.geoPoint.lng)\n                                Barcode.CALENDAR_EVENT -&gt; Log.i(LOG_TAG, code.calendarEvent.description)\n                                Barcode.DRIVER_LICENSE -&gt; Log.i(LOG_TAG, code.driverLicense.licenseNumber)\n                                else -&gt; Log.i(LOG_TAG, code.rawValue)\n                            }\n                        }\n                        if (barcodes.size() == 0) {\n                            scanResults!!.text = \"Scan Failed \"\n                        }\n                    } else {\n                        scanResults!!.text = \"Could not set up the Barcode detector!\"\n                    }\n                } catch (e: Exception) {\n                    Toast.makeText(this, \"Failed to load Image\", Toast.LENGTH_SHORT)\n                            .show()\n                    Log.e(LOG_TAG, e.toString())\n                }\n</code></pre>\n"}, {"tags": ["android", "file", "class", "kotlin"], "comments": [{"owner": {"reputation": 9541, "user_id": 1568530, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001179991520/picture?type=large", "display_name": "Vladyslav Matviienko", "link": "https://stackoverflow.com/users/1568530/vladyslav-matviienko"}, "edited": false, "score": 0, "creation_date": 1543993217, "post_id": 53626798, "comment_id": 94113355, "body": "You can&#39;t create an instance of <code>Context</code> (i mean you should not, as it won&#39;t be working). Pass the context into your class from Activity, or other context-based class"}, {"owner": {"reputation": 925, "user_id": 2147331, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/aS7vP.jpg?s=128&g=1", "display_name": "Jacqlyn", "link": "https://stackoverflow.com/users/2147331/jacqlyn"}, "reply_to_user": {"reputation": 9541, "user_id": 1568530, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001179991520/picture?type=large", "display_name": "Vladyslav Matviienko", "link": "https://stackoverflow.com/users/1568530/vladyslav-matviienko"}, "edited": false, "score": 0, "creation_date": 1543993337, "post_id": 53626798, "comment_id": 94113398, "body": "I&#39;m noticing that. Is there a way to open a file in this case?"}, {"owner": {"reputation": 9541, "user_id": 1568530, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001179991520/picture?type=large", "display_name": "Vladyslav Matviienko", "link": "https://stackoverflow.com/users/1568530/vladyslav-matviienko"}, "edited": false, "score": 0, "creation_date": 1543994448, "post_id": 53626798, "comment_id": 94113890, "body": "yes, but as I said, you need to pass a valid <code>Context</code> into your class"}], "answers": [{"comments": [{"owner": {"reputation": 925, "user_id": 2147331, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/aS7vP.jpg?s=128&g=1", "display_name": "Jacqlyn", "link": "https://stackoverflow.com/users/2147331/jacqlyn"}, "edited": false, "score": 0, "creation_date": 1544043629, "post_id": 53627202, "comment_id": 94140787, "body": "I tried this, but it&#39;s reverted to a previous bug where it&#39;s not able to find the the object that I created in that class file, even though the IDE can find it and lets me use it. Is there an easy way to add it?"}], "tags": [], "owner": {"reputation": 300, "user_id": 6537788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a031cde073f8451baeffbc426ba7bb3?s=128&d=identicon&r=PG&f=1", "display_name": "asim", "link": "https://stackoverflow.com/users/6537788/asim"}, "is_accepted": false, "score": 1, "last_activity_date": 1543994788, "creation_date": 1543994788, "answer_id": 53627202, "question_id": 53626798, "link": "https://stackoverflow.com/questions/53626798/is-there-a-way-to-open-a-file-from-a-non-activity-class-in-kotlin-on-android/53627202#53627202", "title": "Is there a way to open a file from a non-activity class in Kotlin on Android?", "body": "<p>you need context for accessing resource. you can declare application context in Application class.</p>\n\n<pre><code>class App : Application() {\n    override fun onCreate() {\n        super.onCreate()\n        context = this\n    }\n    companion object {\n        var context: Context? = null\n            internal set\n    }\n}\n</code></pre>\n\n<p>use this context anywhere in app like this.</p>\n\n<pre><code>fun test() {\n        val _ignorereader = App.context.getResources().openRawResource(R.raw.test).bufferedReader()\n        val _ignorelist = _ignorereader.readLines().toTypedArray().toList()\n        return _ignorelist\n    }\n</code></pre>\n\n<p>also make sure you have declare App in your manifest.</p>\n\n<pre><code>&lt;application\n        android:name=\".App\"\n......&gt;\n&lt;/application&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1555, "user_id": 7226787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6960085f211099a494254fd6b054fec?s=128&d=identicon&r=PG&f=1", "display_name": "jessica", "link": "https://stackoverflow.com/users/7226787/jessica"}, "is_accepted": false, "score": 0, "last_activity_date": 1544005570, "creation_date": 1544005570, "answer_id": 53630117, "question_id": 53626798, "link": "https://stackoverflow.com/questions/53626798/is-there-a-way-to-open-a-file-from-a-non-activity-class-in-kotlin-on-android/53630117#53630117", "title": "Is there a way to open a file from a non-activity class in Kotlin on Android?", "body": "<blockquote>\n  <ol>\n  <li>Create Application Class</li>\n  </ol>\n</blockquote>\n\n<pre><code>class AppClass : Application()\n{\n    override fun onCreate() {\n        super.onCreate()\n        context = this\n    }\n    companion object {\n        var context: Context? = null\n            internal set\n    }\n}\n</code></pre>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>Declare application class in Manifest. under application tag.</li>\n  </ol>\n</blockquote>\n\n<pre><code> &lt;application\n        android:name=\u201c.AppClass\"\n</code></pre>\n\n<blockquote>\n  <ol start=\"3\">\n  <li>Create class to read file from raw folder</li>\n  </ol>\n</blockquote>\n\n<pre><code>class ReadFile {\n    fun ReadXmlFile(): List&lt;String&gt;\n    {\n        val dataList = ArrayList&lt;String&gt;()\n        var factory: XmlPullParserFactory? = null\n        var data = \"\"\n        try {\n            factory = XmlPullParserFactory.newInstance()\n            val xpp = factory!!.newPullParser()\n            val open = App.context!!.resources.openRawResource(R.raw.datafile)\n            xpp.setInput(open, \"UTF_8\")\n\n            var eventType = xpp.eventType\n            while (eventType != XmlPullParser.END_DOCUMENT) {\n                if (eventType == XmlPullParser.START_TAG) {\n\n                    if (xpp.name.equals(\"Data\", ignoreCase = true)) {\n                        xpp.next()\n                        data = xpp.text\n                        dataList.add(data)\n\n                    }\n                } else if (eventType == XmlPullParser.END_TAG) {\n                }\n\n                eventType = xpp.next() // move to next element\n            }\n        } catch (e: XmlPullParserException) {\n            e.printStackTrace()\n        } catch (e: IOException) {\n            e.printStackTrace()\n        }\n        return dataList;\n    }\n\n}\n</code></pre>\n\n<blockquote>\n  <ol start=\"4\">\n  <li>Sample datafile.xml  in raw folder</li>\n  </ol>\n</blockquote>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;main&gt;\n    &lt;item&gt;\n        &lt;Data&gt;Data 1.&lt;/Data&gt;\n    &lt;/item&gt;\n\n    &lt;item&gt;\n        &lt;Data&gt;Data 2.&lt;/Data&gt;\n    &lt;/item&gt;\n&lt;/main&gt;\n</code></pre>\n\n<blockquote>\n  <ol start=\"5\">\n  <li>Read file in activity</li>\n  </ol>\n</blockquote>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n       val  dataList = ReadFile().ReadXmlFile()\n        Log.d(\"TAG\", dataList.toString());\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 925, "user_id": 2147331, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/aS7vP.jpg?s=128&g=1", "display_name": "Jacqlyn", "link": "https://stackoverflow.com/users/2147331/jacqlyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 371, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1544005570, "creation_date": 1543993038, "question_id": 53626798, "link": "https://stackoverflow.com/questions/53626798/is-there-a-way-to-open-a-file-from-a-non-activity-class-in-kotlin-on-android", "title": "Is there a way to open a file from a non-activity class in Kotlin on Android?", "body": "<p>I have a non-activity Kotlin class in my app. Since it doesn't have any visual stimulus for the user, I did not make it into an activity.</p>\n\n<p>The class pulls a list from a file, which I put in the <code>res/raw</code> folder. According to the Android docs, I use <code>openRawResource()</code>, which requires a Context.</p>\n\n<p>Other similar questions in Java show a variable being declared as a variable, but when I do this in Kotlin, it tells me that the <code>variable _context must be initialized</code>. This is my code so far:</p>\n\n<pre><code>val _context:Context = object: Context()\nval _ignorereader = _context.getResources().openRawResource(R.raw.ignorelist).bufferedReader()\nval _ignorelist = _ignorereader.readLines().toTypedArray().toList()\nreturn _ignorelist\n</code></pre>\n\n<p>Right now I'm getting the error: <code>Expecting a class body</code> from the first line.</p>\n\n<p>Is there a way to open files in non-activity classes?</p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 3964, "user_id": 5188516, "user_type": "registered", "accept_rate": 19, "profile_image": "https://lh5.googleusercontent.com/-Rm8h7GXYYB4/AAAAAAAAAAI/AAAAAAAAABw/ZrJ_i_mACi0/photo.jpg?sz=128", "display_name": "Abdul Waheed", "link": "https://stackoverflow.com/users/5188516/abdul-waheed"}, "edited": false, "score": 0, "creation_date": 1543991347, "post_id": 53626372, "comment_id": 94112634, "body": "can you post your crash log. what i believe your app is crashing some where"}, {"owner": {"reputation": 1467, "user_id": 6698642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd80a09064542c848ba86ff1d9e22025?s=128&d=identicon&r=PG&f=1", "display_name": "TheGamer007", "link": "https://stackoverflow.com/users/6698642/thegamer007"}, "edited": false, "score": 0, "creation_date": 1543991905, "post_id": 53626372, "comment_id": 94112831, "body": "Please post relevant activity code, and a copy of the logcat if the app is crashing rather than just closing itself."}, {"owner": {"reputation": 398, "user_id": 5901903, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TQsjs.png?s=128&g=1", "display_name": "MadLeo", "link": "https://stackoverflow.com/users/5901903/madleo"}, "edited": false, "score": 0, "creation_date": 1543991908, "post_id": 53626372, "comment_id": 94112833, "body": "post your error log"}, {"owner": {"reputation": 2987, "user_id": 7832102, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6a7BV.jpg?s=128&g=1", "display_name": "Prince Dholakiya", "link": "https://stackoverflow.com/users/7832102/prince-dholakiya"}, "edited": false, "score": 0, "creation_date": 1543992188, "post_id": 53626372, "comment_id": 94112941, "body": "Please, Can you show me your Error log or your Manifest File?"}, {"owner": {"reputation": 29, "user_id": 7908835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28f71b602d788b94f4a1995efd707388?s=128&d=identicon&r=PG&f=1", "display_name": "programmer211216", "link": "https://stackoverflow.com/users/7908835/programmer211216"}, "reply_to_user": {"reputation": 398, "user_id": 5901903, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TQsjs.png?s=128&g=1", "display_name": "MadLeo", "link": "https://stackoverflow.com/users/5901903/madleo"}, "edited": false, "score": 0, "creation_date": 1543993087, "post_id": 53626372, "comment_id": 94113305, "body": "the error log says Session &#39;app&#39;: Error Launching Activity @MadLeo"}, {"owner": {"reputation": 29, "user_id": 7908835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28f71b602d788b94f4a1995efd707388?s=128&d=identicon&r=PG&f=1", "display_name": "programmer211216", "link": "https://stackoverflow.com/users/7908835/programmer211216"}, "reply_to_user": {"reputation": 2987, "user_id": 7832102, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6a7BV.jpg?s=128&g=1", "display_name": "Prince Dholakiya", "link": "https://stackoverflow.com/users/7832102/prince-dholakiya"}, "edited": false, "score": 0, "creation_date": 1543993121, "post_id": 53626372, "comment_id": 94113322, "body": "already posted the manifest file @user7832102"}, {"owner": {"reputation": 398, "user_id": 5901903, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TQsjs.png?s=128&g=1", "display_name": "MadLeo", "link": "https://stackoverflow.com/users/5901903/madleo"}, "edited": false, "score": 0, "creation_date": 1543993252, "post_id": 53626372, "comment_id": 94113367, "body": "post your error log fully can&#39;t help with Error Launching Activity"}, {"owner": {"reputation": 29, "user_id": 7908835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28f71b602d788b94f4a1995efd707388?s=128&d=identicon&r=PG&f=1", "display_name": "programmer211216", "link": "https://stackoverflow.com/users/7908835/programmer211216"}, "reply_to_user": {"reputation": 3964, "user_id": 5188516, "user_type": "registered", "accept_rate": 19, "profile_image": "https://lh5.googleusercontent.com/-Rm8h7GXYYB4/AAAAAAAAAAI/AAAAAAAAABw/ZrJ_i_mACi0/photo.jpg?sz=128", "display_name": "Abdul Waheed", "link": "https://stackoverflow.com/users/5188516/abdul-waheed"}, "edited": false, "score": 0, "creation_date": 1543993259, "post_id": 53626372, "comment_id": 94113370, "body": "@AbdulWaheed   the log says Session &#39;app&#39;:Error Launching Activity"}, {"owner": {"reputation": 29, "user_id": 7908835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28f71b602d788b94f4a1995efd707388?s=128&d=identicon&r=PG&f=1", "display_name": "programmer211216", "link": "https://stackoverflow.com/users/7908835/programmer211216"}, "reply_to_user": {"reputation": 398, "user_id": 5901903, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TQsjs.png?s=128&g=1", "display_name": "MadLeo", "link": "https://stackoverflow.com/users/5901903/madleo"}, "edited": false, "score": 0, "creation_date": 1543993892, "post_id": 53626372, "comment_id": 94113644, "body": "@MadLeo i&#39;m sorry but where can i get the error log though? I am confused with the event log at the bottom"}, {"owner": {"reputation": 398, "user_id": 5901903, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TQsjs.png?s=128&g=1", "display_name": "MadLeo", "link": "https://stackoverflow.com/users/5901903/madleo"}, "edited": false, "score": 0, "creation_date": 1543995210, "post_id": 53626372, "comment_id": 94114261, "body": "In android studio at bottom left you can find Logcat click on that, there are log level filter also available, you can filter by error"}, {"owner": {"reputation": 29, "user_id": 7908835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28f71b602d788b94f4a1995efd707388?s=128&d=identicon&r=PG&f=1", "display_name": "programmer211216", "link": "https://stackoverflow.com/users/7908835/programmer211216"}, "reply_to_user": {"reputation": 398, "user_id": 5901903, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TQsjs.png?s=128&g=1", "display_name": "MadLeo", "link": "https://stackoverflow.com/users/5901903/madleo"}, "edited": false, "score": 0, "creation_date": 1543995481, "post_id": 53626372, "comment_id": 94114396, "body": "@MadLeo im not sure which to copy?"}, {"owner": {"reputation": 398, "user_id": 5901903, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TQsjs.png?s=128&g=1", "display_name": "MadLeo", "link": "https://stackoverflow.com/users/5901903/madleo"}, "edited": false, "score": 0, "creation_date": 1543995750, "post_id": 53626372, "comment_id": 94114522, "body": "event log is not required search Logcat in android studio bottom left corner"}, {"owner": {"reputation": 372, "user_id": 10075771, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IJ9IP.png?s=128&g=1", "display_name": "No Name", "link": "https://stackoverflow.com/users/10075771/no-name"}, "edited": false, "score": 0, "creation_date": 1543995775, "post_id": 53626372, "comment_id": 94114535, "body": "did you try to clean and rebuild project?"}, {"owner": {"reputation": 29, "user_id": 7908835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28f71b602d788b94f4a1995efd707388?s=128&d=identicon&r=PG&f=1", "display_name": "programmer211216", "link": "https://stackoverflow.com/users/7908835/programmer211216"}, "reply_to_user": {"reputation": 372, "user_id": 10075771, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IJ9IP.png?s=128&g=1", "display_name": "No Name", "link": "https://stackoverflow.com/users/10075771/no-name"}, "edited": false, "score": 0, "creation_date": 1543995852, "post_id": 53626372, "comment_id": 94114570, "body": "@NoName yes i did many times."}, {"owner": {"reputation": 29, "user_id": 7908835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28f71b602d788b94f4a1995efd707388?s=128&d=identicon&r=PG&f=1", "display_name": "programmer211216", "link": "https://stackoverflow.com/users/7908835/programmer211216"}, "reply_to_user": {"reputation": 398, "user_id": 5901903, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TQsjs.png?s=128&g=1", "display_name": "MadLeo", "link": "https://stackoverflow.com/users/5901903/madleo"}, "edited": false, "score": 0, "creation_date": 1543996017, "post_id": 53626372, "comment_id": 94114649, "body": "@MadLeo just posted the error logs (some) since it is too long and i dont know which part should i have copied."}, {"owner": {"reputation": 398, "user_id": 5901903, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TQsjs.png?s=128&g=1", "display_name": "MadLeo", "link": "https://stackoverflow.com/users/5901903/madleo"}, "edited": false, "score": 0, "creation_date": 1543996249, "post_id": 53626372, "comment_id": 94114759, "body": "the issue is kotlin.KotlinNullPointerException in your MainActivity search for that where its happening"}, {"owner": {"reputation": 398, "user_id": 5901903, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TQsjs.png?s=128&g=1", "display_name": "MadLeo", "link": "https://stackoverflow.com/users/5901903/madleo"}, "edited": false, "score": 0, "creation_date": 1543996605, "post_id": 53626372, "comment_id": 94114917, "body": "check line no 17 in your MainActivity"}, {"owner": {"reputation": 29, "user_id": 7908835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28f71b602d788b94f4a1995efd707388?s=128&d=identicon&r=PG&f=1", "display_name": "programmer211216", "link": "https://stackoverflow.com/users/7908835/programmer211216"}, "reply_to_user": {"reputation": 398, "user_id": 5901903, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TQsjs.png?s=128&g=1", "display_name": "MadLeo", "link": "https://stackoverflow.com/users/5901903/madleo"}, "edited": false, "score": 0, "creation_date": 1543996606, "post_id": 53626372, "comment_id": 94114918, "body": "I have just posted the MainActivity code above. i deleted the &quot;!!&quot; symbol but it is underlined red @MadLeo"}, {"owner": {"reputation": 29, "user_id": 7908835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28f71b602d788b94f4a1995efd707388?s=128&d=identicon&r=PG&f=1", "display_name": "programmer211216", "link": "https://stackoverflow.com/users/7908835/programmer211216"}, "reply_to_user": {"reputation": 398, "user_id": 5901903, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TQsjs.png?s=128&g=1", "display_name": "MadLeo", "link": "https://stackoverflow.com/users/5901903/madleo"}, "edited": false, "score": 0, "creation_date": 1543997301, "post_id": 53626372, "comment_id": 94115226, "body": "alright I have changed it by removing the null. Problem solved. Thanks to everyone @MadLeo"}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 7908835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28f71b602d788b94f4a1995efd707388?s=128&d=identicon&r=PG&f=1", "display_name": "programmer211216", "link": "https://stackoverflow.com/users/7908835/programmer211216"}, "edited": false, "score": 0, "creation_date": 1543993164, "post_id": 53626537, "comment_id": 94113338, "body": "yes i did. you can refer to the above manifest code. i&#39;ve just posted it."}], "tags": [], "owner": {"reputation": 2987, "user_id": 7832102, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6a7BV.jpg?s=128&g=1", "display_name": "Prince Dholakiya", "link": "https://stackoverflow.com/users/7832102/prince-dholakiya"}, "is_accepted": false, "score": 0, "last_activity_date": 1543991992, "creation_date": 1543991992, "answer_id": 53626537, "question_id": 53626372, "link": "https://stackoverflow.com/questions/53626372/mainactivity-not-launching-when-it-is-run/53626537#53626537", "title": "MainActivity not launching when it is run", "body": "<p>Do you Add this     &#x2B07; in your Activity tag within manifest file. </p>\n\n<pre><code>            &lt;intent-filter&gt;\n                &lt;action android:name=\"android.intent.action.MAIN\" /&gt;\n                &lt;category android:name=\"android.intent.category.LAUNCHER\" /&gt;\n            &lt;/intent-filter&gt;\n</code></pre>\n\n<p>This code is use for first launcher activity specification.</p>\n"}, {"comments": [{"owner": {"reputation": 29, "user_id": 7908835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28f71b602d788b94f4a1995efd707388?s=128&d=identicon&r=PG&f=1", "display_name": "programmer211216", "link": "https://stackoverflow.com/users/7908835/programmer211216"}, "edited": false, "score": 0, "creation_date": 1543997411, "post_id": 53627710, "comment_id": 94115265, "body": "yes I have just changed even before i saw answer. Thanks for clues."}], "tags": [], "owner": {"reputation": 398, "user_id": 5901903, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TQsjs.png?s=128&g=1", "display_name": "MadLeo", "link": "https://stackoverflow.com/users/5901903/madleo"}, "is_accepted": true, "score": 0, "last_activity_date": 1543997050, "creation_date": 1543997050, "answer_id": 53627710, "question_id": 53626372, "link": "https://stackoverflow.com/questions/53626372/mainactivity-not-launching-when-it-is-run/53627710#53627710", "title": "MainActivity not launching when it is run", "body": "<p>So After a long discussion i can see that you are setting null to your button</p>\n\n<pre><code>val btnLogin: Button? = null\nval btnRegister: Button? = null\n</code></pre>\n\n<p>and then on null you are setting onClickListener that's why it's crashing so you have to set the reference of button something like this after your declaration </p>\n\n<pre><code>btnLogin = findViewById(R.id.buttonid) as Button\nbtnRegister = findViewById(R.id.buttonid) as Button\n</code></pre>\n\n<p>the button id you can find from your activity_main layout file.</p>\n"}], "owner": {"reputation": 29, "user_id": 7908835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28f71b602d788b94f4a1995efd707388?s=128&d=identicon&r=PG&f=1", "display_name": "programmer211216", "link": "https://stackoverflow.com/users/7908835/programmer211216"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 359, "favorite_count": 0, "closed_date": 1543997414, "accepted_answer_id": 53627710, "answer_count": 2, "score": -1, "last_activity_date": 1543997764, "creation_date": 1543991262, "last_edit_date": 1543997764, "question_id": 53626372, "link": "https://stackoverflow.com/questions/53626372/mainactivity-not-launching-when-it-is-run", "closed_reason": "Duplicate", "title": "MainActivity not launching when it is run", "body": "<p>I am developing a simple login and register android app and everything have been coded and no errors were issued. The app can be ran successfully and all, but, the screen doesn't show the launcher activity. Like, it only shows up and then immediately close the app. I hope someone can catch what I am trying to say here. Also, I'm 100% sure that i have registered the activities on the manifest file.</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.INTERNET\"/&gt;\n&lt;uses-permission android:name=\"android.permission.READ_PHONE_STATE\"/&gt;\n\n&lt;application\n        android:allowBackup=\"true\"\n        android:icon=\"@mipmap/ic_launcher\"\n        android:label=\"@string/app_name\"\n        android:roundIcon=\"@mipmap/ic_launcher_round\"\n        android:supportsRtl=\"true\"\n        android:theme=\"@style/AppTheme\"\n        tools:ignore=\"GoogleAppIndexingWarning\"&gt;\n\n    &lt;activity android:name=\".MainActivity\"&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=\"android.intent.action.MAIN\"/&gt;\n            &lt;category android:name=\"android.intent.category.LAUNCHER\"/&gt;\n            &lt;category android:name=\"android.intent.category.DEFAULT\"/&gt;\n        &lt;/intent-filter&gt;\n    &lt;/activity&gt;\n\n    &lt;activity\n            android:name=\".LoginActivity\"&gt;\n    &lt;/activity&gt;\n    &lt;activity\n            android:name=\".RegisterActivity\"&gt;\n    &lt;/activity&gt;\n\n\n    &lt;service android:name=\".MyFirebaseMessagingService\"&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=\"com.google.firebase.MESSAGING_EVENT\"/&gt;\n        &lt;/intent-filter&gt;\n    &lt;/service&gt;\n    &lt;service android:name=\".MyFirebaseInstanceIDService\"&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=\"com.google.firebase.INSTANCE_ID_EVENT\"/&gt;\n        &lt;/intent-filter&gt;\n    &lt;/service&gt;\n\n    &lt;meta-data\n            android:name=\"android.app.alertbox\"\n            android:resource=\"@xml/automotive_app_desc\"/&gt;\n&lt;/application&gt;\n\n&lt;/manifest&gt; \n</code></pre>\n\n<p>And this is what i get from the error log.</p>\n\n<pre><code>Caused by: kotlin.KotlinNullPointerException\n        at com.example.acer.alertbox.MainActivity.onCreate(MainActivity.kt:17)\n        at android.app.Activity.performCreate(Activity.java:6910)\n        at \n   android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1123)\n        at \n   android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2746)\n        at \n   android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2864)\u00a0\n        at android.app.ActivityThread.-wrap12(ActivityThread.java)\u00a0\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1567)\u00a0\n        at android.os.Handler.dispatchMessage(Handler.java:105)\u00a0\n        at android.os.Looper.loop(Looper.java:156)\u00a0\n        at android.app.ActivityThread.main(ActivityThread.java:6523)\u00a0\n        at java.lang.reflect.Method.invoke(Native Method)\u00a0\n        at \n\n\n com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:941)\u00a0\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:831)\u00a0\n</code></pre>\n\n<p>This is my MainActivity.kt code:</p>\n\n<pre><code>package com.example.acer.alertbox\n\nimport android.content.Intent\nimport android.support.v7.app.AppCompatActivity\nimport android.os.Bundle\nimport android.widget.Button\n\nclass MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        val btnLogin: Button? = null\n        val btnRegister: Button? = null\n\n        btnLogin!!.setOnClickListener {\n            val intent = Intent(this@MainActivity, LoginActivity::class.java)\n            startActivity(intent)\n        }\n\n        btnRegister!!.setOnClickListener {\n            val regIntent = Intent(this@MainActivity, RegisterActivity::class.java)\n            startActivity(regIntent)\n        }\n\n    }\n}\n</code></pre>\n\n<p>*Update: I have solved the issues by removing the null pointers. I did not know that there was any error because I did not check nor did I know how to open the Log Error so that is why I did not know this type of question has been asked before. I'm a new android developer by the way.</p>\n"}, {"tags": ["gradle", "intellij-idea", "kotlin", "gradle-kotlin-dsl"], "comments": [{"owner": {"reputation": 5141, "user_id": 1567541, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/bgQcd.jpg?s=128&g=1", "display_name": "Hendra Anggrian", "link": "https://stackoverflow.com/users/1567541/hendra-anggrian"}, "edited": false, "score": 0, "creation_date": 1544422694, "post_id": 53625966, "comment_id": 94255573, "body": "You may have to roll back to Gradle 4. <code>IdeaModuleDependency. getDependencyModule()</code> has been removed in Gradle 5."}, {"owner": {"reputation": 1339, "user_id": 1359988, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/00c331889adb81f68b66cd75734459a6?s=128&d=identicon&r=PG", "display_name": "zjuhasz", "link": "https://stackoverflow.com/users/1359988/zjuhasz"}, "reply_to_user": {"reputation": 5141, "user_id": 1567541, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/bgQcd.jpg?s=128&g=1", "display_name": "Hendra Anggrian", "link": "https://stackoverflow.com/users/1567541/hendra-anggrian"}, "edited": false, "score": 0, "creation_date": 1544555434, "post_id": 53625966, "comment_id": 94315321, "body": "@HendraAnggrian but what is using <code>IdeaModuleDependency.getDependencyModule()</code>? It&#39;s not in any of my build scripts and as far as I can tell most people aren&#39;t having this issue."}, {"owner": {"reputation": 1339, "user_id": 1359988, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/00c331889adb81f68b66cd75734459a6?s=128&d=identicon&r=PG", "display_name": "zjuhasz", "link": "https://stackoverflow.com/users/1359988/zjuhasz"}, "reply_to_user": {"reputation": 5141, "user_id": 1567541, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/bgQcd.jpg?s=128&g=1", "display_name": "Hendra Anggrian", "link": "https://stackoverflow.com/users/1567541/hendra-anggrian"}, "edited": false, "score": 0, "creation_date": 1544555945, "post_id": 53625966, "comment_id": 94315553, "body": "Is there any way to tell where it is being called?"}, {"owner": {"reputation": 5141, "user_id": 1567541, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/bgQcd.jpg?s=128&g=1", "display_name": "Hendra Anggrian", "link": "https://stackoverflow.com/users/1567541/hendra-anggrian"}, "edited": false, "score": 3, "creation_date": 1544764857, "post_id": 53625966, "comment_id": 94399158, "body": "<code>IdeaModuleDependency</code> is bundled within gradle api, you may not use them, but at least one gradle plugins you&#39;re using may be dependant on it. Android gradle plugin is an example, you will have to wait until they release a version that is built upon Gradle 5."}, {"owner": {"reputation": 1651, "user_id": 992380, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G7SKc.jpg?s=128&g=1", "display_name": "Alexey Belkov", "link": "https://stackoverflow.com/users/992380/alexey-belkov"}, "edited": false, "score": 1, "creation_date": 1547049361, "post_id": 53625966, "comment_id": 95060338, "body": "Related issue: <a href=\"https://youtrack.jetbrains.com/issue/KT-29127\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-29127</a>"}], "owner": {"reputation": 1339, "user_id": 1359988, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/00c331889adb81f68b66cd75734459a6?s=128&d=identicon&r=PG", "display_name": "zjuhasz", "link": "https://stackoverflow.com/users/1359988/zjuhasz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1378, "favorite_count": 2, "answer_count": 0, "score": 11, "last_activity_date": 1543989551, "creation_date": 1543989221, "last_edit_date": 1543989551, "question_id": 53625966, "link": "https://stackoverflow.com/questions/53625966/unsupported-method-ideamoduledependency-getdependencymodule-error-when-migrat", "title": "Unsupported method: IdeaModuleDependency.getDependencyModule() error when migrating project to Gradle Kotlin DSL", "body": "<p>I am getting a very uninformative error when I try to build my project after migrating from Gradle Groovy DSL to Kotlin DSL in IntelliJ IDEA.</p>\n\n<p><code>Unsupported method: IdeaModuleDependency.getDependencyModule().\nThe version of Gradle you connect to does not support that method.\nTo resolve the problem you can change/upgrade the target version of Gradle you connect to.\nAlternatively, you can ignore this exception and read other information from the model.</code></p>\n\n<p>I'm using the gradle 5.0 wrapper so updating is not an option as far as I know.</p>\n\n<p>I'm also on the latest version of IntelliJ with all plugins up to date.</p>\n\n<p>IntelliJ IDEA 2018.3 (Ultimate Edition)\nBuild #IU-183.4284.148, built on November 21, 2018</p>\n\n<p>The project I'm building with Gradle is a multi module Kotlin-JVM project.</p>\n"}, {"tags": ["kotlin", "integration-testing", "android-livedata"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 1, "creation_date": 1543963589, "post_id": 53622535, "comment_id": 94105589, "body": "How about testing it, telling what you expect to happen and what happens instead, and of course posting your code if you need clarifications?"}, {"owner": {"reputation": 610, "user_id": 10365158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ajOMa.jpg?s=128&g=1", "display_name": "BlondeSwan", "link": "https://stackoverflow.com/users/10365158/blondeswan"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1543964016, "post_id": 53622535, "comment_id": 94105717, "body": "@JBNizet I&#39;ve have tried... <code>response.result.value</code> is not an actual thing, only <code>response.result</code> is legitimate. For example, <code>response</code> is a custom response object, and the <code>result</code> variable is <code>Result&lt;SuccessData, ErrorType&gt;</code>. I need to evaluate is result is SuccessData, or ErrorType, not sure how to do it (if possible)."}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1543964132, "post_id": 53622535, "comment_id": 94105752, "body": "Well, read the documentation, or the source code, or both, of the Result class. You haven&#39;t posted it, so how could we know?"}, {"owner": {"reputation": 610, "user_id": 10365158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ajOMa.jpg?s=128&g=1", "display_name": "BlondeSwan", "link": "https://stackoverflow.com/users/10365158/blondeswan"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1543964684, "post_id": 53622535, "comment_id": 94105891, "body": "@JBNizet behmm, well you could read my question clearly before commenting and being rude... I told you that the Result class is declared with type <code>Result&lt;SuccessData, ErrorType&gt;</code>. This means that a return value could be either <code>SuccessData</code> or <code>ErrorType</code>. But how can I unwrap the <code>Result&lt;SuccessData, ErrorType&gt;</code> to evaluate if it&#39;s <code>SuccessData</code> or <code>ErrorType</code>?.   I&#39;ve edited my question to contain the <code>Result&lt;SuccessData, ErrorType&gt;</code> class just for you"}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1543993412, "post_id": 53622535, "comment_id": 94113437, "body": "where have I been rude exactly? You realize that you have the source code, and yet you&#39;re unable to tell by yourself if using <code>response.result.value</code> is the right way to access the result. And yet you&#39;re asking us to tell you how to do it, but without providing the source code, despite being asked to do that twice. I have tried my best not being rude, but really, you&#39;re not making it easy."}], "answers": [{"tags": [], "owner": {"reputation": 737, "user_id": 10715642, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QRLDtnm1-IE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-ipSlUb1x7ARbIjnOaLC_Y9VX2jNQ/mo/photo.jpg?sz=128", "display_name": "Damon Baker", "link": "https://stackoverflow.com/users/10715642/damon-baker"}, "is_accepted": true, "score": 2, "last_activity_date": 1543974572, "creation_date": 1543974572, "answer_id": 53624019, "question_id": 53622535, "link": "https://stackoverflow.com/questions/53622535/determine-which-of-two-possible-result-objects-has-been-returned/53624019#53624019", "title": "Determine which of two possible result objects has been returned", "body": "<p>If you just want to assert whether a response is successful or not.</p>\n\n<pre><code>// Test Successful Response\nAssert.assertTrue(response.result is Result.Ok)\n\n// Test Failed Response\nAssert.assertTrue(response.result is Result.Error)\n</code></pre>\n\n<p>If you want to perform assertions on the data from the response, then you can write it like this.</p>\n\n<pre><code>if (response.result is Result.Ok) {\n    Assert.assertEquals(result.data, \"some data\")\n} else {\n    fail()\n}\n</code></pre>\n"}], "owner": {"reputation": 610, "user_id": 10365158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ajOMa.jpg?s=128&g=1", "display_name": "BlondeSwan", "link": "https://stackoverflow.com/users/10365158/blondeswan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 53624019, "answer_count": 1, "score": 0, "last_activity_date": 1543974572, "creation_date": 1543963259, "last_edit_date": 1543964754, "question_id": 53622535, "link": "https://stackoverflow.com/questions/53622535/determine-which-of-two-possible-result-objects-has-been-returned", "title": "Determine which of two possible result objects has been returned", "body": "<p>I have a <code>Result&lt;SuccessData, ErrorType&gt;</code> sealed class that I use to represent a response from an api. In fragments, I use this to parse the response:</p>\n\n<pre><code>activity?.onResult(response?.result, onSuccess = {\n    // Act on successful response\n}, onValidationError = {\n    // Act on errored response\n})\n</code></pre>\n\n<p>Now, in my tests, I would like to test the response and run asserts on if it's a successful response, or an error response (and what type of response).</p>\n\n<p>If I have a variable like <code>response: Result&lt;SuccessData, ErrorType&gt; = someResponse</code> returned, is it possible for me to do something like </p>\n\n<pre><code>// Test Successful Response\nAssert.assertTrue(response.result.value is SuccessData)\n\n// Test Failed Response\nAssert.assertTrue(response.result.value is ErrorType)\n</code></pre>\n\n<p>EDIT: Add Result Class </p>\n\n<pre><code>sealed class Result&lt;out Success, out ErrorType&gt; {\n    companion object {\n        fun &lt;T&gt; success(value: T): Ok&lt;T&gt; = Ok(value)\n        fun &lt;E&gt; error(errors: List&lt;E&gt;): Error&lt;E&gt; = Error(errors)\n    }\n\n    // success response data\n    data class Ok&lt;out T&gt; internal constructor(val data: T) : Result&lt;T, Nothing&gt;()\n\n    // expected validation errors\n    data class Error&lt;out E&gt; internal constructor(val errors: List&lt;E&gt;) : Result&lt;Nothing, E&gt;()\n\n    sealed class GenericError {\n        class Unknown : GenericError()\n        class ServerDown : GenericError()\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "encryption", "kotlin", "cryptography", "aes-gcm"], "comments": [{"owner": {"reputation": 3791, "user_id": 1820553, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NZb6uZzo4Gg/AAAAAAAAAAI/AAAAAAAAAo0/xTr6RvgMTRw/photo.jpg?sz=128", "display_name": "kelalaka", "link": "https://stackoverflow.com/users/1820553/kelalaka"}, "edited": false, "score": 0, "creation_date": 1543961676, "post_id": 53621994, "comment_id": 94104908, "body": "Convert Base64 before save. see <a href=\"https://stackoverflow.com/questions/27402716/aes-gcm-aeadbadtagexception-mac-check-in-gcm-failed\">this</a>"}, {"owner": {"reputation": 36469, "user_id": 238704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VgOZI.png?s=128&g=1", "display_name": "President James K. Polk", "link": "https://stackoverflow.com/users/238704/president-james-k-polk"}, "reply_to_user": {"reputation": 3791, "user_id": 1820553, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NZb6uZzo4Gg/AAAAAAAAAAI/AAAAAAAAAo0/xTr6RvgMTRw/photo.jpg?sz=128", "display_name": "kelalaka", "link": "https://stackoverflow.com/users/1820553/kelalaka"}, "edited": false, "score": 0, "creation_date": 1543969219, "post_id": 53621994, "comment_id": 94107083, "body": "@kelalaka: There&#39;s no reason to base64 encode that I can see."}, {"owner": {"reputation": 111, "user_id": 6353410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86d33f5dc487b8be9b511406ebc4b0dd?s=128&d=identicon&r=PG&f=1", "display_name": "FalseNull", "link": "https://stackoverflow.com/users/6353410/falsenull"}, "reply_to_user": {"reputation": 3791, "user_id": 1820553, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NZb6uZzo4Gg/AAAAAAAAAAI/AAAAAAAAAo0/xTr6RvgMTRw/photo.jpg?sz=128", "display_name": "kelalaka", "link": "https://stackoverflow.com/users/1820553/kelalaka"}, "edited": false, "score": 0, "creation_date": 1543981340, "post_id": 53621994, "comment_id": 94109807, "body": "@kelalaka, I think James is right. I&#39;m not trying to encrypt a string then save it. I just want to encrypt the raw bytes from the files. Since it works with images, I don&#39;t think base64 is the issue. I&#39;m curious as to if maybe somehow PDF data is messing with the tag that is being generated by the cipher? I did check the length of both the encrypted data that is written, and the encrypted data that is read when decrypting, and they are the same length. I&#39;ll do a check if it&#39;s the same data tommorrow."}], "answers": [{"tags": [], "owner": {"reputation": 111, "user_id": 6353410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86d33f5dc487b8be9b511406ebc4b0dd?s=128&d=identicon&r=PG&f=1", "display_name": "FalseNull", "link": "https://stackoverflow.com/users/6353410/falsenull"}, "is_accepted": true, "score": 1, "last_activity_date": 1544039389, "last_edit_date": 1544039389, "creation_date": 1544038233, "answer_id": 53639458, "question_id": 53621994, "link": "https://stackoverflow.com/questions/53621994/android-javax-crypto-aeadbadtagexception/53639458#53639458", "title": "Android - javax.crypto.AEADBadTagException", "body": "<p>Turns out readBytes() uses a default buffer size, and only returns a byte buffer that is the length of that. So it was not actually returning me the whole file in bytes, just up to the length of the buffer.</p>\n\n<p>I have switched to using a CipherOutputStream, be sure to include flush() after writing your contents to the tag will be included!</p>\n"}], "owner": {"reputation": 111, "user_id": 6353410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86d33f5dc487b8be9b511406ebc4b0dd?s=128&d=identicon&r=PG&f=1", "display_name": "FalseNull", "link": "https://stackoverflow.com/users/6353410/falsenull"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5259, "favorite_count": 0, "accepted_answer_id": 53639458, "answer_count": 1, "score": 4, "last_activity_date": 1569915517, "creation_date": 1543960335, "last_edit_date": 1543981660, "question_id": 53621994, "link": "https://stackoverflow.com/questions/53621994/android-javax-crypto-aeadbadtagexception", "title": "Android - javax.crypto.AEADBadTagException", "body": "<p>I'm currently getting an AEADBadTagException when trying to decrypt a file I have encrypted. I have searched pretty much everywhere on stackoverflow and unable to find a solution, and hoping there is just a small mistake I have made or something to do with encoding etc., since GCM is unable to verify the tag that it is generating.</p>\n\n<p>I believe the problem is somewhere in the file I am trying to encrypt/decrypt. The same exact code works on an image, however, when I try to encrypt a PDF, it fails and gives me the above error.</p>\n\n<p>The code below is not using CipherOutputStream/CipherInputStream, but I have tried it with both with no luck.</p>\n\n<p>I understand that it the encryption/decryption methods should not be written like this, especially with the hardcoded IVs, but right now I am just trying to get it to work, then properly securing these methods later.</p>\n\n<p>I am using Android KeyStore to get my secret key. I know this part works since I have lots of other pieces in the app using the Keystore with the same methods. Plus, this methods works with an image.</p>\n\n<p>The error is happening on cipher.doFinal(encryptedBytes). When I use CipherInputStream, it happens on CipherInputStream(EncryptedFileStream, cipher)</p>\n\n<p>Here is the code as well as the error stack, any help is greatly appreciated:</p>\n\n<p>Encryption</p>\n\n<pre><code>        val fileBytes = inputStream.readBytes()\n        val cipher = Cipher.getInstance(\"AES/GCM/NoPadding\")\n        keyStoreService.checkKeyAndCreate(ALIAS_FILE_KEY)\n        val key = keyStoreService.getFileKey(ALIAS_FILE_KEY)\n        val iv = byteArrayOf(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0)\n        cipher.init(Cipher.ENCRYPT_MODE, key, GCMParameterSpec(128, iv))\n        val encryptedBytes = cipher.doFinal(fileBytes)\n        outputStream = FileOutputStream(file)\n        outputStream.write(encryptedBytes)\n        outputStream.flush()\n        inputStream.close()\n        outputStream.close()\n</code></pre>\n\n<p>Decryption</p>\n\n<pre><code>    val encryptedFile = File(filePath)\n    val encryptedBytes = encryptedFile.readBytes()\n    val cipher = Cipher.getInstance(\"AES/GCM/NoPadding\")\n    val key = keyStoreService.getFileKey(ALIAS_FILE_KEY)\n    val iv = byteArrayOf(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0)\n    cipher.init(Cipher.DECRYPT_MODE, key, GCMParameterSpec(128, iv))\n    val decryptedBytes = cipher.doFinal(encryptedBytes)\n\n    return ByteArrayInputStream(decryptedBytes)\n</code></pre>\n\n<p>Stacktrace</p>\n\n<pre><code>E/AndroidRuntime: FATAL EXCEPTION: main\nProcess: onboard.app.passageways, PID: 15441\njava.lang.RuntimeException: java.lang.reflect.InvocationTargetException\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:503)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:858)\n Caused by: java.lang.reflect.InvocationTargetException\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:858)\u00a0\n Caused by: javax.crypto.AEADBadTagException\n    at android.security.keystore.AndroidKeyStoreCipherSpiBase.engineDoFinal(AndroidKeyStoreCipherSpiBase.java:517)\n    at javax.crypto.Cipher.doFinal(Cipher.java:2055)\n    at passageways.android.onboard.services.EncryptionService.readEncryptedFile(EncryptionService.kt:79)\n    at passageways.android.onboard.fragments.MeetingBookDialogFragment.onViewCreated(Fragment.kt:38)\n    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1471)\n    at android.support.v4.app.FragmentManagerImpl.moveFragmentToExpectedState(FragmentManager.java:1784)\n    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1852)\n    at android.support.v4.app.BackStackRecord.executeOps(BackStackRecord.java:802)\n    at android.support.v4.app.FragmentManagerImpl.executeOps(FragmentManager.java:2625)\n    at android.support.v4.app.FragmentManagerImpl.executeOpsTogether(FragmentManager.java:2411)\n    at android.support.v4.app.FragmentManagerImpl.removeRedundantOperationsAndExecute(FragmentManager.java:2366)\n    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:2273)\n    at android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:733)\n    at android.os.Handler.handleCallback(Handler.java:873)\n    at android.os.Handler.dispatchMessage(Handler.java:99)\n    at android.os.Looper.loop(Looper.java:193)\n    at android.app.ActivityThread.main(ActivityThread.java:6669)\n    at java.lang.reflect.Method.invoke(Native Method)\u00a0\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\u00a0\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:858)\u00a0\n Caused by: android.security.KeyStoreException: Signature/MAC verification failed\n    at android.security.KeyStore.getKeyStoreException(KeyStore.java:839)\n    at android.security.keystore.KeyStoreCryptoOperationChunkedStreamer.doFinal(KeyStoreCryptoOperationChunkedStreamer.java:224)\n    at android.security.keystore.AndroidKeyStoreAuthenticatedAESCipherSpi$BufferAllOutputUntilDoFinalStreamer.doFinal(AndroidKeyStoreAuthenticatedAESCipherSpi.java:373)\n    at android.security.keystore.AndroidKeyStoreCipherSpiBase.engineDoFinal(AndroidKeyStoreCipherSpiBase.java:506)\n    at javax.crypto.Cipher.doFinal(Cipher.java:2055)\u00a0\n    at passageways.android.onboard.services.EncryptionService.readEncryptedFile(EncryptionService.kt:79)\u00a0\n    at passageways.android.onboard.fragments.MeetingBookDialogFragment.onViewCreated(Fragment.kt:38)\u00a0\n    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1471)\u00a0\n    at android.support.v4.app.FragmentManagerImpl.moveFragmentToExpectedState(FragmentManager.java:1784)\u00a0\n    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1852)\u00a0\n    at android.support.v4.app.BackStackRecord.executeOps(BackStackRecord.java:802)\u00a0\n    at android.support.v4.app.FragmentManagerImpl.executeOps(FragmentManager.java:2625)\u00a0\n    at android.support.v4.app.FragmentManagerImpl.executeOpsTogether(FragmentManager.java:2411)\u00a0\n    at android.support.v4.app.FragmentManagerImpl.removeRedundantOperationsAndExecute(FragmentManager.java:2366)\u00a0\n    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:2273)\u00a0\n    at android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:733)\u00a0\n    at android.os.Handler.handleCallback(Handler.java:873)\u00a0\n    at android.os.Handler.dispatchMessage(Handler.java:99)\u00a0\n    at android.os.Looper.loop(Looper.java:193)\u00a0\n    at android.app.ActivityThread.main(ActivityThread.java:6669)\n</code></pre>\n"}, {"tags": ["android", "android-layout", "android-fragments", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 1350, "user_id": 10445540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ca713c1a1ae615695267f4e23b8d5f5?s=128&d=identicon&r=PG&f=1", "display_name": "Artem Botnev", "link": "https://stackoverflow.com/users/10445540/artem-botnev"}, "is_accepted": true, "score": 1, "last_activity_date": 1544007210, "creation_date": 1544007210, "answer_id": 53630628, "question_id": 53621790, "link": "https://stackoverflow.com/questions/53621790/switching-fragments-using-onclicklistener/53630628#53630628", "title": "Switching fragments using onClickListener", "body": "<p>You can just call it from host activity of your fragment, like you did it in your \nMainActivity:</p>\n\n<pre><code>activity?.supportFragmentManager.beginTransaction()\n            .replace(R.id.relativelayout, fragment)\n            .commit()\n</code></pre>\n"}], "owner": {"reputation": 298, "user_id": 6774425, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/390ae89542c8c0ff64450e63e31868e0?s=128&d=identicon&r=PG&f=1", "display_name": "sourlemonaid", "link": "https://stackoverflow.com/users/6774425/sourlemonaid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 53630628, "answer_count": 1, "score": 0, "last_activity_date": 1544027515, "creation_date": 1543959368, "last_edit_date": 1544027515, "question_id": 53621790, "link": "https://stackoverflow.com/questions/53621790/switching-fragments-using-onclicklistener", "title": "Switching fragments using onClickListener", "body": "<p>I have a \"home page\" in my app that looks like the following</p>\n\n<pre><code>import android.os.Bundle\nimport android.support.v4.app.Fragment\nimport android.view.LayoutInflater\nimport android.view.View\nimport android.view.ViewGroup\nimport kotlinx.android.synthetic.main.activity_home.*\n\nclass HomeActivity: Fragment() {\n\n\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n        val view: View = inflater.inflate(R.layout.activity_home, container, false)\n\n        return  view\n    }\n\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n        super.onViewCreated(view, savedInstanceState)\n\n        ButtonAddition.setOnClickListener{\n\n        }\n    }\n\n\n\n}\n</code></pre>\n\n<p>I have a mainActivity that has the following code in it</p>\n\n<pre><code>import android.os.Bundle\nimport android.support.design.widget.NavigationView\nimport android.support.v4.app.Fragment\nimport android.support.v4.view.GravityCompat\nimport android.support.v7.app.ActionBarDrawerToggle\nimport android.support.v7.app.AppCompatActivity\nimport android.view.MenuItem\nimport kotlinx.android.synthetic.main.activity_main.*\nimport kotlinx.android.synthetic.main.app_bar_main.*\n\nclass MainActivity : AppCompatActivity(), NavigationView.OnNavigationItemSelectedListener {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        setSupportActionBar(toolbar)\n\n\n        val toggle = ActionBarDrawerToggle(\n            this, drawer_layout, toolbar, R.string.navigation_drawer_open, R.string.navigation_drawer_close\n        )\n        drawer_layout.addDrawerListener(toggle)\n        toggle.syncState()\n\n        nav_view.setNavigationItemSelectedListener(this)\n        displayScreen(-1)\n    }\n\n    override fun onBackPressed() {\n        if (drawer_layout.isDrawerOpen(GravityCompat.START)) {\n            drawer_layout.closeDrawer(GravityCompat.START)\n        } else {\n            super.onBackPressed()\n        }\n    }\n\n    private fun displayScreen(id: Int) {\n        val fragment: Fragment = when (id) {\n\n            R.id.home -&gt; {\n                HomeActivity()\n            }\n            R.id.record -&gt; {\n                HomeActivity()\n            }\n            R.id.pro -&gt; {\n                HomeActivity()\n            }\n            R.id.about -&gt; {\n                HomeActivity()\n            }\n            else -&gt; {\n                HomeActivity()\n            }\n        }\n\n        supportFragmentManager.beginTransaction()\n            .replace(R.id.relativelayout, fragment)\n            .commit()\n\n    }\n\n    override fun onNavigationItemSelected(item: MenuItem): Boolean {\n        displayScreen(item.itemId)\n        drawer_layout.closeDrawer(GravityCompat.START)\n        return true\n    }\n\n}\n</code></pre>\n\n<p>I also have a \"AdditionSplash\" fragment i am trying to switch to with the following code in it</p>\n\n<pre><code>import android.os.Bundle\nimport android.support.v4.app.Fragment\nimport android.view.LayoutInflater\nimport android.view.View\nimport android.view.ViewGroup\n\nclass AdditionSplash: Fragment() {\n\n\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n        val view: View = inflater.inflate(R.layout.activity_addition_splash, container, false)\n\n        return view\n    }\n}\n</code></pre>\n\n<p>on the homepage fragment I have an onclicklistener and I want to use that to switch to the <code>additionsplash</code> fragment from the homepage fragment. ( don't want to use that navigation drawer I have for that) I can get this to work if i change the additionsplash fragment into an activity and use intents, but i can't seem to switch to a fragment from a fragment.\nIs this impossible to do? I want to use that button to just swap to a different fragment.</p>\n\n<p>here is the solution i came up with thanks to a suggestion</p>\n\n<p>In the main activity I did:</p>\n\n<pre><code>fun chooseActivity(view: View){\n        val buttonClicked = view as Button\n        val fragment: Fragment = when (buttonClicked.id) {\n\n            R.id.ButtonAddition -&gt; {\n                AdditionSplash()\n            }\n\n            else -&gt; {\n                HomeActivity()\n            }\n        }\n        supportFragmentManager.beginTransaction()\n            .replace(R.id.relativelayout, fragment)\n            .commit()\n    }\n</code></pre>\n"}, {"tags": ["android", "kotlin", "kotlin-coroutines"], "comments": [{"owner": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 1, "creation_date": 1543965541, "post_id": 53621782, "comment_id": 94106107, "body": "Are you sure that really the <i>first</i> toast shows <code>20</code>? Maybe try to write to log instead to ensure the order."}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 2, "creation_date": 1543999537, "post_id": 53621782, "comment_id": 94116269, "body": "Are you still using experimental coroutines API? It&#39;s time to upgrade to Kotlin 1.3. Also, don&#39;t use <code>async-await</code>, it&#39;s an anti-pattern. Use <code>withContext(Dispatchers.IO)</code> instead."}, {"owner": {"reputation": 143, "user_id": 2350733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ef1d0cd609b79a9eee4c84924a29650?s=128&d=identicon&r=PG", "display_name": "JustMeh", "link": "https://stackoverflow.com/users/2350733/justmeh"}, "reply_to_user": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 0, "creation_date": 1544081318, "post_id": 53621782, "comment_id": 94151343, "body": "@MichaelButscher Yes, the first one definitely shows 20. I tried logs, but for some reason they don&#39;t show."}, {"owner": {"reputation": 143, "user_id": 2350733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ef1d0cd609b79a9eee4c84924a29650?s=128&d=identicon&r=PG", "display_name": "JustMeh", "link": "https://stackoverflow.com/users/2350733/justmeh"}, "reply_to_user": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1544081329, "post_id": 53621782, "comment_id": 94151347, "body": "@MarkoTopolnik Hmmm, will try that. Any useful links about that? Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 2350733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ef1d0cd609b79a9eee4c84924a29650?s=128&d=identicon&r=PG", "display_name": "JustMeh", "link": "https://stackoverflow.com/users/2350733/justmeh"}, "edited": false, "score": 0, "creation_date": 1544081740, "post_id": 53628465, "comment_id": 94151500, "body": "The code looks great! Will try it out when I get home and let you know. And thanks for the step by step explanation, much appreciated. But I thought that the coroutines allow to run a long-running task on a separate(like background) thread and then pauses UI while it&#39;s running, so it would work in a kind of sequential order? So launch block first and then longToast?"}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "reply_to_user": {"reputation": 143, "user_id": 2350733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ef1d0cd609b79a9eee4c84924a29650?s=128&d=identicon&r=PG", "display_name": "JustMeh", "link": "https://stackoverflow.com/users/2350733/justmeh"}, "edited": false, "score": 2, "creation_date": 1544085920, "post_id": 53628465, "comment_id": 94153421, "body": "Pausing the UI thread is precisely the thing that coroutines let you <i>avoid</i> in an elegant and non-disruptive manner. <code>launch</code>, in particular, is like <code>Thread.start()</code> and the code inside it runs concurrently to the code that called it. BTW &quot;concurrently&quot; does <i>not</i> imply &quot;on another thread&quot;. Many coroutines may run concurrently on the single UI thread, through cooperative multithreading."}, {"owner": {"reputation": 143, "user_id": 2350733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ef1d0cd609b79a9eee4c84924a29650?s=128&d=identicon&r=PG", "display_name": "JustMeh", "link": "https://stackoverflow.com/users/2350733/justmeh"}, "edited": false, "score": 0, "creation_date": 1544129697, "post_id": 53628465, "comment_id": 94177332, "body": "I tried your code and it works! I see that I can get data properly and that class variables are definitely accessible from the launch block. Though I see that I definitely need to update the UI from the launch block after the operation is done(after withContext block). So it seems logical because we cannot really know when the data will be retrieved. Thanks for the help! Will mark as accepted answer."}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "reply_to_user": {"reputation": 143, "user_id": 2350733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ef1d0cd609b79a9eee4c84924a29650?s=128&d=identicon&r=PG", "display_name": "JustMeh", "link": "https://stackoverflow.com/users/2350733/justmeh"}, "edited": false, "score": 0, "creation_date": 1544161103, "post_id": 53628465, "comment_id": 94185434, "body": "That&#39;s what withContext is for, transferring the blocking call to another thread so it doesn&#39;t freeze the GUI. While your coroutine is inside withContext (IO), other code runs on the GUI thread. That&#39;s cooperative multithreading."}], "tags": [], "owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "is_accepted": true, "score": 3, "last_activity_date": 1544014457, "last_edit_date": 1544014457, "creation_date": 1544000193, "answer_id": 53628465, "question_id": 53621782, "link": "https://stackoverflow.com/questions/53621782/accessing-class-variables-from-a-kotlin-coroutine/53628465#53628465", "title": "Accessing class variables from a Kotlin coroutine", "body": "<p>The code you have is written against the experimental coroutines API, so let me first upgrade it to Kotlin 1.3 and fix some obvious mistakes:</p>\n\n<pre><code>class MainActivity : Activity(), CoroutineScope {\n    override val coroutineContext = Dispatchers.Main + SupervisorJob()\n\n    private val moviesList: MutableList&lt;Movie&gt; = mutableListOf()\n\n    fun getMovies() {\n        launch {\n            val result = withContext(Dispatchers.IO) { getResponseJSON() }\n            moviesList += Gson().fromJson(result, MovieDBResponse::class.java).results\n            longToast(\"Size after fetching: ${moviesList.size}\")\n        }\n        longToast(\"Immediate size: ${moviesList.size}\")\n    }\n\n    override fun onDestroy() {\n        super.onDestroy()\n        coroutineContext[Job]!!.cancel()\n    }\n}\n</code></pre>\n\n<p>Now, looking at your code, this is what I expect it to do:</p>\n\n<ol>\n<li><code>launch</code> a concurrent coroutine that will eventually fetch some JSON data from the network</li>\n<li>Request to display the \"Immediate size\" toast</li>\n<li>JSON results arrive</li>\n<li>Populate the movie list</li>\n<li>Request to display the \"Size after fetching\" toast</li>\n</ol>\n\n<p>The exact details of when you see a toast on the screen can vary and depends on Android's policies and the speed of your fetch.</p>\n"}], "owner": {"reputation": 143, "user_id": 2350733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ef1d0cd609b79a9eee4c84924a29650?s=128&d=identicon&r=PG", "display_name": "JustMeh", "link": "https://stackoverflow.com/users/2350733/justmeh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1209, "favorite_count": 2, "accepted_answer_id": 53628465, "answer_count": 1, "score": 2, "last_activity_date": 1552906860, "creation_date": 1543959324, "last_edit_date": 1552906860, "question_id": 53621782, "link": "https://stackoverflow.com/questions/53621782/accessing-class-variables-from-a-kotlin-coroutine", "title": "Accessing class variables from a Kotlin coroutine", "body": "<p>I've encountered an odd issue here(new to Kotlin and coroutines). I am modifying a class variable in the function getMovies. In the launch block I get a JSON which I then run through GSON and get a mutable list of movie info entries. You can see 2 longToasts from Anko which displays a Toast, but the first one displays 20 and the other one 0. Why is that? Android Studio doesn't throw any errors and I am referencing the same moviesList variable. I tried numerous blogs and instructions on the Internet, but couldn't find anything useful. Any help would be super appreciated!</p>\n\n<pre><code>class MainActivity : Activity() {\n\nprivate var moviesList: MutableList&lt;Movie&gt; = mutableListOf()\n\nfun getMovies() {\n        launch(UI){\n            val result = async(CommonPool){\n                getResponseJSON()\n            }.await()\n            moviesList = Gson().fromJson(result, MovieDBResponse::class.java).results\n            longToast(moviesList.size.toString())\n        }\n        longToast(moviesList.size.toString())\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "rx-java2", "android-wifi", "wifimanager"], "comments": [{"owner": {"reputation": 981, "user_id": 949224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a741eae7f225e582c257b948b0ffafb3?s=128&d=identicon&r=PG", "display_name": "dr_g", "link": "https://stackoverflow.com/users/949224/dr-g"}, "edited": false, "score": 1, "creation_date": 1544204840, "post_id": 53620234, "comment_id": 94206566, "body": "Which device are you testing with? And what Android version? Later versions will require a run time permissions dialog for the user to grant some of those."}, {"owner": {"reputation": 2771, "user_id": 5963279, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/10207102799463401/picture?type=large", "display_name": "Thomas Cook", "link": "https://stackoverflow.com/users/5963279/thomas-cook"}, "reply_to_user": {"reputation": 981, "user_id": 949224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a741eae7f225e582c257b948b0ffafb3?s=128&d=identicon&r=PG", "display_name": "dr_g", "link": "https://stackoverflow.com/users/949224/dr-g"}, "edited": false, "score": 0, "creation_date": 1544216980, "post_id": 53620234, "comment_id": 94211598, "body": "I&#39;ve tested on a OnePlus 5 running 8.1.0. I have asked for runtime permission from user for COARSE_LOCATION and have granted it on my test device."}, {"owner": {"reputation": 2771, "user_id": 5963279, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/10207102799463401/picture?type=large", "display_name": "Thomas Cook", "link": "https://stackoverflow.com/users/5963279/thomas-cook"}, "reply_to_user": {"reputation": 981, "user_id": 949224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a741eae7f225e582c257b948b0ffafb3?s=128&d=identicon&r=PG", "display_name": "dr_g", "link": "https://stackoverflow.com/users/949224/dr-g"}, "edited": false, "score": 0, "creation_date": 1544217072, "post_id": 53620234, "comment_id": 94211633, "body": "Have also tested on a rooted Samsung S7 also running Android 8.1.0"}, {"owner": {"reputation": 771, "user_id": 5053013, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/31TXx.jpg?s=128&g=1", "display_name": "Kevin Marlow", "link": "https://stackoverflow.com/users/5053013/kevin-marlow"}, "edited": false, "score": 0, "creation_date": 1544519588, "post_id": 53620234, "comment_id": 94294989, "body": "You might want to check this answer. <a href=\"https://stackoverflow.com/a/40497793/5053013\">stackoverflow.com/a/40497793/5053013</a>"}, {"owner": {"reputation": 771, "user_id": 5053013, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/31TXx.jpg?s=128&g=1", "display_name": "Kevin Marlow", "link": "https://stackoverflow.com/users/5053013/kevin-marlow"}, "edited": false, "score": 1, "creation_date": 1544519626, "post_id": 53620234, "comment_id": 94295012, "body": "Also, we found that Android&#39;s saved configurations do not always store the BSSID. You might consider changing this code into just an SSID check:  <code>configuredNetwork.SSID.unescape() == ssid &amp;&amp; configuredNetwork.BSSID == bssid</code>  to  <code>configuredNetwork.SSID.unescape() == ssid</code>    ---- <b>Side Note #2</b> I noticed that you do not listen for <code>SupplicantState.ASSOCIATING</code>. True connection/disconnection exists only when you are no longer associating."}, {"owner": {"reputation": 2771, "user_id": 5963279, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/10207102799463401/picture?type=large", "display_name": "Thomas Cook", "link": "https://stackoverflow.com/users/5963279/thomas-cook"}, "edited": false, "score": 0, "creation_date": 1544520091, "post_id": 53620234, "comment_id": 94295270, "body": "I&#39;ll give it a try, I had noticed that when I retrieved my added <code>WifiConfig</code> object from the <code>WifiManager.configuredNetworks</code> after calling <code>addNetwork</code> the <code>BSSID</code> was <code>00:00:00:00:00:00:00</code> which I think indicates it was not saved."}, {"owner": {"reputation": 2771, "user_id": 5963279, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/10207102799463401/picture?type=large", "display_name": "Thomas Cook", "link": "https://stackoverflow.com/users/5963279/thomas-cook"}, "edited": false, "score": 0, "creation_date": 1544520920, "post_id": 53620234, "comment_id": 94295798, "body": "Weirdly though, if I call macAddress I get the valid mac address back, I was under the  impression that BSSID and Mac Address are interchangeable terms?"}], "answers": [{"comments": [{"owner": {"reputation": 1506, "user_id": 914220, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/da6fb0756a160316e92a447851e17e81?s=128&d=identicon&r=PG&f=1", "display_name": "Iulia Barbu", "link": "https://stackoverflow.com/users/914220/iulia-barbu"}, "edited": false, "score": 0, "creation_date": 1592466066, "post_id": 53749271, "comment_id": 110436411, "body": "So you know when the network is truly connected (BroadcastReceiver is triggered) , but how can I decide it didn&#39;t succeed to connect?"}, {"owner": {"reputation": 2771, "user_id": 5963279, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/10207102799463401/picture?type=large", "display_name": "Thomas Cook", "link": "https://stackoverflow.com/users/5963279/thomas-cook"}, "reply_to_user": {"reputation": 1506, "user_id": 914220, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/da6fb0756a160316e92a447851e17e81?s=128&d=identicon&r=PG&f=1", "display_name": "Iulia Barbu", "link": "https://stackoverflow.com/users/914220/iulia-barbu"}, "edited": false, "score": 0, "creation_date": 1592466809, "post_id": 53749271, "comment_id": 110436794, "body": "In the broadcast receiver, you can add else cases to the if statement to handle the different states. You probably want to check <code>NetworkInfo.DetailedState.FAILED</code>. However, the NetworkInfo class is deprecated, so proceed with caution."}], "tags": [], "owner": {"reputation": 2771, "user_id": 5963279, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/10207102799463401/picture?type=large", "display_name": "Thomas Cook", "link": "https://stackoverflow.com/users/5963279/thomas-cook"}, "is_accepted": true, "score": 9, "last_activity_date": 1544640691, "last_edit_date": 1544640691, "creation_date": 1544639527, "answer_id": 53749271, "question_id": 53620234, "link": "https://stackoverflow.com/questions/53620234/android-wifimanager-enablenetwork-returning-false/53749271#53749271", "title": "Android WiFiManager enableNetwork returning false", "body": "<p>Ok, I've finally figured this out and I hope that my answer here sheds some light for anyone in the future who encounters a similar problem, because this was nasty and caused me quite the headache.</p>\n\n<p>The root cause of the issue was that I had incorrectly configure the <code>WiFiConfig</code> object which was registered in the <code>WiFiConfig</code> table via <code>WiFiConfigManager.addNetwork()</code>.</p>\n\n<p>I had made a massive assumption about the contract of <code>WifiConfigManager.addNetwork()</code>. I had assumed that if that operation succeeded (i.e. did NOT return <code>-1</code>) then the passed <code>WiFiConfig</code> was configured correctly. This assumption is incorrect, the <code>allowedAuthAlgorithms</code>, <code>allowedProtocols</code>, <code>allowedKeyManagers</code> and <code>allowedPairwiseCipher</code> <code>BitSet</code> on the <code>WiFiConfig</code> I was creating were incorrect, yet the call to <code>addNetwork()</code> succeeded. I believe this is because the call to <code>addNetwork()</code> does not actually do anything other than validate that the config <em>is valid to put in the <code>WiFiConfig</code> table</em>, which is quite different than validating if it <em>is the correct config for a given WiFi access point</em>. This is backed up by the comments in the source code for <code>addNetwork()</code> which do NOT state the delivery of asynchronous state like a lot of the other <code>WiFiManager</code> functions, indicating (to me at least) that no attempt to communicate with the access point was made by the OS as a result of calling <code>addNetwork()</code>.</p>\n\n<p>Due to a very helpful suggestion by a colleague to connect to the access point in question via the OS, and then to compare the OS created <code>WiFiConfig</code> object for that access point with the one generated by my own code for discrepancies I noticed that my <code>WiFiConfig</code> was being configured incorrectly. It was shortly after this that I resolved the original question.</p>\n\n<p>Now, why was my <code>WiFiConfig</code> object being created incorrectly? That is because I had little knowledge of how to configure WiFi (i.e. the various terminology and the meaning behind all the protocols, algorithms and key managers). So, after reading the official docs and not gleaning much helpful information I turned to StackOverflow questions and answers and found a recurring pattern for setting the <code>WiFiConfig</code> up correctly, they all appeared to use <code>BitWise</code> operators to create an <code>Int</code> value which was ultimately passed to the <code>WiFiConfig.allowedProtocols.set()</code>, <code>WiFiConfig.allowedPairwiseCiphers.set()</code>, <code>WiFiConfig.allowedKeyManagement.set()</code> and <code>WiFiConfig.allowedAuthAlgorithm.set()</code> functions. </p>\n\n<p>It turns out that the underlying <code>BitSet</code> for each of those configuration options is a data structure which maintains a dynamically resizing vector of bits, where the index of a bit in a given <code>BitSet</code> instance in the WiFiConfig object <em>implicitly</em> corresponded to the index of an element in an <em>implicitly</em> associated <code>String</code> array within the WiFiConfig object. Therefore, if you wished to provide multiple <code>protocols</code>, <code>keyManagements</code>, <code>pairwiseCiphers</code> or <code>authAlgorithms</code> you would need to call <code>set</code> on the underlying corresponding <code>BitSet</code>, passing in the correct index which would correspond to the element of the <em>implicitly</em> associated String array which matched the chosen protocol.</p>\n\n<p>After re-writing my <code>WiFiConfig</code> creation code, the issue resolved itself. Although there was a bug in my code in the original post which has also been fixed.</p>\n\n<p>Here is the new WiFiConfig creation code:</p>\n\n<pre><code>/**\n * Emits a single of the [WifiConfiguration] created from the passed [scanResult] and [preSharedKey]\n */\nprivate fun createWifiConfiguration(scanResult: WiFiScanResult, preSharedKey: String) = Single.fromCallable&lt;WifiConfiguration&gt; {\n    val auth = scanResult.auth\n    val keyManagement = scanResult.keyManagement\n    val pairwiseCipher = scanResult.pairwiseCipher\n\n    val config = WifiConfiguration()\n    config.SSID = \"\\\"\" +  scanResult.ssid + \"\\\"\"\n    config.BSSID = scanResult.bssid\n\n    if (auth.contains(\"WPA\") || auth.contains(\"WPA2\")) {\n        config.allowedProtocols.set(WifiConfiguration.Protocol.WPA)\n        config.allowedProtocols.set(WifiConfiguration.Protocol.RSN)\n    }\n\n    if (auth.contains(\"EAP\"))\n        config.allowedAuthAlgorithms.set(WifiConfiguration.AuthAlgorithm.LEAP)\n    else if (auth.contains(\"WPA\") || auth.contains(\"WPA2\"))\n        config.allowedAuthAlgorithms.set(WifiConfiguration.AuthAlgorithm.OPEN)\n    else if (auth.contains(\"WEP\"))\n        config.allowedAuthAlgorithms.set(WifiConfiguration.AuthAlgorithm.SHARED)\n\n    if (keyManagement.contains(\"IEEE802.1X\"))\n        config.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.IEEE8021X)\n    else if (auth.contains(\"WPA\") &amp;&amp; keyManagement.contains(\"EAP\"))\n        config.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.WPA_EAP)\n    else if (auth.contains(\"WPA\") &amp;&amp; keyManagement.contains(\"PSK\"))\n        config.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.WPA_PSK)\n    else if (auth.contains(\"WPA2\") &amp;&amp; keyManagement.contains(\"PSK\"))\n        config.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.WPA_PSK)\n\n    if (pairwiseCipher.contains(\"CCMP\") || pairwiseCipher.contains(\"TKIP\")) {\n        config.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.CCMP)\n        config.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.TKIP)\n    }\n\n    if (preSharedKey.isNotEmpty()) {\n        if (auth.contains(\"WEP\")) {\n            if (preSharedKey.matches(\"\\\\p{XDigit}+\".toRegex())) {\n                config.wepKeys[0] = preSharedKey\n            } else {\n                config.wepKeys[0] = \"\\\"\" + preSharedKey + \"\\\"\"\n            }\n            config.wepTxKeyIndex = 0\n        } else {\n            config.preSharedKey = \"\\\"\" + preSharedKey + \"\\\"\"\n        }\n    }\n\n    config\n}\n</code></pre>\n\n<p>And here is the new connect code:</p>\n\n<pre><code>/**\n * Connects to the wifi access point at specified [ssid] with specified [networkId]\n * And returns the [WifiInfo] of the network that has been connected to\n */\nprivate fun connect(context: Context,\n                    wifiManager: WifiManager,\n                    ssid: String,\n                    networkId: Int) = Single.create&lt;WifiInfo&gt; { emitter -&gt;\n\n    val wifiConnectionReceiver = object : BroadcastReceiver() {\n        override fun onReceive(context: Context, intent: Intent) {\n            if (intent.action == WifiManager.NETWORK_STATE_CHANGED_ACTION) {\n                val networkInfo = intent.getParcelableExtra&lt;NetworkInfo&gt;(WifiManager.EXTRA_NETWORK_INFO) ?: return\n\n                if (networkInfo.detailedState == NetworkInfo.DetailedState.CONNECTED) {\n                    val wifiInfo = intent.getParcelableExtra&lt;WifiInfo&gt;(WifiManager.EXTRA_WIFI_INFO) ?: return\n                    if (ssid.unescape() == wifiInfo.ssid.unescape()) {\n                        context.applicationContext.unregisterReceiver(this)\n                        emitter.onSuccess(wifiInfo)\n                    }\n                }\n            }\n        }\n    }\n\n    val networkStateChangedFilter = IntentFilter(WifiManager.NETWORK_STATE_CHANGED_ACTION)\n    networkStateChangedFilter.addAction(WifiManager.SUPPLICANT_STATE_CHANGED_ACTION)\n\n    context.applicationContext.registerReceiver(wifiConnectionReceiver, networkStateChangedFilter)\n\n    emitter.setCancellable {\n        if (!emitter.isDisposed)\n            context.applicationContext.unregisterReceiver(wifiConnectionReceiver)\n    }\n\n    wifiManager.enableNetwork(networkId, true)\n}\n</code></pre>\n"}], "owner": {"reputation": 2771, "user_id": 5963279, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/10207102799463401/picture?type=large", "display_name": "Thomas Cook", "link": "https://stackoverflow.com/users/5963279/thomas-cook"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2175, "favorite_count": 2, "accepted_answer_id": 53749271, "answer_count": 1, "score": 8, "last_activity_date": 1544640691, "creation_date": 1543952168, "last_edit_date": 1544182460, "question_id": 53620234, "link": "https://stackoverflow.com/questions/53620234/android-wifimanager-enablenetwork-returning-false", "title": "Android WiFiManager enableNetwork returning false", "body": "<p><strong>TO BE CLEAR:</strong></p>\n\n<p>The most likely part of the code which has the problem is the connect function, which you can find in the code block.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>I've had a good dig through LogCat and found something interesting (this occurred the exact moment enableNetwork was called):</p>\n\n<pre><code>2018-12-04 20:13:14.508 1315-7000/? I/WifiService: enableNetwork uid=10158 disableOthers=true\n2018-12-04 20:13:14.508 1315-1607/? D/WifiStateMachine: connectToUserSelectNetwork netId 49, uid 10158, forceReconnect = false\n2018-12-04 20:13:14.541 1315-1607/? D/WifiConfigStore: Writing to stores completed in 14 ms.\n2018-12-04 20:13:14.541 1315-1607/? E/WifiConfigManager: UID 10158 does not have permission to update configuration \"SKYD7F55\"WPA_PSK\n2018-12-04 20:13:14.541 1315-1607/? I/WifiStateMachine: connectToUserSelectNetwork Allowing uid 10158 with insufficient permissions to connect=49\n</code></pre>\n\n<p><strong>PERMISSIONS:</strong></p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\"/&gt;\n&lt;uses-permission android:name=\"android.permission.CHANGE_NETWORK_STATE\" /&gt;\n&lt;uses-permission android:name=\"android.permission.ACCESS_WIFI_STATE\" /&gt;\n&lt;uses-permission android:name=\"android.permission.CHANGE_WIFI_STATE\" /&gt;\n&lt;uses-permission android:name=\"android.permission.CHANGE_WIFI_MULTICAST_STATE\" /&gt;\n&lt;uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\" /&gt;\n</code></pre>\n\n<p>I've been tasked to create a part of an app where the user will be able to see a list of scanned WiFi access points (<code>ScanResult</code>), be able to select one, and, if it requires auth, be presented with a screen where they enter the <code>PSK</code>. After entering the <code>PSK</code>, the system will attempt to connect to the access point by first creating and configuring a <code>WifiConfig</code> object, using <code>addNetwork</code> to add the config to the Wifi config table, then <code>disconnect</code>, <code>enableNetwork</code> and <code>reconnect</code> (in that order).</p>\n\n<p>I'm using <code>RX-Java2</code> so that I can chain the various steps of the network setup. For instance, the <code>disconnect</code> method returns a <code>Completable</code>  which emits a completed event if <code>WifiManager.disconnect()</code> succeeds. It does so by registering a <code>BroadcastReceiver</code> to listen for <code>NETWORK_STATE_CHANGED_ACTION</code> and then emitting a completion event if the networkInfo extra has detailed state <code>DISCONNECTED</code>. The same logic applies for the <code>connect()</code> function.</p>\n\n<p>Now, <code>addNetwork()</code> is succeeding (so my WiFi config functions are correct), and then I am chaining disconnect <code>Completable</code> to the connect <code>Single</code> using <code>andThen</code>. I have put breakpoints in my code and can see that everything is running in the correct order, disconnect is succeeding and then has it's broadcast receiver registered successfully, but <code>enableNetwork()</code> call is returning false (indicating that the <code>enableNetwork</code> command failed to be issued by the OS).</p>\n\n<p>I am 99% sure this is not an issue with how I'm using RX, but, given that <code>addNetwork</code> and <code>disconnect</code> are succeeding (indicating my wifi config creation code is fine) I am starting to wonder if either A) My RX code is wrong, or, B) My WiFi config creation is wrong.</p>\n\n<p>Therefore,  I am going to post all the code below as well as the use case and would greatly appreciate any advice.</p>\n\n<p><strong>Emitters.kt:</strong></p>\n\n<pre><code>import android.content.BroadcastReceiver\nimport android.content.Context\nimport android.content.Intent\nimport android.content.IntentFilter\nimport android.net.NetworkInfo\nimport android.net.wifi.SupplicantState\nimport android.net.wifi.WifiConfiguration\nimport android.net.wifi.WifiInfo\nimport android.net.wifi.WifiManager\nimport com.google.common.base.Optional\nimport io.reactivex.*\nimport io.reactivex.disposables.CompositeDisposable\nimport io.reactivex.schedulers.Schedulers\nimport java.lang.Exception\n\nprivate const val TAG = \"Emitters\"\nprivate const val SIGNAL_STRENGTH_RANGE = 4\n\n/**\n * Use case of these emitters (in presenter or interactor):\n *\n * // If network is open, then go ahead and connect to it, else show enter password form\n * isNetworkOpen(context, scanResult).flatMapCompletable { isNetworkOpen -&gt;\n *     if (isNetworkOpen) {\n *         connectToOpenWifi(context, scanResult.ssid, scanResult.bssid)\n *     } else {\n *         Completable.error(WifiException(\"The specified network requires a password\")\n *     }\n * }.subscribeOn(Schedulers.io())\n *  .observeOn(AndroidSchedulers.mainThread())\n *  .subscribe({\n *      view?.showSuccessfullyConnected()\n *  }, { error -&gt;\n *         when (error) {\n *             is WifiAuthException -&gt; {\n *                  val auth = error.wifiScanResult.auth\n *                  val keyManagement = error.wifiScanResult.keyManagement\n *                  val security = \"$auth/$keyManagement\"\n *                  viewStateStack.add(NetworkSummaryViewState(error.wifiScanResult, security))\n *                  switchToViewState(viewStateStack.peek())\n *              } else -&gt; {\n *                  viewStateStack.add(FailedToConnectViewState(networkName))\n *                  switchToViewState(viewStateStack.peek())\n *              }\n *          }\n *      }\n *  })\n *\n *  // Called by view to connect to closed network with provided password\n *  connectToClosedWifi(context, scanResult, password)\n *  .subscribeOn(Schedulers.io())\n *  .observeOn(AndroidSchedulers.mainThread())\n *  .subscribe({\n *      view?.showSuccessfullyConnected()\n *  }, { error -&gt;\n *      view?.showFailedToConnect()\n *  })\n */\n\n/**\n * Creates a Flowable that emits WiFiScanResults\n */\nfun wifiScanResults(context: Context): Flowable&lt;Set&lt;WiFiScanResult&gt;&gt; = Flowable.create&lt;Set&lt;WiFiScanResult&gt;&gt; ({ emitter -&gt;\n    val wifiManagerWrapper = WifiManagerWrapper(context.applicationContext)\n\n    if (!wifiManagerWrapper.wifiManager.isWifiEnabled &amp;&amp; !wifiManagerWrapper.wifiManager.setWifiEnabled(true)) {\n        wifiManagerWrapper.dispose()\n        emitter.onError(WiFiException(\"WiFi not enabled and couldn't enable it\"))\n        return@create\n    }\n\n    // Broadcast receiver that handles wifi scan results\n    val wifiScanReceiver = object : BroadcastReceiver() {\n        override fun onReceive(context: Context, intent: Intent) {\n            if (intent.action == WifiManager.SCAN_RESULTS_AVAILABLE_ACTION) {\n                val scanResults = wifiManagerWrapper.wifiManager.scanResults\n\n                if (scanResults !== null) {\n                    emitter.onNext(scanResults.map { scanResult -&gt;\n                        val signalStrength = WifiManager.calculateSignalLevel(scanResult.level, SIGNAL_STRENGTH_RANGE)\n\n                        val capabilities = scanResult.capabilities.substring(1, scanResult.capabilities.indexOf(']') -1)\n                            .split('-')\n                            .toSet()\n\n                        WiFiScanResult(scanResult.SSID,\n                            scanResult.BSSID,\n                            capabilities.elementAtOrNull(0) ?: \"\",\n                            capabilities.elementAtOrNull(1) ?: \"\",\n                            capabilities.elementAtOrNull(2) ?: \"\",\n                            signalStrength)\n\n                    }.toSet())\n                }\n            }\n\n            if (!wifiManagerWrapper.wifiManager.startScan()) {\n                emitter.onError(WiFiException(\"WiFi not enabled\"))\n            }\n        }\n    }\n\n    val wifiScanResultsIntentFilter = IntentFilter(WifiManager.SCAN_RESULTS_AVAILABLE_ACTION)\n    context.applicationContext.registerReceiver(wifiScanReceiver, wifiScanResultsIntentFilter)\n\n    emitter.setCancellable {\n        context.unregisterReceiver(wifiScanReceiver)\n        wifiManagerWrapper.dispose()\n    }\n\n    if (!wifiManagerWrapper.wifiManager.startScan()) {\n        emitter.onError(WiFiException(\"WiFi not enabled\"))\n    }\n}, BackpressureStrategy.LATEST).subscribeOn(Schedulers.io())\n\n/**\n * Returns a single indicating if the [scanResult] is open\n */\nfun isNetworkOpen(context: Context,\n                  scanResult: WiFiScanResult): Single&lt;Boolean&gt; = Single.create&lt;Boolean&gt; { emitter -&gt;\n    val wifiManagerWrapper = WifiManagerWrapper(context.applicationContext)\n\n    emitter.setCancellable {\n        wifiManagerWrapper.dispose()\n    }\n\n    if (scanResult.auth.contains(\"WEP\")) {\n        emitter.onSuccess(true)\n    } else {\n        emitter.onSuccess(false)\n    }\n}\n\n/**\n * Attempts to connect to an open wifi access point specified by [scanResult]\n * Emits a completed event if successful, else emits an error\n */\nfun connectToOpenWifi(context: Context,\n                      scanResult: WiFiScanResult): Completable = Completable.create { emitter -&gt;\n    val ssid = scanResult.ssid\n    val bssid = scanResult.bssid\n\n    val wifiManagerWrappper = WifiManagerWrapper(context.applicationContext)\n\n    if (!wifiManagerWrappper.wifiManager.isWifiEnabled &amp;&amp; !wifiManagerWrappper.wifiManager.setWifiEnabled(true)) {\n        wifiManagerWrappper.dispose()\n        emitter.onError(WiFiException(\"Wifi not enabled\"))\n    }\n\n    val updateWifiStateObs = getExistingConfiguration(wifiManagerWrappper.wifiManager, ssid, bssid).flatMap { existingConfig -&gt;\n        if (!existingConfig.isPresent) {\n            createOpenWifiConfiguration(scanResult).flatMap { wifiConfig -&gt;\n                val newNetworkId = wifiManagerWrappper.wifiManager.addNetwork(wifiConfig)\n                if (newNetworkId &lt; 0)\n                    throw WiFiException(\"Failed to add new access point ${scanResult.ssid}\")\n\n                val currentWifiConnection = wifiManagerWrappper.wifiManager.connectionInfo\n\n                if (currentWifiConnection !== null) {\n                    disconnect(context, wifiManagerWrappper.wifiManager).andThen(\n                        connect(context, wifiManagerWrappper.wifiManager, wifiConfig.SSID, newNetworkId)\n                    )\n                } else {\n                    connect(context, wifiManagerWrappper.wifiManager, wifiConfig.SSID, newNetworkId)\n                }\n            }\n        } else {\n            Single.just(existingConfig.get())\n        }\n    }\n\n    val compositeDisposable = CompositeDisposable()\n\n    emitter.setCancellable {\n        compositeDisposable.clear()\n        wifiManagerWrappper.dispose()\n    }\n\n    try {\n        compositeDisposable.add(updateWifiStateObs.subscribe({\n            emitter.onComplete()\n        }, { error -&gt;\n            emitter.onError(error)\n        }))\n    } catch (ex: Exception) {\n        compositeDisposable.clear()\n        wifiManagerWrappper.dispose()\n        emitter.onError(ex)\n    }\n}\n\n/**\n * Attempts to connect to an closed [scanResult] by providing the given [preSharedKey]\n * Emits a completed event if successful, else emits an error\n */\nfun connectToClosedWifi(context: Context,\n                        scanResult: WiFiScanResult,\n                        preSharedKey: String): Completable = Completable.create { emitter -&gt;\n    val ssid = scanResult.ssid\n    val bssid = scanResult.bssid\n\n    val wifiManagerWrappper = WifiManagerWrapper(context.applicationContext)\n\n    if (!wifiManagerWrappper.wifiManager.isWifiEnabled &amp;&amp; !wifiManagerWrappper.wifiManager.setWifiEnabled(true)) {\n        wifiManagerWrappper.dispose()\n        emitter.onError(WiFiException(\"Wifi not enabled\"))\n    }\n\n    val updateWifiStateObs =\n        getExistingConfiguration(wifiManagerWrappper.wifiManager, ssid, bssid).flatMap { existingConfig -&gt;\n            if (!existingConfig.isPresent) {\n                createClosedWifiConfiguaration(scanResult, preSharedKey).flatMap { wifiConfig -&gt;\n                    val newNetworkId = wifiManagerWrappper.wifiManager.addNetwork(wifiConfig)\n                    if (newNetworkId &lt; 0)\n                        throw WiFiException(\"Failed to add new access point ${scanResult.ssid}\")\n\n                    val currentWifiConnection = wifiManagerWrappper.wifiManager.connectionInfo\n\n                    if (currentWifiConnection !== null) {\n                        disconnect(context, wifiManagerWrappper.wifiManager).andThen(\n                            connect(context, wifiManagerWrappper.wifiManager, wifiConfig.SSID, newNetworkId)\n                        )\n                    } else {\n                        connect(context, wifiManagerWrappper.wifiManager, wifiConfig.SSID, newNetworkId)\n                    }\n                }\n            } else {\n                Single.just(existingConfig.get())\n            }\n        }\n\n    val compositeDisposable = CompositeDisposable()\n\n    emitter.setCancellable {\n        compositeDisposable.clear()\n        wifiManagerWrappper.dispose()\n    }\n\n    try {\n        compositeDisposable.add(updateWifiStateObs.subscribe({\n            emitter.onComplete()\n        }, { error -&gt;\n            emitter.onError(error)\n        }))\n    } catch (ex: Exception) {\n        compositeDisposable.clear()\n        wifiManagerWrappper.dispose()\n        emitter.onError(ex)\n    }\n}\n\n/**\n * Wrapper class for WiFiManager that creates a multicast lock to make the app handle multicast wifi packets\n * Handles disposing of the lock and cleaning up of resources via the dispose method\n */\nprivate class WifiManagerWrapper(context: Context) {\n    val wifiManager = context.applicationContext.getSystemService(Context.WIFI_SERVICE)\n            as? WifiManager ?: throw IllegalStateException(\"Could not get system Context.WIFI_SERVICE\")\n\n    // Create and acquire a multicast lock to start receiving multicast wifi packets\n    private var lock = wifiManager.createMulticastLock(TAG + \"_lock\").apply {\n        acquire()\n    }\n\n    // Dispose of the lock\n    fun dispose() {\n        if (lock.isHeld) {\n            try {\n                lock.release()\n            } catch (ignore: Exception) {\n                EventReporter.i(TAG, \"Failed to release lock on wifi manager wrapper\")\n            }\n            lock = null\n        }\n    }\n}\n\n/**\n * Disconnects from the connected wifi network and emits a completed event if no errors occurred\n */\nprivate fun disconnect(context: Context,\n                       wifiManager: WifiManager) = Completable.create { emitter -&gt;\n\n    val wifiDisconnectionReceiver = object : BroadcastReceiver() {\n        override fun onReceive(context: Context, intent: Intent) {\n            if (intent.action == WifiManager.NETWORK_STATE_CHANGED_ACTION) {\n                val networkInfo = intent.getParcelableExtra&lt;NetworkInfo&gt;(WifiManager.EXTRA_NETWORK_INFO) ?: return\n                if (networkInfo.detailedState == NetworkInfo.DetailedState.DISCONNECTED) {\n                    context.applicationContext.unregisterReceiver(this)\n                    emitter.onComplete()\n                }\n            }\n        }\n    }\n\n    val networkStateChangedFilter = IntentFilter(WifiManager.NETWORK_STATE_CHANGED_ACTION)\n\n    context.applicationContext.registerReceiver(wifiDisconnectionReceiver, networkStateChangedFilter)\n\n    emitter.setCancellable {\n        if (!emitter.isDisposed)\n            context.applicationContext.unregisterReceiver(wifiDisconnectionReceiver)\n    }\n\n    if (!wifiManager.disconnect())\n        emitter.onError(WiFiException(\"Failed to issue disconnect command to wifi subsystem\"))\n}\n\n/**\n * Connects to the wifi access point at specified [ssid] with specified [networkId]\n * And returns the [WifiInfo] of the network that has been connected to\n */\nprivate fun connect(context: Context,\n                    wifiManager: WifiManager,\n                    ssid: String,\n                    networkId: Int) = Single.create&lt;WifiInfo&gt; { emitter -&gt;\n\n    val wifiConnectionReceiver = object : BroadcastReceiver() {\n        var oldSupplicantState: SupplicantState? = null\n\n        override fun onReceive(context: Context, intent: Intent) {\n            if (intent.action == WifiManager.NETWORK_STATE_CHANGED_ACTION) {\n                val networkInfo = intent.getParcelableExtra&lt;NetworkInfo&gt;(WifiManager.EXTRA_NETWORK_INFO) ?: return\n\n                if (networkInfo.detailedState == NetworkInfo.DetailedState.DISCONNECTED) {\n                    context.applicationContext.unregisterReceiver(this)\n                    emitter.onError(WiFiException(\"Failed to connect to wifi network\"))\n                }\n                else if (networkInfo.detailedState == NetworkInfo.DetailedState.CONNECTED) {\n                    val wifiInfo = intent.getParcelableExtra&lt;WifiInfo&gt;(WifiManager.EXTRA_WIFI_INFO) ?: return\n                    if (ssid == wifiInfo.ssid.unescape()) {\n                        context.applicationContext.unregisterReceiver(this)\n                        emitter.onSuccess(wifiInfo)\n                    }\n                }\n            } else if (intent.action == WifiManager.SUPPLICANT_STATE_CHANGED_ACTION) {\n                val supplicantState = intent.getParcelableExtra&lt;SupplicantState&gt;(WifiManager.EXTRA_NEW_STATE)\n                val oldSupplicantState = this.oldSupplicantState\n                this.oldSupplicantState = supplicantState\n\n                if (supplicantState == SupplicantState.DISCONNECTED) {\n                    if (oldSupplicantState == null || oldSupplicantState == SupplicantState.COMPLETED) {\n                        return\n                    }\n                    val possibleError = intent.getIntExtra(WifiManager.EXTRA_SUPPLICANT_ERROR, -1)\n                    if (possibleError == WifiManager.ERROR_AUTHENTICATING) {\n                        context.applicationContext.unregisterReceiver(this)\n                        emitter.onError(WiFiException(\"Wifi authentication failed\"))\n                    }\n                } else if (supplicantState == SupplicantState.SCANNING &amp;&amp; oldSupplicantState == SupplicantState.DISCONNECTED) {\n                    context.applicationContext.unregisterReceiver(this)\n                    emitter.onError(WiFiException(\"Failed to connect to wifi network\"))\n                }\n            }\n        }\n    }\n\n    val networkStateChangedFilter = IntentFilter(WifiManager.NETWORK_STATE_CHANGED_ACTION)\n    networkStateChangedFilter.addAction(WifiManager.SUPPLICANT_STATE_CHANGED_ACTION)\n\n    context.applicationContext.registerReceiver(wifiConnectionReceiver, networkStateChangedFilter)\n\n    emitter.setCancellable {\n        if (!emitter.isDisposed)\n            context.applicationContext.unregisterReceiver(wifiConnectionReceiver)\n    }\n\n    wifiManager.enableNetwork(networkId, true)\n    wifiManager.reconnect()\n}\n\n/**\n * Returns a Single, wrapping an Optional.absent if no existing configuration exists with the passed [ssid] and [bssid], else the found [WifiConfiguration]\n  */\nprivate fun getExistingConfiguration(wifiManager: WifiManager,\n                                     ssid: String,\n                                     bssid: String) = Single.create&lt;Optional&lt;WifiConfiguration&gt;&gt; { emitter -&gt;\n    val configuredNetworks = wifiManager.configuredNetworks\n    if (configuredNetworks.isEmpty()) {\n        emitter.onSuccess(Optional.absent())\n    }\n    emitter.onSuccess(Optional.fromNullable(configuredNetworks.firstOrNull { configuredNetwork -&gt;\n        configuredNetwork.SSID.unescape() == ssid &amp;&amp; configuredNetwork.BSSID == bssid\n    }))\n}\n\n/**\n * Emits a single of the open [WifiConfiguration] created from the passed [scanResult]\n */\nprivate fun createOpenWifiConfiguration(scanResult: WiFiScanResult) = Single.fromCallable&lt;WifiConfiguration&gt; {\n    val auth = scanResult.auth\n    val keyManagement = scanResult.keyManagement\n    val pairwiseCipher = scanResult.pairwiseCipher\n\n    val config = WifiConfiguration()\n    config.SSID = \"\\\"\" +  scanResult.ssid + \"\\\"\"\n    config.BSSID = scanResult.bssid\n\n    var allowedProtocols = 0\n    when {\n        auth.isEmpty() -&gt; {\n            allowedProtocols = allowedProtocols or WifiConfiguration.Protocol.RSN\n            allowedProtocols = allowedProtocols or WifiConfiguration.Protocol.WPA\n        }\n        auth.contains(\"WPA2\") -&gt; allowedProtocols = allowedProtocols or WifiConfiguration.Protocol.RSN\n        auth.contains(\"WPA\") -&gt; {\n            allowedProtocols = allowedProtocols or WifiConfiguration.Protocol.WPA\n            allowedProtocols = allowedProtocols or WifiConfiguration.Protocol.RSN\n        }\n    }\n\n    config.allowedProtocols.set(allowedProtocols)\n\n    var allowedAuthAlgos = 0\n    when {\n        auth.contains(\"EAP\") -&gt; allowedAuthAlgos = allowedAuthAlgos or WifiConfiguration.AuthAlgorithm.LEAP\n        auth.contains(\"WPA\") -&gt; allowedAuthAlgos = allowedAuthAlgos or WifiConfiguration.AuthAlgorithm.OPEN\n        auth.contains(\"WEP\") -&gt; allowedAuthAlgos = allowedAuthAlgos or WifiConfiguration.AuthAlgorithm.SHARED\n    }\n\n    config.allowedAuthAlgorithms.set(allowedAuthAlgos)\n\n    var allowedKeyManagers = WifiConfiguration.KeyMgmt.NONE\n    if (keyManagement.contains(\"IEEE802.1X\"))\n        allowedKeyManagers = allowedKeyManagers or WifiConfiguration.KeyMgmt.IEEE8021X\n    else if (auth.contains(\"WPA\") &amp;&amp; keyManagement.contains(\"EAP\"))\n        allowedKeyManagers = allowedKeyManagers or WifiConfiguration.KeyMgmt.WPA_EAP\n    else if (auth.contains(\"WPA\") &amp;&amp; keyManagement.contains(\"PSK\"))\n        allowedKeyManagers = allowedKeyManagers or WifiConfiguration.KeyMgmt.WPA_PSK\n\n    config.allowedKeyManagement.set(allowedKeyManagers)\n\n    var allowedPairWiseCiphers = WifiConfiguration.PairwiseCipher.NONE\n    if (pairwiseCipher.contains(\"CCMP\"))\n        allowedPairWiseCiphers = allowedPairWiseCiphers or WifiConfiguration.PairwiseCipher.CCMP\n    if (pairwiseCipher.contains(\"TKIP\"))\n        allowedPairWiseCiphers = allowedPairWiseCiphers or WifiConfiguration.PairwiseCipher.TKIP\n\n    config.allowedPairwiseCiphers.set(allowedPairWiseCiphers)\n\n    config\n}\n\n/**\n * Emits a single of the closed [WifiConfiguration] created from the passed [scanResult] and [preSharedKey]\n * Or, emits an error signalling the [preSharedKey] was empty\n */\nprivate fun createClosedWifiConfiguaration(scanResult: WiFiScanResult, preSharedKey: String) = Single.fromCallable&lt;WifiConfiguration&gt; {\n    val auth = scanResult.auth\n    val keyManagement = scanResult.keyManagement\n    val pairwiseCipher = scanResult.pairwiseCipher\n\n    val config = WifiConfiguration()\n    config.SSID = \"\\\"\" +  scanResult.ssid + \"\\\"\"\n    config.BSSID = scanResult.bssid\n\n    var allowedProtocols = 0\n    when {\n        auth.isEmpty() -&gt; {\n            allowedProtocols = allowedProtocols or WifiConfiguration.Protocol.RSN\n            allowedProtocols = allowedProtocols or WifiConfiguration.Protocol.WPA\n        }\n        auth.contains(\"WPA2\") -&gt; allowedProtocols = allowedProtocols or WifiConfiguration.Protocol.RSN\n        auth.contains(\"WPA\") -&gt; {\n            allowedProtocols = allowedProtocols or WifiConfiguration.Protocol.WPA\n            allowedProtocols = allowedProtocols or WifiConfiguration.Protocol.RSN\n        }\n    }\n\n    config.allowedProtocols.set(allowedProtocols)\n\n    var allowedAuthAlgos = 0\n    when {\n        auth.contains(\"EAP\") -&gt; allowedAuthAlgos = allowedAuthAlgos or WifiConfiguration.AuthAlgorithm.LEAP\n        auth.contains(\"WPA\") || auth.contains(\"WPA2\") -&gt; allowedAuthAlgos = allowedAuthAlgos or WifiConfiguration.AuthAlgorithm.OPEN\n        auth.contains(\"WEP\") -&gt; allowedAuthAlgos = allowedAuthAlgos or WifiConfiguration.AuthAlgorithm.SHARED\n    }\n\n    config.allowedAuthAlgorithms.set(allowedAuthAlgos)\n\n    var allowedKeyManagers = WifiConfiguration.KeyMgmt.NONE\n    if (keyManagement.contains(\"IEEE802.1X\"))\n        allowedKeyManagers = allowedKeyManagers or WifiConfiguration.KeyMgmt.IEEE8021X\n    else if (auth.contains(\"WPA\") &amp;&amp; keyManagement.contains(\"EAP\"))\n        allowedKeyManagers = allowedKeyManagers or WifiConfiguration.KeyMgmt.WPA_EAP\n    else if (auth.contains(\"WPA\") &amp;&amp; keyManagement.contains(\"PSK\"))\n        allowedKeyManagers = allowedKeyManagers or WifiConfiguration.KeyMgmt.WPA_PSK\n    else if (preSharedKey.isNotEmpty())\n        allowedKeyManagers = allowedKeyManagers or WifiConfiguration.KeyMgmt.WPA_PSK\n    else if (preSharedKey.isEmpty())\n        allowedKeyManagers = allowedAuthAlgos or WifiConfiguration.KeyMgmt.WPA_PSK\n\n    config.allowedKeyManagement.set(allowedKeyManagers)\n\n    var allowedPairWiseCiphers = WifiConfiguration.PairwiseCipher.NONE\n    if (pairwiseCipher.contains(\"CCMP\"))\n        allowedPairWiseCiphers = allowedPairWiseCiphers or WifiConfiguration.PairwiseCipher.CCMP\n    if (pairwiseCipher.contains(\"TKIP\"))\n        allowedPairWiseCiphers = allowedPairWiseCiphers or WifiConfiguration.PairwiseCipher.TKIP\n\n    config.allowedPairwiseCiphers.set(allowedPairWiseCiphers)\n\n    if (preSharedKey.isNotEmpty()) {\n        if (auth.contains(\"WEP\")) {\n            if (preSharedKey.matches(\"\\\\p{XDigit}+\".toRegex())) {\n                config.wepKeys[0] = preSharedKey\n            } else {\n                config.wepKeys[0] = \"\\\"\" + preSharedKey + \"\\\"\"\n            }\n            config.wepTxKeyIndex = 0\n        } else {\n            config.preSharedKey = \"\\\"\" + preSharedKey + \"\\\"\"\n        }\n    }\n\n    config\n}\n\n/**\n * Extension function to remove escaped \" from a string\n */\nprivate fun String.unescape() =\n    if (this.startsWith(\"\\\"\"))\n        this.replace(\"\\\"\", \"\")\n    else\n        this\n</code></pre>\n"}, {"tags": ["arrays", "generics", "kotlin"], "comments": [{"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1543995306, "post_id": 53620168, "comment_id": 94114307, "body": "&quot;For efficicy reasons I do not want to use an inline function with a reified type.&quot; Why? It should be <i>more</i> efficient by inlining <code>creator</code>."}], "answers": [{"tags": [], "owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "is_accepted": false, "score": 0, "last_activity_date": 1543954298, "last_edit_date": 1543954298, "creation_date": 1543953990, "answer_id": 53620633, "question_id": 53620168, "link": "https://stackoverflow.com/questions/53620168/create-copy-of-generic-array-with-new-size/53620633#53620633", "title": "Create copy of generic array with new size", "body": "<p>I guess this will work:</p>\n\n<pre><code>fun &lt;T&gt; resize(arr: Array&lt;T&gt;, dest: Array&lt;T&gt;, creator: (Int) -&gt; T): Array&lt;T&gt; {\n    val list = arrayListOf&lt;T&gt;()\n    // fill the list\n    for (i in 0 until dest.size) {\n        list.add(creator(i))\n    }\n    return list.toArray(dest)\n}\n\nfun callResize() {\n    val arr = Array(5) { \" \" }\n    val dest = Array(10) { \"\" }\n    val creator = { i: Int -&gt; \"$i\"}\n    resize(arr, dest, creator)\n}\n</code></pre>\n\n<p>The result is in the <code>dest</code> array.</p>\n"}, {"comments": [{"owner": {"reputation": 6194, "user_id": 2047987, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/WY0Zw.png?s=128&g=1", "display_name": "Cilenco", "link": "https://stackoverflow.com/users/2047987/cilenco"}, "edited": false, "score": 1, "creation_date": 1543958912, "post_id": 53620728, "comment_id": 94103814, "body": "Thanks that worked great :) Don&#39;t know Kotlin does not provide this by default"}, {"owner": {"reputation": 6194, "user_id": 2047987, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/WY0Zw.png?s=128&g=1", "display_name": "Cilenco", "link": "https://stackoverflow.com/users/2047987/cilenco"}, "edited": false, "score": 0, "creation_date": 1544006697, "post_id": 53620728, "comment_id": 94120327, "body": "But this is only possible because I already have an instance of that array right? I could not use this method to create a completely new array of a generic type right?"}, {"owner": {"reputation": 128160, "user_id": 321697, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/FHlMy.jpg?s=128&g=1", "display_name": "Kevin Coppock", "link": "https://stackoverflow.com/users/321697/kevin-coppock"}, "reply_to_user": {"reputation": 6194, "user_id": 2047987, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/WY0Zw.png?s=128&g=1", "display_name": "Cilenco", "link": "https://stackoverflow.com/users/2047987/cilenco"}, "edited": false, "score": 0, "creation_date": 1544023524, "post_id": 53620728, "comment_id": 94130761, "body": "Correct, but you can use the built-in function that @Sergey usedbelow for that -- e.g. <code>Array(size) { index -&gt; index.toString() }</code>"}], "tags": [], "owner": {"reputation": 128160, "user_id": 321697, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/FHlMy.jpg?s=128&g=1", "display_name": "Kevin Coppock", "link": "https://stackoverflow.com/users/321697/kevin-coppock"}, "is_accepted": true, "score": 2, "last_activity_date": 1543954442, "creation_date": 1543954442, "answer_id": 53620728, "question_id": 53620168, "link": "https://stackoverflow.com/questions/53620168/create-copy-of-generic-array-with-new-size/53620728#53620728", "title": "Create copy of generic array with new size", "body": "<p>I would just add an extension method to <code>Array&lt;T&gt;</code> for this. You can still rely on <code>Arrays.copyOf</code> under the hood, but before returning the value fill any remaining spaces with the result of the <code>creator</code> block:</p>\n\n<pre><code>fun &lt;T&gt; Array&lt;T&gt;.resize(newSize: Int, creator: (Int) -&gt; T): Array&lt;T&gt; {\n    val copiedArray = Arrays.copyOf(this, newSize)\n    for (i in size until newSize) { copiedArray[i] = creator(i) }\n    return copiedArray\n}\n</code></pre>\n\n<p>For example:</p>\n\n<pre><code>val array = arrayOf(\"a\", \"b\", \"c\")\n\n// same: [a, b, c]\nprintln(\"same: ${Arrays.toString(array.resize(3) { it.toString() })}\")\n\n// less: [a, b]\nprintln(\"less: ${Arrays.toString(array.resize(2) { it.toString() })}\")\n\n// more: [a, b, c, 3, 4]\nprintln(\"more: ${Arrays.toString(array.resize(5) { it.toString() })}\")\n</code></pre>\n"}], "owner": {"reputation": 6194, "user_id": 2047987, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/WY0Zw.png?s=128&g=1", "display_name": "Cilenco", "link": "https://stackoverflow.com/users/2047987/cilenco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 53620728, "answer_count": 2, "score": 0, "last_activity_date": 1543954442, "creation_date": 1543951939, "question_id": 53620168, "link": "https://stackoverflow.com/questions/53620168/create-copy-of-generic-array-with-new-size", "title": "Create copy of generic array with new size", "body": "<p>Is it possible in Kotlin to create a copy of a generic array with new size if I already have an instance of that array and pass a construction method for its items? I think about something like this:</p>\n\n<pre><code>fun &lt;T&gt; resize(arr: Array&lt;T&gt;, newSize: Int, creator: (Int) -&gt; T): Array&lt;T&gt; {\n    ...\n}\n</code></pre>\n\n<p>Obviously I cannot call <code>Array&lt;T&gt;(newSize) { i -&gt; creator(i) }</code> because the type <code>T</code> is not known at compile time. For efficicy reasons I do not want to use an inline function with a reified type. I also cannot use the <code>arr.copyOf(newSize)</code> method here because that would return an <code>Array&lt;T?&gt;</code>.</p>\n\n<p>In Java I could use <code>Arrays.copyOf(arr, newSize)</code> even with a generic array because we don't have null safety here. But would this work in Kotlin as well? Or do you have any other ideas what I could do?</p>\n"}, {"tags": ["generics", "kotlin", "gson"], "comments": [{"owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "edited": false, "score": 0, "creation_date": 1544040876, "post_id": 53619913, "comment_id": 94139522, "body": "If the <code>Observable</code> implemented by <code>Foo</code> is from the databinding library as well, consider extending the <code>BaseObservable</code> and use all properties as normal types. You could use <i>Kotlin</i> delegates or custom setter for notifying of the change."}], "answers": [{"tags": [], "owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "is_accepted": false, "score": 0, "last_activity_date": 1544041780, "creation_date": 1544041780, "answer_id": 53640248, "question_id": 53619913, "link": "https://stackoverflow.com/questions/53619913/create-typeadapterfactory-for-data-binding-observablefield/53640248#53640248", "title": "Create TypeAdapterFactory for data binding ObservableField", "body": "<p>The <code>type</code> should actually implement <code>ParameterizedType</code> and you'd have to get the first element of <code>actualTypeArguments</code> to get the adapter for the generic type:</p>\n\n<pre><code>override fun &lt;T&gt; create(gson: Gson, type: TypeToken&lt;T&gt;): TypeAdapter&lt;T&gt;? {\n    if (type.rawType != ObservableField::class.java) {\n        return null\n    }\n\n    val paramType = (type as ParameterizedType).actualTypeArguments[0]\n    return object : TypeAdapter&lt;ObservableField&lt;Any&gt;&gt;() {\n        override fun read(reader: JsonReader): ObservableField&lt;Any&gt; {\n          return ObservableField(gson.fromJson(reader, paramType))\n        }\n\n        override fun write(writer: JsonWriter, value: ObservableField&lt;Any&gt;) {\n            gson.toJson(value.get(), paramType, writer)\n        }\n    }.nullSafe() as TypeAdapter&lt;T&gt;\n}\n</code></pre>\n"}], "owner": {"reputation": 20314, "user_id": 1281501, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/db591cfa2d3fc416c8ea91a16393fc28?s=128&d=identicon&r=PG", "display_name": "lostintranslation", "link": "https://stackoverflow.com/users/1281501/lostintranslation"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 259, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544041780, "creation_date": 1543950756, "question_id": 53619913, "link": "https://stackoverflow.com/questions/53619913/create-typeadapterfactory-for-data-binding-observablefield", "title": "Create TypeAdapterFactory for data binding ObservableField", "body": "<p>I am using the ObservableField for data binding and I would like to deserialize with GSON.</p>\n\n<pre><code>class Foo: Observable {\n   var bar: ObservableField&lt;String&gt;? = null\n}\n</code></pre>\n\n<p>If I don't provide a TypeAdapter, GSON will try to deserialize as an object instead of a string.</p>\n\n<p>My type adapter factory and type adapter:</p>\n\n<pre><code>class ObservableFieldTypeAdapterFactory: TypeAdapterFactory {\n    override fun &lt;T&gt; create(gson: Gson, type: TypeToken&lt;T&gt;): TypeAdapter&lt;T&gt;? {\n        if (type.rawType != ObservableField::class.java) {\n            return null\n        }\n\n        return object : TypeAdapter&lt;ObservableField&lt;Any&gt;&gt;() {\n            override fun read(reader: JsonReader): ObservableField&lt;Any&gt; {\n              // get the generic type of the ObservableField and let GSON \n              // deserialize it\n              val field = someDelegate.read(reader)\n              // wrap it\n              return ObservableField(field)\n            }\n\n            override fun write(out: JsonWriter?, value: ObservableField&lt;Any&gt;) {\n                throw UnsupportedOperationException()\n            }\n        }.nullSafe() as TypeAdapter&lt;T&gt;\n    }\n}\n</code></pre>\n\n<p>I have no idea how to tell GSON to parse the generic type of the ObservableField:</p>\n\n<pre><code>// get the generic type of the ObservableField and let GSON deserialize it\nval field = someDelegate.read(reader)\n</code></pre>\n\n<p>How to I delegate to GSON to parse the String field so I can wrap it?  I can check if it's a string field, but then this adapter doesn't support Ints or any generic object.</p>\n\n<p>Do I need to check the type of field being read in with peek?  And then switch on every field type with the appropriate delete?</p>\n"}, {"tags": ["kotlin", "documentation", "interpretation"], "answers": [{"tags": [], "owner": {"reputation": 136, "user_id": 3760520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed91b795d579bbd516b2185a8692797?s=128&d=identicon&r=PG&f=1", "display_name": "rajat", "link": "https://stackoverflow.com/users/3760520/rajat"}, "is_accepted": true, "score": 3, "last_activity_date": 1543951488, "creation_date": 1543951488, "answer_id": 53620073, "question_id": 53619900, "link": "https://stackoverflow.com/questions/53619900/how-can-i-read-kotlin-documentation/53620073#53620073", "title": "How can I read Kotlin documentation", "body": "<p>What you have linked here is an <strong>api reference</strong> in the official documentation.I guess you are having troubles understanding the syntax of Generics here. </p>\n\n<ol>\n<li>Try going through the <a href=\"https://kotlinlang.org/docs/reference/generics.html\" rel=\"nofollow noreferrer\">Generics section</a> first. </li>\n<li>If you still don't understand it maybe you should go through the <a href=\"https://kotlinlang.org/docs/reference/basic-syntax.html\" rel=\"nofollow noreferrer\">Getting Started</a> section once again and get comfortable with the basic syntax of functions, inline functions, lambdas, generics etc. </li>\n</ol>\n"}], "owner": {"reputation": 496, "user_id": 6760642, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001839393414/picture?type=large", "display_name": "Egalicia", "link": "https://stackoverflow.com/users/6760642/egalicia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 53620073, "answer_count": 1, "score": 1, "last_activity_date": 1543951488, "creation_date": 1543950724, "question_id": 53619900, "link": "https://stackoverflow.com/questions/53619900/how-can-i-read-kotlin-documentation", "title": "How can I read Kotlin documentation", "body": "<p>I am beginer with Kotlin, I am readig the official <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/let.html\" rel=\"nofollow noreferrer\">Documentation</a></p>\n\n<p>My problem is that not sure how can I interpretate the documentation, by ex:</p>\n\n<pre><code>inline fun &lt;T, R&gt; T.let(block: (T) -&gt; R): R\n</code></pre>\n\n<p>How should read this?</p>\n"}, {"tags": ["android", "kotlin", "retrofit", "multipart"], "comments": [{"owner": {"reputation": 9541, "user_id": 1568530, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001179991520/picture?type=large", "display_name": "Vladyslav Matviienko", "link": "https://stackoverflow.com/users/1568530/vladyslav-matviienko"}, "edited": false, "score": 0, "creation_date": 1543949130, "post_id": 53619497, "comment_id": 94099387, "body": "this is just a JSONArray."}, {"owner": {"reputation": 1, "user_id": 3604258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6980fba8deb7cd2aebb2240be68cc65?s=128&d=identicon&r=PG&f=1", "display_name": "Parvinderjit Singh", "link": "https://stackoverflow.com/users/3604258/parvinderjit-singh"}, "reply_to_user": {"reputation": 9541, "user_id": 1568530, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001179991520/picture?type=large", "display_name": "Vladyslav Matviienko", "link": "https://stackoverflow.com/users/1568530/vladyslav-matviienko"}, "edited": false, "score": 0, "creation_date": 1543949368, "post_id": 53619497, "comment_id": 94099500, "body": "Yes this is a JSON Array but problem is, need to send the images as well, as a part of Multipart data"}, {"owner": {"reputation": 5935, "user_id": 10182897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PuvGT.jpg?s=128&g=1", "display_name": "Ashish", "link": "https://stackoverflow.com/users/10182897/ashish"}, "edited": false, "score": 0, "creation_date": 1544003187, "post_id": 53619497, "comment_id": 94118186, "body": "you want post request for send ? means retrofit calls ?"}, {"owner": {"reputation": 1, "user_id": 3604258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6980fba8deb7cd2aebb2240be68cc65?s=128&d=identicon&r=PG&f=1", "display_name": "Parvinderjit Singh", "link": "https://stackoverflow.com/users/3604258/parvinderjit-singh"}, "edited": false, "score": 0, "creation_date": 1544253221, "post_id": 53619497, "comment_id": 94218171, "body": "Ashish yes i want to post the multipart request using Retrofit"}, {"owner": {"reputation": 112, "user_id": 4088225, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/384eaec86b14e2161f9e6d6392d17cfd?s=128&d=identicon&r=PG&f=1", "display_name": "Adil Iqbal", "link": "https://stackoverflow.com/users/4088225/adil-iqbal"}, "edited": false, "score": 0, "creation_date": 1544253595, "post_id": 53619497, "comment_id": 94218216, "body": "Please have a look at second answer of <a href=\"https://stackoverflow.com/questions/49973677/nested-multipart-request-using-retrofit\">this question</a>. Its a similar question."}], "owner": {"reputation": 1, "user_id": 3604258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6980fba8deb7cd2aebb2240be68cc65?s=128&d=identicon&r=PG&f=1", "display_name": "Parvinderjit Singh", "link": "https://stackoverflow.com/users/3604258/parvinderjit-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 150, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544253252, "creation_date": 1543948896, "last_edit_date": 1544253252, "question_id": 53619497, "link": "https://stackoverflow.com/questions/53619497/retrofit-multipart-nested-object", "title": "Retrofit Multipart Nested Object", "body": "<pre><code>[\n    {\n      \u201cid\u201d: \"string\",\n      \"images\": [\n        null\n      ],\n      \"quantity\": 0,\n      \u201cdescription\": \"string\"\n    },\n\n    {\n      \u201cid\u201d: \"string\",\n      \"images\": [\n        null\n      ],\n      \"quantity\": 0,\n      \u201cdescription\": \"string\"\n    }\n]\n</code></pre>\n\n<p>How can we send the object (like above) using Multipart request in Retrofit. Thank you in advance. i.e an array of objects having images list in it.</p>\n"}, {"tags": ["kotlin", "kotlinx.coroutines"], "comments": [{"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1543951929, "post_id": 53619118, "comment_id": 94100664, "body": "You seem to contradict yourself: If the producer needs the acknowledgement after processing the numbers, you can&#39;t respond immediately!? Can you clarify?"}, {"owner": {"reputation": 272, "user_id": 2091291, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/04db76e8bb9d1fcd1ac5bccf7822cbfb?s=128&d=identicon&r=PG", "display_name": "stevietheTV", "link": "https://stackoverflow.com/users/2091291/steviethetv"}, "reply_to_user": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1544041328, "post_id": 53619118, "comment_id": 94139715, "body": "@UlrichEckhardt I sure can! What would happen in my above example is that the producer would get the acknowledgement before the messages are sent to SQS but after the numbers have been processed. So the producer should not have to wait for the SQS-send"}], "answers": [{"comments": [{"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1543999459, "post_id": 53622228, "comment_id": 94116226, "body": "Why use four threads for bg jobs, assuming they&#39;re non-blocking? One thread would probably be able to handle a million ops per second."}, {"owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "reply_to_user": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1544006659, "post_id": 53622228, "comment_id": 94120302, "body": "You can use singleThreadContext, but I usually prefer to be safe than sorry. Coroutine can still starve the thread it runs on, if it&#39;s written badly. Having thread pool mitigates that issue."}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1544006895, "post_id": 53622228, "comment_id": 94120470, "body": "That hides bugs, doesn&#39;t it? It will cause your app to misbehave less often, and you won&#39;t be able to reproduce it. It&#39;s against the &quot;fail fast and loud&quot; doctrine."}, {"owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "reply_to_user": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 1, "creation_date": 1544009444, "post_id": 53622228, "comment_id": 94121976, "body": "Wouldn&#39;t like to argue about different doctrines. What I wonder though after looking at my solution some more is whether simply using <code>Dispatchers.IO</code> would be more appropriate. Not sure."}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1544012945, "post_id": 53622228, "comment_id": 94124061, "body": "<code>Dispatchers.IO</code> is there for blocking network operations. If <code>sendToSqs</code> is a blocking operation, then coroutines don&#39;t help with anything, we should just fire off a job to an executor service or whatever else we do."}, {"owner": {"reputation": 2679, "user_id": 4465354, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/peiDQ.png?s=128&g=1", "display_name": "qwwdfsad", "link": "https://stackoverflow.com/users/4465354/qwwdfsad"}, "edited": false, "score": 0, "creation_date": 1544174591, "post_id": 53622228, "comment_id": 94190836, "body": "Note that <code>bgScope</code>now has a <code>Job</code> which can be cancelled on a child&#39;s failure, preventing further background jobs to launch. To avoid that, <code>SupervisorJob</code> should be used"}], "tags": [], "owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "is_accepted": true, "score": 2, "last_activity_date": 1543961594, "creation_date": 1543961594, "answer_id": 53622228, "question_id": 53619118, "link": "https://stackoverflow.com/questions/53619118/fire-and-forget-with-structured-concurrency-and-coroutines/53622228#53622228", "title": "&quot;Fire and forget&quot; with structured concurrency and coroutines", "body": "<p>As you already guessed, creating your own scope would be a good solution in this case.<br>\nYou can define it as member of your controller:</p>\n\n<pre><code>private val bgScope = CoroutineScope(newFixedThreadPoolContext(4, \"background-tasks\"))\n</code></pre>\n\n<p>Then usage is very similar to what you're doing:</p>\n\n<pre><code>val numbers = it.bodyAsString.parseJsonList&lt;Numbers&gt;()\nprocessedNumbers = numberService.process(numbers)\nbgScope.launch {\n    sqsService.sendToSqs(processedNumbers)\n}\nit.response.setStatusCode(204).end()\n</code></pre>\n"}], "owner": {"reputation": 272, "user_id": 2091291, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/04db76e8bb9d1fcd1ac5bccf7822cbfb?s=128&d=identicon&r=PG", "display_name": "stevietheTV", "link": "https://stackoverflow.com/users/2091291/steviethetv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 613, "favorite_count": 0, "accepted_answer_id": 53622228, "answer_count": 1, "score": 1, "last_activity_date": 1544006933, "creation_date": 1543947266, "last_edit_date": 1544006933, "question_id": 53619118, "link": "https://stackoverflow.com/questions/53619118/fire-and-forget-with-structured-concurrency-and-coroutines", "title": "&quot;Fire and forget&quot; with structured concurrency and coroutines", "body": "<p>I have a little endpoint that looks like this</p>\n\n<pre><code>val numbers = it.bodyAsString.parseJsonList&lt;Numbers&gt;()\nprocessedNumbers = numberService.process(numbers)\nGlobalScope.launch {\n    sqsService.sendToSqs(processedNumbers)\n}\nit.response.setStatusCode(204).end()\n</code></pre>\n\n<p>The reason why I use GlobalScope is because the producer does only need the acknowledge after the numbers have been processed so I am trying to do a fire and forget in a parallel track to be able to immediately respond to the producer</p>\n\n<p>What would be the \u201cbest practice\u201d way of doing this with structured currency? Should I create my own scope (like fireAndForgetScope instead of GlobalScope)?</p>\n"}, {"tags": ["android", "xml", "kotlin", "android-preferences", "checkboxpreference"], "answers": [{"tags": [], "owner": {"reputation": 11569, "user_id": 5015207, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3GiGl.jpg?s=128&g=1", "display_name": "B&#246; macht Blau", "link": "https://stackoverflow.com/users/5015207/b%c3%b6-macht-blau"}, "is_accepted": true, "score": 1, "last_activity_date": 1543949851, "creation_date": 1543949851, "answer_id": 53619689, "question_id": 53618007, "link": "https://stackoverflow.com/questions/53618007/unsucceedable-cast-when-declaring-checkboxpreference/53619689#53619689", "title": "Unsucceedable cast when declaring CheckBoxPreference", "body": "<p><strong>TL;DR</strong> You have to change the import to <code>android.support.v7.preference.CheckBoxPreference</code>.</p>\n\n<p>There are two versions of <code>CheckBoxPreference</code>:</p>\n\n<ul>\n<li><code>android.preference.CheckBoxPreference</code>, which was added in API level 1 and has <code>android.preference.Preference</code> as ancestor class</li>\n<li><code>android.support.v7.preference.CheckBoxPreference</code> which belongs to the support library and has <code>android.support.v7.preference.Preference</code> as ancestor class</li>\n</ul>\n\n<p>Your <code>Fragment</code> extends from <code>PreferenceFragmentCompat</code>, so <code>findPreference()</code> will return a <code>android.support.v7.preference.Preference</code>. Since you can't cast <em>support</em> <code>Preference</code> classes to their <em>non support</em> equivalents, Android Studio is showing the error message \"This cast can never succeed\" when you attempt to cast to the <em>non support</em> <code>CheckBoxPreference</code>.</p>\n"}], "owner": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 53619689, "answer_count": 1, "score": 1, "last_activity_date": 1543949851, "creation_date": 1543942786, "last_edit_date": 1543949142, "question_id": 53618007, "link": "https://stackoverflow.com/questions/53618007/unsucceedable-cast-when-declaring-checkboxpreference", "title": "Unsucceedable cast when declaring CheckBoxPreference", "body": "<p>After declaring a <code>CheckboxPreference</code> in my activity for my app's settings, a warning appears for <code>as</code> in the line '<code>val mCheckBoxPreference = findPreference(\"preference_a\") as CheckBoxPreference</code>'. What should be done so that the cast does succeed?</p>\n\n<blockquote>\n  <p>This cast can never succeed</p>\n</blockquote>\n\n<p><strong>app_preferences.xml</strong></p>\n\n<pre><code>&lt;PreferenceScreen xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt;\n\n    &lt;CheckBoxPreference\n        android:key=\"preference_a\"\n        android:defaultValue=\"false\"\n        android:title=\"Preference A\"/&gt;\n\n&lt;/PreferenceScreen&gt;\n</code></pre>\n\n<p><strong>fragment class</strong></p>\n\n<pre><code>import android.content.Context\nimport android.os.Bundle\nimport android.preference.CheckBoxPreference\nimport android.preference.Preference\nimport android.support.v7.preference.PreferenceFragmentCompat\nimport android.util.Log\n\nclass MySettingsFragment : PreferenceFragmentCompat(), Preference.OnPreferenceChangeListener {\n    override fun onCreatePreferences(savedInstanceState: Bundle?, rootKey: String?) {\n        addPreferencesFromResource(R.xml.app_preferences)\n\n        val mCheckBoxPreference = findPreference(\"preference_a\") as CheckBoxPreference\n        mCheckBoxPreference.onPreferenceChangeListener = this\n    }\n\n    // declaring PreferenceXchangeListener\n    private var mPreferenceXchangeListener: PreferenceXchangeListener? = null\n\n    // declaring PreferenceXchangeListener in order to communicate with Activities\n    interface PreferenceXchangeListener {\n        fun onXchange(value:Boolean)\n    }\n\n    override fun onAttach(context: Context) {\n        super.onAttach(context)\n        // on attach - assign parent Activity as PreferenceXchangeListener\n        try\n        {\n            mPreferenceXchangeListener = context as MySettingsFragment.PreferenceXchangeListener\n        }\n        catch (e:ClassCastException) {\n            Log.e(TAG, \"onAttach::::: PreferenceXchangeListener must be set in parent Activity\")\n        }\n    }\n\n    override fun onPreferenceChange(preference: Preference, newValue:Any):Boolean {\n        val preferenceKey = preference.key\n\n        if (preferenceKey == \"preference_a\")\n        {\n            (preference as CheckBoxPreference).isChecked = newValue as Boolean\n            // executing parent Activity's callback with the new value\n            mPreferenceXchangeListener!!.onXchange(newValue)\n            return true\n        }\n        return false\n    }\n\n    companion object {\n        private val TAG = MySettingsFragment::class.java.simpleName\n    }\n}\n</code></pre>\n\n<p><strong>activity class</strong></p>\n\n<pre><code>class MySettingsActivity : AppCompatActivity(), MySettingsFragment.PreferenceXchangeListener {\n    private var mCurrentValue: Boolean? = null\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        val mSharedPreferences = PreferenceManager.getDefaultSharedPreferences(this)\n        mCurrentValue = mSharedPreferences.getBoolean(\"preference_a\", false)\n        if (mCurrentValue as Boolean)\n        {\n            setTheme(R.style.MyDarkAppCompatTheme)\n        }\n        else\n        {\n            setTheme(R.style.MyLightAppCompatTheme)\n        }\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_mysettings)\n\n        val settingsFragment = MySettingsFragment()\n        supportFragmentManager\n                .beginTransaction()\n                .replace(R.id.settings_container, settingsFragment)\n                .commit()\n\n        val myActionBar = actionBar\n\n        if (myActionBar != null)\n        {\n            myActionBar.setTitle(R.string.settings)                \n            myActionBar.setBackgroundDrawable(ColorDrawable(Color.BLACK))\n        }\n    }\n\n    override fun onXchange(value:Boolean) {\n        if (value !== mCurrentValue)\n        {\n            mCurrentValue = value\n            recreate()\n        }\n    }\n\n\n    override fun onOptionsItemSelected(item: MenuItem): Boolean {\n        when (item.itemId) {\n            android.R.id.home -&gt; {\n                val intent = parentActivityIntent\n                intent?.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION)\n                onBackPressed()\n                return true\n            }\n\n            else -&gt;\n                return super.onOptionsItemSelected(item)\n        }\n    }\n\n    companion object {\n        private val TAG = MySettingsActivity::class.java.simpleName\n    }\n}\n</code></pre>\n"}, {"tags": ["junit", "kotlin", "mockito", "robolectric", "parameterized-tests"], "answers": [{"comments": [{"owner": {"reputation": 44415, "user_id": 356895, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/022ac4ee5fc9f2474d60c9a1a6dd16f5?s=128&d=identicon&r=PG", "display_name": "JJD", "link": "https://stackoverflow.com/users/356895/jjd"}, "edited": false, "score": 0, "creation_date": 1545215397, "post_id": 53778076, "comment_id": 94546037, "body": "Thank you for your example. It works in the current state. - The scenario I have is that I would like to test different values for <code>VERSION</code>. Therefore, it cannot be assigned within the <code>companion object</code> as <code>val</code>. I rather want to run each test instance with a different value of <code>VERSION</code>. I tried that in the <code>@Before</code> method."}, {"owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "reply_to_user": {"reputation": 44415, "user_id": 356895, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/022ac4ee5fc9f2474d60c9a1a6dd16f5?s=128&d=identicon&r=PG", "display_name": "JJD", "link": "https://stackoverflow.com/users/356895/jjd"}, "edited": false, "score": 0, "creation_date": 1545217278, "post_id": 53778076, "comment_id": 94547122, "body": "I tested method with <code>@Before</code> annotation and it works as well. You can create different local instances of <code>Version</code> and test against them."}, {"owner": {"reputation": 44415, "user_id": 356895, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/022ac4ee5fc9f2474d60c9a1a6dd16f5?s=128&d=identicon&r=PG", "display_name": "JJD", "link": "https://stackoverflow.com/users/356895/jjd"}, "edited": false, "score": 0, "creation_date": 1545223635, "post_id": 53778076, "comment_id": 94550405, "body": "I would like to define the different <code>VERSION</code> values here: <code>arrayOf(product = productMock, version = 1, shouldShow = false), arrayOf(product = productMock, version = 2, shouldShow = false), ...</code>"}, {"owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "reply_to_user": {"reputation": 44415, "user_id": 356895, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/022ac4ee5fc9f2474d60c9a1a6dd16f5?s=128&d=identicon&r=PG", "display_name": "JJD", "link": "https://stackoverflow.com/users/356895/jjd"}, "edited": false, "score": 0, "creation_date": 1545224770, "post_id": 53778076, "comment_id": 94551083, "body": "I think there shouldn&#39;t be a problem. You can create additional constructor param in <code>ProductLogicTest </code> and use it: <code>class ProductLogicTest(private val product: Product,                        private val version: Int,                        private val shouldShow: Boolean)</code>"}, {"owner": {"reputation": 44415, "user_id": 356895, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/022ac4ee5fc9f2474d60c9a1a6dd16f5?s=128&d=identicon&r=PG", "display_name": "JJD", "link": "https://stackoverflow.com/users/356895/jjd"}, "edited": false, "score": 0, "creation_date": 1545242668, "post_id": 53778076, "comment_id": 94561539, "body": "Please note that <code>product</code> is nullable. Therefore, the <code>@Before doReturn...</code> statement can only run if <code>product != null</code> which is fine. However, the test execution still fails with an <code>NotAMockException</code> as mentioned in my question."}, {"owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "reply_to_user": {"reputation": 44415, "user_id": 356895, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/022ac4ee5fc9f2474d60c9a1a6dd16f5?s=128&d=identicon&r=PG", "display_name": "JJD", "link": "https://stackoverflow.com/users/356895/jjd"}, "edited": false, "score": 0, "creation_date": 1545245689, "post_id": 53778076, "comment_id": 94562820, "body": "I don&#39;t encounter this error even after I change constructor parameter to <code>private val product: Product?</code> and add nullability validation in <code>@Before</code> method."}], "tags": [], "owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "is_accepted": false, "score": 5, "last_activity_date": 1544784381, "last_edit_date": 1544784381, "creation_date": 1544783975, "answer_id": 53778076, "question_id": 53617622, "link": "https://stackoverflow.com/questions/53617622/notamockexception-how-to-stub-a-value-in-parameterized-test-in-kotlin/53778076#53778076", "title": "NotAMockException / How to stub a value in parameterized test in Kotlin?", "body": "<p>Robolectric and Mockito versions:</p>\n\n<pre><code>testImplementation 'org.robolectric:robolectric:4.1'\ntestImplementation 'org.mockito:mockito-core:2.23.4'\n</code></pre>\n\n<p>Also, to mock final classes, I created file <code>src/test/resources/mockito-extensions/org.mockito.plugins.MockMaker</code> with content:</p>\n\n<pre><code>mock-maker-inline\n</code></pre>\n\n<p>Classes to test:</p>\n\n<pre><code>class ProductLogic(private val product: Product?) {\n    fun shouldShow(): Boolean {\n        if (product == null) {\n            return false\n        }\n        val version = product.version\n        return !isAtLeastVersionX(version.minor, version.major)\n    }\n\n    private fun isAtLeastVersionX(minor: Int, major: Int): Boolean {\n        val v = 5\n        return v in minor..major\n    }\n}\n\nclass Product(val version: Version)\n\nclass Version(val minor: Int, val major: Int)\n</code></pre>\n\n<p>Next test code works for me and test is passed:</p>\n\n<pre><code>import org.hamcrest.CoreMatchers.`is`\nimport org.junit.Assert.assertThat\nimport org.junit.Before\nimport org.junit.Test\nimport org.junit.runner.RunWith\nimport org.mockito.Mockito.doReturn\nimport org.mockito.Mockito.mock\nimport org.robolectric.ParameterizedRobolectricTestRunner\nimport org.robolectric.annotation.Config\nimport java.util.Arrays.asList\n\n@RunWith(ParameterizedRobolectricTestRunner::class)\n@Config(sdk = [19], packageName = \"com.example\")\nclass ProductLogicTest(private val product: Product,\n                       private val shouldShow: Boolean) {\n\n    @Before\n    fun setUp() {\n        //doReturn(VERSION).`when`(product).version // if uncomment works fine\n    }\n\n    @Test\n    fun shouldShow() {\n        assertThat(ProductLogic(product).shouldShow(), `is`(shouldShow))\n    }\n\n\n    companion object {\n        private val VERSION = Version(1, 5)\n\n        @JvmStatic\n        @ParameterizedRobolectricTestRunner.Parameters(name = \"{index}: {0} =&gt; {1}\")\n        fun data(): Collection&lt;Array&lt;Any?&gt;&gt; {\n            val productMock = mock(Product::class.java)\n            doReturn(VERSION).`when`(productMock).version // Works fine\n            return asList(\n                    arrayOf(productMock, false)\n            )\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 44415, "user_id": 356895, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/022ac4ee5fc9f2474d60c9a1a6dd16f5?s=128&d=identicon&r=PG", "display_name": "JJD", "link": "https://stackoverflow.com/users/356895/jjd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 730, "favorite_count": 0, "answer_count": 1, "score": 8, "last_activity_date": 1544784381, "creation_date": 1543941426, "last_edit_date": 1543999745, "question_id": 53617622, "link": "https://stackoverflow.com/questions/53617622/notamockexception-how-to-stub-a-value-in-parameterized-test-in-kotlin", "title": "NotAMockException / How to stub a value in parameterized test in Kotlin?", "body": "<p>For the following Kotlin class:</p>\n\n<pre><code>class ProductLogic(\n\n        private val product: Product?\n\n) {\n\n    fun shouldShow(): Boolean {\n        if (product == null) {\n            return false\n        }\n        val version = product.version!!\n        if (!Utils.isAtLeastVersionX(version.major, version.minor)) {\n            return false\n        }\n        return true\n    }\n\n}\n</code></pre>\n\n<p>I am trying to write a parameterized test in Kotlin:</p>\n\n<pre><code>@RunWith(ParameterizedRobolectricTestRunner::class)\n@Config(constants = BuildConfig::class, sdk = [19], packageName = \"com.example\")\nclass ProductLogicTest(\n\n        private val product: Product?,\n        private val shouldShow: Boolean\n\n) {\n\n    @Before\n    fun setUp() {\n        // doReturn(VERSION).`when`(product).version // (2) Raises a NotAMockException\n    }\n\n    @Test\n    fun shouldShow() {\n        assertThat(ProductLogic(product).shouldShow(), `is`(shouldShow))\n    }\n\n    companion object {\n        @JvmStatic\n        @Parameters(name = \"{index}: {0} =&gt; {1}\")\n        fun data(): Collection&lt;Array&lt;Any?&gt;&gt; {\n            val productMock = mock&lt;Product&gt;(Product::class.java)\n            doReturn(VERSION).`when`(productMock).version // (1) Is not applied\n            return asList(\n                       arrayOf(productMock, false),\n                       // ...\n            )\n        }\n\n}\n</code></pre>\n\n<p>I want to parameterize the value of the <code>Product#version</code> property. When I (1) modify its value in the <code>data()</code> function it is not applied when running test. When I (2) try to modify its value in <code>@Before</code> a <code>NotAMockException</code> is raised:</p>\n\n<pre><code>org.mockito.exceptions.misusing.NotAMockException: \nArgument passed to when() is not a mock!\nExample of correct stubbing:\n    doThrow(new RuntimeException()).when(mock).someMethod();\n</code></pre>\n\n<p><em>Please note that the example is simplified - the real <code>ProductLogic</code> class consists of more parameters which rectify to using a parameterized test.</em></p>\n"}, {"tags": ["android", "kotlin", "android-espresso", "instrumentation", "android-instrumentation"], "answers": [{"tags": [], "owner": {"reputation": 109, "user_id": 10244396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba54f3dcbe59a2d9229ef1d6b72d1159?s=128&d=identicon&r=PG&f=1", "display_name": "CaptKenpa", "link": "https://stackoverflow.com/users/10244396/captkenpa"}, "is_accepted": false, "score": 3, "last_activity_date": 1604310510, "last_edit_date": 1604310510, "creation_date": 1559607144, "answer_id": 56435915, "question_id": 53617431, "link": "https://stackoverflow.com/questions/53617431/java-lang-illegalargumentexception-you-cannot-start-a-load-for-a-destroyed-acti/56435915#56435915", "title": "java.lang.IllegalArgumentException: You cannot start a load for a destroyed activity", "body": "<p>This question has already been asked, please see: <a href=\"https://stackoverflow.com/questions/39093730/you-cannot-start-a-load-for-a-destroyed-activity-in-relativelayout-image-using-g\">You cannot start a load for a destroyed activity in relativelayout image using glide</a></p>\n<p>In conclusion, instead of using &quot;<em><strong>this</strong></em>&quot; in your activity</p>\n<pre><code>Glide.with(***this***).load(data[0].team).into(ivHome_detail)\n        ivHome_detail.visible()\n</code></pre>\n<p>change &quot;<code>this</code>&quot; to &quot;<code>getApplicationContext</code>&quot; like so:</p>\n<pre><code>Glide.with(***getApplicationContext()***).load(data[0].team).into(ivHome_detail)\n        ivHome_detail.visible()\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 10743624, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1ntDeXbdwdo/AAAAAAAAAAI/AAAAAAAAERQ/4XS5DKX2UOA/photo.jpg?sz=128", "display_name": "Riken", "link": "https://stackoverflow.com/users/10743624/riken"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 491, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1604310510, "creation_date": 1543940865, "last_edit_date": 1549750253, "question_id": 53617431, "link": "https://stackoverflow.com/questions/53617431/java-lang-illegalargumentexception-you-cannot-start-a-load-for-a-destroyed-acti", "title": "java.lang.IllegalArgumentException: You cannot start a load for a destroyed activity", "body": "<p>I try to do Instrumentation Test in my project but it have an error java.lang.IllegalArgumentException: You cannot start a load for a destroyed activity </p>\n\n<p>This is my error : </p>\n\n<pre><code>at dalvik.system.VMStack.getThreadStackTrace(Native Method)\nat java.lang.Thread.getStackTrace(Thread.java:580)\nat android.support.test.espresso.base.DefaultFailureHandler.getUserFriendlyError(DefaultFailureHandler.java:88)\nat android.support.test.espresso.base.DefaultFailureHandler.handle(DefaultFailureHandler.java:51)\nat android.support.test.espresso.ViewInteraction.waitForAndHandleInteractionResults(ViewInteraction.java:314)\nat android.support.test.espresso.ViewInteraction.check(ViewInteraction.java:297)\nat com.example.riken.footballmatch.view.HomeActivityTest.testFootballMatchBehaviour(HomeActivityTest.kt:40)\nat java.lang.reflect.Method.invoke(Native Method)\nat java.lang.reflect.Method.invoke(Method.java:372)\nat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\nat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\nat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\nat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\nat android.support.test.rule.ActivityTestRule$ActivityStatement.evaluate(ActivityTestRule.java:527)\nat org.junit.rules.RunRules.evaluate(RunRules.java:20)\nat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\nat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\nat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\nat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\nat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\nat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\nat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\nat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\nat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\nat android.support.test.runner.AndroidJUnit4.run(AndroidJUnit4.java:101)\nat org.junit.runners.Suite.runChild(Suite.java:128)\nat org.junit.runners.Suite.runChild(Suite.java:27)\nat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\nat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\nat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\nat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\nat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\nat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\nat org.junit.runner.JUnitCore.run(JUnitCore.java:137)\nat org.junit.runner.JUnitCore.run(JUnitCore.java:115)\nat android.support.test.internal.runner.TestExecutor.execute(TestExecutor.java:56)\nat android.support.test.runner.AndroidJUnitRunner.onStart(AndroidJUnitRunner.java:384)\nat android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1853)\nCaused by: junit.framework.AssertionFailedError: 'is displayed on the screen to the user' doesn't match the selected view.\nExpected: is displayed on the screen to the user\nGot: \"AppCompatTextView{id=2131230965, res-name=tvTeam_home_detail, visibility=VISIBLE, width=0, height=46, has-focus=false, has-focusable=false, has-window-focus=true, is-clickable=false, is-enabled=true, is-focused=false, is-focusable=false, is-layout-requested=false, is-selected=false, layout-params=android.widget.LinearLayout$LayoutParams@1c6b0fe, tag=null, root-is-layout-requested=false, has-input-connection=false, x=117.0, y=168.0, text=, input-type=0, ime-target=false, has-links=false}\"\n\nat android.support.test.espresso.matcher.ViewMatchers.assertThat(ViewMatchers.java:539)\nat android.support.test.espresso.assertion.ViewAssertions$MatchesViewAssertion.check(ViewAssertions.java:103)\nat android.support.test.espresso.ViewInteraction$SingleExecutionViewAssertion.check(ViewInteraction.java:415)\nat android.support.test.espresso.ViewInteraction$2.call(ViewInteraction.java:279)\nat android.support.test.espresso.ViewInteraction$2.call(ViewInteraction.java:265)\nat java.util.concurrent.FutureTask.run(FutureTask.java:237)\nat android.os.Handler.handleCallback(Handler.java:739)\nat android.os.Handler.dispatchMessage(Handler.java:95)\nat android.os.Looper.loop(Looper.java:135)\nat android.app.ActivityThread.main(ActivityThread.java:5283)\nat java.lang.reflect.Method.invoke(Native Method)\nat java.lang.reflect.Method.invoke(Method.java:372)\nat com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:908)\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:703)\n\n\njava.lang.IllegalArgumentException: You cannot start a load for a destroyed activity\nat com.bumptech.glide.manager.RequestManagerRetriever.assertNotDestroyed(RequestManagerRetriever.java:323)\nat com.bumptech.glide.manager.RequestManagerRetriever.get(RequestManagerRetriever.java:132)\nat com.bumptech.glide.Glide.with(Glide.java:723)\nat com.example.riken.footballmatch.view.DetailActivity.showAwyLogo(DetailActivity.kt:108)\nat com.example.riken.footballmatch.presenter.MatchDetailPresenter$getAwayLogo$1.invokeSuspend(MatchDetailPresenter.kt:40)\nat kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:32)\nat kotlinx.coroutines.DispatchedTask$DefaultImpls.run(Dispatched.kt:235)\nat kotlinx.coroutines.AbstractContinuation.run(AbstractContinuation.kt:19)\nat android.os.Handler.handleCallback(Handler.java:739)\nat android.os.Handler.dispatchMessage(Handler.java:95)\nat android.os.Looper.loop(Looper.java:135)\nat android.app.ActivityThread.main(ActivityThread.java:5283)\nat java.lang.reflect.Method.invoke(Native Method)\nat java.lang.reflect.Method.invoke(Method.java:372)\nat com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:908)\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:703)\n\nTest running failed: Instrumentation run failed due to 'java.lang.IllegalArgumentException'\n</code></pre>\n\n<p>DetailActivity.kt</p>\n\n<pre><code>package com.example.riken.footballmatch.view\n\nimport android.database.sqlite.SQLiteConstraintException\nimport android.os.Bundle\nimport android.support.v4.content.ContextCompat\nimport android.support.v4.widget.SwipeRefreshLayout\nimport android.support.v7.app.AppCompatActivity\nimport android.view.Menu\nimport android.view.MenuItem\nimport android.widget.ProgressBar\nimport com.bumptech.glide.Glide\nimport com.example.riken.footballmatch.R\nimport com.example.riken.footballmatch.R.id.add_fav_fragment\nimport com.example.riken.footballmatch.api.ApiRepository\nimport com.example.riken.footballmatch.database.database\nimport com.example.riken.footballmatch.extension.gone\nimport com.example.riken.footballmatch.extension.visible\nimport com.example.riken.footballmatch.model.FavoriteItem\nimport com.example.riken.footballmatch.presenter.MatchDetailPresenter\nimport com.example.riken.footballmatch.model.Team\nimport com.example.riken.footballmatch.team.detmatch.MatcDetView\nimport com.example.riken.footballmatch.model.MatchActivity\nimport com.google.gson.Gson\nimport kotlinx.android.synthetic.main.activity_detail.*\nimport org.jetbrains.anko.db.classParser\nimport org.jetbrains.anko.db.delete\nimport org.jetbrains.anko.db.insert\nimport org.jetbrains.anko.db.select\nimport org.jetbrains.anko.design.snackbar\n\nclass DetailActivity : AppCompatActivity(), MatcDetView {\n\n    private var matchdet: MutableList&lt;MatchActivity&gt; = mutableListOf()\n    private var idEvent: String? = \"\"\n    private var idTeamHome: String? = \"\"\n    private var idTeamAway: String?  = \"\"\n    private lateinit var matchpresenter: MatchDetailPresenter\n    private lateinit var progresbar: ProgressBar\n    private lateinit var swipeRefresh: SwipeRefreshLayout\n    private var menuItem: Menu? = null\n    private var isFavorite: Boolean = false\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_detail)\n\n\n        swipeRefresh = swipe_refresh_detail\n        val intent = intent\n        idEvent = intent.getStringExtra(\"id\")\n        idTeamHome = intent.getStringExtra(\"idHomeTeam\")\n        idTeamAway = intent.getStringExtra(\"idAwayTeam\")\n        progresbar = progresar_detail\n\n        loadingShow()\n\n        supportActionBar?.title = \"Detail Match\"\n        this.supportActionBar?.setDisplayHomeAsUpEnabled(true)\n\n        favoriteState()\n        val apiRequest = ApiRepository ()\n        val gson = Gson ()\n        matchpresenter = MatchDetailPresenter(this, apiRequest, gson)\n        matchpresenter.getAwayLogo(idTeamAway)\n        matchpresenter.getHomeLogo(idTeamHome)\n        matchpresenter.getDetailMatch(idEvent)\n\n    }\n\n\n    override fun matchListShow(data: List&lt;MatchActivity&gt;) {\n        matchdet.clear()\n        matchdet.addAll(data)\n\n        //detailmatch\n        tvdetail_match_date.text = matchdet[0].dateEvent\n//        tvdetail_match_date.text = matchdet.get(0).dateEvent\n//            ?.let { DateHelper.formatDateToMatch(it) }\n\n        //detailhome\n        tvTeam_home_detail.text = matchdet[0].teamHome\n        tvScore_home_detail.text = matchdet[0].scoreHome\n        tvHome_goal_detail.text = matchdet[0].homeGoalDetail\n        tvHome_shot_detail.text = matchdet[0].homeShot\n        tvHome_gk.text = matchdet[0].homeKeeper\n        tvHome_deffense.text = matchdet[0].homeDefense\n        tvHome_mf.text = matchdet[0].homeMidfield\n        tvHome_fw.text = matchdet[0].homeForward\n        tvHome_sub.text = matchdet[0].homeSubstitute\n\n        //detailAway\n        tvTeam_away_detail.text = matchdet[0].teamAway\n        tvScore_away_detail.text = matchdet[0].scoreAway\n        tvAway_goal_detail.text = matchdet[0].awayGoalDetail\n        tvAway_shot_detail.text = matchdet[0].awayShot\n        tvAway_gk.text = matchdet[0].awayKeeper\n        tvAway_deffense.text = matchdet[0].awayDefense\n        tvAway_mf.text = matchdet[0].awayMidfield\n        tvAway_fw.text = matchdet[0].awayForward\n        tvAway_sub.text = matchdet[0].awaySubstitute\n\n        loadingHide()\n\n    }\n\n    override fun showAwyLogo(data: List&lt;Team&gt;) {\n\n        Glide.with(this).load(data[0].team).into(ivAway_detail)\n        ivAway_detail.visible()\n    }\n\n\n    override fun showHomeLogo(data: List&lt;Team&gt;) {\n\n        Glide.with(this).load(data[0].team).into(ivHome_detail)\n        ivHome_detail.visible()\n    }\n\n    override fun onCreateOptionsMenu(menu: Menu?): Boolean {\n        menuInflater.inflate(R.menu.favorite_match, menu)\n        menuItem = menu\n        setFavorite()\n        return true\n    }\n\n    override fun onOptionsItemSelected(item: MenuItem): Boolean {\n        return when (item.itemId) {\n            android.R.id.home -&gt; {\n                finish()\n                true\n            }\n            add_fav_fragment -&gt; {\n                if (isFavorite) removeFromFavorite() else addToFavorite()\n\n                isFavorite = !isFavorite\n                setFavorite()\n                true\n            }\n\n            else -&gt; super.onOptionsItemSelected(item)\n        }\n    }\n\n    private fun favoriteState() {\n        database.use {\n            val result = select(FavoriteItem.TABLE_MATCH)\n                .whereArgs(\"(MATCH_ID = {id})\",\n                    \"id\" to idEvent as Any\n                )\n            val favorite = result.parseList(classParser&lt;FavoriteItem&gt;())\n            if (!favorite.isEmpty()) isFavorite = true\n        }\n    }\n\n    override fun loadingShow() {\n        progresbar.visible()\n    }\n\n    override fun loadingHide() {\n        progresbar.gone()\n    }\n\n\n    private fun addToFavorite() {\n        try {\n            database.use {\n                insert(\n                    FavoriteItem.TABLE_MATCH,\n                    FavoriteItem.MATCH_ID to matchdet[0].idEvent,\n                    FavoriteItem.MATCH_DATE to matchdet[0].dateEvent,\n                    FavoriteItem.HOME_TEAM to matchdet[0].teamHome,\n                    FavoriteItem.HOME_SCORE to matchdet[0].scoreHome,\n                    FavoriteItem.AWAY_TEAM to matchdet[0].teamAway,\n                    FavoriteItem.AWAY_SCORE to matchdet[0].scoreAway,\n                    FavoriteItem.HOME_ID to matchdet[0].idHomeTeam,\n                    FavoriteItem.AWAY_ID to matchdet[0].idAwayTeam,\n                    FavoriteItem.HOME_GOAL to matchdet[0].homeGoalDetail,\n                    FavoriteItem.AWAY_GOAL to matchdet[0].awayGoalDetail,\n                    FavoriteItem.HOME_SHOTS to matchdet[0].homeShot,\n                    FavoriteItem.AWAY_SHOTS to matchdet[0].awayShot,\n                    FavoriteItem.HOME_GK to matchdet[0].homeKeeper,\n                    FavoriteItem.AWAY_GK to matchdet[0].awayKeeper,\n                    FavoriteItem.HOME_FW to matchdet[0].homeForward,\n                    FavoriteItem.AWAY_FW to matchdet[0].awayForward,\n                    FavoriteItem.HOME_MF to matchdet[0].homeMidfield,\n                    FavoriteItem.AWAY_MF to matchdet[0].awayMidfield,\n                    FavoriteItem.HOME_DF to matchdet[0].homeDefense,\n                    FavoriteItem.AWAY_DF to matchdet[0].awayDefense,\n                    FavoriteItem.HOME_SUB to matchdet[0].homeSubstitute,\n                    FavoriteItem.AWAY_SUB to matchdet[0].awaySubstitute)\n\n            }\n            swipeRefresh.snackbar(\"Added to favorite\").show()\n        } catch (e: SQLiteConstraintException){\n            swipeRefresh.snackbar(e.localizedMessage).show()\n        }\n    }\n\n    private fun removeFromFavorite(){\n        try {\n            database.use {\n                delete(\n                    FavoriteItem.TABLE_MATCH, \"(MATCH_ID = {id})\",\n                    \"id\" to matchdet.get(0).idEvent )\n            }\n            swipeRefresh.snackbar(\"Removed from favorite\").show()\n        } catch (e: SQLiteConstraintException){\n            swipeRefresh.snackbar(e.localizedMessage).show()\n        }\n    }\n\n    private fun setFavorite() {\n        if (isFavorite)\n            menuItem?.getItem(0)?.icon = ContextCompat.getDrawable(this, R.drawable.fav_white)\n        else\n            menuItem?.getItem(0)?.icon = ContextCompat.getDrawable(this, R.drawable.fav_white_border)\n    }\n\n\n}\n</code></pre>\n\n<p>MatchDetailPresenter :</p>\n\n<pre><code>package com.example.riken.footballmatch.presenter\n\nimport com.example.riken.footballmatch.api.ApiRepository\nimport com.example.riken.footballmatch.api.TheSportDBApi\nimport com.example.riken.footballmatch.model.MatchResponse\nimport com.example.riken.footballmatch.model.TeamResponse\nimport com.example.riken.footballmatch.team.detmatch.MatcDetView\nimport com.google.gson.Gson\nimport kotlinx.coroutines.Dispatchers\nimport kotlinx.coroutines.GlobalScope\nimport kotlinx.coroutines.launch\nimport org.jetbrains.anko.doAsync\nimport org.jetbrains.anko.uiThread\n\nclass MatchDetailPresenter (\n    private val matchDetailView: MatcDetView,\n    private val apiRepository: ApiRepository,\n    private val gson: Gson) {\n\n    fun getDetailMatch (idEvent: String?) {\n        matchDetailView.loadingShow()\n\n        GlobalScope.launch (Dispatchers.Main){\n            val data = gson.fromJson(apiRepository.doRequest(TheSportDBApi.getMatchDetail(idEvent)).await(),\n                MatchResponse::class.java)\n\n            matchDetailView.loadingHide()\n            matchDetailView.matchListShow(data.events)\n        }\n    }\n\n    fun getAwayLogo (idTeam: String?) {\n        matchDetailView.loadingShow()\n\n        GlobalScope.launch (Dispatchers.Main){\n            val data = gson.fromJson(apiRepository.doRequest(TheSportDBApi.getTeamLogo(idTeam)).await(),\n                TeamResponse::class.java)\n\n            matchDetailView.loadingHide()\n            matchDetailView.showAwyLogo(data.teams)\n        }\n\n    }\n\n    fun getHomeLogo (idTeam: String?) {\n        matchDetailView.loadingShow()\n\n        GlobalScope.launch(Dispatchers.Main) {\n            val data = gson.fromJson(\n                apiRepository.doRequest(TheSportDBApi.getTeamLogo(idTeam)).await(),\n                TeamResponse::class.java\n            )\n\n            matchDetailView.loadingHide()\n            matchDetailView.showHomeLogo(data.teams)\n        }\n    }\n}\n</code></pre>\n\n<p>HomeActivityTest :</p>\n\n<pre><code>package com.example.riken.footballmatch.view\n\nimport android.support.test.espresso.Espresso.onView\nimport android.support.test.espresso.action.ViewActions\nimport android.support.test.espresso.assertion.ViewAssertions.matches\nimport android.support.test.espresso.contrib.RecyclerViewActions\nimport android.support.test.espresso.matcher.ViewMatchers.isDisplayed\nimport android.support.test.espresso.matcher.ViewMatchers.withId\nimport android.support.test.rule.ActivityTestRule\nimport android.support.test.runner.AndroidJUnit4\nimport android.support.v7.widget.RecyclerView\nimport com.example.riken.footballmatch.R.id.*\nimport org.junit.Rule\nimport org.junit.Test\nimport org.junit.runner.RunWith\n\n\n@RunWith(AndroidJUnit4::class)\nclass HomeActivityTest {\n    @Rule\n    @JvmField var activityRule = ActivityTestRule(HomeActivity::class.java)\n\n    @Test\n    fun testFootballMatchBehaviour() {\n\n        delay()\n        onView(withId(recycle_first)).\n            check(matches(isDisplayed()))\n        onView(withId(recycle_first))\n            .perform(RecyclerViewActions.scrollToPosition&lt;RecyclerView.ViewHolder&gt;(7))\n        onView(withId(recycle_first))\n            .perform(RecyclerViewActions.actionOnItemAtPosition&lt;RecyclerView.ViewHolder&gt;(7, ViewActions.click()))\n\n        onView(withId(tvdetail_match_date))\n            .check(matches(isDisplayed()))\n\n        onView(withId(ivHome_detail))\n            .check(matches(isDisplayed()))\n        onView(withId(tvTeam_home_detail))\n            .check(matches(isDisplayed()))\n        onView(withId(tvScore_home_detail))\n            .check(matches(isDisplayed()))\n\n\n        onView(withId(ivAway_detail)).\n            check(matches(isDisplayed()))\n        onView(withId(tvTeam_away_detail))\n            .check(matches(isDisplayed()))\n        onView(withId(tvScore_away_detail))\n            .check(matches(isDisplayed()))\n\n        onView(withId(add_fav_fragment))\n            .perform(ViewActions.click())\n        ViewActions.pressBack()\n\n    }\n    private fun delay(){\n        try {\n            Thread.sleep(3000)\n        }catch (e : InterruptedException){\n            e.printStackTrace()\n        }\n    }\n\n}\n</code></pre>\n\n<p>DetailActivity line 108 :Glide.with(this).load(data[0].team).into(ivAway_detail)\nMatchDetailActivity line 40 :  matchDetailView.showAwyLogo(data.teams)\nHomeActivityTest line 40 :  onView(withId(tvTeam_home_detail)).check(matches(isDisplayed()))</p>\n"}, {"tags": ["android", "kotlin", "notifications", "android-constraintlayout"], "comments": [{"owner": {"reputation": 1003, "user_id": 4097058, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f7c71122b7c2a03b73ae2b2942571a70?s=128&d=identicon&r=PG", "display_name": "Brian Hoang", "link": "https://stackoverflow.com/users/4097058/brian-hoang"}, "edited": false, "score": 1, "creation_date": 1543940783, "post_id": 53617367, "comment_id": 94095259, "body": "Check supported layout by notification: <a href=\"https://developer.android.com/reference/android/widget/RemoteViews\" rel=\"nofollow noreferrer\">developer.android.com/reference/android/widget/RemoteViews</a>"}], "answers": [{"tags": [], "owner": {"reputation": 13530, "user_id": 5496177, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/98e2f1facb002b8c7ab2cb041d48b0a1?s=128&d=identicon&r=PG", "display_name": "TheWanderer", "link": "https://stackoverflow.com/users/5496177/thewanderer"}, "is_accepted": true, "score": 9, "last_activity_date": 1562980651, "last_edit_date": 1562980651, "creation_date": 1543940882, "answer_id": 53617433, "question_id": 53617367, "link": "https://stackoverflow.com/questions/53617367/android-custom-notification-not-work-with-constraint-layout/53617433#53617433", "title": "android custom notification not work with constraint layout", "body": "<p>Notification layouts use the RemoteViews implementation\u2014the same as widgets.</p>\n\n<p>There are very few Views that are compatible with RemoteViews. It's only a subset of the native/framework Views (ie no support Views, no library Views, no custom Views), and that subset isn't exhaustive:</p>\n\n<ul>\n<li>AdapterViewFlipper</li>\n<li>FrameLayout</li>\n<li>GridLayout</li>\n<li>GridView</li>\n<li>LinearLayout</li>\n<li>ListView</li>\n<li>RelativeLayout</li>\n<li>StackView</li>\n<li>ViewFlipper</li>\n<li>AnalogClock</li>\n<li>Button</li>\n<li>Chronometer</li>\n<li>ImageButton</li>\n<li>ImageView</li>\n<li>ProgressBar</li>\n<li>TextClock</li>\n<li>TextView</li>\n</ul>\n\n<p>No other Views will work.</p>\n\n<p><a href=\"https://developer.android.com/reference/android/widget/RemoteViews\" rel=\"noreferrer\">https://developer.android.com/reference/android/widget/RemoteViews</a></p>\n"}], "owner": {"reputation": 1877, "user_id": 5727285, "user_type": "registered", "accept_rate": 19, "profile_image": "https://i.stack.imgur.com/AwYFr.jpg?s=128&g=1", "display_name": "Hamza", "link": "https://stackoverflow.com/users/5727285/hamza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 623, "favorite_count": 0, "accepted_answer_id": 53617433, "answer_count": 1, "score": 3, "last_activity_date": 1562994782, "creation_date": 1543940699, "last_edit_date": 1562994782, "question_id": 53617367, "link": "https://stackoverflow.com/questions/53617367/android-custom-notification-not-work-with-constraint-layout", "title": "android custom notification not work with constraint layout", "body": "<p>I spend the whole day to figure out why my custom notifications are not being displayed. At the end, it was the problem with constraint layout. When I try to build custom_notification.xml with constraint layout the notification does not show up but if I change to linear layout the notification works. Can anybody tell me why this is happening?  </p>\n\n<p>custom_notitication.xml with linear layout (This layout works)</p>\n\n<pre><code> &lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n        xmlns:tools=\"http://schemas.android.com/tools\"\n        android:id=\"@+id/layout\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:padding=\"8dp\"&gt;\n        &lt;Button\n            android:id=\"@+id/button\"\n            android:layout_width=\"0dp\"\n            android:layout_weight=\"1\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginTop=\"8dp\"\n            android:text=\"Button\"\n\n        &lt;Button\n            android:layout_weight=\"1\"\n            android:id=\"@+id/button2\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginTop=\"8dp\"\n            android:text=\"Button\"\n\n            /&gt;\n    &lt;/LinearLayout&gt;\n</code></pre>\n\n<p>custom_notitication.xml with Constraint Layout(this is not working)</p>\n\n<pre><code>&lt;android.support.constraint.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:id=\"@+id/layout\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:padding=\"8dp\"&gt;\n\n\n    &lt;Button\n        android:id=\"@+id/button\"\n        android:layout_width=\"0dp\"\n        android:layout_weight=\"1\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginTop=\"8dp\"\n        android:text=\"Button\"\n        app:layout_constraintEnd_toStartOf=\"@+id/button2\"\n        app:layout_constraintHorizontal_bias=\"0.5\"\n        app:layout_constraintStart_toStartOf=\"parent\" /&gt;\n\n    &lt;Button\n        android:layout_weight=\"1\"\n        android:id=\"@+id/button2\"\n        android:layout_width=\"0dp\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginTop=\"8dp\"\n        android:text=\"Button\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintHorizontal_bias=\"0.5\"\n        app:layout_constraintStart_toEndOf=\"@+id/button\"\n        /&gt;\n&lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n\n<p>and kotlin code</p>\n\n<pre><code>  fun getNotification(context: Context): Notification {\n        val mNotificationManager1: NotificationManager?\n\n        val notification: Notification\n\n        mNotificationManager1 = context.getSystemService(Context.NOTIFICATION_SERVICE) as NotificationManager\n\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O)\n            createChannel(mNotificationManager1)\n\n        val contentView = RemoteViews(applicationContext.packageName, R.layout.custom_notifaction)\n\n        val mBuilder = NotificationCompat.Builder(applicationContext,\"LockScreenTouch\")\n                .setSmallIcon(R.mipmap.ic_launcher)\n                .setCustomBigContentView(contentView)\n        notification = mBuilder.build()\n\n        mNotificationManager1.notify(PostNotifactionActivity.ONGOING_NOTIFICATION_ID, notification)\n        return notification\n    }\n\n    @TargetApi(26)\n    @Synchronized\n    private fun createChannel(notificationManager: NotificationManager?) {\n        val name = \"lockScreen\"\n        val importance = NotificationManager.IMPORTANCE_DEFAULT\n\n        val mChannel = NotificationChannel(\"LockScreenTouch\", name, importance)\n\n        mChannel.enableLights(true)\n        mChannel.lightColor = Color.BLUE\n        notificationManager!!.createNotificationChannel(mChannel)\n    }\n</code></pre>\n\n<p>and my buid.gradle </p>\n\n<pre><code>    implementation 'com.android.support:appcompat-v7:28.0.0'\n    implementation 'com.android.support.constraint:constraint-layout:1.1.3'\n    implementation 'com.android.support:support-v4:28.0.0'\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 13530, "user_id": 5496177, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/98e2f1facb002b8c7ab2cb041d48b0a1?s=128&d=identicon&r=PG", "display_name": "TheWanderer", "link": "https://stackoverflow.com/users/5496177/thewanderer"}, "edited": false, "score": 0, "creation_date": 1543939041, "post_id": 53616801, "comment_id": 94094245, "body": "I&#39;m pretty sure you need to capture the result of <code>data.map{}</code>. I don&#39;t think it modifies the list."}, {"owner": {"reputation": 244, "user_id": 7535024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nsw3V.png?s=128&g=1", "display_name": "Nil Oleart", "link": "https://stackoverflow.com/users/7535024/nil-oleart"}, "reply_to_user": {"reputation": 13530, "user_id": 5496177, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/98e2f1facb002b8c7ab2cb041d48b0a1?s=128&d=identicon&r=PG", "display_name": "TheWanderer", "link": "https://stackoverflow.com/users/5496177/thewanderer"}, "edited": false, "score": 0, "creation_date": 1543939080, "post_id": 53616801, "comment_id": 94094274, "body": "I&#39;ve thought the same. Do you know how?"}, {"owner": {"reputation": 13530, "user_id": 5496177, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/98e2f1facb002b8c7ab2cb041d48b0a1?s=128&d=identicon&r=PG", "display_name": "TheWanderer", "link": "https://stackoverflow.com/users/5496177/thewanderer"}, "edited": false, "score": 1, "creation_date": 1543939120, "post_id": 53616801, "comment_id": 94094297, "body": "Just assign it to a new variable, or the same one. <code>data = data.map{}</code>."}, {"owner": {"reputation": 244, "user_id": 7535024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nsw3V.png?s=128&g=1", "display_name": "Nil Oleart", "link": "https://stackoverflow.com/users/7535024/nil-oleart"}, "reply_to_user": {"reputation": 13530, "user_id": 5496177, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/98e2f1facb002b8c7ab2cb041d48b0a1?s=128&d=identicon&r=PG", "display_name": "TheWanderer", "link": "https://stackoverflow.com/users/5496177/thewanderer"}, "edited": false, "score": 0, "creation_date": 1543939261, "post_id": 53616801, "comment_id": 94094392, "body": "I&#39;ve already tried, but it is not possible"}, {"owner": {"reputation": 13530, "user_id": 5496177, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/98e2f1facb002b8c7ab2cb041d48b0a1?s=128&d=identicon&r=PG", "display_name": "TheWanderer", "link": "https://stackoverflow.com/users/5496177/thewanderer"}, "edited": false, "score": 0, "creation_date": 1543939298, "post_id": 53616801, "comment_id": 94094421, "body": "Why is it not possible? Your question is unclear."}, {"owner": {"reputation": 244, "user_id": 7535024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nsw3V.png?s=128&g=1", "display_name": "Nil Oleart", "link": "https://stackoverflow.com/users/7535024/nil-oleart"}, "reply_to_user": {"reputation": 13530, "user_id": 5496177, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/98e2f1facb002b8c7ab2cb041d48b0a1?s=128&d=identicon&r=PG", "display_name": "TheWanderer", "link": "https://stackoverflow.com/users/5496177/thewanderer"}, "edited": false, "score": 0, "creation_date": 1543939867, "post_id": 53616801, "comment_id": 94094764, "body": "I had an empty list to which I was assigning the result but I was not working. I&#39;ll edit the question with the solution. Somehow, you&#39;ve helped me ;)"}, {"owner": {"reputation": 13530, "user_id": 5496177, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/98e2f1facb002b8c7ab2cb041d48b0a1?s=128&d=identicon&r=PG", "display_name": "TheWanderer", "link": "https://stackoverflow.com/users/5496177/thewanderer"}, "edited": false, "score": 1, "creation_date": 1543939892, "post_id": 53616801, "comment_id": 94094781, "body": "No, don&#39;t edit the question with the solution, post it as an answer."}, {"owner": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1543940343, "post_id": 53616801, "comment_id": 94095004, "body": "&quot;The mapping operation <b>returns a modified list</b>&quot; - this is pretty clear"}, {"owner": {"reputation": 244, "user_id": 7535024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nsw3V.png?s=128&g=1", "display_name": "Nil Oleart", "link": "https://stackoverflow.com/users/7535024/nil-oleart"}, "reply_to_user": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1543999050, "post_id": 53616801, "comment_id": 94116027, "body": "@TimCastelijns yes, but it does not say anywhere that the output list would be a List, not a list of the same type as the input list, in this case a mutableList."}], "answers": [{"tags": [], "owner": {"reputation": 244, "user_id": 7535024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nsw3V.png?s=128&g=1", "display_name": "Nil Oleart", "link": "https://stackoverflow.com/users/7535024/nil-oleart"}, "is_accepted": true, "score": 1, "last_activity_date": 1543940005, "creation_date": 1543940005, "answer_id": 53617123, "question_id": 53616801, "link": "https://stackoverflow.com/questions/53616801/unable-to-map-list-in-kotlin/53617123#53617123", "title": "Unable to map list in kotlin", "body": "<p>I've found the solution:</p>\n\n<pre><code> var result = data.map {...}\n</code></pre>\n\n<p>The problem was that the map function was returning a <code>List&lt;T&gt;</code> not a <code>MutableList&lt;T&gt;</code></p>\n"}, {"tags": [], "owner": {"reputation": 5302, "user_id": 4265739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19cd59393a5b86c48f0da7bd5504c5b8?s=128&d=identicon&r=PG&f=1", "display_name": "leonardkraemer", "link": "https://stackoverflow.com/users/4265739/leonardkraemer"}, "is_accepted": false, "score": 1, "last_activity_date": 1543941028, "creation_date": 1543941028, "answer_id": 53617485, "question_id": 53616801, "link": "https://stackoverflow.com/questions/53616801/unable-to-map-list-in-kotlin/53617485#53617485", "title": "Unable to map list in kotlin", "body": "<p>If you are using API >= 24 you can use Java 8's <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/List.html#replaceAll-java.util.function.UnaryOperator-\" rel=\"nofollow noreferrer\"><code>List.replaceAll(UnaryOperator&lt;E&gt; operator)</code></a></p>\n\n<pre><code>data.replaceAll {it -&gt;\n        if (it &lt;= secValue)   {it*mediumValue}\n        else if (it &lt;= alertValue) {it * maxValue}\n        else {it * topValue}\n    }\n</code></pre>\n"}], "owner": {"reputation": 244, "user_id": 7535024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nsw3V.png?s=128&g=1", "display_name": "Nil Oleart", "link": "https://stackoverflow.com/users/7535024/nil-oleart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 53617123, "answer_count": 2, "score": 1, "last_activity_date": 1543941028, "creation_date": 1543938976, "last_edit_date": 1543939904, "question_id": 53616801, "link": "https://stackoverflow.com/questions/53616801/unable-to-map-list-in-kotlin", "title": "Unable to map list in kotlin", "body": "<p>I'm trying to modify all the data in a <code>mutableListOf</code> but I am not succeding.</p>\n\n<p>For what I've read it is possible: <code>The mapping operation returns a modified list by applying a transform function on each element of the list.</code></p>\n\n<p>My code is something like this:</p>\n\n<pre><code>val secValue = 110.0\nval alertValue = 180.00\n\nval maxValue = 0.111111\nval mediumValue = 0.0909090909\nval topValue = 0.7353\nvar data = mutableListOf&lt;Double&gt;(11.0, 28.0, 30.0, 24.0, 34.0, 31.0, 32.0)\n data.map {it -&gt;\n      if (it &lt;= secValue)   {it*mediumValue}\n      else if (it &lt;= alertValue) {it * maxValue}\n      else {it * topValue}\n  }\n</code></pre>\n"}, {"tags": ["android", "xml", "kotlin", "android-preferences", "preferencefragment"], "comments": [{"owner": {"reputation": 1, "user_id": 10935128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3971ee6e5475b6e74b7becf7e2f50c48?s=128&d=identicon&r=PG&f=1", "display_name": "tnt", "link": "https://stackoverflow.com/users/10935128/tnt"}, "edited": false, "score": 0, "creation_date": 1554907566, "post_id": 53615637, "comment_id": 101220701, "body": "As of 2019/04/10, there is an obvious mistake in the settings <a href=\"https://developer.android.com/guide/topics/ui/settings/\" rel=\"nofollow noreferrer\">tutorial</a>. They forgot to call setContentView in the activity."}], "answers": [{"comments": [{"owner": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "edited": false, "score": 0, "creation_date": 1543936168, "post_id": 53615855, "comment_id": 94092416, "body": "My app&#39;s minSdkVersion is 24. Do I still need to use the legacy one? Please check my <b>dependencies</b> list."}, {"owner": {"reputation": 16268, "user_id": 603270, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cbfe6e57e0fa59928be4898a7be08c5d?s=128&d=identicon&r=PG", "display_name": "shkschneider", "link": "https://stackoverflow.com/users/603270/shkschneider"}, "reply_to_user": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "edited": false, "score": 0, "creation_date": 1543936297, "post_id": 53615855, "comment_id": 94092489, "body": "You&#39;re using an AndroidX widget in our XML yet your dependency is for a Support widget!"}, {"owner": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "edited": false, "score": 0, "creation_date": 1543936413, "post_id": 53615855, "comment_id": 94092560, "body": "Ok. That&#39;s why, but this was not mentioned in the Android Developers tutorial."}], "tags": [], "owner": {"reputation": 16268, "user_id": 603270, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cbfe6e57e0fa59928be4898a7be08c5d?s=128&d=identicon&r=PG", "display_name": "shkschneider", "link": "https://stackoverflow.com/users/603270/shkschneider"}, "is_accepted": true, "score": 17, "last_activity_date": 1543936346, "last_edit_date": 1543936346, "creation_date": 1543936012, "answer_id": 53615855, "question_id": 53615637, "link": "https://stackoverflow.com/questions/53615637/androidx-preference-preferencescreen-not-found-when-creating-preferences-screen/53615855#53615855", "title": "androidx.preference.PreferenceScreen not found when creating Preferences screen", "body": "<p>If you're using AndroidX, you should update your dependencies:</p>\n\n<pre><code>implementation \"androidx.legacy:legacy-preference-v14:1.0.0\"\nimplementation \"androidx.preference:preference:1.0.0\"\n</code></pre>\n\n<p>The legacy is for the old <code>com.android.support:preference-v14</code> while the other is for <code>com.android.support:preference-v7</code>.</p>\n\n<p>If you don't use AndroidX but Android Support libraries, do not import AndroidX widgets into your XML.</p>\n"}, {"comments": [{"owner": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "edited": false, "score": 0, "creation_date": 1550446935, "post_id": 54738703, "comment_id": 96259914, "body": "Code needs to be in Kotlin NOT Java"}, {"owner": {"reputation": 2602, "user_id": 471690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AfKo4.jpg?s=128&g=1", "display_name": "Hpsaturn", "link": "https://stackoverflow.com/users/471690/hpsaturn"}, "reply_to_user": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "edited": false, "score": 0, "creation_date": 1550448967, "post_id": 54738703, "comment_id": 96260333, "body": "it&#39;s the same. Follow the link on the end."}, {"owner": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "edited": false, "score": 0, "creation_date": 1550650623, "post_id": 54738703, "comment_id": 96341968, "body": "I\u2019m using AndroidX for my project"}], "tags": [], "owner": {"reputation": 2602, "user_id": 471690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AfKo4.jpg?s=128&g=1", "display_name": "Hpsaturn", "link": "https://stackoverflow.com/users/471690/hpsaturn"}, "is_accepted": false, "score": 0, "last_activity_date": 1550446431, "creation_date": 1550446431, "answer_id": 54738703, "question_id": 53615637, "link": "https://stackoverflow.com/questions/53615637/androidx-preference-preferencescreen-not-found-when-creating-preferences-screen/54738703#54738703", "title": "androidx.preference.PreferenceScreen not found when creating Preferences screen", "body": "<p>With support libraries <code>28.0.0</code> you should have XML code like this:\n(<strong>NOTE</strong> remove <code>androidx</code> for this case)</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;PreferenceScreen xmlns:app=\"http://schemas.android.com/apk/res-auto\"&gt;\n    &lt;CheckBoxPreference\n        android:key=\"preference_a\"\n        android:defaultValue=\"false\"\n        android:title=\"Preference A\" /&gt;\n&lt;/PreferenceScreen&gt;\n</code></pre>\n\n<p>and <code>gradle</code> config file:</p>\n\n<pre><code>implementation 'com.android.support:appcompat-v7:28.0.0'\nimplementation 'com.android.support:preference-v7:28.0.0'\n</code></pre>\n\n<p>and the implementation like this: \n(<strong>NOTE</strong>: <code>set</code> instead of <code>add</code> and <code>rootKey</code>):</p>\n\n<pre><code>public class SettingsFragment extends PreferenceFragmentCompat {\n\n    public static final String TAG = SettingsFragment.class.getSimpleName();\n\n    @Override\n    public void onCreatePreferences(Bundle savedInstanceState, String rootKey) {\n        setPreferencesFromResource(R.xml.preferences, rootKey);\n    }\n}\n</code></pre>\n\n<p>In the <a href=\"https://developer.android.com/guide/topics/ui/settings/#java\" rel=\"nofollow noreferrer\">oficial documentation</a>, they have <strong>androidx</strong> in the sample code, maybe that is the problem, you don't need it with support libraries</p>\n"}, {"comments": [{"owner": {"reputation": 1746, "user_id": 9509346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eInAz.jpg?s=128&g=1", "display_name": "dpapadopoulos", "link": "https://stackoverflow.com/users/9509346/dpapadopoulos"}, "edited": false, "score": 0, "creation_date": 1550646701, "post_id": 54780441, "comment_id": 96340099, "body": "Try to be more specific. Analyze your answer."}], "tags": [], "owner": {"reputation": 1432, "user_id": 10020712, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9pyXt.jpg?s=128&g=1", "display_name": "Abdurahman Popal", "link": "https://stackoverflow.com/users/10020712/abdurahman-popal"}, "is_accepted": false, "score": 1, "last_activity_date": 1570901805, "last_edit_date": 1570901805, "creation_date": 1550645462, "answer_id": 54780441, "question_id": 53615637, "link": "https://stackoverflow.com/questions/53615637/androidx-preference-preferencescreen-not-found-when-creating-preferences-screen/54780441#54780441", "title": "androidx.preference.PreferenceScreen not found when creating Preferences screen", "body": "<p>if you want to use <code>PreferenceFragmentCompat</code> first you need to implement the following dependency in you app level gradle.</p>\n\n<pre><code>implementation 'androidx.preference:preference:1.0.0\n</code></pre>\n"}], "owner": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10316, "favorite_count": 0, "accepted_answer_id": 53615855, "answer_count": 3, "score": 11, "last_activity_date": 1570901805, "creation_date": 1543935354, "last_edit_date": 1543936083, "question_id": 53615637, "link": "https://stackoverflow.com/questions/53615637/androidx-preference-preferencescreen-not-found-when-creating-preferences-screen", "title": "androidx.preference.PreferenceScreen not found when creating Preferences screen", "body": "<p>After following <a href=\"https://developer.android.com/guide/topics/ui/settings/\" rel=\"noreferrer\">this tutorial</a> to create a screen for preferences, there seems to be a problem with inflating the class 'androidx.preference.PreferenceScreen'. Why is it not found when my preferences have been declared inside the <code>res/xml</code> folder and the necessary dependency has been added to this project? </p>\n\n<p>My app's minSdkVersion is 24.</p>\n\n<blockquote>\n  <p>Error inflating class (not found)androidx.preference.PreferenceScreen</p>\n</blockquote>\n\n<p><strong>dependencies</strong></p>\n\n<pre><code>dependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\n    implementation 'com.android.support:appcompat-v7:28.0.0'\n    implementation 'com.android.support:cardview-v7:28.0.0'\n    implementation 'com.android.support.constraint:constraint-layout:1.1.3'\n    implementation 'com.android.support:preference-v7:28.0.0'\n    implementation 'com.android.support:recyclerview-v7:28.0.0'\n    implementation 'com.android.support:support-v4:28.0.0'\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'com.android.support.test:runner:1.0.2'\n    androidTestImplementation 'com.android.support.test.espresso:espresso-core:3.0.2'\n}\n</code></pre>\n\n<p><strong>res/xml/preferences.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;androidx.preference.PreferenceScreen\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt;\n\n    &lt;CheckBoxPreference\n        android:key=\"preference_a\"\n        android:defaultValue=\"false\"\n        android:title=\"Preference A\" /&gt;\n\n&lt;/androidx.preference.PreferenceScreen&gt;\n</code></pre>\n\n<p><strong>Activity layout</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:id=\"@+id/settings_container\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"vertical\"\n    tools:context=\".MySettingsActivity\" /&gt;\n</code></pre>\n\n<p>Activity class</p>\n\n<pre><code>class MySettingsActivity : AppCompatActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        supportFragmentManager\n                .beginTransaction()\n                .replace(R.id.settings_container, MySettingsFragment())\n                .commit()\n    }\n}\n</code></pre>\n\n<p>Fragment class</p>\n\n<pre><code>class MySettingsFragment : PreferenceFragmentCompat() {\n    override fun onCreatePreferences(savedInstanceState: Bundle?, rootKey: String?) {\n        addPreferencesFromResource(R.xml.app_preferences)\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "bottomnavigationview", "android-jetpack", "androidx"], "answers": [{"tags": [], "owner": {"reputation": 1861, "user_id": 2793036, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/aiInx.jpg?s=128&g=1", "display_name": "Rishabh876", "link": "https://stackoverflow.com/users/2793036/rishabh876"}, "is_accepted": false, "score": 0, "last_activity_date": 1543937721, "creation_date": 1543937721, "answer_id": 53616407, "question_id": 53615163, "link": "https://stackoverflow.com/questions/53615163/res-not-found-in-bottomnavigationview-androidx/53616407#53616407", "title": "Res not found in BottomNavigationView (AndroidX)", "body": "<p>Ok I found the solution <a href=\"https://github.com/material-components/material-components-android/issues/226\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Basically I have </p>\n\n<pre><code>&lt;item name=\"android:textColorSecondary\"&gt;#000&lt;/item&gt;\n</code></pre>\n\n<p>defined in my activity theme.</p>\n\n<p>Material component don't like single color. Color state list would have worked.</p>\n"}], "owner": {"reputation": 1861, "user_id": 2793036, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/aiInx.jpg?s=128&g=1", "display_name": "Rishabh876", "link": "https://stackoverflow.com/users/2793036/rishabh876"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1074, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1543937721, "creation_date": 1543933786, "question_id": 53615163, "link": "https://stackoverflow.com/questions/53615163/res-not-found-in-bottomnavigationview-androidx", "title": "Res not found in BottomNavigationView (AndroidX)", "body": "<p>I was trying to migrate my code to AndroidX. But the new <code>BottomNavigationView</code> is not initialising properly. I am getting the following Exception during layout inflation.</p>\n\n<blockquote>\n  <p>Caused by: android.content.res.Resources$NotFoundException: Resource ID #0x0\n          at android.content.res.ResourcesImpl.getValue(ResourcesImpl.java:216)\n          at android.content.res.Resources.getColorStateList(Resources.java:1043)\n          at android.content.Context.getColorStateList(Context.java:642) </p>\n  \n  <p>E/AndroidRuntime:     at\n  androidx.appcompat.content.res.AppCompatResources.getColorStateList(AppCompatResources.java:67)\n          at com.google.android.material.bottomnavigation.BottomNavigationMenuView.createDefaultColorStateList(BottomNavigationMenuView.java:467)\n          at com.google.android.material.bottomnavigation.BottomNavigationMenuView.(BottomNavigationMenuView.java:101)\n          at com.google.android.material.bottomnavigation.BottomNavigationMenuView.(BottomNavigationMenuView.java:86)\n          at com.google.android.material.bottomnavigation.BottomNavigationView.(BottomNavigationView.java:123)\n          at com.google.android.material.bottomnavigation.BottomNavigationView.(BottomNavigationView.java:114)2018-12-04 19:37:28.699 4450-4450/com.myapp</p>\n</blockquote>\n\n<p>My xml looks like this</p>\n\n<pre><code>&lt;com.google.android.material.bottomnavigation.BottomNavigationView\n    android:id=\"@+id/bottom_navigation\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:background=\"@android:color/white\"\n    app:itemHorizontalTranslationEnabled=\"false\"\n    app:itemIconTint=\"@color/home_bottom_nav_menu_item_color\"\n    app:itemTextColor=\"@color/home_bottom_nav_menu_item_color\"\n    app:layout_constraintBottom_toBottomOf=\"parent\"\n    app:menu=\"@menu/home_bottom_nav_menu\" /&gt;\n</code></pre>\n\n<p>Is there some change in the BottomNavigationView library that I am missing?</p>\n"}, {"tags": ["java", "spring", "kotlin"], "comments": [{"owner": {"reputation": 1682, "user_id": 122742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DF9Vs.jpg?s=128&g=1", "display_name": "Andre Artus", "link": "https://stackoverflow.com/users/122742/andre-artus"}, "edited": false, "score": 0, "creation_date": 1543932046, "post_id": 53614539, "comment_id": 94089877, "body": "Have you tried implementing a <code>BeanFactory</code>?"}, {"owner": {"reputation": 1019, "user_id": 684562, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/4T5zR.jpg?s=128&g=1", "display_name": "Augusto", "link": "https://stackoverflow.com/users/684562/augusto"}, "reply_to_user": {"reputation": 1682, "user_id": 122742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DF9Vs.jpg?s=128&g=1", "display_name": "Andre Artus", "link": "https://stackoverflow.com/users/122742/andre-artus"}, "edited": false, "score": 0, "creation_date": 1543933767, "post_id": 53614539, "comment_id": 94090962, "body": "@AndreArtus I know it&#39;s possible to create the map in a <code>BeanFactory</code> or even with a <code>Bean</code> in a <code>Configuration</code> class, but I was just wondering if this approach I asked is possible..."}, {"owner": {"reputation": 1682, "user_id": 122742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DF9Vs.jpg?s=128&g=1", "display_name": "Andre Artus", "link": "https://stackoverflow.com/users/122742/andre-artus"}, "edited": false, "score": 0, "creation_date": 1543940572, "post_id": 53614539, "comment_id": 94095141, "body": "I don&#39;t know if it&#39;s possible out of the [metaphorical] box. I know you can pass a map via XML config, but you want to pick it up through reflection (if I understand the question)."}, {"owner": {"reputation": 1019, "user_id": 684562, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/4T5zR.jpg?s=128&g=1", "display_name": "Augusto", "link": "https://stackoverflow.com/users/684562/augusto"}, "reply_to_user": {"reputation": 1682, "user_id": 122742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DF9Vs.jpg?s=128&g=1", "display_name": "Andre Artus", "link": "https://stackoverflow.com/users/122742/andre-artus"}, "edited": false, "score": 1, "creation_date": 1544000259, "post_id": 53614539, "comment_id": 94116613, "body": "@AndreArtus exactly... I currently have a <code>@Configuration</code> class creating a <code>@Bean</code> for this map, which works but it is not what I wanted..."}], "owner": {"reputation": 1019, "user_id": 684562, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/4T5zR.jpg?s=128&g=1", "display_name": "Augusto", "link": "https://stackoverflow.com/users/684562/augusto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1543931714, "creation_date": 1543931714, "question_id": 53614539, "link": "https://stackoverflow.com/questions/53614539/spring-autowiring-all-beans-from-qualifier-in-map", "title": "Spring Autowiring all beans from Qualifier in Map", "body": "<p>Is it possible to have a custom <code>qualifier</code> in spring and return in a <code>Map&lt;MyEnum, Bean&gt;</code>?\nExample code: </p>\n\n<pre><code>enum class MyEnum {\n  TYPE1,\n  TYPE2\n}\n\n@Target(AnnotationTarget.CLASS)\n@Retention(AnnotationRetention.RUNTIME)\n@Qualifier\nannotation class MyQualifier(val value: MyEnum)\n\n\ninterface BaseBean\n\n@Service\n@MyQualifier(MyEnum.TYPE1)\nclass Bean1: BaseBean\n\n@Service\n@MyQualifier(MyEnum.TYPE2)\nclass Bean2: BaseBean\n\n@Service\nclass MyService @Autowired constructor(private val types: Map&lt; MyEnum, BaseBean&gt;)\n</code></pre>\n\n<p>So how could I inject all the beans with my custom qualifier into this <code>Map</code>? in the <code>service</code>? Is there a way to do this?</p>\n"}, {"tags": ["kotlin", "typechecking", "kotlin-when"], "comments": [{"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 1, "creation_date": 1543929655, "post_id": 53613862, "comment_id": 94088473, "body": "<code>is Red, is Green, is Blue -&gt; ...</code>"}], "answers": [{"tags": [], "owner": {"reputation": 2105, "user_id": 8718773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34213fbac0a5b09b9ff8abe458e6b87a?s=128&d=identicon&r=PG&f=1", "display_name": "Giacomo Alzetta", "link": "https://stackoverflow.com/users/8718773/giacomo-alzetta"}, "is_accepted": true, "score": 4, "last_activity_date": 1543929709, "creation_date": 1543929709, "answer_id": 53613959, "question_id": 53613862, "link": "https://stackoverflow.com/questions/53613862/check-for-several-type-inside-when-statement-in-kotlin/53613959#53613959", "title": "Check for several type inside when statement in Kotlin", "body": "<p>Yes. According to the grammar of <a href=\"https://kotlinlang.org/docs/reference/grammar.html#when\" rel=\"nofollow noreferrer\"><code>when</code></a></p>\n\n<pre>\n\nwhen\n  : \"when\" (\"(\" expression \")\")? \"{\"\n        whenEntry*\n    \"}\"\n  ;\nwhenEntry\n  : <b>whenCondition{\",\"}</b> \"->\" controlStructureBody SEMI\n  : \"else\" \"->\" controlStructureBody SEMI\n  ;\nwhenCondition\n  : expression\n  : (\"in\" | \"!in\") expression\n  : <b>(\"is\" | \"!is\") type</b>\n  ;\n\n</pre>\n\n<p>the <code>{\",\"}</code> means the element can be repeated more times separated by commas. Note however that you have to repeat <code>is</code> too and smartcasts wont work if you do with different unrelated types.</p>\n"}, {"comments": [{"owner": {"reputation": 2105, "user_id": 8718773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34213fbac0a5b09b9ff8abe458e6b87a?s=128&d=identicon&r=PG&f=1", "display_name": "Giacomo Alzetta", "link": "https://stackoverflow.com/users/8718773/giacomo-alzetta"}, "edited": false, "score": 0, "creation_date": 1544014852, "post_id": 53619723, "comment_id": 94125225, "body": "It just occurred to me that what the OP wrote might even work... it will check for the type for <code>Red</code> and the value for <code>Green</code> and <code>Blue</code>. I assumed that the OP had already tried their suggested solution but they probably didn&#39;t (luckily, so now we all have a little bit clearer the possible choices). Thanks for the additional insights."}], "tags": [], "owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "is_accepted": false, "score": 1, "last_activity_date": 1543949976, "creation_date": 1543949976, "answer_id": 53619723, "question_id": 53613862, "link": "https://stackoverflow.com/questions/53613862/check-for-several-type-inside-when-statement-in-kotlin/53619723#53619723", "title": "Check for several type inside when statement in Kotlin", "body": "<p>In addition to the other answers, you can do it slightly more concisely by omitting the <code>is</code> entirely:</p>\n\n<pre><code>when (color) {\n    Red, Green, Blue -&gt; // ...\n    Pink -&gt; // ...\n    Yellow -&gt; // ... \n}\n</code></pre>\n\n<p>This is checking the <em>values</em> for equality, unlike the <code>is</code> code which is checking the <em>types</em>.  (Red, Green, &amp;c are objects as well as types, which is why both work.  I suspect that this way may be fractionally more efficient, too.)</p>\n"}], "owner": {"reputation": 5882, "user_id": 1370087, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/g3ak7.jpg?s=128&g=1", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/1370087/benjamin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 53613959, "answer_count": 2, "score": 0, "last_activity_date": 1543949976, "creation_date": 1543929394, "question_id": 53613862, "link": "https://stackoverflow.com/questions/53613862/check-for-several-type-inside-when-statement-in-kotlin", "title": "Check for several type inside when statement in Kotlin", "body": "<p>Let's say I've the following:</p>\n\n<pre><code>sealed class Color(val name: String) {\n    object Red : Color(\"red\")\n    object Green : Color(\"green\")\n    object Blue : Color(\"blue\")\n    object Pink : Color(\"pink\")\n    object Yellow : Color(\"yellow\")\n}\n</code></pre>\n\n<p>Is it possible to check if a color is a primary one using a when statement i.e.:</p>\n\n<pre><code>when(color) {\n    is Red, Green, Blue -&gt; // primary color work\n    is Pink -&gt; // pink color work\n    is Yellow -&gt; // yellow color work\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-mediaplayer"], "answers": [{"tags": [], "owner": {"reputation": 203, "user_id": 1608975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c177d1ce8e25b83b27cf8d2589536e40?s=128&d=identicon&r=PG", "display_name": "SproutinGeek", "link": "https://stackoverflow.com/users/1608975/sproutingeek"}, "is_accepted": false, "score": 1, "last_activity_date": 1548674476, "creation_date": 1548674476, "answer_id": 54400893, "question_id": 53612826, "link": "https://stackoverflow.com/questions/53612826/media-player-not-playing-mp3-on-android-api-28/54400893#54400893", "title": "Media player not playing mp3 on Android API 28", "body": "<p>Ahh.. I found out the reason after spending quite a bit of time. </p>\n\n<p>The problem was, starting with Android 9.0 (API level 28), cleartext http traffic support is disabled by default.</p>\n\n<p>and <a href=\"https://codelabs.developers.google.com/codelabs/android-network-security-config/index.html#3\" rel=\"nofollow noreferrer\">this code lab</a> helped. </p>\n"}, {"tags": [], "owner": {"reputation": 204, "user_id": 5532780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jIZn.jpg?s=128&g=1", "display_name": "Kiki.J.Hu", "link": "https://stackoverflow.com/users/5532780/kiki-j-hu"}, "is_accepted": false, "score": 5, "last_activity_date": 1557883322, "last_edit_date": 1557883322, "creation_date": 1557882634, "answer_id": 56140540, "question_id": 53612826, "link": "https://stackoverflow.com/questions/53612826/media-player-not-playing-mp3-on-android-api-28/56140540#56140540", "title": "Media player not playing mp3 on Android API 28", "body": "<p>You may meet media player error when playing http live streaming on Android 9 (API 28)</p>\n\n<p>2019-05-14 19:05:31.671 9198-9214/com.xxx.sample E/MediaPlayerNative: error (1, -2147483648)\n2019-05-14 19:05:31.672 9198-9198/com.xxx.sample E/MediaPlayer: Error (1,-2147483648)</p>\n\n<p><a href=\"https://developer.android.com/training/articles/security-config?hl=en-us\" rel=\"noreferrer\">https://developer.android.com/training/articles/security-config?hl=en-us</a></p>\n\n<p>The default configuration for apps targeting Android 9 (API level 28) and higher is as follows:</p>\n\n<pre><code>&lt;base-config cleartextTrafficPermitted=\"false\"&gt;\n\u00a0 \u00a0 &lt;trust-anchors&gt;\n\u00a0 \u00a0 \u00a0 \u00a0 &lt;certificates src=\"system\" /&gt;\n\u00a0 \u00a0 &lt;/trust-anchors&gt;\n&lt;/base-config&gt;\n</code></pre>\n\n<p>\u00a0</p>\n\n<p>The default configuration for apps targeting Android 7.0 (API level 24) to Android 8.1 (API level 27) is as follows:</p>\n\n<pre><code>&lt;base-config cleartextTrafficPermitted=\"true\"&gt;\n\u00a0 \u00a0 &lt;trust-anchors&gt;\n\u00a0 \u00a0 \u00a0 \u00a0 &lt;certificates src=\"system\" /&gt;\n\u00a0 \u00a0 &lt;/trust-anchors&gt;\n&lt;/base-config&gt;\n</code></pre>\n\n<p>\u00a0</p>\n\n<p>The default configuration for apps targeting Android 6.0 (API level 23) and lower is as follows:</p>\n\n<pre><code>&lt;base-config cleartextTrafficPermitted=\"true\"&gt;\n\u00a0 \u00a0 &lt;trust-anchors&gt;\n\u00a0 \u00a0 \u00a0 \u00a0 &lt;certificates src=\"system\" /&gt;\n\u00a0 \u00a0 \u00a0 \u00a0 &lt;certificates src=\"user\" /&gt;\n\u00a0 \u00a0 &lt;/trust-anchors&gt;\n&lt;/base-config&gt;\n</code></pre>\n\n<p>So if you want to play http live straming on API 28, you should change your network configuration.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;network-security-config&gt;\n    &lt;base-config cleartextTrafficPermitted=\"true\"&gt;\n    &lt;/base-config&gt;\n&lt;/network-security-config&gt;\n\n&lt;application\n    android:label=\"@string/app_name\"\n    android:usesCleartextTraffic=\"true\"\n    android:networkSecurityConfig=\"@xml/network_security_config\"&gt;\n&lt;/application&gt;\n</code></pre>\n"}], "owner": {"reputation": 203, "user_id": 1608975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c177d1ce8e25b83b27cf8d2589536e40?s=128&d=identicon&r=PG", "display_name": "SproutinGeek", "link": "https://stackoverflow.com/users/1608975/sproutingeek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1887, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1557883322, "creation_date": 1543925951, "last_edit_date": 1543927022, "question_id": 53612826, "link": "https://stackoverflow.com/questions/53612826/media-player-not-playing-mp3-on-android-api-28", "title": "Media player not playing mp3 on Android API 28", "body": "<p>I am trying to build a dictionary app . and dictionary api provide me the url for the mp3 file. I am using this code to play the mp3 .</p>\n\n<p>This works in all the versions of android except the API 28. </p>\n\n<p>What happens in API 28 is \n- It lake more than 2 minute to hit the setOnPreparedListener (not every time)\n- then goes to setOnCompletionListener with out any sound.   </p>\n\n<p>Any suggestions about what went wrong is highly appreciated.         </p>\n\n<pre><code>     mediaPlayer?.apply {\n            if(isPlaying){\n                return\n            }\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {\n                var builder = AudioAttributes.Builder()\n                builder.setContentType(AudioAttributes.CONTENT_TYPE_MUSIC)\n                builder.setLegacyStreamType(AudioManager.STREAM_MUSIC)\n                setAudioAttributes(builder.build())\n            }\n            setOnBufferingUpdateListener(this@WordHomeVM)\n            setOnCompletionListener(this@WordHomeVM)\n            setDataSource(urlString)\n            setOnPreparedListener { mPlayer -&gt;\n                if (!isPlaying) {\n                    start()\n                }\n            }\n            prepareAsync()\n        }\n</code></pre>\n\n<p>and Here is the only relevant log I get.</p>\n\n<pre><code>    2018-12-04 13:22:58.241 5772-5911/ E/MediaPlayerNative: error (1, -2147483648)\n    2018-12-04 13:22:58.247 5772-5772/E/MediaPlayer: Error (1,-2147483648)\n</code></pre>\n"}, {"tags": ["java", "spring-boot", "tomcat", "kotlin", "objectbox"], "comments": [{"owner": {"reputation": 6568, "user_id": 551269, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6hGbq.jpg?s=128&g=1", "display_name": "Markus Junginger", "link": "https://stackoverflow.com/users/551269/markus-junginger"}, "edited": false, "score": 0, "creation_date": 1543929704, "post_id": 53612817, "comment_id": 94088507, "body": "Please check if there is more error info that &quot;no objectbox-jni-windows-x64 in java.library.path&quot;? Do you have this: <a href=\"https://support.microsoft.com/en-us/help/2977003/the-latest-supported-visual-c-downloads\" rel=\"nofollow noreferrer\">support.microsoft.com/en-us/help/2977003/&hellip;</a> ?"}, {"owner": {"reputation": 26, "user_id": 7146325, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Al95zZ9SQCE/AAAAAAAAAAI/AAAAAAAABC0/U1wahoLGlh4/photo.jpg?sz=128", "display_name": "Shripal Jain", "link": "https://stackoverflow.com/users/7146325/shripal-jain"}, "reply_to_user": {"reputation": 6568, "user_id": 551269, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6hGbq.jpg?s=128&g=1", "display_name": "Markus Junginger", "link": "https://stackoverflow.com/users/551269/markus-junginger"}, "edited": false, "score": 0, "creation_date": 1544019328, "post_id": 53612817, "comment_id": 94127904, "body": "1. The log shows only &quot;no objectbox-jni-windows-x64 in java.library.path&quot; as relevant error 2. Yes i do have the Visual C++ Package Installed: 2017 - x86 and x64 along with Visual Studio Build Tools 2017"}, {"owner": {"reputation": 26, "user_id": 7146325, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Al95zZ9SQCE/AAAAAAAAAAI/AAAAAAAABC0/U1wahoLGlh4/photo.jpg?sz=128", "display_name": "Shripal Jain", "link": "https://stackoverflow.com/users/7146325/shripal-jain"}, "reply_to_user": {"reputation": 6568, "user_id": 551269, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6hGbq.jpg?s=128&g=1", "display_name": "Markus Junginger", "link": "https://stackoverflow.com/users/551269/markus-junginger"}, "edited": false, "score": 0, "creation_date": 1544452493, "post_id": 53612817, "comment_id": 94270091, "body": "For a temporary fix: I ran the project from IntelliJ IDEA itself as stated above, copied the DLL generated in the Project Folder to my ObjectBox Database Folder"}, {"owner": {"reputation": 6568, "user_id": 551269, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6hGbq.jpg?s=128&g=1", "display_name": "Markus Junginger", "link": "https://stackoverflow.com/users/551269/markus-junginger"}, "edited": false, "score": 0, "creation_date": 1544454825, "post_id": 53612817, "comment_id": 94271472, "body": "Speaking of DLLs; might be that Tomcat might require a special setup for them: e.g. 2nd answer here: <a href=\"https://stackoverflow.com/questions/14018817/how-to-add-a-native-library-in-tomcat\" title=\"how to add a native library in tomcat\">stackoverflow.com/questions/14018817/&hellip;</a>"}, {"owner": {"reputation": 26, "user_id": 7146325, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Al95zZ9SQCE/AAAAAAAAAAI/AAAAAAAABC0/U1wahoLGlh4/photo.jpg?sz=128", "display_name": "Shripal Jain", "link": "https://stackoverflow.com/users/7146325/shripal-jain"}, "reply_to_user": {"reputation": 6568, "user_id": 551269, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6hGbq.jpg?s=128&g=1", "display_name": "Markus Junginger", "link": "https://stackoverflow.com/users/551269/markus-junginger"}, "edited": false, "score": 0, "creation_date": 1544544246, "post_id": 53612817, "comment_id": 94309543, "body": "I saw that post, can you help me out to set it up for ObjectBox?"}, {"owner": {"reputation": 6568, "user_id": 551269, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6hGbq.jpg?s=128&g=1", "display_name": "Markus Junginger", "link": "https://stackoverflow.com/users/551269/markus-junginger"}, "edited": false, "score": 0, "creation_date": 1544549366, "post_id": 53612817, "comment_id": 94312428, "body": "You already have the DLL, no? Try to make it available to Tomcat (haven&#39;t touched it for a long time...)."}], "owner": {"reputation": 26, "user_id": 7146325, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Al95zZ9SQCE/AAAAAAAAAAI/AAAAAAAABC0/U1wahoLGlh4/photo.jpg?sz=128", "display_name": "Shripal Jain", "link": "https://stackoverflow.com/users/7146325/shripal-jain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 227, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1543925923, "creation_date": 1543925923, "question_id": 53612817, "link": "https://stackoverflow.com/questions/53612817/using-objectbox-as-server-database-with-spring-boot-and-tomcat", "title": "Using ObjectBox as Server Database with Spring Boot and Tomcat", "body": "<p>I am trying to use ObjectBox as a server database with Spring Boot and Tomcat\nWhen i use the embedded tomcat server of Spring Boot, it works fine (running directly from IntelliJ IDEA),</p>\n\n<p>But when i deploy the WAR file / exploded API to Tomcat, i get the error \"no objectbox-jni-windows-x64 in java.library.path\"</p>\n\n<p>I do have Microsoft Visual C++ 2017 installed</p>\n\n<p>Can you please help me to deploy it successfully?</p>\n\n<p>The following is my build.gradle file:</p>\n\n<pre><code>buildscript {\n    ext {\n        kotlinVersion = '1.3.10'\n        springBootVersion = '2.1.1.RELEASE'\n        objectboxVersion = '2.2.0'\n    }\n    repositories {\n        mavenCentral()\n        maven { url \"https://plugins.gradle.org/m2/\" }\n        jcenter()\n    }\n    dependencies {\n        classpath(\"org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}\")\n        classpath(\"org.jetbrains.kotlin:kotlin-gradle-plugin:${kotlinVersion}\")\n        classpath(\"org.jetbrains.kotlin:kotlin-allopen:${kotlinVersion}\")\n        classpath \"io.objectbox:objectbox-gradle-plugin:$objectboxVersion\"\n        classpath \"net.ltgt.gradle:gradle-apt-plugin:0.15\"\n\n    }\n}\nplugins {\n    id 'java'\n    id 'org.jetbrains.kotlin.jvm' version '1.3.10'\n}\n\napply plugin: 'application'\napply plugin: 'kotlin'\napply plugin: 'kotlin-spring'\napply plugin: 'eclipse-wtp'\napply plugin: 'org.springframework.boot'\napply plugin: 'io.spring.dependency-management'\napply plugin: 'war'\napply plugin: 'java'\napply plugin: 'idea'\napply plugin: 'io.objectbox'\napply plugin: 'kotlin-kapt'\napply plugin: 'net.ltgt.apt-idea'\n\ngroup = 'com.techontouch'\nversion = '0.0.1-SNAPSHOT'\nsourceCompatibility = 1.8\nmainClassName = \"ScoresOnTouchApplicationKt\"\ncompileKotlin {\n    kotlinOptions {\n        freeCompilerArgs = [\"-Xjsr305=strict\"]\n        jvmTarget = \"1.8\"\n    }\n}\ncompileTestKotlin {\n    kotlinOptions {\n        freeCompilerArgs = [\"-Xjsr305=strict\"]\n        jvmTarget = \"1.8\"\n    }\n}\n\nrepositories {\n    mavenCentral()\n    jcenter()\n}\n\nconfigurations {\n    providedRuntime\n}\n\ndependencies {\n    implementation('org.springframework.boot:spring-boot-starter-actuator')\n    implementation('org.springframework.boot:spring-boot-starter-data-rest')\n    implementation('org.springframework.boot:spring-boot-starter-web')\n    implementation('com.fasterxml.jackson.module:jackson-module-kotlin')\n    providedRuntime('org.springframework.boot:spring-boot-starter-tomcat')\n    testImplementation('org.springframework.boot:spring-boot-starter-test')\n    implementation \"io.objectbox:objectbox-java:$objectboxVersion\"\n    implementation \"io.objectbox:objectbox-kotlin:$objectboxVersion\"\n    kapt \"io.objectbox:objectbox-processor:$objectboxVersion\"\n    implementation \"io.objectbox:objectbox-linux:$objectboxVersion\"\n    implementation \"io.objectbox:objectbox-macos:$objectboxVersion\"\n    implementation \"io.objectbox:objectbox-windows:$objectboxVersion\"\n    implementation(\"org.jetbrains.kotlin:kotlin-stdlib-jdk8\")\n    implementation(\"org.jetbrains.kotlin:kotlin-reflect\")\n    compile('org.json:json:20180813')\n    compile('com.google.code.gson:gson:2.8.5')\n    compile('javax.xml.bind:jaxb-api:2.2.8')\n    compile('io.springfox:springfox-swagger2:2.9.2')\n    compile('io.springfox:springfox-swagger-ui:2.9.2')\n    compile('org.antlr:antlr-complete:3.5.2')\n}\n// enable debug output for plugin\nobjectbox {\n    debug = true\n}\n// enable debug output for annotation processor\ntasks.withType(JavaCompile) {\n    options.compilerArgs += [\"-Aobjectbox.debug=true\"]\n}\n</code></pre>\n\n<p>GitHub Link: <a href=\"https://github.com/objectbox/objectbox-java/issues/170#issuecomment-444075662\" rel=\"nofollow noreferrer\">https://github.com/objectbox/objectbox-java/issues/170#issuecomment-444075662</a></p>\n"}, {"tags": ["java", "mongodb", "spring-boot", "kotlin"], "comments": [{"owner": {"reputation": 2746, "user_id": 3656056, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/M9WLt.jpg?s=128&g=1", "display_name": "VelNaga", "link": "https://stackoverflow.com/users/3656056/velnaga"}, "edited": false, "score": 0, "creation_date": 1543922849, "post_id": 53611887, "comment_id": 94084668, "body": "Please update your question with spring-boot MongoRepository &amp; spring-boot model for this query? You can easily do it via spring-boot.I hope you tagged spring-boot so we can use spring-boot"}, {"owner": {"reputation": 567, "user_id": 4402290, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh6.googleusercontent.com/-1WigBHz4gHs/AAAAAAAAAAI/AAAAAAAAABA/AnYBvvBeYZQ/photo.jpg?sz=128", "display_name": "Mohanraj", "link": "https://stackoverflow.com/users/4402290/mohanraj"}, "reply_to_user": {"reputation": 2746, "user_id": 3656056, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/M9WLt.jpg?s=128&g=1", "display_name": "VelNaga", "link": "https://stackoverflow.com/users/3656056/velnaga"}, "edited": false, "score": 0, "creation_date": 1543923069, "post_id": 53611887, "comment_id": 94084799, "body": "@VelNaga I have updated the question"}, {"owner": {"reputation": 2746, "user_id": 3656056, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/M9WLt.jpg?s=128&g=1", "display_name": "VelNaga", "link": "https://stackoverflow.com/users/3656056/velnaga"}, "edited": false, "score": 0, "creation_date": 1543923164, "post_id": 53611887, "comment_id": 94084856, "body": "Where is your repository class? Could you please also paste you Report Bean?"}], "owner": {"reputation": 567, "user_id": 4402290, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh6.googleusercontent.com/-1WigBHz4gHs/AAAAAAAAAAI/AAAAAAAAABA/AnYBvvBeYZQ/photo.jpg?sz=128", "display_name": "Mohanraj", "link": "https://stackoverflow.com/users/4402290/mohanraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1543923266, "creation_date": 1543922623, "last_edit_date": 1543923266, "question_id": 53611887, "link": "https://stackoverflow.com/questions/53611887/java-filter-only-matched-object-from-list-of-objects-in-mongodb-document", "title": "Java - Filter only matched object from list of objects in Mongodb Document", "body": "<p>How to filter only matched object in list of objects in mongodb Java</p>\n\n<pre><code>&gt; db.reports.find({'productViews.productId' : {$lte: \"1234\"}},{\"productViews\" : 1})\n</code></pre>\n\n<p>returns</p>\n\n<pre><code>{ \"_id\" : ObjectId(\"5c062a2dfcd262039c7cb592\"),\n\"productViews\" : \n   [ \n    { \"productId\" : \"1234\", \"views\" : \"2\" },\n    { \"productId\" : \"3214\", \"views\" : \"34\" }\n   ] \n}\n</code></pre>\n\n<p>The above query return all the values of the array, but I want only the object which matches the provided object. Please advice how to do this in java </p>\n\n<pre><code>fun getProductViews(mongoDatabase: MongoDatabase) {\n    val report = mongoDatabase.getCollection(\"reports\")\n    val result = report.find(Filters.lte(\"productViews.productId\", \"20\"))\n    print(result)\n}\n\n\n@Document(collection = \"reports\")\ndata class Report(\n\n    @DateTimeFormat(iso = DateTimeFormat.ISO.DATE)\n    var reportId: String = Date().toString(),\n    var productViews: ArrayList&lt;ProductViews&gt;,\n    var categoryViews: ArrayList&lt;CategoryViews&gt;,\n  )\n</code></pre>\n"}, {"tags": ["android", "mvvm", "kotlin", "rx-java2", "android-viewmodel"], "comments": [{"owner": {"reputation": 1483, "user_id": 4985413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e62fc16e93211eedfbbe88487a6991a3?s=128&d=identicon&r=PG&f=1", "display_name": "Prashant", "link": "https://stackoverflow.com/users/4985413/prashant"}, "edited": false, "score": 0, "creation_date": 1543922636, "post_id": 53611703, "comment_id": 94084529, "body": "Change visibility of view on UI Thread in observeScreenState, that&#39;s the root cause"}, {"owner": {"reputation": 1894, "user_id": 787399, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/uJge5.png?s=128&g=1", "display_name": "Abhinav Saxena", "link": "https://stackoverflow.com/users/787399/abhinav-saxena"}, "edited": false, "score": 0, "creation_date": 1543922652, "post_id": 53611703, "comment_id": 94084537, "body": "Please see that you can do all the work in a method that Activity class provides, that is &quot;runOnUiThread(Runnable run)&quot; Where you can have that code inside that run method of that Runnable run that you pass in. That ensures that the work is done in the Ui Thread, the actual thread that created the components."}, {"owner": {"reputation": 5397, "user_id": 6275174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2VQA5.jpg?s=128&g=1", "display_name": "Nicola Gallazzi", "link": "https://stackoverflow.com/users/6275174/nicola-gallazzi"}, "edited": false, "score": 0, "creation_date": 1543922714, "post_id": 53611703, "comment_id": 94084582, "body": "The problem is that you&#39;re trying to make modifications to a UI view outside the main thread and that it&#39;s not permitted in Android"}], "answers": [{"comments": [{"owner": {"reputation": 4189, "user_id": 1250031, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/1a240a2fb6c5b130897e75d3082a061c?s=128&d=identicon&r=PG", "display_name": "DJ-DOO", "link": "https://stackoverflow.com/users/1250031/dj-doo"}, "edited": false, "score": 0, "creation_date": 1543935098, "post_id": 53614744, "comment_id": 94091752, "body": "I&#39;m not sure if I follow.  So I&#39;m observing both the screen state and the book list from the fragment.  In relation to <code>AndroidScheduler.mainThread()</code> . I am injecting that via my <code>RxModule()</code> . If you wouldn&#39;t mind elaborating on your answer I&#39;d greatly appreciate it"}, {"owner": {"reputation": 3424, "user_id": 856588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kg8G7.jpg?s=128&g=1", "display_name": "Maxim Volgin", "link": "https://stackoverflow.com/users/856588/maxim-volgin"}, "reply_to_user": {"reputation": 4189, "user_id": 1250031, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/1a240a2fb6c5b130897e75d3082a061c?s=128&d=identicon&r=PG", "display_name": "DJ-DOO", "link": "https://stackoverflow.com/users/1250031/dj-doo"}, "edited": false, "score": 0, "creation_date": 1543935484, "post_id": 53614744, "comment_id": 94091989, "body": "The only thing that matters in this case is that all UI logic must be executed on main thread, so if you have anything UI-related in <code>subscribe</code>, then you have to add <code>.observeOn(AndroidSchedulers.mainThread())</code> before it."}, {"owner": {"reputation": 4189, "user_id": 1250031, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/1a240a2fb6c5b130897e75d3082a061c?s=128&d=identicon&r=PG", "display_name": "DJ-DOO", "link": "https://stackoverflow.com/users/1250031/dj-doo"}, "edited": false, "score": 0, "creation_date": 1543936797, "post_id": 53614744, "comment_id": 94092809, "body": "ok, thank you.  That is what I have though.  I have <code>.doOnSubscribe{ScreenState.Loading</code> . I then have <code>.observeOn(mainThread)             .subscribeOn(ioThread)</code> . Can you tell me from my code above where I&#39;ve gone wrong?"}, {"owner": {"reputation": 3424, "user_id": 856588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kg8G7.jpg?s=128&g=1", "display_name": "Maxim Volgin", "link": "https://stackoverflow.com/users/856588/maxim-volgin"}, "reply_to_user": {"reputation": 4189, "user_id": 1250031, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/1a240a2fb6c5b130897e75d3082a061c?s=128&d=identicon&r=PG", "display_name": "DJ-DOO", "link": "https://stackoverflow.com/users/1250031/dj-doo"}, "edited": false, "score": 0, "creation_date": 1543937120, "post_id": 53614744, "comment_id": 94093037, "body": "There can be one more case, specifically when you call UI logic in custom observables or use RxBinding framework which does that, then you need to add <code>.subscribeOn(AndroidSchedulers.mainThread())</code>. This may be the case with your pull to refresh. Can you share some more code specifically about pull to refresh handling?"}, {"owner": {"reputation": 4189, "user_id": 1250031, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/1a240a2fb6c5b130897e75d3082a061c?s=128&d=identicon&r=PG", "display_name": "DJ-DOO", "link": "https://stackoverflow.com/users/1250031/dj-doo"}, "edited": false, "score": 0, "creation_date": 1543937577, "post_id": 53614744, "comment_id": 94093341, "body": "Sure so in my fragment I&#39;m setting up a listener, when pulled I just call the <code>viewmodel.getBookList()</code> again .   <code>private fun setUpSwipeToRefresh() {         swipe_to_refresh.setOnRefreshListener {             if (isNotRefreshing()) {                 viewModel.getBookList()             }         }     }</code>"}, {"owner": {"reputation": 3424, "user_id": 856588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kg8G7.jpg?s=128&g=1", "display_name": "Maxim Volgin", "link": "https://stackoverflow.com/users/856588/maxim-volgin"}, "reply_to_user": {"reputation": 4189, "user_id": 1250031, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/1a240a2fb6c5b130897e75d3082a061c?s=128&d=identicon&r=PG", "display_name": "DJ-DOO", "link": "https://stackoverflow.com/users/1250031/dj-doo"}, "edited": false, "score": 0, "creation_date": 1543944137, "post_id": 53614744, "comment_id": 94097026, "body": "Did you try my original suggestion (add .observeOn(AndroidSchedulers.mainThread()) after .observeScreenState())?"}], "tags": [], "owner": {"reputation": 3424, "user_id": 856588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kg8G7.jpg?s=128&g=1", "display_name": "Maxim Volgin", "link": "https://stackoverflow.com/users/856588/maxim-volgin"}, "is_accepted": false, "score": 0, "last_activity_date": 1543937301, "last_edit_date": 1543937301, "creation_date": 1543932455, "answer_id": 53614744, "question_id": 53611703, "link": "https://stackoverflow.com/questions/53611703/rx-java-only-the-original-thread-that-created-a-view-hierarchy/53614744#53614744", "title": "Rx Java - Only the original thread that created a view hierarchy", "body": "<p>Just add <code>.observeOn(AndroidSchedulers.mainThread())</code> after <code>.observeScreenState()</code> (import it first with <code>import rx.android.schedulers.AndroidSchedulers;</code>)</p>\n\n<p>All UI logic must be executed on main thread. So if you have anything UI-related in <code>subscribe</code>, you have to add <code>.observeOn(AndroidSchedulers.mainThread())</code> before it.</p>\n\n<p>There can be one more case, specifically when you call UI logic in custom observables or use <code>RxBinding</code> framework which does that, then you need to add <code>.subscribeOn(AndroidSchedulers.mainThread())</code>. This may be the case with your \"pull to refresh\" functionality.</p>\n"}], "owner": {"reputation": 4189, "user_id": 1250031, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/1a240a2fb6c5b130897e75d3082a061c?s=128&d=identicon&r=PG", "display_name": "DJ-DOO", "link": "https://stackoverflow.com/users/1250031/dj-doo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1414, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1543937301, "creation_date": 1543922050, "question_id": 53611703, "link": "https://stackoverflow.com/questions/53611703/rx-java-only-the-original-thread-that-created-a-view-hierarchy", "title": "Rx Java - Only the original thread that created a view hierarchy", "body": "<p>I am pretty new to Rx Java and I have seen this question answered a number of times here on SO but the answers that are given don't seem to work for me.  </p>\n\n<p>So here is my stack trace:</p>\n\n<pre><code>2018-12-04 10:51:03.072 17083-17227/com.doolin.gary.mybooks E/AndroidRuntime: FATAL EXCEPTION: RxCachedThreadScheduler-2\nProcess: com.test.test.mybooks, PID: 17083\nio.reactivex.exceptions.OnErrorNotImplementedException: Only the original thread that created a view hierarchy can touch its views.\n    at io.reactivex.internal.functions.Functions$OnErrorMissingConsumer.accept(Functions.java:704)\n    at io.reactivex.internal.functions.Functions$OnErrorMissingConsumer.accept(Functions.java:701)\n    at io.reactivex.internal.observers.LambdaObserver.onError(LambdaObserver.java:77)\n    at io.reactivex.internal.observers.LambdaObserver.onNext(LambdaObserver.java:67)\n    at io.reactivex.internal.operators.observable.ObservableHide$HideDisposable.onNext(ObservableHide.java:67)\n    at io.reactivex.internal.util.NotificationLite.accept(NotificationLite.java:246)\n    at io.reactivex.subjects.BehaviorSubject$BehaviorDisposable.test(BehaviorSubject.java:570)\n    at io.reactivex.subjects.BehaviorSubject$BehaviorDisposable.emitNext(BehaviorSubject.java:565)\n    at io.reactivex.subjects.BehaviorSubject.onNext(BehaviorSubject.java:268)\n    at com.test.test.mybooks.viewmodel.BookSearchViewModel$getBookList$1.accept(BookSearchViewModel.kt:35)\n    at com.test.test.mybooks.viewmodel.BookSearchViewModel$getBookList$1.accept(BookSearchViewModel.kt:19)\n    at io.reactivex.internal.observers.DisposableLambdaObserver.onSubscribe(DisposableLambdaObserver.java:42)\n    at retrofit2.adapter.rxjava2.BodyObservable$BodyObserver.onSubscribe(BodyObservable.java:46)\n    at retrofit2.adapter.rxjava2.CallExecuteObservable.subscribeActual(CallExecuteObservable.java:37)\n    at io.reactivex.Observable.subscribe(Observable.java:12030)\n    at retrofit2.adapter.rxjava2.BodyObservable.subscribeActual(BodyObservable.java:34)\n    at io.reactivex.Observable.subscribe(Observable.java:12030)\n    at io.reactivex.internal.operators.observable.ObservableDoOnLifecycle.subscribeActual(ObservableDoOnLifecycle.java:33)\n    at io.reactivex.Observable.subscribe(Observable.java:12030)\n    at io.reactivex.internal.operators.observable.ObservableObserveOn.subscribeActual(ObservableObserveOn.java:45)\n    at io.reactivex.Observable.subscribe(Observable.java:12030)\n    at io.reactivex.internal.operators.observable.ObservableSubscribeOn$SubscribeTask.run(ObservableSubscribeOn.java:96)\n    at io.reactivex.Scheduler$DisposeTask.run(Scheduler.java:579)\n    at io.reactivex.internal.schedulers.ScheduledRunnable.run(ScheduledRunnable.java:66)\n    at io.reactivex.internal.schedulers.ScheduledRunnable.call(ScheduledRunnable.java:57)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:301)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641)\n    at java.lang.Thread.run(Thread.java:764)\n Caused by: android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.\n    at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:7753)\n    at android.view.ViewRootImpl.focusableViewAvailable(ViewRootImpl.java:3773)\n    at android.view.ViewGroup.focusableViewAvailable(ViewGroup.java:917)\n    at android.view.ViewGroup.focusableViewAvailable(ViewGroup.java:917)\n    at android.view.ViewGroup.focusableViewAvailable(ViewGroup.java:917)\n    at android.view.ViewGroup.focusableViewAvailable(ViewGroup.java:917)\n    at android.view.ViewGroup.focusableViewAvailable(ViewGroup.java:917)\n    at android.view.ViewGroup.focusableViewAvailable(ViewGroup.java:917)\n    at android.view.ViewGroup.focusableViewAvailable(ViewGroup.java:917)\n    at android.view.View.setFlags(View.java:14096)\n    at android.view.View.setVisibility(View.java:9992)\n    at com.test.test.mybooks.view.search.SearchFragment$observeScreenState$1.accept(SearchFragment.kt:91)\n    at com.test.test.mybooks.view.search.SearchFragment$observeScreenState$1.accept(SearchFragment.kt:28)\n    at io.reactivex.internal.observers.LambdaObserver.onNext(LambdaObserver.java:63)\n2018-12-04 10:51:03.072 17083-17227/com.test.test.mybooks E/AndroidRuntime:     ... 26 more\n</code></pre>\n\n<p>I have a list of books that I retrieve via my view model:</p>\n\n<pre><code>class BookSearchViewModel @Inject constructor(private val app: Application,\n                                              private val bookRepository: BookRepository,\n                                              @Named(RxModule.IO_THREAD) private val ioThread: Scheduler,\n                                              @Named(RxModule.MAIN_THREAD) private val mainThread: Scheduler):\n    AndroidViewModel(app) {\n\n    private var disposables = CompositeDisposable()\n    private val screenState = BehaviorSubject.create&lt;ScreenState&gt;()\n    private val bookList = PublishSubject.create&lt;List&lt;BookSummary&gt;&gt;()\n\n    fun observeBookList(): Observable&lt;List&lt;BookSummary&gt;&gt; = bookList.hide()\n    fun observeScreenState(): Observable&lt;ScreenState&gt; = screenState.hide()\n\n    fun getBookList() {\n        disposables.add(bookRepository\n            .fetchBookList()\n            .doOnSubscribe { screenState.onNext(ScreenState.Loading(\"\")) }\n            .observeOn(mainThread)\n            .subscribeOn(ioThread)\n            .subscribe(this::handleBookListSuccess, this::handleBookListError))\n    }\n\n    override fun onCleared() {\n        disposables.dispose()\n        super.onCleared()\n    }\n\n    private fun handleBookListSuccess(bookList: List&lt;BookSummary&gt;) {\n        screenState.onNext(ScreenState.Success)\n        this.bookList.onNext(bookList)\n    }\n\n    private fun handleBookListError(error: Throwable) {\n       screenState.onNext(ScreenState.Error(getErrorMessage(error)))\n    }\n\n    private fun getErrorMessage(error: Throwable): String {\n        return if (error.message.isNullOrEmpty()) {\n            app.getString(R.string.book_list_error)\n        } else {\n            error.message!!\n        }\n    }\n}\n</code></pre>\n\n<p>This works perfectly well I am observing in my fragment as follows:</p>\n\n<pre><code>   private fun addUIObservers() {\n        disposables.add(viewModel.observeBookList()\n            .subscribe {\n                bookAdapter.loadBooks(it)\n            })\n    }\n\n    private fun observeScreenState() {\n        disposables.add (viewModel\n            .observeScreenState()\n            .subscribe { screenState -&gt;\n                when (screenState) {\n                    is ScreenState.Success -&gt; progress_layout.visibility = GONE\n                    is ScreenState.Loading -&gt; progress_layout.visibility = VISIBLE\n                    is ScreenState.Error -&gt; handleError(screenState)\n                }\n            })\n    }\n</code></pre>\n\n<p>So when the user clicks on a book item I then open a book details activity and with via it's view model retrieve the book using the same pattern, using rx and observing in the activity.</p>\n\n<p>When I hit back and return to the previous activity/fragment, if I pull to refresh, I get the above error.  This only occurs when returning back from the details activity.  As I said I'm very new to RX so please go easy on me but if anyone has any tips.  Please don't mark this as already answered as those answers don't work for me and I am observing and subscribing to and on the correct threads.</p>\n"}, {"tags": ["android", "kotlin", "facebook-android-sdk"], "comments": [{"owner": {"reputation": 16268, "user_id": 603270, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cbfe6e57e0fa59928be4898a7be08c5d?s=128&d=identicon&r=PG", "display_name": "shkschneider", "link": "https://stackoverflow.com/users/603270/shkschneider"}, "edited": false, "score": 0, "creation_date": 1543920910, "post_id": 53611178, "comment_id": 94083612, "body": "Hi. We lack of information here. Where is <code>fb_login_button.setOnClickListener()</code> called? What is &quot;OnActivity&quot; that gets called twice? Show us <code>SignIN</code> also please."}, {"owner": {"reputation": 135, "user_id": 10731949, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wF644xBspUQ/AAAAAAAAAAI/AAAAAAAAAAc/AYJLZ-xN-ew/photo.jpg?sz=128", "display_name": "f158087 Muhammad Zohaib", "link": "https://stackoverflow.com/users/10731949/f158087-muhammad-zohaib"}, "reply_to_user": {"reputation": 16268, "user_id": 603270, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cbfe6e57e0fa59928be4898a7be08c5d?s=128&d=identicon&r=PG", "display_name": "shkschneider", "link": "https://stackoverflow.com/users/603270/shkschneider"}, "edited": false, "score": 0, "creation_date": 1543921089, "post_id": 53611178, "comment_id": 94083699, "body": "it is located in override fun onCreate(savedInstanceState: Bundle?)"}, {"owner": {"reputation": 135, "user_id": 10731949, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wF644xBspUQ/AAAAAAAAAAI/AAAAAAAAAAc/AYJLZ-xN-ew/photo.jpg?sz=128", "display_name": "f158087 Muhammad Zohaib", "link": "https://stackoverflow.com/users/10731949/f158087-muhammad-zohaib"}, "reply_to_user": {"reputation": 16268, "user_id": 603270, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cbfe6e57e0fa59928be4898a7be08c5d?s=128&d=identicon&r=PG", "display_name": "shkschneider", "link": "https://stackoverflow.com/users/603270/shkschneider"}, "edited": false, "score": 0, "creation_date": 1543921159, "post_id": 53611178, "comment_id": 94083745, "body": "override fun onCreate(savedInstanceState: Bundle?){ super.onCreate(savedInstanceState)         setContentView(R.layout.sign_in)  fb_login_button.setOnClickListener({             callbackManager = CallbackManager.Factory.create()"}, {"owner": {"reputation": 135, "user_id": 10731949, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wF644xBspUQ/AAAAAAAAAAI/AAAAAAAAAAc/AYJLZ-xN-ew/photo.jpg?sz=128", "display_name": "f158087 Muhammad Zohaib", "link": "https://stackoverflow.com/users/10731949/f158087-muhammad-zohaib"}, "reply_to_user": {"reputation": 16268, "user_id": 603270, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cbfe6e57e0fa59928be4898a7be08c5d?s=128&d=identicon&r=PG", "display_name": "shkschneider", "link": "https://stackoverflow.com/users/603270/shkschneider"}, "edited": false, "score": 0, "creation_date": 1543921267, "post_id": 53611178, "comment_id": 94083800, "body": "SignIN is the activity name... this is the same activity in which these functions are written"}, {"owner": {"reputation": 135, "user_id": 10731949, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wF644xBspUQ/AAAAAAAAAAI/AAAAAAAAAAc/AYJLZ-xN-ew/photo.jpg?sz=128", "display_name": "f158087 Muhammad Zohaib", "link": "https://stackoverflow.com/users/10731949/f158087-muhammad-zohaib"}, "reply_to_user": {"reputation": 16268, "user_id": 603270, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cbfe6e57e0fa59928be4898a7be08c5d?s=128&d=identicon&r=PG", "display_name": "shkschneider", "link": "https://stackoverflow.com/users/603270/shkschneider"}, "edited": false, "score": 0, "creation_date": 1543923169, "post_id": 53611178, "comment_id": 94084862, "body": "I receive result code=-1 both times... it runs both times and log me in but why twice"}, {"owner": {"reputation": 135, "user_id": 10731949, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wF644xBspUQ/AAAAAAAAAAI/AAAAAAAAAAc/AYJLZ-xN-ew/photo.jpg?sz=128", "display_name": "f158087 Muhammad Zohaib", "link": "https://stackoverflow.com/users/10731949/f158087-muhammad-zohaib"}, "reply_to_user": {"reputation": 16268, "user_id": 603270, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cbfe6e57e0fa59928be4898a7be08c5d?s=128&d=identicon&r=PG", "display_name": "shkschneider", "link": "https://stackoverflow.com/users/603270/shkschneider"}, "edited": false, "score": 0, "creation_date": 1543934342, "post_id": 53611178, "comment_id": 94091311, "body": "@shkschneider is it enough?"}], "owner": {"reputation": 135, "user_id": 10731949, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wF644xBspUQ/AAAAAAAAAAI/AAAAAAAAAAc/AYJLZ-xN-ew/photo.jpg?sz=128", "display_name": "f158087 Muhammad Zohaib", "link": "https://stackoverflow.com/users/10731949/f158087-muhammad-zohaib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 142, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1543920346, "creation_date": 1543920346, "question_id": 53611178, "link": "https://stackoverflow.com/questions/53611178/onactivity-is-executing-twice-in-same-activity", "title": "OnActivity is executing twice in same activity", "body": "<p>I tried to run it several ways but callbackManager called twice and only at login. when I press fb_login_button again (for logout) it only executes once\n. The toast is used to show it on screen  but they both show the same things(executed twice).</p>\n\n<pre><code>fb_login_button.setOnClickListener({\n        callbackManager = CallbackManager.Factory.create()\n        LoginManager.getInstance().logInWithReadPermissions(this, arrayListOf(\"public_profile\",\"email\"))\n        LoginManager.getInstance().registerCallback(callbackManager,\n            object : FacebookCallback&lt;LoginResult&gt;{\n                override fun onSuccess(result: LoginResult?) {                    \nToast.makeText(this@SignIN,\"Success\",Toast.LENGTH_LONG).show()\n                    Log.d(\"ss\",\":'(\")\n                }\n\n                override fun onCancel() {\n                    Toast.makeText(this@SignIN,\"Cancelled Facebook\",Toast.LENGTH_LONG).show()\n                }\n\n                override fun onError(error: FacebookException?) {\n                    Toast.makeText(this@SignIN,\"Error Facebook\",Toast.LENGTH_LONG).show()\n                }\n            })\n    })\n}    \noverride fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\n    super.onActivityResult(requestCode, resultCode, data)\n    callbackManager?.onActivityResult(requestCode, resultCode, data)\n}\n</code></pre>\n\n<p>After searching alt I got a few posts regarding same issue but on different activities.\n<a href=\"https://stackoverflow.com/questions/26680814/onactivityresult-executing-twice\">onActivityResult executing twice</a>\n<a href=\"https://stackoverflow.com/questions/52001726/onviewcreated-called-twice\">onViewCreated called twice</a>\n<a href=\"https://stackoverflow.com/questions/32237366/onactivityresult-getting-called-twice-in-android\">OnActivityResult getting called twice in Android</a>\n<a href=\"https://stackoverflow.com/questions/30736724/onactivityresult-called-twice\">onActivityResult called twice</a></p>\n"}, {"tags": ["android", "api", "google-maps", "kotlin", "tooltip"], "comments": [{"owner": {"reputation": 3529, "user_id": 6236752, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/773877099379452/picture?type=large", "display_name": "Nouman Ch", "link": "https://stackoverflow.com/users/6236752/nouman-ch"}, "edited": false, "score": 0, "creation_date": 1543918499, "post_id": 53610532, "comment_id": 94082257, "body": "what you have tried so far? where is your code?"}, {"owner": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 2, "creation_date": 1543918543, "post_id": 53610532, "comment_id": 94082288, "body": "yes it is possible - your &quot;tooltips&quot; are called <a href=\"https://developers.google.com/maps/documentation/android-sdk/marker\" rel=\"nofollow noreferrer\">markers</a>"}, {"owner": {"reputation": 267, "user_id": 10429466, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-w8tbdscu__c/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWqPX9CJdAYvNscm11o8i9c82gFDg/mo/photo.jpg?sz=128", "display_name": "Projet Sin", "link": "https://stackoverflow.com/users/10429466/projet-sin"}, "reply_to_user": {"reputation": 3529, "user_id": 6236752, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/773877099379452/picture?type=large", "display_name": "Nouman Ch", "link": "https://stackoverflow.com/users/6236752/nouman-ch"}, "edited": false, "score": 0, "creation_date": 1543918811, "post_id": 53610532, "comment_id": 94082442, "body": "@NoumanCh not yet, I wanted to be sure that is possible (in fact, I&#39;ve created my custom maker (as pskink said), but that all). And I think that I&#39;m will start again because I use some Relative Layout to make marker. Maybe there&#39;s easiest way. Thanks !"}, {"owner": {"reputation": 23894, "user_id": 1844392, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/2jBjo.png?s=128&g=1", "display_name": "Piyush", "link": "https://stackoverflow.com/users/1844392/piyush"}, "edited": false, "score": 0, "creation_date": 1543918813, "post_id": 53610532, "comment_id": 94082444, "body": "Yes. It&#39;s possible."}], "owner": {"reputation": 267, "user_id": 10429466, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-w8tbdscu__c/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWqPX9CJdAYvNscm11o8i9c82gFDg/mo/photo.jpg?sz=128", "display_name": "Projet Sin", "link": "https://stackoverflow.com/users/10429466/projet-sin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1543926640, "creation_date": 1543918410, "last_edit_date": 1543926640, "question_id": 53610532, "link": "https://stackoverflow.com/questions/53610532/click-on-screen-open-layout-where-it-was-clicked", "title": "Click on screen, open Layout where it was clicked", "body": "<p>I'm want to create something like this : </p>\n\n<p>I have a google maps screen. When I click on the map, it opens my custom \"tooltip\" where the screen was clicked (my data in my custom tooltip).</p>\n\n<p>Is that technically possible? I don't want to start something impossible ^^ </p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 641, "user_id": 1870447, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5obdQ.jpg?s=128&g=1", "display_name": "Antek", "link": "https://stackoverflow.com/users/1870447/antek"}, "edited": false, "score": 2, "creation_date": 1543915436, "post_id": 53609432, "comment_id": 94080200, "body": "first of all I suggest you to use <code>enums</code> instead of literal values - <a href=\"http://kotlinlang.org/docs/reference/enum-classes.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/enum-classes.html</a> Second - how do you keep state for each row? If it&#39;s kept globally the no wonder it behaves strangely"}, {"owner": {"reputation": 1358, "user_id": 9844646, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BHsUJ.jpg?s=128&g=1", "display_name": "Android", "link": "https://stackoverflow.com/users/9844646/android"}, "edited": false, "score": 0, "creation_date": 1543915538, "post_id": 53609432, "comment_id": 94080263, "body": "you can refer this link <a href=\"https://stackoverflow.com/questions/45550090/like-unlike-button-recyclerview-image\" title=\"like unlike button recyclerview image\">stackoverflow.com/questions/45550090/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 300, "user_id": 6537788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a031cde073f8451baeffbc426ba7bb3?s=128&d=identicon&r=PG&f=1", "display_name": "asim", "link": "https://stackoverflow.com/users/6537788/asim"}, "is_accepted": false, "score": 0, "last_activity_date": 1543915498, "creation_date": 1543915498, "answer_id": 53609527, "question_id": 53609432, "link": "https://stackoverflow.com/questions/53609432/like-system-with-3-different-stages/53609527#53609527", "title": "Like system with 3 different Stages", "body": "<p>create class with member user_like_dislike_state:Int pass ArrayList of that class to recycle adapter and handled each row view separately in list. </p>\n"}, {"tags": [], "owner": {"reputation": 354, "user_id": 9396006, "user_type": "registered", "profile_image": "https://graph.facebook.com/10159910553485398/picture?type=large", "display_name": "Blue Jones", "link": "https://stackoverflow.com/users/9396006/blue-jones"}, "is_accepted": false, "score": 0, "last_activity_date": 1543915517, "creation_date": 1543915517, "answer_id": 53609531, "question_id": 53609432, "link": "https://stackoverflow.com/questions/53609432/like-system-with-3-different-stages/53609531#53609531", "title": "Like system with 3 different Stages", "body": "<p>I would advise using a local variable when liking/disliking otherwise <code>var user_like_dislike_state</code> will retain the state of the previous like/dislike unless you reset it</p>\n"}, {"tags": [], "owner": {"reputation": 126, "user_id": 7068710, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/854e705a964fcf4bf9dbe7743df02878?s=128&d=identicon&r=PG", "display_name": "Pandu Abbiyuarsyah", "link": "https://stackoverflow.com/users/7068710/pandu-abbiyuarsyah"}, "is_accepted": false, "score": 1, "last_activity_date": 1543915990, "last_edit_date": 1543915990, "creation_date": 1543915596, "answer_id": 53609554, "question_id": 53609432, "link": "https://stackoverflow.com/questions/53609432/like-system-with-3-different-stages/53609554#53609554", "title": "Like system with 3 different Stages", "body": "<p>Maybe because of that Recyclerview, I have an assumption there's a post/row that is gone when you scroll it down or scroll it up. Every view/row that is gone in Recyclerview when it's scrolled up or down it will be reloaded again, so that's why you always got 0</p>\n"}, {"comments": [{"owner": {"reputation": 5935, "user_id": 10182897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PuvGT.jpg?s=128&g=1", "display_name": "Ashish", "link": "https://stackoverflow.com/users/10182897/ashish"}, "edited": false, "score": 0, "creation_date": 1543916274, "post_id": 53609712, "comment_id": 94080769, "body": "what if i want to give null also means if user dont want to like story but he also dont want to dislike means for null there is need to be any value"}, {"owner": {"reputation": 5252, "user_id": 1189800, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BQHkY.jpg?s=128&g=1", "display_name": "Chetan Joshi", "link": "https://stackoverflow.com/users/1189800/chetan-joshi"}, "reply_to_user": {"reputation": 5935, "user_id": 10182897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PuvGT.jpg?s=128&g=1", "display_name": "Ashish", "link": "https://stackoverflow.com/users/10182897/ashish"}, "edited": false, "score": 0, "creation_date": 1543916456, "post_id": 53609712, "comment_id": 94080899, "body": "@Ashish how and when you send null to this parameter , because you have only one button to update value of user_like_dislike_state ."}, {"owner": {"reputation": 5935, "user_id": 10182897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PuvGT.jpg?s=128&g=1", "display_name": "Ashish", "link": "https://stackoverflow.com/users/10182897/ashish"}, "edited": false, "score": 0, "creation_date": 1543916563, "post_id": 53609712, "comment_id": 94080966, "body": "nope there are two button similar to reddit i have given in which if i click upvote it will give 1 point and if i click one downvote it will put value 0  The code i have provided work for single post"}], "tags": [], "owner": {"reputation": 5252, "user_id": 1189800, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BQHkY.jpg?s=128&g=1", "display_name": "Chetan Joshi", "link": "https://stackoverflow.com/users/1189800/chetan-joshi"}, "is_accepted": true, "score": 2, "last_activity_date": 1544008458, "last_edit_date": 1544008458, "creation_date": 1543916052, "answer_id": 53609712, "question_id": 53609432, "link": "https://stackoverflow.com/questions/53609432/like-system-with-3-different-stages/53609712#53609712", "title": "Like system with 3 different Stages", "body": "<p>You just take one <code>boolean</code> flag and set its initial value as false .\nWhen button clicked you just update its value by use of turnery operator to get your value</p>\n\n<pre><code>user_like_dislike_state = user_like_dislike_state?false:true;\n</code></pre>\n\n<p>//For upvote button you should set one or -1 .</p>\n\n<pre><code>holder.upvote?.setOnClickListener({\nuser_like_dislike_state = user_like_dislike_state&lt;1?1:-1;\ncomment_id = commentsList.get(position).Id\nupVote.onClick(it)\n})\n</code></pre>\n\n<p>for downvote button you check it already down-voted or upvoted.</p>\n\n<pre><code>holder.downvote?.setOnClickListener({it-&gt;\nuser_like_dislike_state = user_like_dislike_state&gt;-1?-1:0;\ncomment_id = commentsList.get(position).Id\ndownVote.onClick(it)\n})\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5935, "user_id": 10182897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PuvGT.jpg?s=128&g=1", "display_name": "Ashish", "link": "https://stackoverflow.com/users/10182897/ashish"}, "edited": false, "score": 0, "creation_date": 1543916388, "post_id": 53609780, "comment_id": 94080842, "body": "My like status is in int datatype"}], "tags": [], "owner": {"reputation": 39, "user_id": 9244715, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gUWaHpl3lEg/AAAAAAAAAAI/AAAAAAAAA1I/PfcLX_hSrrU/photo.jpg?sz=128", "display_name": "Shubham Mittal", "link": "https://stackoverflow.com/users/9244715/shubham-mittal"}, "is_accepted": false, "score": 0, "last_activity_date": 1543916301, "creation_date": 1543916301, "answer_id": 53609780, "question_id": 53609432, "link": "https://stackoverflow.com/questions/53609432/like-system-with-3-different-stages/53609780#53609780", "title": "Like system with 3 different Stages", "body": "<p>It very simple just take a variable in model class example:- <code>var like_Status</code> and set it accordingly on click in the recyclerview and when your scrolling the list check that variable like </p>\n\n<pre><code>if(like_statusbutton==-1)\n{ \nsetLikeStatus=\"dislike\"\n}\nelse if(like_status==1)\n {\n setLikeStatus=\"like\"\n}\nelse {\n setLikeStatus=\"none\"\n}\n</code></pre>\n\n<p>you have to maintain the status for each like button in the model class. that's why you are facing this issue in your code. \nplease maintain the status of every like button in the model class and at the time of scrolling in recycleview check the previous state in of the button.</p>\n"}], "owner": {"reputation": 5935, "user_id": 10182897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PuvGT.jpg?s=128&g=1", "display_name": "Ashish", "link": "https://stackoverflow.com/users/10182897/ashish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 53609712, "answer_count": 5, "score": -1, "last_activity_date": 1546951123, "creation_date": 1543915165, "last_edit_date": 1546951123, "question_id": 53609432, "link": "https://stackoverflow.com/questions/53609432/like-system-with-3-different-stages", "title": "Like system with 3 different Stages", "body": "<p>I am using logic for Like and Dislike Button</p>\n\n<p>where I have declared variable</p>\n\n<p><strong><code>var user_like_dislike_state == 0</code></strong></p>\n\n<p>When I click on Like button value change to one if \nI pressed again it will change back to 0</p>\n\n<pre><code>if(user_like_dislike_state == 0 || user_like_dislike_state == 1){\nuser_like_dislike_state = -1\n} else {\nuser_like_dislike_state = 0\n}\n</code></pre>\n\n<p>Its working when I try to use on Single post but when I try to use this logic in Recyclerview</p>\n\n<p>If I liked post 1 then I try to like post 4 then it automatically change value to 0 </p>\n\n<p>In which 3 States I have given</p>\n\n<pre><code>user_like_dislike_state == 1 : **Like**\n\nuser_like_dislike_state == 0 : **Non**\n\nuser_like_dislike_state == -1 : **Dislike**\n</code></pre>\n\n<p><strong>Adapter.kt:</strong> </p>\n\n<pre><code>class ViewsinglepostAdapter(var commentsList: ArrayList&lt;Comment&gt;, val upVote : View.OnClickListener, val downVote: View.OnClickListener): RecyclerView.Adapter&lt;ViewsinglepostAdapter.ViewHolder&gt;(){\n    var user_like_dislike_state = 0\n    var comment_id = 0\n\n    override fun onBindViewHolder(holder: ViewHolder, position: Int) {\n        holder.user_name?.setText(commentsList.get(position).User)\n        holder.comment?.setText(commentsList.get(position).comment)\n        holder.upvote?.setOnClickListener({\n            if(user_like_dislike_state == 0 || user_like_dislike_state == -1){\n                user_like_dislike_state = 1\n            } else {\n                user_like_dislike_state = 0\n            }\n            comment_id = commentsList.get(position).Id\n            upVote.onClick(it)\n        })\n        holder.downvote?.setOnClickListener({it-&gt;\n            if(user_like_dislike_state == 0 || user_like_dislike_state == 1){\n                user_like_dislike_state = -1\n            } else {\n                user_like_dislike_state = 0\n            }\n            comment_id = commentsList.get(position).Id\n            downVote.onClick(it)\n            user_like_dislike_state == 0\n        })\n    }\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder{\n        val itemView = LayoutInflater.from(parent.context).inflate(R.layout.singlecomment,parent,false)\n        return ViewHolder(itemView)\n    }\n\n    override fun getItemCount(): Int {\n        return commentsList.count()\n    }\n\n\n    class ViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView){\n        var upvote: ImageView? = null\n        var downvote: ImageView? = null\n        var user_name: TextView? = null\n        var comment: TextView? = null\n        init {\n            this.upvote = itemView.findViewById(R.id.upvote_post_img)\n            this.downvote = itemView.findViewById(R.id.down_vote_post_img)\n            this.user_name = itemView.findViewById(R.id.user_name)\n            this.comment = itemView.findViewById(R.id.comment)\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "retrofit2"], "comments": [{"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1543916581, "post_id": 53609379, "comment_id": 94080975, "body": "Are you sure your RSS file does not have a &lt;title&gt; element inside &lt;channel&gt;?"}, {"owner": {"reputation": 1162, "user_id": 3703190, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/987a838f909beade7698055957ee1989?s=128&d=identicon&r=PG", "display_name": "khaleel_jageer", "link": "https://stackoverflow.com/users/3703190/khaleel-jageer"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1543917003, "post_id": 53609379, "comment_id": 94081257, "body": "@yole &lt;channel&gt; tag has its own &lt;title&gt; element. But what I want is the &lt;title&gt; element present inside &lt;item&gt;."}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1543917765, "post_id": 53609379, "comment_id": 94081776, "body": "The exception is thrown because the &lt;title&gt; of the channel has no matching declaration in your data class, so you need to add it."}, {"owner": {"reputation": 1162, "user_id": 3703190, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/987a838f909beade7698055957ee1989?s=128&d=identicon&r=PG", "display_name": "khaleel_jageer", "link": "https://stackoverflow.com/users/3703190/khaleel-jageer"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1543923364, "post_id": 53609379, "comment_id": 94084964, "body": "@yole can you please share sample code?"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1543928137, "post_id": 53609379, "comment_id": 94087618, "body": "Copy/pasting the <code>title</code> property from <code>Item</code> into <code>FeedChannel</code> should work."}], "owner": {"reputation": 1162, "user_id": 3703190, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/987a838f909beade7698055957ee1989?s=128&d=identicon&r=PG", "display_name": "khaleel_jageer", "link": "https://stackoverflow.com/users/3703190/khaleel-jageer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1543915001, "creation_date": 1543915001, "question_id": 53609379, "link": "https://stackoverflow.com/questions/53609379/can-not-parse-rss-feed-xml-content-using-retrofit2", "title": "Can not parse rss feed xml content using retrofit2", "body": "<p>This is my website rss feed structure. Trying to parse this using Retrofit2 XML Convert Factory.</p>\n\n<pre><code>&lt;rss&gt;\n   &lt;channel&gt;\n      &lt;item&gt;\n         &lt;title&gt;&lt;/title&gt;\n         &lt;link&gt;&lt;/link&gt;\n      &lt;/item&gt;\n      &lt;item&gt;\n         &lt;title&gt;&lt;/title&gt;\n         &lt;link&gt;&lt;/link&gt;\n      &lt;/item&gt;\n   &lt;/channel&gt;\n&lt;/rss&gt;\n</code></pre>\n\n<p>Always getting following error: </p>\n\n<blockquote>\n  <p>org.simpleframework.xml.core.ElementException: Element 'title' does not have a match in class com.example.android.model.FeedChannel at line -1</p>\n</blockquote>\n\n<p>Here is my data class:</p>\n\n<pre><code>@Root(name = \"rss\", strict = false)\ndata class FeedChannelData @JvmOverloads constructor(\n    @field:Element(name = \"channel\")\n    @param:Element(name = \"channel\")\n    val feedChannel: FeedChannel? = null\n)\n\n@Root(name = \"channel\", strict = true)\ndata class FeedChannel @JvmOverloads constructor(\n    @field:ElementList(name =\"item\", inline = true)\n    @param:ElementList(name =\"item\", inline = true)\n    var itemList: List&lt;Item&gt;? = null\n)\n\n@Root(name = \"item\", strict = false)\ndata class Item @JvmOverloads constructor(\n\n    @field:Element(name = \"title\", required = true)\n    @param:Element(name = \"title\", required = true)\n    val title: String = \"\",\n\n    @field:Element(name = \"link\", required = true)\n    @param:Element(name = \"link\", required = true)\n    val link: String= \"\"\n)\n</code></pre>\n"}, {"tags": ["java", "android", "kotlin", "android-download-manager", "download-manager"], "comments": [{"owner": {"reputation": 5219, "user_id": 4562287, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-q6oUlSeB8Xo/AAAAAAAAAAI/AAAAAAAAAFg/NB15_H7Q0eo/photo.jpg?sz=128", "display_name": "Vivek Mishra", "link": "https://stackoverflow.com/users/4562287/vivek-mishra"}, "edited": false, "score": 0, "creation_date": 1543914769, "post_id": 53609105, "comment_id": 94079792, "body": "are you sure it is successful ?"}, {"owner": {"reputation": 303, "user_id": 8481417, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/07af5a9aa657722642ff4affc11c4e7f?s=128&d=identicon&r=PG&f=1", "display_name": "Ratri", "link": "https://stackoverflow.com/users/8481417/ratri"}, "reply_to_user": {"reputation": 5219, "user_id": 4562287, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-q6oUlSeB8Xo/AAAAAAAAAAI/AAAAAAAAAFg/NB15_H7Q0eo/photo.jpg?sz=128", "display_name": "Vivek Mishra", "link": "https://stackoverflow.com/users/4562287/vivek-mishra"}, "edited": false, "score": 0, "creation_date": 1543914850, "post_id": 53609105, "comment_id": 94079841, "body": "yes, i have check it in my file manager."}, {"owner": {"reputation": 5219, "user_id": 4562287, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-q6oUlSeB8Xo/AAAAAAAAAAI/AAAAAAAAAFg/NB15_H7Q0eo/photo.jpg?sz=128", "display_name": "Vivek Mishra", "link": "https://stackoverflow.com/users/4562287/vivek-mishra"}, "edited": false, "score": 0, "creation_date": 1543914889, "post_id": 53609105, "comment_id": 94079863, "body": "cross check the file size too. I suspect it might be failing somewhere"}, {"owner": {"reputation": 303, "user_id": 8481417, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/07af5a9aa657722642ff4affc11c4e7f?s=128&d=identicon&r=PG&f=1", "display_name": "Ratri", "link": "https://stackoverflow.com/users/8481417/ratri"}, "reply_to_user": {"reputation": 5219, "user_id": 4562287, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-q6oUlSeB8Xo/AAAAAAAAAAI/AAAAAAAAAFg/NB15_H7Q0eo/photo.jpg?sz=128", "display_name": "Vivek Mishra", "link": "https://stackoverflow.com/users/4562287/vivek-mishra"}, "edited": false, "score": 0, "creation_date": 1543915039, "post_id": 53609105, "comment_id": 94079956, "body": "yeah i try to download with a different size too. both are successful but the toast still failed"}, {"owner": {"reputation": 5219, "user_id": 4562287, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-q6oUlSeB8Xo/AAAAAAAAAAI/AAAAAAAAAFg/NB15_H7Q0eo/photo.jpg?sz=128", "display_name": "Vivek Mishra", "link": "https://stackoverflow.com/users/4562287/vivek-mishra"}, "edited": false, "score": 0, "creation_date": 1543915358, "post_id": 53609105, "comment_id": 94080148, "body": "<a href=\"https://stackoverflow.com/questions/21477493/android-download-manager-completed\" title=\"android download manager completed\">stackoverflow.com/questions/21477493/&hellip;</a>. Try adding the download complete listener from the link and see if it is triggered or not"}, {"owner": {"reputation": 303, "user_id": 8481417, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/07af5a9aa657722642ff4affc11c4e7f?s=128&d=identicon&r=PG&f=1", "display_name": "Ratri", "link": "https://stackoverflow.com/users/8481417/ratri"}, "reply_to_user": {"reputation": 5219, "user_id": 4562287, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-q6oUlSeB8Xo/AAAAAAAAAAI/AAAAAAAAAFg/NB15_H7Q0eo/photo.jpg?sz=128", "display_name": "Vivek Mishra", "link": "https://stackoverflow.com/users/4562287/vivek-mishra"}, "edited": false, "score": 0, "creation_date": 1543917376, "post_id": 53609105, "comment_id": 94081521, "body": "i have the one with the complete listener. I&#39;ll edit my code"}, {"owner": {"reputation": 303, "user_id": 8481417, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/07af5a9aa657722642ff4affc11c4e7f?s=128&d=identicon&r=PG&f=1", "display_name": "Ratri", "link": "https://stackoverflow.com/users/8481417/ratri"}, "reply_to_user": {"reputation": 5219, "user_id": 4562287, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-q6oUlSeB8Xo/AAAAAAAAAAI/AAAAAAAAAFg/NB15_H7Q0eo/photo.jpg?sz=128", "display_name": "Vivek Mishra", "link": "https://stackoverflow.com/users/4562287/vivek-mishra"}, "edited": false, "score": 0, "creation_date": 1543917564, "post_id": 53609105, "comment_id": 94081651, "body": "check my update code"}], "owner": {"reputation": 303, "user_id": 8481417, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/07af5a9aa657722642ff4affc11c4e7f?s=128&d=identicon&r=PG&f=1", "display_name": "Ratri", "link": "https://stackoverflow.com/users/8481417/ratri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 233, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1543955790, "creation_date": 1543914115, "last_edit_date": 1543955790, "question_id": 53609105, "link": "https://stackoverflow.com/questions/53609105/after-download-a-document-download-manager-keep-showing-toast-download-failed", "title": "After download a document download manager keep showing toast &quot;Download Failed&quot; even though it successfull", "body": "<p>I create a download manager for downloading a document but it always shows the toast <code>download failed</code>. Even if I haven't set the toast for download complete, it still exists and the document that I download was successfully downloaded.</p>\n\n<p>Here is my code: </p>\n\n<pre><code>class ShareDokumenActivity : AppCompatActivity() {\n\nvar tempDatas: ArrayList&lt;ListWa&gt;? = null\n\nvar list: ArrayList&lt;Long&gt; = ArrayList()\nprivate var mgr: DownloadManager? = null\nprivate val MY_PERMISSION_REQUEST_WRITE_STORAGE = 100\nvar filename = \"\"\nvar fileUrl = \"\"\nvar ext = \"\"\nvar type =\"\"\nvar newNumbCode =\"\"\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_list_wa)\n    titleSearch.setText(\"Share file to...\")\n    titleSearch.setTextColor(Color.WHITE)\n    setSupportActionBar(toolbar)\n    supportActionBar?.setDisplayHomeAsUpEnabled(true)\n    supportActionBar?.setDisplayShowHomeEnabled(true)\n\n    val savedUser = Gson().fromJson&lt;LoginUser&gt;(this@ShareDokumenActivity\n            .getSharedPreferences(LoginActivity.MY_LOGIN_PREF, Context.MODE_PRIVATE)\n            .getString(LoginActivity.MY_LOGIN_PREF_KEY, \"\"), LoginUser::class.java)\n    getListWa(savedUser.salesmanId)\n    chooseShareTo()\n\n}\n\nfun getListWa(id : String){\n    API.getListWa(id).enqueue(object : Callback&lt;ArrayList&lt;ListWa&gt;&gt; {\n\n        override fun onResponse(call: Call&lt;ArrayList&lt;ListWa&gt;&gt;, response: Response&lt;ArrayList&lt;ListWa&gt;&gt;) {\n            if (response.code() == 200) {\n                tempDatas = response.body();\n                rvListWa.setHasFixedSize(true)\n                rvListWa.layoutManager = LinearLayoutManager(this@ShareDokumenActivity)\n                rvListWa.adapter = ListWaAdapter(tempDatas)\n            }else{\n                Toast.makeText(this@ShareDokumenActivity, \"Error\", Toast.LENGTH_LONG).show()\n            }\n        }\n\n        override fun onFailure(call: Call&lt;ArrayList&lt;ListWa&gt;&gt;, throwable: Throwable) {\n            Toast.makeText(this@ShareDokumenActivity, \"Error\", Toast.LENGTH_LONG).show()\n        }\n    })\n\n}\n\nfun chooseShareTo(){\n    rvListWa!!.addOnItemTouchListener(RecyclerItemClickListener(this@ShareDokumenActivity,\n            RecyclerItemClickListener.OnItemClickListener { view, position -&gt;\n\n                val numbCode = tempDatas!![position].custHpWa\n                if (numbCode.substring(0,2).equals(\"08\")){\n                    newNumbCode = \"62\"+numbCode.substring(1)\n\n                    fileUrl = baseURLPicasso + intent.getStringExtra(SalesProgramDocViewersActivity.DOC_URL_INTENT)\n                    val mime = MimeTypeMap.getSingleton()\n                    ext = fileUrl.substring(fileUrl.lastIndexOf(\".\") + 1)\n                    type = mime.getMimeTypeFromExtension(ext)\n\n                    filename = intent.getStringExtra(SalesProgramDocViewersActivity.DOC_URL_INTENT).substring(44)\n                    val downloadUri = Uri.parse(fileUrl)\n                    if (ContextCompat.checkSelfPermission(this@ShareDokumenActivity,\n                                    Manifest.permission.WRITE_EXTERNAL_STORAGE) != PackageManager.PERMISSION_GRANTED) {\n                        // No explanation needed, we can request the permission.\n                        ActivityCompat.requestPermissions(this@ShareDokumenActivity,\n                                arrayOf(Manifest.permission.WRITE_EXTERNAL_STORAGE, Manifest.permission.CAMERA),\n                                MY_PERMISSION_REQUEST_WRITE_STORAGE)\n                    } else {\n                        mgr?.enqueue(DownloadManager.Request(downloadUri)\n                                .setAllowedOverRoaming(false)\n                                .setTitle(\"Downloading..\")\n                                .setDescription(\"Download \" + filename)\n                                .setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS, filename))\n                    }\n\n\n                }else if (numbCode.substring(0,2).equals(\"+6\")){\n                    newNumbCode = numbCode.substring(1)\n                    Toast.makeText(this@ShareDokumenActivity, \"$newNumbCode\", Toast.LENGTH_SHORT).show()\n\n                }else{\n                    Toast.makeText(this@ShareDokumenActivity, \"Kode nomor salah\", Toast.LENGTH_SHORT).show()\n                }\n            }))\n}\n\nfun sendFile(filename: String, extension : String, phoneNumb : String) {\n    if (ContextCompat.checkSelfPermission(this@ShareDokumenActivity,\n                    Manifest.permission.WRITE_EXTERNAL_STORAGE) != PackageManager.PERMISSION_GRANTED) {\n        // No explanation needed, we can request the permission.\n        ActivityCompat.requestPermissions(this@ShareDokumenActivity,\n                arrayOf(Manifest.permission.WRITE_EXTERNAL_STORAGE, Manifest.permission.CAMERA),\n                MY_PERMISSION_REQUEST_WRITE_STORAGE)\n    } else {\n        val dir = File(Environment.getExternalStorageDirectory().toString() + \"/Download/\" + filename)\n        val intent = Intent(Intent.ACTION_SEND)\n\n        if (Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.N) {\n            intent.flags = Intent.FLAG_GRANT_READ_URI_PERMISSION\n            val fileUri = FileProvider.getUriForFile(this@ShareDokumenActivity, this@ShareDokumenActivity.applicationContext.packageName + \".provider\", dir)\n            intent.setDataAndType(fileUri, extension)\n            intent.putExtra(Intent.EXTRA_STREAM, fileUri)\n            intent.putExtra(\"jid\", PhoneNumberUtils.stripSeparators(phoneNumb) + \"@s.whatsapp.net\")\n\n        } else {\n            intent.setDataAndType(Uri.fromFile(dir), extension)\n            intent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(dir))\n            intent.putExtra(\"jid\", PhoneNumberUtils.stripSeparators(phoneNumb) + \"@s.whatsapp.net\")\n        }\n\n        try {\n            this@ShareDokumenActivity.startActivity(intent)\n//            Toast.makeText(this@ShareDokumenActivity, \"Download Success\", Toast.LENGTH_LONG).show()\n        } catch (ex: Exception) {\n            ex.printStackTrace()\n            Toast.makeText(this@ShareDokumenActivity, \"Can't sharing\", Toast.LENGTH_LONG).show()\n        }\n    }\n}\n\noverride fun onResume() {\n    super.onResume()\n    mgr = getSystemService(Context.DOWNLOAD_SERVICE) as DownloadManager?\n    registerReceiver(onComplete, IntentFilter(DownloadManager.ACTION_DOWNLOAD_COMPLETE))\n}\n\nvar onComplete : BroadcastReceiver = object : BroadcastReceiver() {\n    override fun onReceive(ctxt: Context, intent: Intent) {\n        sendFile(filename, type, newNumbCode)\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1421, "user_id": 4058157, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/dF5ix.jpg?s=128&g=1", "display_name": "Rajitha Perera", "link": "https://stackoverflow.com/users/4058157/rajitha-perera"}, "edited": false, "score": 0, "creation_date": 1543915910, "post_id": 53609364, "comment_id": 94080505, "body": "Hi Now I added below code.but still I got same result   --   val jsonArray = JSONArray()             jsonArray.put(jsObject)"}, {"owner": {"reputation": 16268, "user_id": 603270, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cbfe6e57e0fa59928be4898a7be08c5d?s=128&d=identicon&r=PG", "display_name": "shkschneider", "link": "https://stackoverflow.com/users/603270/shkschneider"}, "reply_to_user": {"reputation": 1421, "user_id": 4058157, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/dF5ix.jpg?s=128&g=1", "display_name": "Rajitha Perera", "link": "https://stackoverflow.com/users/4058157/rajitha-perera"}, "edited": false, "score": 0, "creation_date": 1543920027, "post_id": 53609364, "comment_id": 94083144, "body": "It works: <code>{&quot;arr&quot;:[&quot;test1&quot;,&quot;test2&quot;]}</code>. You&#39;re just doing something that makes a <code>toString()</code> somewhere. BTW you seam to be messing up JSON and GSON objects."}], "tags": [], "owner": {"reputation": 16268, "user_id": 603270, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cbfe6e57e0fa59928be4898a7be08c5d?s=128&d=identicon&r=PG", "display_name": "shkschneider", "link": "https://stackoverflow.com/users/603270/shkschneider"}, "is_accepted": true, "score": 2, "last_activity_date": 1543919967, "last_edit_date": 1543919967, "creation_date": 1543914946, "answer_id": 53609364, "question_id": 53608941, "link": "https://stackoverflow.com/questions/53608941/how-to-add-arraylist-to-jsonobject-in-kotlin/53609364#53609364", "title": "How to add ArrayList to JsonObject in Kotlin", "body": "<p><code>Gson().toJson(myList)</code> returns a <code>String</code>.</p>\n\n<p>You should build a <code>JSONArray</code> and add its elements. Then add this true array. This just works:</p>\n\n<pre><code>JsonArray array = new JsonArray();\narray.add(\"test1\");\narray.add(\"test2\");\nJsonObject object = new JsonObject();\nobject.add(\"arr\", array);\n</code></pre>\n\n<p>You also seam to be messing up JSON and GSON objects. Here I just used Gson objects.</p>\n"}, {"tags": [], "owner": {"reputation": 8316, "user_id": 1616317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4533abb0fab9a5a284c2cdcb40512e85?s=128&d=identicon&r=PG&f=1", "display_name": "karan", "link": "https://stackoverflow.com/users/1616317/karan"}, "is_accepted": false, "score": 2, "last_activity_date": 1543920916, "creation_date": 1543920916, "answer_id": 53611358, "question_id": 53608941, "link": "https://stackoverflow.com/questions/53608941/how-to-add-arraylist-to-jsonobject-in-kotlin/53611358#53611358", "title": "How to add ArrayList to JsonObject in Kotlin", "body": "<p>as @shkschneider pointed <code>gson.toJson()</code> returns string value and you are adding that string directly to your json object, You need to convert it to json array and then add it.</p>\n\n<pre><code>JSONArray jsArray = new JSONArray(Gson().toJson(myList))\nvar obj2 = JSONObject(obj.get(\"reciptDetail\").toString())\nobj2.remove(\"payment_details\")\nobj2.put(\"payment_details\",jsArray)\nLog.e(\"cash Object\", obj2.toString())\n</code></pre>\n"}], "owner": {"reputation": 1421, "user_id": 4058157, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/dF5ix.jpg?s=128&g=1", "display_name": "Rajitha Perera", "link": "https://stackoverflow.com/users/4058157/rajitha-perera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4840, "favorite_count": 0, "accepted_answer_id": 53609364, "answer_count": 2, "score": 1, "last_activity_date": 1595873938, "creation_date": 1543913518, "last_edit_date": 1595873938, "question_id": 53608941, "link": "https://stackoverflow.com/questions/53608941/how-to-add-arraylist-to-jsonobject-in-kotlin", "title": "How to add ArrayList to JsonObject in Kotlin", "body": "<blockquote>\n<p>PaymentDetails class</p>\n</blockquote>\n<pre><code>data class PaymentDetails(\nval type:String,\nval bank: String,\nval branch: String,\nval account_no: String,\nval cheque_date:String,\nval return_type:Boolean,\nval cheque_no:String,\nval return_cheque_no:String,\nval amount:String)\n</code></pre>\n<blockquote>\n<p>Adding to Json Object</p>\n</blockquote>\n<pre><code>  var obj = JSONObject(myPreference!!.getJsonObject());\n    Log.e(&quot;test Object add&quot;, obj.get(&quot;reciptDetail&quot;).toString())\n    \n    val paymentDetails : PaymentDetails = PaymentDetails(type, &quot;&quot;, &quot;&quot;, &quot;&quot;,&quot;&quot;,false,&quot;&quot;,&quot;&quot;,viewPaymentCash!!.etxt_amount.text.toString())\n    myList.add(paymentDetails)\n    val jsArray = Gson().toJson(myList)\n    var obj2 = JSONObject(obj.get(&quot;reciptDetail&quot;).toString());\n    \n    obj2.remove(&quot;payment_details&quot;)\n    obj2.put(&quot;payment_details&quot;,jsArray)\n    \n    Log.e(&quot;cash Object&quot;, obj2.toString())\n</code></pre>\n<p>Here I tried to add new Arraylist to existing JsonObject. Issue is that the final Json object is not what I am expecting. How can I solve that issue? Below I attched what I expected and what I got.</p>\n<p>Expected</p>\n<pre><code>{&quot;receiptNo&quot;:&quot;fggff&quot;,&quot;todate&quot;:&quot;4\\/12\\/2018&quot;,&quot;remark&quot;:&quot;&quot;,&quot;payment_details&quot;:[{&quot;account_no&quot;:&quot; &quot;,&quot;amount&quot;:&quot;600&quot;,&quot;bank&quot;:&quot;&quot;,&quot;branch&quot;:&quot;&quot;,&quot;cheque_date&quot;:&quot;&quot;,&quot;cheque_no&quot;:&quot;&quot;,&quot;return_cheque_no&quot;:&quot;&quot;,&quot;type&quot;:&quot;Cash&quot;,&quot;return_type&quot;:false}]}\n</code></pre>\n<p>What I got from above code</p>\n<pre><code>{&quot;receiptNo&quot;:&quot;fggff&quot;,&quot;todate&quot;:&quot;4\\/12\\/2018&quot;,&quot;remark&quot;:&quot;&quot;,&quot;payment_details&quot;:&quot;[{\\&quot;account_no\\&quot;:\\&quot;\\&quot;,\\&quot;amount\\&quot;:\\&quot;600\\&quot;,\\&quot;bank\\&quot;:\\&quot;\\&quot;,\\&quot;branch\\&quot;:\\&quot;\\&quot;,\\&quot;cheque_date\\&quot;:\\&quot;\\&quot;,\\&quot;cheque_no\\&quot;:\\&quot;\\&quot;,\\&quot;return_cheque_no\\&quot;:\\&quot;\\&quot;,\\&quot;type\\&quot;:\\&quot;Cash\\&quot;,\\&quot;return_type\\&quot;:false}]&quot;}\n</code></pre>\n"}, {"tags": ["android", "time", "kotlin"], "comments": [{"owner": {"reputation": 3029, "user_id": 10632369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/541566093e9d34a3858f5446d06a7a6e?s=128&d=identicon&r=PG", "display_name": "tomerpacific", "link": "https://stackoverflow.com/users/10632369/tomerpacific"}, "edited": false, "score": 1, "creation_date": 1543909452, "post_id": 53607944, "comment_id": 94077306, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/13515168/android-time-in-iso-8601\">Android time in iso 8601</a>"}, {"owner": {"reputation": 7305, "user_id": 1268507, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/pW5el.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/1268507/alex"}, "edited": false, "score": 1, "creation_date": 1543909459, "post_id": 53607944, "comment_id": 94077311, "body": "Try using DateUtils.getRelativeTimeSpanString()"}], "owner": {"reputation": 46, "user_id": 10079691, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xi3J6rsSlts/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rKdOpdR8y0yvcskudsr4ONoC4Trw/mo/photo.jpg?sz=128", "display_name": "medusa", "link": "https://stackoverflow.com/users/10079691/medusa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1543912958, "creation_date": 1543909251, "last_edit_date": 1543912958, "question_id": 53607944, "link": "https://stackoverflow.com/questions/53607944/how-do-i-convert-iso-time-to-show-how-many-hours-ago-something-was-posted-in-and", "title": "How do I convert ISO time to show how many hours ago something was posted in android studio?", "body": "<p>I am getting a time with an ISO format that I want to convert and then show how many hours ago that item was gotten. I have written the code for that, but the result is not correct when it's returned for some reason. For example, if the time is a minute ago, it says three hours ago! My problem is that the formatting does not work the ISO conversion works but the formatting is wrong!</p>\n\n<p>This is my class for reformatting the time that I am getting:</p>\n\n<pre><code>class ReformatTime {\n\n@SuppressLint(\"SimpleDateFormat\")\nfun convertISOTime(time: String): String {\n    val inputPattern = \"yyyy-MM-dd'T'HH:mm:ss.SSSSSSS'Z'\"\n    val inputFormat = SimpleDateFormat(inputPattern)\n    return getTimeAgo(inputFormat.parse(time).time)\n}\n\ncompanion object {\n    private const val SECOND_MILLIS = 1000\n    private const val MINUTE_MILLIS = 60 * SECOND_MILLIS\n    private const val HOUR_MILLIS = 60 * MINUTE_MILLIS\n    private const val DAY_MILLIS = 24 * HOUR_MILLIS\n}\n\nprivate fun getTimeAgo(time: Long): String {\n    var time = time\n\n    if (time &lt; 1000000000000L) {\n        // if timestamp given in seconds, convert to millis\n        time *= 1000\n    }\n\n    val now = System.currentTimeMillis()\n    if (time &gt; now || time &lt;= 0) return \"\"\n\n    val diff = now - time\n    return when {\n        diff &lt; MINUTE_MILLIS -&gt; \"just now\"\n        diff &lt; 2 * MINUTE_MILLIS -&gt; \"a minute ago\" \n        diff &lt; 50 * MINUTE_MILLIS -&gt; \"${diff / MINUTE_MILLIS}  minutes ago\"\n        diff &lt; 90 * MINUTE_MILLIS -&gt; \"an hour ago\"\n        diff &lt; 24 * HOUR_MILLIS -&gt; \"${diff / HOUR_MILLIS} hours ago\"\n        diff &lt; 48 * HOUR_MILLIS -&gt; \"yesterday\"\n        else -&gt; \"${diff / DAY_MILLIS} days ago\"\n    }\n}}\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 10859, "user_id": 3710865, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oROuW.jpg?s=128&g=1", "display_name": "sasikumar", "link": "https://stackoverflow.com/users/3710865/sasikumar"}, "edited": false, "score": 0, "creation_date": 1543907191, "post_id": 53607207, "comment_id": 94076355, "body": "refer <a href=\"https://stackoverflow.com/questions/35319702/android-m-permission-of-the-tested-read-phone-statedangerous-permissions\" title=\"android m permission of the tested read phone statedangerous permissions\">stackoverflow.com/questions/35319702/&hellip;</a>"}, {"owner": {"reputation": 11, "user_id": 9641672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c198941edbd9cea2a3e4dc129148213a?s=128&d=identicon&r=PG&f=1", "display_name": "Bhavin Vala", "link": "https://stackoverflow.com/users/9641672/bhavin-vala"}, "reply_to_user": {"reputation": 10859, "user_id": 3710865, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oROuW.jpg?s=128&g=1", "display_name": "sasikumar", "link": "https://stackoverflow.com/users/3710865/sasikumar"}, "edited": false, "score": 0, "creation_date": 1543909324, "post_id": 53607207, "comment_id": 94077260, "body": "this is not working"}], "owner": {"reputation": 11, "user_id": 9641672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c198941edbd9cea2a3e4dc129148213a?s=128&d=identicon&r=PG&f=1", "display_name": "Bhavin Vala", "link": "https://stackoverflow.com/users/9641672/bhavin-vala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 181, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1543994670, "creation_date": 1543906339, "last_edit_date": 1543994670, "question_id": 53607207, "link": "https://stackoverflow.com/questions/53607207/checkpermission-runtime-for-get-sim-card-number-in-kotlin-android", "title": "checkpermission runtime for get sim card number in kotlin android?", "body": "<p>How to get simcard number in kotlin android</p>\n\n<p>In this code I can not get permission box and the toast only displays message, not any phome number</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n    private var wantPermission = Manifest.permission.READ_PHONE_STATE\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        val number = getMyPhoneNO()\n        Toast.makeText(applicationContext, \"My Phone No is: $number\", Toast.LENGTH_SHORT).show()\n        Log.v(\"Debug\", number)\n\n    }\n\n    private fun getMyPhoneNO(): String {\n        val mTelephonyMgr: TelephonyManager = getSystemService(Context.TELEPHONY_SERVICE) as TelephonyManager\n        if (checkSelfPermission(this, wantPermission) != PackageManager.PERMISSION_GRANTED) {\n            return \"\"\n        }\n        return mTelephonyMgr.line1Number\n    }\n}\n</code></pre>\n"}, {"tags": ["java", "sql", "kotlin", "dsl", "jooq"], "answers": [{"comments": [{"owner": {"reputation": 975, "user_id": 3984664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UySg0.jpg?s=128&g=1", "display_name": "Saeed D.", "link": "https://stackoverflow.com/users/3984664/saeed-d"}, "edited": false, "score": 0, "creation_date": 1543928050, "post_id": 53610802, "comment_id": 94087574, "body": "Thanks, it worked. Also, thank you for the SQL correction. Using FILTER is much cleaner than using CASE."}], "tags": [], "owner": {"reputation": 179634, "user_id": 521799, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb96efa7a5664ba1c4ebf586abd4121f?s=128&d=identicon&r=PG", "display_name": "Lukas Eder", "link": "https://stackoverflow.com/users/521799/lukas-eder"}, "is_accepted": true, "score": 2, "last_activity_date": 1543919223, "creation_date": 1543919223, "answer_id": 53610802, "question_id": 53606041, "link": "https://stackoverflow.com/questions/53606041/case-expression-in-jooq/53610802#53610802", "title": "CASE Expression in JOOQ", "body": "<p>You could probably use the <a href=\"https://www.jooq.org/doc/latest/manual/sql-building/column-expressions/aggregate-functions/\" rel=\"nofollow noreferrer\"><code>FILTER (WHERE ..)</code> clause</a>, which is supported by jOOQ and emulated in SQL dialects that don't natively support it, in a similar way as yours:</p>\n\n<h3>In SQL</h3>\n\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT COUNT(*) as total, \n       COUNT(*) FILTER (WHERE in_kind OR goods) AS alt_donation\nFROM donation\n</code></pre>\n\n<h3>In jOOQ</h3>\n\n<pre class=\"lang-java prettyprint-override\"><code>ctx.select(count().`as`(\"donations\"),\n           count().filterWhere(condition(DONATION.IN_KIND)\n                           .or(condition(DONATION.GOODS))).`as`(\"alt_donation\"))\n   .from(DONATION)\n   .fetch();\n</code></pre>\n\n<p>Notice I'm turning a <code>Field&lt;Boolean&gt;</code> into a <code>Condition</code> using <a href=\"https://www.jooq.org/javadoc/latest/org/jooq/impl/DSL.html#condition-org.jooq.Field-\" rel=\"nofollow noreferrer\"><code>DSL.condition(Field&lt;Boolean&gt;)</code></a>, which is probably the API you were looking for</p>\n"}], "owner": {"reputation": 975, "user_id": 3984664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UySg0.jpg?s=128&g=1", "display_name": "Saeed D.", "link": "https://stackoverflow.com/users/3984664/saeed-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 644, "favorite_count": 0, "accepted_answer_id": 53610802, "answer_count": 1, "score": 3, "last_activity_date": 1543919223, "creation_date": 1543900190, "last_edit_date": 1543918878, "question_id": 53606041, "link": "https://stackoverflow.com/questions/53606041/case-expression-in-jooq", "title": "CASE Expression in JOOQ", "body": "<p>How do I write the following SQL in JOOQ?</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT COUNT(*) as total, \n       SUM(CASE WHEN (in_kind OR goods) THEN 1 ELSE 0 END) AS alt_donation\nFROM donation\n</code></pre>\n\n<p>All the three columns (\u2018not_found\u2019, \u2018in_kind\u2019 and \u2018goods\u2019) are boolean.</p>\n\n<p>I have looked at other related questions and <a href=\"https://www.jooq.org/doc/latest/manual/sql-building/column-expressions/case-expressions/\" rel=\"nofollow noreferrer\">JOOQ CASE Documentation</a> and can make the following sql work in JOOQ.</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT COUNT(*) AS total, \n       SUM(CASE WHEN (not_found) THEN 0 ELSE 1 END) AS alt_donation\nFROM donation\n</code></pre>\n\n<p>The JOOQ version runs correctly for this example: </p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>val query = dslContext\n    .select(DSL.count().`as`(\"donations\"),\n            DSL.sum(DSL.choose(DONATION.NOT_FOUND).`when`(true, 0).otherwise(1)).`as`(\"altdonation\"))\n    .from(DONATION)\n</code></pre>\n\n<p>I need to use the earlier sql statement that uses an 'or' in CASE.</p>\n"}, {"tags": ["java", "kotlin", "bluetooth", "bluetooth-lowenergy", "android-bluetooth"], "owner": {"reputation": 4681, "user_id": 4077513, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/oxQV6.png?s=128&g=1", "display_name": "Martin Erlic", "link": "https://stackoverflow.com/users/4077513/martin-erlic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 160, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1549373155, "creation_date": 1543897915, "last_edit_date": 1543905953, "question_id": 53605730, "link": "https://stackoverflow.com/questions/53605730/how-can-i-listen-to-a-bluetooth-server-and-store-its-emitted-messages", "title": "How can I listen to a bluetooth server and store its emitted messages?", "body": "<p>I have a device that will return a 6 digit integer when I send the string <code>cmdc</code> to it. Call this a 'count command'. I'm currently using BtChat to send and receive data from the device. The device is the server. My app will be the client.</p>\n\n<p><a href=\"https://i.stack.imgur.com/8Dqbb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8Dqbb.png\" alt=\"enter image description here\"></a></p>\n\n<p>This is the function I use to send the string to the server when I am paired:</p>\n\n<pre><code>@Throws(IOException::class)\nfun sendData(socket: BluetoothSocket? , data : String) {\n\n val toSend = data.toByteArray()\n\n val outputStream = socket!!.outputStream\n outputStream.write(toSend)\n\n outputStream.flush()\n outputStream.close()\n\n}\n</code></pre>\n\n<p>How would I go about receiving the integer after issuing the command from my own application instead of BtChat?</p>\n\n<p>I have attempted to listen to the server using the following class:</p>\n\n<pre><code>class ServerConnectThread(mBTSocket: BluetoothSocket?) : Thread() {\n    private var bTSocket: BluetoothSocket? = mBTSocket\n\n    fun acceptConnect(bTAdapter: BluetoothAdapter, mUUID: UUID) {\n        var temp: BluetoothServerSocket? = null\n        try {\n            temp = bTAdapter.listenUsingRfcommWithServiceRecord(\"Dual-SPP\", mUUID)\n            // TODO: What should I do with the server socket?\n            // Loop on a background thread until an integer is discovered?\n            // When I print 'temp' I get the following:\n            // ServerSocket: Type: TYPE_RFCOMM Channel: -1\n\n        } catch (e: IOException) {\n            Log.d(\"SERVERCONNECT\", \"Could not get a BluetoothServerSocket:\" + e.toString())\n        }\n\n        while (true) {\n            try {\n                bTSocket = temp!!.accept()\n\n            } catch (e: IOException) {\n                Log.d(\"SERVERCONNECT\", \"Could not accept an incoming connection.\")\n                break\n            }\n\n            if (bTSocket != null) {\n                try {\n                    temp.close()\n                } catch (e: IOException) {\n                    Log.d(\"SERVERCONNECT\", \"Could not close ServerSocket:\" + e.toString())\n                }\n\n                break\n            }\n        }\n    }\n\n    fun closeConnect() {\n        try {\n            bTSocket!!.close()\n        } catch (e: IOException) {\n            Log.d(\"SERVERCONNECT\", \"Could not close connection:\" + e.toString())\n        }\n\n    }\n\n}\n</code></pre>\n\n<p>Where should I initiate this class? The server seems to \"emit\" the integer a few seconds after the command is issued. How can I capture the returned value and store it in my application?</p>\n\n<p>I was thinking that I might connect to the server in a JobIntentService right after pairing but it's not working for me currently:</p>\n\n<pre><code>class BluetoothService : JobIntentService() {\n\n    var bluetoothDevice: BluetoothDevice? = null\n\n    internal val mHandler = Handler()\n\n    override fun onHandleWork(intent: Intent) {\n        // We have received work to do.  The system or framework is already\n        // holding a wake lock for us at this point, so we can just go.\n        Log.i(\"SimpleJobIntentService\", \"Executing work: $intent\")\n\n        bluetoothDevice = intent.extras!!.getParcelable(\"btdevice\")\n\n        Log.d(\"CONNECTED \", bluetoothDevice!!.name)\n\n        val i = Intent(baseContext, MainActivity::class.java)\n        i.putExtra(\"btdevice_connected\", bluetoothDevice)\n        i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)\n        application.startActivity(i)\n\n        val deviceName = bluetoothDevice!!.name\n        //println(deviceName)\n        val mUUID = bluetoothDevice!!.uuids[0].uuid\n        //println(mUUID)\n\n        ServerConnectThread().run {\n            acceptConnect(BluetoothAdapter.getDefaultAdapter(), deviceName, mUUID)\n        }\n\n\n    }\n\n    override fun onDestroy() {\n        super.onDestroy()\n        // toast(\"All work complete\")\n    }\n\n    // Helper for showing tests\n    internal fun toast(text: CharSequence) {\n        mHandler.post { Toast.makeText(this@BluetoothService, text, Toast.LENGTH_SHORT).show() }\n    }\n\n    companion object {\n        /**\n         * Unique job ID for this service.\n         */\n        internal val JOB_ID = 1000\n\n        /**\n         * Convenience method for enqueuing work in to this service.\n         */\n        internal fun enqueueWork(context: Context, work: Intent, btdevicE_JOB_ID: Int) {\n            JobIntentService.enqueueWork(context, BluetoothService::class.java, btdevicE_JOB_ID, work)\n        }\n    }\n</code></pre>\n"}, {"tags": ["android", "android-studio", "kotlin"], "comments": [{"owner": {"reputation": 11, "user_id": 10737905, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3h8GX.jpg?s=128&g=1", "display_name": "\u4f59\u751f\u7686\u5047\u671f", "link": "https://stackoverflow.com/users/10737905/%e4%bd%99%e7%94%9f%e7%9a%86%e5%81%87%e6%9c%9f"}, "edited": false, "score": 0, "creation_date": 1543895483, "post_id": 53605340, "comment_id": 94073019, "body": "Is this the same problem\uff1f <a href=\"https://stackoverflow.com/questions/31295116/androidtextallcaps-false-not-working-for-tablayout-design-support\">android:textAllCaps=\u201cfalse\u201d not working for TabLayout design Support</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1995, "user_id": 8265484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eo5pY.jpg?s=128&g=1", "display_name": "Mayur Dabhi", "link": "https://stackoverflow.com/users/8265484/mayur-dabhi"}, "is_accepted": true, "score": 1, "last_activity_date": 1543895650, "creation_date": 1543895650, "answer_id": 53605447, "question_id": 53605340, "link": "https://stackoverflow.com/questions/53605340/i-have-added-androidtextallcaps-false-but-all-letter-are-still-capitalizatio/53605447#53605447", "title": "I have added android:textAllCaps=&quot;false&quot;, but all letter are still capitalization, why?", "body": "<p>add this line in tablayout </p>\n\n<pre><code>app:tabTextAppearance=\"@android:style/TextAppearance.Widget.TabWidget\"\n</code></pre>\n\n<p>like below</p>\n\n<pre><code> &lt;android.support.design.widget.AppBarLayout\n        android:id=\"@+id/appbar\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        app:tabTextAppearance=\"@android:style/TextAppearance.Widget.TabWidget\"\n        android:paddingTop=\"@dimen/appbar_padding_top\"\n        android:theme=\"@style/AppTheme.AppBarOverlay\"&gt;\n</code></pre>\n"}], "owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 0, "closed_date": 1543904680, "accepted_answer_id": 53605447, "answer_count": 1, "score": 0, "last_activity_date": 1543895650, "creation_date": 1543894685, "question_id": 53605340, "link": "https://stackoverflow.com/questions/53605340/i-have-added-androidtextallcaps-false-but-all-letter-are-still-capitalizatio", "closed_reason": "Duplicate", "title": "I have added android:textAllCaps=&quot;false&quot;, but all letter are still capitalization, why?", "body": "<p>The following code is created by Android Studio 3.2.1 Tabbed Activity wizard, all tab text are capitalization.</p>\n\n<p>I hope only first letter is capitalization for tab text, so I  add android:textAllCaps=\"false\" to layout xml file.</p>\n\n<p>But I find that all tab text are still capitalization, how can I fix it?</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.design.widget.CoordinatorLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n                                                 xmlns:tools=\"http://schemas.android.com/tools\"\n                                                 xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n                                                 android:id=\"@+id/main_content\"\n                                                 android:layout_width=\"match_parent\"\n                                                 android:layout_height=\"match_parent\"\n                                                 android:fitsSystemWindows=\"true\"\n                                                 tools:context=\".MainActivity\"&gt;\n\n    &lt;android.support.design.widget.AppBarLayout\n            android:id=\"@+id/appbar\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:paddingTop=\"@dimen/appbar_padding_top\"\n            android:theme=\"@style/AppTheme.AppBarOverlay\"&gt;\n\n        &lt;android.support.v7.widget.Toolbar\n                android:id=\"@+id/toolbar\"\n                app:title=\"@string/app_name\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"?attr/actionBarSize\"\n                android:layout_weight=\"1\"\n                android:background=\"?attr/colorPrimary\"\n                app:popupTheme=\"@style/AppTheme.PopupOverlay\"\n                app:layout_scrollFlags=\"scroll|enterAlways\"&gt;\n\n        &lt;/android.support.v7.widget.Toolbar&gt;\n\n        &lt;android.support.design.widget.TabLayout\n                android:id=\"@+id/tabs\"\n                android:textAllCaps=\"false\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"&gt;\n\n            &lt;android.support.design.widget.TabItem\n                    android:id=\"@+id/tabItem\"\n                    android:layout_width=\"wrap_content\"\n                    android:layout_height=\"wrap_content\"\n                    android:textAllCaps=\"false\"\n                    android:text=\"@string/tab_text_1\"/&gt;\n\n            &lt;android.support.design.widget.TabItem\n                    android:id=\"@+id/tabItem2\"\n                    android:layout_width=\"wrap_content\"\n                    android:layout_height=\"wrap_content\"\n                    android:text=\"@string/tab_text_2\"/&gt;\n\n            &lt;android.support.design.widget.TabItem\n                    android:id=\"@+id/tabItem3\"\n                    android:layout_width=\"wrap_content\"\n                    android:layout_height=\"wrap_content\"\n                    android:text=\"@string/tab_text_3\"/&gt;\n\n        &lt;/android.support.design.widget.TabLayout&gt;\n    &lt;/android.support.design.widget.AppBarLayout&gt;\n\n    &lt;android.support.v4.view.ViewPager\n            android:id=\"@+id/container\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            app:layout_behavior=\"@string/appbar_scrolling_view_behavior\"/&gt;\n\n    &lt;android.support.design.widget.FloatingActionButton\n            android:id=\"@+id/fab\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_gravity=\"end|bottom\"\n            android:layout_margin=\"@dimen/fab_margin\"\n            app:srcCompat=\"@android:drawable/ic_dialog_email\"/&gt;\n\n&lt;/android.support.design.widget.CoordinatorLayout&gt;\n</code></pre>\n\n<p><strong>Style</strong></p>\n\n<pre><code>&lt;resources&gt;\n\n    &lt;!-- Base application theme. --&gt;\n    &lt;style name=\"AppTheme\" parent=\"Theme.AppCompat.Light.DarkActionBar\"&gt;\n        &lt;!-- Customize your theme here. --&gt;\n        &lt;item name=\"colorPrimary\"&gt;@color/colorPrimary&lt;/item&gt;\n        &lt;item name=\"colorPrimaryDark\"&gt;@color/colorPrimaryDark&lt;/item&gt;\n        &lt;item name=\"colorAccent\"&gt;@color/colorAccent&lt;/item&gt;\n    &lt;/style&gt;\n    &lt;style name=\"AppTheme.NoActionBar\"&gt;\n        &lt;item name=\"windowActionBar\"&gt;false&lt;/item&gt;\n        &lt;item name=\"windowNoTitle\"&gt;true&lt;/item&gt;\n    &lt;/style&gt;\n    &lt;style name=\"AppTheme.AppBarOverlay\" parent=\"ThemeOverlay.AppCompat.Dark.ActionBar\"/&gt;\n    &lt;style name=\"AppTheme.PopupOverlay\" parent=\"ThemeOverlay.AppCompat.Light\"/&gt;\n\n&lt;/resources&gt;\n</code></pre>\n\n<p><strong>Image</strong>\n<a href=\"https://i.stack.imgur.com/QrVX8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QrVX8.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["gradle", "kotlin", "gradle-kotlin-dsl"], "comments": [{"owner": {"reputation": 11015, "user_id": 4583267, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/DcEqh.jpg?s=128&g=1", "display_name": "Thomas Vos", "link": "https://stackoverflow.com/users/4583267/thomas-vos"}, "edited": false, "score": 0, "creation_date": 1545997520, "post_id": 53604782, "comment_id": 94753658, "body": "I&#39;m currently experiencing the same issue. Did you find a solution?"}, {"owner": {"reputation": 11015, "user_id": 4583267, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/DcEqh.jpg?s=128&g=1", "display_name": "Thomas Vos", "link": "https://stackoverflow.com/users/4583267/thomas-vos"}, "edited": false, "score": 1, "creation_date": 1546004878, "post_id": 53604782, "comment_id": 94756606, "body": "Managed to get it working by removing all contents of the <code>android { ... }</code> block except the <code>compileSdkVersion</code>. Then wait a few seconds and add the contents again."}, {"owner": {"reputation": 166, "user_id": 8217056, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LnNYl5VRC_g/AAAAAAAAAAI/AAAAAAAALkM/vyx9IwPJ6nE/photo.jpg?sz=128", "display_name": "Nicholas Doglio", "link": "https://stackoverflow.com/users/8217056/nicholas-doglio"}, "reply_to_user": {"reputation": 11015, "user_id": 4583267, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/DcEqh.jpg?s=128&g=1", "display_name": "Thomas Vos", "link": "https://stackoverflow.com/users/4583267/thomas-vos"}, "edited": false, "score": 0, "creation_date": 1547314071, "post_id": 53604782, "comment_id": 95153945, "body": "@ThomasVos This worked for you? I haven&#39;t solved this yet and just tried your suggestion and I&#39;m still seeing the same errors."}], "answers": [{"comments": [{"owner": {"reputation": 166, "user_id": 8217056, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LnNYl5VRC_g/AAAAAAAAAAI/AAAAAAAALkM/vyx9IwPJ6nE/photo.jpg?sz=128", "display_name": "Nicholas Doglio", "link": "https://stackoverflow.com/users/8217056/nicholas-doglio"}, "edited": false, "score": 0, "creation_date": 1543891166, "post_id": 53604884, "comment_id": 94072079, "body": "Just tried again by changing the <code>plugins {}</code> to an <code>apply {}</code> with the proper plugins and I&#39;m still getting the same &quot;Unresolved reference&quot; errors for keywords."}, {"owner": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "reply_to_user": {"reputation": 166, "user_id": 8217056, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LnNYl5VRC_g/AAAAAAAAAAI/AAAAAAAALkM/vyx9IwPJ6nE/photo.jpg?sz=128", "display_name": "Nicholas Doglio", "link": "https://stackoverflow.com/users/8217056/nicholas-doglio"}, "edited": false, "score": 0, "creation_date": 1543891654, "post_id": 53604884, "comment_id": 94072205, "body": "@NicholasDoglio this is not what I&#39;ve wrote. it should suffice to pull variables into the script; while keywords should be known. the mere problem might rather be, that the <code>rootProject</code> is a library project. move that script to module level, or at least into a separate file than <code>build.gradle</code>."}, {"owner": {"reputation": 166, "user_id": 8217056, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LnNYl5VRC_g/AAAAAAAAAAI/AAAAAAAALkM/vyx9IwPJ6nE/photo.jpg?sz=128", "display_name": "Nicholas Doglio", "link": "https://stackoverflow.com/users/8217056/nicholas-doglio"}, "edited": false, "score": 0, "creation_date": 1543892067, "post_id": 53604884, "comment_id": 94072305, "body": "Sorry if I misunderstood your original comment.  Trying it again with the <code>base-android.gradle.kts</code> file in a separate file from the root level <code>build.gradle</code> does not fix the Unresolved reference errors."}], "tags": [], "owner": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "is_accepted": false, "score": 0, "last_activity_date": 1543890766, "creation_date": 1543890766, "answer_id": 53604884, "question_id": 53604782, "link": "https://stackoverflow.com/questions/53604782/how-to-create-a-base-gradle-file-in-kotlin-dsl-for-multi-module-project/53604884#53604884", "title": "How to create a &quot;base&quot; gradle file in Kotlin DSL for multi-module project?", "body": "<p>the problem might come from trying to apply the <code>plugins</code>.</p>\n\n<pre><code>plugins {\n    id(\"com.android.library\")\n    kotlin(\"kotlin.android\")\n    kotlin(\"kapt\")\n}\n\napply(rootProject.file(\"base-android.gradle.kts\"))\n\n...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4459, "user_id": 2318632, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/kd7KQ.jpg?s=128&g=1", "display_name": "Sir Codesalot", "link": "https://stackoverflow.com/users/2318632/sir-codesalot"}, "is_accepted": false, "score": 0, "last_activity_date": 1594100719, "creation_date": 1594100719, "answer_id": 62768846, "question_id": 53604782, "link": "https://stackoverflow.com/questions/53604782/how-to-create-a-base-gradle-file-in-kotlin-dsl-for-multi-module-project/62768846#62768846", "title": "How to create a &quot;base&quot; gradle file in Kotlin DSL for multi-module project?", "body": "<p>Here's how I do it:</p>\n<p><code>build.gradle.kts</code></p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>apply(from = &quot;${rootProject.projectDir}/common-setup.gradle.kts&quot;)\n</code></pre>\n<p><code>common-setup.gradle.kts</code></p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>apply {\n    fun android(configure: com.android.build.gradle.internal.dsl.BaseAppModuleExtension.() -&gt; Unit): Unit =\n            (project as org.gradle.api.plugins.ExtensionAware).extensions.configure(&quot;android&quot;, configure)\n\n    android {\n        //common setup here\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 166, "user_id": 8217056, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LnNYl5VRC_g/AAAAAAAAAAI/AAAAAAAALkM/vyx9IwPJ6nE/photo.jpg?sz=128", "display_name": "Nicholas Doglio", "link": "https://stackoverflow.com/users/8217056/nicholas-doglio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1427, "favorite_count": 2, "answer_count": 2, "score": 7, "last_activity_date": 1594100719, "creation_date": 1543889793, "last_edit_date": 1543892169, "question_id": 53604782, "link": "https://stackoverflow.com/questions/53604782/how-to-create-a-base-gradle-file-in-kotlin-dsl-for-multi-module-project", "title": "How to create a &quot;base&quot; gradle file in Kotlin DSL for multi-module project?", "body": "<p>To reuse code in gradle files I usually have a \"base\" gradle file for certain modules and just apply them and add whatever new dependencies it might need. I'm in the progress of converting all my gradle files to the new Kotlin DSL but I get \"Unresolved reference\" errors for keywords using the following \"base\" file.</p>\n\n<pre><code>plugins {\n    id(\"com.android.library\")\n    kotlin(\"kotlin.android\")\n    kotlin(\"kapt\")\n}\n\nandroid {\n    compileSdkVersion(App.compileSdk)\n    defaultConfig {\n        minSdkVersion(App.minSdk)\n        targetSdkVersion(App.targetSdk)\n        versionCode = App.versionCode\n        versionName = App.versionName\n        testInstrumentationRunner = \"android.support.test.runner.AndroidJUnitRunner\"\n    }\n\n    buildTypes {\n        getByName(\"release\") {\n            isMinifyEnabled = false\n            proguardFiles(getDefaultProguardFile(\"proguard-android.txt\"), \"proguard-rules.pro\")\n        }\n    }\n\n    compileOptions {\n        sourceCompatibility = JavaVersion.VERSION_1_8\n        targetCompatibility = JavaVersion.VERSION_1_8\n    }\n}\n\ndependencies {\n    val implementation by configurations\n    val testImplementation by configurations\n    val androidTestImplementation by configurations\n\n    implementation(fileTree(mapOf(\"dir\" to \"libs\", \"include\" to listOf(\"*.jar\"))))\n    implementation(Libs.kotlin_stdlib_jdk8)\n    implementation(Libs.appcompat_v7)\n    testImplementation(Libs.junit)\n    androidTestImplementation(Libs.com_android_support_test_runner)\n    androidTestImplementation(Libs.espresso_core)\n}\n</code></pre>\n\n<p>The above file is in my root project and I just use the following in the feature modules</p>\n\n<pre><code>apply(rootProject.file(\"base-android.gradle.kts\"))\n</code></pre>\n\n<p>This worked fine in Groovy but breaks completely when moving to Kotlin, any ideas on what I'm doing wrong or how to properly have a \"base\" gradle file in the Kotlin DSL?</p>\n\n<p>EDIT: Adding full error message</p>\n\n<pre><code>Script compilation errors:\n\n  Line 10: android {\n           ^ Unresolved reference: android\n\n  Line 11:     compileSdkVersion(28)\n               ^ Unresolved reference: compileSdkVersion\n\n  Line 12:     defaultConfig {\n               ^ Unresolved reference: defaultConfig\n\n  Line 13:         minSdkVersion(21)\n                   ^ Unresolved reference: minSdkVersion\n\n  Line 14:         targetSdkVersion(28)\n                   ^ Unresolved reference: targetSdkVersion\n\n  Line 15:         versionCode = 1\n                   ^ Unresolved reference: versionCode\n\n  Line 16:         versionName = \"1.0\"\n                   ^ Unresolved reference: versionName\n\n  Line 17:         testInstrumentationRunner = \"android.support.test.runner.AndroidJUnitRunner\"\n                   ^ Unresolved reference: testInstrumentationRunner\n\n  Line 20:     buildTypes {\n               ^ Unresolved reference: buildTypes\n\n  Line 21:         getByName(\"release\") {\n                   ^ Unresolved reference. None of the following candidates is applicable because of receiver type mismatch: \n                       public inline fun &lt;reified T : Any&gt; NamedDomainObjectCollection&lt;out Any&gt;.getByName(name: String): TypeVariable(T) defined in org.gradle.kotlin.dsl\n                       public inline fun &lt;reified T : Any&gt; NamedDomainObjectCollection&lt;out Any&gt;.getByName(name: String, configure: TypeVariable(T).() -&gt; Unit): TypeVariable(T) defined in org.gradle.kotlin.dsl\n                       public fun &lt;T : Any&gt; NamedDomainObjectCollection&lt;out Any&gt;.getByName(name: String, type: KClass&lt;TypeVariable(T)&gt;): TypeVariable(T) defined in org.gradle.kotlin.dsl\n                       public fun &lt;T : Any&gt; NamedDomainObjectCollection&lt;out Any&gt;.getByName(name: String, type: KClass&lt;TypeVariable(T)&gt;, configure: TypeVariable(T).() -&gt; Unit): TypeVariable(T) defined in org.gradle.kotlin.dsl\n                       public inline fun &lt;reified T : Any&gt; ExtensionContainer.getByName(name: String): TypeVariable(T) defined in org.gradle.kotlin.dsl\n\n  Line 22:             isMinifyEnabled = false\n                       ^ Unresolved reference: isMinifyEnabled\n\n  Line 23:             proguardFiles(getDefaultProguardFile(\"proguard-android.txt\"), \"proguard-rules.pro\")\n                       ^ Unresolved reference: proguardFiles\n\n  Line 23:             proguardFiles(getDefaultProguardFile(\"proguard-android.txt\"), \"proguard-rules.pro\")\n                                     ^ Unresolved reference: getDefaultProguardFile\n\n  Line 27:     compileOptions {\n               ^ Unresolved reference: compileOptions\n\n  Line 28:         sourceCompatibility = JavaVersion.VERSION_1_8\n                   ^ Unresolved reference: sourceCompatibility\n\n  Line 29:         targetCompatibility = JavaVersion.VERSION_1_8\n                   ^ Unresolved reference: targetCompatibility\n\n16 errors\n</code></pre>\n"}, {"tags": ["java", "kotlin", "io", "java.util.scanner"], "comments": [{"owner": {"reputation": 3252, "user_id": 6131611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3789df5ff075b7a2bfa71c8e2dccd18d?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/6131611/pavel"}, "edited": false, "score": 0, "creation_date": 1543878655, "post_id": 53603274, "comment_id": 94069109, "body": "Dou you want to read same data and process it twice for first and second exercises?"}, {"owner": {"reputation": 3252, "user_id": 6131611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3789df5ff075b7a2bfa71c8e2dccd18d?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/6131611/pavel"}, "edited": false, "score": 0, "creation_date": 1543878754, "post_id": 53603274, "comment_id": 94069131, "body": "Or what is the reason to start over a scanner?"}, {"owner": {"reputation": 6181, "user_id": 3322533, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cbbd1b40887d19bc0c8fdd5ef42a05ed?s=128&d=identicon&r=PG", "display_name": "User1291", "link": "https://stackoverflow.com/users/3322533/user1291"}, "reply_to_user": {"reputation": 3252, "user_id": 6131611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3789df5ff075b7a2bfa71c8e2dccd18d?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/6131611/pavel"}, "edited": false, "score": 0, "creation_date": 1543878936, "post_id": 53603274, "comment_id": 94069176, "body": "@Pavel the second exercise requires reading the same input over and over again until eventually, a <code>total</code> is reached that was already reached once."}, {"owner": {"reputation": 3252, "user_id": 6131611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3789df5ff075b7a2bfa71c8e2dccd18d?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/6131611/pavel"}, "edited": false, "score": 0, "creation_date": 1543879305, "post_id": 53603274, "comment_id": 94069292, "body": "I misunderstood that <code>total</code> can decrease as well. Now it&#39;s clear"}], "answers": [{"tags": [], "owner": {"reputation": 3252, "user_id": 6131611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3789df5ff075b7a2bfa71c8e2dccd18d?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/6131611/pavel"}, "is_accepted": true, "score": 3, "last_activity_date": 1543881091, "last_edit_date": 1543881091, "creation_date": 1543880558, "answer_id": 53603628, "question_id": 53603274, "link": "https://stackoverflow.com/questions/53603274/can-i-start-over-a-java-scanner/53603628#53603628", "title": "Can I &quot;start over&quot; a java Scanner?", "body": "<p>If scanner can be resetted, there will be two possibilities:</p>\n\n<p>1) Each time you reset, it starts reading from the file again. It does not give any benefits over creating a new one each time.</p>\n\n<p>2) It saves all read data in RAM. But you can save it by yourself as well. Often it will be more efficient. In the case you can store integer instead of string which saves memory.</p>\n\n<p>If you want just don't close&amp;reopen the file each time, you can use some lower-level file-specific API like <a href=\"https://docs.oracle.com/javase/6/docs/api/java/io/RandomAccessFile.html\" rel=\"nofollow noreferrer\">RandomAccessFile</a> which can be reset using <code>seek(0)</code>.</p>\n\n<p>The reason that <code>Scanner</code> does not have <code>seek</code> method is that it accepts not only file but any <code>InputStream</code> like <code>System.in</code> which can't be read again by design.</p>\n"}, {"comments": [{"owner": {"reputation": 6181, "user_id": 3322533, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cbbd1b40887d19bc0c8fdd5ef42a05ed?s=128&d=identicon&r=PG", "display_name": "User1291", "link": "https://stackoverflow.com/users/3322533/user1291"}, "edited": false, "score": 0, "creation_date": 1543881129, "post_id": 53603658, "comment_id": 94069782, "body": "Well, then I keep looping forever. I <i>did</i> assume that if the task is to get to a duplicate <code>total</code>, there is one. But you&#39;re right, if I cannot make that assumption, I&#39;d probably have to cut the loop at some point and state that I couldn&#39;t reach a duplicate in a reasonable timeframe."}, {"owner": {"reputation": 1682, "user_id": 122742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DF9Vs.jpg?s=128&g=1", "display_name": "Andre Artus", "link": "https://stackoverflow.com/users/122742/andre-artus"}, "reply_to_user": {"reputation": 6181, "user_id": 3322533, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cbbd1b40887d19bc0c8fdd5ef42a05ed?s=128&d=identicon&r=PG", "display_name": "User1291", "link": "https://stackoverflow.com/users/3322533/user1291"}, "edited": false, "score": 1, "creation_date": 1543882069, "post_id": 53603658, "comment_id": 94069991, "body": "It would eventually hit an over- or underflow depending on the sign.But you are likely to get <code>OutOfMemory</code> before then. You know that duplicate totals can only be reached when the sign swaps (no dups in monotonic order), then you can kind of fold the numbers back on themselves and look for where they match (same distance)."}, {"owner": {"reputation": 6181, "user_id": 3322533, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cbbd1b40887d19bc0c8fdd5ef42a05ed?s=128&d=identicon&r=PG", "display_name": "User1291", "link": "https://stackoverflow.com/users/3322533/user1291"}, "edited": false, "score": 0, "creation_date": 1543882567, "post_id": 53603658, "comment_id": 94070119, "body": "Care to elaborate on that &quot;fold the numbers back on themselves&quot; bit?"}, {"owner": {"reputation": 1682, "user_id": 122742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DF9Vs.jpg?s=128&g=1", "display_name": "Andre Artus", "link": "https://stackoverflow.com/users/122742/andre-artus"}, "reply_to_user": {"reputation": 6181, "user_id": 3322533, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cbbd1b40887d19bc0c8fdd5ef42a05ed?s=128&d=identicon&r=PG", "display_name": "User1291", "link": "https://stackoverflow.com/users/3322533/user1291"}, "edited": false, "score": 0, "creation_date": 1543882599, "post_id": 53603658, "comment_id": 94070132, "body": "When I say &quot;(no dups in monotonic order)&quot;, this is of course not true if input is <code>0</code>. I&#39;m talking about if the increase or decrease is in only only direction"}, {"owner": {"reputation": 1682, "user_id": 122742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DF9Vs.jpg?s=128&g=1", "display_name": "Andre Artus", "link": "https://stackoverflow.com/users/122742/andre-artus"}, "reply_to_user": {"reputation": 6181, "user_id": 3322533, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cbbd1b40887d19bc0c8fdd5ef42a05ed?s=128&d=identicon&r=PG", "display_name": "User1291", "link": "https://stackoverflow.com/users/3322533/user1291"}, "edited": false, "score": 1, "creation_date": 1543883245, "post_id": 53603658, "comment_id": 94070283, "body": "In my minds eye I see it as a kind of XY plot. X: 0..oo, for every input the plot moves in the positive X direction and the Y is offset by the input value. If the sign of the input is different from he running total you get a sharp kink. Unless you have at least one such kink (or zeros) you won&#39;t have a dup total."}], "tags": [], "owner": {"reputation": 1682, "user_id": 122742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DF9Vs.jpg?s=128&g=1", "display_name": "Andre Artus", "link": "https://stackoverflow.com/users/122742/andre-artus"}, "is_accepted": false, "score": 1, "last_activity_date": 1543880729, "creation_date": 1543880729, "answer_id": 53603658, "question_id": 53603274, "link": "https://stackoverflow.com/questions/53603274/can-i-start-over-a-java-scanner/53603658#53603658", "title": "Can I &quot;start over&quot; a java Scanner?", "body": "<p>If you just plan on reading the same input repeatedly then open it as a <code>RandomAccessFile</code> and <code>seek</code> back to the start on each iteration.</p>\n\n<p>Of course your algorithm is assuming a constrained input. What do you do if the input consists of one line containing \"+1\"?</p>\n"}], "owner": {"reputation": 6181, "user_id": 3322533, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cbbd1b40887d19bc0c8fdd5ef42a05ed?s=128&d=identicon&r=PG", "display_name": "User1291", "link": "https://stackoverflow.com/users/3322533/user1291"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 319, "favorite_count": 0, "accepted_answer_id": 53603628, "answer_count": 2, "score": 3, "last_activity_date": 1543881091, "creation_date": 1543878198, "last_edit_date": 1543880719, "question_id": 53603274, "link": "https://stackoverflow.com/questions/53603274/can-i-start-over-a-java-scanner", "title": "Can I &quot;start over&quot; a java Scanner?", "body": "<p>Is there a way to make a scanner start from the beginning of its input, again?</p>\n\n<p>Context: I just learned that <a href=\"https://adventofcode.com/\" rel=\"nofollow noreferrer\">https://adventofcode.com/</a> is a thing.</p>\n\n<p>The first task is simple enough (as first tasks often are).</p>\n\n<p>You're given a series of sign-prefixed (<code>+</code> or <code>-</code>) integer values</p>\n\n<p>I.e.</p>\n\n<pre><code>-7\n+16\n+5\n[...]\n</code></pre>\n\n<p>and need to add them.</p>\n\n<p>No big deal.</p>\n\n<p><strong>task01.kts</strong></p>\n\n<pre><code>import java.util.*\n\nval scanner = Scanner(System.`in`)\n\nprivate var total = 0\nwhile(scanner.hasNext()){\n    val number = scanner.nextInt()\n    total += number\n}\n\nprintln(total)\n</code></pre>\n\n<p>The second task states that the read input is repeated over and over again and that we're interested in the first <code>total</code> to be reached twice.</p>\n\n<p>Again, fairly simple:</p>\n\n<p><strong>task02.kts</strong></p>\n\n<pre><code>import java.util.*\nimport java.io.File\nimport Task02.Result.*\n\nsealed class Result{\n    object None: Result()\n    data class Found(val duplicate:Int):Result()\n}\n\nif(args.size &lt; 1) throw IllegalStateException(\"please provide input file as first arg\")\n\nval input = File(args[0])\n\nprivate var total = 0\nprivate val seen = mutableSetOf(0)\n\nprivate var result: Result = None\nwhile(result is None){\n    val scanner = Scanner(input)\n    while(scanner.hasNext()){\n        val number = scanner.nextInt()\n        total += number\n\n        if(seen.contains(total)){\n            result = Found(total)\n            break;\n        }\n        else seen.add(total)\n    }\n}\n\nprintln((result as Found).duplicate)\n</code></pre>\n\n<p>But one interesting difference between the two tasks is that while I don't care where the numbers come from in the first part, I <em>need</em> a <code>File</code> for the second.</p>\n\n<p>And it got me thinking. Is there a \"wrap-around scanner\" or something?</p>\n\n<p>Can I manually <em>reset</em> the Scanner's pointer?</p>\n\n<p>Or can I <em>chain</em> Scanners such that everything the first scanner sees (including the stuff it skips over) gets passed on to the second?</p>\n\n<p>You know, that kind of thing?</p>\n\n<pre><code>       Scanner1                    Scanner2\n[ O | L | L | E | H ]        [   |   |   |   |   ]\n[   | O | L | L | E ]        [   |   |   |   | H ]\n[   |   | O | L | L ]        [   |   |   | E | H ]\n[   |   |   | O | L ]        [   |   | L | E | H ]\n[   |   |   |   | O ]        [   | L | L | E | H ]\n[   |   |   |   |   ]        [ O | L | L | E | H ]\n</code></pre>\n\n<p>or anything else along these lines?</p>\n\n<p>I have a hunch there isn't because most everything I could think of would require the caching of all input (which, depending on the input size, may not be reasonable), but I'm still curious if I haven't overlooked something.</p>\n"}, {"tags": ["android", "kotlin", "android-8.0-oreo", "jobintentservice"], "owner": {"reputation": 17465, "user_id": 559850, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/vJfye.jpg?s=128&g=1", "display_name": "styler1972", "link": "https://stackoverflow.com/users/559850/styler1972"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 187, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1543875309, "creation_date": 1543875309, "question_id": 53602764, "link": "https://stackoverflow.com/questions/53602764/anr-from-a-jobintentservice-that-is-doing-very-little", "title": "ANR from a JobIntentService that is doing very little", "body": "<p>I have a JobIntentService that is not doing a lot of work at all, but caused an ANR today.</p>\n\n<p>Is there anything wrong with calling code from the companion object in the following way?</p>\n\n<pre><code>class MyIntentService : JobIntentService() {\n\n    @Inject\n    lateinit var myObject: MyObject\n\n    override fun onCreate() {\n        super.onCreate()\n        MyApplication.appComponent(this).inject(this)\n    }\n\n    override fun onHandleWork(intent: Intent) {\n        //doing work on a separate thread\n    }\n\n    companion object {\n        fun enqueueMyWork(context: Context, intent: Intent) {\n            enqueueWork(context, MyIntentService::class.java, JOB_ID, intent)\n        }\n    }\n}\n</code></pre>\n\n<p>There isn't anything in <code>onHandleWork()</code> that is causing the ANR because the method is invoked from a separate thread, per the documentation.</p>\n\n<p>Is there a problem with the way that work is being enqueued through the companion object that would cause an ANR?  The injection code is standard Dagger2 dependency injection that I've never had a problem with.</p>\n\n<p>The ANR looks like this</p>\n\n<p><code>12-03 13:29:42.272 872-872/? I//system/bin/tombstoned: intercept for pid 29905 and type kDebuggerdNativeBacktrace terminated: due to input</code></p>\n"}, {"tags": ["android", "list", "kotlin", "iterator"], "answers": [{"comments": [{"owner": {"reputation": 5134, "user_id": 4785114, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/7R0VR.jpg?s=128&g=1", "display_name": "alexpfx", "link": "https://stackoverflow.com/users/4785114/alexpfx"}, "edited": false, "score": 0, "creation_date": 1543876800, "post_id": 53602672, "comment_id": 94068531, "body": "this should help"}], "tags": [], "owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "is_accepted": true, "score": 2, "last_activity_date": 1543903667, "last_edit_date": 1543903667, "creation_date": 1543874846, "answer_id": 53602672, "question_id": 53602112, "link": "https://stackoverflow.com/questions/53602112/cycling-over-an-array-in-kotlin/53602672#53602672", "title": "Cycling over an array in Kotlin", "body": "<p>Using <code>slice()</code> on the array:</p>\n\n<pre><code>array = arrayOf(array.last()) + array.sliceArray(0 until array.size - 1)\n</code></pre>\n\n<p>rearranges the array by putting the last item in the 1st position and shifting the rest to the right.</p>\n\n<pre><code>var array = arrayOf(1, 2, 3, 4)\n\n(0 until array.size).forEach {\n    array.forEach { print(it.toString() + \" \") }\n    println()\n    array = arrayOf(array.last()) + array.sliceArray(0 until array.size - 1)\n}\n</code></pre>\n\n<p>will print:</p>\n\n<pre><code>1 2 3 4 \n4 1 2 3 \n3 4 1 2 \n2 3 4 1 \n</code></pre>\n\n<p><br/>The same result can be achieved with:</p>\n\n<pre><code>array = arrayOf(array.last()) + array.filterIndexed { index, _ -&gt;  index &lt; array.size - 1 }.toTypedArray() \n</code></pre>\n\n<p><br/>\nThis extension function:</p>\n\n<pre><code>fun &lt;T&gt; Array&lt;T&gt;.rightCycle(d: Int): Array&lt;T&gt; {\n    val n = d % size\n    if (n == 0) return this\n    return sliceArray(size - n until size) + sliceArray(0 until size - n)\n}\n</code></pre>\n\n<p>can be used to cycle any array <code>d</code> places each time:</p>\n\n<pre><code>var array = arrayOf(1, 2, 3, 4, 5, 6)\n\n(0 until array.size).forEach {\n    array.forEach { print(it.toString() + \" \") }\n    println()\n    array = array.rightCycle(2)\n}\n</code></pre>\n\n<p>will print:</p>\n\n<pre><code>1 2 3 4 5 6 \n5 6 1 2 3 4 \n3 4 5 6 1 2 \n1 2 3 4 5 6 \n5 6 1 2 3 4 \n3 4 5 6 1 2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1682, "user_id": 122742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DF9Vs.jpg?s=128&g=1", "display_name": "Andre Artus", "link": "https://stackoverflow.com/users/122742/andre-artus"}, "is_accepted": false, "score": 1, "last_activity_date": 1543881384, "last_edit_date": 1543881384, "creation_date": 1543878080, "answer_id": 53603256, "question_id": 53602112, "link": "https://stackoverflow.com/questions/53602112/cycling-over-an-array-in-kotlin/53603256#53603256", "title": "Cycling over an array in Kotlin", "body": "<pre><code>fun IntArray.pivoted(p: Int): IntArray = sliceArray(p until size) + sliceArray(0 until p)\n</code></pre>\n\n<p>Can be used for example like this (right rotation):</p>\n\n<pre><code>(array.size downTo 1).forEach {\n    println(array.pivoted(it).joinToString())\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>val cycles = (0 until array.size).map {\n    array.pivoted(array.size - it)\n}\n</code></pre>\n\n<p>or like this (left rotation) </p>\n\n<pre><code>val cycles = (0 until array.size).map {\n    array.pivoted(it)\n}\n</code></pre>\n\n<p>to be sent to the console in the standard fashion</p>\n\n<pre><code>for (cycle in cycles) {\n    println(cycle.joinToString())\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5134, "user_id": 4785114, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/7R0VR.jpg?s=128&g=1", "display_name": "alexpfx", "link": "https://stackoverflow.com/users/4785114/alexpfx"}, "is_accepted": false, "score": 0, "last_activity_date": 1543880626, "creation_date": 1543880626, "answer_id": 53603645, "question_id": 53602112, "link": "https://stackoverflow.com/questions/53602112/cycling-over-an-array-in-kotlin/53603645#53603645", "title": "Cycling over an array in Kotlin", "body": "<p>After thinking a bit and check other answers I implemented a version too, using <code>subList</code> from <code>MutableList</code>:</p>\n\n<pre><code>fun &lt;T&gt; MutableList&lt;T&gt;.rotate(): MutableList&lt;T&gt; {\n    val subList = this.toMutableList().subList(0, this.size - 1)\n    subList.add(0, this.last())\n    return subList\n}\n\n\n\nclass BuildLeagueTournamentTest {\n\n\n    @Test\n    fun testInvoke() {\n        val teams = createTeams()\n        Assert.assertArrayEquals(intArrayOf(1,2,3,4), teams.toIntArray())\n\n        var newTeams = teams.rotate()\n        Assert.assertArrayEquals(intArrayOf(1,2,3,4), teams.toIntArray())\n        Assert.assertArrayEquals(intArrayOf(4,1,2,3), newTeams.toIntArray())\n\n        newTeams = newTeams.rotate()\n        Assert.assertArrayEquals(intArrayOf(3,4,1,2), newTeams.toIntArray())\n\n    }\n\n    private fun createTeams(): MutableList&lt;Int&gt; {\n        return mutableListOf(1, 2, 3, 4)\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 5134, "user_id": 4785114, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/7R0VR.jpg?s=128&g=1", "display_name": "alexpfx", "link": "https://stackoverflow.com/users/4785114/alexpfx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 0, "accepted_answer_id": 53602672, "answer_count": 3, "score": 0, "last_activity_date": 1543903667, "creation_date": 1543872203, "question_id": 53602112, "link": "https://stackoverflow.com/questions/53602112/cycling-over-an-array-in-kotlin", "title": "Cycling over an array in Kotlin", "body": "<p>Is there in Kotlin something like Cycle Iterator from Guava library?</p>\n\n<p><a href=\"https://google.github.io/guava/releases/15.0/api/docs/com/google/common/collect/Iterators.html#cycle(java.lang.Iterable)\" rel=\"nofollow noreferrer\">https://google.github.io/guava/releases/15.0/api/docs/com/google/common/collect\n/Iterators.html#cycle(java.lang.Iterable)</a></p>\n\n<p>I want to cycle an array, like:</p>\n\n<pre><code>1 2 3 4\n4 1 2 3\n3 4 1 2\n</code></pre>\n\n<p>...</p>\n\n<p>If possible with native Kotlin or well-accepted libraries.</p>\n\n<p>I won't like to add Guava to my codebase. </p>\n"}, {"tags": ["reflection", "kotlin"], "comments": [{"owner": {"reputation": 128160, "user_id": 321697, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/FHlMy.jpg?s=128&g=1", "display_name": "Kevin Coppock", "link": "https://stackoverflow.com/users/321697/kevin-coppock"}, "edited": false, "score": 0, "creation_date": 1543869047, "post_id": 53601336, "comment_id": 94065280, "body": "With your current code, it would not compile if both methods were not overridden from the interface. What exactly are you looking for? Is MyInterfaceImpl intended to abstract? What happens if the interface method is overridden in an intermediate parent class of MyInterfaceImpl?"}, {"owner": {"reputation": 1772, "user_id": 3202612, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/da41e2b7a396f1cb02df21488adc0e41?s=128&d=identicon&r=PG&f=1", "display_name": "Happy", "link": "https://stackoverflow.com/users/3202612/happy"}, "reply_to_user": {"reputation": 128160, "user_id": 321697, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/FHlMy.jpg?s=128&g=1", "display_name": "Kevin Coppock", "link": "https://stackoverflow.com/users/321697/kevin-coppock"}, "edited": false, "score": 1, "creation_date": 1543869272, "post_id": 53601336, "comment_id": 94065380, "body": "<code>MyInterface</code> defines a body for both methods, so the snippet compile. <code>MyInterfaceImpl</code> is not abstract. And if the interface method is overridden in an intermediate parent class, I think I&#39;d like to know which class implements the method."}, {"owner": {"reputation": 128160, "user_id": 321697, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/FHlMy.jpg?s=128&g=1", "display_name": "Kevin Coppock", "link": "https://stackoverflow.com/users/321697/kevin-coppock"}, "edited": false, "score": 0, "creation_date": 1543869391, "post_id": 53601336, "comment_id": 94065437, "body": "Ah right, forgot default methods in Kotlin don&#39;t require that to be explicitly stated."}, {"owner": {"reputation": 128160, "user_id": 321697, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/FHlMy.jpg?s=128&g=1", "display_name": "Kevin Coppock", "link": "https://stackoverflow.com/users/321697/kevin-coppock"}, "edited": false, "score": 0, "creation_date": 1543875290, "post_id": 53601336, "comment_id": 94067931, "body": "I&#39;m interested if someone else has a solution. Spent some time looking into it but I&#39;m not convinced that it&#39;s actually possible. Also curious what your actual use case is for this, as there may be another approach?"}, {"owner": {"reputation": 1772, "user_id": 3202612, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/da41e2b7a396f1cb02df21488adc0e41?s=128&d=identicon&r=PG&f=1", "display_name": "Happy", "link": "https://stackoverflow.com/users/3202612/happy"}, "reply_to_user": {"reputation": 128160, "user_id": 321697, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/FHlMy.jpg?s=128&g=1", "display_name": "Kevin Coppock", "link": "https://stackoverflow.com/users/321697/kevin-coppock"}, "edited": false, "score": 1, "creation_date": 1543878643, "post_id": 53601336, "comment_id": 94069105, "body": "I&#39;ll probably add a suggestion on github in a few days (if no solution). About my use case: the real interface defines 6 methods, all optional. Depending on 2 inputs, we use one implementation and one method (or another). If the implementation does not override the method, an exception is thrown (defined in the interface bodies). At runtime we display the methods overridden so the client can check if the method is available or not. I&#39;ll check for a pattern matching my use case (I&#39;m pretty sure there is one), but I guess it would make my code a lot more complicated. Thanks for your time btw."}, {"owner": {"reputation": 1772, "user_id": 3202612, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/da41e2b7a396f1cb02df21488adc0e41?s=128&d=identicon&r=PG&f=1", "display_name": "Happy", "link": "https://stackoverflow.com/users/3202612/happy"}, "reply_to_user": {"reputation": 128160, "user_id": 321697, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/FHlMy.jpg?s=128&g=1", "display_name": "Kevin Coppock", "link": "https://stackoverflow.com/users/321697/kevin-coppock"}, "edited": false, "score": 0, "creation_date": 1543879543, "post_id": 53601336, "comment_id": 94069349, "body": "Note: this interface may have about 25-30 implementations."}], "answers": [{"comments": [{"owner": {"reputation": 1772, "user_id": 3202612, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/da41e2b7a396f1cb02df21488adc0e41?s=128&d=identicon&r=PG&f=1", "display_name": "Happy", "link": "https://stackoverflow.com/users/3202612/happy"}, "edited": false, "score": 0, "creation_date": 1543947377, "post_id": 53609659, "comment_id": 94098557, "body": "Which Kotlin version did you use? With 1.3.10 I got this result: <code>fun MyInterfaceImpl.bar(): kotlin.Unit</code> <code>fun MyInterfaceImpl.foo(): kotlin.Unit</code>. I&#39;ll dig into your suggestion."}, {"owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "reply_to_user": {"reputation": 1772, "user_id": 3202612, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/da41e2b7a396f1cb02df21488adc0e41?s=128&d=identicon&r=PG&f=1", "display_name": "Happy", "link": "https://stackoverflow.com/users/3202612/happy"}, "edited": false, "score": 0, "creation_date": 1543950071, "post_id": 53609659, "comment_id": 94099821, "body": "I&#39;m on 1.3.10 too. I wish I could share it on TryKotlin, but it blocks reflection for obvious reasons."}, {"owner": {"reputation": 1772, "user_id": 3202612, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/da41e2b7a396f1cb02df21488adc0e41?s=128&d=identicon&r=PG&f=1", "display_name": "Happy", "link": "https://stackoverflow.com/users/3202612/happy"}, "edited": false, "score": 0, "creation_date": 1543963603, "post_id": 53609659, "comment_id": 94105595, "body": "I found an easy solution. Thanks for putting me on the way."}], "tags": [], "owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "is_accepted": false, "score": 1, "last_activity_date": 1543915922, "creation_date": 1543915922, "answer_id": 53609659, "question_id": 53601336, "link": "https://stackoverflow.com/questions/53601336/how-to-know-if-a-method-has-been-defined-in-an-interface/53609659#53609659", "title": "How to know if a method has been defined in an interface", "body": "<p>From what I know, where are two ways to achieve that dubious goal.</p>\n\n<p>I'll demonstrate easy one, and discuss idea behind the harder one.</p>\n\n<p>Easy one is based on simply calling toString() on the method:</p>\n\n<pre><code>val functions = MyInterfaceImpl::class.functions\n\nval bar = (functions.toList()[0]) \nval foo = (functions.toList()[2]) \n\nprintln(bar.toString()) // fun MyInterfaceImpl.bar(): kotlin.Unit\nprintln(foo.toString()) // fun MyInterface.foo(): kotlin.Unit\n</code></pre>\n\n<p>As you can see, you can figure if the method was overridden or not by parsing the string.</p>\n\n<p>Harder solution would be to dig into <code>KFunctionImpl</code>, which has <code>delegate</code> member, which has <code>dispatchReceiverParameter</code></p>\n\n<p>That's a lot of nasty reflection, which is even more nasty, because most of those classes are internal and lazily initialized.</p>\n"}, {"tags": [], "owner": {"reputation": 1772, "user_id": 3202612, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/da41e2b7a396f1cb02df21488adc0e41?s=128&d=identicon&r=PG&f=1", "display_name": "Happy", "link": "https://stackoverflow.com/users/3202612/happy"}, "is_accepted": true, "score": 1, "last_activity_date": 1543963566, "creation_date": 1543963566, "answer_id": 53622582, "question_id": 53601336, "link": "https://stackoverflow.com/questions/53601336/how-to-know-if-a-method-has-been-defined-in-an-interface/53622582#53622582", "title": "How to know if a method has been defined in an interface", "body": "<p>We can compare <code>MyInterfaceImpl::class.declaredFunctions</code> and <code>MyInterface::class.declaredFunctions</code>. </p>\n\n<p>This property lists all functions declared in this class.</p>\n"}], "owner": {"reputation": 1772, "user_id": 3202612, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/da41e2b7a396f1cb02df21488adc0e41?s=128&d=identicon&r=PG&f=1", "display_name": "Happy", "link": "https://stackoverflow.com/users/3202612/happy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 1, "accepted_answer_id": 53622582, "answer_count": 2, "score": 2, "last_activity_date": 1543963566, "creation_date": 1543868754, "last_edit_date": 1543907672, "question_id": 53601336, "link": "https://stackoverflow.com/questions/53601336/how-to-know-if-a-method-has-been-defined-in-an-interface", "title": "How to know if a method has been defined in an interface", "body": "<p>Given the following code:</p>\n\n<pre><code>interface MyInterface {\n    fun foo() {\n        // body\n    }\n\n    fun bar() {\n        // body\n    }\n}\n\nclass MyInterfaceImpl: MyInterface {\n    override fun bar() {\n        // body\n    }\n}\n</code></pre>\n\n<p>I need to know at runtime that <code>bar()</code> has been overridden and <code>foo()</code> hasn't. How to do this using reflection?</p>\n\n<p>Note: <code>java.lang.reflect.Method#getDeclaringClass()</code> always returns <code>MyInterfaceImpl::class.java</code> and <code>java.lang.reflect.Method#isDefault()</code> always returns <code>false</code>. I did not find the solution in <code>KClass</code>.</p>\n"}, {"tags": ["android", "firebase", "kotlin", "firebase-authentication"], "answers": [{"comments": [{"owner": {"reputation": 7066, "user_id": 939501, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5TVE2.png?s=128&g=1", "display_name": "vishal dharankar", "link": "https://stackoverflow.com/users/939501/vishal-dharankar"}, "edited": false, "score": 0, "creation_date": 1543908742, "post_id": 53603403, "comment_id": 94077016, "body": "thanks , yes that was the issues i messed up the version and didnt notice."}], "tags": [], "owner": {"reputation": 23567, "user_id": 5081766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f1f78b145103df7e99305218df85a5b?s=128&d=identicon&r=PG&f=1", "display_name": "bojeil", "link": "https://stackoverflow.com/users/5081766/bojeil"}, "is_accepted": true, "score": 2, "last_activity_date": 1543879040, "creation_date": 1543879040, "answer_id": 53603403, "question_id": 53601264, "link": "https://stackoverflow.com/questions/53601264/deep-link-doesnt-work-from-firebase-email-verification-link/53603403#53603403", "title": "Deep link doesnt work from Firebase email verification link", "body": "<pre><code>val actionCodeSettings = ActionCodeSettings.newBuilder()\n        .setUrl(\"https://testapp.page.link?login=true\")\n        .setHandleCodeInApp(true)\n        .setIOSBundleId(\"test.example.com\")\n        .setAndroidPackageName(\n                \"test.example.com\",\n                true, \n                // Minimum android version of app.\n                \"12\" )\n        .build()\n</code></pre>\n\n<p>I think you are requiring version \"12\" of your app which is likely not installed on device. You can pass null for that field or the current version of your app.</p>\n"}], "owner": {"reputation": 7066, "user_id": 939501, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5TVE2.png?s=128&g=1", "display_name": "vishal dharankar", "link": "https://stackoverflow.com/users/939501/vishal-dharankar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 376, "favorite_count": 0, "accepted_answer_id": 53603403, "answer_count": 1, "score": 1, "last_activity_date": 1543879040, "creation_date": 1543868413, "question_id": 53601264, "link": "https://stackoverflow.com/questions/53601264/deep-link-doesnt-work-from-firebase-email-verification-link", "title": "Deep link doesnt work from Firebase email verification link", "body": "<p>I have setup a deep link in firebase console ,updates SHA1, SHA256 and I tried calling the deep link from mobile browser it perfectly opens installed app , but when I try using email verification link sent from app it goes to play store. Below is how verification link is being sent </p>\n\n<pre><code>val actionCodeSettings = ActionCodeSettings.newBuilder()\n            .setUrl(\"https://testapp.page.link?login=true\")\n            .setHandleCodeInApp(true)\n            .setIOSBundleId(\"test.example.com\")\n            .setAndroidPackageName(\n                    \"test.example.com\",\n                    true, \n                    \"12\" )\n            .build()\n\n\n    mAuth!!.sendSignInLinkToEmail(email, actionCodeSettings)\n            .addOnCompleteListener { task -&gt;\n                if (task.isSuccessful) {\n                    Log.d(\"EmailVerification\", \"Email sent.\")\n                }\n            }\n</code></pre>\n\n<p>My intent filter looks like below</p>\n\n<pre><code> &lt;intent-filter&gt;\n            &lt;action android:name=\"android.intent.action.VIEW\" /&gt;\n\n            &lt;category android:name=\"android.intent.category.DEFAULT\" /&gt;\n            &lt;category android:name=\"android.intent.category.BROWSABLE\" /&gt;\n\n\n\n            &lt;data\n                android:host=\"testapp.page.link\"\n                android:scheme=\"http\" /&gt;\n            &lt;data\n                android:host=\"testapp.page.link\"\n                android:scheme=\"https\" /&gt;\n\n        &lt;/intent-filter&gt;\n</code></pre>\n\n<p>I have whitelisted the domain , I repeat the link works from mobile browser but not from email. Any help appreciated greatly </p>\n"}, {"tags": ["kotlin", "swagger-codegen"], "owner": {"reputation": 11616, "user_id": 6703783, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/af329d320f6609622cc298ccdeb1ace7?s=128&d=identicon&r=PG&f=1", "display_name": "Manu Chadha", "link": "https://stackoverflow.com/users/6703783/manu-chadha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 265, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1543954080, "creation_date": 1543866969, "last_edit_date": 1543954080, "question_id": 53600980, "link": "https://stackoverflow.com/questions/53600980/how-to-run-a-kotlin-server-generated-by-swagger-codegen", "title": "How to run a Kotlin server generated by Swagger Codegen?", "body": "<p>I am unable to run the <code>kotlin-server</code> generated by Swagger Codegen v. 3.</p>\n\n<p>The <code>.yaml</code> file is:</p>\n\n<pre class=\"lang-yaml prettyprint-override\"><code>openapi: 3.0.0\ninfo:\n  title: Experiement with Swagger\n  description: Test\n  version: 1.0.0\nservers:\n  - url: 'http://localhost:8080'\n    description: production server's url\ntags:\n  - name: Test\n    description: Test\n    externalDocs:\n      description: Find out more\n      url: 'http://localhost:8080'\npaths:\n  /testURI:\n    post:\n      tags:\n        - Test\n      summary: Test\n      description: Test\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              $ref: '#/components/schemas/Test'\n      responses:\n        '200':\n          description: Test success\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/TestSuccessResponse'\n        '404':\n          description: &gt;-\n            Only a signed in user can add a question. This response means that\n            the user isn't signed in.\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/UnauthorisedErrorResponse'\n        '500':\n          description: &gt;-\n            means some internal error occur on the server while doing the\n            operation. The state of the operation if un-determined and the\n            operation could be succesful, failed or partially successful\n            (because some database operations are not rolled back if error\n            occurs!\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/InternalServerErrorResponse'\n\n\ncomponents:\n  schemas:\n    Test:\n      type: object\n      properties:\n        some-input:\n          type: string\n\n    TestSuccessResponse:\n      type: object\n      properties:\n        result:\n          type: string\n          enum:\n            - success\n        additional-info:\n          type: string\n          enum:\n            - Test successful\n      required:\n        - result\n        - additional-info\n    UnauthorisedErrorResponse:\n      type: object\n      properties:\n        result:\n          type: string\n          enum:\n            - error\n        additional-info:\n          type: string\n          enum:\n            - Not authorised\n      required:\n        - result\n        - additional-info\n    InternalServerErrorResponse:\n      type: object\n      properties:\n        result:\n          type: string\n          enum:\n            - error\n        additional-info:\n          type: string\n          enum:\n            - Internal Server Error\n      required:\n        - result\n        - additional-info\n</code></pre>\n\n<p>I pasted it into Swagger Editor, downloaded the <code>kotlin-server</code> <code>kotlin-server-server-generated.zip</code>, unzipped it at <code>C:\\Users\\manu\\Documents\\manu\\kotlin-server-server-generated</code>, opened <code>Readme.MD</code> file and followed the instructions in it.</p>\n\n<p>Using Windows <code>cmd</code>, in <code>C:\\Users\\manu\\Documents\\manu\\kotlin-server-server-generated</code>,<br>\nfirst I ran <code>gradle wrapper</code>.</p>\n\n<p>I got this output:</p>\n\n<blockquote>\n  <p>Starting a Gradle Daemon, 1 incompatible and 2 stopped Daemons could not be reused, use --status for details<br>\n  Build cache is an incubating feature.  </p>\n  \n  <p>BUILD SUCCESSFUL in 17s<br>\n  1 actionable task: 1 executed</p>\n</blockquote>\n\n<p>Then I ran <code>gradlew check assemble</code>:</p>\n\n<blockquote>\n  <p>C:\\Users\\manu\\Documents\\manu\\kotlin-server-server-generated>gradlew check assemble<br>\n  Starting a Gradle Daemon, 1 incompatible and 2 stopped Daemons could not be reused, use --status for details<br>\n  Build cache is an incubating feature.<br>\n  w: C:\\Users\\manu\\Documents\\manu\\kotlin-server-server-generated\\src\\main\\kotlin\\io\\swagger\\server\\apis\\TestApi.kt: (51, 9): Variable 'gson' is never used<br>\n  w: C:\\Users\\manu\\Documents\\manu\\kotlin-server-server-generated\\src\\main\\kotlin\\io\\swagger\\server\\apis\\TestApi.kt: (52, 9): Variable 'empty' is never used  </p>\n  \n  <p>Task :startShadowScripts<br>\n  Using TaskInputs.file() with something that doesn't resolve to a File object has been deprecated and is scheduled to be removed in Gradle 5.0. Use TaskInputs.files() instead.  </p>\n  \n  <p>BUILD SUCCESSFUL in 36s<br>\n  10 actionable tasks: 10 executed</p>\n</blockquote>\n\n<p>Then I ran <code>java -jar ./build/libs/kotlin-server.jar</code>.</p>\n\n<p>But when I pointed the browser to <code>localhost:8080</code>, I see <code>Page Not Found</code>. </p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["android", "kotlin", "google-calendar-api"], "comments": [{"owner": {"reputation": 4630, "user_id": 8039298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2363b72429d221115bec666a43fa402c?s=128&d=identicon&r=PG&f=1", "display_name": "Barns", "link": "https://stackoverflow.com/users/8039298/barns"}, "edited": false, "score": 1, "creation_date": 1543867212, "post_id": 53600943, "comment_id": 94064442, "body": "This question is very concise and well structured. Have you update your developer environment or gradle version? Or are you testing on a different Android version?"}, {"owner": {"reputation": 83, "user_id": 5507763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/svEIx.jpg?s=128&g=1", "display_name": "basquith16", "link": "https://stackoverflow.com/users/5507763/basquith16"}, "reply_to_user": {"reputation": 4630, "user_id": 8039298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2363b72429d221115bec666a43fa402c?s=128&d=identicon&r=PG&f=1", "display_name": "Barns", "link": "https://stackoverflow.com/users/8039298/barns"}, "edited": false, "score": 0, "creation_date": 1543887541, "post_id": 53600943, "comment_id": 94071296, "body": "Thanks! It turned out that indeed nothing was wrong with this particular function.  I just spent the entire day debugging and finally traced it back to events being created that had end dates in the past. I added some logic to keep it from happening and now it seems to be functioning correctly."}], "owner": {"reputation": 83, "user_id": 5507763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/svEIx.jpg?s=128&g=1", "display_name": "basquith16", "link": "https://stackoverflow.com/users/5507763/basquith16"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1543866828, "creation_date": 1543866828, "question_id": 53600943, "link": "https://stackoverflow.com/questions/53600943/google-calendar-insert-events-not-executing", "title": "Google Calendar Insert Events not executing", "body": "<p>I have the following Kotlin code in my Android app:</p>\n\n<pre><code>    fun scheduleMeeting(start: Date, end: Date, prospect: \nProspect, callback: (Boolean) -&gt; Unit) {\n        doAsync {\n            var event = createMeeting(start, end, prospect)\n            event = service.events().insert(\"primary\", event)\n                    .setSendNotifications(true)\n                    .execute()\n            lastEventAdded = GIDEvent(event)\n            syncCalendars()\n            syncCalendarsAsync()\n            uiThread {\n                CommonAlerts.calAlert(lastEventAdded!!, \nprospect.name!!)\n                callback(true)\n            }\n        }\n    }\n</code></pre>\n\n<p>Expected Behavior: Add the event to user calendar and alert the user of success.</p>\n\n<p>Current Behavior: code does not execute beyond service.events().insert()</p>\n\n<p>This was working and then one day it suddenly it stopped working. I cannot find any errors in logcat or anything to tell me what is wrong</p>\n"}, {"tags": ["android", "kotlin", "rect", "imagebrush"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 7164413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e0e900b891736ae230c6f16e9d72bba?s=128&d=identicon&r=PG&f=1", "display_name": "SarcasticIdealist", "link": "https://stackoverflow.com/users/7164413/sarcasticidealist"}, "is_accepted": false, "score": 0, "last_activity_date": 1553716425, "creation_date": 1553716425, "answer_id": 55385452, "question_id": 53600800, "link": "https://stackoverflow.com/questions/53600800/is-there-a-similar-thing-in-android-to-wpfs-imagebrush/55385452#55385452", "title": "Is there a similar thing in Android to WPF&#39;s Imagebrush?", "body": "<p>I will answer my question for future reference then. Kotlin doesn't have the exact same solution, but you can draw bitmaps into rects similar to this way:</p>\n\n<pre><code>canvas.drawBitmap(image, Rect(0, 0, image!!.width, image!!.height), rect, null)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7164413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e0e900b891736ae230c6f16e9d72bba?s=128&d=identicon&r=PG&f=1", "display_name": "SarcasticIdealist", "link": "https://stackoverflow.com/users/7164413/sarcasticidealist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553716582, "creation_date": 1543866307, "last_edit_date": 1553716582, "question_id": 53600800, "link": "https://stackoverflow.com/questions/53600800/is-there-a-similar-thing-in-android-to-wpfs-imagebrush", "title": "Is there a similar thing in Android to WPF&#39;s Imagebrush?", "body": "<p>I would like to fill each Rect with a small unique image. Is there a best way to do this? Right now they are drawn with using a Paint object.</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 3, "creation_date": 1543859223, "post_id": 53599084, "comment_id": 94060609, "body": "Just by writing this you have already stored it in RAM. By writing <code>val x = singleton</code> you have retrieved it. What exactly are you asking here?"}, {"owner": {"reputation": 327, "user_id": 10740241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd244f6c101d68f278771c9b6b576ca?s=128&d=identicon&r=PG&f=1", "display_name": "twothreezarsix", "link": "https://stackoverflow.com/users/10740241/twothreezarsix"}, "reply_to_user": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1543892006, "post_id": 53599084, "comment_id": 94072289, "body": "@MarkoTopolnik Specified the need in the question."}], "answers": [{"comments": [{"owner": {"reputation": 327, "user_id": 10740241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd244f6c101d68f278771c9b6b576ca?s=128&d=identicon&r=PG&f=1", "display_name": "twothreezarsix", "link": "https://stackoverflow.com/users/10740241/twothreezarsix"}, "edited": false, "score": 0, "creation_date": 1543892108, "post_id": 53600810, "comment_id": 94072312, "body": "&#39;When the concrete implementation of the singleton is generated by an external tool or library (Retrofit, Room, \u2026) and its instance is retrieved using a custom builder or factory method, you usually declare the singleton as an interface or abstract class and it can\u2019t be an object&#39;. Got this from the link!!!                                                                                                                        Thanks!!!"}, {"owner": {"reputation": 117, "user_id": 10582460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6ecf55b46ac759ad232ca003b90d547?s=128&d=identicon&r=PG", "display_name": "PIZZZZZZZZZZZA is here", "link": "https://stackoverflow.com/users/10582460/pizzzzzzzzzzza-is-here"}, "reply_to_user": {"reputation": 327, "user_id": 10740241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd244f6c101d68f278771c9b6b576ca?s=128&d=identicon&r=PG&f=1", "display_name": "twothreezarsix", "link": "https://stackoverflow.com/users/10740241/twothreezarsix"}, "edited": false, "score": 0, "creation_date": 1543940427, "post_id": 53600810, "comment_id": 94095057, "body": "@user10740241 No Problem!"}], "tags": [], "owner": {"reputation": 117, "user_id": 10582460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6ecf55b46ac759ad232ca003b90d547?s=128&d=identicon&r=PG", "display_name": "PIZZZZZZZZZZZA is here", "link": "https://stackoverflow.com/users/10582460/pizzzzzzzzzzza-is-here"}, "is_accepted": false, "score": 0, "last_activity_date": 1543866340, "creation_date": 1543866340, "answer_id": 53600810, "question_id": 53599084, "link": "https://stackoverflow.com/questions/53599084/how-to-store-and-retrieve-an-object-of-singleton-class-in-kotlin/53600810#53600810", "title": "How to store and retrieve an object of singleton class in Kotlin", "body": "<p>Here is a link, <a href=\"https://medium.com/@BladeCoder/kotlin-singletons-with-argument-194ef06edd9e\" rel=\"nofollow noreferrer\">Singletons with argument -Medium</a></p>\n\n<p>to finish off your code,\nPlease type: <code>val r = singleton</code>\nThen your object is retrieved.</p>\n"}, {"tags": [], "owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "is_accepted": false, "score": 0, "last_activity_date": 1543906764, "last_edit_date": 1543906764, "creation_date": 1543904259, "answer_id": 53606779, "question_id": 53599084, "link": "https://stackoverflow.com/questions/53599084/how-to-store-and-retrieve-an-object-of-singleton-class-in-kotlin/53606779#53606779", "title": "How to store and retrieve an object of singleton class in Kotlin", "body": "<p>You don't have to write <code>x = singleton</code>, I wrote that in my comment just as a way to ask you what your actual need is.</p>\n\n<p>You should definitely use <code>SharedPreferences</code> for persistent storage, but you can also keep the simple <code>singleton.propertyName</code> syntax. You just have to implement custom getters. Here are some snippets that I use:</p>\n\n<pre><code>val Context.sharedPrefs: SharedPreferences get() =\n    PreferenceManager.getDefaultSharedPreferences(this)\n\nval SharedPreferences.lastReloadedTimestamp: Long get() =\n    getLong(KEY_LAST_RELOADED_TIMESTAMP, 0L)\n\nfun SharedPreferences.Editor.setLastReloadedTimestamp(value: Long): SharedPreferences.Editor =\n    putLong(KEY_LAST_RELOADED_TIMESTAMP, value)\n\ninline fun SharedPreferences.applyUpdate(block: SharedPreferences.Editor.() -&gt; Unit) {\n    with (edit()) {\n        try {\n            block()\n        } finally {\n            apply()\n        }\n    }\n}\n</code></pre>\n\n<p>I don't use a singleton object, but implement everything as an extension function on <code>Context</code>. I find this a safer way than loading the prefs into RAM once and then missing possible updates during the app's lifetime.</p>\n\n<p>Notice that, to set properties, I don't use a custom setter, but rather an extension function on <code>Editor</code>. This allows me to group several updates in the same transaction on shared prefs:</p>\n\n<pre><code>context.sharedPrefs.applyUpdate {\n    setLastReloadedTimestamp(System.currentTimeMillis())\n    setLocationLat(location.lat)\n    setLocationLon(location.lon)\n}\n</code></pre>\n"}], "owner": {"reputation": 327, "user_id": 10740241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd244f6c101d68f278771c9b6b576ca?s=128&d=identicon&r=PG&f=1", "display_name": "twothreezarsix", "link": "https://stackoverflow.com/users/10740241/twothreezarsix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 460, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1543906764, "creation_date": 1543859129, "last_edit_date": 1543891949, "question_id": 53599084, "link": "https://stackoverflow.com/questions/53599084/how-to-store-and-retrieve-an-object-of-singleton-class-in-kotlin", "title": "How to store and retrieve an object of singleton class in Kotlin", "body": "<p>Given a singleton class</p>\n\n<pre><code>    object singleton{\n    ...\n    }\n</code></pre>\n\n<p>I'm using a singleton to store a few values related to an object.I'm trying to store and retrieve it using SharedPreferences so that the next time the app is opened I can use that data.I also need to use this object(once retrieved) across all activities.However when I do </p>\n\n<pre><code>    val x = singleton\n</code></pre>\n\n<p>I can store the object, but am not able to access properties directly as </p>\n\n<pre><code>    singleton.propertyName\n</code></pre>\n\n<p>Hence I was asking is there any other way to store and retrieve which is better than using SharedPreferences\nIf I were to use </p>\n\n<pre><code>    x.propertyName\n</code></pre>\n\n<p>then isn't the simple way of accessing using just </p>\n\n<pre><code>    singleton.propertyName \n</code></pre>\n\n<p>lost?</p>\n\n<p>Also is there any other way to store this object, if SharedPreferences is not the way to go?</p>\n"}, {"tags": ["kotlin", "datepicker"], "comments": [{"owner": {"reputation": 1349, "user_id": 977855, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/myTUS.jpg?s=128&g=1", "display_name": "vinS", "link": "https://stackoverflow.com/users/977855/vins"}, "edited": false, "score": 1, "creation_date": 1543862820, "post_id": 53597229, "comment_id": 94062300, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/6451837/how-do-i-set-the-current-date-in-a-datepicker\">How do I set the current date in a DatePicker?</a>"}, {"owner": {"reputation": 3, "user_id": 9904302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZoG85.png?s=128&g=1", "display_name": "Pranjal Rawat", "link": "https://stackoverflow.com/users/9904302/pranjal-rawat"}, "reply_to_user": {"reputation": 1349, "user_id": 977855, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/myTUS.jpg?s=128&g=1", "display_name": "vinS", "link": "https://stackoverflow.com/users/977855/vins"}, "edited": false, "score": 0, "creation_date": 1544110641, "post_id": 53597229, "comment_id": 94168100, "body": "No this is not what i wanted"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9904302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZoG85.png?s=128&g=1", "display_name": "Pranjal Rawat", "link": "https://stackoverflow.com/users/9904302/pranjal-rawat"}, "edited": false, "score": 0, "creation_date": 1544110624, "post_id": 53597321, "comment_id": 94168087, "body": "I just wanted to update date month and year according to the selected date in datepicker"}, {"owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "reply_to_user": {"reputation": 3, "user_id": 9904302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZoG85.png?s=128&g=1", "display_name": "Pranjal Rawat", "link": "https://stackoverflow.com/users/9904302/pranjal-rawat"}, "edited": false, "score": 0, "creation_date": 1544110706, "post_id": 53597321, "comment_id": 94168142, "body": "@PranjalRawat and what is the problem?"}, {"owner": {"reputation": 3, "user_id": 9904302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZoG85.png?s=128&g=1", "display_name": "Pranjal Rawat", "link": "https://stackoverflow.com/users/9904302/pranjal-rawat"}, "edited": false, "score": 0, "creation_date": 1544978201, "post_id": 53597321, "comment_id": 94456922, "body": "i wanted to change the value of date month and year according to the select date on date picker but that&#39;s not working"}, {"owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "reply_to_user": {"reputation": 3, "user_id": 9904302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZoG85.png?s=128&g=1", "display_name": "Pranjal Rawat", "link": "https://stackoverflow.com/users/9904302/pranjal-rawat"}, "edited": false, "score": 0, "creation_date": 1544982841, "post_id": 53597321, "comment_id": 94458251, "body": "You still don&#39;t say <b>what</b> is not working. Is the app crashing? Is <code>birthDate</code> not updated?"}, {"owner": {"reputation": 3, "user_id": 9904302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZoG85.png?s=128&g=1", "display_name": "Pranjal Rawat", "link": "https://stackoverflow.com/users/9904302/pranjal-rawat"}, "edited": false, "score": 0, "creation_date": 1545145359, "post_id": 53597321, "comment_id": 94519559, "body": "the app is working fine but in the date picker dialog box i am not able to get access to the new selected dates"}, {"owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "reply_to_user": {"reputation": 3, "user_id": 9904302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZoG85.png?s=128&g=1", "display_name": "Pranjal Rawat", "link": "https://stackoverflow.com/users/9904302/pranjal-rawat"}, "edited": false, "score": 0, "creation_date": 1545146117, "post_id": 53597321, "comment_id": 94520017, "body": "Post the layout of your activity."}, {"owner": {"reputation": 3, "user_id": 9904302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZoG85.png?s=128&g=1", "display_name": "Pranjal Rawat", "link": "https://stackoverflow.com/users/9904302/pranjal-rawat"}, "edited": false, "score": 0, "creation_date": 1545146834, "post_id": 53597321, "comment_id": 94520451, "body": "the date month and year are showing current dates and i wanted the dates selected in datepicker"}, {"owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "reply_to_user": {"reputation": 3, "user_id": 9904302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZoG85.png?s=128&g=1", "display_name": "Pranjal Rawat", "link": "https://stackoverflow.com/users/9904302/pranjal-rawat"}, "edited": false, "score": 0, "creation_date": 1545147078, "post_id": 53597321, "comment_id": 94520584, "body": "I tested the code: when the datepicker opens the current date is selected. If I choose a date from the datepicker and click ok then the date I selected updates the textview. I can&#39;t reproduce your problem."}, {"owner": {"reputation": 3, "user_id": 9904302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZoG85.png?s=128&g=1", "display_name": "Pranjal Rawat", "link": "https://stackoverflow.com/users/9904302/pranjal-rawat"}, "edited": false, "score": 0, "creation_date": 1545147581, "post_id": 53597321, "comment_id": 94520865, "body": "you mean if you print date month and year the selected dates are printed"}, {"owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "reply_to_user": {"reputation": 3, "user_id": 9904302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZoG85.png?s=128&g=1", "display_name": "Pranjal Rawat", "link": "https://stackoverflow.com/users/9904302/pranjal-rawat"}, "edited": false, "score": 0, "creation_date": 1545147737, "post_id": 53597321, "comment_id": 94520951, "body": "The textview shows the date that I selected from the datepicker."}, {"owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "reply_to_user": {"reputation": 3, "user_id": 9904302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZoG85.png?s=128&g=1", "display_name": "Pranjal Rawat", "link": "https://stackoverflow.com/users/9904302/pranjal-rawat"}, "edited": false, "score": 0, "creation_date": 1545147865, "post_id": 53597321, "comment_id": 94521018, "body": "Do you also want the variables day, month and year to change to the selected date?"}, {"owner": {"reputation": 3, "user_id": 9904302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZoG85.png?s=128&g=1", "display_name": "Pranjal Rawat", "link": "https://stackoverflow.com/users/9904302/pranjal-rawat"}, "edited": false, "score": 0, "creation_date": 1545657607, "post_id": 53597321, "comment_id": 94671239, "body": "Hey forbas can we talk in gmail as i have some problem in my project"}, {"owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "reply_to_user": {"reputation": 3, "user_id": 9904302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZoG85.png?s=128&g=1", "display_name": "Pranjal Rawat", "link": "https://stackoverflow.com/users/9904302/pranjal-rawat"}, "edited": false, "score": 0, "creation_date": 1545658042, "post_id": 53597321, "comment_id": 94671370, "body": "@PranjalRawat I don&#39;t do any communicating outside of SO. If you have any problem/question about programming post it, with all the relevant info and code and if I can, I will provide an answer."}, {"owner": {"reputation": 3, "user_id": 9904302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZoG85.png?s=128&g=1", "display_name": "Pranjal Rawat", "link": "https://stackoverflow.com/users/9904302/pranjal-rawat"}, "edited": false, "score": 0, "creation_date": 1545793835, "post_id": 53597321, "comment_id": 94695644, "body": "How can i provide you the project files"}, {"owner": {"reputation": 3, "user_id": 9904302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZoG85.png?s=128&g=1", "display_name": "Pranjal Rawat", "link": "https://stackoverflow.com/users/9904302/pranjal-rawat"}, "edited": false, "score": 0, "creation_date": 1546503358, "post_id": 53597321, "comment_id": 94873282, "body": "when i am subtracting day, month or year from any number and putting them in new var in this case day, month and year are using there previous values"}, {"owner": {"reputation": 3, "user_id": 9904302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZoG85.png?s=128&g=1", "display_name": "Pranjal Rawat", "link": "https://stackoverflow.com/users/9904302/pranjal-rawat"}, "edited": false, "score": 0, "creation_date": 1546503379, "post_id": 53597321, "comment_id": 94873291, "body": "var pday = 30 - day"}, {"owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "reply_to_user": {"reputation": 3, "user_id": 9904302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZoG85.png?s=128&g=1", "display_name": "Pranjal Rawat", "link": "https://stackoverflow.com/users/9904302/pranjal-rawat"}, "edited": false, "score": 0, "creation_date": 1546509997, "post_id": 53597321, "comment_id": 94876140, "body": "Put: <code>var pday = 0 var pmonth = 0 var pyear = 0</code> before the listener and <code>pday = 30 - day pmonth = 12 - month pyear = 2019 - year</code> inside the listener, after <code>tv.text = &quot;$day - $month - $year&quot;</code>"}, {"owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "reply_to_user": {"reputation": 3, "user_id": 9904302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZoG85.png?s=128&g=1", "display_name": "Pranjal Rawat", "link": "https://stackoverflow.com/users/9904302/pranjal-rawat"}, "edited": false, "score": 0, "creation_date": 1546512097, "post_id": 53597321, "comment_id": 94877267, "body": "The updated values can be used outside the listener after the dialog is closed, because before they have their original values. If you want to use these values anywhere in the class, put their declarations at the class level."}, {"owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "reply_to_user": {"reputation": 3, "user_id": 9904302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZoG85.png?s=128&g=1", "display_name": "Pranjal Rawat", "link": "https://stackoverflow.com/users/9904302/pranjal-rawat"}, "edited": false, "score": 0, "creation_date": 1546513050, "post_id": 53597321, "comment_id": 94877790, "body": "The dialog closes when <code>OnDateSetListener()</code> is executed and there you set the values of these variables. Just because you put the lines after the listener this does not mean that the listener has been executed."}, {"owner": {"reputation": 3, "user_id": 9904302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZoG85.png?s=128&g=1", "display_name": "Pranjal Rawat", "link": "https://stackoverflow.com/users/9904302/pranjal-rawat"}, "edited": false, "score": 0, "creation_date": 1546513372, "post_id": 53597321, "comment_id": 94877949, "body": "Help me to create a class to use them outside"}, {"owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "reply_to_user": {"reputation": 3, "user_id": 9904302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZoG85.png?s=128&g=1", "display_name": "Pranjal Rawat", "link": "https://stackoverflow.com/users/9904302/pranjal-rawat"}, "edited": false, "score": 0, "creation_date": 1546513534, "post_id": 53597321, "comment_id": 94878043, "body": "The comments section is not the place to get answers, just for clarifications. You must post a new question with all the relevant code, describe what you have tried and explain what you exactly need."}, {"owner": {"reputation": 3, "user_id": 9904302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZoG85.png?s=128&g=1", "display_name": "Pranjal Rawat", "link": "https://stackoverflow.com/users/9904302/pranjal-rawat"}, "edited": false, "score": 0, "creation_date": 1546513643, "post_id": 53597321, "comment_id": 94878107, "body": "I just update my question so you can now add a answer to it"}, {"owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "reply_to_user": {"reputation": 3, "user_id": 9904302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZoG85.png?s=128&g=1", "display_name": "Pranjal Rawat", "link": "https://stackoverflow.com/users/9904302/pranjal-rawat"}, "edited": false, "score": 0, "creation_date": 1546514242, "post_id": 53597321, "comment_id": 94878424, "body": "For the code you updated I gave you the answer: the variables must be inside the listener so they get their values when the user clicks the ok button of the dialog."}, {"owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "reply_to_user": {"reputation": 3, "user_id": 9904302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZoG85.png?s=128&g=1", "display_name": "Pranjal Rawat", "link": "https://stackoverflow.com/users/9904302/pranjal-rawat"}, "edited": false, "score": 0, "creation_date": 1546516439, "post_id": 53597321, "comment_id": 94879462, "body": "This is not how it works here in SO. You can&#39;t post questions one after another in the same post. You must post a new question where you explain in details what you need and what you have tried so far."}], "tags": [], "owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "is_accepted": true, "score": 1, "last_activity_date": 1545148285, "last_edit_date": 1545148285, "creation_date": 1543852534, "answer_id": 53597321, "question_id": 53597229, "link": "https://stackoverflow.com/questions/53597229/how-to-update-date-month-and-year-in-datepicker-andriod-studio-kotlin/53597321#53597321", "title": "How to update date month and year in datepicker andriod studio kotlin", "body": "<p>Change the variable declarations from <code>val</code> to <code>var</code> and update them inside the listener:</p>\n\n<pre><code>        val c = Calendar.getInstance()\n        var day = c.get(Calendar.DAY_OF_MONTH)\n        var month = c.get(Calendar.MONTH)\n        var year = c.get(Calendar.YEAR)\n\n        val dpd = DatePickerDialog(\n            this,\n            android.R.style.Theme_Holo_Dialog,\n            DatePickerDialog.OnDateSetListener { datePicker, selyear, monthOfYear, dayOfMonth -&gt;\n                day = dayOfMonth\n                month = monthOfYear + 1\n                year = selyear\n                tv.text = \"$day - $month - $year\"\n\n            }, year, month, day\n        )\n\n        dpd.show()\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9904302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZoG85.png?s=128&g=1", "display_name": "Pranjal Rawat", "link": "https://stackoverflow.com/users/9904302/pranjal-rawat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1211, "favorite_count": 1, "accepted_answer_id": 53597321, "answer_count": 1, "score": 0, "last_activity_date": 1546506598, "creation_date": 1543852210, "last_edit_date": 1546506598, "question_id": 53597229, "link": "https://stackoverflow.com/questions/53597229/how-to-update-date-month-and-year-in-datepicker-andriod-studio-kotlin", "title": "How to update date month and year in datepicker andriod studio kotlin", "body": "<blockquote>\n  <p>Day,year and month using these given values after being updated.\n      I want them to use updated values please help.</p>\n</blockquote>\n\n<pre><code>var day = 1  \nvar month = 1  \nvar year = 1999  \nval dpd = DatePickerDialog(this,android.R.style.Theme_Holo_Dialog,\n    DatePickerDialog.OnDateSetListener { datePicker, selyear,\n   monthOfYear, dayOfMonth -&gt;\n\n    day = dayOfMonth\n    month = monthOfYear\n    year = selyear\n    tv.text = \"$day - $month - $year\"  /*printing day month year*/\n\n   }, year, month, day\n )\n\n  dpd.show()\n\n   val pday = 30 - day   /* day = 1(Not the chosen value)*/\n   val pmonth = 12 - month  \n   val pyear = 2019 - year \n</code></pre>\n"}, {"tags": ["android", "kotlin", "rx-java2"], "comments": [{"owner": {"reputation": 3357, "user_id": 281887, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/a26c66ed0382da842ac191864c8d1cb5?s=128&d=identicon&r=PG", "display_name": "Vladimir Berezkin", "link": "https://stackoverflow.com/users/281887/vladimir-berezkin"}, "edited": false, "score": 0, "creation_date": 1543851881, "post_id": 53597001, "comment_id": 94056821, "body": "post your selectAllCategories method"}, {"owner": {"reputation": 719, "user_id": 6093086, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/050d8302d4ce9d0e80656b1f5d9ef499?s=128&d=identicon&r=PG&f=1", "display_name": "hullunist", "link": "https://stackoverflow.com/users/6093086/hullunist"}, "reply_to_user": {"reputation": 3357, "user_id": 281887, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/a26c66ed0382da842ac191864c8d1cb5?s=128&d=identicon&r=PG", "display_name": "Vladimir Berezkin", "link": "https://stackoverflow.com/users/281887/vladimir-berezkin"}, "edited": false, "score": 0, "creation_date": 1543852357, "post_id": 53597001, "comment_id": 94057072, "body": "@VladimirBerezkin I added it but I don&#39;t think it will be of much help"}, {"owner": {"reputation": 7666, "user_id": 1241193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0331e5e748a0ac3860b68f6cac130ef1?s=128&d=identicon&r=PG", "display_name": "Bob Dalgleish", "link": "https://stackoverflow.com/users/1241193/bob-dalgleish"}, "edited": false, "score": 0, "creation_date": 1543852782, "post_id": 53597001, "comment_id": 94057315, "body": "Does <code>Observable.fromIterable()</code> not work for you?"}], "answers": [{"tags": [], "owner": {"reputation": 719, "user_id": 6093086, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/050d8302d4ce9d0e80656b1f5d9ef499?s=128&d=identicon&r=PG&f=1", "display_name": "hullunist", "link": "https://stackoverflow.com/users/6093086/hullunist"}, "is_accepted": true, "score": 0, "last_activity_date": 1543856936, "creation_date": 1543856936, "answer_id": 53598543, "question_id": 53597001, "link": "https://stackoverflow.com/questions/53597001/problem-converting-an-arrayt-to-observablearrayt-using-rxjava2/53598543#53598543", "title": "Problem converting an Array&lt;T&gt; to Observable&lt;Array&lt;T&gt;&gt; using RxJava2", "body": "<p>I solved it with this code. It might not look as clean or be the best solution but at least it works:</p>\n\n<pre><code>var categories = categoryDao.selectAllCategories()\nvar observable = Observable.fromArray(categories)\n</code></pre>\n"}], "owner": {"reputation": 719, "user_id": 6093086, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/050d8302d4ce9d0e80656b1f5d9ef499?s=128&d=identicon&r=PG&f=1", "display_name": "hullunist", "link": "https://stackoverflow.com/users/6093086/hullunist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 53598543, "answer_count": 1, "score": 0, "last_activity_date": 1543856936, "creation_date": 1543851453, "last_edit_date": 1543852333, "question_id": 53597001, "link": "https://stackoverflow.com/questions/53597001/problem-converting-an-arrayt-to-observablearrayt-using-rxjava2", "title": "Problem converting an Array&lt;T&gt; to Observable&lt;Array&lt;T&gt;&gt; using RxJava2", "body": "<p>Basically what I am trying is to return an <code>Observable&lt;Array&lt;T&gt;&gt;</code>. I double-checked that <code>getAllCategoriesFromDB()</code> returns <code>Array&lt;Categroies&gt;</code>. <code>categoryDao</code> is a kotlin class.</p>\n\n<p>I tried using this code: </p>\n\n<pre><code>fun getAllCategoriesFromDB(): Observable&lt;Array&lt;Categories&gt;&gt;\n    {\n        return categoryDao.selectAllCategories().toObservable()\n    }\n</code></pre>\n\n<p>However the returned type is <code>Observable&lt;Categories&gt;</code> instead of <code>Observable&lt;Array&lt;Categories&gt;&gt;</code></p>\n\n<p>I followed the example from <a href=\"https://medium.com/corebuild-software/android-repository-pattern-using-rx-room-bac6c65d7385\" rel=\"nofollow noreferrer\">here</a> (scroll down to the repository example code)</p>\n\n<p>My <code>selectAllCategories()</code> looks like this (keep in mind I'm using Room):</p>\n\n<pre><code>@Query(\"SELECT * FROM Categories\")\n    fun selectAllCategories(): Array&lt;Categories&gt;\n</code></pre>\n\n<p>Help or advice would be much appreciated since it's the first time I'm working with RxJava2.</p>\n"}, {"tags": ["kotlin", "rx-java", "android-room"], "answers": [{"comments": [{"owner": {"reputation": 694, "user_id": 9975029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6f4ce5835721b0ab6beb2687d025db7?s=128&d=identicon&r=PG&f=1", "display_name": "Dyno Cris", "link": "https://stackoverflow.com/users/9975029/dyno-cris"}, "edited": false, "score": 0, "creation_date": 1556414576, "post_id": 53607531, "comment_id": 98430335, "body": "but it&#39;s for androidx, I can&#39;t use androidx yet. can I return Completable without androidx?"}, {"owner": {"reputation": 4510, "user_id": 8412192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vaBoM.jpg?s=128&g=1", "display_name": "musooff", "link": "https://stackoverflow.com/users/8412192/musooff"}, "reply_to_user": {"reputation": 694, "user_id": 9975029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6f4ce5835721b0ab6beb2687d025db7?s=128&d=identicon&r=PG&f=1", "display_name": "Dyno Cris", "link": "https://stackoverflow.com/users/9975029/dyno-cris"}, "edited": false, "score": 2, "creation_date": 1556427478, "post_id": 53607531, "comment_id": 98431928, "body": "@DynoCris Unfortunately, all new features will be available in <code>androidx</code>. The latest version of  <code>android.arch.persistence.room</code> is <code>1.1.1</code>. If you want to use <code>Completable</code> in Room then you have to migrate to <code>androidx</code>"}], "tags": [], "owner": {"reputation": 4510, "user_id": 8412192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vaBoM.jpg?s=128&g=1", "display_name": "musooff", "link": "https://stackoverflow.com/users/8412192/musooff"}, "is_accepted": true, "score": 14, "last_activity_date": 1543907616, "creation_date": 1543907616, "answer_id": 53607531, "question_id": 53596861, "link": "https://stackoverflow.com/questions/53596861/unable-to-use-completable-in-room-dao-interface/53607531#53607531", "title": "Unable to use Completable in Room dao interface", "body": "<blockquote>\n  <p>@Insert, @Update, and @Delete methods: Room 2.1.0 and higher supports\n  return values of type Completable, Single, and Maybe.</p>\n</blockquote>\n\n<p>Update your room from <code>1.1.1</code> to <code>2.1.0</code> or higher and it will work.</p>\n"}, {"tags": [], "owner": {"reputation": 489, "user_id": 4569915, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ImxQJ.png?s=128&g=1", "display_name": "twenk11k", "link": "https://stackoverflow.com/users/4569915/twenk11k"}, "is_accepted": false, "score": 2, "last_activity_date": 1565874648, "last_edit_date": 1565874648, "creation_date": 1565856833, "answer_id": 57506734, "question_id": 53596861, "link": "https://stackoverflow.com/questions/53596861/unable-to-use-completable-in-room-dao-interface/57506734#57506734", "title": "Unable to use Completable in Room dao interface", "body": "<p>Completable isn't working with <code>@Insert</code> in 1.1.1 version of Room. You have to use 2.1.0 version or higher which is only available in Android X. </p>\n\n<p>Make sure to use these dependencies instead of regular <code>android.arch.persistence.room</code>:</p>\n\n<pre><code>def room_version = \"2.2.0-alpha02\"\nimplementation \"androidx.room:room-runtime:$room_version\"\nkapt \"androidx.room:room-compiler:$room_version\" // For Java use annotationProcessor instead of kapt\nimplementation \"androidx.room:room-rxjava2:$room_version\"\ntestImplementation \"androidx.room:room-testing:$room_version\"\n</code></pre>\n\n<p>Here's the <a href=\"https://developer.android.com/jetpack/androidx/releases/room\" rel=\"nofollow noreferrer\">link</a> that provides all of the Android X dependencies of Room.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 10483270, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_bLUdz5Y5EU/AAAAAAAAAAI/AAAAAAAAABc/N0OO7I7KEik/photo.jpg?sz=128", "display_name": "saujyun Lee", "link": "https://stackoverflow.com/users/10483270/saujyun-lee"}, "is_accepted": false, "score": 2, "last_activity_date": 1572514548, "creation_date": 1572514548, "answer_id": 58640369, "question_id": 53596861, "link": "https://stackoverflow.com/questions/53596861/unable-to-use-completable-in-room-dao-interface/58640369#58640369", "title": "Unable to use Completable in Room dao interface", "body": "<p>if you dont want to update the Room's Version, you can try to make a Completable return like this:</p>\n\n<pre><code>fun insertSomthing():Completable{\n return Completable.fromAction{\n       insert(kanal: Kanal)\n }.subscribeOn(Schedulers.io())\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 755, "user_id": 5414535, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f793393572b280ab1b69b92000b5b98a?s=128&d=identicon&r=PG&f=1", "display_name": "Josef Vancura", "link": "https://stackoverflow.com/users/5414535/josef-vancura"}, "is_accepted": false, "score": 0, "last_activity_date": 1617101766, "creation_date": 1617101766, "answer_id": 66869674, "question_id": 53596861, "link": "https://stackoverflow.com/questions/53596861/unable-to-use-completable-in-room-dao-interface/66869674#66869674", "title": "Unable to use Completable in Room dao interface", "body": "<p>above didnt work for me, here is what i used in oder fix it</p>\n<pre><code>def room_version = &quot;2.2.6&quot;\nimplementation &quot;androidx.room:room-runtime:$room_version&quot;\nannotationProcessor &quot;androidx.room:room-compiler:$room_version&quot;\n// optional - RxJava support for Room\nimplementation &quot;androidx.room:room-rxjava2:$room_version&quot;\n// optional - Guava support for Room, including Optional and ListenableFuture\nimplementation &quot;androidx.room:room-guava:$room_version&quot;\n// optional - Test helpers\ntestImplementation &quot;androidx.room:room-testing:$room_version&quot;\n</code></pre>\n"}], "owner": {"reputation": 573, "user_id": 3678849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q20WH.jpg?s=128&g=1", "display_name": "RuNo280", "link": "https://stackoverflow.com/users/3678849/runo280"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4547, "favorite_count": 0, "accepted_answer_id": 53607531, "answer_count": 4, "score": 8, "last_activity_date": 1617101766, "creation_date": 1543851003, "question_id": 53596861, "link": "https://stackoverflow.com/questions/53596861/unable-to-use-completable-in-room-dao-interface", "title": "Unable to use Completable in Room dao interface", "body": "<p>I'm trying to use <code>Completable</code> in Dao class on <code>@Insert</code> annotated methods but when tried to compile the project, I've got this error:</p>\n\n<pre><code>error: Methods annotated with @Insert can return either void, long, Long, long[], Long[] or List&lt;Long&gt;.\npublic abstract io.reactivex.Completable insert(@org.jetbrains.annotations.NotNull()\n</code></pre>\n\n<p>Here my related codes:</p>\n\n<pre><code>@Insert\nfun insert(kanal: Kanal): Completable\n@Update\nfun update(kanal: Kanal): Completable\n@Delete\nfun delete(kanal: Kanal): Completable\n</code></pre>\n\n<p>And my dependencies:</p>\n\n<pre><code>def room_version = \"1.1.1\"\nimplementation \"android.arch.persistence.room:runtime:$room_version\"\nkapt \"android.arch.persistence.room:compiler:$room_version\"\nimplementation \"android.arch.persistence.room:rxjava2:$room_version\"\nimplementation 'io.reactivex.rxjava2:rxkotlin:2.2.0'\nimplementation 'io.reactivex.rxjava2:rxandroid:2.1.0'\n</code></pre>\n\n<p>According to this <a href=\"https://developer.android.com/training/data-storage/room/accessing-data#query-rxjava\" rel=\"noreferrer\">link</a> it's supported by Room.</p>\n"}, {"tags": ["kotlin", "constants"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 1, "creation_date": 1543849597, "post_id": 53596225, "comment_id": 94055421, "body": "The article you linked to has the answer: <i>The recommended practice is to never use object for creating namespaces, and to always use top-level declarations when possible.</i>. If you have tons of imports, it probably means you&#39;re doing way too much in a single file. Star imports can help if imports really bother you (but I never type them, because the IDE does it for me, so I don&#39;t really see an issue here)."}, {"owner": {"reputation": 1385, "user_id": 4971561, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-YIQlI2oeD5Q/AAAAAAAAAAI/AAAAAAAAAGA/jJHvlu2yYaI/photo.jpg?sz=128", "display_name": "Maro\u0161 \u0160eleng", "link": "https://stackoverflow.com/users/4971561/maro%c5%a1-%c5%a0eleng"}, "edited": false, "score": 0, "creation_date": 1543849940, "post_id": 53596225, "comment_id": 94055637, "body": "As yole (in the discussion you linked) suggests, you can create a package with a single file containing top level declarations, like <code>com.example.android.constants</code> and you can then import those constants as <code>import com.example.android.constants.*</code> and not one by one. Anyway, I personally use <code>object</code> declarations. Just wanted to point out that there is a clean way (package with a single file)"}], "answers": [{"comments": [{"owner": {"reputation": 396, "user_id": 10663762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PQiUK.jpg?s=128&g=1", "display_name": "Ctorres", "link": "https://stackoverflow.com/users/10663762/ctorres"}, "edited": false, "score": 0, "creation_date": 1543853157, "post_id": 53596363, "comment_id": 94057518, "body": "I don&#39;t get how to import an entire package, My constant is not recognized, and the import is marked as unused... <b>Edit: I just add &quot;package toto.foo.bar&quot; in my constants.kt file, and then I imported the whole package (which just contain my constants file.)</b>"}], "tags": [], "owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "is_accepted": true, "score": 2, "last_activity_date": 1543849234, "creation_date": 1543849234, "answer_id": 53596363, "question_id": 53596225, "link": "https://stackoverflow.com/questions/53596225/whats-the-proper-way-to-create-global-constants-in-kotlin/53596363#53596363", "title": "What&#39;s the proper way to create global constants in Kotlin?", "body": "<p>Second way is preferred, as yo yourself noted.</p>\n\n<p>And you don't have to import constants one by one, as you can import the entire package containing them.</p>\n\n<p>There's also no major problem with the first approach. Just try to avoid having those as companion objects.</p>\n"}], "owner": {"reputation": 396, "user_id": 10663762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PQiUK.jpg?s=128&g=1", "display_name": "Ctorres", "link": "https://stackoverflow.com/users/10663762/ctorres"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 619, "favorite_count": 0, "accepted_answer_id": 53596363, "answer_count": 1, "score": 1, "last_activity_date": 1612189274, "creation_date": 1543848747, "last_edit_date": 1612189274, "question_id": 53596225, "link": "https://stackoverflow.com/questions/53596225/whats-the-proper-way-to-create-global-constants-in-kotlin", "title": "What&#39;s the proper way to create global constants in Kotlin?", "body": "<p>I wonder what's the best way to create global constants in Kotlin. In Java, we would use a class with the constants inside, and we just have to import this class to access all the constants. But in Kotlin there's two main ways to do so:</p>\n<ol>\n<li><p>You can create an object which contains all your constants :</p>\n<p>object Constants {\nconst val CONST_1 = &quot;foo&quot;\nconst val CONST_2 = &quot;bar&quot;\nconst val CONST_3 = &quot;toto&quot;\n}</p>\n</li>\n</ol>\n<p>But it's not the recommanded way, as one of the language developer said here :\n<a href=\"https://discuss.kotlinlang.org/t/best-practices-for-top-level-declarations/2198/3\" rel=\"nofollow noreferrer\">https://discuss.kotlinlang.org/t/best-practices-for-top-level-declarations/2198/3</a></p>\n<ol start=\"2\">\n<li>The second way is to use the top-level declaration, which is in my opinion not the best way to do because the more constants you have the more you IDE will be autocomplete your code with your constants names... And you have to import every constants one by one to use them.</li>\n</ol>\n<p>I wonder so if there a better solution. I don't want to flood my IDE with hundreds of top-level declarations, tons of imports, but the &quot;object&quot; way is apparently not recommanded.</p>\n<p>What should I do, then?</p>\n<p>Thank you for helping</p>\n"}, {"tags": ["android", "kotlin", "retrofit2"], "comments": [{"owner": {"reputation": 1383, "user_id": 3999808, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/BVpV8.png?s=128&g=1", "display_name": "Zun", "link": "https://stackoverflow.com/users/3999808/zun"}, "edited": false, "score": 0, "creation_date": 1543848200, "post_id": 53596033, "comment_id": 94054492, "body": "I&#39;ve never seen this implementation before for Retrofit. What&#39;s wrong with following the official guide? <a href=\"https://square.github.io/retrofit/\" rel=\"nofollow noreferrer\">square.github.io/retrofit</a>"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1543848343, "post_id": 53596033, "comment_id": 94054588, "body": "I guess one nice(?) thing here is that you can avoid one monolithic service definition interface file, and everything can split apart. Rather than make the service as part of execute, though, it should be a static member of the class"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 1, "creation_date": 1543848494, "post_id": 53596033, "comment_id": 94054680, "body": "<code>Is it a better practice to create a separate interface for each of my requests?</code> No, I&#39;ve done it before and then spent some time to refactor them back together. It only makes sense to make an interface per baseUrl (or different OkClients for example)."}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 1, "creation_date": 1543848540, "post_id": 53596033, "comment_id": 94054715, "body": "Also, creating a NEW retrofit implementation PER REQUEST is DEFINITELY NOT a better practice."}], "answers": [{"tags": [], "owner": {"reputation": 3419, "user_id": 2401265, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/16369b0c7c1f0fff22ff47be0a22289a?s=128&d=identicon&r=PG", "display_name": "gmetax", "link": "https://stackoverflow.com/users/2401265/gmetax"}, "is_accepted": false, "score": 2, "last_activity_date": 1543848603, "creation_date": 1543848603, "answer_id": 53596181, "question_id": 53596033, "link": "https://stackoverflow.com/questions/53596033/best-practices-of-using-retrofit2-multiple-service/53596181#53596181", "title": "Best practices of using Retrofit2 (multiple service)", "body": "<p>it would be much better if you follow the official guide <a href=\"https://square.github.io/retrofit/\" rel=\"nofollow noreferrer\">https://square.github.io/retrofit/</a></p>\n\n<pre><code>public interface GitHubService {\n  @GET(\"users/{user}/repos\")\n  Call&lt;List&lt;Repo&gt;&gt; listRepos(@Path(\"user\") String user);\n}\n\n\nRetrofit retrofit = new Retrofit.Builder()\n    .baseUrl(\"https://api.github.com/\")\n    .build();\n\n\n\nGitHubService service = retrofit.create(GitHubService.class);\n\nCall&lt;List&lt;Repo&gt;&gt; repos = service.listRepos(\"octocat\");\n</code></pre>\n\n<p>then you can have one Singleton for the Service for easier, I like also to create interfaces for each call like bellow that will be used in any class that I want.</p>\n\n<pre><code>interface IListRepos {\n    fun listRepos(user: String, onResponse: (MutableList&lt;Repo&gt;?) -&gt; Unit) {\n        ServiceSingleton.client.create(GitHubService::class.java)\n                .listRepos(user)\n                .enqueue(object : Callback&lt;MutableList&lt;Repo&gt;&gt; {\n                    override fun onResponse(call: Call&lt;MutableList&lt;Repo&gt;&gt;,\n                                            response: retrofit2.Response&lt;MutableList&lt;Repo&gt;&gt;) {\n                        onResponse(response.body())\n                    }\n\n                    override fun onFailure(call: Call&lt;MutableList&lt;Repo&gt;&gt;, t: Throwable) {\n                        onResponse(null)\n                    }\n                })\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 679, "user_id": 10662432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TYi2T.png?s=128&g=1", "display_name": "Hossam Hassan", "link": "https://stackoverflow.com/users/10662432/hossam-hassan"}, "edited": false, "score": 0, "creation_date": 1543848660, "post_id": 53596190, "comment_id": 94054797, "body": "note that you can copy past my code and convert it to kotlin"}, {"owner": {"reputation": 587, "user_id": 1125061, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/lMPNz.gif?s=128&g=1", "display_name": "Cookienator", "link": "https://stackoverflow.com/users/1125061/cookienator"}, "edited": false, "score": 0, "creation_date": 1544000996, "post_id": 53596190, "comment_id": 94116958, "body": "This means that every time you make a call to an API, interface of that call would be passed to retrofit, which would then implement it. Correct?"}, {"owner": {"reputation": 679, "user_id": 10662432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TYi2T.png?s=128&g=1", "display_name": "Hossam Hassan", "link": "https://stackoverflow.com/users/10662432/hossam-hassan"}, "reply_to_user": {"reputation": 587, "user_id": 1125061, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/lMPNz.gif?s=128&g=1", "display_name": "Cookienator", "link": "https://stackoverflow.com/users/1125061/cookienator"}, "edited": false, "score": 0, "creation_date": 1544006223, "post_id": 53596190, "comment_id": 94120022, "body": "you dont have to implement anything else, this is the full working code"}, {"owner": {"reputation": 679, "user_id": 10662432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TYi2T.png?s=128&g=1", "display_name": "Hossam Hassan", "link": "https://stackoverflow.com/users/10662432/hossam-hassan"}, "reply_to_user": {"reputation": 587, "user_id": 1125061, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/lMPNz.gif?s=128&g=1", "display_name": "Cookienator", "link": "https://stackoverflow.com/users/1125061/cookienator"}, "edited": false, "score": 0, "creation_date": 1544006257, "post_id": 53596190, "comment_id": 94120038, "body": "you will be getting your call back inside your retrofit method (onResponse)"}], "tags": [], "owner": {"reputation": 679, "user_id": 10662432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TYi2T.png?s=128&g=1", "display_name": "Hossam Hassan", "link": "https://stackoverflow.com/users/10662432/hossam-hassan"}, "is_accepted": false, "score": 1, "last_activity_date": 1543848628, "creation_date": 1543848628, "answer_id": 53596190, "question_id": 53596033, "link": "https://stackoverflow.com/questions/53596033/best-practices-of-using-retrofit2-multiple-service/53596190#53596190", "title": "Best practices of using Retrofit2 (multiple service)", "body": "<p>The way im doing it in java \nis having 1 interface for all, with separate requests.</p>\n\n<p>Inside </p>\n\n<pre><code>public interface ApiInterface {\n}\n</code></pre>\n\n<p>i have set all the urls in 1 place for easy edit later on </p>\n\n<pre><code>String Base_Url = \"http://url.com/store/web/app_dev.php/api/\";\nString Base_Url_Channel = \"http://url.com/store/web/app_dev.php/api/APP_STORE/\";\nString Image_URL_Online = \"http://url.com/store/web/media/image/\";\n</code></pre>\n\n<p>and for <code>retrofit2</code> method call class </p>\n\n<pre><code>public class DataServiceGenerator {\n\n    public static &lt;S&gt; S createService(Class&lt;S&gt; serviceClass) {\n\n        String url = ApiInterface.Base_Url;\n        Retrofit.Builder builder = new Retrofit.Builder()\n                .addConverterFactory(GsonConverterFactory.create())\n                .baseUrl(url);\n\n        OkHttpClient.Builder httpClient = new OkHttpClient.Builder()\n                .readTimeout(15, TimeUnit.SECONDS)\n                .connectTimeout(15, TimeUnit.SECONDS)\n                .writeTimeout(25, TimeUnit.SECONDS);\n\n        if (BuildConfig.DEBUG) {\n            HttpLoggingInterceptor interceptor = new HttpLoggingInterceptor()\n                    .setLevel(HttpLoggingInterceptor.Level.BODY);\n            httpClient.addInterceptor(interceptor);\n            httpClient.addNetworkInterceptor(new StethoInterceptor()); // for debugging\n        }\n        builder.client(httpClient.build());\n        Retrofit retrofit = builder.build();\n        return retrofit.create(serviceClass);\n    }\n }\n</code></pre>\n\n<p>Now to call the API im using below method in interface</p>\n\n<pre><code>@Multipart\n@Headers(\"Accept: Application/json\")\n@POST(\"oauth/v2/token\")\nCall&lt;Token_Model&gt; token(\n        @Part(\"client_id\") RequestBody id,\n        @Part(\"client_secret\") RequestBody secret,\n        @Part(\"grant_type\") RequestBody username,\n        @Part(\"username\") RequestBody name,\n        @Part(\"password\") RequestBody password);\n</code></pre>\n\n<p>And for Method itself :</p>\n\n<pre><code>Call&lt;Token_Model&gt; call = service.token(createPartFromString(\"13123khkjhfsdf\"),\n                createPartFromString(\"1asd234k234lkh24\"),\n                createPartFromString(\"password\"), createPartFromString(\"api@example.com\"), createPartFromString(\"test\"));\n        call.enqueue(new Callback&lt;Token_Model&gt;() {\n            @Override\n            public void onResponse(Call&lt;Token_Model&gt; call, retrofit2.Response&lt;Token_Model&gt; response) {\n                if (response.isSuccessful()) {\n                    token_model = response.body();\n                    if (token_model != null) {\n                        helper.setToken(token_model.getAccess_token());\n                    }\n\n                } else {\n                    Toast.makeText(context, context.getString(R.string.failed_token), Toast.LENGTH_LONG).show();\n                }\n            }\n\n            @Override\n            public void onFailure(Call&lt;Token_Model&gt; call, Throwable t) {\n                Toast.makeText(context, context.getString(R.string.failed_token), Toast.LENGTH_LONG).show();\n            }\n        });\n</code></pre>\n"}], "owner": {"reputation": 587, "user_id": 1125061, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/lMPNz.gif?s=128&g=1", "display_name": "Cookienator", "link": "https://stackoverflow.com/users/1125061/cookienator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4071, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1543848628, "creation_date": 1543848069, "last_edit_date": 1543848518, "question_id": 53596033, "link": "https://stackoverflow.com/questions/53596033/best-practices-of-using-retrofit2-multiple-service", "title": "Best practices of using Retrofit2 (multiple service)", "body": "<p>I'm writing an Android app using Kotlin, integrating Retrofit2.</p>\n\n<p>As far as I understand (please correct me if I'm wrong), the \"traditional\" way of doing this, would be:</p>\n\n<ol>\n<li>Creating an interface, which includes method definitions for all my APIs.</li>\n<li>Passing it to retrofit using retrofit.create(), which implements it for me, and then I have access to all of them using the functions from step #1</li>\n</ol>\n\n<p>After looking at <a href=\"https://stackoverflow.com/questions/29829493/divide-retrofit-service-declaration-into-multiple-interfaces\">this</a>, my question is: \nIs it a better practice to create a separate interface for each of my requests?</p>\n\n<p>e.g. If I have a \"LoginRequest\", and implement it as I show below (the \"create\" essentially calls retrofit.create()), the next time I want to add/remove an API I only need to add/remove 1 file, rather than a few places (the request itself, the service from step #1, and all the places that use the methods from step #2). On the other hand, this would cause my app to \"know\" retrofit2, and I'm not sure this is a good practice either. </p>\n\n<pre><code>interface MyRequest {\n    fun execute()\n}\n\nclass LoginRequest (private val email: String, private val password: String) : MyRequest {\n    interface LoginRequestService {\n        @POST(\"login\")\n        fun emailLogin(\n                @Body loginRequestBody: LoginRequestBody):\n                retrofit2.Call&lt;GetUserDetailsResponse&gt;\n    }\n\n    override fun execute() {\n        val requestBody = LoginRequestBody(email, password)\n        val call = MyRequestManager.create(LoginRequestService::class.java).emailLogin(requestBody)\n        MyRequestManager.executeCall(call)\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "google-maps", "kotlin"], "comments": [{"owner": {"reputation": 13530, "user_id": 5496177, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/98e2f1facb002b8c7ab2cb041d48b0a1?s=128&d=identicon&r=PG", "display_name": "TheWanderer", "link": "https://stackoverflow.com/users/5496177/thewanderer"}, "edited": false, "score": 2, "creation_date": 1543846621, "post_id": 53595632, "comment_id": 94053636, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/35163953/android-runtime-permissions-how-to-implement\">Android runtime permissions- how to implement</a>"}, {"owner": {"reputation": 1385, "user_id": 4971561, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-YIQlI2oeD5Q/AAAAAAAAAAI/AAAAAAAAAGA/jJHvlu2yYaI/photo.jpg?sz=128", "display_name": "Maro\u0161 \u0160eleng", "link": "https://stackoverflow.com/users/4971561/maro%c5%a1-%c5%a0eleng"}, "edited": false, "score": 0, "creation_date": 1543847748, "post_id": 53595632, "comment_id": 94054211, "body": "Post your code, please."}], "answers": [{"comments": [{"owner": {"reputation": 785, "user_id": 5571700, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/edfa10f7db9a89a516b196098f6a1409?s=128&d=identicon&r=PG&f=1", "display_name": "p.mathew13", "link": "https://stackoverflow.com/users/5571700/p-mathew13"}, "reply_to_user": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1543847423, "post_id": 53595735, "comment_id": 94054033, "body": "Are you asking permissions at runtime?"}], "tags": [], "owner": {"reputation": 785, "user_id": 5571700, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/edfa10f7db9a89a516b196098f6a1409?s=128&d=identicon&r=PG&f=1", "display_name": "p.mathew13", "link": "https://stackoverflow.com/users/5571700/p-mathew13"}, "is_accepted": false, "score": 0, "last_activity_date": 1543846989, "creation_date": 1543846989, "answer_id": 53595735, "question_id": 53595632, "link": "https://stackoverflow.com/questions/53595632/location-permission-problem-to-work-for-both-android-6-and-7-8/53595735#53595735", "title": "Location permission problem to work for both Android 6 and 7/8", "body": "<p>Since Android 6 you need to ask permissions for location at runtime. More can be found here <a href=\"https://developer.android.com/training/permissions/requesting\" rel=\"nofollow noreferrer\">Request runtime permissions</a></p>\n"}, {"tags": [], "owner": {"reputation": 4294, "user_id": 1155805, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/614295948a63310cc381c89e95d21a8e?s=128&d=identicon&r=PG", "display_name": "Haresh Chaudhary", "link": "https://stackoverflow.com/users/1155805/haresh-chaudhary"}, "is_accepted": false, "score": 0, "last_activity_date": 1543849148, "creation_date": 1543849148, "answer_id": 53596342, "question_id": 53595632, "link": "https://stackoverflow.com/questions/53595632/location-permission-problem-to-work-for-both-android-6-and-7-8/53596342#53596342", "title": "Location permission problem to work for both Android 6 and 7/8", "body": "<p>All <a href=\"https://developers.google.com/maps/documentation/android-sdk/location\" rel=\"nofollow noreferrer\">dangerous permission</a> should be requested at the runtime apart from mentioning them in the manifest.</p>\n\n<p>In the code, where every you are trying to access Location, you need to first check if your app has been granted access to Location as below:</p>\n\n<pre><code>if (ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION)\n                == PackageManager.PERMISSION_GRANTED) {\n    mMap.setMyLocationEnabled(true);\n} else {\n    // Show rationale and request permission.\n}\n</code></pre>\n\n<p>If you happen to ask user to grant location permission, you will receive the callback here if users grants/not-grant the permission:</p>\n\n<pre><code>@Override\npublic void onRequestPermissionsResult(int requestCode, String[] permissions, int[] grantResults) {\n    if (requestCode == MY_LOCATION_REQUEST_CODE) {\n      if (permissions.length == 1 &amp;&amp;\n          permissions[0] == Manifest.permission.ACCESS_FINE_LOCATION &amp;&amp;\n          grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n        mMap.setMyLocationEnabled(true);\n    } else {\n      // Permission was denied. Display an error message.\n    }\n}\n</code></pre>\n\n<p>For more information, please refer <a href=\"https://developers.google.com/maps/documentation/android-sdk/location\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 365, "user_id": 6704060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10209096141857224/picture?type=large", "display_name": "Anton Platonov", "link": "https://stackoverflow.com/users/6704060/anton-platonov"}, "is_accepted": false, "score": 0, "last_activity_date": 1543854767, "creation_date": 1543854767, "answer_id": 53597972, "question_id": 53595632, "link": "https://stackoverflow.com/questions/53595632/location-permission-problem-to-work-for-both-android-6-and-7-8/53597972#53597972", "title": "Location permission problem to work for both Android 6 and 7/8", "body": "<p>That's how I finally did it:</p>\n\n<pre><code>private fun setupPermissions() {\n\n        val permission = ContextCompat.checkSelfPermission(this,\n                Manifest.permission.ACCESS_FINE_LOCATION)\n\n        if (permission != PackageManager.PERMISSION_GRANTED) {\n            makeRequest()\n        }\n    }\n\n    private fun makeRequest() {\n        ActivityCompat.requestPermissions(this,\n                arrayOf(Manifest.permission.ACCESS_FINE_LOCATION),\n                RECORD_REQUEST_CODE)\n    }\n</code></pre>\n"}], "owner": {"reputation": 365, "user_id": 6704060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10209096141857224/picture?type=large", "display_name": "Anton Platonov", "link": "https://stackoverflow.com/users/6704060/anton-platonov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 645, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1543854767, "creation_date": 1543846560, "question_id": 53595632, "link": "https://stackoverflow.com/questions/53595632/location-permission-problem-to-work-for-both-android-6-and-7-8", "title": "Location permission problem to work for both Android 6 and 7/8", "body": "<p>When I run my application on Android 7. It returns this error.</p>\n\n<pre><code>E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.example.ruslan.testmapagain, PID: 20482\n    java.lang.SecurityException: my location requires permission ACCESS_FINE_LOCATION or ACCESS_COARSE_LOCATION\n        at com.google.maps.api.android.lib6.impl.bf.c(:com.google.android.gms.dynamite_mapsdynamite@14574051@14.5.74 (040408-219897028):566)\n        at com.google.android.gms.maps.internal.l.a(:com.google.android.gms.dynamite_mapsdynamite@14574051@14.5.74 (040408-219897028):361)\n        at fu.onTransact(:com.google.android.gms.dynamite_mapsdynamite@14574051@14.5.74 (040408-219897028):4)\n        at android.os.Binder.transact(Binder.java:499)\n        at com.google.android.gms.internal.maps.zza.transactAndReadExceptionReturnVoid(Unknown Source)\n        at com.google.android.gms.maps.internal.zzg.setMyLocationEnabled(Unknown Source)\n        at com.google.android.gms.maps.GoogleMap.setMyLocationEnabled(Unknown Source)\n        at com.example.ruslan.testmapagain.MapsActivity.onMapReady(MapsActivity.kt:151)\n        at com.google.android.gms.maps.zzak.zza(Unknown Source)\n        at com.google.android.gms.maps.internal.zzaq.dispatchTransaction(Unknown Source)\n        at com.google.android.gms.internal.maps.zzb.onTransact(Unknown Source)\n        at android.os.Binder.transact(Binder.java:499)\n        at ft.b(:com.google.android.gms.dynamite_mapsdynamite@14574051@14.5.74 (040408-219897028):15)\n        at com.google.android.gms.maps.internal.bg.a(:com.google.android.gms.dynamite_mapsdynamite@14574051@14.5.74 (040408-219897028):4)\n        at com.google.maps.api.android.lib6.impl.bj.run(:com.google.android.gms.dynamite_mapsdynamite@14574051@14.5.74 (040408-219897028):4)\n        at android.os.Handler.handleCallback(Handler.java:754)\n        at android.os.Handler.dispatchMessage(Handler.java:95)\n        at android.os.Looper.loop(Looper.java:165)\n        at android.app.ActivityThread.main(ActivityThread.java:6375)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:883)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)\n</code></pre>\n\n<p>But on Android 6, everything works well.</p>\n\n<p>I tried to do it as indicated here: <a href=\"https://stackoverflow.com/questions/35274856/android-gps-requires-access-fine-location-error\">Android \u201cgps requires ACCESS_FINE_LOCATION\u201d error</a></p>\n\n<p>But, my Android Studio gives out such parameters in the Manifest.</p>\n\n<p>In the Manifesto, rights are defined as follows:</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\"&gt;&lt;/uses-permission&gt;\n&lt;uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\"&gt;&lt;/uses-permission&gt;\n&lt;uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\"&gt;&lt;/uses-permission&gt;\n&lt;uses-permission android:name=\"android.permission.LOCATION_HARDWARE\"&gt;&lt;/uses-permission&gt;\n</code></pre>\n"}, {"tags": ["kotlin", "urlencode", "ktor"], "answers": [{"comments": [{"owner": {"reputation": 4320, "user_id": 1662033, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/6972829c0a0a1582ee9e7f14d30dfb22?s=128&d=identicon&r=PG", "display_name": "Ofek Agmon", "link": "https://stackoverflow.com/users/1662033/ofek-agmon"}, "edited": false, "score": 1, "creation_date": 1571232585, "post_id": 53595545, "comment_id": 103171870, "body": "I was stuck with this for a while now, and your solution worked great. Thanks!"}, {"owner": {"reputation": 143, "user_id": 5648644, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RuLKb.jpg?s=128&g=1", "display_name": "jef", "link": "https://stackoverflow.com/users/5648644/jef"}, "edited": false, "score": 1, "creation_date": 1581010934, "post_id": 53595545, "comment_id": 106296255, "body": "Thanks! There are so many ways to do this... This seems to be the simplest!"}], "tags": [], "owner": {"reputation": 2492, "user_id": 625581, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/wqD2L.jpg?s=128&g=1", "display_name": "Mart&#237;n Coll", "link": "https://stackoverflow.com/users/625581/mart%c3%adn-coll"}, "is_accepted": false, "score": 18, "last_activity_date": 1543846215, "creation_date": 1543846215, "answer_id": 53595545, "question_id": 53595544, "link": "https://stackoverflow.com/questions/53595544/send-application-x-www-form-urlencoded-in-ktor/53595545#53595545", "title": "Send application/x-www-form-urlencoded in Ktor", "body": "<p>After several tries I managed to send the request with the following code:</p>\n\n<pre><code>val url = \"https://webservice/endpoint\"\nval client = HttpClient()\nreturn client.post(url) {\n    body = FormDataContent(Parameters.build {\n        append(\"param1\", \"lorem\")\n        append(\"param2\", \"ipsum\")\n    })\n}\n</code></pre>\n"}], "owner": {"reputation": 2492, "user_id": 625581, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/wqD2L.jpg?s=128&g=1", "display_name": "Mart&#237;n Coll", "link": "https://stackoverflow.com/users/625581/mart%c3%adn-coll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2094, "favorite_count": 1, "answer_count": 1, "score": 9, "last_activity_date": 1543846215, "creation_date": 1543846215, "question_id": 53595544, "link": "https://stackoverflow.com/questions/53595544/send-application-x-www-form-urlencoded-in-ktor", "title": "Send application/x-www-form-urlencoded in Ktor", "body": "<p>I can't figure out how to send a <code>application/x-www-form-urlencoded</code> <code>POST</code> request in Ktor. I see some <code>submitForm</code> helpers in  Ktor's documentation but they don't send the request as expected.</p>\n\n<p>What I want is to replicate this curl line behavior:</p>\n\n<pre><code>curl -d \"param1=lorem&amp;param2=ipsum\" \\\n     -H \"Content-Type: application/x-www-form-urlencoded; charset=UTF-8\" \\\n     https://webservice/endpoint\n</code></pre>\n\n<p>My dependency is on <code>io.ktor:ktor-client-cio:1.0.0</code>.</p>\n"}, {"tags": ["android-studio", "kotlin", "android-recyclerview"], "comments": [{"owner": {"reputation": 877, "user_id": 4887525, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Te4N4beDmAs/AAAAAAAAAAI/AAAAAAAAABA/_QzLicWSkpQ/photo.jpg?sz=128", "display_name": "Adeel Turk", "link": "https://stackoverflow.com/users/4887525/adeel-turk"}, "edited": false, "score": 1, "creation_date": 1543846438, "post_id": 53595474, "comment_id": 94053539, "body": "ideally every recyelerview have its own adapter .. you should explain your question a bit more"}, {"owner": {"reputation": 153, "user_id": 499858, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e22ba51631f7d759a56baa05e8f67510?s=128&d=identicon&r=PG&f=1", "display_name": "NMMA", "link": "https://stackoverflow.com/users/499858/nmma"}, "reply_to_user": {"reputation": 877, "user_id": 4887525, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Te4N4beDmAs/AAAAAAAAAAI/AAAAAAAAABA/_QzLicWSkpQ/photo.jpg?sz=128", "display_name": "Adeel Turk", "link": "https://stackoverflow.com/users/4887525/adeel-turk"}, "edited": false, "score": 0, "creation_date": 1543851660, "post_id": 53595474, "comment_id": 94056682, "body": "Is there a better way to prevent redundancy of code? I think of solution like implement strategy pattern"}, {"owner": {"reputation": 576, "user_id": 8874071, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/depb8.jpg?s=128&g=1", "display_name": "iFanie", "link": "https://stackoverflow.com/users/8874071/ifanie"}, "edited": false, "score": 1, "creation_date": 1543857003, "post_id": 53595474, "comment_id": 94059588, "body": "You should have an adapter for each logical set of data. You could create an abstract adapter that simplifies a few stuff, but that would be up to you and how you write your code.  If you wanna ask something more specific, I&#39;d be glad to help you if I can."}, {"owner": {"reputation": 153, "user_id": 499858, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e22ba51631f7d759a56baa05e8f67510?s=128&d=identicon&r=PG&f=1", "display_name": "NMMA", "link": "https://stackoverflow.com/users/499858/nmma"}, "edited": false, "score": 0, "creation_date": 1543875409, "post_id": 53595474, "comment_id": 94067998, "body": "Thank you for your help :)"}, {"owner": {"reputation": 1164, "user_id": 5995648, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5lHmZ.jpg?s=128&g=1", "display_name": "Arbaz.in", "link": "https://stackoverflow.com/users/5995648/arbaz-in"}, "reply_to_user": {"reputation": 877, "user_id": 4887525, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Te4N4beDmAs/AAAAAAAAAAI/AAAAAAAAABA/_QzLicWSkpQ/photo.jpg?sz=128", "display_name": "Adeel Turk", "link": "https://stackoverflow.com/users/4887525/adeel-turk"}, "edited": false, "score": 0, "creation_date": 1543923756, "post_id": 53595474, "comment_id": 94085167, "body": "As per @AdeelTurk comment every recyclerview have it&#39;s own adapter. but at the and it&#39;s depends on your requirement. if your item cell have same design go with single adapter and design is different go with multiple adpter."}, {"owner": {"reputation": 877, "user_id": 4887525, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Te4N4beDmAs/AAAAAAAAAAI/AAAAAAAAABA/_QzLicWSkpQ/photo.jpg?sz=128", "display_name": "Adeel Turk", "link": "https://stackoverflow.com/users/4887525/adeel-turk"}, "reply_to_user": {"reputation": 1164, "user_id": 5995648, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5lHmZ.jpg?s=128&g=1", "display_name": "Arbaz.in", "link": "https://stackoverflow.com/users/5995648/arbaz-in"}, "edited": false, "score": 0, "creation_date": 1543924085, "post_id": 53595474, "comment_id": 94085349, "body": "@Arbaz.in  in i think multiple design plus the data you wanted to show in your view .. i mean its not like its impossible to create a single adapter for each type of recyclerview its about neat and clean , maintainable , debuggable code"}, {"owner": {"reputation": 86, "user_id": 8592508, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-g7n9IwnnKyE/AAAAAAAAAAI/AAAAAAAAAK4/14-NaqhBz5g/photo.jpg?sz=128", "display_name": "Sergio Ba&#241;ares", "link": "https://stackoverflow.com/users/8592508/sergio-ba%c3%b1ares"}, "edited": false, "score": 0, "creation_date": 1543947731, "post_id": 53595474, "comment_id": 94098722, "body": "you can have multiple adapters for a list... and reuse the ones you share between recyclers"}, {"owner": {"reputation": 1164, "user_id": 5995648, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5lHmZ.jpg?s=128&g=1", "display_name": "Arbaz.in", "link": "https://stackoverflow.com/users/5995648/arbaz-in"}, "reply_to_user": {"reputation": 877, "user_id": 4887525, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Te4N4beDmAs/AAAAAAAAAAI/AAAAAAAAABA/_QzLicWSkpQ/photo.jpg?sz=128", "display_name": "Adeel Turk", "link": "https://stackoverflow.com/users/4887525/adeel-turk"}, "edited": false, "score": 1, "creation_date": 1543996884, "post_id": 53595474, "comment_id": 94115044, "body": "@AdeelTurk yeah we can do with single adapter i didn&#39;t say it not possible"}], "owner": {"reputation": 153, "user_id": 499858, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e22ba51631f7d759a56baa05e8f67510?s=128&d=identicon&r=PG&f=1", "display_name": "NMMA", "link": "https://stackoverflow.com/users/499858/nmma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1543862714, "creation_date": 1543845970, "question_id": 53595474, "link": "https://stackoverflow.com/questions/53595474/adapters-for-multiple-recyclerview", "title": "Adapters for multiple recyclerview", "body": "<p>I'm using many recyclerview with different contents. I need to develop adapter for each list? Or there is another solution?</p>\n"}, {"tags": ["android", "kotlin", "android-alertdialog", "android-button"], "comments": [{"owner": {"reputation": 6468, "user_id": 4390557, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/73Jri.jpg?s=128&g=1", "display_name": "VVB", "link": "https://stackoverflow.com/users/4390557/vvb"}, "edited": false, "score": 2, "creation_date": 1543845927, "post_id": 53595409, "comment_id": 94053233, "body": "Go with Option 1"}, {"owner": {"reputation": 4818, "user_id": 4063532, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ycJy2.jpg?s=128&g=1", "display_name": "Oussema Aroua", "link": "https://stackoverflow.com/users/4063532/oussema-aroua"}, "edited": false, "score": 0, "creation_date": 1543845947, "post_id": 53595409, "comment_id": 94053244, "body": "it depends on the message of the alert, generally ok is used with positive button"}], "answers": [{"comments": [{"owner": {"reputation": 16268, "user_id": 603270, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cbfe6e57e0fa59928be4898a7be08c5d?s=128&d=identicon&r=PG", "display_name": "shkschneider", "link": "https://stackoverflow.com/users/603270/shkschneider"}, "edited": false, "score": 0, "creation_date": 1543846066, "post_id": 53595456, "comment_id": 94053309, "body": "I tend to use <code>neutral</code> for &quot;OK&quot;, when there is no choice. It&#39;s just up to the developer to actually stick to some norm, indeed. Some ROMs display Positive differently from Negative, let alone the placement which should be positive on the right on Android."}, {"owner": {"reputation": 13530, "user_id": 5496177, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/98e2f1facb002b8c7ab2cb041d48b0a1?s=128&d=identicon&r=PG", "display_name": "TheWanderer", "link": "https://stackoverflow.com/users/5496177/thewanderer"}, "reply_to_user": {"reputation": 16268, "user_id": 603270, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cbfe6e57e0fa59928be4898a7be08c5d?s=128&d=identicon&r=PG", "display_name": "shkschneider", "link": "https://stackoverflow.com/users/603270/shkschneider"}, "edited": false, "score": 0, "creation_date": 1543846123, "post_id": 53595456, "comment_id": 94053343, "body": "@shkschneider personally, I&#39;d be really confused seeing OK on the left of the dialog. But since it&#39;s only one button, I guess it really doesn&#39;t matter, because it&#39;s not like you can accidentally tap the wrong one."}, {"owner": {"reputation": 16268, "user_id": 603270, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cbfe6e57e0fa59928be4898a7be08c5d?s=128&d=identicon&r=PG", "display_name": "shkschneider", "link": "https://stackoverflow.com/users/603270/shkschneider"}, "edited": false, "score": 0, "creation_date": 1543848089, "post_id": 53595456, "comment_id": 94054416, "body": "Positive should be on the right. Neutral, when it&#39;s the only option, should take positive&#39;s place. Nothing positive or neutral should be on the left indeed ;)"}], "tags": [], "owner": {"reputation": 13530, "user_id": 5496177, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/98e2f1facb002b8c7ab2cb041d48b0a1?s=128&d=identicon&r=PG", "display_name": "TheWanderer", "link": "https://stackoverflow.com/users/5496177/thewanderer"}, "is_accepted": true, "score": 3, "last_activity_date": 1543845904, "creation_date": 1543845904, "answer_id": 53595456, "question_id": 53595409, "link": "https://stackoverflow.com/questions/53595409/which-type-of-button-should-be-used-for-ok-button-in-alertdialog/53595456#53595456", "title": "Which type of button should be used for &#39;OK&#39; button in AlertDialog?", "body": "<p>The norm is to use the positive button position, which is positioned at the bottom-end of the Dialog (right for LTR, left for RTL).</p>\n\n<p>You can put it wherever you want, really, since there aren't any guidelines, but I don't think I've ever seen a Dialog with only an OK button, with that button in the middle or on the left.</p>\n\n<p>To avoid potentially confusing users, go with the norm.</p>\n"}], "owner": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 53595456, "answer_count": 1, "score": 0, "last_activity_date": 1543845904, "creation_date": 1543845759, "question_id": 53595409, "link": "https://stackoverflow.com/questions/53595409/which-type-of-button-should-be-used-for-ok-button-in-alertdialog", "title": "Which type of button should be used for &#39;OK&#39; button in AlertDialog?", "body": "<p>I intend to create an <code>AlertDialog</code> with an 'OK' button. I know that there are 3 different kinds of buttons that can be used within an <code>AlertDialog</code>, but does anyone know which one should be used for an 'OK' button? I couldn't find anything about this in the Android guidelines.</p>\n\n<p><strong>Option 1 (Positive button)</strong></p>\n\n<pre><code>builder.setPositiveButton(\"OK\"){_,_ -&gt; ...}\n</code></pre>\n\n<p><strong>Option 2 (Negative button)</strong></p>\n\n<pre><code>builder.setNegativeButton(\"OK\"){_,_ -&gt; ...}\n</code></pre>\n\n<p><strong>Option 3 (Neutral button)</strong></p>\n\n<pre><code>builder.setNeutralButton(\"OK\"){_,_ -&gt; ...}\n</code></pre>\n"}, {"tags": ["view", "kotlin", "layout-inflater"], "answers": [{"comments": [{"owner": {"reputation": 267, "user_id": 10429466, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-w8tbdscu__c/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWqPX9CJdAYvNscm11o8i9c82gFDg/mo/photo.jpg?sz=128", "display_name": "Projet Sin", "link": "https://stackoverflow.com/users/10429466/projet-sin"}, "edited": false, "score": 0, "creation_date": 1543844862, "post_id": 53595154, "comment_id": 94052652, "body": "In this example, where does view come from ?"}, {"owner": {"reputation": 267, "user_id": 10429466, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-w8tbdscu__c/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWqPX9CJdAYvNscm11o8i9c82gFDg/mo/photo.jpg?sz=128", "display_name": "Projet Sin", "link": "https://stackoverflow.com/users/10429466/projet-sin"}, "edited": false, "score": 0, "creation_date": 1543845129, "post_id": 53595154, "comment_id": 94052799, "body": "Works if I replace <b>it.view</b> by <b>mydialog</b>. Thanks"}], "tags": [], "owner": {"reputation": 1011, "user_id": 418873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ae0f9669a5fa323bdff02bca5990fe8?s=128&d=identicon&r=PG", "display_name": "Leaudro", "link": "https://stackoverflow.com/users/418873/leaudro"}, "is_accepted": true, "score": 1, "last_activity_date": 1543844723, "creation_date": 1543844723, "answer_id": 53595154, "question_id": 53595085, "link": "https://stackoverflow.com/questions/53595085/layout-inflater-with-dialogfragment/53595154#53595154", "title": "Layout inflater with DialogFragment", "body": "<p>You don't need to inflate your view, because <code>dialog.setContentView</code> does just that for you.</p>\n\n<p>What you need is to get the inflated view from inside your lambda. </p>\n\n<p>Like this:</p>\n\n<pre><code> mydialog.setOnShowListener {\n    val text = it.view.findViewById&lt;TextView&gt;(R.id.alerte_title)\n</code></pre>\n"}], "owner": {"reputation": 267, "user_id": 10429466, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-w8tbdscu__c/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWqPX9CJdAYvNscm11o8i9c82gFDg/mo/photo.jpg?sz=128", "display_name": "Projet Sin", "link": "https://stackoverflow.com/users/10429466/projet-sin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 53595154, "answer_count": 1, "score": -1, "last_activity_date": 1543844723, "creation_date": 1543844210, "question_id": 53595085, "link": "https://stackoverflow.com/questions/53595085/layout-inflater-with-dialogfragment", "title": "Layout inflater with DialogFragment", "body": "<p>I'm trying to inflate my custom layout (a dialog fragment). </p>\n\n<p>I have this in my function showDialog()</p>\n\n<pre><code>    val inflatedView = layoutInflater.inflate(R.layout.alerts_dialog_remi, null)\n\n    mydialog = Dialog(this, R.style.DialogCustomTheme)\n    mydialog.requestWindowFeature(Window.FEATURE_NO_TITLE)\n    mydialog.setContentView(R.layout.alerts_dialog_remi)\n    mydialog.setOnShowListener {\n        val text = inflatedView.findViewById&lt;TextView&gt;(R.id.alerte_title)\n        val lp = LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT)\n        text.setText(\"Text\")}\n\n        mydialog.create()\n\n        txt = mydialog.findViewById(R.id.close_modal_alerte)\n        txt.isEnabled = true\n        txt.setOnClickListener{\n            mydialog.cancel()\n        }\n        mydialog.show()\n    }\n</code></pre>\n\n<p>But I don't see the \"Text\" string in my dialog fragment. I tried the put the inflatedView inside setOnShowListener, but it doesn't do anything either.</p>\n"}, {"tags": ["unit-testing", "kotlin", "mockk"], "comments": [{"owner": {"reputation": 1494, "user_id": 3742196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JXFwn.jpg?s=128&g=1", "display_name": "oleksiyp", "link": "https://stackoverflow.com/users/3742196/oleksiyp"}, "edited": false, "score": 0, "creation_date": 1543852551, "post_id": 53595042, "comment_id": 94057192, "body": "No, this is not possible with mockk, but looks like a good feature to do. Do you know if it is possible in other mocking frameworks?"}, {"owner": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "reply_to_user": {"reputation": 1494, "user_id": 3742196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JXFwn.jpg?s=128&g=1", "display_name": "oleksiyp", "link": "https://stackoverflow.com/users/3742196/oleksiyp"}, "edited": false, "score": 0, "creation_date": 1543854669, "post_id": 53595042, "comment_id": 94058403, "body": "Nope, because it seems that in Mockito it is done quite crutchy: <a href=\"https://stackoverflow.com/questions/32828486/how-can-i-verify-that-one-of-two-methods-was-called-using-mockito\" title=\"how can i verify that one of two methods was called using mockito\">stackoverflow.com/questions/32828486/&hellip;</a>"}, {"owner": {"reputation": 1494, "user_id": 3742196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JXFwn.jpg?s=128&g=1", "display_name": "oleksiyp", "link": "https://stackoverflow.com/users/3742196/oleksiyp"}, "edited": false, "score": 2, "creation_date": 1543875116, "post_id": 53595042, "comment_id": 94067850, "body": "Added an issue <a href=\"https://github.com/mockk/mockk/issues/196\" rel=\"nofollow noreferrer\">github.com/mockk/mockk/issues/196</a> (please don&#39;t expect it happen too soon. I spend weekend per 4-6 weeks to fix mockk things)"}, {"owner": {"reputation": 1494, "user_id": 3742196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JXFwn.jpg?s=128&g=1", "display_name": "oleksiyp", "link": "https://stackoverflow.com/users/3742196/oleksiyp"}, "edited": false, "score": 0, "creation_date": 1543875301, "post_id": 53595042, "comment_id": 94067934, "body": "You probably can do the same workaround with try/catch as Mockito. It is ugly, but better now then nothing. I will need to think about syntax, redo a lot of stuff inside to make it happen. It is not a small change(although I find it interesting to do)"}, {"owner": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "reply_to_user": {"reputation": 1494, "user_id": 3742196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JXFwn.jpg?s=128&g=1", "display_name": "oleksiyp", "link": "https://stackoverflow.com/users/3742196/oleksiyp"}, "edited": false, "score": 0, "creation_date": 1543879183, "post_id": 53595042, "comment_id": 94069242, "body": "No worries! If you could make an answer with contents of the commentaries it would be just great. This way I could mark an answer as accepted, while within comments it&#39;s impossible."}], "owner": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 388, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1543844101, "creation_date": 1543844101, "question_id": 53595042, "link": "https://stackoverflow.com/questions/53595042/mockk-method-invocation-verification-can-i-verify-that-one-of-two-possible-meth", "title": "Mockk method invocation verification: can I verify that one of two possible methods was invoked?", "body": "<p>I want to check if either <a href=\"https://developer.android.com/reference/android/os/HandlerThread\" rel=\"nofollow noreferrer\"><code>HandlerThread</code></a>'s <code>quit</code> or <code>quitSafely</code> method was invoked (exactly once and only one of these two). Is it possible using <a href=\"https://mockk.io/\" rel=\"nofollow noreferrer\">Mockk</a>?</p>\n"}, {"tags": ["spring", "dependency-injection", "kotlin", "setter-injection"], "answers": [{"tags": [], "owner": {"reputation": 3922, "user_id": 498457, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/Ea08W.png?s=128&g=1", "display_name": "Christoph Grimmer-Dietrich", "link": "https://stackoverflow.com/users/498457/christoph-grimmer-dietrich"}, "is_accepted": true, "score": 3, "last_activity_date": 1543999319, "last_edit_date": 1543999319, "creation_date": 1543843886, "answer_id": 53594964, "question_id": 53594962, "link": "https://stackoverflow.com/questions/53594962/how-to-use-setter-injection-with-kotlin-and-spring/53594964#53594964", "title": "How to use setter injection with Kotlin and Spring?", "body": "<p>The solution for this is a bit hard to find simply because I never wrote a setter for Kotlin so far. The problem is that one easily confuses the property with the <a href=\"https://kotlinlang.org/docs/reference/properties.html#backing-fields\" rel=\"nofollow noreferrer\">backing field</a> which is also generated by the compiler.</p>\n\n<p>Thus the correct code is </p>\n\n<pre><code>var x : Any? = null\n    @Autowired(required = false)\n    set(value) {\n        field = value\n    }\n</code></pre>\n\n<p>The <code>required = false</code> is necessary to make the injection optional, by the way.</p>\n"}], "owner": {"reputation": 3922, "user_id": 498457, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/Ea08W.png?s=128&g=1", "display_name": "Christoph Grimmer-Dietrich", "link": "https://stackoverflow.com/users/498457/christoph-grimmer-dietrich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 322, "favorite_count": 0, "accepted_answer_id": 53594964, "answer_count": 1, "score": 2, "last_activity_date": 1543999319, "creation_date": 1543843886, "question_id": 53594962, "link": "https://stackoverflow.com/questions/53594962/how-to-use-setter-injection-with-kotlin-and-spring", "title": "How to use setter injection with Kotlin and Spring?", "body": "<p>I'm currently trying to figure out how to use the setter injection of Spring with Kotlin. I cannot use constructor injection for this because the Bean might be null and I don't want to use field injection because it's the worst. The obvious way to write </p>\n\n<pre><code>var x : Any? = null\n    @Autowired\n    set(value) {\n        x = value\n    }\n</code></pre>\n\n<p>cannot work because this will result in a cyclic call. So how can I autowire a member using setter injection?</p>\n"}]