[{"tags": ["android", "arrays", "kotlin", "byte", "uint32"], "comments": [{"owner": {"reputation": 171740, "user_id": 869736, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/671f732e3c68c387c702112a30e5ebd8?s=128&d=identicon&r=PG&f=1", "display_name": "Louis Wasserman", "link": "https://stackoverflow.com/users/869736/louis-wasserman"}, "edited": false, "score": 1, "creation_date": 1533164585, "post_id": 51642947, "comment_id": 90251058, "body": "<code>myInt.toByte() and 0xFF.toByte()</code> does not make much sense.  <code>myInt and 0xFF</code> probably would, though.  You do not <i>want</i> the result to be a <code>Byte</code>, as <code>Byte</code> is inherently signed."}, {"owner": {"reputation": 1570, "user_id": 3935512, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2e1a647f0bc81d163270414a4ffedcef?s=128&d=identicon&r=PG&f=1", "display_name": "A.Sanchez.SD", "link": "https://stackoverflow.com/users/3935512/a-sanchez-sd"}, "reply_to_user": {"reputation": 171740, "user_id": 869736, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/671f732e3c68c387c702112a30e5ebd8?s=128&d=identicon&r=PG&f=1", "display_name": "Louis Wasserman", "link": "https://stackoverflow.com/users/869736/louis-wasserman"}, "edited": false, "score": 0, "creation_date": 1533170324, "post_id": 51642947, "comment_id": 90252202, "body": "@LouisWasserman Thank you for reviewing and catching this Louis."}, {"owner": {"reputation": 4522, "user_id": 101337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fae6fc1741623270471a080b705b1fa0?s=128&d=identicon&r=PG", "display_name": "Alexander Egger", "link": "https://stackoverflow.com/users/101337/alexander-egger"}, "edited": false, "score": 1, "creation_date": 1533235537, "post_id": 51642947, "comment_id": 90284107, "body": "It has to be <code>val bytes = ByteArray(8)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 581, "user_id": 909169, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a01f2a00783b6c3cd22c0f00dedb5434?s=128&d=identicon&r=PG", "display_name": "Dmitry Kolesnikovich", "link": "https://stackoverflow.com/users/909169/dmitry-kolesnikovich"}, "edited": false, "score": 3, "creation_date": 1576585282, "post_id": 51660329, "comment_id": 104940666, "body": "why do you convert long to 4 bytes if long has 8 bytes in size in Java?"}, {"owner": {"reputation": 141, "user_id": 1780473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ffac3aca48cc54a66b520f56ec6a996?s=128&d=identicon&r=PG", "display_name": "Alex Couch", "link": "https://stackoverflow.com/users/1780473/alex-couch"}, "reply_to_user": {"reputation": 581, "user_id": 909169, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a01f2a00783b6c3cd22c0f00dedb5434?s=128&d=identicon&r=PG", "display_name": "Dmitry Kolesnikovich", "link": "https://stackoverflow.com/users/909169/dmitry-kolesnikovich"}, "edited": false, "score": 0, "creation_date": 1601331359, "post_id": 51660329, "comment_id": 113368998, "body": "@DmitryKolesnikovich Looks like they&#39;re doing that for simplicity. Shifting it right 24 times gives you the highest word compared to getting the highest byte (though I&#39;m sure you and others already know that) although I&#39;m not sure how we&#39;re able to add a word to a byte array. It&#39;s all preference I guess and I&#39;d recommend expanding it to include 24, 18, 16, 12, 8 and applying a bitmask of 0xFF instead of 0xFFFF in case anyone wants to operate on bytes instead of words. This way you get 8 bytes instead of 4 words."}], "tags": [], "owner": {"reputation": 4522, "user_id": 101337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fae6fc1741623270471a080b705b1fa0?s=128&d=identicon&r=PG", "display_name": "Alexander Egger", "link": "https://stackoverflow.com/users/101337/alexander-egger"}, "is_accepted": true, "score": 7, "last_activity_date": 1533235649, "creation_date": 1533235649, "answer_id": 51660329, "question_id": 51642947, "link": "https://stackoverflow.com/questions/51642947/in-kotlin-whats-the-cleanest-way-to-convert-a-long-to-uint32-bytearray-and-an-i/51660329#51660329", "title": "In Kotlin, whats the cleanest way to convert a Long to uint32 ByteArray and an Int to uint8?", "body": "<p>I prefer not to use <code>ByteBuffer</code> because it adds a dependency to the JVM. Instead I use:</p>\n\n<pre><code>fun longToUInt32ByteArray(value: Long): ByteArray {\n    val bytes = ByteArray(4)\n    bytes[3] = (value and 0xFFFF).toByte()\n    bytes[2] = ((value ushr 8) and 0xFFFF).toByte()\n    bytes[1] = ((value ushr 16) and 0xFFFF).toByte()\n    bytes[0] = ((value ushr 24) and 0xFFFF).toByte()\n    return bytes\n}\n</code></pre>\n"}], "owner": {"reputation": 1570, "user_id": 3935512, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2e1a647f0bc81d163270414a4ffedcef?s=128&d=identicon&r=PG&f=1", "display_name": "A.Sanchez.SD", "link": "https://stackoverflow.com/users/3935512/a-sanchez-sd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3440, "favorite_count": 1, "accepted_answer_id": 51660329, "answer_count": 1, "score": 4, "last_activity_date": 1533310036, "creation_date": 1533161603, "last_edit_date": 1533310036, "question_id": 51642947, "link": "https://stackoverflow.com/questions/51642947/in-kotlin-whats-the-cleanest-way-to-convert-a-long-to-uint32-bytearray-and-an-i", "title": "In Kotlin, whats the cleanest way to convert a Long to uint32 ByteArray and an Int to uint8?", "body": "<pre><code>fun longToByteArray(value: Long): ByteArray {\n    val bytes = ByteArray(8)\n    ByteBuffer.wrap(bytes).putLong(value)\n    return Arrays.copyOfRange(bytes, 4, 8)\n}\n\nfun intToUInt8(value: Int): ByteArray {\n    val bytes = ByteArray(4)\n    ByteBuffer.wrap(bytes).order(ByteOrder.LITTLE_ENDIAN).putInt(value and 0xff)\n    var array = Arrays.copyOfRange(bytes, 0, 1)\n    return array\n}\n</code></pre>\n\n<p>I think these are the Kotlin equivalents of some Java ways, but I'm wondering if these approaches are correct/necessary in Kotlin.</p>\n\n<p>Edit: Fixing examples per comments, also demonstrating changing byte order. Thank you for the feedback. I'm going to accept the answer that demonstrated how to do this without ByteBuffer. </p>\n"}, {"tags": ["java", "kotlin", "spring-webflux", "reactor-netty"], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 5381168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/718240538545fb42ddccbe5fa54a4cbf?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr Napad\u0142ek", "link": "https://stackoverflow.com/users/5381168/piotr-napad%c5%82ek"}, "edited": false, "score": 1, "creation_date": 1533158860, "post_id": 51642307, "comment_id": 90249440, "body": "Ok, that brings me closer, but after that operation leaves me with Mono&lt;Long?&gt; while I&#39;d like to process further operations on the Flux leaving it unchanged. In other words, I&#39;d like to subscribe to onComplete of the flux with having this count."}, {"owner": {"reputation": 3063, "user_id": 5150013, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e3ccdf1205521e000cd3776d91c3b7d7?s=128&d=identicon&r=PG&f=1", "display_name": "code4kix", "link": "https://stackoverflow.com/users/5150013/code4kix"}, "reply_to_user": {"reputation": 85, "user_id": 5381168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/718240538545fb42ddccbe5fa54a4cbf?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr Napad\u0142ek", "link": "https://stackoverflow.com/users/5381168/piotr-napad%c5%82ek"}, "edited": false, "score": 0, "creation_date": 1533303430, "post_id": 51642307, "comment_id": 90310619, "body": "Understood. You could possibly keep the count yourself (increment as you receive items). I can&#39;t think of a better way; please update if you find out."}], "tags": [], "owner": {"reputation": 3063, "user_id": 5150013, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e3ccdf1205521e000cd3776d91c3b7d7?s=128&d=identicon&r=PG&f=1", "display_name": "code4kix", "link": "https://stackoverflow.com/users/5150013/code4kix"}, "is_accepted": false, "score": 2, "last_activity_date": 1533157842, "creation_date": 1533157842, "answer_id": 51642307, "question_id": 51642123, "link": "https://stackoverflow.com/questions/51642123/get-flux-size-when-flux-is-complete/51642307#51642307", "title": "Get Flux size when Flux is complete", "body": "<p>By calling the <a href=\"https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Flux.html#count--\" rel=\"nofollow noreferrer\">count()</a>. It should emit a Mono when onComplete is observed. </p>\n"}, {"tags": [], "owner": {"reputation": 479, "user_id": 715518, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5bb5dd5d57ee2789eb58907b69ba7f97?s=128&d=identicon&r=PG", "display_name": "Ivan Senic", "link": "https://stackoverflow.com/users/715518/ivan-senic"}, "is_accepted": false, "score": 2, "last_activity_date": 1563209192, "creation_date": 1563209192, "answer_id": 57044029, "question_id": 51642123, "link": "https://stackoverflow.com/questions/51642123/get-flux-size-when-flux-is-complete/57044029#57044029", "title": "Get Flux size when Flux is complete", "body": "<p>You can use <a href=\"https://projectreactor.io/docs/core/release/reference/#advanced-broadcast-multiple-subscribers-connectableflux\" rel=\"nofollow noreferrer\">ConnectableFlux</a>. In your example:</p>\n\n<pre><code>var all = repository.findAll()\n             .filter { it.age &gt; 10 }\n             .distinct { it.name }\n             .publish()\n             .autoConnect(2)\n\nall.count()\n   .subscribe {c -&gt; log.info(\"Found total {} records!\", c)}\n\nreturn all;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8033280, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-G4DVJRyWZr0/AAAAAAAAAAI/AAAAAAAAABI/EsAFT_WjVi0/photo.jpg?sz=128", "display_name": "Adewale Ijalana", "link": "https://stackoverflow.com/users/8033280/adewale-ijalana"}, "is_accepted": false, "score": -1, "last_activity_date": 1614072423, "creation_date": 1614072423, "answer_id": 66330403, "question_id": 51642123, "link": "https://stackoverflow.com/questions/51642123/get-flux-size-when-flux-is-complete/66330403#66330403", "title": "Get Flux size when Flux is complete", "body": "<p>Here was what I did,</p>\n<pre><code>AtomicInteger i = new AtomicInteger();\nFlux&lt;UserDetails&gt; stringFlux =\n                Flux.using(() -&gt; stringStream, Flux::fromStream,\n                Stream::close)\n                        .doOnNext(s -&gt; i.getAndIncrement())\n                        .log()\n                        .map(UserDetails::createUserDetails);\n\nstringFlux\n                .subscribe(updateUserDetailsService::updateUserDetails);\n\nlog.info(&quot;number of records: {}&quot;, i);\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 5381168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/718240538545fb42ddccbe5fa54a4cbf?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr Napad\u0142ek", "link": "https://stackoverflow.com/users/5381168/piotr-napad%c5%82ek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6245, "favorite_count": 0, "answer_count": 3, "score": 4, "last_activity_date": 1614072423, "creation_date": 1533156945, "last_edit_date": 1533289407, "question_id": 51642123, "link": "https://stackoverflow.com/questions/51642123/get-flux-size-when-flux-is-complete", "title": "Get Flux size when Flux is complete", "body": "<p>I'm kinda stuck with a trivial task: whenever I query an external API with reactive spring WebClient or query reactive MongoDBRepository, I'd like to log how many entities got through my flux, eg. to log message like \"Found n records in the database.\". Eg:</p>\n\n<pre><code>return repository.findAll()\n                 .doOnComplete { log.info(\"Found total n records!\") } // how to get the n?\n                 .filter { it.age &gt; 10 }\n                 .distinct { it.name }\n</code></pre>\n\n<p>TLDR: How to get a flux size (and perhaps it's contents) when it completes?</p>\n"}, {"tags": ["java", "android", "performance", "kotlin", "compare"], "comments": [{"owner": {"reputation": 1854, "user_id": 545353, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o0daF.png?s=128&g=1", "display_name": "Pavel Molchanov", "link": "https://stackoverflow.com/users/545353/pavel-molchanov"}, "edited": false, "score": 0, "creation_date": 1533153633, "post_id": 51641293, "comment_id": 90247245, "body": "try with 100k times"}, {"owner": {"reputation": 12732, "user_id": 430128, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c2aa2c9f527afea12a7fef458588b2a1?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/430128/raman"}, "edited": false, "score": 0, "creation_date": 1533153896, "post_id": 51641293, "comment_id": 90247351, "body": "First, use JMH for microbenchmarks like this -- the way you are doing it now is fraught with measurement error. Secondly, you can compare the bytecode to see any differences (use the bytecode viewer in IDEA). I think you&#39;ll find the Kotlin compiler optimizes the String concat to use <code>StringBuilder</code>."}, {"owner": {"reputation": 182833, "user_id": 2970947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAq55.png?s=128&g=1", "display_name": "Elliott Frisch", "link": "https://stackoverflow.com/users/2970947/elliott-frisch"}, "edited": false, "score": 0, "creation_date": 1533153947, "post_id": 51641293, "comment_id": 90247374, "body": "Your function(s) have no visible side effects; after some number of iteration tests the JIT is going to eliminate one (or both) loops."}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 1, "creation_date": 1533154214, "post_id": 51641293, "comment_id": 90247481, "body": "This benchmark makes no sense, it basically exercises CPU&#39;s memcpy speed and generates huge GC pressure. Neither has a lot to do with the efficiency of the respective compilers. Apart from that, you have no warmup, you don&#39;t use the resulting string after the loop (so it&#39;s eligible for Dead Code Elimination), and many other problems."}, {"owner": {"reputation": 11, "user_id": 9038461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32348b1f2c7f2c25b76e37277bbdc945?s=128&d=identicon&r=PG&f=1", "display_name": "Schloni1995", "link": "https://stackoverflow.com/users/9038461/schloni1995"}, "edited": false, "score": 0, "creation_date": 1533157825, "post_id": 51641293, "comment_id": 90249064, "body": "Thanks for answers guys. Just for information, I never tried to benchmark my software before. Thats why I seems like a beginner code."}], "owner": {"reputation": 11, "user_id": 9038461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32348b1f2c7f2c25b76e37277bbdc945?s=128&d=identicon&r=PG&f=1", "display_name": "Schloni1995", "link": "https://stackoverflow.com/users/9038461/schloni1995"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 759, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1533153094, "creation_date": 1533153094, "question_id": 51641293, "link": "https://stackoverflow.com/questions/51641293/why-is-kotlin-with-50k-iterations-faster-than-java", "title": "Why is Kotlin with 50k iterations faster than Java?", "body": "<p>I have the same source code twice. Once in java and once in kotlin.</p>\n\n<p>The algorithm is very simple.</p>\n\n<p>First the java code: </p>\n\n<pre><code>public class ConcatString implements Runnable\n{\nprivate final int o;\nlong start;\nprivate long conTime;\n\n\npublic ConcatString(final int o)\n{\n    this.o = o;\n}\n\n@Override\npublic void run()\n{\n\n    start = System.currentTimeMillis();\n    String s = \"\";\n    for(int i = 0; i &lt; o; i++)\n    {\n        s += i;\n    }\n    conTime = System.currentTimeMillis() - start;\n}\n\n/**\n * @return the conTime\n */\npublic long getConTime()\n{\n    return conTime;\n}\n}\n</code></pre>\n\n<p>And here is the kotlin code:</p>\n\n<pre><code>class ConcatString(private val o: Int) : Runnable {\ninternal var start: Long = 0\n/** @return the conTime\n */\nvar conTime: Long = 0\n\n\noverride fun run() {\n    start = System.currentTimeMillis()\n    var s = \"\"\n    for (i in 0 until o) {\n        s += i\n    }\n    // System.out.println(s);\n    conTime = System.currentTimeMillis() - start\n}\n}\n</code></pre>\n\n<p>As you can see, it is easy! \nI compared these two by calculate the time. With 10k Java is faster than Kotlin, but with 50k times Kotlin is faster than Java.\nI can't understand why this happen! \nCan anyone explain me why?</p>\n"}, {"tags": ["android", "kotlin", "wifimanager"], "comments": [{"owner": {"reputation": 2042, "user_id": 798406, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d92c9d66ab13f3da053f7635565660f1?s=128&d=identicon&r=PG", "display_name": "Denis Loh", "link": "https://stackoverflow.com/users/798406/denis-loh"}, "edited": false, "score": 0, "creation_date": 1533154249, "post_id": 51640561, "comment_id": 90247493, "body": "Possible duplicate (<a href=\"https://stackoverflow.com/questions/48749798/after-connecting-to-wifi-programmatically-disconnects-a-few-seconds-later/50062119#50062119\" title=\"after connecting to wifi programmatically disconnects a few seconds later\">stackoverflow.com/questions/48749798/&hellip;</a>)"}], "owner": {"reputation": 968, "user_id": 6553331, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1lWip.png?s=128&g=1", "display_name": "temp_", "link": "https://stackoverflow.com/users/6553331/temp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1007, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1533150020, "creation_date": 1533150020, "question_id": 51640561, "link": "https://stackoverflow.com/questions/51640561/android-force-wifi-manager-to-stay-connected-to-network", "title": "Android: Force wifi manager to stay connected to network", "body": "<p>I have an app that is programmatically connecting to an IOT device's OPEN network. The IOT network is not \"active\" and Android seems to want to connect back to an active SSID. By turning the pictured options off, (wifi advanced settings) the phone keeps from jumping networks.  I do not want my users to have to do this.</p>\n\n<p><a href=\"https://i.stack.imgur.com/i2xwT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/i2xwT.png\" alt=\"enter image description here\"></a></p>\n\n<p>Is there a way to force the connection to my desired network? Or do I need to continually check the SSID, disconnect and reconnect?</p>\n\n<p>Here is my current code. This works in most intsances of users staying connected but some phones running Android 8.0 seem to switch back to another network quickly.</p>\n\n<pre><code>        val config = WifiConfiguration()\n        config.SSID = \"\\\"${network.SSID}\\\"\"\n        config.hiddenSSID = true\n        config.priority = 0xBADBAD\n        config.status = WifiConfiguration.Status.ENABLED\n        config.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.NONE)\n        (manager?.addNetwork(config))?.let { netID-&gt;\n            manager?.disconnect()\n            manager?.enableNetwork(netID, true)\n            manager?.reconnect()\n        }\n</code></pre>\n"}, {"tags": ["kotlin", "sequence"], "comments": [{"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1533149221, "post_id": 51640194, "comment_id": 90245045, "body": "Clearly, you must expand the resources&#39; scope. Since you want a flat solution, you must choose to either have an upper-level scope that covers both files or to give up scoped resource management and just leave the files open, maintain references to them, and close them after the processing is done."}, {"owner": {"reputation": 10010, "user_id": 298430, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/59f4dbadde568115653307fefda7e422?s=128&d=identicon&r=PG", "display_name": "smallufo", "link": "https://stackoverflow.com/users/298430/smallufo"}, "reply_to_user": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1533149520, "post_id": 51640194, "comment_id": 90245189, "body": "Is there any code snippets for this ? How to create a scope that auto close two(or more) input stream ?"}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 1, "creation_date": 1533150188, "post_id": 51640194, "comment_id": 90245532, "body": "<a href=\"https://discuss.kotlinlang.org/t/is-there-standard-way-to-use-multiple-resources/2613\" rel=\"nofollow noreferrer\">here</a>, this look really good."}], "answers": [{"tags": [], "owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "is_accepted": false, "score": 2, "last_activity_date": 1533207148, "last_edit_date": 1533207148, "creation_date": 1533206658, "answer_id": 51651642, "question_id": 51640194, "link": "https://stackoverflow.com/questions/51640194/kotlin-to-chain-multiple-sequences-from-different-inputstream/51651642#51651642", "title": "Kotlin to chain multiple sequences from different InputStream?", "body": "<p>You could invert your logic. Important is, that everything is got or handled within the <code>use</code> otherwise that will not work, as you already know.</p>\n\n<p>One such ~invertion could look like:</p>\n\n<pre><code>setOf(\"file1.txt\", \"file2.txt\")\n  .map { MyFile::class.java.getResourceAsStream(it) }\n  .flatMap {\n    it.use {\n      it.bufferedReader(Charsets.UTF_8)\n        .lineSequence()\n        .filterNot { it.startsWith(\"#\") }\n        .toSet()\n    }\n  }\n</code></pre>\n\n<p>Or if you want to pass the chain transformation or filter from outside, maybe something like:</p>\n\n<pre><code>val handleLine : (Sequence&lt;String&gt;) -&gt; Sequence&lt;String&gt; = {\n  it.filterNot { it.startsWith(\"#\") }\n  // .map { ... whatever }\n}\nsetOf(\"file1.txt\", \"file2.txt\")\n  .map { MyFile::class.java.getResourceAsStream(it) }\n  .flatMap {\n    it.use {\n      handleLine(it.bufferedReader(Charsets.UTF_8).lineSequence())\n        .toSet()\n    }\n  }\n</code></pre>\n\n<p>The other alternative is to open up the streams, omit <code>use</code> and finally close them yourself as also @MarkoTopolnik pointed out in the comments:</p>\n\n<pre><code>val inputStreams = sequenceOf(\"file1.txt\", \"file2.txt\")\n  .map { MyFile::class.java.getResourceAsStream(it) }\n\ninputStreams.flatMap { it.bufferedReader(Charsets.UTF_8).lineSequence() }\n  .filterNot { it.startsWith(\"#\") }\n  .toSet()\n</code></pre>\n\n<p>Then either use:</p>\n\n<pre><code>inputStreams.forEach(InputStream::close) // but this will fail on the first error...\n</code></pre>\n\n<p>or the \"safe\" way:</p>\n\n<pre><code>inputStreams.forEach { try { it.close() } catch (e: Exception) { e.printStackTrace() } }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 166, "user_id": 1293630, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b71710642f31a543b7c6aea54807d9fc?s=128&d=identicon&r=PG", "display_name": "Alexey Pomelov", "link": "https://stackoverflow.com/users/1293630/alexey-pomelov"}, "is_accepted": false, "score": 1, "last_activity_date": 1586286511, "creation_date": 1586286511, "answer_id": 61087593, "question_id": 51640194, "link": "https://stackoverflow.com/questions/51640194/kotlin-to-chain-multiple-sequences-from-different-inputstream/61087593#61087593", "title": "Kotlin to chain multiple sequences from different InputStream?", "body": "<p>Was looking for the same thing, I've got lots of big files and want to process them sequentially. You can wrap file processing into a coroutine (e.g. sequence builder) so it will keep the stream while returning lines.</p>\n\n<p>Here I'm traversing a directory and print all the lines:</p>\n\n<pre><code>val base = File(\"....\")\n\nbase.walkTopDown()\n        .filter { it.isFile }\n        .flatMap { file -&gt; sequence {\n                file.useLines { lines -&gt;\n                    lines.forEach { yield(it) }\n                }\n            }\n        }\n        .forEach { println(it) }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 333, "user_id": 3347059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cedcc7653d8cd3a6caf9bb018a072bb5?s=128&d=identicon&r=PG&f=1", "display_name": "Sergey Belonozhko", "link": "https://stackoverflow.com/users/3347059/sergey-belonozhko"}, "is_accepted": false, "score": 0, "last_activity_date": 1611444651, "creation_date": 1611444651, "answer_id": 65865629, "question_id": 51640194, "link": "https://stackoverflow.com/questions/51640194/kotlin-to-chain-multiple-sequences-from-different-inputstream/65865629#65865629", "title": "Kotlin to chain multiple sequences from different InputStream?", "body": "<p>If I understand your question, I had a pretty similar problem.\nI had to process each line from multiple files the same way. I didn't want to go through individual files, but rather get all the lines as a sequence.\nHere's my approach:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>    fun main() {\n        println(Paths.get(&quot;&quot;).toAbsolutePath())\n        val filenames = listOf(&quot;file1&quot;, &quot;file2&quot;)\n        val lines = sequence {\n            filenames\n                    .asSequence()\n                    .map { LoggingReader(File(it)) }\n                    .forEach {\n                        it.useLines { yieldAll(it) }\n                    }\n        }\n        lines.forEachIndexed { i, line -&gt; println(&quot;$i $line&quot;) }\n    }\n    \n    class LoggingReader(val file: File) : BufferedReader(file.bufferedReader()) {\n        init {\n            println(&quot;$file - open&quot;)\n        }\n    \n        override fun close() {\n            super.close()\n            println(&quot;$file - closed&quot;)\n        }\n    }\n</code></pre>\n<p>This code gives</p>\n<pre class=\"lang-none prettyprint-override\"><code>    file1 - open\n    0 file1-1\n    1 file1-2\n    2 file1-3\n    file1 - closed\n    file2 - open\n    3 file2-1\n    4 file2-2\n    5 file2-3\n    file2 - closed\n</code></pre>\n<p><strong>Note</strong> This line is very important <code>.asSequence()</code>. Without the line it will process the entire <code>.map</code> statement before <code>.foreach</code>. This way it will open all the files before any read. Below is the output of this case.</p>\n<pre class=\"lang-none prettyprint-override\"><code>    file1 - open\n    file2 - open\n    0 file1-1\n    1 file1-2\n    2 file1-3\n    file1 - closed\n    3 file2-1\n    4 file2-2\n    5 file2-3\n    file2 - closed\n</code></pre>\n"}], "owner": {"reputation": 10010, "user_id": 298430, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/59f4dbadde568115653307fefda7e422?s=128&d=identicon&r=PG", "display_name": "smallufo", "link": "https://stackoverflow.com/users/298430/smallufo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 657, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1611444651, "creation_date": 1533148724, "question_id": 51640194, "link": "https://stackoverflow.com/questions/51640194/kotlin-to-chain-multiple-sequences-from-different-inputstream", "title": "Kotlin to chain multiple sequences from different InputStream?", "body": "<p>Say if I want to parse a large file like this :</p>\n\n<pre><code>val iStream = MyFile::class.java\n    .getResourceAsStream(\"largeFile.txt\")\n\niStream.bufferedReader(Charsets.UTF_8).useLines { lines -&gt;\n    lines.filterNot { it.startsWith(\"#\") }\n    // parseing\n    .toSet()\n}\n</code></pre>\n\n<p>But if I want to split the largeFile to multiple smaller files , how to chain the sequences ?</p>\n\n<p>For example :</p>\n\n<pre><code>val seq1 = MyFile::class.java.getResourceAsStream(\"file1.txt\")\n    .use { it.bufferedReader(Charsets.UTF_8).lineSequence() }\nval seq2 = MyFile::class.java.getResourceAsStream(\"file2.txt\")\n    .use { it.bufferedReader(Charsets.UTF_8).lineSequence() }\n\nsequenceOf(seq1, seq2).flatten()\n  .filterNot { it.startsWith(\"#\") }\n  // parsing\n  .toSet()\n</code></pre>\n\n<p>It will throw <code>java.io.IOException: Stream closed</code> , which is reasonable , because the parsing is outside the <code>scope</code> of the <code>use</code> block.</p>\n\n<p>How to solve the problem ?</p>\n\n<p>I know there may be some <strong>nesting</strong> solution (nesting <code>useLines</code> ... ) , but I think that is ugly . Is there any other <code>flat</code> solutions ?</p>\n"}, {"tags": ["android", "mysql", "kotlin"], "comments": [{"owner": {"reputation": 387, "user_id": 7303452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xHgsn.jpg?s=128&g=1", "display_name": "Hamlet Leon", "link": "https://stackoverflow.com/users/7303452/hamlet-leon"}, "edited": false, "score": 0, "creation_date": 1533149497, "post_id": 51640161, "comment_id": 90245179, "body": "I do a fast search and i found this: <a href=\"https://gist.github.com/cofearabi/5039135\" rel=\"nofollow noreferrer\">Android Sample</a> and <a href=\"https://dev.mysql.com/doc/connector-j/5.1/en/connector-j-usagenotes-connect-drivermanager.html\" rel=\"nofollow noreferrer\">MySQL Reference</a>"}, {"owner": {"reputation": 25, "user_id": 9901130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c28d49caa05abb00d9170c0cf97c7eb4?s=128&d=identicon&r=PG&f=1", "display_name": "abdo", "link": "https://stackoverflow.com/users/9901130/abdo"}, "reply_to_user": {"reputation": 387, "user_id": 7303452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xHgsn.jpg?s=128&g=1", "display_name": "Hamlet Leon", "link": "https://stackoverflow.com/users/7303452/hamlet-leon"}, "edited": false, "score": 0, "creation_date": 1533154441, "post_id": 51640161, "comment_id": 90247569, "body": "that will help thank you"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 9901130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c28d49caa05abb00d9170c0cf97c7eb4?s=128&d=identicon&r=PG&f=1", "display_name": "abdo", "link": "https://stackoverflow.com/users/9901130/abdo"}, "edited": false, "score": 0, "creation_date": 1533154265, "post_id": 51640536, "comment_id": 90247500, "body": "thank you i will learn jdbc i need to know more about that how create tables and how to insert and view ......."}], "tags": [], "owner": {"reputation": 28, "user_id": 1313706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9121bbd9f3feb1f85dacef76f626c049?s=128&d=identicon&r=PG", "display_name": "welsayedaly", "link": "https://stackoverflow.com/users/1313706/welsayedaly"}, "is_accepted": true, "score": 1, "last_activity_date": 1533149938, "creation_date": 1533149938, "answer_id": 51640536, "question_id": 51640161, "link": "https://stackoverflow.com/questions/51640161/how-to-connect-mysql-hosted-in-my-computer-to-an-android-app-using-kotlin/51640536#51640536", "title": "how to connect MySQL hosted in my computer to an Android app using Kotlin", "body": "<p>MySQL connector for java works for Kotlin as well. You can download it from <a href=\"https://dev.mysql.com/downloads\" rel=\"nofollow noreferrer\">https://dev.mysql.com/downloads</a></p>\n\n<p>And then you can kotlint like that:</p>\n\n<pre><code>val connectionProps = Properties()\nconnectionProps.put(\"user\", username)\nconnectionProps.put(\"password\", password)\n\ntry {\n\u00a0\u00a0\u00a0\u00a0Class.forName(\"com.mysql.jdbc.Driver\").newInstance()\n\u00a0\u00a0\u00a0\u00a0conn = DriverManager.getConnection(\u201curl\u201d, connectionProps)\n} catch (ex: SQLException) {\n\u00a0\u00a0\u00a0\u00a0// handle any errors\n\u00a0\u00a0\u00a0\u00a0ex.printStackTrace()\n} catch (ex: Exception) {\n\u00a0\u00a0\u00a0\u00a0// handle any errors\n\u00a0\u00a0\u00a0\u00a0ex.printStackTrace()\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 9901130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c28d49caa05abb00d9170c0cf97c7eb4?s=128&d=identicon&r=PG&f=1", "display_name": "abdo", "link": "https://stackoverflow.com/users/9901130/abdo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2833, "favorite_count": 2, "accepted_answer_id": 51640536, "answer_count": 1, "score": 1, "last_activity_date": 1533149938, "creation_date": 1533148564, "last_edit_date": 1533148849, "question_id": 51640161, "link": "https://stackoverflow.com/questions/51640161/how-to-connect-mysql-hosted-in-my-computer-to-an-android-app-using-kotlin", "title": "how to connect MySQL hosted in my computer to an Android app using Kotlin", "body": "<p>Can I connect an Android app to MySQL database in my computer? Just tell me the way or a library name and let me google it to learn about.</p>\n"}, {"tags": ["maven", "intellij-idea", "kotlin", "vert.x"], "answers": [{"tags": [], "owner": {"reputation": 1862, "user_id": 6153860, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-B3kUIZHFNrI/AAAAAAAAAAI/AAAAAAAAABE/JMgBaMcAMms/photo.jpg?sz=128", "display_name": "Young Emil", "link": "https://stackoverflow.com/users/6153860/young-emil"}, "is_accepted": true, "score": 2, "last_activity_date": 1533204783, "creation_date": 1533204783, "answer_id": 51650995, "question_id": 51640134, "link": "https://stackoverflow.com/questions/51640134/jar-file-not-in-target-folder-after-building-with-maven-kotlin/51650995#51650995", "title": "Jar file not in target folder after building with maven - KOTLIN", "body": "<p>This question would have been a duplicate if it was easily detected. I kept on googling and searching with different search queries until I got to <a href=\"https://stackoverflow.com/a/30210471/6153860\">@arghtype's answer on this SO page</a>.</p>\n\n<p>The answer suggested you specifically build the project with maven goal.\n<code>Intellij</code> has a <code>maven projects</code> window on the left side of the main window which is usually minimized.</p>\n\n<p>When you click and the <code>maven project</code> window opens</p>\n\n<ol>\n<li>drop down the <code>lifecycle</code> and double click <code>clean</code>. </li>\n<li>when cleaning is done double click again on the <code>package</code>. </li>\n<li>That's all...check the target folder, you will see the jar file(s).</li>\n</ol>\n"}], "owner": {"reputation": 1862, "user_id": 6153860, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-B3kUIZHFNrI/AAAAAAAAAAI/AAAAAAAAABE/JMgBaMcAMms/photo.jpg?sz=128", "display_name": "Young Emil", "link": "https://stackoverflow.com/users/6153860/young-emil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 755, "favorite_count": 0, "closed_date": 1581852804, "accepted_answer_id": 51650995, "answer_count": 1, "score": 2, "last_activity_date": 1533204783, "creation_date": 1533148471, "question_id": 51640134, "link": "https://stackoverflow.com/questions/51640134/jar-file-not-in-target-folder-after-building-with-maven-kotlin", "closed_reason": "Duplicate", "title": "Jar file not in target folder after building with maven - KOTLIN", "body": "<p>I am a JAVA developer but am trying to move to Kotlin, which tells that am new to Kotlin. I have a <code>kotlin</code> <code>maven</code> project where I implement <code>vertx</code> using <code>intellij</code> IDEA. Below is the <strong>build</strong> part of the pom file. </p>\n\n<p>My concern is that when I build the project using the IDEA, the jar file is not generated into the <code>target</code> folder. I did follow the instructions from <a href=\"https://kotlinlang.org/docs/reference/using-maven.html\" rel=\"nofollow noreferrer\">kotlinlang page</a> to setup the POM file but the issue still persist. </p>\n\n<pre><code>&lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;kotlin-maven-plugin&lt;/artifactId&gt;\n                &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n                &lt;version&gt;${kotlin.version}&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;compile&lt;/id&gt;\n                        &lt;goals&gt; &lt;goal&gt;compile&lt;/goal&gt; &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;sourceDirs&gt;\n                                &lt;sourceDir&gt;${project.basedir}/src/main/kotlin&lt;/sourceDir&gt;\n                                &lt;sourceDir&gt;${project.basedir}/src/main/java&lt;/sourceDir&gt;\n                            &lt;/sourceDirs&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;test-compile&lt;/id&gt;\n                        &lt;goals&gt; &lt;goal&gt;test-compile&lt;/goal&gt; &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;sourceDirs&gt;\n                                &lt;sourceDir&gt;${project.basedir}/src/test/kotlin&lt;/sourceDir&gt;\n                                &lt;sourceDir&gt;${project.basedir}/src/test/java&lt;/sourceDir&gt;\n                            &lt;/sourceDirs&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.5.1&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;!-- Replacing default-compile as it is treated specially by maven --&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;default-compile&lt;/id&gt;\n                        &lt;phase&gt;none&lt;/phase&gt;\n                    &lt;/execution&gt;\n                    &lt;!-- Replacing default-testCompile as it is treated specially by maven --&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;default-testCompile&lt;/id&gt;\n                        &lt;phase&gt;none&lt;/phase&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;java-compile&lt;/id&gt;\n                        &lt;phase&gt;compile&lt;/phase&gt;\n                        &lt;goals&gt; &lt;goal&gt;compile&lt;/goal&gt; &lt;/goals&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;java-test-compile&lt;/id&gt;\n                        &lt;phase&gt;test-compile&lt;/phase&gt;\n                        &lt;goals&gt; &lt;goal&gt;testCompile&lt;/goal&gt; &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.6&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;archive&gt;\n                        &lt;manifest&gt;\n                            &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n                            &lt;mainClass&gt;${main.class}&lt;/mainClass&gt;\n                        &lt;/manifest&gt;\n                    &lt;/archive&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.6&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;make-assembly&lt;/id&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt; &lt;goal&gt;single&lt;/goal&gt; &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;archive&gt;\n                                &lt;manifest&gt;\n                                    &lt;mainClass&gt;${main.class}&lt;/mainClass&gt;\n                                &lt;/manifest&gt;\n                            &lt;/archive&gt;\n                            &lt;descriptorRefs&gt;\n                                &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n                            &lt;/descriptorRefs&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n</code></pre>\n"}, {"tags": ["spring", "spring-boot", "kotlin", "kotlintest"], "comments": [{"owner": {"reputation": 14965, "user_id": 2048448, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9875a5906274bc61f9e3106537a601fc?s=128&d=identicon&r=PG", "display_name": "sksamuel", "link": "https://stackoverflow.com/users/2048448/sksamuel"}, "edited": false, "score": 0, "creation_date": 1533321342, "post_id": 51639913, "comment_id": 90319831, "body": "Do you mean you have multiple beans you want to test in the same test file?"}, {"owner": {"reputation": 1561, "user_id": 3859199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/26she.jpg?s=128&g=1", "display_name": "Bwvolleyball", "link": "https://stackoverflow.com/users/3859199/bwvolleyball"}, "edited": false, "score": 0, "creation_date": 1533752030, "post_id": 51639913, "comment_id": 90466143, "body": "If you are writing unit tests, it&#39;s better to make each of these their own test file.  Additionally, you can either inject each <code>RestController</code> by name eg <code>MyRestController</code>, or you can inject a <code>List&lt;RestController&gt;</code>, but I&#39;m really not sure what a list of rest controllers gains you."}], "owner": {"reputation": 1537, "user_id": 1392366, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/FBF0r.png?s=128&g=1", "display_name": "LiTTle", "link": "https://stackoverflow.com/users/1392366/little"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1533147967, "creation_date": 1533147660, "last_edit_date": 1533147967, "question_id": 51639913, "link": "https://stackoverflow.com/questions/51639913/kotlintest-multiple-beans", "title": "KotlinTest Multiple Beans", "body": "<p>I would like to create Tests for a SpringBoot application. I am reading an <a href=\"https://github.com/kotlintest/kotlintest/blob/master/kotlintest-samples/kotlintest-samples-spring/src/test/kotlin/io/kotlintest/spring/MyBean.kt\" rel=\"nofollow noreferrer\">example</a> and I cannot understard what should I do when I have multiple <code>MyBean</code> to test. Should I create a new <code>Test</code> file? Should I <code>Autowire</code> all of my beans into one class?\nWhat I exactly want to do is to test some <code>RestController</code> <a href=\"https://github.com/BILLyTheLiTTle/RCCar/tree/master/src/main/kotlin/car/server\" rel=\"nofollow noreferrer\">classes</a>.</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 17743, "user_id": 558433, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/XZg0R.jpg?s=128&g=1", "display_name": "Marcos Vasconcelos", "link": "https://stackoverflow.com/users/558433/marcos-vasconcelos"}, "edited": false, "score": 1, "creation_date": 1533143822, "post_id": 51638871, "comment_id": 90242223, "body": "Unless you wrap it in a object that holds the reference you can&#39;t do it. Such: class IntegerHolder { int value; } the reference inside the class can be changed in the method"}, {"owner": {"reputation": 8092, "user_id": 810815, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/a9d72fdddc4e6a7fd4a908427620e52d?s=128&d=identicon&r=PG&f=1", "display_name": "john doe", "link": "https://stackoverflow.com/users/810815/john-doe"}, "reply_to_user": {"reputation": 17743, "user_id": 558433, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/XZg0R.jpg?s=128&g=1", "display_name": "Marcos Vasconcelos", "link": "https://stackoverflow.com/users/558433/marcos-vasconcelos"}, "edited": false, "score": 0, "creation_date": 1533144019, "post_id": 51638871, "comment_id": 90242318, "body": "By default the values passed to the swap function are &quot;val&quot;. Is there anyway to change that to var?"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 4, "creation_date": 1533144320, "post_id": 51638871, "comment_id": 90242473, "body": "Even if this was possible (as it is in Java), this doesn&#39;t give you pass by reference. Kotlin, just like Java, has no support for pass by reference on primitive types."}, {"owner": {"reputation": 17743, "user_id": 558433, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/XZg0R.jpg?s=128&g=1", "display_name": "Marcos Vasconcelos", "link": "https://stackoverflow.com/users/558433/marcos-vasconcelos"}, "edited": false, "score": 1, "creation_date": 1533144734, "post_id": 51638871, "comment_id": 90242668, "body": "Exactly, parameter pass are always by value and not by reference, they are no pointers you can swap"}, {"owner": {"reputation": 6434, "user_id": 539599, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/6iB0U.jpg?s=128&g=1", "display_name": "Raphael", "link": "https://stackoverflow.com/users/539599/raphael"}, "edited": false, "score": 0, "creation_date": 1540229780, "post_id": 51638871, "comment_id": 92778835, "body": "<a href=\"https://discuss.kotlinlang.org/t/pass-by-ref-for-inline-functions/4805/22?u=reitzig.1\" rel=\"nofollow noreferrer\">This</a> may be helpful."}], "answers": [{"tags": [], "owner": {"reputation": 326, "user_id": 9248765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lXLDL.png?s=128&g=1", "display_name": "Ludov Dmitrii", "link": "https://stackoverflow.com/users/9248765/ludov-dmitrii"}, "is_accepted": false, "score": 0, "last_activity_date": 1564268936, "creation_date": 1564268936, "answer_id": 57236730, "question_id": 51638871, "link": "https://stackoverflow.com/questions/51638871/pass-an-integer-by-reference-in-kotlin/57236730#57236730", "title": "Pass an Integer by Reference in Kotlin", "body": "<p>Seems like Kotlin behaves pretty much like Java does:\n<a href=\"https://stackoverflow.com/questions/44515031/is-kotlin-pass-by-value-or-pass-by-reference\">Is Kotlin &quot;pass-by-value&quot; or &quot;pass-by-reference&quot;?</a></p>\n\n<p>simple way to swap is make support class</p>\n\n<pre><code>\nprivate fun swap(pair: Pair) {\n    pair.a += pair.b\n    pair.b = pair.a - pair.b\n    pair.a = pair.a - pair.b\n}\n\nprivate data class Pair(var a: Int, var b: Int)\n\nfun main() {\n\n    val pair = Pair(10, 5)\n    swap(pair)\n    println(pair)\n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 32077, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 1, "creation_date": 1578414257, "post_id": 58632667, "comment_id": 105426870, "body": "And they&#39;ve told that kotlin will <i>&quot;Drastically reduce the amount of boilerplate code&quot;</i>..."}, {"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 1, "creation_date": 1578416794, "post_id": 58632667, "comment_id": 105428149, "body": "It does compared to Java. It does not compared to lower-level languages at tasks higher-level languages are not designed to do."}], "tags": [], "owner": {"reputation": 1833, "user_id": 1062727, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b5b9976710eed726413233e9fef7f43e?s=128&d=identicon&r=PG", "display_name": "Paulo Buchsbaum", "link": "https://stackoverflow.com/users/1062727/paulo-buchsbaum"}, "is_accepted": false, "score": 3, "last_activity_date": 1572465961, "last_edit_date": 1572465961, "creation_date": 1572464882, "answer_id": 58632667, "question_id": 51638871, "link": "https://stackoverflow.com/questions/51638871/pass-an-integer-by-reference-in-kotlin/58632667#58632667", "title": "Pass an Integer by Reference in Kotlin", "body": "<p>There is absolutely no way to do it directly. <em>Kotlin</em> copies a value for scalar types (<code>Double</code>, <code>Float</code>, <code>Boolean</code>, <code>Int</code>, etc.). So any internal changes are lost.</p>\n\n<p>For any other type, Kotlin copy a reference of parameter passed to the function. So any property/field alteration of parameter, also changes the caller parameter. </p>\n\n<p>There is no way to change this behaviour. </p>\n\n<p>After trying many ways to overcome the impossibility of passing scalar by reference, as happens in <em>Kotlin</em>, <em>Java</em> and some other languages; my current strategy is using for any scalar type a plain and generic wrap, as an above comment suggest.</p>\n\n<p>Recently, I'm using this trick for everything, including inside a function that otherwise would demand that I return multiple values. The alternative is joining the  returns in a artificial class or destructuring declarations: <code>val (a, b, c) = function-call()</code> syntax. However, I hate articial classes and destructuring declaration is for local variables only, and it's annoying when some needs visibility out of current block of commands. </p>\n\n<p>My code is very simple:</p>\n\n<pre><code>data class p&lt;T&gt;(   // It's a generic wrap class for scalar type T\n   var v:T\n)\n\nfun &lt;T&gt;swap(a:p&lt;T&gt;, b:p&lt;T&gt;){  // It's a generic swap for scalar types\n  var aux:p&lt;T&gt; = a.copy()\n  a.v = b.v\n  b.v =aux.v \n}\n\n\nfun main() {\n  var a:p&lt;Int&gt; = p&lt;Int&gt;(2)   // 'a' is a kind of 'Int' variable\n  var b:p&lt;Int&gt; = p&lt;Int&gt;(3)   // and so is 'b'\n  swap(a,b)  // Exchange 'a' and 'b' values\n  println(a.v)  // 3\n  println(b.v)  // 2\n}\n</code></pre>\n\n<p>The only drawback is not being able to use syntax sugar of a real scalar type.<br>\nI am forced to add <code>.v</code> on any use of a scalar variable.</p>\n\n<p>I  only uses that for variables that I need pass by reference in some function and it's not so common. I try, when possible, avoid collateral effects. </p>\n"}, {"tags": [], "owner": {"reputation": 906, "user_id": 11739833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e73a01562a4b1d40005067e399a0ab5?s=128&d=identicon&r=PG&f=1", "display_name": "mohsen", "link": "https://stackoverflow.com/users/11739833/mohsen"}, "is_accepted": false, "score": 0, "last_activity_date": 1600345907, "last_edit_date": 1600345907, "creation_date": 1600343400, "answer_id": 63937413, "question_id": 51638871, "link": "https://stackoverflow.com/questions/51638871/pass-an-integer-by-reference-in-kotlin/63937413#63937413", "title": "Pass an Integer by Reference in Kotlin", "body": "<p>You can have a function that gets the references of variables</p>\n<pre><code>var x = 10\nvar y = 20\n\nfun main() {\n    println(&quot;x=$x, y=$y&quot;) // x=10, y=20\n    swap(::x, ::y)\n    println(&quot;x=$x, y=$y&quot;) // x=20, y=10\n}\n\nfun &lt;T&gt; swap(firstRef: KMutableProperty0&lt;T&gt;, secRef: KMutableProperty0&lt;T&gt;) {\n    val temp = firstRef.get()\n    firstRef.set(secRef.get())\n    secRef.set(temp)\n}\n</code></pre>\n<p>and you can pass the references of properties of some class like this <code>swap(someClass::x, someClass::y)</code></p>\n<p>the only limitation is that you can't pass references of local variables which is not the end of the world.</p>\n<p>if you don't like the messy syntax you can always define a <code>typealias</code> and make it pretty:</p>\n<pre><code>typealias Ref&lt;T&gt; =  KMutableProperty0&lt;T&gt;\n\nfun &lt;T&gt; swap(firstRef: Ref&lt;T&gt;, secRef: Ref&lt;T&gt;) {\n    ...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155, "user_id": 7205901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/614015339702632785bd52037986dfe4?s=128&d=identicon&r=PG&f=1", "display_name": "Oliver Eisenbarth", "link": "https://stackoverflow.com/users/7205901/oliver-eisenbarth"}, "is_accepted": false, "score": 0, "last_activity_date": 1601652153, "creation_date": 1601652153, "answer_id": 64174185, "question_id": 51638871, "link": "https://stackoverflow.com/questions/51638871/pass-an-integer-by-reference-in-kotlin/64174185#64174185", "title": "Pass an Integer by Reference in Kotlin", "body": "<p>I know that OP didn\u00b4t ask for this, but <a href=\"https://kotlinlang.org/docs/reference/idioms.html#swapping-two-variables\" rel=\"nofollow noreferrer\">idiomatic Kotlin</a> would look like:</p>\n<pre><code>var a = 1\nvar b = 2\na = b.also { b = a }\n</code></pre>\n"}], "owner": {"reputation": 8092, "user_id": 810815, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/a9d72fdddc4e6a7fd4a908427620e52d?s=128&d=identicon&r=PG&f=1", "display_name": "john doe", "link": "https://stackoverflow.com/users/810815/john-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4539, "favorite_count": 0, "answer_count": 4, "score": 5, "last_activity_date": 1601652153, "creation_date": 1533143644, "question_id": 51638871, "link": "https://stackoverflow.com/questions/51638871/pass-an-integer-by-reference-in-kotlin", "title": "Pass an Integer by Reference in Kotlin", "body": "<p>I am trying to create a swap function which takes in two parameters as shown below: </p>\n\n<pre><code>fun swap(a :Int, b:Int) {\n\n}\n</code></pre>\n\n<p>I call it like this: </p>\n\n<pre><code>  var a = 10\n    var b = 5\n\n    swap(a,b)\n\n    // a should be 5\n    // b should be 10\n</code></pre>\n\n<p>The problem is that even if I swap the values inside the swap function it won't be reflected on the caller's side because it is passed as a copy and not as a reference. </p>\n\n<p>Is there anyway to pass value types to swap function and allow the function the ability to change them. </p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 37945, "user_id": 7136, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a0cd80eff2e11ff35af5ccf00873ccf2?s=128&d=identicon&r=PG", "display_name": "PierreBdR", "link": "https://stackoverflow.com/users/7136/pierrebdr"}, "edited": false, "score": 0, "creation_date": 1583480874, "post_id": 51638665, "comment_id": 107138659, "body": "If that is true, why cannot you have a method that is both <code>open</code> and <code>tailrec</code>?"}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": false, "score": 29, "last_activity_date": 1533142729, "creation_date": 1533142729, "answer_id": 51638665, "question_id": 51638557, "link": "https://stackoverflow.com/questions/51638557/what-is-the-point-of-tailrec-in-kotlin/51638665#51638665", "title": "What is the point of tailrec in Kotlin?", "body": "<p>The keyword tells the compiler that the implementation of the function is required to be tail-recursive, and causes the compiler to report an error if the function is not actually tail-recursive. It protects the user from situations when a change to the implementation of the function causes it to no longer be tail-recursive, and causes an unexpected drop in performance (or a complete failure in production due to a stack overflow error).</p>\n"}, {"comments": [{"owner": {"reputation": 2242, "user_id": 1394710, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0da2f1f5c2e83c6a2fd2291f28651175?s=128&d=identicon&r=PG", "display_name": "HelloWorld", "link": "https://stackoverflow.com/users/1394710/helloworld"}, "edited": false, "score": 0, "creation_date": 1533143623, "post_id": 51638671, "comment_id": 90242139, "body": "So does that mean that functions not marked with tailrec will never be optimized for tail recursion even if eligible? It certainly gives that impression (at least to me). Which gets me wondering if it&#39;s really just about giving compiler hints."}, {"owner": {"reputation": 850, "user_id": 5475850, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QfkXq.jpg?s=128&g=1", "display_name": "tankthinks", "link": "https://stackoverflow.com/users/5475850/tankthinks"}, "edited": false, "score": 2, "creation_date": 1533143807, "post_id": 51638671, "comment_id": 90242216, "body": "This is partly b/c the JVM itself cannot currently optimize for tail recursion (see <a href=\"https://softwareengineering.stackexchange.com/questions/272061/why-doesnt-java-have-optimization-for-tail-recursion-at-all#272086\" title=\"why doesnt java have optimization for tail recursion at all%23272086\">softwareengineering.stackexchange.com/questions/272061/&hellip;</a>).   So many languages on top of the JVM, e.g. Clojure and Kotlin, expose a form (recur in Clojure) or a keyword (tailrec in Kotlin) to catch this at the language level."}, {"owner": {"reputation": 850, "user_id": 5475850, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QfkXq.jpg?s=128&g=1", "display_name": "tankthinks", "link": "https://stackoverflow.com/users/5475850/tankthinks"}, "reply_to_user": {"reputation": 2242, "user_id": 1394710, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0da2f1f5c2e83c6a2fd2291f28651175?s=128&d=identicon&r=PG", "display_name": "HelloWorld", "link": "https://stackoverflow.com/users/1394710/helloworld"}, "edited": false, "score": 0, "creation_date": 1533143926, "post_id": 51638671, "comment_id": 90242274, "body": "@HelloWorld, I know it&#39;s true for Clojure and it seems true for Kotlin based on the docs that the keyword <code>tailrec</code> is <i>required</i> for the Kotlin compiler to do the optimization."}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 1, "creation_date": 1533144475, "post_id": 51638671, "comment_id": 90242546, "body": "The compiler doesn&#39;t need hints to detect a tail-recursive function; it&#39;s quite a trivial check. I&#39;ve explained why the keyword exists. What&#39;s the point in asking questions if you don&#39;t believe the answers you&#39;re given?"}, {"owner": {"reputation": 2242, "user_id": 1394710, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0da2f1f5c2e83c6a2fd2291f28651175?s=128&d=identicon&r=PG", "display_name": "HelloWorld", "link": "https://stackoverflow.com/users/1394710/helloworld"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1533145753, "post_id": 51638671, "comment_id": 90243199, "body": "@yole Yours and zsmb13 seems equivalent, and he was just an ounce faster, so I marked his answer as correct. However, reading tankthinks reply makes me think again."}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1533146495, "post_id": 51638671, "comment_id": 90243584, "body": "Counting the stack frames that Goetz mentions wouldn&#39;t be influenced by TCO. Those critical JDK methods could easily be excluded from the mechanism. Furthermore, it&#39;s doubly irrelevant to a complete separate language such as Kotlin.  Kotlin has all the freedom in the world to apply TCO wherever it sees fit, but it makes the conscious choice of doing it only on explicit request. With a TCO&#39;d method you lose important diagnostic information and it&#39;s great that you can choose where to apply it."}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": false, "score": 4, "last_activity_date": 1533142748, "creation_date": 1533142748, "answer_id": 51638671, "question_id": 51638557, "link": "https://stackoverflow.com/questions/51638557/what-is-the-point-of-tailrec-in-kotlin/51638671#51638671", "title": "What is the point of tailrec in Kotlin?", "body": "<p>I'll go ahead and guess that this is to be able to more deliberately write tail-recursive functions. By requiring the keyword explicitly, you'll know that the compiler optimization will definitely happen (you won't be left guessing if the compiler optimized your function successfully or if you'll get a stack overflow at runtime), plus your code won't even compile if you break the rules of tail recursion for the function you've maked with <code>tailrec</code>, as the doc states:</p>\n\n<blockquote>\n  <p>To be eligible for the tailrec modifier, a function must call itself as the last operation it performs.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 949, "user_id": 951155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f46953d14e2bb66efbad8d8e502528bc?s=128&d=identicon&r=PG", "display_name": "incises", "link": "https://stackoverflow.com/users/951155/incises"}, "is_accepted": false, "score": 2, "last_activity_date": 1558779467, "creation_date": 1558779467, "answer_id": 56303888, "question_id": 51638557, "link": "https://stackoverflow.com/questions/51638557/what-is-the-point-of-tailrec-in-kotlin/56303888#56303888", "title": "What is the point of tailrec in Kotlin?", "body": "<p>Recall official Kotlin documentation just says that :</p>\n\n<blockquote>\n  <p>When a function is marked with the tailrec modifier and meets the required form, the compiler optimises out the recursion, leaving behind a fast and efficient loop based version instead</p>\n</blockquote>\n\n<p>Which strongly suggests that this conversion to a loop is not warranted to take place if the tailrec keyword is not present.</p>\n"}, {"tags": [], "owner": {"reputation": 75, "user_id": 8299065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f509cb147e7d0a248c661cd7517d7b5b?s=128&d=identicon&r=PG&f=1", "display_name": "mustofa.id", "link": "https://stackoverflow.com/users/8299065/mustofa-id"}, "is_accepted": false, "score": 1, "last_activity_date": 1564289855, "creation_date": 1564289855, "answer_id": 57238084, "question_id": 51638557, "link": "https://stackoverflow.com/questions/51638557/what-is-the-point-of-tailrec-in-kotlin/57238084#57238084", "title": "What is the point of tailrec in Kotlin?", "body": "<p>Code example based on @szmb13 @yole answers</p>\n\n<p>try run this code with <strong>n=10000</strong>, if you got error try to add <strong>tailrec</strong> keyword and run it again</p>\n\n<pre><code>fun fibonacci(n: Int, a: BigInteger, b: BigInteger): BigInteger {\n    return if (n == 0) b\n    else fibonacci(n - 1, a + b, a)\n}\n</code></pre>\n\n<p>You can see the different</p>\n"}], "owner": {"reputation": 2242, "user_id": 1394710, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0da2f1f5c2e83c6a2fd2291f28651175?s=128&d=identicon&r=PG", "display_name": "HelloWorld", "link": "https://stackoverflow.com/users/1394710/helloworld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3598, "favorite_count": 1, "answer_count": 4, "score": 13, "last_activity_date": 1564289855, "creation_date": 1533142316, "question_id": 51638557, "link": "https://stackoverflow.com/questions/51638557/what-is-the-point-of-tailrec-in-kotlin", "title": "What is the point of tailrec in Kotlin?", "body": "<p><code>tailrec</code> optimizes functions where there is tail recursion. Why doesn't the compiler just optimize it anyway?</p>\n\n<p>C compilers optimize for tail recursion. You don't have to mark the method as having tail recursion. The compiler just notices that the last operation is recursive. And that's that.</p>\n\n<p>Why does this <em>seemingly</em> excessive keyword exist? Have I missed something? Is it purely for the convenience of the compiler, and not the user?</p>\n"}, {"tags": ["android", "android-studio", "kotlin", "rotation", "spinner"], "comments": [{"owner": {"reputation": 212, "user_id": 6250392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2i920.jpg?s=128&g=1", "display_name": "secret paladin", "link": "https://stackoverflow.com/users/6250392/secret-paladin"}, "edited": false, "score": 2, "creation_date": 1533134363, "post_id": 51636034, "comment_id": 90236549, "body": "may be this help: <a href=\"https://stackoverflow.com/questions/45255559/kotlin-crashes-on-android-when-selected-item-view-is-null\" title=\"kotlin crashes on android when selected item view is null\">stackoverflow.com/questions/45255559/&hellip;</a>"}, {"owner": {"reputation": 5464, "user_id": 2452680, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/jgUMi.jpg?s=128&g=1", "display_name": "Dan Bray", "link": "https://stackoverflow.com/users/2452680/dan-bray"}, "reply_to_user": {"reputation": 212, "user_id": 6250392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2i920.jpg?s=128&g=1", "display_name": "secret paladin", "link": "https://stackoverflow.com/users/6250392/secret-paladin"}, "edited": false, "score": 4, "creation_date": 1533134779, "post_id": 51636034, "comment_id": 90236834, "body": "@secretpaladin That fixed it. I literally just had to add a <code>?</code> after the second parameter <code>view: View</code> in <code>onItemSelected</code>."}], "owner": {"reputation": 5464, "user_id": 2452680, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/jgUMi.jpg?s=128&g=1", "display_name": "Dan Bray", "link": "https://stackoverflow.com/users/2452680/dan-bray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 711, "favorite_count": 0, "closed_date": 1533168929, "answer_count": 0, "score": 1, "last_activity_date": 1533134653, "creation_date": 1533134115, "last_edit_date": 1533134653, "question_id": 51636034, "link": "https://stackoverflow.com/questions/51636034/spinner-onitemselectedlistener-causes-crash-on-rotation", "closed_reason": "Duplicate", "title": "spinner.onItemSelectedListener causes crash on rotation", "body": "<p>I have a <code>spinner</code> inside a <code>fragment</code>. Setting <code>onItemSelectedListener</code> in <code>onViewCreated</code> causes a crash after device rotation.</p>\n\n<p>This is my code:</p>\n\n<pre><code>override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n    super.onViewCreated(view, savedInstanceState)\n    myspinner.onItemSelectedListener = object : AdapterView.OnItemSelectedListener {\n        override fun onItemSelected(parent: AdapterView&lt;*&gt;, view: View, position: Int, id: Long) {\n            Log.d(\"debug\", \"onSelectItem\")\n        }\n        override fun onNothingSelected(parent: AdapterView&lt;*&gt;?) {}\n    }\n\n    val adapter = ArrayAdapter(activity, android.R.layout.simple_spinner_item, arrayOf(getString(R.string.mystring), getString(R.string.mystring1), getString(R.string.mystring2)))\n    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item)\n    myspinner.adapter = adapter\n    myspinner.setSelection(Values.selectedIndex)\n}\n</code></pre>\n\n<p>I receive the following <code>errors</code>:</p>\n\n<pre><code> FATAL EXCEPTION: main\n                  Process: myproject, PID: 12899\n                  java.lang.IllegalArgumentException: Parameter specified as non-null is null: method kotlin.jvm.internal.Intrinsics.checkParameterIsNotNull, parameter view\n                      at myproject.MyFragment$onViewCreated$1.onItemSelected(Unknown Source:45)\n                      at android.widget.AdapterView.fireOnSelected(AdapterView.java:944)\n                      at android.widget.AdapterView.dispatchOnItemSelected(AdapterView.java:933)\n                      at android.widget.AdapterView.selectionChanged(AdapterView.java:922)\n                      at android.widget.AdapterView.checkSelectionChanged(AdapterView.java:1105)\n                      at android.widget.AdapterView.handleDataChanged(AdapterView.java:1081)\n                      at android.widget.AbsSpinner.onMeasure(AbsSpinner.java:191)\n                      at android.widget.Spinner.onMeasure(Spinner.java:602)\n                      at android.support.v7.widget.AppCompatSpinner.onMeasure(AppCompatSpinner.java:420)\n                      at android.view.View.measure(View.java:23169)\n                      at android.support.constraint.ConstraintLayout.internalMeasureChildren(ConstraintLayout.java:1212)\n                      at android.support.constraint.ConstraintLayout.onMeasure(ConstraintLayout.java:1552)\n                      at android.view.View.measure(View.java:23169)\n                      at android.support.constraint.ConstraintLayout.internalMeasureChildren(ConstraintLayout.java:1212)\n                      at android.support.constraint.ConstraintLayout.onMeasure(ConstraintLayout.java:1552)\n                      at android.view.View.measure(View.java:23169)\n                      at android.support.v4.widget.NestedScrollView.measureChildWithMargins(NestedScrollView.java:1450)\n                      at android.widget.FrameLayout.onMeasure(FrameLayout.java:185)\n                      at android.support.v4.widget.NestedScrollView.onMeasure(NestedScrollView.java:516)\n                      at android.view.View.measure(View.java:23169)\n                      at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1632)\n                      at android.view.View.measure(View.java:23169)\n                      at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:6749)\n                      at android.widget.FrameLayout.onMeasure(FrameLayout.java:185)\n                      at android.view.View.measure(View.java:23169)\n                      at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:6749)\n                      at android.support.design.widget.CoordinatorLayout.onMeasureChild(CoordinatorLayout.java:739)\n                      at android.support.design.widget.HeaderScrollingViewBehavior.onMeasureChild(HeaderScrollingViewBehavior.java:91)\n                      at android.support.design.widget.AppBarLayout$ScrollingViewBehavior.onMeasureChild(AppBarLayout.java:1361)\n                      at android.support.design.widget.CoordinatorLayout.onMeasure(CoordinatorLayout.java:809)\n                      at android.view.View.measure(View.java:23169)\n                      at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:6749)\n                      at android.widget.FrameLayout.onMeasure(FrameLayout.java:185)\n                      at android.support.v7.widget.ContentFrameLayout.onMeasure(ContentFrameLayout.java:141)\n                      at android.view.View.measure(View.java:23169)\n                      at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:6749)\n                      at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1535)\n                      at android.widget.LinearLayout.measureVertical(LinearLayout.java:825)\n                      at android.widget.LinearLayout.onMeasure(LinearLayout.java:704)\n                      at android.view.View.measure(View.java:23169)\n                      at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:6749)\n                      at android.widget.FrameLayout.onMeasure(FrameLayout.java:185)\n                      at android.view.View.measure(View.java:23169)\n                      at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:6749)\n                      at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1535)\n                      at android.widget.LinearLayout.measureVertical(LinearLayout.java:825)\n                      at android.widget.LinearLayout.onMeasure(LinearLayout.java:704)\n                      at android.view.View.measure(View.java:23169)\n                      at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:6749)\n                      at android.widget.FrameLayout.onMeasure(FrameLayout.java:185)\n                      at com.android.internal.policy.DecorView.onMeasure(DecorView.java:716)\n                      at android.view.View.measure(View.java:23169)\n                      at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:2719)\nE/AndroidRuntime:     at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1572)\n                      at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1856)\n                      at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1460)\n                      at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:7184)\n                      at android.view.Choreographer$CallbackRecord.run(Choreographer.java:949)\n                      at android.view.Choreographer.doCallbacks(Choreographer.java:761)\n                      at android.view.Choreographer.doFrame(Choreographer.java:696)\n                      at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:935)\n                      at android.os.Handler.handleCallback(Handler.java:873)\n                      at android.os.Handler.dispatchMessage(Handler.java:99)\n                      at android.os.Looper.loop(Looper.java:193)\n                      at android.app.ActivityThread.main(ActivityThread.java:6669)\n                      at java.lang.reflect.Method.invoke(Native Method)\n                      at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\n                      at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:858)\n</code></pre>\n\n<p>If I comment out <code>onItemSelectedListener</code> then it doesn't crash.</p>\n"}, {"tags": ["android", "kotlin", "metadata", "media", "jcodec"], "answers": [{"tags": [], "owner": {"reputation": 192, "user_id": 5022468, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-E9IsdkQXr7w/AAAAAAAAAAI/AAAAAAAAAac/f6NfI2JQAT0/photo.jpg?sz=128", "display_name": "Egor tepikin", "link": "https://stackoverflow.com/users/5022468/egor-tepikin"}, "is_accepted": false, "score": 1, "last_activity_date": 1551152496, "creation_date": 1551152496, "answer_id": 54878140, "question_id": 51635033, "link": "https://stackoverflow.com/questions/51635033/how-to-set-cover-art-to-mp4-media-file-jcodec-android/54878140#54878140", "title": "How to set cover art to mp4 media file jcodec-android", "body": "<p>Use Itunes metaData and code 0x636F7672.</p>\n\n<p>For example:</p>\n\n<pre><code>ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();\ncoverBitmap.compress(Bitmap.CompressFormat.JPEG, 100,byteArrayOutputStream);\nMetaValue coverMetaValue = MetaValue.createOther(MetaValue.TYPE_JPEG, byteArrayOutputStream.toByteArray());\n\nMetadataEditor metadataEditor = MetadataEditor.createFrom(new File(url));\nmetadataEditor.getItunesMeta().put(0x636F7672 , coverMetaValue); \nmetadataEditor.save(false);\n</code></pre>\n"}], "owner": {"reputation": 1585, "user_id": 3702021, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1673bafe8b7a003e126bc5b8b2b460b9?s=128&d=identicon&r=PG&f=1", "display_name": "Kasim Rangwala", "link": "https://stackoverflow.com/users/3702021/kasim-rangwala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 254, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1609517990, "creation_date": 1533131369, "last_edit_date": 1609517990, "question_id": 51635033, "link": "https://stackoverflow.com/questions/51635033/how-to-set-cover-art-to-mp4-media-file-jcodec-android", "title": "How to set cover art to mp4 media file jcodec-android", "body": "<p>I'm using <a href=\"https://github.com/jcodec/jcodec\" rel=\"nofollow noreferrer\"><code>jcodec</code></a>.</p>\n<p>I'm trying to set cover art to an mp4 file, but it's not working. I've done the following:</p>\n<pre><code>fun AppCompatActivity.setAlbumCover(filePath: String) {\n    try {\n        val file = File(filePath)\n        val bitmap = ThumbnailUtils.createVideoThumbnail(file.absolutePath, MediaStore.Video.Thumbnails.MINI_KIND)\n        if (bitmap != null) {\n            val byteArrayOutputStream = ByteArrayOutputStream()\n            bitmap.compress(Bitmap.CompressFormat.JPEG, 100, byteArrayOutputStream)\n            val byteArray = byteArrayOutputStream.toByteArray()\n            val base64Str = Base64.encodeToString(byteArray, Base64.DEFAULT)\n            if (base64Str != null) {\n                val mediaMeta = MetadataEditor.createFrom(file)\n                if (mediaMeta != null) {\n                    val meta = mediaMeta.keyedMeta\n                    if (meta != null) {\n                        meta[&quot;coverart&quot;] = MetaValue.createString(base64Str)\n                    }\n                    mediaMeta.save(false)\n                }\n            }\n        }\n    } catch (e: Exception) {\n        e.printStackTrace()\n    }\n}\n</code></pre>\n<p>After that I upload this video to server and when I load the thumbnail from video URL using <a href=\"https://developer.android.com/reference/android/media/MediaMetadataRetriever.html#getEmbeddedPicture()\" rel=\"nofollow noreferrer\"><code>MediaMetadataRetriever::getEmbededPicture</code></a>. It should return <code>byte[]</code> not <code>null</code>.</p>\n<p>How to achieve this?</p>\n"}, {"tags": ["sqlite", "kotlin", "android-room"], "comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 3, "creation_date": 1533129999, "post_id": 51634491, "comment_id": 90233296, "body": "uh. I&#39;m pretty sure you should be using <a href=\"https://developer.android.com/reference/android/arch/persistence/room/RawQuery\" rel=\"nofollow noreferrer\">developer.android.com/reference/android/arch/persistence/roo&zwnj;&#8203;m/&hellip;</a>"}, {"owner": {"reputation": 755, "user_id": 3545278, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c5b5d926e698a6954fc4c23f4767596a?s=128&d=identicon&r=PG&f=1", "display_name": "leb1755", "link": "https://stackoverflow.com/users/3545278/leb1755"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 1, "creation_date": 1533132207, "post_id": 51634491, "comment_id": 90234954, "body": "It seems to be exactly what I need, thank you !"}], "owner": {"reputation": 755, "user_id": 3545278, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c5b5d926e698a6954fc4c23f4767596a?s=128&d=identicon&r=PG&f=1", "display_name": "leb1755", "link": "https://stackoverflow.com/users/3545278/leb1755"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1533129876, "creation_date": 1533129876, "question_id": 51634491, "link": "https://stackoverflow.com/questions/51634491/is-it-possible-to-use-roomdatabase-to-convert-a-cursor-into-an-object", "title": "Is it possible to use RoomDatabase to convert a cursor into an object?", "body": "<p>I have a dynamic query which I can't execute using the @Query so I will do it with something like</p>\n\n<pre><code>AppDatabase.getInstance().openHelper.readableDatabase.query(query).\n</code></pre>\n\n<p>Since RoomDatabase can return objects instead of a cursor, is it possible to use it somehow to convert an already existing cursor into a list of objects?\nOr do I need to make my own method to convert the cursor to an object ?</p>\n"}, {"tags": ["android", "kotlin", "android-fileprovider"], "comments": [{"owner": {"reputation": 16050, "user_id": 4168607, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/Z0uMk.jpg?s=128&g=1", "display_name": "ADM", "link": "https://stackoverflow.com/users/4168607/adm"}, "edited": false, "score": 2, "creation_date": 1533126707, "post_id": 51633308, "comment_id": 90230845, "body": "<code>MediaStore.INTENT_ACTION_STILL_IMAGE_CAMERA</code> will just open the camera it will not save image or create a file . You need to use <code>MediaStore.ACTION_IMAGE_CAPTURE</code> with <code>EXTRA_OUTPUT</code> extras ."}, {"owner": {"reputation": 437, "user_id": 8018741, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10156212045752222/picture?type=large", "display_name": "Claire", "link": "https://stackoverflow.com/users/8018741/claire"}, "reply_to_user": {"reputation": 16050, "user_id": 4168607, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/Z0uMk.jpg?s=128&g=1", "display_name": "ADM", "link": "https://stackoverflow.com/users/4168607/adm"}, "edited": false, "score": 0, "creation_date": 1533126771, "post_id": 51633308, "comment_id": 90230892, "body": "That is not needed. I have to add, that before the fileprovider it was working perfectly. It&#39;s only since then, that I&#39;m getting this error."}, {"owner": {"reputation": 16050, "user_id": 4168607, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/Z0uMk.jpg?s=128&g=1", "display_name": "ADM", "link": "https://stackoverflow.com/users/4168607/adm"}, "edited": false, "score": 0, "creation_date": 1533127025, "post_id": 51633308, "comment_id": 90231089, "body": "I don&#39;t get it . Where did you get the path to pass to <code>showPicture()</code> method then ? I am kind of  Dumb ."}, {"owner": {"reputation": 337, "user_id": 7677570, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/9vC4Z.jpg?s=128&g=1", "display_name": "Ahsan Malik", "link": "https://stackoverflow.com/users/7677570/ahsan-malik"}, "edited": false, "score": 0, "creation_date": 1533128451, "post_id": 51633308, "comment_id": 90232099, "body": "give package name of your project android:authorities=&quot;com.exa.project.fileprovider&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 437, "user_id": 8018741, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10156212045752222/picture?type=large", "display_name": "Claire", "link": "https://stackoverflow.com/users/8018741/claire"}, "edited": false, "score": 0, "creation_date": 1533129763, "post_id": 51633550, "comment_id": 90233094, "body": "Thank you for your time to answer CommonsWare. You are correct, I still need to learn a lot. Also, my English isn&#39;t that good,so I apologise for that.  I&#39;m going to follow Giovanni&#39;s advice, because you&#39;re right, I don&#39;t need a fileprovider for this.  The code that was given to me, confused me so much, that I made it worse. I&#39;ve been using the observer because I want to make multiple pictures in a row, and I have no idea how else to do this."}, {"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "reply_to_user": {"reputation": 437, "user_id": 8018741, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10156212045752222/picture?type=large", "display_name": "Claire", "link": "https://stackoverflow.com/users/8018741/claire"}, "edited": false, "score": 2, "creation_date": 1533130076, "post_id": 51633550, "comment_id": 90233339, "body": "@KlaartjeDeBacker: &quot;I want to make multiple pictures in a row, and I have no idea how else to do this&quot; -- you cannot really do that via <code>Intent</code> actions. Use the camera APIs directly, or via a third-party library (e.g., Fotoapparat, CameraKit-Android). You can take as many pictures as you want, and you control where the photos get saved."}], "tags": [], "owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "is_accepted": false, "score": 1, "last_activity_date": 1533127600, "last_edit_date": 1533127600, "creation_date": 1533127270, "answer_id": 51633550, "question_id": 51633308, "link": "https://stackoverflow.com/questions/51633308/java-io-filenotfoundexception-fileprovider/51633550#51633550", "title": "java.io.FileNotFoundException: fileprovider", "body": "<blockquote>\n  <p>I take images, using the following intent:</p>\n</blockquote>\n\n<p>That <code>Intent</code> action simply opens a camera app, one of hundreds of possible apps. Whether the user takes pictures with that camera app is up to the user.</p>\n\n<blockquote>\n  <p>To make this work, I also have an Observer</p>\n</blockquote>\n\n<p>There is no requirement for a camera app to have its images available via any <code>ContentProvider</code>, such as <code>MediaStore</code>.</p>\n\n<p>There is no requirement for <code>dataColumn</code> to return a filesystem path.</p>\n\n<p>There is no requirement for <code>dataColumn</code> to return a filesystem path that you have read access to.</p>\n\n<p>IOW, this code will not be reliable across the ~24,000 Android device models and ~2 billion Android users.</p>\n\n<blockquote>\n  <p>I'm using this, to get to the path and set the image to an Imageview</p>\n</blockquote>\n\n<p>Do not use <code>setImageUri()</code>. <a href=\"https://developer.android.com/reference/android/widget/ImageView.html#setImageURI(android.net.Uri)\" rel=\"nofollow noreferrer\">The documentation</a> specifically advises against it.</p>\n\n<p>Do not use <code>FileProvider</code> here. That is for sharing content with other apps, not for internal use within your own app. Moreover, because you have no idea where <code>dataColumn</code> will point, you cannot configure <code>FileProvider</code> to serve arbitrary files.</p>\n\n<p>Instead, pass your \"path\" to your favorite image-loading library (e.g., Glide, Picasso), which can attempt to load your photo on a background thread and then populate your <code>ImageView</code> with the result.</p>\n"}, {"comments": [{"owner": {"reputation": 437, "user_id": 8018741, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10156212045752222/picture?type=large", "display_name": "Claire", "link": "https://stackoverflow.com/users/8018741/claire"}, "edited": false, "score": 0, "creation_date": 1533129926, "post_id": 51633629, "comment_id": 90233232, "body": "Thank you for your help. I was already wondering if using a fileprovider was a good idea. A bitmapfactory is a good solution."}], "tags": [], "owner": {"reputation": 5955, "user_id": 5457878, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/b3uR6.jpg?s=128&g=1", "display_name": "Giovanni", "link": "https://stackoverflow.com/users/5457878/giovanni"}, "is_accepted": true, "score": 1, "last_activity_date": 1533127485, "creation_date": 1533127485, "answer_id": 51633629, "question_id": 51633308, "link": "https://stackoverflow.com/questions/51633308/java-io-filenotfoundexception-fileprovider/51633629#51633629", "title": "java.io.FileNotFoundException: fileprovider", "body": "<p>Well, first of all you need to understand where a <strong>FileProvider</strong>\n is for. It is for sharing local files to <em>other</em> apps in a safe way: <a href=\"https://developer.android.com/reference/android/support/v4/content/FileProvider\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/support/v4/content/FileProvider</a></p>\n\n<p>You are only using the image file only in your <em>own</em> application. Therefore there is no need to use the <code>FileProvider</code> at all. </p>\n\n<p>To show the image, use a <code>BitmapFactory</code>, note that <code>your_path</code> is the full path to the image, not changed by a <code>FileProvider</code>:</p>\n\n<pre><code>val bitmap = BitmapFactory.decodeFile(your_path);\nivDraw.setImageBitmap(bitmap);\n</code></pre>\n"}], "owner": {"reputation": 437, "user_id": 8018741, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10156212045752222/picture?type=large", "display_name": "Claire", "link": "https://stackoverflow.com/users/8018741/claire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1211, "favorite_count": 0, "accepted_answer_id": 51633629, "answer_count": 2, "score": 1, "last_activity_date": 1533127600, "creation_date": 1533126449, "question_id": 51633308, "link": "https://stackoverflow.com/questions/51633308/java-io-filenotfoundexception-fileprovider", "title": "java.io.FileNotFoundException: fileprovider", "body": "<p>I realize there have been a lot of posts with the fileProvider but I can't seem to find an answer to my problem in there.</p>\n\n<p>I take images, using the following intent: </p>\n\n<pre><code>private fun openCamera() {\n    currentFocus?.clearFocus()\n    val intent = Intent(MediaStore.INTENT_ACTION_STILL_IMAGE_CAMERA)\n    if (intent.resolveActivity(packageManager) != null) {\n        startActivity(intent)\n    }\n}\n</code></pre>\n\n<p>To make this work, I also have an Observer:</p>\n\n<pre><code> fun observe(): Flowable&lt;Picture&gt; =\n        pictureSubject.onBackpressureLatest()\n                .map { uri -&gt;\n                    appContext.get()?.let {\n                        val cursor = it.contentResolver.query(uri, null, null, null, \"date_added DESC, _id DESC\")\n                        if (cursor != null) {\n                            if (cursor.moveToNext()) {\n                                val dataColumn = cursor.getColumnIndexOrThrow(MediaStore.MediaColumns.DATA)\n                                val filePath = cursor.getString(dataColumn)\n                                val name = cursor.getColumnIndexOrThrow(MediaStore.MediaColumns.DISPLAY_NAME)\n                                return@map Picture()\n                                        .apply {\n                                            this.name = cursor.getString(name)\n                                            this.path = filePath\n                                        }\n                            }\n                            cursor.close()\n                        }\n                        return@map Picture()\n                    }\n                    return@map Picture()\n                }\n</code></pre>\n\n<p>These pictures are then added to an Object, called file. </p>\n\n<pre><code>fun listenForGeneralPictures(observe: Flowable&lt;Picture&gt;?) {\n        observe?.apply {\n            generalPictureDisposable = concatMap {\n                if (it.name?.isNotEmpty() == true\n                        &amp;&amp; it.path?.isNotEmpty() == true\n                        &amp;&amp; file != null) {\n                    it.categoryNr = Picture.CAT_GENERAL_PICTURES\n                    file?.generalPictures?.add(it)\n                    Log.d(it.name.toString(), \"pictureAfter\")\n                    return@concatMap fileRepository.update(file!!)\n                } else {\n                    return@concatMap Flowable.just(file)\n                }\n\n            }.subscribe({\n                cachedFile?.generalPictures = it!!.generalPictures\n            }, errorUtils::onError)\n        }\n\n    }\n</code></pre>\n\n<p>I'm using this, to get to the path and set the image to an Imageview:</p>\n\n<pre><code>  override fun showPicture(path: String?) {\n    val pictureFile = File(path)\n    ivDraw?.setImageUri(FileProvider.getUriForFile(this, this.applicationContext.packageName + \".provider\", pictureFile))\n}\n</code></pre>\n\n<p>But when I do I get an error:</p>\n\n<blockquote>\n  <p>System.err: java.io.FileNotFoundException:\n  /external_path/DCIM/Camera/20180801_115654(1).jpg (No such file or\n  directory)\n              at java.io.FileInputStream.open(Native Method)\n              at java.io.FileInputStream.(FileInputStream.java:146)\n              at java.io.FileInputStream.(FileInputStream.java:99)\n              at android.content.ContentResolver.openInputStream(ContentResolver.java:708)\n              at com.insypro.inspector3.ui.custom.picturedraw.DrawImageView.rotateImageToTakenDirection(DrawImageView.kt:108)\n              at com.insypro.inspector3.ui.custom.picturedraw.DrawImageView.setImageUri(DrawImageView.kt:54)\n              at com.insypro.inspector3.ui.picture.PictureViewActivity.showPicture(PictureViewActivity.kt:124)\n              at com.insypro.inspector3.ui.picture.PicturePresenter.processPicture(PicturePresenter.kt:69)\n              at com.insypro.inspector3.ui.picture.PicturePresenter.access$processPicture(PicturePresenter.kt:24)\n              at com.insypro.inspector3.ui.picture.PicturePresenter$loadDataPicture$1.accept(PicturePresenter.kt:51)</p>\n</blockquote>\n\n<p>I also have a fileprovider file and everything needed in the manifest:</p>\n\n<pre><code>   &lt;provider\n        android:name=\"android.support.v4.content.FileProvider\"\n        android:authorities=\"${applicationId}.provider\"\n        android:exported=\"false\"\n        android:grantUriPermissions=\"true\"&gt;\n        &lt;meta-data\n            android:name=\"android.support.FILE_PROVIDER_PATHS\"\n            android:resource=\"@xml/provider_paths\"\n            tools:replace=\"android:resource\"/&gt;\n    &lt;/provider&gt;\n</code></pre>\n\n<p>and the paths:</p>\n\n<pre><code>&lt;paths&gt;\n&lt;files-path name=\"files\" path=\".\" /&gt;\n&lt;cache-path name=\"cache\" path=\"/\"/&gt;\n&lt;external-path name=\"external_path\" path=\".\" /&gt;\n&lt;external-files-path name=\"external_files\" path=\".\" /&gt;\n</code></pre>\n\n<p></p>\n"}, {"tags": ["java", "kotlin"], "comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1533123747, "post_id": 51632063, "comment_id": 90228897, "body": "<code>Parent&lt;Something&gt;.Inner</code> seems to work."}, {"owner": {"reputation": 241, "user_id": 1892364, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/509a9b5c52bf83f7696322af0be2f7e9?s=128&d=identicon&r=PG", "display_name": "user1892364", "link": "https://stackoverflow.com/users/1892364/user1892364"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1533124855, "post_id": 51632063, "comment_id": 90229586, "body": "That is right, but if I wanted to use the parent there I would do so."}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1533124949, "post_id": 51632063, "comment_id": 90229645, "body": "Consider filing an issue on the Kotlin YouTrack with this."}, {"owner": {"reputation": 3602, "user_id": 3569545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb00bcc2abeb14cf5bfacfa1013a92ad?s=128&d=identicon&r=PG&f=1", "display_name": "Demigod", "link": "https://stackoverflow.com/users/3569545/demigod"}, "edited": false, "score": 0, "creation_date": 1533127442, "post_id": 51632063, "comment_id": 90231382, "body": "Can you try something like <code>fun handle(test: Inner) { ... }</code> ? <code>Inner</code> without <code>Child&lt;&gt;</code>."}, {"owner": {"reputation": 241, "user_id": 1892364, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/509a9b5c52bf83f7696322af0be2f7e9?s=128&d=identicon&r=PG", "display_name": "user1892364", "link": "https://stackoverflow.com/users/1892364/user1892364"}, "reply_to_user": {"reputation": 3602, "user_id": 3569545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb00bcc2abeb14cf5bfacfa1013a92ad?s=128&d=identicon&r=PG&f=1", "display_name": "Demigod", "link": "https://stackoverflow.com/users/3569545/demigod"}, "edited": false, "score": 0, "creation_date": 1533128561, "post_id": 51632063, "comment_id": 90232180, "body": "@Demigod The whole point for me is to use this with <a href=\"http://greenrobot.org/eventbus/\" rel=\"nofollow noreferrer\">greenrobot.org/eventbus</a> where the subscribers check on the class that is pushed on the bus, so I do not get subscribed on events I do not want. So if I have Child1&lt;Something&gt; and Child2&lt;Something&gt; I would get both if I am not able to lock it to the one I want. So maybe it would be possible with another typecheck, but having this in every subscriber would be a lot of overhead."}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1533128965, "post_id": 51632063, "comment_id": 90232496, "body": "if it&#39;s for event bus i&#39;m surprised a regular inner class works instead of <code>static class</code> in java"}, {"owner": {"reputation": 3602, "user_id": 3569545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb00bcc2abeb14cf5bfacfa1013a92ad?s=128&d=identicon&r=PG&f=1", "display_name": "Demigod", "link": "https://stackoverflow.com/users/3569545/demigod"}, "edited": false, "score": 0, "creation_date": 1533131729, "post_id": 51632063, "comment_id": 90234567, "body": "@user1892364, so what do you want is to allow to pas <code>Child1&lt;Something&gt;</code> but forbid to pass <code>Child2&lt;Something&gt;</code>? Despite that in Java you can write something like this <code>public void handle(Child&lt;Something&gt;.Inner test) { ... }</code> you also can pass to this methid <code>Child2&lt;Something&gt;.Inner</code>.. So it kinda don&#39;t locks with the inherited class type."}, {"owner": {"reputation": 241, "user_id": 1892364, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/509a9b5c52bf83f7696322af0be2f7e9?s=128&d=identicon&r=PG", "display_name": "user1892364", "link": "https://stackoverflow.com/users/1892364/user1892364"}, "reply_to_user": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 1, "creation_date": 1533239321, "post_id": 51632063, "comment_id": 90285712, "body": "@MarkoTopolnik issue was filed here: <a href=\"https://youtrack.jetbrains.com/issue/KT-25836\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-25836</a>"}, {"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1570694822, "post_id": 51632063, "comment_id": 102996073, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/55917371/accessing-static-inner-class-defined-in-java-through-derived-class\">Accessing static inner class defined in Java, through derived class</a>"}], "owner": {"reputation": 241, "user_id": 1892364, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/509a9b5c52bf83f7696322af0be2f7e9?s=128&d=identicon&r=PG", "display_name": "user1892364", "link": "https://stackoverflow.com/users/1892364/user1892364"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1533123564, "creation_date": 1533122641, "last_edit_date": 1533123564, "question_id": 51632063, "link": "https://stackoverflow.com/questions/51632063/use-nested-java-class-from-kotlin-and-inheritance", "title": "Use nested Java Class from Kotlin and Inheritance", "body": "<p>I have the following classes in Java:</p>\n\n<pre><code>public class Parent&lt;T&gt;{\n    public class Inner {\n        private T item;\n        //...\n    }\n    //...\n} \n\npublic class Child&lt;T&gt; extends Parent&lt;T&gt; {\n    //...\n}\n</code></pre>\n\n<p>I now want to use this in the following way in Kotlin:</p>\n\n<pre><code>fun handle(test: Child&lt;Something&gt;.Inner) {\n    // Error: Unresolved Reverence: Inner\n}\n</code></pre>\n\n<p>If I do the same thing in Java, it works:</p>\n\n<pre><code>public void handle(Child&lt;Something&gt;.Inner test) {\n    //..\n}\n</code></pre>\n\n<p>How can I do this in Kotlin?</p>\n"}, {"tags": ["android", "android-asynctask", "kotlin", "android-progressbar"], "comments": [{"owner": {"reputation": 5077, "user_id": 5476209, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/SKMHP.jpg?s=128&g=1", "display_name": "TapanHP", "link": "https://stackoverflow.com/users/5476209/tapanhp"}, "edited": false, "score": 0, "creation_date": 1533180162, "post_id": 51631998, "comment_id": 90254005, "body": "Please try to improve community and accept the answer from @Demigod if it solved your issue. Happy Coding!!"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 8404208, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1dk5QXZ0Mx8/AAAAAAAAAAI/AAAAAAAAAP4/IBsc1KInquQ/photo.jpg?sz=128", "display_name": "Karl Einstein", "link": "https://stackoverflow.com/users/8404208/karl-einstein"}, "edited": false, "score": 0, "creation_date": 1533129113, "post_id": 51634021, "comment_id": 90232616, "body": "Thanks for your help. Im newbie in kotlin"}], "tags": [], "owner": {"reputation": 3602, "user_id": 3569545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb00bcc2abeb14cf5bfacfa1013a92ad?s=128&d=identicon&r=PG&f=1", "display_name": "Demigod", "link": "https://stackoverflow.com/users/3569545/demigod"}, "is_accepted": false, "score": 2, "last_activity_date": 1533128931, "last_edit_date": 1533128931, "creation_date": 1533128597, "answer_id": 51634021, "question_id": 51631998, "link": "https://stackoverflow.com/questions/51631998/android-asynctask-is-not-updating-progress-bar/51634021#51634021", "title": "Android AsyncTask is not updating Progress Bar", "body": "<p>Well, what to say - you never cancel previous async tasks. Cause you're calling <code>cancel(true)</code> on just created async tasks every time:</p>\n\n<pre><code>val task = Task(context!!, activity!!.pgbSong)\nif (task.status == AsyncTask.Status.RUNNING) {\n    task.cancel(true)\n}\ntask.execute(song.duration)\n</code></pre>\n\n<p>Instead, you should save previous async task in an object variable (something like this):</p>\n\n<pre><code>private var asyncTask : AsyncTask&lt;*,*,*&gt;? = null\n</code></pre>\n\n<p>And after in the method call:</p>\n\n<pre><code>override fun onItemClicked(position: Int, song: Song) {\n    if (asyncTask.status == AsyncTask.Status.RUNNING) {\n        asyncTask.cancel(true)\n    }\n\n    val secondsDuration = song.duration!! / 1000\n    activity!!.pgbSong.max = secondsDuration\n    asyncTask = Task(context!!, activity!!.pgbSong)\n    asyncTask.execute(song.duration)\n}\n</code></pre>\n\n<p>And, I guess, you should do a <code>return</code> in an <code>AsyncTask</code> when you're checking if it canceled or not.</p>\n\n<p>But please don't use <code>AsyncTask</code> in this manner. Cause it holds links views and activity which can prevent those of being garbage collected and so cause a memory leak.</p>\n\n<p>And please don't use <code>!!</code> with Kotlin. Instead use <code>null</code> check or provide default value if <code>null</code>. Examples:</p>\n\n<pre><code>val int = object?.int ?: 0\nval context = activity ?: return\nval view = activity?.pgbSong ?: return // or if (view != null)\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 8404208, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1dk5QXZ0Mx8/AAAAAAAAAAI/AAAAAAAAAP4/IBsc1KInquQ/photo.jpg?sz=128", "display_name": "Karl Einstein", "link": "https://stackoverflow.com/users/8404208/karl-einstein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 479, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1533128931, "creation_date": 1533122444, "last_edit_date": 1533124178, "question_id": 51631998, "link": "https://stackoverflow.com/questions/51631998/android-asynctask-is-not-updating-progress-bar", "title": "Android AsyncTask is not updating Progress Bar", "body": "<p>Hello I have a problem with asynctask.I play a song then I update duration to progressbar. But when I play a new song progressbar don't back to 0th position and progressbar is continuing with old value\nHere is my code:</p>\n\n<pre><code>class Task(context: Context, progressBar: ProgressBar) : AsyncTask&lt;Int, Int, String&gt;() {\n@SuppressLint(\"StaticFieldLeak\")\nprivate var progressBar: ProgressBar? = progressBar\nprivate var count = 0\noverride fun doInBackground(vararg input: Int?): String {\n    while (count &lt;= input[0]!!) {\n        count++\n        publishProgress(count)\n        Thread.sleep(1000)\n        if (isCancelled){\n            count=0\n        }\n    }\n    return \"Task completed\"\n}\n\noverride fun onPreExecute() {\n    progressBar!!.progress = 0\n}\n\noverride fun onProgressUpdate(vararg values: Int?) {\n    progressBar!!.progress = values[0]!!\n}\n}\n</code></pre>\n\n<p>when I play song :</p>\n\n<pre><code>    override fun onItemClicked(position: Int, song: Song) {\n    val secondsDuration = song.duration!! / 1000\n    activity!!.pgbSong.max = secondsDuration\n    val task = Task(context!!, activity!!.pgbSong)\n    if (task.status == AsyncTask.Status.RUNNING) {\n        task.cancel(true)\n    }\n    task.execute(song.duration)\n}\n</code></pre>\n"}, {"tags": ["android", "android-fragments", "kotlin"], "comments": [{"owner": {"reputation": 769, "user_id": 9624615, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QNV0iaPXqrY/AAAAAAAAAAI/AAAAAAAAAJA/b-NQeneG_y4/photo.jpg?sz=128", "display_name": "Muhammad Hassaan", "link": "https://stackoverflow.com/users/9624615/muhammad-hassaan"}, "edited": false, "score": 0, "creation_date": 1533122159, "post_id": 51631847, "comment_id": 90227893, "body": "this is not best method to send object from one activity to another  ."}, {"owner": {"reputation": 769, "user_id": 9624615, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QNV0iaPXqrY/AAAAAAAAAAI/AAAAAAAAAJA/b-NQeneG_y4/photo.jpg?sz=128", "display_name": "Muhammad Hassaan", "link": "https://stackoverflow.com/users/9624615/muhammad-hassaan"}, "edited": false, "score": 0, "creation_date": 1533122215, "post_id": 51631847, "comment_id": 90227928, "body": "use public method iniside fragment to update fragment data and use call backback listeners to send data from fragment back to activity and then to next fragment"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1533123846, "post_id": 51631847, "comment_id": 90228958, "body": "It probably doesn&#39;t work because you didn&#39;t implement <code>writeToParcel</code>."}], "answers": [{"comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1533123881, "post_id": 51632451, "comment_id": 90228983, "body": "Make sure to enable experimental flag on kotlin-android-extensions. Good news though, it doesn&#39;t <i>feel</i> experimental, it works just fine"}, {"owner": {"reputation": 19, "user_id": 4349376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bb9e45a2f5ff45f96051f660af5e209?s=128&d=identicon&r=PG&f=1", "display_name": "Mujtaba", "link": "https://stackoverflow.com/users/4349376/mujtaba"}, "edited": false, "score": 0, "creation_date": 1533126080, "post_id": 51632451, "comment_id": 90230403, "body": "I&#39;m quite new to Android, could you please elaburate more on how exactly I should do this? like where shall I put this code? how to send data how to recieve? how will my class look like?"}, {"owner": {"reputation": 403, "user_id": 7326075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41a441ab0e780d1d2820cf5afc3e1ee1?s=128&d=identicon&r=PG&f=1", "display_name": "Ikazuchi", "link": "https://stackoverflow.com/users/7326075/ikazuchi"}, "edited": false, "score": 0, "creation_date": 1533129010, "post_id": 51632451, "comment_id": 90232528, "body": "I am not sure what do you want to achieve. Are you going to open new activity on click of your list item? And do you want to update it after some changes in this activity (when user went back to list of items activity)?"}], "tags": [], "owner": {"reputation": 403, "user_id": 7326075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41a441ab0e780d1d2820cf5afc3e1ee1?s=128&d=identicon&r=PG&f=1", "display_name": "Ikazuchi", "link": "https://stackoverflow.com/users/7326075/ikazuchi"}, "is_accepted": false, "score": 1, "last_activity_date": 1533124130, "last_edit_date": 1533124130, "creation_date": 1533123848, "answer_id": 51632451, "question_id": 51631847, "link": "https://stackoverflow.com/questions/51631847/send-custom-class-object-via-bundle-between-fragments-with-parcebale/51632451#51632451", "title": "Send custom class object via Bundle between fragments with Parcebale", "body": "<p>if you wanna keep using parcelize, just try this sample:</p>\n\n<pre><code>@Parcelize\ndata class TaskWithUserAndProfile(var profile:Profile, var task :Task, var user:User) : Parcelable{}\n</code></pre>\n\n<p>I could miss something from your class but the idea should looks like this, so use annotation @Parcelize and Parcelable implementation (do not need to override any method).</p>\n\n<p><code>Update</code>\nThanks for reminder. You will have to add this to your gradle file:</p>\n\n<pre><code>androidExtensions {\n    experimental = true\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 4349376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bb9e45a2f5ff45f96051f660af5e209?s=128&d=identicon&r=PG&f=1", "display_name": "Mujtaba", "link": "https://stackoverflow.com/users/4349376/mujtaba"}, "edited": false, "score": 0, "creation_date": 1533126151, "post_id": 51632517, "comment_id": 90230448, "body": "could you please explain a bit more? with some sample code based on my code"}, {"owner": {"reputation": 695, "user_id": 6184896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4d1db436afade782fc64261cb7a9309?s=128&d=identicon&r=PG&f=1", "display_name": "UgAr0FF", "link": "https://stackoverflow.com/users/6184896/ugar0ff"}, "reply_to_user": {"reputation": 19, "user_id": 4349376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bb9e45a2f5ff45f96051f660af5e209?s=128&d=identicon&r=PG&f=1", "display_name": "Mujtaba", "link": "https://stackoverflow.com/users/4349376/mujtaba"}, "edited": false, "score": 0, "creation_date": 1533126847, "post_id": 51632517, "comment_id": 90230947, "body": "Open <code>settings&#47;plugins&#47;browse repositories...</code> then find <i>Parcelable Code Generator(for kotlin)</i>. Install plugin and restart android studio. Then open your model and click <code>Code&#47;Generate&#47;Parcelable(kotlin)</code>"}], "tags": [], "owner": {"reputation": 695, "user_id": 6184896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4d1db436afade782fc64261cb7a9309?s=128&d=identicon&r=PG&f=1", "display_name": "UgAr0FF", "link": "https://stackoverflow.com/users/6184896/ugar0ff"}, "is_accepted": false, "score": 0, "last_activity_date": 1533124077, "creation_date": 1533124077, "answer_id": 51632517, "question_id": 51631847, "link": "https://stackoverflow.com/questions/51631847/send-custom-class-object-via-bundle-between-fragments-with-parcebale/51632517#51632517", "title": "Send custom class object via Bundle between fragments with Parcebale", "body": "<p>Use this plugin:</p>\n\n<p><a href=\"https://plugins.jetbrains.com/plugin/8086-parcelable-code-generator-for-kotlin-\" rel=\"nofollow noreferrer\">android-parcelable-intellij-plugin-kotlin</a></p>\n\n<p>for <code>TaskWithUserAndProfile, Profile, Task, User</code> models.</p>\n"}, {"tags": [], "owner": {"reputation": 502, "user_id": 7652532, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1298163596907042/picture?type=large", "display_name": "Abed Naseri", "link": "https://stackoverflow.com/users/7652532/abed-naseri"}, "is_accepted": true, "score": 1, "last_activity_date": 1534061028, "creation_date": 1534061028, "answer_id": 51806934, "question_id": 51631847, "link": "https://stackoverflow.com/questions/51631847/send-custom-class-object-via-bundle-between-fragments-with-parcebale/51806934#51806934", "title": "Send custom class object via Bundle between fragments with Parcebale", "body": "<p>You don't need to use <code>Parcelable</code> even, just simply define an <code>TaskWithUserAndProfile</code> variable in your <code>TaskDetailsFragment</code> and set in in <code>HomeFragment</code>.</p>\n\n<blockquote>\n  <p>TaskDetailsFragment.kt</p>\n</blockquote>\n\n<pre><code>class TaskDetailsFragment : Fragment() {\n\n    var selectedTask: TaskWithUserAndProfile? = null\n\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?,\n                          savedInstanceState: Bundle?): View? {\n    }\n}\n</code></pre>\n\n<blockquote>\n  <p>HomeFragment.kt</p>\n</blockquote>\n\n<pre><code>//Inside onCreateView\nadapter = TasksAdapter(tasksArray) { item -&gt;\n    val taskDetailsFragment = TaskDetailsFragment()\n    taskDetailsFragment.selectedTask = item\n    val fragmentTransaction = \n    fragmentManager?.beginTransaction()\n\n    fragmentTransaction?.replace(R.id.container, taskDetailsFragment)\n\n    fragmentTransaction?.addToBackStack(null)\n        fragmentTransaction?.commit()\n}\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 4349376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bb9e45a2f5ff45f96051f660af5e209?s=128&d=identicon&r=PG&f=1", "display_name": "Mujtaba", "link": "https://stackoverflow.com/users/4349376/mujtaba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 51806934, "answer_count": 3, "score": 0, "last_activity_date": 1534061028, "creation_date": 1533121969, "last_edit_date": 1533126818, "question_id": 51631847, "link": "https://stackoverflow.com/questions/51631847/send-custom-class-object-via-bundle-between-fragments-with-parcebale", "title": "Send custom class object via Bundle between fragments with Parcebale", "body": "<p>I am using fragments inside my main activity and I want to send an object of my custom class \"<code>TaskWithUserAndProfile</code>\" to the <code>TaskDetailsFragment</code></p>\n\n<p>I found out that you can do it with <code>Bundle</code> and made it send a string, but things got complicated when I tried to send with <code>Parcebale</code>.\n here are some parts of my code for better understanding:</p>\n\n<blockquote>\n  <p>TaskWithUserAndProfile.kt</p>\n</blockquote>\n\n<pre><code>class TaskWithUserAndProfile() : Parcelable{\n    override fun writeToParcel(p0: Parcel?, p1: Int) {\n        TODO(\"not implemented\") //To change body of created functions use File | Settings | File Templates.\n    }\n\n    var profile = Profile()\n    var task = Task()\n    var user = User()\n\n    constructor(parcel: Parcel) : this() {\n        //profile = parcel.read\n    }\n\n    override fun describeContents(): Int {\n        return 0\n    }\n\n    companion object CREATOR : Parcelable.Creator&lt;TaskWithUserAndProfile&gt; {\n        override fun createFromParcel(parcel: Parcel): TaskWithUserAndProfile {\n            return TaskWithUserAndProfile(parcel)\n        }\n\n        override fun newArray(size: Int): Array&lt;TaskWithUserAndProfile?&gt; {\n            return arrayOfNulls(size)\n        }\n    }\n}\n</code></pre>\n\n<blockquote>\n  <p>HomeFragment.kt</p>\n</blockquote>\n\n<pre><code>//Inside onCreateView\nadapter = TasksAdapter(tasksArray) { item -&gt;\n            println(item.profile)\n            val bundle  = Bundle()\n            bundle.putParcelable(\"MyItem\", item)\n            val taskDetailsFragment = TaskDetailsFragment()\n            taskDetailsFragment.arguments = bundle\n            val fragmentTransaction = fragmentManager.beginTransaction()\n            fragmentTransaction.replace(R.id.container, taskDetailsFragment)\n            fragmentTransaction.addToBackStack(null)\n            fragmentTransaction.commit()\n        }\n</code></pre>\n\n<p>How should my class that implements the Parcebale look like and how can I then send and receive the item object in fragments?</p>\n"}, {"tags": ["sql", "kotlin", "jooq"], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 2631567, "user_type": "registered", "profile_image": "https://graph.facebook.com/1300412113/picture?type=large", "display_name": "Nagaraju Nooka", "link": "https://stackoverflow.com/users/2631567/nagaraju-nooka"}, "edited": false, "score": 0, "creation_date": 1533207259, "post_id": 51648938, "comment_id": 90266851, "body": "Right now i am using this way. But the  major problem for me is column names and it&#39;s values will be determined @ run time.  So static reference won&#39;t help me here. ex: hash map contains column names and it&#39;s values."}, {"owner": {"reputation": 179634, "user_id": 521799, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb96efa7a5664ba1c4ebf586abd4121f?s=128&d=identicon&r=PG", "display_name": "Lukas Eder", "link": "https://stackoverflow.com/users/521799/lukas-eder"}, "reply_to_user": {"reputation": 119, "user_id": 2631567, "user_type": "registered", "profile_image": "https://graph.facebook.com/1300412113/picture?type=large", "display_name": "Nagaraju Nooka", "link": "https://stackoverflow.com/users/2631567/nagaraju-nooka"}, "edited": false, "score": 0, "creation_date": 1533208612, "post_id": 51648938, "comment_id": 90267746, "body": "@NagarajuNooka: But that was not your question :-) Please can you ask a new question that expresses the runtime problem you&#39;re trying to solve <i>explicitly</i>?"}, {"owner": {"reputation": 119, "user_id": 2631567, "user_type": "registered", "profile_image": "https://graph.facebook.com/1300412113/picture?type=large", "display_name": "Nagaraju Nooka", "link": "https://stackoverflow.com/users/2631567/nagaraju-nooka"}, "edited": false, "score": 0, "creation_date": 1533209013, "post_id": 51648938, "comment_id": 90268007, "body": "oh ok, i wll do that."}], "tags": [], "owner": {"reputation": 179634, "user_id": 521799, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb96efa7a5664ba1c4ebf586abd4121f?s=128&d=identicon&r=PG", "display_name": "Lukas Eder", "link": "https://stackoverflow.com/users/521799/lukas-eder"}, "is_accepted": false, "score": 0, "last_activity_date": 1533198342, "creation_date": 1533198342, "answer_id": 51648938, "question_id": 51630449, "link": "https://stackoverflow.com/questions/51630449/how-to-update-table-when-you-have-list-of-field-names-with-jooq/51648938#51648938", "title": "How to update Table When you have List of field Names With JOOQ", "body": "<p>Yes, just reference <code>JOB.ID</code> again:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>DSL.using(DefaultConfiguration())\n   .update(JOB)\n   .set(JOB.ID, 123)\n   .where(JOB.ID.ge(0))\n   .sql\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 2631567, "user_type": "registered", "profile_image": "https://graph.facebook.com/1300412113/picture?type=large", "display_name": "Nagaraju Nooka", "link": "https://stackoverflow.com/users/2631567/nagaraju-nooka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 156, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533198342, "creation_date": 1533117598, "last_edit_date": 1533198236, "question_id": 51630449, "link": "https://stackoverflow.com/questions/51630449/how-to-update-table-when-you-have-list-of-field-names-with-jooq", "title": "How to update Table When you have List of field Names With JOOQ", "body": "<p>I have list of field names, I would like to generate update query.</p>\n\n<p>I tried following way it's working, but I have to cast it to TableField every time. Is there any better way?</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>DSL.using(DefaultConfiguration()).update(JOB)\n.set( JOB.field(\"id\") as TableField&lt;Record, Any&gt;, 123)\n.where(JOB.ID.ge(0)).sql\n</code></pre>\n\n<p><strong>Note:</strong> I am using JOOQ 3.8 version</p>\n"}, {"tags": ["android", "kotlin", "navigation-drawer", "android-navigation"], "owner": {"reputation": 7138, "user_id": 4415642, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/253d1dc6571ed728099ff96b693f5b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Micha\u0142 Ziobro", "link": "https://stackoverflow.com/users/4415642/micha%c5%82-ziobro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 386, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1533117088, "creation_date": 1533112426, "last_edit_date": 1533117088, "question_id": 51628765, "link": "https://stackoverflow.com/questions/51628765/navigation-architecture-component-activity-destination-and-onnavigatedlistener", "title": "Navigation Architecture Component - Activity Destination and OnNavigatedListener", "body": "<p>I have such code setup for navigation architecture component: </p>\n\n<pre><code> val navController = findNavController(R.id.main_nav_host_fragment)\n        nav_view.setupWithNavController(navController)\n        bottom_navigation.setupWithNavController(navController)\n        //nav_view.setNavigationItemSelectedListener(this)\n\n        navController.addOnNavigatedListener { controller, destination -&gt;\n            if(destination.id == R.id.loginActivity) {\n                Toast.makeText(context, \"Log Out navigation destination\", Toast.LENGTH_LONG).show()\n            }\n        }\n</code></pre>\n\n<p>And I have found here two issues: </p>\n\n<ol>\n<li><p>Selecting in Navigation Drawer Menu Item that doesn't appear on Bottom Navigation View causes to select first Menu Item in Bottom Navigation View. Which seems to be incorrect (No Item should be selected there) </p></li>\n<li><p>OnNavigatedListener is not called when selecting Menu Item in Navigation Drawer that has menu item id set to Activity Destination (precisely action to Activity Destination) - so instead of intercepting this action and log out user, I need to pass stupid default arguments to Activity Destination in Nav Graph to log out user in Login Activity Destination. Do you know why OnNavigatedListener is not called for Activity Destinations, and is only called for Fragment Destinations? Why there is not event listener OnBeginNavigationListener to conditionally prevent navigation or add some side effects? </p></li>\n</ol>\n"}, {"tags": ["kotlin", "spring-boot-test", "spring-boot-configuration"], "answers": [{"comments": [{"owner": {"reputation": 1321, "user_id": 663012, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7417c278374e4cdf4609cb75885adf46?s=128&d=identicon&r=PG", "display_name": "Czar", "link": "https://stackoverflow.com/users/663012/czar"}, "edited": false, "score": 4, "creation_date": 1563882285, "post_id": 51630984, "comment_id": 100840555, "body": "<code>lateinit</code> does not work for primitive types. I don&#39;t understand how is this marked as a solution."}, {"owner": {"reputation": 5491, "user_id": 1439771, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/egtxg.png?s=128&g=1", "display_name": "SimY4", "link": "https://stackoverflow.com/users/1439771/simy4"}, "reply_to_user": {"reputation": 1321, "user_id": 663012, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7417c278374e4cdf4609cb75885adf46?s=128&d=identicon&r=PG", "display_name": "Czar", "link": "https://stackoverflow.com/users/663012/czar"}, "edited": false, "score": 0, "creation_date": 1594173190, "post_id": 51630984, "comment_id": 111031212, "body": "Use <code>java.lang.Integer</code> instead of Int"}], "tags": [], "owner": {"reputation": 5491, "user_id": 1439771, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/egtxg.png?s=128&g=1", "display_name": "SimY4", "link": "https://stackoverflow.com/users/1439771/simy4"}, "is_accepted": true, "score": 1, "last_activity_date": 1594173162, "last_edit_date": 1594173162, "creation_date": 1533119119, "answer_id": 51630984, "question_id": 51628740, "link": "https://stackoverflow.com/questions/51628740/how-to-forward-the-local-port-of-a-springboottest-to-a-test-configuration/51630984#51630984", "title": "How to forward the local port of a SpringBootTest to a test configuration", "body": "<p>Here's what we did in this case:</p>\n<pre><code>@Configuration\nclass Config {\n    private lateinit var port: java.lang.Integer // declare a var to store the port\n    \n    @EventListener // subscribe to servlet container initialized event\n    fun onServletContainerInitialized(event: EmbeddedServletContainerInitializedEvent) {\n        port = event.embeddedServletContainer.port // when event is fired, extract the port for that event\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53, "user_id": 10164301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyi6B.png?s=128&g=1", "display_name": "Stefan S.", "link": "https://stackoverflow.com/users/10164301/stefan-s"}, "is_accepted": false, "score": 2, "last_activity_date": 1533133292, "creation_date": 1533133292, "answer_id": 51635732, "question_id": 51628740, "link": "https://stackoverflow.com/questions/51628740/how-to-forward-the-local-port-of-a-springboottest-to-a-test-configuration/51635732#51635732", "title": "How to forward the local port of a SpringBootTest to a test configuration", "body": "<p>Solution for spring version greater than 2.0.0, which is working perfectly for me, is:</p>\n\n<pre><code>@Configuration\nopen class TestTemplateConfig {\n    private var localPort: Int? = null\n\n    @EventListener(WebServerInitializedEvent::class)\n    fun onServletContainerInitialized(event: WebServerInitializedEvent) {\n        localPort = event.webServer.port\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1321, "user_id": 663012, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7417c278374e4cdf4609cb75885adf46?s=128&d=identicon&r=PG", "display_name": "Czar", "link": "https://stackoverflow.com/users/663012/czar"}, "is_accepted": false, "score": 2, "last_activity_date": 1563891893, "creation_date": 1563891893, "answer_id": 57166342, "question_id": 51628740, "link": "https://stackoverflow.com/questions/51628740/how-to-forward-the-local-port-of-a-springboottest-to-a-test-configuration/57166342#57166342", "title": "How to forward the local port of a SpringBootTest to a test configuration", "body": "<p>With Spring Boot 2.1.6 this works for me:</p>\n\n<pre><code>import com.example.MyApplication\nimport org.junit.jupiter.api.Assertions.assertTrue\nimport org.junit.jupiter.api.Test\nimport org.springframework.beans.factory.annotation.Autowired\nimport org.springframework.boot.test.context.SpringBootTest\nimport org.springframework.boot.test.context.SpringBootTest.WebEnvironment\nimport org.springframework.boot.web.server.LocalServerPort\nimport org.springframework.context.support.GenericApplicationContext\nimport org.springframework.test.context.junit.jupiter.SpringJUnitConfig\n\n@SpringJUnitConfig\n@SpringBootTest(webEnvironment = WebEnvironment.RANDOM_PORT, classes = [MyApplication::class])\nclass ApplicationStartsTest {\n    @LocalServerPort\n    protected var port: Int = 0\n\n    @Autowired\n    lateinit var context: GenericApplicationContext\n\n    @Test\n    fun `application context is initialized`() {\n        assertTrue(::context.isInitialized, \"Application context should have been injected\")\n    }\n\n    @Test\n    fun `web application port is assigned`() {\n        assertTrue(port != 0, \"web application port should have been injected\")\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 10164301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyi6B.png?s=128&g=1", "display_name": "Stefan S.", "link": "https://stackoverflow.com/users/10164301/stefan-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1684, "favorite_count": 0, "accepted_answer_id": 51630984, "answer_count": 3, "score": 3, "last_activity_date": 1594173162, "creation_date": 1533112331, "last_edit_date": 1533114214, "question_id": 51628740, "link": "https://stackoverflow.com/questions/51628740/how-to-forward-the-local-port-of-a-springboottest-to-a-test-configuration", "title": "How to forward the local port of a SpringBootTest to a test configuration", "body": "<p>I am currently struggling with the server port injection of the SpringBootTest instance. I've written a test configuration class where I would like to access this port. </p>\n\n<p>Test Configuration class:</p>\n\n<pre><code>@Target(AnnotationTarget.CLASS, AnnotationTarget.FILE)\n@Retention(AnnotationRetention.RUNTIME)\n@Import(value = [TestTemplateConfig::class])\nannotation class TestAnnotation\n\n@Configuration\nopen class TestTemplateConfig {\n    @Value(\"\\${server.port}\")\n    private var localPort: Int? = null\n\n    @Bean\n    open fun foo() = Foo(localPort)\n}\n</code></pre>\n\n<p>The Test looks like this:</p>\n\n<pre><code>@SpringBootJunit5Test\n@TestAnnotation\n@EnableTestCouchbase\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\nclass MyIntegrationTest {\n    @LocalServerPort\n    var port: Int = 0\n\n    @Autowired\n    private lateinit var foo: Foo\n\n    ...\n}\n</code></pre>\n\n<p>The problem now is, that I always receive a value of zero for the port in the configuration class. Because I don't get null this sounds like it is working  to get the port but the wrong one (I think zero is defined for a random port in spring). The evaluation of the server port in the MyIntegrationTest class is working properly so far.</p>\n\n<p>Any ideas to fix this?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["java", "android", "android-studio", "kotlin"], "comments": [{"owner": {"reputation": 160, "user_id": 10092089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rJQX8.jpg?s=128&g=1", "display_name": "GonzaloPani", "link": "https://stackoverflow.com/users/10092089/gonzalopani"}, "edited": false, "score": 0, "creation_date": 1533109975, "post_id": 51628053, "comment_id": 90220453, "body": "Try to clean the project and compile it again."}, {"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1533110116, "post_id": 51628053, "comment_id": 90220542, "body": "might be caused by the IDE re-indexing your project, which happens from time to time"}, {"owner": {"reputation": 49, "user_id": 10092826, "user_type": "registered", "profile_image": "https://graph.facebook.com/1990558550997130/picture?type=large", "display_name": "Usama Jawad", "link": "https://stackoverflow.com/users/10092826/usama-jawad"}, "reply_to_user": {"reputation": 160, "user_id": 10092089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rJQX8.jpg?s=128&g=1", "display_name": "GonzaloPani", "link": "https://stackoverflow.com/users/10092089/gonzalopani"}, "edited": false, "score": 0, "creation_date": 1533110120, "post_id": 51628053, "comment_id": 90220543, "body": "@GONZALOPANIAGUA, already did, the error still pops up randomly from time to time."}, {"owner": {"reputation": 932, "user_id": 859327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gzLwG.jpg?s=128&g=1", "display_name": "Abubakar", "link": "https://stackoverflow.com/users/859327/abubakar"}, "edited": false, "score": 0, "creation_date": 1533110136, "post_id": 51628053, "comment_id": 90220550, "body": "Well are you using any extension for findviewById? if not then you have to use <code>as TextView</code> here  <a href=\"https://medium.com/@quiro91/improving-findviewbyid-with-kotlin-4cf2f8f779bb\" rel=\"nofollow noreferrer\">medium.com/@quiro91/&hellip;</a>"}, {"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "reply_to_user": {"reputation": 932, "user_id": 859327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gzLwG.jpg?s=128&g=1", "display_name": "Abubakar", "link": "https://stackoverflow.com/users/859327/abubakar"}, "edited": false, "score": 1, "creation_date": 1533110201, "post_id": 51628053, "comment_id": 90220589, "body": "@Abk in that case it wouldn&#39;t be sporadic, but it will be happening constantly"}], "owner": {"reputation": 49, "user_id": 10092826, "user_type": "registered", "profile_image": "https://graph.facebook.com/1990558550997130/picture?type=large", "display_name": "Usama Jawad", "link": "https://stackoverflow.com/users/10092826/usama-jawad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 308, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1533110340, "creation_date": 1533109863, "question_id": 51628053, "link": "https://stackoverflow.com/questions/51628053/why-does-my-android-studio-code-randomly-get-underlined-in-red-even-when-there-i", "title": "Why does my Android Studio code randomly get underlined in red even when there is no error?", "body": "<p>Sometimes my code gets randomly underlined in red even when there is no error</p>\n\n<p><a href=\"https://i.stack.imgur.com/8jGaO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8jGaO.png\" alt=\"Image here\"></a></p>\n\n<p>For example, in my Kotlin code (screenshot above):</p>\n\n<pre><code>    nameTextView=findViewById(R.id.nameDashboardTextView)\n    ageTextView=findViewById(R.id.ageDashboardTextView)\n    emailIDTextView=findViewById(R.id.emailIDTextView)\n    genderTextView=findViewById(R.id.genderTextView)\n    weightTextView=findViewById(R.id.weightTextView)\n    heightTextView=findViewById(R.id.heightTextView)\n    progressBar3=findViewById(R.id.progressBar3)\n</code></pre>\n\n<p>findViewById of any random variables gets underlined in red. When I copy the text, remove it, and paste it back, the \"error\" is removed. Furthermore, the red line doesn't stop the code from compiling or executing, the application works perfectly, but in Android Studio, some random line like findViewById or other straightforward code will get underlined in red.</p>\n\n<p>The error for the above example reads:</p>\n\n<blockquote>\n  <p>Cannot infer type parameter T in</p>\n  \n  <p>fun  findViewById ( id:Int ) :T! None of the following\n  substitutions  (   Int)\n                                       (   Int)\n                                       (   Int) can be applied to\n                                       (   Int)</p>\n</blockquote>\n\n<p>Any idea why this happens? I'm using Android Studio 3.1.3, 4th June 2018 build</p>\n"}, {"tags": ["properties", "kotlin", "nullable"], "comments": [{"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1533110245, "post_id": 51628035, "comment_id": 90220612, "body": "You defaulted it to null right here: <code>var myProperty: String? = null</code>. <code>lateinit</code> doesn&#39;t default it to anything and the explicit check with <code>isInitialized</code> is a hack that is against the intent behind the feature of <code>lateinit</code>."}, {"owner": {"reputation": 3602, "user_id": 3569545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb00bcc2abeb14cf5bfacfa1013a92ad?s=128&d=identicon&r=PG&f=1", "display_name": "Demigod", "link": "https://stackoverflow.com/users/3569545/demigod"}, "edited": false, "score": 1, "creation_date": 1533110390, "post_id": 51628035, "comment_id": 90220695, "body": "In other words, it&#39;s not possible you have to use <code>late init</code> (which can throw an exception on early access) or explicitly init the variable."}, {"owner": {"reputation": 8055, "user_id": 706387, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/SiTPw.jpg?s=128&g=1", "display_name": "kosiara - Bartosz Kosarzycki", "link": "https://stackoverflow.com/users/706387/kosiara-bartosz-kosarzycki"}, "reply_to_user": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1533111165, "post_id": 51628035, "comment_id": 90221120, "body": "@MarkoTopolnik <code>var myProperty: String? = null</code> defaults to null but I find <code>= null</code> redundant and was trying to simplify the code"}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 1, "creation_date": 1533111219, "post_id": 51628035, "comment_id": 90221145, "body": "So you&#39;re not asking about defaulting to user-provided values, but about a built-in, implicit default value. Kotlin&#39;s general mantra is &quot;be explicit&quot; and this is one example."}, {"owner": {"reputation": 8055, "user_id": 706387, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/SiTPw.jpg?s=128&g=1", "display_name": "kosiara - Bartosz Kosarzycki", "link": "https://stackoverflow.com/users/706387/kosiara-bartosz-kosarzycki"}, "reply_to_user": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1533111386, "post_id": 51628035, "comment_id": 90221236, "body": "@MarkoTopolnik  I just needed <b>String?</b> which defaults to <b>null</b> without expicitly saying so. But <b>lateinit</b> seems closest to my needs. Thanks"}, {"owner": {"reputation": 316, "user_id": 1020877, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/zThXB.jpg?s=128&g=1", "display_name": "Morya", "link": "https://stackoverflow.com/users/1020877/morya"}, "edited": false, "score": 0, "creation_date": 1533112357, "post_id": 51628035, "comment_id": 90221772, "body": "You can also use optional variable. like val javaNullable: Optional&lt;String&gt; = Optional.ofNullable(&quot;java&quot;), for more <a href=\"https://dzone.com/articles/kotlin-null-safety-for-the-optional-experience\" rel=\"nofollow noreferrer\">dzone.com/articles/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": false, "score": 5, "last_activity_date": 1533111377, "creation_date": 1533111377, "answer_id": 51628459, "question_id": 51628035, "link": "https://stackoverflow.com/questions/51628035/kotlin-nullable-property-default-to-null-value/51628459#51628459", "title": "Kotlin - nullable property default to null value", "body": "<p>Kotlin intentionally requires you to initialize all properties explicitly. There is no shorthand syntax. For a property of a nullable type, the preferred way is not to use <code>lateinit</code>, but to declare it with a <code>null</code> initializer.</p>\n\n<p>The <code>isInitialized</code> method for <code>lateinit</code> properties is designed to handle complex cases like cleanup of resources; it's not intended to be used as a replacement for a <code>null</code> check for users who want to save on writing <code>= null</code> as part of a property declaration.</p>\n"}, {"comments": [{"owner": {"reputation": 3602, "user_id": 3569545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb00bcc2abeb14cf5bfacfa1013a92ad?s=128&d=identicon&r=PG&f=1", "display_name": "Demigod", "link": "https://stackoverflow.com/users/3569545/demigod"}, "edited": false, "score": 1, "creation_date": 1533119913, "post_id": 51628612, "comment_id": 90226511, "body": "&quot;who said that it should be 0 for int anyway?&quot; - logic ? :)"}, {"owner": {"reputation": 13823, "user_id": 334243, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6ed2b0016c334f9c54ebbd1b20ba5d35?s=128&d=identicon&r=PG", "display_name": "Justus Romijn", "link": "https://stackoverflow.com/users/334243/justus-romijn"}, "edited": false, "score": 0, "creation_date": 1539758412, "post_id": 51628612, "comment_id": 92613055, "body": "<code>0</code> has a lot of meaning to it. If you work with data, the difference between <code>null</code> and <code>0</code> is huge. Say you make a record of sales, and a <code>unitsSold</code> value somehow didn&#39;t get set because of a connection issue, do you want to go with <code>0</code> (which implies nothing got sold) or <code>null</code> (implying the data is unknown)? When working with counters, defaulting to <code>0</code> makes sense, but there are a lot more use-cases out there. It depends on the goal of the language: save keystrokes or make dev&#39;s think about their defaults. I guess Kotlin went for the latter :)"}], "tags": [], "owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "is_accepted": true, "score": 4, "last_activity_date": 1533111910, "creation_date": 1533111910, "answer_id": 51628612, "question_id": 51628035, "link": "https://stackoverflow.com/questions/51628035/kotlin-nullable-property-default-to-null-value/51628612#51628612", "title": "Kotlin - nullable property default to null value", "body": "<p>Short answer is no.<br>\nUnlike some other languages (Scala, Go), Kotlin doesn't assume it knows best what the default value for the type is (who said that it should be 0 for int anyway?)</p>\n"}, {"comments": [{"owner": {"reputation": 8055, "user_id": 706387, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/SiTPw.jpg?s=128&g=1", "display_name": "kosiara - Bartosz Kosarzycki", "link": "https://stackoverflow.com/users/706387/kosiara-bartosz-kosarzycki"}, "edited": false, "score": 0, "creation_date": 1533155950, "post_id": 51635393, "comment_id": 90248244, "body": "Kotlin devs should consider adding &#39;_&#39; as variable value initializer to &quot;type default value&quot; i.e. 0 for int, null for String etc."}], "tags": [], "owner": {"reputation": 4459, "user_id": 2318632, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/kd7KQ.jpg?s=128&g=1", "display_name": "Sir Codesalot", "link": "https://stackoverflow.com/users/2318632/sir-codesalot"}, "is_accepted": false, "score": 0, "last_activity_date": 1533132308, "creation_date": 1533132308, "answer_id": 51635393, "question_id": 51628035, "link": "https://stackoverflow.com/questions/51628035/kotlin-nullable-property-default-to-null-value/51635393#51635393", "title": "Kotlin - nullable property default to null value", "body": "<p>You could also declare a global function</p>\n\n<pre><code>fun nullString(): String? {\n    return null\n}\n</code></pre>\n\n<p>and use it like</p>\n\n<pre><code>class ABC {\n   var myProperty = nullString()\n}\n</code></pre>\n\n<p>Since there is only one null reference in the language, a global variable will also work</p>\n\n<pre><code>var nullString : String? = null\n\nclass ABC {\n   var myProperty = nullString\n}\n</code></pre>\n\n<p>P.S. - \nunfortunately the spacial characters like '_' are reserved in Kotlin so you can't use it to name your variable and create <code>var myProperty = _</code></p>\n"}], "owner": {"reputation": 8055, "user_id": 706387, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/SiTPw.jpg?s=128&g=1", "display_name": "kosiara - Bartosz Kosarzycki", "link": "https://stackoverflow.com/users/706387/kosiara-bartosz-kosarzycki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2062, "favorite_count": 0, "accepted_answer_id": 51628612, "answer_count": 3, "score": 4, "last_activity_date": 1533132308, "creation_date": 1533109755, "last_edit_date": 1533111527, "question_id": 51628035, "link": "https://stackoverflow.com/questions/51628035/kotlin-nullable-property-default-to-null-value", "title": "Kotlin - nullable property default to null value", "body": "<p>Suppose I define a class with a <strong>nullable</strong> property</p>\n\n<pre><code>class ABC {\n   var myProperty: String? = null\n}\n</code></pre>\n\n<p>Is there a way to default it to null value?\nMaybe something similar to SCALA? </p>\n\n<pre><code>var myProperty: String? = _  // compilation error\n</code></pre>\n\n<p>or simply:</p>\n\n<pre><code>var myProperty: String?  // compilation error\n</code></pre>\n\n<p>I know we could have used a <strong>lateinit</strong> variable that from Kotlin 1.2 can be later checked for initilization like so:</p>\n\n<pre><code>lateinit var myProperty: String\n\nif (::myProperty.isInitialized) {\n   //value is not-null\n}\n</code></pre>\n\n<p>So is lateinit the preferred way? Is defaulting to null value possible or it's omitted on purpose?</p>\n"}, {"tags": ["android", "kotlin", "android-jetpack", "android-workmanager"], "answers": [{"tags": [], "owner": {"reputation": 4768, "user_id": 3499145, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1a8d7962edff6c2ce861f42324cc1616?s=128&d=identicon&r=PG&f=1", "display_name": "Algar", "link": "https://stackoverflow.com/users/3499145/algar"}, "is_accepted": false, "score": 2, "last_activity_date": 1533110332, "creation_date": 1533110332, "answer_id": 51628191, "question_id": 51627960, "link": "https://stackoverflow.com/questions/51627960/android-work-manager-difference-between-existingperiodicworkpolicy-keep-and-r/51628191#51628191", "title": "Android Work Manager - Difference between ExistingPeriodicWorkPolicy.KEEP and .Replace", "body": "<p><strong>KEEP:</strong> If there is existing pending work with the same unique name, do nothing.</p>\n\n<p><strong>REPLACE:</strong> If there is existing pending work with the same unique name, cancel and delete it. </p>\n"}, {"comments": [{"owner": {"reputation": 5453, "user_id": 1181261, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/yH1mw.png?s=128&g=1", "display_name": "Primo\u017e Kralj", "link": "https://stackoverflow.com/users/1181261/primo%c5%be-kralj"}, "edited": false, "score": 0, "creation_date": 1598407208, "post_id": 51632052, "comment_id": 112446573, "body": "What should I use if I just changed the <code>repeatInterval</code> for periodic work (e.g. I want it to run more often)? Will using <code>KEEP</code> honor the new repeating interval?"}, {"owner": {"reputation": 314, "user_id": 5374702, "user_type": "registered", "profile_image": "https://graph.facebook.com/1828285919/picture?type=large", "display_name": "Raunak Sett", "link": "https://stackoverflow.com/users/5374702/raunak-sett"}, "reply_to_user": {"reputation": 5453, "user_id": 1181261, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/yH1mw.png?s=128&g=1", "display_name": "Primo\u017e Kralj", "link": "https://stackoverflow.com/users/1181261/primo%c5%be-kralj"}, "edited": false, "score": 0, "creation_date": 1601181988, "post_id": 51632052, "comment_id": 113323227, "body": "@Primo\u017eKralj you should REPLACE, else the timing interval change will be ignored."}], "tags": [], "owner": {"reputation": 225, "user_id": 10123288, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cHdLk.png?s=128&g=1", "display_name": "nst0022", "link": "https://stackoverflow.com/users/10123288/nst0022"}, "is_accepted": true, "score": 6, "last_activity_date": 1552313276, "last_edit_date": 1552313276, "creation_date": 1533122595, "answer_id": 51632052, "question_id": 51627960, "link": "https://stackoverflow.com/questions/51627960/android-work-manager-difference-between-existingperiodicworkpolicy-keep-and-r/51632052#51632052", "title": "Android Work Manager - Difference between ExistingPeriodicWorkPolicy.KEEP and .Replace", "body": "<p>In your example, you are about to enqueue a new work request (a.k.a. worker).\nIf you have done this just before at runtime, this worker is already present with state ENQUEUED.</p>\n\n<p>KEEP:  If a previous worker exists, your new attempt is simply ignored, else your new worker is enqueued.</p>\n\n<p>REPLACE: If a previous worker exists, it is cancelled, leading to a state CANCELLED for it. Then or else, your new worker is enqueued.</p>\n\n<p>So, if you are sure that your new worker is the same as the previous one (say the constraints have not changed), then KEEP should be safe, otherwise REPLACE might be the better option.</p>\n"}], "owner": {"reputation": 1390, "user_id": 5008350, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1a4e1be55c07c7fa36359fd5cebca882?s=128&d=identicon&r=PG&f=1", "display_name": "I am a Student", "link": "https://stackoverflow.com/users/5008350/i-am-a-student"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1680, "favorite_count": 0, "accepted_answer_id": 51632052, "answer_count": 2, "score": 4, "last_activity_date": 1552313276, "creation_date": 1533109520, "question_id": 51627960, "link": "https://stackoverflow.com/questions/51627960/android-work-manager-difference-between-existingperiodicworkpolicy-keep-and-r", "title": "Android Work Manager - Difference between ExistingPeriodicWorkPolicy.KEEP and .Replace", "body": "<p><strong>By referring to:</strong> <a href=\"https://stackoverflow.com/questions/50415756/android-workmanager-api-for-running-daily-task-in-background\">Android WorkManager api for running daily task in Background</a></p>\n\n<p>It uses the <code>WorkManager.enqueueUniquePeriodicWork</code> to ensure that <strong>PeriodicWorkRequest</strong> is not created multiple times.</p>\n\n<p><strong>example code:</strong></p>\n\n<pre><code>val work = PeriodicWorkRequestBuilder&lt;SyncWork&gt;(15,TimeUnit.MINUTES).build()\n\nWorkManager.getInstance().enqueueUniquePeriodicWork(\"TaskTag\",\n                                       ExistingPeriodicWorkPolicy.KEEP, work);\n</code></pre>\n\n<p>However, I found it there is 2 option of <code>ExistingPeriodicWorkPolicy</code> which is <code>ExistingPeriodicWorkPolicy.KEEP</code> and <code>ExistingPeriodicWorkPolicy.REPLACE</code> can be use.</p>\n\n<p>I try to implement it and run the code, but it does really show any differences, and it seem both of them behave the same way.</p>\n\n<p><strong>My uncertainty:</strong></p>\n\n<p>How does the <code>ExistingPeriodicWorkPolicy.KEEP</code> perform differently from <code>ExistingPeriodicWorkPolicy.REPLACE</code>?</p>\n"}, {"tags": ["interface", "kotlin", "overriding", "subtype"], "comments": [{"owner": {"reputation": 2287, "user_id": 5267751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd62e8fd8fbb37abc7e2a39d23828047?s=128&d=identicon&r=PG&f=1", "display_name": "user202729", "link": "https://stackoverflow.com/users/5267751/user202729"}, "edited": false, "score": 0, "creation_date": 1533107713, "post_id": 51627392, "comment_id": 90219204, "body": "Related: <a href=\"https://stackoverflow.com/questions/2701182/call-a-method-of-subclass-in-java\" title=\"call a method of subclass in java\">stackoverflow.com/questions/2701182/&hellip;</a>"}, {"owner": {"reputation": 2287, "user_id": 5267751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd62e8fd8fbb37abc7e2a39d23828047?s=128&d=identicon&r=PG&f=1", "display_name": "user202729", "link": "https://stackoverflow.com/users/5267751/user202729"}, "edited": false, "score": 0, "creation_date": 1533107738, "post_id": 51627392, "comment_id": 90219217, "body": "(tl;dr. the top answer there says that you&#39;re doing something wrong)"}], "answers": [{"tags": [], "owner": {"reputation": 1114, "user_id": 4288054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/533bf09b3df304c8065443995cdb6f77?s=128&d=identicon&r=PG", "display_name": "Oleksandr Albul", "link": "https://stackoverflow.com/users/4288054/oleksandr-albul"}, "is_accepted": false, "score": 1, "last_activity_date": 1569667634, "creation_date": 1569667634, "answer_id": 58145555, "question_id": 51627392, "link": "https://stackoverflow.com/questions/51627392/kotlin-override-property-from-interface-with-subtype/58145555#58145555", "title": "kotlin override property from interface with subtype", "body": "<p>As Alexey Romanov said the problem with setter, so there is a workaround, replace var by val:</p>\n\n<pre><code>interface AbstractState {}\nclass SubState : AbstractState{}\n\ninterface NiceInterface {\n    val currentState: AbstractState\n}\n\nclass Class : NiceInterface {\n    override val currentState: SubState by lazy {\n        SubState()\n    }\n}\n</code></pre>\n\n<p>So now you don't need to cast:</p>\n\n<pre><code>currentState.doSomething()\n</code></pre>\n"}], "owner": {"reputation": 265, "user_id": 4336990, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5d59bdf84a70517cf6fec4d65023df19?s=128&d=identicon&r=PG&f=1", "display_name": "Punika", "link": "https://stackoverflow.com/users/4336990/punika"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 916, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1569667634, "creation_date": 1533107605, "question_id": 51627392, "link": "https://stackoverflow.com/questions/51627392/kotlin-override-property-from-interface-with-subtype", "title": "kotlin override property from interface with subtype", "body": "<p>I have the following situation:</p>\n\n<pre><code>interface AbstractState {...}\ninterface SubState {...}\n\ninterface NiceInterface {\n  var currentState: AbstractState\n  ...\n}\n</code></pre>\n\n<p>Furthermore I have a class which implements this interface.</p>\n\n<pre><code>class Class : NiceInterface {\n  override var currentState: AbstractState = SubState()\n}\n</code></pre>\n\n<p>This implies that I have to write the following at every use of it in the class:</p>\n\n<pre><code>(currentState as SubState).doSomething()\n</code></pre>\n\n<p><strong>Is there a way to avoid the \"as SubState\" part? Or some kind of smart way to do it?</strong></p>\n\n<p>Like with generics:</p>\n\n<pre><code>interface =&gt; val currentStates: List&lt;out AbstractState&gt;\nclass     =&gt; override val currentStates = ArrayList&lt;SubState&gt;()\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": false, "score": 2, "last_activity_date": 1533104913, "creation_date": 1533104913, "answer_id": 51626668, "question_id": 51626010, "link": "https://stackoverflow.com/questions/51626010/kotlin-refer-global-variable-from-function/51626668#51626668", "title": "Kotlin refer global variable from function", "body": "<p>You can refer to the file level variable by prefixing it with the package name in this case:</p>\n\n<pre><code>package x\n\nvar offset = 0 // Global offset\n\nfun bar(offset: Int) { // Function argument offset\n    x.offset += 10 // Global offset\n}\n\nfun main(args: Array&lt;String&gt;) {\n    bar(5)\n    println(offset) // Global offset\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 675, "user_id": 625217, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K1I15.jpg?s=128&g=1", "display_name": "Alireza Naghizadeh", "link": "https://stackoverflow.com/users/625217/alireza-naghizadeh"}, "is_accepted": true, "score": 2, "last_activity_date": 1533104999, "creation_date": 1533104999, "answer_id": 51626685, "question_id": 51626010, "link": "https://stackoverflow.com/questions/51626010/kotlin-refer-global-variable-from-function/51626685#51626685", "title": "Kotlin refer global variable from function", "body": "<p>In kotlin the function parameters are immutable (is val, not var!), so, you can't update offset argument inside bar function.</p>\n\n<p>Finally, If you put these codes inside a class, then you can access global variables in a class with same name of your function parameter by 'this' keyword, like this:</p>\n\n<pre><code>class myClass{\n    var offset=0 //Global offset\n    fun foo(){\n        bar(offset)\n    }\n\n    fun bar(offset:Int){//Function argument offset\n        .......\n        if(baz()){\n            .......\n            this.offset+=10 // I want to update the global offset, but function argument offset is reffered here\n            .......\n        }\n    }\n\n    fun baz():Boolean{\n        .......\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 304, "user_id": 7248857, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K7JF7.png?s=128&g=1", "display_name": "WOLF.L", "link": "https://stackoverflow.com/users/7248857/wolf-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5384, "favorite_count": 0, "accepted_answer_id": 51626685, "answer_count": 2, "score": 3, "last_activity_date": 1533104999, "creation_date": 1533102100, "question_id": 51626010, "link": "https://stackoverflow.com/questions/51626010/kotlin-refer-global-variable-from-function", "title": "Kotlin refer global variable from function", "body": "<p>Here is my code</p>\n\n<pre><code>var offset=0 //Global offset\nfun foo(){\n    bar(offset)\n}\n\nfun bar(offset:Int){//Function argument offset\n    .......\n    .......\n    .......\n    if(baz()){\n        .......\n        .......\n        offset+=10 // I want to update the global offset, but function argument offset is reffered here\n        bar(offset)\n    }\n}\n\nfun baz():Boolean{\n    .......\n    .......\n}\n</code></pre>\n\n<p>How can I refer to the global variable \"offset\" within the function bar(offset:Int)?\nIs it not possible in Kotlin?</p>\n"}, {"tags": ["sql", "kotlin", "jooq"], "answers": [{"tags": [], "owner": {"reputation": 179634, "user_id": 521799, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb96efa7a5664ba1c4ebf586abd4121f?s=128&d=identicon&r=PG", "display_name": "Lukas Eder", "link": "https://stackoverflow.com/users/521799/lukas-eder"}, "is_accepted": true, "score": 2, "last_activity_date": 1533198484, "creation_date": 1533198484, "answer_id": 51648984, "question_id": 51625997, "link": "https://stackoverflow.com/questions/51625997/how-to-get-last-inserted-row-sql-not-id-jooq/51648984#51648984", "title": "How TO Get Last Inserted ROW SQL (Not ID) Jooq", "body": "<p>There isn't any such specific query that you can get from the jOOQ API, short of constructing it yourself, e.g. by using plain SQL:</p>\n\n<pre><code>DSL.using(configuration)\n   .select(field(\"last_insert_rowid()\", SQLDataType.INTEGER));\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 2631567, "user_type": "registered", "profile_image": "https://graph.facebook.com/1300412113/picture?type=large", "display_name": "Nagaraju Nooka", "link": "https://stackoverflow.com/users/2631567/nagaraju-nooka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 363, "favorite_count": 0, "accepted_answer_id": 51648984, "answer_count": 1, "score": 1, "last_activity_date": 1533198484, "creation_date": 1533102014, "last_edit_date": 1533198370, "question_id": 51625997, "link": "https://stackoverflow.com/questions/51625997/how-to-get-last-inserted-row-sql-not-id-jooq", "title": "How TO Get Last Inserted ROW SQL (Not ID) Jooq", "body": "<p>I am using jOOQ as SQL generator. I could see I am able to get last inserted row using <code>DSLContext.lastID()</code>. But how do I get underlying db sql string.</p>\n\n<p>ex: For Sqlite <code>SELECT last_insert_rowid()</code></p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 14654, "user_id": 1061944, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/4lEdK.jpg?s=128&g=1", "display_name": "Murtaza Khursheed Hussain", "link": "https://stackoverflow.com/users/1061944/murtaza-khursheed-hussain"}, "edited": false, "score": 0, "creation_date": 1533106491, "post_id": 51625041, "comment_id": 90218520, "body": "Kotlin is also JVM based as Java, what you can do in JAVA can be done in Kotlin. below are the good answer s or you can generate random UUID by <code>UUID uuid = UUID.randomUUID();</code>"}], "answers": [{"tags": [], "owner": {"reputation": 675, "user_id": 625217, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K1I15.jpg?s=128&g=1", "display_name": "Alireza Naghizadeh", "link": "https://stackoverflow.com/users/625217/alireza-naghizadeh"}, "is_accepted": false, "score": 5, "last_activity_date": 1533104208, "creation_date": 1533104208, "answer_id": 51626506, "question_id": 51625041, "link": "https://stackoverflow.com/questions/51625041/is-there-any-equivalent-of-c-guid-empty-in-kotlin/51626506#51626506", "title": "Is there any equivalent of C# Guid.Empty in Kotlin?", "body": "<p>There is UUID class in java. So, do this:</p>\n\n<pre><code>import java.util.*\n\nUUID(0L, 0L) // This is like Guid.Empty in C#\n</code></pre>\n"}], "owner": {"reputation": 721, "user_id": 6893685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pc8f4.jpg?s=128&g=1", "display_name": "Gulzar Bhat", "link": "https://stackoverflow.com/users/6893685/gulzar-bhat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 301, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567911989, "creation_date": 1533094857, "last_edit_date": 1567911989, "question_id": 51625041, "link": "https://stackoverflow.com/questions/51625041/is-there-any-equivalent-of-c-guid-empty-in-kotlin", "title": "Is there any equivalent of C# Guid.Empty in Kotlin?", "body": "<p>Is there any equivalent of C# <code>Guid.Empty</code> in Kotlin?</p>\n\n<p>There seems nothing like that in Java.</p>\n"}, {"tags": ["android", "firebase", "kotlin", "google-cloud-firestore"], "comments": [{"owner": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "edited": false, "score": 1, "creation_date": 1533088736, "post_id": 51624263, "comment_id": 90213687, "body": "The success/failure listeners will only be called once the data is committed to, or rejected by, the server. Are you sure you have a connection to the server?"}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1533114318, "post_id": 51624263, "comment_id": 90222871, "body": "Do you have the right permissions to save data to the database?"}, {"owner": {"reputation": 21, "user_id": 2399582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b89f3d112f2028cb8b2221021e020b31?s=128&d=identicon&r=PG", "display_name": "Archer3CL", "link": "https://stackoverflow.com/users/2399582/archer3cl"}, "reply_to_user": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "edited": false, "score": 0, "creation_date": 1533138095, "post_id": 51624263, "comment_id": 90239080, "body": "@FrankvanPuffelen I think so, as i said on the question i can read data from the database."}, {"owner": {"reputation": 21, "user_id": 2399582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b89f3d112f2028cb8b2221021e020b31?s=128&d=identicon&r=PG", "display_name": "Archer3CL", "link": "https://stackoverflow.com/users/2399582/archer3cl"}, "reply_to_user": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1533138187, "post_id": 51624263, "comment_id": 90239146, "body": "@AlexMamo I choose the &quot;test&quot; option when creating the database. This are the rules filled by default  service cloud.firestore {   match /databases/{database}/documents {     match /{document=**} {       allow read, write;     }   } }"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 2399582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b89f3d112f2028cb8b2221021e020b31?s=128&d=identicon&r=PG", "display_name": "Archer3CL", "link": "https://stackoverflow.com/users/2399582/archer3cl"}, "is_accepted": false, "score": 1, "last_activity_date": 1533149415, "creation_date": 1533149415, "answer_id": 51640395, "question_id": 51624263, "link": "https://stackoverflow.com/questions/51624263/cant-save-document-using-cloud-firestore-on-android/51640395#51640395", "title": "Can&#39;t save document using cloud firestore on android", "body": "<p>It seems that I needed to add the following permission to the <strong>AndroidManifest.xml</strong></p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.INTERNET\" /&gt;\n</code></pre>\n\n<p>But I find this weird because I could login using the firebase auth methods without it.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 3456124, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mBSYa.jpg?s=128&g=1", "display_name": "kirkadev", "link": "https://stackoverflow.com/users/3456124/kirkadev"}, "is_accepted": false, "score": 0, "last_activity_date": 1586699705, "last_edit_date": 1586699705, "creation_date": 1555839517, "answer_id": 55781581, "question_id": 51624263, "link": "https://stackoverflow.com/questions/51624263/cant-save-document-using-cloud-firestore-on-android/55781581#55781581", "title": "Can&#39;t save document using cloud firestore on android", "body": "<p>I had a same problem. Kaspersky antivirus is guilty. Disable your antivirus.\n<a href=\"https://stackoverflow.com/a/50535344/3456124\">https://stackoverflow.com/a/50535344/3456124</a></p>\n"}], "owner": {"reputation": 21, "user_id": 2399582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b89f3d112f2028cb8b2221021e020b31?s=128&d=identicon&r=PG", "display_name": "Archer3CL", "link": "https://stackoverflow.com/users/2399582/archer3cl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1342, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1586699705, "creation_date": 1533087786, "last_edit_date": 1533147868, "question_id": 51624263, "link": "https://stackoverflow.com/questions/51624263/cant-save-document-using-cloud-firestore-on-android", "title": "Can&#39;t save document using cloud firestore on android", "body": "<p>I'm trying to save a document on a collection, following the documentation on cloud firestore. I can read a collection/document that I manually created on the firebase console but trying to store from my Android app is not working. </p>\n\n<p>Console/Logcat is not showing any error and the app is not crashing.\nNeither of the listeners are getting called.\nAm I missing something?</p>\n\n<pre><code>class UserActivity : AppCompatActivity() {\n    private val db = FirebaseFirestore.getInstance()\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_profile)\n        save_button.setOnClickListener { storeUser() }\n    }\n\n    private fun storeUser(){\n        val user = HashMap&lt;String,Any&gt;()\n        user.put(\"first\", \"Ada\")\n        user.put(\"last\", \"Lovelace\")\n        user.put(\"born\", 1815)\n\n        db.collection(\"users\")\n                .add(user)\n                .addOnSuccessListener(OnSuccessListener&lt;DocumentReference&gt; { documentReference -&gt; Log.d(\"Storing User\", \"DocumentSnapshot added with ID: \" + documentReference.id) })\n                .addOnFailureListener(OnFailureListener { e -&gt; Log.w(\"Storing User\", \"Error adding document\", e) })\n    }\n}\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>As an update trying to read a document throws the following exception</p>\n\n<blockquote>\n  <p>com.google.firebase.firestore.FirebaseFirestoreException: Failed to\n  get document because the client is offline.</p>\n</blockquote>\n"}, {"tags": ["android-studio", "kotlin"], "comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 1, "creation_date": 1533086208, "post_id": 51624066, "comment_id": 90213210, "body": "<code>learnt that enums are not very space efficient in android.</code> oh boy, that was relevant like, 7 years ago. You seem to have missed the flamewar. Just use enums. Enums are just as &quot;space-efficient&quot; as any class you make, yet we don&#39;t start removing classes and making 10000 line methods."}], "answers": [{"tags": [], "owner": {"reputation": 4397, "user_id": 9164471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-IY5Hr42LB7Q/AAAAAAAAAAI/AAAAAAAAAHc/sk_5_2q1nCU/photo.jpg?sz=128", "display_name": "Rene", "link": "https://stackoverflow.com/users/9164471/rene"}, "is_accepted": true, "score": 1, "last_activity_date": 1533186353, "last_edit_date": 1533186353, "creation_date": 1533106003, "answer_id": 51626948, "question_id": 51624066, "link": "https://stackoverflow.com/questions/51624066/is-there-a-substitute-for-enum-in-kotlin-android-besides-enumerated-annotation/51626948#51626948", "title": "Is there a substitute for enum in kotlin Android besides enumerated annotation?", "body": "<p>I agree with @EpicPandaForce comment: you should not optimize Enums in this way. </p>\n\n<p>That said, there will be a new feature: <strong>Inline Classes</strong> coming in Kotlin 1.3 (<a href=\"https://blog.jetbrains.com/kotlin/2018/07/see-whats-coming-in-kotlin-1-3-m1/\" rel=\"nofollow noreferrer\">https://blog.jetbrains.com/kotlin/2018/07/see-whats-coming-in-kotlin-1-3-m1/</a>).</p>\n\n<p>With this new feature you could do the following:</p>\n\n<pre><code>inline data class Cat(private val breed: String)\ninline data class Dog(private val breed: String)\n\nval AMER_SHORTHAIR = Cat(\"American Shorthair\");\nval SIAMESE = Cat(\"Siamese\");\n\nval GOLDEN_R = Dog(\"Golden Retriever\");\nval POODLE = Dog(\"Poodle\");  \n\nfun adopt(cat: Cat, dog: Dog){\n    print(\"I adopted a \"+cat.breed+\" and a \"+dog.breed)\n} \n</code></pre>\n\n<p>Whenever you use this values the compiler inlines to raw strings.</p>\n\n<p>In contrast to <em>type aliases</em>, the compiler is able to check the origin types for <em>inline classes</em>.</p>\n"}, {"tags": [], "owner": {"reputation": 143, "user_id": 11801106, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-uqk0IIfyB3U/AAAAAAAAAAI/AAAAAAAAFQU/t9BpzFhU_oM/photo.jpg?sz=128", "display_name": "Vishal Ambre", "link": "https://stackoverflow.com/users/11801106/vishal-ambre"}, "is_accepted": false, "score": 0, "last_activity_date": 1595502817, "creation_date": 1595502817, "answer_id": 63052897, "question_id": 51624066, "link": "https://stackoverflow.com/questions/51624066/is-there-a-substitute-for-enum-in-kotlin-android-besides-enumerated-annotation/63052897#63052897", "title": "Is there a substitute for enum in kotlin Android besides enumerated annotation?", "body": "<p>I like to use Sealed class instead of Enums; It provides some extra goodies over the normal class; More on this <a href=\"https://kotlinlang.org/docs/reference/sealed-classes.html\" rel=\"nofollow noreferrer\">here</a></p>\n<p>Something like this;</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>class LoggingBehaviour @JvmOverloads constructor(private val logLevel: LogLevel = Debug) {\n    fun log(tag: String, message: String) {\n        when (logLevel) {\n            is Error -&gt; Log.e(tag, message)\n            is Warn -&gt; Log.w(tag, message)\n            is Info -&gt; Log.i(tag, message)\n            is Debug -&gt; Log.d(tag, message)\n            is Verbose -&gt; Log.v(tag, message)\n        }\n    }\n}\n\nsealed class LogLevel\nobject Error : LogLevel()\nobject Warn : LogLevel()\nobject Info : LogLevel()\nobject Debug : LogLevel()\nobject Verbose : LogLevel()\n</code></pre>\n<p>Also annotations like IntDef and StringDef can be used. More of it <a href=\"https://stackoverflow.com/questions/32032503/enums-and-android-annotation-intdef\">here</a></p>\n"}], "owner": {"reputation": 379, "user_id": 8946706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a8b0cbf6b4e36939831e42e007ac1e3?s=128&d=identicon&r=PG&f=1", "display_name": "ljzhanglc", "link": "https://stackoverflow.com/users/8946706/ljzhanglc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1130, "favorite_count": 0, "accepted_answer_id": 51626948, "answer_count": 2, "score": 2, "last_activity_date": 1595502817, "creation_date": 1533086074, "question_id": 51624066, "link": "https://stackoverflow.com/questions/51624066/is-there-a-substitute-for-enum-in-kotlin-android-besides-enumerated-annotation", "title": "Is there a substitute for enum in kotlin Android besides enumerated annotation?", "body": "<p>So after I created lots of enum classes in android (Kotlin), I learnt that enums are not very space efficient in android. So I tried to find another way of doing it. I found the enumerated annotation - <code>@StringDef</code>. However, Kotlin doesn't seem to support this well and there are no warning or error messages even if I pass something unexpected to a method.</p>\n\n<p>So to clarify what I want to do: I have tons of constant strings that can be classified to different groups (I listed them in different enum class), and when calling some setter functions, I want the caller to choose only from the specific group of things that can be chosen.</p>\n\n<p>For example: </p>\n\n<pre><code>enum class Cat (val breed: String){\n    AMER_SHORTHAIR(\"American Shorthair\"),\n    SIAMESE(\"Siamese\");\n}\nenum class Dog (val breed: String){\n    GOLDEN_R(\"Golden Retriever\"),\n    POODLE(\"Poodle\");\n}\nfun adopt(cat: Cat, dog: Dog){\n    print(\"I adopted a \"+cat.breed+\" and a \"+dog.breed)\n}\n</code></pre>\n\n<p>In this case, I can only choose from cats for the first param, and dogs for the second. Is there a way of doing this kind of type-safe methods without using enums?</p>\n\n<p>To avoid using enums, I might need to change the above functionality to:</p>\n\n<pre><code>const val AMER_SHORTHAIR = \"American Shorthair\"\nconst val SIAMESE = \"Siamese\"\nconst val GOLDEN_R = \"Golden Retriever\"\nconst val POODLE = \"Poodle\"\nfun adopt(cat: String, dog: String){...}\n</code></pre>\n\n<p>This is not ideal since we can get all kinds of typos which happens in our current implementation and is why I switched to enum in the first place. But overall, space consumption > type safe. So if there is no better way, I will need to switch back.</p>\n\n<p>Please let me know if there is any efficient ways to achieve. I've thought about using maps or lists, but indexing or accessing the strings become cumbersome because I need to map the string to themselves (no hard coded strings here except for the first assignment like <code>AMER_SHORTHAIR = \"American Shorthair\"</code>).</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 4391, "user_id": 3106174, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/mKAhl.jpg?s=128&g=1", "display_name": "Advice-Dog", "link": "https://stackoverflow.com/users/3106174/advice-dog"}, "is_accepted": false, "score": 1, "last_activity_date": 1533085662, "creation_date": 1533085662, "answer_id": 51624017, "question_id": 51623941, "link": "https://stackoverflow.com/questions/51623941/how-to-understand-the-fun-buildstringbuilderaction-stringbuilder-unit/51624017#51624017", "title": "How to understand the fun buildString(builderAction: (StringBuilder) -&gt; Unit) : String in Kotlin?", "body": "<p>Yes, <code>it</code> is the <code>StringBuilder</code>. It is named <code>it</code> by default. You can specify the name if you want to.</p>\n\n<pre><code>buildString {\n     it.append(\"...\")\n}\n</code></pre>\n\n<p>is the same as</p>\n\n<pre><code>buildString { it -&gt;\n    it.append(\"...\")\n}\n</code></pre>\n\n<p>or even</p>\n\n<pre><code>buildString { myNewString -&gt; \n    myNewString.append(\"...\")\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 142455, "user_id": 5133585, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/dfqcw.png?s=128&g=1", "display_name": "Sweeper", "link": "https://stackoverflow.com/users/5133585/sweeper"}, "is_accepted": false, "score": 1, "last_activity_date": 1533085663, "creation_date": 1533085663, "answer_id": 51624018, "question_id": 51623941, "link": "https://stackoverflow.com/questions/51623941/how-to-understand-the-fun-buildstringbuilderaction-stringbuilder-unit/51624018#51624018", "title": "How to understand the fun buildString(builderAction: (StringBuilder) -&gt; Unit) : String in Kotlin?", "body": "<ol>\n<li><p>There is only one parameter being passed in section B, namely, this parameter:</p>\n\n<pre><code>{\n    it.append(\"Hello, \")\n    it.append(\"World!\")\n}\n</code></pre>\n\n<p>That is <em>one</em> lambda expression, not two. The lambda expression has 2 <em>lines</em>, but it's still one lambda.</p></li>\n<li><p>If you want to expand the call to <code>buildString</code>,</p>\n\n<pre><code>val builder = StringBuilder()\nbuilder.append(\"Hello, \")\nbuilder.append(\"World!\")\nval s = builder.toString()\n</code></pre></li>\n<li><p>Yes, the <code>it</code> refers to the <code>StringBuilder</code> <code>sb</code> in <code>buildString</code>. When the function type has only one parameter, you can refer to the single parameter with <code>it</code> in the lambda expression without giving it a name.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "is_accepted": true, "score": 2, "last_activity_date": 1533085804, "creation_date": 1533085804, "answer_id": 51624034, "question_id": 51623941, "link": "https://stackoverflow.com/questions/51623941/how-to-understand-the-fun-buildstringbuilderaction-stringbuilder-unit/51624034#51624034", "title": "How to understand the fun buildString(builderAction: (StringBuilder) -&gt; Unit) : String in Kotlin?", "body": "<blockquote>\n  <p>1: The fun buildString only accept one lambda parameter in Section A, why are there two parameters passed in Section B?</p>\n</blockquote>\n\n<p>There is only 1 parameter passed to that function: specifically, the <code>builderAction</code> of type <code>(StringBuilder) -&gt; Unit</code>.</p>\n\n<p>So</p>\n\n<pre><code>val s = buildString {\n    it.append(\"Hello, \")\n    it.append(\"World!\")\n}\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>val s: String = buildString(builderAction = { stringBuilder: StringBuilder -&gt;\n    stringBuilder.append(\"Hello, \")\n    stringBuilder.append(\"World!\")\n    // return Unit\n})\n</code></pre>\n\n<p>Meaning <code>it</code> is actually the unnamed single argument of <code>(StringBuilder) -&gt; Unit</code>, so it's a <code>StringBuilder</code>.</p>\n"}], "owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1127, "favorite_count": 0, "accepted_answer_id": 51624034, "answer_count": 3, "score": 0, "last_activity_date": 1565613669, "creation_date": 1533084899, "last_edit_date": 1565613669, "question_id": 51623941, "link": "https://stackoverflow.com/questions/51623941/how-to-understand-the-fun-buildstringbuilderaction-stringbuilder-unit", "title": "How to understand the fun buildString(builderAction: (StringBuilder) -&gt; Unit) : String in Kotlin?", "body": "<p>The following code is from <a href=\"https://github.com/gbaldeck/learning-kotlin/blob/master/src/main/kotlin/org/learning/DSLconstruction.kt\" rel=\"nofollow noreferrer\">https://github.com/gbaldeck/learning-kotlin/blob/master/src/main/kotlin/org/learning/DSLconstruction.kt</a></p>\n\n<p>I find it hard to understand.</p>\n\n<p>1:  The <code>fun buildString</code> only accept one lambda parameter in Section A, why are there two parameters passed in Section B?</p>\n\n<p>2:  What is full code of Section B?<br>\n    Such as    </p>\n\n<pre><code> val s = buildString { aa : StringBuild -&gt; aa.append(\"Hello.\") } // I don't know whether it's right? \n</code></pre>\n\n<p>3:  What is this <code>it</code> in Section B?  Does this <code>it</code> represent <code>StringBuild</code> ?</p>\n\n<p><strong>Section A</strong></p>\n\n<pre><code>fun buildString(builderAction: (StringBuilder) -&gt; Unit ) : String {\n    val sb = StringBuilder()\n    builderAction(sb)\n    return sb.toString()\n}\n</code></pre>\n\n<p><strong>Section B</strong></p>\n\n<pre><code>val s = buildString {\n    it.append(\"Hello, \")\n    it.append(\"World!\")\n}\n\nlogError(s)  //The result is Hello, World!\n</code></pre>\n"}, {"tags": ["android", "kotlin", "dagger-2"], "comments": [{"owner": {"reputation": 1834, "user_id": 2435402, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/lsmPv.png?s=128&g=1", "display_name": "ElliotM", "link": "https://stackoverflow.com/users/2435402/elliotm"}, "edited": false, "score": 0, "creation_date": 1533083472, "post_id": 51623743, "comment_id": 90212699, "body": "If you&#39;re looking to simply get a context injected where you need, you can maintain an instance of the application context from the constructor of the module."}, {"owner": {"reputation": 10162, "user_id": 430720, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/028694798d002eba1e272107640656ee?s=128&d=identicon&r=PG", "display_name": "Jaguar", "link": "https://stackoverflow.com/users/430720/jaguar"}, "reply_to_user": {"reputation": 1834, "user_id": 2435402, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/lsmPv.png?s=128&g=1", "display_name": "ElliotM", "link": "https://stackoverflow.com/users/2435402/elliotm"}, "edited": false, "score": 0, "creation_date": 1533083734, "post_id": 51623743, "comment_id": 90212747, "body": "@ElliotM I need the activity context here. I have reasons, which are difficult to describe in the comments."}], "answers": [{"comments": [{"owner": {"reputation": 10162, "user_id": 430720, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/028694798d002eba1e272107640656ee?s=128&d=identicon&r=PG", "display_name": "Jaguar", "link": "https://stackoverflow.com/users/430720/jaguar"}, "edited": false, "score": 0, "creation_date": 1533084005, "post_id": 51623825, "comment_id": 90212791, "body": "I am getting a different error with this: error: @Component.Builder is missing setters for required modules or components: [FragmentModule]"}, {"owner": {"reputation": 1368, "user_id": 8064335, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mOgy4.jpg?s=128&g=1", "display_name": "tompee", "link": "https://stackoverflow.com/users/8064335/tompee"}, "reply_to_user": {"reputation": 10162, "user_id": 430720, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/028694798d002eba1e272107640656ee?s=128&d=identicon&r=PG", "display_name": "Jaguar", "link": "https://stackoverflow.com/users/430720/jaguar"}, "edited": false, "score": 0, "creation_date": 1533084074, "post_id": 51623825, "comment_id": 90212807, "body": "Why do you need the custom builder btw? Can you remove it first just to test?"}, {"owner": {"reputation": 10162, "user_id": 430720, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/028694798d002eba1e272107640656ee?s=128&d=identicon&r=PG", "display_name": "Jaguar", "link": "https://stackoverflow.com/users/430720/jaguar"}, "edited": false, "score": 0, "creation_date": 1533084245, "post_id": 51623825, "comment_id": 90212855, "body": "I am using dependent modules. Application component is in a different Android library, so I need to make a lot of code changes to drop the custom builder."}, {"owner": {"reputation": 1368, "user_id": 8064335, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mOgy4.jpg?s=128&g=1", "display_name": "tompee", "link": "https://stackoverflow.com/users/8064335/tompee"}, "reply_to_user": {"reputation": 10162, "user_id": 430720, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/028694798d002eba1e272107640656ee?s=128&d=identicon&r=PG", "display_name": "Jaguar", "link": "https://stackoverflow.com/users/430720/jaguar"}, "edited": false, "score": 1, "creation_date": 1533084485, "post_id": 51623825, "comment_id": 90212897, "body": "As the error says, you are missing a setter for your fragment module. This was not required before because you defined it as a singleton. Now that you need an instance of it, you need to add a setter in the builder. Try adding this <code>fun fragmentModule(fragmentModule : FragmentModule) : Builder</code>"}, {"owner": {"reputation": 10162, "user_id": 430720, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/028694798d002eba1e272107640656ee?s=128&d=identicon&r=PG", "display_name": "Jaguar", "link": "https://stackoverflow.com/users/430720/jaguar"}, "edited": false, "score": 0, "creation_date": 1533085328, "post_id": 51623825, "comment_id": 90213059, "body": "Thank you. This worked. Before I marke the answer accepted, I am wondering if this is the right way though. Adding the setter for fragment module now makes me pass the same instance twice: DaggerFragmentComponent                 .builder()                 .appComponent((context!!.applicationContext as MyApp).appComponent)                 .fragmentModule(FragmentModule(this))   //this#1                 .build()                 .inject(this).   //this#2"}, {"owner": {"reputation": 10162, "user_id": 430720, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/028694798d002eba1e272107640656ee?s=128&d=identicon&r=PG", "display_name": "Jaguar", "link": "https://stackoverflow.com/users/430720/jaguar"}, "edited": false, "score": 0, "creation_date": 1533085562, "post_id": 51623825, "comment_id": 90213098, "body": "Additionally I am manually creating Module instances. Is that considered a good practice? I am new to Dagger, but I haven&#39;t see any examples do that."}, {"owner": {"reputation": 1368, "user_id": 8064335, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mOgy4.jpg?s=128&g=1", "display_name": "tompee", "link": "https://stackoverflow.com/users/8064335/tompee"}, "reply_to_user": {"reputation": 10162, "user_id": 430720, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/028694798d002eba1e272107640656ee?s=128&d=identicon&r=PG", "display_name": "Jaguar", "link": "https://stackoverflow.com/users/430720/jaguar"}, "edited": false, "score": 1, "creation_date": 1533086334, "post_id": 51623825, "comment_id": 90213241, "body": "Your first question is perfectly valid because of your use case. You want to be injected with activity context that can only be generated by your fragment. As per your second question, yes it is more common to create instance of modules than singletons. In this way, you can create multiple components with different module instances."}, {"owner": {"reputation": 1368, "user_id": 8064335, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mOgy4.jpg?s=128&g=1", "display_name": "tompee", "link": "https://stackoverflow.com/users/8064335/tompee"}, "reply_to_user": {"reputation": 10162, "user_id": 430720, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/028694798d002eba1e272107640656ee?s=128&d=identicon&r=PG", "display_name": "Jaguar", "link": "https://stackoverflow.com/users/430720/jaguar"}, "edited": false, "score": 1, "creation_date": 1533086615, "post_id": 51623825, "comment_id": 90213278, "body": "An alternative way to using fragment to generate activity context is to create an ActivityComponent and add this as a dependency to your FragmentComponent. In this way, you never have to pass the fragment to the module because the ActivityComponent will provide it for you. It&#39;s completely your preference."}, {"owner": {"reputation": 1368, "user_id": 8064335, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mOgy4.jpg?s=128&g=1", "display_name": "tompee", "link": "https://stackoverflow.com/users/8064335/tompee"}, "reply_to_user": {"reputation": 10162, "user_id": 430720, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/028694798d002eba1e272107640656ee?s=128&d=identicon&r=PG", "display_name": "Jaguar", "link": "https://stackoverflow.com/users/430720/jaguar"}, "edited": false, "score": 1, "creation_date": 1533087051, "post_id": 51623825, "comment_id": 90213342, "body": "Also to expand on the module instance, one of the benefits of dependency injection framework is dependency lifecycle management and scoping. Therefore, you can create objects that can act as &quot;singletons&quot; without really employing the singleton pattern."}, {"owner": {"reputation": 10162, "user_id": 430720, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/028694798d002eba1e272107640656ee?s=128&d=identicon&r=PG", "display_name": "Jaguar", "link": "https://stackoverflow.com/users/430720/jaguar"}, "edited": false, "score": 0, "creation_date": 1533168387, "post_id": 51623825, "comment_id": 90251861, "body": "Thank you @tompee! Your comments are very helpful in understanding Dagger!!"}], "tags": [], "owner": {"reputation": 1368, "user_id": 8064335, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mOgy4.jpg?s=128&g=1", "display_name": "tompee", "link": "https://stackoverflow.com/users/8064335/tompee"}, "is_accepted": true, "score": 1, "last_activity_date": 1533083752, "creation_date": 1533083752, "answer_id": 51623825, "question_id": 51623743, "link": "https://stackoverflow.com/questions/51623743/how-to-get-component-dependencies-in-dagger-2-module-using-kotlin-on-android/51623825#51623825", "title": "How to get component dependencies in Dagger 2 module using Kotlin on Android?", "body": "<p>I think you are mistaking the <code>inject</code> method of the <code>FragmentComponent</code>. That will trigger an injection to the fragment, not injection of fragment to the component. If you want to get the context of the activity from the fragment, you have to pass it to your module during initialization.</p>\n\n<pre><code>@Module\nclass FragmentModule(val fragment : Fragment) {\n    @Provides\n    fun provideContext(): Context = fragment.context!!\n}\n</code></pre>\n"}], "owner": {"reputation": 10162, "user_id": 430720, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/028694798d002eba1e272107640656ee?s=128&d=identicon&r=PG", "display_name": "Jaguar", "link": "https://stackoverflow.com/users/430720/jaguar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 738, "favorite_count": 0, "accepted_answer_id": 51623825, "answer_count": 1, "score": 0, "last_activity_date": 1533083752, "creation_date": 1533082909, "question_id": 51623743, "link": "https://stackoverflow.com/questions/51623743/how-to-get-component-dependencies-in-dagger-2-module-using-kotlin-on-android", "title": "How to get component dependencies in Dagger 2 module using Kotlin on Android?", "body": "<p>I have a <code>Dagger2 Component</code> for <code>Fragment</code> on Android. I initialize the component by injecting the fragments dynamically. Now, I need to provide activity context to dependencies from the fragment module. I assumed writing  a provider method with Fragment as a parameter will automatically get me the Fragment reference in the module, and I can extract the context out of it. But I can't compile my code.</p>\n\n<p>The application component also offers a Context, therefore I have added a qualifier to get activity context. That shouldn't create any issues I believe. Here's my code :</p>\n\n<pre><code>@Scope\n@Retention(AnnotationRetention.RUNTIME)\nannotation class FragmentScope\n\n@FragmentScope\n@Component(modules = [FragmentModule::class],\n        dependencies = [AppComponent::class])\n\ninterface FragmentComponent {\n    fun inject(myFragment: MyFragment)\n\n    @Component.Builder\n    interface Builder {\n        fun appComponent(component: AppComponent): Builder\n        fun build(): FragmentComponent\n    }\n}\n\n@Module\nobject FragmentModule {\n    @Provides\n    @JvmStatic\n    @Named(\"Fragment\")\n    fun provideContext(myFragment: MyFragment): Context = myFragment.context!!\n}\n</code></pre>\n\n<p>Compilation Error:</p>\n\n<pre><code>[Dagger/MissingBinding] MyFragment cannot be provided without an @Inject constructor or an @Provides-annotated method. This type supports members injection but cannot be implicitly provided.\n    public abstract void inject(@org.jetbrains.annotations.NotNull()\n                         ^\n  A binding with matching key exists in component: FragmentComponent\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-room", "android-livedata"], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 8106713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a09331ae650c0709f77c96c3e45fba0?s=128&d=identicon&r=PG&f=1", "display_name": "Beuz", "link": "https://stackoverflow.com/users/8106713/beuz"}, "edited": false, "score": 0, "creation_date": 1533114279, "post_id": 51628511, "comment_id": 90222845, "body": "Thanks a ton for your answer. I was afraid this was not possible with a single query. Hopefully this will be added to Room in the future. I will go for the  first option but I don&#39;t use Rx (yet). So I will create this provider which will return LiveData&lt;List&lt;OrdersWithProducts&gt;&gt;. So I would first have to fetch the LiveData&lt;List&lt;Orders&gt;&gt; and add the LiveData&lt;List&lt;Product&gt;&gt; to each order. How would I do that?"}, {"owner": {"reputation": 3602, "user_id": 3569545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb00bcc2abeb14cf5bfacfa1013a92ad?s=128&d=identicon&r=PG&f=1", "display_name": "Demigod", "link": "https://stackoverflow.com/users/3569545/demigod"}, "reply_to_user": {"reputation": 103, "user_id": 8106713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a09331ae650c0709f77c96c3e45fba0?s=128&d=identicon&r=PG&f=1", "display_name": "Beuz", "link": "https://stackoverflow.com/users/8106713/beuz"}, "edited": false, "score": 0, "creation_date": 1533117071, "post_id": 51628511, "comment_id": 90224700, "body": "@JeroenBeuzenberg, added some example on how to achieve that. The example describes the idea beneath, so it&#39;s not purely working code. Use what you&#39;re using currently / or used to use for background threads."}, {"owner": {"reputation": 103, "user_id": 8106713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a09331ae650c0709f77c96c3e45fba0?s=128&d=identicon&r=PG&f=1", "display_name": "Beuz", "link": "https://stackoverflow.com/users/8106713/beuz"}, "edited": false, "score": 0, "creation_date": 1533117692, "post_id": 51628511, "comment_id": 90225138, "body": "Thanks for taking the time to help me. Will use this to implement it!"}, {"owner": {"reputation": 103, "user_id": 8106713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a09331ae650c0709f77c96c3e45fba0?s=128&d=identicon&r=PG&f=1", "display_name": "Beuz", "link": "https://stackoverflow.com/users/8106713/beuz"}, "edited": false, "score": 0, "creation_date": 1533218557, "post_id": 51628511, "comment_id": 90274669, "body": "I&#39;ve updated my answer to include the code based on your suggestion. I&#39;m able to fill my adapter now with the combined OrderWithProduct objects, but the values are not updated as with my other LiveData objects."}, {"owner": {"reputation": 3602, "user_id": 3569545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb00bcc2abeb14cf5bfacfa1013a92ad?s=128&d=identicon&r=PG&f=1", "display_name": "Demigod", "link": "https://stackoverflow.com/users/3569545/demigod"}, "reply_to_user": {"reputation": 103, "user_id": 8106713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a09331ae650c0709f77c96c3e45fba0?s=128&d=identicon&r=PG&f=1", "display_name": "Beuz", "link": "https://stackoverflow.com/users/8106713/beuz"}, "edited": false, "score": 0, "creation_date": 1533218655, "post_id": 51628511, "comment_id": 90274740, "body": "@Beuz, post your code. Are you using invalidation tracker to observe changes?"}, {"owner": {"reputation": 103, "user_id": 8106713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a09331ae650c0709f77c96c3e45fba0?s=128&d=identicon&r=PG&f=1", "display_name": "Beuz", "link": "https://stackoverflow.com/users/8106713/beuz"}, "edited": false, "score": 0, "creation_date": 1533230054, "post_id": 51628511, "comment_id": 90281559, "body": "In the OP you can see the code I use in my fragment to observe the changes of the LiveData in the viewmodel (the OrderWithProducts LiveDat&lt;List&gt;. In which code are you interested?"}, {"owner": {"reputation": 3602, "user_id": 3569545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb00bcc2abeb14cf5bfacfa1013a92ad?s=128&d=identicon&r=PG&f=1", "display_name": "Demigod", "link": "https://stackoverflow.com/users/3569545/demigod"}, "reply_to_user": {"reputation": 103, "user_id": 8106713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a09331ae650c0709f77c96c3e45fba0?s=128&d=identicon&r=PG&f=1", "display_name": "Beuz", "link": "https://stackoverflow.com/users/8106713/beuz"}, "edited": false, "score": 0, "creation_date": 1533281973, "post_id": 51628511, "comment_id": 90297881, "body": "That&#39;s fine, post the code of the view model and/or class which handles this data updates"}], "tags": [], "owner": {"reputation": 3602, "user_id": 3569545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb00bcc2abeb14cf5bfacfa1013a92ad?s=128&d=identicon&r=PG&f=1", "display_name": "Demigod", "link": "https://stackoverflow.com/users/3569545/demigod"}, "is_accepted": true, "score": 0, "last_activity_date": 1533116973, "last_edit_date": 1533116973, "creation_date": 1533111563, "answer_id": 51628511, "question_id": 51622474, "link": "https://stackoverflow.com/questions/51622474/room-with-livedata-many-to-many-mapping-in-adapter/51628511#51628511", "title": "Room with LiveData: Many to Many mapping in adapter", "body": "<p>As far as I know, it's not possible currently with a single query.\nTo solve this, you will need to run several queries here. At first - obtain a list of orders with a single query, and after that obtain a list of products per each order. To achieve this, I can think of several options:</p>\n\n<ol>\n<li>Make your own <code>OrdersWithProductsProvider</code>, which will return this combined entities (<code>Order</code> with <code>List&lt;Porduct&gt;</code>), and it will subscribe for the changes to <code>database</code> to emit new objects using <code>LiveData</code> on every <code>orders</code> or <code>products</code> table change.</li>\n<li>You can use a <code>MediatorLiveData</code> to fill the list of <code>Order</code>s with their <code>Product</code>s, but I don't think this is a best approach since you will need to run query in a background thread, maybe use of <code>Rx</code> is more convenient here.</li>\n</ol>\n\n<p>Personally, I would use a first option, since probably I want to obtain up-to-date list of orders with their products, which means that the update should trigger on change of three tables (<code>products</code>, <code>orders</code>, <code>products_to_orders</code>), which can be done via <code>Room.InvalidationTracker</code>. Inside that provider I would use <code>Rx</code> (which can work with <code>LiveData</code> via <code>LiveDataReactiveStreams</code>).</p>\n\n<p><strong>Addition on how to achieve that:</strong></p>\n\n<p>How to achieve that isn't really matters, the only thing - run this whole query in the background thread post it to <code>LiveData</code>. You can use <code>Executor</code>, <code>Rx</code>, or a simple <code>Thread</code>. So it will look something like:</p>\n\n<pre><code>private val database : Database // Get the DB\nprivate val executor = Executors.newSingleThreadExecutor()\nprivate val liveData = MutableLiveData&lt;List&lt;OrderWithProducts&gt;&gt;()\n\nfun observeOrdersWithProducts():LiveData&lt;List&lt;OrderWithProducts&gt;&gt; {\n    return liveData\n}\n\nprivate fun updateOrdersWithProducts() {\n    executor.post {\n        val ordersWithProducts = mutableListOf&lt;OrderWithProducts&gt;()\n        val orders = db.orders()\n        for (order : orders) {\n            val products = database.productsForOrder(order)\n            val orderWithProducts = OrderWithProducts(order, products)\n            ordersWithProducts.add(orderWithProducts)\n        }\n        liveData.post(ordersWithProducts)\n    }\n}\n</code></pre>\n\n<p>Take it as not complete working code, rather an example of implementation.\nCall <code>updateOrdersWithProducts</code> on initialization/first call and every time <code>InvalidationTracker</code> will notify about the db change.</p>\n"}], "owner": {"reputation": 103, "user_id": 8106713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a09331ae650c0709f77c96c3e45fba0?s=128&d=identicon&r=PG&f=1", "display_name": "Beuz", "link": "https://stackoverflow.com/users/8106713/beuz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 563, "favorite_count": 0, "accepted_answer_id": 51628511, "answer_count": 1, "score": 0, "last_activity_date": 1536516590, "creation_date": 1533073121, "last_edit_date": 1536516590, "question_id": 51622474, "link": "https://stackoverflow.com/questions/51622474/room-with-livedata-many-to-many-mapping-in-adapter", "title": "Room with LiveData: Many to Many mapping in adapter", "body": "<p>Lets take the following example:</p>\n\n<p>A many to many mapping exists for PRODUCTS and ORDERS. So a product can be on multiple orders and an order can have multiple products. In Room I have an entity which has both the product id and order id as foreign keys so I can save the relations. It's now very easy to get all the orders for a specific product and also all the products for a specific order.</p>\n\n<p>Now here comes the trouble. As far as I know there is no way to get the order object with all of it's products in 1 query/entity. This can be read in further detail <a href=\"https://stackoverflow.com/questions/44361824/how-can-i-represent-a-many-to-many-relation-with-android-room\">in this post.</a> In most places I can bypass this by just running two queries. The first to get the order I'm interested in, and the second to get the products based on the Id of the order.</p>\n\n<p>Now I want to display the combination of an order with its products in an adapter. For that I need to combine all my orders with their products. I'm clueless on how to solve this with LiveData.</p>\n\n<p>The best solution in my opinion would be to create one query that fetches the OrderWithProducts directly from the database. <a href=\"http://androidkt.com/database-relationships/\" rel=\"nofollow noreferrer\">This post suggests</a> it should be possible, but I've not managed to get this to work. Also the most crucial part in that example is missing: the OrderItem class.</p>\n\n<p>If that solution is not possible there must be some way to get the LiveData OrderWithProducts list with 2 queries and somehow combine them.</p>\n\n<p>EDIT\nAfter the suggestions of @Demigod now I have the following in my ViewModel:</p>\n\n<pre><code>// MediatorLiveData can observe other LiveData objects and react on their emissions.\nvar liveGroupWithLights = MutableLiveData&lt;List&lt;GroupWithLights&gt;&gt;()\n\nfun createOrdersWithProducts() {\n        appExecutors.diskIO().execute {\n            val ordersWithProducts = mutableListOf&lt;OrderWithProducts&gt;()\n            val orders = orderRepository.getGroupsSync()\n            for (order in orders) {\n                val products = productRepository.getProductsSync(order.id)\n                val orderWithProducts = OrderWithProducts(order, products)\n                ordersWithProducts.add(orderWithProducts)\n            }\n\n            liveGroupWithLights.postValue(ordersWithProducts)\n        }\n    }\n</code></pre>\n\n<p>The function inside my fragment to submit data to the adapter:</p>\n\n<pre><code>private fun initRecyclerView() {\n    orderListViewModel.getOrdersWithProducts().observe(this, Observer { result -&gt;\n        adapter.submitList(result)\n    })\n}\n</code></pre>\n\n<p>So now I'm able to have a OrderWithProduct object as the item for my adapter. This is great, I can use products for each order in my adapter. Now I'm having trouble to update these items whenever the values in the database changes. Any ideas for this part?</p>\n\n<p>Edit2: the invalidationtracker</p>\n\n<pre><code>db.invalidationTracker.addObserver(object : InvalidationTracker.Observer(\"orders\", \"products\", \"order_product_join\") {\n        override fun onInvalidated(tables: MutableSet&lt;String&gt;) {\n            createOrdersWithProducts()\n        }\n    })\n</code></pre>\n\n<p>The problem I have now is that the validation tracker gets notified a lot for a single change.</p>\n"}, {"tags": ["kotlin", "operator-overloading", "extension-methods", "extension-function"], "comments": [{"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 1, "creation_date": 1533106940, "post_id": 51621937, "comment_id": 90218756, "body": "This smells like a compiler bug. When you declare an extension fun as a member function, there are two receiver types involved: the enclosing one and the one being extended. It&#39;s probable that the compiler looks at the wrong receiver when validating it."}, {"owner": {"reputation": 4522, "user_id": 101337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fae6fc1741623270471a080b705b1fa0?s=128&d=identicon&r=PG", "display_name": "Alexander Egger", "link": "https://stackoverflow.com/users/101337/alexander-egger"}, "reply_to_user": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1533123207, "post_id": 51621937, "comment_id": 90228524, "body": "Like @MarkoTopolnik mentioned. This seems to be a compiler bug. See: <a href=\"https://youtrack.jetbrains.net/issue/KT-24800\" rel=\"nofollow noreferrer\">youtrack.jetbrains.net/issue/KT-24800</a>"}], "owner": {"reputation": 41, "user_id": 7120381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3df0b3faffbbaea7634b7a0afa32a2d4?s=128&d=identicon&r=PG&f=1", "display_name": "Quinoa42", "link": "https://stackoverflow.com/users/7120381/quinoa42"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1533070605, "creation_date": 1533070605, "question_id": 51621937, "link": "https://stackoverflow.com/questions/51621937/why-inc-cannot-be-defined-as-an-extension-function-in-a-class-different-from-t", "title": "Why inc() cannot be defined as an extension function in a class different from the receiver type?", "body": "<p>This is what I encountered when I was doing Koan N28:</p>\n\n<pre><code>class DateRange(override val start: MyDate, override val endInclusive: MyDate) : ClosedRange&lt;MyDate&gt;, Iterable&lt;MyDate&gt; {\n\n    private operator fun MyDate.inc() : MyDate {\n        return this.nextDay()\n    }\n\n    override fun iterator(): Iterator&lt;MyDate&gt; {\n        return object : Iterator&lt;MyDate&gt; {\n            private var point = start\n\n            override fun hasNext(): Boolean {\n                return point &lt;= endInclusive\n            }\n\n            override fun next(): MyDate {\n                return if (hasNext()) point++ else throw NoSuchElementException()\n            }\n\n\n        }\n    }\n}\n</code></pre>\n\n<p>However, the compiler yelled at the <code>operator</code> position, saying that <code>'operator' modifier is inapplicable on this function: receiver must be a supertype of the return type</code>. In order to let the code compile I have to move the extension function to the top level. But if instead I overload the <code>MyDate.unaryPlus()</code> at the same place, the code does compile. </p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 171740, "user_id": 869736, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/671f732e3c68c387c702112a30e5ebd8?s=128&d=identicon&r=PG&f=1", "display_name": "Louis Wasserman", "link": "https://stackoverflow.com/users/869736/louis-wasserman"}, "edited": false, "score": 0, "creation_date": 1533069950, "post_id": 51621777, "comment_id": 90209085, "body": "How would you <i>use</i> such a variable?"}, {"owner": {"reputation": 2242, "user_id": 1394710, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0da2f1f5c2e83c6a2fd2291f28651175?s=128&d=identicon&r=PG", "display_name": "HelloWorld", "link": "https://stackoverflow.com/users/1394710/helloworld"}, "reply_to_user": {"reputation": 171740, "user_id": 869736, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/671f732e3c68c387c702112a30e5ebd8?s=128&d=identicon&r=PG&f=1", "display_name": "Louis Wasserman", "link": "https://stackoverflow.com/users/869736/louis-wasserman"}, "edited": false, "score": 0, "creation_date": 1533070007, "post_id": 51621777, "comment_id": 90209111, "body": "@LouisWasserman type testing, then invoking :)"}], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 0, "last_activity_date": 1533070075, "creation_date": 1533070075, "answer_id": 51621835, "question_id": 51621777, "link": "https://stackoverflow.com/questions/51621777/how-to-assign-functions-with-variable-number-of-parameters-to-single-variable/51621835#51621835", "title": "How to assign functions with variable number of parameters to single variable?", "body": "<p>You can use <code>Function&lt;Unit&gt;</code> as such a base type. See the <a href=\"http://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-function.html\" rel=\"nofollow noreferrer\">documentation</a> for more information.</p>\n"}], "owner": {"reputation": 2242, "user_id": 1394710, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0da2f1f5c2e83c6a2fd2291f28651175?s=128&d=identicon&r=PG", "display_name": "HelloWorld", "link": "https://stackoverflow.com/users/1394710/helloworld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 51621835, "answer_count": 1, "score": 0, "last_activity_date": 1533070075, "creation_date": 1533069783, "question_id": 51621777, "link": "https://stackoverflow.com/questions/51621777/how-to-assign-functions-with-variable-number-of-parameters-to-single-variable", "title": "How to assign functions with variable number of parameters to single variable?", "body": "<p>Experimenting with Kotlin, I wish to assign functions/lambdas to a variable.</p>\n\n<p>These functions/lambdas all have a <em>variable</em> (zero or more) number of parameters, and they all return nothing (a <code>Unit</code>).</p>\n\n<p>Here are examples of some valid functions/lambdas:</p>\n\n<pre><code>a: Int -&gt; Unit\na: String, b: Int -&gt; Unit\n() -&gt; Unit\n</code></pre>\n\n<p>(e.g. zero or more parameters returning a <code>Unit</code>)</p>\n\n<p>How can I declare such a variable?</p>\n\n<p>I tried with:</p>\n\n<pre><code>var test: KCallable&lt;Unit&gt; = { var a = 1 } // COMPILE ERROR\n</code></pre>\n\n<p>but it seems <code>() -&gt; Unit</code> is not compatible with <code>KCallable&lt;Unit&gt;</code>, so I assume I'm using the wrong interface. What is the correct one? (except for <code>Any</code>)</p>\n"}, {"tags": ["android", "android-studio", "android-fragments", "kotlin", "android-viewpager"], "comments": [{"owner": {"reputation": 4391, "user_id": 3106174, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/mKAhl.jpg?s=128&g=1", "display_name": "Advice-Dog", "link": "https://stackoverflow.com/users/3106174/advice-dog"}, "edited": false, "score": 0, "creation_date": 1533068875, "post_id": 51621508, "comment_id": 90208566, "body": "How are you using your <code>AllButtons</code> class? It seems like you&#39;re just building a <code>View</code> within your <code>Adapter</code>, but not using the <code>AllButtons</code> class."}, {"owner": {"reputation": 33, "user_id": 9941187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca7e1ff725d66c8c4123cfc397072f8a?s=128&d=identicon&r=PG&f=1", "display_name": "Aniskonig", "link": "https://stackoverflow.com/users/9941187/aniskonig"}, "reply_to_user": {"reputation": 4391, "user_id": 3106174, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/mKAhl.jpg?s=128&g=1", "display_name": "Advice-Dog", "link": "https://stackoverflow.com/users/3106174/advice-dog"}, "edited": false, "score": 0, "creation_date": 1533068934, "post_id": 51621508, "comment_id": 90208595, "body": "i&#39;m beginner please tell me what to do ?"}, {"owner": {"reputation": 4391, "user_id": 3106174, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/mKAhl.jpg?s=128&g=1", "display_name": "Advice-Dog", "link": "https://stackoverflow.com/users/3106174/advice-dog"}, "edited": false, "score": 0, "creation_date": 1533069306, "post_id": 51621508, "comment_id": 90208774, "body": "Give me a few mins."}, {"owner": {"reputation": 33, "user_id": 9941187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca7e1ff725d66c8c4123cfc397072f8a?s=128&d=identicon&r=PG&f=1", "display_name": "Aniskonig", "link": "https://stackoverflow.com/users/9941187/aniskonig"}, "reply_to_user": {"reputation": 4391, "user_id": 3106174, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/mKAhl.jpg?s=128&g=1", "display_name": "Advice-Dog", "link": "https://stackoverflow.com/users/3106174/advice-dog"}, "edited": false, "score": 0, "creation_date": 1533069536, "post_id": 51621508, "comment_id": 90208897, "body": "take your time please just don&#39;t forget me ^_^"}, {"owner": {"reputation": 4391, "user_id": 3106174, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/mKAhl.jpg?s=128&g=1", "display_name": "Advice-Dog", "link": "https://stackoverflow.com/users/3106174/advice-dog"}, "edited": false, "score": 0, "creation_date": 1533075691, "post_id": 51621508, "comment_id": 90211075, "body": "Did those answers help you?"}, {"owner": {"reputation": 33, "user_id": 9941187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca7e1ff725d66c8c4123cfc397072f8a?s=128&d=identicon&r=PG&f=1", "display_name": "Aniskonig", "link": "https://stackoverflow.com/users/9941187/aniskonig"}, "reply_to_user": {"reputation": 4391, "user_id": 3106174, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/mKAhl.jpg?s=128&g=1", "display_name": "Advice-Dog", "link": "https://stackoverflow.com/users/3106174/advice-dog"}, "edited": false, "score": 0, "creation_date": 1533116359, "post_id": 51621508, "comment_id": 90224175, "body": "i tried the two solutions and they give me a lot of errors"}, {"owner": {"reputation": 33, "user_id": 9941187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca7e1ff725d66c8c4123cfc397072f8a?s=128&d=identicon&r=PG&f=1", "display_name": "Aniskonig", "link": "https://stackoverflow.com/users/9941187/aniskonig"}, "reply_to_user": {"reputation": 4391, "user_id": 3106174, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/mKAhl.jpg?s=128&g=1", "display_name": "Advice-Dog", "link": "https://stackoverflow.com/users/3106174/advice-dog"}, "edited": false, "score": 0, "creation_date": 1533138878, "post_id": 51621508, "comment_id": 90239551, "body": "i added a sample of the project to github please check it @Advice-Dog"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 9941187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca7e1ff725d66c8c4123cfc397072f8a?s=128&d=identicon&r=PG&f=1", "display_name": "Aniskonig", "link": "https://stackoverflow.com/users/9941187/aniskonig"}, "edited": false, "score": 0, "creation_date": 1533116689, "post_id": 51621818, "comment_id": 90224415, "body": "it give me an error on A_function / b_Function and C_Function"}, {"owner": {"reputation": 33, "user_id": 9941187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca7e1ff725d66c8c4123cfc397072f8a?s=128&d=identicon&r=PG&f=1", "display_name": "Aniskonig", "link": "https://stackoverflow.com/users/9941187/aniskonig"}, "edited": false, "score": 0, "creation_date": 1533138840, "post_id": 51621818, "comment_id": 90239527, "body": "i added a sample of the project to github please check it"}], "tags": [], "owner": {"reputation": 2179, "user_id": 5152910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76a13b628cdc540e23692a77fcc63bd9?s=128&d=identicon&r=PG&f=1", "display_name": "insa_c", "link": "https://stackoverflow.com/users/5152910/insa-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1533069979, "creation_date": 1533069979, "answer_id": 51621818, "question_id": 51621508, "link": "https://stackoverflow.com/questions/51621508/how-can-i-add-button-fragments-viewpager-using-kotlin/51621818#51621818", "title": "how can i add button Fragments,ViewPager using kotlin", "body": "<p>First of all you aren't using the <code>AllButtons</code> activity in your view pager, you're just using the layout and inflating it on the <code>CustomPagerAdapter</code> and since you're not using the activity, the click listener on the home button is not set. </p>\n\n<ul>\n<li><p>A couple of important thing to know. Go through the android <a href=\"https://developer.android.com/training/implementing-navigation/lateral\" rel=\"nofollow noreferrer\">view pager documentation</a>. As you can see on that page you can only add fragments to a view pager. So you need to convert your <code>AllButtons</code> to a <code>Fragment</code>. Then set the click listener on the <code>onViewCreated</code> method of the <code>Fragment</code>.</p>\n\n   <pre><code>class AllButtonsFragment: Fragment() { \n     override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n        val root = inflater.inflate(R.layout.activity_l1_page, container, false)\n\n        return root\n     }\n\n     override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n        super.onViewCreated(view, savedInstanceState)\n        home.setOnClickListener {\n            val intent = Intent(this, MainActivity::class.java)\n            startActivity(intent)\n        }\n     }\n}\n</code></pre></li>\n</ul>\n\n<p>And then on your view pager adapter create an instance of the fragment (achieve this by creating a static function on the <code>Fragment</code> called <code>newInstance()</code> for a good practise) and return the appropriate fragment on the <code>instantiateItem</code> function depending on the position.</p>\n\n<pre><code>    override fun instantiateItem(collection: ViewGroup, position: Int): Any {\n\n         return when (position) {\n             0 -&gt; A_FUNCTION.newInstance()\n             1 -&gt; B_FUNCTION.newInstance()\n             else -&gt; C_FUNCTION.newInstance()\n         }\n    }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 9941187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca7e1ff725d66c8c4123cfc397072f8a?s=128&d=identicon&r=PG&f=1", "display_name": "Aniskonig", "link": "https://stackoverflow.com/users/9941187/aniskonig"}, "edited": false, "score": 0, "creation_date": 1533118010, "post_id": 51621841, "comment_id": 90225340, "body": "it give me an error on the AllButtonFragment in :         return setContentView(layout)"}, {"owner": {"reputation": 33, "user_id": 9941187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca7e1ff725d66c8c4123cfc397072f8a?s=128&d=identicon&r=PG&f=1", "display_name": "Aniskonig", "link": "https://stackoverflow.com/users/9941187/aniskonig"}, "edited": false, "score": 0, "creation_date": 1533118102, "post_id": 51621841, "comment_id": 90225393, "body": "and in Intent()"}, {"owner": {"reputation": 33, "user_id": 9941187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca7e1ff725d66c8c4123cfc397072f8a?s=128&d=identicon&r=PG&f=1", "display_name": "Aniskonig", "link": "https://stackoverflow.com/users/9941187/aniskonig"}, "edited": false, "score": 0, "creation_date": 1533138837, "post_id": 51621841, "comment_id": 90239521, "body": "i added a sample of the project to github please check it"}, {"owner": {"reputation": 4391, "user_id": 3106174, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/mKAhl.jpg?s=128&g=1", "display_name": "Advice-Dog", "link": "https://stackoverflow.com/users/3106174/advice-dog"}, "reply_to_user": {"reputation": 33, "user_id": 9941187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca7e1ff725d66c8c4123cfc397072f8a?s=128&d=identicon&r=PG&f=1", "display_name": "Aniskonig", "link": "https://stackoverflow.com/users/9941187/aniskonig"}, "edited": false, "score": 0, "creation_date": 1533160439, "post_id": 51621841, "comment_id": 90249957, "body": "Ok, I made a few mistakes. I fixed them up, and I even make a pull request for your repo with the changes. It should now all work. I&#39;ve updated my answer to reflect those code changes."}, {"owner": {"reputation": 33, "user_id": 9941187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca7e1ff725d66c8c4123cfc397072f8a?s=128&d=identicon&r=PG&f=1", "display_name": "Aniskonig", "link": "https://stackoverflow.com/users/9941187/aniskonig"}, "edited": false, "score": 0, "creation_date": 1533163056, "post_id": 51621841, "comment_id": 90250670, "body": "thank you i&#39;ll check it tomorrow and tell you what&#39;s happen ^_^ thanks again"}], "tags": [], "owner": {"reputation": 4391, "user_id": 3106174, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/mKAhl.jpg?s=128&g=1", "display_name": "Advice-Dog", "link": "https://stackoverflow.com/users/3106174/advice-dog"}, "is_accepted": true, "score": 0, "last_activity_date": 1533160405, "last_edit_date": 1533160405, "creation_date": 1533070134, "answer_id": 51621841, "question_id": 51621508, "link": "https://stackoverflow.com/questions/51621508/how-can-i-add-button-fragments-viewpager-using-kotlin/51621841#51621841", "title": "how can i add button Fragments,ViewPager using kotlin", "body": "<p>I rewrote your code a bit, I'll explain some tips and suggestions on how to improve.</p>\n\n<p>First, always add <code>Actvitiy</code> or <code>Fragment</code> to the end of your <code>Activities</code> or <code>Fragments</code>, this will help make things a lot easier to understand.</p>\n\n<pre><code>class LicenseActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_license)\n\n        // You can simply use the id of the View here.\n        view_pager.adapter = CustomPagerAdapter(supportFragmentManager)\n    }\n}\n</code></pre>\n\n<p>Next, I changed your <code>AllButtons</code> <code>Activity</code> into a <code>Fragment</code>.</p>\n\n<p>This code is a bit more complex, but it's using a very common pattern, the <code>newInstance</code> pattern. To create a new <code>Fragment</code>, you want to make a static method that will return a <code>Fragment</code> with your values passed into the <code>arguments</code>.</p>\n\n<p>So, to explain it a bit more. You make a function called <code>newInstance</code> that takes the information this <code>Fragment</code> should be aware of, in this case, the layout we want it to show.</p>\n\n<p>Next, you create a <code>Bundle</code>, and put the layout into it.</p>\n\n<p>And then lastly you assign your <code>Fragment</code>'s arguments to the <code>Bundle</code>.</p>\n\n<p>This is the safest way to create <code>Fragments</code>.</p>\n\n<pre><code>class AllButtonsFragment : Fragment() {\n\n    companion object {\n        private const val EXTRA_COLOR = \"EXTRA_COLOR\"\n        private const val EXTRA_LAYOUT = \"EXTRA_LAYOUT\"\n\n        fun newInstance(modelObject: ModelObject): Fragment {\n            val fragment = AllButtonsFragment()\n\n            // Creating a Bundle with the various values we want to pass, such as the color and layout.\n            val bundle = Bundle()\n            bundle.putInt(EXTRA_COLOR, modelObject.titleResId)\n            bundle.putInt(EXTRA_LAYOUT, modelObject.layoutResId)\n            fragment.arguments = bundle\n\n            return fragment\n        }\n    }\n\n    // Getting the layout from the arguments to inflate the View.\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n        val layout = arguments?.getInt(EXTRA_LAYOUT)\n                ?: throw IllegalStateException(\"arguments does not contain a layout.\")\n        return inflater.inflate(layout, container, false)\n    }\n\n    override fun onViewCreated(view: View?, savedInstanceState: Bundle?) {\n        super.onViewCreated(view, savedInstanceState)\n\n        val color = arguments?.getInt(EXTRA_COLOR)\n        // TODO: Do whatever with your colour.\n\n        // Using findViewById since this isn't on every layout.\n        view?.findViewById&lt;View&gt;(R.id.Home)?.setOnClickListener {\n            val intent = Intent(context, MainActivity::class.java)\n            startActivity(intent)\n        }\n    }\n}\n</code></pre>\n\n<p>Next, I rewrote your <code>Adapter</code> to work with <code>Fragments</code>. This will just get the position of the page, pass it to our <code>newInstance</code> function, and get a <code>Fragment</code> for you.</p>\n\n<pre><code>class CustomPagerAdapter(fm: FragmentManager) : FragmentStatePagerAdapter(fm) {\n\n    override fun getItem(position: Int): Fragment {\n        val modelObject = ModelObject.values()[position]\n        // Creating a new instance of our Fragment with this Model Object.\n        return AllButtonsFragment.newInstance(modelObject)\n    }\n\n    override fun getCount() = ModelObject.values().size\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 9941187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca7e1ff725d66c8c4123cfc397072f8a?s=128&d=identicon&r=PG&f=1", "display_name": "Aniskonig", "link": "https://stackoverflow.com/users/9941187/aniskonig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1129, "favorite_count": 0, "accepted_answer_id": 51621841, "answer_count": 2, "score": 0, "last_activity_date": 1533204978, "creation_date": 1533068620, "last_edit_date": 1533204978, "question_id": 51621508, "link": "https://stackoverflow.com/questions/51621508/how-can-i-add-button-fragments-viewpager-using-kotlin", "title": "how can i add button Fragments,ViewPager using kotlin", "body": "<p>I want to add a button (id='Home') which take me to the main activity i use those codes but it is not reacting, this is a sample of my project in GITHUB please check it  from <a href=\"https://github.com/Aniskonig/ViewPagerwithSwipeAnimationinAndroid.git\" rel=\"nofollow noreferrer\">HERE</a> ( the problem has been fixed by @advice-dog , it has been added to the this project) </p>\n\n<p><strong>in layout of the ViewPager I have :</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.constraint.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:id=\"@+id/bg2\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"vertical\"\n    android:theme=\"@style/AppFullScreenTheme\"\n    tools:context=\".License\"&gt;\n\n\n    &lt;android.support.v4.view.ViewPager\n        android:id=\"@+id/view_pager\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:visibility=\"visible\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\" /&gt;\n\n&lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n\n<p><strong>in there class I have:</strong> </p>\n\n<pre><code>package com.medanis.fneclis\n\n\nimport android.content.Intent\nimport android.support.v7.app.AppCompatActivity\nimport android.os.Bundle\nimport android.support.v4.view.ViewPager\nimport kotlinx.android.synthetic.main.activity_license.*\n\n\nclass License : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_license)\n        val viewPager = findViewById&lt;ViewPager&gt;(R.id.view_pager)\n        viewPager.adapter = CustomPagerAdapter(this)\n\n    }\n}\n</code></pre>\n\n<p><strong>in the first PAGE of the ViewPager where I have the button Home:</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.constraint.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:id=\"@+id/l1_bg\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:background=\"@drawable/fneclis_l1_bg\"\n    tools:context=\".AllButtons\"&gt;\n\n\n    &lt;Button\n        android:id=\"@+id/Home\"\n        android:layout_width=\"56dp\"\n        android:layout_height=\"53dp\"\n        android:layout_marginBottom=\"523dp\"\n        android:layout_marginEnd=\"312dp\"\n        android:layout_marginLeft=\"16dp\"\n        android:layout_marginRight=\"312dp\"\n        android:layout_marginStart=\"16dp\"\n        android:layout_marginTop=\"16dp\"\n        android:background=\"@drawable/ic_home_black_24dp\"\n        android:contentDescription=\"@string/todo\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\" /&gt;\n&lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n\n<p>which is related to the class AllButtons (I want to use it in the most pages of the ViewPage but not all of them):</p>\n\n<pre><code>package com.medanis.fneclis\n\nimport android.content.Intent \nimport android.os.Bundle \nimport android.support.v7.app.AppCompatActivity \nimport kotlinx.android.synthetic.main.activity_l1_page.*\n\nclass AllButtons: AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n       setContentView(R.layout.activity_l1_page)\n\n// those are some other pages which contains the same button and they are inside the ViewPager\n           /* setContentView(R.layout.activity_l2_page)\n            setContentView(R.layout.activity_l3_page)\n            setContentView(R.layout.activity_m1page)\n            setContentView(R.layout.activity_m2page)*/\n\n        Home.setOnClickListener{\n            val intent = Intent(this, MainActivity::class.java)\n            startActivity(intent)\n        }\n    } }\n</code></pre>\n\n<p>THe ADAPTER :</p>\n\n<pre><code>package com.medanis.fneclis\n\nimport android.app.Activity\nimport android.content.Context\nimport android.support.v4.view.PagerAdapter\nimport android.view.LayoutInflater\nimport android.view.View\nimport android.view.ViewGroup\n\nclass CustomPagerAdapter(private val mContext: Context) : PagerAdapter() {\n\n    override fun instantiateItem(collection: ViewGroup, position: Int): Any {\n        val modelObject = ModelObject.values()[position]\n        val inflater = LayoutInflater.from(mContext)\n        val viewGroup = inflater.inflate(modelObject.titleResId, collection, false) as ViewGroup\n        collection.addView(viewGroup)\n        return viewGroup\n    }\n\n    override fun destroyItem(collection: ViewGroup, position: Int, view: Any) {\n        collection.removeView(view as View)\n    }\n\n    override fun getCount(): Int {\n        return ModelObject.values().size\n    }\n\n    override fun isViewFromObject(view: View, `object`: Any): Boolean {\n\n        return view === `object`\n    }\n\n    override fun getPageTitle(position: Int): CharSequence {\n        val customPagerEnum = ModelObject.values()[position]\n        return mContext.getString(customPagerEnum.titleResId)\n    }\n\n    override fun getItemPosition(`object`: Any): Int {\n        return super.getItemPosition(`object`)\n    }\n}\n</code></pre>\n\n<p>ModelObject :</p>\n\n<pre><code>package com.medanis.fneclis\n\nenum class ModelObject private constructor(val titleResId: Int ) {\n\n    LICENSEONE(R.layout.activity_l1_page),\n    PAGEONE(R.layout.activity_l1s1page),\n    PAGETWO(R.layout.activity_l1s2page),\n\n    LICENSETWO(R.layout.activity_l2_page),\n    PAGETHREE(R.layout.activity_l2_s3page),\n    PAGEFOUR(R.layout.activity_l2_s4page),\n\n    LICENSETHREE(R.layout.activity_l3_page),\n    PAGEFIVE(R.layout.activity_l3_s5page),\n    PAGESIX(R.layout.activity_l3_s6page),\n\n}\n</code></pre>\n"}, {"tags": ["java", "android", "android-studio", "gradle", "kotlin"], "comments": [{"owner": {"reputation": 658, "user_id": 3609883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2824eaf8b55ce67403b31ea42c4134a1?s=128&d=identicon&r=PG&f=1", "display_name": "Crammeur", "link": "https://stackoverflow.com/users/3609883/crammeur"}, "edited": false, "score": 0, "creation_date": 1533067886, "post_id": 51621301, "comment_id": 90208131, "body": "Do you try <code>Invalidate Cache &#47; Restart</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8959091"}, "edited": false, "score": 4, "creation_date": 1533068094, "post_id": 51621301, "comment_id": 90208212, "body": "Sometimes this problem goes away simply by Build, if your project is error free"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8959091"}, "edited": false, "score": 1, "creation_date": 1533152705, "post_id": 51621301, "comment_id": 90246836, "body": "Do you know that in Kotlin you don&#39;t need findViewById in your activities?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8959091"}, "edited": false, "score": 0, "creation_date": 1533152916, "post_id": 51621301, "comment_id": 90246924, "body": "Yes _____________"}], "answers": [{"tags": [], "owner": {"reputation": 103, "user_id": 10084714, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-W4lLLvYiBHE/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7q8JPDsVIl3z05akDsbK7y_bbNi0w/mo/photo.jpg?sz=128", "display_name": "Earl Whitney", "link": "https://stackoverflow.com/users/10084714/earl-whitney"}, "is_accepted": false, "score": 0, "last_activity_date": 1534980246, "creation_date": 1534980246, "answer_id": 51976448, "question_id": 51621301, "link": "https://stackoverflow.com/questions/51621301/android-studio-3-1-3-unresolved-reference-r-kotlin/51976448#51976448", "title": "Android Studio 3.1.3 - Unresolved reference: R - Kotlin", "body": "<p>This worked for me.  How much work it is depends on how big your project is.  I started a new project, created the required modules (XML, Kotlin, colors, strings, etc.), then copied the code into the modules in the new project from the modules in the old project.  Copying XML saves a lot of time compared to recreating the UI.  All in all, it take a little while, but I have spent much more time tring to fix the unresolved reference error without it.</p>\n"}, {"comments": [{"owner": {"reputation": 4555, "user_id": 413594, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XsOcZ.jpg?s=128&g=1", "display_name": "k-thorat", "link": "https://stackoverflow.com/users/413594/k-thorat"}, "edited": false, "score": 0, "creation_date": 1539901487, "post_id": 52248013, "comment_id": 92680195, "body": "If you don&#39;t see Gradle menu on right. Check Android MenuBar -&gt; View-&gt; Tool Windows -&gt; Gradle"}, {"owner": {"reputation": 22949, "user_id": 6998684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqR2Z.jpg?s=128&g=1", "display_name": "IgorGanapolsky", "link": "https://stackoverflow.com/users/6998684/igorganapolsky"}, "edited": false, "score": 0, "creation_date": 1549045804, "post_id": 52248013, "comment_id": 95777353, "body": "You can also do this from commandline: <code>rm -rf .gradle | rm -rf build&#47; | .&#47;gradlew assemble</code>"}], "tags": [], "owner": {"reputation": 493, "user_id": 2447618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a6fe8292af21f45eb39ea6ddf1d99bb?s=128&d=identicon&r=PG", "display_name": "Fireworks", "link": "https://stackoverflow.com/users/2447618/fireworks"}, "is_accepted": false, "score": 9, "last_activity_date": 1539855945, "last_edit_date": 1539855945, "creation_date": 1536521628, "answer_id": 52248013, "question_id": 51621301, "link": "https://stackoverflow.com/questions/51621301/android-studio-3-1-3-unresolved-reference-r-kotlin/52248013#52248013", "title": "Android Studio 3.1.3 - Unresolved reference: R - Kotlin", "body": "<p>Use gradle commands.<br>\nIn Android Studio, on the right menu:<br>\n<code>Gradle -&gt; :app -&gt; Tasks -&gt; build -&gt; clean</code>.<br>\nAfter that, <code>Gradle -&gt; :app -&gt; Tasks -&gt; build -&gt; build</code></p>\n"}, {"comments": [{"owner": {"reputation": 2965, "user_id": 1223747, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/303f6a190f252cfeac02ee38da171556?s=128&d=identicon&r=PG", "display_name": "Subodh Nijsure", "link": "https://stackoverflow.com/users/1223747/subodh-nijsure"}, "edited": false, "score": 2, "creation_date": 1540166407, "post_id": 52854447, "comment_id": 92751260, "body": "Yup reverting to 3.3.0-alpha13 stable 3.2.1 fixed the issue!"}, {"owner": {"reputation": 1526, "user_id": 1920670, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3e4c44d78b9654baf65100088deafc04?s=128&d=identicon&r=PG&f=1", "display_name": "MainActivity", "link": "https://stackoverflow.com/users/1920670/mainactivity"}, "edited": false, "score": 0, "creation_date": 1552746236, "post_id": 52854447, "comment_id": 97132884, "body": "Still actual for 3.3.1 stable. Needed to change to 3.2.1 and R is resolved. App was compiling but R was not imported, while Kotlin extensions worked OK."}], "tags": [], "owner": {"reputation": 523, "user_id": 1035669, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3c4486dceea153a460f8880273010aa9?s=128&d=identicon&r=PG", "display_name": "martomstom", "link": "https://stackoverflow.com/users/1035669/martomstom"}, "is_accepted": false, "score": 28, "last_activity_date": 1539777785, "creation_date": 1539777785, "answer_id": 52854447, "question_id": 51621301, "link": "https://stackoverflow.com/questions/51621301/android-studio-3-1-3-unresolved-reference-r-kotlin/52854447#52854447", "title": "Android Studio 3.1.3 - Unresolved reference: R - Kotlin", "body": "<p>I used com.android.tools.build:gradle:3.3.0-alpha13 and had the same issue. Changing to stable Version 3.2.1 solved this problem for me.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10512100, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8XJJ0hsKz8A/AAAAAAAAAAI/AAAAAAAAAJQ/P-oQY_S8M08/photo.jpg?sz=128", "display_name": "PRANAY REDDY", "link": "https://stackoverflow.com/users/10512100/pranay-reddy"}, "is_accepted": false, "score": 0, "last_activity_date": 1540555755, "last_edit_date": 1540555755, "creation_date": 1540543214, "answer_id": 53004786, "question_id": 51621301, "link": "https://stackoverflow.com/questions/51621301/android-studio-3-1-3-unresolved-reference-r-kotlin/53004786#53004786", "title": "Android Studio 3.1.3 - Unresolved reference: R - Kotlin", "body": "<p>TRY THIS</p>\n\n<p>Go to the content_main.xml file and there you need to change the</p>\n\n<p><code>android:id=\"@+id/??????\"&gt;</code>  line of code to whatever id you have given to your file.</p>\n\n<p>Replace question mark <code>??????</code> with the related file id name.(IF you dont know the id go to the design tab on the bottom and click on the related Asset.</p>\n\n<p>On the right side below attributes, you can find the ID you have given to it.\nIf it is blank you can freshly name it and Android Studio will write the code.</p>\n\n<p>Then restart Android Studio. Hope this will help. Happy coding.</p>\n"}, {"comments": [{"owner": {"reputation": 2383, "user_id": 444100, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/428d6aad29eca8303ec11fa17172d830?s=128&d=identicon&r=PG", "display_name": "tobltobs", "link": "https://stackoverflow.com/users/444100/tobltobs"}, "edited": false, "score": 0, "creation_date": 1574115061, "post_id": 53010120, "comment_id": 104108753, "body": "A bit long, you might add a tl;dr that looking at the gradle log output will help to find the real cause."}], "tags": [], "owner": {"reputation": 4939, "user_id": 1801072, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k6sEG.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1801072/sam"}, "is_accepted": false, "score": 11, "last_activity_date": 1596666936, "last_edit_date": 1596666936, "creation_date": 1540561386, "answer_id": 53010120, "question_id": 51621301, "link": "https://stackoverflow.com/questions/51621301/android-studio-3-1-3-unresolved-reference-r-kotlin/53010120#53010120", "title": "Android Studio 3.1.3 - Unresolved reference: R - Kotlin", "body": "<p>So this is a misleading error.\nThe fastest way to get to the root cause is to run:</p>\n<pre><code>bash gradlew assembleDebug --debug\n</code></pre>\n<p>then scroll up and look for the real error happening.</p>\n<p>However, if it still doesn't seem like you have the answer you are looking for, then read on.</p>\n<p>I'm going to explain the 30,000 foot view of what is happening. This is not EXACT order or EXACT flow, it is just pretty damn close ;) so if you know more then I do of the exact order and care to make corrections with links, feel free I won't stop ya :).</p>\n<p><strong>The Process</strong></p>\n<blockquote>\n<p>The R file is generated code.</p>\n<p>There is an order to the generation.</p>\n<p>Gradle will do it's magic, pull it's dependencies and kick off it's\nwarning and error tree first,</p>\n<p>then Android converts all Kotlin to Java behind the scenes. Yup that's\nright, our beloved Kotlin still has to be Java to compile for our\nbeloved ART virtual machine.</p>\n<p>Then it runs through and does the adapters that you have created for\nJVM Statics and a few other tasks.\nNext up it compiles all the xml databinding files first to create the\ngenerated databinding files.</p>\n<p>If everything succeeds it moves on to processing the assets and\nresources. Which creates pointers or IDs for each resource that you\nreference in code.    Next it will run through and begin compiling the\ncode and packaging process after that.</p>\n</blockquote>\n<p>Pretty straight forward process, but here in lies the problem.</p>\n<p><em><strong>The misleading Error</strong></em></p>\n<p>If any step fails before the R generation is complete, then the R does not get generated. Sometimes a simple rebuild is all you need to do, sometimes a simple File-&gt;Invalidate Cache and Restart is all you need. However, more often than not you have a code issue in your gradle, your xml, your databinding or your adapters that are preventing the compiler from even reaching the R generation stage.</p>\n<p><strong>So the next question is</strong></p>\n<blockquote>\n<p>&quot;Well shoot, how do we troubleshoot it if the errors are worthless or\nnon-existent&quot;.</p>\n</blockquote>\n<p>Well first let's talk about the many ways these errors present themselves.</p>\n<ul>\n<li>Duplicate Databinding class found</li>\n<li>xml Binding Error at line #</li>\n<li>Couldn't find matching signature of bind:customAdapterMethod</li>\n<li>Can't find R file of the correct project, only shows import options for sub modules or incorrect namespace R files.</li>\n<li>Couldn't find DataBindingUtility or DataBinding for activity/fragment</li>\n<li>And many other various ways as well, too many to list them all</li>\n</ul>\n<p>Next, let's talk about potential candidates causing the problem. As there are sooo many lol.</p>\n<ul>\n<li>Gradle Syncing issues</li>\n<li>Bad versions of Gradle or Tools, you may have gone too far forward in your last gradle file modification. Try stepping back one version and &quot;invalidate cache and restart&quot; if that fixed it, great, if not, read on.</li>\n<li>Caching Issues (File-&gt;Restart and Invalidate Cache)</li>\n<li>xml elements with wrong namespace</li>\n<li>xml elements with bad IDs or references IDs out of order (i.e. you say align to right of an element that is lower in the xml document then the sibling element that is trying to reference it)</li>\n<li>xml data binding issues referencing namespace or member that doesn't exist or is not typed correctly</li>\n<li>xml data binding issues in non-auto-filled spots like custom attributes using adapters as those are harder to spot. i.e. bind:myCustomMethod=@&quot;myObject.mistypedProperty()&quot;</li>\n<li>JVM Static adapters with issues or duplicated signatures</li>\n<li>Duplicated or bad character in the Strings or Dimens file or any other xml file for that matter</li>\n<li>Private variable marked for @Binding without properties to access it</li>\n<li>Member variable marked for @Binding that matches a parent class method causing duplications that manifests itself in almost impossible errors</li>\n<li>Mismatch of types like using an adapter that takes (Int) but you are passing (Int?) via data binding and it isn't recognized with JVM Statics until compile time</li>\n<li>You selected IMPORT on a popup to import R file of a sub module instead of the application file</li>\n<li>Having bindable members in a child or parent class, but not giving fully qualified namespace to class cast in the XML usage of the parent or child class. As the databinding compiler is not smart enough to realize the variable provided for class Foo is also parentFoo baseclass, so you have to qualify it as android:text=&quot;@((com.path.parentFoo)foo).parentMethod&quot;</li>\n<li>Having a method name in a class, that matches a &quot;generated property from @Binding member variable&quot; i.e. firstName as a variable, but then having a method called getFirstName in a parent or child class, because you are now matching a method name that will get auto generated, thus causing dataBindingUtility duplication class errors.</li>\n<li>There are more causes, but this should give you a series of places to look, but the list can go on and on seriously.</li>\n</ul>\n<p>Unfortunately this happens a lot in bleeding edge technologies where the UI tools are not up to speed with the terminal based tools yet. So I suggest you run from the project root in a terminal with</p>\n<pre><code>bash gradlew assembleDebug --debug\n</code></pre>\n<p>When it fails, and it will. Start scrolling up through the logs until you find the red where you see what is actually failing and preventing the next stage from occurring.</p>\n<p>You will find this especially useful when you start dealing with databinding.</p>\n<p><strong>TIP:</strong></p>\n<p>When you start dealing with databinding, make sure you compile and run often because the goal is to recognize right away before doing other files to make sure you didn't break generation and make your life MUCH easier to know code you just added caused the issue before getting too far.</p>\n<p>Times to compile and run to confirm no issues before moving on.</p>\n<ul>\n<li>If you add a few JVM statics compile and run</li>\n<li>If you add variables to your XML to use</li>\n<li>If you bind to properties of your model in 1 file</li>\n<li>If you add a binding to a JVMStatic</li>\n<li>If you add bindable members or properties to an model</li>\n<li>If you refactor moving observable member variables or properties into children or base classes</li>\n<li>Any other xml or binding related elements that can effect the generated code.</li>\n</ul>\n<p>Like I mentioned above, the reason is to avoid getting so many changes, that it becomes a troubleshooting nightmare to find a generic vague, horrible error related to generated databinding code. I'm sure the tools will improve, but for now, do yourself a favor and compile and run often when changing Databinding related items.</p>\n<p>Happy Coding</p>\n"}, {"tags": [], "owner": {"reputation": 1333, "user_id": 5890321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f08b0ac8116e1de42e5733c6c67c92a2?s=128&d=identicon&r=PG&f=1", "display_name": "Kenneth Argo", "link": "https://stackoverflow.com/users/5890321/kenneth-argo"}, "is_accepted": false, "score": 0, "last_activity_date": 1542912407, "creation_date": 1542912407, "answer_id": 53436666, "question_id": 51621301, "link": "https://stackoverflow.com/questions/51621301/android-studio-3-1-3-unresolved-reference-r-kotlin/53436666#53436666", "title": "Android Studio 3.1.3 - Unresolved reference: R - Kotlin", "body": "<p>I believe that I came across the real answer (though by accident).</p>\n\n<p>I also, as the OP had my KT file fail to location R. as well as other classes that happen to be in java.  What I noticed was that there was a case difference I the filenames.  Once I corrected the import statements to match the case of the package (aka, folder) the errors resolved.</p>\n"}, {"comments": [{"owner": {"reputation": 1766, "user_id": 2633909, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/RnCWv.jpg?s=128&g=1", "display_name": "DKV", "link": "https://stackoverflow.com/users/2633909/dkv"}, "edited": false, "score": 0, "creation_date": 1547978209, "post_id": 53510869, "comment_id": 95372725, "body": "for me even the r is unresolved able to run the app. i am using mac"}, {"owner": {"reputation": 1343, "user_id": 9005383, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-rymLhVRbsIw/AAAAAAAAAAI/AAAAAAAAG20/cTAJhtYO4mY/photo.jpg?sz=128", "display_name": "Tamim Attafi", "link": "https://stackoverflow.com/users/9005383/tamim-attafi"}, "reply_to_user": {"reputation": 1443, "user_id": 3742750, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/15f53fbbfc39fbfcbec14bf8693dff5c?s=128&d=identicon&r=PG&f=1", "display_name": "KMC", "link": "https://stackoverflow.com/users/3742750/kmc"}, "edited": false, "score": 2, "creation_date": 1552801799, "post_id": 53510869, "comment_id": 97145044, "body": "@KMC, i&#39;m glad it helped, if you still want to use these libraries, you may use the exclude method, i have updated the second bullet you might check it out."}, {"owner": {"reputation": 3646, "user_id": 3814160, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/vDrtU.jpg?s=128&g=1", "display_name": "vikzilla", "link": "https://stackoverflow.com/users/3814160/vikzilla"}, "edited": false, "score": 0, "creation_date": 1571187407, "post_id": 53510869, "comment_id": 103153628, "body": "Adding import com.package.name.R atop the fragment helped"}, {"owner": {"reputation": 2460, "user_id": 826946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b05cb424fb4335612425cb31fb3f2a85?s=128&d=identicon&r=PG", "display_name": "Andy Weinstein", "link": "https://stackoverflow.com/users/826946/andy-weinstein"}, "edited": false, "score": 0, "creation_date": 1575908466, "post_id": 53510869, "comment_id": 104715416, "body": "my problem was with package name - I had changed it, but evidently not everywhere - an autogenerated activity used the old name. I did a refactor on the package name and all was back to normal."}, {"owner": {"reputation": 10419, "user_id": 1151724, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/q6fMI.jpg?s=128&g=1", "display_name": "CodeClown42", "link": "https://stackoverflow.com/users/1151724/codeclown42"}, "edited": false, "score": 0, "creation_date": 1598632818, "post_id": 53510869, "comment_id": 112532396, "body": "This has happened to me when integrating lib sources (eg. removing a .jar/aar and replacing it with a src folder) for debugging purposes.  The <code>R</code> import in this case is <i>not</i> the package name where the problem file is, it&#39;s the package where the Activity source is for the MAIN activity from AndroidManifest.xml."}], "tags": [], "owner": {"reputation": 1343, "user_id": 9005383, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-rymLhVRbsIw/AAAAAAAAAAI/AAAAAAAAG20/cTAJhtYO4mY/photo.jpg?sz=128", "display_name": "Tamim Attafi", "link": "https://stackoverflow.com/users/9005383/tamim-attafi"}, "is_accepted": true, "score": 40, "last_activity_date": 1574156822, "last_edit_date": 1574156822, "creation_date": 1543369624, "answer_id": 53510869, "question_id": 51621301, "link": "https://stackoverflow.com/questions/51621301/android-studio-3-1-3-unresolved-reference-r-kotlin/53510869#53510869", "title": "Android Studio 3.1.3 - Unresolved reference: R - Kotlin", "body": "<p>The issue can be caused by many factors, </p>\n\n<ul>\n<li>as mentioned by martomstom in this <a href=\"https://stackoverflow.com/a/52854447/9005383\">Answer</a> the issue is sometimes caused by <code>com.android.tools.build:gradle</code> version, changing it's version to a more stable one would solve the problem: for example: <code>com.android.tools.build:gradle:3.4.0-alpha02</code> with <code>com.android.tools.build:gradle:3.2.1</code> </li>\n<li><p>Also, having libraries from the same group, but with different versions may cause the problem or even more runtime errors. use the exclude group method like the following : <code>implementation('com.squareup.picasso:picasso:2.71828') { exclude(group: 'com.android.support') }</code> in this case, picasso library uses android.support components, the android library version used in picasso is different than the one you're currently using in your app, so in order to solve this issue, we have to exclude it completely from its sub library and class groups.</p></li>\n<li><p>It can also happen by the mismatch of resources and code, including this importation line in your activity may solve the problem too : <code>import com.package.name.R</code></p></li>\n<li>Sometimes it can happen because of the IDE, performances or memory.. Cleaning the project from time to time may save you some time, on Android Studio it would be something like this : <code>Build -&gt; Clean Project / Rebuild Project</code> <strong>-</strong> Cleaning IDE cash also helps with performance and memory, on Android Studio it would look like this : <code>File-&gt; Invalidate Chases/ Restart -&gt; Invalidate Cashes and Restart</code></li>\n<li>I noticed that this problem happens to me the most of the time when importing new resources, Using prohibited characters in their names would fire the error, such as <code>. , , - , UpperCase or special Letters</code></li>\n<li>And as a suggestion , if you're using <strong>Kotlin</strong>, i really recommend using Kotlin extensions in your activity such as : import <code>kotlinx.android.synthetic.main.activity_page.*</code> or if you're using a custom view : <code>kotlinx.android.synthetic.main.view_layout.view.*</code> \n<strong>after that</strong>, in onCreat() method of an activity , you'll only have to call the id, for example : <code>my_edit_text_ID.text = \"Kotlin Dbest!\"</code>, or from a custom view : <code>mCostumView.my_edit_text_ID.text = \"Kotlin Dbest!\"</code></li>\n</ul>\n\n<p><strong>EDIT :</strong></p>\n\n<ul>\n<li><p>I have faced this issue againe and the problem was the '' R '' library was imported from 2 different sources : </p>\n\n<p>com.android.R</p>\n\n<p>com.example.package.R</p>\n\n<p>You must only import the '' R '' library with your application package name, \nin this case <code>com.example.package.R</code> \nSometimes the library is not imported at all, to import it, click on the \nunresolved reference <code>R</code> and press <code>Alt + Enter</code>   </p></li>\n</ul>\n\n<p><strong>EDIT:</strong></p>\n\n<p>As <a href=\"https://stackoverflow.com/users/444100/tobltobs\">tobltobs</a> mentioned in the comments section: \" Most of the time the problem is caused by another error which prevents the build system from creating generated sources. To find the root cause look at the gradle log (the \"toggle view\" icon below of the green hammer in the Build output) and look for errors unrelated to R or BuildConfig (also generated). If there is no other error left and the problem with R persists then maybe something of this list might help. \"</p>\n"}, {"tags": [], "owner": {"reputation": 645, "user_id": 766263, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/Duf6o.jpg?s=128&g=1", "display_name": "Josue", "link": "https://stackoverflow.com/users/766263/josue"}, "is_accepted": false, "score": 0, "last_activity_date": 1547711536, "creation_date": 1547711536, "answer_id": 54231284, "question_id": 51621301, "link": "https://stackoverflow.com/questions/51621301/android-studio-3-1-3-unresolved-reference-r-kotlin/54231284#54231284", "title": "Android Studio 3.1.3 - Unresolved reference: R - Kotlin", "body": "<p>I had the same problem with R reference too.\nFinally Android Studio 3.3 has been released and using <code>'com.android.tools.build:gradle:3.3.0'</code> the problem has been fixed!</p>\n"}, {"comments": [{"owner": {"reputation": 4656, "user_id": 7138492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8KSN4.png?s=128&g=1", "display_name": "Sergei Emelianov", "link": "https://stackoverflow.com/users/7138492/sergei-emelianov"}, "edited": false, "score": 0, "creation_date": 1552685223, "post_id": 54394538, "comment_id": 97120176, "body": "Updating Android Studio to the 3.3.1 version solved this issue for me"}], "tags": [], "owner": {"reputation": 93, "user_id": 8451711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/667554336b1f0e749245994aaed71053?s=128&d=identicon&r=PG&f=1", "display_name": "HasBert", "link": "https://stackoverflow.com/users/8451711/hasbert"}, "is_accepted": false, "score": 4, "last_activity_date": 1548639535, "creation_date": 1548639535, "answer_id": 54394538, "question_id": 51621301, "link": "https://stackoverflow.com/questions/51621301/android-studio-3-1-3-unresolved-reference-r-kotlin/54394538#54394538", "title": "Android Studio 3.1.3 - Unresolved reference: R - Kotlin", "body": "<p>I had the same problem, and I tried not to downgrade from gradle version 3.3 to gradle version 3.2.1. Instead I updated Android Studio to version 3.3, which made the trick for me ;-)</p>\n"}, {"comments": [{"owner": {"reputation": 2047, "user_id": 4593755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/39bqh.jpg?s=128&g=1", "display_name": "Jeffery Ma", "link": "https://stackoverflow.com/users/4593755/jeffery-ma"}, "edited": false, "score": 0, "creation_date": 1554348495, "post_id": 54978228, "comment_id": 97720290, "body": "kotlin version = &#39;1.3.21&#39;  gradle plugin version = &#39;3.3.2&#39;  gradle version = &#39;4.10.1&#39;  got this problem on Android Studio 3.2.1 ,  upgrade Android Studio to 3.3.2  solved the problem"}], "tags": [], "owner": {"reputation": 1, "user_id": 5152688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0825db6d5543fdcd5064de47c1ca31be?s=128&d=identicon&r=PG&f=1", "display_name": "dudukee", "link": "https://stackoverflow.com/users/5152688/dudukee"}, "is_accepted": false, "score": 0, "last_activity_date": 1551683450, "creation_date": 1551683450, "answer_id": 54978228, "question_id": 51621301, "link": "https://stackoverflow.com/questions/51621301/android-studio-3-1-3-unresolved-reference-r-kotlin/54978228#54978228", "title": "Android Studio 3.1.3 - Unresolved reference: R - Kotlin", "body": "<p>I update Android Studio to version 3.3.1 and solved this problem.</p>\n"}, {"comments": [{"owner": {"reputation": 680, "user_id": 1119656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wWryr.png?s=128&g=1", "display_name": "wildcat12", "link": "https://stackoverflow.com/users/1119656/wildcat12"}, "edited": false, "score": 0, "creation_date": 1589910773, "post_id": 56041111, "comment_id": 109479178, "body": "That didn&#39;t work for me.  File-&gt;Invalidate Caches/Restart worked for me as suggested by another answer, but there isn&#39;t a single solution to this problem as pointed out by others.  It can be caused by numerous things."}], "tags": [], "owner": {"reputation": 179, "user_id": 8369016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76462e95acc612fd0c59ee642e74abb1?s=128&d=identicon&r=PG&f=1", "display_name": "Nithesh", "link": "https://stackoverflow.com/users/8369016/nithesh"}, "is_accepted": false, "score": -3, "last_activity_date": 1557319444, "creation_date": 1557319444, "answer_id": 56041111, "question_id": 51621301, "link": "https://stackoverflow.com/questions/51621301/android-studio-3-1-3-unresolved-reference-r-kotlin/56041111#56041111", "title": "Android Studio 3.1.3 - Unresolved reference: R - Kotlin", "body": "<p>Here is the solution,\nFile->Project Structure->Project, select Android Gradle Plugin Version as 3.2.1 from the drop-down. then click apply. </p>\n"}, {"tags": [], "owner": {"reputation": 336, "user_id": 6032911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mNDuR.jpg?s=128&g=1", "display_name": "Ankush Joshi", "link": "https://stackoverflow.com/users/6032911/ankush-joshi"}, "is_accepted": false, "score": 0, "last_activity_date": 1563507388, "last_edit_date": 1592644375, "creation_date": 1563507388, "answer_id": 57105200, "question_id": 51621301, "link": "https://stackoverflow.com/questions/51621301/android-studio-3-1-3-unresolved-reference-r-kotlin/57105200#57105200", "title": "Android Studio 3.1.3 - Unresolved reference: R - Kotlin", "body": "<p>Downgrading gradle version worked for me.</p>\n<p>I changed :</p>\n<blockquote>\n<p>Gradle version  from : 4.10.4 to 4.4.1</p>\n<p>and Gradle Plugin version from : 3.3.1 to 3.1.3</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 825, "user_id": 9554350, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Nl3j9NPOgVc/AAAAAAAAAAI/AAAAAAAAADg/6kAoB_gUaws/photo.jpg?sz=128", "display_name": "K Vij", "link": "https://stackoverflow.com/users/9554350/k-vij"}, "is_accepted": false, "score": 0, "last_activity_date": 1583908500, "creation_date": 1583908500, "answer_id": 60630434, "question_id": 51621301, "link": "https://stackoverflow.com/questions/51621301/android-studio-3-1-3-unresolved-reference-r-kotlin/60630434#60630434", "title": "Android Studio 3.1.3 - Unresolved reference: R - Kotlin", "body": "<p>If your are experiencing this issue in Kotlin because you cannot reference the elements of the xml layout by ids. (e.g. <code>R.id.adView</code>) then try removing the line <code>import android.R</code> from your kotlin file. </p>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 5693069, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7gkxI57wqeM/AAAAAAAAAAI/AAAAAAAAADM/7uP5Z8Wdy1g/photo.jpg?sz=128", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/5693069/adam-smith"}, "is_accepted": false, "score": 0, "last_activity_date": 1584658409, "creation_date": 1584658409, "answer_id": 60766204, "question_id": 51621301, "link": "https://stackoverflow.com/questions/51621301/android-studio-3-1-3-unresolved-reference-r-kotlin/60766204#60766204", "title": "Android Studio 3.1.3 - Unresolved reference: R - Kotlin", "body": "<p>For me it was because I had created a new package and R wasn't available until I imported it from the package above</p>\n"}, {"tags": [], "owner": {"reputation": 756, "user_id": 1161518, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/h4aom.jpg?s=128&g=1", "display_name": "WasimSafdar", "link": "https://stackoverflow.com/users/1161518/wasimsafdar"}, "is_accepted": false, "score": 0, "last_activity_date": 1587054230, "creation_date": 1587054230, "answer_id": 61255133, "question_id": 51621301, "link": "https://stackoverflow.com/questions/51621301/android-studio-3-1-3-unresolved-reference-r-kotlin/61255133#61255133", "title": "Android Studio 3.1.3 - Unresolved reference: R - Kotlin", "body": "<p>I faced the same issue. I restarted my Android Studio, invalidate caches, Sync Gradle but nothing was working. Then I looked into my file and there are 2 imports of my R. 1 import was related to my application package and the other was related to Android.</p>\n\n<ol>\n<li>import com.example.myApp.R</li>\n<li>import android.R // This import was added accidentally during the build.</li>\n</ol>\n\n<p>Removing second import related to android solved this issue.</p>\n"}, {"comments": [{"owner": {"reputation": 1173, "user_id": 5390254, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/CwUA1.png?s=128&g=1", "display_name": "J A S K I E R", "link": "https://stackoverflow.com/users/5390254/j-a-s-k-i-e-r"}, "edited": false, "score": 1, "creation_date": 1609606337, "post_id": 65064187, "comment_id": 115876769, "body": "<b>package com.mydomain.appname</b> In my case I&#39;ve copied the code, therefore I have forgotten to change the package name to mine."}], "tags": [], "owner": {"reputation": 1318, "user_id": 996046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19be5d274bc973d92a038e2fb0cb8ba8?s=128&d=identicon&r=PG", "display_name": "Vasudev", "link": "https://stackoverflow.com/users/996046/vasudev"}, "is_accepted": false, "score": 0, "last_activity_date": 1606677807, "creation_date": 1606677807, "answer_id": 65064187, "question_id": 51621301, "link": "https://stackoverflow.com/questions/51621301/android-studio-3-1-3-unresolved-reference-r-kotlin/65064187#65064187", "title": "Android Studio 3.1.3 - Unresolved reference: R - Kotlin", "body": "<p>I had wrong import statement <code>import android.R</code> instead of <code>import my.project.package.R</code>. Fixing it solved the problem</p>\n"}], "owner": {"reputation": 1343, "user_id": 9005383, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-rymLhVRbsIw/AAAAAAAAAAI/AAAAAAAAG20/cTAJhtYO4mY/photo.jpg?sz=128", "display_name": "Tamim Attafi", "link": "https://stackoverflow.com/users/9005383/tamim-attafi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38603, "favorite_count": 4, "protected_date": 1575703311, "accepted_answer_id": 53510869, "answer_count": 16, "score": 39, "last_activity_date": 1611980091, "creation_date": 1533067787, "question_id": 51621301, "link": "https://stackoverflow.com/questions/51621301/android-studio-3-1-3-unresolved-reference-r-kotlin", "title": "Android Studio 3.1.3 - Unresolved reference: R - Kotlin", "body": "<p>I am new to kotlin, i have converted some code from java but it seems like there's something wrong, The R in findViewById(R.id.my_id) is highlighted in red and it shows this message : \"Unresolved reference: R\".. I've been looking for a solution but i seem not to figure it out, So what should i do?\nHere's a screenshot :</p>\n\n<p><a href=\"https://i.stack.imgur.com/n4TCM.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/n4TCM.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["kotlin", "kotlinx.coroutines"], "answers": [{"comments": [{"owner": {"reputation": 2242, "user_id": 1394710, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0da2f1f5c2e83c6a2fd2291f28651175?s=128&d=identicon&r=PG", "display_name": "HelloWorld", "link": "https://stackoverflow.com/users/1394710/helloworld"}, "edited": false, "score": 1, "creation_date": 1533065760, "post_id": 51620544, "comment_id": 90207104, "body": "Regarding the first example with the CountDownLatch: isn&#39;t it blocking (yes, it&#39;s running on a different thread, but it&#39;s blocking that thread)? And the second example: where is the semaphore variable coming from? :)"}, {"owner": {"reputation": 2242, "user_id": 1394710, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0da2f1f5c2e83c6a2fd2291f28651175?s=128&d=identicon&r=PG", "display_name": "HelloWorld", "link": "https://stackoverflow.com/users/1394710/helloworld"}, "edited": false, "score": 1, "creation_date": 1533066335, "post_id": 51620544, "comment_id": 90207340, "body": "I found a non-blocking version here of CountDownLatch! <a href=\"https://github.com/venkatperi/kotlin-coroutines-lib/blob/e3c919b2eb4eabef944da20197d70cdb7bd28119/src/main/kotlin/com/vperi/kotlinx/coroutines/experimental/sync/CountDownLatch.kt\" rel=\"nofollow noreferrer\">github.com/venkatperi/kotlin-coroutines-lib/blob/&hellip;</a>"}], "tags": [], "owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "is_accepted": false, "score": 2, "last_activity_date": 1533064943, "last_edit_date": 1533064943, "creation_date": 1533064614, "answer_id": 51620544, "question_id": 51620468, "link": "https://stackoverflow.com/questions/51620468/equivalent-to-cs-semaphore-semaphoreslim-in-kotlin/51620544#51620544", "title": "Equivalent to C#&#39;s Semaphore/SemaphoreSlim in Kotlin?", "body": "<p>You have a few options coming from Java.<br>\nMost common would be to use <code>CountDownLatch</code>:</p>\n\n<pre><code>val latch = CountDownLatch(1)\n\nasync {\n   // Do something\n   latch.countDown()\n}\n\nlatch.await()\n</code></pre>\n\n<p>Usually that's enough.<br>\nIf you have some very specific cases, you can also use semaphore, of course:</p>\n\n<pre><code>launch {\n    try {\n        semaphore.acquire()\n        // Do something\n    }\n    finally {\n        semaphore.release()\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 186, "user_id": 7251226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e33f03da74921d56d6cb36e1fbee6ecd?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey", "link": "https://stackoverflow.com/users/7251226/andrey"}, "is_accepted": false, "score": 2, "last_activity_date": 1593792433, "last_edit_date": 1593792433, "creation_date": 1593513991, "answer_id": 62655696, "question_id": 51620468, "link": "https://stackoverflow.com/questions/51620468/equivalent-to-cs-semaphore-semaphoreslim-in-kotlin/62655696#62655696", "title": "Equivalent to C#&#39;s Semaphore/SemaphoreSlim in Kotlin?", "body": "<p>You might consider using Kotlin's own <code>Job.join()</code> method. The benefit is that <code>join</code> is a <code>suspsend</code> function and there is no need for extra <code>async</code> block</p>\n<pre><code>val latch: CompletableJob = Job()\n\nlaunch {\n    latch.join()\n}\n</code></pre>\n<p>And when ready call:</p>\n<pre><code>latch.complete()\n</code></pre>\n<p>Also if you need timeouts you can wrap <code>join</code> call into <code>withTimeout</code> or <code>withTimeoutOrNull</code></p>\n<p>Another useful Kotlin interface is <code>CompletableDeferred</code>. Unlike <code>Job</code> it returns completion result. See its <code>await/complete</code> methods</p>\n"}, {"tags": [], "owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "is_accepted": true, "score": 2, "last_activity_date": 1617021816, "creation_date": 1617021816, "answer_id": 66854414, "question_id": 51620468, "link": "https://stackoverflow.com/questions/51620468/equivalent-to-cs-semaphore-semaphoreslim-in-kotlin/66854414#66854414", "title": "Equivalent to C#&#39;s Semaphore/SemaphoreSlim in Kotlin?", "body": "<p><code>kotlinx-coroutines</code> now has a full-fledged <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.sync/-semaphore/\" rel=\"nofollow noreferrer\"><code>Semaphore</code></a> class.</p>\n<p>You can use it as follows:</p>\n<pre><code>import kotlinx.coroutines.async\nimport kotlinx.coroutines.awaitAll\nimport kotlinx.coroutines.sync.Semaphore\nimport kotlinx.coroutines.sync.withPermit\n\n\nsuspend fun doConcurrently(list: List&lt;Something&gt;) {\n    val semaphore = Semaphore(4) // number of permits is 4\n\n    list\n        .map { async { semaphore.withPermit { /* do something */ } } }\n        .awaitAll()\n}\n</code></pre>\n"}], "owner": {"reputation": 2242, "user_id": 1394710, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0da2f1f5c2e83c6a2fd2291f28651175?s=128&d=identicon&r=PG", "display_name": "HelloWorld", "link": "https://stackoverflow.com/users/1394710/helloworld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 676, "favorite_count": 0, "accepted_answer_id": 66854414, "answer_count": 3, "score": 3, "last_activity_date": 1617021816, "creation_date": 1533064320, "question_id": 51620468, "link": "https://stackoverflow.com/questions/51620468/equivalent-to-cs-semaphore-semaphoreslim-in-kotlin", "title": "Equivalent to C#&#39;s Semaphore/SemaphoreSlim in Kotlin?", "body": "<p>Is there an equivalent to C#'s Semaphore/SemaphoreSlim type, in Kotlin? I would like to use it with co-routines (non-blocking). I.e. WaitOneAsync().</p>\n"}, {"tags": ["java", "firebase", "google-app-engine", "jar", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 6199, "user_id": 2253682, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/skbWe.jpg?s=128&g=1", "display_name": "Adam Hurwitz", "link": "https://stackoverflow.com/users/2253682/adam-hurwitz"}, "reply_to_user": {"reputation": 5194, "user_id": 437247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a93897c93c09132b104dc5e4b429a284?s=128&d=identicon&r=PG", "display_name": "Marty", "link": "https://stackoverflow.com/users/437247/marty"}, "edited": false, "score": 0, "creation_date": 1533106354, "post_id": 51621514, "comment_id": 90218450, "body": "I&#39;m happy to hear that @Marty! ;-)"}], "tags": [], "owner": {"reputation": 6199, "user_id": 2253682, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/skbWe.jpg?s=128&g=1", "display_name": "Adam Hurwitz", "link": "https://stackoverflow.com/users/2253682/adam-hurwitz"}, "is_accepted": true, "score": 2, "last_activity_date": 1533070047, "last_edit_date": 1533070047, "creation_date": 1533068637, "answer_id": 51621514, "question_id": 51619324, "link": "https://stackoverflow.com/questions/51619324/unable-to-read-firebase-json-within-jar-file-on-appengine/51621514#51621514", "title": "Unable to Read Firebase .json Within .jar File on AppEngine", "body": "<p>As a workaround for AppEngine's bug I created an object containing the Firebase authentication data that I build from the FirebaseCredentialsHelper class. The returned object uses the String values generated from the Firebase console.</p>\n\n<p>Then I converted my authentication object returned by the FirebaseCredentialsHelper class into json using the <a href=\"https://github.com/google/gson\" rel=\"nofollow noreferrer\">Gson library</a>, and then into a byte input stream.</p>\n\n<pre><code>FirebaseApp.initializeApp(FirebaseOptions.Builder()\n.setCredentials(GoogleCredentials.fromStream(Gson().toJson(FirebaseCredentialsHelper.get()).byteInputStream()))\n.build()) \n</code></pre>\n\n<p>Note: I kept the Firebase Authentication objects out of version control since they contain private information.</p>\n"}], "owner": {"reputation": 6199, "user_id": 2253682, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/skbWe.jpg?s=128&g=1", "display_name": "Adam Hurwitz", "link": "https://stackoverflow.com/users/2253682/adam-hurwitz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 51621514, "answer_count": 1, "score": 1, "last_activity_date": 1533106008, "creation_date": 1533059601, "last_edit_date": 1533106008, "question_id": 51619324, "link": "https://stackoverflow.com/questions/51619324/unable-to-read-firebase-json-within-jar-file-on-appengine", "title": "Unable to Read Firebase .json Within .jar File on AppEngine", "body": "<p>How do I adjust my <strong>.jar</strong> configuration to have the Firebase <strong>.json</strong> file read on AppEngine?</p>\n\n<p>AppEngine cannot read the <strong>.json</strong> file to authenticate Firebase in my Java/Kotlin application. The .json file is read correctly in the <strong>.jar</strong> file when run independently. When the <strong>.jar</strong> is provided to AppEngine it cannot be read. </p>\n\n<pre><code>Exception in thread \"main\" java.io.FileNotFoundException: src/main/kotlin/utils/auth/carpecoin-media-211617-firebase-adminsdk-5d3ii-574c2a8dd4.json (No such file or directory)\n        at java.io.FileInputStream.open0(Native Method)\n        at java.io.FileInputStream.open(FileInputStream.java:195)\n        at java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:138)\n        at java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:93)\n        at Initialization.initializeFirestore(Initialization.kt:16)\n        at Initialization.main(Initialization.kt:10)\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-emulator", "android-studio-3.0"], "comments": [{"owner": {"reputation": 415, "user_id": 4059047, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh3.googleusercontent.com/-U3DJ1EwIrEI/AAAAAAAAAAI/AAAAAAAAAec/qAvv5pCrhSU/photo.jpg?sz=128", "display_name": "Gianmarco Biscini", "link": "https://stackoverflow.com/users/4059047/gianmarco-biscini"}, "edited": false, "score": 1, "creation_date": 1542116793, "post_id": 51618206, "comment_id": 93446422, "body": "I have the same problem. Did you manage to solve it?"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 10743606, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qF0PhlW6bw4/AAAAAAAAAAI/AAAAAAAACZ8/fbScvHwVaIs/photo.jpg?sz=128", "display_name": "Laksh Ahir", "link": "https://stackoverflow.com/users/10743606/laksh-ahir"}, "is_accepted": false, "score": 2, "last_activity_date": 1545452025, "creation_date": 1545452025, "answer_id": 53892981, "question_id": 51618206, "link": "https://stackoverflow.com/questions/51618206/android-studio-emulator-could-not-initialize-directsoundcapture/53892981#53892981", "title": "android studio emulator could not initialize DirectSoundCapture", "body": "<p>Same problem occurs with me.\nThe solution is :--</p>\n\n<p>Change the ids.xml file. <strong>Make  tag inner tag</strong> , Like this</p>\n\n<p>Before error, Code is like this :</p>\n\n<pre><code>    &lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;resources&gt;\n    &lt;item name=\"workouttype\" type=\"id\" /&gt;\n    &lt;item name=\"txthello\" type=\"id\"&gt;txthello&lt;/item&gt;\n&lt;/resources&gt;\n</code></pre>\n\n<p>Delete \"txthello\" and <strong>make item tag inner tag</strong>. You may not have \"txthello\" :\n- After changing the code, look like this :</p>\n\n<pre><code> &lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;resources&gt;\n    &lt;item name=\"workouttype\" type=\"id\" /&gt;\n    &lt;item name=\"txthello\" type=\"id\"/&gt;\n&lt;/resources&gt;\n</code></pre>\n\n<p>Now, that's it.!!! Run your app on emulator.</p>\n"}], "owner": {"reputation": 3687, "user_id": 6346554, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/y8FJF.jpg?s=128&g=1", "display_name": "touseefbsb", "link": "https://stackoverflow.com/users/6346554/touseefbsb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6352, "favorite_count": 2, "protected_date": 1546873629, "answer_count": 1, "score": 7, "last_activity_date": 1546869455, "creation_date": 1533055075, "question_id": 51618206, "link": "https://stackoverflow.com/questions/51618206/android-studio-emulator-could-not-initialize-directsoundcapture", "title": "android studio emulator could not initialize DirectSoundCapture", "body": "<p>I just have a basic helloworld app in android studio 3.2 and I am trying to run some emulators to test the app with AVD manager, but the emulator just stucks in google logo  and eventually android studio times out and stops trying to attack the app on the emulator meanwhile I see following errors in the event log.</p>\n\n<pre><code>4:25 PM Emulator: dsound: Could not initialize DirectSoundCapture\n\n4:25 PM Emulator: dsound: Reason: No sound driver is available for use, or the given GUID is not a valid DirectSound device ID\n\n4:25 PM Emulator: dsound: Attempt to initialize voice without DirectSoundCapture object\n\n4:25 PM Emulator: dsound: Attempt to initialize voice without DirectSoundCapture object\n\n4:25 PM Emulator: audio: Failed to create voice `goldfish_audio_in'\n\n4:25 PM Emulator: qemu-system-i386.exe: warning: opening audio input failed\n\n4:25 PM Emulator: dsound: Attempt to initialize voice without DirectSoundCapture object\n\n4:25 PM Emulator: dsound: Attempt to initialize voice without DirectSoundCapture object\n\n4:25 PM Emulator: audio: Failed to create voice `adc'\n</code></pre>\n"}, {"tags": ["android", "kotlin", "retrofit2"], "answers": [{"comments": [{"owner": {"reputation": 82, "user_id": 8407269, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-SJZ7U1KY4lQ/AAAAAAAAAAI/AAAAAAAAAWs/F_Dxw5RALDw/photo.jpg?sz=128", "display_name": "Sharaaf Nazeer", "link": "https://stackoverflow.com/users/8407269/sharaaf-nazeer"}, "edited": false, "score": 0, "creation_date": 1533056898, "post_id": 51618272, "comment_id": 90202879, "body": "Thanks for the reply. 2nd one is my case. Can u please give me more details about how to use Observable&lt;ResponseBody&gt; in this scenario"}, {"owner": {"reputation": 960, "user_id": 2056488, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FyCYt.jpg?s=128&g=1", "display_name": "RScottCarson", "link": "https://stackoverflow.com/users/2056488/rscottcarson"}, "reply_to_user": {"reputation": 82, "user_id": 8407269, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-SJZ7U1KY4lQ/AAAAAAAAAAI/AAAAAAAAAWs/F_Dxw5RALDw/photo.jpg?sz=128", "display_name": "Sharaaf Nazeer", "link": "https://stackoverflow.com/users/8407269/sharaaf-nazeer"}, "edited": false, "score": 0, "creation_date": 1533058115, "post_id": 51618272, "comment_id": 90203440, "body": "Added a code example for option 3 which uses the ResponseBody"}], "tags": [], "owner": {"reputation": 960, "user_id": 2056488, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FyCYt.jpg?s=128&g=1", "display_name": "RScottCarson", "link": "https://stackoverflow.com/users/2056488/rscottcarson"}, "is_accepted": false, "score": 1, "last_activity_date": 1533058095, "last_edit_date": 1533058095, "creation_date": 1533055339, "answer_id": 51618272, "question_id": 51617050, "link": "https://stackoverflow.com/questions/51617050/how-to-handle-empty-array-in-http-response-with-retrofit-in-kotlin/51618272#51618272", "title": "How to handle empty array in http response with retrofit in kotlin", "body": "<ol>\n<li><p>If you NEVER care about the data in the response (i.e. if it's always an empty array) you can use <code>Completable</code> instead of <code>Observable&lt;TransactionModel&gt;</code>. Looking at your code this doesn't seem like the case.</p></li>\n<li><p>If the response sometimes has data and sometimes returns an empty array you can use a custom <code>Converter.Factory</code> to intercept calls before the GSON converter factory and format the return the way you want. This limits the empty responses to calls that you can accept.</p></li>\n</ol>\n\n<p>An example with pseudo code:</p>\n\n<pre><code>class EmptyArrayConverterFactory : Converter.Factory() {\n\n    override fun responseBodyConverter(type: Type, annotations: Array&lt;Annotation&gt;, retrofit: Retrofit): Converter&lt;ResponseBody, *&gt;? {\n        val delegate = retrofit.nextResponseBodyConverter&lt;Any&gt;(this, type, annotations)\n        return Converter&lt;ResponseBody, Any&gt; { body -&gt;\n            var bodyString = body.String()\n            if (bodyString == \"{[]}\") { // Or whatever the empty array is returned as\n                bodyString = //Convert body string to empty/error TransactionModel JSON\n            }\n            delegate.convert(bodyString) \n        }\n    }\n\n}\n</code></pre>\n\n<ol start=\"3\">\n<li>Another option if the response sometimes has data and sometimes does not you can return an <code>Observable&lt;ResponseBody&gt;</code> instead of <code>Observable&lt;TransactionModel&gt;</code> and then parse the response yourself in the <code>subscribe()</code> function, taking into account the possibility of an empty array. I think this would be the most flexible option given the circumstances and my limited knowledge of your situation.</li>\n</ol>\n\n<p>This would look something like this:</p>\n\n<p>API definition:\n    @GET(\"transaction/get\")\n    fun getTransactions(@Query(\"date\") date: String?, @Query(\"user_id\") user_id: Int, @Query(\"account_id\") account_id: Int?): Observable</p>\n\n<p>Usage:</p>\n\n<pre><code>mApiServiceNetwork.getNetworkService().getTransactions(date, user_id, account_id)\n            .subscribeOn(Schedulers.io())\n            .unsubscribeOn(Schedulers.computation())\n            .observeOn(AndroidSchedulers.mainThread())\n            .subscribe({ responseBody -&gt;\n\n                if(responseBody.string() == \"{[]}\"){\n                    // handle the empty list however you want\n                }\n                else{ \n                    // Handle the response normally\n                    this.transaction = it\n\n                    this.expenseDataAdapter.setExpenses(it.expenses!!)\n                    this.recyclerView.adapter = expenseDataAdapter\n\n                    this.textViewSpendingAccount.text = it.account!!.title\n\n                    this.textViewSpendingExpense.text = it.total_expense.toString()\n                    this.textViewSpendingIncome.text = it.total_income.toString()\n                    this.textViewSpendingBalance.text = it.balance.toString()\n\n                    Log.d(\"__EXPENSE\", it.total_expense.toString())\n                }\n\n            }, {\n                Toast.makeText(this.requireContext(), it.message, Toast.LENGTH_LONG).show()\n            }, {\n                this.expenseDataAdapter.notifyDataSetChanged()\n            })\n</code></pre>\n"}], "owner": {"reputation": 82, "user_id": 8407269, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-SJZ7U1KY4lQ/AAAAAAAAAAI/AAAAAAAAAWs/F_Dxw5RALDw/photo.jpg?sz=128", "display_name": "Sharaaf Nazeer", "link": "https://stackoverflow.com/users/8407269/sharaaf-nazeer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1413, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1534171916, "creation_date": 1533051047, "last_edit_date": 1534171916, "question_id": 51617050, "link": "https://stackoverflow.com/questions/51617050/how-to-handle-empty-array-in-http-response-with-retrofit-in-kotlin", "title": "How to handle empty array in http response with retrofit in kotlin", "body": "<p>I am new to kotlin and observers. I'm using Retrofit to do API calls. My API calls return the response as an empty array. I could not figure it out how to handle it with the use of observers. Please, anyone, help me out. Thanks in advance</p>\n\n<p>API call method : </p>\n\n<pre><code>@GET(\"transaction/get\")\nfun getTransactions(@Query(\"date\") date: String?, @Query(\"user_id\") user_id: Int, @Query(\"account_id\") account_id: Int?): Observable&lt;TransactionModel&gt;\n</code></pre>\n\n<p>Connection class</p>\n\n<pre><code>public class ApiServiceNetwork private constructor()//hide the public constructor\n    : Interceptor {\n    @Throws(IOException::class)\n    override fun intercept(chain: Interceptor.Chain): Response {\n        val request = chain.request()\n        val builder: Request.Builder\n        builder = request.newBuilder()\n        val request1 = builder.build()\n        //Here we can modify request1 and response if we want (like adding header or auth)\n        val response = chain.proceed(request1)\n\n        return response\n    }\n\n    private val logger: okhttp3.logging.HttpLoggingInterceptor\n        get() {\n            val logging = okhttp3.logging.HttpLoggingInterceptor()\n            logging.level = okhttp3.logging.HttpLoggingInterceptor.Level.HEADERS\n            logging.level = okhttp3.logging.HttpLoggingInterceptor.Level.BASIC\n            logging.level = okhttp3.logging.HttpLoggingInterceptor.Level.BODY\n            return logging\n        }\n\n    fun getNetworkService(): WebServiceInterface {\n        return createRetrofitInstance(EndPoint.SERVER_ENDPOINT).create(WebServiceInterface::class.java)\n    }\n\n    private fun createRetrofitInstance(url: String): Retrofit {\n        val okHttpClient = OkHttpClient.Builder()\n        okHttpClient.addInterceptor(this)\n        okHttpClient.addNetworkInterceptor(StethoInterceptor())\n        okHttpClient.addInterceptor(logger)\n        retrofit.baseUrl(url)\n                .addConverterFactory(GsonConverterFactory.create(GsonBuilder().serializeNulls().setLenient().create()))\n                .addCallAdapterFactory(RxJava2CallAdapterFactory.create())\n                .client(okHttpClient.connectTimeout(60,\n                        TimeUnit.SECONDS).writeTimeout(60,\n                        TimeUnit.SECONDS).readTimeout(60,\n                        TimeUnit.SECONDS).build())\n        return retrofit.build()\n\n    }\n\n    companion object {\n        private val retrofit = Retrofit.Builder()\n\n        fun getInstance(): ApiServiceNetwork {\n            return ApiServiceNetwork()\n        }\n    }\n</code></pre>\n\n<p>Function call in my activity :</p>\n\n<pre><code>mApiServiceNetwork.getNetworkService().getTransactions(date, user_id, account_id)\n                .subscribeOn(Schedulers.io())\n                .unsubscribeOn(Schedulers.computation())\n                .observeOn(AndroidSchedulers.mainThread())\n                .subscribe({\n\n                    this.transaction = it\n\n                    this.expenseDataAdapter.setExpenses(it.expenses!!)\n                    this.recyclerView.adapter = expenseDataAdapter\n\n                    this.textViewSpendingAccount.text = it.account!!.title\n\n                    this.textViewSpendingExpense.text = it.total_expense.toString()\n                    this.textViewSpendingIncome.text = it.total_income.toString()\n                    this.textViewSpendingBalance.text = it.balance.toString()\n\n                    Log.d(\"__EXPENSE\", it.total_expense.toString())\n\n                }, {\n                    Toast.makeText(this.requireContext(), it.message, Toast.LENGTH_LONG).show()\n                }, {\n                    this.expenseDataAdapter.notifyDataSetChanged()\n                })\n</code></pre>\n"}, {"tags": ["android", "kotlin", "alarmmanager", "receiver"], "comments": [{"owner": {"reputation": 412, "user_id": 3352839, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f33390a14bbd871957a4a968f82bcf74?s=128&d=identicon&r=PG", "display_name": "slackwars", "link": "https://stackoverflow.com/users/3352839/slackwars"}, "edited": false, "score": 0, "creation_date": 1533061671, "post_id": 51617042, "comment_id": 90205251, "body": "What does your AndroidManifest look like?  You are probably not filtering your broadcast receiver intent correctly."}, {"owner": {"reputation": 47, "user_id": 6932609, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1245072032204666/picture?type=large", "display_name": "Bartosz Kubacki", "link": "https://stackoverflow.com/users/6932609/bartosz-kubacki"}, "reply_to_user": {"reputation": 412, "user_id": 3352839, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f33390a14bbd871957a4a968f82bcf74?s=128&d=identicon&r=PG", "display_name": "slackwars", "link": "https://stackoverflow.com/users/3352839/slackwars"}, "edited": false, "score": 0, "creation_date": 1533068244, "post_id": 51617042, "comment_id": 90208283, "body": "@slackwars here it is:  <code>&lt;receiver             android:name=&quot;.CheckExpiryAlarmReceiver&quot;             android:enabled=&quot;true&quot;&gt;              &lt;intent-filter&gt;                 &lt;action android:name=&quot;android.intent.action.BOOT_COMPLETED&quot; &#47;&gt;             &lt;&#47;intent-filter&gt;         &lt;&#47;receiver&gt;</code>"}, {"owner": {"reputation": 35715, "user_id": 2850651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ooWVw.jpg?s=128&g=1", "display_name": "Mike M.", "link": "https://stackoverflow.com/users/2850651/mike-m"}, "edited": false, "score": 1, "creation_date": 1533083864, "post_id": 51617042, "comment_id": 90212768, "body": "You&#39;re not accounting for the possibility that the alarm time has already passed today. <a href=\"https://stackoverflow.com/questions/36535575\">stackoverflow.com/questions/36535575</a>"}], "owner": {"reputation": 47, "user_id": 6932609, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1245072032204666/picture?type=large", "display_name": "Bartosz Kubacki", "link": "https://stackoverflow.com/users/6932609/bartosz-kubacki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "closed_date": 1544247813, "answer_count": 0, "score": 0, "last_activity_date": 1533051006, "creation_date": 1533051006, "question_id": 51617042, "link": "https://stackoverflow.com/questions/51617042/alarmmanager-triggers-too-fast", "closed_reason": "Duplicate", "title": "AlarmManager triggers too fast", "body": "<p>I was trying to setup AlarmManager in my application but I am not sure if I am doing everything how it should be.</p>\n\n<p>What I want to achieve is to have an alaram which gets setup once after installation of application and re-setup after every re-boot. </p>\n\n<p>I think I am close but now just after loading application on emulator, alarm goes off and gives \"Successully triggered\" message although clock is set to 11 AM, not 9 AM...</p>\n\n<p>It might be an issue with for..else condition in my Receiver but I am not sure, here is my code:</p>\n\n<p>App.kt</p>\n\n<pre><code>class App : Application() {\n\noverride fun onCreate() {\n\n    CheckExpiryAlarmReceiver.AlarmReceiver.setExpiryAlarmMonitor(applicationContext)\n\n    super.onCreate()\n}\n}\n</code></pre>\n\n<p>CheckExpiryAlarmReceiver.kt</p>\n\n<pre><code>private const val REQUEST_CODE = 0\nprivate const val ALARM_HOUR = 9\n\nclass CheckExpiryAlarmReceiver : BroadcastReceiver() {\n\nobject AlarmReceiver {\n\n    fun setExpiryAlarmMonitor(context: Context?) {\n\n        val alarmMgr: AlarmManager = context?.getSystemService(Context.ALARM_SERVICE) as AlarmManager\n\n        val alarmIntent: PendingIntent\n\n        val mIntent = Intent(context, CheckExpiryAlarmReceiver::class.java)\n\n        alarmIntent = PendingIntent.getBroadcast(context, REQUEST_CODE, mIntent, 0)\n\n        // Set the alarm to start at 9:00 AM\n        val calendar: Calendar = Calendar.getInstance()\n\n        calendar.timeInMillis = System.currentTimeMillis()\n\n        calendar.set(Calendar.HOUR_OF_DAY, ALARM_HOUR)\n\n        // Every once a day\n        alarmMgr.setInexactRepeating(AlarmManager.RTC_WAKEUP, calendar.timeInMillis, AlarmManager.INTERVAL_DAY, alarmIntent)\n    }\n}\n\noverride fun onReceive(context: Context?, intent: Intent?) {\n\n    // Check if triggered by system re-boot\n    if(intent?.action == \"android.intent.action.BOOT_COMPLETED\") {\n\n       AlarmReceiver.setExpiryAlarmMonitor(context)\n\n    } else { // Action to be actually performed by Alarm receiver\n\n        Log.i(\"AlarmMonitor\", \"Triggered successfully!\")\n\n    }\n}\n\n}\n</code></pre>\n\n<p>Any thoughts? Thanks for all help! :)</p>\n"}, {"tags": ["java", "android", "android-layout", "kotlin", "android-linearlayout"], "answers": [{"tags": [], "owner": {"reputation": 3602, "user_id": 3569545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb00bcc2abeb14cf5bfacfa1013a92ad?s=128&d=identicon&r=PG&f=1", "display_name": "Demigod", "link": "https://stackoverflow.com/users/3569545/demigod"}, "is_accepted": false, "score": 2, "last_activity_date": 1533108901, "last_edit_date": 1533108901, "creation_date": 1533048366, "answer_id": 51616175, "question_id": 51616004, "link": "https://stackoverflow.com/questions/51616004/set-background-png-on-linearlayout-without-affecting-layout-size/51616175#51616175", "title": "set background png on Linearlayout without affecting layout size", "body": "<p>Background always stretches to its <code>View</code> size. So you can't really control how it will look like. Instead, put an <code>ImageView</code> as a bottom most (meaning that it will lay under everything else) element in your layout, and use your background image as a source (<code>src</code>) for this <code>ImageView</code>, and so you will be able to control the look of the background with <code>scaleType</code> (probable you would want to use <code>centerCrop</code> or <code>fitCenter</code>). More about <code>scaleType</code> <a href=\"https://robots.thoughtbot.com/android-imageview-scaletype-a-visual-guide\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>In the end your layout should look something like this:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;FrameLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n             android:layout_width=\"match_parent\"\n             android:layout_height=\"match_parent\"&gt;\n\n  &lt;ImageView\n      android:layout_width=\"match_parent\"\n      android:layout_height=\"match_parent\"\n      android:scaleType=\"fitCenter\"\n      android:src=\"@mipmap/dashboard_background\" /&gt;\n\n  &lt;FrameLayout\n      android:id=\"@+id/content_container\"\n      android:layout_width=\"match_parent\"\n      android:layout_height=\"match_parent\"&gt;\n\n    &lt;!-- Put your view elements here --&gt;\n\n  &lt;/FrameLayout&gt;\n\n&lt;/FrameLayout&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1715, "user_id": 4553806, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vV8Uii_F19I/AAAAAAAAAAI/AAAAAAAAAA8/Q0P8fyB3j-c/photo.jpg?sz=128", "display_name": "Tigran Babajanyan", "link": "https://stackoverflow.com/users/4553806/tigran-babajanyan"}, "edited": false, "score": 0, "creation_date": 1533049357, "post_id": 51616199, "comment_id": 90198343, "body": "It works as I want, but only some elements in my layout being invisible, do you know why?"}, {"owner": {"reputation": 849, "user_id": 7749832, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AyjOD.png?s=128&g=1", "display_name": "Caspar Geerlings", "link": "https://stackoverflow.com/users/7749832/caspar-geerlings"}, "reply_to_user": {"reputation": 1715, "user_id": 4553806, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vV8Uii_F19I/AAAAAAAAAAI/AAAAAAAAAA8/Q0P8fyB3j-c/photo.jpg?sz=128", "display_name": "Tigran Babajanyan", "link": "https://stackoverflow.com/users/4553806/tigran-babajanyan"}, "edited": false, "score": 0, "creation_date": 1533050074, "post_id": 51616199, "comment_id": 90198862, "body": "What do you mean with invisible? My guess is that your white texts are barely visible due to the bright background. Can you confirm this?"}, {"owner": {"reputation": 1715, "user_id": 4553806, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vV8Uii_F19I/AAAAAAAAAAI/AAAAAAAAAA8/Q0P8fyB3j-c/photo.jpg?sz=128", "display_name": "Tigran Babajanyan", "link": "https://stackoverflow.com/users/4553806/tigran-babajanyan"}, "edited": false, "score": 0, "creation_date": 1533050310, "post_id": 51616199, "comment_id": 90199033, "body": "No the elements on bottom not visible  <a href=\"http://i.prntscr.com/7uuWI1bUQmeozpj_YWQ-lg.png\" rel=\"nofollow noreferrer\">i.prntscr.com/7uuWI1bUQmeozpj_YWQ-lg.png</a>"}, {"owner": {"reputation": 849, "user_id": 7749832, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AyjOD.png?s=128&g=1", "display_name": "Caspar Geerlings", "link": "https://stackoverflow.com/users/7749832/caspar-geerlings"}, "reply_to_user": {"reputation": 1715, "user_id": 4553806, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vV8Uii_F19I/AAAAAAAAAAI/AAAAAAAAAA8/Q0P8fyB3j-c/photo.jpg?sz=128", "display_name": "Tigran Babajanyan", "link": "https://stackoverflow.com/users/4553806/tigran-babajanyan"}, "edited": false, "score": 0, "creation_date": 1533051122, "post_id": 51616199, "comment_id": 90199620, "body": "Can you provide me with your current xml?"}, {"owner": {"reputation": 1715, "user_id": 4553806, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vV8Uii_F19I/AAAAAAAAAAI/AAAAAAAAAA8/Q0P8fyB3j-c/photo.jpg?sz=128", "display_name": "Tigran Babajanyan", "link": "https://stackoverflow.com/users/4553806/tigran-babajanyan"}, "edited": false, "score": 0, "creation_date": 1533051428, "post_id": 51616199, "comment_id": 90199828, "body": "yes of course <a href=\"https://codeshare.io/ado43B\" rel=\"nofollow noreferrer\">codeshare.io/ado43B</a> LifetimeStats extends from LinearLayout"}, {"owner": {"reputation": 849, "user_id": 7749832, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AyjOD.png?s=128&g=1", "display_name": "Caspar Geerlings", "link": "https://stackoverflow.com/users/7749832/caspar-geerlings"}, "reply_to_user": {"reputation": 1715, "user_id": 4553806, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vV8Uii_F19I/AAAAAAAAAAI/AAAAAAAAAA8/Q0P8fyB3j-c/photo.jpg?sz=128", "display_name": "Tigran Babajanyan", "link": "https://stackoverflow.com/users/4553806/tigran-babajanyan"}, "edited": false, "score": 0, "creation_date": 1533051718, "post_id": 51616199, "comment_id": 90200022, "body": "I see you have two nested LinearLayouts, both with a vertical orientation. You should get rid of one and include your   &lt;com.fifth_llc.siply.profile.ui.LifetimeStats&gt;  in the one layout that is left."}], "tags": [], "owner": {"reputation": 849, "user_id": 7749832, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AyjOD.png?s=128&g=1", "display_name": "Caspar Geerlings", "link": "https://stackoverflow.com/users/7749832/caspar-geerlings"}, "is_accepted": false, "score": 2, "last_activity_date": 1533048439, "creation_date": 1533048439, "answer_id": 51616199, "question_id": 51616004, "link": "https://stackoverflow.com/questions/51616004/set-background-png-on-linearlayout-without-affecting-layout-size/51616199#51616199", "title": "set background png on Linearlayout without affecting layout size", "body": "<p>You should use a frame layout with an imageview and a linearlayout inside</p>\n\n<pre><code>&lt;FrameLayout\nandroid:id=\"@+id/FrameLayout1\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"match_parent\"&gt;\n\n&lt;ImageView \n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:adjustViewBounds=\"true\"\n    android:scaleType=\"centerCrop\"\n    android:src=\"@drawable/background\"/&gt;\n\n&lt;LinearLayout\n    ---Your Layout---\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>\n"}], "owner": {"reputation": 1715, "user_id": 4553806, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vV8Uii_F19I/AAAAAAAAAAI/AAAAAAAAAA8/Q0P8fyB3j-c/photo.jpg?sz=128", "display_name": "Tigran Babajanyan", "link": "https://stackoverflow.com/users/4553806/tigran-babajanyan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 627, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1533108901, "creation_date": 1533047891, "last_edit_date": 1533048054, "question_id": 51616004, "link": "https://stackoverflow.com/questions/51616004/set-background-png-on-linearlayout-without-affecting-layout-size", "title": "set background png on Linearlayout without affecting layout size", "body": "<p>Background image doesn't fill Linearlayout and changes that size</p>\n\n<pre><code>  &lt;LinearLayout\n      android:layout_width=\"fill_parent\"\n      android:layout_height=\"fill_parent\"\n      android:background=\"@mipmap/dashboard_background\"\n      android:orientation=\"vertical\"\n      android:padding=\"10dp\"&gt;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/I2EgZ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/I2EgZ.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>desirable look is this </p>\n\n<p><a href=\"https://i.stack.imgur.com/UN61h.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UN61h.png\" alt=\"enter image description here\"></a></p>\n\n<p>How can I reach that?</p>\n"}, {"tags": ["java", "android", "performance", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 3, "last_activity_date": 1533048261, "creation_date": 1533048261, "answer_id": 51616134, "question_id": 51615947, "link": "https://stackoverflow.com/questions/51615947/what-does-it-mean-that-kotlin-based-apps-will-get-a-performance-boost-on-android/51616134#51616134", "title": "What does it mean that Kotlin based apps will get a performance boost on Android P", "body": "<p>The <code>r8</code> tool is gaining the ability to detect specific bytecode patterns produced by the Kotlin compiler and to translate them into more efficient Dalvik bytecode. This doesn't mean that Kotlin can be optimized more than Java, only that Kotlin produces bytecode with a somewhat different structure.</p>\n\n<p>The new r8 tool can also be used to compile apps targeting earlier Android versions, with the same performance gains.</p>\n\n<p>This podcast gives some additional background on r8 and its optimizations: <a href=\"http://androidbackstage.blogspot.com/2018/01/episode-86-its-gr8.html\" rel=\"nofollow noreferrer\">http://androidbackstage.blogspot.com/2018/01/episode-86-its-gr8.html</a></p>\n"}], "owner": {"reputation": 1640, "user_id": 2004186, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/5Gtyd.jpg?s=128&g=1", "display_name": "Krzysztof Skrzynecki", "link": "https://stackoverflow.com/users/2004186/krzysztof-skrzynecki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 51616134, "answer_count": 1, "score": 1, "last_activity_date": 1533048261, "creation_date": 1533047744, "question_id": 51615947, "link": "https://stackoverflow.com/questions/51615947/what-does-it-mean-that-kotlin-based-apps-will-get-a-performance-boost-on-android", "title": "What does it mean that Kotlin based apps will get a performance boost on Android P", "body": "<p>Over the last few of months in a bunch of places I've seen the information that Android P will give the performance boost to Kotlin based apps (e.g. <a href=\"https://www.androidpolice.com/2018/03/07/android-p-feature-spotlight-kotlin-apps-get-performance-boost/\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://beebom.com/new-android-p-features-changes/\" rel=\"nofollow noreferrer\">here</a>). </p>\n\n<p>On the official Android blog, Dave Burke in <a href=\"https://android-developers.googleblog.com/2018/03/previewing-android-p.html\" rel=\"nofollow noreferrer\">\"Previewing Android P\"</a> post described it in a few words:</p>\n\n<blockquote>\n  <p>Kotlin is a first-class language on Android, and if you haven't tried it yet, you should! We've made an enduring commitment to Kotlin in Android and continue to expand support including optimizing the performance of Kotlin code. In P you'll see the first results of this work -- we've improved several compiler optimizations, especially those that target loops, to extract better performance. We're also continuing to work in partnership with JetBrains to optimize Kotlin's generated code. You can get all of the latest Kotlin performance improvements just by keeping Android Studio's Kotlin plugin up-to-date. </p>\n</blockquote>\n\n<p>Does it mean that Kotlin can be optimised more than Java? Isn't true that <code>kotlinc</code> together with <code>javac</code> produces the Java bytecode (as Jake Wharton explains <a href=\"https://youtu.be/CtZL_IjR5Ww?t=7m27s\" rel=\"nofollow noreferrer\">here</a>). Or is it something what <code>d8</code> dexer will take care off? But then won't it be applied to all Android versions? Has Dave meant that new tools for devs to optimise Kotlin code will be releases together with Android P? </p>\n\n<p>Is it possible to differentiate <code>java bytecode</code> coming from <code>Java</code> and <code>Kotlin</code> In the first place? Or does it mean that ART will run <code>java bytecode</code> from <code>Kotlin</code> differently?</p>\n"}, {"tags": ["json", "spring", "spring-boot", "kotlin", "jackson"], "answers": [{"comments": [{"owner": {"reputation": 694, "user_id": 1750213, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Ww9Tg.jpg?s=128&g=1", "display_name": "Zygi", "link": "https://stackoverflow.com/users/1750213/zygi"}, "edited": false, "score": 0, "creation_date": 1533106640, "post_id": 51616483, "comment_id": 90218596, "body": "Oo man I havn&#39;t noticed this private modifier... :( This field don&#39;t have to be private. Thanks for the good perceptiveness. What a stupid mistake..."}], "tags": [], "owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "is_accepted": true, "score": 2, "last_activity_date": 1533049724, "last_edit_date": 1533049724, "creation_date": 1533049319, "answer_id": 51616483, "question_id": 51615188, "link": "https://stackoverflow.com/questions/51615188/spring-boot-include-id-field-in-json/51616483#51616483", "title": "Spring Boot include ID field in json", "body": "<p>By declaring a member property private you're telling Kotlin not to generate a getter for it.<br>\nJackson, which is used by SpringBoot, uses getters to serialize objects.<br>\nThat's the reason it doesn't see your property. And if it doesn't see the property, it doesn't get annotation either.<br>\nEasiest way to solve it would be to leave it as a <code>val</code>, but make it not private: <code>val sideNumber: Int</code></p>\n\n<p>More complicated way would be to create a @Bean of type ObjectMapper and configure Jackson to serialize also private members, as described here: <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/howto-spring-mvc.html#howto-customize-the-jackson-objectmapper\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/current/reference/html/howto-spring-mvc.html#howto-customize-the-jackson-objectmapper</a></p>\n"}], "owner": {"reputation": 694, "user_id": 1750213, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Ww9Tg.jpg?s=128&g=1", "display_name": "Zygi", "link": "https://stackoverflow.com/users/1750213/zygi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 784, "favorite_count": 0, "accepted_answer_id": 51616483, "answer_count": 1, "score": 3, "last_activity_date": 1533059441, "creation_date": 1533045621, "last_edit_date": 1533049266, "question_id": 51615188, "link": "https://stackoverflow.com/questions/51615188/spring-boot-include-id-field-in-json", "title": "Spring Boot include ID field in json", "body": "<p>I'm using <code>spring-boot-starter-web</code> and I want to use <code>sideNumber</code> of the bus as the <code>Id</code> value and return this value in a JSON repsonse.</p>\n\n<p>Probably it's very simple but everything I found is related to Spring Data Rest. </p>\n\n<p>Here is my entity clas:</p>\n\n<pre><code>@Entity\n@Table(name = \"buses\")\nclass Bus(\n        @Id\n        @JsonProperty(\"sideNumber\")\n        @JsonInclude\n        private val sideNumber: Int,\n        @NotBlank\n        var longitude: Double,\n        @NotBlank\n        var latitude: Double\n)\n</code></pre>\n\n<p>I tried to annotate the <code>sideNumber(Id)</code> property with <code>@JsonInclude</code> and <code>@Jsonproperty</code> but with no luck. In my JSON response I only get longitude and latitude.</p>\n\n<p>My controller looks like this:</p>\n\n<pre><code>@RestController\n@RequestMapping(\"/api\")\nclass BusController {\n\n@Autowired\nprivate lateinit var busRepository: BusRepository\n\n@GetMapping(\"/buses\")\nfun getAllBuses(): List&lt;Bus&gt; {\n    return busRepository.findAll()\n}\n\n@PostMapping(\"/buses\")\nfun createBus(@Valid @RequestBody bus: Bus): Bus {\n    return busRepository.save(bus)\n}\n\n@GetMapping(\"/buses/{sideNumber}\")\nfun getBusById(@PathVariable(value = \"sideNumber\") sideNumber: Long): Bus {\n    return busRepository.findById(sideNumber)\n            .orElseThrow { ResourceNotFoundException(\"Bus\", \"sideNumber\", sideNumber) }\n}\n\n@PutMapping(\"/buses/{sideNumber}\")\nfun updateBus(@PathVariable(value = \"sideNumber\") sideNumber: Long,\n               @Valid @RequestBody newBus: Bus): Bus {\n\n    val bus = busRepository.findById(sideNumber)\n            .orElseThrow { ResourceNotFoundException(\"Bus\", \"sideNumber\", sideNumber) }\n\n    bus.latitude = newBus.latitude\n    bus.longitude = newBus.longitude\n\n    return busRepository.save(bus)\n}\n\n@DeleteMapping(\"/buses/{sideNumber}\")\nfun deleteBus(@PathVariable(value = \"sideNumber\") sideNumber: Long): ResponseEntity&lt;*&gt; {\n    val bus = busRepository.findById(sideNumber)\n            .orElseThrow { ResourceNotFoundException(\"Bus\", \"sideNumber\", sideNumber) }\n\n    busRepository.delete(bus)\n\n    return ResponseEntity.ok().build&lt;Any&gt;()\n}\n}\n</code></pre>\n\n<p>What do I have to do to include this <code>sideNumber(id)</code> property into the JSON response?</p>\n"}, {"tags": ["android", "kotlin", "dagger-2"], "comments": [{"owner": {"reputation": 567, "user_id": 2829252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ET2VV.jpg?s=128&g=1", "display_name": "Sijan Gurung", "link": "https://stackoverflow.com/users/2829252/sijan-gurung"}, "edited": false, "score": 0, "creation_date": 1533044735, "post_id": 51614787, "comment_id": 90195077, "body": "Have you tried using Singleton DI . From your question its the only thing that i can think of now.  Try @Singleton  Try this reference to know more..  <a href=\"https://android.jlelse.eu/dagger-2-part-i-basic-principles-graph-dependencies-scopes-3dfd032ccd82\" rel=\"nofollow noreferrer\">android.jlelse.eu/&hellip;</a>"}, {"owner": {"reputation": 606, "user_id": 8506507, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/643256822508217/picture?type=large", "display_name": "Kamo Spertsian", "link": "https://stackoverflow.com/users/8506507/kamo-spertsian"}, "reply_to_user": {"reputation": 567, "user_id": 2829252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ET2VV.jpg?s=128&g=1", "display_name": "Sijan Gurung", "link": "https://stackoverflow.com/users/2829252/sijan-gurung"}, "edited": false, "score": 0, "creation_date": 1533045351, "post_id": 51614787, "comment_id": 90195485, "body": "@SijanGurung I already have FrgamentLevel scope for each module dependencies. Singleton scope is top-level and can&#39;t by applied in my situation. By the way, I&#39;ve already found the answer (see below)."}], "answers": [{"tags": [], "owner": {"reputation": 606, "user_id": 8506507, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/643256822508217/picture?type=large", "display_name": "Kamo Spertsian", "link": "https://stackoverflow.com/users/8506507/kamo-spertsian"}, "is_accepted": true, "score": 0, "last_activity_date": 1533044965, "creation_date": 1533044965, "answer_id": 51614971, "question_id": 51614787, "link": "https://stackoverflow.com/questions/51614787/bidirectional-dependency-with-dagger-2/51614971#51614971", "title": "Bidirectional dependency with Dagger 2", "body": "<p>The problem is fixed after adding <code>@FragmentLevel</code> scope to <code>Presenter</code>.</p>\n"}], "owner": {"reputation": 606, "user_id": 8506507, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/643256822508217/picture?type=large", "display_name": "Kamo Spertsian", "link": "https://stackoverflow.com/users/8506507/kamo-spertsian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 51614971, "answer_count": 1, "score": 0, "last_activity_date": 1533044965, "creation_date": 1533044371, "question_id": 51614787, "link": "https://stackoverflow.com/questions/51614787/bidirectional-dependency-with-dagger-2", "title": "Bidirectional dependency with Dagger 2", "body": "<p>I'm experimenting with VIPER architecture in my Android app. I use Dagger 2.11 for DI.</p>\n\n<p>Dependencies I have for each VIPER module are:</p>\n\n<ol>\n<li><code>Presenter</code> and <code>Fragment</code> are linked via <code>ViewInput</code> and <code>ViewOutput</code> interfaces.</li>\n<li><code>Presenter</code> and <code>Interactor</code> are linked via <code>InteractorInput</code> and <code>InteractorOutput</code> interfaces.</li>\n<li>Some other dependencies, we are not interested in.</li>\n</ol>\n\n<p>This is how my Dagger Module looks like:</p>\n\n<pre><code>Module(includes = [Module.Declarations::class])\nclass Module(private val viewInput: ViewInput) {\n\n    @Module\n    interface Declarations {\n\n        @Binds\n        @FragmentLevel\n        fun bindViewOutput(viewOutput: Presenter): ViewOutput\n\n        @Binds\n        @FragmentLevel\n        fun bindInteractorOutput(interactorOutput: Presenter): InteractorOutput\n\n        @Binds\n        @FragmentLevel\n        fun bindInteractorInput(interactorInput: Interactor): InteractorInput\n    }\n\n    @Provides\n    @FragmentLevel\n    fun provideViewInput() = viewInput\n}\n</code></pre>\n\n<p>Now when I call <code>inject</code> in my <code>Fragment</code> the following happens:</p>\n\n<ol>\n<li><code>Presenter</code> is injected into <code>Fragment</code> via <code>ViewOutput</code> interface</li>\n<li><code>Interactor</code> is injected into <code>Presenter</code> via <code>InteractorInput</code> interface</li>\n<li><code>Presenter</code> is <strong>not</strong> injected into <code>Interactor</code>, because of <code>Lazy</code> type (to prevent cyclic dependencies).</li>\n<li>After the first call of <code>Lazy.get()</code> <code>Presenter</code> is injected into <code>Interactor</code> via <code>InteractorOutput</code> interface.</li>\n</ol>\n\n<p>The problem is that in the 1st and 4th steps <strong>different</strong> instances of <code>Presenter</code> are injected. How can I make dagger inject the same presenter into <code>Fragment</code> and <code>Interactor</code>?</p>\n\n<p>Or maybe I need to fix the dependency cycle in the other way?</p>\n"}, {"tags": ["gradle", "kotlin", "gradle-kotlin-dsl"], "comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1533045982, "post_id": 51614763, "comment_id": 90195923, "body": "Did you check this answer? <a href=\"https://stackoverflow.com/a/17124000/2196460\">stackoverflow.com/a/17124000/2196460</a> It requires a custom class task, but that looks quite simple."}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 1, "creation_date": 1533046015, "post_id": 51614763, "comment_id": 90195945, "body": "Alternatively, there&#39;s a plugin that can do that: <a href=\"https://github.com/michel-kraemer/gradle-download-task\" rel=\"nofollow noreferrer\">github.com/michel-kraemer/gradle-download-task</a>"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1533047254, "post_id": 51614763, "comment_id": 90196825, "body": "If you struggle over translating a specific piece of a Groovy solution to Kotlin DSL, please ask a more specific question about that."}, {"owner": {"reputation": 1504, "user_id": 3742743, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a7b88f9c2acb1a1587fc8a920174d9e1?s=128&d=identicon&r=PG&f=1", "display_name": "warch", "link": "https://stackoverflow.com/users/3742743/warch"}, "reply_to_user": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1533068366, "post_id": 51614763, "comment_id": 90208330, "body": "@hotkey how do i use this with kotlin"}], "answers": [{"comments": [{"owner": {"reputation": 2884, "user_id": 5562901, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/tVhEf.jpg?s=128&g=1", "display_name": "Saurabh Padwekar", "link": "https://stackoverflow.com/users/5562901/saurabh-padwekar"}, "edited": false, "score": 0, "creation_date": 1597559433, "post_id": 51631462, "comment_id": 112168408, "body": "I am new to kotlin gradle but adding the plugin in the same files gave me this error : The plugins {} block must not be used here. If you need to apply a plugin imperatively, please use apply&lt;PluginType&gt;()"}], "tags": [], "owner": {"reputation": 1504, "user_id": 3742743, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a7b88f9c2acb1a1587fc8a920174d9e1?s=128&d=identicon&r=PG&f=1", "display_name": "warch", "link": "https://stackoverflow.com/users/3742743/warch"}, "is_accepted": true, "score": 5, "last_activity_date": 1533121620, "last_edit_date": 1533121620, "creation_date": 1533120738, "answer_id": 51631462, "question_id": 51614763, "link": "https://stackoverflow.com/questions/51614763/gradle-kotlin-dsl-download-file/51631462#51631462", "title": "gradle + kotlin-dsl: download file", "body": "<p>I found a solution using <a href=\"https://github.com/michel-kraemer/gradle-download-task\" rel=\"noreferrer\">https://github.com/michel-kraemer/gradle-download-task</a>:</p>\n\n<pre><code>import de.undercouch.gradle.tasks.download.Download\n\n...\n\nplugins {\n  ....\n  id(\"de.undercouch.download\").version(\"3.4.3\")\n}\n\n...\n\ntask&lt;DefaultTask&gt;(\"my-download-task\") {\n  ...\n  val url = \" ... \"\n  val dest = File(\"...\")\n  task&lt;Download&gt;(\"download-task\") {\n    src(url)\n    dest(dest)\n  }\n  dependsOn(\"download-task\")\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2884, "user_id": 5562901, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/tVhEf.jpg?s=128&g=1", "display_name": "Saurabh Padwekar", "link": "https://stackoverflow.com/users/5562901/saurabh-padwekar"}, "is_accepted": false, "score": 0, "last_activity_date": 1597563458, "creation_date": 1597563458, "answer_id": 63434351, "question_id": 51614763, "link": "https://stackoverflow.com/questions/51614763/gradle-kotlin-dsl-download-file/63434351#63434351", "title": "gradle + kotlin-dsl: download file", "body": "<p>Simple with no external dependency.</p>\n<pre><code>buildscript {\n    repositories {\n        jcenter()\n        google()\n    }\n\n    dependencies {\n        classpath(&quot;com.android.tools.build:gradle:4.0.1&quot;)\n    }\n}\n\ntasks.register(&quot;downloadPdf&quot;){\n    val path = &quot;myfile.pdf&quot;\n    val sourceUrl = &quot;https://file-examples-com.github.io/uploads/2017/10/file-sample_150kB.pdf&quot;\n    download(sourceUrl,path)\n}\n\nfun download(url : String, path : String){\n    val destFile = File(path)\n    ant.invokeMethod(&quot;get&quot;, mapOf(&quot;src&quot; to url, &quot;dest&quot; to destFile))\n}\n</code></pre>\n"}], "owner": {"reputation": 1504, "user_id": 3742743, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a7b88f9c2acb1a1587fc8a920174d9e1?s=128&d=identicon&r=PG&f=1", "display_name": "warch", "link": "https://stackoverflow.com/users/3742743/warch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 905, "favorite_count": 0, "accepted_answer_id": 51631462, "answer_count": 2, "score": 2, "last_activity_date": 1597563458, "creation_date": 1533044285, "last_edit_date": 1533044914, "question_id": 51614763, "link": "https://stackoverflow.com/questions/51614763/gradle-kotlin-dsl-download-file", "title": "gradle + kotlin-dsl: download file", "body": "<p>How could I download a file within a <strong>gradle task</strong> with <strong>kotlin-dsl</strong>?</p>\n\n<p>I want to download a file from an external source (URL) and store + rename it inside my projectfolder.</p>\n\n<p>I tried to search it but I  only found groovy solutions.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["android", "c++", "kotlin", "android-ndk"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1533043635, "post_id": 51613950, "comment_id": 90194289, "body": "JNI is a C interface.  You will need to develop a wrapper to call/use C++. Full documentation, examples etc is here: <a href=\"https://developer.android.com/ndk/\" rel=\"nofollow noreferrer\">developer.android.com/ndk</a>"}, {"owner": {"reputation": 3061, "user_id": 10159898, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5mqHUyc2x6w/AAAAAAAAAAI/AAAAAAAAD1g/QPOjkkQJ8Qw/photo.jpg?sz=128", "display_name": "Bruno", "link": "https://stackoverflow.com/users/10159898/bruno"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1533045617, "post_id": 51613950, "comment_id": 90195664, "body": "I read this but samples are not really clear ;) Does it mean that my wrapper must contain the <code>JNIEXPORT</code> macro with the <code>Java_my_package_name_SomeClass_someMethod()</code> definitions ? I&#39;ve just found <a href=\"https://github.com/googlesamples/android-ndk/tree/master/kotlin-app/nn-sample-kotlinApp\" rel=\"nofollow noreferrer\">this sample</a> using a C++ object. I&#39;ll try it"}], "answers": [{"tags": [], "owner": {"reputation": 3061, "user_id": 10159898, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5mqHUyc2x6w/AAAAAAAAAAI/AAAAAAAAD1g/QPOjkkQJ8Qw/photo.jpg?sz=128", "display_name": "Bruno", "link": "https://stackoverflow.com/users/10159898/bruno"}, "is_accepted": true, "score": 3, "last_activity_date": 1534164814, "creation_date": 1534164814, "answer_id": 51822880, "question_id": 51613950, "link": "https://stackoverflow.com/questions/51613950/kotlin-ndk-and-c-interactions/51822880#51822880", "title": "Kotlin, NDK and C++ interactions", "body": "<p>Ok, thanks to @Richard, here is my wrapper</p>\n\n<p><strong>ObjectWrapper.kt</strong></p>\n\n<p>Exposes the API I want to use. The keyword <code>external</code> of the method indicates that the body is elsewhere. In my case, in the native layer of the wrapper.</p>\n\n<pre><code>class ObjectWrapper {\n\n    companion object {\n        init {\n            System.loadLibrary(\"mylibrary\")\n        }\n    }\n\n    external fun sayHello(name: String): String\n}\n</code></pre>\n\n<p><strong>MyLibrary.cpp</strong></p>\n\n<p>Same API as the kotlin part but the methods are named with the completed package name. Here, I have to the translation between the kotlin world and the native world.</p>\n\n<pre><code>#include &lt;jni.h&gt;\n#include &lt;string&gt;\n#include \"Object.h\"\n\nstatic Object *pObject = NULL;\n\nextern \"C\" {\n    JNIEXPORT jstring Java_com_packagename_ObjectWrapper_sayHello(\n            JNIEnv *env,\n            jobject /* this */,\n            jstring input) {\n        pObject = new Object();\n        const char *msg = env-&gt;GetStringUTFChars(input, JNI_FALSE);\n        std::string hello = pObject-&gt;getHelloString(msg);\n        return env-&gt;NewStringUTF(hello.c_str());\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 3061, "user_id": 10159898, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5mqHUyc2x6w/AAAAAAAAAAI/AAAAAAAAD1g/QPOjkkQJ8Qw/photo.jpg?sz=128", "display_name": "Bruno", "link": "https://stackoverflow.com/users/10159898/bruno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1344, "favorite_count": 1, "accepted_answer_id": 51822880, "answer_count": 1, "score": 1, "last_activity_date": 1534164914, "creation_date": 1533041864, "last_edit_date": 1534164914, "question_id": 51613950, "link": "https://stackoverflow.com/questions/51613950/kotlin-ndk-and-c-interactions", "title": "Kotlin, NDK and C++ interactions", "body": "<p>I'm not familiar with the Android NDK and I need help to build a Kotlin application using native part of code written in C++. I've found HelloWorld sample using a basic C function but no examples or tutorial using C++ objects.</p>\n\n<p>Let's say I have a C++ object, with hpp and cpp file:</p>\n\n<p><strong>object.hpp</strong></p>\n\n<pre><code>#ifdef object_hpp\n#define object_hpp\n//\n// include part\n//\n\nclass Object {\n  // some stuff\n}\n#endif\n</code></pre>\n\n<p><strong>object.cpp</strong></p>\n\n<pre><code>#include \"object.hpp\"\n\nObject::Object()\n{\n  //constructor\n}\n\nstd::string Object::sayHello(std::string value)\n{\n  // do stuff\n}\n</code></pre>\n\n<p>I want to know what is the best way to use it in a Kotlin app:</p>\n\n<ul>\n<li>must I generate first a library (.so or .a ?) and import it into my app ? If so, is there anything to change in the C++ code ?</li>\n<li>can I import these C++ files into my project (with C++ support, I know it) ? If yes, how can I use it ?</li>\n</ul>\n\n<p>I've read about <code>JNIEXPORT</code> and <code>Java_my_package_name_SomeClass_someMethod()</code> but I'm not sure how to use it: do I need to modify the C++ code itself or should I develop a wrapper to it ?</p>\n\n<p>Many thanks in advance for your help.</p>\n"}, {"tags": ["android", "ios", "swift", "kotlin"], "comments": [{"owner": {"reputation": 10456, "user_id": 9241978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7f9d2a03452f74bfd802e36d50b7db?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel", "link": "https://stackoverflow.com/users/9241978/pawel"}, "edited": false, "score": 1, "creation_date": 1533038616, "post_id": 51612914, "comment_id": 90190730, "body": "This &quot;object: Closure&quot; is called an &quot;anonymous class&quot;."}, {"owner": {"reputation": 5335, "user_id": 6920962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e62cd73355fc90d37429f9443df38da?s=128&d=identicon&r=PG&f=1", "display_name": "user28434", "link": "https://stackoverflow.com/users/6920962/user28434"}, "edited": false, "score": 0, "creation_date": 1533040385, "post_id": 51612914, "comment_id": 90192087, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/24408068/anonymous-class-in-swift\">Anonymous class in swift</a>"}, {"owner": {"reputation": 145, "user_id": 6620497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/647f9fc01e6a71682c2332c9b6489d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Yankov", "link": "https://stackoverflow.com/users/6620497/nikita-yankov"}, "reply_to_user": {"reputation": 5335, "user_id": 6920962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e62cd73355fc90d37429f9443df38da?s=128&d=identicon&r=PG&f=1", "display_name": "user28434", "link": "https://stackoverflow.com/users/6920962/user28434"}, "edited": false, "score": 0, "creation_date": 1533040754, "post_id": 51612914, "comment_id": 90192348, "body": "@user28434 language which was used in &#39;14 has quite changed. Actually Swift 4 is completely different from that which used in marked answer (despite that fact that it was throwing an error at compile-time)"}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "reply_to_user": {"reputation": 10456, "user_id": 9241978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7f9d2a03452f74bfd802e36d50b7db?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel", "link": "https://stackoverflow.com/users/9241978/pawel"}, "edited": false, "score": 2, "creation_date": 1533040881, "post_id": 51612914, "comment_id": 90192443, "body": "@Pawel It would be called that in Java, but in Kotlin it&#39;s an <a href=\"https://kotlinlang.org/docs/reference/object-declarations.html\" rel=\"nofollow noreferrer\">&quot;object expression&quot;</a>."}, {"owner": {"reputation": 2931, "user_id": 2148666, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uLn2O.jpg?s=128&g=1", "display_name": "Nicol&#225;s Carrasco", "link": "https://stackoverflow.com/users/2148666/nicol%c3%a1s-carrasco"}, "reply_to_user": {"reputation": 5335, "user_id": 6920962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e62cd73355fc90d37429f9443df38da?s=128&d=identicon&r=PG&f=1", "display_name": "user28434", "link": "https://stackoverflow.com/users/6920962/user28434"}, "edited": false, "score": 1, "creation_date": 1533043288, "post_id": 51612914, "comment_id": 90194067, "body": "I think there is no equivalent concept in Swift 4, even when there are ways to emulate it as depicted in the question that @user28434 linked. Your best bet is to use a plain, old, and boring struct/class that implements the protocol/interface you&#39;re interested in"}], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 6620497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/647f9fc01e6a71682c2332c9b6489d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Yankov", "link": "https://stackoverflow.com/users/6620497/nikita-yankov"}, "edited": false, "score": 0, "creation_date": 1533039338, "post_id": 51613031, "comment_id": 90191292, "body": "Actually, It&#39;s not exactly the same, cause with trailing closure, inside of calling function you can only &quot;call&quot; this closure, but with, as @Pawel mentioned, anonymous class - you receive a whole object inside calling function, and you will be available to choose whatever you want to do with it, rather calling its methods or setting parameters."}, {"owner": {"reputation": 26340, "user_id": 5501940, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/eSugZ.jpg?s=128&g=1", "display_name": "Ahmad F", "link": "https://stackoverflow.com/users/5501940/ahmad-f"}, "reply_to_user": {"reputation": 145, "user_id": 6620497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/647f9fc01e6a71682c2332c9b6489d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Yankov", "link": "https://stackoverflow.com/users/6620497/nikita-yankov"}, "edited": false, "score": 0, "creation_date": 1533039471, "post_id": 51613031, "comment_id": 90191392, "body": "@NikitaYankov mmm, seems that I misunderstand something here, could you please elaborate?"}, {"owner": {"reputation": 145, "user_id": 6620497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/647f9fc01e6a71682c2332c9b6489d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Yankov", "link": "https://stackoverflow.com/users/6620497/nikita-yankov"}, "edited": false, "score": 0, "creation_date": 1533040253, "post_id": 51613031, "comment_id": 90191994, "body": "I edited my question - it&#39;s impossible to format a code in a comment :C"}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 1, "creation_date": 1533041049, "post_id": 51613031, "comment_id": 90192551, "body": "Kotlin has trailing closure syntax, but this question doesn&#39;t show it. This is about declaring a full object that implements all the methods of the given interface (not necessarily a SAM interface) and may contain property declarations as well."}], "tags": [], "owner": {"reputation": 26340, "user_id": 5501940, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/eSugZ.jpg?s=128&g=1", "display_name": "Ahmad F", "link": "https://stackoverflow.com/users/5501940/ahmad-f"}, "is_accepted": false, "score": 0, "last_activity_date": 1533040818, "last_edit_date": 1533040818, "creation_date": 1533038775, "answer_id": 51613031, "question_id": 51612914, "link": "https://stackoverflow.com/questions/51612914/swift-4-equivalent-of-kotlin-anonymous-class-notation/51613031#51613031", "title": "Swift 4 equivalent of Kotlin &quot;anonymous class&quot; notation", "body": "<p>Its seems to be <strong><em>trailing closure</em></strong>. Adapted from <a href=\"https://docs.swift.org/swift-book/LanguageGuide/Closures.html\" rel=\"nofollow noreferrer\">Swift programming language - Closures</a>:</p>\n\n<blockquote>\n  <p>If you need to pass a closure expression to a function as the\n  function\u2019s <em>final argument</em> and the closure expression is long, it can\n  be useful to write it as a trailing closure instead. A trailing\n  closure is written after the function call\u2019s parentheses, even though\n  it is still an argument to the function. When you use the trailing\n  closure syntax, you don\u2019t write the argument label for the closure as\n  part of the function call.</p>\n</blockquote>\n\n<p><strong>Let's code it:</strong></p>\n\n<p>Simply, all you have to do is just to create a function which its last argument is a closure:</p>\n\n<pre><code>func doSomething(firstParameter: Any, closure: () -&gt; Void) { }\n</code></pre>\n\n<p>thus you could call it as:</p>\n\n<pre><code>doSomething(firstParameter: \"whatever\") {\n    // ...\n}\n</code></pre>\n\n<p>Nothing special goes here, it is a cool feature from the Swift language to \"trail\" <code>closure</code> parameter if its the last one in the function signature.</p>\n\n<p>In case of initialization, it is almost the same:</p>\n\n<pre><code>struct MyObject {\n    init(firstParameter: Any, closure: () -&gt; Void) { }\n}\n\nlet variable = MyObject(firstParameter: \"whatever\") {  }\n</code></pre>\n\n<p>Certainly, this pattern is followed by many other functions in the language, but here is an example of the <code>merge</code> method for the Dictionary, you could recognize how you could type it in more than one way as mentioned in the answers of: <a href=\"https://stackoverflow.com/questions/51585897/map-dictionary-keys-to-add-values-swift\">Map Dictionary Keys to add values - Swift</a>.</p>\n\n<hr>\n\n<p><strong>Update:</strong></p>\n\n<p>If you are aiming to use it as constant/variable -to be passed for a function for example-, you could do it like this:</p>\n\n<pre><code>let variable: (String) -&gt; Void = { name in\n    print(\"The name is: \\(name)!\")\n}\n</code></pre>\n\n<p>At this point, <code>variable</code> type is <code>(String) -&gt; Void</code> which means that its a constant that could be passed somewhere else; Consider the following method:</p>\n\n<pre><code>func doSomething(closure: (String) -&gt; Void) {\n    closure(\"Nikita\")\n}\n</code></pre>\n\n<p>Because <code>doSomething</code> takes a parameter of type <code>(String) -&gt; Void</code>, you could do:</p>\n\n<pre><code>doSomething(closure: variable) // The name is: Nikita!\n</code></pre>\n\n<p>instead of calling it as:</p>\n\n<pre><code>doSomething { name in\n    print(\"The name is: \\(name)!\")\n}\n</code></pre>\n\n<p>which prevents the boilerplate code.</p>\n"}], "owner": {"reputation": 145, "user_id": 6620497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/647f9fc01e6a71682c2332c9b6489d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Yankov", "link": "https://stackoverflow.com/users/6620497/nikita-yankov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 573, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1533045183, "creation_date": 1533038388, "last_edit_date": 1533045183, "question_id": 51612914, "link": "https://stackoverflow.com/questions/51612914/swift-4-equivalent-of-kotlin-anonymous-class-notation", "title": "Swift 4 equivalent of Kotlin &quot;anonymous class&quot; notation", "body": "<p>I've been writing in Kotlin for a while, and I get used to use next pattern:</p>\n\n<pre><code>variable.addSomething(object: TargetType() { ...code... })\n</code></pre>\n\n<p>or</p>\n\n<pre><code>var variable = object: TargetType() { ...code... }\n</code></pre>\n\n<p>(if i'm not missing something)</p>\n\n<p>Is it possible to somehow use this pattern in Swift ? And how is it called ? :)</p>\n\n<p><strong>Edit</strong>:\nWhat I actually want to do - to store preconfigured RxSwift.SingleEvent in a let / var inside object and reuse it later  multiple times. </p>\n\n<p>In code, as I imagine, it should look like that: </p>\n\n<pre><code>private var observer = SingleEvent&lt;Response&gt;(ok_callback, error_callback) { \n      override success(el: Element) {\n             ok_callback(el)\n             super.success(el)\n    }\n      override error(er: Error) {\n           self.onErrorRetry(er, callback)\n    }\n}\n</code></pre>\n\n<p>And if retry after some magic works - simply call my callback and return back :)</p>\n"}, {"tags": ["spring", "spring-boot", "junit", "kotlin", "spring-boot-test"], "comments": [{"owner": {"reputation": 7918, "user_id": 7554328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/n7jOD.jpg?s=128&g=1", "display_name": "Darren Forsythe", "link": "https://stackoverflow.com/users/7554328/darren-forsythe"}, "edited": false, "score": 0, "creation_date": 1533036111, "post_id": 51612019, "comment_id": 90189064, "body": "Autowire cannot autowire static fields at all.   Setup your repo before each test, not before the class is your only real option."}], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 7665123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/579f6ff9a690f66488452b8aeb6f753c?s=128&d=identicon&r=PG&f=1", "display_name": "Mhy", "link": "https://stackoverflow.com/users/7665123/mhy"}, "edited": false, "score": 0, "creation_date": 1533362545, "post_id": 51636381, "comment_id": 90328522, "body": "Thank you. I tried your solution. Autowired components don&#39;t get initialized when I replace <code>@RunWith(SpringRunner::class)</code> with <code>@ExtendWith(SpringExtension::class)</code>. Any Idea? Another problem is <code>@BeforeAll</code> method doesn&#39;t get invoked! I am using Maven.  I tried <a href=\"https://stackoverflow.com/questions/49441049/junit-5-does-not-execute-method-annotated-with-beforeeach\">this answer</a> but still no luck."}, {"owner": {"reputation": 2785, "user_id": 256245, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/025e9bac298f53bd6515842ca16ca4b1?s=128&d=identicon&r=PG", "display_name": "Fabricio Lemos", "link": "https://stackoverflow.com/users/256245/fabricio-lemos"}, "reply_to_user": {"reputation": 173, "user_id": 7665123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/579f6ff9a690f66488452b8aeb6f753c?s=128&d=identicon&r=PG&f=1", "display_name": "Mhy", "link": "https://stackoverflow.com/users/7665123/mhy"}, "edited": false, "score": 0, "creation_date": 1533653674, "post_id": 51636381, "comment_id": 90420268, "body": "Please post the new code, it will make it better to analyse the problem. You can see a working example of bean autowiring here: <a href=\"https://github.com/fabriciolemos/kotlin-spring-boot-lab/blob/master/src/test/kotlin/com/example/blog/ArticleResourceTest.kt\" rel=\"nofollow noreferrer\">github.com/fabriciolemos/kotlin-spring-boot-lab/blob/master/&zwnj;&#8203;src/&hellip;</a>"}, {"owner": {"reputation": 173, "user_id": 7665123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/579f6ff9a690f66488452b8aeb6f753c?s=128&d=identicon&r=PG&f=1", "display_name": "Mhy", "link": "https://stackoverflow.com/users/7665123/mhy"}, "edited": false, "score": 0, "creation_date": 1534080247, "post_id": 51636381, "comment_id": 90573546, "body": "the problem was spring-boot-starter-test dependency in my pom.xml, which is using junit4 (unless you exclude it). I excluded junit from spring-boot-starter-test in pom and everything works fine now."}], "tags": [], "owner": {"reputation": 2785, "user_id": 256245, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/025e9bac298f53bd6515842ca16ca4b1?s=128&d=identicon&r=PG", "display_name": "Fabricio Lemos", "link": "https://stackoverflow.com/users/256245/fabricio-lemos"}, "is_accepted": true, "score": 0, "last_activity_date": 1533135097, "creation_date": 1533135097, "answer_id": 51636381, "question_id": 51612019, "link": "https://stackoverflow.com/questions/51612019/kotlin-how-to-manage-beforeclass-static-method-in-springboottest/51636381#51636381", "title": "Kotlin - How to manage @BeforeClass static method in springBootTest", "body": "<p>I suggest you switch to Junit 5. It allows you to use <code>@BeforeAll</code> on regular non-static methods. Also, if you use Junit 5 Spring Extension, you\u2019ll be able to inject dependencies into your <code>@BeforeAll</code>.</p>\n\n<p>How you update the JUnit version will depend on which build tool you use (Maven or Gradle). Also you\u2019ll need to replace <code>@RunWith(SpringRunner::class)</code> with <code>@ExtendWith(SpringExtension::class)</code>.</p>\n\n<p>You\u2019ll also need to create the property file <code>src/test/resources/junit-platform.properties</code> with the content: <code>junit.jupiter.testinstance.lifecycle.default = per_class</code>. With this, you will be able to use you to use <code>@BeforeAll</code> on non-static methods.</p>\n\n<p>It might seem a lot, but JUnit 5 is a better fit if you're using Kotlin and Spring Boot.</p>\n\n<p>Reference:  <strong>Testing with JUnit 5</strong> on <a href=\"https://spring.io/guides/tutorials/spring-boot-kotlin/#_testing_with_junit_5\" rel=\"nofollow noreferrer\">Building web applications with Spring Boot and Kotlin</a></p>\n"}, {"tags": [], "owner": {"reputation": 1540, "user_id": 317605, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/142d34ab3d2bc1db26f735a32b358858?s=128&d=identicon&r=PG", "display_name": "sergiofbsilva", "link": "https://stackoverflow.com/users/317605/sergiofbsilva"}, "is_accepted": false, "score": 2, "last_activity_date": 1573216940, "creation_date": 1573216940, "answer_id": 58766834, "question_id": 51612019, "link": "https://stackoverflow.com/questions/51612019/kotlin-how-to-manage-beforeclass-static-method-in-springboottest/58766834#58766834", "title": "Kotlin - How to manage @BeforeClass static method in springBootTest", "body": "<p>If you don't want to upgrade to JUnit5 you can use <code>@PostConstruct</code> it will have the same effect. Example <a href=\"https://stackoverflow.com/a/43961751\">here</a></p>\n"}], "owner": {"reputation": 173, "user_id": 7665123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/579f6ff9a690f66488452b8aeb6f753c?s=128&d=identicon&r=PG&f=1", "display_name": "Mhy", "link": "https://stackoverflow.com/users/7665123/mhy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3409, "favorite_count": 1, "accepted_answer_id": 51636381, "answer_count": 2, "score": 6, "last_activity_date": 1573216940, "creation_date": 1533035480, "last_edit_date": 1533142476, "question_id": 51612019, "link": "https://stackoverflow.com/questions/51612019/kotlin-how-to-manage-beforeclass-static-method-in-springboottest", "title": "Kotlin - How to manage @BeforeClass static method in springBootTest", "body": "<p>I want to have a @BeforeClass method in my springBootTest, which should be static and declared in \"companion object\".</p>\n\n<pre><code>@RunWith(SpringRunner::class)\n@SpringBootTest\n@ActiveProfiles(\"test\")\nopen class MyTest {\ncompanion object {\n\n    @Autowired\n    lateinit var repo: MyRepository\n\n    @BeforeClass\n    @JvmStatic\n    fun X() {\n        user = User()\n        repo.save(user)\n    }\n\n}\n</code></pre>\n\n<p>On the other hand I should use some Autowired components in this method, but as mentioned <a href=\"https://stackoverflow.com/questions/46596751/can-i-write-a-kotlin-extension-function-that-uses-an-autowired-spring-bean/50090579\">here</a> is not possible in static context and I got this error:</p>\n\n<pre><code>lateinit property repo has not been initialized\n</code></pre>\n\n<p>Any suggestion about how should I handle this situation?</p>\n"}, {"tags": ["android", "kotlin", "google-cloud-firestore"], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 11177480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cd9bd1926ae77c12bb027ff8cb4f7fb?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Skudnyakov", "link": "https://stackoverflow.com/users/11177480/nick-skudnyakov"}, "is_accepted": true, "score": 1, "last_activity_date": 1552172006, "creation_date": 1552172006, "answer_id": 55082770, "question_id": 51611632, "link": "https://stackoverflow.com/questions/51611632/saving-a-firestore-object-throws-invocationtargetexception-error/55082770#55082770", "title": "Saving a Firestore object throws InvocationTargetException error", "body": "<p>A firebase class <code>CustomClassMapper</code> has a method:</p>\n\n<pre><code>private static boolean shouldIncludeGetter(Method method) {\n    if (!method.getName().startsWith(\"get\") &amp;&amp; !method.getName().startsWith(\"is\")) {\n        return false;\n    } else if (method.getDeclaringClass().equals(Object.class)) {\n        return false;\n    } else if (!Modifier.isPublic(method.getModifiers())) {\n        return false;\n    } else if (Modifier.isStatic(method.getModifiers())) {\n        return false;\n    } else if (method.getReturnType().equals(Void.TYPE)) {\n        return false;\n    } else if (method.getParameterTypes().length != 0) {\n        return false;\n    } else {\n        return !method.isAnnotationPresent(Exclude.class);\n    }\n}\n</code></pre>\n\n<p>So reflection is used to serialize methods that look like getters. Later these methods will be invoked using reflection. And this invocation throws some exception, which is hidden in <code>InvocationTargetException</code></p>\n\n<p>So, to avoid the <code>InvocationTargetException</code>, just check that methods don't throw exceptions, because they are invoked during the serialization</p>\n"}], "owner": {"reputation": 2374, "user_id": 3442783, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NgVum.jpg?s=128&g=1", "display_name": "Chris Edgington", "link": "https://stackoverflow.com/users/3442783/chris-edgington"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 424, "favorite_count": 0, "accepted_answer_id": 55082770, "answer_count": 1, "score": 1, "last_activity_date": 1552172006, "creation_date": 1533034245, "question_id": 51611632, "link": "https://stackoverflow.com/questions/51611632/saving-a-firestore-object-throws-invocationtargetexception-error", "title": "Saving a Firestore object throws InvocationTargetException error", "body": "<p>It's taken me around an hour to debug this issue so I was wondering whether someone would be able to explain what's going on here. </p>\n\n<p>I'm trying to save a Firestore custom object on Android (in Kotlin). Here's a simplified version - </p>\n\n<pre><code>class MockTransaction {\n\n    val endpoint: String = \"mockTransactions\"\n\n    var fromAddress: String = \"\"\n    var toAddress: String = \"\"\n    var amount: Double = 0.0\n\n    constructor() {}\n\n    constructor(from: String, to: String, amount: Double) {\n        this.fromAddress = from\n        this.toAddress = to\n        this.amount = amount\n    }\n\n    fun isValid(): Boolean {\n        return true\n    }\n\n    fun save() {\n        val db = FirebaseFirestore.getInstance()\n        db.collection(endpoint).add(this).addOnCompleteListener {\n            Log.d(\"TX\", it.isSuccessful.toString() )\n            Log.d(\"TX\", it.exception.toString())\n        }\n    }\n\n}\n\nval tx = MockTransaction(\"Alice\", \"Bob\", 100.0)\ntx.save()\n</code></pre>\n\n<p>Now if I change the <code>isValid</code> function to throw an exception like so </p>\n\n<pre><code>fun isValid(): Boolean {\n    throw TransactionException(\"No signature found\")\n}\n</code></pre>\n\n<p>The save method with throw an error </p>\n\n<blockquote>\n  <p>java.lang.reflect.InvocationTargetException</p>\n</blockquote>\n\n<p>If I change the function <em>name</em> to simply <code>fun valid()</code> then the save works. </p>\n\n<p>I'm just curious as to why the name of the function matters? I've also tried changing it to something like <code>fun isARadioactiveSpider()</code> and you get the same error.</p>\n"}, {"tags": ["java", "android", "kotlin"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user8959091"}, "is_accepted": true, "score": 0, "last_activity_date": 1533032676, "creation_date": 1533032676, "answer_id": 51611152, "question_id": 51610938, "link": "https://stackoverflow.com/questions/51610938/how-do-i-get-the-id-of-a-drawable-and-give-it-to-a-function/51611152#51611152", "title": "How do I get the ID of a drawable and give it to a function?", "body": "<p>Have you tried:  <br/></p>\n\n<pre><code>val resID = resources.getIdentifier(\"drawable_name\", \"drawable\", packageName)\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 10092826, "user_type": "registered", "profile_image": "https://graph.facebook.com/1990558550997130/picture?type=large", "display_name": "Usama Jawad", "link": "https://stackoverflow.com/users/10092826/usama-jawad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 51611152, "answer_count": 1, "score": 0, "last_activity_date": 1533032676, "creation_date": 1533031999, "question_id": 51610938, "link": "https://stackoverflow.com/questions/51610938/how-do-i-get-the-id-of-a-drawable-and-give-it-to-a-function", "title": "How do I get the ID of a drawable and give it to a function?", "body": "<p>I have this scrollview in which I want to inflate a 1920x1080 background image. If I add it statically via xml, my app lags in animations and general responsiveness. <a href=\"https://stackoverflow.com/questions/14269186/android-background-image-slows-down-app\">I checked StackOverflow</a> and it's something that is expected to happen because images are uncompressed in memory.</p>\n\n<p>Now, in the same thread linked above, a suggested answer is to use a setBackground function which uses BitmapFactory to dynamically resize and set the image as follows:</p>\n\n<pre><code>fun setBackground(context: Context, view: View, drawableId: Int) {\n    var bitmap = BitmapFactory.decodeResource(context.getResources(), drawableId)\n    val width = Resources.getSystem().getDisplayMetrics().widthPixels\n    val height = Resources.getSystem().getDisplayMetrics().heightPixels\n    bitmap = Bitmap.createScaledBitmap(bitmap, width, height, true)\n    val bitmapDrawable = BitmapDrawable(context.getResources(), bitmap)\n    view.background = bitmapDrawable\n}\n</code></pre>\n\n<p>However, as can be seen, this image requires the drawable's ID, which I haven't been able to get. I checked similar questions and found conflicting answers with some saying that it's not possible to get drawable IDs, and other's suggesting some ImageView-related methods that aren't related to my problem (inflating a scrollview). So, can anybody please name a method in Java/Kotlin that allows me to get my drawable image's ID? If that's not possible, can you please suggest another workaround?</p>\n"}, {"tags": ["android", "kotlin", "android-camera2", "grafika"], "comments": [{"owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 0, "creation_date": 1536738544, "post_id": 51610777, "comment_id": 91527891, "body": "I hope <a href=\"https://stackoverflow.com/a/46405261/192373\">this answer</a> can help."}], "owner": {"reputation": 21, "user_id": 8958522, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214809458055869/picture?type=large", "display_name": "Nikolai Nikolov", "link": "https://stackoverflow.com/users/8958522/nikolai-nikolov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 647, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1533033947, "creation_date": 1533031423, "last_edit_date": 1533033947, "question_id": 51610777, "link": "https://stackoverflow.com/questions/51610777/camera2-api-continuous-capture-with-grafika", "title": "camera2 API continuous capture with Grafika", "body": "<p>Hello guys I'm trying to implement the continuous capture functionality from the Grafika library (<a href=\"https://github.com/google/grafika\" rel=\"nofollow noreferrer\">https://github.com/google/grafika</a>) in a custom app application but I need to use the camera2 API because I from what I learned the old camera API has been deprecated. I had a lot of problems and my code is a little bit messy because I still don't fully understand the camera2 api and the grafika implementation of the circular buffer and I will refactor everything once I manage to make it work. I hope you manage to understand where my problem lies with the given mess.\n The think I did to use the continuous capture functionality in my app is to copy all the classes in the \"gles\" directory in \"Grafika\" on which the CameraCaptureActivity depends and I also copied the CircularEncoder and CircularEncoderBuffer classes because the activity depends on them too and then I tried to recreate the things that ContinuousCaptureActivity does in my FragmentPhoneCameraNew. I haven't changed anything on any of the other classes that I copied from the \"Grafika\" library.\n The device on which I'm testing is samsung galaxy S6  with android 7.0.</p>\n\n<ol>\n<li>My first problem is in the startPreview function when I'm trying to initialize the mCircEncoder in the try / catch block (  mCircEncoder = CircularEncoder(VIDEO_WIDTH, VIDEO_HEIGHT, 6000000, mCameraPreviewThousandFps / 1000, 7, mHandler) ) where it gives me the following error : </li>\n</ol>\n\n<blockquote>\n  <p>07-31 11:25:40.301 25399-25533/com.name.socourt E/BufferQueueProducer:\n  [SurfaceTexture-0-25399-0] connect: already connected (cur=1 req=4)\n      07-31 11:25:40.307 25399-25533/com.name.socourt W/CameraDevice-JV-0: Stream configuration failed due to:\n  endConfigure:365: Camera 0: Unsupported set of inputs/outputs provided\n      07-31 11:25:40.377 25399-25533/com.name.socourt E/CameraCaptureSession: Session 0: Failed to create capture session;\n  configuration failed</p>\n</blockquote>\n\n<ol start=\"2\">\n<li>The second problem is that after the execution passes the mEncoder.configure method in the CircularEncoder class it gives me :</li>\n</ol>\n\n<blockquote>\n  <p>07-31 12:11:34.866 1130-1224/com.name.socourt E/AndroidRuntime: FATAL\n  EXCEPTION: Camera background thread\n          Process: com.name.socourt, PID: 1130\n          android.media.MediaCodec$CodecException: Error 0x80001001\n              at android.media.MediaCodec.native_configure(Native Method)\n              at android.media.MediaCodec.configure(MediaCodec.java:1882)\n              at com.name.socourt.services.CameraRelated.CircularEncoder.(CircularEncoder.java:123)\n              at com.name.socourt.controller.FragmentPhoneCameraNew.startPreview(FragmentPhoneCameraNew.kt:661)\n              at com.name.socourt.controller.FragmentPhoneCameraNew.access$startPreview(FragmentPhoneCameraNew.kt:47)\n              at com.name.socourt.controller.FragmentPhoneCameraNew$mCameraDeviceStateCallback$1.onOpened(FragmentPhoneCameraNew.kt:266)\n              at android.hardware.camera2.impl.CameraDeviceImpl$1.run(CameraDeviceImpl.java:134)\n              at android.os.Handler.handleCallback(Handler.java:751)\n              at android.os.Handler.dispatchMessage(Handler.java:95)\n              at android.os.Looper.loop(Looper.java:154)\n              at android.os.HandlerThread.run(HandlerThread.java:61)</p>\n</blockquote>\n\n<p>which I assume is because I'm doing something in the background thread that is supposed to be in the main thread or vice versa, but isn't the thread handler supposed to make the two threads communicate and prevent such problems? </p>\n\n<p>I'm doing this for 2 weeks already and it's a complete mess in my head since I'm encountering such problems all the time. I manage to solve them 1 by 1 but it takes a lot of time, but this time it seems like I'm just stuck. </p>\n\n<p>I'm sorry if the problems are simple or my code is too messy, but I'm new to android development and that camera 2 api is just too complicated especially when I have to implement the continuous capture functionality. </p>\n\n<p>I had to upload the code and the logcat in a file to my googleDrive because it is too big to be posted as a question here in the body of the topic, I hope that is not a problem. So here is the link <a href=\"https://drive.google.com/file/d/1c_soL_S37ALxSoazNfEJTx9gcDs82ePG/view?usp=sharing\" rel=\"nofollow noreferrer\">https://drive.google.com/file/d/1c_soL_S37ALxSoazNfEJTx9gcDs82ePG/view?usp=sharing</a></p>\n"}, {"tags": ["android", "unit-testing", "gradle", "kotlin", "junit5"], "comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 2, "creation_date": 1533031278, "post_id": 51610420, "comment_id": 90185951, "body": "That&#39;s not a failure. The app still compiles, no?"}, {"owner": {"reputation": 1360, "user_id": 6094213, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZMONcAU-hVI/AAAAAAAAAAI/AAAAAAAAACI/gxbJ1zyPAjk/photo.jpg?sz=128", "display_name": "Philipp Buhaievskiy", "link": "https://stackoverflow.com/users/6094213/philipp-buhaievskiy"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 1, "creation_date": 1533032517, "post_id": 51610420, "comment_id": 90186729, "body": "The app is compiles with the same failure message. :-("}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 3, "creation_date": 1533033307, "post_id": 51610420, "comment_id": 90187240, "body": "That&#39;s not a failure. It would be a failure if the app did not compile. That&#39;s at best a <i>warning</i>."}, {"owner": {"reputation": 1360, "user_id": 6094213, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZMONcAU-hVI/AAAAAAAAAAI/AAAAAAAAACI/gxbJ1zyPAjk/photo.jpg?sz=128", "display_name": "Philipp Buhaievskiy", "link": "https://stackoverflow.com/users/6094213/philipp-buhaievskiy"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1533036227, "post_id": 51610420, "comment_id": 90189130, "body": "@ EpicPandaForce unfortunately that IS a failure message as I mentioned. The question is not about how to interpret the message, but anyway my appreciation for your impact."}], "answers": [{"comments": [{"owner": {"reputation": 1360, "user_id": 6094213, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZMONcAU-hVI/AAAAAAAAAAI/AAAAAAAAACI/gxbJ1zyPAjk/photo.jpg?sz=128", "display_name": "Philipp Buhaievskiy", "link": "https://stackoverflow.com/users/6094213/philipp-buhaievskiy"}, "edited": false, "score": 0, "creation_date": 1533133393, "post_id": 51610775, "comment_id": 90235811, "body": "I updated the description of the issue, using this suggestion."}, {"owner": {"reputation": 4180, "user_id": 1006201, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/4YYlU.jpg?s=128&g=1", "display_name": "Yokhen", "link": "https://stackoverflow.com/users/1006201/yokhen"}, "edited": false, "score": 18, "creation_date": 1557767028, "post_id": 51610775, "comment_id": 98867073, "body": "When running <code>react-native run-android --warning-mode all</code> I get <code>error: unknown option --warning-mode&#39;</code>"}, {"owner": {"reputation": 2576, "user_id": 9009196, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TQuKsnXMAjI/AAAAAAAAAAI/AAAAAAAAAhc/7UzRfnGJCmQ/photo.jpg?sz=128", "display_name": "Jordan Daniels", "link": "https://stackoverflow.com/users/9009196/jordan-daniels"}, "edited": false, "score": 16, "creation_date": 1558912367, "post_id": 51610775, "comment_id": 99244925, "body": "Try running <code>gradle build --warning-mode=all</code>"}, {"owner": {"reputation": 2158, "user_id": 1060888, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/qLQK5.png?s=128&g=1", "display_name": "arled", "link": "https://stackoverflow.com/users/1060888/arled"}, "edited": false, "score": 3, "creation_date": 1615322538, "post_id": 51610775, "comment_id": 117654550, "body": "How is this the right answer?!"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 2158, "user_id": 1060888, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/qLQK5.png?s=128&g=1", "display_name": "arled", "link": "https://stackoverflow.com/users/1060888/arled"}, "edited": false, "score": 0, "creation_date": 1615370957, "post_id": 51610775, "comment_id": 117667715, "body": "@Led, the deprecation warnings could arise due to numerous reasons, from deprecated feature used in the build script to third-party Gradle plugins being outdated or mistakenly calling the deprecated API. This answer offers a way to find what exactly is causing deprecation warnings, so, having learned that, you can search for solutions to a more specific problem."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 78, "last_activity_date": 1565257191, "last_edit_date": 1565257191, "creation_date": 1533031421, "answer_id": 51610775, "question_id": 51610420, "link": "https://stackoverflow.com/questions/51610420/deprecated-gradle-features-were-used-in-this-build-making-it-incompatible-with/51610775#51610775", "title": "Deprecated Gradle features were used in this build, making it incompatible with Gradle 5.0", "body": "<p>Run the Gradle build with a command line argument <code>--warning-mode=all</code> to see what exactly the deprecated features are.</p>\n\n<p>It will give you a detailed description of found issues with links to the Gradle docs for instructions how to fix your build.</p>\n\n<p>Adding <code>--stacktrace</code> to that, you will also be able to pinpoint where the warning comes from, if it's triggered by outdated code in one of the plugins and not your build script.</p>\n"}, {"comments": [{"owner": {"reputation": 51156, "user_id": 1318946, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/jUw99.jpg?s=128&g=1", "display_name": "Pratik Butani", "link": "https://stackoverflow.com/users/1318946/pratik-butani"}, "edited": false, "score": 0, "creation_date": 1549532821, "post_id": 52625463, "comment_id": 95938603, "body": "How you did it?"}, {"owner": {"reputation": 1360, "user_id": 6094213, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZMONcAU-hVI/AAAAAAAAAAI/AAAAAAAAACI/gxbJ1zyPAjk/photo.jpg?sz=128", "display_name": "Philipp Buhaievskiy", "link": "https://stackoverflow.com/users/6094213/philipp-buhaievskiy"}, "reply_to_user": {"reputation": 51156, "user_id": 1318946, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/jUw99.jpg?s=128&g=1", "display_name": "Pratik Butani", "link": "https://stackoverflow.com/users/1318946/pratik-butani"}, "edited": false, "score": 0, "creation_date": 1549620637, "post_id": 52625463, "comment_id": 95976483, "body": "Pratik keep in mind, for now, six month later, I suppose the circumstances around of this issue are changed. I&#39;d advise you to investigate from scratch, if JUnit 5 is convenient to use as a test instrument."}], "tags": [], "owner": {"reputation": 1360, "user_id": 6094213, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZMONcAU-hVI/AAAAAAAAAAI/AAAAAAAAACI/gxbJ1zyPAjk/photo.jpg?sz=128", "display_name": "Philipp Buhaievskiy", "link": "https://stackoverflow.com/users/6094213/philipp-buhaievskiy"}, "is_accepted": false, "score": 1, "last_activity_date": 1538563958, "creation_date": 1538563958, "answer_id": 52625463, "question_id": 51610420, "link": "https://stackoverflow.com/questions/51610420/deprecated-gradle-features-were-used-in-this-build-making-it-incompatible-with/52625463#52625463", "title": "Deprecated Gradle features were used in this build, making it incompatible with Gradle 5.0", "body": "<p>Finally decided to downgrade the junit 5 to junit 4 and rebuild the testing environment.</p>\n"}, {"comments": [{"owner": {"reputation": 139, "user_id": 9285185, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156076636866703/picture?type=large", "display_name": "Aaron Medvick", "link": "https://stackoverflow.com/users/9285185/aaron-medvick"}, "edited": false, "score": 0, "creation_date": 1582505216, "post_id": 53736232, "comment_id": 106789557, "body": "my gradle had this line.. .distributionUrl=https\\://services.gradle.org/distributions/&zwnj;&#8203;gradle-4.8.1-bin.zip  Changed it to and it worked. distributionUrl=<a href=\"https://services.gradle.org/distributions/gradle-4.10.2-all.zip\" rel=\"nofollow noreferrer\">services.gradle.org/distributions/gradle-4.1&zwnj;&#8203;0.2-all.zip</a>"}], "tags": [], "owner": {"reputation": 379, "user_id": 6821001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b0Zsh.jpg?s=128&g=1", "display_name": "Gautam Dev", "link": "https://stackoverflow.com/users/6821001/gautam-dev"}, "is_accepted": false, "score": 2, "last_activity_date": 1544589982, "creation_date": 1544589982, "answer_id": 53736232, "question_id": 51610420, "link": "https://stackoverflow.com/questions/51610420/deprecated-gradle-features-were-used-in-this-build-making-it-incompatible-with/53736232#53736232", "title": "Deprecated Gradle features were used in this build, making it incompatible with Gradle 5.0", "body": "<p>Set distributionUrl path in gradle-wrapper-properties files as :</p>\n\n<p><strong>distributionUrl=https://services.gradle.org/distributions/gradle-4.10.2-all.zip</strong></p>\n"}, {"comments": [{"owner": {"reputation": 1491, "user_id": 3293439, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100001371709213/picture?type=large", "display_name": "Hiren", "link": "https://stackoverflow.com/users/3293439/hiren"}, "edited": false, "score": 0, "creation_date": 1552156170, "post_id": 55080607, "comment_id": 96907108, "body": "follow the hotkey&#39;s suggestion for exact detailed description"}, {"owner": {"reputation": 338, "user_id": 9725562, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JHVcwwtedqo/AAAAAAAAAAI/AAAAAAAAAGg/LoeE9bwGyw8/photo.jpg?sz=128", "display_name": "Anshul1507", "link": "https://stackoverflow.com/users/9725562/anshul1507"}, "edited": false, "score": 0, "creation_date": 1579159198, "post_id": 55080607, "comment_id": 105673759, "body": "this was the mistake and i am upgrading gradle version and try every possible step. :("}], "tags": [], "owner": {"reputation": 1491, "user_id": 3293439, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100001371709213/picture?type=large", "display_name": "Hiren", "link": "https://stackoverflow.com/users/3293439/hiren"}, "is_accepted": false, "score": 4, "last_activity_date": 1552155988, "creation_date": 1552155988, "answer_id": 55080607, "question_id": 51610420, "link": "https://stackoverflow.com/questions/51610420/deprecated-gradle-features-were-used-in-this-build-making-it-incompatible-with/55080607#55080607", "title": "Deprecated Gradle features were used in this build, making it incompatible with Gradle 5.0", "body": "<p>Update your third party dependencies. <em>for example</em> I updated dependency from \n  <code>implementation 'com.github.ybq:Android-SpinKit:1.1.0'</code>  to   <code>implementation 'com.github.ybq:Android-SpinKit:1.2.0'</code>.  and in my case issue has been solved.</p>\n"}, {"comments": [{"owner": {"reputation": 420, "user_id": 9037356, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Oa3B3.png?s=128&g=1", "display_name": "ichimaru", "link": "https://stackoverflow.com/users/9037356/ichimaru"}, "edited": false, "score": 0, "creation_date": 1615394762, "post_id": 57323351, "comment_id": 117678844, "body": "works good....."}], "tags": [], "owner": {"reputation": 1120, "user_id": 281724, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2e20576f63eca088ebb51421a71a8995?s=128&d=identicon&r=PG", "display_name": "chichilatte", "link": "https://stackoverflow.com/users/281724/chichilatte"}, "is_accepted": false, "score": 12, "last_activity_date": 1564737087, "creation_date": 1564737087, "answer_id": 57323351, "question_id": 51610420, "link": "https://stackoverflow.com/questions/51610420/deprecated-gradle-features-were-used-in-this-build-making-it-incompatible-with/57323351#57323351", "title": "Deprecated Gradle features were used in this build, making it incompatible with Gradle 5.0", "body": "<p>I was getting this error. Turns out it only happened when I completely cleaned the RN caches (quite elaborate process) and then created a release build.</p>\n\n<p>If I cleaned the caches, created a debug build and then a release build, everything worked. Bit worrying but works. </p>\n\n<p><em>Note: My clean command is...</em></p>\n\n<p><code>rm -r android/build ; rm -r android/app/src/release/res ; rm -r android/app/build/intermediates ; watchman watch-del-all ;  rm -rf $TMPDIR/react-* ; npm start -- --reset-cache</code></p>\n"}, {"tags": [], "owner": {"reputation": 1377, "user_id": 3992001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pMkN9.png?s=128&g=1", "display_name": "Avid Programmer", "link": "https://stackoverflow.com/users/3992001/avid-programmer"}, "is_accepted": false, "score": 3, "last_activity_date": 1567766290, "creation_date": 1567766290, "answer_id": 57820443, "question_id": 51610420, "link": "https://stackoverflow.com/questions/51610420/deprecated-gradle-features-were-used-in-this-build-making-it-incompatible-with/57820443#57820443", "title": "Deprecated Gradle features were used in this build, making it incompatible with Gradle 5.0", "body": "<p><strong>Important - Answer work only for REACT-NATIVE VS CODE Terminal</strong></p>\n\n<p>In VisualStudio code, you have to run like below then that warning will be omitted.</p>\n\n<p><strong>react-native run-android warning-mode=all</strong></p>\n\n<blockquote>\n  <p>If you run below then you will get the error in terminal\n  When running react-native run-android --warning-mode all I get error: unknown option --warning-mode'</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 6369840, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-et-NvQc9iKs/AAAAAAAAAAI/AAAAAAAAABs/0lmhw8T5KQ4/photo.jpg?sz=128", "display_name": "Nawab Singh Koli", "link": "https://stackoverflow.com/users/6369840/nawab-singh-koli"}, "is_accepted": false, "score": 2, "last_activity_date": 1583577884, "creation_date": 1583577884, "answer_id": 60576726, "question_id": 51610420, "link": "https://stackoverflow.com/questions/51610420/deprecated-gradle-features-were-used-in-this-build-making-it-incompatible-with/60576726#60576726", "title": "Deprecated Gradle features were used in this build, making it incompatible with Gradle 5.0", "body": "<p>Solution for the issue: \ndeprecated gradle features were used in this build making it incompatible with gradle 6.0. android studio\nThis provided solution worked for me.</p>\n\n<p>First change the classpath in dependencies of build.gradle of your project\nFrom: <code>classpath 'com.android.tools.build:gradle:3.3.1'</code>\nTo:   <code>classpath 'com.android.tools.build:gradle:3.6.1'</code></p>\n\n<p>Then make changes in the gradle-wrapper.properties file this file exists in the Project's gradle>wrapper folder\nFrom: <code>distributionUrl=https\\://services.gradle.org/distributions/gradle-5.4.1-all.zip</code> \nTo:   <code>distributionUrl=https\\://services.gradle.org/distributions/gradle-5.6.4-all.zip</code></p>\n\n<p>Then Sync your gradle.</p>\n"}, {"comments": [{"owner": {"reputation": 167, "user_id": 10206273, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_EWnFDp1zFs/AAAAAAAAAAI/AAAAAAAADYg/wHhirtHKBxY/photo.jpg?sz=128", "display_name": "Atikur Rahman Sabuj", "link": "https://stackoverflow.com/users/10206273/atikur-rahman-sabuj"}, "edited": false, "score": 0, "creation_date": 1589880246, "post_id": 60638516, "comment_id": 109461336, "body": "Thanks, Can you plesae explain why this ./gradlew :app:bundleRelease works and this ./gradlew bundleRelease doesn&#39;t."}, {"owner": {"reputation": 1585, "user_id": 6789999, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6RiuF.jpg?s=128&g=1", "display_name": "minigeek", "link": "https://stackoverflow.com/users/6789999/minigeek"}, "edited": false, "score": 0, "creation_date": 1599028503, "post_id": 60638516, "comment_id": 112642413, "body": "perfecct worked for me on my  cordova-9.0 project :D"}, {"owner": {"reputation": 288, "user_id": 4709547, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/793359230752920/picture?type=large", "display_name": "Amr Ashraf", "link": "https://stackoverflow.com/users/4709547/amr-ashraf"}, "reply_to_user": {"reputation": 167, "user_id": 10206273, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_EWnFDp1zFs/AAAAAAAAAAI/AAAAAAAADYg/wHhirtHKBxY/photo.jpg?sz=128", "display_name": "Atikur Rahman Sabuj", "link": "https://stackoverflow.com/users/10206273/atikur-rahman-sabuj"}, "edited": false, "score": 2, "creation_date": 1606135317, "post_id": 60638516, "comment_id": 114860055, "body": "@AtikurRahmanSabuj It depends on how ./gradlew file was written. As the default module in android is &quot;app&quot; and android app can have multiple modules. Also ./gradlew only should work after cleaning. To see all the tasks in the gradlew, execute &quot;./gradlew tasks&quot; which will tell you the available tasks in the gradlew."}, {"owner": {"reputation": 121, "user_id": 654359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17d30624430a4017b9fb5e712c7c326a?s=128&d=identicon&r=PG", "display_name": "F C", "link": "https://stackoverflow.com/users/654359/f-c"}, "edited": false, "score": 0, "creation_date": 1609392018, "post_id": 60638516, "comment_id": 115831740, "body": "For Apache Cordova and Android 9, error may be resolved by enabling AndroidX. To enable, see: <a href=\"https://cordova.apache.org/announcements/2020/06/29/cordova-android-9.0.0.html\" rel=\"nofollow noreferrer\">cordova.apache.org/announcements/2020/06/29/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1365, "user_id": 1800149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wYPEn.jpg?s=128&g=1", "display_name": "Masum Billah", "link": "https://stackoverflow.com/users/1800149/masum-billah"}, "is_accepted": false, "score": 34, "last_activity_date": 1583937337, "creation_date": 1583937337, "answer_id": 60638516, "question_id": 51610420, "link": "https://stackoverflow.com/questions/51610420/deprecated-gradle-features-were-used-in-this-build-making-it-incompatible-with/60638516#60638516", "title": "Deprecated Gradle features were used in this build, making it incompatible with Gradle 5.0", "body": "<p>Try this one </p>\n\n<pre><code>cd android &amp;&amp; ./gradlew clean &amp;&amp; ./gradlew :app:bundleRelease\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13, "user_id": 2425119, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4rcBN.jpg?s=128&g=1", "display_name": "Omar D", "link": "https://stackoverflow.com/users/2425119/omar-d"}, "is_accepted": false, "score": 0, "last_activity_date": 1586168515, "creation_date": 1586168515, "answer_id": 61057602, "question_id": 51610420, "link": "https://stackoverflow.com/questions/51610420/deprecated-gradle-features-were-used-in-this-build-making-it-incompatible-with/61057602#61057602", "title": "Deprecated Gradle features were used in this build, making it incompatible with Gradle 5.0", "body": "<p>On a SpringBoot project using IntelliJ and Gradle, I got the warning \"Deprecated Gradle features were used in this build, making it incompatible with Gradle 5.0\" when running my integration test.\nWhat solved the problem was:\n- Going to: File > Settings > Build, Execution, Deployment\n- Selecting for \"Build and run using\": Intellij IDEA (instead of \"Gradle\")\n- Same for \"Run tests using\"\nThat did not explain why Gradle is displaying the warning, but that let me perform the test and progress in my work.</p>\n"}, {"tags": [], "owner": {"reputation": 4792, "user_id": 2052085, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/ITuiU.jpg?s=128&g=1", "display_name": "Moumit", "link": "https://stackoverflow.com/users/2052085/moumit"}, "is_accepted": false, "score": 8, "last_activity_date": 1587645295, "creation_date": 1587645295, "answer_id": 61387358, "question_id": 51610420, "link": "https://stackoverflow.com/questions/51610420/deprecated-gradle-features-were-used-in-this-build-making-it-incompatible-with/61387358#61387358", "title": "Deprecated Gradle features were used in this build, making it incompatible with Gradle 5.0", "body": "<p>in my case i updated the <code>build.gradle</code> file and make the <code>classpath</code> to latest version from <code>3.5.2</code> to <code>3.6.3</code></p>\n\n<pre><code>dependencies {\n        classpath(\"com.android.tools.build:gradle:3.6.3\") \n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 214, "user_id": 8178936, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-STP-u7-2siM/AAAAAAAAAAI/AAAAAAAAAOo/KPV2OaeoNus/photo.jpg?sz=128", "display_name": "damith alahakoon", "link": "https://stackoverflow.com/users/8178936/damith-alahakoon"}, "is_accepted": false, "score": 0, "last_activity_date": 1589215993, "creation_date": 1589215993, "answer_id": 61735022, "question_id": 51610420, "link": "https://stackoverflow.com/questions/51610420/deprecated-gradle-features-were-used-in-this-build-making-it-incompatible-with/61735022#61735022", "title": "Deprecated Gradle features were used in this build, making it incompatible with Gradle 5.0", "body": "<p>It was fixed this kind of error after <strong>migrate to AndroidX</strong></p>\n\n<ul>\n<li>Go to <strong>Refactor --->  Migrate to AndroidX</strong></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 814, "user_id": 5156011, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/09bf17fa991372c8b2c3b321dd5648a1?s=128&d=identicon&r=PG&f=1", "display_name": "Shapon Pal", "link": "https://stackoverflow.com/users/5156011/shapon-pal"}, "edited": false, "score": 1, "creation_date": 1610385207, "post_id": 63989207, "comment_id": 116110446, "body": "It&#39;s worked for me after trying all other process here. It saves my day. thx"}, {"owner": {"reputation": 557, "user_id": 11322237, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--uBPYPAT-rE/AAAAAAAAAAI/AAAAAAAAAMg/e6mvU0lQ6Jo/photo.jpg?sz=128", "display_name": "Justice Bringer", "link": "https://stackoverflow.com/users/11322237/justice-bringer"}, "edited": false, "score": 0, "creation_date": 1616406927, "post_id": 63989207, "comment_id": 117982625, "body": "Been struggling with this error 2 hours. This answer saved me a lot of wasted time."}], "tags": [], "owner": {"reputation": 41, "user_id": 5657647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/374b627d59d1c42382ace5ac63488251?s=128&d=identicon&r=PG&f=1", "display_name": "priyanka.b", "link": "https://stackoverflow.com/users/5657647/priyanka-b"}, "is_accepted": false, "score": 3, "last_activity_date": 1600680408, "last_edit_date": 1600680408, "creation_date": 1600679109, "answer_id": 63989207, "question_id": 51610420, "link": "https://stackoverflow.com/questions/51610420/deprecated-gradle-features-were-used-in-this-build-making-it-incompatible-with/63989207#63989207", "title": "Deprecated Gradle features were used in this build, making it incompatible with Gradle 5.0", "body": "<p>The following solution helped me as I was also getting the same warning.\nIn your project level gradle file, try to change the gradle version in classpath</p>\n<pre><code>classpath &quot;com.android.tools.build:gradle:3.6.0&quot; to\nclasspath &quot;com.android.tools.build:gradle:4.0.1&quot;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 200, "user_id": 10201930, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y9Fh5QRegpk/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rw7R5_OGReab3E-4cBA9XW5n4yOw/mo/photo.jpg?sz=128", "display_name": "Sajid Javed", "link": "https://stackoverflow.com/users/10201930/sajid-javed"}, "is_accepted": false, "score": 0, "last_activity_date": 1616328203, "last_edit_date": 1616328203, "creation_date": 1602341121, "answer_id": 64294660, "question_id": 51610420, "link": "https://stackoverflow.com/questions/51610420/deprecated-gradle-features-were-used-in-this-build-making-it-incompatible-with/64294660#64294660", "title": "Deprecated Gradle features were used in this build, making it incompatible with Gradle 5.0", "body": "<p>If you're using <strong>react-native</strong> then please try the below commands first before running your project:</p>\n<ol>\n<li>npm install --save-dev jetifier</li>\n<li>npx jetify</li>\n</ol>\n<p>Now run your project again.</p>\n"}, {"comments": [{"owner": {"reputation": 82, "user_id": 1763417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d5263b347b3f959d8e5f7a425968654?s=128&d=identicon&r=PG", "display_name": "Anirudh babbar", "link": "https://stackoverflow.com/users/1763417/anirudh-babbar"}, "edited": false, "score": 0, "creation_date": 1609569279, "post_id": 64988256, "comment_id": 115867677, "body": "thanks for sharing. nearly spent 50 minutes on it. just uninstalling application from device did the job for me."}], "tags": [], "owner": {"reputation": 31, "user_id": 13636026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/397841ae5121eb717d7bf7519ff41fb0?s=128&d=identicon&r=PG&f=1", "display_name": "NerioLorona", "link": "https://stackoverflow.com/users/13636026/neriolorona"}, "is_accepted": false, "score": 3, "last_activity_date": 1606227778, "last_edit_date": 1606227778, "creation_date": 1606227166, "answer_id": 64988256, "question_id": 51610420, "link": "https://stackoverflow.com/questions/51610420/deprecated-gradle-features-were-used-in-this-build-making-it-incompatible-with/64988256#64988256", "title": "Deprecated Gradle features were used in this build, making it incompatible with Gradle 5.0", "body": "<p>It work for me in this issue in a project of react-native:</p>\n<p>Deprecated Gradle features were used in this build, making it incompatible with Gradle 7.0.</p>\n<p>244 actionable tasks: 2 executed, 242 up-to-date\nD8: Cannot fit requested classes in a single dex file (# fields: 67296 &gt; 65536)\ncom.android.builder.dexing.DexArchiveMergerException: Error while merging dex archives:\nThe number of method references in a .dex file cannot exceed 64K.\nLearn how to resolve this issue at <a href=\"https://developer.android.com/tools/building/multidex.html\" rel=\"nofollow noreferrer\">https://developer.android.com/tools/building/multidex.html</a>\n....</p>\n<p>I Did this:</p>\n<ul>\n<li><p>Uninstall the app from my device:</p>\n</li>\n<li><p><a href=\"https://stackoverflow.com/questions/36785014/the-number-of-method-references-in-a-dex-file-cannot-exceed-64k-api-17\">The number of method references in a .dex file cannot exceed 64k API 17</a></p>\n</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 546, "user_id": 5388691, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OxkfO.png?s=128&g=1", "display_name": "verunar", "link": "https://stackoverflow.com/users/5388691/verunar"}, "is_accepted": false, "score": 6, "last_activity_date": 1610108244, "creation_date": 1610108244, "answer_id": 65628786, "question_id": 51610420, "link": "https://stackoverflow.com/questions/51610420/deprecated-gradle-features-were-used-in-this-build-making-it-incompatible-with/65628786#65628786", "title": "Deprecated Gradle features were used in this build, making it incompatible with Gradle 5.0", "body": "<p>In my case adding multiDexEnabled true in Android/build/build.gradle file compiled the files.</p>\n<p>I will look into removing this in the future, as in the <a href=\"https://developer.android.com/studio/build/multidex\" rel=\"noreferrer\">documentation</a> it says  'Before configuring your app to enable use of 64K or more method references, you should take steps to reduce the total number of references called by your app code, including methods defined by your app code or included libraries.'</p>\n<pre><code>defaultConfig {\n  applicationId &quot;com.peoplesenergyapp&quot;\n  minSdkVersion rootProject.ext.minSdkVersion\n  targetSdkVersion rootProject.ext.targetSdkVersion\n  versionCode 1\n  versionName &quot;1.0&quot;\n  multiDexEnabled true // &lt;-add this \n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 9733722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7bb4ebb76e92e2123a7f0036c173342?s=128&d=identicon&r=PG&f=1", "display_name": "cetric", "link": "https://stackoverflow.com/users/9733722/cetric"}, "is_accepted": false, "score": 0, "last_activity_date": 1611715124, "creation_date": 1611715124, "answer_id": 65912170, "question_id": 51610420, "link": "https://stackoverflow.com/questions/51610420/deprecated-gradle-features-were-used-in-this-build-making-it-incompatible-with/65912170#65912170", "title": "Deprecated Gradle features were used in this build, making it incompatible with Gradle 5.0", "body": "<p>Uninstall the old app from the device/emulator. It worked for me</p>\n"}, {"comments": [{"owner": {"reputation": 137, "user_id": 997493, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zYqXN.jpg?s=128&g=1", "display_name": "alvarodev", "link": "https://stackoverflow.com/users/997493/alvarodev"}, "edited": false, "score": 0, "creation_date": 1614198756, "post_id": 65978379, "comment_id": 117316003, "body": "thanks, it worked for me in react-native project as well"}], "tags": [], "owner": {"reputation": 60, "user_id": 10624459, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EkifZf977KM/AAAAAAAAAAI/AAAAAAAAAAs/FbvDtmk_ld0/photo.jpg?sz=128", "display_name": "faryar76", "link": "https://stackoverflow.com/users/10624459/faryar76"}, "is_accepted": false, "score": 2, "last_activity_date": 1612132457, "last_edit_date": 1612132457, "creation_date": 1612091197, "answer_id": 65978379, "question_id": 51610420, "link": "https://stackoverflow.com/questions/51610420/deprecated-gradle-features-were-used-in-this-build-making-it-incompatible-with/65978379#65978379", "title": "Deprecated Gradle features were used in this build, making it incompatible with Gradle 5.0", "body": "<p>i'am using react-native and this works for me :</p>\n<ol>\n<li>in root of project <code>cd android</code> and <code>gradlew clean</code></li>\n<li>open task manager in windows</li>\n<li>on tab 'Details' hit endtask on both java.exe proccess</li>\n</ol>\n<p>long story short\n<code>&gt; Task :app:installDebug FAILED</code> Fixed by <code>kiling java.exe prossess</code></p>\n"}, {"tags": [], "owner": {"reputation": 84, "user_id": 13732190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b677ae103d80218e3228e38204d9a166?s=128&d=identicon&r=PG&f=1", "display_name": "Manan Gadhiya", "link": "https://stackoverflow.com/users/13732190/manan-gadhiya"}, "is_accepted": false, "score": 0, "last_activity_date": 1613389236, "creation_date": 1613389236, "answer_id": 66207378, "question_id": 51610420, "link": "https://stackoverflow.com/questions/51610420/deprecated-gradle-features-were-used-in-this-build-making-it-incompatible-with/66207378#66207378", "title": "Deprecated Gradle features were used in this build, making it incompatible with Gradle 5.0", "body": "<p>it is due to incompatibility.</p>\n<p>please upgrade <code>classpath(&quot;com.android.tools.build:gradle:4.0.1&quot;)</code>  in build.gradle file under android folder.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 9238621, "user_type": "registered", "profile_image": "https://graph.facebook.com/1567570763358993/picture?type=large", "display_name": "Shafin Hasnat", "link": "https://stackoverflow.com/users/9238621/shafin-hasnat"}, "is_accepted": false, "score": 0, "last_activity_date": 1613822247, "creation_date": 1613822247, "answer_id": 66291220, "question_id": 51610420, "link": "https://stackoverflow.com/questions/51610420/deprecated-gradle-features-were-used-in-this-build-making-it-incompatible-with/66291220#66291220", "title": "Deprecated Gradle features were used in this build, making it incompatible with Gradle 5.0", "body": "<p>The process below worked in my case-\nFirst check Gradle Version:</p>\n<pre><code>cd android\n./gradlew -v\n</code></pre>\n<p>In my case it was 6.5</p>\n<p>Go to <a href=\"https://developer.android.com/studio/releases/gradle-plugin\" rel=\"nofollow noreferrer\">https://developer.android.com/studio/releases/gradle-plugin</a> and you'll get the plugin version for your gradle version. For gradle version 6.5, the plugin version is 4.1.0</p>\n<p>Then go to <code>app/build.gradle</code> and change <code>classpath 'com.android.tools.build:gradle:&lt;plugin_version&gt;</code></p>\n"}], "owner": {"reputation": 1360, "user_id": 6094213, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZMONcAU-hVI/AAAAAAAAAAI/AAAAAAAAACI/gxbJ1zyPAjk/photo.jpg?sz=128", "display_name": "Philipp Buhaievskiy", "link": "https://stackoverflow.com/users/6094213/philipp-buhaievskiy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253432, "favorite_count": 20, "accepted_answer_id": 51610775, "answer_count": 19, "score": 115, "last_activity_date": 1616328203, "creation_date": 1533030441, "last_edit_date": 1559227292, "question_id": 51610420, "link": "https://stackoverflow.com/questions/51610420/deprecated-gradle-features-were-used-in-this-build-making-it-incompatible-with", "title": "Deprecated Gradle features were used in this build, making it incompatible with Gradle 5.0", "body": "<p>I've got a gradle FAILURE:</p>\n\n<pre><code>...\"Deprecated Gradle features were used in this build, making it incompatible with Gradle 5.0.\"\n</code></pre>\n\n<p>Case description:</p>\n\n<ul>\n<li>Attached to the project codebase the next libs:</li>\n</ul>\n\n<p><strong>APP/build.gradle</strong></p>\n\n<pre><code>    //(Required) Writing and executing Unit Tests on the JUnit Platform \ntestImplementation \"org.junit.jupiter:junit-jupiter-api:5.2.0\"\ntestRuntimeOnly \"org.junit.jupiter:junit-jupiter-engine:5.2.0\"\n    // (Optional) If you need \"Parameterized Tests\"\ntestImplementation \"org.junit.jupiter:junit-jupiter-params:5.2.0\"\n    // (Optional) If you also have JUnit 4-based tests\ntestImplementation \"junit:junit:4.12\"\ntestRuntimeOnly \"org.junit.vintage:junit-vintage-engine:5.2.0\"\n\ntestImplementation \"io.mockk:mockk:1.8.5\"\n</code></pre>\n\n<ul>\n<li><p>Updated the <strong>gradle-wrapper.properties</strong></p>\n\n<p>distributionUrl=https....gradle-<strong>4.4-all</strong>.zip to <strong>4.7-all</strong></p></li>\n<li><p>after all of that gradle was built success</p></li>\n<li><p>created the test calss</p>\n\n<pre><code>@TestInstance(TestInstance.Lifecycle.PER_CLASS)\n  class TestClass {\n\n  @Test\n  internal fun testName() {\n    Assert.assertEquals(2, 1 + 1)\n  }\n}\n</code></pre></li>\n<li><p>ran the test and got the FAILURE message.\n<a href=\"https://i.stack.imgur.com/7nZ04.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/7nZ04.png\" alt=\"enter image description here\"></a></p></li>\n<li><p>ran the Gradle build with a command line argument <code>./gradlew --warning-mode=all</code> to see what exactly the deprecated features are.\n<a href=\"https://i.stack.imgur.com/TxV5L.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/TxV5L.png\" alt=\"enter image description here\"></a></p></li>\n</ul>\n\n<p>As a result I couldn't build the app and I've got that FAILURE: message.</p>\n"}, {"tags": ["android", "audio", "view", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 286, "user_id": 9687392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/922e626a3dded744b3cd21c60279adcc?s=128&d=identicon&r=PG&f=1", "display_name": "Manu13k", "link": "https://stackoverflow.com/users/9687392/manu13k"}, "edited": false, "score": 0, "creation_date": 1533031052, "post_id": 51610429, "comment_id": 90185779, "body": "I heard about audioFocus , my application request focus so my music in background stop. Do you know a way to not give the audio focus to the application and then let the music in background plays ?"}, {"owner": {"reputation": 10859, "user_id": 3710865, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oROuW.jpg?s=128&g=1", "display_name": "sasikumar", "link": "https://stackoverflow.com/users/3710865/sasikumar"}, "reply_to_user": {"reputation": 286, "user_id": 9687392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/922e626a3dded744b3cd21c60279adcc?s=128&d=identicon&r=PG&f=1", "display_name": "Manu13k", "link": "https://stackoverflow.com/users/9687392/manu13k"}, "edited": false, "score": 0, "creation_date": 1533031297, "post_id": 51610429, "comment_id": 90185962, "body": "When your music is background ,you can perform read message,text chat,using other apps but when you are going to play video it will stop all previous activity of media players."}], "tags": [], "owner": {"reputation": 10859, "user_id": 3710865, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oROuW.jpg?s=128&g=1", "display_name": "sasikumar", "link": "https://stackoverflow.com/users/3710865/sasikumar"}, "is_accepted": false, "score": 1, "last_activity_date": 1533030826, "last_edit_date": 1533030826, "creation_date": 1533030462, "answer_id": 51610429, "question_id": 51610293, "link": "https://stackoverflow.com/questions/51610293/play-videoview-without-stopping-background-music/51610429#51610429", "title": "Play videoView without stopping background music", "body": "<p>Its not possible.In android device we cant play music and video at the same time using different player.One media player only executed at a time.</p>\n\n<p>For more details Refer <a href=\"https://developer.android.com/guide/topics/media-apps/media-apps-overview\" rel=\"nofollow noreferrer\">Media app architecture overview\n</a></p>\n"}, {"tags": [], "owner": {"reputation": 110, "user_id": 10137887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46cbb808adb24bf24731931f6b9826f8?s=128&d=identicon&r=PG&f=1", "display_name": "SmAster", "link": "https://stackoverflow.com/users/10137887/smaster"}, "is_accepted": false, "score": 1, "last_activity_date": 1533031440, "creation_date": 1533031440, "answer_id": 51610780, "question_id": 51610293, "link": "https://stackoverflow.com/questions/51610293/play-videoview-without-stopping-background-music/51610780#51610780", "title": "Play videoView without stopping background music", "body": "<p>Like in humans , you cant speak 2 languages in the same time. </p>\n\n<p>There is always a way, if you own a ANDROID</p>\n\n<p>Double Music Player plays two songs at the same time.</p>\n"}], "owner": {"reputation": 286, "user_id": 9687392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/922e626a3dded744b3cd21c60279adcc?s=128&d=identicon&r=PG&f=1", "display_name": "Manu13k", "link": "https://stackoverflow.com/users/9687392/manu13k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1533031440, "creation_date": 1533030075, "question_id": 51610293, "link": "https://stackoverflow.com/questions/51610293/play-videoview-without-stopping-background-music", "title": "Play videoView without stopping background music", "body": "<p>I have a music launched on my phone and when I'm launching my application a VideoView starts with a mp4.</p>\n\n<p>The problem is that VideoView make my music stop. I have to manually restart it .</p>\n\n<p>Is there a way to play an mp4 in my VideoView over the music in background and without stopping it ?\nThanks</p>\n"}, {"tags": ["kotlin", "google-cloud-firestore"], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 10155205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58f697483c1be88bc3349a97e6c638c5?s=128&d=identicon&r=PG&f=1", "display_name": "Jane Ashley", "link": "https://stackoverflow.com/users/10155205/jane-ashley"}, "edited": false, "score": 0, "creation_date": 1533049313, "post_id": 51615753, "comment_id": 90198320, "body": "Woow, this is Frank van Puffelen himself answering to my question, Jeez! I read hundreds of your answers regarding Firebase, you&#39;re the best!! Regarding Firestore I understand now thanks to your answer!! Thank you so much!!."}, {"owner": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "reply_to_user": {"reputation": 125, "user_id": 10155205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58f697483c1be88bc3349a97e6c638c5?s=128&d=identicon&r=PG&f=1", "display_name": "Jane Ashley", "link": "https://stackoverflow.com/users/10155205/jane-ashley"}, "edited": false, "score": 0, "creation_date": 1533069104, "post_id": 51615753, "comment_id": 90208675, "body": "You&#39;re welcome Jane, and welcome as a participating member of Stack Overflow! :-)"}, {"owner": {"reputation": 125, "user_id": 10155205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58f697483c1be88bc3349a97e6c638c5?s=128&d=identicon&r=PG&f=1", "display_name": "Jane Ashley", "link": "https://stackoverflow.com/users/10155205/jane-ashley"}, "edited": false, "score": 0, "creation_date": 1533111717, "post_id": 51615753, "comment_id": 90221417, "body": "Thanks again for helping me!"}], "tags": [], "owner": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "is_accepted": true, "score": 1, "last_activity_date": 1533047186, "last_edit_date": 1592644375, "creation_date": 1533047186, "answer_id": 51615753, "question_id": 51609600, "link": "https://stackoverflow.com/questions/51609600/how-to-get-only-specific-location-from-firestore-database/51615753#51615753", "title": "How to get only specific location from Firestore database?", "body": "<p>Firestore can only order on a single field. Your query requires that it orders on two fields: first on <code>capacity</code> to find the places with the right capacity, then on <code>location</code> to return the result in the correct order. This type of query is not possible in Firestore.</p>\n<p>From the <a href=\"https://firebase.google.com/docs/firestore/query-data/order-limit-data\" rel=\"nofollow noreferrer\">Firestore documentation comes this similar, invalid query</a>:</p>\n<blockquote>\n<p>\ud83d\udc4e <strong>Invalid</strong>: Range filter and first <code>orderBy</code> on different fields</p>\n<pre><code>citiesRef.where(&quot;population&quot;, &quot;&gt;&quot;, 100000).orderBy(&quot;country&quot;)\n</code></pre>\n</blockquote>\n<p>Your best option is to let the query filter on <code>population</code> and then sort the results on <code>country</code> in your code.</p>\n<p>For a good explanation on why Firestore doesn't support this type of query, have a look at this <a href=\"https://www.youtube.com/watch?v=Ofux_4c94FI\" rel=\"nofollow noreferrer\">video explaining the Firestore query model</a>. Spoiler: it's all about the performance guarantees that Firestore has.</p>\n"}], "owner": {"reputation": 125, "user_id": 10155205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58f697483c1be88bc3349a97e6c638c5?s=128&d=identicon&r=PG&f=1", "display_name": "Jane Ashley", "link": "https://stackoverflow.com/users/10155205/jane-ashley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 51615753, "answer_count": 1, "score": 0, "last_activity_date": 1533047186, "creation_date": 1533028150, "last_edit_date": 1533036650, "question_id": 51609600, "link": "https://stackoverflow.com/questions/51609600/how-to-get-only-specific-location-from-firestore-database", "title": "How to get only specific location from Firestore database?", "body": "<p>I'm trying to do some tweaks to my Firestore database but for some reasons my query is not working. I have a collection of places. This is my db:</p>\n\n<pre><code>places\n  - place_id\n       - name: Concert Hall\n       - image: https://www......\n       - capacity: 550\n       - location: center\n</code></pre>\n\n<p>And I need to get all places from places node WHERE the capacity is bigger than 500, ordered by position (location).</p>\n\n<p>This is my code:</p>\n\n<pre><code>val query = placesRef.whereGreaterThan(\"capacity\", 500).orderBy(\"location\");\n</code></pre>\n\n<p>Any help will be highly appreciated!!</p>\n"}, {"tags": ["java", "kotlin", "kotlin-interop"], "comments": [{"owner": {"reputation": 67242, "user_id": 1189885, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/DLHqU.png?s=128&g=1", "display_name": "chrylis -cautiouslyoptimistic-", "link": "https://stackoverflow.com/users/1189885/chrylis-cautiouslyoptimistic"}, "edited": false, "score": 3, "creation_date": 1533026268, "post_id": 51608924, "comment_id": 90182799, "body": "Huh. I&#39;ve <i>never</i> seen a class try to <code>implements</code> an annotation, and I didn&#39;t realize that it was even possible. You nearly always <i>apply</i> the annotation to the class."}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "reply_to_user": {"reputation": 67242, "user_id": 1189885, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/DLHqU.png?s=128&g=1", "display_name": "chrylis -cautiouslyoptimistic-", "link": "https://stackoverflow.com/users/1189885/chrylis-cautiouslyoptimistic"}, "edited": false, "score": 1, "creation_date": 1533026449, "post_id": 51608924, "comment_id": 90182888, "body": "At least in Java I saw it already several times. One such example is when you try to <a href=\"https://docs.jboss.org/cdi/api/2.0/javax/enterprise/inject/Instance.html#select-java.lang.annotation.Annotation...-\" rel=\"nofollow noreferrer\">select an instance in CDI</a>, where you usually use <code>AnnotationLiteral</code>s, which are basically &quot;implementations&quot; of annotations. However you may only require such an implementation if you need to supply <code>values</code> or other specific attributes your annotation has."}, {"owner": {"reputation": 67242, "user_id": 1189885, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/DLHqU.png?s=128&g=1", "display_name": "chrylis -cautiouslyoptimistic-", "link": "https://stackoverflow.com/users/1189885/chrylis-cautiouslyoptimistic"}, "edited": false, "score": 1, "creation_date": 1533026538, "post_id": 51608924, "comment_id": 90182947, "body": "Can you point me to actual code that does that? Using an annotation as a qualifier usually doesn&#39;t involve <i>implementing</i> it."}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "reply_to_user": {"reputation": 67242, "user_id": 1189885, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/DLHqU.png?s=128&g=1", "display_name": "chrylis -cautiouslyoptimistic-", "link": "https://stackoverflow.com/users/1189885/chrylis-cautiouslyoptimistic"}, "edited": false, "score": 2, "creation_date": 1533026904, "post_id": 51608924, "comment_id": 90183146, "body": "<a href=\"https://stackoverflow.com/questions/6925010/dynamically-fire-cdi-event-with-qualifier-with-members\">Here is an example question</a>. Basically you require something like this to narrow down which qualifier should trigger based on its members."}, {"owner": {"reputation": 67242, "user_id": 1189885, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/DLHqU.png?s=128&g=1", "display_name": "chrylis -cautiouslyoptimistic-", "link": "https://stackoverflow.com/users/1189885/chrylis-cautiouslyoptimistic"}, "edited": false, "score": 0, "creation_date": 1533027088, "post_id": 51608924, "comment_id": 90183242, "body": "Interesting. Reminds me of some of the C++ preprocessor gymnastics from the old days. Just to make sure, is your <i>annotation</i> still written in Java, or is that ported to Kotlin also?"}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "reply_to_user": {"reputation": 67242, "user_id": 1189885, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/DLHqU.png?s=128&g=1", "display_name": "chrylis -cautiouslyoptimistic-", "link": "https://stackoverflow.com/users/1189885/chrylis-cautiouslyoptimistic"}, "edited": false, "score": 2, "creation_date": 1533027338, "post_id": 51608924, "comment_id": 90183397, "body": "The annotation is still written in Java, but the same would apply to a Kotlin annotation as well (you can&#39;t open it)."}, {"owner": {"reputation": 3250, "user_id": 4378853, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XjxSP.png?s=128&g=1", "display_name": "GotoFinal", "link": "https://stackoverflow.com/users/4378853/gotofinal"}, "edited": false, "score": 0, "creation_date": 1533623029, "post_id": 51608924, "comment_id": 90400764, "body": "Seems like weird kotlin decision then, you can always use proxy classes too"}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1533623324, "post_id": 51608924, "comment_id": 90400905, "body": "what do you mean by proxy class? For now the only reasonable approach that comes to my mind is to just use the java implementation instead. However that is rather a workaround ;-) and then I still don&#39;t know why this language design decision was even taken..."}, {"owner": {"reputation": 3250, "user_id": 4378853, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XjxSP.png?s=128&g=1", "display_name": "GotoFinal", "link": "https://stackoverflow.com/users/4378853/gotofinal"}, "edited": false, "score": 0, "creation_date": 1533624721, "post_id": 51608924, "comment_id": 90401627, "body": "Proxy class would be even bigger workaround, some random library that use proxy classes for that: <a href=\"https://github.com/renatoathaydes/javanna/blob/master/src/main/java/com/athaydes/javanna/Javanna.java#L95\" rel=\"nofollow noreferrer\">github.com/renatoathaydes/javanna/blob/master/src/main/java/&zwnj;&#8203;com/&hellip;</a>"}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1533625032, "post_id": 51608924, "comment_id": 90401787, "body": "oh dear (I already assumed reflection), but I hope that&#39;s not the only best way in Kotlin ;-) hopefully someone can shed some light into this..."}, {"owner": {"reputation": 3250, "user_id": 4378853, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XjxSP.png?s=128&g=1", "display_name": "GotoFinal", "link": "https://stackoverflow.com/users/4378853/gotofinal"}, "edited": false, "score": 0, "creation_date": 1533625882, "post_id": 51608924, "comment_id": 90402232, "body": "I dont think there is anything more to say, you just need to wait and pray to that issue or use one of that workarounds"}], "answers": [{"comments": [{"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1535905312, "post_id": 52138716, "comment_id": 91227352, "body": "While I understand that decision (and AnnotationLiteral is definitely a rather special case), I wondered also about things like <code>@JvmName</code> already ;-) Are there plans to have something like Kotlin-only on the JVM (without needing <code>@Jvm</code>-annotations)? So maybe like: I am 100% sure (and know what I am doing) and just want to call Kotlin and Java code, but do not want to be able to call Kotlin code from Java (or I wouldn&#39;t mind if code called from Java would look ugly because method names might be generated)?"}, {"owner": {"reputation": 20424, "user_id": 445715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3824489df267d3bf86bbc678b9745ac4?s=128&d=identicon&r=PG", "display_name": "Andrey Breslav", "link": "https://stackoverflow.com/users/445715/andrey-breslav"}, "reply_to_user": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1535916314, "post_id": 52138716, "comment_id": 91230311, "body": "@Roland I can&#39;t see how your question is related to the topic here. Also, I can&#39;t see why you need <code>@JvmName</code> at all if you don&#39;t care about Java API. Let&#39;s discuss it elsewhere"}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1535920671, "post_id": 52138716, "comment_id": 91231399, "body": "Sorry.. I just jumped from annotations to &quot;too JVM-specific&quot; and reminded myself about <a href=\"https://stackoverflow.com/questions/42916801/how-does-erasure-work-in-kotlin\">name clashes requiring <code>@JvmName</code></a> and wrote what came to my mind ;-) you are right, that&#39;s not really related... sure, where do we want to continue?"}, {"owner": {"reputation": 20424, "user_id": 445715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3824489df267d3bf86bbc678b9745ac4?s=128&d=identicon&r=PG", "display_name": "Andrey Breslav", "link": "https://stackoverflow.com/users/445715/andrey-breslav"}, "reply_to_user": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1536638090, "post_id": 52138716, "comment_id": 91484354, "body": "@Roland I think it&#39;s a good discussion for our public Slack or forum"}], "tags": [], "owner": {"reputation": 20424, "user_id": 445715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3824489df267d3bf86bbc678b9745ac4?s=128&d=identicon&r=PG", "display_name": "Andrey Breslav", "link": "https://stackoverflow.com/users/445715/andrey-breslav"}, "is_accepted": true, "score": 4, "last_activity_date": 1535904216, "creation_date": 1535904216, "answer_id": 52138716, "question_id": 51608924, "link": "https://stackoverflow.com/questions/51608924/implement-inherit-extend-annotation-in-kotlin/52138716#52138716", "title": "Implement (/inherit/~extend) annotation in Kotlin", "body": "<p>As of Kotlin 1.3, this case is not supported. To create custom instances of annotations one has to resort to Java for now. One of the reasons for this design decision is that making annotations interfaces is too JVM-specific and wouldn't map well to other platforms. </p>\n"}], "owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1108, "favorite_count": 4, "accepted_answer_id": 52138716, "answer_count": 1, "score": 11, "last_activity_date": 1535904216, "creation_date": 1533026063, "last_edit_date": 1533652039, "question_id": 51608924, "link": "https://stackoverflow.com/questions/51608924/implement-inherit-extend-annotation-in-kotlin", "title": "Implement (/inherit/~extend) annotation in Kotlin", "body": "<p>In Java I have the possibility to \"implement\" annotations.</p>\n\n<p>Sample Java annotation:</p>\n\n<pre><code>@Target(ElementType.TYPE)\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface JavaClassAnno {\n  String[] value();\n}\n</code></pre>\n\n<p>Sample Java \"implementation\":</p>\n\n<pre><code>class MyAnnotationLiteral \n                  extends AnnotationLiteral&lt;JavaClassAnno&gt; \n                  implements JavaClassAnno { // &lt;--- works in Java\n  private String value;\n\n  public MyAnnotationLiteral(String value) {\n    this.value = value;\n  }\n  @Override\n  public String[] value() {\n    return new String[] { value };\n  }\n}\n</code></pre>\n\n<p>Trying to port that to Kotlin doesn't work as it says that the annotation is final and therefore can not be inherited, i.e. the following will not work:</p>\n\n<pre><code>class MyAnnotationLiteral(private val internalValue: String) \n                 : AnnotationLiteral&lt;JavaClassAnno&gt;(), \n                   JavaClassAnno { // &lt;--- doesn't work in Kotlin (annotation can not be inherited)\n  override fun value(): Array&lt;String&gt; {\n    return arrayOf(internalValue)\n  }\n}\n</code></pre>\n\n<p>How do you \"implement/extend\" annotations the Kotlin way? Could not find any reason why Kotlin differs in that regard to Java. Any hint how to solve that problem or any sources that tell why it is that way are welcome.</p>\n\n<p>The following question contains a use case for this constellation: <a href=\"https://stackoverflow.com/questions/6925010/dynamically-fire-cdi-event-with-qualifier-with-members\">Dynamically fire CDI event with qualifier with members</a>.\nBasically you require something like this to narrow down which qualifier should trigger based on its members.</p>\n\n<p>Note that this would also apply to a Kotlin annotation as well as it seems that a Kotlin annotation can not be open and therefore not be implemented/extended too.</p>\n\n<p>What I found so far is rather mentioning <code>@Inherited</code> as a problem:</p>\n\n<ul>\n<li><a href=\"https://discuss.kotlinlang.org/t/inherited-annotations-and-other-reflections-enchancements/6209\" rel=\"noreferrer\">https://discuss.kotlinlang.org/t/inherited-annotations-and-other-reflections-enchancements/6209</a></li>\n<li><a href=\"https://youtrack.jetbrains.com/issue/KT-22265\" rel=\"noreferrer\">https://youtrack.jetbrains.com/issue/KT-22265</a></li>\n</ul>\n\n<p>But I did not find any reason why the annotation is not implementable/inheritable as it is in Java.</p>\n\n<p>I also asked this question now here: <a href=\"https://discuss.kotlinlang.org/t/implement-inherit-extend-annotation-in-kotlin/8916\" rel=\"noreferrer\">https://discuss.kotlinlang.org/t/implement-inherit-extend-annotation-in-kotlin/8916</a></p>\n\n<p>Update: Finally I found something regarding this design decision, namely the following issue (while I was opening my own issue for it): <a href=\"https://youtrack.jetbrains.com/issue/KT-3225\" rel=\"noreferrer\">Annotations inheritance. Either prohibit or implement correctly</a>. As it seems the decision was to \"prohibit\" it, even though there are no (visible?) comments, discussions or other sources about that decision.</p>\n\n<p>Added the following issue: <a href=\"https://youtrack.jetbrains.com/issue/KT-25947\" rel=\"noreferrer\">https://youtrack.jetbrains.com/issue/KT-25947</a></p>\n"}, {"tags": ["kotlin", "rx-java", "rx-java2"], "answers": [{"tags": [], "owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "is_accepted": true, "score": 1, "last_activity_date": 1533026907, "creation_date": 1533026907, "answer_id": 51609192, "question_id": 51608667, "link": "https://stackoverflow.com/questions/51608667/switch-observable-on-condition/51609192#51609192", "title": "Switch observable on condition", "body": "<p>FlatMap the first to see if the item is an empty list:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>Observable&lt;List&lt;T&gt;&gt; source = ...\n\nObservable&lt;List&lt;T&gt;&gt; fallbackSource = ...\n\nsource.flatMap(list -&gt; {\n    if (list.isEmpty()) {\n        return fallbackSource;\n    }\n    return Observable.just(list);\n});\n</code></pre>\n"}], "owner": {"reputation": 19872, "user_id": 804967, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/JVZu9.jpg?s=128&g=1", "display_name": "fweigl", "link": "https://stackoverflow.com/users/804967/fweigl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 0, "accepted_answer_id": 51609192, "answer_count": 1, "score": 1, "last_activity_date": 1533026907, "creation_date": 1533025243, "last_edit_date": 1533025662, "question_id": 51608667, "link": "https://stackoverflow.com/questions/51608667/switch-observable-on-condition", "title": "Switch observable on condition", "body": "<p>I have two observables and I want to use the first one unless it doesn't give me what I want (in this case an empty list). If that's the case I wwant to switch to the second one. </p>\n\n<pre><code>fun test() {\n\n    listSource1().switchMap {\n        if (it.isEmpty()) listSource2() else listSource1()\n    }\n\n}\n\nfun listSource1() = Observable.just(emptyList&lt;String&gt;())\n\nfun listSource2() = Observable.just(listOf(\"hello\"))\n</code></pre>\n\n<p>Is there a better way than this? it seems strange to map <code>listSource1</code> to <code>listSource1</code>, is this the correct way to do it?</p>\n"}, {"tags": ["android", "json", "kotlin", "retrofit", "clean-architecture"], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 9719937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ffF1X.jpg?s=128&g=1", "display_name": "Jax", "link": "https://stackoverflow.com/users/9719937/jax"}, "edited": false, "score": 0, "creation_date": 1533025233, "post_id": 51608585, "comment_id": 90182205, "body": "I have looked a couple examples and they all use Observable which I understand is RxJava, I have not worked with RxJava, Is it necessary that start learning it or could I get by without it for now?"}], "tags": [], "owner": {"reputation": 14372, "user_id": 852499, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/53c5ebb83f2cb72ef2f30c2c203f4b21?s=128&d=identicon&r=PG", "display_name": "Mustafa G&#252;ven", "link": "https://stackoverflow.com/users/852499/mustafa-g%c3%bcven"}, "is_accepted": false, "score": 0, "last_activity_date": 1533025381, "last_edit_date": 1533025381, "creation_date": 1533024961, "answer_id": 51608585, "question_id": 51608002, "link": "https://stackoverflow.com/questions/51608002/how-to-wrap-api-responses-to-handle-success-and-error-based-on-clean-architectur/51608585#51608585", "title": "How to wrap API responses to handle success and error based on Clean Architecture?", "body": "<ol>\n<li>fillCities() calls getCities()</li>\n<li>getCities() calls getCityList()</li>\n<li><p>getCities processes the response that comes from getCityList endpoint through funcErrorCheckAndTransform and returns back an observable to presenter layer</p>\n\n<pre><code>fun &lt;T&gt; funcErrorCheckAndTransform(): (BaseResponse&lt;T&gt;) -&gt; Observable&lt;T&gt; {\n  return { response -&gt;\n    if (response.isSuccess) {\n      Observable.just(response.data)\n    } else {\n      val e = Exception(response.errorMsg)\n      Timber.e(e)\n      Observable.error(e)\n    }\n  }\n}\n\n\n\noverride fun getCities(): Observable&lt;out Cities&gt; {\n  return locationService.getCityList()\n      .subscribeOn(schedulerProvider.io())\n      .flatMap(funcErrorCheckAndTransform())\n      .observeOn(schedulerProvider.ui())\n}\n\n\n\n @GET(\"getcitylist\")\n fun getCityList():\n     Observable&lt;BaseResponse&lt;ProfileResponse.Cities&gt;&gt;\n\n\n\n  override fun fillCities(defaultCityName: String?) {\n    view.showProgress(R.string.cities_are_getting_dialog_message)\n    compositeDisposable.add(\n        interactor.getCities().subscribe(\n            {\n              view.hideProgress()\n              view.fetchCities(it, defaultCityName)\n            },\n            { error -&gt;\n              view.onError(error)\n            }\n        ))\n  }\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 141, "user_id": 9719937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ffF1X.jpg?s=128&g=1", "display_name": "Jax", "link": "https://stackoverflow.com/users/9719937/jax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 526, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1533025658, "creation_date": 1533023035, "question_id": 51608002, "link": "https://stackoverflow.com/questions/51608002/how-to-wrap-api-responses-to-handle-success-and-error-based-on-clean-architectur", "title": "How to wrap API responses to handle success and error based on Clean Architecture?", "body": "<p>What is the approach to wrapping responses from the server and then process? The API is returning responses in the following format: </p>\n\n<p><strong>SUCCESS:</strong></p>\n\n<pre><code> {\n   \"data\": [],\n   \"statusCode\": 200,\n   \"statusMessage\": \"Operation success\",\n   \"success\": true\n }\n</code></pre>\n\n<p><strong>FAILURE:</strong></p>\n\n<pre><code>  {\n    \"errors\": [],\n    \"statusCode\": 500,\n    \"statusMessage\": \"Something went wrong\",\n    \"success\": false\n  }\n</code></pre>\n\n<p>I'm trying to apply Clean Architecture principles to my application and I want to know how can I wrap the responses to better handle errors? </p>\n"}, {"tags": ["java", "android", "firebase", "firebase-realtime-database", "kotlin"], "comments": [{"owner": {"reputation": 30122, "user_id": 7882470, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uJbpX.jpg?s=128&g=1", "display_name": "Dennis Vash", "link": "https://stackoverflow.com/users/7882470/dennis-vash"}, "edited": false, "score": 1, "creation_date": 1533021356, "post_id": 51607449, "comment_id": 90180104, "body": "whats the documintation says?"}, {"owner": {"reputation": 57589, "user_id": 7666442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K8FFo.jpg?s=128&g=1", "display_name": "AskNilesh", "link": "https://stackoverflow.com/users/7666442/asknilesh"}, "edited": false, "score": 0, "creation_date": 1533023663, "post_id": 51607449, "comment_id": 90181316, "body": "have look in documintation  <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/database/Query#orderByChild(java.lang.String)\" rel=\"nofollow noreferrer\">firebase.google.com/docs/reference/android/com/google/fireba&zwnj;&#8203;se/&hellip;</a>"}, {"owner": {"reputation": 57589, "user_id": 7666442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K8FFo.jpg?s=128&g=1", "display_name": "AskNilesh", "link": "https://stackoverflow.com/users/7666442/asknilesh"}, "reply_to_user": {"reputation": 16050, "user_id": 4168607, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/Z0uMk.jpg?s=128&g=1", "display_name": "ADM", "link": "https://stackoverflow.com/users/4168607/adm"}, "edited": false, "score": 0, "creation_date": 1533023674, "post_id": 51607449, "comment_id": 90181331, "body": "@ADM thanks updated"}, {"owner": {"reputation": 133, "user_id": 8561486, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8SbAyu4N4S8/AAAAAAAAAAI/AAAAAAAAABw/WgJ2-xnH8-0/photo.jpg?sz=128", "display_name": "ilham suaib", "link": "https://stackoverflow.com/users/8561486/ilham-suaib"}, "edited": false, "score": 0, "creation_date": 1533044393, "post_id": 51607449, "comment_id": 90194821, "body": "thanks all for helping :)"}], "answers": [{"tags": [], "owner": {"reputation": 63626, "user_id": 7015400, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/rhlKG.jpg?s=128&g=1", "display_name": "Peter Haddad", "link": "https://stackoverflow.com/users/7015400/peter-haddad"}, "is_accepted": true, "score": 3, "last_activity_date": 1533030032, "last_edit_date": 1592644375, "creation_date": 1533030032, "answer_id": 51610280, "question_id": 51607449, "link": "https://stackoverflow.com/questions/51607449/what-is-the-different-betwen-equalto-and-startat-endat-in-firebase-and-whe/51610280#51610280", "title": "what is the different betwen &quot;equalTo&quot; and &quot;startAt &amp; endAt&quot; in firebase and when i should use &quot;equalTo&quot; or &quot;startAt and endAt&quot;?", "body": "<pre><code>ref.orderByChild(&quot;email&quot;).equalTo(str)\n</code></pre>\n<p>The above means that the email has to be equal to the value of <code>str</code>. It is the same as saying <code>WHERE email= 'userx@gmail.com'</code></p>\n<hr />\n<pre><code>ref.orderByChild(&quot;email&quot;).startAt(str).endAt(str+&quot;\\\\uf8ff&quot;)\n</code></pre>\n<p>This is like saying <code>WHERE email LIKE ca%</code> which will return all emails that start with <code>&quot;ca&quot;</code></p>\n<blockquote>\n<p><code>public Query startAt (String value)</code></p>\n<p>Create a query constrained to only return child nodes with a value greater than or equal to the given value, using the given orderBy directive or priority as default.</p>\n<p><code>public Query endAt (String value)</code></p>\n<p>Create a query constrained to only return child nodes with a value less than or equal to the given value, using the given orderBy directive or priority as default.</p>\n<p>The <code>\\uf8ff</code> is simply the last character in unicode, so acts as an end guard.</p>\n</blockquote>\n<p>Check this for queries:</p>\n<p><a href=\"https://www.youtube.com/watch?v=sKFLI5FOOHs\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=sKFLI5FOOHs</a></p>\n"}, {"comments": [{"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "reply_to_user": {"reputation": 133, "user_id": 8561486, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8SbAyu4N4S8/AAAAAAAAAAI/AAAAAAAAABw/WgJ2-xnH8-0/photo.jpg?sz=128", "display_name": "ilham suaib", "link": "https://stackoverflow.com/users/8561486/ilham-suaib"}, "edited": false, "score": 0, "creation_date": 1533112176, "post_id": 51610286, "comment_id": 90221681, "body": "You&#39;re welcome! If you think that my answer helped you, please consider accepting it by clicking the checkmark on the left side under the vote arrows. Should change the color in green. I&#39;d appreciate it. Thanks!"}], "tags": [], "owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "is_accepted": false, "score": 1, "last_activity_date": 1533030508, "last_edit_date": 1592644375, "creation_date": 1533030046, "answer_id": 51610286, "question_id": 51607449, "link": "https://stackoverflow.com/questions/51607449/what-is-the-different-betwen-equalto-and-startat-endat-in-firebase-and-whe/51610286#51610286", "title": "what is the different betwen &quot;equalTo&quot; and &quot;startAt &amp; endAt&quot; in firebase and when i should use &quot;equalTo&quot; or &quot;startAt and endAt&quot;?", "body": "<p>It's true that in &quot;some&quot; cases, you can achieve the same thing using either the first approach or either the other but from the official documentation regarding <a href=\"https://firebase.google.com/docs/database/android/lists-of-data#filtering_data\" rel=\"nofollow noreferrer\">filtering data</a>, each method has a difference purpose as:</p>\n<blockquote>\n<p>equalTo() - Return items equal to the specified key or value depending on the order-by method chosen.</p>\n<p>startAt() - Return items greater than or equal to the specified key or value depending on the order-by method chosen.</p>\n<p>endAt() - Return items less than or equal to the specified key or value depending on the order-by method chosen.</p>\n</blockquote>\n<p>But as a conclusion, use the first approach when you want to have a perfect match. The second approach is used usually for a search query when you want to filter data that starts with some characters. In terms of SQL, note that there isn't an equivalent to <code>LIKE</code> clause in Firebase but with the second approach we simulate the exact same behaviour.</p>\n"}], "owner": {"reputation": 133, "user_id": 8561486, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8SbAyu4N4S8/AAAAAAAAAAI/AAAAAAAAABw/WgJ2-xnH8-0/photo.jpg?sz=128", "display_name": "ilham suaib", "link": "https://stackoverflow.com/users/8561486/ilham-suaib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 880, "favorite_count": 0, "accepted_answer_id": 51610280, "answer_count": 2, "score": 3, "last_activity_date": 1533030508, "creation_date": 1533021122, "last_edit_date": 1533026029, "question_id": 51607449, "link": "https://stackoverflow.com/questions/51607449/what-is-the-different-betwen-equalto-and-startat-endat-in-firebase-and-whe", "title": "what is the different betwen &quot;equalTo&quot; and &quot;startAt &amp; endAt&quot; in firebase and when i should use &quot;equalTo&quot; or &quot;startAt and endAt&quot;?", "body": "<p>I have been using two codes below when i'm trying to find record by email or phone number, sometimes first code working fine sometimes not working and also the second code same too.</p>\n\n<p>what is the difference between codes below and when i should use <strong>\"equalTo\"</strong> or <strong>\"startAt and endAt\"</strong>?</p>\n\n<pre><code>ref.orderByChild(\"email\")\n            .equalTo(str)\n</code></pre>\n\n<p>and </p>\n\n<pre><code>ref.orderByChild(\"email\")\n            .startAt(str)\n            .endAt(str+\"\\\\uf8ff\")\n</code></pre>\n"}, {"tags": ["android", "data-binding", "kotlin", "android-databinding"], "comments": [{"owner": {"reputation": 7833, "user_id": 1079990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/roW20.png?s=128&g=1", "display_name": "hannes ach", "link": "https://stackoverflow.com/users/1079990/hannes-ach"}, "edited": false, "score": 0, "creation_date": 1533020965, "post_id": 51607360, "comment_id": 90179896, "body": "I made a issue at Google for this too <a href=\"https://issuetracker.google.com/issues/80029759\" rel=\"nofollow noreferrer\">issuetracker.google.com/issues/80029759</a>"}], "answers": [{"tags": [], "owner": {"reputation": 331, "user_id": 9101749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UOrg3.png?s=128&g=1", "display_name": "Mumi", "link": "https://stackoverflow.com/users/9101749/mumi"}, "is_accepted": true, "score": 1, "last_activity_date": 1533021905, "creation_date": 1533021905, "answer_id": 51607669, "question_id": 51607360, "link": "https://stackoverflow.com/questions/51607360/android-kotlin-databinding-error-during-runtime/51607669#51607669", "title": "Android/Kotlin databinding error during runtime", "body": "<p>The type of mBinding is wrong, it should be ActivityRecordBinding.</p>\n\n<pre><code>private lateinit var mBinding: ActivityRecordBinding\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 45763, "user_id": 6891563, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/HJ9QX.jpg?s=128&g=1", "display_name": "Khemraj", "link": "https://stackoverflow.com/users/6891563/khemraj"}, "is_accepted": false, "score": 0, "last_activity_date": 1533116973, "last_edit_date": 1592644375, "creation_date": 1533116973, "answer_id": 51630231, "question_id": 51607360, "link": "https://stackoverflow.com/questions/51607360/android-kotlin-databinding-error-during-runtime/51630231#51630231", "title": "Android/Kotlin databinding error during runtime", "body": "<blockquote>\n<p>Just <strong>be sure</strong> if your layout file name is in <strong>snake_case</strong> then your\nbinding class name would be in <strong>CamelCase</strong>.</p>\n</blockquote>\n<h2>For example</h2>\n<p>Layout Name is <strong><code>activity_main.xml</code></strong></p>\n<p>Binding class name would be <strong><code>ActivityMainBinding.class</code></strong></p>\n<p>So your binding class name will be <code>ActivityRecordBinding</code>.</p>\n"}], "owner": {"reputation": 7833, "user_id": 1079990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/roW20.png?s=128&g=1", "display_name": "hannes ach", "link": "https://stackoverflow.com/users/1079990/hannes-ach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 1, "accepted_answer_id": 51607669, "answer_count": 2, "score": 0, "last_activity_date": 1533116973, "creation_date": 1533020843, "question_id": 51607360, "link": "https://stackoverflow.com/questions/51607360/android-kotlin-databinding-error-during-runtime", "title": "Android/Kotlin databinding error during runtime", "body": "<p>When you use a included layout</p>\n\n<p><code>&lt;include\n    android:id=\"@+id/included\"\n    layout=\"@layout/content_fft\"/&gt;</code></p>\n\n<p>and use </p>\n\n<p><code>mBinding = DataBindingUtil.setContentView(this, R.layout.activity_record)</code></p>\n\n<p>I see this\n<a href=\"https://i.stack.imgur.com/UJq4H.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UJq4H.png\" alt=\"enter image description here\"></a></p>\n\n<p>but it <strong>builds and runs properly</strong>.</p>\n\n<p>Does anyone has a clue how to get rid of it. It's very annoying because Android Studio shows me a lot of errors.</p>\n\n<p>To demonstrate the error, I made a demo repo <a href=\"https://github.com/hannesa2/AndroidBinding3.2\" rel=\"nofollow noreferrer\">https://github.com/hannesa2/AndroidBinding3.2</a></p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 0, "creation_date": 1533019712, "post_id": 51606956, "comment_id": 90179254, "body": "I encourage to learn the language enough so you can construct this yourself. Read about <a href=\"https://kotlinlang.org/docs/reference/extensions.html\" rel=\"nofollow noreferrer\">extension functions</a> and <a href=\"https://kotlinlang.org/docs/reference/lambdas.html\" rel=\"nofollow noreferrer\">higher-order functions</a>. The first parameter could be plain boolean. The second is your lambda."}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "reply_to_user": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 0, "creation_date": 1533019732, "post_id": 51606956, "comment_id": 90179262, "body": "even though I am too late for it: what did you even try to solve it? Rather follow @EugenPechanec&#39;s advice then just copying the solution."}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 1, "creation_date": 1533041789, "post_id": 51606956, "comment_id": 90193051, "body": "Personally i&#39;d stick with the standard library: <code>builder.takeIf { condition_code }?.apply { applied_code }</code> Any new reader of your code will be familiar with those and won&#39;t have to study and memorize your hand-rolled extension funs."}], "answers": [{"comments": [{"owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 0, "creation_date": 1533019912, "post_id": 51607022, "comment_id": 90179354, "body": "Please add an example of use (I&#39;m looking for the first lambda in parentheses and the second outside). Oh, and the inline modifier is missing."}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "reply_to_user": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 0, "creation_date": 1533020020, "post_id": 51607022, "comment_id": 90179419, "body": "Right... Funny enough I thought about that first but must have forgotten while writing :-D adding the sample soon"}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "reply_to_user": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 0, "creation_date": 1533020481, "post_id": 51607022, "comment_id": 90179664, "body": "added. Thanks for the hints"}, {"owner": {"reputation": 842, "user_id": 476419, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/41e413d64bac3d1a1aa3da69a0504a0a?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/476419/nick"}, "edited": false, "score": 0, "creation_date": 1554401835, "post_id": 51607022, "comment_id": 97749358, "body": "@Roland, this is helpful. Is there any sort of way to do a <code>takeIf</code> without executing the <code>T</code>?  In the example above,      <code>ADemo().takeIf(ADemo::isTrue)</code>  ADemo will be created, then will be taken only if the predicate is true. Is there a way to only execute the <code>T</code> if the predicate is true?"}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "reply_to_user": {"reputation": 842, "user_id": 476419, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/41e413d64bac3d1a1aa3da69a0504a0a?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/476419/nick"}, "edited": false, "score": 0, "creation_date": 1554402783, "post_id": 51607022, "comment_id": 97749843, "body": "@Nick that&#39;s probably a question for its own.. sounds like a job for a &quot;simple&quot; <code>if</code> or <code>when</code>.."}], "tags": [], "owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "is_accepted": true, "score": 9, "last_activity_date": 1533050893, "last_edit_date": 1533050893, "creation_date": 1533019679, "answer_id": 51607022, "question_id": 51606956, "link": "https://stackoverflow.com/questions/51606956/how-to-implement-an-applyif-for-kotlin/51607022#51607022", "title": "how to implement an applyif for Kotlin?", "body": "<p>Yes, of course. You can nearly program anything, <strong><em>but</em></strong> don't reinvent the wheel. Look at the bottom of the answer to see a standard Kotlin approach without own extension function(s) which may already suffice your needs (not exactly <code>applyIf</code> though).</p>\n\n<p>Now, however, lets see how an <code>applyIf</code> might be implemented:</p>\n\n<pre><code>inline fun &lt;T&gt; T.applyIf(predicate: T.() -&gt; Boolean, block: T.() -&gt; Unit): T = apply { \n  if (predicate(this)) \n    block(this) \n}\n</code></pre>\n\n<p>Don't forget the <code>inline</code> if you are implementing extension functions with lambdas.</p>\n\n<p>Here is an example usage of the above.</p>\n\n<pre><code>// sample class\nclass ADemo {\n  fun isTrue() = true\n}\n\n// sample usage using method references\nADemo().applyIf(ADemo::isTrue, ::println)\n\n// or if you prefer or require it, here without\nADemo().applyIf( { isTrue() } ) {\n  println(this)\n}\n</code></pre>\n\n<p>If you just want to supply a boolean instead, you can use the following extension function:</p>\n\n<pre><code>inline fun &lt;T&gt; T.applyIf(condition : Boolean, block : T.() -&gt; Unit) : T = apply { \n  if(condition) block(this) \n}\n</code></pre>\n\n<p>and call it with:</p>\n\n<pre><code>val someCondition = true\nADemo().applyIf(someCondition) {\n  println(this)\n}\n</code></pre>\n\n<p>And now a possible <strong><em>Kotlin standard way</em></strong> with which more people could be familiar:</p>\n\n<pre><code>ADemo().takeIf(ADemo::isTrue)\n       ?.apply(::println)\n\n// or\nADemo().takeIf { it.isTrue() }\n       ?.apply { println(this) }\n</code></pre>\n\n<p>If they do remember (I actually didn't until I saw Marko Topolniks comment) they should immediately know what's going on.\nHowever, if you require the given value (i.e. <code>ADemo()</code>) after calling <code>takeIf</code> this approach might not work for you as the following will set the variable to <code>null</code> then:</p>\n\n<pre><code>val x = ADemo().takeIf { false }\n               ?.apply { println(this) /* never called */ }\n// now x = null\n</code></pre>\n\n<p>whereas the following will rather set the variable to the <code>ADemo</code>-instance:</p>\n\n<pre><code>val x = ADemo().applyIf(false) { println(this) /* also not called */ }\n// now x contains the ADemo()-instance\n</code></pre>\n\n<p>Chaining the builder calls might not be so nice then. Still you can also accomplish this via standard Kotlin functions by combining the <code>takeIf</code> with <code>apply</code> or <code>also</code> (or <code>with</code>, <code>let</code>, <code>run</code>, depending on whether you want to return something or not or you prefer working with <code>it</code> or <code>this</code>):</p>\n\n<pre><code>val x = builder.apply {\n  takeIf { false }\n    ?.apply(::println) // not called\n  takeIf { true }\n    ?.apply(::println) // called\n}\n// x contains the builder\n</code></pre>\n\n<p>But then again we are nearly there where you were already in your question. The same definitely looks better with <code>applyIf</code>-usage:</p>\n\n<pre><code>val x = builder.applyIf(false, ::println) // not called\n               .applyIf(true) { \n                 println(this) // called\n               }\n// x contains the builder\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": false, "score": 2, "last_activity_date": 1533019769, "creation_date": 1533019769, "answer_id": 51607048, "question_id": 51606956, "link": "https://stackoverflow.com/questions/51606956/how-to-implement-an-applyif-for-kotlin/51607048#51607048", "title": "how to implement an applyif for Kotlin?", "body": "<p>Sure you can, you just need an extension function so you can call it on the <code>builder</code>, and you need it to take a <code>Boolean</code> parameter and the lambda to execute.</p>\n\n<p>If you look at the source of the <code>apply</code> function itself, it will help with most of the implementation:</p>\n\n<pre><code>public inline fun &lt;T&gt; T.apply(block: T.() -&gt; Unit): T {\n    block()\n    return this\n}\n</code></pre>\n\n<p>Based on this, <code>applyIf</code> can be as simple as:</p>\n\n<pre><code>inline fun &lt;T&gt; T.applyIf(condition: Boolean, block: T.() -&gt; Unit): T {\n    return if (condition) this.apply(block) else this\n}\n</code></pre>\n\n<p>Usage looks like this:</p>\n\n<pre><code>builder.applyIf(x &gt; 200) {\n    setSomething()\n}\n</code></pre>\n"}], "owner": {"reputation": 1442, "user_id": 1297546, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/zpU5e.jpg?s=128&g=1", "display_name": "Elderry", "link": "https://stackoverflow.com/users/1297546/elderry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1795, "favorite_count": 1, "accepted_answer_id": 51607022, "answer_count": 2, "score": 6, "last_activity_date": 1533050893, "creation_date": 1533019426, "last_edit_date": 1533019505, "question_id": 51606956, "link": "https://stackoverflow.com/questions/51606956/how-to-implement-an-applyif-for-kotlin", "title": "how to implement an applyif for Kotlin?", "body": "<p>I'd like to have an <code>applyif</code> to work like:</p>\n\n<pre><code>builder.applyif(&lt;condition expression&gt;) {\n    builder.set...\n}\n</code></pre>\n\n<p>to be equal with:</p>\n\n<pre><code>builder.apply {\n    if (&lt;condition expression&gt;) {\n        builder.set...\n    }\n}\n</code></pre>\n\n<p>Is that possible?</p>\n"}, {"tags": ["date", "kotlin", "datetimeoffset"], "comments": [{"owner": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "edited": false, "score": 0, "creation_date": 1533454945, "post_id": 51606590, "comment_id": 90346254, "body": "If you do need a <code>Date</code>, for example for a legacy API that you don\u2019t want to change just now, why not just <code>Date.from(Instant.now())</code> or even <code>new Date()</code>? If you don\u2019t need a <code>Date</code> for a legacy API, avoid that class, it is outdated. Stay with the modern API, java.time, exclusively."}], "answers": [{"comments": [{"owner": {"reputation": 7120, "user_id": 1427460, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/316e0e895fa44d043e204708d7be0e50?s=128&d=identicon&r=PG&f=1", "display_name": "bNd", "link": "https://stackoverflow.com/users/1427460/bnd"}, "edited": false, "score": 0, "creation_date": 1533018905, "post_id": 51606739, "comment_id": 90178845, "body": "Thanks, yes, you are right. I am passing toInstant only. that is typo mistake. but I tried simple test now, it also works for me. let me check in my project. why is it not working?"}, {"owner": {"reputation": 7120, "user_id": 1427460, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/316e0e895fa44d043e204708d7be0e50?s=128&d=identicon&r=PG&f=1", "display_name": "bNd", "link": "https://stackoverflow.com/users/1427460/bnd"}, "edited": false, "score": 0, "creation_date": 1533021041, "post_id": 51606739, "comment_id": 90179933, "body": "I have this date &#39;2018-07-30T18:30Z&#39; in my project. is this creating issue?"}, {"owner": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "reply_to_user": {"reputation": 7120, "user_id": 1427460, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/316e0e895fa44d043e204708d7be0e50?s=128&d=identicon&r=PG&f=1", "display_name": "bNd", "link": "https://stackoverflow.com/users/1427460/bnd"}, "edited": false, "score": 0, "creation_date": 1533454763, "post_id": 51606739, "comment_id": 90346218, "body": "Let me guess, @bNd, you\u2019re in India or Sri Lanka? Then 2018-07-30T18:30Z equals 2018-07-31T00:00 in your local time, which is what <code>Date.toString</code> prints, so you will see a time of day of 00:00. This is correct and expected. The time is there, it\u2019s just 00:00."}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": false, "score": 4, "last_activity_date": 1533018579, "creation_date": 1533018579, "answer_id": 51606739, "question_id": 51606590, "link": "https://stackoverflow.com/questions/51606590/how-to-convert-offsetdatetime-to-date-with-time/51606739#51606739", "title": "How to convert OffsetDateTime to Date with time", "body": "<p>That conversion shouldn't work - there is no <code>Date.from</code> method that takes an <code>OffsetDateTime</code> directly as far as I see in my IDE and in the docs.</p>\n\n<p>However, passing in an <code>Instant</code> to <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Date.html#from-java.time.Instant-\" rel=\"nofollow noreferrer\"><code>Date.from</code></a> works fine for me (as in it keeps time information), for example:</p>\n\n<pre><code>val submissionDate: OffsetDateTime = OffsetDateTime.ofInstant(Instant.now(), ZoneOffset.UTC)\nval date = Date.from(submissionDate.toInstant())\nprintln(date) // Tue Jul 31 08:26:31 CEST 2018\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10859, "user_id": 3710865, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oROuW.jpg?s=128&g=1", "display_name": "sasikumar", "link": "https://stackoverflow.com/users/3710865/sasikumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1533019001, "creation_date": 1533019001, "answer_id": 51606848, "question_id": 51606590, "link": "https://stackoverflow.com/questions/51606590/how-to-convert-offsetdatetime-to-date-with-time/51606848#51606848", "title": "How to convert OffsetDateTime to Date with time", "body": "<p>Convert your submissionDate to Instant</p>\n\n<pre><code>val submissionDate = OffsetDateTime.ofInstant(Instant.now(), ZoneOffset.UTC)\nval date = Date.from(submissionDate.toInstant())\nprintln(date)//Tue Jul 31 12:05:36 IST 2018\n</code></pre>\n"}], "owner": {"reputation": 7120, "user_id": 1427460, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/316e0e895fa44d043e204708d7be0e50?s=128&d=identicon&r=PG&f=1", "display_name": "bNd", "link": "https://stackoverflow.com/users/1427460/bnd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8549, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1533019352, "creation_date": 1533017962, "last_edit_date": 1533019352, "question_id": 51606590, "link": "https://stackoverflow.com/questions/51606590/how-to-convert-offsetdatetime-to-date-with-time", "title": "How to convert OffsetDateTime to Date with time", "body": "<p>I have offsetdatetime field and I want to convert into date field. I used </p>\n\n<pre><code>val submissionDate:OffSetDateTime = OffsetDateTime.ofInstant(Instant.now(), ZoneOffset.UTC)\nval date = Date.from(submissionDate.toInstant())\n</code></pre>\n\n<p>this conversion returns date without time detail. does I have to manually set time into <code>date</code> field like hh:mm::ss or any other inbuilt function there.</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 10859, "user_id": 3710865, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oROuW.jpg?s=128&g=1", "display_name": "sasikumar", "link": "https://stackoverflow.com/users/3710865/sasikumar"}, "edited": false, "score": 0, "creation_date": 1533019594, "post_id": 51606374, "comment_id": 90179201, "body": "can you post R.layout.activity_main code?"}, {"owner": {"reputation": 11, "user_id": 10158676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aefa33f09f307805af7bb99d4c618bb?s=128&d=identicon&r=PG", "display_name": "otsuka", "link": "https://stackoverflow.com/users/10158676/otsuka"}, "reply_to_user": {"reputation": 10859, "user_id": 3710865, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oROuW.jpg?s=128&g=1", "display_name": "sasikumar", "link": "https://stackoverflow.com/users/3710865/sasikumar"}, "edited": false, "score": 0, "creation_date": 1533026811, "post_id": 51606374, "comment_id": 90183095, "body": "Thank you for your comment.   I added information about activity_main.xml."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10158676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aefa33f09f307805af7bb99d4c618bb?s=128&d=identicon&r=PG", "display_name": "otsuka", "link": "https://stackoverflow.com/users/10158676/otsuka"}, "edited": false, "score": 0, "creation_date": 1533030565, "post_id": 51609830, "comment_id": 90185465, "body": "I tested it now and Android Studio show message that it is duplication of attribute layout."}], "tags": [], "owner": {"reputation": 10859, "user_id": 3710865, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oROuW.jpg?s=128&g=1", "display_name": "sasikumar", "link": "https://stackoverflow.com/users/3710865/sasikumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1533028823, "creation_date": 1533028823, "answer_id": 51609830, "question_id": 51606374, "link": "https://stackoverflow.com/questions/51606374/my-android-application-crashes-when-switch-to-multi-window-mode/51609830#51609830", "title": "My Android application crashes when switch to multi window mode", "body": "<p>You are forget to include layout.</p>\n\n<pre><code>layout=\"@layout/yourlayout\"\n</code></pre>\n\n<p>It should be</p>\n\n<pre><code>&lt;include\nlayout=\"@layout/app_bar_main\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"match_parent\"\nlayout=\"@layout/yourlayout\" /&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 10158676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aefa33f09f307805af7bb99d4c618bb?s=128&d=identicon&r=PG", "display_name": "otsuka", "link": "https://stackoverflow.com/users/10158676/otsuka"}, "is_accepted": true, "score": 0, "last_activity_date": 1533115846, "creation_date": 1533115846, "answer_id": 51629829, "question_id": 51606374, "link": "https://stackoverflow.com/questions/51606374/my-android-application-crashes-when-switch-to-multi-window-mode/51629829#51629829", "title": "My Android application crashes when switch to multi window mode", "body": "<p>I found a solution.<br>\nI must make <code>content_main.xml</code> that is used in <code>activity_main.xml / app_bar_main.xml /</code> like bellow.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.constraint.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\nxmlns:app=\"http://schemas.android.com/apk/res-auto\"\nxmlns:tools=\"http://schemas.android.com/tools\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"match_parent\"\napp:layout_behavior=\"@string/appbar_scrolling_view_behavior\"\ntools:context=\"com.otk1fd.simplemio.activities.MainActivity\"\ntools:showIn=\"@layout/app_bar_main\"&gt;\n\n&lt;fragment\n    android:id=\"@+id/fragment\"\n    android:name=\"com.otk1fd.simplemio.fragments.ConfigFragment\"\n    android:layout_width=\"0dp\"\n    android:layout_height=\"0dp\"\n    app:layout_constraintBottom_toBottomOf=\"parent\"\n    app:layout_constraintEnd_toEndOf=\"parent\"\n    app:layout_constraintStart_toStartOf=\"parent\"\n    app:layout_constraintTop_toTopOf=\"parent\" /&gt;\n&lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n\n<p>to  </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.constraint.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\nxmlns:app=\"http://schemas.android.com/apk/res-auto\"\nxmlns:tools=\"http://schemas.android.com/tools\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"match_parent\"\napp:layout_behavior=\"@string/appbar_scrolling_view_behavior\"\ntools:context=\"com.otk1fd.simplemio.activities.MainActivity\"\ntools:showIn=\"@layout/app_bar_main\"&gt;\n\n&lt;FrameLayout\n    android:id=\"@+id/fragmentLayout\"\n    android:layout_width=\"0dp\"\n    android:layout_height=\"0dp\"\n    app:layout_constraintBottom_toBottomOf=\"parent\"\n    app:layout_constraintEnd_toEndOf=\"parent\"\n    app:layout_constraintStart_toStartOf=\"parent\"\n    app:layout_constraintTop_toTopOf=\"parent\" /&gt;\n&lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n\n<p>I must not use Fragment layout component with switchable Fragment object in layout xml file.<br>\nIf I use switchable fragment, I must use FlameLayout in layout xml file.<br>\nThank you for sasikumar.</p>\n"}], "owner": {"reputation": 11, "user_id": 10158676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aefa33f09f307805af7bb99d4c618bb?s=128&d=identicon&r=PG", "display_name": "otsuka", "link": "https://stackoverflow.com/users/10158676/otsuka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 616, "favorite_count": 0, "accepted_answer_id": 51629829, "answer_count": 2, "score": 1, "last_activity_date": 1533115846, "creation_date": 1533017026, "last_edit_date": 1533026772, "question_id": 51606374, "link": "https://stackoverflow.com/questions/51606374/my-android-application-crashes-when-switch-to-multi-window-mode", "title": "My Android application crashes when switch to multi window mode", "body": "<p>My Android application crashes when switch to multi window mode.\nWhen this application is only displayed on screen and I long click multitask button, this application crashes.<br>\nIn contrast, standard launch from home launcher, this problem does not appear.</p>\n\n<p>This is stacktrace.</p>\n\n<pre><code>java.lang.RuntimeException: Unable to start activity ComponentInfo{com.otk1fd.simplemio/com.otk1fd.simplemio.activities.MainActivity}: android.view.InflateException: Binary XML file line #11: Binary XML file line #11: Error inflating class fragment\n    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2778)\n    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2856)\n    at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:4699)\n    at android.app.ActivityThread.-wrap18(Unknown Source:0)\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1595)\n    at android.os.Handler.dispatchMessage(Handler.java:106)\n    at android.os.Looper.loop(Looper.java:164)\n    at android.app.ActivityThread.main(ActivityThread.java:6494)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:438)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:807)\n Caused by: android.view.InflateException: Binary XML file line #11: Binary XML file line #11: Error inflating class fragment\n Caused by: android.view.InflateException: Binary XML file line #11: Error inflating class fragment\n Caused by: java.lang.IllegalStateException: Fragment com.otk1fd.simplemio.fragments.ConfigFragment did not create a view.\n    at android.app.FragmentManagerImpl.onCreateView(FragmentManager.java:3569)\n    at android.app.FragmentController.onCreateView(FragmentController.java:98)\n    at android.app.Activity.onCreateView(Activity.java:6219)\n    at android.support.v4.app.BaseFragmentActivityApi14.onCreateView(BaseFragmentActivityApi14.java:41)\n    at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:68)\n    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:780)\n    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:730)\n    at android.view.LayoutInflater.rInflate(LayoutInflater.java:863)\n    at android.view.LayoutInflater.rInflateChildren(LayoutInflater.java:824)\n    at android.view.LayoutInflater.parseInclude(LayoutInflater.java:995)\n    at android.view.LayoutInflater.rInflate(LayoutInflater.java:859)\n    at android.view.LayoutInflater.rInflateChildren(LayoutInflater.java:824)\n    at android.view.LayoutInflater.parseInclude(LayoutInflater.java:995)\n    at android.view.LayoutInflater.rInflate(LayoutInflater.java:859)\n    at android.view.LayoutInflater.rInflateChildren(LayoutInflater.java:824)\n    at android.view.LayoutInflater.inflate(LayoutInflater.java:515)\n    at android.view.LayoutInflater.inflate(LayoutInflater.java:423)\n    at android.view.LayoutInflater.inflate(LayoutInflater.java:374)\n    at android.support.v7.app.AppCompatDelegateImplV9.setContentView(AppCompatDelegateImplV9.java:287)\n    at android.support.v7.app.AppCompatActivity.setContentView(AppCompatActivity.java:139)\n    at com.otk1fd.simplemio.activities.MainActivity.onCreate(MainActivity.kt:38)\n    at android.app.Activity.performCreate(Activity.java:7009)\n    at android.app.Activity.performCreate(Activity.java:7000)\n    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1214)\n    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2731)\n    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2856)\n    at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:4699)\n    at android.app.ActivityThread.-wrap18(Unknown Source:0)\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1595)\n    at android.os.Handler.dispatchMessage(Handler.java:106)\n    at android.os.Looper.loop(Looper.java:164)\n    at android.app.ActivityThread.main(ActivityThread.java:6494)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:438)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:807)\n</code></pre>\n\n<p>This is partial code of MainActivity<br>\n<code>MainActivity.kt:38</code> is <code>setContentView(R.layout.activity_main)</code>.</p>\n\n<pre><code>class MainActivity : AppCompatActivity(), NavigationView.OnNavigationItemSelectedListener {\n\nprivate lateinit var navigationView: NavigationView\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n\n    MioUtil.setUp(this)\n    HttpErrorHandler.setUp(loginFunc = { startOAuthWithDialog() }, showErrorMessageFunc = { errorMessage -&gt; Toast.makeText(this, errorMessage, Toast.LENGTH_LONG).show() })\n\n    setContentView(R.layout.activity_main)\n\n    val toolbar: Toolbar = findViewById(R.id.toolbar)\n    setSupportActionBar(toolbar)\n\n    val drawerLayout: DrawerLayout = findViewById(R.id.drawer_layout)\n    val actionBarDrawerToggle = ActionBarDrawerToggle(\n            this, drawerLayout, toolbar, R.string.drawer_open, R.string.drawer_close)\n    drawerLayout.addDrawerListener(actionBarDrawerToggle)\n    actionBarDrawerToggle.syncState()\n\n    navigationView = findViewById(R.id.nav_view)\n    navigationView.setNavigationItemSelectedListener(this)\n    navigationView.menu.getItem(0).isChecked = true\n\n    supportActionBar?.title = getString(R.string.menu_coupon)\n\n    val defaultFragment = CouponFragment()\n    val fragmentTransaction = fragmentManager.beginTransaction()\n    fragmentTransaction.replace(R.id.fragment, defaultFragment)\n    fragmentTransaction.commit()\n}\n</code></pre>\n\n<p>This is activity_main.xml a layout file of MainActivity.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.v4.widget.DrawerLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\nxmlns:app=\"http://schemas.android.com/apk/res-auto\"\nxmlns:tools=\"http://schemas.android.com/tools\"\nandroid:id=\"@+id/drawer_layout\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"match_parent\"\nandroid:fitsSystemWindows=\"true\"\ntools:openDrawer=\"start\"&gt;\n\n&lt;include\n    layout=\"@layout/app_bar_main\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\" /&gt;\n\n&lt;android.support.design.widget.NavigationView\n    android:id=\"@+id/nav_view\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"match_parent\"\n    android:layout_gravity=\"start\"\n    android:fitsSystemWindows=\"true\"\n    app:headerLayout=\"@layout/nav_header_main\"\n    app:menu=\"@menu/activity_main_drawer\" /&gt;\n</code></pre>\n\n<p></p>\n\n<p>Full code of my application is here.<br>\n<a href=\"https://github.com/otsuka-kohei/simple-mio/tree/issue%2365\" rel=\"nofollow noreferrer\">https://github.com/otsuka-kohei/simple-mio/tree/issue%2365</a></p>\n\n<p>I checked ConfigFragment(that is extended PreferenceFragment), but this problem appears.\nFor example, disabling ConfigFragment and Build without ConfigFragment.</p>\n\n<p>What is wrong in my code?\nPlease help me.\nThank you.</p>\n"}, {"tags": ["android", "kotlin", "location"], "comments": [{"owner": {"reputation": 77669, "user_id": 550966, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/04gz5.png?s=128&g=1", "display_name": "Pankaj Kumar", "link": "https://stackoverflow.com/users/550966/pankaj-kumar"}, "edited": false, "score": 1, "creation_date": 1533013459, "post_id": 51605630, "comment_id": 90176804, "body": "Are you sure the problem exist in above code? There seems no issue here."}, {"owner": {"reputation": 73, "user_id": 2780363, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/5dc3953287cbb4d148edfb8699c27cd0?s=128&d=identicon&r=PG&f=1", "display_name": "Noob", "link": "https://stackoverflow.com/users/2780363/noob"}, "reply_to_user": {"reputation": 77669, "user_id": 550966, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/04gz5.png?s=128&g=1", "display_name": "Pankaj Kumar", "link": "https://stackoverflow.com/users/550966/pankaj-kumar"}, "edited": false, "score": 0, "creation_date": 1533015960, "post_id": 51605630, "comment_id": 90177595, "body": "I keep getting expecting member declaration"}, {"owner": {"reputation": 77669, "user_id": 550966, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/04gz5.png?s=128&g=1", "display_name": "Pankaj Kumar", "link": "https://stackoverflow.com/users/550966/pankaj-kumar"}, "edited": false, "score": 0, "creation_date": 1533016213, "post_id": 51605630, "comment_id": 90177679, "body": "@Noop Seems you did not declared something correctly, BUT that is not in the code which you shared."}, {"owner": {"reputation": 73, "user_id": 2780363, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/5dc3953287cbb4d148edfb8699c27cd0?s=128&d=identicon&r=PG&f=1", "display_name": "Noob", "link": "https://stackoverflow.com/users/2780363/noob"}, "reply_to_user": {"reputation": 77669, "user_id": 550966, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/04gz5.png?s=128&g=1", "display_name": "Pankaj Kumar", "link": "https://stackoverflow.com/users/550966/pankaj-kumar"}, "edited": false, "score": 0, "creation_date": 1533067003, "post_id": 51605630, "comment_id": 90207685, "body": "I figured out the error I declared the variable outside of a function, but i then changed it to inside. Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 2780363, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/5dc3953287cbb4d148edfb8699c27cd0?s=128&d=identicon&r=PG&f=1", "display_name": "Noob", "link": "https://stackoverflow.com/users/2780363/noob"}, "edited": false, "score": 0, "creation_date": 1533012757, "post_id": 51605640, "comment_id": 90176613, "body": "Hi I tried that already but i get &quot;expecting member declaration&quot; error"}, {"owner": {"reputation": 73, "user_id": 2780363, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/5dc3953287cbb4d148edfb8699c27cd0?s=128&d=identicon&r=PG&f=1", "display_name": "Noob", "link": "https://stackoverflow.com/users/2780363/noob"}, "edited": false, "score": 0, "creation_date": 1533015993, "post_id": 51605640, "comment_id": 90177607, "body": "I still get the same error could it be an Android Studio issue?"}], "tags": [], "owner": {"reputation": 1024, "user_id": 5095473, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh4.googleusercontent.com/-viE-V7PoMqY/AAAAAAAAAAI/AAAAAAAAANg/bsytZE_XHYc/photo.jpg?sz=128", "display_name": "Mehul Kanzariya", "link": "https://stackoverflow.com/users/5095473/mehul-kanzariya"}, "is_accepted": false, "score": 1, "last_activity_date": 1533013109, "last_edit_date": 1533013109, "creation_date": 1533012715, "answer_id": 51605640, "question_id": 51605630, "link": "https://stackoverflow.com/questions/51605630/how-to-create-location-object/51605640#51605640", "title": "How to create Location object", "body": "<p>I haven't tried this but try doing this.</p>\n\n<pre><code>var targetlocation = Location(LocationManager.GPS_PROVIDER)\ntargetlocation.latitude = 55.555555\ntargetlocation.longitude = 55.555555\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 2780363, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/5dc3953287cbb4d148edfb8699c27cd0?s=128&d=identicon&r=PG&f=1", "display_name": "Noob", "link": "https://stackoverflow.com/users/2780363/noob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 625, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1533013125, "creation_date": 1533012605, "last_edit_date": 1533012739, "question_id": 51605630, "link": "https://stackoverflow.com/questions/51605630/how-to-create-location-object", "title": "How to create Location object", "body": "<p>I am trying to make a new location and set its latitude/longitude like this:</p>\n\n<pre><code>var targetlocation = Location(\"\")\n//this example code doesn't work below\ntargetlocation.setLatitude(55.555555)\ntargetlocation.setLongitude(55.555555)\n</code></pre>\n\n<p>How can I do this correctly in kotlin? Thanks. </p>\n"}, {"tags": ["android", "kotlin", "mutablelivedata"], "comments": [{"owner": {"reputation": 4391, "user_id": 3106174, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/mKAhl.jpg?s=128&g=1", "display_name": "Advice-Dog", "link": "https://stackoverflow.com/users/3106174/advice-dog"}, "edited": false, "score": 0, "creation_date": 1532981897, "post_id": 51601419, "comment_id": 90169504, "body": "Where are you setting the value of your <code>LiveData</code>, and where are you <code>Observering</code> it?"}, {"owner": {"reputation": 4218, "user_id": 298539, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/3b05247da11662644fc23205a779e94a?s=128&d=identicon&r=PG", "display_name": "png", "link": "https://stackoverflow.com/users/298539/png"}, "reply_to_user": {"reputation": 4391, "user_id": 3106174, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/mKAhl.jpg?s=128&g=1", "display_name": "Advice-Dog", "link": "https://stackoverflow.com/users/3106174/advice-dog"}, "edited": false, "score": 0, "creation_date": 1532982050, "post_id": 51601419, "comment_id": 90169576, "body": "I am setting it in the on Resume again to reflect the change. I do not observe it explicitly. I have not used mutablelivedata much. How do i observe for the changes."}], "answers": [{"tags": [], "owner": {"reputation": 4391, "user_id": 3106174, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/mKAhl.jpg?s=128&g=1", "display_name": "Advice-Dog", "link": "https://stackoverflow.com/users/3106174/advice-dog"}, "is_accepted": true, "score": 7, "last_activity_date": 1532982431, "creation_date": 1532982431, "answer_id": 51601824, "question_id": 51601419, "link": "https://stackoverflow.com/questions/51601419/android-mutablelivedata-change-is-not-updating-the-ui/51601824#51601824", "title": "android : mutablelivedata change is not updating the UI", "body": "<p>For <code>LiveData</code>, you need to <code>Observe</code> the changes.</p>\n\n<p>First, create your <code>MediatorLiveData</code>.</p>\n\n<pre><code>val liveData = MediatorLiveData&lt;MyItem&gt;()\n</code></pre>\n\n<p>Next, within your Activity/Fragment/Etc, you need to call <code>.observe</code>. When the <code>Observer</code> is fired, it will have the updated data.</p>\n\n<pre><code>liveData.observe(this, Observer { \n    // Update the UI when the data has changed\n})\n</code></pre>\n\n<p>And lastly, somewhere else in code, you can update the value of your <code>LiveData</code>, and the <code>Observer</code> will be notified. </p>\n\n<pre><code>// Somewhere else\nliveData.value = MyItem(\"new value\")\n</code></pre>\n"}], "owner": {"reputation": 4218, "user_id": 298539, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/3b05247da11662644fc23205a779e94a?s=128&d=identicon&r=PG", "display_name": "png", "link": "https://stackoverflow.com/users/298539/png"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2348, "favorite_count": 0, "accepted_answer_id": 51601824, "answer_count": 1, "score": 3, "last_activity_date": 1532982431, "creation_date": 1532980688, "question_id": 51601419, "link": "https://stackoverflow.com/questions/51601419/android-mutablelivedata-change-is-not-updating-the-ui", "title": "android : mutablelivedata change is not updating the UI", "body": "<p>I am using MutableLiveData to store a choice user has made. The value is set from another activity. SO onResume i am calling</p>\n\n<pre><code> myMutableLivedata.value = newvale\n</code></pre>\n\n<p>But this does not update the UI unless i call a invalidateall().</p>\n\n<p>Is this expected behaviour of MutableLiveData</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 17743, "user_id": 558433, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/XZg0R.jpg?s=128&g=1", "display_name": "Marcos Vasconcelos", "link": "https://stackoverflow.com/users/558433/marcos-vasconcelos"}, "edited": false, "score": 0, "creation_date": 1532983099, "post_id": 51601161, "comment_id": 90170004, "body": "Serialize eveything with a ObjectOutputStream is the easier way"}], "answers": [{"comments": [{"owner": {"reputation": 194, "user_id": 9690187, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kZgGCncafnM/AAAAAAAAAAI/AAAAAAAAAAA/O6LU4QkVCig/photo.jpg?sz=128", "display_name": "Ion Cojucovschi", "link": "https://stackoverflow.com/users/9690187/ion-cojucovschi"}, "edited": false, "score": 0, "creation_date": 1533024155, "post_id": 51601618, "comment_id": 90181586, "body": "Save JSON to DB: String json = NumberList.toString(); //and insert this string into DB. Read json from DB: String json = Read_column_value_logic_here JSONObject jsonObject = new JSONObject(json);"}, {"owner": {"reputation": 625, "user_id": 7668336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8b9792920c51ecc5f2e60350d4e44c1?s=128&d=identicon&r=PG&f=1", "display_name": "Dinu Nicolae", "link": "https://stackoverflow.com/users/7668336/dinu-nicolae"}, "edited": false, "score": 1, "creation_date": 1533027546, "post_id": 51601618, "comment_id": 90183527, "body": "before I asked the question I have tried to save it in a SQL table row/column/value, so each row of the sql table was a cell of my matrix. When I was saving the matrix I used a nested for, when loading I did just go over every row of the table and update the value in my matrix. Loading was a lot faster then saving. the matrix is just huge! loading took about 20 sec saving about 3 min. I was thinking maybe I can transform it to something like a blob or bytes. I am not sure json would be a lot faster than my method."}, {"owner": {"reputation": 194, "user_id": 9690187, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kZgGCncafnM/AAAAAAAAAAI/AAAAAAAAAAA/O6LU4QkVCig/photo.jpg?sz=128", "display_name": "Ion Cojucovschi", "link": "https://stackoverflow.com/users/9690187/ion-cojucovschi"}, "reply_to_user": {"reputation": 625, "user_id": 7668336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8b9792920c51ecc5f2e60350d4e44c1?s=128&d=identicon&r=PG&f=1", "display_name": "Dinu Nicolae", "link": "https://stackoverflow.com/users/7668336/dinu-nicolae"}, "edited": false, "score": 0, "creation_date": 1533028524, "post_id": 51601618, "comment_id": 90184164, "body": "when you update array saved in Json, you update(in table) just one row, but when you update array with your method, you update(in table) multiple rows,  that&#39;s why saving takes a long time"}, {"owner": {"reputation": 625, "user_id": 7668336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8b9792920c51ecc5f2e60350d4e44c1?s=128&d=identicon&r=PG&f=1", "display_name": "Dinu Nicolae", "link": "https://stackoverflow.com/users/7668336/dinu-nicolae"}, "edited": false, "score": 0, "creation_date": 1533029800, "post_id": 51601618, "comment_id": 90184940, "body": "but still is there a faster way?"}, {"owner": {"reputation": 194, "user_id": 9690187, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kZgGCncafnM/AAAAAAAAAAI/AAAAAAAAAAA/O6LU4QkVCig/photo.jpg?sz=128", "display_name": "Ion Cojucovschi", "link": "https://stackoverflow.com/users/9690187/ion-cojucovschi"}, "reply_to_user": {"reputation": 625, "user_id": 7668336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8b9792920c51ecc5f2e60350d4e44c1?s=128&d=identicon&r=PG&f=1", "display_name": "Dinu Nicolae", "link": "https://stackoverflow.com/users/7668336/dinu-nicolae"}, "edited": false, "score": 0, "creation_date": 1533030384, "post_id": 51601618, "comment_id": 90185335, "body": "in Xamarin.android is happening pretty quickly, and if I would do that I think I would still use my method."}], "tags": [], "owner": {"reputation": 194, "user_id": 9690187, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kZgGCncafnM/AAAAAAAAAAI/AAAAAAAAAAA/O6LU4QkVCig/photo.jpg?sz=128", "display_name": "Ion Cojucovschi", "link": "https://stackoverflow.com/users/9690187/ion-cojucovschi"}, "is_accepted": false, "score": -1, "last_activity_date": 1532991362, "last_edit_date": 1532991362, "creation_date": 1532981476, "answer_id": 51601618, "question_id": 51601161, "link": "https://stackoverflow.com/questions/51601161/how-to-store-a-matrix/51601618#51601618", "title": "How to store a matrix", "body": "<p>You can save this array in json format, and after that you can serialize this back to an array.</p>\n\n<p>for example:</p>\n\n<pre><code>int[] NumberList=new int{1, 2, 3, 4, 5, 6} \n</code></pre>\n\n<p>is a one dimensional array and in json format it looks like:</p>\n\n<pre><code>{  \"NumberList\" : [1,2,3,4,5,6] }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 17743, "user_id": 558433, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/XZg0R.jpg?s=128&g=1", "display_name": "Marcos Vasconcelos", "link": "https://stackoverflow.com/users/558433/marcos-vasconcelos"}, "edited": false, "score": 0, "creation_date": 1532984529, "post_id": 51601957, "comment_id": 90170489, "body": "Same answer as the first one above, if you have something to add please edit the other one."}, {"owner": {"reputation": 2186, "user_id": 3851567, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/mgvtP.jpg?s=128&g=1", "display_name": "David Velasquez", "link": "https://stackoverflow.com/users/3851567/david-velasquez"}, "reply_to_user": {"reputation": 17743, "user_id": 558433, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/XZg0R.jpg?s=128&g=1", "display_name": "Marcos Vasconcelos", "link": "https://stackoverflow.com/users/558433/marcos-vasconcelos"}, "edited": false, "score": 1, "creation_date": 1532984975, "post_id": 51601957, "comment_id": 90170662, "body": "@MarcosVasconcelos They are pretty different since I provide the the complete Java and Gson code examples. Why would I edit his answer?"}, {"owner": {"reputation": 17743, "user_id": 558433, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/XZg0R.jpg?s=128&g=1", "display_name": "Marcos Vasconcelos", "link": "https://stackoverflow.com/users/558433/marcos-vasconcelos"}, "edited": false, "score": 0, "creation_date": 1532985046, "post_id": 51601957, "comment_id": 90170688, "body": "Aren&#39;t you offering the same solution?"}, {"owner": {"reputation": 2186, "user_id": 3851567, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/mgvtP.jpg?s=128&g=1", "display_name": "David Velasquez", "link": "https://stackoverflow.com/users/3851567/david-velasquez"}, "reply_to_user": {"reputation": 17743, "user_id": 558433, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/XZg0R.jpg?s=128&g=1", "display_name": "Marcos Vasconcelos", "link": "https://stackoverflow.com/users/558433/marcos-vasconcelos"}, "edited": false, "score": 1, "creation_date": 1532985282, "post_id": 51601957, "comment_id": 90170761, "body": "Yes but I provide a code example and it&#39;s clearer in my opinion. If I modified his, he would get the credit."}, {"owner": {"reputation": 625, "user_id": 7668336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8b9792920c51ecc5f2e60350d4e44c1?s=128&d=identicon&r=PG&f=1", "display_name": "Dinu Nicolae", "link": "https://stackoverflow.com/users/7668336/dinu-nicolae"}, "edited": false, "score": 0, "creation_date": 1533027542, "post_id": 51601957, "comment_id": 90183523, "body": "before I asked the question I have tried to save it in a SQL table row/column/value, so each row of the sql table was a cell of my matrix. When I was saving the matrix I used a nested for, when loading I did just go over every row of the table and update the value in my matrix. Loading was a lot faster then saving. the matrix is just huge! loading took about 20 sec saving about 3 min. I was thinking maybe I can transform it to something like a blob or bytes. I am not sure json would be a lot faster than my method."}], "tags": [], "owner": {"reputation": 2186, "user_id": 3851567, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/mgvtP.jpg?s=128&g=1", "display_name": "David Velasquez", "link": "https://stackoverflow.com/users/3851567/david-velasquez"}, "is_accepted": false, "score": 1, "last_activity_date": 1532984027, "last_edit_date": 1532984027, "creation_date": 1532983126, "answer_id": 51601957, "question_id": 51601161, "link": "https://stackoverflow.com/questions/51601161/how-to-store-a-matrix/51601957#51601957", "title": "How to store a matrix", "body": "<p>I am not sure how this would be done in Kotlin, but in Java I would make a Matrix class and have it wrap around my array object (I'm assuming you have a 2d matrix, but the same idea applies with a different matrix). Then use the Gson library to convert it to JSON, and save your JSON string to the DB. To get it back from the DB into its Matrix object from the DB, use Gson again to deserialize it. Here's an example:</p>\n\n<pre><code>public class Matrix {\n\n    public CustomObject[][] = new CustomObject[r][c]; //where r and c can be any value for capacity\n\n}\n</code></pre>\n\n<p>Then do this when you are about to save your Matrix to your DB:</p>\n\n<pre><code>Matrix matrix = new Matrix();\n\n//Do stuff with your matrix, add data to it, etc..\n\n//Then save it your DB\n\nGson gson = new Gson();\nString matrixJson = gson.toJson(matrix);\n\nsaveMatrixJsonToDB(matrixJson);\n</code></pre>\n\n<p>To load it back from DB I would do this:</p>\n\n<pre><code>public void loadMatrixFromDB(/*any params to connect to DB*/) {\n    String matrixJson;\n    //Connect to db and retrieve your matrix json string that you previously saved...\n\n    //Then convert it back to the Java object\n    Gson gson = new Gson();\n    Matrix matrix = gson.fromJson(matrixJson, Matrix.class);\n}\n</code></pre>\n"}], "owner": {"reputation": 625, "user_id": 7668336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8b9792920c51ecc5f2e60350d4e44c1?s=128&d=identicon&r=PG&f=1", "display_name": "Dinu Nicolae", "link": "https://stackoverflow.com/users/7668336/dinu-nicolae"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1532991362, "creation_date": 1532979628, "question_id": 51601161, "link": "https://stackoverflow.com/questions/51601161/how-to-store-a-matrix", "title": "How to store a matrix", "body": "<p>I am working with a big matrix </p>\n\n<pre><code>var counterMatrix1 = Array(heroCount + 1, {DoubleArray(heroCount + 1)})\n</code></pre>\n\n<p>I need to save it to a db and load it. What do you think is the best method to do this. any suggestions?</p>\n"}, {"tags": ["android", "kotlin", "android-room"], "answers": [{"tags": [], "owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "is_accepted": true, "score": 2, "last_activity_date": 1593968444, "last_edit_date": 1593968444, "creation_date": 1532977715, "answer_id": 51600721, "question_id": 51600575, "link": "https://stackoverflow.com/questions/51600575/how-can-i-make-this-singleton-simpler-in-kotlin/51600721#51600721", "title": "How can I make this singleton simpler in Kotlin?", "body": "<p>You can use an array literal (<code>[]</code>) instead of <code>arrayOf</code> and you can use the elvis operator for the null check. See <a href=\"https://stackoverflow.com/questions/44315778/assign-variable-only-if-it-is-null\">here</a>.</p>\n<pre><code>@Database(entities = [Book::class, User::class], version = 1)\nabstract class AppDatabase : RoomDatabase() {\n\n    abstract fun bookModel() : BookDao\n    abstract fun userModel() : UserDao\n\n    companion object {\n        private var INSTANCE: AppDatabase? = null\n\n        fun getInMemoryDatabase(context: Context): AppDatabase { \n            INSTANCE = INSTANCE ?: Room.inMemoryDatabaseBuilder(context.applicationContext, AppDatabase::class.java).build()\n            return INSTANCE!!\n        }\n    \n        fun destroyInstance() {\n            INSTANCE = null\n        }\n    }\n}\n</code></pre>\n<p>Since you need the instance you have to save it somewhere, using a <code>companion object</code> seems like a reasonable solution to me.</p>\n<p>If you somehow don't want to save the intance inside <code>AppDatabase</code>, you can also use an object (which is a singleton in Kotlin).</p>\n<pre><code>object AppDatabaseProvider {\n    private var INSTANCE: AppDatabase? = null\n\n    fun getInMemoryDatabase(context: Context): AppDatabase {\n       // ...\n    }\n\n    fun destroyInstance() {\n        INSTANCE = null\n    }\n}\n</code></pre>\n<p>These are both options to deal with static data in Kotlin, but you won't get it much shorter than that.</p>\n"}, {"tags": [], "owner": {"reputation": 2086, "user_id": 6733404, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vARvedsWAsM/AAAAAAAAAAI/AAAAAAAAAHc/qeiBs7OBaMY/photo.jpg?sz=128", "display_name": "Abner Esc&#243;cio", "link": "https://stackoverflow.com/users/6733404/abner-esc%c3%b3cio"}, "is_accepted": false, "score": 0, "last_activity_date": 1616249550, "last_edit_date": 1616249550, "creation_date": 1532977785, "answer_id": 51600748, "question_id": 51600575, "link": "https://stackoverflow.com/questions/51600575/how-can-i-make-this-singleton-simpler-in-kotlin/51600748#51600748", "title": "How can I make this singleton simpler in Kotlin?", "body": "<p>Maybe it will be any advance, try as follow</p>\n<pre><code>@Database(entities = arrayOf(Book::class, User::class), version = 1)\nabstract class AppDatabase : RoomDatabase() {\n\n    abstract fun bookModel() : BookDao\n    abstract fun userModel() : UserDao\n\n    companion object {\n        private var INSTANCE: AppDatabase? = null\n\n        fun getInMemoryDatabase(context: Context): AppDatabase {\n            return INSTANCE ?: Room.inMemoryDatabaseBuilder(context, this).build()\n        }\n\n        fun destroyInstance() {\n            INSTANCE = null\n        }\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "edited": false, "score": 0, "creation_date": 1533026317, "post_id": 51605797, "comment_id": 90182823, "body": "Thank you for pointing out my mistake! :) I also think, you won&#39;t get it much shorter as nhaarman also showed: <a href=\"https://stackoverflow.com/questions/44315778/assign-variable-only-if-it-is-null\" title=\"assign variable only if it is null\">stackoverflow.com/questions/44315778/&hellip;</a>"}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": false, "score": 1, "last_activity_date": 1533013691, "creation_date": 1533013691, "answer_id": 51605797, "question_id": 51600575, "link": "https://stackoverflow.com/questions/51600575/how-can-i-make-this-singleton-simpler-in-kotlin/51605797#51605797", "title": "How can I make this singleton simpler in Kotlin?", "body": "<p>Your solution is basically fine as is. </p>\n\n<p>Using an array literal is an option, as it's been pointed out by @Willi Mentzel, it makes your code a bit shorter, if you like how it looks.</p>\n\n<p>However, this code for getting the singleton instance is wrong:</p>\n\n<pre><code>private var INSTANCE: AppDatabase? = null\n\nfun getInMemoryDatabase(context: Context) = INSTANCE ?: Room.inMemoryDatabaseBuilder(context.applicationContext, AppDatabase::class.java).build()\n</code></pre>\n\n<p>The <code>getInMemoryDatabase</code> function never <em>assigns</em> a value to <code>INSTANCE</code>, meaning it will forever be <code>null</code>, and every time the function is called, the right hand side of the Elvis operator will be evaluated and returned. This means a new instance every time - instead of having a singleton, you're just creating a factory with this code.</p>\n\n<hr>\n\n<p>You <em>could</em> use the Elvis operator to shorten your original code a bit:</p>\n\n<pre><code>fun getInMemoryDatabase(context: Context): AppDatabase {\n    INSTANCE = INSTANCE ?: Room.inMemoryDatabaseBuilder(context.applicationContext, AppDatabase::class.java).build()\n    return INSTANCE!!\n}\n</code></pre>\n\n<p>This will do an extra assignment of <code>INSTANCE</code> to itself every call after the first one though, and I'd argue that saving those couple lines might not be worth it, as your original code with just a regular null check was easier to read than this is.</p>\n"}], "owner": {"reputation": 17444, "user_id": 2069407, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9cf04e8273f7868fedf1fe32e1a5ec4f?s=128&d=identicon&r=PG", "display_name": "s-hunter", "link": "https://stackoverflow.com/users/2069407/s-hunter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 754, "favorite_count": 0, "accepted_answer_id": 51600721, "answer_count": 3, "score": 2, "last_activity_date": 1616249550, "creation_date": 1532977159, "question_id": 51600575, "link": "https://stackoverflow.com/questions/51600575/how-can-i-make-this-singleton-simpler-in-kotlin", "title": "How can I make this singleton simpler in Kotlin?", "body": "<p>How can I make this singleton simpler in Kotlin for the Android room database initialization?</p>\n\n<pre><code>@Database(entities = arrayOf(Book::class, User::class), version = 1)\nabstract class AppDatabase : RoomDatabase() {\n\n    abstract fun bookModel() : BookDao\n    abstract fun userModel() : UserDao\n\n    companion object {\n        private var INSTANCE: AppDatabase? = null\n\n        fun getInMemoryDatabase(context: Context): AppDatabase {\n            if (INSTANCE == null) {\n                INSTANCE = Room.inMemoryDatabaseBuilder(context.applicationContext, AppDatabase::class.java).build()\n            }\n            return INSTANCE!!\n        }\n\n        fun destroyInstance() {\n            INSTANCE = null\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-viewpager"], "answers": [{"tags": [], "owner": {"reputation": 769, "user_id": 6284141, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/udu0v.jpg?s=128&g=1", "display_name": "Shubham Raitka", "link": "https://stackoverflow.com/users/6284141/shubham-raitka"}, "is_accepted": false, "score": 0, "last_activity_date": 1532977213, "creation_date": 1532977213, "answer_id": 51600587, "question_id": 51600382, "link": "https://stackoverflow.com/questions/51600382/replacing-viewpager-adapter-changing-only-off-screen-fragments/51600587#51600587", "title": "Replacing ViewPager Adapter changing only off-screen fragments", "body": "<p>Try this:-</p>\n\n<pre><code>fun changeData(params: List&lt;CustomObject&gt; = ArrayList()){\n    viewPager.adapter = null \n    viewPager.adapter = CustomCPagerAdapter(fragmentManager!!, params)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 638, "user_id": 2538860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/895ac2ccb36a009e2c6c219bb519cb1e?s=128&d=identicon&r=PG", "display_name": "Viktor Stojanov", "link": "https://stackoverflow.com/users/2538860/viktor-stojanov"}, "is_accepted": true, "score": 0, "last_activity_date": 1532977361, "creation_date": 1532977361, "answer_id": 51600629, "question_id": 51600382, "link": "https://stackoverflow.com/questions/51600382/replacing-viewpager-adapter-changing-only-off-screen-fragments/51600629#51600629", "title": "Replacing ViewPager Adapter changing only off-screen fragments", "body": "<p>The solution is to use <code>FragmentStatePagerAdapter</code> instead of <code>FragmentPagerAdapter</code> because it doesn't keep the fragments in memory. The later adapter has some sort of optimization and doesn't force refresh already displayed fragments even when a new instance of <code>FragmentPagerAdapter</code> is set to the <code>ViewPager</code>.</p>\n\n<p>From the docs about <a href=\"https://developer.android.com/reference/android/support/v4/app/FragmentStatePagerAdapter\" rel=\"nofollow noreferrer\"><code>FragmentStatePagerAdapter</code></a></p>\n\n<blockquote>\n  <p>This version of the pager is more useful when there are a large number of pages, working more like a list view. When pages are not visible to the user, their entire fragment may be destroyed, only keeping the saved state of that fragment. This allows the pager to hold on to much less memory associated with each visited page as compared to FragmentPagerAdapter at the cost of potentially more overhead when switching between pages.</p>\n</blockquote>\n"}], "owner": {"reputation": 638, "user_id": 2538860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/895ac2ccb36a009e2c6c219bb519cb1e?s=128&d=identicon&r=PG", "display_name": "Viktor Stojanov", "link": "https://stackoverflow.com/users/2538860/viktor-stojanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 51600629, "answer_count": 2, "score": -1, "last_activity_date": 1532977361, "creation_date": 1532976313, "last_edit_date": 1532976755, "question_id": 51600382, "link": "https://stackoverflow.com/questions/51600382/replacing-viewpager-adapter-changing-only-off-screen-fragments", "title": "Replacing ViewPager Adapter changing only off-screen fragments", "body": "<p>I have a <code>ViewPager</code> that displays 10 fragments. However when I change the <code>FragmentPagerAdapter</code> and set it to the <code>ViewPager</code> only the not-currently-shown fragments are changed. I tried invalidating the <code>ViewPager</code>, calling <code>notifyDataSetChanged()</code> in the <code>FragmentPagerAdapter</code> and <a href=\"https://stackoverflow.com/questions/7263291/viewpager-pageradapter-not-updating-the-view\">this SO answer and only changing the data instead of the adapter</a>(and this answer is using a <code>PagerAdapter</code> instead of <code>FragmentPagerAdapter</code> but without success.</p>\n\n<p>This is how I initialize the <code>ViewPager</code></p>\n\n<pre><code>viewPager = rootView.findViewById(R.id.view_pager)\nchangeData()\n</code></pre>\n\n<p>and then later for changing I call this function</p>\n\n<pre><code>fun changeData(params: List&lt;CustomObject&gt; = ArrayList()){\n    viewPager.adapter = CustomCPagerAdapter(fragmentManager!!, params)\n}\n</code></pre>\n\n<p>and the CustomPagerAdapter</p>\n\n<pre><code>class CustomPagerAdapter(fm: FragmentManager,\n                         private var customDataSet: List&lt;CustomObject&gt;) \n    : FragmentPagerAdapter(fm) {  \n\n    override fun getItem(pos: Int): Fragment {\n        return CustomFragment.newInstance(customDataSet[pos])\n    }\n\n    override fun getCount(): Int {\n        return customDataSet.size\n    }\n}\n</code></pre>\n\n<p>Why is the <code>ViewPager</code> keeping the displayed fragments even though a new <code>FragmentPagerAdapter</code> is added to it? How do I change this?</p>\n"}, {"tags": ["generics", "kotlin", "rx-java"], "answers": [{"comments": [{"owner": {"reputation": 5359, "user_id": 1204377, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/VDy3h.jpg?s=128&g=1", "display_name": "Anton Cherkashyn", "link": "https://stackoverflow.com/users/1204377/anton-cherkashyn"}, "edited": false, "score": 0, "creation_date": 1532983741, "post_id": 51600401, "comment_id": 90170220, "body": "Thanks, that explains it. Is there any way to instruct Kotlin compiler to always use boxed integers as method arguments, if java interop is not required?"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 7, "last_activity_date": 1532976694, "last_edit_date": 1532976694, "creation_date": 1532976394, "answer_id": 51600401, "question_id": 51600177, "link": "https://stackoverflow.com/questions/51600177/why-does-kotlin-spread-operator-requires-totypedarray-when-passing-a-primitive/51600401#51600401", "title": "Why does Kotlin spread operator requires toTypedArray() when passing a primitive vararg argument?", "body": "<p>When the <code>Int</code> type is used as a type argument (replaces <code>T</code> in your case), JVM primitives cannot be used, which is a JVM restriction (it has a single method signature with <code>java.lang.Object</code> in place of the type parameter, and so it cannot accept primitives).</p>\n\n<p>The <code>vararg</code> complicates the case, but, under the hood, a function accepting <code>vararg elements: T</code> is the same as if it accepted <code>Array&lt;T&gt;</code>.</p>\n\n<p>So you need to pass <code>Array&lt;Int&gt;</code> (array of boxed integers) rather than <code>IntArray</code> (array of primitives), and the <code>.toTypedArray()</code> function is the way to get the former.</p>\n"}], "owner": {"reputation": 5359, "user_id": 1204377, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/VDy3h.jpg?s=128&g=1", "display_name": "Anton Cherkashyn", "link": "https://stackoverflow.com/users/1204377/anton-cherkashyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2540, "favorite_count": 0, "accepted_answer_id": 51600401, "answer_count": 1, "score": 11, "last_activity_date": 1532976694, "creation_date": 1532975341, "question_id": 51600177, "link": "https://stackoverflow.com/questions/51600177/why-does-kotlin-spread-operator-requires-totypedarray-when-passing-a-primitive", "title": "Why does Kotlin spread operator requires toTypedArray() when passing a primitive vararg argument?", "body": "<p>I have an Android app written 100% in Kotlin.</p>\n\n<p>In my unit test class I have 2 test observers, one observing integers, another - objects:</p>\n\n<pre><code>val conversationCountObserver: TestObserver&lt;Int&gt;\nval conversationObserver: TestObserver&lt;Conversation&gt;\n</code></pre>\n\n<p>For each one I want to do some basic assertions, like check that there were no errors and check the values observed. I decide to write a generic method that can do a number of assertions on a list of elements in an RX TestObserver class, and 2 proxy methods to pass corresponding observer and vararg of values via Kotlin * spread operator:</p>\n\n<pre><code>private fun thenConversationsNotified(vararg conversations: Conversation) {\n    thenTestObserverNotified(conversationObserver, *conversations)\n}\n\nprivate fun thenConversationCountNotified(vararg counts: Int) {\n    thenTestObserverNotified(conversationCountObserver, *counts)\n}\n\nprivate fun &lt;T&gt;thenTestObserverNotified(observer: TestObserver&lt;T&gt;, vararg elements: T) {\n    observer.assertNoErrors()\n    elements.forEachIndexed { index, element -&gt;\n        observer.assertValueAt(index, element)\n    }\n}\n</code></pre>\n\n<p>thenConversationsNotified() method works just fine, however the thenConversationCountNotified() shows an error:</p>\n\n<p><a href=\"https://i.stack.imgur.com/dnTUf.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/dnTUf.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/Oaqq9.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Oaqq9.png\" alt=\"enter image description here\"></a></p>\n\n<p>After reading Kotlin docs (<a href=\"http://kotlinlang.org/docs/reference/java-interop.html#java-arrays\" rel=\"noreferrer\">http://kotlinlang.org/docs/reference/java-interop.html#java-arrays</a>) I realized that vararg of primitive types actually creates a IntArray object rather than an Array, and this was done as a solution for Java interop, that treats varargs of primitives differently than objects. So I have to rewrite thenConversationCountNotified with .toTypedArray():</p>\n\n<pre><code>private fun thenConversationCountNotified(vararg counts: Int) {\n    thenTestObserverNotified(conversationCountObserver, *counts.toTypedArray())\n}\n</code></pre>\n\n<p>Why doesn't the spread operator work on a primitive array class in the same way as on an array of objects? Is there any way to remove the call to .toTypedArray() here?</p>\n\n<p>P.S. Note that in the link above, they declare intArrayOf(1,2,3) that returns IntArray, and when passing it to the other method the spread operator works fine. So spread operator does work with IntArray class. The only difference between an example in Kotlin docs and my method is that I have 2 parameters in a method, one concrete and one vararg.</p>\n"}, {"tags": ["android", "ios", "datetime", "kotlin"], "comments": [{"owner": {"reputation": 66307, "user_id": 599346, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/be66588cfacdbed6f5b7581e4eec4c95?s=128&d=identicon&r=PG", "display_name": "tyczj", "link": "https://stackoverflow.com/users/599346/tyczj"}, "edited": false, "score": 0, "creation_date": 1532973722, "post_id": 51599793, "comment_id": 90165672, "body": "Are you in the UTC timezone? if not you need to set the timezone when you convert or else it will be off"}, {"owner": {"reputation": 769, "user_id": 9624615, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QNV0iaPXqrY/AAAAAAAAAAI/AAAAAAAAAJA/b-NQeneG_y4/photo.jpg?sz=128", "display_name": "Muhammad Hassaan", "link": "https://stackoverflow.com/users/9624615/muhammad-hassaan"}, "edited": false, "score": 0, "creation_date": 1532973981, "post_id": 51599793, "comment_id": 90165796, "body": "question is already answered .. check   <a href=\"https://stackoverflow.com/questions/11357945/java-convert-seconds-into-day-hour-minute-and-seconds-using-timeunit\" title=\"java convert seconds into day hour minute and seconds using timeunit\">stackoverflow.com/questions/11357945/&hellip;</a>"}, {"owner": {"reputation": 117, "user_id": 9813600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c05cfe64dd0d6e8718ad2b723967faa3?s=128&d=identicon&r=PG&f=1", "display_name": "Mumphus", "link": "https://stackoverflow.com/users/9813600/mumphus"}, "reply_to_user": {"reputation": 769, "user_id": 9624615, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QNV0iaPXqrY/AAAAAAAAAAI/AAAAAAAAAJA/b-NQeneG_y4/photo.jpg?sz=128", "display_name": "Muhammad Hassaan", "link": "https://stackoverflow.com/users/9624615/muhammad-hassaan"}, "edited": false, "score": 0, "creation_date": 1532974120, "post_id": 51599793, "comment_id": 90165872, "body": "@MuhammadHassaan as I stated in the question that is not converting time from Unix Epoch"}, {"owner": {"reputation": 117, "user_id": 9813600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c05cfe64dd0d6e8718ad2b723967faa3?s=128&d=identicon&r=PG&f=1", "display_name": "Mumphus", "link": "https://stackoverflow.com/users/9813600/mumphus"}, "reply_to_user": {"reputation": 66307, "user_id": 599346, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/be66588cfacdbed6f5b7581e4eec4c95?s=128&d=identicon&r=PG", "display_name": "tyczj", "link": "https://stackoverflow.com/users/599346/tyczj"}, "edited": false, "score": 0, "creation_date": 1532974159, "post_id": 51599793, "comment_id": 90165890, "body": "@tyczj How would I go about getting the current time zone and apply to the value?"}, {"owner": {"reputation": 66307, "user_id": 599346, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/be66588cfacdbed6f5b7581e4eec4c95?s=128&d=identicon&r=PG", "display_name": "tyczj", "link": "https://stackoverflow.com/users/599346/tyczj"}, "edited": false, "score": 0, "creation_date": 1532974629, "post_id": 51599793, "comment_id": 90166139, "body": "A simple google search can answer how to get the time zone, here is a basic example <a href=\"https://stackoverflow.com/questions/6088778/converting-utc-dates-to-other-timezones\" title=\"converting utc dates to other timezones\">stackoverflow.com/questions/6088778/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 10157008, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3dTV9V8xzKM/AAAAAAAAAAI/AAAAAAAAHIY/bHrxgT65mbY/photo.jpg?sz=128", "display_name": "Igor Pavinich", "link": "https://stackoverflow.com/users/10157008/igor-pavinich"}, "is_accepted": false, "score": 0, "last_activity_date": 1533003552, "last_edit_date": 1533003552, "creation_date": 1532976914, "answer_id": 51600514, "question_id": 51599793, "link": "https://stackoverflow.com/questions/51599793/converting-seconds-to-time-of-day/51600514#51600514", "title": "Converting seconds to time of day", "body": "<pre><code>val sdf = SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\", Locale.ENGLISH);\nval date = sdf.format(Date(alarm.getNextTrigger()));\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 9813600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c05cfe64dd0d6e8718ad2b723967faa3?s=128&d=identicon&r=PG&f=1", "display_name": "Mumphus", "link": "https://stackoverflow.com/users/9813600/mumphus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 610, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533003552, "creation_date": 1532973604, "last_edit_date": 1532974331, "question_id": 51599793, "link": "https://stackoverflow.com/questions/51599793/converting-seconds-to-time-of-day", "title": "Converting seconds to time of day", "body": "<p>I have an app on iOS and am working on porting over to android. I am having an issue with handling the time.</p>\n\n<p>On iOS I store points of time using:</p>\n\n<pre><code>Int(NSDate().timeIntervalSince1970-0.5)\n</code></pre>\n\n<p>and Convert it to HH:MM:SS using:</p>\n\n<pre><code>private let dateFormatter = DateFormatter()\ndateFormatter.dateFormat = \"HH:mm:ss\"\nreturn dateFormatter.string(from: Date(timeIntervalSince1970: value))\n</code></pre>\n\n<p>On Android(Kotlin) to store the point of time I use: <code>System.currentTimeMillis()/1000</code></p>\n\n<p>And for conversion:</p>\n\n<pre><code>LocalTime.MIN.plus(Duration.ofSeconds(xVal)).toString())\n</code></pre>\n\n<p>The issue is that the value after being converted is 6 hours ahead(could be more or less but I only look at the HH:MM:SS). As far as I can tell, the way that I get the time on android is correct and I think the issue lies in when I am converting it. I have looked around for more methods of converting time since an an interval to time of day but I could not get it to work. Most posts are just converting seconds to HH:MM:SS and so those are right out of the question. What would the equivalent to my iOS code be?</p>\n\n<p><strong>EDIT</strong>\nI've also tried using this method to convert it still is 6 hours off even though I am giving it a timezone:</p>\n\n<pre><code>    val cal = Calendar.getInstance()\n    cal.timeInMillis = xVal * 1000L\n    cal.timeZone = TimeZone.getTimeZone(TimeZone.getDefault().displayName)\n    Log.i(\"This is the cal value\",cal.get(Calendar.HOUR_OF_DAY).toString())\n</code></pre>\n"}, {"tags": ["spring", "spring-boot", "kotlin"], "comments": [{"owner": {"reputation": 93551, "user_id": 2696260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qHEzx.png?s=128&g=1", "display_name": "M. Deinum", "link": "https://stackoverflow.com/users/2696260/m-deinum"}, "edited": false, "score": 1, "creation_date": 1532976273, "post_id": 51599724, "comment_id": 90166917, "body": "Use <code>@RestController</code> instead of <code>@Controller</code>. Your current controller will try to locate a view named <code>hello</code>."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2290133"}, "edited": false, "score": 0, "creation_date": 1532982416, "post_id": 51599839, "comment_id": 90169750, "body": "You are right! Thank you very much. Now it works OK."}], "tags": [], "owner": {"reputation": 26172, "user_id": 49746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IAAg.jpg?s=128&g=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/49746/todd"}, "is_accepted": true, "score": 2, "last_activity_date": 1532973869, "creation_date": 1532973869, "answer_id": 51599839, "question_id": 51599724, "link": "https://stackoverflow.com/questions/51599724/controller-not-executed-in-my-spring-boot-application/51599839#51599839", "title": "Controller not executed in my Spring Boot application", "body": "<p>I think your problem is that you have a top level class with no body (<code>HelloController</code>) and a top level function (<code>hello</code>). You have to put curly braces to make sure <code>hello</code> is a member of <code>HelloController</code>.</p>\n\n<p>You have this:</p>\n\n<pre><code>@Controller\nclass HelloController\n\n@GetMapping(\"/hello\")\nfun hello(): String {\n    System.out.println(\"Hello from controller\")\n\n    return \"hello\"\n}\n</code></pre>\n\n<p>It needs to be like this, so <code>hello</code> belongs in <code>HelloController</code>, not at the same level:</p>\n\n<pre><code>@Controller\nclass HelloController {\n\n    @GetMapping(\"/hello\")\n    fun hello(): String {\n        System.out.println(\"Hello from controller\")\n\n        return \"hello\"\n    }\n}\n</code></pre>\n\n<p>Also, change <code>System.out.println</code> to just <code>println</code> to be more Kotlin-like.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2290133"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "accepted_answer_id": 51599839, "answer_count": 1, "score": 0, "last_activity_date": 1532973869, "creation_date": 1532973325, "question_id": 51599724, "link": "https://stackoverflow.com/questions/51599724/controller-not-executed-in-my-spring-boot-application", "title": "Controller not executed in my Spring Boot application", "body": "<p>I tried to create simple Hello World app in Spring Boot using kotlin but IntelliJ IDE shows me warning that my controller class is never used and the specified endpoint does not work as well. I can't figure out what to do with it.</p>\n\n<p>I created the app with the Boot Initializr and the structure looks like this:</p>\n\n<pre><code>kotlin/\n    com.myapp.school/\n        Application.kt\n        controller/\n            HelloController.kt\nresources/\n    static/\n    templates/\n        hello.html\n</code></pre>\n\n<p>And here is the code for Application.kt:</p>\n\n<pre><code>package com.myapp.school\n\nimport org.springframework.boot.autoconfigure.SpringBootApplication\nimport org.springframework.boot.runApplication\n\n@SpringBootApplication\nclass Application\n\nfun main(args: Array&lt;String&gt;) {\n    runApplication&lt;Application&gt;(*args)\n}\n</code></pre>\n\n<p>Last, I have this simple controller with one method:</p>\n\n<pre><code>package com.myapp.school.controller\n\nimport org.springframework.stereotype.Controller\nimport org.springframework.ui.Model\nimport org.springframework.web.bind.annotation.GetMapping\n\n@Controller\nclass HelloController\n\n@GetMapping(\"/hello\")\nfun hello(): String {\n    System.out.println(\"Hello from controller\")\n\n    return \"hello\"\n}\n</code></pre>\n\n<p>Going to localhost:8080/hello shows whitelabel error page with 404 status. I read that Spring prints registered endpoints into the console at startup but I haven't found such message.</p>\n\n<p>Can somebody tell me what is wrong?\nThank you</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8959091"}, "edited": false, "score": 0, "creation_date": 1532975818, "post_id": 51599717, "comment_id": 90166688, "body": "If the file downloads fine then you should post the code that executes after the download"}, {"owner": {"reputation": 137, "user_id": 10132533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28033c4acbecc0682db1a25eaee66e52?s=128&d=identicon&r=PG&f=1", "display_name": "Javad", "link": "https://stackoverflow.com/users/10132533/javad"}, "edited": false, "score": 0, "creation_date": 1532976009, "post_id": 51599717, "comment_id": 90166797, "body": "@mTak   Logcat is clearly saying that the problem is due to FileOutputStream.write. Anyway, I&#39;m just storing <code>file.absolutePath</code> in SQLite db."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user8959091"}, "is_accepted": true, "score": 4, "last_activity_date": 1532976573, "creation_date": 1532976573, "answer_id": 51600432, "question_id": 51599717, "link": "https://stackoverflow.com/questions/51599717/arrayindexoutofboundsexception-on-fileoutputstream-write/51600432#51600432", "title": "ArrayIndexOutOfBoundsException on FileOutputStream.write", "body": "<p>Change <code>if (bufferLength == 0)</code>  <br/>\nto <code>if (bufferLength == -1)</code>  <br/>\n-1 is returned when there is no more data </p>\n"}], "owner": {"reputation": 137, "user_id": 10132533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28033c4acbecc0682db1a25eaee66e52?s=128&d=identicon&r=PG&f=1", "display_name": "Javad", "link": "https://stackoverflow.com/users/10132533/javad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 618, "favorite_count": 1, "accepted_answer_id": 51600432, "answer_count": 1, "score": 6, "last_activity_date": 1532976573, "creation_date": 1532973305, "question_id": 51599717, "link": "https://stackoverflow.com/questions/51599717/arrayindexoutofboundsexception-on-fileoutputstream-write", "title": "ArrayIndexOutOfBoundsException on FileOutputStream.write", "body": "<p>I'm using the following codes to download an image from an URL and save it to sd card. Although the image is downloaded well, the app crashes out. Where is the problem?</p>\n\n<pre><code>val picUrl = URL(\"http://example.com/\")\nval urlConnection = picUrl.openConnection() as HttpURLConnection\nurlConnection.requestMethod = \"GET\"\nurlConnection.doOutput = true\nurlConnection.connect()\nval path = File(Environment.getExternalStorageDirectory().toString() + \"/myFolder\")\nif (!path.exists()){\n    path.mkdirs()\n}\nval file = File(path,((Calendar.getInstance().getTimeInMillis()).toString() + \".jpg\"))\nfile.createNewFile()\nval fileOutput = FileOutputStream(file)\nval inputStream = urlConnection.inputStream\nval totalSize = urlConnection.contentLength\nvar downloadedSize = 0\nval buffer = ByteArray(1024)\nvar bufferLength: Int\ndo {\n      bufferLength = inputStream.read(buffer)\n      if (bufferLength == 0)\n            break\n      fileOutput.write(buffer,0,bufferLength)\n      downloadedSize += bufferLength\n    }\n         while (true)\nfileOutput.close()\nif (totalSize == downloadedSize){\n   //the image has been downloaded \n   //do sth with downloaded image\n}\n</code></pre>\n\n<p><strong>The error in logcat:</strong></p>\n\n<pre><code>Caused by: java.lang.ArrayIndexOutOfBoundsException: length=1024; regionStart=0; regionLength=-1\n    at java.util.Arrays.checkOffsetAndCount(Arrays.java:1719)\n    at libcore.io.IoBridge.write(IoBridge.java:487)\n    at java.io.FileOutputStream.write(FileOutputStream.java:186)\n</code></pre>\n"}, {"tags": ["android", "performance", "build", "kotlin", "installation"], "owner": {"reputation": 163, "user_id": 6709795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5b49bde7b67ef46e18cb2cf8a8054af?s=128&d=identicon&r=PG&f=1", "display_name": "\u0414\u043c\u0438\u0442\u0440\u0438\u0439 \u0413\u0440\u0438\u0431\u043a\u043e\u0432", "link": "https://stackoverflow.com/users/6709795/%d0%94%d0%bc%d0%b8%d1%82%d1%80%d0%b8%d0%b9-%d0%93%d1%80%d0%b8%d0%b1%d0%ba%d0%be%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1532971658, "creation_date": 1532971658, "question_id": 51599344, "link": "https://stackoverflow.com/questions/51599344/slow-build-and-install-android-how-build-and-install-less-minute", "title": "Slow build and install android. How build and install less minute", "body": "<p>I have many of big projects on android with many of library on kotlin. First build tahe 4 minutes.  When i try just replace some variable, before i can see result process build and install take around <strong>1 minute.</strong> I want to see result faster. In ios process build and install take around 15 sec.</p>\n\n<p><strong>Instant run</strong> dont work properly! First build take 4-6 minutes. And when i just replace some variable, process build and install take more  <strong>1 minute.</strong>  I use many of library and frameworks such as Rx, Dagger, Realm, Android Architecture Components.</p>\n\n<p>I use <strong>articles</strong>, but that is <strong>not enought</strong></p>\n\n<p><a href=\"https://developer.android.com/studio/build/optimize-your-build\" rel=\"nofollow noreferrer\">https://developer.android.com/studio/build/optimize-your-build</a></p>\n\n<p><a href=\"https://hackernoon.com/how-to-speed-up-your-slow-gradle-builds-5d9a9545f91a\" rel=\"nofollow noreferrer\">https://hackernoon.com/how-to-speed-up-your-slow-gradle-builds-5d9a9545f91a</a></p>\n\n<p>I try any methods what i can found in internet. I want to see result very fast. Just waiting build and install is taking a lot of my working time. If i reduce this step i can be more productive! </p>\n\n<p>I want see result throw 15-20 sek like ios programm.\n<strong>What should i do? Is it normal build and install so slow on android?</strong> </p>\n\n<p><strong>My gradle.properties</strong></p>\n\n<pre><code>org.gradle.daemon=true\norg.gradle.parallel=true\norg.gradle.configureondemand=true\norg.gradle.jvmargs=-Xmx3g -XX:MaxPermSize=2048m -XX:+HeapDumpOnOutOfMemoryError -Dfile.encoding=UTF-8\norg.gradle.caching=true\nandroid.enableBuildCache=true \nandroid.enableD8=true\n</code></pre>\n\n<p><strong>My build.gradle</strong>\n<a href=\"https://github.com/Kadanza/Ling2/blob/master/app/build.gradle\" rel=\"nofollow noreferrer\">https://github.com/Kadanza/Ling2/blob/master/app/build.gradle</a></p>\n\n<p><strong>My PC.</strong> \nInterl i5 3.2 GHz\n16 RAM \nSSD </p>\n"}, {"tags": ["kotlin", "android-room"], "answers": [{"comments": [{"owner": {"reputation": 3768, "user_id": 301584, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/QjxhK.jpg?s=128&g=1", "display_name": "imin", "link": "https://stackoverflow.com/users/301584/imin"}, "edited": false, "score": 0, "creation_date": 1533005438, "post_id": 51600220, "comment_id": 90175201, "body": "Wow, thank you very much for the explanation regarding the Observer class and the solution. This drove me crazy yesterday."}], "tags": [], "owner": {"reputation": 716, "user_id": 7656172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EGszH.jpg?s=128&g=1", "display_name": "Micha\u0142 Baran", "link": "https://stackoverflow.com/users/7656172/micha%c5%82-baran"}, "is_accepted": true, "score": 2, "last_activity_date": 1532975554, "creation_date": 1532975554, "answer_id": 51600220, "question_id": 51598985, "link": "https://stackoverflow.com/questions/51598985/livedata-always-returns-livedataobject/51600220#51600220", "title": "LiveData always returns LiveData&lt;Object&gt;?", "body": "<p>This has actually nothing to do with <code>Room</code>, but with how <code>LiveData</code> was designed - specifically <code>Observer</code> class:</p>\n\n<pre><code>public interface Observer&lt;T&gt; {\n\n    void onChanged(@Nullable T t);\n}\n</code></pre>\n\n<p>as you can see T (in your case <code>List&lt;Homework&gt;</code>) is marked as <code>@Nullable</code> therefore you will always get it's Kotlin equivalent <code>List&lt;Homework&gt;?</code> as a parameter of <code>onChanged</code> in your <code>Observer</code> implementation.</p>\n\n<p>I would recommend changing <code>setHomeworkList</code> to something like this:</p>\n\n<pre><code>fun setHomeworkList(myHomeworkList: List&lt;Homework&gt;?){\n    if(myHomeworkList != null){\n        homeworkList = myHomeworkList\n        notifyDataSetChanged()\n    }\n}\n</code></pre>\n\n<p>You can also use <code>let</code> function for that like this:</p>\n\n<pre><code>fun setHomeworkList(myHomeworkList: List&lt;Homework&gt;?){\n    myHomeworkList?.let {\n        homeworkList = it\n        notifyDataSetChanged() \n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 3768, "user_id": 301584, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/QjxhK.jpg?s=128&g=1", "display_name": "imin", "link": "https://stackoverflow.com/users/301584/imin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 623, "favorite_count": 0, "accepted_answer_id": 51600220, "answer_count": 1, "score": 2, "last_activity_date": 1532975554, "creation_date": 1532970120, "question_id": 51598985, "link": "https://stackoverflow.com/questions/51598985/livedata-always-returns-livedataobject", "title": "LiveData always returns LiveData&lt;Object&gt;?", "body": "<p>I'm trying to put a recyclerview which get its data from room. My function <code>getAllHomework</code> returns <code>LiveData&lt;List&lt;Homework&gt;&gt;</code>, but when I tried to set the return value to the recyclerview adapter, it will always return this error</p>\n\n<pre><code>Type Mismatch.\nRequired: List&lt;Homework&gt;\nFound: List&lt;Homework&gt;?\n</code></pre>\n\n<p>Here's my HomeworkViewModel class which has the function <code>getAllHomework</code> looks like:</p>\n\n<pre><code>class HomeworkViewModel : ViewModel() {\n\n    private var matrixNumber: String? = null\n    private var schoolID: Int = 0\n\n    lateinit var listAllHomework: LiveData&lt;List&lt;Homework&gt;&gt;\n    lateinit var homeworkRepository: HomeworkRepository\n\n    fun init(params: Map&lt;String, String&gt;) {\n\n        schoolID = Integer.parseInt(params[\"schoolID\"])\n\n        homeworkRepository = HomeworkRepository()\n        listAllHomework = homeworkRepository.getAllHomework(1, \"2018\")\n\n    }\n\n    fun getAllHomework(): LiveData&lt;List&lt;Homework&gt;&gt;{\n        return listAllHomework\n    }\n}\n</code></pre>\n\n<p>And below is the part in my Homework activity that tries to set the value into recyclerview adapter but will always return the type mismatch error.</p>\n\n<pre><code>class Homework : AppCompatActivity(), LifecycleOwner {\n\n    lateinit var linearLayoutManager: LinearLayoutManager\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.homework)\n\n        linearLayoutManager = LinearLayoutManager(this)\n        rvHomeworks.layoutManager = linearLayoutManager\n\n        var adapter = AdapterHomework(this)\n\n        rvHomeworks.adapter = adapter\n\n        var homeworkViewModel = ViewModelProviders.of(this).get(HomeworkViewModel::class.java)\n        homeworkViewModel.init(params)\n        homeworkViewModel.getAllHomework().observe(this, Observer {\n            allHomework -&gt; adapter.setHomeworkList(allHomework)\n        })\n    }\n}\n</code></pre>\n\n<p>The line <code>allHomework -&gt; adapter.setHomeworkList(allHomework)</code> above will show the <code>Type Mismatch</code> error I mentioned above.</p>\n\n<p>Here's how my <code>AdapterHomework</code> looks like:</p>\n\n<pre><code>class AdapterHomework(context: Context): RecyclerView.Adapter&lt;AdapterHomework.ViewHolder&gt;() {\n\nlateinit var homeworkList: List&lt;Homework&gt;\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder{\n        val v = LayoutInflater.from(parent.context).inflate(R.layout.rv_homeworks, parent, false)\n        return ViewHolder(v);\n    }\n\n    @JvmName(\"functionToSetTheHomeworkList\")\n    fun setHomeworkList(myHomeworkList: List&lt;Homework&gt;){\n        homeworkList = myHomeworkList\n        notifyDataSetChanged()\n    }\n}\n</code></pre>\n\n<p>I could not find where in my code did I ever return <code>List&lt;Homework&gt;?</code> instead of <code>List&lt;Homework&gt;</code>.</p>\n"}, {"tags": ["spring-boot", "spring-security", "kotlin", "spring-webflux"], "answers": [{"tags": [], "owner": {"reputation": 21112, "user_id": 296427, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8692a55fc3524ed4e7cb85b0b3b4693c?s=128&d=identicon&r=PG", "display_name": "pixel", "link": "https://stackoverflow.com/users/296427/pixel"}, "is_accepted": true, "score": 2, "last_activity_date": 1540298498, "creation_date": 1540298498, "answer_id": 52949379, "question_id": 51598282, "link": "https://stackoverflow.com/questions/51598282/custom-authentication-with-spring-security-and-reactive-spring/52949379#52949379", "title": "Custom authentication with spring-security and reactive spring", "body": "<p>It turns out that some tutorials on the web are plain wrong.</p>\n\n<p>I've managed to configure everything using following code:</p>\n\n<pre><code>class DeviceAuthenticationConverter : Function&lt;ServerWebExchange, Mono&lt;Authentication&gt;&gt; {\n  override fun apply(exchange: ServerWebExchange): Mono&lt;Authentication&gt; {\n    val authHeader: String? = exchange.request.headers.getFirst(HttpHeaders.AUTHORIZATION)\n    val path: String? = exchange.request.uri.path\n\n    return when {\n      isValidPath(path) &amp;&amp; isValidHeader(authHeader) -&gt; Mono.just(UsernamePasswordAuthenticationToken(path?.drop(17), authHeader?.drop(7)))\n      else -&gt; Mono.empty()\n    }\n  }\n\n  private fun isValidPath(path: String?) = path != null &amp;&amp; path.startsWith(API_MEASUREMENT)\n\n  private fun isValidHeader(authHeader: String?) = authHeader != null &amp;&amp; authHeader.startsWith(prefix = \"Bearer \")\n\n}\n</code></pre>\n\n<p>And config:</p>\n\n<pre><code>@EnableWebFluxSecurity\nclass SecurityConfig {\n\n  companion object {\n    const val API_MEASUREMENT = \"/api/measurement/\"\n    const val API_MEASUREMENT_PATH = \"$API_MEASUREMENT**\"\n    const val DEVICE = \"DEVICE\"\n    const val DEVICE_ID = \"deviceId\"\n  }\n\n  @Bean\n  fun securityWebFilterChain(http: ServerHttpSecurity, authenticationManager: ReactiveAuthenticationManager) =\n      http\n          .httpBasic().disable()\n          .formLogin().disable()\n          .csrf().disable()\n          .logout().disable()\n          .authorizeExchange().pathMatchers(API_MEASUREMENT_PATH).hasRole(DEVICE)\n          .anyExchange().permitAll().and().addFilterAt(authenticationWebFilter(authenticationManager), AUTHENTICATION).build()\n\n  @Bean\n  fun userDetailsService(tokenRepository: TokenRepository) = MongoDeviceTokenReactiveUserDetailsService(tokenRepository)\n\n  @Bean\n  fun tokenRepository(template: ReactiveMongoTemplate, passwordEncoder: PasswordEncoder) = MongoTokenRepository(template, passwordEncoder)\n\n  @Bean\n  fun tokenFacade(tokenRepository: TokenRepository) = TokenFacade(tokenRepository)\n\n  @Bean\n  fun authManager(userDetailsService: ReactiveUserDetailsService) = UserDetailsRepositoryReactiveAuthenticationManager(userDetailsService)\n\n  private fun authenticationWebFilter(reactiveAuthenticationManager: ReactiveAuthenticationManager) =\n      AuthenticationWebFilter(reactiveAuthenticationManager).apply {\n        setAuthenticationConverter(DeviceAuthenticationConverter())\n        setRequiresAuthenticationMatcher(\n            ServerWebExchangeMatchers.pathMatchers(HttpMethod.POST, API_MEASUREMENT_PATH)\n        )\n      }\n\n  @Bean\n  fun passwordEncoder() = PasswordEncoderFactories.createDelegatingPasswordEncoder()\n}\n</code></pre>\n"}], "owner": {"reputation": 21112, "user_id": 296427, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8692a55fc3524ed4e7cb85b0b3b4693c?s=128&d=identicon&r=PG", "display_name": "pixel", "link": "https://stackoverflow.com/users/296427/pixel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1771, "favorite_count": 1, "accepted_answer_id": 52949379, "answer_count": 1, "score": 4, "last_activity_date": 1540298498, "creation_date": 1532967489, "question_id": 51598282, "link": "https://stackoverflow.com/questions/51598282/custom-authentication-with-spring-security-and-reactive-spring", "title": "Custom authentication with spring-security and reactive spring", "body": "<p>I'm having a custom authentication scheme. I'm having a REST endpoint that has <code>userId</code> in http uri path and <code>token</code> in http header. I would like to check that such request is perform by valid user with valid token. Users and tokens are stored in mongo collection.</p>\n\n<p>I don't know in which class I should authorize user. </p>\n\n<p>My <code>SecurityConfig</code>:</p>\n\n<pre><code>@EnableWebFluxSecurity\nclass SecurityConfig {\n\n  @Bean\n  fun securityWebFilterChain(http: ServerHttpSecurity): SecurityWebFilterChain {\n\n    val build = http\n        .httpBasic().disable()\n        .formLogin().disable()\n        .csrf().disable()\n        .logout().disable()\n        .authenticationManager(CustomReactiveAuthenticationManager())\n        .securityContextRepository(CustomServerSecurityContextRepository())\n        .authorizeExchange().pathMatchers(\"/api/measurement/**\").hasAuthority(\"ROLE_USER\")\n        .anyExchange().permitAll().and()\n\n    return build.build()\n  }\n\n  @Bean\n  fun userDetailsService(): MapReactiveUserDetailsService {\n    val user = User.withDefaultPasswordEncoder()\n        .username(\"sampleDeviceIdV1\")\n        .password(\"foo\")\n        .roles(\"USER\")\n        .build()\n\n    return MapReactiveUserDetailsService(user)\n  }\n}\n</code></pre>\n\n<p>My <code>ServerSecurityContextRepository</code>:</p>\n\n<pre><code>class CustomServerSecurityContextRepository : ServerSecurityContextRepository {\n\n  override fun load(exchange: ServerWebExchange): Mono&lt;SecurityContext&gt; {\n    val authHeader = exchange.request.headers.getFirst(HttpHeaders.AUTHORIZATION)\n    val path = exchange.request.uri.path\n\n\n    return if (path.startsWith(\"/api/measurement/\") &amp;&amp; authHeader != null &amp;&amp; authHeader.startsWith(prefix = \"Bearer \")) {\n      val deviceId = path.drop(17)\n\n      val authToken = authHeader.drop(7)\n      val auth = UsernamePasswordAuthenticationToken(deviceId, authToken)\n      Mono.just(SecurityContextImpl(auth))\n    } else {\n      Mono.empty()\n    }\n  }\n\n  override fun save(exchange: ServerWebExchange?, context: SecurityContext?): Mono&lt;Void&gt; {\n    return Mono.empty()\n  }\n}\n</code></pre>\n\n<p>Two questions arise:</p>\n\n<ol>\n<li><p>Is <code>ServerSecurityContextRepository</code> good place to obtain username and token from exchange - or there is a better place to do it?</p></li>\n<li><p>Where should I perform authentication (check token and username against mongo collection)? \nMy custom <code>AuthenticationManager</code> does not get called anywhere. Should I do everything inside <code>ServerSecurityContextRepository</code> or perform user and token validation inside <code>ReactiveAuthenticationManager</code>? Or maybe other class would be even more suitable?</p></li>\n</ol>\n"}, {"tags": ["android", "firebase", "kotlin"], "comments": [{"owner": {"reputation": 34565, "user_id": 4815718, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CppAt.jpg?s=128&g=1", "display_name": "Bob Snyder", "link": "https://stackoverflow.com/users/4815718/bob-snyder"}, "edited": false, "score": 0, "creation_date": 1532964376, "post_id": 51597229, "comment_id": 90160651, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/q/45744408/4815718\">stackoverflow.com/q/45744408/4815718</a>"}], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 10155205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58f697483c1be88bc3349a97e6c638c5?s=128&d=identicon&r=PG&f=1", "display_name": "Jane Ashley", "link": "https://stackoverflow.com/users/10155205/jane-ashley"}, "edited": false, "score": 0, "creation_date": 1532964790, "post_id": 51597396, "comment_id": 90160893, "body": "Oh, thanks again Alex! Can it be done also in some way automatically?"}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "reply_to_user": {"reputation": 125, "user_id": 10155205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58f697483c1be88bc3349a97e6c638c5?s=128&d=identicon&r=PG&f=1", "display_name": "Jane Ashley", "link": "https://stackoverflow.com/users/10155205/jane-ashley"}, "edited": false, "score": 0, "creation_date": 1532965117, "post_id": 51597396, "comment_id": 90161102, "body": "Yes it can. As Bob Snyder mentioned in his comment, please see Jen Person&#39;s answer from that <a href=\"https://stackoverflow.com/questions/45744408/cloud-functions-for-firebase-can-you-detect-app-uninstall\">post</a>. It is also my recommendation."}, {"owner": {"reputation": 125, "user_id": 10155205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58f697483c1be88bc3349a97e6c638c5?s=128&d=identicon&r=PG&f=1", "display_name": "Jane Ashley", "link": "https://stackoverflow.com/users/10155205/jane-ashley"}, "edited": false, "score": 0, "creation_date": 1532965552, "post_id": 51597396, "comment_id": 90161354, "body": "Oh I see. Thank you for your explanation."}], "tags": [], "owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "is_accepted": true, "score": 2, "last_activity_date": 1532965137, "last_edit_date": 1592644375, "creation_date": 1532964458, "answer_id": 51597396, "question_id": 51597229, "link": "https://stackoverflow.com/questions/51597229/how-to-detect-programmatically-with-firebase-when-an-app-is-uninstalled-from-and/51597396#51597396", "title": "How to detect programmatically with Firebase when an app is uninstalled from Android device?", "body": "<p>Sure it is! You can detect when an app is uninstalled on an Android device using an automatically collected Analytics event called <code>app_remove</code>.</p>\n<p>See <a href=\"https://support.google.com/firebase/answer/6317485?hl=en\" rel=\"nofollow noreferrer\">here</a> more details.</p>\n<blockquote>\n<p>when an application package is removed or &quot;uninstalled&quot; from an Android device.</p>\n<p>This event is different from the Daily uninstalls by device and Daily uninstalls by user metrics, which are both reported by Google Play Developer Console. The app_remove event counts the removal of application packages, regardless of the installation source, and the count changes depending on the date range you are using for the report. The Daily uninstalls by device and Daily uninstalls by user metrics count the removal of application packages only when they were installed from Google Play, and are reported on a daily basis.</p>\n</blockquote>\n"}], "owner": {"reputation": 125, "user_id": 10155205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58f697483c1be88bc3349a97e6c638c5?s=128&d=identicon&r=PG&f=1", "display_name": "Jane Ashley", "link": "https://stackoverflow.com/users/10155205/jane-ashley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 384, "favorite_count": 0, "accepted_answer_id": 51597396, "answer_count": 1, "score": 2, "last_activity_date": 1532965137, "creation_date": 1532963876, "last_edit_date": 1532964548, "question_id": 51597229, "link": "https://stackoverflow.com/questions/51597229/how-to-detect-programmatically-with-firebase-when-an-app-is-uninstalled-from-and", "title": "How to detect programmatically with Firebase when an app is uninstalled from Android device?", "body": "<p>Is there any way I can detect programmatically with Firebase when an app is uninstalled from an Android device? I need this because when a user uninstalls the app, I want to take some actions (reset some fields, turns some booleans to false and so on). I read <a href=\"https://stackoverflow.com/questions/8686673/how-to-know-my-app-is-uninstalled-from-the-device\">this</a> but is there any more elegant solution? Or can it be done automatically? Thanks!</p>\n"}, {"tags": ["java", "android", "kotlin", "android-room"], "answers": [{"tags": [], "owner": {"reputation": 4522, "user_id": 101337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fae6fc1741623270471a080b705b1fa0?s=128&d=identicon&r=PG", "display_name": "Alexander Egger", "link": "https://stackoverflow.com/users/101337/alexander-egger"}, "is_accepted": false, "score": 1, "last_activity_date": 1533016778, "creation_date": 1533016778, "answer_id": 51606323, "question_id": 51596581, "link": "https://stackoverflow.com/questions/51596581/how-do-i-persist-custom-object-within-an-object-in-room/51606323#51606323", "title": "How do i persist Custom Object within an object in Room", "body": "<p>Use can either use a foreign key or a nested object. </p>\n\n<p>Using a foreign key in your example could look like this:</p>\n\n<pre><code>@Entity(foreignKeys = @ForeignKey(entity = Group.class,\n                              parentColumns = \"id\",\n                              childColumns = \"group_id\"))\ndata class Asset(\n\n    // ...\n\n    @ColumnInfo(name = \"group_id\")\n    var groupId: Int? = null\n)\n</code></pre>\n\n<p>In this case your application is responsible for fetching the <code>Group</code> based on the <code>groupId</code> as Room does not allow object references.</p>\n\n<p>Embedding the object could look like this:</p>\n\n<pre><code>data class Asset(\n\n    // ...\n\n    @SerializedName(\"group\")\n    @Expose\n    @Embedded\n    var group: Group? = null\n)\n</code></pre>\n\n<p>Note that in this case the fields of <code>Group</code> are embedded into the table of <code>Asset</code>.</p>\n\n<p>Which of the two options to choose depends on the use case. Nevertheless both are preferable over using <code>TypeConverters</code>. </p>\n"}], "owner": {"reputation": 1239, "user_id": 2157548, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e6c6a5bdbb55ae1a8ca7955c1b7b9778?s=128&d=identicon&r=PG", "display_name": "Paul Okeke", "link": "https://stackoverflow.com/users/2157548/paul-okeke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1533016778, "creation_date": 1532961824, "question_id": 51596581, "link": "https://stackoverflow.com/questions/51596581/how-do-i-persist-custom-object-within-an-object-in-room", "title": "How do i persist Custom Object within an object in Room", "body": "<p>I have this Entity</p>\n\n<pre><code>data class Asset(\n        @SerializedName(\"id\")\n        @Expose\n        @PrimaryKey\n        var id: String = \"\",\n\n        @SerializedName(\"asset_name\")\n        @ColumnInfo(name=\"asset_name\")\n        @Expose\n        var name: String = \"\",\n\n        @SerializedName(\"asset_type_name\")\n        @ColumnInfo(name=\"asset_type_name\")\n        @Expose\n        var typeName: String = \"\",\n\n        @SerializedName(\"status\")\n        @Expose\n        var status: Int = 0,\n\n        @SerializedName(\"group\")\n        @Expose\n        var group: Group? = null\n    )\n</code></pre>\n\n<p>\"Group\" is also an Entity, so while persisting Asset is it possible to also Persist \"Group\" to its own Table if it doesn't already exist? </p>\n\n<p>or shouldni simply just use TypeConverters and move on.</p>\n"}, {"tags": ["unit-testing", "kotlin", "mockito"], "comments": [{"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1532961507, "post_id": 51595206, "comment_id": 90158835, "body": "didn&#39;t test it yet, but I never used <code>ArgumentMatcher</code> on the <code>thenReturn</code> side. Does this even work? The rest looks ok to me... By the way <a href=\"http://mockk.io/\" rel=\"nofollow noreferrer\">mockk</a> might be something for you (which I did not yet tested that much as I omit mocks whenever possible), but at least you spare some back-ticks, open classes and open methods that way ;-)"}, {"owner": {"reputation": 50744, "user_id": 835883, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/n7jEz.png?s=128&g=1", "display_name": "j2emanue", "link": "https://stackoverflow.com/users/835883/j2emanue"}, "reply_to_user": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1532966506, "post_id": 51595206, "comment_id": 90161927, "body": "Instead of argument matcher what would you use"}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1532967424, "post_id": 51595206, "comment_id": 90162406, "body": "Usually I put actual values there which should be returned by the mock."}, {"owner": {"reputation": 50744, "user_id": 835883, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/n7jEz.png?s=128&g=1", "display_name": "j2emanue", "link": "https://stackoverflow.com/users/835883/j2emanue"}, "reply_to_user": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1532969517, "post_id": 51595206, "comment_id": 90163505, "body": "using real values did not resolve the issue. same failures."}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1532970714, "post_id": 51595206, "comment_id": 90164132, "body": "Did you annotate your test class with <code>@RunWith(MockitoJUnitRunner.class)</code> or otherwise told your testing framework that you want to use Mockito?"}, {"owner": {"reputation": 50744, "user_id": 835883, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/n7jEz.png?s=128&g=1", "display_name": "j2emanue", "link": "https://stackoverflow.com/users/835883/j2emanue"}, "reply_to_user": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1532972490, "post_id": 51595206, "comment_id": 90165017, "body": "thanks i put that in now although i think its not needed if i use MockitoAnnotations.initMocks(this) but i could be wrong.  in any event, that did not  help to resolve the issue.  do you think i should be mocking the retrofit object i pass into the repository ? i was thinking i should not have to. the failure is telling me that this retrofit object is null. java.lang.NullPointerException \tat me.org.weatherapp.data.repositories.WeatherDataRepository.fe&zwnj;&#8203;tchCurrentWeatherWit&zwnj;&#8203;h7dayForcast(Weather&zwnj;&#8203;DataRepository.kt:17&zwnj;&#8203;) .   which is exactly the retrofit call line."}, {"owner": {"reputation": 50744, "user_id": 835883, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/n7jEz.png?s=128&g=1", "display_name": "j2emanue", "link": "https://stackoverflow.com/users/835883/j2emanue"}, "reply_to_user": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1533043253, "post_id": 51595206, "comment_id": 90194046, "body": "ive posted the entire trace."}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "reply_to_user": {"reputation": 50744, "user_id": 835883, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/n7jEz.png?s=128&g=1", "display_name": "j2emanue", "link": "https://stackoverflow.com/users/835883/j2emanue"}, "edited": false, "score": 0, "creation_date": 1533044273, "post_id": 51595206, "comment_id": 90194741, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/177101/discussion-between-roland-and-j2emanue\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 50744, "user_id": 835883, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/n7jEz.png?s=128&g=1", "display_name": "j2emanue", "link": "https://stackoverflow.com/users/835883/j2emanue"}, "is_accepted": true, "score": 0, "last_activity_date": 1536080012, "creation_date": 1536080012, "answer_id": 52170893, "question_id": 51595206, "link": "https://stackoverflow.com/questions/51595206/how-to-use-mockito-when-in-kotin-to-mock-method-call-and-return-mock-value/52170893#52170893", "title": "how to use Mockito when in kotin to mock method call and return mock value?", "body": "<p>I finally saw my issue. i was making it too complicated.  First the presenter should subscribe to the observable so my baseUseCase should look like this instead:</p>\n\n<pre><code>public abstract class BaseUseCase {\n\nprotected abstract Observable buildUseCaseObservable();\n\n@SuppressWarnings(\"unchecked\")\npublic Observable retrieveUseCaseObservable(){\n            return  this.buildUseCaseObservable()\n            .subscribeOn(Schedulers.io())\n            .observeOn(AndroidSchedulers.mainThread());\n}\n</code></pre>\n\n<p>}</p>\n\n<p>then the actual test case simply mocks the usecase and view and tests the presenter and it all seems work now:</p>\n\n<pre><code>    import org.junit.Before\nimport org.junit.Test\nimport org.junit.runner.RunWith\nimport org.mockito.ArgumentMatchers.any\nimport org.mockito.BDDMockito\nimport org.mockito.BDDMockito.given\nimport org.mockito.Mock\nimport org.mockito.MockitoAnnotations\nimport org.mockito.runners.MockitoJUnitRunner\n\n\n@RunWith(MockitoJUnitRunner::class)\nclass WeatherDetailsPresenterTest {\n\n    @Mock\n    lateinit var usecase: GetCurrentWithForcastedWeatherUsecase\n\n    @Mock\n    lateinit var view: WeatherDetailsView\n\n    lateinit var presenter: WeatherDetailsPresenter\n\n    @Before\n    fun setUp() {\n        MockitoAnnotations.initMocks(this)\n        RxAndroidPlugins.setInitMainThreadSchedulerHandler { Schedulers.trampoline() }\n        presenter = WeatherDetailsPresenter(usecase)\n        presenter.attachView(view)\n\n    }\n\n    @Test\n    fun testCurrentWeatherScreenAppears() {\n\n        //arrange\n        given(usecase.retrieveUseCaseObservable()).willReturn(Observable.just(Pair(CurrentWeatherModel(), ForecastedWeatherModel())))\n\n        //act\n        presenter.presentCurrentAndForcastedWeather(\"canada\")\n\n        //assert\n        BDDMockito.verify(view, BDDMockito.times(1)).showCurrentWeather(any(CurrentWeatherModel::class.java)?:CurrentWeatherModel())\n    }\n}\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/a/35776132/835883\">the elvis operation is to satisfy kotlin</a></p>\n\n<p>when we make the presenter call note that now i am subscribing from within the presenter:</p>\n\n<pre><code>fun presentCurrentAndForcastedWeather(country: String?) {\n    getCurrentWeatherWithForecastUsecase.takeUnless { country?.isBlank() == true }?.apply {\n        this.countyName = country\n        retrieveUseCaseObservable().subscribe(object : DefaultSubscriber&lt;Pair&lt;CurrentWeatherModel, ForecastedWeatherModel&gt;&gt;() {\n            override fun onSubscribe(d: Disposable) {\n                super.onSubscribe(d)\n                showLoading(true)\n            }\n\n            override fun onNext(t: Pair&lt;CurrentWeatherModel, ForecastedWeatherModel&gt;) {\n                super.onNext(t)\n                view?.showCurrentWeather(t.first)\n                view?.showForcastWeather(t.second)\n            }\n\n            override fun onError(e: Throwable) {\n                super.onError(e)\n                showError { this@WeatherDetailsPresenter.presentCurrentAndForcastedWeather(country) }\n            }\n\n            override fun onComplete() {\n                super.onComplete()\n                showLoading(false)\n            }\n        })\n    } ?: run { view?.showCountryUnavailable() }\n}\n</code></pre>\n\n<p>i also added         RxAndroidPlugins.setInitMainThreadSchedulerHandler { Schedulers.trampoline() }\n to tell the rxJava system to run on the current thread, since everythings mocked anyway. </p>\n"}], "owner": {"reputation": 50744, "user_id": 835883, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/n7jEz.png?s=128&g=1", "display_name": "j2emanue", "link": "https://stackoverflow.com/users/835883/j2emanue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1908, "favorite_count": 0, "accepted_answer_id": 52170893, "answer_count": 1, "score": 1, "last_activity_date": 1536080012, "creation_date": 1532957672, "last_edit_date": 1533043236, "question_id": 51595206, "link": "https://stackoverflow.com/questions/51595206/how-to-use-mockito-when-in-kotin-to-mock-method-call-and-return-mock-value", "title": "how to use Mockito when in kotin to mock method call and return mock value?", "body": "<p>Can someone help me figure out why my kotlin variable that i mocked and named \"repo\" is still executing a method im telling mockito to mock ? let me show you what i mean:</p>\n\n<p>i have a simple usecase class that looks like this:</p>\n\n<pre><code>class WeatherDetailsPresenter @Inject constructor(var getCurrentWeatherWithForecastUsecase: GetCurrentWithForcastedWeatherUsecase) : BaseMvpPresenter&lt;WeatherDetailsView&gt;() {\n\nfun presentCurrentAndForcastedWeather(country: String?) {\n    with{getCurrentWeatherWithForecastUsecase) {\n        this.countyName = country\n        execute(object : DefaultSubscriber&lt;Pair&lt;CurrentWeatherModel, ForecastedWeatherModel&gt;&gt;() {\n            override fun onSubscribe(d: Disposable) {\n                super.onSubscribe(d)\n                showLoading(true)\n            }\n\n            override fun onNext(t: Pair&lt;CurrentWeatherModel, ForecastedWeatherModel&gt;) {\n                super.onNext(t)\n                view?.showCurrentWeather(t.first)\n            }\n\n            override fun onComplete() {\n                super.onComplete()\n                showLoading(false)\n            }\n        })\n    } \n}\n</code></pre>\n\n<p>}</p>\n\n<p>all it does is you pass it a country name and it gets the average weather for that country and also 7 day forecast. no big deal.  it puts it all together in a pair and updates the view (MVP). it fetches the data from another class called a WeatherDataRepository who's implementation is not import as long as it returns data we dont care.  </p>\n\n<p>let me show you what the getCurrentWeatherWithForecastUsecase class actgually looks like:</p>\n\n<pre><code>class GetCurrentWithForcastedWeatherUsecase @Inject constructor(var weatherRepo: WeatherDataRepository) : BaseUseCase() {\n\nvar countyName: String? = null\n\noverride fun buildUseCaseObservable(): Observable&lt;Pair&lt;CurrentWeatherModel, ForecastedWeatherModel&gt;&gt; {\n   return weatherRepo.fetchCurrentWeatherWith7dayForcast(countyName.toString())\n}\n</code></pre>\n\n<p>}</p>\n\n<p>//see its easy it just takes a weatherRepository and asked it to fetch the results.  i send that back to the caller who will display it. </p>\n\n<p>now that you know what this simple method does let me show you what i am trying to test. I wish to simply test that the currentweather was shown. so really in the end i want to test that <code>view?.showCurrentWeather(t.first)</code> was called. </p>\n\n<p>Here is my junit test case:</p>\n\n<pre><code>class WeatherDetailsPresenterTest {\n\nlateinit var usecase: GetCurrentWithForcastedWeatherUsecase\n\n@Mock\n lateinit var repo: WeatherDataRepository\n\n@Mock\nlateinit var view: WeatherDetailsView\n\nlateinit var presenter: WeatherDetailsPresenter\n\n\n\n@Before\nfun setUp() {\n    MockitoAnnotations.initMocks(this)\n    usecase = GetCurrentWithForcastedWeatherUsecase(repo)\n    presenter = WeatherDetailsPresenter(usecase)\n\n}\n\n@Test\nfun testCurrentWeatherScreenAppears() {\n\n    //arrange\n\n//WHY IS THIS MOCK NOT WORKING ??        \nMockito.`when`(repo.fetchCurrentWeatherWith7dayForcast(anyString())).thenReturn(Observable.just(Pair&lt;CurrentWeatherModel, ForecastedWeatherModel&gt;(ArgumentMatchers.any(CurrentWeatherModel::class.java),ArgumentMatchers.any(ForecastedWeatherModel::class.java))))\n\n    //act\n    val testSubscriber = TestObserver&lt;Pair&lt;CurrentWeatherModel, ForecastedWeatherModel&gt;&gt;()\n    usecase.execute(testSubscriber)\n\n\n    //assert\n    testSubscriber.assertNoErrors()\n    testSubscriber.assertSubscribed()\n    testSubscriber.assertValue(Pair(ArgumentMatchers.any(), ArgumentMatchers.any()))\n    testSubscriber.assertComplete()\n\n    Mockito.verify(view,times(1)).showCurrentWeather(any())\n}\n</code></pre>\n\n<p>}</p>\n\n<p>The unit tests compiles and runs. the issue is the repository call is actually calling fetchCurrentWeatherWith7dayForcast instead of just returning the mock response.</p>\n\n<p>here is the error when i run the test cases (failure error):</p>\n\n<pre><code>java.lang.NullPointerException\nat me.org.myweatherapp.data.repositories.WeatherDataRepository.fetchCurrentWeatherWith7dayForcast(WeatherDataRepository.kt:17)\nat me.org.myweatherapp.presentation.view.mvp.mainScreen.fragments.weatherdetails.WeatherDetailsPresenterTest.testCurrentWeatherScreenAppears(WeatherDetailsPresenterTest.kt:61)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n</code></pre>\n\n<p>you should not need to see the repository code but i'll show it anyway:</p>\n\n<pre><code>class WeatherDataRepository @Inject constructor(val retrofit: Retrofit){\n\n//THIS SHOULD NEVER BE CALLED, SINCE IM MOCKING IT, BUT ITS CALLED, WHY??\nfun fetchCurrentWeatherWith7dayForcast(countyName: String): Observable&lt;Pair&lt;CurrentWeatherModel, ForecastedWeatherModel&gt;&gt; {\n    val weatherApiService = retrofit.create(WeatherApi::class.java)\n    return weatherApiService.getCurrentWeather(countyName)\n            .zipWith&lt;ForecastedWeatherModel,Pair&lt;CurrentWeatherModel, ForecastedWeatherModel&gt;&gt;(weatherApiService.getForecastedWeather(countyName)\n                    .map{model-&gt; model.forecast?.forecastday?.forEach { it?.dayName= getDay(it?.date.toString())}; model }\n                    , BiFunction { t1, t2 -&gt; Pair(t1,t2) })\n\n    }}\n</code></pre>\n\n<p>i am already annotating the repo to be mocked and then in the setup i initialized all mocks, so the only thing i can think of is im not using the Mockito.when command the right away ? any help appreciated. </p>\n\n<p>UPDATE: </p>\n\n<p>HERE IS THE ENTIRE STACK TRACE OF THE FAILURE:</p>\n\n<pre><code>\"/Applications/Android Studio.app/Contents/jre/jdk/Contents/Home/bin/java\" -ea -Didea.test.cyclic.buffer.size=1048576 -Didea.launcher.port=57805 \"-Didea.launcher.bin.path=/Applications/Android Studio.app/Contents/bin\" -Dfile.encoding=UTF-8 -classpath \"/Applications/Android Studio.app/Contents/lib/idea_rt.jar:/Applications/Android Studio.app/Contents/plugins/junit/lib/junit-rt.jar:/Applications/Android Studio.app/Contents/plugins/junit/lib/junit5-rt.jar:/Users/me/Library/Android/sdk/platforms/android-27/data/res:/Users/me/Documents/mystuff/weatherappdemo/app/build/intermediates/classes/prod/debug:/Users/me/Library/Android/sdk/extras/m2repository/com/android/support/constraint/constraint-layout-solver/1.0.2/constraint-layout-solver-1.0.2.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/support-v4-27.1.1.aar/8c528b77506492992ca9cefd2fbe3fc1/jars/classes.jar:/Users/me/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlin/kotlin-stdlib-jdk7/1.2.21/88bfff5aa470143a83b0bc5ec00c0be8cabd7cad/kotlin-stdlib-jdk7-1.2.21.jar:/Users/me/.gradle/caches/modules-2/files-2.1/commons-cli/commons-cli/1.2/2bf96b7aa8b611c177d329452af1dc933e14501c/commons-cli-1.2.jar:/Users/me/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlin/kotlin-reflect/1.2.41/e4d6728a4fa55dbfb510aeea25c072c7c51d94/kotlin-reflect-1.2.41.jar:/Users/me/.gradle/caches/modules-2/files-2.1/android.arch.lifecycle/common-java8/1.0.0/a7458929c2f84a8a59b6b4da631a36f07091cf79/common-java8-1.0.0.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/support-media-compat-27.1.1.aar/8c1ab73749282027c9894ed4f6387856/res:/Users/me/.gradle/caches/transforms-1/files-1.1/support-media-compat-27.1.1.aar/8c1ab73749282027c9894ed4f6387856/jars/classes.jar:/Users/me/.gradle/caches/modules-2/files-2.1/org.bouncycastle/bcprov-jdk15on/1.50/be504b4901d75cbe129a178f5830e6c358ec214c/bcprov-jdk15on-1.50.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/stetho-1.5.0.aar/f176def4c2ceb952e3ab306a7d56241a/jars/classes.jar:/Users/me/.gradle/caches/modules-2/files-2.1/org.jetbrains/annotations/13.0/919f0dfe192fb4e063e7dacadee7f8bb9a2672a9/annotations-13.0.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/rules-1.0.1.aar/88459f9e0846eb9599bad2e0efbab6bb/jars/classes.jar:/Users/me/.gradle/caches/modules-2/files-2.1/javax.inject/javax.inject/1/6975da39a7040257bd51d21a231b76c915872d38/javax.inject-1.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/play-services-auth-base-license-11.8.0.aar/1f271bdf7747c7247ce3e2d7b7a8ff8e/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/play-services-basement-license-11.8.0.aar/9ae67be5ece95255b9bcca7d0378d2b4/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/firebase-iid-11.8.0.aar/951a9ce1737846087ee53aaecfb671c0/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/support-fragment-27.1.1.aar/227f5a73c4224f35e666b27741d51529/jars/classes.jar:/Users/me/.gradle/caches/modules-2/files-2.1/com.squareup.retrofit2/retrofit/2.3.0/bcacde6a8ccedcc56c127403d26b76072fe6214d/retrofit-2.3.0.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/runtime-1.1.0.aar/506f9955d304b32a4564c4b84422fea4/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/design-27.1.1.aar/4f85b6a28d4b1cf224a5e6cb1d4dbc66/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/design-27.1.1.aar/4f85b6a28d4b1cf224a5e6cb1d4dbc66/res:/Users/me/.gradle/caches/transforms-1/files-1.1/runtime-1.0.0.aar/7af827a5af0341c7eceb2a9ffa27a39e/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/multidex-instrumentation-1.0.2.aar/d67f47874da4e87ad02796a65dc73f61/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/firebase-config-11.8.0.aar/bc62621a53fdb88540784b9828b13fde/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/appcompat-v7-27.1.1.aar/23e568de9f4f0daff9b5d756af53aa07/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/appcompat-v7-27.1.1.aar/23e568de9f4f0daff9b5d756af53aa07/res:/Users/me/.gradle/caches/modules-2/files-2.1/org.greenrobot/eventbus/3.0.0/ddd99896e9569eaababbe81b35d80e1b91c4ad85/eventbus-3.0.0.jar:/Users/me/.gradle/caches/modules-2/files-2.1/com.squareup.okhttp3/okhttp/3.8.0/5a11f020cce2d11eb71ba916700600e18c4547e7/okhttp-3.8.0.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/firebase-analytics-impl-11.8.0.aar/5b4765afdec874f91c04f5abe56e5275/jars/classes.jar:/Users/me/.gradle/caches/modules-2/files-2.1/android.arch.persistence.room/common/1.0.0/1cbd3ddc566125293b13af5c0a65bc015476e83c/common-1.0.0.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/runtime-1.1.0.aar/1fb10be0704f03034b6aa2314ccf3e4d/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/transition-27.1.1.aar/91b8eaec16a28ef6b3781544873a983d/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/transition-27.1.1.aar/91b8eaec16a28ef6b3781544873a983d/res:/Users/me/.gradle/caches/transforms-1/files-1.1/play-services-auth-base-11.8.0.aar/882aae6015201ef880d7ddb46766a289/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/butterknife-8.8.1.aar/cf0409e6eb4d8f95c289b322c09c7470/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/fbcore-1.3.0.aar/881eb80147e1a600eb4fdd7ca2ca248e/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/firebase-common-11.8.0.aar/7840ba4061070f9ac09a6db65e355818/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/firebase-analytics-impl-license-11.8.0.aar/a56e270bd3ae1a384d54e6bd9a48d02d/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/uiautomator-v18-2.1.0.aar/9b94013d0aeaac82611731b234cecc7b/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/support-compat-27.1.1.aar/8da86b1dff1f0160efbb1b9cd1b03a26/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/support-compat-27.1.1.aar/8da86b1dff1f0160efbb1b9cd1b03a26/res:/Users/me/.gradle/caches/transforms-1/files-1.1/espresso-contrib-3.0.1.aar/775bf13abb0c730effcf8406c262c9f3/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/viewmodel-1.1.0.aar/1decb5c20af306b59139842edceb0bf7/jars/classes.jar:/Users/me/.gradle/caches/modules-2/files-2.1/org.reactivestreams/reactive-streams/1.0.0/14b8c877d98005ba3941c9257cfe09f6ed0e0d74/reactive-streams-1.0.0.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/firebase-core-11.8.0.aar/40ccc15d85cb93820d69a9a52ee41860/jars/classes.jar:/Users/me/.gradle/caches/modules-2/files-2.1/com.jakewharton/butterknife-annotations/8.8.1/bc373fb6bc7bca3035041b924f158fd2b946ee8d/butterknife-annotations-8.8.1.jar:/Users/me/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlin/kotlin-android-extensions-runtime/1.2.41/c1fd16a8b0be2f6c95dd43e1560d5b86ff742fdc/kotlin-android-extensions-runtime-1.2.41.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/spots-dialog-0.7.aar/d5614913769f6b38243111c590a8482f/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/spots-dialog-0.7.aar/d5614913769f6b38243111c590a8482f/res:/Users/me/.gradle/caches/transforms-1/files-1.1/support-vector-drawable-27.1.1.aar/5eb343d801e7f29a5d223861abe3b6fc/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/stetho-okhttp3-1.5.0.aar/519dbbb66efddad4a4bfae9c6e76718d/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/firebase-iid-license-11.8.0.aar/423297131a354e0bfbd7103a38722964/jars/classes.jar:/Users/me/.gradle/caches/modules-2/files-2.1/com.github.ihsanbal/LoggingInterceptor/2.0.2/e0230eb518409058f04f1be8e356d9dfd9d7126b/LoggingInterceptor-2.0.2.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/support-core-utils-27.1.1.aar/10757417e97a4e5d394b007d55ed39df/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/play-services-basement-11.8.0.aar/96b45c45c9e7d0359214ab8878e5b137/res:/Users/me/.gradle/caches/transforms-1/files-1.1/play-services-basement-11.8.0.aar/96b45c45c9e7d0359214ab8878e5b137/jars/classes.jar:/Users/me/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlin/kotlin-stdlib/1.2.41/7e34f009642702250bccd9e5255866f408962a05/kotlin-stdlib-1.2.41.jar:/Users/me/.gradle/caches/modules-2/files-2.1/com.google.code.findbugs/jsr305/2.0.1/516c03b21d50a644d538de0f0369c620989cd8f0/jsr305-2.0.1.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/imagepipeline-base-1.3.0.aar/a7e27f7f6f4d580103459e14d4d91132/jars/classes.jar:/Users/me/.gradle/caches/modules-2/files-2.1/org.hamcrest/hamcrest-core/1.3/42a25dc3219429f0e5d060061f71acb49bf010a0/hamcrest-core-1.3.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/play-services-base-license-11.8.0.aar/0e66bd26413f298ad4b21d093883f138/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/core-ktx-0.1.aar/b15ebaf7972ab87fc408b81f8cd9b7f8/jars/classes.jar:/Users/me/.gradle/caches/modules-2/files-2.1/com.squareup.retrofit2/adapter-rxjava2/2.3.0/f436637f9500ab5b8bc32afe556373180894b4a5/adapter-rxjava2-2.3.0.jar:/Users/me/.gradle/caches/modules-2/files-2.1/com.google.dagger/dagger/2.9/75a739e59d7ede2f7f425f369955bdd1c2ac122b/dagger-2.9.jar:/Users/me/.gradle/caches/modules-2/files-2.1/net.bytebuddy/byte-buddy/1.6.14/871c3e49dc6183d0d361601c2f1d11abb1a6b48c/byte-buddy-1.6.14.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/imagepipeline-1.3.0.aar/f7d55bb54a7fcb0dc52ca620f3cb3390/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/rxbinding-2.0.0.aar/71b2449f24db0bbe295118e38c3b099c/jars/classes.jar:/Users/me/.gradle/caches/modules-2/files-2.1/android.arch.lifecycle/common/1.1.0/edf3f7bfb84a7521d0599efa3b0113a0ee90f85/common-1.1.0.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/drawee-1.3.0.aar/0d2fd7b15bc817f241bd45a7af724235/res:/Users/me/.gradle/caches/transforms-1/files-1.1/drawee-1.3.0.aar/0d2fd7b15bc817f241bd45a7af724235/jars/classes.jar:/Users/me/.gradle/caches/modules-2/files-2.1/org.objenesis/objenesis/2.5/612ecb799912ccf77cba9b3ed8c813da086076e9/objenesis-2.5.jar:/Users/me/.gradle/caches/modules-2/files-2.1/com.google.code.gson/gson/2.7/751f548c85fa49f330cecbb1875893f971b33c4e/gson-2.7.jar:/Users/me/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlin/kotlin-stdlib-jre7/1.2.41/9e7a6f582de73d9cdc6c56ef4e23604a0ee55768/kotlin-stdlib-jre7-1.2.41.jar:/Users/me/.gradle/caches/modules-2/files-2.1/com.squareup.okhttp3/logging-interceptor/3.8.0/f765f004f3e201bd6ad0904266e605d7fb776d5/logging-interceptor-3.8.0.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/recyclerview-v7-27.1.1.aar/5c32c514912225f8996a860cdae759cb/res:/Users/me/.gradle/caches/transforms-1/files-1.1/recyclerview-v7-27.1.1.aar/5c32c514912225f8996a860cdae759cb/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/multidex-1.0.2.aar/3d385f486b764139c13b624fee0b32c0/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/support-core-ui-27.1.1.aar/10a6e827fb24388f3d393ee95b15305c/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/support-core-ui-27.1.1.aar/10a6e827fb24388f3d393ee95b15305c/res:/Users/me/.gradle/caches/transforms-1/files-1.1/play-services-tasks-license-11.8.0.aar/f8cc3f0ba924aff3c7d5cc7c9c56f7e9/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/idling-concurrent-3.0.1.aar/bf368765eb5955d1a89d234f6c5669ee/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/rxjava2-1.0.0.aar/406d1a35f2fb9c28ac1c637df15d49db/jars/classes.jar:/Users/me/.gradle/caches/modules-2/files-2.1/com.squareup.retrofit2/converter-gson/2.3.0/9e09011e9767bb76b5e27c9b8223476b93b14631/converter-gson-2.3.0.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/firebase-messaging-license-11.8.0.aar/0c9522887d98bb37f93e8694bc9cab09/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/firebase-config-license-11.8.0.aar/6602b35b3e55aebb6ac4665e9872b5fc/jars/classes.jar:/Users/me/.gradle/caches/modules-2/files-2.1/io.reactivex.rxjava2/rxjava/2.1.1/99895d4dc6d79efbb74360f13c556d95533ad8f8/rxjava-2.1.1.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/play-services-auth-api-phone-license-11.8.0.aar/f3df85960ad3eeb19f7be4ce902b978a/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/db-framework-1.0.0.aar/796c04fce9221c438948f9c68e14c88c/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/viewstate-2.0.1.aar/bf016c65c3e0c7dcafda5281f41b4e81/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/db-1.0.0.aar/81d8f63860272b7c43a6709748e52ee9/jars/classes.jar:/Users/me/.gradle/caches/modules-2/files-2.1/io.reactivex.rxjava2/rxjava/2.1.7/8c6d3f76a0b8ed49e9d49a5af9c80c5fc2091677/rxjava-2.1.7.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/firebase-messaging-11.8.0.aar/fbcba383734b49591176a7772066d087/res:/Users/me/.gradle/caches/transforms-1/files-1.1/firebase-messaging-11.8.0.aar/fbcba383734b49591176a7772066d087/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/firebase-common-license-11.8.0.aar/a853cc000b4a9e97a1e8cb8510bbde3a/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/firebase-auth-11.8.0.aar/e8a403bb2bc41b0978151644434be336/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/runner-1.0.1.aar/bc61594971ebf029997add3d9e064acb/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/timber-4.5.1.aar/ed168ba0862d519a47bca16bf4dac2df/jars/classes.jar:/Users/me/.gradle/caches/modules-2/files-2.1/com.android.support/support-annotations/27.1.1/39ded76b5e1ce1c5b2688e1d25cdc20ecee32007/support-annotations-27.1.1.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/animated-vector-drawable-27.1.1.aar/e91ef01a13292102a7a45e6e1080e1fb/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/firebase-analytics-license-11.8.0.aar/6b229f59f2b7a192f74a9c7d5a33dfe2/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/play-services-auth-api-phone-11.8.0.aar/a76aa8978d4a42b84287b4c62555d7a0/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/firebase-analytics-11.8.0.aar/9dfc8e29830fdadd2e7d25b1baa19671/jars/classes.jar:/Users/me/.gradle/caches/modules-2/files-2.1/com.parse.bolts/bolts-tasks/1.4.0/d85884acf6810a3bbbecb587f239005cbc846dc4/bolts-tasks-1.4.0.jar:/Users/me/.gradle/caches/modules-2/files-2.1/com.squareup.okio/okio/1.13.0/a9283170b7305c8d92d25aff02a6ab7e45d06cbe/okio-1.13.0.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/fresco-1.3.0.aar/db4a2dd4f4c2cab75bf3453e6639ed58/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/rx2-idler-0.9.0.aar/2592289841865b391355f5d4fc368251/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/espresso-intents-3.0.1.aar/eb5beafb4e6532e880eb8af7a315b9f6/jars/classes.jar:/Users/me/.gradle/caches/modules-2/files-2.1/org.reactivestreams/reactive-streams/1.0.1/1b1c911686eb40179219466e6a59b634b9d7a748/reactive-streams-1.0.1.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/mvp-2.0.1.aar/f0614328bd1e1100af13886a9dcde777/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/mvp-2.0.1.aar/f0614328bd1e1100af13886a9dcde777/res:/Users/me/.gradle/caches/transforms-1/files-1.1/espresso-core-3.0.1.aar/3d7b614004a6eaa78227a35fd3cee256/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/espresso-web-3.0.1.aar/cf8ebc9ea102e614f709045983fb32a7/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/rxandroid-2.0.1.aar/5516ddab631416f22f025eb065849949/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/constraint-layout-1.0.2.aar/3eb445c5139d11809f5142c08a3b669a/res:/Users/me/.gradle/caches/transforms-1/files-1.1/constraint-layout-1.0.2.aar/3eb445c5139d11809f5142c08a3b669a/jars/classes.jar:/Users/me/.gradle/caches/modules-2/files-2.1/junit/junit/4.12/2973d150c0dc1fefe998f834810d68f278ea58ec/junit-4.12.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/play-services-base-11.8.0.aar/6022e015ee3a8def24bc31049a72d6b5/res:/Users/me/.gradle/caches/transforms-1/files-1.1/play-services-base-11.8.0.aar/6022e015ee3a8def24bc31049a72d6b5/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/espresso-idling-resource-3.0.1.aar/12c9fd22796fd8b15ccaf8884ae23c20/jars/classes.jar:/Users/me/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlin/kotlin-stdlib-jdk8/1.2.21/86407aed2dc197bd5f61d16e759c4ff43678732a/kotlin-stdlib-jdk8-1.2.21.jar:/Users/me/.gradle/caches/modules-2/files-2.1/com.rubylichtenstein/rxtest/1.0.7/43a4d1a2b4dcc14c669f4be81680a4e4b7d3dd1e/rxtest-1.0.7.jar:/Users/me/.gradle/caches/modules-2/files-2.1/com.squareup.picasso/picasso/2.5.2/7446d06ec8d4f7ffcc53f1da37c95f200dcb9387/picasso-2.5.2.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/livedata-core-1.1.0.aar/518c06f36c54349dedb9b4d7d98fdde5/jars/classes.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/play-services-tasks-11.8.0.aar/c516e10968cea0d1c7a34bf5a433c591/jars/classes.jar:/Users/me/.gradle/caches/modules-2/files-2.1/com.squareup.okhttp3/mockwebserver/3.8.0/6bcc6566897ffae93c62e53ff8e8e71af18d7593/mockwebserver-3.8.0.jar:/Users/me/.gradle/caches/modules-2/files-2.1/com.hannesdorfmann.mosby/mvp-common/2.0.1/d75c9c5577143f3cf3fd63f61526a551f910b56f/mvp-common-2.0.1.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/play-services-auth-11.8.0.aar/860f44f092aa569d6e12cc2a8b2f1f16/res:/Users/me/.gradle/caches/transforms-1/files-1.1/play-services-auth-11.8.0.aar/860f44f092aa569d6e12cc2a8b2f1f16/jars/classes.jar:/Users/me/.gradle/caches/modules-2/files-2.1/android.arch.core/common/1.1.0/8007981f7d7540d89cd18471b8e5dcd2b4f99167/common-1.1.0.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/timberkt-1.3.0.aar/3061f0b036f5136e670a5c16d103a232/jars/classes.jar:/Users/me/.gradle/caches/modules-2/files-2.1/net.bytebuddy/byte-buddy-agent/1.6.14/ba1e5ba3a84fb2fbf2f4de9138df19665eec4d59/byte-buddy-agent-1.6.14.jar:/Users/me/.gradle/caches/modules-2/files-2.1/org.mockito/mockito-core/2.8.9/1afb35b2d77d40567756c379e54c18da3574a96e/mockito-core-2.8.9.jar:/Users/me/.gradle/caches/transforms-1/files-1.1/firebase-auth-license-11.8.0.aar/c11a9a832d941e454c91804c30c3b8e5/jars/classes.jar:/Users/me/Documents/mystuff/weatherappdemo/app/build/intermediates/sourceFolderJavaResources/test/prod/debug:/Users/me/Documents/mystuff/weatherappdemo/app/build/tmp/kotlin-classes/prodDebugUnitTest:/Users/me/Documents/mystuff/weatherappdemo/app/build/tmp/kapt3/classes/prodDebugUnitTest:/Users/me/Documents/mystuff/weatherappdemo/app/build/intermediates/sourceFolderJavaResources/prod/debug:/Users/me/Documents/mystuff/weatherappdemo/app/build/tmp/kapt3/classes/prodDebug:/Users/me/Documents/mystuff/weatherappdemo/app/build/tmp/kotlin-classes/prodDebug:/Users/me/Documents/mystuff/weatherappdemo/app/build/generated/mockable-android-27.v3.jar\" com.intellij.rt.execution.application.AppMainV2 com.intellij.rt.execution.junit.JUnitStarter -ideVersion5 me.org.weatherapp.presentation.view.mvp.mainScreen.fragments.weatherdetails.WeatherDetailsPresenterTest\n\njava.lang.NullPointerException\n    at me.org.weatherapp.data.repositories.WeatherDataRepository.fetchCurrentWeatherWith7dayForcast(WeatherDataRepository.kt:17)\n    at me.org.weatherapp.presentation.view.mvp.mainScreen.fragments.weatherdetails.WeatherDetailsPresenterTest.testCurrentWeatherScreenAppears(WeatherDetailsPresenterTest.kt:49)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\n    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\n    at org.mockito.internal.runners.DefaultInternalRunner$1.run(DefaultInternalRunner.java:78)\n    at org.mockito.internal.runners.DefaultInternalRunner.run(DefaultInternalRunner.java:84)\n    at org.mockito.internal.runners.StrictRunner.run(StrictRunner.java:39)\n    at org.mockito.junit.MockitoJUnitRunner.run(MockitoJUnitRunner.java:161)\n    at org.junit.runner.JUnitCore.run(JUnitCore.java:137)\n    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)\n    at com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)\n    at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)\n    at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at com.intellij.rt.execution.application.AppMainV2.main(AppMainV2.java:131)\n</code></pre>\n"}, {"tags": ["java", "ant", "kotlin"], "owner": {"reputation": 16481, "user_id": 1392277, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yJUSK.jpg?s=128&g=1", "display_name": "LppEdd", "link": "https://stackoverflow.com/users/1392277/lppedd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 366, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1532957580, "creation_date": 1532957580, "question_id": 51595170, "link": "https://stackoverflow.com/questions/51595170/kotlin-with-ant-build", "title": "Kotlin with ANT build", "body": "<p>I've read the documentation for using Kotlin inside a Java / ANT project.<br>\nI've integrated the build <code>.xml</code> file with:</p>\n\n<pre><code>&lt;typedef resource=\"org/jetbrains/kotlin/ant/antlib.xml\"&gt;\n   &lt;classpath&gt;\n      &lt;pathelement location=\"lib/kotlin-ant.jar\"/&gt;\n   &lt;/classpath&gt;\n&lt;/typedef&gt;\n</code></pre>\n\n<p>But I noticed the minimal required libraries for <code>kotlin-ant</code> are:</p>\n\n<pre><code>kotlin-compiler.jar\nkotlin-preloader.jar\nkotlin-reflect.jar\nkotlin-runtime.jar\nkotlin-script-runtime.jar\nkotlin-stdlib.jar\n</code></pre>\n\n<p>and they must be placed in the same directory as <code>kotlin-ant</code>.<br>\nDo you confirm this is the correct approach for compiling with ANT?</p>\n"}, {"tags": ["firebase", "kotlin", "google-cloud-firestore", "kotlin-coroutines"], "comments": [{"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1532956485, "post_id": 51594772, "comment_id": 90155373, "body": "Simply check <b><a href=\"https://stackoverflow.com/questions/48499310/firestore-object-with-inner-object/48500679\">this</a></b> out."}, {"owner": {"reputation": 125, "user_id": 10155205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58f697483c1be88bc3349a97e6c638c5?s=128&d=identicon&r=PG&f=1", "display_name": "Jane Ashley", "link": "https://stackoverflow.com/users/10155205/jane-ashley"}, "reply_to_user": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1532956690, "post_id": 51594772, "comment_id": 90155493, "body": "Thanks but it is for Java, I don&#39;t know Java, I learn Kotlin. Can you solve this in Kotlin?"}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1532956876, "post_id": 51594772, "comment_id": 90155627, "body": "Ok, I&#39;ll write you an answer in Kotlin."}], "answers": [{"comments": [{"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "reply_to_user": {"reputation": 125, "user_id": 10155205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58f697483c1be88bc3349a97e6c638c5?s=128&d=identicon&r=PG&f=1", "display_name": "Jane Ashley", "link": "https://stackoverflow.com/users/10155205/jane-ashley"}, "edited": false, "score": 1, "creation_date": 1532958473, "post_id": 51595202, "comment_id": 90156706, "body": "Ok, keep me posted."}, {"owner": {"reputation": 125, "user_id": 10155205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58f697483c1be88bc3349a97e6c638c5?s=128&d=identicon&r=PG&f=1", "display_name": "Jane Ashley", "link": "https://stackoverflow.com/users/10155205/jane-ashley"}, "edited": false, "score": 2, "creation_date": 1532963001, "post_id": 51595202, "comment_id": 90159807, "body": "That&#39;s fabulous, it worked. Thanks for your great explanation!!"}, {"owner": {"reputation": 125, "user_id": 10155205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58f697483c1be88bc3349a97e6c638c5?s=128&d=identicon&r=PG&f=1", "display_name": "Jane Ashley", "link": "https://stackoverflow.com/users/10155205/jane-ashley"}, "edited": false, "score": 1, "creation_date": 1532964772, "post_id": 51595202, "comment_id": 90160878, "body": "I have also seen the video from that post, it&#39;s almost the same in Java."}, {"owner": {"reputation": 627, "user_id": 7118110, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-TzVRIJUYrOA/AAAAAAAAAAI/AAAAAAAACqY/z1BM7b5NG6U/photo.jpg?sz=128", "display_name": "Deepak Kumar", "link": "https://stackoverflow.com/users/7118110/deepak-kumar"}, "edited": false, "score": 2, "creation_date": 1540460038, "post_id": 51595202, "comment_id": 92877387, "body": "Thanks @AlexMamo for your great answers and explanations, It always helps a lot. Which one is the best way to get the result from the asynchronous APIs  by using the callback or using the runBlocking thread and then returning the result using async function."}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "reply_to_user": {"reputation": 627, "user_id": 7118110, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-TzVRIJUYrOA/AAAAAAAAAAI/AAAAAAAACqY/z1BM7b5NG6U/photo.jpg?sz=128", "display_name": "Deepak Kumar", "link": "https://stackoverflow.com/users/7118110/deepak-kumar"}, "edited": false, "score": 1, "creation_date": 1540525609, "post_id": 51595202, "comment_id": 92906505, "body": "@deepakkumar Using the callback."}], "tags": [], "owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "is_accepted": true, "score": 19, "last_activity_date": 1578588190, "last_edit_date": 1592644375, "creation_date": 1532957664, "answer_id": 51595202, "question_id": 51594772, "link": "https://stackoverflow.com/questions/51594772/how-to-return-a-list-from-firestore-database-as-a-result-of-a-function-in-kotlin/51595202#51595202", "title": "How to return a list from Firestore database as a result of a function in Kotlin?", "body": "<p>This is a classic issue with asynchronous web APIs. You cannot return something now, that hasn't been loaded yet. With other words, you cannot simply return the <code>places</code> list as a result of a method because it will always be empty due the asynchronous behavior of the <code>onComplete</code> function. Depending on your connection speed and the state, it may take from a few hundred milliseconds to a few seconds before that data is available.</p>\n<p>But not only Cloud Firestore loads data asynchronously, almost all of modern other web APIs do, since it may take some time to get the data. But let's take an quick example, by placing a few log statements in the code, to see more clearly what I'm talking about.</p>\n<pre><code>fun getListOfPlaces() : List&lt;String&gt; {\n    Log.d(&quot;TAG&quot;, &quot;Before attaching the listener!&quot;);\n    val places = ArrayList&lt;String&gt;()\n    placesRef.get().addOnCompleteListener { task -&gt;\n        if (task.isSuccessful) {\n            Log.d(&quot;TAG&quot;, &quot;Inside onComplete function!&quot;);\n            for (document in task.result) {\n                val name = document.data[&quot;name&quot;].toString()\n                places.add(name)\n            }\n        }\n    }\n    Log.d(&quot;TAG&quot;, &quot;After attaching the listener!&quot;);\n    return list;\n}\n</code></pre>\n<p>If we run this code will, the output in your logcat will be:</p>\n<blockquote>\n<p>Before attaching the listener!</p>\n<p>After attaching the listener!</p>\n<p>Inside onComplete function!</p>\n</blockquote>\n<p>This is probably not what you expected, but it explains precisely why your places list is empty when returning it.</p>\n<p>The initial response for most developers is to try and &quot;fix&quot; this <code>asynchronous behavior</code>, which I personally recommend against it. <a href=\"https://medium.com/@CodingDoug/why-are-firebase-apis-asynchronous-callbacks-promises-tasks-e037a6654a93\" rel=\"noreferrer\">Here</a> is an excelent article written by Doug Stevenson that I'll highly recommend you to read.</p>\n<p>A quick solve for this problem would be to use the places list only inside the <code>onComplete</code> function:</p>\n<pre><code>fun readData() {\n    placesRef.get().addOnCompleteListener { task -&gt;\n        if (task.isSuccessful) {\n            val list = ArrayList&lt;String&gt;()\n            for (document in task.result) {\n                val name = document.data[&quot;name&quot;].toString()\n                list.add(name)\n            }\n            //Do what you need to do with your list\n        }\n    }\n}\n</code></pre>\n<p>If you want to use the list outside, there is another approach. You need to create your own callback to wait for Firestore to return you the data. To achieve this, first you need to create an <code>interface</code> like this:</p>\n<pre><code>interface MyCallback {\n    fun onCallback(value: List&lt;String&gt;)\n}\n</code></pre>\n<p>Then you need to create a function that is actually getting the data from the database. This method should look like this:</p>\n<pre><code>fun readData(myCallback : MyCallback) {\n    placesRef.get().addOnCompleteListener { task -&gt;\n        if (task.isSuccessful) {\n            val list = ArrayList&lt;String&gt;()\n            for (document in task.result) {\n                val name = document.data[&quot;name&quot;].toString()\n                list.add(name)\n            }\n            myCallback.onCallback(list)\n        }\n    }\n}\n</code></pre>\n<p>See, we don't have any return type anymore. In the end just simply call <code>readData()</code> function in your <code>onCreate</code> function and pass an instance of the <code>MyCallback</code> interface as an argument like this:</p>\n<pre><code>readData(object: MyCallback {\n    override fun onCallback(value: List&lt;String&gt;) {\n        Log.d(&quot;TAG&quot;, list.size.toString())\n    }\n})\n</code></pre>\n<p>If you are using Kotlin, please check the other <a href=\"https://stackoverflow.com/a/59124705/5246885\">answer</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 591, "user_id": 7917159, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LxVNtQgqzcw/AAAAAAAAAAI/AAAAAAAAAJU/f7Wxh854Sjs/photo.jpg?sz=128", "display_name": "CEO tech4lifeapps", "link": "https://stackoverflow.com/users/7917159/ceo-tech4lifeapps"}, "edited": false, "score": 0, "creation_date": 1567783973, "post_id": 55439565, "comment_id": 102079914, "body": "Very lean and clean solution. Works like a charm."}], "tags": [], "owner": {"reputation": 337, "user_id": 11005041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1a0efe5ce7ad2fa29b7f0961ca1236b?s=128&d=identicon&r=PG&f=1", "display_name": "FabZbi", "link": "https://stackoverflow.com/users/11005041/fabzbi"}, "is_accepted": false, "score": 3, "last_activity_date": 1554024803, "creation_date": 1554024803, "answer_id": 55439565, "question_id": 51594772, "link": "https://stackoverflow.com/questions/51594772/how-to-return-a-list-from-firestore-database-as-a-result-of-a-function-in-kotlin/55439565#55439565", "title": "How to return a list from Firestore database as a result of a function in Kotlin?", "body": "<p>The reason for having a empty list got perfectly answered by Alex Mamo above.</p>\n\n<p>I just like to present the same thing without needing to add an extra <code>interface</code>.</p>\n\n<p>In Kotlin you could just implement it like so:</p>\n\n<pre><code>fun readData(myCallback: (List&lt;String&gt;) -&gt; Unit) {\n    placesRef.get().addOnCompleteListener { task -&gt;\n        if (task.isSuccessful) {\n            val list = ArrayList&lt;String&gt;()\n            for (document in task.result) {\n                val name = document.data[\"name\"].toString()\n                list.add(name)\n            }\n            myCallback(list)\n        }\n    }\n}\n</code></pre>\n\n<p>and then use it like so:</p>\n\n<pre><code>readData() {\n   Log.d(\"TAG\", it.size.toString())\n})\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 715, "user_id": 1772057, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/H07ce.png?s=128&g=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/1772057/rafael"}, "edited": false, "score": 0, "creation_date": 1600530903, "post_id": 59124705, "comment_id": 113120077, "body": "What is placesRef&quot; ?"}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "reply_to_user": {"reputation": 715, "user_id": 1772057, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/H07ce.png?s=128&g=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/1772057/rafael"}, "edited": false, "score": 0, "creation_date": 1600538621, "post_id": 59124705, "comment_id": 113122262, "body": "@Rafael It&#39;s a CollectionReference object that points exactly to the <code>places</code> collection."}], "tags": [], "owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "is_accepted": false, "score": 7, "last_activity_date": 1619244563, "last_edit_date": 1619244563, "creation_date": 1575196671, "answer_id": 59124705, "question_id": 51594772, "link": "https://stackoverflow.com/questions/51594772/how-to-return-a-list-from-firestore-database-as-a-result-of-a-function-in-kotlin/59124705#59124705", "title": "How to return a list from Firestore database as a result of a function in Kotlin?", "body": "<p>Nowadays, Kotlin provides a simpler way to achieve the same result as in the case of using a callback. This answer is going to explain how to use <a href=\"https://kotlinlang.org/docs/coroutines-overview.html\" rel=\"nofollow noreferrer\">Kotlin Coroutines</a>. In order to make it work, we need to add the following dependency in our <code>build.gradle</code> file:</p>\n<pre><code>implementation &quot;org.jetbrains.kotlinx:kotlinx-coroutines-play-services:1.2.1&quot;\n</code></pre>\n<p>This library that we use is called <a href=\"https://github.com/Kotlin/kotlinx.coroutines/tree/master/integration/kotlinx-coroutines-play-services\" rel=\"nofollow noreferrer\">Module kotlinx-coroutines-play-services</a> and is used for the exact same purpose. As we already know, there is no way we can return a list of objects as a result of a method because <code>get()</code> returns immediately, while the callback from the Task it returns will be called sometime later. That's the reason why we should wait until the data is available.</p>\n<p>When calling &quot;get()&quot; on the <code>Task</code> object that is returned, we can attach a listener so we can get the result of our query. What we need to do now is to convert this into something that is working with Kotlin Coroutines. For that, we need to create a suspend function that looks like this:</p>\n<pre><code>private suspend fun getListOfPlaces(): List&lt;DocumentSnapshot&gt; {\n    val snapshot = placesRef.get().await()\n    return snapshot.documents\n}\n</code></pre>\n<p>As you can see, we have now an extension function called <code>await()</code> that will interrupt the Coroutine until the data from the database is available and then return it. Now we can simply call it from another suspend method like in the following lines of code:</p>\n<pre><code>private suspend fun getDataFromFirestore() {\n    try {\n        val listOfPlaces = getListOfPlaces()\n    } catch (e: Exception) {\n        Log.d(TAG, e.getMessage()) //Don't ignore potential errors!\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 10155205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58f697483c1be88bc3349a97e6c638c5?s=128&d=identicon&r=PG&f=1", "display_name": "Jane Ashley", "link": "https://stackoverflow.com/users/10155205/jane-ashley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7785, "favorite_count": 4, "accepted_answer_id": 51595202, "answer_count": 3, "score": 9, "last_activity_date": 1619244563, "creation_date": 1532956301, "last_edit_date": 1575196804, "question_id": 51594772, "link": "https://stackoverflow.com/questions/51594772/how-to-return-a-list-from-firestore-database-as-a-result-of-a-function-in-kotlin", "title": "How to return a list from Firestore database as a result of a function in Kotlin?", "body": "<p>I'm building an app for a friend and I use Firestore. What I want is to display a list of favorite places but for some reason, the list is always empty.</p>\n\n<p><a href=\"https://i.stack.imgur.com/g2UcI.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/g2UcI.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>I cannot get the data from Firestore. This is my code:</p>\n\n<pre><code>fun getListOfPlaces() : List&lt;String&gt; {\n    val places = ArrayList&lt;String&gt;()\n    placesRef.get().addOnCompleteListener { task -&gt;\n        if (task.isSuccessful) {\n            for (document in task.result) {\n                val name = document.data[\"name\"].toString()\n                places.add(name)\n            }\n        }\n    }\n    return list;\n}\n</code></pre>\n\n<p>If I try to print, let's say the size of the list in <code>onCreate</code> function, the size is always 0.</p>\n\n<pre><code>Log.d(\"TAG\", getListOfPlaces().size().toString()); // Is 0 !!!\n</code></pre>\n\n<p>I can confirm Firebase is successfully installed. \nWhat am I missing?</p>\n"}, {"tags": ["firebase", "firebase-realtime-database", "kotlin", "append"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10069942, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qf4kDYzU3s4/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pfjQcw2W-gnUFynIlsBUDc0sHf8A/mo/photo.jpg?sz=128", "display_name": "Aditya Mishra", "link": "https://stackoverflow.com/users/10069942/aditya-mishra"}, "edited": false, "score": 0, "creation_date": 1533018588, "post_id": 51598317, "comment_id": 90178682, "body": "Hi what is p0 ? is it snapshot? Secondly isn&#39;t  ref.setValue(map); same as ref.setValueAsync(snapshot.value()); which will overwrite complete firebase instead appending."}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "reply_to_user": {"reputation": 13, "user_id": 10069942, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qf4kDYzU3s4/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pfjQcw2W-gnUFynIlsBUDc0sHf8A/mo/photo.jpg?sz=128", "display_name": "Aditya Mishra", "link": "https://stackoverflow.com/users/10069942/aditya-mishra"}, "edited": false, "score": 0, "creation_date": 1533028349, "post_id": 51598317, "comment_id": 90184038, "body": "Sorry, my mistake. Should be <code>snapshot</code> not p0. Yes is a <code>snapshot</code> object. Yes it will set the value but you&#39;ll don&#39;t need to loop throught the entire <code>DataSnapshot</code> object anymore. Isn&#39;t this what you want?"}, {"owner": {"reputation": 13, "user_id": 10069942, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qf4kDYzU3s4/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pfjQcw2W-gnUFynIlsBUDc0sHf8A/mo/photo.jpg?sz=128", "display_name": "Aditya Mishra", "link": "https://stackoverflow.com/users/10069942/aditya-mishra"}, "edited": false, "score": 0, "creation_date": 1533034334, "post_id": 51598317, "comment_id": 90187913, "body": "Actually what I wanted is <b>appending</b> this snapshot&#39;s value to current firebase&#39;s existing data. Setting <b>overwrites</b> firebase with just this snapshot&#39;s value and I end up loosing existing firebase data."}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "reply_to_user": {"reputation": 13, "user_id": 10069942, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qf4kDYzU3s4/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pfjQcw2W-gnUFynIlsBUDc0sHf8A/mo/photo.jpg?sz=128", "display_name": "Aditya Mishra", "link": "https://stackoverflow.com/users/10069942/aditya-mishra"}, "edited": false, "score": 0, "creation_date": 1533038200, "post_id": 51598317, "comment_id": 90190407, "body": "I understand. In this case you should use <code>updateChildren()</code> function and not <code>setValue()</code>. Does it work this way?"}], "tags": [], "owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "is_accepted": false, "score": 0, "last_activity_date": 1533028190, "last_edit_date": 1533028190, "creation_date": 1532967620, "answer_id": 51598317, "question_id": 51593652, "link": "https://stackoverflow.com/questions/51593652/firebase-append-complete-list-at-a-time/51598317#51598317", "title": "Firebase append complete list at a time", "body": "<p>Yes you can. You can get the <code>snapshot</code> object, cast it to a <code>HashMap</code> object and then directly set it on the reference without iterating like this:</p>\n\n<pre><code>private void func (DatabaseReference ref, DataSnapshot snapshot) {\n    val map : HashMap&lt;String, Any&gt; = snapshot.getValue() as HashMap&lt;String, Any&gt;;\n    ref.setValue(map);\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10069942, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qf4kDYzU3s4/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pfjQcw2W-gnUFynIlsBUDc0sHf8A/mo/photo.jpg?sz=128", "display_name": "Aditya Mishra", "link": "https://stackoverflow.com/users/10069942/aditya-mishra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533028190, "creation_date": 1532952541, "last_edit_date": 1532962159, "question_id": 51593652, "link": "https://stackoverflow.com/questions/51593652/firebase-append-complete-list-at-a-time", "title": "Firebase append complete list at a time", "body": "<p>I have browsed net and came through many ways of appending whole list in firebase database by iterating on <code>snapshot.getchildren()</code>. \nBasically following function is what I am talking about. </p>\n\n<pre><code>private void func (DatabaseReference ref, DataSnapshot snapshot) {\n    for (DataSnapshot childSnapShot : snapshot.getChildren()) {\n\n    ref.child(childSnapShot.getKey()).setValueAsync(childSnapShot.getValue());\n    //or\n    ref.push().setValueAsync(childSnapShot.getValue());\n    }\n}\n</code></pre>\n\n<p>But I want to know a way such that I can append whole snapshot children data at one go without any iteration. </p>\n\n<p><code>ref.push().setValueAsync(snapshot.value());</code></p>\n\n<p>The above statement appends data at one go but creates an extra key at parent layer. \nwhereas \n<code>ref.setValueAsync(snapshot.value());</code> overwrites entire firebase instead of append. </p>\n\n<p>Is it possible to append whole list at a single go ?</p>\n"}, {"tags": ["java", "android", "kotlin", "firebase-authentication", "android-twitter"], "comments": [{"owner": {"reputation": 10844, "user_id": 7765139, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1JCJG0Q4b8I/AAAAAAAAAAI/AAAAAAAAB1w/2ghArTJ7KEs/photo.jpg?sz=128", "display_name": "Levi Moreira", "link": "https://stackoverflow.com/users/7765139/levi-moreira"}, "edited": false, "score": 0, "creation_date": 1532952483, "post_id": 51593569, "comment_id": 90152814, "body": "Did you initialize fabric?"}, {"owner": {"reputation": 1916, "user_id": 7783718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a43d3514a1097af1e17c0cb9b0bbfd8?s=128&d=identicon&r=PG&f=1", "display_name": "Abhay Koradiya", "link": "https://stackoverflow.com/users/7783718/abhay-koradiya"}, "edited": false, "score": 0, "creation_date": 1532952990, "post_id": 51593569, "comment_id": 90153145, "body": "put your gradle code."}, {"owner": {"reputation": 389, "user_id": 8760921, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/03e89ff18b79e9581360e3a30d6d73e4?s=128&d=identicon&r=PG&f=1", "display_name": "sunflower20", "link": "https://stackoverflow.com/users/8760921/sunflower20"}, "reply_to_user": {"reputation": 10844, "user_id": 7765139, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1JCJG0Q4b8I/AAAAAAAAAAI/AAAAAAAAB1w/2ghArTJ7KEs/photo.jpg?sz=128", "display_name": "Levi Moreira", "link": "https://stackoverflow.com/users/7765139/levi-moreira"}, "edited": false, "score": 0, "creation_date": 1532954939, "post_id": 51593569, "comment_id": 90154360, "body": "@LeviMoreira no"}, {"owner": {"reputation": 389, "user_id": 8760921, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/03e89ff18b79e9581360e3a30d6d73e4?s=128&d=identicon&r=PG&f=1", "display_name": "sunflower20", "link": "https://stackoverflow.com/users/8760921/sunflower20"}, "reply_to_user": {"reputation": 1916, "user_id": 7783718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a43d3514a1097af1e17c0cb9b0bbfd8?s=128&d=identicon&r=PG&f=1", "display_name": "Abhay Koradiya", "link": "https://stackoverflow.com/users/7783718/abhay-koradiya"}, "edited": false, "score": 0, "creation_date": 1532955166, "post_id": 51593569, "comment_id": 90154509, "body": "@AbhayKoradiya updated the question"}, {"owner": {"reputation": 1916, "user_id": 7783718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a43d3514a1097af1e17c0cb9b0bbfd8?s=128&d=identicon&r=PG&f=1", "display_name": "Abhay Koradiya", "link": "https://stackoverflow.com/users/7783718/abhay-koradiya"}, "edited": false, "score": 0, "creation_date": 1532956007, "post_id": 51593569, "comment_id": 90155040, "body": "where is the Twitter SDK?"}, {"owner": {"reputation": 1916, "user_id": 7783718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a43d3514a1097af1e17c0cb9b0bbfd8?s=128&d=identicon&r=PG&f=1", "display_name": "Abhay Koradiya", "link": "https://stackoverflow.com/users/7783718/abhay-koradiya"}, "edited": false, "score": 0, "creation_date": 1532956890, "post_id": 51593569, "comment_id": 90155635, "body": "check <a href=\"https://github.com/twitter/twitter-kit-android\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 389, "user_id": 8760921, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/03e89ff18b79e9581360e3a30d6d73e4?s=128&d=identicon&r=PG&f=1", "display_name": "sunflower20", "link": "https://stackoverflow.com/users/8760921/sunflower20"}, "reply_to_user": {"reputation": 1916, "user_id": 7783718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a43d3514a1097af1e17c0cb9b0bbfd8?s=128&d=identicon&r=PG&f=1", "display_name": "Abhay Koradiya", "link": "https://stackoverflow.com/users/7783718/abhay-koradiya"}, "edited": false, "score": 0, "creation_date": 1532961102, "post_id": 51593569, "comment_id": 90158521, "body": "@AbhayKoradiya thanks"}], "answers": [{"tags": [], "owner": {"reputation": 10844, "user_id": 7765139, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1JCJG0Q4b8I/AAAAAAAAAAI/AAAAAAAAB1w/2ghArTJ7KEs/photo.jpg?sz=128", "display_name": "Levi Moreira", "link": "https://stackoverflow.com/users/7765139/levi-moreira"}, "is_accepted": false, "score": 2, "last_activity_date": 1532955031, "creation_date": 1532955031, "answer_id": 51594384, "question_id": 51593569, "link": "https://stackoverflow.com/questions/51593569/why-twitterloginbutton-does-not-get-inflated-on-android/51594384#51594384", "title": "Why TwitterLoginButton does not get inflated on Android?", "body": "<p>According to the <a href=\"https://docs.fabric.io/android/twitter/twitter-core.html\" rel=\"nofollow noreferrer\">docs</a>, you need to intialize the Twitter auth with fabric in your application class onCreate:</p>\n\n<pre><code>@Override\npublic void onCreate() {\n    super.onCreate();\n\n    TwitterAuthConfig authConfig =  new TwitterAuthConfig(\"consumerKey\", \"consumerSecret\");\n    Fabric.with(this, new TwitterCore(authConfig));\n}\n</code></pre>\n"}], "owner": {"reputation": 389, "user_id": 8760921, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/03e89ff18b79e9581360e3a30d6d73e4?s=128&d=identicon&r=PG&f=1", "display_name": "sunflower20", "link": "https://stackoverflow.com/users/8760921/sunflower20"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1532955055, "creation_date": 1532952222, "last_edit_date": 1532955055, "question_id": 51593569, "link": "https://stackoverflow.com/questions/51593569/why-twitterloginbutton-does-not-get-inflated-on-android", "title": "Why TwitterLoginButton does not get inflated on Android?", "body": "<p>I just add TwitterLoginButton to my LoginActivity and app stops with this exception:</p>\n\n<p>Error inflating class com.twitter.sdk.android.core.identity.TwitterLoginButton</p>\n\n<p>See my xml fragment</p>\n\n<pre><code>&lt;ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:background=\"@drawable/bg_welcome\"\n    android:fillViewport=\"true\"&gt;\n\n    &lt;android.support.constraint.ConstraintLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:fitsSystemWindows=\"true\"&gt;\n\n        &lt;!--&lt;com.twitter.sdk.android.core.identity.TwitterLoginButton--&gt;\n            &lt;!--android:id=\"@+id/button_twitter_login\"--&gt;\n            &lt;!--android:layout_width=\"wrap_content\"--&gt;\n            &lt;!--android:layout_height=\"wrap_content\" /&gt;--&gt;\n                          .......\n        &lt;/android.support.constraint.ConstraintLayout&gt;\n&lt;/ScrollView&gt;\n</code></pre>\n\n<p>Also, is there a way to implement Twitter sign in without TwitterLoginButton?\n I found this solution but it didn't work for me, since I couldn't import TwitterAuthClient</p>\n\n<p><a href=\"https://stackoverflow.com/questions/27408290/twitter-login-without-twitterloginbutton\">Twitter login without TwitterLoginButton</a></p>\n\n<p>Also, see my gradle dependencies</p>\n\n<pre><code>dependencies {\n    implementation fileTree(include: ['*.jar'], dir: 'libs')\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib-jre7:$kotlin_version\"\n    implementation 'com.android.support:appcompat-v7:27.1.1'\n    implementation 'com.android.support.constraint:constraint-layout:1.1.2'\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'com.android.support.test:runner:1.0.2'\n    androidTestImplementation 'com.android.support.test.espresso:espresso-core:3.0.2'\n    //butterknife\n    implementation 'com.jakewharton:butterknife:8.8.1'\n    annotationProcessor 'com.jakewharton:butterknife-compiler:8.8.1'\n\n    implementation 'com.android.support:cardview-v7:27.1.1'\n    implementation 'com.android.support:design:27.1.1'\n    implementation 'com.android.support:design:27.1.1'\n\n    implementation 'com.mikhaellopez:circularimageview:3.0.2'\n    implementation 'me.zhanghai.android.materialratingbar:library:1.3.1'\n\n    implementation 'com.iarcuschin:simpleratingbar:0.1.5'\n\n    //authentication\n    implementation 'com.google.firebase:firebase-core:16.0.1'\n    implementation 'com.google.firebase:firebase-auth:16.0.2'\n    implementation 'com.google.android.gms:play-services-auth:15.0.1'\n    implementation 'com.facebook.android:facebook-login:4.35.0'\n\n\n}\n\napply plugin: 'com.google.gms.google-services'\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-viewpager", "android-imageview", "textview"], "comments": [{"owner": {"reputation": 35715, "user_id": 2850651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ooWVw.jpg?s=128&g=1", "display_name": "Mike M.", "link": "https://stackoverflow.com/users/2850651/mike-m"}, "edited": false, "score": 0, "creation_date": 1532952055, "post_id": 51593347, "comment_id": 90152546, "body": "What color is the background? <code>#200</code> is a very, very dark red."}, {"owner": {"reputation": 1001, "user_id": 5658251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-snphfvZWF0s/AAAAAAAAAAI/AAAAAAAAEMU/VcbwF479mRE/photo.jpg?sz=128", "display_name": "Eswar", "link": "https://stackoverflow.com/users/5658251/eswar"}, "reply_to_user": {"reputation": 35715, "user_id": 2850651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ooWVw.jpg?s=128&g=1", "display_name": "Mike M.", "link": "https://stackoverflow.com/users/2850651/mike-m"}, "edited": false, "score": 0, "creation_date": 1532953101, "post_id": 51593347, "comment_id": 90153213, "body": "@MikeM. text is black. background is white. Anyways thank you I figured out, the text was behind the imageview."}], "answers": [{"tags": [], "owner": {"reputation": 1001, "user_id": 5658251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-snphfvZWF0s/AAAAAAAAAAI/AAAAAAAAEMU/VcbwF479mRE/photo.jpg?sz=128", "display_name": "Eswar", "link": "https://stackoverflow.com/users/5658251/eswar"}, "is_accepted": true, "score": 0, "last_activity_date": 1532956305, "creation_date": 1532956305, "answer_id": 51594775, "question_id": 51593347, "link": "https://stackoverflow.com/questions/51593347/unable-to-view-text-in-the-viewpager-kotlin/51594775#51594775", "title": "Unable to view text in the viewpager kotlin", "body": "<p>The answer to this question is modifying the layout file. This worked for me.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;RelativeLayout\nxmlns:android=\"http://schemas.android.com/apk/res/android\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"300dp\"\nandroid:fitsSystemWindows=\"true\"\nandroid:orientation=\"vertical\"&gt;\n\n&lt;ImageView\n    android:id=\"@+id/sliding_image\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"240dp\"\n    /&gt;\n&lt;TextView\n    android:id=\"@+id/sliding_text\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:textSize=\"14sp\"\n    android:layout_marginTop=\"4dp\"\n    android:textColor=\"#200\"\n    android:layout_centerHorizontal=\"true\"\n    android:layout_below=\"@+id/sliding_image\"\n    android:gravity=\"center\"\n    /&gt;\n  &lt;/RelativeLayout&gt;\n</code></pre>\n\n<p>The code snippet in the Adapter is given below.</p>\n\n<pre><code>class SliderAdapter:PagerAdapter{\n\nvar context:Context\nprivate var images:Array&lt;Int&gt;\nprivate var texts:Array&lt;Int&gt;\nprivate lateinit var inflater: LayoutInflater\n\nconstructor(context: Context,images:Array&lt;Int&gt;,texts:Array&lt;Int&gt;):super(){\n    this.context=context\n    this.images=images\n    this.texts=texts\n}\n\noverride fun isViewFromObject(view: View, `object`: Any): Boolean = view == `object` as RelativeLayout\n\noverride fun getCount(): Int = images.size\n\noverride fun instantiateItem(collection: ViewGroup, position: Int): Any {\n    var image:ImageView\n    var textview:TextView\n    inflater=context.getSystemService(Context.LAYOUT_INFLATER_SERVICE) as LayoutInflater\n    var view = inflater.inflate(R.layout.splashscreenslider, collection,false)\n    image = view.findViewById(R.id.sliding_image)\n    image.setImageResource(images[position])\n    textview = view.findViewById(R.id.sliding_text)\n    textview?.setText(texts[position])\n    println(\"${textview?.text}\")\n    collection.addView(view)\n    return view\n}\n\noverride fun destroyItem(collection: ViewGroup, position: Int, `object`: Any) {\n    collection.removeView(`object` as RelativeLayout)\n}\n\n}\n</code></pre>\n\n<p>Thank you Mike for responding.</p>\n"}], "owner": {"reputation": 1001, "user_id": 5658251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-snphfvZWF0s/AAAAAAAAAAI/AAAAAAAAEMU/VcbwF479mRE/photo.jpg?sz=128", "display_name": "Eswar", "link": "https://stackoverflow.com/users/5658251/eswar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "accepted_answer_id": 51594775, "answer_count": 1, "score": 1, "last_activity_date": 1532956305, "creation_date": 1532951445, "question_id": 51593347, "link": "https://stackoverflow.com/questions/51593347/unable-to-view-text-in-the-viewpager-kotlin", "title": "Unable to view text in the viewpager kotlin", "body": "<p>I am suing viewpager for sliding images along with their text in android using kotlin. Despite having text in the layout and also adding the text to the view I am unable to view the text.</p>\n\n<p>The layout code:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;RelativeLayout\nxmlns:android=\"http://schemas.android.com/apk/res/android\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"300dp\"\nandroid:fitsSystemWindows=\"true\"\nandroid:orientation=\"vertical\"&gt;\n\n&lt;ImageView\n    android:id=\"@+id/sliding_image\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"270dp\"\n    /&gt;\n&lt;TextView\n    android:id=\"@+id/sliding_text\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:textSize=\"20sp\"\n    android:textStyle=\"bold\"\n    android:textColor=\"#200\"\n    android:layout_centerHorizontal=\"true\"\n    android:layout_below=\"@+id/sliding_image\"\n    android:gravity=\"center\"\n    /&gt;\n    &lt;/RelativeLayout&gt;\n</code></pre>\n\n<p>The code snippet of the Adapter:</p>\n\n<pre><code>class SliderAdapter:PagerAdapter{\n\nvar context:Context\nprivate var images:Array&lt;Int&gt;\nprivate var texts:Array&lt;Int&gt;\nlateinit var inflater: LayoutInflater\n\nconstructor(context: Context,images:Array&lt;Int&gt;,texts:Array&lt;Int&gt;):super(){\n    this.context=context\n    this.images=images\n    this.texts=texts\n}\n\noverride fun isViewFromObject(view: View, `object`: Any): Boolean = view == `object` as RelativeLayout\n\noverride fun getCount(): Int = images.size\n\noverride fun instantiateItem(collection: ViewGroup, position: Int): Any {\n    var image:ImageView\n    var text:TextView\n    inflater=context.getSystemService(Context.LAYOUT_INFLATER_SERVICE) as LayoutInflater\n    var view = inflater.inflate(R.layout.splashscreenslider, collection,false)\n    image = view.findViewById(R.id.sliding_image)\n    image.setImageResource(images[position])\n    text = view.findViewById(R.id.sliding_text)\n    text?.text= texts[position].toString()\n    println(\"${text?.text}\")\n    collection.addView(view)\n    return view\n}\n\noverride fun destroyItem(collection: ViewGroup, position: Int, `object`: Any) {\n    collection.removeView(`object` as RelativeLayout)\n}\n\n}\n</code></pre>\n\n<p>By the way I'm not using fragments. I'm using only the views.</p>\n\n<p>Any help is appreciated.</p>\n"}, {"tags": ["android", "android-recyclerview", "kotlin"], "comments": [{"owner": {"reputation": 880, "user_id": 6559031, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RJppD.jpg?s=128&g=1", "display_name": "Devil10", "link": "https://stackoverflow.com/users/6559031/devil10"}, "edited": false, "score": 0, "creation_date": 1532950915, "post_id": 51592624, "comment_id": 90151851, "body": "use GridLayoutManager(context,2).. here 2 is spancount"}], "answers": [{"tags": [], "owner": {"reputation": 634, "user_id": 5636936, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-20biufcHZwU/AAAAAAAAAAI/AAAAAAAAAFM/YcJx_gKmMOw/photo.jpg?sz=128", "display_name": "Dracarys", "link": "https://stackoverflow.com/users/5636936/dracarys"}, "is_accepted": false, "score": 0, "last_activity_date": 1532950292, "creation_date": 1532950292, "answer_id": 51593029, "question_id": 51592624, "link": "https://stackoverflow.com/questions/51592624/how-to-make-groupie-recylerview-2x2-layout/51593029#51593029", "title": "How to make Groupie recylerview 2x2 layout", "body": "<p>You just need to use the right layout manager, it would look something to this effect, just set the span to 2</p>\n\n<pre><code>val mLayoutManager = GridLayoutManager(context, 2, GridLayoutManager.VERTICAL, false)\n\nrecyclerView.setLayoutManager(mLayoutManager)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 846, "user_id": 4814985, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/da49c6940b546beef0d041c461ecb990?s=128&d=identicon&r=PG&f=1", "display_name": "Cleaven", "link": "https://stackoverflow.com/users/4814985/cleaven"}, "is_accepted": true, "score": 2, "last_activity_date": 1536411064, "creation_date": 1536411064, "answer_id": 52235529, "question_id": 51592624, "link": "https://stackoverflow.com/questions/51592624/how-to-make-groupie-recylerview-2x2-layout/52235529#52235529", "title": "How to make Groupie recylerview 2x2 layout", "body": "<p>So all you have to do is adjust the <code>layoutmanager</code>, like this:</p>\n\n<pre><code>private fun updateRecyclerView(items: List&lt;Item&gt;) {\nfun init() {\n    recycler_view_mod.apply {\n        layoutManager = GridLayoutManager(context, 2, GridLayoutManager.VERTICAL, false)\n        adapter = GroupAdapter&lt;ViewHolder&gt;().apply {\n            moduleSection = Section(items)\n            add(moduleSection)\n            //setOnItemClickListener(onItemClick)\n        }\n    }\n    shouldInitRecyclerView = false\n}\nfun updateItems() = moduleSection.update(items)\nif (shouldInitRecyclerView)\n    init()\nelse\n    updateItems()\n}\n</code></pre>\n"}], "owner": {"reputation": 261, "user_id": 9598407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e3bd4cf7477a39b7311f6c87d90077f?s=128&d=identicon&r=PG&f=1", "display_name": "Erbez", "link": "https://stackoverflow.com/users/9598407/erbez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 963, "favorite_count": 0, "accepted_answer_id": 52235529, "answer_count": 2, "score": 1, "last_activity_date": 1536411064, "creation_date": 1532948931, "question_id": 51592624, "link": "https://stackoverflow.com/questions/51592624/how-to-make-groupie-recylerview-2x2-layout", "title": "How to make Groupie recylerview 2x2 layout", "body": "<p>I am using groupie recycler view to display 4 items. I want the layout to be a 2x2 instead of all of them under one another. This is what I have so far and the way it displays:</p>\n\n<p>Module Class:</p>\n\n<pre><code>data class Module ( val Code: String,\n                val Desc: String){\n    constructor(): this(\"\", \"\")\n}\n</code></pre>\n\n<p>Module Fragment code snippet:</p>\n\n<pre><code>private fun updateRecyclerView(items: List&lt;Item&gt;) {\n    fun init() {\n        recycler_view_mod.apply {\n            layoutManager = LinearLayoutManager(this@ModuleFragment.context)\n            adapter = GroupAdapter&lt;ViewHolder&gt;().apply {\n                moduleSection = Section(items)\n                add(moduleSection)\n                //setOnItemClickListener(onItemClick)\n            }\n        }\n        shouldInitRecyclerView = false\n    }\n    fun updateItems() = moduleSection.update(items)\n    if (shouldInitRecyclerView)\n        init()\n    else\n        updateItems()\n}\n</code></pre>\n\n<p>ModuleItem:</p>\n\n<pre><code>class ModuleItem (val module: Module,\n              val modId: String,\n              private val context: Context)\n: Item(){\noverride fun bind(viewHolder: ViewHolder, position: Int) {\n    viewHolder.textView_Code.text = module.Code\n    viewHolder.textView_Description.text = module.Desc\n}\n\noverride fun getLayout() = R.layout.item_module\n</code></pre>\n\n<p>}</p>\n\n<p>Module Fragment layout: </p>\n\n<pre><code>&lt;FrameLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\nxmlns:tools=\"http://schemas.android.com/tools\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"match_parent\"\ntools:context=\".fragment.ModuleFragment\"&gt;\n&lt;android.support.v7.widget.RecyclerView\n    android:id=\"@+id/recycler_view_mod\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"/&gt;\n&lt;/FrameLayout&gt;\n</code></pre>\n\n<p>ModuleItem Layout:</p>\n\n<pre><code>&lt;android.support.v7.widget.CardView\nxmlns:android=\"http://schemas.android.com/apk/res/android\"\nxmlns:app=\"http://schemas.android.com/apk/res-auto\"\nxmlns:tools=\"http://schemas.android.com/tools\"\nandroid:id=\"@+id/cardView_item_module\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"70dp\"\nandroid:layout_margin=\"4dp\"\nandroid:foreground=\"?android:attr/selectableItemBackground\"\napp:cardBackgroundColor=\"@android:color/white\"\nandroid:clickable=\"true\"\nandroid:focusable=\"true\"\napp:cardCornerRadius=\"4dp\"\napp:cardElevation=\"4dp\"&gt;\n&lt;RelativeLayout\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"&gt;\n    &lt;TextView\n        android:id=\"@+id/textView_Code\"\n        android:textColor=\"@color/colorPrimaryDark\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_toEndOf=\"@id/imageView_profile_picture\"\n        android:layout_marginStart=\"10dp\"\n        android:layout_marginTop=\"5dp\"\n        android:textSize=\"25sp\"\n        android:textAppearance=\"@style/Base.TextAppearance.AppCompat\"\n        tools:text=\"Code\" /&gt;\n    &lt;TextView\n        android:id=\"@+id/textView_Description\"\n        android:textColor=\"@color/colorPrimaryDark\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_alignStart=\"@+id/textView_Code\"\n        android:layout_below=\"@+id/textView_Code\"\n        android:layout_marginStart=\"2dp\"\n        android:ellipsize=\"end\"\n        android:maxLines=\"1\"\n        android:textAppearance=\"@style/Base.TextAppearance.AppCompat.Small\"\n        tools:text=\"Description\" /&gt;\n&lt;/RelativeLayout&gt;\n&lt;/android.support.v7.widget.CardView&gt;\n</code></pre>\n\n<p>ScreenShot:</p>\n\n<p><a href=\"https://i.stack.imgur.com/CnLZf.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CnLZf.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Any help would be appreciated, let me know if you need any more information</p>\n"}, {"tags": ["android", "android-fragments", "kotlin"], "comments": [{"owner": {"reputation": 1807, "user_id": 3789993, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/CmUp9.png?s=128&g=1", "display_name": "AbhayBohra", "link": "https://stackoverflow.com/users/3789993/abhaybohra"}, "edited": false, "score": 0, "creation_date": 1532947102, "post_id": 51592071, "comment_id": 90149396, "body": "You have to show hide the fragments instead of replacing"}, {"owner": {"reputation": 25, "user_id": 5445624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622d5ccdcb933bcf2c47699972b70456?s=128&d=identicon&r=PG&f=1", "display_name": "Tek", "link": "https://stackoverflow.com/users/5445624/tek"}, "reply_to_user": {"reputation": 1807, "user_id": 3789993, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/CmUp9.png?s=128&g=1", "display_name": "AbhayBohra", "link": "https://stackoverflow.com/users/3789993/abhaybohra"}, "edited": false, "score": 0, "creation_date": 1532947279, "post_id": 51592071, "comment_id": 90149497, "body": "@AbhayBohra All of them?"}, {"owner": {"reputation": 2146, "user_id": 6881205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xGyHm.png?s=128&g=1", "display_name": "Abdurakhmon", "link": "https://stackoverflow.com/users/6881205/abdurakhmon"}, "edited": false, "score": 0, "creation_date": 1532947466, "post_id": 51592071, "comment_id": 90149596, "body": "wouldn&#39;t that lead to memory leak"}, {"owner": {"reputation": 2146, "user_id": 6881205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xGyHm.png?s=128&g=1", "display_name": "Abdurakhmon", "link": "https://stackoverflow.com/users/6881205/abdurakhmon"}, "edited": false, "score": 0, "creation_date": 1532947571, "post_id": 51592071, "comment_id": 90149666, "body": "what if he has 20 fragment? or do you mean keep 2 fragments at a time one map fragment and the other fragment-container"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 5445624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622d5ccdcb933bcf2c47699972b70456?s=128&d=identicon&r=PG&f=1", "display_name": "Tek", "link": "https://stackoverflow.com/users/5445624/tek"}, "edited": false, "score": 0, "creation_date": 1532948076, "post_id": 51592243, "comment_id": 90149976, "body": "secondFragment = SecondFragment.newInstance() ?"}, {"owner": {"reputation": 638, "user_id": 2538860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/895ac2ccb36a009e2c6c219bb519cb1e?s=128&d=identicon&r=PG", "display_name": "Viktor Stojanov", "link": "https://stackoverflow.com/users/2538860/viktor-stojanov"}, "reply_to_user": {"reputation": 25, "user_id": 5445624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622d5ccdcb933bcf2c47699972b70456?s=128&d=identicon&r=PG&f=1", "display_name": "Tek", "link": "https://stackoverflow.com/users/5445624/tek"}, "edited": false, "score": 0, "creation_date": 1532948311, "post_id": 51592243, "comment_id": 90150120, "body": "You can call <code>secondFragment =  SecondFragment()</code> too. Here a bit a more about the <a href=\"https://stackoverflow.com/questions/9245408/best-practice-for-instantiating-a-new-android-fragment\">new instance</a>"}, {"owner": {"reputation": 25, "user_id": 5445624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622d5ccdcb933bcf2c47699972b70456?s=128&d=identicon&r=PG&f=1", "display_name": "Tek", "link": "https://stackoverflow.com/users/5445624/tek"}, "edited": false, "score": 0, "creation_date": 1532948890, "post_id": 51592243, "comment_id": 90150451, "body": "You are a genius! :OOOOOOO IT WORKED Like 2 days arround this problem ... THANKS!!!"}], "tags": [], "owner": {"reputation": 638, "user_id": 2538860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/895ac2ccb36a009e2c6c219bb519cb1e?s=128&d=identicon&r=PG", "display_name": "Viktor Stojanov", "link": "https://stackoverflow.com/users/2538860/viktor-stojanov"}, "is_accepted": false, "score": 0, "last_activity_date": 1532947573, "creation_date": 1532947573, "answer_id": 51592243, "question_id": 51592071, "link": "https://stackoverflow.com/questions/51592071/android-fragments-switch-beetwen-fragments-and-back-the-last-state/51592243#51592243", "title": "Android Fragments: switch beetwen fragments and back the last state", "body": "<p>Show and hide the fragments with the following code:</p>\n\n<pre><code>val ft: FragmentTransaction = fragmentManager.beginTransaction()\n\nif (firstFragment!= null) ft.hide(firstFragment)\nif (secondFragment!= null) ft.show(secondFragment)\nelse {\n    secondFragment = SecondFragment.newInstance()\n    ft.add(container, secondFragment )\n}\nif (thirdFragment!= null) ft.hide(thirdFragment)\nif (fourthFragment!= null) ft.hide(fourthFragment)\n\nft.commitNow()\n</code></pre>\n\n<p>This way you will keep your fragments as you left them. Having them all as <code>null</code> at first helps with the memory usage.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5496143"}, "edited": false, "score": 0, "creation_date": 1532948076, "post_id": 51592323, "comment_id": 90149978, "body": "Didn&#39;t you forget loop for fragments?"}, {"owner": {"reputation": 25, "user_id": 5445624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622d5ccdcb933bcf2c47699972b70456?s=128&d=identicon&r=PG&f=1", "display_name": "Tek", "link": "https://stackoverflow.com/users/5445624/tek"}, "edited": false, "score": 0, "creation_date": 1532948723, "post_id": 51592323, "comment_id": 90150348, "body": "@AbhayBohra Not working ... Thanks for trying to help :)"}, {"owner": {"reputation": 1807, "user_id": 3789993, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/CmUp9.png?s=128&g=1", "display_name": "AbhayBohra", "link": "https://stackoverflow.com/users/3789993/abhaybohra"}, "edited": false, "score": 0, "creation_date": 1532948763, "post_id": 51592323, "comment_id": 90150375, "body": "How did you use this?"}, {"owner": {"reputation": 25, "user_id": 5445624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622d5ccdcb933bcf2c47699972b70456?s=128&d=identicon&r=PG&f=1", "display_name": "Tek", "link": "https://stackoverflow.com/users/5445624/tek"}, "edited": false, "score": 0, "creation_date": 1532949133, "post_id": 51592323, "comment_id": 90150580, "body": "When i create / Replace the fragment instead i call your function, it won&#39;t change, the Second view, only works for the first time i run it"}, {"owner": {"reputation": 1807, "user_id": 3789993, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/CmUp9.png?s=128&g=1", "display_name": "AbhayBohra", "link": "https://stackoverflow.com/users/3789993/abhaybohra"}, "edited": false, "score": 0, "creation_date": 1532949339, "post_id": 51592323, "comment_id": 90150703, "body": "You have to send the same tag which you used previously to open fragment"}, {"owner": {"reputation": 25, "user_id": 5445624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622d5ccdcb933bcf2c47699972b70456?s=128&d=identicon&r=PG&f=1", "display_name": "Tek", "link": "https://stackoverflow.com/users/5445624/tek"}, "edited": false, "score": 0, "creation_date": 1532949509, "post_id": 51592323, "comment_id": 90150823, "body": "TRUUUEE... @AbhayBohra! I forgot, your solution works pretty well, and makes code clean :D Thanks &lt;3"}, {"owner": {"reputation": 25, "user_id": 5445624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622d5ccdcb933bcf2c47699972b70456?s=128&d=identicon&r=PG&f=1", "display_name": "Tek", "link": "https://stackoverflow.com/users/5445624/tek"}, "edited": false, "score": 0, "creation_date": 1532949681, "post_id": 51592323, "comment_id": 90150953, "body": "You are a genius!"}], "tags": [], "owner": {"reputation": 1807, "user_id": 3789993, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/CmUp9.png?s=128&g=1", "display_name": "AbhayBohra", "link": "https://stackoverflow.com/users/3789993/abhaybohra"}, "is_accepted": true, "score": 1, "last_activity_date": 1532947869, "creation_date": 1532947869, "answer_id": 51592323, "question_id": 51592071, "link": "https://stackoverflow.com/questions/51592071/android-fragments-switch-beetwen-fragments-and-back-the-last-state/51592323#51592323", "title": "Android Fragments: switch beetwen fragments and back the last state", "body": "<p>Try this</p>\n\n<p>Open fragments using this function.You have to pass the tag for that perticular fragment.</p>\n\n<pre><code>private Fragment currentFragment;\n\n    public void openNewFragment(Fragment f, String tag) {\n\n        FragmentTransaction ft = getSupportFragmentManager().beginTransaction();\n        Fragment fragment = getSupportFragmentManager().findFragmentByTag(tag);\n\n        {\n            if (fragment != null) {\n                if (currentFragment != null) {\n                    if (fragment.getClass().equals(currentFragment.getClass())) {\n                        return;\n                    }\n                }\n\n                ft.show(fragment);\n                ft.hide(currentFragment);\n                currentFragment = fragment;\n\n            } else {\n                if (currentFragment != null)\n                    ft.hide(currentFragment);\n                ft.add(R.id.container, f, tag);\n                currentFragment = f;\n            }\n            ft.commit();\n        }\n\n    }\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 5445624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622d5ccdcb933bcf2c47699972b70456?s=128&d=identicon&r=PG&f=1", "display_name": "Tek", "link": "https://stackoverflow.com/users/5445624/tek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 51592323, "answer_count": 2, "score": 1, "last_activity_date": 1532947869, "creation_date": 1532946977, "question_id": 51592071, "link": "https://stackoverflow.com/questions/51592071/android-fragments-switch-beetwen-fragments-and-back-the-last-state", "title": "Android Fragments: switch beetwen fragments and back the last state", "body": "<p>I have 4 fragments, and what i'm trying to do, is, freeze the fragment A when i replace it with the new fragment B / C or D.\nThen replace B / C / D with Fragment A, the fragment won't change the state.</p>\n\n<p>I have Google Maps, and i'm trying to return to the saved state, but the problem is that the fragment is re-created ... </p>\n\n<p>I can do it when i lock the screen, and when it goes to the new intent.</p>\n\n<p>If someone could help me, really apreciate.</p>\n\n<p>Thanks for helping :D</p>\n"}, {"tags": ["sqlite", "kotlin", "jooq"], "comments": [{"owner": {"reputation": 179634, "user_id": 521799, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb96efa7a5664ba1c4ebf586abd4121f?s=128&d=identicon&r=PG", "display_name": "Lukas Eder", "link": "https://stackoverflow.com/users/521799/lukas-eder"}, "edited": false, "score": 0, "creation_date": 1532946090, "post_id": 51591722, "comment_id": 90148849, "body": "Did you correctly set up your <code>configuration</code> with <code>SQLDialect.SQLITE</code>? Also, why do you alias the <code>JOB</code> table?"}, {"owner": {"reputation": 119, "user_id": 2631567, "user_type": "registered", "profile_image": "https://graph.facebook.com/1300412113/picture?type=large", "display_name": "Nagaraju Nooka", "link": "https://stackoverflow.com/users/2631567/nagaraju-nooka"}, "reply_to_user": {"reputation": 179634, "user_id": 521799, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb96efa7a5664ba1c4ebf586abd4121f?s=128&d=identicon&r=PG", "display_name": "Lukas Eder", "link": "https://stackoverflow.com/users/521799/lukas-eder"}, "edited": false, "score": 0, "creation_date": 1532946694, "post_id": 51591722, "comment_id": 90149183, "body": "yes i have configured the same DIALECT. Able to successfully Query the db but update is failing.  i have forgot to remove the alias, updated now."}, {"owner": {"reputation": 179634, "user_id": 521799, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb96efa7a5664ba1c4ebf586abd4121f?s=128&d=identicon&r=PG", "display_name": "Lukas Eder", "link": "https://stackoverflow.com/users/521799/lukas-eder"}, "edited": false, "score": 0, "creation_date": 1533023398, "post_id": 51591722, "comment_id": 90181173, "body": "I cannot reproduce this. With a properly configured configuration, there is no column qualification in update statements for SQLite, nor are columns quoted. Can you please show how you create the <code>configuration</code>?"}, {"owner": {"reputation": 119, "user_id": 2631567, "user_type": "registered", "profile_image": "https://graph.facebook.com/1300412113/picture?type=large", "display_name": "Nagaraju Nooka", "link": "https://stackoverflow.com/users/2631567/nagaraju-nooka"}, "reply_to_user": {"reputation": 179634, "user_id": 521799, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb96efa7a5664ba1c4ebf586abd4121f?s=128&d=identicon&r=PG", "display_name": "Lukas Eder", "link": "https://stackoverflow.com/users/521799/lukas-eder"}, "edited": false, "score": 1, "creation_date": 1533036999, "post_id": 51591722, "comment_id": 90189598, "body": "Thanks Lukas Eder for your time,  Unfortunately it&#39;s  an IDE issue for some reason the file has not been refreshed where i have added SQLDialect.SQLITE. After printing the DIALECT to console i came to know this."}], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 2631567, "user_type": "registered", "profile_image": "https://graph.facebook.com/1300412113/picture?type=large", "display_name": "Nagaraju Nooka", "link": "https://stackoverflow.com/users/2631567/nagaraju-nooka"}, "edited": false, "score": 0, "creation_date": 1533037995, "post_id": 51612607, "comment_id": 90190250, "body": "i have rechecked yesterday after your comment but didn&#39;t clearly debug the issue."}], "tags": [], "owner": {"reputation": 179634, "user_id": 521799, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb96efa7a5664ba1c4ebf586abd4121f?s=128&d=identicon&r=PG", "display_name": "Lukas Eder", "link": "https://stackoverflow.com/users/521799/lukas-eder"}, "is_accepted": true, "score": 1, "last_activity_date": 1533037352, "creation_date": 1533037352, "answer_id": 51612607, "question_id": 51591722, "link": "https://stackoverflow.com/questions/51591722/failed-to-update-table-row-in-sqlite-using-jooq/51612607#51612607", "title": "Failed To Update Table Row in SQLITE Using JOOQ", "body": "<p>The most likely explanation for this is that you did not correctly configure your <code>configuration</code> with the <code>SQLDialect.SQLITE</code> dialect. In that dialect, the column references in the <code>set</code> clause would not be qualified, neither would any column or table be quoted.</p>\n"}], "owner": {"reputation": 119, "user_id": 2631567, "user_type": "registered", "profile_image": "https://graph.facebook.com/1300412113/picture?type=large", "display_name": "Nagaraju Nooka", "link": "https://stackoverflow.com/users/2631567/nagaraju-nooka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 51612607, "answer_count": 1, "score": 1, "last_activity_date": 1533037352, "creation_date": 1532945776, "last_edit_date": 1532946774, "question_id": 51591722, "link": "https://stackoverflow.com/questions/51591722/failed-to-update-table-row-in-sqlite-using-jooq", "title": "Failed To Update Table Row in SQLITE Using JOOQ", "body": "<p>jooq is generating invalid update statement for sqlite database.</p>\n\n<p>Here is the database table.</p>\n\n<pre><code>CREATE TABLE \"job\" (\n  `id` integer PRIMARY KEY AUTOINCREMENT, \n  `addressId` text,\n   `log` text\n)\n</code></pre>\n\n<p><strong>Valid Statement:</strong></p>\n\n<pre><code>update \"job\" set \"log\" = (coalesce(\"log\", ?) || ? || ?) WHERE id &gt; 0\n</code></pre>\n\n<p><strong>Jooq Generated Statement</strong></p>\n\n<pre><code>update \"job\" set \"job\".\"log\" = (coalesce(\"job\".\"log\", ?) || ? || ?) where \"job\".\"id\" &gt;= ?\n</code></pre>\n\n<p>Here is the Sample Code i ame Using:</p>\n\n<pre><code>DSL.using(configuration).update(JOB).set(JOB.LOG, DSL.coalesce(JOB.LOG, \"\")\n                .concat(\"char(10)\", \"Hello\"))\n                .where(JOB.ID.ge(0)).execute()\n</code></pre>\n\n<p>How do i force jooq to generate valid sqlite update statement?</p>\n"}, {"tags": ["android", "android-recyclerview", "kotlin", "android-viewpager", "android-nestedscrollview"], "comments": [{"owner": {"reputation": 45763, "user_id": 6891563, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/HJ9QX.jpg?s=128&g=1", "display_name": "Khemraj", "link": "https://stackoverflow.com/users/6891563/khemraj"}, "edited": false, "score": 0, "creation_date": 1532945061, "post_id": 51591492, "comment_id": 90148214, "body": "You want Recycler View height to be wrap_content?"}, {"owner": {"reputation": 1539, "user_id": 2843041, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/044938a2a4f9ebffb21fa62ff6de9a52?s=128&d=identicon&r=PG", "display_name": "Saman", "link": "https://stackoverflow.com/users/2843041/saman"}, "reply_to_user": {"reputation": 45763, "user_id": 6891563, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/HJ9QX.jpg?s=128&g=1", "display_name": "Khemraj", "link": "https://stackoverflow.com/users/6891563/khemraj"}, "edited": false, "score": 0, "creation_date": 1532945164, "post_id": 51591492, "comment_id": 90148286, "body": "@Khemraj . i want <code>RecyclerView</code> scroll by <code>NestedScrollView</code>"}, {"owner": {"reputation": 45763, "user_id": 6891563, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/HJ9QX.jpg?s=128&g=1", "display_name": "Khemraj", "link": "https://stackoverflow.com/users/6891563/khemraj"}, "edited": false, "score": 0, "creation_date": 1532945246, "post_id": 51591492, "comment_id": 90148332, "body": "Okay, you want <code>NestedScrolling</code> false, that will also make RecyclerView <code>wrap_content</code>. Complicated question, need to do some work."}, {"owner": {"reputation": 45763, "user_id": 6891563, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/HJ9QX.jpg?s=128&g=1", "display_name": "Khemraj", "link": "https://stackoverflow.com/users/6891563/khemraj"}, "edited": false, "score": 0, "creation_date": 1532945510, "post_id": 51591492, "comment_id": 90148512, "body": "People who don&#39;t understand question, they down-vote it. Weird!"}, {"owner": {"reputation": 1539, "user_id": 2843041, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/044938a2a4f9ebffb21fa62ff6de9a52?s=128&d=identicon&r=PG", "display_name": "Saman", "link": "https://stackoverflow.com/users/2843041/saman"}, "reply_to_user": {"reputation": 45763, "user_id": 6891563, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/HJ9QX.jpg?s=128&g=1", "display_name": "Khemraj", "link": "https://stackoverflow.com/users/6891563/khemraj"}, "edited": false, "score": 0, "creation_date": 1532945593, "post_id": 51591492, "comment_id": 90148566, "body": "@Khemraj . I really don&#39;t understand why get two negative vote"}, {"owner": {"reputation": 45763, "user_id": 6891563, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/HJ9QX.jpg?s=128&g=1", "display_name": "Khemraj", "link": "https://stackoverflow.com/users/6891563/khemraj"}, "edited": false, "score": 1, "creation_date": 1532945647, "post_id": 51591492, "comment_id": 90148602, "body": "They are blind actually. It happens with me sometimes also."}, {"owner": {"reputation": 725, "user_id": 9205277, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DDrNg.jpg?s=128&g=1", "display_name": "Dimitri de Jesus", "link": "https://stackoverflow.com/users/9205277/dimitri-de-jesus"}, "edited": false, "score": 0, "creation_date": 1596560918, "post_id": 51591492, "comment_id": 111848182, "body": "It looks like NestedScrollView needs to have only one element inside of it. So you could use LinearLayout inside of NestedScrollView to wrap all things inside it by its turn. Take a look if it works."}], "answers": [{"comments": [{"owner": {"reputation": 1539, "user_id": 2843041, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/044938a2a4f9ebffb21fa62ff6de9a52?s=128&d=identicon&r=PG", "display_name": "Saman", "link": "https://stackoverflow.com/users/2843041/saman"}, "edited": false, "score": 0, "creation_date": 1532945686, "post_id": 51591612, "comment_id": 90148626, "body": "In my case min sdk is 19"}, {"owner": {"reputation": 759, "user_id": 6509312, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/888032237980836/picture?type=large", "display_name": "Harish Kamboj", "link": "https://stackoverflow.com/users/6509312/harish-kamboj"}, "reply_to_user": {"reputation": 1539, "user_id": 2843041, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/044938a2a4f9ebffb21fa62ff6de9a52?s=128&d=identicon&r=PG", "display_name": "Saman", "link": "https://stackoverflow.com/users/2843041/saman"}, "edited": false, "score": 0, "creation_date": 1532945867, "post_id": 51591612, "comment_id": 90148734, "body": "Then this answer: <a href=\"https://stackoverflow.com/questions/43287798/api-19-scrollview-no-momentum#43333754\" title=\"api 19 scrollview no momentum%2343333754\">stackoverflow.com/questions/43287798/&hellip;</a> can solve your problem."}], "tags": [], "owner": {"reputation": 759, "user_id": 6509312, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/888032237980836/picture?type=large", "display_name": "Harish Kamboj", "link": "https://stackoverflow.com/users/6509312/harish-kamboj"}, "is_accepted": false, "score": 1, "last_activity_date": 1532945311, "creation_date": 1532945311, "answer_id": 51591612, "question_id": 51591492, "link": "https://stackoverflow.com/questions/51591492/recyclerview-inside-viewpager/51591612#51591612", "title": "RecyclerView inside viewpager", "body": "<p>Set these line on your RecyclerView in XML</p>\n\n<pre><code>android:nestedScrollingEnabled=\"false\"\nandroid:height=\"wrap_content\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1539, "user_id": 2843041, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/044938a2a4f9ebffb21fa62ff6de9a52?s=128&d=identicon&r=PG", "display_name": "Saman", "link": "https://stackoverflow.com/users/2843041/saman"}, "edited": false, "score": 0, "creation_date": 1532945947, "post_id": 51591653, "comment_id": 90148766, "body": "Thanks for the help. but in my application min sdk is 19 and <code>android:nestedScrollingEnabled=&quot;false</code> require 21"}, {"owner": {"reputation": 45763, "user_id": 6891563, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/HJ9QX.jpg?s=128&g=1", "display_name": "Khemraj", "link": "https://stackoverflow.com/users/6891563/khemraj"}, "reply_to_user": {"reputation": 1539, "user_id": 2843041, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/044938a2a4f9ebffb21fa62ff6de9a52?s=128&d=identicon&r=PG", "display_name": "Saman", "link": "https://stackoverflow.com/users/2843041/saman"}, "edited": false, "score": 0, "creation_date": 1532946181, "post_id": 51591653, "comment_id": 90148904, "body": "Just place this in xml android:nestedScrollingEnabled, and try below 19 api with above answer."}, {"owner": {"reputation": 45763, "user_id": 6891563, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/HJ9QX.jpg?s=128&g=1", "display_name": "Khemraj", "link": "https://stackoverflow.com/users/6891563/khemraj"}, "reply_to_user": {"reputation": 1539, "user_id": 2843041, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/044938a2a4f9ebffb21fa62ff6de9a52?s=128&d=identicon&r=PG", "display_name": "Saman", "link": "https://stackoverflow.com/users/2843041/saman"}, "edited": false, "score": 0, "creation_date": 1532946938, "post_id": 51591653, "comment_id": 90149308, "body": "Which case are you reffering"}, {"owner": {"reputation": 1539, "user_id": 2843041, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/044938a2a4f9ebffb21fa62ff6de9a52?s=128&d=identicon&r=PG", "display_name": "Saman", "link": "https://stackoverflow.com/users/2843041/saman"}, "edited": false, "score": 0, "creation_date": 1532947101, "post_id": 51591653, "comment_id": 90149394, "body": "When <code>isFillViewport</code> set <code>false</code> for <code>NestedScrollView</code> <code>Viewpager</code> doesn&#39;t  show <code>RecyclerView</code> and with set  <code>isFillViewport=true</code> <code>RecyclerView</code> not scroll at all."}, {"owner": {"reputation": 45763, "user_id": 6891563, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/HJ9QX.jpg?s=128&g=1", "display_name": "Khemraj", "link": "https://stackoverflow.com/users/6891563/khemraj"}, "reply_to_user": {"reputation": 1539, "user_id": 2843041, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/044938a2a4f9ebffb21fa62ff6de9a52?s=128&d=identicon&r=PG", "display_name": "Saman", "link": "https://stackoverflow.com/users/2843041/saman"}, "edited": false, "score": 0, "creation_date": 1532947164, "post_id": 51591653, "comment_id": 90149433, "body": "I did not mention to use <code>isFillViewport</code> in my answer."}, {"owner": {"reputation": 45763, "user_id": 6891563, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/HJ9QX.jpg?s=128&g=1", "display_name": "Khemraj", "link": "https://stackoverflow.com/users/6891563/khemraj"}, "reply_to_user": {"reputation": 1539, "user_id": 2843041, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/044938a2a4f9ebffb21fa62ff6de9a52?s=128&d=identicon&r=PG", "display_name": "Saman", "link": "https://stackoverflow.com/users/2843041/saman"}, "edited": false, "score": 0, "creation_date": 1532947177, "post_id": 51591653, "comment_id": 90149443, "body": "Did you try using <code>WrapContentViewPager</code>"}, {"owner": {"reputation": 1539, "user_id": 2843041, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/044938a2a4f9ebffb21fa62ff6de9a52?s=128&d=identicon&r=PG", "display_name": "Saman", "link": "https://stackoverflow.com/users/2843041/saman"}, "edited": false, "score": 0, "creation_date": 1532947639, "post_id": 51591653, "comment_id": 90149710, "body": "set <code>wrap_content</code> for <code>height</code> custom <code>ViewPager</code> but <code>RecyclerView</code> don&#39;t display"}, {"owner": {"reputation": 45763, "user_id": 6891563, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/HJ9QX.jpg?s=128&g=1", "display_name": "Khemraj", "link": "https://stackoverflow.com/users/6891563/khemraj"}, "reply_to_user": {"reputation": 1539, "user_id": 2843041, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/044938a2a4f9ebffb21fa62ff6de9a52?s=128&d=identicon&r=PG", "display_name": "Saman", "link": "https://stackoverflow.com/users/2843041/saman"}, "edited": false, "score": 0, "creation_date": 1532947830, "post_id": 51591653, "comment_id": 90149829, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/177011/discussion-between-khemraj-and-saman\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 45763, "user_id": 6891563, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/HJ9QX.jpg?s=128&g=1", "display_name": "Khemraj", "link": "https://stackoverflow.com/users/6891563/khemraj"}, "is_accepted": true, "score": 2, "last_activity_date": 1532945457, "creation_date": 1532945457, "answer_id": 51591653, "question_id": 51591492, "link": "https://stackoverflow.com/questions/51591492/recyclerview-inside-viewpager/51591653#51591653", "title": "RecyclerView inside viewpager", "body": "<p>I have faced this issue some time ago. Where you want <code>RecyclerView</code> to be Scrolled by <code>NestedScrollView</code>. And <code>nestedScrollingEnabled</code> will not help you because <code>RecyclerView</code> is inside <code>ViewPager.</code></p>\n\n<p><strong>Solution</strong> You can customize the <code>ViewPager</code> to resize the <code>ViewPager</code> to it's current page size on page swipe from this <a href=\"https://stackoverflow.com/questions/34484833/viewpager-wrap-content-not-working/34524240#34524240\">answer</a>.</p>\n\n<p>You can use the following code:</p>\n\n<pre><code> public class WrapContentViewPager extends ViewPager {\n\n        private int mCurrentPagePosition = 0;\n\n        public WrapContentViewPager(Context context) {\n            super(context);\n        }\n\n        public WrapContentViewPager(Context context, AttributeSet attrs) {\n            super(context, attrs);\n        }\n\n        @Override\n        protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\n        try {\n             boolean wrapHeight = MeasureSpec.getMode(heightMeasureSpec) == MeasureSpec.AT_MOST;\n             if (wrapHeight) {\n                 View child = getChildAt(mCurrentPagePosition);\n                 if (child != null) {\n                 child.measure(widthMeasureSpec, MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));\n                 int h = child.getMeasuredHeight();\n\n                 heightMeasureSpec = MeasureSpec.makeMeasureSpec(h, MeasureSpec.EXACTLY);\n                }\n            }\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n    super.onMeasure(widthMeasureSpec, heightMeasureSpec);\n    }\n\n        public void reMeasureCurrentPage(int position) {\n            mCurrentPagePosition = position;\n            requestLayout();\n        }\n    }\n</code></pre>\n\n<p>Declare it in xml:</p>\n\n<pre><code>    &lt;your.package.name.WrapContentViewPager\n            android:id=\"@+id/view_pager\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"&gt;\n    &lt;/your.package.name.WrapContentViewPager&gt;\n</code></pre>\n\n<p>After that call <code>reMeasureCurrentpage</code> function on page swipe.</p>\n\n<pre><code>    final WrapContentViewPager wrapContentViewPager = (WrapContentViewPager) findViewById(R.id.view_pager);\n\n    wrapContentViewPager.addOnPageChangeListener(new ViewPager.OnPageChangeListener() {\n                @Override\n                public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {\n\n                }\n\n                @Override\n                public void onPageSelected(int position) {\n                    wrapContentViewPager.reMeasureCurrentPage(wrapContentViewPager.getCurrentItem());\n                }\n\n                @Override\n                public void onPageScrollStateChanged(int state) {\n\n                }\n            });\n</code></pre>\n\n<p>Also set <code>android:nestedScrollingEnabled=\"false\"</code> to your <code>RecyclerView</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 976, "user_id": 5201137, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eAMgDIifZ0A/AAAAAAAAAAI/AAAAAAAACxQ/3fElJVKdhJE/photo.jpg?sz=128", "display_name": "Shubham Vala", "link": "https://stackoverflow.com/users/5201137/shubham-vala"}, "is_accepted": false, "score": 0, "last_activity_date": 1532945510, "creation_date": 1532945510, "answer_id": 51591664, "question_id": 51591492, "link": "https://stackoverflow.com/questions/51591492/recyclerview-inside-viewpager/51591664#51591664", "title": "RecyclerView inside viewpager", "body": "<p><a href=\"https://i.stack.imgur.com/Yf87d.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Yf87d.png\" alt=\"layout\"></a></p>\n\n<p>Make your layout like this will work</p>\n"}], "owner": {"reputation": 1539, "user_id": 2843041, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/044938a2a4f9ebffb21fa62ff6de9a52?s=128&d=identicon&r=PG", "display_name": "Saman", "link": "https://stackoverflow.com/users/2843041/saman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6462, "favorite_count": 2, "accepted_answer_id": 51591653, "answer_count": 3, "score": 1, "last_activity_date": 1532945510, "creation_date": 1532944876, "question_id": 51591492, "link": "https://stackoverflow.com/questions/51591492/recyclerview-inside-viewpager", "title": "RecyclerView inside viewpager", "body": "<p>I try to implement a layout like below image.</p>\n\n<p>in this layout first <code>ViewPager</code> has fix height and second <code>Viewpager</code> contain <code>RecyclerView</code>.</p>\n\n<p>How can connect scroll <code>RecyclerView</code> in <code>Viewpager</code> to <code>NestedScrollView</code> in parent?</p>\n\n<p>I try this:\n<code>nestedScrollView.isFillViewport = true</code> but <code>RecyclerView</code> scroll from top of <code>Viewpager</code>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/OABUh.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OABUh.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 5, "creation_date": 1532944335, "post_id": 51591186, "comment_id": 90147807, "body": "<code>this@A.funB()</code>"}, {"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1532945247, "post_id": 51591186, "comment_id": 90148333, "body": "@yole that&#39;s an answer ;)"}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 9992705, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qKTT8VqWNv8/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq0TMDNQBh-QHu3AOqf2YYqw1UXgCw/mo/photo.jpg?sz=128", "display_name": "Bear Big", "link": "https://stackoverflow.com/users/9992705/bear-big"}, "edited": false, "score": 0, "creation_date": 1540955995, "post_id": 51591529, "comment_id": 93049586, "body": "Thank you very much for your answer! So detailed!"}], "tags": [], "owner": {"reputation": 6703, "user_id": 1797950, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/1KyYn.jpg?s=128&g=1", "display_name": "crgarridos", "link": "https://stackoverflow.com/users/1797950/crgarridos"}, "is_accepted": true, "score": 8, "last_activity_date": 1532945010, "creation_date": 1532945010, "answer_id": 51591529, "question_id": 51591186, "link": "https://stackoverflow.com/questions/51591186/kotlin-calling-outer-class-method-in-object-expression/51591529#51591529", "title": "Kotlin: calling outer class method in object expression", "body": "<p>You can qualify <code>this</code> with a @ to obtain an equivalent of java: <code>MyClass.this</code> \n -><code>this@MyClass</code></p>\n\n<p>Then in your case, you can call: </p>\n\n<pre><code>this@A.funB()\n</code></pre>\n\n<hr>\n\n<p>From the <a href=\"https://kotlinlang.org/docs/reference/this-expressions.html#qualified\" rel=\"noreferrer\">doc</a>: </p>\n\n<blockquote>\n  <p>To access this from an outer scope (a class, or extension function, or labeled function literal with receiver) we write this@label where @label is a label on the scope this is meant to be from:</p>\n</blockquote>\n\n<pre><code>class A { // implicit label @A\n    inner class B { // implicit label @B\n        fun Int.foo() { // implicit label @foo\n            val a = this@A // A's this\n            val b = this@B // B's this\n\n            val c = this // foo()'s receiver, an Int\n            val c1 = this@foo // foo()'s receiver, an Int\n\n            val funLit = lambda@ fun String.() {\n                val d = this // funLit's receiver\n            }\n\n\n            val funLit2 = { s: String -&gt;\n                // foo()'s receiver, since enclosing lambda expression\n                // doesn't have any receiver\n                val d1 = this\n            }\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 9992705, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qKTT8VqWNv8/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq0TMDNQBh-QHu3AOqf2YYqw1UXgCw/mo/photo.jpg?sz=128", "display_name": "Bear Big", "link": "https://stackoverflow.com/users/9992705/bear-big"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1044, "favorite_count": 0, "accepted_answer_id": 51591529, "answer_count": 1, "score": 7, "last_activity_date": 1532945010, "creation_date": 1532943889, "last_edit_date": 1532944281, "question_id": 51591186, "link": "https://stackoverflow.com/questions/51591186/kotlin-calling-outer-class-method-in-object-expression", "title": "Kotlin: calling outer class method in object expression", "body": "<p>My question is almost like this question <a href=\"https://stackoverflow.com/questions/9043170/java-calling-outer-class-method-in-anonymous-inner-class\">Java: calling outer class method in anonymous inner class</a> .\nBut this time we are in Kotlin.</p>\n\n<p>As the example below, I want to call <code>funB()</code> in the object expression, but I only made two failures.</p>\n\n<pre><code>class A {\n    lateinit var funA: () -&gt; Unit\n    lateinit var funB: () -&gt; Unit\n\n    fun funC()  {\n        var b = object : B() {\n            override fun funB() {\n                funA() // A.funA()\n\n                // Two attempts to fail\n                funB() // b.funB(), not my expect\n                A::funB() // compile error\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Thank you for your answer!</p>\n"}, {"tags": ["android", "gradle", "kotlin", "dependencies", "android-support-library"], "comments": [{"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 1, "creation_date": 1532943714, "post_id": 51590954, "comment_id": 90147396, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/43902679/compilereleasekotlin-fails-with-java-lang-classnotfoundexception-com-sun-tools\">compileReleaseKotlin fails with java.lang.ClassNotFoundException: com.sun.tools.javac.util.Context</a>"}, {"owner": {"reputation": 55, "user_id": 9827236, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "prf", "link": "https://stackoverflow.com/users/9827236/prf"}, "reply_to_user": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1532943918, "post_id": 51590954, "comment_id": 90147524, "body": "Seems that it has nothing in common with my case"}, {"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1532943998, "post_id": 51590954, "comment_id": 90147577, "body": "did you check if you have <code>tools.jar</code> in your JDK distribution?"}, {"owner": {"reputation": 55, "user_id": 9827236, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "prf", "link": "https://stackoverflow.com/users/9827236/prf"}, "reply_to_user": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1532944794, "post_id": 51590954, "comment_id": 90148069, "body": "The question is: how just increasing version number could affect tools.jar in any way? Like I wrote, everything builds and works fine on support library 27.0.2, but build breaks after update to 27.1.1"}, {"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1532944880, "post_id": 51590954, "comment_id": 90148109, "body": "I don&#39;t know, maybe that dependency was provided by the old support library"}, {"owner": {"reputation": 55, "user_id": 9827236, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "prf", "link": "https://stackoverflow.com/users/9827236/prf"}, "reply_to_user": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1532946033, "post_id": 51590954, "comment_id": 90148817, "body": "tools.jar are in the right place"}, {"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1532947361, "post_id": 51590954, "comment_id": 90149539, "body": "<code>tools.jar</code> is in <code>JDK_HOME\\lib</code> folder.. Is that folder present into your <code>CLASSPATH</code> environment variable?"}, {"owner": {"reputation": 55, "user_id": 9827236, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "prf", "link": "https://stackoverflow.com/users/9827236/prf"}, "reply_to_user": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 1, "creation_date": 1532949260, "post_id": 51590954, "comment_id": 90150655, "body": "Thanks to your response I figured out that exception has nothing in common with upgrading support library version. I use embeded version of JDK and I don&#39;t even have JAVA_HOME env variable. It occurs that build fails every time when I try do this from terminal. In conclusion - upgrading support lib version does not cause exception which is thrown"}], "answers": [{"tags": [], "owner": {"reputation": 55, "user_id": 9827236, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "prf", "link": "https://stackoverflow.com/users/9827236/prf"}, "is_accepted": true, "score": 1, "last_activity_date": 1532959415, "creation_date": 1532959415, "answer_id": 51595763, "question_id": 51590954, "link": "https://stackoverflow.com/questions/51590954/cannot-update-any-support-library-in-android/51595763#51595763", "title": "Cannot update any support library in Android", "body": "<p>Instead of updating support library I started updating Kotlin. I set version from 1.2.20 to 1.2.51, then apply kotlin kapt plugin</p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\napply plugin: 'kotlin-kapt'\n</code></pre>\n\n<p>and remove this block of code:</p>\n\n<pre><code>kapt { generateStubs = true }\n</code></pre>\n\n<p>Also I changed method name for dagger android processor </p>\n\n<pre><code>kapt \"com.google.dagger:dagger-android-processor:${dagger}\"\n</code></pre>\n\n<p>After these steps I still got some errors, but this time there were much more explicit and easy to solve. Issue fixed.</p>\n"}], "owner": {"reputation": 55, "user_id": 9827236, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "prf", "link": "https://stackoverflow.com/users/9827236/prf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 833, "favorite_count": 0, "accepted_answer_id": 51595763, "answer_count": 1, "score": 3, "last_activity_date": 1532959415, "creation_date": 1532943186, "last_edit_date": 1532949578, "question_id": 51590954, "link": "https://stackoverflow.com/questions/51590954/cannot-update-any-support-library-in-android", "title": "Cannot update any support library in Android", "body": "<p>I decided to update dependencies in our project. Currently, version of all com.android.support components is 27.0.2. When I try to update for example recyclerview to 27.1.1 I got two strange errors:</p>\n\n<blockquote>\n  <p>error: [ComponentProcessor:MiscError] dagger.internal.codegen.ComponentProcessor was unable to process this class because not all of its dependencies could be resolved. Check for compilation errors or a circular dependency with generated code.</p>\n  \n  <p>error: android.arch.persistence.room.RoomProcessor was unable to process this class because not all of its dependencies could be resolved. Check for compilation errors or a circular dependency with generated code.</p>\n</blockquote>\n\n<p>Like I said, this happens for all support components like design, cardView etc. Furthermore when I build project with the help of console I can see that some exception is thrown</p>\n\n<p><strong>[UPDATE]</strong></p>\n\n<p>The following exception is not caused by upgrading support library version, just ignore this</p>\n\n<pre><code>Could not perform incremental compilation: Could not connect to Kotlin compile daemon\nCould not connect to kotlin daemon. Using fallback strategy.\ne: java.lang.ClassNotFoundException: com.sun.tools.javac.util.Context\n        at java.net.URLClassLoader.findClass(Unknown Source)\n        at java.lang.ClassLoader.loadClass(Unknown Source)\n        at java.lang.ClassLoader.loadClass(Unknown Source)\n        at java.lang.Class.forName0(Native Method)\n        at java.lang.Class.forName(Unknown Source)\n        at org.jetbrains.kotlin.gradle.tasks.JarSearchingUtilKt.findToolsJar(jarSearchingUtil.kt:79)\n        at org.jetbrains.kotlin.compilerRunner.GradleCompilerEnvironment$toolsJar$2.invoke(GradleCompilerEnvironment.kt:20)\n        at org.jetbrains.kotlin.compilerRunner.GradleCompilerEnvironment$toolsJar$2.invoke(GradleCompilerEnvironment.kt:14)\n        at kotlin.SynchronizedLazyImpl.getValue(Lazy.kt:130)\n        at org.jetbrains.kotlin.compilerRunner.GradleCompilerEnvironment.getToolsJar(GradleCompilerEnvironment.kt)\n        at org.jetbrains.kotlin.compilerRunner.GradleCompilerEnvironment.getCompilerFullClasspath(GradleCompilerEnvironment.kt:23)\n        at org.jetbrains.kotlin.compilerRunner.GradleCompilerRunner.compileOutOfProcess(GradleKotlinCompilerRunner.kt:302)\n        at org.jetbrains.kotlin.compilerRunner.GradleCompilerRunner.compileWithDaemonOrFallback(GradleKotlinCompilerRunner.kt:171)\n        at org.jetbrains.kotlin.compilerRunner.GradleCompilerRunner.compileWithDaemonOrFallback(GradleKotlinCompilerRunner.kt:53)\n        at org.jetbrains.kotlin.compilerRunner.KotlinCompilerRunner.runCompiler(KotlinCompilerRunner.kt:127)\n        at org.jetbrains.kotlin.compilerRunner.GradleCompilerRunner.runJvmCompiler(GradleKotlinCompilerRunner.kt:108)\n        at org.jetbrains.kotlin.gradle.tasks.KotlinCompile.callCompiler$kotlin_gradle_plugin(Tasks.kt:382)\n        at org.jetbrains.kotlin.gradle.tasks.KotlinCompile.callCompiler$kotlin_gradle_plugin(Tasks.kt:251)\n        at org.jetbrains.kotlin.gradle.tasks.AbstractKotlinCompile.execute(Tasks.kt:215)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n        at java.lang.reflect.Method.invoke(Unknown Source)\n        at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:73)\n        at org.gradle.api.internal.project.taskfactory.IncrementalTaskAction.doExecute(IncrementalTaskAction.java:46)\n        at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:39)\n        at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:26)\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$1.run(ExecuteActionsTaskExecuter.java:121)\n        at org.gradle.internal.progress.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:336)\n        at org.gradle.internal.progress.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:328)\n        at org.gradle.internal.progress.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:199)\n        at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:110)\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeAction(ExecuteActionsTaskExecuter.java:110)\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:92)\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:70)\n        at org.gradle.api.internal.tasks.execution.OutputDirectoryCreatingTaskExecuter.execute(OutputDirectoryCreatingTaskExecuter.java:51)\n        at org.gradle.api.internal.tasks.execution.SkipUpToDateTaskExecuter.execute(SkipUpToDateTaskExecuter.java:62)\n        at org.gradle.api.internal.tasks.execution.ResolveTaskOutputCachingStateExecuter.execute(ResolveTaskOutputCachingStateExecuter.java:54)\n        at org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:60)\n        at org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute(SkipEmptySourceFilesTaskExecuter.java:97)\n        at org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:87)\n        at org.gradle.api.internal.tasks.execution.ResolveTaskArtifactStateTaskExecuter.execute(ResolveTaskArtifactStateTaskExecuter.java:52)\n        at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:52)\n        at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:54)\n        at org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter.execute(ExecuteAtMostOnceTaskExecuter.java:43)\n        at org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:34)\n        at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker$1.run(DefaultTaskGraphExecuter.java:248)\n        at org.gradle.internal.progress.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:336)\n        at org.gradle.internal.progress.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:328)\n        at org.gradle.internal.progress.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:199)\n        at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:110)\n        at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker.execute(DefaultTaskGraphExecuter.java:241)\n        at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker.execute(DefaultTaskGraphExecuter.java:230)\n        at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$TaskExecutorWorker.processTask(DefaultTaskPlanExecutor.java:123)\n        at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$TaskExecutorWorker.access$200(DefaultTaskPlanExecutor.java:79)\n        at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$TaskExecutorWorker$1.execute(DefaultTaskPlanExecutor.java:104)\n        at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$TaskExecutorWorker$1.execute(DefaultTaskPlanExecutor.java:98)\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionPlan.execute(DefaultTaskExecutionPlan.java:626)\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionPlan.executeWithTask(DefaultTaskExecutionPlan.java:581)\n        at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$TaskExecutorWorker.run(DefaultTaskPlanExecutor.java:98)\n        at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)\n        at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n        at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)\n        at java.lang.Thread.run(Unknown Source) \n</code></pre>\n\n<p>I paste my build gradle files (top and app). </p>\n\n<p>Top level:</p>\n\n<pre><code>buildscript {\n    ext.kotlin_version = '1.2.20'\n    repositories {\n        jcenter()\n        google()\n        maven { url 'https://maven.fabric.io/public' }\n        maven { url \"https://dl.bintray.com/kotlin/kotlin-dev/\"}\n    }\n    dependencies {\n\n        classpath 'com.android.tools.build:gradle:3.1.3'\n        classpath 'io.fabric.tools:gradle:1.25.4'\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n        classpath 'com.jakewharton:butterknife-gradle-plugin:8.6.0'\n        classpath 'com.google.gms:google-services:4.0.1'\n        classpath 'com.google.firebase:firebase-plugins:1.1.5' // Crash Reporting plugin\n\n    }\n}\nallprojects {\n    repositories {\n        jcenter()\n        google()\n        maven { url \"https://maven.google.com\"} // Google's Maven repository}\n        maven { url \"https://jitpack.io\" }\n        maven { url \"https://dl.bintray.com/kotlin/kotlin-dev\"}\n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n} \n</code></pre>\n\n<p>And app module:</p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\napply plugin: 'io.fabric'\napply plugin: 'com.google.firebase.firebase-crash'\n\n\nandroidExtensions {\n    experimental = true\n}\n\ndef mVersionName = \"1.0.2\"\n\nandroid {\n\n    dexOptions {\n        javaMaxHeapSize \"6g\"\n    }\n\n    compileSdkVersion 27\n    buildToolsVersion '27.0.3'\n\n    defaultConfig {\n        minSdkVersion 19\n        targetSdkVersion 27\n        versionCode 81\n        versionName mVersionName\n        // set the name of the genereted apk including version name\n\n        vectorDrawables.useSupportLibrary = true\n        multiDexEnabled true\n\n        javaCompileOptions {\n            annotationProcessorOptions {\n                arguments = [\"room.schemaLocation\": \"$projectDir/schemas\".toString()]\n            }\n        }\n\n        // TEST (integration)\n        testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n\n        testHandleProfiling true\n        testFunctionalTest true\n    }\n\n    packagingOptions {\n        exclude 'META-INF/rxjava.properties'\n        exclude 'META-INF/LICENSE'\n        exclude 'LICENSE.txt'\n    }\n\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n\n    aaptOptions {\n        // important to run code on kitkat\n        additionalParameters \"--no-version-vectors\"\n    }\n\n    // directories like src/test/kotlin and src/androidTest/kotlin are not detected\n    // as Android test locations by default (yet?),\n    // we need to make Gradle and Android Studio aware of them.\n    sourceSets {\n        test.java.srcDirs += 'src/test/kotlin'\n        androidTest.java.srcDirs += 'src/androidTest/kotlin'\n    }\n\n    // when true it won't throw an exception when referencing to Android eco system - to View/ activity etc.\n    testOptions {\n        unitTests.returnDefaultValues = true\n    }\n\n    // Always show the result of every unit test, even if it passes.\n    testOptions.unitTests.all {\n        testLogging {\n            events 'passed', 'skipped', 'failed', 'standardOut', 'standardError'\n        }\n    }\n\n    lintOptions {\n        abortOnError false\n    }\n}\n\n//Ensure Kotlin will not be used in production code.\nafterEvaluate {\n    android.sourceSets.all { sourceSet -&gt;\n        if (!sourceSet.name.startsWith('test') || !sourceSet.name.startsWith('androidTest')) {\n            sourceSet.kotlin.setSrcDirs([])\n        }\n    }\n}\n\n\nrepositories {\n    maven { url 'https://maven.fabric.io/public' }\n    maven { url \"http://dl.bintray.com/glomadrian/maven\" } //kod sms - edittext type\n    mavenCentral()\n}\n\nkapt {\n    generateStubs = true\n}\n\ndependencies {\n    implementation 'com.android.support:support-v4:27.0.2'\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n\n    // Dependencies for local unit tests\n    // Required for local unit tests (JUnit 4 framework)\n    testImplementation 'junit:junit:4.12'\n    testImplementation 'org.mockito:mockito-core:2.10.0'\n    // required if you want to use Mockito for unit tests\n    testImplementation \"com.nhaarman:mockito-kotlin-kt1.1:1.5.0\"\n    testImplementation \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n    testImplementation \"org.jetbrains.kotlin:kotlin-test-junit:$kotlin_version\"\n    testImplementation 'org.amshove.kluent:kluent:1.33'\n    // a library with really cool assertion semantics\n\n    // INTEGRATION TEST\n    androidTestImplementation 'org.mockito:mockito-android:2.8.47'\n    // required if you want to use Mockito for Android tests\n    androidTestImplementation 'com.android.support.test:runner:1.0.2'\n    androidTestImplementation 'com.android.support.test:rules:1.0.2'\n    androidTestImplementation \"com.android.support:support-annotations:27.1.1\"\n    androidTestImplementation('com.android.support.test.espresso:espresso-core:2.2.2', {\n        exclude group: 'com.android.support', module: 'support-annotations'\n        exclude group: 'com.google.code.findbugs'\n    })\n    androidTestImplementation 'com.android.support.test.espresso:espresso-contrib:2.2.2', {\n        exclude group: 'com.android.support', module: 'support-annotations'\n        exclude group: 'com.android.support', module: 'support-v4'\n        exclude group: 'com.android.support', module: 'design'\n        exclude group: 'com.android.support', module: 'recyclerview-v7'\n    }\n    androidTestImplementation 'com.android.support.test.espresso:espresso-core:3.0.2'\n    androidTestImplementation 'com.android.support.test.uiautomator:uiautomator-v18:2.1.3'\n\n    // Multidex support\n    implementation 'com.android.support:multidex:1.0.3'\n\n    // Kotlin plugin for enabling Kotlin language\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib-jre8:$kotlin_version\"\n    implementation \"org.jetbrains.kotlinx:kotlinx-coroutines-android:0.19.3\"\n\n    // Play Services\n    String playServices = '11.8.0'\n    String firebase = playServices\n    implementation 'com.google.android.gms:play-services-location:15.0.1'\n\n    implementation 'com.google.android.gms:play-services-places:15.0.1'\n    implementation 'com.google.firebase:firebase-core:16.0.1'\n    implementation 'com.google.firebase:firebase-crash:16.0.1'\n    implementation 'com.google.firebase:firebase-messaging:17.1.0' // Cloud Messaging\n\n    // MAPS\n    implementation 'com.google.android.gms:play-services-maps:15.0.1'\n    implementation 'com.google.maps.android:android-maps-utils:0.5'\n\n    // Widgets / Views\n    String supportLibrary = '27.0.2'\n    implementation 'tk.zielony:carbon:0.15.0.1'\n    implementation \"com.android.support:appcompat-v7:$supportLibrary\"\n    implementation \"com.android.support:design:${supportLibrary}\"\n    implementation \"com.android.support:support-v4:${supportLibrary}\"\n    implementation 'com.android.support:cardview-v7:27.1.1'\n    implementation \"com.android.support:recyclerview-v7:${supportLibrary}\"\n    implementation \"com.android.support:support-vector-drawable:${supportLibrary}\"\n    implementation 'com.android.support.constraint:constraint-layout:1.1.2'\n\n    // Android Architecture\n    // LiveData and ViewModel\n    String androidLifecycle = '1.0.0'\n    String androidLifecycleExtension = '1.1.0'\n    implementation \"android.arch.lifecycle:common-java8:$androidLifecycleExtension\"\n    implementation \"android.arch.lifecycle:extensions:$androidLifecycleExtension\"\n    annotationProcessor \"android.arch.lifecycle:compiler:$androidLifecycle\"\n    kapt \"android.arch.lifecycle:compiler:$androidLifecycle\"\n    implementation \"android.arch.lifecycle:reactivestreams:$androidLifecycleExtension\"\n\n    // Room - DB ORM\n    implementation \"android.arch.persistence.room:runtime:$androidLifecycle\"\n    implementation \"android.arch.persistence.room:rxjava2:${androidLifecycle}\" // RxJava2 Support\n    annotationProcessor \"android.arch.persistence.room:compiler:$androidLifecycle\"\n    kapt \"android.arch.persistence.room:compiler:$androidLifecycle\"\n    // Paging\n    implementation \"android.arch.paging:runtime:1.0.0-alpha4-1\"\n\n    // Retrofit\n    implementation 'com.squareup.okhttp3:okhttp:3.9.1'\n    implementation 'com.squareup.okhttp3:logging-interceptor:3.8.1'\n    implementation 'com.squareup.retrofit2:retrofit:2.3.0'\n    implementation 'com.squareup.retrofit2:adapter-rxjava2:2.3.0'\n\n    String jackson = '2.9.4'\n    implementation 'com.squareup.retrofit2:converter-gson:2.3.0'\n    implementation 'com.squareup.retrofit2:converter-jackson:2.3.0'\n    implementation \"com.fasterxml.jackson.core:jackson-core:${jackson}\"\n    implementation \"com.fasterxml.jackson.core:jackson-annotations:${jackson}\"\n    implementation \"com.fasterxml.jackson.core:jackson-databind:${jackson}\"\n//    implementation \"com.fasterxml.jackson.module:jackson-module-kotlin:${jackson}\"\n\n    // RxJava\n    implementation 'io.reactivex.rxjava2:rxandroid:2.0.2'\n    implementation 'io.reactivex.rxjava2:rxjava:2.1.14'\n    implementation 'io.reactivex.rxjava2:rxkotlin:2.2.0'\n\n    // View injection\n    String butterKnife = '8.6.0'\n    implementation \"com.jakewharton:butterknife:${butterKnife}\"\n    annotationProcessor \"com.jakewharton:butterknife-compiler:${butterKnife}\"\n    kapt \"com.jakewharton:butterknife-compiler:${butterKnife}\"\n\n    // Injection\n    String dagger = '2.16'\n    implementation \"com.google.dagger:dagger:${dagger}\"\n    implementation \"com.google.dagger:dagger-android:${dagger}\"\n    implementation \"com.google.dagger:dagger-android-support:${dagger}\"\n    annotationProcessor \"com.google.dagger:dagger-compiler:${dagger}\"\n    annotationProcessor \"com.google.dagger:dagger-android-processor:${dagger}\"\n    kapt \"com.google.dagger:dagger-compiler:${dagger}\"\n    compileOnly 'org.glassfish:javax.annotation:10.0-b28'\n\n    // EventBus\n    implementation 'org.greenrobot:eventbus:3.1.1'\n\n    // Bug / Crash / Memory Leaks libraries\n    implementation('com.crashlytics.sdk.android:crashlytics:2.9.0@aar') {\n        transitive = true\n    }\n\n    String leakCanary = '1.5.1'\n    debugImplementation \"com.squareup.leakcanary:leakcanary-android:${leakCanary}\"\n    releaseImplementation \"com.squareup.leakcanary:leakcanary-android-no-op:${leakCanary}\"\n    androidTestImplementation \"com.squareup.leakcanary:leakcanary-android-no-op:${leakCanary}\"\n\n    // Stetho is a sophisticated debug bridge for Android applications.\n    // When enabled, developers have access to Database Inspection, and many more\n    implementation 'com.facebook.stetho:stetho:1.5.0'\n    implementation 'com.jakewharton.timber:timber:4.6.0'\n    implementation 'net.ypresto.timbertreeutils:timbertreeutils:1.0.0'\n\n    // Support Libraries\n    implementation 'com.squareup.picasso:picasso:2.5.2'\n    implementation 'com.github.vipulasri:timelineview:1.0.5'\n    implementation 'com.googlecode.libphonenumber:libphonenumber:8.2.0'\n    // letter spacing in description view (tablica rejestracyjna)\n    implementation 'com.andrognito.kerningview:kerningview:1.0.0'\n    // drawable with description inside\n    implementation 'com.amulyakhare:com.amulyakhare.textdrawable:1.0.1'\n    // view pager steps indicator (new damage)\n    implementation 'com.github.rakshakhegde:stepper-indicator:2.0.0-alpha'\n    // do display photo (zoom ect.)\n    implementation 'com.github.chrisbanes:PhotoView:2.1.3'\n    // Notification Badge\n    implementation \"me.leolin:ShortcutBadger:1.1.21@aar\"\n    // better library to handle Date()\n    implementation 'net.danlew:android.joda:2.9.9.1'\n    testImplementation 'joda-time:joda-time:2.9.9'\n\n    // Picasso transformation from https://github.com/wasabeef/picasso-transformations\n    implementation 'jp.wasabeef:picasso-transformations:2.2.1'\n    implementation 'jp.co.cyberagent.android.gpuimage:gpuimage-library:1.4.1'\n\n    // better spinner from https://github.com/Lesilva/BetterSpinner\n    implementation 'com.weiwangcn.betterspinner:library-material:1.1.0'\n\n\n}\n\nkotlin {\n    experimental {\n        coroutines \"enable\"\n    }\n}\n\napply plugin: 'com.google.gms.google-services'\napply plugin: 'org.jetbrains.kotlin.android.extensions' \n</code></pre>\n"}, {"tags": ["kotlin", "cdi"], "answers": [{"tags": [], "owner": {"reputation": 1069, "user_id": 1242890, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3721ddf52058e3ee8162e483c0d8093e?s=128&d=identicon&r=PG", "display_name": "Marc von Renteln", "link": "https://stackoverflow.com/users/1242890/marc-von-renteln"}, "is_accepted": false, "score": 0, "last_activity_date": 1534494318, "last_edit_date": 1534494318, "creation_date": 1532943016, "answer_id": 51590894, "question_id": 51590623, "link": "https://stackoverflow.com/questions/51590623/pass-annotation-to-a-function-in-kotlin/51590894#51590894", "title": "Pass annotation to a function in Kotlin", "body": "<p>One could annotate a method or field with the annotation an get it per Reflection:</p>\n\n<p><code>this.javaClass.getMethod(\"annotatedMethod\").getAnnotation(MyAnnotation::class.java)</code></p>\n\n<p>Or According to Roland's suggestion the kotlin version of the above:</p>\n\n<p><code>MyClass::annotatedMethod.findAnnotation&lt;MyAnnotation&gt;()!!</code></p>\n\n<p>As suggested by Roland for CDI it is better to use <code>AnnotationLiteral</code> (see his post).</p>\n"}, {"comments": [{"owner": {"reputation": 1069, "user_id": 1242890, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3721ddf52058e3ee8162e483c0d8093e?s=128&d=identicon&r=PG", "display_name": "Marc von Renteln", "link": "https://stackoverflow.com/users/1242890/marc-von-renteln"}, "edited": false, "score": 0, "creation_date": 1534494372, "post_id": 51594185, "comment_id": 90733476, "body": "Thank you! AnnotationLiteral was exactly what I searched for!"}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "reply_to_user": {"reputation": 1069, "user_id": 1242890, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3721ddf52058e3ee8162e483c0d8093e?s=128&d=identicon&r=PG", "display_name": "Marc von Renteln", "link": "https://stackoverflow.com/users/1242890/marc-von-renteln"}, "edited": false, "score": 0, "creation_date": 1534497666, "post_id": 51594185, "comment_id": 90735279, "body": "You are welcome! Note, that I added also a question regarding implementation of <code>AnnotationLiteral</code> for cases where you need to specify custom values (e.g. to narrow which qualifier should be taken). If you don&#39;t require that you are lucky and <code>AnnotationLiteral</code> will work as is. If you do, then you may need to use a Java implementation as workaround for now as Kotlin doesn&#39;t seem to support it."}], "tags": [], "owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "is_accepted": true, "score": 2, "last_activity_date": 1534494431, "last_edit_date": 1534494431, "creation_date": 1532954387, "answer_id": 51594185, "question_id": 51590623, "link": "https://stackoverflow.com/questions/51590623/pass-annotation-to-a-function-in-kotlin/51594185#51594185", "title": "Pass annotation to a function in Kotlin", "body": "<p>When working with <code>CDI</code> you usually also have <a href=\"https://docs.oracle.com/javaee/7/api/javax/enterprise/util/AnnotationLiteral.html\" rel=\"nofollow noreferrer\"><code>AnnotationLiteral</code></a> available or at least you can implement something similar rather easy.</p>\n\n<p>If you want to select a class using your annotation the following should do the trick:</p>\n\n<pre><code>cdiInstance.select(MyClass::class.java, object : AnnotationLiteral&lt;MyAnnotation&gt;() {})\n</code></pre>\n\n<p>Or you may need to implement your specific <code>AnnotationLiteral</code>-class if you require a specific value. In Java that would work as follows:</p>\n\n<pre><code>class MyAnnotationLiteral extends AnnotationLiteral&lt;MyAnnotation&gt; implements MyAnnotation {\n    private String value;\n\n    public MyAnnotationLiteral(String value) {\n        this.value = value;\n    }\n    @Override\n    public String[] value() {\n        return new String[] { value };\n    }\n }\n</code></pre>\n\n<p>In Kotlin however, you can't implement the annotation and extend <code>AnnotationLiteral</code> or maybe I just did not see how (see also related question: <a href=\"https://stackoverflow.com/questions/51608924/implement-inherit-extend-annotation-in-kotlin\">Implement (/inherit/~extend) annotation in Kotlin</a>).</p>\n\n<p>If you rather want to continue using reflection to access the annotation then you should probably rather use the Kotlin reflection way instead:</p>\n\n<pre><code>ClassWithAnno::class.annotations\nClassWithAnno::methodWithAnno.annotations\n</code></pre>\n\n<p>Calling <code>filter</code>, etc. to get the <code>Annotation</code> you desire or if you know there is only one <code>Annotation</code> there, you can also just call the following (<code>findAnnotation</code> is an extension function on <code>KAnnotatedElement</code>):</p>\n\n<pre><code>ClassWithAnno::class.findAnnotation&lt;MyAnnotation&gt;()\nClassWithAnno::methodWithAnno.findAnnotation&lt;MyAnnotation&gt;()\n</code></pre>\n"}], "owner": {"reputation": 1069, "user_id": 1242890, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3721ddf52058e3ee8162e483c0d8093e?s=128&d=identicon&r=PG", "display_name": "Marc von Renteln", "link": "https://stackoverflow.com/users/1242890/marc-von-renteln"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 0, "accepted_answer_id": 51594185, "answer_count": 2, "score": 2, "last_activity_date": 1534494431, "creation_date": 1532942154, "last_edit_date": 1532954519, "question_id": 51590623, "link": "https://stackoverflow.com/questions/51590623/pass-annotation-to-a-function-in-kotlin", "title": "Pass annotation to a function in Kotlin", "body": "<p>How can I pass an annotion instance to a function?</p>\n\n<p>I would like to call the java method <code>AbstractCDI.select(Class&lt;T&gt; type, Annotation... qualifiers)</code>. But I don't know how to pass an annotation instance to this method. </p>\n\n<p>Calling the constructor like\n<code>cdiInstance.select(MyClass::javaClass, MyAnnotation())</code>\n is not allowed and the @Annotation-Syntax <code>cdiInstance.select(MyClass::javaClass, @MyAnnotation)</code> is not allowed as parameter, too. How can I archive this?</p>\n"}, {"tags": ["android", "android-studio", "data-binding", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 850, "user_id": 6588221, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9CLee.png?s=128&g=1", "display_name": "Konstantin Kuznetsov", "link": "https://stackoverflow.com/users/6588221/konstantin-kuznetsov"}, "is_accepted": false, "score": 0, "last_activity_date": 1540292691, "last_edit_date": 1540292691, "creation_date": 1540291666, "answer_id": 52947131, "question_id": 51590106, "link": "https://stackoverflow.com/questions/51590106/cannot-find-symbol-databindingcomponent-on-android-studio-3-3-canary-3-kotlin-pr/52947131#52947131", "title": "Cannot find symbol DataBindingComponent on Android Studio 3.3 Canary 3 Kotlin project", "body": "<p>I think it's kapt conflict. </p>\n\n<p>Try to turn off Dagger if it's possible and check errors from Room like this:</p>\n\n<pre><code>Fields annotated with @Relation cannot be constructor parameters. These values are fetched after the object is constructed.\n\nCannot find setter for field.\n\nCannot figure out how to save this field into database.\n</code></pre>\n\n<p>If it will not help, try to turn off libs with kapt's one by one and check the error log carefully.</p>\n\n<p>Check with <code>./gradlew app:dependencies</code> transitive dependencies, maybe problems with androidx.</p>\n\n<p>Also check <code>gradlew app:dependencies --configuration kapt</code> maybe you will find something suspicious</p>\n"}], "owner": {"reputation": 5398, "user_id": 1059954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/89278a3c15fa7305926cb1dbcf6950eb?s=128&d=identicon&r=PG", "display_name": "fish40", "link": "https://stackoverflow.com/users/1059954/fish40"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 380, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1542913336, "creation_date": 1532940309, "question_id": 51590106, "link": "https://stackoverflow.com/questions/51590106/cannot-find-symbol-databindingcomponent-on-android-studio-3-3-canary-3-kotlin-pr", "title": "Cannot find symbol DataBindingComponent on Android Studio 3.3 Canary 3 Kotlin project", "body": "<p>I just created a new project on Android Studio 3.3 Canary 3 with Kotlin enabled. Then I also enabled data binding, but I'm getting an error saying that it could not find the DataBindingComponent class.</p>\n\n<p>Here is my gradle file</p>\n\n<pre><code>buildscript {\n    apply from: 'versions.gradle'\n    addRepos(repositories)\n    dependencies {\n        classpath deps.android_gradle_plugin\n        classpath deps.kotlin.plugin\n        classpath deps.kotlin.allopen\n        classpath deps.navigation.safe_args_plugin\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n    repositories {\n        google()\n    }\n}\n\nallprojects {\n    addRepos(repositories)\n}\n\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n\n<p>My module gradle file:</p>\n\n<pre><code> apply plugin: 'com.android.application'\n\n    apply plugin: 'kotlin-android'\n\n    apply plugin: 'kotlin-android-extensions'\n\n    apply plugin: 'kotlin-kapt'\n\n    apply plugin: 'androidx.navigation.safeargs'\n\n\n    android {\n        compileSdkVersion build_versions.target_sdk\n        buildToolsVersion build_versions.build_tools\n        defaultConfig {\n            applicationId \"arca.advanced.mg.com.myapplication\"\n            minSdkVersion build_versions.min_sdk\n            targetSdkVersion build_versions.target_sdk\n            versionCode 1\n            versionName \"1.0\"\n            testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\n        }\n        buildTypes {\n            release {\n                minifyEnabled false\n                proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n            }\n        }\n        dataBinding {\n            enabled = true\n        }\n        compileOptions {\n            sourceCompatibility JavaVersion.VERSION_1_8\n            targetCompatibility JavaVersion.VERSION_1_8\n        }\n    }\n\n    dependencies {\n        implementation deps.support.app_compat\n        implementation deps.support.recyclerview\n        implementation deps.support.cardview\n        implementation deps.support.design\n        implementation deps.support.legacy\n        implementation deps.navigation.fragment_ktx\n        implementation deps.room.runtime\n        implementation deps.lifecycle.runtime\n        implementation deps.lifecycle.extensions\n        implementation deps.lifecycle.java8\n        implementation deps.retrofit.runtime\n        implementation deps.retrofit.gson\n        implementation deps.glide.runtime\n\n        implementation deps.dagger.runtime\n        implementation deps.dagger.android\n        implementation deps.dagger.android_support\n        implementation deps.constraint_layout\n        implementation deps.kotlin.stdlib\n\n        implementation deps.timber\n        implementation deps.rx.java\n        implementation deps.rx.android\n\n        kapt deps.dagger.android_support_compiler\n        kapt deps.dagger.compiler\n        kapt deps.room.compiler\n        kapt deps.lifecycle.compiler\n    }\n</code></pre>\n\n<p>my fragment file</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;layout xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt;\n\n    &lt;data&gt;\n\n        &lt;variable\n            name=\"viewModel\"\n            type=\"arca.advanced.mg.com.arca.ui.splash.SplashViewModel\" /&gt;\n\n    &lt;/data&gt;\n\n\n    &lt;RelativeLayout\n        android:id=\"@+id/activity_main\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:background=\"@color/colorPrimary\"\n        android:paddingBottom=\"@dimen/activity_vertical_margin\"\n        android:paddingLeft=\"@dimen/activity_horizontal_margin\"\n        android:paddingRight=\"@dimen/activity_horizontal_margin\"\n        android:paddingTop=\"@dimen/activity_vertical_margin\"&gt;\n\n        &lt;ImageView\n            android:layout_width=\"70dp\"\n            android:layout_height=\"70dp\"\n            android:layout_centerInParent=\"true\"\n            android:src=\"@mipmap/ic_launcher\" /&gt;\n    &lt;/RelativeLayout&gt;\n\n&lt;/layout&gt;\n</code></pre>\n\n<p>and here is my error </p>\n\n<p><a href=\"https://i.stack.imgur.com/eqBxs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eqBxs.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 0, "creation_date": 1532939718, "post_id": 51589903, "comment_id": 90145104, "body": "I think option <code>C</code> works if you put <code>: Unit</code> before the <code>where</code> clause. The syntax in option <code>B</code> is simply not valid Kotlin."}], "answers": [{"tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 3, "last_activity_date": 1532939727, "creation_date": 1532939727, "answer_id": 51589960, "question_id": 51589903, "link": "https://stackoverflow.com/questions/51589903/why-cant-i-define-t-where-t-charsequence-t-appendable-in-kotlin/51589960#51589960", "title": "Why can&#39;t I define &lt;T where T : CharSequence, T : Appendable&gt; in Kotlin?", "body": "<ol>\n<li><p>That's literally just what the syntax of the language is, multiple constraints have to be defined with <code>where</code>, and they have to be at the end of the function header, and not where single constraints go.</p></li>\n<li><p>Any explicit return types are also before the <code>where</code> constraints:</p>\n\n<pre><code>fun &lt;T&gt; ensureTrailingPeriod(seq: T): Unit where T : CharSequence, T : Appendable {\n    if (!seq.endsWith('.')) {\n        seq.append('.')\n    }\n}\n</code></pre></li>\n</ol>\n\n<p>For reference, you can find this in the <a href=\"http://kotlinlang.org/docs/reference/grammar.html#function\" rel=\"nofollow noreferrer\">Kotlin grammar</a> as well:</p>\n\n<pre><code>function (used by memberDeclaration, declaration, topLevelObject)\n  : modifiers \"fun\"\n      typeParameters?\n      (type \".\")?\n      SimpleName\n      typeParameters? valueParameters (\":\" type)?\n      typeConstraints\n      functionBody?\n  ;\n</code></pre>\n\n<p>This clearly tells you what order the different parts of a function declaration come in. First, there are modifiers (visibility, infix, etc), then the <code>fun</code> keyword, then type parameters, the receiver type in case the function is an extension, the name, the parameter list, the optional return type, and finally the type constraints before the body of the function.</p>\n"}], "owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 51589960, "answer_count": 1, "score": 1, "last_activity_date": 1532939888, "creation_date": 1532939521, "last_edit_date": 1532939888, "question_id": 51589903, "link": "https://stackoverflow.com/questions/51589903/why-cant-i-define-t-where-t-charsequence-t-appendable-in-kotlin", "title": "Why can&#39;t I define &lt;T where T : CharSequence, T : Appendable&gt; in Kotlin?", "body": "<p>Code A define a generic <code>fun ensureTrailingPeriod</code> with parameter restrain.</p>\n\n<p>1: I think Code A is hard to understand, and maybe Code B is good, right?</p>\n\n<p>2: And more, I think that <code>ensureTrailingPeriod</code> return <code>Unit</code> with Code A, but Code C is wrong, how can I fix it?</p>\n\n<p><strong>Code A</strong></p>\n\n<pre><code>fun &lt;T&gt; ensureTrailingPeriod(seq: T)\n    where T : CharSequence, T : Appendable{\n    if (!seq.endsWith('.')) {\n        seq.append('.')\n    }\n}\n</code></pre>\n\n<p><strong>Code B</strong></p>\n\n<pre><code>fun &lt;T where T : CharSequence, T : Appendable&gt; ensureTrailingPeriod1(seq: T)  {\n    if (!seq.endsWith('.')) {\n        seq.append('.')\n    }\n}\n</code></pre>\n\n<p><strong>Code C</strong></p>\n\n<pre><code>fun &lt;T&gt; ensureTrailingPeriod(seq: T)\n     where T : CharSequence, T : Appendable  :Unit{\n       if (!seq.endsWith('.')) {\n         seq.append('.')\n     }\n}\n</code></pre>\n"}, {"tags": ["kotlin", "android-softkeyboard", "inputmethodmanager"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8959091"}, "edited": false, "score": 1, "creation_date": 1532939482, "post_id": 51589823, "comment_id": 90144997, "body": "remove <code>!!</code> so that view will be null and finish will be called"}, {"owner": {"reputation": 2476, "user_id": 7664651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8561e9319f807c4f93da2d9919825300?s=128&d=identicon&r=PG&f=1", "display_name": "Saikrishna Rajaraman", "link": "https://stackoverflow.com/users/7664651/saikrishna-rajaraman"}, "edited": false, "score": 0, "creation_date": 1532939574, "post_id": 51589823, "comment_id": 90145036, "body": "you&#39;re making use of <b>!!</b> . This will throw NPE if the currentFocus is null. [Null Safety] (<a href=\"https://kotlinlang.org/docs/reference/null-safety.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/null-safety.html</a>)"}], "answers": [{"tags": [], "owner": {"reputation": 2993, "user_id": 4939853, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/wL0Q5.png?s=128&g=1", "display_name": "Oreste Viron", "link": "https://stackoverflow.com/users/4939853/oreste-viron"}, "is_accepted": false, "score": 1, "last_activity_date": 1532958392, "last_edit_date": 1532958392, "creation_date": 1532939518, "answer_id": 51589902, "question_id": 51589823, "link": "https://stackoverflow.com/questions/51589823/nullpointerexception-in-my-kotlin-code-despite-safeguards/51589902#51589902", "title": "NullPointerException in my Kotlin code despite safeguards", "body": "<p>Are you sure you clearly understand how <code>!!</code> operator works ? If <code>this.currentFocus</code> is null, it indicates it should throws a nullpointerexception :\n<a href=\"https://kotlinlang.org/docs/reference/null-safety.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/null-safety.html</a></p>\n\n<p>Remove the <code>!!</code>, it should work better.</p>\n"}, {"tags": [], "owner": {"reputation": 1736, "user_id": 2688304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03f4a4c53dcfe9828b0d13726a683f49?s=128&d=identicon&r=PG", "display_name": "shiftpsh", "link": "https://stackoverflow.com/users/2688304/shiftpsh"}, "is_accepted": false, "score": 2, "last_activity_date": 1532939554, "creation_date": 1532939554, "answer_id": 51589916, "question_id": 51589823, "link": "https://stackoverflow.com/questions/51589823/nullpointerexception-in-my-kotlin-code-despite-safeguards/51589916#51589916", "title": "NullPointerException in my Kotlin code despite safeguards", "body": "<p><code>!!</code> operator is called the <strong>Not-null assertion operator</strong> - this will throw NPE if <code>currentFocus</code> is null. Since your <code>view</code> can be <code>null</code>, it's safe to drop the <code>!!</code> operator.</p>\n\n<p>Read:</p>\n\n<ul>\n<li><a href=\"https://kotlinlang.org/docs/reference/null-safety.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/null-safety.html</a></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 12218, "user_id": 1540818, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oZ1EX.jpg?s=128&g=1", "display_name": "Joffrey", "link": "https://stackoverflow.com/users/1540818/joffrey"}, "reply_to_user": {"reputation": 454, "user_id": 3410835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NRX1V.jpg?s=128&g=1", "display_name": "K Pradeep Kumar Reddy", "link": "https://stackoverflow.com/users/3410835/k-pradeep-kumar-reddy"}, "edited": false, "score": 0, "creation_date": 1601475919, "post_id": 51595546, "comment_id": 113420764, "body": "The safe dereference operator itself should never throw an NPE, but maybe it&#39;s something else around it that&#39;s causing the NPE, but we would need to see the code to be sure. Please ask another question for this"}], "tags": [], "owner": {"reputation": 12218, "user_id": 1540818, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oZ1EX.jpg?s=128&g=1", "display_name": "Joffrey", "link": "https://stackoverflow.com/users/1540818/joffrey"}, "is_accepted": true, "score": 0, "last_activity_date": 1532959076, "last_edit_date": 1532959076, "creation_date": 1532958714, "answer_id": 51595546, "question_id": 51589823, "link": "https://stackoverflow.com/questions/51589823/nullpointerexception-in-my-kotlin-code-despite-safeguards/51595546#51595546", "title": "NullPointerException in my Kotlin code despite safeguards", "body": "<p>The point of the <code>!!</code> operator is to convert a value of nullable type to the non-nullable equivalent while actively ensuring that the value is indeed not null (and throwing an NPE otherwise).</p>\n\n<p>Here is what your code is actually doing:</p>\n\n<pre><code>val nonNullView: View = this.currentFocus!! // crashes if null\nval view: View? = nonNullView\n</code></pre>\n\n<p>As you can see, <code>!!</code> has to throw an exception if the value is null, because a null value cannot be of type <code>View</code> (non nullable).</p>\n\n<p>In your case, you end up with a nullable type <code>View?</code> anyway, so you don't need the extra temporary restriction imposed by <code>!!</code>, so you may as well just remove it:</p>\n\n<pre><code>val view: View? = this.currentFocus\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 7586495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c35c04f2e2cc95421066eabe0620fee7?s=128&d=identicon&r=PG&f=1", "display_name": "Javallion", "link": "https://stackoverflow.com/users/7586495/javallion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 272, "favorite_count": 0, "accepted_answer_id": 51595546, "answer_count": 3, "score": 1, "last_activity_date": 1532959076, "creation_date": 1532939187, "question_id": 51589823, "link": "https://stackoverflow.com/questions/51589823/nullpointerexception-in-my-kotlin-code-despite-safeguards", "title": "NullPointerException in my Kotlin code despite safeguards", "body": "<p>The code snippet below is from my onOptionsItemSelected function. Lines 2-5 below are suppose to hide the soft keyboard if it is showing OR call the activity's finish function otherwise. </p>\n\n<p>I got this piece of code from one of the answers to 'How to Hide a SoftKeyboard' on stack overflow. It works fine on my phone but when I recently submitted my app for internal testing on playstore, I found out that it is throwing NPE sometimes. Can someone explain the logic behind why this might be happening please?</p>\n\n<pre><code>R.id.done -&gt; { \n  val view:View? = this.currentFocus!! // throws null pointer exception\n  val imm = getSystemService(Context.INPUT_METHOD_SERVICE) as InputMethodManager \n  if (bool &amp;&amp; view!=null) { \n    imm.hideSoftInputFromWindow(view.windowToken, 0) \n  } else{ \n    finish() \n  } \n  return true \n</code></pre>\n"}, {"tags": ["android", "html", "kotlin", "jsoup"], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 10132533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28033c4acbecc0682db1a25eaee66e52?s=128&d=identicon&r=PG&f=1", "display_name": "Javad", "link": "https://stackoverflow.com/users/10132533/javad"}, "edited": false, "score": 0, "creation_date": 1532937470, "post_id": 51589287, "comment_id": 90144008, "body": "Sorry I didn&#39;t get what you mean by &quot;add your preferred new line character at the end&quot;"}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "reply_to_user": {"reputation": 137, "user_id": 10132533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28033c4acbecc0682db1a25eaee66e52?s=128&d=identicon&r=PG&f=1", "display_name": "Javad", "link": "https://stackoverflow.com/users/10132533/javad"}, "edited": false, "score": 0, "creation_date": 1532937512, "post_id": 51589287, "comment_id": 90144032, "body": "Depending on how you print it, you may need to add a new line character (<code>\\n</code> or <code>\\r\\n</code>, or...) yourself, as your <code>li</code>-text does not contain any."}, {"owner": {"reputation": 137, "user_id": 10132533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28033c4acbecc0682db1a25eaee66e52?s=128&d=identicon&r=PG&f=1", "display_name": "Javad", "link": "https://stackoverflow.com/users/10132533/javad"}, "edited": false, "score": 0, "creation_date": 1532937622, "post_id": 51589287, "comment_id": 90144096, "body": "I store <code>val text</code> in database and then retrieve it from database and show it in a text view."}], "tags": [], "owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "is_accepted": false, "score": 0, "last_activity_date": 1532938159, "last_edit_date": 1532938159, "creation_date": 1532937081, "answer_id": 51589287, "question_id": 51588591, "link": "https://stackoverflow.com/questions/51588591/extract-the-text-of-same-html-tags-in-separate-lines-with-jsoup-on-android/51589287#51589287", "title": "Extract the text of same html tags in separate lines with JSoup on Android", "body": "<p>Your <code>li</code>-element does not contain a new line and that is why the text just gets appended at the end if you print it.</p>\n\n<p>And you are actually using <code>text()</code> on the <code>Elements</code> which are returned by your <code>select</code>. You either need to map each single entry to text first (<code>eachText()</code> or <code>map { it.text() }</code>) and append all those returned to your database or print them directly using <code>println</code> or add your preferred new line character at the end before printing it. By the way you didn't mention how you print the text, however I think that's not that important to solve your problem.</p>\n"}, {"comments": [{"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 1, "creation_date": 1532938220, "post_id": 51589442, "comment_id": 90144402, "body": "Should be <code>.forEach(::println)</code>. Just saw too late that actually the <code>forEach</code> or <code>map</code> or <code>eachText</code> was missing :-)"}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1532940118, "post_id": 51589442, "comment_id": 90145321, "body": "well... writing it on the fly <i>and</i> putting the links on it... good enough ;-)"}], "tags": [], "owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "is_accepted": true, "score": 1, "last_activity_date": 1532939992, "last_edit_date": 1532939992, "creation_date": 1532937643, "answer_id": 51589442, "question_id": 51588591, "link": "https://stackoverflow.com/questions/51588591/extract-the-text-of-same-html-tags-in-separate-lines-with-jsoup-on-android/51589442#51589442", "title": "Extract the text of same html tags in separate lines with JSoup on Android", "body": "<p>Your <code>element</code> object is actually an <a href=\"https://jsoup.org/apidocs/org/jsoup/select/Elements.html#select-java.lang.String-\" rel=\"nofollow noreferrer\"><code>Elements</code></a> object, which has a <a href=\"https://jsoup.org/apidocs/org/jsoup/select/Elements.html#eachText--\" rel=\"nofollow noreferrer\"><code>eachText()</code></a> method returning a <code>List</code> containing the text for each of the matched elements. </p>\n\n<p>On the other hand, the <a href=\"https://jsoup.org/apidocs/org/jsoup/select/Elements.html#text--\" rel=\"nofollow noreferrer\"><code>text()</code></a> method returns \"the combined text of all the matched elements\" (which has no line break as @Roland said, that's why you get all the elements on 1 line).</p>\n\n<p>So, in general you should do something like:</p>\n\n<pre><code>doc.select(\"xxx\").eachText().forEach(::println)\n</code></pre>\n"}], "owner": {"reputation": 137, "user_id": 10132533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28033c4acbecc0682db1a25eaee66e52?s=128&d=identicon&r=PG&f=1", "display_name": "Javad", "link": "https://stackoverflow.com/users/10132533/javad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "accepted_answer_id": 51589442, "answer_count": 2, "score": 1, "last_activity_date": 1532939992, "creation_date": 1532934170, "last_edit_date": 1532937185, "question_id": 51588591, "link": "https://stackoverflow.com/questions/51588591/extract-the-text-of-same-html-tags-in-separate-lines-with-jsoup-on-android", "title": "Extract the text of same html tags in separate lines with JSoup on Android", "body": "<p>I have this html code:</p>\n\n<pre><code>&lt;li itemprop=\"something\"&gt;Text 1&lt;/li&gt;&lt;li itemprop=\"something\"&gt;Text 2&lt;/li&gt;&lt;li itemprop=\"something\"&gt;Text 3&lt;/li&gt;&lt;li itemprop=\"something\"&gt;Text 4&lt;/li&gt;&lt;li itemprop=\"something\"&gt;Text 5 &lt;/li&gt;&lt;li itemprop=\"something\"&gt;Text 6 &lt;/li&gt;\n</code></pre>\n\n<p>When I use the following code to extract the text, it gives me them continuous.</p>\n\n<pre><code>val doc = Jsoup.parse(html)\nval element = doc.select(\"li[itemprop=something]\")\nval text = element.text()\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>Text 1 Text 2 Text 3 Text 4 Text 5 Text 6\n</code></pre>\n\n<p>but I want them in separate lines:</p>\n\n<pre><code>Text 1\nText 2\nText 3\nText 4\nText 5\nText 6\n</code></pre>\n\n<p>Do you guys know how is it possible? </p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 10859, "user_id": 3710865, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oROuW.jpg?s=128&g=1", "display_name": "sasikumar", "link": "https://stackoverflow.com/users/3710865/sasikumar"}, "edited": false, "score": 0, "creation_date": 1532932268, "post_id": 51587994, "comment_id": 90141443, "body": "That case what type you are getting?"}, {"owner": {"reputation": 4522, "user_id": 101337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fae6fc1741623270471a080b705b1fa0?s=128&d=identicon&r=PG", "display_name": "Alexander Egger", "link": "https://stackoverflow.com/users/101337/alexander-egger"}, "edited": false, "score": 0, "creation_date": 1532934555, "post_id": 51587994, "comment_id": 90142485, "body": "Which REST library are you using?"}, {"owner": {"reputation": 6703, "user_id": 1797950, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/1KyYn.jpg?s=128&g=1", "display_name": "crgarridos", "link": "https://stackoverflow.com/users/1797950/crgarridos"}, "edited": false, "score": 1, "creation_date": 1532940274, "post_id": 51587994, "comment_id": 90145401, "body": "what is the signature of <code>post</code>?"}, {"owner": {"reputation": 379, "user_id": 3341096, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1da90e0c1bb0883b7ef40fa0a945ddb2?s=128&d=identicon&r=PG&f=1", "display_name": "zenn1337", "link": "https://stackoverflow.com/users/3341096/zenn1337"}, "edited": false, "score": 1, "creation_date": 1532952462, "post_id": 51587994, "comment_id": 90152799, "body": "<code>Type erasure</code> is the case"}, {"owner": {"reputation": 12218, "user_id": 1540818, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oZ1EX.jpg?s=128&g=1", "display_name": "Joffrey", "link": "https://stackoverflow.com/users/1540818/joffrey"}, "edited": false, "score": 0, "creation_date": 1532959231, "post_id": 51587994, "comment_id": 90157223, "body": "Is it a compile error or a runtime one?"}], "answers": [{"tags": [], "owner": {"reputation": 6870, "user_id": 1041442, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/99d5dced06046bd68560dc8eb4caa61f?s=128&d=identicon&r=PG", "display_name": "Jilles van Gurp", "link": "https://stackoverflow.com/users/1041442/jilles-van-gurp"}, "is_accepted": false, "score": 0, "last_activity_date": 1532953590, "creation_date": 1532953590, "answer_id": 51593964, "question_id": 51587994, "link": "https://stackoverflow.com/questions/51587994/how-do-i-specify-the-proper-type-to-return-in-kotlin/51593964#51593964", "title": "How do I specify the proper type to return in Kotlin?", "body": "<p>You could try removing the generic type from <code>post&lt;List&lt;ApvFinancialMethods&gt;&gt;</code>. I've found that the intellij converter erroneously adds these in a lot of places where the type can be inferred by the compiler. This should be redundant in this case and clearly kotlin's <code>List</code> does not match the java one.</p>\n"}], "owner": {"reputation": 19796, "user_id": 968801, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/3cbbea15b9c0b8535c24ac4f56e16413?s=128&d=identicon&r=PG", "display_name": "jhamm", "link": "https://stackoverflow.com/users/968801/jhamm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1532953590, "creation_date": 1532931502, "last_edit_date": 1532952984, "question_id": 51587994, "link": "https://stackoverflow.com/questions/51587994/how-do-i-specify-the-proper-type-to-return-in-kotlin", "title": "How do I specify the proper type to return in Kotlin?", "body": "<p>I have a method that returns a list of a certain type</p>\n\n<pre><code>  fun update(\n    financialMethods: List&lt;FinancialMethods&gt;\n  ): CompletableFuture&lt;List&lt;ApvFinancialMethods&gt;&gt; {\n    return post&lt;List&lt;ApvFinancialMethods&gt;&gt;(\n      \"/apv-financial-methods\",\n      financialMethods,\n      List::class.java\n    )\n  }\n</code></pre>\n\n<p>The lib being used is just a wrapper over <code>restTemplate</code> . </p>\n\n<pre><code>  protected &lt;T&gt; CompletableFuture&lt;T&gt; post(String path, Object obj, Class&lt;T&gt; clazz, Object... uriVariables) {\n    return post(path, obj, clazz, new RequestParams(), uriVariables);\n  }\n\n\n  protected &lt;T&gt; CompletableFuture&lt;T&gt; post(String path, Object obj, Class&lt;T&gt; clazz, RequestParams requestParams, Object... uriVariables) {\n\n    String paramString = getParamString(requestParams, true, true);\n\n    T t = cubsWsRestTemplate.exchange(path + paramString, HttpMethod.POST, new HttpEntity&lt;&gt;(obj, headers), clazz, uriVariables).getBody();\n\n    return CompletableFuture.completedFuture(t);\n  }\n</code></pre>\n\n<p>But I have a problem with my <code>List::class.java</code>.  The error I am getting is <code>Type inference failed. Expected type mismatch</code>.  If I change all of my lists to <code>List&lt;*&gt;</code>, then it works, but the type I get out is obviously not what I want.  What do I change <code>List::class.java</code> to to make my method work?</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 2451, "user_id": 4824088, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFSla.png?s=128&g=1", "display_name": "Mohamed Mohaideen AH", "link": "https://stackoverflow.com/users/4824088/mohamed-mohaideen-ah"}, "edited": false, "score": 0, "creation_date": 1532933788, "post_id": 51587976, "comment_id": 90142103, "body": "Y not you try <a href=\"https://developer.android.com/reference/android/support/design/widget/TextInputEditText\" rel=\"nofollow noreferrer\">TextInputEditText</a> in android to acheive same behaviour. <a href=\"https://medium.com/@Gryzor/styling-textinputlayout-and-textinputedittext-on-android-9ab786bef7af\" rel=\"nofollow noreferrer\">Reference</a>."}, {"owner": {"reputation": 33, "user_id": 6025956, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M5P9o.jpg?s=128&g=1", "display_name": "Carlos C&#225;ceres Gonz&#225;lez", "link": "https://stackoverflow.com/users/6025956/carlos-c%c3%a1ceres-gonz%c3%a1lez"}, "reply_to_user": {"reputation": 2451, "user_id": 4824088, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFSla.png?s=128&g=1", "display_name": "Mohamed Mohaideen AH", "link": "https://stackoverflow.com/users/4824088/mohamed-mohaideen-ah"}, "edited": false, "score": 0, "creation_date": 1532934049, "post_id": 51587976, "comment_id": 90142224, "body": "It&#39;s because I can&#39;t customize it the way I want it. So I decided to build it by myself."}, {"owner": {"reputation": 33, "user_id": 6025956, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M5P9o.jpg?s=128&g=1", "display_name": "Carlos C&#225;ceres Gonz&#225;lez", "link": "https://stackoverflow.com/users/6025956/carlos-c%c3%a1ceres-gonz%c3%a1lez"}, "reply_to_user": {"reputation": 2451, "user_id": 4824088, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFSla.png?s=128&g=1", "display_name": "Mohamed Mohaideen AH", "link": "https://stackoverflow.com/users/4824088/mohamed-mohaideen-ah"}, "edited": false, "score": 0, "creation_date": 1533105991, "post_id": 51587976, "comment_id": 90218250, "body": "Can anybody help me with this? I am stuck :("}, {"owner": {"reputation": 121, "user_id": 6754691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff12bac29b6e4d9ec2dc772cffcc826a?s=128&d=identicon&r=PG&f=1", "display_name": "Sonika", "link": "https://stackoverflow.com/users/6754691/sonika"}, "edited": false, "score": 0, "creation_date": 1578274395, "post_id": 51587976, "comment_id": 105375470, "body": "Did you find the solution for this? I am facing the same issue. View is creating but not showing up in the editor window."}, {"owner": {"reputation": 33, "user_id": 6025956, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M5P9o.jpg?s=128&g=1", "display_name": "Carlos C&#225;ceres Gonz&#225;lez", "link": "https://stackoverflow.com/users/6025956/carlos-c%c3%a1ceres-gonz%c3%a1lez"}, "edited": false, "score": 0, "creation_date": 1579767159, "post_id": 51587976, "comment_id": 105878382, "body": "I do not. I&#39;m still facing this error after a year o so. I changed it to different components ..."}], "answers": [{"tags": [], "owner": {"reputation": 8918, "user_id": 2356570, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/3eFoq.jpg?s=128&g=1", "display_name": "capt.swag", "link": "https://stackoverflow.com/users/2356570/capt-swag"}, "is_accepted": true, "score": 1, "last_activity_date": 1598427358, "last_edit_date": 1598427358, "creation_date": 1598170207, "answer_id": 63544754, "question_id": 51587976, "link": "https://stackoverflow.com/questions/51587976/android-kotlin-custom-view-not-showing-right-in-design-editor/63544754#63544754", "title": "Android Kotlin - Custom View not showing right in Design editor", "body": "<p>Late reply.</p>\n<p>This has to do something with your <code>@JvmOverloads</code>.</p>\n<p>You can read more about that here: <a href=\"https://medium.com/@mmlodawski/https-medium-com-mmlodawski-do-not-always-trust-jvmoverloads-5251f1ad2cfe\" rel=\"nofollow noreferrer\">https://medium.com/@mmlodawski/https-medium-com-mmlodawski-do-not-always-trust-jvmoverloads-5251f1ad2cfe</a></p>\n<p>I was also trying to create a custom EditText and faced the same problem. I was also using <code>@JvmOverloads</code>. After going through this article, I changed it to the secondary constructor in Kotlin, and it started working right away.</p>\n"}], "owner": {"reputation": 33, "user_id": 6025956, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M5P9o.jpg?s=128&g=1", "display_name": "Carlos C&#225;ceres Gonz&#225;lez", "link": "https://stackoverflow.com/users/6025956/carlos-c%c3%a1ceres-gonz%c3%a1lez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 974, "favorite_count": 0, "accepted_answer_id": 63544754, "answer_count": 1, "score": 1, "last_activity_date": 1598427358, "creation_date": 1532931435, "last_edit_date": 1532933318, "question_id": 51587976, "link": "https://stackoverflow.com/questions/51587976/android-kotlin-custom-view-not-showing-right-in-design-editor", "title": "Android Kotlin - Custom View not showing right in Design editor", "body": "<p>The problem is this. I build a custom edit text view. It has a textView and an editText.</p>\n\n<p>This is how it looks like:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ghAIF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ghAIF.png\" alt=\"enter image description here\"></a>\nThis is the class that manages the custom editText:</p>\n\n<pre><code>class CustomEditText @JvmOverloads constructor(\n        context: Context,\n        attrs: AttributeSet? = null,\n        defStyle: Int = 0\n) : ConstraintLayout(context,attrs, defStyle) {\n    init {\n        LayoutInflater.from(context).inflate(R.layout.custom_edit_text, this, true)\n\n        // Set invisible by default. This label will be shown if the user enter text into the EditText\n        CustomEditText_Title.visibility = View.INVISIBLE\n\n        CustomEditText_EditText.addTextChangedListener(object : TextWatcher {\n            override fun afterTextChanged(s: Editable?) {}\n\n            override fun beforeTextChanged(s: CharSequence?, start: Int, count: Int, after: Int) {}\n\n            override fun onTextChanged(s: CharSequence?, start: Int, before: Int, count: Int) {\n                if (count &gt; 0) {\n                    CustomEditText_Title.visibility = View.VISIBLE\n                } else {\n                    CustomEditText_Title.visibility = View.INVISIBLE\n                }\n            }\n        })\n\n        attrs?.let {\n            val typedArray = context.obtainStyledAttributes(it, R.styleable.custom_edit_text_attributes, 0, 0)\n\n            val title = resources.getText(typedArray.getResourceId(R.styleable.custom_edit_text_attributes_custom_edit_text_title, R.string.custom_edittext_default_title))\n            val hint = resources.getText(typedArray.getResourceId(R.styleable.custom_edit_text_attributes_custom_edit_text_hint, R.string.custom_edittext_default_hint))\n            val input_type = resources.getText(typedArray.getResourceId(R.styleable.custom_edit_text_attributes_custom_edit_text_input_type, R.string.custom_edittext_input_type_text))\n\n            CustomEditText_Title.text = title\n            CustomEditText_EditText.hint = hint\n\n            when(input_type) {\n                \"0\" -&gt; CustomEditText_EditText.inputType = InputType.TYPE_CLASS_TEXT\n                \"1\" -&gt; CustomEditText_EditText.inputType = InputType.TYPE_CLASS_NUMBER or InputType.TYPE_NUMBER_VARIATION_NORMAL\n                \"2\" -&gt; CustomEditText_EditText.inputType = InputType.TYPE_CLASS_TEXT or InputType.TYPE_TEXT_VARIATION_EMAIL_ADDRESS\n                \"3\" -&gt; {\n                    CustomEditText_EditText.inputType = InputType.TYPE_CLASS_TEXT or InputType.TYPE_TEXT_VARIATION_PASSWORD\n\n                    val typeface = ResourcesCompat.getFont(context, R.font.gothamrnd_book)\n                    CustomEditText_EditText.typeface = typeface\n                }\n            }\n        }\n    }\n\n}\n</code></pre>\n\n<p>In the constructor, I made a workaround to set the inputType for the editText. This is because I could not figure it out how to use an android:inputType in styleable attributes (I try many different options but all of them give as a result an inflate error).</p>\n\n<p>The problem is this:</p>\n\n<p>I use a string to configure the inputType:</p>\n\n<pre><code>when(input_type) {\n                    \"0\" -&gt; CustomEditText_EditText.inputType = InputType.TYPE_CLASS_TEXT\n                    \"1\" -&gt; CustomEditText_EditText.inputType = InputType.TYPE_CLASS_NUMBER or InputType.TYPE_NUMBER_VARIATION_NORMAL\n                    \"2\" -&gt; CustomEditText_EditText.inputType = InputType.TYPE_CLASS_TEXT or InputType.TYPE_TEXT_VARIATION_EMAIL_ADDRESS\n                    \"3\" -&gt; {\n                        CustomEditText_EditText.inputType = InputType.TYPE_CLASS_TEXT or InputType.TYPE_TEXT_VARIATION_PASSWORD\n\n                        val typeface = ResourcesCompat.getFont(context, R.font.gothamrnd_book)\n                        CustomEditText_EditText.typeface = typeface\n                    }\n                }\n</code></pre>\n\n<p>But if a choose the \"3\" type, which is password type in the Design view, it shows wrong. It uses all the screen, no the designated area.\nIf I change it, for example, to text type, it shows right.</p>\n\n<p>I'm using Kotlin and minimum SDK 21.</p>\n\n<p>Do anyone know why could this be happening?</p>\n\n<p>Thanks guys!!</p>\n"}, {"tags": ["android", "android-fragments", "kotlin", "android-imageview", "android-scrollview"], "comments": [{"owner": {"reputation": 577, "user_id": 6340019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0869bedbc3571d269e43f43bf2915174?s=128&d=identicon&r=PG&f=1", "display_name": "VishnuSP", "link": "https://stackoverflow.com/users/6340019/vishnusp"}, "edited": false, "score": 0, "creation_date": 1532931731, "post_id": 51587950, "comment_id": 90141186, "body": "You are setting the Progress as 5 in <code>onCreate</code> first itself. So it will never go to the if case there, right? Do you dynamically change the progress later?"}, {"owner": {"reputation": 1001, "user_id": 5658251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-snphfvZWF0s/AAAAAAAAAAI/AAAAAAAAEMU/VcbwF479mRE/photo.jpg?sz=128", "display_name": "Eswar", "link": "https://stackoverflow.com/users/5658251/eswar"}, "reply_to_user": {"reputation": 577, "user_id": 6340019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0869bedbc3571d269e43f43bf2915174?s=128&d=identicon&r=PG&f=1", "display_name": "VishnuSP", "link": "https://stackoverflow.com/users/6340019/vishnusp"}, "edited": false, "score": 0, "creation_date": 1532931928, "post_id": 51587950, "comment_id": 90141283, "body": "@VishnuSP True. But I am an error of KotlinNullPointerException at the if condition case. Moreover, I will be setting the progress dynamically but just to check I have done it this way and I have found that I am unable to get the scrollview front and hide the imageview. The other problems are that the progress is not shown and the I am able to scroll even when the imageview is in the front."}, {"owner": {"reputation": 577, "user_id": 6340019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0869bedbc3571d269e43f43bf2915174?s=128&d=identicon&r=PG&f=1", "display_name": "VishnuSP", "link": "https://stackoverflow.com/users/6340019/vishnusp"}, "edited": false, "score": 0, "creation_date": 1532932440, "post_id": 51587950, "comment_id": 90141511, "body": "NPE is because your progress_progressbar2 is an optional. You can use the elvis operator to handle it. Can you  please share your layout also?"}, {"owner": {"reputation": 1001, "user_id": 5658251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-snphfvZWF0s/AAAAAAAAAAI/AAAAAAAAEMU/VcbwF479mRE/photo.jpg?sz=128", "display_name": "Eswar", "link": "https://stackoverflow.com/users/5658251/eswar"}, "reply_to_user": {"reputation": 577, "user_id": 6340019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0869bedbc3571d269e43f43bf2915174?s=128&d=identicon&r=PG&f=1", "display_name": "VishnuSP", "link": "https://stackoverflow.com/users/6340019/vishnusp"}, "edited": false, "score": 0, "creation_date": 1532932777, "post_id": 51587950, "comment_id": 90141659, "body": "@VishnuSP I have added the layouts as well. I solved the NPE by removing the &quot;!!&quot; and simply using &quot;==&quot; operator."}], "answers": [{"comments": [{"owner": {"reputation": 1001, "user_id": 5658251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-snphfvZWF0s/AAAAAAAAAAI/AAAAAAAAEMU/VcbwF479mRE/photo.jpg?sz=128", "display_name": "Eswar", "link": "https://stackoverflow.com/users/5658251/eswar"}, "edited": false, "score": 0, "creation_date": 1532933636, "post_id": 51588386, "comment_id": 90142033, "body": "I have already tried this, Nevertheless I tried it again and the problem still persists."}, {"owner": {"reputation": 577, "user_id": 6340019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0869bedbc3571d269e43f43bf2915174?s=128&d=identicon&r=PG&f=1", "display_name": "VishnuSP", "link": "https://stackoverflow.com/users/6340019/vishnusp"}, "reply_to_user": {"reputation": 1001, "user_id": 5658251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-snphfvZWF0s/AAAAAAAAAAI/AAAAAAAAEMU/VcbwF479mRE/photo.jpg?sz=128", "display_name": "Eswar", "link": "https://stackoverflow.com/users/5658251/eswar"}, "edited": false, "score": 0, "creation_date": 1533012340, "post_id": 51588386, "comment_id": 90176526, "body": "Please share a screenshot of the issue."}, {"owner": {"reputation": 1001, "user_id": 5658251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-snphfvZWF0s/AAAAAAAAAAI/AAAAAAAAEMU/VcbwF479mRE/photo.jpg?sz=128", "display_name": "Eswar", "link": "https://stackoverflow.com/users/5658251/eswar"}, "edited": false, "score": 0, "creation_date": 1533014355, "post_id": 51588386, "comment_id": 90177052, "body": "Thank you bro. I figured it out. I&#39;ll write it as the answer."}], "tags": [], "owner": {"reputation": 577, "user_id": 6340019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0869bedbc3571d269e43f43bf2915174?s=128&d=identicon&r=PG&f=1", "display_name": "VishnuSP", "link": "https://stackoverflow.com/users/6340019/vishnusp"}, "is_accepted": false, "score": -1, "last_activity_date": 1532933354, "creation_date": 1532933354, "answer_id": 51588386, "question_id": 51587950, "link": "https://stackoverflow.com/questions/51587950/hide-scrollview-behind-imageview-and-vice-versa-in-android/51588386#51588386", "title": "Hide Scrollview behind Imageview and vice-versa in android", "body": "<pre><code>val currentProgress = progress_progressbar2?.progress ?: 0\nif (currentProgress == 0){\n    started_image?.visibility = VISIBLE\n    progress_scrollview?.visibilty = GONE\n} else {\n    started_image?.visibility = GONE\n    progress_scrollview?.visibilty = VISIBLE\n    navigation_header_container?.setImageResource(R.drawable.header_pink)\n}\n</code></pre>\n\n<p>Instead of <code>bringToFront</code> you manage it using the <code>visibility</code> of the views. </p>\n\n<p>Android Documentation : <a href=\"https://developer.android.com/reference/android/view/View.html#setVisibility(int)\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/view/View.html#setVisibility(int)</a></p>\n\n<p>Try this out</p>\n"}, {"tags": [], "owner": {"reputation": 1001, "user_id": 5658251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-snphfvZWF0s/AAAAAAAAAAI/AAAAAAAAEMU/VcbwF479mRE/photo.jpg?sz=128", "display_name": "Eswar", "link": "https://stackoverflow.com/users/5658251/eswar"}, "is_accepted": true, "score": 0, "last_activity_date": 1533015018, "creation_date": 1533015018, "answer_id": 51606007, "question_id": 51587950, "link": "https://stackoverflow.com/questions/51587950/hide-scrollview-behind-imageview-and-vice-versa-in-android/51606007#51606007", "title": "Hide Scrollview behind Imageview and vice-versa in android", "body": "<p>Fragments don't create the view in <code>OnCreate</code> unlike the Activity. The same can be understood through the life-cycle of a fragment. Moreover, this is one of the major differences between an activity life-cycle and a fragment life-cycle. So, instead of assigning the values in the <code>OnCreate</code>, it should be done in <code>OnViewCreated</code>.</p>\n\n<p>The code snippet could be modified to:</p>\n\n<pre><code>class ProgressFragment : Fragment() {\n\nval TAG = \"ProgressFragment\"\noverride fun onCreateView(inflater: LayoutInflater, container: ViewGroup?,\n                          savedInstanceState: Bundle?): View? {\n    // Inflate the layout for this fragment\n    return inflater.inflate(R.layout.fragment_progress, container, false)\n}\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n}\n\noverride fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n    super.onViewCreated(view, savedInstanceState)\n    progress_progressbar2?.setProgress(12)\n    progress_progressbar2?.max=15\n    val currentProgress = progress_progressbar2?.progress ?: 0\n    if (currentProgress == 0){\n        started_image?.visibility = View.VISIBLE\n        progress_scrollview?.visibility = View.GONE\n    } else {\n        started_image?.visibility = View.GONE\n        progress_scrollview?.visibility = View.VISIBLE\n        navigation_header_container?.setImageResource(R.drawable.header_pink)\n    }\n  }\n}\n</code></pre>\n\n<p>The condition and static/dynamic progress assignment can be done in the <code>OnResume</code> method also.</p>\n\n<p>Thank you Vishnu.</p>\n"}], "owner": {"reputation": 1001, "user_id": 5658251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-snphfvZWF0s/AAAAAAAAAAI/AAAAAAAAEMU/VcbwF479mRE/photo.jpg?sz=128", "display_name": "Eswar", "link": "https://stackoverflow.com/users/5658251/eswar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 51606007, "answer_count": 2, "score": 1, "last_activity_date": 1533015018, "creation_date": 1532931309, "last_edit_date": 1532932756, "question_id": 51587950, "link": "https://stackoverflow.com/questions/51587950/hide-scrollview-behind-imageview-and-vice-versa-in-android", "title": "Hide Scrollview behind Imageview and vice-versa in android", "body": "<p>I am an amateur in android studio and kotlin. I am implementing a dashboard where I have frame layout as the bodylayout and is replaced by different fragments when each item on the bottomnavigationview is clicked. However, for one particular item I need to use two view, imageview and a scrollview. So, when the progress bar in the scrollview contains no progress, I have to show the Imageview hiding the scrollview and also disabling the scroll at that time. But When there is some progress in the progressbar in the scrollview, scrollview with it's content should be shown and not the imageview.</p>\n\n<p>I have seen some answers int he same context but it didn't work for me. So, I would like to know how to do it? Am I doing it wrong.</p>\n\n<p>The code snippet is below.</p>\n\n<pre><code>class ProgressFragment : Fragment() {\n\nval TAG = \"ProgressFragment\"\noverride fun onCreateView(inflater: LayoutInflater, container: ViewGroup?,\n                          savedInstanceState: Bundle?): View? {\n    // Inflate the layout for this fragment\n    return inflater.inflate(R.layout.fragment_progress, container, false)\n}\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    progress_progressbar2?.setProgress(5)\n    progress_progressbar2?.max=15\n\n    if (progress_progressbar2?.progress!!.equals(0)){\n        started_image?.bringToFront()\n        progress_scrollview?.invalidate()\n    }\n    else{\n        progress_scrollview?.bringToFront()\n        started_image?.invalidate()\n        navigation_header_container?.setImageResource(R.drawable.header_pink)\n    }\n  }\n}\n</code></pre>\n\n<p>I am calling this fragment in the mainactivity and replacing the framelayout with this fragment in the mainactivity.</p>\n\n<p>The activity_main.xml layout is given below.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\nandroid:id=\"@+id/main\"\nxmlns:app=\"http://schemas.android.com/apk/res-auto\"\nxmlns:tools=\"http://schemas.android.com/tools\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"match_parent\"\nandroid:background=\"@mipmap/bg\"\ntools:context=\".MainActivity\"&gt;\n&lt;ImageView\nandroid:id=\"@+id/navigation_header_container\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"65dp\"\nandroid:scaleY=\"1.5\"\nandroid:scaleX=\"2\"\nandroid:src=\"@drawable/header_green\"\n/&gt;\n&lt;FrameLayout\n    android:id=\"@+id/main_frame\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:layout_marginTop=\"75dp\"\n    android:layout_above=\"@id/bottom_nav\"\n    android:layout_alignParentStart=\"true\"\n    android:layout_below=\"@+id/navigation_header_container\"\n    android:layout_alignParentTop=\"true\"\n    android:layout_alignParentLeft=\"true\"&gt;\n\n&lt;/FrameLayout&gt;\n\n&lt;android.support.design.widget.BottomNavigationView\n    android:id=\"@+id/bottom_nav\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"56dp\"\n    android:layout_alignParentBottom=\"true\"\n    android:layout_alignParentLeft=\"true\"\n    android:layout_alignParentStart=\"true\"\n    app:itemBackground=\"@color/colorWhite\"\n    app:itemTextColor=\"@color/nav_item_colors\"\n    app:menu=\"@menu/bottom_navigation\"&gt;\n\n&lt;/android.support.design.widget.BottomNavigationView&gt;\n\n&lt;TextView\n    android:id=\"@+id/header_text\"\n    android:layout_width=\"156dp\"\n    android:layout_height=\"39dp\"\n    android:layout_alignParentTop=\"true\"\n    android:layout_centerHorizontal=\"true\"\n    android:layout_marginTop=\"12dp\"\n    android:gravity=\"center\"\n    android:textSize=\"20dp\"\n    android:textColor=\"#200\"\n    android:textStyle=\"bold\"\n    android:text=\"TextView\" /&gt;\n&lt;!--app:itemIconTint=\"@color/nav_item_colors\"--&gt;\n&lt;!--app:itemTextColor=\"@color/nav_item_colors\"--&gt;\n\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n\n<p>The progress layout is given below.</p>\n\n<pre><code>&lt;FrameLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\nxmlns:tools=\"http://schemas.android.com/tools\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"match_parent\"\ntools:context=\".ProgressFragment\"&gt;\n\n&lt;!-- TODO: Update blank fragment layout --&gt;\n\n&lt;ScrollView\n    android:id=\"@+id/progress_scrollview\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"&gt;\n\n    &lt;RelativeLayout\n        android:id=\"@+id/progress_parentrelayout\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"&gt;\n\n        &lt;RelativeLayout\n            android:id=\"@+id/progress_child1relayout\"\n            android:layout_width=\"190dp\"\n            android:layout_height=\"280dp\"&gt;\n\n            &lt;TextView\n                android:id=\"@+id/quadrant1_textview1\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_marginLeft=\"60sp\"\n                android:layout_marginTop=\"90dp\"\n                android:gravity=\"center\"\n                android:text=\"Min\"\n                android:textColor=\"#200\"\n                android:textSize=\"18sp\"\n                android:textStyle=\"bold\" /&gt;\n\n            &lt;ProgressBar\n                android:id=\"@+id/progress_progressbar1\"\n                style=\"?android:attr/progressBarStyleHorizontal\"\n                android:layout_width=\"90dp\"\n                android:layout_height=\"wrap_content\"\n                android:layout_marginLeft=\"35dp\"\n                android:layout_marginTop=\"140dp\"\n                android:progressDrawable=\"@drawable/customprogressbar\" /&gt;\n        &lt;/RelativeLayout&gt;\n\n        &lt;RelativeLayout\n            android:id=\"@+id/progress_child2relayout\"\n            android:layout_width=\"190dp\"\n            android:layout_height=\"280dp\"\n            android:layout_below=\"@+id/progress_child1relayout\"&gt;\n\n            &lt;TextView\n                android:id=\"@+id/quadrant2_textview1\"\n                android:layout_width=\"90dp\"\n                android:layout_height=\"wrap_content\"\n                android:layout_marginLeft=\"40sp\"\n                android:layout_marginStart=\"40sp\"\n                android:layout_marginTop=\"70dp\"\n                android:text=\"Challenge Status\"\n                android:textColor=\"#200\"\n                android:textSize=\"18sp\"\n                android:textStyle=\"bold\" /&gt;\n\n            &lt;ProgressBar\n                android:id=\"@+id/progress_progressbar2\"\n                style=\"?android:attr/progressBarStyleHorizontal\"\n                android:layout_width=\"90dp\"\n                android:layout_height=\"wrap_content\"\n                android:layout_marginLeft=\"40dp\"\n                android:layout_marginStart=\"40dp\"\n                android:layout_marginTop=\"160dp\"\n                android:progressDrawable=\"@drawable/customprogressbar\" /&gt;\n\n            &lt;TextView\n                android:id=\"@+id/quadrant2_textview2\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_marginLeft=\"42dp\"\n                android:layout_marginTop=\"130dp\"\n                android:text=\"Completed\"\n                android:textColor=\"#200\"\n                android:textSize=\"18sp\"\n                android:textStyle=\"bold\" /&gt;\n\n            &lt;TextView\n                android:id=\"@+id/quadrant2_textview3\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_marginLeft=\"45dp\"\n                android:layout_marginTop=\"190dp\"\n                android:text=\"open\"\n                android:textColor=\"#200\"\n                android:textSize=\"18sp\"\n                android:textStyle=\"bold\" /&gt;\n\n            &lt;TextView\n                android:id=\"@+id/quadrant2_textview4\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_marginLeft=\"45dp\"\n                android:layout_marginTop=\"230dp\"\n                android:text=\"0\"\n                android:textColor=\"#200\"\n                android:textSize=\"18sp\"\n                android:textStyle=\"bold\" /&gt;\n        &lt;/RelativeLayout&gt;\n\n        &lt;RelativeLayout\n            android:id=\"@+id/progress_child3relayout\"\n            android:layout_width=\"190dp\"\n            android:layout_height=\"280dp\"\n            android:layout_toRightOf=\"@+id/progress_child1relayout\"&gt;\n\n            &lt;TextView\n                android:id=\"@+id/quadrant3_textview1\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_marginLeft=\"60sp\"\n                android:layout_marginTop=\"90dp\"\n                android:gravity=\"center\"\n                android:text=\"TextView\"\n                android:textColor=\"#200\"\n                android:textSize=\"18sp\"\n                android:textStyle=\"bold\" /&gt;\n        &lt;/RelativeLayout&gt;\n\n        &lt;RelativeLayout\n            android:id=\"@+id/progress_child4relayout\"\n            android:layout_width=\"190dp\"\n            android:layout_height=\"280dp\"\n            android:layout_below=\"@id/progress_child3relayout\"\n            android:layout_toRightOf=\"@+id/progress_child2relayout\"&gt;\n\n            &lt;TextView\n                android:id=\"@+id/quadrant4_textview1\"\n                android:layout_width=\"100dp\"\n                android:layout_height=\"wrap_content\"\n                android:layout_marginLeft=\"60sp\"\n                android:layout_marginTop=\"70dp\"\n                android:text=\"Pods Mastered\"\n                android:textColor=\"#200\"\n                android:textSize=\"18sp\"\n                android:textStyle=\"bold\" /&gt;\n\n            &lt;me.zhanghai.android.materialprogressbar.MaterialProgressBar\n                android:id=\"@+id/circularprogress\"\n                android:layout_width=\"150dp\"\n                android:layout_height=\"70dp\"\n                android:layout_marginLeft=\"15dp\"\n                android:layout_marginTop=\"130dp\"\n                android:progress=\"20\" /&gt;\n            &lt;!--&lt;ProgressBar--&gt;\n            &lt;!--android:id=\"@+id/progress_progressbar3\"--&gt;\n            &lt;!--android:layout_width=\"wrap_content\"--&gt;\n            &lt;!--android:layout_height=\"wrap_content\"--&gt;\n            &lt;!--android:layout_marginTop=\"120dp\"--&gt;\n            &lt;!--android:layout_marginLeft=\"50sp\"--&gt;\n            &lt;!--android:indeterminateDrawable=\"@drawable/ringprogressbar\"--&gt;\n            &lt;!--android:max=\"100\"--&gt;\n            &lt;!--android:progress=\"20\"--&gt;\n            &lt;!--style=\"?android:attr/progressBarStyleLarge\" /&gt;--&gt;\n\n        &lt;/RelativeLayout&gt;\n\n        &lt;TextView\n            android:id=\"@+id/whatdoesthis_mean\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"match_parent\"\n            android:layout_centerHorizontal=\"true\"\n            android:layout_marginTop=\"580dp\"\n            android:clickable=\"true\"\n            android:gravity=\"center\"\n            android:text=\"What does this mean?\"\n            android:textColor=\"#200\"\n            android:textSize=\"15dp\"\n            android:textStyle=\"bold\" /&gt;\n\n        &lt;ImageView\n            android:id=\"@+id/child_button\"\n            android:layout_width=\"344dp\"\n            android:layout_height=\"79dp\"\n            android:layout_centerHorizontal=\"true\"\n            android:layout_marginTop=\"620dp\"\n            android:src=\"@drawable/pinkcolor\"\n            android:text=\"child name\" /&gt;\n\n        &lt;TextView\n            android:id=\"@+id/child_name_text\"\n            android:layout_width=\"184dp\"\n            android:layout_height=\"wrap_content\"\n            android:layout_alignParentBottom=\"true\"\n            android:layout_centerHorizontal=\"true\"\n            android:layout_marginBottom=\"11dp\"\n            android:fontFamily=\"sans-serif\"\n            android:gravity=\"center\"\n            android:text=\"Child Name\"\n            android:textColor=\"#190fdf\"\n            android:textSize=\"30sp\"\n            android:textStyle=\"bold\" /&gt;\n\n    &lt;/RelativeLayout&gt;\n\n&lt;/ScrollView&gt;\n&lt;ImageView\n    android:id=\"@+id/started_image\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:src=\"@drawable/letsgetstarted\"\n    android:background=\"#ebcac3c7\"\n    /&gt;\n\n&lt;/FrameLayout&gt;\n</code></pre>\n\n<p>Any help is appreciated. </p>\n"}, {"tags": ["kotlin", "destructuring"], "answers": [{"comments": [{"owner": {"reputation": 1929, "user_id": 132628, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/YRRlk.png?s=128&g=1", "display_name": "Melllvar", "link": "https://stackoverflow.com/users/132628/melllvar"}, "edited": false, "score": 2, "creation_date": 1532928460, "post_id": 51587440, "comment_id": 90140036, "body": "Of course it&#39;ll work if you test for presence of the delimiter :). If I go that route, I might as well just save the effort, do the split, check for the size of the array, then destructure it. My question is, is there a way to do this if there may be less than expected number of components - without additional tests?"}], "tags": [], "owner": {"reputation": 10859, "user_id": 3710865, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oROuW.jpg?s=128&g=1", "display_name": "sasikumar", "link": "https://stackoverflow.com/users/3710865/sasikumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1532928301, "creation_date": 1532928301, "answer_id": 51587440, "question_id": 51587403, "link": "https://stackoverflow.com/questions/51587403/component-destructuring-with-fewer-than-expected-components/51587440#51587440", "title": "Component destructuring with fewer than expected components", "body": "<p>Its working for me </p>\n\n<pre><code>val pair=\"your string\"\nif(pair.isNotEmpty()&amp;&amp;pair.contains(\"=\")) {\n    val (k, v) = pair.split(\"=\".toRegex(), 2)\n    println(k)\n    println(v)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": false, "score": 2, "last_activity_date": 1532928648, "creation_date": 1532928648, "answer_id": 51587496, "question_id": 51587403, "link": "https://stackoverflow.com/questions/51587403/component-destructuring-with-fewer-than-expected-components/51587496#51587496", "title": "Component destructuring with fewer than expected components", "body": "<p>You could add your own extension to <code>List</code> that adds the required number of <code>null</code> values to the end:</p>\n\n<pre><code>val (k, v) = pair.split(\"=\".toRegex(), 2).padWithNulls(limit = 2)\n</code></pre>\n\n<p>Implementation can be done a couple of ways, here's just one:</p>\n\n<pre><code>private inline fun &lt;reified E&gt; List&lt;E&gt;.padWithNulls(limit: Int): List&lt;E?&gt; {\n    if (this.size &gt;= limit) {\n        return this\n    }\n\n    val result: MutableList&lt;E?&gt; = this.toMutableList()\n    result.addAll(arrayOfNulls(limit - this.size))\n    return result\n}\n</code></pre>\n\n<p>Here's a simpler one as well:</p>\n\n<pre><code>private fun &lt;E&gt; List&lt;E&gt;.padWithNulls(limit: Int): List&lt;E?&gt; {\n    val result: MutableList&lt;E?&gt; = this.toMutableList()\n\n    while (result.size &lt; limit) {\n        result.add(null)\n    }\n\n    return result\n}\n</code></pre>\n\n<hr>\n\n<p>Or wrapping this functionality even further:</p>\n\n<pre><code>val (k, v) = pair.splitAndPadWithNulls(\"=\".toRegex(), 2)\n\nprivate fun String.splitAndPadWithNulls(regex: Regex, limit: Int): List&lt;String?&gt; {\n    return this.split(regex, limit).padWithNulls(limit)\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1929, "user_id": 132628, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/YRRlk.png?s=128&g=1", "display_name": "Melllvar", "link": "https://stackoverflow.com/users/132628/melllvar"}, "edited": false, "score": 0, "creation_date": 1532929269, "post_id": 51587557, "comment_id": 90140296, "body": "Great solution - although in this particular case, it&#39;s List&lt;&gt; that needs the extension (split returns a List&lt;&gt;)."}], "tags": [], "owner": {"reputation": 1736, "user_id": 2688304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03f4a4c53dcfe9828b0d13726a683f49?s=128&d=identicon&r=PG", "display_name": "shiftpsh", "link": "https://stackoverflow.com/users/2688304/shiftpsh"}, "is_accepted": true, "score": 4, "last_activity_date": 1532929107, "creation_date": 1532929107, "answer_id": 51587557, "question_id": 51587403, "link": "https://stackoverflow.com/questions/51587403/component-destructuring-with-fewer-than-expected-components/51587557#51587557", "title": "Component destructuring with fewer than expected components", "body": "<p>When destructuring objects, Kotlin calls <code>componentN()</code> for that object. For arrays, <code>component1()</code> is equal to <code>get(0)</code>, <code>component2()</code> is equal to <code>get(1)</code>, and so on.</p>\n\n<p>So if the index is out of bounds, it'll throw <code>ArrayIndexOutOfBoundsException</code>, instead of returning <code>null</code>. </p>\n\n<hr>\n\n<p>But you <strong>can</strong> make your operator function like this:</p>\n\n<pre><code>operator fun &lt;T&gt; Array&lt;out T&gt;.component1(): T? = if (size &gt; 0) get(0) else null\noperator fun &lt;T&gt; Array&lt;out T&gt;.component2(): T? = if (size &gt; 1) get(1) else null\n</code></pre>\n\n<p>so if I run</p>\n\n<pre><code>val (k, v) = arrayOf(1)\n\nprintln(k)\nprintln(v)\n</code></pre>\n\n<p>the output will be</p>\n\n<pre><code>1\nnull\n</code></pre>\n\n<hr>\n\n<p>See:</p>\n\n<ul>\n<li><a href=\"https://kotlinlang.org/docs/reference/multi-declarations.html\" rel=\"nofollow noreferrer\">Destructuring Declarations</a></li>\n</ul>\n"}], "owner": {"reputation": 1929, "user_id": 132628, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/YRRlk.png?s=128&g=1", "display_name": "Melllvar", "link": "https://stackoverflow.com/users/132628/melllvar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 299, "favorite_count": 0, "accepted_answer_id": 51587557, "answer_count": 3, "score": 2, "last_activity_date": 1532929107, "creation_date": 1532928055, "question_id": 51587403, "link": "https://stackoverflow.com/questions/51587403/component-destructuring-with-fewer-than-expected-components", "title": "Component destructuring with fewer than expected components", "body": "<p>Let's say I want to do the following:</p>\n\n<pre><code>val (k, v) = pair.split(\"=\".toRegex(), 2)\n</code></pre>\n\n<p>This code is fine if I always get 2 components from the split - however, if the delimiter is not present in the string, this code throws an exception, because the second element in the array isn't present.</p>\n\n<p>The answer is almost certainly \"no\", but is there some way to coerce destructure to assign null values to missing components?</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 57589, "user_id": 7666442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K8FFo.jpg?s=128&g=1", "display_name": "AskNilesh", "link": "https://stackoverflow.com/users/7666442/asknilesh"}, "edited": false, "score": 2, "creation_date": 1532925300, "post_id": 51587026, "comment_id": 90139310, "body": "<i><code>I made this code with kotlin, i get error.</code></i> What ERROR?"}, {"owner": {"reputation": 931, "user_id": 3131433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70f6960913132e0cff0410e29d85c54d?s=128&d=identicon&r=PG", "display_name": "Rakibul Haq", "link": "https://stackoverflow.com/users/3131433/rakibul-haq"}, "edited": false, "score": 0, "creation_date": 1532925861, "post_id": 51587026, "comment_id": 90139413, "body": "post your stack trace here. It will greatly help to diagnose the problem faster."}], "answers": [{"tags": [], "owner": {"reputation": 5621, "user_id": 5275639, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/13aVl.jpg?s=128&g=1", "display_name": "Zeeshan Shabbir", "link": "https://stackoverflow.com/users/5275639/zeeshan-shabbir"}, "is_accepted": true, "score": 0, "last_activity_date": 1532925630, "creation_date": 1532925630, "answer_id": 51587057, "question_id": 51587026, "link": "https://stackoverflow.com/questions/51587026/how-i-can-fix-this-code-android-kotlin/51587057#51587057", "title": "How I can fix this code? (Android Kotlin)", "body": "<p>Try this.</p>\n\n<pre><code>private fun getMarkers(points: Array&lt;LatLng&gt;): List&lt;ExtraMarker&gt; {\n        val extraMarkers: ArrayList&lt;ExtraMarker&gt; = ArrayList()\n        @IdRes val icon = R.drawable.ic_add_polypoint\n        for (latLng in points)\n        {\n            val extraMarker = ExtraMarkerBuilder()\n                    .setCenter(latLng)\n                    .setIcon(icon)\n                    .build()\n            extraMarkers.add(extraMarker) \n        }\n        return extraMarkers\n    }\n</code></pre>\n\n<p>Hope this will help.</p>\n\n<p>Some <a href=\"https://stackoverflow.com/a/50893555/5275639\">explanation</a> </p>\n\n<p>For people just migrating from java, In Kotlin List is by default immutable and mutable version of Lists is called MutableList.</p>\n\n<p>Hence if you have something like :</p>\n\n<pre><code>val list: List&lt;String&gt; = ArrayList()\n</code></pre>\n\n<p>In this case you will not get an <code>add()</code> method as list is immutable. Hence you will have to declare a MutableList as shown below :</p>\n\n<pre><code>val list: MutableList&lt;String&gt; = ArrayList()\n</code></pre>\n\n<p>Now you will see an <code>add()</code> method and you can add elements to any list.</p>\n"}, {"tags": [], "owner": {"reputation": 2057, "user_id": 2761728, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Lkhy.jpg?s=128&g=1", "display_name": "Anthonyeef", "link": "https://stackoverflow.com/users/2761728/anthonyeef"}, "is_accepted": false, "score": 0, "last_activity_date": 1532934067, "creation_date": 1532934067, "answer_id": 51588563, "question_id": 51587026, "link": "https://stackoverflow.com/questions/51587026/how-i-can-fix-this-code-android-kotlin/51588563#51588563", "title": "How I can fix this code? (Android Kotlin)", "body": "<p>For those who just begin the tour of Kotlin, especially come from Java, I suggest you try this site: <a href=\"http://try.kotlinlang.org/\" rel=\"nofollow noreferrer\">http://try.kotlinlang.org/</a></p>\n\n<p>There is a button call <code>convert from Java</code>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/FHfqx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FHfqx.png\" alt=\"enter image description here\"></a></p>\n\n<p>By using this method, you can copy the original Java snippet and easily convert to Kotlin code. For example, I take your original Java code and paste to the dialog then I got this result:</p>\n\n<p><a href=\"https://i.stack.imgur.com/nVToZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nVToZ.png\" alt=\"enter image description here\"></a></p>\n\n<p>Easy to use, and it's helpful if you are just start to code in Kotlin.</p>\n"}], "owner": {"reputation": 1, "user_id": 10062514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cafc25f4f2d22082961e8bb6a144e613?s=128&d=identicon&r=PG&f=1", "display_name": "Bara19", "link": "https://stackoverflow.com/users/10062514/bara19"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 0, "accepted_answer_id": 51587057, "answer_count": 2, "score": -3, "last_activity_date": 1532934067, "creation_date": 1532925259, "last_edit_date": 1592644375, "question_id": 51587026, "link": "https://stackoverflow.com/questions/51587026/how-i-can-fix-this-code-android-kotlin", "title": "How I can fix this code? (Android Kotlin)", "body": "<p>I made this code for to drawing polygon in googlemaps android. I made from this lib <a href=\"https://github.com/bkhezry/MapDrawingTools/blob/master/app/src/main/java/com/github/bkhezry/demomapdrawingtools/ui/MainActivity.java\" rel=\"nofollow noreferrer\">Map Drawing</a>.</p>\n<p>I made this code with kotlin, i get error. <strong>Here is my code:</strong></p>\n<pre><code>...\n    private fun getMarkers(points: Array&lt;LatLng&gt;): List&lt;ExtraMarker&gt; {\n        val extraMarkers: List&lt;ExtraMarker&gt; = ArrayList()\n        @IdRes val icon = R.drawable.ic_add_polypoint\n        for (latLng in points)\n        {\n            val extraMarker = ExtraMarkerBuilder()\n                    .setCenter(latLng)\n                    .setIcon(icon)\n                    .build()\n            extraMarkers.add(extraMarker) &lt;--- error in here (add)\n        }\n        return extraMarkers\n    }\n</code></pre>\n<p>Error in here</p>\n<pre><code>extraMarkers.add(extraMarker)\n</code></pre>\n<p>I build from this code:</p>\n<pre><code>private List&lt;ExtraMarker&gt; getMarkers(LatLng[] points) {\n        List&lt;ExtraMarker&gt; extraMarkers = new ArrayList&lt;&gt;();\n        @IdRes int icon = R.drawable.ic_beenhere_blue_grey_500_24dp;\n        for (LatLng latLng : points) {\n            ExtraMarker extraMarker =\n                    new ExtraMarkerBuilder()\n                            .setCenter(latLng)\n                            .setIcon(icon)\n                            .build();\n            extraMarkers.add(extraMarker);\n        }\n        return extraMarkers;\n    }\n</code></pre>\n<p>Please help me, how can fix it?\nThank you.</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 11598, "user_id": 869330, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/34be19b80429871a85ea92656850bceb?s=128&d=identicon&r=PG&f=1", "display_name": "Naetmul", "link": "https://stackoverflow.com/users/869330/naetmul"}, "is_accepted": true, "score": 8, "last_activity_date": 1532920771, "last_edit_date": 1532920771, "creation_date": 1532920454, "answer_id": 51586523, "question_id": 51586508, "link": "https://stackoverflow.com/questions/51586508/how-to-return-outside-of-foreach-in-kotlin/51586523#51586523", "title": "How to return outside of forEach in Kotlin?", "body": "<p>Use the traditional-way for each loop.</p>\n\n<p>i.e. change</p>\n\n<pre><code>people.forEach label@{\n</code></pre>\n\n<p>to</p>\n\n<pre><code>for (it in people) {\n</code></pre>\n\n<p>and change <code>return</code> to <code>break</code>.</p>\n\n<p><hr/>\n<b>NOTE</b>: Read these articles about <code>return</code> in <code>.forEach()</code></p>\n\n<p><a href=\"https://stackoverflow.com/questions/32540947/break-and-continue-in-foreach-in-kotlin\">`break` and `continue` in `forEach` in Kotlin</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/34642868/how-do-i-do-a-break-or-continue-when-in-a-functional-loop-within-kotlin\">How do I do a &quot;break&quot; or &quot;continue&quot; when in a functional loop within Kotlin?</a> (This question may be a duplicate of this)</p>\n"}, {"tags": [], "owner": {"reputation": 4391, "user_id": 3106174, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/mKAhl.jpg?s=128&g=1", "display_name": "Advice-Dog", "link": "https://stackoverflow.com/users/3106174/advice-dog"}, "is_accepted": false, "score": 1, "last_activity_date": 1532920570, "creation_date": 1532920570, "answer_id": 51586534, "question_id": 51586508, "link": "https://stackoverflow.com/questions/51586508/how-to-return-outside-of-foreach-in-kotlin/51586534#51586534", "title": "How to return outside of forEach in Kotlin?", "body": "<p>You want to use <code>find</code> instead. It'll return <code>Person?</code>. So you can just check if it's null, or not. If not, you found <code>Alice</code>.</p>\n\n<pre><code>data class Person(val name: String, val age: Int)\nval people = listOf(Person(\"Paul\", 30), Person(\"Alice\", 29), Person(\"Bob\", 31))\nval alice: Person? = findAlice(people)\n\n\nfun findAlice(people: List&lt;Person&gt;): Person? {\n    return people.find { it.name == \"Alice\" }\n}\n</code></pre>\n"}], "owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5468, "favorite_count": 0, "closed_date": 1532921643, "accepted_answer_id": 51586523, "answer_count": 2, "score": 3, "last_activity_date": 1532920771, "creation_date": 1532920202, "question_id": 51586508, "link": "https://stackoverflow.com/questions/51586508/how-to-return-outside-of-foreach-in-kotlin", "closed_reason": "Duplicate", "title": "How to return outside of forEach in Kotlin?", "body": "<p>I hope to return to the line <code>aa@ logError(\"Done\")</code> outside <code>forEach</code>, but <code>return@aa</code> doesn't work,  and <code>break@label</code> doesn't work too.</p>\n\n<p>And more, if you use <code>return</code>, it will be return outside the fun <code>lookForAlice</code> !</p>\n\n<pre><code>data class Person(val name: String, val age: Int)\nval people = listOf(Person(\"Paul\", 30), Person(\"Alice\", 29), Person(\"Bob\", 31))\n\n\nfun lookForAlice(people: List&lt;Person&gt;) {\n    people.forEach label@{\n        logError(\"Each: \"+it.name)\n        if (it.name == \"Alice\") {\n            logError(\"Find\")                                 \n            return@aa  //It's fault\n        }\n    }\n    aa@ logError(\"Done\")\n}\n\nlookForAlice(people)\n</code></pre>\n"}]