[{"tags": ["android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 17304, "user_id": 3363481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o4HU5.png?s=128&g=1", "display_name": "earthw0rmjim", "link": "https://stackoverflow.com/users/3363481/earthw0rmjim"}, "is_accepted": true, "score": 3, "last_activity_date": 1523512364, "last_edit_date": 1523512364, "creation_date": 1523510998, "answer_id": 49788682, "question_id": 49785913, "link": "https://stackoverflow.com/questions/49785913/how-can-i-disable-some-popupmenu-items-in-kotlin/49788682#49788682", "title": "How can I disable some PopupMenu items in Kotlin?", "body": "<p>You simply have to get ahold of the <code>MenuItem</code> instances in your <code>PopupMenu</code> and set them enabled/disabled when appropriate.</p>\n\n<p>For example (assuming your <code>PopupMenu</code> instance is called <code>popup</code>):</p>\n\n<pre><code>popup.inflate(R.menu.menu_more)\n\n// ...\n\nif (recordCount == 0){\n    // assuming popMenuMoreEdit and popMenuMoreDelete are item IDs in menu_more\n    popup.menu.findItem(R.id.popMenuMoreEdit).isEnabled = false\n    popup.menu.findItem(R.id.popMenuMoreDelete).isEnabled = false\n}\n</code></pre>\n"}], "owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 527, "favorite_count": 0, "accepted_answer_id": 49788682, "answer_count": 1, "score": 1, "last_activity_date": 1523512364, "creation_date": 1523490126, "last_edit_date": 1523511144, "question_id": 49785913, "link": "https://stackoverflow.com/questions/49785913/how-can-i-disable-some-popupmenu-items-in-kotlin", "title": "How can I disable some PopupMenu items in Kotlin?", "body": "<p>I use the following Code B to click a button to open a  <code>PopupMenu</code>.</p>\n\n<p>The <code>PopupMenu</code> include Edit, Delete and Setting items.</p>\n\n<p>I hope the Edit and Delete items are disabled or disappear when there is no record,  maybe it's like Code A,  how can I write the code ?</p>\n\n<p><strong>Code A</strong></p>\n\n<pre><code>popup.setOnMenuItemBeforePopup {\n  if (recordCount==0){\n    R.id.popMenuMoreEdit.disable\n    R.id.popMenuMoreDelete.disbale\n  }\n}\n</code></pre>\n\n<p><strong>Code B</strong></p>\n\n<pre><code>    private fun setControls(){       \n        btnMore.setOnClickListener (View.OnClickListener { v -&gt; showPopup(v, mContext) })\n    }\n\n    fun showPopup(v: View, mContext: Context) {\n        val popup = PopupMenu(mContext, v)\n        popup.inflate(R.menu.menu_more)\n\n        popup.setOnMenuItemClickListener {\n            item -&gt; handleMenu(item, mContext)\n        }\n\n        popup.show()\n    }\n\n\n   private fun handleMenu(item: MenuItem, mContext: Context): Boolean {\n        when (item.itemId) {\n\n            R.id.popMenuMoreEdit -&gt; {\n\n                return true\n            }\n\n            R.id.popMenuMoreDelete -&gt; {\n\n                return true\n            }\n\n            R.id.popMenuMoreBackupSetting-&gt; {\n\n                return true\n            }\n\n        }\n        return false\n    }\n</code></pre>\n"}, {"tags": ["android", "api", "kotlin", "token", "response"], "answers": [{"tags": [], "owner": {"reputation": 10844, "user_id": 7765139, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1JCJG0Q4b8I/AAAAAAAAAAI/AAAAAAAAB1w/2ghArTJ7KEs/photo.jpg?sz=128", "display_name": "Levi Moreira", "link": "https://stackoverflow.com/users/7765139/levi-moreira"}, "is_accepted": true, "score": 1, "last_activity_date": 1523488646, "creation_date": 1523488646, "answer_id": 49785733, "question_id": 49785704, "link": "https://stackoverflow.com/questions/49785704/i-am-getting-a-token-back-from-my-api-and-can-print-it-in-logcat-i-need-to-save/49785733#49785733", "title": "I am getting a token back from my API and can print it in Logcat I need to save that response and I&#39;m not having any luck. I&#39;m new to kotlin", "body": "<p>Try moving the intent initialization to when you receive the correct response:</p>\n\n<pre><code>     log_login.setOnClickListener {\n            // \"http://localhost:1842/token\"\n            var url = \"https://elimination.azurewebsites.net/token\"\n            val que = Volley.newRequestQueue(this@Login)\n            val stringRequest = object : StringRequest(Request.Method.POST, url,\n                    Response.Listener { response -&gt; Toast.makeText(this@Login, response, Toast.LENGTH_LONG).show()\n                    Log.e(\"Test\", response)\n                        //trying to set token to response\n                    token = response\n                   val intent = Intent(this, Profile::class.java)\n                   intent.putExtra(\"token\", token) \n                   startActivity(intent)\n\n                },\n                    Response.ErrorListener { error -&gt; Toast.makeText(this@Login, error.toString(), Toast.LENGTH_LONG).show()\n                        Log.e(\"Wrong\", error.toString())}) {\n\n                override fun getParams(): Map&lt;String, String&gt; {\n                    val params = HashMap&lt;String, String&gt;()\n                    params.put(\"grant_type\", \"password\")\n                    params.put(\"Username\", input_email.toString())\n                    params.put(\"Password\", input_password.toString())\n                    return params\n                }\n            }\n            que.add(stringRequest)\n\n\n\n        }\n</code></pre>\n\n<p>Or calling a method when you receive the result:</p>\n\n<pre><code>     log_login.setOnClickListener {\n            // \"http://localhost:1842/token\"\n            var url = \"https://elimination.azurewebsites.net/token\"\n            val que = Volley.newRequestQueue(this@Login)\n            val stringRequest = object : StringRequest(Request.Method.POST, url,\n                    Response.Listener { response -&gt; Toast.makeText(this@Login, response, Toast.LENGTH_LONG).show()\n                    Log.e(\"Test\", response)\n                        //trying to set token to response\n                    token = response\n                    openNextActivity(token);\n\n                },\n                    Response.ErrorListener { error -&gt; Toast.makeText(this@Login, error.toString(), Toast.LENGTH_LONG).show()\n                        Log.e(\"Wrong\", error.toString())}) {\n\n                override fun getParams(): Map&lt;String, String&gt; {\n                    val params = HashMap&lt;String, String&gt;()\n                    params.put(\"grant_type\", \"password\")\n                    params.put(\"Username\", input_email.toString())\n                    params.put(\"Password\", input_password.toString())\n                    return params\n                }\n            }\n            que.add(stringRequest)\n\n        }\n\nfun openActivity(token: String){\n               val intent = Intent(this, Profile::class.java)\n               intent.putExtra(\"token\", token) \n               startActivity(intent)\n\n}\n</code></pre>\n\n<p>The important thing is you were trying to execute the intent initialization syncronously, but you receive the token async so you token variable was not filled when the intent was executed. </p>\n"}], "owner": {"reputation": 13, "user_id": 9633190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97194484306f7ce3a12663ae7adcffc4?s=128&d=identicon&r=PG&f=1", "display_name": "hmad", "link": "https://stackoverflow.com/users/9633190/hmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 49785733, "answer_count": 1, "score": 1, "last_activity_date": 1523488646, "creation_date": 1523488458, "question_id": 49785704, "link": "https://stackoverflow.com/questions/49785704/i-am-getting-a-token-back-from-my-api-and-can-print-it-in-logcat-i-need-to-save", "title": "I am getting a token back from my API and can print it in Logcat I need to save that response and I&#39;m not having any luck. I&#39;m new to kotlin", "body": "<p>1.I'm getting the correct response back and can view it in logcat, but I need to save that response and store it for later. I'm trying to save it in the var token, but when looking in memory token remains empty even after correctly getting the response. Any suggestions would be appreciated.</p>\n\n<pre><code>class Login : AppCompatActivity() {\n var token = \"\"\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_login)\n\n    //POST data\n    log_login.setOnClickListener {\n        // \"http://localhost:1842/token\"\n        var url = \"https://elimination.azurewebsites.net/token\"\n        val que = Volley.newRequestQueue(this@Login)\n        val stringRequest = object : StringRequest(Request.Method.POST, url,\n                Response.Listener { response -&gt; Toast.makeText(this@Login, response, Toast.LENGTH_LONG).show()\n                Log.e(\"Test\", response)\n                    //trying to set token to response\n                token = response},\n                Response.ErrorListener { error -&gt; Toast.makeText(this@Login, error.toString(), Toast.LENGTH_LONG).show()\n                    Log.e(\"Wrong\", error.toString())}) {\n\n            override fun getParams(): Map&lt;String, String&gt; {\n                val params = HashMap&lt;String, String&gt;()\n                params.put(\"grant_type\", \"password\")\n                params.put(\"Username\", input_email.toString())\n                params.put(\"Password\", input_password.toString())\n                return params\n            }\n        }\n        que.add(stringRequest)\n\n\n        val intent = Intent(this, Profile::class.java)\n        intent.putExtra(\"token\", token) //passing token to profile intent\n        startActivity(intent)\n    }\n}\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["kotlin", "executorservice", "kotlinx.coroutines"], "comments": [{"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1523519674, "post_id": 49785282, "comment_id": 86596606, "body": "I had a rough time setting up the environment to match your deps. It would save a lot of time if you add them explicitly."}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1523521983, "post_id": 49785282, "comment_id": 86597895, "body": "It actually fails because your mocked context returns <code>null</code> for <code>plus(Context)</code>, violating that method&#39;s not-null contract."}, {"owner": {"reputation": 895, "user_id": 1076585, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/13bfede7edf749e021ce725182f3f7f0?s=128&d=identicon&r=PG", "display_name": "Mike Holler", "link": "https://stackoverflow.com/users/1076585/mike-holler"}, "reply_to_user": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1523541200, "post_id": 49785282, "comment_id": 86611389, "body": "@MarkoTopolnik fixed the dependencies"}, {"owner": {"reputation": 895, "user_id": 1076585, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/13bfede7edf749e021ce725182f3f7f0?s=128&d=identicon&r=PG", "display_name": "Mike Holler", "link": "https://stackoverflow.com/users/1076585/mike-holler"}, "reply_to_user": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1523542029, "post_id": 49785282, "comment_id": 86611985, "body": "@MarkoTopolnik as a response to your second comment, what I&#39;d <i>like</i> to do is take some existing <code>CoroutineDispatcher</code> implementation and mock it, checking that its <code>dispatch</code> method is called. However, all official implementations, as far as I can tell, have <code>final</code> <code>dispatch</code> methods, and mocking final methods is a bad idea."}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1523546976, "post_id": 49785282, "comment_id": 86615686, "body": "Well it&#39;s true, Kotlin&#39;s language design means it&#39;s harder to mock random stuff which wasn&#39;t designed to be subclassed. I guess you&#39;ll need a more elaborate solution, like a custom mock implementation of a <code>CoroutineDispatcher</code>."}, {"owner": {"reputation": 4613, "user_id": 784766, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dc5a8416823b374a9ad4a06b7eb8ba63?s=128&d=identicon&r=PG", "display_name": "Gabrielle", "link": "https://stackoverflow.com/users/784766/gabrielle"}, "edited": false, "score": 0, "creation_date": 1547559656, "post_id": 49785282, "comment_id": 95226634, "body": "@MikeHoller did you found any solution for this issue?"}, {"owner": {"reputation": 895, "user_id": 1076585, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/13bfede7edf749e021ce725182f3f7f0?s=128&d=identicon&r=PG", "display_name": "Mike Holler", "link": "https://stackoverflow.com/users/1076585/mike-holler"}, "edited": false, "score": 0, "creation_date": 1547671428, "post_id": 49785282, "comment_id": 95275953, "body": "Sadly I have not, which turns me off coroutines quite a bit if I have to write my own testable wrappers."}], "answers": [{"tags": [], "owner": {"reputation": 2693, "user_id": 450356, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/SOCF1.png?s=128&g=1", "display_name": "Adib Faramarzi", "link": "https://stackoverflow.com/users/450356/adib-faramarzi"}, "is_accepted": false, "score": 1, "last_activity_date": 1551432596, "last_edit_date": 1551432596, "creation_date": 1551430361, "answer_id": 54941007, "question_id": 49785282, "link": "https://stackoverflow.com/questions/49785282/how-to-test-that-block-is-run-on-a-coroutinedispatcher-if-its-invoked-via-launc/54941007#54941007", "title": "How to test that block is run on a CoroutineDispatcher if it&#39;s invoked via launch(dispatcher) {...}", "body": "<p>Since <code>launch</code> returns a <code>Job</code>, you need to wait for its completion to be able to verify anything that has been done. </p>\n\n<p>You can do that in two ways:</p>\n\n<p>Since you are <code>launch</code>ing a coroutine, your actual unit test might be finished before the launch's execution is done. You need to wait for its execution to make sure your test does not finish early. You can do that in multiple ways. </p>\n\n<ol>\n<li><p>Change your function signature to return the Job from launch (e.g.<code>fun example(dispatcher: CoroutineDispatcher, block: () -&gt; Unit) = launch(dispatcher) { ...</code>. This way you can call <code>.join()</code> on the <code>example</code> function to wait for its completion.</p>\n\n<ol start=\"2\">\n<li>Keep an internal <code>var exampleJob:Job? = null</code>, and set it using the execution of launch, e.g. <code>exampleJob = launch { ...}</code>. This way, in your tests, you can use <code>exampleJob.join()</code> to wait for its completion and do your verifications afterwards.</li>\n</ol></li>\n</ol>\n\n<p>Bonus solution:</p>\n\n<p>You can also use <a href=\"https://mockk.io/\" rel=\"nofollow noreferrer\">MockK</a> to <code>verifyWithTimeout</code> your unit-test. This way, your unit test waits for the verification to finish.</p>\n"}], "owner": {"reputation": 895, "user_id": 1076585, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/13bfede7edf749e021ce725182f3f7f0?s=128&d=identicon&r=PG", "display_name": "Mike Holler", "link": "https://stackoverflow.com/users/1076585/mike-holler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 443, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1551432596, "creation_date": 1523485602, "last_edit_date": 1523541172, "question_id": 49785282, "link": "https://stackoverflow.com/questions/49785282/how-to-test-that-block-is-run-on-a-coroutinedispatcher-if-its-invoked-via-launc", "title": "How to test that block is run on a CoroutineDispatcher if it&#39;s invoked via launch(dispatcher) {...}", "body": "<p>We've recently started using coroutines on our Android application. All's gone fine and dandy, until someone wrote something roughly equivalent to the following function:</p>\n\n<pre><code>fun example(dispatcher: CoroutineDispatcher, block: () -&gt; Unit) {\n    launch(dispatcher) {\n        block()\n    }\n}\n</code></pre>\n\n<p>We'd like to write a test that verifies that <code>block</code> is executed using <code>dispatcher</code>.</p>\n\n<p>We've tried the following, but this doesn't work because we get a NullPointerException because <code>dispatcher.parentContext</code> is not mocked. I'm loathe to mock it, because we don't care what context it's executed in, just that it's executed:</p>\n\n<pre><code>@Test\nfun `test that doesn't work`() {\n    val dispatcher: CoroutineDispatcher = mock()\n    val block: () -&gt; Unit = mock()\n\n    // fails here, specifically on the call to `launch` in example()\n    example(dispatcher, block)\n\n    val captor = argumentCaptor&lt;Runnable&gt;()\n    verify(dispatcher).dispatch(any(), captor.capture())\n    verify(block, never()).invoke()\n\n    captor.firstArgument.run()\n    verify(block).invoke()\n}\n</code></pre>\n\n<p>We've come upon this as an option, but it still doesn't feel right:</p>\n\n<pre><code>@Test\nfun `test that works but doesn't feel right`() {\n    val executor: ExecutorService = mock()\n    val block: () -&gt; Unit = mock()\n\n    example(executor.asCoroutineDispatcher(), block)\n\n    val captor = argumentCaptor&lt;Runnable&gt;()\n    verify(executor).execute(captor.capture())\n    verify(block, never()).invoke()\n\n    captor.firstArgument.run()\n    verify(block).invoke()\n}\n</code></pre>\n\n<p>Can anyone come up with anything better?</p>\n\n<p>EDIT:</p>\n\n<p>Notable dependencies are as follows:</p>\n\n<pre><code>com.nhaarman:mockito-kotlin:1.5.0\norg.jetbrains.kotlinx:kotlinx-coroutines-core:0.22.5\njunit:junit:4.12\norg.jetbrains.kotlin:kotlin-stdlib:1.2.30\n</code></pre>\n"}, {"tags": ["java", "android", "ios", "swift", "kotlin"], "comments": [{"owner": {"reputation": 9567, "user_id": 7916438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8541ff62182bcfd172e116a4e0d2fa58?s=128&d=identicon&r=PG", "display_name": "tevemadar", "link": "https://stackoverflow.com/users/7916438/tevemadar"}, "edited": false, "score": 0, "creation_date": 1523484402, "post_id": 49784993, "comment_id": 86585611, "body": "Java has <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#clone()\" rel=\"nofollow noreferrer\"><code>Object.clone()</code></a>, which works (well, does something) on anything marked <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Cloneable.html\" rel=\"nofollow noreferrer\"><code>Cloneable</code></a>. But I could not tell how this mechanism appears in Kotlin."}, {"owner": {"reputation": 1662, "user_id": 8387516, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3LJAP.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/8387516/sam"}, "edited": false, "score": 1, "creation_date": 1523484466, "post_id": 49784993, "comment_id": 86585632, "body": "Why can&#39;t you just create a new instance of <code>Movement</code> instead of assigning it to another variable?"}, {"owner": {"reputation": 842, "user_id": 3694524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/otQHH.jpg?s=128&g=1", "display_name": "jl47_dev", "link": "https://stackoverflow.com/users/3694524/jl47-dev"}, "edited": false, "score": 0, "creation_date": 1523484528, "post_id": 49784993, "comment_id": 86585651, "body": "Java is a little weird in the way in handles copies, but here&#39;s some good SO threads on the topic: <a href=\"https://stackoverflow.com/questions/6182565/deep-copy-shallow-copy-clone\" title=\"deep copy shallow copy clone\">stackoverflow.com/questions/6182565/&hellip;</a> and <a href=\"https://stackoverflow.com/questions/869033/how-do-i-copy-an-object-in-java\" title=\"how do i copy an object in java\">stackoverflow.com/questions/869033/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 524, "user_id": 7565335, "user_type": "registered", "profile_image": "https://graph.facebook.com/10202817259030121/picture?type=large", "display_name": "Ond\u0159ej \u0160ev\u010d&#237;k", "link": "https://stackoverflow.com/users/7565335/ond%c5%99ej-%c5%a0ev%c4%8d%c3%adk"}, "edited": false, "score": 0, "creation_date": 1523525978, "post_id": 49785116, "comment_id": 86600586, "body": "Using data class + .copy() solved my problem, thanks!"}], "tags": [], "owner": {"reputation": 3683, "user_id": 4371758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a60b9f124beca310b9bba6762c7aabbd?s=128&d=identicon&r=PG&f=1", "display_name": "Bubletan", "link": "https://stackoverflow.com/users/4371758/bubletan"}, "is_accepted": true, "score": 13, "last_activity_date": 1523484572, "creation_date": 1523484572, "answer_id": 49785116, "question_id": 49784993, "link": "https://stackoverflow.com/questions/49784993/swifts-struct-in-kotlin-or-java-multiple-instances-of-the-same-class-mutati/49785116#49785116", "title": "Swift&#39;s struct in Kotlin (or Java)? Multiple instances of the same class, mutating its variables", "body": "<p>I have never used Swift, but it seems like you're having a mutable value which gets copied when you assign it to a new variable. In Kotlin, you cannot have such type. When you assign a value to a new variable, only the reference gets copied and it still points to the same exact memory location.</p>\n\n<p>You could use a data class which gives you a convenient copy method:</p>\n\n<pre><code>data class Movement(val name: String, val reps: Int)\n\nval movement1 = Movement(\"Push Ups\", 20)\nval movementA = movement1.copy(reps = 30)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 524, "user_id": 7565335, "user_type": "registered", "profile_image": "https://graph.facebook.com/10202817259030121/picture?type=large", "display_name": "Ond\u0159ej \u0160ev\u010d&#237;k", "link": "https://stackoverflow.com/users/7565335/ond%c5%99ej-%c5%a0ev%c4%8d%c3%adk"}, "edited": false, "score": 0, "creation_date": 1523525973, "post_id": 49785121, "comment_id": 86600581, "body": "Using data class + .copy() solved my problem, thanks!"}], "tags": [], "owner": {"reputation": 26172, "user_id": 49746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IAAg.jpg?s=128&g=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/49746/todd"}, "is_accepted": false, "score": 3, "last_activity_date": 1523484605, "creation_date": 1523484605, "answer_id": 49785121, "question_id": 49784993, "link": "https://stackoverflow.com/questions/49784993/swifts-struct-in-kotlin-or-java-multiple-instances-of-the-same-class-mutati/49785121#49785121", "title": "Swift&#39;s struct in Kotlin (or Java)? Multiple instances of the same class, mutating its variables", "body": "<p>First, let me cover why you have the same value for both <code>movement1</code> and <code>movementA</code>. When you assign in Kotlin, you are copying a reference, not a class.</p>\n\n<pre><code>var movementA = movement1\n</code></pre>\n\n<p>So what that does is create a new variable called <code>movementA</code> and points it to the exact same object that <code>movement1</code> is pointing to.</p>\n\n<p>I think you probably want to look at <a href=\"https://kotlinlang.org/docs/reference/data-classes.html\" rel=\"nofollow noreferrer\">data classes</a>. They come with a copy constructor that might come in handy.</p>\n\n<pre><code>data class Movement(val name: String, val reps: Int)\n</code></pre>\n\n<p>And then you can create them off of each other, like in the swift code you show above.</p>\n\n<pre><code>val movement1 = Movement(\"Push-Ups\", 20)\nval movementA = movement1.copy(reps = 30)\n</code></pre>\n\n<p>Or you could make the properties <code>var</code>s instead of <code>val</code>s and mutate them directly...</p>\n\n<pre><code>data class Movement(var name: String, var reps: Int)\nvar movement1 = Movement(\"Push-Ups\", 20)\nvar movementA = movement1.copy()\nmovementA.reps = 30\n</code></pre>\n"}], "owner": {"reputation": 524, "user_id": 7565335, "user_type": "registered", "profile_image": "https://graph.facebook.com/10202817259030121/picture?type=large", "display_name": "Ond\u0159ej \u0160ev\u010d&#237;k", "link": "https://stackoverflow.com/users/7565335/ond%c5%99ej-%c5%a0ev%c4%8d%c3%adk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5272, "favorite_count": 0, "accepted_answer_id": 49785116, "answer_count": 2, "score": 6, "last_activity_date": 1523484605, "creation_date": 1523483729, "question_id": 49784993, "link": "https://stackoverflow.com/questions/49784993/swifts-struct-in-kotlin-or-java-multiple-instances-of-the-same-class-mutati", "title": "Swift&#39;s struct in Kotlin (or Java)? Multiple instances of the same class, mutating its variables", "body": "<p>I am not sure if I am clear with my title. In Swift I have this struct.</p>\n\n<pre><code>struct Movement {\n let name: String\n var reps: Int\n}\n\nlet movement1 = Movement(name: \"Push Ups\", reps: 20)\n\nvar movementA = movement1\nmovementA.reps = 30\n\nprint(movement1.reps) // Prints 20\nprint(movementA.reps) // Prints 30\n</code></pre>\n\n<p>What is alternative in Kotlin (or Java)? The problem is that in my app I have a workout that consists of multiple movements. I append these movements to the MutableList and the problem appears when I have workout where a movement is repeated.</p>\n\n<p>For example when I want to enter workout like:</p>\n\n<p>20 Push Ups</p>\n\n<p>30 Pull Ups</p>\n\n<p>40 Push Ups</p>\n\n<p>I end up with:</p>\n\n<p>40 Push Ups</p>\n\n<p>30 Pull Ups</p>\n\n<p>40 Push Ups</p>\n\n<p>At first, I select movement #1 and set reps of movement #1 but when I select movement #3 and set reps of movement #3 it overrides variables of movement #1.</p>\n\n<p>Any idea?</p>\n\n<p>I have tried something like this but it didn't work.</p>\n\n<pre><code>class Movement(name: String) {\n var reps: Int? = null\n}\nval movement1 = Movement(\"Push Ups\")\nmovement1.reps = 20\nvar movementA = movement1\nmovementA.reps = 30\nLog.i(\"REPS1: \", movement1.reps.toString()) // 30\nLog.i(\"REPSA: \", movementA.reps.toString()) // 30\n</code></pre>\n"}, {"tags": ["android", "data-binding", "kotlin", "higher-order-functions"], "comments": [{"owner": {"reputation": 2935, "user_id": 3808228, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NyJ7J.jpg?s=128&g=1", "display_name": "Chisko", "link": "https://stackoverflow.com/users/3808228/chisko"}, "edited": false, "score": 0, "creation_date": 1523480805, "post_id": 49784193, "comment_id": 86584338, "body": "Try looking at the generated databinding code. I don&#39;t think what you are trying to achieve will work because you can&#39;t use lambdas"}, {"owner": {"reputation": 227, "user_id": 6606971, "user_type": "registered", "accept_rate": 37, "profile_image": "https://graph.facebook.com/822957514504959/picture?type=large", "display_name": "Dex Sebas", "link": "https://stackoverflow.com/users/6606971/dex-sebas"}, "reply_to_user": {"reputation": 2935, "user_id": 3808228, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NyJ7J.jpg?s=128&g=1", "display_name": "Chisko", "link": "https://stackoverflow.com/users/3808228/chisko"}, "edited": false, "score": 0, "creation_date": 1524076128, "post_id": 49784193, "comment_id": 86829077, "body": "@Chisko are you sure that you can&#39;t use lambdas ? Then how works the default onClick?"}, {"owner": {"reputation": 3573, "user_id": 5564847, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aqnwlPrpnW0/AAAAAAAAAAI/AAAAAAAAABg/kED99SX86V0/photo.jpg?sz=128", "display_name": "Eric Bachhuber", "link": "https://stackoverflow.com/users/5564847/eric-bachhuber"}, "edited": false, "score": 0, "creation_date": 1524080374, "post_id": 49784193, "comment_id": 86831340, "body": "You absolutely can use lambdas and Kotlin function parameters, it&#39;s just the return type of <code>Unit</code> that causes an issue."}, {"owner": {"reputation": 2935, "user_id": 3808228, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NyJ7J.jpg?s=128&g=1", "display_name": "Chisko", "link": "https://stackoverflow.com/users/3808228/chisko"}, "edited": false, "score": 0, "creation_date": 1524082568, "post_id": 49784193, "comment_id": 86832514, "body": "I said <i>I think</i> hehe, yeah, my bad, you sure can"}], "answers": [{"comments": [{"owner": {"reputation": 3573, "user_id": 5564847, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aqnwlPrpnW0/AAAAAAAAAAI/AAAAAAAAABg/kED99SX86V0/photo.jpg?sz=128", "display_name": "Eric Bachhuber", "link": "https://stackoverflow.com/users/5564847/eric-bachhuber"}, "edited": false, "score": 0, "creation_date": 1523829977, "post_id": 49839720, "comment_id": 86709433, "body": "The databinding compiler throws the same exception (cannot generate view binders java.lang.StackOverflowError) if I change the <code>Unit</code> return to <code>{}</code>. Just so you are aware, returning Unit is exactly the same as returning an empty block, you can check the Kotlin bytecode yourself to see that this is the case. I had just written it like that to keep the example as simple as possible."}, {"owner": {"reputation": 227, "user_id": 6606971, "user_type": "registered", "accept_rate": 37, "profile_image": "https://graph.facebook.com/822957514504959/picture?type=large", "display_name": "Dex Sebas", "link": "https://stackoverflow.com/users/6606971/dex-sebas"}, "reply_to_user": {"reputation": 3573, "user_id": 5564847, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aqnwlPrpnW0/AAAAAAAAAAI/AAAAAAAAABg/kED99SX86V0/photo.jpg?sz=128", "display_name": "Eric Bachhuber", "link": "https://stackoverflow.com/users/5564847/eric-bachhuber"}, "edited": false, "score": 0, "creation_date": 1524076171, "post_id": 49839720, "comment_id": 86829094, "body": "@EricBachhuber Did you find a fix ? Because I saw other post saying that maybe a possible bug of kotlin / databinding."}, {"owner": {"reputation": 3573, "user_id": 5564847, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aqnwlPrpnW0/AAAAAAAAAAI/AAAAAAAAABg/kED99SX86V0/photo.jpg?sz=128", "display_name": "Eric Bachhuber", "link": "https://stackoverflow.com/users/5564847/eric-bachhuber"}, "reply_to_user": {"reputation": 227, "user_id": 6606971, "user_type": "registered", "accept_rate": 37, "profile_image": "https://graph.facebook.com/822957514504959/picture?type=large", "display_name": "Dex Sebas", "link": "https://stackoverflow.com/users/6606971/dex-sebas"}, "edited": false, "score": 0, "creation_date": 1524080582, "post_id": 49839720, "comment_id": 86831451, "body": "@Dex Sebas no fix that I know of, as far as I know it&#39;s a bug in the databinding compiler. The workaround I&#39;m using is to use a different return type in the parameter (i.e. <code>function: () -&gt; Boolean</code> instead of <code>function: () -&gt; Unit</code>), but it&#39;s hacky and requires changing the return type of the function that is being called which is not always possible (and poor design, imo)."}, {"owner": {"reputation": 227, "user_id": 6606971, "user_type": "registered", "accept_rate": 37, "profile_image": "https://graph.facebook.com/822957514504959/picture?type=large", "display_name": "Dex Sebas", "link": "https://stackoverflow.com/users/6606971/dex-sebas"}, "edited": false, "score": 0, "creation_date": 1524080736, "post_id": 49839720, "comment_id": 86831525, "body": "And in your layout / kt file class you&#39;re binding like this ? &quot;@{viewModel.itemClick()}&quot; or &quot;@{() -&gt; viewModel.itemClick()}&quot; /// class fun itemClick() : Boolean {        Log.e(&quot;test&quot;, &quot;test&quot;)        return true    }"}, {"owner": {"reputation": 3573, "user_id": 5564847, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aqnwlPrpnW0/AAAAAAAAAAI/AAAAAAAAABg/kED99SX86V0/photo.jpg?sz=128", "display_name": "Eric Bachhuber", "link": "https://stackoverflow.com/users/5564847/eric-bachhuber"}, "edited": false, "score": 0, "creation_date": 1524081097, "post_id": 49839720, "comment_id": 86831733, "body": "I&#39;ve tried both, but neither work. I opened an issue <a href=\"https://issuetracker.google.com/issues/78197871\" rel=\"nofollow noreferrer\">issuetracker.google.com/issues/78197871</a>"}, {"owner": {"reputation": 3573, "user_id": 5564847, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aqnwlPrpnW0/AAAAAAAAAAI/AAAAAAAAABg/kED99SX86V0/photo.jpg?sz=128", "display_name": "Eric Bachhuber", "link": "https://stackoverflow.com/users/5564847/eric-bachhuber"}, "reply_to_user": {"reputation": 227, "user_id": 6606971, "user_type": "registered", "accept_rate": 37, "profile_image": "https://graph.facebook.com/822957514504959/picture?type=large", "display_name": "Dex Sebas", "link": "https://stackoverflow.com/users/6606971/dex-sebas"}, "edited": false, "score": 0, "creation_date": 1524081721, "post_id": 49839720, "comment_id": 86832061, "body": "@Dex Sebas sorry, I misread your comment. For the workaround, parameter <code>function: () -&gt; Boolean</code> <code>@{() -&gt; viewModel.itemClick()}</code> and then <code>fun itemClick(): Boolean { return true }</code> would work fine (compiles without StackOverflowError and functions properly in the app)"}, {"owner": {"reputation": 227, "user_id": 6606971, "user_type": "registered", "accept_rate": 37, "profile_image": "https://graph.facebook.com/822957514504959/picture?type=large", "display_name": "Dex Sebas", "link": "https://stackoverflow.com/users/6606971/dex-sebas"}, "edited": false, "score": 0, "creation_date": 1524081864, "post_id": 49839720, "comment_id": 86832129, "body": "Yes, I did  fun itemClick() : Boolean {        Log.e(&quot;test&quot;, &quot;test&quot;)        return true    } but its not compiling. I added the code in the issueTracker of google."}, {"owner": {"reputation": 3573, "user_id": 5564847, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aqnwlPrpnW0/AAAAAAAAAAI/AAAAAAAAABg/kED99SX86V0/photo.jpg?sz=128", "display_name": "Eric Bachhuber", "link": "https://stackoverflow.com/users/5564847/eric-bachhuber"}, "edited": false, "score": 0, "creation_date": 1524082106, "post_id": 49839720, "comment_id": 86832266, "body": "Okay, I have not used multiple binding parameters (i.e. @BindingAdapter(&quot;adapter&quot;, &quot;action&quot;) so cannot speak to that. But with just one parameter (i.e. <code>function () -&gt; Boolean</code>) it works fine. Do you get a StackOverflowException as well?"}, {"owner": {"reputation": 227, "user_id": 6606971, "user_type": "registered", "accept_rate": 37, "profile_image": "https://graph.facebook.com/822957514504959/picture?type=large", "display_name": "Dex Sebas", "link": "https://stackoverflow.com/users/6606971/dex-sebas"}, "edited": false, "score": 0, "creation_date": 1524082228, "post_id": 49839720, "comment_id": 86832326, "body": "Yes, seems like a bug maybe? Because it not works with multiple binding parameter. I just saw after a invalidate cache a error &#39;Cannot find the setter for attribute &#39;app:action&#39; with parameter type lambda&#39; but with only one parameter works fine (using Boolean and not Unit). Sad, it breaks my idea of making a masteradapter for recyclerView"}], "tags": [], "owner": {"reputation": 4459, "user_id": 2318632, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/kd7KQ.jpg?s=128&g=1", "display_name": "Sir Codesalot", "link": "https://stackoverflow.com/users/2318632/sir-codesalot"}, "is_accepted": false, "score": -1, "last_activity_date": 1523779130, "creation_date": 1523779130, "answer_id": 49839720, "question_id": 49784193, "link": "https://stackoverflow.com/questions/49784193/issue-with-higher-order-function-as-a-binding-adapter/49839720#49839720", "title": "Issue with higher order function as a binding adapter", "body": "<p>The declaration <code>() -&gt; Unit</code> suggests a function which takes no input and returns nothing (<code>Unit</code> is the return type in this statement). Your function should look like this:</p>\n\n<pre><code>fun testFunction() = {}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3516, "user_id": 5110595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19aXD.jpg?s=128&g=1", "display_name": "Hemant Parmar", "link": "https://stackoverflow.com/users/5110595/hemant-parmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1524207764, "creation_date": 1524207764, "answer_id": 49935889, "question_id": 49784193, "link": "https://stackoverflow.com/questions/49784193/issue-with-higher-order-function-as-a-binding-adapter/49935889#49935889", "title": "Issue with higher order function as a binding adapter", "body": "<p>In the <a href=\"https://developer.android.com/topic/libraries/data-binding/index.html#event_handling\" rel=\"nofollow noreferrer\">Event Handling</a> section I came across this line:</p>\n\n<p>In Listener Bindings, only your return value must match the expected return value of the listener (unless it is expecting void)</p>\n\n<p>For more about error : </p>\n\n<blockquote>\n  <p>cannot generate view binders java.lang.StackOverflowError</p>\n</blockquote>\n\n<p>read <a href=\"https://n8ebel.github.io/2017-07-27-bug-busting-databinding-onLongClick/\" rel=\"nofollow noreferrer\">this</a> article. hope it will help you!!</p>\n"}, {"comments": [{"owner": {"reputation": 2259, "user_id": 4254527, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/w1DSa.png?s=128&g=1", "display_name": "Saman Sattari", "link": "https://stackoverflow.com/users/4254527/saman-sattari"}, "edited": false, "score": 4, "creation_date": 1550069499, "post_id": 49946797, "comment_id": 96135690, "body": "And if we want to pass a parameter to that function?"}, {"owner": {"reputation": 6835, "user_id": 6305235, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/kEy0G.jpg?s=128&g=1", "display_name": "David Miguel", "link": "https://stackoverflow.com/users/6305235/david-miguel"}, "edited": false, "score": 0, "creation_date": 1601483852, "post_id": 49946797, "comment_id": 113424804, "body": "if you need to pass parameters use SAM interfaces. See <a href=\"https://stackoverflow.com/a/54564239/6305235\">stackoverflow.com/a/54564239/6305235</a>"}], "tags": [], "owner": {"reputation": 718, "user_id": 1852422, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ea7d161eeea961f1f244e39b2d240809?s=128&d=identicon&r=PG", "display_name": "Vibin", "link": "https://stackoverflow.com/users/1852422/vibin"}, "is_accepted": true, "score": 11, "last_activity_date": 1524244809, "creation_date": 1524244809, "answer_id": 49946797, "question_id": 49784193, "link": "https://stackoverflow.com/questions/49784193/issue-with-higher-order-function-as-a-binding-adapter/49946797#49946797", "title": "Issue with higher order function as a binding adapter", "body": "<p>Use <code>function: Runnable</code> instead of <code>function: () -&gt; Unit</code>.</p>\n\n<p>Android's data-binding compiler generates java code, to which, your kotlin function's signature looks like <code>void testFunction()</code>, as kotlin adapts Unit as void when calling from java. </p>\n\n<p>On the other hand, <code>() -&gt; Unit</code> looks like <code>kotlin.jvm.functions.Function0</code> which is a function which takes 0 inputs and returns Unit.INSTANCE.</p>\n\n<p>As you can see these two function signatures don't match, and that's why the compilation fails.</p>\n"}, {"tags": [], "owner": {"reputation": 1130, "user_id": 2825721, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/2r0fO.jpg?s=128&g=1", "display_name": "Shashank Kumar", "link": "https://stackoverflow.com/users/2825721/shashank-kumar"}, "is_accepted": false, "score": -1, "last_activity_date": 1545853266, "creation_date": 1545853266, "answer_id": 53936407, "question_id": 49784193, "link": "https://stackoverflow.com/questions/49784193/issue-with-higher-order-function-as-a-binding-adapter/53936407#53936407", "title": "Issue with higher order function as a binding adapter", "body": "<p>Put <code>apply plugin: 'kotlin-kapt'</code> in build.gradle</p>\n\n<p>Then you can create Binding Adapter like </p>\n\n<pre><code>@JvmStatic\n@BindingAdapter(\"onDelayedClick\")\nfun onDelayedClick(view: View, function: () -&gt; Unit) {\n    // TODO: Do something\n}\n</code></pre>\n\n<p>And XML Like</p>\n\n<pre><code>&lt;View\n   android:id=\"@+id/test_view\"\n   android:layout_width=\"wrap_content\"\n   android:layout_height=\"wrap_content\"\n   app:onDelayedClick=\"@{viewModel.testFunction}\"/&gt;\n</code></pre>\n\n<p>And VM Like </p>\n\n<pre><code>val testFunction =  {\n    // TODO: Do something\n}\n</code></pre>\n"}], "owner": {"reputation": 3573, "user_id": 5564847, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aqnwlPrpnW0/AAAAAAAAAAI/AAAAAAAAABg/kED99SX86V0/photo.jpg?sz=128", "display_name": "Eric Bachhuber", "link": "https://stackoverflow.com/users/5564847/eric-bachhuber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2555, "favorite_count": 4, "accepted_answer_id": 49946797, "answer_count": 4, "score": 15, "last_activity_date": 1545853266, "creation_date": 1523479523, "question_id": 49784193, "link": "https://stackoverflow.com/questions/49784193/issue-with-higher-order-function-as-a-binding-adapter", "title": "Issue with higher order function as a binding adapter", "body": "<p>I am running into issues trying to take a function as a parameter in a binding adapter using Kotlin/Android databinding. This example code throws <code>e: error: cannot generate view binders java.lang.StackOverflowError</code> when building with no other useful info in the log. </p>\n\n<p>Here is my binding adapter:</p>\n\n<pre><code>@JvmStatic\n@BindingAdapter(\"onDelayedClick\")\nfun onDelayedClick(view: View, function: () -&gt; Unit) {\n    // TODO: Do something\n}\n</code></pre>\n\n<p>XML:</p>\n\n<pre><code>        &lt;View\n            android:id=\"@+id/test_view\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            app:onDelayedClick=\"@{() -&gt; viewModel.testFunction()}\"/&gt;\n</code></pre>\n\n<p>and method in my ViewModel: </p>\n\n<pre><code>fun testFunction() = Unit\n</code></pre>\n\n<p>I have been struggling with this for a bit now and nothing I've tried works, so any help is appreciated.</p>\n"}, {"tags": ["android", "kotlin", "rx-java", "reactive-programming", "rx-kotlin"], "comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1523516992, "post_id": 49782036, "comment_id": 86595122, "body": "<code>thread {</code>? Starting background threads inside RxJava subscribers? Then what&#39;s <code>observeOn()</code> and <code>subscribeOn()</code> for?"}, {"owner": {"reputation": 388, "user_id": 5420543, "user_type": "registered", "profile_image": "https://graph.facebook.com/1174542545893023/picture?type=large", "display_name": "Jhon Fredy Trujillo Ortega", "link": "https://stackoverflow.com/users/5420543/jhon-fredy-trujillo-ortega"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1523547355, "post_id": 49782036, "comment_id": 86615927, "body": "That is because val enclosures = App.... retrieve info from a room table. Observe on is useful in MainThread in case I want to notify de UI any changes. Do you recommend any changes?"}], "answers": [{"comments": [{"owner": {"reputation": 388, "user_id": 5420543, "user_type": "registered", "profile_image": "https://graph.facebook.com/1174542545893023/picture?type=large", "display_name": "Jhon Fredy Trujillo Ortega", "link": "https://stackoverflow.com/users/5420543/jhon-fredy-trujillo-ortega"}, "edited": false, "score": 0, "creation_date": 1523473548, "post_id": 49782471, "comment_id": 86580671, "body": "Being honest I don&#39;t see how to do it xD, can you post an example plz? Also, I was wondering I can implement in each Observable the doOnNext method an in that way each method knows the type of the callback. What do you think with that?"}, {"owner": {"reputation": 388, "user_id": 5420543, "user_type": "registered", "profile_image": "https://graph.facebook.com/1174542545893023/picture?type=large", "display_name": "Jhon Fredy Trujillo Ortega", "link": "https://stackoverflow.com/users/5420543/jhon-fredy-trujillo-ortega"}, "edited": false, "score": 0, "creation_date": 1523476350, "post_id": 49782471, "comment_id": 86582162, "body": "Tnx for the answer, I&#39;m gonna implement it and see what happens. :D"}, {"owner": {"reputation": 604, "user_id": 3622901, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/632913115/picture?type=large", "display_name": "trpride", "link": "https://stackoverflow.com/users/3622901/trpride"}, "reply_to_user": {"reputation": 388, "user_id": 5420543, "user_type": "registered", "profile_image": "https://graph.facebook.com/1174542545893023/picture?type=large", "display_name": "Jhon Fredy Trujillo Ortega", "link": "https://stackoverflow.com/users/5420543/jhon-fredy-trujillo-ortega"}, "edited": false, "score": 0, "creation_date": 1523552947, "post_id": 49782471, "comment_id": 86619225, "body": "hey @JhonFredyTrujilloOrtega if this helped, could you please accept the answer?"}], "tags": [], "owner": {"reputation": 604, "user_id": 3622901, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/632913115/picture?type=large", "display_name": "trpride", "link": "https://stackoverflow.com/users/3622901/trpride"}, "is_accepted": true, "score": 2, "last_activity_date": 1523474181, "last_edit_date": 1523474181, "creation_date": 1523472572, "answer_id": 49782471, "question_id": 49782036, "link": "https://stackoverflow.com/questions/49782036/how-to-merge-multiple-observables-with-diferents-call-backs-into-one-single-stre/49782471#49782471", "title": "How to Merge multiple Observables with diferents call backs into one single Stream?", "body": "<p>Well yes, but there would be a small bit of work required, you can use <code>concat</code> operator which takes care of the ordering for you and pass it a list of <code>observables</code> in order and then subscribe to it using a single observer which expects <code>Any</code> event to trickle down to it.</p>\n\n<p>To be strict on type safety you can mark your observable source types with a common interface and use instance check to take actions specific to the event type.</p>\n\n<p>Check more <a href=\"http://reactivex.io/documentation/operators/concat.html\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>Code example -</p>\n\n<pre><code>fun concatCalls(): Observable&lt;Any&gt; {\n    return Observable.concat(src1, src2, ...)\n}\n</code></pre>\n\n<p>The consumer would look like this then -</p>\n\n<pre><code>concatCalls().subscribe(object: Subscriber&lt;Any&gt; {\n    override fun onNext(o: Any) {\n       when (o) {\n           is Object1 -&gt; // do handling for stuff emitted by src1\n           is Object2 -&gt; // do handling for stuff emitted by src2\n           ....\n           else // skip\n    }\n    ....\n})\n</code></pre>\n"}], "owner": {"reputation": 388, "user_id": 5420543, "user_type": "registered", "profile_image": "https://graph.facebook.com/1174542545893023/picture?type=large", "display_name": "Jhon Fredy Trujillo Ortega", "link": "https://stackoverflow.com/users/5420543/jhon-fredy-trujillo-ortega"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1202, "favorite_count": 0, "accepted_answer_id": 49782471, "answer_count": 1, "score": 0, "last_activity_date": 1523474181, "creation_date": 1523470963, "question_id": 49782036, "link": "https://stackoverflow.com/questions/49782036/how-to-merge-multiple-observables-with-diferents-call-backs-into-one-single-stre", "title": "How to Merge multiple Observables with diferents call backs into one single Stream?", "body": "<p>I have this problem. I'm trying to sync a local database into my android app with a remote app. I'm creating the logic to upload the new info created locally and the server responds with the remote id save it in the server. To archive this, I'm using a method that takes an array of objects an return an Observable which emit the response of the server for each element.\nLike this.</p>\n\n<pre><code>val dailyEntries = App.db.dailyEntryDao().getDailyEntriesCreated()\n            dailyEntries.sync(context) //Return an observable\n                    .observeOn(AndroidSchedulers.mainThread())\n                    .subscribe({                        \n                        val response = DailyEntry(it)//Creates a daily entry using \n                                                      the response from the server\n                        thread {                                \n                          App.db.dailyEntryDao().update(response)\n                        }\n                    }, {\n                        it.printStackTrace()\n                    }, {\n                        uploadEnclosures()\n                    })\n</code></pre>\n\n<p>How you can see, in the onSuccess from the current observable calls another method. It uses the same logic and is showing ahead. </p>\n\n<pre><code>private fun uploadEnclosures() {\n        thread {\n            val enclosures = App.db.enclosureDao().getEnclosuresCreated()\n            enclosures.sync(context)\n                    .observeOn(AndroidSchedulers.mainThread())\n                    .subscribe({\n                        val response = Enclosure(it)\n                        thread {                                \n                            App.db.enclosureDao().update(response)\n                        }\n                    }, {\n                        it.printStackTrace()\n                    }, {\n                        uploadSmokeTest()\n                    })\n        }\n    }\n</code></pre>\n\n<p>It goes on with all the tables. Always we perform the update of the next table in the onSuccess of the current Observable. It is done like this because i need to make the sync in a specific order.</p>\n\n<p>My question is, Is there a way to merge all these Observables in just one to perform a single Subscribe and controlling each onNext emotion?</p>\n\n<p>Thanks for the answers </p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 26172, "user_id": 49746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IAAg.jpg?s=128&g=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/49746/todd"}, "is_accepted": true, "score": 2, "last_activity_date": 1523470682, "creation_date": 1523470682, "answer_id": 49781962, "question_id": 49781901, "link": "https://stackoverflow.com/questions/49781901/type-safe-builder-example-kotlin/49781962#49781962", "title": "type-safe builder example kotlin", "body": "<p>You need to assign to <code>name</code>.  This ended up working for me...</p>\n\n<pre><code>var p = person {\n    age = 22\n    gender = \"male\"\n    name = name {\n        first = \"Ali\"\n        last = \"Rezaei\"\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": false, "score": 4, "last_activity_date": 1523472804, "creation_date": 1523472804, "answer_id": 49782531, "question_id": 49781901, "link": "https://stackoverflow.com/questions/49781901/type-safe-builder-example-kotlin/49782531#49782531", "title": "type-safe builder example kotlin", "body": "<p>You could make <code>name</code> an extension function on <code>Person</code> that assigns the <code>Name</code> to the <code>Person</code> instead of returning it:</p>\n\n<pre><code>fun Person.name(init: Name.() -&gt; Unit) {\n    val n = Name()\n    n.init()\n    this.name = n\n}\n</code></pre>\n\n<p>You could even consider a more concise syntax for the same, like this:</p>\n\n<pre><code>fun Person.name(init: Name.() -&gt; Unit) {\n    this.name = Name().apply(init)\n}\n</code></pre>\n\n<hr>\n\n<p>Shameless plug for my <a href=\"https://github.com/zsmb13/VillageDSL\" rel=\"nofollow noreferrer\">repository</a> discussing DSL design and containing examples.</p>\n"}], "owner": {"reputation": 8398, "user_id": 1315447, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/6YH8k.jpg?s=128&g=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/1315447/ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 49781962, "answer_count": 2, "score": 0, "last_activity_date": 1523472804, "creation_date": 1523470441, "question_id": 49781901, "link": "https://stackoverflow.com/questions/49781901/type-safe-builder-example-kotlin", "title": "type-safe builder example kotlin", "body": "<p>I want to have following person object in Kotlin : </p>\n\n<pre><code>       var p = person {\n            age = 22\n            gender = \"male\"\n            name {\n                first = \"Ali\"\n                last = \"Rezaei\"\n            }\n        }\n</code></pre>\n\n<p>I have following code to build it : </p>\n\n<pre><code>data class Person(var age: Int? = null, var gender: String? = null\n                      , var name : Name? = null) {\n    }\n\n    fun name(init: Name.() -&gt; Unit): Name {\n        val n = Name()\n        n.init()\n        return n\n    }\n\n    data class Name(var first: String? = null, var last : String? = null)\n\n    fun person(init: Person.() -&gt; Unit): Person {\n        val p = Person()\n        p.init()\n        return p\n    }\n</code></pre>\n\n<p>But when I print it, the result is following : </p>\n\n<pre><code>Person(age=22, gender=\"male\", name=null)\n</code></pre>\n\n<p>What is wrong with my code?</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 11316, "user_id": 4551041, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/dGGsC.jpg?s=128&g=1", "display_name": "H. Pauwelyn", "link": "https://stackoverflow.com/users/4551041/h-pauwelyn"}, "edited": false, "score": 0, "creation_date": 1523467568, "post_id": 49781110, "comment_id": 86577606, "body": "Can you share what you&#39;ve tried so far so we could help you?"}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 8301891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1e3a796f6bd4b0219fdea2dc543cde3?s=128&d=identicon&r=PG&f=1", "display_name": "Samer", "link": "https://stackoverflow.com/users/8301891/samer"}, "edited": false, "score": 0, "creation_date": 1523468699, "post_id": 49781398, "comment_id": 86578184, "body": "It gives me error &quot;Unresolved reference setSupportActionBar&quot;"}, {"owner": {"reputation": 375, "user_id": 8043759, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e9d95dc6eb7c91c353d363d3378348e3?s=128&d=identicon&r=PG", "display_name": "user221256", "link": "https://stackoverflow.com/users/8043759/user221256"}, "reply_to_user": {"reputation": 89, "user_id": 8301891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1e3a796f6bd4b0219fdea2dc543cde3?s=128&d=identicon&r=PG&f=1", "display_name": "Samer", "link": "https://stackoverflow.com/users/8301891/samer"}, "edited": false, "score": 0, "creation_date": 1523469062, "post_id": 49781398, "comment_id": 86578371, "body": "@Samer Can you post more details?"}], "tags": [], "owner": {"reputation": 375, "user_id": 8043759, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e9d95dc6eb7c91c353d363d3378348e3?s=128&d=identicon&r=PG", "display_name": "user221256", "link": "https://stackoverflow.com/users/8043759/user221256"}, "is_accepted": false, "score": -1, "last_activity_date": 1523468511, "creation_date": 1523468511, "answer_id": 49781398, "question_id": 49781110, "link": "https://stackoverflow.com/questions/49781110/calling-setsupportactionbar-in-a-fragment/49781398#49781398", "title": "Calling setSupportActionBar in a fragment", "body": "<pre><code>activity.setSupportActionBar(toolbar)\n</code></pre>\n\n<p>Also in most recent support library versions, where the activity property is of nullable type, you might use safe call: </p>\n\n<pre><code>activity?.setSupportActionBar(toolbar)\n</code></pre>\n\n<p>Or double exclamation mark:</p>\n\n<pre><code>activity!!.setSupportActionBar(toolbar)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2935, "user_id": 3808228, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NyJ7J.jpg?s=128&g=1", "display_name": "Chisko", "link": "https://stackoverflow.com/users/3808228/chisko"}, "is_accepted": false, "score": 0, "last_activity_date": 1523473209, "last_edit_date": 1523473209, "creation_date": 1523473104, "answer_id": 49782605, "question_id": 49781110, "link": "https://stackoverflow.com/questions/49781110/calling-setsupportactionbar-in-a-fragment/49782605#49782605", "title": "Calling setSupportActionBar in a fragment", "body": "<p>The <a href=\"https://developer.android.com/reference/android/support/v7/app/AppCompatActivity.html\" rel=\"nofollow noreferrer\">AppCompatActivity documentation</a> states that <code>getSupportActionBar()</code> is an instance method. By doing <code>AppCompatActivity().setSupportActionBar(toolbar)</code> you are calling the constructor without assigning the reference to a variable and then expecting that instance to call the method, similar to what would be a static method. This is not how it works. By now you should start seeing that by the way you are doing things, you are not referencing your host activity, so attempting to set the toolbar would not work even if the syntax was correct.</p>\n\n<p>As for the fragment, you get the hosting activity instance via its <code>activity</code> member. There is no <code>activity.supportActionBar</code> because it has been encapsulated for you in <code>activity.actionBar</code>. </p>\n\n<p>You can use the autocomplete to find out more about the possible methods that can be used.</p>\n"}, {"tags": [], "owner": {"reputation": 10844, "user_id": 7765139, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1JCJG0Q4b8I/AAAAAAAAAAI/AAAAAAAAB1w/2ghArTJ7KEs/photo.jpg?sz=128", "display_name": "Levi Moreira", "link": "https://stackoverflow.com/users/7765139/levi-moreira"}, "is_accepted": true, "score": 5, "last_activity_date": 1523473825, "creation_date": 1523473825, "answer_id": 49782801, "question_id": 49781110, "link": "https://stackoverflow.com/questions/49781110/calling-setsupportactionbar-in-a-fragment/49782801#49782801", "title": "Calling setSupportActionBar in a fragment", "body": "<p>As you're using Kotlin you can try to smart cast the activity to AppCompatActivity and then you can access the support action bar:</p>\n\n<pre><code>(activity as AppCompatActivity).supportActionBar\n</code></pre>\n\n<p>Note that this will only work if your host activity extends AppCompatActivity.</p>\n"}], "owner": {"reputation": 89, "user_id": 8301891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1e3a796f6bd4b0219fdea2dc543cde3?s=128&d=identicon&r=PG&f=1", "display_name": "Samer", "link": "https://stackoverflow.com/users/8301891/samer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5124, "favorite_count": 0, "accepted_answer_id": 49782801, "answer_count": 3, "score": 2, "last_activity_date": 1523476840, "creation_date": 1523467420, "last_edit_date": 1523476840, "question_id": 49781110, "link": "https://stackoverflow.com/questions/49781110/calling-setsupportactionbar-in-a-fragment", "title": "Calling setSupportActionBar in a fragment", "body": "<p>How can I call <code>setSupportActionBar</code> in a fragment in kotlin language .\n I have a mainActivity with a navigation drawer. When I click on the first item of the navigation drawer it should opens a notesFragment . I want to set a toolBar for the notesFragment. When I tried to use <code>AppCompatActivity().setSupportActionBar(toolbar_top)</code> the app crashes when I click on the first item of the navigation drawer, with the error </p>\n\n<blockquote>\n  <p>java.lang.NullPointerException: Attempt to invoke virtual method 'android.view.Window$Callback android.view.Window.getCallback()' on a null object reference</p>\n</blockquote>\n\n<pre><code>class notesFragment:Fragment(){\n    override fun onCreateView(inflater: LayoutInflater?, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n\n        AppCompatActivity().setSupportActionBar(toolbar_top)\n        AppCompatActivity().getSupportActionBar()!!.setDisplayShowTitleEnabled(false)\n        fragments()\n\n        AppCompatActivity().getSupportActionBar()!!.setDisplayHomeAsUpEnabled(true)\n\n        return inflater!!.inflate(R.layout.main_fragment,null)\n    }\n\n    fun fragments() {\n        var tabLayout=tab\n        var viewPager=viewPager\n        var adapter=viewPagerAdapterMainActivity(AppCompatActivity().supportFragmentManager)\n        adapter.addFragment(firstFragment(),\"first\")\n        adapter.addFragment(secondFragment(),\"second\")\n        adapter.addFragment(thirdFragment(),\"third\")\n\n        viewPager.adapter=adapter\n        tabLayout.setupWithViewPager(viewPager)\n    }\n\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "commonsware-cwac"], "comments": [{"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 1, "creation_date": 1523467640, "post_id": 49781067, "comment_id": 86577649, "body": "See <a href=\"https://github.com/sqlcipher/android-database-sqlcipher/issues/98\" rel=\"nofollow noreferrer\">this issue</a>. Check your ProGuard settings and make sure that your APK has the right compiled editions of the <code>.so</code> files, for whatever architectures you are trying to support. BTW, CWAC-SafeRoom is up to <code>0.3.4</code>."}], "owner": {"reputation": 775, "user_id": 2052937, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sZA9q.jpg?s=128&g=1", "display_name": "Douglas Mesquita", "link": "https://stackoverflow.com/users/2052937/douglas-mesquita"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 693, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1523467239, "creation_date": 1523467239, "question_id": 49781067, "link": "https://stackoverflow.com/questions/49781067/how-do-i-set-up-saferoom-0-0-4-in-my-project-correctly", "title": "how do I set up SafeRoom.0.0.4 in my project correctly", "body": "<p>I'm trying to set up Safe-room lib in my project but I got a mysterious error. </p>\n\n<p>For this example, I'm using todo-mvp by Google, so they're using Dagger2 and RxJava.</p>\n\n<p>in TodoDatabase.class I have the bunch of code:</p>\n\n<pre><code>fun getInstance(context: Context): ToDoDatabase {\n        synchronized(lock) {\n            if (INSTANCE == null) {\n\n                val admin = \"password123\".toCharArray()\n\n                val factory = SafeHelperFactory(admin)\n\n                INSTANCE = Room.databaseBuilder(context.applicationContext, ToDoDatabase::class.java, \"Tasks.db\")\n                        .openHelperFactory(factory)\n                        .build()\n\n                SQLCipherUtils.encrypt(context, \"Tasks.db\", admin)\n                val state = SQLCipherUtils.getDatabaseState(context, \"Tasks.db\")\n\n                if (state.name == SQLCipherUtils.State.ENCRYPTED.name)\n                    Log.e(\"test\", \"Database encrypted - $state\")\n                else\n                    Log.e(\"test\", \"Database encrypted - $state\")\n\n            }\n            return INSTANCE!!\n        }\n    }\n</code></pre>\n\n<p>After executing this line <code>INSTANCE = Room.databaseBuilder(context.applicationContext, ToDoDatabase::class.java, \"Tasks.db\").openHelperFactory(factory).build()</code></p>\n\n<p>I caught the error:</p>\n\n<pre><code>E/art: Failed to register native method net.sqlcipher.database.SQLiteDatabase.native_getDbLookaside()I in /data/app/com.example.android.architecture.blueprints.todomvp.mock-1/split_lib_dependencies_apk.apk:classes5.dex\n----- class 'Lnet/sqlcipher/database/SQLiteDatabase;' cl=0x12c81280 -----\n  objectSize=1096 (128 from super)\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1523467772, "post_id": 49780915, "comment_id": 86577711, "body": "I&#39;m assuming this is a JavaFX question, depending on your platform requirements you should look at the answers here <a href=\"https://stackoverflow.com/questions/550329/how-to-open-a-file-with-the-default-associated-program\" title=\"how to open a file with the default associated program\">stackoverflow.com/questions/550329/&hellip;</a>"}, {"owner": {"reputation": 365, "user_id": 5954246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49abda1fb6b581f05bb78257f1edf142?s=128&d=identicon&r=PG&f=1", "display_name": "codeconscious", "link": "https://stackoverflow.com/users/5954246/codeconscious"}, "edited": false, "score": 0, "creation_date": 1523468849, "post_id": 49780915, "comment_id": 86578263, "body": "This question is related to what? Android?"}, {"owner": {"reputation": 199, "user_id": 5362661, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-XkR0dilGr_c/AAAAAAAAAAI/AAAAAAAAAXc/Nr06IlOcpas/photo.jpg?sz=128", "display_name": "Delin Mathew", "link": "https://stackoverflow.com/users/5362661/delin-mathew"}, "reply_to_user": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1523517115, "post_id": 49780915, "comment_id": 86595177, "body": "@zsmb13 yes, it is a JavaFX related question but, the feature that I want should be defined in a Kotlin (.kt) file. I have to make this change in an already existing project."}, {"owner": {"reputation": 199, "user_id": 5362661, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-XkR0dilGr_c/AAAAAAAAAAI/AAAAAAAAAXc/Nr06IlOcpas/photo.jpg?sz=128", "display_name": "Delin Mathew", "link": "https://stackoverflow.com/users/5362661/delin-mathew"}, "reply_to_user": {"reputation": 365, "user_id": 5954246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49abda1fb6b581f05bb78257f1edf142?s=128&d=identicon&r=PG&f=1", "display_name": "codeconscious", "link": "https://stackoverflow.com/users/5954246/codeconscious"}, "edited": false, "score": 0, "creation_date": 1523517165, "post_id": 49780915, "comment_id": 86595203, "body": "@user5954246 Not related to Android."}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1523518834, "post_id": 49780915, "comment_id": 86596139, "body": "You can use the code that solves this in Java with minimal changes in Kotlin."}, {"owner": {"reputation": 365, "user_id": 5954246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49abda1fb6b581f05bb78257f1edf142?s=128&d=identicon&r=PG&f=1", "display_name": "codeconscious", "link": "https://stackoverflow.com/users/5954246/codeconscious"}, "edited": false, "score": 0, "creation_date": 1523520740, "post_id": 49780915, "comment_id": 86597203, "body": "this may be helpful <a href=\"https://stackoverflow.com/questions/35444264/how-do-i-write-to-a-file-in-kotlin\" title=\"how do i write to a file in kotlin\">stackoverflow.com/questions/35444264/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 199, "user_id": 5362661, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-XkR0dilGr_c/AAAAAAAAAAI/AAAAAAAAAXc/Nr06IlOcpas/photo.jpg?sz=128", "display_name": "Delin Mathew", "link": "https://stackoverflow.com/users/5362661/delin-mathew"}, "edited": false, "score": 0, "creation_date": 1523517320, "post_id": 49781026, "comment_id": 86595287, "body": "I think you answer is more related to Kotlin for Android because I am getting some errors when I use this code. Really sorry that I did not mention that the feature that I am looking for is not for Android."}], "tags": [], "owner": {"reputation": 98, "user_id": 9589162, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8e97w.jpg?s=128&g=1", "display_name": "Rizkita", "link": "https://stackoverflow.com/users/9589162/rizkita"}, "is_accepted": false, "score": 1, "last_activity_date": 1523467107, "creation_date": 1523467107, "answer_id": 49781026, "question_id": 49780915, "link": "https://stackoverflow.com/questions/49780915/kotlin-open-file-on-button-click/49781026#49781026", "title": "Kotlin Open file on button click", "body": "<p>In your activity</p>\n\n<pre><code>btnBack.setOnClickListener {\n\n    val intent = Intent()\n            .setType(\"*/*\")\n            .setAction(Intent.ACTION_GET_CONTENT)\n\n    startActivityForResult(Intent.createChooser(intent, \"Select a file\"), 111)\n\n}\n</code></pre>\n\n<p>still in your activity, insert this to catch the result</p>\n\n<pre><code>override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\n    super.onActivityResult(requestCode, resultCode, data)\n\n    if (requestCode == 111 &amp;&amp; resultCode == RESULT_OK) {\n        val selectedFile = data?.data //The uri with the location of the file\n    }\n}\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/a/49701868/9589162\">reference</a></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12285194, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vw12wkIYTxU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf8QZAxobPymT08BVQ7vBFEqsGpJA/photo.jpg?sz=128", "display_name": "Beltran Rodriguez", "link": "https://stackoverflow.com/users/12285194/beltran-rodriguez"}, "is_accepted": false, "score": 0, "last_activity_date": 1572893954, "creation_date": 1572893954, "answer_id": 58699528, "question_id": 49780915, "link": "https://stackoverflow.com/questions/49780915/kotlin-open-file-on-button-click/58699528#58699528", "title": "Kotlin Open file on button click", "body": "<p>If you need to use this selectedFile path (@Rizkita answer) to read a text file, in onActivityResultfunction add something like this (Kotlin):</p>\n\n<pre><code>  override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\n        super.onActivityResult(requestCode, resultCode, data)\n\n        if (requestCode == 111 &amp;&amp; resultCode == AppCompatActivity.RESULT_OK) {\n            val selectedFile = data?.data //The uri with the location of the file\n\n            // Get the File path from the Uri\n\n            println(selectedFile?.lastPathSegment)\n            val path = selectedFile?.lastPathSegment.toString().removePrefix(\"raw:\")\n            println(path)\n            text_reader.setText(getTextContent(path))\n        }\n    }\n\n\nfun getTextContent(pathFilename: String): String {\n\n    val fileobj = File( pathFilename )\n\n    if (!fileobj.exists()) {\n\n        println(\"Path does not exist\")\n\n    } else {\n\n        println(\"Path to read exist\")\n    }\n\n    println(\"Path to the file:\")\n    println(pathFilename)\n\n    if (fileobj.exists() &amp;&amp; fileobj.canRead()) {\n\n        var ins: InputStream = fileobj.inputStream()\n        var content = ins.readBytes().toString(Charset.defaultCharset())\n        return content\n\n    }else{\n\n        return \"Some error, Not found the File, or app has not permissions: \" + pathFilename\n    }\n}\n</code></pre>\n\n<blockquote>\n  <p>Note that in my example text_reader is just the id of a TextView object in the .xml layout file.</p>\n</blockquote>\n"}], "owner": {"reputation": 199, "user_id": 5362661, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-XkR0dilGr_c/AAAAAAAAAAI/AAAAAAAAAXc/Nr06IlOcpas/photo.jpg?sz=128", "display_name": "Delin Mathew", "link": "https://stackoverflow.com/users/5362661/delin-mathew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1849, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1572893954, "creation_date": 1523466693, "last_edit_date": 1523517456, "question_id": 49780915, "link": "https://stackoverflow.com/questions/49780915/kotlin-open-file-on-button-click", "title": "Kotlin Open file on button click", "body": "<p>I am new to Kotlin. Can someone please tell me how to open a file on click of a button? Is there some command like:</p>\n\n<pre><code>Button.setOnAction {\nFile.Open(*//specified file path*)  \n        }\n</code></pre>\n\n<p>I am using <strong>Kotlin for Java development</strong> and not for andriod. I have a <strong>.fxml</strong> file where I have defined this button and I need to define the above feature in a kotlin (.kt) file. Thank you. </p>\n"}, {"tags": ["maven", "kotlin", "kotlin-maven-plugin"], "comments": [{"owner": {"reputation": 2935, "user_id": 3808228, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NyJ7J.jpg?s=128&g=1", "display_name": "Chisko", "link": "https://stackoverflow.com/users/3808228/chisko"}, "edited": false, "score": 0, "creation_date": 1523465223, "post_id": 49780432, "comment_id": 86576409, "body": "is this kotlin or javascript?"}, {"owner": {"reputation": 17624, "user_id": 360811, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/M35XG.jpg?s=128&g=1", "display_name": "shabunc", "link": "https://stackoverflow.com/users/360811/shabunc"}, "reply_to_user": {"reputation": 2935, "user_id": 3808228, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NyJ7J.jpg?s=128&g=1", "display_name": "Chisko", "link": "https://stackoverflow.com/users/3808228/chisko"}, "edited": false, "score": 0, "creation_date": 1523465254, "post_id": 49780432, "comment_id": 86576432, "body": "it&#39;s kotlin compiled to javasciprt"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 1, "creation_date": 1523465354, "post_id": 49780432, "comment_id": 86576488, "body": "If switching to Gradle is an option, <a href=\"https://github.com/kotlin/kotlin-frontend-plugin\" rel=\"nofollow noreferrer\">github.com/kotlin/kotlin-frontend-plugin</a> will take care of this for you. JetBrains does not provide an equivalent plugin for Maven."}, {"owner": {"reputation": 17624, "user_id": 360811, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/M35XG.jpg?s=128&g=1", "display_name": "shabunc", "link": "https://stackoverflow.com/users/360811/shabunc"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1523483449, "post_id": 49780432, "comment_id": 86585313, "body": "@yole what about npm package, kotlinc-js-api? it&#39;s easier to embed in our maven build."}], "owner": {"reputation": 17624, "user_id": 360811, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/M35XG.jpg?s=128&g=1", "display_name": "shabunc", "link": "https://stackoverflow.com/users/360811/shabunc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 153, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1523464937, "creation_date": 1523464937, "question_id": 49780432, "link": "https://stackoverflow.com/questions/49780432/how-to-bundle-kotlinjs-dependencies-into-a-single-file", "title": "How to bundle kotlinjs dependencies into a single file", "body": "<p>Both from reading documentation and experimentation it's relatively easy to configure <code>kotlin-maven-plugin</code> in a multimodule maven project so that kotlin code in one module depending on code in some other module successfully resolves this dependency.</p>\n\n<p>However, I don't understand how bundle all dependencies into a single file but rather used all compiled files independently. </p>\n\n<p>So, my question is - speaking of maven, what is the minimal configuration for compiling to javascript target and bundle all project dependencies into a file?</p>\n"}, {"tags": ["kotlin", "appium", "selenide"], "comments": [{"owner": {"reputation": 162, "user_id": 6537905, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/daafef9ebeb1761a43416cbac9db0b76?s=128&d=identicon&r=PG&f=1", "display_name": "Viterzgir", "link": "https://stackoverflow.com/users/6537905/viterzgir"}, "edited": false, "score": 0, "creation_date": 1525273546, "post_id": 49779557, "comment_id": 87293998, "body": "Still cannot fix this :( any help?"}], "answers": [{"comments": [{"owner": {"reputation": 162, "user_id": 6537905, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/daafef9ebeb1761a43416cbac9db0b76?s=128&d=identicon&r=PG&f=1", "display_name": "Viterzgir", "link": "https://stackoverflow.com/users/6537905/viterzgir"}, "edited": false, "score": 0, "creation_date": 1523518168, "post_id": 49788078, "comment_id": 86595765, "body": "Yes, I do <code>element.clear()</code> before <code>element.sendKeys(&quot;val&quot;)</code>. I also tried to use <code>element.value = &quot;val&quot;</code> and without <code>.clear()</code>. 5.0.4 version didn&#39;t help either."}, {"owner": {"reputation": 909, "user_id": 5320558, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Mx1R2G4xfPs/AAAAAAAAAAI/AAAAAAAAAFg/FQtMUfl9LhM/photo.jpg?sz=128", "display_name": "Wasiq Bhamla", "link": "https://stackoverflow.com/users/5320558/wasiq-bhamla"}, "reply_to_user": {"reputation": 162, "user_id": 6537905, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/daafef9ebeb1761a43416cbac9db0b76?s=128&d=identicon&r=PG&f=1", "display_name": "Viterzgir", "link": "https://stackoverflow.com/users/6537905/viterzgir"}, "edited": false, "score": 0, "creation_date": 1523518722, "post_id": 49788078, "comment_id": 86596072, "body": "Can you try one more thing, tap on that element before clear and sendkeys."}, {"owner": {"reputation": 162, "user_id": 6537905, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/daafef9ebeb1761a43416cbac9db0b76?s=128&d=identicon&r=PG&f=1", "display_name": "Viterzgir", "link": "https://stackoverflow.com/users/6537905/viterzgir"}, "edited": false, "score": 0, "creation_date": 1523520308, "post_id": 49788078, "comment_id": 86596966, "body": "weird, I&#39;m getting an error <code>com.sun.proxy.$Proxy8 cannot be cast to org.openqa.selenium.internal.HasIdentity</code> on <code>action.tap(element)</code>. Don&#39;t know what&#39;s happening."}, {"owner": {"reputation": 909, "user_id": 5320558, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Mx1R2G4xfPs/AAAAAAAAAAI/AAAAAAAAAFg/FQtMUfl9LhM/photo.jpg?sz=128", "display_name": "Wasiq Bhamla", "link": "https://stackoverflow.com/users/5320558/wasiq-bhamla"}, "reply_to_user": {"reputation": 162, "user_id": 6537905, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/daafef9ebeb1761a43416cbac9db0b76?s=128&d=identicon&r=PG&f=1", "display_name": "Viterzgir", "link": "https://stackoverflow.com/users/6537905/viterzgir"}, "edited": false, "score": 0, "creation_date": 1523522121, "post_id": 49788078, "comment_id": 86597974, "body": "Can you also try clicking on it instead of tap?"}, {"owner": {"reputation": 162, "user_id": 6537905, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/daafef9ebeb1761a43416cbac9db0b76?s=128&d=identicon&r=PG&f=1", "display_name": "Viterzgir", "link": "https://stackoverflow.com/users/6537905/viterzgir"}, "edited": false, "score": 0, "creation_date": 1523522331, "post_id": 49788078, "comment_id": 86598090, "body": "I tried. It clicks. I also verify that element is <code>visible</code> before <code>.clear()</code>. Element is cleared but then it throws the error that it doesn&#39;t exist. When I don&#39;t use <code>Appium Keyboard</code> I see standard Android Keyboard appears when field is focused. But it doesn&#39;t enter any data."}, {"owner": {"reputation": 909, "user_id": 5320558, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Mx1R2G4xfPs/AAAAAAAAAAI/AAAAAAAAAFg/FQtMUfl9LhM/photo.jpg?sz=128", "display_name": "Wasiq Bhamla", "link": "https://stackoverflow.com/users/5320558/wasiq-bhamla"}, "reply_to_user": {"reputation": 162, "user_id": 6537905, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/daafef9ebeb1761a43416cbac9db0b76?s=128&d=identicon&r=PG&f=1", "display_name": "Viterzgir", "link": "https://stackoverflow.com/users/6537905/viterzgir"}, "edited": false, "score": 0, "creation_date": 1523544310, "post_id": 49788078, "comment_id": 86613737, "body": "Did you try using only Appium alone instead of using it with Selenide and kotlin? Because there&#39;s no reason why it shouldn&#39;t work. I&#39;ve used my own Appium wrapper framework and it worked alright."}, {"owner": {"reputation": 162, "user_id": 6537905, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/daafef9ebeb1761a43416cbac9db0b76?s=128&d=identicon&r=PG&f=1", "display_name": "Viterzgir", "link": "https://stackoverflow.com/users/6537905/viterzgir"}, "edited": false, "score": 0, "creation_date": 1524053861, "post_id": 49788078, "comment_id": 86814388, "body": "the problem is in outdated ChromeDriver but I cannot update it somehow :/"}], "tags": [], "owner": {"reputation": 909, "user_id": 5320558, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Mx1R2G4xfPs/AAAAAAAAAAI/AAAAAAAAAFg/FQtMUfl9LhM/photo.jpg?sz=128", "display_name": "Wasiq Bhamla", "link": "https://stackoverflow.com/users/5320558/wasiq-bhamla"}, "is_accepted": false, "score": 1, "last_activity_date": 1523507797, "creation_date": 1523507797, "answer_id": 49788078, "question_id": 49779557, "link": "https://stackoverflow.com/questions/49779557/element-not-found-for-input-elements-on-selenide-appium/49788078#49788078", "title": "Element not found for Input elements on Selenide + Appium", "body": "<p>Did you tried using <code>element.sendKeys(\"your value\")</code> method to enter values and <code>element.clear()</code> to clear the text from the element?</p>\n\n<p>This approach works for me. Also avoid using beta version of Appium Java client and always use a stable version which is 5.0.4.</p>\n"}, {"tags": [], "owner": {"reputation": 162, "user_id": 6537905, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/daafef9ebeb1761a43416cbac9db0b76?s=128&d=identicon&r=PG&f=1", "display_name": "Viterzgir", "link": "https://stackoverflow.com/users/6537905/viterzgir"}, "is_accepted": false, "score": 0, "last_activity_date": 1525273721, "last_edit_date": 1525273721, "creation_date": 1524053717, "answer_id": 49899485, "question_id": 49779557, "link": "https://stackoverflow.com/questions/49779557/element-not-found-for-input-elements-on-selenide-appium/49899485#49899485", "title": "Element not found for Input elements on Selenide + Appium", "body": "<p>I found the problem. My test uses outdated ChromeDriver (chromedriver=2.33.506120). </p>\n\n<p>I don't know how to update it for this test. \n<code>WebDriverManager.chromedriver().version(\"2.37\").setup()</code> doesn't help. \n <code>System.setProperty(\"webdriver.chrome.driver\",\"path\\\\chromedriver_win32\\\\chromedriver.exe\")</code> either doesn't help. </p>\n\n<p>I also tried to do this: </p>\n\n<pre><code>val options = ChromeOptions()\noptions.addArguments(\"androidPackage\", \"com.android.chrome\")\ncapa.setCapability(ChromeOptions.CAPABILITY, options)`\n</code></pre>\n\n<p>EDIT: Worked with <code>capa.setCapability(\"chromedriverExecutable\", \"PATH\")</code> but why Selenide doesn't update ChromeDriver by itself?</p>\n"}], "owner": {"reputation": 162, "user_id": 6537905, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/daafef9ebeb1761a43416cbac9db0b76?s=128&d=identicon&r=PG&f=1", "display_name": "Viterzgir", "link": "https://stackoverflow.com/users/6537905/viterzgir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 508, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1525273721, "creation_date": 1523462091, "last_edit_date": 1525273696, "question_id": 49779557, "link": "https://stackoverflow.com/questions/49779557/element-not-found-for-input-elements-on-selenide-appium", "title": "Element not found for Input elements on Selenide + Appium", "body": "<p>I'm writing Android Web automated test using Kotlin+Selenide+Appium. There's already working Desktop Web version of those tests on Kotlin+Selenide. </p>\n\n<p><code>Koltin 1.2.31</code>\n<code>Selenide:4.11.1</code>\n<code>Appium:java-client:5.0.4</code>\n<code>Appium: 1.7.2</code></p>\n\n<p>Test starts, appium server starts, browser on my device starts, page opens, element is located but it cannot <code>setValue</code> for it. Test works well except for Input elements and manipulations on it.</p>\n\n<p>In test, I clear the field at first, then I set value for it. It actually find the element, clears it and then throws the error on that step (clear the field). So it clears the field but it also cannot found it???\nErrors that appear:</p>\n\n<p><code>Element not found {.project-scope-main-header-content-input &gt; div &gt; input}\nExpected: exist</code> </p>\n\n<p><code>Caused by: WebDriverException: unknown error: call function result missing 'value'</code></p>\n\n<p>I tried to run the tests with and without these 2 capabilities: </p>\n\n<p><code>capa.setCapability(\"unicodeKeyboard\", true)</code></p>\n\n<p><code>capa.setCapability(\"resetKeyboard\", true)</code></p>\n\n<p>Appreciate any help. Thanks. </p>\n\n<p>EDIT: The problem is in outdated ChromeDriver which I cannot update for some reasons. </p>\n\n<p>EDIT#2: \nHere's how I initialize it: \n`</p>\n\n<pre><code>lateinit var driver: AppiumDriver&lt;SelenideElement&gt;\nprivate val appiumServer = AppiumRunAndStop()\n\n@BeforeClass\n@Parameters(\"platform\")\nfun setUp(platform : String) {\n    appiumServer.restartServer()\n    when (platform) {\n        \"Android\" -&gt; {\n            val capa = DesiredCapabilities()\n            capa.setCapability(\"automationName\", \"Appium\")\n            //capa.setCapability(\"newCommandTimeout\", 150)\n            capa.setCapability(\"platformName\", \"Android\")\n            capa.setCapability(\"platformVersion\", \"8.1.0\")\n            capa.setCapability(\"deviceName\", \"Nexus 6P\")\n            capa.setCapability(\"browserName\", \"Chrome\")\n            capa.setCapability(\"unicodeKeyboard\", true)\n            capa.setCapability(\"resetKeyboard\", true)\n            capa.setCapability(\"chromedriverExecutable\", \"pathh\\\\chromedriver_win32\\\\chromedriver.exe\")\n            driver = AppiumDriver(URL(\"http://127.0.0.1:4723/wd/hub\"), capa)\n            sleep(2000)\n            WebDriverRunner.setWebDriver(driver)\n\n        }\n        \"iOS\" -&gt; {\n            //TO DO\n        }\n        else -&gt; println(\"Platform is not correct\")\n    }\n    Configuration.baseUrl = \"my_url\"\n}`\n</code></pre>\n\n<p>It works with this <code>capa.setCapability(\"chromedriverExecutable\", \"pathh\\\\chromedriver_win32\\\\chromedriver.exe\")</code> but I want it to autoupdate the ChromeDriver automatially.</p>\n"}, {"tags": ["android", "android-fragments", "kotlin"], "comments": [{"owner": {"reputation": 1055, "user_id": 3625488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LmX54.jpg?s=128&g=1", "display_name": "Anthony Cannon", "link": "https://stackoverflow.com/users/3625488/anthony-cannon"}, "edited": false, "score": 0, "creation_date": 1523462939, "post_id": 49779408, "comment_id": 86575077, "body": "Hi so just to clarify, you want EditText 1 and 2 to have the same focus when changing Fragments? So if EditText 1 is in focus and you change to Fragment 2, EditText 2 should also be in focus?"}], "answers": [{"tags": [], "owner": {"reputation": 2792, "user_id": 4853835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pDbHU.jpg?s=128&g=1", "display_name": "ygngy", "link": "https://stackoverflow.com/users/4853835/ygngy"}, "is_accepted": false, "score": 0, "last_activity_date": 1563195734, "last_edit_date": 1563195734, "creation_date": 1523463229, "answer_id": 49779954, "question_id": 49779408, "link": "https://stackoverflow.com/questions/49779408/set-focus-on-edittext-when-fragment-changes/49779954#49779954", "title": "Set focus on EditText when fragment changes", "body": "<p>use this in onResume:</p>\n\n<pre><code>onResume(){\n  super.onResume();\n  findViewById(R.id.SecondEditText).requestFocus();\n\n}\n</code></pre>\n\n<p>Better is to find a view in <code>onCreate</code> and save it in instance variable then call <code>requestFocus</code> on that variable in <code>onResume</code> to remove delay to find view every time in <code>onResume</code> especially on multi-windows which <code>onResume</code> calls on every window size changes</p>\n"}], "owner": {"reputation": 127, "user_id": 6690914, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/7kqV6.jpg?s=128&g=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/6690914/sergio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1866, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1563195734, "creation_date": 1523461690, "question_id": 49779408, "link": "https://stackoverflow.com/questions/49779408/set-focus-on-edittext-when-fragment-changes", "title": "Set focus on EditText when fragment changes", "body": "<p>I have two fragments with two EditText, I want to keep the focus on the second EditText (Fragment two) when I change from fragment one to fragment two with the first EditText focused. I have a focuschangelistener controling the first EditText focus but I don't know how to check the first EditText focus when the fragment changes because It always return false on the second fragment (I supose that the fragment view clears the focus on detach). </p>\n\n<p>Right now I have a focus listener on fragment create view:</p>\n\n<pre><code>etEmail?.setOnFocusChangeListener { v, hasFocus -&gt;\n        (activity as SessionActivity).animation() //this is an animation\n        isFocused = hasFocus //this is my bool status check\n    }\n</code></pre>\n\n<p>And in the second fragment I call the companion to check the state:</p>\n\n<pre><code>Log.d(\"FOCUS\", hadFocus.toString())\n</code></pre>\n"}, {"tags": ["android", "google-maps", "kotlin", "google-maps-markers", "android-maps-utils"], "comments": [{"owner": {"reputation": 1007, "user_id": 4768929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1bf5292150f33000a6308c80f8a6aa5?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Abidi", "link": "https://stackoverflow.com/users/4768929/ahmed-abidi"}, "edited": false, "score": 0, "creation_date": 1523462668, "post_id": 49778933, "comment_id": 86574898, "body": "Can you share your custom view XML / code please ?"}, {"owner": {"reputation": 98, "user_id": 3812081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sC95T.jpg?s=128&g=1", "display_name": "venimania", "link": "https://stackoverflow.com/users/3812081/venimania"}, "reply_to_user": {"reputation": 1007, "user_id": 4768929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1bf5292150f33000a6308c80f8a6aa5?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Abidi", "link": "https://stackoverflow.com/users/4768929/ahmed-abidi"}, "edited": false, "score": 0, "creation_date": 1523607965, "post_id": 49778933, "comment_id": 86639307, "body": "@AhmedAbidi, I don&#39;t think that could be the problem because when I don&#39;t rotate the content the custom view is placed ok."}, {"owner": {"reputation": 776, "user_id": 3979290, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/9b2d18e144170be055ee859fd2738527?s=128&d=identicon&r=PG", "display_name": "PNDA", "link": "https://stackoverflow.com/users/3979290/pnda"}, "edited": false, "score": 0, "creation_date": 1548725053, "post_id": 49778933, "comment_id": 95635884, "body": "This is exactly my problem. Anyone solved this?"}, {"owner": {"reputation": 98, "user_id": 3812081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sC95T.jpg?s=128&g=1", "display_name": "venimania", "link": "https://stackoverflow.com/users/3812081/venimania"}, "reply_to_user": {"reputation": 776, "user_id": 3979290, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/9b2d18e144170be055ee859fd2738527?s=128&d=identicon&r=PG", "display_name": "PNDA", "link": "https://stackoverflow.com/users/3979290/pnda"}, "edited": false, "score": 0, "creation_date": 1548851242, "post_id": 49778933, "comment_id": 95690352, "body": "sorry @Gene i didn&#39;t get with the trick so i had to change my ui. But if you achieve the goal let me know."}], "owner": {"reputation": 98, "user_id": 3812081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sC95T.jpg?s=128&g=1", "display_name": "venimania", "link": "https://stackoverflow.com/users/3812081/venimania"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1523608192, "creation_date": 1523460235, "last_edit_date": 1523608192, "question_id": 49778933, "link": "https://stackoverflow.com/questions/49778933/iconfactory-with-setcontentrotation-change-aling-of-the-content", "title": "IconFactory with `setContentRotation` change aling of the content", "body": "<p>I'm working with maps and I'm trying to do something similar as Uber does, show information near the marker (in two markers at the same time so I can't use <code>infowindow</code> )</p>\n\n<p><a href=\"https://i.stack.imgur.com/fidxV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fidxV.png\" alt=\"enter image description here\"></a></p>\n\n<p>As I have read I'm using IconFactory to achieve this:</p>\n\n<pre><code>    val iconFactory = IconGenerator(this)\n    //iconFactory.setBackground(resources.getDrawable(R.drawable.background_iconfactory))\n    iconFactory.setRotation(90)\n    iconFactory.setContentRotation(-90)\n    iconFactory.setContentView(view)\n\n\n    val mMarkerA = mMap?.addMarker(MarkerOptions().position(LatLng(location.latitude, location.longitude)).anchor(iconFactory.anchorU, iconFactory.anchorV))\n    mMarkerA?.setIcon(BitmapDescriptorFactory.fromBitmap(iconFactory.makeIcon(\"hello world\")))\n</code></pre>\n\n<p>But I came up with the next problem: If I use a regular text the <code>iconFactory</code> is placed like I want. \n<a href=\"https://i.stack.imgur.com/GF1iy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GF1iy.png\" alt=\"enter image description here\"></a></p>\n\n<p>But if I inflate a custom view (this is what i need), the view appeared to be displaced to the right. <a href=\"https://i.stack.imgur.com/IdjUO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IdjUO.png\" alt=\"enter image description here\"></a></p>\n\n<p>Does anybody knows what I'm doing wrong?! Can anybody help me? </p>\n\n<p>Thanks in advance. </p>\n\n<p><strong>Edit</strong>\nI don't think the xml could be a problem, if I don't rotate the content it's ok. \n<a href=\"https://i.stack.imgur.com/5OFbW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5OFbW.png\" alt=\"enter image description here\"></a></p>\n\n<p>Anyway I post the xml:</p>\n\n<pre><code> &lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.constraint.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"&gt;\n&lt;ImageView\n    android:id=\"@+id/backgroundMarker\"\n    android:layout_width=\"30dp\"\n    android:layout_height=\"30dp\"\n\n    android:layout_marginStart=\"8dp\"\n    android:layout_marginTop=\"8dp\"\n    app:layout_constraintBottom_toBottomOf=\"parent\"\n    app:layout_constraintStart_toStartOf=\"parent\"\n    app:layout_constraintTop_toTopOf=\"parent\"\n    app:srcCompat=\"@drawable/background_marker\" /&gt;\n\n&lt;ImageView\n    android:id=\"@+id/image_person\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    app:layout_constraintBottom_toBottomOf=\"@+id/backgroundMarker\"\n    app:layout_constraintEnd_toEndOf=\"@+id/backgroundMarker\"\n    app:layout_constraintStart_toStartOf=\"@+id/backgroundMarker\"\n    app:layout_constraintTop_toTopOf=\"@+id/backgroundMarker\"\n    app:srcCompat=\"@drawable/ic_person_white_24dp\" /&gt;\n\n&lt;ImageView\n    android:id=\"@+id/imageView9\"\n    android:layout_width=\"1dp\"\n    android:layout_height=\"10dp\"\n    app:layout_constraintEnd_toEndOf=\"@+id/backgroundMarker\"\n    app:layout_constraintStart_toStartOf=\"@+id/backgroundMarker\"\n    app:layout_constraintTop_toBottomOf=\"@+id/backgroundMarker\"\n    app:srcCompat=\"@android:color/black\" /&gt;\n\n&lt;TextView\n    android:id=\"@+id/text\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:layout_marginBottom=\"8dp\"\n    android:layout_marginStart=\"4dp\"\n\n    android:background=\"@android:color/white\"\n    android:padding=\"8dp\"\n    android:text=\"Calle Pepe dos aguas\"\n    app:layout_constraintBottom_toBottomOf=\"@+id/imageView9\"\n    app:layout_constraintStart_toEndOf=\"@+id/backgroundMarker\"\n    app:layout_constraintTop_toTopOf=\"@+id/backgroundMarker\" /&gt;\n\n\n\n  &lt;ImageView\n        android:id=\"@+id/imageView3\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"0dp\"\n        android:layout_marginEnd=\"8dp\"\n        android:background=\"@android:color/black\"\n        android:padding=\"4dp\"\n        android:tint=\"@android:color/white\"\n        app:layout_constraintBottom_toBottomOf=\"@+id/text\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintHorizontal_bias=\"0.0\"\n        app:layout_constraintStart_toEndOf=\"@+id/text\"\n        app:layout_constraintTop_toTopOf=\"@+id/text\"\n        app:layout_constraintVertical_bias=\"0.0\"\n        app:srcCompat=\"@android:drawable/ic_secure\" /&gt;\n&lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n"}, {"tags": ["android", "kotlin", "rx-java2", "rx-android"], "comments": [{"owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 0, "creation_date": 1523471493, "post_id": 49778544, "comment_id": 86579611, "body": "I can&#39;t see any mistake. Please check what the stacktrace of the IllegalStateException points to. Also try <code>tryOnError</code> instead of <code>onError</code> to see if the reason of the app crash is due to undeliverable errors inside <code>Single.create</code>."}, {"owner": {"reputation": 6531, "user_id": 3231532, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f5a361b40676f58cb3304c7909f2582a?s=128&d=identicon&r=PG&f=1", "display_name": "Kelevandos", "link": "https://stackoverflow.com/users/3231532/kelevandos"}, "reply_to_user": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 0, "creation_date": 1523473954, "post_id": 49778544, "comment_id": 86580870, "body": "The stacktrace is for the empty IllegalStateException and points to the line with &quot;subscriber.onError()&quot;. I will try the method you mentioned once I am back in the office :-)"}, {"owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "edited": false, "score": 0, "creation_date": 1548682507, "post_id": 49778544, "comment_id": 95616742, "body": "I just stumbled over this, did you resolve it already? Does <code>listener.onSearchFailed()</code> eventually crash the app?"}], "owner": {"reputation": 6531, "user_id": 3231532, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f5a361b40676f58cb3304c7909f2582a?s=128&d=identicon&r=PG&f=1", "display_name": "Kelevandos", "link": "https://stackoverflow.com/users/3231532/kelevandos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1523459054, "creation_date": 1523459054, "question_id": 49778544, "link": "https://stackoverflow.com/questions/49778544/rxjava2-error-returned-by-child-single-is-propagated-despite-handling-in-paren", "title": "RxJava2 - Error returned by child Single is propagated despite handling in parent Single", "body": "<p>So, I have a <code>Repository</code> class, which has a <code>search()</code> method which creates a zipped Single and returns data to a listener.</p>\n\n<p>Inside of this method, I need to call 4 services and zip their results. The services return different data types, from which I build the <code>SearchResult</code> object.</p>\n\n<p>The method looks like this:</p>\n\n<pre><code>fun search() {\n    Single.just(SearchResult.Builder())\n        .zipWith(\n            service1.search()\n                .subscribeOn(Schedulers.io())\n                .onErrorReturnItem(emptyList()),\n            { result, data -&gt; result.apply { this.data1 = data } })\n        .zipWith(\n            service2.search()\n                .subscribeOn(Schedulers.io())\n                .onErrorReturnItem(emptyList()),\n            { result, data -&gt; result.apply { this.data2 = data } })\n        // Other two services done in the same way\n        .subscribeOn(Schedulers.io())\n        .observeOn(AndroidSchedulers.mainThread())\n        .subscribe(\n            { listener.onSearchComplete(it.build()) },\n            { listener.onSearchFailed() })\n}\n</code></pre>\n\n<p>The implementation of <code>search()</code> in the services looks like this:</p>\n\n<pre><code>fun search(): Single&lt;List&lt;DataTypeX&gt;&gt; =\n    Single.create&lt;List&lt;DataTypeX&gt;&gt; { subscriber -&gt;\n        makeNetworkRequest()\n        ?.let{\n            //logic omitted for clarity\n            subscriber.onSuccess(it)\n        } ?: subscriber.onError(IllegalStateException())\n</code></pre>\n\n<p>The problem is the last line. <strong>When this network call fails and the response is <em>null</em>, the <code>IllegalStateException</code> will be propagated and crash the app, instead of being silently caught by <code>onErrorReturnItem(emptyList())</code>.</strong> </p>\n\n<p>Is there any reason for this? Am I misunderstanding the idea behind onErrorReturnItem()?</p>\n"}, {"tags": ["gradle", "orm", "kotlin", "ebean"], "answers": [{"tags": [], "owner": {"reputation": 3720, "user_id": 130993, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4257a5081473debc964d01834bce334e?s=128&d=identicon&r=PG", "display_name": "Jean-Fran&#231;ois C&#244;t&#233;", "link": "https://stackoverflow.com/users/130993/jean-fran%c3%a7ois-c%c3%b4t%c3%a9"}, "is_accepted": false, "score": 0, "last_activity_date": 1523545134, "creation_date": 1523545134, "answer_id": 49799828, "question_id": 49777959, "link": "https://stackoverflow.com/questions/49777959/bean-class-com-xxx-domain-customer-is-not-enhanced-error-in-gradle-kotlin-app/49799828#49799828", "title": "&quot;Bean class com.xxx.domain.Customer is not enhanced?&quot; error in gradle/kotlin app", "body": "<p>There was 4 things to check for this problem:</p>\n\n<p>1) Since I've done multiple test with the same code, my \"build\" folder was full of previously generated code and \"Rebuild\" function did not clean it up. I did a delete myself + full \"rebuild\" and it removed a lot of error message. But something else was missing.</p>\n\n<p>2) Make sure your file \"ebean.mf\" in the \"resource\" folder is has the right \"entity-packages\" and \"transactional-packages\". In my case it was <code>com.xxx.domain</code>. This is the folder that needs enhancements and contains your models.</p>\n\n<p>3) If you are using an \"application\" configuration settings (starting the application with the IDE), make sure to install and activate the right Ebean Enhancement plugin. In my case, I only needed the Ebean 10.x Enhancement plugin.</p>\n\n<p>4) If you are using a \"gradle\" configuration settings make sure the sourceSets is set like that:</p>\n\n<pre><code>sourceSets {\n    main.kotlin.srcDirs += [file(\"$buildDir/generated/source/kaptKotlin/main\")]\n}\n</code></pre>\n\n<p>Hope that help. I spent so much time on this.</p>\n"}], "owner": {"reputation": 3720, "user_id": 130993, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4257a5081473debc964d01834bce334e?s=128&d=identicon&r=PG", "display_name": "Jean-Fran&#231;ois C&#244;t&#233;", "link": "https://stackoverflow.com/users/130993/jean-fran%c3%a7ois-c%c3%b4t%c3%a9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 393, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523545134, "creation_date": 1523457487, "question_id": 49777959, "link": "https://stackoverflow.com/questions/49777959/bean-class-com-xxx-domain-customer-is-not-enhanced-error-in-gradle-kotlin-app", "title": "&quot;Bean class com.xxx.domain.Customer is not enhanced?&quot; error in gradle/kotlin app", "body": "<p>I'm trying to use Ebean in a Kotlin app with Gradle.</p>\n\n<p>I have followed many examples on GitHub and I'm pretty sure my code is OK but I keep receiving this error:</p>\n\n<pre><code>Caused by: java.lang.IllegalStateException: Bean class com.xxx.domain.Customer is not enhanced?\n at io.ebeaninternal.server.deploy.BeanDescriptorManager.setEntityBeanClass(BeanDescriptorManager.java:1413)\n at io.ebeaninternal.server.deploy.BeanDescriptorManager.createByteCode(BeanDescriptorManager.java:1285)\n at io.ebeaninternal.server.deploy.BeanDescriptorManager.readDeployAssociations(BeanDescriptorManager.java:1207)\n at io.ebeaninternal.server.deploy.BeanDescriptorManager.readEntityDeploymentAssociations(BeanDescriptorManager.java:710)\n at io.ebeaninternal.server.deploy.BeanDescriptorManager.deploy(BeanDescriptorManager.java:325)\n at io.ebeaninternal.server.core.InternalConfiguration.&lt;init&gt;(InternalConfiguration.java:141)\n at io.ebeaninternal.server.core.DefaultContainer.createServer(DefaultContainer.java:130)\n at io.ebeaninternal.server.core.DefaultContainer.createServer(DefaultContainer.java:79)\n at io.ebeaninternal.server.core.DefaultContainer.createServer(DefaultContainer.java:44)\n at io.ebean.EbeanServerFactory.create(EbeanServerFactory.java:55)\n at io.ebean.Ebean$ServerManager.getWithCreate(Ebean.java:201)\n at io.ebean.Ebean$ServerManager.&lt;init&gt;(Ebean.java:159)\n ... 6 more\n</code></pre>\n\n<p>Here is my build.gradle code:</p>\n\n<pre><code>buildscript {\n    ext.kotlin_version = '1.2.31'\n\n\n    repositories {\n        mavenCentral()\n    }\n\n\n    dependencies {\n        classpath \"io.ebean:ebean-gradle-plugin:10.2.2\"\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n    }\n}\n\n\napply plugin: 'kotlin'\napply plugin: 'kotlin-kapt'\napply plugin: 'application'\napply plugin: 'ebean'\n\n\nmainClassName = 'com.xxx.HelloWorldKt'\n\n\ndefaultTasks 'run'\n\n\nrepositories {\n    mavenCentral()\n}\n\n\ndependencies {\n    kapt \"io.ebean:kotlin-querybean-generator:10.1.2\"\n\n    compile group: 'mysql', name: 'mysql-connector-java', version: '6.0.6'\n    compile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n\n    compile \"io.ebean:ebean:10.3.1\"\n    compile \"io.ebean:ebean-querybean:10.3.1\"\n\n    testCompile 'junit:junit:4.11'\n    testCompile \"org.jetbrains.kotlin:kotlin-test-junit:$kotlin_version\"\n}\n\n\nkapt {\n    generateStubs = true\n}\n\n\nsourceSets {\n    main.kotlin.srcDirs += [file(\"$buildDir/generated/source/kaptKotlin/main\")]\n}\n</code></pre>\n\n<p>I have installed 2 plugins in IntelliJ. </p>\n\n<ul>\n<li>Ebean 10.x Enhancement </li>\n<li>Ebean enhancement</li>\n</ul>\n\n<p>Both are activated.</p>\n\n<p>Here is my Bean code</p>\n\n<pre><code>import io.ebean.Model\nimport javax.persistence.Entity\nimport javax.persistence.Id\n\n@Entity\nclass Customer : Model() {\n\n    @Id\n    var id: Long = 0\n\n    var name: String = \"\"\n\n    var version: Long = 0\n}\n</code></pre>\n\n<p>I have tried running the app using the \"App configuration\" and the \"Gradle configuration\". Both do the same errors.</p>\n\n<p>I can see that the QCustomer generated code is there but I keep receiving this error all the time.</p>\n\n<p>What am I doing wrong?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["junit", "kotlin", "junit5"], "answers": [{"tags": [], "owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "is_accepted": false, "score": 2, "last_activity_date": 1523459990, "creation_date": 1523459990, "answer_id": 49778854, "question_id": 49777665, "link": "https://stackoverflow.com/questions/49777665/beforeall-in-superclass-is-not-executed/49778854#49778854", "title": "@BeforeAll in superclass is not executed", "body": "<p>The <a href=\"https://junit.org/junit5/docs/5.0.2/api/org/junit/jupiter/api/BeforeAll.html\" rel=\"nofollow noreferrer\">documentation</a> explicitly states:</p>\n\n<blockquote>\n  <p><code>@BeforeAll</code> methods are inherited from superclasses as long as they are not <em>hidden</em> or <em>overridden</em>. Furthermore, <code>@BeforeAll</code> methods from superclasses will be executed before <code>@BeforeAll</code> methods in subclasses. </p>\n</blockquote>\n\n<p>So this would not be the desired behavior. But since <code>setStatus()</code> is <em>open</em>, you have to be careful not to <em>override</em> it.</p>\n"}], "owner": {"reputation": 155, "user_id": 2462794, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5f186c1852709c2715d5bde36deb43af?s=128&d=identicon&r=PG", "display_name": "user2462794", "link": "https://stackoverflow.com/users/2462794/user2462794"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1006, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1523459990, "creation_date": 1523456696, "question_id": 49777665, "link": "https://stackoverflow.com/questions/49777665/beforeall-in-superclass-is-not-executed", "title": "@BeforeAll in superclass is not executed", "body": "<p>In superclass, the method annotated with <code>@BeforeClass</code> seems not to be executed </p>\n\n<pre><code>    @TestInstance(TestInstance.Lifecycle.PER_CLASS)\nopen class TestBase {\n\n    var status: Boolean = false\n\n    @BeforeAll\n    open fun setStatus() {\n        status = true\n    }\n}\n\nclass MyAppTest : TestBase() {\n\n    @Test\n    fun testStatus() {\n        assertTrue(status) //fails\n    }\n\n}\n</code></pre>\n\n<p>Is this the desirable behaviour or am I doing something wrong?</p>\n"}, {"tags": ["android-studio", "kotlin", "filenotfoundexception"], "comments": [{"owner": {"reputation": 388, "user_id": 5936681, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8kxOU.jpg?s=128&g=1", "display_name": "jemystack", "link": "https://stackoverflow.com/users/5936681/jemystack"}, "edited": false, "score": 0, "creation_date": 1523456506, "post_id": 49777462, "comment_id": 86570267, "body": "where are you put the file please"}, {"owner": {"reputation": 5658, "user_id": 8041461, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-nR0Gs4YyO0M/AAAAAAAAAAI/AAAAAAAAAKk/ld4ET5Sgzvw/photo.jpg?sz=128", "display_name": "jrtapsell", "link": "https://stackoverflow.com/users/8041461/jrtapsell"}, "edited": false, "score": 0, "creation_date": 1523460262, "post_id": 49777462, "comment_id": 86573193, "body": "If the file exists both should work perfectly well"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9631059, "user_type": "registered", "profile_image": "https://graph.facebook.com/2039310599430428/picture?type=large", "display_name": "Franzi Notz", "link": "https://stackoverflow.com/users/9631059/franzi-notz"}, "edited": false, "score": 0, "creation_date": 1523872359, "post_id": 49777526, "comment_id": 86723133, "body": "I have tried all of this and it still doesn&#39;t work. :("}], "tags": [], "owner": {"reputation": 2158, "user_id": 5275867, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TwbOc.jpg?s=128&g=1", "display_name": "Alexandre Beaudet", "link": "https://stackoverflow.com/users/5275867/alexandre-beaudet"}, "is_accepted": false, "score": 0, "last_activity_date": 1523456355, "creation_date": 1523456355, "answer_id": 49777526, "question_id": 49777462, "link": "https://stackoverflow.com/questions/49777462/how-to-define-a-file-in-kotlin/49777526#49777526", "title": "How to define a file in Kotlin", "body": "<pre><code>val inputStream: InputStream = File(\"test.xml\").inputStream()\n\nval inputString = inputStream.bufferedReader().use { it.readText() }\nprintln(inputString)\n</code></pre>\n\n<p><strong><em>Source</strong> : <a href=\"http://kotlination.com/kotlin/read-file-kotlin\" rel=\"nofollow noreferrer\">kotlination.com</a></em></p>\n\n<p><strong>The file must be in the root of your project</strong>, the same folder containing your src/ folder.</p>\n"}, {"tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": false, "score": 0, "last_activity_date": 1523516946, "creation_date": 1523516946, "answer_id": 49790125, "question_id": 49777462, "link": "https://stackoverflow.com/questions/49777462/how-to-define-a-file-in-kotlin/49790125#49790125", "title": "How to define a file in Kotlin", "body": "<p>These should give the exact same results, if you run both with the same working directory. You can check or set the working directory (relative to which <code>file.xml</code> will be looked for) in the Run/Debug configuration.</p>\n\n<p>Since you have Android Studio tag: if you are creating an Android application/library and want the file to be included with it, you should read <a href=\"https://developer.android.com/guide/topics/resources/index.html\" rel=\"nofollow noreferrer\">https://developer.android.com/guide/topics/resources/index.html</a>.</p>\n"}], "owner": {"reputation": 11, "user_id": 9631059, "user_type": "registered", "profile_image": "https://graph.facebook.com/2039310599430428/picture?type=large", "display_name": "Franzi Notz", "link": "https://stackoverflow.com/users/9631059/franzi-notz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 436, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1523516946, "creation_date": 1523456193, "last_edit_date": 1523456706, "question_id": 49777462, "link": "https://stackoverflow.com/questions/49777462/how-to-define-a-file-in-kotlin", "title": "How to define a file in Kotlin", "body": "<p>I need to use a xml file in my code,</p>\n\n<p>in Java it looks like this:</p>\n\n<pre><code>File inputFile = new File(\"test.xml\"); //Path: C:\\Users\\...\n</code></pre>\n\n<p>however, when i try the same in kotlin, it does not work:</p>\n\n<pre><code>val inputFile = File(\"test.xml\")\n</code></pre>\n\n<p>I always get an \"File not found\" exception.\nI can't find anything on google on how to include files with Kotlin.</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 5, "creation_date": 1523452443, "post_id": 49775983, "comment_id": 86567214, "body": "&quot;This singleton is a little smaller than in other subjects on stack&quot; -- perhaps those &quot;other subjects&quot; solve other problems that your singleton does not, such as thread synchronization. Since you did not link to these &quot;other subjects&quot;, we cannot draw comparisons."}, {"owner": {"reputation": 65, "user_id": 9630695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77cbb4cda55146a52e250e1b79fa6562?s=128&d=identicon&r=PG&f=1", "display_name": "jackfield", "link": "https://stackoverflow.com/users/9630695/jackfield"}, "reply_to_user": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1523452623, "post_id": 49775983, "comment_id": 86567345, "body": "ok, I understand, but this singleton is real &quot;singleton&quot; ?  I&#39;m just starting to learn and do not want to learn bad habits"}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 9630695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77cbb4cda55146a52e250e1b79fa6562?s=128&d=identicon&r=PG&f=1", "display_name": "jackfield", "link": "https://stackoverflow.com/users/9630695/jackfield"}, "edited": false, "score": 0, "creation_date": 1523455113, "post_id": 49776213, "comment_id": 86569270, "body": "but in this way, we can use everywhere this object, object should have a simply name, so in big app, we can use it by accident"}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "reply_to_user": {"reputation": 65, "user_id": 9630695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77cbb4cda55146a52e250e1b79fa6562?s=128&d=identicon&r=PG&f=1", "display_name": "jackfield", "link": "https://stackoverflow.com/users/9630695/jackfield"}, "edited": false, "score": 1, "creation_date": 1523462222, "post_id": 49776213, "comment_id": 86574571, "body": "I&#39;m not sure what you&#39;re looking for - you&#39;d also have the instance in your solution available from everywhere. Plus, you could apply <a href=\"https://kotlinlang.org/docs/reference/visibility-modifiers.html\" rel=\"nofollow noreferrer\">visibility modifiers</a> to either of them, for example you could restrict your singleton to a single module with <code>internal</code>."}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": false, "score": 8, "last_activity_date": 1523452753, "creation_date": 1523452753, "answer_id": 49776213, "question_id": 49775983, "link": "https://stackoverflow.com/questions/49775983/my-own-singleton-using-kotlin-a-little-smaller-than-others/49776213#49776213", "title": "My own singleton using Kotlin, a little smaller than others", "body": "<p>Declaring something with the <code>object</code> keyword instead of <code>class</code> makes it a singleton on its own:</p>\n\n<pre><code>object SingletonTwo {\n    var myAge: Int = 16\n}\n</code></pre>\n\n<p>In this case, you can access the variable like so:</p>\n\n<pre><code>var abc: Int = SingletonTwo.myAge\n</code></pre>\n\n<p>You can see the docs about <a href=\"https://kotlinlang.org/docs/reference/object-declarations.html#object-declarations\" rel=\"noreferrer\">object declarations</a> which also notes that they should be used to easily create singletons.</p>\n"}], "owner": {"reputation": 65, "user_id": 9630695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77cbb4cda55146a52e250e1b79fa6562?s=128&d=identicon&r=PG&f=1", "display_name": "jackfield", "link": "https://stackoverflow.com/users/9630695/jackfield"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523452753, "creation_date": 1523452110, "question_id": 49775983, "link": "https://stackoverflow.com/questions/49775983/my-own-singleton-using-kotlin-a-little-smaller-than-others", "title": "My own singleton using Kotlin, a little smaller than others", "body": "<p>I found in stack a lot of topic's about singleton. But in my opinion, singleton in Kotlin can be simpler:</p>\n\n<pre><code>class SingletonTwo private constructor(){\n\n    var myAge: Int = 16\n\n    companion object {\n        val ourInstance = SingletonTwo()\n    }\n\n}\n</code></pre>\n\n<p>Now I can get access in other class to this variable myAge:</p>\n\n<pre><code>var abc: Int\nabc = SingletonTwo.ourInstance.myAge\n</code></pre>\n\n<p>Something is wrong here ? This singleton is a little smaller than in other subjects on stack.\nPlease someone correct me if I'm wrong.</p>\n"}, {"tags": ["javascript", "kotlin", "kotlin-js-interop"], "answers": [{"comments": [{"owner": {"reputation": 176396, "user_id": 342235, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/88e5a9eb011a73ab970ddc8cfb05ff85?s=128&d=identicon&r=PG", "display_name": "Freewind", "link": "https://stackoverflow.com/users/342235/freewind"}, "edited": false, "score": 0, "creation_date": 1523545408, "post_id": 49780099, "comment_id": 86614505, "body": "I want to say &quot;Thank you!&quot; a thousand times! You&#39;ve solved me a big problem"}], "tags": [], "owner": {"reputation": 126, "user_id": 9619472, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Roman Art", "link": "https://stackoverflow.com/users/9619472/roman-art"}, "is_accepted": true, "score": 1, "last_activity_date": 1523522116, "last_edit_date": 1523522116, "creation_date": 1523463702, "answer_id": 49780099, "question_id": 49773452, "link": "https://stackoverflow.com/questions/49773452/how-to-generate-a-javascript-function-with-this-field-value-in-body-in-kotlin/49780099#49780099", "title": "How to generate a javascript function with `this.field=value` in body, in KotlinJs", "body": "<p>The possible solution might be cast <code>js(\"this\")</code> to known kotlin type.\nThough <code>js()</code> still exists its usage is very local and code actually type-safe. </p>\n\n<p>The code bellow produces what you need in js</p>\n\n<pre><code>interface MyTag {\n    var name: String\n\n    var message: String\n\n    var onCreate: (dynamic) -&gt; Unit\n\n    var click: () -&gt; Unit\n}\n\ninline fun &lt;T&gt; builder(block: T.() -&gt; Unit) = block(js(\"this\"))\n\nfun tagFunction(opts: dynamic) = builder&lt;MyTag&gt; {\n    name = \"sample\"\n\n    message = \"init-message\"\n\n    onCreate = { message = opts.message }\n\n    click = { message = \"Clicked!\" }\n}\n</code></pre>\n"}], "owner": {"reputation": 176396, "user_id": 342235, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/88e5a9eb011a73ab970ddc8cfb05ff85?s=128&d=identicon&r=PG", "display_name": "Freewind", "link": "https://stackoverflow.com/users/342235/freewind"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 49780099, "answer_count": 1, "score": 0, "last_activity_date": 1523522116, "creation_date": 1523444746, "question_id": 49773452, "link": "https://stackoverflow.com/questions/49773452/how-to-generate-a-javascript-function-with-this-field-value-in-body-in-kotlin", "title": "How to generate a javascript function with `this.field=value` in body, in KotlinJs", "body": "<p>When I use KotlinJS with <a href=\"http://riotjs.com/\" rel=\"nofollow noreferrer\">riot</a>, it requires a function like following to define a tag:</p>\n\n<pre><code>function (opts) {\n    var self = this\n    self.name = \"sample\"\n    self.message = \"init-message\"\n\n    self.onCreate = fun(opts: dynamic) {\n        self.message = opts.message\n    }\n\n    self.click = fun() {\n        self.message = \"Clicked!\"\n    }\n}\n</code></pre>\n\n<p>Though I can write the Kotlin code like this:</p>\n\n<pre><code>fun(opts: dynamic) {\n    val self = js(\"this\")\n\n    self.name = \"sample\"\n    self.message = \"init-message\"\n\n    self.onCreate = fun(opts: dynamic) {\n        self.message = opts.message\n    }\n\n    self.click = fun() {\n        self.message = \"Clicked!\"\n    }\n}\n</code></pre>\n\n<p>But you can see it has several problems:</p>\n\n<ol>\n<li>We have to use some <code>js(\"this\")</code> tricks</li>\n<li><code>self.name</code>, <code>self.message</code>, and similar, there are a lot of dynamic code all over the function body</li>\n</ol>\n\n<p>How to avoid them? I want to write pure, type-safe Kotlin code as much as possible.</p>\n\n<p>And, in advance, is it possible to define a class which has clearer structure, like:</p>\n\n<pre><code>class MyTag {\n   val name = \"sample\"\n   var message = \"init-message\"\n   fun onCreate() {}\n   fun click() {}\n}\n</code></pre>\n\n<p>I can accept to do some conversions against the class to generate the required function.</p>\n"}, {"tags": ["android", "kotlin", "google-places-api", "googleplacesautocomplete"], "answers": [{"comments": [{"owner": {"reputation": 298, "user_id": 7792216, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wcXjr.jpg?s=128&g=1", "display_name": "Mikkel J&#248;rgensen", "link": "https://stackoverflow.com/users/7792216/mikkel-j%c3%b8rgensen"}, "edited": false, "score": 1, "creation_date": 1523450235, "post_id": 49774029, "comment_id": 86565479, "body": "I opened an issue tracker based on your answer. Anyone interested can find it here: <a href=\"https://issuetracker.google.com/issues/77840257\" rel=\"nofollow noreferrer\">issuetracker.google.com/issues/77840257</a>"}], "tags": [], "owner": {"reputation": 17304, "user_id": 3363481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o4HU5.png?s=128&g=1", "display_name": "earthw0rmjim", "link": "https://stackoverflow.com/users/3363481/earthw0rmjim"}, "is_accepted": true, "score": 4, "last_activity_date": 1523545221, "last_edit_date": 1523545221, "creation_date": 1523446386, "answer_id": 49774029, "question_id": 49772530, "link": "https://stackoverflow.com/questions/49772530/release-google-places-autocomplete-response-now-declared-as-internal/49774029#49774029", "title": "Release Google Places Autocomplete Response - now declared as internal", "body": "<p>Seems like an unintended change.</p>\n\n<p>It started in 12.0.0, that has the following \"known issue\" in its <a href=\"https://developers.google.com/android/guides/releases#march_20_2018_-_version_1200\" rel=\"nofollow noreferrer\">release notes</a>:</p>\n\n<blockquote>\n  <p>An annotation causes spurious lint errors claiming <code>GoogleSignIn</code> and\n  <code>CredentialsClient</code> are internal-only. These can safely be ignored.</p>\n</blockquote>\n\n<p>Guess they weren't only for <code>GoogleSignIn</code> and <code>CredentialsClient</code>, but they fixed only those in <a href=\"https://developers.google.com/android/guides/releases#march_28_2018_-_version_1201\" rel=\"nofollow noreferrer\">12.0.1</a>:</p>\n\n<blockquote>\n  <p>Fixes issue that caused spurious Android lint errors claiming\n  <code>GoogleSignIn</code> and <code>CredentialsClient</code> were internal-only.</p>\n</blockquote>\n\n<p>The corresponding source code of <code>release()</code> appears to be the same across versions 11.8.0-12.0.1, so i believe you can safely ignore these warnings.</p>\n"}], "owner": {"reputation": 298, "user_id": 7792216, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wcXjr.jpg?s=128&g=1", "display_name": "Mikkel J&#248;rgensen", "link": "https://stackoverflow.com/users/7792216/mikkel-j%c3%b8rgensen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 321, "favorite_count": 0, "accepted_answer_id": 49774029, "answer_count": 1, "score": 4, "last_activity_date": 1523545221, "creation_date": 1523442010, "last_edit_date": 1523519718, "question_id": 49772530, "link": "https://stackoverflow.com/questions/49772530/release-google-places-autocomplete-response-now-declared-as-internal", "title": "Release Google Places Autocomplete Response - now declared as internal", "body": "<p>Recently upgrading Google API versions from 11.8.0 to 12.0.1 resulted in <code>task.result.release()</code> in my completion listener from <code>Task&lt;AutocompletePredictionBufferResponse&gt;</code> being marked as internal.</p>\n\n<p>Should I handle the possibility of an internal data leak differently? Does the Google Places API now handle releasing the result itself? I cannot find information about this in the <a href=\"https://developers.google.com/android/guides/releases#march_20_2018_-_version_1200\" rel=\"nofollow noreferrer\">release notes for 12.0.0 or 12.0.1</a>. The current documentation still says <a href=\"https://developers.google.com/android/reference/com/google/android/gms/location/places/AutocompletePredictionBufferResponse\" rel=\"nofollow noreferrer\">you must release the result</a>.</p>\n\n<p>Here is where I use it:</p>\n\n<pre><code>.addOnCompleteListener { task: Task&lt;AutocompletePredictionBufferResponse&gt; -&gt;\n    if (task.isSuccessful) {\n\n        {...}\n\n        //Release to avoid internal data leak\n        task.result.release()\n    } else {\n        Log.e(\"AutoCompletePredictions\", task.exception?.message)\n\n        //Release to avoid internal data leak\n        task.result.release()\n    }\n}\n.addOnFailureListener(this@NewLocationActivity) {\n    Log.e(\"AutoCompletePredictions\", it.message)\n}\n</code></pre>\n\n<p>This is the error message I am receiving:</p>\n\n<blockquote>\n  <p>zzb.release is marked as internal and should not be accessed from apps less... (\u2318F1) \n  This API has been flagged with a restriction that has not been met.  Examples of API restrictions: * Method can only be invoked by a subclass * Method can only be accessed from within the same library (defined by the Gradle library group id) .* Method can only be accessed from tests. . You can add your own API restrictions with the @RestrictTo annotation.</p>\n</blockquote>\n\n<p>The full <code>getSuggestions()</code> method in which I use the completion listener</p>\n\n<pre><code>private fun getSuggestions() {\n    val filter = AutocompleteFilter.Builder()\n        .setTypeFilter(AutocompleteFilter.TYPE_FILTER_ADDRESS)\n        .setCountry(CountryManager.getCountryISO())\n        .build()\n\n    Places.getGeoDataClient(this@NewLocationActivity/*, null*/) // uncomment for v11.8.0\n        .getAutocompletePredictions(\n            activity_new_location_edit_text.text.toString(),\n            null,\n            filter\n        )\n        .addOnCompleteListener { task: Task&lt;AutocompletePredictionBufferResponse&gt; -&gt;\n            if (task.isSuccessful) {\n                val addressList: ArrayList&lt;String&gt; = arrayListOf()\n\n                var index = 0\n                for(item in task.result) {\n                    if(index &gt;= MAX_SUGGESTION_RESULTS)\n                        break\n\n                    addressList.add(item.getFullText(null).toString())\n                    index++\n                }\n\n                if(!(addressList.size == 1 &amp;&amp; addressList[0] == activity_new_location_edit_text.text.toString()))\n                    loadGoogleAddressesIntoSuggestionList(addressList)\n\n                //Release to avoid internal data leak\n                task.result.release()\n            } else {\n                Log.e(\"AutoCompletePredictions\", task.exception?.message)\n\n                //Release to avoid internal data leak\n                task.result.release()\n            }\n        }\n        .addOnFailureListener(this@NewLocationActivity) {\n            Log.e(\"AutoCompletePredictions\", it.message)\n        }\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 935, "user_id": 3641245, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/100001849689029/picture?type=large", "display_name": "the_kaba", "link": "https://stackoverflow.com/users/3641245/the-kaba"}, "edited": false, "score": 0, "creation_date": 1523443774, "post_id": 49772636, "comment_id": 86561055, "body": "Thanks Alexey. Now it&#39;s clear. I just was surprised that such form of folding can be applied to complex types, for example ranges..."}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "reply_to_user": {"reputation": 935, "user_id": 3641245, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/100001849689029/picture?type=large", "display_name": "the_kaba", "link": "https://stackoverflow.com/users/3641245/the-kaba"}, "edited": false, "score": 0, "creation_date": 1523447072, "post_id": 49772636, "comment_id": 86563244, "body": "Well, <code>in &lt;x&gt;..&lt;y&gt;</code> just converts to two comparisons by definition, the range never even appears. Sure, the compiler <i>could</i> actually create the range and call <code>contains</code> method on it, but building this in is both easy and a large win."}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "reply_to_user": {"reputation": 935, "user_id": 3641245, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/100001849689029/picture?type=large", "display_name": "the_kaba", "link": "https://stackoverflow.com/users/3641245/the-kaba"}, "edited": false, "score": 1, "creation_date": 1523447308, "post_id": 49772636, "comment_id": 86563420, "body": "Plus the Kotlin developers had the example of Scala which insisted on <i>not</i> doing that and how it hurt performance."}, {"owner": {"reputation": 935, "user_id": 3641245, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/100001849689029/picture?type=large", "display_name": "the_kaba", "link": "https://stackoverflow.com/users/3641245/the-kaba"}, "edited": false, "score": 0, "creation_date": 1523447767, "post_id": 49772636, "comment_id": 86563725, "body": "So in scala there&#39;s no such optimization?"}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "reply_to_user": {"reputation": 935, "user_id": 3641245, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/100001849689029/picture?type=large", "display_name": "the_kaba", "link": "https://stackoverflow.com/users/3641245/the-kaba"}, "edited": false, "score": 1, "creation_date": 1523448484, "post_id": 49772636, "comment_id": 86564212, "body": "At least when I last heard, there wasn&#39;t."}], "tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": false, "score": 4, "last_activity_date": 1523442304, "last_edit_date": 1592644375, "creation_date": 1523442304, "answer_id": 49772636, "question_id": 49772449, "link": "https://stackoverflow.com/questions/49772449/how-kotlin-optimizes-checks-that-number-belongs-to-range/49772636#49772636", "title": "How kotlin optimizes checks that number belongs to range?", "body": "<p>This is very simple <a href=\"https://en.wikipedia.org/wiki/Constant_folding\" rel=\"nofollow noreferrer\">constant folding</a>:</p>\n<blockquote>\n<p>Terms in constant expressions are typically simple literals, such as the integer literal 2, but they may also be variables whose values are known at compile time. Consider the statement:</p>\n<pre><code>i = 320 * 200 * 32;\n</code></pre>\n<p>Most modern compilers would not actually generate two multiply instructions and a store for this statement. Instead, they identify constructs such as these and substitute the computed values at compile time (in this case, 2,048,000). The resulting code would load the computed value and store it rather than loading and multiplying several values.</p>\n<p>Constant folding can even use arithmetic identities. When x is an integer type, the value of 0 * x is zero even if the compiler does not know the value of x.</p>\n</blockquote>\n<p>Here,</p>\n<pre><code>50 in 1..100 == \n1 &lt;= 50 &amp;&amp; 50 &lt;= 100 == \ntrue &amp;&amp; true == \ntrue\n</code></pre>\n"}], "owner": {"reputation": 935, "user_id": 3641245, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/100001849689029/picture?type=large", "display_name": "the_kaba", "link": "https://stackoverflow.com/users/3641245/the-kaba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523442304, "creation_date": 1523441823, "question_id": 49772449, "link": "https://stackoverflow.com/questions/49772449/how-kotlin-optimizes-checks-that-number-belongs-to-range", "title": "How kotlin optimizes checks that number belongs to range?", "body": "<p>I'm investigating kotlin using decompilation to java code.</p>\n\n<p>I've found one interesting nuance and can't understand how it is implemented.</p>\n\n<p>Here's the kotlin code:</p>\n\n<pre><code>val result = 50 in 1..100\n</code></pre>\n\n<p>I'm using intelij idea decompilation to look for the equivalent of java code and here's what we have:</p>\n\n<pre><code>public final class Test14Kt {\n   private static final boolean result = true;\n\n   public static final boolean getResult() {\n      return result;\n   }\n}\n</code></pre>\n\n<p>So as i understand it, kotlinc somehow knows that the element is in range and saves true to result variable on the stage of compilation.</p>\n\n<p>It's cool. But how is it achieved? </p>\n"}, {"tags": ["android", "kotlin", "rx-java2"], "answers": [{"comments": [{"owner": {"reputation": 6632, "user_id": 1262024, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/21669aa0deaa22912115eb6f0e281256?s=128&d=identicon&r=PG", "display_name": "Smajl", "link": "https://stackoverflow.com/users/1262024/smajl"}, "edited": false, "score": 0, "creation_date": 1523442020, "post_id": 49772446, "comment_id": 86559859, "body": "I am not sure how to do this in my scenario. Could you explain it in my usecase how to modify my subscriber?"}, {"owner": {"reputation": 9772, "user_id": 1618135, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/UqWor.jpg?s=128&g=1", "display_name": "blackpanther", "link": "https://stackoverflow.com/users/1618135/blackpanther"}, "reply_to_user": {"reputation": 6632, "user_id": 1262024, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/21669aa0deaa22912115eb6f0e281256?s=128&d=identicon&r=PG", "display_name": "Smajl", "link": "https://stackoverflow.com/users/1262024/smajl"}, "edited": false, "score": 0, "creation_date": 1523442112, "post_id": 49772446, "comment_id": 86559927, "body": "Yeah sure. First of all, add the RxKotlin dependency to your gradle build. Then change subscribe section with subscribeBy. I&#39;ll modify my answer above."}, {"owner": {"reputation": 6632, "user_id": 1262024, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/21669aa0deaa22912115eb6f0e281256?s=128&d=identicon&r=PG", "display_name": "Smajl", "link": "https://stackoverflow.com/users/1262024/smajl"}, "edited": false, "score": 0, "creation_date": 1523442473, "post_id": 49772446, "comment_id": 86560176, "body": "I would love to stick to RxJava... I would have to modify a big part of my application and I am sure that this could be done without other dependencies."}, {"owner": {"reputation": 9772, "user_id": 1618135, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/UqWor.jpg?s=128&g=1", "display_name": "blackpanther", "link": "https://stackoverflow.com/users/1618135/blackpanther"}, "reply_to_user": {"reputation": 6632, "user_id": 1262024, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/21669aa0deaa22912115eb6f0e281256?s=128&d=identicon&r=PG", "display_name": "Smajl", "link": "https://stackoverflow.com/users/1262024/smajl"}, "edited": false, "score": 0, "creation_date": 1523442592, "post_id": 49772446, "comment_id": 86560250, "body": "Yes you can if you replace subscribeBy with subscribe (you&#39;ll have to remove the onSuccess and onError words, but the principles and structure is the same. Also, RxKotlin is not an overwrite of RxJava - it&#39;s a very small library that has some small features that makes writing RxJava code more readable in Kotlin - because at the end of the day - RxJava is written for Java; not Kotlin"}, {"owner": {"reputation": 9772, "user_id": 1618135, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/UqWor.jpg?s=128&g=1", "display_name": "blackpanther", "link": "https://stackoverflow.com/users/1618135/blackpanther"}, "reply_to_user": {"reputation": 6632, "user_id": 1262024, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/21669aa0deaa22912115eb6f0e281256?s=128&d=identicon&r=PG", "display_name": "Smajl", "link": "https://stackoverflow.com/users/1262024/smajl"}, "edited": false, "score": 0, "creation_date": 1523443356, "post_id": 49772446, "comment_id": 86560717, "body": "@Smajl I&#39;ve added a little except at the bottom of the answer that uses pure RxJava in Kotlin"}], "tags": [], "owner": {"reputation": 9772, "user_id": 1618135, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/UqWor.jpg?s=128&g=1", "display_name": "blackpanther", "link": "https://stackoverflow.com/users/1618135/blackpanther"}, "is_accepted": true, "score": 3, "last_activity_date": 1523443307, "last_edit_date": 1523443307, "creation_date": 1523441818, "answer_id": 49772446, "question_id": 49772343, "link": "https://stackoverflow.com/questions/49772343/how-to-process-400-response-in-rxjava2/49772446#49772446", "title": "How to process 400 response in RxJava2", "body": "<p>Can't you use the <code>onError</code> in the subscription? I like using RxKotlin for this. For example, I can do the following:</p>\n\n<pre><code>.subscribeBy(onSuccess = {\n     // do Something in on success\n}, onError = {\n     // do something in onError\n})\n</code></pre>\n\n<p>So in your case, it could be something like:</p>\n\n<pre><code>tokenRepository.refreshToken(authStateManager.current.refreshToken!!)\n    .subscribeBy(onSuccess = {\n        Log.d(TAG, \"Obtained new access token: \" + it.toString())\n        authStateManager.updateAfterTokenResponse(TokenResponse.jsonDeserialize(it.toString()), null)\n        token = authStateManager.current.accessToken\n    }, onError = {\n        Log.w(TAG, \"Could not obtain new access token.\")\n        // the variable \"it\" here is a throwable which means you can determine if it's a RetrofitException and what status code is returned\n    })\n</code></pre>\n\n<p>However, if you do not want to use RxKotlin, you can handle your Rx subscriptions like this in Kotlin:</p>\n\n<pre><code>.subscribe({ Log.d(TAG, \"Obtained new access token: \" + it.toString()) },\n           { Log.e(TAG, \"Error is ${it.message}\") })\n</code></pre>\n\n<p>You can handle the error in the second part of the function where the <code>Log.e</code> is being used.</p>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 8367578, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FLIFZ.jpg?s=128&g=1", "display_name": "ppgdn", "link": "https://stackoverflow.com/users/8367578/ppgdn"}, "is_accepted": false, "score": 0, "last_activity_date": 1523531344, "creation_date": 1523531344, "answer_id": 49794985, "question_id": 49772343, "link": "https://stackoverflow.com/questions/49772343/how-to-process-400-response-in-rxjava2/49794985#49794985", "title": "How to process 400 response in RxJava2", "body": "<p>I just had the same problem but I fixed it now. I don't know if my explanation is correct but it seems like <code>doOnError</code> doesn't handle the exception. </p>\n\n<p>You need to use the <code>subscribe()</code> method that takes an <code>onError</code> <code>Consumer</code> as a parameter and handle the error there:</p>\n\n<pre><code>subscribe(Consumer&lt;? super T&gt; onSuccess, Consumer&lt;? super Throwable&gt; onError)\n</code></pre>\n\n<p>In Java it would look like this:</p>\n\n<pre><code>.subscribe(tokenResponse -&gt; {\n                Log.d(TAG, \"Obtained new access token: \" + tokenResponse.toString());\n                authStateManager.updateAfterTokenResponse(TokenResponse.jsonDeserialize(tokenResponse.toString()), null);\n                token = authStateManager.current.accessToken;\n            }, throwable -&gt; {\n                Log.w(TAG, \"Could not obtain new access token.\");\n                authStateManager.signOut();\n            }));\n</code></pre>\n"}], "owner": {"reputation": 6632, "user_id": 1262024, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/21669aa0deaa22912115eb6f0e281256?s=128&d=identicon&r=PG", "display_name": "Smajl", "link": "https://stackoverflow.com/users/1262024/smajl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 508, "favorite_count": 0, "accepted_answer_id": 49772446, "answer_count": 2, "score": 0, "last_activity_date": 1535399343, "creation_date": 1523441574, "last_edit_date": 1535399343, "question_id": 49772343, "link": "https://stackoverflow.com/questions/49772343/how-to-process-400-response-in-rxjava2", "title": "How to process 400 response in RxJava2", "body": "<p>I am struggling with correct exception handling in RxJava2. I am trying to refresh my token inside an <code>OkHttp3</code> interceptor like this:</p>\n\n<pre><code>tokenRepository.refreshToken(authStateManager.current.refreshToken!!)\n                        .doOnError {\n                            Log.w(TAG, \"Could not obtain new access token.\")\n\n                            authStateManager.signOut()\n                        }\n                        .subscribe { tokenResponse -&gt;\n                            Log.d(TAG, \"Obtained new access token: \" + tokenResponse.toString())\n\n                            authStateManager.updateAfterTokenResponse(TokenResponse.jsonDeserialize(tokenResponse.toString()), null)\n\n                            token = authStateManager.current.accessToken\n                        }\n</code></pre>\n\n<p>It works nicely if the refresh token is valid and the request returns 200. But if the refresh token is invalidated and I get some error code (for example 400), the <code>doOnError</code> block is executed but it then proceeds to the subscribe block where the following exception is thrown:</p>\n\n<pre><code>retrofit2.adapter.rxjava2.HttpException: HTTP 400 \n        at retrofit2.adapter.rxjava2.BodyObservable$BodyObserver.onNext(BodyObservable.java:54)\n        at retrofit2.adapter.rxjava2.BodyObservable$BodyObserver.onNext(BodyObservable.java:37)\n...\n</code></pre>\n\n<p>I tried using <code>onErrorReturn</code> and <code>onErrorResumeNext</code> but I would like to skip the subscribe block completely (it there is an error, just log user out and don't try to do anything). Is it possible? The <code>refreshToken</code> method returns <code>Single&lt;JsonObject&gt;</code> type of response.</p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 20365, "user_id": 1759845, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/RUTxR.jpg?s=128&g=1", "display_name": "BackSlash", "link": "https://stackoverflow.com/users/1759845/backslash"}, "edited": false, "score": 1, "creation_date": 1523441573, "post_id": 49772322, "comment_id": 86559585, "body": "It depends on how the <code>equals</code> method is implemented inside the <code>User</code> class."}, {"owner": {"reputation": 45321, "user_id": 2353911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/351903c00c50bac0611117c1a6b82848?s=128&d=identicon&r=PG", "display_name": "Mena", "link": "https://stackoverflow.com/users/2353911/mena"}, "edited": false, "score": 1, "creation_date": 1523441580, "post_id": 49772322, "comment_id": 86559592, "body": "Have you actually implemented the <code>equals</code> method override? At this point this doesn&#39;t look like a Kotlin vs Java issue, does it."}, {"owner": {"reputation": 3453, "user_id": 838355, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/AIvqN.png?s=128&g=1", "display_name": "ir2pid", "link": "https://stackoverflow.com/users/838355/ir2pid"}, "edited": false, "score": 0, "creation_date": 1523441689, "post_id": 49772322, "comment_id": 86559666, "body": "no overrides, using the basic implementation which should compare memory locations ?"}, {"owner": {"reputation": 45321, "user_id": 2353911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/351903c00c50bac0611117c1a6b82848?s=128&d=identicon&r=PG", "display_name": "Mena", "link": "https://stackoverflow.com/users/2353911/mena"}, "edited": false, "score": 0, "creation_date": 1523442018, "post_id": 49772322, "comment_id": 86559857, "body": "@ir2pid the <code>Object.equals</code> implementation compares references. Two separate invocations of <code>new User</code> will not share the same reference, regardless of the equal arguments given to the constructor. You simply need to implement <code>equals</code> appropriately."}], "answers": [{"comments": [{"owner": {"reputation": 3453, "user_id": 838355, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/AIvqN.png?s=128&g=1", "display_name": "ir2pid", "link": "https://stackoverflow.com/users/838355/ir2pid"}, "edited": false, "score": 0, "creation_date": 1523446615, "post_id": 49772562, "comment_id": 86562939, "body": "so kotlin data classes automatically compare every member variable for equivalence ?"}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 1, "creation_date": 1523454600, "post_id": 49772562, "comment_id": 86568883, "body": "Yes, they automatically generate an <code>equals</code> method, which deems two instances equal if all properties in the primary constructor pass an <code>equals</code> check for the two instances."}], "tags": [], "owner": {"reputation": 159, "user_id": 6093594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9151470aa868f3d5b40e364bf66b2c38?s=128&d=identicon&r=PG&f=1", "display_name": "Androidas", "link": "https://stackoverflow.com/users/6093594/androidas"}, "is_accepted": false, "score": 3, "last_activity_date": 1523442084, "creation_date": 1523442084, "answer_id": 49772562, "question_id": 49772322, "link": "https://stackoverflow.com/questions/49772322/kotlin-object-equals-vs-java-object-equals/49772562#49772562", "title": "Kotlin object equals vs Java object equals", "body": "<p>I guess your <code>User</code> class is a <code>data class</code>? Then you get default implementation of comparing member variables for <code>equals</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": true, "score": 2, "last_activity_date": 1523456075, "creation_date": 1523456075, "answer_id": 49777413, "question_id": 49772322, "link": "https://stackoverflow.com/questions/49772322/kotlin-object-equals-vs-java-object-equals/49777413#49777413", "title": "Kotlin object equals vs Java object equals", "body": "<ol>\n<li><p>If you have the same <code>User</code> class, you'll get the same result in both cases. I.e. if your Java code uses Kotlin <code>data class</code>, it will return <code>true</code>; if Kotlin code uses a Java (or Kotlin non-<code>data</code>) class without overridden <code>equals</code>, it will return <code>false</code>.</p></li>\n<li><p>In Kotlin, unlike Java, it's better and safer to write <code>User(\"Alex\", 1) == User(\"Alex\", 1)</code>. This will call <code>equals</code> for non-null objects and handle <code>null</code> on the left side properly where Java will crash.</p></li>\n</ol>\n"}], "owner": {"reputation": 3453, "user_id": 838355, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/AIvqN.png?s=128&g=1", "display_name": "ir2pid", "link": "https://stackoverflow.com/users/838355/ir2pid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 945, "favorite_count": 0, "accepted_answer_id": 49777413, "answer_count": 2, "score": 2, "last_activity_date": 1523456285, "creation_date": 1523441520, "last_edit_date": 1523456285, "question_id": 49772322, "link": "https://stackoverflow.com/questions/49772322/kotlin-object-equals-vs-java-object-equals", "title": "Kotlin object equals vs Java object equals", "body": "<p>I created a User class and on calling the equals on two objects with the same content </p>\n\n<pre><code>println(\"equals = ${User(\"Alex\", 1).equals(User(\"Alex\", 1))}\") \n</code></pre>\n\n<p>outputs true but aren't the two objects different ?</p>\n\n<p>same for Java gives false:</p>\n\n<pre><code>System.out.print(\"equals = \"+new User(\"Alex\",1).equals(new User(\"Alex\",1)));\n</code></pre>\n"}, {"tags": ["android", "camera", "kotlin", "android-camera-intent"], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 5675001, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-IAXIw26R30c/AAAAAAAAAAI/AAAAAAAAAq0/hXhjCDTKXBU/photo.jpg?sz=128", "display_name": "Akhil T Mohan", "link": "https://stackoverflow.com/users/5675001/akhil-t-mohan"}, "edited": false, "score": 0, "creation_date": 1523441863, "post_id": 49772323, "comment_id": 86559771, "body": "You are Absolutely correct bro.. i thought  the  photoURI is causing the problem. :P you made it! :D and i have one doubt in this case on kotlin  what happens if the data is null ?? kotlin avoids null pointer exceptions. what is actually causing the issue here?"}, {"owner": {"reputation": 148364, "user_id": 501696, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/shkBF.png?s=128&g=1", "display_name": "Blackbelt", "link": "https://stackoverflow.com/users/501696/blackbelt"}, "reply_to_user": {"reputation": 173, "user_id": 5675001, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-IAXIw26R30c/AAAAAAAAAAI/AAAAAAAAAq0/hXhjCDTKXBU/photo.jpg?sz=128", "display_name": "Akhil T Mohan", "link": "https://stackoverflow.com/users/5675001/akhil-t-mohan"}, "edited": false, "score": 0, "creation_date": 1523441918, "post_id": 49772323, "comment_id": 86559801, "body": "use <code>?.</code> before accessing the object"}, {"owner": {"reputation": 173, "user_id": 5675001, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-IAXIw26R30c/AAAAAAAAAAI/AAAAAAAAAq0/hXhjCDTKXBU/photo.jpg?sz=128", "display_name": "Akhil T Mohan", "link": "https://stackoverflow.com/users/5675001/akhil-t-mohan"}, "edited": false, "score": 0, "creation_date": 1523442012, "post_id": 49772323, "comment_id": 86559853, "body": "yeah bro i have done it and it doesn&#39;t have any problem now :) let me know what is the exact issue? :P beginner in kotlin!"}, {"owner": {"reputation": 6667, "user_id": 667879, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/bcc1f783c383a55c83198fb838c7dac1?s=128&d=identicon&r=PG", "display_name": "anoop4real", "link": "https://stackoverflow.com/users/667879/anoop4real"}, "edited": false, "score": 0, "creation_date": 1530787704, "post_id": 49772323, "comment_id": 89360286, "body": "I am also facing the issue and I am wondering how the data is becoming null, we are setting the photoURI and passing it on"}, {"owner": {"reputation": 148364, "user_id": 501696, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/shkBF.png?s=128&g=1", "display_name": "Blackbelt", "link": "https://stackoverflow.com/users/501696/blackbelt"}, "reply_to_user": {"reputation": 6667, "user_id": 667879, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/bcc1f783c383a55c83198fb838c7dac1?s=128&d=identicon&r=PG", "display_name": "anoop4real", "link": "https://stackoverflow.com/users/667879/anoop4real"}, "edited": false, "score": 0, "creation_date": 1530787800, "post_id": 49772323, "comment_id": 89360341, "body": "@anoop4real it is hard to say without seeing the code"}, {"owner": {"reputation": 6667, "user_id": 667879, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/bcc1f783c383a55c83198fb838c7dac1?s=128&d=identicon&r=PG", "display_name": "anoop4real", "link": "https://stackoverflow.com/users/667879/anoop4real"}, "edited": false, "score": 0, "creation_date": 1530788123, "post_id": 49772323, "comment_id": 89360562, "body": "@Blackbelt its the same code &quot;takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT, photoURI)&quot; you are sending the photoURI as extra which should come as part of data right? I am following <a href=\"https://developer.android.com/training/camera/photobasics\" rel=\"nofollow noreferrer\">developer.android.com/training/camera/photobasics</a> and trying to do in Kotlin"}, {"owner": {"reputation": 148364, "user_id": 501696, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/shkBF.png?s=128&g=1", "display_name": "Blackbelt", "link": "https://stackoverflow.com/users/501696/blackbelt"}, "edited": false, "score": 0, "creation_date": 1530788176, "post_id": 49772323, "comment_id": 89360597, "body": "if you set the same intent as setResult, yes you should get a no-null-intent back"}], "tags": [], "owner": {"reputation": 148364, "user_id": 501696, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/shkBF.png?s=128&g=1", "display_name": "Blackbelt", "link": "https://stackoverflow.com/users/501696/blackbelt"}, "is_accepted": true, "score": 3, "last_activity_date": 1523441522, "creation_date": 1523441522, "answer_id": 49772323, "question_id": 49772244, "link": "https://stackoverflow.com/questions/49772244/kotlin-error-capturing-image-from-camera-on-java-code-its-ok/49772323#49772323", "title": "Kotlin - Error Capturing Image From camera on JAVA code its OK", "body": "<pre><code>java.lang.IllegalArgumentException: Parameter specified as non-null is null:\n</code></pre>\n\n<p>hardly to say which one exactly is null. For instance </p>\n\n<pre><code>public override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent) {\n</code></pre>\n\n<p>the Intent could be null, and it should be marked as nullabe. Change it with</p>\n\n<pre><code>public override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\n</code></pre>\n"}], "owner": {"reputation": 173, "user_id": 5675001, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-IAXIw26R30c/AAAAAAAAAAI/AAAAAAAAAq0/hXhjCDTKXBU/photo.jpg?sz=128", "display_name": "Akhil T Mohan", "link": "https://stackoverflow.com/users/5675001/akhil-t-mohan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 791, "favorite_count": 0, "accepted_answer_id": 49772323, "answer_count": 1, "score": 0, "last_activity_date": 1523442785, "creation_date": 1523441300, "last_edit_date": 1523442785, "question_id": 49772244, "link": "https://stackoverflow.com/questions/49772244/kotlin-error-capturing-image-from-camera-on-java-code-its-ok", "title": "Kotlin - Error Capturing Image From camera on JAVA code its OK", "body": "<p>This is my JAVA Code Converted to Kotlin.\nafter conversion the code gives me some error, on java its working perfectly without any errors. \nAfter taking image from camera the error is thrown .\nwhat causes the issue ??</p>\n\n<p>I am using <a href=\"https://github.com/Yalantis/uCrop\" rel=\"nofollow noreferrer\">'com.github.yalantis:ucrop:2.2.1-native'</a> library for cropping the image</p>\n\n<pre><code>    private fun dispatchTakePictureIntent() {\n    val takePictureIntent = Intent(MediaStore.ACTION_IMAGE_CAPTURE)\n    if (takePictureIntent.resolveActivity(baseContext.packageManager) != null) {\n        var photoFile: File? = null\n        try {\n            photoFile = createImageFile()\n        } catch (ex: IOException) {\n            // Error occurred while creating the File\n        }\n\n        if (photoFile != null) {\n            try {\n                photoURI = FileProvider.getUriForFile(baseContext,\n                        \"com.anvinsolutions.akhil.pravda.fileprovider\",\n                        photoFile)\n                //Toast.makeText(getBaseContext(), photoURI.getPath(), Toast.LENGTH_SHORT).show();\n                takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT, photoURI)\n                startActivityForResult(takePictureIntent, REQUEST_TAKE_PHOTO)\n            } catch (e: Exception) {\n                e.printStackTrace()\n            }\n\n        }\n    }\n}\n    private fun dispatchTakePictureIntent() {\n    val takePictureIntent = Intent(MediaStore.ACTION_IMAGE_CAPTURE)\n    if (takePictureIntent.resolveActivity(baseContext.packageManager) != null) {\n        var photoFile: File? = null\n        try {\n            photoFile = createImageFile()\n        } catch (ex: IOException) {\n            // Error occurred while creating the File\n        }\n\n        if (photoFile != null) {\n            try {\n                photoURI = FileProvider.getUriForFile(baseContext,\n                        \"com.anvinsolutions.akhil.pravda.fileprovider\",\n                        photoFile)\n                //Toast.makeText(getBaseContext(), photoURI.getPath(), Toast.LENGTH_SHORT).show();\n                takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT, photoURI)\n                startActivityForResult(takePictureIntent, REQUEST_TAKE_PHOTO)\n            } catch (e: Exception) {\n                e.printStackTrace()\n            }\n\n        }\n    }\n}\n\n@Throws(IOException::class)\nprivate fun createImageFile(): File {\n    // Create an image file name\n    val timeStamp = SimpleDateFormat(\"yyyyMMdd_HHmmss\").format(Date())\n    //Toast.makeText(getBaseContext(), timeStamp, Toast.LENGTH_SHORT).show();\n    val imageFileName = \"JPEG_$timeStamp\"\n    val storageDir = getExternalFilesDir(Environment.DIRECTORY_PICTURES)\n    val image = File.createTempFile(\n            imageFileName, /* prefix */\n            \".jpg\", /* suffix */\n            storageDir      /* directory */\n    )\n\n    // Save a file: path for use with ACTION_VIEW intents\n    mCurrentPhotoPath = image.absolutePath\n    Log.e(\"PATH ==&gt; \",mCurrentPhotoPath)\n    return image\n}\n\n/*********************************** CAMERA  */\n\n\nprivate fun startCropActivity(uri: Uri) {\n    //Log.e(\"\",\"wfwefwefwef\")\n    var destinationFileName = \"Akhil\"\n    destinationFileName += \".jpg\"\n    val uCrop = UCrop.of(uri, Uri.fromFile(File(cacheDir, destinationFileName)))\n    val options = UCrop.Options()\n    //options.withAspectRatio(3,4);\n    options.setFreeStyleCropEnabled(true)\n    //options.withMaxResultSize(396,512);\n    options.setHideBottomControls(true)\n    options.setCompressionFormat(Bitmap.CompressFormat.PNG)\n    uCrop.withOptions(options)\n    uCrop.start(this@member_form)\n}\n\nprivate fun pickFromGallery() {\n    val intent = Intent()\n    intent.type = \"image/*\"\n    intent.action = Intent.ACTION_GET_CONTENT\n    intent.addCategory(Intent.CATEGORY_OPENABLE)\n    startActivityForResult(Intent.createChooser(intent, \"Select one\"), REQUEST_SELECT_PICTURE)\n}\n\n\nprivate fun handleCropResult(result: Intent) {\n    croppedImage = UCrop.getOutput(result)!!\n    if (croppedImage != null) {\n        //Toast.makeText(getBaseContext(), \"OK CROP COMPLETED\", Toast.LENGTH_SHORT).show();\n        take_photo.setImageResource(android.R.color.transparent)\n        take_photo.setImageURI(croppedImage)\n        /*ViewGroup.LayoutParams layoutParams = take_photo.getLayoutParams();\n        layoutParams.width = 396;\n        layoutParams.height = 512;\n        take_photo.setLayoutParams(layoutParams);*/\n        take_photo.scaleType = ImageView.ScaleType.CENTER\n        take_photo.adjustViewBounds = true\n        //ResultActivity.startWithUri(SampleActivity.this, croppedImage);\n    } else {\n        Toast.makeText(baseContext, \"Error\", Toast.LENGTH_SHORT).show()\n    }\n}\n\nprivate fun handleCropError(result: Intent) {\n    val cropError = UCrop.getError(result)\n    if (cropError != null) {\n        Log.e(\"Error: \", \"handleCropError: \", cropError)\n        Toast.makeText(baseContext, cropError.message, Toast.LENGTH_LONG).show()\n    } else {\n        Toast.makeText(baseContext, \"Unexpected Error!\", Toast.LENGTH_SHORT).show()\n    }\n}\n\n\npublic override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent) {\n    Log.e(\"Result\", \"RequestCode=$requestCode Result Code=$resultCode\")\n\n    if (requestCode == REQUEST_IMAGE_CAPTURE &amp;&amp; resultCode == Activity.RESULT_OK) {\n        try {\n            startCropActivity(photoURI!!)\n            Log.e(\"\",\"startCropActivity\")\n        } catch (e: Exception) {\n            e.printStackTrace()\n        }\n\n    }else{\n        Log.e(\"Result\",\" : NOT OK\")\n    }\n\n    if (resultCode == Activity.RESULT_OK) {\n        if (requestCode == REQUEST_SELECT_PICTURE) {\n            val selectedUri = data.data\n            if (selectedUri != null) {\n                startCropActivity(data.data!!)\n            } else {\n                Toast.makeText(baseContext, \"Error\", Toast.LENGTH_SHORT).show()\n            }\n        } else if (requestCode == UCrop.REQUEST_CROP) {\n            handleCropResult(data)\n        }\n    }\n    if (resultCode == UCrop.RESULT_ERROR) {\n        handleCropError(data)\n        Log.e(\"\", \"CROP RESULT ERROR\")\n    }\n    super.onActivityResult(requestCode, resultCode, null)\n}\n</code></pre>\n\n<p>This is the error message,</p>\n\n<pre><code> Process: com.anvinsolutions.akhil.pravda, PID: 14120\njava.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=-1, data=null} to activity {com.anvinsolutions.akhil.pravda/com.anvinsolutions.akhil.pravda.member_form}: java.lang.IllegalArgumentException: Parameter specified as non-null is null: method kotlin.jvm.internal.Intrinsics.checkParameterIsNotNull, parameter data\n    at android.app.ActivityThread.deliverResults(ActivityThread.java:3738)\n    at android.app.ActivityThread.handleSendResult(ActivityThread.java:3781)\n    at android.app.ActivityThread.access$1500(ActivityThread.java:153)\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1424)\n    at android.os.Handler.dispatchMessage(Handler.java:102)\n    at android.os.Looper.loop(Looper.java:154)\n    at android.app.ActivityThread.main(ActivityThread.java:5523)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:739)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:629)\n Caused by: java.lang.IllegalArgumentException: Parameter specified as non-null is null: method kotlin.jvm.internal.Intrinsics.checkParameterIsNotNull, parameter data\n    at com.anvinsolutions.akhil.pravda.member_form.onActivityResult(member_form.kt)\n    at android.app.Activity.dispatchActivityResult(Activity.java:6508)\n</code></pre>\n"}, {"tags": ["java", "android", "android-activity", "kotlin", "launchmode"], "comments": [{"owner": {"reputation": 1307, "user_id": 4681367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83a0416184c6ffe72aac807e2feac5ce?s=128&d=identicon&r=PG&f=1", "display_name": "Lionel Briand", "link": "https://stackoverflow.com/users/4681367/lionel-briand"}, "edited": false, "score": 0, "creation_date": 1523441388, "post_id": 49772049, "comment_id": 86559465, "body": "Since the question has no information about back button, maybe the <a href=\"https://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_NO_HISTORY\" rel=\"nofollow noreferrer\">Intent.FLAG_ACTIVITY_NO_HISTORY</a> flag is the thing you need."}], "answers": [{"tags": [], "owner": {"reputation": 333, "user_id": 7972675, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/098c3bdc78f6b0d29f922fffc486f146?s=128&d=identicon&r=PG&f=1", "display_name": "Android User", "link": "https://stackoverflow.com/users/7972675/android-user"}, "is_accepted": false, "score": 2, "last_activity_date": 1523441624, "creation_date": 1523441624, "answer_id": 49772366, "question_id": 49772049, "link": "https://stackoverflow.com/questions/49772049/start-the-first-screen-each-time-app-comes-from-background-in-android/49772366#49772366", "title": "Start the First screen each time app comes from background in android", "body": "<p>you may get ondestroy() or onpause() method. on it youcan do</p>\n\n<pre><code>Intent intent = new Intent(this, A.class);\nintent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK); \nstartActivity(intent);\nfinish(); //\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 9250712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26d852aaed421b8832863a5286a728f7?s=128&d=identicon&r=PG&f=1", "display_name": "kaba1213", "link": "https://stackoverflow.com/users/9250712/kaba1213"}, "is_accepted": false, "score": 3, "last_activity_date": 1523441975, "creation_date": 1523441975, "answer_id": 49772521, "question_id": 49772049, "link": "https://stackoverflow.com/questions/49772049/start-the-first-screen-each-time-app-comes-from-background-in-android/49772521#49772521", "title": "Start the First screen each time app comes from background in android", "body": "<p>When you press Home-Button change to Activity A. Maybe this will work:</p>\n\n<pre><code>@Override\npublic boolean onKeyDown(int keyCode, KeyEvent event)\n{\n    if (keyCode == KeyEvent.KEYCODE_HOME)\n    {\n        Intent intent = new Intent(this, MyActivityName.class); \n        //replace MyActivityName.class with the name of your Activity A\n        startActivity(intent);\n    }\n    return super.onKeyDown(keyCode, event);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 725, "user_id": 8266906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6cQoF.jpg?s=128&g=1", "display_name": "Locdoc01", "link": "https://stackoverflow.com/users/8266906/locdoc01"}, "is_accepted": false, "score": 2, "last_activity_date": 1523442017, "creation_date": 1523442017, "answer_id": 49772533, "question_id": 49772049, "link": "https://stackoverflow.com/questions/49772049/start-the-first-screen-each-time-app-comes-from-background-in-android/49772533#49772533", "title": "Start the First screen each time app comes from background in android", "body": "<p>You can set android:clearTaskOnLaunch=\"true\" for Activity A in your manifest file to achieve what you want:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    package=\"com.beispieldomain.stackoverflowxmlparse\"&gt;\n\n    &lt;application\n        ...\n        &lt;activity \n            android:name=\".MainActivity\"\n            android:clearTaskOnLaunch=\"true\"&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"android.intent.action.MAIN\" /&gt;\n\n                &lt;category android:name=\"android.intent.category.LAUNCHER\" /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n&lt;/manifest&gt;\n</code></pre>\n\n<p>Have a look here:<p>\n<a href=\"https://developer.android.com/guide/components/activities/tasks-and-back-stack.html#ManagingTasks\" rel=\"nofollow noreferrer\">Managing Tasks</a><br>\n<a href=\"https://developer.android.com/guide/topics/manifest/activity-element.html#clear\" rel=\"nofollow noreferrer\">clearTaskOnLaunch</a></p>\n"}, {"comments": [{"owner": {"reputation": 127, "user_id": 6339420, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3fa38df2491eebfff73fe9d29041b74c?s=128&d=identicon&r=PG&f=1", "display_name": "ndn", "link": "https://stackoverflow.com/users/6339420/ndn"}, "edited": false, "score": 0, "creation_date": 1523446898, "post_id": 49772973, "comment_id": 86563113, "body": "Thank you for your reply , this is the only solution which is worked for me"}], "tags": [], "owner": {"reputation": 116, "user_id": 9502230, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Kishan Thakar", "link": "https://stackoverflow.com/users/9502230/kishan-thakar"}, "is_accepted": true, "score": 4, "last_activity_date": 1523443325, "creation_date": 1523443325, "answer_id": 49772973, "question_id": 49772049, "link": "https://stackoverflow.com/questions/49772049/start-the-first-screen-each-time-app-comes-from-background-in-android/49772973#49772973", "title": "Start the First screen each time app comes from background in android", "body": "<p>For launch same Activty you Should clear all the Activity when app goes into background.When app goes background use below code that will clear current activity and all other activity that are in stack.</p>\n\n<p>For API 16+, use</p>\n\n<p>finishAffinity();</p>\n\n<p>For lower (Android 4.1 lower), use</p>\n\n<p>ActivityCompat.finishAffinity(YourActivity.this);</p>\n"}], "owner": {"reputation": 127, "user_id": 6339420, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3fa38df2491eebfff73fe9d29041b74c?s=128&d=identicon&r=PG&f=1", "display_name": "ndn", "link": "https://stackoverflow.com/users/6339420/ndn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "accepted_answer_id": 49772973, "answer_count": 4, "score": 1, "last_activity_date": 1523457779, "creation_date": 1523440664, "last_edit_date": 1523457779, "question_id": 49772049, "link": "https://stackoverflow.com/questions/49772049/start-the-first-screen-each-time-app-comes-from-background-in-android", "title": "Start the First screen each time app comes from background in android", "body": "<p>I have an app that has 5 activities (A,B,C,D,E). The app can navigate between those activities. When the user presses home button in device the app goes background and after when the app comes to foreground, first activity should be launched i.e A activity.</p>\n\n<p>Example: app in D activity, after pressing home, the app goes background and when it comes to foreground again it should open A activity not D.</p>\n\n<p>Solutions which i have tried is launch mode, I set the launch mode for A activity (singleInstance) but could not able to find the required solution.</p>\n"}, {"tags": ["java", "android", "junit", "kotlin"], "comments": [{"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1523456294, "post_id": 49771945, "comment_id": 86570132, "body": "Maybe it&#39;s a <code>Throwable</code> which isn&#39;t an <code>Exception</code>?"}, {"owner": {"reputation": 6549, "user_id": 3708094, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IlmSU.jpg?s=128&g=1", "display_name": "RWIL", "link": "https://stackoverflow.com/users/3708094/rwil"}, "reply_to_user": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1523516733, "post_id": 49771945, "comment_id": 86594992, "body": "<code>Method threw &#39;java.lang.RuntimeException&#39; exception. Cannot evaluate org.json.JSONObject.toString()</code>. So it was an Exception. Luckily, this set me in on right track in identifying the missing org.json package in my unit tests"}], "answers": [{"tags": [], "owner": {"reputation": 6549, "user_id": 3708094, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IlmSU.jpg?s=128&g=1", "display_name": "RWIL", "link": "https://stackoverflow.com/users/3708094/rwil"}, "is_accepted": true, "score": 0, "last_activity_date": 1523442841, "creation_date": 1523442841, "answer_id": 49772798, "question_id": 49771945, "link": "https://stackoverflow.com/questions/49771945/unable-to-catch-exception-in-kotlin-junit-4-test/49772798#49772798", "title": "Unable to catch exception in Kotlin JUnit 4 Test", "body": "<p>As suspected, the origin of the problem is with JSONObject being a part of the Android system libraries.</p>\n\n<p>For me the solution was to manually add JSONObject in gradle to the testImplementation</p>\n\n<pre><code>dependencies {\n    ...\n   testImplementation 'org.json:json:20180130'\n}\n</code></pre>\n"}], "owner": {"reputation": 6549, "user_id": 3708094, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IlmSU.jpg?s=128&g=1", "display_name": "RWIL", "link": "https://stackoverflow.com/users/3708094/rwil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 445, "favorite_count": 0, "accepted_answer_id": 49772798, "answer_count": 1, "score": 1, "last_activity_date": 1523442841, "creation_date": 1523440420, "last_edit_date": 1523442327, "question_id": 49771945, "link": "https://stackoverflow.com/questions/49771945/unable-to-catch-exception-in-kotlin-junit-4-test", "title": "Unable to catch exception in Kotlin JUnit 4 Test", "body": "<p>I want to check if a String has a valid JSON format in a unit tests.</p>\n\n<p>To do this, I try creating a new JSONObject from the string and catching any possible Exceptions that can be thrown.</p>\n\n<p>However, when running the code below, no Exception is caught</p>\n\n<pre><code>@Test\nfun checkFunctionWithStringToJSONTest() {\n    val invalidJSON = \"INVALIDJSON--\"\n    try {\n        JSONObject(invalidJSON)\n    } catch (ex: Exception) {\n        try {\n            JSONArray(invalidJSON)\n        } catch (ex1: Exception) {\n            assert(false)\n        }\n    }\n    assert(true)\n}\n</code></pre>\n\n<p>Evaluating the same expression in the debugger shows that an Exception should be thrown, but is never caught.</p>\n\n<p>Why is this happening? </p>\n\n<p>I'm Using <code>JUnit 4.12</code>, <code>hamcrest-library:1.3</code> and <code>Kotlin 1.2.31</code> in an Android studio Android project</p>\n\n<p><strong>EDIT:</strong>\nAs pointed out here <a href=\"https://stackoverflow.com/a/32822468/3708094\">https://stackoverflow.com/a/32822468/3708094</a>\nJSONObject is a part of the android framework and not available in Unit Tests. Most likely this is related to the cause of the question above.</p>\n\n<p>Even if it is not available, no Exception is caught, but something is thrown according to the debuggers evaluate tool. </p>\n"}, {"tags": ["properties", "kotlin", "delegation"], "comments": [{"owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 1, "creation_date": 1523437436, "post_id": 49770778, "comment_id": 86556604, "body": "You can&#39;t override default behavior with Kotlin: <a href=\"https://kotlinlang.org/docs/reference/extensions.html#extensions-are-resolved-statically\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/&hellip;</a>"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1523438825, "post_id": 49770778, "comment_id": 86557602, "body": "Please explain what you want to achieve. There is no &quot;default set/get of an object&quot;; a <code>String</code> <i>is</i> a <code>String</code>, and operations that work with a <code>String</code> access it directly, without going through any intermediate methods."}], "owner": {"reputation": 1707, "user_id": 6440190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F0xWL.png?s=128&g=1", "display_name": "Bal0r", "link": "https://stackoverflow.com/users/6440190/bal0r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1523438738, "creation_date": 1523437085, "last_edit_date": 1523438052, "question_id": 49770778, "link": "https://stackoverflow.com/questions/49770778/how-to-change-the-default-set-get-of-an-object-in-kotlin", "title": "How to change the default set/get of an object in Kotlin?", "body": "<p>I'm looking for a way to override how the String getter function works, but I wasn't able to find any solution. Any way to do this?\nI know delegated properties works, but I'm looking for a way to override the default setter and getter, without having to declare \"<code>by SomeDelegate()</code>\".</p>\n\n<p>I tried something like </p>\n\n<pre><code>operator fun String?.getValue(thisRef: Any?, property: KProperty&lt;*&gt;): String {\n    return \"it works\"\n}\n</code></pre>\n\n<p>but it didn't work.</p>\n"}, {"tags": ["android", "kotlin", "android-instant-apps", "android-mediaprojection"], "comments": [{"owner": {"reputation": 2271, "user_id": 2638235, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jvEcL.png?s=128&g=1", "display_name": "Prags", "link": "https://stackoverflow.com/users/2638235/prags"}, "edited": false, "score": 0, "creation_date": 1523438910, "post_id": 49770619, "comment_id": 86557653, "body": "Can you file a bug to Google, then link to it back in here? It would be helpful for all, thanks! <a href=\"https://issuetracker.google.com/issues/new?component=316045&amp;template=1018787\" rel=\"nofollow noreferrer\">issuetracker.google.com/issues/&hellip;</a>"}, {"owner": {"reputation": 4583, "user_id": 6668797, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/FgETn.jpg?s=128&g=1", "display_name": "TWL", "link": "https://stackoverflow.com/users/6668797/twl"}, "edited": false, "score": 1, "creation_date": 1523556248, "post_id": 49770619, "comment_id": 86620933, "body": "If you&#39;re getting a security permission error on the instant app, but not on the installed app, then that means instant apps does not allow it, i.e. restricted feature. Some restrictions are listed, but not all of them @ <a href=\"https://developer.android.com/topic/instant-apps/getting-started/prepare.html#restricted_features\" rel=\"nofollow noreferrer\">developer.android.com/topic/instant-apps/getting-started/&hellip;</a>"}], "owner": {"reputation": 68, "user_id": 4111368, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-I5PU2aNRNkc/AAAAAAAAAAI/AAAAAAAAAAA/_h09hE8F1h8/photo.jpg?sz=128", "display_name": "Michael Carroll", "link": "https://stackoverflow.com/users/4111368/michael-carroll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1523511644, "creation_date": 1523436633, "last_edit_date": 1523511644, "question_id": 49770619, "link": "https://stackoverflow.com/questions/49770619/android-instantapp-vs-full-apk-permission-handling-issue", "title": "Android InstantApp vs Full APK Permission handling issue", "body": "<p>Implementing a MediaProjection sample for Screen Recording purposes while having my project setup in InstantApps mode gave me Security Permission error when running this line of code:</p>\n\n<pre><code>val REQUEST_MEDIA_PROJECTION = 101\nstartActivityForResult(mMediaProjectionManager?.createScreenCaptureIntent(), REQUEST_MEDIA_PROJECTION)\n</code></pre>\n\n<p>But prompts you and allows you to continue when not an InstantApp.</p>\n\n<p>Any ideas on a workaround, besides switching back to the regular non InstantApp</p>\n"}, {"tags": ["android", "kotlin", "rx-android"], "answers": [{"tags": [], "owner": {"reputation": 1482, "user_id": 8996455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6VPfx.jpg?s=128&g=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/8996455/dmitry"}, "is_accepted": true, "score": 4, "last_activity_date": 1523435388, "creation_date": 1523435388, "answer_id": 49770197, "question_id": 49770064, "link": "https://stackoverflow.com/questions/49770064/android-rx-function-in-new-thread/49770197#49770197", "title": "android Rx function in new thread", "body": "<p>That is because <code>Thread.sleep(3000)</code> is being executed on the <code>Main Thread</code>. You are creating your rx stream AFTER <code>Thread.sleep(3000)</code> was executed. You can change your getKKMInfo method to the following to get the desired result:</p>\n\n<pre><code>private fun getKKMInfo(): Observable&lt;KKMInfo&gt; {\n        return Observable.fromCallable {\n            Thread.sleep(3000)\n            Log.i(\"RX\", \"LOG2\")\n\n            //doSomeStaff()\n\n            return@fromCallable KKMInfo(\n                    date,\n                    shift_model_name,\n                    shift_serial_number,\n                    shift_state_string)\n        }\n    }\n</code></pre>\n"}], "owner": {"reputation": 634, "user_id": 9122988, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0zSHg.jpg?s=128&g=1", "display_name": "GuessWho", "link": "https://stackoverflow.com/users/9122988/guesswho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 1, "accepted_answer_id": 49770197, "answer_count": 1, "score": 0, "last_activity_date": 1523435763, "creation_date": 1523434971, "last_edit_date": 1523435763, "question_id": 49770064, "link": "https://stackoverflow.com/questions/49770064/android-rx-function-in-new-thread", "title": "android Rx function in new thread", "body": "<p>The task is trivial - I need to start some function in new thread and show the result in UI.</p>\n\n<p>Here is my code</p>\n\n<pre><code>class FragmentKKMInfo {\n\n  override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n        super.onViewCreated(view, savedInstanceState)\n\n        getKKMInfo().subscribeOn(Schedulers.io())\n                .observeOn(AndroidSchedulers.mainThread())\n                .subscribe({ info -&gt;\n                    Log.i(\"RX\", \"LOG3\")\n                    //doUIStaff()\n                }, { error -&gt;\n\n                    Toast.makeText(context, error.message, Toast.LENGTH_LONG).show()\n\n                })\n\n        Log.i(\"RX\", \"LOG1\")\n    }\n\n    private fun getKKMInfo(): Observable&lt;KKMInfo&gt; {\n\n        Thread.sleep(3000)\n        Log.i(\"RX\", \"LOG2\")\n\n        //doSomeStaff()\n\n        return Observable.just(KKMInfo(\n                date,\n                shift_model_name,\n                shift_serial_number,\n                shift_state_string\n        ))\n    }\n\n}\n</code></pre>\n\n<p>I'm expected to get LOG1, LOG2, LOG3. But Fragment does't show until the whole code will be complete and my logs are LOG2, LOG1, LOG3.</p>\n\n<p>What's the right way to do this?</p>\n"}, {"tags": ["android", "unit-testing", "lambda", "kotlin", "mockito"], "answers": [{"comments": [{"owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 1, "creation_date": 1523437602, "post_id": 49770865, "comment_id": 86556717, "body": "Disclaimer: I&#39;m the author of mockito-kotlin"}, {"owner": {"reputation": 425, "user_id": 1312353, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/de52acd22dab1c76041b169ae53c1261?s=128&d=identicon&r=PG", "display_name": "kioli", "link": "https://stackoverflow.com/users/1312353/kioli"}, "edited": false, "score": 0, "creation_date": 1523439018, "post_id": 49770865, "comment_id": 86557731, "body": "Hey @nhaarman, thank you for the reply. I actually followed your work and tried to implement it already (bug thanks for what you did for the community btw). The problem is that when I do that the test fails with the line &quot;myAny&lt;String&gt;() must not be null&quot; because my <code>doSomething</code> function accepts non-nullable parameters"}, {"owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "reply_to_user": {"reputation": 425, "user_id": 1312353, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/de52acd22dab1c76041b169ae53c1261?s=128&d=identicon&r=PG", "display_name": "kioli", "link": "https://stackoverflow.com/users/1312353/kioli"}, "edited": false, "score": 0, "creation_date": 1523440879, "post_id": 49770865, "comment_id": 86559104, "body": "If you look at the <a href=\"https://github.com/nhaarman/mockito-kotlin/blob/1.x/mockito-kotlin/src/main/kotlin/com/nhaarman/mockito_kotlin/Mockito.kt#L44\" rel=\"nofollow noreferrer\">file</a> I mentioned, you will see another &#39;hack&#39;, namely casting <code>null</code> to <code>T</code> using a <code>createInstance()</code> method."}, {"owner": {"reputation": 425, "user_id": 1312353, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/de52acd22dab1c76041b169ae53c1261?s=128&d=identicon&r=PG", "display_name": "kioli", "link": "https://stackoverflow.com/users/1312353/kioli"}, "edited": false, "score": 0, "creation_date": 1523441895, "post_id": 49770865, "comment_id": 86559791, "body": "Yes I checked it, but then the <code>createInstance</code> needs a <code>nonNullProvider</code> which in turns needs a <code>NullCaster</code> and <code>InstanceCreator</code> etc. which needs many more classes OR to import your library :) And I was trying to see if there was a quicker way around it"}, {"owner": {"reputation": 425, "user_id": 1312353, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/de52acd22dab1c76041b169ae53c1261?s=128&d=identicon&r=PG", "display_name": "kioli", "link": "https://stackoverflow.com/users/1312353/kioli"}, "edited": false, "score": 0, "creation_date": 1523444324, "post_id": 49770865, "comment_id": 86561393, "body": "Actually even importing your library and using its &#39;hack&#39; with the <code>createInstance</code> the problem still remains and the test fails with <code>Parameter specified as non-null is null: method kotlin.jvm.internal.Intrinsics.checkParameterIsNotNull</code>"}, {"owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "reply_to_user": {"reputation": 425, "user_id": 1312353, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/de52acd22dab1c76041b169ae53c1261?s=128&d=identicon&r=PG", "display_name": "kioli", "link": "https://stackoverflow.com/users/1312353/kioli"}, "edited": false, "score": 0, "creation_date": 1523445031, "post_id": 49770865, "comment_id": 86561864, "body": "<code>doSomething</code> needs to be open. Note that you can use the easy method mockito-kotlin2 will use: <a href=\"https://github.com/nhaarman/mockito-kotlin/blob/2.x/mockito-kotlin/src/main/kotlin/com/nhaarman/mockitokotlin2/internal/CreateInstance.kt\" rel=\"nofollow noreferrer\">github.com/nhaarman/mockito-kotlin/blob/2.x/mockito-kotlin/s&zwnj;&#8203;rc/&hellip;</a>"}, {"owner": {"reputation": 425, "user_id": 1312353, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/de52acd22dab1c76041b169ae53c1261?s=128&d=identicon&r=PG", "display_name": "kioli", "link": "https://stackoverflow.com/users/1312353/kioli"}, "edited": false, "score": 0, "creation_date": 1523448714, "post_id": 49770865, "comment_id": 86564363, "body": "Once again thank you very much, the <code>open</code> made the trick (I had it on the class not the function itself) well suggested... darn those intricate and obscure errors :P"}], "tags": [], "owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "is_accepted": true, "score": 3, "last_activity_date": 1523437352, "creation_date": 1523437352, "answer_id": 49770865, "question_id": 49769923, "link": "https://stackoverflow.com/questions/49769923/mock-kotlin-function-as-parameter-in-android/49770865#49770865", "title": "Mock kotlin function as parameter in Android", "body": "<p><code>Mockito.any()</code> requires a <code>Class&lt;T&gt;</code> as a first parameter, so what you want to do is get the <code>Class</code> instance of <code>() -&gt; Unit</code>. \nKotlin does not allow you to write <code>(() -&gt; Unit)::class.java</code>, but it <em>does</em> allow you to access the underlying class of <code>() -&gt; Unit</code>: <code>Function0</code>.</p>\n\n<p>So to get the <code>Class&lt;() -&gt; Unit&gt;</code> you need, you can do the following:</p>\n\n<pre><code>val f : Class&lt;() -&gt; Unit&gt; = Function0::class.java as Class&lt;Function0&lt;Unit&gt;&gt;\n</code></pre>\n\n<p>You can pass this class to the <code>any</code> call:</p>\n\n<pre><code>verify(mockInstance, times(1)).doSomething(any(f))\n</code></pre>\n\n<hr>\n\n<p>Now this isn't very pretty, so you can define a custom <code>any()</code> function that does all this magic for you:</p>\n\n<pre><code>inline fun &lt;reified T : Any&gt; myAny() = Mockito.any(T::class.java)\n</code></pre>\n\n<p>This lets you do the following:</p>\n\n<pre><code>verify(mockInstance, times(1)).doSomething(myAny&lt;() -&gt; Unit&gt;())\n// or:\nverify(mockInstance, times(1)).doSomething(myAny())\n</code></pre>\n\n<p>This is what <a href=\"https://github.com/nhaarman/mockito-kotlin/blob/1.x/mockito-kotlin/src/main/kotlin/com/nhaarman/mockito_kotlin/Mockito.kt#L44\" rel=\"nofollow noreferrer\">Mockito-Kotlin</a> does for you under the hood.</p>\n"}], "owner": {"reputation": 425, "user_id": 1312353, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/de52acd22dab1c76041b169ae53c1261?s=128&d=identicon&r=PG", "display_name": "kioli", "link": "https://stackoverflow.com/users/1312353/kioli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2461, "favorite_count": 0, "accepted_answer_id": 49770865, "answer_count": 1, "score": 2, "last_activity_date": 1523453483, "creation_date": 1523434549, "last_edit_date": 1523453483, "question_id": 49769923, "link": "https://stackoverflow.com/questions/49769923/mock-kotlin-function-as-parameter-in-android", "title": "Mock kotlin function as parameter in Android", "body": "<p>I need to test a Kotlin function that accepts another function as parameter.\nThe class looks something like this:</p>\n\n<pre><code>class MyClass(val myInstance: MyObject) {\n\n    fun toBeTested(text: String, number: Int) {\n        myInstance.doSomething(text, otherFunction(number))\n        ...\n    }\n}\n</code></pre>\n\n<p>My test so far looks like this</p>\n\n<pre><code>@Test\nfun testFunction() {\n    val mockInstance = mock(MyObject::class.java)\n\n    myClass.toBeTested(\"test\", 15)\n}\n</code></pre>\n\n<p>I want to use a <code>verify(mockInstance, times(1)).doSomething()</code> but I need to specify inside the <code>doSomething</code> the parameters it takes, and I don't know how to specify the function.</p>\n\n<p>Is it the right direction? Or should I take another way (maybe reorganising code or doing some other magic)?</p>\n\n<p>many thanks</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 7068, "user_id": 5217712, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xq83n.jpg?s=128&g=1", "display_name": "Enzokie", "link": "https://stackoverflow.com/users/5217712/enzokie"}, "edited": false, "score": 0, "creation_date": 1523433824, "post_id": 49769517, "comment_id": 86554257, "body": "You should have read about Java Polymorphism it is also applicable to Kotlin."}, {"owner": {"reputation": 45871, "user_id": 2788, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/28acae7d7979a1cd603921a198532e7d?s=128&d=identicon&r=PG", "display_name": "Strelok", "link": "https://stackoverflow.com/users/2788/strelok"}, "edited": false, "score": 0, "creation_date": 1523444723, "post_id": 49769517, "comment_id": 86561665, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/46650079/in-kotlin-how-to-pass-back-a-mutablelist-where-the-destination-expects-a-list\">in kotlin, how to pass back a MutableList where the destination expects a List</a>"}], "answers": [{"tags": [], "owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "is_accepted": false, "score": 1, "last_activity_date": 1523433535, "creation_date": 1523433535, "answer_id": 49769601, "question_id": 49769517, "link": "https://stackoverflow.com/questions/49769517/why-can-i-pass-a-mutablelist-parameter-to-class-which-accept-list-parameter-in-k/49769601#49769601", "title": "Why can I pass a MutableList parameter to class which accept List parameter in Kotlin?", "body": "<p>If you look at the source of <code>MutableList</code>, you will see that <code>MutableList</code> extends <code>List</code>, which is why you can pass <code>MutableList</code> to functions that expect a <code>List</code>:</p>\n\n<pre><code>public interface MutableList&lt;E&gt; : List&lt;E&gt;\n</code></pre>\n\n<p>The <code>MutableList</code> merely adds new functionality to the <code>List</code> type, making it mutable.</p>\n"}], "owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1255, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523433535, "creation_date": 1523433313, "question_id": 49769517, "link": "https://stackoverflow.com/questions/49769517/why-can-i-pass-a-mutablelist-parameter-to-class-which-accept-list-parameter-in-k", "title": "Why can I pass a MutableList parameter to class which accept List parameter in Kotlin?", "body": "<p>The class CustomAdapter accept a List parameter in Code B, but why can I use Code A create a object of CustomAdapter by passing MutableList parameter ?</p>\n\n<p><strong>Code A</strong></p>\n\n<pre><code>private lateinit var allList: MutableList&lt;MSetting&gt;\n\nallList=SettingHandler().getListAllSetting().toMutableList()\nmCustomAdapter= CustomAdapter(allList)\nmRecyclerView.adapter= mCustomAdapter\n</code></pre>\n\n<p><strong>Code B</strong></p>\n\n<pre><code>class CustomAdapter (val backupItemList: List&lt;MSetting&gt;) : RecyclerView.Adapter&lt;CustomAdapter.ViewHolder&gt;() {\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "kapt", "instant-run", "annotation-processor"], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 3269827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4E1Nb.jpg?s=128&g=1", "display_name": "Philipp Fahlteich", "link": "https://stackoverflow.com/users/3269827/philipp-fahlteich"}, "edited": false, "score": 0, "creation_date": 1523522124, "post_id": 49772617, "comment_id": 86597976, "body": "That was it! Splitting the annotation module into two separate modules (one for the annotations and one for the processor) fixed the problems with Instant Run and made other workarounds like &#39;includeCompileClasspath&#39; obsolete. Thank you very much and have a nice day!"}, {"owner": {"reputation": 3658, "user_id": 67878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8a20b6c052e6178c98b8026c28fb75cc?s=128&d=identicon&r=PG", "display_name": "Vitaly", "link": "https://stackoverflow.com/users/67878/vitaly"}, "edited": false, "score": 1, "creation_date": 1524358172, "post_id": 49772617, "comment_id": 86939258, "body": "Why can&#39;t <code>kapt project</code> be the same project as the root project, not a separate one?"}], "tags": [], "owner": {"reputation": 1448, "user_id": 2219991, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/85857844b2f7a8df8b862ae1672b5148?s=128&d=identicon&r=PG", "display_name": "R&#252;diger", "link": "https://stackoverflow.com/users/2219991/r%c3%bcdiger"}, "is_accepted": true, "score": 1, "last_activity_date": 1523442257, "creation_date": 1523442257, "answer_id": 49772617, "question_id": 49769435, "link": "https://stackoverflow.com/questions/49769435/failed-to-build-annotation-processor-in-kotlin/49772617#49772617", "title": "Failed to build annotation processor in Kotlin", "body": "<p>You have to split your \"annotation\" Project into two Parts. </p>\n\n<p>Example:</p>\n\n<pre><code>implementation project(':annotation-lib') // here you put Annotation.kt\nkapt project(':annotation-compiler') // AnnotationProcessor.kt\n</code></pre>\n\n<p>don't forget to add the processor to your META-INF inside the annotation-compiler project see <a href=\"https://stackoverflow.com/questions/11685498/what-is-the-default-annotation-processors-discovery-process\">What is the default annotation processors discovery process?</a></p>\n"}], "owner": {"reputation": 143, "user_id": 3269827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4E1Nb.jpg?s=128&g=1", "display_name": "Philipp Fahlteich", "link": "https://stackoverflow.com/users/3269827/philipp-fahlteich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2959, "favorite_count": 0, "accepted_answer_id": 49772617, "answer_count": 1, "score": 5, "last_activity_date": 1523442257, "creation_date": 1523433082, "question_id": 49769435, "link": "https://stackoverflow.com/questions/49769435/failed-to-build-annotation-processor-in-kotlin", "title": "Failed to build annotation processor in Kotlin", "body": "<p>I am currently trying to write an annotation processor for Android in Kotlin. The project structure is as follows:</p>\n\n<pre><code>/annotation\n  /src/main/kotlin/&lt;package&gt;\n    Annotation.kt\n    AnnotationProcessor.kt\n/sample\n</code></pre>\n\n<p>project/build.gradle</p>\n\n<pre><code>buildscript {\n  dependencies {\n    classpath 'com.android.tools.build:gradle:3.1.1'\n    classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:1.2.31\"\n  }\n}\n</code></pre>\n\n<p>annotation/build.gradle</p>\n\n<pre><code>apply plugin: 'kotlin'\n\nsourceCompatibility = 1.7\ntargetCompatibility = 1.7\n\ndependencies {\n  implementation \"org.jetbrains.kotlin:kotlin-stdlib-jre7:$kotlinVersion\"\n}\n</code></pre>\n\n<p>sample/build.gradle</p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\n\nandroid {\n  ...\n  compileOptions {\n    sourceCompatibility JavaVersion.VERSION_1_7\n    targetCompatibility JavaVersion.VERSION_1_7\n  }\n\ndependencies {\n  implementation \"org.jetbrains.kotlin:kotlin-stdlib-jre7:$kotlinVersion\"\n  implementation project(':annotation')\n  kapt project(':annotation')\n}\n</code></pre>\n\n<p>Annotation.kt</p>\n\n<pre><code>@Target(AnnotationTarget.CLASS, AnnotationTarget.FUNCTION)\n@Retention(AnnotationRetention.SOURCE)\nannotation class Annotation(val comment: String = \"\")\n</code></pre>\n\n<p>AnnotationProcessor.kt</p>\n\n<pre><code>class AnnotationProcessor : AbstractProcessor() {\n  override fun process(annotations: MutableSet&lt;out TypeElement&gt;?, roundEnvironment: RoundEnvironment?): Boolean = true\n}\n</code></pre>\n\n<p>With kapt the build breaks on sample:javaPreCompileDebug with the following message:</p>\n\n<pre><code>org.gradle.api.tasks.TaskExecutionException: Execution failed for task ':sample:javaPreCompileDebug'\nCaused by: java.lang.RuntimeException: Annotation processors must be explicitly declared now.  The following dependencies on the compile classpath are found to contain annotation processor.  Please add them to the annotationProcessor configuration.\n- annotation.jar (project :annotation)\nAlternatively, set android.defaultConfig.javaCompileOptions.annotationProcessorOptions.includeCompileClasspath = true to continue with previous behavior.  Note that this option is deprecated and will be removed in the future.\nSee https://developer.android.com/r/tools/annotation-processor-error-message.html for more details.\n</code></pre>\n\n<p>When I replace kapt with annotationProcessor, the build breaks on sample:transformClassesWithInstantRunForDebug with the following message:</p>\n\n<pre><code>Caused by: java.io.IOException: Failed to find byte code for javax/annotation/processing/AbstractProcessor\nat com.android.build.gradle.internal.incremental.AsmUtils.lambda$static$0(AsmUtils.java:89)\nat com.android.build.gradle.internal.incremental.AsmUtils.loadClass(AsmUtils.java:307)\nat com.android.build.gradle.internal.incremental.AsmUtils.readClassAndInterfaces(AsmUtils.java:165)\nat com.android.build.gradle.internal.incremental.AsmUtils.loadClass(AsmUtils.java:278)\nat com.android.build.gradle.internal.incremental.IncrementalVisitor.instrumentClass(IncrementalVisitor.java:342)\nat com.android.build.gradle.internal.transforms.InstantRunTransform.transformToClasses2Format(InstantRunTransform.java:406)\nat com.android.build.gradle.internal.transforms.InstantRunTransform.lambda$doTransform$3(InstantRunTransform.java:268)\nat com.android.build.gradle.internal.transforms.InstantRunTransform.lambda$null$4(InstantRunTransform.java:297)\nat java.util.concurrent.ForkJoinTask$AdaptedCallable.exec(ForkJoinTask.java:1424)\n... 4 more\n</code></pre>\n\n<p>When I disable Instant Run, everything works fine.</p>\n\n<p>My question is now, where did I went wrong with my configuration? I followed sample project like <a href=\"https://github.com/tarek360/Kotlin-Annotation-Processor\" rel=\"noreferrer\">this</a> and the only big difference I see is that the annotation module is split into two (a runtime and a compiler). The error messages though indicates problems with either Kotlin or Instant Run.</p>\n"}, {"tags": ["android", "android-intent", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 9429231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41068084d222d67c18da1c727de89091?s=128&d=identicon&r=PG&f=1", "display_name": "Logan Vreckt Carlier", "link": "https://stackoverflow.com/users/9429231/logan-vreckt-carlier"}, "is_accepted": false, "score": 2, "last_activity_date": 1523446916, "creation_date": 1523446916, "answer_id": 49774227, "question_id": 49769175, "link": "https://stackoverflow.com/questions/49769175/crop-image-android-kotlin/49774227#49774227", "title": "Crop Image Android Kotlin", "body": "<p>I resolve my problem with this code :</p>\n\n<pre><code>imageAccount.setOnClickListener {\n        if(CropImage.isExplicitCameraPermissionRequired(this@Account.activity!!)) {\n            ActivityCompat.requestPermissions(this@Account.activity!!, arrayOf(android.Manifest.permission.CAMERA), REQUEST_PERMISSION_CAMERA)\n        }\n        else {\n            startActivityForResult(CropImage.getPickImageChooserIntent(this@Account.activity!!), CropImage.PICK_IMAGE_CHOOSER_REQUEST_CODE)\n        }\n    }\n</code></pre>\n\n<p>onActivityResult :</p>\n\n<pre><code>override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\n    super.onActivityResult(requestCode, resultCode, data)\n    if(requestCode == CropImage.PICK_IMAGE_CHOOSER_REQUEST_CODE &amp;&amp; resultCode == android.app.Activity.RESULT_OK) {\n        val imageUri = CropImage.getPickImageResultUri(context!!, data)\n        CropImage.activity(imageUri)\n                .setRequestedSize(1000, 1000)\n                .start(context!!,this)\n    }\n    else if (requestCode == CropImage.CROP_IMAGE_ACTIVITY_REQUEST_CODE) {\n        val result = CropImage.getActivityResult(data)\n        if (resultCode == android.app.Activity.RESULT_OK) {\n            picture = File(result.uri.path)\n\n\n            val bitmap = BitmapFactory.decodeFile(result.uri.path)\n            imageAccount.setImageBitmap(bitmap)\n            updateProfile()\n        }\n        else if (resultCode == CropImage.CROP_IMAGE_ACTIVITY_RESULT_ERROR_CODE) {\n            //showError(result.error)\n        }\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6777, "user_id": 4853133, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/3GSSn.jpg?s=128&g=1", "display_name": "Quick learner", "link": "https://stackoverflow.com/users/4853133/quick-learner"}, "is_accepted": false, "score": -1, "last_activity_date": 1536239182, "last_edit_date": 1536239182, "creation_date": 1536218478, "answer_id": 52198575, "question_id": 49769175, "link": "https://stackoverflow.com/questions/49769175/crop-image-android-kotlin/52198575#52198575", "title": "Crop Image Android Kotlin", "body": "<p><strong>Complete code for pick image and crop it</strong></p>\n\n<blockquote>\n  <p><strong>Step 1:</strong>- Add this gradle</p>\n</blockquote>\n\n<pre><code>implementation 'com.theartofdev.edmodo:android-image-cropper:1.2.1'\n</code></pre>\n\n<blockquote>\n  <p><strong>Step 2:</strong>- Add two activities in your package and in manifest</p>\n</blockquote>\n\n<pre><code>&lt;activity android:name=\".ui.activities.CropImageActivity\"\n           android:label=\"Crop Image\"&gt;&lt;/activity&gt;\n\n           &lt;activity android:name=\".ui.activities.ImagePickerActivity\"\n            android:label=\"Pick Image\"&gt;&lt;/activity&gt;\n</code></pre>\n\n<p><code>CropImageActivity</code> class </p>\n\n<pre><code>public class CropImageActivity extends AppCompatActivity implements CropImageView.OnSetImageUriCompleteListener, CropImageView.OnGetCroppedImageCompleteListener {\n\n    private static final int DEFAULT_ASPECT_RATIO_VALUES = 100;\n\n    public static final String CROPPED_IMAGE_PATH = \"cropped_image_path\";\n    public static final String EXTRA_IMAGE_URI = \"cropped_image_path\";\n\n    public static final String FIXED_ASPECT_RATIO = \"extra_fixed_aspect_ratio\";\n    public static final String EXTRA_ASPECT_RATIO_X = \"extra_aspect_ratio_x\";\n    public static final String EXTRA_ASPECT_RATIO_Y = \"extra_aspect_ratio_y\";\n\n    private static final String ASPECT_RATIO_X = \"ASPECT_RATIO_X\";\n\n    private static final String ASPECT_RATIO_Y = \"ASPECT_RATIO_Y\";\n\n    private CropImageView mCropImageView;\n\n    private int mAspectRatioX = DEFAULT_ASPECT_RATIO_VALUES;\n\n    private int mAspectRatioY = DEFAULT_ASPECT_RATIO_VALUES;\n\n    private boolean isFixedAspectRatio = false;\n\n    Bitmap croppedImage;\n    //endregion\n    private TextView tv_cancel,tv_crop;\n\n    // Saves the state upon rotating the screen/restarting the activity\n    @Override\n    protected void onSaveInstanceState(@SuppressWarnings(\"NullableProblems\") Bundle bundle) {\n        super.onSaveInstanceState(bundle);\n        bundle.putInt(ASPECT_RATIO_X, mAspectRatioX);\n        bundle.putInt(ASPECT_RATIO_Y, mAspectRatioY);\n    }\n\n    // Restores the state upon rotating the screen/restarting the activity\n    @Override\n    protected void onRestoreInstanceState(@SuppressWarnings(\"NullableProblems\") Bundle bundle) {\n        super.onRestoreInstanceState(bundle);\n        mAspectRatioX = bundle.getInt(ASPECT_RATIO_X);\n        mAspectRatioY = bundle.getInt(ASPECT_RATIO_Y);\n    }\n\n    public void onCreate(Bundle savedInstanceState) {\n\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_crop_image);\n        tv_cancel=(TextView)findViewById(R.id.tv_cancel);\n        tv_crop=(TextView)findViewById(R.id.tv_crop);\n        if (!getIntent().hasExtra(EXTRA_IMAGE_URI)) {\n            cropFailed();\n            return;\n        }\n\n        isFixedAspectRatio = getIntent().getBooleanExtra(FIXED_ASPECT_RATIO, false);\n        mAspectRatioX = getIntent().getIntExtra(EXTRA_ASPECT_RATIO_X, DEFAULT_ASPECT_RATIO_VALUES);\n        mAspectRatioY = getIntent().getIntExtra(EXTRA_ASPECT_RATIO_Y, DEFAULT_ASPECT_RATIO_VALUES);\n\n        Uri imageUri = Uri.parse(getIntent().getStringExtra(EXTRA_IMAGE_URI));\n        // Initialize components of the app\n        mCropImageView = (CropImageView) findViewById(R.id.CropImageView);\n        // If you want to fix the aspect ratio, set it to 'true'\n        mCropImageView.setFixedAspectRatio(isFixedAspectRatio);\n\n        if (savedInstanceState == null) {\n            mCropImageView.setImageUriAsync(imageUri);\n        }\n        tv_cancel.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                cropFailed();\n            }\n        });\n        tv_crop.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                mCropImageView.getCroppedImageAsync(mCropImageView.getCropShape(), 0, 0);\n            }\n        });\n    }\n\n    private void cropFailed() {\n        Toast.makeText(mCropImageView.getContext(), \"Image crop failed\", Toast.LENGTH_LONG).show();\n        setResult(RESULT_CANCELED);\n        finish();\n    }\n\n    @Override\n    protected void onStart() {\n        super.onStart();\n        mCropImageView.setOnSetImageUriCompleteListener(this);\n        mCropImageView.setOnGetCroppedImageCompleteListener(this);\n    }\n\n    @Override\n    protected void onStop() {\n        super.onStop();\n        mCropImageView.setOnSetImageUriCompleteListener(null);\n        mCropImageView.setOnGetCroppedImageCompleteListener(null);\n    }\n\n    @Override\n    public void onSetImageUriComplete(CropImageView view, Uri uri, Exception error) {\n        if (error == null) {\n            //Toast.makeText(mCropImageView.getContext(), \"Image load successful\", Toast.LENGTH_SHORT).show();\n        } else {\n            //Toast.makeText(mCropImageView.getContext(), \"Image load failed: \" + error.getMessage(), Toast.LENGTH_LONG).show();\n            Toast.makeText(mCropImageView.getContext(), \"Unable to load image\", Toast.LENGTH_LONG).show();\n        }\n    }\n\n    @Override\n    public void onGetCroppedImageComplete(CropImageView view, Bitmap bitmap, Exception error) {\n        if (error == null) {\n            croppedImage = bitmap;\n            try {\n                String path = saveToInternalStorage(this, bitmap);\n                Intent resultIntent = new Intent();\n                resultIntent.putExtra(CROPPED_IMAGE_PATH, path);\n                setResult(Activity.RESULT_OK, resultIntent);\n                finish();\n            } catch (IOException e) {\n                e.printStackTrace();\n                cropFailed();\n            }\n        } else {\n            cropFailed();\n        }\n    }\n\n    private String saveToInternalStorage(Context context, Bitmap bitmapImage) throws IOException {\n        ContextWrapper cw = new ContextWrapper(context);\n        // path to /data/data/yourapp/app_data/imageDir\n        File directory = cw.getDir(\"imageDir\", Context.MODE_PRIVATE);\n        // Create imageDir\n        File mypath = new File(directory, \"image.jpg\");\n\n        FileOutputStream fos = null;\n        try {\n            fos = new FileOutputStream(mypath);\n            // Use the compress method on the BitMap object to write image to the OutputStream\n            //Bitmap scaledBitmap = getCompressedBitmap(bitmapImage);\n            bitmapImage.compress(Bitmap.CompressFormat.PNG, 70, fos);\n        } catch (Exception e) {\n            e.printStackTrace();\n        } finally {\n            fos.close();\n        }\n        return directory.getAbsolutePath();\n    }\n}\n</code></pre>\n\n<p><code>ImagePickerActivity</code> class</p>\n\n<pre><code>public class ImagePickerActivity extends AppCompatActivity {\n    private static final int REQUEST_PICK_IMAGE = 2365;\n    private static final int REQUEST_CROP_IMAGE = 2342;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n        startActivityForResult(getPickImageChooserIntent(), REQUEST_PICK_IMAGE);\n    }\n\n    @Override\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\n        if (resultCode == Activity.RESULT_OK) {\n            if(requestCode == REQUEST_PICK_IMAGE) {\n                Intent intent = new Intent(this, CropImageActivity.class);\n                Uri imageUri = getPickImageResultUri(data);\n                intent.putExtra(CropImageActivity.EXTRA_IMAGE_URI, imageUri.toString());\n                startActivityForResult(intent, REQUEST_CROP_IMAGE);\n            }\n            else if(requestCode == REQUEST_CROP_IMAGE) {\n                System.out.println(\"Image crop success :\"+data.getStringExtra(CropImageActivity.CROPPED_IMAGE_PATH));\n                String imagePath = new File(data.getStringExtra(CropImageActivity.CROPPED_IMAGE_PATH), \"image.jpg\").getAbsolutePath();\n                Intent result = new Intent();\n                result.putExtra(\"image_path\", imagePath);\n                setResult(Activity.RESULT_OK, result);\n                finish();\n            }\n        }\n        else {\n            System.out.println(\"Image crop failed\");\n            setResult(Activity.RESULT_CANCELED);\n            finish();\n        }\n    }\n\n    /**\n     * Create a chooser intent to select the source to get image from.&lt;br/&gt;\n     * The source can be camera's (ACTION_IMAGE_CAPTURE) or gallery's (ACTION_GET_CONTENT).&lt;br/&gt;\n     * All possible sources are added to the intent chooser.\n     */\n    public Intent getPickImageChooserIntent() {\n\n        // Determine Uri of camera image to save.\n        Uri outputFileUri = getCaptureImageOutputUri();\n\n        List&lt;Intent&gt; allIntents = new ArrayList&lt;&gt;();\n        PackageManager packageManager = getPackageManager();\n\n        // collect all camera intents\n        Intent captureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\n        List&lt;ResolveInfo&gt; listCam = packageManager.queryIntentActivities(captureIntent, 0);\n        for (ResolveInfo res : listCam) {\n            Intent intent = new Intent(captureIntent);\n            intent.setComponent(new ComponentName(res.activityInfo.packageName, res.activityInfo.name));\n            intent.setPackage(res.activityInfo.packageName);\n            if (outputFileUri != null) {\n                intent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);\n            }\n            allIntents.add(intent);\n        }\n\n        // collect all gallery intents\n        Intent galleryIntent = new Intent(Intent.ACTION_GET_CONTENT);\n        galleryIntent.setType(\"image/*\");\n        List&lt;ResolveInfo&gt; listGallery = packageManager.queryIntentActivities(galleryIntent, 0);\n        for (ResolveInfo res : listGallery) {\n            Intent intent = new Intent(galleryIntent);\n            intent.setComponent(new ComponentName(res.activityInfo.packageName, res.activityInfo.name));\n            intent.setPackage(res.activityInfo.packageName);\n            allIntents.add(intent);\n        }\n\n        // the main intent is the last in the list, so pickup the useless one\n        Intent mainIntent = allIntents.get(allIntents.size() - 1);\n        for (Intent intent : allIntents) {\n            if (intent.getComponent().getClassName().equals(\"com.android.documentsui.DocumentsActivity\")) {\n                mainIntent = intent;\n                break;\n            }\n        }\n        allIntents.remove(mainIntent);\n\n        // Create a chooser from the main intent\n        Intent chooserIntent = Intent.createChooser(mainIntent, \"Select source\");\n\n        // Add all other intents\n        chooserIntent.putExtra(Intent.EXTRA_INITIAL_INTENTS, allIntents.toArray(new Parcelable[allIntents.size()]));\n\n        return chooserIntent;\n    }\n\n    /**\n     * Get URI to image received from capture by camera.\n     */\n    private Uri getCaptureImageOutputUri() {\n        Uri outputFileUri = null;\n        File getImage = getExternalCacheDir();\n        if (getImage != null) {\n            outputFileUri = Uri.fromFile(new File(getImage.getPath(), \"pickImageResult.jpeg\"));\n        }\n        return outputFileUri;\n    }\n\n    /**\n     * Get the URI of the selected image from {@link #getPickImageChooserIntent()}.&lt;br/&gt;\n     * Will return the correct URI for camera and gallery image.\n     *\n     * @param data the returned data of the activity result\n     */\n    public Uri getPickImageResultUri(Intent data) {\n        boolean isCamera = true;\n        if (data != null) {\n            String action = data.getAction();\n            isCamera = action != null &amp;&amp; action.equals(MediaStore.ACTION_IMAGE_CAPTURE);\n        }\n        return isCamera ? getCaptureImageOutputUri() : data.getData();\n    }\n}\n</code></pre>\n\n<p>activity_crop_image.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"&gt;\n\n    &lt;RelativeLayout\n        android:id=\"@+id/header\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_alignParentTop=\"true\"\n        android:background=\"@color/colorblue\"\n        android:padding=\"15dp\"&gt;\n\n\n        &lt;TextView\n            android:id=\"@+id/tv_cancel\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_alignParentLeft=\"true\"\n            android:layout_centerVertical=\"true\"\n            android:layout_marginLeft=\"10dp\"\n            android:text=\"Cancel\"\n            android:textColor=\"@color/colorwhite\"\n            android:textSize=\"18sp\"\n            android:textStyle=\"bold\" /&gt;\n\n        &lt;TextView\n            android:id=\"@+id/tv_crop\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_alignParentRight=\"true\"\n            android:layout_below=\"@+id/tv_title\"\n            android:layout_centerVertical=\"true\"\n            android:layout_marginRight=\"10dp\"\n            android:text=\"Crop\"\n            android:textColor=\"@color/colorwhite\"\n            android:textSize=\"18sp\"\n            android:textStyle=\"bold\" /&gt;\n\n\n    &lt;/RelativeLayout&gt;\n\n    &lt;com.theartofdev.edmodo.cropper.CropImageView\n        android:id=\"@+id/CropImageView\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:layout_below=\"@+id/header\"\n        android:layout_gravity=\"center\"\n        app:cropFixAspectRatio=\"true\" /&gt;\n&lt;/RelativeLayout&gt;\n</code></pre>\n\n<blockquote>\n  <p><strong>Step 3</strong>:- Usage in fragment or activity class</p>\n</blockquote>\n\n<pre><code> private val REQUEST_PICK_IMAGE = 1002\nprofile_pic1.setOnClickListener {\n            startActivityForResult(Intent(activity, ImagePickerActivity::class.java), REQUEST_PICK_IMAGE)\n        }\n\n\nfun setImage(imagePath: String) {\n        profile_pic1.setImageBitmap(getImageFromStorage(imagePath));\n    }\n\n    fun getImageFromStorage(path: String): Bitmap {\n        var f = File(path);\n        var options = BitmapFactory.Options();\n        options.inJustDecodeBounds = false;\n        // Calculate inSampleSize\n        options.inSampleSize = calculateInSampleSize(options, 512, 512);\n        return BitmapFactory.decodeStream(FileInputStream(f), null, options)\n    }\n\n    private fun calculateInSampleSize(\n            options: BitmapFactory.Options, reqWidth: Int, reqHeight: Int): Int {\n        // Raw height and width of image\n        val height = options.outHeight\n        val width = options.outWidth\n        var inSampleSize = 1\n\n        if (height &gt; reqHeight || width &gt; reqWidth) {\n\n            val halfHeight = height / 2\n            val halfWidth = width / 2\n\n            // Calculate the largest inSampleSize value that is a power of 2 and keeps both\n            // height and width larger than the requested height and width.\n            while (halfHeight / inSampleSize &gt; reqHeight &amp;&amp; halfWidth / inSampleSize &gt; reqWidth) {\n                inSampleSize *= 2\n            }\n        }\n\n        return inSampleSize\n    }\n\n    override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\n        super.onActivityResult(requestCode, resultCode, data)\n        if (resultCode == RESULT_OK &amp;&amp; requestCode == requestCode) {\n            var imagePath = data!!.getStringExtra(\"image_path\");\n            setImage(imagePath);\n        } else {\n            System.out.println(\"Failed to load image\");\n        }\n    }\n</code></pre>\n\n<blockquote>\n  <p><strong>NOTE:- DECLARE WRITE/READ AND CAMERA PERMISSION IN MANIFEST  And Runtime permissions as well</strong></p>\n</blockquote>\n"}], "owner": {"reputation": 51, "user_id": 9429231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41068084d222d67c18da1c727de89091?s=128&d=identicon&r=PG&f=1", "display_name": "Logan Vreckt Carlier", "link": "https://stackoverflow.com/users/9429231/logan-vreckt-carlier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3981, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1536239182, "creation_date": 1523432238, "last_edit_date": 1523435688, "question_id": 49769175, "link": "https://stackoverflow.com/questions/49769175/crop-image-android-kotlin", "title": "Crop Image Android Kotlin", "body": "<p>I would like to make an imagepicker to allow me to return the image to the database, but it does not work.\nI fall in the first if activityResult but after nothing can anyone help me please?</p>\n\n<p>the Intent for the imagePicker :</p>\n\n<pre><code>imageAccount.setOnClickListener {\n        val intent = Intent(Intent.ACTION_PICK,MediaStore.Images.Media.EXTERNAL_CONTENT_URI)\n        startActivityForResult(intent, CropImage.PICK_IMAGE_CHOOSER_REQUEST_CODE)\n    }\n</code></pre>\n\n<p>My onActivityResult :</p>\n\n<pre><code>override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\n    super.onActivityResult(requestCode, resultCode, data)\n    if(requestCode == CropImage.PICK_IMAGE_CHOOSER_REQUEST_CODE &amp;&amp; resultCode == android.app.Activity.RESULT_OK) {\n        val imageUri = CropImage.getPickImageResultUri(context!!, data)\n        CropImage.activity(imageUri)\n                .setRequestedSize(1000, 1000)\n                .start(this@Account.activity!!)\n        Log.i(\"PICTURE\",\"FIRST-IF\")\n    }\n    else if (requestCode == CropImage.CROP_IMAGE_ACTIVITY_REQUEST_CODE) {\n        Log.i(\"PICTURE\",\"ELSE-IF\")\n        val result = CropImage.getActivityResult(data)\n        if (resultCode == android.app.Activity.RESULT_OK) {\n            Log.i(\"PICTURE\",\"SECOND-IF\")\n            picture = File(result.uri.path)\n            Log.i(\"PICTURE\",\"OK\")\n\n\n            val bitmap = BitmapFactory.decodeFile(result.uri.path)\n            imageAccount.setImageBitmap(bitmap)\n        }\n        else if (resultCode == CropImage.CROP_IMAGE_ACTIVITY_RESULT_ERROR_CODE) {\n            Log.i(\"PICTURE\",\"SECOND-ELSE-IF\")\n            //showError(result.error)\n        }\n    }\n    Log.i(\"PICTURE\",\"XX\")\n\n\n}\n</code></pre>\n\n<p>Thanks for your help !</p>\n"}, {"tags": ["java", "android", "kotlin", "anko"], "comments": [{"owner": {"reputation": 2338, "user_id": 1220743, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/f1fbeea437da41d8843af249c52185c2?s=128&d=identicon&r=PG", "display_name": "mol", "link": "https://stackoverflow.com/users/1220743/mol"}, "edited": false, "score": 0, "creation_date": 1523440126, "post_id": 49769080, "comment_id": 86558529, "body": "Shouldn&#39;t it be <code>startActivity(new Intent(this, SingInActivity.class));</code> ?"}, {"owner": {"reputation": 127, "user_id": 9054927, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/93e45223cc4d59525bbb9930b9695255?s=128&d=identicon&r=PG&f=1", "display_name": "hyunwookcho", "link": "https://stackoverflow.com/users/9054927/hyunwookcho"}, "reply_to_user": {"reputation": 2338, "user_id": 1220743, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/f1fbeea437da41d8843af249c52185c2?s=128&d=identicon&r=PG", "display_name": "mol", "link": "https://stackoverflow.com/users/1220743/mol"}, "edited": false, "score": 0, "creation_date": 1523491080, "post_id": 49769080, "comment_id": 86587426, "body": "@mol I want skip <code>SingInActivity</code>  and directly <code>MainActivity</code> -&gt; <code>SingInView</code>"}, {"owner": {"reputation": 2338, "user_id": 1220743, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/f1fbeea437da41d8843af249c52185c2?s=128&d=identicon&r=PG", "display_name": "mol", "link": "https://stackoverflow.com/users/1220743/mol"}, "edited": false, "score": 0, "creation_date": 1523514562, "post_id": 49769080, "comment_id": 86593784, "body": "I&#39;m not very familiar with anko, but I have a feeling that <code>AnkoComponent</code> which is extended by your <code>SignInView</code> is just a containter for UI, it still have to be hosted in <code>MainActivity</code>."}], "answers": [{"tags": [], "owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "is_accepted": true, "score": 2, "last_activity_date": 1524839445, "creation_date": 1524839445, "answer_id": 50064614, "question_id": 49769080, "link": "https://stackoverflow.com/questions/49769080/in-the-mainactivity-java-how-to-call-the-anko-class-directly/50064614#50064614", "title": "In the MainActivity java, how to call the anko class directly?", "body": "<p>If you dig through the Anko source code you'll quickly find this:</p>\n\n<pre><code>interface AnkoComponent&lt;in T&gt; {\n    fun createView(ui: AnkoContext&lt;T&gt;): View\n}\n</code></pre>\n\n<p>And from the wiki (where MyActivityUI is the component): <code>MyActivityUI().setContentView(this)</code>. Now, the AnkoComponent is just an interface and the setContentView method is an extension function that returns createView.</p>\n\n<p>Anyways, the setContentView extension function passes the last variable of the AnkoContextImpl as <code>true</code>. The last variable is whether or not to actually set the content view, which is the reason the activity is passed in the first place.</p>\n\n<p><strong>TL;DR</strong> (and possibly more sensible summary of my point):</p>\n\n<ul>\n<li>The component is not an Activity</li>\n<li>The setContentView method is not a replacement for setContentView in an Activity; just a wrapper for it.</li>\n</ul>\n\n<p>And since it isn't an activity, you can't use an intent into it. And, as a result of that, you cannot use it standalone. You need an activity. Now, you can of course use the regular approach, but there's also another way. Since the AnkoComponent itself doesn't have any fields, it can be serialized without much trouble. Just to clarify: some fields can be serialized even if it isn't serializable (all though some classes like Context cannot be serialized). Anyways, you create an activity:</p>\n\n<pre><code>class AnkoComponentActivity : AppCompatActivity(){//Can be a regular Activity too\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState);\n        val component = intent.getSerializableExtra(\"uiComponent\") as AnkoComponent&lt;AnkoComponentActivity&gt;//The type has to match this activity, or setContentView won't allow passing `this`\n        component.setContentView(this)//The context of the activity doesn't get passed until this point, which enables the use of this system. \n    }\n}\n</code></pre>\n\n<p>Or it's equivalent in Java:</p>\n\n<pre><code>public class AnkoComponentActivity extends AppCompatActivity {\n\n    public void onCreate(Bundle sis){\n        super.onCreate(sis);\n        AnkoComponent&lt;AnkoComponentActivity&gt; component = (AnkoComponent&lt;AnkoComponentActivity&gt;) getIntent().getSerializableExtra(\"uiComponent\");\n        org.jetbrains.anko.AnkoContextKt.setContentView(component, this);//For reference, this is how you call Kotlin extension functions from Java\n    }\n}\n</code></pre>\n\n<p>Note that any UI component sent to this class has to be declared with <code>&lt;AnkoComponentActivity&gt;</code>. In addition, the components have to implement Serializable. Otherwise they can't be passed through the Bundle. Alternatively, you can use ints or Strings as identifiers and use the value to pick which AnkoComponent to show.</p>\n\n<p>All though, the absolutely easiest way is just creating one activity per component.</p>\n\n<p><strong>TL;DR:</strong> AnkoComponent is not an Activity, meaning you can't use intents into it. You have to use an Activity, but using Serializable enables you to pass the component through a bundle to an Activity made for manual creation of multiple AnkoComponents without specifying specific types.</p>\n"}], "owner": {"reputation": 127, "user_id": 9054927, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/93e45223cc4d59525bbb9930b9695255?s=128&d=identicon&r=PG&f=1", "display_name": "hyunwookcho", "link": "https://stackoverflow.com/users/9054927/hyunwookcho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 445, "favorite_count": 0, "accepted_answer_id": 50064614, "answer_count": 1, "score": 2, "last_activity_date": 1524839445, "creation_date": 1523431973, "last_edit_date": 1523433766, "question_id": 49769080, "link": "https://stackoverflow.com/questions/49769080/in-the-mainactivity-java-how-to-call-the-anko-class-directly", "title": "In the MainActivity java, how to call the anko class directly?", "body": "<p>I used the anko library to create a login view.</p>\n\n<pre><code>class SingInView : AnkoComponent&lt;SingleInActivity&gt; {\n   override fun createView(ui: AnkoContext&lt;SingleInActivity&gt;) = with(ui) {\n       verticalLayout {\n          lparams(width = matchParent, height = matchParent) \n\n          textView(\"Member Login\")\n          editText {\n              hint = \"E-mail\"\n          }\n          editText {\n              hint = \"PassWord\"\n          }\n          button(\"Login\")\n       }\n    }\n}\n</code></pre>\n\n<p>and SingleInActivity.kt</p>\n\n<pre><code>class SingleInActivity : AppCompatActivity() {\n   override fun onCreate(savedInstanceState)\n   SingInView().setContentView(this)\n</code></pre>\n\n<p>and MainActivity.java</p>\n\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n   @Override\n   public void onCreate(Bundle savedInstanceState) {\n       super.onCreate(savedInstanceState);\n       startActivity(new Intent(this, SingInView.class));\n       finish();\n   }\n}\n</code></pre>\n\n<p>current My app <code>MainActivity</code> -> <code>SingleInActivity</code> -> <code>SingInView</code> .</p>\n\n<p>of course it can be made simply.</p>\n\n<p>but there is a condition\n1. <code>MainActivity</code> is java (kotlin prohibition)\n2. use only MainActivity, SingInView.</p>\n\n<p>How to solve this problem?</p>\n\n<p>How to call the Anko class directly from a Java class</p>\n"}, {"tags": ["android", "kotlin", "android-room", "dagger"], "answers": [{"tags": [], "owner": {"reputation": 1482, "user_id": 8996455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6VPfx.jpg?s=128&g=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/8996455/dmitry"}, "is_accepted": true, "score": 5, "last_activity_date": 1523433214, "last_edit_date": 1523433214, "creation_date": 1523432897, "answer_id": 49769369, "question_id": 49769061, "link": "https://stackoverflow.com/questions/49769061/kotlin-with-room-and-dagger-compile-error/49769369#49769369", "title": "Kotlin with Room and Dagger - compile error", "body": "<p>Change this dependency:</p>\n\n<pre><code>implementation \"android.arch.lifecycle:livedata-core:1.1.1\"\n</code></pre>\n\n<p>To this:</p>\n\n<pre><code>implementation \"android.arch.lifecycle:livedata:1.1.1\"\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 9628973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2f5fe8b3042d475d72bcf9318a4eade?s=128&d=identicon&r=PG&f=1", "display_name": "Shippy", "link": "https://stackoverflow.com/users/9628973/shippy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 883, "favorite_count": 0, "accepted_answer_id": 49769369, "answer_count": 1, "score": 3, "last_activity_date": 1523433423, "creation_date": 1523431889, "last_edit_date": 1523433423, "question_id": 49769061, "link": "https://stackoverflow.com/questions/49769061/kotlin-with-room-and-dagger-compile-error", "title": "Kotlin with Room and Dagger - compile error", "body": "<p>I'm tackling my first android kotlin app.  Having got my first activity working with mocked data, I'm now trying to fetch data from a database, but the code won't compile.</p>\n\n<p>Kotlin code:</p>\n\n<pre><code>@Dao\ninterface TagGroupDao {\n\n    @Query(\"select * from TagGroup\")\n    fun getAll(): LiveData&lt;List&lt;TagGroup&gt;&gt;\n}\n</code></pre>\n\n<p>This has generated this java code:</p>\n\n<pre><code>public class TagGroupDao_Impl implements TagGroupDao {\n  private final RoomDatabase __db;\n\n  public TagGroupDao_Impl(RoomDatabase __db) {\n    this.__db = __db;\n  }\n\n  @Override\n  public LiveData&lt;List&lt;TagGroup&gt;&gt; getAll() {\n    final String _sql = \"select * from TagGroup\";\n    final RoomSQLiteQuery _statement = RoomSQLiteQuery.acquire(_sql, 0);\n    return new ComputableLiveData&lt;List&lt;TagGroup&gt;&gt;() {\n      private Observer _observer;\n\n      @Override\n      protected List&lt;TagGroup&gt; compute() {\n        if (_observer == null) {\n          _observer = new Observer(\"TagGroup\") {\n            @Override\n            public void onInvalidated(@NonNull Set&lt;String&gt; tables) {\n              invalidate();\n            }\n          };\n          __db.getInvalidationTracker().addWeakObserver(_observer);\n        }\n        final Cursor _cursor = __db.query(_statement);\n        try {\n          final int _cursorIndexOfId = _cursor.getColumnIndexOrThrow(\"Id\");\n          final int _cursorIndexOfName = _cursor.getColumnIndexOrThrow(\"Name\");\n          final List&lt;TagGroup&gt; _result = new ArrayList&lt;TagGroup&gt;(_cursor.getCount());\n          while(_cursor.moveToNext()) {\n            final TagGroup _item;\n            final long _tmpId;\n            _tmpId = _cursor.getLong(_cursorIndexOfId);\n            final String _tmpName;\n            _tmpName = _cursor.getString(_cursorIndexOfName);\n            _item = new TagGroup(_tmpId,_tmpName);\n            _result.add(_item);\n          }\n          return _result;\n        } finally {\n          _cursor.close();\n        }\n      }\n\n      @Override\n      protected void finalize() {\n        _statement.release();\n      }\n    }.getLiveData();\n  }\n}\n</code></pre>\n\n<p>The references to ComputableLiveData aren't resolving.</p>\n\n<pre><code>e: TagGroupDao_Impl.java:3: error: cannot find symbol\ne: \n\ne: import android.arch.lifecycle.ComputableLiveData;\ne:                              ^\ne:   symbol:   class ComputableLiveData\ne:   location: package android.arch.lifecycle\ne: java.lang.IllegalStateException: failed to analyze: org.jetbrains.kotlin.kapt3.diagnostic.KaptError: Error while annotation processing\n</code></pre>\n\n<p>Lastly, my dependencies:</p>\n\n<pre><code>dependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib-jre7:$kotlin_version\"\n    implementation 'com.android.support:appcompat-v7:26.1.0'\n    implementation 'com.android.support.constraint:constraint-layout:1.0.2'\n    implementation 'com.android.support:design:26.1.0'\n    implementation \"android.arch.persistence.room:runtime:1.0.0\"\n    implementation \"android.arch.lifecycle:viewmodel:1.1.1\"\n    implementation \"android.arch.lifecycle:livedata-core:1.1.1\"\n    implementation \"android.arch.lifecycle:common-java8:1.0.0\"\n    implementation 'com.google.dagger:dagger:2.13'\n    implementation \"com.google.dagger:dagger:2.13\"\n    implementation \"com.google.dagger:dagger-android:2.13\"\n    implementation \"com.google.dagger:dagger-android-support:2.13\"\n    kapt \"android.arch.persistence.room:compiler:1.0.0\"\n    kapt 'com.google.dagger:dagger-compiler:2.13'\n    kapt \"com.google.dagger:dagger-android-processor:2.13\"\n    androidTestImplementation 'com.android.support.test:runner:1.0.1'\n    androidTestImplementation 'com.android.support.test.espresso:espresso-core:3.0.1'\n    testImplementation 'junit:junit:4.12'\n    testImplementation \"android.arch.persistence.room:testing:1.0.0\"\n    testImplementation \"android.arch.core:core-testing:1.1.1\"\n}\n</code></pre>\n\n<p>From what I've managed to glean about ComputableLiveData, it's an internal class not to be directly used.  </p>\n\n<p>If I remove the LiveData&lt;> wrapper from the kotlin code, it compiles.</p>\n\n<p>I've referenced MutableLiveData&lt;> elsewhere without issue; my activity observes the dataset and updates.</p>\n\n<p>Can anyone point me in the right direction?</p>\n"}, {"tags": ["android", "api", "kotlin", "retrofit2"], "answers": [{"tags": [], "owner": {"reputation": 7766, "user_id": 4517450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AFIyx.jpg?s=128&g=1", "display_name": "vikas kumar", "link": "https://stackoverflow.com/users/4517450/vikas-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1523428892, "creation_date": 1523428892, "answer_id": 49768184, "question_id": 49767813, "link": "https://stackoverflow.com/questions/49767813/kotlin-api-call-using-retrofit/49768184#49768184", "title": "Kotlin API call using Retrofit", "body": "<p>Let's start with a sample and I guess you can map it accordingly to your requirement. </p>\n\n<p>I don't have your JSON as text so I am giving an example of mine.</p>\n\n<p>sample JSON response</p>\n\n<pre><code>    {\n     \"status\": true,\n     \"message\": \"User created Successfully.\",\n     \"response\": {\n     \"user\": {\n     \"id\": 12,\n     \"email\": \"testmail@gmailtest.com\"\n    },\n     \"token\": \"eyJlbWFpbCI6ImVzaGFudHNhaHUxMTBAZ21hc2kyMmwuY29tIiwidXNlcklkIjoxNSwiaWF0IjoxNTIxNTYyNjkxfQ\"\n    }\n   }\n</code></pre>\n\n<p>so create a new class and name it something like this</p>\n\n<p><strong>CreateResponse.kt</strong> \nand just map those objects and arrays from json to data classes and list here.</p>\n\n<pre><code>data class CreateUserResponse(override val status: Boolean? = null,\n                                  override val message: String? = null,\n                                  val response: Response? = null) \n\ndata class Response(val user: User?, val token: String)\n\ndata class User(val id: Int, val email: String)\n</code></pre>\n\n<p>easy right, now with Kotlin you can declare your data classes without creating separate files each time for each object just create one file and declare all of them at once.</p>\n\n<p>I'm attaching some of the resources here which may help you understand the things better.</p>\n\n<p><a href=\"https://antonioleiva.com/retrofit-android-kotlin/\" rel=\"nofollow noreferrer\">https://antonioleiva.com/retrofit-android-kotlin/</a></p>\n\n<p><a href=\"https://segunfamisa.com/posts/using-retrofit-on-android-with-kotlin\" rel=\"nofollow noreferrer\">https://segunfamisa.com/posts/using-retrofit-on-android-with-kotlin</a></p>\n"}, {"tags": [], "owner": {"reputation": 196, "user_id": 9459815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v27GN.jpg?s=128&g=1", "display_name": "Zim", "link": "https://stackoverflow.com/users/9459815/zim"}, "is_accepted": true, "score": 4, "last_activity_date": 1523912425, "last_edit_date": 1523912425, "creation_date": 1523494435, "answer_id": 49786414, "question_id": 49767813, "link": "https://stackoverflow.com/questions/49767813/kotlin-api-call-using-retrofit/49786414#49786414", "title": "Kotlin API call using Retrofit", "body": "<p>After much googling, I finally solved my problem thanks to <a href=\"https://www.youtube.com/watch?v=53BsyxwSBJk\" rel=\"nofollow noreferrer\">How to Quickly Fetch Parse JSON with OkHttp and Gson</a> on YouTube.</p>\n\n<pre><code>    fun fetchBooks () {\n    println(\"fetching books\")\n\n     val url = \"https://api.someurl.com/v1/books?\"\n    val request = Request.Builder().url(url).build()\n\n    println(request)\n    val client = OkHttpClient()\n\n    client.newCall(request).enqueue(object: Callback {\n        override fun onResponse(call: Call?, response: Response?) {\n            val body = response?.body()?.string()\n            println(body)\n        }\n\n        override fun onFailure(call: Call?, e: IOException?) {\n            println(\"Failed to execute request\")\n            e?.printStackTrace()\n        }\n    })\n}\n</code></pre>\n\n<p>Still need to format the data and figure out how to turn on wifi in my Android emulator but at least I can consume the JSON.</p>\n"}], "owner": {"reputation": 196, "user_id": 9459815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v27GN.jpg?s=128&g=1", "display_name": "Zim", "link": "https://stackoverflow.com/users/9459815/zim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6619, "favorite_count": 3, "accepted_answer_id": 49786414, "answer_count": 2, "score": 4, "last_activity_date": 1523912425, "creation_date": 1523427538, "last_edit_date": 1523429506, "question_id": 49767813, "link": "https://stackoverflow.com/questions/49767813/kotlin-api-call-using-retrofit", "title": "Kotlin API call using Retrofit", "body": "<p>I'm new to Kotlin, Android and OOP in general (Natural-ADABAS background, never did Java, C++, etc) so I'm pretty desperate.</p>\n\n<p>I have an API whose data looks like this, an array of book details:</p>\n\n<p><strong>API data sample</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/wIkLA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wIkLA.png\" alt=\"enter image description here\"></a></p>\n\n<p>I'm confused about data models. I know it's supposed to look like how the data in the API and return an array but how exactly do I code it in Kotlin? And then how do I parse it? I've read some tutorials but they all differ. Some use an object, and some use a class.</p>\n\n<p>I'm also probably breaking some standard by putting everything in the main activity but I haven't gotten to that part yet.</p>\n\n<pre><code>import android.support.v7.app.AppCompatActivity\nimport android.os.Bundle\nimport retrofit2.Call\nimport retrofit2.Retrofit\nimport retrofit2.converter.moshi.MoshiConverterFactory\nimport retrofit2.http.GET\nimport retrofit2.http.Query\n\nclass MainActivity : AppCompatActivity()\n\n {\n\nprivate val api: RestAPI = RestAPI()\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main)\n\n\n    val apiGetBooks = api.getBooksList(\"token123123123\")\n    val response = apiGetBooks.execute()\n\n\n    if (response.isSuccessful) {\n        val books = response.body()?.title\n        println(books)\n\n    } else {\n        println(\"error on API\") // What do I do?\n    }\n\n}\n\nobject  Model {\n    val ResultArray : MutableList&lt;BookProperties&gt;? = null\n}\n\ndata class BookProperties (val id: Int,val title: String, val coverURI: String, val pageURI: String, val pageCount: Int, val languageId: Int,val  description: String, val isFree: Boolean) {\n}\n\nprivate val buriApi: MainActivity.BooksAPI? = null\n\nclass RestAPI {\n    private val buriApi: BooksAPI\n\n    init {\n        val retrofit = Retrofit.Builder()\n                .baseUrl(\"https://api.someurl.com\")\n                .addConverterFactory(MoshiConverterFactory.create())\n                .build()\n\n        buriApi = retrofit.create(BooksAPI::class.java)\n    }\n\n    fun getBooksList(token: String): Call&lt;BookProperties&gt;{\n        return buriApi.getBooks(token)\n    }\n}\n\nfun getBooksList(token: String): Call&lt;MainActivity.BookProperties&gt; {\n    return buriApi!!.getBooks(token)\n}\n\ninterface  BooksAPI {\n    @GET(\"/v1/books\")\n    fun getBooks (@Query(\"token\")token: String) : Call&lt;BookProperties&gt;\n}\n}\n</code></pre>\n"}, {"tags": ["android", "opengl-es", "android-ndk", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 59, "user_id": 459128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d43b5d56e516d66d02ac138bb3456d?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/459128/adrian"}, "is_accepted": false, "score": 0, "last_activity_date": 1523477696, "creation_date": 1523477696, "answer_id": 49783782, "question_id": 49767152, "link": "https://stackoverflow.com/questions/49767152/android-ndk-glthread/49783782#49783782", "title": "Android NDK GLThread", "body": "<p>Change\n<code>vector&lt;Coin&gt; mCoinCollection;</code>\nto\n<code>vector&lt;Coin*&gt; mCoinCollection;</code></p>\n"}], "owner": {"reputation": 1475, "user_id": 5693082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4faaab1b925d46aed09b42526914ca38?s=128&d=identicon&r=PG&f=1", "display_name": "dotGitignore", "link": "https://stackoverflow.com/users/5693082/dotgitignore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523477696, "creation_date": 1523424518, "question_id": 49767152, "link": "https://stackoverflow.com/questions/49767152/android-ndk-glthread", "title": "Android NDK GLThread", "body": "<p>I'm trying to create a simple animation in android using the NDK and unfortunately my code is throwing an <code>Exception</code>.</p>\n\n<p><code>A/libc: Fatal signal 11 (SIGSEGV), code 1, fault addr 0x0 in tid 16198 (GLThread 739)</code></p>\n\n<p>I didn't know what's the meaning of this error.</p>\n\n<p>These are some of my code.</p>\n\n<p><strong><code>Coin.cpp</code></strong></p>\n\n<pre><code>void Coin::Render(GLuint textureId, GLuint positionHandle, GLuint texCoord, GLint matrixHandle, GLint samplerLoc) {\n    // Bind the texture to this unit\n    glBindTexture(GL_TEXTURE_2D, textureId);\n\n    // Enable generic vertex attribute array\n    glEnableVertexAttribArray(positionHandle);\n    glEnableVertexAttribArray(texCoord);\n\n    // Prepare the triangle coordinate data\n    glVertexAttribPointer(positionHandle, 3, GL_FLOAT, GL_FALSE, 0, mVertices);\n    // Prepare the texture coordinates\n    glVertexAttribPointer(texCoord, 2, GL_FLOAT, GL_FALSE, 0, mUVCoord);\n    // Apply the projection and view transformation\n    glUniformMatrix4fv(matrixHandle, 1, GL_FALSE, 0);\n    //  Set the sampler texture unit to 0, where we have saved the texture\n    glUniform1i(samplerLoc, 0);\n\n    // Draw the triangle\n    glDrawElements(GL_TRIANGLES, 6, GL_UNSIGNED_SHORT, mIndices);\n\n    // Disable vertex array\n    glDisableVertexAttribArray(positionHandle);\n    glDisableVertexAttribArray(texCoord);\n}\n</code></pre>\n\n<p>This is how I declare my array <code>Coin</code> object, and I am thinking it seems like <code>ArrayList&lt;Coin&gt;</code> in Java.</p>\n\n<p><strong><code>CoinRenderer.h</code></strong></p>\n\n<pre><code>vector&lt;Coin&gt; mCoinCollection;\n</code></pre>\n\n<p>This is the part where the error is throwing, The code is working without the <code>coin.Render()</code> or <code>coin.translate()</code> but if I uncomment this code the code is not working.</p>\n\n<p><strong><code>CoinRenderer.cpp</code></strong></p>\n\n<pre><code>void CoinRenderer::drawCoin() {\n    // glUseProgram(programHandle);\n    glUseProgram(imageHandle);\n\n    long slowTime = GLUtils::currentTimeMillis() % 100000L;\n    int elapse = (int) ((0.01f) * (slowTime));\n\n    for (int i = 0; i &lt; mCoinCollection.size(); i++) {\n        Coin coin = mCoinCollection[i];\n        if (mCurrentTime &lt; elapse) {\n            //int nextCoinFace = coin.getNextCoinFace();\n            //coin.setTextureId(textures[i]);\n            // This is also the line where the error is throwing.\n            //coin.translate(0.0f, 0.20f);\n        }\n        // This line where the error is throwing.\n        coin.Render(coin.getTextureId(), mPositionHandle, mTexCoord, mMatrixHandle, mSamplerLoc);\n    }\n\n    if (!hasVisibleCoin()) {\n        LOGD(\"All coins y &lt; 0\");\n        glDeleteProgram(imageHandle);\n    }\n\n    mCurrentTime = elapse;\n}\n</code></pre>\n\n<p>Here are some of the additional code if its needed.</p>\n\n<p><strong><code>CoinRenderer.kt</code></strong></p>\n\n<pre><code>class CoinRenderer(private val context: Context) : GLSurfaceView.Renderer {\n\n    override fun onDrawFrame(gl: GL10?) {\n        nativeDrawFrame()\n    }\n\n    override fun onSurfaceChanged(gl: GL10?, width: Int, height: Int) {\n        nativeSurfaceChange(width, height)\n    }\n\n    override fun onSurfaceCreated(gl: GL10?, config: EGLConfig?) {\n        val assetManager = context.assets\n        nativeSurfaceCreate(assetManager)\n    }\n\n    external fun nativeSurfaceCreate(assetManager: AssetManager)\n    external fun nativeSurfaceChange(width: Int, height: Int)\n    external fun nativeDrawFrame()\n    external fun drawNewCoin(coinSize: Int)\n    external fun nativeClearSurface(isClearSurface: Boolean)\n\n    companion object {\n        init {\n            System.loadLibrary(\"coin-lib\")\n        }\n    }\n}\n</code></pre>\n\n<p><strong><code>CoinGL.kt</code></strong></p>\n\n<pre><code>class CoinGL(context: Context) : GLSurfaceView(context) {\n\n    private var mRenderer : CoinRenderer? = null\n\n    init {\n        // Set openGL version\n        setEGLContextClientVersion(2)\n\n        setZOrderOnTop(true)\n        setEGLConfigChooser(8, 8, 8, 8, 16, 0)\n        holder.setFormat(PixelFormat.RGBA_8888)\n\n        mRenderer = CoinRenderer(context)\n        setRenderer(mRenderer)\n\n        renderMode = RENDERMODE_CONTINUOUSLY\n    }\n\n    fun drawNewCoin(coinSize: Int) {\n        queueEvent ({\n            mRenderer?.drawNewCoin(coinSize)\n            mRenderer?.nativeClearSurface(false)\n        })\n    }\n}\n</code></pre>\n\n<p><strong>PS: I am just a newbee in Android OPENGL NDK or in C++, if you found or saw some very wrong declaration or use kindly please explain it to me. Thank you.</strong></p>\n\n<p>Any help will be appreciate. Thanks.</p>\n"}, {"tags": ["java", "android", "kotlin", "android-typeface"], "answers": [{"comments": [{"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 1, "creation_date": 1523430614, "post_id": 49766982, "comment_id": 86552426, "body": "&quot;(As an aside, I feel it is better to not have it in the finally block anyway, a side-effect inside a variable assignment seems odd).&quot; It&#39;s even worse: the finally block will get executed as part of <code>try</code> before <code>createTypeface</code> gets assigned, so it&#39;s always equivalent to <code>tmpTypeface[name] = null</code>."}], "tags": [], "owner": {"reputation": 28482, "user_id": 1904517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mn4kq.png?s=128&g=1", "display_name": "iagreen", "link": "https://stackoverflow.com/users/1904517/iagreen"}, "is_accepted": true, "score": 2, "last_activity_date": 1523446345, "last_edit_date": 1523446345, "creation_date": 1523423750, "answer_id": 49766982, "question_id": 49765998, "link": "https://stackoverflow.com/questions/49765998/android-return-non-null-typeface-by-kotlin/49766982#49766982", "title": "android return non-null typeface by kotlin", "body": "<p>There short answer is -- If you are making sure <code>createTypeface</code> is truly not <code>null</code>, returning <code>createTypeface!!</code> is safe to do.  You are asserting something you know to be true.  It appears you are doing that, so <code>!!</code> should work fine in this case. </p>\n\n<p>In general, if you want Kotlin to infer that something is not <code>null</code>, you need to make sure you never have null as possible value for it.  One option for your example is to collapse your null check into a <code>?:</code> operator --</p>\n\n<pre><code>class TypefaceProvider {\n    companion object {\n        private var tmpTypeface = Hashtable&lt;String, Typeface&gt;()\n        @JvmStatic\n        fun getTypeface(context: Context, dir: String, name: String): Typeface {\n            val createTypeface = tmpTypeface[name] ?: try {\n                Typeface.createFromAsset(context.assets, \"$dir/$name\")\n            } catch (e: Exception) {\n                Log.e(TAG, \"fail. msg:${e.message}\")\n                Typeface.DEFAULT\n            }\n            tmpTypeface[name] = createTypeface`\n            return createTypeface\n        }\n    }\n}\n</code></pre>\n\n<p>Note that we had to pull the <code>tmpTypeface[name] = createTypeface</code> out of the <code>finally</code> block. It causes your cache to always save a <code>null</code> value (see @Alexy Romanov's comment below). As an aside, I feel it is better to not have it in the finally block anyway, a side-effect inside a variable assignment seems odd.  Also, we don't have to give <code>createTypeface</code> and explicit type since it can be inferred.</p>\n\n<p>If you want something more readable, you can break the loading/caching logic into a separate method -- </p>\n\n<pre><code>class TypefaceProvider {\n    companion object {\n        private var tmpTypeface = Hashtable&lt;String, Typeface&gt;()\n\n        private fun loadTypeFace(context: Context, dir: String, name: String): Typeface {\n            val typeface = try {\n                Typeface.createFromAsset(context.assets, \"$dir/$name\")\n            } catch (e: Exception) {\n                Typeface.DEFAULT\n            }\n            tmpTypeface[name] = typeface\n            return typeface\n        }\n\n        @JvmStatic\n        fun getTypeface(context: Context, dir: String, name: String) = \n            tmpTypeface[name] ?: loadTypeFace(context, dir, name)\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 333, "user_id": 4192373, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/30fc88c550615b82ec65b98d1745b010?s=128&d=identicon&r=PG&f=1", "display_name": "KBKai", "link": "https://stackoverflow.com/users/4192373/kbkai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "accepted_answer_id": 49766982, "answer_count": 1, "score": 0, "last_activity_date": 1523446345, "creation_date": 1523417025, "last_edit_date": 1523428346, "question_id": 49765998, "link": "https://stackoverflow.com/questions/49765998/android-return-non-null-typeface-by-kotlin", "title": "android return non-null typeface by kotlin", "body": "<p>I am practicing to convert java code to Kotlin code:</p>\n\n<pre><code>class TypefaceProvider {\n    companion object {\n        private var tmpTypeface = Hashtable&lt;String,Typeface&gt;()\n        @JvmStatic\n        fun getTypeface(context : Context, dir : String, name : String) : Typeface {\n            var createTypeface : Typeface? = tmpTypeface[name]\n            if(createTypeface == null){\n                createTypeface = try{\n                    Typeface.createFromAsset(context.assets,\"$dir/$name\")\n                } catch (e : Exception){\n                    Log.e(TAG, \"fail. msg:${e.message}\")\n                    Typeface.DEFAULT\n                } finally {\n                    tmpTypeface[name] = createTypeface \n                }\n            }\n            return createTypeface &lt;--- wrong, type mismatch\n        }\n    }\n}\n</code></pre>\n\n<p>I want to return an non-null typeface object,</p>\n\n<p>I have already checked <code>createTypeface</code> is not <code>null</code>. </p>\n\n<p>How to fix the return type mismatch problem?</p>\n\n<p>Should I use <code>return createTypeface!!</code> or </p>\n\n<p><code>createTypeface?:Typeface.DEFAULT</code> (but <code>Typeface.DEFAULT</code> is duplicate)</p>\n\n<p>or otherwise?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 134, "user_id": 9590596, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anton Bannykh", "link": "https://stackoverflow.com/users/9590596/anton-bannykh"}, "edited": false, "score": 1, "creation_date": 1523435630, "post_id": 49765556, "comment_id": 86555357, "body": "Are you using Gradle? If that&#39;s the case could you try disabling <a href=\"https://docs.gradle.org/current/userguide/build_cache.html\" rel=\"nofollow noreferrer\">build cache</a>?"}, {"owner": {"reputation": 4616, "user_id": 515377, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/qczen.jpg?s=128&g=1", "display_name": "Graham", "link": "https://stackoverflow.com/users/515377/graham"}, "reply_to_user": {"reputation": 134, "user_id": 9590596, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anton Bannykh", "link": "https://stackoverflow.com/users/9590596/anton-bannykh"}, "edited": false, "score": 0, "creation_date": 1523458173, "post_id": 49765556, "comment_id": 86571577, "body": "@AntonBannykh No I am using create-react-kotlin-app and Yarn. I found on the create-react-kotlin-app github page that I need to delete the cache in node_modules. I haven&#39;t been able to try it yet but I will be able to tonight. And considering how the error showed up out of nowhere with no code changes it sound like the cache could be the problem."}, {"owner": {"reputation": 134, "user_id": 9590596, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anton Bannykh", "link": "https://stackoverflow.com/users/9590596/anton-bannykh"}, "edited": false, "score": 0, "creation_date": 1523538331, "post_id": 49765556, "comment_id": 86609114, "body": "Good luck, hope that&#39;ll fix it! My hunch is you might have ended up mixing regular compilation output and minimized kotlin.js standard library (result of DCE application). That could could be due to some faulty caching, as well as a number of other options =)"}, {"owner": {"reputation": 4616, "user_id": 515377, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/qczen.jpg?s=128&g=1", "display_name": "Graham", "link": "https://stackoverflow.com/users/515377/graham"}, "reply_to_user": {"reputation": 134, "user_id": 9590596, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anton Bannykh", "link": "https://stackoverflow.com/users/9590596/anton-bannykh"}, "edited": false, "score": 0, "creation_date": 1523545939, "post_id": 49765556, "comment_id": 86614931, "body": "That very well could have been it. This didn&#39;t start happening until I did a production build. I ended up having to clear the cache in node_modules and the browser cache to get it working. Clearing just the node_modules cache didn&#39;t work. Which is surprising since I&#39;m using chrome with dev tools open and the &quot;don&#39;t use cache&quot; option checked. I am using localhost as the hostname though so I&#39;m not sure if that had something to do with it."}], "answers": [{"tags": [], "owner": {"reputation": 4616, "user_id": 515377, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/qczen.jpg?s=128&g=1", "display_name": "Graham", "link": "https://stackoverflow.com/users/515377/graham"}, "is_accepted": true, "score": 2, "last_activity_date": 1523546212, "creation_date": 1523546212, "answer_id": 49800228, "question_id": 49765556, "link": "https://stackoverflow.com/questions/49765556/uncaught-typeerror-kotlin-definemodule-is-not-a-function/49800228#49800228", "title": "Uncaught TypeError: Kotlin.defineModule is not a function", "body": "<p>I ended up finding the answer here <a href=\"https://github.com/JetBrains/create-react-kotlin-app#npm-start-or-yarn-start\" rel=\"nofollow noreferrer\">https://github.com/JetBrains/create-react-kotlin-app#npm-start-or-yarn-start</a></p>\n\n<p>Which said to delete the <code>.cache</code> folder in <code>node_modules</code>. I had to do one more step though which was to clear my browser cache. </p>\n\n<p>Even though I was using Chrome with dev tools open and the \"don't use cache\" option checked, I still had to manually clear the cache.</p>\n"}], "owner": {"reputation": 4616, "user_id": 515377, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/qczen.jpg?s=128&g=1", "display_name": "Graham", "link": "https://stackoverflow.com/users/515377/graham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 583, "favorite_count": 0, "accepted_answer_id": 49800228, "answer_count": 1, "score": 3, "last_activity_date": 1523546212, "creation_date": 1523413806, "last_edit_date": 1523457677, "question_id": 49765556, "link": "https://stackoverflow.com/questions/49765556/uncaught-typeerror-kotlin-definemodule-is-not-a-function", "title": "Uncaught TypeError: Kotlin.defineModule is not a function", "body": "<p>I am developing a web app using Kotin for JavaScript and the create-react-kotlin-app CLI. When I pushed my code yesterday everything worked fine. But when I started it up again today I am getting this error:</p>\n\n<pre><code>Uncaught TypeError: Kotlin.defineModule is not a function\n    at C:\\src\\main\\kotlin\\kotlinext\\js\\Object.kt:20\n    at Object.&lt;anonymous&gt; (C:\\src\\main\\kotlin\\kotlinext\\js\\Object.kt:20)\n    at __webpack_require__ (C:\\my_workspace\\bwa-js\\webpack\\bootstrap e6d8ae87c0ef02bf2708:678)\n    at fn (C:\\my_workspace\\bwa-js\\webpack\\bootstrap e6d8ae87c0ef02bf2708:88)\n    at Object.map../index/index.css (C:\\src\\ui\\tabbar\\workout\\changeWorkout\\ChangeWorkoutPage.kt:90)\n    at __webpack_require__ (C:\\my_workspace\\bwa-js\\webpack\\bootstrap e6d8ae87c0ef02bf2708:678)\n    at fn (C:\\my_workspace\\bwa-js\\webpack\\bootstrap e6d8ae87c0ef02bf2708:88)\n    at Object.&lt;anonymous&gt; (C:\\my_workspace\\bwa-js\\stream.kt:137)\n    at __webpack_require__ (C:\\my_workspace\\bwa-js\\webpack\\bootstrap e6d8ae87c0ef02bf2708:678)\n    at module.exports (C:\\my_workspace\\bwa-js\\webpack\\bootstrap e6d8ae87c0ef02bf2708:724)\n    at C:\\my_workspace\\bwa-js\\webpack\\bootstrap e6d8ae87c0ef02bf2708:724\n</code></pre>\n\n<p>Yesterday everything was working fine and nothing has changed in my code. I did a <code>git status</code> to make sure. </p>\n\n<p>Below is the file that the error is coming from. I've marked the line with a comment. It is the 3rd before the last line.</p>\n\n<pre><code>package ui.tabbar.workout.changeWorkout\n\nimport external.onsenui.Ons\nimport external.onsenui.OnsNav\nimport kotlinext.js.js\nimport kotlinx.html.style\nimport model.Workout\nimport react.RBuilder\nimport react.dom.div\nimport service.state.WorkoutStateService\n\nprivate lateinit var navigator: OnsNav\n\nfun RBuilder.changeWorkoutPage(_navigator: OnsNav) {\n  navigator = _navigator\n  Ons.Page {\n    attrs {\n      key = \"ChangeWorkoutPage\"\n      renderToolbar = this@changeWorkoutPage.renderToolbar\n    }\n    Ons.List {\n      attrs {\n        dataSource = WorkoutStateService.workouts.toTypedArray()\n        renderRow = renderListItem\n      }\n    }\n  }\n}\n\nprivate val RBuilder.renderToolbar: Function&lt;Any&gt;\n  get() = {\n    Ons.Toolbar {\n      attrs {\n        modifier = \"material\"\n      }\n      div(\"left\") {\n        Ons.BackButton {\n          attrs {\n            onClick = {\n              navigator.popPage()\n            }\n          }\n        }\n      }\n      div(\"center\") {\n        attrs {\n          style = js {\n            textAlign = \"center\"\n          }\n        }\n        +\"Workouts\"\n      }\n      div(\"right\") {\n        Ons.Icon {\n          //placeholder to center text in the center div\n        }\n      }\n    }\n  }\n\nprivate val RBuilder.renderListItem\n  get() = { row: Workout, index: Int -&gt;\n    Ons.ListItem {\n      attrs {\n        key = row.name + index\n        className = \"workoutDaysListItem\"\n        tappable = true\n        onClick = {\n          setCurrentWorkout(row)\n          navigator.popPage()\n        }\n      }\n      Ons.Card {\n        attrs {\n          className = \"workoutDaysListCard\"\n        }\n        div(\"innerWorkoutDaysListCard\") {\n          div {\n            +row.name\n          }\n          div {\n            +\"${row.dayList.size} days\"\n          }\n        }\n\n      }\n    }\n  }\n\nprivate val setCurrentWorkout = { workout: Workout -&gt; //The error is here\n  WorkoutStateService.currentWorkout = workout\n}\n</code></pre>\n\n<p>Any help would be greatly appreciated.</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 2721, "user_id": 1710444, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/23fb7b17ea705c9454dfc41d75f578a4?s=128&d=identicon&r=PG", "display_name": "Catalyst", "link": "https://stackoverflow.com/users/1710444/catalyst"}, "is_accepted": false, "score": 1, "last_activity_date": 1523404162, "creation_date": 1523404162, "answer_id": 49764386, "question_id": 49764351, "link": "https://stackoverflow.com/questions/49764351/how-to-construct-mutablelist-based-list-in-kotlin/49764386#49764386", "title": "How to construct MutableList based List in Kotlin?", "body": "<p>It is a generic and needs type information e.g.</p>\n\n<pre><code>    var a = mutableListOf&lt;Int&gt;()\n</code></pre>\n\n<p>I tested at <a href=\"https://try.kotlinlang.org/#/\" rel=\"nofollow noreferrer\">https://try.kotlinlang.org/#/</a></p>\n\n<p>EDIT: I didn't read closely enough, what you want should be a <code>toMutableList</code> method.</p>\n\n<pre><code>    var b = listOf(2, 3);\n    var a = b.toMutableList()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26172, "user_id": 49746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IAAg.jpg?s=128&g=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/49746/todd"}, "is_accepted": true, "score": 5, "last_activity_date": 1523407263, "creation_date": 1523407263, "answer_id": 49764751, "question_id": 49764351, "link": "https://stackoverflow.com/questions/49764351/how-to-construct-mutablelist-based-list-in-kotlin/49764751#49764751", "title": "How to construct MutableList based List in Kotlin?", "body": "<p>Kotlin has a few versions of the <code>toMutableList()</code> extension function that should cover you. Check out <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/to-mutable-list.html\" rel=\"noreferrer\">the documentation here</a>.</p>\n\n<p>Basically, on any <code>Collection</code>, <code>Interable</code>, typed <code>Array</code> or generic <code>Array</code>, you can call <code>.toMutableList()</code> and it will creat a new MutableList (backed by ArrayList).</p>\n\n<p>So in your code, you can do this (I'm showing types, you can leave them off):</p>\n\n<pre><code>var b: List&lt;MSetting&gt; = listOf(...)\nvar a: MutableList&lt;MSetting&gt; = b.toMutableList()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7362, "user_id": 972671, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/d60679aa1bf8f8400d3953e7dc78d2db?s=128&d=identicon&r=PG", "display_name": "Kingfisher Phuoc", "link": "https://stackoverflow.com/users/972671/kingfisher-phuoc"}, "is_accepted": false, "score": 1, "last_activity_date": 1523426545, "creation_date": 1523426545, "answer_id": 49767592, "question_id": 49764351, "link": "https://stackoverflow.com/questions/49764351/how-to-construct-mutablelist-based-list-in-kotlin/49767592#49767592", "title": "How to construct MutableList based List in Kotlin?", "body": "<p>it's very easy:</p>\n\n<pre><code>val listB = listA?.toMutableList() ?: mutableListOf() // list B = A if (A != null), other wise, B = new empty list\n</code></pre>\n"}], "owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "accepted_answer_id": 49764751, "answer_count": 3, "score": 2, "last_activity_date": 1523426545, "creation_date": 1523403909, "question_id": 49764351, "link": "https://stackoverflow.com/questions/49764351/how-to-construct-mutablelist-based-list-in-kotlin", "title": "How to construct MutableList based List in Kotlin?", "body": "<p>I hope to construct MutableList a based List b, how can I do in Kotlin?</p>\n\n<p>BTW, Code A is wrong</p>\n\n<pre><code>var a:MutableList&lt;MSetting&gt;\nvar b:List&lt;MSetting&gt;\n</code></pre>\n\n<p><strong>Code A</strong></p>\n\n<pre><code>var a=mutableListOf(b)\n</code></pre>\n"}, {"tags": ["android", "button", "android-edittext", "kotlin"], "comments": [{"owner": {"reputation": 6441, "user_id": 690952, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B9WfV.png?s=128&g=1", "display_name": "Selvin", "link": "https://stackoverflow.com/users/690952/selvin"}, "edited": false, "score": 2, "creation_date": 1523404178, "post_id": 49764286, "comment_id": 86544323, "body": "Serioulsy, what is stopping you? What had you tried so far?"}, {"owner": {"reputation": 7065, "user_id": 4017501, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-Mk9ZAlByQdc/AAAAAAAAAAI/AAAAAAAAAD8/TKM32IE8Mxs/photo.jpg?sz=128", "display_name": "cutiko", "link": "https://stackoverflow.com/users/4017501/cutiko"}, "reply_to_user": {"reputation": 6441, "user_id": 690952, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B9WfV.png?s=128&g=1", "display_name": "Selvin", "link": "https://stackoverflow.com/users/690952/selvin"}, "edited": false, "score": 0, "creation_date": 1523405632, "post_id": 49764286, "comment_id": 86544647, "body": "@Selvin OP probably doesn&#39;t know how to start because real-time validations based on text changes are not intuitive. However, is part of the rules adding coded attempts."}, {"owner": {"reputation": 448, "user_id": 3993147, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1287726479/picture?type=large", "display_name": "Marcus Mondel", "link": "https://stackoverflow.com/users/3993147/marcus-mondel"}, "edited": false, "score": 0, "creation_date": 1523406185, "post_id": 49764286, "comment_id": 86544755, "body": "i tried all the stuff with isEmpty(), == &quot;&quot;, == null, neither worked!"}], "answers": [{"tags": [], "owner": {"reputation": 135, "user_id": 8848409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1380791645f86ebc03b0d9f06fd9d76?s=128&d=identicon&r=PG&f=1", "display_name": "Sava Dimitrijevi\u0107", "link": "https://stackoverflow.com/users/8848409/sava-dimitrijevi%c4%87"}, "is_accepted": false, "score": 0, "last_activity_date": 1523404121, "creation_date": 1523404121, "answer_id": 49764382, "question_id": 49764286, "link": "https://stackoverflow.com/questions/49764286/show-button-when-all-edittexts-are-filled-out-by-user/49764382#49764382", "title": "Show button when all EditTexts are filled out by user", "body": "<p>This is all the help you can get, cause you didn't include any code of yours. Also, my code is in Java, you should get the idea. \n<code>\nif(!edittext1.equals(\"\") &amp;&amp; !edittext2.equals(\"\")){\n       // enable button\n }</code></p>\n"}, {"tags": [], "owner": {"reputation": 7, "user_id": 8050136, "user_type": "registered", "profile_image": "https://graph.facebook.com/1486230398105682/picture?type=large", "display_name": "Julio Picazo", "link": "https://stackoverflow.com/users/8050136/julio-picazo"}, "is_accepted": false, "score": 0, "last_activity_date": 1523404310, "creation_date": 1523404310, "answer_id": 49764400, "question_id": 49764286, "link": "https://stackoverflow.com/questions/49764286/show-button-when-all-edittexts-are-filled-out-by-user/49764400#49764400", "title": "Show button when all EditTexts are filled out by user", "body": "<p>You must have different methods to validate that your forms are full, and finish with these validations:</p>\n\n<pre><code>                public boolean validatePassword(String password){if(!password.equals(\"\")){\n                        if(password.length() == 6){ //Valid if the password is of certain sizes\n\n                            this.password = password;\n                            return true;\n                        }\n                        else {\n                            Toast.makeText(this, \"Length invalid\", Toast.LENGTH_SHORT).show();\n                            return false;\n                        }\n                    }\n                    else {\n                        Toast.makeText(this, \"Please enter your password\", Toast.LENGTH_SHORT).show();\n                        return false;\n                    }\n                }}\n</code></pre>\n\n<p>Method for each form.</p>\n\n<p>You get the form data in the following way:</p>\n\n<p>String pass = youreditText.getText().toString();</p>\n\n<p>finally:</p>\n\n<pre><code>                    if(validatePassword(password)){ if(validateOtherForm(text){\n                            //What you want to do\n                        }}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 448, "user_id": 3993147, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1287726479/picture?type=large", "display_name": "Marcus Mondel", "link": "https://stackoverflow.com/users/3993147/marcus-mondel"}, "edited": false, "score": 0, "creation_date": 1523406750, "post_id": 49764544, "comment_id": 86544886, "body": "i will have to try this!"}, {"owner": {"reputation": 448, "user_id": 3993147, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1287726479/picture?type=large", "display_name": "Marcus Mondel", "link": "https://stackoverflow.com/users/3993147/marcus-mondel"}, "edited": false, "score": 0, "creation_date": 1523407663, "post_id": 49764544, "comment_id": 86545116, "body": "Thank you very much, this was exactly what i was searching for!"}], "tags": [], "owner": {"reputation": 7065, "user_id": 4017501, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-Mk9ZAlByQdc/AAAAAAAAAAI/AAAAAAAAAD8/TKM32IE8Mxs/photo.jpg?sz=128", "display_name": "cutiko", "link": "https://stackoverflow.com/users/4017501/cutiko"}, "is_accepted": true, "score": 1, "last_activity_date": 1523405504, "creation_date": 1523405504, "answer_id": 49764544, "question_id": 49764286, "link": "https://stackoverflow.com/questions/49764286/show-button-when-all-edittexts-are-filled-out-by-user/49764544#49764544", "title": "Show button when all EditTexts are filled out by user", "body": "<p>This is a hard one because what you need to do is to enable the button in real-time. So you have to listen each <code>EditText</code> and once a condition is met on the written text then you should set the button as enabled. There is another complexity here, which it is: what happened if the user goes back and then try to delete some text. There are 2 ways to solve this last issue, the first is to save a state of each EditText and the second is to also validate the data to be sent.</p>\n\n<pre><code>    //You have to set initial state as false representing conditione haven'met\n    //Otherwise when you try to get the tag is gonna be null\n    boolean initialValidity = false;\n    emailEt.setTag(initialValidity);\n    passEt.setTag(initialValidity);\n    emailEt.addTextChangedListener(new TextWatcher() {\n    @Override\n    public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n\n    }\n\n    @Override\n    public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n\n    }\n\n    @Override\n    public void afterTextChanged(Editable editable) {\n        String email = emailEt.getText().toString();\n        //You can improve this condition\n        if (email.trim().length() &gt; 0 &amp;&amp; email.contains(\"@\") &amp;&amp; email.contains(\".\")) {\n            emailEt.setTag(true);\n            if ((boolean) passEt.getTag()) {\n               sendButton.setEnabled(true); \n            }\n        } else {\n            emailEt.setTag(false);\n            sendButton.setEnabled(false);\n        }\n    }\n});\npassEt.addTextChangedListener(new TextWatcher() {\n    @Override\n    public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n\n    }\n\n    @Override\n    public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n\n    }\n\n    @Override\n    public void afterTextChanged(Editable editable) {\n        String password = passEt.getText().toString();\n        //You can improve this condition\n        if (!password.contains(\" \") &amp;&amp; password.length() &gt; 6) {\n            passEt.setTag(true);\n            if ((boolean) emailEt.getTag()) {\n                sendButton.setEnabled(true);\n            }\n        } else {\n            passEt.setTag(false);\n            sendButton.setEnabled(false);\n        }\n    }\n});\nsendButton.setOnClickListener(new View.OnClickListener() {\n    @Override\n    public void onClick(View view) {\n        String email = emailEt.getText().toString();\n        String password = passEt.getText().toString();\n        //TODO add validation to send the data\n        //TODO send the data\n    }\n});\n</code></pre>\n\n<p>What we are doing here is listening to both <code>EditText</code> and while the user is writting we check if the conditions are met. Both <code>EditText</code> while checking their own condition and also the other condition. This crossed checking allow us to enable or disable the <code>Button</code> if any <code>EditText</code> breaks the clauses in the conditions. Each <code>EditText</code> can know if the other has met the needed conditions by checking the tag which is a boolean representing if the conditions are met or not. I'm using <code>enabled</code> as an example, you could hide using <code>setVisibility()</code></p>\n"}], "owner": {"reputation": 448, "user_id": 3993147, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1287726479/picture?type=large", "display_name": "Marcus Mondel", "link": "https://stackoverflow.com/users/3993147/marcus-mondel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 1, "accepted_answer_id": 49764544, "answer_count": 3, "score": -3, "last_activity_date": 1523406616, "creation_date": 1523403364, "last_edit_date": 1523406616, "question_id": 49764286, "link": "https://stackoverflow.com/questions/49764286/show-button-when-all-edittexts-are-filled-out-by-user", "title": "Show button when all EditTexts are filled out by user", "body": "<p>I have this login activity, when the user clicks on either Login or Register Button, different EditTexts appear. My question is how can i check if all EditTexts are filled out so the continueButton will be enabled?</p>\n\n<p>(When Login is clicked, email and password must be filled, and when register is clicked, email, password and username must be filled)</p>\n\n<p><a href=\"https://i.stack.imgur.com/QvZPz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QvZPz.png\" alt=\"Login is clicked\"></a>\n<a href=\"https://i.stack.imgur.com/BZsvW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BZsvW.png\" alt=\"Register is clicked\"></a>\nACTIVITY_LOGIN.XML</p>\n\n<pre><code>    &lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;TableLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:id=\"@+id/tableLayout\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:background=\"@color/yellow\"\n    android:orientation=\"vertical\"\n    tools:context=\".LoginActivity\"&gt;\n\n    &lt;TableRow\n        android:id=\"@+id/welcomeTableRow\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:layout_marginTop=\"8pt\"&gt;\n\n        &lt;TextView\n            android:id=\"@+id/welcomeTextView\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            android:text=\"@string/welcome_to\"\n            android:textAlignment=\"center\"\n            android:textColor=\"@color/black\"\n            android:textSize=\"18sp\"\n            android:textStyle=\"normal|bold\" /&gt;\n    &lt;/TableRow&gt;\n\n    &lt;TableRow\n        android:id=\"@+id/logoTableRow\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"&gt;\n\n        &lt;ImageView\n            android:id=\"@+id/welcomeLogoImageView\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"40dp\"\n            android:layout_span=\"2\"\n            android:contentDescription=\"@string/todo\"\n            android:scaleType=\"fitCenter\"\n            app:srcCompat=\"@drawable/logo_medium\" /&gt;\n    &lt;/TableRow&gt;\n\n    &lt;TableRow\n        android:id=\"@+id/loginInfoTableRow\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:layout_marginTop=\"12pt\"&gt;\n\n        &lt;TextView\n            android:id=\"@+id/infoEditText\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"70dp\"\n            android:padding=\"6pt\"\n            android:text=\"@string/ask_to_register_or_login\"\n            android:textAlignment=\"center\"\n            android:textColor=\"@android:color/black\"\n            android:textSize=\"18sp\" /&gt;\n    &lt;/TableRow&gt;\n\n    &lt;TableRow\n        android:id=\"@+id/loginOrRegisterTableRow\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:layout_marginBottom=\"4pt\"\n        android:layout_marginEnd=\"40dp\"\n        android:layout_marginStart=\"40dp\"\n        android:layout_marginTop=\"12dp\"&gt;\n\n        &lt;Button\n            style=\"@style/Widget.AppCompat.Button.Borderless\"\n            android:id=\"@+id/chooseToLoginButton\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginEnd=\"5dp\"\n            android:layout_marginStart=\"10dp\"\n            android:layout_weight=\"1\"\n            android:background=\"@drawable/login_screen_button_unclicked\"\n            android:onClick=\"chosenEvent\"\n            android:text=\"@string/login\" /&gt;\n\n        &lt;Button\n            style=\"@style/Widget.AppCompat.Button.Borderless\"\n            android:id=\"@+id/chooseToRegisterButton\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginEnd=\"10dp\"\n            android:layout_marginStart=\"5dp\"\n            android:layout_weight=\"1\"\n            android:background=\"@drawable/login_screen_button_unclicked\"\n            android:onClick=\"chosenEvent\"\n            android:text=\"@string/register\" /&gt;\n    &lt;/TableRow&gt;\n\n    &lt;TableRow\n        android:id=\"@+id/nameTableRow\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:layout_marginEnd=\"12dp\"\n        android:layout_marginStart=\"12dp\"\n        android:background=\"@android:color/white\"\n        android:padding=\"4pt\"\n        android:visibility=\"visible\"\n        android:weightSum=\"1\"&gt;\n\n        &lt;TextView\n            android:id=\"@+id/nameTextView\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"30dp\"\n            android:layout_weight=\"0.3\"\n            android:paddingEnd=\"2pt\"\n            android:paddingStart=\"2pt\"\n            android:text=\"@string/name\"\n            android:textAlignment=\"textEnd\"\n            android:textColor=\"@color/black\"\n            android:textSize=\"18sp\"\n            android:textStyle=\"bold\" /&gt;\n\n        &lt;EditText\n            android:id=\"@+id/nameEditText\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"wrap_content\"\n            android:layout_weight=\"0.65\"\n            android:ems=\"10\"\n            android:hint=\"@string/name\"\n            android:inputType=\"textPersonName\" /&gt;\n    &lt;/TableRow&gt;\n\n    &lt;TableRow\n        android:id=\"@+id/emailTableRow\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:layout_marginEnd=\"12dp\"\n        android:layout_marginStart=\"12dp\"\n        android:background=\"@android:color/white\"\n        android:padding=\"4pt\"\n        android:visibility=\"visible\"\n        android:weightSum=\"1\"&gt;\n\n\n        &lt;TextView\n            android:id=\"@+id/emailTextView\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"30dp\"\n            android:layout_weight=\"0.3\"\n            android:paddingEnd=\"2pt\"\n            android:paddingStart=\"2pt\"\n            android:text=\"@string/email\"\n            android:textAlignment=\"textEnd\"\n            android:textColor=\"@color/black\"\n            android:textSize=\"18sp\"\n            android:textStyle=\"bold\" /&gt;\n\n        &lt;EditText\n            android:id=\"@+id/emailEditText\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"wrap_content\"\n            android:layout_weight=\"0.65\"\n            android:ems=\"10\"\n            android:hint=\"@string/email\"\n            android:inputType=\"textEmailAddress\" /&gt;\n    &lt;/TableRow&gt;\n\n    &lt;TableRow\n        android:id=\"@+id/passwordTableRow\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:layout_marginEnd=\"12dp\"\n        android:layout_marginStart=\"12dp\"\n        android:background=\"@color/white\"\n        android:padding=\"4pt\"\n        android:visibility=\"visible\"\n        android:weightSum=\"1\"&gt;\n\n        &lt;TextView\n            android:id=\"@+id/passwordTextView\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"30dp\"\n            android:layout_weight=\"0.3\"\n            android:paddingEnd=\"2pt\"\n            android:paddingStart=\"2pt\"\n            android:text=\"@string/password\"\n            android:textAlignment=\"textEnd\"\n            android:textColor=\"@color/black\"\n            android:textSize=\"18sp\"\n            android:textStyle=\"bold\" /&gt;\n\n        &lt;EditText\n            android:id=\"@+id/passwordEditText\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"wrap_content\"\n            android:layout_weight=\"0.65\"\n            android:ems=\"10\"\n            android:hint=\"@string/password\"\n            android:inputType=\"textPassword\" /&gt;\n    &lt;/TableRow&gt;\n\n    &lt;TableRow\n        android:id=\"@+id/continueButtonTableRow\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"match_parent\"\n        android:layout_marginTop=\"8pt\"\n        android:visibility=\"visible\"&gt;\n\n        &lt;Button\n            android:id=\"@+id/continueButton\"\n            style=\"@style/Widget.AppCompat.Button.Borderless\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginEnd=\"80dp\"\n            android:layout_marginStart=\"80dp\"\n            android:background=\"@drawable/login_screen_button_unclicked\"\n            android:enabled=\"false\"\n            android:text=\"@string/continue_button\"\n            android:visibility=\"visible\" /&gt;\n    &lt;/TableRow&gt;\n\n&lt;/TableLayout&gt;\n</code></pre>\n\n<p>LOGIN ACTIVITY:</p>\n\n<pre><code>import android.os.Bundle\nimport android.support.v7.app.AppCompatActivity\nimport android.view.View\nimport kotlinx.android.synthetic.main.activity_login.*\n\nLoginActivity:\n\nclass LoginActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_login)\n    }\n\n    private fun unclickAllChooseButtons() {\n        chooseToLoginButton.setBackgroundResource(R.drawable.login_screen_button_unclicked)\n        chooseToRegisterButton.setBackgroundResource(R.drawable.login_screen_button_unclicked)\n    }\n\n    private fun showEmailRow() {\n        emailTableRow.visibility = View.VISIBLE\n    }\n\n    private fun showNameRow() {\n        nameTableRow.visibility = View.VISIBLE\n    }\n\n    private fun showPasswordRow() {\n        passwordTableRow.visibility = View.VISIBLE\n    }\n\n    private fun hideAllRows() {\n        emailTableRow.visibility = View.GONE\n        passwordTableRow.visibility = View.GONE\n        nameTableRow.visibility = View.GONE\n    }\n\n    fun chosenEvent(view: View) {\n        when (view.id) {\n            R.id.chooseToLoginButton -&gt; {\n                unclickAllChooseButtons()\n                chooseToLoginButton.setBackgroundResource(R.drawable.login_screen_button_clicked)\n                hideAllRows()\n                showEmailRow()\n                showPasswordRow()\n            }\n            R.id.chooseToRegisterButton -&gt; {\n                unclickAllChooseButtons()\n                chooseToRegisterButton.setBackgroundResource(R.drawable.login_screen_button_clicked)\n                hideAllRows()\n                showNameRow()\n                showEmailRow()\n                showPasswordRow()\n            }\n            else -&gt; {\n                unclickAllChooseButtons()\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["spring-boot", "spring-security", "oauth-2.0", "kotlin", "spring-security-oauth2"], "comments": [{"owner": {"reputation": 9591, "user_id": 755932, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f1e8c9dd583d158567b5cd7330700ba2?s=128&d=identicon&r=PG", "display_name": "K. Siva Prasad Reddy", "link": "https://stackoverflow.com/users/755932/k-siva-prasad-reddy"}, "edited": false, "score": 0, "creation_date": 1523416196, "post_id": 49763763, "comment_id": 86547215, "body": "Can you try adding &quot;/oauth/token&quot;, &quot;/oauth/authorize&quot;, &quot;/oauth/confirm_access&quot; in addition to &quot;/registration&quot;, &quot;/customer/check&quot; in ResourceServerConfiguration?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9627457, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "TheWishWithin", "link": "https://stackoverflow.com/users/9627457/thewishwithin"}, "edited": false, "score": 0, "creation_date": 1523466449, "post_id": 49767583, "comment_id": 86577013, "body": "The client in oauth_client_details was fine. Using basic auth for client_id:client_secret worked and my request got authenticated. However, after that I&#39;m getting a 404 response, even though in the log I can see that /oauth/token got mapped onto <code>TokenEndpoint.postAccessToken</code>."}, {"owner": {"reputation": 1, "user_id": 9627457, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "TheWishWithin", "link": "https://stackoverflow.com/users/9627457/thewishwithin"}, "edited": false, "score": 0, "creation_date": 1523467509, "post_id": 49767583, "comment_id": 86577570, "body": "Oh well, I figured it out. I&#39;m using JAX-RS resources in Spring. This somehow interferes with the OAuth2 endpoints"}], "tags": [], "owner": {"reputation": 1905, "user_id": 2801909, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/589720868/picture?type=large", "display_name": "Vijay Nandwana", "link": "https://stackoverflow.com/users/2801909/vijay-nandwana"}, "is_accepted": false, "score": 0, "last_activity_date": 1523426511, "creation_date": 1523426511, "answer_id": 49767583, "question_id": 49763763, "link": "https://stackoverflow.com/questions/49763763/spring-oauth2-password-flow-keeps-failing/49767583#49767583", "title": "Spring OAuth2 Password Flow keeps failing", "body": "<p>It appears that client <code>androidAppClient</code> doesn't have <code>password</code> grant type set in <code>authorized_grant_types</code>. </p>\n\n<p>Check client details table in DB (<code>oauth_client_details</code>), make sure <code>password</code> grant type is set for this client. <strong>If it is set along with other grant types then make sure there are no spaces in grant types like, (<code>'password,refresh_token')</code>.</strong>  </p>\n\n<p>The <code>/oauth/token</code> endpoint's post request expects client credentials in Base64 \"clientId:clientSecret\" format. </p>\n\n<pre><code>curl --request POST \\\n  --url http://localhost:8443/auth-service/oauth/token \\\n  --header 'authorization: Basic UkVXQVJEU19QT1QUxfQURNSU46cGFzc3dvcmQ=' \\\n  --header 'content-type: multipart/form-data; boundary=---011000010111000001101001' \\\n  --form username=testuser \\\n  --form password=password \\\n  --form grant_type=password\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9627457, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "TheWishWithin", "link": "https://stackoverflow.com/users/9627457/thewishwithin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 355, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523426511, "creation_date": 1523399373, "question_id": 49763763, "link": "https://stackoverflow.com/questions/49763763/spring-oauth2-password-flow-keeps-failing", "title": "Spring OAuth2 Password Flow keeps failing", "body": "<p>I'm trying to enable OAuth2 Password Flow in my Spring Boot application, however, I just can't get it to run, no matter what I try.</p>\n\n<p>There following are my configurations.\nFor the <code>TokenStore</code> I configured a <code>JdbcTokenStore</code> bean and the <code>UserDetailsService</code> is simply loading the user from my custom user tables.\nI also added the the property <code>security.oauth2.resource.filter-order=3</code>.</p>\n\n<p>For Spring Boot I'm using <code>2.0.0.RELEASE</code> and for Spring Security <code>2.3.0.RELEASE</code>.</p>\n\n<p>Both the authorization server and the resource server are in a single application.</p>\n\n<p>The following POST (with SoapUI) keeps failing:</p>\n\n<pre><code>http://localhost:8080/oauth/token?grant_type=password&amp;username=hans.wurst&amp;password=bla&amp;client_id=androidAppClient\n</code></pre>\n\n<p>I get the message </p>\n\n<blockquote>\n  <p>Access is denied (user is anonymous);</p>\n</blockquote>\n\n<p>Debug tells me that the following filters were applied:</p>\n\n<pre><code>Security filter chain: [\n  WebAsyncManagerIntegrationFilter\n  SecurityContextPersistenceFilter\n  HeaderWriterFilter\n  LogoutFilter\n  BasicAuthenticationFilter\n  RequestCacheAwareFilter\n  SecurityContextHolderAwareRequestFilter\n  AnonymousAuthenticationFilter\n  SessionManagementFilter\n  ExceptionTranslationFilter\n  FilterSecurityInterceptor\n]\n</code></pre>\n\n<p><strong>Authorization server:</strong></p>\n\n<pre><code>@Configuration\n@EnableAuthorizationServer\nclass AuthorizationServerConfiguration : AuthorizationServerConfigurerAdapter() {\n\n    @Autowired\n    private lateinit var dataSource: DataSource\n\n    @Autowired\n    private lateinit var tokenStore: TokenStore\n\n    @Autowired\n    @Qualifier(\"authenticationManagerBean\")\n    private lateinit var authenticationManager: AuthenticationManager\n\n    override fun configure(clients: ClientDetailsServiceConfigurer) {\n        clients.jdbc(dataSource)\n    }\n\n    override fun configure(endpoints: AuthorizationServerEndpointsConfigurer) {\n        endpoints\n                .authenticationManager(authenticationManager)\n                .tokenStore(tokenStore)\n    }\n\n}\n</code></pre>\n\n<p><strong>Web security:</strong></p>\n\n<pre><code>@Configuration\nclass WebSecurityConfiguration : WebSecurityConfigurerAdapter() {\n\n    @Autowired\n    @Qualifier(USER_DETAILS_SERVICE)\n    private lateinit var userDetailsService: UserDetailsService\n\n    @Bean\n    @Throws(Exception::class)\n    override fun authenticationManagerBean(): AuthenticationManager = super.authenticationManagerBean()\n\n    @Throws(Exception::class)\n    override fun configure(web: WebSecurity) {\n        web.debug(true)\n    }\n\n    override fun configure(auth: AuthenticationManagerBuilder) {\n        auth.userDetailsService(userDetailsService)\n    }\n\n    override fun configure(http: HttpSecurity) {\n        http\n                .authorizeRequests()\n                .anyRequest()\n                .authenticated()\n    }\n}\n</code></pre>\n\n<p><strong>Resource server:</strong></p>\n\n<pre><code>@Configuration\n@EnableResourceServer\nclass ResourceServerConfiguration : ResourceServerConfigurerAdapter() {\n\n    override fun configure(http: HttpSecurity) {\n        http\n                .authorizeRequests()\n                .antMatchers(\"/registration\", \"/customer/check\")\n                .anonymous()\n                .anyRequest()\n                .authenticated()\n    }\n\n}\n</code></pre>\n\n<p><strong>User details service:</strong></p>\n\n<pre><code>const val USER_DETAILS_SERVICE = \"userDetailsService\";\n\n@Transactional\n@Service(USER_DETAILS_SERVICE)\nclass CustomerUserDetailsService @Autowired constructor(private val customerRepository: CustomerRepository) : UserDetailsService {\n\n    @Throws(UsernameNotFoundException::class)\n    override fun loadUserByUsername(username: String): UserDetails =\n            customerRepository\n                    .findCustomerCredentialsByUserName(username)\n                    ?.let { User(it.userName, it.password, emptyList()) }\n                    ?: throw UsernameNotFoundException(\"Could not find customer with username $username\")\n}\n</code></pre>\n"}, {"tags": ["kotlin", "gson", "android"], "comments": [{"owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "edited": false, "score": 0, "creation_date": 1523398479, "post_id": 49763331, "comment_id": 86542874, "body": "Considering the kotlin code you&#39;ve provided is not valid and wouldnt compile, I don&#39;t see how this code would even get to the deserialization step."}], "answers": [{"comments": [{"owner": {"reputation": 673, "user_id": 1861769, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/as7Ol.jpg?s=128&g=1", "display_name": "JavierSA", "link": "https://stackoverflow.com/users/1861769/javiersa"}, "edited": false, "score": 1, "creation_date": 1523399557, "post_id": 49763670, "comment_id": 86543186, "body": "The properties of a <code>data class</code> may also be <code>var</code>."}], "tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": true, "score": 0, "last_activity_date": 1523399621, "last_edit_date": 1523399621, "creation_date": 1523398784, "answer_id": 49763670, "question_id": 49763331, "link": "https://stackoverflow.com/questions/49763331/parse-json-to-primative-array-kotlin/49763670#49763670", "title": "Parse Json to Primative Array Kotlin", "body": "<p>This is a running example:</p>\n\n<pre><code>data class DataObject(val array1: List&lt;Int&gt;, val array2: List&lt;Int&gt;)\n\nfun main(args: Array&lt;String&gt;) {\n    val json = \"\"\"{\"array1\":[1,2],\"array2\":[1,2]}\"\"\"\n    println(Gson().fromJson(json, DataObject::class.java))\n    //DataObject(array1=[1, 2], array2=[1, 2])\n}\n</code></pre>\n\n<p>I've only changed the arguments of <code>DataObject</code> to be <code>val</code>, which is required for data classes (<code>var</code> also works).</p>\n"}], "owner": {"reputation": 566, "user_id": 1813606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a066711fdb800de5c0091fcc494a93b?s=128&d=identicon&r=PG", "display_name": "soundsofpolaris", "link": "https://stackoverflow.com/users/1813606/soundsofpolaris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 729, "favorite_count": 0, "accepted_answer_id": 49763670, "answer_count": 1, "score": 1, "last_activity_date": 1523399621, "creation_date": 1523396876, "last_edit_date": 1549310320, "question_id": 49763331, "link": "https://stackoverflow.com/questions/49763331/parse-json-to-primative-array-kotlin", "title": "Parse Json to Primative Array Kotlin", "body": "<p>Maybe this is simple, but I'm missing how to do this. I'm using GSON, kotlin, and retrofit</p>\n\n<p><em>Data.json</em></p>\n\n<pre><code>{\n  \"array1\":[1,2],\n  \"array2\":[1,2]\n}\n</code></pre>\n\n<p><em>DataObject.kt</em></p>\n\n<pre><code>data class DataObject(array1: List&lt;Int&gt;, array2: List&lt;Int&gt;)\n</code></pre>\n\n<p>The the above fails to deserialize the arrays. </p>\n"}, {"tags": ["android", "kotlin", "rx-java2"], "answers": [{"tags": [], "owner": {"reputation": 3342, "user_id": 4380236, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QTHoX.jpg?s=128&g=1", "display_name": "urgentx", "link": "https://stackoverflow.com/users/4380236/urgentx"}, "is_accepted": false, "score": 1, "last_activity_date": 1523399175, "creation_date": 1523399175, "answer_id": 49763732, "question_id": 49763232, "link": "https://stackoverflow.com/questions/49763232/poll-second-url-until-json-returns-an-expected-parameter/49763732#49763732", "title": "Poll second URL until JSON returns an expected parameter", "body": "<p><code>retry()</code> and <code>retryWhen()</code> both respond to an onError event in the Observable, that is why it isn't actually retrying; you're not receiving those onError events in your <code>pollResults()</code> Observable. Right now, your retrying code doesn't actually depend on the JSON response. </p>\n\n<p>There are two ways I would think about going about this:</p>\n\n<ol>\n<li>Throw an exception in your <code>pollResults()</code> Observable if the JSON response is unsatisfactory. This should trigger the <code>retryWhen()</code>. You'll need to test for it in the Observable somewhere. </li>\n<li>Reorganize your Observable like this: </li>\n</ol>\n\n<p>`</p>\n\n<pre><code>lateinit var pollUrl: String\nskyScannerInteractor.createSession(\"LHR\", \"AKL\", \"2018-04-20\", \"2018-04-22\")\n.doOnSubscribe {\n    loading.postValue(true)\n}\n.flatMap { url -&gt;\n    pollUrl = url\n    skyScannerInteractor.pollResults(pollUrl)    \n}\n.doOnNext {\n    if (it.status != \"UpdatesComplete\") {\n         throw IOException(\"Updates not complete.\") //Trigger onError\n     }\n}\n.retryWhen { //Retry the Observable (createSession) when onError is called         \n    it.delay(1000, TimeUnit.MILLISECONDS)\n}\n.subscribe({\n    // Will give result only when UpdatesComplete\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6047, "user_id": 4624156, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/lLHF6.png?s=128&g=1", "display_name": "Josh Laird", "link": "https://stackoverflow.com/users/4624156/josh-laird"}, "edited": false, "score": 0, "creation_date": 1523441891, "post_id": 49765710, "comment_id": 86559788, "body": "I needed to use the data that comes in when the status returns as pending so within the filter I use that data. Otherwise perfect. Thanks :)"}], "tags": [], "owner": {"reputation": 28482, "user_id": 1904517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mn4kq.png?s=128&g=1", "display_name": "iagreen", "link": "https://stackoverflow.com/users/1904517/iagreen"}, "is_accepted": true, "score": 1, "last_activity_date": 1523414915, "creation_date": 1523414915, "answer_id": 49765710, "question_id": 49763232, "link": "https://stackoverflow.com/questions/49763232/poll-second-url-until-json-returns-an-expected-parameter/49765710#49765710", "title": "Poll second URL until JSON returns an expected parameter", "body": "<p>I am assuming your <code>pollResults(url)</code> method returns a <code>Single</code> or an <code>Observable</code> that behaves like a single -- it returns one result and then <code>onComplete</code>.  If that is truly the case, you can use <code>repeatWhen</code> to retry the request on success and <code>retryWhen</code> to retry on error.  See the code below.</p>\n\n<pre><code>skyScannerInteractor.createSession(\"LHR\", \"AKL\", \"2018-04-20\", \"2018-04-22\")\n    .doOnSubscribe {\n        loading.postValue(true)\n    }\n    .flatMap { url -&gt;\n        skyScannerInteractor.pollResults(url)\n            .repeatWhen { complete -&gt; complete.delay(1, TimeUnit.SECONDS) } \n            .retryWhen { errors -&gt; errors.delay(1, TimeUnit.SECONDS) }\n            .filter({ it.status == \"UpdatesComplete\" })\n            .take(1)  // Take the first valid value and complete\n    }\n    .subscribe({\n         // Subscription stuff\n    )}\n</code></pre>\n\n<p>A little explanation - </p>\n\n<ul>\n<li><code>repeatWhen/retryWhen</code> will try the request every second.  </li>\n<li><code>filter</code> will cause elements with the wrong status to be ignored.  </li>\n<li>When you get the first <code>status == \"UpdatesComplete\"</code> element, <code>take(1)</code> will emit that value and complete -- this will have the effect of cancelling the retries.  </li>\n</ul>\n\n<p><strong>Note:</strong>  In the case of an error, retrying a network request forever is usually the wrong thing to do.  I recommend you modify the <code>retryWhen</code> above to suit you use case to terminate in the event of network failure. For example, you could retry three times and then propagate the error. See <a href=\"http://blog.danlew.net/2016/01/25/rxjavas-repeatwhen-and-retrywhen-explained/\" rel=\"nofollow noreferrer\">this article</a> for some examples on how you could do that.  It is also a good reference on <code>repeatWhen/retryWhen</code>.</p>\n"}], "owner": {"reputation": 6047, "user_id": 4624156, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/lLHF6.png?s=128&g=1", "display_name": "Josh Laird", "link": "https://stackoverflow.com/users/4624156/josh-laird"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 49765710, "answer_count": 2, "score": 1, "last_activity_date": 1523449970, "creation_date": 1523396290, "last_edit_date": 1523449970, "question_id": 49763232, "link": "https://stackoverflow.com/questions/49763232/poll-second-url-until-json-returns-an-expected-parameter", "title": "Poll second URL until JSON returns an expected parameter", "body": "<p>I'm using a travel API which I first hit with a request to create a session and then I use the session URL returned from that URL to then call until its status parameter returns <code>UpdatesComplete</code>. </p>\n\n<p>Here's what I have so far:</p>\n\n<pre><code>lateinit var pollUrl: String\ntravelInteractor.createSession(\"LHR\", \"AKL\", \"2018-04-20\", \"2018-04-22\")\n.doOnSubscribe {\n    loading.postValue(true)\n}\n.flatMap { url -&gt;\n    pollUrl = url\n    travelInteractor.pollResults(pollUrl)\n    .retryWhen {\n        it.delay(1000, TimeUnit.MILLISECONDS)\n    }\n}\n.doOnNext {\n    if (it.status != \"UpdatesComplete\") travelInteractor.pollResults(pollUrl)\n         .retryWhen {\n             it.delay(1000, TimeUnit.MILLISECONDS)\n         }\n}\n.subscribe({\n     // Subscription stuff\n)}\n</code></pre>\n\n<p>What's currently happening is that it will call <code>doOnNext()</code> and then it will make the network poll but I won't be capturing the subscription and also won't chain another poll. Is there a more efficient way I can be writing this?</p>\n\n<hr>\n\n<p><strong>Solution</strong></p>\n\n<p>Thanks to <code>iagreen</code> I managed to achieve this with:</p>\n\n<pre><code>lateinit var pollUrl: String\ntravelInteractor.createSession(\"LHR\", \"AKL\", \"2018-04-20\", \"2018-04-22\")\n.doOnSubscribe {\n    loading.postValue(true)\n}\n.flatMap { url -&gt;\n    travelInteractor.pollResults(url)\n    .retryWhen {\n        it.delay(1000, TimeUnit.MILLISECONDS)\n    }\n    .repeatWhen {\n        it.delay(1000, TimeUnit.MILLISECONDS)\n    }\n    .filter {\n        it.itineraries.map { ... } // Use response here appropriately and then check status\n        it.status == \"UpdatesComplete\"\n    }\n    .take(1)\n}\n.subscribe({\n     // Subscription stuff\n)}\n</code></pre>\n"}, {"tags": ["java", "unit-testing", "static", "kotlin", "mockk"], "answers": [{"comments": [{"owner": {"reputation": 7501, "user_id": 1641868, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/ZpYnA.jpg?s=128&g=1", "display_name": "David Karlsson", "link": "https://stackoverflow.com/users/1641868/david-karlsson"}, "edited": false, "score": 1, "creation_date": 1613388123, "post_id": 49762546, "comment_id": 117050875, "body": "Note: staticMockk is deprecated and replaced with: &quot;mockkStatic(T::class)&quot;"}], "tags": [], "owner": {"reputation": 1494, "user_id": 3742196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JXFwn.jpg?s=128&g=1", "display_name": "oleksiyp", "link": "https://stackoverflow.com/users/3742196/oleksiyp"}, "is_accepted": false, "score": 16, "last_activity_date": 1523392879, "creation_date": 1523392879, "answer_id": 49762546, "question_id": 49762409, "link": "https://stackoverflow.com/questions/49762409/mock-static-java-methods-using-mockk/49762546#49762546", "title": "Mock static java methods using Mockk", "body": "<p>MockK allows mocking static Java methods. The main purpose for it is mocking of Kotlin extension functions, so it is not as powerful as PowerMock, but still does it's job even for Java static methods.</p>\n\n<p>The syntax would be following:</p>\n\n<pre><code>staticMockk&lt;Uri&gt;().use {\n    every { Uri.parse(\"http://test/path\") } returns Uri(\"http\", \"test\", \"path\")\n\n    assertEquals(Uri(\"http\", \"test\", \"path\"), Uri.parse(\"http://test/path\"))\n\n    verify { Uri.parse(\"http://test/path\") }  \n}\n</code></pre>\n\n<p>More details here: <a href=\"http://mockk.io/#extension-functions\" rel=\"noreferrer\">http://mockk.io/#extension-functions</a></p>\n"}, {"comments": [{"owner": {"reputation": 442, "user_id": 5193965, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ad9b411ecdcfdf17738b9228f3b752c1?s=128&d=identicon&r=PG", "display_name": "Luan Barbosa", "link": "https://stackoverflow.com/users/5193965/luan-barbosa"}, "edited": false, "score": 0, "creation_date": 1545987403, "post_id": 49819729, "comment_id": 94749780, "body": "Your response (&quot;After mockk 1.8.1&quot;) is more accurate than the chosen response. Thanks!"}, {"owner": {"reputation": 5208, "user_id": 4257162, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GKajj.jpg?s=128&g=1", "display_name": "LeoColman", "link": "https://stackoverflow.com/users/4257162/leocolman"}, "reply_to_user": {"reputation": 442, "user_id": 5193965, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ad9b411ecdcfdf17738b9228f3b752c1?s=128&d=identicon&r=PG", "display_name": "Luan Barbosa", "link": "https://stackoverflow.com/users/5193965/luan-barbosa"}, "edited": false, "score": 2, "creation_date": 1546013348, "post_id": 49819729, "comment_id": 94760018, "body": "The accepted answer was written before mockk 1.8.1, that&#39;s why this became more accurate"}, {"owner": {"reputation": 6199, "user_id": 2253682, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/skbWe.jpg?s=128&g=1", "display_name": "Adam Hurwitz", "link": "https://stackoverflow.com/users/2253682/adam-hurwitz"}, "edited": false, "score": 1, "creation_date": 1568349150, "post_id": 49819729, "comment_id": 102252894, "body": "This is an excellent solution to mock the <code>Crashlytics.log</code> and similar functions called from Java libraries when writing local unit tests!"}, {"owner": {"reputation": 468, "user_id": 2551186, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d8e7b2f423109d9ae8e00769543521b8?s=128&d=identicon&r=PG", "display_name": "JU5T1C3", "link": "https://stackoverflow.com/users/2551186/ju5t1c3"}, "edited": false, "score": 1, "creation_date": 1595339709, "post_id": 49819729, "comment_id": 111436142, "body": "@LeoColman how is your solution supposed to work when i immediately get an compile error on <code>Uri(&quot;http&quot;, &quot;test&quot;, &quot;path&quot;)</code> with messages &quot;Cannot create an instance of abstract class&quot; and &quot;Too many arguments for public/*package*/ constructor Uri() defined in android.net.Uri&quot;? I&#39;m using mockk 1.10.0"}, {"owner": {"reputation": 885, "user_id": 1658191, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c0e48c3d2047917aaca8c2aafe2b56a2?s=128&d=identicon&r=PG", "display_name": "prashantwosti", "link": "https://stackoverflow.com/users/1658191/prashantwosti"}, "edited": false, "score": 0, "creation_date": 1597632348, "post_id": 49819729, "comment_id": 112186410, "body": "The latest Uri is missing <code>Uri(&quot;http&quot;, &quot;test&quot;, &quot;path&quot;)</code> signature."}, {"owner": {"reputation": 3249, "user_id": 884113, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b7650bd1ea0e1c9d24c69071e135a11b?s=128&d=identicon&r=PG", "display_name": "jiahao", "link": "https://stackoverflow.com/users/884113/jiahao"}, "reply_to_user": {"reputation": 885, "user_id": 1658191, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c0e48c3d2047917aaca8c2aafe2b56a2?s=128&d=identicon&r=PG", "display_name": "prashantwosti", "link": "https://stackoverflow.com/users/1658191/prashantwosti"}, "edited": false, "score": 0, "creation_date": 1607320335, "post_id": 49819729, "comment_id": 115225175, "body": "@prashantwosti Just use val uriMock = mockk&lt;Uri&gt;()"}], "tags": [], "owner": {"reputation": 5208, "user_id": 4257162, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GKajj.jpg?s=128&g=1", "display_name": "LeoColman", "link": "https://stackoverflow.com/users/4257162/leocolman"}, "is_accepted": true, "score": 58, "last_activity_date": 1546013408, "last_edit_date": 1546013408, "creation_date": 1523631049, "answer_id": 49819729, "question_id": 49762409, "link": "https://stackoverflow.com/questions/49762409/mock-static-java-methods-using-mockk/49819729#49819729", "title": "Mock static java methods using Mockk", "body": "<p>In addition to oleksiyp answer:</p>\n\n<h2>After mockk 1.8.1:</h2>\n\n<p>Mockk version 1.8.1 deprecated the solution below. After that version you should do:</p>\n\n<pre><code>@Before\nfun mockAllUriInteractions() {\n    mockkStatic(Uri::class)\n    every { Uri.parse(\"http://test/path\") } returns Uri(\"http\", \"test\", \"path\")\n}\n</code></pre>\n\n<p><code>mockkStatic</code> will be cleared everytime it's called, so you don't need to unmock it anymore</p>\n\n<hr>\n\n<p><strong>DEPRECATED:</strong></p>\n\n<p>If you need that mocked behaviour to always be there, not only in a single test case, you can mock it using <code>@Before</code> and <code>@After</code>:</p>\n\n<pre><code>@Before\nfun mockAllUriInteractions() {\n    staticMockk&lt;Uri&gt;().mock()\n    every { Uri.parse(\"http://test/path\") } returns Uri(\"http\", \"test\", \"path\")    //This line can also be in any @Test case\n}\n\n@After\nfun unmockAllUriInteractions() {\n    staticMockk&lt;Uri&gt;().unmock()\n}\n</code></pre>\n\n<p>This way, if you expect more pieces of your class to use the Uri class, you may mock it in a single place, instead of polluting your code with <code>.use</code> everywhere.</p>\n"}, {"tags": [], "owner": {"reputation": 1334, "user_id": 7913860, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fmBO9HxM9gE/AAAAAAAAAAI/AAAAAAAAAIk/3WWLmUfxnBo/photo.jpg?sz=128", "display_name": "Danilo Lemes", "link": "https://stackoverflow.com/users/7913860/danilo-lemes"}, "is_accepted": false, "score": 2, "last_activity_date": 1600112131, "creation_date": 1600112131, "answer_id": 63890812, "question_id": 49762409, "link": "https://stackoverflow.com/questions/49762409/mock-static-java-methods-using-mockk/63890812#63890812", "title": "Mock static java methods using Mockk", "body": "<p>Additionally to the accepted answer:</p>\n<p>You can't create an <code>Uri</code> like that, you gonna have to mock the Uri instance as well. Something like:</p>\n<pre><code>private val mockUri = mockk&lt;Uri&gt;()\n\n@Before\nfun mockAllUriInteractions() {\n    mockkStatic(Uri::class)\n    every { Uri.parse(&quot;http://test/path&quot;) } returns mockUri\n    // or just every { Uri.parse(&quot;http://test/path&quot;) } returns mockk&lt;Uri&gt;()\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 15331185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec1fe68cb2bece826ab52fb6869be775?s=128&d=identicon&r=PG&f=1", "display_name": "Tomas Rohovsky", "link": "https://stackoverflow.com/users/15331185/tomas-rohovsky"}, "is_accepted": false, "score": 4, "last_activity_date": 1614947453, "last_edit_date": 1614947453, "creation_date": 1614876553, "answer_id": 66479439, "question_id": 49762409, "link": "https://stackoverflow.com/questions/49762409/mock-static-java-methods-using-mockk/66479439#66479439", "title": "Mock static java methods using Mockk", "body": "<h1>Beware</h1>\n<p>If you call <code>mockkSatic()</code> without a block, do not forget to call <code>unmockkStatic()</code> after the mocked method is called. The method is not unmocked automatically and you will still get the mocked value even in different test classes which do not call <code>mockkStatic()</code>, but use the static method.</p>\n<p>Another option is to execute the mocked method inside a block, then it will be automatically unmocked:</p>\n<pre><code>mockkStatic(Uri::class) {\n    every { Uri.parse(&quot;http://test/path&quot;) } returns Uri(&quot;http&quot;, &quot;test&quot;, &quot;path&quot;)\n    val uri = Uri.parse(&quot;http://test/path&quot;)\n}\n\n</code></pre>\n"}], "owner": {"reputation": 1161, "user_id": 971436, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/100000443234558/picture?type=large", "display_name": "Andrzej Sawoniewicz", "link": "https://stackoverflow.com/users/971436/andrzej-sawoniewicz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21660, "favorite_count": 2, "accepted_answer_id": 49819729, "answer_count": 4, "score": 33, "last_activity_date": 1614947453, "creation_date": 1523392294, "question_id": 49762409, "link": "https://stackoverflow.com/questions/49762409/mock-static-java-methods-using-mockk", "title": "Mock static java methods using Mockk", "body": "<p>We are currently working with java with kotlin project, slowly migrating the whole code to the latter.</p>\n\n<p>Is it possible to mock static methods like <code>Uri.parse()</code> using Mockk?</p>\n\n<p>How would the sample code look like?</p>\n"}, {"tags": ["kotlin", "rx-java2", "coroutine", "kotlin-coroutines"], "answers": [{"comments": [{"owner": {"reputation": 2989, "user_id": 4751657, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-p4iyEZ9SjXU/AAAAAAAAAAI/AAAAAAAAABg/BUQVK9rJJuk/photo.jpg?sz=128", "display_name": "Nikolay Kulachenko", "link": "https://stackoverflow.com/users/4751657/nikolay-kulachenko"}, "edited": false, "score": 0, "creation_date": 1523397216, "post_id": 49762498, "comment_id": 86542427, "body": "The approach with <i>suspending functions</i> looks better indeed. Thank you for the informative answer"}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "reply_to_user": {"reputation": 2989, "user_id": 4751657, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-p4iyEZ9SjXU/AAAAAAAAAAI/AAAAAAAAABg/BUQVK9rJJuk/photo.jpg?sz=128", "display_name": "Nikolay Kulachenko", "link": "https://stackoverflow.com/users/4751657/nikolay-kulachenko"}, "edited": false, "score": 1, "creation_date": 1523428748, "post_id": 49762498, "comment_id": 86551413, "body": "@NikolayKulachenko You can also use <a href=\"https://github.com/gildor/kotlin-coroutines-retrofit\" rel=\"nofollow noreferrer\">github.com/gildor/kotlin-coroutines-retrofit</a> which already has this extension (and <a href=\"https://github.com/JakeWharton/retrofit2-kotlin-coroutines-adapter\" rel=\"nofollow noreferrer\">github.com/JakeWharton/retrofit2-kotlin-coroutines-adapter</a> for going the other way and using <code>Deferred</code> directly in the Retrofit API)."}, {"owner": {"reputation": 2989, "user_id": 4751657, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-p4iyEZ9SjXU/AAAAAAAAAAI/AAAAAAAAABg/BUQVK9rJJuk/photo.jpg?sz=128", "display_name": "Nikolay Kulachenko", "link": "https://stackoverflow.com/users/4751657/nikolay-kulachenko"}, "reply_to_user": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1523433662, "post_id": 49762498, "comment_id": 86554168, "body": "@AlexeyRomanov They are both neat and lightweight libraries. But I don&#39;t want to pull any when I can just write a couple of extention functions instead. Or grab them from the source :)"}], "tags": [], "owner": {"reputation": 20308, "user_id": 1051598, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f9c354e780ce562daea0e21b99bfdc0d?s=128&d=identicon&r=PG", "display_name": "Roman  Elizarov", "link": "https://stackoverflow.com/users/1051598/roman-elizarov"}, "is_accepted": true, "score": 23, "last_activity_date": 1523393080, "last_edit_date": 1523393080, "creation_date": 1523392670, "answer_id": 49762498, "question_id": 49762153, "link": "https://stackoverflow.com/questions/49762153/modify-the-deferred-result/49762498#49762498", "title": "Modify the Deferred result", "body": "<p>If you follow <em>async style</em> of programming, that is writing functions that return <code>Deferred&lt;T&gt;</code>, then you can define <em>async function</em> <code>getDummyAge</code> like this:</p>\n\n<pre><code>fun getDummyAge(): Deferred&lt;Int&gt; = async { getDummy().await().age }\n</code></pre>\n\n<p>However, this style of programming is generally not recommend in Kotlin. The idiomatic Kotlin approach is to define a <em>suspending extension function</em> <code>Call&lt;T&gt;.await()</code> with the following signature:</p>\n\n<pre><code>suspend fun &lt;T&gt; Call&lt;T&gt;.await(): T = ... // more on it later\n</code></pre>\n\n<p>and use it to write <em>suspending function</em> <code>getDummy</code> that returns a result of <code>Dummy</code> type <em>directly</em> without wrapping it into a deferred:</p>\n\n<pre><code>suspend fun getDummy(): Dummy = api.getDummy().await()\n</code></pre>\n\n<p>In this case you can trivially write <em>suspending function</em> <code>getDummyAge</code>:</p>\n\n<pre><code>suspend fun getDummyAge(): Int = getDummy().age\n</code></pre>\n\n<p>For Retrofit calls you can implement <code>await</code> extension like this:</p>\n\n<pre><code>suspend fun &lt;T&gt; Call&lt;T&gt;.await(): T = suspendCancellableCoroutine { cont -&gt;\n    cont.invokeOnCompletion { cancel() }\n    enqueue(object : Callback&lt;T&gt; {\n        override fun onFailure(call: Call&lt;T&gt;?, t: Throwable) {\n            cont.resumeWithException(t)\n        }\n\n        override fun onResponse(call: Call&lt;T&gt;?, response: Response&lt;T&gt;) {\n            if (response.isSuccessful) {\n                cont.resume(response.body()!!)\n            } else {\n                cont.resumeWithException(HttpException(response))\n            }\n        }\n    })\n}\n</code></pre>\n\n<p>If you want to learn more on the differences in style between async and suspending functions, then I'd suggest to watch <a href=\"https://www.youtube.com/watch?v=_hfBv0a09Jc\" rel=\"noreferrer\">Introduction to Coroutines</a> from KotlinConf 2017. If you prefer a short read, then <a href=\"https://github.com/Kotlin/kotlin-coroutines/blob/master/kotlin-coroutines-informal.md#asynchronous-programming-styles\" rel=\"noreferrer\">this section from the design document</a> offers some insight, too.</p>\n"}], "owner": {"reputation": 2989, "user_id": 4751657, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-p4iyEZ9SjXU/AAAAAAAAAAI/AAAAAAAAABg/BUQVK9rJJuk/photo.jpg?sz=128", "display_name": "Nikolay Kulachenko", "link": "https://stackoverflow.com/users/4751657/nikolay-kulachenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4069, "favorite_count": 5, "accepted_answer_id": 49762498, "answer_count": 1, "score": 10, "last_activity_date": 1552981682, "creation_date": 1523391103, "last_edit_date": 1552981682, "question_id": 49762153, "link": "https://stackoverflow.com/questions/49762153/modify-the-deferred-result", "title": "Modify the Deferred result", "body": "<p>Given an API (implemented by <a href=\"http://square.github.io/retrofit/\" rel=\"noreferrer\">Retrofit</a>) that returns a model. I wrap an old fashioned <a href=\"https://square.github.io/retrofit/2.x/retrofit/retrofit2/Call.html\" rel=\"noreferrer\">Call</a> into a <code>Deferred</code> using the extention function:</p>\n\n<pre><code>fun &lt;T&gt; Call&lt;T&gt;.toDeferred(): Deferred&lt;T&gt; {\n    val deferred = CompletableDeferred&lt;T&gt;()\n\n    // cancel request as well\n    deferred.invokeOnCompletion {\n        if (deferred.isCancelled) {\n            cancel()\n        }\n    }\n\n    enqueue(object : Callback&lt;T&gt; {\n        override fun onFailure(call: Call&lt;T&gt;?, t: Throwable) {\n            deferred.completeExceptionally(t)\n        }\n\n        override fun onResponse(call: Call&lt;T&gt;?, response: Response&lt;T&gt;) {\n            if (response.isSuccessful) {\n                deferred.complete(response.body()!!)\n            } else {\n                deferred.completeExceptionally(HttpException(response))\n            }\n        }\n    })\n\n    return deferred\n}\n</code></pre>\n\n<p>Now I can get my model like this:</p>\n\n<pre><code>data class Dummy(val name: String, val age: Int)\n\nfun getDummy(): Deferred&lt;Dummy&gt; = api.getDummy().toDeferred()\n</code></pre>\n\n<p>But how can I <em>modify</em> the object inside the <code>Deferred</code> and return a <code>Deferred</code>:</p>\n\n<pre><code>fun getDummyAge(): Deferred&lt;Int&gt; {\n    // return getDummy().age\n}\n</code></pre>\n\n<p>I'm new to coroutines so may be this is not how the things get done here. Assuming I'm an <a href=\"https://github.com/ReactiveX/RxJava\" rel=\"noreferrer\">RxJava</a> fan I'd implement this case like:</p>\n\n<pre><code>fun getDummy(): Single&lt;Dummy&gt; = api.getDummy().toSingle()\n\nfun getDummyAge(): Single&lt;Int&gt; = getDummy().map { it.age }\n</code></pre>\n\n<p>So should I try to return a <code>Deferred</code> from the <code>getDummyAge</code> function? Or may be it's better to declare a <code>suspended fun</code> whenever possible and call <code>deferred.await()</code> on all my api's methods?</p>\n"}, {"tags": ["intellij-idea", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 6541172, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9317a0bbf7a24eea514545e7dbb4444d?s=128&d=identicon&r=PG&f=1", "display_name": "Programmer", "link": "https://stackoverflow.com/users/6541172/programmer"}, "edited": false, "score": 0, "creation_date": 1523432784, "post_id": 49768221, "comment_id": 86553671, "body": "That\u2018s what i was afraid of :("}], "tags": [], "owner": {"reputation": 14824, "user_id": 197205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0261c3de93c03cddc8880cc8ebe64594?s=128&d=identicon&r=PG", "display_name": "Peter Gromov", "link": "https://stackoverflow.com/users/197205/peter-gromov"}, "is_accepted": true, "score": 2, "last_activity_date": 1523429029, "creation_date": 1523429029, "answer_id": 49768221, "question_id": 49761510, "link": "https://stackoverflow.com/questions/49761510/intellij-completion-suggestions-order/49768221#49768221", "title": "IntelliJ - completion suggestions order", "body": "<p>Sorry, it appears you can't reconfigure the IDE or Kotlin plugin in this way. You can file a feature suggestion for Kotlin plugin, but I believe there are cases when variables are preferred over same-named methods, so just reordering them would break someone else's habits, so it's tricky.</p>\n\n<p>You can consider making the variables private (so they won't be shown in the completion list at all) or selecting them and then typing an opening parenthesis manually.</p>\n"}], "owner": {"reputation": 79, "user_id": 6541172, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9317a0bbf7a24eea514545e7dbb4444d?s=128&d=identicon&r=PG&f=1", "display_name": "Programmer", "link": "https://stackoverflow.com/users/6541172/programmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 49768221, "answer_count": 1, "score": 1, "last_activity_date": 1523429029, "creation_date": 1523388424, "last_edit_date": 1523409557, "question_id": 49761510, "link": "https://stackoverflow.com/questions/49761510/intellij-completion-suggestions-order", "title": "IntelliJ - completion suggestions order", "body": "<p>I'm wondering if there is a way to let IDE suggest methods before variables?\nWhen writing code like this it's a pain to select methods yourself (builder class example)</p>\n\n<p>Variable example:</p>\n\n<p><code>\n    var message = \"message\"\n        private set\n</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/eTdGj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eTdGj.png\" alt=\"enter image description here\"></a></p>\n\n<p>Thank you</p>\n"}, {"tags": ["java", "android", "android-activity", "kotlin", "toolbar"], "comments": [{"owner": {"reputation": 10844, "user_id": 7765139, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1JCJG0Q4b8I/AAAAAAAAAAI/AAAAAAAAB1w/2ghArTJ7KEs/photo.jpg?sz=128", "display_name": "Levi Moreira", "link": "https://stackoverflow.com/users/7765139/levi-moreira"}, "edited": false, "score": 0, "creation_date": 1523388416, "post_id": 49761447, "comment_id": 86538348, "body": "did you check this <a href=\"https://stackoverflow.com/questions/6790508/how-to-change-android-overflow-menu-icon\" title=\"how to change android overflow menu icon\">stackoverflow.com/questions/6790508/&hellip;</a>"}, {"owner": {"reputation": 970, "user_id": 6435361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a118809ef33688f0f93d344beda5ea5f?s=128&d=identicon&r=PG", "display_name": "Nishchal", "link": "https://stackoverflow.com/users/6435361/nishchal"}, "edited": false, "score": 0, "creation_date": 1523968540, "post_id": 49761447, "comment_id": 86772172, "body": "Can you paste your code, So that I can check"}], "answers": [{"comments": [{"owner": {"reputation": 2767, "user_id": 2290950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8iIm5.png?s=128&g=1", "display_name": "Viktor Yakunin", "link": "https://stackoverflow.com/users/2290950/viktor-yakunin"}, "edited": false, "score": 0, "creation_date": 1523391378, "post_id": 49761560, "comment_id": 86539788, "body": "why did you add new answer, just update (edit) previous one"}, {"owner": {"reputation": 519, "user_id": 5507535, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/750b8b44a07f907a1a53f152acb509fe?s=128&d=identicon&r=PG&f=1", "display_name": "user5507535", "link": "https://stackoverflow.com/users/5507535/user5507535"}, "edited": false, "score": 3, "creation_date": 1523635054, "post_id": 49761560, "comment_id": 86657032, "body": "But this returns an ActionBar instead of ToolBar."}], "tags": [], "owner": {"reputation": 32, "user_id": 9340544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73477e34ea0108d0c748bd66a0b7266?s=128&d=identicon&r=PG", "display_name": "user9340544", "link": "https://stackoverflow.com/users/9340544/user9340544"}, "is_accepted": false, "score": -2, "last_activity_date": 1523388608, "creation_date": 1523388608, "answer_id": 49761560, "question_id": 49761447, "link": "https://stackoverflow.com/questions/49761447/how-do-i-access-the-default-toolbar-from-an-activity-in-android/49761560#49761560", "title": "How do I access the default ToolBar from an Activity in Android?", "body": "<p>you can get default toolbar from AppCompatActivity </p>\n\n<p>getSupportActionBar();</p>\n"}, {"tags": [], "owner": {"reputation": 32, "user_id": 9340544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73477e34ea0108d0c748bd66a0b7266?s=128&d=identicon&r=PG", "display_name": "user9340544", "link": "https://stackoverflow.com/users/9340544/user9340544"}, "is_accepted": false, "score": -3, "last_activity_date": 1523434864, "last_edit_date": 1523434864, "creation_date": 1523388864, "answer_id": 49761619, "question_id": 49761447, "link": "https://stackoverflow.com/questions/49761447/how-do-i-access-the-default-toolbar-from-an-activity-in-android/49761619#49761619", "title": "How do I access the default ToolBar from an Activity in Android?", "body": "<p>create menu file using xml and place it in res/menu folder</p>\n\n<pre><code>onCreateOptionsMenu(Menu menu) {\n    getMenuInflater().inflate(R.menu.your_menu, menu);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 519, "user_id": 5507535, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/750b8b44a07f907a1a53f152acb509fe?s=128&d=identicon&r=PG&f=1", "display_name": "user5507535", "link": "https://stackoverflow.com/users/5507535/user5507535"}, "edited": false, "score": 3, "creation_date": 1523635058, "post_id": 49761872, "comment_id": 86657034, "body": "But this returns an ActionBar instead of ToolBar."}], "tags": [], "owner": {"reputation": 4554, "user_id": 5670752, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3TSWf.jpg?s=128&g=1", "display_name": "Taslim Oseni", "link": "https://stackoverflow.com/users/5670752/taslim-oseni"}, "is_accepted": false, "score": 2, "last_activity_date": 1523390334, "last_edit_date": 1523390334, "creation_date": 1523389960, "answer_id": 49761872, "question_id": 49761447, "link": "https://stackoverflow.com/questions/49761447/how-do-i-access-the-default-toolbar-from-an-activity-in-android/49761872#49761872", "title": "How do I access the default ToolBar from an Activity in Android?", "body": "<p>Performing <strong>Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar)</strong> isn't expected to work because the ID does not explicitly exist. Every activity-Java class extends Activity (or its direct or indirect subclasses), you can use this to get the action bar (so to speak).</p>\n\n<p>If your java file extends AppCompatActivity, you can use <code>getSupportActionBar()</code> to summon the ActionBar.</p>\n\n<p>Java files that extend Activity require <code>getActionBar()</code> to summon the toolbar.</p>\n\n<p>You can thereafter perform operations like changing the displayed text/title, background drawable, amongst other tasks. </p>\n\n<p>To learn more about getting the action bar, check out <a href=\"https://developer.android.com/reference/android/app/ActionBar.html\" rel=\"nofollow noreferrer\">this link</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 519, "user_id": 5507535, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/750b8b44a07f907a1a53f152acb509fe?s=128&d=identicon&r=PG&f=1", "display_name": "user5507535", "link": "https://stackoverflow.com/users/5507535/user5507535"}, "edited": false, "score": 3, "creation_date": 1523635019, "post_id": 49767675, "comment_id": 86657006, "body": "But this returns an ActionBar instead of ToolBar."}], "tags": [], "owner": {"reputation": 7362, "user_id": 972671, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/d60679aa1bf8f8400d3953e7dc78d2db?s=128&d=identicon&r=PG", "display_name": "Kingfisher Phuoc", "link": "https://stackoverflow.com/users/972671/kingfisher-phuoc"}, "is_accepted": true, "score": 6, "last_activity_date": 1523426944, "creation_date": 1523426944, "answer_id": 49767675, "question_id": 49761447, "link": "https://stackoverflow.com/questions/49761447/how-do-i-access-the-default-toolbar-from-an-activity-in-android/49767675#49767675", "title": "How do I access the default ToolBar from an Activity in Android?", "body": "<p>If you're using <code>AppcompatActivity</code>, you should use <code>SupportActionBar</code> like this:</p>\n\n<pre><code>supportActionBar?.title = \"My Activity title\"\n</code></pre>\n\n<p>this piece of code: <code>Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);</code> only works when you've added a <code>Toolbar</code> with <code>toolbar</code> id in <code>xml</code>. even if you did it, you should <code>setSupportActionBar(yourToolBar)</code> before doing anything. Then use <code>supportActionBar</code> directly instead.</p>\n"}], "owner": {"reputation": 519, "user_id": 5507535, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/750b8b44a07f907a1a53f152acb509fe?s=128&d=identicon&r=PG&f=1", "display_name": "user5507535", "link": "https://stackoverflow.com/users/5507535/user5507535"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5003, "favorite_count": 0, "accepted_answer_id": 49767675, "answer_count": 4, "score": 7, "last_activity_date": 1523434864, "creation_date": 1523388181, "question_id": 49761447, "link": "https://stackoverflow.com/questions/49761447/how-do-i-access-the-default-toolbar-from-an-activity-in-android", "title": "How do I access the default ToolBar from an Activity in Android?", "body": "<p>I'm trying to access the default <a href=\"https://developer.android.com/reference/android/support/v7/widget/Toolbar.html\" rel=\"noreferrer\">ToolBar</a> from within and Activity's <strong>onCreateOptionsMenu</strong> function to change the Overflow menu icon (three dots icon). I want to use the <strong>setOverflowIcon</strong> method provided by this class.</p>\n\n<p>I have read the official documentation, posts on StackOverflow and other websites and everything fails.</p>\n\n<p>I tried for example <strong>Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);</strong> but I get an error that says that <strong>R.id.toolbar</strong> doesn't exist.</p>\n"}, {"tags": ["spring", "kotlin", "spring-jdbc"], "comments": [{"owner": {"reputation": 1619, "user_id": 3154987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c9cd7a6d007668d3beae431e9302d72?s=128&d=identicon&r=PG&f=1", "display_name": "BrianC", "link": "https://stackoverflow.com/users/3154987/brianc"}, "edited": false, "score": 0, "creation_date": 1523396291, "post_id": 49760542, "comment_id": 86542037, "body": "Uhg.   I agree with you.  NULL is a valid possible situation and condition but the new hipster trend is that nothing should ever be or return NULL ever.   No matter how much extra boiler plate code that creates for crap like the Optional class in Java and what ever Kotlin&#39;s equivalent."}], "answers": [{"comments": [{"owner": {"reputation": 5548, "user_id": 2272004, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/5a4a49705088dabef2989f0008cf405f?s=128&d=identicon&r=PG", "display_name": "greyfox", "link": "https://stackoverflow.com/users/2272004/greyfox"}, "edited": false, "score": 0, "creation_date": 1523453742, "post_id": 49763854, "comment_id": 86568200, "body": "That is an excellent point about using map and that is probably more of the Kotlin way of doing things. I do agree though that the MapSqlParameterSource API for Kotlin is a bug. Wonder if its been reported?"}, {"owner": {"reputation": 243, "user_id": 5402266, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207137987429565/picture?type=large", "display_name": "Florian Tavares", "link": "https://stackoverflow.com/users/5402266/florian-tavares"}, "reply_to_user": {"reputation": 5548, "user_id": 2272004, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/5a4a49705088dabef2989f0008cf405f?s=128&d=identicon&r=PG", "display_name": "greyfox", "link": "https://stackoverflow.com/users/2272004/greyfox"}, "edited": false, "score": 0, "creation_date": 1539851922, "post_id": 49763854, "comment_id": 92653788, "body": "@greyfox. This has been fixed now : <a href=\"https://github.com/spring-projects/spring-framework/commit/d9c63182d90eafaa98d950bf2ae748a050eb7bd8#diff-e638e078242d03891c1357de938b4327\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-framework/commit/&hellip;</a>"}], "tags": [], "owner": {"reputation": 26172, "user_id": 49746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IAAg.jpg?s=128&g=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/49746/todd"}, "is_accepted": true, "score": 3, "last_activity_date": 1523401004, "last_edit_date": 1523401004, "creation_date": 1523399965, "answer_id": 49763854, "question_id": 49760542, "link": "https://stackoverflow.com/questions/49760542/spring-namedparameterjdbctemplate-cannot-insert-null-using-kotlin/49763854#49763854", "title": "Spring NamedParameterJdbcTemplate Cannot Insert NULL using Kotlin", "body": "<p>The reason <code>MapSqlParameterSource</code> exists is because Java provides no elegant way to create maps of things. Since we can use <code>mapOf()</code> in Kotlin, we probably don't need <code>MapSqlParameterSource</code> at all.</p>\n\n<p>If it were me, I would prefer to just use <code>mapOf()</code> and avoid <code>MapSqlParameterSource</code> entirely:</p>\n\n<pre><code>val params = mapOf(\n    \"id\" to UUID.randomUUID(),\n    \"questionId\" to ans.questionId,\n    \"answer\" to ans.answer,\n    \"surveyId\" to answer.surveyId,\n    \"parentQuestionId\" to ans.parentId,\n    \"timeTaken\" to ans.timeTaken\n)\njdbcTemplate.update(query, params)\n</code></pre>\n\n<p>However, I agree that this seems like an oversight in the API. It was probably introduced when the nullability annotations were put in to make life easier for Kotlin users.</p>\n\n<p>This seemed to compile for me, but I only tried it in the IDE, and didn't run it:</p>\n\n<pre><code>MapSqlParameterSource()\n   .addValue(\"notNullable\", myObject.notNulableValue)\n   .addValues(mapOf(\"nullable\" to myObject.nullableValue))\n</code></pre>\n\n<p>This works because the <code>addValues</code> function takes a <code>Map&lt;String, ?&gt;</code> (which, interestingly, is @Nullable). </p>\n\n<p>I'm guessing this is a bug, inadvertently introduced in <a href=\"https://github.com/spring-projects/spring-framework/commit/87598f48e41d483745aba56cbf4e998c6f6d680c\" rel=\"nofollow noreferrer\">this commit</a>. But again, we have <code>mapOf()</code>, and probably don't need this.</p>\n"}], "owner": {"reputation": 5548, "user_id": 2272004, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/5a4a49705088dabef2989f0008cf405f?s=128&d=identicon&r=PG", "display_name": "greyfox", "link": "https://stackoverflow.com/users/2272004/greyfox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1032, "favorite_count": 0, "accepted_answer_id": 49763854, "answer_count": 1, "score": 4, "last_activity_date": 1523401004, "creation_date": 1523384448, "question_id": 49760542, "link": "https://stackoverflow.com/questions/49760542/spring-namedparameterjdbctemplate-cannot-insert-null-using-kotlin", "title": "Spring NamedParameterJdbcTemplate Cannot Insert NULL using Kotlin", "body": "<p>I am using Kotlin with Spring Boot 2. I am just doing a simple insert with a field that may, or may not be null. However in Kotlin this doesn't appear to be possible using MapSqlParameterSource because the .addValue methods do not accept null or nullable types. This is rather unusual because insert NULL can be a valid use case. This was very straight forward and easy with Java and Spring Boot in the past. Is there a way to get around this, I really don't want to jump through hoops to do something that is simple and straight forward.</p>\n\n<pre><code>@Transactional\nfun saveSubmittedAnswer(answer: AnswerSubmissionRequest) {\n\n    val query = \"\"\"INSERT INTO dab.SubmittedAnswer (Id, QuestionId, Answer, SurveyId, ParentQuestionId, TimeTaken\n        | VALUES (:id, :questionId, :answer, :surveyId, :parentQuestionId, :timeTaken)\n    \"\"\".trimMargin()\n\n    answer.answers.forEach { ans -&gt;\n        val params: MapSqlParameterSource = MapSqlParameterSource()\n                .addValue(\"id\", UUID.randomUUID())\n                .addValue(\"questionId\", ans.questionId)\n                .addValue(\"answer\", ans.answer)\n                .addValue(\"surveyId\", answer.surveyId)\n                //.addValue(\"parentQuestionId\", ans.parentId)\n                .addValue(\"timeTaken\", ans.timeTaken)\n\n        this.jdbcTemplate.update(query, params)\n    }\n}\n</code></pre>\n\n<p>All the methods require a non nullable type.</p>\n\n<p><a href=\"https://i.stack.imgur.com/2dlwz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2dlwz.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["java", "kotlin", "documentation", "javadoc"], "comments": [{"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1523428371, "post_id": 49760413, "comment_id": 86551227, "body": "Are <code>playerName</code> and <code>playerScore</code> declared <i>inside</i> the class or as its parameters as in the example?"}, {"owner": {"reputation": 1232, "user_id": 5841827, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WOjIm.png?s=128&g=1", "display_name": "Marcel", "link": "https://stackoverflow.com/users/5841827/marcel"}, "reply_to_user": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1523441287, "post_id": 49760413, "comment_id": 86559395, "body": "class Player(var playerName: String, var playerScore: Int) ... but i guess @yole&#39;s answer is sufficient, in case it is correct, which i&#39;ll test later."}], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 5, "last_activity_date": 1523428212, "creation_date": 1523428212, "answer_id": 49768004, "question_id": 49760413, "link": "https://stackoverflow.com/questions/49760413/documenting-class-properties-in-kotlin/49768004#49768004", "title": "Documenting Class Properties in Kotlin", "body": "<p>Just as IntelliJ for Java doesn't show you javadocs for all the fields of a class when you invoke the \"Show quick documentation\" action on the class, IntelliJ for Kotlin doesn't show docs for all properties as part of the class quickdoc. The docs you've added in <code>@property</code> tags will be shown if you invoke the \"Show quick documentation\" action on the property.</p>\n"}], "owner": {"reputation": 1232, "user_id": 5841827, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WOjIm.png?s=128&g=1", "display_name": "Marcel", "link": "https://stackoverflow.com/users/5841827/marcel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 664, "favorite_count": 0, "accepted_answer_id": 49768004, "answer_count": 1, "score": 1, "last_activity_date": 1526985182, "creation_date": 1523383990, "last_edit_date": 1526985182, "question_id": 49760413, "link": "https://stackoverflow.com/questions/49760413/documenting-class-properties-in-kotlin", "title": "Documenting Class Properties in Kotlin", "body": "<p>Since I switched from Java to Kotlin I had to rewrite my docs. Kotlin has its own documentation format or furthermore it extends normal javadocs as far as I see it. I have checked <a href=\"https://kotlinlang.org/docs/reference/kotlin-doc.html#kdoc-syntax\" rel=\"nofollow noreferrer\">the official documentation</a> which states that there is a <code>property</code> tag which allows you to document the classes properties.</p>\n\n<p>If I have a kdoc looking like this:</p>\n\n<pre><code>/**\n * Tablemodel for the Players of a server, only holds two properties:\n *\n *  * Name\n *  * Score\n *\n * @author marcel\n * @since Jan 10, 2018\n * @property playerName Ingame name of the player\n * @property playerScore Ingame score of the player\n */\n</code></pre>\n\n<p>both properties are not part of the rendered kdoc in IntelliJ.</p>\n\n<p>If I move the two properties above <code>author</code> and <code>since</code>, those will also not show. I don't quite understand why. Is it IntelliJ that is lacking proper kdoc support?</p>\n"}, {"tags": ["android", "kotlin", "okhttp", "appauth"], "comments": [{"owner": {"reputation": 40344, "user_id": 1796579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b14d3685f0765c738fd90c7ec71fa9ba?s=128&d=identicon&r=PG", "display_name": "Henry", "link": "https://stackoverflow.com/users/1796579/henry"}, "edited": false, "score": 1, "creation_date": 1523380255, "post_id": 49759265, "comment_id": 86533723, "body": "Fetch the value from the result before you call <code>runOnUiThread</code>."}], "answers": [{"tags": [], "owner": {"reputation": 7365, "user_id": 4252352, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/6nZz0.jpg?s=128&g=1", "display_name": "Mark Keen", "link": "https://stackoverflow.com/users/4252352/mark-keen"}, "is_accepted": true, "score": 2, "last_activity_date": 1523436539, "last_edit_date": 1523436539, "creation_date": 1523381024, "answer_id": 49759622, "question_id": 49759265, "link": "https://stackoverflow.com/questions/49759265/networkonmainthreadexception-when-trying-to-run-okhttp-response-code-on-ui-threa/49759622#49759622", "title": "NetworkOnMainThreadException when trying to run okhttp response code on UI thread", "body": "<p>This should work:</p>\n\n<pre><code>override fun onResponse(call: Call?, response: Response?) {                           \n    val body = response?.body()?.string()\n    this@MainActivity.runOnUiThread { textView.text = body }              \n}\n</code></pre>\n\n<p>You shouldn't access the <code>response</code> on the UI thread as it is considered a IO operation.</p>\n"}], "owner": {"reputation": 2401, "user_id": 100822, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/022eb4a3f3b256ca6224d6800aec9541?s=128&d=identicon&r=PG", "display_name": "Sebastien", "link": "https://stackoverflow.com/users/100822/sebastien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1237, "favorite_count": 0, "closed_date": 1523423694, "accepted_answer_id": 49759622, "answer_count": 1, "score": -3, "last_activity_date": 1616948014, "creation_date": 1523379818, "last_edit_date": 1616948014, "question_id": 49759265, "link": "https://stackoverflow.com/questions/49759265/networkonmainthreadexception-when-trying-to-run-okhttp-response-code-on-ui-threa", "closed_reason": "Duplicate", "title": "NetworkOnMainThreadException when trying to run okhttp response code on UI thread", "body": "<p>In my Android app, I'm using <strong>AppAuth</strong> to authenticate the user with an OpenID connect endpoint, so I'm doing a bunch of asynchronous calls and when the last one returns, I'm using okhttp to get the final result and I want to show it in the UI of my activity, something like this:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>authService.performTokenRequest(\n    authResponse.createTokenExchangeRequest()\n) { tokenResponse: TokenResponse?, tokenException: AuthorizationException? -&gt;\n    if (tokenResponse != null) {                         \n        authState.performActionWithFreshTokens(authService) { accessToken, _, ex -&gt;\n            if (accessToken != null) {\n                val url = ...\n                val request = ...\n                http.newCall(request).enqueue(object: Callback {\n                    override fun onFailure(call: Call?, e: IOException?) {...}\n                    override fun onResponse(call: Call?, response: Response?) {\n                        if (response != null) {\n                            this@MainActivity.runOnUiThread {\n                                textView.text = response.body()!!.string()\n                            }\n                        }\n                    }\n                })\n            }\n        }\n    }\n}\n</code></pre>\n<p>But then on the line when I try to update my text view, I get the following exception:</p>\n<blockquote>\n<p>android.os.NetworkOnMainThreadException</p>\n</blockquote>\n<p>And when I try to remove the <code>runOnUiThread</code>, I'm getting another exception that says: &quot;Only the original thread that created a view hierarchy can touch its views&quot;</p>\n<p>I don't get it. What should I do?</p>\n"}, {"tags": ["java", "android", "android-studio", "kotlin"], "comments": [{"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 1, "creation_date": 1523372124, "post_id": 49756761, "comment_id": 86528618, "body": "<a href=\"https://developer.android.com/topic/instant-apps/index.html\" rel=\"nofollow noreferrer\">developer.android.com/topic/instant-apps/index.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 14571, "user_id": 1669996, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/89e5a1861e6429b8f5d3cc45900b98ae?s=128&d=identicon&r=PG", "display_name": "casillas", "link": "https://stackoverflow.com/users/1669996/casillas"}, "is_accepted": false, "score": 2, "last_activity_date": 1523372263, "creation_date": 1523372263, "answer_id": 49756897, "question_id": 49756761, "link": "https://stackoverflow.com/questions/49756761/what-are-the-benefits-of-checking-include-android-instant-app-support-checkbox/49756897#49756897", "title": "What Are The Benefits Of Checking &quot;include android instant app support&quot; CheckBox?", "body": "<p>Check the following url</p>\n\n<p><a href=\"https://developer.android.com/topic/instant-apps/prepare.html#app-links\" rel=\"nofollow noreferrer\">https://developer.android.com/topic/instant-apps/prepare.html#app-links</a></p>\n\n<blockquote>\n  <p>Both your instant and installable versions of your app must implement\n  the Android App Links feature introduced in Android 6.0. App Links\n  provide the primary mechanism for connecting URLs to discrete\n  activities within your app.</p>\n  \n  <p>Android Instant Apps uses URLs for all navigation. When a user taps a\n  link to your instant app, they go to a specific activity within your\n  app. If the link fails or the user taps the link on an unsupported\n  device, the browser opens and shows your website.</p>\n</blockquote>\n"}], "owner": {"reputation": 128, "user_id": 7306938, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-uwkLQtAWo4U/AAAAAAAAAAI/AAAAAAAAAGU/lUiZ283ekxI/photo.jpg?sz=128", "display_name": "Mohamed Elnady", "link": "https://stackoverflow.com/users/7306938/mohamed-elnady"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1053, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1523372263, "creation_date": 1523371948, "question_id": 49756761, "link": "https://stackoverflow.com/questions/49756761/what-are-the-benefits-of-checking-include-android-instant-app-support-checkbox", "title": "What Are The Benefits Of Checking &quot;include android instant app support&quot; CheckBox?", "body": "<p>When I Create Anew Project I Found Anew Feature Of Android Studio ,Which Is \"include android instant app support\" .\nThen I Wanna Know What Are The Benefits Of This Feature.</p>\n"}, {"tags": ["kotlin", "rx-java", "vert.x"], "answers": [{"comments": [{"owner": {"reputation": 4609, "user_id": 1699956, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oBr6e.jpg?s=128&g=1", "display_name": "Mangat Rai Modi", "link": "https://stackoverflow.com/users/1699956/mangat-rai-modi"}, "edited": false, "score": 1, "creation_date": 1523372185, "post_id": 49756734, "comment_id": 86528659, "body": "Thanks @akarnokd, for noticing another stupid mistake of mine."}], "tags": [], "owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "is_accepted": true, "score": 2, "last_activity_date": 1523371890, "creation_date": 1523371890, "answer_id": 49756734, "question_id": 49756399, "link": "https://stackoverflow.com/questions/49756399/vert-x-reactive-kafka-client-chaining-not-working-when-writing/49756734#49756734", "title": "Vert.x Reactive Kafka client: chaining not working when writing?", "body": "<p>It is important to read and post the stacktrace of errors so that the problem can be isolated. </p>\n\n<p>In this case, looks like you get the <code>IllegalArgumentException</code> from <code>create</code> and you don't get any <code>Single</code> because the relevant Kafka class <a href=\"https://github.com/jkreps/kafka-clients-prototype/blob/master/src/main/kafka/clients/producer/ProducerRecord.java#L27\" rel=\"nofollow noreferrer\">throws it</a>. <code>return kafkaProducer.rxWrite(record)</code> never executes at all and you practically crash the <code>flatMap</code>. <code>doOnError</code> never gets into play hence only the \"Error2\" is printed.</p>\n"}], "owner": {"reputation": 4609, "user_id": 1699956, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oBr6e.jpg?s=128&g=1", "display_name": "Mangat Rai Modi", "link": "https://stackoverflow.com/users/1699956/mangat-rai-modi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 49756734, "answer_count": 1, "score": 0, "last_activity_date": 1523371890, "creation_date": 1523371009, "question_id": 49756399, "link": "https://stackoverflow.com/questions/49756399/vert-x-reactive-kafka-client-chaining-not-working-when-writing", "title": "Vert.x Reactive Kafka client: chaining not working when writing?", "body": "<p>I am using <code>io.vertx.reactivex.kafka.client.producer.KafkaProducer</code> client. The client has a \n<code>rxWrite</code> function which returns <code>Single&lt;RecordMetadata&gt;</code>. However I need to log error if any, during write operation. It apparently is not getting executed.</p>\n\n<p>I have written following working example.</p>\n\n<p><strong>test():</strong> Function to test the chaining and logging</p>\n\n<pre><code>    fun test(): Single&lt;Int&gt; {\n    val data = Single.just(ArrayList&lt;String&gt;().apply {\n        add(\"Hello\")\n        add(\"World\")\n    })\n\n    data.flattenAsObservable&lt;String&gt; { list -&gt; list }\n        .flatMap { advertiser -&gt;\n       //does not work with writeKafka\n            writeError(advertiser).toObservable().doOnError({ println(\"Error $data\") })\n        }\n        .subscribe({ record -&gt; println(record) }, { e -&gt; println(\"Error2 $e\") })\n\n    return data.map { it.size }\n}\n</code></pre>\n\n<p><strong>writeKafka:</strong>  Writes the given given string into Kafka and returns Single</p>\n\n<pre><code>fun writeKafka(param: String): Single&lt;RecordMetadata&gt; {\n //null topic to produce IllegalArgumentException()\n    val record = KafkaProducerRecord.create(null, UUID.randomUUID().toString(), param)\n    return kafkaProducer.rxWrite(record)\n}\n</code></pre>\n\n<p><strong>writeError:</strong> Always return a single with error of same type</p>\n\n<pre><code>fun writeError(param: String): Single&lt;RecordMetadata&gt; {\n    return Single.error&lt;RecordMetadata&gt;(IllegalArgumentException())\n}\n</code></pre>\n\n<p>So when I call <code>writeKafka</code> It only prints <code>Error2</code> but if I use <code>writeError</code> it prints both <code>Error</code> and <code>Error2</code>. Looks like the single returned by <code>writeKafka</code> is still waiting for result, but then why even <code>Error2</code> is printed?</p>\n\n<p>I am pretty newbie in RxJava2, could somebody point out any error in that?</p>\n"}, {"tags": ["android", "firebase", "kotlin", "adapter", "dialogfragment"], "comments": [{"owner": {"reputation": 17304, "user_id": 3363481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o4HU5.png?s=128&g=1", "display_name": "earthw0rmjim", "link": "https://stackoverflow.com/users/3363481/earthw0rmjim"}, "edited": false, "score": 0, "creation_date": 1523376423, "post_id": 49756062, "comment_id": 86531476, "body": "Where do you define the <code>showDeleteCategoryDialog()</code> function? Inside the adapter?"}, {"owner": {"reputation": 591, "user_id": 7917159, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LxVNtQgqzcw/AAAAAAAAAAI/AAAAAAAAAJU/f7Wxh854Sjs/photo.jpg?sz=128", "display_name": "CEO tech4lifeapps", "link": "https://stackoverflow.com/users/7917159/ceo-tech4lifeapps"}, "reply_to_user": {"reputation": 17304, "user_id": 3363481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o4HU5.png?s=128&g=1", "display_name": "earthw0rmjim", "link": "https://stackoverflow.com/users/3363481/earthw0rmjim"}, "edited": false, "score": 0, "creation_date": 1523377561, "post_id": 49756062, "comment_id": 86532146, "body": "Yes, because I need to provide a value for categoryId, a String that I retrieve in the bind function of my CategoryHolder. The showDeleteCategoryDialog() function works fine when defined in MainActivity and provided with a &#39;fake&#39; categoryId."}], "answers": [{"comments": [{"owner": {"reputation": 591, "user_id": 7917159, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LxVNtQgqzcw/AAAAAAAAAAI/AAAAAAAAAJU/f7Wxh854Sjs/photo.jpg?sz=128", "display_name": "CEO tech4lifeapps", "link": "https://stackoverflow.com/users/7917159/ceo-tech4lifeapps"}, "edited": false, "score": 0, "creation_date": 1523374195, "post_id": 49756412, "comment_id": 86530036, "body": "This gives me an error in my onCreateViewHolder function: &quot;No value passed for parameter mListener&quot;"}, {"owner": {"reputation": 311, "user_id": 3976611, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4TU7I.jpg?s=128&g=1", "display_name": "Massita", "link": "https://stackoverflow.com/users/3976611/massita"}, "reply_to_user": {"reputation": 591, "user_id": 7917159, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LxVNtQgqzcw/AAAAAAAAAAI/AAAAAAAAAJU/f7Wxh854Sjs/photo.jpg?sz=128", "display_name": "CEO tech4lifeapps", "link": "https://stackoverflow.com/users/7917159/ceo-tech4lifeapps"}, "edited": false, "score": 0, "creation_date": 1523378337, "post_id": 49756412, "comment_id": 86532578, "body": "After implementing this listener in the MainActivity, you need to pass the activity as a new parameter on the ViewHolder constructor... Now you need to create your ViewHolder like <code>val holder = CategoryHolder(customView, category, listener)</code>"}, {"owner": {"reputation": 311, "user_id": 3976611, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4TU7I.jpg?s=128&g=1", "display_name": "Massita", "link": "https://stackoverflow.com/users/3976611/massita"}, "reply_to_user": {"reputation": 591, "user_id": 7917159, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LxVNtQgqzcw/AAAAAAAAAAI/AAAAAAAAAJU/f7Wxh854Sjs/photo.jpg?sz=128", "display_name": "CEO tech4lifeapps", "link": "https://stackoverflow.com/users/7917159/ceo-tech4lifeapps"}, "edited": false, "score": 0, "creation_date": 1523379951, "post_id": 49756412, "comment_id": 86533540, "body": "Now you need to pass the listener when creating the viewholder... <code>override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): CategoryHolder { return CategoryHolder(LayoutInflater.from(parent.context) .inflate(R.layout.category_row, parent, false), listener) } </code>  You can create this listener on your adapter and pass the listener to the ViewHolder when creating it"}, {"owner": {"reputation": 311, "user_id": 3976611, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4TU7I.jpg?s=128&g=1", "display_name": "Massita", "link": "https://stackoverflow.com/users/3976611/massita"}, "reply_to_user": {"reputation": 591, "user_id": 7917159, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LxVNtQgqzcw/AAAAAAAAAAI/AAAAAAAAAJU/f7Wxh854Sjs/photo.jpg?sz=128", "display_name": "CEO tech4lifeapps", "link": "https://stackoverflow.com/users/7917159/ceo-tech4lifeapps"}, "edited": false, "score": 0, "creation_date": 1523380725, "post_id": 49756412, "comment_id": 86534029, "body": "@CEOtech4lifeapps i&#39;ve updated my answer, is it easier now? :D"}, {"owner": {"reputation": 591, "user_id": 7917159, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LxVNtQgqzcw/AAAAAAAAAAI/AAAAAAAAAJU/f7Wxh854Sjs/photo.jpg?sz=128", "display_name": "CEO tech4lifeapps", "link": "https://stackoverflow.com/users/7917159/ceo-tech4lifeapps"}, "edited": false, "score": 0, "creation_date": 1523419594, "post_id": 49756412, "comment_id": 86548059, "body": "I&#39;m afraid, this does not help. My MainAdapter is of type FirebaseRecyclerAdapter that does not work on a list holding elements and categoryId is of type String, not Int."}], "tags": [], "owner": {"reputation": 311, "user_id": 3976611, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4TU7I.jpg?s=128&g=1", "display_name": "Massita", "link": "https://stackoverflow.com/users/3976611/massita"}, "is_accepted": false, "score": 0, "last_activity_date": 1523380683, "last_edit_date": 1523380683, "creation_date": 1523371032, "answer_id": 49756412, "question_id": 49756062, "link": "https://stackoverflow.com/questions/49756062/kotlin-how-do-i-call-a-dialogfragment-from-within-an-adapter-class/49756412#49756412", "title": "Kotlin: How do I call a DialogFragment from within an Adapter class?", "body": "<p>My recommendation is to create a callback to this action and implement this callback on your MainActivity and create the dialog direct on your activity.</p>\n\n<pre><code>interface ClickListener {\n    fun onLongClickListener(categoryId: Int)\n}\n</code></pre>\n\n<p>then</p>\n\n<pre><code>class CategoryHolder(val customView: View, var category: Category? = null, var mListener: ClickListener?)\n\n...\ncustomView.setOnLongClickListener({\n      mListener?.onLongClickListener(categoryId)\n      ...\n}\n</code></pre>\n\n<p>and on your MainActivity:</p>\n\n<pre><code> class MainActivity : AppCompatActivity, ClickListener {\n\n    override fun onLongClickListener(categoryId: Int) {\n     // Create your dialog\n    }\n\n\n    ...\n        /* when creating your adapter you need to pass the listener to\n         * adapter, so it can be used on your viewholder\n         * mElements are the category elements, 'this' is the impl of\n         * the adapter that was implemented here\n        */\n        mAdapter = CategoryAdapter(mElements, this)\n }\n</code></pre>\n\n<p>on your Adapter:</p>\n\n<pre><code>class CategoryAdapter(var mElements: List&lt;Category&gt;, var mListener: ClickListener) : RecyclerView.Adapter&lt;&gt; ...\n\n     // When creating your viewHolder\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): CategoryHolder {\n        return CategoryHolder(LayoutInflater.from(parent.context) \n            .inflate(R.layout.category_row, parent, false), listener)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7362, "user_id": 972671, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/d60679aa1bf8f8400d3953e7dc78d2db?s=128&d=identicon&r=PG", "display_name": "Kingfisher Phuoc", "link": "https://stackoverflow.com/users/972671/kingfisher-phuoc"}, "is_accepted": true, "score": 5, "last_activity_date": 1523427662, "creation_date": 1523427662, "answer_id": 49767849, "question_id": 49756062, "link": "https://stackoverflow.com/questions/49756062/kotlin-how-do-i-call-a-dialogfragment-from-within-an-adapter-class/49767849#49767849", "title": "Kotlin: How do I call a DialogFragment from within an Adapter class?", "body": "<p>You can not refer to your <code>MainActivity</code> like your code above. You have to cast the <code>context</code> of your <code>ViewHolder</code> as <code>MainActivity</code> before using it:</p>\n\n<pre><code>val activity =  itemView.context as? MainActivity\n// then you can show your dialog with activity?.supportFragmentManager\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 591, "user_id": 7917159, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LxVNtQgqzcw/AAAAAAAAAAI/AAAAAAAAAJU/f7Wxh854Sjs/photo.jpg?sz=128", "display_name": "CEO tech4lifeapps", "link": "https://stackoverflow.com/users/7917159/ceo-tech4lifeapps"}, "is_accepted": false, "score": 0, "last_activity_date": 1523435008, "creation_date": 1523435008, "answer_id": 49770086, "question_id": 49756062, "link": "https://stackoverflow.com/questions/49756062/kotlin-how-do-i-call-a-dialogfragment-from-within-an-adapter-class/49770086#49770086", "title": "Kotlin: How do I call a DialogFragment from within an Adapter class?", "body": "<p>Here is, in detail, how this was solved:</p>\n\n<ol>\n<li><p>In class CategoryHolder</p>\n\n<pre><code>customView.setOnLongClickListener(\n    {\n      showDeleteCategoryDialog(it, categoryId)\n      true\n    } \n)\n</code></pre></li>\n<li><p>In function showDeleteCategoryDialog</p>\n\n<pre><code>// Create an instance of a DeleteCategoryDialogFragment and show it\nfun showDeleteCategoryDialog(view: View, categoryId: String) {\n    val activity = itemView.context as? MainActivity\n    val dialog = DeleteCategoryDialogFragment.newInstance(categoryId)\n    dialog.show(activity?.supportFragmentManager, \"DeleteCategoryDialog\")\n}\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 591, "user_id": 7917159, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LxVNtQgqzcw/AAAAAAAAAAI/AAAAAAAAAJU/f7Wxh854Sjs/photo.jpg?sz=128", "display_name": "CEO tech4lifeapps", "link": "https://stackoverflow.com/users/7917159/ceo-tech4lifeapps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2999, "favorite_count": 1, "accepted_answer_id": 49767849, "answer_count": 3, "score": 0, "last_activity_date": 1523435008, "creation_date": 1523370035, "last_edit_date": 1523433772, "question_id": 49756062, "link": "https://stackoverflow.com/questions/49756062/kotlin-how-do-i-call-a-dialogfragment-from-within-an-adapter-class", "title": "Kotlin: How do I call a DialogFragment from within an Adapter class?", "body": "<p>I have a MainAdapter.kt class that handles a RecyclerView. In its Holder class, I use a OnLongClickListener that calls a function deleteCategory(categoryId) to delete an entry in my Firebase database. This works perfectly: </p>\n\n<pre><code>class CategoryHolder(val customView: View, var category: Category? = null) : RecyclerView.ViewHolder(customView) {\n    private val TAG = CategoryHolder::class.java.simpleName\n\n    fun bind(category: Category) {\n        with(category) {\n            customView.textView_name?.text = category.name\n            customView.textView_description?.text = category.description\n\n            val categoryId = category.id\n\n            customView.setOnClickListener {\n                    // do something\n            }\n\n            customView.setOnLongClickListener(\n                    {\n                       deleteCategory(categoryId)\n                       true\n                    }\n            )\n        }\n    }\n\n    private fun deleteCategory(categoryId: String) {\n        val database = FirebaseDatabase.getInstance()\n\n        val myRef = database.getReference(\"categories\").child(categoryId)\n        myRef.removeValue()\n        Log.d(TAG, \"Category with id \" + categoryId + \" deleted\")\n    }\n}\n</code></pre>\n\n<p>But I rather want to call a function inside a DialogFragment class instead of the deleteCategory(id) function, like this:</p>\n\n<pre><code>  // Create an instance of a DeleteCategoryDialogFragment and show it\n  fun showDeleteCategoryDialog(view: View, categoryId: String) {\n      val dialog = DeleteCategoryDialogFragment.newInstance(categoryId)\n      dialog.show(this@MainActivity.supportFragmentManager, \n      \"DeleteCategoryDialog\")\n  }\n</code></pre>\n\n<p>This gives me a \"Unresolved reference: @MainActivity\" error.\nHow can I solve this? Is there a way to get hold of categoryId (of type String) in my MainActivity? This would allow me to move the function showDeleteCategoryDialog to MainActivity and solve the problem. </p>\n"}, {"tags": ["android", "kotlin", "kotlin-android-extensions", "kotlin-extension"], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 4842341, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bMjgvVjU6Aw/AAAAAAAAAAI/AAAAAAAAADc/2ZR4e0w8HXY/photo.jpg?sz=128", "display_name": "Belita Colares", "link": "https://stackoverflow.com/users/4842341/belita-colares"}, "edited": false, "score": 0, "creation_date": 1523444697, "post_id": 49755156, "comment_id": 86561648, "body": "I&#39;ll try to use it with TabHost"}], "tags": [], "owner": {"reputation": 2209, "user_id": 4904995, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/JxR9x.jpg?s=128&g=1", "display_name": "Tung Tran", "link": "https://stackoverflow.com/users/4904995/tung-tran"}, "is_accepted": true, "score": 13, "last_activity_date": 1523371721, "last_edit_date": 1523371721, "creation_date": 1523367518, "answer_id": 49755156, "question_id": 49754979, "link": "https://stackoverflow.com/questions/49754979/capture-events-by-sliding-left-or-right-using-kotlin/49755156#49755156", "title": "capture events by sliding left or right using kotlin", "body": "<p>If want do this, try to custom touch listener implement <code>OnTouchListener</code></p>\n\n<pre><code>open class OnSwipeTouchListener : View.OnTouchListener {\n\n    private val gestureDetector = GestureDetector(GestureListener())\n\n    fun onTouch(event: MotionEvent): Boolean {\n        return gestureDetector.onTouchEvent(event)\n    }\n\n    private inner class GestureListener : GestureDetector.SimpleOnGestureListener() {\n\n        private val SWIPE_THRESHOLD = 100\n        private val SWIPE_VELOCITY_THRESHOLD = 100\n\n        override fun onDown(e: MotionEvent): Boolean {\n            return true\n        }\n\n        override fun onSingleTapConfirmed(e: MotionEvent): Boolean {\n            onTouch(e)\n            return true\n        }\n\n\n        override fun onFling(e1: MotionEvent, e2: MotionEvent, velocityX: Float, velocityY: Float): Boolean {\n            val result = false\n            try {\n                val diffY = e2.y - e1.y\n                val diffX = e2.x - e1.x\n                if (Math.abs(diffX) &gt; Math.abs(diffY)) {\n                    if (Math.abs(diffX) &gt; SWIPE_THRESHOLD &amp;&amp; Math.abs(velocityX) &gt; SWIPE_VELOCITY_THRESHOLD) {\n                        if (diffX &gt; 0) {\n                            onSwipeRight()\n                        } else {\n                            onSwipeLeft()\n                        }\n                    }\n                } else {\n                    // onTouch(e);\n                }\n            } catch (exception: Exception) {\n                exception.printStackTrace()\n            }\n\n            return result\n        }\n    }\n\n    override fun onTouch(v: View, event: MotionEvent): Boolean {\n        return gestureDetector.onTouchEvent(event)\n    }\n\n    open fun onSwipeRight() {}\n\n    open fun onSwipeLeft() {}\n\n    open fun onSwipeTop() {}\n\n    open fun onSwipeBottom() {}\n}\n</code></pre>\n\n<p>And usage for view:</p>\n\n<pre><code>imageView.setOnTouchListener(object : OnSwipeTouchListener() {\n            override fun onSwipeLeft() {\n                Log.e(\"ViewSwipe\", \"Left\")\n            }\n\n            override fun onSwipeRight() {\n                Log.e(\"ViewSwipe\", \"Right\")\n            }\n        })\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 4842341, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bMjgvVjU6Aw/AAAAAAAAAAI/AAAAAAAAADc/2ZR4e0w8HXY/photo.jpg?sz=128", "display_name": "Belita Colares", "link": "https://stackoverflow.com/users/4842341/belita-colares"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4566, "favorite_count": 3, "accepted_answer_id": 49755156, "answer_count": 1, "score": 1, "last_activity_date": 1523371721, "creation_date": 1523367065, "last_edit_date": 1523368430, "question_id": 49754979, "link": "https://stackoverflow.com/questions/49754979/capture-events-by-sliding-left-or-right-using-kotlin", "title": "capture events by sliding left or right using kotlin", "body": "<p>How can I capture events by sliding left or right using kotlin?</p>\n\n<p>I've implemented OnTouchListener to try to capture something, but nothing happens.</p>\n\n<pre><code>class MyClass : Fragment(), View.OnTouchListener {\n\n        lateinit var mRootView: View\n\n        override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?,\n                                      savedInstanceState: Bundle?): View? {\n\n\n                mRootView = inflater.inflate(myLayout, container, false)\n\n                mRootView.setOnTouchListener(this)\n\n                return mRootView\n            }\n\n        override fun onTouch(view: View?, event: MotionEvent?): Boolean {\n                println(\"test\")\n                println(event?.actionMasked.toString())\n                return true\n         }\n}\n</code></pre>\n"}, {"tags": ["java", "android", "facebook-graph-api", "kotlin", "facebook-sdk-4.0"], "owner": {"reputation": 10799, "user_id": 859742, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/04e2b9fa88968c46c7b53c84151843f6?s=128&d=identicon&r=PG", "display_name": "Ilker Baltaci", "link": "https://stackoverflow.com/users/859742/ilker-baltaci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1523366302, "creation_date": 1523366267, "last_edit_date": 1523366302, "question_id": 49754722, "link": "https://stackoverflow.com/questions/49754722/facebook-sdk-single-friend-selection-with", "title": "Facebook SDK Single Friend selection with", "body": "<p>My mobile app uses Facebook SDK for authentication and users can invite one of their facebook friends who installed the app.</p>\n\n<p>One approach is makeing a GraphRequest to /me/friends and showing a new ativity with a RecyclerView.I didn't want to implement my own custom picker so tried to make the invitation over Game Request.</p>\n\n<pre><code>root.show_friends_button.setOnClickListener {\n\n            val content = GameRequestContent.Builder().\n                    setFilters(GameRequestContent.Filters.APP_USERS).\n                    setMessage(\"Come play this level with me\").\n                    setActionType(GameRequestContent.ActionType.TURN).setTitle(\"I bet you!\").build();\n\n\n            requestDialog = GameRequestDialog(this)\n            requestDialog!!.registerCallback(callbackManager,\n                    object : FacebookCallback&lt;GameRequestDialog.Result&gt; {\n                        override fun onSuccess(result: GameRequestDialog.Result) {\n                            val participants = result.requestRecipients\n                            val id = result.requestId\n                        }\n\n                        override fun onCancel() {}\n                        override fun onError(error: FacebookException) {}\n                    }\n\n            )\n            requestDialog!!.show(content)\n        }\n</code></pre>\n\n<p>The problem here is that you can choose up to 50 friends from the pop up dialog.Is there a way to limit this to single user?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1523364967, "post_id": 49753250, "comment_id": 86523133, "body": "not exactly a duplicate (as it deals with Kotlin here). But printing the byte code using <code>javap</code> we know that <code>java.lang.Enum</code> is used under the hood. So the same applies to Kotlin as well."}], "answers": [{"comments": [{"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 1, "creation_date": 1523363927, "post_id": 49753574, "comment_id": 86522299, "body": "Actually I also think it&#39;s using the same enum mechanism as Java here and then the array will be cloned, when returned."}], "tags": [], "owner": {"reputation": 8935, "user_id": 7637657, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5QJPu.jpg?s=128&g=1", "display_name": "Alexander Romanov", "link": "https://stackoverflow.com/users/7637657/alexander-romanov"}, "is_accepted": false, "score": 2, "last_activity_date": 1523365616, "last_edit_date": 1523365616, "creation_date": 1523363015, "answer_id": 49753574, "question_id": 49753250, "link": "https://stackoverflow.com/questions/49753250/how-does-enumclass-values-work-in-kotlin/49753574#49753574", "title": "How does EnumClass.values() work in Kotlin?", "body": "<p>While not 100% sure, I assume that in <strong>Kotlin</strong> (as well as in <strong>Java</strong>) <code>Enum.values()</code> method is generated by the compiler:</p>\n\n<blockquote>\n  <p>The compiler automatically adds some special methods when it creates\n  an enum. For example, they have a static values method that returns an\n  array containing all of the values of the enum in the order they are\n  declared. This method is commonly used in combination with the\n  for-each construct to iterate over the values of an enum type.</p>\n</blockquote>\n\n<p>From the <a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.9.2\" rel=\"nofollow noreferrer\">JLS</a>:</p>\n\n<pre><code>/**\n* Returns an array containing the constants of this enum \n* type, in the order they're declared.  This method may be\n* used to iterate over the constants as follows:\n*\n*    for(E c : E.values())\n*        System.out.println(c);\n*\n* @return an array containing the constants of this enum \n* type, in the order they're declared\n*/\npublic static E[] values();\n</code></pre>\n\n<hr>\n\n<p>This method <strong><em>returns new array</em></strong> every time. </p>\n\n<p>The point is that an array can't be constant in <strong>Java</strong>: it values can be modified, so you can't share the same array and have to give a new one on every access to guarantee that the array hasn't been changed.</p>\n\n<p><strong>Simple test:</strong></p>\n\n<pre><code>enum class MyEnum { CAT, DOG }\n\nval a = MyEnum.values()\nval b = MyEnum.values()\n\nprintln(\"${a === b}\") // &gt;&gt;&gt; false\n\na[0] = MyEnum.DOG\nprintln(a.joinToString())               // &gt;&gt;&gt; [DOG, DOG]\nprintln(MyEnum.values().joinToString()) // &gt;&gt;&gt; [CAT, DOG]\n</code></pre>\n"}], "owner": {"reputation": 4747, "user_id": 1263771, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/da5cbc1ac0d9829d640b63b3865e090b?s=128&d=identicon&r=PG", "display_name": "tse", "link": "https://stackoverflow.com/users/1263771/tse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1523365616, "creation_date": 1523362071, "question_id": 49753250, "link": "https://stackoverflow.com/questions/49753250/how-does-enumclass-values-work-in-kotlin", "title": "How does EnumClass.values() work in Kotlin?", "body": "<p>How does <code>EnumClass.values()</code> work in Kotlin? </p>\n\n<p>I mean will it create new <code>Array</code> every time, or it is lazy evaluated static, or something else?</p>\n"}, {"tags": ["java", "kotlin", "android-studio-3.1"], "comments": [{"owner": {"reputation": 5469, "user_id": 7083401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eA15o.png?s=128&g=1", "display_name": "ice1000", "link": "https://stackoverflow.com/users/7083401/ice1000"}, "edited": false, "score": 0, "creation_date": 1523373748, "post_id": 49753058, "comment_id": 86529723, "body": "Have you tried cleaning your project and rebuild"}], "owner": {"reputation": 13035, "user_id": 305135, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/cf9b63f6e0e2d709993723d9b9be79cf?s=128&d=identicon&r=PG", "display_name": "AVEbrahimi", "link": "https://stackoverflow.com/users/305135/avebrahimi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1523436059, "creation_date": 1523361483, "last_edit_date": 1523436059, "question_id": 49753058, "link": "https://stackoverflow.com/questions/49753058/strange-kotlin-error-after-update-duplicate-entry", "title": "Strange Kotlin error after update: Duplicate entry", "body": "<p>Please check code below:</p>\n\n<pre><code>class HTMLEngine : View {\n    class HREFOffset(var YOffset: Int, var href: String)\n    class ChapterHolder(var chapter: Int, var chapter_body: Node)\n</code></pre>\n\n<p>Kotlin compiler says :</p>\n\n<blockquote>\n  <p>Cause: duplicate entry:\n  com/app/view/HTMLEngine$ChapterHolder.class</p>\n</blockquote>\n\n<p>Update:</p>\n\n<p>I reverted to 4.3.1, everything worked fine for a day, then again problem appeared. I doubt it's because of latest Kotlin plugin.</p>\n"}, {"tags": ["angularjs", "spring", "kotlin", "multipartform-data", "form-data"], "comments": [{"owner": {"reputation": 28220, "user_id": 1199132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/LR20r.jpg?s=128&g=1", "display_name": "Xtreme Biker", "link": "https://stackoverflow.com/users/1199132/xtreme-biker"}, "edited": false, "score": 0, "creation_date": 1523361790, "post_id": 49752992, "comment_id": 86520771, "body": "Have you tried using some tool like Postman to POST the endpoint? That way you would know if your problem is client or server related."}, {"owner": {"reputation": 4800, "user_id": 8292178, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/94da5e9b3cf976012f38641f9844d03a?s=128&d=identicon&r=PG&f=1", "display_name": "mahan", "link": "https://stackoverflow.com/users/8292178/mahan"}, "reply_to_user": {"reputation": 28220, "user_id": 1199132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/LR20r.jpg?s=128&g=1", "display_name": "Xtreme Biker", "link": "https://stackoverflow.com/users/1199132/xtreme-biker"}, "edited": false, "score": 1, "creation_date": 1523364853, "post_id": 49752992, "comment_id": 86523031, "body": "Thank for the suggestion. The problem was with the server"}, {"owner": {"reputation": 28220, "user_id": 1199132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/LR20r.jpg?s=128&g=1", "display_name": "Xtreme Biker", "link": "https://stackoverflow.com/users/1199132/xtreme-biker"}, "edited": false, "score": 0, "creation_date": 1523365277, "post_id": 49752992, "comment_id": 86523371, "body": "If you fixed it, you should publish the answer as well for readers in the future. Also you might as well change the question and make it only server-related."}], "answers": [{"tags": [], "owner": {"reputation": 4800, "user_id": 8292178, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/94da5e9b3cf976012f38641f9844d03a?s=128&d=identicon&r=PG&f=1", "display_name": "mahan", "link": "https://stackoverflow.com/users/8292178/mahan"}, "is_accepted": true, "score": 0, "last_activity_date": 1524639300, "creation_date": 1524639300, "answer_id": 50015846, "question_id": 49752992, "link": "https://stackoverflow.com/questions/49752992/upload-file-from-angularjs-controller-to-spring-writtin-in-kotlin/50015846#50015846", "title": "Upload file from AngularJS controller to Spring writtin in Kotlin", "body": "<p>This was my first time uploading a file using <code>AngularJS</code> and <code>Spring</code>. There are some who uses <a href=\"https://stackoverflow.com/questions/21015891/spring-mvc-angularjs-file-upload-org-apache-commons-fileupload-fileuploade\"><code>CommonsMultipartResolver</code></a>. I had done so. However, I did not need to use it. </p>\n\n<p>It was due to using <code>CommonsMultipartResolver</code> that I could not upload file. I removed the code below and it works as expected. However, for some reason, I can not upload as large files as an <a href=\"https://unsplash.com/photos/w7Z0fiZw4Mw\" rel=\"nofollow noreferrer\">unsplash photo</a> </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>@Bean\r\nopen fun multipartResolver(): MultipartResolver {\r\n  val multipartResolver = CommonsMultipartResolver()\r\n  multipartResolver.setMaxUploadSize(500000000)\r\n  return multipartResolver\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 4800, "user_id": 8292178, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/94da5e9b3cf976012f38641f9844d03a?s=128&d=identicon&r=PG&f=1", "display_name": "mahan", "link": "https://stackoverflow.com/users/8292178/mahan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 232, "favorite_count": 0, "accepted_answer_id": 50015846, "answer_count": 1, "score": 0, "last_activity_date": 1524639300, "creation_date": 1523361309, "last_edit_date": 1592644375, "question_id": 49752992, "link": "https://stackoverflow.com/questions/49752992/upload-file-from-angularjs-controller-to-spring-writtin-in-kotlin", "title": "Upload file from AngularJS controller to Spring writtin in Kotlin", "body": "<p>There are a few similar questions already on StackOverflow. I have gone through some of them, but they did not work for me. So please do not mark this question as <code>duplicate</code>.</p>\n<p>I want to upload a file using AngularJS  to Spring Controller written in Kotlin. I have written the code below in order to do so, but it does not work. I get a <code>404</code> bad request response with a message that <code>Required request part 'file' is not present</code></p>\n<h1>Input</h1>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;form class=\"col-xs-12 col-sm-4 form-inline \" ng-submit=\"$ctrl.saveFiles()\"&gt;\n    &lt;div class=\"form-group\"&gt;\n      &lt;label for=\"file-upload\" class=\"custom-file-upload\"&gt;\n        Choose File\n      &lt;/label&gt;\n      &lt;input id=\"file-upload\" type=\"file\"  file-model=\"$ctrl.file\" name=\"file\"/&gt;\n    &lt;/div&gt;\n    &lt;div class=\"form-group\"&gt;\n      &lt;button class=\"btn btn-primary pull-right\" type=\"submit\"&gt;Submit&lt;/button&gt;\n    &lt;/div&gt;\n&lt;/form&gt;    </code></pre>\r\n</div>\r\n</div>\r\n</p>\n<h1>file-model directive</h1>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>app.directive('fileModel', ['$parse', function ($parse) {\n    return {\n      restrict: 'A',\n      link: function (scope, element, attrs) {\n        var model = $parse(attrs.fileModel);\n        var modelSetter = model.assign;\n\n        element.bind('change', function () {\n          scope.$apply(function () {\n            modelSetter(scope, element[0].files[0]);\n          });\n        });\n      }\n    };\n  }])</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>I have copied this directive from this <a href=\"https://stackoverflow.com/questions/31774695/using-multipart-without-form-in-spring-mvc\">question</a></p>\n<h1>$ctrl.saveFiles() function</h1>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>    $ctrl.saveFiles = function () {\n      // var file = document.getElementById(\"file-upload\").files[0]\n      var formData = new FormData();\n\n      formData.append(\"file\", $ctrl.file);\n\n      console.log(formData.has(\"file\"));  // true\n\n      var url = '/upload',\n        config = {\n          transformRequest: angular.identity,\n          headers: {'Content-Type': undefined}\n        };\n      return $http.post(url, formData, config)\n    };</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<h1>Spring @bean</h1>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>    @Bean\n    open fun multipartResolver(): MultipartResolver {\n        val multipartResolver = CommonsMultipartResolver()\n        multipartResolver.setMaxUploadSize(500000000)\n        return multipartResolver\n    }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<h1>Spring @PostMapping method</h1>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>    @PostMapping(value = \"/upload\")\n    @Throws(Exception::class)\n    fun uploadFile(@RequestParam(\"file\") file: MultipartFile): String {\n        return \"Upload file\"\n    }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<h1>Request header</h1>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>Accept: application/json, text/plain, */*\nAccept-Encoding: gzip, deflate, br\nAccept-Language: en-US,en;q=0.9\nConnection: keep-alive\nContent-Length: 4829202\nContent-Type: multipart/form-data; boundary=----WebKitFormBoundaryJ8BRhjvMRLt9UdRS</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>As you see though I use <code>Kotlin</code>, It is totally fine to answer in <code>Java</code>.</p>\n"}, {"tags": ["kotlin", "rx-java"], "comments": [{"owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 0, "creation_date": 1523360315, "post_id": 49752593, "comment_id": 86519784, "body": "Did you forget <a href=\"https://stackoverflow.com/a/49730841/61158\">this</a>?"}, {"owner": {"reputation": 4609, "user_id": 1699956, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oBr6e.jpg?s=128&g=1", "display_name": "Mangat Rai Modi", "link": "https://stackoverflow.com/users/1699956/mangat-rai-modi"}, "reply_to_user": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 0, "creation_date": 1523360787, "post_id": 49752593, "comment_id": 86520088, "body": "I do remember this, but I don&#39;t understand why would it be required. From here:- <a href=\"https://stackoverflow.com/questions/22847105/when-do-you-use-map-vs-flatmap-in-rxjava?utm_medium=organic&amp;utm_source=google_rich_qa&amp;utm_campaign=google_rich_qa\" title=\"when do you use map vs flatmap in rxjava\">stackoverflow.com/questions/22847105/&hellip;</a>  I understood that flatmap takes a function which takes observable, but map can return anything. I tried flatmap also, but same result. See edit"}, {"owner": {"reputation": 4609, "user_id": 1699956, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oBr6e.jpg?s=128&g=1", "display_name": "Mangat Rai Modi", "link": "https://stackoverflow.com/users/1699956/mangat-rai-modi"}, "reply_to_user": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 0, "creation_date": 1523361470, "post_id": 49752593, "comment_id": 86520547, "body": "Although I do get <code>Observable&lt;String&gt;</code> instead of <code>Observable&lt;Single&lt;String&gt;</code>, which is good, but the problem of .doOnError remains."}, {"owner": {"reputation": 4609, "user_id": 1699956, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oBr6e.jpg?s=128&g=1", "display_name": "Mangat Rai Modi", "link": "https://stackoverflow.com/users/1699956/mangat-rai-modi"}, "reply_to_user": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 0, "creation_date": 1523371074, "post_id": 49752593, "comment_id": 86527815, "body": "Thanks to @akarnokd my working example is wrong. I have isolated the problem somewhere else and asked the querstion here:- <a href=\"https://stackoverflow.com/questions/49756399/vertex-reactive-kafka-client-chaining-not-working-when-writing\" title=\"vertex reactive kafka client chaining not working when writing\">stackoverflow.com/questions/49756399/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4609, "user_id": 1699956, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oBr6e.jpg?s=128&g=1", "display_name": "Mangat Rai Modi", "link": "https://stackoverflow.com/users/1699956/mangat-rai-modi"}, "edited": false, "score": 0, "creation_date": 1523362614, "post_id": 49753107, "comment_id": 86521348, "body": "Hmm.. I actually changed my code to abstract. Anyways Its a nice way to produce an error. I apologise as it looks I have abstracted away the root cause. I will post code shortly where I am able to reproduce the issue."}, {"owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "reply_to_user": {"reputation": 4609, "user_id": 1699956, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oBr6e.jpg?s=128&g=1", "display_name": "Mangat Rai Modi", "link": "https://stackoverflow.com/users/1699956/mangat-rai-modi"}, "edited": false, "score": 0, "creation_date": 1523363638, "post_id": 49753107, "comment_id": 86522093, "body": "That&#39;s why it is important you try the code you are about to post to check if it still exhibits the issue. If not, you can locally make out the diff and possibly discover the cause much quicker."}, {"owner": {"reputation": 4609, "user_id": 1699956, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oBr6e.jpg?s=128&g=1", "display_name": "Mangat Rai Modi", "link": "https://stackoverflow.com/users/1699956/mangat-rai-modi"}, "edited": false, "score": 0, "creation_date": 1523369291, "post_id": 49753107, "comment_id": 86526485, "body": "So I have isolated the problem in one of the libraries which wraps rxjava on their client. I believe I should be asking a separate for that."}], "tags": [], "owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "is_accepted": false, "score": 1, "last_activity_date": 1523361649, "creation_date": 1523361649, "answer_id": 49753107, "question_id": 49752593, "link": "https://stackoverflow.com/questions/49752593/rxjava2-is-chaining-allowed-inside-mapper-function/49753107#49753107", "title": "RxJava2: Is chaining allowed inside mapper function?", "body": "<p>This works as expected:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Test\npublic void test() {\n    Observable.just(1)\n    .flatMap(v -&gt; single(v)\n            .toObservable()\n            .doOnError(w -&gt; System.out.println(\"Error2 \" + w))\n    )\n    .subscribe(v -&gt; System.out.println(v), e -&gt; System.out.println(\"Error \" + e));\n}\n\nSingle&lt;Integer&gt; single(Integer v) {\n    return Single.error(new IOException());\n}\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>Error2 java.io.IOException\nError java.io.IOException\n</code></pre>\n"}], "owner": {"reputation": 4609, "user_id": 1699956, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oBr6e.jpg?s=128&g=1", "display_name": "Mangat Rai Modi", "link": "https://stackoverflow.com/users/1699956/mangat-rai-modi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523361649, "creation_date": 1523360078, "last_edit_date": 1523360830, "question_id": 49752593, "link": "https://stackoverflow.com/questions/49752593/rxjava2-is-chaining-allowed-inside-mapper-function", "title": "RxJava2: Is chaining allowed inside mapper function?", "body": "<p>In the code below function <code>f returns Single&lt;String&gt;</code>, </p>\n\n<pre><code>   Observable.map { line -&gt;\n              f(line).doOnError { e -&gt;\n                    println(\"Error:$e\")\n                }\n        }\n        .subscribe({ record -&gt; println(record) }, { e -&gt; println(\"Error2:$e\") })\n</code></pre>\n\n<p><code>println(\"Error:$e\")</code> inside the map won't execute, however I will be able to get the error printed in the subscriber. It looks like that the chaining inside the mapper function in not allowed. Is it correct? If yes, why?</p>\n\n<p><strong>Edit:</strong> Also tried flatmap, but same result.</p>\n\n<pre><code>   Observable.flatmap { line -&gt;\n              f(line).toObservable().doOnError { e -&gt;\n                    println(\"Error:$e\")\n                }\n        }\n        .subscribe({ record -&gt; println(record) }, { e -&gt; println(\"Error2:$e\") })\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-custom-view"], "comments": [{"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 6, "creation_date": 1523359774, "post_id": 49752323, "comment_id": 86519403, "body": "As long as the overriding methods don&#39;t access any state in the subclass, this is fine. If they do, they&#39;ll access uninitialized state."}, {"owner": {"reputation": 10159, "user_id": 306739, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mILId.jpg?s=128&g=1", "display_name": "stan0", "link": "https://stackoverflow.com/users/306739/stan0"}, "reply_to_user": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 1, "creation_date": 1523364062, "post_id": 49752323, "comment_id": 86522421, "body": "@MarkoTopolnik this comment is probably good enough for an answer too :)"}], "answers": [{"comments": [{"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 1, "creation_date": 1523378224, "post_id": 49754549, "comment_id": 86532507, "body": "&quot;Kotlin here is no different from Java or any other OOP language.&quot; It is different from C++, for example. &quot;From any JVM and CLR language&quot; would be more correct."}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "reply_to_user": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1523469748, "post_id": 49754549, "comment_id": 86578747, "body": "Yep, I realized that while I was writing it... but C++ may be the only important exception and I find it a too detailed discussion. I changed to &quot;most other OOP languages&quot;."}], "tags": [], "owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "is_accepted": false, "score": 5, "last_activity_date": 1523469759, "last_edit_date": 1523469759, "creation_date": 1523365703, "answer_id": 49754549, "question_id": 49752323, "link": "https://stackoverflow.com/questions/49752323/is-it-safe-to-call-abstract-methods-from-constructor-in-kotlin/49754549#49754549", "title": "Is it safe to call abstract methods from constructor in kotlin?", "body": "<p>Kotlin here is no different from Java or most other OOP languages.</p>\n\n<p>As long as you make it clear in the method's contract that the overriding \nmethods must not access any state in the subclass, you can safely call them from the base class's constructor. If a class breaks this rule, its method will be accessing uninitialized state.</p>\n"}], "owner": {"reputation": 153, "user_id": 7171655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0423dc27f96bd03d1f7960e5f3ecc13d?s=128&d=identicon&r=PG&f=1", "display_name": "Kanj", "link": "https://stackoverflow.com/users/7171655/kanj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1838, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1523469759, "creation_date": 1523359212, "question_id": 49752323, "link": "https://stackoverflow.com/questions/49752323/is-it-safe-to-call-abstract-methods-from-constructor-in-kotlin", "title": "Is it safe to call abstract methods from constructor in kotlin?", "body": "<p>I am working on an android project. I want to make an abstract subclass of FrameLayout with an abstract method</p>\n\n<pre><code>@LayoutRes    \nabstract fun getLayoutToInflate(): Int\n</code></pre>\n\n<p>In the constructor I want to inflate the layout returned by this method. But the IDE shows a warning about \"Calling non-final function in constructor...\" at this code</p>\n\n<pre><code>val inflater = LayoutInflater.from(context)\ninflatedBanner = inflater.inflate(getLayoutToInflate(), this, true)\n</code></pre>\n\n<p>This app doesn't build yet. So wrote a simple kotlin code like this to test.</p>\n\n<pre><code>abstract class Base {\n    val text: String\n    constructor(text: String) {\n        this.text = text\n        println(text + getTextSuffix())\n    }\n    abstract fun getTextSuffix(): String\n}\n\nclass Derived(text: String) : Base(text) {\n    override fun getTextSuffix() = \"_\"\n}\n\nfun main(args: Array&lt;String&gt;) {\n    val d = Derived(\"stuff\")\n}\n</code></pre>\n\n<p>This code always prints \"stuff_\" which means that the overridden abstract method is available in constructor.\nCan I rely on this behaviour in my app too? If not, what is the correct way to implement something like this in kotlin?</p>\n"}, {"tags": ["java", "android", "time", "kotlin", "compare"], "comments": [{"owner": {"reputation": 1757, "user_id": 5912422, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V2n6g.jpg?s=128&g=1", "display_name": "Valentin Michalak", "link": "https://stackoverflow.com/users/5912422/valentin-michalak"}, "edited": false, "score": 1, "creation_date": 1523358659, "post_id": 49751573, "comment_id": 86518653, "body": "Are you sure about &quot;currentTime.compareTo(open) &gt;= 0 currentTime.compareTo(close) &lt; 0&quot; it seems missing &amp;&amp;"}, {"owner": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "reply_to_user": {"reputation": 1757, "user_id": 5912422, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V2n6g.jpg?s=128&g=1", "display_name": "Valentin Michalak", "link": "https://stackoverflow.com/users/5912422/valentin-michalak"}, "edited": false, "score": 0, "creation_date": 1523367084, "post_id": 49751573, "comment_id": 86524817, "body": "Or a <code>||</code>? Depends on whether the closing time is past midnight. Also @ValentinMichalak"}, {"owner": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "edited": false, "score": 1, "creation_date": 1523367117, "post_id": 49751573, "comment_id": 86524843, "body": "I recommend you avoid the <code>SimpleDateFormat</code> class. It is not only long outdated, it is also notoriously troublesome. Today we have so much better in <a href=\"https://docs.oracle.com/javase/tutorial/datetime/\" rel=\"nofollow noreferrer\"><code>java.time</code>, the modern Java date and time API</a>."}], "answers": [{"comments": [{"owner": {"reputation": 213390, "user_id": 642706, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/ZWEI3.jpg?s=128&g=1", "display_name": "Basil Bourque", "link": "https://stackoverflow.com/users/642706/basil-bourque"}, "edited": false, "score": 0, "creation_date": 1523377340, "post_id": 49753401, "comment_id": 86532013, "body": "Good Answer, but I suggest changing your code example to instantiate <code>LocalTime</code> objects explicitly separately and pass as arguments. This would make the logic more clear as the <code>16:00</code> and <code>02:00</code> values come from outside the logic being discussed (set as business policy by the restaurant managers)."}, {"owner": {"reputation": 73, "user_id": 9624795, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/7a7d09932ae86bbe7adffe5693a69e7a?s=128&d=identicon&r=PG", "display_name": "paulXkt", "link": "https://stackoverflow.com/users/9624795/paulxkt"}, "reply_to_user": {"reputation": 213390, "user_id": 642706, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/ZWEI3.jpg?s=128&g=1", "display_name": "Basil Bourque", "link": "https://stackoverflow.com/users/642706/basil-bourque"}, "edited": false, "score": 0, "creation_date": 1523377769, "post_id": 49753401, "comment_id": 86532267, "body": "@BasilBourque Indeed, the code is better this way, thanks!"}, {"owner": {"reputation": 213390, "user_id": 642706, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/ZWEI3.jpg?s=128&g=1", "display_name": "Basil Bourque", "link": "https://stackoverflow.com/users/642706/basil-bourque"}, "edited": false, "score": 0, "creation_date": 1523377970, "post_id": 49753401, "comment_id": 86532371, "body": "Yes, and how about naming the t1 t2 vars to something meaningful like <code>openingTime</code> and <code>closingTime</code> or similar restaurant trade jargon."}, {"owner": {"reputation": 73, "user_id": 9624795, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/7a7d09932ae86bbe7adffe5693a69e7a?s=128&d=identicon&r=PG", "display_name": "paulXkt", "link": "https://stackoverflow.com/users/9624795/paulxkt"}, "reply_to_user": {"reputation": 213390, "user_id": 642706, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/ZWEI3.jpg?s=128&g=1", "display_name": "Basil Bourque", "link": "https://stackoverflow.com/users/642706/basil-bourque"}, "edited": false, "score": 0, "creation_date": 1523378115, "post_id": 49753401, "comment_id": 86532448, "body": "Because t1 is the openingTime of restaurant 1 and closingTime of restaurant 2, but I&#39;ll think of better names, hold on.."}, {"owner": {"reputation": 778, "user_id": 4539582, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/4ZeQW.jpg?s=128&g=1", "display_name": "newbie", "link": "https://stackoverflow.com/users/4539582/newbie"}, "edited": false, "score": 0, "creation_date": 1523416190, "post_id": 49753401, "comment_id": 86547213, "body": "sorry before, the <code>ZoneId</code> need API 26, and I cannot apply on API 19"}], "tags": [], "owner": {"reputation": 73, "user_id": 9624795, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/7a7d09932ae86bbe7adffe5693a69e7a?s=128&d=identicon&r=PG", "display_name": "paulXkt", "link": "https://stackoverflow.com/users/9624795/paulxkt"}, "is_accepted": false, "score": 3, "last_activity_date": 1523378168, "last_edit_date": 1523378168, "creation_date": 1523362489, "answer_id": 49753401, "question_id": 49751573, "link": "https://stackoverflow.com/questions/49751573/how-to-get-open-close-from-opening-hours-by-current-time/49753401#49753401", "title": "How to get open/close from opening hours by current time", "body": "<p>If you're comparing time values (hours and minutes), you shouldn't compare them as Strings, but as the things they really represent: a time-of-the-day.</p>\n\n<p>In java there's <a href=\"https://docs.oracle.com/javase/tutorial/datetime/\" rel=\"nofollow noreferrer\">the java.time classes</a> (in JDK >= 8). In older versions, the same classes are available in the <a href=\"http://threeten.org/threetenbp/\" rel=\"nofollow noreferrer\">Threeten backport</a>.</p>\n\n<p>Initially I thought I could use a <code>LocalTime</code> (a class that represents a time of the day), but the problem is that local times start at midnight and ends at 11:59 PM, so it can't handle the case of restaurant 1, that closes at the <strong>next</strong> day.</p>\n\n<p>So you'll have to choose between a <code>LocalDateTime</code> (that represents a date and time), or a <code>ZonedDateTime</code> (if you want to consider Daylight Saving Time effects). I'm using the latter, but the code is similar for both types:</p>\n\n<pre><code>// timezone I'm working on (use JVM default, or a specific one, like ZoneId.of(\"America/New_York\")\nZoneId zone = ZoneId.systemDefault();\n// today\nLocalDate today = LocalDate.now(zone);\n\n// times\n// 16:00\nLocalTime fourPM = LocalTime.of(16, 0); // or LocalTime.parse(\"16:00\") if you have a String\n// 02:00\nLocalTime twoAM = LocalTime.of(2, 0); // or LocalTime.parse(\"02:00\") if you have a String\n\n// restaurant 1: opens today 16:00, closes tomorrow 02:00\nZonedDateTime rest1Start = today.atTime(fourPM).atZone(zone);\nZonedDateTime rest1End = today.plusDays(1).atTime(twoAM).atZone(zone);\n\n// restaurant 2: opens today 02:00, closes today 16:00\nZonedDateTime rest2Start = today.atTime(twoAM).atZone(zone);\nZonedDateTime rest2End = today.atTime(fourPM).atZone(zone);\n\n// time to check\nString timeToCheck = \"18:00\";\n// set time - or use ZonedDateTime.now(zone) to get the current date/time\nZonedDateTime zdt = today.atTime(LocalTime.parse(timeToCheck)).atZone(zone);\n\n// check if it's open\nif (rest1Start.isAfter(zdt) || rest1End.isBefore(zdt)) {\n    // restaurant 1 is closed\n} else {\n    // restaurant 1 is open\n}\n// do the same with restaurant 2\n</code></pre>\n\n<p>If you don't need to account for DST changes, you can use a <code>LocalDateTime</code> - just ommit the calls to <code>atZone</code> and the result is a <code>LocalDateTime</code>.</p>\n"}], "owner": {"reputation": 778, "user_id": 4539582, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/4ZeQW.jpg?s=128&g=1", "display_name": "newbie", "link": "https://stackoverflow.com/users/4539582/newbie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1097, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523416112, "creation_date": 1523356896, "last_edit_date": 1523416112, "question_id": 49751573, "link": "https://stackoverflow.com/questions/49751573/how-to-get-open-close-from-opening-hours-by-current-time", "title": "How to get open/close from opening hours by current time", "body": "<p>I have a <code>android</code> project about online restaurant order. and I got some problem with time logic<br></p>\n\n<p>I got restaurant open or close time by <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html\" rel=\"nofollow noreferrer\"><code>String</code></a> :</p>\n\n<ul>\n<li>Restaurant 1 : <code>open at \"16:00\"</code> and <code>close at \"02.00\"</code></li>\n<li>Restaurant 2 : <code>open at \"02.00\"</code> and <code>close at \"16:00\"</code></li>\n</ul>\n\n<p>If this time <code>at \"18:00\"</code> the Restaurant 1 should be open.</p>\n\n<p>I have tried the code below like this, \nBut Restaurant 1 still close : </p>\n\n<pre><code>val open = \"16:00\"\nval close = \"02:00\"\nval calendar = Calendar.getInstance()\nval time = calendar.time\nval currentTime: String = SimpleDateFormat(\"HH:mm\").format(time)\n\nif(currentTime.compareTo(open) &gt;= 0 currentTime.compareTo(close) &lt; 0){\n    // do something is open\n}\nelse{\n    // do something is close\n}\n</code></pre>\n\n<p>I using <code>kotlin</code>, maybe somebody can help me using <code>java</code> too</p>\n"}, {"tags": ["kotlin", "java-time", "moshi"], "comments": [{"owner": {"reputation": 7292, "user_id": 1696171, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/LRC6m.jpg?s=128&g=1", "display_name": "Eric Cochran", "link": "https://stackoverflow.com/users/1696171/eric-cochran"}, "edited": false, "score": 0, "creation_date": 1523354934, "post_id": 49750743, "comment_id": 86516136, "body": "is this a Joda time LocalDateTime or the java.time one?"}, {"owner": {"reputation": 5063, "user_id": 561259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4262a93ff76921c138e8fe7c551107c5?s=128&d=identicon&r=PG", "display_name": "Desmond Lua", "link": "https://stackoverflow.com/users/561259/desmond-lua"}, "reply_to_user": {"reputation": 7292, "user_id": 1696171, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/LRC6m.jpg?s=128&g=1", "display_name": "Eric Cochran", "link": "https://stackoverflow.com/users/1696171/eric-cochran"}, "edited": false, "score": 1, "creation_date": 1523355197, "post_id": 49750743, "comment_id": 86516312, "body": "@EricCochran java.time, I am actually using ThreeTenABP which is a JSR-310 backport."}, {"owner": {"reputation": 7292, "user_id": 1696171, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/LRC6m.jpg?s=128&g=1", "display_name": "Eric Cochran", "link": "https://stackoverflow.com/users/1696171/eric-cochran"}, "edited": false, "score": 0, "creation_date": 1523403080, "post_id": 49750743, "comment_id": 86544067, "body": "when your JSON is coming in, do you know what format it is going to be? like <code>class Foo { LocalDateTime usesFormat1; }</code> and <code>class Bar { LocalDateTime usesFormat2; }</code>  or, do you not know and need to handle either format for all your uses of LocalDateTime?"}, {"owner": {"reputation": 5063, "user_id": 561259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4262a93ff76921c138e8fe7c551107c5?s=128&d=identicon&r=PG", "display_name": "Desmond Lua", "link": "https://stackoverflow.com/users/561259/desmond-lua"}, "reply_to_user": {"reputation": 7292, "user_id": 1696171, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/LRC6m.jpg?s=128&g=1", "display_name": "Eric Cochran", "link": "https://stackoverflow.com/users/1696171/eric-cochran"}, "edited": false, "score": 0, "creation_date": 1523413592, "post_id": 49750743, "comment_id": 86546596, "body": "@EricCochran I won&#39;t know the expected format, so the adapter needs a mechanism to detect/guest the format."}, {"owner": {"reputation": 7292, "user_id": 1696171, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/LRC6m.jpg?s=128&g=1", "display_name": "Eric Cochran", "link": "https://stackoverflow.com/users/1696171/eric-cochran"}, "edited": false, "score": 1, "creation_date": 1523413670, "post_id": 49750743, "comment_id": 86546620, "body": "\ud83d\udc4d then Jesse&#39;s answer is perfect for you!"}], "answers": [{"comments": [{"owner": {"reputation": 5063, "user_id": 561259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4262a93ff76921c138e8fe7c551107c5?s=128&d=identicon&r=PG", "display_name": "Desmond Lua", "link": "https://stackoverflow.com/users/561259/desmond-lua"}, "edited": false, "score": 1, "creation_date": 1523429206, "post_id": 49765472, "comment_id": 86551657, "body": "Thank for showing the way to use JsonQualifier and accessing defaultAdapter. I have documented the problem and solution: <a href=\"https://code.luasoftware.com/tutorials/android/moshi-datetime-adapter-with-multiple-format-support/\" rel=\"nofollow noreferrer\">code.luasoftware.com/tutorials/android/&hellip;</a>"}], "tags": [], "owner": {"reputation": 33145, "user_id": 40013, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/92c80ad799d0788de9ec7a4e3a26f98d?s=128&d=identicon&r=PG", "display_name": "Jesse Wilson", "link": "https://stackoverflow.com/users/40013/jesse-wilson"}, "is_accepted": true, "score": 11, "last_activity_date": 1523413161, "creation_date": 1523413161, "answer_id": 49765472, "question_id": 49750743, "link": "https://stackoverflow.com/questions/49750743/moshi-localdatetime-adapter-with-multiple-format/49765472#49765472", "title": "Moshi LocalDateTime adapter with multiple format", "body": "<p>You\u2019ll need to use <code>JsonReader.peek()</code> to determine the format of the incoming JSON, and then take action accordingly.</p>\n\n<p>First install an adapter that converts <code>LocalDateTime</code> to a string. That adapter should use a qualifier annotation.</p>\n\n<pre><code>@Retention(RetentionPolicy.RUNTIME)\n@JsonQualifier\n@interface DateString {\n}\n</code></pre>\n\n<p>Next create the string adapter. It should be straightforward, and might delegate to Moshi\u2019s built-in Rfc3339DateJsonAdapter.</p>\n\n<pre><code>public final class LocalDateAsStringAdapter {\n  @ToJson String toJson(@DateString LocalDateTime localDateTime) {\n    ...\n  }\n\n  @FromJson @DateString LocalDateTime fromJson(String string) {\n    ...\n  }\n}\n</code></pre>\n\n<p>Finally create an adapter that delegates either to Moshi\u2019s built in adapter (that one will use <code>{...}</code>) or to your string adapter. This one prefers the string format, but you can do what you like.</p>\n\n<pre><code>public final class MultipleFormatsDateAdapter {\n  @ToJson void toJson(JsonWriter writer, LocalDateTime value,\n      @DateString JsonAdapter&lt;LocalDateTime&gt; stringAdapter) throws IOException {\n    stringAdapter.toJson(writer, value);\n  }\n\n  @FromJson LocalDateTime fromJson(JsonReader reader, @DateString JsonAdapter&lt;LocalDateTime&gt; stringAdapter,\n      JsonAdapter&lt;LocalDateTime&gt; defaultAdapter) throws IOException {\n    if (reader.peek() == JsonReader.Token.STRING) {\n      return stringAdapter.fromJson(reader);\n    } else {\n      return defaultAdapter.fromJson(reader);\n    }\n  }\n}\n</code></pre>\n\n<p>This works because Moshi lets you declare multiple <code>JsonAdapter</code> arguments to the <code>@ToJson</code> and <code>@FromJson</code> methods, and these arguments may be annotated.</p>\n\n<p>It also relies on the way this feature works if the types are the same. Here we\u2019re making a <code>JsonAdapter&lt;LocalDateTime&gt;</code> by delegating to another <code>JsonAdapter&lt;LocalDateTime&gt;</code>. When the types are the same Moshi uses its <code>nextAdapter()</code> feature for composition.</p>\n"}], "owner": {"reputation": 5063, "user_id": 561259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4262a93ff76921c138e8fe7c551107c5?s=128&d=identicon&r=PG", "display_name": "Desmond Lua", "link": "https://stackoverflow.com/users/561259/desmond-lua"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3107, "favorite_count": 2, "accepted_answer_id": 49765472, "answer_count": 1, "score": 9, "last_activity_date": 1523424080, "creation_date": 1523354340, "last_edit_date": 1523424080, "question_id": 49750743, "link": "https://stackoverflow.com/questions/49750743/moshi-localdatetime-adapter-with-multiple-format", "title": "Moshi LocalDateTime adapter with multiple format", "body": "<p>By default, ThreeTenABP.LocalDateTime is converted to</p>\n\n<p><code>{\"date\":{\"day\":10,\"month\":4,\"year\":2018},\"time\":{\"hour\":3,\"minute\":34,\"nano\":115000000,\"second\":18}}</code></p>\n\n<p>I can write an adapter to support ISO date string <code>2018-04-10T03:45:26.009</code></p>\n\n<pre><code>class LocalDateTimeAdapter {\n    @ToJson\n    fun toJson(value: LocalDateTime): String {\n        return FORMATTER.format(value)\n    }\n\n    @FromJson\n    fun fromJson(value: String): LocalDateTime {\n        return FORMATTER.parse(value, LocalDateTime.FROM)\n    }\n\n    companion object {\n        private val FORMATTER = DateTimeFormatter.ISO_LOCAL_DATE_TIME\n    }\n}\n</code></pre>\n\n<p>How can I write an adapter which can support both format (fromJson)</p>\n\n<ul>\n<li><code>{\"date\":{\"day\":10,\"month\":4,\"year\":2018},\"time\":{\"hour\":3,\"minute\":34,\"nano\":115000000,\"second\":18}}</code></li>\n<li><code>2018-04-10T03:45:26.009</code></li>\n</ul>\n\n<p>Beside identifying which the format is used in <code>fromJson</code>, I am curious how Moshi internally perform toJson/fromJson for LocalDateTime</p>\n"}, {"tags": ["android", "kotlin", "bottomnavigationview"], "answers": [{"tags": [], "owner": {"reputation": 17304, "user_id": 3363481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o4HU5.png?s=128&g=1", "display_name": "earthw0rmjim", "link": "https://stackoverflow.com/users/3363481/earthw0rmjim"}, "is_accepted": true, "score": 2, "last_activity_date": 1523362773, "last_edit_date": 1523362773, "creation_date": 1523359944, "answer_id": 49752558, "question_id": 49750496, "link": "https://stackoverflow.com/questions/49750496/changing-item-colors-individually-in-bottomnavigationview/49752558#49752558", "title": "Changing item colors individually in BottomNavigationView", "body": "<p>To set the color of all items, you could simply call <a href=\"https://developer.android.com/reference/android/support/design/widget/BottomNavigationView.html#setItemTextColor(android.content.res.ColorStateList)\" rel=\"nofollow noreferrer\"><code>setItemTextColor()</code></a> on your <code>BottomNavigationView</code> instance.</p>\n\n<p>To set them individually, you could use a <code>SpannableString</code>:</p>\n\n<pre><code>val titleSpannable = SpannableString(\"title\")\n\ntitleSpannable.setSpan(\n    ForegroundColorSpan(Color.parseColor(\"#ffffff\")),\n    0,\n    titleString.length,\n    Spanned.SPAN_EXCLUSIVE_EXCLUSIVE)\n\nbottomNavigationView.menu.findItem(R.id.your_item_id).title = titleSpannable\n</code></pre>\n"}], "owner": {"reputation": 825, "user_id": 8286029, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2b4188ba2c535940200876c2cc665f89?s=128&d=identicon&r=PG&f=1", "display_name": "Elynad", "link": "https://stackoverflow.com/users/8286029/elynad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1009, "favorite_count": 0, "accepted_answer_id": 49752558, "answer_count": 1, "score": 1, "last_activity_date": 1523362773, "creation_date": 1523353715, "last_edit_date": 1523362680, "question_id": 49750496, "link": "https://stackoverflow.com/questions/49750496/changing-item-colors-individually-in-bottomnavigationview", "title": "Changing item colors individually in BottomNavigationView", "body": "<p>I am looking for a way to programatically change my item colors in my <code>BottomNavigationView</code>.</p>\n\n<p>I found out how to change icons color, i did it as following :</p>\n\n<pre><code>fun setMenu(selected: Int) {\n    bottomNavigationMenu?.let {\n        it.menu.findItem(R.id.bottom_menu_home).icon\n                .setColorFilter(getMenuColor(R.id.bottom_menu_home, selected), PorterDuff.Mode.SRC_ATOP)\n        // more items\n        it.menu.findItem(R.id.bottom_menu_fidelity)?.icon\n                ?.setColorFilter(getMenuColor(R.id.bottom_menu_fidelity, selected), PorterDuff.Mode.SRC_ATOP)\n    }\n}\n\nfun getMenuColor(id: Int, selected: Int): Int {\n    if (Singletons.restaurant.title.isBlank())\n        getRestaurant()\n    else {\n        if (id == selected) return (Singletons.restaurant.color)\n        else return ContextCompat.getColor(this, R.color.grey7E)\n    }\n    return (0)\n}\n</code></pre>\n\n<p>Now I am looking for how to change the title color.\nI am looking for something like</p>\n\n<pre><code>it.menu.findItem(R.id.bottom_menu_home).title // etc\n</code></pre>\n\n<p>but I can't find a correct function to do it.</p>\n\n<p>Here is my items from <em>main_bottom_menu.xml</em> :</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;menu xmlns:tools=\"http://schemas.android.com/tools\"\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"&gt;\n\n    &lt;item\n        android:id=\"@+id/bottom_menu_home\"\n        android:enabled=\"true\"\n        android:icon=\"@drawable/ic_home\"\n        android:iconTint=\"@color/cardview_dark_background\"\n        android:title=\"@string/bottom_menu_home\"\n        android:visible=\"false\"\n        app:showAsAction=\"ifRoom\" /&gt;\n\n    &lt;!-- 3 more items --&gt;\n\n    &lt;item\n        android:id=\"@+id/bottom_menu_profile\"\n        android:enabled=\"true\"\n        android:icon=\"@drawable/ic_profile\"\n        android:iconTint=\"@color/cardview_dark_background\"\n        android:title=\"@string/bottom_menu_profile\"\n        android:visible=\"false\"\n        app:showAsAction=\"ifRoom\" /&gt;\n\n&lt;/menu&gt;\n</code></pre>\n\n<p>Oddly, the text color is equal to my <code>colorPrimary</code>, so it has to be set somewhere.\nThe goal is to dynamically set a color (from an API).\nAny idea of where was my title color set ?</p>\n"}, {"tags": ["android", "android-studio", "kotlin", "android-gradle-plugin"], "comments": [{"owner": {"reputation": 69545, "user_id": 3395198, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/CJtaZ.jpg?s=128&g=1", "display_name": "IntelliJ Amiya", "link": "https://stackoverflow.com/users/3395198/intellij-amiya"}, "edited": false, "score": 0, "creation_date": 1523365313, "post_id": 49750307, "comment_id": 86523402, "body": "use <code>12.0.0</code> instead of  <code>11.8.0</code>"}, {"owner": {"reputation": 1988, "user_id": 4149649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wf9Kc.jpg?s=128&g=1", "display_name": "Yuri Misyac", "link": "https://stackoverflow.com/users/4149649/yuri-misyac"}, "reply_to_user": {"reputation": 69545, "user_id": 3395198, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/CJtaZ.jpg?s=128&g=1", "display_name": "IntelliJ Amiya", "link": "https://stackoverflow.com/users/3395198/intellij-amiya"}, "edited": false, "score": 0, "creation_date": 1523376561, "post_id": 49750307, "comment_id": 86531568, "body": "@IntelliJAmiya unfortunately it has not helped"}, {"owner": {"reputation": 505, "user_id": 6170625, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-OVkMtjC5wgQ/AAAAAAAAAAI/AAAAAAAAAJo/ZMsQ-loF1Bw/photo.jpg?sz=128", "display_name": "Pranav Ashok", "link": "https://stackoverflow.com/users/6170625/pranav-ashok"}, "edited": false, "score": 0, "creation_date": 1523377941, "post_id": 49750307, "comment_id": 86532357, "body": "just upgrade your gradle to 4.1"}], "answers": [{"tags": [], "owner": {"reputation": 1988, "user_id": 4149649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wf9Kc.jpg?s=128&g=1", "display_name": "Yuri Misyac", "link": "https://stackoverflow.com/users/4149649/yuri-misyac"}, "is_accepted": true, "score": 0, "last_activity_date": 1523377343, "creation_date": 1523377343, "answer_id": 49758550, "question_id": 49750307, "link": "https://stackoverflow.com/questions/49750307/android-build-tools-3-1-1-failed-build-finished-with-non-zero-exit-value-1/49758550#49758550", "title": "Android Build Tools 3.1.1 failed build finished with non-zero exit value 1", "body": "<p>I found out that the problem was, <code>desugar java 8</code>, when I removed </p>\n\n<pre><code>compileOptions {\n    sourceCompatibility JavaVersion.VERSION_1_8\n    targetCompatibility JavaVersion.VERSION_1_8\n}\n</code></pre>\n\n<p>and converted classes with <code>java 8</code> features to <code>kotlin</code> the project has been successfully builded.</p>\n"}], "owner": {"reputation": 1988, "user_id": 4149649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wf9Kc.jpg?s=128&g=1", "display_name": "Yuri Misyac", "link": "https://stackoverflow.com/users/4149649/yuri-misyac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 827, "favorite_count": 0, "accepted_answer_id": 49758550, "answer_count": 1, "score": 0, "last_activity_date": 1523377343, "creation_date": 1523353201, "question_id": 49750307, "link": "https://stackoverflow.com/questions/49750307/android-build-tools-3-1-1-failed-build-finished-with-non-zero-exit-value-1", "title": "Android Build Tools 3.1.1 failed build finished with non-zero exit value 1", "body": "<p>When I updated <code>Android Studio</code> to <code>3.1.1</code> version I got <code>finished with non-zero exit value 1</code> error. I found out that it problem with <code>com.android.tools.build:gradle</code> because when I switch back to <code>3.0.1</code> build finished successfully.</p>\n\n<p>app <strong>build.gradle</strong></p>\n\n<pre><code>plugins {\n    id \"io.github.rockerhieu.versionberg\" version \"1.0.0\"\n}\n\napply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-kapt'\napply plugin: 'io.fabric'\napply plugin: 'com.google.firebase.firebase-perf'\napply plugin: 'com.github.triplet.play'\n\nversionberg {\n    major 1\n    minor 0\n    nameTemplate '${major}.${minor}.0'\n}\n\nandroid {\n    compileSdkVersion rootProject.ext.compileSdkVersion\n    buildToolsVersion rootProject.ext.buildToolsVersion\n    //noinspection GroovyMissingReturnStatement\n    defaultConfig {\n        applicationId \"com.app.appid\"\n\n        minSdkVersion rootProject.ext.minSdkVersion\n        targetSdkVersion rootProject.ext.targetSdkVersion\n\n        multiDexEnabled true\n\n        versionCode versionberg.code\n        versionName \"1.0.0\"\n\n        testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n\n        renderscriptTargetApi 25\n        renderscriptSupportModeEnabled false\n\n    }\n\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n\n    lintOptions {\n        abortOnError false\n    }\n\n    kapt {\n        generateStubs = true\n        mapDiagnosticLocations = true\n    }\n\n    dataBinding {\n        enabled = true\n    }\n\n    buildTypes {\n        debug {\n            ext.enableCrashlytics = false\n            ext.betaDistributionNotifications = false\n\n            applicationIdSuffix \".debug\"\n\n        }\n\n        qa {\n            ext.betaDistributionNotifications = false\n\n            applicationIdSuffix \".qa\"\n\n            signingConfig signingConfigs.qa\n\n        }\n\n        release {\n            ext.betaDistributionNotifications = false\n\n            minifyEnabled false\n            signingConfig signingConfigs.release\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n\n        }\n\n        android.applicationVariants.all { variant -&gt;\n            variant.outputs.all {\n                outputFileName = \"${getAppName()}_${defaultConfig.versionName}-${defaultConfig.versionCode}(${variant.buildType.name}).apk\"\n            }\n        }\n\n    }\n\n    packagingOptions {\n        exclude 'META-INF/LICENSE.txt'\n        exclude 'META-INF/NOTICE.txt'\n        exclude 'META-INF/rxjava.properties'\n        exclude 'org/joda/time/format/*.properties'\n    }\n}\n\ndef getAppName() {\n    def stringsFile = android.sourceSets.main.res.sourceFiles.find { it.name.equals 'strings.xml' }\n    return new XmlParser().parse(stringsFile).string.find { it.@name.equals 'app_name' }.text()\n}\n\nconfigurations {\n    all*.exclude group: 'commons-logging', module: 'commons-logging'\n}\n\ndependencies {\n    implementation fileTree(include: ['*.jar'], dir: 'libs')\n    androidTestImplementation('com.android.support.test.espresso:espresso-core:2.2.2', {\n        exclude group: 'com.android.support', module: 'support-annotations'\n    })\n    testImplementation \"junit:junit:$rootProject.junitLibraryVersion\"\n    testImplementation \"org.mockito:mockito-core:$rootProject.mockitoCoreLobraryVersion\"\n    testImplementation \"org.robolectric:robolectric:$rootProject.robolectricLibraryVersion\"\n\n    implementation \"com.android.support:appcompat-v7:$rootProject.supportLibraryVersion\"\n    implementation \"com.android.support:cardview-v7:$rootProject.supportLibraryVersion\"\n    implementation \"com.android.support:recyclerview-v7:$rootProject.supportLibraryVersion\"\n    implementation \"com.android.support:design:$rootProject.supportLibraryVersion\"\n    implementation \"com.android.support:palette-v7:$rootProject.supportLibraryVersion\"\n    implementation \"com.android.support.constraint:constraint-layout:\" +\n            \"$rootProject.constraintLayoutLibraryVersion\"\n\n    implementation \"android.arch.lifecycle:extensions:1.1.1\"\n\n    implementation \"com.google.firebase:firebase-core:$rootProject.firebaseLibraryVersion\"\n    implementation \"com.google.firebase:firebase-database:$rootProject.firebaseLibraryVersion\"\n    implementation \"com.google.firebase:firebase-storage:$rootProject.firebaseLibraryVersion\"\n    implementation \"com.google.firebase:firebase-messaging:$rootProject.firebaseLibraryVersion\"\n    implementation \"com.google.firebase:firebase-perf:$rootProject.firebaseLibraryVersion\"\n\n    implementation \"com.firebaseui:firebase-ui-database:$rootProject.firebaseUiLibraryVersion\"\n    implementation \"com.firebaseui:firebase-ui-storage:$rootProject.firebaseUiLibraryVersion\"\n\n    implementation 'com.firebase:firebase-jobdispatcher:0.8.2'\n\n    implementation \"com.google.android.gms:play-services-maps:$rootProject.playServicesLibraryVersion\"\n    implementation \"com.google.android.gms:play-services-location:$rootProject.playServicesLibraryVersion\"\n\n    implementation \"com.google.android:flexbox:$rootProject.flexboxLibraryVersion\"\n    implementation 'com.github.lsjwzh.RecyclerViewPager:lib:v1.1.2'\n    kapt \"com.android.databinding:compiler:$android_tools_version\"\n\n    implementation \"com.google.android:flexbox:$rootProject.flexboxLibraryVersion\"\n    implementation 'com.github.lsjwzh.RecyclerViewPager:lib:v1.1.2'\n\n    implementation \"com.github.bumptech.glide:glide:$rootProject.glideLibraryVersion\"\n    kapt \"com.github.bumptech.glide:compiler:$rootProject.glideLibraryVersion\"\n    implementation \"com.github.bumptech.glide:okhttp3-integration:\" +\n            \"$rootProject.glideLibraryVersion\"\n\n    implementation('jp.wasabeef:glide-transformations:3.0.1') {\n        exclude group: 'com.github.bumptech.glide', module: 'glide'\n    }\n\n    implementation \"com.squareup.retrofit2:retrofit:$rootProject.retrofitLibraryVersion\"\n    implementation \"com.squareup.retrofit2:adapter-rxjava:$rootProject.retrofitLibraryVersion\"\n    implementation \"com.squareup.retrofit2:adapter-rxjava2:$rootProject.retrofitLibraryVersion\"\n    implementation \"com.squareup.retrofit2:converter-gson:$rootProject.retrofitLibraryVersion\"\n    implementation \"com.squareup.okhttp3:logging-interceptor:$rootProject.okHttpLibraryVersion\"\n\n    implementation \"com.google.code.gson:gson:2.8.2\"\n\n    implementation 'com.squareup.moshi:moshi:1.5.0'\n\n    implementation 'com.jakewharton.timber:timber:4.5.1'\n\n    implementation \"com.github.akarnokd:rxjava2-interop:0.10.0\"\n\n    implementation('com.crashlytics.sdk.android:crashlytics:2.6.8@aar') {\n        transitive = true\n    }\n    implementation('com.crashlytics.sdk.android:answers:1.3.10@aar') {\n        transitive = true\n    }\n\n    compile project(':libmediapicker')\n    compile project(':libhorizontalpicker')\n    compile project(':librangebar')\n    compile project(':libsignature')\n\n    implementation 'nz.bradcampbell:paperparcel:2.0.1'\n    implementation 'nz.bradcampbell:paperparcel-kotlin:2.0.1'\n    kapt 'nz.bradcampbell:paperparcel-compiler:2.0.1'\n\n    implementation \"net.danlew:android.joda:$rootProject.jodaTimeLibraryVersion\"\n\n    implementation \"com.arello-mobile:moxy:$rootProject.moxyLibraryVersion\"\n    implementation \"com.arello-mobile:moxy-app-compat:$rootProject.moxyLibraryVersion\"\n    kapt \"com.arello-mobile:moxy-compiler:$rootProject.moxyLibraryVersion\"\n\n    // Dagger core dependencies\n    implementation \"com.google.dagger:dagger:$rootProject.daggerLibraryVersion\"\n    kapt \"com.google.dagger:dagger-compiler:$rootProject.daggerLibraryVersion\"\n    implementation \"com.google.dagger:dagger-android:$rootProject.daggerLibraryVersion\"\n    implementation \"com.google.dagger:dagger-android-support:$rootProject.daggerLibraryVersion\"\n    kapt \"com.google.dagger:dagger-android-processor:$rootProject.daggerLibraryVersion\"\n\n    compileOnly 'org.glassfish:javax.annotation:10.0-b28'\n\n    implementation \"io.reactivex:rxjava:$rootProject.rxJavaLibraryVersion\"\n    implementation \"io.reactivex:rxandroid:$rootProject.rxAndroidLibraryVersion\"\n\n    implementation \"io.reactivex.rxjava2:rxkotlin:$rootProject.rxKotlinLibraryVersion\"\n    implementation \"io.reactivex.rxjava2:rxandroid:$rootProject.rxAndroidV2LibraryVersion\"\n\n    implementation \"com.github.VictorAlbertos:RxActivityResult:$rootProject.rxActivityResult2LibraryVersion\"\n    implementation \"com.tbruyelle.rxpermissions2:rxpermissions:$rootProject.rxPermissionsLibraryVersion\"\n    implementation \"com.github.miguelbcr:RxPaparazzo:$rootProject.rxPaparazzoLibraryVersion\"\n\n    implementation \"com.f2prateek.rx.preferences:rx-preferences:$rootProject.rxPreferencesLibraryVersion\"\n    implementation \"com.f2prateek.rx.preferences2:rx-preferences:$rootProject.rxPreferences2LibraryVersion\"\n\n    implementation \"com.jakewharton.rxbinding:rxbinding-appcompat-v7:$rootProject.rxBindingLibraryVersion\"\n    implementation \"com.jakewharton.rxbinding:rxbinding-support-v4:$rootProject.rxBindingLibraryVersion\"\n\n    implementation \"com.pushtorefresh.storio:sqlite:$rootProject.storioLibraryVersion\"\n    implementation \"com.pushtorefresh.storio:sqlite-annotations:$rootProject.storioLibraryVersion\"\n    kapt \"com.pushtorefresh.storio:sqlite-annotations-processor:$rootProject.storioLibraryVersion\"\n\n    implementation \"im.ene.toro3:toro:3.3.0\"\n    implementation \"im.ene.toro3:toro-ext-exoplayer:3.3.0\"  // to get ExoPlayer support\n    implementation 'com.thoughtbot:expandablerecyclerview:1.3'\n    implementation 'com.github.chrisbanes:PhotoView:1.3.1'\n    implementation 'com.github.barteksc:android-pdf-viewer:2.4.0'\n    implementation 'me.grantland:autofittextview:0.2.1'\n\n    implementation \"com.jsqix.dq.indicator:monindicator:$rootProject.monIndicatorLibraryVersion\"\n\n    implementation 'ca.barrenechea.header-decor:header-decor:0.2.8'\n\n    implementation 'org.apache.commons:commons-lang3:3.0'\n\n    implementation 'com.github.adrielcafe:AndroidAudioRecorder:0.2.0'\n\n    implementation 'com.tonicartos:superslim:0.4.13'\n\n    implementation 'com.jakewharton:kotterknife:0.1.0-SNAPSHOT'\n\n    //Development\n    implementation 'com.squareup.leakcanary:leakcanary-android:1.5.4'\n    implementation 'com.facebook.stetho:stetho:1.4.2'\n    implementation 'com.facebook.stetho:stetho-okhttp3:1.4.2'\n\n    debugImplementation 'com.amitshekhar.android:debug-db:1.0.1'\n\n    // intercom\n    implementation 'io.intercom.android:intercom-sdk-base:4.0.0'\n    implementation 'io.intercom.android:intercom-sdk-fcm:4.0.0'\n\n    implementation('io.fabric.sdk.android:fabric:1.3.10@aar') {\n        transitive = true\n    }\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n\n    implementation \"org.jetbrains.anko:anko-commons:$rootProject.anko_version\"\n\n    implementation 'com.flaviofaria:kenburnsview:1.0.7'\n\n\n    implementation 'com.yayandroid:ParallaxRecyclerView:1.1'\n\n    implementation 'pl.charmas.android:android-reactive-location:0.10@aar'\n\n    implementation 'com.edmodo:cropper:1.0.1'\n\n    implementation \"me.zhanghai.android.materialprogressbar:library:$rootProject.materialprogressbarLibraryVersion\"\n\n    implementation 'com.kyleduo.switchbutton:library:1.4.6'\n\n    implementation \"net.danlew:android.joda:$rootProject.jodaTimeLibraryVersion\"\n\n    implementation 'com.github.aakira:expandable-layout:1.6.0@aar'\n    implementation 'com.github.aakira:expandable-layout:1.6.0@aar'\n\n    implementation 'jp.wasabeef:recyclerview-animators:2.2.7'\n\n    implementation 'it.sephiroth.android.library.targettooltip:target-tooltip-library:1.3.15'\n\n    // Barcode scanner library\n    implementation 'me.dm7.barcodescanner:zxing:1.9.8'\n\n    // Signature lib\n    implementation 'com.github.gcacace:signature-pad:1.2.1'\n\n    implementation 'com.github.markomilos:paginate:0.5.1'\n\n    // View pager circular indicator\n    implementation 'me.relex:circleindicator:1.2.2@aar'\n\n    implementation 'com.airbnb.android:lottie:2.3.1'\n\n    implementation 'com.afollestad:easyvideoplayer:0.3.0'\n\n    implementation 'com.danikula:videocache:2.7.0'\n\n    implementation 'jp.wasabeef:blurry:2.1.1'\n\n    implementation 'io.supercharge:shimmerlayout:2.0.0'\n\n    implementation('com.giphy.sdk:core:1.0.2@aar') {\n        transitive = true\n    }\n\n}\n\napply plugin: 'com.google.gms.google-services'\n</code></pre>\n\n<p>root <strong>build.gradle</strong></p>\n\n<pre><code>buildscript {\n\n    ext.kotlin_version = '1.2.31'\n    ext.android_tools_version = '3.1.1'\n\n    repositories {\n        jcenter()\n        google()\n        maven { url 'https://maven.fabric.io/public' }\n        maven { url \"https://jitpack.io\" }\n    }\n\n    dependencies {\n        classpath \"com.android.tools.build:gradle:$android_tools_version\"\n        classpath 'com.google.gms:google-services:3.1.1'\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n        classpath 'com.google.firebase:firebase-plugins:1.1.1'\n        classpath 'io.fabric.tools:gradle:1.22.1'\n        classpath 'com.github.triplet.gradle:play-publisher:1.2.0'\n    }\n}\n\nallprojects {\n    repositories {\n        jcenter()\n        maven { url \"https://jitpack.io\" }\n        maven { url \"https://oss.sonatype.org/content/repositories/snapshots\" }\n        maven { url 'https://maven.fabric.io/public' }\n        maven { url \"https://dl.bintray.com/drummer-aidan/maven\" }\n        maven { url \"https://giphy.bintray.com/giphy-sdk\" }\n        mavenCentral()\n        google()\n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n\next {\n    // Sdk and tools\n    minSdkVersion = 21\n    targetSdkVersion = 27\n    compileSdkVersion = 27\n    buildToolsVersion = '27.0.3'\n\n    // App dependencies\n    supportLibraryVersion = '27.1.0'\n    constraintLayoutLibraryVersion = '1.0.2'\n    playServicesLibraryVersion = '11.8.0' /* https://developers.google.com/android/guides/setup */\n    firebaseLibraryVersion = playServicesLibraryVersion\n    flexboxLibraryVersion = '0.3.1' /* https://github.com/google/flexbox-layout/releases */\n    gsonLibraryVersion = '2.8.1' /* https://github.com/google/gson/releases */\n    daggerLibraryVersion = '2.14.1' /* https://github.com/google/dagger/releases */\n    retrofitLibraryVersion = '2.3.0' /* https://github.com/square/retrofit/releases */\n    okHttpLibraryVersion = '3.8.0' /* https://github.com/square/okhttp/releases */\n    moxyLibraryVersion = '1.5.3' /* https://github.com/Arello-Mobile/Moxy/releases */\n    firebaseUiLibraryVersion = '3.1.0' /* https://github.com/firebase/FirebaseUI-Android/releases */\n    lightweightStreamLibraryVersion = '1.1.4'\n    monIndicatorLibraryVersion = '1.0.0'\n    storioLibraryVersion = '1.13.0' /* https://github.com/pushtorefresh/storio/releases */\n    storioLibraryVersion2 = '2.0.0' /* https://github.com/pushtorefresh/storio/releases */\n    glideLibraryVersion = '4.3.1'\n    glideOkhttp3IntegrationLibraryVersion = '1.4.0@aar'\n    rxJavaLibraryVersion = '1.3.3' /* https://github.com/ReactiveX/RxJava/releases */\n    rxJavaV2LibraryVersion = '2.1.6' /* https://github.com/ReactiveX/RxJava/releases */\n    rxAndroidLibraryVersion = '1.2.1' /* https://github.com/ReactiveX/RxAndroid/releases */\n    rxAndroidV2LibraryVersion = '2.0.1' /* https://github.com/ReactiveX/RxAndroid/releases */\n    rxKotlinLibraryVersion = '2.1.0' /* https://github.com/ReactiveX/RxKotlin/releases */\n    rxBindingLibraryVersion = '1.0.0'\n    rxPreferencesLibraryVersion = '1.0.2'\n    rxPreferences2LibraryVersion = '2.0.0-RC3'\n    rxActivityResult2LibraryVersion = '0.4.5-2.x'\n    /* https://github.com/VictorAlbertos/RxActivityResult/releases */\n    rxPermissionsLibraryVersion = '0.9.4@aar'\n    /* https://github.com/tbruyelle/RxPermissions/releases */\n    rxPaparazzoLibraryVersion = '0.6.0-2.x' /* https://github.com/miguelbcr/RxPaparazzo/releases */\n    materialprogressbarLibraryVersion = '1.4.1'\n    jodaTimeLibraryVersion = '2.9.9'\n\n    junitLibraryVersion = '4.12'\n    mockitoCoreLobraryVersion = '1.9.5'\n    robolectricLibraryVersion = '3.0'\n\n    timberLibraryVersion = '4.5.1' /* https://github.com/JakeWharton/timber/releases */\n    anko_version = '0.10.1' /* https://github.com/Kotlin/anko/releases */\n}\n</code></pre>\n\n<p><strong>gradle.properties</strong></p>\n\n<pre><code>org.gradle.jvmargs=-Xmx2g -XX:MaxPermSize=512m -XX:+HeapDumpOnOutOfMemoryError -XX:+UseConcMarkSweepGC -Dfile.encoding=UTF-8\nkotlin.incremental=true\norg.gradle.parallel=true\norg.gradle.caching=true\nandroid.enableBuildCache=true\nandroid.enableD8=true\n</code></pre>\n\n<p>I tried:</p>\n\n<ul>\n<li>change <code>jdk</code> to <code>open jdk 8</code> and <code>oracle jdk 10</code> from embedded jdk.</li>\n<li>remove <code>android.enableD8=true</code> and <code>kapt \"com.android.databinding:compiler:$android_tools_version\"</code></li>\n<li>clear/build and Invalidate Caches/Restart</li>\n</ul>\n\n<p>nothing help :(</p>\n"}, {"tags": ["android", "kotlin"], "owner": {"reputation": 2752, "user_id": 4626826, "user_type": "registered", "accept_rate": 46, "profile_image": "https://lh4.googleusercontent.com/-ZhfxrA-NG-k/AAAAAAAAAAI/AAAAAAAAAAA/q56lHKqg0WU/photo.jpg?sz=128", "display_name": "Vishwajit Palankar", "link": "https://stackoverflow.com/users/4626826/vishwajit-palankar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 577, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1523347568, "creation_date": 1523347568, "question_id": 49748467, "link": "https://stackoverflow.com/questions/49748467/kotlin-android-studio-3-1-noclassdeffounderror", "title": "Kotlin Android studio 3.1 NoClassDefFoundError", "body": "<p>I am using Kotlin to develop an android app and everything was working fine but from past two days, while running the app I am getting the following Error.</p>\n\n<pre><code>java.lang.NoClassDefFoundError: Could not initialize class org.jetbrains.kotlin.diagnostics.DiagnosticUtils\nat org.jetbrains.kotlin.types.expressions.ExpressionTypingVisitorDispatcher.logOrThrowException(ExpressionTypingVisitorDispatcher.java:244)\nat org.jetbrains.kotlin.types.expressions.ExpressionTypingVisitorDispatcher.lambda$getTypeInfo$0(ExpressionTypingVisitorDispatcher.java:222)\nat org.jetbrains.kotlin.util.PerformanceCounter.time(PerformanceCounter.kt:90)\nat org.jetbrains.kotlin.types.expressions.ExpressionTypingVisitorDispatcher.getTypeInfo(ExpressionTypingVisitorDispatcher.java:172)\nat org.jetbrains.kotlin.types.expressions.ExpressionTypingVisitorDispatcher.getTypeInfo(ExpressionTypingVisitorDispatcher.java:143)\nat org.jetbrains.kotlin.types.expressions.ExpressionTypingVisitorDispatcher.getTypeInfo(ExpressionTypingVisitorDispatcher.java:155)\nat org.jetbrains.kotlin.types.expressions.ExpressionTypingServices.getTypeInfo(ExpressionTypingServices.java:123)\nat org.jetbrains.kotlin.types.expressions.ExpressionTypingServices.getTypeInfo(ExpressionTypingServices.java:103)\nat org.jetbrains.kotlin.types.expressions.ExpressionTypingServices.getType(ExpressionTypingServices.java:139)\nat org.jetbrains.kotlin.types.expressions.ExpressionTypingServices.safeGetType(ExpressionTypingServices.java:89)\nat org.jetbrains.kotlin.resolve.VariableTypeAndInitializerResolver.resolveInitializerType(VariableTypeAndInitializerResolver.kt:159)\nat org.jetbrains.kotlin.resolve.VariableTypeAndInitializerResolver.access$resolveInitializerType(VariableTypeAndInitializerResolver.kt:36)\nat org.jetbrains.kotlin.resolve.VariableTypeAndInitializerResolver$resolveTypeNullable$1.invoke(VariableTypeAndInitializerResolver.kt:92)\nat org.jetbrains.kotlin.resolve.VariableTypeAndInitializerResolver$resolveTypeNullable$1.invoke(VariableTypeAndInitializerResolver.kt:36)\nat org.jetbrains.kotlin.storage.LockBasedStorageManager$LockBasedLazyValue.invoke(LockBasedStorageManager.java:323)\nat org.jetbrains.kotlin.storage.LockBasedStorageManager$LockBasedNotNullLazyValue.invoke(LockBasedStorageManager.java:370)\nat org.jetbrains.kotlin.types.DeferredType.getDelegate(DeferredType.java:78)\nat org.jetbrains.kotlin.resolve.BodyResolver.computeDeferredType(BodyResolver.java:946)\nat org.jetbrains.kotlin.resolve.BodyResolver.resolveProperty(BodyResolver.java:707)\nat org.jetbrains.kotlin.resolve.BodyResolver.resolvePropertyDeclarationBodies(BodyResolver.java:751)\nat org.jetbrains.kotlin.resolve.BodyResolver.resolveBehaviorDeclarationBodies(BodyResolver.java:116)\nat org.jetbrains.kotlin.resolve.BodyResolver.resolveBodies(BodyResolver.java:241)\nat org.jetbrains.kotlin.resolve.LazyTopDownAnalyzer.analyzeDeclarations(LazyTopDownAnalyzer.kt:215)\nat org.jetbrains.kotlin.resolve.LazyTopDownAnalyzer.analyzeDeclarations$default(LazyTopDownAnalyzer.kt:57)\nat org.jetbrains.kotlin.cli.jvm.compiler.TopDownAnalyzerFacadeForJVM.analyzeFilesWithJavaIntegration(TopDownAnalyzerFacadeForJVM.kt:112)\nat org.jetbrains.kotlin.cli.jvm.compiler.TopDownAnalyzerFacadeForJVM.analyzeFilesWithJavaIntegration$default(TopDownAnalyzerFacadeForJVM.kt:84)\nat org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler$analyze$1.invoke(KotlinToJVMBytecodeCompiler.kt:376)\nat org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler$analyze$1.invoke(KotlinToJVMBytecodeCompiler.kt:67)\nat org.jetbrains.kotlin.cli.common.messages.AnalyzerWithCompilerReport.analyzeAndReport(AnalyzerWithCompilerReport.kt:96)\nat org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.analyze(KotlinToJVMBytecodeCompiler.kt:367)\nat org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.compileModules(KotlinToJVMBytecodeCompiler.kt:132)\nat org.jetbrains.kotlin.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.kt:162)\nat org.jetbrains.kotlin.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.kt:63)\nat org.jetbrains.kotlin.cli.common.CLICompiler.execImpl(CLICompiler.java:109)\nat org.jetbrains.kotlin.cli.common.CLICompiler.execImpl(CLICompiler.java:53)\nat org.jetbrains.kotlin.cli.common.CLITool.exec(CLITool.kt:92)\nat org.jetbrains.kotlin.incremental.IncrementalJvmCompilerRunner.runCompiler(IncrementalJvmCompilerRunner.kt:451)\nat org.jetbrains.kotlin.incremental.IncrementalJvmCompilerRunner.runCompiler(IncrementalJvmCompilerRunner.kt:97)\nat org.jetbrains.kotlin.incremental.IncrementalCompilerRunner.compileIncrementally(IncrementalCompilerRunner.kt:218)\nat org.jetbrains.kotlin.incremental.IncrementalCompilerRunner.access$compileIncrementally(IncrementalCompilerRunner.kt:37)\nat org.jetbrains.kotlin.incremental.IncrementalCompilerRunner$compile$2.invoke(IncrementalCompilerRunner.kt:80)\nat org.jetbrains.kotlin.incremental.IncrementalCompilerRunner.compile(IncrementalCompilerRunner.kt:92)\nat org.jetbrains.kotlin.daemon.CompileServiceImpl.execIncrementalCompiler(CompileServiceImpl.kt:518)\nat org.jetbrains.kotlin.daemon.CompileServiceImpl.access$execIncrementalCompiler(CompileServiceImpl.kt:97)\nat org.jetbrains.kotlin.daemon.CompileServiceImpl$compile$$inlined$ifAlive$lambda$2.invoke(CompileServiceImpl.kt:400)\nat org.jetbrains.kotlin.daemon.CompileServiceImpl$compile$$inlined$ifAlive$lambda$2.invoke(CompileServiceImpl.kt:97)\nat org.jetbrains.kotlin.daemon.CompileServiceImpl$doCompile$$inlined$ifAlive$lambda$2.invoke(CompileServiceImpl.kt:895)\nat org.jetbrains.kotlin.daemon.CompileServiceImpl$doCompile$$inlined$ifAlive$lambda$2.invoke(CompileServiceImpl.kt:97)\nat org.jetbrains.kotlin.daemon.common.DummyProfiler.withMeasure(PerfUtils.kt:137)\nat org.jetbrains.kotlin.daemon.CompileServiceImpl.checkedCompile(CompileServiceImpl.kt:925)\nat org.jetbrains.kotlin.daemon.CompileServiceImpl.doCompile(CompileServiceImpl.kt:894)\nat org.jetbrains.kotlin.daemon.CompileServiceImpl.compile(CompileServiceImpl.kt:399)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:498)\nat sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:346)\nat sun.rmi.transport.Transport$1.run(Transport.java:200)\nat sun.rmi.transport.Transport$1.run(Transport.java:197)\nat java.security.AccessController.doPrivileged(Native Method)\nat sun.rmi.transport.Transport.serviceCall(Transport.java:196)\nat sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:568)\nat sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:826)\nat sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:683)\nat java.security.AccessController.doPrivileged(Native Method)\nat sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:682)\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\nat java.lang.Thread.run(Thread.java:745)\n</code></pre>\n\n<p>in my projects build.gradle</p>\n\n<pre><code>dependencies {\n    classpath 'com.android.tools.build:gradle:3.2.0-alpha09'\n    classpath 'org.jetbrains.kotlin:kotlin-gradle-plugin:1.2.31'\n}\n</code></pre>\n\n<p>in app level build.gradle</p>\n\n<pre><code>apply plugin: 'kotlin-android'\n\napply plugin: 'kotlin-android-extensions'\n\ndependencies {\nimplementation 'org.jetbrains.kotlin:kotlin-stdlib-jre7:1.2.31'\n}\n</code></pre>\n\n<p>first it was stable android studio version 3.1 the issue started occuring and then updated it to canary 3.2 canary 9 but the issue still remains.</p>\n"}, {"tags": ["jpa", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 471, "user_id": 818549, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1abc47d64ca7885cad058c45cde2166c?s=128&d=identicon&r=PG", "display_name": "Ond\u0159ej M&#237;chal", "link": "https://stackoverflow.com/users/818549/ond%c5%99ej-m%c3%adchal"}, "edited": false, "score": 0, "creation_date": 1523454282, "post_id": 49748096, "comment_id": 86568624, "body": "Is that a rule of thumb without any side effects or disadvantages?"}, {"owner": {"reputation": 3803, "user_id": 249667, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DIGwg.jpg?s=128&g=1", "display_name": "phisch", "link": "https://stackoverflow.com/users/249667/phisch"}, "reply_to_user": {"reputation": 471, "user_id": 818549, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1abc47d64ca7885cad058c45cde2166c?s=128&d=identicon&r=PG", "display_name": "Ond\u0159ej M&#237;chal", "link": "https://stackoverflow.com/users/818549/ond%c5%99ej-m%c3%adchal"}, "edited": false, "score": 0, "creation_date": 1523454575, "post_id": 49748096, "comment_id": 86568861, "body": "As far as I know this is identical to a java primitive which can not be null. The default for long is 0."}, {"owner": {"reputation": 3803, "user_id": 249667, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DIGwg.jpg?s=128&g=1", "display_name": "phisch", "link": "https://stackoverflow.com/users/249667/phisch"}, "reply_to_user": {"reputation": 471, "user_id": 818549, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1abc47d64ca7885cad058c45cde2166c?s=128&d=identicon&r=PG", "display_name": "Ond\u0159ej M&#237;chal", "link": "https://stackoverflow.com/users/818549/ond%c5%99ej-m%c3%adchal"}, "edited": false, "score": 0, "creation_date": 1523997032, "post_id": 49748096, "comment_id": 86790005, "body": "Did the solution work for you or are there still open points to your question?"}, {"owner": {"reputation": 471, "user_id": 818549, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1abc47d64ca7885cad058c45cde2166c?s=128&d=identicon&r=PG", "display_name": "Ond\u0159ej M&#237;chal", "link": "https://stackoverflow.com/users/818549/ond%c5%99ej-m%c3%adchal"}, "edited": false, "score": 2, "creation_date": 1524117962, "post_id": 49748096, "comment_id": 86843044, "body": "But in <a href=\"https://stackoverflow.com/questions/20421735/jpa-entity-id-long-or-long\" title=\"jpa entity id long or long\">stackoverflow.com/questions/20421735/jpa-entity-id-long-or-l&zwnj;&#8203;ong</a> and <a href=\"https://stackoverflow.com/questions/3535791/primitive-or-wrapper-for-hibernate-primary-keys/3537407#3537407\" title=\"primitive or wrapper for hibernate primary keys\">stackoverflow.com/questions/3535791/&hellip;</a> people tend to prefer null variants. So is this really the <i>preferred</i> way or the <i>possible</i> way?"}], "tags": [], "owner": {"reputation": 3803, "user_id": 249667, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DIGwg.jpg?s=128&g=1", "display_name": "phisch", "link": "https://stackoverflow.com/users/249667/phisch"}, "is_accepted": true, "score": 9, "last_activity_date": 1524119987, "last_edit_date": 1524119987, "creation_date": 1523346326, "answer_id": 49748096, "question_id": 49747891, "link": "https://stackoverflow.com/questions/49747891/kotlin-jpa-entity-id/49748096#49748096", "title": "Kotlin JPA entity ID", "body": "<p>You can use a 0 value rather than a null value.</p>\n\n<pre><code>@Entity\ndata class User (\n        @Id @GeneratedValue\n        var id: Long = 0,\n        ...\n)\n</code></pre>\n\n<p>Autogeneration should still find the next sequence. </p>\n\n<p>Kotlin compiles to Java, which has both, a primitive type <code>long</code> and a Class <code>Long</code> </p>\n\n<p>As per the <em><a href=\"http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html\" rel=\"noreferrer\">Java Persistence Specification</a></em> in section <em>11.1.21 Id Annotation</em>  both can be used for the Id:</p>\n\n<blockquote>\n  <p>The field or property to which the Id annotation is applied should be one\n  of the following types: any\n  Java primitive type; any primitive wrapper type; java.lang.String;  java.util.Date;\n  java.sql.Date; java.math.BigDecimal; java.math.BigInteger[109].</p>\n</blockquote>\n\n<p>There is an advantage in using the Class over the primitive, as <code>null</code> has a more unambiguous meaning. But from the spec both are possible and you have to decide weather you favor Kotlins nullsafety over the the jpa style or the other way around. </p>\n"}, {"tags": [], "owner": {"reputation": 498, "user_id": 8198604, "user_type": "registered", "profile_image": "https://graph.facebook.com/142792732938243/picture?type=large", "display_name": "Ivan Osipov", "link": "https://stackoverflow.com/users/8198604/ivan-osipov"}, "is_accepted": false, "score": 0, "last_activity_date": 1560360866, "creation_date": 1560360866, "answer_id": 56567609, "question_id": 49747891, "link": "https://stackoverflow.com/questions/49747891/kotlin-jpa-entity-id/56567609#56567609", "title": "Kotlin JPA entity ID", "body": "<p>Usually, data class is useful to ruturn more that one result from a method , but not for entities (just my opinion).</p>\n\n<p>Sometimes it is not a good idea to set a default value for the id field.</p>\n\n<p>After some time experimenting with Kotlin and entities (actually, with documents for MongoDb, but anyway it has id),\nLooks like the better way is to use <code>lateinit var</code>. You can create the top class of entity hierarchy:</p>\n\n<pre><code>open class Identifiable {\n    lateinit var id: Long // or String or UUID\n\n    //explicitly define equals &amp; hash code here\n}\n</code></pre>\n\n<p>But be careful, for equals, hashcode and if you want to provide toString method in heirs, then it is a good idea to provide extra nullable field, something like:</p>\n\n<pre><code>open class Identifiable {\n    lateinit var id: Long // or String or UUID\n\n    val nullableId: Long?\n        get() {\n            return if(this::id.isInitialized) id else null\n        }\n    //explicitly define equals &amp; hash code here with nullableId\n}\n\nclass User {\n    override fun toString() = \"User(id=${nullableId})\"\n}\n</code></pre>\n\n<p>In this case, you will avoid an exception when you will try to log your created but not saved in DB entity</p>\n"}], "owner": {"reputation": 471, "user_id": 818549, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1abc47d64ca7885cad058c45cde2166c?s=128&d=identicon&r=PG", "display_name": "Ond\u0159ej M&#237;chal", "link": "https://stackoverflow.com/users/818549/ond%c5%99ej-m%c3%adchal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4933, "favorite_count": 1, "accepted_answer_id": 49748096, "answer_count": 2, "score": 7, "last_activity_date": 1560360866, "creation_date": 1523345564, "question_id": 49747891, "link": "https://stackoverflow.com/questions/49747891/kotlin-jpa-entity-id", "title": "Kotlin JPA entity ID", "body": "<p>What is \"the kotlin way\" to define JPA entity ID?</p>\n\n<pre><code>@Entity\ndata class User (\n        @Id @GeneratedValue\n        var id: Long? = null,\n        ...\n)\n</code></pre>\n\n<p>Or is there any better one to avoid nullable id?</p>\n"}, {"tags": ["android", "android-recyclerview", "kotlin", "item-decoration"], "comments": [{"owner": {"reputation": 11206, "user_id": 4571931, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/L8ohX.png?s=128&g=1", "display_name": "Android Team", "link": "https://stackoverflow.com/users/4571931/android-team"}, "edited": false, "score": 0, "creation_date": 1523343623, "post_id": 49747269, "comment_id": 86508918, "body": "you want recycler view item click."}, {"owner": {"reputation": 2500, "user_id": 3489983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0a1403dbb315c938549ae5fea788963?s=128&d=identicon&r=PG&f=1", "display_name": "Tharindu Welagedara", "link": "https://stackoverflow.com/users/3489983/tharindu-welagedara"}, "reply_to_user": {"reputation": 11206, "user_id": 4571931, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/L8ohX.png?s=128&g=1", "display_name": "Android Team", "link": "https://stackoverflow.com/users/4571931/android-team"}, "edited": false, "score": 0, "creation_date": 1523343830, "post_id": 49747269, "comment_id": 86509041, "body": "@AndroidTeam No, I know how to implement an item click listener for RecyclerView. I need to implement a click listener for ItemDecorations."}, {"owner": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 1, "creation_date": 1523344660, "post_id": 49747269, "comment_id": 86509527, "body": "<code>ItemDecoration</code> is used for custom drawing only so you cannot do that: add click listener to any view that belongs to that item itself"}, {"owner": {"reputation": 2500, "user_id": 3489983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0a1403dbb315c938549ae5fea788963?s=128&d=identicon&r=PG&f=1", "display_name": "Tharindu Welagedara", "link": "https://stackoverflow.com/users/3489983/tharindu-welagedara"}, "reply_to_user": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1523344851, "post_id": 49747269, "comment_id": 86509646, "body": "@pskink I will try that"}, {"owner": {"reputation": 383, "user_id": 6798905, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8U69TiuDFUw/AAAAAAAAAAI/AAAAAAAAAA0/vEsJgiRXvs0/photo.jpg?sz=128", "display_name": "Dino Sunny", "link": "https://stackoverflow.com/users/6798905/dino-sunny"}, "edited": false, "score": 0, "creation_date": 1587040370, "post_id": 49747269, "comment_id": 108355943, "body": "any solution on this?"}, {"owner": {"reputation": 71, "user_id": 5466486, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rw7lg.jpg?s=128&g=1", "display_name": "Sanket Patel", "link": "https://stackoverflow.com/users/5466486/sanket-patel"}, "edited": false, "score": 0, "creation_date": 1600344293, "post_id": 49747269, "comment_id": 113061873, "body": "did u find a solution? i do have an header item in item decoration which doesn&#39;t get clicked."}], "answers": [{"tags": [], "owner": {"reputation": 702, "user_id": 10030894, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Fmf65CtWECo/AAAAAAAAAAI/AAAAAAAAF0U/3pDYRzrUPTE/photo.jpg?sz=128", "display_name": "Nicolas Duponchel", "link": "https://stackoverflow.com/users/10030894/nicolas-duponchel"}, "is_accepted": false, "score": 0, "last_activity_date": 1590592618, "creation_date": 1590592618, "answer_id": 62046616, "question_id": 49747269, "link": "https://stackoverflow.com/questions/49747269/how-to-add-a-click-listener-to-itemdecoration-in-recyclerview-android/62046616#62046616", "title": "How to add a click listener to ItemDecoration in RecyclerView Android?", "body": "<p><code>ItemDecoration</code> will help you draw something between items, but the <code>View</code> you're drawing in is actually the <code>RecyclerView</code> itself (according to Layout inspector), via its <code>Canvas</code>. So you won't be able to add an basic <code>onClickListener</code> on that decorations.</p>\n\n<p>According to your code, I guess you have an item decoration for each of your items header? </p>\n\n<p>What I would do for this would be not to consider my header as an <code>ItemDecoration</code> but as an item (with different type) I would feed my <code>RecyclerView</code> with.</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>sealed class RecyclerViewItem\nobject MainItem : RecyclerViewItem()\nobject Header : RecyclerViewItem()\n</code></pre>\n\n<p>In your adapter (with items: <code>RecyclerViewItem</code>) you override <code>getItemViewType</code> method using custom ids. Then in <code>onBindViewHolder</code> you can check the item view type and add your <code>onClickListener</code> on your view if it's a <code>Header</code>. </p>\n\n<p>For more info, you can search for <em>building RecyclerView with different item type</em>. </p>\n"}], "owner": {"reputation": 2500, "user_id": 3489983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0a1403dbb315c938549ae5fea788963?s=128&d=identicon&r=PG&f=1", "display_name": "Tharindu Welagedara", "link": "https://stackoverflow.com/users/3489983/tharindu-welagedara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 940, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1590592618, "creation_date": 1523343453, "question_id": 49747269, "link": "https://stackoverflow.com/questions/49747269/how-to-add-a-click-listener-to-itemdecoration-in-recyclerview-android", "title": "How to add a click listener to ItemDecoration in RecyclerView Android?", "body": "<p>I have tried to add a click listener to itemdecoration like below but still no luck. Please help.</p>\n\n<pre><code>recyclerview.addOnItemTouchListener( object : RecyclerView.OnItemTouchListener{\n    override fun onTouchEvent(rv: RecyclerView?, e: MotionEvent?) {\n\n    }\n\n    override fun onInterceptTouchEvent(rv: RecyclerView?, e: MotionEvent?): Boolean {\n        val view = rv!!.findChildViewUnder(e!!.x, e!!.y)\n        if(view == null) return false\n        when(view.id){\n            R.id.list_item_section_text-&gt;{\n                Log.d(\"Clicked\",\"Header\")\n            }\n        }\n        return false\n    }\n\n    override fun onRequestDisallowInterceptTouchEvent(disallowIntercept: Boolean) {\n\n    }\n\n})\n</code></pre>\n"}, {"tags": ["android", "android-layout", "android-edittext", "kotlin"], "comments": [{"owner": {"reputation": 11206, "user_id": 4571931, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/L8ohX.png?s=128&g=1", "display_name": "Android Team", "link": "https://stackoverflow.com/users/4571931/android-team"}, "edited": false, "score": 0, "creation_date": 1523338922, "post_id": 49746010, "comment_id": 86506512, "body": "Can you pl give try by removing              android:inputType=&quot;numberPassword&quot; from your password edit text and if it work then I can suggest you way to fix"}, {"owner": {"reputation": 1704, "user_id": 2559493, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Qyxlu.jpg?s=128&g=1", "display_name": "Zubair Rehman", "link": "https://stackoverflow.com/users/2559493/zubair-rehman"}, "reply_to_user": {"reputation": 11206, "user_id": 4571931, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/L8ohX.png?s=128&g=1", "display_name": "Android Team", "link": "https://stackoverflow.com/users/4571931/android-team"}, "edited": false, "score": 0, "creation_date": 1523339145, "post_id": 49746010, "comment_id": 86506592, "body": "Its working fine if i remove <code>app:passwordToggleEnabled=&quot;true&quot;</code>. i tested it. i guess the problem is happening coz of password toggle"}, {"owner": {"reputation": 11206, "user_id": 4571931, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/L8ohX.png?s=128&g=1", "display_name": "Android Team", "link": "https://stackoverflow.com/users/4571931/android-team"}, "edited": false, "score": 0, "creation_date": 1523339337, "post_id": 49746010, "comment_id": 86506664, "body": "Not sure app:&quot;property&quot; can be set at run time or not but it can help you to fix your issue"}, {"owner": {"reputation": 1704, "user_id": 2559493, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Qyxlu.jpg?s=128&g=1", "display_name": "Zubair Rehman", "link": "https://stackoverflow.com/users/2559493/zubair-rehman"}, "reply_to_user": {"reputation": 11206, "user_id": 4571931, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/L8ohX.png?s=128&g=1", "display_name": "Android Team", "link": "https://stackoverflow.com/users/4571931/android-team"}, "edited": false, "score": 0, "creation_date": 1523339462, "post_id": 49746010, "comment_id": 86506715, "body": "you mind if you could elaborate more."}, {"owner": {"reputation": 5853, "user_id": 10561460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jl1Jc.png?s=128&g=1", "display_name": "Paresh P.", "link": "https://stackoverflow.com/users/10561460/paresh-p"}, "edited": false, "score": 0, "creation_date": 1523341661, "post_id": 49746010, "comment_id": 86507749, "body": "Try calling <code>inValidate()</code> to the <code>View</code>."}, {"owner": {"reputation": 1704, "user_id": 2559493, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Qyxlu.jpg?s=128&g=1", "display_name": "Zubair Rehman", "link": "https://stackoverflow.com/users/2559493/zubair-rehman"}, "edited": false, "score": 0, "creation_date": 1523346827, "post_id": 49746010, "comment_id": 86510891, "body": "inValidate() is not working :("}], "answers": [{"comments": [{"owner": {"reputation": 2530, "user_id": 2125351, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5GO1Q.jpg?s=128&g=1", "display_name": "Sean Blahovici", "link": "https://stackoverflow.com/users/2125351/sean-blahovici"}, "edited": false, "score": 0, "creation_date": 1587071454, "post_id": 49752150, "comment_id": 108373332, "body": "This solution fixed an issue I had trying to set a drawable programatically (with no tint) onto an AutoCompleteTextView. Thanks!"}], "tags": [], "owner": {"reputation": 1704, "user_id": 2559493, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Qyxlu.jpg?s=128&g=1", "display_name": "Zubair Rehman", "link": "https://stackoverflow.com/users/2559493/zubair-rehman"}, "is_accepted": false, "score": 1, "last_activity_date": 1523358714, "creation_date": 1523358714, "answer_id": 49752150, "question_id": 49746010, "link": "https://stackoverflow.com/questions/49746010/edittext-drawable-hides-after-setting-tint-programmatically/49752150#49752150", "title": "EditText drawable hides after setting tint programmatically", "body": "<p>The issue is with <code>setCompoundDrawablesWithIntrinsicBounds</code> change it to <code>setCompoundDrawablesRelativeWithIntrinsicBounds</code> and it will start appearing.</p>\n"}], "owner": {"reputation": 1704, "user_id": 2559493, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Qyxlu.jpg?s=128&g=1", "display_name": "Zubair Rehman", "link": "https://stackoverflow.com/users/2559493/zubair-rehman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1573738583, "creation_date": 1523338366, "last_edit_date": 1573738583, "question_id": 49746010, "link": "https://stackoverflow.com/questions/49746010/edittext-drawable-hides-after-setting-tint-programmatically", "title": "EditText drawable hides after setting tint programmatically", "body": "<p>I have two <code>EditText</code> in my layout. I am using <code>TextInputLayout</code> and added <code>drawableLeft</code>, now I am trying to change its tint which is working fine for username field but it hides left drawable icon for password field. Below is the code, please guide me what I am doing wrong.</p>\n\n<pre><code>&lt;LinearLayout\n    android:layout_width=\"@dimen/margin_300\"\n    android:layout_height=\"wrap_content\"\n    android:gravity=\"center_horizontal\"\n    android:orientation=\"vertical\"&gt;\n\n\n\n&lt;android.support.design.widget.TextInputLayout\n                                android:id=\"@+id/userIDLayout\"\n                                android:layout_width=\"match_parent\"\n                                android:layout_height=\"match_parent\"\n                                android:layout_toEndOf=\"@+id/appCompatImageView4\"&gt;\n\n                                &lt;android.support.v7.widget.AppCompatEditText\n                                    android:id=\"@+id/edit_user_id\"\n                                    android:layout_width=\"match_parent\"\n                                    android:layout_height=\"wrap_content\"\n                                    android:drawableLeft=\"@drawable/ic_user_login\"\n                                    android:drawablePadding=\"@dimen/margin_10\"\n                                    android:drawableStart=\"@drawable/ic_user_login\"\n                                    android:drawableTint=\"@color/colorPrimaryDark\"\n                                    android:hint=\"@string/txt_user_hint\"\n                                    android:imeOptions=\"flagNoExtractUi|actionNext\"\n                                    android:inputType=\"number\"\n                                    android:maxLines=\"1\"\n                                    android:textSize=\"@dimen/txt_size_16\" /&gt;\n                            &lt;/android.support.design.widget.TextInputLayout&gt;\n\n\n                            &lt;android.support.design.widget.TextInputLayout\n                                android:id=\"@+id/userPasswordLayout\"\n                                android:layout_width=\"match_parent\"\n                                android:layout_height=\"wrap_content\"\n                                android:layout_toEndOf=\"@+id/appCompatImageView5\"\n                                app:passwordToggleEnabled=\"true\"&gt;\n\n                                &lt;android.support.design.widget.TextInputEditText\n                                    android:id=\"@+id/edit_user_password\"\n                                    android:layout_width=\"match_parent\"\n                                    android:layout_height=\"wrap_content\"\n                                    android:drawableLeft=\"@drawable/ic_user_password\"\n                                    android:drawablePadding=\"@dimen/margin_10\"\n                                    android:drawableStart=\"@drawable/ic_user_password\"\n                                    android:drawableTint=\"@color/colorPrimaryDark\"\n                                    android:hint=\"@string/txt_pin_hint\"\n                                    android:imeOptions=\"flagNoExtractUi|actionDone\"\n                                    android:inputType=\"numberPassword\"\n                                    android:maxLength=\"4\"\n                                    android:maxLines=\"1\"\n                                    android:textSize=\"@dimen/txt_size_16\" /&gt;\n                            &lt;/android.support.design.widget.TextInputLayout&gt;\n\n                        &lt;/LinearLayout&gt;\n</code></pre>\n\n<p>Below is the code that I am using to change tint programmatically:</p>\n\n<pre><code>fun changeEditTextDrawableColor(colorId: Int, drawableId: Int, resource: EditText) {\n    var drawable = resources.getDrawable(drawableId)\n    drawable = DrawableCompat.wrap(drawable)\n    DrawableCompat.setTint(drawable, resources.getColor(colorId))\n    DrawableCompat.setTintMode(drawable, PorterDuff.Mode.SRC_IN)\n\n    resource!!.setCompoundDrawablesWithIntrinsicBounds(drawable, null, null, null)\n}\n</code></pre>\n"}, {"tags": ["java", "android", "notifications", "kotlin"], "comments": [{"owner": {"reputation": 41, "user_id": 9489911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3980bc6736297801c4caa16d60cb33e6?s=128&d=identicon&r=PG&f=1", "display_name": "user20", "link": "https://stackoverflow.com/users/9489911/user20"}, "reply_to_user": {"reputation": 57589, "user_id": 7666442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K8FFo.jpg?s=128&g=1", "display_name": "AskNilesh", "link": "https://stackoverflow.com/users/7666442/asknilesh"}, "edited": false, "score": 2, "creation_date": 1523335706, "post_id": 49745488, "comment_id": 86505415, "body": "no, my question is different. i&#39;m using kotlin"}, {"owner": {"reputation": 57589, "user_id": 7666442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K8FFo.jpg?s=128&g=1", "display_name": "AskNilesh", "link": "https://stackoverflow.com/users/7666442/asknilesh"}, "edited": false, "score": 1, "creation_date": 1523335871, "post_id": 49745488, "comment_id": 86505465, "body": "you need to pass <code>Context</code> in your class that&#39;s it"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 9489911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3980bc6736297801c4caa16d60cb33e6?s=128&d=identicon&r=PG&f=1", "display_name": "user20", "link": "https://stackoverflow.com/users/9489911/user20"}, "edited": false, "score": 1, "creation_date": 1523344630, "post_id": 49746041, "comment_id": 86509506, "body": "thanks for the answer. but view.context is still error . it says Unresolved reference : view. I put Utils.startNewActivity inside the function and the object Utils outside my function"}, {"owner": {"reputation": 3351, "user_id": 7344445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cNjFr.jpg?s=128&g=1", "display_name": "Atif AbbAsi", "link": "https://stackoverflow.com/users/7344445/atif-abbasi"}, "reply_to_user": {"reputation": 41, "user_id": 9489911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3980bc6736297801c4caa16d60cb33e6?s=128&d=identicon&r=PG&f=1", "display_name": "user20", "link": "https://stackoverflow.com/users/9489911/user20"}, "edited": false, "score": 0, "creation_date": 1523345307, "post_id": 49746041, "comment_id": 86509936, "body": "use this@MainActivity or this to get context.!"}, {"owner": {"reputation": 41, "user_id": 9489911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3980bc6736297801c4caa16d60cb33e6?s=128&d=identicon&r=PG&f=1", "display_name": "user20", "link": "https://stackoverflow.com/users/9489911/user20"}, "edited": false, "score": 0, "creation_date": 1523345522, "post_id": 49746041, "comment_id": 86510075, "body": "So i just change my code to         Utils.startNewActivity(this,NotificationActivity::class.java&zwnj;&#8203;)  but it says type missmatch. required: Context"}, {"owner": {"reputation": 3351, "user_id": 7344445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cNjFr.jpg?s=128&g=1", "display_name": "Atif AbbAsi", "link": "https://stackoverflow.com/users/7344445/atif-abbasi"}, "reply_to_user": {"reputation": 41, "user_id": 9489911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3980bc6736297801c4caa16d60cb33e6?s=128&d=identicon&r=PG&f=1", "display_name": "user20", "link": "https://stackoverflow.com/users/9489911/user20"}, "edited": false, "score": 0, "creation_date": 1523345629, "post_id": 49746041, "comment_id": 86510144, "body": "Utils.startNewActivity(this@MainActivity,NotificationActivit&zwnj;&#8203;y::class.java)"}, {"owner": {"reputation": 41, "user_id": 9489911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3980bc6736297801c4caa16d60cb33e6?s=128&d=identicon&r=PG&f=1", "display_name": "user20", "link": "https://stackoverflow.com/users/9489911/user20"}, "edited": false, "score": 0, "creation_date": 1523346051, "post_id": 49746041, "comment_id": 86510412, "body": "i&#39;ve been replacing my code with that but still no luck. the error is still the same. type mismatch. Required: Context. Found: MainActivity"}, {"owner": {"reputation": 3351, "user_id": 7344445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cNjFr.jpg?s=128&g=1", "display_name": "Atif AbbAsi", "link": "https://stackoverflow.com/users/7344445/atif-abbasi"}, "reply_to_user": {"reputation": 41, "user_id": 9489911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3980bc6736297801c4caa16d60cb33e6?s=128&d=identicon&r=PG&f=1", "display_name": "user20", "link": "https://stackoverflow.com/users/9489911/user20"}, "edited": false, "score": 0, "creation_date": 1523346164, "post_id": 49746041, "comment_id": 86510492, "body": "check your activity name  @MainActivity mean&#39;s you are in MainActivity.java"}, {"owner": {"reputation": 41, "user_id": 9489911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3980bc6736297801c4caa16d60cb33e6?s=128&d=identicon&r=PG&f=1", "display_name": "user20", "link": "https://stackoverflow.com/users/9489911/user20"}, "edited": false, "score": 0, "creation_date": 1523346683, "post_id": 49746041, "comment_id": 86510793, "body": "my non activity&#39;s class that i actually want to call another activity named mainLogic. the destination is NotificationActivity and i actually have changed it to Utils.startNewActivity(this@mainLogic, NotificationActivity::class.java)  the error is still the same ."}, {"owner": {"reputation": 3351, "user_id": 7344445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cNjFr.jpg?s=128&g=1", "display_name": "Atif AbbAsi", "link": "https://stackoverflow.com/users/7344445/atif-abbasi"}, "reply_to_user": {"reputation": 41, "user_id": 9489911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3980bc6736297801c4caa16d60cb33e6?s=128&d=identicon&r=PG&f=1", "display_name": "user20", "link": "https://stackoverflow.com/users/9489911/user20"}, "edited": false, "score": 0, "creation_date": 1523348276, "post_id": 49746041, "comment_id": 86511759, "body": "ok pass context in constructor and then call its method."}], "tags": [], "owner": {"reputation": 3351, "user_id": 7344445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cNjFr.jpg?s=128&g=1", "display_name": "Atif AbbAsi", "link": "https://stackoverflow.com/users/7344445/atif-abbasi"}, "is_accepted": true, "score": 5, "last_activity_date": 1523356658, "last_edit_date": 1523356658, "creation_date": 1523338526, "answer_id": 49746041, "question_id": 49745488, "link": "https://stackoverflow.com/questions/49745488/how-to-start-a-new-activity-from-a-non-activity-class-in-android-kotlin/49746041#49746041", "title": "How to start a new activity from a non activity class in Android kotlin?", "body": "<p>All you have to do is something like this.</p>\n\n<p>and you can use it Like <a href=\"https://github.com/AtifAbbAsi19/Basic-Kotlin-Tutorial/blob/master/app/src/main/java/inc/droidflick/kotlintutorial/utils/Utils.kt\" rel=\"nofollow noreferrer\">Non Activity Example Using Kotlin</a></p>\n\n<pre><code> Utils.startNewActivity(this,SecondActivity::class.java)\n\n\n Utils.startNewActivity(this@MainActivity,SecondActivity::class.java)\n</code></pre>\n\n<p>if you are performing onClick or using adapter then you can get Context from its View like </p>\n\n<pre><code> Utils.startNewActivity(view.context,SecondActivity::class.java)\n\n\n\n\n\n\n\n\n\n    class Utils {\n\n        companion object {\n            fun startActivity(context: Context, clazz: Class&lt;*&gt;) {\n\n                val intent = Intent(context, clazz)\n\n               // start your next activity\n\n                context.startActivity(intent)\n\n            }\n        }\n\n}\n</code></pre>\n\n<p>or </p>\n\n<pre><code>object Utils {\n\n     fun startNewActivity(context: Context, clazz: Class&lt;*&gt;) {\n\n            val intent = Intent(context, clazz)\n// To pass any data to next activity\n//            intent.putExtra(\"keyIdentifier\", value)\n// start your next activity\n            context.startActivity(intent)\n\n        }\n\n\n}\n</code></pre>\n\n<p>Non Activity Class with Constructor.! </p>\n\n<pre><code> UtilsWithConstructor(this@MainActivity).startNewActivity(SecondActivity::class.java)\n\nclass UtilsWithConstructor(private val context: Context) {\n\n      fun startNewActivity(clazz: Class&lt;*&gt;) {\n\n    val intent = Intent(context, clazz)\n    // start your next activity\n    context?.startActivity(intent)\n\n}\n\n\n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 9489911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3980bc6736297801c4caa16d60cb33e6?s=128&d=identicon&r=PG&f=1", "display_name": "user20", "link": "https://stackoverflow.com/users/9489911/user20"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3430, "favorite_count": 0, "closed_date": 1523339102, "accepted_answer_id": 49746041, "answer_count": 1, "score": 2, "last_activity_date": 1523356658, "creation_date": 1523335594, "last_edit_date": 1523341496, "question_id": 49745488, "link": "https://stackoverflow.com/questions/49745488/how-to-start-a-new-activity-from-a-non-activity-class-in-android-kotlin", "closed_reason": "Duplicate", "title": "How to start a new activity from a non activity class in Android kotlin?", "body": "<p>I've been trying to pass the context but it just doesn't work\nso I declare it first using</p>\n\n<pre><code>var mContext: Context? = null\n</code></pre>\n\n<p>then in one of my function (from non activity class) I call it</p>\n\n<pre><code>val intent= Intent(mContext, NotificationActivity::class.java)\nmContext?.startActivity(intent)\n</code></pre>\n\n<p>It doesn't show error in coding but when I run this app, it just doesn't work</p>\n\n<p>NotificationActivity is the class that I want to call</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 15504, "user_id": 46375, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/14d6944fb1469c80688a27155ae2c967?s=128&d=identicon&r=PG", "display_name": "whaley", "link": "https://stackoverflow.com/users/46375/whaley"}, "edited": false, "score": 0, "creation_date": 1523320099, "post_id": 49743404, "comment_id": 86501865, "body": "The compiler can be pleased in your first doesnt_work() example if you return a dummy value after the use block, even if it will never be returned.  I suggest bringing this up at <a href=\"https://discuss.kotlinlang.org/\" rel=\"nofollow noreferrer\">discuss.kotlinlang.org</a> so the folks working on the language/library will hopefully see it or provide a better answer."}, {"owner": {"reputation": 5469, "user_id": 7083401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eA15o.png?s=128&g=1", "display_name": "ice1000", "link": "https://stackoverflow.com/users/7083401/ice1000"}, "edited": false, "score": 0, "creation_date": 1523372826, "post_id": 49743404, "comment_id": 86529135, "body": "Please take a look at my answer, I think it looks better than both of your workaround and the other answer."}], "answers": [{"comments": [{"owner": {"reputation": 124764, "user_id": 90848, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/tK3A3.jpg?s=128&g=1", "display_name": "Laurence Gonsalves", "link": "https://stackoverflow.com/users/90848/laurence-gonsalves"}, "edited": false, "score": 0, "creation_date": 1523402311, "post_id": 49743502, "comment_id": 86543899, "body": "I&#39;d argue that an <code>AssertionError</code> is the right thing to throw there, since it should never happen."}], "tags": [], "owner": {"reputation": 7061, "user_id": 4727432, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ca061f55238f6dba1e1815db6a48b1f6?s=128&d=identicon&r=PG", "display_name": "hluhovskyi", "link": "https://stackoverflow.com/users/4727432/hluhovskyi"}, "is_accepted": true, "score": 3, "last_activity_date": 1523320742, "last_edit_date": 1523320742, "creation_date": 1523320051, "answer_id": 49743502, "question_id": 49743404, "link": "https://stackoverflow.com/questions/49743404/how-can-i-return-from-inside-of-a-call-to-use/49743502#49743502", "title": "How can I `return` from inside of a call to `use`?", "body": "<p>Cause Kotlin compiler isn't smart enough to undestand that <code>use</code> with code inside will return something from the function. The reason of such behavior is inability to guarantee compiler that lambda will be called exactly once.</p>\n\n<p>Another way to workaround this is throwing exception in the end of the function:</p>\n\n<pre><code>fun doesnt_work(): Int {\n    openFile().use { input -&gt;\n        while (true) {\n            if (bar()) {\n                return 5\n            }\n        }\n    }\n    throw IllegalStateException(\"Something goes wrong\")\n}\n</code></pre>\n\n<p><strong>P.S.</strong> I am not sure, but seems it can be compiled without any hacks when <a href=\"https://discuss.kotlinlang.org/t/status-of-kotlin-internal-contracts/6392\" rel=\"nofollow noreferrer\">contract system</a> will be added to Kotlin. And it is probably going to be in version 1.3</p>\n"}, {"comments": [{"owner": {"reputation": 124764, "user_id": 90848, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/tK3A3.jpg?s=128&g=1", "display_name": "Laurence Gonsalves", "link": "https://stackoverflow.com/users/90848/laurence-gonsalves"}, "edited": false, "score": 0, "creation_date": 1523399967, "post_id": 49743552, "comment_id": 86543292, "body": "This doesn&#39;t work for me. I get <code>Type inference failed. Expected type mismatch: inferred type is Any but Int was expected</code> on <code>use</code>, and <code>Type mismatch: inferred type is Unit but Int was expected</code> on <code>while</code>. I&#39;m using kotlinc-jvm 1.2.31."}, {"owner": {"reputation": 5469, "user_id": 7083401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eA15o.png?s=128&g=1", "display_name": "ice1000", "link": "https://stackoverflow.com/users/7083401/ice1000"}, "reply_to_user": {"reputation": 124764, "user_id": 90848, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/tK3A3.jpg?s=128&g=1", "display_name": "Laurence Gonsalves", "link": "https://stackoverflow.com/users/90848/laurence-gonsalves"}, "edited": false, "score": 0, "creation_date": 1523408874, "post_id": 49743552, "comment_id": 86545402, "body": "Adding an unreachable final return statement will work, see my update. Sorry for not testing the code"}, {"owner": {"reputation": 5469, "user_id": 7083401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eA15o.png?s=128&g=1", "display_name": "ice1000", "link": "https://stackoverflow.com/users/7083401/ice1000"}, "reply_to_user": {"reputation": 124764, "user_id": 90848, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/tK3A3.jpg?s=128&g=1", "display_name": "Laurence Gonsalves", "link": "https://stackoverflow.com/users/90848/laurence-gonsalves"}, "edited": false, "score": 0, "creation_date": 1523664348, "post_id": 49743552, "comment_id": 86668821, "body": "@LaurenceGonsalves Hi, can you take a look at my edit?"}], "tags": [], "owner": {"reputation": 5469, "user_id": 7083401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eA15o.png?s=128&g=1", "display_name": "ice1000", "link": "https://stackoverflow.com/users/7083401/ice1000"}, "is_accepted": false, "score": 2, "last_activity_date": 1523408935, "last_edit_date": 1523408935, "creation_date": 1523320536, "answer_id": 49743552, "question_id": 49743404, "link": "https://stackoverflow.com/questions/49743404/how-can-i-return-from-inside-of-a-call-to-use/49743552#49743552", "title": "How can I `return` from inside of a call to `use`?", "body": "<p>This should work.</p>\n\n<pre><code>fun openFile(): InputStream = TODO()\n\nfun doesnt_work(): Int {\n    return openFile().use { input -&gt;\n        while (true) {\n            if (bar()) {\n                return@use 5\n            }\n        }\n        -1 // unreachable return value\n           // just to help Kotlin infer the return type\n    }\n }\n</code></pre>\n\n<p>Remember, <code>use</code> is a function whose return value is exactly the same with the return value of the lambda. So returning the value (here it's <code>5</code>) in the lambda and return the return value of <code>use</code> should work.</p>\n\n<p>Also, if I were you, I'll write the function like this:</p>\n\n<pre><code>fun doesnt_work() = openFile().use { input -&gt;\n    while (true) if (bar()) return@use 5\n    -1\n}\n</code></pre>\n"}], "owner": {"reputation": 124764, "user_id": 90848, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/tK3A3.jpg?s=128&g=1", "display_name": "Laurence Gonsalves", "link": "https://stackoverflow.com/users/90848/laurence-gonsalves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 960, "favorite_count": 0, "accepted_answer_id": 49743502, "answer_count": 2, "score": 3, "last_activity_date": 1523408935, "creation_date": 1523319174, "question_id": 49743404, "link": "https://stackoverflow.com/questions/49743404/how-can-i-return-from-inside-of-a-call-to-use", "title": "How can I `return` from inside of a call to `use`?", "body": "<p>In Kotlin, this code compiles:</p>\n\n\n\n<pre><code>private fun bar(): Boolean = TODO()\n\nfun works(): Int {\n    while (true) {\n        if (bar()) {\n            return 5\n        }\n    }\n}\n</code></pre>\n\n<p>(This is a pared down example of my real code to illustrate the issue I'm running into.)</p>\n\n<p>I actually need to use a file during this loop, and close on exit:</p>\n\n<pre><code>fun openFile(): InputStream = TODO()\n\nfun doesnt_work(): Int {\n    openFile().use { input -&gt;\n        while (true) {\n            if (bar()) {\n                return 5\n            }\n        }\n    }\n } // line 42\n</code></pre>\n\n<p>This doesn't compile. I get the error:</p>\n\n<blockquote>\n  <p>Error:(42, 5) Kotlin: A 'return' expression required in a function with a block body ('{...}')</p>\n</blockquote>\n\n<p>I've found two ways to work around this, but both are kind of awkward.</p>\n\n<p>One way is to use a variable to hold the result, and break from the loop right when it's set:</p>\n\n<pre><code>fun works_but_awkward(): Int {\n    openFile().use { input -&gt;\n        val result: Int\n        while (true) {\n            if (bar()) {\n                result = 5\n                break\n            }\n        }\n        return result\n    }\n}\n</code></pre>\n\n<p>This is especially awkward in my real code, as I have a nested loop, and so I need to use a labelled break.</p>\n\n<p>The other way to work around this is to have a named function for the loop:</p>\n\n<pre><code>fun workaround_with_named_function(): Int {\n    fun loop(input: InputStream): Int {\n        while (true) {\n            if (bar()) {\n                return 5\n            }\n        }\n    }\n    return openFile().use { loop(it) }\n}\n</code></pre>\n\n<p>This seems a bit better, but I'm still surprised that the <code>use</code> abstraction is so leaky that I can't do an early return from within a loop. Is there a way to use <code>use</code> with an early return in a loop that's less awkward?</p>\n"}, {"tags": ["android", "twitter", "login", "kotlin"], "comments": [{"owner": {"reputation": 338, "user_id": 8865784, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/plYOV.jpg?s=128&g=1", "display_name": "Acetech", "link": "https://stackoverflow.com/users/8865784/acetech"}, "edited": false, "score": 0, "creation_date": 1523414943, "post_id": 49742476, "comment_id": 86546940, "body": "I see no one has an answer to this"}], "answers": [{"tags": [], "owner": {"reputation": 338, "user_id": 8865784, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/plYOV.jpg?s=128&g=1", "display_name": "Acetech", "link": "https://stackoverflow.com/users/8865784/acetech"}, "is_accepted": true, "score": 2, "last_activity_date": 1523707697, "creation_date": 1523707697, "answer_id": 49831275, "question_id": 49742476, "link": "https://stackoverflow.com/questions/49742476/twitter-login-with-kotlin/49831275#49831275", "title": "Twitter Login with Kotlin", "body": "<p>After days of debugging I found out nothing was wrong with my code, i had to whitelist my app from twitter. Secondly i took a shorter route using this awesome library instead of reinventing the will - <a href=\"https://github.com/jaychang0917/SimpleAuth\" rel=\"nofollow noreferrer\">https://github.com/jaychang0917/SimpleAuth</a></p>\n"}], "owner": {"reputation": 338, "user_id": 8865784, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/plYOV.jpg?s=128&g=1", "display_name": "Acetech", "link": "https://stackoverflow.com/users/8865784/acetech"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1228, "favorite_count": 1, "accepted_answer_id": 49831275, "answer_count": 1, "score": 1, "last_activity_date": 1523707697, "creation_date": 1523312113, "question_id": 49742476, "link": "https://stackoverflow.com/questions/49742476/twitter-login-with-kotlin", "title": "Twitter Login with Kotlin", "body": "<p>Hello guys please I have spent the last four hours trying to implement the twitter login with my app following the documentation everything seems to work fine but for one or many reasons when i click connect or cancel on the twitter authorization page, i get this toast \"this app is not permitted to perform this action twitter\". I honestly dont know where to go from here. Here is my code. I know am doing something wrong, can anyone point me in the right direction please.</p>\n\n<pre><code>//on create\noverride fun onCreate(savedInstanceState: Bundle?) {\nsuper.onCreate(savedInstanceState)\nval config = TwitterConfig.Builder(this)\n.logger(DefaultLogger(Log.DEBUG))\n.twitterAuthConfig(TwitterAuthConfig(CONSUMER_KEY,   CONSUMER_SECRET))\n            .debug(true)\n            .build()\n    Twitter.initialize(config)\nloginTwitter.setCallback(object : Callback&lt;TwitterSession&gt;() {\noverride fun success(result: Result&lt;TwitterSession&gt;) {\nval session = TwitterCore.getInstance().sessionManager.activeSession\nval authToken = session.authToken\nval token = authToken.token\nval secret = authToken.secret\nloginTwitterUser(session)\n}\n\noverride fun failure(exception: TwitterException) {\nLog.d(\"twitter error: \",\"Something went wrong, please try again\")\n}\n})\n}\n\n//onActivityResult\noverride fun onActivityResult(requestCode: Int, resultCode: Int,\ndata:Intent) {\n    super.onActivityResult(requestCode, resultCode, data)\n    loginTwitter.onActivityResult(requestCode, resultCode, data)\n}\n\n//the crash log\n</code></pre>\n\n<p>04-09 23:00:47.967 14143-14143/com.arcadiamobiletv.amtv E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.arcadiamobiletv.amtv, PID: 14143\n    java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=140, result=0, data=null} to activity {com.arcadiamobiletv.amtv/com.arcadiamobiletv.amtv.Controllers.LoginActivity}: java.lang.IllegalArgumentException: Parameter specified as non-null is null: method kotlin.jvm.internal.Intrinsics.checkParameterIsNotNull, parameter data\n        at android.app.ActivityThread.deliverResults(ActivityThread.java:4178)\n        at android.app.ActivityThread.handleSendResult(ActivityThread.java:4221)\n        at android.app.ActivityThread.-wrap20(ActivityThread.java)\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1583)\n        at android.os.Handler.dispatchMessage(Handler.java:110)\n        at android.os.Looper.loop(Looper.java:203)\n        at android.app.ActivityThread.main(ActivityThread.java:6251)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1063)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:924)\n     Caused by: java.lang.IllegalArgumentException: Parameter specified as non-null is null: method kotlin.jvm.internal.Intrinsics.checkParameterIsNotNull, parameter data\n        at com.arcadiamobiletv.amtv.Controllers.LoginActivity.onActivityResult(LoginActivity.kt)\n        at android.app.Activity.dispatchActivityResult(Activity.java:6919)\n        at android.app.ActivityThread.deliverResults(ActivityThread.java:4174)\n        at android.app.ActivityThread.handleSendResult(ActivityThread.java:4221)\u00a0\n        at android.app.ActivityThread.-wrap20(ActivityThread.java)\u00a0\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1583)\u00a0\n        at android.os.Handler.dispatchMessage(Handler.java:110)\u00a0\n        at android.os.Looper.loop(Looper.java:203)\u00a0\n        at android.app.ActivityThread.main(ActivityThread.java:6251)\u00a0\n        at java.lang.reflect.Method.invoke(Native Method)\u00a0\n        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1063)\u00a0\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:924)\u00a0\n04-09 23:00:54.243 14143-14154/com.arcadiamobiletv.amtv I/art: Enter while loop.</p>\n"}, {"tags": ["java", "android", "kotlin", "interop"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1523310382, "post_id": 49742105, "comment_id": 86498959, "body": "I made a casual attempt to reproduce this error message, but can&#39;t.  Could you add details of versions of tools/etc. that you&#39;re using?"}, {"owner": {"reputation": 5359, "user_id": 1204377, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/VDy3h.jpg?s=128&g=1", "display_name": "Anton Cherkashyn", "link": "https://stackoverflow.com/users/1204377/anton-cherkashyn"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1523310555, "post_id": 49742105, "comment_id": 86499046, "body": "Android Studio 3.1,Kotlin plugin Version: 1.2.31-release-Studio3.1-1. Android target SDK: 27, compile SDK: 27, build tools version: 27.0.3"}, {"owner": {"reputation": 12952, "user_id": 2398375, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a5530da29f23682b10bb5568076f83d?s=128&d=identicon&r=PG", "display_name": "Dioxin", "link": "https://stackoverflow.com/users/2398375/dioxin"}, "edited": false, "score": 1, "creation_date": 1523311279, "post_id": 49742105, "comment_id": 86499332, "body": "I&#39;m not currently at the computer, but if I recall correctly, Kotlin&#39;s <code>List</code> is declared <code>List&lt;out E&gt;</code>, and seeing how you can&#39;t use <code>? extends MyObject</code>, couldn&#39;t you define the interface using Kotlin&#39;s <code>MutableList</code> or Java&#39;s <code>List</code> instead? Or is this not an option? Haven&#39;t used Kotlin in over a year, so please forgive any ignorance."}, {"owner": {"reputation": 7365, "user_id": 4252352, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/6nZz0.jpg?s=128&g=1", "display_name": "Mark Keen", "link": "https://stackoverflow.com/users/4252352/mark-keen"}, "edited": false, "score": 2, "creation_date": 1523311580, "post_id": 49742105, "comment_id": 86499438, "body": "I agree <code>MutableList</code> which I think is invariant?"}, {"owner": {"reputation": 5359, "user_id": 1204377, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/VDy3h.jpg?s=128&g=1", "display_name": "Anton Cherkashyn", "link": "https://stackoverflow.com/users/1204377/anton-cherkashyn"}, "reply_to_user": {"reputation": 12952, "user_id": 2398375, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a5530da29f23682b10bb5568076f83d?s=128&d=identicon&r=PG", "display_name": "Dioxin", "link": "https://stackoverflow.com/users/2398375/dioxin"}, "edited": false, "score": 0, "creation_date": 1523311659, "post_id": 49742105, "comment_id": 86499473, "body": "@VinceEmigh That does work, although I&#39;m kind of wary of using java collections in Kotlin. MutableList did the trick!"}, {"owner": {"reputation": 5359, "user_id": 1204377, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/VDy3h.jpg?s=128&g=1", "display_name": "Anton Cherkashyn", "link": "https://stackoverflow.com/users/1204377/anton-cherkashyn"}, "reply_to_user": {"reputation": 7365, "user_id": 4252352, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/6nZz0.jpg?s=128&g=1", "display_name": "Mark Keen", "link": "https://stackoverflow.com/users/4252352/mark-keen"}, "edited": false, "score": 0, "creation_date": 1523311682, "post_id": 49742105, "comment_id": 86499482, "body": "@MarkKeen You&#39;re right, it works perfect with MutableList. Thanks!"}, {"owner": {"reputation": 7365, "user_id": 4252352, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/6nZz0.jpg?s=128&g=1", "display_name": "Mark Keen", "link": "https://stackoverflow.com/users/4252352/mark-keen"}, "edited": false, "score": 0, "creation_date": 1523311752, "post_id": 49742105, "comment_id": 86499502, "body": "It&#39;s because <code>List&lt;out E&gt;</code> in Kotlin is immutable by default."}], "answers": [{"tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": false, "score": 1, "last_activity_date": 1523346244, "last_edit_date": 1523346244, "creation_date": 1523345918, "answer_id": 49747977, "question_id": 49742105, "link": "https://stackoverflow.com/questions/49742105/overriding-kotlin-method-with-generic-parameter-in-java-method-clash/49747977#49747977", "title": "Overriding Kotlin method with generic parameter in java - method clash", "body": "<p>If any of the methods do change the list or reasonably could, using <code>MutableList</code> is indeed the correct solution.</p>\n\n<p>But otherwise, if you <em>are</em> planning to migrate to Kotlin eventually and can't change the other method to take <code>List&lt;? extends MyObject&gt;</code> at this time, I would just prefer to use </p>\n\n<pre><code>@Override\npublic void onMyObjectList(@NotNull List&lt;? extends MyObject&gt; objectList) {\n\n}\n</code></pre>\n\n<p>and cast to <code>List&lt;MyObject&gt;</code> before passing to the legacy method. This is 1) a safe cast if you don't mutate the list and 2) a complete non-op at runtime (so it won't affect performance).</p>\n"}], "owner": {"reputation": 5359, "user_id": 1204377, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/VDy3h.jpg?s=128&g=1", "display_name": "Anton Cherkashyn", "link": "https://stackoverflow.com/users/1204377/anton-cherkashyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 788, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1523346244, "creation_date": 1523310118, "last_edit_date": 1523311442, "question_id": 49742105, "link": "https://stackoverflow.com/questions/49742105/overriding-kotlin-method-with-generic-parameter-in-java-method-clash", "title": "Overriding Kotlin method with generic parameter in java - method clash", "body": "<p>My team is migrating to Kotlin for our Android app, but we still have lots of legacy java code, this causes weird code issues sometimes. This is one of those strange cases.</p>\n\n<p>I have a Kotlin class, call it MyInterface:</p>\n\n<pre><code>interface MyInterface {\n    fun onMyObjectList(myObjectList: List&lt;MyObject&gt;)\n}\n</code></pre>\n\n<p>I need to implement this interface in an Activity, written in Java:</p>\n\n<pre><code>class MyActivity implements MyInterface {\n...\n}\n</code></pre>\n\n<p>Here's how I implement the overridden method in Java:</p>\n\n<pre><code>@Override\npublic void onMyObjectList(@NotNull List&lt;MyObject&gt; objectList) {\n\n}\n</code></pre>\n\n<p>I do want to get a <code>List&lt;MyObject&gt;</code> as a parameter, but the IDE throws an error</p>\n\n<blockquote>\n  <p><code>onMyObjectList(List&lt;MyObject&gt; objectList)</code> in MyActivity clashes with <code>onMyObjectList(List&lt;? extends MyObject&gt; objectList)</code> in MyInterface. Both methods have the same erasure, yet neither overrides the other</p>\n</blockquote>\n\n<p>I can't use a <code>List&lt;? extends MyObject&gt;</code> as a parameter as I'm passing it further on to a method that expects a <code>List&lt;MyObject&gt;</code>. How can I configure my Kotlin interface so that it actually uses <code>List&lt;MyObject&gt;</code> instead of <code>List&lt;? extends MyObject&gt;</code> when overridden in Java?</p>\n"}, {"tags": ["java", "kotlin", "rx-java", "reactive-programming", "rx-java2"], "comments": [{"owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 2, "creation_date": 1523315613, "post_id": 49741905, "comment_id": 86500699, "body": "Use Flowable.fromIterable for the conversion."}], "answers": [{"tags": [], "owner": {"reputation": 10216, "user_id": 854207, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/R6DhK.jpg?s=128&g=1", "display_name": "paul", "link": "https://stackoverflow.com/users/854207/paul"}, "is_accepted": false, "score": 1, "last_activity_date": 1523346194, "creation_date": 1523346194, "answer_id": 49748054, "question_id": 49741905, "link": "https://stackoverflow.com/questions/49741905/rxjava-specifying-maximum-concurrency-for-a-list-of-completables/49748054#49748054", "title": "RxJava: Specifying maximum concurrency for a list of Completables", "body": "<p>You can just use <strong>flatMap</strong> with <strong>maxConcurrent</strong> value, and then make your pipeline run asyncroniously.</p>\n\n<pre><code>  @Test\n    public void asyncFlatMapWithMaxConcurrent() {\n        Observable.from(Arrays.asList(1, 2, 3, 4, 5, 6, 7, 8, 9, 10))\n                .flatMap(value -&gt; Observable.just(value)\n                        .map(number -&gt; {\n                            try {\n                                Thread.sleep(1000);\n                                System.out.println(String.format(\"Value %s in Thread execution:%s\",number, Thread.currentThread().getName()));\n                            } catch (InterruptedException e) {\n                                e.printStackTrace();\n                            }\n                            return number;\n                        }).subscribeOn(Schedulers.newThread())\n                        , 2)//This is the max concurrenrt\n        .subscribe();\n        new TestSubscriber()\n                .awaitTerminalEvent(15, TimeUnit.SECONDS);    }\n</code></pre>\n\n<p>If you see as a second argument after the function of the flatMap, we pass a value 2 which is the max number of concurrent threads that can run for that flatMap</p>\n\n<p>You can see the example and some more here.</p>\n\n<p><a href=\"https://github.com/politrons/reactive/blob/master/src/test/java/rx/observables/transforming/ObservableFlatMap.java\" rel=\"nofollow noreferrer\">https://github.com/politrons/reactive/blob/master/src/test/java/rx/observables/transforming/ObservableFlatMap.java</a></p>\n"}, {"tags": [], "owner": {"reputation": 548, "user_id": 1195935, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/1f7a075af323f10db1ded8565b184def?s=128&d=identicon&r=PG", "display_name": "n0shadow", "link": "https://stackoverflow.com/users/1195935/n0shadow"}, "is_accepted": true, "score": 2, "last_activity_date": 1523558252, "creation_date": 1523558252, "answer_id": 49803747, "question_id": 49741905, "link": "https://stackoverflow.com/questions/49741905/rxjava-specifying-maximum-concurrency-for-a-list-of-completables/49803747#49803747", "title": "RxJava: Specifying maximum concurrency for a list of Completables", "body": "<p>The simplest approach is to use <code>Floable.fromIterable</code> to convert the <code>List</code> of <code>Completable</code> to a <code>Publisher</code>.</p>\n\n<p>This will allow for the use of <code>Completable#mergeDelayError(Publisher&lt;? extends CompletableSource&gt; sources, int maxConcurrency)</code></p>\n"}], "owner": {"reputation": 548, "user_id": 1195935, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/1f7a075af323f10db1ded8565b184def?s=128&d=identicon&r=PG", "display_name": "n0shadow", "link": "https://stackoverflow.com/users/1195935/n0shadow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1796, "favorite_count": 0, "accepted_answer_id": 49803747, "answer_count": 2, "score": 2, "last_activity_date": 1523558252, "creation_date": 1523309065, "last_edit_date": 1523309917, "question_id": 49741905, "link": "https://stackoverflow.com/questions/49741905/rxjava-specifying-maximum-concurrency-for-a-list-of-completables", "title": "RxJava: Specifying maximum concurrency for a list of Completables", "body": "<p>I'm trying to query an API that provides me with a list of files to download (as follows). I then proceed to download these files while also re-querying the API for anything that may have been missed in the initial call. </p>\n\n<p><code>Completable#mergeDelayError(Iterable&lt;? extends CompletableSource&gt; sources)</code> is used to ensure I can perform multiple tasks in parallel and get notified when everything has been completed.</p>\n\n<pre><code>fun fetchAndDownload(details: List&lt;String&gt;): Completable = \n    exampleApi.fetchPackages(details) // This is a Single\n        .flatMapCompletable { (results, retry) -&gt; \n            val completables = mutableListOf&lt;Completable&gt;()\n            results.mapTo(completables) { value -&gt;\n                exampleApi.download(value).subscribeOn(Schedulers.io())\n            }\n\n            if (retry.isNotEmpty()) { \n                completables += fetchAndDownload(retry)\n                    .delay(3L, TimeUnit.SECONDS)\n                    .subscribeOn(Schedulers.io())\n            }\n            Completable.mergeDelayError(completables)\n        }\n</code></pre>\n\n<p>However, this implementation has the possibility of overwhelming the network and/or thread count by executing too many things at once. I am therefore wondering what the best approach would be to limit the number of <code>completables</code> that are running at once. </p>\n\n<p>I am aware of <code>Completable#mergeDelayError(Publisher&lt;? extends CompletableSource&gt; sources, int maxConcurrency)</code> but am not sure how to convert my <code>List&lt;Completable&gt;</code> to the required <code>Publisher</code>. An alternative solution is to provide a custom <code>Scheduler</code> that has a maximum thread count, but I am also not sure how to provide such a <code>Schduler</code> (that I can clean and discard when it is no longer needed).</p>\n"}, {"tags": ["kotlin", "multiplatform"], "comments": [{"owner": {"reputation": 950, "user_id": 1941359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dffbd0bd86e324aff9d04907df88e8b?s=128&d=identicon&r=PG", "display_name": "AlexO", "link": "https://stackoverflow.com/users/1941359/alexo"}, "edited": false, "score": 0, "creation_date": 1560968012, "post_id": 49741883, "comment_id": 99914550, "body": "Both <a href=\"http://stackoverflow.com/a/38982006/1941359\">Gradle for jvm</a> and <a href=\"http://stackoverflow.com/a/50739724/1941359\">Webpack for js</a> can be configured to use the common resources."}], "answers": [{"comments": [{"owner": {"reputation": 17473, "user_id": 1103561, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/0bdb2aec0e1fe8c1b56fd8e1e7b1e02e?s=128&d=identicon&r=PG&f=1", "display_name": "4ntoine", "link": "https://stackoverflow.com/users/1103561/4ntoine"}, "edited": false, "score": 0, "creation_date": 1547800332, "post_id": 50139519, "comment_id": 95324427, "body": "is it for Kotlin 1.2 or 1.3?"}], "tags": [], "owner": {"reputation": 335, "user_id": 3243751, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oGV4a.png?s=128&g=1", "display_name": "FLUXparticle", "link": "https://stackoverflow.com/users/3243751/fluxparticle"}, "is_accepted": false, "score": 0, "last_activity_date": 1525278966, "creation_date": 1525278966, "answer_id": 50139519, "question_id": 49741883, "link": "https://stackoverflow.com/questions/49741883/can-i-load-resources-from-a-kotlin-common-module-multiplatform-project/50139519#50139519", "title": "Can I load resources from a Kotlin common module (multiplatform project)", "body": "<p>It seams that the common/resource folder is ignored. I used an extra java module to share resources between projects.</p>\n\n<p>Since your javascript module probably has to load the resources from a server, the way you access them in kotlin has to differ from the java module.</p>\n\n<p>In the JS module you can use this command to load a file from server:</p>\n\n<pre><code>Request(\"https://pastebin.com/raw/p58mH6Cd\").text().then(onFulfilled = {println(it)})\n</code></pre>\n"}], "owner": {"reputation": 131, "user_id": 5858604, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-t-Ftvb0Vijk/AAAAAAAAAAI/AAAAAAAAADs/GYCy_fvIL4U/photo.jpg?sz=128", "display_name": "Sean", "link": "https://stackoverflow.com/users/5858604/sean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1216, "favorite_count": 4, "answer_count": 1, "score": 13, "last_activity_date": 1616573136, "creation_date": 1523308940, "question_id": 49741883, "link": "https://stackoverflow.com/questions/49741883/can-i-load-resources-from-a-kotlin-common-module-multiplatform-project", "title": "Can I load resources from a Kotlin common module (multiplatform project)", "body": "<p>I am porting a maven JVM Kotlin project to a gradle multiplatform Kotlin project.  After creating the default Kotlin multiplatform project from Intellij IDEA, I notice there is a \"resources\" directory, but the only way I know how to load from the resources directory is JVM specific (this.javaClass.classLoader.getResourceAsStream(name)).</p>\n\n<p>My initial searching has not found a platform independent way to load a resource using Kotlin standard libraries.  Is there something I am missing or is the \"resources\" directory useless in a common module?  The reason I need it is to load test data run in both  the javascript module and the jvm module.</p>\n"}, {"tags": ["regex", "list", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 5491, "user_id": 1439771, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/egtxg.png?s=128&g=1", "display_name": "SimY4", "link": "https://stackoverflow.com/users/1439771/simy4"}, "is_accepted": true, "score": 1, "last_activity_date": 1523318726, "creation_date": 1523318726, "answer_id": 49743360, "question_id": 49741573, "link": "https://stackoverflow.com/questions/49741573/kotlin-generate-a-map-list-from-properties-file/49743360#49743360", "title": "Kotlin generate a map list from properties file", "body": "<p>Something like this?</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    val input = \"\"\"banana = '5.5'\n        apples = '3.6f'\n        //vegies\n        carrots = '42.4r'\n        tomatoes = '3.4.s2'\"\"\"\n\n    val props = Properties()\n    props.load(ByteArrayInputStream(input.toByteArray(StandardCharsets.UTF_8)))\n    props.filterValues { it?.toString()?.isNotBlank() ?: false }.toList()\n              .forEach { println(it) }\n}\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 9513221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc91db1d129b930465dd1165cea985af?s=128&d=identicon&r=PG&f=1", "display_name": "ConnectionistSystems", "link": "https://stackoverflow.com/users/9513221/connectionistsystems"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "closed_date": 1524359049, "accepted_answer_id": 49743360, "answer_count": 1, "score": -2, "last_activity_date": 1523318726, "creation_date": 1523307496, "last_edit_date": 1523310716, "question_id": 49741573, "link": "https://stackoverflow.com/questions/49741573/kotlin-generate-a-map-list-from-properties-file", "closed_reason": "Needs more focus", "title": "Kotlin generate a map list from properties file", "body": "<p>I have a properties file with lots of data.</p>\n\n<p>Some data is like this</p>\n\n<pre><code>//fruits\nbanana = '5.5'\napples = '3.6f'\n//vegies\ncarrots = '42.4r'\ntomatoes = '3.4.s2'\n//There are comments and other text in file\n</code></pre>\n\n<p>and so on</p>\n\n<p>I need to map index/list for each time there is value on the left side of a = sign and get the map/list to the value between the single quotes sign. </p>\n\n<p>Later I want to use the list or map to print its value</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 385, "user_id": 7582111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48549f13e7ed90d72d51213a3936cc2d?s=128&d=identicon&r=PG&f=1", "display_name": "Heber Solis", "link": "https://stackoverflow.com/users/7582111/heber-solis"}, "edited": false, "score": 0, "creation_date": 1523367401, "post_id": 49743998, "comment_id": 86525043, "body": "but, if I want to implement that in several classes I would have to make a custom class for each, &quot;MainActivity&quot;?"}, {"owner": {"reputation": 1209, "user_id": 9311972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GExRf.png?s=128&g=1", "display_name": "Paul Chu", "link": "https://stackoverflow.com/users/9311972/paul-chu"}, "reply_to_user": {"reputation": 385, "user_id": 7582111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48549f13e7ed90d72d51213a3936cc2d?s=128&d=identicon&r=PG&f=1", "display_name": "Heber Solis", "link": "https://stackoverflow.com/users/7582111/heber-solis"}, "edited": false, "score": 0, "creation_date": 1523368033, "post_id": 49743998, "comment_id": 86525583, "body": "using <code>is</code> you still can be using one custom <code>EditText</code> class for each <code>Activity</code> :) Check my update"}, {"owner": {"reputation": 385, "user_id": 7582111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48549f13e7ed90d72d51213a3936cc2d?s=128&d=identicon&r=PG&f=1", "display_name": "Heber Solis", "link": "https://stackoverflow.com/users/7582111/heber-solis"}, "edited": false, "score": 0, "creation_date": 1523372148, "post_id": 49743998, "comment_id": 86528636, "body": "I implemented your past answer, and I had no luck, it doesn&#39;t detect the text changing"}, {"owner": {"reputation": 1209, "user_id": 9311972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GExRf.png?s=128&g=1", "display_name": "Paul Chu", "link": "https://stackoverflow.com/users/9311972/paul-chu"}, "reply_to_user": {"reputation": 385, "user_id": 7582111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48549f13e7ed90d72d51213a3936cc2d?s=128&d=identicon&r=PG&f=1", "display_name": "Heber Solis", "link": "https://stackoverflow.com/users/7582111/heber-solis"}, "edited": false, "score": 0, "creation_date": 1523535892, "post_id": 49743998, "comment_id": 86607205, "body": "That&#39;s strange, check out my <a href=\"https://github.com/Paulkit/Test_Kotlin_stackoverflow\" rel=\"nofollow noreferrer\">github project</a>, <code>CustomEditText</code> is work on detecting text changes, and distinguish different activities"}], "tags": [], "owner": {"reputation": 1209, "user_id": 9311972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GExRf.png?s=128&g=1", "display_name": "Paul Chu", "link": "https://stackoverflow.com/users/9311972/paul-chu"}, "is_accepted": true, "score": 0, "last_activity_date": 1523367975, "last_edit_date": 1523367975, "creation_date": 1523324445, "answer_id": 49743998, "question_id": 49741561, "link": "https://stackoverflow.com/questions/49741561/how-can-i-add-textchange-listener-to-all-edittext/49743998#49743998", "title": "How can I add TextChange Listener to all EditText?", "body": "<p>Add a <code>CustomEditText</code> class</p>\n\n<pre><code>class CustomEditText : EditText {\n\n    private var mContext: Context? = null\n    private var attributeSet: AttributeSet? = null\n\n    constructor(context: Context) : super(context) {\n        this.mContext = context\n        initCustomEditText()\n    }\n\n    constructor(context: Context, attrs: AttributeSet) : super(context, attrs) {\n        this.mContext = context\n        this.attributeSet = attrs\n        initCustomEditText()\n    }\n\n    constructor(context: Context, attrs: AttributeSet, defStyleAttr: Int) : super(context, attrs, defStyleAttr) {\n        this.mContext = context\n        this.attributeSet = attrs\n        initCustomEditText()\n    }\n\n    private fun initCustomEditText() {\n\n        this.addTextChangedListener(object : TextWatcher {\n            override fun onTextChanged(s: CharSequence, start: Int, before: Int, count: Int) {\n            }\n            override fun afterTextChanged(arg0: Editable) {\n                if(context is MainActivity){\n                    (context as MainActivity).tI_description_auxiliary_charges_info.isErrorEnabled=false\n                }else if(context is MainActivity2){\n                    (context as MainActivity2).tI_description_auxiliary_charges_info.isErrorEnabled=false\n                }\n                // ... other Activity\n            }\n            override fun beforeTextChanged(s: CharSequence, start: Int, count: Int, after: Int) {}\n        })\n\n    }\n\n}\n</code></pre>\n\n<p>Make sure - </p>\n\n<ol>\n<li><p>Your <code>MainActivity</code> (don't know yours since you haven't mentioned) and <code>tI_description_auxiliary_charges_info</code> both are <code>public</code></p></li>\n<li><p>All your <code>EditText</code> in XML change to like <code>com.a4plus1.com.dhq_app.Components.CustomEditText</code> (package name.CustomEditText)</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 1054, "user_id": 562146, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f105112f9c986a69ec89a5c84e69cc6e?s=128&d=identicon&r=PG", "display_name": "es0329", "link": "https://stackoverflow.com/users/562146/es0329"}, "is_accepted": false, "score": 0, "last_activity_date": 1523535088, "creation_date": 1523535088, "answer_id": 49796197, "question_id": 49741561, "link": "https://stackoverflow.com/questions/49741561/how-can-i-add-textchange-listener-to-all-edittext/49796197#49796197", "title": "How can I add TextChange Listener to all EditText?", "body": "<p>If I understand, you want to share a single TextWatcher among multiple TextInputLayouts. There may be several possible solutions; one approach would be:</p>\n\n<ol>\n<li>add <a href=\"https://github.com/android/android-ktx\" rel=\"nofollow noreferrer\" title=\"ktx\">Android's KTX</a> to module dependencies</li>\n<li>define a <a href=\"https://developer.android.com/reference/android/text/TextWatcher.html#afterTextChanged(android.text.Editable)\" rel=\"nofollow noreferrer\" title=\"TextWatcher#afterTextChanged\">TextWatcher</a> with your validation logic</li>\n<li><p>traverse the views, adding your textWatcher to each <a href=\"https://developer.android.com/reference/android/support/design/widget/TextInputLayout.html#setError(java.lang.CharSequence)\" rel=\"nofollow noreferrer\" title=\"TextInputLayout#setError\">TextInputLayout</a></p>\n\n<pre><code>// app module's build.gradle\ndependencies {\n    // #1\n    implementation 'androidx.core:core-ktx:0.3'\n}\n\n// sample Activity.kt\nprivate lateinit var layout: ConstraintLayout\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    layout = findViewById(R.id.coordinator)\n    addTextWatcherToEditTexts()\n}\n\n// #2\nprivate val textWatcher = object : TextWatcher {\n    override fun afterTextChanged(s: Editable?) {\n        layout.children.forEach { view -&gt;\n            (view as? TextInputLayout)?.let {\n                with(it) {\n                    error = null\n                    isErrorEnabled = false\n                }\n            }\n        }\n    }\n\n    override fun beforeTextChanged(s: CharSequence?, start: Int, count: Int, after: Int) {\n        // no-op\n    }\n\n    override fun onTextChanged(s: CharSequence?, start: Int, before: Int, count: Int) {\n        // no-op\n    }\n}\n\n// #3\nprivate fun addTextWatcherToEditTexts() {\n    layout.children.forEach { view -&gt;\n        (view as? EditText)?.addTextChangedListener(textWatcher)\n    }\n}\n</code></pre></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 385, "user_id": 7582111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48549f13e7ed90d72d51213a3936cc2d?s=128&d=identicon&r=PG&f=1", "display_name": "Heber Solis", "link": "https://stackoverflow.com/users/7582111/heber-solis"}, "edited": false, "score": 0, "creation_date": 1523893252, "post_id": 49800020, "comment_id": 86737582, "body": "Sorry, I&#39;m just responding to your solution, I just had time to test this, and it&#39;s no working I don&#39;t know why, it shows the error but noI just updated my code, if you could point me what I&#39;m doing wrong thank you very much"}], "tags": [], "owner": {"reputation": 1, "user_id": 7722320, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mv4oP4cA6Kw/AAAAAAAAAAI/AAAAAAAAAFM/gV33QMTIwEM/photo.jpg?sz=128", "display_name": "Cl&#233;ment NICOLAS", "link": "https://stackoverflow.com/users/7722320/cl%c3%a9ment-nicolas"}, "is_accepted": false, "score": 0, "last_activity_date": 1523545684, "creation_date": 1523545684, "answer_id": 49800020, "question_id": 49741561, "link": "https://stackoverflow.com/questions/49741561/how-can-i-add-textchange-listener-to-all-edittext/49800020#49800020", "title": "How can I add TextChange Listener to all EditText?", "body": "<p>If you don't mind adding a new dependency, you should consider using <a href=\"http://jakewharton.github.io/butterknife/\" rel=\"nofollow noreferrer\">Butterknife</a>.\nIt is compatible with kotlin, and with it you can write things like this :</p>\n\n<pre><code>@OnTextChanged(R.id.txt_description_auxiliary_charges_info,\n        R.id.txt_frequency_auxiliary_charges_info,\n        R.id.third_edit_text,\n        ...,\n        callback = OnTextChanged.Callback.AFTER_TEXT_CHANGED)\nfun hideErrorMessage(editable: Editable) {\n    // your code here\n    // tI_description_auxiliary_charges_info.isErrorEnabled = false\n}\n</code></pre>\n\n<p>To add it to your project, add this to your project build.gradle </p>\n\n<pre><code>dependencies {\n    ...\n    classpath \"com.jakewharton:butterknife-gradle-plugin:$butterknife_version\"\n}\n</code></pre>\n\n<p>and this to your app build.gradle </p>\n\n<pre><code>apply plugin: 'kotlin-kapt'\n\ndependencies {\n    ...    \n    compile \"com.jakewharton:butterknife:$butterknife_version\"\n    kapt \"com.jakewharton:butterknife-compiler:$butterknife_version\"\n}\n</code></pre>\n"}], "owner": {"reputation": 385, "user_id": 7582111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48549f13e7ed90d72d51213a3936cc2d?s=128&d=identicon&r=PG&f=1", "display_name": "Heber Solis", "link": "https://stackoverflow.com/users/7582111/heber-solis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2167, "favorite_count": 0, "accepted_answer_id": 49743998, "answer_count": 3, "score": 1, "last_activity_date": 1523889606, "creation_date": 1523307414, "last_edit_date": 1523889606, "question_id": 49741561, "link": "https://stackoverflow.com/questions/49741561/how-can-i-add-textchange-listener-to-all-edittext", "title": "How can I add TextChange Listener to all EditText?", "body": "<p>I have several <code>EditText</code> and I want to disappear the error from the <code>TextInputLayout</code>, once the user changes the text, how can I do it so it can detect the text changing from all the <code>Textview</code>s? I think, is implementing some class but I don't know which, and that's assuming that's the solution, I'm new to kotlin, sorry if the question seems dumb</p>\n\n<pre><code>  class AuxiliaryChangesInfoActivity: AppCompatActivity() {\n\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_auxiliary_changes_info)\n\n        hideErrorMessage()\n        img_close_auxiliary_changes.setOnClickListener({\n\n            onBackPressed()\n        })\n\n        txt_save_auxiliary_changes.setOnClickListener({\n\n            if(txt_description_auxiliary_charges_info.text.isEmpty()){\n                tI_description_auxiliary_charges_info.error=\"You need to specify a Description\"\n\n\n            }\n            else if(txt_frequency_auxiliary_charges_info.text.isEmpty()){\n                tI_frequency_auxiliary_charges_info.error=\"You need to specify a frequency\"\n            }\n            else if(txt_to_auxiliary_charges_info.text.isEmpty()){\n                tI_to_auxiliary_charges_info.error=\"You need to specify a to value\"\n            }\n            else if(txt_from_auxiliary_charges_info.text.isEmpty()){\n                tI_from_auxiliary_charges_info.error=\"You need to specify a from value\"\n            }\n            else if(txt_qty_auxiliary_charges_info.text.isEmpty()){\n                tI_qty_auxiliary_charges_info.error=\"You need to specify a quantity value\"\n            }\n        })\n\n\n\n    }\n\n    @OnTextChanged(R.id.txt_description_auxiliary_charges_info,\n            R.id.txt_frequency_auxiliary_charges_info,\n            R.id.txt_from_auxiliary_charges_info,\n            R.id.txt_to_auxiliary_charges_info,\n            R.id.txt_qty_auxiliary_charges_info,\n            callback = OnTextChanged.Callback.AFTER_TEXT_CHANGED)\n     fun hideErrorMessage() {\n        // your code here\n        tI_description_auxiliary_charges_info.isErrorEnabled = false\n        tI_frequency_auxiliary_charges_info.isErrorEnabled = false\n        tI_from_auxiliary_charges_info.isErrorEnabled = false\n        tI_to_auxiliary_charges_info.isErrorEnabled=false\n        tI_qty_auxiliary_charges_info.isErrorEnabled=false\n    }\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 1011, "user_id": 9545537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4aee91ba61e53841e3b955806ac6985?s=128&d=identicon&r=PG&f=1", "display_name": "pixix4", "link": "https://stackoverflow.com/users/9545537/pixix4"}, "edited": false, "score": 0, "creation_date": 1523304101, "post_id": 49740773, "comment_id": 86496009, "body": "Sorry for the bad title. I don&#39;t know how to correctly call this procedure."}], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": false, "score": 2, "last_activity_date": 1523304949, "creation_date": 1523304949, "answer_id": 49741019, "question_id": 49740773, "link": "https://stackoverflow.com/questions/49740773/map-list-to-tuples-of-following-elements/49741019#49741019", "title": "Map list to tuples of following elements", "body": "<p>You can use the standard library function <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/chunked.html\" rel=\"nofollow noreferrer\"><code>.chunked(n)</code></a> for this purpose: </p>\n\n<pre><code>val list = listOf(1, 2, 3, 4, 5, 6, 7)\nval output = list.chunked(2).dropLastWhile { it.size &lt; 2 } \n</code></pre>\n\n<p><sup>As <code>chunked</code> preserves the last partial list containing less items than the required size, you need to handle this and drop it conditionally with <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/drop-last-while.html\" rel=\"nofollow noreferrer\"><code>.dropLastWhile { ... }</code></a></sup></p>\n"}, {"tags": [], "owner": {"reputation": 26172, "user_id": 49746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IAAg.jpg?s=128&g=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/49746/todd"}, "is_accepted": true, "score": 5, "last_activity_date": 1523305239, "creation_date": 1523305239, "answer_id": 49741098, "question_id": 49740773, "link": "https://stackoverflow.com/questions/49740773/map-list-to-tuples-of-following-elements/49741098#49741098", "title": "Map list to tuples of following elements", "body": "<p>If you want a <code>List&lt;Pair&gt;</code>, you can use a standard library call for this called <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/windowed.html\" rel=\"noreferrer\"><code>windowed</code></a>.</p>\n\n<pre><code>val myList = listOf(1, 2, 3, 4, 5, 6, 7)\nval listOfPairs = myList.windowed(2, 2).map { Pair(it[0], it[1]) }\n// [(1, 2), (3, 4), (5, 6)]\n</code></pre>\n\n<p>The <code>windowed</code> function will return a <code>List&lt;List&lt;Int&gt;&gt;</code>, so you'll have to map the internal <code>List&lt;Int&gt;</code> to a <code>Pair&lt;Int, Int&gt;</code>. The <code>windowed</code> function by default will drop partial windows. </p>\n"}], "owner": {"reputation": 1011, "user_id": 9545537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4aee91ba61e53841e3b955806ac6985?s=128&d=identicon&r=PG&f=1", "display_name": "pixix4", "link": "https://stackoverflow.com/users/9545537/pixix4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2388, "favorite_count": 0, "accepted_answer_id": 49741098, "answer_count": 2, "score": 3, "last_activity_date": 1523305239, "creation_date": 1523304015, "question_id": 49740773, "link": "https://stackoverflow.com/questions/49740773/map-list-to-tuples-of-following-elements", "title": "Map list to tuples of following elements", "body": "<p>I have given a list of integers. I need to map always two following elements in further progressing. If the input list contains a invalid count of elements the last ones should be dropped. Here is an example:</p>\n\n<pre><code>[1, 2, 3, 4, 5, 6, 7] //Input\n[(1, 2), (3, 4), (5, 6)] //Output\n</code></pre>\n\n<p>I wrote to functions to get the wanted output but I think they are both inefficient.</p>\n\n<p>First i tried it with a functional approach. But it needs two filter calls and a zip call for the resulting list. So it iterates 2.5 times over the entier list.</p>\n\n<p>Two imrpove this I tried a iterative approach. It only iterates once over the list and is possibly the fastest version. But it uses multiple mutable variables/lists. Also it is not as easy to understand as the functinal approach. (And it breaks the cleaness of the rest of the code)</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    mapFunctional()\n    mapIterative()\n}\n\nfun mapFunctional() {\n    val list: List&lt;Int&gt; = listOf(1, 2, 3, 4, 5, 6, 7)\n\n    val output: List&lt;Pair&lt;Int, Int&gt;&gt; = list.filterIndexed { index, _ -&gt;\n        index % 2 == 0\n    }.zip(list.filterIndexed {\n        index, _ -&gt; index % 2 == 1\n    })\n\n    println(output)\n}\n\nfun mapIterative() {\n    val list: List&lt;Int&gt; = listOf(1, 2, 3, 4, 5, 6, 7)\n\n    val output: MutableList&lt;Pair&lt;Int, Int&gt;&gt; = mutableListOf()\n    var index = 0\n    while (index &lt; list.size - 1) {\n        output.add(list[index++] to list[index++])\n    }\n\n    println(output)\n}\n</code></pre>\n\n<p>Is their a good (efficient) way to achieve this in a functinal aprroach or is it only possible with a classic loop?</p>\n"}, {"tags": ["android", "canvas", "kotlin", "antialiasing", "android-vectordrawable"], "comments": [{"owner": {"reputation": 21514, "user_id": 211627, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "JDB still remembers Monica", "link": "https://stackoverflow.com/users/211627/jdb-still-remembers-monica"}, "edited": false, "score": 1, "creation_date": 1523305620, "post_id": 49740327, "comment_id": 86496832, "body": "Bitmap resizing is notorious for leaving artifacts. Smoothing algorithms are relatively expensive, and not something you&#39;d generally want to use for this sort of thing. I&#39;m sure there&#39;s a package out there that can do this for you, but I wouldn&#39;t count on built-in solution. Scalable vectors are your friend, but I know that things aren&#39;t always that simple."}, {"owner": {"reputation": 21514, "user_id": 211627, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "JDB still remembers Monica", "link": "https://stackoverflow.com/users/211627/jdb-still-remembers-monica"}, "edited": false, "score": 0, "creation_date": 1523305766, "post_id": 49740327, "comment_id": 86496918, "body": "If you have to use bitmaps, it&#39;s often helpful to minimize scaling by creating multiple scaled versions ahead of time with image processing software and then loading the nearest-size version dynamically. You can still scale a little bit if needed to get the perfect fit, but this will help to minimize the artifacts."}, {"owner": {"reputation": 465, "user_id": 1433537, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6a1e5e676b526630e3beee74c35a0e43?s=128&d=identicon&r=PG", "display_name": "Boris Rozhkovsky", "link": "https://stackoverflow.com/users/1433537/boris-rozhkovsky"}, "reply_to_user": {"reputation": 21514, "user_id": 211627, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "JDB still remembers Monica", "link": "https://stackoverflow.com/users/211627/jdb-still-remembers-monica"}, "edited": false, "score": 0, "creation_date": 1523350684, "post_id": 49740327, "comment_id": 86513282, "body": "@JDB I&#39;m already use Vector Resource, at the first step im loading VectorDrawable from resources, set desired size to this vector, and then. convert it to bitmap."}, {"owner": {"reputation": 465, "user_id": 1433537, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6a1e5e676b526630e3beee74c35a0e43?s=128&d=identicon&r=PG", "display_name": "Boris Rozhkovsky", "link": "https://stackoverflow.com/users/1433537/boris-rozhkovsky"}, "reply_to_user": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1523350874, "post_id": 49740327, "comment_id": 86513424, "body": "@pskink I&#39;m trying to draw a view with image and text, on a canvas. But I really need this kind of &quot;arcitecture&quot;"}, {"owner": {"reputation": 465, "user_id": 1433537, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6a1e5e676b526630e3beee74c35a0e43?s=128&d=identicon&r=PG", "display_name": "Boris Rozhkovsky", "link": "https://stackoverflow.com/users/1433537/boris-rozhkovsky"}, "reply_to_user": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1523354579, "post_id": 49740327, "comment_id": 86515916, "body": "@pskink I have a <code>Rect</code> that user drags over canvas. Size of a <code>Rect</code> is in pixels. I&#39;m  trying to draw view inside this rect. Width and height are getting from this <code>Rect</code>. So, size that I&#39;m passing to  <code>getBitmapFromVectorDrawable</code> corresponds to draw size as 1:1"}, {"owner": {"reputation": 465, "user_id": 1433537, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6a1e5e676b526630e3beee74c35a0e43?s=128&d=identicon&r=PG", "display_name": "Boris Rozhkovsky", "link": "https://stackoverflow.com/users/1433537/boris-rozhkovsky"}, "reply_to_user": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1523355489, "post_id": 49740327, "comment_id": 86516532, "body": "@pskink I&#39;ve attached images"}], "owner": {"reputation": 465, "user_id": 1433537, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6a1e5e676b526630e3beee74c35a0e43?s=128&d=identicon&r=PG", "display_name": "Boris Rozhkovsky", "link": "https://stackoverflow.com/users/1433537/boris-rozhkovsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1029, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1523355460, "creation_date": 1523302236, "last_edit_date": 1523355460, "question_id": 49740327, "link": "https://stackoverflow.com/questions/49740327/draw-vectordrawable-on-canvas-without-antialiasing-android", "title": "Draw VectorDrawable on canvas without antialiasing Android", "body": "<p>I'm trying to draw <code>VectorDrawable</code> resource on Canvas. The way I'm doing it now, is a bit complicated, so step-by-step proccess looks like:</p>\n\n<p>Load <code>VectorDrawable</code> from assets, set desired size, convert it to bitmap:</p>\n\n<pre><code>fun getBitmapFromVectorDrawable(context: Context, drawableId: Int, width: \n   Int, height: Int): Bitmap {\n   var drawable = ContextCompat.getDrawable(context, drawableId)\n   if (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.LOLLIPOP)\n       drawable = DrawableCompat.wrap(drawable!!).mutate()\n   val bitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888)\n   val canvas = Canvas(bitmap)\n   drawable.setBounds(0, 0, width, height)\n   drawable.isFilterBitmap = true\n   drawable.draw(canvas)\n   return bitmap\n}\n</code></pre>\n\n<p>Manually inflate this View:</p>\n\n<pre><code>&lt;RelativeLayout\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"&gt;\n\n    &lt;ImageView\n        android:id=\"@id/img1\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:adjustViewBounds=\"true\"\n        android:scaleType=\"fitCenter\"/&gt;\n\n        ...\n        ///ACTUALLY, THIS VIEW IS MORE COMPLICATED WITH TextView AND SOME OTHER VIEWS   \n    &lt;/RelativeLayout&gt;\n</code></pre>\n\n<p>Layout it with desired size:</p>\n\n<pre><code>    val widthSpec = View.MeasureSpec.makeMeasureSpec(width, View.MeasureSpec.AT_MOST)\n    val heightSpec = View.MeasureSpec.makeMeasureSpec(height, View.MeasureSpec.AT_MOST)\n    view.measure(widthSpec, heightSpec)\n    view.layout(0, 0, view.measuredWidth, view.measuredHeight)\n</code></pre>\n\n<p>Then, I`m setting bitmap to this image View:</p>\n\n<pre><code>imageView.setImageBitmap(getBitmapFromVectorDrawable(view.context, drawableId, width, height))\n</code></pre>\n\n<p>Then I`m rendering this View into Bitmap, using this method:</p>\n\n<pre><code>    fun loadBitmapFromView(v: View, width: Int, height: Int): Bitmap {\n        v.isDrawingCacheEnabled = true\n        v.buildDrawingCache();\n        if (v.drawingCache != null)\n            return v.drawingCache\n\n        val b = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888)\n        val c = Canvas(b)\n        v.draw(c)\n        return b\n    }\n</code></pre>\n\n<p>And finally, draw it on canvas:</p>\n\n<pre><code>    bitmap = loadBitmapFromView(view, width, height)\n    matrix.reset()\n    matrix.postTranslate(translation.left, translation.top)\n    canvas.drawBitmap(bitmap, matrix, null)\n</code></pre>\n\n<p>My test image is a simple circle. If I'm trying to draw it small (25px:25px), there are a <strong>lot of pixel artifacts on edges</strong>.\nWidth and height variables from code above is taken from drawingRect, that I'm trying to draw on canvas, so, at the first step, I`m trying to load resource with target size, that no additional scaling required.\nAlso, I understand, that there are a better way to draw bitmap on canvas, without using view hierarchy, but I need it to get some aligning benefits from it (align text at center of image, or using constraint layout, autosize text etc...)</p>\n\n<p><strong>EDIT 1</strong>\nHere is an example:\n<a href=\"https://i.stack.imgur.com/ZWevE.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZWevE.jpg\" alt=\"The bigger circle drawn normally, smaller one had artifacts\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/O9SqC.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/O9SqC.jpg\" alt=\"And if i zoom screenshot\"></a></p>\n"}, {"tags": ["java", "javafx", "kotlin"], "comments": [{"owner": {"reputation": 511, "user_id": 1975276, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d3ade56763bc3b8b2a0b5c00c87281e3?s=128&d=identicon&r=PG&f=1", "display_name": "Brasch", "link": "https://stackoverflow.com/users/1975276/brasch"}, "edited": false, "score": 0, "creation_date": 1529982989, "post_id": 49739308, "comment_id": 89060784, "body": "Have you managed to find any workarounds to this? It&#39;s driving me nuts."}, {"owner": {"reputation": 4588, "user_id": 4126843, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/4r8yp.png?s=128&g=1", "display_name": "PHPirate", "link": "https://stackoverflow.com/users/4126843/phpirate"}, "reply_to_user": {"reputation": 511, "user_id": 1975276, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d3ade56763bc3b8b2a0b5c00c87281e3?s=128&d=identicon&r=PG&f=1", "display_name": "Brasch", "link": "https://stackoverflow.com/users/1975276/brasch"}, "edited": false, "score": 0, "creation_date": 1530978632, "post_id": 49739308, "comment_id": 89429725, "body": "@Brayden see my answer below"}], "answers": [{"tags": [], "owner": {"reputation": 4588, "user_id": 4126843, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/4r8yp.png?s=128&g=1", "display_name": "PHPirate", "link": "https://stackoverflow.com/users/4126843/phpirate"}, "is_accepted": true, "score": 3, "last_activity_date": 1531406659, "last_edit_date": 1531406659, "creation_date": 1530978599, "answer_id": 51224704, "question_id": 49739308, "link": "https://stackoverflow.com/questions/49739308/javafx-icon-quality-in-taskbar/51224704#51224704", "title": "JavaFX icon quality in taskbar", "body": "<p>A solution for Windows release versions of your program (where it most matters, this doesn't help for the debug version) is using launch4j and InnoSetup.\nlaunch4j generates an executable file, and InnoSetup wraps an installation procedure around it.</p>\n\n<p><strong>How to add a good-looking icon to your JavaFX application for Windows</strong>\n(and make it pinnable to the taskbar)</p>\n\n<p>1. Using Gradle, add the launch4j plugin. For example when using Kotlin Gradle DSL, add </p>\n\n<pre><code>plugins {\n    // Plugin to build .exe files.\n    id(\"edu.sc.seis.launch4j\") version \"2.4.4\"\n}\n\ndependencies {\n    // JNA, used to e.g. make a program pinnable to taskbar.\n    compile(\"net.java.dev.jna:jna:4.5.1\")\n    compile(\"net.java.dev.jna:jna-platform:4.5.1\")\n}\n\nlaunch4j {\n    mainClassName = \"nl.mynamespace.myapp.MainKt\"\n    icon = \"$projectDir/src/main/resources/myapp32.ico\"\n    manifest = \"$projectDir/releasing/launch4j/myapp.manifest\"\n}\n</code></pre>\n\n<p>and put the icon and manifest file in the paths you specified, with the manifest containing</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?&gt;\n&lt;assembly xmlns=\"urn:schemas-microsoft-com:asm.v1\" manifestVersion=\"1.0\"&gt;\n    &lt;trustInfo xmlns=\"urn:schemas-microsoft-com:asm.v3\"&gt;\n        &lt;security&gt;\n            &lt;requestedPrivileges&gt;\n            &lt;requestedExecutionLevel level=\"highestAvailable\"\n                uiAccess=\"False\" /&gt;\n        &lt;/requestedPrivileges&gt;\n    &lt;/security&gt;\n    &lt;/trustInfo&gt;\n&lt;/assembly&gt; \n</code></pre>\n\n<p>2. Run the Gradle task <code>launch4j/createExe</code>.</p>\n\n<p>3. Download <a href=\"http://jrsoftware.org/isdl.php#stable\" rel=\"nofollow noreferrer\">InnoSetup</a>.</p>\n\n<p>4. Adapt any configuration (<code>.iss</code>) file to your project, for example like below</p>\n\n<pre><code>#define MyAppName \"Myapp\"\n#define MyAppVersion \"2.0.0-beta.9\"\n#define MyAppPublisher \"mynamespace\"\n#define MyAppURL \"https://github.com/mynamespace/myapp\"\n#define MyAppExeName \"myapp.exe\"\n\n[Setup]\n; NOTE: The value of AppId uniquely identifies this application.\n; Do not use the same AppId value in installers for other applications.\n; (To generate a new GUID, click Tools | Generate GUID inside the IDE.)\nAppId={{something generated here}}\nAppName={#MyAppName}\nAppVersion={#MyAppVersion}\n;AppVerName={#MyAppName} {#MyAppVersion}\nAppPublisher={#MyAppPublisher}\nAppPublisherURL={#MyAppURL}\nAppSupportURL={#MyAppURL}\nAppUpdatesURL={#MyAppURL}\nDefaultDirName={pf}\\{#MyAppName}\nDisableProgramGroupPage=yes\nLicenseFile=..\\..\\LICENSE\nOutputDir=..\\innoSetup\nOutputBaseFilename=setup_myapp_{#MyAppVersion}\nSetupIconFile=..\\..\\src\\main\\resources\\myapp32.ico\nCompression=lzma\nSolidCompression=yes\n\n[Languages]\nName: \"english\"; MessagesFile: \"compiler:Default.isl\"\n\n[Tasks]\nName: \"desktopicon\"; Description: \"{cm:CreateDesktopIcon}\"; GroupDescription: \"{cm:AdditionalIcons}\"; Flags: unchecked\n\n[Files]\nSource: \"..\\..\\build\\launch4j\\myapp.exe\"; DestDir: \"{app}\"; Flags: ignoreversion\n; NOTE: Don't use \"Flags: ignoreversion\" on any shared system files\n\n[Icons]\nName: \"{commonprograms}\\{#MyAppName}\"; Filename: \"{app}\\{#MyAppExeName}\"\nName: \"{commondesktop}\\{#MyAppName}\"; Filename: \"{app}\\{#MyAppExeName}\"; Tasks: desktopicon; Comment: \"Myapp {#MyAppVersion}\"; AppUserModelID: \"nl.mynamespace.myapp.Main\"\n; create icon shortcut that embeds AppUserModelID information, which is the same as\n; set in the program, to enable pinning to taskbar.\n\n\n[Run]\nFilename: \"{app}\\{#MyAppExeName}\"; Description: \"{cm:LaunchProgram,{#StringChange(MyAppName, '&amp;', '&amp;&amp;')}}\"; Flags: shellexec postinstall skipifsilent\n</code></pre>\n\n<p>5. In InnoSetup, click Build | Compile. If you got all the paths right you will now have an installation file, if you use it you will install your JavaFX application which you can pin to the taskbar. </p>\n\n<p>Resulting icon:</p>\n\n<p><a href=\"https://i.stack.imgur.com/zaBeN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zaBeN.png\" alt=\"nice!\"></a></p>\n"}], "owner": {"reputation": 722, "user_id": 6629569, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/eec30cf8d13a1de12bde3a38dd18d483?s=128&d=identicon&r=PG&f=1", "display_name": "Abby", "link": "https://stackoverflow.com/users/6629569/abby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 747, "favorite_count": 0, "accepted_answer_id": 51224704, "answer_count": 1, "score": 7, "last_activity_date": 1531406659, "creation_date": 1523298182, "question_id": 49739308, "link": "https://stackoverflow.com/questions/49739308/javafx-icon-quality-in-taskbar", "title": "JavaFX icon quality in taskbar", "body": "<p>When setting a png image as the stage icon in JavaFX (using Kotlin, but this is also a problem in Java), the icon seems to be deformed.  </p>\n\n<p>I have googled for this problem, and found the following things:</p>\n\n<ul>\n<li>It was (and probably still is) a bug. On the <a href=\"https://bugs.openjdk.java.net/browse/JDK-8090133\" rel=\"noreferrer\">issue page</a> of this bug they explain that a workaround would be to avoid using semi-transparent pixels. I have tried this, but still my images get deformed, as is shown below.</li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/39fno.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/39fno.png\" alt=\"32x32\"></a> <a href=\"https://i.stack.imgur.com/GAWUF.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/GAWUF.png\" alt=\"Deformed 32x32\"></a></p>\n\n<p><strong>Left.</strong> Original 32x32 image provided to JavaFx. <strong>Right.</strong> The image JavaFx put in the taskbar.</p>\n\n<p><a href=\"https://i.stack.imgur.com/6ZjZM.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/6ZjZM.png\" alt=\"Original 48x48\"></a> <a href=\"https://i.stack.imgur.com/isfRi.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/isfRi.png\" alt=\"Deformed 48x48\"></a></p>\n\n<p><strong>Left.</strong> Original 48x48 image provided to JavaFx. <strong>Right.</strong> The image JavaFx put in the taskbar.</p>\n\n<p>It looks like the 32x32 one has to be scaled up, and the 48x48 one has to be scaled down, to something around 42x42 (I also made a 42x42 but that didn't help either). \nSince the sizes that Windows 'wants' are either a power of two or 48x48, you would say that those sizes would work.</p>\n\n<ul>\n<li>I came upon <a href=\"https://stackoverflow.com/questions/29356066/low-quality-icon-in-taskbar-of-a-stage-javafx/29358121#29358121\">this</a> older question about this topic. It is discussed here that JavaFX does not automatically pick the best size of the icon, but usually the last icon that you add to the icon set, so it is suggested to put the icon you think would be the best fit as last.</li>\n</ul>\n\n<p>As I am aware that this is (probably) an unresolved bug in JavaFX and the other question was last active about three years ago, I am wondering if anyone has found a better workaround in the meantime. </p>\n\n<p>I have created an MWE in Kotlin similar to the one provided in the issue page, as you can easily compare the original image to the one that ends up in the task bar. The images used are the following:</p>\n\n<ul>\n<li>icon48.png: <img src=\"https://i.stack.imgur.com/7ey7Z.png\" alt=\"Original 48x48 icon\"></li>\n<li>icon32.png: <img src=\"https://i.stack.imgur.com/Sm3Jd.png\" alt=\"Original 32x32 icon\"></li>\n</ul>\n\n<p><strong>MWE</strong></p>\n\n<pre><code>class Main : Application() {\n    override fun start(primaryStage: Stage) {\n        val icon48 = Image(\"sample/icon48.png\")\n        val icon32 = Image(\"sample/icon32.png\")\n        primaryStage.scene = Scene(Group(\n                ImageView(icon48)\n                ImageView(icon32)\n        ))\n\n        primaryStage.icons.addAll(\n                icon48,\n                icon32\n        )\n\n        primaryStage.show()\n    }\n}\n\nfun main(args: Array&lt;String&gt;) {\n    Application.launch(Main::class.java, *args)\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-glide"], "comments": [{"owner": {"reputation": 1069, "user_id": 3257025, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/gVeiw.png?s=128&g=1", "display_name": "ARLabs", "link": "https://stackoverflow.com/users/3257025/arlabs"}, "edited": false, "score": 0, "creation_date": 1523551784, "post_id": 49738855, "comment_id": 86618625, "body": "I have the same problem. It seems related to bitmap recycle. I replaced bitmap.recycle() with Glide.get(this).getBitmapPool().put( bitmap ) but it still happens. Have you solved? I&#39;m using Glide 4.6.1, and you?"}, {"owner": {"reputation": 1721, "user_id": 3796083, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/533f65ff463f37e5540bac8059583a8c?s=128&d=identicon&r=PG", "display_name": "AndroidRuntimeException", "link": "https://stackoverflow.com/users/3796083/androidruntimeexception"}, "reply_to_user": {"reputation": 1069, "user_id": 3257025, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/gVeiw.png?s=128&g=1", "display_name": "ARLabs", "link": "https://stackoverflow.com/users/3257025/arlabs"}, "edited": false, "score": 0, "creation_date": 1523560200, "post_id": 49738855, "comment_id": 86622994, "body": "Mi issue was related because I was blurring a view, to blur a view I use set drawing cache enable view. And after that I disable the cache and crash. So the solution was use other method to get the view as bitmap."}, {"owner": {"reputation": 612, "user_id": 5493999, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/af1540ce6627c0231efcf14d8667e147?s=128&d=identicon&r=PG", "display_name": "Abdul Mateen", "link": "https://stackoverflow.com/users/5493999/abdul-mateen"}, "edited": false, "score": 0, "creation_date": 1574926742, "post_id": 49738855, "comment_id": 104403632, "body": "Hi, @AndroidRuntimeException. By any chance do you remember how exactly you solved this issue?"}], "answers": [{"tags": [], "owner": {"reputation": 2194, "user_id": 1293601, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/VMpMl.jpg?s=128&g=1", "display_name": "Sumit Sahoo", "link": "https://stackoverflow.com/users/1293601/sumit-sahoo"}, "is_accepted": false, "score": 1, "last_activity_date": 1574155345, "last_edit_date": 1574155345, "creation_date": 1574076263, "answer_id": 58913506, "question_id": 49738855, "link": "https://stackoverflow.com/questions/49738855/glide-java-lang-illegalstateexception-cannot-obtain-size-for-recycled-bitmap-a/58913506#58913506", "title": "Glide Java.lang.IllegalStateException: Cannot obtain size for recycled Bitmap: android.graphics.Bitmap@a4f3bcf[896x157] ARGB_8888", "body": "<p>Make sure there are no statements like below in your code :</p>\n\n<pre><code>Glide.with(getApplicationContext()).clear(target);\nGlide.get(getApplicationContext()).getBitmapPool().clearMemory();\n</code></pre>\n\n<p>From docs, getBitmapPool() returns the <code>{@link com.bumptech.glide.load.engine.bitmap_recycle.BitmapPool}</code> used to temporarily store <code>{@link android.graphics.Bitmap}</code> so they can be reused to avoid garbage collections.</p>\n\n<p>Usually this error happens when any bitmap recycling happens specially when the bitmap is already recycled. So in case <code>getBitmapPool()</code> is needed better to wrap inside a <code>if</code> check <code>!bitmap.isRecycled()</code></p>\n"}], "owner": {"reputation": 1721, "user_id": 3796083, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/533f65ff463f37e5540bac8059583a8c?s=128&d=identicon&r=PG", "display_name": "AndroidRuntimeException", "link": "https://stackoverflow.com/users/3796083/androidruntimeexception"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1397, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1574155345, "creation_date": 1523296364, "last_edit_date": 1553442019, "question_id": 49738855, "link": "https://stackoverflow.com/questions/49738855/glide-java-lang-illegalstateexception-cannot-obtain-size-for-recycled-bitmap-a", "title": "Glide Java.lang.IllegalStateException: Cannot obtain size for recycled Bitmap: android.graphics.Bitmap@a4f3bcf[896x157] ARGB_8888", "body": "<p>I have an activity with a recycler view with some backgrounds.</p>\n\n<p>Sometimes when scroll the recyclerview and press back button I get this error.</p>\n\n<p>I have two types of background(one is blurred).</p>\n\n<p>To load the normal background I use:</p>\n\n<pre><code>fun AppCompatImageView.loadImage(resId: Int) {\n    Glide.with(context)\n            .load(AppCompatResources.getDrawable(context, resId))\n            .into(this)\n}\n</code></pre>\n\n<p>To load the blurred background I use:</p>\n\n<pre><code>Glide.with(mContext)\n  .applyDefaultRequestOptions(RequestOptions().override(backgroundWidth, backgroundHeight))\n  .asBitmap()\n  .load(R.drawable.card_dog_placeholder)\n  .into(object : SimpleTarget&lt;Bitmap&gt;() {\n                                override fun onResourceReady(bitmap: Bitmap, transition: Transition&lt;in Bitmap&gt;?) {\n                                    cardYouAreHeroBackgroundImageView.setImageBitmap(bitmap.blurRenderScript(mContext, CARD_BG_RADIUS))\n                                }\n                            })\n\nfun Bitmap.blurRenderScript(context: Context, radius: Float): Bitmap {\n    val rs = RenderScript.create(context)\n    val blurredBitmap = copy(Bitmap.Config.ARGB_8888, true)\n\n    val input = Allocation.createFromBitmap(rs, blurredBitmap, Allocation.MipmapControl.MIPMAP_FULL, Allocation.USAGE_SHARED)\n    val output = Allocation.createTyped(rs, input.type)\n\n    val script = ScriptIntrinsicBlur.create(rs, Element.U8_4(rs))\n    script.setInput(input)\n\n    script.setRadius(radius)\n    script.forEach(output)\n    output.copyTo(blurredBitmap)\n    return blurredBitmap\n}\n</code></pre>\n\n<blockquote>\n  <p>java.lang.RuntimeException: Unable to destroy activity\n  {com.yourpackage/com.yourpackage.DashboardActivity}:\n  java.lang.IllegalStateException: Cannot obtain size for recycled\n  Bitmap: android.graphics.Bitmap@a4f3bcf[896x157] ARGB_8888 at\n  android.app.ActivityThread.performDestroyActivity(ActivityThread.java:4383)\n  at\n  android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:4401)\n  at android.app.ActivityThread.-wrap5(Unknown Source:0) at\n  android.app.ActivityThread$H.handleMessage(ActivityThread.java:1649)\n  at android.os.Handler.dispatchMessage(Handler.java:106) at\n  android.os.Looper.loop(Looper.java:164) at\n  android.app.ActivityThread.main(ActivityThread.java:6494) at\n  java.lang.reflect.Method.invoke(Native Method) at\n  com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:438)\n  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:807) Caused\n  by: java.lang.IllegalStateException: Cannot obtain size for recycled\n  Bitmap: android.graphics.Bitmap@a4f3bcf[896x157] ARGB_8888 at\n  com.bumptech.glide.util.Util.getBitmapByteSize(Util.java:78) at\n  com.bumptech.glide.load.resource.bitmap.UnitBitmapDecoder$NonOwnedBitmapResource.getSize(UnitBitmapDecoder.java:49)\n  at\n  com.bumptech.glide.load.engine.EngineResource.getSize(EngineResource.java:60)\n  at\n  com.bumptech.glide.load.engine.cache.LruResourceCache.getSize(LruResourceCache.java:42)\n  at\n  com.bumptech.glide.load.engine.cache.LruResourceCache.getSize(LruResourceCache.java:13)\n  at com.bumptech.glide.util.LruCache.put(LruCache.java:124) at\n  com.bumptech.glide.load.engine.cache.LruResourceCache.put(LruResourceCache.java:13)\n  at\n  com.bumptech.glide.load.engine.Engine.onResourceReleased(Engine.java:326)\n  at\n  com.bumptech.glide.load.engine.EngineResource.release(EngineResource.java:112)\n  at com.bumptech.glide.load.engine.Engine.release(Engine.java:286) at\n  com.bumptech.glide.request.SingleRequest.releaseResource(SingleRequest.java:345)\n  at\n  com.bumptech.glide.request.SingleRequest.clear(SingleRequest.java:324)\n  at\n  com.bumptech.glide.manager.RequestTracker.clearRemoveAndMaybeRecycle(RequestTracker.java:73)\n  at\n  com.bumptech.glide.manager.RequestTracker.clearRemoveAndRecycle(RequestTracker.java:60)\n  at com.bumptech.glide.RequestManager.untrack(RequestManager.java:623)\n  at\n  com.bumptech.glide.RequestManager.untrackOrDelegate(RequestManager.java:591)\n  at com.bumptech.glide.RequestManager.clear(RequestManager.java:579) at\n  com.bumptech.glide.RequestManager.onDestroy(RequestManager.java:323)\n  at\n  com.bumptech.glide.manager.ActivityFragmentLifecycle.onDestroy(ActivityFragmentLifecycle.java:65)\n  at\n  com.bumptech.glide.manager.SupportRequestManagerFragment.onDestroy(SupportRequestManagerFragment.java:194)\n  at android.support.v4.app.Fragment.performDestroy(Fragment.java:2585)\n  at\n  android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1559)\n  at\n  android.support.v4.app.FragmentManagerImpl.moveFragmentToExpectedState(FragmentManager.java:1752)\n  at\n  android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1821)\n  at\n  android.support.v4.app.FragmentManagerImpl.dispatchStateChange(FragmentManager.java:3251)\n  at\n  android.support.v4.app.FragmentManagerImpl.dispatchDestroy(FragmentManager.java:3242)\n  at\n  android.support.v4.app.FragmentController.dispatchDestroy(FragmentController.java:265)\n  at\n  android.support.v4.app.FragmentActivity.onDestroy(FragmentActivity.java:390)\n  at\n  android.support.v7.app.AppCompatActivity.onDestroy(AppCompatActivity.java:209)\n  at android.app.Activity.performDestroy(Activity.java:7208) at\n  android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1249)\n  at\n  android.app.ActivityThread.performDestroyActivity(ActivityThread.java:4370)\n  at\n  android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:4401)\n  at android.app.ActivityThread.-wrap5(Unknown Source:0)  at\n  android.app.ActivityThread$H.handleMessage(ActivityThread.java:1649) \n  at android.os.Handler.dispatchMessage(Handler.java:106)  at\n  android.os.Looper.loop(Looper.java:164)  at\n  android.app.ActivityThread.main(ActivityThread.java:6494)  at\n  java.lang.reflect.Method.invoke(Native Method)  at\n  com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:438)\n  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:807)</p>\n</blockquote>\n\n<p>Any idea?</p>\n"}, {"tags": ["kotlin", "boxing"], "comments": [{"owner": {"reputation": 377, "user_id": 4935400, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-LYEbQIyaiJw/AAAAAAAAAAI/AAAAAAAAAUw/_7-ifckkRFE/photo.jpg?sz=128", "display_name": "ohlab", "link": "https://stackoverflow.com/users/4935400/ohlab"}, "edited": false, "score": 0, "creation_date": 1523294668, "post_id": 49738117, "comment_id": 86491178, "body": "My mistake. The output was wrong. first check = false, second check = true"}], "answers": [{"tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": false, "score": 2, "last_activity_date": 1523294024, "creation_date": 1523294024, "answer_id": 49738235, "question_id": 49738117, "link": "https://stackoverflow.com/questions/49738117/kotlin-number-boxing-test-strange/49738235#49738235", "title": "Kotlin number boxing test strange", "body": "<p>That's rather weird, I'm consistently (both locally and on <a href=\"https://try.kotlinlang.org/\" rel=\"nofollow noreferrer\">try.kotlinlang.org</a> with different Kotlin versions) getting this result instead:</p>\n\n<pre><code>first check = false\nsecond check = true\n</code></pre>\n\n<p>And this is what is to be expected, as the JVM <a href=\"https://stackoverflow.com/a/3130348/4465208\">caches</a> <code>Integer</code> instances int the <code>-127</code> to <code>128</code> range, reusing the same <code>Integer</code> instance when one is required for boxing, literals, or <code>Integer.valueOf</code> calls in this range.</p>\n"}, {"tags": [], "owner": {"reputation": 5658, "user_id": 8041461, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-nR0Gs4YyO0M/AAAAAAAAAAI/AAAAAAAAAKk/ld4ET5Sgzvw/photo.jpg?sz=128", "display_name": "jrtapsell", "link": "https://stackoverflow.com/users/8041461/jrtapsell"}, "is_accepted": false, "score": 3, "last_activity_date": 1523297006, "last_edit_date": 1523297006, "creation_date": 1523294104, "answer_id": 49738254, "question_id": 49738117, "link": "https://stackoverflow.com/questions/49738117/kotlin-number-boxing-test-strange/49738254#49738254", "title": "Kotlin number boxing test strange", "body": "<h1>The output I got</h1>\n\n<pre><code>first check = false\nsecond check = true\n</code></pre>\n\n<h1>What the code compiles to</h1>\n\n<pre><code>public static final void main(@NotNull String[] args) {\n      Intrinsics.checkParameterIsNotNull(args, \"args\");\n      int a = 1000;\n      Integer boxedA1 = Integer.valueOf(a);\n      Integer boxedA2 = Integer.valueOf(a);\n      String var4 = \"first check = \" + (boxedA1 == boxedA2);\n      System.out.println(var4);\n      int b = 2;\n      Integer boxedB1 = Integer.valueOf(b);\n      Integer boxedB2 = Integer.valueOf(b);\n      String var7 = \"second check = \" + (boxedB1 == boxedB2);\n      System.out.println(var7);\n}\n</code></pre>\n\n<h1>Why valueOf is not consistent</h1>\n\n<p>For this we need to look at the JavaDoc of valueOf:</p>\n\n<blockquote>\n  <p>Returns an Integer instance representing the specified int value. If a new Integer instance is not required, this method should generally be used in preference to the constructor Integer(int), as this method is likely to yield significantly better space and time performance by caching frequently requested values. This method will always cache values in the range -128 to 127, inclusive, and may cache other values outside of this range.</p>\n</blockquote>\n\n<p>As you can see, for small values it will return the same object on both calls, so they are equal, and for the larger uncached value the 2 objects are different</p>\n\n<p>In java the == checks for object equality, so the 2 equal objects are false, while 2 copies of the same object returns true.</p>\n"}, {"tags": [], "owner": {"reputation": 977, "user_id": 1041722, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/OXuJe.jpg?s=128&g=1", "display_name": "Saskia", "link": "https://stackoverflow.com/users/1041722/saskia"}, "is_accepted": false, "score": 0, "last_activity_date": 1523295093, "creation_date": 1523295093, "answer_id": 49738511, "question_id": 49738117, "link": "https://stackoverflow.com/questions/49738117/kotlin-number-boxing-test-strange/49738511#49738511", "title": "Kotlin number boxing test strange", "body": "<p>In contrast to php or javascript where <code>===</code> is in most cases the more sane option, in Kotlin <code>===</code> compares references to objects instead of values.</p>\n\n<p>As others pointed out, objects for Integers of the same value can be cached. Same goes for Strings and the other primitive types. </p>\n"}], "owner": {"reputation": 377, "user_id": 4935400, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-LYEbQIyaiJw/AAAAAAAAAAI/AAAAAAAAAUw/_7-ifckkRFE/photo.jpg?sz=128", "display_name": "ohlab", "link": "https://stackoverflow.com/users/4935400/ohlab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "closed_date": 1523351507, "answer_count": 3, "score": 1, "last_activity_date": 1523297006, "creation_date": 1523293559, "question_id": 49738117, "link": "https://stackoverflow.com/questions/49738117/kotlin-number-boxing-test-strange", "closed_reason": "Duplicate", "title": "Kotlin number boxing test strange", "body": "<p>I am a beginner of kotlin.</p>\n\n<p>I do not understand the output below.</p>\n\n<pre><code>@Test\nfun testNumberBoxing() {\n\n    val a:Int = 1000\n    val boxedA1: Int? = a\n    val boxedA2: Int? = a\n\n    println(\"first check = ${boxedA1 === boxedA2}\")\n\n    val b: Int = 2\n    val boxedB1: Int? = b\n    val boxedB2: Int? = b\n\n    println(\"second check = ${boxedB1 === boxedB2}\")\n}\n</code></pre>\n\n<p>result is</p>\n\n<pre><code>first check = true\nsecond check = false\n</code></pre>\n\n<p>Why are the two outputs different?</p>\n\n<p>my kotlin version is 1.2.31</p>\n\n<pre><code>org.jetbrains.kotlin:kotlin-stdlib-jre7:1.2.31\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 17304, "user_id": 3363481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o4HU5.png?s=128&g=1", "display_name": "earthw0rmjim", "link": "https://stackoverflow.com/users/3363481/earthw0rmjim"}, "is_accepted": false, "score": 0, "last_activity_date": 1523430728, "last_edit_date": 1523430728, "creation_date": 1523293734, "answer_id": 49738155, "question_id": 49738022, "link": "https://stackoverflow.com/questions/49738022/android-bluetooth-devices-in-kotlin/49738155#49738155", "title": "Android Bluetooth devices in Kotlin", "body": "<p><code>listOfNotNull()</code> in this case will simply create a list with the sole element of what <code>getBondedDevices()</code> returns. You're creating a <code>List&lt;Set&lt;BluetoothDevice&gt;&gt;</code> and trying to call <code>getName()</code> on the <code>Set</code>.</p>\n\n<p>Might want to do something like this instead:</p>\n\n<pre><code>for (device in mBluetoothAdapter.bondedDevices) {\n    blueArray.add(device.name)\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9620676, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5TFEqzzMDjs/AAAAAAAAAAI/AAAAAAAADrU/TGr3a_2A7Gk/photo.jpg?sz=128", "display_name": "Rishabh sharma", "link": "https://stackoverflow.com/users/9620676/rishabh-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2287, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1523430728, "creation_date": 1523293190, "last_edit_date": 1523294365, "question_id": 49738022, "link": "https://stackoverflow.com/questions/49738022/android-bluetooth-devices-in-kotlin", "title": "Android Bluetooth devices in Kotlin", "body": "<pre><code>pairedDevices=mBluetoothAdapter?.bondedDevices\nfor (d in listOfNotNull(pairedDevices)) {\n    blueArray?.add(d._____)\n}\n</code></pre>\n\n<p><code>blueArray</code> is an <code>ArrayList</code> in which i want to store the string name of available bluetooth devices but - <code>d.getName()</code> is not working</p>\n\n<p>What can i do?</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 889, "user_id": 6142219, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/efyos.jpg?s=128&g=1", "display_name": "Deepak kaku", "link": "https://stackoverflow.com/users/6142219/deepak-kaku"}, "edited": false, "score": 0, "creation_date": 1523301116, "post_id": 49737962, "comment_id": 86494548, "body": "using Bundle, you can send arguments to Fragment."}], "answers": [{"tags": [], "owner": {"reputation": 889, "user_id": 6142219, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/efyos.jpg?s=128&g=1", "display_name": "Deepak kaku", "link": "https://stackoverflow.com/users/6142219/deepak-kaku"}, "is_accepted": false, "score": 0, "last_activity_date": 1523301188, "creation_date": 1523301188, "answer_id": 49740079, "question_id": 49737962, "link": "https://stackoverflow.com/questions/49737962/kotlin-how-to-use-that-list-view-in-fragment-to-replace-the-fragment-by-clickin/49740079#49740079", "title": "kotlin- how to use that list view in fragment to replace the Fragment by clicking", "body": "<p>here, try this</p>\n\n<pre><code>Bundle bundle = new Bundle();\nbundle.putString(\"id\", \"0\");\nfragment.setArguments(bundle);\n...\n</code></pre>\n"}], "owner": {"reputation": 175, "user_id": 8644851, "user_type": "registered", "profile_image": "https://graph.facebook.com/1470920186327844/picture?type=large", "display_name": "Nasser El Arab", "link": "https://stackoverflow.com/users/8644851/nasser-el-arab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 253, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1523301188, "creation_date": 1523292921, "last_edit_date": 1523300991, "question_id": 49737962, "link": "https://stackoverflow.com/questions/49737962/kotlin-how-to-use-that-list-view-in-fragment-to-replace-the-fragment-by-clickin", "title": "kotlin- how to use that list view in fragment to replace the Fragment by clicking", "body": "<p>In the activities i was using intent to move and pass data. How can i make same thing between two fragments?</p>\n\n<p>MainFragment:</p>\n\n<pre><code>class MainMarket: Fragment(){\n  var adapter : MainAdapter?=null\n  var listOfMkabala = ArrayList&lt;MainMarketTickClass&gt;()\n  companion object {\n   fun newInstance():Fragment{\n       var fb : MainMarket = MainMarket()\n       return fb\n   }\n  }\n\n\n  override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n    return inflater!!.inflate(R.layout.main_marker,container,false)\n  }\n\n  override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n    listOfMkabala .add ( MainMarketTickClass(\"123\"))\n    listOfMkabala .add ( MainMarketTickClass(\" 123\"))\n    listOfMkabala .add ( MainMarketTickClass(\"123\"))\n\n    adapter = MainAdapter (this.context!!,listOfMkabala)\n    list.adapter = adapter\n  }\n}\n</code></pre>\n\n<p>My adapter:</p>\n\n<pre><code>class MainAdapter: BaseAdapter {\n  var  listOfData= ArrayList&lt;MainMarketTickClass&gt;()\n  var context:Context?=null\n  constructor(context:Context, listOfMkabaln: ArrayList&lt;MainMarketTickClass&gt;):super(){\n      this.listOfData=listOfMkabaln\n      this.context=context\n  }\n\n  override fun getView(p0: Int, p1: View?, p2: ViewGroup?): View {\n    val mo3d =  listOfData[p0]\n\n    var inflator = context!!.getSystemService(Context.LAYOUT_INFLATER_SERVICE) as LayoutInflater\n    var myView = inflator.inflate(R.layout.maintick, null)\n    myView.textView.text = mo3d.title!!\n\n    return myView\n  }\n\n  override fun getItem(p0: Int): Any {\n    return listOfData[p0]\n  }\n\n  override fun getItemId(p0: Int): Long {\n    return p0.toLong()\n  }\n\n  override fun getCount(): Int {\n    return  listOfData.size\n  }\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": true, "score": 1, "last_activity_date": 1523344883, "creation_date": 1523344883, "answer_id": 49747694, "question_id": 49737507, "link": "https://stackoverflow.com/questions/49737507/overload-ambiguity-default-interface-method/49747694#49747694", "title": "Overload Ambiguity default interface method", "body": "<blockquote>\n  <p>There are two run methods of identical signatures</p>\n</blockquote>\n\n<p>There aren't, and there couldn't be: this wouldn't compile. Because, well, there wouldn't be any way to resolve the ambiguity.</p>\n\n<p>In this case, the two methods have different types for first two parameters. So you need to specify them, e.g. if you want the <code>PrintStream</code>-taking method:</p>\n\n<pre><code>jar.run(null as PrintStream?, null as PrintStream?, \"--create\", \"file=foo.jar\", \"--main-class=foo.bar\", \"-C\", \"baz\", \".\")\n</code></pre>\n\n<p>Note that documentation says</p>\n\n<blockquote>\n  <p>Throws:    NullPointerException - <strong>if any of the arguments are null</strong>, or if there are any null values in the args array</p>\n</blockquote>\n\n<p>so for these methods you wouldn't run into the problem with a valid call in the first place.</p>\n"}], "owner": {"reputation": 823, "user_id": 3133685, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0aa0c2fbfdbfd344c896fdc5c8a4e473?s=128&d=identicon&r=PG&f=1", "display_name": "MaxPower", "link": "https://stackoverflow.com/users/3133685/maxpower"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 49747694, "answer_count": 1, "score": 0, "last_activity_date": 1523344883, "creation_date": 1523291248, "question_id": 49737507, "link": "https://stackoverflow.com/questions/49737507/overload-ambiguity-default-interface-method", "title": "Overload Ambiguity default interface method", "body": "<p>I am calling the java.util.spi.ToolProvider interface, and when I all <code>run</code> in Kotlin I get an overload ambiguity error.</p>\n\n<p>There are two run methods of identical signatures, one is a default method, and the other is unimplemented.  They are both in the same class, how do I resolve this error?</p>\n\n<pre><code>val jar = ToolProvider.findFirst(\"jar\").orElseThrow()\njar.run(null, null, \"--create\", \"file=foo.jar\", \"--main-class=foo.bar\", \"-C\", \"baz\", \".\")\n</code></pre>\n"}, {"tags": ["kotlin", "jvm"], "answers": [{"comments": [{"owner": {"reputation": 10456, "user_id": 235123, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/N9D2y.jpg?s=128&g=1", "display_name": "Mina Samy", "link": "https://stackoverflow.com/users/235123/mina-samy"}, "edited": false, "score": 3, "creation_date": 1523287068, "post_id": 49735861, "comment_id": 86486736, "body": "I believe it&#39;s similar to the issue described in &quot;Effective Java&quot;: Constructors shouldn&#39;t call overridables <a href=\"http://www.javapractices.com/topic/TopicAction.do?Id=215\" rel=\"nofollow noreferrer\">javapractices.com/topic/TopicAction.do?Id=215</a>"}, {"owner": {"reputation": 18692, "user_id": 2043580, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/092WJ.png?s=128&g=1", "display_name": "ZeMoon", "link": "https://stackoverflow.com/users/2043580/zemoon"}, "edited": false, "score": 1, "creation_date": 1616561013, "post_id": 49735861, "comment_id": 118037918, "body": "Seems like the article has moved to another section under &quot;Inheritance&quot; <a href=\"https://kotlinlang.org/docs/inheritance.html#derived-class-initialization-order\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/&hellip;</a>"}, {"owner": {"reputation": 26172, "user_id": 49746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IAAg.jpg?s=128&g=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/49746/todd"}, "reply_to_user": {"reputation": 18692, "user_id": 2043580, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/092WJ.png?s=128&g=1", "display_name": "ZeMoon", "link": "https://stackoverflow.com/users/2043580/zemoon"}, "edited": false, "score": 0, "creation_date": 1616604782, "post_id": 49735861, "comment_id": 118056958, "body": "Thanks @ZeMoon - fixed! :)"}], "tags": [], "owner": {"reputation": 26172, "user_id": 49746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IAAg.jpg?s=128&g=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/49746/todd"}, "is_accepted": true, "score": 9, "last_activity_date": 1616604771, "last_edit_date": 1616604771, "creation_date": 1523285528, "answer_id": 49735861, "question_id": 49735604, "link": "https://stackoverflow.com/questions/49735604/kotlin-init-block-in-super-class-firing-with-null-properties-when-inheriting-fro/49735861#49735861", "title": "Kotlin Init Block in Super class firing with null properties when inheriting from it", "body": "<p>Essentially, because you tell Kotlin that your subclass is going to be defining <code>name</code> now, it is not defined when the <code>init</code> block in <code>Super</code> is executed. You are deferring definition of that until the <code>SubClass</code> is initialized.</p>\n<p>This behavior is documented on the Kotlin website under <a href=\"https://kotlinlang.org/docs/inheritance.html#derived-class-initialization-order\" rel=\"nofollow noreferrer\">&quot;Derived class initialization order&quot;</a>:</p>\n<blockquote>\n<p>During construction of a new instance of a derived class, the base class initialization is done as the first step (preceded only by evaluation of the arguments for the base class constructor) and thus happens before the initialization logic of the derived class is run.</p>\n<p>...</p>\n<p>It means that, by the time of the base class constructor execution, the properties declared or overridden in the derived class are not yet initialized. If any of those properties are used in the base class initialization logic (either directly or indirectly, through another overridden open member implementation), it may lead to incorrect behavior or a runtime failure. <strong>Designing a base class, you should therefore avoid using open members in the constructors, property initializers, and init blocks</strong>. [emphasis mine]</p>\n</blockquote>\n<p>FWIW, this is similar to the reason that some Java code analysis tools will complain if you refer to non-final methods in a constructor. The way around this in Kotlin is to not refer to <code>open</code> properties in your <code>init</code> blocks in the superclass.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9619889"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2477, "favorite_count": 1, "accepted_answer_id": 49735861, "answer_count": 1, "score": 6, "last_activity_date": 1616604771, "creation_date": 1523284795, "last_edit_date": 1523285202, "question_id": 49735604, "link": "https://stackoverflow.com/questions/49735604/kotlin-init-block-in-super-class-firing-with-null-properties-when-inheriting-fro", "title": "Kotlin Init Block in Super class firing with null properties when inheriting from it", "body": "<pre><code>open class Super {\n\n    open var name : String = \"Name1\"\n\n    init {\n        println(\"INIT block fired with : $name\")\n        name = name.toUpperCase()\n        println(name)\n    }\n\n}\n\nclass SubClass(newName : String) : Super() {\n\n    override var name : String = \"Mr. $newName\"\n\n}\n\nfun main(args: Array&lt;String&gt;) {\n\n    var obj = SubClass(\"John\")\n    println(obj.name)\n}\n</code></pre>\n\n<p>The above Kotlin code results in the following TypeCastException :</p>\n\n<pre><code>INIT block fired with : null\nException in thread \"main\" kotlin.TypeCastException: null cannot be cast to non-null type java.lang.String\n    at Super.&lt;init&gt;(index.kt:7)\n    at SubClass.&lt;init&gt;(index.kt:13)\n    at IndexKt.main(index.kt:21)\n</code></pre>\n\n<p>As my understanding goes while inheriting from a class in Kotlin, first the primary constructors and init blocks and secondary constructors of super classes are called with passed parameters. After which the subclass can override such properties with its own version.</p>\n\n<p>Then why does the above code results in the exception as described ... What am I doing wrong ... Why does the init block in super class is fired with <em>null</em> ...??? At first my speculation was that the init block might get fired before the actual property initialization as it is executed as a part of primary constructor but initializing the name property in the primary constructor as below gives the same error and the IDE would have warned me if so.</p>\n\n<pre><code>open class Super(open var name : String = \"Name1\") {\n\n    init {\n        println(\"INIT block fired with : $name\")\n        name = name.toUpperCase()\n        println(name)\n    }\n\n}\n\nclass SubClass(newName : String) : Super() {\n\n    override var name : String = \"Mr. $newName\"\n\n}\n\nfun main(args: Array&lt;String&gt;) {\n\n    var obj = SubClass(\"John\")\n    println(obj.name)\n}\n</code></pre>\n\n<p>Console :</p>\n\n<pre><code>INIT block fired with : null\nException in thread \"main\" kotlin.TypeCastException: null cannot be cast to non-null type java.lang.String\n    at Super.&lt;init&gt;(index.kt:5)\n    at Super.&lt;init&gt;(index.kt:1)\n    at SubClass.&lt;init&gt;(index.kt:11)\n    at IndexKt.main(index.kt:19)\n</code></pre>\n\n<p>Am I doing something wrong here or is this a language bug...??? What can I do to avoid the error and to make the init blocks fire with the actual passed value and not <em>null</em> ... ??? Elaborate what is happening behind the scene. At this time I have several situations with classes like this in my actual codebase where I want to inherit from another classes, I want to maintain property names as they are... </p>\n"}, {"tags": ["android", "kotlin", "android-animation"], "owner": {"reputation": 125, "user_id": 856636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2964a0fe5a67a517b7f822cb41b70c81?s=128&d=identicon&r=PG", "display_name": "raitucarp", "link": "https://stackoverflow.com/users/856636/raitucarp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 327, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1523344305, "creation_date": 1523284171, "last_edit_date": 1523344305, "question_id": 49735398, "link": "https://stackoverflow.com/questions/49735398/android-animation-slow-inside-dialog", "title": "Android animation slow inside Dialog", "body": "<p>I did several test (click/manual testing) on how <code>AnimatorSet</code> <code>playTogether</code>, or <code>ObjectAnimator</code> performance inside dialog (<code>DialogFragment</code> / <code>AlertDialog</code>) and compare the speed with <code>AnimatorSet</code> in bare inflated layout in activity or fragment. My conclusion of doing animation inside dialog (whether it's a <code>DialogFragment</code> or <code>AlertDialog</code>) is slow and has glitch in it.</p>\n\n<p>Can anybody confirm it?</p>\n\n<p>To reproduce the issue, firstly create a simple layout file:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.constraint.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\nxmlns:app=\"http://schemas.android.com/apk/res-auto\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"match_parent\"&gt;\n\n    &lt;View\n         android:id=\"@+id/view1\"\n         app:layout_constraintLeft_toLeftOf=\"parent\"\n         app:layout_constraintRight_toRightOf=\"parent\"\n         android:layout_width=\"wrap_content\"\n         android:layout_height=\"wrap_content\" /&gt;\n\n    &lt;View\n         android:id=\"@+id/view2\"\n         app:layout_constraintLeft_toLeftOf=\"parent\"\n         app:layout_constraintRight_toRightOf=\"parent\"\n         android:layout_width=\"wrap_content\"\n         android:layout_height=\"wrap_content\" /&gt;\n\n&lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n\n<p>We can replace View (view1, view2) with <code>CustomView</code> or <code>ImageView</code>, or add some layout constraint for reposition the view. We can replace <code>ConstraintLayout</code> also with <code>LinearLayout</code>, <code>RelativeLayout</code> etc. Above code is just an illustration purpose.</p>\n\n<p>Inside <code>Activity</code> or <code>DialogFragment</code>, animate all views using <code>ObjectAnimator</code> and <code>AnimatorSet</code>:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>// find view1 and view2 and declare as variable value\n\n// ....\nval listOfView = listOf(view1, view2)\nval animSet = AnimatorSet()\nval animators = listOfView.map {\n    val animator = ObjectAnimator.ofFloat(it, \"rotation\", 0f, 360f)\n    animator.duration = 1000\n    animator.repeatCount = ObjectAnimator.INFINITE\n    animator.repeatMode = ObjectAnimator.RESTART                \n    animator.interpolator = LinearInterpolator()\n    animator\n}\n\nanimSet.playTogether(animators)\nanimSet.start()\n</code></pre>\n\n<p>I use kotlin here, because Android now officially support kotlin.</p>\n\n<p>We will observe that animation inside <code>DialogFragment</code> has glitch, but animation in Activity / Fragment outperform and fast. Increase the duration to the extreme level such as 500 or 200, and the glitch inside <code>Dialog</code> will look more subtle.</p>\n\n<p>Can anybody confirm this issue? And what are the explanation and reason behind that? If there is a way to increase the performance of animation inside dialog, how to achieve that?.</p>\n"}, {"tags": ["java", "android", "xml", "kotlin"], "comments": [{"owner": {"reputation": 2438, "user_id": 6756514, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CxG3j.jpg?s=128&g=1", "display_name": "Divyesh Patel", "link": "https://stackoverflow.com/users/6756514/divyesh-patel"}, "edited": false, "score": 0, "creation_date": 1523282816, "post_id": 49734877, "comment_id": 86483685, "body": "if you want to make effect like above link then use coordinator layout"}, {"owner": {"reputation": 1017, "user_id": 7064175, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vrdtd.jpg?s=128&g=1", "display_name": "JillevdW", "link": "https://stackoverflow.com/users/7064175/jillevdw"}, "reply_to_user": {"reputation": 2438, "user_id": 6756514, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CxG3j.jpg?s=128&g=1", "display_name": "Divyesh Patel", "link": "https://stackoverflow.com/users/6756514/divyesh-patel"}, "edited": false, "score": 0, "creation_date": 1523283035, "post_id": 49734877, "comment_id": 86483849, "body": "@DivyeshPatel thanks for the response, but that is not the question here :) I&#39;ll write that down for future use."}], "owner": {"reputation": 1017, "user_id": 7064175, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vrdtd.jpg?s=128&g=1", "display_name": "JillevdW", "link": "https://stackoverflow.com/users/7064175/jillevdw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1523282600, "creation_date": 1523282600, "question_id": 49734877, "link": "https://stackoverflow.com/questions/49734877/transparent-scrollview-over-image-very-slow", "title": "Transparent Scrollview over image very slow", "body": "<p>I tried to replicate <a href=\"https://stackoverflow.com/questions/28027289/how-do-i-resize-my-imageview-within-my-scrollview-as-it-is-done-in-this-image\">this behaviour</a>, but after implementing it I observed a large performance decrease. </p>\n\n<p>Then I tried to implement it in a different way: I would put the image behind the scrollview, and simply give the contents of the scrollview some top padding. Here's some relevant XML:</p>\n\n<pre><code>&lt;android.support.constraint.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\"\"&gt;\n\n\n    &lt;ImageView\n        android:id=\"@+id/profileImage\"\n        android:layout_width=\"0dp\"\n        android:layout_height=\"144dp\"\n        android:scaleType=\"centerCrop\"\n        android:src=\"@drawable/mapview\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\" /&gt;\n\n    &lt;ScrollView\n        android:id=\"@+id/profileScrollView\"\n        android:layout_width=\"0dp\"\n        android:layout_height=\"0dp\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\"&gt;\n\n        &lt;android.support.constraint.ConstraintLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginEnd=\"16dp\"\n            android:layout_marginStart=\"16dp\"\n            android:paddingBottom=\"70dp\"\n            android:paddingTop=\"120dp\"\n            app:layout_constraintEnd_toEndOf=\"parent\"\n            app:layout_constraintStart_toStartOf=\"parent\"&gt;\n\n        &lt;/android.support.constraint.ConstraintLayout&gt;\n    &lt;/ScrollView&gt;\n&lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n\n<p>I left out unnecessary XML.</p>\n\n<p>This poor performance happens when the ScrollView tries to move over an ImageView. It still happens if the ImageView is embedded in another view, like a ConstraintLayout.</p>\n\n<p>Why is this ScrollView slow? Am I supposed to change something in my layout? Thanks!</p>\n"}, {"tags": ["android", "sqlite", "kotlin"], "comments": [{"owner": {"reputation": 896, "user_id": 8809599, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2j32n6m6gBk/AAAAAAAAAAI/AAAAAAAAA2w/ZBjODiiNN2c/photo.jpg?sz=128", "display_name": "Na-In Hae", "link": "https://stackoverflow.com/users/8809599/na-in-hae"}, "edited": false, "score": 0, "creation_date": 1523280579, "post_id": 49734023, "comment_id": 86482170, "body": "it is query error obviously, where is your insert into query in code?"}, {"owner": {"reputation": 1, "user_id": 9619562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/408e669ff437ff0e666f9db06fad6b14?s=128&d=identicon&r=PG&f=1", "display_name": "Joa_k", "link": "https://stackoverflow.com/users/9619562/joa-k"}, "reply_to_user": {"reputation": 896, "user_id": 8809599, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2j32n6m6gBk/AAAAAAAAAAI/AAAAAAAAA2w/ZBjODiiNN2c/photo.jpg?sz=128", "display_name": "Na-In Hae", "link": "https://stackoverflow.com/users/8809599/na-in-hae"}, "edited": false, "score": 0, "creation_date": 1523432247, "post_id": 49734023, "comment_id": 86553362, "body": "Hi, in ListManagerDAO:   fun insertLists(lists:String){     val listContentValue= ContentValues().apply {         put(ListsHelper.NAME_LIST,lists)     }    database!!.insert(ListsHelper.TABLE_LISTS, null, listContentValue) }"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9619562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/408e669ff437ff0e666f9db06fad6b14?s=128&d=identicon&r=PG&f=1", "display_name": "Joa_k", "link": "https://stackoverflow.com/users/9619562/joa-k"}, "edited": false, "score": 0, "creation_date": 1523432823, "post_id": 49734574, "comment_id": 86553694, "body": "Hi, I used:  <b>val NAME_LIST = &quot;name_list&quot;</b> as a companion object in ListsHelper class. Because of that I thought I can use it as ContentValues"}, {"owner": {"reputation": 31155, "user_id": 4744514, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RQ2Np.jpg?s=128&g=1", "display_name": "MikeT", "link": "https://stackoverflow.com/users/4744514/miket"}, "reply_to_user": {"reputation": 1, "user_id": 9619562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/408e669ff437ff0e666f9db06fad6b14?s=128&d=identicon&r=PG&f=1", "display_name": "Joa_k", "link": "https://stackoverflow.com/users/9619562/joa-k"}, "edited": false, "score": 0, "creation_date": 1523435110, "post_id": 49734574, "comment_id": 86555035, "body": "I understand that. What I&#39;m saying is the error is clear but how is not at all evident. All looks good according to the code."}], "tags": [], "owner": {"reputation": 31155, "user_id": 4744514, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RQ2Np.jpg?s=128&g=1", "display_name": "MikeT", "link": "https://stackoverflow.com/users/4744514/miket"}, "is_accepted": false, "score": 0, "last_activity_date": 1523281708, "creation_date": 1523281708, "answer_id": 49734574, "question_id": 49734023, "link": "https://stackoverflow.com/questions/49734023/syntax-error-code-1-while-compiling-insert-into-listsname-list/49734574#49734574", "title": "syntax error (code 1): , while compiling: INSERT INTO LISTS(name list)", "body": "<p>You are missing the underscore between <strong>name</strong> and <strong>list</strong> i.e. it should be <strong>name_list</strong>. </p>\n\n<p>However, I can't see why as <code>ListsHelper.NAME_LIST</code> is set using <code>val NAME_LIST = \"name_list\"</code> and that is what is used for the <code>ContentValues</code> in <code>insertLists</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 9619562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/408e669ff437ff0e666f9db06fad6b14?s=128&d=identicon&r=PG&f=1", "display_name": "Joa_k", "link": "https://stackoverflow.com/users/9619562/joa-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 518, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1523281770, "creation_date": 1523280014, "last_edit_date": 1523281770, "question_id": 49734023, "link": "https://stackoverflow.com/questions/49734023/syntax-error-code-1-while-compiling-insert-into-listsname-list", "title": "syntax error (code 1): , while compiling: INSERT INTO LISTS(name list)", "body": "<p>I have a project where I have to make \"shoping list\". It's my first time with SQlite DB. </p>\n\n<p>I got: </p>\n\n<pre><code>E/SQLiteLog: (1) near \"list\": syntax error\n**E/SQLiteDatabase: Error inserting name list=\n                  android.database.sqlite.SQLiteException: near \"list\": syntax error (code 1): , while compiling: INSERT INTO LISTS(name list) VALUES (?)**\n                      at android.database.sqlite.SQLiteConnection.nativePrepareStatement(Native Method)\n                      at android.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:889)\n                      at android.database.sqlite.SQLiteConnection.prepare(SQLiteConnection.java:500)\n                      at android.database.sqlite.SQLiteSession.prepare(SQLiteSession.java:588)\n                      at android.database.sqlite.SQLiteProgram.&lt;init&gt;(SQLiteProgram.java:58)\n                      at android.database.sqlite.SQLiteStatement.&lt;init&gt;(SQLiteStatement.java:31)\n                      at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1469)\n                      at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1341)\n                      at com.listof.myapplication.ListsManagerDAO.insertLists**(ListsManagerDAO.kt:37)**\n                      at com.listof.myapplication.MainActivity$adding$1.onClick**(MainActivity.kt:50)**\n                      at android.view.View.performClick(View.java:4780)\n                      at android.view.View$PerformClick.run(View.java:19866)\n                      at android.os.Handler.handleCallback(Handler.java:739)\n                      at android.os.Handler.dispatchMessage(Handler.java:95)\n                      at android.os.Looper.loop(Looper.java:135)\n                      at android.app.ActivityThread.main(ActivityThread.java:5254)\n                      at java.lang.reflect.Method.invoke(Native Method)\n                      at java.lang.reflect.Method.invoke(Method.java:372)\n                      at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:903)\n                      at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:698)\n</code></pre>\n\n<p>and my code:</p>\n\n<pre><code>class ListsHelper(context: Context) : SQLiteOpenHelper(context, DB_NAME, null, DB_VERSION) {\n\noverride fun onCreate(db: SQLiteDatabase?) {\n    db!!.execSQL(CREATE_TABLE_LISTS)\n    db!!.execSQL(CREATE_TABLE)\n    //db!!.execSQL(\"CREATE TABLE IF NOT EXISTS\"+ TABLE_LISTS +\"(\"+LIST_ID +\"INTEGER PRIMARY KEY,\"+ NAME_LIST +\"TEXT);\")\n}\n\noverride fun onUpgrade(db: SQLiteDatabase?, oldVersion: Int, newVersion: Int) {\n    db!!.execSQL(\"DROP TABLE IF EXISTS $TABLE_PRODUCT\")\n    db!!.execSQL(\"DROP TABLE IF EXISTS $TABLE_LISTS\")\n    onCreate(db)\n}\n\ncompanion object {\n\n    // Tables Name\n    val TABLE_PRODUCT = \"PRODUCTS\"\n    val TABLE_LISTS = \"LISTS\"\n\n    // Tables columns\n    val LIST_ID= \"_id\"\n    val NAME_LIST = \"name_list\"\n\n    val _ID = LIST_ID\n    val PRODUCT = \"product\"\n    val AMOUNT = \"amount\"\n\n    // Database Information\n    internal val DB_NAME = \"LISTS.DB\"\n\n    // database version\n    internal val DB_VERSION = 1\n\n    // Creating tables query\n    /*private val CREATE_TABLE_LISTS = (\"create table \" + TABLE_LISTS + \"(\"\n            + LIST_ID + \" INTEGER PRIMARY KEY AUTOINCREMENT, \"\n            + NAME_LIST + \" TEXT NOT NULL,\"\n            +_ID+ \"INTEGER,\"+\" FOREIGN KEY(\"+_ID+ \") REFERENCES \"+ TABLE_PRODUCT+\"(\"+_ID+\")\")*/\n    private val CREATE_TABLE_LISTS = (\"create table \" + TABLE_LISTS + \"(\"\n            + LIST_ID + \" INTEGER PRIMARY KEY AUTOINCREMENT,\"\n            + NAME_LIST + \" TEXT NOT NULL\"+\");\")\n    private val CREATE_TABLE = (\"create table \" + TABLE_PRODUCT + \"(\" + _ID + \" INTEGER PRIMARY KEY AUTOINCREMENT,\" + PRODUCT + \" TEXT NOT NULL, \" + AMOUNT + \" TEXT)\")\n\n}\n</code></pre>\n\n<p>}</p>\n\n<p><strong>ListManagerDAO code:</strong></p>\n\n<pre><code>class ListsManagerDAO(private val context: Context) {\n\nprivate var dbHelper: ListsHelper? = null\n\nprivate var database: SQLiteDatabase? = null\n\n@Throws(SQLException::class)\nfun open(): ListsManagerDAO {\n    dbHelper = ListsHelper(context)\n    database = dbHelper!!.writableDatabase\n\n    return this\n}\n\n\nfun close() {\n    dbHelper!!.close()\n}\n\n\nfun insertLists(lists:String){\n    val listContentValue= ContentValues().apply {\n        put(ListsHelper.NAME_LIST,lists)\n    }\n   database!!.insert(ListsHelper.TABLE_LISTS, null, listContentValue)\n}\n\nfun fetchLists(): Cursor? {\n    val columns = arrayOf(ListsHelper.LIST_ID, ListsHelper.NAME_LIST)\n    val cursor = database!!.query(ListsHelper.TABLE_LISTS, columns, null, null, null, null, null)\n    cursor?.moveToFirst()\n    return cursor\n}\n\n\nfun updateLists(_id: Long, lists: String){\n    val listContentValue= ContentValues().apply {\n        put(ListsHelper.NAME_LIST,lists)\n    }\n    database!!.update(ListsHelper.TABLE_LISTS, listContentValue, ListsHelper._ID + \" = \" + _id, null)\n}\n\n\nfun delete(_id: Long) {\n    database!!.delete(ListsHelper.TABLE_LISTS, ListsHelper.LIST_ID + \"=\" + _id, null)\n}\n</code></pre>\n\n<p>}</p>\n\n<p><strong>MainActivity code:</strong></p>\n\n<pre><code>class MainActivity : AppCompatActivity(){\nprivate var dbManager: ListsManagerDAO? = null\nprivate var list: ListView? = null\nprivate var adapter: SimpleCursorAdapter? = null\nprivate var addtext: EditText? = null\ninternal var add: ImageView? = null\n\ninternal val from = arrayOf(ListsHelper.LIST_ID,ListsHelper.NAME_LIST)\ninternal val to = intArrayOf(R.id.list)\n\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main)\n\n    dbManager = ListsManagerDAO(this)\n    dbManager?.open()\n    val cursor = dbManager?.fetchLists()\n\n    list = findViewById(R.id.list) as ListView\n    //list!!.emptyView = findViewById(R.id.editTextView)\n\n    addtext = findViewById(R.id.editTextView) as EditText\n    add = findViewById(R.id.imgViewAdd) as ImageView\n  adapter=SimpleCursorAdapter(this,android.R.layout.simple_list_item_single_choice, cursor, from, to, 0)\n    adapter!!.notifyDataSetChanged()\n\n    list!!.adapter = adapter\n    adding()\n}\n\nfun adding() {\n    add?.setOnClickListener(object : OnClickListener {\n        override fun onClick(v: View) {\n            val listName: String = addtext!!.getText().toString()\n            dbManager!!.insertLists(listName)\n        }\n    })\n\n\noverride fun onDestroy() {\n    super.onDestroy()\n    dbManager?.close()\n\n}\n</code></pre>\n\n<p>}</p>\n\n<p>I don't see any \"missing quota\" or soemthing like in:\n<a href=\"https://stackoverflow.com/questions/26553760/android-sqlite-syntax-error-code-1-while-compiling-create-table\">Android - SQLite - syntax error (code 1): , while compiling: CREATE TABLE</a>\nor:\n<a href=\"https://stackoverflow.com/questions/29300807/table-has-no-column-named-posy-code-1-while-compiling-insert-into-samplen\">table has no column named PosY (code 1): , while compiling: INSERT INTO Sample(Name,No,PosY,Img,PosX) VALUES (?,?,?,?,?)</a></p>\n"}, {"tags": ["android-studio", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 8055, "user_id": 706387, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/SiTPw.jpg?s=128&g=1", "display_name": "kosiara - Bartosz Kosarzycki", "link": "https://stackoverflow.com/users/706387/kosiara-bartosz-kosarzycki"}, "edited": false, "score": 0, "creation_date": 1525687686, "post_id": 49902037, "comment_id": 87440258, "body": "I&#39;m getting the following error when I add <code>1.1.0-beta2</code>   <code>[kapt] An exception occurred: java.lang.NoClassDefFoundError: org&#47;jetbrains&#47;kotlin&#47;serialization&#47;jvm&#47;JvmProtoBufUtil \tat me.eugeniomarletti.kotlin.metadata.KotlinClassMetadata$data$&zwnj;&#8203;2.invoke(KotlinMetad&zwnj;&#8203;ata.kt:51) </code>"}, {"owner": {"reputation": 132, "user_id": 7557362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iPXXz.jpg?s=128&g=1", "display_name": "Saba Khutuashvili", "link": "https://stackoverflow.com/users/7557362/saba-khutuashvili"}, "reply_to_user": {"reputation": 8055, "user_id": 706387, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/SiTPw.jpg?s=128&g=1", "display_name": "kosiara - Bartosz Kosarzycki", "link": "https://stackoverflow.com/users/706387/kosiara-bartosz-kosarzycki"}, "edited": false, "score": 0, "creation_date": 1525700066, "post_id": 49902037, "comment_id": 87447742, "body": "do you use same version on room::runtime library?"}], "tags": [], "owner": {"reputation": 132, "user_id": 7557362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iPXXz.jpg?s=128&g=1", "display_name": "Saba Khutuashvili", "link": "https://stackoverflow.com/users/7557362/saba-khutuashvili"}, "is_accepted": false, "score": 4, "last_activity_date": 1524061227, "last_edit_date": 1524061227, "creation_date": 1524060912, "answer_id": 49902037, "question_id": 49733654, "link": "https://stackoverflow.com/questions/49733654/warning-supported-source-version-release-7-from-annotation-processor-org-jet/49902037#49902037", "title": "warning: Supported source version &#39;RELEASE_7&#39; from annotation processor &#39;org.jetbrains.kotlin.kapt3.ProcessorWrapper&#39; less than -source &#39;1.8&#39;", "body": "<p>That warning is a bug, that happens when you use kapt instead of annotationProcessor on some libraries, for example Room on version: 1.0.0 (fixed by using version: 1.1.0-beta2).</p>\n"}, {"tags": [], "owner": {"reputation": 761, "user_id": 3763032, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/667ae3c0db85f45c13ba6a9fa845a371?s=128&d=identicon&r=PG", "display_name": "mochadwi", "link": "https://stackoverflow.com/users/3763032/mochadwi"}, "is_accepted": false, "score": 0, "last_activity_date": 1550380663, "creation_date": 1550380663, "answer_id": 54730339, "question_id": 49733654, "link": "https://stackoverflow.com/questions/49733654/warning-supported-source-version-release-7-from-annotation-processor-org-jet/54730339#54730339", "title": "warning: Supported source version &#39;RELEASE_7&#39; from annotation processor &#39;org.jetbrains.kotlin.kapt3.ProcessorWrapper&#39; less than -source &#39;1.8&#39;", "body": "<p>Continue from @saba-21 answer.</p>\n\n<p>The workaround: </p>\n\n<ol>\n<li>change <code>kapt -&gt; annotationProcessor</code> if you want to retain the room version</li>\n<li>or just upgrade your room version to the latest stable currently <a href=\"https://developer.android.com/jetpack/androidx/releases/room#1.1.1\" rel=\"nofollow noreferrer\">1.1.1</a></li>\n</ol>\n"}], "owner": {"reputation": 281, "user_id": 2668333, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6d358a1823dfcf871f93422b04cb6a2c?s=128&d=identicon&r=PG", "display_name": "grenzfrequence", "link": "https://stackoverflow.com/users/2668333/grenzfrequence"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2346, "favorite_count": 1, "answer_count": 2, "score": 8, "last_activity_date": 1550380663, "creation_date": 1523278976, "question_id": 49733654, "link": "https://stackoverflow.com/questions/49733654/warning-supported-source-version-release-7-from-annotation-processor-org-jet", "title": "warning: Supported source version &#39;RELEASE_7&#39; from annotation processor &#39;org.jetbrains.kotlin.kapt3.ProcessorWrapper&#39; less than -source &#39;1.8&#39;", "body": "<p>I get this error message when I compile with Android Studio 3.1 and Kotlin. What I need to configure to avoid this warning?</p>\n\n<pre><code>warning: Supported source version 'RELEASE_7' from annotation processor 'org.jetbrains.kotlin.kapt3.ProcessorWrapper' less than -source '1.8'\n</code></pre>\n"}, {"tags": ["kotlin", "rx-java"], "answers": [{"comments": [{"owner": {"reputation": 4609, "user_id": 1699956, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oBr6e.jpg?s=128&g=1", "display_name": "Mangat Rai Modi", "link": "https://stackoverflow.com/users/1699956/mangat-rai-modi"}, "edited": false, "score": 0, "creation_date": 1523270926, "post_id": 49730841, "comment_id": 86475762, "body": "Thanks, I tried flatmap, but my editor was giving unknown reference error, so I believed with my half knowledge that flatmap won&#39;t apply on nested single. It worked, and also clarified the difference between flatmap and map."}], "tags": [], "owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "is_accepted": true, "score": 1, "last_activity_date": 1523269846, "creation_date": 1523269846, "answer_id": 49730841, "question_id": 49730405, "link": "https://stackoverflow.com/questions/49730405/how-to-avoid-nested-single-in-rxjava2/49730841#49730841", "title": "How to avoid nested Single in RxJava2", "body": "<p>As a beginner, one thing to learn is the <a href=\"http://reactivex.io/RxJava/2.x/javadoc/io/reactivex/Single.html#flatMap-io.reactivex.functions.Function-\" rel=\"nofollow noreferrer\"><code>flatMap</code></a> operator that is available all around RxJava and is the most common operator needed for solving problems:</p>\n\n<pre><code>tickHappened\n    .flatMap { func(it) }\n    .map { it.size() }\n</code></pre>\n"}], "owner": {"reputation": 4609, "user_id": 1699956, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oBr6e.jpg?s=128&g=1", "display_name": "Mangat Rai Modi", "link": "https://stackoverflow.com/users/1699956/mangat-rai-modi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 49730841, "answer_count": 1, "score": 0, "last_activity_date": 1523269846, "creation_date": 1523268419, "last_edit_date": 1523269008, "question_id": 49730405, "link": "https://stackoverflow.com/questions/49730405/how-to-avoid-nested-single-in-rxjava2", "title": "How to avoid nested Single in RxJava2", "body": "<p>I am fairly new in RxJava pradigm. I am doing following is leading to nested Single objects.</p>\n\n<pre><code>  tickHappened.map{\n    func(it)\n  }\n  //I get Single&lt;Single&lt;ArrayList&lt;String&gt;&gt;&gt;\n</code></pre>\n\n<p>Here <code>tickHappened:Single&lt;T&gt;</code> and <code>func&lt;T&gt;(T param):Single&lt;ArrayList&lt;String&gt;&gt;</code> </p>\n\n<pre><code>  tickHappened.map{\n    func(it)\n  }\n  //I get Single&lt;Single&lt;ArrayList&lt;String&gt;&gt;&gt;\n   .map { single -&gt;\n            single.map { list -&gt;\n                list.size\n            }\n        }\n</code></pre>\n\n<p>I actually need to return <code>Single&lt;Int&gt;</code> which is the size of the Arraylist passed. I need to use map twice in the above chain which leads to <code>Single&lt;Single&lt;Int&gt;&gt;</code></p>\n\n<p>Is there a way to avoid nesting Singles? If I understand Rxjava, it doesn't make sense to have a Single which enclose another Single? If not, then is there a way to return <code>Single&lt;Int&gt;</code>?</p>\n"}, {"tags": ["unit-testing", "testing", "kotlin", "spek"], "comments": [{"owner": {"reputation": 505, "user_id": 1425525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7sxUa.png?s=128&g=1", "display_name": "raniejade", "link": "https://stackoverflow.com/users/1425525/raniejade"}, "edited": false, "score": 1, "creation_date": 1523320395, "post_id": 49730174, "comment_id": 86501928, "body": "You can&#39;t have duplicate descriptions in Spek 1.x, but this is fixed in 2.x. To fix your problem, just include driverTest in the description. Related issue: <a href=\"https://github.com/spekframework/spek/issues/210\" rel=\"nofollow noreferrer\">github.com/spekframework/spek/issues/210</a>"}, {"owner": {"reputation": 553, "user_id": 5294432, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/411c8d915e7ee7041d35fdf24ae0ca27?s=128&d=identicon&r=PG&f=1", "display_name": "minizibi", "link": "https://stackoverflow.com/users/5294432/minizibi"}, "reply_to_user": {"reputation": 505, "user_id": 1425525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7sxUa.png?s=128&g=1", "display_name": "raniejade", "link": "https://stackoverflow.com/users/1425525/raniejade"}, "edited": false, "score": 0, "creation_date": 1523373782, "post_id": 49730174, "comment_id": 86529756, "body": "Hey, thanks for answer, in first example it is in description block (or what do you mean by &quot;description&quot;). Could you show some example with code?"}, {"owner": {"reputation": 505, "user_id": 1425525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7sxUa.png?s=128&g=1", "display_name": "raniejade", "link": "https://stackoverflow.com/users/1425525/raniejade"}, "edited": false, "score": 1, "creation_date": 1523402751, "post_id": 49730174, "comment_id": 86543993, "body": "Do something like: <code>given(&quot;Chrome Driver $driverTest&quot;)  { ... }</code>. The first parameter to <code>given</code> is your description."}, {"owner": {"reputation": 553, "user_id": 5294432, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/411c8d915e7ee7041d35fdf24ae0ca27?s=128&d=identicon&r=PG&f=1", "display_name": "minizibi", "link": "https://stackoverflow.com/users/5294432/minizibi"}, "reply_to_user": {"reputation": 505, "user_id": 1425525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7sxUa.png?s=128&g=1", "display_name": "raniejade", "link": "https://stackoverflow.com/users/1425525/raniejade"}, "edited": false, "score": 0, "creation_date": 1523598871, "post_id": 49730174, "comment_id": 86634847, "body": "It throws NPE on $driverTest"}, {"owner": {"reputation": 505, "user_id": 1425525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7sxUa.png?s=128&g=1", "display_name": "raniejade", "link": "https://stackoverflow.com/users/1425525/raniejade"}, "edited": false, "score": 1, "creation_date": 1523600562, "post_id": 49730174, "comment_id": 86635548, "body": "something wrong with its <code>toString</code> method perhaps."}, {"owner": {"reputation": 553, "user_id": 5294432, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/411c8d915e7ee7041d35fdf24ae0ca27?s=128&d=identicon&r=PG&f=1", "display_name": "minizibi", "link": "https://stackoverflow.com/users/5294432/minizibi"}, "reply_to_user": {"reputation": 505, "user_id": 1425525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7sxUa.png?s=128&g=1", "display_name": "raniejade", "link": "https://stackoverflow.com/users/1425525/raniejade"}, "edited": false, "score": 0, "creation_date": 1523603095, "post_id": 49730174, "comment_id": 86636788, "body": "yeah finally it works, thanks so much :))"}], "owner": {"reputation": 553, "user_id": 5294432, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/411c8d915e7ee7041d35fdf24ae0ca27?s=128&d=identicon&r=PG&f=1", "display_name": "minizibi", "link": "https://stackoverflow.com/users/5294432/minizibi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 364, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1523267730, "creation_date": 1523267730, "question_id": 49730174, "link": "https://stackoverflow.com/questions/49730174/spek-parameterized-tests", "title": "Spek parameterized tests", "body": "<p>I'm trying to write a single test from about 8 hours... The problem is really strange behavior (for me) in Spek. Sometimes it executes, sometimes not. I had an error \"Test class cannot have two constructors\" without any reason. When i deleted <code>class DriverTest(val filePath: String, val expectedTextResult: String)</code> and then put it again, it worked... Anyway, what I'm trying to do is parameterized test:</p>\n\n<pre><code>@RunWith(JUnitPlatform::class)\nclass ChromeDriverConfigurationTest : Spek\n({\n    class DriverTest(val filePath: String, val expectedTextResult: String)\n\n    given(\"Chrome Driver\") {\n        val chromeDriver: ChromeDriver by lazy { setupChromeDriverForTest() }\n        afterGroup { deleteChromeDriver(chromeDriver) }\n\n        listOf(\n            DriverTest(filePath = \"js/js.html\", expectedTextResult = \"Text from JS!\"),\n            DriverTest(filePath = \"jQuery/jQuery.html\", expectedTextResult = \"I come from jQuery!\"),\n            DriverTest(filePath = \"angularv1/angularv1.html\", expectedTextResult = \"Hello from Angular v1!\"),\n            DriverTest(filePath = \"reactJS/index.html\", expectedTextResult = \"Hello from reactJS!\")\n        ).forEach { driverTest -&gt;\n            println(\"BBBBBBBBBBBBBBBBBBBBBB\")\n            val path = ChromeDriverConfigurationTest::class.java.getResource(driverTest.filePath).path\n            chromeDriver.get(\"file://$path\")\n            it(\"should extract test\") {\n                println(\"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\")\n                val text = chromeDriver.findElement(By.id(\"test\")).text\n                assert(text == driverTest.expectedTextResult)\n            }\n\n        }\n    }\n})\n</code></pre>\n\n<p>In this case, I dont see any \"AAAAAAAAAAAAAA..\", but I see \"BBBBBBBB\" 4 times. It loks like, <code>it</code> section doesn't run. Alright, maybe there is something wrong with <code>chromeDriver.get</code>, lets comment it (rest stays same)</p>\n\n<pre><code>//val path = ChromeDriverConfigurationTest::class.java.getResource(driverTest.filePath).path\n//chromeDriver.get(\"file://$path\")\n</code></pre>\n\n<p>Now I get... </p>\n\n<pre><code>BBBBBBBBBBBBBBBBBBBBBB\nBBBBBBBBBBBBBBBBBBBBBB\nBBBBBBBBBBBBBBBBBBBBBB\nBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB\nBBBBBBBBBBBBBBBBBBBBBB\nBBBBBBBBBBBBBBBBBBBBBB\nBBBBBBBBBBBBBBBBBBBBBB\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\n</code></pre>\n\n<p>he? whats going on. Alright, lets move context group inside for each like I saw in many tutorials:</p>\n\n<pre><code>@RunWith(JUnitPlatform::class)\nclass ChromeDriverConfigurationTest : Spek\n({\n    class DriverTest(val filePath: String, val expectedTextResult: String)\n\n    listOf(\n        DriverTest(filePath = \"js/js.html\", expectedTextResult = \"Text from JS!\"),\n        DriverTest(filePath = \"jQuery/jQuery.html\", expectedTextResult = \"I come from jQuery!\"),\n        DriverTest(filePath = \"angularv1/angularv1.html\", expectedTextResult = \"Hello from Angular v1!\"),\n        DriverTest(filePath = \"reactJS/index.html\", expectedTextResult = \"Hello from reactJS!\")\n    ).forEach { driverTest -&gt;\n        given(\"Chrome Driver\") {\n            val chromeDriver: ChromeDriver by lazy { setupChromeDriverForTest() }\n            afterGroup { deleteChromeDriver(chromeDriver) }\n            println(\"BBBBBBBBBBBBBBBBBBBBBB\")\n            val path = ChromeDriverConfigurationTest::class.java.getResource(driverTest.filePath).path\n            chromeDriver.get(\"file://$path\")\n            it(\"should extract test\") {\n                println(\"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\")\n                val text = chromeDriver.findElement(By.id(\"test\")).text\n                assert(text == driverTest.expectedTextResult)\n            }\n\n        }\n    }\n})\n</code></pre>\n\n<p>Surprise again: </p>\n\n<pre><code>BBBBBBBBBBBBBBBBBBBBBB\nBBBBBBBBBBBBBBBBBBBBBB\nBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB\nBBBBBBBBBBBBBBBBBBBBBB\nBBBBBBBBBBBBBBBBBBBBBB\nBBBBBBBBBBBBBBBBBBBBBB\n</code></pre>\n\n<p>Okay, just leave these \"readability\", and make it work... Lets put everything to <code>it</code> section.</p>\n\n<pre><code>@RunWith(JUnitPlatform::class)\nclass ChromeDriverConfigurationTest : Spek\n({\nclass DriverTest(val filePath: String, val expectedTextResult: String)\n\nlistOf(\n    DriverTest(filePath = \"js/js.html\", expectedTextResult = \"Text from JS!\"),\n    DriverTest(filePath = \"jQuery/jQuery.html\", expectedTextResult = \"I come from jQuery!\"),\n    DriverTest(filePath = \"angularv1/angularv1.html\", expectedTextResult = \"Hello from Angular v1!\"),\n    DriverTest(filePath = \"reactJS/index.html\", expectedTextResult = \"Hello from reactJS!\")\n).forEach { driverTest -&gt;\n    given(\"Chrome Driver\") {\n        it(\"should extract test\") {\n            val chromeDriver: ChromeDriver by lazy { setupChromeDriverForTest() }\n            afterGroup { deleteChromeDriver(chromeDriver) }\n            println(\"BBBBBBBBBBBBBBBBBBBBBB\")\n            val path = ChromeDriverConfigurationTest::class.java.getResource(driverTest.filePath).path\n            chromeDriver.get(\"file://$path\")\n            println(\"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\")\n            val text = chromeDriver.findElement(By.id(\"test\")).text\n            assert(text == driverTest.expectedTextResult)\n        }\n\n    }\n}\n}) \n</code></pre>\n\n<p>Ohh great it works! But wait a second..., it executes only 1 test, I mean only for first element in list. H\u0119? Could someone explain me please this behavior? Also maybe you know some other alternatives to Spek? I would write my tests in Kotlin. But with Spek it looks almost impossible</p>\n"}, {"tags": ["android-recyclerview", "kotlin", "adapter"], "answers": [{"comments": [{"owner": {"reputation": 591, "user_id": 7917159, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LxVNtQgqzcw/AAAAAAAAAAI/AAAAAAAAAJU/f7Wxh854Sjs/photo.jpg?sz=128", "display_name": "CEO tech4lifeapps", "link": "https://stackoverflow.com/users/7917159/ceo-tech4lifeapps"}, "edited": false, "score": 0, "creation_date": 1523287662, "post_id": 49730464, "comment_id": 86487160, "body": "Any recommendations for tutorials or other examples on how to handle this? I got really stuck trying to find the right approach to solve this problem."}, {"owner": {"reputation": 1307, "user_id": 4681367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83a0416184c6ffe72aac807e2feac5ce?s=128&d=identicon&r=PG&f=1", "display_name": "Lionel Briand", "link": "https://stackoverflow.com/users/4681367/lionel-briand"}, "reply_to_user": {"reputation": 591, "user_id": 7917159, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LxVNtQgqzcw/AAAAAAAAAAI/AAAAAAAAAJU/f7Wxh854Sjs/photo.jpg?sz=128", "display_name": "CEO tech4lifeapps", "link": "https://stackoverflow.com/users/7917159/ceo-tech4lifeapps"}, "edited": false, "score": 0, "creation_date": 1523347822, "post_id": 49730464, "comment_id": 86511481, "body": "Search for encapsulation. Take a look at <a href=\"https://stackoverflow.com/q/16014290/4681367\">this question</a>"}, {"owner": {"reputation": 1307, "user_id": 4681367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83a0416184c6ffe72aac807e2feac5ce?s=128&d=identicon&r=PG&f=1", "display_name": "Lionel Briand", "link": "https://stackoverflow.com/users/4681367/lionel-briand"}, "reply_to_user": {"reputation": 591, "user_id": 7917159, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LxVNtQgqzcw/AAAAAAAAAAI/AAAAAAAAAJU/f7Wxh854Sjs/photo.jpg?sz=128", "display_name": "CEO tech4lifeapps", "link": "https://stackoverflow.com/users/7917159/ceo-tech4lifeapps"}, "edited": false, "score": 0, "creation_date": 1523348243, "post_id": 49730464, "comment_id": 86511743, "body": "I generally think of a box and ask to myself basic questions. In your example :   What can this box do? (recycles views automatically)   What parameters are expected to this box ? (nothing but LifecycleOwner is required so.. I have to put it in parameters) Why this box have to exist ? (separate my recycler from my activity for more readability)   Can I reuse this box over time if I do it like this ? (probably with minors modifications) What auto-process this box have to do ? (create query and options, theses are always the same)"}, {"owner": {"reputation": 591, "user_id": 7917159, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LxVNtQgqzcw/AAAAAAAAAAI/AAAAAAAAAJU/f7Wxh854Sjs/photo.jpg?sz=128", "display_name": "CEO tech4lifeapps", "link": "https://stackoverflow.com/users/7917159/ceo-tech4lifeapps"}, "edited": false, "score": 0, "creation_date": 1524905484, "post_id": 49730464, "comment_id": 87165613, "body": "You might be able to answer this <a href=\"https://stackoverflow.com/questions/50072368/how-to-encapsulate-a-custom-mediarecorder-in-android-kotlin\">new question</a>  Your expertise and help is highly appreciated!"}], "tags": [], "owner": {"reputation": 1307, "user_id": 4681367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83a0416184c6ffe72aac807e2feac5ce?s=128&d=identicon&r=PG&f=1", "display_name": "Lionel Briand", "link": "https://stackoverflow.com/users/4681367/lionel-briand"}, "is_accepted": true, "score": 1, "last_activity_date": 1523268605, "creation_date": 1523268605, "answer_id": 49730464, "question_id": 49730119, "link": "https://stackoverflow.com/questions/49730119/how-can-i-convert-this-firebase-recycler-adapter-implementation-into-an-adapter/49730464#49730464", "title": "How can I convert this Firebase Recycler Adapter implementation into an Adapter.kt class?", "body": "<p>Given your code you could do something like this :</p>\n\n<pre><code>class MainAdapter(lifecycleOwner: LifecycleOwner) : FirebaseRecyclerAdapter&lt;Category, CategoryHolder&gt;(buildOptions(lifecycleOwner)) {\n\n    companion object {\n        private fun buildQuery() = FirebaseDatabase.getInstance()\n                .reference\n                .child(\"\").child(\"categories\")\n                .limitToLast(50)\n\n        private fun buildOptions(lifecycleOwner:LifecycleOwner) = FirebaseRecyclerOptions.Builder&lt;Category&gt;()\n                .setQuery(buildQuery(), Category::class.java)\n                .setLifecycleOwner(lifecycleOwner)\n                .build()\n\n    }\n\n    class CategoryHolder(val customView: View, var category: Category? = null) : RecyclerView.ViewHolder(customView) {\n\n        fun bind(category: Category) {\n            with(category) {\n                customView.textView_name?.text = category.name\n                customView.textView_description?.text = category.description\n            }\n        }\n    }\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): CategoryHolder {\n        return CategoryHolder(LayoutInflater.from(parent.context)\n                .inflate(R.layout.category_row, parent, false))\n    }\n\n    protected override fun onBindViewHolder(holder: CategoryHolder, position: Int, model: Category) {\n        holder.bind(model)\n    }\n\n    override fun onDataChanged() {\n        // Called each time there is a new data snapshot. You may want to use this method\n        // to hide a loading spinner or check for the \"no documents\" state and update your UI.\n        // ...\n    }\n}\n</code></pre>\n\n<p>There are many other ways to handle this problem, this is just an encapsulated version of yours.</p>\n"}], "owner": {"reputation": 591, "user_id": 7917159, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LxVNtQgqzcw/AAAAAAAAAAI/AAAAAAAAAJU/f7Wxh854Sjs/photo.jpg?sz=128", "display_name": "CEO tech4lifeapps", "link": "https://stackoverflow.com/users/7917159/ceo-tech4lifeapps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 434, "favorite_count": 1, "accepted_answer_id": 49730464, "answer_count": 1, "score": 1, "last_activity_date": 1523288212, "creation_date": 1523267563, "last_edit_date": 1523288212, "question_id": 49730119, "link": "https://stackoverflow.com/questions/49730119/how-can-i-convert-this-firebase-recycler-adapter-implementation-into-an-adapter", "title": "How can I convert this Firebase Recycler Adapter implementation into an Adapter.kt class?", "body": "<p>I have written a Kotlin FirebaseRecyclerAdapter that works just fine as part of my MainActivity. However, I would like to have this code in a separate MainAdapter.kt file/class. How can I do this?</p>\n\n<pre><code>var query = FirebaseDatabase.getInstance()\n        .reference\n        .child(\"\").child(\"categories\")\n        .limitToLast(50)\n\nval options = FirebaseRecyclerOptions.Builder&lt;Category&gt;()\n        .setQuery(query, Category::class.java)\n        .setLifecycleOwner(this)\n        .build()\n\nval adapter = object : FirebaseRecyclerAdapter&lt;Category, CategoryHolder&gt;(options) {\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): CategoryHolder {\n        return CategoryHolder(LayoutInflater.from(parent.context)\n                .inflate(R.layout.category_row, parent, false))\n    }\n\n    protected override fun onBindViewHolder(holder: CategoryHolder, position: Int, model: Category) {\n        holder.bind(model)\n    }\n\n    override fun onDataChanged() {\n        // Called each time there is a new data snapshot. You may want to use this method\n        // to hide a loading spinner or check for the \"no documents\" state and update your UI.\n        // ...\n    }\n}\n\nclass CategoryHolder(val customView: View, var category: Category? = null) : RecyclerView.ViewHolder(customView) {\n\n    fun bind(category: Category) {\n        with(category) {\n            customView.textView_name?.text = category.name\n            customView.textView_description?.text = category.description\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 8055, "user_id": 706387, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/SiTPw.jpg?s=128&g=1", "display_name": "kosiara - Bartosz Kosarzycki", "link": "https://stackoverflow.com/users/706387/kosiara-bartosz-kosarzycki"}, "edited": false, "score": 0, "creation_date": 1533467689, "post_id": 49729037, "comment_id": 90348911, "body": "&#39;contract&#39; is also used in many other places in Standard.kt - like <code>apply()</code> , <code>also()</code> , <code>with()</code> , <code>run()</code>"}], "answers": [{"comments": [{"owner": {"reputation": 5469, "user_id": 7083401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eA15o.png?s=128&g=1", "display_name": "ice1000", "link": "https://stackoverflow.com/users/7083401/ice1000"}, "edited": false, "score": 0, "creation_date": 1523265833, "post_id": 49729504, "comment_id": 86472682, "body": "Oh Thank\u2642you\u2642sir"}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 4, "last_activity_date": 1523265529, "creation_date": 1523265529, "answer_id": 49729504, "question_id": 49729037, "link": "https://stackoverflow.com/questions/49729037/how-does-kotlin-internal-contracts-contractbuilderktcontract-work-in-kotlin/49729504#49729504", "title": "How does `kotlin.internal.contracts.ContractBuilderKt#contract` work in Kotlin?", "body": "<p><code>contract</code> is additional metadata that will be used in future versions of the Kotlin compiler for better code analysis. The contact annotations do not have any effect in Kotlin 1.2.x.</p>\n"}], "owner": {"reputation": 5469, "user_id": 7083401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eA15o.png?s=128&g=1", "display_name": "ice1000", "link": "https://stackoverflow.com/users/7083401/ice1000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 0, "accepted_answer_id": 49729504, "answer_count": 1, "score": 2, "last_activity_date": 1523265529, "creation_date": 1523264110, "question_id": 49729037, "link": "https://stackoverflow.com/questions/49729037/how-does-kotlin-internal-contracts-contractbuilderktcontract-work-in-kotlin", "title": "How does `kotlin.internal.contracts.ContractBuilderKt#contract` work in Kotlin?", "body": "<p>I'm new to Kotlin, and when I read the implementation of <code>let</code>, I see this:</p>\n\n<pre><code>contract {\n    callsInPlace(block, InvocationKind.EXACTLY_ONCE)\n}\nreturn block(this)\n</code></pre>\n\n<p>What is <code>contract</code> here? Is there any efficiency cost for calling that method?</p>\n\n<p>I cannot call <code>contract</code> in my own project since it's <code>internal</code>..</p>\n"}, {"tags": ["java", "android", "notifications", "kotlin", "alarmmanager"], "comments": [{"owner": {"reputation": 31, "user_id": 9618345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72a0cdbb0b19dcd719464634663f0734?s=128&d=identicon&r=PG", "display_name": "Florian", "link": "https://stackoverflow.com/users/9618345/florian"}, "reply_to_user": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1523264175, "post_id": 49728711, "comment_id": 86471729, "body": "Yes, that what I thought, it&#39;s because JobScheduler should not be use for schedule recurring alarms at an exact time, but for background tasks that should be firing when some conditions are reaches ? But in my case I really need to fire my alarm at an exact time, it&#39;s for a reminder notification."}, {"owner": {"reputation": 128827, "user_id": 653856, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6qIEl.png?s=128&g=1", "display_name": "Raghunandan", "link": "https://stackoverflow.com/users/653856/raghunandan"}, "edited": false, "score": 0, "creation_date": 1523265017, "post_id": 49728711, "comment_id": 86472195, "body": "this <a href=\"https://plus.google.com/+AndroidDevelopers/posts/GdNrQciPwqo\" rel=\"nofollow noreferrer\">plus.google.com/+AndroidDevelopers/posts/GdNrQciPwqo</a> might help"}, {"owner": {"reputation": 31, "user_id": 9618345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72a0cdbb0b19dcd719464634663f0734?s=128&d=identicon&r=PG", "display_name": "Florian", "link": "https://stackoverflow.com/users/9618345/florian"}, "edited": false, "score": 0, "creation_date": 1523266224, "post_id": 49728711, "comment_id": 86472922, "body": "Thanks for your link Raghunandan, I indeed try <code>setExactAndAllowWhileIdle()</code> which should be what I need, but alarms not triggering on my Huawei mate 10 or OnePlus 5... I begin to think this could be due to brand&#39;s custom battery manager ?"}, {"owner": {"reputation": 1055, "user_id": 3625488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LmX54.jpg?s=128&g=1", "display_name": "Anthony Cannon", "link": "https://stackoverflow.com/users/3625488/anthony-cannon"}, "edited": false, "score": 0, "creation_date": 1523454368, "post_id": 49728711, "comment_id": 86568682, "body": "Could you edit your question and write the exact Android version you couldn&#39;t get it working on please."}], "owner": {"reputation": 31, "user_id": 9618345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72a0cdbb0b19dcd719464634663f0734?s=128&d=identicon&r=PG", "display_name": "Florian", "link": "https://stackoverflow.com/users/9618345/florian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1523264586, "creation_date": 1523262980, "last_edit_date": 1523264586, "question_id": 49728711, "link": "https://stackoverflow.com/questions/49728711/scheduling-alarmmanager-on-lastest-android-version-not-working", "title": "Scheduling AlarmManager on lastest Android version not working", "body": "<p>I've got some problems to schedule an alarm with <code>AlarmManager</code> on the latest versions of Android. Due to the idle mode? \nI need to create an alarm to display a recurring notification, but on the latest versions of Android, my alarm is not triggering if the app is killed. \n(Works like a charm on the older API levels)</p>\n\n<p>I've tried <code>AlarmManager</code>, Evernote (which use <code>AlarmManager</code>) but nothing works. </p>\n\n<p>Does anyone know if there is a way (battery carrying) to schedule an alarm and be sure it'll trigger on the latest Android versions? </p>\n\n<p>Here it's my code to schedule an alarm: </p>\n\n<pre><code>public static void schedulePeriodic(long nextReminderTimeInMillis) {\n    new JobRequest.Builder(TAG)\n            .setExact(nextReminderTimeInMillis)\n            .setUpdateCurrent(true)\n            .build()\n            .schedule();\n}\n</code></pre>\n"}, {"tags": ["lambda", "parameters", "kotlin"], "owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 137, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1523263178, "creation_date": 1523262823, "last_edit_date": 1523263178, "question_id": 49728652, "link": "https://stackoverflow.com/questions/49728652/idea-kotlin-code-auto-completion-on-lambda-parameters", "title": "Idea &amp; kotlin, code auto-completion on lambda parameters", "body": "<p>I have this <code>functionalInterface</code> in lwjgl java so defined:</p>\n\n<pre><code>@FunctionalInterface\n@NativeType(\"GLFWkeyfun\")\npublic interface GLFWKeyCallbackI extends CallbackI.V {\n\n    String SIGNATURE = \"(piiii)v\";\n\n    @Override\n    default String getSignature() { return SIGNATURE; }\n\n    @Override\n    default void callback(long args) {\n        invoke(\n            dcbArgPointer(args),\n            dcbArgInt(args),\n            dcbArgInt(args),\n            dcbArgInt(args),\n            dcbArgInt(args)\n        );\n    }\n\n    /**\n     * Will be called when a key is pressed, repeated or released.\n     *\n     * @param window   the window that received the event\n     * @param key      the keyboard key that was pressed or released\n     * @param scancode the system-specific scancode of the key\n     * @param action   the key action. One of:&lt;br&gt;&lt;table&gt;&lt;tr&gt;&lt;td&gt;{@link GLFW#GLFW_PRESS PRESS}&lt;/td&gt;&lt;td&gt;{@link GLFW#GLFW_RELEASE RELEASE}&lt;/td&gt;&lt;td&gt;{@link GLFW#GLFW_REPEAT REPEAT}&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;\n     * @param mods     bitfield describing which modifiers keys were held down\n     */\n    void invoke(@NativeType(\"GLFWwindow *\") long window, int key, int scancode, int action, int mods);\n\n}\n</code></pre>\n\n<p>And I have a corresponding kotlin:</p>\n\n<p><code>typealias KeyCallbackT = (key: Int, scanCode: Int, action: Int, mods: Int) -&gt; Unit</code></p>\n\n<p>The big thing I'm missing (and which bothers me since it's very error prone), it's that whenever I start typing <code>GLFWKeyCallbackI</code> then I can choose the corresponding code auto-completion option that will automatically write all the defined parameters:</p>\n\n<p><code>GLFWKeyCallbackI { window, key, scanCode, action, mods -&gt;</code></p>\n\n<p>Like this:</p>\n\n<p><img src=\"https://i.imgur.com/ma5aHe0.png?1\" alt=\"Imgur\"></p>\n\n<p>But I don't have the same on kotlin with my <code>typealias</code></p>\n\n<p>I have, of course, multiple other similar situations and it'd be nice if I could get the same auto-completion</p>\n"}, {"tags": ["kotlin", "gson", "retrofit2"], "comments": [{"owner": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1523263877, "post_id": 49728625, "comment_id": 86471553, "body": "<i>This may be inefficient</i> - but is it? You have not tested it I guess. You&#39;re asking to fix a problem that might not even exist"}, {"owner": {"reputation": 7895, "user_id": 455796, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9a0zB.jpg?s=128&g=1", "display_name": "Damn Vegetables", "link": "https://stackoverflow.com/users/455796/damn-vegetables"}, "reply_to_user": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1523265423, "post_id": 49728625, "comment_id": 86472415, "body": "You are right, I am sorry for that. I thought I might need to check how much memory and time it consumes to create all those instances at once, but I thought it did not look good anyway (I sometimes forgot to register it after creating a new deserialiser class), so I wondered if there was a better way. Such as instead of calling <code>registerTypeAdapter</code> for each class, adding an annotation to deserialiser classes so that it could be automatically used when deserialising the types as needed."}], "answers": [{"comments": [{"owner": {"reputation": 7895, "user_id": 455796, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9a0zB.jpg?s=128&g=1", "display_name": "Damn Vegetables", "link": "https://stackoverflow.com/users/455796/damn-vegetables"}, "edited": false, "score": 0, "creation_date": 1523450869, "post_id": 49768374, "comment_id": 86565973, "body": "Probably I am asking too much, but I have been using <code>JsonDeserializer&lt;T&gt;</code> which gave a <code>JsonElement</code>. Your solution is using <code>TypeAdapter&lt;T&gt;</code> which gives me a <code>JsonReader</code>. So, I cannot use <code>JsonDeserializer&lt;T&gt;</code>  for this method, right? Because reading complex structure data from <code>JsonReader</code> is a lot harder than from <code>JsonElement</code>."}, {"owner": {"reputation": 28482, "user_id": 1904517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mn4kq.png?s=128&g=1", "display_name": "iagreen", "link": "https://stackoverflow.com/users/1904517/iagreen"}, "reply_to_user": {"reputation": 7895, "user_id": 455796, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9a0zB.jpg?s=128&g=1", "display_name": "Damn Vegetables", "link": "https://stackoverflow.com/users/455796/damn-vegetables"}, "edited": false, "score": 1, "creation_date": 1523461863, "post_id": 49768374, "comment_id": 86574332, "body": "You can use <code>JsonParser</code> (<a href=\"https://google.github.io/gson/apidocs/com/google/gson/JsonParser.html\" rel=\"nofollow noreferrer\">google.github.io/gson/apidocs/com/google/gson/JsonParser.ht&zwnj;&#8203;ml</a>) to transform it.  Allocate a <code>JsonParser</code> in your constructor to avoid reallocating it on each deserialization.   In your <code>read</code> method, do <code>JsonElement element = parser.parse(in)</code>  This gives up the efficiency of using <code>JsonReader</code>, but should be similar to <code>JsonDeserializer</code>"}], "tags": [], "owner": {"reputation": 28482, "user_id": 1904517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mn4kq.png?s=128&g=1", "display_name": "iagreen", "link": "https://stackoverflow.com/users/1904517/iagreen"}, "is_accepted": true, "score": 0, "last_activity_date": 1523429594, "creation_date": 1523429594, "answer_id": 49768374, "question_id": 49728625, "link": "https://stackoverflow.com/questions/49728625/retrofit-gson-how-to-create-type-adapters-dynamically/49768374#49768374", "title": "Retrofit/Gson how to create type adapters dynamically", "body": "<p>You can add a <a href=\"https://google.github.io/gson/apidocs/com/google/gson/annotations/JsonAdapter.html\" rel=\"nofollow noreferrer\"><code>@JsonAdapter</code></a> annotation to your class definition in lieu of calling <code>registerTypeAdapter</code>.  I can't comment on its efficiency, but it keeps the adapter info tied to the object instead of the creation of your <code>Gson</code> object, which sounds like what you want.</p>\n"}], "owner": {"reputation": 7895, "user_id": 455796, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9a0zB.jpg?s=128&g=1", "display_name": "Damn Vegetables", "link": "https://stackoverflow.com/users/455796/damn-vegetables"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 685, "favorite_count": 0, "accepted_answer_id": 49768374, "answer_count": 1, "score": 0, "last_activity_date": 1523429594, "creation_date": 1523262695, "last_edit_date": 1523265271, "question_id": 49728625, "link": "https://stackoverflow.com/questions/49728625/retrofit-gson-how-to-create-type-adapters-dynamically", "title": "Retrofit/Gson how to create type adapters dynamically", "body": "<p>I learned from one example, so I am not sure if this is the optimal way or not, but anyways, I use the following code. I create one Retrofit instance and use it for all requests. </p>\n\n<p>Since there are many methods, there are many types of data. It seems that I can create adapters (json -> my data class) automatically simply by adding annotations. But I needed more control (inheritance: the data classes have shared fields, dependency: some fields may not exist depending on other field's values), so I created a custom adaptor for each of the classes. So, currently my code is like this:</p>\n\n<pre><code>if (instance == null)\n{\n   val gson = GsonBuilder()\n             .registerTypeAdapter(myClass1::class.java, myClassDeserialiser1())\n              .... (tens of this) ....\n             .registerTypeAdapter(myClass30::class.java, myClassDeserialiser30())\n             .create()\n    instance = Retrofit.Builder().\n                   .addConverterFactory(GsonConverterFactory.create(gson))\n                   .build()\n                   .create(MyAPIs::class.java);\n} \nreturn instance\n</code></pre>\n\n<p>The problem above is that I am creating instances of all parsers at the same time in advance. This may be inefficient. I wish I could create them when they are first needed. Is that possible?</p>\n"}, {"tags": ["android", "kotlin", "acrcloud"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6781189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63775550b002f62a900b49ef122bd1de?s=128&d=identicon&r=PG&f=1", "display_name": "Pony", "link": "https://stackoverflow.com/users/6781189/pony"}, "is_accepted": false, "score": 0, "last_activity_date": 1523274441, "last_edit_date": 1523274441, "creation_date": 1523263233, "answer_id": 49728786, "question_id": 49727056, "link": "https://stackoverflow.com/questions/49727056/acrcloud-music-recognition-in-android-service/49728786#49728786", "title": "ACRCloud music recognition in Android service", "body": "<p>SDK can work in a service, but because SDK needs recording, it may be interrupted during execution in the background.Can your implementation code work now? \nYou can set \"this.mConfig.context = null\", and ignore that null exception.</p>\n"}, {"tags": [], "owner": {"reputation": 2780, "user_id": 8597176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d69635e6443411a2d4b9b5c396c77b0?s=128&d=identicon&r=PG&f=1", "display_name": "nick.tdr", "link": "https://stackoverflow.com/users/8597176/nick-tdr"}, "is_accepted": true, "score": 0, "last_activity_date": 1523269246, "creation_date": 1523269246, "answer_id": 49730668, "question_id": 49727056, "link": "https://stackoverflow.com/questions/49727056/acrcloud-music-recognition-in-android-service/49730668#49730668", "title": "ACRCloud music recognition in Android service", "body": "<p>I checked the implementation of the ACRCloudClient and its extends android Activity. Also ACRCloudClient uses shared preferences(that's why I am getting a null pointer exception).</p>\n\n<p>Since keeping a reference to an activity in a service is not a good Idea its best to Implement the above code in the activity. All the implementation of recognizing is being done in a separate thread anyway in the ACRCloudClient class so there is no point of creating another service for that.</p>\n\n<p>I answered the same in another question as well <a href=\"https://stackoverflow.com/questions/49705028/acrcloud-integration-to-android-app/49707652?noredirect=1#comment86429097_49707652\">link to related question</a></p>\n"}], "owner": {"reputation": 2780, "user_id": 8597176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d69635e6443411a2d4b9b5c396c77b0?s=128&d=identicon&r=PG&f=1", "display_name": "nick.tdr", "link": "https://stackoverflow.com/users/8597176/nick-tdr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 227, "favorite_count": 0, "accepted_answer_id": 49730668, "answer_count": 2, "score": 2, "last_activity_date": 1537839099, "creation_date": 1523256651, "last_edit_date": 1537839099, "question_id": 49727056, "link": "https://stackoverflow.com/questions/49727056/acrcloud-music-recognition-in-android-service", "title": "ACRCloud music recognition in Android service", "body": "<p>I followed the demo app in the ACRCloud Android sdk. All the code for music recognition was in the activity.</p>\n\n<p>I did the same but in a service. So can we initialize the ACRCloudClient in the service?(ACRCloudClient extends from Activity).</p>\n\n<p>How can we then do it in the service if we can't.</p>\n\n<p>I have the implementation code in the service in another question. Here is the link <a href=\"https://stackoverflow.com/questions/49705028/acrcloud-integration-to-android-app/49707652?noredirect=1#comment86429097_49707652\">See this question</a></p>\n"}, {"tags": ["android", "localization", "kotlin", "resources"], "comments": [{"owner": {"reputation": 11206, "user_id": 4571931, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/L8ohX.png?s=128&g=1", "display_name": "Android Team", "link": "https://stackoverflow.com/users/4571931/android-team"}, "edited": false, "score": 0, "creation_date": 1523255467, "post_id": 49726672, "comment_id": 86467251, "body": "Could you see language changed when restart your App?"}], "answers": [{"tags": [], "owner": {"reputation": 1196, "user_id": 5989261, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/0e954941ca0c53ff519d9aea473ce46f?s=128&d=identicon&r=PG&f=1", "display_name": "hasan_shaikh", "link": "https://stackoverflow.com/users/5989261/hasan-shaikh"}, "is_accepted": false, "score": 5, "last_activity_date": 1526033993, "last_edit_date": 1526033993, "creation_date": 1523255725, "answer_id": 49726842, "question_id": 49726672, "link": "https://stackoverflow.com/questions/49726672/automatically-change-drawer-language-when-app-resume-from-backstack/49726842#49726842", "title": "Automatically change drawer language when app resume from backstack", "body": "<p>Check this,</p>\n\n<pre><code>String language = preferences.getString(\"language\", null);\n</code></pre>\n\n<p>and this is my onclick listener of button</p>\n\n<pre><code> llChangeLanguage.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n\n\n            if (language == null) {\n                LocaleHelper.setLocale(BaseActivity.this, \"de\");\n                Intent intent = new Intent(BaseActivity.this, HomeActivity.class);\n                storeLanguageInPref(\"en\");\n                startActivity(intent);\n                finish();\n            } else if (\"kn\".contentEquals(language)) {\n                LocaleHelper.setLocale(BaseActivity.this, \"de\");\n                Intent intent = new Intent(BaseActivity.this, HomeActivity.class);\n                startActivity(intent);\n                storeLanguageInPref(\"en\");\n                finish();\n            } else {\n                LocaleHelper.setLocale(BaseActivity.this, \"kn\");\n                Intent intent = new Intent(BaseActivity.this, HomeActivity.class);\n                storeLanguageInPref(\"kn\");\n                startActivity(intent);\n\n                finish();\n            }\n\n        }\n    });\n</code></pre>\n\n<p>and here i am storing the selected language to preference</p>\n\n<pre><code> private void storeLanguageInPref(String language) {\n    SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(BaseActivity.this);\n    SharedPreferences.Editor editor = preferences.edit();\n\n    editor.putString(\"language\", language);\n    editor.apply();\n}\n</code></pre>\n\n<p>LocaleHelper class </p>\n\n<pre><code>public class LocaleHelper {\n\npublic static Context onAttach(Context context) {\n    String locale = getPersistedLocale(context);\n    return setLocale(context, locale);\n}\n\npublic static String getPersistedLocale(Context context) {\n    SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(context);\n    return preferences.getString(SettingsFragment.KEY_PREF_LANGUAGE, \"\");\n}\n\n/**\n * Set the app's locale to the one specified by the given String.\n *\n * @param context\n * @param localeSpec a locale specification as used for Android resources (NOTE: does not\n *                   support country and variant codes so far); the special string \"system\" sets\n *                   the locale to the locale specified in system settings\n * @return\n */\npublic static Context setLocale(Context context, String localeSpec) {\n    Locale locale;\n    if (localeSpec.equals(\"system\")) {\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) {\n            locale = Resources.getSystem().getConfiguration().getLocales().get(0);\n        } else {\n            //noinspection deprecation\n            locale = Resources.getSystem().getConfiguration().locale;\n        }\n    } else {\n        locale = new Locale(localeSpec);\n    }\n    Locale.setDefault(locale);\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) {\n        return updateResources(context, locale);\n    } else {\n        return updateResourcesLegacy(context, locale);\n    }\n}\n\n@TargetApi(Build.VERSION_CODES.N)\nprivate static Context updateResources(Context context, Locale locale) {\n    Configuration configuration = context.getResources().getConfiguration();\n    configuration.setLocale(locale);\n    configuration.setLayoutDirection(locale);\n\n    return context.createConfigurationContext(configuration);\n}\n\n@SuppressWarnings(\"deprecation\")\nprivate static Context updateResourcesLegacy(Context context, Locale locale) {\n    Resources resources = context.getResources();\n\n    Configuration configuration = resources.getConfiguration();\n    configuration.locale = locale;\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN_MR1) {\n        configuration.setLayoutDirection(locale);\n    }\n\n    resources.updateConfiguration(configuration, resources.getDisplayMetrics());\n\n    return context;\n}\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 511, "user_id": 6666003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22621986efd231dabd77651279ced5f2?s=128&d=identicon&r=PG&f=1", "display_name": "VivekRajendran", "link": "https://stackoverflow.com/users/6666003/vivekrajendran"}, "is_accepted": false, "score": 0, "last_activity_date": 1523259051, "last_edit_date": 1592644375, "creation_date": 1523259051, "answer_id": 49727640, "question_id": 49726672, "link": "https://stackoverflow.com/questions/49726672/automatically-change-drawer-language-when-app-resume-from-backstack/49727640#49727640", "title": "Automatically change drawer language when app resume from backstack", "body": "<p>You have two different options.</p>\n<ol>\n<li>setting including &quot;locale&quot; to android:configChanges in xml. It is recommended the way of changing the language as <a href=\"https://developer.android.com/guide/topics/manifest/activity-element.html#config\" rel=\"nofollow noreferrer\">doc</a> says,</li>\n</ol>\n<blockquote>\n<p>android:configChanges Lists configuration changes that the activity will handle itself. When a configuration change occurs at runtime, the activity is shut down and restarted by default, but declaring a configuration with this attribute will prevent the activity from being restarted. Instead, the activity remains running and its onConfigurationChanged() method is called.</p>\n<p>Note: Using this attribute should be avoided and used only as a last-resort. Please read Handling Runtime Changes for more information about how to properly handle a restart due to a configuration change.</p>\n<p>Any or all of the following strings are valid values for this attribute. Multiple values are separated by '|' \u2014 for example, &quot;locale|navigation|orientation&quot;.</p>\n</blockquote>\n<ol start=\"2\">\n<li>Another way is through the broadcast receiver.\n<a href=\"http://developer.android.com/reference/android/content/Intent.html#ACTION_LOCALE_CHANGED\" rel=\"nofollow noreferrer\">ACTION_LOCALE_CHANGED</a>.\nYou can register a BroadcastReceiver in your manifest to handle it.</li>\n</ol>\n"}], "owner": {"reputation": 59, "user_id": 7284578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2d01968d7f936db6c2265a0b752cad2?s=128&d=identicon&r=PG&f=1", "display_name": "Dharmesh Patel", "link": "https://stackoverflow.com/users/7284578/dharmesh-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1751, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1526033993, "creation_date": 1523254946, "question_id": 49726672, "link": "https://stackoverflow.com/questions/49726672/automatically-change-drawer-language-when-app-resume-from-backstack", "title": "Automatically change drawer language when app resume from backstack", "body": "<p>I have implemented two language in my app \"English\" and \"French\" and both of them are working fine individually. When I am trying to check the language change with device language that time getting problem.</p>\n\n<p>Recently my app and device language are \"French\". Now I am changing the device language from \"French\" to \"English\" and then open the app from backstack, app language is still in \"French\" thats right but In the app, navigation drawer related content changed to \"English\" </p>\n\n<p>Below is the code for changing language which I have done in GlobalClass</p>\n\n<pre><code>public void changelanguage(String languageToLoad, Context context) {\n\n            Locale locale = new Locale(languageToLoad);\n            Locale.setDefault(locale);\n            Configuration config = new Configuration();\n            config.locale = locale;\n            context.getResources().updateConfiguration(config,\n                    context.getResources().getDisplayMetrics());\n\n        }\n</code></pre>\n\n<p>And below is the code for comparing language on MainActivity and Splashscreen</p>\n\n<pre><code>gc = GlobalClass.getInstance()\nprefsWrapper = PreferencesWrapper(applicationContext)\nsel_langague = prefsWrapper.getPreferenceStringValue(SipConfigManager.LANGUAGE)\nprintln(\"Language Main : \" + sel_langague)\nvar languageToLoad = \"\"\nif (sel_langague == \"0\") {\n     languageToLoad =\"en\"\n} else {\n     languageToLoad =\"fr\"\n}\ngc!!.changelanguage(languageToLoad, baseContext)\n</code></pre>\n\n<p>Does any one have idea for how can I resolve that problem?</p>\n"}]