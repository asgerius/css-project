[{"tags": ["android", "kotlin", "mvvm"], "comments": [{"owner": {"reputation": 1027, "user_id": 6375170, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zugq_QmaxMM/AAAAAAAAAAI/AAAAAAAAAPQ/U_tBeKw3rDg/photo.jpg?sz=128", "display_name": "Ashok Kumar", "link": "https://stackoverflow.com/users/6375170/ashok-kumar"}, "edited": false, "score": 0, "creation_date": 1562207299, "post_id": 56879181, "comment_id": 100308201, "body": "Could you add your homescreen onresume/onstart code"}, {"owner": {"reputation": 13, "user_id": 11736794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/746a5bfed0f3c028cc9201f341a87d15?s=128&d=identicon&r=PG&f=1", "display_name": "SaltyFry", "link": "https://stackoverflow.com/users/11736794/saltyfry"}, "reply_to_user": {"reputation": 1027, "user_id": 6375170, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zugq_QmaxMM/AAAAAAAAAAI/AAAAAAAAAPQ/U_tBeKw3rDg/photo.jpg?sz=128", "display_name": "Ashok Kumar", "link": "https://stackoverflow.com/users/6375170/ashok-kumar"}, "edited": false, "score": 0, "creation_date": 1562218530, "post_id": 56879181, "comment_id": 100310372, "body": "The only things on the various lifecycle calls are log messages stating they are called."}], "owner": {"reputation": 13, "user_id": 11736794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/746a5bfed0f3c028cc9201f341a87d15?s=128&d=identicon&r=PG&f=1", "display_name": "SaltyFry", "link": "https://stackoverflow.com/users/11736794/saltyfry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1562218645, "creation_date": 1562198176, "last_edit_date": 1562218645, "question_id": 56879181, "link": "https://stackoverflow.com/questions/56879181/conditional-navigation-in-fragment-only-triggers-once", "title": "Conditional navigation in fragment only triggers once", "body": "<p>With most and/or all of my Android development knowledge coming from Google's course on Udacity about developing android apps with Kotlin, I have run into an issue where my conditional navigation only triggers once, and any further triggers lock up the app in a loop.</p>\n\n<p>Hopefully there is enough info here to avoid the XY problem. It also may be too verbose, as I was trying to rubber duck into the text box to see if I could notice any glaring issues.</p>\n\n<p>The application is a single activity application, which uses android architecture components, databinding, and the navigation library. It also uses the Android AWS SDK, but I don't believe that is relevant to the issue. </p>\n\n<p>Following Google's navigation principles, the fixed start destination is\nnot the login screen.</p>\n\n<p>Login screen is conditional on the sign in state\nfrom AWSMobileClient being true.</p>\n\n<p><strong>Application Class</strong></p>\n\n<p>AWSMobileClient is initialized in class extending Application</p>\n\n<pre><code>        AWSMobileClient.getInstance().initialize(applicationContext, object : Callback&lt;UserStateDetails&gt; {\n\n            override fun onResult(userStateDetails: UserStateDetails) {\n                Timber.i(\"Inside init function onResult: %s\", userStateDetails.userState)\n\n            }\n\n            override fun onError(e: Exception) {\n                Timber.e(e, \"Initialization error.\")\n            }\n        }\n        )\n</code></pre>\n\n<p><strong>Home Screen ViewModel</strong></p>\n\n<p>Checks the sign in state, and sets a MutableLiveData with that boolean value</p>\n\n<pre><code>\n private var _isSignedIn = MutableLiveData&lt;Boolean&gt;()\n\n    val isSignedIn: LiveData&lt;Boolean&gt;\n        get() = _isSignedIn\n\n\n    init {\n        startup()\n    }\n\n    private fun startup() {\n\n        Timber.i(\n            \"Startup isSignedIn state: %s\",\n            AWSMobileClient.getInstance()?.isSignedIn.toString()\n        )\n\n        _isSignedIn.value = AWSMobileClient.getInstance().isSignedIn\n\n\n    }\n\n    fun logout() {\n        Timber.i(\"Trying to logout now..\")\n        AWSMobileClient.getInstance().signOut()\n        _isSignedIn.value = false\n    }\n\n</code></pre>\n\n<p><strong>Home Screen Fragment</strong></p>\n\n<pre><code>        Timber.i(\"Viewmodel in oncreate\")\n        val homeScreenViewModel =\n            ViewModelProviders.of(this)\n                .get(HomeScreenViewModel::class.java)\n\n\n        binding.homeScreenViewModel = homeScreenViewModel\n\n        binding.lifecycleOwner = viewLifecycleOwner\n\n        val navController = findNavController()\n\n\n        homeScreenViewModel.isSignedIn.observe(viewLifecycleOwner, Observer { signIn -&gt;\n            if (signIn) {\n                Timber.i(\"ifTrue isSignedIn\")\n                homeScreenViewModel.apiCall()\n            }\n            else {\n                navController.navigate(HomeScreenFragmentDirections.actionHomeScreenFragmentToLoginFragment())\n                Timber.i(\"Else isSignedIn\")\n            }\n        })\n\n\n</code></pre>\n\n<p><strong><em>Clean install of App</em></strong></p>\n\n<p>Logcat</p>\n\n<pre><code>\n2019-07-03 15:30:38.727 I/AWSKeyValueStore: Creating the AWSKeyValueStore with key for sharedPreferences = CognitoIdentityProviderCache\n2019-07-03 15:30:38.752 I/ExampleApplication$onCreate: Inside init function onResult: SIGNED_OUT\n2019-07-03 15:30:38.759 I/HomeScreenFragment: Viewmodel in oncreate\n2019-07-03 15:30:38.759 I/HomeScreenViewModel: Startup isSignedIn state: false\n2019-07-03 15:30:38.778 I/HomeScreenFragment$onCreateView: Else isSignedIn\n2019-07-03 15:30:39.182 I/HomeScreenFragment: Homescreen fragment onStop\n</code></pre>\n\n<p>At this point, the app is sitting on the login screen, all working as expected.</p>\n\n<p>It</p>\n\n<p>-Launched to homescreen fragment</p>\n\n<p>-Checked my sign in state, sees I am not signed in,</p>\n\n<p>-Navigates me to login screen.</p>\n\n<p>Logcat after logging in</p>\n\n<pre><code>2019-07-03 15:33:39.605 I/LoginViewModel$signIn: Sign-in callback state: DONE\n2019-07-03 15:33:39.605 I/LoginViewModel$signIn: Sign-in done.\n2019-07-03 15:33:39.611 I/HomeScreenFragment: Viewmodel in oncreate\n2019-07-03 15:33:39.618 I/HomeScreenViewModel: Startup isSignedIn state: true\n2019-07-03 15:33:39.626 I/HomeScreenFragment$onCreateView: ifTrue isSignedIn\n2019-07-03 15:33:39.628 I/HomeScreenFragment: Homescreen fragment onResume\n2019-07-03 15:33:39.635 I/HomeScreenViewModel: Viewmodel onCleared\n2019-07-03 15:33:39.635 I/HomeScreenFragment: Homescreen fragment onDestroy\n</code></pre>\n\n<p>I successfully login, am navigated back to homescreen, my sign in state is checked,\nsees I am signed in, it fetches data from an api, and displays that in\na recyclerview.</p>\n\n<p>I am not sure why the fragment/viewmodel are cleared/destroyed. Fragment is\nstill on screen and can interact with it.</p>\n\n<p>When I hit the sign out button on homescreen fragment, the logout function is called from the viewmodel</p>\n\n<p>and at this point, the app locks up and my logcat is this, repeated to infinity</p>\n\n<pre><code>2019-07-03 15:40:39.756 I/HomeScreenViewModel: Trying to logout now..\n2019-07-03 15:40:39.779 I/HomeScreenFragment$onCreateView: Else isSignedIn\n2019-07-03 15:40:39.834 I/HomeScreenFragment: Homescreen fragment onPause\n2019-07-03 15:40:39.835 I/HomeScreenFragment: Homescreen fragment onStop\n2019-07-03 15:40:39.837 I/HomeScreenFragment: Viewmodel in oncreate\n2019-07-03 15:40:39.838 I/HomeScreenViewModel: Startup isSignedIn state: false\n2019-07-03 15:40:39.840 I/HomeScreenFragment$onCreateView: Else isSignedIn\n2019-07-03 15:40:39.840 I/HomeScreenFragment: Homescreen fragment onResume\n2019-07-03 15:40:39.840 I/HomeScreenViewModel: Viewmodel onCleared\n2019-07-03 15:40:39.841 I/HomeScreenFragment: Homescreen fragment onDestroy\n</code></pre>\n\n<p>If I kill the app and relaunch it, it pops up to the login screen, as expected.</p>\n\n<p><strong>Launching app when I am already signed in</strong></p>\n\n<p>If I launch the app and am already signed in, I stay at the homescreen fragment.\nWhen I click the sign out button, I am signed out and navigated to the login screen.</p>\n\n<pre><code>2019-07-03 15:43:40.417 I/ExampleApplication$onCreate: Inside init function onResult: SIGNED_IN\n2019-07-03 15:43:40.438 I/HomeScreenFragment: Viewmodel in oncreate\n2019-07-03 15:43:40.447 I/HomeScreenViewModel: Startup isSignedIn state: true\n2019-07-03 15:43:40.485 I/HomeScreenFragment$onCreateView: ifTrue isSignedIn\n2019-07-03 15:43:40.650 I/HomeScreenFragment: Homescreen fragment onResume\n2019-07-03 15:43:40.835 I/OpenGLRenderer: Initialized EGL, version 1.4\n2019-07-03 15:43:40.835 W/OpenGLRenderer: Failed to choose config with EGL_SWAP_BEHAVIOR_PRESERVED, retrying without...\n2019-07-03 15:43:45.086 I/HomeScreenViewModel: Trying to logout now..\n2019-07-03 15:43:45.115 I/HomeScreenFragment$onCreateView: Else isSignedIn\n2019-07-03 15:43:45.676 I/HomeScreenFragment: Homescreen fragment onPause\n2019-07-03 15:43:45.676 I/HomeScreenFragment: Homescreen fragment onStop\n2019-07-03 15:43:45.758 I/art: Do partial code cache collection, code=27KB, data=29KB\n2019-07-03 15:43:45.759 I/art: After code cache collection, code=24KB, data=28KB\n2019-07-03 15:43:45.759 I/art: Increasing code cache capacity to 128KB\n</code></pre>\n\n<p>I can login at this point, and am correctly navigated back to the homescreen.\nClicking the signout button will lock the app until it is killed and relaunched.</p>\n\n<p>So it seems to me that as long as it is the first time the observer sees the signIn value being false,\nit will correctly navigate me to the login screen and back. If it is the second time, however,\nthe app locks up.</p>\n\n<p>EDIT:</p>\n\n<p>requested methods</p>\n\n<pre><code>    override fun onPause() {\n        super.onPause()\n        Timber.i(\"Homescreen fragment onPause\")\n    }\n\n    override fun onStop() {\n        super.onStop()\n        Timber.i(\"Homescreen fragment onStop\")\n\n    }\n\n    override fun onResume() {\n        super.onResume()\n        Timber.i(\"Homescreen fragment onResume\")\n\n    }\n\n    override fun onDestroy() {\n        super.onDestroy()\n        Timber.i(\"Homescreen fragment onDestroy\")\n\n    }\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-viewpager2"], "comments": [{"owner": {"reputation": 153906, "user_id": 1676363, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44dac57d3bb65805bc3df4409d019c83?s=128&d=identicon&r=PG", "display_name": "ianhanniballake", "link": "https://stackoverflow.com/users/1676363/ianhanniballake"}, "edited": false, "score": 0, "creation_date": 1562195971, "post_id": 56878906, "comment_id": 100306443, "body": "ViewPager2 probably isn&#39;t forwarding the overScrollMode to the RecyclerView it uses internally. Can you <a href=\"https://issuetracker.google.com/issues/new?component=561920\" rel=\"nofollow noreferrer\">file a feature request</a>?"}, {"owner": {"reputation": 469, "user_id": 11133395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/90OUn.jpg?s=128&g=1", "display_name": "Daniel Kim", "link": "https://stackoverflow.com/users/11133395/daniel-kim"}, "reply_to_user": {"reputation": 153906, "user_id": 1676363, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44dac57d3bb65805bc3df4409d019c83?s=128&d=identicon&r=PG", "display_name": "ianhanniballake", "link": "https://stackoverflow.com/users/1676363/ianhanniballake"}, "edited": false, "score": 0, "creation_date": 1562197720, "post_id": 56878906, "comment_id": 100306763, "body": "@ianhanniballake Filed it right over, thank you"}, {"owner": {"reputation": 1761, "user_id": 1229936, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/6112c497dd338e57c9da26405e98e1d7?s=128&d=identicon&r=PG", "display_name": "JHowzer", "link": "https://stackoverflow.com/users/1229936/jhowzer"}, "edited": false, "score": 0, "creation_date": 1578425118, "post_id": 56878906, "comment_id": 105431830, "body": "<a href=\"https://issuetracker.google.com/issues/134912610\" rel=\"nofollow noreferrer\">issuetracker.google.com/issues/134912610</a>"}, {"owner": {"reputation": 804, "user_id": 8258872, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cadd7ad672077a70380fee38537939cb?s=128&d=identicon&r=PG&f=1", "display_name": "ColonD", "link": "https://stackoverflow.com/users/8258872/colond"}, "edited": false, "score": 0, "creation_date": 1597722057, "post_id": 56878906, "comment_id": 112219070, "body": "Just wasted a lot of time on this petty issue, this question and its answers deserve more visibility!"}], "answers": [{"comments": [{"owner": {"reputation": 1730, "user_id": 1959110, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/sMBP9.jpg?s=128&g=1", "display_name": "galaxigirl", "link": "https://stackoverflow.com/users/1959110/galaxigirl"}, "edited": false, "score": 0, "creation_date": 1581252314, "post_id": 56942231, "comment_id": 106361280, "body": "Please provide solution without data binding"}, {"owner": {"reputation": 75, "user_id": 2978799, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/80f6ef04a1b5a726ad96ecbf1be5943b?s=128&d=identicon&r=PG&f=1", "display_name": "Phehaz", "link": "https://stackoverflow.com/users/2978799/phehaz"}, "reply_to_user": {"reputation": 1730, "user_id": 1959110, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/sMBP9.jpg?s=128&g=1", "display_name": "galaxigirl", "link": "https://stackoverflow.com/users/1959110/galaxigirl"}, "edited": false, "score": 2, "creation_date": 1585837330, "post_id": 56942231, "comment_id": 107908522, "body": "@galaxigirl  <code>findViewById(R.id.viewPagerIdFromLayout).apply {     (getChildAt(0) as? RecyclerView)?.overScrollMode = RecyclerView.OVER_SCROLL_NEVER }</code>"}], "tags": [], "owner": {"reputation": 469, "user_id": 11133395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/90OUn.jpg?s=128&g=1", "display_name": "Daniel Kim", "link": "https://stackoverflow.com/users/11133395/daniel-kim"}, "is_accepted": true, "score": 20, "last_activity_date": 1562618117, "creation_date": 1562618117, "answer_id": 56942231, "question_id": 56878906, "link": "https://stackoverflow.com/questions/56878906/remove-viewpager2-overscroll-animation/56942231#56942231", "title": "Remove ViewPager2 Overscroll animation", "body": "<p>Solution</p>\n\n<pre><code>binding.viewPager2.apply {\n    adapter = vpAdapter\n    orientation = ViewPager2.ORIENTATION_VERTICAL\n    registerOnPageChangeCallback(pageChangeCallback)\n    (getChildAt(0) as RecyclerView).overScrollMode = RecyclerView.OVER_SCROLL_NEVER\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 260, "user_id": 5925091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fd5823c79d15468c1628a5cf42c31f9?s=128&d=identicon&r=PG&f=1", "display_name": "TreyWurm", "link": "https://stackoverflow.com/users/5925091/treywurm"}, "is_accepted": false, "score": 6, "last_activity_date": 1586255644, "creation_date": 1586255644, "answer_id": 61078024, "question_id": 56878906, "link": "https://stackoverflow.com/questions/56878906/remove-viewpager2-overscroll-animation/61078024#61078024", "title": "Remove ViewPager2 Overscroll animation", "body": "<p>In case anyone searching for a Java solution</p>\n\n<pre><code>View child = viewPager2.getChildAt(0);\nif (child instanceof RecyclerView) {\n    child.setOverScrollMode(View.OVER_SCROLL_NEVER);\n}\n</code></pre>\n"}], "owner": {"reputation": 469, "user_id": 11133395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/90OUn.jpg?s=128&g=1", "display_name": "Daniel Kim", "link": "https://stackoverflow.com/users/11133395/daniel-kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2797, "favorite_count": 1, "accepted_answer_id": 56942231, "answer_count": 2, "score": 11, "last_activity_date": 1605309490, "creation_date": 1562195216, "last_edit_date": 1605309490, "question_id": 56878906, "link": "https://stackoverflow.com/questions/56878906/remove-viewpager2-overscroll-animation", "title": "Remove ViewPager2 Overscroll animation", "body": "<p>Can't find a way to remove the ViewPager2 overscroll shadow animation.\nI know on ViewPager, you can directly just set the overscrollMode attribute to never, however, it does not work on ViewPager2</p>\n\n<p>Already tried the following</p>\n\n<pre><code>&lt;androidx.viewpager2.widget.ViewPager2\n        android:id=\"@+id/viewPager\"\n        android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n        android:overScrollMode=\"never\"/&gt;\n</code></pre>\n\n<pre><code>binding.viewPager.apply {\n        adapter = adapter\n        orientation = ViewPager2.ORIENTATION_VERTICAL\n        overScrollMode = ViewPager2.OVER_SCROLL_NEVER\n        offscreenPageLimit = if (containsVideo) 2 else 5\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "parcelable"], "comments": [{"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1562191802, "post_id": 56878498, "comment_id": 100305584, "body": "Since <code>HashMap</code> is <code>Serializable</code>, and since <code>String</code> is <code>Serializable</code>, why do you need/want <code>Parcelable</code>?"}, {"owner": {"reputation": 17444, "user_id": 2069407, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9cf04e8273f7868fedf1fe32e1a5ec4f?s=128&d=identicon&r=PG", "display_name": "s-hunter", "link": "https://stackoverflow.com/users/2069407/s-hunter"}, "reply_to_user": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1562191940, "post_id": 56878498, "comment_id": 100305605, "body": "This is a map object embedded in another object, and the another object need to implement Parcelable, hence this needed to be parcelized."}, {"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1562192130, "post_id": 56878498, "comment_id": 100305637, "body": "Try <code>intent.putExtra(DATA_MAP, data as Parcelable)</code>."}, {"owner": {"reputation": 17444, "user_id": 2069407, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9cf04e8273f7868fedf1fe32e1a5ec4f?s=128&d=identicon&r=PG", "display_name": "s-hunter", "link": "https://stackoverflow.com/users/2069407/s-hunter"}, "reply_to_user": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1562192606, "post_id": 56878498, "comment_id": 100305722, "body": "It compiles by casting it to Parcelable, but the data is not passed to the destination activity, the returned data is null from this <code>val data = intent.extras.getParcelable&lt;DataMap&gt;(DATA_MAP)</code>"}, {"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1562193010, "post_id": 56878498, "comment_id": 100305807, "body": "OK, let&#39;s then back up a step. Why are you passing this complex data structure between activities? <code>Intent</code> extras are for identifiers, flags, and not much more. Why is this not one activity with two fragments (so you no longer are limited by <code>Parcelable</code>) or two activities with a repository (where the second activity gets an identifier to retrieve the cached data from the repository)?"}, {"owner": {"reputation": 17444, "user_id": 2069407, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9cf04e8273f7868fedf1fe32e1a5ec4f?s=128&d=identicon&r=PG", "display_name": "s-hunter", "link": "https://stackoverflow.com/users/2069407/s-hunter"}, "reply_to_user": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1562193666, "post_id": 56878498, "comment_id": 100305965, "body": "right, the current implementation of the app I&#39;m working on does not have the best architecture, and it will require a lot of refactoring/efforts/challenges to just pass an id and have the destination class to get the complete data itself. Is it possible to parcelize a HashMap using Kotlin&#39;s @Parcelize annotation?"}, {"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1562194153, "post_id": 56878498, "comment_id": 100306066, "body": "I would have expected it to work the way that you have it. You might try running a manual test of putting one in a <code>Parcel</code> and trying to get it back out again, to see if that gives you any clues as to what is going on."}], "answers": [{"comments": [{"owner": {"reputation": 17444, "user_id": 2069407, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9cf04e8273f7868fedf1fe32e1a5ec4f?s=128&d=identicon&r=PG", "display_name": "s-hunter", "link": "https://stackoverflow.com/users/2069407/s-hunter"}, "edited": false, "score": 0, "creation_date": 1562261826, "post_id": 56882083, "comment_id": 100331323, "body": "By making the map a field of the DataMap, the destination class is still not able to get the data, complaining <code>java.lang.ClassCastException: java.util.HashMap cannot be cast to android.os.Parcelable</code> on <code>val data = intent.extras.getParcelable&lt;DataMap&gt;(DATA_MAP)</code>"}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "reply_to_user": {"reputation": 17444, "user_id": 2069407, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9cf04e8273f7868fedf1fe32e1a5ec4f?s=128&d=identicon&r=PG", "display_name": "s-hunter", "link": "https://stackoverflow.com/users/2069407/s-hunter"}, "edited": false, "score": 0, "creation_date": 1562263863, "post_id": 56882083, "comment_id": 100331940, "body": "Strange error message, because I don&#39;t see why there should be such a cast in the first place. Sorry, but I can&#39;t say more without actually trying to debug this myself."}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "reply_to_user": {"reputation": 17444, "user_id": 2069407, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9cf04e8273f7868fedf1fe32e1a5ec4f?s=128&d=identicon&r=PG", "display_name": "s-hunter", "link": "https://stackoverflow.com/users/2069407/s-hunter"}, "edited": false, "score": 0, "creation_date": 1562266335, "post_id": 56882083, "comment_id": 100332665, "body": "Actually, try to remove <code>MutableMap by</code> and call <code>data.map.put&#47;get</code> instead of <code>data.put&#47;get</code>. Maybe Android is trying to store it as a <code>Map</code>, then read it into a <code>HashMap</code>."}, {"owner": {"reputation": 17444, "user_id": 2069407, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9cf04e8273f7868fedf1fe32e1a5ec4f?s=128&d=identicon&r=PG", "display_name": "s-hunter", "link": "https://stackoverflow.com/users/2069407/s-hunter"}, "edited": false, "score": 0, "creation_date": 1562334577, "post_id": 56882083, "comment_id": 100353338, "body": "I do need it to be able to use <code>data.put&#47;get</code>, it looks like the destination class can retrieve the <code>DataMap</code> if it is embedded as a field in another object like this: <code>@Parcelize data class Data(val type: String, val map: DataMap) : Parcelable</code>"}], "tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": true, "score": 3, "last_activity_date": 1562334704, "last_edit_date": 1592644375, "creation_date": 1562222869, "answer_id": 56882083, "question_id": 56878498, "link": "https://stackoverflow.com/questions/56878498/how-to-parcelize-a-hashmap-using-kotlins-parcelize/56882083#56882083", "title": "How to Parcelize a HashMap using Kotlin&#39;s Parcelize?", "body": "<p>First, <code>@Parcelize</code> only cares about primary constructor parameters, not about superclass; since you have none, the code it generates won't write or read anything from a <code>Parcel</code>.</p>\n<p>So instead of extending <code>HashMap</code> (which is a bad idea anyway), you should make it a field:</p>\n<pre><code>@Parcelize\nclass DataMap(\n    val map: HashMap&lt;String, String&gt; = hashMapOf()\n) : Parcelable, MutableMap&lt;String, String&gt; by map\n</code></pre>\n<p>The <code>MutableMap&lt;String, String&gt; by map</code> part makes <code>DataMap</code> implement the interface by delegating all calls, so <code>data.put(&quot;a&quot;, &quot;One&quot;)</code> is the same as <code>data.map.put(&quot;a&quot;, &quot;One&quot;)</code>.</p>\n<p>It also doesn't implement <code>Serializable</code> so you won't run into the same overload ambiguity.</p>\n<p>You can see the list of supported types at <a href=\"https://kotlinlang.org/docs/tutorials/android-plugin.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/tutorials/android-plugin.html</a> and it does include <code>HashMap</code>:</p>\n<blockquote>\n<p>collections of all supported types: List (mapped to ArrayList), Set (mapped to LinkedHashSet), Map (mapped to LinkedHashMap);</p>\n<p>Also a number of concrete implementations: ArrayList, LinkedList, SortedSet, NavigableSet, HashSet, LinkedHashSet, TreeSet, SortedMap, NavigableMap, HashMap, LinkedHashMap, TreeMap, ConcurrentHashMap;</p>\n</blockquote>\n"}], "owner": {"reputation": 17444, "user_id": 2069407, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9cf04e8273f7868fedf1fe32e1a5ec4f?s=128&d=identicon&r=PG", "display_name": "s-hunter", "link": "https://stackoverflow.com/users/2069407/s-hunter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1137, "favorite_count": 0, "accepted_answer_id": 56882083, "answer_count": 1, "score": 0, "last_activity_date": 1562334704, "creation_date": 1562191720, "question_id": 56878498, "link": "https://stackoverflow.com/questions/56878498/how-to-parcelize-a-hashmap-using-kotlins-parcelize", "title": "How to Parcelize a HashMap using Kotlin&#39;s Parcelize?", "body": "<p>This is what I have for trying @Parcelize a HashMap</p>\n\n<pre><code>@Parcelize\nclass DataMap : HashMap&lt;String, String&gt;(), Parcelable\n</code></pre>\n\n<p>But it can't even compile with the following code.</p>\n\n<pre><code>val data = DataMap()\ndata.put(\"a\", \"One\")\ndata.put(\"b\", \"Two\")\ndata.put(\"c\", \"Three\")\n\nval intent = Intent(this, DetailActivity::class.java)\nintent.putExtra(DATA_MAP, data)\nstartActivity(intent)\n</code></pre>\n\n<p>It complains at this line <code>intent.putExtra(DATA_MAP, data)</code> with error:</p>\n\n<pre><code>Overload resolution ambiguity. All these functions match.\n\npublic open fun putExtra(name: String!, value: Parcelable!): Intent! defined in android.content.Intent\n\npublic open fun putExtra(name: String!, value: Serializable!): Intent! defined in android.content.Intent\n</code></pre>\n"}, {"tags": ["android", "kotlin", "bluetooth-lowenergy", "altbeacon"], "comments": [{"owner": {"reputation": 58917, "user_id": 1461050, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/c8IhJ.jpg?s=128&g=1", "display_name": "davidgyoung", "link": "https://stackoverflow.com/users/1461050/davidgyoung"}, "edited": false, "score": 0, "creation_date": 1562192426, "post_id": 56878332, "comment_id": 100305694, "body": "What makes you think this statement is true?  &quot;The problem is that the scan doesn&#39;t seem to be stopped properly and then interrupts my connection with devices connecting to the GATT Server&quot;.  The way you show stopping scanning should work.  Debug lines should confirm this."}, {"owner": {"reputation": 41, "user_id": 11729834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb88a868577da7bfbe71a6aa2c46e30b?s=128&d=identicon&r=PG&f=1", "display_name": "SpringHawk", "link": "https://stackoverflow.com/users/11729834/springhawk"}, "reply_to_user": {"reputation": 58917, "user_id": 1461050, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/c8IhJ.jpg?s=128&g=1", "display_name": "davidgyoung", "link": "https://stackoverflow.com/users/1461050/davidgyoung"}, "edited": false, "score": 0, "creation_date": 1562196465, "post_id": 56878332, "comment_id": 100306547, "body": "The reason being this is printed when I call unbind() <b>D/CycledLeScannerForLollipop: Stopping scan D/CycledLeScanner: Destroying D/ScanJob: Scanning stopped</b>  But then further down when I get: <b>D/StartupBroadcastReceiver: onReceive called in startup broadcast receiver D/StartupBroadcastReceiver: Passive background scan callback type: 1     got Android O background scan via intent D/ScanJobScheduler: Scheduling ScanJob to run every 300000 millis D/ScanState: Scan state restore regions: monitored=0 ranged=0 I/CycledLeScanner: Using Android O scanner</b>"}], "answers": [{"tags": [], "owner": {"reputation": 58917, "user_id": 1461050, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/c8IhJ.jpg?s=128&g=1", "display_name": "davidgyoung", "link": "https://stackoverflow.com/users/1461050/davidgyoung"}, "is_accepted": false, "score": 0, "last_activity_date": 1562278841, "creation_date": 1562278841, "answer_id": 56894703, "question_id": 56878332, "link": "https://stackoverflow.com/questions/56878332/altbeacon-library-scanning-in-boundservice-does-not-stop-on-unbind-android-o/56894703#56894703", "title": "AltBeacon Library Scanning in BoundService does not stop on unbind() - Android O", "body": "<p>A few points to clarify what's going on here:</p>\n\n<ul>\n<li>There are two ways to use the Android Beacon Library for background detections on Android 8+:  With scans initiated by the JobScheduler (default) and with an IntentService (only if you make a call to disable the default -- usually done in conjunction with a foreground service).</li>\n<li>When using the JobScheduler, scans run in the background approximately every 15 minutes as allowed by the operating system and does a low latency BLE scan to find all visible beacons.</li>\n<li>In between the 15 minute jobs, if no beacons are visible, the library will also set up an intent-based scan to wake up the library (and your app) to do an extra scan if any beacons appear.  This scan is not started if no regions are ranged or monitored.  If started, it is stopped at the beginning o the next job.</li>\n<li>The log line \"got Android O background scan via intent\" refers to getting a result from the type of scan in the point above.</li>\n</ul>\n\n<p><strong>I suspect there is some library race condition that may leave this intent-based scan turned on in your specific case.  It might fix the problem to not call <code>unbind()</code>, and instead just stop ranging and monitoring as you have done.</strong></p>\n\n<p>If that doesn't work, then if you attach a log excerpt from the time you try to stop the service to the time you get see \"got Android O background scan via intent\", I may be able to help track down the issue.  (Please also let me know the library version number you are using.)</p>\n\n<p>Finally, I should add that I would be surprised if leaving this scan on really \"then interrupts my connection with devices connecting to the GATT Server\".  You may find that this is not the root cause of that problem. </p>\n"}], "owner": {"reputation": 41, "user_id": 11729834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb88a868577da7bfbe71a6aa2c46e30b?s=128&d=identicon&r=PG&f=1", "display_name": "SpringHawk", "link": "https://stackoverflow.com/users/11729834/springhawk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 155, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562278841, "creation_date": 1562190528, "question_id": 56878332, "link": "https://stackoverflow.com/questions/56878332/altbeacon-library-scanning-in-boundservice-does-not-stop-on-unbind-android-o", "title": "AltBeacon Library Scanning in BoundService does not stop on unbind() - Android O", "body": "<p>I am trying to scan for a Beacon and then once I have found it start Advertising a GATT Server from my phone. The problem is that the scan doesn't seem to be stopped properly and then interrupts my connection with devices connecting to the GATT Server.</p>\n\n<p>The first thing I have tried was stopping and unbinding my BeaconScannerService, with the </p>\n\n<pre><code>beaconManager.unbind(this)\n</code></pre>\n\n<p>inside of the onUnbind() and OnStopService().</p>\n\n<p>After this didn't work I tried to unbind the scanner right after finding my beacon:</p>\n\n<pre><code>override fun didRangeBeaconsInRegion(beacons: Collection&lt;Beacon&gt;, region: Region) {\n        if (beacons.isNotEmpty()) {\n            for (beacon in beacons) {\n                if (!listOfBeacons.contains(beacon)) {\n                    listOfBeacons.add(beacon)\n                    sendNotificationFound()\n                    localIntent.putExtra(\"BT_Address\", beacon.bluetoothAddress)\n                    localIntent.putExtra(\"Is_Connected\", true)\n                    LocalBroadcastManager.getInstance(this).sendBroadcast(localIntent)\n                    Log.e(\"BEACON\", \"FOUND ONE \" + beacon.bluetoothAddress)\n                }\n            }\n            Log.e(TAG, \"Stopping Service\")\n            beaconManager.stopRangingBeaconsInRegion(region)\n            beaconManager.removeAllRangeNotifiers()\n            beaconManager.stopMonitoringBeaconsInRegion(region)\n            beaconManager.removeAllMonitorNotifiers()\n            beaconManager.unbind(this)\n            beaconManager.isBound(this)\n            stopSelf()\n        }\n    }\n</code></pre>\n\n<p>I have also enabled the debug option of the BeaconManager, but there is so much going on I have no idea what would be helpful. </p>\n\n<p>In the end I would just like to be able to totally get rid of all beacon scanning after I have discovered my beacon.</p>\n"}, {"tags": ["android", "kotlin", "navigation"], "answers": [{"tags": [], "owner": {"reputation": 2242, "user_id": 2184088, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/6l6Ci.png?s=128&g=1", "display_name": "Juan Mendez", "link": "https://stackoverflow.com/users/2184088/juan-mendez"}, "is_accepted": false, "score": 0, "last_activity_date": 1562381105, "creation_date": 1562381105, "answer_id": 56910842, "question_id": 56878196, "link": "https://stackoverflow.com/questions/56878196/circular-reveal-animation-in-new-navigation-architecture/56910842#56910842", "title": "Circular reveal animation in new Navigation architecture", "body": "<p>So in case you wonder how to retain the previous screen and do a circular reveal animation for the next screen. My solution was to simply add a new fragment. I don't think the <code>Navigation</code> component allows for this type of animation. Earlier I did a shared element transition which worked fine as long as I used a fade in/out transition between the two screens. In that way I was able to retain the previous screen while the shared element transition played out. I am thinking the <code>Navigation</code> component is constantly replacing the following fragment.</p>\n"}], "owner": {"reputation": 2242, "user_id": 2184088, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/6l6Ci.png?s=128&g=1", "display_name": "Juan Mendez", "link": "https://stackoverflow.com/users/2184088/juan-mendez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 642, "favorite_count": 1, "answer_count": 1, "score": 6, "last_activity_date": 1562381105, "creation_date": 1562189563, "last_edit_date": 1562189943, "question_id": 56878196, "link": "https://stackoverflow.com/questions/56878196/circular-reveal-animation-in-new-navigation-architecture", "title": "Circular reveal animation in new Navigation architecture", "body": "<p>I am able to go to my next destination with a circular reveal animation. My only problem is the previous fragment is gone, unless I set a fade out exit transition in my action <code>app:exitAnim=\"@anim/exit_fade_out\"</code>. I wanted to ask if anyone has been able to keep the previous fragment visible while doing the circular revealing.</p>\n\n<p>this is the code for revealing and hiding the new fragment.. so far this works yet I cannot show the previous fragment as its masking the next one</p>\n\n<pre><code>private val maxScreenDimension : Float\nget() {\n    return max(container.width, container.height).toFloat()\n}\n\nprivate fun circularReveal(point: Point) {\n    val viewTreeObserver = container.viewTreeObserver\n    if (viewTreeObserver.isAlive) {\n        viewTreeObserver.addOnGlobalLayoutListener(object : ViewTreeObserver.OnGlobalLayoutListener {\n            override fun onGlobalLayout() {\n                doCircularReveal(point)\n                container.viewTreeObserver.removeOnGlobalLayoutListener(this)\n            }\n        })\n    }\n}\n\nprivate fun doCircularReveal(point: Point) {\n    val initRadius = 0f\n    val finalRadius = maxScreenDimension\n\n    val circularReveal = ViewAnimationUtils.createCircularReveal(\n        container,\n        point.x,\n        point.y,\n        initRadius,\n        finalRadius\n    )\n\n    circularReveal.duration = resources.getInteger(R.integer.circular_animation_out).toLong()\n\n    circularReveal.start()\n}\n\nprivate fun circularHide(point: Point) {\n    val initRadius = maxScreenDimension\n    val finalRadius = 0f\n\n    val circularReveal = ViewAnimationUtils.createCircularReveal(\n        container,\n        point.x,\n        point.y,\n        initRadius,\n        finalRadius\n    )\n\n    circularReveal.duration = resources.getInteger(R.integer.circular_animation_in).toLong()\n    circularReveal.doOnEnd {\n        container.isVisible = false\n        findNavController().popBackStack()\n    }\n\n    circularReveal.start()\n}\n</code></pre>\n"}, {"tags": ["android", "android-studio", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 2231, "user_id": 5499118, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/5a208904f0bcb017ca7ac854070f4b55?s=128&d=identicon&r=PG&f=1", "display_name": "Alexei Martianov", "link": "https://stackoverflow.com/users/5499118/alexei-martianov"}, "is_accepted": false, "score": 0, "last_activity_date": 1568044844, "creation_date": 1568044844, "answer_id": 57857480, "question_id": 56877640, "link": "https://stackoverflow.com/questions/56877640/how-to-send-android-device-to-sleep-or-programmatically-press-the-power-button-w/57857480#57857480", "title": "How to send Android device to sleep or programmatically press the power button with Kotlin?", "body": "<blockquote>\n  <p>In Android (regardless of whether you use Kotlin, Java, whatever) for\n  security reasons it is not possible for an app to make the device\n  sleep, unless your app is a system app provided by the phone\n  manufacturer.</p>\n</blockquote>\n\n<p><a href=\"https://discuss.kotlinlang.org/t/how-to-send-android-device-to-sleep-or-programmatically-press-the-power-button-with-kotlin/13362\" rel=\"nofollow noreferrer\">discuss.kotlinlang.org</a></p>\n"}, {"comments": [{"owner": {"reputation": 2231, "user_id": 5499118, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/5a208904f0bcb017ca7ac854070f4b55?s=128&d=identicon&r=PG&f=1", "display_name": "Alexei Martianov", "link": "https://stackoverflow.com/users/5499118/alexei-martianov"}, "edited": false, "score": 0, "creation_date": 1568199287, "post_id": 57871276, "comment_id": 102196997, "body": "maybe, but from links you provided looks that option is possible for API&lt;21, that is for devices running Android 4 and below."}], "tags": [], "owner": {"reputation": 141, "user_id": 11922231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3a0ee653879ae8bf260d41fcf72508e?s=128&d=identicon&r=PG&f=1", "display_name": "Child Detektiv", "link": "https://stackoverflow.com/users/11922231/child-detektiv"}, "is_accepted": false, "score": 1, "last_activity_date": 1568120048, "creation_date": 1568120048, "answer_id": 57871276, "question_id": 56877640, "link": "https://stackoverflow.com/questions/56877640/how-to-send-android-device-to-sleep-or-programmatically-press-the-power-button-w/57871276#57871276", "title": "How to send Android device to sleep or programmatically press the power button with Kotlin?", "body": "<p>Maybe you still can.  Rather old post here <a href=\"https://forum.xda-developers.com/showthread.php?t=1210421\" rel=\"nofollow noreferrer\">https://forum.xda-developers.com/showthread.php?t=1210421</a> says to use gotosleep function.  There are discussions of problems with it for Java -  see below links,  but maybe for Kotlin it will work. </p>\n\n<p><a href=\"https://stackoverflow.com/questions/28459287/attempting-to-put-android-device-to-sleep-but-the-powermanager-does-not-contain?r=SearchResults\">Attempting to put Android device to sleep, but the PowerManager does not contain a &quot;goToSleep(long) method</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/7507776/android-system-application-device-power-permission-error?r=SearchResults\">Android system application DEVICE_POWER permission error</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/5710971/android-what-permissions-required-to-call-powermanager-gotosleepn-put-device-i\">Android What permissions required to call PowerManager.goToSleep(n) put device in sleep mode?</a></p>\n"}], "owner": {"reputation": 61, "user_id": 8477874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d49cc07bc4df616c55c4cf4057b12327?s=128&d=identicon&r=PG&f=1", "display_name": "technor", "link": "https://stackoverflow.com/users/8477874/technor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1568120048, "creation_date": 1562186411, "question_id": 56877640, "link": "https://stackoverflow.com/questions/56877640/how-to-send-android-device-to-sleep-or-programmatically-press-the-power-button-w", "title": "How to send Android device to sleep or programmatically press the power button with Kotlin?", "body": "<p>How to send Android device to sleep or programmatically press the power button(KEYCODE_POWER) with Kotlin?\nIs it possible?\nSome example?</p>\n\n<p>Thank you advance!</p>\n"}, {"tags": ["android", "kotlin", "paging", "android-databinding", "android-architecture-components"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 9518465, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Max Mustermann", "link": "https://stackoverflow.com/users/9518465/max-mustermann"}, "edited": false, "score": 0, "creation_date": 1562283331, "post_id": 56878227, "comment_id": 100336309, "body": "Thanks for the reply. I will change it if i dont get any response to solve my problem. My solution uses best practices according to Google Developer Course. It would be a shame if a hav to change it."}], "tags": [], "owner": {"reputation": 61, "user_id": 4149651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/410c0caa08722e786b1c303e99a07685?s=128&d=identicon&r=PG&f=1", "display_name": "Emiliano Schiavone", "link": "https://stackoverflow.com/users/4149651/emiliano-schiavone"}, "is_accepted": false, "score": 1, "last_activity_date": 1562189751, "creation_date": 1562189751, "answer_id": 56878227, "question_id": 56877507, "link": "https://stackoverflow.com/questions/56877507/android-paging-library-with-databinding/56878227#56878227", "title": "Android Paging Library with Databinding", "body": "<p>Just in case another kind of solution, I used this example and work</p>\n\n<p><a href=\"https://github.com/sharmadhiraj/AndroidPagingLibraryStepByStepImplementationGuide\" rel=\"nofollow noreferrer\">https://github.com/sharmadhiraj/AndroidPagingLibraryStepByStepImplementationGuide</a></p>\n"}], "owner": {"reputation": 41, "user_id": 9518465, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Max Mustermann", "link": "https://stackoverflow.com/users/9518465/max-mustermann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1564, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1562189751, "creation_date": 1562185633, "last_edit_date": 1562187447, "question_id": 56877507, "link": "https://stackoverflow.com/questions/56877507/android-paging-library-with-databinding", "title": "Android Paging Library with Databinding", "body": "<p>i tried implementing the Android paging library with databinding.\nI am not able to implement it with public existing sources.\nIs it possible to use Paging Library with Databinding and Binding Adapter ?</p>\n\n<p>Project on Github:\n<a href=\"https://github.com/DoomMortal/paging\" rel=\"nofollow noreferrer\">https://github.com/DoomMortal/paging</a></p>\n\n<p>Could anyone look into that ?\nAny help will be appreciated.</p>\n\n<p>My Adapter:</p>\n\n<pre><code>class OverviewAdapter(val onClickListener: OnClickListener) : PagedListAdapter&lt;VideoProperty, OverviewAdapter.ViewHolder&gt;(DiffCallback) {\n\n    class ViewHolder private constructor(private var binding: OverviewItemBinding) : RecyclerView.ViewHolder(binding.root) {\n\n        fun bind(clickListener: OnClickListener, videoProperty: VideoProperty){\n            binding.property = videoProperty\n            binding.clickListener = clickListener\n            binding.executePendingBindings()\n        }\n\n        companion object {\n            fun from(parent: ViewGroup): ViewHolder {\n                val layoutInflater = LayoutInflater.from(parent.context)\n                val binding = OverviewItemBinding.inflate(layoutInflater, parent, false)\n\n                return ViewHolder(binding)\n            }\n        }\n\n    }\n\n    companion object DiffCallback : DiffUtil.ItemCallback&lt;VideoProperty&gt;() {\n        override fun areItemsTheSame(oldItem: VideoProperty, newItem: VideoProperty): Boolean {\n            return oldItem === newItem\n        }\n\n        override fun areContentsTheSame(oldItem: VideoProperty, newItem: VideoProperty): Boolean {\n            return oldItem.videoTableId == newItem.videoTableId\n        }\n    }\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {\n        return ViewHolder.from(parent)\n    }\n\n    override fun onBindViewHolder(holder: ViewHolder, position: Int) {\n\n        when (holder) {\n            is ViewHolder -&gt; {\n                val nightItem = getItem(position) as VideoProperty\n                holder.bind(onClickListener, nightItem)\n            }\n        }\n\n    }\n\n    class OnClickListener(val clicklistener: (videoProperty: VideoProperty) -&gt; Unit) {\n        fun onClick(videoProperty: VideoProperty) = clicklistener(videoProperty)\n    }\n\n}\n</code></pre>\n\n<p>ViewModel:</p>\n\n<pre><code>enum class MarsApiStatus { LOADING, ERROR, DONE }\n\nclass OverviewViewModel : ViewModel() {\n\n    private val TAG = \"OverviewViewModel\"\n\n    private var executor: Executor? = null\n\n    // The internal MutableLiveData String that stores the status of the most recent request\n    private val _status = MutableLiveData&lt;MarsApiStatus&gt;()\n\n    // The external immutable LiveData for the request status String\n    val status: LiveData&lt;MarsApiStatus&gt;\n        get() = _status\n\n    private val _properties = MutableLiveData&lt;VideosOverview&gt;()\n\n    val properties: LiveData&lt;VideosOverview&gt;\n        get() = _properties\n\n    private val _navigateToSelectedProperty = MutableLiveData&lt;VideoProperty&gt;()\n    val navigateToSelectedProperty: LiveData&lt;VideoProperty&gt;\n        get() = _navigateToSelectedProperty\n\n    private var viewModelJob = Job()\n    private val coroutineScope =  CoroutineScope(viewModelJob + Dispatchers.Main)\n\n    //val itemPagedList: LiveData&lt;PagedList&lt;VideosOverview&gt;&gt;\n\n    var itemPagedList: LiveData&lt;PagedList&lt;VideosOverview&gt;&gt;\n    var liveDataSource: LiveData&lt;PageKeyedDataSource&lt;Int, VideosOverview&gt;&gt;? = null\n\n    /**\n     * Call getMarsRealEstateProperties() on init so we can display status immediately.\n     */\n    init {\n        //getMarsRealEstateProperties(VideosOverviewApiFilter.SHOW_POOP)\n\n        executor = Executors.newFixedThreadPool(5)\n\n        val feedDataFactory = ItemDataSourceFactory()\n\n        val pagedListConfig = PagedList.Config.Builder()\n                .setEnablePlaceholders(false)\n                .setPageSize(ItemVideosDataSource.PAGE_SIZE)\n                .build()\n\n        /*_properties.value = LivePagedListBuilder(feedDataFactory, pagedListConfig)\n                .build()*/\n\n\n        liveDataSource = feedDataFactory.getItemLiveDataSource()\n        itemPagedList = LivePagedListBuilder(feedDataFactory, pagedListConfig).build()\n\n    }\n\n    /**\n     * Sets the value of the status LiveData to the VideosOverview API status.\n     */\n    private fun getMarsRealEstateProperties(filter: VideosOverviewApiFilter, page: Long) {\n\n        coroutineScope.launch {\n            //val getPropertiesDeferred =\n                try{\n                    _status.value = MarsApiStatus.LOADING\n                    val listResult = VideosOverviewApi.retrofitService.getProperties(filter.value, page)\n\n                    Log.d(\"CONTENT: \", filter.value.toString())\n                    Log.d(\"CONTENT: \", page.toString())\n                    Log.d(\"CONTENT: \", listResult.items[0].toString())\n\n                    _status.value = MarsApiStatus.DONE\n                    if (listResult.items.size &gt; 0) {\n                        _properties.value = listResult\n                    }\n                } catch (e: Throwable){\n                    Log.d(TAG, e.toString())\n                    _status.value = MarsApiStatus.ERROR\n                    //_properties.value = ArrayList() OLD\n                }\n\n        }\n\n    }\n\n    override fun onCleared() {\n        super.onCleared()\n        viewModelJob.cancel()\n    }\n\n    fun displayPropertyDetails(marsProperty: VideoProperty) {\n        _navigateToSelectedProperty.value = marsProperty\n    }\n\n    fun displayPropertyDetailsComplete() {\n        _navigateToSelectedProperty.value = null\n    }\n\n    fun updateFilter(filter: VideosOverviewApiFilter, page: Long){\n        getMarsRealEstateProperties(filter, page)\n    }\n}\n</code></pre>\n\n<p>DataSource:</p>\n\n<pre><code>class ItemVideosDataSource : PageKeyedDataSource&lt;Long, VideosOverview&gt;() {\n\n    companion object {\n        val FIRST_PAGE: Long = 1\n        val PAGE_SIZE: Int = 50\n    }\n\n    private val TAG = \"ItemVideosDataSource\"\n\n    private var viewModelJob = Job()\n    private val coroutineScope =  CoroutineScope(viewModelJob + Dispatchers.Main)\n\n    override fun loadInitial(params: LoadInitialParams&lt;Long&gt;, callback: LoadInitialCallback&lt;Long, VideosOverview&gt;) {\n        //videos.retrofitService.getProperties(FIRST_PAGE)\n\n        coroutineScope.launch {\n            //val getPropertiesDeferred =\n\n            try{\n                val listResult = VideosOverviewApi.retrofitService.getProperties(1, FIRST_PAGE)\n\n                val lest : MutableList&lt;VideosOverview&gt;? = null\n                lest!!.add(listResult)\n\n\n                if (listResult.items.size &gt; 0) {\n                    callback.onResult(lest, null, FIRST_PAGE + 1)\n                    //_properties.value = listResult\n                }\n            } catch (e: Throwable){\n                Log.d(TAG, e.toString())\n            }\n\n        }\n\n    }\n\n    override fun loadBefore(params: LoadParams&lt;Long&gt;, callback: LoadCallback&lt;Long, VideosOverview&gt;) {\n\n        coroutineScope.launch {\n            //val getPropertiesDeferred =\n\n            try{\n                val listResult = VideosOverviewApi.retrofitService.getProperties(1, FIRST_PAGE)\n\n                val lest : MutableList&lt;VideosOverview&gt;? = null\n                lest!!.add(listResult)\n\n\n                if (listResult.items.size &gt; 0) {\n\n                    val key: Long? = if(params.key &gt; 1) params.key - 1 else null\n\n                    callback.onResult(lest, key)\n                    //_properties.value = listResult\n                }\n            } catch (e: Throwable){\n                Log.d(TAG, e.toString())\n            }\n\n        }\n    }\n\n    override fun loadAfter(params: LoadParams&lt;Long&gt;, callback: LoadCallback&lt;Long, VideosOverview&gt;) {\n\n        coroutineScope.launch {\n            //val getPropertiesDeferred =\n\n            try{\n                val listResult = VideosOverviewApi.retrofitService.getProperties(1, FIRST_PAGE)\n\n                val lest : MutableList&lt;VideosOverview&gt;? = null\n                lest!!.add(listResult)\n\n\n                if (listResult.items.size &gt; 0) {\n\n                    val key: Long? = if(params.key &gt; 1) params.key + 1 else null\n\n                    callback.onResult(lest, key)\n                    //_properties.value = listResult\n                }\n            } catch (e: Throwable){\n                Log.d(TAG, e.toString())\n            }\n\n        }\n\n    }\n\n}\n</code></pre>\n\n<p>Factory method:</p>\n\n<pre><code>class ItemDataSourceFactory : DataSource.Factory&lt;Long, VideosOverview&gt;() {\n\n    //val sourceLiveData = MutableLiveData&lt;ItemVideosDataSource&gt;()\n    private val itemLiveDataSource = MutableLiveData&lt;PageKeyedDataSource&lt;Int, VideosOverview&gt;&gt;()\n\n    override fun create(): DataSource&lt;Long, VideosOverview&gt; {\n\n        //getting our data source object\n        val itemDataSource = ItemVideosDataSource()\n\n        //posting the datasource to get the values\n        //itemLiveDataSource.postValue(itemDataSource)\n\n        //returning the datasource\n        return itemDataSource\n\n    }\n\n    fun getItemLiveDataSource(): MutableLiveData&lt;PageKeyedDataSource&lt;Int, VideosOverview&gt;&gt; {\n        return itemLiveDataSource\n    }\n\n}\n</code></pre>\n\n<p>Layout:</p>\n\n<pre><code>&lt;androidx.recyclerview.widget.RecyclerView\n    android:id=\"@+id/recycler_overview\"\n    android:layout_width=\"0dp\"\n    android:layout_height=\"0dp\"\n    android:clipToPadding=\"false\"\n    app:layoutManager=\"androidx.recyclerview.widget.LinearLayoutManager\"\n    app:layout_constraintBottom_toBottomOf=\"parent\"\n    app:layout_constraintHorizontal_bias=\"1.0\"\n    app:layout_constraintLeft_toLeftOf=\"parent\"\n    app:layout_constraintRight_toRightOf=\"parent\"\n    app:layout_constraintTop_toTopOf=\"parent\"\n    app:layout_constraintVertical_bias=\"0.0\"\n    app:listData=\"@{viewModel.itemPagedList}\"\n    tools:listitem=\"@layout/overview_item\" /&gt;\n</code></pre>\n\n<p>Binding Adapter</p>\n\n<pre><code>@BindingAdapter(\"listData\")\nfun bindRecyclerView(recyclerView: RecyclerView, data: PagedList&lt;VideoProperty&gt;?){\n//fun bindRecyclerView(recyclerView: RecyclerView, data: List&lt;VideoProperty&gt;?){\n    val adapter = recyclerView.adapter as OverviewAdapter\n    adapter.submitList(data)\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "store", "android-room"], "comments": [{"owner": {"reputation": 7065, "user_id": 4017501, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-Mk9ZAlByQdc/AAAAAAAAAAI/AAAAAAAAAD8/TKM32IE8Mxs/photo.jpg?sz=128", "display_name": "cutiko", "link": "https://stackoverflow.com/users/4017501/cutiko"}, "edited": false, "score": 0, "creation_date": 1562252022, "post_id": 56877214, "comment_id": 100327648, "body": "You never fetch from the server because there is not s single htto request in your code you are literally doing transactions against the device database instead of requesting it from an HTTP REST API"}, {"owner": {"reputation": 7065, "user_id": 4017501, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-Mk9ZAlByQdc/AAAAAAAAAAI/AAAAAAAAAD8/TKM32IE8Mxs/photo.jpg?sz=128", "display_name": "cutiko", "link": "https://stackoverflow.com/users/4017501/cutiko"}, "edited": false, "score": 0, "creation_date": 1562252055, "post_id": 56877214, "comment_id": 100327665, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/38390846/how-to-use-retrofit-in-android\">how to use Retrofit in Android?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 447, "user_id": 5828058, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-VMdVYddu5IQ/AAAAAAAAAAI/AAAAAAAAAF0/Uc0ttIS7E88/photo.jpg?sz=128", "display_name": "Michael Gikaru", "link": "https://stackoverflow.com/users/5828058/michael-gikaru"}, "is_accepted": true, "score": 0, "last_activity_date": 1562432648, "creation_date": 1562432648, "answer_id": 56916106, "question_id": 56877214, "link": "https://stackoverflow.com/questions/56877214/having-trouble-fetching-data-using-android-nytimes-store-library/56916106#56916106", "title": "Having trouble fetching data using android nytimes Store library", "body": "<p>I found out the solution to my problem, in my RoomPersister in the write method i was passing blogLocalService.addBlogs(blogList) which returns a <code>Single&lt;List&lt;Blog&gt;&gt;</code> which I forgot to subscribe to. This is what i had previously</p>\n\n<pre><code>val persister = object : RoomPersister&lt;List&lt;Blog&gt;, List&lt;Blog&gt;, BarCode&gt; {\n\n        override fun read(barCode: BarCode): Observable&lt;List&lt;Blog&gt;&gt; {\n            return blogLocalService.fetchAll().toObservable()\n        }\n\n        override fun write(barCode: BarCode, blogList: List&lt;Blog&gt;) {\n            blogLocalService.addBlogs(blogList)\n        }\n    }\n</code></pre>\n\n<p>I wrongly assumed that the Singe>> method would somehow automatically get subscribbed to. This was my final code that worked</p>\n\n<pre><code>val persister = object : RoomPersister&lt;List&lt;Blog&gt;, List&lt;Blog&gt;, BarCode&gt; {\n\n        override fun read(barCode: BarCode): Observable&lt;List&lt;Blog&gt;&gt; {\n            return blogLocalService.fetchAll().toObservable()\n        }\n\n        override fun write(barCode: BarCode, blogList: List&lt;Blog&gt;) {\n            blogLocalService.addBlogs(blogList).\n            .subscribeOn(Schedulers.io())\n                    .observeOn(Schedulers.io())\n                    .subscribe({\n                    Log.d(\"BlogLocalService\",\"successful write to db\")\n                },{\n                    Log.d(\"BlogLocalService\",\"failed to write to db with error: ${it.message}\")\n                })\n        }\n    }\n</code></pre>\n"}], "owner": {"reputation": 447, "user_id": 5828058, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-VMdVYddu5IQ/AAAAAAAAAAI/AAAAAAAAAF0/Uc0ttIS7E88/photo.jpg?sz=128", "display_name": "Michael Gikaru", "link": "https://stackoverflow.com/users/5828058/michael-gikaru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 56916106, "answer_count": 1, "score": 0, "last_activity_date": 1562432648, "creation_date": 1562184235, "last_edit_date": 1562254500, "question_id": 56877214, "link": "https://stackoverflow.com/questions/56877214/having-trouble-fetching-data-using-android-nytimes-store-library", "title": "Having trouble fetching data using android nytimes Store library", "body": "<p>I have the following code, that i'm trying to use to fetch data from an API endpoint using the NyTimes/Store library to cache it</p>\n\n<p>I'm using DI to load my dependencies as follows</p>\n\n<pre><code>  val appModule = module(override = true) {\n        single&lt;MyAppDatabase&gt; {\n            Room.databaseBuilder(androidApplication(), MyAppDatabase::class.java, \"MJiraniRoomDB\")\n                .fallbackToDestructiveMigration()\n                .build()\n        }\n        //DATABASE ACCESS OBJECTS\n        factory&lt;BlogDao&gt; { get&lt;MyAppDatabase&gt;().blogDao() }\n        factory&lt;BlogLocalService&gt; { BlogLocalService(get()) }\n        factory&lt;BlogRemoteService&gt; { BlogRemoteService(get()) }\n        factory&lt;BlogStore&gt; { BlogStore(get(), get()) }\n\n</code></pre>\n\n<p>The service where i use the Store library with RoomStore is here</p>\n\n<pre><code>package com.example.myapplication.service.BlogService\n\nimport com.example.myapplication.model.Blog\nimport com.nytimes.android.external.store3.base.Fetcher\nimport com.nytimes.android.external.store3.base.impl.BarCode\nimport com.nytimes.android.external.store3.base.impl.MemoryPolicy\nimport com.nytimes.android.external.store3.base.impl.StalePolicy\nimport com.nytimes.android.external.store3.base.impl.room.StoreRoom\nimport com.nytimes.android.external.store3.base.room.RoomPersister\nimport io.reactivex.Observable\nimport java.util.concurrent.TimeUnit\n\nclass BlogStore(val blogRemoteService: BlogRemoteService, val blogLocalService: BlogLocalService) {\n\n    var fetcher = Fetcher&lt;List&lt;Blog&gt;, BarCode&gt; {\n        blogRemoteService.fetchBlogs()\n    }\n\n    val persister = object : RoomPersister&lt;List&lt;Blog&gt;, List&lt;Blog&gt;, BarCode&gt; {\n\n        override fun read(barCode: BarCode): Observable&lt;List&lt;Blog&gt;&gt; {\n            return blogLocalService.fetchAll().toObservable()\n        }\n\n        override fun write(barCode: BarCode, blogList: List&lt;Blog&gt;) {\n            blogLocalService.addBlogs(blogList)\n        }\n    }\n\n    var memoryPolicy: MemoryPolicy = MemoryPolicy\n        .builder()\n        .setExpireAfterWrite(5)\n        .setExpireAfterTimeUnit(TimeUnit.SECONDS)\n        .build()\n\n    var store = StoreRoom.from(fetcher, persister, StalePolicy.REFRESH_ON_STALE, memoryPolicy)\n\n    fun getBlogs(): Observable&lt;List&lt;Blog&gt;&gt; {\n        store.clear()\n        return store.fetch(BarCode.empty())\n    }\n}\n</code></pre>\n\n<p>I pull the data to my Recyclerview as follows</p>\n\n<pre><code>class RemotePostsFragment : Fragment() {\n    val scopeProvider by lazy { AndroidLifecycleScopeProvider.from(this) }\n\n    val myBlogStore: BlogStore by inject()\n\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n        super.onViewCreated(view, savedInstanceState)\n\n        var mRecyclerview = view.findViewById&lt;RecyclerView&gt;(R.id.myRemoteViewRecycler)\n\n\n        var theAdapter = MyAdapter()\n       myBlogStore.getBlogs()\n            .subscribeOn(Schedulers.io())\n            .observeOn(AndroidSchedulers.mainThread())\n            .autoDisposable(scopeProvider)\n            .subscribe({ bloglist -&gt;\n                theAdapter.blogItems = bloglist\n            }, {\n                Log.e(\"RemotePostFragment\", \"failed got message ${it.message}\")\n            })\n\n\n        mRecyclerview.adapter = theAdapter\n        mRecyclerview.layoutManager = LinearLayoutManager(this.context)\n    }\n</code></pre>\n\n<p>The problem is that i only load the data from the android room db but its never fetched from the server. When i do the raw query from the server that's used from the fetcher, i'm able to get a List of Blogs. But when i use it in the Fetcher, i'm not able to automatically sync. </p>\n\n<p>My blogRemoteService returns a Single> correctly when tested on its own. What could i be doing wrong?</p>\n"}, {"tags": ["android", "kotlin", "mvvm", "fragment", "viewmodel"], "comments": [{"owner": {"reputation": 2083, "user_id": 10870164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LiN2r.jpg?s=128&g=1", "display_name": "CoffeeBreak", "link": "https://stackoverflow.com/users/10870164/coffeebreak"}, "edited": false, "score": 0, "creation_date": 1562194982, "post_id": 56877181, "comment_id": 100306236, "body": "The most important thing now is to check if the arrays are from the same type, I have found isArrayOf method but it only compares the content of the array instead of the type defined"}], "answers": [{"comments": [{"owner": {"reputation": 2083, "user_id": 10870164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LiN2r.jpg?s=128&g=1", "display_name": "CoffeeBreak", "link": "https://stackoverflow.com/users/10870164/coffeebreak"}, "edited": false, "score": 0, "creation_date": 1562201460, "post_id": 56879132, "comment_id": 100307327, "body": "hi Benjamin, first , thanks so much to take the time to make this awesome answer. Second, since I instantiate my SharedViewModel inside my activity without extending it, how could I do the same as you do here ? Because if I extend your abstract SharedView , I lost all the activity functionallity"}, {"owner": {"reputation": 795, "user_id": 7729375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IvAEh.jpg?s=128&g=1", "display_name": "Benjamin Charais", "link": "https://stackoverflow.com/users/7729375/benjamin-charais"}, "reply_to_user": {"reputation": 2083, "user_id": 10870164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LiN2r.jpg?s=128&g=1", "display_name": "CoffeeBreak", "link": "https://stackoverflow.com/users/10870164/coffeebreak"}, "edited": false, "score": 0, "creation_date": 1562202011, "post_id": 56879132, "comment_id": 100307407, "body": "@CoffeeBreak Ah, I should have been more clear. I am making an edit to my answer. The abstract class would extend the ViewModel -- I removed this in my example so I could quickly test the code I was writing. So if you need to implement ViewModel functionality it would be done in the abstract class SharedView -- Also the class does not specifically need to be abstract, it will work being just a normal class as well"}, {"owner": {"reputation": 2083, "user_id": 10870164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LiN2r.jpg?s=128&g=1", "display_name": "CoffeeBreak", "link": "https://stackoverflow.com/users/10870164/coffeebreak"}, "edited": false, "score": 0, "creation_date": 1562204429, "post_id": 56879132, "comment_id": 100307788, "body": "when you refer to ViewOne and ClassOne, you mean ViewOne, fragment 1 and ClassOne what ?"}, {"owner": {"reputation": 2083, "user_id": 10870164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LiN2r.jpg?s=128&g=1", "display_name": "CoffeeBreak", "link": "https://stackoverflow.com/users/10870164/coffeebreak"}, "edited": false, "score": 0, "creation_date": 1562204458, "post_id": 56879132, "comment_id": 100307791, "body": "remember that I just need to do .setValue(array) from each fragment and in my main view check if those objects are equal"}, {"owner": {"reputation": 795, "user_id": 7729375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IvAEh.jpg?s=128&g=1", "display_name": "Benjamin Charais", "link": "https://stackoverflow.com/users/7729375/benjamin-charais"}, "reply_to_user": {"reputation": 2083, "user_id": 10870164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LiN2r.jpg?s=128&g=1", "display_name": "CoffeeBreak", "link": "https://stackoverflow.com/users/10870164/coffeebreak"}, "edited": false, "score": 0, "creation_date": 1562204684, "post_id": 56879132, "comment_id": 100307818, "body": "I will update my naming to make more sense to your example"}, {"owner": {"reputation": 2083, "user_id": 10870164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LiN2r.jpg?s=128&g=1", "display_name": "CoffeeBreak", "link": "https://stackoverflow.com/users/10870164/coffeebreak"}, "edited": false, "score": 0, "creation_date": 1562206496, "post_id": 56879132, "comment_id": 100308085, "body": "It didnt work , because it does not let me put the xArray::class.java, and if I put the xClass::class.java it works but not working to the addAll method"}, {"owner": {"reputation": 795, "user_id": 7729375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IvAEh.jpg?s=128&g=1", "display_name": "Benjamin Charais", "link": "https://stackoverflow.com/users/7729375/benjamin-charais"}, "reply_to_user": {"reputation": 2083, "user_id": 10870164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LiN2r.jpg?s=128&g=1", "display_name": "CoffeeBreak", "link": "https://stackoverflow.com/users/10870164/coffeebreak"}, "edited": false, "score": 0, "creation_date": 1562207391, "post_id": 56879132, "comment_id": 100308216, "body": "I had a typo with the xArray::class.java, I have fixed that now. What is not working with the addAll? In the scratch file I have it is working. You might have to type cast the array after the check like: xArray.addAll(it as ArrayList&lt;Xclass&gt;)"}], "tags": [], "owner": {"reputation": 795, "user_id": 7729375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IvAEh.jpg?s=128&g=1", "display_name": "Benjamin Charais", "link": "https://stackoverflow.com/users/7729375/benjamin-charais"}, "is_accepted": true, "score": 1, "last_activity_date": 1562207207, "last_edit_date": 1562207207, "creation_date": 1562197671, "answer_id": 56879132, "question_id": 56877181, "link": "https://stackoverflow.com/questions/56877181/how-to-see-if-two-arraylists-are-from-the-same-type/56879132#56879132", "title": "How to see if two ArrayLists are from the same Type", "body": "<p>After some thought, I came up with a simple, but not fail proof method by utilizing a Class Type combined with the generics for full functionality. I believe this will handle your issues with reusability and removing redundant listeners in the way you were hoping.</p>\n\n<pre><code>class SharedViewModel &lt;T&gt; (val listType: Class&lt;T&gt;) : ViewModel() {\n\n    var data: MutableLiveData&lt;ArrayList&lt;T&gt;&gt; = MutableLiveData()\n\n    fun setData(anyData: ArrayList&lt;T&gt;) {\n\n        data.value = anyData\n    }\n\n    inline fun &lt;reified K&gt; isOfInternalType(checkType: Class&lt;K&gt;): Boolean = checkType.typeName == listType.typeName\n}\n</code></pre>\n\n<h2>Set Array Data through viewModel</h2>\n\n<pre><code>class Xclass\nvar xArray = arrayListOf&lt;Xclass&gt;()\n\nval viewModel = (activity as MainActivity).getViewModelInstance()\nif (viewModel.isOfInternalType(Xclass::class.java) {\n    viewModel.setData(Xclass)\n}\n</code></pre>\n\n<h2>Main Activity</h2>\n\n<pre><code>class Xclass\nprivate var xArray = arrayListOf&lt;Xclass&gt;()\n\nonCreate()\n...\n\nviewModel = ViewModelProviders.of(this).get(SharedViewModel::class.java)\nviewModel.getAnyData.observe(this, Observer { data: ArrayList&lt;out Any?&gt; -&gt;\n    if (viewModel.isOfInternalType(Xclass::class.java) {\n        xArray.addAll(it)\n    }\n})\n</code></pre>\n\n<h2>Other Example Uses</h2>\n\n<pre><code>// Examples of use cases outside of initial question\n\nclass ViewOne: SharedView&lt;ClassOne&gt;(ClassOne::class.java)\nval testClass = ViewOne()\n\nViewOne().isOfInternalType(ClassTwo::class.java) // returns false\nViewOne().isOfInternalType(testClass::class.java) // Error: Cannot use captured type as reified parameter\n\nViewOne().isOfInternalType(ClassOne::class.java) // returns true\nViewOne().isOfInternalType(ClassOne().javaClass) // returns true\ntestClass.isOfInternalType(ClassOne::class.java) // returns true\n</code></pre>\n\n<p>What I have done is created an instance of the View's listType expected at instantiation. This needed to be done because classes do not support type reification like an inline function can.\nThis implementation assumes each View will have a static listType... This can be modified to resemble the following:</p>\n\n<pre><code>class SharedViewModel(listType: Class&lt;*&gt;) : ViewModel() {\n    var listType: Class&lt;*&gt; = listType\n    private set(value) {\n        field = value\n    }\n\n    fun setData(anyData: ArrayList&lt;*&gt;) {\n        data.value = anyData\n    }\n\n    fun updateListType(newType: Class&lt;*&gt;) {\n        listType = newType\n    }\n\n    inline fun &lt;reified K&gt; isOfInternalType(checkType: Class&lt;K&gt;): Boolean =\n        checkType.typeName == listType.typeName\n}\n</code></pre>\n\n<h2>Variable type SharedViewModel Examples</h2>\n\n<pre><code>class ViewOne: SharedView(ClassOne::class.java)\n\nval testClass = ViewOne()\n\ntestClass.isOfInternalType(ClassOne::class.java) // returns true\n\ntestClass.updateListType(ClassTwo::class.java)\n\ntestClass.isOfInternalType(ClassOne::class.java)  // returns false now\ntestClass.isOfInternalType(ClassTwo::class.java)  // returns true now\n</code></pre>\n\n<p>With this implementation of the variable typing, you would want to chain your <code>isOfInternalType</code> with the <code>setData</code> so that you ensure your type safety</p>\n\n<p>This should have enough functionality for you to be able to accomplish your architecture goals for this project, please let me know if I've misunderstood anything and can help further.</p>\n"}], "owner": {"reputation": 2083, "user_id": 10870164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LiN2r.jpg?s=128&g=1", "display_name": "CoffeeBreak", "link": "https://stackoverflow.com/users/10870164/coffeebreak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 56879132, "answer_count": 1, "score": 0, "last_activity_date": 1562207207, "creation_date": 1562184052, "question_id": 56877181, "link": "https://stackoverflow.com/questions/56877181/how-to-see-if-two-arraylists-are-from-the-same-type", "title": "How to see if two ArrayLists are from the same Type", "body": "<p>I'm trying to implement the viewmodel observer with generics, doing this I wont need 7 observers since I'm collecting data from 7 different Fragments.</p>\n\n<h2>The goal</h2>\n\n<p>Since this 7 fragments store the data inside different ArrayLists types I made a generic ViewModel class to pass that data to my main Activity (fragments holder)</p>\n\n<h2>SharedViewModel</h2>\n\n<pre><code>class SharedViewModel&lt;T&gt;: ViewModel() {\n\n    var data:MutableLiveData&lt;ArrayList&lt;T&gt;&gt; = MutableLiveData()\n\n    fun setData(anyData:ArrayList&lt;T&gt;){\n        data.value = anyData\n    }\n\n    val getAnyData:LiveData&lt;ArrayList&lt;T&gt;&gt;\n    get() = data\n\n}\n</code></pre>\n\n<p>Doing this, I just set any array data type inside each fragment</p>\n\n<pre><code>  (activity as MainActivity).getViewModelInstance().setData(xArray)\n</code></pre>\n\n<p>And in my MainActivity I want to check if that xArray data type is the same type as the one declared globally at MainActivity, if they are equal it should assing the current array data values to the new empty array</p>\n\n<h2>MainActivity</h2>\n\n<pre><code>private var xArray = arrayListOf&lt;Xclass&gt;()\n\n    onCreate()\n    ...\n\n     viewModel = ViewModelProviders.of(this).get(SharedViewModel::class.java)\n            viewModel.getAnyData.observe(this, Observer { it:ArrayList&lt;out Any?&gt;\n                if(it == xArray){\n                    xArray.addAll(it)\n                }\n            })\n</code></pre>\n\n<h2>The purpose</h2>\n\n<p>If I do this, I prevent doing 7 observers in my MainActivity for each fragment and just update one observer with different array types, comparing them and reasigning them will be much less code and easier for me for the architecture.</p>\n\n<h2>The problems</h2>\n\n<p>There are two problems</p>\n\n<ul>\n<li>The first one as mentioned, is just how to compare the current ArrayList got by the observer in my MainActivity to the array that I declared. They should check if both, <strong>it</strong> and <strong>xArray</strong> are <code>ArrayLists</code> of the same type</li>\n<li><p>Second error is this</p>\n\n<p>(activity as MainActivity).getViewModelInstance().setData(xArray)</p></li>\n</ul>\n\n<p>At <code>.setData(xArray)</code> its highlighted red saying <code>Required: Nothing, Found:ArrayList&lt;Xclass&gt;</code>. Thats weird because the setData of SharedViewModel needs Any ArrayList to be passed.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["spring-mvc", "kotlin", "junit5"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 1, "creation_date": 1562183999, "post_id": 56877121, "comment_id": 100302890, "body": "You&#39;re mixing JUnit 4 and JUnit 5 types (Test is from JUnit 4, but ExtendWith is from JUnit 5)."}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1562184135, "post_id": 56877121, "comment_id": 100302949, "body": "Note that with JUnit5, you don&#39;t need ExtendWith(SpringExtension::class) in addition to WebMvcTest, because WebMvcTest is already meta-annotated with ExtendWith(SpringExtension::class)"}, {"owner": {"reputation": 93, "user_id": 11659652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db630bb1993a5e4975ddcb43adc03ded?s=128&d=identicon&r=PG&f=1", "display_name": "samasoul&#233;", "link": "https://stackoverflow.com/users/11659652/samasoul%c3%a9"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1562275516, "post_id": 56877121, "comment_id": 100334951, "body": "Thank you, didn&#39;t noticed that!"}], "answers": [{"comments": [{"owner": {"reputation": 26172, "user_id": 49746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IAAg.jpg?s=128&g=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/49746/todd"}, "edited": false, "score": 0, "creation_date": 1562184087, "post_id": 56877169, "comment_id": 100302928, "body": "And as @JBNizet mentions above, make sure you use the Junit5 <code>@Test</code> annotation if you are writing JUnit5 tests (change your import)."}, {"owner": {"reputation": 93, "user_id": 11659652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db630bb1993a5e4975ddcb43adc03ded?s=128&d=identicon&r=PG&f=1", "display_name": "samasoul&#233;", "link": "https://stackoverflow.com/users/11659652/samasoul%c3%a9"}, "edited": false, "score": 0, "creation_date": 1562275529, "post_id": 56877169, "comment_id": 100334956, "body": "Thank you, i&#39;ll try this one. Can&#39;t I just use <code>@WebMvcTest</code> by itself ? Shouldn&#39;t it configure automatically and inject an instance of <code>MockMvc</code> ?"}], "tags": [], "owner": {"reputation": 26172, "user_id": 49746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IAAg.jpg?s=128&g=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/49746/todd"}, "is_accepted": false, "score": 1, "last_activity_date": 1562184415, "last_edit_date": 1562184415, "creation_date": 1562183985, "answer_id": 56877169, "question_id": 56877121, "link": "https://stackoverflow.com/questions/56877121/how-to-autowire-mockmvc-bean-correctly/56877169#56877169", "title": "How to autowire MockMvc bean correctly", "body": "<p>I inject the <code>WebApplicationContext</code> and then build a new <code>MockMvc</code> for each test from that.</p>\n\n<pre><code>@SpringBootTest\nclass SomeTest {\n\n    @Autowired\n    lateinit var webApplicationContext: WebApplicationContext\n    lateinit var mockMvc: MockMvc\n\n    @BeforeEach\n    fun beforeEach() {\n        mockMvc = MockMvcBuilders.webAppContextSetup(webApplicationContext).build()\n    }\n\n    // Tests go here!\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93, "user_id": 11659652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db630bb1993a5e4975ddcb43adc03ded?s=128&d=identicon&r=PG&f=1", "display_name": "samasoul&#233;", "link": "https://stackoverflow.com/users/11659652/samasoul%c3%a9"}, "is_accepted": true, "score": 1, "last_activity_date": 1589126986, "creation_date": 1589126986, "answer_id": 61714993, "question_id": 56877121, "link": "https://stackoverflow.com/questions/56877121/how-to-autowire-mockmvc-bean-correctly/61714993#61714993", "title": "How to autowire MockMvc bean correctly", "body": "<p>thanks for the answers, I put the working answer in Java with Spring Boot 2.2.6:</p>\n\n<p><strong>AuthorController.class</strong></p>\n\n<pre><code>import org.springframework.web.bind.annotation.*;\n\n@RestController\n@RequestMapping(path = \"/authors\")\n\npublic class AuthorController {\n    @GetMapping(\"/health\")\n    public boolean healthcheck() {\n        return true;\n    }\n}\n</code></pre>\n\n<p><strong>AuthorControllerIT.class</strong></p>\n\n<pre><code>import org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.test.web.servlet.MockMvc;\nimport org.springframework.test.web.servlet.request.MockMvcRequestBuilders;\nimport org.springframework.test.web.servlet.result.MockMvcResultHandlers;\nimport org.springframework.test.web.servlet.result.MockMvcResultMatchers;\n\n@SpringBootTest\n@AutoConfigureMockMvc\nclass AuthorControllerIT {\n\n    @Autowired\n    private MockMvc mockMvc;\n\n    @Test\n    public void test_web_layer() throws Exception {\n        mockMvc.perform(MockMvcRequestBuilders.get(\"/authors/health\"))\n                .andDo(MockMvcResultHandlers.print())\n                .andExpect(MockMvcResultMatchers.status().isOk())\n                .andExpect(MockMvcResultMatchers.content().string(\"true\"));\n    }\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Note :</strong>\nYou can use <code>@WebMvcTest(AuthorController.class)</code> instead of <code>@SpringBootTest</code> + <code>AutoConfigureMockMvc</code></p>\n\n<p>With this annotation, it will only <strong>load the web layer</strong>.\nIf you have dependencies in your controller (services, repositories...) you must use :</p>\n\n<pre><code>@MockBean\nprivate MyService service;\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 11659652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db630bb1993a5e4975ddcb43adc03ded?s=128&d=identicon&r=PG&f=1", "display_name": "samasoul&#233;", "link": "https://stackoverflow.com/users/11659652/samasoul%c3%a9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1410, "favorite_count": 0, "accepted_answer_id": 61714993, "answer_count": 2, "score": 2, "last_activity_date": 1589126986, "creation_date": 1562183761, "question_id": 56877121, "link": "https://stackoverflow.com/questions/56877121/how-to-autowire-mockmvc-bean-correctly", "title": "How to autowire MockMvc bean correctly", "body": "<p>I have a bit of trouble with this.</p>\n\n<p>I'm trying to test the web layer of my Spring boot app (with JUnit5).<br>\nI'm using the <code>@WebMvcTest(NoteController::class)</code> to allow me to autowire <code>MockMvc</code> in order to mock requests.</p>\n\n<p>But I get the below error :<br>\n<code>kotlin.UninitializedPropertyAccessException: lateinit property mvc has not been initialized</code></p>\n\n<p><strong>NoteControllerTest</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>import org.hamcrest.Matchers.`is`\nimport org.junit.Test\nimport org.junit.jupiter.api.extension.ExtendWith\nimport org.springframework.beans.factory.annotation.Autowired\nimport org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTest\nimport org.springframework.http.MediaType\nimport org.springframework.test.context.junit.jupiter.SpringExtension\nimport org.springframework.test.web.servlet.MockMvc\nimport org.springframework.test.web.servlet.request.MockMvcRequestBuilders.post\nimport org.springframework.test.web.servlet.result.MockMvcResultMatchers.*\n\n@ExtendWith(SpringExtension::class)\n@WebMvcTest(NoteController::class)\nclass NoteControllerTest {\n\n    @Autowired\n    private lateinit var mvc: MockMvc\n\n    @Test\n    fun should_create_a_note() {\n        mvc.perform(\n                post(\"/notes\"))\n                .andExpect(status().isCreated)\n                .andExpect(content().contentType(MediaType.APPLICATION_JSON_UTF8))\n                .andExpect(jsonPath(\"$.content\", `is`(\"my content\")))\n    }\n}\n</code></pre>\n\n<p><strong>NoteController</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>import fr.$$.$$.api.CreateNote\nimport fr.$$.$$.api.FetchNote\nimport fr.$$.$$.resources.Note\nimport fr.$$.$$.resources.toResource\nimport org.springframework.http.HttpStatus\nimport org.springframework.http.ResponseEntity\nimport org.springframework.web.bind.annotation.GetMapping\nimport org.springframework.web.bind.annotation.PostMapping\nimport org.springframework.web.bind.annotation.RestController\nimport java.net.URI\n\n@RestController(\"/notes\")\nclass NoteController(val createNote: CreateNote,\n                     val fetchNote: FetchNote) {\n\n    @GetMapping\n    fun getAllNotes(): ResponseEntity&lt;List&lt;Note&gt;&gt; {\n        return ResponseEntity(fetchNote.all().toResource(), HttpStatus.OK)\n    }\n\n    @PostMapping\n    fun createNote(): ResponseEntity&lt;Note&gt; {\n        val note = createNote.with(\"my content\").toResource()\n        return ResponseEntity.created(URI(\"\")).body(note)\n    }\n}\n</code></pre>\n\n<p><strong>SmartNotesApplicationTest</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>import org.junit.Test\nimport org.junit.jupiter.api.extension.ExtendWith\nimport org.springframework.boot.test.context.SpringBootTest\nimport org.springframework.boot.test.context.SpringBootTest.WebEnvironment.RANDOM_PORT\nimport org.springframework.test.context.junit.jupiter.SpringExtension\n\n@ExtendWith(SpringExtension::class)\n@SpringBootTest(webEnvironment = RANDOM_PORT)\nclass SmartNotesApplicationTest {\n\n    @Test\n    fun contextLoad() {\n\n    }\n}\n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["java", "android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 10692728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78d6ada9be77d83c906c5b81d4480605?s=128&d=identicon&r=PG&f=1", "display_name": "Logan Mack", "link": "https://stackoverflow.com/users/10692728/logan-mack"}, "is_accepted": false, "score": 0, "last_activity_date": 1562251165, "creation_date": 1562251165, "answer_id": 56890207, "question_id": 56877093, "link": "https://stackoverflow.com/questions/56877093/unable-to-select-text-in-custom-edittext-subclass/56890207#56890207", "title": "Unable to select text in custom EditText subclass", "body": "<p>It turns out the issue was that I was setting the hint to null before calling super.onDraw(), then resetting it to its previous value. I ended up just creating a separate field to store the floating label and that fixed it for me.</p>\n"}], "owner": {"reputation": 11, "user_id": 10692728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78d6ada9be77d83c906c5b81d4480605?s=128&d=identicon&r=PG&f=1", "display_name": "Logan Mack", "link": "https://stackoverflow.com/users/10692728/logan-mack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562251165, "creation_date": 1562183608, "question_id": 56877093, "link": "https://stackoverflow.com/questions/56877093/unable-to-select-text-in-custom-edittext-subclass", "title": "Unable to select text in custom EditText subclass", "body": "<p>I'm trying to create my own subclass of EditText, but I ran into issues where I lost a lot of functionality that the original EditText had and I'm not sure why. The EditText doesn't respond to long presses, and the cursor can't be moved backward without using backspace. The keyboard was also not opening when the EditText was selected, but I was able to find a workaround for that problem using the InputMethodManager.</p>\n\n<p>Here's the code for my EditText class:</p>\n\n<pre><code>import android.content.Context\nimport android.graphics.Canvas\nimport android.graphics.Paint\nimport android.util.AttributeSet\nimport android.widget.EditText\nimport android.animation.ObjectAnimator\nimport android.text.*\nimport android.util.Log\nimport androidx.core.content.ContextCompat\nimport android.view.KeyEvent\nimport com.changeroom.android.R\nimport android.util.TypedValue\nimport android.view.inputmethod.InputMethodManager\nimport android.view.inputmethod.InputMethodManager.SHOW_IMPLICIT\nimport kotlin.math.roundToInt\n\n\nclass FloatingHintEditText : EditText {\n\n    //controls whether or not hints are displayed in all caps\n    private var hintCaps = false\n\n    //how much space to leave at bottom of edittext\n    private val bottomSpacing = resources.getDimensionPixelSize(R.dimen.inner_components_spacing)\n\n    //controls the color of error message text\n    private var errorColor = ContextCompat.getColor(context, R.color.errorRed)\n\n    //controls the size of the error message\n    private val bottomTextSize = 0.75f\n\n    //stores the text to go underneath\n    var bottomText: CharSequence? = null\n        private set\n\n    //controls the style of the floating hint\n    private val hintPaint = Paint().apply {\n        this.color = (this@FloatingHintEditText).currentHintTextColor\n        this.textSize = (this@FloatingHintEditText).textSize\n        this.typeface = (this@FloatingHintEditText).typeface\n        this.strokeWidth = 2f\n    }\n\n    //controls the style of the bottom text\n    private val bottomTextPaint = TextPaint().apply {\n        this.color = errorColor\n        this.textSize = (this@FloatingHintEditText).textSize * 0.75f\n        this.typeface = (this@FloatingHintEditText).typeface\n    }\n\n    //stores whether the text is a password field\n    private var isPassword =\n        inputType and InputType.TYPE_NUMBER_VARIATION_PASSWORD == InputType.TYPE_NUMBER_VARIATION_PASSWORD\n                || inputType and InputType.TYPE_TEXT_VARIATION_PASSWORD == InputType.TYPE_TEXT_VARIATION_PASSWORD\n                || inputType and InputType.TYPE_TEXT_VARIATION_WEB_PASSWORD == InputType.TYPE_TEXT_VARIATION_WEB_PASSWORD\n\n\n    //stores values for animating\n    private val errorAnimDuration = 100L\n    private val focusAnimDuration = 100L\n    var floatingLabelFraction = 1f\n    var hintSize = 1f\n    var mainColorController = currentHintTextColor\n    var errorHeight = 1f\n    private val errorFocusAnimator = ObjectAnimator.ofFloat(this, \"errorHeight\", 1f, 0f).apply {\n        duration = errorAnimDuration\n    }\n    private val labelFocusAnimator = ObjectAnimator.ofFloat(this, \"floatingLabelFraction\", 1f, 0f).apply {\n        duration = focusAnimDuration\n    }\n    private val labelSizeAnimator = ObjectAnimator.ofFloat(this, \"hintSize\", 1f, 0.75f).apply {\n        duration = focusAnimDuration\n    }\n\n    constructor(context: Context) : super(context)\n    constructor(context: Context, attrs: AttributeSet) : super(context, attrs) {\n        initializeAttrs(attrs)\n    }\n    constructor(context: Context, attrs: AttributeSet, defStyleAttr: Int) : super(context, attrs, defStyleAttr) {\n        initializeAttrs(attrs)\n    }\n\n    private fun initializeAttrs(attrs: AttributeSet) {\n        context.theme.obtainStyledAttributes(\n            attrs,\n            R.styleable.FloatingHintEditText,\n            0, 0).apply {\n\n            try {\n                errorColor = getColor(\n                    R.styleable.FloatingHintEditText_errorColor, ContextCompat.getColor(context,\n                        R.color.errorRed\n                    ))\n                highlightColor = getColor(\n                    R.styleable.FloatingHintEditText_highlightColor, ContextCompat.getColor(context,\n                        R.color.colorAccent\n                    ))\n                hintCaps = getBoolean(\n                    R.styleable.FloatingHintEditText_hintCaps, false\n                )\n            } finally {\n                bottomTextPaint.color = errorColor\n                recycle()\n            }\n        }\n    }\n\n    init {\n        setPadding(paddingLeft, paddingTop, paddingRight, getPixel(8) + paddingBottom)\n\n        setOnFocusChangeListener { _, _ -&gt;\n            val imm = context.getSystemService(Context.INPUT_METHOD_SERVICE) as InputMethodManager?\n            imm!!.showSoftInput(this, SHOW_IMPLICIT)\n            if (text.isNotEmpty() || bottomText != null) {\n                //do nothing\n            }\n            else if (isFocused) {\n                labelSizeAnimator.start()\n                labelFocusAnimator.start()\n            } else {\n                labelSizeAnimator.reverse()\n                labelFocusAnimator.reverse()\n            }\n\n            if (isFocused &amp;&amp; bottomText == null) {\n                mainColorController = highlightColor\n            }\n            else if (bottomText == null) {\n                mainColorController = currentHintTextColor\n            }\n        }\n    }\n\n    override fun onDraw(canvas: Canvas?) {\n\n        val startX = scrollX + paddingStart\n        val endX = width + scrollX - paddingEnd\n\n        //draw the bottom text (if there is any)\n        if (bottomText != null) {\n            bottomTextPaint.textSize = textSize * bottomTextSize\n            bottomTextPaint.color = mainColorController\n\n            //calculate the position of the bottom message\n            val bottomTextStartX = if (layoutDirection == LAYOUT_DIRECTION_RTL) endX else startX\n            val bottomTextStartY = height.toFloat() - errorHeight * textSize * bottomTextSize / 3 - textSize * bottomTextSize / 3\n\n            //draw the bottom message\n            canvas?.drawText(bottomText.toString(), bottomTextStartX.toFloat(), bottomTextStartY, bottomTextPaint)\n        }\n\n        //set hint/underline colour\n        hintPaint.color = mainColorController\n\n        //draw the underline\n        val underlineY = height.toFloat() - textSize * bottomTextSize - bottomSpacing\n        canvas?.drawLine(startX.toFloat(), underlineY, endX.toFloat(), underlineY, hintPaint)\n\n        hintPaint.textSize = textSize * hintSize\n\n        val hintText = if (hintCaps) hint?.toString()?.toUpperCase() ?: \"\" else hint?.toString() ?: \"\"\n\n        // calculate the position of the floating hint\n        val floatingLabelStartX: Float = if (layoutDirection == LAYOUT_DIRECTION_RTL) endX.toFloat() else startX.toFloat()\n        val floatingLabelStartY = (height / 2) * floatingLabelFraction + (textSize * hintSize) * (1 - floatingLabelFraction) + scrollY\n\n        //draw the hint\n        canvas?.drawText(hintText, floatingLabelStartX, floatingLabelStartY, hintPaint)\n\n        // makes EditText not draw hint\n        val tempHint = hint\n        hint = null\n        super.onDraw(canvas)\n        hint = tempHint\n    }\n\n    override fun onMeasure(widthMeasureSpec: Int, heightMeasureSpec: Int) {\n        super.onMeasure(widthMeasureSpec, heightMeasureSpec)\n        val width = measuredWidth\n        val height = measuredHeight + textSize * 2.2\n        setMeasuredDimension(width, height.toInt())\n    }\n\n    fun setBottomText(msg: CharSequence?, isError: Boolean) {\n        bottomText = msg\n        if (isError) {\n            if (!isFocused &amp;&amp; text?.isEmpty() == true &amp;&amp; bottomText != null) {\n                labelSizeAnimator.start()\n                labelFocusAnimator.start()\n            } else if (text?.isEmpty() == true &amp;&amp; !isFocused) {\n                labelSizeAnimator.reverse()\n                labelFocusAnimator.reverse()\n            }\n            if (bottomText != null) {\n                val errorColorAnimator = ObjectAnimator.ofArgb(\n                    this, \"mainColorController\",\n                    mainColorController, errorColor\n                ).apply {\n                    duration = errorAnimDuration\n                }\n                errorColorAnimator.start()\n                errorFocusAnimator.start()\n            } else {\n                val reverseErrorColourAnimator = ObjectAnimator.ofArgb(\n                    this, \"mainColorController\",\n                    if (isFocused) highlightColor else currentHintTextColor\n                ).apply {\n                    duration = errorAnimDuration\n                }\n                reverseErrorColourAnimator.start()\n            }\n        }\n        else {\n            mainColorController = currentHintTextColor\n        }\n    }\n\n\n    override fun onKeyPreIme(keyCode: Int, event: KeyEvent): Boolean {\n        if (event.keyCode == KeyEvent.KEYCODE_BACK){\n            this.clearFocus()\n        }\n        return super.onKeyPreIme(keyCode, event)\n    }\n\n    private fun getPixel(dp: Int): Int {\n        val r = context.resources\n        val px = TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, dp.toFloat(), r.displayMetrics)\n        return px.roundToInt()\n    }\n}\n</code></pre>\n\n<p>Any help would be appreciated.</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 9439, "user_id": 1224741, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5ADEO.jpg?s=128&g=1", "display_name": "QED", "link": "https://stackoverflow.com/users/1224741/qed"}, "edited": false, "score": 0, "creation_date": 1562189274, "post_id": 56877754, "comment_id": 100304869, "body": "I am developing but Android Studio is not developing a multiplatform class. Most of my work up to now has been in <code>vi</code>, but I decided to work in AS for a little for the syntax completion, etc. Your suggestion looks good - I didn&#39;t know about <code>::class</code>. Thanks!"}], "tags": [], "owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "is_accepted": true, "score": 3, "last_activity_date": 1562187028, "creation_date": 1562187028, "answer_id": 56877754, "question_id": 56876869, "link": "https://stackoverflow.com/questions/56876869/what-is-the-pure-kotlin-alternative-to-javaclass/56877754#56877754", "title": "What is the pure Kotlin alternative to &#39;javaClass&#39;?", "body": "<p>What you did is not safe. The reason Android Studio generated this code, is because you're not developing a multiplatform project, actually.</p>\n\n<p>Multiplatform version would look like this:</p>\n\n<pre><code>override fun equals(other: Any?): Boolean {\n    if (this === other) return true\n    if (other == null || this::class != other::class) return false\n    return true\n}\n</code></pre>\n\n<p>If your goal is to have a platform-agnostic library, develop it as multiplatform project, and put most of your code under <code>common</code> module.</p>\n"}], "owner": {"reputation": 9439, "user_id": 1224741, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5ADEO.jpg?s=128&g=1", "display_name": "QED", "link": "https://stackoverflow.com/users/1224741/qed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 56877754, "answer_count": 1, "score": 0, "last_activity_date": 1562187028, "creation_date": 1562182434, "last_edit_date": 1562186058, "question_id": 56876869, "link": "https://stackoverflow.com/questions/56876869/what-is-the-pure-kotlin-alternative-to-javaclass", "title": "What is the pure Kotlin alternative to &#39;javaClass&#39;?", "body": "<p>I'm implementing a pure Kotlin library that I will be releasing under an open source license. In my library I have, say, <code>class A</code>, in which I want to override <code>equals()</code>. I used Android Studio's auto-generator to do this, but it included a reference to <code>javaClass</code>:</p>\n\n<pre><code>override fun equals(other: Any?): Boolean {\n   if (this === other) return true\n   if (javaClass != other?.javaClass) return false\n   other as A\n   ...\n}\n</code></pre>\n\n<p>Is this reference safe to use in a pure Kotlin library? What will be the effect if somebody used my library to target, say, JavaScript? Is there a pure-Kotlin alternative to <code>javaClass</code>? I'd like to avoid something like</p>\n\n<pre><code>if (other !is A) ...\n</code></pre>\n\n<p>because I don't want subclasses of A to register.</p>\n"}, {"tags": ["arrays", "kotlin", "equality", "kotlin-experimental"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1562180502, "post_id": 56876428, "comment_id": 100301528, "body": "What happens when you test it? <a href=\"https://play.kotlinlang.org/#eyJ2ZXJzaW9uIjoiMS4zLjQwIiwicGxhdGZvcm0iOiJqYXZhIiwiYXJncyI6IiIsImpzQ29kZSI6IiIsIm5vbmVNYXJrZXJzIjp0cnVlLCJ0aGVtZSI6ImlkZWEiLCJmb2xkZWRCdXR0b24iOnRydWUsInJlYWRPbmx5IjpmYWxzZSwiY29kZSI6ImZ1biBtYWluKCkge1xuICAgIHZhbCBhID0gVUJ5dGVBcnJheSgxKVxuICAgIGFbMF0gPSA1dVxuICAgIHZhbCBiID0gVUJ5dGVBcnJheSgxKVxuICAgIGJbMF0gPSA1dVxuXG4gICAgaWYgKGEgPT0gYikgcHJpbnRsbihcIlRoZSBzYW1lIHN0dWZmXCIpIGVsc2UgcHJpbnRsbihcIk5PVCB0aGUgc2FtZSBzdHVmZlwiKVxufSJ9\" rel=\"nofollow noreferrer\">play.kotlinlang.org/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": true, "score": 1, "last_activity_date": 1562279948, "last_edit_date": 1562279948, "creation_date": 1562272692, "answer_id": 56894007, "question_id": 56876428, "link": "https://stackoverflow.com/questions/56876428/ubytearray-equality-operator/56894007#56894007", "title": "UByteArray equality operator", "body": "<p><code>UByteArray</code> and other arrays of unsigned types have their equality operation defined so that it is consistent with the equality of signed type arrays, hence two UByteArrays are equal only when they refer to the same instance.</p>\n\n<p>The structural equality of two UByteArrays can be found with the extension function <code>contentEquals</code>, same as for the signed arrays:</p>\n\n<pre><code>val ubyteArray1 = ubyteArrayOf(1u, 2u, 3u)\nval ubyteArray2 = ubyteArrayOf(1u, 2u, 3u)\nprintln(ubyteArray1 contentEquals ubyteArray2)\n</code></pre>\n"}], "owner": {"reputation": 9439, "user_id": 1224741, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5ADEO.jpg?s=128&g=1", "display_name": "QED", "link": "https://stackoverflow.com/users/1224741/qed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 56894007, "answer_count": 1, "score": -2, "last_activity_date": 1563374982, "creation_date": 1562180240, "last_edit_date": 1563374982, "question_id": 56876428, "link": "https://stackoverflow.com/questions/56876428/ubytearray-equality-operator", "title": "UByteArray equality operator", "body": "<p>In Kotlin code I have two <code>UByteArray</code> objects, and I want to know if they have the same stuff in them:</p>\n\n<pre><code>val a : UByteArray = get()\nval b : UByteArray = get()\n\nif (a == b) println(\"The same stuff\")\n</code></pre>\n\n<p>Is the equality operator sufficient, or do I have to compare the two byte for byte? </p>\n"}, {"tags": ["spring", "kotlin", "kotlin-coroutines"], "comments": [{"owner": {"reputation": 367, "user_id": 7138404, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8tJlYo0VVFI/AAAAAAAAAAI/AAAAAAAAAEo/-uQBDt6--VU/photo.jpg?sz=128", "display_name": "Vados", "link": "https://stackoverflow.com/users/7138404/vados"}, "edited": false, "score": 0, "creation_date": 1567672429, "post_id": 56876253, "comment_id": 102034939, "body": "Have you found a solution?"}, {"owner": {"reputation": 63, "user_id": 2392995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a678a326b2bab39d244268942b5df88?s=128&d=identicon&r=PG", "display_name": "Mikhail Kadysev", "link": "https://stackoverflow.com/users/2392995/mikhail-kadysev"}, "reply_to_user": {"reputation": 367, "user_id": 7138404, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8tJlYo0VVFI/AAAAAAAAAAI/AAAAAAAAAEo/-uQBDt6--VU/photo.jpg?sz=128", "display_name": "Vados", "link": "https://stackoverflow.com/users/7138404/vados"}, "edited": false, "score": 0, "creation_date": 1568569142, "post_id": 56876253, "comment_id": 102306527, "body": "Nope. It&#39;s look like Spring Boot Milestote release bug. I&#39;ve decide to wait release of 2.2."}], "owner": {"reputation": 63, "user_id": 2392995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a678a326b2bab39d244268942b5df88?s=128&d=identicon&r=PG", "display_name": "Mikhail Kadysev", "link": "https://stackoverflow.com/users/2392995/mikhail-kadysev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 400, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1562179407, "creation_date": 1562179407, "question_id": 56876253, "link": "https://stackoverflow.com/questions/56876253/whats-wrong-with-coroutine-context", "title": "What&#39;s wrong with coroutine context?", "body": "<p>I'am trying to use new Spring 5.2 feature - integration with kotlin coroutines, but in runtime I always has an NPE. This is example:</p>\n\n<pre><code>  @RestController\n  class SomeController() {\n\n      val webClient = WebClient.builder()\n        .baseUrl(\"https://www.google.com\")\n        .build()\n\n      @GetMapping\n      suspend fun get(): String? {\n          return webClient\n              .get()\n              .awaitExchange()\n              .awaitBody()\n      }\n  }\n</code></pre>\n\n<p>and NPE on <em>.awaitExchange()</em>:</p>\n\n<pre><code>kotlin.KotlinNullPointerException: null\n    at kotlin.coroutines.jvm.internal.ContinuationImpl.getContext(ContinuationImpl.kt:105) ~[kotlin-stdlib-1.3.40.jar:1.3.40-release-123 (1.3.40)]\n    at kotlin.coroutines.jvm.internal.ContinuationImpl.&lt;init&gt;(ContinuationImpl.kt:102) ~[kotlin-stdlib-1.3.40.jar:1.3.40-release-123 (1.3.40)]\n    at org.springframework.web.reactive.function.client.WebClientExtensionsKt$awaitExchange$1.&lt;init&gt;(WebClientExtensions.kt) ~[spring-webflux-5.2.0.M3.jar:5.2.0.M3]\n    at org.springframework.web.reactive.function.client.WebClientExtensionsKt.awaitExchange(WebClientExtensions.kt) ~[spring-webflux-5.2.0.M3.jar:5.2.0.M3]\n    at com.test.SomeController.get$suspendImpl(SomeController.kt:22) ~[classes/:na]\n    at com.test.SomeController.get(SomeController.kt) ~[classes/:na]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_171]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_171]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_171]\n    at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_171]\n    at org.springframework.web.reactive.result.method.InvocableHandlerMethod.lambda$invoke$0(InvocableHandlerMethod.java:146) ~[spring-webflux-5.2.0.M3.jar:5.2.0.M3]\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:118) [reactor-core-3.3.0.M2.jar:3.3.0.M2]\n    at reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1575) ~[reactor-core-3.3.0.M2.jar:3.3.0.M2]\n...\n</code></pre>\n\n<p>Any ideas what I'am doing wrong?</p>\n\n<p>P.s. gradle dependencies:</p>\n\n<pre><code>dependencies {\n    implementation(kotlin(\"stdlib-jdk8\"))\n    implementation(group = \"org.jetbrains.kotlinx\", name = \"kotlinx-coroutines-core\", version = \"1.2.2\")\n    implementation(group = \"org.jetbrains.kotlinx\", name = \"kotlinx-coroutines-reactor\", version = \"1.2.2\")\n\n    implementation(group = \"org.springframework.boot\", name = \"spring-boot-starter-webflux\", version = \"2.2.0.M4\")\n}\n\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["android", "kotlin", "android-recyclerview", "android-livedata"], "answers": [{"comments": [{"owner": {"reputation": 823, "user_id": 1713450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb4683615320a349adc8ac4f68faace0?s=128&d=identicon&r=PG", "display_name": "user1713450", "link": "https://stackoverflow.com/users/1713450/user1713450"}, "edited": false, "score": 3, "creation_date": 1564026894, "post_id": 56876222, "comment_id": 100896856, "body": "This is what I ended up doing. It worked great! Didn&#39;t know about DiffUtil"}, {"owner": {"reputation": 23192, "user_id": 2684, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Z9oZ0.jpg?s=128&g=1", "display_name": "Martin Marconcini", "link": "https://stackoverflow.com/users/2684/martin-marconcini"}, "reply_to_user": {"reputation": 823, "user_id": 1713450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb4683615320a349adc8ac4f68faace0?s=128&d=identicon&r=PG", "display_name": "user1713450", "link": "https://stackoverflow.com/users/1713450/user1713450"}, "edited": false, "score": 0, "creation_date": 1564048907, "post_id": 56876222, "comment_id": 100906690, "body": "Good to hear! :) Good luck!"}], "tags": [], "owner": {"reputation": 23192, "user_id": 2684, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Z9oZ0.jpg?s=128&g=1", "display_name": "Martin Marconcini", "link": "https://stackoverflow.com/users/2684/martin-marconcini"}, "is_accepted": true, "score": 3, "last_activity_date": 1562179289, "creation_date": 1562179289, "answer_id": 56876222, "question_id": 56875711, "link": "https://stackoverflow.com/questions/56875711/nested-recyclerviews-with-complex-room-livedata/56876222#56876222", "title": "Nested Recyclerviews with Complex Room LiveData", "body": "<p>I would literally have 1 adapter that can render everything, using the <code>DiffUtil</code> (or its async version) class to ensure I don't (and I quote) \"<em>redraw everything just because one property of one ChildModel changes</em>\". </p>\n\n<p>I would move this complex responsibility of constructing (and providing) the data, to your repository (or, if you prefer to have it closer, to your ViewModel acting as a coordinator between 1 or more (I don't know how your model looks, so I am only imagining) repositories providing data. </p>\n\n<p>This would allow you to offer to the <em>ui</em> a much more curated immutable list of <code>ParentsAndChildren</code> together and your RecyclerView/Adapter's responsibility is suddenly much simpler, display this, and bind the correct view for each row. Your UI is suddenly faster, spends much less time doing things on the main thread and you can even unit test the logic to create this list, completely independent of your Activity/Fragment. </p>\n\n<p>I imagine ParentsAndChildren to be something like:</p>\n\n<p><code>class ParentChildren(parent: Parent?, children: Children?)</code></p>\n\n<p>Your bind could then inflate one view when parent is not null and children is. When children is not null, you know it's a children (you could include the parent as well, depends on how you construct this data). Problem solved here, your adapter would look like</p>\n\n<pre><code>class YourAdapter : ListAdapter&lt;ParentChildren, RecyclerView.ViewHolder&gt;(DiffUtilCallback()) {\n\n...\n\n</code></pre>\n\n<p>You'd need to implement your <code>DiffUtilCallback()</code>:</p>\n\n<p><code>internal class DiffUtilCallback : DiffUtil.ItemCallback&lt;ParentChildren&gt;() {</code>\nand its two methods (<code>areContentsTheSame</code>, <code>areItemsTheSame</code>).</p>\n\n<p>And your adapter's two methods:</p>\n\n<pre><code>    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): RecyclerView.ViewHolder {\n        val inflater = LayoutInflater.from(parent.context)\n\n        return when (viewType) {\n            viewTypeParent -&gt; YourParentViewHolder(inflater.inflate(R.layout.your_layout_for_parent), parent, false))\n            viewTypeChildren -&gt; YourChildrenViewHolder(inflater.inflate(R.layout.your_layout_for_children), parent, false))\n            else -&gt; throw IllegalArgumentException(\"You must supply a valid type for this adapter\")\n        }\n    }\n</code></pre>\n\n<p>I would have an abstract base to simplify the adapter even further:</p>\n\n<pre><code>  internal abstract class BaseViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView) {\n        abstract fun bind(data: ParentChildren)\n    }\n\n</code></pre>\n\n<p>This allows you to have your</p>\n\n<pre><code>    // I'm writing pseudo code here... keep it in mind\n    internal class ParentViewHolder(itemView: View) : BaseViewHolder(itemView) {\n        private val name: TextView = itemView.findViewById(R.id.item_text)\n\n        override fun bind(data: ParentChildren) {\n            name.text = parentChildren.parent?.name\n        }\n    }\n\n    internal class ChildrenViewHolder(itemView: View) : BaseViewHolder(itemView) {\n        private val name: TextView = itemView.findViewById(R.id.item_text)\n\n        override fun bind(data: ParentChildren) {\n            name.text = parentChildren.children?.name\n        }\n    }\n\n</code></pre>\n\n<p>You get the idea.</p>\n\n<p>Now... <code>ListAdapter&lt;&gt;</code> has a method called <code>submitList(T)</code> where T is the Type of the adapter <code>ParentChildren</code> in the above pseudo-example.</p>\n\n<p>This is as far as I go, and now you have to provide this Activity or Fragment hosting this adapter, the list via either LiveData or <em>whatever is that you prefer</em> for the architecture you have. </p>\n\n<p>It can be a repository passing it to a MutableLiveData inside the viewModel and the ViewModel exposing a <code>LiveData&lt;List&lt;ParentChildren&gt;</code> or similar to the UI.</p>\n\n<p>The sky is the limit. </p>\n\n<p>This shifts the complexity of putting this data together, closer to where the data is, and where the power of SQL/Room can leverage how you combine and process this, regardless of what the UI needs or wants to do with it. </p>\n\n<p>This is my suggestion, but based upon the very limited knowledge I have about your project. </p>\n\n<p>Good luck! :)</p>\n"}], "owner": {"reputation": 823, "user_id": 1713450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb4683615320a349adc8ac4f68faace0?s=128&d=identicon&r=PG", "display_name": "user1713450", "link": "https://stackoverflow.com/users/1713450/user1713450"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 913, "favorite_count": 3, "accepted_answer_id": 56876222, "answer_count": 1, "score": 2, "last_activity_date": 1562179289, "creation_date": 1562176888, "question_id": 56875711, "link": "https://stackoverflow.com/questions/56875711/nested-recyclerviews-with-complex-room-livedata", "title": "Nested Recyclerviews with Complex Room LiveData", "body": "<p>I have a collection of parent objects each having a collection of child objects. Call these <code>ParentModel</code>s and <code>ChildModel</code>s.</p>\n\n<p>On screen I want to display a RecyclerView of rendered ParentModels, each containing inter alia a RecyclerView of rendered ChildModels.</p>\n\n<p>Wishing to avoid having a god LiveData that redraws everything just because one property of one ChildModel changes, I intend to separate these.</p>\n\n<p>I can't figure out how to structure this with Recyclerview Adapters and Holders plus whatever Fragments and ViewModels I need. Right now I have</p>\n\n<pre><code>class MyFragment: Fragment() {\n  private lateinit val mViewModel: FragmentViewModel\n  // ...\n  fun onViewCreated(/*...*/) {\n    val parentAdapter = ParentAdapter()\n    view.findViewById&lt;RecyclerView&gt;(/*...*/).apply {\n      adapter = parentAdapter\n      //...\n    }\n    viewModel.getParents().observe(this, Observer {\n      parentAdapter.setParents(it)\n    }\n  }\n}\n\nclass FragmentViewModel @Inject constructor(repository: RoomRepo): ViewModel() {\n  mParents: LiveData&lt;List&lt;ParentModel&gt;&gt; = repository.getParents()\n  fun getParents() = mParents\n  //...\n}\n\nclass ParentAdapter: RecyclerView.Adapter&lt;ParentHolder&gt;() {\n  private lateinit var mParents: List&lt;ParentModel&gt;\n  fun setParents(list: List&lt;ParentModel&gt;) {\n    mParents = list\n    notifyDataSetChanged()\n  }\n  override fun onCreateViewHolder(parent: ViewGroup, /*...*/) {\n    return ParentHolder(LayoutInflater.from(parent.context).inflate(R.layout.parent, parent, false))\n  }\n  override fun onBindViewHolder(holder: ParentHolder, position: Int) {\n    holder.bind(/*UNKNOWN*/)\n  }\n  // ...\n  inner class ParentHolder(private val mView: View): RecyclerView.ViewHolder(mView) {\n    fun bind(/*UNKNOWN*/) {\n      // WHAT TO DO HERE???\n    }\n  }\n}\n</code></pre>\n\n<p>Plus my <code>R.layout.parent</code> (I've omitted other irrelevant stuff like a View that just draws a horizontal line, but that's why I have my RecyclerView nested inside a LinearLayout):</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout\n  android:orientation=\"vertical\"\n  android:layout_height=\"wrap_content\"\n  android:layout_width=\"match_parent\"\n  xmlns:android=\"http://schemas.android.com/apk/res/android\"\n  xmlns:tools=\"http://schemas.android.com/tools\"&gt;\n\n  &lt;androidx.recyclerview.widget.RecyclerView\n    android:id=\"@+id/recycler_view\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\" /&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>I have written a ChildAdapter, ChildHolder, and a few other things unthinkingly because I thought this would be trivial to implement, but at this point something's gunked up my brain and I'm likely not seeing the obvious thing.</p>\n\n<p>I've got the first RecyclerView loading correctly based on underlying data. But this parent recyclerview also needs to:</p>\n\n<ol>\n<li>fetch children based on a single parent.id</li>\n<li>create a child recyclerview for a single parent recyclerview item that displays the children</li>\n</ol>\n\n<p>Room returns a LiveData> from function repository.getChildrenByParentId(id: Long). That's the data I'm working from.</p>\n\n<p>But where do I fetch this, how do I hook it into the relevant child recyclerview that belongs to the parent recyclerview?</p>\n\n<p>I don't want to have a God fragment that does \n    viewModel.getParents().observe(...) { parentAdapter.update(it) } and <em>also</em> have to do some kind of viewModel.getChildren().observe(...) { parentAdapter.updateChildren(it) }</p>\n\n<p>because that destroys separation of concerns. Seems to me each item in the parent recyclerview should have a viewmodel that fetches the children that would belong to it, then creates a recyclerview and uses a ChildAdapter to display these children, but I can't seem to figure out where to plug in the ChildFragment and ChildViewModel (with <code>repository.getChildrenByParentId</code> in it) to get this all working.</p>\n\n<p>All examples I find online don't seem to help as they use contrived examples with no LiveData and a God fragment/activity that puts everything inside a single adapter.</p>\n"}, {"tags": ["android-studio", "image-processing", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 28, "user_id": 11735672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/534b4cd29f9bca305932c62619d6a1d6?s=128&d=identicon&r=PG&f=1", "display_name": "galord", "link": "https://stackoverflow.com/users/11735672/galord"}, "edited": false, "score": 0, "creation_date": 1562182256, "post_id": 56875407, "comment_id": 100302218, "body": "Thanks! Do you know where I can find additional examples of Kfilter being used?(aside from the provided example)"}], "tags": [], "owner": {"reputation": 2381, "user_id": 11040422, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HJ6X7.png?s=128&g=1", "display_name": "SaadAAkash", "link": "https://stackoverflow.com/users/11040422/saadaakash"}, "is_accepted": true, "score": 1, "last_activity_date": 1562175418, "creation_date": 1562175418, "answer_id": 56875407, "question_id": 56875238, "link": "https://stackoverflow.com/questions/56875238/having-trouble-with-applying-filters-to-images-in-android-studio/56875407#56875407", "title": "Having trouble with applying filters to images in Android Studio", "body": "<p>Yes. There's one library that I know of - <a href=\"https://github.com/isaac-udy/Kfilter\" rel=\"nofollow noreferrer\">Kfilter</a>. </p>\n\n<p>It's a small Android library for adding image effects/filters to photos and videos, written in Kotlin. It provides a simple interface to create photo and video filters as you would find in applications such as Snapchat or Instagram. Check out other new libraries <a href=\"https://medium.com/mindorks/android-top-image-processing-libraries-c4ba9b92281\" rel=\"nofollow noreferrer\">here</a>, see if any of them serves your purpose.</p>\n"}], "owner": {"reputation": 28, "user_id": 11735672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/534b4cd29f9bca305932c62619d6a1d6?s=128&d=identicon&r=PG&f=1", "display_name": "galord", "link": "https://stackoverflow.com/users/11735672/galord"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "closed_date": 1562175836, "accepted_answer_id": 56875407, "answer_count": 1, "score": -3, "last_activity_date": 1562195085, "creation_date": 1562174597, "last_edit_date": 1562195085, "question_id": 56875238, "link": "https://stackoverflow.com/questions/56875238/having-trouble-with-applying-filters-to-images-in-android-studio", "closed_reason": "Not suitable for this site", "title": "Having trouble with applying filters to images in Android Studio", "body": "<p>I am trying to apply filters on an image in Android Studio. Having trouble with Android's EffectFactory. Any solutions?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2956272"}, "edited": false, "score": 1, "creation_date": 1562178781, "post_id": 56875017, "comment_id": 100300722, "body": "<code>contentMap[it].also { v -&gt; if (v == null) print(&quot;...&quot;) }</code>. Or, more nasty: <code>contentMap[it].also { v -&gt; v ?: print(&quot;...&quot;) }</code>"}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 1, "creation_date": 1562223497, "post_id": 56875017, "comment_id": 100312203, "body": "@dyukha This should be an answer."}], "answers": [{"comments": [{"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1562223456, "post_id": 56876073, "comment_id": 100312192, "body": "dyukha&#39;s comment is a <i>far</i> better option."}, {"owner": {"reputation": 8653, "user_id": 2299040, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Zjrmw.jpg?s=128&g=1", "display_name": "Sahil Manchanda", "link": "https://stackoverflow.com/users/2299040/sahil-manchanda"}, "reply_to_user": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 1, "creation_date": 1562223953, "post_id": 56876073, "comment_id": 100312366, "body": "@AlexeyRomanov it&#39;s a matter of choice. I find my answer to more readable. The timing of my answer and dyukha&#39;s comment is almost similar.  The problem can be solved both ways!"}], "tags": [], "owner": {"reputation": 8653, "user_id": 2299040, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Zjrmw.jpg?s=128&g=1", "display_name": "Sahil Manchanda", "link": "https://stackoverflow.com/users/2299040/sahil-manchanda"}, "is_accepted": false, "score": 0, "last_activity_date": 1562178593, "creation_date": 1562178593, "answer_id": 56876073, "question_id": 56875017, "link": "https://stackoverflow.com/questions/56875017/kotlin-mapnotnull-but-log-what-caused-null-elements/56876073#56876073", "title": "Kotlin: mapNotNull but log what caused null elements", "body": "<p>Please try the following:</p>\n\n<pre><code>fun check(items: List&lt;Node&gt;, content: Map&lt;String, Content?&gt;): List&lt;Content&gt;{\n    return items.filter{\n            if (content[it.id] == null){\n              print(\"content \" + it.id + \"was not found\")   \n            }\n            content[it.id] != null\n        }.map{content[it.id]!!} \n}\n</code></pre>\n"}], "owner": {"reputation": 5602, "user_id": 264675, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/Q4aXb.jpg?s=128&g=1", "display_name": "Caleb Jares", "link": "https://stackoverflow.com/users/264675/caleb-jares"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562178593, "creation_date": 1562173645, "question_id": 56875017, "link": "https://stackoverflow.com/questions/56875017/kotlin-mapnotnull-but-log-what-caused-null-elements", "title": "Kotlin: mapNotNull but log what caused null elements", "body": "<p>When translating Java to Kotlin code, I encountered the following:</p>\n\n<pre><code>List&lt;Content&gt; getContent(List&lt;Node&gt; nodes, Map&lt;String, Content&gt; content) {\n  List&lt;Content&gt; result = new ArrayList&lt;&gt;(nodes.size());\n  for (Node node : nodes) {\n    Content content = content.get(node.getId());\n    if (content == null) {\n      logger.atSevere().log(\"Content %s was not found\", node.getId());\n      continue;\n    }\n    result.add(content);\n  }\n  return result;\n}\n</code></pre>\n\n<p>In Kotlin, this can be easily translated if we drop the logger call:</p>\n\n<pre><code>fun getContent(items: List&lt;Node&gt;, content: Map&lt;String, Content): List&lt;Content&gt; {\n  val contentIds = items.mapNotNull { it.id }\n  return contentIds.mapNotNull { contentMap[it] }\n}\n</code></pre>\n\n<p>I'm thinking a sequence builder might be nice here. It's also possible to separate out <code>contentIds</code> into two separate collections, one made up of the <code>contentIds</code> that were not present in <code>contentMap</code>, the other made up of the <code>Content</code> mapped to successfully. I bet there is also a better way to get a set of items in a map from a set of keys, but I haven't found the right function.</p>\n"}, {"tags": ["android", "kotlin", "udp", "udpclient"], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 11732345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e91f990e976bfd87adbbf72f2ff1f242?s=128&d=identicon&r=PG&f=1", "display_name": "Wodie", "link": "https://stackoverflow.com/users/11732345/wodie"}, "is_accepted": false, "score": 2, "last_activity_date": 1562419139, "creation_date": 1562419139, "answer_id": 56914463, "question_id": 56874545, "link": "https://stackoverflow.com/questions/56874545/how-to-get-udp-data-constant-listening-on-kotlin/56914463#56914463", "title": "How to get UDP data constant listening on Kotlin", "body": "<p>I found Runnables and used them to continuously check for data arrival.</p>\n\n<pre><code>package com.e.udpchat1\n\nimport android.support.v7.app.AppCompatActivity\nimport android.os.Bundle\nimport android.os.StrictMode\nimport android.view.View\nimport android.widget.EditText\nimport android.widget.TextView\nimport java.io.IOException\nimport java.net.DatagramPacket\nimport java.net.DatagramSocket\nimport java.net.InetAddress\n\n\nclass SoftOptions {\n    var RemoteHost: String = \"192.168.1.255\"\n    var RemotePort: Int = 6454\n\n    constructor()\n    init{}\n}\n\n\n// Global\nval Settings = SoftOptions()\n\n\nopen class MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        println(\"Create Runnable example.\")\n        val threadWithRunnable = Thread(udp_DataArrival())\n        threadWithRunnable.start()\n\n        // Add text to textView1.\n            val textView = findViewById&lt;TextView&gt;(R.id.textView1)\n            textView.setText(\"Hello World from main!\\n\")\n\n        println(\"MainActivity onCreate success.\")\n    }\n\n    fun clickButtonSend(view: View) {\n        // Do something in response to button\n        // Send editText1 Text thru UDP.\n        val editText = findViewById&lt;EditText&gt;(R.id.editText1)\n        var message = editText.text.toString()\n        sendUDP(message)\n        // Add text to textView1.\n//        val textView = findViewById&lt;TextView&gt;(R.id.textView1)\n//        var chat = textView.text.toString()\n//        textView.setText(chat + message + \"\\n\")\n        // Clear editText1 after all sent.\n        editText.setText(\"\")// Clear Input text.\n    }\n\n    fun sendUDP(messageStr: String) {\n        // Hack Prevent crash (sending should be done using an async task)\n        val policy = StrictMode.ThreadPolicy.Builder().permitAll().build()\n        StrictMode.setThreadPolicy(policy)\n        try {\n            //Open a port to send the package\n            val socket = DatagramSocket()\n            socket.broadcast = true\n            val sendData = messageStr.toByteArray()\n            val sendPacket = DatagramPacket(sendData, sendData.size, InetAddress.getByName(Settings.RemoteHost), Settings.RemotePort)\n            socket.send(sendPacket)\n            println(\"fun sendBroadcast: packet sent to: \" + InetAddress.getByName(Settings.RemoteHost) + \":\" + Settings.RemotePort)\n        } catch (e: IOException) {\n    //            Log.e(FragmentActivity.TAG, \"IOException: \" + e.message)\n        }\n    }\n\n    open fun receiveUDP() {\n        val buffer = ByteArray(2048)\n        var socket: DatagramSocket? = null\n        try {\n            //Keep a socket open to listen to all the UDP trafic that is destined for this port\n            socket = DatagramSocket(Settings.RemotePort, InetAddress.getByName(Settings.RemoteHost))\n            socket.broadcast = true\n            val packet = DatagramPacket(buffer, buffer.size)\n            socket.receive(packet)\n            println(\"open fun receiveUDP packet received = \" + packet.data)\n\n        } catch (e: Exception) {\n            println(\"open fun receiveUDP catch exception.\" + e.toString())\n            e.printStackTrace()\n        } finally {\n            socket?.close()\n        }\n    }\n\n}\n\n\n\nclass udp_DataArrival: Runnable, MainActivity() {\n    public override fun run() {\n        println(\"${Thread.currentThread()} Runnable Thread Started.\")\n        while (true){\n            receiveUDP()\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 11732345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e91f990e976bfd87adbbf72f2ff1f242?s=128&d=identicon&r=PG&f=1", "display_name": "Wodie", "link": "https://stackoverflow.com/users/11732345/wodie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3698, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1583938538, "creation_date": 1562171408, "last_edit_date": 1563095905, "question_id": 56874545, "link": "https://stackoverflow.com/questions/56874545/how-to-get-udp-data-constant-listening-on-kotlin", "title": "How to get UDP data constant listening on Kotlin", "body": "<p>I am looking for a way to trigger the function named receiveUDP each time a UDP packet is received. How can can I do that on Kotlin? Here is the code I currently have working like a simple chat.</p>\n\n<p>It uses 01 editText for user input, 01 textView for display received packets and one button to send user input.</p>\n\n<pre><code>package com.e.udpchat1\n\nimport android.support.v7.app.AppCompatActivity\nimport android.os.Bundle\nimport android.os.StrictMode\nimport android.view.View\nimport android.widget.EditText\nimport android.widget.TextView\nimport java.io.IOException\nimport java.net.DatagramPacket\nimport java.net.DatagramSocket\nimport java.net.InetAddress\n\n\nclass SoftOptions {\n    var RemoteHost: String = \"192.168.1.255\"\n    var RemotePort: Int = 6454\n\n    constructor()\n    init{}\n}\n\n// Global\nval Settings = SoftOptions()\n\nclass MainActivity : AppCompatActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        // Where should I call?\n        // var Buffer = receiveUDP(1500)\n        // so that it constantly listen to incoming UDP packets\n    }\n\n    fun clickButtonSend(view: View) {\n        // Do something in response to button\n        // Send editText1 Text thru UDP.\n        val editText = findViewById&lt;EditText&gt;(R.id.editText1)\n        var message = editText.text.toString()\n        sendUDP(message)\n        // Add text to textView1.\n        val textView = findViewById&lt;TextView&gt;(R.id.textView1)\n        var chat = textView.text.toString()\n        textView.setText(chat + message + \"\\n\")\n        // Clear editText1 after all sent.\n        editText.setText(\"\")// Clear Input text.\n    }\n\n    fun sendUDP(messageStr: String) {\n        // Hack Prevent crash (sending should be done using an async task)\n        val policy = StrictMode.ThreadPolicy.Builder().permitAll().build()\n        StrictMode.setThreadPolicy(policy)\n        try {\n            //Open a port to send the package\n            val socket = DatagramSocket()\n            socket.broadcast = true\n            val sendData = messageStr.toByteArray()\n            val sendPacket = DatagramPacket(sendData, sendData.size, InetAddress.getByName(Settings.RemoteHost), Settings.RemotePort)\n            socket.send(sendPacket)\n            println(\"fun sendBroadcast: packet sent to: \" + InetAddress.getByName(Settings.RemoteHost) + \":\" + Settings.RemotePort)\n        } catch (e: IOException) {\n    //            Log.e(FragmentActivity.TAG, \"IOException: \" + e.message)\n        }\n    }\n\n    fun receiveUDP( size: Int): ByteArray {\n        val ret = ByteArray(size)\n        var socket: DatagramSocket? = null\n        try {\n            //Keep a socket open to listen to all the UDP trafic that is destined for this port\n            socket = DatagramSocket(Settings.RemotePort, InetAddress.getByName(Settings.RemoteHost))\n            socket.broadcast = true\n            val Buffer = ByteArray(1500)\n            val packet = DatagramPacket(Buffer, Buffer.size)\n            socket.receive(packet)\n\n            // Add text to textView1.\n            val textView = findViewById&lt;TextView&gt;(R.id.textView1)\n            val chat = textView.text.toString()\n            textView.setText(chat + packet + \"\\n\")\n\n        } catch (e: Exception) {\n            e.printStackTrace()\n        } finally {\n            socket?.close()\n        }\n        return ret\n    }\n}\n</code></pre>\n\n<p>I would expect to see every received packet in the textView1.</p>\n"}, {"tags": ["kotlin", "delegates"], "comments": [{"owner": {"reputation": 1600, "user_id": 1292745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGKY6.gif?s=128&g=1", "display_name": "gpunto", "link": "https://stackoverflow.com/users/1292745/gpunto"}, "edited": false, "score": 0, "creation_date": 1562180137, "post_id": 56874489, "comment_id": 100301346, "body": "1: You can reuse the delegate without having to override <code>get</code> and <code>set</code> each time.   Example: the <code>lazy</code> delegate"}, {"owner": {"reputation": 1600, "user_id": 1292745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGKY6.gif?s=128&g=1", "display_name": "gpunto", "link": "https://stackoverflow.com/users/1292745/gpunto"}, "edited": false, "score": 0, "creation_date": 1562180327, "post_id": 56874489, "comment_id": 100301450, "body": "2: let&#39;s say you want to create a <code>MutableList</code> that prints the list every time you mutate the list. You don&#39;t want to reimplement <code>MutableList</code>, you just want to override the functions mutating the list. So instead of manually delegating <i>every</i> call, you just say <code>class PrintList&lt;T&gt;(original: MutableList&lt;T&gt;) by original</code> and you <i>just</i> override the functions you care about"}, {"owner": {"reputation": 10162, "user_id": 430720, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/028694798d002eba1e272107640656ee?s=128&d=identicon&r=PG", "display_name": "Jaguar", "link": "https://stackoverflow.com/users/430720/jaguar"}, "reply_to_user": {"reputation": 1600, "user_id": 1292745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGKY6.gif?s=128&g=1", "display_name": "gpunto", "link": "https://stackoverflow.com/users/1292745/gpunto"}, "edited": false, "score": 0, "creation_date": 1565927925, "post_id": 56874489, "comment_id": 101505092, "body": "@gpunto Can you please post these comments as an answer so that I can accept?"}], "answers": [{"tags": [], "owner": {"reputation": 1600, "user_id": 1292745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGKY6.gif?s=128&g=1", "display_name": "gpunto", "link": "https://stackoverflow.com/users/1292745/gpunto"}, "is_accepted": false, "score": 0, "last_activity_date": 1566205806, "creation_date": 1566205806, "answer_id": 57553611, "question_id": 56874489, "link": "https://stackoverflow.com/questions/56874489/when-should-i-use-delegation-in-kotlin/57553611#57553611", "title": "When should I use delegation in Kotlin?", "body": "<p>1: You can reuse the delegate without having to override <code>get</code> and/or <code>set</code> each time. Example: the <code>lazy</code> delegate  </p>\n\n<p>2: let's say you want to create a <code>MutableList</code> that prints the list every time you mutate the list. You don't want to reimplement <code>MutableList</code>, you just want to override the functions mutating the list. So instead of manually delegating every call, you just say <code>class PrintList&lt;T&gt;(original: MutableList&lt;T&gt;) by original</code> and you just override the functions you care about </p>\n"}], "owner": {"reputation": 10162, "user_id": 430720, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/028694798d002eba1e272107640656ee?s=128&d=identicon&r=PG", "display_name": "Jaguar", "link": "https://stackoverflow.com/users/430720/jaguar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1566205806, "creation_date": 1562171159, "question_id": 56874489, "link": "https://stackoverflow.com/questions/56874489/when-should-i-use-delegation-in-kotlin", "title": "When should I use delegation in Kotlin?", "body": "<p>I have been going through multiple links (<a href=\"https://www.reddit.com/r/androiddev/comments/8b7aaf/eli5_delegation_in_kotlin/\" rel=\"nofollow noreferrer\">One</a>, <a href=\"https://stackoverflow.com/questions/50708419/when-to-use-property-delegation-in-kotlin\">Two</a>) and <a href=\"https://kotlinlang.org/docs/reference/delegation.html\" rel=\"nofollow noreferrer\">documentation</a> regarding the delegate pattern and somewhat understand the advantage it brings in the form of \"<em>composition over inheritance</em>\". I can see how the inbuilt delegate properties (lazy, vetoable, map, observable) are useful; but having a hard time understanding 2 areas:</p>\n\n<p><strong>1. Why/When should I write a custom delegate for property? How is it better than overriding getter/setter of that property?</strong></p>\n\n<p>Comparing the 2 approaches:</p>\n\n<pre><code>private var withoutDelegate: String = \"\"\n    get() = DataHelper.getLatestData(::withoutDelegate.name)\n    set(value) {\n        DataHelper.setLatestData(value)\n        field = value\n    }\n\nval withDelegate by StringDelegateProvider()\n\nclass StringDelegateProvider {\n    operator fun getValue(thisRef: String?, property: KProperty&lt;*&gt;): String {\n        return DataHelper.getLatestData(property.name)\n    }\n}\n</code></pre>\n\n<p><strong>2. At the class level, how is delegation better than traditional composition patterns?</strong> </p>\n\n<p>Comparing the 2 approaches - composition without delegation seems much more concise:</p>\n\n<pre><code>interface Base {\n    fun print()\n}\n\nclass BaseImpl1(val x: Int) : Base {\n    override fun print() { print(x) }\n}\n\nclass BaseImpl2(val x: Int) : Base {\n    override fun print() { print(x) }\n}\n\nclass Derived(b: Base) : Base by b\n\nfun clientFunctionWithDelegation() {\n    val i1 = BaseImpl1(10)\n    val i2 = BaseImpl2(10)\n\n    val b1 = Derived(i1)\n    val b2 = Derived(i2)\n\n    b1.print()\n    b2.print()\n}\n\nfun clientFunctionWithoutDelegation(){\n    //wihtout extending Base, we can still create multiple types of Base and use them conditionally.\n    val i1: Base = BaseImpl1(10)\n    val i2: Base = BaseImpl2(10)\n\n    i1.print()\n    i2.print()\n}\n</code></pre>\n\n<p>Would appreciate if the community can share some use-cases where delegation can help.</p>\n"}, {"tags": ["multithreading", "kotlin", "inner-classes"], "answers": [{"comments": [{"owner": {"reputation": 12970, "user_id": 2741273, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71f8f37ebda905a8fffeb75e91b87a89?s=128&d=identicon&r=PG&f=1", "display_name": "Francesc", "link": "https://stackoverflow.com/users/2741273/francesc"}, "reply_to_user": {"reputation": 3820, "user_id": 1725145, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/902d344133e1ff7290d8a572ccbecd83?s=128&d=identicon&r=PG", "display_name": "user1725145", "link": "https://stackoverflow.com/users/1725145/user1725145"}, "edited": false, "score": 0, "creation_date": 1562170034, "post_id": 56874070, "comment_id": 100296756, "body": "But your function is static, so it has no instance of the service."}, {"owner": {"reputation": 3820, "user_id": 1725145, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/902d344133e1ff7290d8a572ccbecd83?s=128&d=identicon&r=PG", "display_name": "user1725145", "link": "https://stackoverflow.com/users/1725145/user1725145"}, "edited": false, "score": 0, "creation_date": 1562170239, "post_id": 56874070, "comment_id": 100296852, "body": "I tested it, and this is true.  Thank you."}], "tags": [], "owner": {"reputation": 12970, "user_id": 2741273, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71f8f37ebda905a8fffeb75e91b87a89?s=128&d=identicon&r=PG&f=1", "display_name": "Francesc", "link": "https://stackoverflow.com/users/2741273/francesc"}, "is_accepted": true, "score": 1, "last_activity_date": 1562170500, "last_edit_date": 1562170500, "creation_date": 1562169604, "answer_id": 56874070, "question_id": 56874028, "link": "https://stackoverflow.com/questions/56874028/how-to-start-a-thread-that-is-defined-in-a-private-inner-class/56874070#56874070", "title": "How to start a thread that is defined in a private inner class?", "body": "<p>Your <code>ConnectedThread</code> is an inner class of <code>MyBluetoothService</code> so it can't be instantiated outside an instance of <code>MyBluetoothService</code>.</p>\n\n<p>Change it like this (remove <code>private inner</code>):</p>\n\n<pre><code>class ConnectedThread(private val mmSocket: BluetoothSocket) : Thread() {\n</code></pre>\n\n<p>You'll have to get access to the service some other way, or alternatively create a factory method in your service that instantiates the thread and returns that.</p>\n"}], "owner": {"reputation": 3820, "user_id": 1725145, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/902d344133e1ff7290d8a572ccbecd83?s=128&d=identicon&r=PG", "display_name": "user1725145", "link": "https://stackoverflow.com/users/1725145/user1725145"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 56874070, "answer_count": 1, "score": 0, "last_activity_date": 1562171368, "creation_date": 1562169476, "last_edit_date": 1562171368, "question_id": 56874028, "link": "https://stackoverflow.com/questions/56874028/how-to-start-a-thread-that-is-defined-in-a-private-inner-class", "title": "How to start a thread that is defined in a private inner class?", "body": "<p>I found this example of how to read from a Bluetooth socket using a separate read thread on <a href=\"https://developer.android.com/guide/topics/connectivity/bluetooth.html#ManagingAConnection\" rel=\"nofollow noreferrer\">the Android developer website</a>.  The read thread is defined in the private inner class \"ConnectedThread\".</p>\n\n<pre><code>class MyBluetoothService(\n        // handler that gets info from Bluetooth service\n        private val handler: Handler) {\n\n    private inner class ConnectedThread(private val mmSocket: BluetoothSocket) : Thread() {\n\n        private val mmInStream: InputStream = mmSocket.inputStream\n        private val mmOutStream: OutputStream = mmSocket.outputStream\n        private val mmBuffer: ByteArray = ByteArray(1024) // mmBuffer store for the stream\n\n        override fun run() {\n            var numBytes: Int // bytes returned from read()\n\n            // Keep listening to the InputStream until an exception occurs.\n            while (true) {\n                // Read from the InputStream.\n                numBytes = try {\n                    mmInStream.read(mmBuffer)\n                } catch (e: IOException) {\n                    Log.d(TAG, \"Input stream was disconnected\", e)\n                    break\n                }\n\n                // Send the obtained bytes to the UI activity.\n                val readMsg = handler.obtainMessage(\n                        MESSAGE_READ, numBytes, -1,\n                        mmBuffer)\n                readMsg.sendToTarget()\n            }\n        }\n //Other functions like write, cancel that I omitted from this example\n\n}\n</code></pre>\n\n<p>So I added a function in MyBluetoothService to start the read thread:</p>\n\n<pre><code> @JvmStatic\nfun read(){\nval reader = ConnectedThread(myBluetoothSocket)\nReader.start()\n}\n</code></pre>\n\n<p>But this gives an immediate error:</p>\n\n<blockquote>\n  <p>Constructor of inner class ConnectedThread can be called only with\n  receiver of containing class</p>\n</blockquote>\n\n<p>How should I start the thread from the example code?</p>\n"}, {"tags": ["intellij-idea", "kotlin"], "comments": [{"owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "edited": false, "score": 3, "creation_date": 1562169819, "post_id": 56874012, "comment_id": 100296646, "body": "<code>String</code> not <code>string</code>"}, {"owner": {"reputation": 1426, "user_id": 6124193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NutkU.jpg?s=128&g=1", "display_name": "Dave", "link": "https://stackoverflow.com/users/6124193/dave"}, "reply_to_user": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "edited": false, "score": 1, "creation_date": 1562194595, "post_id": 56874012, "comment_id": 100306154, "body": "Thanks for this did the trick just after I fig another way! :-) I added thistypealias string = Any to the top of the code! I don&#39;t know why it made it work but it did but I will stick to the capitail as you have stated! thanks. How do i mark resolved?"}, {"owner": {"reputation": 1412, "user_id": 8534088, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CrzSh.png?s=128&g=1", "display_name": "Dmitriy Popov", "link": "https://stackoverflow.com/users/8534088/dmitriy-popov"}, "edited": false, "score": 0, "creation_date": 1562257801, "post_id": 56874012, "comment_id": 100330104, "body": "@Dave post a description of what you&#39;ve made as an answer and accept it."}], "answers": [{"tags": [], "owner": {"reputation": 1426, "user_id": 6124193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NutkU.jpg?s=128&g=1", "display_name": "Dave", "link": "https://stackoverflow.com/users/6124193/dave"}, "is_accepted": true, "score": 0, "last_activity_date": 1562260725, "creation_date": 1562260725, "answer_id": 56892184, "question_id": 56874012, "link": "https://stackoverflow.com/questions/56874012/getting-an-error22-20-kotlin-unresolved-reference-string-error-when-adding/56892184#56892184", "title": "Getting an Error:(22, 20) Kotlin: Unresolved reference: string error when adding the string command", "body": "<p>Thanks @forpas this fixed the issue! \n<a href=\"https://i.stack.imgur.com/PU97w.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PU97w.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1426, "user_id": 6124193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NutkU.jpg?s=128&g=1", "display_name": "Dave", "link": "https://stackoverflow.com/users/6124193/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 258, "favorite_count": 0, "accepted_answer_id": 56892184, "answer_count": 1, "score": 1, "last_activity_date": 1562260725, "creation_date": 1562169437, "last_edit_date": 1562169761, "question_id": 56874012, "link": "https://stackoverflow.com/questions/56874012/getting-an-error22-20-kotlin-unresolved-reference-string-error-when-adding", "title": "Getting an Error:(22, 20) Kotlin: Unresolved reference: string error when adding the string command", "body": "<p>I'm getting this error Error:(22, 20) Kotlin: Unresolved reference: string when I add some code to my learnign program I made in Intellij It runs ok until I add the string command then I get the error above.I have installed jdk-11.0.3_windows-x64_bin with ideaIC-2019.1.3.exe but not sure if this is the correct SDK to use? Or if this is causin the issues?</p>\n\n<pre><code>var department:string?\ndepartment = null\ndepartment =\"software Engineering\"\nprintln (\"department ${department}\")\n</code></pre>\n\n<p>Information:Kotlin: kotlinc-jvm 1.3.40 (JRE 11.0.3+12-LTS)\nInformation:Module \"Varibles\" was fully rebuilt due to project configuration/dependencies changes</p>\n\n<blockquote>\n  <p>Information:03/07/2019 16:20 - Build completed with 1 error and 0\n  warnings in 2 s 534 ms\n  C:\\Users\\lanca\\IdeaProjects\\Varibles\\src\\DataTypes.kt\n      Error:Error:line (22)Kotlin: Unresolved reference: string</p>\n</blockquote>\n"}, {"tags": ["android", "canvas", "kotlin", "android-imageview"], "answers": [{"tags": [], "owner": {"reputation": 2160, "user_id": 1062074, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/B7AJr.jpg?s=128&g=1", "display_name": "chrjs", "link": "https://stackoverflow.com/users/1062074/chrjs"}, "is_accepted": true, "score": 0, "last_activity_date": 1562231390, "creation_date": 1562231390, "answer_id": 56884448, "question_id": 56873629, "link": "https://stackoverflow.com/questions/56873629/android-add-quad-bezier-rounded-corners-to-view/56884448#56884448", "title": "Android: Add quad bezier rounded corners to View", "body": "<p>Fixed! This is my final solution which applies a quad bezier to the ImageView. I had to add 2 lines to the path to get the result I wanted.</p>\n\n<pre><code>class HeaderImageView : AppCompatImageView {\n    constructor(context: Context?) : super(context) {\n        init()\n    }\n\n    constructor(context: Context?, attrs: AttributeSet?) : super(context, attrs) {\n        init()\n    }\n\n    constructor(context: Context?, attrs: AttributeSet?, defStyleAttr: Int) : super(context, attrs, defStyleAttr) {\n        init()\n    }\n\n    lateinit var paint: Paint\n\n    private fun init() {\n        paint = Paint()\n        paint.color = Color.WHITE\n        paint.xfermode = PorterDuffXfermode(PorterDuff.Mode.SRC_ATOP)\n        paint.style = Paint.Style.FILL\n    }\n\n    @SuppressLint(\"CanvasSize\")\n    override fun onDraw(canvas: Canvas) {\n        super.onDraw(canvas)\n\n        val fHeight = canvas.height.toFloat()\n        val startEndHeight = canvas.height / 1.18f\n        val fWidth = canvas.width.toFloat()\n        val halfWidth = (fWidth / 2)\n\n        val path = Path()\n        //X = Left side, Y = close to bottom\n        val ptStart = PointF(0f, startEndHeight)\n        //X = Middle, Y = Bottom\n        val ptMiddle = PointF(halfWidth, fHeight + 95)\n        // X = Right Side, Y = close to bottom\n        val ptEnd = PointF(fWidth, startEndHeight)\n\n        path.moveTo(ptStart.x, ptStart.y)\n        path.quadTo(ptMiddle.x, ptMiddle.y, ptEnd.x, ptEnd.y)\n        path.lineTo(fWidth, fHeight)\n        path.lineTo(0f, fHeight)\n\n        path.close()\n\n        canvas.drawPath(path, paint)\n    }\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/lMUZY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lMUZY.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 2160, "user_id": 1062074, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/B7AJr.jpg?s=128&g=1", "display_name": "chrjs", "link": "https://stackoverflow.com/users/1062074/chrjs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 56884448, "answer_count": 1, "score": 0, "last_activity_date": 1562231390, "creation_date": 1562168098, "question_id": 56873629, "link": "https://stackoverflow.com/questions/56873629/android-add-quad-bezier-rounded-corners-to-view", "title": "Android: Add quad bezier rounded corners to View", "body": "<p>I want to have an ImageView containing an Image with rounded curves, but not circular (which is way easier of course)..</p>\n\n<p><a href=\"https://i.stack.imgur.com/ugk8e.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ugk8e.png\" alt=\"enter image description here\"></a></p>\n\n<p>The X marked areas should be black, the rest should stay blue. It should look (kind of) like <a href=\"https://i.stack.imgur.com/tzwaz.png\" rel=\"nofollow noreferrer\">this</a></p>\n\n<p>What I tried:\nI spent hours fighting with <code>Path.quadTo</code> and <code>Path.cubicTo</code> with the help of some <a href=\"http://blogs.sitepointstatic.com/examples/tech/canvas-curves/quadratic-curve.html\" rel=\"nofollow noreferrer\">tools</a> but I didn't have any success yet. I just don't really get the usage to be honest.</p>\n\n<p>What my code currently looks like:</p>\n\n<pre><code>override fun onDraw(canvas: Canvas) {\n        super.onDraw(canvas)\n        val paint = Paint()\n        paint.color = Color.BLACK\n        paint.strokeWidth = 1f\n        paint.strokeCap = Paint.Cap.ROUND\n        paint.xfermode = PorterDuffXfermode(PorterDuff.Mode.SRC_ATOP)\n\n        paint.style = Paint.Style.FILL\n\n        val fHeight = canvas.height.toFloat()\n        val startEndHeight = canvas.height / 1.18f\n        val fWidth = canvas.width.toFloat()\n        val halfWidth = (fWidth / 2)\n\n        val path = Path()\n        //X = Left side, Y = close to bottom\n        val ptStart = PointF(0f, startEndHeight)\n        //X = Middle, Y = Bottom\n        val ptMiddle = PointF(halfWidth, fHeight + 95)\n        // X = Right Side, Y = close to bottom\n        val ptEnd = PointF(fWidth, startEndHeight)\n\n        path.moveTo(ptStart.x, ptStart.y)\n        path.quadTo(ptMiddle.x, ptMiddle.y, ptEnd.x, ptEnd.y)\n\n        path.close()\n\n        canvas.drawPath(path, paint)\n    }\n</code></pre>\n\n<p>It can't be that hard, right?\nIs it possible to colorize the red marked areas and leave everything else untouched? </p>\n"}, {"tags": ["java", "c#", "android", "kotlin"], "comments": [{"owner": {"reputation": 4885, "user_id": 8533940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed54c7190f769d2cd7f7ba62ddac211a?s=128&d=identicon&r=PG&f=1", "display_name": "Lothar", "link": "https://stackoverflow.com/users/8533940/lothar"}, "edited": false, "score": 2, "creation_date": 1562165460, "post_id": 56872782, "comment_id": 100294267, "body": "Java works with &quot;network byte order&quot; which is big endian, while C# seems to work with little endian."}, {"owner": {"reputation": 18479, "user_id": 1141432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/012a5bc2ab8149295daba3ed25471679?s=128&d=identicon&r=PG", "display_name": "itsme86", "link": "https://stackoverflow.com/users/1141432/itsme86"}, "reply_to_user": {"reputation": 4885, "user_id": 8533940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed54c7190f769d2cd7f7ba62ddac211a?s=128&d=identicon&r=PG&f=1", "display_name": "Lothar", "link": "https://stackoverflow.com/users/8533940/lothar"}, "edited": false, "score": 1, "creation_date": 1562165516, "post_id": 56872782, "comment_id": 100294294, "body": "@Lothar Endianness is a hardware characteristic, not software. A C# on a big endian machine will work with big endian."}, {"owner": {"reputation": 4885, "user_id": 8533940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed54c7190f769d2cd7f7ba62ddac211a?s=128&d=identicon&r=PG&f=1", "display_name": "Lothar", "link": "https://stackoverflow.com/users/8533940/lothar"}, "reply_to_user": {"reputation": 18479, "user_id": 1141432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/012a5bc2ab8149295daba3ed25471679?s=128&d=identicon&r=PG", "display_name": "itsme86", "link": "https://stackoverflow.com/users/1141432/itsme86"}, "edited": false, "score": 0, "creation_date": 1562165581, "post_id": 56872782, "comment_id": 100294338, "body": "@itsme86 The Java Virtual Machine is essentially a hardware simulation, so there is no contradiction here."}, {"owner": {"reputation": 18479, "user_id": 1141432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/012a5bc2ab8149295daba3ed25471679?s=128&d=identicon&r=PG", "display_name": "itsme86", "link": "https://stackoverflow.com/users/1141432/itsme86"}, "reply_to_user": {"reputation": 4885, "user_id": 8533940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed54c7190f769d2cd7f7ba62ddac211a?s=128&d=identicon&r=PG&f=1", "display_name": "Lothar", "link": "https://stackoverflow.com/users/8533940/lothar"}, "edited": false, "score": 1, "creation_date": 1562165616, "post_id": 56872782, "comment_id": 100294361, "body": "@Lothar Your statement that C# works with little endian is misleading if not false."}, {"owner": {"reputation": 4885, "user_id": 8533940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed54c7190f769d2cd7f7ba62ddac211a?s=128&d=identicon&r=PG&f=1", "display_name": "Lothar", "link": "https://stackoverflow.com/users/8533940/lothar"}, "reply_to_user": {"reputation": 18479, "user_id": 1141432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/012a5bc2ab8149295daba3ed25471679?s=128&d=identicon&r=PG", "display_name": "itsme86", "link": "https://stackoverflow.com/users/1141432/itsme86"}, "edited": false, "score": 0, "creation_date": 1562165667, "post_id": 56872782, "comment_id": 100294385, "body": "@itsme86 While I think that I explained the effect sufficiently you might rephrase what I wrote and make an answer out of it."}, {"owner": {"reputation": 4793, "user_id": 2136795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2aa2525743dbdf65634cc11fae3b6ed?s=128&d=identicon&r=PG", "display_name": "Gyro Gearless", "link": "https://stackoverflow.com/users/2136795/gyro-gearless"}, "edited": false, "score": 1, "creation_date": 1562166078, "post_id": 56872782, "comment_id": 100294630, "body": "To be more precise, <code>BigInteger(byte[])</code> assumes big-endian byte order, while <code>BitConverter.ToInt32</code> uses the endianness of the underlying hardware."}, {"owner": {"reputation": 18479, "user_id": 1141432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/012a5bc2ab8149295daba3ed25471679?s=128&d=identicon&r=PG", "display_name": "itsme86", "link": "https://stackoverflow.com/users/1141432/itsme86"}, "edited": false, "score": 0, "creation_date": 1562168858, "post_id": 56872782, "comment_id": 100296148, "body": "In C#, you should really be using <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.bitconverter.islittleendian?view=netframework-4.8\" rel=\"nofollow noreferrer\">BitConvert.IsLittleEndian</a> to figure out if and how you should interpret your source data. This will allow your code to run correctly on either architecture."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11735191, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/862c2fa806531b0df3ba77f27730605f?s=128&d=identicon&r=PG", "display_name": "marcolomew", "link": "https://stackoverflow.com/users/11735191/marcolomew"}, "is_accepted": false, "score": -11, "last_activity_date": 1562169070, "last_edit_date": 1562169070, "creation_date": 1562166210, "answer_id": 56873062, "question_id": 56872782, "link": "https://stackoverflow.com/questions/56872782/convert-byte-array-to-int-odd-result-java-and-kotlin/56873062#56873062", "title": "Convert Byte Array to Int odd result Java and Kotlin", "body": "<p>In C#, you have the following class:</p>\n\n<p><code>var test0 = BitConverter.ToInt32(bytearray, 0)</code></p>\n"}, {"comments": [{"owner": {"reputation": 6148, "user_id": 5922070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BMDaI.jpg?s=128&g=1", "display_name": "Shelly Pritchard", "link": "https://stackoverflow.com/users/5922070/shelly-pritchard"}, "edited": false, "score": 0, "creation_date": 1601438878, "post_id": 56873275, "comment_id": 113404869, "body": "How can I do the same conversion with bigEndian ?"}], "tags": [], "owner": {"reputation": 2132, "user_id": 4319835, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/10011d6a6058ed100dd1a7e82f9813ad?s=128&d=identicon&r=PG&f=1", "display_name": "George", "link": "https://stackoverflow.com/users/4319835/george"}, "is_accepted": true, "score": 2, "last_activity_date": 1564569387, "last_edit_date": 1564569387, "creation_date": 1562166962, "answer_id": 56873275, "question_id": 56872782, "link": "https://stackoverflow.com/questions/56872782/convert-byte-array-to-int-odd-result-java-and-kotlin/56873275#56873275", "title": "Convert Byte Array to Int odd result Java and Kotlin", "body": "<p>As suggested by @Lother and itsme86. </p>\n\n<pre><code>fun littleEndianConversion(bytes: ByteArray): Int {\n    var result = 0\n    for (i in bytes.indices) {\n        result = result or (bytes[i].toInt() shl 8 * i)\n    }\n    return result\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 107167, "user_id": 878126, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/D5dZW.jpg?s=128&g=1", "display_name": "android developer", "link": "https://stackoverflow.com/users/878126/android-developer"}, "is_accepted": false, "score": 3, "last_activity_date": 1587232360, "creation_date": 1587232360, "answer_id": 61293709, "question_id": 56872782, "link": "https://stackoverflow.com/questions/56872782/convert-byte-array-to-int-odd-result-java-and-kotlin/61293709#61293709", "title": "Convert Byte Array to Int odd result Java and Kotlin", "body": "<p>A tiny bit different solution which I think is a bit more efficient:</p>\n\n<pre><code>    private fun byteToInt(bytes: ByteArray): Int {\n        var result = 0\n        var shift = 0\n        for (byte in bytes) {\n            result = result or (byte.toInt() shl shift)\n            shift += 8\n        }\n        return result\n    }\n</code></pre>\n"}], "owner": {"reputation": 2132, "user_id": 4319835, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/10011d6a6058ed100dd1a7e82f9813ad?s=128&d=identicon&r=PG&f=1", "display_name": "George", "link": "https://stackoverflow.com/users/4319835/george"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6033, "favorite_count": 1, "accepted_answer_id": 56873275, "answer_count": 3, "score": 0, "last_activity_date": 1587232360, "creation_date": 1562165349, "last_edit_date": 1582077028, "question_id": 56872782, "link": "https://stackoverflow.com/questions/56872782/convert-byte-array-to-int-odd-result-java-and-kotlin", "title": "Convert Byte Array to Int odd result Java and Kotlin", "body": "<p>The contents of a <code>Byte</code> <code>Array</code> of size 4 are the following:\n<code>{1, 0, 0, 0}</code>. This translates to the integer number <code>1</code> in C# when using <code>BitConverter.ToInt32(bytearray, 0);</code></p>\n\n<p>However, when converting this byte array to an <code>Integer</code> in Kotlin using the following code base I get the value <code>16777216</code> instead of the value of <code>1</code>.</p>\n\n<pre><code>var test0 = BigInteger(bytearray).toInt() = 16777216\nvar test1 = BigInteger(bytearray).toFloat() = 1.6777216        \n</code></pre>\n\n<p>or </p>\n\n<pre><code>fun toInt32(bytes: ByteArray, index: Int): Int\n{\n    if (bytes.size != 4) \n        throw Exception(\"The length of the byte array must be at least 4 bytes long.\")\n\n    return 0xff \n        and bytes[index].toInt() shl 56 \n        or (0xff and bytes[index + 1].toInt() shl 48) \n        or (0xff and bytes[index + 2].toInt() shl 40) \n        or (0xff and bytes[index + 3].toInt() shl 32)\n}\n</code></pre>\n\n<p>I believe both methods of conversion are correct and the byte values are not signed.</p>\n"}, {"tags": ["android", "kotlin", "dagger-2", "mvp"], "comments": [{"owner": {"reputation": 148364, "user_id": 501696, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/shkBF.png?s=128&g=1", "display_name": "Blackbelt", "link": "https://stackoverflow.com/users/501696/blackbelt"}, "edited": false, "score": 1, "creation_date": 1562165207, "post_id": 56872656, "comment_id": 100294094, "body": "what do you need the context for ? Btw, you get it in the <code>onCreateViewHolder</code> method"}, {"owner": {"reputation": 31520, "user_id": 1837367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v8XDk.jpg?s=128&g=1", "display_name": "David Medenjak", "link": "https://stackoverflow.com/users/1837367/david-medenjak"}, "edited": false, "score": 0, "creation_date": 1562165260, "post_id": 56872656, "comment_id": 100294137, "body": "Unrelated to Dagger, but you should use <code>parent.getContext()</code> or <code>viewHolder.view.getContext()</code> instead so that you have the correct themes &amp; configurations applied"}], "answers": [{"tags": [], "owner": {"reputation": 13997, "user_id": 507313, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b8b097f0a88ab346a912b74fda4c57cf?s=128&d=identicon&r=PG", "display_name": "StuStirling", "link": "https://stackoverflow.com/users/507313/stustirling"}, "is_accepted": true, "score": 1, "last_activity_date": 1562166344, "creation_date": 1562166344, "answer_id": 56873101, "question_id": 56872656, "link": "https://stackoverflow.com/questions/56872656/get-application-context-with-dagger2/56873101#56873101", "title": "Get Application context with Dagger2", "body": "<p>To provide the <code>applicationContext</code> in dagger, create a new scope.</p>\n\n<pre><code>@javax.inject.Qualifier\nannotation class ForApplication\n</code></pre>\n\n<p>Then in your <code>ApplicationModule</code>, you provide this dependency using the scope.</p>\n\n<pre><code>@Singleton\n@Provides\n@NonNull\n@ForApplication\nfun provideContext(): Context {\n    return context\n}\n</code></pre>\n\n<p>Now anywhere you want to use this context, just prefix it with this scope. For example</p>\n\n<pre><code>@Inject\nclass YourAdapter extends Adapter {\n    YourAdapter(@ForApplication Context context) {\n\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 205, "user_id": 11441594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bffdd1fc04040a40266c589e3fa48960?s=128&d=identicon&r=PG&f=1", "display_name": "mamenejr", "link": "https://stackoverflow.com/users/11441594/mamenejr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 56873101, "answer_count": 1, "score": 0, "last_activity_date": 1562166344, "creation_date": 1562165033, "question_id": 56872656, "link": "https://stackoverflow.com/questions/56872656/get-application-context-with-dagger2", "title": "Get Application context with Dagger2", "body": "<p>I make an application using the MVP pattern and I would need to have the context of the application to access the getString() method.\nFor this, I use Dagger2 except that I don't know how to implement it</p>\n\n<p>So here's what I've been doing so far:</p>\n\n<p><strong>BaseApplication.kt</strong></p>\n\n<pre><code>class BaseApplication: Application() {\n\n    lateinit var component: ApplicationComponent\n\n    override fun onCreate() {\n        super.onCreate()\n        instance = this\n        component = buildComponent()\n        component.inject(this)\n    }\n\n    fun buildComponent(): ApplicationComponent {\n        return DaggerApplicationComponent.builder()\n            .applicationModule(ApplicationModule(this))\n            .build()\n    }\n\n    fun getApplicationComponent(): ApplicationComponent {\n        return component\n    }\n\n    companion object {\n        lateinit var instance: BaseApplication private set\n    }\n}\n</code></pre>\n\n<p><strong>ApplicationComponent.kt</strong></p>\n\n<pre><code>@Component(modules = arrayOf(ApplicationModule::class))\ninterface ApplicationComponent {\n\n    fun inject(application: Application)\n\n}\n</code></pre>\n\n<p><strong>ApplicationModule.kt</strong></p>\n\n<pre><code>@Module\nclass ApplicationModule(private val context: Context) {\n\n\n    @Singleton\n    @Provides\n    @NonNull\n    fun provideContext(): Context {\n        return context\n    }\n}\n</code></pre>\n\n<p>I want to provide the context of BaseApplication into the adapter of my recyclerview because I need to have access to the getString method.</p>\n\n<p>What do I have to do now that I've done this to get the context in my adapter ?</p>\n"}, {"tags": ["exception", "kotlin", "read-eval-print-loop"], "answers": [{"tags": [], "owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "is_accepted": true, "score": 2, "last_activity_date": 1562239942, "creation_date": 1562239942, "answer_id": 56887029, "question_id": 56872441, "link": "https://stackoverflow.com/questions/56872441/how-to-fix-kotlin-repl-exception-noclassdeffounderror/56887029#56887029", "title": "How to fix Kotlin REPL exception NoClassDefFoundError", "body": "<p>It looks like that was <a href=\"https://youtrack.jetbrains.com/issue/KT-32085\" rel=\"nofollow noreferrer\">a bug</a> and <a href=\"https://github.com/JetBrains/kotlin/releases/tag/v1.3.41\" rel=\"nofollow noreferrer\">it has been fixed</a> with Kotlin plugin &amp; <code>kotlinc</code> version 1.3.41 (released today).</p>\n"}], "owner": {"reputation": 191, "user_id": 5858411, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/jjyS2.jpg?s=128&g=1", "display_name": "Austin L", "link": "https://stackoverflow.com/users/5858411/austin-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 56887029, "answer_count": 1, "score": 1, "last_activity_date": 1562239942, "creation_date": 1562164393, "question_id": 56872441, "link": "https://stackoverflow.com/questions/56872441/how-to-fix-kotlin-repl-exception-noclassdeffounderror", "title": "How to fix Kotlin REPL exception NoClassDefFoundError", "body": "<p>I'm attempting to run the Kotlin REPL on my windows 10 machine, from the command line. I am receiving a <code>java.lang.NoClassDefFoundError: org/jline/reader/LineReaderBuilder</code> exception when running the command <code>kotlinc</code></p>\n\n<p>I have IntelliJ Ultimate 2019.1.3 installed, with the Kotlin plugin. I have the Kotlin standalone compiler also installed and I've added that location to my system path. I've tried to run the command from the standalone directory: \"C:/Tools/kotlinc/bin\" but no difference.</p>\n\n<ul>\n<li>OS Name: Microsoft Windows 10 Enterprise</li>\n<li>Version  10.0.16299 Build 16299</li>\n<li>Kotlin version 1.3.40-release-123 (JRE 1.8.0_131-b11)</li>\n<li>java version \"1.8.0_131\"</li>\n</ul>\n\n<p>I expect the REPL to start without an exception. What could be causing the exception?</p>\n\n<p>Thank you all!</p>\n"}, {"tags": ["android", "kotlin", "data-binding", "android-spinner"], "owner": {"reputation": 420, "user_id": 5059339, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ec1a2988ff418fa09471aaf9633a034c?s=128&d=identicon&r=PG&f=1", "display_name": "Ghizlane Lotfi", "link": "https://stackoverflow.com/users/5059339/ghizlane-lotfi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1562163962, "creation_date": 1562163962, "question_id": 56872301, "link": "https://stackoverflow.com/questions/56872301/how-to-initialise-spinner-using-data-binding", "title": "How to initialise spinner using data binding", "body": "<p>I am using data binding to bind my spinner\nEverything works well except, the first time when I load data from server, I initialize the spinner and I set a selected value from my viewModel, but it doesn't work\nIf I close and reopen the page, I find the value selected in the spinner</p>\n\n<p>Here is my spinner xml:</p>\n\n<pre><code>&lt;Spinner\n         android:id=\"@+id/construction_site\"\n         android:layout_width=\"match_parent\"\n         android:layout_height=\"40dp\"\n         android:prompt=\"@string/select_existing_construction_site\"\n         app:entries=\"@{viewModel.constructionSiteAdapter}\"\n         app:selectedValue=\"@{viewModel.constructionSite}\"\n         style=\"@style/Widget.AppCompat.DropDownItem.Spinner\"&gt;\n&lt;/Spinner&gt;\n</code></pre>\n\n<p>In the viewModel, I initialize the spinner in this way :</p>\n\n<pre><code>class RightDrawerViewModel : ViewModel(){\n     val constructionSiteAdapter: ArrayAdapter&lt;ConstructionSite&gt; by lazy {\n        ConstructionSiteAdapter(\n        App.context,\n        R.layout.cell_construction_site_list_item,\n        ArrayList()\n       )\n     }\n\n     fun bind(constructionSite: ConstructionSite) {\n         constructionSiteAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item)\n         constructionSiteAdapter.clear()\n         this.constructionSite.value = constructionSite // here I set the selected site to the spinner using data binding\n         setConstructionSites(constructionSite)\n         loadConstructionSites() // this method, load all sites from server and add them to the spinner\n     }\n}\n</code></pre>\n\n<p>Here is my binding adapter:</p>\n\n<pre><code>@BindingAdapter(value = [\"selectedValue\", \"selectedValueAttrChanged\", \"entries\"], requireAll = false)\nfun setEntries(view: Spinner, newSelectedValue: ConstructionSite?, bindingListener: InverseBindingListener?, adapter: ArrayAdapter&lt;*&gt;) {\n    view.adapter = adapter\n    view.onItemSelectedListener = object : AdapterView.OnItemSelectedListener {\n         override fun onItemSelected(parent: AdapterView&lt;*&gt;, view: View, position: Int, id: Long) {\n            bindingListener?.onChange()\n         }\n\n         override fun onNothingSelected(parent: AdapterView&lt;*&gt;) {}\n    }\n    if (newSelectedValue != null) {\n         val pos = (view.adapter as? ArrayAdapter&lt;ConstructionSite&gt;)?.getPosition(newSelectedValue)\n         if (pos != null) view.setSelection(pos, true)\n    }\n}\n\n@InverseBindingAdapter(attribute = \"selectedValue\", event = \"selectedValueAttrChanged\")\nfun getSelectedValue(view: Spinner): ConstructionSite {\n    return view.selectedItem as ConstructionSite\n}\n</code></pre>\n\n<p>So the problem is <code>this.constructionSite.value = constructionSite</code> doesn't work and for the first load, the spinner doesn't have a selected value</p>\n"}, {"tags": ["android", "kotlin", "sharedpreferences"], "comments": [{"owner": {"reputation": 7289, "user_id": 3736955, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1647d5d7348d070ae95df49253385ee1?s=128&d=identicon&r=PG", "display_name": "Jemshit Iskenderov", "link": "https://stackoverflow.com/users/3736955/jemshit-iskenderov"}, "edited": false, "score": 0, "creation_date": 1562331054, "post_id": 56871874, "comment_id": 100351534, "body": "Yep, storing Json String of complex types (list, map..) is the way to go"}], "answers": [{"comments": [{"owner": {"reputation": 14614, "user_id": 236528, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a221fd62b8d25184a812d1d270e691c1?s=128&d=identicon&r=PG", "display_name": "mjuarez", "link": "https://stackoverflow.com/users/236528/mjuarez"}, "edited": false, "score": 2, "creation_date": 1562181123, "post_id": 56872341, "comment_id": 100301782, "body": "Can you add a bit more context, so it&#39;s easy to understand exactly how to use the code you posted?"}], "tags": [], "owner": {"reputation": 1350, "user_id": 10445540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ca713c1a1ae615695267f4e23b8d5f5?s=128&d=identicon&r=PG&f=1", "display_name": "Artem Botnev", "link": "https://stackoverflow.com/users/10445540/artem-botnev"}, "is_accepted": false, "score": 0, "last_activity_date": 1562226903, "last_edit_date": 1562226903, "creation_date": 1562164073, "answer_id": 56872341, "question_id": 56871874, "link": "https://stackoverflow.com/questions/56871874/kotlin-sharedpreferences-save-listview-items-and-load-them/56872341#56872341", "title": "Kotlin SharedPreferences - Save ListView items and load them", "body": "<p>The proper way to save ArrayList of String to preferences is:</p>\n\n<pre><code>.putStringArrayList(\"test\", values)\n</code></pre>\n\n<p>and get it</p>\n\n<pre><code>.getStringArrayList(\"test\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 454, "user_id": 11730727, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hy8mT.png?s=128&g=1", "display_name": "Arfmann", "link": "https://stackoverflow.com/users/11730727/arfmann"}, "is_accepted": true, "score": 0, "last_activity_date": 1562534580, "last_edit_date": 1592644375, "creation_date": 1562534580, "answer_id": 56926204, "question_id": 56871874, "link": "https://stackoverflow.com/questions/56871874/kotlin-sharedpreferences-save-listview-items-and-load-them/56926204#56926204", "title": "Kotlin SharedPreferences - Save ListView items and load them", "body": "<h3>SOLUTION</h3>\n<p>After full days of research, I went to solution:</p>\n<p>In MainActivity.kt create you ArrayList variable as global:</p>\n<pre><code>    class MainActivity : AppCompatActivity() {\n\n    private var values = ArrayList&lt;String&gt;()\n\n    ... //the rest of your code\n}\n</code></pre>\n<p>Then add those 2 functions:</p>\n<pre><code> private fun saveData() {\n    val sharedPreferences = getSharedPreferences(&quot;shared preferences&quot;, MODE_PRIVATE)\n    val editor = sharedPreferences.edit()\n    val gson = Gson()\n    val json = gson.toJson(values)\n    editor.putString(&quot;task list&quot;, json)\n    editor.apply()\n}\n\nprivate fun loadData() {\n    val sharedPreferences = getSharedPreferences(&quot;shared preferences&quot;, MODE_PRIVATE)\n    val gson = Gson()\n    val json = sharedPreferences.getString(&quot;task list&quot;, &quot;&quot;)\n    val type = object: TypeToken&lt;ArrayList&lt;String&gt;&gt;() {\n    }.type\n\n   if(json == null)\n       values = ArrayList()\n   else\n      values = gson.fromJson(json, type)\n}\n</code></pre>\n<p>where <code>values</code> is your ArrayList</p>\n<p>To save data:</p>\n<pre><code>done_fab.setOnClickListener {\n\n        values.add(&quot;put your string here&quot;)\n        adapter.notifyDataSetChanged() //your array adapter\n        saveData()\n    }\n</code></pre>\n<p>And to load data, simply call the function in your MainActivity:</p>\n<pre><code>    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        loadData()\n\n         val adapter = ArrayAdapter(this, R.layout.listview_text_color, values) //your custom arrayAdapter for the listView\n\n        ... //the rest of your code\n}\n</code></pre>\n<p>All this because <code>SharedPreferences</code> doesn't supports <code>ArrayList&lt;String&gt;</code> storing, so passing them with a JSON is the best option</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 10230620, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tj0UYgCW7x0/AAAAAAAAAAI/AAAAAAAAOIY/S2oeoM-Zy0s/photo.jpg?sz=128", "display_name": "Robert Raught", "link": "https://stackoverflow.com/users/10230620/robert-raught"}, "is_accepted": false, "score": 1, "last_activity_date": 1581277143, "creation_date": 1581277143, "answer_id": 60140579, "question_id": 56871874, "link": "https://stackoverflow.com/questions/56871874/kotlin-sharedpreferences-save-listview-items-and-load-them/60140579#60140579", "title": "Kotlin SharedPreferences - Save ListView items and load them", "body": "<p>Thank you Arfrmann for posting a working resolution that I could use. I had to modify the code to fit inside a Fragment as well as my values being a MutableList of integers. So, I thought I'd share my scenario so that others could benefit.</p>\n\n<pre><code>class NeedsmetFragment : Fragment() {\n\n    private var incorrectList = mutableListOf&lt;Int&gt;()\n    val PREFS_FILENAME = \"com.app.app.prefs\"\n\n    private fun saveData() {\n        val sharedPreferences = context!!.getSharedPreferences(PREFS_FILENAME, 0)\n        val editor = sharedPreferences.edit()\n        val gson = Gson()\n        val json = gson.toJson(incorrectList)\n        editor.putString(\"incorrectList\", json)\n        editor.apply()\n    }\n\n    private fun loadData() {\n        val sharedPreferences = context!!.getSharedPreferences(PREFS_FILENAME, 0)\n        val gson = Gson()\n        val json = sharedPreferences.getString(\"incorrectList\", \"\")\n        val type = object: TypeToken&lt;MutableList&lt;Int&gt;&gt;() {}.type\n\n        if(json == null || json == \"\")\n            incorrectList = mutableListOf&lt;Int&gt;()\n\n        else\n            incorrectList = gson.fromJson(json, type)\n    }\n    //...\n    x++\n\n    incorrestList.add(x)\n    saveData()\n\n\n    loadData()\n    thisval = incorrectList[x]\n\n\n}\n</code></pre>\n"}], "owner": {"reputation": 454, "user_id": 11730727, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hy8mT.png?s=128&g=1", "display_name": "Arfmann", "link": "https://stackoverflow.com/users/11730727/arfmann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1506, "favorite_count": 0, "accepted_answer_id": 56926204, "answer_count": 3, "score": 0, "last_activity_date": 1581277143, "creation_date": 1562162496, "last_edit_date": 1562534476, "question_id": 56871874, "link": "https://stackoverflow.com/questions/56871874/kotlin-sharedpreferences-save-listview-items-and-load-them", "title": "Kotlin SharedPreferences - Save ListView items and load them", "body": "<p>I have a ListView with items created by </p>\n\n<pre><code> val values = ArrayList&lt;String&gt;().toMutableList()\n val adapter = ArrayAdapter(this, R.layout.listview_text_color, values)\n\n adapter.add(title_editText.text!!.toString() + \" - \" + content_editText.text!!.toString())\n</code></pre>\n\n<p>I need to save those ListView items and reload them again when reopen the app using SharedPreferences (not DB)</p>\n\n<p>This is my actual code about SP:</p>\n\n<pre><code>fun saveData(values: Set&lt;String&gt;) {\n    val sharedPref = this.getPreferences(Context.MODE_PRIVATE) ?: return\n    with(sharedPref.edit()) {\n        putStringSet(\"test\", values)\n        putString(\"title\", title_editText.text!!.toString())\n        putString(\"content\", content_editText.text!!.toString())\n        apply()\n    }\n}\n\nfun getData() {\n    val sharedPref = this.getPreferences(Context.MODE_PRIVATE) ?: return\n    val titleData = sharedPref.getString(\"title\", \"\")\n    val contentData = sharedPref.getString(\"content\", \"\")\n    Toast.makeText(this, \"$titleData $contentData\", Toast.LENGTH_LONG).show()\n\n}\n</code></pre>\n\n<h3>EDIT FOR SOLUTION</h3>\n\n<p>After full days of research, I went to solution:</p>\n\n<p>In MainActivity.kt create you ArrayList variable as global:</p>\n\n<pre><code>    class MainActivity : AppCompatActivity() {\n\n    private var values = ArrayList&lt;String&gt;()\n\n    ... //the rest of your code\n}\n</code></pre>\n\n<p>Then add those 2 functions:</p>\n\n<pre><code> private fun saveData() {\n    val sharedPreferences = getSharedPreferences(\"shared preferences\", MODE_PRIVATE)\n    val editor = sharedPreferences.edit()\n    val gson = Gson()\n    val json = gson.toJson(values)\n    editor.putString(\"task list\", json)\n    editor.apply()\n}\n\nprivate fun loadData() {\n    val sharedPreferences = getSharedPreferences(\"shared preferences\", MODE_PRIVATE)\n    val gson = Gson()\n    val json = sharedPreferences.getString(\"task list\", \"\")\n    val type = object: TypeToken&lt;ArrayList&lt;String&gt;&gt;() {\n    }.type\n\n   if(json == null)\n       values = ArrayList()\n   else\n      values = gson.fromJson(json, type)\n}\n</code></pre>\n\n<p>where <code>values</code> is your ArrayList</p>\n\n<p>To save data:</p>\n\n<pre><code>done_fab.setOnClickListener {\n\n        values.add(\"put your string here\")\n        adapter.notifyDataSetChanged() //your array adapter\n        saveData()\n    }\n</code></pre>\n\n<p>And to load data, simply call the function in your MainActivity:</p>\n\n<pre><code>    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        loadData()\n\n         val adapter = ArrayAdapter(this, R.layout.listview_text_color, values) //your custom arrayAdapter for the listView\n\n        ... //the rest of your code\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-recyclerview", "nestedrecyclerview"], "comments": [{"owner": {"reputation": 16018, "user_id": 1511776, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/g3ZQs.jpg?s=128&g=1", "display_name": "hardartcore", "link": "https://stackoverflow.com/users/1511776/hardartcore"}, "edited": false, "score": 0, "creation_date": 1562223880, "post_id": 56871770, "comment_id": 100312332, "body": "I would suggest to populate everything in your main adapter. Using RecyclerView inside another RecyclerView is not very good idea + I am not really sure if it will be that efficient."}], "answers": [{"comments": [{"owner": {"reputation": 418, "user_id": 4610033, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b152d2d69335f1f43ed12ffcb95277fe?s=128&d=identicon&r=PG&f=1", "display_name": "mrj", "link": "https://stackoverflow.com/users/4610033/mrj"}, "edited": false, "score": 0, "creation_date": 1562232952, "post_id": 56882285, "comment_id": 100317205, "body": "Thanks for your explanations. I would like to avoid using your library as I will only use it this one time. How to I update the comment with replies? Inflate on the fly?"}, {"owner": {"reputation": 1583, "user_id": 5362029, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yMl70.jpg?s=128&g=1", "display_name": "Gil Goldzweig", "link": "https://stackoverflow.com/users/5362029/gil-goldzweig"}, "reply_to_user": {"reputation": 418, "user_id": 4610033, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b152d2d69335f1f43ed12ffcb95277fe?s=128&d=identicon&r=PG&f=1", "display_name": "mrj", "link": "https://stackoverflow.com/users/4610033/mrj"}, "edited": false, "score": 0, "creation_date": 1562245681, "post_id": 56882285, "comment_id": 100324274, "body": "That&#39;s fine, you just update the item and call the appropriate notify function"}, {"owner": {"reputation": 418, "user_id": 4610033, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b152d2d69335f1f43ed12ffcb95277fe?s=128&d=identicon&r=PG&f=1", "display_name": "mrj", "link": "https://stackoverflow.com/users/4610033/mrj"}, "edited": false, "score": 0, "creation_date": 1562251994, "post_id": 56882285, "comment_id": 100327628, "body": "I&#39;ll try to implement your suggestion using notifyItemChanged, will post an answer if it works for future references"}, {"owner": {"reputation": 1583, "user_id": 5362029, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yMl70.jpg?s=128&g=1", "display_name": "Gil Goldzweig", "link": "https://stackoverflow.com/users/5362029/gil-goldzweig"}, "reply_to_user": {"reputation": 418, "user_id": 4610033, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b152d2d69335f1f43ed12ffcb95277fe?s=128&d=identicon&r=PG&f=1", "display_name": "mrj", "link": "https://stackoverflow.com/users/4610033/mrj"}, "edited": false, "score": 0, "creation_date": 1562264225, "post_id": 56882285, "comment_id": 100332033, "body": "Cool, If my guidance helped you, give it an upvote, it helps me reach more people"}], "tags": [], "owner": {"reputation": 1583, "user_id": 5362029, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yMl70.jpg?s=128&g=1", "display_name": "Gil Goldzweig", "link": "https://stackoverflow.com/users/5362029/gil-goldzweig"}, "is_accepted": false, "score": 2, "last_activity_date": 1562223695, "creation_date": 1562223695, "answer_id": 56882285, "question_id": 56871770, "link": "https://stackoverflow.com/questions/56871770/android-how-to-interact-with-nested-recyclerview-from-fragment/56882285#56882285", "title": "Android how to interact with nested recyclerView from fragment", "body": "<p>You can achieve that using a single multi-view type adapter by placing the comments \nas part of the parent item, with that, you add the child items below the parent item and call <code>notifyItemRangeInserted</code>.</p>\n\n<p>That way you don't have to deal with most of the recycling issues.</p>\n\n<p>When you want to update a comment you just update the comment inside the parent item and call <code>notifyItemChanged</code>.</p>\n\n<p>If you want I created a <a href=\"https://github.com/gilgoldzweig/gencycler\" rel=\"nofollow noreferrer\">library</a> that can generate that code for you in compile time.\nIt supports the exact case you wanted and much more. </p>\n"}, {"comments": [{"owner": {"reputation": 135, "user_id": 7067575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e65e900676bf50dffcf804db8254672?s=128&d=identicon&r=PG", "display_name": "binrebin", "link": "https://stackoverflow.com/users/7067575/binrebin"}, "edited": false, "score": 0, "creation_date": 1614518453, "post_id": 56891948, "comment_id": 117404197, "body": "can you post <code>childadapter</code> here."}], "tags": [], "owner": {"reputation": 418, "user_id": 4610033, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b152d2d69335f1f43ed12ffcb95277fe?s=128&d=identicon&r=PG&f=1", "display_name": "mrj", "link": "https://stackoverflow.com/users/4610033/mrj"}, "is_accepted": true, "score": 0, "last_activity_date": 1562259232, "creation_date": 1562259232, "answer_id": 56891948, "question_id": 56871770, "link": "https://stackoverflow.com/questions/56871770/android-how-to-interact-with-nested-recyclerview-from-fragment/56891948#56891948", "title": "Android how to interact with nested recyclerView from fragment", "body": "<p>Using @Gil Goldzweig's suggestion, here is what I did: in case of an Instagram like comments' system with replies, I did use a nested recyclerView system. It just makes it easier to add and remove items. However, as for the question <strong>How does one properly send data to child adapter in a fragment?</strong> You don't. It gets super messy. From my fragment, I sent the data to my mainAdapter, which in turn sent the data to the relevant childAdapter. The key to make it smooth is using <code>notifyItemRangeInserted</code> when adding a comment to the mainAdapter and then <code>notifyItemChanged</code> when adding replies to a comment. The second event will allow sending data to the child adapter using the <code>payload</code>. Here's the code in case other people are interested:</p>\n\n<p><strong>Fragment</strong></p>\n\n<pre><code>class CommentsFragment : androidx.fragment.app.Fragment(), Injectable,\n    SendCommentButton.OnSendClickListener, CommentsAdapter.Listener {\n\n\n@Inject\nlateinit var viewModelFactory: ViewModelProvider.Factory\n\nprivate val viewModel by lazy {\n    ViewModelProviders.of(requireActivity(), viewModelFactory).get(CommentsViewModel::class.java)\n}\nprivate val searchViewModel by lazy {\n    ViewModelProviders.of(requireActivity(), viewModelFactory).get(SearchViewModel::class.java)\n}\n\nprivate val mAdapter = CommentsAdapter(this)\nprivate var contentid: Int = 0 //store the contentid to process further posts or requests for more comments\nprivate var isLoadingMoreComments: Boolean = false //used to check if we should fetch more comments\n\n\noverride fun onCreateView(inflater: LayoutInflater, container: ViewGroup?,\n                          savedInstanceState: Bundle?): View? {\n\n\n    return inflater.inflate(R.layout.fragment_comments, container, false)\n\n}\n\noverride fun onActivityCreated(savedInstanceState: Bundle?) {\n    super.onActivityCreated(savedInstanceState)\n\n    //hide the action bar\n    activity?.findViewById&lt;BottomNavigationView&gt;(R.id.bottomNavView)?.visibility = View.GONE\n\n\n    contentid = arguments!!.getInt(\"contentid\") //argument is mandatory, since comment is only available on content\n\n    ivBackArrow.setOnClickListener{ activity!!.onBackPressed() }\n\n    viewModel.initComments(contentid) //fetch comments\n\n    val layoutManager = LinearLayoutManager(this.context)\n    layoutManager.stackFromEnd = true\n    rVComments.layoutManager = layoutManager\n    mAdapter.setHasStableIds(true)\n    rVComments.adapter = mAdapter\n\n\n\n    setupObserver() //observe initial comments response\n    setupSendCommentButton()\n    post_comment_text.setSearchViewModel(searchViewModel)\n    setupScrollListener(layoutManager) //scroll listener to load more comments\n\n    iVCancelReplyTo.setOnClickListener{\n        //reset ReplyTo function\n        resetReplyLayout()\n    }\n\n\n}\n\nprivate fun loadMoreComments(){\n    viewModel.fetchMoreComments(contentid, mAdapter.itemCount)\n    setupObserver()\n}\n\n/*\n1.check if not already loading\n2.check scroll position 0\n3.check total visible items != total recycle items\n4.check itemcount to make sure we can still make request\n */\nprivate fun setupScrollListener(layoutManager: LinearLayoutManager){\n    rVComments.addOnScrollListener(object: RecyclerView.OnScrollListener(){\n        override fun onScrolled(recyclerView: RecyclerView, dx: Int, dy: Int) {\n            super.onScrolled(recyclerView, dx, dy)\n            val visibleItemCount = rVComments.childCount\n            val totalItemCount = layoutManager.itemCount\n            val pos = layoutManager.findFirstCompletelyVisibleItemPosition()\n            if(!isLoadingMoreComments &amp;&amp; pos==0 &amp;&amp; visibleItemCount!=totalItemCount &amp;&amp; mAdapter.itemCount%10==0){\n                //fetch more comments\n                isLoadingMoreComments = true\n                loadMoreComments()\n            }\n        }\n\n    })\n}\n\n\n\n\n\nprivate fun setupSendCommentButton() {\n    btnSendComment.setOnSendClickListener(this)\n}\n\noverride fun onSendClickListener(v: View?) {\n    if(isInputValid(post_comment_text.text.toString())) {\n        val isReply = mAdapter.commentid!=null\n        viewModel.postComment(post_comment_text.text.toString(), mAdapter.commentid?: contentid, isReply) //get reply ID, otherwise contentID\n        observePost()\n        post_comment_text.setText(\"\")\n        btnSendComment.setCurrentState(SendCommentButton.STATE_DONE)\n    }\n}\n\noverride fun postCommentAsReply(username: String) {\n    //main adapter method to post a reply\n    val replyText = \"${getString(R.string.replyingTo)} $username\"\n    tVReplyTo.text = replyText\n    layoutReplyTo.visibility=View.VISIBLE\n    post_comment_text.requestFocus()\n}\n\noverride fun fetchReplies(commentid: Int, commentsCount: Int) {\n    //main adapter method to fetch replies\n    if(!isLoadingMoreComments){ //load one series at a time\n        isLoadingMoreComments = true\n        viewModel.fetchReplies(commentid, commentsCount)\n        viewModel.replies.observe(this, Observer&lt;Resource&lt;List&lt;Comment&gt;&gt;&gt; {\n            if (it?.data != null) when (it.status) {\n                Resource.Status.LOADING -&gt; {\n                    //showProgressBar(true)\n                }\n                Resource.Status.ERROR -&gt; {\n                    //showProgressBar(false)\n                    isLoadingMoreComments = false\n                }\n                Resource.Status.SUCCESS -&gt; {\n                    isLoadingMoreComments = false\n                    mAdapter.addReplies(mAdapter.replyCommentPosition!!, it.data)\n                    rVComments.scrollToPosition(mAdapter.replyCommentPosition!!)\n                }\n            }\n        })\n    }\n\n}\n\n\nprivate fun isInputValid(text: String): Boolean = text.isNotEmpty()\n\nprivate fun observePost(){\n    viewModel.postComment.observe(this, Observer&lt;Resource&lt;PostCommentResponse&gt;&gt; {\n        if (it?.data != null) when (it.status) {\n            Resource.Status.LOADING -&gt; {\n                //showProgressBar(true)\n            }\n            Resource.Status.ERROR -&gt; {\n                //showProgressBar(false)\n            }\n            Resource.Status.SUCCESS -&gt; {\n                if(it.data.asReply){\n                    //dispatch comment to child adapter via main adapter\n                    mAdapter.addReply(mAdapter.replyCommentPosition!!, it.data.comment)\n                    rVComments.scrollToPosition(mAdapter.replyCommentPosition!!)\n                }else{\n                    mAdapter.addComment(it.data.comment)\n                }\n                resetReplyLayout()\n                //showProgressBar(false)\n            }\n        }\n    })\n}\n\n\n\nprivate fun setupObserver(){\n    viewModel.comments.observe(this, Observer&lt;Resource&lt;List&lt;Comment&gt;&gt;&gt; {\n        if (it?.data != null) when (it.status) {\n            Resource.Status.LOADING -&gt; {\n                //showProgressBar(true)\n            }\n            Resource.Status.ERROR -&gt; {\n                isLoadingMoreComments = false\n                //showProgressBar(false)\n            }\n            Resource.Status.SUCCESS -&gt; {\n                mAdapter.addComments(it.data)\n                isLoadingMoreComments = false\n                //showProgressBar(false)\n            }\n        }\n    })\n}\n\nprivate fun resetReplyLayout(){\n    layoutReplyTo.visibility=View.GONE\n    mAdapter.replyCommentPosition = null\n    mAdapter.commentid = null\n}\n\n\n\noverride fun onStop() {\n    super.onStop()\n    activity?.findViewById&lt;BottomNavigationView&gt;(R.id.bottomNavView)?.visibility = View.VISIBLE\n}\n\n}\n</code></pre>\n\n<p><strong>MainAdapter</strong></p>\n\n<pre><code>class CommentsAdapter(private val listener: Listener) : RecyclerView.Adapter&lt;CommentsAdapter.ViewHolder&gt;(), ChildCommentsAdapter.ChildListener {\n\n//method from child adapter\noverride fun postChildReply(replyid: Int, username: String, position: Int) {\n    commentid = replyid\n    replyCommentPosition = position\n    listener.postCommentAsReply(username)\n}\n\ninterface Listener {\n    fun postCommentAsReply(username: String)\n    fun fetchReplies(commentid: Int, commentsCount: Int=0)\n}\n\n\nclass ViewHolder(val view: View) : RecyclerView.ViewHolder(view)\n\nprivate var comments = mutableListOf&lt;Comment&gt;()\nprivate var repliesVisibility = mutableListOf&lt;Boolean&gt;() //used to store visibility state for replies\nvar replyCommentPosition: Int? = null //store the main comment's position\nvar commentid: Int? = null //used to indicate which comment is replied to\n\n\n\noverride fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {\n   val view = LayoutInflater.from(parent.context)\n           .inflate(R.layout.item_comment, parent, false)\n\n    return ViewHolder(view)\n}\n\noverride fun onBindViewHolder(holder: ViewHolder, position: Int) {\n\n    val comment = comments[position]\n\n    with(holder.view) {\n        //reset visibilities (rebinding purpose)\n        rVReplies.visibility = View.GONE\n        iVMoreReplies.visibility = View.GONE\n        tVReplies.visibility = View.GONE\n\n        content.loadUserPhoto(comment.avatarThumbnailURL)\n        text.setCaptionText(comment.username!!, comment.comment)\n        tvTimestamp.setTimeStamp(comment.timestamp!!)\n\n        val child = ChildCommentsAdapter(\n            //we pass parent commentid and position to child to be able to pass it again on click\n            this@CommentsAdapter, comments[holder.adapterPosition].id!!, holder.adapterPosition\n        )\n        val layoutManager = LinearLayoutManager(this.context)\n        rVReplies.layoutManager = layoutManager\n        rVReplies.adapter = child\n\n\n        //initial visibility block when binding the viewHolder\n        val txtMore = this.resources.getString(R.string.show_more_replies)\n        if(comment.repliesCount&gt;0) {\n            tVReplies.visibility = View.VISIBLE\n            if (repliesVisibility[position]) {\n                //replies are to be shown directly\n                rVReplies.visibility = View.VISIBLE\n                child.addComments(comment.replies!!)\n                tVReplies.text = resources.getString(R.string.hide_replies)\n\n                if (comment.repliesCount &gt; comment.replies!!.size) {\n                    //show the load more replies arrow if we can fetch more replies\n                    iVMoreReplies.visibility = View.VISIBLE\n                }\n            } else {\n                //replies all hidden\n                val txt = txtMore + \" (${comment.repliesCount})\"\n                tVReplies.text = txt\n            }\n        }\n\n        //second visibility block when toggling with the show more/hide textView\n        tVReplies.setOnClickListener{\n            //toggle child recyclerView visibility and change textView text\n            if(holder.view.rVReplies.visibility == View.GONE){\n                //show stuff\n                if(comment.replies!!.isEmpty()){\n                    Timber.d(holder.adapterPosition.toString())\n                    //fetch replies if none were fetched yet\n                    replyCommentPosition = holder.adapterPosition\n                    listener.fetchReplies(comments[holder.adapterPosition].id!!)\n                }else{\n                    //load comments into adapter if not already\n                    if(comment.replies!!.size&gt;child.comments.size){child.addComments(comment.replies!!)}\n                }\n\n                repliesVisibility[position] = true\n                holder.view.rVReplies.visibility = View.VISIBLE\n                holder.view.tVReplies.text = holder.view.resources.getString(R.string.hide_replies)\n                if (comment.repliesCount &gt; comment.replies!!.size &amp;&amp; comment.replies!!.isNotEmpty()) {\n                    //show the load more replies arrow if we can fetch more replies\n                    iVMoreReplies.visibility = View.VISIBLE\n                }\n            }else{\n                //hide replies and change text\n                repliesVisibility[position] = false\n                holder.view.rVReplies.visibility = View.GONE\n                holder.view.iVMoreReplies.visibility = View.GONE\n                val txt = txtMore + \" (${comment.repliesCount})\"\n                holder.view.tVReplies.text = txt\n            }\n        }\n\n\n\n        tvReply.setOnClickListener{\n            replyCommentPosition = holder.adapterPosition\n            commentid = comments[holder.adapterPosition].id!!\n            listener.postCommentAsReply(comments[holder.adapterPosition].username!!)\n        }\n\n        iVMoreReplies.setOnClickListener{\n            replyCommentPosition = holder.adapterPosition\n            listener.fetchReplies(comments[holder.adapterPosition].id!!, layoutManager.itemCount) //pass amount of replies too\n        }\n\n\n    }\n}\n\n@Suppress(\"UNCHECKED_CAST\")\noverride fun onBindViewHolder(holder: ViewHolder, position: Int, payloads: MutableList&lt;Any&gt;) {\n    if(payloads.isNotEmpty()){\n        //add reply to child adapter\n        with(holder.view){\n            Timber.d(payloads.toString())\n            val adapter = rVReplies.adapter as ChildCommentsAdapter\n            if(payloads[0] is Comment){\n                adapter.addComment(payloads[0] as Comment)\n            }else{\n                //will be of type List&lt;Comment&gt;\n                adapter.addComments(payloads[0] as List&lt;Comment&gt;)\n                val comment = comments[position]\n                if (comment.repliesCount &gt; comment.replies!!.size) {\n                    //show the load more replies arrow if we can fetch more replies\n                    iVMoreReplies.visibility = View.VISIBLE\n                }else{\n                    iVMoreReplies.visibility = View.GONE\n                }\n            }\n        }\n    }else{\n        super.onBindViewHolder(holder,position, payloads) //delegate to normal binding process\n    }\n}\n\n\noverride fun getItemCount(): Int = comments.size\n\n\n//add multiple replies to child adapter at pos 0\nfun addReplies(position: Int, newComments: List&lt;Comment&gt;){\n    comments[position].replies!!.addAll(0, newComments)\n    notifyItemChanged(position, newComments)\n}\n\n//add a single reply to child adapter at last position\nfun addReply(position: Int, newComment: Comment){\n    comments[position].replies!!.add(newComment)\n    comments[position].repliesCount += 1 //update replies count in case viewHolder gets rebinded\n    notifyItemChanged(position, newComment)\n}\n\n//add a new comment to main adapter at last position\nfun addComment(comment: Comment){\n    comments.add(comment) //new comment just made goes to the end\n    repliesVisibility.add(false)\n    notifyItemInserted(itemCount-1)\n}\n\n//add multiple new comments to main adapter at pos 0\nfun addComments(newComments: List&lt;Comment&gt;){\n    comments.addAll( 0, newComments) //loading comments or previous comments go to the beginning\n    repliesVisibility.addAll(0, List(newComments.size) { false })\n    notifyItemRangeInserted(0, newComments.size)\n}\n\n\n\n}\n</code></pre>\n\n<p>The childAdapter is very basic and has nearly 0 logic.</p>\n"}], "owner": {"reputation": 418, "user_id": 4610033, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b152d2d69335f1f43ed12ffcb95277fe?s=128&d=identicon&r=PG&f=1", "display_name": "mrj", "link": "https://stackoverflow.com/users/4610033/mrj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2421, "favorite_count": 0, "accepted_answer_id": 56891948, "answer_count": 2, "score": 0, "last_activity_date": 1562259232, "creation_date": 1562162166, "last_edit_date": 1562162989, "question_id": 56871770, "link": "https://stackoverflow.com/questions/56871770/android-how-to-interact-with-nested-recyclerview-from-fragment", "title": "Android how to interact with nested recyclerView from fragment", "body": "<p>How does one properly send data to child <code>adapter</code> in a <code>fragment</code>?\nI'm basically trying to implement an Instagram like comments-section, e.g. a bunch of comments that can each have more comments (replies).</p>\n\n<p>To do that, I use one <code>main recyclerView</code> + <code>main adapter</code>, which instances are retained in my fragment, and within the main adapter I bind the children comments (<code>recyclerView</code> + <code>adapter</code>).</p>\n\n<p>Adding comments to the main adapter is easy since the object is always available in the fragment, so I just call <code>mainAdapter.addComments(newComments)</code>:</p>\n\n<p><strong>MainAdapter</strong></p>\n\n<pre><code>fun addComments(newComments: List&lt;Comment&gt;){\n    comments.addAll( 0, newComments) //loading comments or previous comments go to the beginning\n    notifyItemRangeInserted(0, newComments.size)\n}\n</code></pre>\n\n<p>But how to call <code>addComments</code> of one particular nested-rV? I read I should not save the adapter instances and only use positions.\nI'm trying to do that in my Fragment as follows:</p>\n\n<pre><code>val item = rVComments.findViewHolderForItemId(mAdapter.itemId)!!.itemView\nval adapt = item.rVReplies.adapter as ChildCommentsAdapter\nadapt.addComment(it.data.comment)\n</code></pre>\n\n<p>But that doesn't work very well: since we have only RecyclerViews, that particular ViewHolder is often already recycled if the user scrolled after posting or fetching items, which leads to a NullPointerException.\nHence the initial question: <strong>how does one properly interact with nested recyclerviews and their adapter?</strong> If the answer is via Interface, please provide an example as I've tried it without success since I shouldn't save adapter objects.</p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 7475, "user_id": 106941, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/RLYO0.jpg?s=128&g=1", "display_name": "MSpeed", "link": "https://stackoverflow.com/users/106941/mspeed"}, "edited": false, "score": 0, "creation_date": 1562161730, "post_id": 56871108, "comment_id": 100292019, "body": "What is a SwipeUpView? Why not use a BottomSheet? <a href=\"https://blog.mindorks.com/android-bottomsheet-in-kotlin\" rel=\"nofollow noreferrer\">blog.mindorks.com/android-bottomsheet-in-kotlin</a>"}, {"owner": {"reputation": 11, "user_id": 11463948, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-uHnFACkYb-Y/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdxAYW1TV7or-_mxhyZdI_amhdc4w/mo/photo.jpg?sz=128", "display_name": "VTEC", "link": "https://stackoverflow.com/users/11463948/vtec"}, "reply_to_user": {"reputation": 7475, "user_id": 106941, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/RLYO0.jpg?s=128&g=1", "display_name": "MSpeed", "link": "https://stackoverflow.com/users/106941/mspeed"}, "edited": false, "score": 0, "creation_date": 1562226424, "post_id": 56871108, "comment_id": 100313630, "body": "SwipeUpView is just a normal layout. But when im using a bottom sheet, that sheet is always visible on the screen? If so, its not what I want, what I want is not visible on the screen then when you do swipe up, it shows the layout with buttons."}, {"owner": {"reputation": 7475, "user_id": 106941, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/RLYO0.jpg?s=128&g=1", "display_name": "MSpeed", "link": "https://stackoverflow.com/users/106941/mspeed"}, "edited": false, "score": 0, "creation_date": 1562262837, "post_id": 56871108, "comment_id": 100331616, "body": "You can hide it by settings the state:  <code>bottomSheetBehavior.setState(BottomSheetBehavior.STATE_COLLA&zwnj;&#8203;PSED)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11463948, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-uHnFACkYb-Y/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdxAYW1TV7or-_mxhyZdI_amhdc4w/mo/photo.jpg?sz=128", "display_name": "VTEC", "link": "https://stackoverflow.com/users/11463948/vtec"}, "edited": false, "score": 0, "creation_date": 1562226112, "post_id": 56871335, "comment_id": 100313459, "body": "How? Main activity has 4 fragments under it, swipeUpView is inflated from Main Activity, how can I call the dismiss function on every fragment if swipeUpView method is from Main Activity?"}], "tags": [], "owner": {"reputation": 651, "user_id": 9996859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70a96acd8b90c93283345107873c06d1?s=128&d=identicon&r=PG&f=1", "display_name": "andrewedgar", "link": "https://stackoverflow.com/users/9996859/andrewedgar"}, "is_accepted": false, "score": 0, "last_activity_date": 1562160644, "creation_date": 1562160644, "answer_id": 56871335, "question_id": 56871108, "link": "https://stackoverflow.com/questions/56871108/how-to-hide-an-inflated-layout-when-clicked-outside-in-android/56871335#56871335", "title": "How to hide an inflated layout when clicked outside in android?", "body": "<p>You could set a new onClick for the fragment when the view is inflated, and then set it back when the view is dismissed.</p>\n"}], "owner": {"reputation": 11, "user_id": 11463948, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-uHnFACkYb-Y/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdxAYW1TV7or-_mxhyZdI_amhdc4w/mo/photo.jpg?sz=128", "display_name": "VTEC", "link": "https://stackoverflow.com/users/11463948/vtec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 137, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1562161085, "creation_date": 1562159872, "last_edit_date": 1562161085, "question_id": 56871108, "link": "https://stackoverflow.com/questions/56871108/how-to-hide-an-inflated-layout-when-clicked-outside-in-android", "title": "How to hide an inflated layout when clicked outside in android?", "body": "<p>I have 3 layouts:</p>\n\n<ol>\n<li>Main Layout</li>\n<li>1st fragment (1st screen of View Pager under Main Layout)</li>\n<li>SwipeUpView (Inflated layout by swipe up action)</li>\n</ol>\n\n<p>The question is, how do I dismiss/close the SwipeUp layout when I click outside of it when the 1st fragment is also a clickable layout which opens another activity.</p>\n\n<p>*Note: the SwipeUp Layout only takes 1/4 of the screen that is why I can be able to click out).</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>bottomDraggerView.setOnTouchListener(object:View.OnTouchListener\n\n    {\n        override fun onTouch(p0:View ?, p1:MotionEvent ?):Boolean {\n\n        when(p1 ?.action)\n        {\n            MotionEvent.ACTION_DOWN-&gt;{\n            startPoint = p1.rawY\n        }\n\n            MotionEvent.ACTION_MOVE -&gt;{\n            val moveY = Math.max(0.0f, p1.rawY + startPoint) + height\n            swipeUpView.y = moveY\n        }\n\n            MotionEvent.ACTION_UP -&gt;{\n\n            val diff = Math.abs(startPoint + p1.rawY)\n            var finalPosition :Float\n            if (diff &gt; height / 2) {\n                finalPosition = 0.0f + 270\n            } else {\n                finalPosition = 0.0f - height\n            }\n\n            swipeUpView.animate().y(finalPosition).setDuration(400).start()\n            Log.d(\"Swipe\", \"value \" + finalPosition.toString())\n        }\n\n            MotionEvent.ACTION_CANCEL -&gt;{\n            val diff = Math.abs(startPoint + p1.rawY)\n            var finalPosition :Float\n            if (diff &gt; height / 2) {\n                finalPosition = 0.0f - 400\n            } else {\n                finalPosition = 0.0f\n            }\n\n            swipeUpView.animate().y(finalPosition).setDuration(400).start()\n\n        }\n        }\n        return true\n    }\n\n    })\n</code></pre>\n\n<p>What I want is that if SwipeUpView is present or swiped up, when I click outside of it, it will close/animate down.</p>\n"}, {"tags": ["android", "kotlin", "android-databinding"], "comments": [{"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1562159940, "post_id": 56871088, "comment_id": 100290888, "body": "Are you sure that you are not using <code>@={}</code> instead of <code>@{}</code> for the data binding expression?"}, {"owner": {"reputation": 93, "user_id": 10022290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c986890e5d2ca892c62aff089e6be024?s=128&d=identicon&r=PG&f=1", "display_name": "nidomo", "link": "https://stackoverflow.com/users/10022290/nidomo"}, "reply_to_user": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1562160216, "post_id": 56871088, "comment_id": 100291079, "body": "@CommonsWare yes, just checked again: I use <code>@{}</code> syntax"}, {"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1562160374, "post_id": 56871088, "comment_id": 100291185, "body": "That&#39;s odd, as I do not know why data binding would need a setter in this case."}, {"owner": {"reputation": 403, "user_id": 10378312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/773b6d95a297d1c7a9491ec1687c674f?s=128&d=identicon&r=PG&f=1", "display_name": "Ryujin", "link": "https://stackoverflow.com/users/10378312/ryujin"}, "edited": false, "score": 0, "creation_date": 1562168411, "post_id": 56871088, "comment_id": 100295935, "body": "Is that typo &#39;andoid:text&#39; just in this post ?"}, {"owner": {"reputation": 93, "user_id": 10022290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c986890e5d2ca892c62aff089e6be024?s=128&d=identicon&r=PG&f=1", "display_name": "nidomo", "link": "https://stackoverflow.com/users/10022290/nidomo"}, "edited": false, "score": 0, "creation_date": 1562240600, "post_id": 56871088, "comment_id": 100321336, "body": "Yes, it was a typo only in post"}, {"owner": {"reputation": 6835, "user_id": 6305235, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/kEy0G.jpg?s=128&g=1", "display_name": "David Miguel", "link": "https://stackoverflow.com/users/6305235/david-miguel"}, "edited": false, "score": 0, "creation_date": 1605707095, "post_id": 56871088, "comment_id": 114733250, "body": "did you find any solution?"}], "owner": {"reputation": 93, "user_id": 10022290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c986890e5d2ca892c62aff089e6be024?s=128&d=identicon&r=PG&f=1", "display_name": "nidomo", "link": "https://stackoverflow.com/users/10022290/nidomo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 949, "favorite_count": 1, "answer_count": 0, "score": 4, "last_activity_date": 1562184009, "creation_date": 1562159846, "last_edit_date": 1562184009, "question_id": 56871088, "link": "https://stackoverflow.com/questions/56871088/android-databinding-how-to-get-field-value-of-kotlin-enum-class", "title": "Android Databinding: how to get field value of kotlin enum class?", "body": "<p>I have an enum class with two fields:</p>\n\n<pre><code>enum class MyEnum(val text1: String, val text2: String) {\n    A(\"a1\", \"a2\"),\n    B(\"b1\", \"b2\")\n}\n</code></pre>\n\n<p>And I want to use that field values in XML with databinding. My ViewModel provides an <code>ObservableField&lt;MyEnum&gt;</code> which schould be used in XML via databinding:</p>\n\n<pre><code>class MyViewModel() : ViewModel() {\n    val myEnum = ObservableField&lt;MyEnum&gt;(MyEnum.A)\n}\n</code></pre>\n\n<p>I try to read the field value in XML</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;layout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"&gt;\n\n    &lt;data&gt;\n\n        &lt;import type=\"com.example.MyEnum\" /&gt;\n\n        &lt;variable\n            name=\"vm\"\n            type=\"com.example.MyViewModel\" /&gt;\n    &lt;/data&gt;\n\n    &lt;FrameLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"&gt;\n\n        &lt;TextView\n            android:text=\"@{vm.myEnum.text1}\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"/&gt;\n\n    &lt;/FrameLayout&gt;\n&lt;/layout&gt;\n</code></pre>\n\n<p>but I get the following exception:\nCannot find the setter for attribute 'text' with parameter string</p>\n"}, {"tags": ["android", "kotlin", "dagger"], "comments": [{"owner": {"reputation": 1600, "user_id": 1292745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGKY6.gif?s=128&g=1", "display_name": "gpunto", "link": "https://stackoverflow.com/users/1292745/gpunto"}, "edited": false, "score": 0, "creation_date": 1562160664, "post_id": 56870693, "comment_id": 100291371, "body": "Why would you need to create a <code>@Provides</code> method for each one? Can&#39;t you just annotate each class constructor with <code>@Inject</code> or am I missing something?"}, {"owner": {"reputation": 2354, "user_id": 2260916, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/c4d2efa6fc13992b6dbb6ea3d1e2e02c?s=128&d=identicon&r=PG", "display_name": "Nanoc", "link": "https://stackoverflow.com/users/2260916/nanoc"}, "reply_to_user": {"reputation": 1600, "user_id": 1292745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGKY6.gif?s=128&g=1", "display_name": "gpunto", "link": "https://stackoverflow.com/users/1292745/gpunto"}, "edited": false, "score": 0, "creation_date": 1562227321, "post_id": 56870693, "comment_id": 100314084, "body": "I already have @Inject on the constructor, but i still need dagger to provide those classes"}, {"owner": {"reputation": 1600, "user_id": 1292745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGKY6.gif?s=128&g=1", "display_name": "gpunto", "link": "https://stackoverflow.com/users/1292745/gpunto"}, "edited": false, "score": 1, "creation_date": 1562231129, "post_id": 56870693, "comment_id": 100316107, "body": "If you have <code>@Inject</code> in each subclass constructor then Dagger will automatically provide these classes. You don&#39;t need <code>@Provides</code> methods."}, {"owner": {"reputation": 2354, "user_id": 2260916, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/c4d2efa6fc13992b6dbb6ea3d1e2e02c?s=128&d=identicon&r=PG", "display_name": "Nanoc", "link": "https://stackoverflow.com/users/2260916/nanoc"}, "reply_to_user": {"reputation": 1600, "user_id": 1292745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGKY6.gif?s=128&g=1", "display_name": "gpunto", "link": "https://stackoverflow.com/users/1292745/gpunto"}, "edited": false, "score": 0, "creation_date": 1562319864, "post_id": 56870693, "comment_id": 100346261, "body": "That does not seem right, if i remove the &quot;@Provides&quot; method i get this: [Dagger/MissingBinding] com.myapp.ExampleClass cannot be provided without an &quot;@Provides-annotated&quot; method."}, {"owner": {"reputation": 1600, "user_id": 1292745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGKY6.gif?s=128&g=1", "display_name": "gpunto", "link": "https://stackoverflow.com/users/1292745/gpunto"}, "edited": false, "score": 0, "creation_date": 1562321550, "post_id": 56870693, "comment_id": 100347105, "body": "Assuming <code>ExampleClass</code> is a concrete class, are you annotating its constructor?   Please post some code so we can understand what you&#39;re doing."}, {"owner": {"reputation": 2354, "user_id": 2260916, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/c4d2efa6fc13992b6dbb6ea3d1e2e02c?s=128&d=identicon&r=PG", "display_name": "Nanoc", "link": "https://stackoverflow.com/users/2260916/nanoc"}, "reply_to_user": {"reputation": 1600, "user_id": 1292745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGKY6.gif?s=128&g=1", "display_name": "gpunto", "link": "https://stackoverflow.com/users/1292745/gpunto"}, "edited": false, "score": 0, "creation_date": 1562573258, "post_id": 56870693, "comment_id": 100402295, "body": "i&#180;ve added example code"}, {"owner": {"reputation": 1600, "user_id": 1292745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGKY6.gif?s=128&g=1", "display_name": "gpunto", "link": "https://stackoverflow.com/users/1292745/gpunto"}, "edited": false, "score": 0, "creation_date": 1562573889, "post_id": 56870693, "comment_id": 100402579, "body": "Post also the code where you are trying to inject <code>ExampleClassImpl</code>"}, {"owner": {"reputation": 2354, "user_id": 2260916, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/c4d2efa6fc13992b6dbb6ea3d1e2e02c?s=128&d=identicon&r=PG", "display_name": "Nanoc", "link": "https://stackoverflow.com/users/2260916/nanoc"}, "reply_to_user": {"reputation": 1600, "user_id": 1292745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGKY6.gif?s=128&g=1", "display_name": "gpunto", "link": "https://stackoverflow.com/users/1292745/gpunto"}, "edited": false, "score": 0, "creation_date": 1562582714, "post_id": 56870693, "comment_id": 100407019, "body": "there it is, nothing fancy, i must be missing something if this is supposed to work"}], "answers": [{"comments": [{"owner": {"reputation": 2354, "user_id": 2260916, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/c4d2efa6fc13992b6dbb6ea3d1e2e02c?s=128&d=identicon&r=PG", "display_name": "Nanoc", "link": "https://stackoverflow.com/users/2260916/nanoc"}, "edited": false, "score": 0, "creation_date": 1562616612, "post_id": 56935104, "comment_id": 100423864, "body": "Thanks for your answer, but the viewmodel is in a different module and doesn&#39;t know about the implementation and the alternative is in fact creating a provider, exactly what i want to avoid. So my only option is a way of telling dagger to automatically provide all the classes that inherit from BaseExample interface in my module"}], "tags": [], "owner": {"reputation": 1600, "user_id": 1292745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGKY6.gif?s=128&g=1", "display_name": "gpunto", "link": "https://stackoverflow.com/users/1292745/gpunto"}, "is_accepted": false, "score": 0, "last_activity_date": 1562589375, "creation_date": 1562589375, "answer_id": 56935104, "question_id": 56870693, "link": "https://stackoverflow.com/questions/56870693/provide-all-childs-of-a-class-with-dagger/56935104#56935104", "title": "Provide all childs of a class with dagger", "body": "<p>You want to inject <code>ExampleClass</code>, but Dagger only knows about <code>ExampleClassImpl</code>. How would Dagger know that you want that specific subclass?<br>\nMoreover, you say you have <em>many</em> subclasses that you want to inject. How would Dagger know which one to provide to a constructor expecting the base class?</p>\n\n<p>If you want <code>ExampleViewModel</code> to get an instance of <code>ExampleClassImpl</code> then you can simply change the declaration to:</p>\n\n<pre><code>class ExampleViewModel @Inject constructor(val exmpl :ExampleClassImpl)\n</code></pre>\n\n<p>Doing so you lose the ability to swap the constructor argument with a different implementation of <code>ExampleClass</code>.</p>\n\n<p>The alternative is to have one <code>@Named @Provides</code> method per subclass. So something like:</p>\n\n<pre><code>// In your module\n@Provides\n@Named(\"impl1\")\nfun provideExampleClassImpl1(impl: ExampleClassImpl): ExampleClass = impl\n</code></pre>\n\n<pre><code>// When using the named dependency\nclass ExampleViewModel @Inject constructor(@Named(\"impl1\") val exmpl :ExampleClass)\n</code></pre>\n"}], "owner": {"reputation": 2354, "user_id": 2260916, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/c4d2efa6fc13992b6dbb6ea3d1e2e02c?s=128&d=identicon&r=PG", "display_name": "Nanoc", "link": "https://stackoverflow.com/users/2260916/nanoc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1562589375, "creation_date": 1562158685, "last_edit_date": 1562574643, "question_id": 56870693, "link": "https://stackoverflow.com/questions/56870693/provide-all-childs-of-a-class-with-dagger", "title": "Provide all childs of a class with dagger", "body": "<p>im creating a highly modular application, i have a lot of clases that need to be injected, all of them are childs (not direct childs) of the same class, none of them have constructor parameters.</p>\n\n<p>I want to avoid having to create a \"@Provides\" method for each one of them in my module.</p>\n\n<p>Is there a way to tell dagger to automatically provide all the classes that implement a base interface? Or is it possible to do it myself using reflection?</p>\n\n<p>Im using dagger-android with kotlin</p>\n\n<p><strong>Update</strong>: Ill post some code to illustrate</p>\n\n<p>In one of the modules i have this interface</p>\n\n<pre><code>interface ExampleClass: BaseExample {\n\n    fun doSomething()\n\n    }\n}\n</code></pre>\n\n<p>Then in the main app i implement it</p>\n\n<pre><code>class ExampleClassImpl @Inject constructor() : ExampleClass { \n    override fun doSomething(){\n    }\n}\n</code></pre>\n\n<p>The class where i need it is a Viewmodel created with dagger so inject works on the constructor.</p>\n\n<pre><code>class ExampleViewModel @Inject constructor(val exmpl :ExampleClass) : BaseViewModel { \n\n}\n</code></pre>\n\n<p>I want to inject that ExampleClassImpl, to do that i need to create a @module with a method annotated with @Provides or @Bind and return that class.</p>\n\n<p>Without the provider i get an error at compile time:</p>\n\n<blockquote>\n  <p>error: [Dagger/MissingBinding] com.myapp.ExampleClassImpl cannot be provided without an @Provides-annotated method.</p>\n</blockquote>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 5219, "user_id": 4562287, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-q6oUlSeB8Xo/AAAAAAAAAAI/AAAAAAAAAFg/NB15_H7Q0eo/photo.jpg?sz=128", "display_name": "Vivek Mishra", "link": "https://stackoverflow.com/users/4562287/vivek-mishra"}, "edited": false, "score": 3, "creation_date": 1562156919, "post_id": 56870158, "comment_id": 100288912, "body": "for 20 records, I don&#39;t think there will be any performance issue."}, {"owner": {"reputation": 1794, "user_id": 2537867, "user_type": "registered", "accept_rate": 24, "profile_image": "https://i.stack.imgur.com/mVGDH.jpg?s=128&g=1", "display_name": "BollMose", "link": "https://stackoverflow.com/users/2537867/bollmose"}, "reply_to_user": {"reputation": 5219, "user_id": 4562287, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-q6oUlSeB8Xo/AAAAAAAAAAI/AAAAAAAAAFg/NB15_H7Q0eo/photo.jpg?sz=128", "display_name": "Vivek Mishra", "link": "https://stackoverflow.com/users/4562287/vivek-mishra"}, "edited": false, "score": 0, "creation_date": 1562158745, "post_id": 56870158, "comment_id": 100290064, "body": "Yes, I think so. But I don&#39;t want to be challenged: why not use HashMap(or LinkedMap)? or why use a high weight structure?"}], "answers": [{"comments": [{"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1562157399, "post_id": 56870263, "comment_id": 100289197, "body": "it&#39;s not that easy unfortunately.. and what about <code>LinkedHashMap</code>?"}, {"owner": {"reputation": 1010, "user_id": 4083142, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yWH3Y.jpg?s=128&g=1", "display_name": "Sharan", "link": "https://stackoverflow.com/users/4083142/sharan"}, "reply_to_user": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1562157499, "post_id": 56870263, "comment_id": 100289254, "body": "The LinkedHashMap offers fast access to arbitrary elements as well as predictable ordering."}, {"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1562157618, "post_id": 56870263, "comment_id": 100289328, "body": "exactly.. my point was: choosing between a list or a map requires more considerations than simple item retrieval"}, {"owner": {"reputation": 1794, "user_id": 2537867, "user_type": "registered", "accept_rate": 24, "profile_image": "https://i.stack.imgur.com/mVGDH.jpg?s=128&g=1", "display_name": "BollMose", "link": "https://stackoverflow.com/users/2537867/bollmose"}, "edited": false, "score": 0, "creation_date": 1562158014, "post_id": 56870263, "comment_id": 100289580, "body": "It&#39;s no reason LinkedHashMap is fast. @SharanSalian"}, {"owner": {"reputation": 1010, "user_id": 4083142, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yWH3Y.jpg?s=128&g=1", "display_name": "Sharan", "link": "https://stackoverflow.com/users/4083142/sharan"}, "reply_to_user": {"reputation": 1794, "user_id": 2537867, "user_type": "registered", "accept_rate": 24, "profile_image": "https://i.stack.imgur.com/mVGDH.jpg?s=128&g=1", "display_name": "BollMose", "link": "https://stackoverflow.com/users/2537867/bollmose"}, "edited": false, "score": 0, "creation_date": 1562158628, "post_id": 56870263, "comment_id": 100289982, "body": "@BollMose Check the edit, There is always a trade off. Anyways use-case dependent. Always go for scalability."}], "tags": [], "owner": {"reputation": 1010, "user_id": 4083142, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yWH3Y.jpg?s=128&g=1", "display_name": "Sharan", "link": "https://stackoverflow.com/users/4083142/sharan"}, "is_accepted": true, "score": 2, "last_activity_date": 1562158570, "last_edit_date": 1562158570, "creation_date": 1562157176, "answer_id": 56870263, "question_id": 56870158, "link": "https://stackoverflow.com/questions/56870158/hashmap-or-list-in-kotlin-when-size-is-only-20/56870263#56870263", "title": "HashMap or List in Kotlin when size is only 20?", "body": "<ul>\n<li><p>When you need a structure from which you will be retrieving items randomly - use a HashMap</p></li>\n<li><p>When you will be retrieving items in order (e.g. using a for loop) - use an List</p></li>\n</ul>\n\n<p>Scalability: \nLinkedHashMap is the most memory-hungry collection in JDK. It extends HashMap by using LinkedHashMap.Entry as an entry in the internal array of entries. LinkedHashMap.Entry extends HashMap.Entry by adding \u2018before\u2019 and \u2018after\u2019 pointers, thus implementing a linked dequeue. For us it means that LinkedHashMap.Entry consumes 40 bytes (8 bytes more than HashMap.Entry).</p>\n\n<p>It means that LinkedHashMap consumes 40 * SIZE + 4 * CAPACITY bytes. </p>\n"}], "owner": {"reputation": 1794, "user_id": 2537867, "user_type": "registered", "accept_rate": 24, "profile_image": "https://i.stack.imgur.com/mVGDH.jpg?s=128&g=1", "display_name": "BollMose", "link": "https://stackoverflow.com/users/2537867/bollmose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 56870263, "answer_count": 1, "score": 0, "last_activity_date": 1562158570, "creation_date": 1562156804, "question_id": 56870158, "link": "https://stackoverflow.com/questions/56870158/hashmap-or-list-in-kotlin-when-size-is-only-20", "title": "HashMap or List in Kotlin when size is only 20?", "body": "<p>I have a dataset that contains only 20 piece of data, I will search them for 2 or 3 times, as</p>\n\n<pre><code>data class Person{\n   val fullName: String,\n   val someField: SomeClass\n}\n</code></pre>\n\n<p>I know there are some concerns of HashMap just as memory and performance, \nand using HashMap will save several lines of code for me.  I'm not sure which is best for me, List or HashMap?</p>\n"}, {"tags": ["android", "kotlin", "android-adapter", "android-databinding", "kotlin-android-extensions"], "comments": [{"owner": {"reputation": 202, "user_id": 10173485, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-TRl-f37Los4/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oFZ0CBjJEFDXoaQBQSOAXXcxE9bA/mo/photo.jpg?sz=128", "display_name": "Daniel Spiess", "link": "https://stackoverflow.com/users/10173485/daniel-spiess"}, "edited": false, "score": 0, "creation_date": 1562156456, "post_id": 56869761, "comment_id": 100288646, "body": "Hi, i had the same thoughts so i tried out the Butterknife library and since then i only work with Butterknife, for me it makes my life really easier."}, {"owner": {"reputation": 22254, "user_id": 4758255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SBvf3.jpg?s=128&g=1", "display_name": "\u05d9\u05e9\u05d5 \u05d0\u05d5\u05d4\u05d1 \u05d0\u05d5\u05ea\u05da", "link": "https://stackoverflow.com/users/4758255/%d7%99%d7%a9%d7%95-%d7%90%d7%95%d7%94%d7%91-%d7%90%d7%95%d7%aa%d7%9a"}, "reply_to_user": {"reputation": 202, "user_id": 10173485, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-TRl-f37Los4/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oFZ0CBjJEFDXoaQBQSOAXXcxE9bA/mo/photo.jpg?sz=128", "display_name": "Daniel Spiess", "link": "https://stackoverflow.com/users/10173485/daniel-spiess"}, "edited": false, "score": 0, "creation_date": 1562158075, "post_id": 56869761, "comment_id": 100289627, "body": "I always avoid using databinding. And like @DanielSpiess says, ButterKnife seems give us more benefit than databinding. For me, a layout should always be a UI without any code. So that whenever I update the code and my co-worker update the layout, we can do our work without interfering each other. Decoupling code and layout should be the priority."}, {"owner": {"reputation": 1557, "user_id": 3330058, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/C010X.png?s=128&g=1", "display_name": "Giorgos Neokleous", "link": "https://stackoverflow.com/users/3330058/giorgos-neokleous"}, "edited": false, "score": 0, "creation_date": 1562182845, "post_id": 56869761, "comment_id": 100302436, "body": "Who said that BindingAdapter&#39;s purpose is to save time? Binding adapter simply enables binding a widget&#39;s attributes in XML, it can be for a variety of reasons but saving time is not one of them in my opinion."}, {"owner": {"reputation": 865, "user_id": 10922928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fcec10c285df503a650a817142f2fef?s=128&d=identicon&r=PG&f=1", "display_name": "solaza", "link": "https://stackoverflow.com/users/10922928/solaza"}, "reply_to_user": {"reputation": 1557, "user_id": 3330058, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/C010X.png?s=128&g=1", "display_name": "Giorgos Neokleous", "link": "https://stackoverflow.com/users/3330058/giorgos-neokleous"}, "edited": false, "score": 0, "creation_date": 1562218676, "post_id": 56869761, "comment_id": 100310406, "body": "@GiorgosNeokleous What are those reasons?"}, {"owner": {"reputation": 1557, "user_id": 3330058, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/C010X.png?s=128&g=1", "display_name": "Giorgos Neokleous", "link": "https://stackoverflow.com/users/3330058/giorgos-neokleous"}, "edited": false, "score": 0, "creation_date": 1562228802, "post_id": 56869761, "comment_id": 100314801, "body": "@solaza You can find some of them at the <a href=\"https://developer.android.com/topic/libraries/data-binding/binding-adapters\" rel=\"nofollow noreferrer\">official documentation</a>. The way I see them are utils methods for Layout files. If you are using Databinding it will also enable you to write any presentation logic in the adapter if need to, but they don&#39;t have to save time or be re-usable."}], "owner": {"reputation": 865, "user_id": 10922928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fcec10c285df503a650a817142f2fef?s=128&d=identicon&r=PG&f=1", "display_name": "solaza", "link": "https://stackoverflow.com/users/10922928/solaza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562155493, "creation_date": 1562155493, "question_id": 56869761, "link": "https://stackoverflow.com/questions/56869761/is-bindingadapter-really-saving-our-time", "title": "Is BindingAdapter really saving our time", "body": "<p>I am working on new project and just started using Databinding. I heard people talking abaout code reduction.I have a RecyclerView in fragment. I have a simple ConstraintLayout in which I have 3 TextViews. This is in my Adapter for RecyclerView.</p>\n\n<p>That aditional +\" nazv\" is just a sample and I could use String Extension.</p>\n\n<pre><code>    fun bind(item: Mkdo) {\n        binding.txtMkdoNaziv.text = item.nazv+\" nazv\"\n        binding.txtMkdoPost.text = item.post\n        binding.txtmkdoPostNaziv.text = item.postNaziv\n    }\n</code></pre>\n\n<p>ConstraintLayout for single RecyclerView row (deleted positioning properties)</p>\n\n<pre><code>&lt;androidx.constraintlayout.widget.ConstraintLayout\n        android:id=\"@+id/constraintRowMkdo\" \n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"&gt;\n\n    &lt;TextView\n            android:id=\"@+id/txtMkdoNaziv\"/&gt;\n    &lt;TextView\n            android:id=\"@+id/txtMkdoPost\"/&gt;\n    &lt;TextView\n            android:id=\"@+id/txtmkdoPostNaziv\"/&gt;\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n\n<p>This works just fine.\nIf I want to convert it to Databinding I have to add:</p>\n\n<pre><code>        fun bind(item: Mkdo) {\n        binding.mkdo=item\n        binding.executePendingBindings()\n    }\n</code></pre>\n\n<p>And BindingAdapter</p>\n\n<pre><code>@BindingAdapter(\"setNazv\")\nfun TextView.setNazv(item:Mkdo?){\n    item?.let {\n    text=\"${item.nazv} nazv\"\n    }\n}\n</code></pre>\n\n<p>ConstraintLayout for single RecyclerView row (deleted positioning properties) with Databinding</p>\n\n<pre><code>    &lt;androidx.constraintlayout.widget.ConstraintLayout\n        android:id=\"@+id/constraintRowMkdo\" \n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"&gt;\n\n    &lt;TextView\n            android:id=\"@+id/txtMkdoNaziv\"\n            app:setNazv=\"@{mkdo}\"\"/&gt;\n    &lt;TextView\n            android:id=\"@+id/txtMkdoPost\"\n            android:text=\"@{mkdo.post}\"/&gt;\n    &lt;TextView\n            android:id=\"@+id/txtmkdoPostNaziv\"\n            android:text=\"@{mkdo.postNaziv}\"/&gt;\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n\n<p>This makes constraintRowMkdo nonreusable and in my opinion adds more work than without it.</p>\n\n<p>Also if I have some string formatting I need to have it on two places string Extension and BindingAdapter. I can reuse Extension but it is still on who places.</p>\n\n<p>What are your toughts on this?\nAm I missing something?\nAre there any aditional benefits of using it?\nThanks </p>\n"}, {"tags": ["android", "firebase", "kotlin", "firebase-authentication"], "answers": [{"tags": [], "owner": {"reputation": 153, "user_id": 9495357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vfWXJ.png?s=128&g=1", "display_name": "Oktawian", "link": "https://stackoverflow.com/users/9495357/oktawian"}, "is_accepted": true, "score": 0, "last_activity_date": 1563383207, "creation_date": 1563383207, "answer_id": 57081002, "question_id": 56869706, "link": "https://stackoverflow.com/questions/56869706/android-firebase-onemailverifiedlistener/57081002#57081002", "title": "Android Firebase onEmailVerifiedListener", "body": "<p>I had to add one line of code: <code>auth.currentUser!!.reload()</code></p>\n\n<p>Hope it help you</p>\n"}], "owner": {"reputation": 153, "user_id": 9495357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vfWXJ.png?s=128&g=1", "display_name": "Oktawian", "link": "https://stackoverflow.com/users/9495357/oktawian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 57081002, "answer_count": 1, "score": 0, "last_activity_date": 1563383207, "creation_date": 1562155266, "question_id": 56869706, "link": "https://stackoverflow.com/questions/56869706/android-firebase-onemailverifiedlistener", "title": "Android Firebase onEmailVerifiedListener", "body": "<p>I have a verify email activity - \"We send email to..\" and so on. I want to create \"onEmailVerifiedListener\" by starting the thread in this way:</p>\n\n<pre><code>private fun startThread(){\n    thread = object: Thread(){\n        override fun run() {\n            while(threadRunning){\n                Log.d(\"VERIFYTAG\", \"${auth.currentUser!!.isEmailVerified}\")\n                checkUserHasVerifiedEmail()\n                sleep(3000)\n            }\n        }\n    }\n    thread.start()\n}\n</code></pre>\n\n<p>But even that I verify my e-mail address - <code>auth.currentUser!!.isEmailVerified</code> returns false:</p>\n\n<blockquote>\n  <p>2019-07-03 13:54:49.923 18799-19018/pl.project.project D/VERIFYTAG: false</p>\n</blockquote>\n\n<p>Why is the FirebaseAuth lying?</p>\n"}, {"tags": ["kotlin", "lambda"], "answers": [{"tags": [], "owner": {"reputation": 4438, "user_id": 5427663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f9c9fe9199349793db217d3a9e9596?s=128&d=identicon&r=PG&f=1", "display_name": "TheOperator", "link": "https://stackoverflow.com/users/5427663/theoperator"}, "is_accepted": true, "score": 2, "last_activity_date": 1562155582, "creation_date": 1562155582, "answer_id": 56869789, "question_id": 56869030, "link": "https://stackoverflow.com/questions/56869030/kotlin-checking-result-inside-lambda/56869789#56869789", "title": "Kotlin: checking result inside lambda", "body": "<p>You can use <code>also()</code> to do additional operations on an object, while returning itself:</p>\n\n<p>Since <code>also()</code> is an inline function, Kotlin allows you to use <em>non-local returns</em> to exit the current function from within the lambda.</p>\n\n<pre><code>repository!!.getAllByDateForUser(userId, date)\n    .map { ... }\n    .also { list -&gt;\n        if (list.isEmpty())\n            return xy // exit function (not only lambda)\n    }\n    .flatMap { ... }\n</code></pre>\n\n<p>Of course, you can do that on a single line per chaining call, if you prefer this style:</p>\n\n<pre><code>repository!!.getAllByDateForUser(userId, date)\n    .map { ... }\n    .also { if (it.isEmpty()) return xy }\n    .flatMap { ... }\n</code></pre>\n"}], "owner": {"reputation": 608, "user_id": 8005819, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HotHm.jpg?s=128&g=1", "display_name": "\u0412\u044f\u0447\u0435\u0441\u043b\u0430\u0432 \u0427\u0435\u0440\u043d\u044b\u0448\u043e\u0432", "link": "https://stackoverflow.com/users/8005819/%d0%92%d1%8f%d1%87%d0%b5%d1%81%d0%bb%d0%b0%d0%b2-%d0%a7%d0%b5%d1%80%d0%bd%d1%8b%d1%88%d0%be%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 56869789, "answer_count": 1, "score": 0, "last_activity_date": 1562155582, "creation_date": 1562153037, "question_id": 56869030, "link": "https://stackoverflow.com/questions/56869030/kotlin-checking-result-inside-lambda", "title": "Kotlin: checking result inside lambda", "body": "<p>I have lambda expression:</p>\n\n<pre><code>repository!!.getAllByDateForUser(userId, date)\n                .map { ... }\n                .flatMap { ... }\n</code></pre>\n\n<p>and so on. I need to check data after executing first row. For example, check that result list is not empty. And if it's empty, return other object or throw exception. If it is not empty, I run expression further. But I want to check it within expression.</p>\n\n<p>Please, advice, how to do it.</p>\n"}, {"tags": ["android", "kotlin", "mvvm", "android-recyclerview", "binding"], "answers": [{"tags": [], "owner": {"reputation": 146, "user_id": 6845127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e4b57b6367c71bfad4bdd7dea9202aa?s=128&d=identicon&r=PG&f=1", "display_name": "A.K.", "link": "https://stackoverflow.com/users/6845127/a-k"}, "is_accepted": true, "score": 1, "last_activity_date": 1565011094, "creation_date": 1565011094, "answer_id": 57359452, "question_id": 56869004, "link": "https://stackoverflow.com/questions/56869004/binding-an-int-list-to-a-view-which-is-already-in-a-bound-outer-recycler-view/57359452#57359452", "title": "Binding an Int-List to a view (which is already in a bound outer recycler view)", "body": "<p>here is the solution for this problem.</p>\n\n<p>First write a generic BindingAdapter to bind a list of items (entries) and a layout to a LinearLayout.</p>\n\n<pre><code>@BindingAdapter(\"entries\", \"layout\")\nfun &lt;T&gt; setEntries(viewGroup: ViewGroup, entries: List&lt;T&gt;?, layout: Int) {\n    viewGroup.removeAllViews()\n    if (entries != null) {\n        val inflater: LayoutInflater =\n            viewGroup.context.getSystemService(Context.LAYOUT_INFLATER_SERVICE) as     LayoutInflater\n        for (i in 0 until entries.size) {\n            var entry: T = entries[i]\n            var binding: ViewDataBinding = DataBindingUtil.inflate(inflater, layout, viewGroup, true)\n            binding.setVariable(BR.data, entry)\n        }\n    }\n}\n</code></pre>\n\n<p>Then create an layout (simple_item) that has a integer variable named data</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;layout xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt;\n    &lt;data&gt;\n        &lt;variable\n                name=\"data\"\n                type=\"Integer\"&gt;\n        &lt;/variable&gt;\n    &lt;/data&gt;\n\n        &lt;TextView android:layout_width=\"wrap_content\"\n                  android:layout_height=\"wrap_content\"\n                    android:text=\"@{String.valueOf(data)}\"/&gt;\n&lt;/layout&gt;\n</code></pre>\n\n<p>Then it\u00b4s possible to bind the list of integers and the layout to an LinearLayout.</p>\n\n<pre><code>&lt;LinearLayout app:entries=\"@{viewmodel.examples}\"\n                          app:layout=\"@{@layout/simple_item}\"\n                          android:layout_width=\"wrap_content\"\n                          android:orientation=\"horizontal\"&gt;\n            &lt;/LinearLayout&gt;\n</code></pre>\n"}], "owner": {"reputation": 146, "user_id": 6845127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e4b57b6367c71bfad4bdd7dea9202aa?s=128&d=identicon&r=PG&f=1", "display_name": "A.K.", "link": "https://stackoverflow.com/users/6845127/a-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 57359452, "answer_count": 1, "score": 0, "last_activity_date": 1565011531, "creation_date": 1562152918, "last_edit_date": 1565011531, "question_id": 56869004, "link": "https://stackoverflow.com/questions/56869004/binding-an-int-list-to-a-view-which-is-already-in-a-bound-outer-recycler-view", "title": "Binding an Int-List to a view (which is already in a bound outer recycler view)", "body": "<p>i am from the C# world and am taking my first steps in the Kotlin/Android environment.</p>\n\n<p>I am a bit spoiled by the MVVM binding in C# and would like to display data in the UI with as little code as possible.</p>\n\n<p>Here the shortened code that already works:</p>\n\n<p>MainViewmodel</p>\n\n<pre><code>class MainViewModel: BaseViewModel() {\n   var examples = MutableLiveData&lt;List&lt;ExampleData&gt;&gt;(emptyList())\n\n   // some rest methods that loads the data\n}\n</code></pre>\n\n<p>DataClass</p>\n\n<pre><code>data class ExampleData(var name: String, var date: String, var ids:List&lt;Int&gt;) \n</code></pre>\n\n<p>Fragment</p>\n\n<pre><code>class MainFragment : Fragment {\n   // viewmodel and binding vals\n\n   override fun onCreateView(\n    inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n       binding = DataBindingUtil.inflate&lt;FragmentMainBinding&gt;(inflater, R.layout.fragment_main, container, false)\n       binding.setVariable(BR.viewmodel, viewModel)\n       binding.lifecycleOwner = viewLifecycleOwner\n\n       viewModel.reloadExampleData()\n\n       return binding.root\n   }       \n\n    override fun onActivityCreated(savedInstanceState: Bundle?) {\n        super.onActivityCreated(savedInstanceState)\n\n        val exampleDataAdapter = GenericListAdapter&lt;ExampleData&gt;(BR.examples, R.layout.example_item)\n        recycler_view_examples.layoutManager = LinearLayoutManager(this.context)\n        recycler_view_examples.adapter = exampleDataAdapter \n    }\n}\n</code></pre>\n\n<p>The fragment layout</p>\n\n<pre><code>&lt;layout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"&gt;\n\n&lt;data&gt;\n    &lt;variable\n            name=\"viewmodel\"\n            type=\"com.test.viewmodel.MainViewModel\"/&gt;\n&lt;/data&gt;\n   &lt;androidx.constraintlayout.widget.ConstraintLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        tools:context=\".view.MainFragment\"&gt;\n\n    &lt;TextView\n            android:id=\"@+id/textview_header\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            app:layout_constraintStart_toStartOf=\"parent\"\n            app:layout_constraintTop_toTopOf=\"parent\"\n            android:text=\"Examples\"/&gt;\n\n    &lt;androidx.recyclerview.widget.RecyclerView\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginBottom=\"50dp\"\n            android:id=\"@+id/recycler_view_ziehungen\"\n            data=\"@{viewmodel.examples}\"\n            android:layout_margin=\"8dp\"\n            app:layout_constraintStart_toStartOf=\"parent\"\n            app:layout_constraintEnd_toEndOf=\"parent\"\n            app:layout_constraintTop_toBottomOf=\"@+id/textview_header\"\n    /&gt;\n\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n\n&lt;/layout&gt;\n</code></pre>\n\n<p>The example_item layout</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n\n&lt;layout xmlns:tools=\"http://schemas.android.com/tools\"&gt;\n&lt;data&gt;\n    &lt;variable\n            name=\"exampleData\"\n            type=\"com.text.model.ExampleData\"&gt;\n    &lt;/variable&gt;\n&lt;/data&gt;\n&lt;androidx.cardview.widget.CardView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n                                   android:layout_width=\"match_parent\"\n                                   android:layout_height=\"wrap_content\"\n                                   android:layout_marginEnd=\"8dp\"\n                                   android:layout_marginStart=\"8dp\"\n                                   android:layout_marginTop=\"8dp\"&gt;\n\n    &lt;RelativeLayout android:layout_width=\"wrap_content\"\n                    android:layout_height=\"wrap_content\"\n                    android:padding=\"8dp\"&gt;\n\n        &lt;TextView android:layout_width=\"wrap_content\"\n                  android:layout_height=\"wrap_content\"\n                  android:id=\"@+id/text_view_name\"\n                  android:text=\"@{exampleData.name}\"\n                  android:maxLines=\"1\"\n                  android:layout_alignParentStart=\"true\"\n                  /&gt;\n\n        &lt;TextView android:layout_width=\"wrap_content\"\n                  android:layout_height=\"wrap_content\"\n                  android:id=\"@+id/text_view_date\"\n                  android:text=\"@{exampleData.datum}\"\n                  android:maxLines=\"1\"\n                  android:layout_alignParentEnd=\"true\"\n                  /&gt;\n\n    &lt;!-- here is my problem --&gt;\n        &lt;androidx.recyclerview.widget.RecyclerView android:id=\"@+id/list_view_ids\"\n                                                   android:layout_width=\"wrap_content\"\n                                                   android:layout_height=\"wrap_content\"\n\n                                                   android:layout_alignParentStart=\"true\"\n                                                   android:orientation=\"horizontal\"\n                                                   android:layout_below=\"@+id/text_view_tag\"&gt;\n\n        &lt;/androidx.recyclerview.widget.RecyclerView&gt;\n\n\n\n    &lt;/RelativeLayout&gt;\n   &lt;/androidx.cardview.widget.CardView&gt;\n &lt;/layout&gt;\n</code></pre>\n\n<p>That code shows a list with all entries of the examples list.</p>\n\n<p><strong>Now my question</strong></p>\n\n<p>I am trying to show the int-List (ExampleData.ids) in every example_item.\nBut i don\u00b4t know how to bind these inner list to the recycler view.</p>\n"}, {"tags": ["java", "android", "kotlin", "jackson", "pojo"], "answers": [{"tags": [], "owner": {"reputation": 416, "user_id": 9724432, "user_type": "registered", "profile_image": "https://graph.facebook.com/2133159033598057/picture?type=large", "display_name": "Sushil Mittal", "link": "https://stackoverflow.com/users/9724432/sushil-mittal"}, "is_accepted": false, "score": 0, "last_activity_date": 1562153978, "last_edit_date": 1562153978, "creation_date": 1562153321, "answer_id": 56869114, "question_id": 56868962, "link": "https://stackoverflow.com/questions/56868962/jackson-mapper-not-map-class-inside-arraylist/56869114#56869114", "title": "Jackson mapper not map class inside arrayList", "body": "<p>You can use below code snippet for reference same:</p>\n\n<pre><code>extractObjectWithTypeReference(data,new TypeReference&lt;DataListUploadRequest&lt;MakeModelUploadData&gt;&gt;(){});\n</code></pre>\n\n<p>create below generic method:</p>\n\n<pre><code>public static &lt;T&gt; T extractObjectWithTypeReference(Object object,TypeReference&lt;?&gt; typeReference) {\n    return new ObjectMapper().convertValue(object,typeReference);\n}\n</code></pre>\n\n<p>my class as below:</p>\n\n<pre><code>public class DataListUploadRequest&lt;T&gt; {\n    private List&lt;T&gt; dataList;\n    public List&lt;T&gt; getDataList() {\n        return dataList;\n    }\n    public void setDataList(List&lt;T&gt; dataList) {\n        this.dataList = dataList;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 159, "user_id": 6706710, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/0d3ffe63e0d048a73656e46f76b435fb?s=128&d=identicon&r=PG&f=1", "display_name": "stefano capra", "link": "https://stackoverflow.com/users/6706710/stefano-capra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562153978, "creation_date": 1562152786, "question_id": 56868962, "link": "https://stackoverflow.com/questions/56868962/jackson-mapper-not-map-class-inside-arraylist", "title": "Jackson mapper not map class inside arrayList", "body": "<p>if I have this POJO:</p>\n\n<pre><code>class Day {\n   val meals: MutableList&lt;Meal&gt; = mutableListOf()\n   lateinit val meal: Meal\n}\n</code></pre>\n\n<p>and </p>\n\n<pre><code>class Meal {\n\n}\n</code></pre>\n\n<p>If I try to convert an <code>HashMap</code> <code>map</code> representing the <code>Day</code> model, like this:</p>\n\n<pre><code>val obj = objectMapper.convertValue(map, Day::class.java)\n</code></pre>\n\n<p>Jackson convert to meal only the variable <code>meal</code> and not the list. Instead, <code>meals</code> will be an arrayList of <code>HashMap</code>. </p>\n\n<p>I tried to convert manually every Hashmap inside <code>meals</code> to a <code>Meal</code> object and it worked, so the Hashmap inside can be converted to <code>Meal</code> and there are no errors.</p>\n\n<p>What I'm trying to find is how to do it automatically.</p>\n"}, {"tags": ["android", "kotlin", "google-cloud-messaging", "retrofit2"], "comments": [{"owner": {"reputation": 1679, "user_id": 2042002, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fdb6380b08222d91342aee5af292c75a?s=128&d=identicon&r=PG&f=1", "display_name": "Sanwal Singh", "link": "https://stackoverflow.com/users/2042002/sanwal-singh"}, "edited": false, "score": 0, "creation_date": 1562152713, "post_id": 56868888, "comment_id": 100286368, "body": "try to print your message first."}, {"owner": {"reputation": 5219, "user_id": 4562287, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-q6oUlSeB8Xo/AAAAAAAAAAI/AAAAAAAAAFg/NB15_H7Q0eo/photo.jpg?sz=128", "display_name": "Vivek Mishra", "link": "https://stackoverflow.com/users/4562287/vivek-mishra"}, "edited": false, "score": 1, "creation_date": 1562152737, "post_id": 56868888, "comment_id": 100286385, "body": "Don&#39;t expose your api keys like that."}, {"owner": {"reputation": 5219, "user_id": 4562287, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-q6oUlSeB8Xo/AAAAAAAAAAI/AAAAAAAAAFg/NB15_H7Q0eo/photo.jpg?sz=128", "display_name": "Vivek Mishra", "link": "https://stackoverflow.com/users/4562287/vivek-mishra"}, "edited": false, "score": 0, "creation_date": 1562152951, "post_id": 56868888, "comment_id": 100286524, "body": "Since you have data content in your notification, you need to write code to show your notification yourself"}, {"owner": {"reputation": 103, "user_id": 11119257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7690095e831c2983fe900d554e584f29?s=128&d=identicon&r=PG&f=1", "display_name": "Rahma El Ouni", "link": "https://stackoverflow.com/users/11119257/rahma-el-ouni"}, "edited": false, "score": 0, "creation_date": 1562153362, "post_id": 56868888, "comment_id": 100286753, "body": "how i can show my notification ? the onMessageReceived can&#39;t show my notification?"}, {"owner": {"reputation": 689, "user_id": 7527226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TKzMU.jpg?s=128&g=1", "display_name": "Jins Lukose", "link": "https://stackoverflow.com/users/7527226/jins-lukose"}, "edited": false, "score": 0, "creation_date": 1562153400, "post_id": 56868888, "comment_id": 100286777, "body": "check if notification is received when your app is open. I think notification will not show when app is closed.Try to send a notification when your app open and let me know"}, {"owner": {"reputation": 103, "user_id": 11119257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7690095e831c2983fe900d554e584f29?s=128&d=identicon&r=PG&f=1", "display_name": "Rahma El Ouni", "link": "https://stackoverflow.com/users/11119257/rahma-el-ouni"}, "edited": false, "score": 0, "creation_date": 1562153692, "post_id": 56868888, "comment_id": 100286950, "body": "even if my app is open , the notification not showing"}, {"owner": {"reputation": 689, "user_id": 7527226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TKzMU.jpg?s=128&g=1", "display_name": "Jins Lukose", "link": "https://stackoverflow.com/users/7527226/jins-lukose"}, "edited": false, "score": 0, "creation_date": 1562153941, "post_id": 56868888, "comment_id": 100287103, "body": "then i recommend you should add some debugging points in your code so you can confirm whether it is and integration problem or code problem. Also check the log"}, {"owner": {"reputation": 103, "user_id": 11119257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7690095e831c2983fe900d554e584f29?s=128&d=identicon&r=PG&f=1", "display_name": "Rahma El Ouni", "link": "https://stackoverflow.com/users/11119257/rahma-el-ouni"}, "edited": false, "score": 0, "creation_date": 1562155799, "post_id": 56868888, "comment_id": 100288208, "body": "my fault is when check my remoteMessag.I resolved it by changing the function with &quot;remoteMessage?.data != null&quot;"}], "owner": {"reputation": 103, "user_id": 11119257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7690095e831c2983fe900d554e584f29?s=128&d=identicon&r=PG&f=1", "display_name": "Rahma El Ouni", "link": "https://stackoverflow.com/users/11119257/rahma-el-ouni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 238, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1562152916, "creation_date": 1562152468, "last_edit_date": 1562152916, "question_id": 56868888, "link": "https://stackoverflow.com/questions/56868888/i-send-notification-to-device-with-fcm-but-i-cant-receive-the-notification", "title": "I send notification to device with fcm but i can&#39;t receive the notification", "body": "<p>I want to send notification to other device.I used a HTTP post request to FCM server with the Method Type: POST and the URL:<a href=\"https://fcm.googleapis.com/fcm/send\" rel=\"nofollow noreferrer\">https://fcm.googleapis.com/fcm/send</a> .When i tested it  with postman,i received the notification in my device but when i implemented the FCM service with retrofit,I get response 200 but but any notification is received.Can some one help me please?    </p>\n\n<pre><code>//My ApiService\n    @Headers(\"Authorization:key=******\")\n        @POST(\"https://fcm.googleapis.com/fcm/send\")\n        fun sendNotification(@Body body:NotificationRequest):Call&lt;ResponseBody&gt;\n\n\n\n\n\n val fm=FirebaseMessaging.getInstance()\n            var token=FirebaseInstanceId.getInstance().token\n            val datanoty=DataContent(\"my_custom_value\",true)\n            val noty=NotificationContent(\"title\",\"body text\",\"ic_notification\")\n            val notificationRequest=NotificationRequest(token!!,datanoty,noty)\n           // tt.sendRegistrationToServer(FirebaseInstanceId.getInstance().token)\n            RetrofitClient.instance.sendNotification(\n                    notificationRequest)\n                    .enqueue(object : Callback&lt;ResponseBody&gt; {\n                override fun onResponse(call: Call&lt;ResponseBody&gt;, response: Response&lt;ResponseBody&gt;) {\n                    if( response.code()==200)\n                   Toast.makeText(context,\"sendedYes\",Toast.LENGTH_SHORT).show()\n                    else if(response.code()==400)\n                    Toast.makeText(context,\"sendedNo\",Toast.LENGTH_SHORT).show()\n                    response.body()\n                }\n\n                override fun onFailure(call: Call&lt;ResponseBody&gt;, t: Throwable) {\n\n                }\n\n\n\n\n    //My notification Request\n    class NotificationRequest(\n\n            var to:String,\n            data:DataContent,\n            notification:NotificationContent ):Serializable\n\n    class DataContent(my_custom_key:String,my_custom_key2:Boolean):Serializable\n    class NotificationContent(title:String,body:String,icon:String):Serializable\n\n\n\n\n\n    //myFirebaseMessagingService\n     override fun onMessageReceived(remoteMessage: RemoteMessage?) {\n\n            if (remoteMessage?.notification != null) {\n                showNotification(remoteMessage.notification?.title, remoteMessage.notification?.body)\n            }\n\n\n\n            super.onMessageReceived(remoteMessage)\n\n        }\n        private fun showNotification(title: String?, body: String?) {\n            val channelId=\"\"\n            val notificationId=101\n            val manager =  this?.getSystemService(Context.NOTIFICATION_SERVICE) as NotificationManager\n            createNotificationChannel(manager);\n    //        val intent=FragmentTransactionUtilities.pushFragment(fragmentManager as FragmentManager,BlankFragment2.newInstance(\"\",\"\"))\n            val intent= Intent(this, MapsActivity::class.java)\n            val pendingIntent= PendingIntent.getActivity(this,0,intent, PendingIntent.FLAG_UPDATE_CURRENT)\n            val soundUri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION)\n            var builder = this?.let {\n                NotificationCompat.Builder(it,\"default_channel\")\n                        //.setSmallIcon(R.drawable.notification_icon)\n\n                        .setContentText(\"\")\n                        .setSmallIcon(com.example.rahma.alerteaccidentapp.R.drawable.navigation_empty_icon)\n                        .setContentTitle(\"New Accident Added\")\n                        //.setStyle(Notification.BigTextStyle().bigText(\"Much longer text that cannot fit one line...\"))\n                        .setStyle(NotificationCompat.BigTextStyle()\n                                .bigText(\"Much longer text that cannot fit one line...\"))\n                        .setPriority(NotificationCompat.PRIORITY_DEFAULT)\n                        .setContentIntent(pendingIntent)\n                        .setAutoCancel(true)//close auto noty after click\n                        .setSound(soundUri)\n                        .build()\n            }\n\n            if (builder != null) {\n                with(this?.let { NotificationManagerCompat.from(it) }) {\n                    // notificationId is a unique int for each notification that you must define\n                    manager?.notify(1, builder)\n                }\n            }\n        }\n\n        private fun createNotificationChannel(notificationManager: NotificationManager) {\n            NotificationChannel.DEFAULT_CHANNEL_ID\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n                //Create channel only if it is not already created\n                if (notificationManager.getNotificationChannel(DEFAULT_CHANNEL_ID) == null) {\n                    notificationManager.createNotificationChannel( NotificationChannel(\n                            DEFAULT_CHANNEL_ID, DEFAULT_CHANNEL_NAME, NotificationManager.IMPORTANCE_DEFAULT\n                    ));\n                }\n            }\n        }\n\n        override fun onNewToken(token: String?) {\n            super.onNewToken(token)\n            Toast.makeText(this, \"Refreshed token: \" + token,Toast.LENGTH_SHORT).show()\n            sendRegistrationToServer(token)\n\n\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "sharedpreferences", "moshi"], "answers": [{"tags": [], "owner": {"reputation": 130, "user_id": 10398491, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PbLUiqzN6aU/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUmUNjLEH9UpDQKh164xZuV_IrB4A/mo/photo.jpg?sz=128", "display_name": "Amrit Bhattacharjee", "link": "https://stackoverflow.com/users/10398491/amrit-bhattacharjee"}, "is_accepted": false, "score": 0, "last_activity_date": 1563817033, "last_edit_date": 1563817033, "creation_date": 1562152238, "answer_id": 56868825, "question_id": 56868579, "link": "https://stackoverflow.com/questions/56868579/kotlin-how-to-save-an-arraylist-in-sharedpreferences/56868825#56868825", "title": "Kotlin: How to save an arraylist in SharedPreferences", "body": "<p>You can use <a href=\"https://github.com/google/gson\" rel=\"nofollow noreferrer\">GSON</a> library for this.</p>\n\n<p>At first, you have to convert the ArrayList to string. For example: </p>\n\n<pre><code>val arrayString = Gson().toJson(arrayList)\n</code></pre>\n\n<p>Then, you can store the string in SharedPreference. To retrieve the String, you have to retrieve the String first and then convert it again to ArrayList. For example:</p>\n\n<pre><code>val collectionType = object : TypeToken&lt;ArrayList&lt;String&gt;&gt;() {}.type\narrayList = Gson().fromJson(arrayString, collectionType)\n</code></pre>\n\n<p>Let me know if you face any problem in this regard.</p>\n"}, {"tags": [], "owner": {"reputation": 7766, "user_id": 4517450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AFIyx.jpg?s=128&g=1", "display_name": "vikas kumar", "link": "https://stackoverflow.com/users/4517450/vikas-kumar"}, "is_accepted": false, "score": 2, "last_activity_date": 1562154765, "creation_date": 1562154765, "answer_id": 56869527, "question_id": 56868579, "link": "https://stackoverflow.com/questions/56868579/kotlin-how-to-save-an-arraylist-in-sharedpreferences/56869527#56869527", "title": "Kotlin: How to save an arraylist in SharedPreferences", "body": "<p>Here is how you can do it.</p>\n\n<pre><code>Moshi moshi = new Moshi.Builder().build();\nType type = Types.newParameterizedType(List.class, Person.class);\nJsonAdapter&lt; List &gt; jsonAdapter = moshi.adapter(type);\nString json = jsonAdapter.toJson(body.getParams());\n</code></pre>\n\n<p>where <em>Person</em> is your POJO or some model class.</p>\n\n<p>and then save this string in shared preference and do the reverse like this to get back in List</p>\n\n<pre><code>List&lt;Person&gt; persons = jsonAdapter.fromJson(json);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 190, "user_id": 5156056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HUBy3.jpg?s=128&g=1", "display_name": "Pedro Antonio", "link": "https://stackoverflow.com/users/5156056/pedro-antonio"}, "edited": false, "score": 0, "creation_date": 1600835248, "post_id": 60770259, "comment_id": 113209802, "body": "thansk a lot bro, it worked for me. this line did the trick. val type = object : TypeToken&lt;List&lt;T&gt;&gt;() {}.type"}], "tags": [], "owner": {"reputation": 135, "user_id": 3645102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2372b65c43c4ea40a13a1ce2e28db65?s=128&d=identicon&r=PG&f=1", "display_name": "goofy", "link": "https://stackoverflow.com/users/3645102/goofy"}, "is_accepted": false, "score": 1, "last_activity_date": 1584952792, "last_edit_date": 1584952792, "creation_date": 1584690044, "answer_id": 60770259, "question_id": 56868579, "link": "https://stackoverflow.com/questions/56868579/kotlin-how-to-save-an-arraylist-in-sharedpreferences/60770259#60770259", "title": "Kotlin: How to save an arraylist in SharedPreferences", "body": "<p>I know you are asking for Moshi library, but I want provide you my <strong>Kotlin</strong> extension functions for working with <code>ArrayList</code> as saved in SharedPreferences using Gson.</p>\n\n<p>I think it's easy to convert this to using Moshi library and it's very useful.</p>\n\n<pre><code>inline fun &lt;reified T&gt; SharedPreferences.addItemToList(spListKey: String, item: T) {\n    val savedList = getList&lt;T&gt;(spListKey).toMutableList()\n    savedList.add(item)\n    val listJson = Gson().toJson(savedList)\n    edit { putString(spListKey, listJson) }\n}\n\ninline fun &lt;reified T&gt; SharedPreferences.removeItemFromList(spListKey: String, item: T) {\n    val savedList = getList&lt;T&gt;(spListKey).toMutableList()\n    savedList.remove(item)\n    val listJson = Gson().toJson(savedList)\n    edit {\n        putString(spListKey, listJson)\n    }\n}\n\nfun &lt;T&gt; SharedPreferences.putList(spListKey: String, list: List&lt;T&gt;) {\n    val listJson = Gson().toJson(list)\n    edit {\n        putString(spListKey, listJson)\n    }\n}\n\ninline fun &lt;reified T&gt; SharedPreferences.getList(spListKey: String): List&lt;T&gt; {\n    val listJson = getString(spListKey, \"\")\n    if (!listJson.isNullOrBlank()) {\n        val type = object : TypeToken&lt;List&lt;T&gt;&gt;() {}.type\n        return Gson().fromJson(listJson, type)\n    }\n    return listOf()\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 11577141, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-uge_lETocXU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdPIMwpXQBd-ISBOIhEZEKildf0gQ/mo/photo.jpg?sz=128", "display_name": "MimiSoft", "link": "https://stackoverflow.com/users/11577141/mimisoft"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2052, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1584952792, "creation_date": 1562151467, "last_edit_date": 1562155028, "question_id": 56868579, "link": "https://stackoverflow.com/questions/56868579/kotlin-how-to-save-an-arraylist-in-sharedpreferences", "title": "Kotlin: How to save an arraylist in SharedPreferences", "body": "<p>I created an android app with kotlin, in this app i use a WS that provides all the list of products. So, how can i save the list of products in SharedPreferences with a moshi library?\nHere's my code:</p>\n\n<pre><code>fun setArrayDataBykeyValue(context: Context, key: String, DataArrayList: Array&lt;ProductData&gt;) {\n    val gson = Gson()\n    val jsonString = gson.toJson(DataArrayList)\n    val sp = context.getSharedPreferences(context.packageName, Context.MODE_PRIVATE)\n    sp.edit().putString(key, jsonString).commit()\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1670, "user_id": 9774624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9f8e7e947e5c7b3d9e21830d0a6be5c?s=128&d=identicon&r=PG&f=1", "display_name": "Tsabary", "link": "https://stackoverflow.com/users/9774624/tsabary"}, "edited": false, "score": 0, "creation_date": 1562228561, "post_id": 56869032, "comment_id": 100314671, "body": "I had a hard time understanding how to incorporate that into my code (beginner). I&#39;ve added my current code that I think might explain it a bit better. Is there something I can pace in my current code to fulfill this purpose?"}], "tags": [], "owner": {"reputation": 1542, "user_id": 3580952, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/PbPmU.jpg?s=128&g=1", "display_name": "parohy", "link": "https://stackoverflow.com/users/3580952/parohy"}, "is_accepted": false, "score": 2, "last_activity_date": 1562236903, "last_edit_date": 1562236903, "creation_date": 1562153046, "answer_id": 56869032, "question_id": 56868328, "link": "https://stackoverflow.com/questions/56868328/how-can-i-create-a-function-that-has-when-called-an-addonsuccesslistener-could/56869032#56869032", "title": "How can I create a function that has when called, an addOnSuccessListener could be added to it", "body": "<p>Something like this?</p>\n\n<pre><code>class Worker&lt;T&gt; {\n    private var successListener: ((result: T) -&gt; Unit)? = null\n\n    fun onSuccess(result: T) {\n        successListener?.run { this(result) }\n    }\n\n    fun addSuccessListener(listener: (result: T) -&gt; Unit): Worker&lt;T&gt; {\n        successListener = listener\n        return this\n    }\n}\n\nclass MyRandomClass {\n    fun doSomething(variable: String): Worker&lt;String&gt; {\n        val worker: Worker&lt;String&gt; = Worker()\n        val result = variable.reversed()\n        worker.onSuccess(result)\n        return worker\n    }\n}\n//... in code\nval randomClass = MyRandomClass()\nrandomClass.doSomething(\"Hello World\")\n    .addSuccessListener {\n        Log.d(TAG, \"Result is: $it\")\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1670, "user_id": 9774624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9f8e7e947e5c7b3d9e21830d0a6be5c?s=128&d=identicon&r=PG&f=1", "display_name": "Tsabary", "link": "https://stackoverflow.com/users/9774624/tsabary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562236903, "creation_date": 1562150632, "last_edit_date": 1562228462, "question_id": 56868328, "link": "https://stackoverflow.com/questions/56868328/how-can-i-create-a-function-that-has-when-called-an-addonsuccesslistener-could", "title": "How can I create a function that has when called, an addOnSuccessListener could be added to it", "body": "<p>Not sure how to phrase this question. I would like to create a function, that when called, I can add <code>addOnSuccessListener</code> to it before continuing to the next one.</p>\n\n<p>I know that when I have the function return a <code>Task&lt;Void&gt;</code> I can add to it the <code>addOnSuccessListener</code> but in the function itself, I am not sure what to return, as the operation I am executing is a simple process of saving EditText input into variables. Not sure what Task to return.</p>\n\n<p>This is my function:</p>\n\n<pre><code>fun saveInput(): Task&lt;Void&gt; {\n    email = emailInput.text.toString()\n    phone = phoneInput.text.toString()\n    whatsApp = whatsAppInput.text.toString()\n\n    return //notSureWhatToReturnHere\n}\n</code></pre>\n\n<p>And I want to be able to do something like this:</p>\n\n<pre><code>saveInput.onSuccess{\n//do something\n}\n</code></pre>\n"}, {"tags": ["java", "android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 1734638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/061cd151c8b489f4c8d4ce4a9333774d?s=128&d=identicon&r=PG", "display_name": "RamDroid", "link": "https://stackoverflow.com/users/1734638/ramdroid"}, "edited": false, "score": 0, "creation_date": 1562151303, "post_id": 56868200, "comment_id": 100285637, "body": "i already got the sha1 for both release and debug and used the  package names you provided, but the problem still exist"}, {"owner": {"reputation": 13997, "user_id": 507313, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b8b097f0a88ab346a912b74fda4c57cf?s=128&d=identicon&r=PG", "display_name": "StuStirling", "link": "https://stackoverflow.com/users/507313/stustirling"}, "reply_to_user": {"reputation": 83, "user_id": 1734638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/061cd151c8b489f4c8d4ce4a9333774d?s=128&d=identicon&r=PG", "display_name": "RamDroid", "link": "https://stackoverflow.com/users/1734638/ramdroid"}, "edited": false, "score": 0, "creation_date": 1562151734, "post_id": 56868200, "comment_id": 100285883, "body": "Definitely the right keystores with correct passwords etc? Even if they are incorrect they still return SHA1s"}, {"owner": {"reputation": 83, "user_id": 1734638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/061cd151c8b489f4c8d4ce4a9333774d?s=128&d=identicon&r=PG", "display_name": "RamDroid", "link": "https://stackoverflow.com/users/1734638/ramdroid"}, "edited": false, "score": 0, "creation_date": 1562152613, "post_id": 56868200, "comment_id": 100286312, "body": "without the restriction, everything is ok and the map locations are loaded using my keystore, but when i restrict the access for the andorid form the console, the map requests gives the above message. should i add some extra headers  for the requests!"}, {"owner": {"reputation": 13997, "user_id": 507313, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b8b097f0a88ab346a912b74fda4c57cf?s=128&d=identicon&r=PG", "display_name": "StuStirling", "link": "https://stackoverflow.com/users/507313/stustirling"}, "reply_to_user": {"reputation": 83, "user_id": 1734638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/061cd151c8b489f4c8d4ce4a9333774d?s=128&d=identicon&r=PG", "display_name": "RamDroid", "link": "https://stackoverflow.com/users/1734638/ramdroid"}, "edited": false, "score": 0, "creation_date": 1562153194, "post_id": 56868200, "comment_id": 100286652, "body": "Yes I understand the issue. I can&#39;t see a problem with your package name. My only other suggestion is like I mentioned. You are using an incorrect alias and password for the keystore when getting your SHA1 certificate."}, {"owner": {"reputation": 83, "user_id": 1734638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/061cd151c8b489f4c8d4ce4a9333774d?s=128&d=identicon&r=PG", "display_name": "RamDroid", "link": "https://stackoverflow.com/users/1734638/ramdroid"}, "edited": false, "score": 0, "creation_date": 1562153492, "post_id": 56868200, "comment_id": 100286832, "body": "for the sha generation, i generated it using the gradle singing report utility inside the android studio ide. also using the keytool from the terminal and both ways are matched!"}, {"owner": {"reputation": 83, "user_id": 1734638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/061cd151c8b489f4c8d4ce4a9333774d?s=128&d=identicon&r=PG", "display_name": "RamDroid", "link": "https://stackoverflow.com/users/1734638/ramdroid"}, "edited": false, "score": 0, "creation_date": 1562160549, "post_id": 56868200, "comment_id": 100291285, "body": "in my case ,the package name in manifest is different than the applicationId in gradle. is this a problem?"}], "tags": [], "owner": {"reputation": 13997, "user_id": 507313, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b8b097f0a88ab346a912b74fda4c57cf?s=128&d=identicon&r=PG", "display_name": "StuStirling", "link": "https://stackoverflow.com/users/507313/stustirling"}, "is_accepted": false, "score": 0, "last_activity_date": 1562150172, "creation_date": 1562150172, "answer_id": 56868200, "question_id": 56867784, "link": "https://stackoverflow.com/questions/56867784/failed-to-restrict-google-api-key-for-android-app/56868200#56868200", "title": "Failed to restrict google Api key for android app", "body": "<p>You need to make sure your SHA1 is also on the console with your package name. You get this from the keystore used to sign each version; release &amp; debug. Follow the <a href=\"https://developers.google.com/maps/documentation/android-sdk/get-api-key\" rel=\"nofollow noreferrer\">Restrict the API key</a> section.</p>\n\n<p>Debug pacakge name: <code>com.myapp.debug</code></p>\n\n<p>Release package name: <code>com.myapp</code></p>\n"}], "owner": {"reputation": 83, "user_id": 1734638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/061cd151c8b489f4c8d4ce4a9333774d?s=128&d=identicon&r=PG", "display_name": "RamDroid", "link": "https://stackoverflow.com/users/1734638/ramdroid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 167, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562150172, "creation_date": 1562148755, "question_id": 56867784, "link": "https://stackoverflow.com/questions/56867784/failed-to-restrict-google-api-key-for-android-app", "title": "Failed to restrict google Api key for android app", "body": "<p>I'm trying to restrict the access of my google cloud API key for my android app, but I always get the below message when I tried to use google maps API.</p>\n\n<p><strong>\"This IP, site or mobile application is not authorized to use this API key. Request received from IP address {myIp}, with empty referer\"</strong></p>\n\n<p>I followed <a href=\"https://cloud.google.com/docs/authentication/api-keys?hl=en&amp;visit_id=636976716993216288-4203193488&amp;rd=1\" rel=\"nofollow noreferrer\">this guide</a>  </p>\n\n<h1>some hints:</h1>\n\n<pre><code>manifest package name: sa.com.myapp\napplicationId in gradle: com.myapp\nand debug flavour has the suffix like this\ndebug {\n applicationIdSuffix \".debug\"\n}\n</code></pre>\n\n<p>what do you think the proper package name value for both debug and release?</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "is_accepted": false, "score": 2, "last_activity_date": 1562155762, "last_edit_date": 1562155762, "creation_date": 1562148673, "answer_id": 56867760, "question_id": 56867612, "link": "https://stackoverflow.com/questions/56867612/kotlin-parse-double-from-string/56867760#56867760", "title": "Kotlin parse double from string", "body": "<p>If you are certain that the number is always at the start, then use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/split.html\" rel=\"nofollow noreferrer\"><code>split()</code></a> with space as delimiter and from the returned list take the 1st item and parse it to <code>Double</code>:</p>\n\n<pre><code>val value = st!!.split(\" \")[0].toDoubleOrNull()\n</code></pre>\n\n<p>If there is a case of spaces at the start or in between, use this:</p>\n\n<pre><code>val value = st!!.trim().split(\"\\\\s+\".toRegex())[0].toDoubleOrNull() \n</code></pre>\n\n<p>And another way with <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/substring-before.html\" rel=\"nofollow noreferrer\"><code>substringBefore()</code></a>:</p>\n\n<pre><code>val value = st!!.trim().substringBefore(\" \").toDoubleOrNull()\n</code></pre>\n\n<p>Or if there is only 1 integer number in the string, remove every non numeric char with <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/replace.html\" rel=\"nofollow noreferrer\"><code>replace()</code></a>:</p>\n\n<pre><code>val value = st!!.replace(\"\\\\D\".toRegex(), \"\").toDoubleOrNull()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1074, "user_id": 2185630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/798165e76261cc1d73e033d815effdf9?s=128&d=identicon&r=PG", "display_name": "dbl", "link": "https://stackoverflow.com/users/2185630/dbl"}, "edited": false, "score": 2, "creation_date": 1562149804, "post_id": 56867843, "comment_id": 100284871, "body": "Please consider how would this implementation fail if the string is one of <code>&quot;9999 min&quot;</code>, <code>&quot;area 51&quot;</code>, <code>&quot;3 boys&quot;</code>, <code>&quot;test 123 test&quot;</code>"}], "tags": [], "owner": {"reputation": 59, "user_id": 4420577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd6a86b5a8b8816e84540d534b2e59b8?s=128&d=identicon&r=PG&f=1", "display_name": "Piero", "link": "https://stackoverflow.com/users/4420577/piero"}, "is_accepted": false, "score": -1, "last_activity_date": 1562148943, "creation_date": 1562148943, "answer_id": 56867843, "question_id": 56867612, "link": "https://stackoverflow.com/questions/56867612/kotlin-parse-double-from-string/56867843#56867843", "title": "Kotlin parse double from string", "body": "<p>It depends on what you need. If you just have to get 90 and the string is formatted always in the same way you can just </p>\n\n<pre><code>var string = \"90 min\"\nvar floatFromString = string.substring(0,2).toFloat()\n</code></pre>\n\n<p>but it's better to learn how to use LocalDate and DateTimeFormatter</p>\n"}, {"tags": [], "owner": {"reputation": 2010, "user_id": 9309061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f5038cbb30197fd52711a73d2f21e2c?s=128&d=identicon&r=PG&f=1", "display_name": "Sachin Soma", "link": "https://stackoverflow.com/users/9309061/sachin-soma"}, "is_accepted": false, "score": 0, "last_activity_date": 1562154991, "creation_date": 1562154991, "answer_id": 56869612, "question_id": 56867612, "link": "https://stackoverflow.com/questions/56867612/kotlin-parse-double-from-string/56869612#56869612", "title": "Kotlin parse double from string", "body": "<p>This should work...</p>\n\n<pre><code>val pattern = Pattern.compile(\"\\\\d+\") // the regex\nval matcher = pattern.matcher(\"hello123hgj\") // your string\nval doubles = ArrayList&lt;Double&gt;() // results\nwhile (matcher.find())\n{ // for each match\n  doubles.add(Double.parseDouble(matcher.group())) // convert to double\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1456, "user_id": 1405646, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6298d27969ef6491bb007b8a5177ff40?s=128&d=identicon&r=PG", "display_name": "daliaessam", "link": "https://stackoverflow.com/users/1405646/daliaessam"}, "edited": false, "score": 0, "creation_date": 1562158982, "post_id": 56869764, "comment_id": 100290242, "body": "this needs to update to match Doubles not Int only."}], "tags": [], "owner": {"reputation": 16285, "user_id": 4860513, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zNzBp.jpg?s=128&g=1", "display_name": "W0rmH0le", "link": "https://stackoverflow.com/users/4860513/w0rmh0le"}, "is_accepted": false, "score": 1, "last_activity_date": 1562159117, "last_edit_date": 1562159117, "creation_date": 1562155513, "answer_id": 56869764, "question_id": 56867612, "link": "https://stackoverflow.com/questions/56867612/kotlin-parse-double-from-string/56869764#56869764", "title": "Kotlin parse double from string", "body": "<p>You can try (assuming you have only one sequence of numbers in your string).</p>\n\n<p>Otherwise, check other answers</p>\n\n<pre><code>val inputString = \"123. Test\"\nval regex = \"\\\\d+(\\\\.\\\\d+)?\".toRegex()\nval match = regex.find(inputString)\n\nif (match != null) {\n    println(\"Result: \" + match.value)\n} else {\n    println(\"Result: Not found\")\n}\n</code></pre>\n"}], "owner": {"reputation": 1456, "user_id": 1405646, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6298d27969ef6491bb007b8a5177ff40?s=128&d=identicon&r=PG", "display_name": "daliaessam", "link": "https://stackoverflow.com/users/1405646/daliaessam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5710, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1562159117, "creation_date": 1562148210, "last_edit_date": 1562154908, "question_id": 56867612, "link": "https://stackoverflow.com/questions/56867612/kotlin-parse-double-from-string", "title": "Kotlin parse double from string", "body": "<p>In Kotlin how to parse a double or float number from string like this:</p>\n\n<pre><code>var st: String? = \"90 min\"\n</code></pre>\n\n<p>tried to use toDoubleOrNull but always returns 0 or null.</p>\n"}, {"tags": ["android", "firebase-realtime-database", "kotlin"], "comments": [{"owner": {"reputation": 5935, "user_id": 10182897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PuvGT.jpg?s=128&g=1", "display_name": "Ashish", "link": "https://stackoverflow.com/users/10182897/ashish"}, "edited": false, "score": 0, "creation_date": 1562154102, "post_id": 56867487, "comment_id": 100287193, "body": "which field you&#39;re gonna use for orderBy ?"}, {"owner": {"reputation": 595, "user_id": 7501880, "user_type": "registered", "profile_image": "https://graph.facebook.com/1054241858036185/picture?type=large", "display_name": "MoTahir", "link": "https://stackoverflow.com/users/7501880/motahir"}, "reply_to_user": {"reputation": 5935, "user_id": 10182897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PuvGT.jpg?s=128&g=1", "display_name": "Ashish", "link": "https://stackoverflow.com/users/10182897/ashish"}, "edited": false, "score": 0, "creation_date": 1562154346, "post_id": 56867487, "comment_id": 100287326, "body": "since I&#39;m searching using the name of the user then I must use the username field. I can&#39;t use the &quot;startAt&quot; because I am querying based on the name and all of the records that I&#39;m retrieving have the same username"}, {"owner": {"reputation": 5935, "user_id": 10182897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PuvGT.jpg?s=128&g=1", "display_name": "Ashish", "link": "https://stackoverflow.com/users/10182897/ashish"}, "edited": false, "score": 0, "creation_date": 1562155015, "post_id": 56867487, "comment_id": 100287706, "body": "cause pagination you need to put orderby for retrieve data it needs to be in any order like i used <code>created_at</code> to get proper list"}, {"owner": {"reputation": 595, "user_id": 7501880, "user_type": "registered", "profile_image": "https://graph.facebook.com/1054241858036185/picture?type=large", "display_name": "MoTahir", "link": "https://stackoverflow.com/users/7501880/motahir"}, "reply_to_user": {"reputation": 5935, "user_id": 10182897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PuvGT.jpg?s=128&g=1", "display_name": "Ashish", "link": "https://stackoverflow.com/users/10182897/ashish"}, "edited": false, "score": 0, "creation_date": 1562156435, "post_id": 56867487, "comment_id": 100288631, "body": "yes I am using order by and I&#39;ve done pagination before, but I want to know how to paginate a queried data."}, {"owner": {"reputation": 5935, "user_id": 10182897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PuvGT.jpg?s=128&g=1", "display_name": "Ashish", "link": "https://stackoverflow.com/users/10182897/ashish"}, "edited": false, "score": 0, "creation_date": 1562156564, "post_id": 56867487, "comment_id": 100288695, "body": "<a href=\"https://stackoverflow.com/users/5246885/alex-mamo\">Alex Mamo</a> already provided in one of his <a href=\"https://stackoverflow.com/questions/50741958/how-to-paginate-firestore-with-android\">answer</a> how to paginate with firebase"}, {"owner": {"reputation": 595, "user_id": 7501880, "user_type": "registered", "profile_image": "https://graph.facebook.com/1054241858036185/picture?type=large", "display_name": "MoTahir", "link": "https://stackoverflow.com/users/7501880/motahir"}, "reply_to_user": {"reputation": 5935, "user_id": 10182897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PuvGT.jpg?s=128&g=1", "display_name": "Ashish", "link": "https://stackoverflow.com/users/10182897/ashish"}, "edited": false, "score": 0, "creation_date": 1562156988, "post_id": 56867487, "comment_id": 100288957, "body": "Alex Mamo&#39;s answer isn&#39;t queried,  if the data that I&#39;m retrieving isn&#39;t queried it would be simple, you just get the key of the node then start getting the data after that node but this isn&#39;t the case here, I have to query the data first then select the next 20 records.."}, {"owner": {"reputation": 5935, "user_id": 10182897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PuvGT.jpg?s=128&g=1", "display_name": "Ashish", "link": "https://stackoverflow.com/users/10182897/ashish"}, "reply_to_user": {"reputation": 595, "user_id": 7501880, "user_type": "registered", "profile_image": "https://graph.facebook.com/1054241858036185/picture?type=large", "display_name": "MoTahir", "link": "https://stackoverflow.com/users/7501880/motahir"}, "edited": false, "score": 0, "creation_date": 1562157415, "post_id": 56867487, "comment_id": 100289205, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/195930/discussion-between-ashish-and-motahir\">continue this discussion in chat</a>."}], "owner": {"reputation": 595, "user_id": 7501880, "user_type": "registered", "profile_image": "https://graph.facebook.com/1054241858036185/picture?type=large", "display_name": "MoTahir", "link": "https://stackoverflow.com/users/7501880/motahir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562147824, "creation_date": 1562147824, "question_id": 56867487, "link": "https://stackoverflow.com/questions/56867487/android-firebase-database-search-result-pagination", "title": "android firebase database search result pagination", "body": "<p>I am well aware of real-time database querying limitation, but I thought might seek help from others, basically what I'm trying to do is paginate the search result of a query,  let's say we search for users with the name \"motahir\" and we have 100 results, I want to show the first 20 results and when the user scrolls down then retrieve the second 20 results, one possible trick is to download the whole results  (all 100 records) and show only 20 and then add the rest of the result as the user scrolls down but this is inefficient, another trick is to limit the results to first 20 and when we want the next 20 records, we run a query to retrieve the first 40 records, the first 20 records of the 40 records that we've retrieved are duplicate, again this is inefficient, we'll have to download the previous set of data every time we want to retrieve a new 20 records.</p>\n\n<p>it won't be a good idea to download the whole records as well, what if we had 1000 records with the name \"motahir\".</p>\n\n<p>so any ideas of how to solve this problem?</p>\n"}, {"tags": ["java", "android", "kotlin", "rx-java", "rx-kotlin"], "answers": [{"tags": [], "owner": {"reputation": 6512, "user_id": 744015, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/0e8c50c74582b4cb3cb75aa5bc546585?s=128&d=identicon&r=PG", "display_name": "Alexey", "link": "https://stackoverflow.com/users/744015/alexey"}, "is_accepted": true, "score": 2, "last_activity_date": 1562156238, "last_edit_date": 1562156238, "creation_date": 1562149453, "answer_id": 56867985, "question_id": 56867353, "link": "https://stackoverflow.com/questions/56867353/extending-rx-singles-zip-infinitely/56867985#56867985", "title": "Extending Rx Singles zip infinitely", "body": "<p>Single.zip method takes an Iterable of Singles</p>\n\n<pre><code>val list = arrayListOf&lt;Single&lt;String&gt;&gt;()\nlist.add(Single.just(\"hello\"))\nlist.add(Single.just(\"world\"))\n\nSingle.zip(list) { args -&gt; Arrays.asList(args) }\n        .subscribeOn(Schedulers.io())\n        .observeOn(Schedulers.computation())\n        .subscribe()\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 10675759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb12da047217846029fb530162abb762?s=128&d=identicon&r=PG&f=1", "display_name": "dem30", "link": "https://stackoverflow.com/users/10675759/dem30"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 56867985, "answer_count": 1, "score": 2, "last_activity_date": 1562156238, "creation_date": 1562147357, "question_id": 56867353, "link": "https://stackoverflow.com/questions/56867353/extending-rx-singles-zip-infinitely", "title": "Extending Rx Singles zip infinitely", "body": "<p>I need to make a lot of API calls asynchronously and obviously make sure that they all pass so I can handle error/success in a single place.</p>\n\n<p>Is there a way to easily extend Singles.zip() functionality in Kotlin to take more than base 9 parameters (in best case scenario, to make it take any given number of parameters) without doing massive amounts of copy-paste work when writing your own extensions for t10, t11, etc. ?</p>\n\n<p>Well, writing dozens of extensions simply works, but is cumbersome, not very elegant and adds additional work.</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1168, "user_id": 1694493, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mp1fF.png?s=128&g=1", "display_name": "Robin Vinzenz", "link": "https://stackoverflow.com/users/1694493/robin-vinzenz"}, "edited": false, "score": 0, "creation_date": 1562147520, "post_id": 56867367, "comment_id": 100283595, "body": "@Misterhup You can have a look at the kotlin refernece for lambdas. <a href=\"https://kotlinlang.org/docs/reference/lambdas.html#it-implicit-name-of-a-single-parameter\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1383, "user_id": 3999808, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/BVpV8.png?s=128&g=1", "display_name": "Zun", "link": "https://stackoverflow.com/users/3999808/zun"}, "is_accepted": true, "score": 1, "last_activity_date": 1562147418, "creation_date": 1562147418, "answer_id": 56867367, "question_id": 56867286, "link": "https://stackoverflow.com/questions/56867286/how-to-get-the-caller-from-an-event-handler-as-an-object-in-kotlin/56867367#56867367", "title": "How to get the caller from an event handler as an object in Kotlin", "body": "<p>Either write </p>\n\n<pre><code>b1.setOnClickListener {\n    addToStack(it)\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>b1.setOnClickListener { iAmB1ButWithACustomName -&gt;\n    addToStack(iAmB1ButWithACustomName)\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 11733608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/951328063fe9329ec6adde9728994a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Misterhup", "link": "https://stackoverflow.com/users/11733608/misterhup"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 56867367, "answer_count": 1, "score": -1, "last_activity_date": 1562148692, "creation_date": 1562147121, "last_edit_date": 1562148692, "question_id": 56867286, "link": "https://stackoverflow.com/questions/56867286/how-to-get-the-caller-from-an-event-handler-as-an-object-in-kotlin", "title": "How to get the caller from an event handler as an object in Kotlin", "body": "<p>I am really new to Kotlin and since I'm not used with the terminology I haven't found anywhere how can I get an object from an event caller.</p>\n\n<p>For example, instead of writing \"addToStack(b1)\" I want to write something like addToStack(general term to get the same result):</p>\n\n<pre><code>b1.setOnClickListener{\n    addToStack(b1)\n}\n</code></pre>\n\n<p>Is there a way to do that?</p>\n"}, {"tags": ["android", "kotlin", "imageview", "android-canvas"], "comments": [{"owner": {"reputation": 1968, "user_id": 9263083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d74d9629591720e7e7bc8ddd3f35c92?s=128&d=identicon&r=PG&f=1", "display_name": "sanoJ", "link": "https://stackoverflow.com/users/9263083/sanoj"}, "edited": false, "score": 0, "creation_date": 1562145507, "post_id": 56866645, "comment_id": 100282467, "body": "This may help you to get an idea <a href=\"https://stackoverflow.com/a/17487744/9263083\">stackoverflow.com/a/17487744/9263083</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1916, "user_id": 7783718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a43d3514a1097af1e17c0cb9b0bbfd8?s=128&d=identicon&r=PG&f=1", "display_name": "Abhay Koradiya", "link": "https://stackoverflow.com/users/7783718/abhay-koradiya"}, "is_accepted": false, "score": 2, "last_activity_date": 1562147266, "creation_date": 1562147266, "answer_id": 56867328, "question_id": 56866645, "link": "https://stackoverflow.com/questions/56866645/apply-custom-mask-to-an-imageview/56867328#56867328", "title": "Apply custom mask to an ImageView", "body": "<p>I am drawing round shape using Path.\nAnd use some mechanism to fit image in Round part.</p>\n\n<p>I have made using Path. Check it.</p>\n\n<pre><code>public class RoundedView extends AppCompatImageView {\nprivate Bitmap mBitmap;\nPath mPath;\nfloat width, height, offset;\nfloat percent = 0.37f;\nprivate Paint mPaint = new Paint(Paint.ANTI_ALIAS_FLAG);\n\n\npublic RoundedView(Context context) {\n    super(context);\n}\n\npublic RoundedView(Context context, @Nullable AttributeSet attrs) {\n    super(context, attrs);\n    init(context, attrs);\n}\n\npublic RoundedView(Context context, @Nullable AttributeSet attrs, int defStyleAttr) {\n    super(context, attrs, defStyleAttr);\n    init(context, attrs);\n}\n\nprivate void init(Context context, AttributeSet attrs) {\n    TypedArray arr = context.obtainStyledAttributes(attrs, R.styleable.RoundedView);\n    percent = arr.getFloat(R.styleable.RoundedView_roundPercent, 0.37f);\n    arr.recycle();\n}\n\n@Override\nprotected void onDraw(Canvas canvas) {\n    if (mPath != null) {\n        canvas.drawPath(mPath, mPaint);\n    }\n}\n\n@Override\nprotected void onSizeChanged(int w, int h, int oldw, int oldh) {\n    super.onSizeChanged(w, h, oldw, oldh);\n    width = w;\n    height = h;\n\n    offset = w / 2f;\n\n    change();\n\n}\n\nprivate void change() {\n    float roundness = percent * height;\n\n\n    Drawable d = getDrawable();\n    if (d != null) {\n\n        mBitmap = drawableToBitmap(d);\n        mBitmap = Bitmap.createScaledBitmap(mBitmap, (int) width, (int) height, false);\n\n        final Shader shader = new BitmapShader(mBitmap, Shader.TileMode.CLAMP, Shader.TileMode.CLAMP);\n        mPaint.setShader(shader);\n\n        mPath = new Path();\n        mPath.moveTo(0, 0);\n        mPath.lineTo(width, 0);\n        mPath.lineTo(width, height - roundness);\n        mPath.quadTo(offset, height + roundness, 0, height - roundness);\n        mPath.close();\n    }\n}\n\n@Override\npublic void setImageDrawable(@Nullable Drawable drawable) {\n    super.setImageDrawable(drawable);\n\n    change();\n\n}\n\npublic Bitmap drawableToBitmap(Drawable drawable) {\n    Bitmap bitmap = null;\n\n    if (drawable instanceof BitmapDrawable) {\n        BitmapDrawable bitmapDrawable = (BitmapDrawable) drawable;\n        if (bitmapDrawable.getBitmap() != null) {\n            return bitmapDrawable.getBitmap();\n        }\n    }\n\n    if (drawable.getIntrinsicWidth() &lt;= 0 || drawable.getIntrinsicHeight() &lt;= 0) {\n        bitmap = Bitmap.createBitmap(1, 1, Bitmap.Config.ARGB_8888); // Single color bitmap will be created of 1x1 pixel\n    } else {\n        bitmap = Bitmap.createBitmap(drawable.getIntrinsicWidth(), drawable.getIntrinsicHeight(), Bitmap.Config.ARGB_8888);\n    }\n\n    Canvas canvas = new Canvas(bitmap);\n    drawable.setBounds(0, 0, canvas.getWidth(), canvas.getHeight());\n    drawable.draw(canvas);\n    return bitmap;\n}\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2160, "user_id": 1062074, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/B7AJr.jpg?s=128&g=1", "display_name": "chrjs", "link": "https://stackoverflow.com/users/1062074/chrjs"}, "is_accepted": true, "score": 0, "last_activity_date": 1562231318, "creation_date": 1562231318, "answer_id": 56884436, "question_id": 56866645, "link": "https://stackoverflow.com/questions/56866645/apply-custom-mask-to-an-imageview/56884436#56884436", "title": "Apply custom mask to an ImageView", "body": "<p>Thanks for the answers, which will definitely be helpful for other users. \nUnfortunetly I had to help myself to get the desired results.</p>\n\n<p>This is my final solution which applies a quad bezier to the ImageView.</p>\n\n<pre><code>class HeaderImageView : AppCompatImageView {\n    constructor(context: Context?) : super(context) {\n        init()\n    }\n\n    constructor(context: Context?, attrs: AttributeSet?) : super(context, attrs) {\n        init()\n    }\n\n    constructor(context: Context?, attrs: AttributeSet?, defStyleAttr: Int) : super(context, attrs, defStyleAttr) {\n        init()\n    }\n\n    lateinit var paint: Paint\n\n    private fun init() {\n        paint = Paint()\n        paint.color = Color.WHITE\n        paint.xfermode = PorterDuffXfermode(PorterDuff.Mode.SRC_ATOP)\n        paint.style = Paint.Style.FILL\n    }\n\n    @SuppressLint(\"CanvasSize\")\n    override fun onDraw(canvas: Canvas) {\n        super.onDraw(canvas)\n\n        val fHeight = canvas.height.toFloat()\n        val startEndHeight = canvas.height / 1.18f\n        val fWidth = canvas.width.toFloat()\n        val halfWidth = (fWidth / 2)\n\n        val path = Path()\n        //X = Left side, Y = close to bottom\n        val ptStart = PointF(0f, startEndHeight)\n        //X = Middle, Y = Bottom\n        val ptMiddle = PointF(halfWidth, fHeight + 95)\n        // X = Right Side, Y = close to bottom\n        val ptEnd = PointF(fWidth, startEndHeight)\n\n        path.moveTo(ptStart.x, ptStart.y)\n        path.quadTo(ptMiddle.x, ptMiddle.y, ptEnd.x, ptEnd.y)\n        path.lineTo(fWidth, fHeight)\n        path.lineTo(0f, fHeight)\n\n        path.close()\n\n        canvas.drawPath(path, paint)\n    }\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/lMUZY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lMUZY.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 2160, "user_id": 1062074, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/B7AJr.jpg?s=128&g=1", "display_name": "chrjs", "link": "https://stackoverflow.com/users/1062074/chrjs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1147, "favorite_count": 0, "accepted_answer_id": 56884436, "answer_count": 2, "score": 0, "last_activity_date": 1562231318, "creation_date": 1562144992, "last_edit_date": 1562147143, "question_id": 56866645, "link": "https://stackoverflow.com/questions/56866645/apply-custom-mask-to-an-imageview", "title": "Apply custom mask to an ImageView", "body": "<p>I want to adust my ImageView like this:\n<a href=\"https://i.stack.imgur.com/idpX0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/idpX0.png\" alt=\"enter image description here\"></a></p>\n\n<p>I tried different approaches like using shapes via xml or using an <code>OutlineProvider</code>. Neither did really work for this case.</p>\n\n<p>For now I've written a CustomImageView which draws a circle  like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/RbZVV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RbZVV.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>class HeaderImageView : AppCompatImageView {\n\n    @SuppressLint(\"CanvasSize\")\n    override fun onDraw(canvas: Canvas) {\n        val halfWidth = (canvas.width / 2).toFloat()\n        val radius = height.toFloat()\n        val path = Path().apply {\n            addCircle(halfWidth, 0f, radius, Path.Direction.CCW)\n        }\n\n        canvas.clipPath(path)\n\n        super.onDraw(canvas)\n    }\n}\n</code></pre>\n\n<p>How can I manipulate the path to get the result I want?</p>\n\n<p>Thank you!</p>\n\n<p><strong>edit:</strong></p>\n\n<p>To be clear, I have an image which I want to \"manipulate\", not a color.</p>\n\n<p>Added xml:</p>\n\n<pre><code>    &lt;.HeaderImageView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"230dp\"\n        android:fitsSystemWindows=\"false\"\n        android:scaleType=\"centerCrop\"\n        android:src=\"@drawable/bg\"\n        app:layout_collapseMode=\"parallax\" /&gt;\n</code></pre>\n"}, {"tags": ["kotlin", "android-glide"], "answers": [{"tags": [], "owner": {"reputation": 1295, "user_id": 9183189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abbbaf52d750efa62c91b52b29319129?s=128&d=identicon&r=PG&f=1", "display_name": "Pradip Tilala", "link": "https://stackoverflow.com/users/9183189/pradip-tilala"}, "is_accepted": false, "score": 0, "last_activity_date": 1562146493, "creation_date": 1562146493, "answer_id": 56867112, "question_id": 56866441, "link": "https://stackoverflow.com/questions/56866441/glide-corner-top-left-and-right/56867112#56867112", "title": "Glide : Corner top Left and Right", "body": "<p>Not using glide But, This link might be helpful -> Android UI: creating imageview with rounded top corners in android - <a href=\"http://android--kotlin.blogspot.com/2019/02/android-ui-creating-imageview-with-rounded-top-corners.html\" rel=\"nofollow noreferrer\">http://android--kotlin.blogspot.com/2019/02/android-ui-creating-imageview-with-rounded-top-corners.html</a></p>\n\n<p>Its using the <code>drawable</code> corner frame in <code>src</code> and setting image in the background of the <code>ImageView</code> to create rounded top corners. <code>frame drawable</code> here has rectangle shape with radius and negative margin. So image is overridden by frame drawable from top corners.</p>\n"}], "owner": {"reputation": 775, "user_id": 4903160, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10206270666822810/picture?type=large", "display_name": "Tai Nguyen", "link": "https://stackoverflow.com/users/4903160/tai-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1116, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1562146493, "creation_date": 1562144293, "question_id": 56866441, "link": "https://stackoverflow.com/questions/56866441/glide-corner-top-left-and-right", "title": "Glide : Corner top Left and Right", "body": "<p>I am facing with a specific problem with Glide.</p>\n\n<p>I am trying to put top left / right corner but I dont know how to do this. </p>\n\n<p><a href=\"https://i.stack.imgur.com/BuKkn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BuKkn.png\" alt=\"Something like this\"></a></p>\n\n<p>I have this following code but it for all corner : </p>\n\n<pre><code>@BindingAdapter(\"imageUrl\")\n@JvmStatic\nfun setImageUrl(imageView: ImageView, imageUrl: String) {\n\n    var requestOptions = RequestOptions()\n    requestOptions = requestOptions.transforms(CenterCrop(), RoundedCorners(16))\n    Glide.with(imageView.context).load(imageUrl).apply(requestOptions).into(imageView)\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Do you have any solution?</p>\n\n<p>NB : I found this following website <a href=\"https://thedeveloperworldisyours.com/android/rounded-corners-with-glide/\" rel=\"nofollow noreferrer\">https://thedeveloperworldisyours.com/android/rounded-corners-with-glide/</a> </p>\n\n<p>But I would like to know if they have another way.</p>\n"}, {"tags": ["java", "kotlin", "annotations", "annotation-processing"], "comments": [{"owner": {"reputation": 1654, "user_id": 4934324, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8e6bda407da019c902aa27a54a6a52c0?s=128&d=identicon&r=PG&f=1", "display_name": "roookeee", "link": "https://stackoverflow.com/users/4934324/roookeee"}, "edited": false, "score": 1, "creation_date": 1562146782, "post_id": 56866375, "comment_id": 100283195, "body": "Search for <code>aspect oriented programming</code>, e.g. the Spring Web Framework uses AspectJ which makes it quite easy to <a href=\"https://www.baeldung.com/spring-performance-logging\" rel=\"nofollow noreferrer\">implement</a> it. Remember: an annotation on its own cannot accomplish this (annotations are just metadata, not functionality), there has to be a component that reads / uses your marker annotation somehow (e.g. Java&#39;s <code>@FunctionalInterface</code> validation is implemented directly in the Java compiler)"}, {"owner": {"reputation": 1325, "user_id": 1285611, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5938707880c06c25f0d789961f0aebeb?s=128&d=identicon&r=PG", "display_name": "abierto", "link": "https://stackoverflow.com/users/1285611/abierto"}, "reply_to_user": {"reputation": 1654, "user_id": 4934324, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8e6bda407da019c902aa27a54a6a52c0?s=128&d=identicon&r=PG&f=1", "display_name": "roookeee", "link": "https://stackoverflow.com/users/4934324/roookeee"}, "edited": false, "score": 0, "creation_date": 1562147000, "post_id": 56866375, "comment_id": 100283309, "body": "Thank you @roookeee I&#39;ll take a look into that ;)"}, {"owner": {"reputation": 1600, "user_id": 1292745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGKY6.gif?s=128&g=1", "display_name": "gpunto", "link": "https://stackoverflow.com/users/1292745/gpunto"}, "edited": false, "score": 1, "creation_date": 1562148972, "post_id": 56866375, "comment_id": 100284439, "body": "There is a library that does what you want: <a href=\"https://github.com/JakeWharton/hugo\" rel=\"nofollow noreferrer\">hugo</a>"}, {"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "reply_to_user": {"reputation": 1600, "user_id": 1292745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGKY6.gif?s=128&g=1", "display_name": "gpunto", "link": "https://stackoverflow.com/users/1292745/gpunto"}, "edited": false, "score": 0, "creation_date": 1562158240, "post_id": 56866375, "comment_id": 100289737, "body": "@gpunto that&#39;s for Android only I guess"}], "owner": {"reputation": 1325, "user_id": 1285611, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5938707880c06c25f0d789961f0aebeb?s=128&d=identicon&r=PG", "display_name": "abierto", "link": "https://stackoverflow.com/users/1285611/abierto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1562144061, "creation_date": 1562144061, "question_id": 56866375, "link": "https://stackoverflow.com/questions/56866375/kotlin-annotation-for-autologging-a-function", "title": "Kotlin Annotation for autologging a function", "body": "<p>Is it possible to create an Annotation that somehow let my function log automatically on start and end of their execution? Something like:</p>\n\n<pre><code>@Log //&lt;-- the custom annotation\nfun foo() {\n    ...\n    log.info(\"Hello world\")\n    ...\n}\n</code></pre>\n\n<p>with a result of:</p>\n\n<pre><code>\"Starting execution of function 'foo'\"\n\"Hello world\"\n\"Function 'foo' ended up after 100ms\"\n</code></pre>\n\n<p>I'm not an annotation dev expert, so I'm just asking if this is somehow possible, I'm not looking for its implementation.</p>\n"}, {"tags": ["android", "logging", "kotlin", "adb", "logcat"], "comments": [{"owner": {"reputation": 153257, "user_id": 6509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de6eafe28472ceb9522fd3f609afed53?s=128&d=identicon&r=PG", "display_name": "tim_yates", "link": "https://stackoverflow.com/users/6509/tim-yates"}, "edited": false, "score": 0, "creation_date": 1562143604, "post_id": 56865715, "comment_id": 100281370, "body": "Could you just do <code>grep -e &quot;.&#47;MyData&quot;</code>?"}, {"owner": {"reputation": 29080, "user_id": 1084174, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/BsASP.png?s=128&g=1", "display_name": "Sazzad Hissain Khan", "link": "https://stackoverflow.com/users/1084174/sazzad-hissain-khan"}, "reply_to_user": {"reputation": 153257, "user_id": 6509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de6eafe28472ceb9522fd3f609afed53?s=128&d=identicon&r=PG", "display_name": "tim_yates", "link": "https://stackoverflow.com/users/6509/tim-yates"}, "edited": false, "score": 0, "creation_date": 1562144237, "post_id": 56865715, "comment_id": 100281710, "body": "This will include anything that starts with /MyData in log message as well. Is there any support from adb side?"}], "answers": [{"comments": [{"owner": {"reputation": 29080, "user_id": 1084174, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/BsASP.png?s=128&g=1", "display_name": "Sazzad Hissain Khan", "link": "https://stackoverflow.com/users/1084174/sazzad-hissain-khan"}, "edited": false, "score": 0, "creation_date": 1562567119, "post_id": 56928621, "comment_id": 100399640, "body": "Could you explain how this pattern works? I am even tired of counting the number of chars."}, {"owner": {"reputation": 2154, "user_id": 964772, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/e2df3a4aba393ee6d0463a50f4a81e90?s=128&d=identicon&r=PG", "display_name": "Rilwan", "link": "https://stackoverflow.com/users/964772/rilwan"}, "reply_to_user": {"reputation": 29080, "user_id": 1084174, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/BsASP.png?s=128&g=1", "display_name": "Sazzad Hissain Khan", "link": "https://stackoverflow.com/users/1084174/sazzad-hissain-khan"}, "edited": false, "score": 0, "creation_date": 1562607449, "post_id": 56928621, "comment_id": 100420172, "body": "I have edited answer. Sorry I didn&#39;t realize i had different version of grep in my device. But modified answer would work for your case."}], "tags": [], "owner": {"reputation": 2154, "user_id": 964772, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/e2df3a4aba393ee6d0463a50f4a81e90?s=128&d=identicon&r=PG", "display_name": "Rilwan", "link": "https://stackoverflow.com/users/964772/rilwan"}, "is_accepted": false, "score": 0, "last_activity_date": 1562607372, "last_edit_date": 1562607372, "creation_date": 1562561813, "answer_id": 56928621, "question_id": 56865715, "link": "https://stackoverflow.com/questions/56865715/how-to-apply-regex-in-tag-name-when-filtering-adb-logcat-in-bash/56928621#56928621", "title": "How to apply regex in tag name when filtering adb logcat in bash", "body": "<p>There is no inbuilt support for grep with regexp on <code>tag</code> from <code>adb logcat</code> . But Below worked for me to match all logs which has tag starts with <code>Activ</code>.</p>\n\n<pre><code>adb shell logcat | grep -P \"^\\S+\\s+\\S+\\s+\\S+\\s+\\S+\\s+\\S+\\s+Activ\"\n</code></pre>\n\n<p><code>-P</code> for perl like regexp support.\nMake pattern with <code>\\s whitespace</code> and <code>\\S non whitespace</code> chars until you reach the <code>tag</code>. \nFor Example in below log, it starts with non whitespace '07-08' which will match with first <code>\\S+</code> in pattern. similarly for rest of the pattern.  </p>\n\n<blockquote>\n  <p>07-08 17:13:00.042  1677  1708 D ActivityManager: cleanUpApplicationRecord -- 475</p>\n</blockquote>\n"}], "owner": {"reputation": 29080, "user_id": 1084174, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/BsASP.png?s=128&g=1", "display_name": "Sazzad Hissain Khan", "link": "https://stackoverflow.com/users/1084174/sazzad-hissain-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 378, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562607372, "creation_date": 1562141668, "question_id": 56865715, "link": "https://stackoverflow.com/questions/56865715/how-to-apply-regex-in-tag-name-when-filtering-adb-logcat-in-bash", "title": "How to apply regex in tag name when filtering adb logcat in bash", "body": "<p>I wonder if there is any way to apply a regular expression on to <code>tag names</code> while filtering <code>adb logcat</code> logs. I can use <code>grep</code> pipe but it applies on the whole text rather only tag names. I want to apply regex in tag names only. For example,</p>\n\n<pre><code>$ adb logcat -v tag | grep MyData*\n</code></pre>\n\n<p>produces,</p>\n\n<pre><code>D/MyActivity: calling MyDataManager\nD/MyDataManager: data1 inserted\nD/MyDataWorker: data1 inserted\n</code></pre>\n\n<p>But my expected output is,</p>\n\n<pre><code>D/MyDataManager: data1 inserted\nD/MyDataWorker: data1 inserted\n</code></pre>\n\n<p>How to do that?</p>\n"}, {"tags": ["kotlin", "annotations", "kapt"], "answers": [{"comments": [{"owner": {"reputation": 16077, "user_id": 97777, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fb95aca1c80de718bbfa01447220633b?s=128&d=identicon&r=PG", "display_name": "Duncan McGregor", "link": "https://stackoverflow.com/users/97777/duncan-mcgregor"}, "edited": false, "score": 0, "creation_date": 1562226146, "post_id": 56878568, "comment_id": 100313475, "body": "I think that the type of <code>it::class</code> is <code>Element</code> here, not the type of my (potentially) data class?"}], "tags": [], "owner": {"reputation": 2850, "user_id": 6375041, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/251807625186795/picture?type=large", "display_name": "Sergei Rybalkin", "link": "https://stackoverflow.com/users/6375041/sergei-rybalkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1562192283, "creation_date": 1562192283, "answer_id": 56878568, "question_id": 56865651, "link": "https://stackoverflow.com/questions/56865651/how-can-i-recognise-a-kotlin-data-class-during-annotation-processing/56878568#56878568", "title": "How can I recognise a Kotlin data class during annotation processing?", "body": "<p>In your kapt processing code it is possible to filter data classes</p>\n\n<pre><code>.getElementsAnnotatedWith(YourAnnotation::class)\n.filter { it::class.isData }\n.forEach {\n    yourAction()\n}\n</code></pre>\n"}], "owner": {"reputation": 16077, "user_id": 97777, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fb95aca1c80de718bbfa01447220633b?s=128&d=identicon&r=PG", "display_name": "Duncan McGregor", "link": "https://stackoverflow.com/users/97777/duncan-mcgregor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1562192283, "creation_date": 1562141364, "question_id": 56865651, "link": "https://stackoverflow.com/questions/56865651/how-can-i-recognise-a-kotlin-data-class-during-annotation-processing", "title": "How can I recognise a Kotlin data class during annotation processing?", "body": "<p>I want to generate code for every data class using KAPT. Is there any reliable way of recognising a data class using the <code>javax.lang.model</code> API?</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 3502, "user_id": 6880611, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-cZQAEORHS0I/AAAAAAAAAAI/AAAAAAAAAe4/KrGn0vxt7hE/photo.jpg?sz=128", "display_name": "Tejas Pandya", "link": "https://stackoverflow.com/users/6880611/tejas-pandya"}, "edited": false, "score": 1, "creation_date": 1562138912, "post_id": 56865003, "comment_id": 100278987, "body": "create <code>tabbar</code> , inside first tab&#39;s <code>fragment</code> create another <code>tabbar</code>"}], "owner": {"reputation": 21, "user_id": 11732897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c474bd4afebeb49c28df3172acc541c2?s=128&d=identicon&r=PG&f=1", "display_name": "George Jacob", "link": "https://stackoverflow.com/users/11732897/george-jacob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1562138757, "creation_date": 1562138757, "question_id": 56865003, "link": "https://stackoverflow.com/questions/56865003/how-to-create-play-store-like-nested-tab-bar", "title": "How to create Play Store like nested tab bar?", "body": "<p>How can I create a nested Tab Bar like the new Google Play Store app with two section one above the other.</p>\n\n<p><a href=\"https://i.stack.imgur.com/RzLhJ.jpg\" rel=\"nofollow noreferrer\">UI Screenshot</a></p>\n\n<p>I'm very new to android. So I have no idea on how to approach this.</p>\n\n<p>Thanks in advance :)</p>\n"}, {"tags": ["android", "kotlin", "android-recyclerview"], "comments": [{"owner": {"reputation": 709, "user_id": 4492504, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fueZV.jpg?s=128&g=1", "display_name": "Zain Aftab", "link": "https://stackoverflow.com/users/4492504/zain-aftab"}, "edited": false, "score": 0, "creation_date": 1562138686, "post_id": 56864838, "comment_id": 100278863, "body": "Please share the error stack trace from logcat."}, {"owner": {"reputation": 1557, "user_id": 6819340, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/aytfN.jpg?s=128&g=1", "display_name": "DarShan", "link": "https://stackoverflow.com/users/6819340/darshan"}, "reply_to_user": {"reputation": 709, "user_id": 4492504, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fueZV.jpg?s=128&g=1", "display_name": "Zain Aftab", "link": "https://stackoverflow.com/users/4492504/zain-aftab"}, "edited": false, "score": 0, "creation_date": 1562139189, "post_id": 56864838, "comment_id": 100279106, "body": "@ZainAftab added"}, {"owner": {"reputation": 2471, "user_id": 4252667, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8eb97d85616defe1c9d75d37889e6f42?s=128&d=identicon&r=PG", "display_name": "Mohamed Ibrahim", "link": "https://stackoverflow.com/users/4252667/mohamed-ibrahim"}, "edited": false, "score": 0, "creation_date": 1588763451, "post_id": 56864838, "comment_id": 109021812, "body": "you clear the list first then you notify the adapter"}], "answers": [{"tags": [], "owner": {"reputation": 233, "user_id": 3826600, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/1LRlb.png?s=128&g=1", "display_name": "8K Creative Commons", "link": "https://stackoverflow.com/users/3826600/8k-creative-commons"}, "is_accepted": false, "score": 5, "last_activity_date": 1562141555, "creation_date": 1562141555, "answer_id": 56865692, "question_id": 56864838, "link": "https://stackoverflow.com/questions/56864838/inconsistency-detected-invalid-view-holder-adapter-positionviewholder/56865692#56865692", "title": "Inconsistency detected. Invalid view holder adapter positionViewHolder", "body": "<p>The error appears, because the system is trying to find a list element, which is not existent anymore, because you removed it in an earlier loop iteration. </p>\n\n<p>Make sure you do not remove elements from a list while you are still iterating over list items or accessing the list. </p>\n\n<p>Just create a separate list for the elements you want to remove and remove them AFTER the loops are complete. </p>\n"}, {"tags": [], "owner": {"reputation": 799, "user_id": 5040556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1773b4cecf543a7e334240f46fd6d113?s=128&d=identicon&r=PG&f=1", "display_name": "Daniele", "link": "https://stackoverflow.com/users/5040556/daniele"}, "is_accepted": false, "score": 0, "last_activity_date": 1613033519, "creation_date": 1613033519, "answer_id": 66151479, "question_id": 56864838, "link": "https://stackoverflow.com/questions/56864838/inconsistency-detected-invalid-view-holder-adapter-positionviewholder/66151479#66151479", "title": "Inconsistency detected. Invalid view holder adapter positionViewHolder", "body": "<p>You are trying to notify removed items which are not yet removed.</p>\n<p>You need to first clear your list <code>objectArrayList.clear()</code> and then <code>notifyItemRangeRemoved(0, size)</code>.</p>\n"}], "owner": {"reputation": 1557, "user_id": 6819340, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/aytfN.jpg?s=128&g=1", "display_name": "DarShan", "link": "https://stackoverflow.com/users/6819340/darshan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2738, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1613033519, "creation_date": 1562138117, "last_edit_date": 1562140776, "question_id": 56864838, "link": "https://stackoverflow.com/questions/56864838/inconsistency-detected-invalid-view-holder-adapter-positionviewholder", "title": "Inconsistency detected. Invalid view holder adapter positionViewHolder", "body": "<p>I am getting the above mention crash in a few devices lately, don't know what is triggering it.</p>\n\n<p>Some answers suggest to extend the LayoutManager and silence the exception but I'd rather find a permanent and efficient solution for this, some suggest to clear the list in the adapter which I'm doing but still a crash.</p>\n\n<p>Here's the Adapter class -</p>\n\n<pre><code>class Adapter(private val adapterType: Int, private val clickListener: GalleryHolder.ClickListener) : SelectableAdapter&lt;Adapter.GalleryHolder&gt;() {\n    val objectArrayList: ArrayList&lt;String&gt; = ArrayList()\n    private var emptyView: View? = null\n\n    companion object {\n        const val IMAGE = 0\n        const val VIDEO = 1\n    }\n\n    fun addAll(items: ArrayList&lt;String&gt;) {\n        objectArrayList.addAll(items)\n        notifyItemRangeInserted(0, objectArrayList.size)\n    }\n\n    fun clear() {\n        val size = objectArrayList.size\n        notifyItemRangeRemoved(0, size)\n        objectArrayList.clear()\n    }\n\n    override fun getItemCount(): Int {\n        return objectArrayList.size\n    }\n\n    fun setEmptyView(emptyView: View) {\n        this.emptyView = emptyView\n    }\n\n    fun toogleEmptyView() {\n        if (objectArrayList.size == 0) emptyView!!.visibility = View.VISIBLE\n        else emptyView!!.visibility = View.GONE\n    }\n\n\n    fun removeItems(positions: MutableList&lt;Int&gt;) {\n        positions.sortWith(Comparator { lhs, rhs -&gt; rhs!! - lhs!! })\n\n        while (positions.isNotEmpty()) {\n            if (positions.size == 1) {\n                removeItem(positions[0])\n                positions.removeAt(0)\n            } else {\n                var count = 1\n                while (positions.size &gt; count &amp;&amp; positions[count] == positions[count - 1] - 1)\n                    ++count\n\n                if (count == 1)\n                    removeItem(positions[0])\n                else\n                    removeRange(positions[count - 1], count)\n\n                if (count &gt; 0) positions.subList(0, count).clear()\n            }\n        }\n\n        toogleEmptyView()\n    }\n\n    private fun removeRange(positionStart: Int, itemCount: Int) {\n        for (i in 0 until itemCount) objectArrayList.removeAt(positionStart)\n        notifyItemRangeRemoved(positionStart, itemCount)\n    }\n\n    private fun removeItem(position: Int) {\n        objectArrayList.removeAt(position)\n        notifyItemRemoved(position)\n    }\n\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): GalleryHolder {\n        var layout = R.layout.item\n        if (adapterType == VIDEO) layout = R.layout.item_video\n\n        val view = LayoutInflater.from(parent.context).inflate(layout, parent, false)\n        return GalleryHolder(view)\n    }\n\n    override fun onBindViewHolder(holder: GalleryHolder, position: Int) {\n        if (adapterType == VIDEO)\n            Glide.with(holder.img)\n                    .asBitmap()\n                    .apply(RequestOptions()\n                            .frame(TimeUnit.SECONDS.toMicros(2))\n                            .diskCacheStrategy(DiskCacheStrategy.ALL))\n                    .load(objectArrayList[holder.adapterPosition])\n                    .transition(BitmapTransitionOptions.withCrossFade())\n                    .into(holder.img)\n        else\n            Glide.with(holder.img)\n                    .asBitmap()\n                    .apply(RequestOptions().diskCacheStrategy(DiskCacheStrategy.ALL))\n                    .load(objectArrayList[holder.adapterPosition])\n                    .transition(BitmapTransitionOptions.withCrossFade())\n                    .into(holder.img)\n\n        // Highlight the item if it's selected\n        holder.selectedOverlay.setBackgroundColor(ColorUtils.setAlphaComponent(HelperMethods.getPrimaryColor(holder.selectedOverlay.context), 175))\n        holder.selectedOverlay.visibility = if (isSelected(holder.adapterPosition)) View.VISIBLE else View.INVISIBLE\n        holder.itemView.setOnClickListener { clickListener.onItemClicked(holder.adapterPosition) }\n        holder.itemView.setOnLongClickListener { clickListener.onItemLongClicked(holder.adapterPosition) }\n    }\n\n    class GalleryHolder internal constructor(itemView: View) : RecyclerView.ViewHolder(itemView) {\n        internal val img: ImageView = itemView.findViewById(R.id.img)\n        internal val selectedOverlay: RelativeLayout = itemView.findViewById(R.id.parent)\n\n        interface ClickListener {\n            fun onItemClicked(position: Int)\n            fun onItemLongClicked(position: Int): Boolean\n        }\n    }\n}\n</code></pre>\n\n<p>Following is the stacktrace - </p>\n\n<pre><code>Fatal Exception: java.lang.IndexOutOfBoundsException: Inconsistency detected. Invalid view holder adapter positionViewHolder{41bc02f0 position=116 id=-1, oldPos=0, pLpos:0 scrap [attachedScrap] tmpDetached not recyclable(1) no parent} androidx.recyclerview.widget.RecyclerView{41dc3c18 VFED.... .F....ID 0,0-480,606 #7f090125 app:id/recycler_view}, adapter:c.g.a.b.a@41df0ba8, layout:androidx.recyclerview.widget.GridLayoutManager@41d8ca08, context:com.example.MainActivity@41cc4090\n   at androidx.recyclerview.widget.RecyclerView$Recycler.setViewCacheExtension(RecyclerView.java:79)\n   at androidx.recyclerview.widget.RecyclerView$Recycler.validateViewHolderForOffsetPosition + 5901(RecyclerView.java:5901)\n   at androidx.recyclerview.widget.RecyclerView$Recycler.tryGetViewHolderForPositionByDeadline + 6084(RecyclerView.java:6084)\n   at androidx.recyclerview.widget.RecyclerView$Recycler.getViewForPosition + 6044(RecyclerView.java:6044)\n   at androidx.recyclerview.widget.RecyclerView$Recycler.getViewForPosition + 6040(RecyclerView.java:6040)\n   at androidx.recyclerview.widget.LinearLayoutManager$LayoutState.next + 2303(LinearLayoutManager.java:2303)\n   at androidx.recyclerview.widget.GridLayoutManager.layoutChunk + 561(GridLayoutManager.java:561)\n   at androidx.recyclerview.widget.LinearLayoutManager.onAnchorReady(LinearLayoutManager.java:105)\n   at androidx.recyclerview.widget.LinearLayoutManager.fill + 1587(LinearLayoutManager.java:1587)\n   at androidx.recyclerview.widget.LinearLayoutManager.onLayoutChildren + 665(LinearLayoutManager.java:665)\n   at androidx.recyclerview.widget.GridLayoutManager.onLayoutChildren + 170(GridLayoutManager.java:170)\n   at androidx.recyclerview.widget.RecyclerView.onScrollStateChanged(RecyclerView.java:74)\n   at androidx.recyclerview.widget.RecyclerView.dispatchLayoutStep1 + 4014(RecyclerView.java:4014)\n   at androidx.recyclerview.widget.RecyclerView.dispatchLayout + 3778(RecyclerView.java:3778)\n   at androidx.recyclerview.widget.RecyclerView.onLayout + 4333(RecyclerView.java:4333)\n   at android.view.View.layout + 15602(View.java:15602)\n   at android.view.ViewGroup.layout + 4880(ViewGroup.java:4880)\n   at android.widget.RelativeLayout.onLayout + 1055(RelativeLayout.java:1055)\n   at android.view.View.layout + 15602(View.java:15602)\n   at android.view.ViewGroup.layout + 4880(ViewGroup.java:4880)\n   at androidx.swiperefreshlayout.widget.SwipeRefreshLayout.onLayout + 625(SwipeRefreshLayout.java:625)\n   at android.view.View.layout + 15602(View.java:15602)\n   at android.view.ViewGroup.layout + 4880(ViewGroup.java:4880)\n   at android.widget.FrameLayout.layoutChildren + 453(FrameLayout.java:453)\n   at android.widget.FrameLayout.onLayout + 388(FrameLayout.java:388)\n   at android.view.View.layout + 15602(View.java:15602)\n   at android.view.ViewGroup.layout + 4880(ViewGroup.java:4880)\n   at androidx.viewpager.widget.ViewPager.onLayout + 1775(ViewPager.java:1775)\n   at android.view.View.layout + 15602(View.java:15602)\n   at android.view.ViewGroup.layout + 4880(ViewGroup.java:4880)\n   at android.widget.LinearLayout.setChildFrame + 1677(LinearLayout.java:1677)\n   at android.widget.LinearLayout.layoutVertical + 1531(LinearLayout.java:1531)\n   at android.widget.LinearLayout.onLayout + 1440(LinearLayout.java:1440)\n   at android.view.View.layout + 15602(View.java:15602)\n   at android.view.ViewGroup.layout + 4880(ViewGroup.java:4880)\n   at androidx.drawerlayout.widget.DrawerLayout.onLayout + 1231(DrawerLayout.java:1231)\n   at android.view.View.layout + 15602(View.java:15602)\n   at android.view.ViewGroup.layout + 4880(ViewGroup.java:4880)\n   at android.widget.FrameLayout.layoutChildren + 453(FrameLayout.java:453)\n   at android.widget.FrameLayout.onLayout + 388(FrameLayout.java:388)\n   at android.view.View.layout + 15602(View.java:15602)\n   at android.view.ViewGroup.layout + 4880(ViewGroup.java:4880)\n   at android.widget.FrameLayout.layoutChildren + 453(FrameLayout.java:453)\n   at android.widget.FrameLayout.onLayout + 388(FrameLayout.java:388)\n   at android.view.View.layout + 15602(View.java:15602)\n   at android.view.ViewGroup.layout + 4880(ViewGroup.java:4880)\n   at android.widget.FrameLayout.layoutChildren + 453(FrameLayout.java:453)\n   at android.widget.FrameLayout.onLayout + 388(FrameLayout.java:388)\n   at android.view.View.layout + 15602(View.java:15602)\n   at android.view.ViewGroup.layout + 4880(ViewGroup.java:4880)\n   at android.widget.LinearLayout.setChildFrame + 1677(LinearLayout.java:1677)\n   at android.widget.LinearLayout.layoutVertical + 1531(LinearLayout.java:1531)\n   at android.widget.LinearLayout.onLayout + 1440(LinearLayout.java:1440)\n   at android.view.View.layout + 15602(View.java:15602)\n   at android.view.ViewGroup.layout + 4880(ViewGroup.java:4880)\n   at android.widget.FrameLayout.layoutChildren + 453(FrameLayout.java:453)\n   at android.widget.FrameLayout.onLayout + 388(FrameLayout.java:388)\n   at android.view.View.layout + 15602(View.java:15602)\n   at android.view.ViewGroup.layout + 4880(ViewGroup.java:4880)\n   at android.view.ViewRootImpl.performLayout + 2256(ViewRootImpl.java:2256)\n   at android.view.ViewRootImpl.performTraversals + 2010(ViewRootImpl.java:2010)\n   at android.view.ViewRootImpl.doTraversal + 1234(ViewRootImpl.java:1234)\n   at android.view.ViewRootImpl$TraversalRunnable.run + 6301(ViewRootImpl.java:6301)\n   at android.view.Choreographer$CallbackRecord.run + 813(Choreographer.java:813)\n   at android.view.Choreographer.doCallbacks + 613(Choreographer.java:613)\n   at android.view.Choreographer.doFrame + 583(Choreographer.java:583)\n   at android.view.Choreographer$FrameDisplayEventReceiver.run + 799(Choreographer.java:799)\n   at android.os.Handler.handleCallback + 733(Handler.java:733)\n   at android.os.Handler.dispatchMessage + 95(Handler.java:95)\n   at android.os.Looper.loop + 146(Looper.java:146)\n   at android.app.ActivityThread.main + 5511(ActivityThread.java:5511)\n   at java.lang.reflect.Method.invokeNative(Method.java)\n   at java.lang.reflect.Method.invoke + 515(Method.java:515)\n   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run + 1283(ZygoteInit.java:1283)\n   at com.android.internal.os.ZygoteInit.main + 1099(ZygoteInit.java:1099)\n   at dalvik.system.NativeStart.main(NativeStart.java)\n</code></pre>\n\n<p>Any help would be appreciated.</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 7766, "user_id": 4517450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AFIyx.jpg?s=128&g=1", "display_name": "vikas kumar", "link": "https://stackoverflow.com/users/4517450/vikas-kumar"}, "edited": false, "score": 0, "creation_date": 1562136061, "post_id": 56864193, "comment_id": 100277503, "body": "can you post some more code where you are checking the credentials"}, {"owner": {"reputation": 544, "user_id": 11577815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1daaad3689f0c0242ef83915055024d7?s=128&d=identicon&r=PG&f=1", "display_name": "Prachi Singh", "link": "https://stackoverflow.com/users/11577815/prachi-singh"}, "edited": false, "score": 0, "creation_date": 1562136201, "post_id": 56864193, "comment_id": 100277567, "body": "Use <code>ProgressDialog</code> to show your message before Login, because Login call may take time to login."}, {"owner": {"reputation": 1383, "user_id": 3999808, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/BVpV8.png?s=128&g=1", "display_name": "Zun", "link": "https://stackoverflow.com/users/3999808/zun"}, "reply_to_user": {"reputation": 544, "user_id": 11577815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1daaad3689f0c0242ef83915055024d7?s=128&d=identicon&r=PG&f=1", "display_name": "Prachi Singh", "link": "https://stackoverflow.com/users/11577815/prachi-singh"}, "edited": false, "score": 2, "creation_date": 1562136897, "post_id": 56864193, "comment_id": 100277906, "body": "<code>ProgressDialog</code> is deprecated. Don&#39;t use Dialogs for loading indicators @PrachiSingh"}, {"owner": {"reputation": 544, "user_id": 11577815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1daaad3689f0c0242ef83915055024d7?s=128&d=identicon&r=PG&f=1", "display_name": "Prachi Singh", "link": "https://stackoverflow.com/users/11577815/prachi-singh"}, "reply_to_user": {"reputation": 1383, "user_id": 3999808, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/BVpV8.png?s=128&g=1", "display_name": "Zun", "link": "https://stackoverflow.com/users/3999808/zun"}, "edited": false, "score": 0, "creation_date": 1562137438, "post_id": 56864193, "comment_id": 100278202, "body": "@Zun If ProgressDialog is deprecated so what is the alternative for ProgressDialog?"}, {"owner": {"reputation": 5726, "user_id": 3548046, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/oyTAQ.jpg?s=128&g=1", "display_name": "Umair", "link": "https://stackoverflow.com/users/3548046/umair"}, "reply_to_user": {"reputation": 544, "user_id": 11577815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1daaad3689f0c0242ef83915055024d7?s=128&d=identicon&r=PG&f=1", "display_name": "Prachi Singh", "link": "https://stackoverflow.com/users/11577815/prachi-singh"}, "edited": false, "score": 0, "creation_date": 1562139878, "post_id": 56864193, "comment_id": 100279483, "body": "@PrachiSingh the alternate is either to use alert dialog or progress bar,"}, {"owner": {"reputation": 544, "user_id": 11577815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1daaad3689f0c0242ef83915055024d7?s=128&d=identicon&r=PG&f=1", "display_name": "Prachi Singh", "link": "https://stackoverflow.com/users/11577815/prachi-singh"}, "reply_to_user": {"reputation": 5726, "user_id": 3548046, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/oyTAQ.jpg?s=128&g=1", "display_name": "Umair", "link": "https://stackoverflow.com/users/3548046/umair"}, "edited": false, "score": 0, "creation_date": 1562140233, "post_id": 56864193, "comment_id": 100279629, "body": "@Umair these are not alternatives..ProgressBar in AlertDialog is just Jugaad.. :)"}, {"owner": {"reputation": 1383, "user_id": 3999808, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/BVpV8.png?s=128&g=1", "display_name": "Zun", "link": "https://stackoverflow.com/users/3999808/zun"}, "edited": false, "score": 0, "creation_date": 1562140814, "post_id": 56864193, "comment_id": 100279889, "body": "The whole idea of creating a blocking dialog is deprecated, not just the ProgressDialog class. Google no longer recommends using dialogs. <a href=\"https://material.io/design/components/progress-indicators.html\" rel=\"nofollow noreferrer\">material.io/design/components/progress-indicators.html</a>"}, {"owner": {"reputation": 1150, "user_id": 2220318, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/afa04c92f3bc554daf14fca2b0ab780a?s=128&d=identicon&r=PG", "display_name": "Rahul Shukla", "link": "https://stackoverflow.com/users/2220318/rahul-shukla"}, "edited": false, "score": 0, "creation_date": 1562145158, "post_id": 56864193, "comment_id": 100282249, "body": "Can we see the PunchCard.kt file? Also, you say the toast is displayed if the credentials are &quot;incorrect&quot;. Who determines that the credentials are incorrect? I hope you are still making the server call in this case too."}, {"owner": {"reputation": 354, "user_id": 10573058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c150fc21939f9e4f220affba8e9bb8e1?s=128&d=identicon&r=PG&f=1", "display_name": "Scott Evans", "link": "https://stackoverflow.com/users/10573058/scott-evans"}, "reply_to_user": {"reputation": 1150, "user_id": 2220318, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/afa04c92f3bc554daf14fca2b0ab780a?s=128&d=identicon&r=PG", "display_name": "Rahul Shukla", "link": "https://stackoverflow.com/users/2220318/rahul-shukla"}, "edited": false, "score": 0, "creation_date": 1562199415, "post_id": 56864193, "comment_id": 100307019, "body": "@RahulShukla code added in edit2. Yes the server is still called, that&#39;s how we know the details are incorrect, login details are validated by the API on the server."}, {"owner": {"reputation": 1150, "user_id": 2220318, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/afa04c92f3bc554daf14fca2b0ab780a?s=128&d=identicon&r=PG", "display_name": "Rahul Shukla", "link": "https://stackoverflow.com/users/2220318/rahul-shukla"}, "edited": false, "score": 0, "creation_date": 1562295552, "post_id": 56864193, "comment_id": 100337955, "body": "1. Remove thread policy. 2. Call this function in a separate thread 3. Modify your call to handle asynchronous Login() call and it&#39;s result. 4.Check if it works."}, {"owner": {"reputation": 51156, "user_id": 1318946, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/jUw99.jpg?s=128&g=1", "display_name": "Pratik Butani", "link": "https://stackoverflow.com/users/1318946/pratik-butani"}, "reply_to_user": {"reputation": 1383, "user_id": 3999808, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/BVpV8.png?s=128&g=1", "display_name": "Zun", "link": "https://stackoverflow.com/users/3999808/zun"}, "edited": false, "score": 0, "creation_date": 1563253325, "post_id": 56864193, "comment_id": 100627361, "body": "@Zun If ProgressDialog is deprecated then why it doesn&#39;t have strike-through."}], "answers": [{"tags": [], "owner": {"reputation": 456, "user_id": 8978965, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xsvV6KVd9Cg/AAAAAAAAAAI/AAAAAAAAAPY/mIX0ufvtMdo/photo.jpg?sz=128", "display_name": "sudesh regmi", "link": "https://stackoverflow.com/users/8978965/sudesh-regmi"}, "is_accepted": false, "score": 1, "last_activity_date": 1562136201, "last_edit_date": 1562136201, "creation_date": 1562136012, "answer_id": 56864300, "question_id": 56864193, "link": "https://stackoverflow.com/questions/56864193/toast-is-not-showing-in-login-flow-when-giving-call-to-http-request/56864300#56864300", "title": "Toast Is not showing in Login Flow when giving call to HTTP request", "body": "<pre><code> Toast.makeText(applicationContext,toast_text,Toast.LENGTH_SHORT).show()   \n</code></pre>\n\n<p>This is working. Use this once.</p>\n"}, {"comments": [{"owner": {"reputation": 354, "user_id": 10573058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c150fc21939f9e4f220affba8e9bb8e1?s=128&d=identicon&r=PG&f=1", "display_name": "Scott Evans", "link": "https://stackoverflow.com/users/10573058/scott-evans"}, "edited": false, "score": 0, "creation_date": 1562137649, "post_id": 56864460, "comment_id": 100278322, "body": "To be clear the toast DOES display if my credentials are incorrect, it&#39;s just when they are correct and the separate &#39;helper&#39; file takes a while to respond on the line AFTER the toast create the toast does not appear. IMHO The toast should appear regardless of what happens with the call on the following line as it should be processed line by line."}], "tags": [], "owner": {"reputation": 608, "user_id": 4648533, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zoougZaZjb4/AAAAAAAAAAI/AAAAAAAAAGI/j4t0j7lHyWk/photo.jpg?sz=128", "display_name": "Revan siddappa", "link": "https://stackoverflow.com/users/4648533/revan-siddappa"}, "is_accepted": false, "score": 0, "last_activity_date": 1562137145, "last_edit_date": 1562137145, "creation_date": 1562136693, "answer_id": 56864460, "question_id": 56864193, "link": "https://stackoverflow.com/questions/56864193/toast-is-not-showing-in-login-flow-when-giving-call-to-http-request/56864460#56864460", "title": "Toast Is not showing in Login Flow when giving call to HTTP request", "body": "<p>1) Suppose your Toast is in Activity and in subclass than use below code:</p>\n\n<p><code>Toast.makeText(this, \"Hi there! This is a Toast.\", Toast.LENGTH_LONG).show()</code></p>\n\n<p>or </p>\n\n<pre><code>Toast.makeText(applicationContext, \"Test\", Toast.LENGTH_LONG).show()\n</code></pre>\n\n<p>2) In Fragment:</p>\n\n<pre><code>Toast.makeText(activity, \"Test\", Toast.LENGTH_LONG).show()\n</code></pre>\n\n<p>3) Using method:</p>\n\n<pre><code>fun Activity.toast(message: CharSequence, duration: Int = Toast.LENGTH_SHORT) {\n  Toast.makeText(this, message, duration).show()\n}\n\nclass MainActivity : Activity(){\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        toast(\"Hello, Kotlin!\")\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 354, "user_id": 10573058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c150fc21939f9e4f220affba8e9bb8e1?s=128&d=identicon&r=PG&f=1", "display_name": "Scott Evans", "link": "https://stackoverflow.com/users/10573058/scott-evans"}, "is_accepted": true, "score": 0, "last_activity_date": 1563253128, "creation_date": 1563253128, "answer_id": 57050293, "question_id": 56864193, "link": "https://stackoverflow.com/questions/56864193/toast-is-not-showing-in-login-flow-when-giving-call-to-http-request/57050293#57050293", "title": "Toast Is not showing in Login Flow when giving call to HTTP request", "body": "<p>Achieved desired result by moving to using async call running on background thread.\nStill doesn't explain why the toast doesn't show before the call is made, however in my project this is no longer an issue. It seems that Rahul suggested what I had already done to solve this in comments so good karma to him.\nIf anyone has an actual explanation for why this happens I'd still be interested to know.</p>\n"}], "owner": {"reputation": 354, "user_id": 10573058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c150fc21939f9e4f220affba8e9bb8e1?s=128&d=identicon&r=PG&f=1", "display_name": "Scott Evans", "link": "https://stackoverflow.com/users/10573058/scott-evans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 57050293, "answer_count": 3, "score": 3, "last_activity_date": 1563253128, "creation_date": 1562135558, "last_edit_date": 1562199275, "question_id": 56864193, "link": "https://stackoverflow.com/questions/56864193/toast-is-not-showing-in-login-flow-when-giving-call-to-http-request", "title": "Toast Is not showing in Login Flow when giving call to HTTP request", "body": "<p>In my app's login page \nI have email &amp; password fields and a sign in button.</p>\n\n<p>The button first gets the username and password, then creates a toast, \nand then calls a separate kotlin file to make a http request with the login details.</p>\n\n<p>The weird thing is:\nIf the credentials are incorrect the toast appears, \nbut when the credentials are correct and the server responds with data the toast never shows.</p>\n\n<p>I would understand however the order of execution should be that the toast is displayed <strong>before</strong> the http call is ever made.</p>\n\n<pre><code>btn_signin.setOnClickListener(){\n    val username = et_username.text.toString().trim()\n    val password = et_password.text.toString().trim()\n    var toast_text = \"Signing you in...\"\n    Toast.makeText(this@LoginActivity, toast_text, Toast.LENGTH_LONG).show()\n    val resp = Punchcard().Login(username = username, password = password)\n}\n</code></pre>\n\n<p>Have tried changing the length to short with no difference.\nSurely this should display regardless of the following code?</p>\n\n<p>EDIT:</p>\n\n<p>This is in file LoginActivity.kt, I have edited the above code a little.</p>\n\n<p>Another separate file (Punchcard.kt) handles the call to an API on a server, which all works fine and is not causing any issues. It should in theory have absolutely nothing to do with the Toast, it's just odd that the processing in a separate file seems to be taking away from the creation of the Toast. Am I crazy for thinking they should be unrelated and Android's display flow should be line by line?</p>\n\n<p>EDIT2:</p>\n\n<p>This is the Punchcard.kt Login function, makes an okhttp3 call to an API and returns the response as a string. Before it's mentioned I know I shouldn't be passing the password string, this is a flaw in the API I am using but will be updated in future. Also as mentioned above this should not have any effect as the toast is called <strong>before</strong> the login function.</p>\n\n<pre><code>fun Login(username : String, password : String): String {\n    val url: String = \"http://192.168.8.200:3001/api/auth/signin\"\n    val json = JSONObject()\n    json.put(\"usernameOrEmail\", username)\n    json.put(\"password\", password)\n    val body: RequestBody = RequestBody.create(JSON, json.toString())\n    val request = Request.Builder()\n        .url(url)\n        .post(body)\n        .build()\n    val policy : StrictMode.ThreadPolicy  = StrictMode.ThreadPolicy.Builder().permitAll().build()\n    StrictMode.setThreadPolicy(policy)\n    try {\n        var response: Response = client.newCall(request).execute()\n        return response.body()?.string() ?: \"error\"\n    } catch (e : Exception) {\n        println(e)\n    }\n    return \"error\"\n}\n</code></pre>\n"}, {"tags": ["kotlin", "build", "androidx", "kapt", "junit-jupiter"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 11732170, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Q8yXIFVG5kM/AAAAAAAAAAI/AAAAAAAAlXE/w4dzUbtUtzo/photo.jpg?sz=128", "display_name": "inner_g", "link": "https://stackoverflow.com/users/11732170/inner-g"}, "is_accepted": false, "score": 2, "last_activity_date": 1562307084, "creation_date": 1562307084, "answer_id": 56897397, "question_id": 56863896, "link": "https://stackoverflow.com/questions/56863896/nonexistentclass-cannot-be-converted-to-annotation-appkaptdebugandroidtestkot/56897397#56897397", "title": "NonExistentClass cannot be converted to Annotation - app:kaptDebugAndroidTestKotlin", "body": "<p>Seems that I mixed some JUnit4 dependencies with those of JUnit5 so by removing the following lines (like the AndroidJUnitRunner class) in the dependencies I got it working:</p>\n\n<pre><code>testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\nkapt(\"org.jetbrains.kotlin.kapt:org.jetbrains.kotlin.kapt.gradle.plugin:1.3.31:pom\")\n</code></pre>\n\n<p>And I added back again those of the jupiter packages:</p>\n\n<pre><code>testImplementation \"org.junit.jupiter:junit-jupiter-api:$junit_version\"\ntestImplementation \"org.junit.jupiter:junit-jupiter-engine:$junit_version\"\ntestImplementation \"org.junit.vintage:junit-vintage-engine:$junit_version\"\n</code></pre>\n\n<p>Also the org.junit classes in all the tests have to be replaced by their equivalent of the org.junit.jupiter package.\nThat made it compile the test without issues.</p>\n"}], "owner": {"reputation": 21, "user_id": 11732170, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Q8yXIFVG5kM/AAAAAAAAAAI/AAAAAAAAlXE/w4dzUbtUtzo/photo.jpg?sz=128", "display_name": "inner_g", "link": "https://stackoverflow.com/users/11732170/inner-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2574, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562307084, "creation_date": 1562134097, "question_id": 56863896, "link": "https://stackoverflow.com/questions/56863896/nonexistentclass-cannot-be-converted-to-annotation-appkaptdebugandroidtestkot", "title": "NonExistentClass cannot be converted to Annotation - app:kaptDebugAndroidTestKotlin", "body": "<p>I want to test a class using JUnit5 but at the time gradle runs the app:kaptDebugAndroidTestKotlin task I get the issue.</p>\n\n<p>I have already tried the solutions in the following links but nothing helps so far:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/54564247/nonexistentclass-cannot-be-converted-to-annotation\">NonExistentClass cannot be converted to Annotation</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/54919848/error-incompatible-types-nonexistentclass-cannot-be-converted-to-annotation-e\">error: incompatible types: NonExistentClass cannot be converted to Annotation @error.NonExistentClass()</a></p>\n\n<p>my project build.gradle file:</p>\n\n<pre><code>buildscript {\n    ext.kotlin_version = '1.3.40'\n    ext.anko_version='0.10.8'\n    ext.junit_version='5.5.0'\n    repositories {\n        google()\n        jcenter()\n        mavenCentral()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:3.4.1'\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n        classpath \"io.realm:realm-gradle-plugin:5.11.0\"\n    }\n}\n\nallprojects {\n    repositories {\n        google()\n        jcenter()\n\n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n\n<p>my module build.gradle file:</p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\napply plugin: 'kotlin-kapt'\napply plugin: 'realm-android'\n\nandroid {\n    compileSdkVersion 28\n    defaultConfig {\n        applicationId \"com.hays.test\"\n        minSdkVersion 15\n        targetSdkVersion 28\n        versionCode 1\n        versionName \"1.0\"\n        multiDexEnabled true\n        testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\n        compileOptions {\n            sourceCompatibility 1.8\n            targetCompatibility 1.8\n        }\n        androidExtensions {\n            experimental = true\n        }\n        buildTypes {\n            release {\n                minifyEnabled false\n                proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n            }\n        }\n    }\n}\nrealm {\n    kotlinExtensionsEnabled = true\n}\nkapt {\n    correctErrorTypes = true\n}\ndependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\n    implementation 'androidx.appcompat:appcompat:1.0.2'\n    implementation 'androidx.core:core-ktx:1.0.2'\n    implementation 'androidx.constraintlayout:constraintlayout:1.1.3'\n    implementation 'com.google.android.material:material:1.0.0'\n    testImplementation \"org.junit.jupiter:junit-jupiter-api:$junit_version\"\n    testImplementation \"org.junit.jupiter:junit-jupiter-engine:$junit_version\"\n    testImplementation \"org.junit.vintage:junit-vintage-engine:$junit_version\"\n    testImplementation 'io.mockk:mockk:1.9.3'\n    androidTestImplementation 'androidx.test:runner:1.2.0'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.2.0'\n    implementation 'io.reactivex.rxjava2:rxandroid:2.1.1'\n    implementation 'io.reactivex.rxjava2:rxjava:2.2.9'\n    implementation 'io.reactivex.rxjava2:rxkotlin:2.3.0'\n    implementation 'com.google.code.gson:gson:2.8.5'\n    implementation 'com.github.bumptech.glide:glide:4.9.0'\n    annotationProcessor 'com.github.bumptech.glide:compiler:4.9.0'\n    implementation 'com.squareup.okhttp3:okhttp:3.12.0'\n    implementation 'com.jakewharton.rxbinding2:rxbinding:2.2.0'\n    implementation 'com.jakewharton.rxbinding2:rxbinding-appcompat-v7:2.2.0'\n    implementation 'com.android.support:support-annotations:28.0.0'\n    implementation group: 'org.jetbrains.kotlinx', name: 'kotlinx-coroutines-android', version: '1.3.0-M1'\n    implementation \"org.jetbrains.anko:anko:$anko_version\"\n}\n</code></pre>\n\n<p>and my gradle.properties file:</p>\n\n<pre><code>kotlin.code.style=official\norg.gradle.jvmargs=-Xmx1536m\nandroid.useAndroidX=true\nandroid.enableJetifier=true\nandroid.databinding.enableV2=true\n</code></pre>\n\n<p>I tried to run the test but what I get while compiling is the following:</p>\n\n<p>C:\\project_path\\app\\build\\tmp\\kapt3\\stubs\\debugAndroidTest\\com\\package\\test\\module\\search\\SearchPresenterTest.java:20: error: incompatible types: NonExistentClass cannot be converted to Annotation\n    @error.NonExistentClass()</p>\n\n<p>The file under build folder has some of the following:</p>\n\n<pre><code>@error.NonExistentClass()\npublic final void setUpMocks() {\n}\n\n@error.NonExistentClass()\npublic final void onSearch() {\n}\n</code></pre>\n\n<p>While the original kotlin test file is like the following lines:</p>\n\n<pre><code>@BeforeEach\nfun setUpMocks() {\n    clearAllMocks()\n\n}\n\n\n@Test\nfun onSearch() {\n    verify { view.onSearch() }\n}\n</code></pre>\n"}, {"tags": ["android", "android-layout", "kotlin", "android-dialog", "kotlin-coroutines"], "answers": [{"tags": [], "owner": {"reputation": 119, "user_id": 9793435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jrC7D.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/9793435/kevin"}, "is_accepted": true, "score": 0, "last_activity_date": 1562131938, "creation_date": 1562131938, "answer_id": 56863469, "question_id": 56863435, "link": "https://stackoverflow.com/questions/56863435/handling-pressed-event-in-recyclerview/56863469#56863469", "title": "Handling pressed event in RecyclerView", "body": "<p>maybe <code>setOnLongClickListener</code> can help you.</p>\n"}, {"tags": [], "owner": {"reputation": 2119, "user_id": 1771187, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d1e65a99d34d97efada8c0493b03ffce?s=128&d=identicon&r=PG", "display_name": "Cruces", "link": "https://stackoverflow.com/users/1771187/cruces"}, "is_accepted": false, "score": 0, "last_activity_date": 1562132680, "creation_date": 1562132680, "answer_id": 56863618, "question_id": 56863435, "link": "https://stackoverflow.com/questions/56863435/handling-pressed-event-in-recyclerview/56863618#56863618", "title": "Handling pressed event in RecyclerView", "body": "<p>I don 't know if this is exactly what you want, but here' s what I usually do (though I use on click most of the time:</p>\n\n<pre><code>class MyAdapter : RecyclerView.Adapter&lt;MyAdapter.MyViewHolder&gt; {\n    val myItems = mutableListOf&lt;Item&gt;()\n\n    ....\n\n    override fun onBindViewHolder(holder: MyAdapter.MyViewHolder, position: Int) {\n        holder.update(myItems[position], position)\n    }\n\n    fun itemTouched(position: Int) {\n        myItems.removeAt(position)\n        notifyItemRemoved(position)\n    }\n\n    inner class MyViewHolder(view: View) : Recyclerview.Viewholder(view) {\n        var mPosition = -1\n        var mLastTouch: Long = 0\n\n        init {\n            view.SetOnTouchListener { _, event -&gt;\n            if (event.action == MotionEvent.ACTION_DOWN) {\n                mLastTouch = System.currentTimeMillis()\n\n            }else if (event.action == MotionEvent.ACTION_UP) {\n                if (System.currentTimeMillis() - lastTouch &gt; 2000) {\n                    this@MyAdapter.itemTouched(mPosition)\n                }\n                mLastTouch = 0\n            }\n        }\n    }\n            }\n        }\n\n        fun update(item: Item, position: Int) {\n            mPosition = position\n            //do updates from item\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1368, "user_id": 9046350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff03988badcde08ee17f62f3e9efeb25?s=128&d=identicon&r=PG&f=1", "display_name": "martin1337", "link": "https://stackoverflow.com/users/9046350/martin1337"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 56863469, "answer_count": 2, "score": 0, "last_activity_date": 1562132680, "creation_date": 1562131748, "last_edit_date": 1562131957, "question_id": 56863435, "link": "https://stackoverflow.com/questions/56863435/handling-pressed-event-in-recyclerview", "title": "Handling pressed event in RecyclerView", "body": "<p>I have RecyclerView with simple items. I want to handle onPress event. If user press and hold finger on item for 2 seconds, it should remove it. But I don't know how to handle delay. I've used CoroutineScope to delay callback call from AlertDialog, but this caused error.</p>\n\n<p>Solution: </p>\n\n<pre><code>vh.root.setOnTouchListener { _, event -&gt;\n     if (event.action == MotionEvent.ACTION_DOWN){\n          launch {\n              delay(2000)\n              onChosen(true, item.vehicleId, i, this@dialogCustomView)\n          }\n      }\n      true\n}\n</code></pre>\n\n<p>Error: <code>android.view.WindowLeaked: Activity MainActivity has leaked window DecorView@a1d8d91[Item1] that was originally added here</code></p>\n"}, {"tags": ["java", "android-intent", "arraylist", "kotlin", "mutablelist"], "comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1562165767, "post_id": 56862775, "comment_id": 100294438, "body": "Why not <code>putStringArrayList</code>?"}, {"owner": {"reputation": 1699, "user_id": 5261462, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kLUcB.jpg?s=128&g=1", "display_name": "Hoo", "link": "https://stackoverflow.com/users/5261462/hoo"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1562166867, "post_id": 56862775, "comment_id": 100295094, "body": "@EpicPandaForce thanks."}], "answers": [{"comments": [{"owner": {"reputation": 1699, "user_id": 5261462, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kLUcB.jpg?s=128&g=1", "display_name": "Hoo", "link": "https://stackoverflow.com/users/5261462/hoo"}, "edited": false, "score": 0, "creation_date": 1562147775, "post_id": 56863321, "comment_id": 100283723, "body": "<code>Type inference failed. Expected type mismatch:  required: java.util.ArrayList&lt;out Parcelable!&gt;! found: kotlin.collections.ArrayList&lt;String!&gt; &#47;* = java.util.ArrayList&lt;String!&gt; *&#47;</code>"}], "tags": [], "owner": {"reputation": 819, "user_id": 6203660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f7def1b4b33b4375ff0a014e6e6c54f?s=128&d=identicon&r=PG&f=1", "display_name": "Manikandan K", "link": "https://stackoverflow.com/users/6203660/manikandan-k"}, "is_accepted": false, "score": 1, "last_activity_date": 1562130991, "creation_date": 1562130991, "answer_id": 56863321, "question_id": 56862775, "link": "https://stackoverflow.com/questions/56862775/pass-mutablelist-through-intent/56863321#56863321", "title": "Pass mutableList through intent", "body": "<p>You can use this way</p>\n\n<pre><code>intent.putParcelableArrayListExtra(\"NEW_LIST\", ArrayList(newList))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 506, "user_id": 10771260, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VVqSgkCfkKs/AAAAAAAAAAI/AAAAAAAAADM/Di22v4d3YCA/photo.jpg?sz=128", "display_name": "Black mamba", "link": "https://stackoverflow.com/users/10771260/black-mamba"}, "is_accepted": false, "score": 0, "last_activity_date": 1562153127, "creation_date": 1562153127, "answer_id": 56869056, "question_id": 56862775, "link": "https://stackoverflow.com/questions/56862775/pass-mutablelist-through-intent/56869056#56869056", "title": "Pass mutableList through intent", "body": "<p>you can convert it on arraylist and pass as putParcelableArrayListExtra through intent</p>\n\n<p>you can create separate model class and add that model class to your arraylist and make it Parcelize through this you can achieve this@Parcelize \nclass model:Parcelable{\n}</p>\n"}, {"tags": [], "owner": {"reputation": 1699, "user_id": 5261462, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kLUcB.jpg?s=128&g=1", "display_name": "Hoo", "link": "https://stackoverflow.com/users/5261462/hoo"}, "is_accepted": true, "score": 4, "last_activity_date": 1562166854, "creation_date": 1562166854, "answer_id": 56873256, "question_id": 56862775, "link": "https://stackoverflow.com/questions/56862775/pass-mutablelist-through-intent/56873256#56873256", "title": "Pass mutableList through intent", "body": "<p>Was able to fix it.</p>\n\n<pre><code>  mIntent.putStringArrayListExtra(\"mFilePath\", ArrayList(newList))\n</code></pre>\n"}], "owner": {"reputation": 1699, "user_id": 5261462, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kLUcB.jpg?s=128&g=1", "display_name": "Hoo", "link": "https://stackoverflow.com/users/5261462/hoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 569, "favorite_count": 0, "accepted_answer_id": 56873256, "answer_count": 3, "score": 3, "last_activity_date": 1562166854, "creation_date": 1562126845, "last_edit_date": 1562165405, "question_id": 56862775, "link": "https://stackoverflow.com/questions/56862775/pass-mutablelist-through-intent", "title": "Pass mutableList through intent", "body": "<p>I have a <code>mutableList</code>.</p>\n\n<pre><code>var newList: MutableList&lt;String&gt; = mutableListOf()\n</code></pre>\n\n<p>How to pass <code>newList</code> through intent?</p>\n\n<p>I tried this but not working.</p>\n\n<pre><code> mIntent.putParcelableArrayListExtra(\"mFilePath\", ArrayList(newList))\n</code></pre>\n\n<p><strong>Error</strong></p>\n\n<blockquote>\n  <p>Type inference failed. Expected type mismatch:  required:\n  java.util.ArrayList! found:\n  kotlin.collections.ArrayList /* =\n  java.util.ArrayList */</p>\n</blockquote>\n"}, {"tags": ["android", "canvas", "kotlin", "draw"], "answers": [{"tags": [], "owner": {"reputation": 2530, "user_id": 876267, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0961701cb2a8116d88f10e04130b3e5b?s=128&d=identicon&r=PG", "display_name": "Mehmed", "link": "https://stackoverflow.com/users/876267/mehmed"}, "is_accepted": true, "score": 0, "last_activity_date": 1562129052, "creation_date": 1562129052, "answer_id": 56863024, "question_id": 56862623, "link": "https://stackoverflow.com/questions/56862623/bouncing-ball-in-android-skips-velocity/56863024#56863024", "title": "Bouncing ball in Android skips velocity", "body": "<p>Can you try the following:</p>\n\n<pre><code>private fun update() {\n    if (ball.posy &gt; 0) {\n        if (ball.direction == \"+\") {\n            ball.posy = min(ball.posy + ball.velocity, height - 50)\n        } else {\n            ball.posy = max(ball.posy - ball.velocity, 50)\n        }\n    }\n    if (ball.posy &gt;= height - 50) {\n        ball.direction = \"-\"\n        ball.velocity -= 2\n    } else if (ball.posy &lt;= 50) {\n        ball.direction = \"+\"\n        ball.velocity -= 2\n    }\n    invalidate()\n}\n</code></pre>\n"}], "owner": {"reputation": 171, "user_id": 3663235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7c3d76ec6c9e119b0dbd81c487fe61f?s=128&d=identicon&r=PG&f=1", "display_name": "Joaco", "link": "https://stackoverflow.com/users/3663235/joaco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 56863024, "answer_count": 1, "score": 0, "last_activity_date": 1562129624, "creation_date": 1562125379, "last_edit_date": 1562129624, "question_id": 56862623, "link": "https://stackoverflow.com/questions/56862623/bouncing-ball-in-android-skips-velocity", "title": "Bouncing ball in Android skips velocity", "body": "<p>I have a ball that only moves in a straight line and it bounces from the top and bottom of the screen. Every time it does that the velocity is reduced by 2. The ball has a radius of 50.</p>\n\n<p>It works fine but when the velocity reaches 4 and hits the next wall, it goes to 0 instead of 2 and then the next time it hits a wall to 0.</p>\n\n<p>Why is that?</p>\n\n<pre><code>private fun update() {\n    if (ball.posy &gt; 0) {\n        if (ball.direction == \"+\") {\n            ball.posy += ball.velocity\n        } else {\n            ball.posy -= ball.velocity\n        }\n    }\n    if (ball.posy &gt;= height - 50) {\n        ball.direction = \"-\"\n        ball.velocity -= 2\n    } else if (ball.posy &lt;= 50) {\n        ball.direction = \"+\"\n        ball.velocity -= 2\n    }\n    invalidate()\n}\n</code></pre>\n"}, {"tags": ["arrays", "kotlin", "set"], "comments": [{"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "edited": false, "score": 0, "creation_date": 1562105261, "post_id": 56860566, "comment_id": 100271000, "body": "Those are two different data structures, (nearly?) each programming language has implementation of set and array. Shortly Set-s does not allow duplicates, Array - well it does allow."}, {"owner": {"reputation": 45, "user_id": 11069208, "user_type": "registered", "profile_image": "https://graph.facebook.com/1009419565934496/picture?type=large", "display_name": "Tigran Minasyan", "link": "https://stackoverflow.com/users/11069208/tigran-minasyan"}, "reply_to_user": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "edited": false, "score": 0, "creation_date": 1562105855, "post_id": 56860566, "comment_id": 100271135, "body": "@marcinj thanks, but I expect a more precise answer, like what properties they have, when they are useful etc"}, {"owner": {"reputation": 10456, "user_id": 9241978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7f9d2a03452f74bfd802e36d50b7db?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel", "link": "https://stackoverflow.com/users/9241978/pawel"}, "edited": false, "score": 2, "creation_date": 1562107281, "post_id": 56860566, "comment_id": 100271424, "body": "Set and Array are basic data structures common across many (if not all) languages. You should have no issue finding resources online regarding that topic."}], "answers": [{"tags": [], "owner": {"reputation": 1089, "user_id": 498146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22d0ded7ef92729f7ed3894cbb515b35?s=128&d=identicon&r=PG", "display_name": "Ramesh Yankati", "link": "https://stackoverflow.com/users/498146/ramesh-yankati"}, "is_accepted": false, "score": 0, "last_activity_date": 1562110655, "creation_date": 1562110655, "answer_id": 56861213, "question_id": 56860566, "link": "https://stackoverflow.com/questions/56860566/the-difference-between-arrays-and-sets-in-kotlin/56861213#56861213", "title": "The difference between Arrays and Sets in Kotlin", "body": "<p>Set does not allow duplicate elements where arrays allows.It depends on the requirements. \nIf the requirement is to have only unique values then Set is your best bet as any implementation of Set maintains unique values only.</p>\n"}, {"tags": [], "owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "is_accepted": true, "score": 3, "last_activity_date": 1562112434, "creation_date": 1562112434, "answer_id": 56861382, "question_id": 56860566, "link": "https://stackoverflow.com/questions/56860566/the-difference-between-arrays-and-sets-in-kotlin/56861382#56861382", "title": "The difference between Arrays and Sets in Kotlin", "body": "<p>Short answer: an Array is an indexed data structure holding a fixed number of items; a Set is an unordered data structure holding items with no duplicates.  Both are typed.</p>\n\n<p>Long answer:</p>\n\n<p>In basic terms, an array in Kotlin is like most other languages: a data structure holding values of the same type.  Arrays have a fixed length, are ordered, and accessed randomly by index (starting from 0).</p>\n\n<p>An Array maps directly to a Java array.  This is the only data structure that the JVM provides, other than Object.  (In fact, array types are treated as special subtypes of Object.)  These are typed: you can have an array of a primitive type (e.g. an array of ints), or of a reference type (e.g. an array of Numbers).  The type is available at run-time, and enforced.  Arrays are treated as being covariant (which can cause run-time errors).</p>\n\n<p>In Kotlin/JVM, <code>Array</code> inherits almost all those features (except for covariance).  It's used only for arrays of reference types; Kotlin provides separate classes for arrays of primitives (<code>IntArray</code> &amp;c). </p>\n\n<p>And in basic terms, a <code>Set</code> is like several other languages: an unordered data structure holding items of the same type, none of which are equal.</p>\n\n<p><code>Set</code> is an interface that's part of the Java Collections framework (which also includes <code>Collection</code>, <code>List</code>, and <code>Map</code>).  A <code>Set</code> value can point to any object implementing that interface.  It's generic, with a single type parameter specifying what values can be stored in the set; this happens at compile time (only).</p>\n\n<p>In Kotlin, <code>Set</code> is covariant, and read-only; there's a <code>MutableSet</code> subinterface which adds mutator methods.  <code>MutableSet</code>s are variable-size, and grow and shrink as needed.</p>\n\n<p>There are many different implementations of the <code>Set</code> (and <code>MutableSet</code>) interface, with different performance characteristics: insertion, removal, and testing for presernce may be O(1) or O(n) or something in-between, and the memory usage and concurrency differ too.</p>\n\n<p><code>Set</code>s can be iterated, but the order is not specified in general.  (Some implementations may make guarantees about whether the order is consistent, and if so, whether/how it relates to the values and/or how they were added.)</p>\n\n<p>So, which should you use?  If you need to prevent duplicates, then a <code>Set</code> is the obvious choice.  Whereas if you need the values to be ordered, then an <code>Array</code> would be more suitable -- though because it's not part of the Collections framework, it doesn't always play well with other collection types.  (Kotlin provides many extension methods to try to smooth over the gap, but there are still many corner cases.)  So in general, it's usually better to use a <code>List</code> instead: that gives you finer control over mutability, avoids some awkward situations (especially regarding type parameters), doesn't fix the length, gives you many more extension methods, and is one character shorter!</p>\n"}], "owner": {"reputation": 45, "user_id": 11069208, "user_type": "registered", "profile_image": "https://graph.facebook.com/1009419565934496/picture?type=large", "display_name": "Tigran Minasyan", "link": "https://stackoverflow.com/users/11069208/tigran-minasyan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "accepted_answer_id": 56861382, "answer_count": 2, "score": -1, "last_activity_date": 1562112434, "creation_date": 1562105028, "question_id": 56860566, "link": "https://stackoverflow.com/questions/56860566/the-difference-between-arrays-and-sets-in-kotlin", "title": "The difference between Arrays and Sets in Kotlin", "body": "<p>Can someone tell the difference between <strong><em>Set</em></strong> and <strong><em>Array</em></strong> in Kotlin? Which one is better in which conditions?</p>\n"}, {"tags": ["android", "firebase", "kotlin", "firebase-authentication"], "answers": [{"comments": [{"owner": {"reputation": 153, "user_id": 9495357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vfWXJ.png?s=128&g=1", "display_name": "Oktawian", "link": "https://stackoverflow.com/users/9495357/oktawian"}, "edited": false, "score": 0, "creation_date": 1562144263, "post_id": 56859958, "comment_id": 100281725, "body": "Replacing <code>p0.exception</code> to <code>exception</code> worked. Thanks a lot."}], "tags": [], "owner": {"reputation": 1947, "user_id": 3034696, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7mTR8.png?s=128&g=1", "display_name": "prfarlow", "link": "https://stackoverflow.com/users/3034696/prfarlow"}, "is_accepted": true, "score": 1, "last_activity_date": 1562101058, "creation_date": 1562101058, "answer_id": 56859958, "question_id": 56859599, "link": "https://stackoverflow.com/questions/56859599/kotlin-firebase-onfailurelistener-null-exception/56859958#56859958", "title": "Kotlin Firebase onFailureListener null exception", "body": "<p>Try replacing </p>\n\n<pre><code>.addOnFailureListener { exception -&gt;\n                    interractor.emailChanged(false, handleException(p0.exception))\n                }\n</code></pre>\n\n<p>with</p>\n\n<pre><code>.addOnFailureListener { exception -&gt;\n                    interractor.emailChanged(false, handleException(exception))\n                }\n</code></pre>\n\n<p>You could also safeguard your handleException method:\nReplace</p>\n\n<pre><code>    when(exception){\n        is FirebaseAuthUserCollisionException -&gt; return \"E-mail address is not available\"\n        is FirebaseNetworkException -&gt; return \"No network\"\n        else -&gt; return \"Try again later.\"\n    }\n</code></pre>\n\n<p>with</p>\n\n<pre><code>    exception?.let {\n          when(it){\n             is FirebaseAuthUserCollisionException -&gt; return \"E-mail address is not available\"\n             is FirebaseNetworkException -&gt; return \"No network\"\n             else -&gt; return \"Try again later.\"\n          }\n    }\nreturn \"Unknown error\"\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 9495357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vfWXJ.png?s=128&g=1", "display_name": "Oktawian", "link": "https://stackoverflow.com/users/9495357/oktawian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 535, "favorite_count": 0, "accepted_answer_id": 56859958, "answer_count": 1, "score": 0, "last_activity_date": 1562101058, "creation_date": 1562099077, "question_id": 56859599, "link": "https://stackoverflow.com/questions/56859599/kotlin-firebase-onfailurelistener-null-exception", "title": "Kotlin Firebase onFailureListener null exception", "body": "<p>I am trying to update email of user in my android app. And everything works fine if the new email is available. When it isn't - onFailureListener is calling. But when I am trying to get the exception from this listener it is null and I can't get type of this exception. Why? Code below.</p>\n\n<pre><code>private fun reauthenticateAndUpdateEmail(password: String, newEmail: String){\n    val credentials = EmailAuthProvider.getCredential(auth.currentUser!!.email!!, password)\n    auth.currentUser!!.reauthenticate(credentials).addOnCompleteListener(object : OnCompleteListener&lt;Void&gt; {\n        override fun onComplete(p0: Task&lt;Void&gt;) {\n            if (p0.isSuccessful) {\n                auth.currentUser!!.updateEmail(newEmail).addOnSuccessListener {\n                    interractor.emailChanged()\n                }.addOnFailureListener { exception -&gt;\n                    interractor.emailChanged(false, handleException(p0.exception))\n                }\n            } else interractor.emailChanged(false, handleException(p0.exception))\n        }\n    })\n}\n\nprivate fun handleException(exception: Exception?): String{\n    //exception is null\n    when(exception){\n        is FirebaseAuthUserCollisionException -&gt; return \"E-mail address is not available\"\n        is FirebaseNetworkException -&gt; return \"No network\"\n        else -&gt; return \"Try again later.\"\n    }\n}\n</code></pre>\n\n<p>Thanks in advance and have a nice day.</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 153, "user_id": 9495357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vfWXJ.png?s=128&g=1", "display_name": "Oktawian", "link": "https://stackoverflow.com/users/9495357/oktawian"}, "is_accepted": false, "score": 0, "last_activity_date": 1562099623, "creation_date": 1562099623, "answer_id": 56859692, "question_id": 56859354, "link": "https://stackoverflow.com/questions/56859354/should-i-override-alertdialog/56859692#56859692", "title": "Should I override AlertDialog?", "body": "<p>Try this</p>\n\n<pre><code>private fun showAlertDialog(){\n    val dialog = AlertDialog.Builder(this)\n        .setTitle(\"title\")\n        .setMessage(\"message\")\n        .setCancelable(false)\n        .setPositiveButton(\"OK\", null)\n        .setNegativeButton(\"Cancel\", null)\n        .create()\n\n    dialog.setOnShowListener(object: DialogInterface.OnShowListener{\n        override fun onShow(p0: DialogInterface?) {\n            dialog.getButton(AlertDialog.BUTTON_NEGATIVE).setOnClickListener{\n                someFunction()\n                dialog.dismiss()\n            }\n        }\n    })\n}\n</code></pre>\n"}], "owner": {"reputation": 130, "user_id": 11028902, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-onJNcV3RQW8/AAAAAAAAAAI/AAAAAAAAAC8/fl7xRYpK6fo/photo.jpg?sz=128", "display_name": "Pavel Malinovskij", "link": "https://stackoverflow.com/users/11028902/pavel-malinovskij"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562101049, "creation_date": 1562097860, "last_edit_date": 1562101049, "question_id": 56859354, "link": "https://stackoverflow.com/questions/56859354/should-i-override-alertdialog", "title": "Should I override AlertDialog?", "body": "<p>I have function which creates dialog</p>\n\n<pre><code>fun abs(){\nval builder = AlertDialog.Builder(context)\n//and so on\n}\n</code></pre>\n\n<p>And I want to use <code>setOnCancelListener</code></p>\n\n<pre><code>builder.setCanceledOnTouchOutside(true)\nbuilder.setOnCancelListener(DialogInterface.OnCancelListener {\nsomeFunction(view)\n})\n</code></pre>\n\n<p>The main problem is that <code>someFunction(view)</code> must be used before builder/dialog is cancelled.\nHow can I achieve that? Do I need to override some function of <code>AlertDialog</code>?</p>\n"}, {"tags": ["android-studio", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 2381, "user_id": 11040422, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HJ6X7.png?s=128&g=1", "display_name": "SaadAAkash", "link": "https://stackoverflow.com/users/11040422/saadaakash"}, "reply_to_user": {"reputation": 9, "user_id": 11730999, "user_type": "registered", "profile_image": "https://graph.facebook.com/2227398907575038/picture?type=large", "display_name": "\u0414\u0435\u043d\u0438\u0441 \u0411\u043e\u0441\u044b\u0439", "link": "https://stackoverflow.com/users/11730999/%d0%94%d0%b5%d0%bd%d0%b8%d1%81-%d0%91%d0%be%d1%81%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1562138583, "post_id": 56860302, "comment_id": 100278796, "body": "Are all the libraries are added in the <code>build.gradle</code> file properly and synced with the Internet turned on?"}, {"owner": {"reputation": 9, "user_id": 11730999, "user_type": "registered", "profile_image": "https://graph.facebook.com/2227398907575038/picture?type=large", "display_name": "\u0414\u0435\u043d\u0438\u0441 \u0411\u043e\u0441\u044b\u0439", "link": "https://stackoverflow.com/users/11730999/%d0%94%d0%b5%d0%bd%d0%b8%d1%81-%d0%91%d0%be%d1%81%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1562172096, "post_id": 56860302, "comment_id": 100297739, "body": "How can I check it?"}], "tags": [], "owner": {"reputation": 2381, "user_id": 11040422, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HJ6X7.png?s=128&g=1", "display_name": "SaadAAkash", "link": "https://stackoverflow.com/users/11040422/saadaakash"}, "is_accepted": false, "score": 0, "last_activity_date": 1562103670, "last_edit_date": 1562103670, "creation_date": 1562103276, "answer_id": 56860302, "question_id": 56859181, "link": "https://stackoverflow.com/questions/56859181/gradle-sync-failed-in-opening-a-kotlin-project-on-android-studio/56860302#56860302", "title": "Gradle sync failed in opening a Kotlin project on Android Studio", "body": "<p>Go to <code>File-&gt;Settings-&gt;Build, Execution, Deployment-&gt;Build Tools-&gt;Gradle</code> and then uncheck the <code>Offline work</code> option. Hit Apply &amp; Ok. Sync the <code>gradle.build</code> file again. </p>\n\n<p>Go to <code>File-&gt;Invalidate Caches/Restart</code> and select <code>Invalidate and Restart</code> from the dialog box if the error persists. </p>\n\n<p>If still there's any problem syncing the library files, check if the following <code>maven</code> section is there as it is below in your project-level <code>build.gradle</code> file:</p>\n\n<pre><code>allprojects {\n     repositories {\n         jcenter()\n         maven {\n             url \"https://maven.google.com\"\n         }\n     }\n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 11730999, "user_type": "registered", "profile_image": "https://graph.facebook.com/2227398907575038/picture?type=large", "display_name": "\u0414\u0435\u043d\u0438\u0441 \u0411\u043e\u0441\u044b\u0439", "link": "https://stackoverflow.com/users/11730999/%d0%94%d0%b5%d0%bd%d0%b8%d1%81-%d0%91%d0%be%d1%81%d1%8b%d0%b9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1562121619, "creation_date": 1562097052, "last_edit_date": 1562121619, "question_id": 56859181, "link": "https://stackoverflow.com/questions/56859181/gradle-sync-failed-in-opening-a-kotlin-project-on-android-studio", "title": "Gradle sync failed in opening a Kotlin project on Android Studio", "body": "<p>I have a problem with opening my Kotlin project on Android Studio. What should I do to solve the problem? The error log I'm receiving is:</p>\n\n<pre><code>ERROR: Unable to resolve dependency for ':app@debug/compileClasspath': Could not resolve com.android.support:appcompat-v7:28.0.0.\nShow Details\nAffected Modules: app\nERROR: Unable to resolve dependency for ':app@debug/compileClasspath': Could not resolve com.android.support.constraint:constraint-layout:1.1.3.\nShow Details\nAffected Modules: app\nERROR: Unable to resolve dependency for ':app@debugAndroidTest/compileClasspath': Could not resolve com.android.support.test:runner:1.0.2.\nShow Details\nAffected Modules: app\n...\n...\n</code></pre>\n"}, {"tags": ["java", "spring", "kotlin", "spring-data-jpa"], "comments": [{"owner": {"reputation": 5502, "user_id": 2958086, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5iJz9.png?s=128&g=1", "display_name": "Compass", "link": "https://stackoverflow.com/users/2958086/compass"}, "edited": false, "score": 0, "creation_date": 1562096009, "post_id": 56858925, "comment_id": 100267931, "body": "Are the IDs sequential?"}, {"owner": {"reputation": 498, "user_id": 8921534, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c9eb9ce0790d4e042bbd0b4867f30156?s=128&d=identicon&r=PG&f=1", "display_name": "furry12", "link": "https://stackoverflow.com/users/8921534/furry12"}, "reply_to_user": {"reputation": 5502, "user_id": 2958086, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5iJz9.png?s=128&g=1", "display_name": "Compass", "link": "https://stackoverflow.com/users/2958086/compass"}, "edited": false, "score": 0, "creation_date": 1562096493, "post_id": 56858925, "comment_id": 100268105, "body": "Yes, id is a Long type value generated with a sequence"}], "answers": [{"tags": [], "owner": {"reputation": 91, "user_id": 2580291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05b95efedd881721ed2d6bf27ceb7a16?s=128&d=identicon&r=PG", "display_name": "classeswilldullyourmind", "link": "https://stackoverflow.com/users/2580291/classeswilldullyourmind"}, "is_accepted": false, "score": 0, "last_activity_date": 1562097463, "creation_date": 1562097463, "answer_id": 56859269, "question_id": 56858925, "link": "https://stackoverflow.com/questions/56858925/what-is-the-best-way-to-find-a-fixed-number-of-random-users-in-db-based-on-a-par/56859269#56859269", "title": "What is the best way to find a fixed number of RANDOM users in DB based on a parameter?", "body": "<p>Do not generate ids, instead generate row indexes.</p>\n\n<p>Then in a loop you can do this</p>\n\n<pre><code>select top 1 start at :randomBase *\nfrom users where gender = :gender\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5502, "user_id": 2958086, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5iJz9.png?s=128&g=1", "display_name": "Compass", "link": "https://stackoverflow.com/users/2958086/compass"}, "is_accepted": false, "score": 2, "last_activity_date": 1562164483, "last_edit_date": 1562164483, "creation_date": 1562097472, "answer_id": 56859272, "question_id": 56858925, "link": "https://stackoverflow.com/questions/56858925/what-is-the-best-way-to-find-a-fixed-number-of-random-users-in-db-based-on-a-par/56859272#56859272", "title": "What is the best way to find a fixed number of RANDOM users in DB based on a parameter?", "body": "<p>I'm not wholly familiar with Kotlin language but I'll write out the logic in Java and hope it translates well to you from there.</p>\n\n<p>Your goal is to fetch 20 of a single gender, but you can't figure out what gender it is until you fetch it. Since we're already fetching 20 rows from the database, we can grab more as spares.</p>\n\n<p>We can use a cumulative distribution for an optimal count of how many rows we realistically need, using this tool: <a href=\"https://stattrek.com/online-calculator/binomial.aspx\" rel=\"nofollow noreferrer\">https://stattrek.com/online-calculator/binomial.aspx</a></p>\n\n<p>Assuming 50/50 gender breakdown, probability is 0.5. You can adjust this if your gender distribution is different for your needs. If the gender breakdown is not 50/50, you can create separate bucket fetches for each gender to get an appropriate level of success. We want at least 20 successful matches. </p>\n\n<blockquote>\n  <p>With a sample size of 60, we get a <strong>99.6%</strong> probability that we will have 20 or more matches for the gender.</p>\n</blockquote>\n\n<p>So we can fetch 60 instead of 20, filter for the first 20 of selected gender. If we don't reach 20 (on a 0.4% chance), then redraw another set of 20 to fill out our group. So 99% of the time, 60 row fetches, on a bad one, probably 80 row fetches. This does away with any use of RAND on the DB side which should be suitable for extra-large databases.</p>\n\n<pre><code>Set&lt;Long&gt; idsToFetch = random.longs(2*amountOfIds, 1L, numberOfUsersInDatabase)\n            .boxed()\n            .filter { num -&gt; !excludedIds.contains(num) }\n            .limit(amountOfIds * 3)\n            .collect(toSet());\n\nList&lt;User&gt; randomUsers = userRepository.findUsersByIds(idsToFetch);\n\nList&lt;User&gt; selectedUsers = randomUsers\n                            .stream()\n                            .filter(e -&gt; e.gender == selectedGender)\n                            .limit(amountOfIds)\n                            .collect(toList());\n\n\nif(selectedUsers.length &lt; amountOfIds) { \n    //redo or single fetch operation\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 498, "user_id": 8921534, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c9eb9ce0790d4e042bbd0b4867f30156?s=128&d=identicon&r=PG&f=1", "display_name": "furry12", "link": "https://stackoverflow.com/users/8921534/furry12"}, "edited": false, "score": 0, "creation_date": 1562103773, "post_id": 56859525, "comment_id": 100270616, "body": "Hmm, if I understand correctly, such an approach would cause that the user would always receive the same 20 users for as long as I do not refresh the view, since the view will be randomly sorted once every time the refreshing runs"}, {"owner": {"reputation": 66, "user_id": 5165678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ed4727f2cb9c14f9c25af2bd74abdcb?s=128&d=identicon&r=PG&f=1", "display_name": "Vanitha Kumar", "link": "https://stackoverflow.com/users/5165678/vanitha-kumar"}, "reply_to_user": {"reputation": 498, "user_id": 8921534, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c9eb9ce0790d4e042bbd0b4867f30156?s=128&d=identicon&r=PG&f=1", "display_name": "furry12", "link": "https://stackoverflow.com/users/8921534/furry12"}, "edited": false, "score": 0, "creation_date": 1562165777, "post_id": 56859525, "comment_id": 100294449, "body": "Yes, the data will be same between refreshes. This solution will only work if your API request volume is low (ex. 1000 male customers every week to send marketing emails) It will not scale for a high volume API (ex. 1000 male customers every minute, to post ads on websites they visit)"}], "tags": [], "owner": {"reputation": 66, "user_id": 5165678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ed4727f2cb9c14f9c25af2bd74abdcb?s=128&d=identicon&r=PG&f=1", "display_name": "Vanitha Kumar", "link": "https://stackoverflow.com/users/5165678/vanitha-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1562098761, "creation_date": 1562098761, "answer_id": 56859525, "question_id": 56858925, "link": "https://stackoverflow.com/questions/56858925/what-is-the-best-way-to-find-a-fixed-number-of-random-users-in-db-based-on-a-par/56859525#56859525", "title": "What is the best way to find a fixed number of RANDOM users in DB based on a parameter?", "body": "<p>How about a materialized view with the query in your post. It can be scheduled to refresh at a schedule of your choosing (using cron job or perhaps other tools offered by Postgres) </p>\n"}, {"comments": [{"owner": {"reputation": 498, "user_id": 8921534, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c9eb9ce0790d4e042bbd0b4867f30156?s=128&d=identicon&r=PG&f=1", "display_name": "furry12", "link": "https://stackoverflow.com/users/8921534/furry12"}, "edited": false, "score": 0, "creation_date": 1562133290, "post_id": 56862158, "comment_id": 100276395, "body": "this will be inefficient on the DB side, since <code>ORDER BY RANDOM()</code> will always reorder the entire table, regardless of how many records I want to retrieve. Meaning that if there are 20 million records that match my criteria and I only want to retireve 1000, it will still start by sorting the 20 million entries"}, {"owner": {"reputation": 312, "user_id": 6903390, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GomJd.jpg?s=128&g=1", "display_name": "jin", "link": "https://stackoverflow.com/users/6903390/jin"}, "reply_to_user": {"reputation": 498, "user_id": 8921534, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c9eb9ce0790d4e042bbd0b4867f30156?s=128&d=identicon&r=PG&f=1", "display_name": "furry12", "link": "https://stackoverflow.com/users/8921534/furry12"}, "edited": false, "score": 0, "creation_date": 1562137904, "post_id": 56862158, "comment_id": 100278469, "body": "firstly not use random by DB.if you have 20 million,random 200 Partition by code.select all ids in one Partition .then random get 1000 ids in memory."}], "tags": [], "owner": {"reputation": 312, "user_id": 6903390, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GomJd.jpg?s=128&g=1", "display_name": "jin", "link": "https://stackoverflow.com/users/6903390/jin"}, "is_accepted": false, "score": 1, "last_activity_date": 1562121105, "creation_date": 1562121105, "answer_id": 56862158, "question_id": 56858925, "link": "https://stackoverflow.com/questions/56858925/what-is-the-best-way-to-find-a-fixed-number-of-random-users-in-db-based-on-a-par/56862158#56862158", "title": "What is the best way to find a fixed number of RANDOM users in DB based on a parameter?", "body": "<p>select 100 thousand id in your condition.the data about several MB in memory.just shuffle it.then <code>select * from tables in(id1,id2...,id20)</code></p>\n"}], "owner": {"reputation": 498, "user_id": 8921534, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c9eb9ce0790d4e042bbd0b4867f30156?s=128&d=identicon&r=PG&f=1", "display_name": "furry12", "link": "https://stackoverflow.com/users/8921534/furry12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "answer_count": 4, "score": 4, "last_activity_date": 1562164483, "creation_date": 1562095658, "question_id": 56858925, "link": "https://stackoverflow.com/questions/56858925/what-is-the-best-way-to-find-a-fixed-number-of-random-users-in-db-based-on-a-par", "title": "What is the best way to find a fixed number of RANDOM users in DB based on a parameter?", "body": "<p>I am developing a Spring Boot REST API in Kotlin. The underlying db is Postgresql and I am using Spring Data JPA for database access.</p>\n\n<p>I have a table called \"Users\" , where I have some user data. One of the user properties is \"gender\". It can have one of two values: MALE or FEMALE.</p>\n\n<p>I would like to have a feature in my app to find a random number (say 20 for example) of people of specified gender that I have not seen before. I mean - let's assume I have a table where I store the ids of users that I have already seen. </p>\n\n<p>So now, what I want to do is basically get 20 random users from Users table, where gender is MALE and id is NOT IN [list of ids I have seen].</p>\n\n<p>The randomness of the query initially led me to creating a native query of the kind:</p>\n\n<pre><code>SELECT *  FROM users WHERE gender = :gender ORDER BY random() LIMIT :number\n</code></pre>\n\n<p>However, I realized that it might be very inefficient, since the <code>order by random()</code> part will be sorting the entire table (or ~half of the table if I select one gender).</p>\n\n<p>So my second idea was to take care of the randomness in the code. So I decided to make a db call to count the amount of users (to fetch the highest id), then generate some id values in the range from 0 to the highest, filter out the ones that I have seen and then fetch the users from DB by ids:</p>\n\n<pre><code>val numberOfUsersInDatabase = userRepository.count()\n    val idsOfUsersVotedForBefore = voteService.findIdsOfUsersVotedFor(requestingUser.id!!)\n    val excludedIds = idsOfUsersVotedForBefore.plus(requestingUser.id)\n\n    val idsToFetch = random.longs(2*amountOfIds, 1L, numberOfUsersInDatabase)\n            .boxed()\n            .filter { num -&gt; !excludedIds.contains(num) }\n            .limit(amountOfIds)\n            .collect(toSet())\n   val randomUsers = userRepository.findUsersByIds(idsToFetch)\n</code></pre>\n\n<p>But in this case I have no way of knowing what the gender of the randomly selected user is, so there is no possibility for me to filter the results by gender before making the db call.</p>\n\n<p>Can you please advice how to tackle this better?</p>\n"}, {"tags": ["java", "android", "kotlin", "dependency-injection", "dagger-2"], "answers": [{"tags": [], "owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "is_accepted": true, "score": 1, "last_activity_date": 1562096839, "creation_date": 1562096839, "answer_id": 56859137, "question_id": 56858797, "link": "https://stackoverflow.com/questions/56858797/dagger2-return-not-singleton-object-from-singleton-component/56859137#56859137", "title": "Dagger2: return not singleton object from singleton component", "body": "<p>If you provide your <code>Model</code> as</p>\n\n<pre><code>@Singleton\nclass Model @Inject constructor()\n</code></pre>\n\n<p>or as</p>\n\n<pre><code>@Provides\n@Singleton\nfun provideModel() = Model()\n</code></pre>\n\n<p>it will be a singleton.</p>\n\n<p>If you don't annotate any provider with <code>@Singleton</code>, <code>@Reusable</code> or any other scope, you will always create a new instance.</p>\n"}], "owner": {"reputation": 159, "user_id": 6706710, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/0d3ffe63e0d048a73656e46f76b435fb?s=128&d=identicon&r=PG&f=1", "display_name": "stefano capra", "link": "https://stackoverflow.com/users/6706710/stefano-capra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 56859137, "answer_count": 1, "score": 1, "last_activity_date": 1562096839, "creation_date": 1562095086, "question_id": 56858797, "link": "https://stackoverflow.com/questions/56858797/dagger2-return-not-singleton-object-from-singleton-component", "title": "Dagger2: return not singleton object from singleton component", "body": "<p>how can I return not singleton objects from a <code>@Singleton</code> component?</p>\n\n<p>For example I have:</p>\n\n<p><code>ApplicationComponent.kt</code></p>\n\n<pre><code>@Singleton\n@Component(modules = [ApplicationModule::class])\ninterface ApplicationComponent() {\n    fun database(): Database\n    fun model(): Model\n}\n</code></pre>\n\n<p><code>Model.kt</code></p>\n\n<pre><code>class Model @Inject constructor()\n</code></pre>\n\n<p>What I want is to return a different instance of <code>Model</code> every time, conversely to <code>Database</code> which will be a singleton, and been provided by <code>ApplicationModule.kt</code></p>\n"}, {"tags": ["android", "android-studio", "kotlin", "admob"], "comments": [{"owner": {"reputation": 958, "user_id": 10008731, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZF3bk.jpg?s=128&g=1", "display_name": "SnakeException", "link": "https://stackoverflow.com/users/10008731/snakeexception"}, "edited": false, "score": 0, "creation_date": 1562098667, "post_id": 56858637, "comment_id": 100268966, "body": "Can&#39;t you just make an AsyncTask to sleep 20 secs and then display?"}], "answers": [{"tags": [], "owner": {"reputation": 1694, "user_id": 10172915, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dgRVP.png?s=128&g=1", "display_name": "Akaki Kapanadze", "link": "https://stackoverflow.com/users/10172915/akaki-kapanadze"}, "is_accepted": true, "score": 1, "last_activity_date": 1562102582, "creation_date": 1562102582, "answer_id": 56860200, "question_id": 56858637, "link": "https://stackoverflow.com/questions/56858637/how-to-show-interstitial-ads-after-x-time-in-kotlin/56860200#56860200", "title": "How to show Interstitial ads after X time in Kotlin?", "body": "<p>Use <code>Handler</code> if you need to schedule an event in the future. For example:</p>\n\n<pre><code>private val adsHandler = object : Handler(Looper.getMainLooper()){\n    override fun handleMessage(msg: Message?) {\n        interstitialAd.show()\n    }\n}\n\nprivate fun scheduleAd(){\n    adsHandler.sendEmptyMessageDelayed(0, 20_000)\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>...\ninterstitialAd.setAdListener(object : AdListener() {\n            fun onAdLoaded() {\n                scheduleAd()\n            }\n\n            fun onAdClosed() {\n                // reschedule\n                scheduleAd()\n            }\n        })\n</code></pre>\n"}], "owner": {"reputation": 434, "user_id": 11474134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0fb744556a3b4417ead6ff0d899adc9?s=128&d=identicon&r=PG", "display_name": "F&#233;lix Maroy", "link": "https://stackoverflow.com/users/11474134/f%c3%a9lix-maroy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 352, "favorite_count": 0, "accepted_answer_id": 56860200, "answer_count": 1, "score": 0, "last_activity_date": 1562102582, "creation_date": 1562094163, "question_id": 56858637, "link": "https://stackoverflow.com/questions/56858637/how-to-show-interstitial-ads-after-x-time-in-kotlin", "title": "How to show Interstitial ads after X time in Kotlin?", "body": "<p>My question is direct: \"How can I show Interstitial ads in my kotlin app after X time ?\" For exemple, the Interstitial ad must be shown automatically after 20 seconds. Which code can I use ? I did all tricks in this link <a href=\"https://developers.google.com/admob/android/interstitial\" rel=\"nofollow noreferrer\">https://developers.google.com/admob/android/interstitial</a> but there is no solution for my problem.</p>\n"}, {"tags": ["kotlin", "rx-android", "subscribe"], "answers": [{"tags": [], "owner": {"reputation": 3, "user_id": 2595647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IzKL4.jpg?s=128&g=1", "display_name": "Jason Jacobs", "link": "https://stackoverflow.com/users/2595647/jason-jacobs"}, "is_accepted": false, "score": 0, "last_activity_date": 1562186251, "creation_date": 1562186251, "answer_id": 56877608, "question_id": 56857691, "link": "https://stackoverflow.com/questions/56857691/properly-handling-404-to-make-subsequent-api-call-in-subscribe-method/56877608#56877608", "title": "properly handling 404 to make subsequent API call in subscribe method", "body": "<p>Finally figured out that the problem. I didn't understand that the call to create in the subscribe was an observable that I never subscribes to.  Instead, I moved the call from the subscribe error callback to onErrorResumeNext so it can go through the chain and eventually get subscribed to.  I have no idea if this is the most correct way to do what I am trying to do, but it works.</p>\n\n<pre><code>   remoteCase.doesCaseExist(id)\n           .flatMap {\n               if (it) {\n                   //some stuff\n               } else {\n                   //create on 200 response but empty body\n                   //this was the old way\n                   remoteCase.createCase(id)\n               }\n           }\n           .onErrorResumeNext(\n               remoteCase.createCase(id)\n           )\n           .subscribe({\n               //success actions\n           }, { \n               //error actions\n           })\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 2595647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IzKL4.jpg?s=128&g=1", "display_name": "Jason Jacobs", "link": "https://stackoverflow.com/users/2595647/jason-jacobs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562186251, "creation_date": 1562089615, "question_id": 56857691, "link": "https://stackoverflow.com/questions/56857691/properly-handling-404-to-make-subsequent-api-call-in-subscribe-method", "title": "properly handling 404 to make subsequent API call in subscribe method", "body": "<p>I am not an android developer, but I find myself supporting some android code.  I have a \"doesExist\" API call with a subscribe method on it.  If the API returns an error, I want a second API to be called, but inside the error callback for subscribe it doesn't make the call.  The function to make the request is called, but Charles shows me that the request is never actually made.  I've spent hours looking through blog posts and stackoverflow and haven't found an answer.</p>\n\n<p>The code:</p>\n\n<pre><code>fun doesExistThenCreate(id: String) {\n       remoteCase.doesCaseExist(id)\n               .flatMap {\n                   if (it) {\n                       //some stuff\n                   } else {\n                       //create on 200 response but empty body\n                       //this was the old way\n                       remoteCase.createCase(id)\n                   }\n               }\n               .subscribe({\n                   //success actions\n               }, { \n                   //doesExist returns 404, so call create.\n                   //this is the new way, and it's not working\n                   remoteCase.createCase(id)\n               })\n</code></pre>\n\n<p>When the doesCaseExist API call is a success, a flatMap is applied, and part of the code in that block is to also call the second API.  This one always works when the doesExist returns a 200.  </p>\n\n<p>The original doesExist API used to return a 200 with an empty body if \"it\" didn't exist. When it doesn't exist, we want to create it.  We are changing the API to return a 404 when \"it\" doesn't exist, and we want to create it.  That's why you see two calls for create.  When this works properly, the one in flatMap will go away.</p>\n\n<p>I've verified through a few Charles rewrites that it's the 404 response itself that's causing this to enter into the subscribe error callback.  When I debug, I can trace all the way down to the point of actually making the API call, but it doesn't.  It's like for some reason, it skips over actually making the second call when the first one throws a 404.</p>\n\n<p>Obviously, what I want to have happen is that if doesCaseExist gets a 404, I want the createCase in the subsribe error callback to run.  I'm not sure if this is a threading issue, if I'm not handling the 404 properly, or if I just don't understand subscribe (all of which are completely possible).</p>\n\n<p>Thanks for the help.  I'm stumped.</p>\n"}, {"tags": ["class", "generics", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11730122, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GGjKgMFrb7k/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reGYLqWpb1a5y2P4_wUZfdeL111_w/photo.jpg?sz=128", "display_name": "Robert Barbour", "link": "https://stackoverflow.com/users/11730122/robert-barbour"}, "edited": false, "score": 0, "creation_date": 1562092305, "post_id": 56857800, "comment_id": 100266537, "body": "Elli - Thanks so much for this - As you can see I am pretty new to Kotlin and I will take your comments on board."}, {"owner": {"reputation": 1190, "user_id": 2196138, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B0JAG.jpg?s=128&g=1", "display_name": "Elli White", "link": "https://stackoverflow.com/users/2196138/elli-white"}, "reply_to_user": {"reputation": 3, "user_id": 11730122, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GGjKgMFrb7k/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reGYLqWpb1a5y2P4_wUZfdeL111_w/photo.jpg?sz=128", "display_name": "Robert Barbour", "link": "https://stackoverflow.com/users/11730122/robert-barbour"}, "edited": false, "score": 0, "creation_date": 1562092880, "post_id": 56857800, "comment_id": 100266760, "body": "Great. If this solves your question, don&#39;t forget to upvote and accept the answer!"}], "tags": [], "owner": {"reputation": 1190, "user_id": 2196138, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B0JAG.jpg?s=128&g=1", "display_name": "Elli White", "link": "https://stackoverflow.com/users/2196138/elli-white"}, "is_accepted": true, "score": 1, "last_activity_date": 1562090130, "creation_date": 1562090130, "answer_id": 56857800, "question_id": 56857573, "link": "https://stackoverflow.com/questions/56857573/kotlin-generic-classes/56857800#56857800", "title": "Kotlin generic classes", "body": "<p>Your best bet is to implement your <code>RecyclerView.Adapter</code> with the specified type, <code>CourseMark</code>. I'm not clear on why you are keeping your adapter generic, when you are inflating a layout that looks like it is specific to the class <code>CourseMark</code>. </p>\n\n<p>If however, you really do want to keep this generic, you can leverage Kotlin's smart casting in your <code>onBindViewHolder</code> method:</p>\n\n<pre><code>override fun onBindViewHolder(holder: BaseViewHolder, position: Int) {\n    val current = mMarks[position]\n    if(current is CourseMark){\n         holder.markItemView.text = current.name\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11730122, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GGjKgMFrb7k/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reGYLqWpb1a5y2P4_wUZfdeL111_w/photo.jpg?sz=128", "display_name": "Robert Barbour", "link": "https://stackoverflow.com/users/11730122/robert-barbour"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 56857800, "answer_count": 1, "score": 0, "last_activity_date": 1562093184, "creation_date": 1562089081, "last_edit_date": 1562093184, "question_id": 56857573, "link": "https://stackoverflow.com/questions/56857573/kotlin-generic-classes", "title": "Kotlin generic classes", "body": "<p>I am new to Kotlin and am trying to access a specific field within a generic class</p>\n\n<p>I have tried all sorts of potential solutions - The problem that I have is that I don't know how to inform Kotlin that the field name in the class that I pass across exists.</p>\n\n<p>This is my class :-</p>\n\n<pre><code>@Entity(tableName = \"coursemark_table\")\n@Parcelize\nclass CourseMark(\n    @field:PrimaryKey\n    @field:ColumnInfo(name = \"coursemark_number\")\n    var number: Int,\n    var name: String,\n    var latitude: String,\n    var longitude: String,\n    var passTo: String\n): Parcelable\n</code></pre>\n\n<p>This is the generic list adapter class that I am trying to initialise - I can't work out how to get at the name field in CourseMark in the OnBindViewHolder function I can understand why since BaseListHolder has no knowledge of the field names in CourseMark until it is initialised but there must be a way of telling the Kotlin compiler that this field exists - My apologies for posting this but I have been struggling for a number of days to figure this out :-</p>\n\n<pre><code>abstract class BaseListAdapter&lt;T&gt; internal constructor(context: Context) :\n    RecyclerView.Adapter&lt;BaseListAdapter&lt;T&gt;.BaseViewHolder&gt;() {\n\n    private val mInflater: LayoutInflater = LayoutInflater.from(context)\n    private var mMarks = emptyList&lt;T&gt;() // Cached copy of marks\n\n    inner class BaseViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView) {\n        val markItemView: TextView = itemView.findViewById(R.id.textView)\n    }\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): BaseViewHolder {\n        val itemView = mInflater.inflate(R.layout.recyclerview_coursemark, parent, false)\n        return BaseViewHolder(itemView)\n    }\n\n    override fun onBindViewHolder(holder: BaseViewHolder, position: Int) {\n        val current = mMarks[position]\n        holder.markItemView.text = current.name\n    }\n\n    /**\n     * Associate a list of marks with this adapter\n     */\n\n    internal fun setMarks(marks: List&lt;T&gt;) {\n        mMarks = marks\n        notifyDataSetChanged()\n    }\n\n    // getItemCount() is called many times, and when it is first called,\n    // mMarks has not been updated (means initially, it's null, and we can't return null).\n    override fun getItemCount(): Int {\n        return mMarks.size\n    }\n\n    /**\n     * Get the mark at a given position.\n     * This method is useful for identifying which mark\n     * was clicked or swiped in methods that handle user events.\n     *\n     * @param position\n     * @return The mark at the given position\n     */\n    fun getMarkAtPosition(position: Int): T {\n        return mMarks[position]\n    }\n\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "kotlin-coroutines"], "answers": [{"comments": [{"owner": {"reputation": 17901, "user_id": 1024973, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/e9a46874cd35d5753507f10188ec83a8?s=128&d=identicon&r=PG", "display_name": "AndroidDev", "link": "https://stackoverflow.com/users/1024973/androiddev"}, "edited": false, "score": 0, "creation_date": 1562089086, "post_id": 56857436, "comment_id": 100265149, "body": "Thank you! That solved it. Not sure how the code would change with awaitAll(). Would you mind adding that to your answer?"}, {"owner": {"reputation": 17901, "user_id": 1024973, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/e9a46874cd35d5753507f10188ec83a8?s=128&d=identicon&r=PG", "display_name": "AndroidDev", "link": "https://stackoverflow.com/users/1024973/androiddev"}, "edited": false, "score": 0, "creation_date": 1562089427, "post_id": 56857436, "comment_id": 100265299, "body": "Great answer. Thanks very much!"}], "tags": [], "owner": {"reputation": 12970, "user_id": 2741273, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71f8f37ebda905a8fffeb75e91b87a89?s=128&d=identicon&r=PG&f=1", "display_name": "Francesc", "link": "https://stackoverflow.com/users/2741273/francesc"}, "is_accepted": true, "score": 2, "last_activity_date": 1562089281, "last_edit_date": 1562089281, "creation_date": 1562088429, "answer_id": 56857436, "question_id": 56857269, "link": "https://stackoverflow.com/questions/56857269/iterating-coroutines-and-awaiting-results/56857436#56857436", "title": "Iterating Coroutines and awaiting results", "body": "<p>This is not correct:</p>\n\n<pre><code>smallLists[index] = CoroutineScope(Dispatchers.IO).async {\n        fetchList(param)\n    }\n</code></pre>\n\n<p>Your <code>smallLists</code> is empty, so you can't access index <code>index</code>. Change it like this</p>\n\n<pre><code>smallLists.add(CoroutineScope(Dispatchers.IO).async {\n        fetchList(param)\n    }\n)\n</code></pre>\n\n<p>Note that you can call <code>awaitAll()</code> on your list of <code>async</code>s as well, to simplify your code:</p>\n\n<pre><code>private suspend fun fetchData(params: List&lt;Interval&gt;): List&lt;Item&gt; {\n\n    val smallLists = mutableListOf&lt;Deferred&lt;List&lt;Item&gt;&gt;&gt;()\n\n    for (index in 0 until params.size) {\n        val param = params[index]\n        // loop stop iterating after this call is dispatched\n        smallLists.add(CoroutineScope(Dispatchers.IO).async {\n            fetchList(param)\n        }\n    })\n\n    val merged = smallLists.awaitAll()\n    return merged.flatMap { it.toList() }\n}\n</code></pre>\n"}], "owner": {"reputation": 17901, "user_id": 1024973, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/e9a46874cd35d5753507f10188ec83a8?s=128&d=identicon&r=PG", "display_name": "AndroidDev", "link": "https://stackoverflow.com/users/1024973/androiddev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 56857436, "answer_count": 1, "score": 0, "last_activity_date": 1562089281, "creation_date": 1562087598, "question_id": 56857269, "link": "https://stackoverflow.com/questions/56857269/iterating-coroutines-and-awaiting-results", "title": "Iterating Coroutines and awaiting results", "body": "<p>I have a situation where I need to dispatch an indeterminate number of network calls known only at runtime. Each call returns a list. As each is returned, I need to combine these lists in to a single merged list. I am using coroutines to do this.</p>\n\n<p>The problem I am having relates to the fact that I do not know how many network calls the app will need to make. To address this, I am using a loop to iterate over the list of calls at runtime:</p>\n\n<pre><code>private suspend fun fetchData(params: List&lt;Interval&gt;): List&lt;Item&gt; {\n\n    val smallLists = mutableListOf&lt;Deferred&lt;List&lt;Item&gt;&gt;&gt;()\n    val merged = mutableListOf&lt;List&lt;Item&gt;&gt;()\n\n    for (index in 0 until params.size) {\n        val param = params[index]\n        // loop stop iterating after this call is dispatched\n        smallLists[index] = CoroutineScope(Dispatchers.IO).async {\n            fetchList(param)\n        }\n    }\n\n    for (index in 0 until smallLists.size) {\n        merged[index] = smallLists[index].await()\n    }\n\n    return merged.flatMap { it.toList() }\n}\n\nprivate fun fetchList(param: Interval) : List&lt;Item&gt; {\n    return dataSource.fetchData(param)\n}\n</code></pre>\n\n<p>What happens in this code is that it enters the first loop. The <code>params</code> list is correct. It dispatches the first query, and this query returns (I can see this via a Charles proxy). </p>\n\n<p>But this is where everything just dies. The app does nothing with the network response and the loop terminates (i.e. there is no second iteration of the loop).</p>\n\n<p>I know that everything else is intact because I have an alternate version that does not include looping. It just does two queries, awaits their results, and returns the combined list. It works fine, except that it won't handle a dynamic runtime situation:</p>\n\n<pre><code>private suspend fun fetchData(params: List&lt;Interval&gt;): List&lt;Item&gt; {        \n    val list1 = CoroutineScope(Dispatchers.IO).async {\n        fetchList(params[0])\n    }\n\n    val list2 = CoroutineScope(Dispatchers.IO).async {\n        fetchList(params[1])\n    }\n\n    return list1.await() + list2.await()\n}\n</code></pre>\n\n<p>Probably a simple solution here, but I don't see it. Any help is appreciated.</p>\n"}, {"tags": ["generics", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 651, "user_id": 9996859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70a96acd8b90c93283345107873c06d1?s=128&d=identicon&r=PG&f=1", "display_name": "andrewedgar", "link": "https://stackoverflow.com/users/9996859/andrewedgar"}, "edited": false, "score": 0, "creation_date": 1562088792, "post_id": 56857245, "comment_id": 100265019, "body": "Odd. Good enough for now, though. Thank you!"}], "tags": [], "owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "is_accepted": true, "score": 2, "last_activity_date": 1562087505, "creation_date": 1562087505, "answer_id": 56857245, "question_id": 56857010, "link": "https://stackoverflow.com/questions/56857010/type-inference-failed-but-cannot-check-for-instance-of-erased-type/56857245#56857245", "title": "Type Inference failed, but cannot check for instance of erased type", "body": "<p>Awkward situation.</p>\n\n<p>A bit of experimentation found one approach that seems to work: casting the map to a specific type <em>after</em> the <code>is Map&lt;*, *&gt;</code> check:</p>\n\n<pre><code>        when (val data = it.readObject()) {\n            is Map&lt;*, *&gt; -&gt; {\n                val castData = data as Map&lt;Any, Any&gt;\n                if (castData.containsKey(\"iv\") &amp;&amp; data.containsKey(\"salt\") &amp;&amp; castData.containsKey(\"encrypted\")) {\n                    val iv = castData[\"iv\"]\n                    // ...\n</code></pre>\n\n<p>This gives an \u2018Unchecked cast\u2019 warning, but it's not an error (and you can probably suppress it).</p>\n"}], "owner": {"reputation": 651, "user_id": 9996859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70a96acd8b90c93283345107873c06d1?s=128&d=identicon&r=PG&f=1", "display_name": "andrewedgar", "link": "https://stackoverflow.com/users/9996859/andrewedgar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1119, "favorite_count": 0, "accepted_answer_id": 56857245, "answer_count": 1, "score": 1, "last_activity_date": 1562087505, "creation_date": 1562086273, "question_id": 56857010, "link": "https://stackoverflow.com/questions/56857010/type-inference-failed-but-cannot-check-for-instance-of-erased-type", "title": "Type Inference failed, but cannot check for instance of erased type", "body": "<p>I have some logic that runs only when an object read from in FileInputStream is a Map:</p>\n\n<pre><code>  private fun loadEncryptedFile(file: File, password: CharArray) {\n\n\n        var decrypted: ByteArray? = null\n        ObjectInputStream(FileInputStream(file)).use {\n\n            when (val data = it.readObject()) {\n                is Map&lt;*, *&gt; -&gt; {\n\n                    if (data.containsKey(\"iv\") &amp;&amp; data.containsKey(\"salt\") &amp;&amp; data.containsKey(\"encrypted\")) {\n                        val iv = data[\"iv\"]\n                        val salt = data[\"salt\"]\n                        val encrypted = data[\"encrypted\"]\n                        if (iv is ByteArray &amp;&amp; salt is ByteArray &amp;&amp; encrypted is ByteArray) {\n                            decrypted = Encryption().decrypt(\n                                    hashMapOf(\"iv\" to iv, \"salt\" to salt, \"encrypted\" to encrypted), password)\n                        }\n                    }\n                }\n            }\n        }\n}\n</code></pre>\n\n<p>Every instance of the \"data\" variable gives me a \"Type inference failed, the value of parameter K should be mentioned in input types\" error.</p>\n\n<p>However, replacing the wild cards with those types gives me the \"Cannot check for instance of erased types\" error. Where does the compiler want me to tell it what types are contained in the Map?</p>\n"}, {"tags": ["android", "kotlin", "coroutine", "kotlin-coroutines"], "answers": [{"tags": [], "owner": {"reputation": 1655, "user_id": 3659361, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9433ec83ef3295ecff4ba703c441b9f2?s=128&d=identicon&r=PG&f=1", "display_name": "May Rest in Peace", "link": "https://stackoverflow.com/users/3659361/may-rest-in-peace"}, "is_accepted": true, "score": 0, "last_activity_date": 1562086163, "last_edit_date": 1562086163, "creation_date": 1562085702, "answer_id": 56856885, "question_id": 56856366, "link": "https://stackoverflow.com/questions/56856366/what-does-the-m2-stands-for-in-the-new-coroutines-version1-3-0-m2/56856885#56856885", "title": "What does the &quot;M2&quot; stands for in the new coroutines version(1.3.0-M2)?", "body": "<p><strong>M2</strong> means <em>2nd Milestone Reached</em>. It should be the build just before Release Candidate and it should be mostly fine but <strong>some bugs might still persist</strong>.</p>\n\n<p>You can use <code>Version 1.2.2</code> if you want guaranteed stability</p>\n"}], "owner": {"reputation": 105, "user_id": 8713402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9947a52cb3dd02d85b34305c95a0b48?s=128&d=identicon&r=PG&f=1", "display_name": "Yannis Barmpakantze", "link": "https://stackoverflow.com/users/8713402/yannis-barmpakantze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 56856885, "answer_count": 1, "score": 2, "last_activity_date": 1562086163, "creation_date": 1562083603, "last_edit_date": 1562084138, "question_id": 56856366, "link": "https://stackoverflow.com/questions/56856366/what-does-the-m2-stands-for-in-the-new-coroutines-version1-3-0-m2", "title": "What does the &quot;M2&quot; stands for in the new coroutines version(1.3.0-M2)?", "body": "<p>I want to update the coroutines version in my build.gradle file and noticed the latest version of coroutines looks like this (org.jetbrains.kotlinx:kotlinx-coroutines-core:1.3.0-M2). Is it okay to use that as it is or should I use the previous one 1.2.2?</p>\n"}, {"tags": ["android", "kotlin", "bluetooth-lowenergy", "gatt", "bluetooth-gatt"], "answers": [{"comments": [{"owner": {"reputation": 58917, "user_id": 1461050, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/c8IhJ.jpg?s=128&g=1", "display_name": "davidgyoung", "link": "https://stackoverflow.com/users/1461050/davidgyoung"}, "edited": false, "score": 3, "creation_date": 1562279584, "post_id": 56861133, "comment_id": 100335738, "body": "Android BLE APIs are notoriously finicky about threads and sequencing.  I&#39;d recommend <i>always</i> performing one operation at at time, something that is a bit hard to do with async APIs.  I often define a worker thread like this <code>ExecutorService mWorker = Executors.newSingleThreadExecutor();</code> then execute my operations like this: <code>mWorker.submit({ &#47;**gatt code here**&#47; })</code>"}], "tags": [], "owner": {"reputation": 41, "user_id": 11729834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb88a868577da7bfbe71a6aa2c46e30b?s=128&d=identicon&r=PG&f=1", "display_name": "SpringHawk", "link": "https://stackoverflow.com/users/11729834/springhawk"}, "is_accepted": false, "score": 2, "last_activity_date": 1562109844, "creation_date": 1562109844, "answer_id": 56861133, "question_id": 56855046, "link": "https://stackoverflow.com/questions/56855046/android-ble-gatt-server-with-multiple-services-oncharacteristicwriterequest/56861133#56861133", "title": "Android BLE Gatt Server with multiple services - onCharacteristicWriteRequest() no char for handle", "body": "<p>I found what was going wrong. Apparently you cannot just add all services at once like I did. Adding the second service before the first one was confirmed lead to an Exception setting the services to null.</p>\n\n<p>In the end I solved this by adding only one service initially.\nThen in the onServiceAdded() Callback of the BleGattServerCallback() I started one after another. </p>\n"}], "owner": {"reputation": 41, "user_id": 11729834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb88a868577da7bfbe71a6aa2c46e30b?s=128&d=identicon&r=PG&f=1", "display_name": "SpringHawk", "link": "https://stackoverflow.com/users/11729834/springhawk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 998, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1562109844, "creation_date": 1562078933, "question_id": 56855046, "link": "https://stackoverflow.com/questions/56855046/android-ble-gatt-server-with-multiple-services-oncharacteristicwriterequest", "title": "Android BLE Gatt Server with multiple services - onCharacteristicWriteRequest() no char for handle", "body": "<p>I am trying to build a BLE Gatt Server with multiple custom services and multiple characteristics. </p>\n\n<p>To begin with I used the Google Example: <a href=\"https://github.com/androidthings/sample-bluetooth-le-gattserver/tree/master/kotlin\" rel=\"nofollow noreferrer\">https://github.com/androidthings/sample-bluetooth-le-gattserver/tree/master/kotlin</a></p>\n\n<p>This was straight forward and worked very well. I modified the UUIDs to fit mine and I could receive notifications and write to the chars with no problem.</p>\n\n<p>This is where I define the services and chars:</p>\n\n<pre><code>fun createTimeService(): BluetoothGattService {\n        val service = BluetoothGattService(TIME_SERVICE,\n                BluetoothGattService.SERVICE_TYPE_PRIMARY)\n\n        // Current Time characteristic\n        val currentTime = BluetoothGattCharacteristic(CURRENT_TIME,\n                //Read-only characteristic, supports notifications\n                BluetoothGattCharacteristic.PROPERTY_READ or BluetoothGattCharacteristic.PROPERTY_NOTIFY,\n                BluetoothGattCharacteristic.PERMISSION_READ)\n        val configDescriptor = BluetoothGattDescriptor(CLIENT_CONFIG,\n                //Read/write descriptor\n                BluetoothGattDescriptor.PERMISSION_READ or BluetoothGattDescriptor.PERMISSION_WRITE)\n        currentTime.addDescriptor(configDescriptor)\n\n        // Local Time Information characteristic\n        val localTime = BluetoothGattCharacteristic(LOCAL_TIME_INFO,\n                BluetoothGattCharacteristic.PROPERTY_WRITE,\n                BluetoothGattCharacteristic.PERMISSION_WRITE)\n\n        service.addCharacteristic(currentTime)\n        service.addCharacteristic(localTime)\n\n        return service\n    }\n\n    fun createSerialService(): BluetoothGattService {\n        val service = BluetoothGattService(serialPortServiceID,\n                BluetoothGattService.SERVICE_TYPE_PRIMARY)\n\n        val serialData = BluetoothGattCharacteristic(serialDataCharacteristicID,\n        BluetoothGattCharacteristic.PROPERTY_WRITE,\n        BluetoothGattCharacteristic.PERMISSION_WRITE)\n\n        service.addCharacteristic(serialData)\n\n        return service\n    }\n</code></pre>\n\n<p>And here I am applying them to my server:</p>\n\n<pre><code> private fun startServer() {\n        bluetoothGattServer = bluetoothManager.openGattServer(this, gattServerCallback)\n\n        bluetoothGattServer?.addService(TimeProfile.createTimeService())\n                ?: Log.w(TAG, \"Unable to create GATT server\")\n\n        bluetoothGattServer?.addService(TimeProfile.createSerialService())\n                ?: Log.w(TAG, \"Unable to create GATT server\")\n\n        // Initialize the local UI\n        updateLocalUi(System.currentTimeMillis())\n    }\n</code></pre>\n\n<p>I would expect that everything would be working like before after adding the second service. But now if I try to write/subscribe to any of the characteristics (doesn't matter in which service) I just receive this:</p>\n\n<pre><code>W/BluetoothGattServer: onCharacteristicWriteRequest() no char for handle 42\nW/BluetoothGattServer: onDescriptorWriteRequest() no desc for handle 43\n</code></pre>\n"}, {"tags": ["android", "android-studio", "kotlin", "exoplayer2.x"], "comments": [{"owner": {"reputation": 3474, "user_id": 5550161, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/dBIGc.png?s=128&g=1", "display_name": "HB.", "link": "https://stackoverflow.com/users/5550161/hb"}, "edited": false, "score": 0, "creation_date": 1562079304, "post_id": 56854980, "comment_id": 100260437, "body": "Override <code>onBackPressed()</code> and call <code>finish()</code> inside it. Don&#39;t even think you have to call <code>finish()</code>."}, {"owner": {"reputation": 341, "user_id": 8002326, "user_type": "registered", "profile_image": "https://graph.facebook.com/1345259895588235/picture?type=large", "display_name": "Prasanna Kumar", "link": "https://stackoverflow.com/users/8002326/prasanna-kumar"}, "reply_to_user": {"reputation": 3474, "user_id": 5550161, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/dBIGc.png?s=128&g=1", "display_name": "HB.", "link": "https://stackoverflow.com/users/5550161/hb"}, "edited": false, "score": 0, "creation_date": 1562079922, "post_id": 56854980, "comment_id": 100260787, "body": "Tried. Didn&#39;t work. Still the audio is playing. Also forgot to mention that I need the audio to play in the background. So I cannot stop the player onBackPressed()"}, {"owner": {"reputation": 3474, "user_id": 5550161, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/dBIGc.png?s=128&g=1", "display_name": "HB.", "link": "https://stackoverflow.com/users/5550161/hb"}, "edited": false, "score": 0, "creation_date": 1562080311, "post_id": 56854980, "comment_id": 100261028, "body": "If you finish the activity, there should be not reference to exoplayer, unless you are storing exoplayer in memory. Did you try releasing exoplayer?"}, {"owner": {"reputation": 341, "user_id": 8002326, "user_type": "registered", "profile_image": "https://graph.facebook.com/1345259895588235/picture?type=large", "display_name": "Prasanna Kumar", "link": "https://stackoverflow.com/users/8002326/prasanna-kumar"}, "reply_to_user": {"reputation": 3474, "user_id": 5550161, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/dBIGc.png?s=128&g=1", "display_name": "HB.", "link": "https://stackoverflow.com/users/5550161/hb"}, "edited": false, "score": 0, "creation_date": 1562126205, "post_id": 56854980, "comment_id": 100274596, "body": "Yes. But releasing the player doesn&#39;t help me because I want the audio to play in the background too"}, {"owner": {"reputation": 3474, "user_id": 5550161, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/dBIGc.png?s=128&g=1", "display_name": "HB.", "link": "https://stackoverflow.com/users/5550161/hb"}, "edited": false, "score": 1, "creation_date": 1562127546, "post_id": 56854980, "comment_id": 100274865, "body": "So are you runing exoplayer in a service then? You did not mention that in the question. You should check in your Activity&#39;s <code>onCreate</code> if the service is running, if it is you should first stop it and then start it again passing the new file."}, {"owner": {"reputation": 341, "user_id": 8002326, "user_type": "registered", "profile_image": "https://graph.facebook.com/1345259895588235/picture?type=large", "display_name": "Prasanna Kumar", "link": "https://stackoverflow.com/users/8002326/prasanna-kumar"}, "reply_to_user": {"reputation": 3474, "user_id": 5550161, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/dBIGc.png?s=128&g=1", "display_name": "HB.", "link": "https://stackoverflow.com/users/5550161/hb"}, "edited": false, "score": 0, "creation_date": 1562140200, "post_id": 56854980, "comment_id": 100279618, "body": "I am not running exoplayer in a service. Running it as a service will help me solve the issue I guess."}, {"owner": {"reputation": 341, "user_id": 8002326, "user_type": "registered", "profile_image": "https://graph.facebook.com/1345259895588235/picture?type=large", "display_name": "Prasanna Kumar", "link": "https://stackoverflow.com/users/8002326/prasanna-kumar"}, "reply_to_user": {"reputation": 3474, "user_id": 5550161, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/dBIGc.png?s=128&g=1", "display_name": "HB.", "link": "https://stackoverflow.com/users/5550161/hb"}, "edited": false, "score": 0, "creation_date": 1562147108, "post_id": 56854980, "comment_id": 100283366, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/195917/discussion-between-prasanna-kumar-and-hb\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 341, "user_id": 8002326, "user_type": "registered", "profile_image": "https://graph.facebook.com/1345259895588235/picture?type=large", "display_name": "Prasanna Kumar", "link": "https://stackoverflow.com/users/8002326/prasanna-kumar"}, "is_accepted": true, "score": 1, "last_activity_date": 1562824202, "creation_date": 1562824202, "answer_id": 56982374, "question_id": 56854980, "link": "https://stackoverflow.com/questions/56854980/exoplayer-plays-same-audio-over-and-over-on-reopening-the-activity/56982374#56982374", "title": "Exoplayer - Plays same audio over and over on reopening the activity", "body": "<p>I ended up using shared preference to save the service's state. So whenever the service is started, the boolean in shared preference is set to true. So I can start the service only when the boolean is false. Also I am using Broadcast receiver in both activity and service to exchange messages. </p>\n"}], "owner": {"reputation": 341, "user_id": 8002326, "user_type": "registered", "profile_image": "https://graph.facebook.com/1345259895588235/picture?type=large", "display_name": "Prasanna Kumar", "link": "https://stackoverflow.com/users/8002326/prasanna-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 310, "favorite_count": 0, "accepted_answer_id": 56982374, "answer_count": 1, "score": 1, "last_activity_date": 1562824202, "creation_date": 1562078643, "last_edit_date": 1562079695, "question_id": 56854980, "link": "https://stackoverflow.com/questions/56854980/exoplayer-plays-same-audio-over-and-over-on-reopening-the-activity", "title": "Exoplayer - Plays same audio over and over on reopening the activity", "body": "<p>I'm creating an exoplayer instance and adding a stream URL as progressive media source, preparing the player and playing the audio. When I go back to previous activity and open the player activity again, another instance of player is running the same audio (Two instances playing same audio simultaneously). Also I have a mute button. It works as expected when I open the activity for the first time. On reopening the activity, the mute button mutes only the ExoPlayer instance of the current activity</p>\n\n<p>I tried Moving the ExoPlayer code to another class and calling them with public functions, but didn't work</p>\n\n<pre><code>val dataSourceFactory = DefaultDataSourceFactory(this, Util.getUserAgent(this, packageName))\nval newMediaSource = ProgressiveMediaSource.Factory(dataSourceFactory).createMediaSource(Uri.parse(\"STREAM URL\"));\nval exoPlayer = ExoPlayerFactory.newSimpleInstance(this);\nexoPlayer.prepare((newMediaSource));\nexoPlayer.playWhenReady = true;\n\nmuteButton.setOnClickListener {\n    if(muteButton.tag == \"muted\")\n    {\n        exoPlayer.volume = 1f;\n        muteButton.tag = \"unmuted\";\n    }\n    else\n    {\n        exoPlayer.volume = 0f;\n        muteButton.tag = \"muted\";\n    }\n}\n</code></pre>\n\n<p>I want the same ExoPlayer to run on reopening the activity and also mute that particular instance</p>\n"}, {"tags": ["android", "canvas", "kotlin", "path"], "comments": [{"owner": {"reputation": 3474, "user_id": 5550161, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/dBIGc.png?s=128&g=1", "display_name": "HB.", "link": "https://stackoverflow.com/users/5550161/hb"}, "edited": false, "score": 0, "creation_date": 1562079656, "post_id": 56854927, "comment_id": 100260647, "body": "Everything looks fine to me. Is the line drawn? Nm, just saw your last line."}, {"owner": {"reputation": 159, "user_id": 8736759, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AJ7jHMwg-LI/AAAAAAAAAAI/AAAAAAAAHAY/vtKhss-wW40/photo.jpg?sz=128", "display_name": "MicroRJ", "link": "https://stackoverflow.com/users/8736759/microrj"}, "reply_to_user": {"reputation": 3474, "user_id": 5550161, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/dBIGc.png?s=128&g=1", "display_name": "HB.", "link": "https://stackoverflow.com/users/5550161/hb"}, "edited": false, "score": 0, "creation_date": 1562082728, "post_id": 56854927, "comment_id": 100262441, "body": "I can send you the whole class so that you can test it. I don&#39;t know why is not working tbh."}], "owner": {"reputation": 159, "user_id": 8736759, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AJ7jHMwg-LI/AAAAAAAAAAI/AAAAAAAAHAY/vtKhss-wW40/photo.jpg?sz=128", "display_name": "MicroRJ", "link": "https://stackoverflow.com/users/8736759/microrj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 174, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562078475, "creation_date": 1562078475, "question_id": 56854927, "link": "https://stackoverflow.com/questions/56854927/android-path-not-closing-i-cant-fill-with-color", "title": "Android Path Not Closing, I can&#39;t fill with color", "body": "<p>I have a custom squircle android view. I am drawing a Path but and I cannot fill the path with color.\nStackOverflow is asking me to provide more detail, but I don't think I can explain this better. All I need is to fill the path with code. If you need to see the whole class let me know. </p>\n\n<pre><code>init {\n    val typedValue = TypedValue()\n    val theme = context!!.theme\n    theme.resolveAttribute(R.attr.colorAccentTheme, typedValue, true)\n    paint.color = typedValue.data\n    paint.strokeWidth = 6f\n    paint.style = Paint.Style.FILL_AND_STROKE\n    paint.isAntiAlias = true\n    shapePadding = 10f\n}\n\nopen fun onLayoutInit() {\n    val hW = (this.measuredW / 2) - shapePadding\n    val hH = (this.measuredH / 2) - shapePadding\n\n    /*\n    Returns a series of Vectors along the path \n    of the squircle\n     */\n    points = Array(360) { i -&gt;\n        val angle = toRadians(i.toDouble())\n        val x = pow(abs(cos(angle)), corners) * hW * sgn(cos(angle))\n        val y = pow(abs(sin(angle)), corners) * hH * sgn(sin(angle))\n        Pair(x.toFloat(), y.toFloat())\n    }\n    /*\n    Match the path to the points\n     */\n    for (i in 0..points.size - 2) {\n        val p1 = points[i]\n        val p2 = points[i + 1]\n        path.moveTo(p1.first, p1.second)\n        path.lineTo(p2.first, p2.second)\n    }\n\n    /*\n    Finish closing the path's points\n     */\n    val fst = points[0]\n    val lst = points[points.size - 1]\n\n    path.moveTo(lst.first, lst.second)\n    path.lineTo(fst.first, fst.second)\n\n    path.fillType = Path.FillType.EVEN_ODD\n\n    path.close()\n\n    postInvalidate()\n}\noverride fun onDraw(canvas: Canvas?) {\n\n    canvas?.save()\n    canvas?.translate(measuredW / 2, measuredH / 2)\n    canvas?.drawPath(path, paint)\n    canvas?.restore()\n\n    super.onDraw(canvas)\n\n}\n</code></pre>\n\n<p>}</p>\n\n<p>The path stroke works fine, but I can't fill it with color.</p>\n"}, {"tags": ["android", "kotlin", "unicode", "android-button", "emoji"], "comments": [{"owner": {"reputation": 483, "user_id": 2132115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f8d32b5dc86ec7a2b9f068b4613f10b?s=128&d=identicon&r=PG", "display_name": "cesarmarch", "link": "https://stackoverflow.com/users/2132115/cesarmarch"}, "edited": false, "score": 0, "creation_date": 1562079046, "post_id": 56854278, "comment_id": 100260280, "body": "Rendering of emoji depends on the phone.You should look at emoji compat library here : <a href=\"https://developer.android.com/guide/topics/ui/look-and-feel/emoji-compat\" rel=\"nofollow noreferrer\">developer.android.com/guide/topics/ui/look-and-feel/&hellip;</a> It can be helpful for you. If it doesn&#39;t work as you want, you should use a drawable."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 11730184, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/3ffa7d5e4624d35aba659a904a7bc72b?s=128&d=identicon&r=PG", "display_name": "Alois Letter", "link": "https://stackoverflow.com/users/11730184/alois-letter"}, "is_accepted": false, "score": 1, "last_activity_date": 1562082447, "creation_date": 1562082447, "answer_id": 56856060, "question_id": 56854278, "link": "https://stackoverflow.com/questions/56854278/emoji-not-dynamically-appearing-correctly-in-button/56856060#56856060", "title": "Emoji not dynamically appearing correctly in button", "body": "<p>Try to use the fully-qualified form of the emoji (emoji style instead of text style) by appending: <code>U+FE0F VARIATION SELECTOR-16</code></p>\n\n<pre><code>mButton.text = \"\\u2642\\uFE0F Hello World\"\n</code></pre>\n\n<p><a href=\"https://unicode.org/Public/emoji/12.0/emoji-test.txt\" rel=\"nofollow noreferrer\">emoji-test.txt</a></p>\n\n<pre><code># subgroup: gender\n2640 FE0F                                  ; fully-qualified     # \u2640\ufe0f female sign\n2640                                       ; unqualified         # \u2640 female sign\n2642 FE0F                                  ; fully-qualified     # \u2642\ufe0f male sign\n2642                                       ; unqualified         # \u2642 male sign\n</code></pre>\n\n<p><a href=\"https://unicode.org/Public/emoji/12.0/emoji-variation-sequences.txt\" rel=\"nofollow noreferrer\">emoji-variation-sequences.txt</a></p>\n\n<pre><code>2640 FE0E  ; text style;  # (1.1) FEMALE SIGN\n2640 FE0F  ; emoji style; # (1.1) FEMALE SIGN\n2642 FE0E  ; text style;  # (1.1) MALE SIGN\n2642 FE0F  ; emoji style; # (1.1) MALE SIGN\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 11471642, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7qmHE.jpg?s=128&g=1", "display_name": "satyakiran vakada", "link": "https://stackoverflow.com/users/11471642/satyakiran-vakada"}, "is_accepted": false, "score": 0, "last_activity_date": 1564494851, "creation_date": 1564494851, "answer_id": 57273411, "question_id": 56854278, "link": "https://stackoverflow.com/questions/56854278/emoji-not-dynamically-appearing-correctly-in-button/57273411#57273411", "title": "Emoji not dynamically appearing correctly in button", "body": "<p>you can set style of button view ,\nlike changing gravity of view,</p>\n\n<pre><code>android:gravity=\"center\"\n</code></pre>\n\n<p>or \n    android:layout_gravity=\"center\"\nThis can set view as aspect\nHope this will help you!!</p>\n"}], "owner": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1564494851, "creation_date": 1562076206, "last_edit_date": 1562090817, "question_id": 56854278, "link": "https://stackoverflow.com/questions/56854278/emoji-not-dynamically-appearing-correctly-in-button", "title": "Emoji not dynamically appearing correctly in button", "body": "<p>I'm trying to add an emoji character next to the text in my <code>Button</code>, but for some reason it only appears in plain white and does not appear as the official Android emoji character. Does anyone know what has gone wrong and how to fix this problem?</p>\n\n<p>NB: I do not want to use any Drawables.</p>\n\n<p><strong>Expected appearance</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/rtugl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rtugl.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Current appearance</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/c3X1U.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/c3X1U.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>XML layout</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout\n        xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        xmlns:tools=\"http://schemas.android.com/tools\"\n        xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        tools:context=\".MainActivity\"&gt;\n\n    &lt;Button\n            android:text=\"Button\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:id=\"@+id/button\" \n            app:layout_constraintStart_toStartOf=\"parent\"\n            app:layout_constraintEnd_toEndOf=\"parent\"\n            app:layout_constraintTop_toTopOf=\"parent\"\n            app:layout_constraintBottom_toBottomOf=\"parent\"/&gt;\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n\n<p><strong>Class</strong></p>\n\n<pre><code>import android.os.Bundle\nimport android.widget.Button\nimport androidx.appcompat.app.AppCompatActivity\n\nclass MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        my_button.text = \"\\u2642 Hello World\"\n    }\n}\n</code></pre>\n"}, {"tags": ["gradle", "kotlin", "junit", "corda"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11325429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/064133560cc0f516b2e0323d8a614048?s=128&d=identicon&r=PG&f=1", "display_name": "AndreiD", "link": "https://stackoverflow.com/users/11325429/andreid"}, "edited": false, "score": 0, "creation_date": 1564047112, "post_id": 56968136, "comment_id": 100905642, "body": "*Gradle Unit Test"}], "tags": [], "owner": {"reputation": 1, "user_id": 11325429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/064133560cc0f516b2e0323d8a614048?s=128&d=identicon&r=PG&f=1", "display_name": "AndreiD", "link": "https://stackoverflow.com/users/11325429/andreid"}, "is_accepted": true, "score": 0, "last_activity_date": 1562752517, "creation_date": 1562752517, "answer_id": 56968136, "question_id": 56853334, "link": "https://stackoverflow.com/questions/56853334/java-lang-illegalargumentexception-corda-tranning-repository-with-kotlin/56968136#56968136", "title": "java.lang.IllegalArgumentException Corda-tranning Repository with Kotlin", "body": "<p>Error has been fixed. I have used kotlin unit test.<a href=\"https://i.stack.imgur.com/q4DUW.png\" rel=\"nofollow noreferrer\">Kotlin Unit Test</a></p>\n"}], "owner": {"reputation": 1, "user_id": 11325429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/064133560cc0f516b2e0323d8a614048?s=128&d=identicon&r=PG&f=1", "display_name": "AndreiD", "link": "https://stackoverflow.com/users/11325429/andreid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "accepted_answer_id": 56968136, "answer_count": 1, "score": 0, "last_activity_date": 1562752517, "creation_date": 1562073246, "question_id": 56853334, "link": "https://stackoverflow.com/questions/56853334/java-lang-illegalargumentexception-corda-tranning-repository-with-kotlin", "title": "java.lang.IllegalArgumentException Corda-tranning Repository with Kotlin", "body": "<p>I try to write a Contract in Kotlin Corda-tranning Repository with TDD. All IOUIssueTests was Failed.</p>\n\n<p>I have jdk 1.8.0_211. Gradle 5.5. And installed kotlin plugin. IOUStates were also implemented. </p>\n\n<p>This is my IOUContract for 5 IOUIssueTest:</p>\n\n<pre><code> package net.corda.training.contract\n\n    import net.corda.core.contracts.*\n    import net.corda.core.transactions.LedgerTransaction\n    import net.corda.training.state.IOUState\n    /**\n     * This is where you'll add the contract code which defines how the [IOUState] behaves. Look at the unit tests in\n     * [IOUContractTests] for instructions on how to complete the [IOUContract] class.\n     */\n    @LegalProseReference(uri = \"&lt;prose_contract_uri&gt;\")\n    class IOUContract : Contract {\n        companion object {\n            @JvmStatic\n            val IOU_CONTRACT_ID = \"net.corda.training.contract.IOUContract\"\n\n        }\n\n\n        /**\n         * Add any commands required for this contract as classes within this interface.\n         * It is useful to encapsulate your commands inside an interface, so you can use the [requireSingleCommand]\n         * function to check for a number of commands which implement this interface.\n         */\n       interface Commands : CommandData {\n\n            class Issue : TypeOnlyCommandData(), Commands\n        }\n\n        /**\n         * The contract code for the [IOUContract].\n         * The constraints are self documenting so don't require any additional explanation.\n         */\n        override fun verify(tx: LedgerTransaction) {\n            val command = tx.commands.requireSingleCommand&lt;Commands&gt;()\n\n            when (command.value) {\n\n                is Commands.Issue -&gt; {\n                    requireThat {\n                        \"No inputs should be consumed when issuing an IOU.\" using (tx.inputs.isEmpty())\n                        \"Only one output state should be created when issuing an IOU.\" using (tx.outputs.size == 1)\n                        val iou = tx.outputStates.single() as IOUState\n                        \"A newly issued IOU must have a positive amount.\" using (iou.amount.quantity &gt; 0)\n                        \"The lender and borrower cannot have the same identity.\" using (iou.lender !== iou.borrower)\n                        \"Both lender and borrower together only may sign IOU issue transaction.\" using(iou.participants.toSet() == iou.participants.map { it.owningKey}.toSet())\n\n                    }\n                }\n\n            }\n\n        }\n    }\n</code></pre>\n\n<p>However, when I run IOUIsuueTest.kt I get the following error:</p>\n\n<pre><code>java.lang.IllegalArgumentException: Attempted to find dependent attachment for class net/corda/core/contracts/TypeOnlyCommandData, but could not find a suitable candidate.\n\n    at net.corda.core.transactions.TransactionBuilder.addMissingDependency(TransactionBuilder.kt:179)\n    at net.corda.core.transactions.TransactionBuilder.toWireTransactionWithContext$core(TransactionBuilder.kt:160)\n    at net.corda.core.transactions.TransactionBuilder.toWireTransactionWithContext$core$default(TransactionBuilder.kt:128)\n    at net.corda.core.transactions.TransactionBuilder.toWireTransaction(TransactionBuilder.kt:125)\n    at net.corda.testing.dsl.TestTransactionDSLInterpreter.toWireTransaction$test_utils(TestDSL.kt:95)\n    at net.corda.testing.dsl.TestLedgerDSLInterpreter.recordTransactionWithTransactionMap(TestDSL.kt:257)\n    at net.corda.testing.dsl.TestLedgerDSLInterpreter._transaction(TestDSL.kt:289)\n    at net.corda.testing.dsl.LedgerDSL._transaction(LedgerDSLInterpreter.kt)\n    at net.corda.testing.dsl.LedgerDSL.transaction(LedgerDSLInterpreter.kt:141)\n    at net.corda.testing.dsl.LedgerDSL.transaction$default(LedgerDSLInterpreter.kt:139)\n    at net.corda.training.contract.IOUIssueTests$mustIncludeIssueCommand$1.invoke(IOUIssueTests.kt:57)\n    at net.corda.training.contract.IOUIssueTests$mustIncludeIssueCommand$1.invoke(IOUIssueTests.kt:21)\n    at net.corda.testing.node.NodeTestUtils$ledger$2.invoke(NodeTestUtils.kt:39)\n    at net.corda.testing.node.NodeTestUtils$ledger$2.invoke(NodeTestUtils.kt)\n    at net.corda.testing.internal.InternalTestUtilsKt$withTestSerializationEnvIfNotSet$1.invoke(InternalTestUtils.kt:214)\n    at net.corda.testing.internal.InternalTestUtilsKt$withTestSerializationEnvIfNotSet$1.invoke(InternalTestUtils.kt)\n    at net.corda.testing.common.internal.CommonSerializationTestHelpersKt.asContextEnv(CommonSerializationTestHelpers.kt:11)\n    at net.corda.testing.internal.InternalSerializationTestHelpersKt.asTestContextEnv(InternalSerializationTestHelpers.kt:33)\n    at net.corda.testing.internal.InternalSerializationTestHelpersKt.asTestContextEnv$default(InternalSerializationTestHelpers.kt:31)\n    at net.corda.testing.internal.InternalTestUtilsKt.withTestSerializationEnvIfNotSet(InternalTestUtils.kt:214)\n    at net.corda.testing.node.NodeTestUtils.ledger(NodeTestUtils.kt:36)\n    at net.corda.testing.node.NodeTestUtils.ledger$default(NodeTestUtils.kt:23)\n    at net.corda.training.contract.IOUIssueTests.mustIncludeIssueCommand(IOUIssueTests.kt:56)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\n    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\n    at org.junit.runner.JUnitCore.run(JUnitCore.java:137)\n    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)\n    at com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)\n    at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)\n    at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at com.intellij.rt.execution.CommandLineWrapper.main(CommandLineWrapper.\n</code></pre>\n\n<p>java:66)</p>\n"}, {"tags": ["android", "google-maps", "kotlin", "google-places-api", "googleplacesautocomplete"], "answers": [{"comments": [{"owner": {"reputation": 654, "user_id": 8206300, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ElkGS.jpg?s=128&g=1", "display_name": "Lukas Bimba", "link": "https://stackoverflow.com/users/8206300/lukas-bimba"}, "edited": false, "score": 0, "creation_date": 1567213926, "post_id": 56967849, "comment_id": 101908817, "body": "Also, would be nice to mention.... IT COSTS MONEY with a number of requests... I&#39;m coming from iOS and we can pull that info like the business website for FREE. Im venting lol"}], "tags": [], "owner": {"reputation": 71, "user_id": 8805781, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ifFUS.png?s=128&g=1", "display_name": "devangela", "link": "https://stackoverflow.com/users/8805781/devangela"}, "is_accepted": true, "score": 1, "last_activity_date": 1562751653, "creation_date": 1562751653, "answer_id": 56967849, "question_id": 56852855, "link": "https://stackoverflow.com/questions/56852855/how-to-implement-google-places-autocomplete-search-box-without-places-sdk-for-an/56967849#56967849", "title": "how to implement google places autocomplete search box without places SDK for android?", "body": "<p>Only the <a href=\"https://developers.google.com/places/android-sdk/placepicker\" rel=\"nofollow noreferrer\">Place Picker widget is deprecated</a>, not Autocomplete. You can use <a href=\"https://developers.google.com/places/android-sdk/autocomplete\" rel=\"nofollow noreferrer\">Place Autocomplete</a>, either as a widget which gives you a pre-built search bar or programmatically to build a custom search UI. For the best user experience, define how you want to <a href=\"https://developers.google.com/places/android-sdk/autocomplete#constrain_autocomplete_results\" rel=\"nofollow noreferrer\">constrain results</a> based location and/or types of places depending on your use case.</p>\n\n<p>Sample code for a <a href=\"https://github.com/googlemaps/android-places-demos\" rel=\"nofollow noreferrer\">full Autocomplete implementation</a> is on Github, but only in Java for now.</p>\n"}, {"tags": [], "owner": {"reputation": 12622, "user_id": 437146, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YBwyN.jpg?s=128&g=1", "display_name": "NightFury", "link": "https://stackoverflow.com/users/437146/nightfury"}, "is_accepted": false, "score": 0, "last_activity_date": 1573594813, "creation_date": 1573594813, "answer_id": 58827111, "question_id": 56852855, "link": "https://stackoverflow.com/questions/56852855/how-to-implement-google-places-autocomplete-search-box-without-places-sdk-for-an/58827111#58827111", "title": "how to implement google places autocomplete search box without places SDK for android?", "body": "<p>As an alternate to autocomplete feature by Google, one can opt for <a href=\"https://developers.google.com/places/web-service/search#TextSearchRequests\" rel=\"nofollow noreferrer\">Places Search</a> API that requests to search for basic fields against basic text. That will cost much less as compared to autocomplete feature. Basic fields include <strong>formatted_address, geometry, icon,name, permanently_closed, photos, place_id,plus_code, types</strong> that would be more than enough for someone's case.</p>\n\n<p>You can compare cost <a href=\"https://cloud.google.com/maps-platform/pricing/sheet/?_ga=2.51463913.1729746263.1573503448-1185645895.1499553755\" rel=\"nofollow noreferrer\">here</a>. </p>\n\n<p>So you can use some debounce and mechanisms to build your own search UI.</p>\n"}], "owner": {"reputation": 137, "user_id": 4488843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/323b7e570077472e66dfe7db48c047d6?s=128&d=identicon&r=PG&f=1", "display_name": "toddash", "link": "https://stackoverflow.com/users/4488843/toddash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1830, "favorite_count": 0, "accepted_answer_id": 56967849, "answer_count": 2, "score": -1, "last_activity_date": 1573594813, "creation_date": 1562071648, "question_id": 56852855, "link": "https://stackoverflow.com/questions/56852855/how-to-implement-google-places-autocomplete-search-box-without-places-sdk-for-an", "title": "how to implement google places autocomplete search box without places SDK for android?", "body": "<p>I'm developing an android application that uses Uber like google maps place picker using kotlin. I've achieved all the required functionality but I couldn't able to find an updated tutorial on implementing place search autocomplete EditTextView. </p>\n\n<p>I wanted to use google Places SDK for android to implement the earch feature, it seems the feature is depreciated and be turned off on July, 2019(as mentioned here: <a href=\"https://developers.google.com/places/android-sdk/intro\" rel=\"nofollow noreferrer\">Places SDK for android</a>).</p>\n\n<p>It would be great if someone could help me create an EditText in android app when user types places it suggests places according to the search term.</p>\n"}, {"tags": ["unit-testing", "kotlin", "kotlin-coroutines"], "comments": [{"owner": {"reputation": 2081, "user_id": 3294175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99d6b46af0ce01b3934979d8d7631b43?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Martori", "link": "https://stackoverflow.com/users/3294175/eric-martori"}, "edited": false, "score": 0, "creation_date": 1562748757, "post_id": 56851215, "comment_id": 100470748, "body": "It is hard to undestand the problem with the code as presented. Could you separate your testing code from your production code? Your test method should call your production code and not have it inlined. This way it would be easier to reason about your problem"}, {"owner": {"reputation": 1779, "user_id": 3795043, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0QTMP.jpg?s=128&g=1", "display_name": "findusl", "link": "https://stackoverflow.com/users/3795043/findusl"}, "reply_to_user": {"reputation": 2081, "user_id": 3294175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99d6b46af0ce01b3934979d8d7631b43?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Martori", "link": "https://stackoverflow.com/users/3294175/eric-martori"}, "edited": false, "score": 0, "creation_date": 1562760751, "post_id": 56851215, "comment_id": 100477415, "body": "@EricMartori Is it now more understandable?"}, {"owner": {"reputation": 2081, "user_id": 3294175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99d6b46af0ce01b3934979d8d7631b43?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Martori", "link": "https://stackoverflow.com/users/3294175/eric-martori"}, "edited": false, "score": 0, "creation_date": 1562771964, "post_id": 56851215, "comment_id": 100483918, "body": "It is better now."}], "answers": [{"comments": [{"owner": {"reputation": 1779, "user_id": 3795043, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0QTMP.jpg?s=128&g=1", "display_name": "findusl", "link": "https://stackoverflow.com/users/3795043/findusl"}, "edited": false, "score": 0, "creation_date": 1562067018, "post_id": 56851423, "comment_id": 100252975, "body": "Sorry that this is not clear, the launch call is not in the test methods but in the production code. Otherwise I wouldn&#39;t need a test rule to replace the Dispatchers. The code above is simply a minimal reproducible code bit."}], "tags": [], "owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "is_accepted": false, "score": -1, "last_activity_date": 1562066830, "creation_date": 1562066830, "answer_id": 56851423, "question_id": 56851215, "link": "https://stackoverflow.com/questions/56851215/how-to-wait-for-suspendcoroutine-in-unit-test/56851423#56851423", "title": "How to wait for suspendCoroutine in unit test?", "body": "<p>This is exactly what <code>runBlocking</code> was created to do. Simply replace the <code>GlobalScope.launch</code> call:</p>\n\n<pre><code>result = runBlocking {\n    suspendCoroutine { continuation -&gt;\n        Thread {\n            sleep(1000)\n            //long running operation calls listener from background thread\n            continuation.resume(true)\n        }.start()\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1779, "user_id": 3795043, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0QTMP.jpg?s=128&g=1", "display_name": "findusl", "link": "https://stackoverflow.com/users/3795043/findusl"}, "edited": false, "score": 0, "creation_date": 1562757995, "post_id": 56956486, "comment_id": 100475919, "body": "this does sound like a reasonable idea. If I could await the work done in my viewModelScope, it would probably work. Do you have any idea how I would do that?"}, {"owner": {"reputation": 1779, "user_id": 3795043, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0QTMP.jpg?s=128&g=1", "display_name": "findusl", "link": "https://stackoverflow.com/users/3795043/findusl"}, "edited": false, "score": 0, "creation_date": 1562773304, "post_id": 56956486, "comment_id": 100484692, "body": "ah so you want to await the job that is started. That is sadly not possible. In my case I trigger the event via a LiveData that is observed, so I can&#39;t get any return values."}, {"owner": {"reputation": 1779, "user_id": 3795043, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0QTMP.jpg?s=128&g=1", "display_name": "findusl", "link": "https://stackoverflow.com/users/3795043/findusl"}, "edited": false, "score": 0, "creation_date": 1563187967, "post_id": 56956486, "comment_id": 100604317, "body": "I have found a solution to get the job to join it. See my answer to this question."}], "tags": [], "owner": {"reputation": 1578, "user_id": 357437, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f91a7ac411059abb04af17795009fad9?s=128&d=identicon&r=PG", "display_name": "sedovav", "link": "https://stackoverflow.com/users/357437/sedovav"}, "is_accepted": false, "score": 2, "last_activity_date": 1562768207, "last_edit_date": 1562768207, "creation_date": 1562687835, "answer_id": 56956486, "question_id": 56851215, "link": "https://stackoverflow.com/questions/56851215/how-to-wait-for-suspendcoroutine-in-unit-test/56956486#56956486", "title": "How to wait for suspendCoroutine in unit test?", "body": "<p>As I understood, you want everything in your production code to run in the main thread of your test. But it doesn't seem to be achievable as something may be run in a regular thread pool/background, and if have no means to synchronize/join the background process in your code you probably in trouble. The best thing is to join background threads somehow in a coroutine and <code>await</code> that coroutine in the test before the assertions. It may require you to change your existing production code.</p>\n\n<p>I'm talking about a different approach to write your code. Surely, it's not always possible. I've updated your example accordingly to illustrate my point:</p>\n\n<pre><code>class TestClassTest {\n    var testInstance = TestClass()\n\n    @Test\n    fun `Test with default dispatchers should fail`() = runBlocking {\n        val valueToModify = testInstance.runAsync().await()\n        assertTrue(valueToModify)\n    }\n\n    @Test\n    fun `Test with dispatchers replaced by Unconfined should pass`() = runBlocking {\n        testInstance.DefaultDispatcher = Dispatchers.Unconfined\n        testInstance.IODispatcher = Dispatchers.Unconfined\n        val valueToModify = testInstance.runAsync().await()\n        assertTrue(valueToModify)\n    }\n\n    @Test\n    fun `I need to also test some functions that use suspend coroutine - How can I do that?`() = runBlocking {\n        testInstance.DefaultDispatcher = Dispatchers.Unconfined\n        testInstance.IODispatcher = Dispatchers.Unconfined\n        val valueToModify = testInstance.runSuspendCoroutine().await()\n        assertTrue(valueToModify)//fails\n    }\n}\n\nclass TestClass {\n    var DefaultDispatcher: CoroutineContext = Dispatchers.Default\n    var IODispatcher: CoroutineContext = Dispatchers.IO\n    val viewModelScope = CoroutineScope(DefaultDispatcher)\n\n    fun runAsync(): Deferred&lt;Boolean&gt; {\n        return viewModelScope.async(DefaultDispatcher) {\n            withContext(IODispatcher) {\n                sleep(1000)\n                true\n            }\n        }\n    }\n\n    fun runSuspendCoroutine(): Deferred&lt;Boolean&gt; {\n        return viewModelScope.async(DefaultDispatcher) {\n            suspendCoroutine&lt;Boolean&gt; {\n                Thread {\n                    sleep(1000)\n                    //long running operation calls listener from background thread\n                    it.resume(true)\n                }.start()\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1779, "user_id": 3795043, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0QTMP.jpg?s=128&g=1", "display_name": "findusl", "link": "https://stackoverflow.com/users/3795043/findusl"}, "edited": false, "score": 0, "creation_date": 1562762812, "post_id": 56958896, "comment_id": 100478554, "body": "This does work. However it will be a lot of effort to make sure that every CoroutineScope is based on a runBlocking context. I can&#39;t even make this a junit rule then, because the test needs to run inside the runBlocking, so it needs to be done in every test that calls such code... Also I wouldn&#39;t be able to use the viewModelScope provided by androidx.lifecycle.  But this is the best answer so far, so unless something better comes, I will award it the bounty."}, {"owner": {"reputation": 6499, "user_id": 1554633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cdb2108d3fd119d4d380e9e4a2b5611?s=128&d=identicon&r=PG", "display_name": "Andrei Tanana", "link": "https://stackoverflow.com/users/1554633/andrei-tanana"}, "reply_to_user": {"reputation": 1779, "user_id": 3795043, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0QTMP.jpg?s=128&g=1", "display_name": "findusl", "link": "https://stackoverflow.com/users/3795043/findusl"}, "edited": false, "score": 0, "creation_date": 1562766787, "post_id": 56958896, "comment_id": 100480788, "body": "ah, you are using viewModelScope? There is a simple way. I&#39;ll update my answer"}, {"owner": {"reputation": 1779, "user_id": 3795043, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0QTMP.jpg?s=128&g=1", "display_name": "findusl", "link": "https://stackoverflow.com/users/3795043/findusl"}, "edited": false, "score": 0, "creation_date": 1562773634, "post_id": 56958896, "comment_id": 100484883, "body": "On first look the TestCoroutineDispatcher seems to have the same effect as Dispatchers.Unconfined. But I will need to make a more extensive test tomorrow to make sure this isn&#39;t because of my test setup."}, {"owner": {"reputation": 6499, "user_id": 1554633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cdb2108d3fd119d4d380e9e4a2b5611?s=128&d=identicon&r=PG", "display_name": "Andrei Tanana", "link": "https://stackoverflow.com/users/1554633/andrei-tanana"}, "reply_to_user": {"reputation": 1779, "user_id": 3795043, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0QTMP.jpg?s=128&g=1", "display_name": "findusl", "link": "https://stackoverflow.com/users/3795043/findusl"}, "edited": false, "score": 0, "creation_date": 1562782170, "post_id": 56958896, "comment_id": 100488927, "body": "I&#39;ve read your new question explanation. Yes, you&#39;re right. The test rule won&#39;t work"}], "tags": [], "owner": {"reputation": 6499, "user_id": 1554633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cdb2108d3fd119d4d380e9e4a2b5611?s=128&d=identicon&r=PG", "display_name": "Andrei Tanana", "link": "https://stackoverflow.com/users/1554633/andrei-tanana"}, "is_accepted": false, "score": 6, "last_activity_date": 1562767137, "last_edit_date": 1562767137, "creation_date": 1562697914, "answer_id": 56958896, "question_id": 56851215, "link": "https://stackoverflow.com/questions/56851215/how-to-wait-for-suspendcoroutine-in-unit-test/56958896#56958896", "title": "How to wait for suspendCoroutine in unit test?", "body": "<p>How about passing the coroutine context to your model? Something like</p>\n\n<pre><code>class Model(parentContext: CoroutineContext = Dispatchers.Default) {\n    private val modelScope = CoroutineScope(parentContext)\n    var result = false\n\n    fun doWork() {\n        modelScope.launch {\n            Thread.sleep(3000)\n            result = true\n        }\n    }\n}\n\n@Test\nfun test() {\n    val model = runBlocking {\n        val model = Model(coroutineContext)\n        model.doWork()\n        model\n    }\n    println(model.result)\n}\n</code></pre>\n\n<p><strong>Update</strong>\nfor viewModelScope from androidx.lifecycle you can just use this test rule</p>\n\n<pre><code>@ExperimentalCoroutinesApi\nclass CoroutinesTestRule : TestWatcher() {\n    private val dispatcher: TestCoroutineDispatcher = TestCoroutineDispatcher()\n\n    override fun starting(description: Description?) {\n        super.starting(description)\n        Dispatchers.setMain(dispatcher)\n    }\n\n    override fun finished(description: Description?) {\n        super.finished(description)\n        Dispatchers.resetMain()\n        dispatcher.cleanupTestCoroutines()\n    }\n}\n</code></pre>\n\n<p>here are the test model and the test</p>\n\n<pre><code>class MainViewModel : ViewModel() {\n    var result = false\n\n    fun doWork() {\n        viewModelScope.launch {\n            Thread.sleep(3000)\n            result = true\n        }\n    }\n}\n\nclass MainViewModelTest {\n    @ExperimentalCoroutinesApi\n    @get:Rule\n    var coroutinesRule = CoroutinesTestRule()\n\n    private val model = MainViewModel()\n\n    @Test\n    fun `check result`() {\n        model.doWork()\n        assertTrue(model.result)\n    }\n}\n</code></pre>\n\n<p>don't forget to add <code>testImplementation \"org.jetbrains.kotlinx:kotlinx-coroutines-test:$coroutines_version\"</code> to get <code>TestCoroutineDispatcher</code></p>\n"}, {"tags": [], "owner": {"reputation": 1779, "user_id": 3795043, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0QTMP.jpg?s=128&g=1", "display_name": "findusl", "link": "https://stackoverflow.com/users/3795043/findusl"}, "is_accepted": true, "score": 3, "last_activity_date": 1613466401, "last_edit_date": 1613466401, "creation_date": 1563187899, "answer_id": 57038193, "question_id": 56851215, "link": "https://stackoverflow.com/questions/56851215/how-to-wait-for-suspendcoroutine-in-unit-test/57038193#57038193", "title": "How to wait for suspendCoroutine in unit test?", "body": "<p>With the helps of other answers, I have found the following solution. As sedovav suggested in his answer, I can run the task async and wait for the Deferred. Basically the same idea, I can run the task with launch and wait for the job that handles the task. The problem in both cases is, how do I get the Deferred or Job.</p>\n<p>I found a solution to this. Such a Job is always a child of the Job contained in the CoroutineContext which is part of the CoroutineScope. So the following code does solve the problem, both in my example code as well as in the actual android application.</p>\n<pre><code>@Test\nfun `I need to also test some functions that use suspend coroutine - How can I do that?`() {\n    replaceDispatchers()\n    testInstance.runSuspendCoroutine()\n    runBlocking {\n        (testInstance.viewModelScope.coroutineContext[Job]?.children?.forEach { it.join() }\n    }\n    assertTrue(testInstance.valueToModify)//fails\n}\n</code></pre>\n<p>It does seem a bit like a hack, so if someone has a reason why this is dangerous, please tell. Also it won't work if there is another underlying CoroutineScope created by some other class. But it is the best solution I have.</p>\n"}], "owner": {"reputation": 1779, "user_id": 3795043, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0QTMP.jpg?s=128&g=1", "display_name": "findusl", "link": "https://stackoverflow.com/users/3795043/findusl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6043, "favorite_count": 0, "accepted_answer_id": 57038193, "answer_count": 4, "score": 6, "last_activity_date": 1613466401, "creation_date": 1562066056, "last_edit_date": 1562763037, "question_id": 56851215, "link": "https://stackoverflow.com/questions/56851215/how-to-wait-for-suspendcoroutine-in-unit-test", "title": "How to wait for suspendCoroutine in unit test?", "body": "<p>I want to write tests for my android application. Sometimes the viewModel executes tasks in the background using Kotlins coroutine launch function. These tasks are executed in the viewModelScope that the androidx.lifecycle library so handily provides. In order to still test these functions, I replaced the default android Dispatchers with Dispatchers.Unconfined, which runs the code synchronously. </p>\n\n<p>At least in most of the cases. When using suspendCoroutine, the Dispatchers.Unconfined will not be suspended and later resumed, but instead will simply return. The documentation of <code>Dispatchers.Unconfined</code> reveals why:</p>\n\n<blockquote>\n  <p>[Dispatchers.Unconfined] lets the coroutine resume in whatever thread that is used by the corresponding suspending function.</p>\n</blockquote>\n\n<p>So by my understanding, the coroutine is not actually suspended, but the rest of the async function after <code>suspendCoroutine</code> is run on the thread that calls <code>continuation.resume</code>. Therefore the test fails.</p>\n\n<p>Example:</p>\n\n<pre><code>class TestClassTest {\nvar testInstance = TestClass()\n\n@Test\nfun `Test with default dispatchers should fail`() {\n    testInstance.runAsync()\n    assertFalse(testInstance.valueToModify)\n}\n\n@Test\nfun `Test with dispatchers replaced by Unconfined should pass`() {\n    testInstance.DefaultDispatcher = Dispatchers.Unconfined\n    testInstance.IODispatcher = Dispatchers.Unconfined\n    testInstance.runAsync()\n    assertTrue(testInstance.valueToModify)\n}\n\n@Test\nfun `I need to also test some functions that use suspend coroutine - How can I do that?`() {\n    testInstance.DefaultDispatcher = Dispatchers.Unconfined\n    testInstance.IODispatcher = Dispatchers.Unconfined\n    testInstance.runSuspendCoroutine()\n    assertTrue(testInstance.valueToModify)//fails\n}\n}\n\nclass TestClass {\nvar DefaultDispatcher: CoroutineContext = Dispatchers.Default\nvar IODispatcher: CoroutineContext = Dispatchers.IO\nval viewModelScope = CoroutineScope(DefaultDispatcher)\nvar valueToModify = false\n\nfun runAsync() {\n    viewModelScope.launch(DefaultDispatcher) {\n        valueToModify = withContext(IODispatcher) {\n            sleep(1000)\n            true\n        }\n    }\n}\n\nfun runSuspendCoroutine() {\n    viewModelScope.launch(DefaultDispatcher) {\n        valueToModify = suspendCoroutine {\n            Thread {\n                sleep(1000)\n                //long running operation calls listener from background thread\n                it.resume(true)\n            }.start()\n        }\n    }\n}\n}\n</code></pre>\n\n<p>I was experimenting around with <code>runBlocking</code>, however it only helps if you call launch using the <code>CoroutineScope</code> created by <code>runBlocking</code>. But since my code is launching on the <code>CoroutineScope</code> provided by <code>viewModelScope</code> this will not work. If possible I would prefer not to inject a CoroutineScope everywhere, because any lower level class could (and does) make their own CoroutineScope as in the example, and then the Test has to know a lot about the implementation details. The idea behind the scopes is that every class has control over cancelling their asynchronous operations. The viewModelScope for example is by default cancelled when the viewModel is destroyed.</p>\n\n<p>My question:\n<strong>What coroutine dispatcher could I use that runs launch and withContext etc blocking (like <code>Dispatchers.Unconfined</code>) and also runs suspendCoroutine blocking?</strong></p>\n"}, {"tags": ["gradle", "kotlin", "build", "jetbrains-ide"], "comments": [{"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1562067615, "post_id": 56851161, "comment_id": 100253319, "body": "org.jetbrains.intellij is a plugin for building IntelliJ IDEA plugins. If you aren&#39;t building a plugin, you shouldn&#39;t be using it."}, {"owner": {"reputation": 1, "user_id": 6337293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wU6pp.jpg?s=128&g=1", "display_name": "inzheneher", "link": "https://stackoverflow.com/users/6337293/inzheneher"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1562069329, "post_id": 56851161, "comment_id": 100254235, "body": "@NotNull annotation doesn&#39;t work in gradle build process because gradle ignore it, but if you include plugin org.jetbrains.intellij, gradle will understand jetbrains annotations in build process."}], "owner": {"reputation": 1, "user_id": 6337293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wU6pp.jpg?s=128&g=1", "display_name": "inzheneher", "link": "https://stackoverflow.com/users/6337293/inzheneher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562067585, "creation_date": 1562065879, "last_edit_date": 1562067585, "question_id": 56851161, "link": "https://stackoverflow.com/questions/56851161/cant-get-org-jetbrains-intellij-plugin-in-gradle-build", "title": "Can&#39;t get org.jetbrains.intellij plugin in Gradle build", "body": "<p>I'm trying to include \"org.jetbrains.intellij\" plugin to my project for using JetBrains annotation <code>@NotNull</code> in JUnit tests while testing project with Gradle. But Gradle try to download this plugin from <code>cache-redirector.jetbrains.com</code>.</p>\n\n<p>Company, where I try to do that, uses inner Artifactory for keeping dependencies. And I've already set my <code>settings.gradle.kts</code> pluginManagement for using Artifactory. Other plugins successfully downloaded and installed except JetBrains one.</p>\n\n<p>What and where should I modify to force Gradle download plugin from company's Artifactory, not from <code>cache-redirector.jetbrains.com</code>?</p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 180, "user_id": 7716603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e45aa6c7f2950b926956db3395a4806?s=128&d=identicon&r=PG&f=1", "display_name": "Venkatesh", "link": "https://stackoverflow.com/users/7716603/venkatesh"}, "edited": false, "score": 0, "creation_date": 1581936224, "post_id": 56850990, "comment_id": 106590771, "body": "you found solution?"}], "owner": {"reputation": 21, "user_id": 5533519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31339e39eb4962e2b9199d4cf1a6923d?s=128&d=identicon&r=PG&f=1", "display_name": "himanshu", "link": "https://stackoverflow.com/users/5533519/himanshu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1562139589, "creation_date": 1562065246, "last_edit_date": 1562139589, "question_id": 56850990, "link": "https://stackoverflow.com/questions/56850990/firebase-dynamic-link-not-getting-query-parameter-like-utm-source-when-using-cus", "title": "Firebase Dynamic Link Not getting Query parameter like Utm Source when using custom Domain", "body": "<p>Here I am not getting GoogleAnalyticsParameters like soource ,medium when i am using custom domain</p>\n\n<pre><code>FirebaseDynamicLinks.getInstance().getDynamicLink(intent).addOnSuccessListener {\n                if (it != null) {\n                    deepLink = it.link\n\n                }\n            }.addOnCompleteListener {\n                callCampaignApi(deepLink)\n                if (!appUtils.readStringFromPref(Constant.KEY_TOKEN).isNullOrBlank() &amp;&amp; deepLink != null) {\n                    try {\n                        //means user is allready logged in\n                        //source is used for screenname\n                        var source = deepLink!!.getQueryParameter(\"utm_source\")\n                        // campaign is used for additional data like agentId or feedId\n                        var campaign = deepLink!!.getQueryParameter(\"utm_campaign\")\n                        // utm _medium to track external sources\n                        var medium = deepLink!!.getQueryParameter(\"utm_medium\")\n                        handleDynamicLinks(this, source ?: \"\", campaign ?: \"\", medium ?: \"\", deepLink!!)\n                        this.finish()\n                    } catch (ex: Exception) {\n                        Log.e(\"DEEPLINK EXCEPTIONS\", ex.message)\n                        mDelayHandler!!.postDelayed(mRunnable, SPLASH_DELAY)\n                    }\n                } else {\n                    //take him to login  or Registration with deeplink\n                    if (deepLink != null) {\n                        var source = deepLink!!.getQueryParameter(\"utm_source\")\n                        var campaign = deepLink!!.getQueryParameter(\"utm_campaign\")\n                        if (source?.equals(Constant.SCREEN_SEND_INVITATION)!! &amp;&amp; campaign != null) {\n                            //it means it has cp code /// send that value of cpcode to registration screen\n                            launchLoginActivity(campaign)\n                        } else {\n                            //regular flow\n                            mDelayHandler!!.postDelayed(mRunnable, SPLASH_DELAY)\n                        }\n                    } else {\n                        //regular flow\n                        mDelayHandler!!.postDelayed(mRunnable, SPLASH_DELAY)\n                    }\n\n                }\n            }\n\n\n\n\n\n\n\n\nExpected Result is utm source,campaign gets appended in link automatically\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-room", "android-livedata", "itemtouchhelper"], "answers": [{"comments": [{"owner": {"reputation": 584, "user_id": 10516463, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OrmLjkyvSpY/AAAAAAAAAAI/AAAAAAAAAGU/bwjDNubpaTM/photo.jpg?sz=128", "display_name": "d-feverx", "link": "https://stackoverflow.com/users/10516463/d-feverx"}, "edited": false, "score": 1, "creation_date": 1617205311, "post_id": 56850938, "comment_id": 118240868, "body": "it does&#39;t answer the question"}], "tags": [], "owner": {"reputation": 865, "user_id": 10922928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fcec10c285df503a650a817142f2fef?s=128&d=identicon&r=PG&f=1", "display_name": "solaza", "link": "https://stackoverflow.com/users/10922928/solaza"}, "is_accepted": false, "score": -2, "last_activity_date": 1562065100, "creation_date": 1562065100, "answer_id": 56850938, "question_id": 56850786, "link": "https://stackoverflow.com/questions/56850786/how-do-i-persist-changes-in-recyclerview-order-with-room-and-livedata/56850938#56850938", "title": "How do I persist changes in RecyclerView order with Room and LiveData?", "body": "<p>You can follow <a href=\"https://classroom.udacity.com/courses/ud9012/lessons/ee5a525f-0ba3-4d25-ba29-1fa1d6c567b8/concepts/8d0a8eb2-251e-4682-a105-da17fbec8ccd\" rel=\"nofollow noreferrer\">this</a> guide on Udacity. It is free, made by Google and uses Kotlin.</p>\n"}], "owner": {"reputation": 27, "user_id": 2836808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fbb31113e1fe43387d8c8747a4e1846?s=128&d=identicon&r=PG&f=1", "display_name": "bun_at_work", "link": "https://stackoverflow.com/users/2836808/bun-at-work"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 823, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1562065100, "creation_date": 1562064551, "question_id": 56850786, "link": "https://stackoverflow.com/questions/56850786/how-do-i-persist-changes-in-recyclerview-order-with-room-and-livedata", "title": "How do I persist changes in RecyclerView order with Room and LiveData?", "body": "<p>I'm having trouble figuring out how I'm supposed to update data in a Room Database after a change in RecyclerView item order. How am I supposed to update LiveData items in Room based on user action?</p>\n\n<p>Using ItemTouchHelper.Callback I've set up an onMove callback that can make changes to the order of items presented to the user (on drag and drop), but when I make a call to update the order of items in the Room Database, using a ViewModel object, the user can then only move items one at a time. So if you drag an item, it will only move one space. </p>\n\n<p>This is the onMove function I have defined in the ListAdapter, which implements ItemTouchHelperAdapter for the callback.</p>\n\n<pre><code>override fun onMove(\n        recyclerView: RecyclerView,\n        fromViewHolder: RecyclerView.ViewHolder,\n        toViewHolder: RecyclerView.ViewHolder\n    ): Boolean {\n\n        d(this.TAG, \"swap viewHolders: \" + fromViewHolder.adapterPosition + \" to \" + toViewHolder.adapterPosition)\n\n\n        val workoutRoutine1 = workoutRoutines[fromViewHolder.adapterPosition]\n        val workoutRoutine2 = workoutRoutines[toViewHolder.adapterPosition]\n\n        workoutRoutine1.orderNumber = toViewHolder.adapterPosition.toLong()\n        workoutRoutine2.orderNumber = fromViewHolder.adapterPosition.toLong()\n\n        //this.workoutRoutinesViewModel.update(workoutRoutine1)\n        //this.workoutRoutinesViewModel.update(workoutRoutine2)\n\n        notifyItemMoved(fromViewHolder.adapterPosition, toViewHolder.adapterPosition)\n        return true\n    }\n</code></pre>\n\n<p>This is my DAO object</p>\n\n<pre><code>@Dao\ninterface WorkoutRoutineDAO {\n    @Insert\n    suspend fun insert(workoutRoutine: WorkoutRoutine)\n\n    @Update(onConflict = OnConflictStrategy.REPLACE)\n    suspend fun update(workoutRoutine: WorkoutRoutine)\n\n    @Delete\n    suspend fun delete(workoutRoutine: WorkoutRoutine)\n\n    @Query(\"DELETE FROM workout_routine_table\")\n    fun deleteAll()\n\n    @Query(\"SELECT * FROM workout_routine_table ORDER BY order_number ASC\")\n    fun getAllWorkoutRoutines(): LiveData&lt;List&lt;WorkoutRoutine&gt;&gt;\n\n    @Query(\"SELECT COALESCE(MAX(order_number), -1) FROM workout_routine_table\")\n    fun getLargestOrderNumber(): Long\n}\n</code></pre>\n\n<p>This is my RoomDatabase object</p>\n\n<pre><code>@Database(entities = [WorkoutRoutine::class], version = 1)\nabstract class AppDatabase : RoomDatabase() {\n    abstract fun workoutRoutineDAO(): WorkoutRoutineDAO\n\n    companion object {\n        @Volatile\n        private var INSTANCE: AppDatabase? = null\n\n        fun getDatabase(\n            context: Context,\n            scope: CoroutineScope\n        ): AppDatabase {\n            return INSTANCE ?: synchronized(this) {\n                val instance =\n                    Room.databaseBuilder(context.applicationContext, AppDatabase::class.java, \"app_database\")\n                        .addCallback(WorkoutRoutineDatabaseCallback(scope))\n                        .build()\n                INSTANCE = instance\n                instance\n            }\n        }\n    }\n\n    private class WorkoutRoutineDatabaseCallback(\n        private val scope: CoroutineScope\n    ) : RoomDatabase.Callback() {\n\n    }\n}\n</code></pre>\n\n<p>This is the ViewModel object I implemented.</p>\n\n<pre><code>class WorkoutRoutinesViewModel(application: Application) : AndroidViewModel(application) {\n    private val workoutRoutinesRepository: WorkoutRoutineRepository\n\n    val allWorkoutRoutines: LiveData&lt;List&lt;WorkoutRoutine&gt;&gt;\n\n    init {\n        // Get the DAO\n        val workoutRoutineDAO = AppDatabase.getDatabase(application, viewModelScope).workoutRoutineDAO()\n        // Build a new data repository for workout routines\n        workoutRoutinesRepository = WorkoutRoutineRepository(workoutRoutineDAO)\n        // Get a live view of the workout routines database\n        allWorkoutRoutines = workoutRoutinesRepository.allRoutines\n    }\n\n    fun insert(workoutRoutine: WorkoutRoutine) = viewModelScope.launch(Dispatchers.IO) {\n        workoutRoutinesRepository.insert(workoutRoutine)\n    }\n\n    fun update(workoutRoutine: WorkoutRoutine) = viewModelScope.launch(Dispatchers.IO) {\n        workoutRoutinesRepository.update(workoutRoutine)\n    }\n\n    fun delete(workoutRoutine: WorkoutRoutine) = viewModelScope.launch(Dispatchers.IO) {\n        workoutRoutinesRepository.delete(workoutRoutine)\n    }\n}\n</code></pre>\n\n<p>I expect the user to be able to move the item n spaces, then drop, and have the update to Room database execute when the user drops the item, but if I put the Room update in the onMove method, the user can only move the item once.</p>\n\n<p>I'm trying to understand the right way to update the Room data when the order of objects change in the recycler view. I'm trying to get the order of those objects to persist even when the user exits the app or changes activities or whatever. How am I supposed to echo those changes back to the Room database, using LiveData?</p>\n"}, {"tags": ["android", "android-fragments", "kotlin", "fragment"], "comments": [{"owner": {"reputation": 1257, "user_id": 5365227, "user_type": "registered", "profile_image": "https://graph.facebook.com/882615958483627/picture?type=large", "display_name": "Wale", "link": "https://stackoverflow.com/users/5365227/wale"}, "edited": false, "score": 0, "creation_date": 1562064165, "post_id": 56850633, "comment_id": 100251512, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/24555417/how-to-send-data-from-one-fragment-to-another-fragment\">How to send data from one Fragment to another Fragment?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1288, "user_id": 4315695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2643d3f2e3e430a9e4898210e3af1c5e?s=128&d=identicon&r=PG&f=1", "display_name": "Jyubin Patel", "link": "https://stackoverflow.com/users/4315695/jyubin-patel"}, "is_accepted": true, "score": 2, "last_activity_date": 1562064766, "creation_date": 1562064766, "answer_id": 56850845, "question_id": 56850633, "link": "https://stackoverflow.com/questions/56850633/i-want-to-send-data-from-fragment-to-fragment/56850845#56850845", "title": "I want to send data from fragment to fragment", "body": "<p>Hi Please follow below link for your solutions.</p>\n\n<p><a href=\"https://www.journaldev.com/14207/android-passing-data-between-fragments\" rel=\"nofollow noreferrer\">https://www.journaldev.com/14207/android-passing-data-between-fragments</a></p>\n\n<p>You can also use Navigation Graph for Fragment Transaction and directly send any kind of data in bundle to send it like below.</p>\n\n<pre><code>var nameBundle = Bundle()\nnameBundle.putString(\"youKey\", edtName.text.toString())\nit.findNavController().navigate(R.id.tofragmentName, nameBundle)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 175, "user_id": 10100517, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5YF9gJ6E6uE/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pCc56tWD4bKuQ2Q7mTF9vzwxmSPQ/mo/photo.jpg?sz=128", "display_name": "KunBa", "link": "https://stackoverflow.com/users/10100517/kunba"}, "is_accepted": false, "score": -1, "last_activity_date": 1562065611, "creation_date": 1562065611, "answer_id": 56851095, "question_id": 56850633, "link": "https://stackoverflow.com/questions/56850633/i-want-to-send-data-from-fragment-to-fragment/56851095#56851095", "title": "I want to send data from fragment to fragment", "body": "<p>It is not recommended that two Fragments should communicate directly. Check out the documentation and examples here. <a href=\"https://developer.android.com/training/basics/fragments/communicating\" rel=\"nofollow noreferrer\">https://developer.android.com/training/basics/fragments/communicating</a></p>\n\n<p>I would recommend a common ViewModel and observe the changes there.</p>\n"}, {"tags": [], "owner": {"reputation": 865, "user_id": 10922928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fcec10c285df503a650a817142f2fef?s=128&d=identicon&r=PG&f=1", "display_name": "solaza", "link": "https://stackoverflow.com/users/10922928/solaza"}, "is_accepted": false, "score": -1, "last_activity_date": 1562065915, "creation_date": 1562065915, "answer_id": 56851170, "question_id": 56850633, "link": "https://stackoverflow.com/questions/56850633/i-want-to-send-data-from-fragment-to-fragment/56851170#56851170", "title": "I want to send data from fragment to fragment", "body": "<p>You can use SafeArgs that are part of Navigation component on Jetpack.\n<a href=\"https://classroom.udacity.com/courses/ud9012/lessons/7466f670-3d47-4b60-8f6a-0914ce58f9ad/concepts/e8ecc9a9-b393-4df2-bb5c-72827cc083a4\" rel=\"nofollow noreferrer\">Here</a> you have nice tutorial made by Google.</p>\n"}], "owner": {"reputation": 506, "user_id": 10771260, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VVqSgkCfkKs/AAAAAAAAAAI/AAAAAAAAADM/Di22v4d3YCA/photo.jpg?sz=128", "display_name": "Black mamba", "link": "https://stackoverflow.com/users/10771260/black-mamba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 56850845, "answer_count": 3, "score": -1, "last_activity_date": 1562065915, "creation_date": 1562064024, "last_edit_date": 1562064230, "question_id": 56850633, "link": "https://stackoverflow.com/questions/56850633/i-want-to-send-data-from-fragment-to-fragment", "title": "I want to send data from fragment to fragment", "body": "<p>I want to send data from fragment to fragment using arguments the way I am doing is mentioned below. </p>\n\n<p><em>here's on button click data sent to fragment using argument</em></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>//sender fragment \nview.btnjavafragment.setOnClickListener {\n            newInstance(\"helllo\")\n        }\n\n  companion object {\n        @JvmStatic\n        fun newInstance(mystring:String) = javaFragment().apply {\n            arguments = Bundle().apply {\n              putString(\"sentdata\",mystring)\n              if(arguments!=null){\n                  Toast.makeText(context,\"data sent\",Toast.LENGTH_SHORT).show()\n              }\n            }\n        }\n    }\n\n//receiving fragment \noverride fun onAttach(context: Context?) {\n        super.onAttach(context)\n        arguments?.getString(\"sentdata\",\"\")?.let {\n            string = it\n            tvdatamessage.setText(string)\n        }\n    }\n\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-recyclerview"], "comments": [{"owner": {"reputation": 6980, "user_id": 5647037, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aJ0h1.jpg?s=128&g=1", "display_name": "Vucko", "link": "https://stackoverflow.com/users/5647037/vucko"}, "edited": false, "score": 0, "creation_date": 1562061149, "post_id": 56849725, "comment_id": 100249943, "body": "Just missing <code>notifyDataSetChanged</code> in order to notify the adapter that it needs to re-run <code>onBindViewHolder</code>"}, {"owner": {"reputation": 186, "user_id": 5154785, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1e6b0f4825c340cfa8bfbacbc58c8075?s=128&d=identicon&r=PG&f=1", "display_name": "BekaBot", "link": "https://stackoverflow.com/users/5154785/bekabot"}, "edited": false, "score": 0, "creation_date": 1562061218, "post_id": 56849725, "comment_id": 100249984, "body": "you can save index of last clicked item and new clicked item, then using adapter&#39;s notifyItemChanged(itemIndex) change item&#39;s background"}], "answers": [{"tags": [], "owner": {"reputation": 1350, "user_id": 10445540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ca713c1a1ae615695267f4e23b8d5f5?s=128&d=identicon&r=PG&f=1", "display_name": "Artem Botnev", "link": "https://stackoverflow.com/users/10445540/artem-botnev"}, "is_accepted": true, "score": 0, "last_activity_date": 1562061833, "last_edit_date": 1562061833, "creation_date": 1562061422, "answer_id": 56849858, "question_id": 56849725, "link": "https://stackoverflow.com/questions/56849725/how-to-change-the-background-color-of-selected-item-in-recyclerview/56849858#56849858", "title": "How to change the background color of selected item in RecyclerView", "body": "<p>Call notifyDataSetChanged</p>\n\n<pre><code>holder.itemView.setOnClickListener { \n   rowindex = position \n   mListener?.onItemClick(holder.itemView, categories[position])\n   notifyDataSetChanged()          \n} \n\nif (rowindex == position) {            \n    holder.itemView.setBackgroundColor(Color.parseColor(\"#FED07A\")) \n} else { \n    holder.itemView.setBackgroundColor(Color.parseColor(\"#ffffff\")) \n}  \n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 11577141, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-uge_lETocXU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdPIMwpXQBd-ISBOIhEZEKildf0gQ/mo/photo.jpg?sz=128", "display_name": "MimiSoft", "link": "https://stackoverflow.com/users/11577141/mimisoft"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 658, "favorite_count": 1, "accepted_answer_id": 56849858, "answer_count": 1, "score": 0, "last_activity_date": 1562061833, "creation_date": 1562060984, "last_edit_date": 1562061044, "question_id": 56849725, "link": "https://stackoverflow.com/questions/56849725/how-to-change-the-background-color-of-selected-item-in-recyclerview", "title": "How to change the background color of selected item in RecyclerView", "body": "<p>I created a Kotlin mobile app. In my app i use the <code>RecyclerView</code> with adapter. \nI want to changing the background color of item clicked  in my <code>RecyclerView</code>, and when i click on another item, the color will be change and the color of the first item clicked return to the default color. </p>\n\n<pre><code>override fun onBindViewHolder(holder: ViewHolder, position: Int) { \n       val itemCategory: ProductCategoryData = categories[position] \n       holder.categoryId.text = itemCategory.id.toString() \n\n       println(holder.categoryId.text) \n       println(itemCategory.name?.get(\"En\").toString()) \n       holder.categoryName.text = itemCategory.name?.get(\"En\").toString() \n      ............ \n       holder.itemView.setOnClickListener { \n           rowindex = position \n           mListener?.onItemClick(holder.itemView, categories[position]) \n       } \n       if (rowindex == position) { \n           holder.itemView.setBackgroundColor(Color.parseColor(\"#FED07A\")) \n       } else { \n           holder.itemView.setBackgroundColor(Color.parseColor(\"#ffffff\")) \n       } \n\n   }\n</code></pre>\n\n<p>What should i change in my code to make it functional </p>\n"}, {"tags": ["android", "kotlin", "android-service", "android-notifications", "android-alarms"], "answers": [{"tags": [], "owner": {"reputation": 825, "user_id": 8286029, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2b4188ba2c535940200876c2cc665f89?s=128&d=identicon&r=PG&f=1", "display_name": "Elynad", "link": "https://stackoverflow.com/users/8286029/elynad"}, "is_accepted": false, "score": 0, "last_activity_date": 1562180104, "creation_date": 1562180104, "answer_id": 56876403, "question_id": 56849036, "link": "https://stackoverflow.com/questions/56849036/how-to-stop-all-notifications-and-alarms-if-app-is-killed-by-swiping/56876403#56876403", "title": "How to stop all notifications and alarms if app is killed by swiping?", "body": "<p>Keep your background task in a variable, and try to call <code>yourVariable.stop()</code> in the <code>onStop()</code> method of your Activity.</p>\n\n<pre><code>class YourClass() {\n    var myService : Intent? = null\n\n    override fun onCreate() {\n        myService = Intent(this, AppService::class.java)\n        // do your stuff here\n    }\n\n    override fun onStop() {\n        myService?.stop() // Or any 'cancel' or 'stop' method in your service\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1368, "user_id": 9046350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff03988badcde08ee17f62f3e9efeb25?s=128&d=identicon&r=PG&f=1", "display_name": "martin1337", "link": "https://stackoverflow.com/users/9046350/martin1337"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562180104, "creation_date": 1562058690, "question_id": 56849036, "link": "https://stackoverflow.com/questions/56849036/how-to-stop-all-notifications-and-alarms-if-app-is-killed-by-swiping", "title": "How to stop all notifications and alarms if app is killed by swiping?", "body": "<p>I want to cancel all of my notifications and alarms set in background as app is killed by swiping. This action will not trigger <code>onDestroy()</code> inside my root <code>Activity</code>. </p>\n\n<p>I made a background service to call <code>NotificationManager</code> and cancel all notifications in a background if app is killed by swiping. This caused some issues with service in Android O and above. I found out that you have to start your service differently, but this service start will crash my app with \nError: <code>Reason: Context.startForegroundService() did not then call Service.startForeground()</code></p>\n\n<p>I dont have solution how to cancel all of my <code>Alarms</code> in a background yet, but this background service is very important for push notifications from server later in a project.(offtopic)</p>\n\n<p>Initializing service in my <code>Application</code> class: </p>\n\n<pre><code>private fun initBackgroundService(){\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n            startForegroundService(Intent(this, AppService::class.java))\n        } else {\n            startService(Intent(this, AppService::class.java))\n        }\n    }\n</code></pre>\n\n<p><code>AppService</code> class:</p>\n\n<pre><code>import android.app.NotificationManager\nimport android.app.Service\nimport android.content.Context\nimport android.content.Intent\nimport android.os.IBinder\n\n    class AppService: Service(){\n\n        override fun onBind(intent: Intent?): IBinder? {\n            return null\n        }\n\n\n        override fun onStartCommand(intent: Intent?, flags: Int, startId: Int): Int {\n            return START_STICKY\n        }\n\n        override fun onTaskRemoved(rootIntent: Intent?) {\n            super.onTaskRemoved(rootIntent)\n            val nManager = getSystemService(Context.NOTIFICATION_SERVICE) as NotificationManager\n            nManager.cancelAll()\n            stopSelf()\n        }\n\n    }\n</code></pre>\n"}, {"tags": ["java", "kotlin", "retrofit2"], "answers": [{"tags": [], "owner": {"reputation": 4217, "user_id": 5802417, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jWoIa.jpg?s=128&g=1", "display_name": "Michael Gantman", "link": "https://stackoverflow.com/users/5802417/michael-gantman"}, "is_accepted": false, "score": 0, "last_activity_date": 1562060930, "creation_date": 1562060930, "answer_id": 56849708, "question_id": 56849026, "link": "https://stackoverflow.com/questions/56849026/return-retrofit-raw-response-as-a-json-object-without-converting-into-any-specif/56849708#56849708", "title": "return retrofit raw response as a json object without converting into any specific type of object?", "body": "<p>Disclaimer: I don't know Kotlin and giving an answer in java terms only. I would suggest to make your own http call to your third party and retrieve a raw response from it. Then you can just read the response from <code>InputStream</code> even as byte array if you want and do with it anything you want. You will sacrifice development time and development simplicity but gain extreme flexibility. <br>\nHowever, you don't have to write your own Http request handler. Here are few known third party Http clients: </p>\n\n<ol>\n<li><a href=\"https://hc.apache.org/httpcomponents-client-ga/\" rel=\"nofollow noreferrer\">Apache Http Client</a>, </li>\n<li><a href=\"https://square.github.io/okhttp/\" rel=\"nofollow noreferrer\">OK Http client</a></li>\n<li>And my favorite (again disclaimer: written by me) MgntUtils HttpClient: <a href=\"http://michaelgantman.github.io/Mgnt/docs/com/mgnt/lifecycle/management/httpclient/HttpClient.html\" rel=\"nofollow noreferrer\">Javadoc</a>, <a href=\"https://search.maven.org/search?q=g:com.github.michaelgantman%20AND%20a:MgntUtils\" rel=\"nofollow noreferrer\">Maven artifacts</a>, <a href=\"https://github.com/michaelgantman/Mgnt\" rel=\"nofollow noreferrer\">Github</a> with library, sources and javadoc. </li>\n</ol>\n\n<p>MgntUtils Http client may return response as String (<code>sendHttpRequest()</code>) or even binary info (<code>sendHttpRequestForBinaryResponse()</code>)</p>\n"}], "owner": {"reputation": 4398, "user_id": 1143482, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/zBqdL.png?s=128&g=1", "display_name": "jpganz18", "link": "https://stackoverflow.com/users/1143482/jpganz18"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 219, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562060930, "creation_date": 1562058682, "question_id": 56849026, "link": "https://stackoverflow.com/questions/56849026/return-retrofit-raw-response-as-a-json-object-without-converting-into-any-specif", "title": "return retrofit raw response as a json object without converting into any specific type of object?", "body": "<p>I am using Kotlin with retrofit in my project.</p>\n\n<p>I am basically trying to do something very simple.</p>\n\n<p>Having a method, call a retrofit interface that will bring info from another API. Unfortunately, that API responds different types of objects from the same endpoint (depending of the input and results) so, I was able to map response and worked fine.</p>\n\n<p>Now I am trying to avoid mapping to a specific model and instead, just return the raw response and output it on my service as a Json output.</p>\n\n<p>So I made this:</p>\n\n<p>At my service </p>\n\n<pre><code>val response = userService.getUser(request).await()\n</code></pre>\n\n<p>UserService:</p>\n\n<pre><code>fun getUser(request: User) = client.getInfo(// some parameters )\n</code></pre>\n\n<p>Then at my client (retrofit) I made this:</p>\n\n<pre><code>@GET(\"/api/v1/user/{}\")\n    fun getInfo( // some paramters\n\n    ): Deferred&lt;ResponseBody&gt;\n</code></pre>\n\n<p>Everytime I use ResponseBody I get an empty result</p>\n\n<p>Everytime I use <code>Deferred&lt;Response&lt;MySpecificObject&gt;&gt;</code></p>\n\n<p>I get a proper Object full with the information. I wanna avoid that at this moment.</p>\n\n<p>My retrofit is configured like this:</p>\n\n<pre><code>return Retrofit.Builder()\n            .baseUrl(baseUrl)\n            .addCallAdapterFactory(CoroutineCallAdapterFactory())       .addConverterFactory(GsonConverterFactory.create())\n            .client(okHttpClient)\n            .build()\n            .create()\n</code></pre>\n\n<p>At my dropwizard configuration I added this:</p>\n\n<pre><code>bootstrap.objectMapper.disable(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES)\n        bootstrap.objectMapper.disable(SerializationFeature.FAIL_ON_EMPTY_BEANS)\n</code></pre>\n\n<p>Any idea if that is possible?</p>\n"}, {"tags": ["android", "kotlin", "dependency-injection", "dagger-2"], "comments": [{"owner": {"reputation": 148364, "user_id": 501696, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/shkBF.png?s=128&g=1", "display_name": "Blackbelt", "link": "https://stackoverflow.com/users/501696/blackbelt"}, "edited": false, "score": 0, "creation_date": 1562057515, "post_id": 56848597, "comment_id": 100247979, "body": "did you override <code>onAttach</code> to &#39;register&#39; your fragment?"}, {"owner": {"reputation": 1236, "user_id": 10597533, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e1DQL.png?s=128&g=1", "display_name": "Sergei Mikhailovskii", "link": "https://stackoverflow.com/users/10597533/sergei-mikhailovskii"}, "reply_to_user": {"reputation": 148364, "user_id": 501696, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/shkBF.png?s=128&g=1", "display_name": "Blackbelt", "link": "https://stackoverflow.com/users/501696/blackbelt"}, "edited": false, "score": 0, "creation_date": 1562057900, "post_id": 56848597, "comment_id": 100248200, "body": "@Blackbelt, yes"}, {"owner": {"reputation": 148364, "user_id": 501696, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/shkBF.png?s=128&g=1", "display_name": "Blackbelt", "link": "https://stackoverflow.com/users/501696/blackbelt"}, "edited": false, "score": 0, "creation_date": 1562058805, "post_id": 56848597, "comment_id": 100248686, "body": "<code>HasSupportFragmentInjector</code> should be implemented by the <code>Activity</code> hosting the <code>fragment</code> iirc"}, {"owner": {"reputation": 1236, "user_id": 10597533, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e1DQL.png?s=128&g=1", "display_name": "Sergei Mikhailovskii", "link": "https://stackoverflow.com/users/10597533/sergei-mikhailovskii"}, "reply_to_user": {"reputation": 148364, "user_id": 501696, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/shkBF.png?s=128&g=1", "display_name": "Blackbelt", "link": "https://stackoverflow.com/users/501696/blackbelt"}, "edited": false, "score": 0, "creation_date": 1562059126, "post_id": 56848597, "comment_id": 100248855, "body": "@Blackbelt I moved it to MainActivity, which places needle fragment, but I still get the same exception"}, {"owner": {"reputation": 27113, "user_id": 1993204, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/n4qZa.jpg?s=128&g=1", "display_name": "Bartek Lipinski", "link": "https://stackoverflow.com/users/1993204/bartek-lipinski"}, "edited": false, "score": 0, "creation_date": 1564054772, "post_id": 56848597, "comment_id": 100909892, "body": "@SergeiMikhailovskii you&#39;ve added the <code>inject</code> method to the component, but have you used it in the <code>FavoritesFragment</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 1236, "user_id": 10597533, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e1DQL.png?s=128&g=1", "display_name": "Sergei Mikhailovskii", "link": "https://stackoverflow.com/users/10597533/sergei-mikhailovskii"}, "edited": false, "score": 0, "creation_date": 1562226224, "post_id": 56862084, "comment_id": 100313520, "body": "Still the same: presenter isn&#39;t initialized"}], "tags": [], "owner": {"reputation": 2837, "user_id": 3677030, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/423439711c29bc18bf8db2799f1600f6?s=128&d=identicon&r=PG", "display_name": "Mohammed Rampurawala", "link": "https://stackoverflow.com/users/3677030/mohammed-rampurawala"}, "is_accepted": false, "score": 0, "last_activity_date": 1562120545, "creation_date": 1562120545, "answer_id": 56862084, "question_id": 56848597, "link": "https://stackoverflow.com/questions/56848597/lateinit-property-presenter-has-not-been-initialized-through-dagger/56862084#56862084", "title": "lateinit property presenter has not been initialized through Dagger", "body": "<pre><code>override fun supportFragmentInjector(): AndroidInjector&lt;Fragment&gt; {\n        return fragmentDispatchingAndroidInjector\n    }\n\n    @Inject\n    lateinit var fragmentDispatchingAndroidInjector:DispatchingAndroidInjector&lt;Fragment&gt;\n}\n</code></pre>\n\n<p>This code should be in your fragment not in presenter because Presenter is a dependency for a Fragment. </p>\n"}], "owner": {"reputation": 1236, "user_id": 10597533, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e1DQL.png?s=128&g=1", "display_name": "Sergei Mikhailovskii", "link": "https://stackoverflow.com/users/10597533/sergei-mikhailovskii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 499, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1562120545, "creation_date": 1562057138, "last_edit_date": 1562060036, "question_id": 56848597, "link": "https://stackoverflow.com/questions/56848597/lateinit-property-presenter-has-not-been-initialized-through-dagger", "title": "lateinit property presenter has not been initialized through Dagger", "body": "<p>I faced with the following problem while adding Dagger to my project. I read several articles, where was written that all lines similar to this:</p>\n\n<pre><code>private val presenter = FavoritesPresenter()\n</code></pre>\n\n<p>should be replaced with <code>DI</code>. Please, correct me if I am wrong and this is wrong way.\nI created a special component for it:</p>\n\n<pre><code>AppComponent:\n\n@Component(\n        modules = [FavoritesModule::class]\n)\ninterface AppComponent: AndroidInjector&lt;TraktTvApp&gt;{\n\n    @Component.Builder\n    interface Builder {\n\n        @BindsInstance\n        fun application(application: TraktTvApp): Builder\n\n        fun build(): AppComponent\n\n    }\n\n}\n</code></pre>\n\n<p>and Module:</p>\n\n<pre><code>FavoritesModule\n\n@Module\nabstract class FavoritesModule {\n\n    @Binds\n    abstract fun favoritesPresenter(favoritesPresenter: FavoritesPresenter): FavoritesContract.FavoritesPresenter\n\n}\n\n</code></pre>\n\n<p>By this way I am trying to create a new instance of Presenter.Probably I don't understand the necessity of such parameters, but when I tried to change the signature in the following way:</p>\n\n<pre><code>abstract fun favoritesPresenter(): FavoritesPresenter\n</code></pre>\n\n<p>my app crashed during compilation.</p>\n\n<p>And now my Fragment, where I had a line </p>\n\n<pre><code>private val presenter = FavoritesPresenter()\n</code></pre>\n\n<p>looks like:</p>\n\n<pre><code>\nclass FavoritesFragment : Fragment(), FavoritesContract.FavoritesView, MoviesAdapter.OnItemClickListener {\n\n    @Inject\n    lateinit var presenter:FavoritesPresenter\n\n*other code*\n}\n</code></pre>\n\n<p>But when I run my app I have the following exception:</p>\n\n<blockquote>\n  <p>kotlin.UninitializedPropertyAccessException: lateinit property\n  presenter has not been initialized\n          at com.mikhailovskii.trakttv.ui.favorites.FavoritesFragment.onViewCreated(FavoritesFragment.kt:41)\n          at androidx.fragment.app.FragmentManagerImpl.moveToState(FragmentManager.java:1471)\n          at androidx.fragment.app.FragmentManagerImpl.moveFragmentToExpectedState(FragmentManager.java:1784)\n          at androidx.fragment.app.FragmentManagerImpl.moveToState(FragmentManager.java:1852)\n          at androidx.fragment.app.BackStackRecord.executeOps(BackStackRecord.java:802)\n          at androidx.fragment.app.FragmentManagerImpl.executeOps(FragmentManager.java:2625)\n          at androidx.fragment.app.FragmentManagerImpl.executeOpsTogether(FragmentManager.java:2411)\n          at androidx.fragment.app.FragmentManagerImpl.removeRedundantOperationsAndExecute(FragmentManager.java:2366)\n          at androidx.fragment.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:2273)\n          at androidx.fragment.app.FragmentManagerImpl$1.run(FragmentManager.java:733)\n          at android.os.Handler.handleCallback(Handler.java:873)\n          at android.os.Handler.dispatchMessage(Handler.java:99)\n          at android.os.Looper.loop(Looper.java:193)\n          at android.app.ActivityThread.main(ActivityThread.java:6669)\n          at java.lang.reflect.Method.invoke(Native Method)\n          at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\n          at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:858)</p>\n</blockquote>\n\n<p>So, what I did wrong and how can I solve this problem correctly?</p>\n\n<p><strong>UPD</strong></p>\n\n<p>And here's a code of my presenter:</p>\n\n<pre><code>class FavoritesPresenter @Inject constructor() : BasePresenter&lt;FavoritesContract.FavoritesView&gt;(), FavoritesContract.FavoritesPresenter, HasSupportFragmentInjector {\n\n    override fun supportFragmentInjector(): AndroidInjector&lt;Fragment&gt; {\n        return fragmentDispatchingAndroidInjector\n    }\n\n    @Inject\n    lateinit var fragmentDispatchingAndroidInjector:DispatchingAndroidInjector&lt;Fragment&gt;\n}\n</code></pre>\n\n<p><strong>UPD 2</strong></p>\n\n<p>I added the following methods to AppComponent:</p>\n\n<pre><code>override fun inject(application: TraktTvApp)\n\nfun inject(fragment: Fragment)\n</code></pre>\n\n<p>But it also didn't help</p>\n"}, {"tags": ["android", "kotlin", "push-notification", "firebase-cloud-messaging"], "answers": [{"comments": [{"owner": {"reputation": 1186, "user_id": 1434047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abaa451e2b93ad55c9ff5107be30b5a1?s=128&d=identicon&r=PG", "display_name": "Bink", "link": "https://stackoverflow.com/users/1434047/bink"}, "edited": false, "score": 1, "creation_date": 1605716037, "post_id": 56863523, "comment_id": 114737851, "body": "Outside of code, you don&#39;t say what you changed to resolve the issue..."}], "tags": [], "owner": {"reputation": 5408, "user_id": 6021469, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2Slrs.jpg?s=128&g=1", "display_name": "Shweta Chauhan", "link": "https://stackoverflow.com/users/6021469/shweta-chauhan"}, "is_accepted": false, "score": 0, "last_activity_date": 1562132206, "creation_date": 1562132206, "answer_id": 56863523, "question_id": 56848513, "link": "https://stackoverflow.com/questions/56848513/how-to-display-notification-in-group-using-setgroup-in-android/56863523#56863523", "title": "How to display notification in Group using SetGroup() in Android?", "body": "<blockquote>\n  <p>Finally I got solution for this question using <a href=\"https://stackoverflow.com/a/41114135/6021469\">https://stackoverflow.com/a/41114135/6021469</a>, <a href=\"https://www.developer.com/ws/android/creating-bundled-notifications-with-android.html\" rel=\"nofollow noreferrer\">https://www.developer.com/ws/android/creating-bundled-notifications-with-android.html</a></p>\n</blockquote>\n\n<pre><code>class MyFirebaseMessagingService : FirebaseMessagingService() {\n\noverride fun onMessageReceived(remoteMessage: RemoteMessage?) {\n    super.onMessageReceived(remoteMessage)\n\n    remoteMessage?.let {\n        sendNotification(it.data[\"alert\"])\n    }\n}\n\nprivate fun sendNotification(messageBody: String?) {\n\n    val channelId = \"${this.packageName}-${this.getString(R.string.app_name)}\"\n\n    val defaultSoundUri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION)\n\n    val builder = NotificationCompat.Builder(this, channelId).apply {\n        setDefaults(Notification.DEFAULT_ALL)\n        setSmallIcon(if (Build.VERSION.SDK_INT &gt;= 21) R.mipmap.ic_launcher else R.mipmap.ic_launcher_round)\n        setContentTitle(getString(R.string.app_name))\n        setShowWhen(true)\n        setContentText(messageBody)\n        setDefaults(NotificationCompat.DEFAULT_SOUND or NotificationCompat.DEFAULT_VIBRATE or NotificationCompat.DEFAULT_LIGHTS)\n        setStyle(NotificationCompat.BigTextStyle().bigText(messageBody))\n        priority = NotificationCompat.PRIORITY_DEFAULT\n        setAutoCancel(true)\n        setShowWhen(true)\n        setSound(defaultSoundUri)\n        setGroup(getString(R.string.app_name))\n    }\n\n    val builderSummary = NotificationCompat.Builder(this, channelId).apply {\n        setDefaults(Notification.DEFAULT_ALL)\n        setSmallIcon(if (Build.VERSION.SDK_INT &gt;= 21) R.mipmap.ic_launcher else R.mipmap.ic_launcher_round)\n        setContentTitle(getString(R.string.app_name))\n        setShowWhen(true)\n        setContentText(messageBody)\n        setDefaults(NotificationCompat.DEFAULT_SOUND or NotificationCompat.DEFAULT_VIBRATE or NotificationCompat.DEFAULT_LIGHTS)\n        setStyle(NotificationCompat.BigTextStyle().bigText(messageBody))\n        priority = NotificationCompat.PRIORITY_DEFAULT\n        setAutoCancel(true)\n        setShowWhen(true)\n        setSound(defaultSoundUri)\n        setGroup(getString(R.string.app_name))\n        setGroupSummary(true)\n    }\n\n    val manager = getSystemService(NOTIFICATION_SERVICE) as? NotificationManager\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n        val channel = NotificationChannel(channelId, getString(R.string.default_channel_name), NotificationManager.IMPORTANCE_HIGH)\n        manager?.createNotificationChannel(channel)\n    }\n\n    val intent = Intent(this, DashboardFlowActivity::class.java)\n    intent.putExtra(DashboardFlowActivity.ISFROMNOTIFICATION, true)\n    intent.flags = Intent.FLAG_ACTIVITY_NEW_TASK or Intent.FLAG_ACTIVITY_CLEAR_TASK\n    val pendingIntent = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_ONE_SHOT)\n    builder.setContentIntent(pendingIntent)\n\n\n    manager?.notify(this.getString(R.string.app_name), getID(), builder.build())\n    manager?.notify(this.getString(R.string.app_name), 0, builderSummary.build())\n  }\n}\n\nprivate val c = AtomicInteger(0)\nprivate fun getID(): Int {\n   return c.incrementAndGet()\n}\n</code></pre>\n"}], "owner": {"reputation": 5408, "user_id": 6021469, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2Slrs.jpg?s=128&g=1", "display_name": "Shweta Chauhan", "link": "https://stackoverflow.com/users/6021469/shweta-chauhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 307, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1562132206, "creation_date": 1562056834, "last_edit_date": 1562061221, "question_id": 56848513, "link": "https://stackoverflow.com/questions/56848513/how-to-display-notification-in-group-using-setgroup-in-android", "title": "How to display notification in Group using SetGroup() in Android?", "body": "<p>I have tried using \"0\" notification id and as well as unique notification id.\nAlso used setGroup() like below. It still generates a new notification every time. I want to merge the notification body and set the title as common.</p>\n\n<pre><code>class MyFirebaseMessagingService : FirebaseMessagingService() {\n\noverride fun onMessageReceived(remoteMessage: RemoteMessage?) {\n    super.onMessageReceived(remoteMessage)\n\n    remoteMessage?.let {\n        sendNotification(it.data[\"alert\"])\n    }\n}\n\nprivate fun sendNotification(messageBody: String?) {\n\n    val channelId = \"${this.packageName}-${this.getString(R.string.app_name)}\"\n\n    val defaultSoundUri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION)\n\n    val builder = NotificationCompat.Builder(this, channelId).apply {\n        setDefaults(Notification.DEFAULT_ALL)\n        setSmallIcon(if (Build.VERSION.SDK_INT &gt;= 21) R.mipmap.ic_launcher else R.mipmap.ic_launcher_round)\n        setContentTitle(getString(R.string.app_name))\n        setContentText(messageBody)\n        setDefaults(NotificationCompat.DEFAULT_SOUND or NotificationCompat.DEFAULT_VIBRATE or NotificationCompat.DEFAULT_LIGHTS)\n        setStyle(NotificationCompat.BigTextStyle().bigText(messageBody))\n        priority = NotificationCompat.PRIORITY_DEFAULT\n        setAutoCancel(true)\n        setSound(defaultSoundUri)\n        setGroup(getString(R.string.app_name))\n        setGroupSummary(true)\n    }\n\n    val manager = getSystemService(NOTIFICATION_SERVICE) as? NotificationManager\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n        val channel = NotificationChannel(channelId, getString(R.string.default_channel_name), NotificationManager.IMPORTANCE_HIGH)\n        manager?.createNotificationChannel(channel)\n    }\n\n    val intent = Intent(this, DashboardFlowActivity::class.java)\n    intent.putExtra(DashboardFlowActivity.ISFROMNOTIFICATION, true)\n    intent.flags = Intent.FLAG_ACTIVITY_NEW_TASK or Intent.FLAG_ACTIVITY_CLEAR_TASK\n    val pendingIntent = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_ONE_SHOT)\n    builder.setContentIntent(pendingIntent)\n\n    //manager?.cancelAll()\n\n    manager?.notify(this.getString(R.string.app_name), getID(), builder.build())\n}\n}\n\nprivate val c = AtomicInteger(0)\nprivate fun getID(): Int {\n   return c.incrementAndGet()\n}\n</code></pre>\n\n<p>Anything I am doing wrong here? Also, I have gone through this answer. <a href=\"https://stackoverflow.com/questions/36058887/setgroup-in-notification-not-working\">setgroup() in notification not working</a></p>\n"}, {"tags": ["kotlin", "listener", "channel", "kotlin-coroutines", "behaviorsubject"], "comments": [{"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 2, "creation_date": 1562056911, "post_id": 56848248, "comment_id": 100247655, "body": "What about <a href=\"https://github.com/Kotlin/kotlinx.coroutines/tree/master/kotlinx-coroutines-core/jvm/test/channels\" rel=\"nofollow noreferrer\">github.com/Kotlin/kotlinx.coroutines/tree/master/&hellip;</a> (in particular <a href=\"https://github.com/Kotlin/kotlinx.coroutines/blob/master/kotlinx-coroutines-core/jvm/test/channels/ConflatedBroadcastChannelNotifyStressTest.kt\" rel=\"nofollow noreferrer\">github.com/Kotlin/kotlinx.coroutines/blob/master/&hellip;</a>)?"}, {"owner": {"reputation": 53550, "user_id": 1083957, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/vIOTT.jpg?s=128&g=1", "display_name": "azizbekian", "link": "https://stackoverflow.com/users/1083957/azizbekian"}, "reply_to_user": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1562059741, "post_id": 56848248, "comment_id": 100249193, "body": "@AlexeyRomanov, a lot of code there, let me analyze it. Thanks for the tip!"}, {"owner": {"reputation": 53550, "user_id": 1083957, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/vIOTT.jpg?s=128&g=1", "display_name": "azizbekian", "link": "https://stackoverflow.com/users/1083957/azizbekian"}, "reply_to_user": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1562069364, "post_id": 56848248, "comment_id": 100254259, "body": "@AlexeyRomanov, thanks for the help, it indeed lead me to correct direction."}], "answers": [{"tags": [], "owner": {"reputation": 53550, "user_id": 1083957, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/vIOTT.jpg?s=128&g=1", "display_name": "azizbekian", "link": "https://stackoverflow.com/users/1083957/azizbekian"}, "is_accepted": true, "score": 1, "last_activity_date": 1562069331, "creation_date": 1562069331, "answer_id": 56852145, "question_id": 56848248, "link": "https://stackoverflow.com/questions/56848248/unit-testing-kotlins-conflatedbroadcastchannel-behavior/56852145#56852145", "title": "Unit testing Kotlin&#39;s ConflatedBroadcastChannel behavior", "body": "<p>With the <a href=\"https://stackoverflow.com/questions/56848248/unit-testing-kotlins-conflatedbroadcastchannel-behavior/56852145#comment100247655_56848248\">help of Alexey</a> I could manage to end up having following code, which answers the question:</p>\n\n<pre><code>class ChannelListenerTest {\n\n  private val val channelSender: ChannelSender = mock()\n\n  private val sut = ChannelListener(channelSender)\n  private val broadcastChannel = ConflatedBroadcastChannel&lt;String&gt;()\n\n  private val timeLimit = 1_000L\n  private val endMarker = \"end\"\n\n  @Test\n  fun `some description here`() = runBlocking {\n    whenever(channelSender.channel).thenReturn(broadcastChannel)\n\n    val sender = launch(Dispatchers.Default) {\n      broadcastChannel.offer(\"A\")\n      yield()\n    }\n\n    val receiver = launch(Dispatchers.Default) {\n      while (isActive) {\n        val i = waitForEvent()\n        if (i == endMarker) break\n        yield()\n      }\n    }\n\n    try {\n      withTimeout(timeLimit) {\n        sut.listenToChannel()\n        sender.join()\n        broadcastChannel.offer(endMarker) // last event to signal receivers termination\n        receiver.join()\n      }\n      verify(foo).perform()\n    } catch (e: CancellationException) {\n      println(\"Test timed out $e\")\n    }\n  }\n\n  private suspend fun waitForEvent(): String =\n      with(broadcastChannel.openSubscription()) {\n        val value = receive()\n        cancel()\n        value\n      }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 53550, "user_id": 1083957, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/vIOTT.jpg?s=128&g=1", "display_name": "azizbekian", "link": "https://stackoverflow.com/users/1083957/azizbekian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1207, "favorite_count": 1, "accepted_answer_id": 56852145, "answer_count": 1, "score": 2, "last_activity_date": 1562069331, "creation_date": 1562055885, "last_edit_date": 1562063178, "question_id": 56848248, "link": "https://stackoverflow.com/questions/56848248/unit-testing-kotlins-conflatedbroadcastchannel-behavior", "title": "Unit testing Kotlin&#39;s ConflatedBroadcastChannel behavior", "body": "<p>In the new project that I'm currently working on I have no RxJava dependency at all, because until now I didn't need that - coroutines solve threading problem pretty gracefully.</p>\n\n<p>At this point I stumbled upon on a requirement to have a <a href=\"https://kotlinlang.org/docs/reference/coroutines/channels.html\" rel=\"nofollow noreferrer\"><code>BehaviorSubject</code></a>-alike behavior, where one can subscribe to a stream of data and receive the latest value upon subscription. As I've learned, <a href=\"https://kotlinlang.org/docs/reference/coroutines/channels.html\" rel=\"nofollow noreferrer\"><code>Channel</code></a>s provide very similar behavior in Kotlin, so I decided to give them a try.</p>\n\n<p>From <a href=\"https://proandroiddev.com/part-3-transmitting-streams-of-value-with-channels-70cf8dccf2b\" rel=\"nofollow noreferrer\">this</a> article I've learned, that <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.channels/-conflated-broadcast-channel/\" rel=\"nofollow noreferrer\"><code>ConflatedBroadcastChannel</code></a> is the type of channel that mimics <code>BehaviorSubject</code>, so I declared following:</p>\n\n<pre><code>class ChannelSender {\n\n    val channel = ConflatedBroadcastChannel&lt;String&gt;()\n\n    fun sendToChannel(someString: String) {\n         GlobalScope.launch(Dispatchers.Main) { channel.send(someString) }\n    }\n}\n</code></pre>\n\n<p>For listening to the channel I do this:</p>\n\n<pre>\n<code>\n    class ChannelListener(val channelSender: ChannelSender) {\n        fun listenToChannel() {\n            channelSender.channel.consumeEach { someString ->\n                if (someString == \"A\") foo.perform() \n                else bar.perform()\n            }\n        }\n    }\n</code>\n</pre>\n\n<p>This works as expected, but at this point I'm having difficulties understanding how to unit test <code>ChannelListener</code>.</p>\n\n<p>I've tried to find something related <a href=\"https://github.com/Kotlin/kotlinx.coroutines/tree/master/kotlinx-coroutines-core/jvm/test/guide\" rel=\"nofollow noreferrer\">here</a>, but none of <code>example-channel-**.kt</code> classes were helpful.</p>\n\n<p>Any help, suggestion or correction related to my incorrect assumptions is appreciated. Thanks.</p>\n"}, {"tags": ["android", "sockets", "kotlin", "websocket", "client"], "answers": [{"comments": [{"owner": {"reputation": 4122, "user_id": 2869795, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fMYyR.jpg?s=128&g=1", "display_name": "Kalanidhi", "link": "https://stackoverflow.com/users/2869795/kalanidhi"}, "edited": false, "score": 0, "creation_date": 1565249762, "post_id": 57226169, "comment_id": 101295569, "body": "Hi, Thanks for your answer, How to close the connection."}, {"owner": {"reputation": 399, "user_id": 6804455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc67122710481d8591a48119633f9643?s=128&d=identicon&r=PG&f=1", "display_name": "aamitarya", "link": "https://stackoverflow.com/users/6804455/aamitarya"}, "edited": false, "score": 3, "creation_date": 1569313789, "post_id": 57226169, "comment_id": 102546899, "body": "For closing connection create a lifecycle e.g.  <code>var myLifecycle = CustomSocketLifecycle()</code>  where  <code>class CustomSocketLifecycle(         val lifecycleRegistry: LifecycleRegistry = LifecycleRegistry() ) : Lifecycle by lifecycleRegistry {     init {         lifecycleRegistry.onNext(Lifecycle.State.Started)     } }</code>  for start listening use <code>myLifecycle.lifecycleRegistry.onNext(Lifecycle.State.Started&zwnj;&#8203;)</code> and stop listening use <code>myLifecycle.lifecycleRegistry.onNext(Lifecycle.State.Stopped&zwnj;&#8203;.WithReason(Shutdown&zwnj;&#8203;Reason.GRACEFUL))</code>"}, {"owner": {"reputation": 103, "user_id": 8358839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835e18c94eb4b510cc5b8bf1dc4b14bd?s=128&d=identicon&r=PG&f=1", "display_name": "Gregor A", "link": "https://stackoverflow.com/users/8358839/gregor-a"}, "edited": false, "score": 0, "creation_date": 1600172666, "post_id": 57226169, "comment_id": 112998637, "body": "How to do this without RxJava but with live data"}, {"owner": {"reputation": 796, "user_id": 3183912, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/K0t9E.jpg?s=128&g=1", "display_name": "Trinity", "link": "https://stackoverflow.com/users/3183912/trinity"}, "edited": false, "score": 0, "creation_date": 1600187057, "post_id": 57226169, "comment_id": 113006370, "body": "You should think about Kotlin.Flow for that"}], "tags": [], "owner": {"reputation": 796, "user_id": 3183912, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/K0t9E.jpg?s=128&g=1", "display_name": "Trinity", "link": "https://stackoverflow.com/users/3183912/trinity"}, "is_accepted": true, "score": 4, "last_activity_date": 1564170174, "creation_date": 1564170174, "answer_id": 57226169, "question_id": 56847644, "link": "https://stackoverflow.com/questions/56847644/how-to-connect-via-websocket-on-android-using-scarlet/57226169#57226169", "title": "How to connect via WebSocket on Android using Scarlet?", "body": "<p>First of all, you should declare a WebSocket client using an interface. Use Scarlet annotations such as <code>@Receive</code> and <code>@Send</code> to define how you are going to handle the WebSocket communication, as the following example: </p>\n\n<pre><code>interface NewsService {\n    @Receive\n    fun observeWebSocketEvent(): Flowable&lt;WebSocket.Event&gt;\n    @Send\n    fun sendSubscribe(subscribe: Subscribe)\n    @Receive\n    fun observeNews(): Flowable&lt;MyNews&gt;\n}  \n</code></pre>\n\n<p>Next step is create an implementation of your Scarlet Interface and subscribe the data stream emitted during the WebSocket connection. In the following example , Moshi and RxJava are being used however Scarlet provide other ways to handle and manipulate the data.</p>\n\n<pre><code>val scarletInstance = Scarlet.Builder()\n    .webSocketFactory(okHttpClient.newWebSocketFactory(BASE_URL))\n    .addMessageAdapterFactory(MoshiMessageAdapter.Factory())\n    .addStreamAdapterFactory(RxJava2StreamAdapter.Factory())\n    .build()\n\n//service created\nval newsService = scarletInstance.create&lt;NewsService&gt;()\n\n//define websocket event observer\nnewsService.observeWebSocketEvent()\n    .filter { it is WebSocket.Event.OnConnectionOpened&lt;*&gt; }\n    .subscribe({\n        newsService.sendSubscribe()\n    })\n\n// news data result\nnewsService.observeNews()\n    .subscribe({ news -&gt;\n        Log.d(TAG, news.toString())\n    })\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 7827186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d583475ba3f4d5271398c9093ce4c191?s=128&d=identicon&r=PG&f=1", "display_name": "v.podlipnyak", "link": "https://stackoverflow.com/users/7827186/v-podlipnyak"}, "is_accepted": false, "score": 3, "last_activity_date": 1582033541, "last_edit_date": 1582033541, "creation_date": 1582030373, "answer_id": 60281352, "question_id": 56847644, "link": "https://stackoverflow.com/questions/56847644/how-to-connect-via-websocket-on-android-using-scarlet/60281352#60281352", "title": "How to connect via WebSocket on Android using Scarlet?", "body": "<p>Your code is FAILING due to class duplication. It occurs because of different lib versions. The correct implementation is:</p>\n\n<pre><code>//web sockets\nimplementation 'com.tinder.scarlet:scarlet:0.1.10'\nimplementation \"com.tinder.scarlet:websocket-okhttp:0.1.10\"\nimplementation \"com.tinder.scarlet:stream-adapter-rxjava2:0.1.10\"\nimplementation \"com.tinder.scarlet:message-adapter-moshi:0.1.10\"\nimplementation \"com.tinder.scarlet:lifecycle-android:0.1.10\"\n</code></pre>\n"}], "owner": {"reputation": 168, "user_id": 9337866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/539e14651ab074ab22976e723c24bb40?s=128&d=identicon&r=PG&f=1", "display_name": "Sanam Yavarpor", "link": "https://stackoverflow.com/users/9337866/sanam-yavarpor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5226, "favorite_count": 6, "accepted_answer_id": 57226169, "answer_count": 2, "score": 8, "last_activity_date": 1582033541, "creation_date": 1562053476, "last_edit_date": 1565222638, "question_id": 56847644, "link": "https://stackoverflow.com/questions/56847644/how-to-connect-via-websocket-on-android-using-scarlet", "title": "How to connect via WebSocket on Android using Scarlet?", "body": "<p>Code from README.md</p>\n\n<pre><code> val scarletInstance = Scarlet.Builder()\n    .webSocketFactory(okHttpClient.newWebSocketFactory(GDAX_URL))\n    .addMessageAdapterFactory(MoshiMessageAdapter.Factory())\n    .addStreamAdapterFactory(RxJava2StreamAdapterFactory())\n    .build() \n</code></pre>\n\n<p>Version and dependencies:</p>\n\n<pre><code>implementation 'com.tinder.scarlet:scarlet:0.1.8'\nimplementation \"com.github.tinder.scarlet:scarlet-websocket-okhttp:0.1.7\"\nimplementation \"com.github.tinder.scarlet:scarlet-stream-adapter-rxjava2:0.2.4\"\nimplementation \"com.github.tinder.scarlet:scarlet-message-adapter-moshi:0.2.4\"\nimplementation \"com.github.tinder.scarlet:scarlet-lifecycle-android:0.2.4\"\n</code></pre>\n"}, {"tags": ["android", "api", "post", "kotlin", "request"], "comments": [{"owner": {"reputation": 9541, "user_id": 1568530, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001179991520/picture?type=large", "display_name": "Vladyslav Matviienko", "link": "https://stackoverflow.com/users/1568530/vladyslav-matviienko"}, "edited": false, "score": 0, "creation_date": 1562053499, "post_id": 56847633, "comment_id": 100245975, "body": "where does it show <code>com.android.volley.ClientError</code>? show the stacktrace."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11714076"}, "reply_to_user": {"reputation": 9541, "user_id": 1568530, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001179991520/picture?type=large", "display_name": "Vladyslav Matviienko", "link": "https://stackoverflow.com/users/1568530/vladyslav-matviienko"}, "edited": false, "score": 0, "creation_date": 1562053900, "post_id": 56847633, "comment_id": 100246159, "body": "the stacktrace is this  2019-07-02 09:39:10.391 15132-15254/com.example.testapi E/Volley: [13339] BasicNetwork.performRequest: Unexpected response code 422 for <a href=\"https://develop.api.live\" rel=\"nofollow noreferrer\">develop.api.live</a> ??"}, {"owner": {"user_type": "does_not_exist", "display_name": "user11714076"}, "reply_to_user": {"reputation": 9541, "user_id": 1568530, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001179991520/picture?type=large", "display_name": "Vladyslav Matviienko", "link": "https://stackoverflow.com/users/1568530/vladyslav-matviienko"}, "edited": false, "score": 0, "creation_date": 1562053950, "post_id": 56847633, "comment_id": 100246179, "body": "422 is the normal code when i send an email already taken"}], "owner": {"user_type": "does_not_exist", "display_name": "user11714076"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1562083892, "creation_date": 1562053417, "last_edit_date": 1562083892, "question_id": 56847633, "link": "https://stackoverflow.com/questions/56847633/how-i-can-print-the-answer-and-not-the-error-of-the-post-request", "title": "How i can print the answer and not the error of the post request?", "body": "<p>I send json and header to an API and I suppose to get back this on my response json :</p>\n\n<pre><code>{\n  \"email\": [\n    \"is already taken\"\n  ]\n}\n</code></pre>\n\n<blockquote>\n  <p>but I get a type of error like com.android.volley.ClientError</p>\n</blockquote>\n\n<p>How can i get the json ?</p>\n\n<pre><code>val queue = Volley.newRequestQueue(this)\n\n    queue.add(accessTokenRequest)\n        }\n        val accessTokenRequest: JsonObjectRequest = object : JsonObjectRequest(\n            Method.POST, url, JSONObject(json),\n            Response.Listener&lt;JSONObject&gt; {response -&gt;\n                textView.text = \"Response is 0-0' : $response \\n et le truc envoy\u00e9 is $json\"\n            },  Response.ErrorListener {response -&gt;\n                textView.text = \" KO :( : $response \\n et le truc envoy\u00e9 is $json\" }) {\n            @Throws(AuthFailureError::class)\n            override fun getHeaders(): Map&lt;String, String&gt; {\n                var params: MutableMap&lt;String, String&gt; = super.getHeaders()\n                    params = HashMap()\n               // Log.d(\"TAGomago\", \"22$params 22\")\n\n                params[\"Content-Type\"] = \"application/json\"\n                params[\"Authorization\"] = \"Bearer c87627e164190330138103cdab884c8d982bed7df8d23c30562c3bbb93239f13\"\n                Log.d(\"TAGomago\", \"22$params 22\")\n\n                //textView.text = \" KO :( : \\n et le truc envoy\u00e9 is $json\"\n                return params\n            }\n        }\n        val queue = Volley.newRequestQueue(this)\n\n        queue.add(accessTokenRequest)\n</code></pre>\n"}, {"tags": ["spring-boot", "kotlin", "feign"], "answers": [{"tags": [], "owner": {"reputation": 112, "user_id": 7621505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abcea6d974c51f729e80ae9ed8bc6254?s=128&d=identicon&r=PG", "display_name": "Mohammad Kiani", "link": "https://stackoverflow.com/users/7621505/mohammad-kiani"}, "is_accepted": true, "score": 3, "last_activity_date": 1562494074, "last_edit_date": 1562494074, "creation_date": 1562487231, "answer_id": 56920409, "question_id": 56847094, "link": "https://stackoverflow.com/questions/56847094/how-to-set-a-custom-feign-requestinterceptor-for-specific-clients/56920409#56920409", "title": "How to set a custom Feign RequestInterceptor for specific clients?", "body": "<p>I found the solution.\nFor each FeignClient there is a <code>configuration</code> option which accepts an array of classes. The syntax of assigning a class to configuration in kotlin is as follow:</p>\n\n<pre><code>@FeignClient(\n        name = \"feign-client\",\n        path = \"/path\",\n        url = \"https://example.com\",\n        configuration = [FeignCustomConfiguration::class]\n)\ninterface FeignCustomClient {\n     ...\n}\n</code></pre>\n\n<p>With this assignment, each FeignClient has its own configuration and RequestInterceptor doesn't deal with other clients.</p>\n"}], "owner": {"reputation": 112, "user_id": 7621505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abcea6d974c51f729e80ae9ed8bc6254?s=128&d=identicon&r=PG", "display_name": "Mohammad Kiani", "link": "https://stackoverflow.com/users/7621505/mohammad-kiani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2530, "favorite_count": 0, "accepted_answer_id": 56920409, "answer_count": 1, "score": 2, "last_activity_date": 1562494074, "creation_date": 1562051360, "last_edit_date": 1562494035, "question_id": 56847094, "link": "https://stackoverflow.com/questions/56847094/how-to-set-a-custom-feign-requestinterceptor-for-specific-clients", "title": "How to set a custom Feign RequestInterceptor for specific clients?", "body": "<p>I need to add custom Authorization header to some new feign clients. So I write an RequestInterceptor and it worked but the point is I don't want this custom RequestInterceptor affect my old clients. I tried to filter using template.url() method but it doesn't give me the entire url of the request and it only contains the client method url (not url and path which is announced above the client class).\nMy Question is that how can I target the interceptor?</p>\n\n<p>This is my configuration:</p>\n\n<pre><code>@Configuration\nopen class FeignCustomConfiguration {\n\n    private fun generateToken(): String { ... }\n\n    @Bean\n    open fun requestInterceptor(): RequestInterceptor {\n        return RequestInterceptor {\n            it.header(\"Authorization\", generateToken())\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "radio-button", "radio-group"], "answers": [{"comments": [{"owner": {"reputation": 478, "user_id": 9305386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f5e740de58a68ce2ea57327231ae74e?s=128&d=identicon&r=PG", "display_name": "Tarun Kumar", "link": "https://stackoverflow.com/users/9305386/tarun-kumar"}, "edited": false, "score": 0, "creation_date": 1562052979, "post_id": 56847202, "comment_id": 100245711, "body": "nope. It is checking the radio button again and again. As a result the bottom sheet is also opening again"}, {"owner": {"reputation": 2463, "user_id": 5773044, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/c01ee1c1b1d6a3f7baafe54c92ce1e18?s=128&d=identicon&r=PG&f=1", "display_name": "Anupam", "link": "https://stackoverflow.com/users/5773044/anupam"}, "reply_to_user": {"reputation": 478, "user_id": 9305386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f5e740de58a68ce2ea57327231ae74e?s=128&d=identicon&r=PG", "display_name": "Tarun Kumar", "link": "https://stackoverflow.com/users/9305386/tarun-kumar"}, "edited": false, "score": 0, "creation_date": 1562053158, "post_id": 56847202, "comment_id": 100245798, "body": "Check which radio button is checked. You can put an if condition. Based on that, call your BootomSheet"}, {"owner": {"reputation": 2463, "user_id": 5773044, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/c01ee1c1b1d6a3f7baafe54c92ce1e18?s=128&d=identicon&r=PG&f=1", "display_name": "Anupam", "link": "https://stackoverflow.com/users/5773044/anupam"}, "reply_to_user": {"reputation": 478, "user_id": 9305386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f5e740de58a68ce2ea57327231ae74e?s=128&d=identicon&r=PG", "display_name": "Tarun Kumar", "link": "https://stackoverflow.com/users/9305386/tarun-kumar"}, "edited": false, "score": 0, "creation_date": 1562053197, "post_id": 56847202, "comment_id": 100245814, "body": "I have also done the same thing for braintree payments like you. It works"}, {"owner": {"reputation": 2463, "user_id": 5773044, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/c01ee1c1b1d6a3f7baafe54c92ce1e18?s=128&d=identicon&r=PG&f=1", "display_name": "Anupam", "link": "https://stackoverflow.com/users/5773044/anupam"}, "reply_to_user": {"reputation": 478, "user_id": 9305386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f5e740de58a68ce2ea57327231ae74e?s=128&d=identicon&r=PG", "display_name": "Tarun Kumar", "link": "https://stackoverflow.com/users/9305386/tarun-kumar"}, "edited": false, "score": 0, "creation_date": 1562053222, "post_id": 56847202, "comment_id": 100245825, "body": "You might be missing something"}, {"owner": {"reputation": 478, "user_id": 9305386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f5e740de58a68ce2ea57327231ae74e?s=128&d=identicon&r=PG", "display_name": "Tarun Kumar", "link": "https://stackoverflow.com/users/9305386/tarun-kumar"}, "edited": false, "score": 0, "creation_date": 1562057125, "post_id": 56847202, "comment_id": 100247762, "body": "I have updated the question with the check change listener code. can you have a look."}, {"owner": {"reputation": 2463, "user_id": 5773044, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/c01ee1c1b1d6a3f7baafe54c92ce1e18?s=128&d=identicon&r=PG&f=1", "display_name": "Anupam", "link": "https://stackoverflow.com/users/5773044/anupam"}, "reply_to_user": {"reputation": 478, "user_id": 9305386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f5e740de58a68ce2ea57327231ae74e?s=128&d=identicon&r=PG", "display_name": "Tarun Kumar", "link": "https://stackoverflow.com/users/9305386/tarun-kumar"}, "edited": false, "score": 0, "creation_date": 1562057182, "post_id": 56847202, "comment_id": 100247794, "body": "Sure. Checking."}, {"owner": {"reputation": 478, "user_id": 9305386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f5e740de58a68ce2ea57327231ae74e?s=128&d=identicon&r=PG", "display_name": "Tarun Kumar", "link": "https://stackoverflow.com/users/9305386/tarun-kumar"}, "edited": false, "score": 0, "creation_date": 1562064707, "post_id": 56847202, "comment_id": 100251806, "body": "actually buddy this is not the answer, the answer is that you have to call radiogroup.clearCheck() instead of radiobutton.isChecked = false. However, upvoted for the help :)"}, {"owner": {"reputation": 2463, "user_id": 5773044, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/c01ee1c1b1d6a3f7baafe54c92ce1e18?s=128&d=identicon&r=PG&f=1", "display_name": "Anupam", "link": "https://stackoverflow.com/users/5773044/anupam"}, "reply_to_user": {"reputation": 478, "user_id": 9305386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f5e740de58a68ce2ea57327231ae74e?s=128&d=identicon&r=PG", "display_name": "Tarun Kumar", "link": "https://stackoverflow.com/users/9305386/tarun-kumar"}, "edited": false, "score": 0, "creation_date": 1562065626, "post_id": 56847202, "comment_id": 100252285, "body": "Couldn&#39;t understand your exact problem as your question was too complicated to understand. But the correct way to get radiobutton checked is to get a changedlistener. Anyways,  thanks for the vote"}], "tags": [], "owner": {"reputation": 2463, "user_id": 5773044, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/c01ee1c1b1d6a3f7baafe54c92ce1e18?s=128&d=identicon&r=PG&f=1", "display_name": "Anupam", "link": "https://stackoverflow.com/users/5773044/anupam"}, "is_accepted": false, "score": 2, "last_activity_date": 1562051776, "creation_date": 1562051776, "answer_id": 56847202, "question_id": 56847074, "link": "https://stackoverflow.com/questions/56847074/check-radio-button-again-in-radio-group-android/56847202#56847202", "title": "check radio button again in radio group android", "body": "<p>You have to take the id of the Radio Group and use radio group checkedchangedlistener like this - </p>\n\n<pre><code>val checkedRadioButton = group?.findViewById(group.checkedRadioButtonId) as? RadioButton\n        checkedRadioButton?.let {\n\n            if (checkedRadioButton.isChecked)\n                Toast.makeText(applicationContext, \"RadioGroup: ${group?.contentDescription} RadioButton: ${checkedRadioButton?.text}\", Toast.LENGTH_LONG).show()\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 478, "user_id": 9305386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f5e740de58a68ce2ea57327231ae74e?s=128&d=identicon&r=PG", "display_name": "Tarun Kumar", "link": "https://stackoverflow.com/users/9305386/tarun-kumar"}, "is_accepted": true, "score": 2, "last_activity_date": 1565353546, "last_edit_date": 1565353546, "creation_date": 1562059514, "answer_id": 56849262, "question_id": 56847074, "link": "https://stackoverflow.com/questions/56847074/check-radio-button-again-in-radio-group-android/56849262#56849262", "title": "check radio button again in radio group android", "body": "<p>the issue is with  <code>rbDebitCard.isChecked = false</code>\nI replaced this with <code>rgPayment.clearCheck()</code>.</p>\n\n<p>With this i think in a radiogroup some check must be maintained by the radio group also which is independent of the check assigned to a radio button manually.</p>\n\n<p>However, this thing solved the issue :)</p>\n"}], "owner": {"reputation": 478, "user_id": 9305386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f5e740de58a68ce2ea57327231ae74e?s=128&d=identicon&r=PG", "display_name": "Tarun Kumar", "link": "https://stackoverflow.com/users/9305386/tarun-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 56849262, "answer_count": 2, "score": 1, "last_activity_date": 1565353546, "creation_date": 1562051284, "last_edit_date": 1562057066, "question_id": 56847074, "link": "https://stackoverflow.com/questions/56847074/check-radio-button-again-in-radio-group-android", "title": "check radio button again in radio group android", "body": "<p>I am using a radio group containing two radio buttons like below:</p>\n\n<pre><code>  &lt;RadioGroup\n                    android:layout_width=\"match_parent\"\n                    android:layout_marginStart=\"@dimen/dp_16\"\n                    android:layout_marginEnd=\"@dimen/dp_16\"\n                    android:layout_height=\"wrap_content\"\n                    app:layout_constraintTop_toTopOf=\"parent\"&gt;\n\n\n                &lt;RadioButton\n                        android:id=\"@+id/rbDebitCard\"\n                        android:fontFamily=\"@font/sf_ui_regular\"\n                        android:textColor=\"@color/txt_color_heading\"\n                        android:layout_width=\"match_parent\"\n                        android:drawableEnd=\"@drawable/debit_card\"\n                        android:layout_height=\"wrap_content\"\n                        android:layout_weight=\"1\"\n                        android:text=\"Pay with Card\"/&gt;\n\n\n                &lt;View\n                        android:layout_width=\"match_parent\"\n                        android:layout_height=\"@dimen/dp_1\"\n                        android:layout_marginTop=\"@dimen/dp_16\"\n                        android:background=\"@color/divider_line\"/&gt;\n\n                &lt;RadioButton\n                        android:id=\"@+id/rbCash\"\n                        android:fontFamily=\"@font/sf_ui_regular\"\n                        android:textColor=\"@color/txt_color_heading\"\n                        android:layout_width=\"match_parent\"\n                        android:layout_height=\"wrap_content\"\n                        android:layout_weight=\"1\"\n                        android:checked=\"true\"\n                        android:drawableEnd=\"@drawable/cash\"\n                        android:layout_marginTop=\"@dimen/dp_16\"\n                        android:text=\"Cash\"/&gt;\n\n            &lt;/RadioGroup&gt;\n</code></pre>\n\n<p>In my kotlin code I am showing a bottom sheet when rbDebitCard is clicked and changing the check by ischecked=false when closing the bottom sheet.\nwhich perfectly unchecks the radio button.</p>\n\n<p>The issue is, when I am clicking on the same radio button again, it is not getting checked. However, the bottom sheet is opening.</p>\n\n<p>If i click on the other radio button(which obviously gets checked) and then again clicking on the first button then it is getting checked and opening the bottom sheet. But once again I close the bottom sheet and click on the radio button, it is not getting checked.</p>\n\n<p>For reference, below is the kotlin code:</p>\n\n<pre><code>//pay with card\n        rbDebitCard.setOnClickListener {\n            rbDebitCard.isChecked = true\n            paymentMode = \"Card\"\n            onBraintreeSubmit(clContainer)\n        }\n\n        //Cash\n        rbCash.setOnClickListener {\n            paymentMode = \"Cash\"\n        }\n\n override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\n    if (requestCode == BundleConstants.REQ_CODE_PAYMENT) {\n        if (resultCode == Activity.RESULT_OK) {\n            // use the result to update your UI and send the payment method nonce to your server\n            val result: DropInResult = data!!.getParcelableExtra(DropInResult.EXTRA_DROP_IN_RESULT)\n            Log.e(\"payment result nonce\", result.paymentMethodNonce?.nonce)\n\n            makePayment(result.paymentMethodNonce?.nonce)\n        } else if (resultCode == Activity.RESULT_CANCELED) {\n            // the user canceled\n            rbDebitCard.isChecked = false\n        } else {\n            // handle errors here, an exception may be available in\n            val error = data!!.getSerializableExtra(DropInActivity.EXTRA_ERROR) as Exception\n            rbDebitCard.isChecked = false\n        }\n    }\n}\n</code></pre>\n\n<p>adding the check change listener to the radio button looks like below:</p>\n\n<pre><code> rgPayment.setOnCheckedChangeListener { group, checkedId -&gt;\n        when(checkedId){\n            R.id.rbDebitCard-&gt;{\n                rbDebitCard.isChecked = true\n                paymentMode = \"Card\"\n                onBraintreeSubmit(clContainer)\n            }\n\n            R.id.rbCash-&gt;{\n                paymentMode = \"Cash\"\n            }\n        }\n    }\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-glide"], "comments": [{"owner": {"reputation": 2655, "user_id": 4649110, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qpll5.jpg?s=128&g=1", "display_name": "Basi", "link": "https://stackoverflow.com/users/4649110/basi"}, "edited": false, "score": 0, "creation_date": 1562046892, "post_id": 56845954, "comment_id": 100243054, "body": "<a href=\"https://bumptech.github.io/glide/doc/placeholders.html#error\" rel=\"nofollow noreferrer\">bumptech.github.io/glide/doc/placeholders.html#error</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2463, "user_id": 5773044, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/c01ee1c1b1d6a3f7baafe54c92ce1e18?s=128&d=identicon&r=PG&f=1", "display_name": "Anupam", "link": "https://stackoverflow.com/users/5773044/anupam"}, "is_accepted": false, "score": 1, "last_activity_date": 1562047822, "creation_date": 1562047822, "answer_id": 56846311, "question_id": 56845954, "link": "https://stackoverflow.com/questions/56845954/how-to-handle-image-not-found-error-in-glide-v4/56846311#56846311", "title": "How to handle image not found error in Glide V4", "body": "<p>You have to use submit() like this - </p>\n\n<pre><code>Glide.with(this@ProfileActivity).load(imageURL).into(imageview)\n              .listener(object : RequestListener&lt;Drawable&gt; {\n                  override fun onLoadFailed(e: GlideException?, model: Any?, target: Target&lt;Drawable&gt;?, isFirstResource: Boolean): Boolean {\n                      //TODO handle error images while loading photo\n                      return true\n                  }\n\n                  override fun onResourceReady(resource: Drawable?, model: Any?, target: Target&lt;Drawable&gt;?, dataSource: DataSource?, isFirstResource: Boolean): Boolean {\n                      //TODO use \"resource\" as the photo for your ImageView\n                      return true\n                  }\n\n              }).submit()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1968, "user_id": 2164363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C8NQn.png?s=128&g=1", "display_name": "Bach Vu", "link": "https://stackoverflow.com/users/2164363/bach-vu"}, "is_accepted": true, "score": 1, "last_activity_date": 1562048642, "creation_date": 1562048642, "answer_id": 56846465, "question_id": 56845954, "link": "https://stackoverflow.com/questions/56845954/how-to-handle-image-not-found-error-in-glide-v4/56846465#56846465", "title": "How to handle image not found error in Glide V4", "body": "<p>If you want to use <code>addDefaultRequestListener</code>, you need to use <code>Any</code> instead of <code>Drawable</code></p>\n\n<pre><code>Glide.with(context).addDefaultRequestListener(object : RequestListener&lt;Any&gt; {\n            override fun onLoadFailed(e: GlideException?, model: Any?, target: com.bumptech.glide.request.target.Target&lt;Any&gt;?, isFirstResource: Boolean): Boolean {\n            }\n\n            override fun onResourceReady(resource: Any?, model: Any?, target: com.bumptech.glide.request.target.Target&lt;Any&gt;?, dataSource: DataSource?, isFirstResource: Boolean): Boolean {\n            }\n\n        })\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13035, "user_id": 305135, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/cf9b63f6e0e2d709993723d9b9be79cf?s=128&d=identicon&r=PG", "display_name": "AVEbrahimi", "link": "https://stackoverflow.com/users/305135/avebrahimi"}, "edited": false, "score": 0, "creation_date": 1562051022, "post_id": 56846864, "comment_id": 100244764, "body": "No error drawable is not enough, I want to do something in case of 404 error."}, {"owner": {"reputation": 305, "user_id": 4544797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/365bed9c03091b0f222e148ee9ef07ab?s=128&d=identicon&r=PG", "display_name": "Abu Noman", "link": "https://stackoverflow.com/users/4544797/abu-noman"}, "reply_to_user": {"reputation": 13035, "user_id": 305135, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/cf9b63f6e0e2d709993723d9b9be79cf?s=128&d=identicon&r=PG", "display_name": "AVEbrahimi", "link": "https://stackoverflow.com/users/305135/avebrahimi"}, "edited": false, "score": 0, "creation_date": 1562051693, "post_id": 56846864, "comment_id": 100245049, "body": "Oh, then you can follow the answer given by @bach-vu :)"}], "tags": [], "owner": {"reputation": 305, "user_id": 4544797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/365bed9c03091b0f222e148ee9ef07ab?s=128&d=identicon&r=PG", "display_name": "Abu Noman", "link": "https://stackoverflow.com/users/4544797/abu-noman"}, "is_accepted": false, "score": 0, "last_activity_date": 1562050403, "creation_date": 1562050403, "answer_id": 56846864, "question_id": 56845954, "link": "https://stackoverflow.com/questions/56845954/how-to-handle-image-not-found-error-in-glide-v4/56846864#56846864", "title": "How to handle image not found error in Glide V4", "body": "<p>You can use Glide simply with <code>placeholder()</code> method. You can use the following method.</p>\n\n<pre><code>private fun fetchImage(imageView: ImageView, url: String){\n    Glide\n        .with(this)\n        .load(url)\n        .centerCrop()\n        .placeholder(R.drawable.ic_menu_camera)\n        .into(imageView)\n}\n</code></pre>\n"}], "owner": {"reputation": 13035, "user_id": 305135, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/cf9b63f6e0e2d709993723d9b9be79cf?s=128&d=identicon&r=PG", "display_name": "AVEbrahimi", "link": "https://stackoverflow.com/users/305135/avebrahimi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1406, "favorite_count": 0, "accepted_answer_id": 56846465, "answer_count": 3, "score": 1, "last_activity_date": 1562051052, "creation_date": 1562045717, "last_edit_date": 1562051052, "question_id": 56845954, "link": "https://stackoverflow.com/questions/56845954/how-to-handle-image-not-found-error-in-glide-v4", "title": "How to handle image not found error in Glide V4", "body": "<p>I tried to handle image not found (404) error in Glide, but it doesn't compile :</p>\n\n<pre><code>Glide.with(this@ImageActivity)\n                        .addDefaultRequestListener(\n                                object:RequestListener&lt;Drawable&gt; {\n                                    override fun onLoadFailed(e: GlideException?, model: Any?, target: Target&lt;Drawable&gt;?, isFirstResource: Boolean): Boolean {\n                                        TODO(\"not implemented\") //To change body of created functions use File | Settings | File Templates.\n                                    }\n\n                                    override fun onResourceReady(resource: Drawable?, model: Any?, target: Target&lt;Drawable&gt;?, dataSource: DataSource?, isFirstResource: Boolean): Boolean {\n                                        TODO(\"not implemented\") //To change body of created functions use File | Settings | File Templates.\n                                    }\n\n                                }\n\n                        )\n                        .load(imageURL).apply(requestOptions)\n                        .into(imageview)\n</code></pre>\n\n<p>But compiler raises this error on <strong>object:RequestListener</strong> :</p>\n\n<blockquote>\n  <p>Type mismatch: inferred type is  but\n  RequestListener! was expected</p>\n</blockquote>\n"}, {"tags": ["android", "kotlin", "broadcastreceiver", "alarmmanager", "android-pendingintent"], "comments": [{"owner": {"reputation": 378, "user_id": 7216511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d93c0377ea33c50eb96c151759dedc32?s=128&d=identicon&r=PG&f=1", "display_name": "PJain", "link": "https://stackoverflow.com/users/7216511/pjain"}, "edited": false, "score": 0, "creation_date": 1562045533, "post_id": 56845435, "comment_id": 100242628, "body": "you can implement features of AlarmManager using JobScheduler class which is improved after oreo version and very useful you can find the related document here <a href=\"https://developer.android.com/about/versions/oreo/background.html#broadcasts\" rel=\"nofollow noreferrer\">developer.android.com/about/versions/oreo/&hellip;</a>"}, {"owner": {"reputation": 349, "user_id": 4723116, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pirxqs0LURc/AAAAAAAAAAI/AAAAAAAAAk0/i0IxmzzdNBk/photo.jpg?sz=128", "display_name": "Saif", "link": "https://stackoverflow.com/users/4723116/saif"}, "reply_to_user": {"reputation": 378, "user_id": 7216511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d93c0377ea33c50eb96c151759dedc32?s=128&d=identicon&r=PG&f=1", "display_name": "PJain", "link": "https://stackoverflow.com/users/7216511/pjain"}, "edited": false, "score": 1, "creation_date": 1562045741, "post_id": 56845435, "comment_id": 100242685, "body": "Sorry JobSchedular has problems while in doze. check this <a href=\"https://developer.android.com/training/monitoring-device-state/doze-standby.html#restrictions\" rel=\"nofollow noreferrer\">developer.android.com/training/monitoring-device-state/&hellip;</a>"}, {"owner": {"reputation": 378, "user_id": 7216511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d93c0377ea33c50eb96c151759dedc32?s=128&d=identicon&r=PG&f=1", "display_name": "PJain", "link": "https://stackoverflow.com/users/7216511/pjain"}, "edited": false, "score": 0, "creation_date": 1562048428, "post_id": 56845435, "comment_id": 100243648, "body": "AlarmManager also impacted by doze. so far, you need to get a solution for doze mode. you can refer that here <a href=\"https://developer.android.com/training/scheduling/alarms#java\" rel=\"nofollow noreferrer\">developer.android.com/training/scheduling/alarms#java</a>"}, {"owner": {"reputation": 349, "user_id": 4723116, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pirxqs0LURc/AAAAAAAAAAI/AAAAAAAAAk0/i0IxmzzdNBk/photo.jpg?sz=128", "display_name": "Saif", "link": "https://stackoverflow.com/users/4723116/saif"}, "reply_to_user": {"reputation": 378, "user_id": 7216511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d93c0377ea33c50eb96c151759dedc32?s=128&d=identicon&r=PG&f=1", "display_name": "PJain", "link": "https://stackoverflow.com/users/7216511/pjain"}, "edited": false, "score": 0, "creation_date": 1562052213, "post_id": 56845435, "comment_id": 100245295, "body": "The things mentioned in it are already implemented. WakefulBroadcastReceiver handles the PARTIAL_WAKE_LOCK itself. but here im already getting this wake lock in receiver. I just need to ring a sound with a notification so service is also not required. Im doing it directly in receiver after getting wake lock of 30 seconds"}, {"owner": {"reputation": 84801, "user_id": 769265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37aa203d22f9e9a864b71eb7968d6b09?s=128&d=identicon&r=PG", "display_name": "David Wasser", "link": "https://stackoverflow.com/users/769265/david-wasser"}, "edited": false, "score": 0, "creation_date": 1562084089, "post_id": 56845435, "comment_id": 100263099, "body": "Have you tried this on different devices? Some manufatcturers are more restrictive about waking the device up."}, {"owner": {"reputation": 349, "user_id": 4723116, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pirxqs0LURc/AAAAAAAAAAI/AAAAAAAAAk0/i0IxmzzdNBk/photo.jpg?sz=128", "display_name": "Saif", "link": "https://stackoverflow.com/users/4723116/saif"}, "reply_to_user": {"reputation": 84801, "user_id": 769265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37aa203d22f9e9a864b71eb7968d6b09?s=128&d=identicon&r=PG", "display_name": "David Wasser", "link": "https://stackoverflow.com/users/769265/david-wasser"}, "edited": false, "score": 0, "creation_date": 1562086418, "post_id": 56845435, "comment_id": 100264165, "body": "@David Wasser Yes. It is working almost fine on my mobile but not on my client mobile. We both have same andorid version 9  (Pie). But he is having some huawei model and im having samsung j4+. But he says other alarms apps are working fine on his device but not my app."}, {"owner": {"reputation": 84801, "user_id": 769265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37aa203d22f9e9a864b71eb7968d6b09?s=128&d=identicon&r=PG", "display_name": "David Wasser", "link": "https://stackoverflow.com/users/769265/david-wasser"}, "edited": false, "score": 0, "creation_date": 1562177387, "post_id": 56845435, "comment_id": 100300145, "body": "Some manufacturers (Huawei included) have extra power-saving features that prevent apps from being launched by <code>AlarmManager</code> if they are not already running. You need to ensure that your app is added to the list of apps that are allowed to run in the background and allowed to launch when not already running. This list is in the Android settings under &quot;security&quot; or &quot;power management&quot;. Preinstalled and well-known apps (like Whatsapp) are already in the list, but other apps need to be manually added to the list."}], "owner": {"reputation": 349, "user_id": 4723116, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pirxqs0LURc/AAAAAAAAAAI/AAAAAAAAAk0/i0IxmzzdNBk/photo.jpg?sz=128", "display_name": "Saif", "link": "https://stackoverflow.com/users/4723116/saif"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 3, "answer_count": 0, "score": 2, "last_activity_date": 1562043233, "creation_date": 1562042525, "last_edit_date": 1562043233, "question_id": 56845435, "link": "https://stackoverflow.com/questions/56845435/alarmmanager-not-firing-broadcastreceiver-when-the-device-is-off-for-1-hour-or-m", "title": "Alarmmanager not firing broadcastreceiver when the device is off for 1 hour or more", "body": "<p>I am making an alarm clock app which rings an alarm at specific time. I am using AlarmManger with BroadcastReceiver. But it does not work sometimes when device is in sleep mode. But works perfectly when device is on and being used. Although im getting wakelock before firing alarm and using RTC_WAKEUP with AlarmManager but nothing helps. Please check my code below:</p>\n\n<p>Permission in AndroidManifest.xml</p>\n\n<pre><code>    &lt;uses-permission android:name=\"android.permission.WAKE_LOCK\"/&gt;\n</code></pre>\n\n<p>Receiver Registered in AndroidManifest.xml</p>\n\n<pre><code>    &lt;receiver android:name=\"com.packagename.receiver.AzanAlarm\"/&gt;\n</code></pre>\n\n<p>Function which im using to set alarm</p>\n\n<pre><code>fun setAzan(context: Context, reqCode: Int, offset: Long, pendingIntent: PendingIntent) {\n    if (offset &gt; 0) {\n        val alarmManager = context.getSystemService(Context.ALARM_SERVICE) as AlarmManager\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\n            alarmManager.setExactAndAllowWhileIdle(AlarmManager.RTC_WAKEUP, System.currentTimeMillis() + offset, pendingIntent)\n        }\n        else if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) {\n            alarmManager.setExact(AlarmManager.RTC_WAKEUP, System.currentTimeMillis() + offset, pendingIntent)\n        }\n        else {\n            alarmManager.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis() + offset, pendingIntent)\n        }\n    }\n}\n</code></pre>\n\n<p>Here is my broadcast receiver code</p>\n\n<pre><code>class AzanAlarm: BroadcastReceiver(){\n    override fun onReceive(context: Context, intent: Intent) {\n         val powerManager = context.getSystemService(Context.POWER_SERVICE) as PowerManager\n         val wakeLock = powerManager.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, \"MyAppName:Azan\")\n         wakeLock!!.acquire(30000) // timout after 30 seconds to play comp. azan\n         showAzanNotification()\n    }\n}\n</code></pre>\n\n<p>The alarm works and notification comes when device is awake. But does not work sometimes when device is off for a long time.</p>\n"}, {"tags": ["android", "xml", "android-studio", "kotlin"], "comments": [{"owner": {"reputation": 23192, "user_id": 2684, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Z9oZ0.jpg?s=128&g=1", "display_name": "Martin Marconcini", "link": "https://stackoverflow.com/users/2684/martin-marconcini"}, "edited": false, "score": 0, "creation_date": 1562067713, "post_id": 56845324, "comment_id": 100253376, "body": "It helps if you post your <i>relevant</i> section of the crash log, we don&#39;t really have any idea what&#39;s causing your app to crash."}, {"owner": {"reputation": 185, "user_id": 3376990, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/HZdtq.jpg?s=128&g=1", "display_name": "Kdaydin", "link": "https://stackoverflow.com/users/3376990/kdaydin"}, "edited": false, "score": 0, "creation_date": 1562068025, "post_id": 56845324, "comment_id": 100253534, "body": "try loading web page after view created."}], "answers": [{"comments": [{"owner": {"reputation": 185, "user_id": 3376990, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/HZdtq.jpg?s=128&g=1", "display_name": "Kdaydin", "link": "https://stackoverflow.com/users/3376990/kdaydin"}, "edited": false, "score": 0, "creation_date": 1562067947, "post_id": 56851634, "comment_id": 100253501, "body": "FrameLayout can hold more than one view but its not preffered. Its hard to organize them."}, {"owner": {"reputation": 23192, "user_id": 2684, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Z9oZ0.jpg?s=128&g=1", "display_name": "Martin Marconcini", "link": "https://stackoverflow.com/users/2684/martin-marconcini"}, "reply_to_user": {"reputation": 185, "user_id": 3376990, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/HZdtq.jpg?s=128&g=1", "display_name": "Kdaydin", "link": "https://stackoverflow.com/users/3376990/kdaydin"}, "edited": false, "score": 0, "creation_date": 1562068723, "post_id": 56851634, "comment_id": 100253915, "body": "I know what FrameLayout can do, but I&#39;m telling you to <i>not do that</i> because it&#39;s a very bad idea; why would you want to do something the documentation is telling you not to, and I quote: &quot;FrameLayout is designed to block out an area on the screen to display a single item. Generally, FrameLayout should be used to hold a single child view, because it can be difficult to organize child views in a way that&#39;s scalable to different screen sizes without the children overlapping each other. You can, however, add multiple children to a FrameLayout ...&quot; this is very inefficient (weights). Don&#39;t do it."}], "tags": [], "owner": {"reputation": 23192, "user_id": 2684, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Z9oZ0.jpg?s=128&g=1", "display_name": "Martin Marconcini", "link": "https://stackoverflow.com/users/2684/martin-marconcini"}, "is_accepted": false, "score": 0, "last_activity_date": 1562068952, "last_edit_date": 1562068952, "creation_date": 1562067627, "answer_id": 56851634, "question_id": 56845324, "link": "https://stackoverflow.com/questions/56845324/cannot-create-a-webview-inside-of-a-fragment/56851634#56851634", "title": "Cannot create a webview inside of a fragment", "body": "<p>Welcome to SO. </p>\n\n<p>You <strike>cannot</strike> should not have two children inside a FrameLayout <strike>(it can only have one)</strike> (it can handle more than one using weights -to avoid overlapping- but this is expensive as it requires multiple measure/layout passes, and also because there are better ways to overlap views or put more than one view in a ViewGroup).</p>\n\n<p>So replace your FrameLayout in your fragment with a <code>LinearLayout</code> or better yet, <code>ConstraintLayout</code>.</p>\n\n<p>The other problem is this snippet in your activity:</p>\n\n<pre><code>   &lt;FrameLayout\n            android:id=\"@+id/fragment_container\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"0dp\"\n            app:layout_constraintTop_toTopOf=\"parent\"\n            app:layout_constraintBottom_toTopOf=\"@+id/BottomTab\"\n            app:layout_constraintLeft_toLeftOf=\"parent\"\n            app:layout_constraintRight_toRightOf=\"parent\" app:layout_constraintHorizontal_bias=\"0.0\"\n            app:layout_constraintVertical_bias=\"1.0\"&gt;\n        &lt;WebView\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"match_parent\" android:id=\"@+id/webview\"/&gt;\n    &lt;/FrameLayout&gt;\n</code></pre>\n\n<p>Remove that webview from there, if that's the fragment container, you're going to put your fragment view in there, so you can't have two children (your fragment AND the webview). Your Fragment XML (above) already has the WebView. You don't need two at the same time.</p>\n\n<p>Additionally, replace all occurrences of <code>Left</code> and <code>Right</code> with <code>Start</code> and <code>End</code> respectively to better support RTL languages. E.g. <code>constraintRight_ToRightOf</code> should become <code>constraintEnd_ToEndOf</code> and so forth.</p>\n\n<p>I'd move all post-creation code to <code>onViewCreated(...)</code> though, to ensure your views have been created before you tell them to do things (like load a webpage).</p>\n"}], "owner": {"reputation": 1, "user_id": 10062208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c1e05dc999f8d92f075c4871bd69b64?s=128&d=identicon&r=PG&f=1", "display_name": "Sean Park", "link": "https://stackoverflow.com/users/10062208/sean-park"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 337, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562068952, "creation_date": 1562041613, "last_edit_date": 1562067329, "question_id": 56845324, "link": "https://stackoverflow.com/questions/56845324/cannot-create-a-webview-inside-of-a-fragment", "title": "Cannot create a webview inside of a fragment", "body": "<p>I've been trying to load a webview inside of a fragment, but none of the methods posted online have worked and causes my app to crash. I have a bottom navigation menu with 5 fragments, and I need each of them to load a different website in webview.</p>\n\n<p>Below is the kotlin file for one  of the fragments:</p>\n\n<pre><code>class DaumFrag : Fragment() {\n\n    override fun onCreateView(\n        inflater: LayoutInflater, container: ViewGroup?,\n        savedInstanceState: Bundle?\n    ): View? {\n        // Inflate the layout for this fragment\n        val v = inflater.inflate(R.layout.fragment_daum, container, false)\n        val mWebView: WebView? = view?.findViewById(R.id.webviewdaum) as WebView\n        mWebView?.loadUrl(\"https://www.daum.net/\")\n\n        val webSettings = mWebView?.getSettings()\n        webSettings?.setJavaScriptEnabled(true)\n\n        // Force links and redirects to open in the WebView instead of in a browser\n        mWebView?.setWebViewClient(WebViewClient())\n        return v\n    }\n\n\n}\n</code></pre>\n\n<p>Below is the xml for the fragment:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;FrameLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n             xmlns:tools=\"http://schemas.android.com/tools\"\n             android:layout_width=\"match_parent\"\n             android:layout_height=\"match_parent\"\n             tools:context=\".DaumFrag\"&gt;\n\n    &lt;TextView\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            android:text=\"daum\"/&gt;\n    &lt;WebView\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\" android:id=\"@+id/webviewdaum\"/&gt;\n\n&lt;/FrameLayout&gt;\n</code></pre>\n\n<p>Below is the xml for the mainactivity:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout\n        xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        xmlns:tools=\"http://schemas.android.com/tools\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\" xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n        tools:context=\".MainActivity\" android:orientation=\"horizontal\"&gt;\n\n    &lt;FrameLayout\n            android:id=\"@+id/fragment_container\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"0dp\"\n            app:layout_constraintTop_toTopOf=\"parent\"\n            app:layout_constraintBottom_toTopOf=\"@+id/BottomTab\"\n            app:layout_constraintLeft_toLeftOf=\"parent\"\n            app:layout_constraintRight_toRightOf=\"parent\" app:layout_constraintHorizontal_bias=\"0.0\"\n            app:layout_constraintVertical_bias=\"1.0\"&gt;\n        &lt;WebView\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"match_parent\" android:id=\"@+id/webview\"/&gt;\n    &lt;/FrameLayout&gt;\n\n    &lt;com.google.android.material.bottomnavigation.BottomNavigationView\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            app:menu=\"@menu/bottom_navigation\"\n            android:background=\"?android:attr/windowBackground\"\n            app:itemTextColor=\"#000000\"\n            app:labelVisibilityMode=\"labeled\"\n            android:layout_gravity=\"bottom\"\n            android:id=\"@+id/BottomTab\"\n            app:layout_constraintBottom_toBottomOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\"\n            app:layout_constraintVertical_bias=\"1.0\" android:layout_marginEnd=\"8dp\"\n            app:layout_constraintEnd_toEndOf=\"parent\" android:layout_marginRight=\"8dp\" android:layout_marginStart=\"8dp\"\n            app:layout_constraintStart_toStartOf=\"parent\" android:layout_marginLeft=\"8dp\"/&gt;\n\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n"}, {"tags": ["java", "kotlin", "request", "multipart"], "answers": [{"tags": [], "owner": {"reputation": 7390, "user_id": 7036419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66e3c04567f6d68a874c3007327c1373?s=128&d=identicon&r=PG", "display_name": "Maurice Perry", "link": "https://stackoverflow.com/users/7036419/maurice-perry"}, "is_accepted": true, "score": 1, "last_activity_date": 1562041897, "creation_date": 1562041897, "answer_id": 56845356, "question_id": 56845286, "link": "https://stackoverflow.com/questions/56845286/java-lang-arrayindexoutofboundsexception-size-2048-offset-0-bytecount-1/56845356#56845356", "title": "java.lang.ArrayIndexOutOfBoundsException: size=2048 offset=0 byteCount=-1", "body": "<p>Yes, this will happen when <code>read == -1</code>. You should test it before you use it:</p>\n\n<pre><code>        do {\n            read = `in`.read(buffer)\n            handler.post(ProgressUpdater(uploaded, fileLength!!))\n\n            if (read == -1) {\n                break\n            }\n\n            uploaded += read.toLong()\n            sink.write(buffer, 0, read)\n\n        } while (true)\n</code></pre>\n\n<p>Or perhaps:</p>\n\n<pre><code>        do {\n            read = `in`.read(buffer)\n\n            if (read == -1) {\n                break\n            }\n\n            uploaded += read.toLong()\n            sink.write(buffer, 0, read)\n            handler.post(ProgressUpdater(uploaded, fileLength!!))\n\n        } while (true)\n</code></pre>\n"}], "owner": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 351, "favorite_count": 0, "accepted_answer_id": 56845356, "answer_count": 1, "score": 0, "last_activity_date": 1562041897, "creation_date": 1562041363, "question_id": 56845286, "link": "https://stackoverflow.com/questions/56845286/java-lang-arrayindexoutofboundsexception-size-2048-offset-0-bytecount-1", "title": "java.lang.ArrayIndexOutOfBoundsException: size=2048 offset=0 byteCount=-1", "body": "<p>Why I will get this exception in <code>writeTo</code> function?</p>\n\n<blockquote>\n  <p>2019-07-02 12:17:03.525 13663-14248/com.zoinla.pegasus_work\n  E/AndroidRuntime: FATAL EXCEPTION: OkHttp Dispatcher\n      Process: com.xxx, PID: 13663\n      java.lang.ArrayIndexOutOfBoundsException: size=2048 offset=0 byteCount=-1\n          at okio.Util.checkOffsetAndCount(Util.java:30)\n          at okio.Buffer.write(Buffer.java:1096)\n          at okio.Buffer.write(Buffer.java:54)\n          at com.xxx.ProgressRequestBody.writeTo(ProgressRequestBody.kt:33)\n          at okhttp3.MultipartBody.writeOrCountBytes(MultipartBody.java:173)\n          at okhttp3.MultipartBody.writeTo(MultipartBody.java:114)\n          at okhttp3.logging.HttpLoggingInterceptor.intercept(HttpLoggingInterceptor.java:202)</p>\n</blockquote>\n\n<p><strong>ProgressRequestBody</strong></p>\n\n<pre><code>open class ProgressRequestBody(val file: File, val listener: UploadCallbacks) : RequestBody() {\n    override fun contentType(): MediaType? {\n        return MediaType.parse(\"$content_type/\")\n    }\n\n    override fun writeTo(sink: BufferedSink) {\n        val fileLength = file?.length()\n        val buffer = ByteArray(DEFAULT_BUFFER_SIZE)\n        val `in` = FileInputStream(file)\n        var uploaded: Long = 0\n\n        try {\n            var read: Int\n            val handler = Handler(Looper.getMainLooper())\n\n            do {\n                read = `in`.read(buffer)\n                handler.post(ProgressUpdater(uploaded, fileLength!!))\n\n                uploaded += read.toLong()\n                sink.write(buffer, 0, read)\n\n                if (read == -1) {\n                    break\n                }\n\n            } while (true)\n        } finally {\n            `in`.close()\n        }\n    }\n\n    override fun contentLength(): Long {\n        return file.length()\n    }\n\n    val content_type = \"\"\n\n    companion object {\n\n        val DEFAULT_BUFFER_SIZE = 2048\n\n    }\n\n    private inner class ProgressUpdater(private val mUploaded: Long, private val mTotal: Long) : Runnable {\n\n        override fun run() {\n            listener?.onProgressUpdate((100 * mUploaded / mTotal).toInt())\n        }\n    }\n\n    interface UploadCallbacks {\n        fun onProgressUpdate(percentage: Int)\n        fun onError()\n        fun onFinish()\n    }\n}\n</code></pre>\n\n<p>It pointed to this line</p>\n\n<pre><code>sink.write(buffer, 0, read)\n</code></pre>\n"}, {"tags": ["android", "android-studio", "kotlin", "android-calendar"], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 9804732, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-661NrKn-HhI/AAAAAAAAAAI/AAAAAAAAAYA/qjAWBFdC9nQ/photo.jpg?sz=128", "display_name": "P. Mohanta", "link": "https://stackoverflow.com/users/9804732/p-mohanta"}, "edited": false, "score": 0, "creation_date": 1562582893, "post_id": 56844905, "comment_id": 100407116, "body": "Thank you Taseer Ahmad bhai"}], "tags": [], "owner": {"reputation": 3113, "user_id": 9968399, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bsdzB.jpg?s=128&g=1", "display_name": "Taseer", "link": "https://stackoverflow.com/users/9968399/taseer"}, "is_accepted": true, "score": 1, "last_activity_date": 1562037853, "creation_date": 1562037853, "answer_id": 56844905, "question_id": 56844857, "link": "https://stackoverflow.com/questions/56844857/how-to-change-photo-according-to-current-month/56844905#56844905", "title": "How to change photo according to current month?", "body": "<pre><code>val calendar = Calendar.getInstance()\n\nwhen (calendar[Calendar.MONTH]) {\n  1 -&gt; //set first month picture\n  2 -&gt; //same\n  ...\n}\n</code></pre>\n\n<p>Get a calendar instance using <code>getInstance()</code>, this will return a calendar object initialized with current device time/date. You should get an instance in <code>onCreate()</code> of your activity/fragment and from there you check the current month and apply the image accordingly. </p>\n"}], "owner": {"reputation": 101, "user_id": 9804732, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-661NrKn-HhI/AAAAAAAAAAI/AAAAAAAAAYA/qjAWBFdC9nQ/photo.jpg?sz=128", "display_name": "P. Mohanta", "link": "https://stackoverflow.com/users/9804732/p-mohanta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 56844905, "answer_count": 1, "score": 0, "last_activity_date": 1562037853, "creation_date": 1562037416, "question_id": 56844857, "link": "https://stackoverflow.com/questions/56844857/how-to-change-photo-according-to-current-month", "title": "How to change photo according to current month?", "body": "<p>I want to build a Photo Calendar app.\nAs a beginner my question is -\nI draw 12 picture using Photoshop for 12 months, and placed in my app . But I need to know how to make them arranged so , </p>\n\n<p>when some one opened the app \nIf current month is January then 1st picture seen in home\nIf current month is February then 2nd picture seen in home\nAnd so on</p>\n\n<p>Thank You</p>\n"}, {"tags": ["android", "kotlin", "android-databinding", "android-snackbar"], "comments": [{"owner": {"reputation": 482, "user_id": 4659743, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DTuU0.jpg?s=128&g=1", "display_name": "Naitik Soni", "link": "https://stackoverflow.com/users/4659743/naitik-soni"}, "edited": false, "score": 0, "creation_date": 1562046375, "post_id": 56844394, "comment_id": 100242878, "body": "Can you try this? <code>showSnackbar(activity!!.window.decorView.rootView  ,\u00a0it.resourceId,\u00a0it.duration)</code>"}, {"owner": {"reputation": 73, "user_id": 3524706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/542bd078acb2dfd1037d00e4e67f24c8?s=128&d=identicon&r=PG&f=1", "display_name": "broot02", "link": "https://stackoverflow.com/users/3524706/broot02"}, "reply_to_user": {"reputation": 482, "user_id": 4659743, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DTuU0.jpg?s=128&g=1", "display_name": "Naitik Soni", "link": "https://stackoverflow.com/users/4659743/naitik-soni"}, "edited": false, "score": 0, "creation_date": 1562071654, "post_id": 56844394, "comment_id": 100255664, "body": "Yes, I can try this. Wouldn&#39;t this cause issues with the coordinator layout, meaning it would fix the visibility, but would no longer move the FAB up when the snackbar is displayed?"}, {"owner": {"reputation": 482, "user_id": 4659743, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DTuU0.jpg?s=128&g=1", "display_name": "Naitik Soni", "link": "https://stackoverflow.com/users/4659743/naitik-soni"}, "edited": false, "score": 0, "creation_date": 1562072975, "post_id": 56844394, "comment_id": 100256493, "body": "Not sure right now...but tell me the result after trying. we can work on it."}, {"owner": {"reputation": 73, "user_id": 3524706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/542bd078acb2dfd1037d00e4e67f24c8?s=128&d=identicon&r=PG&f=1", "display_name": "broot02", "link": "https://stackoverflow.com/users/3524706/broot02"}, "reply_to_user": {"reputation": 482, "user_id": 4659743, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DTuU0.jpg?s=128&g=1", "display_name": "Naitik Soni", "link": "https://stackoverflow.com/users/4659743/naitik-soni"}, "edited": false, "score": 0, "creation_date": 1562149369, "post_id": 56844394, "comment_id": 100284644, "body": "@NaitikSoni It worked to show the snackbar, but as I suspected it no longer shows above the bottom navigation bar, and below the FAB. This is not ideal."}, {"owner": {"reputation": 482, "user_id": 4659743, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DTuU0.jpg?s=128&g=1", "display_name": "Naitik Soni", "link": "https://stackoverflow.com/users/4659743/naitik-soni"}, "edited": false, "score": 0, "creation_date": 1562150824, "post_id": 56844394, "comment_id": 100285385, "body": "See this will help you. <a href=\"https://stackoverflow.com/questions/36332487/move-snackbar-above-the-bottom-bar\" title=\"move snackbar above the bottom bar\">stackoverflow.com/questions/36332487/&hellip;</a> and <a href=\"https://android.jlelse.eu/scroll-your-bottom-navigation-view-away-with-10-lines-of-code-346f1ed40e9e\" rel=\"nofollow noreferrer\">android.jlelse.eu/&hellip;</a>"}, {"owner": {"reputation": 482, "user_id": 4659743, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DTuU0.jpg?s=128&g=1", "display_name": "Naitik Soni", "link": "https://stackoverflow.com/users/4659743/naitik-soni"}, "edited": false, "score": 0, "creation_date": 1562158989, "post_id": 56844394, "comment_id": 100290253, "body": "Hey....add bottom margin to your recyclerview...it should work. add <code>android:layout_marginBottom=&quot;?attr&#47;actionBarSize&quot;</code> in xml. Snackbar is hiding behind recyclerview."}], "answers": [{"tags": [], "owner": {"reputation": 73, "user_id": 3524706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/542bd078acb2dfd1037d00e4e67f24c8?s=128&d=identicon&r=PG&f=1", "display_name": "broot02", "link": "https://stackoverflow.com/users/3524706/broot02"}, "is_accepted": true, "score": 0, "last_activity_date": 1562239528, "creation_date": 1562239528, "answer_id": 56886934, "question_id": 56844394, "link": "https://stackoverflow.com/questions/56844394/android-snackbar-not-visible-in-fragment-coordinator-layout/56886934#56886934", "title": "Android - Snackbar not visible in fragment/coordinator layout", "body": "<p>I incrementally made changes, adding margins to the recycler view (they should probably be present regardless), it had no effect. The only change that had any effect was ensuring that the root view was the Coordinator Layout.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;androidx.coordinatorlayout.widget.CoordinatorLayout\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\" xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:id=\"@+id/task_coordinator_layout\"\n    tools:context=\"com.pomodorocentral.task.dashboard.TaskFragment\"\n    android:theme=\"@style/MyTheme.DayNight.NoActionBar\"\n    android:background=\"?android:windowBackground\"\n    android:layout_marginTop=\"50dp\"\n    android:layout_marginBottom=\"50dp\"&gt;\n&lt;androidx.appcompat.widget.Toolbar\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"?attr/actionBarSize\"\n        android:theme=\"@style/ToolBarStyle\"\n        app:popupTheme=\"@style/ToolBarStyle.Popup\"\n        android:id=\"@+id/task_toolbar\"\n        android:elevation=\"4dp\"\n        app:subtitle=\"Show Tasks\"&gt;\n    &lt;com.google.android.material.chip.ChipGroup\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:id=\"@+id/task_status_filter_group\"\n            android:visibility=\"visible\"\n            app:chipSpacing=\"4dp\"\n            android:layout_margin=\"16dp\"&gt;\n        &lt;com.google.android.material.chip.Chip\n                style=\"@style/CustomChip\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:text=\"@string/active_status_label\"\n                android:id=\"@+id/active_status_chip\"\n                app:checkedIconEnabled=\"true\"\n                app:checkedIcon=\"@drawable/ic_check_white_24dp\"\n                app:chipEndPadding=\"10dp\"\n                app:chipStartPadding=\"10dp\"\n                android:includeFontPadding=\"false\"\n                android:elegantTextHeight=\"false\"/&gt;\n        &lt;com.google.android.material.chip.Chip\n                style=\"@style/CustomChip\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:text=\"@string/completed_status_label\"\n                android:id=\"@+id/completed_status_chip\"\n                app:checkedIconEnabled=\"true\"\n                app:checkedIcon=\"@drawable/ic_check_white_24dp\"\n        /&gt;\n    &lt;/com.google.android.material.chip.ChipGroup&gt;\n&lt;/androidx.appcompat.widget.Toolbar&gt;\n&lt;LinearLayout\n        android:orientation=\"vertical\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:id=\"@+id/task_empty_view\"\n        android:paddingTop=\"70dp\"\n        android:paddingBottom=\"15dp\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintBottom_toTopOf=\"@+id/addTaskButton\"\n        app:layout_constraintTop_toTopOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        android:paddingLeft=\"8dp\"\n        android:paddingRight=\"8dp\"\n        app:layout_constraintHorizontal_bias=\"0.0\"\n        android:theme=\"@style/MyTheme.DayNight\"\n        android:visibility=\"invisible\"\n        android:layout_marginTop=\"50dp\"&gt;\n    &lt;TextView\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            tools:layout_editor_absoluteY=\"30dp\"\n            tools:layout_editor_absoluteX=\"121dp\"\n            android:id=\"@+id/task_empty_heading\"\n            tools:text=\"@string/task_empty_heading\"\n            android:textAppearance=\"@style/TextAppearance.MaterialComponents.Headline5\"\n            android:gravity=\"center\"\n            android:visibility=\"visible\"\n            android:text=\"@string/task_empty_heading\"\n    /&gt;\n    &lt;TextView\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"40dp\"\n            android:id=\"@+id/task_empty_text\"\n            android:textAppearance=\"@style/TextAppearance.MaterialComponents.Caption\"\n            tools:text=\"@string/task_empty_text\"\n            android:visibility=\"visible\"\n            android:text=\"@string/task_empty_text\"\n            android:paddingLeft=\"5dp\"\n            android:paddingRight=\"5dp\"\n            android:gravity=\"center_vertical|center\"/&gt;\n    &lt;ImageView\n            app:srcCompat=\"@drawable/ic_pomodoro_shrug\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"340dp\"\n            android:id=\"@+id/task_empty_image\"\n            android:scaleType=\"fitCenter\"\n            android:adjustViewBounds=\"true\"\n            android:cropToPadding=\"true\"/&gt;\n&lt;/LinearLayout&gt;\n&lt;androidx.recyclerview.widget.RecyclerView\n        android:layout_marginTop=\"?attr/actionBarSize\"\n        android:layout_marginBottom=\"?attr/actionBarSize\"\n        android:id=\"@+id/task_recycler_view\"\n        android:scrollbars=\"vertical\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"/&gt;\n&lt;com.google.android.material.floatingactionbutton.FloatingActionButton\n        app:srcCompat=\"@drawable/ic_add_black_24dp\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:clickable=\"true\"\n        android:id=\"@+id/addTaskButton\"\n        android:layout_gravity=\"end|bottom\"\n        android:focusable=\"true\"\n        android:layout_margin=\"16dp\"/&gt;\n&lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;\n</code></pre>\n\n<p>After doing this everything worked as expected. I wish I knew the true reason why, but quite frankly I've burnt far too much time trying to get this fixed. In a nutshell the fix was removing the layout(databinding) from this view, which is fine for this view, as the databinding had no real use here.</p>\n"}], "owner": {"reputation": 73, "user_id": 3524706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/542bd078acb2dfd1037d00e4e67f24c8?s=128&d=identicon&r=PG&f=1", "display_name": "broot02", "link": "https://stackoverflow.com/users/3524706/broot02"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 659, "favorite_count": 1, "accepted_answer_id": 56886934, "answer_count": 1, "score": 0, "last_activity_date": 1562239792, "creation_date": 1562032972, "last_edit_date": 1562239792, "question_id": 56844394, "link": "https://stackoverflow.com/questions/56844394/android-snackbar-not-visible-in-fragment-coordinator-layout", "title": "Android - Snackbar not visible in fragment/coordinator layout", "body": "<p>I am attempting to display a Snackbar but is not visible within the fragment, it can find the coordinator layout as evidenced by the FAB moving up (see screenshots below), but it is seemingly displaying behind the view.</p>\n\n<p>Basically what happens is when a task is added, a message is sent back in the bundle to the dashboard fragment at which point it would be displayed.</p>\n\n<p><em>Keep in mind that snackbar messages are displayed in this same manner throughout the application without issue.</em></p>\n\n<p><a href=\"https://i.stack.imgur.com/Wirjq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Wirjq.png\" alt=\"Empty Dashboard No Tasks Found\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/vcO3u.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vcO3u.png\" alt=\"After task is added, snackbar needs to be displayed\"></a></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;layout xmlns:app=\"http://schemas.android.com/apk/res-auto\" \n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"&gt;\n&lt;data&gt;\n    &lt;variable name=\"taskViewModel\" type=\"com.pomodorocentral.task.dashboard.TaskViewModel\"/&gt;\n&lt;/data&gt;\n&lt;androidx.coordinatorlayout.widget.CoordinatorLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:id=\"@+id/task_coordinator_layout\"\n        tools:context=\"com.pomodorocentral.task.dashboard.TaskFragment\"\n        android:theme=\"@style/MyTheme.DayNight.NoActionBar\"\n        android:background=\"?android:windowBackground\"\n        android:layout_marginTop=\"50dp\"\n        android:layout_marginBottom=\"50dp\"&gt;\n    &lt;androidx.appcompat.widget.Toolbar\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"?attr/actionBarSize\"\n            android:theme=\"@style/ToolBarStyle\"\n            app:popupTheme=\"@style/ToolBarStyle.Popup\"\n            android:id=\"@+id/task_toolbar\"\n            android:elevation=\"4dp\"\n            app:subtitle=\"Show Tasks\"\n            android:layout_marginTop=\"50dp\"&gt;\n        &lt;com.google.android.material.chip.ChipGroup\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:id=\"@+id/task_status_filter_group\"\n                android:visibility=\"visible\"\n                app:chipSpacing=\"4dp\"\n                android:layout_margin=\"16dp\"&gt;\n            &lt;com.google.android.material.chip.Chip\n                    style=\"@style/CustomChip\"\n                    android:layout_width=\"wrap_content\"\n                    android:layout_height=\"wrap_content\"\n                    android:text=\"@string/active_status_label\"\n                    android:id=\"@+id/active_status_chip\"\n                    app:checkedIconEnabled=\"true\"\n                    app:checkedIcon=\"@drawable/ic_check_white_24dp\"\n                    app:chipEndPadding=\"10dp\"\n                    app:chipStartPadding=\"10dp\"\n                    android:includeFontPadding=\"false\"\n                    android:elegantTextHeight=\"false\"/&gt;\n            &lt;com.google.android.material.chip.Chip\n                    style=\"@style/CustomChip\"\n                    android:layout_width=\"wrap_content\"\n                    android:layout_height=\"wrap_content\"\n                    android:text=\"@string/completed_status_label\"\n                    android:id=\"@+id/completed_status_chip\"\n                    app:checkedIconEnabled=\"true\"\n                    app:checkedIcon=\"@drawable/ic_check_white_24dp\"\n            /&gt;\n        &lt;/com.google.android.material.chip.ChipGroup&gt;\n    &lt;/androidx.appcompat.widget.Toolbar&gt;\n    &lt;LinearLayout\n            android:orientation=\"vertical\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            android:id=\"@+id/task_empty_view\"\n            android:paddingTop=\"70dp\"\n            android:paddingBottom=\"15dp\"\n            app:layout_constraintEnd_toEndOf=\"parent\"\n            app:layout_constraintBottom_toTopOf=\"@+id/addTaskButton\"\n            app:layout_constraintTop_toTopOf=\"parent\"\n            app:layout_constraintStart_toStartOf=\"parent\"\n            android:paddingLeft=\"8dp\"\n            android:paddingRight=\"8dp\"\n            app:layout_constraintHorizontal_bias=\"0.0\"\n            android:theme=\"@style/MyTheme.DayNight\"\n            android:visibility=\"invisible\"\n            android:layout_marginTop=\"50dp\"&gt;\n        &lt;TextView\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"\n                tools:layout_editor_absoluteY=\"30dp\"\n                tools:layout_editor_absoluteX=\"121dp\"\n                android:id=\"@+id/task_empty_heading\"\n                tools:text=\"@string/task_empty_heading\" android:textAppearance=\"@style/TextAppearance.MaterialComponents.Headline5\"\n                android:gravity=\"center\"\n                android:visibility=\"visible\"\n                android:text=\"@string/task_empty_heading\"\n        /&gt;\n        &lt;TextView\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"40dp\"\n                android:id=\"@+id/task_empty_text\"\n                android:textAppearance=\"@style/TextAppearance.MaterialComponents.Caption\"\n                tools:text=\"@string/task_empty_text\"\n                android:visibility=\"visible\"\n                android:text=\"@string/task_empty_text\"\n                android:paddingLeft=\"5dp\"\n                android:paddingRight=\"5dp\"\n                android:gravity=\"center_vertical|center\"/&gt;\n        &lt;ImageView\n                app:srcCompat=\"@drawable/ic_pomodoro_shrug\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"340dp\"\n                android:id=\"@+id/task_empty_image\"\n                android:scaleType=\"fitCenter\"\n                android:adjustViewBounds=\"true\"\n                android:cropToPadding=\"true\"/&gt;\n    &lt;/LinearLayout&gt;\n    &lt;LinearLayout\n            android:orientation=\"vertical\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            android:layout_marginTop=\"100dp\"&gt;\n        &lt;androidx.recyclerview.widget.RecyclerView\n                android:id=\"@+id/task_recycler_view\"\n                android:scrollbars=\"vertical\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"match_parent\"&gt;\n        &lt;/androidx.recyclerview.widget.RecyclerView&gt;\n    &lt;/LinearLayout&gt;\n    &lt;com.google.android.material.floatingactionbutton.FloatingActionButton\n            app:srcCompat=\"@drawable/ic_add_black_24dp\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"78dp\"\n            android:clickable=\"true\"\n            android:id=\"@+id/addTaskButton\"\n            android:layout_gravity=\"end|bottom\"\n            android:focusable=\"true\"\n            android:layout_marginBottom=\"70dp\"\n            android:layout_marginRight=\"16dp\"/&gt;\n&lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;\n&lt;/layout&gt;\n</code></pre>\n\n<p><strong>Code for sending snackbar message to dashboard</strong></p>\n\n<pre><code>binding.taskViewModel?.task?.value?.let {\n    val bundle = Bundle()\n    bundle.putParcelable(\"message\", SnackbarMessage(R.string.new_task_save, Snackbar.LENGTH_SHORT))\n\n    if (binding.taskViewModel?.task?.value?.id == null || binding.taskViewModel?.task?.value?.id == 0) {\n        binding.taskViewModel?.create(it)\n        navigation.navigate(R.id.action_addTaskFragment_to_action_tasks, bundle)\n    } else {\n        binding.taskViewModel?.update(it)\n        navigation.navigate(R.id.action_editTaskFragment_to_action_tasks, bundle)\n    }\n}\n</code></pre>\n\n<p><strong>Code for displaying snackbar (onResume)</strong></p>\n\n<pre><code>arguments?.getParcelable&lt;SnackbarMessage&gt;(\"message\")?.let {\n    showSnackbar(task_coordinator_layout, it.resourceId, it.duration)\n    arguments?.remove(\"message\")\n}\n</code></pre>\n\n<p><strong>Extension Function which is called to display the snackbar</strong></p>\n\n<pre><code>fun Fragment.showSnackbar(view: CoordinatorLayout?, @StringRes resId: Int, \n@Snackbar.Duration duration: Int) {\n    view?.let {\n        Snackbar.make(it, it.resources.getString(resId), duration).show()\n    }\n}\n</code></pre>\n\n<p><strong>Thoughts?</strong></p>\n"}, {"tags": ["kotlin", "kotlinpoet"], "answers": [{"tags": [], "owner": {"reputation": 23, "user_id": 11726512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4943cbafc399d8bead9109f3ea83f72?s=128&d=identicon&r=PG&f=1", "display_name": "NinePoolNoRush120", "link": "https://stackoverflow.com/users/11726512/ninepoolnorush120"}, "is_accepted": true, "score": 0, "last_activity_date": 1588085246, "last_edit_date": 1588085246, "creation_date": 1562113656, "answer_id": 56861486, "question_id": 56843358, "link": "https://stackoverflow.com/questions/56843358/looking-for-correct-kotlinpoet-syntax-to-initialize-a-propertyspec-builder-for-i/56861486#56861486", "title": "Looking for correct kotlinpoet syntax to initialize a PropertySpec.Builder for IntArrays and Array&lt;String&gt; values", "body": "<p>Guessing there is a simpler way but this worked </p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>.initializer(\"%L\", buildCodeBlock {\n                                var lregex = \n    data.annotation.initialValue.asList().toString()\n                                lregex = lregex.replace(\"[\",\" \")\n                                lregex = lregex.replace(\"]\",\" \")\n                                add(\"intArrayOf($lregex)\")\n                            })\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 11726512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4943cbafc399d8bead9109f3ea83f72?s=128&d=identicon&r=PG&f=1", "display_name": "NinePoolNoRush120", "link": "https://stackoverflow.com/users/11726512/ninepoolnorush120"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 376, "favorite_count": 1, "accepted_answer_id": 56861486, "answer_count": 1, "score": 0, "last_activity_date": 1588085246, "creation_date": 1562021491, "question_id": 56843358, "link": "https://stackoverflow.com/questions/56843358/looking-for-correct-kotlinpoet-syntax-to-initialize-a-propertyspec-builder-for-i", "title": "Looking for correct kotlinpoet syntax to initialize a PropertySpec.Builder for IntArrays and Array&lt;String&gt; values", "body": "<p>Don't see the correct syntax for initializing the Array types to the values from an existing types from within the project, primitive types works fine and programmer defined classes </p>\n\n<pre><code>Target(\n    AnnotationTarget.FIELD,\n    AnnotationTarget.PROPERTY_GETTER,\n    AnnotationTarget.VALUE_PARAMETER,\n    AnnotationTarget.PROPERTY)\n    @Retention(AnnotationRetention.SOURCE)\n</code></pre>\n\n<p>annotation class ConfigurableIntArray(\n    val key: String,\n    val text: String,\n    val description: String,\n    val initialValue: IntArray\n)</p>\n\n<pre><code>Class BlockAnnotationTester2(@field:ConfigurableIntArray(\n    key = UIComponentSettings.MAXIMUM_LENGTH_KEY,\n    text = UIComponentSettings.MAXIMUM_LENGTH_TEXT,\n    description = UIComponentSettings.MAXIMUM_LENGTH_DESCRIPTION,\n    initialValue = [2]) \nval unusedIntArray: IntArray = intArrayOf(1, 2, 3, 4),\n\n for (data in memberDataIntArray)...`\naddProperty( \n                  PropertySpec.builder(TestAnnotationProcessor.INITIAL_VALUE, IntArray::class) \n\n                        .initializer(\"intArrayOf(${data.annotation.initialValue.asList()})\")\n                        .build()\n                ) \n   object Member_BlockAnnotationTester2UnusedIntArray {\n\n    const val KEY: String = \n    \"configurable_block_detail_ui_component_maximum_length\"\n\n    const val TEXT: String = \"Maximum length\"\n\n    var INITIAL_VALUE: IntArray = intArrayOf([2]) &lt;-- issue \n\nconst val DESCRIPTION: String = \"Maximum length of the corresponding UI \ncomponent\"\n}\n</code></pre>\n\n<p>Can only get it to initialize to static data in plain text literals or the first value</p>\n"}, {"tags": ["android", "kotlin", "view", "global"], "answers": [{"comments": [{"owner": {"reputation": 359, "user_id": 3195442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/n8OWO.png?s=128&g=1", "display_name": "Erwin van den Berg", "link": "https://stackoverflow.com/users/3195442/erwin-van-den-berg"}, "edited": false, "score": 1, "creation_date": 1562062482, "post_id": 56846340, "comment_id": 100250630, "body": "Thank you so much for your answer! It helped me out a lot. <a href=\"https://medium.com/mindorks/how-to-communicate-between-fragments-and-activity-using-viewmodel-ca733233a51c\" rel=\"nofollow noreferrer\">This medium article</a> also helped me set up my sharedviewmodel attached to the activity. Ironically, I already had an activity viewmodel ;&#39;)"}], "tags": [], "owner": {"reputation": 403, "user_id": 10378312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/773b6d95a297d1c7a9491ec1687c674f?s=128&d=identicon&r=PG&f=1", "display_name": "Ryujin", "link": "https://stackoverflow.com/users/10378312/ryujin"}, "is_accepted": true, "score": 1, "last_activity_date": 1562074055, "last_edit_date": 1562074055, "creation_date": 1562047955, "answer_id": 56846340, "question_id": 56843204, "link": "https://stackoverflow.com/questions/56843204/kotlin-global-activity-view-reference-to-use-in-fragments/56846340#56846340", "title": "kotlin global activity View reference to use in fragments", "body": "<p>Views shouldn't be accessed 'globally' liked that, try to think of Activities and Fragments as enclosed modules whose internal functionalities are hidden away and protected by public facing interfaces.</p>\n\n<p>Here's one approach that was recommended before shared ViewModels became a thing:</p>\n\n<p><a href=\"https://developer.android.com/training/basics/fragments/communicating\" rel=\"nofollow noreferrer\">https://developer.android.com/training/basics/fragments/communicating</a></p>\n\n<p>Basically you can have your Activity implement some kind of interface that represents the functionality you want to be accessible to the child fragments.   The fragments then access this by casting the Activity instance it has to a variable of that interface type.  This allows you to call that method directly in the Fragment.</p>\n\n<p>A better approach uses a shared ViewModel between the Activities and Fragments.  You can have the ViewModel expose observable fields or LiveData that can be set and observed by these Activities and Fragments.  For example you can have a field in the ViewModel that represents the state of that player.  Some user action in the Fragment can can set the value of that field and an observer in the Activity can trigger some behaviour in the player.</p>\n"}], "owner": {"reputation": 359, "user_id": 3195442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/n8OWO.png?s=128&g=1", "display_name": "Erwin van den Berg", "link": "https://stackoverflow.com/users/3195442/erwin-van-den-berg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 678, "favorite_count": 0, "accepted_answer_id": 56846340, "answer_count": 1, "score": 0, "last_activity_date": 1562074055, "creation_date": 1562020240, "question_id": 56843204, "link": "https://stackoverflow.com/questions/56843204/kotlin-global-activity-view-reference-to-use-in-fragments", "title": "kotlin global activity View reference to use in fragments", "body": "<p>I'm creating a podcast app with a single activity consisting of 2 elements:</p>\n\n<ul>\n<li>NavHostFragment</li>\n<li>ExoPlayerView (in this case just the PlayerControlView with Id exoplayer_view)</li>\n</ul>\n\n<p>I would like to set up a global variable with a reference to the exoplayer view, so I can use this variable within my fragments and attached viewmodels to play/stop/load audio. How would I implement this efficiently in kotlin?</p>\n\n<p>Right now, whenever I need the exoplayer within a fragment I recreate an variable like this: </p>\n\n<pre><code>var exoplayerView = (activity as MainActivity).exoplayer_view\n</code></pre>\n\n<p>By setting up a global variable in the activity, I don't have to do this again and again all over the app. This is also probably less memory exhaustive than creating another reference in every fragment/viewmodel.</p>\n\n<p>MainActivity:</p>\n\n<pre><code>...\nimport kotlinx.android.synthetic.main.activity_main.*\n\nclass MainActivity : AppCompatActivity() {\n\n    // global reference to use for all fragments, viewmodels and helper classes\n    var exoplayerView: PlayerControlView = exoplayer_view\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        ....\n    }\n\n    override fun onStop() {\n        super.onStop()\n        releasePlayer(exoplayer_view)\n    }\n}\n</code></pre>\n\n<p>Fragment:</p>\n\n<pre><code>class TracksFragment : Fragment() {\n\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?,\n                              savedInstanceState: Bundle?): View? {\n        ...\n        // make use of exoplayer reference within the fragment and/or viewmodel\n        // the exoplayerView variable can not be recognised here\n        if(exoplayerView.player==null) exoplayerView.player = viewModel.player\n        ...\n\n        return binding.root\n    }\n}\n</code></pre>\n\n<p>I thought by setting up the exoplayerView reference like this I would be able to reach it from my fragment. However it doesn't. How could I do something like this in a efficient way?</p>\n"}, {"tags": ["android", "kotlin", "dagger-2", "android-viewmodel"], "answers": [{"tags": [], "owner": {"reputation": 716, "user_id": 1527309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4d50I.jpg?s=128&g=1", "display_name": "luis_cortes", "link": "https://stackoverflow.com/users/1527309/luis-cortes"}, "is_accepted": false, "score": 1, "last_activity_date": 1562028188, "creation_date": 1562028188, "answer_id": 56843997, "question_id": 56843167, "link": "https://stackoverflow.com/questions/56843167/dagger-cant-inject-viewmodels-members/56843997#56843997", "title": "Dagger can&#39;t inject ViewModel&#39;s members", "body": "<p>From your stack trace:</p>\n\n<pre><code>test.ui.login.models.AccountViewModel cannot be provided without an @Inject constructor or an @Provides-annotated method\n</code></pre>\n\n<p>Your <code>AccountViewModel</code> does not have an <code>@Inject</code> constructor. </p>\n\n<p>Try this:</p>\n\n<pre><code>class AccountViewModel @Inject constructor(\n    private val gitHubApi: IGitHubApi, \n    app: Application) : AndroidViewModel(app) {\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2837, "user_id": 3677030, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/423439711c29bc18bf8db2799f1600f6?s=128&d=identicon&r=PG", "display_name": "Mohammed Rampurawala", "link": "https://stackoverflow.com/users/3677030/mohammed-rampurawala"}, "is_accepted": false, "score": 1, "last_activity_date": 1562321473, "last_edit_date": 1562321473, "creation_date": 1562121012, "answer_id": 56862146, "question_id": 56843167, "link": "https://stackoverflow.com/questions/56843167/dagger-cant-inject-viewmodels-members/56862146#56862146", "title": "Dagger can&#39;t inject ViewModel&#39;s members", "body": "<p>Firstly how Dagger will work in this scenario. You are binding the instance of  <code>AccountViewModel</code> through a parameter in <code>bindAccountViewModel</code>. However, now dagger will create the instance of <code>AccountViewModel</code> and it will get bind to a Map with key as <code>AccountViewModel::class</code>.</p>\n\n<p>Per your stack trace, Dagger gave you suggestion that you can use constructor injection or Provide your <code>ViewModel</code> using a Provides method in a module. From our current implementation, the second suggestion becomes prevalent since we are not creating the instance of AccountViewModel. Therefore you need to pass the IGithubApi as a constructor parameter in an <code>AccountViewModel</code> that will be a viable solution in this scenario.</p>\n\n<pre><code>class AccountViewModel @Inject constructor(private val api: IGithubAPI, app: Application) : AndroidViewModel(app)\n</code></pre>\n"}], "owner": {"reputation": 5795, "user_id": 3253896, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fa6d2f73d0c32ee94e11661d94857fc8?s=128&d=identicon&r=PG", "display_name": "\u0428\u0430\u0445", "link": "https://stackoverflow.com/users/3253896/%d0%a8%d0%b0%d1%85"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1562321473, "creation_date": 1562019941, "last_edit_date": 1562020503, "question_id": 56843167, "link": "https://stackoverflow.com/questions/56843167/dagger-cant-inject-viewmodels-members", "title": "Dagger can&#39;t inject ViewModel&#39;s members", "body": "<p>I implemented a custom <code>ViewModelFactory</code> and Dagger DI to <code>ViewModel</code>'s members were inject by Dagger automatically, all code is below:</p>\n\n<pre><code>class ViewModelFactory @Inject constructor(\n    private val creators: Map&lt;Class&lt;out ViewModel&gt;, @JvmSuppressWildcards Provider&lt;ViewModel&gt;&gt;\n): ViewModelProvider.Factory {\n\n    override fun &lt;T : ViewModel?&gt; create(modelClass: Class&lt;T&gt;): T {\n        val creator = creators[modelClass] ?: creators.entries.firstOrNull {\n            modelClass.isAssignableFrom(it.key)\n        }?.value ?: throw IllegalArgumentException(\"unknown model class $modelClass\")\n\n        try {\n            @Suppress(\"UNCHECKED_CAST\")\n            return creator.get() as T\n        } catch (e: Exception) {\n            throw RuntimeException(e)\n        }\n    }\n}\n</code></pre>\n\n<p>DI:  </p>\n\n<pre><code>@Suppress(\"unused\")\n@Module\nabstract class ViewModelModule {\n\n    @Binds\n    abstract fun bindViewModelFactory(factory: ViewModelFactory): ViewModelProvider.Factory\n}\n\n@Singleton\n@Component(\n    modules = [\n        AndroidInjectionModule::class,\n        AppModule::class,\n        ViewModelModule::class,\n        ActivityModule::class\n    ]\n)\ninterface AppComponent: AndroidInjector&lt;App&gt; {\n\n    @Component.Builder\n    abstract class Builder: AndroidInjector.Builder&lt;App&gt;()\n}\n\n@Suppress(\"unused\")\n@Module\nabstract class ActivityModule {\n    @ContributesAndroidInjector(\n        modules = [LoginFragmentBuilderModule::class, LoginViewModelModule::class]\n    )\n    abstract fun contributeLoginActivity(): LoginActivity\n\n    @ContributesAndroidInjector(modules = [])\n    abstract fun contributeMainActivity(): MainActivity\n}\n\n@Suppress(\"unused\")\n@Module\nabstract class LoginViewModelModule {\n\n    @Binds\n    @IntoMap\n    @ViewModelKey(AccountViewModel::class)\n    abstract fun bindAccountViewModel(accountViewModel: AccountViewModel): ViewModel\n}\n\n@Suppress(\"unused\")\n@Module\nabstract class LoginFragmentBuilderModule {\n\n    @ContributesAndroidInjector\n    abstract fun contributeAccountFragment(): AccountFragment\n}\n\n@Module\nobject AppModule {\n\n    @JvmStatic\n    @Provides\n    fun provideGitHubApi(retrofit: Retrofit): IGitHubApi {\n        return retrofit.create(IGitHubApi::class.java)\n    }\n\n    // A lot of other providers\n}\n</code></pre>\n\n<p><strong>AccountViewModel:</strong>:  </p>\n\n<pre><code>class AccountViewModel(app: Application) : AndroidViewModel(app) {\n\n    @Inject\n    lateinit var gitHubApi: IGitHubApi\n}\n</code></pre>\n\n<p>I wrote it using the <a href=\"https://blog.kotlin-academy.com/understanding-dagger-2-multibindings-viewmodel-8418eb372848\" rel=\"nofollow noreferrer\">tutorial</a> but I get an error on the compile time:  </p>\n\n<pre><code>e: /test/di/AppComponent.java:8: error: [Dagger/MissingBinding] [dagger.android.AndroidInjector.inject(T)] test.ui.login.models.AccountViewModel cannot be provided without an @Inject constructor or an @Provides-annotated method. This type supports members injection but cannot be implicitly provided.\npublic abstract interface AppComponent extends dagger.android.AndroidInjector&lt;com.contedevel.juke.App&gt; {\n                ^\n      test.ui.login.models.AccountViewModel is injected at\n          test.di.LoginViewModelModule.bindAccountViewModel(accountViewModel)\n\n      java.util.Map&lt;java.lang.Class&lt;? extends androidx.lifecycle.ViewModel&gt;,javax.inject.Provider&lt;androidx.lifecycle.ViewModel&gt;&gt; is injected at\n          test.di.ViewModelFactory.&lt;init&gt;(creators)\n      test.di.ViewModelFactory is injected at\n          test.di.ViewModelModule.bindViewModelFactory(factory)\n      androidx.lifecycle.ViewModelProvider.Factory is injected at\n          test.ui.login.AccountFragment.viewModelFactory\n      test.ui.login.AccountFragment is injected at\n          dagger.android.AndroidInjector.inject(T)\n  component path: test.di.AppComponent \u2192 test.di.ActivityModule_ContributeLoginActivity.LoginActivitySubcomponent \u2192 test.di.LoginFragmentBuilderModule_ContributeAccountFragment.AccountFragmentSubcomponent\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 105033, "user_id": 5260024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XxSHe.jpg?s=128&g=1", "display_name": "Jonas Wilms", "link": "https://stackoverflow.com/users/5260024/jonas-wilms"}, "edited": false, "score": 1, "creation_date": 1562016645, "post_id": 56842677, "comment_id": 100237203, "body": "@dyukha Okay, can you verify that (I&#39;m afk at the moment), but even if it would I would avoid the shadowing."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2956272"}, "edited": false, "score": 0, "creation_date": 1562016898, "post_id": 56842677, "comment_id": 100237283, "body": "Yeah, it works (can&#39;t insert the link). Anti-shadowing argument is valid."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2956272"}, "edited": false, "score": 0, "creation_date": 1562017097, "post_id": 56842677, "comment_id": 100237338, "body": "I&#39;m actually more interested in how one can avoid <code>Math.max(0, ...)</code> duplication. I guess it can be done on getter side, but can it be done during setting?"}, {"owner": {"reputation": 105033, "user_id": 5260024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XxSHe.jpg?s=128&g=1", "display_name": "Jonas Wilms", "link": "https://stackoverflow.com/users/5260024/jonas-wilms"}, "edited": false, "score": 1, "creation_date": 1562017133, "post_id": 56842677, "comment_id": 100237349, "body": "@dyukha <code>init { itemQty = _itemQty }</code>"}, {"owner": {"reputation": 35, "user_id": 4465348, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kNsEfzwhzx8/AAAAAAAAAAI/AAAAAAAAAAA/LuGdvQs5FIs/photo.jpg?sz=128", "display_name": "dbaddorf", "link": "https://stackoverflow.com/users/4465348/dbaddorf"}, "edited": false, "score": 0, "creation_date": 1562070133, "post_id": 56842677, "comment_id": 100254685, "body": "Thanks!  When I used the init I got this to work: <code>class ItemObject(var itemNumber: String = &quot;&quot;,              _itemQty: Int = 0) {      var qtyOrdered: Int = 0         get() = field         set(value: Int) =             if (value &gt;= 0) {                 field = value &#47;&#47; Don&#39;t want to go negative             } else {}      init { qtyOrdered = _qtyOrdered }</code>"}], "tags": [], "owner": {"reputation": 105033, "user_id": 5260024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XxSHe.jpg?s=128&g=1", "display_name": "Jonas Wilms", "link": "https://stackoverflow.com/users/5260024/jonas-wilms"}, "is_accepted": true, "score": 1, "last_activity_date": 1562017312, "last_edit_date": 1562017312, "creation_date": 1562016388, "answer_id": 56842677, "question_id": 56842640, "link": "https://stackoverflow.com/questions/56842640/how-to-have-a-custom-setter-with-a-named-argument-and-default/56842677#56842677", "title": "How to have a custom setter with a named argument and default", "body": "<p>Well, you initualize the real field to 0 and ignore the passed value ... Instead,  initialize the property with the passed constructor parameter:</p>\n\n<pre><code>  class Item(_itemQty: Int = 0) {\n     var itemQty: Int = Math.max(0, _itemQty)\n        set(v) { field = Math.max(0, v) }\n  }\n</code></pre>\n\n<p>(I used two different Identifiers to seperate the parameter and the property, as mentioned in the comments you can also use the same name for the property and the parameter [but be careful, that could add confusion]).</p>\n\n<p>You should also set the <a href=\"https://kotlinlang.org/docs/reference/properties.html#backing-fields\" rel=\"nofollow noreferrer\"><em>backing field</em></a>, not the setter itself which will end in endless recursion.</p>\n\n<p>If the setter is rather complicated and also needs to be applied to the initial value, then you could initialize the property, and execute the setter afterwards with the parameter:</p>\n\n<pre><code>  class Item(_itemQty: Int = 0) {\n     var itemQty: Int = 0\n        set(v) { field = Math.max(0, v) }\n\n     init { itemQty = _itemQty }\n  }\n</code></pre>\n\n<hr>\n\n<p>As an opinion-based side note, <code>item.itemQty</code> is not really descriptive, <code>item.quantity</code> would be way more readable.</p>\n"}, {"tags": [], "owner": {"reputation": 2850, "user_id": 6375041, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/251807625186795/picture?type=large", "display_name": "Sergei Rybalkin", "link": "https://stackoverflow.com/users/6375041/sergei-rybalkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1562018297, "last_edit_date": 1562018297, "creation_date": 1562017646, "answer_id": 56842852, "question_id": 56842640, "link": "https://stackoverflow.com/questions/56842640/how-to-have-a-custom-setter-with-a-named-argument-and-default/56842852#56842852", "title": "How to have a custom setter with a named argument and default", "body": "<p>There are different ways of preventing value going below zero.\nOne is unsigned types. Experimental at the moment. <code>UInt</code> in your case</p>\n\n<pre><code>class ItemObject(var itemNumber: String = \"\",\n                 var itemQty: UInt = 0u\n)\n</code></pre>\n\n<p>If you don't care about value overflow - it might be an option </p>\n\n<p>Another way is Property Delegation</p>\n\n<pre><code>class ItemObject(var itemNumber: String = \"\", itemQty: Int = 0) {\n    var itemQty: Int by PositiveDelegate(itemQty)\n}\n\nclass PositiveDelegate(private var prop: Int) {\n    operator fun getValue(thisRef: Any?, property: KProperty&lt;*&gt;): Int = prop\n\n    operator fun setValue(thisRef: Any?, property: KProperty&lt;*&gt;, value: Int) {\n        if (value &gt;= 0) prop = value\n    }\n}\n</code></pre>\n\n<p>Third one with custom setters is described in other answers.</p>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 4465348, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kNsEfzwhzx8/AAAAAAAAAAI/AAAAAAAAAAA/LuGdvQs5FIs/photo.jpg?sz=128", "display_name": "dbaddorf", "link": "https://stackoverflow.com/users/4465348/dbaddorf"}, "edited": false, "score": 0, "creation_date": 1562068971, "post_id": 56842991, "comment_id": 100254065, "body": "Did you mean to use the variable &quot;quantity&quot;?  If so, there doesn&#39;t appear to be any connection to my property itemQty.  And if I change this code to use &quot;qtyOrdered&quot; instead of &quot;quantity&quot;, then I get &quot;Conflicting declarations: public final var qtyOrdered: Int, public final var qtyOrdered: Int&quot;.   How am I using this wrong?"}], "tags": [], "owner": {"reputation": 12970, "user_id": 2741273, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71f8f37ebda905a8fffeb75e91b87a89?s=128&d=identicon&r=PG&f=1", "display_name": "Francesc", "link": "https://stackoverflow.com/users/2741273/francesc"}, "is_accepted": false, "score": 3, "last_activity_date": 1562019190, "last_edit_date": 1562019190, "creation_date": 1562018565, "answer_id": 56842991, "question_id": 56842640, "link": "https://stackoverflow.com/questions/56842640/how-to-have-a-custom-setter-with-a-named-argument-and-default/56842991#56842991", "title": "How to have a custom setter with a named argument and default", "body": "<p>This is what <code>vetoable</code> is for:</p>\n\n<pre><code>var quantity: Int by Delegates.vetoable(0) { _, _, new -&gt;\n    new &gt;= 0\n}\n</code></pre>\n\n<p>Return <code>true</code> to accept the value, return <code>false</code> to reject it.</p>\n"}], "owner": {"reputation": 35, "user_id": 4465348, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kNsEfzwhzx8/AAAAAAAAAAI/AAAAAAAAAAA/LuGdvQs5FIs/photo.jpg?sz=128", "display_name": "dbaddorf", "link": "https://stackoverflow.com/users/4465348/dbaddorf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "accepted_answer_id": 56842677, "answer_count": 3, "score": 0, "last_activity_date": 1562019190, "creation_date": 1562016177, "question_id": 56842640, "link": "https://stackoverflow.com/questions/56842640/how-to-have-a-custom-setter-with-a-named-argument-and-default", "title": "How to have a custom setter with a named argument and default", "body": "<p>I have a Kotlin class with named arguments and defaults for non-specified arguments.  I am trying to figure out how to create a custom setter for one argument and just can't seem to figure out what I'm doing wrong - although it's probably simple.  Here is a simplified version of the class:</p>\n\n<pre><code>class ItemObject(var itemNumber: String = \"\",\n             var itemQty: Int = 0)\n</code></pre>\n\n<p>I can use the properties of this class without issues itemObject.itemQty = itemObject.itemQty + 1 (accessing both the getter and setter). </p>\n\n<p>However, I'd like to make a custom setter to prevent the itemQty from going below zero.  So I've tried many variations on the following theme:</p>\n\n<pre><code>class ItemObject(var itemNumber: String = \"\",\n             itemQty: Int = 0) {\n\nvar itemQty: Int = 0\n    set(value: Int) =\n        if (value &gt;= 0) {\n            itemQty = value // Don't want to go negative\n        } else {\n        }\n</code></pre>\n\n<p>}</p>\n\n<p>This compiles without issue, but seems to keep defaulting itemQty to zero (or something like this - I haven't tracked it down).</p>\n\n<p>Can anyone point me in the correct direction?  I'd certainly appreciate it - this is my first Kotlin project and could use a bit of help. :)</p>\n"}]