[{"tags": ["java", "android", "kotlin", "android-manifest", "android-permissions"], "comments": [{"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1554334163, "post_id": 55505637, "comment_id": 97717290, "body": "Presumably, they are referring to <code>READ_MEDIA_AUDIO</code>, <code>READ_MEDIA_IMAGES</code>, and <code>READ_MEDIA_VIDEO</code>, as part of <a href=\"https://developer.android.com/preview/privacy/scoped-storage\" rel=\"nofollow noreferrer\">the scoped storage stuff</a>. In Q Beta 1, you needed to hold a role to obtain those permissions (e.g., <code>ROLE_GALLERY</code>). However, the documentation on roles has been removed, and I have not had an opportunity to test to see whether these are normal permissions, <code>dangerous</code> ones that we request at runtime, or if we still need to use the undocumented roles stuff."}, {"owner": {"reputation": 1525, "user_id": 3636806, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f5aee89c11a5184ae26918f1969a439d?s=128&d=identicon&r=PG", "display_name": "EAK TEAM", "link": "https://stackoverflow.com/users/3636806/eak-team"}, "reply_to_user": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1554334309, "post_id": 55505637, "comment_id": 97717318, "body": "@CommonsWare, i think they doesn&#39;t have added yet documentation for this and how to use in proper way. In my case i&#39;m using two permissions that it says to be deprecated :  <code>android.permission.READ_EXTERNAL_STORAGE</code> and <code>android.permission.WRITE_EXTERNAL_STORAGE</code>"}, {"owner": {"reputation": 1525, "user_id": 3636806, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f5aee89c11a5184ae26918f1969a439d?s=128&d=identicon&r=PG", "display_name": "EAK TEAM", "link": "https://stackoverflow.com/users/3636806/eak-team"}, "reply_to_user": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1554334393, "post_id": 55505637, "comment_id": 97717341, "body": "@CommonsWare, also i have tested in both <code>Q Beta 1</code> and <code>Q Beta 2</code>"}, {"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1554334425, "post_id": 55505637, "comment_id": 97717345, "body": "&quot;i think they doesn&#39;t have added yet documentation for this and how to use in proper way&quot; -- yes, it is a mess. Here is the first of five blog posts where I describe how Q Beta 1 worked: <a href=\"https://commonsware.com/blog/2019/03/25/death-external-storage-what-now.html\" rel=\"nofollow noreferrer\">commonsware.com/blog/2019/03/25/&hellip;</a>. I will need to make changes to adapt to Q Beta 2."}], "answers": [{"tags": [], "owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "is_accepted": false, "score": 1, "last_activity_date": 1554385668, "creation_date": 1554385668, "answer_id": 55517574, "question_id": 55505637, "link": "https://stackoverflow.com/questions/55505637/android-q-beta-strongly-typed-permission/55517574#55517574", "title": "Android Q Beta - Strongly-Typed Permission", "body": "<p>Quoting <a href=\"https://commonsware.com/blog/2019/04/04/random-musings-q-beta-2.html\" rel=\"nofollow noreferrer\">myself</a>:</p>\n\n<blockquote>\n  <p>There are now three \"strongly-typed\"\n  permissions for read access to external storage:</p>\n  \n  <ul>\n  <li><code>READ_MEDIA_AUDIO</code></li>\n  <li><code>READ_MEDIA_IMAGES</code></li>\n  <li><code>READ_MEDIA_VIDEO</code></li>\n  </ul>\n  \n  <p>These are <code>dangerous</code> permissions, so you will handle them the same as <code>READ_EXTERNAL_STORAGE</code>.\n  If your app has <code>targetSdkVersion</code> set to <code>Q</code>, you can request those three permissions,\n  and you get the same level of access that an app targeting API Level 28 or lower\n  gets from requesting <code>READ_EXTERNAL_STORAGE</code> on a Q device. That is still very limited\n  access, only through the <code>MediaStore</code>, but it is better than nothing.</p>\n</blockquote>\n\n<p>Note that this information is current for Q Beta 2, and future beta releases may change the story somewhat.</p>\n"}], "owner": {"reputation": 1525, "user_id": 3636806, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f5aee89c11a5184ae26918f1969a439d?s=128&d=identicon&r=PG", "display_name": "EAK TEAM", "link": "https://stackoverflow.com/users/3636806/eak-team"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 452, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554385668, "creation_date": 1554333393, "last_edit_date": 1554333588, "question_id": 55505637, "link": "https://stackoverflow.com/questions/55505637/android-q-beta-strongly-typed-permission", "title": "Android Q Beta - Strongly-Typed Permission", "body": "<p>I am testing my apps with <code>Android Q SDK</code> and after refactoring some things to be compatible on the new <code>API</code>, stucked in requesting some permissions. </p>\n\n<p>In the app manifest file i have declared for e.x </p>\n\n<p><code>&lt;uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" /&gt;</code></p>\n\n<p>When compiling with <code>Android Q SDK</code> it says that this is deprecated.\nAfter looking in documentation they say : </p>\n\n<blockquote>\n  <p>This constant was deprecated in API level Q. replaced by new\n  strongly-typed permission groups in Q.</p>\n</blockquote>\n\n<p>So, what is <code>strongly-typed permission</code> and how to declare in proper way and request from app code (java or kotlin)? Or they doesn't have provided any documentation for this yet and we should wait in following news ?</p>\n\n<p>P.s : <code>android.permission-group.STORAGE</code> is deprecated too.</p>\n"}, {"tags": ["java", "android", "kotlin", "dependency-injection", "dagger-2"], "comments": [{"owner": {"reputation": 5351, "user_id": 620138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55d02edc21d79a4015690af79f54678a?s=128&d=identicon&r=PG", "display_name": "Aaron He", "link": "https://stackoverflow.com/users/620138/aaron-he"}, "edited": false, "score": 0, "creation_date": 1554356866, "post_id": 55505396, "comment_id": 97722528, "body": "see <a href=\"https://stackoverflow.com/questions/44157859/component-which-dependent-from-other-components-with-different-scopes-component\" title=\"component which dependent from other components with different scopes component\">stackoverflow.com/questions/44157859/&hellip;</a>"}, {"owner": {"reputation": 5351, "user_id": 620138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55d02edc21d79a4015690af79f54678a?s=128&d=identicon&r=PG", "display_name": "Aaron He", "link": "https://stackoverflow.com/users/620138/aaron-he"}, "edited": false, "score": 0, "creation_date": 1554356888, "post_id": 55505396, "comment_id": 97722534, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/44157859/component-which-dependent-from-other-components-with-different-scopes-component\">Component which dependent from other components with different scopes (component hierarchies with different scopes)</a>"}, {"owner": {"reputation": 15397, "user_id": 3290339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMy5l.jpg?s=128&g=1", "display_name": "Onik", "link": "https://stackoverflow.com/users/3290339/onik"}, "edited": false, "score": 0, "creation_date": 1554362284, "post_id": 55505396, "comment_id": 97725145, "body": "&#39;LocalisationComponent&#39; and &#39;ConfigurationComponent&#39; should also be &#39;@Singleton&#39;."}, {"owner": {"reputation": 769, "user_id": 1466854, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d18bea5d7b5cdfd30b90d6b336857b5a?s=128&d=identicon&r=PG&f=1", "display_name": "JJack_", "link": "https://stackoverflow.com/users/1466854/jjack"}, "edited": false, "score": 0, "creation_date": 1554371647, "post_id": 55505396, "comment_id": 97730708, "body": "Thank you guys for your answer. Unfortunately the solutions proposed are not suitable for this situation :("}], "answers": [{"tags": [], "owner": {"reputation": 769, "user_id": 1466854, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d18bea5d7b5cdfd30b90d6b336857b5a?s=128&d=identicon&r=PG&f=1", "display_name": "JJack_", "link": "https://stackoverflow.com/users/1466854/jjack"}, "is_accepted": true, "score": 0, "last_activity_date": 1554420032, "last_edit_date": 1554420032, "creation_date": 1554419668, "answer_id": 55526182, "question_id": 55505396, "link": "https://stackoverflow.com/questions/55505396/dagger2-application-cant-depend-on-more-than-one-scoped-component/55526182#55526182", "title": "Dagger2 - application can&#39;t depend on more than one scoped component", "body": "<p>After a whole day of troubles, I found a solution suitable for my case. All the modules described (<code>Configuration_Module</code>, <code>Localisation_Module</code>) need to be used inside my Application module. </p>\n\n<p>So for the <code>@ApplicationScope</code> <code>@Module</code> called <code>ApplicationModule</code> I removed all the component dependecies.</p>\n\n<p>Application Component</p>\n\n<pre><code>@Component(modules = [ApplicationModule::class])\n@ApplicationScope\nabstract class ApplicationComponent {\n    abstract fun inject(mainActivity: MainActivity)\n}\n</code></pre>\n\n<p>Application Module</p>\n\n<pre><code>@Module\nclass ApplicationModule(private val localisationComponent: LocalisationComponent,\n                        private val configurationComponent: ConfigurationComponent) {\n    @Provides\n    @ApplicationScope\n    fun providesLocalisationRepository(): LocalisationRepository {\n        return localisationComponent.localisationRepository() // Provided by Localisation module with Dagger\n    }\n\n    @Provides\n    @ApplicationScope\n    fun providesConfigurationRepository(): ConfigurationRepository {\n        return configurationComponent.configurationRepository() // Provided by Configuration module with Dagger\n    }\n}\n</code></pre>\n\n<p>Finally my Main Application</p>\n\n<pre><code>class MainApplication : Application() {\n    lateinit var applicationComponent: ApplicationComponent\n\n    override fun onCreate() {\n        super.onCreate()\n        this.registerDependencies()\n    }\n\n    private fun registerDependencies() {\n        val coreModule = CoreModule(applicationContext)\n        val applicationModule = ApplicationModule(LocalisationModule(coreModule).localisationComponent,\n                                ConfigurationModule(coreModule).configurationComponent)\n\n        applicationComponent = DaggerApplicationComponent.builder()\n                .applicationModule(applicationModule)\n                .build()\n    }\n}\n</code></pre>\n\n<p>I pointed out that everything is working like a charm.</p>\n"}], "owner": {"reputation": 769, "user_id": 1466854, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d18bea5d7b5cdfd30b90d6b336857b5a?s=128&d=identicon&r=PG&f=1", "display_name": "JJack_", "link": "https://stackoverflow.com/users/1466854/jjack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 55526182, "answer_count": 1, "score": 1, "last_activity_date": 1554420032, "creation_date": 1554331399, "last_edit_date": 1554396536, "question_id": 55505396, "link": "https://stackoverflow.com/questions/55505396/dagger2-application-cant-depend-on-more-than-one-scoped-component", "title": "Dagger2 - application can&#39;t depend on more than one scoped component", "body": "<p><em>NB This question might be similar to other questions but It provides a better explanation with accessory code and aims to find a solution to the problem, the solutions provided in other questions are not suitable.</em></p>\n\n<p>Just a few days ago I started to develop an Android modular application. I use Dagger 2 in order to handle dependency injection and I'm currently facing a weird behaviour.\nI've got my main application module, and three other modules:</p>\n\n<ul>\n<li><code>Core_Module</code>: it exposes third-party libraries and storage layer.</li>\n<li><code>Localisation_Module</code>: it exposes a repository in order get localised informations.</li>\n<li><code>Configuration_Module</code>: it exposes a repository in order to get configuration parameters.</li>\n</ul>\n\n<p>Both <code>Configuration_Module</code> and <code>Localisation_Module</code> depend on <code>Core_Module</code>.</p>\n\n<p>CoreComponent:</p>\n\n<pre><code>@Singleton\n@Component(modules = [ApplicationModule::class, NetworkingModule::class, RepositoryModule::class])\ninterface CoreComponent {\n    @Named(\"retrofit\")\n    fun retrofit(): Retrofit\n\n    @Named(\"retrofitWithCache\")\n    fun retrofitWithCache(): Retrofit\n\n    fun storageRepository(): StorageRepository\n}\n</code></pre>\n\n<p>LocalisationComponent:</p>\n\n<pre><code>@Component(modules = [ServiceModule::class, RepositoryModule::class], dependencies = [CoreComponent::class])\n@LocalisationScope\ninterface LocalisationComponent {\n    fun localisationService(): LocalisationService\n    fun localisationRepository(): LocalisationRepository\n}\n</code></pre>\n\n<p>ConfigurationComponent</p>\n\n<pre><code>@Component(modules = [ServiceModule::class, RepositoryModule::class], dependencies = [CoreComponent::class])\n@ConfigurationScope\ninterface ConfigurationComponent {\n    fun configurationService(): ConfigurationService\n    fun configurationRepository(): ConfigurationRepository\n}\n</code></pre>\n\n<p>ApplicationComponent</p>\n\n<pre><code>@Component(dependencies = [LocalisationComponent::class, ConfigurationComponent::class])\n@ApplicationScope\nabstract class ApplicationComponent {\n    abstract fun inject(mainActivity: MainActivity)\n}\n</code></pre>\n\n<p>MainApplication</p>\n\n<pre><code>class MainApplication : Application() {\n    lateinit var applicationComponent: ApplicationComponent\n\n    override fun onCreate() {\n        super.onCreate()\n        this.registerDependencies()\n    }\n\n    private fun registerDependencies() {\n        val coreModule = CoreModule(applicationContext)\n        applicationComponent = DaggerApplicationComponent.builder()\n                .localisationComponent(LocalisationModule(coreModule).localisationComponent)\n                .configurationComponent(ConfigurationModule(coreModule).configurationComponent)\n                .build()\n    }\n}\n</code></pre>\n\n<p>I decided to design this architecture because I want to separate functionality into independent, interchangeable modules, so that each contains everything necessary to execute a specific functionality and export single modules to other applications.</p>\n\n<p><a href=\"https://i.stack.imgur.com/ZImow.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZImow.png\" alt=\"enter image description here\"></a></p>\n\n<p>Unfortunately I got an error saying that Dagger component is not allowed to depend on multiple scoped components.\nDoes anyone know how to face this kind of issue?</p>\n"}, {"tags": ["android", "database", "sqlite", "kotlin", "sqliteopenhelper"], "answers": [{"comments": [{"owner": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "edited": false, "score": 0, "creation_date": 1554331360, "post_id": 55505369, "comment_id": 97716623, "body": "Please be more specific with your answers. You&#39;ve clearly typed this quickly and it&#39;s not easy to follow. Initialse <code>DatabaseHandler</code> where?"}, {"owner": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "edited": false, "score": 0, "creation_date": 1554331436, "post_id": 55505369, "comment_id": 97716647, "body": "Do you mean - use <code>private val myList: DatabaseHandler</code> in the adapter?"}, {"owner": {"reputation": 130, "user_id": 4709949, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-jD_-C-TEHMw/AAAAAAAAAAI/AAAAAAAAADM/hqjXxIDdxdM/photo.jpg?sz=128", "display_name": "adil zakarya", "link": "https://stackoverflow.com/users/4709949/adil-zakarya"}, "reply_to_user": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "edited": false, "score": 0, "creation_date": 1554331714, "post_id": 55505369, "comment_id": 97716718, "body": "Initialse DatabaseHandler in the activity so you can access to the <b>getCompany</b> function and get the returned list"}, {"owner": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "edited": false, "score": 0, "creation_date": 1554332011, "post_id": 55505369, "comment_id": 97716792, "body": "I&#39;m not using an activity, I&#39;m using a fragment. Do you mean something like <code>val myList: DatabaseHandler</code>? I added that just before <code>onCreate</code> in the fragment."}, {"owner": {"reputation": 130, "user_id": 4709949, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-jD_-C-TEHMw/AAAAAAAAAAI/AAAAAAAAADM/hqjXxIDdxdM/photo.jpg?sz=128", "display_name": "adil zakarya", "link": "https://stackoverflow.com/users/4709949/adil-zakarya"}, "reply_to_user": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "edited": false, "score": 0, "creation_date": 1554332572, "post_id": 55505369, "comment_id": 97716945, "body": "A java code will look like this        // my recycle view       RecyclerView rv = (RecyclerView) findViewById(R.id.RVCAtegory);      LinearLayoutManager llm = new LinearLayoutManager(this);      rv.setLayoutManager(llm);       // My data helber       MDBHelper mDBHelper = new DbHelper(this);            // i geve the returned list to the list in the activity       List = mDBHelper.GetCompany();      // then i gave it to the adabter      Adabter_Category adapter = new Adabter_Category(CategoryList, inflater);      rv.setAdapter(adapter);"}, {"owner": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "edited": false, "score": 0, "creation_date": 1554333064, "post_id": 55505369, "comment_id": 97717059, "body": "Please move this code to your answer. I&#39;m struggling to read this and convert it to Kotlin."}, {"owner": {"reputation": 130, "user_id": 4709949, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-jD_-C-TEHMw/AAAAAAAAAAI/AAAAAAAAADM/hqjXxIDdxdM/photo.jpg?sz=128", "display_name": "adil zakarya", "link": "https://stackoverflow.com/users/4709949/adil-zakarya"}, "reply_to_user": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "edited": false, "score": 0, "creation_date": 1554333175, "post_id": 55505369, "comment_id": 97717081, "body": "@MacaronLover i did it ."}, {"owner": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "edited": false, "score": 0, "creation_date": 1554333438, "post_id": 55505369, "comment_id": 97717129, "body": "For <code>mDBHelper.GetCompany();</code> something needs to go in the parentheses (brackets)"}, {"owner": {"reputation": 130, "user_id": 4709949, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-jD_-C-TEHMw/AAAAAAAAAAI/AAAAAAAAADM/hqjXxIDdxdM/photo.jpg?sz=128", "display_name": "adil zakarya", "link": "https://stackoverflow.com/users/4709949/adil-zakarya"}, "reply_to_user": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "edited": false, "score": 0, "creation_date": 1554334002, "post_id": 55505369, "comment_id": 97717252, "body": "if you are selecting every thing then no need for parameters, i&#39;m using the same code on my app  <a href=\"https://play.google.com/store/apps/details?id=com.Chodo.BTSLyrics\" rel=\"nofollow noreferrer\">right here</a>"}, {"owner": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "edited": false, "score": 0, "creation_date": 1554334291, "post_id": 55505369, "comment_id": 97717314, "body": "The error in my question still exists. Doesn&#39;t <code>private val myList: MutableList&lt;Companies&gt;,</code> in the adapter need to change to something else?"}, {"owner": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "edited": false, "score": 0, "creation_date": 1554396711, "post_id": 55505369, "comment_id": 97746822, "body": "Please see my update code. I don&#39;t know where I&#39;ve gone wrong."}, {"owner": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "edited": false, "score": 0, "creation_date": 1554651546, "post_id": 55505369, "comment_id": 97821338, "body": "Please don&#39;t ignore my requests for help. I&#39;ve asked you nicely."}], "tags": [], "owner": {"reputation": 130, "user_id": 4709949, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-jD_-C-TEHMw/AAAAAAAAAAI/AAAAAAAAADM/hqjXxIDdxdM/photo.jpg?sz=128", "display_name": "adil zakarya", "link": "https://stackoverflow.com/users/4709949/adil-zakarya"}, "is_accepted": true, "score": 0, "last_activity_date": 1554651745, "last_edit_date": 1554651745, "creation_date": 1554331172, "answer_id": 55505369, "question_id": 55505160, "link": "https://stackoverflow.com/questions/55505160/how-to-use-sqlite-data-with-reusable-recyclerview-adapter/55505369#55505369", "title": "How to use SQLite data with reusable RecyclerView adapter", "body": "<ol>\n<li>Initialize <code>DatabaseHandler</code></li>\n<li>Make the <code>getCompany</code> function return a <strong>list</strong> or <strong>array</strong> of Company type</li>\n<li>Give it to the adapter to show it just the way you are doing manually. </li>\n</ol>\n\n<p>A Java code will look like this: </p>\n\n<pre><code> // My recycler view \n RecyclerView rv = (RecyclerView) findViewById(R.id.RVCategory);\n LinearLayoutManager llm = new LinearLayoutManager(this);\n rv.setLayoutManager(llm);\n\n // My data helper \n MDBHelper mDBHelper = new DbHelper(this);\n\n // I gave the returned list to the list in the `Activity` \n List = mDBHelper.GetCompany();\n\n // Then I gave it to the adapter\n Adapter_Category adapter = new Adapter_Category(CategoryList, inflater);\n rv.setAdapter(adapter);\n</code></pre>\n"}], "owner": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 55505369, "answer_count": 1, "score": -1, "last_activity_date": 1554651745, "creation_date": 1554329951, "question_id": 55505160, "link": "https://stackoverflow.com/questions/55505160/how-to-use-sqlite-data-with-reusable-recyclerview-adapter", "title": "How to use SQLite data with reusable RecyclerView adapter", "body": "<p>I'm looking to use some data that has been declared in a <code>Fragment</code> so it can be displayed as <code>RecyclerView</code> items. The problem is with <code>myList</code> and I understand that there is a type mismatch. However, I created the database table rows in the <code>onCreateView</code> method of the Fragment because I want to use the same <code>DatabaseHandler</code> for future data sets. Is there a possible way to use those rows in the Fragment whilst ensuring that the data can be filtered by either of the item class properties <code>fullName</code> and/or <code>abbreviation</code>?  I want to avoid the need of having to creae a new <code>DatabaseHandler</code> for each data set that I will create.</p>\n\n<blockquote>\n  <p>Type Mismatch | Required: MutableList | Found: DatabaseHandler</p>\n</blockquote>\n\n<p><strong>item class</strong></p>\n\n<pre><code>data class Companies (val id: Int, val fullName: String, val abbreviation: String)\n</code></pre>\n\n<p><strong>fragment class</strong></p>\n\n<pre><code>class MyFragment : androidx.fragment.app.Fragment() {\n    private var mAdapter: MyListAdapter? = null\n\n    private lateinit var mRecyclerView: androidx.recyclerview.widget.RecyclerView\n\n    private var mTwoPane: Boolean = false\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setHasOptionsMenu(true)\n    }\n\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n        val view = inflater.inflate(R.layout.layout_recyclerview, container, false)\n        mTwoPane = (activity as androidx.fragment.app.FragmentActivity).findViewById&lt;View&gt;(R.id.detail_container) != null\n\n        mRecyclerView = view.findViewById&lt;RecyclerView&gt;(R.id.recyclerView_list)\n        mRecyclerView.setHasFixedSize(true)\n        mRecyclerView.layoutManager = androidx.recyclerview.widget.LinearLayoutManager(this.activity)\n        mRecyclerView.addItemDecoration(androidx.recyclerview.widget.DividerItemDecoration(Objects.requireNonNull&lt;Context&gt;(context), LinearLayout.VERTICAL))\n\n        val companyA = Companies(1, \"GlaxoSmithKline plc\", \"GSK\")\n        val companyB = Companies(2, \"Hiscox Ltd\", \"HSX\")\n        val companyC = Companies(3, \"InterContinental Hotels Group plc\", \"IHG\")\n        val companyD = Companies(4, \"Marks &amp; Spencer Group plc\", \"MKS\")\n        val companyE = Companies(5, \"FTSE 150\", \"\")\n        val companyF = Companies(6, \"FTSE 250\", \"\")\n\n        val myList = DatabaseHandler(this.context!!)\n        myList.insertData(companyA)\n        myList.insertData(companyB)\n        myList.insertData(companyC)\n        myList.insertData(companyD)\n        myList.insertData(companyE)\n        myList.insertData(companyF)\n\n        mRecyclerView.adapter = mAdapter\n\n        mAdapter = MyListAdapter(activity!!, myList, mTwoPane)\n        return view\n    }\n\n    override fun onCreateOptionsMenu(menu: Menu, inflater: MenuInflater) {\n        val mInflater = Objects.requireNonNull&lt;androidx.fragment.app.FragmentActivity&gt;(activity).menuInflater\n        mInflater.inflate(R.menu.menu_search, menu)\n\n        val searchitem = menu.findItem(R.id.action_search)\n        val searchView = searchitem.actionView as SearchView\n        searchView.maxWidth = Integer.MAX_VALUE\n\n        searchView.queryHint = Objects.requireNonNull&lt;Context&gt;(context).getText(R.string.searchhint_stopname)\n\n        searchView.setOnQueryTextListener(object : SearchView.OnQueryTextListener {\n            override fun onQueryTextSubmit(query: String): Boolean {\n                return false\n            }\n\n            override fun onQueryTextChange(newText: String): Boolean {\n                mAdapter!!.filter.filter(newText)\n                return false\n            }\n        })\n\n        super.onCreateOptionsMenu(menu, inflater)\n    }\n}\n</code></pre>\n\n<p><strong>DatabaseHandler class</strong></p>\n\n<pre><code>class DatabaseHandler(context: Context) : SQLiteOpenHelper(context, DatabaseHandler.DB_NAME, null, DatabaseHandler.DB_VERSION) {\n    override fun onCreate(db: SQLiteDatabase) {\n        val createTable = \"CREATE TABLE $TABLE_NAME ($COL_ID INTEGER PRIMARY KEY, $COL_NAME TEXT, $COL_ABBREVIATION TEXT);\"\n        db.execSQL(createTable)\n    }\n\n    override fun onUpgrade(db: SQLiteDatabase, oldVersion: Int, newVersion: Int) {\n        val dropTable = \"DROP TABLE IF EXISTS $TABLE_NAME\"\n        db.execSQL(dropTable)\n        onCreate(db)\n    }\n\n    fun insertData(companies: Companies): Boolean {\n        val db = this.readableDatabase\n        val values = ContentValues()\n        values.put(COL_ID, companies.id)\n        values.put(COL_NAME, companies.fullName)\n        values.put(COL_ABBREVIATION, companies.abbreviation)\n\n        val _success = db.insert(TABLE_NAME, null, values)\n        db.close()\n\n        Log.v(\"Insertion complete\", \"Record Inserted Successfully\")\n\n        return (Integer.parseInt(\"$_success\") != -1)\n    }\n\n    fun getCompany(_id: Int): Companies {\n        val companies = Companies(_id, \"\", \"\")\n        val db = writableDatabase\n        val selectQuery = \"SELECT * FROM $TABLE_NAME WHCOL_$COL_ID = $_id\"\n        val cursor = db.rawQuery(selectQuery, null)\n        if (cursor != null) {\n            cursor.moveToFirst()\n            while (cursor.moveToNext()) {\n                val id = Integer.parseInt(cursor.getString(cursor.getColumnIndex(COL_ID)))\n                val fullName = cursor.getString(cursor.getColumnIndex(COL_NAME))\n                val abbreviation = cursor.getString(cursor.getColumnIndex(COL_ABBREVIATION))\n            }\n        }\n        cursor.close()\n        return companies\n    }\n\n    companion object {\n        private const val DB_VERSION = 1\n        private const val DB_NAME = \"MyCompanies\"\n        private const val TABLE_NAME = \"Companies\"\n        private const val COL_ID = \"Id\"\n        private const val COL_NAME = \"Name\"\n        private const val COL_ABBREVIATION = \"Abbreviation\"\n    }\n}\n</code></pre>\n\n<p><strong>MyListAdapter class</strong></p>\n\n<pre><code>class MyListAdapter(private val mCtx: Context, \n                    private val myList: MutableList&lt;Companies&gt;,\n                    private val mTwoPane: Boolean) : androidx.recyclerview.widget.RecyclerView.Adapter&lt;MyListAdapter.CompanyViewHolder&gt;(), Filterable {\n    private var myListFull = myList.toMutableList()\n\n    private val companyFilter = object : Filter() {\n        override fun performFiltering(constraint: CharSequence?): Filter.FilterResults {\n            val filteredList = ArrayList&lt;Companies&gt;()\n\n            when {\n                constraint == null || constraint.isEmpty() -&gt; filteredList.addAll(myListFull)\n                else -&gt; {\n                    val filterPattern = constraint.toString().toLowerCase().trim { it &lt;= ' ' }\n\n                    for (item in myListFull) {\n                        when {\n                            item.companyName!!.toLowerCase().contains(filterPattern) -&gt;\n                                filteredList.add(item)\n                        }\n                    }\n                }\n            }\n\n            val results = Filter.FilterResults()\n            results.values = filteredList\n            return results\n        }\n\n        override fun publishResults(constraint: CharSequence?, results: Filter.FilterResults?) {\n            myList.clear()\n            myList.addAll(results!!.values as List&lt;Companies&gt;)\n            notifyDataSetChanged()\n        }\n    }\n\n    inner class CompanyViewHolder(itemView: View) : androidx.recyclerview.widget.RecyclerView\n    .ViewHolder(itemView) {\n        var tvTitle: TextView = itemView.findViewById(R.id.tv_RVItem)\n    }\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): CompanyViewHolder {\n        val inflater = LayoutInflater.from(mCtx)\n        val v = inflater.inflate(R.layout.recyclerview_item_textview, parent, false)\n        return CompanyViewHolder(v)\n    }\n\n    override fun onBindViewHolder(holder: CompanyViewHolder, position: Int) {\n        val product = myList[holder.adapterPosition]\n\n        holder.tvTitle.text = product.companyfuName\n    }\n\n    override fun getItemCount(): Int {\n        return myList.size\n    }\n\n    override fun getFilter(): Filter {\n        return companyFilter\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-softkeyboard"], "answers": [{"comments": [{"owner": {"reputation": 436, "user_id": 10005183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7d9694d9419f3d80ec61d0ec2fa6661?s=128&d=identicon&r=PG&f=1", "display_name": "M&#39;aiq the Coder", "link": "https://stackoverflow.com/users/10005183/maiq-the-coder"}, "edited": false, "score": 0, "creation_date": 1591957660, "post_id": 55505105, "comment_id": 110257797, "body": "that view!! is most likely going to crash your app"}, {"owner": {"reputation": 1934, "user_id": 2932967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a7491e8ed5ab6a28cc6967c3fb59e9f?s=128&d=identicon&r=PG", "display_name": "Andrew Churilo", "link": "https://stackoverflow.com/users/2932967/andrew-churilo"}, "reply_to_user": {"reputation": 436, "user_id": 10005183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7d9694d9419f3d80ec61d0ec2fa6661?s=128&d=identicon&r=PG&f=1", "display_name": "M&#39;aiq the Coder", "link": "https://stackoverflow.com/users/10005183/maiq-the-coder"}, "edited": false, "score": 0, "creation_date": 1592125569, "post_id": 55505105, "comment_id": 110307433, "body": "@M&#39;aiqtheCoder Add <code>if (view != null)</code> to prevent crash"}], "tags": [], "owner": {"reputation": 1934, "user_id": 2932967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a7491e8ed5ab6a28cc6967c3fb59e9f?s=128&d=identicon&r=PG", "display_name": "Andrew Churilo", "link": "https://stackoverflow.com/users/2932967/andrew-churilo"}, "is_accepted": true, "score": 11, "last_activity_date": 1554329647, "creation_date": 1554329647, "answer_id": 55505105, "question_id": 55505049, "link": "https://stackoverflow.com/questions/55505049/how-to-close-the-soft-keyboard-from-a-fragment-using-kotlin/55505105#55505105", "title": "How to close the soft keyboard from a fragment using Kotlin?", "body": "<p>All is right except <code>ContextCompat.getSystemService</code>. Use <code>Activity</code> instance instead <code>ContextCompat</code>.</p>\n\n<pre><code>val imm = activity.getSystemService(Context.INPUT_METHOD_SERVICE) as InputMethodManager\nimm.hideSoftInputFromWindow(view!!.getWindowToken(), 0)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1636, "user_id": 2030092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c23750975f64b1a4d56e4f7c6272a236?s=128&d=identicon&r=PG", "display_name": "lbarbosa", "link": "https://stackoverflow.com/users/2030092/lbarbosa"}, "is_accepted": false, "score": 0, "last_activity_date": 1571384763, "creation_date": 1571384763, "answer_id": 58446190, "question_id": 55505049, "link": "https://stackoverflow.com/questions/55505049/how-to-close-the-soft-keyboard-from-a-fragment-using-kotlin/58446190#58446190", "title": "How to close the soft keyboard from a fragment using Kotlin?", "body": "<p>I came here looking for an answer to a similar question in a context where I didn't have direct access to an <code>Activity</code> instance.</p>\n\n<p>Although the accepted answer works, you can still use <code>ContextCompat</code> if you pass the class of the service you are requesting, with the benefit of having the cast done for you, like this:</p>\n\n<pre><code>val imm = ContextCompat.getSystemService(view.context, InputMethodManager::class.java)\nimm?.hideSoftInputFromWindow(view.windowToken, 0)\n</code></pre>\n"}], "owner": {"reputation": 1670, "user_id": 9774624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9f8e7e947e5c7b3d9e21830d0a6be5c?s=128&d=identicon&r=PG&f=1", "display_name": "Tsabary", "link": "https://stackoverflow.com/users/9774624/tsabary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4252, "favorite_count": 1, "accepted_answer_id": 55505105, "answer_count": 2, "score": 5, "last_activity_date": 1613920569, "creation_date": 1554329258, "question_id": 55505049, "link": "https://stackoverflow.com/questions/55505049/how-to-close-the-soft-keyboard-from-a-fragment-using-kotlin", "title": "How to close the soft keyboard from a fragment using Kotlin?", "body": "<p>I would like to close the soft keyboard from inside a fragment.\nI am finding a lot of answers but they are all in Java. Usually I am able to transition it to Kotlin quite easily but I am having a hard time with this one.</p>\n\n<p>The closest I got was this:</p>\n\n<pre><code>fun closeKeyboard() {\n    val activity = activity as FeedActivity\n\n    val view = activity.currentFocus\n    if (view != null) {\n        val imm = ContextCompat.getSystemService(Context.INPUT_METHOD_SERVICE) as InputMethodManager?\n        imm!!.hideSoftInputFromWindow(view!!.getWindowToken(), 0)\n    }\n}\n</code></pre>\n\n<p>But I am having trouble with this part <code>getSystemService(Context.INPUT_METHOD_SERVICE)</code></p>\n"}, {"tags": ["android", "kotlin", "drawing"], "comments": [{"owner": {"reputation": 77347, "user_id": 1631193, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c713494416ceac454d71c524e15f1c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Sechan", "link": "https://stackoverflow.com/users/1631193/gabe-sechan"}, "edited": false, "score": 0, "creation_date": 1554327614, "post_id": 55504048, "comment_id": 97715390, "body": "Why do you need to do this?  It seems like you&#39;re doing something wrong to get here.  If you were to try, the answer is OpenGL.  But don&#39;t expect that to work well either, how often do you see video games with 250K sprites?"}, {"owner": {"reputation": 4098, "user_id": 1393280, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/767b919d51cfd467ac1ebf47abb14e51?s=128&d=identicon&r=PG", "display_name": "BArtWell", "link": "https://stackoverflow.com/users/1393280/bartwell"}, "reply_to_user": {"reputation": 77347, "user_id": 1631193, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c713494416ceac454d71c524e15f1c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Sechan", "link": "https://stackoverflow.com/users/1631193/gabe-sechan"}, "edited": false, "score": 0, "creation_date": 1554367711, "post_id": 55504048, "comment_id": 97728255, "body": "@GabeSechan This is just a requirements specification. This is not a game or video, this is just a motionless points."}], "owner": {"reputation": 4098, "user_id": 1393280, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/767b919d51cfd467ac1ebf47abb14e51?s=128&d=identicon&r=PG", "display_name": "BArtWell", "link": "https://stackoverflow.com/users/1393280/bartwell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1554324634, "creation_date": 1554324634, "question_id": 55504048, "link": "https://stackoverflow.com/questions/55504048/what-is-best-way-to-draw-250k-points", "title": "What is best way to draw 250k points?", "body": "<p>I need to draw ~250'000 points with different colors from two-dimension array. I am trying to do it using SurfaceView. It works well but drawing takes 2-3 seconds (I am looking time between \"Start draw\"/\"Draw done\" log records). Possibly I am choose wrong way or doing something wrong. What is the most perfomance way to draw 250k points in Android?</p>\n\n<p>Here is my code:</p>\n\n<pre><code>class MyDrawThread(private val surfaceHolder: SurfaceHolder) : Thread() {\n\n    var isRunning = false\n    var points: List&lt;List&lt;Int&gt;&gt;? = null\n\n    override fun run() {\n        var canvas: Canvas?\n        while (isRunning) {\n            points?.let { points -&gt;\n                canvas = null\n                try {\n                    Log.d(TAG, \"Start draw\")\n                    canvas = surfaceHolder.lockCanvas(null)\n                    synchronized(surfaceHolder) {\n                        canvas!!.drawColor(Color.BLACK)\n                        for ((x, list) in points.withIndex()) {\n                            val paint = Paint()\n                            for ((y, colorId) in list.withIndex()) {\n                                paint.color = getColor(colorId) // Get color from hardcoded array by index\n                                canvas!!.drawPoint(x.toFloat(), y.toFloat(), paint)\n                            }\n                        }\n                    }\n                } finally {\n                    surfaceHolder.unlockCanvasAndPost(canvas)\n                    Log.d(TAG, \"Draw done\")\n                }\n            }\n            Thread.sleep(10000L)\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "design-patterns", "kotlin", "mvp"], "comments": [{"owner": {"reputation": 385, "user_id": 9884320, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "User One", "link": "https://stackoverflow.com/users/9884320/user-one"}, "edited": false, "score": 0, "creation_date": 1554323579, "post_id": 55503551, "comment_id": 97713865, "body": "Can&#39;t you make a Base View like you did with your BasePresenter and replace LoginContract.View with it ?"}], "answers": [{"tags": [], "owner": {"reputation": 1934, "user_id": 2932967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a7491e8ed5ab6a28cc6967c3fb59e9f?s=128&d=identicon&r=PG", "display_name": "Andrew Churilo", "link": "https://stackoverflow.com/users/2932967/andrew-churilo"}, "is_accepted": true, "score": 1, "last_activity_date": 1554356550, "last_edit_date": 1554356550, "creation_date": 1554329863, "answer_id": 55505139, "question_id": 55503551, "link": "https://stackoverflow.com/questions/55503551/how-to-extend-all-views-with-my-basepresenter/55505139#55505139", "title": "How to extend all views with my BasePresenter", "body": "<p>You can't extend multiple classes. You should use some base interface instead.</p>\n\n<h3>How you can do this</h3>\n\n<ol>\n<li>Base presenter can use some <code>BaseView</code> interface:</li>\n</ol>\n\n<pre><code>abstract class BasePresenter&lt;T : BaseView&gt; : Presenter&lt;T&gt;\n</code></pre>\n\n<p><code>LoginContract.View</code> interface should extend <code>BaseView</code>.\n<code>RegisterContract.View</code> also should extend <code>BaseView</code>.</p>\n\n<ol start=\"2\">\n<li>Then if you need one general presenter that works with all views you need to create general interface: </li>\n</ol>\n\n<pre><code>interface AllViews: LoginContract.View, RegisterContract.View\n</code></pre>\n\n<ol start=\"3\">\n<li>Now you can use it in GeneralPresenter</li>\n</ol>\n\n<pre><code>class GeneralPresenter : BasePresenter&lt;AllView&gt;\n</code></pre>\n"}], "owner": {"reputation": 2083, "user_id": 10870164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LiN2r.jpg?s=128&g=1", "display_name": "CoffeeBreak", "link": "https://stackoverflow.com/users/10870164/coffeebreak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "accepted_answer_id": 55505139, "answer_count": 1, "score": 1, "last_activity_date": 1554356550, "creation_date": 1554322356, "question_id": 55503551, "link": "https://stackoverflow.com/questions/55503551/how-to-extend-all-views-with-my-basepresenter", "title": "How to extend all views with my BasePresenter", "body": "<p>Im working on a project and doing mvp on it, now, I have a BaseActivity for all my Activities and a BasePresenter that works with the view of the Activity I'm in, this is done to attach, ditach and know wherever my view is null or not while working with my presenter.</p>\n\n<p>Now, this is working fine for my first view with this</p>\n\n<pre><code>abstract class BasePresenter&lt;T : LoginContract.View&gt; : Presenter&lt;T&gt; {\n\n    private var mMvpView: T? = null\n\n    val isViewAttached: Boolean\n        get() = mMvpView != null\n\n    override fun attachView(view: T) {\n        mMvpView = view\n    }\n\n    override fun detachView() {\n        mMvpView = null\n    }\n}\n</code></pre>\n\n<p>And in my presenter , I'm calling it like this</p>\n\n<pre><code>class LoginPresenter: BasePresenter&lt;LoginContract.View&gt;(), LoginContract.Presenter {\n\n....\n</code></pre>\n\n<p>But now , I'm creating a new presenter that is called <strong>RegisterPresenter</strong> and when I use BasePresenter&lt;> to extend my class with the presenter, it asks to put <code>LoginContract.View</code> in there. </p>\n\n<p>I know that because is coded this way here</p>\n\n<pre><code>abstract class BasePresenter&lt;T : LoginContract.View&gt; : Presenter&lt;T&gt; {\n...\n</code></pre>\n\n<p>But I wonder if there is an approach where I can extend multiple views like this</p>\n\n<pre><code>abstract class BasePresenter&lt;T : multipleViews&gt; : Presenter&lt;T&gt; {\n</code></pre>\n"}, {"tags": ["android", "kotlin", "dagger-2", "android-viewmodel"], "comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1554321021, "post_id": 55503213, "comment_id": 97712653, "body": "Where did <code>viewModeFactory</code> come from, what does it do? What is the scope of the component? When do you pass the Activity to the component?"}, {"owner": {"reputation": 951, "user_id": 11161537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aNy16.jpg?s=128&g=1", "display_name": "Ibrahim Ali", "link": "https://stackoverflow.com/users/11161537/ibrahim-ali"}, "edited": false, "score": 0, "creation_date": 1554321088, "post_id": 55503213, "comment_id": 97712697, "body": "<b>What&#39;s wrong with this approach</b>, what is the advantage of your approach so?"}, {"owner": {"reputation": 69128, "user_id": 242769, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8f1bfe0dcaa3cdc6633e8b80639e541a?s=128&d=identicon&r=PG", "display_name": "aryaxt", "link": "https://stackoverflow.com/users/242769/aryaxt"}, "edited": false, "score": 0, "creation_date": 1554321163, "post_id": 55503213, "comment_id": 97712733, "body": "There is no advantage to my approach, this is the standard way of using dagger, I&#39;m trying to see why it doesn&#39;t work when it comes to ViewModels due to different lifecycle than the activity"}, {"owner": {"reputation": 15397, "user_id": 3290339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMy5l.jpg?s=128&g=1", "display_name": "Onik", "link": "https://stackoverflow.com/users/3290339/onik"}, "edited": false, "score": 0, "creation_date": 1554323787, "post_id": 55503213, "comment_id": 97713942, "body": "What exactly doesn&#39;t work? Any errors?"}], "owner": {"reputation": 69128, "user_id": 242769, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8f1bfe0dcaa3cdc6633e8b80639e541a?s=128&d=identicon&r=PG", "display_name": "aryaxt", "link": "https://stackoverflow.com/users/242769/aryaxt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1554341087, "creation_date": 1554320945, "last_edit_date": 1554341087, "question_id": 55503213, "link": "https://stackoverflow.com/questions/55503213/android-viewmodel-dagger", "title": "Android ViewModel &amp; Dagger", "body": "<p>What's wrong with this approach, I see a lot of people doing custom work for getting ViewModel to work with dagger, but why doesn't this solution I have work?</p>\n\n<pre><code>class MyActivity {\n   @inject lateinit var viewModel: MyViewModel\n\n   oncreate() {\n                DaggerLoginComponent\n        .builder()\n        .appComponent(App.component)\n        .loginModule(MyModule(this))\n        .build()\n        .inject(this)\n   }\n}\n\n@Module\nclass MyActivityModule(prival val activity: MyActivity) {\n   @provides\n   fun provideViewModel(dep1: Dependency, dep2: Dependency) =\n       ViewModelProviders.of(activity, this.viewModeFactory).get(MyViewModel::class.java)\n}\n\nclass MyViewModel {\n    init(dep1: Dependency, dep2: Dependency) { ... }\n}\n</code></pre>\n"}, {"tags": ["spring", "kotlin", "reactor"], "answers": [{"comments": [{"owner": {"reputation": 260, "user_id": 1636730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/899ba70fed297723815c5fc65b766570?s=128&d=identicon&r=PG", "display_name": "Al Jacinto", "link": "https://stackoverflow.com/users/1636730/al-jacinto"}, "edited": false, "score": 0, "creation_date": 1554318203, "post_id": 55502446, "comment_id": 97711286, "body": "it is saying it is expecting   <code>Mono&lt;ServerResponse&gt;</code> but I&#39;m giving it <code>Mono&lt;Mono&lt;ServerResponse&gt;&gt;</code>"}, {"owner": {"reputation": 260, "user_id": 1636730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/899ba70fed297723815c5fc65b766570?s=128&d=identicon&r=PG", "display_name": "Al Jacinto", "link": "https://stackoverflow.com/users/1636730/al-jacinto"}, "edited": false, "score": 0, "creation_date": 1554318572, "post_id": 55502446, "comment_id": 97711459, "body": "that did it, thanks.  I can&#39;t believe it&#39;s that simple.  Is it the fromObject the one subscribing to the result of the Mono coming from insert?"}, {"owner": {"reputation": 91346, "user_id": 2756547, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2158ce6e7c048277890eb64458864c1c?s=128&d=identicon&r=PG", "display_name": "Artem Bilan", "link": "https://stackoverflow.com/users/2756547/artem-bilan"}, "reply_to_user": {"reputation": 260, "user_id": 1636730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/899ba70fed297723815c5fc65b766570?s=128&d=identicon&r=PG", "display_name": "Al Jacinto", "link": "https://stackoverflow.com/users/1636730/al-jacinto"}, "edited": false, "score": 0, "creation_date": 1554318672, "post_id": 55502446, "comment_id": 97711506, "body": "No, that&#39;s not. Subscriber is for the returned <code>Mono</code> from your <code>create()</code> method and is done somewhere in the HTTP request processor by the container."}, {"owner": {"reputation": 260, "user_id": 1636730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/899ba70fed297723815c5fc65b766570?s=128&d=identicon&r=PG", "display_name": "Al Jacinto", "link": "https://stackoverflow.com/users/1636730/al-jacinto"}, "edited": false, "score": 0, "creation_date": 1554318912, "post_id": 55502446, "comment_id": 97711617, "body": "the http request processor subscribes to the Mono produced from ok().body() which is Mono&lt;ServerResponse&gt; but the Mono&lt;Domain&gt; from reactive repository is resolved in call to fromObject??"}, {"owner": {"reputation": 91346, "user_id": 2756547, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2158ce6e7c048277890eb64458864c1c?s=128&d=identicon&r=PG", "display_name": "Artem Bilan", "link": "https://stackoverflow.com/users/2756547/artem-bilan"}, "reply_to_user": {"reputation": 260, "user_id": 1636730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/899ba70fed297723815c5fc65b766570?s=128&d=identicon&r=PG", "display_name": "Al Jacinto", "link": "https://stackoverflow.com/users/1636730/al-jacinto"}, "edited": false, "score": 0, "creation_date": 1554320180, "post_id": 55502446, "comment_id": 97712237, "body": "That\u2019s right, but subscription is done only once for the whole stream and the value is resolved on demand"}], "tags": [], "owner": {"reputation": 91346, "user_id": 2756547, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2158ce6e7c048277890eb64458864c1c?s=128&d=identicon&r=PG", "display_name": "Artem Bilan", "link": "https://stackoverflow.com/users/2756547/artem-bilan"}, "is_accepted": true, "score": 1, "last_activity_date": 1554318321, "last_edit_date": 1554318321, "creation_date": 1554317859, "answer_id": 55502446, "question_id": 55502063, "link": "https://stackoverflow.com/questions/55502063/handler-that-returns-inserted-record/55502446#55502446", "title": "Handler that returns inserted record", "body": "<p>How about this:</p>\n\n<pre><code> return req.bodyToMono(RecordDTO::class.java)\n            .flatMap { repository.insert(it.toDomain()) }\n            .flatMap { ok().body(fromObject(it)) }\n</code></pre>\n\n<p>?</p>\n"}], "owner": {"reputation": 260, "user_id": 1636730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/899ba70fed297723815c5fc65b766570?s=128&d=identicon&r=PG", "display_name": "Al Jacinto", "link": "https://stackoverflow.com/users/1636730/al-jacinto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 55502446, "answer_count": 1, "score": 0, "last_activity_date": 1554318321, "creation_date": 1554316482, "last_edit_date": 1554317452, "question_id": 55502063, "link": "https://stackoverflow.com/questions/55502063/handler-that-returns-inserted-record", "title": "Handler that returns inserted record", "body": "<p>If I'm using reactive repository in spring (using kotlin) and I want to return the inserted record.  How do I do it?  I need an operator that will subscribe to what flatMap returns then pass it to a function so that I can use <code>ok().body(fromObject(insertedRecord))</code></p>\n\n<p>Things I tried:</p>\n\n<ol>\n<li><code>then</code>: does not return the value</li>\n<li><code>.subscribe { Mono.just(ServerResponse.ok().build()) }</code> : returns <code>Disposable</code> </li>\n</ol>\n\n<pre><code>@Component\nclass RecordHandler(private val repository: RecordRepository) {\n    fun create(req: ServerRequest): Mono&lt;ServerResponse&gt; {\n        return req.bodyToMono(RecordDTO::class.java)\n                .flatMap { repository.insert(it.toDomain()) }\n                .then(ok().build())\n}\n</code></pre>\n\n<p>The other alternative is to query after the insert but that's a workaround.</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["kotlin", "apache-commons-math"], "answers": [{"tags": [], "owner": {"reputation": 56, "user_id": 8245541, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NAlZt.jpg?s=128&g=1", "display_name": "philip_zelichenko", "link": "https://stackoverflow.com/users/8245541/philip-zelichenko"}, "is_accepted": true, "score": 2, "last_activity_date": 1558699531, "last_edit_date": 1558699531, "creation_date": 1554315704, "answer_id": 55501811, "question_id": 55501694, "link": "https://stackoverflow.com/questions/55501694/how-can-i-get-the-value-of-a-t-student-distribution/55501811#55501811", "title": "How can I get the value of a T-student distribution?", "body": "<p>You can use the following:</p>\n\n<pre><code>new org.apache.commons.math3.distribution.TDistribution(deg_freedom).\n    inverseCumulativeProbability(probability)\n</code></pre>\n\n<p>Where deg_freedom=13, and probability=0.95.</p>\n"}], "owner": {"reputation": 431, "user_id": 10078148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2399f9b8e40752690d3529004f458d6?s=128&d=identicon&r=PG&f=1", "display_name": "royer", "link": "https://stackoverflow.com/users/10078148/royer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 55501811, "answer_count": 1, "score": 1, "last_activity_date": 1558699531, "creation_date": 1554315288, "question_id": 55501694, "link": "https://stackoverflow.com/questions/55501694/how-can-i-get-the-value-of-a-t-student-distribution", "title": "How can I get the value of a T-student distribution?", "body": "<p>I have been reviewing the documentation of apache commons math and I find that it also calculates distributions, but I can not understand how it works.</p>\n\n<p>I have two values</p>\n\n<ul>\n<li>degrees of freedom = 13  </li>\n<li>confidence interval = 0.95</li>\n</ul>\n\n<p>My problem is that it does not yield the value I need,\nThe objective is:</p>\n\n<p><strong>result = 1.771</strong></p>\n\n<pre><code>import org.apache.commons.math3.distribution.TDistribution\n\n\nfun calculo(a:Double, b:Double): Double {\n    val distf = TDistribution(a,b)\n    return distf.getNumericalMean()\n}\n\nfun main(args: Array&lt;String&gt;) {\n    val ko = calculo(13,0.95)\n    println(ko)\n}\n```\n</code></pre>\n"}, {"tags": ["kotlin", "kotlin-js"], "answers": [{"tags": [], "owner": {"reputation": 1934, "user_id": 2932967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a7491e8ed5ab6a28cc6967c3fb59e9f?s=128&d=identicon&r=PG", "display_name": "Andrew Churilo", "link": "https://stackoverflow.com/users/2932967/andrew-churilo"}, "is_accepted": true, "score": 0, "last_activity_date": 1554315924, "last_edit_date": 1554315924, "creation_date": 1554315170, "answer_id": 55501664, "question_id": 55500761, "link": "https://stackoverflow.com/questions/55500761/how-to-import-standart-parsing-json-library-in-kotlin/55501664#55501664", "title": "How to import standart parsing JSON library in Kotlin", "body": "<p><code>kotlin.js</code> is designed for JavaScript platform. But you show Java-styled import in your code. You can't use JavaScript library in Java project. If you have Java project you should find another lib for JSON parsing, <a href=\"https://stackoverflow.com/questions/41928803/how-to-parse-json-in-kotlin\">this link</a> can be helpful.</p>\n\n<p>If you want to create Kotlin/JavaScript library <a href=\"https://kotlinlang.org/docs/tutorials/create-library-js.html\" rel=\"nofollow noreferrer\">this</a> and <a href=\"https://proandroiddev.com/call-a-javascript-library-from-kotlin-code-as-a-static-type-c2d3755bf79d\" rel=\"nofollow noreferrer\">this</a> links can help you.</p>\n"}], "owner": {"reputation": 25, "user_id": 9649980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87ab82a88c938237968fdb07a370fe5b?s=128&d=identicon&r=PG&f=1", "display_name": "Valery Lyalin", "link": "https://stackoverflow.com/users/9649980/valery-lyalin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "accepted_answer_id": 55501664, "answer_count": 1, "score": 1, "last_activity_date": 1554315924, "creation_date": 1554311751, "question_id": 55500761, "link": "https://stackoverflow.com/questions/55500761/how-to-import-standart-parsing-json-library-in-kotlin", "title": "How to import standart parsing JSON library in Kotlin", "body": "<p>I want to use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.js/-j-s-o-n/parse.html\" rel=\"nofollow noreferrer\">kotlin.js parse</a>, but I don't know how to import it.</p>\n\n<p>I tried </p>\n\n<p><i><code>import org.jetbrains.kotlin.js.parser.sourcemaps.*;</code></i></p>\n\n<p>but it didn't include JSON parse</p>\n"}, {"tags": ["android", "kotlin", "arcore"], "answers": [{"tags": [], "owner": {"reputation": 4433, "user_id": 825493, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6b189ef4c16e63dff671b4e549bd5a4e?s=128&d=identicon&r=PG", "display_name": "Fixus", "link": "https://stackoverflow.com/users/825493/fixus"}, "is_accepted": false, "score": 0, "last_activity_date": 1554362082, "creation_date": 1554362082, "answer_id": 55509897, "question_id": 55500620, "link": "https://stackoverflow.com/questions/55500620/how-to-get-frame-camera-arcore/55509897#55509897", "title": "How to get Frame().camera ARCore", "body": "<p>you don't initialize the frame. You`re getting it from the session</p>\n\n<p>you do it something like this way</p>\n\n<p>@Override</p>\n\n<pre><code>  public void onDrawFrame(GL10 gl) {\n\n    // Clear screen to notify driver it should not load any pixels from previous frame.\n\n    GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT | GLES20.GL_DEPTH_BUFFER_BIT);\n\n\n\n    if (session == null) {\n\n      return;\n\n    }\n\n    // Notify ARCore session that the view size changed so that the perspective matrix and\n\n    // the video background can be properly adjusted.\n\n    displayRotationHelper.updateSessionIfNeeded(session);\n\n\n\n    try {\n\n      session.setCameraTextureName(backgroundRenderer.getTextureId());\n\n\n\n      // Obtain the current frame from ARSession. When the configuration is set to\n\n      // UpdateMode.BLOCKING (it is by default), this will throttle the rendering to the\n\n      // camera framerate.\n\n      Frame frame = session.update();\n    } catch (Throwable t) {\n\n      // Avoid crashing the application due to unhandled exceptions.\n\n      Log.e(TAG, \"Exception on the OpenGL thread\", t);\n\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 10517706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab38954e5bdc7ba4bfe636b74b73deb1?s=128&d=identicon&r=PG&f=1", "display_name": "radekdob", "link": "https://stackoverflow.com/users/10517706/radekdob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 695, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554362082, "creation_date": 1554311195, "question_id": 55500620, "link": "https://stackoverflow.com/questions/55500620/how-to-get-frame-camera-arcore", "title": "How to get Frame().camera ARCore", "body": "<p>I am trying to place an anchor straight in front of the camera 1m away. </p>\n\n<p>I found a code to make this. </p>\n\n<pre><code>mAnchors.add(session.createAnchor(\nframe.getCamera().getPose()\n    .compose(Pose.makeTranslation(0, 0, -1f))\n    .extractTranslation()))\n</code></pre>\n\n<p>My code looks like below: </p>\n\n<pre><code>val anchor =Session(this).createAnchor(\nFrame().camera.pose.compose(Pose.makeTranslation(0f,0f,-1f)))\n</code></pre>\n\n<p>The problem is Frame() constructor. Compilier comes with error: </p>\n\n<blockquote>\n  <p>\"Cannot acces '': it is protected/<em>protected and package</em>/ in\n  Frame'</p>\n</blockquote>\n\n<p>Is any way to initialize Frame().camera or I am doing something wrong ?</p>\n"}, {"tags": ["kotlin", "kotlin-coroutines"], "comments": [{"owner": {"reputation": 10456, "user_id": 9241978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7f9d2a03452f74bfd802e36d50b7db?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel", "link": "https://stackoverflow.com/users/9241978/pawel"}, "edited": false, "score": 1, "creation_date": 1554316935, "post_id": 55500550, "comment_id": 97710666, "body": "Only use case I know of <code>CoroutineContext.Element</code> is implementation of <code>plus</code> operator for easy stacking of contexts/scopes/exception handlers, ie. <code>launch(mainJob + childJob){ ... }</code> etc."}], "answers": [{"comments": [{"owner": {"reputation": 1117, "user_id": 2567976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1b871c452f4de58234213ef1e3bb48a?s=128&d=identicon&r=PG", "display_name": "mdsAyubi", "link": "https://stackoverflow.com/users/2567976/mdsayubi"}, "edited": false, "score": 0, "creation_date": 1554728328, "post_id": 55556983, "comment_id": 97846768, "body": "Thanks for the answer. Really appreciate it. Never saw inner interface inheriting from its parent/outer interface. It was new for me. Still new."}], "tags": [], "owner": {"reputation": 20308, "user_id": 1051598, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f9c354e780ce562daea0e21b99bfdc0d?s=128&d=identicon&r=PG", "display_name": "Roman  Elizarov", "link": "https://stackoverflow.com/users/1051598/roman-elizarov"}, "is_accepted": false, "score": 4, "last_activity_date": 1554625210, "creation_date": 1554625210, "answer_id": 55556983, "question_id": 55500550, "link": "https://stackoverflow.com/questions/55500550/why-does-kotlin-coroutines-coroutinecontext-element-inherits-from-kotlin-corouti/55556983#55556983", "title": "Why does kotlin.coroutines.CoroutineContext.Element inherits from kotlin.coroutines.CoroutineContext", "body": "<p>A coroutine context is a set of elements. An element of the coroutine context is a singleton context by itself. It means that when viewed as a set (as a coroutine context) an element represents a single-element set (aka singleton).</p>\n"}], "owner": {"reputation": 1117, "user_id": 2567976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1b871c452f4de58234213ef1e3bb48a?s=128&d=identicon&r=PG", "display_name": "mdsAyubi", "link": "https://stackoverflow.com/users/2567976/mdsayubi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1554625210, "creation_date": 1554310952, "question_id": 55500550, "link": "https://stackoverflow.com/questions/55500550/why-does-kotlin-coroutines-coroutinecontext-element-inherits-from-kotlin-corouti", "title": "Why does kotlin.coroutines.CoroutineContext.Element inherits from kotlin.coroutines.CoroutineContext", "body": "<p>We can provide an optional <code>CoroutineContext</code> while creating coroutine from builder functions like <code>launch</code> like this.</p>\n\n<pre><code>launch(Dispatchers.Unconfined) { // not confined -- will work with main thread\n    println(\"Unconfined      : I'm working in thread ${Thread.currentThread().name}\")\n    delay(500)\n    println(\"Unconfined      : After delay in thread ${Thread.currentThread().name}\")\n}\n</code></pre>\n\n<p>One of the values is <code>Dispatchers.Unconfined</code>. I thought <code>Dispatchers.Unconfined</code> will inherit from <code>CoroutineContext</code> and it indeed does. But in a very convoluted way not very clear to me. Added the screen shot of the class hierarchy.</p>\n\n<p><a href=\"https://i.stack.imgur.com/ByeOD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ByeOD.png\" alt=\"enter image description here\"></a></p>\n\n<p>It inherits from the <code>CoroutineContext.Element</code> instead. Which is a nested interface inside the <code>CoroutineContext</code>. This nested interface inherits the outer/parent interface and all the useful implementations of <code>CoroutineContext</code> implement this nested interface.</p>\n\n<p>I am not sure why this mechanics or where else such a pattern is used or can be used. The only place a nested interface AFAIK is used to created new namespaces like <code>Map.Entry</code>. The official documentation also says very little,</p>\n\n<pre><code>    /**\n     * An element of the [CoroutineContext]. An element of the coroutine context is a singleton context by itself.\n     */\n</code></pre>\n\n<p>Not really sure what <code>An element of the coroutine context is a singleton context by itself.</code> means.</p>\n\n<p>I know this is a curiosity question. So timely response is not needed. But any help would be appreciated.</p>\n"}, {"tags": ["java", "c", "kotlin", "codepoint", "imgui"], "comments": [{"owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 1, "creation_date": 1554309920, "post_id": 55500127, "comment_id": 97707211, "body": "Try <code>L&quot;\u2013&quot;</code> in C, which creates UTF-16 strings on Windows. (You can also just do L&#39;\u2013&#39; without having to create a string then read a character from it.)"}, {"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "reply_to_user": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1554310122, "post_id": 55500127, "comment_id": 97707308, "body": "I can&#39;t see the point to that, anyway, with <code>char* a = L&quot;\u2013&quot;;</code>I get the following <code>error C2440: &#39;initializing&#39;: cannot convert from &#39;const wchar_t [2]&#39; to &#39;char *&#39;</code>"}, {"owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1554310192, "post_id": 55500127, "comment_id": 97707344, "body": "It should work with <code>ImWchar*</code>, which is what you want isn&#39;t it? Maybe that would need a cast, but it would be the correct data."}, {"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "reply_to_user": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1554310420, "post_id": 55500127, "comment_id": 97707483, "body": "It wanted the cast indeed. And it&#39;s actually <code>8211</code> in this case"}, {"owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1554310655, "post_id": 55500127, "comment_id": 97707583, "body": "8211 is 0x2013 in decimal."}, {"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "reply_to_user": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1554310741, "post_id": 55500127, "comment_id": 97707621, "body": "yeah, but what is going then without <code>L</code>?"}, {"owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 2, "creation_date": 1554311055, "post_id": 55500127, "comment_id": 97707786, "body": "Like you said, it\u2019s a CP1252 string. You can convert that to wide chars using <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/stringapiset/nf-stringapiset-multibytetowidechar\" rel=\"nofollow noreferrer\">MultiByteToWideChar</a>."}, {"owner": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "edited": false, "score": 1, "creation_date": 1554311415, "post_id": 55500127, "comment_id": 97707973, "body": "&quot;Extended Ascii&quot;: There are only two interpretations of it. 1) One very specific character encoding (in which case there is no reason to call it &quot;Extended Ascii&quot;, just say which is it). 2) Adaptive to the user&#39;s system&#39;s current settings followed up by optional locale changes within the program (which is rarely but sometimes exactly what you want)."}, {"owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "edited": false, "score": 1, "creation_date": 1554311677, "post_id": 55500127, "comment_id": 97708092, "body": "In practice, I think \u2018extended ASCII\u2019 usually refers to Windows Latin-1 AKA CP1252.  (That&#39;s mostly the same as ISO Latin-1 AKA ISO 8859-1 (which matches the first 256 Unicode chars) except that it has things like curly quotes and long dashes in chars 128\u2013159 where ISO Latin-1 has control characters.)"}, {"owner": {"reputation": 23625, "user_id": 2868801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ec5567811049b7ce8192be0bc0246d1?s=128&d=identicon&r=PG&f=1", "display_name": "dave_thompson_085", "link": "https://stackoverflow.com/users/2868801/dave-thompson-085"}, "edited": false, "score": 0, "creation_date": 1554314632, "post_id": 55500127, "comment_id": 97709464, "body": "<b>Which C++</b> and with what options? Your claimed &#39;C&#39; is actually C++, although you can have the same issue in C. The Java standard defines it to use UTF-16, plus there is one dominant implementation (Sun-now-Oracle), but the C++ and C standards make (source and execution) character encodings implementation-dependent and there are many thousands of C and C++ implementations which make many different choices in this area; some compilers support multiple options."}, {"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "reply_to_user": {"reputation": 23625, "user_id": 2868801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ec5567811049b7ce8192be0bc0246d1?s=128&d=identicon&r=PG&f=1", "display_name": "dave_thompson_085", "link": "https://stackoverflow.com/users/2868801/dave-thompson-085"}, "edited": false, "score": 0, "creation_date": 1554796833, "post_id": 55500127, "comment_id": 97872740, "body": "@dave_thompson_085, sorry but I have no idea about which options exactly you refer (I just cloned it and opened in VS). Anyway, I kind of found a solution for the moment"}], "answers": [{"tags": [], "owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "is_accepted": true, "score": 1, "last_activity_date": 1554797459, "creation_date": 1554797459, "answer_id": 55587979, "question_id": 55500127, "link": "https://stackoverflow.com/questions/55500127/codepoint-mismatch-between-java-and-c/55587979#55587979", "title": "Codepoint mismatch between Java and C", "body": "<p>At the moment I solved like <a href=\"https://github.com/kotlin-graphics/imgui/blob/master/src/main/kotlin/imgui/internal/helpers.kt#L418-L457\" rel=\"nofollow noreferrer\">this</a> on Windows, I inserted this function before retrieving the char codepoint.\nIt basically remaps all those chars which differs from ISO-8859-1. You can see them in this <a href=\"https://en.wikipedia.org/wiki/Windows-1252#Character_set\" rel=\"nofollow noreferrer\">table</a>, they are all those with that light grey border.</p>\n\n<pre><code>internal fun Char.remapCodepointIfProblematic(): Int {\n    val i = toInt()\n    return when (Platform.get()) {\n        /*  https://en.wikipedia.org/wiki/Windows-1252#Character_set\n         *  manually remap the difference from  ISO-8859-1 */\n        Platform.WINDOWS -&gt; when (i) {\n            // 8_128\n            0x20AC -&gt; 128 // \u20ac\n            0x201A -&gt; 130 // \u201a\n            0x0192 -&gt; 131 // \u0192\n            0x201E -&gt; 132 // \u201e\n            0x2026 -&gt; 133 // \u2026\n            0x2020 -&gt; 134 // \u2020\n            0x2021 -&gt; 135 // \u2021\n            0x02C6 -&gt; 136 // \u02c6\n            0x2030 -&gt; 137 // \u2030\n            0x0160 -&gt; 138 // \u0160\n            0x2039 -&gt; 139 // \u2039\n            0x0152 -&gt; 140 // \u0152\n            0x017D -&gt; 142 // \u017d\n            // 9_144\n            0x2018 -&gt; 145 // \u2018\n            0x2019 -&gt; 146 // \u2019\n            0x201C -&gt; 147 // \u201c\n            0x201D -&gt; 148 // \u201d\n            0x2022 -&gt; 149 // \u2022\n            0x2013 -&gt; 150 // \u2013\n            0x2014 -&gt; 151 // \u2014\n            0x02DC -&gt; 152 // \u02dc\n            0x2122 -&gt; 153 // \u2122\n            0x0161 -&gt; 154 // \u0161\n            0x203A -&gt; 155 // \u203a\n            0x0153 -&gt; 156 // \u0153\n            0x017E -&gt; 158 // \u017e\n            0x0178 -&gt; 159 // \u0178\n            else -&gt; i\n        }\n        else -&gt; i // TODO\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 55587979, "answer_count": 1, "score": 1, "last_activity_date": 1554797459, "creation_date": 1554309297, "last_edit_date": 1554309762, "question_id": 55500127, "link": "https://stackoverflow.com/questions/55500127/codepoint-mismatch-between-java-and-c", "title": "Codepoint mismatch between Java and C", "body": "<p>So, I'm having some problems with the following char <code>\u2013</code> in a port of imgui to <a href=\"https://github.com/kotlin-graphics/imgui\" rel=\"nofollow noreferrer\">kotlin</a></p>\n\n<p>After digging the whole day into Charsets and encodings, I came down to my only hope: rely on the unicode codepoints.</p>\n\n<p>That char on the jvm </p>\n\n<p><code>\"\u2013\"[0].toInt() // same as codePointAt()</code></p>\n\n<p>returns codepoint <a href=\"https://unicode-table.com/en/2013/\" rel=\"nofollow noreferrer\">u2013</a></p>\n\n<p>On C, I'm not sure, but since this is what is being <a href=\"https://github.com/ocornut/imgui/blob/master/imgui_draw.cpp#L2538-L2546\" rel=\"nofollow noreferrer\">done</a>:</p>\n\n<pre><code>const ImFontGlyph* ImFont::FindGlyph(ImWchar c) const\n{\n    if (c &gt;= IndexLookup.Size)\n        return FallbackGlyph;\n    const ImWchar i = IndexLookup.Data[c];\n    if (i == (ImWchar)-1)\n        return FallbackGlyph;\n    return &amp;Glyphs.Data[i];\n}\n</code></pre>\n\n<p>Where </p>\n\n<p><code>typedef unsigned short ImWchar</code></p>\n\n<p>and</p>\n\n<p><code>ImVector&lt;ImWchar&gt; IndexLookup; // Sparse. Index glyphs by Unicode code-point.</code></p>\n\n<p>So, doing this</p>\n\n<pre><code>char* a = \"\u2013\";\nint b = a[0];\n</code></pre>\n\n<p>returns codepoint <a href=\"https://unicode-table.com/en/0096/\" rel=\"nofollow noreferrer\">u0096</a></p>\n\n<p>As far as I read, it look like over <code>127</code>(<code>0x7F</code>) we are in the \"Extended Ascii\" territory, which is bad, because it appears there are different versions/interpretation of it.</p>\n\n<p>For example, this <a href=\"http://www.asciitable.com/\" rel=\"nofollow noreferrer\">encoding table</a> doesn't match my codepoint, but the <a href=\"https://en.wikipedia.org/wiki/Windows-1252\" rel=\"nofollow noreferrer\">Cp1252 encoding</a> does, so I'm inclined to think that this is what is actually being used on C.</p>\n\n<p>In the table at the bottom of the link just mentioned, you can actually see that <code>150</code> (decimal, count from the right column with the given number) corresponds indeed to <code>2013</code> (hex, I find it a little incoherent, but anyway).</p>\n\n<p>To solve this, I tried to convert my <code>String</code>s on Kotlin to the same encoding (ignoring for the moment that this is of course platform-specific), so for every <code>c: Char</code></p>\n\n<p><code>\"$c\".toByteArray(Charset.forName(\"Cp1252\"))[0].toUnsignedInt</code></p>\n\n<p>This works, but breaks rendering for foreign fonts, such as chinese, japanese, etc..</p>\n\n<p>So, my question is: why the difference between <code>u2013</code> on JVM and <code>u0096</code> on C? </p>\n\n<p>Which is the right way to deal with this?</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 431, "user_id": 10078148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2399f9b8e40752690d3529004f458d6?s=128&d=identicon&r=PG&f=1", "display_name": "royer", "link": "https://stackoverflow.com/users/10078148/royer"}, "edited": false, "score": 0, "creation_date": 1554312881, "post_id": 55500224, "comment_id": 97708644, "body": "hello, but for some reason it returns 0.0, do you know what I&#39;m wrong about?"}, {"owner": {"reputation": 1934, "user_id": 2932967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a7491e8ed5ab6a28cc6967c3fb59e9f?s=128&d=identicon&r=PG", "display_name": "Andrew Churilo", "link": "https://stackoverflow.com/users/2932967/andrew-churilo"}, "reply_to_user": {"reputation": 431, "user_id": 10078148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2399f9b8e40752690d3529004f458d6?s=128&d=identicon&r=PG&f=1", "display_name": "royer", "link": "https://stackoverflow.com/users/10078148/royer"}, "edited": false, "score": 0, "creation_date": 1554313481, "post_id": 55500224, "comment_id": 97708897, "body": "@royer It is another issue. I suggest you to create a new question."}], "tags": [], "owner": {"reputation": 1934, "user_id": 2932967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a7491e8ed5ab6a28cc6967c3fb59e9f?s=128&d=identicon&r=PG", "display_name": "Andrew Churilo", "link": "https://stackoverflow.com/users/2932967/andrew-churilo"}, "is_accepted": true, "score": 1, "last_activity_date": 1554309698, "creation_date": 1554309698, "answer_id": 55500224, "question_id": 55500111, "link": "https://stackoverflow.com/questions/55500111/how-to-get-value-from-a-function-that-returns-object-in-kotlin/55500224#55500224", "title": "how to get value from a function that returns object in kotlin", "body": "<p>Your function returns <code>TDistribution</code>. To return <code>Double</code> you need something like this:</p>\n\n<pre><code>fun calculo(a:Double): Double {\n    val distf = TDistribution(28.0,a)\n    return distf.getNumericalMean()\n}\n\nfun main(args: Array&lt;String&gt;) {\n    val ko = calculo(0.95)\n    println(ko)\n}\n</code></pre>\n"}], "owner": {"reputation": 431, "user_id": 10078148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2399f9b8e40752690d3529004f458d6?s=128&d=identicon&r=PG&f=1", "display_name": "royer", "link": "https://stackoverflow.com/users/10078148/royer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 55500224, "answer_count": 1, "score": 0, "last_activity_date": 1554309698, "creation_date": 1554309233, "question_id": 55500111, "link": "https://stackoverflow.com/questions/55500111/how-to-get-value-from-a-function-that-returns-object-in-kotlin", "title": "how to get value from a function that returns object in kotlin", "body": "<p>I am using math commons library but it turns out that when I want a function to <strong>return an Double</strong>, the intellij idea automatically corrects it to an object.</p>\n\n<pre><code>import org.apache.commons.math3.distribution.TDistribution\n\n\n// TDistribution  --&gt; It doesn't allow me to change to Double\nfun calculo(a:Double): TDistribution {\n\n    val distf = TDistribution(28.0,a)\n    return distf\n}\n\nfun main(args: Array&lt;String&gt;){\n\n    val ko = calculo(0.95)\n    println(ko)\n}\n</code></pre>\n\n<p>return it</p>\n\n<pre><code>org.apache.commons.math3.distribution.TDistribution@404b9385\n</code></pre>\n"}, {"tags": ["android", "kotlin", "noclassdeffounderror"], "comments": [{"owner": {"reputation": 11620, "user_id": 2898715, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/LWv1Z.jpg?s=128&g=1", "display_name": "Eric", "link": "https://stackoverflow.com/users/2898715/eric"}, "edited": false, "score": 0, "creation_date": 1606648636, "post_id": 55500047, "comment_id": 115018771, "body": "I&#39;m getting in the exact same situation on an Android 5.1 device. It happens when i start an activity to choose a file from the file system, or even press the device&#39;s home button, and my app&#39;s activity state is being saved ....did you ever find a solution to this?"}], "answers": [{"comments": [{"owner": {"reputation": 6281, "user_id": 648746, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/6c7be55a7a5e28c374ba30054a9ecb82?s=128&d=identicon&r=PG", "display_name": "theblitz", "link": "https://stackoverflow.com/users/648746/theblitz"}, "edited": false, "score": 0, "creation_date": 1554331726, "post_id": 55502439, "comment_id": 97716723, "body": "The thing is I am not using Stream. The problem was caused by the fact that I was extending a class that has a method that uses Stream (even though I was not making any use of it). Seems that serializing it causes problems."}], "tags": [], "owner": {"reputation": 1934, "user_id": 2932967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a7491e8ed5ab6a28cc6967c3fb59e9f?s=128&d=identicon&r=PG", "display_name": "Andrew Churilo", "link": "https://stackoverflow.com/users/2932967/andrew-churilo"}, "is_accepted": false, "score": 0, "last_activity_date": 1554317843, "creation_date": 1554317843, "answer_id": 55502439, "question_id": 55500047, "link": "https://stackoverflow.com/questions/55500047/noclassfounderror-java-util-stream-stream/55502439#55502439", "title": "NoClassFoundError: java.util.stream.Stream", "body": "<p>As <a href=\"https://developer.android.com/studio/write/java8-support#supported_features\" rel=\"nofollow noreferrer\">documentation</a> says <code>java.util.stream</code> require API level 24 or higher. Android 5.1.1 is API 22, it doesn't have <code>java.util.stream.Stream</code> class.</p>\n"}], "owner": {"reputation": 6281, "user_id": 648746, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/6c7be55a7a5e28c374ba30054a9ecb82?s=128&d=identicon&r=PG", "display_name": "theblitz", "link": "https://stackoverflow.com/users/648746/theblitz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 188, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1554317843, "creation_date": 1554309010, "question_id": 55500047, "link": "https://stackoverflow.com/questions/55500047/noclassfounderror-java-util-stream-stream", "title": "NoClassFoundError: java.util.stream.Stream", "body": "<p>I am writing an Android app using Kotlin.</p>\n\n<p>I am receiving NoClassFoundError for java.util.stream.Stream.</p>\n\n<p>At no point in my app am I using that class.</p>\n\n<p>It happens when I open an ad and appears to be part of the serialization process.\nIt does not happen on all my devices. Only on my older one (5.1.1).\nIt also does not happen on all the activities.</p>\n\n<p>I'm guessing that it is to do with what it is trying to Serialize. However, I am not sure where to even start.</p>\n\n<pre><code>    java.lang.NoClassDefFoundError: java.util.stream.Stream\n    at libcore.reflect.InternalNames.getClass(InternalNames.java:55)\n    at java.lang.Class.getDexCacheType(Class.java:479)\n    at java.lang.reflect.ArtMethod.getDexCacheType(ArtMethod.java:191)\n    at java.lang.reflect.ArtMethod.getReturnType(ArtMethod.java:145)\n    at java.lang.reflect.Method.getReturnType(Method.java:184)\n    at java.lang.Class.getDeclaredMethods(Class.java:771)\n    at java.io.ObjectStreamClass.computeSerialVersionUID(ObjectStreamClass.java:566)\n    at java.io.ObjectStreamClass.createClassDesc(ObjectStreamClass.java:279)\n    at java.io.ObjectStreamClass.lookupStreamClass(ObjectStreamClass.java:1087)\n    at java.io.ObjectStreamClass.lookup(ObjectStreamClass.java:1055)\n    at java.io.ObjectStreamClass.createClassDesc(ObjectStreamClass.java:268)\n    at java.io.ObjectStreamClass.lookupStreamClass(ObjectStreamClass.java:1087)\n    at java.io.ObjectStreamClass.lookup(ObjectStreamClass.java:1055)\n    at java.io.ObjectStreamClass.createClassDesc(ObjectStreamClass.java:268)\n    at java.io.ObjectStreamClass.lookupStreamClass(ObjectStreamClass.java:1087)\n    at java.io.ObjectStreamClass.lookup(ObjectStreamClass.java:1055)\n    at java.io.ObjectStreamClass.createClassDesc(ObjectStreamClass.java:268)\n    at java.io.ObjectStreamClass.lookupStreamClass(ObjectStreamClass.java:1087)\n    at java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1554)\n    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1497)\n    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1461)\n    at java.io.ObjectOutputStream.writeFieldValues(ObjectOutputStream.java:959)\n    at java.io.ObjectOutputStream.defaultWriteObject(ObjectOutputStream.java:360)\n    at java.io.ObjectOutputStream.writeHierarchy(ObjectOutputStream.java:1054)\n    at java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1384)\n    at java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1651)\n    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1497)\n    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1461)\n    at android.os.Parcel.writeSerializable(Parcel.java:1389)\n    at android.os.Parcel.writeValue(Parcel.java:1341)\n    at android.os.Parcel.writeArrayMapInternal(Parcel.java:644)\n    at android.os.BaseBundle.writeToParcelInner(BaseBundle.java:1313)\n    at android.os.Bundle.writeToParcel(Bundle.java:1034)\n    at android.os.Parcel.writeBundle(Parcel.java:669)\n    at android.app.ActivityManagerProxy.activityStopped(ActivityManagerNative.java:2919)\n    at android.app.ActivityThread$StopInfo.run(ActivityThread.java:3296)\n    at android.os.Handler.handleCallback(Handler.java:739)\n    at android.os.Handler.dispatchMessage(Handler.java:95)\n    at android.os.Looper.loop(Looper.java:135)\n    at android.app.ActivityThread.main(ActivityThread.java:5254)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at java.lang.reflect.Method.invoke(Method.java:372)\n    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:903)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:698)\n Caused by: java.lang.ClassNotFoundException: Didn't find class \"java.util.stream.Stream\" on path: DexPathList[[zip file \"/data/app/il.co.anykey.games.cardflip-2/base.apk\"],nativeLibraryDirectories=[/vendor/lib, /system/lib]]\n    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:56)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:511)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:469)\n    at libcore.reflect.InternalNames.getClass(InternalNames.java:53)\n    at java.lang.Class.getDexCacheType(Class.java:479)\u00a0\n    at java.lang.reflect.ArtMethod.getDexCacheType(ArtMethod.java:191)\u00a0\n    at java.lang.reflect.ArtMethod.getReturnType(ArtMethod.java:145)\u00a0\n    at java.lang.reflect.Method.getReturnType(Method.java:184)\u00a0\n    at java.lang.Class.getDeclaredMethods(Class.java:771)\u00a0\n    at java.io.ObjectStreamClass.computeSerialVersionUID(ObjectStreamClass.java:566)\u00a0\n    at java.io.ObjectStreamClass.createClassDesc(ObjectStreamClass.java:279)\u00a0\n    at java.io.ObjectStreamClass.lookupStreamClass(ObjectStreamClass.java:1087)\u00a0\n    at java.io.ObjectStreamClass.lookup(ObjectStreamClass.java:1055)\u00a0\n    at java.io.ObjectStreamClass.createClassDesc(ObjectStreamClass.java:268)\u00a0\n    at java.io.ObjectStreamClass.lookupStreamClass(ObjectStreamClass.java:1087)\u00a0\n    at java.io.ObjectStreamClass.lookup(ObjectStreamClass.java:1055)\u00a0\n    at java.io.ObjectStreamClass.createClassDesc(ObjectStreamClass.java:268)\u00a0\n    at java.io.ObjectStreamClass.lookupStreamClass(ObjectStreamClass.java:1087)\u00a0\n    at java.io.ObjectStreamClass.lookup(ObjectStreamClass.java:1055)\u00a0\n    at java.io.ObjectStreamClass.createClassDesc(ObjectStreamClass.java:268)\u00a0\n    at java.io.ObjectStreamClass.lookupStreamClass(ObjectStreamClass.java:1087)\u00a0\n    at java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1554)\u00a0\n    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1497)\u00a0\n    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1461)\u00a0\n    at java.io.ObjectOutputStream.writeFieldValues(ObjectOutputStream.java:959)\u00a0\n    at java.io.ObjectOutputStream.defaultWriteObject(ObjectOutputStream.java:360)\u00a0\n    at java.io.ObjectOutputStream.writeHierarchy(ObjectOutputStream.java:1054)\u00a0\n    at java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1384)\u00a0\n    at java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1651)\u00a0\n    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1497)\u00a0\n    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1461)\u00a0\n    at android.os.Parcel.writeSerializable(Parcel.java:1389)\u00a0\n    at android.os.Parcel.writeValue(Parcel.java:1341)\u00a0\n    at android.os.Parcel.writeArrayMapInternal(Parcel.java:644)\u00a0\n    at android.os.BaseBundle.writeToParcelInner(BaseBundle.java:1313)\u00a0\n    at android.os.Bundle.writeToParcel(Bundle.java:1034)\u00a0\n    at android.os.Parcel.writeBundle(Parcel.java:669)\u00a0\n    at android.app.ActivityManagerProxy.activityStopped(ActivityManagerNative.java:2919)\u00a0\n    at android.app.ActivityThread$StopInfo.run(ActivityThread.java:3296)\u00a0\n    at android.os.Handler.handleCallback(Handler.java:739)\u00a0\n    at android.os.Handler.dispatchMessage(Handler.java:95)\u00a0\n    at android.os.Looper.loop(Looper.java:135)\u00a0\n    at android.app.ActivityThread.main(ActivityThread.java:5254)\u00a0\n    at java.lang.reflect.Method.invoke(Native Method)\u00a0\n    at java.lang.reflect.Method.invoke(Method.java:372)\u00a0\n    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:903)\u00a0\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:698)\u00a0\n    Suppressed: java.lang.ClassNotFoundException: java.util.stream.Stream\n    at java.lang.Class.classForName(Native Method)\n    at java.lang.BootClassLoader.findClass(ClassLoader.java:781)\n    at java.lang.BootClassLoader.loadClass(ClassLoader.java:841)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:504)\n            ... 45 more\n Caused by: java.lang.NoClassDefFoundError: Class not found using the boot class loader; no stack available\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 0, "creation_date": 1554306868, "post_id": 55499064, "comment_id": 97705633, "body": "&quot;isn\u2019t run {} in the above example essentially the same&quot;: It will give the same result, but the call to <code>run</code> is guaranteed to be inlined, while doing <code>{ ... }()</code> will create a function object and call it."}, {"owner": {"reputation": 2726, "user_id": 3612643, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/3e18288eaaaef95535b2ba6deb069db5?s=128&d=identicon&r=PG&f=1", "display_name": "user3612643", "link": "https://stackoverflow.com/users/3612643/user3612643"}, "reply_to_user": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 0, "creation_date": 1554311010, "post_id": 55499064, "comment_id": 97707762, "body": "@marstran why is a function object created? Run is also just calling () on the passes lambda"}, {"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 0, "creation_date": 1554311106, "post_id": 55499064, "comment_id": 97707819, "body": "Because <code>run</code> is an inline function. The lambda body is copied to the call site by the compiler."}], "answers": [{"tags": [], "owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "is_accepted": true, "score": 5, "last_activity_date": 1554306730, "last_edit_date": 1554306730, "creation_date": 1554306032, "answer_id": 55499108, "question_id": 55499064, "link": "https://stackoverflow.com/questions/55499064/evaluate-code-block-in-kotlin-to-hide-variables-inside-scope/55499108#55499108", "title": "Evaluate code block in Kotlin (to hide variables inside scope)", "body": "<p>Use the <code>run</code> function. It takes a function as a parameter, runs it and returns the result.</p>\n\n<pre><code>val x = run {\n  ... do some complex computations ..\n  42\n}\n</code></pre>\n\n<p>The <code>run</code> function is inlined, so it will have no performance overhead.</p>\n"}, {"tags": [], "owner": {"reputation": 4869, "user_id": 6151924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d32a9252d2034b93b3eb8f743512104?s=128&d=identicon&r=PG&f=1", "display_name": "RobCo", "link": "https://stackoverflow.com/users/6151924/robco"}, "is_accepted": false, "score": 2, "last_activity_date": 1554306052, "creation_date": 1554306052, "answer_id": 55499121, "question_id": 55499064, "link": "https://stackoverflow.com/questions/55499064/evaluate-code-block-in-kotlin-to-hide-variables-inside-scope/55499121#55499121", "title": "Evaluate code block in Kotlin (to hide variables inside scope)", "body": "<p>Yes there is the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/run.html\" rel=\"nofollow noreferrer\">run</a> function.</p>\n\n<pre><code>val x = run {\n    ...\n    42\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 132, "user_id": 9234930, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5CRCBS8AsKw/AAAAAAAAAAI/AAAAAAAAAA8/QHKCiF5_-ic/photo.jpg?sz=128", "display_name": "Youn Tivoli", "link": "https://stackoverflow.com/users/9234930/youn-tivoli"}, "is_accepted": false, "score": 0, "last_activity_date": 1554322280, "creation_date": 1554322280, "answer_id": 55503525, "question_id": 55499064, "link": "https://stackoverflow.com/questions/55499064/evaluate-code-block-in-kotlin-to-hide-variables-inside-scope/55503525#55503525", "title": "Evaluate code block in Kotlin (to hide variables inside scope)", "body": "<p><strong>And also you can use these methods too:</strong></p>\n\n<pre><code> val a=1.also{\n    // your code\n}\nval b=2.apply{\n    // your code}\n}\nval c=3.let{\n    // your code\n}\nval d=4.runCatching{\n    // your code\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2726, "user_id": 3612643, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/3e18288eaaaef95535b2ba6deb069db5?s=128&d=identicon&r=PG&f=1", "display_name": "user3612643", "link": "https://stackoverflow.com/users/3612643/user3612643"}, "is_accepted": false, "score": 0, "last_activity_date": 1554372008, "creation_date": 1554372008, "answer_id": 55513105, "question_id": 55499064, "link": "https://stackoverflow.com/questions/55499064/evaluate-code-block-in-kotlin-to-hide-variables-inside-scope/55513105#55513105", "title": "Evaluate code block in Kotlin (to hide variables inside scope)", "body": "<p>To verify inlining when using <code>run</code>, I created a small example:</p>\n\n<pre><code>    fun main() {\n        {\n            Math.random()\n        }()\n\n        run {\n            Math.random()\n        }\n    }\n</code></pre>\n\n<p>and viewed the produced bytecode:</p>\n\n<pre><code>  public final static main()V\n   L0\n    LINENUMBER 2 L0\n    GETSTATIC TestKt$main$1.INSTANCE : LTestKt$main$1;\n    CHECKCAST kotlin/jvm/functions/Function0\n    INVOKEINTERFACE kotlin/jvm/functions/Function0.invoke ()Ljava/lang/Object; (itf)\n    POP\n   L1\n    LINENUMBER 6 L1\n   L2\n   L3\n   L4\n    ICONST_0\n    ISTORE 0\n   L5\n    LINENUMBER 7 L5\n    INVOKESTATIC java/lang/Math.random ()D\n   L6\n   L7\n    LINENUMBER 6 L7\n   L8\n    POP2\n   L9\n    LINENUMBER 9 L9\n    RETURN\n   L10\n    LOCALVARIABLE $i$a$-run-TestKt$main$2 I L5 L7 0\n    MAXSTACK = 2\n    MAXLOCALS = 1\n\n</code></pre>\n\n<p>So, indeed:</p>\n\n<ul>\n<li>Calling via <code>()</code> calls a generated <code>Function0</code>-derived class that encapsulates the block as a lambda (label <code>L0</code>)</li>\n<li>Calling via <code>run</code> fully inlines the block (label <code>L5</code>)</li>\n</ul>\n"}], "owner": {"reputation": 2726, "user_id": 3612643, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/3e18288eaaaef95535b2ba6deb069db5?s=128&d=identicon&r=PG&f=1", "display_name": "user3612643", "link": "https://stackoverflow.com/users/3612643/user3612643"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 266, "favorite_count": 0, "accepted_answer_id": 55499108, "answer_count": 4, "score": 3, "last_activity_date": 1554372066, "creation_date": 1554305876, "last_edit_date": 1554372066, "question_id": 55499064, "link": "https://stackoverflow.com/questions/55499064/evaluate-code-block-in-kotlin-to-hide-variables-inside-scope", "title": "Evaluate code block in Kotlin (to hide variables inside scope)", "body": "<p>In Scala, you can write</p>\n\n<pre><code>val x = {\n  ... do some complex computations ..\n  42\n}\n</code></pre>\n\n<p>to hide stuff inside of the code block.</p>\n\n<p>The closest I came in Kotlin is:</p>\n\n<pre><code>val x = {\n  ... do some complex computations ..\n  42\n}()\n</code></pre>\n\n<p>Is there a better way?</p>\n\n<p>EDIT:</p>\n\n<ul>\n<li>isn\u2019t <code>run {}</code> in the above example essentially the same</li>\n<li>is calling run costly?</li>\n</ul>\n\n<p>ANSWER:</p>\n\n<ul>\n<li>using <code>run {}</code> inlines, whereas <code>{}()</code> does NOT (see my own answer below)</li>\n</ul>\n"}, {"tags": ["java", "spring-boot", "kotlin", "apache-kafka", "confluent-platform"], "answers": [{"comments": [{"owner": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "edited": false, "score": 0, "creation_date": 1554723924, "post_id": 55572301, "comment_id": 97844017, "body": "My <code>@KafkaListener</code> still doesn&#39;t work though. It gets created, but I doesn&#39;t receive the message I send with the <code>KafkaTemplate</code>. My error handler isn&#39;t called either."}, {"owner": {"reputation": 3425, "user_id": 2207320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d1bcf61ae69838d5c3250a8bd2d7ebc?s=128&d=identicon&r=PG", "display_name": "Woodham", "link": "https://stackoverflow.com/users/2207320/woodham"}, "reply_to_user": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "edited": false, "score": 0, "creation_date": 1554725472, "post_id": 55572301, "comment_id": 97844930, "body": "Do you no longer get the <code>Connection to node -1 could not be established. Broker may not be available.</code> message? if so then you are at least sucessfully connecting to the embedded broker."}, {"owner": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "edited": false, "score": 1, "creation_date": 1554726150, "post_id": 55572301, "comment_id": 97845363, "body": "Yes. I mean I don&#39;t get it anymore. Thanks for the help."}, {"owner": {"reputation": 3425, "user_id": 2207320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d1bcf61ae69838d5c3250a8bd2d7ebc?s=128&d=identicon&r=PG", "display_name": "Woodham", "link": "https://stackoverflow.com/users/2207320/woodham"}, "reply_to_user": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "edited": false, "score": 0, "creation_date": 1554728735, "post_id": 55572301, "comment_id": 97847052, "body": "One other thing I&#39;ve noticed is you&#39;re creating the topic <code>KafkaIntegrationTest.MY_TOPIC</code> on the embedded broker, but sending the message to <code>template.defaultTopic = INSERTED_VARIANT_TOPIC</code>, is it possible you have a topic mismatch?"}, {"owner": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "edited": false, "score": 0, "creation_date": 1554760468, "post_id": 55572301, "comment_id": 97862754, "body": "No, I just forgot to replace it with <code>MY_TOPIC</code> in the example. Thanks for pointing that out."}, {"owner": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "edited": false, "score": 0, "creation_date": 1554796293, "post_id": 55572301, "comment_id": 97872447, "body": "Ok, I managed to get it working. I had to set up my producer in the same way as the consumer since I&#39;m producing Kafka records in the test and now everything is working including the mock schema registry. Note that the mock schema registry needs the Avro file registered as well."}], "tags": [], "owner": {"reputation": 3425, "user_id": 2207320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d1bcf61ae69838d5c3250a8bd2d7ebc?s=128&d=identicon&r=PG", "display_name": "Woodham", "link": "https://stackoverflow.com/users/2207320/woodham"}, "is_accepted": true, "score": 7, "last_activity_date": 1554722525, "creation_date": 1554722525, "answer_id": 55572301, "question_id": 55497296, "link": "https://stackoverflow.com/questions/55497296/spring-boot-embedded-kafka-cant-connect/55572301#55572301", "title": "Spring Boot Embedded Kafka can&#39;t connect", "body": "<p>I believe you're missing setting the broker url for your tests.</p>\n\n<p>There is a note about how to get this value in the documentation:</p>\n\n<blockquote>\n  <p>When the embedded Kafka and embedded Zookeeper server are started by the EmbeddedKafkaBroker, a system property named spring.embedded.kafka.brokers is set to the address of the Kafka brokers and a system property named spring.embedded.zookeeper.connect is set to the address of Zookeeper. Convenient constants (EmbeddedKafkaBroker.SPRING_EMBEDDED_KAFKA_BROKERS and EmbeddedKafkaBroker.SPRING_EMBEDDED_ZOOKEEPER_CONNECT) are provided for this property.</p>\n</blockquote>\n\n<p>(It's located at the bottom of the junit section <a href=\"https://docs.spring.io/spring-kafka/docs/2.2.4.RELEASE/reference/#junit\" rel=\"noreferrer\">here</a>)</p>\n\n<p>One way to fix this is to set <code>kafka.consumers.bootstrap-servers</code> to this value in your tests, e.g.</p>\n\n<pre><code>spring:\n    kafka:\n        consumer:\n            bootstrap-servers: ${spring.embedded.kafka.brokers}\n</code></pre>\n"}], "owner": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6749, "favorite_count": 1, "accepted_answer_id": 55572301, "answer_count": 1, "score": 5, "last_activity_date": 1554760443, "creation_date": 1554300875, "last_edit_date": 1554760443, "question_id": 55497296, "link": "https://stackoverflow.com/questions/55497296/spring-boot-embedded-kafka-cant-connect", "title": "Spring Boot Embedded Kafka can&#39;t connect", "body": "<p>I'm trying to write an integration test for my Kafka consumer. I've followed through with the <a href=\"https://docs.spring.io/spring-kafka/docs/2.2.4.RELEASE/reference/#reference\" rel=\"noreferrer\">official reference documentation</a> but when I start my test I only see this repeated ad infinitum:</p>\n\n<blockquote>\n  <p>-2019-04-03 15:47:34.002 WARN 13120 --- [           main] org.apache.kafka.clients.NetworkClient   : [Consumer\n  clientId=consumer-1, groupId=my-group] Connection to node -1 could not\n  be established. Broker may not be available.</p>\n</blockquote>\n\n<p>What am I doing wrong?</p>\n\n<p>I'm using JUnit5, Spring Boot and <code>spring-kafka</code> and <code>spring-kafka-test</code>.</p>\n\n<p>I have the <code>@EnableKafka</code> annotation on my <code>@Configuration</code> class.</p>\n\n<p>This is how my test class looks like:</p>\n\n<pre><code>@ExtendWith(SpringExtension::class)\n@SpringBootTest(classes = [TestKafkaConfig::class])\n@DirtiesContext\n@EmbeddedKafka(\n        partitions = 1,\n        topics = [KafkaIntegrationTest.MY_TOPIC])\nclass KafkaIntegrationTest {\n\n    @Autowired\n    private lateinit var embeddedKafka: EmbeddedKafkaBroker\n\n    @Test\n    fun test() {\n        val senderProps = KafkaTestUtils.senderProps(embeddedKafka.brokersAsString)\n        val template = KafkaTemplate(DefaultKafkaProducerFactory&lt;Int, String&gt;(senderProps))\n        template.defaultTopic = KafkaIntegrationTest.MY_TOPIC\n        template.sendDefault(\"foo\")\n    }\n}\n</code></pre>\n\n<p>my <code>application.yml</code> looks like this:</p>\n\n<pre><code>kafka:\n  consumer:\n    group-id: my-group\n    bootstrap-servers: ${BOOTSTRAP_SERVERS:localhost:9092}\n    value-deserializer: io.confluent.kafka.serializers.KafkaAvroDeserializer\n    key-deserializer: org.apache.kafka.common.serialization.StringDeserializer\n    properties:\n      schema.registry.url: ${SCHEMA_REGISTRY_URL:http://localhost:8081}\n      specific.avro.reader: true\n</code></pre>\n\n<p>I also tried setting up a <code>MockSchemaRegistryClient</code> but I get the exact same repeated message. (This is how I tried to set up the <code>MockSchemaRegistryClient</code>):</p>\n\n<pre><code>@TestConfiguration\n@Import(TestConfig::class)\nclass TestKafkaConfig {\n\n    @Autowired\n    private lateinit var props: KafkaProperties\n\n    @Bean\n    fun schemaRegistryClient() = MockSchemaRegistryClient()\n\n    @Bean\n    fun kafkaAvroSerializer() = KafkaAvroSerializer(schemaRegistryClient())\n\n    @Bean\n    fun kafkaAvroDeserializer() = KafkaAvroDeserializer(schemaRegistryClient(), props.buildConsumerProperties())\n\n    @Bean\n    fun producerFactory(): ProducerFactory&lt;*, *&gt; = DefaultKafkaProducerFactory(\n            props.buildProducerProperties(),\n            StringSerializer(),\n            kafkaAvroSerializer())\n\n    @Bean\n    fun consumerFactory(): ConsumerFactory&lt;*, *&gt; = DefaultKafkaConsumerFactory(\n            props.buildConsumerProperties(),\n            StringDeserializer(),\n            kafkaAvroDeserializer()\n    )\n\n    @Bean\n    fun kafkaListenerContainerFactory() = ConcurrentKafkaListenerContainerFactory&lt;Any, Any&gt;().apply {\n        setConsumerFactory(consumerFactory() as ConsumerFactory&lt;in Any, in Any&gt;?)\n    }\n\n}\n</code></pre>\n\n<p>What am I doing wrong?\n<strong>Note that</strong> I'm using the Confluent Schema Registry and try to deserialize from Avro.</p>\n\n<p>What I'm trying to test is whether my consumer works or not which looks like this:</p>\n\n<pre><code>open class SomeConsumer(private val someUseCase) {\n\n    @KafkaListener(topics = [\"\\${kafka.some-topic}\"])\n    open fun processMessage(record: ConsumerRecord&lt;String, SomeObject&gt;) {\n        someUseCase.call(record)\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "firebase", "firebase-realtime-database", "kotlin"], "comments": [{"owner": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "edited": false, "score": 0, "creation_date": 1554301054, "post_id": 55497147, "comment_id": 97701721, "body": "An <code>addListenerForSingleValueEvent</code> cannot be removed. But it is supposed to fire very shortly after you attach it, so typically it will be within the same lifecycle of the activity. Where are you attaching the listener? Can you detect that the activity is (about to be) paused there?"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1554301329, "post_id": 55497147, "comment_id": 97701894, "body": "Consider just enqueueing the operation while you&#39;re after onPause, and run the command after onResume -- currently I use <a href=\"https://github.com/Zhuinden/command-queue\" rel=\"nofollow noreferrer\">github.com/Zhuinden/command-queue</a> for this"}], "owner": {"reputation": 41, "user_id": 6208289, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207930590295701/picture?type=large", "display_name": "Matteo Bucci", "link": "https://stackoverflow.com/users/6208289/matteo-bucci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1554301061, "creation_date": 1554300426, "last_edit_date": 1554301061, "question_id": 55497147, "link": "https://stackoverflow.com/questions/55497147/how-to-handle-addlistenerforsinglevalue-properly-after-onsaveinstancestate", "title": "How to handle addListenerForSingleValue properly after onSaveInstanceState", "body": "<p>I'm using Firebase from a long time and I really appreciate its flexibility to fetch some data from its realtime database with low effort. However, I'm having some problems on handling the result of the call of addListenerForSingleValueEvent.\nEvery time some UI operation has to be performed after it returns my application crashes if onSaveInstanceState has already been called.\nThere is any way to abort the operation during onPause() the same way we can do with addValueEventListener?</p>\n\n<p>I know that a solution could be checking if onSaveInstanceState has already been called but all solution I tried seems to be unreliable.\nI try checking for methods like:</p>\n\n<pre><code>isAdded()\nisVisible()\nisFinishing()\n</code></pre>\n\n<p>both for fragments and activities.</p>\n\n<p>An example of my attemps is:</p>\n\n<pre><code>dbref.addListenerForSingleValueEvent(object : ValueEventListener {\n    override fun onDataChange(dataSnapshot: DataSnapshot) {\n        if(isAdded &amp;&amp; isVisible &amp;&amp; activity?.isFinishing == false){\n            GenericMessageDialog.newInstance(getString(R.string.generic_error_title), errorMessage).show(activity?.supportFragmentManager, \"ed\")\n    }\n}\n</code></pre>\n\n<p>Sometimes this exception is thrown</p>\n\n<pre><code>Fatal Exception: java.lang.IllegalStateException\nCan not perform this action after onSaveInstanceState\n</code></pre>\n"}, {"tags": ["kotlin", "android-room", "android-architecture"], "owner": {"reputation": 847, "user_id": 3836294, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ab7f3902084f168bc6c437c80bb45f12?s=128&d=identicon&r=PG&f=1", "display_name": "romaneso", "link": "https://stackoverflow.com/users/3836294/romaneso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1554300177, "creation_date": 1554300177, "question_id": 55497060, "link": "https://stackoverflow.com/questions/55497060/boundarycallback-for-pagedlist-never-gets-called", "title": "BoundaryCallback for PagedList never gets called", "body": "<p>I've created a Room Database on my device, which returns </p>\n\n<pre><code>// The Int type parameter tells Room to use a PositionalDataSource object.\n@Query(\"SELECT * FROM Word ORDER BY id\")\nabstract fun getByFactory(): DataSource.Factory&lt;Int, Word&gt;\n</code></pre>\n\n<p>This factory call is then used in my repository, where I connect it with my boundaryCallback</p>\n\n<pre><code>val boundaryCallback = MyBoundaryCallback()\nreturn wordDao.getByFactory().toLiveData(\n   pageSize = 20,\n   boundaryCallback = boundaryCallback\n)\n</code></pre>\n\n<p>My boundary callback is basic and looks like that</p>\n\n<pre><code>class MyBoundaryCallback() : PagedList.BoundaryCallback&lt;Word&gt;() {\n\n    val int = 0;\n\n    @MainThread\n    override fun onItemAtFrontLoaded(itemAtFront: Word) {\n        Timber.d(\"hello\")\n    }\n\n    @MainThread\n    override fun onZeroItemsLoaded() {\n        Timber.d(\"hello\")\n    }\n\n    @MainThread\n    override fun onItemAtEndLoaded(itemAtEnd: Word) {\n        Timber.d(\"hello\")\n    }\n}\n</code></pre>\n\n<p>The problem is that, although my datasource (room database) doesn't contain any entries, the boundary callbacks don't get called.\nDo you have any clues what could be the problem?</p>\n"}, {"tags": ["http", "kotlin", "get", "jax-rs", "path-parameter"], "answers": [{"tags": [], "owner": {"reputation": 420, "user_id": 3738870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/190425893cffeaa9db58f472ef15b111?s=128&d=identicon&r=PG&f=1", "display_name": "user3738870", "link": "https://stackoverflow.com/users/3738870/user3738870"}, "is_accepted": false, "score": 0, "last_activity_date": 1588936910, "creation_date": 1588936910, "answer_id": 61678001, "question_id": 55496059, "link": "https://stackoverflow.com/questions/55496059/creating-a-get-method-with-request-body-in-kotlin-using-arest-framework/61678001#61678001", "title": "Creating a GET method with request body in kotlin using ARest Framework", "body": "<p>The resource and data class expects parameters as query parameters, but you send them in the body. You should send them as query parameters instead (<code>getStatus?aaa=string&amp;bbb=string&amp;ccc=HEAD</code>), or if you want to send it in the body (which is not recommended for a <code>GET</code> request), you have to modify your code, for example:</p>\n\n<pre><code>@GET\n@Path(\"getStatus/\")\n@Produces(MediaType.APPLICATION_JSON)\nfun getStatus(getRequest: GetRequest) : GetResponse\n\nclass GetRequest(var aaa: String? = null,\n                 var bbb: String? = null,\n                 var ccc: UserDefinedType? = null)\n</code></pre>\n"}], "owner": {"reputation": 58, "user_id": 9839970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdeeb6e3975edf2fe212dadd58bab24e?s=128&d=identicon&r=PG&f=1", "display_name": "Sathya", "link": "https://stackoverflow.com/users/9839970/sathya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 252, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1588936910, "creation_date": 1554297075, "last_edit_date": 1554297649, "question_id": 55496059, "link": "https://stackoverflow.com/questions/55496059/creating-a-get-method-with-request-body-in-kotlin-using-arest-framework", "title": "Creating a GET method with request body in kotlin using ARest Framework", "body": "<p>I am setting up a new service consisting of GET, DELETE and POST method APIs using ARest framework in kotlin. </p>\n\n<p>I am wrapping up the inputs in a data class and passing it out to the methods. In this case DELETE and POST method works fine but I face some problem with the GET method. </p>\n\n<p>Data class for wrapping the input :</p>\n\n<pre><code>class GetRequest(@QueryParam(\"aaa\") var aaa: String? = null,\n                                        @QueryParam(\"bbb\") var bbb: String? = null,\n                                        @QueryParam(\"ccc\") var ccc: UserDefinedType? = null)\n</code></pre>\n\n<p>Model definition :</p>\n\n<pre><code>@GET\n@Path(\"getStatus/\")\n@Produces(MediaType.APPLICATION_JSON)\nfun getStatus(@NotNull @BeanParam getRequest: GetRequest) : GetResponse\n</code></pre>\n\n<p>I use swagger to call the methods,\nBody of the request :</p>\n\n<pre><code>{\n  \"aaa\": \"string\",\n  \"bbb\": \"string\",\n  \"ccc\": \"HEAD\"\n}\n</code></pre>\n\n<p>My understanding is that, @BeanParam will inject the corresponding parameters from the query into the data class. But from swagger I find the request URL as,\nhttps://:8090/api/getStatus and couldn't find any query params. Because of which the value of \"aaa\" remains null instead of getting changed to \"string\". Could someone help me in pointing out the mistake I made here?</p>\n"}, {"tags": ["kotlin", "android-espresso"], "comments": [{"owner": {"reputation": 1240, "user_id": 4907678, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-AtbORjvk7z8/AAAAAAAAAAI/AAAAAAAAAAA/j24q0gq8FHY/photo.jpg?sz=128", "display_name": "saiedmomen", "link": "https://stackoverflow.com/users/4907678/saiedmomen"}, "edited": false, "score": 0, "creation_date": 1558430159, "post_id": 55496047, "comment_id": 99088795, "body": "Did you manage to solve it?"}, {"owner": {"reputation": 8644, "user_id": 6813231, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/gy8Sg.jpg?s=128&g=1", "display_name": "a_subscriber", "link": "https://stackoverflow.com/users/6813231/a-subscriber"}, "reply_to_user": {"reputation": 1240, "user_id": 4907678, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-AtbORjvk7z8/AAAAAAAAAAI/AAAAAAAAAAA/j24q0gq8FHY/photo.jpg?sz=128", "display_name": "saiedmomen", "link": "https://stackoverflow.com/users/4907678/saiedmomen"}, "edited": false, "score": 1, "creation_date": 1558433522, "post_id": 55496047, "comment_id": 99090796, "body": "@saiedmomen this help:     atRule  atJvmField    var tradersIntentTestRule = IntentsTestRule(TradersActivity::class.java, false, false)"}], "answers": [{"comments": [{"owner": {"reputation": 877, "user_id": 4821148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bOZSR.png?s=128&g=1", "display_name": "Nauman Ash", "link": "https://stackoverflow.com/users/4821148/nauman-ash"}, "edited": false, "score": 0, "creation_date": 1570774639, "post_id": 56286885, "comment_id": 103027277, "body": "that was my problem"}, {"owner": {"reputation": 7405, "user_id": 448357, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2a937e2f64c4fa7c3a0baf9d1b13a52d?s=128&d=identicon&r=PG", "display_name": "Alexander Pacha", "link": "https://stackoverflow.com/users/448357/alexander-pacha"}, "edited": false, "score": 7, "creation_date": 1580290880, "post_id": 56286885, "comment_id": 106045554, "body": "This answer does not make any sense. When you remove the test method, then there are no more tests to run, therefore it works. But that&#39;s not the point."}], "tags": [], "owner": {"reputation": 856, "user_id": 2585728, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/87c13b89c7e2822b60d09cc0877201ac?s=128&d=identicon&r=PG", "display_name": "JackWu", "link": "https://stackoverflow.com/users/2585728/jackwu"}, "is_accepted": false, "score": 11, "last_activity_date": 1558678903, "creation_date": 1558678903, "answer_id": 56286885, "question_id": 55496047, "link": "https://stackoverflow.com/questions/55496047/delegate-runner-androidx-test-internal-runner-junit4-androidjunit4classrunner/56286885#56286885", "title": "Delegate runner &#39;androidx.test.internal.runner.junit4.AndroidJUnit4ClassRunner&#39; for AndroidJUnit4 could not be loaded", "body": "<p>The error message displayed when I delete the @Test method.</p>\n\n<p>You can try to put a @Test method and run</p>\n\n<pre><code>@Test\npublic void signInTest() {\n\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1307, "user_id": 1363742, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a1f0e3371f4ec5080c73f9cd7e2e41a0?s=128&d=identicon&r=PG", "display_name": "luca992", "link": "https://stackoverflow.com/users/1363742/luca992"}, "is_accepted": false, "score": 2, "last_activity_date": 1563429738, "creation_date": 1563429738, "answer_id": 57087991, "question_id": 55496047, "link": "https://stackoverflow.com/questions/55496047/delegate-runner-androidx-test-internal-runner-junit4-androidjunit4classrunner/57087991#57087991", "title": "Delegate runner &#39;androidx.test.internal.runner.junit4.AndroidJUnit4ClassRunner&#39; for AndroidJUnit4 could not be loaded", "body": "<p>I just wasted all day on this issue \ud83d\ude35</p>\n\n<p>I'm guessing you are using the multiplatform plugin like I am.</p>\n\n<p>I was about to give up on trying to moving my instrumented tests to src/androidTest/kotlin instead of src/androidTest/java</p>\n\n<p>when I decided to log kotlin.sourcesets.names, which printed</p>\n\n<pre><code>[androidAndroidTest, androidAndroidTestDebug, androidDebug, androidMain, androidRelease, androidTest, androidTestDebug, androidTestRelease, commonMain, commonTest, iosArm32Main, iosArm32Test, iosArm64Main, iosArm64Test, iosX64Main, iosX64Test, macosX64Main, macosX64Test]\n</code></pre>\n\n<p>Soo I realized in order for dependencies to resolve correctly I needed to change</p>\n\n<pre><code>androidTestImplementation -&gt; androidAndroidTestImplementation\ntestImplementation -&gt; androidTestImplementation\n</code></pre>\n\n<p>They don't describe this in the documentation of course.\n(as far as I have found) </p>\n\n<p>... so for example, for you, I think the dependencies for your instrumented test dependencies should be:</p>\n\n<pre><code>androidAndroidTestImplementation 'androidx.test.espresso:espresso-core:3.2.0-alpha02'\n</code></pre>\n\n<p>not</p>\n\n<p><strike>androidTestImplementation 'androidx.test.espresso:espresso-core:3.2.0-alpha02'</strike></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12455606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6b62d6a6aa68e6701ae2da6bdea53e9?s=128&d=identicon&r=PG&f=1", "display_name": "fsryan", "link": "https://stackoverflow.com/users/12455606/fsryan"}, "is_accepted": false, "score": 0, "last_activity_date": 1575017808, "creation_date": 1575017808, "answer_id": 59101616, "question_id": 55496047, "link": "https://stackoverflow.com/questions/55496047/delegate-runner-androidx-test-internal-runner-junit4-androidjunit4classrunner/59101616#59101616", "title": "Delegate runner &#39;androidx.test.internal.runner.junit4.AndroidJUnit4ClassRunner&#39; for AndroidJUnit4 could not be loaded", "body": "<p>You don't have any functions annotated with <code>@Test</code>. This is likely the cause of the issue. I've run my own test using the AndroidJUnit4 runner on a class without <code>@Test</code> functions, and reconstructed this behavior.</p>\n\n<p>The AndroidJUnit4 JUnit4 runner is the cause of this issue, and despite its attempt to provide a detailed message (see the code where the exception is thrown), it gives you a wrong message.</p>\n\n<p>The following are more ways to achieve this error:</p>\n\n<pre><code>@Test\nfun willThrowInitializationErrorBecauseReturnsNonUnitValue(): Int {\n    return 0\n}\n\n@Test\nfun willThrowInitializationErrorBecauseTakesParameters(param: Int) {\n}\n</code></pre>\n\n<p>The error is generated by the fact that you're writing JUnit4 style tests, and they're expected to conform to JUnit4 semantics, but it would be nice if the error message were more clear.</p>\n\n<p>To make matters worse, if one test function is messed up the runner won't run any tests because the <code>InitializationError</code> is thrown in the constructor of the AndroidJUnit4 class.</p>\n"}, {"comments": [{"owner": {"reputation": 5049, "user_id": 5288316, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/bfc9b80e12b12bd4dd8a3953679d0c84?s=128&d=identicon&r=PG&f=1", "display_name": "Nicolas", "link": "https://stackoverflow.com/users/5288316/nicolas"}, "edited": false, "score": 4, "creation_date": 1592062710, "post_id": 59889416, "comment_id": 110292550, "body": "Changing <code>@Rule</code> to ``@get:Rule` resolved the issue for me."}], "tags": [], "owner": {"reputation": 1208, "user_id": 1035292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b0072ce61d8a1ff9160299d52ca855a?s=128&d=identicon&r=PG", "display_name": "user1035292", "link": "https://stackoverflow.com/users/1035292/user1035292"}, "is_accepted": false, "score": 15, "last_activity_date": 1579830482, "creation_date": 1579830482, "answer_id": 59889416, "question_id": 55496047, "link": "https://stackoverflow.com/questions/55496047/delegate-runner-androidx-test-internal-runner-junit4-androidjunit4classrunner/59889416#59889416", "title": "Delegate runner &#39;androidx.test.internal.runner.junit4.AndroidJUnit4ClassRunner&#39; for AndroidJUnit4 could not be loaded", "body": "<p>I faced this problem in kotlin , used below code and it worked</p>\n\n<pre><code>@RunWith(AndroidJUnit4::class)\n\n@LargeTest\n\nclass MainActivityTest {\n\n    private val TAG = \"MainActivityTest\"\n\n    @get:Rule\n    val activityRule = ActivityTestRule(MainActivity::class.java)\n}\n</code></pre>\n\n<p>follow the link below:-\n<a href=\"https://developer.android.com/training/testing/junit-rules\" rel=\"noreferrer\">https://developer.android.com/training/testing/junit-rules</a></p>\n"}, {"comments": [{"owner": {"reputation": 69, "user_id": 2111316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc2b08d448c3f370ec29a3c8c863c94f?s=128&d=identicon&r=PG", "display_name": "Edward Woolhouse", "link": "https://stackoverflow.com/users/2111316/edward-woolhouse"}, "edited": false, "score": 0, "creation_date": 1594211379, "post_id": 62467681, "comment_id": 111046168, "body": "This was it for me - more generally, if the signature of a test was incorrect I received this error. I bumped into this testing coroutines where I omitted the <code>&lt;Unit&gt;</code> on the example below. <code>fun testSuspendFunction() = runBlocking&lt;Unit&gt; {}</code>"}], "tags": [], "owner": {"reputation": 3042, "user_id": 2787507, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/lv63g.jpg?s=128&g=1", "display_name": "nutella_eater", "link": "https://stackoverflow.com/users/2787507/nutella-eater"}, "is_accepted": false, "score": 2, "last_activity_date": 1592560314, "creation_date": 1592560314, "answer_id": 62467681, "question_id": 55496047, "link": "https://stackoverflow.com/questions/55496047/delegate-runner-androidx-test-internal-runner-junit4-androidjunit4classrunner/62467681#62467681", "title": "Delegate runner &#39;androidx.test.internal.runner.junit4.AndroidJUnit4ClassRunner&#39; for AndroidJUnit4 could not be loaded", "body": "<p>I got this error when I have some parameters in my test method.\nSo, if you have it - delete it.</p>\n\n<pre><code>@Test\nfun someTestMethod(someParams: Int) { // delete method params\n    assert(1==1)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 13689076, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GircWokpVomhdUUMJ7dy8KakqAtsrCQhrSD0hn8fz4=k-s128", "display_name": "cebile balufu", "link": "https://stackoverflow.com/users/13689076/cebile-balufu"}, "is_accepted": false, "score": 2, "last_activity_date": 1594892524, "creation_date": 1594892524, "answer_id": 62931833, "question_id": 55496047, "link": "https://stackoverflow.com/questions/55496047/delegate-runner-androidx-test-internal-runner-junit4-androidjunit4classrunner/62931833#62931833", "title": "Delegate runner &#39;androidx.test.internal.runner.junit4.AndroidJUnit4ClassRunner&#39; for AndroidJUnit4 could not be loaded", "body": "<p>just make sure that if your test is calling any suspend methods, you run your test with <code>runBlocking{}</code>. Solved the problem for me</p>\n"}, {"comments": [{"owner": {"reputation": 315, "user_id": 11021795, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8XwOZ.jpg?s=128&g=1", "display_name": "Hooni", "link": "https://stackoverflow.com/users/11021795/hooni"}, "edited": false, "score": 0, "creation_date": 1610315884, "post_id": 62933901, "comment_id": 116087990, "body": "this did it for me"}], "tags": [], "owner": {"reputation": 2879, "user_id": 1856562, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/73aac0cf3773eb9f6627265c407e0ecc?s=128&d=identicon&r=PG", "display_name": "FarshidABZ", "link": "https://stackoverflow.com/users/1856562/farshidabz"}, "is_accepted": false, "score": 6, "last_activity_date": 1594899605, "creation_date": 1594899605, "answer_id": 62933901, "question_id": 55496047, "link": "https://stackoverflow.com/questions/55496047/delegate-runner-androidx-test-internal-runner-junit4-androidjunit4classrunner/62933901#62933901", "title": "Delegate runner &#39;androidx.test.internal.runner.junit4.AndroidJUnit4ClassRunner&#39; for AndroidJUnit4 could not be loaded", "body": "<p>For those who still have problems like this, This happens because Kotlin compiler wants to generate getter/setter properties. for example, I've got this error because I didn't mention <code>@Rule</code> annotation with <code>@get:Rule</code>.</p>\n<p>If we annotate properties like this with <code>@get:...</code> or <code>@JvmField</code> it could solve the problem.</p>\n<pre><code>@get:Rule\nvar mActivityRule = ActivityTestRule(MainActivity::class.java)\n</code></pre>\n<p>Or</p>\n<pre><code>@Rule\n@JvmField\nvar mActivityRule = ActivityTestRule(MainActivity::class.java)\n</code></pre>\n<p><code>@JvmField</code> instructs the Kotlin compiler not to generate getters/setters for this property and expose it as a field.</p>\n"}, {"tags": [], "owner": {"reputation": 332, "user_id": 13268194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a2234addd76d0f132b858c7c1beda6e?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun A", "link": "https://stackoverflow.com/users/13268194/tarun-a"}, "is_accepted": false, "score": 0, "last_activity_date": 1603426561, "last_edit_date": 1603426561, "creation_date": 1603354645, "answer_id": 64478059, "question_id": 55496047, "link": "https://stackoverflow.com/questions/55496047/delegate-runner-androidx-test-internal-runner-junit4-androidjunit4classrunner/64478059#64478059", "title": "Delegate runner &#39;androidx.test.internal.runner.junit4.AndroidJUnit4ClassRunner&#39; for AndroidJUnit4 could not be loaded", "body": "<p>In My case while using Java,I faced issue when I did below mistakes.</p>\n<p>1)I had made <strong>ActivityTestRule</strong>  as <strong>private</strong>.</p>\n<pre><code>  All test cases should be public always.\n</code></pre>\n<p>2)I didn't add static for <strong>BeforeClass</strong> and <strong>AfterClass</strong> methods</p>\n<pre><code>  Methods of @BeforeClass and @AfterClass should be static\n\n  Ex)@BeforeClass\n     public static void setUp(){\n\n     }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 15126389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bb3572fb14c61704d881782c8015988?s=128&d=identicon&r=PG&f=1", "display_name": "life_hazard", "link": "https://stackoverflow.com/users/15126389/life-hazard"}, "is_accepted": false, "score": 0, "last_activity_date": 1612223378, "creation_date": 1612223378, "answer_id": 66001763, "question_id": 55496047, "link": "https://stackoverflow.com/questions/55496047/delegate-runner-androidx-test-internal-runner-junit4-androidjunit4classrunner/66001763#66001763", "title": "Delegate runner &#39;androidx.test.internal.runner.junit4.AndroidJUnit4ClassRunner&#39; for AndroidJUnit4 could not be loaded", "body": "<p>Also just to expand on the answers, but it won't help for this particular reason:</p>\n<p>If you use kotlin and get this while testing, make sure you aren't using <code>suspend</code> in DAO.</p>\n<p>(Sorry to put it here, there was no thread with this in kotlin and I already found the solution so it might help someone)</p>\n"}], "owner": {"reputation": 8644, "user_id": 6813231, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/gy8Sg.jpg?s=128&g=1", "display_name": "a_subscriber", "link": "https://stackoverflow.com/users/6813231/a-subscriber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9170, "favorite_count": 0, "answer_count": 9, "score": 16, "last_activity_date": 1612223378, "creation_date": 1554297038, "question_id": 55496047, "link": "https://stackoverflow.com/questions/55496047/delegate-runner-androidx-test-internal-runner-junit4-androidjunit4classrunner", "title": "Delegate runner &#39;androidx.test.internal.runner.junit4.AndroidJUnit4ClassRunner&#39; for AndroidJUnit4 could not be loaded", "body": "<p>I  try to run Kotlin instrumentation tests for android.</p>\n\n<p>In my app/build.gradle:</p>\n\n<pre><code>    android {\n        dataBinding {\n            enabled = true\n        }\n        compileSdkVersion 28\n        defaultConfig {\n            applicationId \"com.myproject\"\n            minSdkVersion 18\n            targetSdkVersion 28\n            versionCode 6\n            versionName \"0.0.7\"\n            testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\n        }\n\n        sourceSets {\n            main.java.srcDirs += 'src/main/kotlin'\n            androidTest.java.srcDirs += 'src/androidTest/kotlin'\n        }\n\nandroidTestImplementation 'androidx.test.espresso:espresso-core:3.2.0-alpha02'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.0'\n    androidTestImplementation 'androidx.test:rules:1.1.2-alpha02'\n    androidTestImplementation 'androidx.test:runner:1.1.2-alpha02'\n</code></pre>\n\n<p>In folder <code>/app/src/androidTest/kotlin/com/myproject/</code>  I has Kotlin test:</p>\n\n<pre><code>import androidx.test.ext.junit.runners.AndroidJUnit4\nimport androidx.test.filters.SmallTest\nimport org.junit.Rule\nimport org.junit.runner.RunWith\n\nimport androidx.test.rule.ActivityTestRule\nimport com.myproject.ui.activity.TradersActivity\nimport org.junit.Before\n\n\n@RunWith(AndroidJUnit4::class)\n@SmallTest\nclass TradersActivityTest {\n\n    private lateinit var stringToBetyped: String\n\n    @get:Rule\n    var activityRule: ActivityTestRule&lt;TradersActivity&gt; = ActivityTestRule(TradersActivity::class.java)\n\n    @Before\n    fun initValidString() {\n        // Specify a valid string.\n        stringToBetyped = \"Espresso\"\n    }\n\n}\n</code></pre>\n\n<p>but when I run test I get error:</p>\n\n<pre><code>$ adb shell am instrument -w -r   -e debug false -e class 'com.myproject.TradersActivityTest' com.myproject.debug.test/androidx.test.runner.AndroidJUnitRunner\nClient not ready yet..\nStarted running tests\n\njava.lang.RuntimeException: Delegate runner 'androidx.test.internal.runner.junit4.AndroidJUnit4ClassRunner' for AndroidJUnit4 could not be loaded.\nat androidx.test.ext.junit.runners.AndroidJUnit4.throwInitializationError(AndroidJUnit4.java:92)\nat androidx.test.ext.junit.runners.AndroidJUnit4.loadRunner(AndroidJUnit4.java:82)\nat androidx.test.ext.junit.runners.AndroidJUnit4.loadRunner(AndroidJUnit4.java:51)\nat androidx.test.ext.junit.runners.AndroidJUnit4.&lt;init&gt;(AndroidJUnit4.java:46)\nat java.lang.reflect.Constructor.newInstance(Native Method)\nat org.junit.internal.builders.AnnotatedBuilder.buildRunner(AnnotatedBuilder.java:104)\nat org.junit.internal.builders.AnnotatedBuilder.runnerForClass(AnnotatedBuilder.java:86)\nat androidx.test.internal.runner.junit4.AndroidAnnotatedBuilder.runnerForClass(AndroidAnnotatedBuilder.java:63)\nat org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:59)\nat org.junit.internal.builders.AllDefaultPossibilitiesBuilder.runnerForClass(AllDefaultPossibilitiesBuilder.java:26)\nat androidx.test.internal.runner.AndroidRunnerBuilder.runnerForClass(AndroidRunnerBuilder.java:153)\nat org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:59)\nat androidx.test.internal.runner.TestLoader.doCreateRunner(TestLoader.java:73)\nat androidx.test.internal.runner.TestLoader.getRunnersFor(TestLoader.java:104)\nat androidx.test.internal.runner.TestRequestBuilder.build(TestRequestBuilder.java:789)\nat androidx.test.runner.AndroidJUnitRunner.buildRequest(AndroidJUnitRunner.java:544)\nat androidx.test.runner.AndroidJUnitRunner.onStart(AndroidJUnitRunner.java:387)\nat android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1879)\nCaused by: java.lang.reflect.InvocationTargetException\nat java.lang.reflect.Constructor.newInstance(Native Method)\nat androidx.test.ext.junit.runners.AndroidJUnit4.loadRunner(AndroidJUnit4.java:72)\n... 16 more\nCaused by: org.junit.runners.model.InitializationError\nat org.junit.runners.ParentRunner.validate(ParentRunner.java:418)\nat org.junit.runners.ParentRunner.&lt;init&gt;(ParentRunner.java:84)\nat org.junit.runners.BlockJUnit4ClassRunner.&lt;init&gt;(BlockJUnit4ClassRunner.java:65)\nat androidx.test.internal.runner.junit4.AndroidJUnit4ClassRunner.&lt;init&gt;(AndroidJUnit4ClassRunner.java:43)\nat androidx.test.internal.runner.junit4.AndroidJUnit4ClassRunner.&lt;init&gt;(AndroidJUnit4ClassRunner.java:48)\n... 18 more\n\nTests ran to completion.\n</code></pre>\n"}, {"tags": ["android", "api", "class", "asynchronous", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 1262, "user_id": 2607738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/571796baa99b24c4be39d8c685aec55a?s=128&d=identicon&r=PG", "display_name": "rafa", "link": "https://stackoverflow.com/users/2607738/rafa"}, "is_accepted": true, "score": 2, "last_activity_date": 1554298922, "creation_date": 1554298922, "answer_id": 55496659, "question_id": 55495899, "link": "https://stackoverflow.com/questions/55495899/callback-after-object-instanciation-which-contains-asynchronous-function/55496659#55496659", "title": "CallBack after object instanciation, which contains asynchronous function", "body": "<p>First of all we assume you don't want to use MVVM or so architecture. But I really recommend you to read about android architecture components like ViewModel, LiveData stuffs to understand how data flow should be done in android applications.</p>\n\n<p>Coming to basics(Not very clean way), We have to create a interface and pass the reference to Product class and on success you have use the reference to call the activity to update the textview.</p>\n\n<p>Step 1: create interface</p>\n\n<pre><code>interface ProductListener\n{\n    fun onSuccess()\n}\n</code></pre>\n\n<p>Step 2: Implement ProductListener in your activity</p>\n\n<pre><code>class GameActivity : AppCompatActivity(),ProductListener {\n\n ...\n ...\n ...\n\n override fun onSuccess() {\n\n    }\n}\n</code></pre>\n\n<p>Step 3: Pass the listener/activity reference to the Product class</p>\n\n<pre><code>val product = Product(3564700014677, this) //inside your activity\n</code></pre>\n\n<hr>\n\n<pre><code>class Product(code: Long, var listener: ProductListener) {\n\n...\n...\nprivate fun run(url: String) {\n        val request = Request.Builder()\n            .url(url)\n            .build()\n\n        client.newCall(request).enqueue(object : Callback {\n            override fun onFailure(call: Call?, e: IOException) {}\n            override fun onResponse(call: Call?, response: Response){\n                val jsonData = response.body()?.string()\n                val Jobject = JSONObject(jsonData)\n\n                name = Jobject.getJSONObject(\"product\").getString(\"product_name\")\n\n                // invoke listener here to let activity know the response\n\n                 listener.onSuccess()\n            }\n        })\n    }\n\n}\n</code></pre>\n\n<p>Step 4: Update the textview inside the onSuccess() implementation of activity</p>\n\n<pre><code>class GameActivity : AppCompatActivity(),ProductListener {\n\n     ...\n     ...\n     ...\n\n     override fun onSuccess() {\n            textView.text = product.name\n        }\n    }\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 7815575, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208264978894567/picture?type=large", "display_name": "Thomas", "link": "https://stackoverflow.com/users/7815575/thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 55496659, "answer_count": 1, "score": 0, "last_activity_date": 1554298922, "creation_date": 1554296597, "last_edit_date": 1554297934, "question_id": 55495899, "link": "https://stackoverflow.com/questions/55495899/callback-after-object-instanciation-which-contains-asynchronous-function", "title": "CallBack after object instanciation, which contains asynchronous function", "body": "<p>I got a Product class, which is constructed with a code. This code is made to call the open food facts API to instanciate all the class variables. The fact is the API call is an asynchronous function. So in my main Thread, when i try to access my object parameters, it's empty. Since i cannot interrupt the main Thread, <strong>how am i suppose to make a callback on my object instanciation ?</strong></p>\n\n<p>Here is the code</p>\n\n<p><strong>Product.kt</strong></p>\n\n<pre><code>class Product(code: Long) {\n\n    val client = OkHttpClient()\n\n    var name: String? = null\n    var imageUrl: String? = null\n    var packerCode: Int? = null\n    var packerCity: String? = null\n    var lat: Int? = null\n    var long: Int? = null\n\n    init {\n        run(\"https://fr.openfoodfacts.org/api/v0/produit/$code.json\")\n    }\n\n    private fun run(url: String) {\n        val request = Request.Builder()\n            .url(url)\n            .build()\n\n        client.newCall(request).enqueue(object : Callback {\n            override fun onFailure(call: Call?, e: IOException) {}\n            override fun onResponse(call: Call?, response: Response){\n                val jsonData = response.body()?.string()\n                val Jobject = JSONObject(jsonData)\n\n                name = Jobject.getJSONObject(\"product\").getString(\"product_name\")\n            }\n        })\n    }\n}\n</code></pre>\n\n<p><strong>GameActivity.kt</strong></p>\n\n<pre><code>class GameActivity : AppCompatActivity(){\n   override fun onCreate(savedInstanceState: Bundle?) {\n   super.onCreate(savedInstanceState)\n   setContentView(R.layout.activity_game)\n\n   val textView: TextView = findViewById(R.id.productName) as TextView\n   val product = Product(3564700014677)\n   // Product.name empty\n   textView.text = product.name\n}\n</code></pre>\n"}, {"tags": ["mvvm", "kotlin", "data-binding", "android-recyclerview", "android-livedata"], "answers": [{"tags": [], "owner": {"reputation": 1262, "user_id": 2607738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/571796baa99b24c4be39d8c685aec55a?s=128&d=identicon&r=PG", "display_name": "rafa", "link": "https://stackoverflow.com/users/2607738/rafa"}, "is_accepted": true, "score": 5, "last_activity_date": 1554292990, "creation_date": 1554292990, "answer_id": 55494709, "question_id": 55494038, "link": "https://stackoverflow.com/questions/55494038/mvvm-design-pattern-implementation-in-kotlin-for-a-recyclerview/55494709#55494709", "title": "MVVM design pattern implementation in kotlin for a recyclerview", "body": "<p>The core about MVVM is seperation of concerns. ViewModel should not hold any reference to the View(Activity/Fragment). LikeWise your Data/Repository layer should not hold ViewModel reference.</p>\n\n<p>So to achieve data flow you can use either Reactive Observables(Rx)/ LiveData from android architecture components to pass back the data. </p>\n\n<p>1) Create MutableLiveData in your Viewmodel.</p>\n\n<p>2) Set the MutableLiveData with api response model.</p>\n\n<p>3) Observe the MutableLiveData in your Fragment for the response data.</p>\n\n<p>4) Use the data to set your adapter inside your fragment.</p>\n\n<p>Please check <a href=\"https://developer.android.com/topic/libraries/architecture/viewmodel\" rel=\"noreferrer\">ViewModel - Developer document</a> to understand better.</p>\n"}], "owner": {"reputation": 4418, "user_id": 1672337, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/N8d0S.png?s=128&g=1", "display_name": "ranjith", "link": "https://stackoverflow.com/users/1672337/ranjith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4534, "favorite_count": 0, "accepted_answer_id": 55494709, "answer_count": 1, "score": 3, "last_activity_date": 1585386569, "creation_date": 1554290773, "question_id": 55494038, "link": "https://stackoverflow.com/questions/55494038/mvvm-design-pattern-implementation-in-kotlin-for-a-recyclerview", "title": "MVVM design pattern implementation in kotlin for a recyclerview", "body": "<p>I am a beginner in Kotlin and trying to implement  MVVM design pattern on android development. I have to implement a Recyclerview in a fragment.\nHow we can set adapter with value to a recyclerview from the viewmodel class since the api call is observed within the viewmodel.</p>\n\n<p>My fragment class is look like as below</p>\n\n<pre><code>class NotesFragment : Fragment() {\n\nlateinit var binding:FragmentNotesBinding\nlateinit var viewModel:NoteListViewModel\n\ncompanion object {\n    fun newInstance(param1: String): NotesFragment {\n        val fragment = NotesFragment()\n        val args = Bundle()\n        fragment.arguments = args\n        return fragment\n    }\n}\n\noverride fun onCreateView(inflater: LayoutInflater, container: ViewGroup?,\n                          savedInstanceState: Bundle?): View? {\n    binding = DataBindingUtil.inflate(inflater,R.layout.fragment_notes,container,false)\n    viewModel = NoteListViewModel(binding)\n    return binding.root\n}\n</code></pre>\n\n<p>is it good practice that we passing the binding object to our viewmodel class and  updating the viewModel object again from ViewModel class as below</p>\n\n<pre><code> private fun onSuccess(success: NoteResponse?) {\n    dataVisibility.value=View.VISIBLE\n    success.let {\n        noteAdapter= noteAdapter(documentResponse?.result,mContext)\n        binding.viewModel=this\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-alertdialog"], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 9796661, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zv3sgDnHKm0/AAAAAAAAAAI/AAAAAAAAAA4/BDY70b-EEnU/photo.jpg?sz=128", "display_name": "Mark", "link": "https://stackoverflow.com/users/9796661/mark"}, "edited": false, "score": 0, "creation_date": 1554291760, "post_id": 55493886, "comment_id": 97695673, "body": "I have to admit that using callbacks is new to me. What should I put instead of &quot;someDrawable&quot;"}, {"owner": {"reputation": 716, "user_id": 6341056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10205407799189045/picture?type=large", "display_name": "Diogo Rosa", "link": "https://stackoverflow.com/users/6341056/diogo-rosa"}, "reply_to_user": {"reputation": 69, "user_id": 9796661, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zv3sgDnHKm0/AAAAAAAAAAI/AAAAAAAAAA4/BDY70b-EEnU/photo.jpg?sz=128", "display_name": "Mark", "link": "https://stackoverflow.com/users/9796661/mark"}, "edited": false, "score": 0, "creation_date": 1554291926, "post_id": 55493886, "comment_id": 97695784, "body": "You should add the icon as a Drawable (for ex.) ContextCompat.getDrawable(context, R.drawable.iconFile)"}, {"owner": {"reputation": 716, "user_id": 6341056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10205407799189045/picture?type=large", "display_name": "Diogo Rosa", "link": "https://stackoverflow.com/users/6341056/diogo-rosa"}, "reply_to_user": {"reputation": 69, "user_id": 9796661, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zv3sgDnHKm0/AAAAAAAAAAI/AAAAAAAAAA4/BDY70b-EEnU/photo.jpg?sz=128", "display_name": "Mark", "link": "https://stackoverflow.com/users/9796661/mark"}, "edited": false, "score": 0, "creation_date": 1554292006, "post_id": 55493886, "comment_id": 97695829, "body": "And on the First dialog where i add the comment you add editIconButton.backgroundDrawable(someDrawable)"}], "tags": [], "owner": {"reputation": 716, "user_id": 6341056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10205407799189045/picture?type=large", "display_name": "Diogo Rosa", "link": "https://stackoverflow.com/users/6341056/diogo-rosa"}, "is_accepted": true, "score": 4, "last_activity_date": 1554290806, "last_edit_date": 1554290806, "creation_date": 1554290241, "answer_id": 55493886, "question_id": 55493568, "link": "https://stackoverflow.com/questions/55493568/passing-information-between-two-alert-dialogs/55493886#55493886", "title": "Passing information between two alert dialogs", "body": "<p>You can add a callback to the second dialog</p>\n\n<pre class=\"lang-koltin prettyprint-override\"><code>fun showIconDialog(callback : (Drawable) -&gt; Unit) { \n        //code \n        callback.invoke(someDrawable)\n    }\n</code></pre>\n\n<p>And on the first one you just do this:</p>\n\n<pre class=\"lang-koltin prettyprint-override\"><code>showIconDialog() { someDrawable -&gt;\n        //code to change the layout src icon\n    }\n</code></pre>\n\n\n"}], "owner": {"reputation": 69, "user_id": 9796661, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zv3sgDnHKm0/AAAAAAAAAAI/AAAAAAAAAA4/BDY70b-EEnU/photo.jpg?sz=128", "display_name": "Mark", "link": "https://stackoverflow.com/users/9796661/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 55493886, "answer_count": 1, "score": 3, "last_activity_date": 1554290806, "creation_date": 1554289220, "question_id": 55493568, "link": "https://stackoverflow.com/questions/55493568/passing-information-between-two-alert-dialogs", "title": "Passing information between two alert dialogs", "body": "<p>ImageView in first alert dialog opens second dialog to change an imageResource of the ImageView  in the first dialog. However I don't know how to make connection between two alert dialogs</p>\n\n<p>Both have different xml layouts, so I assume that in second dialog I should make a reference to the layout of the first dialog</p>\n\n<pre><code>private fun editItemDialog() {\n    val dialogBuilder1 = AlertDialog.Builder(this)\n    val inflater = this.layoutInflater\n    val dialogView = inflater.inflate(R.layout.edit_dialog, null)\n    dialogBuilder1.setView(dialogView)\n\n    var editIconButton = dialogView.findViewById&lt;View&gt;(R.id.editIcon) as ImageView\n\n    editIconButton.setOnClickListener{\n        showIconDialog()\n\n    }\n\n\n\n    dialogBuilder1.setTitle(\"Edit mode\")\n    dialogBuilder1.setPositiveButton(\"Save\") { _, _ -&gt;\n       //sth\n    }\n    dialogBuilder1.setNegativeButton(\"Cancel\") { _, _ -&gt;\n       //sth\n    }\n    val b = dialogBuilder1.create()\n    b.show()\n}     \n</code></pre>\n\n<hr>\n\n<pre><code>private fun showIconDialog() {\n    val dialogBuilder = AlertDialog.Builder(this)\n    val inflater = this.layoutInflater\n    val dialogView = inflater.inflate(R.layout.icons, null)\n    dialogBuilder.setView(dialogView)\n\n    //examplary two icons to select\n\n    var travelRB = dialogView.findViewById&lt;View&gt;(R.id.travel) as RadioButton\n\n    var travRB = dialogView.findViewById&lt;View&gt;(R.id.travel) as RadioButton\n\n\n    dialogBuilder.setTitle(\"Icon dialog\")\n    dialogBuilder.setMessage(\"Select an icon\")\n    dialogBuilder.setPositiveButton(\"Save\") { _, _ -&gt;\n         //here I would like to change an icon of the ImageView, for example:\n         editIconButton.setImageResource(R.id.travel)\n\n    dialogBuilder.setNegativeButton(\"Cancel\") { _, _ -&gt;\n        //sth\n    }\n    val b = dialogBuilder.create()\n    b.show()\n\n\n}\n</code></pre>\n"}, {"tags": ["java", "serialization", "kotlin", "jackson", "deserialization"], "comments": [{"owner": {"reputation": 983, "user_id": 6454838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebe0221051c0020c9a215370c282ffef?s=128&d=identicon&r=PG&f=1", "display_name": "NickAth", "link": "https://stackoverflow.com/users/6454838/nickath"}, "edited": false, "score": 0, "creation_date": 1554287113, "post_id": 55492657, "comment_id": 97692837, "body": "So &quot;theValue&quot; is a simple string?"}, {"owner": {"reputation": 1069, "user_id": 1242890, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3721ddf52058e3ee8162e483c0d8093e?s=128&d=identicon&r=PG", "display_name": "Marc von Renteln", "link": "https://stackoverflow.com/users/1242890/marc-von-renteln"}, "reply_to_user": {"reputation": 983, "user_id": 6454838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebe0221051c0020c9a215370c282ffef?s=128&d=identicon&r=PG&f=1", "display_name": "NickAth", "link": "https://stackoverflow.com/users/6454838/nickath"}, "edited": false, "score": 0, "creation_date": 1554294288, "post_id": 55492657, "comment_id": 97697329, "body": "Yes, it is a String."}, {"owner": {"reputation": 16481, "user_id": 1392277, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yJUSK.jpg?s=128&g=1", "display_name": "LppEdd", "link": "https://stackoverflow.com/users/1392277/lppedd"}, "edited": false, "score": 0, "creation_date": 1554295471, "post_id": 55492657, "comment_id": 97698069, "body": "@MarcvonRenteln see answer. JsonCreator works for every primitive type too (string and numbers)."}], "answers": [{"comments": [{"owner": {"reputation": 1069, "user_id": 1242890, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3721ddf52058e3ee8162e483c0d8093e?s=128&d=identicon&r=PG", "display_name": "Marc von Renteln", "link": "https://stackoverflow.com/users/1242890/marc-von-renteln"}, "edited": false, "score": 0, "creation_date": 1554296750, "post_id": 55492892, "comment_id": 97698917, "body": "Sorry, @JsonCreator did not work for me. When I deserialize <code>class MyValueObject @JsonCreator constructor(@JsonValue val value: String)</code> it results in the same exception (I added it to the description). I&#39;ve added my test method to the question. When I decompile the kotlin dataclass to Java the constructor looks like this: <code>@JsonCreator    public MyValueObject(@NotNull String value) {       Intrinsics.checkParameterIsNotNull(value, &quot;value&quot;);       super();       this.value = value;    }</code> This seems right. But jackson does not use it."}, {"owner": {"reputation": 16481, "user_id": 1392277, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yJUSK.jpg?s=128&g=1", "display_name": "LppEdd", "link": "https://stackoverflow.com/users/1392277/lppedd"}, "reply_to_user": {"reputation": 1069, "user_id": 1242890, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3721ddf52058e3ee8162e483c0d8093e?s=128&d=identicon&r=PG", "display_name": "Marc von Renteln", "link": "https://stackoverflow.com/users/1242890/marc-von-renteln"}, "edited": false, "score": 0, "creation_date": 1554297099, "post_id": 55492892, "comment_id": 97699152, "body": "@MarcvonRenteln strange. I&#39;ve tested what I posted. Let me try."}, {"owner": {"reputation": 16481, "user_id": 1392277, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yJUSK.jpg?s=128&g=1", "display_name": "LppEdd", "link": "https://stackoverflow.com/users/1392277/lppedd"}, "reply_to_user": {"reputation": 1069, "user_id": 1242890, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3721ddf52058e3ee8162e483c0d8093e?s=128&d=identicon&r=PG", "display_name": "Marc von Renteln", "link": "https://stackoverflow.com/users/1242890/marc-von-renteln"}, "edited": false, "score": 1, "creation_date": 1554297159, "post_id": 55492892, "comment_id": 97699189, "body": "@MarcvonRenteln okay, it&#39;s a Kotlin problem. I&#39;ll see what i can do"}, {"owner": {"reputation": 1069, "user_id": 1242890, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3721ddf52058e3ee8162e483c0d8093e?s=128&d=identicon&r=PG", "display_name": "Marc von Renteln", "link": "https://stackoverflow.com/users/1242890/marc-von-renteln"}, "edited": false, "score": 0, "creation_date": 1554297580, "post_id": 55492892, "comment_id": 97699494, "body": "I have added a working solution with a companion method. But this is to verbose. So @JsonCreator works with static methods but not with Kotlin-Constructors...?"}, {"owner": {"reputation": 16481, "user_id": 1392277, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yJUSK.jpg?s=128&g=1", "display_name": "LppEdd", "link": "https://stackoverflow.com/users/1392277/lppedd"}, "reply_to_user": {"reputation": 1069, "user_id": 1242890, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3721ddf52058e3ee8162e483c0d8093e?s=128&d=identicon&r=PG", "display_name": "Marc von Renteln", "link": "https://stackoverflow.com/users/1242890/marc-von-renteln"}, "edited": false, "score": 0, "creation_date": 1554297686, "post_id": 55492892, "comment_id": 97699564, "body": "@MarcvonRenteln I came up with a similar solution. I&#39;m trying to understand why constructors don&#39;t work."}, {"owner": {"reputation": 16481, "user_id": 1392277, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yJUSK.jpg?s=128&g=1", "display_name": "LppEdd", "link": "https://stackoverflow.com/users/1392277/lppedd"}, "reply_to_user": {"reputation": 1069, "user_id": 1242890, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3721ddf52058e3ee8162e483c0d8093e?s=128&d=identicon&r=PG", "display_name": "Marc von Renteln", "link": "https://stackoverflow.com/users/1242890/marc-von-renteln"}, "edited": false, "score": 0, "creation_date": 1554297775, "post_id": 55492892, "comment_id": 97699612, "body": "@MarcvonRenteln can&#39;t you use a Java class in place of a Kotlin one? Just a possibility."}, {"owner": {"reputation": 1069, "user_id": 1242890, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3721ddf52058e3ee8162e483c0d8093e?s=128&d=identicon&r=PG", "display_name": "Marc von Renteln", "link": "https://stackoverflow.com/users/1242890/marc-von-renteln"}, "edited": false, "score": 0, "creation_date": 1554297993, "post_id": 55492892, "comment_id": 97699726, "body": "We have a kotlin project. This would cause dozens of Java classes and two compilers. For Java classes I would have to add equals/hashCode/toString/Constructor so the above &quot;verbose&quot; solution in Kotlin would be much smaller. So, no, I would not use Java classes instead."}, {"owner": {"reputation": 16481, "user_id": 1392277, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yJUSK.jpg?s=128&g=1", "display_name": "LppEdd", "link": "https://stackoverflow.com/users/1392277/lppedd"}, "reply_to_user": {"reputation": 1069, "user_id": 1242890, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3721ddf52058e3ee8162e483c0d8093e?s=128&d=identicon&r=PG", "display_name": "Marc von Renteln", "link": "https://stackoverflow.com/users/1242890/marc-von-renteln"}, "edited": false, "score": 0, "creation_date": 1554298505, "post_id": 55492892, "comment_id": 97700057, "body": "@MarcvonRenteln Let us <a href=\"https://chat.stackoverflow.com/rooms/191166/discussion-between-lppedd-and-marc-von-renteln\">continue this discussion in chat</a>."}, {"owner": {"reputation": 16481, "user_id": 1392277, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yJUSK.jpg?s=128&g=1", "display_name": "LppEdd", "link": "https://stackoverflow.com/users/1392277/lppedd"}, "reply_to_user": {"reputation": 1069, "user_id": 1242890, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3721ddf52058e3ee8162e483c0d8093e?s=128&d=identicon&r=PG", "display_name": "Marc von Renteln", "link": "https://stackoverflow.com/users/1242890/marc-von-renteln"}, "edited": false, "score": 0, "creation_date": 1554301489, "post_id": 55492892, "comment_id": 97701988, "body": "@MarcvonRenteln look at the bottom. Solution found ;)"}, {"owner": {"reputation": 16481, "user_id": 1392277, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yJUSK.jpg?s=128&g=1", "display_name": "LppEdd", "link": "https://stackoverflow.com/users/1392277/lppedd"}, "reply_to_user": {"reputation": 1069, "user_id": 1242890, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3721ddf52058e3ee8162e483c0d8093e?s=128&d=identicon&r=PG", "display_name": "Marc von Renteln", "link": "https://stackoverflow.com/users/1242890/marc-von-renteln"}, "edited": false, "score": 0, "creation_date": 1554301749, "post_id": 55492892, "comment_id": 97702159, "body": "@MarcvonRenteln found another solution, which seems the perfect one. At the bottom."}, {"owner": {"reputation": 1069, "user_id": 1242890, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3721ddf52058e3ee8162e483c0d8093e?s=128&d=identicon&r=PG", "display_name": "Marc von Renteln", "link": "https://stackoverflow.com/users/1242890/marc-von-renteln"}, "edited": false, "score": 1, "creation_date": 1554302311, "post_id": 55492892, "comment_id": 97702544, "body": "The chat link didn&#39;t work for me in firefox and chrome. :( I analyzed the bytecode, reworked your first idea and in the meantime I found the exact same solution as your last suggestion with <code>@get:</code> ;) Great! Thanks for your help!"}, {"owner": {"reputation": 1069, "user_id": 1242890, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3721ddf52058e3ee8162e483c0d8093e?s=128&d=identicon&r=PG", "display_name": "Marc von Renteln", "link": "https://stackoverflow.com/users/1242890/marc-von-renteln"}, "edited": false, "score": 0, "creation_date": 1554308096, "post_id": 55492892, "comment_id": 97706281, "body": "There is an even shorter version. The problem was the missing <code>get:</code> and not the <code>@JsonCreator constructor(...)</code>. You can drop it and it works: <code>data class MyValueObject(@get:JsonValue val value: String)</code>. I have tested this with String, UUID, LocalDate and in conjunction with an outer class. It works without <code>@JsonCreator</code>."}, {"owner": {"reputation": 16481, "user_id": 1392277, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yJUSK.jpg?s=128&g=1", "display_name": "LppEdd", "link": "https://stackoverflow.com/users/1392277/lppedd"}, "reply_to_user": {"reputation": 1069, "user_id": 1242890, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3721ddf52058e3ee8162e483c0d8093e?s=128&d=identicon&r=PG", "display_name": "Marc von Renteln", "link": "https://stackoverflow.com/users/1242890/marc-von-renteln"}, "edited": false, "score": 0, "creation_date": 1554308254, "post_id": 55492892, "comment_id": 97706373, "body": "@MarcvonRenteln just verified, works in Java too. Thanks! I think using JsonCreator does help to notice what Jackson will do, however (for the developer who read the code)."}, {"owner": {"reputation": 1069, "user_id": 1242890, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3721ddf52058e3ee8162e483c0d8093e?s=128&d=identicon&r=PG", "display_name": "Marc von Renteln", "link": "https://stackoverflow.com/users/1242890/marc-von-renteln"}, "edited": false, "score": 0, "creation_date": 1554308343, "post_id": 55492892, "comment_id": 97706418, "body": "Would you add it to your answer?"}, {"owner": {"reputation": 16481, "user_id": 1392277, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yJUSK.jpg?s=128&g=1", "display_name": "LppEdd", "link": "https://stackoverflow.com/users/1392277/lppedd"}, "reply_to_user": {"reputation": 1069, "user_id": 1242890, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3721ddf52058e3ee8162e483c0d8093e?s=128&d=identicon&r=PG", "display_name": "Marc von Renteln", "link": "https://stackoverflow.com/users/1242890/marc-von-renteln"}, "edited": false, "score": 0, "creation_date": 1554308415, "post_id": 55492892, "comment_id": 97706454, "body": "@MarcvonRenteln done! It&#39;s interesting. I don&#39;t think it is documented, I&#39;ll take a look"}, {"owner": {"reputation": 16481, "user_id": 1392277, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yJUSK.jpg?s=128&g=1", "display_name": "LppEdd", "link": "https://stackoverflow.com/users/1392277/lppedd"}, "reply_to_user": {"reputation": 1069, "user_id": 1242890, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3721ddf52058e3ee8162e483c0d8093e?s=128&d=identicon&r=PG", "display_name": "Marc von Renteln", "link": "https://stackoverflow.com/users/1242890/marc-von-renteln"}, "edited": false, "score": 0, "creation_date": 1554308762, "post_id": 55492892, "comment_id": 97706629, "body": "The documentation for <code>JsonCreator</code> states &quot;<i>One common use case is to use a delegating Creator to construct instances from scalar values (like java.lang.String) during deserialization, and serialize values using JsonValue.</i>&quot; That&#39;s why I say it&#39;s strange."}, {"owner": {"reputation": 187, "user_id": 2010564, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9f0261c62b475ff9ff8a61cba99536a6?s=128&d=identicon&r=PG", "display_name": "Filip Kowalski", "link": "https://stackoverflow.com/users/2010564/filip-kowalski"}, "edited": false, "score": 1, "creation_date": 1607461250, "post_id": 55492892, "comment_id": 115279040, "body": "Normally a skip this part, but this time I have to say it: thank you @LppEdd"}], "tags": [], "owner": {"reputation": 16481, "user_id": 1392277, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yJUSK.jpg?s=128&g=1", "display_name": "LppEdd", "link": "https://stackoverflow.com/users/1392277/lppedd"}, "is_accepted": true, "score": 10, "last_activity_date": 1554330495, "last_edit_date": 1554330495, "creation_date": 1554287165, "answer_id": 55492892, "question_id": 55492657, "link": "https://stackoverflow.com/questions/55492657/is-there-a-generic-way-to-deserialize-single-valued-value-objects-without-custo/55492892#55492892", "title": "Is there a generic way to deserialize single-valued value objects (without custom Deserializer) in Jackson", "body": "<p>Sure, and it's pretty simple.<br>\nJust add <code>@JsonCreator</code> to the constructor.</p>\n\n<pre><code>class MyValueObject {\n  private String value;\n\n  @JsonCreator\n  public MyValueObject(String value) { this.value = value; }\n\n  @JsonValue\n  public String getValue() { return value; }\n}\n</code></pre>\n\n<p>Or for Kotlin you'd have, I suppose</p>\n\n<pre><code>data class MyValueObject @JsonCreator constructor(@JsonValue val value: String)\n</code></pre>\n\n<hr>\n\n<p>When you use <code>@JsonCreator</code> <strong>without</strong> prefixing the constructor parameter with</p>\n\n<pre><code>@JsonProperty(\"fieldName\")\n</code></pre>\n\n<p>you tell Jackson to pass the entire JSON string, which in your case is just a \"primitive\" value.</p>\n\n<hr>\n\n<p>Apparently Kotlin doesn't like auto-generated getter/setters pairs.<br>\nThis works for example</p>\n\n<pre><code>class MyValueObject @JsonCreator constructor(private val value: String) {\n    @JsonValue\n    fun getValue() = value\n}\n</code></pre>\n\n<p>Also, after a bit of debugging, I found out the problem arises here</p>\n\n<pre><code>@Override\npublic Boolean hasAsValue(Annotated a) {\n    JsonValue ann = _findAnnotation(a, JsonValue.class);\n    if (ann == null) {\n        return null;\n    }\n    return ann.value();\n}\n</code></pre>\n\n<p>At <code>JacksonAnnotationIntrospector</code>.</p>\n\n<p>I don't know why but Jackson still look for a <code>@JsonValue</code> annotation on a <strong>public</strong> field or on a <strong>public</strong> getter. Kotlin places the annotation on the <strong>private</strong> field, so Jackson cannot find it.</p>\n\n<p>The solution is</p>\n\n<pre><code>data class MyValueObject @JsonCreator constructor(@JvmField @JsonValue val value: String)\n</code></pre>\n\n<p>or even better</p>\n\n<pre><code>data class MyValueObject @JsonCreator constructor(@get:JsonValue val value: String)\n</code></pre>\n\n<hr>\n\n<p>As Marc von Renteln wrote in the comments, you can also omit <code>@JsonCreator</code></p>\n\n<pre><code>data class MyValueObject(@get:JsonValue val value: String)\n</code></pre>\n\n<p>Which seems undocumented, however. If someone can point out where this behavior is described, it would be awesome!</p>\n"}], "owner": {"reputation": 1069, "user_id": 1242890, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3721ddf52058e3ee8162e483c0d8093e?s=128&d=identicon&r=PG", "display_name": "Marc von Renteln", "link": "https://stackoverflow.com/users/1242890/marc-von-renteln"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1329, "favorite_count": 2, "accepted_answer_id": 55492892, "answer_count": 1, "score": 6, "last_activity_date": 1554330495, "creation_date": 1554286463, "last_edit_date": 1554297269, "question_id": 55492657, "link": "https://stackoverflow.com/questions/55492657/is-there-a-generic-way-to-deserialize-single-valued-value-objects-without-custo", "title": "Is there a generic way to deserialize single-valued value objects (without custom Deserializer) in Jackson", "body": "<p>We use a lot of value objects with a single value. For (de-)serialization we use Jackson with the kotlin-module.</p>\n\n<p>A example value object in Kotlin:</p>\n\n<pre><code>data class MyValueObject(val value: String)\n</code></pre>\n\n<p>or as Java </p>\n\n<pre><code>class MyValueObject {\n private String value;\n\n public MyValueObject(String value) { this.value = value; }\n\n public String getValue() { return value; }\n}\n</code></pre>\n\n<p>These value objects have to be serialized <strong>and deserialized</strong> and should be serialized \"value only\", eg. <code>\"theValue\"</code> instead of <code>\"{\"value\":\"theValue\"}\"</code>.</p>\n\n<p>I would like to avoid writing custom serializers/deserializers for dozens of value objects. </p>\n\n<p>I know for serialisation <code>@JsonValue</code> can be used to realize the above.</p>\n\n<pre><code>data class MyValueObject(@JsonValue val value: String)\n</code></pre>\n\n<p>But the JSON \"\"theValue\"\" (the above serialized String-Literal) cannot be deserialized back as <code>MyValueObject</code>. It sesults in the following exception:</p>\n\n<pre><code>com.fasterxml.jackson.databind.exc.MismatchedInputException: \nCannot construct instance of `[...].MyValueObject` (although at least one Creator exists): \nno String-argument constructor/factory method to deserialize from String value ('test')\n at [Source: (String)\"\"test\"\"; line: 1, column: 1]\n</code></pre>\n\n<p>Here is the Unit Test I used:</p>\n\n<pre><code>@Test\nfun testSerialize() {\n    val objectMapper = ObjectMapper()\n        .registerModule(Jdk8Module())\n        .registerModule(KotlinModule())\n    val test = MyValueObject(\"test\")\n    val json = objectMapper.writeValueAsString(test)\n    println(json)\n    objectMapper.readValue&lt;MyValueObject&gt;(json)\n}\n</code></pre>\n\n<p>Is there a simple/generic way to deserialize these like <code>@JsonValue</code> for serializing?</p>\n\n<p>P.S.: One working solution (thanks to @LppEdd) is:</p>\n\n<pre><code>data class MyValueObject (@JsonValue val value: String) {\n\n    companion object {\n        @JvmStatic\n        @JsonCreator\n        fun create(value: String) = MyValueObject(value)\n    }\n}\n</code></pre>\n\n<p>But this is very verbose. @JsonCreator annotated on the constructor did not work for me (see my comment on the answer of @LppEdd)</p>\n"}, {"tags": ["java", "kotlin", "gson"], "comments": [{"owner": {"reputation": 124, "user_id": 7238830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5fe5a7c67d65d2f736fd4b47c69416f?s=128&d=identicon&r=PG&f=1", "display_name": "Philipp Hemmelmayr", "link": "https://stackoverflow.com/users/7238830/philipp-hemmelmayr"}, "edited": false, "score": 0, "creation_date": 1554286244, "post_id": 55492498, "comment_id": 97692306, "body": "either change the method header or wrap the JsonObject, you can&#39;t change JsonObject to be Serializable if it isn&#39;t"}, {"owner": {"reputation": 3382, "user_id": 1664430, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/Qe9MV.jpg?s=128&g=1", "display_name": "Ashishkumar Singh", "link": "https://stackoverflow.com/users/1664430/ashishkumar-singh"}, "edited": false, "score": 0, "creation_date": 1554286634, "post_id": 55492498, "comment_id": 97692533, "body": "You can create a new class that extends <code>JsonObject</code> and implements <code>Serializable</code> and pass object of this class to <code>someCustomMethod</code>"}], "answers": [{"tags": [], "owner": {"reputation": 2693, "user_id": 450356, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/SOCF1.png?s=128&g=1", "display_name": "Adib Faramarzi", "link": "https://stackoverflow.com/users/450356/adib-faramarzi"}, "is_accepted": false, "score": 2, "last_activity_date": 1554290666, "last_edit_date": 1554290666, "creation_date": 1554288244, "answer_id": 55493250, "question_id": 55492498, "link": "https://stackoverflow.com/questions/55492498/gson-how-pass-jsonobject-jsonelement-as-serializable/55493250#55493250", "title": "Gson: How pass JsonObject/JsonElement as serializable?", "body": "<p>You can create a class that can serialize/deserialize your JsonObject by implementing <code>Serializable</code> interface and implementing <code>writeObject</code> and <code>readObject</code> like below:</p>\n\n<pre><code>class JsonObjectSerializer(val gson: Gson, val jsonObject: JsonObject) : Serializable {\n\n    @Throws(ClassNotFoundException::class, IOException::class)\n    private fun readObject(aInputStream: ObjectInputStream) {\n        val gson = aInputStream.readUTF()\n        jsonObject = this.gson.fromJson(gson, JsonObject::class.java!!)\n    }\n\n    @Throws(IOException::class)\n    private fun writeObject(aOutputStream: ObjectOutputStream) {\n        aOutputStream.writeUTF(gson.toJson(jsonObject))\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 8644, "user_id": 6813231, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/gy8Sg.jpg?s=128&g=1", "display_name": "a_subscriber", "link": "https://stackoverflow.com/users/6813231/a-subscriber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 428, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1554290666, "creation_date": 1554286034, "question_id": 55492498, "link": "https://stackoverflow.com/questions/55492498/gson-how-pass-jsonobject-jsonelement-as-serializable", "title": "Gson: How pass JsonObject/JsonElement as serializable?", "body": "<p>In my Kotlin project I must use <code>com.google.gson.JsonObject</code>.</p>\n\n<pre><code>val jsonRedir = JsonObject()\nsomeCustomMethod(jsonRedir)\n</code></pre>\n\n<p>The problem is that method <code>someCustomMethod</code> has one Serializable paramter. But <code>JsonObject</code> is not <code>Serializable</code>.</p>\n\n<p>How I can fix this?</p>\n\n<p>I must pass exact <code>JsonElement</code> or <code>JsonObject</code> to <code>someCustomMethod</code> </p>\n"}, {"tags": ["kotlin", "concurrency", "coroutine", "kotlin-coroutines"], "answers": [{"comments": [{"owner": {"reputation": 7297, "user_id": 5604676, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/CQ3zk.jpg?s=128&g=1", "display_name": "Sergii Bishyr", "link": "https://stackoverflow.com/users/5604676/sergii-bishyr"}, "edited": false, "score": 0, "creation_date": 1554289461, "post_id": 55492659, "comment_id": 97694256, "body": "Thanks for your detailed answer. About <code>delay</code>, it is wrapped in the <code>runBlocking</code>, doesn&#39;t it make it blocking?"}, {"owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "reply_to_user": {"reputation": 7297, "user_id": 5604676, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/CQ3zk.jpg?s=128&g=1", "display_name": "Sergii Bishyr", "link": "https://stackoverflow.com/users/5604676/sergii-bishyr"}, "edited": false, "score": 0, "creation_date": 1554291045, "post_id": 55492659, "comment_id": 97695235, "body": "No this is no &quot;active waiting&quot;, the coroutine is just being suspended for the given duration."}, {"owner": {"reputation": 7297, "user_id": 5604676, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/CQ3zk.jpg?s=128&g=1", "display_name": "Sergii Bishyr", "link": "https://stackoverflow.com/users/5604676/sergii-bishyr"}, "edited": false, "score": 0, "creation_date": 1554291165, "post_id": 55492659, "comment_id": 97695320, "body": "What is the best way to replace it? As I understand, <code>Thread.sleep</code> will block the entire thread and all the coroutines can be stuck, an I right?"}, {"owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "reply_to_user": {"reputation": 7297, "user_id": 5604676, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/CQ3zk.jpg?s=128&g=1", "display_name": "Sergii Bishyr", "link": "https://stackoverflow.com/users/5604676/sergii-bishyr"}, "edited": false, "score": 0, "creation_date": 1554291271, "post_id": 55492659, "comment_id": 97695383, "body": "What do you mean &quot;replace&quot;? With coroutines, you would not use <code>Thread.sleep</code> instead. But it would work for your example. It will block exactly one thread, the one you&#39;re using it from"}, {"owner": {"reputation": 7297, "user_id": 5604676, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/CQ3zk.jpg?s=128&g=1", "display_name": "Sergii Bishyr", "link": "https://stackoverflow.com/users/5604676/sergii-bishyr"}, "edited": false, "score": 1, "creation_date": 1554291392, "post_id": 55492659, "comment_id": 97695452, "body": "I mean to replace so it will be a good example of long-running task. Will it block the thread thus all the coroutines that run on this thread, or it will block only one coroutine?"}, {"owner": {"reputation": 7297, "user_id": 5604676, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/CQ3zk.jpg?s=128&g=1", "display_name": "Sergii Bishyr", "link": "https://stackoverflow.com/users/5604676/sergii-bishyr"}, "edited": false, "score": 0, "creation_date": 1554292024, "post_id": 55492659, "comment_id": 97695838, "body": "I have changed my hardcoded <code>delay</code> to <code>Thread.sleep</code> and that doesn&#39;t change the picture. Also with using <code>Dispatchers.IO </code> the thread example is still faster that coroutines"}, {"owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "reply_to_user": {"reputation": 7297, "user_id": 5604676, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/CQ3zk.jpg?s=128&g=1", "display_name": "Sergii Bishyr", "link": "https://stackoverflow.com/users/5604676/sergii-bishyr"}, "edited": false, "score": 0, "creation_date": 1554292249, "post_id": 55492659, "comment_id": 97695976, "body": "&quot;still faster&quot; means like milliseconds? You should not see 4ms vs 2ms anymore at least"}, {"owner": {"reputation": 7297, "user_id": 5604676, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/CQ3zk.jpg?s=128&g=1", "display_name": "Sergii Bishyr", "link": "https://stackoverflow.com/users/5604676/sergii-bishyr"}, "edited": false, "score": 0, "creation_date": 1554292377, "post_id": 55492659, "comment_id": 97696066, "body": "No, not millis the difference is huge. I&#39;m generating array of 1000 Foo objects. And threads perform in about 2 seconds, but coroutines in about half a minute"}, {"owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "reply_to_user": {"reputation": 7297, "user_id": 5604676, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/CQ3zk.jpg?s=128&g=1", "display_name": "Sergii Bishyr", "link": "https://stackoverflow.com/users/5604676/sergii-bishyr"}, "edited": false, "score": 0, "creation_date": 1554292509, "post_id": 55492659, "comment_id": 97696141, "body": "well you&#39;re spawning 1000 threads for this. The Dispatchers.IO is still limited to 64 threads. Then you have to create a custom thread pool with 1k threads in it (which I don&#39;t recommend anyway)"}, {"owner": {"reputation": 7297, "user_id": 5604676, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/CQ3zk.jpg?s=128&g=1", "display_name": "Sergii Bishyr", "link": "https://stackoverflow.com/users/5604676/sergii-bishyr"}, "edited": false, "score": 0, "creation_date": 1554292714, "post_id": 55492659, "comment_id": 97696266, "body": "If I will create the thread pool with 1k threads then there is no point in using coroutines as it will still use the same amout of threads and will have the same contex switch overhead. But I&#39;m expecting to have a better perfomange with coroutines with the less amount of threads due to have less overhead. And that&#39;s not what I&#39;m expecting :)"}, {"owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "reply_to_user": {"reputation": 7297, "user_id": 5604676, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/CQ3zk.jpg?s=128&g=1", "display_name": "Sergii Bishyr", "link": "https://stackoverflow.com/users/5604676/sergii-bishyr"}, "edited": false, "score": 0, "creation_date": 1554294187, "post_id": 55492659, "comment_id": 97697271, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/191162/discussion-between-s1m0nw1-and-sergii-bishyr\">continue this discussion in chat</a>."}, {"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 0, "creation_date": 1554405895, "post_id": 55492659, "comment_id": 97751258, "body": "Calling <code>delay</code> in <code>runBlocking</code> (that <code>longRunningJob</code> does) is essentially the same as calling <code>Thread.sleep</code>."}], "tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": true, "score": 6, "last_activity_date": 1554286799, "last_edit_date": 1592644375, "creation_date": 1554286470, "answer_id": 55492659, "question_id": 55491837, "link": "https://stackoverflow.com/questions/55491837/kotlin-coroutines-takes-longer-than-threads/55492659#55492659", "title": "Kotlin coroutines takes longer than threads", "body": "<p>The needed time to execute this code depends on the number of threads that are used for the computation. Your threading example does not define a bound and spawns as many threads as you have jobs. The coroutine example, on the other hand, dispatches all tasks to <code>GlobalScope</code> which internally uses the <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/-dispatchers/-default.html\" rel=\"nofollow noreferrer\"><code>Dispatchers.Default</code></a> thread pool. This pool is limited:</p>\n<blockquote>\n<p>The default CoroutineDispatcher that is used by all standard builders like launch, async, etc. if no dispatcher nor any other ContinuationInterceptor is specified in their context.</p>\n<p>It is backed by a shared pool of threads on JVM. By default, the maximal number of threads used by this dispatcher is equal to the number CPU cores, but is at least two.</p>\n</blockquote>\n<p>Let's say you have 4 cores. Running the code with 4 jobs will result in ~2s runtime because everything runs in parallel (note concurrency &lt;&gt; parallelism). But as soon as you have more than 4 tasks, one will have to wait until one of the first tasks has finished sine only 4 tasks can run simultaneously at any point.</p>\n<p>You can change the dispatcher pool to one with more threads:</p>\n<pre><code>GlobalScope.async(Dispatchers.IO)\n</code></pre>\n<p>Please note that <code>delay</code> is a bad example of a long-running task. It does not block the caller thread since it's a real suspending function that only pauses the coroutine. You can actually run your code on <code>main</code> entirely:</p>\n<pre><code>runBlocking {\n    val deferredResults =\n        (0..10).map { async(Dispatchers.IO) { longRunningJob() } }\n    deferredResults.awaitAll()\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1262, "user_id": 2607738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/571796baa99b24c4be39d8c685aec55a?s=128&d=identicon&r=PG", "display_name": "rafa", "link": "https://stackoverflow.com/users/2607738/rafa"}, "is_accepted": false, "score": 0, "last_activity_date": 1554287271, "last_edit_date": 1554287271, "creation_date": 1554286538, "answer_id": 55492678, "question_id": 55491837, "link": "https://stackoverflow.com/questions/55491837/kotlin-coroutines-takes-longer-than-threads/55492678#55492678", "title": "Kotlin coroutines takes longer than threads", "body": "<p>runBlocking is a coroutine function. What it does exactly is 'runs the code in the main thread/calling thread'. So It is not creating parallel threads to run things.</p>\n\n<p>To run your code asynchronously you should use launch function instead of runBlocking. It runs on <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/-dispatchers/-default.html\" rel=\"nofollow noreferrer\">Dispatchers.Default</a> shared pool of threads.</p>\n\n<pre><code>GlobalScope.launch {\n   delay(2000);\n}\n</code></pre>\n"}], "owner": {"reputation": 7297, "user_id": 5604676, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/CQ3zk.jpg?s=128&g=1", "display_name": "Sergii Bishyr", "link": "https://stackoverflow.com/users/5604676/sergii-bishyr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 860, "favorite_count": 0, "accepted_answer_id": 55492659, "answer_count": 2, "score": 3, "last_activity_date": 1563521792, "creation_date": 1554284143, "last_edit_date": 1563521792, "question_id": 55491837, "link": "https://stackoverflow.com/questions/55491837/kotlin-coroutines-takes-longer-than-threads", "title": "Kotlin coroutines takes longer than threads", "body": "<p>I'm new to Kotlin and coroutines and I'm trying to understand the coroutines API, so it's quite possible that I'm doing something wrong. So I'm having the list of some sort of objects and I'm trying to apply some long-running processing on each of these objects.</p>\n\n<pre><code>val listOfFoos = listOf(Foo(1), ..., Foo(n))\nlistOfFoos.forEach { longRunningJob(it) }\n\nfun longRunningJob(foo: Foo) {\n    runBlocking{\n        delay(2000) //hardcoded delay for testing\n    }\n    //do something else\n}\n</code></pre>\n\n<p>Of course this is the perfect candidate for running it concurrently, so here it is using good old threads:</p>\n\n<pre><code>listOfFoos.map { thread(start = true) { longRunningJob(it) } }.forEach { it.join() }\n</code></pre>\n\n<p>When I measure the execution time of it using <code>measureTimeMillis</code> it gives me about 2 seconds, which seems perfectly fine as each <code>longRunningJob</code> runs in parallel.\nBut the coroutines are much better as it does not have such an overhead as threads for the context switch. So here is my implementation using coroutines:</p>\n\n<pre><code>val deferredResults =\n    listOfFoos.map { GlobalScope.async { longRunningJob(it) } }\nrunBlocking {\n    deferredResults.awaitAll()\n}\n</code></pre>\n\n<p>But this implementation finishes the execution in about 4 seconds, which is not what I was expecting at all and if I add more elements to the list, the execution time increases as well.</p>\n\n<p>So what am I doing wrong here?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1554284782, "post_id": 55491800, "comment_id": 97691352, "body": "The value returned by the lambda passed to <code>let</code> is returned by the <code>let</code> function itself. It should work nicely to return something."}], "answers": [{"comments": [{"owner": {"reputation": 27253, "user_id": 969325, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d92bf9a788b29869c47858839982f27?s=128&d=identicon&r=PG", "display_name": "Warpzit", "link": "https://stackoverflow.com/users/969325/warpzit"}, "edited": false, "score": 0, "creation_date": 1554284695, "post_id": 55492011, "comment_id": 97691308, "body": "I&#39;ll try to update the example with something more complex in order to illustrate my issue."}, {"owner": {"reputation": 3155, "user_id": 10317684, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1vZU7dxLnug/AAAAAAAAAAI/AAAAAAAAATs/NO0fprNnb6s/photo.jpg?sz=128", "display_name": "Ricky Mo", "link": "https://stackoverflow.com/users/10317684/ricky-mo"}, "reply_to_user": {"reputation": 27253, "user_id": 969325, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d92bf9a788b29869c47858839982f27?s=128&d=identicon&r=PG", "display_name": "Warpzit", "link": "https://stackoverflow.com/users/969325/warpzit"}, "edited": false, "score": 0, "creation_date": 1554285187, "post_id": 55492011, "comment_id": 97691591, "body": "I don&#39;t know any <code>+</code> operation which would return Boolean as your updated code means... but I assume you would do something on the property to return a Boolean, which is equivalent to <code>functionThatReturnBoolean(it)</code> in my updated answer."}, {"owner": {"reputation": 3155, "user_id": 10317684, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1vZU7dxLnug/AAAAAAAAAAI/AAAAAAAAATs/NO0fprNnb6s/photo.jpg?sz=128", "display_name": "Ricky Mo", "link": "https://stackoverflow.com/users/10317684/ricky-mo"}, "reply_to_user": {"reputation": 27253, "user_id": 969325, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d92bf9a788b29869c47858839982f27?s=128&d=identicon&r=PG", "display_name": "Warpzit", "link": "https://stackoverflow.com/users/969325/warpzit"}, "edited": false, "score": 0, "creation_date": 1554286151, "post_id": 55492011, "comment_id": 97692246, "body": "I guess the fact that <code>.let{}</code> returns its last line is what you want to know."}, {"owner": {"reputation": 27253, "user_id": 969325, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d92bf9a788b29869c47858839982f27?s=128&d=identicon&r=PG", "display_name": "Warpzit", "link": "https://stackoverflow.com/users/969325/warpzit"}, "edited": false, "score": 0, "creation_date": 1554286800, "post_id": 55492011, "comment_id": 97692634, "body": "Hmm yes I&#39;ll just experiment with that information :)"}, {"owner": {"reputation": 27253, "user_id": 969325, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d92bf9a788b29869c47858839982f27?s=128&d=identicon&r=PG", "display_name": "Warpzit", "link": "https://stackoverflow.com/users/969325/warpzit"}, "edited": false, "score": 0, "creation_date": 1554287563, "post_id": 55492011, "comment_id": 97693117, "body": "So I had gotten into my head that the let would be evaluated as a lambda expression without a return. I was wrong. Thanks for the help."}], "tags": [], "owner": {"reputation": 3155, "user_id": 10317684, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1vZU7dxLnug/AAAAAAAAAAI/AAAAAAAAATs/NO0fprNnb6s/photo.jpg?sz=128", "display_name": "Ricky Mo", "link": "https://stackoverflow.com/users/10317684/ricky-mo"}, "is_accepted": true, "score": 5, "last_activity_date": 1554285346, "last_edit_date": 1554285346, "creation_date": 1554284610, "answer_id": 55492011, "question_id": 55491800, "link": "https://stackoverflow.com/questions/55491800/kotlin-equivalent-to-swift-if-let-for-class-variables/55492011#55492011", "title": "Kotlin equivalent to swift if let? - for class variables?", "body": "<p>In fact, your swift code can be even simpler without <code>if let</code></p>\n\n<pre><code>func method() -&gt; Boolean { return anObject?.someBoolean ?? false }\n</code></pre>\n\n<p>If this is the actual method you want to implement, the kotlin equivalent is:</p>\n\n<pre><code>fun method() : Boolean = anObject?.someBoolean ?: false\n</code></pre>\n\n<p>If you need to compute the boolean from the property of the optional:</p>\n\n<pre><code>fun method() : Boolean = anObject?.someProperty?.let{functionThatReturnBoolean(it)} ?: false\n</code></pre>\n\n<p><code>.let{}</code> returns the last line within its body, which can be useful in many cases. </p>\n\n<p><code>someThing?.let{}</code> will return <code>null</code> if <code>someThing</code> is <code>null</code> due to optional chaining. </p>\n\n<p><code>?:</code> is the default value operator equivalent to <code>??</code> in swift, which returns the value on rhs when its lhs is <code>null</code>.</p>\n"}], "owner": {"reputation": 27253, "user_id": 969325, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d92bf9a788b29869c47858839982f27?s=128&d=identicon&r=PG", "display_name": "Warpzit", "link": "https://stackoverflow.com/users/969325/warpzit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "accepted_answer_id": 55492011, "answer_count": 1, "score": 1, "last_activity_date": 1554286776, "creation_date": 1554284017, "last_edit_date": 1554286776, "question_id": 55491800, "link": "https://stackoverflow.com/questions/55491800/kotlin-equivalent-to-swift-if-let-for-class-variables", "title": "Kotlin equivalent to swift if let? - for class variables?", "body": "<p>I'm aware of <code>.let {}</code> but the evaluated expression is inside a lambda expression which doesn't work too nice if you need to return something inside a method.</p>\n\n<p><strong>Example problematic code</strong></p>\n\n<pre><code>fun method(): Int {\n  if (anyObject != null) {\n    val calculatedValue = anObject!!.awesome()\n    val magicTrick = calculatedValue + randomMethodName()\n\n    return magicTrick\n  } \n  return false\n}\n</code></pre>\n\n<p><strong>Is there a better way than this</strong></p>\n\n<pre><code>fun method(): Int {\n  val tempObject = anObject\n  if (tempObject != null {\n    val calculatedValue = tempObject.awesome()\n    val magicTrick = calculatedValue + randomMethodName()\n\n    return magicTrick\n  } else {\n    return false\n  }\n}\n</code></pre>\n\n<p><strong>Swift equivalent</strong></p>\n\n<pre><code>fun method(): Int {\n  if let tempObject = anObject {\n    let calculatedValue = tempObject.awesome()\n    let magicTrick = calculatedValue + randomMethodName()\n\n    return magicTrick\n  } else {\n    return false\n  }\n}\n</code></pre>\n"}, {"tags": ["java", "spring", "spring-boot", "kotlin", "hystrix"], "answers": [{"tags": [], "owner": {"reputation": 145, "user_id": 1451252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cd26b005bbfdbf63e198ab49dafa175?s=128&d=identicon&r=PG", "display_name": "user1451252", "link": "https://stackoverflow.com/users/1451252/user1451252"}, "is_accepted": true, "score": 0, "last_activity_date": 1554287017, "creation_date": 1554287017, "answer_id": 55492852, "question_id": 55491349, "link": "https://stackoverflow.com/questions/55491349/enabling-hystrix-leads-to-nullpointerexception-when-using-kotlin-with-spring-boo/55492852#55492852", "title": "Enabling Hystrix leads to NullPointerException when using kotlin with spring-boot", "body": "<p>I was able to figure it out by myself: The function <code>send</code> has to be open, so Hystrix and Spring will create a proper Proxy around the abstract class including the two fields.</p>\n"}], "owner": {"reputation": 145, "user_id": 1451252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cd26b005bbfdbf63e198ab49dafa175?s=128&d=identicon&r=PG", "display_name": "user1451252", "link": "https://stackoverflow.com/users/1451252/user1451252"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 0, "accepted_answer_id": 55492852, "answer_count": 1, "score": 2, "last_activity_date": 1554287017, "creation_date": 1554282701, "last_edit_date": 1554286805, "question_id": 55491349, "link": "https://stackoverflow.com/questions/55491349/enabling-hystrix-leads-to-nullpointerexception-when-using-kotlin-with-spring-boo", "title": "Enabling Hystrix leads to NullPointerException when using kotlin with spring-boot", "body": "<p>When I add Hystrix support to a kotlin spring boot project, some fields of an abstract class are suddenly null. It seems the Hystrix proxy does not handle fields properly:</p>\n\n<p>I have an abstract kotlin class <code>ClientHandler</code> having two fields <code>logger</code> and <code>test</code> directly initialized. I have a kotlin subclass <code>SomeHandler</code> of <code>ClientHandler</code> which I use via autowiring in a class. As expected when using the subclass the two fields are initialized. </p>\n\n<p>But when I add Hystrix support (uncomment <code>@EnableHystrix</code> and <code>@HystrixCommand</code>) the two fields <code>logger</code> and <code>test</code> in the abstract class are suddenly null. </p>\n\n<p><a href=\"https://i.stack.imgur.com/7XbwO.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7XbwO.jpg\" alt=\"Debugger\"></a></p>\n\n<p>Do you have any ideas why this happens? Spring adds a proxy class to the <code>SomeHandler</code> class, Hystrix does the same. So I assume something goes wrong in the double proxying in combination with Kotlin!? I did the same with a java class and everything went fine.</p>\n\n<pre><code>package com.test\n\nimport mu.KotlinLogging\nimport org.springframework.stereotype.Component\nimport java.lang.RuntimeException\n\nabstract class ClientHandler {\n\n    protected val logger = KotlinLogging.logger {}\n    private val test = \"test\"\n\n    //@HystrixCommand(commandKey = \"Some Service\")\n    fun send(communication: Communication): ResponseObject {\n        try {\n            return callApi(communication)\n        } catch (e: Exception) {\n            logger.warn(\"Could not send information\", e)\n            return ResponseObject()\n        }\n    }\n\n    protected abstract fun callApi(communication: Communication): ResponseObject\n}\n\n@Component\nclass SomeHandler : ClientHandler() {\n\n    override fun callApi(communication: Communication): ResponseObject {\n\n        throw RuntimeException()\n    }\n}\n\nclass Communication {\n\n}\n\nclass ResponseObject {\n\n}\n</code></pre>\n\n<p>The application</p>\n\n<pre><code>package com.test\n\nimport org.springframework.boot.autoconfigure.SpringBootApplication\nimport org.springframework.boot.runApplication\n\n//@EnableHystrix\n@SpringBootApplication\nclass SomeApplication {\n\n    fun main(args: Array&lt;String&gt;) {\n        runApplication&lt;SomeApplication&gt;(*args)\n    }\n}\n</code></pre>\n\n<p>The test</p>\n\n<pre><code>package com.test\n\nimport org.hibernate.validator.internal.util.Contracts.assertNotNull\nimport org.junit.Test\nimport org.junit.runner.RunWith\nimport org.springframework.beans.factory.annotation.Autowired\nimport org.springframework.boot.test.context.SpringBootTest\nimport org.springframework.test.context.junit4.SpringRunner\n\n@RunWith(SpringRunner::class)\n@SpringBootTest\nclass CustomerApiImplTest {\n\n    @Autowired\n    private lateinit var someHandler: SomeHandler\n\n    @Test\n    fun testIt() {\n        val communication = Communication()\n        val responseEntity = someHandler.send(communication)\n\n        assertNotNull(responseEntity)\n    }\n}\n</code></pre>\n\n<p>The pom.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;test&lt;/groupId&gt;\n    &lt;artifactId&gt;test&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.1.3.RELEASE&lt;/version&gt;\n    &lt;/parent&gt;\n\n    &lt;properties&gt;\n        &lt;kotlin.version&gt;1.3.21&lt;/kotlin.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n            &lt;artifactId&gt;kotlin-reflect&lt;/artifactId&gt;\n            &lt;version&gt;${kotlin.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n            &lt;artifactId&gt;kotlin-stdlib-jdk8&lt;/artifactId&gt;\n            &lt;version&gt;${kotlin.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jetbrains.kotlinx&lt;/groupId&gt;\n            &lt;artifactId&gt;kotlinx-coroutines-core&lt;/artifactId&gt;\n            &lt;version&gt;1.1.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.github.microutils&lt;/groupId&gt;\n            &lt;artifactId&gt;kotlin-logging&lt;/artifactId&gt;\n            &lt;version&gt;1.6.25&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-netflix-hystrix&lt;/artifactId&gt;\n            &lt;version&gt;2.1.1.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;repackage&lt;/goal&gt;\n                            &lt;goal&gt;build-info&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n                &lt;artifactId&gt;kotlin-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${kotlin.version}&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;compile&lt;/id&gt;\n                        &lt;phase&gt;compile&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;compile&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;sourceDirs&gt;\n                                &lt;source&gt;src/main/java&lt;/source&gt;\n                                &lt;source&gt;target/generated-sources/swagger/src/gen/java/main&lt;/source&gt;\n                            &lt;/sourceDirs&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;test-compile&lt;/id&gt;\n                        &lt;phase&gt;test-compile&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;test-compile&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n                &lt;configuration&gt;\n                    &lt;jvmTarget&gt;1.8&lt;/jvmTarget&gt;\n                    &lt;args&gt;\n                        &lt;arg&gt;-Xjsr305=strict&lt;/arg&gt; &lt;!-- Enable strict mode for JSR-305 annotations --&gt;\n                    &lt;/args&gt;\n                    &lt;compilerPlugins&gt;\n                        &lt;plugin&gt;spring&lt;/plugin&gt;\n                    &lt;/compilerPlugins&gt;\n                &lt;/configuration&gt;\n                &lt;dependencies&gt;\n                    &lt;dependency&gt;\n                        &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n                        &lt;artifactId&gt;kotlin-maven-allopen&lt;/artifactId&gt;\n                        &lt;version&gt;${kotlin.version}&lt;/version&gt;\n                    &lt;/dependency&gt;\n                &lt;/dependencies&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;compile&lt;/id&gt;\n                        &lt;phase&gt;compile&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;compile&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;testCompile&lt;/id&gt;\n                        &lt;phase&gt;test-compile&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;testCompile&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n"}, {"tags": ["java", "kotlin", "augmented-reality", "arcore", "gyroscope"], "comments": [{"owner": {"reputation": 301, "user_id": 4037591, "user_type": "registered", "profile_image": "https://graph.facebook.com/1499201564/picture?type=large", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/4037591/benjamin"}, "edited": false, "score": 0, "creation_date": 1554280319, "post_id": 55490497, "comment_id": 97688649, "body": "What&#39;s the model id?"}, {"owner": {"reputation": 25953, "user_id": 6599590, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/qLSDJ.jpg?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/6599590/andy"}, "reply_to_user": {"reputation": 301, "user_id": 4037591, "user_type": "registered", "profile_image": "https://graph.facebook.com/1499201564/picture?type=large", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/4037591/benjamin"}, "edited": false, "score": 0, "creation_date": 1554280461, "post_id": 55490497, "comment_id": 97688727, "body": "Huawei POT-LX1."}, {"owner": {"reputation": 301, "user_id": 4037591, "user_type": "registered", "profile_image": "https://graph.facebook.com/1499201564/picture?type=large", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/4037591/benjamin"}, "edited": false, "score": 2, "creation_date": 1554280594, "post_id": 55490497, "comment_id": 97688801, "body": "On the huawei website we ca see : Fingerprint sensor, Proximity sensor, Ambient light sensor, Digital compass, Gravity sensor. Maybe based on all of this sensor he can create emulated gyroscope or something like"}, {"owner": {"reputation": 25953, "user_id": 6599590, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/qLSDJ.jpg?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/6599590/andy"}, "reply_to_user": {"reputation": 301, "user_id": 4037591, "user_type": "registered", "profile_image": "https://graph.facebook.com/1499201564/picture?type=large", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/4037591/benjamin"}, "edited": false, "score": 0, "creation_date": 1554280707, "post_id": 55490497, "comment_id": 97688868, "body": "I don&#39;t understand how it works but it works. That&#39;s what my question about."}, {"owner": {"reputation": 301, "user_id": 4037591, "user_type": "registered", "profile_image": "https://graph.facebook.com/1499201564/picture?type=large", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/4037591/benjamin"}, "edited": false, "score": 1, "creation_date": 1554280817, "post_id": 55490497, "comment_id": 97688931, "body": "<a href=\"https://forum.xda-developers.com/honor-4c/how-to/how-to-enable-virtual-gyroscope-huawei-t3850205\" rel=\"nofollow noreferrer\">forum.xda-developers.com/honor-4c/how-to/&hellip;</a> It&#39;s look like virtual gyscope exist, so it&#39;s probably that haha, but how that&#39;s work I can&#39;t tell you, but probably that the result of other sensor combinated"}, {"owner": {"reputation": 25953, "user_id": 6599590, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/qLSDJ.jpg?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/6599590/andy"}, "reply_to_user": {"reputation": 301, "user_id": 4037591, "user_type": "registered", "profile_image": "https://graph.facebook.com/1499201564/picture?type=large", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/4037591/benjamin"}, "edited": false, "score": 0, "creation_date": 1554280900, "post_id": 55490497, "comment_id": 97688995, "body": "Maybe it&#39;s possible by using Compass..."}, {"owner": {"reputation": 301, "user_id": 4037591, "user_type": "registered", "profile_image": "https://graph.facebook.com/1499201564/picture?type=large", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/4037591/benjamin"}, "edited": false, "score": 0, "creation_date": 1554281008, "post_id": 55490497, "comment_id": 97689064, "body": "<a href=\"https://android.gadgethacks.com/how-to/use-google-cardboard-if-your-phone-doesnt-have-gyroscope-0172650/\" rel=\"nofollow noreferrer\">android.gadgethacks.com/how-to/&hellip;</a> You can found a ltitle explaination here"}], "answers": [{"tags": [], "owner": {"reputation": 301, "user_id": 4037591, "user_type": "registered", "profile_image": "https://graph.facebook.com/1499201564/picture?type=large", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/4037591/benjamin"}, "is_accepted": true, "score": 1, "last_activity_date": 1554281955, "last_edit_date": 1554281955, "creation_date": 1554281503, "answer_id": 55490939, "question_id": 55490497, "link": "https://stackoverflow.com/questions/55490497/virtual-gyroscope-in-huawei-p-smart-2019-phone/55490939#55490939", "title": "Virtual Gyroscope in Huawei P Smart 2019 phone?", "body": "<p>A little explaination about how it's work : <a href=\"https://android.gadgethacks.com/how-to/use-google-cardboard-if-your-phone-doesnt-have-gyroscope-0172650/\" rel=\"nofollow noreferrer\">https://android.gadgethacks.com/how-to/use-google-cardboard-if-your-phone-doesnt-have-gyroscope-0172650/</a></p>\n\n<p>With the compass and acceleromater sensor on your smartphone, you can make a virtual gyroscope. You need to take the data from compass and acceleromater and make lot of work and sort on it, but you can handle gyroscope functionnality virtualy with that :-)</p>\n"}], "owner": {"reputation": 25953, "user_id": 6599590, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/qLSDJ.jpg?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/6599590/andy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3595, "favorite_count": 1, "accepted_answer_id": 55490939, "answer_count": 1, "score": 0, "last_activity_date": 1581695617, "creation_date": 1554280152, "last_edit_date": 1581695617, "question_id": 55490497, "link": "https://stackoverflow.com/questions/55490497/virtual-gyroscope-in-huawei-p-smart-2019-phone", "title": "Virtual Gyroscope in Huawei P Smart 2019 phone?", "body": "<p>I've got <code>Huawei P Smart 2019</code> smartphone. A majority of websites with specs (including official Huawei website) say that there's <strong>no gyroscope</strong> in this model. </p>\n\n<ul>\n<li><p><a href=\"https://consumer.huawei.com/en/phones/p-smart-plus-2019/specs/\" rel=\"nofollow noreferrer\">consumer.huawei.com</a></p></li>\n<li><p><a href=\"https://www.gsmarena.com/huawei_p_smart_2019-9409.php\" rel=\"nofollow noreferrer\">www.gsmarena.com</a></p></li>\n<li><p><a href=\"https://www.phonearena.com/phones/Huawei-P-Smart-2019_id11057\" rel=\"nofollow noreferrer\">www.phonearena.com</a></p></li>\n</ul>\n\n<p>But I tested <code>Huawei P Smart 2019</code> using Sensor Fusion app. This app detects Gyroscope sensor and shows how it works.</p>\n\n<blockquote>\n  <p>What's the issue? Why even manufacturer says there's <strong>no gyroscope sensor</strong> in <code>Huawei P Smart 2019</code> although a <strong>sensor clearly exists</strong> there? </p>\n</blockquote>\n\n<p>Maybe it's a <code>virtual gyroscope</code>?</p>\n\n<pre><code>package org.hitlabnz.sensor_fusion_demo;\n\npublic class SensorSelectionActivity extends FragmentActivity {\n    SectionsPagerAdapter mSectionsPagerAdapter;\n    ViewPager mViewPager;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_sensor_selection);\n        mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());\n        mViewPager = (ViewPager) findViewById(R.id.pager);\n        mViewPager.setAdapter(mSectionsPagerAdapter);\n\n        SensorChecker checker = new HardwareChecker((SensorManager) getSystemService(SENSOR_SERVICE));\n        if(!checker.IsGyroscopeAvailable()) {\n            displayHardwareMissingWarning();\n        }\n    }\n    private void displayHardwareMissingWarning() {\n        AlertDialog ad = new AlertDialog.Builder(this).create();  \n        ad.setCancelable(false);   \n        ad.setTitle(getResources().getString(R.string.gyroscope_missing)); \n        ad.setMessage(getResources().getString(R.string.gyroscope_missing_message));\n\n        ad.setButton(DialogInterface.BUTTON_NEUTRAL, getResources().getString(R.string.OK), new DialogInterface.OnClickListener() {  \n            @Override  \n            public void onClick(DialogInterface dialog, int which) {   \n                dialog.dismiss();                      \n            }  \n        });  \n        ad.show();  \n    }\n}\n</code></pre>\n"}, {"tags": ["javascript", "kotlin", "vaadin12"], "answers": [{"tags": [], "owner": {"reputation": 1934, "user_id": 2932967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a7491e8ed5ab6a28cc6967c3fb59e9f?s=128&d=identicon&r=PG", "display_name": "Andrew Churilo", "link": "https://stackoverflow.com/users/2932967/andrew-churilo"}, "is_accepted": true, "score": 2, "last_activity_date": 1554280823, "creation_date": 1554280823, "answer_id": 55490710, "question_id": 55490451, "link": "https://stackoverflow.com/questions/55490451/vaadin-12-pass-object-to-javascripts-function-cant-encode-class/55490710#55490710", "title": "Vaadin 12 pass object to JavaScript&#39;s function: Can&#39;t encode class", "body": "<p>Use <code>JsonObject</code> instead <code>Redirect</code>:</p>\n\n<pre><code>val request = VaadinRequest.getCurrent()\nval paramGoto = request.getParameter(\"goto\")\nval json = Json.createObject()\njson.put(\"sessionId\", \"$paramGoto\")\nUI.getCurrent().getPage().executeJavaScript(\"myObject.redirectToCheckout($0)\", json)\n</code></pre>\n"}], "owner": {"reputation": 8644, "user_id": 6813231, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/gy8Sg.jpg?s=128&g=1", "display_name": "a_subscriber", "link": "https://stackoverflow.com/users/6813231/a-subscriber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 55490710, "answer_count": 1, "score": 2, "last_activity_date": 1554280823, "creation_date": 1554280004, "question_id": 55490451, "link": "https://stackoverflow.com/questions/55490451/vaadin-12-pass-object-to-javascripts-function-cant-encode-class", "title": "Vaadin 12 pass object to JavaScript&#39;s function: Can&#39;t encode class", "body": "<p>Vaadin 12, Kotlin project</p>\n\n<p>In my <code>myPage.html</code> I has javascript:</p>\n\n<pre><code> myObject.redirectToCheckout({\n                    sessionId: \"1111_2222\",\n                }).\n</code></pre>\n\n<p>So I need to call javaScript function <code>redirectToCheckout</code> from Vaadin 12 and pass correct param <strong>as object</strong>.\nSo here my Vaadin snippet:</p>\n\n<pre><code>import com.vaadin.flow.component.dependency.HtmlImport\nimport com.vaadin.flow.component.dependency.JavaScript\nimport com.vaadin.flow.component.html.Div\nimport com.vaadin.flow.router.Route\nimport com.vaadin.flow.server.VaadinRequest\nimport java.io.Serializable\n\n@Route(value = \"redir\")\n@HtmlImport(\"styles/myPage.html\")\nclass RedirectForm : Div() {\n    init {\n        val request = VaadinRequest.getCurrent()\n        val paramGoto = request.getParameter(\"goto\")\n        val redirect = Redirect(\"$paramGoto\")\n        UI.getCurrent().getPage().executeJavaScript(\"myObject.redirectToCheckout($0)\", redirect) // **error here**\n    }\n\n    inner class Redirect : Serializable {\n        var sessionId: String\n\n        constructor(sessionId: String) {\n            this.sessionId = sessionId\n        }\n    }\n}\n</code></pre>\n\n<p>but I get error:</p>\n\n<pre><code>Caused by: java.lang.IllegalArgumentException: Can't encode class com.myproject.view.RedirectForm$Redirect to json\n    at com.vaadin.flow.internal.JsonCodec.encodeWithoutTypeInfo(JsonCodec.java:165)\n    at com.vaadin.flow.internal.JsonCodec.encodeWithTypeInfo(JsonCodec.java:80)\n    at com.vaadin.flow.component.page.Page.executeJavaScript(Page.java:338)\n    at com.myproject.view.RedirectForm.&lt;init&gt;(RedirectView.kt:28)\n    ... 50 common frames omitted\n</code></pre>\n"}, {"tags": ["spring", "hibernate", "jpa", "kotlin", "jpql"], "answers": [{"tags": [], "owner": {"reputation": 2532, "user_id": 2044957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/847a1a095e3035860fc9c0c1e93c8f1d?s=128&d=identicon&r=PG", "display_name": "Peter \u0160&#225;ly", "link": "https://stackoverflow.com/users/2044957/peter-%c5%a0%c3%a1ly"}, "is_accepted": true, "score": 1, "last_activity_date": 1554321527, "last_edit_date": 1554321527, "creation_date": 1554321055, "answer_id": 55503234, "question_id": 55490416, "link": "https://stackoverflow.com/questions/55490416/dto-projection-of-query-with-elementcollection-causes-unable-to-locate-appropr/55503234#55503234", "title": "DTO Projection of Query with @ElementCollection causes &#39;Unable to locate appropriate constructor on class&#39; error", "body": "<p>It is not allowed to use collection path expressions in constructor query. <a href=\"https://stackoverflow.com/a/2678973/2044957\">link</a></p>\n\n<p>Put just root entity into constructor:</p>\n\n<pre><code>SELECT NEW com.xxx.ProjectionDTO(m) WHERE m.condition = :condition\n</code></pre>\n\n<p>In constructor assign m.enums, m.someString to fields.</p>\n"}], "owner": {"reputation": 43, "user_id": 11301860, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-b-DHN5cJ0XI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfjrsrey7mCp2RgbYKWZ3XuKtCmlQ/mo/photo.jpg?sz=128", "display_name": "agata szarmach", "link": "https://stackoverflow.com/users/11301860/agata-szarmach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 810, "favorite_count": 0, "accepted_answer_id": 55503234, "answer_count": 1, "score": 4, "last_activity_date": 1554321527, "creation_date": 1554279887, "question_id": 55490416, "link": "https://stackoverflow.com/questions/55490416/dto-projection-of-query-with-elementcollection-causes-unable-to-locate-appropr", "title": "DTO Projection of Query with @ElementCollection causes &#39;Unable to locate appropriate constructor on class&#39; error", "body": "<p>I'm writing custom query using projection to reduce amount of queries in one session, when couple of field from antity are needed and using Fetch join.\nUnfortunately got stuck into a problem when one types in returned dto is a collection.</p>\n\n<p>I have following class with @ElementCollection (siplified version for this purpose):</p>\n\n<pre><code>@Entity\nclass MyClass(\n\n    val someString: String,\n\n    @ElementCollection\n    @Enumerated(EnumType.STRING)\n    var enums: MutableSet&lt;Enum&gt;,\n\n    @ManyToOne\n    var condition: Condition\n\n    //And so on...\n)\n</code></pre>\n\n<p>And DTO used for projection:</p>\n\n<pre><code>data class ProjectionDTO(\n    val aString: String,\n    val enumList: List&lt;Enum&gt;\n)\n</code></pre>\n\n<p>But when using query:</p>\n\n<pre><code>fun query(condition: Condition): List&lt;ProjectionDTO&gt; =\n        entityManager.createQuery(\n            \"\"\"SELECT NEW com.xxx.ProjectionDTO( m.someString, e ) FROM MyClass m\n                INNER JOIN FETCH m.enums e\n                WHERE m.condition = :condition\"\"\", ProjectionDTO::class.java)\n            .setParameter(\"condition\", condition)\n            .resultList\n}\n</code></pre>\n\n<p>I get following exception:</p>\n\n<pre><code>Exception:[org.hibernate.hql.internal.ast.QuerySyntaxException: Unable to locate appropriate constructor on class [com.xxx.ProjectionDTO]. Expected arguments are: com.xxx.String, com.xxx.Enum [SELECT NEW com.xxx.ProjectionDTO( m.someString, e ) FROM MyClass m\n                INNER JOIN FETCH m.enums e\n                WHERE m.condition = :condition]]\n</code></pre>\n\n<p>Already tried different types of collection, additional constructors and calling field of given @ElementCollection like <code>e.enum</code> in query params.\nIs it possible to return a list (or other collection) from this kind of query? If so, how do I tackle it?</p>\n"}, {"tags": ["rest", "http", "kotlin", "shopify"], "answers": [{"comments": [{"owner": {"reputation": 8203, "user_id": 210841, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5adbe9e20522d6a177e76b223b6750ed?s=128&d=identicon&r=PG", "display_name": "David Lazar", "link": "https://stackoverflow.com/users/210841/david-lazar"}, "edited": false, "score": 0, "creation_date": 1554313700, "post_id": 55494774, "comment_id": 97709018, "body": "A product has many attributes. Any one of which could be missing, screwed up or otherwise malformed. For Shopify to cherry pick which one and tell you, I guess they figure that is just too much. They just lump your whole payload in as no good.   In this case, you have to know a PUT requires a resource ID, so you probably should not have wasted an hour trying to figure that out, that is the basics. It is not like Rest is a new idea these days."}], "tags": [], "owner": {"reputation": 830, "user_id": 2588059, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/Cst9F.jpg?s=128&g=1", "display_name": "Hari Krishnan", "link": "https://stackoverflow.com/users/2588059/hari-krishnan"}, "is_accepted": false, "score": 0, "last_activity_date": 1554293217, "creation_date": 1554293217, "answer_id": 55494774, "question_id": 55490329, "link": "https://stackoverflow.com/questions/55490329/shopify-422-unprocessable-entity-exception-utf-8-characters/55494774#55494774", "title": "shopify 422 Unprocessable Entity exception utf-8 characters", "body": "<p>Id was missing in the metafields payload. Shopify response could have pointed out exactly what is problem! Wasted my one hour! </p>\n"}], "owner": {"reputation": 830, "user_id": 2588059, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/Cst9F.jpg?s=128&g=1", "display_name": "Hari Krishnan", "link": "https://stackoverflow.com/users/2588059/hari-krishnan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1554293217, "creation_date": 1554279652, "question_id": 55490329, "link": "https://stackoverflow.com/questions/55490329/shopify-422-unprocessable-entity-exception-utf-8-characters", "title": "shopify 422 Unprocessable Entity exception utf-8 characters", "body": "<p>I am passing some chinese character in shopify new product PUT request with below utf-8 string.</p>\n\n<pre><code>\"%E7%94%A8%E4%B8%AD%E6%96%87%E5%88%B6%E4%BD%9C\"\n</code></pre>\n\n<p>I am passing content-type as \"application/json;charset=UTF-8\". But shopify throws 422 status code.</p>\n"}, {"tags": ["android", "kotlin", "kotlin-fuel"], "answers": [{"tags": [], "owner": {"reputation": 111, "user_id": 7919904, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3DSrv.png?s=128&g=1", "display_name": "Bram Van Dyck", "link": "https://stackoverflow.com/users/7919904/bram-van-dyck"}, "is_accepted": false, "score": 0, "last_activity_date": 1554455286, "creation_date": 1554455286, "answer_id": 55531872, "question_id": 55490293, "link": "https://stackoverflow.com/questions/55490293/fuel-httpget-responsestring-failure-com-github-kittinunf-fuel-core-bubblefue/55531872#55531872", "title": "Fuel httpGet() responseString, Failure: com.github.kittinunf.fuel.core.BubbleFuelError: null", "body": "<p>I found a way to solve this with kotlin coroutines. </p>\n\n<pre><code>fun doRequest() = runBlocking {\n    val (_, _, result) = Fuel.get(\"https://jsonplaceholder.typicode.com/posts/1\").awaitStringResponse()\n    result\n}\n</code></pre>\n\n<p>Using runBlocking will block the current thread until it's completed.</p>\n\n<p><em>Source: <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/run-blocking.html\" rel=\"nofollow noreferrer\">https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/run-blocking.html</a></em></p>\n\n<p>When you don't want to block the current thread you can start this function in a new thread like this:</p>\n\n<pre><code>Thread(\n    Runnable {\n      val result = doRequest()\n      Log.e(\"Result\", result)\n    }\n).start()\n</code></pre>\n\n<p>If someone knows a better way to handle this, please show your solution.</p>\n"}], "owner": {"reputation": 111, "user_id": 7919904, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3DSrv.png?s=128&g=1", "display_name": "Bram Van Dyck", "link": "https://stackoverflow.com/users/7919904/bram-van-dyck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 645, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1554455286, "creation_date": 1554279512, "last_edit_date": 1554282868, "question_id": 55490293, "link": "https://stackoverflow.com/questions/55490293/fuel-httpget-responsestring-failure-com-github-kittinunf-fuel-core-bubblefue", "title": "Fuel httpGet() responseString, Failure: com.github.kittinunf.fuel.core.BubbleFuelError: null", "body": "<h2>Problem</h2>\n\n<p>I want to get the result of a get request by doing a synchronous call to an API by using Fuel as Httpclient.\nI'm using Fuel in an Android (Anko) project.\nThe call is just a simple get request which always fails with this error: </p>\n\n<blockquote>\n  <p>Failure: com.github.kittinunf.fuel.core.BubbleFuelError: null</p>\n  \n  <p>Caused by: com.github.kittinunf.fuel.core.BubbleFuelError: null</p>\n</blockquote>\n\n<h2>Background</h2>\n\n<p>I want to make a function for returning a result of a simple get request using Fuel. But I'm not able to retrieve the the result synchronous.</p>\n\n<p>I cannot find any useful information about this subject on the internet.</p>\n\n<p>I tried to await the result by using coroutines and use the awaitStringResponse function.  -->  Did not worked as expected.</p>\n\n<p>Just responded to a Github issue covering this topic (marked as bug).\n<a href=\"https://github.com/kittinunf/fuel/issues/606\" rel=\"nofollow noreferrer\">https://github.com/kittinunf/fuel/issues/606</a></p>\n\n<p>Is there some workaround?</p>\n\n<h2>Code example</h2>\n\n<p><em>This code is working:</em></p>\n\n<pre><code>requestUrl.httpGet().responseString { _, _, result -&gt;\n     when (result) {\n          is Result.Success -&gt; {\n             // do something on success\n          }\n          is Result.Failure -&gt; {\n             // do something on fail\n          }\n     }\n}\n</code></pre>\n\n<p>But using this function, I am not able to return the result.</p>\n\n<p><em>This code is NOT working</em></p>\n\n<pre><code>val (_,_,result)= Fuel.get(requestUrl).responseString()\n</code></pre>\n"}, {"tags": ["android", "xml", "kotlin", "android-animation"], "comments": [{"owner": {"reputation": 1695, "user_id": 7940639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/010d85ca9a205087a63ca844be2dcc24?s=128&d=identicon&r=PG&f=1", "display_name": "Amine", "link": "https://stackoverflow.com/users/7940639/amine"}, "edited": false, "score": 0, "creation_date": 1554279682, "post_id": 55490263, "comment_id": 97688294, "body": "You are appending all 3 dots at the same time then you wait your 2 seconds"}, {"owner": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "reply_to_user": {"reputation": 1695, "user_id": 7940639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/010d85ca9a205087a63ca844be2dcc24?s=128&d=identicon&r=PG&f=1", "display_name": "Amine", "link": "https://stackoverflow.com/users/7940639/amine"}, "edited": false, "score": 0, "creation_date": 1554279999, "post_id": 55490263, "comment_id": 97688483, "body": "How is that possible if my delay is in <code>write()</code>?"}, {"owner": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1554280304, "post_id": 55490263, "comment_id": 97688642, "body": "use <code>2000 * (i + 1)</code> and pass <code>i</code> as 0, 1, 2, 3, 4 etc"}, {"owner": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "reply_to_user": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1554280729, "post_id": 55490263, "comment_id": 97688880, "body": "I&#39;m abit confused what you mean by as 0, 1, 2, 3, 4? @pskink"}, {"owner": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1554280848, "post_id": 55490263, "comment_id": 97688953, "body": "<code>fun write(letter: Char, i: int) {...</code>"}, {"owner": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "reply_to_user": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1554281066, "post_id": 55490263, "comment_id": 97689102, "body": "getting this error: <a href=\"https://i.imgur.com/g57mUA8.png\" rel=\"nofollow noreferrer\">i.imgur.com/g57mUA8.png</a> @pskink"}, {"owner": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1554281134, "post_id": 55490263, "comment_id": 97689151, "body": "so use long, as they say"}, {"owner": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "edited": false, "score": 0, "creation_date": 1554281327, "post_id": 55490263, "comment_id": 97689246, "body": "I&#39;ve fixed that - just not sure how the <code>i</code> value is meant to change and how it would actually make the animation work if it did change."}, {"owner": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1554281698, "post_id": 55490263, "comment_id": 97689467, "body": "when calling <code>write</code> pass not only your char but also a long varaible that increments starting from <code>0</code> - like <code>write(letter, someLongCounter++)</code>"}, {"owner": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "edited": false, "score": 0, "creation_date": 1554282852, "post_id": 55490263, "comment_id": 97690182, "body": "Thankyou! It works great. However are you able to explain to me why my first function didn&#39;t work? There should be a <code>2000ms</code> delay after each time <code>write()</code> is called."}, {"owner": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1554283130, "post_id": 55490263, "comment_id": 97690330, "body": "use <code>Log.d</code> to print the delay you are passing to <code>postDelayed</code> method"}, {"owner": {"reputation": 1262, "user_id": 2607738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/571796baa99b24c4be39d8c685aec55a?s=128&d=identicon&r=PG", "display_name": "rafa", "link": "https://stackoverflow.com/users/2607738/rafa"}, "edited": false, "score": 0, "creation_date": 1554296662, "post_id": 55490263, "comment_id": 97698862, "body": "@Zorgan your first function didn&#39;t work because the delay is on printing the value from the point you call the function. so assume that for loop executes and first iteration write method is called at 1ms. And what you are doing is telling the handler to execute at 2001ms(after 2000ms). and Second iteration write method called at 2 ms and what you are doing  is telling the handler to delay 2000ms from 2ms so it executes at 2002ms. Like this way all dots got printed immediately just after 2000ms. Hope this helps."}], "owner": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1554384376, "creation_date": 1554279430, "question_id": 55490263, "link": "https://stackoverflow.com/questions/55490263/handler-delay-not-working-on-my-custom-writing-text-animation", "title": "Handler() delay not working on my custom writing text animation", "body": "<p>I'm trying to append \"...\" to my <code>TextView</code> in the form of:</p>\n\n<ol>\n<li>append \".\"</li>\n<li>2000ms delay</li>\n<li>append \".\"</li>\n<li>2000ms delay</li>\n<li>append \"...\"</li>\n</ol>\n\n<p>However when I run my app, it appends all 3 \"...\" at the same time.</p>\n\n<p><strong>GlobalFunctions.kt</strong></p>\n\n<pre><code>fun writeText(tv: TextView, s: String){\n    fun write(letter: Char){\n        Handler().postDelayed({tv.append(letter.toString())}, 2000)\n    }\n    for (letter in s){\n        write(letter)\n    }\n}\n</code></pre>\n\n<p><strong>Activity.kt</strong></p>\n\n<pre><code>override fun onCreate(savedInstanceState: Bundle?) {\n    writeText(chosenPlayer, \"...\")\n}\n</code></pre>\n\n<p><strong>xml</strong></p>\n\n<pre><code>&lt;TextView\n    android:id=\"@+id/chosenPlayer\"\n    android:visibility=\"invisible\"\n    android:text=\"\"\n    android:textStyle=\"bold\"\n    android:textColor=\"@color/colorGreen\"\n    android:textSize=\"30dp\"/&gt;\n</code></pre>\n\n<p>Any idea what the problem is?</p>\n"}, {"tags": ["android", "kotlin", "android-room", "coroutine"], "answers": [{"tags": [], "owner": {"reputation": 1385, "user_id": 4971561, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-YIQlI2oeD5Q/AAAAAAAAAAI/AAAAAAAAAGA/jJHvlu2yYaI/photo.jpg?sz=128", "display_name": "Maro\u0161 \u0160eleng", "link": "https://stackoverflow.com/users/4971561/maro%c5%a1-%c5%a0eleng"}, "is_accepted": true, "score": 1, "last_activity_date": 1554278362, "creation_date": 1554278362, "answer_id": 55489950, "question_id": 55489656, "link": "https://stackoverflow.com/questions/55489656/observing-room-table-with-without-lifecycleowner-reference/55489950#55489950", "title": "Observing Room table with without LifecycleOwner reference", "body": "<p>You may use <code>LiveData.observeForever(Observer)</code>. Do not forget to call <code>LiveData.removeObserver(Observer)</code> once you do not want to get updates anymore, as using this method you register an observer that will receive updates forever (as the method's name suggests). <a href=\"https://developer.android.com/reference/android/arch/lifecycle/LiveData.html#observeForever(android.arch.lifecycle.Observer%3CT%3E)\" rel=\"nofollow noreferrer\">(Docs source)</a></p>\n"}], "owner": {"reputation": 1558, "user_id": 957375, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/3XXLZ.jpg?s=128&g=1", "display_name": "Booyaches", "link": "https://stackoverflow.com/users/957375/booyaches"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 55489950, "answer_count": 1, "score": 2, "last_activity_date": 1554295329, "creation_date": 1554277383, "last_edit_date": 1554295329, "question_id": 55489656, "link": "https://stackoverflow.com/questions/55489656/observing-room-table-with-without-lifecycleowner-reference", "title": "Observing Room table with without LifecycleOwner reference", "body": "<p>I have a component in my app that performs specific work when the database gets updated. In order to observe Room table, I need to use LiveData which requires me to pass LifecycleOwner. My component has nothing to do with any of the views so I don't have a Lifecycle. How can I observe on Room table without a reference to LifecycleOwner? I am using Kotlin and Coroutines.</p>\n"}, {"tags": ["android", "android-activity", "kotlin", "fragment", "android-databinding"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 11303866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/285bd24961297543c255aa9b99f06523?s=128&d=identicon&r=PG&f=1", "display_name": "Brodalee", "link": "https://stackoverflow.com/users/11303866/brodalee"}, "edited": false, "score": 0, "creation_date": 1554290638, "post_id": 55490594, "comment_id": 97694975, "body": "It is. The fist time when i launch the app, the fragment is correctly inflated, but when i press HB, then reload the app, that&#39;s a crash."}, {"owner": {"reputation": 1044, "user_id": 3002993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/515f089012e30b4696d4153ae67f151e?s=128&d=identicon&r=PG&f=1", "display_name": "farhanjk", "link": "https://stackoverflow.com/users/3002993/farhanjk"}, "reply_to_user": {"reputation": 21, "user_id": 11303866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/285bd24961297543c255aa9b99f06523?s=128&d=identicon&r=PG&f=1", "display_name": "Brodalee", "link": "https://stackoverflow.com/users/11303866/brodalee"}, "edited": false, "score": 0, "creation_date": 1554318415, "post_id": 55490594, "comment_id": 97711389, "body": "Ok, I strongly suspect it is your fragment which is failing to inflate. You will need to isolate the reason for crash. To verify this assumption, remove the navigation fragment from your main activity and directly add the first fragment from your navgraph to this activity&#39;s layout. If it still crashes (with android navigation), the problem is with your fragment inflation and not navigation graph."}], "tags": [], "owner": {"reputation": 1044, "user_id": 3002993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/515f089012e30b4696d4153ae67f151e?s=128&d=identicon&r=PG&f=1", "display_name": "farhanjk", "link": "https://stackoverflow.com/users/3002993/farhanjk"}, "is_accepted": false, "score": -1, "last_activity_date": 1554280446, "creation_date": 1554280446, "answer_id": 55490594, "question_id": 55489618, "link": "https://stackoverflow.com/questions/55489618/how-to-fix-inflateexception-error-inflating-class-fragment-when-i-use-databindin/55490594#55490594", "title": "How to fix InflateException Error inflating class fragment when I use databinding", "body": "<p>Seems like an issue with your navGraph. Check if you have specified the correct fragment names etc. </p>\n"}], "owner": {"reputation": 21, "user_id": 11303866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/285bd24961297543c255aa9b99f06523?s=128&d=identicon&r=PG&f=1", "display_name": "Brodalee", "link": "https://stackoverflow.com/users/11303866/brodalee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 561, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1554280446, "creation_date": 1554277280, "last_edit_date": 1554278966, "question_id": 55489618, "link": "https://stackoverflow.com/questions/55489618/how-to-fix-inflateexception-error-inflating-class-fragment-when-i-use-databindin", "title": "How to fix InflateException Error inflating class fragment when I use databinding", "body": "<p>I am new in kotlin &amp; android (just to prevent).</p>\n\n<p>I work on a project that is structured as OneSingleActivity.</p>\n\n<p>The problem is that when I press the HOME button and then I try to go again in the app, it crashes automatically.</p>\n\n<p>It gives following error code </p>\n\n<blockquote>\n  <p>android.view.InflateException: Binary XML file line #30: Binary XML\n  file line #30: Error inflating class fragment</p>\n</blockquote>\n\n<p>where the source error target my line that contains the binding initializer.</p>\n\n<p>My goal is to when I press on the HomeButton, and later I go in the app that stayed on the Background, retrieve the last fragment where I was.</p>\n\n<p>I already tried to : </p>\n\n<ul>\n<li><p>Change manifest.xml (singleInstance, taskreparenting, clearTaskOnLaunch)</p></li>\n<li><p>Change the intent flag to clearTop</p></li>\n<li><p>Use the <code>DataindUtil.inflate</code></p></li>\n<li><p>change how works the HOME button</p></li>\n<li><p>kill the activity when I am <code>onStop</code> (it work, but when I re launch the app, I am not on the last fragment where I was before press the HB)</p></li>\n<li><p>unbind</p></li>\n</ul>\n\n<pre><code>override fun onCreate(savedInstanceState: Bundle?) {\n     super.onCreate(savedInstanceState)\n     ...\n     // Creating a binding to activity layout\n     // This is where app crash\n        val binding: ActivityNavigationBinding = DataBindingUtil.setContentView(this, R.layout.activity_navigation)\n        drawerLayout = binding.drawerLayout\n}\n</code></pre>\n\n<p>Fragment used in my activity_navigation.xml : </p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;fragment\n      android:id=\"@+id/nav_fragment\"\n      android:name=\"androidx.navigation.fragment.NavHostFragment\"\n      android:layout_width=\"match_parent\"\n      android:layout_height=\"match_parent\"\n      app:defaultNavHost=\"true\"\n      app:navGraph=\"@navigation/nav_app\"/&gt;\n</code></pre>\n\n<p><strong>Expected :</strong> </p>\n\n<ul>\n<li>When I press HB, and go to the app in BG, app does not crash, and i am on the last fragment where I was.</li>\n</ul>\n\n<p><strong>Actually :</strong></p>\n\n<ul>\n<li>App crash when I press on HB, and launch again the App that was in BG (does not works too when I click on the app's icon)</li>\n</ul>\n\n<p>Thank all for helping a new user of kotlin &amp; android.</p>\n"}, {"tags": ["android", "kotlin", "kotlin-coroutines"], "comments": [{"owner": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1554276123, "post_id": 55489239, "comment_id": 97686298, "body": "I think because that makes the example code work without having to set up the scoping in every snippet"}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1554278170, "post_id": 55489239, "comment_id": 97687413, "body": "It has something to do with using it for an actor and not for <code>launch</code> or <code>async</code>. You don&#39;t send off concurrent tasks with it, but set up a listener. Still, Kotlin doesn&#39;t have a complete story here and there&#39;s a reason why these APIs stayed experimental even as the general feature of coroutines went GA."}, {"owner": {"reputation": 324, "user_id": 5354658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e0bf43308c75d6bca39c9583b7ebb49?s=128&d=identicon&r=PG&f=1", "display_name": "Choim", "link": "https://stackoverflow.com/users/5354658/choim"}, "reply_to_user": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1554281123, "post_id": 55489239, "comment_id": 97689143, "body": "@MarkoTopolnik ok, I now know <code>actor</code> makes some difference. but, according to document, actor launches new coroutine too. And it wouldn&#39;t be cancelled if I use <code>GlobalScope</code> to use actor. what does make <code>actor</code> in <code>GlobalScope</code> be safe?"}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1554286587, "post_id": 55489239, "comment_id": 97692506, "body": "I think the whole lot of the event listener, the channel and the coroutine become unreachable when your GUI component becomes unreachable and subject to garbage collection. However, if the actor calls a suspendable function and your GUI gets destroyed while it&#39;s inside that function, the coroutine will survive."}, {"owner": {"reputation": 324, "user_id": 5354658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e0bf43308c75d6bca39c9583b7ebb49?s=128&d=identicon&r=PG&f=1", "display_name": "Choim", "link": "https://stackoverflow.com/users/5354658/choim"}, "reply_to_user": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1554346047, "post_id": 55489239, "comment_id": 97719803, "body": "@MarkoTopolnik Thanks for comment! In many cases, listeners have to call suspendable function like network job causing coroutine to be survive. is it ok if I guarantee that suspendable function will be terminated in short time? even if I use <code>GlobalScope</code>"}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 1, "creation_date": 1554363523, "post_id": 55489239, "comment_id": 97725825, "body": "That depends on what the code does. In my project i got crashes from the coroutine trying to update a GUI component that had its <code>context</code> nulled out and other variations of that. So it didn&#39;t matter how short the delay was, as soon as I acted upon a destroyed activity&#39;s GUI tree, i got into trouble."}, {"owner": {"reputation": 324, "user_id": 5354658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e0bf43308c75d6bca39c9583b7ebb49?s=128&d=identicon&r=PG&f=1", "display_name": "Choim", "link": "https://stackoverflow.com/users/5354658/choim"}, "reply_to_user": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1554363925, "post_id": 55489239, "comment_id": 97726052, "body": "@MarkoTopolnik it&#39;s another problem... It seems that coroutines must be cancelled when GUI tree destroyed. Regardless what its scope is. right?"}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 1, "creation_date": 1554365470, "post_id": 55489239, "comment_id": 97726916, "body": "The point of the scope is to do this for you. If you create the coroutine in the scope whose lifecycle is bound to the GUI&#39;s lifecycle, it will be cancelled. But you are still responsible for writing the explicit code that cancels the scope&#39;s job (the basic example provided in the documentation of <code>CoroutineScope</code>)."}], "owner": {"reputation": 324, "user_id": 5354658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e0bf43308c75d6bca39c9583b7ebb49?s=128&d=identicon&r=PG&f=1", "display_name": "Choim", "link": "https://stackoverflow.com/users/5354658/choim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1554277332, "creation_date": 1554275973, "last_edit_date": 1554277332, "question_id": 55489239, "link": "https://stackoverflow.com/questions/55489239/why-do-many-examples-use-globalscope-for-android-onclicklistener", "title": "Why do many examples use GlobalScope for android OnClickListener?", "body": "<p>I wonder why many examples use GlobalScope for android OnClickListener.</p>\n\n<p>example : <a href=\"https://github.com/Kotlin/kotlinx.coroutines/blob/master/ui/coroutines-guide-ui.md#at-most-one-concurrent-job\" rel=\"nofollow noreferrer\">https://github.com/Kotlin/kotlinx.coroutines/blob/master/ui/coroutines-guide-ui.md#at-most-one-concurrent-job</a></p>\n\n<p>I know to avoid using <code>GlobalScope</code> is recommended. Is there any reason for using <code>GlobalScope</code> in that case?</p>\n\n<p>is it safe? or do I must use <code>Activity</code> or <code>Fragment</code> scope?</p>\n"}, {"tags": ["android", "kotlin", "progress-bar"], "comments": [{"owner": {"reputation": 23894, "user_id": 1844392, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/2jBjo.png?s=128&g=1", "display_name": "Piyush", "link": "https://stackoverflow.com/users/1844392/piyush"}, "edited": false, "score": 0, "creation_date": 1554274959, "post_id": 55488938, "comment_id": 97685758, "body": "Because your progress bar is gone while it throw some exception not that time when you get success response."}, {"owner": {"reputation": 5935, "user_id": 10182897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PuvGT.jpg?s=128&g=1", "display_name": "Ashish", "link": "https://stackoverflow.com/users/10182897/ashish"}, "edited": false, "score": 0, "creation_date": 1554276367, "post_id": 55488938, "comment_id": 97686421, "body": "so you wanted to show the response to user after progressbar stop ? and Your display becomes blank after progress bar gone. It means you didn&#39;t attached your response to your design."}, {"owner": {"reputation": 6128, "user_id": 5351055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/11xsg.jpg?s=128&g=1", "display_name": "Manoj Perumarath", "link": "https://stackoverflow.com/users/5351055/manoj-perumarath"}, "edited": false, "score": 1, "creation_date": 1554276620, "post_id": 55488938, "comment_id": 97686555, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/20565250/android-cant-hide-progress-bar\">Android - Can&#39;t hide progress bar</a>"}], "answers": [{"comments": [{"owner": {"reputation": 163, "user_id": 10259634, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-17VC2FDXEf0/AAAAAAAAAAI/AAAAAAAAChk/Y9u6b0aJPCc/photo.jpg?sz=128", "display_name": "Christina Varghese", "link": "https://stackoverflow.com/users/10259634/christina-varghese"}, "edited": false, "score": 0, "creation_date": 1554275559, "post_id": 55488979, "comment_id": 97686033, "body": "i&#39;ve tried and the progress bar stops but the issue is that the screen becomes blank after the progress bar had gone"}, {"owner": {"reputation": 4957, "user_id": 4700782, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/rSGzc.jpg?s=128&g=1", "display_name": "Pier Giorgio Misley", "link": "https://stackoverflow.com/users/4700782/pier-giorgio-misley"}, "reply_to_user": {"reputation": 163, "user_id": 10259634, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-17VC2FDXEf0/AAAAAAAAAAI/AAAAAAAAChk/Y9u6b0aJPCc/photo.jpg?sz=128", "display_name": "Christina Varghese", "link": "https://stackoverflow.com/users/10259634/christina-varghese"}, "edited": false, "score": 0, "creation_date": 1554275604, "post_id": 55488979, "comment_id": 97686057, "body": "@ChristinaVarghese can you please add your XML code?"}, {"owner": {"reputation": 178, "user_id": 8712139, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-V7C44mtJWj0/AAAAAAAAAAI/AAAAAAAAFEo/cANpvlqilCY/photo.jpg?sz=128", "display_name": "Aravind V", "link": "https://stackoverflow.com/users/8712139/aravind-v"}, "edited": false, "score": 0, "creation_date": 1554275865, "post_id": 55488979, "comment_id": 97686182, "body": "try this link <a href=\"https://stackoverflow.com/questions/36918219/how-to-disable-user-interaction-while-progressbar-is-visible-in-android?answertab=oldest#tab-top\" title=\"how to disable user interaction while progressbar is visible in android\">stackoverflow.com/questions/36918219/&hellip;</a>"}], "tags": [], "owner": {"reputation": 4957, "user_id": 4700782, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/rSGzc.jpg?s=128&g=1", "display_name": "Pier Giorgio Misley", "link": "https://stackoverflow.com/users/4700782/pier-giorgio-misley"}, "is_accepted": false, "score": 0, "last_activity_date": 1554274944, "creation_date": 1554274944, "answer_id": 55488979, "question_id": 55488938, "link": "https://stackoverflow.com/questions/55488938/how-to-stop-the-progress-bar-after-getting-response-from-the-server/55488979#55488979", "title": "How to stop the progress bar after getting response from the server", "body": "<p>You are hiding the progressbar only if the code goes in <code>Exception</code> (catch block).</p>\n\n<p>Move your code after the catch block, as follows:</p>\n\n<pre><code>    try {\n         progressBar.setVisibility(View.VISIBLE);\n         appList = getAppList(requestBody, LAUNCHER_BASE_URL)\n         Log.d(\"App list =\", appList.toString())\n         appInfoList = populateList()\n    } catch (e: Exception) {\n         Log.e(\"Exception-launcher\", e.toString())\n    }\n    progressBar.setVisibility(View.GONE);\n</code></pre>\n\n<p>Let me know if that helps</p>\n"}, {"comments": [{"owner": {"reputation": 163, "user_id": 10259634, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-17VC2FDXEf0/AAAAAAAAAAI/AAAAAAAAChk/Y9u6b0aJPCc/photo.jpg?sz=128", "display_name": "Christina Varghese", "link": "https://stackoverflow.com/users/10259634/christina-varghese"}, "edited": false, "score": 0, "creation_date": 1554275589, "post_id": 55488981, "comment_id": 97686049, "body": "i&#39;ve tried and the progress bar stops but the issue is that the screen becomes blank after the progress bar had gone"}, {"owner": {"reputation": 2693, "user_id": 450356, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/SOCF1.png?s=128&g=1", "display_name": "Adib Faramarzi", "link": "https://stackoverflow.com/users/450356/adib-faramarzi"}, "reply_to_user": {"reputation": 163, "user_id": 10259634, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-17VC2FDXEf0/AAAAAAAAAAI/AAAAAAAAChk/Y9u6b0aJPCc/photo.jpg?sz=128", "display_name": "Christina Varghese", "link": "https://stackoverflow.com/users/10259634/christina-varghese"}, "edited": false, "score": 1, "creation_date": 1554275876, "post_id": 55488981, "comment_id": 97686187, "body": "I&#39;m not sure how layout is laid out, but try <code>View.INVISIBLE</code> and see if that changes anything."}, {"owner": {"reputation": 163, "user_id": 10259634, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-17VC2FDXEf0/AAAAAAAAAAI/AAAAAAAAChk/Y9u6b0aJPCc/photo.jpg?sz=128", "display_name": "Christina Varghese", "link": "https://stackoverflow.com/users/10259634/christina-varghese"}, "edited": false, "score": 2, "creation_date": 1554276996, "post_id": 55488981, "comment_id": 97686757, "body": "Thank you so much,it is working .Instead of <code>View.GONE</code> .I&#39;ve used <code>View.INVISIBLE</code>"}], "tags": [], "owner": {"reputation": 2693, "user_id": 450356, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/SOCF1.png?s=128&g=1", "display_name": "Adib Faramarzi", "link": "https://stackoverflow.com/users/450356/adib-faramarzi"}, "is_accepted": true, "score": 3, "last_activity_date": 1554277278, "last_edit_date": 1554277278, "creation_date": 1554274946, "answer_id": 55488981, "question_id": 55488938, "link": "https://stackoverflow.com/questions/55488938/how-to-stop-the-progress-bar-after-getting-response-from-the-server/55488981#55488981", "title": "How to stop the progress bar after getting response from the server", "body": "<p>Add <code>progressBar.setVisibility(View.INVISIBLE);</code> in your try clause too, because in its current state, it will only remove the loading for when the API fails:</p>\n\n<pre><code> var progressBar =  findViewById(R.id.progressBar) as ProgressBar\n doAsync {\n            try {\n                    progressBar.setVisibility(View.VISIBLE);\n                    appList = getAppList(requestBody, LAUNCHER_BASE_URL)\n                    Log.d(\"App list =\", appList.toString())\n                    appInfoList = populateList()\n                progressBar.setVisibility(View.INVISIBLE);\n            } catch (e: Exception) {\n                progressBar.setVisibility(View.INVISIBLE);\n                Log.e(\"Exception-launcher\", e.toString())\n            }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 163, "user_id": 10259634, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-17VC2FDXEf0/AAAAAAAAAAI/AAAAAAAAChk/Y9u6b0aJPCc/photo.jpg?sz=128", "display_name": "Christina Varghese", "link": "https://stackoverflow.com/users/10259634/christina-varghese"}, "edited": false, "score": 0, "creation_date": 1554275467, "post_id": 55489036, "comment_id": 97685993, "body": "i&#39;ve tried and the progress bar stops but the issue is that the screen becomes blank after the progress bar had gone"}, {"owner": {"reputation": 537, "user_id": 7255999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46a8be2d26e0985bc2a5102e6a404f50?s=128&d=identicon&r=PG", "display_name": "Muhammad Muzammil Sharif", "link": "https://stackoverflow.com/users/7255999/muhammad-muzammil-sharif"}, "reply_to_user": {"reputation": 163, "user_id": 10259634, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-17VC2FDXEf0/AAAAAAAAAAI/AAAAAAAAChk/Y9u6b0aJPCc/photo.jpg?sz=128", "display_name": "Christina Varghese", "link": "https://stackoverflow.com/users/10259634/christina-varghese"}, "edited": false, "score": 0, "creation_date": 1554275690, "post_id": 55489036, "comment_id": 97686097, "body": "i guess the problem is in your xml"}, {"owner": {"reputation": 537, "user_id": 7255999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46a8be2d26e0985bc2a5102e6a404f50?s=128&d=identicon&r=PG", "display_name": "Muhammad Muzammil Sharif", "link": "https://stackoverflow.com/users/7255999/muhammad-muzammil-sharif"}, "reply_to_user": {"reputation": 163, "user_id": 10259634, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-17VC2FDXEf0/AAAAAAAAAAI/AAAAAAAAChk/Y9u6b0aJPCc/photo.jpg?sz=128", "display_name": "Christina Varghese", "link": "https://stackoverflow.com/users/10259634/christina-varghese"}, "edited": false, "score": 0, "creation_date": 1554275792, "post_id": 55489036, "comment_id": 97686146, "body": "there is no issue in xml too that you attached in above"}, {"owner": {"reputation": 537, "user_id": 7255999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46a8be2d26e0985bc2a5102e6a404f50?s=128&d=identicon&r=PG", "display_name": "Muhammad Muzammil Sharif", "link": "https://stackoverflow.com/users/7255999/muhammad-muzammil-sharif"}, "reply_to_user": {"reputation": 163, "user_id": 10259634, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-17VC2FDXEf0/AAAAAAAAAAI/AAAAAAAAChk/Y9u6b0aJPCc/photo.jpg?sz=128", "display_name": "Christina Varghese", "link": "https://stackoverflow.com/users/10259634/christina-varghese"}, "edited": false, "score": 1, "creation_date": 1554276150, "post_id": 55489036, "comment_id": 97686310, "body": "i guess its your view composition that creating issue, you should try <code>View.INVISIBLE</code> instead of <code>View.GONE</code>"}], "tags": [], "owner": {"reputation": 537, "user_id": 7255999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46a8be2d26e0985bc2a5102e6a404f50?s=128&d=identicon&r=PG", "display_name": "Muhammad Muzammil Sharif", "link": "https://stackoverflow.com/users/7255999/muhammad-muzammil-sharif"}, "is_accepted": false, "score": 1, "last_activity_date": 1554275538, "last_edit_date": 1554275538, "creation_date": 1554275228, "answer_id": 55489036, "question_id": 55488938, "link": "https://stackoverflow.com/questions/55488938/how-to-stop-the-progress-bar-after-getting-response-from-the-server/55489036#55489036", "title": "How to stop the progress bar after getting response from the server", "body": "<p>try below code</p>\n\n<pre><code>doAsync {\n    try {\n        progressBar.visibility = View.VISIBLE\n        appList = getAppList(requestBody, LAUNCHER_BASE_URL)\n        Log.d(\"App list =\", appList.toString())\n        appInfoList = populateList()\n    } catch (e: Exception) {\n        progressBar.visibility = View.GONE\n        Log.e(\"Exception-launcher\", e.toString())\n    } finally {\n        progressBar.visibility = View.GONE\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5192, "user_id": 3084205, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/qaFQu.jpg?s=128&g=1", "display_name": "Stanislav Bondar", "link": "https://stackoverflow.com/users/3084205/stanislav-bondar"}, "is_accepted": false, "score": 0, "last_activity_date": 1554276971, "creation_date": 1554276971, "answer_id": 55489522, "question_id": 55488938, "link": "https://stackoverflow.com/questions/55488938/how-to-stop-the-progress-bar-after-getting-response-from-the-server/55489522#55489522", "title": "How to stop the progress bar after getting response from the server", "body": "<p>Not really clear how can you handle <code>View</code> inside <code>doAsync</code>\nNormally this should represents in this way</p>\n\n<pre><code> val progressBar =  findViewById&lt;ProgressBar&gt;(R.id.progressBar)\n progressBar.visibility = View.VISIBLE\n doAsync {\n      try {\n         appList = getAppList(requestBody, LAUNCHER_BASE_URL)\n         Log.d(\"App list =\", appList.toString())\n         appInfoList = populateList()              \n      } catch (e: Exception) {\n          e.printStackTrace()\n      }\n\n      uiThread {\n         progressBar.visibility = View.GONE\n      }\n }\n</code></pre>\n"}], "owner": {"reputation": 163, "user_id": 10259634, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-17VC2FDXEf0/AAAAAAAAAAI/AAAAAAAAChk/Y9u6b0aJPCc/photo.jpg?sz=128", "display_name": "Christina Varghese", "link": "https://stackoverflow.com/users/10259634/christina-varghese"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1277, "favorite_count": 0, "accepted_answer_id": 55488981, "answer_count": 4, "score": 2, "last_activity_date": 1564644221, "creation_date": 1554274761, "last_edit_date": 1564644221, "question_id": 55488938, "link": "https://stackoverflow.com/questions/55488938/how-to-stop-the-progress-bar-after-getting-response-from-the-server", "title": "How to stop the progress bar after getting response from the server", "body": "<p>I'm trying to stop the progress bar after getting response from server.\nBelow is the xml code that I've used</p>\n\n<p><code>activity.xml</code></p>\n\n<pre><code>  &lt;ProgressBar\n        android:layout_weight=\"1\"\n        android:id=\"@+id/progressBar\"\n        android:indeterminate=\"true\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:minHeight=\"40dp\"\n        android:minWidth=\"40dp\"\n        tools:ignore=\"MissingConstraints\" /&gt;\n</code></pre>\n\n<p><code>activity.kt</code></p>\n\n<pre><code> var progressBar =  findViewById(R.id.progressBar) as ProgressBar\n doAsync {\n            try {\n                    progressBar.setVisibility(View.VISIBLE);\n                    appList = getAppList(requestBody, LAUNCHER_BASE_URL)\n                    Log.d(\"App list =\", appList.toString())\n                    appInfoList = populateList()\n                    progressBar.setVisibility(View.GONE);\n            } catch (e: Exception) {\n                progressBar.setVisibility(View.GONE);\n                Log.e(\"Exception-launcher\", e.toString())\n            }\n</code></pre>\n\n<p>From the above code,progress bar is not stopping even after getting the response. Any help would be appreciated </p>\n\n<p>I've tried that but the page becomes blank after the progress bar stops</p>\n"}, {"tags": ["list", "kotlin", "collections", "kotlin-android-extensions"], "comments": [{"owner": {"reputation": 15297, "user_id": 7631480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zcBMm.png?s=128&g=1", "display_name": "CryptoFool", "link": "https://stackoverflow.com/users/7631480/cryptofool"}, "edited": false, "score": 0, "creation_date": 1554272722, "post_id": 55488291, "comment_id": 97684776, "body": "huh?  what list are you talking about?  Kotlin lists ARE Java lists, aren&#39;t they?   I&#39;m sorry if the foreign names are throwing me off."}, {"owner": {"reputation": 849, "user_id": 8348768, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HnWqdSmYkeA/AAAAAAAAAAI/AAAAAAAACOQ/mYXaMoMOC0s/photo.jpg?sz=128", "display_name": "Mohit Lakhanpal", "link": "https://stackoverflow.com/users/8348768/mohit-lakhanpal"}, "reply_to_user": {"reputation": 15297, "user_id": 7631480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zcBMm.png?s=128&g=1", "display_name": "CryptoFool", "link": "https://stackoverflow.com/users/7631480/cryptofool"}, "edited": false, "score": 0, "creation_date": 1554272861, "post_id": 55488291, "comment_id": 97684836, "body": "@Steve I&#39;m talking about var listofVechileName:List&lt;String&gt;?=null  how to add the item  on it"}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 2, "creation_date": 1554273150, "post_id": 55488291, "comment_id": 97684958, "body": "You need to take a step back, and read the documentation to learn the fundamentals of Kotlin, by simply reading the documentation: <a href=\"https://kotlinlang.org/docs/reference/collections.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/collections.html</a>"}, {"owner": {"reputation": 15297, "user_id": 7631480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zcBMm.png?s=128&g=1", "display_name": "CryptoFool", "link": "https://stackoverflow.com/users/7631480/cryptofool"}, "edited": false, "score": 0, "creation_date": 1554274034, "post_id": 55488291, "comment_id": 97685335, "body": "Ah yes...the immutable thing.  I just didn&#39;t put 2 and 2 together on this one.  Makes perfect, obvious sense.  I don&#39;t get to do enough Kotlin coding yet.  It&#39;s not about reading the docs.  Rather, it&#39;s about doing your day job in Java, and having to pull your head out of that and think in Kotlin."}, {"owner": {"reputation": 1669, "user_id": 9987309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vUtsn.jpg?s=128&g=1", "display_name": "iCantC", "link": "https://stackoverflow.com/users/9987309/icantc"}, "edited": false, "score": 1, "creation_date": 1580800136, "post_id": 55488291, "comment_id": 106206676, "body": "A simple answer, <b>you can&#39;t</b> directly add items to <b>List</b> without converting it to its mutable form."}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 2870180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G5dkq.png?s=128&g=1", "display_name": "Peppe Scab", "link": "https://stackoverflow.com/users/2870180/peppe-scab"}, "edited": false, "score": 0, "creation_date": 1554274073, "post_id": 55488398, "comment_id": 97685354, "body": "what JB Nizet said is true, but if my answer solved your question please mark it as correct"}, {"owner": {"reputation": 129, "user_id": 2870180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G5dkq.png?s=128&g=1", "display_name": "Peppe Scab", "link": "https://stackoverflow.com/users/2870180/peppe-scab"}, "edited": false, "score": 0, "creation_date": 1554295550, "post_id": 55488398, "comment_id": 97698117, "body": "I didnt want to change too much author, but as someone makes me notice you should avoid to init to null, it would be better using lazeinit"}], "tags": [], "owner": {"reputation": 129, "user_id": 2870180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G5dkq.png?s=128&g=1", "display_name": "Peppe Scab", "link": "https://stackoverflow.com/users/2870180/peppe-scab"}, "is_accepted": false, "score": 6, "last_activity_date": 1554272799, "creation_date": 1554272799, "answer_id": 55488398, "question_id": 55488291, "link": "https://stackoverflow.com/questions/55488291/how-to-add-an-item-to-a-list-in-kotlin/55488398#55488398", "title": "How to add an item to a list in Kotlin?", "body": "<p>you should use a MutableList like ArrayList</p>\n\n<pre><code>var listofVechileName:List&lt;String&gt;?=null\n</code></pre>\n\n<p>becomes</p>\n\n<pre><code> var listofVechileName:ArrayList&lt;String&gt;?=null\n</code></pre>\n\n<p>and with that you can use the method add</p>\n\n<p><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-mutable-list/add.html\" rel=\"noreferrer\">https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-mutable-list/add.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 8990, "user_id": 624814, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/3a863d626cfeba2251bdf48ee8b38b7a?s=128&d=identicon&r=PG", "display_name": "SMBiggs", "link": "https://stackoverflow.com/users/624814/smbiggs"}, "edited": false, "score": 6, "creation_date": 1579379045, "post_id": 55501175, "comment_id": 105749146, "body": "Oh yeah, that&#39;s so obvious!  Much easier than java.  I&#39;m so glad we switched."}], "tags": [], "owner": {"reputation": 128160, "user_id": 321697, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/FHlMy.jpg?s=128&g=1", "display_name": "Kevin Coppock", "link": "https://stackoverflow.com/users/321697/kevin-coppock"}, "is_accepted": false, "score": 41, "last_activity_date": 1554313263, "creation_date": 1554313263, "answer_id": 55501175, "question_id": 55488291, "link": "https://stackoverflow.com/questions/55488291/how-to-add-an-item-to-a-list-in-kotlin/55501175#55501175", "title": "How to add an item to a list in Kotlin?", "body": "<p>A more idiomatic approach would be to use <code>MutableList</code> instead of specifically <code>ArrayList</code>. You can declare:</p>\n\n<pre><code>val listOfVehicleNames: MutableList&lt;String&gt; = mutableListOf()\n</code></pre>\n\n<p>And add to it that way. Alternatively, you may wish to prefer immutability, and declare it as:</p>\n\n<pre><code>var listOfVehicleNames: List&lt;String&gt; = emptyList()\n</code></pre>\n\n<p>And in your completion block, simply reassign it:</p>\n\n<pre><code>listOfVehicleNames = response.body()?.message()?.orEmpty()\n    .map { it.name() /* assumes name() function exists */ }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 590, "user_id": 9132597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74695f17df89aed6988f7cd235075a61?s=128&d=identicon&r=PG&f=1", "display_name": "Brent", "link": "https://stackoverflow.com/users/9132597/brent"}, "is_accepted": false, "score": 6, "last_activity_date": 1590505843, "last_edit_date": 1590505843, "creation_date": 1554314528, "answer_id": 55501513, "question_id": 55488291, "link": "https://stackoverflow.com/questions/55488291/how-to-add-an-item-to-a-list-in-kotlin/55501513#55501513", "title": "How to add an item to a list in Kotlin?", "body": "<p>instead of using a regular list which is immutable just use an arrayListof which is mutable  </p>\n\n<p>so your regular list will become </p>\n\n<pre><code>var listofVehicleNames = arrayListOf(\"list items here\")\n</code></pre>\n\n<p>then you can use the add function</p>\n\n<pre><code>listOfVehicleNames.add(\"what you want to add\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10570, "user_id": 6401241, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mduJJ.png?s=128&g=1", "display_name": "Radesh", "link": "https://stackoverflow.com/users/6401241/radesh"}, "is_accepted": false, "score": 32, "last_activity_date": 1582009576, "last_edit_date": 1582009576, "creation_date": 1560668905, "answer_id": 56616852, "question_id": 55488291, "link": "https://stackoverflow.com/questions/55488291/how-to-add-an-item-to-a-list-in-kotlin/56616852#56616852", "title": "How to add an item to a list in Kotlin?", "body": "<p>If you don't want or can't use array list directly use this code for add item</p>\n\n<pre><code>itemsList.toMutableList().add(item)\n</code></pre>\n\n<p><em>itemlist</em> : list of your items </p>\n\n<p><em>item</em> : item you want to add</p>\n"}, {"tags": [], "owner": {"reputation": 73881, "user_id": 56285, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/0u454.jpg?s=128&g=1", "display_name": "Jonik", "link": "https://stackoverflow.com/users/56285/jonik"}, "is_accepted": false, "score": 26, "last_activity_date": 1588252041, "creation_date": 1588252041, "answer_id": 61524134, "question_id": 55488291, "link": "https://stackoverflow.com/questions/55488291/how-to-add-an-item-to-a-list-in-kotlin/61524134#61524134", "title": "How to add an item to a list in Kotlin?", "body": "<p>Talking about an idiomatic approach... \ud83d\ude44</p>\n\n<p>When you can get away with only using <strong>immutable</strong> lists (which means <em>usually</em> in Kotlin), simply use <code>+</code> or <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/plus.html\" rel=\"noreferrer\"><code>plus</code></a>. It returns a new list \nwith all elements of the original list plus the newly added one:</p>\n\n<pre><code>val original = listOf(\"orange\", \"apple\")\nval modified = original + \"lemon\" // [orange, apple, lemon]\n</code></pre>\n\n<p><code>original.plus(\"lemon\")</code> yields the same result as <code>original + \"lemon\"</code>. Slightly more verbose but might come in handy when combining several collection operations:</p>\n\n<pre><code>return getFruit()\n       .plus(\"lemon\")\n       .distinct()\n</code></pre>\n\n<p>Besides adding a single element, you can use <code>plus</code> to concatenate a whole collection too:</p>\n\n<pre><code>val original = listOf(\"orange\", \"apple\")\nval other = listOf(\"banana\", \"strawberry\")\nval newList = original + other // [orange, apple, banana, strawberry]\n</code></pre>\n\n<p>Disclaimer: this doesn't directly answer OP's question, but I feel that in a question titled \"How to add an item to a list in Kotlin?\", which is a top Google hit for this topic, <code>plus</code> <em>must</em> be mentioned.</p>\n"}, {"tags": [], "owner": {"reputation": 7044, "user_id": 2106348, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7cXp4.png?s=128&g=1", "display_name": "Vinod Joshi", "link": "https://stackoverflow.com/users/2106348/vinod-joshi"}, "is_accepted": false, "score": 3, "last_activity_date": 1593008179, "creation_date": 1593008179, "answer_id": 62557176, "question_id": 55488291, "link": "https://stackoverflow.com/questions/55488291/how-to-add-an-item-to-a-list-in-kotlin/62557176#62557176", "title": "How to add an item to a list in Kotlin?", "body": "<p>For any specific class, the following may help</p>\n<pre><code> var newSearchData = List&lt;FIRListValuesFromServer&gt;()\n\n        for (i in 0 until this.singleton.firListFromServer.size) {\n\n            if (searchText.equals(this.singleton.firListFromServer.get(i).FIR_SRNO)) {\n\n                newSearchData.toMutableList().add(this.singleton.firListFromServer.get(i))\n\n            }\n        }\n</code></pre>\n"}], "owner": {"reputation": 849, "user_id": 8348768, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HnWqdSmYkeA/AAAAAAAAAAI/AAAAAAAACOQ/mYXaMoMOC0s/photo.jpg?sz=128", "display_name": "Mohit Lakhanpal", "link": "https://stackoverflow.com/users/8348768/mohit-lakhanpal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71461, "favorite_count": 6, "answer_count": 6, "score": 51, "last_activity_date": 1616762346, "creation_date": 1554272319, "last_edit_date": 1588252082, "question_id": 55488291, "link": "https://stackoverflow.com/questions/55488291/how-to-add-an-item-to-a-list-in-kotlin", "title": "How to add an item to a list in Kotlin?", "body": "<p>I'm trying to add an element list to the list of string, but I found <code>Kotlin</code> does not have an add function like <code>java</code> so please help me out how to add the items to the list. </p>\n\n<pre><code>class RetrofitKotlin : AppCompatActivity() {\n\n    var listofVechile:List&lt;Message&gt;?=null\n    var listofVechileName:List&lt;String&gt;?=null\n    var listview:ListView?=null\n    var progressBar:ProgressBar?=null\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_retrofit_kotlin)\n\n        listview=findViewById&lt;ListView&gt;(R.id.mlist)\n        var apiInterfacee=ApiClass.client.create(ApiInterfacee::class.java)\n        val call=apiInterfacee.getTaxiType()\n        call.enqueue(object : Callback&lt;TaxiTypeResponse&gt; {\n\n            override fun onResponse(call: Call&lt;TaxiTypeResponse&gt;, response: Response&lt;TaxiTypeResponse&gt;) {\n\n                listofVechile=response.body()?.message!!\n                println(\"Sixze is here listofVechile   ${listofVechile!!.size}\")\n                if (listofVechile!=null) {\n                    for (i in 0..listofVechile!!.size-1) {\n\n                        //how to add the name only listofVechileName list\n\n                    }\n                }\n                //println(\"Sixze is here ${listofVechileName!!.size}\")\n                val arrayadapter=ArrayAdapter&lt;String&gt;(this@RetrofitKotlin,android.R.layout.simple_expandable_list_item_1,listofVechileName)\n                listview!!.adapter=arrayadapter\n\n            }\n            override fun onFailure(call: Call&lt;TaxiTypeResponse&gt;, t: Throwable) {\n\n            }\n        })\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "json", "api", "kotlin", "retrofit2"], "comments": [{"owner": {"reputation": 537, "user_id": 7255999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46a8be2d26e0985bc2a5102e6a404f50?s=128&d=identicon&r=PG", "display_name": "Muhammad Muzammil Sharif", "link": "https://stackoverflow.com/users/7255999/muhammad-muzammil-sharif"}, "edited": false, "score": 0, "creation_date": 1554271607, "post_id": 55487964, "comment_id": 97684370, "body": "try <code>Deferred&lt;Any&gt;</code> instead of <code>Deferred&lt;List&lt;CurrentResponse&gt;&gt;</code> it will accept all models in on response check if(response.body is List){//it mean its your array} else { //it is error response"}, {"owner": {"reputation": 487, "user_id": 10497708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/goG0z.jpg?s=128&g=1", "display_name": "Crash1hd", "link": "https://stackoverflow.com/users/10497708/crash1hd"}, "reply_to_user": {"reputation": 537, "user_id": 7255999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46a8be2d26e0985bc2a5102e6a404f50?s=128&d=identicon&r=PG", "display_name": "Muhammad Muzammil Sharif", "link": "https://stackoverflow.com/users/7255999/muhammad-muzammil-sharif"}, "edited": false, "score": 0, "creation_date": 1554311256, "post_id": 55487964, "comment_id": 97707894, "body": "The issue I run into with returning Any is that when I need to use the List&lt;CurrentResponse&gt; and set it with as List&lt;CurrentResponse&gt; it complains that it cant convert it from LinkedTreeMap?"}, {"owner": {"reputation": 537, "user_id": 7255999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46a8be2d26e0985bc2a5102e6a404f50?s=128&d=identicon&r=PG", "display_name": "Muhammad Muzammil Sharif", "link": "https://stackoverflow.com/users/7255999/muhammad-muzammil-sharif"}, "edited": false, "score": 0, "creation_date": 1554365174, "post_id": 55487964, "comment_id": 97726754, "body": "this error return in onFailure method"}], "answers": [{"comments": [{"owner": {"reputation": 487, "user_id": 10497708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/goG0z.jpg?s=128&g=1", "display_name": "Crash1hd", "link": "https://stackoverflow.com/users/10497708/crash1hd"}, "edited": false, "score": 0, "creation_date": 1554311073, "post_id": 55488818, "comment_id": 97707797, "body": "I don&#39;t fully understand your answer."}, {"owner": {"reputation": 2693, "user_id": 450356, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/SOCF1.png?s=128&g=1", "display_name": "Adib Faramarzi", "link": "https://stackoverflow.com/users/450356/adib-faramarzi"}, "reply_to_user": {"reputation": 487, "user_id": 10497708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/goG0z.jpg?s=128&g=1", "display_name": "Crash1hd", "link": "https://stackoverflow.com/users/10497708/crash1hd"}, "edited": false, "score": 0, "creation_date": 1554312206, "post_id": 55488818, "comment_id": 97708360, "body": "What it does is, it creates a decerializer for a custom class (SampleResponse) -which is yours- and can create that class based on the data that is received via the network. You would declare your API as <code>Deferred&lt;SampleResponse&gt;</code>, and add this serializer to Gson, and it will be created based on what the root json element is - an array or an object- (or any other condition that you may like). You need to create the SampleResponse class to your likings to have multiple fields for when it is initiated with list or an object. Let me know if you need more help."}, {"owner": {"reputation": 487, "user_id": 10497708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/goG0z.jpg?s=128&g=1", "display_name": "Crash1hd", "link": "https://stackoverflow.com/users/10497708/crash1hd"}, "edited": false, "score": 0, "creation_date": 1554312483, "post_id": 55488818, "comment_id": 97708487, "body": "Very helpful however I am running into issues as I am using Kotlin and this looks like Java  I have this so far ``` class CustomDeserializer(): JsonDeserializer&lt;SampleResponse&gt; {          override fun deserialize(json: JsonElement, typeOfT: Type, context: JsonDeserializationContext): SampleResponse {         if (json.isJsonObject) {             // parse as object and create your object         } else if (json.isJsonArray) {             // parse as array and create your object         }     } } ```"}, {"owner": {"reputation": 2693, "user_id": 450356, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/SOCF1.png?s=128&g=1", "display_name": "Adib Faramarzi", "link": "https://stackoverflow.com/users/450356/adib-faramarzi"}, "reply_to_user": {"reputation": 487, "user_id": 10497708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/goG0z.jpg?s=128&g=1", "display_name": "Crash1hd", "link": "https://stackoverflow.com/users/10497708/crash1hd"}, "edited": false, "score": 0, "creation_date": 1554317170, "post_id": 55488818, "comment_id": 97710785, "body": "What issue are you having? Converting the code above to Kotlin should do no harm! :)"}, {"owner": {"reputation": 487, "user_id": 10497708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/goG0z.jpg?s=128&g=1", "display_name": "Crash1hd", "link": "https://stackoverflow.com/users/10497708/crash1hd"}, "edited": false, "score": 0, "creation_date": 1554317248, "post_id": 55488818, "comment_id": 97710825, "body": "Well the issue I am running into is it does not know what SampleResponse is"}, {"owner": {"reputation": 2693, "user_id": 450356, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/SOCF1.png?s=128&g=1", "display_name": "Adib Faramarzi", "link": "https://stackoverflow.com/users/450356/adib-faramarzi"}, "reply_to_user": {"reputation": 487, "user_id": 10497708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/goG0z.jpg?s=128&g=1", "display_name": "Crash1hd", "link": "https://stackoverflow.com/users/10497708/crash1hd"}, "edited": false, "score": 0, "creation_date": 1554317326, "post_id": 55488818, "comment_id": 97710872, "body": "You need to create the SampleResponse class yourself."}, {"owner": {"reputation": 487, "user_id": 10497708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/goG0z.jpg?s=128&g=1", "display_name": "Crash1hd", "link": "https://stackoverflow.com/users/10497708/crash1hd"}, "edited": false, "score": 0, "creation_date": 1554317441, "post_id": 55488818, "comment_id": 97710928, "body": "OK that makes sense but what goes into that class?  also I thought that was the point of  <code>.addConverterFactory(GsonConverterFactory.create())</code> so that I wouldn&#39;t have to do this?"}, {"owner": {"reputation": 2693, "user_id": 450356, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/SOCF1.png?s=128&g=1", "display_name": "Adib Faramarzi", "link": "https://stackoverflow.com/users/450356/adib-faramarzi"}, "reply_to_user": {"reputation": 487, "user_id": 10497708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/goG0z.jpg?s=128&g=1", "display_name": "Crash1hd", "link": "https://stackoverflow.com/users/10497708/crash1hd"}, "edited": false, "score": 0, "creation_date": 1554317499, "post_id": 55488818, "comment_id": 97710956, "body": "I&#39;ve edited my code further using sealed classes. Please note that <code>Sample</code> is just a place holder and it is better to be renamed after what it is used for in your application."}, {"owner": {"reputation": 487, "user_id": 10497708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/goG0z.jpg?s=128&g=1", "display_name": "Crash1hd", "link": "https://stackoverflow.com/users/10497708/crash1hd"}, "reply_to_user": {"reputation": 2693, "user_id": 450356, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/SOCF1.png?s=128&g=1", "display_name": "Adib Faramarzi", "link": "https://stackoverflow.com/users/450356/adib-faramarzi"}, "edited": false, "score": 0, "creation_date": 1554317825, "post_id": 55488818, "comment_id": 97711099, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/191181/discussion-between-crash1hd-and-adib-faramarzi\">continue this discussion in chat</a>."}, {"owner": {"reputation": 2693, "user_id": 450356, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/SOCF1.png?s=128&g=1", "display_name": "Adib Faramarzi", "link": "https://stackoverflow.com/users/450356/adib-faramarzi"}, "reply_to_user": {"reputation": 487, "user_id": 10497708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/goG0z.jpg?s=128&g=1", "display_name": "Crash1hd", "link": "https://stackoverflow.com/users/10497708/crash1hd"}, "edited": false, "score": 0, "creation_date": 1554462905, "post_id": 55488818, "comment_id": 97771345, "body": "Is the problem solved? or my answer need anything to be complete?"}], "tags": [], "owner": {"reputation": 2693, "user_id": 450356, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/SOCF1.png?s=128&g=1", "display_name": "Adib Faramarzi", "link": "https://stackoverflow.com/users/450356/adib-faramarzi"}, "is_accepted": true, "score": 1, "last_activity_date": 1554317269, "last_edit_date": 1554317269, "creation_date": 1554274323, "answer_id": 55488818, "question_id": 55487964, "link": "https://stackoverflow.com/questions/55487964/retrofit-2-handling-dynamic-api-callbacks-of-either-jsonarray-or-jsonobject/55488818#55488818", "title": "Retrofit 2 handling dynamic api callbacks of either JSONArray or JSONObject", "body": "<p>You can use <code>JsonElement</code> as your return type and determine if it is a <code>JsonObject</code> or <code>JsonArray</code> by using the method <code>isJsonArray()</code>, and from there, you can simply deserialize it.</p>\n\n<p>You can also do this in a general way, and create a class that represents both of your list and object responses, and write a type adapter for that type:</p>\n\n<pre><code> sealed class SampleResponse {\n    data class ArraySampleResponse(val currentResponses: List&lt;CurrentResponse&gt;) : SampleResponse()\n    data class SimpleSampleResponse(val currentResponse: CurrentResponse) : SampleResponse()\n}\nclass CustomDeserializer : JsonDeserializer&lt;SampleResponse&gt; {\n\n    @Throws(JsonParseException::class)\n    fun deserialize(json: JsonElement, typeOfT: Type, context: JsonDeserializationContext): SampleResponse {\n        if (json.isJsonObject()) {\n            // parse as object and create your object\n            return SampleResponse.SimpleSampleResponse() \n        } else if (json.isJsonArray()) {\n            // parse as array and create your object\n            return SampleResponse.ArraySampleResponse()\n\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 487, "user_id": 10497708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/goG0z.jpg?s=128&g=1", "display_name": "Crash1hd", "link": "https://stackoverflow.com/users/10497708/crash1hd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 751, "favorite_count": 0, "accepted_answer_id": 55488818, "answer_count": 1, "score": 0, "last_activity_date": 1554317269, "creation_date": 1554270862, "last_edit_date": 1554311861, "question_id": 55487964, "link": "https://stackoverflow.com/questions/55487964/retrofit-2-handling-dynamic-api-callbacks-of-either-jsonarray-or-jsonobject", "title": "Retrofit 2 handling dynamic api callbacks of either JSONArray or JSONObject", "body": "<p>My <code>JSON</code> server response is usually like this <code>[{}]</code> (Array of Objects) except that they set up the errors to return an Object <code>{}</code> So when I call of course if there is an issue with the response and it returns an object I get the following error:</p>\n\n<pre><code>Expected BEGIN_ARRAY but was BEGIN_OBJECT\n</code></pre>\n\n<p>In my code as I am expecting an <code>ArrayList</code> and getting an object (I am not sure how to handle this though?  When I get the object that means there is a problem with the API call and I need to deal with what is responded in the object.</p>\n\n<p>Example Error response from API:</p>\n\n<pre><code>{\n  \"StatusCode\": -7,\n  \"StatusMessage\": \"Invalid\",\n  \"Details\": \"\"\n}\n</code></pre>\n\n<p>APIService Interface below:</p>\n\n<pre><code>interface MyAPIService {\n    @GET(\"RequestByToken\")\n    fun getCurrentRequestAsync(\n        @Query(\"token\") token: String\n    ): Deferred&lt;List&lt;CurrentResponse&gt;&gt;\n\n    companion object {\n        operator fun invoke(\n            connectivityInterceptor: ConnectivityInterceptor\n        ): MyAPIService {\n            val requestInterceptor = Interceptor { chain -&gt;\n\n                //Creates a new URL adding in the CONST'S\n                val url = chain.request()\n                    .url()\n                    .newBuilder()\n                    .addQueryParameter(\"format\", FORMAT)\n                    .build()\n\n                //Creates new Request with the new URL\n                val request = chain.request()\n                    .newBuilder()\n                    .url(url.toString())\n                    .build()\n\n                println(request)\n                return@Interceptor chain.proceed(request)\n            }\n\n            //Intercepts each http call and adds the url above automatically\n            val okHttpClient = OkHttpClient.Builder()\n                .addInterceptor(requestInterceptor)\n                .addInterceptor(connectivityInterceptor)\n                .build()\n\n            return Retrofit.Builder()\n                .client(okHttpClient)\n                .baseUrl(BASE_URL)\n                .addCallAdapterFactory(CoroutineCallAdapterFactory())\n                .addConverterFactory(GsonConverterFactory.create())\n                .build()\n                .create(MyAPIService::class.java)\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["java", "kotlin", "reflection"], "answers": [{"tags": [], "owner": {"reputation": 26541, "user_id": 1532460, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dc5b338bf194a9e117af20bd9b2e4edb?s=128&d=identicon&r=PG", "display_name": "awesoon", "link": "https://stackoverflow.com/users/1532460/awesoon"}, "is_accepted": true, "score": 1, "last_activity_date": 1554285593, "last_edit_date": 1554285593, "creation_date": 1554276939, "answer_id": 55489515, "question_id": 55487479, "link": "https://stackoverflow.com/questions/55487479/issue-while-using-kotlin-reflaction-to-map-object-member-properties-to-hashmap/55489515#55489515", "title": "Issue while using kotlin reflaction to map object member properties to hashmap", "body": "<p><code>ProductInformation::class.memberProperties</code> returns a collection of <code>ProductInformation</code> class member properties.</p>\n\n<p><code>className::class.memberProperties</code> (where <code>className = this.javaClass.kotlin</code>) returns a collection of member properties of class of <code>className</code>, which is <code>KClass&lt;out Test&gt;</code>. In short you are getting members of <code>KClass</code> instead of <code>Test</code>.</p>\n\n<p>Solution: change <code>className::class.memberProperties</code> to <code>className.memberProperties</code>.</p>\n"}], "owner": {"reputation": 671, "user_id": 10939976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efced1218f7aaada6b405b2a5993219f?s=128&d=identicon&r=PG&f=1", "display_name": "Suyash Chavan", "link": "https://stackoverflow.com/users/10939976/suyash-chavan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 447, "favorite_count": 0, "accepted_answer_id": 55489515, "answer_count": 1, "score": 0, "last_activity_date": 1554285593, "creation_date": 1554268250, "last_edit_date": 1554274489, "question_id": 55487479, "link": "https://stackoverflow.com/questions/55487479/issue-while-using-kotlin-reflaction-to-map-object-member-properties-to-hashmap", "title": "Issue while using kotlin reflaction to map object member properties to hashmap", "body": "<pre><code>open class Test {\n\n    fun getAsHashMap() : HashMap&lt;String, Any&gt; {\n        val hashMap = HashMap&lt;String, Any&gt;()\n        val className = this.javaClass.kotlin\n\n        for (prop in className::class.memberProperties) {\n            val field = className::class.java.getDeclaredField(prop.name)\n            val fieldSerializedName : SerializedName? = field.getAnnotation(SerializedName::class.java)\n            fieldSerializedName?.let {\n                hashMap[fieldSerializedName.value] = prop.get(this)!!\n            } ?: run {\n                hashMap[prop.name] = prop.get(this)!!\n            }\n        }\n\n        return hashMap\n    }\n\n\n  }\n</code></pre>\n\n<p>I have wrote above function to map the memberProperties of <code>object instance</code> of its child class to <code>hashmap</code>. It either uses serialized name of the member or prop name [Based on availability of serialized name for that property]\nBut unfortunately I get the following error. \n<a href=\"https://i.stack.imgur.com/fOzlh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fOzlh.png\" alt=\"Error\"></a>\nThis is my first time using reflection java/kotlin, please let me know if it can be fixed. </p>\n\n<p>Edit 1:</p>\n\n<p>It works perfectly if I use name of the this.javaClass.kotlin directly like this </p>\n\n<pre><code>data class ProductInformation (\n        @field:SerializedName(\"productid\")\n        val productId: Int,\n        @field:SerializedName(\"productname\")\n        val productName: String,\n        @field:SerializedName(\"brandname\")\n        val brandName: String,\n        @field:SerializedName(\"originalprice\")\n        val originalPrice: Int,\n        @field:SerializedName(\"sellingprice\")\n        val sellingPrice: Int,\n        @field:SerializedName(\"productgender\")\n        val productGender: String,\n        @field:SerializedName(\"productvariant\")\n        val productVariant: String,\n        @field:SerializedName(\"discounted\")\n        val discounted: String,\n        @field:SerializedName(\"productcategory\")\n        val productCategory: String\n) : StructuredEventAttribute {\n\n    override fun getAsHashMap(): HashMap&lt;String, Any&gt; {\n        val hashMap = HashMap&lt;String, Any&gt;()\n\n        for (prop in ProductInformation::class.memberProperties) {\n            val field = ProductInformation::class.java.getDeclaredField(prop.name)\n            val fieldSerializedName : SerializedName? = field.getAnnotation(SerializedName::class.java)\n            fieldSerializedName?.let {\n                hashMap[fieldSerializedName.value] = prop.get(this)!!\n            } ?: run {\n                hashMap[prop.name] = prop.get(this)!!\n            }\n        }\n\n        return hashMap\n    }\n\n}\n\ninterface StructuredEventAttribute {\n    fun getAsHashMap() : HashMap&lt;String, Any&gt;\n}\n</code></pre>\n\n<p>It works perfectly fine</p>\n"}, {"tags": ["kotlin", "android-custom-view", "android-constraintlayout"], "comments": [{"owner": {"reputation": 699, "user_id": 2806948, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/GI8kp.png?s=128&g=1", "display_name": "Chinthaka Devinda", "link": "https://stackoverflow.com/users/2806948/chinthaka-devinda"}, "edited": false, "score": 0, "creation_date": 1554268397, "post_id": 55487471, "comment_id": 97683389, "body": "anyone got any idea?"}, {"owner": {"reputation": 699, "user_id": 2806948, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/GI8kp.png?s=128&g=1", "display_name": "Chinthaka Devinda", "link": "https://stackoverflow.com/users/2806948/chinthaka-devinda"}, "reply_to_user": {"reputation": 49581, "user_id": 6287910, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xdW09.png?s=128&g=1", "display_name": "Cheticamp", "link": "https://stackoverflow.com/users/6287910/cheticamp"}, "edited": false, "score": 0, "creation_date": 1554344658, "post_id": 55487471, "comment_id": 97719517, "body": "Ok, great! I think you can post this as an answer so I can accept it."}], "answers": [{"comments": [{"owner": {"reputation": 699, "user_id": 2806948, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/GI8kp.png?s=128&g=1", "display_name": "Chinthaka Devinda", "link": "https://stackoverflow.com/users/2806948/chinthaka-devinda"}, "edited": false, "score": 0, "creation_date": 1554380563, "post_id": 55514673, "comment_id": 97736403, "body": "is there some way to detect top inset for all views?"}, {"owner": {"reputation": 49581, "user_id": 6287910, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xdW09.png?s=128&g=1", "display_name": "Cheticamp", "link": "https://stackoverflow.com/users/6287910/cheticamp"}, "reply_to_user": {"reputation": 699, "user_id": 2806948, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/GI8kp.png?s=128&g=1", "display_name": "Chinthaka Devinda", "link": "https://stackoverflow.com/users/2806948/chinthaka-devinda"}, "edited": false, "score": 0, "creation_date": 1554383050, "post_id": 55514673, "comment_id": 97738030, "body": "@ChinthakaDevinda Maybe this? <a href=\"https://stackoverflow.com/a/38942268/6287910\">stackoverflow.com/a/38942268/6287910</a>"}, {"owner": {"reputation": 699, "user_id": 2806948, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/GI8kp.png?s=128&g=1", "display_name": "Chinthaka Devinda", "link": "https://stackoverflow.com/users/2806948/chinthaka-devinda"}, "edited": false, "score": 0, "creation_date": 1554393169, "post_id": 55514673, "comment_id": 97744914, "body": "@CheticampThank you for the response. In my case, I have a base activity and I try with ViewCompat.setOnApplyWindowInsetsListener(window.decorView.r&zwnj;&#8203;ootView) but this cause back button system layout overlaying my view."}, {"owner": {"reputation": 699, "user_id": 2806948, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/GI8kp.png?s=128&g=1", "display_name": "Chinthaka Devinda", "link": "https://stackoverflow.com/users/2806948/chinthaka-devinda"}, "edited": false, "score": 0, "creation_date": 1554446916, "post_id": 55514673, "comment_id": 97762843, "body": "Cool Finally managed to solve it .                                                                 /*From the Base Activity pass this as view but if I use window.decorView.rootView will have issues bottom bar overlays.*/                                                                                                                               val containerView = findViewById&lt;View&gt;(android.R.id.content)  ViewCompat.setOnApplyWindowInsetsListener(containerView) { _, insets -&gt;     statusBarHeight = insets.systemWindowInsetTop     insets     }"}, {"owner": {"reputation": 699, "user_id": 2806948, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/GI8kp.png?s=128&g=1", "display_name": "Chinthaka Devinda", "link": "https://stackoverflow.com/users/2806948/chinthaka-devinda"}, "edited": false, "score": 0, "creation_date": 1554702064, "post_id": 55514673, "comment_id": 97832784, "body": "btw @Cheticamp  is there a way to reset inset consumption? any method available to reset it."}, {"owner": {"reputation": 49581, "user_id": 6287910, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xdW09.png?s=128&g=1", "display_name": "Cheticamp", "link": "https://stackoverflow.com/users/6287910/cheticamp"}, "reply_to_user": {"reputation": 699, "user_id": 2806948, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/GI8kp.png?s=128&g=1", "display_name": "Chinthaka Devinda", "link": "https://stackoverflow.com/users/2806948/chinthaka-devinda"}, "edited": false, "score": 0, "creation_date": 1554722437, "post_id": 55514673, "comment_id": 97843108, "body": "@ChinthakaDevinda Not that I know of."}], "tags": [], "owner": {"reputation": 49581, "user_id": 6287910, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xdW09.png?s=128&g=1", "display_name": "Cheticamp", "link": "https://stackoverflow.com/users/6287910/cheticamp"}, "is_accepted": true, "score": 2, "last_activity_date": 1554376829, "last_edit_date": 1592644375, "creation_date": 1554376829, "answer_id": 55514673, "question_id": 55487471, "link": "https://stackoverflow.com/questions/55487471/onapplywindowinsetswindowinsets-insets-not-getting-called/55514673#55514673", "title": "onApplyWindowInsets(WindowInsets insets) not getting called", "body": "<p>Once the insets are consumed, propagation down the hierarchy stops. It looks like something higher up is consuming what's available. See <a href=\"https://developer.android.com/reference/android/view/WindowInsets.html#isConsumed()\" rel=\"nofollow noreferrer\"><code>isConsumed()</code></a> of <strong>WindowsInset</strong>.</p>\n<blockquote>\n<p>Check if these insets have been fully consumed.</p>\n<p>Insets are considered &quot;consumed&quot; if the applicable consume* methods have been called such that all insets have been set to zero. This affects propagation of insets through the view hierarchy; insets that have not been fully consumed will continue to propagate down to child views.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 171, "user_id": 8286518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VCB6n.jpg?s=128&g=1", "display_name": "J.su", "link": "https://stackoverflow.com/users/8286518/j-su"}, "is_accepted": false, "score": 0, "last_activity_date": 1571042206, "creation_date": 1571042206, "answer_id": 58372927, "question_id": 55487471, "link": "https://stackoverflow.com/questions/55487471/onapplywindowinsetswindowinsets-insets-not-getting-called/58372927#58372927", "title": "onApplyWindowInsets(WindowInsets insets) not getting called", "body": "<p>I think if you wanna reset it's windowInsets callback state, you should change <code>sysUiVisibility</code> params to let <code>fitsSystemWindows</code> work normally. Because <code>fitsSystemWindows</code> is a key to consume the windowInsets. You can learn more from android source code, of course, you need time.</p>\n"}, {"tags": [], "owner": {"reputation": 306, "user_id": 593170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/208ee951818c2ea81da7af42f3dd111f?s=128&d=identicon&r=PG&f=1", "display_name": "humblehacker", "link": "https://stackoverflow.com/users/593170/humblehacker"}, "is_accepted": false, "score": 0, "last_activity_date": 1592165521, "creation_date": 1592165521, "answer_id": 62377672, "question_id": 55487471, "link": "https://stackoverflow.com/questions/55487471/onapplywindowinsetswindowinsets-insets-not-getting-called/62377672#62377672", "title": "onApplyWindowInsets(WindowInsets insets) not getting called", "body": "<p>I found that without the <code>android:windowTranslucentStatus</code> property set to <code>true</code>, <code>onApplyWindowInsets</code> is never called.  I discovered this on reading <a href=\"https://stackoverflow.com/questions/51933656/onapplywindowinsets-for-keyboard-not-called-if-windowtranslucentstatus-is-false\">this unanswered question</a>.</p>\n\n<p>In <code>styles.xml</code>:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;style name=\"ExampleTheme\" parent=\"Theme.AppCompat.NoActionBar\"&gt;\n  &lt;item name=\"android:windowTranslucentStatus\"&gt;true&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n\n<p>I would love to understand why this is so, and if there is a way to have it called without requiring this attribute change.</p>\n"}], "owner": {"reputation": 699, "user_id": 2806948, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/GI8kp.png?s=128&g=1", "display_name": "Chinthaka Devinda", "link": "https://stackoverflow.com/users/2806948/chinthaka-devinda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5141, "favorite_count": 0, "accepted_answer_id": 55514673, "answer_count": 3, "score": 2, "last_activity_date": 1592165521, "creation_date": 1554268214, "question_id": 55487471, "link": "https://stackoverflow.com/questions/55487471/onapplywindowinsetswindowinsets-insets-not-getting-called", "title": "onApplyWindowInsets(WindowInsets insets) not getting called", "body": "<p>I am currently using a custom view that extends a Constraint layout but I it does not trigger this overridden method in the view onApplyWindowInsets(WindowInsets insets) not sure what went missing.</p>\n\n<pre><code>  class TestCustomView @JvmOverloads constructor(\n  context: Context,\n  attrs: AttributeSet? = null,\n  defStyleAttr: Int = 0\n) : ConstraintLayout(context, attrs, defStyleAttr) {\n\n\n    init {\n\n\n    }\n    //This method one not get called\n    override fun onApplyWindowInsets(insets: WindowInsets): WindowInsets {\n    return super.onApplyWindowInsets(insets)\n        val statusBarHeight = insets.systemWindowInsetTop\n    }\n\n\n    override fun fitSystemWindows(insets: Rect): Boolean {\n    if (Build.VERSION.SDK_INT == Build.VERSION_CODES.KITKAT) {\n      // Intentionally do not modify the bottom inset. For some reason,\n      // if the bottom inset is modified, window resizing stops working.\n      insets.left = 0\n      insets.top = 0\n      insets.right = 0\n    }\n    return super.fitSystemWindows(insets)\n  }\n\n\n}\n</code></pre>\n"}, {"tags": ["java", "kotlin"], "comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 3, "creation_date": 1554255227, "post_id": 55485760, "comment_id": 97680647, "body": "Why not? Kotlin&#39;s interoperability with Java should allow this."}, {"owner": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "edited": false, "score": 1, "creation_date": 1554255269, "post_id": 55485760, "comment_id": 97680654, "body": "Have you tried it? What issue did you run into?"}, {"owner": {"reputation": 431, "user_id": 10078148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2399f9b8e40752690d3529004f458d6?s=128&d=identicon&r=PG&f=1", "display_name": "royer", "link": "https://stackoverflow.com/users/10078148/royer"}, "edited": false, "score": 0, "creation_date": 1554255369, "post_id": 55485760, "comment_id": 97680670, "body": "Well, I do not understand very well the change of languages, could you try to make an example about this?"}], "answers": [{"tags": [], "owner": {"reputation": 15297, "user_id": 7631480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zcBMm.png?s=128&g=1", "display_name": "CryptoFool", "link": "https://stackoverflow.com/users/7631480/cryptofool"}, "is_accepted": true, "score": 3, "last_activity_date": 1554257319, "last_edit_date": 1554257319, "creation_date": 1554255673, "answer_id": 55485828, "question_id": 55485760, "link": "https://stackoverflow.com/questions/55485760/can-i-use-java-library-of-commons-math-in-kotlin-language/55485828#55485828", "title": "Can I use java library of commons math in kotlin language?", "body": "<p>A class is a class, regardless of if it's defined in Java or Kotlin. For the most part, this means you just do the Kotlin thing in Kotlin and the Java thing in Java, regardless of where the class you're using is defined. There are exceptions, like for static methods, but most stuff \"just works\". </p>\n\n<p>I expect, knowing nothing about the NormalDistribution class, that this will work:</p>\n\n<pre><code>val normalDistribution = NormalDistribution(10.0, 3.0);\nval randomValue = normalDistribution.sample();\n</code></pre>\n\n<p>Ok, so I was wrong initially.  I had to change my literals above from <strong>(10, 3)</strong> to <strong>(10.0, 3.0)</strong>.  Here's a difference between Java and Kotlin.  Kotlin doesn't do automatic numeric type promotion.  So while I could use Integer literals for the equivalent Java code, in Kotlin, I had to use Double literals.  But my IDE showed me this right away, including a tooltip message that told me just what was wrong.  And this is a Kotlin thing, not a Java thing.  The same thing would happen if I tried to call a method defined in Kotlin taking doubles as parameters, and I tried to pass it integers. This had nothing to do with which language <strong>NormalDistribution</strong> is defined in.  After that exercise, I can say for sure that this Kotlin code works fine.</p>\n\n<p>Maybe the issue is more that you just don't know Kotlin very well yet.  Part of learning Kotlin is realizing how much of a non-issue it is to use Java classes in Kotlin code.</p>\n"}], "owner": {"reputation": 431, "user_id": 10078148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2399f9b8e40752690d3529004f458d6?s=128&d=identicon&r=PG&f=1", "display_name": "royer", "link": "https://stackoverflow.com/users/10078148/royer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 842, "favorite_count": 0, "accepted_answer_id": 55485828, "answer_count": 1, "score": 1, "last_activity_date": 1554257319, "creation_date": 1554255103, "question_id": 55485760, "link": "https://stackoverflow.com/questions/55485760/can-i-use-java-library-of-commons-math-in-kotlin-language", "title": "Can I use java library of commons math in kotlin language?", "body": "<p>I had seen forums and questions that can be used kotlin in java but, with respect to my question is that I want to use the apache math commons library (\"which is only available in java\") <strong>within kotlin</strong>. My project is in intellij idea and I have imported the library correctly, I show you how it is written in java</p>\n\n<pre><code>import org.apache.commons.math3.distribution \n\nNormalDistribution normalDistribution = new NormalDistribution(10, 3);\ndouble randomValue = normalDistribution.sample();\n\n```\n</code></pre>\n"}, {"tags": ["spring-boot", "jpa", "kotlin", "repository"], "comments": [{"owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "edited": false, "score": 0, "creation_date": 1554276074, "post_id": 55485617, "comment_id": 97686277, "body": "Read the error message: your <code>Shurl</code> class needs to implement <code>Serializable</code>."}, {"owner": {"reputation": 430, "user_id": 2905762, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1e46ac84273390e0c3fe7f913ff2e0b3?s=128&d=identicon&r=PG&f=1", "display_name": "Hans", "link": "https://stackoverflow.com/users/2905762/hans"}, "reply_to_user": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "edited": false, "score": 1, "creation_date": 1554346054, "post_id": 55485617, "comment_id": 97719805, "body": "i think i have found the solution without serializable, i remove id properties in class shurl and i set shurl_code as primary key.. thank for respon"}], "answers": [{"tags": [], "owner": {"reputation": 430, "user_id": 2905762, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1e46ac84273390e0c3fe7f913ff2e0b3?s=128&d=identicon&r=PG&f=1", "display_name": "Hans", "link": "https://stackoverflow.com/users/2905762/hans"}, "is_accepted": true, "score": -3, "last_activity_date": 1554346116, "creation_date": 1554346116, "answer_id": 55507110, "question_id": 55485617, "link": "https://stackoverflow.com/questions/55485617/jpa-repository-got-error-cannot-not-serializable-when-get-data-from-database/55507110#55507110", "title": "Jpa Repository got error cannot not serializable when get data from database", "body": "<p>i think i have found the solution without serializable, i remove id properties in class shurl and i set shurl_code as primary key.. </p>\n"}, {"tags": [], "owner": {"reputation": 8099, "user_id": 1553886, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/7524117ff6d89a388462e7e5962725a1?s=128&d=identicon&r=PG", "display_name": "CDT", "link": "https://stackoverflow.com/users/1553886/cdt"}, "is_accepted": false, "score": 21, "last_activity_date": 1607780325, "last_edit_date": 1607780325, "creation_date": 1556440893, "answer_id": 55888513, "question_id": 55485617, "link": "https://stackoverflow.com/questions/55485617/jpa-repository-got-error-cannot-not-serializable-when-get-data-from-database/55888513#55888513", "title": "Jpa Repository got error cannot not serializable when get data from database", "body": "<p><strong>If you reference another object using non-primary key column, make the referenced object serializable.</strong></p>\n<p>It's a <a href=\"https://hibernate.atlassian.net/browse/HHH-7668\" rel=\"noreferrer\">known bug</a> reported in 2012 and still unsolved.</p>\n<p>Make <code>Shurl</code> serialzable and it should work:</p>\n<pre><code>@Entity\npublic class Shurl implements Serializable {\n\n    private static final long serialVersionUID = 1L;\n}\n</code></pre>\n"}], "owner": {"reputation": 430, "user_id": 2905762, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1e46ac84273390e0c3fe7f913ff2e0b3?s=128&d=identicon&r=PG&f=1", "display_name": "Hans", "link": "https://stackoverflow.com/users/2905762/hans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4842, "favorite_count": 3, "accepted_answer_id": 55507110, "answer_count": 2, "score": 6, "last_activity_date": 1607780325, "creation_date": 1554253954, "question_id": 55485617, "link": "https://stackoverflow.com/questions/55485617/jpa-repository-got-error-cannot-not-serializable-when-get-data-from-database", "title": "Jpa Repository got error cannot not serializable when get data from database", "body": "<p>I have a problem when try to get data using JPA Repository,</p>\n\n<p>every time i try to get data always get error java.lang.ClassCastException: shurl.model.Shurl cannot be cast to java.io.Serializable,</p>\n\n<p>i have tried to explorer the solution, but until now still not found any clue to solve this problem</p>\n\n<p>here my error :\n<a href=\"https://i.stack.imgur.com/bNiYS.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/bNiYS.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>2019-04-03 07:36:17.434 ERROR 19348 --- [nio-5001-exec-4] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.ClassCastException: shurl.model.Shurl cannot be cast to java.io.Serializable] with root cause\n\njava.lang.ClassCastException: shurl.model.Shurl cannot be cast to java.io.Serializable\n</code></pre>\n\n<p>and here my code at jpa repository</p>\n\n<pre><code>package shurl.repository\n\nimport shurl.model.Shurl\nimport org.springframework.data.jpa.repository.JpaRepository\nimport org.springframework.data.jpa.repository.Query\nimport org.springframework.stereotype.Repository\nimport org.springframework.data.domain.Pageable\nimport org.springframework.data.domain.Page\nimport java.time.LocalDate\nimport java.time.LocalDateTime\nimport shurl.model.ShurlHistory\n\n@Repository\ninterface ShurlHistoryRepository : JpaRepository&lt;ShurlHistory, String&gt; {\n    @Query(\"select b.* from shurl a \" +\n            \"left join shurl_history b on b.shurl_code = a.shurl_code \" +\n            \"where a.shurl_code = :code\",nativeQuery = true )\n\n    fun findShurlHistory(code:String):List&lt;ShurlHistory&gt;?\n}\n</code></pre>\n\n<p>and here my model</p>\n\n<pre><code>package shurl.model\n\nimport com.fasterxml.jackson.annotation.JsonIgnore\nimport javax.persistence.*\nimport org.apache.poi.hpsf.Decimal\nimport java.time.LocalDate\nimport java.sql.Blob\nimport org.hibernate.type.BlobType\nimport java.time.LocalDateTime\n\n@Entity\n@Table(name = \"shurl_history\", schema = \"dbo\")\ndata class ShurlHistory (\n    @Id @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = \"id\", nullable = true)\n    var id:Long?=null,\n\n    @Column(name = \"create_date\", nullable = false )\n    var createDate:LocalDateTime = LocalDateTime.now(),\n\n\n    @ManyToOne\n    @JoinColumn(name = \"shurl_code\", referencedColumnName = \"shurl_code\", nullable = true)\n    var shurl : Shurl? = null\n)\n</code></pre>\n\n<p>can someone help me?</p>\n"}, {"tags": ["kotlin", "number-formatting"], "comments": [{"owner": {"reputation": 42640, "user_id": 1553851, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/ad333c218c8f2fb917cf506919fc95f4?s=128&d=identicon&r=PG", "display_name": "shmosel", "link": "https://stackoverflow.com/users/1553851/shmosel"}, "edited": false, "score": 1, "creation_date": 1554249400, "post_id": 55485102, "comment_id": 97679630, "body": "<code>parse()</code> returns <code>Number</code> at compile time. There&#39;s no matching constructor overload."}, {"owner": {"reputation": 34200, "user_id": 995862, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d5efb6c1054808f7a79aaefbc64cce76?s=128&d=identicon&r=PG", "display_name": "Kurt Peek", "link": "https://stackoverflow.com/users/995862/kurt-peek"}, "reply_to_user": {"reputation": 42640, "user_id": 1553851, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/ad333c218c8f2fb917cf506919fc95f4?s=128&d=identicon&r=PG", "display_name": "shmosel", "link": "https://stackoverflow.com/users/1553851/shmosel"}, "edited": false, "score": 0, "creation_date": 1554249936, "post_id": 55485102, "comment_id": 97679743, "body": "Is there any other way to get a <code>BigDecimal</code> out of the result of <code>formatter.parse()</code>?"}, {"owner": {"reputation": 42640, "user_id": 1553851, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/ad333c218c8f2fb917cf506919fc95f4?s=128&d=identicon&r=PG", "display_name": "shmosel", "link": "https://stackoverflow.com/users/1553851/shmosel"}, "edited": false, "score": 1, "creation_date": 1554250134, "post_id": 55485102, "comment_id": 97679782, "body": "You can call <code>Number.longValue()</code> if you&#39;re sure it&#39;ll always be a long. Or you can use <code>DecimalFormat.setParseBigDecimal()</code>."}], "answers": [{"tags": [], "owner": {"reputation": 10859, "user_id": 3710865, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oROuW.jpg?s=128&g=1", "display_name": "sasikumar", "link": "https://stackoverflow.com/users/3710865/sasikumar"}, "is_accepted": true, "score": 2, "last_activity_date": 1554271183, "creation_date": 1554271183, "answer_id": 55488040, "question_id": 55485102, "link": "https://stackoverflow.com/questions/55485102/converting-the-result-of-numberformat-parse-into-a-bigdecimal/55488040#55488040", "title": "Converting the result of NumberFormat.parse() into a BigDecimal", "body": "<p>In kotlin</p>\n\n<pre><code> formatter.parse(\"1,000\") //this result in not Long.Its is Number\n</code></pre>\n\n<p>so you have to convert as Long</p>\n\n<pre><code>fun main()\n{\nval formatter = NumberFormat.getInstance()\nval result:Number=formatter.parse(\"1,000\")\nval decimal=BigDecimal(result.toLong())\nprintln(decimal) //out put is 1000\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2693, "user_id": 450356, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/SOCF1.png?s=128&g=1", "display_name": "Adib Faramarzi", "link": "https://stackoverflow.com/users/450356/adib-faramarzi"}, "is_accepted": false, "score": 1, "last_activity_date": 1554275245, "creation_date": 1554275245, "answer_id": 55489042, "question_id": 55485102, "link": "https://stackoverflow.com/questions/55485102/converting-the-result-of-numberformat-parse-into-a-bigdecimal/55489042#55489042", "title": "Converting the result of NumberFormat.parse() into a BigDecimal", "body": "<p>You need to convert your value to Long before passing it to the <code>BigDecimal</code> constructor, since it is a <code>Number</code>. You can either use <code>.toLong()</code> or create an extension function for <code>Number</code> which returns BigDecimal:</p>\n\n<p><code>fun Number.bigDecimialValue(): BigDecimal = BigDecimal(this.toLong())</code></p>\n"}], "owner": {"reputation": 34200, "user_id": 995862, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d5efb6c1054808f7a79aaefbc64cce76?s=128&d=identicon&r=PG", "display_name": "Kurt Peek", "link": "https://stackoverflow.com/users/995862/kurt-peek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 55488040, "answer_count": 2, "score": 1, "last_activity_date": 1554275245, "creation_date": 1554249218, "last_edit_date": 1554249351, "question_id": 55485102, "link": "https://stackoverflow.com/questions/55485102/converting-the-result-of-numberformat-parse-into-a-bigdecimal", "title": "Converting the result of NumberFormat.parse() into a BigDecimal", "body": "<p>I've defined a <code>formatter</code> like so:</p>\n\n<pre><code>&gt;&gt;&gt; import java.text.NumberFormat\n&gt;&gt;&gt; val formatter = NumberFormat.getInstance()\n</code></pre>\n\n<p>It would appear that the result of <code>formatter.parse(\"1,000\")</code> is a <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html\" rel=\"nofollow noreferrer\"><code>Long</code></a>:</p>\n\n<pre><code>&gt;&gt;&gt; formatter.parse(\"1,000\")::class\nclass kotlin.Long\n</code></pre>\n\n<p>However, if I try to pass it to the constructor of <code>BigDecimal</code>, I get an error message saying that it doesn't match any of the constructors:</p>\n\n<pre><code>&gt;&gt;&gt; BigDecimal(formatter.parse(\"1,000\"))\nerror: none of the following functions can be called with the arguments supplied: \npublic constructor BigDecimal(p0: BigInteger!) defined in java.math.BigDecimal\npublic constructor BigDecimal(p0: CharArray!) defined in java.math.BigDecimal\npublic constructor BigDecimal(p0: Double) defined in java.math.BigDecimal\npublic constructor BigDecimal(p0: Int) defined in java.math.BigDecimal\npublic constructor BigDecimal(p0: Long) defined in java.math.BigDecimal\npublic constructor BigDecimal(p0: String!) defined in java.math.BigDecimal\nBigDecimal(formatter.parse(\"1,000\"))\n^\n</code></pre>\n\n<p>This is despite that</p>\n\n<pre><code>&gt;&gt;&gt; formatter.parse(\"1,000\") == 1000L\ntrue\n</code></pre>\n\n<p>Any idea what I'm doing wrong here?</p>\n"}, {"tags": ["java", "kotlin", "nfc", "android-9.0-pie", "android-10.0"], "answers": [{"comments": [{"owner": {"reputation": 1448, "user_id": 237229, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8f93ce0e9bd2b75adb8ae975002c9516?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/237229/michael"}, "reply_to_user": {"reputation": 22959, "user_id": 6998684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqR2Z.jpg?s=128&g=1", "display_name": "IgorGanapolsky", "link": "https://stackoverflow.com/users/6998684/igorganapolsky"}, "edited": false, "score": 0, "creation_date": 1598028669, "post_id": 55494312, "comment_id": 112334637, "body": "The original poster is my yournger brother.  So, I was providing a high level answer as well as specifics.  But it answers the question completely.  You mock by using Mockito, whether its NFC or not is irrelevant.  Also a bit of coaching / mentoring, and chatting / discussing an issue via SO."}], "tags": [], "owner": {"reputation": 1448, "user_id": 237229, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8f93ce0e9bd2b75adb8ae975002c9516?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/237229/michael"}, "is_accepted": false, "score": 1, "last_activity_date": 1598029051, "last_edit_date": 1598029051, "creation_date": 1554291666, "answer_id": 55494312, "question_id": 55484913, "link": "https://stackoverflow.com/questions/55484913/how-do-i-mock-an-nfc-tag-for-an-in-app-developer-tool/55494312#55494312", "title": "How do I mock an NFC Tag for an in-app developer tool?", "body": "<p>You don't want to copy the code from the original, that's not how mocking works.  If this specific method has been marked with @Hide it likely means that its being deprecated.  That likely means there is an alternative to this method in API 28+.</p>\n<p>The @Hide is likely a result of them not being able to fully deprecate it just yet, but will likely in the future.  Here is the current reference - <a href=\"https://developer.android.com/reference/android/nfc/package-summary\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/nfc/package-summary</a>.</p>\n<p>In general though, say your using Mockito - <a href=\"https://static.javadoc.io/org.mockito/mockito-core/2.25.1/org/mockito/Mockito.html#2\" rel=\"nofollow noreferrer\">https://static.javadoc.io/org.mockito/mockito-core/2.25.1/org/mockito/Mockito.html#2</a> - just stub the mock.<br />\nFor stubbbing static methods, looks like there are a couple of threads out there - for the actual feature request: <a href=\"https://github.com/mockito/mockito/issues/1013\" rel=\"nofollow noreferrer\">https://github.com/mockito/mockito/issues/1013</a></p>\n<p>And workaround: <a href=\"https://stackoverflow.com/questions/21105403/mocking-static-methods-with-mockito\">Mocking static methods with Mockito</a> not sure how relevant the workaround is anymore (its somewhat old).</p>\n"}], "owner": {"reputation": 39, "user_id": 7776826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcbb19a71d8f59e629d6fa08514f5b14?s=128&d=identicon&r=PG&f=1", "display_name": "davrukin", "link": "https://stackoverflow.com/users/7776826/davrukin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1598029051, "creation_date": 1554247892, "question_id": 55484913, "link": "https://stackoverflow.com/questions/55484913/how-do-i-mock-an-nfc-tag-for-an-in-app-developer-tool", "title": "How do I mock an NFC Tag for an in-app developer tool?", "body": "<p>I am trying to mock an NFC Tag with an in-app developer mocking tool. The current implementation uses reflection and is targeting API 27. Migrating to API 28 with AndroidX, the method <code>createMockTag</code> is not found. I notice that it's <code>public static</code> in the Android code, but is annotated with <code>@Hide</code>, meaning that I can't access it. I have found a way, however, to create a Tag from a Parcel, but I have not found anywhere a simple way to do it. I can create my own Parcelable class, but when calling <code>in.readInArray(...)</code> in the constructor, it asks for a parameter that I don't have. I will attach what it looks like know and what I'd like it to look like. </p>\n\n<p>This is a big issue because we need to mock NFC Tags, but there doesn't seem to be a way to access the method. And I've also tried to copy the <code>Tag.java</code> class into my project, but it can't access certain seemingly-internal classes such as <code>INfcTag</code> and the enums in <code>TagTechnology</code>. Has anyone else come across this and can please help me? Thank you.</p>\n\n<pre><code>// Tag mockTag = Tag.CREATOR.createFromParcel(); // I'd like to create one here\nMethod createMockTag = Tag.class.getMethod(\"createMockTag\", byte[].class, int[].class, Bundle[].class);     \nscanIntent.putExtra(NfcAdapter.EXTRA_TAG, (Tag) createMockTag.invoke(Tag.class, tagId, new int[]{}, new Bundle[]{}));\n</code></pre>\n\n<p>Here are links I've looked at:</p>\n\n<ul>\n<li><a href=\"https://www.vogella.com/tutorials/AndroidParcelable/article.html\" rel=\"nofollow noreferrer\">https://www.vogella.com/tutorials/AndroidParcelable/article.html</a></li>\n<li><a href=\"https://guides.codepath.com/android/using-parcelable\" rel=\"nofollow noreferrer\">https://guides.codepath.com/android/using-parcelable</a></li>\n<li><a href=\"https://stackoverflow.com/questions/9428276/how-do-i-create-an-tag-object-in-android\">How do i create an Tag object in android?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/18322424/identifying-nfc-tag-id\">Identifying NFC tag ID</a></li>\n<li><a href=\"https://www.google.com/search?client=safari&amp;rls=en&amp;q=android+9+nfc+not+working&amp;ie=UTF-8&amp;oe=UTF-8\" rel=\"nofollow noreferrer\">https://www.google.com/search?client=safari&amp;rls=en&amp;q=android+9+nfc+not+working&amp;ie=UTF-8&amp;oe=UTF-8</a></li>\n<li><a href=\"https://www.google.com/search?client=safari&amp;rls=en&amp;biw=1080&amp;bih=923&amp;ei=68ijXMnoDoHisAXPjLzQCA&amp;q=public+static+Tag+createMockTag%28byte%5B%5D+is%2C+int%5B%5D+techList%2C+Bundle%5B%5D+techList+Extras%29+%7B&amp;oq=public+static+Tag+createMockTag%28byte%5B%5D+is%2C+int%5B%5D+techList%2C+Bundle%5B%5D+techList+Extras%29+%7B&amp;gs_l=psy-ab.3...107084.107084..107212...0.0..0.0.0.......0....1..gws-wiz.rfrM415Sx7o\" rel=\"nofollow noreferrer\">https://www.google.com/search?client=safari&amp;rls=en&amp;biw=1080&amp;bih=923&amp;ei=68ijXMnoDoHisAXPjLzQCA&amp;q=public+static+Tag+createMockTag%28byte%5B%5D+is%2C+int%5B%5D+techList%2C+Bundle%5B%5D+techList+Extras%29+%7B&amp;oq=public+static+Tag+createMockTag%28byte%5B%5D+is%2C+int%5B%5D+techList%2C+Bundle%5B%5D+techList+Extras%29+%7B&amp;gs_l=psy-ab.3...107084.107084..107212...0.0..0.0.0.......0....1..gws-wiz.rfrM415Sx7o</a></li>\n<li><a href=\"https://developer.android.com/about/versions/pie/android-9.0\" rel=\"nofollow noreferrer\">https://developer.android.com/about/versions/pie/android-9.0</a></li>\n<li><a href=\"https://developer.android.com/reference/android/nfc/package-summary.html\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/nfc/package-summary.html</a></li>\n<li><a href=\"https://developer.android.com/sdk/api_diff/28/changes.html\" rel=\"nofollow noreferrer\">https://developer.android.com/sdk/api_diff/28/changes.html</a></li>\n<li><a href=\"https://developer.android.com/reference/android/os/Parcelable.Creator\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/os/Parcelable.Creator</a></li>\n<li>And probably several more whose tabs I've closed or navigated away from.</li>\n</ul>\n"}, {"tags": ["android", "mvvm", "kotlin", "android-databinding"], "answers": [{"comments": [{"owner": {"reputation": 611, "user_id": 4805124, "user_type": "registered", "profile_image": "https://graph.facebook.com/10200132971163634/picture?type=large", "display_name": "Cyd", "link": "https://stackoverflow.com/users/4805124/cyd"}, "edited": false, "score": 0, "creation_date": 1581493495, "post_id": 55489869, "comment_id": 106448120, "body": "I&#39;ve tried this solution and it seems this will not work if the onclick() is inside the viewmodel."}, {"owner": {"reputation": 1815, "user_id": 1708390, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/symR5.jpg?s=128&g=1", "display_name": "Bugs Happen", "link": "https://stackoverflow.com/users/1708390/bugs-happen"}, "edited": false, "score": 0, "creation_date": 1611550407, "post_id": 55489869, "comment_id": 116478444, "body": "I was adding an equal sign (=) after &#39;@&#39;. I was doing it like this <code>android:visibility=&quot;@={viewModel.progress}&quot;</code> which was giving me this error. Removing that equal sign fixed the problem. Now it looks like this <code>android:visibility=&quot;@{viewModel.progress}&quot;</code>"}], "tags": [], "owner": {"reputation": 1262, "user_id": 2607738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/571796baa99b24c4be39d8c685aec55a?s=128&d=identicon&r=PG", "display_name": "rafa", "link": "https://stackoverflow.com/users/2607738/rafa"}, "is_accepted": true, "score": 7, "last_activity_date": 1554281917, "last_edit_date": 1554281917, "creation_date": 1554278103, "answer_id": 55489869, "question_id": 55484612, "link": "https://stackoverflow.com/questions/55484612/show-hide-progessbar-from-viewmodel-using-databinding-mvvm/55489869#55489869", "title": "Show/Hide ProgessBar from ViewModel using Databinding - MVVM", "body": "<p>First Answering your exact question, adding progress bar to the web service loading.</p>\n\n<p>Create a MutableLiveData object in your LoginViewModel</p>\n\n<pre><code>public MutableLiveData&lt;Integer&gt; progress = new MutableLiveData&lt;&gt;();\n</code></pre>\n\n<p>inside your loginOnCLicked Method</p>\n\n<pre><code>fun loginOnCLicked(v:View){\n\n    progress.setValue(0); //View.VISIBLE\n\n   .\n\n   .\n\n   .\n\n   progress.setValue(8); //View.GONE\n\n}\n</code></pre>\n\n<p>Add progress bar to your layout with data binding</p>\n\n<pre><code>&lt;ProgressBar\n                android:id=\"@+id/progressBar\"\n                style=\"?android:attr/progressBarStyleLarge\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_gravity=\"center_horizontal\"\n                android:layout_marginTop=\"8dp\"\n                android:visibility=\"@{viewModel.progress}\" /&gt;\n</code></pre>\n\n<p>Hope this helps.</p>\n\n<p>On the side note, I would request you to change your listener implementation for webservice success/Error case into LiveData. That's the MVVM way of doing things without holding reference of Activity in the ViewModel.</p>\n"}], "owner": {"reputation": 103, "user_id": 11119257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7690095e831c2983fe900d554e584f29?s=128&d=identicon&r=PG&f=1", "display_name": "Rahma El Ouni", "link": "https://stackoverflow.com/users/11119257/rahma-el-ouni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5017, "favorite_count": 1, "accepted_answer_id": 55489869, "answer_count": 1, "score": 5, "last_activity_date": 1571386171, "creation_date": 1554245596, "last_edit_date": 1571386171, "question_id": 55484612, "link": "https://stackoverflow.com/questions/55484612/show-hide-progessbar-from-viewmodel-using-databinding-mvvm", "title": "Show/Hide ProgessBar from ViewModel using Databinding - MVVM", "body": "<p>While getting a response from web service, I would like to Show/Hide a progressBar using ViewModel and dataBinding. Currently, I am having a function loginOnClicked in the ViewModel bound from my layout XML directly.</p>\n\n<p>I want to create a progress bar and implemented it in function loginOnClicked and update the visibility based on that. Can somebody help me with that? </p>\n\n<p><strong>loginActivity</strong></p>\n\n<pre><code>class loginActivity : AppCompatActivity(),SignupResultCallBack {\n\n            override fun onSucces(message: String) {\n                Toast.makeText(this,message, Toast.LENGTH_SHORT)\n                        .show()\n            }\n\n            override fun onError(message: String) {\n                Toast.makeText(this,message, Toast.LENGTH_SHORT)\n                        .show()\n            }\n\n\n            override fun onCreate(savedInstanceState: Bundle?) {\n                super.onCreate(savedInstanceState)\n               // setContentView(R.layout.activity_login)\n\n\n\n     val activityLoginBinding=DataBindingUtil.setContentView&lt;ActivityLoginBinding(this,R.layout.activity_login)\n       activityLoginBinding.viewModel=of(this,LoginViewModelFactory(this)).get(LoginViewModel::class.java)\n\n\n\n   link_signup.setOnClickListener() {\n        var intent=Intent(this@loginActivity,signupActivity::class.java)\n                    startActivity(intent)\n                    finish()\n                }\n\n                var test=activityLoginBinding.viewModel!!.progBar()\n                if(test)\n                    progressBar?.visibility=View.VISIBLE\n\n                else\n                    progressBar?.visibility=View.GONE\n\n            }\n        }\n</code></pre>\n\n<p><strong>ViewModel</strong></p>\n\n<pre><code>    class LoginViewModel(private var listener: SignupResultCallBack): ViewModel() {\n        private val loginUser:UserRequest\n\n\n\n        init {\n            this.loginUser= UserRequest(\"\",\"\")\n        }\n\n         fun loginOnCLicked(v:View){\n             var editLogin: Int = loginUser.isDataValid()\n                         if (editLogin == 0)\n                         listener.onError(\"entrer votre email\")\n                        else\n                         if (editLogin == 1)\n                         listener.onError(\"email invalide\")\n                        else\n                         if (editLogin == 2)\n                         listener.onError(\"mot de passe invalide\")\n                        else\n                         if (editLogin == 3)\n                             listener.onError(\"entrer votre mot de passe\")\n                         else\n                             if (editLogin == 4)\n                                 listener.onError(\"champs vides\")\n                             else\n\n\n                             {\n                                 RetrofitClient.instance.loginUser(UserRequest(loginUser.getEmail(), loginUser.getPassword())).enqueue(object : Callback&lt;DefaultResponse&gt; {\n                                     override fun onFailure(call: Call&lt;DefaultResponse&gt;, t: Throwable) {\n                                         listener.onError(\"t.message\")\n\n                                     }\n\n                                     override fun onResponse(call: Call&lt;DefaultResponse&gt;, response: Response&lt;DefaultResponse&gt;) {\n\n                                         if (response.code() == 400)\n                                             listener.onSucces(\"login or password invalid\")\n                                         else if (response.code() == 200)\n                                             listener.onSucces(\"success login\")\n\n\n                                     }\n\n                                 })\n\n               }\n\n         }\n\n\n\n}\n</code></pre>\n\n<p><strong>login.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n    &lt;layout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n        xmlns:tools=\"http://schemas.android.com/tools\"&gt;\n        &lt;data&gt;\n            &lt;variable\n                name=\"viewModel\"\n                type=\"com.example.rahma.alerteaccidentapp.vm.login.LoginViewModel\"/&gt;\n\n        &lt;/data&gt;\n\n\n\n        &lt;RelativeLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            android:background=\"@color/colorBackground\"\n             tools:context=\".ui.login.loginActivity\"&gt;\n\n\n            &lt;Button\n                android:id=\"@+id/btn_connexion\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"\n                android:layout_marginTop=\"30dp\"\n                android:background=\"@drawable/btn_round\"\n                android:text=\"Connexion\"\n                android:onClick=\"@{viewModel::loginOnCLicked}\"\n\n                android:layout_marginLeft=\"20dp\"\n                android:layout_marginRight=\"20dp\"\n                android:layout_below=\"@id/password_Edit\"\n                android:textAppearance=\"@style/MySerifBoldbtn\"\n                android:textColor=\"@android:color/background_light\"\n                /&gt;\n\n\n\n        &lt;/RelativeLayout&gt;\n\n\n    &lt;/layout&gt;  \n</code></pre>\n"}, {"tags": ["java", "android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 4724451, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-s7rQ4ENQ8J4/AAAAAAAAAAI/AAAAAAAAAJE/tdB1m-xtiG0/photo.jpg?sz=128", "display_name": "Erick Daniel Juarez Gil", "link": "https://stackoverflow.com/users/4724451/erick-daniel-juarez-gil"}, "edited": false, "score": 0, "creation_date": 1554243839, "post_id": 55484355, "comment_id": 97678387, "body": "It work&#39;s! i&#39;m feel like a dummy, I forgot it and I use it instead of this (facepalm)"}], "tags": [], "owner": {"reputation": 367, "user_id": 2399352, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XsHTw.png?s=128&g=1", "display_name": "Virco", "link": "https://stackoverflow.com/users/2399352/virco"}, "is_accepted": true, "score": 1, "last_activity_date": 1554243712, "creation_date": 1554243712, "answer_id": 55484355, "question_id": 55484296, "link": "https://stackoverflow.com/questions/55484296/error-converting-java-code-into-kotlin-code/55484355#55484355", "title": "Error converting Java code into Kotlin code", "body": "<p>try passing <code>this</code> instead of the <code>mBroadcastReceiver</code> into the function: </p>\n\n<p><code>unregisterReceiver(this)</code></p>\n"}], "owner": {"reputation": 47, "user_id": 4724451, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-s7rQ4ENQ8J4/AAAAAAAAAAI/AAAAAAAAAJE/tdB1m-xtiG0/photo.jpg?sz=128", "display_name": "Erick Daniel Juarez Gil", "link": "https://stackoverflow.com/users/4724451/erick-daniel-juarez-gil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 1, "accepted_answer_id": 55484355, "answer_count": 1, "score": 0, "last_activity_date": 1554243712, "creation_date": 1554243272, "question_id": 55484296, "link": "https://stackoverflow.com/questions/55484296/error-converting-java-code-into-kotlin-code", "title": "Error converting Java code into Kotlin code", "body": "<p>I have the following statement in Java</p>\n\n<pre><code>private BroadcastReceiver mBroadcastReceiver = new BroadcastReceiver(){\n    @Override\n    public void onReceive(Context context, Intent intent) {\n        unregisterReceiver(mBroadcastReceiver);\n    }\n};\n</code></pre>\n\n<p>and I tried to convert into Kotlin code and I have</p>\n\n<pre><code>private var mBroadcastReceiver:BroadcastReceiver = \n    object:BroadcastReceiver(){\n        override fun onReceive(context: Context, intent: Intent) {\n            unregisterReceiver(mBroadcastReceiver)\n            stopSelf()\n        }\n    }\n</code></pre>\n\n<p>but I have the next error in </p>\n\n<pre><code>unregisterReceiver(mBroadcastReceiver)\n</code></pre>\n\n<blockquote>\n  <p>Variable mBroadcastReceiver must be initialized</p>\n</blockquote>\n"}, {"tags": ["list", "arraylist", "kotlin"], "comments": [{"owner": {"reputation": 3624, "user_id": 1293087, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FuLOs.jpg?s=128&g=1", "display_name": "Laksitha Ranasingha", "link": "https://stackoverflow.com/users/1293087/laksitha-ranasingha"}, "edited": false, "score": 0, "creation_date": 1554242630, "post_id": 55484138, "comment_id": 97678013, "body": "You could use a queue implementation, for example a <code>LinkedList</code>?"}, {"owner": {"reputation": 1045, "user_id": 1240944, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/angag.jpg?s=128&g=1", "display_name": "Rambo7", "link": "https://stackoverflow.com/users/1240944/rambo7"}, "reply_to_user": {"reputation": 3624, "user_id": 1293087, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FuLOs.jpg?s=128&g=1", "display_name": "Laksitha Ranasingha", "link": "https://stackoverflow.com/users/1293087/laksitha-ranasingha"}, "edited": false, "score": 0, "creation_date": 1554242872, "post_id": 55484138, "comment_id": 97678077, "body": "Yes, I can, but let&#39;s say for a different reason I am avoiding using LinkedList."}, {"owner": {"reputation": 3624, "user_id": 1293087, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FuLOs.jpg?s=128&g=1", "display_name": "Laksitha Ranasingha", "link": "https://stackoverflow.com/users/1293087/laksitha-ranasingha"}, "edited": false, "score": 0, "creation_date": 1554243537, "post_id": 55484138, "comment_id": 97678284, "body": "Afaik, there&#39;s no API support in Kotlin (at least on v1.3) like in Scala which allows you to prepend an element to a List."}, {"owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "edited": false, "score": 0, "creation_date": 1554274796, "post_id": 55484138, "comment_id": 97685688, "body": "If you want to modify the existing List, then <code>add(0, )</code> is probably the best way.  Its performance will depend on the List implementation,  but if it&#39;s one that allows efficient insertion (such as LinkedList), then <code>add()</code> will probably do that.  (If performance is really important, make sure you&#39;re using a LinkedList, or rearrange the code so you only need to add at the <i>end</i> of the list.)"}], "answers": [{"tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": true, "score": 3, "last_activity_date": 1554244998, "creation_date": 1554244998, "answer_id": 55484542, "question_id": 55484138, "link": "https://stackoverflow.com/questions/55484138/what-is-the-best-way-to-add-an-element-to-the-beginning-of-a-list-in-kotlin/55484542#55484542", "title": "What is the best way to add an element to the beginning of a list in Kotlin", "body": "<p>These two options are not quite the same: the first one just inserts an item into the beginning of the <em>existing</em> mutable list, and the second creates a new list and then converts it into another one new mutable list.</p>\n\n<p>I think if you're fine with mutating the existing list, you should prefer the first option because it requires way less memory than the second one.</p>\n"}, {"tags": [], "owner": {"reputation": 79, "user_id": 10784151, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IRF8ewUvTIE/AAAAAAAAAAI/AAAAAAAAABI/eQBIqHaMffU/photo.jpg?sz=128", "display_name": "TOUSIF AHAMMAD", "link": "https://stackoverflow.com/users/10784151/tousif-ahammad"}, "is_accepted": false, "score": 0, "last_activity_date": 1615966901, "creation_date": 1615966901, "answer_id": 66668823, "question_id": 55484138, "link": "https://stackoverflow.com/questions/55484138/what-is-the-best-way-to-add-an-element-to-the-beginning-of-a-list-in-kotlin/66668823#66668823", "title": "What is the best way to add an element to the beginning of a list in Kotlin", "body": "<p>You can use add(index, value) method.</p>\n<pre><code>fun main() {    \n    val list1: MutableList&lt;Int&gt; = mutableListOf(2,3,4)\n    println(list1.toString())\n\n    list1.add(0, 1)\n    println(list1.toString()) \n}\n\nOutput: \n  [2, 3, 4]\n  [1, 2, 3, 4]\n</code></pre>\n"}], "owner": {"reputation": 1045, "user_id": 1240944, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/angag.jpg?s=128&g=1", "display_name": "Rambo7", "link": "https://stackoverflow.com/users/1240944/rambo7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1835, "favorite_count": 0, "accepted_answer_id": 55484542, "answer_count": 2, "score": 3, "last_activity_date": 1615966901, "creation_date": 1554242241, "last_edit_date": 1554245152, "question_id": 55484138, "link": "https://stackoverflow.com/questions/55484138/what-is-the-best-way-to-add-an-element-to-the-beginning-of-a-list-in-kotlin", "title": "What is the best way to add an element to the beginning of a list in Kotlin", "body": "<p>If I have a list like this one</p>\n\n<pre><code> var foo = mutableListOf(\"John\", \"Wayne\")\n</code></pre>\n\n<p>and if I want to add an element on top of the list, so far I am thinking of two options.</p>\n\n<p>First: <code>foo.add(0, \"Twyla\")</code></p>\n\n<p>Second: <code>foo = (mutableListOf(\"Twyla\") + foo).toMutableList()</code></p>\n\n<p>I am not how the above two options fare in terms of performance but what is a recommended way in general?</p>\n"}, {"tags": ["android", "xml", "kotlin"], "comments": [{"owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "edited": false, "score": 0, "creation_date": 1554239852, "post_id": 55483668, "comment_id": 97677021, "body": "So <code>getStartedBtn</code> is null. Did you use <code>findViewById()</code> to initialize it?"}, {"owner": {"reputation": 3657, "user_id": 8170714, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OqwAS.jpg?s=128&g=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/8170714/jack"}, "edited": false, "score": 1, "creation_date": 1554239931, "post_id": 55483668, "comment_id": 97677058, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/218384/what-is-a-nullpointerexception-and-how-do-i-fix-it\">What is a NullPointerException, and how do I fix it?</a>"}, {"owner": {"reputation": 966, "user_id": 5314844, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yKmYOowCBCk/AAAAAAAAAAI/AAAAAAAARPo/sbJIwujRZk4/photo.jpg?sz=128", "display_name": "Bruno Diego Martins", "link": "https://stackoverflow.com/users/5314844/bruno-diego-martins"}, "edited": false, "score": 0, "creation_date": 1554239962, "post_id": 55483668, "comment_id": 97677071, "body": "Please, post the whole class, is not possible to know how getStartedBtn is being instantiated. Also, your class leagueActivity should be renamed to LeagueActivity and declared on AndroidManifest"}, {"owner": {"reputation": 3657, "user_id": 8170714, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OqwAS.jpg?s=128&g=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/8170714/jack"}, "edited": false, "score": 0, "creation_date": 1554240023, "post_id": 55483668, "comment_id": 97677093, "body": "make sure your <code>getStartedBtn</code> is properly initialized before you call <code>setOnClickListener</code> on it."}, {"owner": {"reputation": 6429, "user_id": 8274756, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207212471548575/picture?type=large", "display_name": "Tamir Abutbul", "link": "https://stackoverflow.com/users/8274756/tamir-abutbul"}, "edited": false, "score": 0, "creation_date": 1554240121, "post_id": 55483668, "comment_id": 97677124, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/218384/what-is-a-nullpointerexception-and-how-do-i-fix-it\">What is a NullPointerException, and how do I fix it?</a>"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1554240490, "post_id": 55483668, "comment_id": 97677255, "body": "Maybe you are not applying <code>android-kotlin-extensions</code> plugin in build.gradle"}, {"owner": {"reputation": 55, "user_id": 11302085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/898e5adf8a92b5fab2cefae81c963601?s=128&d=identicon&r=PG&f=1", "display_name": "jason_proger", "link": "https://stackoverflow.com/users/11302085/jason-proger"}, "edited": false, "score": 0, "creation_date": 1554243261, "post_id": 55483668, "comment_id": 97678201, "body": "I checked and I am applying the android-kotlin-extensions plug in.  I think it auto filled that when I entered that section of code.  Thanks you for the suggestion.  I doappreciate it."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 11302085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/898e5adf8a92b5fab2cefae81c963601?s=128&d=identicon&r=PG&f=1", "display_name": "jason_proger", "link": "https://stackoverflow.com/users/11302085/jason-proger"}, "edited": false, "score": 0, "creation_date": 1554247444, "post_id": 55483807, "comment_id": 97679231, "body": "ok I&#39;ll add more code in the edit post now.  Really appreciate everyone&#39;s help."}], "tags": [], "owner": {"reputation": 369, "user_id": 10610726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cafc69550256823872e26986bfa833cb?s=128&d=identicon&r=PG&f=1", "display_name": "underoid", "link": "https://stackoverflow.com/users/10610726/underoid"}, "is_accepted": false, "score": 0, "last_activity_date": 1554292264, "last_edit_date": 1554292264, "creation_date": 1554240408, "answer_id": 55483807, "question_id": 55483668, "link": "https://stackoverflow.com/questions/55483668/using-setonclicklistener-and-getting-potential-nullpointerexception-the-resour/55483807#55483807", "title": "Using setOnClickListener and getting &quot;Potential NullPointerException. The resource is missing in some of layout versions", "body": "<p>Make sure that Button with the <code>same ID</code> exists in both portrait and landscape layouts.</p>\n"}, {"comments": [{"owner": {"reputation": 55, "user_id": 11302085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/898e5adf8a92b5fab2cefae81c963601?s=128&d=identicon&r=PG&f=1", "display_name": "jason_proger", "link": "https://stackoverflow.com/users/11302085/jason-proger"}, "edited": false, "score": 0, "creation_date": 1554241613, "post_id": 55483831, "comment_id": 97677698, "body": "Hi Bruno, I renamed LeagueActivity with the caps as you suggested.  I am still getting the same error.  Thank you for that though as I wasn&#39;t aware the lower case was an issue. as far as the remaining part of your answer, are you suggesting I create a new .kt file MainActivity with that code you posted?  Sorry I hate to say it but I&#39;m fairly new and still learning my way around."}, {"owner": {"reputation": 55, "user_id": 11302085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/898e5adf8a92b5fab2cefae81c963601?s=128&d=identicon&r=PG&f=1", "display_name": "jason_proger", "link": "https://stackoverflow.com/users/11302085/jason-proger"}, "edited": false, "score": 0, "creation_date": 1554242247, "post_id": 55483831, "comment_id": 97677889, "body": "I changed the class MainActivity as suggested and still received the same error."}, {"owner": {"reputation": 966, "user_id": 5314844, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yKmYOowCBCk/AAAAAAAAAAI/AAAAAAAARPo/sbJIwujRZk4/photo.jpg?sz=128", "display_name": "Bruno Diego Martins", "link": "https://stackoverflow.com/users/5314844/bruno-diego-martins"}, "reply_to_user": {"reputation": 55, "user_id": 11302085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/898e5adf8a92b5fab2cefae81c963601?s=128&d=identicon&r=PG&f=1", "display_name": "jason_proger", "link": "https://stackoverflow.com/users/11302085/jason-proger"}, "edited": false, "score": 0, "creation_date": 1554242480, "post_id": 55483831, "comment_id": 97677973, "body": "In this case, will be better whether you provide more from your code."}], "tags": [], "owner": {"reputation": 966, "user_id": 5314844, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yKmYOowCBCk/AAAAAAAAAAI/AAAAAAAARPo/sbJIwujRZk4/photo.jpg?sz=128", "display_name": "Bruno Diego Martins", "link": "https://stackoverflow.com/users/5314844/bruno-diego-martins"}, "is_accepted": true, "score": 1, "last_activity_date": 1554240529, "creation_date": 1554240529, "answer_id": 55483831, "question_id": 55483668, "link": "https://stackoverflow.com/questions/55483668/using-setonclicklistener-and-getting-potential-nullpointerexception-the-resour/55483831#55483831", "title": "Using setOnClickListener and getting &quot;Potential NullPointerException. The resource is missing in some of layout versions", "body": "<h2>MainActivity.kt</h2>\n\n<pre><code>import android.content.Intent\nimport android.support.v7.app.AppCompatActivity\nimport android.os.Bundle\nimport kotlinx.android.synthetic.main.activity_main.*\n\nclass MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        getStartedBtn.setOnClickListener {\n            startActivity(Intent(this, LeagueActivity::class.java))\n        }\n    }\n}\n</code></pre>\n\n<h2>activity_main.xml</h2>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.constraint.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".MainActivity\"&gt;\n\n    &lt;Button\n        android:id=\"@+id/getStartedBtn\"\n        android:layout_width=\"0dp\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginTop=\"8dp\"\n        android:layout_marginBottom=\"24dp\"\n        android:text=\"@string/get_started\"\n        android:textColor=\"@color/colorAccent\"\n        android:textSize=\"14sp\"\n        android:typeface=\"normal\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintHorizontal_bias=\"0.0\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintVertical_bias=\"0.929\" /&gt;\n\n&lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n\n<p>Don't forget to declare the <strong>LeagueActivity</strong> on AndroidManifest</p>\n\n<pre><code>&lt;activity android:name=\".LeagueActivity\" /&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 55, "user_id": 11302085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/898e5adf8a92b5fab2cefae81c963601?s=128&d=identicon&r=PG&f=1", "display_name": "jason_proger", "link": "https://stackoverflow.com/users/11302085/jason-proger"}, "is_accepted": false, "score": 1, "last_activity_date": 1554258055, "creation_date": 1554258055, "answer_id": 55486107, "question_id": 55483668, "link": "https://stackoverflow.com/questions/55483668/using-setonclicklistener-and-getting-potential-nullpointerexception-the-resour/55486107#55486107", "title": "Using setOnClickListener and getting &quot;Potential NullPointerException. The resource is missing in some of layout versions", "body": "<p>I got it working.  I changed two things, not sure what one did it but I ran the program and it worked:</p>\n\n<ol>\n<li><p>I changed my \"welcomeActivity.kt\" file name to caps \"WelcomeActivity.kt\" per Bruno Diego Martins suggestion earlier about using caps on the file names.</p></li>\n<li><p>I noticed one of my layout files had a duplicate.  The file had the same name as my activity_welcome.xml except it had a (16) at the end of it.  I looked at that file and noticed the toggle button for that layout had a different name ID.  Perhaps the setOnClickListener was trying to use that (16) file with the wrong button name instead of the original file that I was working in that had the correct name of getStartedBtn.  So I deleted the file that had (16) at the end.  I then ran the program and it worked.  </p></li>\n</ol>\n\n<p>Thanks for everyone's help.  It was my first post on here and I was taken by surprise (pleasantly surprised) how quickly people offered their help.  Great community here.  </p>\n"}], "owner": {"reputation": 55, "user_id": 11302085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/898e5adf8a92b5fab2cefae81c963601?s=128&d=identicon&r=PG&f=1", "display_name": "jason_proger", "link": "https://stackoverflow.com/users/11302085/jason-proger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 462, "favorite_count": 0, "accepted_answer_id": 55483831, "answer_count": 3, "score": 2, "last_activity_date": 1554292264, "creation_date": 1554239649, "last_edit_date": 1554249834, "question_id": 55483668, "link": "https://stackoverflow.com/questions/55483668/using-setonclicklistener-and-getting-potential-nullpointerexception-the-resour", "title": "Using setOnClickListener and getting &quot;Potential NullPointerException. The resource is missing in some of layout versions", "body": "<p>I'm using the following code to use the <code>setOnClickListener</code> and every time I run the program it crashes before it runs.  I get \"app has stopped\".  </p>\n\n<p>In the logcat, it gives me this error:</p>\n\n<blockquote>\n  <p>2019-04-02 16:03:26.184 6592-6592/com.example.swoosh E/AndroidRuntime:\n  FATAL EXCEPTION: main\n      Process: com.example.swoosh, PID: 6592\n      java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.swoosh/com.example.swoosh.MainActivity}:\n  java.lang.NullPointerException: Attempt to invoke virtual method 'void\n  android.widget.Button.setOnClickListener(android.view.View$OnClickListener)'\n  on a null object reference</p>\n</blockquote>\n\n<p>If I take out the <code>setOnClickListener</code> section of code the program runs.  Here is the section of code that is causing the error.  Below that, I'll post the section of XML layout where the toggle button is located.  </p>\n\n<p>I'm using Android Studio 3.3.2   What am I missing here? </p>\n\n<pre><code>    getStartedBtn.setOnClickListener {\n        val leagueIntent=Intent(this, leagueActivity::class.java)\n        startActivity(leagueIntent)\n    }\n</code></pre>\n\n<pre><code>\n\n&lt;Button android:text=\"@string/get_started\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"wrap_content\"\n            app:fontFamily=\"@font/montserrat\"\n            app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintEnd_toEndOf=\"parent\"\n            android:id=\"@+id/getStartedBtn\" android:typeface=\"normal\" android:textSize=\"14sp\"\n            android:textColor=\"@color/colorAccent\" android:background=\"@drawable/swoosh_button\"\n            android:layout_marginBottom=\"24dp\" app:layout_constraintBottom_toBottomOf=\"parent\"\n            android:layout_marginTop=\"8dp\" app:layout_constraintTop_toBottomOf=\"@+id/textView3\"\n            app:layout_constraintHorizontal_bias=\"0.0\" app:layout_constraintVertical_bias=\"0.929\" /&gt;\n\n</code></pre>\n\n<pre><code>//this is full welcomeActivity.kt file\npackage com.example.swoosh\nimport android.content.Intent\nimport android.support.v7.app.AppCompatActivity\nimport android.os.Bundle\nimport kotlinx.android.synthetic.main.activity_welcome.*\n\nclass MainActivity : AppCompatActivity() {\n   override fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_welcome)   \n    getStartedBtn.setOnClickListener {\n      startActivity(Intent(this, LeagueActivity::class.java))\n    }\n   }\n}\n</code></pre>\n\n<pre><code>Side note: the \"getStartedBtn\" is highlighed yellow and when I hold mouse over it, it says \"Potential Null Pointer exception.  The resource is missing in some of layout versions\"\n\n</code></pre>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n      package=\"com.example.swoosh\"&gt;\n\n&lt;application\n        android:allowBackup=\"true\"\n        android:icon=\"@mipmap/ic_launcher\"\n        android:label=\"@string/app_name\"\n        android:roundIcon=\"@mipmap/ic_launcher_round\"\n        android:supportsRtl=\"true\"\n        android:theme=\"@style/AppTheme\"&gt;\n    &lt;activity android:name=\".LeagueActivity\"&gt;\n    &lt;/activity&gt;\n    &lt;activity android:name=\".MainActivity\"&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=\"android.intent.action.MAIN\"/&gt;\n\n            &lt;category android:name=\"android.intent.category.LAUNCHER\"/&gt;\n        &lt;/intent-filter&gt;\n    &lt;/activity&gt;\n\n    &lt;meta-data\n            android:name=\"preloaded_fonts\"\n            android:resource=\"@array/preloaded_fonts\"/&gt;\n&lt;/application&gt;\n</code></pre>\n\n<p></p>\n"}, {"tags": ["android", "kotlin", "gps", "location"], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 11302084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9cdcc52894c8f898ae802f9ace81a79?s=128&d=identicon&r=PG&f=1", "display_name": "zzzzza", "link": "https://stackoverflow.com/users/11302084/zzzzza"}, "edited": false, "score": 0, "creation_date": 1554241650, "post_id": 55483862, "comment_id": 97677715, "body": "Thank you! This really fixed error. But in this case, the variable <b>location</b> is equal to <b>null</b> and I can not get the coordinates. I thought that <b>GPSLocation</b> is not Activity, but a class with a set of methods. Or am I misunderstanding something?"}, {"owner": {"reputation": 1934, "user_id": 2932967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a7491e8ed5ab6a28cc6967c3fb59e9f?s=128&d=identicon&r=PG", "display_name": "Andrew Churilo", "link": "https://stackoverflow.com/users/2932967/andrew-churilo"}, "reply_to_user": {"reputation": 39, "user_id": 11302084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9cdcc52894c8f898ae802f9ace81a79?s=128&d=identicon&r=PG&f=1", "display_name": "zzzzza", "link": "https://stackoverflow.com/users/11302084/zzzzza"}, "edited": false, "score": 0, "creation_date": 1554243101, "post_id": 55483862, "comment_id": 97678150, "body": "@zzzzza \u2019GPSLocation\u2019 extends \u2019AppCompatActivity\u2019. So, it is \u2019Activity\u2019. If you don&#39;t need this just remove \u2019AppCompatActivity()&#39; from class definition."}, {"owner": {"reputation": 1934, "user_id": 2932967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a7491e8ed5ab6a28cc6967c3fb59e9f?s=128&d=identicon&r=PG", "display_name": "Andrew Churilo", "link": "https://stackoverflow.com/users/2932967/andrew-churilo"}, "reply_to_user": {"reputation": 39, "user_id": 11302084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9cdcc52894c8f898ae802f9ace81a79?s=128&d=identicon&r=PG&f=1", "display_name": "zzzzza", "link": "https://stackoverflow.com/users/11302084/zzzzza"}, "edited": false, "score": 0, "creation_date": 1554243275, "post_id": 55483862, "comment_id": 97678205, "body": "@zzzzza &quot;<i>location is null</i>&quot; is another problem. I think you need to create a new question for this issue."}, {"owner": {"reputation": 39, "user_id": 11302084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9cdcc52894c8f898ae802f9ace81a79?s=128&d=identicon&r=PG&f=1", "display_name": "zzzzza", "link": "https://stackoverflow.com/users/11302084/zzzzza"}, "edited": false, "score": 1, "creation_date": 1554245556, "post_id": 55483862, "comment_id": 97678838, "body": "@AndreqChurilo Thanks!"}], "tags": [], "owner": {"reputation": 1934, "user_id": 2932967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a7491e8ed5ab6a28cc6967c3fb59e9f?s=128&d=identicon&r=PG", "display_name": "Andrew Churilo", "link": "https://stackoverflow.com/users/2932967/andrew-churilo"}, "is_accepted": true, "score": 0, "last_activity_date": 1554240751, "creation_date": 1554240751, "answer_id": 55483862, "question_id": 55483626, "link": "https://stackoverflow.com/questions/55483626/error-after-getsystemservicecontext-location-service-call/55483862#55483862", "title": "Error after getSystemService(Context.LOCATION_SERVICE) call", "body": "<p>You are trying to use <code>Activity</code> instance that have not created.<br/>\nLook, you have two <code>Activity</code>: <code>MainActivity</code> and <code>GPSLocation</code>. <code>MainActivity</code> has been started, but <code>GPSLocation</code> not. Inside <code>setLocation</code> method you use instance of <code>GPSLocation</code> activity, but this activity isn't started, <code>onCreate</code> method of this activity wasn't called. To start <code>GPSLocation</code> activty you should call <code>startActivity</code> method. Line <code>GPSLocation(this)</code> is wrong, never create instance of activity itself, always call <code>startActivity</code> method. Also, I think <code>GPSLocation</code> should not extend <code>Activity</code>.</p>\n\n<hr>\n\n<p>If you need just rid out your crash use this line:</p>\n\n<pre><code>val locationManager = myContext.getSystemService(Context.LOCATION_SERVICE) as LocationManager\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 11302084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9cdcc52894c8f898ae802f9ace81a79?s=128&d=identicon&r=PG&f=1", "display_name": "zzzzza", "link": "https://stackoverflow.com/users/11302084/zzzzza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1376, "favorite_count": 0, "accepted_answer_id": 55483862, "answer_count": 1, "score": 1, "last_activity_date": 1554240751, "creation_date": 1554239414, "question_id": 55483626, "link": "https://stackoverflow.com/questions/55483626/error-after-getsystemservicecontext-location-service-call", "title": "Error after getSystemService(Context.LOCATION_SERVICE) call", "body": "<p>Decided to make an application that determines the current location.\nFor this, I created the class \"GPSLocation\", which is responsible for processing everything related to GPS.</p>\n\n<p>The application starts and works fine until I call a function from this class by pressing a button (the \"onButtonGPS\" function).</p>\n\n<p>In LogCat you can see that the error occurs in this line:</p>\n\n<pre><code>val locationManager = getSystemService(Context.LOCATION_SERVICE) as LocationManager\n</code></pre>\n\n<p>As I understand it, the error says that system services are not available until the \"onCreate\" method. I tried to insert this method into the class \"GPSLocation\" and tried a lot of everything else that I found on the Internet, but the problem could not be solved.</p>\n\n<p><strong>MainActivity.kt</strong></p>\n\n<pre><code>import android.os.AsyncTask\nimport android.support.v7.app.AppCompatActivity\nimport android.os.Bundle\nimport kotlinx.android.synthetic.main.activity_main.*\nimport android.view.View\n\nclass MainActivity : AppCompatActivity() {\n\n    val myGPSLocation = GPSLocation(this)\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n    }\n\n    fun onButtonGPS(view: View){\n        myGPSLocation.setLocation()\n    }\n}\n</code></pre>\n\n<p><strong>GPSLocation.kt</strong></p>\n\n<pre><code>import android.Manifest\nimport android.app.Activity\nimport android.content.Context\nimport android.content.pm.PackageManager\nimport android.location.Criteria\nimport android.location.Location\nimport android.location.LocationListener\nimport android.location.LocationManager\nimport android.os.Bundle\nimport android.support.v4.app.ActivityCompat\nimport android.support.v7.app.AppCompatActivity\nimport android.util.Log\nimport android.widget.Toast\n\nclass GPSLocation(val myContext: Context) : AppCompatActivity(), LocationListener {\n\n\n    val REQUEST_LOCATION = 2\n\n\n    fun setLocation() {\n        if (ActivityCompat.checkSelfPermission(myContext, Manifest.permission.ACCESS_FINE_LOCATION)\n        != PackageManager.PERMISSION_GRANTED\n        &amp;&amp; ActivityCompat.checkSelfPermission(myContext, Manifest.permission.ACCESS_COARSE_LOCATION)\n        != PackageManager.PERMISSION_GRANTED){\n            ActivityCompat.requestPermissions(myContext as Activity,\n                arrayOf(Manifest.permission.ACCESS_FINE_LOCATION, Manifest.permission.ACCESS_COARSE_LOCATION),\n                REQUEST_LOCATION)\n        }else{\n            val locationManager = getSystemService(Context.LOCATION_SERVICE) as LocationManager\n            val criteria = Criteria()\n            val provider = locationManager.getBestProvider(criteria, false)\n            val location = locationManager.getLastKnownLocation(provider)\n            locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000, 0f, this)\n            if (location != null){\n                Toast.makeText(myContext, convertLocationToString(location.latitude, location.longitude), Toast.LENGTH_SHORT).show()\n            }else{\n                Toast.makeText(myContext, \"Location not available!\", Toast.LENGTH_SHORT).show()\n            }\n        }\n    }\n\n    override fun onRequestPermissionsResult(requestCode: Int, permissions: Array&lt;out String&gt;, grantResults: IntArray) {\n        if (requestCode == REQUEST_LOCATION) setLocation()\n    }\n\n    private fun convertLocationToString(latitude: Double, longitude: Double): String {\n        val builder = StringBuilder()\n\n        if (latitude &lt; 0) builder.append(\"S \") else builder.append(\"N \")\n\n        val latitudeDegrees = Location.convert(Math.abs(latitude), Location.FORMAT_SECONDS)\n        val latitudeSplit = latitudeDegrees.split((\":\").toRegex()).dropLastWhile({it.isEmpty()}).toTypedArray()\n        builder.append(latitudeSplit[0])\n        builder.append(\"\u00b0\")\n        builder.append(latitudeSplit[1])\n        builder.append(\"'\")\n        builder.append(latitudeSplit[2])\n        builder.append(\"\\\"\")\n        builder.append(\"\\n\")\n\n        if (longitude &lt; 0) builder.append(\"W \") else builder.append(\"E \")\n\n        val longitudeDegrees = Location.convert(Math.abs(longitude), Location.FORMAT_SECONDS)\n        val longitudeSplit = longitudeDegrees.split((\":\").toRegex()).dropLastWhile({it.isEmpty()}).toTypedArray()\n        builder.append(longitudeSplit[0])\n        builder.append(\"\u00b0\")\n        builder.append(longitudeSplit[1])\n        builder.append(\"'\")\n        builder.append(longitudeSplit[2])\n        builder.append(\"\\\"\")\n\n        return builder.toString()\n    }\n\n    override fun onLocationChanged(p0: Location?) {\n        setLocation()\n    }\n\n    override fun onStatusChanged(p0: String?, p1: Int, p2: Bundle?) {\n\n    }\n\n    override fun onProviderEnabled(p0: String?) {\n\n    }\n\n    override fun onProviderDisabled(p0: String?) {\n\n    }\n\n}\n</code></pre>\n\n<p><strong>LogCat</strong></p>\n\n<pre><code>04-02 23:07:04.529 17809-17809/com.example.testtskwheather E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.example.testtskwheather, PID: 17809\n    java.lang.IllegalStateException: Could not execute method for android:onClick\n        at android.support.v7.app.AppCompatViewInflater$DeclaredOnClickListener.onClick(AppCompatViewInflater.java:389)\n        at android.view.View.performClick(View.java:4633)\n        at android.view.View$PerformClick.run(View.java:19330)\n        at android.os.Handler.handleCallback(Handler.java:733)\n        at android.os.Handler.dispatchMessage(Handler.java:95)\n        at android.os.Looper.loop(Looper.java:157)\n        at android.app.ActivityThread.main(ActivityThread.java:5356)\n        at java.lang.reflect.Method.invokeNative(Native Method)\n        at java.lang.reflect.Method.invoke(Method.java:515)\n        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1265)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1081)\n        at dalvik.system.NativeStart.main(Native Method)\n     Caused by: java.lang.reflect.InvocationTargetException\n        at java.lang.reflect.Method.invokeNative(Native Method)\n        at java.lang.reflect.Method.invoke(Method.java:515)\n        at android.support.v7.app.AppCompatViewInflater$DeclaredOnClickListener.onClick(AppCompatViewInflater.java:384)\n        at android.view.View.performClick(View.java:4633)*\n        at android.view.View$PerformClick.run(View.java:19330)*\n        at android.os.Handler.handleCallback(Handler.java:733)*\n        at android.os.Handler.dispatchMessage(Handler.java:95)*\n        at android.os.Looper.loop(Looper.java:157)*\n        at android.app.ActivityThread.main(ActivityThread.java:5356)*\n        at java.lang.reflect.Method.invokeNative(Native Method)*\n        at java.lang.reflect.Method.invoke(Method.java:515)*\n        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1265)*\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1081)*\n        at dalvik.system.NativeStart.main(Native Method)*\n     Caused by: java.lang.IllegalStateException: System services not available to Activities before onCreate()\n        at android.app.Activity.getSystemService(Activity.java:4713)\n        at com.example.testtskwheather.GPSLocation.setLocation(GPSLocation.kt:41)\n        at com.example.testtskwheather.MainActivity.onButtonGPS(MainActivity.kt:84)\n        at java.lang.reflect.Method.invokeNative(Native Method)*\n        at java.lang.reflect.Method.invoke(Method.java:515)*\n        at android.support.v7.app.AppCompatViewInflater$DeclaredOnClickListener.onClick(AppCompatViewInflater.java:384)*\n        at android.view.View.performClick(View.java:4633)*\n        at android.view.View$PerformClick.run(View.java:19330)*\n        at android.os.Handler.handleCallback(Handler.java:733)*\n        at android.os.Handler.dispatchMessage(Handler.java:95)*\n        at android.os.Looper.loop(Looper.java:157)*\n        at android.app.ActivityThread.main(ActivityThread.java:5356)*\n        at java.lang.reflect.Method.invokeNative(Native Method)*\n        at java.lang.reflect.Method.invoke(Method.java:515)*\n        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1265)*\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1081)*\n        at dalvik.system.NativeStart.main(Native Method)*\n04-02 23:07:06.691 17809-17809/com.example.testtskwheather I/Process: Sending signal. PID: 17809 SIG: 9\n</code></pre>\n"}, {"tags": ["java", "android", "maven", "gradle", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 2322, "user_id": 1535892, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/804d1fffefc11d9204d0c309bfcaa832?s=128&d=identicon&r=PG", "display_name": "MikeB", "link": "https://stackoverflow.com/users/1535892/mikeb"}, "edited": false, "score": 0, "creation_date": 1554243237, "post_id": 55484216, "comment_id": 97678193, "body": "Yeah this seems about right. I&#39;m actually using kotlin, so <code>public</code> isn&#39;t actually there. But, I could exclude <code>internal</code>, <code>private</code>, etc. Or look for <code>interface</code>"}], "tags": [], "owner": {"reputation": 1209, "user_id": 4254252, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3c50cfc28626aa6c326b97148bb60f19?s=128&d=identicon&r=PG", "display_name": "Fishy", "link": "https://stackoverflow.com/users/4254252/fishy"}, "is_accepted": true, "score": 3, "last_activity_date": 1554242725, "creation_date": 1554242725, "answer_id": 55484216, "question_id": 55483467, "link": "https://stackoverflow.com/questions/55483467/gradle-generate-sources-jar-for-only-public-interfaces/55484216#55484216", "title": "Gradle generate sources.jar for only public interfaces", "body": "<p>You could try adding something like this, instead of your <code>include</code>:</p>\n\n<pre><code>from 'src/main/java'\neachFile { currentFile -&gt;\n    String contents = new File(currentFile.getSourcePath()).text\n    if(!contents.contains(\"public class\")) {\n        currentFile.exclude()\n    }\n}\n</code></pre>\n\n<p>I'm not entirely sure if that works, but it should set you on the right path to where you want to go.</p>\n\n<p>Since Gradle does not actually do any code analysis, you can't just simply say \"only include files that have classes that are public\". Instead, you have to either write a custom plugin that will only include public classes, or do something like what I provided. It includes everything from the source directory, but runs a little bit of code on each file. First, it gets the contents of the file, then it checks if that file contains <code>public class</code>. If not, the file does't have a public class, and should be excluded.</p>\n\n<p>Hope this helps! Feel free to ask any more questions if you have any.</p>\n"}], "owner": {"reputation": 2322, "user_id": 1535892, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/804d1fffefc11d9204d0c309bfcaa832?s=128&d=identicon&r=PG", "display_name": "MikeB", "link": "https://stackoverflow.com/users/1535892/mikeb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 55484216, "answer_count": 1, "score": 1, "last_activity_date": 1554242725, "creation_date": 1554238695, "question_id": 55483467, "link": "https://stackoverflow.com/questions/55483467/gradle-generate-sources-jar-for-only-public-interfaces", "title": "Gradle generate sources.jar for only public interfaces", "body": "<p>I am working on a closed-source Android library (published as an AAR), and want to include some javadocs for consumers, which requires a sources.jar.</p>\n\n<p>I know I could cherry-pick each file using an <code>includes</code> <a href=\"https://docs.gradle.org/current/dsl/org.gradle.api.tasks.bundling.Jar.html#org.gradle.api.tasks.bundling.Jar:includes\" rel=\"nofollow noreferrer\">property</a> or maybe even a whole package/folder.</p>\n\n<pre><code>task('androidSourcesJar', type: Jar) {\n    classifier = 'sources'\n    baseName = artifactBaseName\n    from android.sourceSets.main.java.srcDirs\n    include ('MyInterface1.kt', 'MyInterface2.kt', 'MyInterface3.kt')\n}\n</code></pre>\n\n<p>Instead, is there a way to include only <code>public</code> classes, interfaces, methods, etc? This seems like a problem that would've come up before. </p>\n"}, {"tags": ["android", "api", "kotlin", "retrofit", "mvp"], "comments": [{"owner": {"reputation": 537, "user_id": 7255999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46a8be2d26e0985bc2a5102e6a404f50?s=128&d=identicon&r=PG", "display_name": "Muhammad Muzammil Sharif", "link": "https://stackoverflow.com/users/7255999/muhammad-muzammil-sharif"}, "edited": false, "score": 0, "creation_date": 1554239308, "post_id": 55483423, "comment_id": 97676797, "body": "create a base presenter class which handles the api and extend that class in both activities presenter"}, {"owner": {"reputation": 564, "user_id": 4948827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oJddy.jpg?s=128&g=1", "display_name": "Ryan Godlonton-Shaw", "link": "https://stackoverflow.com/users/4948827/ryan-godlonton-shaw"}, "edited": false, "score": 0, "creation_date": 1554239545, "post_id": 55483423, "comment_id": 97676896, "body": "create a singleton method on your application class"}], "owner": {"reputation": 21, "user_id": 11302008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34cfe24cd40e7d80b346962d3b665d21?s=128&d=identicon&r=PG&f=1", "display_name": "Gartheus", "link": "https://stackoverflow.com/users/11302008/gartheus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1554238483, "creation_date": 1554238483, "question_id": 55483423, "link": "https://stackoverflow.com/questions/55483423/how-to-implement-mvp-when-i-use-the-same-api-call-in-two-seperate-presenters", "title": "How to implement MVP when I use the same API call in two seperate presenters", "body": "<p>I am using the same API call (i.e. getUserList) with retrofit for two different activities on Android in kotlin. Each activity has it's own presenter that takes care of that call, which is the way to do with MVP pattern, but the code is the same in both cases. This way there are two presenters with the same method that do the same thing. How can I organize it, that there would be only one implementation of the method that both presenters use while still implementing MVP pattern?</p>\n"}, {"tags": ["java", "kotlin", "audio-recording", "javax.sound.sampled"], "comments": [{"owner": {"reputation": 40613, "user_id": 4099593, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zweIW.png?s=128&g=1", "display_name": "Bhargav Rao", "link": "https://stackoverflow.com/users/4099593/bhargav-rao"}, "edited": false, "score": 0, "creation_date": 1555181147, "post_id": 55482552, "comment_id": 98023877, "body": "Comments are not for extended discussion; this conversation has been <a href=\"https://chat.stackoverflow.com/rooms/191793/discussion-on-question-by-fabian-b-sudden-delay-while-recording-audio-over-long\">moved to chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 2662, "user_id": 5634769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aadff15bb5cec395bce83aa41a2c758a?s=128&d=identicon&r=PG&f=1", "display_name": "gpasch", "link": "https://stackoverflow.com/users/5634769/gpasch"}, "edited": false, "score": 0, "creation_date": 1555301141, "post_id": 55680610, "comment_id": 98048898, "body": "The AudioSystem works fine and for you to degrade I dont know where you are coming from!!"}, {"owner": {"reputation": 1814, "user_id": 7053782, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154138331767983/picture?type=large", "display_name": "Sheinbergon", "link": "https://stackoverflow.com/users/7053782/sheinbergon"}, "reply_to_user": {"reputation": 2662, "user_id": 5634769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aadff15bb5cec395bce83aa41a2c758a?s=128&d=identicon&r=PG&f=1", "display_name": "gpasch", "link": "https://stackoverflow.com/users/5634769/gpasch"}, "edited": false, "score": 0, "creation_date": 1555327552, "post_id": 55680610, "comment_id": 98059321, "body": "@gpasch Well, it&#39;s lacking volume control (and other mixer control features, which are documented to at least exist), channel de-multiplexing, and on-the-fly device detection (an audio interface cannot always be present during JVM class-loading). I just don&#39;t think it&#39;s reasonable for a dev to have to use JNA and dig deep into the ALSA header files in order to do something like &quot;se the gain on the first channel pair&quot; (the AudioSystem couldn&#39;t get that to happen, even when following the documentation).  I didn&#39;t mean to disregard all of the effort put into this API by the Sun devs in any way."}], "tags": [], "owner": {"reputation": 1814, "user_id": 7053782, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154138331767983/picture?type=large", "display_name": "Sheinbergon", "link": "https://stackoverflow.com/users/7053782/sheinbergon"}, "is_accepted": true, "score": 7, "last_activity_date": 1555401344, "last_edit_date": 1555401344, "creation_date": 1555281112, "answer_id": 55680610, "question_id": 55482552, "link": "https://stackoverflow.com/questions/55482552/sudden-delay-while-recording-audio-over-long-time-periods-inside-the-jvm/55680610#55680610", "title": "Sudden delay while recording audio over long time periods inside the JVM", "body": "<p>I have (a rather) vast experience with Java audio interfacing.\nHere are a few points that may be useful in guiding you towards a proper solution:</p>\n\n<ol>\n<li>It's not a matter of JVM version - the java audio system have barely been upgraded since Java 1.3 or 1.5</li>\n<li>The java audio system is a poor-man's wrapper around whatever audio interface API the operating system has to offer. In linux it's the Pulseaudio library, For windows, it's the direct show audio API (if I'm not mistaken about the latter).</li>\n<li>Again, the audio system API is kind of a legacy API - some of the features are not working or not implemented, other behaviors are straight out weird, as they are dependent on an obsolete design (I can provide examples, if required).</li>\n<li>It's not a matter of Garbage Collection - If your definition of \"delay\" is what I understand it to be (audio data is delayed by 1-2 seconds, meaning you start hearing stuff 1-2 seconds later), well, the garbage collector cannot cause blank data to magically be captured by the target data line and then append data as usual in an 2 seconds worth byte offset.</li>\n<li>What's most likely happening here is either the hardware or driver providing you with 2 seconds worth of garbled data at some point, and then, streams the rest of the data as usual, resulting in the \"delay\" you are experiencing.</li>\n<li>The fact that it works perfectly on linux means it's not a hardware issue, but rather a driver related one.</li>\n<li>To affirm that suspicion, you can try capturing audio via FFmpeg for the same duration and see if the issue is reproduced.</li>\n<li>If you are using specialized audio capturing hardware, better approach your hardware manufacturer and inquire him about the issue you are facing on windows.</li>\n<li>In any case, when writing an audio capturing application from scratch I'd strongly suggest keeping away from the Java audio-system if possible. It's nice for POCs, but it's an un-maintained legacy API. JNA is always a viable option (I've used it in Linux with ALSA/Pulse-audio to control audio hardware attributes the Java audio system could not alter), so you could look for audio capturing examples in C++ for windows and translate them to Java. It'll give you fine grain control over audio capture devices, much more than what the JVM provide OOTB. If you want to have a look at a living/breathing usable JNA example, check out my <a href=\"https://github.com/sheinbergon/jna-aac-encoder\" rel=\"nofollow noreferrer\">JNA AAC encoder</a> project.</li>\n<li>Again, if you use special capturing harwdare, there's a good chance the manufacturer already provides it's own low-level C api for interfacing with the hardware, and you should consider having a look at it as well.</li>\n<li>If that's not the case, maybe you and your company/client should\n consider using specialized capturing hardware (doesn't have to be\n that expensive).</li>\n</ol>\n"}], "owner": {"reputation": 311, "user_id": 6473700, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Xt0gE_13Pd4/AAAAAAAAAAI/AAAAAAAAACE/6vAXC4P_H9I/photo.jpg?sz=128", "display_name": "Fabian B.", "link": "https://stackoverflow.com/users/6473700/fabian-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1057, "favorite_count": 7, "accepted_answer_id": 55680610, "answer_count": 1, "score": 17, "last_activity_date": 1555401344, "creation_date": 1554234784, "last_edit_date": 1555014719, "question_id": 55482552, "link": "https://stackoverflow.com/questions/55482552/sudden-delay-while-recording-audio-over-long-time-periods-inside-the-jvm", "title": "Sudden delay while recording audio over long time periods inside the JVM", "body": "<p>I'm implementing an application which records and analyzes audio in real time (or at least as close to real time as possible), using the JDK Version 8 Update 201. While performing a test which simulates typical use cases of the application, I noticed that after several hours of recording audio continuously, a sudden delay of somewhere between one and two seconds was introduced. Up until this point there was no noticeable delay. It was only after this critical point of recording for several hours when this delay started to occur.</p>\n\n<h2>What I've tried so far</h2>\n\n<p>To check if my code for timing the recording of the audio samples is wrong, I commented out everything related to timing. This left me essentially with this update loop which fetches audio samples as soon as they are ready (Note: Kotlin code):</p>\n\n<pre><code>while (!isInterrupted) {\n    val audioData = read(sampleSize, false)\n    listener.audioFrameCaptured(audioData)\n}\n</code></pre>\n\n<p>This is my read method:</p>\n\n<pre><code>fun read(samples: Int, buffered: Boolean = true): AudioData {\n    //Allocate a byte array in which the read audio samples will be stored.\n    val bytesToRead = samples * format.frameSize\n    val data = ByteArray(bytesToRead)\n\n    //Calculate the maximum amount of bytes to read during each iteration.\n    val bufferSize = (line.bufferSize / BUFFER_SIZE_DIVIDEND / format.frameSize).roundToInt() * format.frameSize\n    val maxBytesPerCycle = if (buffered) bufferSize else bytesToRead\n\n    //Read the audio data in one or multiple iterations.\n    var bytesRead = 0\n    while (bytesRead &lt; bytesToRead) {\n        bytesRead += (line as TargetDataLine).read(data, bytesRead, min(maxBytesPerCycle, bytesToRead - bytesRead))\n    }\n\n    return AudioData(data, format)\n}\n</code></pre>\n\n<p>However, even without any timing from my side the problem was not resolved. Therefore, I went on to experiment a bit and let the application run using different audio formats, which lead to very confusing results (I'm going to use a PCM signed 16 bit stereo audio format with little endian and a sample rate of 44100.0 Hz as default, unless specified otherwise):</p>\n\n<ol>\n<li>The critical amount of time that has to pass before the delay appears seems to be different depending on the machine used. On my Windows 10 desktop PC it is somewhere between 6.5 and 7 hours. On my laptop (also using Windows 10) however, it is somewhere between 4 and 5 hours for the same audio format.</li>\n<li>The amount of audio channels used seems to have an effect. If I change the amount of channels from stereo to mono, the time before the delay starts to appear is doubled to somewhere between 13 and 13.5 hours on my desktop.</li>\n<li>Decreasing the sample size from 16 bits to 8 bits also results in a doubling of the time before the delay starts to appear. Somewhere between 13 and 13.5 hours on my desktop.</li>\n<li>Changing the byte order from little endian to big endian has no effect.</li>\n<li>Switching from stereomix to a physical microphone has no effect either.</li>\n<li>I tried opening the line using different buffer sizes (1024, 2048 and 3072 sample frames) as well as its default buffer size. This also didn't change anything.</li>\n<li>Flushing the TargetDataLine <em>after</em> the delay has started to occur results in all bytes being zero for approximately one to two seconds. After this I get non-zero values again. The delay, however, is still there. If I flush the line <em>before</em> the critical point, I don't get those zero-bytes.</li>\n<li>Stopping and restarting the TargetDataLine <em>after</em> the delay appeared also does not change anything.</li>\n<li>Closing and reopening the TargetDataLine, however, does get rid of the delay until it reappears after several hours from there on.</li>\n<li>Automatically flushing the TargetDataLines internal buffer every ten minutes does not help to resolve the issue. Therefore, a buffer overflow in the internal buffer does not seem to be the cause.</li>\n<li>Using a parallel garbage collector to avoid application freezes also does not help.</li>\n<li>The used sample rate seems to be important. If I double the sample rate to 88200 Hertz, the delay starts occurring somewhere between 3 and 3.5 hours of runtime.</li>\n<li>If I let it run under Linux using my \"default\" audio format, it still runs fine after about 9 hours of runtime.</li>\n</ol>\n\n<h2>Conclusions that I've drawn:</h2>\n\n<p>These results let me come to the conclusion that the time for which I can record audio before this issue starts to happen is dependent on the machine on which the application is run and dependent on the byte rate (i.e. frame size and sample rate) of the audio format. This <em>seems</em> to hold true (although I can't completely confirm this as of now) because if I combine the changes made in 2 and 3, I would assume that I can record audio samples for four times as long (which would be somewhere between 26 and 27 hours) as when using my \"default\" audio format before the delay starts to appear. As I didn't find the time to let the application run for this long yet, I can only tell that it did run fine for about 15 hours before I had to stop it due to time constraints on my side. So, this hypothesis is still to be confirmed or denied.</p>\n\n<p>According to the result of bullet point 13, it seems like the whole issue only appears when using Windows. Therefore, I <em>think</em> that it <em>might</em> be a bug in the platform specific parts of the javax.sound.sampled API.</p>\n\n<p>Even though I think I might have found a way to change when this issue starts to happen, I'm not satisfied with the result. I could periodically close and reopen the line to avoid the problem from starting to appear at all. However, doing this would result in some arbitrary small amount of time where I wouldn't be able to capture audio samples. Furthermore, the Javadoc states that some lines can't be reopened at all after being closed. Therefore, this is not a good solution in my case.</p>\n\n<p>Ideally, this whole issue shouldn't be happening at all. Is there something I am completely missing or am I experiencing limitations of what is possible with the javax.sound.sampled API? How can I get rid of this issue at all?</p>\n\n<p>Edit: By suggestion of Xtreme Biker and gidds I created a small example application. You can find it inside this <a href=\"https://github.com/FabianB98/audio-input-delay-test\" rel=\"noreferrer\">Github repository</a>.</p>\n"}, {"tags": ["java", "android", "gridview", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 1695, "user_id": 7940639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/010d85ca9a205087a63ca844be2dcc24?s=128&d=identicon&r=PG&f=1", "display_name": "Amine", "link": "https://stackoverflow.com/users/7940639/amine"}, "is_accepted": false, "score": 0, "last_activity_date": 1554234009, "creation_date": 1554234009, "answer_id": 55482373, "question_id": 55482291, "link": "https://stackoverflow.com/questions/55482291/how-can-i-make-a-gridview-with-horizontal-scrolling/55482373#55482373", "title": "How can I make a GridView with Horizontal scrolling?", "body": "<p>You can use this library <a href=\"https://github.com/jess-anders/two-way-gridview\" rel=\"nofollow noreferrer\">https://github.com/jess-anders/two-way-gridview</a> to perform horizontal or vertical scrolling in a gridView.</p>\n\n<p>Some of attributes available are </p>\n\n<pre><code>scrollDirectionPortrait (vertical | horizontal) \nscrollDirectionLandscape (vertical | horizontal)\n</code></pre>\n\n<p>Here is an example of usage </p>\n\n<pre><code>&lt;com.jess.ui.TwoWayGridView\nxmlns:android=\"http://schemas.android.com/apk/res/android\" \nxmlns:app=\"http://schemas.android.com/apk/res-auto\"\nandroid:background=\"#E8E8E8\"\nandroid:id=\"@+id/gridview\"\nandroid:layout_width=\"fill_parent\" \nandroid:layout_height=\"fill_parent\"\napp:cacheColorHint=\"#E8E8E8\"\napp:columnWidth=\"80dp\"\napp:rowHeight=\"80dp\"\napp:numColumns=\"auto_fit\"\napp:numRows=\"auto_fit\"\napp:verticalSpacing=\"16dp\"\napp:horizontalSpacing=\"16dp\"\napp:stretchMode=\"spacingWidthUniform\"\napp:scrollDirectionPortrait=\"vertical\"\napp:scrollDirectionLandscape=\"horizontal\"\napp:gravity=\"center\"/&gt; \n</code></pre>\n"}], "owner": {"reputation": 109, "user_id": 11249937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fe522baf346da550ccfa3bc917c3896?s=128&d=identicon&r=PG&f=1", "display_name": "Bogdan Reznikov", "link": "https://stackoverflow.com/users/11249937/bogdan-reznikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554234009, "creation_date": 1554233704, "question_id": 55482291, "link": "https://stackoverflow.com/questions/55482291/how-can-i-make-a-gridview-with-horizontal-scrolling", "title": "How can I make a GridView with Horizontal scrolling?", "body": "<p>How can I do that?</p>\n\n<p>I made <code>android:scrollbars=\"horizontal\"</code>, but it doesn't help</p>\n"}, {"tags": ["android", "kotlin", "draw", "android-custom-view", "android-wrap-content"], "answers": [{"comments": [{"owner": {"reputation": 77347, "user_id": 1631193, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c713494416ceac454d71c524e15f1c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Sechan", "link": "https://stackoverflow.com/users/1631193/gabe-sechan"}, "reply_to_user": {"reputation": 31, "user_id": 5521870, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-UiY2-d3niJs/AAAAAAAAAAI/AAAAAAACPoM/_NaF9rqLgvM/photo.jpg?sz=128", "display_name": "nsutanto", "link": "https://stackoverflow.com/users/5521870/nsutanto"}, "edited": false, "score": 0, "creation_date": 1554232802, "post_id": 55481609, "comment_id": 97674018, "body": "SO it shouldn&#39;t be half, since iafter looking at your screenshot you go below the halfway point (more than 180 degrees of arc).  Figure out how far below 0 you go using trigonometry and change your size based on that value.  But the answer is that your onMeasure was wrong and needs to be adjusted.  If its not accurate, you get whitespace"}], "tags": [], "owner": {"reputation": 77347, "user_id": 1631193, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c713494416ceac454d71c524e15f1c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Sechan", "link": "https://stackoverflow.com/users/1631193/gabe-sechan"}, "is_accepted": false, "score": 0, "last_activity_date": 1554230650, "creation_date": 1554230650, "answer_id": 55481609, "question_id": 55481181, "link": "https://stackoverflow.com/questions/55481181/how-to-do-wrap-content-on-half-circle-custom-view/55481609#55481609", "title": "How to do wrap content on half circle custom view?", "body": "<p>Change your onMeasure.  YOu're setting your measured width and height to the same value.  If you only want to display a top half circle, then you want to set the height to half the width.  Otherwise, it will think the view is the full circle in height.</p>\n"}], "owner": {"reputation": 31, "user_id": 5521870, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-UiY2-d3niJs/AAAAAAAAAAI/AAAAAAACPoM/_NaF9rqLgvM/photo.jpg?sz=128", "display_name": "nsutanto", "link": "https://stackoverflow.com/users/5521870/nsutanto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 135, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1554232727, "creation_date": 1554228966, "last_edit_date": 1554232727, "question_id": 55481181, "link": "https://stackoverflow.com/questions/55481181/how-to-do-wrap-content-on-half-circle-custom-view", "title": "How to do wrap content on half circle custom view?", "body": "<p>I'm making half circle custom view on Android. However, I'm struggling to remove the un-needed bottom white space on wrap content. I think because it is drawing based on 'a full circle' calculation.\nI'm sharing my Custom View implementation, as well as how I call it from my application. \nSee also this image: \n<a href=\"https://i.stack.imgur.com/TmtOK.png\" rel=\"nofollow noreferrer\">Click here for the screenshot</a></p>\n\n<p>Note: If I change the onMeasure size, then it will cut the upper circle:\n<a href=\"https://i.stack.imgur.com/hjThN.png\" rel=\"nofollow noreferrer\">Click here for the screenshot</a></p>\n\n<pre><code>class CircularProgressView(context: Context, attrs: AttributeSet) : View(context, attrs) {\n\n    private var circle = RectF()\n    private val paint = Paint()\n    private var size = 0\n\n    init {\n        paint.isAntiAlias = true\n        paint.style = Paint.Style.STROKE\n        paint.strokeWidth = strokeWidth.toFloat()\n        paint.strokeCap = Paint.Cap.BUTT\n\n        setupAttributes(attrs)\n    }\n\n    private fun setupAttributes(attrs: AttributeSet?) {\n\n        // TypedArray objects are shared and must be recycled.\n        typedArray.recycle()\n    }\n\n    override fun onDraw(canvas: Canvas) {\n        super.onDraw(canvas)\n\n        drawBackground(canvas)\n    }\n\n\n    override fun onMeasure(widthMeasureSpec: Int, heightMeasureSpec: Int) {\n        super.onMeasure(widthMeasureSpec, heightMeasureSpec)\n\n        size = Math.min(measuredWidth, measuredHeight)\n\n        setMeasuredDimension(size, size)\n    }\n\n\n    override fun onSizeChanged(w: Int, h: Int, oldw: Int, oldh: Int) {\n        super.onSizeChanged(w, h, oldw, oldh)\n\n        val centerX = w / 2\n        val centerY = h / 2\n\n        // Pick the minimum value so that it can fit the container. Radius is half size\n        val radius = size / 2f\n\n        // Create the background and progress circle, adding dialStrokeWidth in equation so that make sure the dial can fit container\n        circle.top = (centerY - radius)\n        circle.bottom = (centerY + radius)\n        circle.left = (centerX - radius)\n        circle.right = (centerX + radius)\n    }\n\n    private fun drawBackground(canvas: Canvas) {\n        paint.shader = null\n        paint.color = backGroundColor\n        canvas.drawArc(circle, startAngle, sweepAngle, false, paint)\n    }\n}\n</code></pre>\n\n<p>This is how I use it:</p>\n\n<pre><code>&lt;com.enova.circular_progress.CircularProgressView\n                    android:layout_width=\"0dp\"\n                    android:layout_height=\"wrap_content\"\n                    android:background=\"@color/white\"\n                    app:backgroundColor=\"@color/colorHint\"\n                    app:dialColor=\"@color/colorPrimary\"\n                    app:foregroundColorEnd=\"@color/colorPrimary\"\n                    app:foregroundColorStart=\"@color/colorPrimaryDark\"\n                    app:layout_constraintLeft_toLeftOf=\"parent\"\n                    app:layout_constraintRight_toRightOf=\"parent\"\n                    app:layout_constraintTop_toTopOf=\"parent\"\n                    app:percent=\"80\"&gt;\n                &lt;/com.enova.circular_progress.CircularProgressView&gt;               \n\n</code></pre>\n"}, {"tags": ["android", "kotlin", "observable", "android-livedata"], "answers": [{"comments": [{"owner": {"reputation": 403, "user_id": 10378312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/773b6d95a297d1c7a9491ec1687c674f?s=128&d=identicon&r=PG&f=1", "display_name": "Ryujin", "link": "https://stackoverflow.com/users/10378312/ryujin"}, "edited": false, "score": 0, "creation_date": 1554255423, "post_id": 55481197, "comment_id": 97680680, "body": "You might also want to consider just having a Callback instance just be a field or some anonymous instance inside ViewModel.  Just cleaner to hide it from the rest of the application if that Callback is only useful and relevant within that ViewModel.  The rest of the above answer is how I would do it as well, just have the Activity observe the results via a LiveData as opposed to implementing the Callback interface itself."}], "tags": [], "owner": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "is_accepted": false, "score": 1, "last_activity_date": 1554229043, "creation_date": 1554229043, "answer_id": 55481197, "question_id": 55481065, "link": "https://stackoverflow.com/questions/55481065/how-to-observe-viewmodel-that-makes-a-request-for-a-call-back/55481197#55481197", "title": "How to observe ViewModel that makes a request for a call back", "body": "<p>If I understand the question correctly, you can submit the data acquired in <code>onFinished</code> method to the <code>LiveData</code> instance that should be observed by a view component, e.g.</p>\n\n<pre><code>class RequestViewModel : ViewModel, CallBack {\n\n    private val _liveData = MutableLiveData&lt;SomeResult&lt;List&lt;String&gt;&gt;&gt;\n    val liveData: LiveData&lt;SomeResult&lt;List&lt;String&gt;&gt;&gt; get() = _liveData\n\n    fun request() {\n        Manager.getInstance().request(this)\n    }\n\n    override fun onFinished(result : List&lt;String&gt;?) {\n        if (result != null) {\n            _liveData.postValue(SomeResult.success(result))\n        } else {\n            _liveData.postValue(SomeResult.failure())\n        }\n    }\n\n    override fun onFailed() {\n        _liveData.postValue(SomeResult.failure())\n    }\n}\n</code></pre>\n\n<p>And somewhere in your object that corresponds to a view component:</p>\n\n<pre><code>viewModel.liveData.observe(lifecycleOwner, Observer&lt;List&lt;String&gt;&gt; {\n    handleResponse(it)\n})\n</code></pre>\n\n<p>whereas <code>lifecycleOwner</code> typically is your <code>AppCompatActivity</code> or <code>android.support.v4.Fragment</code> inheritor.</p>\n"}, {"tags": [], "owner": {"reputation": 83, "user_id": 1996581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6chMW.jpg?s=128&g=1", "display_name": "TheScriptan", "link": "https://stackoverflow.com/users/1996581/thescriptan"}, "is_accepted": false, "score": 0, "last_activity_date": 1554231538, "creation_date": 1554231538, "answer_id": 55481804, "question_id": 55481065, "link": "https://stackoverflow.com/questions/55481065/how-to-observe-viewmodel-that-makes-a-request-for-a-call-back/55481804#55481804", "title": "How to observe ViewModel that makes a request for a call back", "body": "<p>I would advise you to decouple requesting from <code>ViewModel</code> and create a class called Repository to handle all the requests. In this class you could have a <code>MutableLiveData</code> object which can be observed and whenever new requested data is retrieved, use <code>mutableLiveData.postValue(retrievedData)</code> for <code>MutableLiveData</code> which notifies the observes about the new changes. </p>\n\n<p>To read more about repository, you can follow these links:</p>\n\n<p><a href=\"https://developer.android.com/jetpack/docs/guide\" rel=\"nofollow noreferrer\">Google's Guide to App Architecture</a></p>\n\n<p><a href=\"https://codelabs.developers.google.com/codelabs/android-room-with-a-view/#7\" rel=\"nofollow noreferrer\">Codelab tutorial with Repository pattern</a></p>\n"}], "owner": {"reputation": 1854, "user_id": 3673151, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/JTw7N.jpg?s=128&g=1", "display_name": "J_Strauton", "link": "https://stackoverflow.com/users/3673151/j-strauton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 683, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1554231538, "creation_date": 1554228369, "last_edit_date": 1554228630, "question_id": 55481065, "link": "https://stackoverflow.com/questions/55481065/how-to-observe-viewmodel-that-makes-a-request-for-a-call-back", "title": "How to observe ViewModel that makes a request for a call back", "body": "<p>I am trying to make a request to a library that gives me a call back.</p>\n\n<pre><code>Manager.getInstance().request(new CallBack())\n</code></pre>\n\n<p>I want to put this in a ViewModel so that I can observe it from the <code>Activity</code>.</p>\n\n<pre><code>class RequestViewModel : ViewModel, CallBack {\n\n    fun request() {\n        Manager.getInstance().request(this)\n    }\n\n    override fun onFinished(result : List&lt;String&gt;?) {\n    }\n\n    override fun onFailed() {\n    }\n}\n</code></pre>\n\n<p>How can I make it so that I can observe when this has finished? I know I could make my <code>Activity</code> implement this <code>CallBack</code>, but I don't want to couple <code>Activity</code> to this.</p>\n\n<p>Ideally this would be a LiveData or Observable. </p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 1, "creation_date": 1554231179, "post_id": 55480047, "comment_id": 97673265, "body": "<code>a.pow(1.0 &#47; 3.0))</code> works fine for me."}, {"owner": {"reputation": 26172, "user_id": 49746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IAAg.jpg?s=128&g=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/49746/todd"}, "edited": false, "score": 0, "creation_date": 1554231325, "post_id": 55480047, "comment_id": 97673342, "body": "Because it ends up with &#39;4.99999999&#39;. See: <a href=\"https://pl.kotl.in/ByK-x4-t4\" rel=\"nofollow noreferrer\">pl.kotl.in/ByK-x4-t4</a>"}, {"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "reply_to_user": {"reputation": 26172, "user_id": 49746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IAAg.jpg?s=128&g=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/49746/todd"}, "edited": false, "score": 1, "creation_date": 1554231456, "post_id": 55480047, "comment_id": 97673410, "body": "@Todd good point; I only tested it with OP&#39;s example of 9 and got the same result for both."}, {"owner": {"reputation": 3387, "user_id": 6248219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcdde87fb76a1bd9d3e079895abfbea7?s=128&d=identicon&r=PG&f=1", "display_name": "Louis", "link": "https://stackoverflow.com/users/6248219/louis"}, "edited": false, "score": 0, "creation_date": 1554232685, "post_id": 55480047, "comment_id": 97673979, "body": "@royer You can achieve that without using Java libraries. Check my answer :)"}], "answers": [{"comments": [{"owner": {"reputation": 431, "user_id": 10078148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2399f9b8e40752690d3529004f458d6?s=128&d=identicon&r=PG&f=1", "display_name": "royer", "link": "https://stackoverflow.com/users/10078148/royer"}, "edited": false, "score": 0, "creation_date": 1554236239, "post_id": 55480177, "comment_id": 97675511, "body": "ohh, fantanstic, tank you"}], "tags": [], "owner": {"reputation": 26172, "user_id": 49746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IAAg.jpg?s=128&g=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/49746/todd"}, "is_accepted": false, "score": 4, "last_activity_date": 1554231322, "last_edit_date": 1554231322, "creation_date": 1554224937, "answer_id": 55480177, "question_id": 55480047, "link": "https://stackoverflow.com/questions/55480047/how-to-calculate-a-cubic-root-in-kotlin/55480177#55480177", "title": "How to calculate a cubic root in Kotlin?", "body": "<p>If you don't need Kotlin multi-platform support, the Java standard library has <a href=\"https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Math.html#cbrt(double)\" rel=\"nofollow noreferrer\">Math.cbrt()</a>, which can be called safely from Kotlin.</p>\n\n<pre><code>val x: Double = Math.cbrt(125.0) // 5.0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1554231868, "post_id": 55481868, "comment_id": 97673623, "body": "In that case you should probably also use <code>pow</code> instead of <code>Math.pow</code>."}, {"owner": {"reputation": 431, "user_id": 10078148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2399f9b8e40752690d3529004f458d6?s=128&d=identicon&r=PG&f=1", "display_name": "royer", "link": "https://stackoverflow.com/users/10078148/royer"}, "edited": false, "score": 0, "creation_date": 1554236215, "post_id": 55481868, "comment_id": 97675498, "body": "@Louis  tank you"}, {"owner": {"reputation": 3387, "user_id": 6248219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcdde87fb76a1bd9d3e079895abfbea7?s=128&d=identicon&r=PG&f=1", "display_name": "Louis", "link": "https://stackoverflow.com/users/6248219/louis"}, "reply_to_user": {"reputation": 431, "user_id": 10078148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2399f9b8e40752690d3529004f458d6?s=128&d=identicon&r=PG&f=1", "display_name": "royer", "link": "https://stackoverflow.com/users/10078148/royer"}, "edited": false, "score": 0, "creation_date": 1554236573, "post_id": 55481868, "comment_id": 97675650, "body": "@royer You&#39;re welcome. If this answer was helpful, please accept it so everyone can benefit from it. :)"}], "tags": [], "owner": {"reputation": 3387, "user_id": 6248219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcdde87fb76a1bd9d3e079895abfbea7?s=128&d=identicon&r=PG&f=1", "display_name": "Louis", "link": "https://stackoverflow.com/users/6248219/louis"}, "is_accepted": true, "score": 5, "last_activity_date": 1554232134, "last_edit_date": 1554232134, "creation_date": 1554231808, "answer_id": 55481868, "question_id": 55480047, "link": "https://stackoverflow.com/questions/55480047/how-to-calculate-a-cubic-root-in-kotlin/55481868#55481868", "title": "How to calculate a cubic root in Kotlin?", "body": "<p>There's no need to use <strong>Java libraries</strong>, just use the <strong>Kotlin</strong> one:</p>\n\n<pre><code>import kotlin.math.pow\n\nfun formula(a:Int):Double {\n    return a.toDouble().pow(1/3.toDouble())\n}\n</code></pre>\n\n<p>Just tested it:</p>\n\n<pre><code>println(formula(9)) //2.080083823051904\n\nprintln(formula(27)) //3.0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 15208014, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K4pEs.jpg?s=128&g=1", "display_name": "Ankur Saxena", "link": "https://stackoverflow.com/users/15208014/ankur-saxena"}, "is_accepted": false, "score": 0, "last_activity_date": 1618360714, "last_edit_date": 1618360714, "creation_date": 1617699033, "answer_id": 66965495, "question_id": 55480047, "link": "https://stackoverflow.com/questions/55480047/how-to-calculate-a-cubic-root-in-kotlin/66965495#66965495", "title": "How to calculate a cubic root in Kotlin?", "body": "<pre>\n    /**\n     * Program: Kotlin program to calculate the cube root of 125\n     * Date: Tue, 6-4-2021\n     * @author: ANKUR SAXENA\n     * Platform: Windows 10 Pro/x64/Kotlin v1.4.31/VS Code\n     */\n\n    // cube root logic, var result = (Math.cbrt(num))\n\n    // program start\n    // main function\n    fun main (args: Array)\n    {\n        // declare variables\n        var num: Int = 125\n\n        // print value\n        println (\"Value of the number: $num\\n\")\n\n        // calculate cube root\n        var cubeRoot: Double = (Math.cbrt(num.toDouble()))\n\n        // print cube root\n        println (\"\\nCube root of $num is: $cubeRoot\\n\")\n    }\n\n// program end\n</pre>\n<br />\n// save this file as 'CubeRoot1.kt' <br />\n// compile: $ kotlinc CubeRoot1.kt [hit Enter] <br />\n// execute: $ kotlin CubeRoot1Kt [hit Enter] <br />\n<p>output: <br /></p>\n<pre>\n    Value of the number: 125\n\n\n    Cube root of 125 is: 5.0\n</pre>\n"}], "owner": {"reputation": 431, "user_id": 10078148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2399f9b8e40752690d3529004f458d6?s=128&d=identicon&r=PG&f=1", "display_name": "royer", "link": "https://stackoverflow.com/users/10078148/royer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1748, "favorite_count": 0, "accepted_answer_id": 55481868, "answer_count": 3, "score": 4, "last_activity_date": 1618360714, "creation_date": 1554224413, "question_id": 55480047, "link": "https://stackoverflow.com/questions/55480047/how-to-calculate-a-cubic-root-in-kotlin", "title": "How to calculate a cubic root in Kotlin?", "body": "<p>in kotlin there is an internal <strong>math library</strong> and I only find the <strong>square root</strong> but there is no cubic root.</p>\n\n<p><a href=\"https://i.stack.imgur.com/8oSKw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8oSKw.png\" alt=\"cubic root\"></a></p>\n\n<pre><code>import kotlin.math.sqrt\nimport kotlin.math.pow\n\nfun Formule(a:Int):Double{\n    //no working\n    //rs = a.pow(1/3)\n    //function\n    retun rs\n}\n\nfun main(args: Array&lt;String&gt;){\n    val calc = Formule(9)\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "rx-java2"], "answers": [{"tags": [], "owner": {"reputation": 18271, "user_id": 6507689, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tKmXs.png?s=128&g=1", "display_name": "R. Zag&#243;rski", "link": "https://stackoverflow.com/users/6507689/r-zag%c3%b3rski"}, "is_accepted": false, "score": 0, "last_activity_date": 1554239151, "creation_date": 1554239151, "answer_id": 55483559, "question_id": 55480024, "link": "https://stackoverflow.com/questions/55480024/rxjava-use-single-data-and-return-completable/55483559#55483559", "title": "RxJava use Single data and return Completable", "body": "<p><code>ViewModel</code> might expose a <code>LiveData</code> to which a View can subscribe to. Whenever <code>Single</code> emits a value, you might call <code>postValue</code> method of <code>LiveData</code> and View might get a result of completion of API call. </p>\n"}, {"tags": [], "owner": {"reputation": 121, "user_id": 8349081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/082f94dc5a0f7f34c6e14b6768fa10a6?s=128&d=identicon&r=PG&f=1", "display_name": "ArTTo", "link": "https://stackoverflow.com/users/8349081/artto"}, "is_accepted": false, "score": 0, "last_activity_date": 1554382114, "creation_date": 1554382114, "answer_id": 55516409, "question_id": 55480024, "link": "https://stackoverflow.com/questions/55480024/rxjava-use-single-data-and-return-completable/55516409#55516409", "title": "RxJava use Single data and return Completable", "body": "<p>You can run api call in <code>onCreate</code> callback of your screen. Then subscribe to LiveData changes in <code>onViewCreated</code> callback</p>\n\n<p>Api call and observe in Fragment:</p>\n\n<pre><code>override fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    model.getNews()\n}\n\noverride fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n    super.onViewCreated(view, savedInstanceState)\n    model.news.observe(this, Observer {\n        (rv_news.adapter as NewsRecyclerAdapter).items = it\n    })\n\n}\n</code></pre>\n\n<p>Data loading logic and updating a View:</p>\n\n<pre><code>val news = MutableLiveData&lt;List&lt;News&gt;&gt;()\n\nfun getNews() {\n    newsRepository.listOfNews()\n        .withScheduler(AndroidSchedulers.mainThread(), Schedulers.io())\n        .subscribeBy(\n            onSuccess = { news.postValue(it) },\n            onError = { it.printStackTrace() }) //Here you can handle error\n        .addTo(compositeDisposable)\n}\n</code></pre>\n"}], "owner": {"reputation": 132, "user_id": 7933960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65bed573d5aa6839fa88b0b0b0e85bc9?s=128&d=identicon&r=PG&f=1", "display_name": "JJaviMS", "link": "https://stackoverflow.com/users/7933960/jjavims"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 225, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1554382114, "creation_date": 1554224345, "last_edit_date": 1554236074, "question_id": 55480024, "link": "https://stackoverflow.com/questions/55480024/rxjava-use-single-data-and-return-completable", "title": "RxJava use Single data and return Completable", "body": "<p>I\u00b4m working with RxJava in Android, I\u00b4m trying to create a function that will call to an API using Retrofit, the point is that I want to process the API data in the ViewModel and emit to the View a Completable, to notify if the request was successful or not.</p>\n\n<p>I have thought about using a Subject and then into the subscribe function call to the Subject onComplete or onError, but I\u00b4m not sure if this is a good practice.</p>\n\n<p>What I want is something like this</p>\n\n<pre><code>fun apiCall(paramA:String):Completable{\n        webservice.myApiCall(paramA).subscribe { t1, t2 -&gt;\n            if (t1  != null){\n                handleData(t1)\n            }else {\n                handleError(t2)\n            }\n        }\n        //The Completable should be returned here\n    }\n</code></pre>\n"}, {"tags": ["java", "android", "kotlin", "objectanimator"], "comments": [{"owner": {"reputation": 120, "user_id": 4265012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7a1b52fe40b11f4f16a9295e68e3a8f?s=128&d=identicon&r=PG&f=1", "display_name": "0xFEFFEFE", "link": "https://stackoverflow.com/users/4265012/0xfeffefe"}, "edited": false, "score": 0, "creation_date": 1554223909, "post_id": 55479607, "comment_id": 97669810, "body": "Try using <code>View.ALPHA</code> instead of <code>alpha</code> as a method parameter. Maybe it helps."}], "answers": [{"comments": [{"owner": {"reputation": 152, "user_id": 2312248, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/8sYYv.png?s=128&g=1", "display_name": "ruitercomp", "link": "https://stackoverflow.com/users/2312248/ruitercomp"}, "edited": false, "score": 2, "creation_date": 1554393481, "post_id": 55479958, "comment_id": 97745108, "body": "saved my time :)"}], "tags": [], "owner": {"reputation": 1934, "user_id": 2932967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a7491e8ed5ab6a28cc6967c3fb59e9f?s=128&d=identicon&r=PG", "display_name": "Andrew Churilo", "link": "https://stackoverflow.com/users/2932967/andrew-churilo"}, "is_accepted": true, "score": 8, "last_activity_date": 1554224430, "last_edit_date": 1554224430, "creation_date": 1554224117, "answer_id": 55479958, "question_id": 55479607, "link": "https://stackoverflow.com/questions/55479607/could-not-find-property-setter-method-setalpha/55479958#55479958", "title": "Could not find property setter method setAlpha", "body": "<p>This happens because your <code>myView</code> has nullable type, like <code>View?</code>.\nTo get rid of this error convert your view to a non-null type (<code>myView!!</code>):</p>\n\n<pre><code>val objectAnimator = ObjectAnimator.ofFloat(myView!!, \"alpha\", 0.5f, 0f)\n</code></pre>\n"}], "owner": {"reputation": 17444, "user_id": 2069407, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9cf04e8273f7868fedf1fe32e1a5ec4f?s=128&d=identicon&r=PG", "display_name": "s-hunter", "link": "https://stackoverflow.com/users/2069407/s-hunter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 992, "favorite_count": 0, "accepted_answer_id": 55479958, "answer_count": 1, "score": 4, "last_activity_date": 1554224430, "creation_date": 1554222764, "question_id": 55479607, "link": "https://stackoverflow.com/questions/55479607/could-not-find-property-setter-method-setalpha", "title": "Could not find property setter method setAlpha", "body": "<p>This is the Java code for creating an alpha animator object.</p>\n\n<pre><code>ObjectAnimator objectAnimator = ObjectAnimator.ofFloat(myView, \"alpha\", 0.5f, 0f);\n</code></pre>\n\n<p>This is the Kotlin code for doing the same.</p>\n\n<pre><code>val objectAnimator = ObjectAnimator.ofFloat(myView, \"alpha\", 0.5f, 0f)\n</code></pre>\n\n<p>After I converted above Java code to Kotlin, Android Studio is giving me a red error warning with the this message when hover over the line where the error occurs.\n<strong>Could not find property setter method setAlpha on java.lang.Void more</strong></p>\n\n<p>Despite the IDE is giving this error, but I am still able to compile and run it. Any idea why it's giving this error in Kotlin and how to get rid of this error warning?</p>\n"}, {"tags": ["kotlin", "vert.x", "quarkus"], "answers": [{"tags": [], "owner": {"reputation": 1244, "user_id": 1231484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab937f7df990a673446f1e30fd9ccfba?s=128&d=identicon&r=PG", "display_name": "Clement", "link": "https://stackoverflow.com/users/1231484/clement"}, "is_accepted": true, "score": 8, "last_activity_date": 1554236231, "creation_date": 1554236231, "answer_id": 55482916, "question_id": 55479338, "link": "https://stackoverflow.com/questions/55479338/quarkus-vert-x-example/55482916#55482916", "title": "Quarkus Vert.x Example", "body": "<p>You can use verticle as follows:</p>\n\n<pre><code>@Inject Vertx vertx;\n\nvoid onStart(@Observes StartupEvent ev) {               \n    vertx.deploy(new MyVerticleA());\n    vertx.deploy(new MyVerticleB());\n}\n</code></pre>\n"}], "owner": {"reputation": 1248, "user_id": 1216702, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ee4438c3528321428edda68533d116f2?s=128&d=identicon&r=PG", "display_name": "Teg", "link": "https://stackoverflow.com/users/1216702/teg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 927, "favorite_count": 1, "accepted_answer_id": 55482916, "answer_count": 1, "score": 1, "last_activity_date": 1554308859, "creation_date": 1554221837, "last_edit_date": 1554308859, "question_id": 55479338, "link": "https://stackoverflow.com/questions/55479338/quarkus-vert-x-example", "title": "Quarkus Vert.x Example", "body": "<p>I want to test Quarkus and the native image for Docker with an existing project written in Kotlin and using Vert.x verticles.</p>\n\n<p>Can you point me to an example on how to deploy verticles using Quarkus?</p>\n\n<p>My dependencies are <code>vertx-sockjs-service-proxy</code> and <code>vertx-lang-kotlin</code>.</p>\n\n<p>I found some examples in the Vert.x extension tests but I cannot find how to deploy my verticles at server startup.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Inject\nEventBus eventBus;\n\n@Route(path = \"/hello-event-bus\", methods = GET)\nvoid helloEventBus (RoutingExchange exchange){\n    eventBus.send(\"hello\", exchange.getParam(\"name\").orElse(\"missing\"), ar -&gt; {\n        if (ar.succeeded()) {\n            exchange.ok(ar.result().body().toString());\n        } else {\n            exchange.serverError().end(ar.cause().getMessage());\n        }\n    });\n}\n</code></pre>\n"}, {"tags": ["java", "maven", "intellij-idea", "kotlin", "shared-libraries"], "comments": [{"owner": {"reputation": 165, "user_id": 1505023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e63527e45e76b23bff25898c93178ec?s=128&d=identicon&r=PG", "display_name": "Clayton", "link": "https://stackoverflow.com/users/1505023/clayton"}, "edited": false, "score": 0, "creation_date": 1554220840, "post_id": 55478970, "comment_id": 97668192, "body": "Imports might not all be 100% correct obviously, just a toy example to demonstrate the problem."}, {"owner": {"reputation": 16481, "user_id": 1392277, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yJUSK.jpg?s=128&g=1", "display_name": "LppEdd", "link": "https://stackoverflow.com/users/1392277/lppedd"}, "edited": false, "score": 0, "creation_date": 1554221131, "post_id": 55478970, "comment_id": 97668342, "body": "So the Java  version and Kotlin version are in the same package? You just converted it, right?"}], "answers": [{"tags": [], "owner": {"reputation": 165, "user_id": 1505023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e63527e45e76b23bff25898c93178ec?s=128&d=identicon&r=PG", "display_name": "Clayton", "link": "https://stackoverflow.com/users/1505023/clayton"}, "is_accepted": false, "score": 0, "last_activity_date": 1554227830, "creation_date": 1554227830, "answer_id": 55480900, "question_id": 55478970, "link": "https://stackoverflow.com/questions/55478970/how-to-fix-kotlin-libraries-not-resolving-in-intellij-in-kotlin-code-in-a-java/55480900#55480900", "title": "How to fix Kotlin libraries not resolving in IntelliJ in Kotlin code (in a java project)?", "body": "<p>It turns out this was a problem in publishing the client artifact. We were using the maven shade and jar plugins to create the jars and was leading to many kotlin_modules in the jar which were confusing IJ</p>\n\n<pre><code>META-INF/client.kotlin_module\nMETA-INF/descriptors.jvm.kotlin_module\nMETA-INF/descriptors.kotlin_module\nMETA-INF/descriptors.runtime.kotlin_module\nMETA-INF/deserialization.kotlin_module\nMETA-INF/kotlin-reflect-api.kotlin_module\nMETA-INF/metadata.jvm.kotlin_module\nMETA-INF/metadata.kotlin_module\nMETA-INF/util.runtime.kotlin_module\nMETA-INF/kotlin-stdlib.kotlin_module\nMETA-INF/kotlin-stdlib_coroutinesExperimental.kotlin_module\nMETA-INF/kotlin-stdlib-common.kotlin_module\nMETA-INF/kotlin-stdlib-common-coroutines.kotlin_module\nMETA-INF/kotlin-stdlib-jdk8.kotlin_module\nMETA-INF/kotlin-stdlib-jdk7.kotlin_module\n</code></pre>\n\n<p>Removing those from the client build seems to have cleared things up, and now we just have the one client.kotlin_module. </p>\n"}, {"tags": [], "owner": {"reputation": 171, "user_id": 6038141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25724bc6cbd445a221fae8c9a96fb52f?s=128&d=identicon&r=PG", "display_name": "AlexanderRS", "link": "https://stackoverflow.com/users/6038141/alexanderrs"}, "is_accepted": false, "score": 0, "last_activity_date": 1578659895, "creation_date": 1578659895, "answer_id": 59681877, "question_id": 55478970, "link": "https://stackoverflow.com/questions/55478970/how-to-fix-kotlin-libraries-not-resolving-in-intellij-in-kotlin-code-in-a-java/59681877#59681877", "title": "How to fix Kotlin libraries not resolving in IntelliJ in Kotlin code (in a java project)?", "body": "<p>This problem has a <a href=\"https://youtrack.jetbrains.com/issue/KT-28219\" rel=\"nofollow noreferrer\">ticket</a> in Jetbrains issue tracker. The ticket has not been resolved yet, but support said:</p>\n\n<blockquote>\n  <p>This is a known problem since the 1.2.50 release of the Kotlin plugin:\n  <a href=\"https://youtrack.jetbrains.com/issue/KT-25709\" rel=\"nofollow noreferrer\">KT-25709</a>. As a workaround, please stop bundling the Kotlin\n  runtime in the dependency jar (i.e. everything under the package\n  kotlin should be removed from the jar)</p>\n</blockquote>\n"}], "owner": {"reputation": 165, "user_id": 1505023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e63527e45e76b23bff25898c93178ec?s=128&d=identicon&r=PG", "display_name": "Clayton", "link": "https://stackoverflow.com/users/1505023/clayton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1688, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1578659895, "creation_date": 1554220541, "question_id": 55478970, "link": "https://stackoverflow.com/questions/55478970/how-to-fix-kotlin-libraries-not-resolving-in-intellij-in-kotlin-code-in-a-java", "title": "How to fix Kotlin libraries not resolving in IntelliJ in Kotlin code (in a java project)?", "body": "<p>I have two projects. One written fully in Kotlin that exports a Client artifact. I am trying to use the client in a second project that has a mix of java/kotlin code. </p>\n\n<p>In the java classes I have no problem importing the kotlin files for use, but in any kotlin files, IntelliJ cannot resolve the imports. All the other kotlin code works fine and I can compile on the command line via maven with no problems. It's <em>just</em> an issue with IntelliJ not recognizing the package I'm looking for. </p>\n\n<p>I see the package in both my maven toolbar as well as in the external libraries listed in the project. I've inspected the jars and sure enough the file I expect <code>com/foo/bar/BazClient.class</code> is present, but \n<code>import com.foo.bar.BazClient</code> tells me the package <code>bar</code> (the code from the other project) does not exist. The very same import statement works just fine in java code. </p>\n\n<p>Further adding to my problems the exact same java class that imports this client, if I convert to kotlin using IJ's builtin method, fails to compile in IntelliJ. The \"build project\" action completes successfully with no warnings/errors. </p>\n\n<p>Kotlin client is defined as:</p>\n\n<pre><code>package com.foo.bar\n\nimport retrofit2.http.GET\n\ninterface BazClient {\n    @GET(\"/v1/fuzz\")\n    fun getFuzz(): Call&lt;FuzzResponse&gt;\n}\n</code></pre>\n\n<p>Working java code:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package com.whodat.wat;\n\nimport javax.inject.Singleton;\nimport com.foo.bar.BazClient;\n\n@Singleton\npublic class CallTheService {\n    private final BazClient bazClient;\n\n    public CallTheService(BazClient bazClient) {\n        this.bazClient = bazClient;\n    }\n\n    public FuzzResponse callIt() throws IOException {\n        return bazClient.getFuzz().execute().body();\n    }\n}\n</code></pre>\n\n<p>Failing kotlin code:</p>\n\n<pre><code>package com.whodat.wat\n\nimport javax.inject.Singleton\nimport com.foo.bar.BazClient // \"bar\" is red in editor\n\n@Singleton\n// Can't resolve \"BazClient\" here \nclass CallTheService(private val bazClient: BazClient) {\n\n    fun callIt(): FuzzResponse {\n        return bazClient.getFuzz().execute().body()!!\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "websocket"], "comments": [{"owner": {"reputation": 3319, "user_id": 1008162, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3cc96f948b570ebccf311078a6f7aab0?s=128&d=identicon&r=PG", "display_name": "Naruto Sempai", "link": "https://stackoverflow.com/users/1008162/naruto-sempai"}, "edited": false, "score": 2, "creation_date": 1556398835, "post_id": 55478320, "comment_id": 98427818, "body": "Did you ever figure this out?"}], "owner": {"reputation": 2191, "user_id": 1686620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb6f02366cf3add9220808e9a33db0a6?s=128&d=identicon&r=PG", "display_name": "user1686620", "link": "https://stackoverflow.com/users/1686620/user1686620"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 857, "favorite_count": 2, "answer_count": 0, "score": 4, "last_activity_date": 1554218567, "creation_date": 1554218567, "question_id": 55478320, "link": "https://stackoverflow.com/questions/55478320/scarlet-web-socket-library-connection-failed", "title": "Scarlet web socket library connection failed", "body": "<p>Just trying to get very basic websocket communication working between an Android app (Kotlin) and a NodeJS server.  The NodeJS server has been working and connecting with other clients without any issues.  The very basic code I have looks like this:</p>\n\n<pre><code>    val client = OkHttpClient.Builder()\n        .addInterceptor(HttpLoggingInterceptor().setLevel(HttpLoggingInterceptor.Level.HBASIC))\n        .build()\n\n    if (client != null) {\n        val scarlet = Scarlet.Builder()\n            .webSocketFactory(client.newWebSocketFactory(\"ws://192.168.2.33:3000\"))\n            .addMessageAdapterFactory(MoshiMessageAdapter.Factory())\n            .addStreamAdapterFactory(RxJava2StreamAdapterFactory())\n            .build()\n\n        val myService = scarlet.create&lt;MyService&gt;()\n\n        myService.observeWebSocketEvent()\n            .subscribe { ev -&gt;\n                Log.e(\"WEB SOCKET\", ev)\n            }\n    }\n</code></pre>\n\n<p>I get the following errors:</p>\n\n<pre><code>D/OkHttp: --&gt; GET http://192.168.2.33:3000/\nD/OkHttp: Upgrade: websocket\nConnection: Upgrade\nSec-WebSocket-Key: ctY0bb8jl/mbF6KYGbSJBw==\nSec-WebSocket-Version: 13\n--&gt; END GET\nD/OkHttp: &lt;-- HTTP FAILED: java.io.IOException: unexpected end of stream on http://192.168.2.33:3000/...\n</code></pre>\n\n<p>Just wondering if there is anything obvious that I'm doing wrong.  I'm using the following dependencies:</p>\n\n<pre><code>    implementation 'com.github.tinder.scarlet:scarlet:0.1.7'\n    implementation 'com.github.tinder.scarlet:scarlet-message-adapter-moshi:0.1.7'\n    implementation 'com.github.tinder.scarlet:scarlet-stream-adapter-rxjava2:0.1.7'\n    implementation 'com.github.tinder.scarlet:scarlet-websocket-okhttp:0.1.7'\n    implementation 'com.squareup.okhttp3:logging-interceptor:3.14.0'\n</code></pre>\n"}, {"tags": ["kotlin", "vaadin12"], "comments": [{"owner": {"reputation": 1934, "user_id": 2932967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a7491e8ed5ab6a28cc6967c3fb59e9f?s=128&d=identicon&r=PG", "display_name": "Andrew Churilo", "link": "https://stackoverflow.com/users/2932967/andrew-churilo"}, "edited": false, "score": 0, "creation_date": 1554281807, "post_id": 55478212, "comment_id": 97689542, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/55490451/vaadin-12-pass-object-to-javascripts-function-cant-encode-class\">Vaadin 12 pass object to JavaScript&#39;s function: Can&#39;t encode class</a>"}], "answers": [{"comments": [{"owner": {"reputation": 8644, "user_id": 6813231, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/gy8Sg.jpg?s=128&g=1", "display_name": "a_subscriber", "link": "https://stackoverflow.com/users/6813231/a-subscriber"}, "edited": false, "score": 0, "creation_date": 1554219007, "post_id": 55478383, "comment_id": 97667130, "body": "Now I get: IntegrationError: Invalid value for checkObject.redirectToCheckout: value should be an object. What kind of object I need to pass to JavaScript&#39;s function from Vaadin ? String is not correct object for this?"}], "tags": [], "owner": {"reputation": 1934, "user_id": 2932967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a7491e8ed5ab6a28cc6967c3fb59e9f?s=128&d=identicon&r=PG", "display_name": "Andrew Churilo", "link": "https://stackoverflow.com/users/2932967/andrew-churilo"}, "is_accepted": true, "score": 1, "last_activity_date": 1554281096, "last_edit_date": 1554281096, "creation_date": 1554218785, "answer_id": 55478383, "question_id": 55478212, "link": "https://stackoverflow.com/questions/55478212/vaadin-12-javascript-java-lang-illegalargumentexception-cant-encode-class-ja/55478383#55478383", "title": "Vaadin 12, javaScript: java.lang.IllegalArgumentException: Can&#39;t encode class java.util.HashMap to json", "body": "<p>Use <code>JsonObject</code> instead <code>HashMap</code>:</p>\n\n<pre><code>val request = VaadinRequest.getCurrent()\nval param = request.getParameter(\"myParam\")\nval json = Json.createObject()\njson.put(\"sessionId\", param)\nUI.getCurrent().getPage().executeJavaScript(\"checkObject.redirectToCheckout($0)\", json)\n</code></pre>\n"}], "owner": {"reputation": 8644, "user_id": 6813231, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/gy8Sg.jpg?s=128&g=1", "display_name": "a_subscriber", "link": "https://stackoverflow.com/users/6813231/a-subscriber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "accepted_answer_id": 55478383, "answer_count": 1, "score": 1, "last_activity_date": 1554281096, "creation_date": 1554218245, "last_edit_date": 1554218608, "question_id": 55478212, "link": "https://stackoverflow.com/questions/55478212/vaadin-12-javascript-java-lang-illegalargumentexception-cant-encode-class-ja", "title": "Vaadin 12, javaScript: java.lang.IllegalArgumentException: Can&#39;t encode class java.util.HashMap to json", "body": "<p>In my Vaadin 12 and Kotlin project:</p>\n\n<p>Here <code>myhtml.html</code></p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n    &lt;head&gt;\n        &lt;script src=\"https://myjavascript.js\"&gt;&lt;/script&gt;\n        &lt;script&gt;\n            var checkObject = Util(\n                'pk_aaaa',\n                {\n                        betas: ['bbbb_4']\n                }\n            );\n            window.checkObject = checkObject;\n            function goToCheckout(){\n                checkObject.redirectToCheckout({\n                    sessionId: \"abcddddddddd\",\n                })\n            }\n        &lt;/script&gt;\n    &lt;/head&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>And this page success call method <code>redirectToCheckout</code> in browser. But I need to do this from Vaadin 12.</p>\n\n<p>I need to call method <code>checkObject.redirectToCheckout</code> from my Vaadin code:</p>\n\n<pre><code>import com.vaadin.flow.component.UI\nimport com.vaadin.flow.component.dependency.HtmlImport\nimport com.vaadin.flow.component.dependency.JavaScript\nimport com.vaadin.flow.component.html.Div\nimport com.vaadin.flow.router.Route\nimport com.vaadin.flow.server.VaadinRequest\nimport org.slf4j.LoggerFactory\n@Route(value = \"redir\")\n@JavaScript(\"https://myjavascript.js\")\n@HtmlImport(\"styles/myhtml.html\")\nclass RedirectForm : Div() {\n    private val logger = LoggerFactory.getLogger(this::class.java)\n\n    init {\n        val request = VaadinRequest.getCurrent()\n        val param = request.getParameter(\"myParam\")\n        val map = HashMap&lt;String, String&gt;()\n        map[\"sessionId\"] = param \n        UI.getCurrent().getPage().executeJavaScript(\"checkObject.redirectToCheckout($0)\", map)\n\n    }\n\n}\n</code></pre>\n\n<p>But I get error:</p>\n\n<pre><code>Caused by: java.lang.IllegalArgumentException: Can't encode class java.util.HashMap to json\n\n2019-04-02 18:09:26,835 12247 [qtp1750286943-20] ERROR c.v.flow.router.InternalServerError - There was an exception while trying to navigate to 'redir'\njava.lang.IllegalArgumentException: Unable to create an instance of 'myproject.view.RedirectForm'. The constructor threw an exception.\n    at com.vaadin.flow.internal.ReflectTools.createProxyInstance(ReflectTools.java:510)\n    at com.vaadin.flow.internal.ReflectTools.createInstance(ReflectTools.java:447)\n    at com.vaadin.flow.di.DefaultInstantiator.getOrCreate(DefaultInstantiator.java:65)\n    at com.vaadin.flow.di.Instantiator.createRouteTarget(Instantiator.java:158)\n    at com.vaadin.flow.router.internal.AbstractNavigationStateRenderer.lambda$getRouteTarget$1(AbstractNavigationStateRenderer.java:121)\n    at java.util.Optional.orElseGet(Optional.java:267)\n    at com.vaadin.flow.router.internal.AbstractNavigationStateRenderer.getRouteTarget(AbstractNavigationStateRenderer.java:120)\n    at com.vaadin.flow.router.internal.AbstractNavigationStateRenderer.handle(AbstractNavigationStateRenderer.java:178)\n    at com.vaadin.flow.router.Router.handleNavigation(Router.java:219)\n    at com.vaadin.flow.router.Router.navigate(Router.java:190)\n    at com.vaadin.flow.router.Router.initializeUI(Router.java:92)\n    at com.vaadin.flow.server.BootstrapHandler.createAndInitUI(BootstrapHandler.java:1117)\n    at com.vaadin.flow.server.BootstrapHandler.synchronizedHandleRequest(BootstrapHandler.java:396)\n    at com.vaadin.flow.server.SynchronizedRequestHandler.handleRequest(SynchronizedRequestHandler.java:40)\n    at com.vaadin.flow.server.VaadinService.handleRequest(VaadinService.java:1507)\n    at com.vaadin.flow.server.VaadinServlet.service(VaadinServlet.java:242)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)\n    at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:867)\n    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1623)\n    at org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter.doFilter(WebSocketUpgradeFilter.java:214)\n    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1610)\n    at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:540)\n    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:146)\n    at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:548)\n    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132)\n    at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:257)\n    at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1588)\n    at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:255)\n    at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1345)\n    at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:203)\n    at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:480)\n    at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1557)\n    at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:201)\n    at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1247)\n    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:144)\n    at org.eclipse.jetty.server.handler.HandlerList.handle(HandlerList.java:61)\n    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132)\n    at org.eclipse.jetty.server.Server.handle(Server.java:502)\n    at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:364)\n    at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:260)\n    at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:305)\n    at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:103)\n    at org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:118)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:765)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:683)\n    at java.lang.Thread.run(Thread.java:748)\nCaused by: java.lang.reflect.InvocationTargetException: null\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n    at com.vaadin.flow.internal.ReflectTools.createProxyInstance(ReflectTools.java:479)\n    ... 45 common frames omitted\nCaused by: java.lang.IllegalArgumentException: Can't encode class java.util.HashMap to json\n    at com.vaadin.flow.internal.JsonCodec.encodeWithoutTypeInfo(JsonCodec.java:165)\n    at com.vaadin.flow.internal.JsonCodec.encodeWithTypeInfo(JsonCodec.java:80)\n    at com.vaadin.flow.component.page.Page.executeJavaScript(Page.java:338)\n    at myproject.view.RedirectForm.&lt;init&gt;(RedirectView.kt:29)\n    ... 50 common frames omitted\n</code></pre>\n"}, {"tags": ["arrays", "sorting", "kotlin", "insertion-sort"], "comments": [{"owner": {"reputation": 54008, "user_id": 2071828, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/R8AYO.jpg?s=128&g=1", "display_name": "Boris the Spider", "link": "https://stackoverflow.com/users/2071828/boris-the-spider"}, "edited": false, "score": 0, "creation_date": 1554214641, "post_id": 55476589, "comment_id": 97664272, "body": "&quot;<i><code>B</code> copy of original array <code>A</code></i>&quot; - no it isn&#39;t."}], "answers": [{"tags": [], "owner": {"reputation": 1934, "user_id": 2932967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a7491e8ed5ab6a28cc6967c3fb59e9f?s=128&d=identicon&r=PG", "display_name": "Andrew Churilo", "link": "https://stackoverflow.com/users/2932967/andrew-churilo"}, "is_accepted": false, "score": 2, "last_activity_date": 1554276417, "last_edit_date": 1554276417, "creation_date": 1554214165, "answer_id": 55476896, "question_id": 55476589, "link": "https://stackoverflow.com/questions/55476589/contents-of-array-a-changes-when-i-sort-array-b-which-is-supposed-to-be-a-dupli/55476896#55476896", "title": "Contents of array A changes when I sort array B, which is supposed to be a duplicate of A", "body": "<p>It happens because you use the same array. After <code>val B = A</code> <code>B</code> is a reference to array <code>A</code>, no copy was created. To create a copy you need to call <code>val B = A.copyOf()</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 10946137, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CVkRTmEs1uY/AAAAAAAAAAI/AAAAAAAAAJE/8rvMTpP7P40/photo.jpg?sz=128", "display_name": "Pedro Parreira", "link": "https://stackoverflow.com/users/10946137/pedro-parreira"}, "edited": false, "score": 0, "creation_date": 1554217714, "post_id": 55477253, "comment_id": 97666261, "body": "thank you it works perfectly, now i see that i have another issue. the time always gives me 0 in milliseconds"}, {"owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "reply_to_user": {"reputation": 33, "user_id": 10946137, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CVkRTmEs1uY/AAAAAAAAAAI/AAAAAAAAAJE/8rvMTpP7P40/photo.jpg?sz=128", "display_name": "Pedro Parreira", "link": "https://stackoverflow.com/users/10946137/pedro-parreira"}, "edited": false, "score": 0, "creation_date": 1554218755, "post_id": 55477253, "comment_id": 97666962, "body": "@PedroParreira, it&#39;s surprisingly hard to get an idea of how long code can take to run.  See e.g. <a href=\"https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java\" title=\"how do i write a correct micro benchmark in java\">stackoverflow.com/questions/504103/&hellip;</a>"}], "tags": [], "owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "is_accepted": true, "score": 2, "last_activity_date": 1554215330, "creation_date": 1554215330, "answer_id": 55477253, "question_id": 55476589, "link": "https://stackoverflow.com/questions/55476589/contents-of-array-a-changes-when-i-sort-array-b-which-is-supposed-to-be-a-dupli/55477253#55477253", "title": "Contents of array A changes when I sort array B, which is supposed to be a duplicate of A", "body": "<p>At the start of your loop, you have an <code>IntArray</code> object, and a variable which refers to it:</p>\n\n<pre><code>    A \u2500\u2500\u2192 IntArray\n</code></pre>\n\n<p>You then create a second variable which refers to the same <code>IntArray</code> object.</p>\n\n<pre><code>    A\n      &gt;\u2500\u2192 IntArray\n    B \n</code></pre>\n\n<p>Hopefully this illustrates why changes made through the reference <code>B</code> will also be visible through the reference <code>A</code>.</p>\n\n<p>If you want <code>B</code> to refer to a <em>different</em> <code>IntArray</code>, you'll have to make a copy of it, e.g.:</p>\n\n<pre><code>val B = A.copyOf()\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>val B = A.clone()\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>val B = IntArray(a.size){ A[it] }\n</code></pre>\n\n<p>or various other ways.\u00a0 (<code>copyOf()</code> is usually the best.)</p>\n\n<p>(Finally, please note that the Kotlin convention is for variables, methods, and properties to start with a lower-case letter, and only classes and type parameters to start with a capital.)</p>\n"}], "owner": {"reputation": 33, "user_id": 10946137, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CVkRTmEs1uY/AAAAAAAAAAI/AAAAAAAAAJE/8rvMTpP7P40/photo.jpg?sz=128", "display_name": "Pedro Parreira", "link": "https://stackoverflow.com/users/10946137/pedro-parreira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 55477253, "answer_count": 2, "score": 2, "last_activity_date": 1554276417, "creation_date": 1554213283, "last_edit_date": 1554217918, "question_id": 55476589, "link": "https://stackoverflow.com/questions/55476589/contents-of-array-a-changes-when-i-sort-array-b-which-is-supposed-to-be-a-dupli", "title": "Contents of array A changes when I sort array B, which is supposed to be a duplicate of A", "body": "<p>I have a 10x loop to sort an array of numbers <code>B</code>(copy of original array <code>A</code>) and record the run-time, since the array gets sorted at the end of a loop i created a duplicate array <code>B</code> to be changed and use <code>A</code> to set it to it's original state at the begin of a new loop.</p>\n\n<p>when it sorts <code>B</code>, <code>A</code> automatically gets sorted too even though i only send <code>B</code> .\nwhy does this happen and how to change it?</p>\n\n<p>loop:</p>\n\n<pre><code>for (i in 1..10) {\n        val B = A\n        val time = measureTimeMillis {\n                val sorting = Insertion(B); sorting.sor\n        }\n        println(\"\"+ cycle++ + \"\\t\" + time)\n}\n</code></pre>\n\n<p>sort:</p>\n\n<pre><code>class Insertion(var B: IntArray) {\n    fun sort(): Unit {\n        for( j in 1 until B.size){\n            var key = B[j]\n            var i = j-1\n            while( i &gt; -1 &amp;&amp; B[i] &gt; key){\n                B[i+1] = B[i]\n                i= i - 1\n            }\n            B[i+1] = key\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["java", "spring", "spring-boot", "gradle", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 103, "user_id": 2923681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29aefa5e00dc367e7ad93b8d1f096fb4?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/2923681/romen"}, "is_accepted": true, "score": 4, "last_activity_date": 1554213461, "creation_date": 1554213461, "answer_id": 55476648, "question_id": 55476522, "link": "https://stackoverflow.com/questions/55476522/how-to-use-a-java-main-class-on-a-kotlin-spring-project/55476648#55476648", "title": "How to use a Java main class on a Kotlin Spring Project?", "body": "<p>Have you tried using <code>mainClassName</code> property?</p>\n\n<p>Add this to your <code>build.gradle</code> file:</p>\n\n<pre><code>    mainClassName = \"com.my-package.my-another-package.MyMainClass\"\n</code></pre>\n\n<p>Also, make sure you apply <code>java</code> plugin:</p>\n\n<pre><code>    apply plugin: 'java'\n</code></pre>\n"}], "owner": {"reputation": 185, "user_id": 8075423, "user_type": "registered", "profile_image": "https://graph.facebook.com/1224502660993446/picture?type=large", "display_name": "Radoslav Hubenov", "link": "https://stackoverflow.com/users/8075423/radoslav-hubenov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 514, "favorite_count": 0, "accepted_answer_id": 55476648, "answer_count": 1, "score": 0, "last_activity_date": 1554213461, "creation_date": 1554213103, "question_id": 55476522, "link": "https://stackoverflow.com/questions/55476522/how-to-use-a-java-main-class-on-a-kotlin-spring-project", "title": "How to use a Java main class on a Kotlin Spring Project?", "body": "<p>Due to some circumstances I had to change the Kotlin main class in my Spring Boot project to Java. But when I build the project with Gradle i get an error:\n<code>Main class name has not been configured and it could not be resolved\n</code></p>\n\n<p>I fixed the building problem by setting <code>sourceSets.main.java.srcDirs = ['src']</code> as stated in <a href=\"https://stackoverflow.com/questions/24924932/gradle-could-not-find-or-load-main-class\">Gradle - Could not find or load main class</a> but this messes up some things locally(Can't see Kotlin package in IntelliJ which includes the whole source code).\nI suspect there is a better way to setup a Kotlin project with a Java main class. </p>\n\n<p>Thank you in advance</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 424, "user_id": 5767510, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d41eb551b1fc441710ee18d0ab252be4?s=128&d=identicon&r=PG&f=1", "display_name": "AshTyson", "link": "https://stackoverflow.com/users/5767510/ashtyson"}, "edited": false, "score": 0, "creation_date": 1554362648, "post_id": 55476410, "comment_id": 97725340, "body": "Why are you using KotlinJS and what are you trying to achieve which JavaScript is not accomplishing? If it&#39;s just because it getting hot in the community. then this might not be the right place to ask this question"}, {"owner": {"reputation": 1685, "user_id": 10512612, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-54XhkqmYEIo/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDZmaNhR610yi-CtiuzNW3HEqCCDA/mo/photo.jpg?sz=128", "display_name": "Mickael Belhassen", "link": "https://stackoverflow.com/users/10512612/mickael-belhassen"}, "reply_to_user": {"reputation": 424, "user_id": 5767510, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d41eb551b1fc441710ee18d0ab252be4?s=128&d=identicon&r=PG&f=1", "display_name": "AshTyson", "link": "https://stackoverflow.com/users/5767510/ashtyson"}, "edited": false, "score": 0, "creation_date": 1554368054, "post_id": 55476410, "comment_id": 97728497, "body": "I want to use kotlin js because I am iOS and Android developer, so get used to swift and kotlin. For me kotlin is a very powerful language and typed so I want to use it"}], "answers": [{"comments": [{"owner": {"reputation": 1685, "user_id": 10512612, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-54XhkqmYEIo/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDZmaNhR610yi-CtiuzNW3HEqCCDA/mo/photo.jpg?sz=128", "display_name": "Mickael Belhassen", "link": "https://stackoverflow.com/users/10512612/mickael-belhassen"}, "edited": false, "score": 0, "creation_date": 1554367952, "post_id": 55509152, "comment_id": 97728435, "body": "Do you want us to open a slack so we can discuss? And share our experiences?"}, {"owner": {"reputation": 69, "user_id": 10617736, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KgyulbfTSzI/AAAAAAAAAAI/AAAAAAAATlk/IJXlORq6ZJw/photo.jpg?sz=128", "display_name": "tomschrot", "link": "https://stackoverflow.com/users/10617736/tomschrot"}, "reply_to_user": {"reputation": 1685, "user_id": 10512612, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-54XhkqmYEIo/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDZmaNhR610yi-CtiuzNW3HEqCCDA/mo/photo.jpg?sz=128", "display_name": "Mickael Belhassen", "link": "https://stackoverflow.com/users/10512612/mickael-belhassen"}, "edited": false, "score": 0, "creation_date": 1554412906, "post_id": 55509152, "comment_id": 97754319, "body": "I use Google, how about that"}, {"owner": {"reputation": 1685, "user_id": 10512612, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-54XhkqmYEIo/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDZmaNhR610yi-CtiuzNW3HEqCCDA/mo/photo.jpg?sz=128", "display_name": "Mickael Belhassen", "link": "https://stackoverflow.com/users/10512612/mickael-belhassen"}, "edited": false, "score": 0, "creation_date": 1554577593, "post_id": 55509152, "comment_id": 97806226, "body": "send me email to emoonadev@gmail.com"}], "tags": [], "owner": {"reputation": 69, "user_id": 10617736, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KgyulbfTSzI/AAAAAAAAAAI/AAAAAAAATlk/IJXlORq6ZJw/photo.jpg?sz=128", "display_name": "tomschrot", "link": "https://stackoverflow.com/users/10617736/tomschrot"}, "is_accepted": false, "score": 0, "last_activity_date": 1554359079, "creation_date": 1554359079, "answer_id": 55509152, "question_id": 55476410, "link": "https://stackoverflow.com/questions/55476410/kotlin-js-search-complete-course/55509152#55509152", "title": "Kotlin JS: Search complete course", "body": "<p>Kotlin-JS (&amp; Native) are kind of Kotlin's stepchilds -ambitiously but somehow neglected...\nIm working on a SPA / PWA project for almost 2 years using Kotlin-JS and really find it hot and absolut usable. Ok,  there is Typescript that has an excellent infrastructure and bindings to all JS Frameworks. But, if you don't need many external frameworks (which always means external dependence!) you are perfect with Kotlin. It is so much more powerful than TS but the learning curve is quite steep.\nI would like to share my experiences with the community but due to scarce resources I can not do it allone. Maybe there will be a community to get things going...?\nFeel free to contact me for exchange experiences.</p>\n"}], "owner": {"reputation": 1685, "user_id": 10512612, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-54XhkqmYEIo/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDZmaNhR610yi-CtiuzNW3HEqCCDA/mo/photo.jpg?sz=128", "display_name": "Mickael Belhassen", "link": "https://stackoverflow.com/users/10512612/mickael-belhassen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1554359079, "creation_date": 1554212794, "question_id": 55476410, "link": "https://stackoverflow.com/questions/55476410/kotlin-js-search-complete-course", "title": "Kotlin JS: Search complete course", "body": "<p>after a lot of research on the internet I do not find a lot of tutorials on kotlin JS, and the few that there are are incomplete. Someone would have the link of a full stack course in Kotlin JS? Design pattern, front end, back end, ...</p>\n"}, {"tags": ["android", "unit-testing", "kotlin", "mockito", "junit4"], "comments": [{"owner": {"reputation": 21522, "user_id": 2202415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2hHKw.jpg?s=128&g=1", "display_name": "Maciej Kowalski", "link": "https://stackoverflow.com/users/2202415/maciej-kowalski"}, "edited": false, "score": 0, "creation_date": 1554210869, "post_id": 55475532, "comment_id": 97661820, "body": "checkout powermockito"}], "answers": [{"comments": [{"owner": {"reputation": 3253, "user_id": 1023670, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/c5e983546a165c1faf67298a5d6f29d8?s=128&d=identicon&r=PG", "display_name": "Kitesurfer", "link": "https://stackoverflow.com/users/1023670/kitesurfer"}, "edited": false, "score": 1, "creation_date": 1554220908, "post_id": 55475919, "comment_id": 97668230, "body": "Thanks for pointing me in the right direction. never seen internal open before so far. I was able to mock using a simple unit test class"}], "tags": [], "owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "is_accepted": true, "score": 2, "last_activity_date": 1554211423, "creation_date": 1554211423, "answer_id": 55475919, "question_id": 55475532, "link": "https://stackoverflow.com/questions/55475532/mocking-internal-classes-with-mockito/55475919#55475919", "title": "mocking internal classes with mockito", "body": "<p>The issue is not that the class is <code>internal</code> (it's equivalent to <code>public</code> within the same module) but rather that it's <code>final</code>. By default all classes in Kotlin are <code>final</code> unless you mark them with <code>open</code>.</p>\n\n<p>So if you want to mock your class you should mark it as <code>internal open class Xyz</code>.\nNote that there's a Maven/Gradle plugin that automatically opens all classes for you: <a href=\"https://kotlinlang.org/docs/reference/compiler-plugins.html#all-open-compiler-plugin\" rel=\"nofollow noreferrer\">all-open plugin</a>.</p>\n\n<p>For example, given the following Kotlin class:</p>\n\n<pre><code>internal open class Foo\n</code></pre>\n\n<p>The following unit test passes:</p>\n\n<pre><code>class FooTest {\n    @Test\n    fun shouldPass() {\n        Mockito.mock(Foo::class.java)\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 3253, "user_id": 1023670, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/c5e983546a165c1faf67298a5d6f29d8?s=128&d=identicon&r=PG", "display_name": "Kitesurfer", "link": "https://stackoverflow.com/users/1023670/kitesurfer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 894, "favorite_count": 0, "accepted_answer_id": 55475919, "answer_count": 1, "score": 0, "last_activity_date": 1554211423, "creation_date": 1554210216, "question_id": 55475532, "link": "https://stackoverflow.com/questions/55475532/mocking-internal-classes-with-mockito", "title": "mocking internal classes with mockito", "body": "<p>i have a class under Test which is marked as \"interal\"</p>\n\n<pre><code>internal class UnderTest{\n    fun methodToTest(){}\n}\n</code></pre>\n\n<p>In my JUnit Test i want test UnderTest \n    import com.nhaarman.mockito_kotlin.mock</p>\n\n<pre><code>class SimpleTest{\n    val mock = mock&lt;UnderTest&gt;()\n\n    @Test\n    fun test(){\n        assertThat(....)\n    } \n}\n</code></pre>\n\n<p>And here it gets a bit strange, as Android Studio complains first that UnderTest is not visible \"public property exposes it's private type\". Thats because UnderTest is marked as internal.</p>\n\n<p>I changed the Test itself to be internal, which results that the compiler is happy again:</p>\n\n<pre><code>import com.nhaarman.mockito_kotlin.mock\n\ninternal class SimpleTest{\n    val mock = mock&lt;UnderTest&gt;()\n\n    @Test\n    fun test(){\n        assertThat(....)\n    } \n}\n</code></pre>\n\n<p>Running this test results in an mockito exception like in the old mockito versions</p>\n\n<pre><code>Cannot mock/spy class com.name.UnderTest\nMockito cannot mock/spy because :\n- final class\n</code></pre>\n\n<p>I want to write Unit Test for those internal classes, but how without removing the internal modifier from UnderTest class ?</p>\n\n<p>Thanks </p>\n"}, {"tags": ["android", "kotlin", "android-animation", "android-recyclerview"], "answers": [{"tags": [], "owner": {"reputation": 103, "user_id": 11188481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32f56de486ed7f1915f0ae953c5717b7?s=128&d=identicon&r=PG&f=1", "display_name": "faure", "link": "https://stackoverflow.com/users/11188481/faure"}, "is_accepted": false, "score": 0, "last_activity_date": 1555142726, "last_edit_date": 1555142726, "creation_date": 1554977045, "answer_id": 55629861, "question_id": 55475200, "link": "https://stackoverflow.com/questions/55475200/function-to-animate-an-imageview-in-a-recyclerview/55629861#55629861", "title": "Function to animate an ImageView in a RecyclerView", "body": "<p>It looks like nobody is interested by what is possible to do with RecyclerViews...</p>\n\n<p>I still have the problem that when an imageView is clicked, this is the one at left which is totating ! i can't understand what happens, examination in debugger shows the variables are ok, the idex is position and do not change...</p>\n\n<p>I tried to apply rotate function to the cardView, same result !</p>\n\n<p>I modified the code in the function and replace the flagCard by iflagCard if rotation was done (because two flags, one up, one down, and of course the FlagCard is different... )</p>\n\n<p>Here the new code :</p>\n\n<pre><code>if (irotationpossible)\n    {\n        iflagcardView.animate().apply {\n            rotationBy(180f)\n            duration = 1000L\n            start()\n            // permutation of values north south\n            var flagtrigramdownlist :List&lt;String&gt; = flagcountrylist.map{it.flagtrigramdown}\n            var iflagtrigramdown : String = flagtrigramdownlist[position]\n            var flagtempup: String = iflagtrigramup\n            var flagtempdown: String = iflagtrigramdown\n            iflagtrigramup = iflagsouth\n            iflagsouth = flagtempup\n            iflagtrigramdown = flagtempup\n\n            var iflagCard = FlagCard( iflagtrigramup, iflagtrigramdown, iflagimage, iflagsouth, irotationpossible )\n            //flagcountrylist.toSet(position, iflagCard)\n            //abstract operator fun set(position: Int, iflagCard: FlagCard): FlagCard\n            flagcountrylist.removeAt(position)\n            flagcountrylist.add(position, iflagCard)\n            return iflagCard\n        }\n    } else {\n        return flagCard\n        //Toast.makeText(this, \"flag already matched country\", Toast.LENGTH_LONG).show()\n    }\n</code></pre>\n\n<p>my question is now about the set function for mutableListOf in Kotlin :\ni tried to use \"  abstract operator fun set(index: Int, element: E): E  \"\nbut couldn't build because of abstract ! </p>\n\n<p>Is there any other way than my solution to remove then add at the same index ?</p>\n\n<p>Is there any experimented developper curious about the strange rotation in that app ?\n<a href=\"https://www.youtube.com/watch?v=d9o7fttLBxk\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=d9o7fttLBxk</a></p>\n\n<p>Why not the image with right index ?</p>\n"}], "owner": {"reputation": 103, "user_id": 11188481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32f56de486ed7f1915f0ae953c5717b7?s=128&d=identicon&r=PG&f=1", "display_name": "faure", "link": "https://stackoverflow.com/users/11188481/faure"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 177, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1555142726, "creation_date": 1554209283, "last_edit_date": 1554636091, "question_id": 55475200, "link": "https://stackoverflow.com/questions/55475200/function-to-animate-an-imageview-in-a-recyclerview", "title": "Function to animate an ImageView in a RecyclerView", "body": "<p>To forward my application, i need a function that will rotate an imageView in a recyclerView.\nThe recyclerView is one of 3 recyclerviews that are already working well, and are clickable through a cardView.\nshortvideo there:</p>\n\n<p><a href=\"https://mega.nz/#!W6AyAYaY!07WG8kr_POYiGsgt0yja6fk8RaclZLw2-MiMFrmEQmk\" rel=\"nofollow noreferrer\">https://mega.nz/#!W6AyAYaY!07WG8kr_POYiGsgt0yja6fk8RaclZLw2-MiMFrmEQmk</a></p>\n\n<p>I created Classes with a few members, which permit to know the state of the objects.</p>\n\n<p>I am newbie in Android programmation, and it was difficult for me to make these recyclerView working well :-)</p>\n\n<p>7 April : i finally succeeded to implement my function\nbut the result is weird !\ncan see there :\n<a href=\"https://mega.nz/#!DzI2iaiB!VBG9Ex4TZlAsoUYPSRhXXMP4weH-9hXyjbqF1nCRyeA\" rel=\"nofollow noreferrer\">https://mega.nz/#!DzI2iaiB!VBG9Ex4TZlAsoUYPSRhXXMP4weH-9hXyjbqF1nCRyeA</a></p>\n\n<p>There is an imageView which is rotating, but this is the left one, not the clicked one, and there is a mix, a swap between pictures.</p>\n\n<p>My question is : are the imageViews clickable and focusable like cardViews ?\nif so i can try to make the imageView focusable and clickable (actually the cardView is... )\nWhat about the index is recyclerViews ? isn't it the cardview which is clicked which has the index ? or the left one in the screen ?\nI am puzzled :-)</p>\n\n<p>Following: the layout with CardView and imageView; MainActivity where i tried to write the function; and the Adapter for the Top RecyclerView where the function is supposed to\nrotate (180 \u00b0) the imageView at the index ( index, tag and position )</p>\n\n<pre><code> no change about that xml file    \n&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n\n&lt;RelativeLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"match_parent\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"&gt;\n  &lt;androidx.cardview.widget.CardView\n        android:id=\"@+id/flag_card_view\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"match_parent\"\n        android:focusable=\"true\"\n        android:clickable=\"true\"\n        android:foreground=\"?android:attr/selectableItemBackground\"&gt;\n    &lt;androidx.constraintlayout.widget.ConstraintLayout\n            xmlns:android=\"http://schemas.android.com/apk/res/android\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"match_parent\"\n\n            xmlns:app=\"http://schemas.android.com/apk/res-auto\"&gt;\n\n&lt;ImageView\n        android:id=\"@+id/flagcountry\"\n        android:layout_width=\"0dp\"\n        android:layout_height=\"match_parent\"\n        app:layout_constraintDimensionRatio=\"W,55:100\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\"\n        android:layout_marginLeft=\"2dp\"/&gt;\n\n&lt;TextView\n        android:id=\"@+id/flagname\"\n        android:layout_width=\"6dp\"\n        android:layout_height=\"match_parent\"\n        app:layout_constraintLeft_toRightOf=\"@id/flagcountry\"\n        android:layout_centerVertical=\"true\"/&gt;\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n   &lt;/androidx.cardview.widget.CardView&gt;\n   &lt;/RelativeLayout&gt;\n</code></pre>\n\n<hr>\n\n<pre><code> under new kt file\n   package training.geography.triplerecyclerview\n\n    import android.provider.Settings.Global.getString\n    import android.view.LayoutInflater\n    import android.view.View\n    import android.view.ViewGroup\n    import android.widget.ImageView\n    import android.widget.TextView\n    import androidx.cardview.widget.CardView\n    import androidx.recyclerview.widget.RecyclerView\n\n   class FlagAdapter(val flagcountrylist: List&lt;FlagCard&gt;,\n              val flagitemClickListener : View.OnClickListener\n              //val flagitemOnLongClickListener : View.OnLongClickListener\n):\nRecyclerView.Adapter&lt;FlagAdapter.FlagViewHolder&gt; () {\nclass FlagViewHolder(flagView: View) : RecyclerView.ViewHolder(flagView) {\n    val flagcardView = flagView.findViewById&lt;CardView&gt;(R.id.flag_card_view)\n    val flagcountry = flagView.findViewById&lt;ImageView&gt;(R.id.flagcountry)\n    val flagname = flagView.findViewById&lt;TextView&gt;(R.id.flagname)\n}\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int):\n    FlagViewHolder {\n    val inflater = LayoutInflater.from(parent.context)\n    val viewItem = inflater.inflate(R.layout.item_flag, parent, false)\n    return FlagViewHolder(viewItem)\n}\n\noverride fun onBindViewHolder(flagholder: FlagViewHolder, position: Int) {\n    //val flagcountry: String = flagcountrylist.FlagCard.flagimage[position]\n    //var flagimageList: List&lt;String&gt; = flagcountrylist.map { it.flagimage }\n    var flagsouthList: List&lt;String&gt; = flagcountrylist.map { it.flagsouth }\n    var iflagsouth = flagsouthList[position]\n    flagholder.flagname.text = iflagsouth\n    flagholder.flagcardView.tag = position\n    flagholder.flagcardView.setOnClickListener(flagitemClickListener)\n    //flagholder.flagcardView.setOnLongClickListener(itemOnLongClickListener)\n\n    when (position){\n        0 -&gt; flagholder.flagcountry.setImageResource(R.drawable.afgcol)\n        1 -&gt; flagholder.flagcountry.setImageResource(R.drawable.argsvk)\n        2 -&gt; flagholder.flagcountry.setImageResource(R.drawable.armche)\n        3 -&gt; flagholder.flagcountry.setImageResource(R.drawable.auttgo)\n        4 -&gt; flagholder.flagcountry.setImageResource(R.drawable.azepry)\n        5 -&gt; flagholder.flagcountry.setImageResource(R.drawable.bhrtur)\n        6 -&gt; flagholder.flagcountry.setImageResource(R.drawable.bratls)\n        7 -&gt; flagholder.flagcountry.setImageResource(R.drawable.bwasur)\n        8 -&gt; flagholder.flagcountry.setImageResource(R.drawable.cafbtn)\n        9 -&gt; flagholder.flagcountry.setImageResource(R.drawable.critun)\n        10 -&gt; flagholder.flagcountry.setImageResource(R.drawable.pandza)\n        11 -&gt; flagholder.flagcountry.setImageResource(R.drawable.persau)\n        12 -&gt; flagholder.flagcountry.setImageResource(R.drawable.svnago)\n        13 -&gt; flagholder.flagcountry.setImageResource(R.drawable.sweben)\n        14 -&gt; flagholder.flagcountry.setImageResource(R.drawable.tcdgbr)\n        15 -&gt; flagholder.flagcountry.setImageResource(R.drawable.thabol)\n        16 -&gt; flagholder.flagcountry.setImageResource(R.drawable.tjkdeu)\n        17 -&gt; flagholder.flagcountry.setImageResource(R.drawable.tkmbel)\n        18 -&gt; flagholder.flagcountry.setImageResource(R.drawable.tzablz)\n        19 -&gt; flagholder.flagcountry.setImageResource(R.drawable.ukrcmr)\n        20 -&gt; flagholder.flagcountry.setImageResource(R.drawable.uryblr)\n        21 -&gt; flagholder.flagcountry.setImageResource(R.drawable.venbgd)\n        22 -&gt; flagholder.flagcountry.setImageResource(R.drawable.vnmbfa)\n        23 -&gt; flagholder.flagcountry.setImageResource(R.drawable.yembih)\n        24 -&gt; flagholder.flagcountry.setImageResource(R.drawable.zmbchl)\n        25 -&gt; flagholder.flagcountry.setImageResource(R.drawable.zwealb)\n    }\n    //var iflagcard:String  = imagelist[position]\n //holder.flagcountry.setImageResource(iflagcard)\n}\n\noverride fun getItemCount(): Int {\n        return flagcountrylist.size\n    }\n}\n\n\n---------------------------------------\n //under new MainActivity file with function modified\n // i don't know what to do with the variable \n // flagtempup, i use it to set the string in \n // iflagtrigramdown, and i have te warning variable not used...\n\n\n package training.geography.triplerecyclerview\n\n import android.nfc.Tag\n import android.os.Bundle\n import android.view.View\n import android.view.View.OnClickListener\n import android.view.animation.Animation\n import android.view.animation.RotateAnimation\n import android.widget.ImageView\n import android.widget.Toast\n import androidx.appcompat.app.AppCompatActivity\n import androidx.cardview.widget.CardView\n import androidx.recyclerview.widget.LinearLayoutManager\n import androidx.recyclerview.widget.RecyclerView\n import kotlinx.android.synthetic.main.item_flag.*\n\n data class FlagCard(var flagtrigramup: String, var flagtrigramdown: String,\n                    var flagimage: String, var flagsouth: String, var  rotationpossible: Boolean=(true))\n\n  data class CountryCard(val countrytrigram: String, val description: String)\n\n  data class MapCard(var map_left_up: String,\n               var map_right_up: String,\n               var map_left_down: String,\n               var map_right_down: String,\n               var maps_img: String,\n               var mapnorth: String)\n\n\n  class MainActivity : AppCompatActivity(), OnClickListener {\n\n\nvar afg_col = FlagCard(\"col\", \"afg\", \"afgcol\", \"afg\", true)\nvar arg_svk = FlagCard(\"arg\", \"svk\", \"argsvk\", \"svk\", true)\nvar arm_che = FlagCard(\"che\", \"arm\", \"armche\", \"arm\", true)\nvar aut_tgo = FlagCard(\"tgo\", \"aut\", \"auttgo\", \"aut\", true)\nvar aze_pry = FlagCard(\"aze\", \"pry\", \"azepry\", \"pry\", true)\nvar bhr_tur = FlagCard(\"tur\", \"bhr\", \"bhrtur\", \"bhr\", true)\nvar bra_tls = FlagCard(\"tls\", \"bra\", \"bratls\", \"bra\", true)\nvar bwa_sur = FlagCard(\"sur\", \"bwa\", \"bwasur\", \"bwa\", true)\nvar caf_btn = FlagCard(\"btn\", \"caf\", \"cafbtn\", \"caf\", true)\nvar cri_tun = FlagCard(\"cri\", \"tun\", \"critun\", \"tun\", true)\nvar pan_dza = FlagCard(\"pan\", \"dza\", \"pandza\", \"dza\", true)\nvar per_sau = FlagCard(\"per\", \"sau\", \"persau\", \"sau\", true)\nvar svn_ago = FlagCard(\"svn\", \"ago\", \"svnago\", \"ago\", true)\nvar swe_ben = FlagCard(\"swe\", \"ben\", \"sweben\", \"ben\", true)\nvar tcd_gbr = FlagCard(\"tcd\", \"gbr\", \"tcdgbr\", \"gbr\", true)\nvar tha_bol = FlagCard(\"tha\", \"bol\", \"thabol\", \"bol\", true)\nvar tjk_deu = FlagCard(\"tjk\", \"deu\", \"tjkdeu\", \"deu\", true)\nvar tkm_bel = FlagCard(\"tkm\", \"bel\", \"tkmbel\", \"bel\", true)\nvar tza_blz = FlagCard(\"tza\", \"blz\", \"tzablz\", \"blz\", true)\nvar ukr_cmr = FlagCard(\"ukr\", \"cmr\", \"ukrcmr\", \"cmr\", true)\nvar ury_blr = FlagCard(\"ury\", \"blr\", \"uryblr\", \"blr\", true)\nvar ven_bgd = FlagCard(\"ven\", \"bgd\", \"venbgd\", \"bgd\", true)\nvar vnm_bfa = FlagCard(\"vnm\", \"bfa\", \"vnmbfa\", \"bfa\", true)\nvar yem_bih = FlagCard(\"yem\", \"bih\", \"yembih\", \"bih\", true)\nvar zmb_chl = FlagCard(\"zmb\", \"chl\", \"zmbchl\", \"chl\", true)\nvar zwe_alb = FlagCard(\"zwe\", \"alb\", \"zwealb\", \"alb\", true)\n\nvar afg = CountryCard(\"afg\", \"afg\")\nvar ago = CountryCard(\"ago\", \"ago\")\nvar alb = CountryCard(\"alb\", \"alb\")\nvar arg = CountryCard(\"arg\", \"arg\")\nvar arm = CountryCard(\"arm\", \"arm\")\nvar aut = CountryCard(\"aut\", \"aut\")\nvar aze = CountryCard(\"aze\", \"aze\")\nvar bel = CountryCard(\"bel\", \"bel\")\nvar bfa = CountryCard(\"bfa\", \"bfa\")\nvar bhr = CountryCard(\"bhr\", \"bhr\")\nvar bih = CountryCard(\"bih\", \"bih\")\nvar blz = CountryCard(\"blz\", \"blz\")\nvar bol = CountryCard(\"bol\", \"bol\")\nvar bra = CountryCard(\"bra\", \"bra\")\nvar btn = CountryCard(\"btn\", \"btn\")\nvar bwa = CountryCard(\"bwa\", \"bwa\")\nvar caf = CountryCard(\"caf\", \"caf\")\nvar che = CountryCard(\"che\", \"che\")\nvar chl = CountryCard(\"chl\", \"chl\")\nvar cmr = CountryCard(\"cmr\", \"cmr\")\nvar col = CountryCard(\"col\", \"col\")\nvar cri = CountryCard(\"cri\", \"cri\")\nvar deu = CountryCard(\"deu\", \"deu\")\nvar gbr = CountryCard(\"gbr\", \"gbr\")\nvar pan = CountryCard(\"pan\", \"pan\")\nvar per = CountryCard(\"per\", \"per\")\nvar pry = CountryCard(\"pry\", \"pry\")\nvar sau = CountryCard(\"sau\", \"sau\")\nvar sur = CountryCard(\"sur\", \"sur\")\nvar svk = CountryCard(\"svk\", \"svk\")\nvar svn = CountryCard(\"svn\", \"svn\")\nvar swe = CountryCard(\"swe\", \"swe\")\nvar tcd = CountryCard(\"tcd\", \"tcd\")\nvar tgo = CountryCard(\"tgo\", \"tgo\")\nvar tha = CountryCard(\"tha\", \"tha\")\nvar tjk = CountryCard(\"tjk\", \"tjk\")\nvar tkm = CountryCard(\"tkm\", \"tkm\")\nvar tls = CountryCard(\"tls\", \"tls\")\nvar tun = CountryCard(\"tun\", \"tun\")\nvar tur = CountryCard(\"tur\", \"tur\")\nvar tza = CountryCard(\"tza\", \"tza\")\nvar ukr = CountryCard(\"ukr\", \"ukr\")\nvar ury = CountryCard(\"ury\", \"ury\")\nvar ven = CountryCard(\"ven\", \"ven\")\nvar vnm = CountryCard(\"vnm\", \"vnm\")\nvar yem = CountryCard(\"yem\", \"yem\")\nvar zmb = CountryCard(\"zmb\", \"zmb\")\nvar zwe = CountryCard(\"zwe\", \"zwe\")\n\nvar arm_bol_gbr_ago = MapCard(\"arm\", \"bol\", \"gbr\", \"ago\", \"bol\", \"armbolgbrago\")\nvar aze_bra_aut_ben = MapCard(\"aze\", \"bra\", \"aut\", \"ben\", \"bra\", \"azebraautben\")\nvar bfa_blr_col_bgd = MapCard(\"bfa\", \"blr\", \"col\", \"bgd\", \"blr\", \"bfablrcolbgd\")\nvar bwa_bel_bhr_chl = MapCard(\"bwa\", \"bel\", \"bhr\", \"chl\", \"bel\", \"bwabelbhrchl\")\nvar caf_afg_alb_arg = MapCard(\"caf\", \"afg\", \"alb\", \"arg\", \"afg\", \"cafafgalbarg\")\nvar che_tkm_tur_sur = MapCard(\"che\", \"tkm\", \"tur\", \"sur\", \"tkm\", \"chetkmtursur\")\nvar cri_cmr_btn_bih = MapCard(\"cri\", \"cmr\", \"btn\", \"bih\", \"cmr\", \"cricmrbtnbih\")\nvar sau_blz_deu_dza = MapCard(\"sau\", \"blz\", \"deu\", \"dza\", \"blz\", \"saublzdeudza\")\nvar svn_tha_tcd_pry = MapCard(\"svn\", \"tha\", \"tcd\", \"pry\", \"tha\", \"svnthatcdpry\")\nvar swe_tls_tgo_per = MapCard(\"swe\", \"tls\", \"tgo\", \"per\", \"tls\", \"swetlstgoper\")\nvar tjk_pan_svk_tza = MapCard(\"tjk\", \"pan\", \"svk\", \"tza\", \"pan\", \"tjkpansvktza\")\nvar ven_zwl_yem_ukr = MapCard(\"ven\", \"zwl\", \"yem\", \"ukr\", \"zwl\", \"venzwlyemukr\")\nvar zmb_tur_ury_vnm = MapCard(\"zmb\", \"tur\", \"ury\", \"vnm\", \"tur\", \"zmbtururyvnm\")\n\n\nvar flagcountrylist = listOf&lt;FlagCard&gt;(\n    afg_col,\n    arg_svk,\n    arm_che,\n    aut_tgo,\n    aze_pry,\n    bhr_tur,\n    bra_tls,\n    bwa_sur,\n    caf_btn,\n    cri_tun,\n    pan_dza,\n    per_sau,\n    svn_ago,\n    swe_ben,\n    tcd_gbr,\n    tha_bol,\n    tjk_deu,\n    tkm_bel,\n    tza_blz,\n    ukr_cmr,\n    ury_blr,\n    ven_bgd,\n    vnm_bfa,\n    yem_bih,\n    zmb_chl,\n    zwe_alb\n)\n\n\nval flagadapter = FlagAdapter(flagcountrylist, this)\n\n\nvar countryList = listOf&lt;CountryCard&gt;(\n    afg,\n    ago,\n    alb,\n    arg,\n    arm,\n    aut,\n    aze,\n    bel,\n    bfa,\n    bhr,\n    bih,\n    blz,\n    blz,\n    bol,\n    bra,\n    btn,\n    bwa,\n    caf,\n    che,\n    chl,\n    cmr,\n    col,\n    cri,\n    deu,\n    gbr,\n    pan,\n    per,\n    pry,\n    sau,\n    sur,\n    svk,\n    svn,\n    swe,\n    tcd,\n    tgo,\n    tha,\n    tjk,\n    tkm,\n    tls,\n    tun,\n    tur,\n    tza,\n    ukr,\n    ury,\n    ven,\n    vnm,\n    yem,\n    zmb,\n    zwe\n)\nval countryadapter = CountryAdapter(countryList)\n\n\nvar mapcountrylist = listOf&lt;MapCard&gt;(\n    arm_bol_gbr_ago,\n    aze_bra_aut_ben,\n    bfa_blr_col_bgd,\n    bwa_bel_bhr_chl,\n    caf_afg_alb_arg,\n    che_tkm_tur_sur,\n    cri_cmr_btn_bih,\n    sau_blz_deu_dza,\n    svn_tha_tcd_pry,\n    swe_tls_tgo_per,\n    tjk_pan_svk_tza,\n    ven_zwl_yem_ukr,\n    zmb_tur_ury_vnm\n)\nval mapadapter = MapAdapter(mapcountrylist)\n\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main)\n\n    val flagsrecyclerView = findViewById&lt;RecyclerView&gt;(R.id.flagsRecyclerView)\n    flagsrecyclerView.layoutManager = LinearLayoutManager(this, RecyclerView.HORIZONTAL, false)\n    flagsrecyclerView.adapter = flagadapter\n\n\n    val countryrecyclerView = findViewById&lt;RecyclerView&gt;(R.id.countriesRecyclerView)\n    countryrecyclerView.layoutManager = LinearLayoutManager(this, RecyclerView.HORIZONTAL, false)\n    countryrecyclerView.adapter = countryadapter\n\n\n    val maprecyclerView = findViewById&lt;RecyclerView&gt;(R.id.mapsRecyclerView)\n    maprecyclerView.layoutManager = LinearLayoutManager(this, RecyclerView.HORIZONTAL, false)\n    maprecyclerView.adapter = mapadapter\n\n}\n\n  fun rotateFlagCard (flagCard: FlagCard, position: Int) : FlagCard {\n\n    var flagtrigramuplist: List&lt;String&gt; = flagcountrylist.map{it.flagtrigramup }\n    var iflagtrigramup : String = flagtrigramuplist[position]\n\n    var flagimagelist = flagcountrylist.map{it.flagimage}\n    var iflagimage = flagimagelist[position]\n    var flagsouthlist = flagcountrylist.map { it.flagsouth }\n    var iflagsouth = flagsouthlist[position]\n    var rotationpossiblelist : List&lt;Boolean&gt; = flagcountrylist.map{ it.rotationpossible }\n    var irotationpossible = rotationpossiblelist[position]\n    var iflagimageView = findViewById&lt;ImageView&gt;(R.id.flagcountry)\n\n    when (position) {\n        0 -&gt;  iflagimageView.setImageResource(R.drawable.afgcol)\n        1 -&gt;  iflagimageView.setImageResource(R.drawable.argsvk)\n        2 -&gt; iflagimageView.setImageResource(R.drawable.armche)\n        3 -&gt;  iflagimageView.setImageResource(R.drawable.auttgo)\n        4 -&gt; iflagimageView.setImageResource(R.drawable.azepry)\n        5 -&gt;  iflagimageView.setImageResource(R.drawable.bhrtur)\n        6 -&gt;  iflagimageView.setImageResource(R.drawable.bratls)\n        7 -&gt;  iflagimageView.setImageResource(R.drawable.bwasur)\n        8 -&gt;  iflagimageView.setImageResource(R.drawable.cafbtn)\n        9 -&gt;  iflagimageView.setImageResource(R.drawable.critun)\n        10 -&gt;  iflagimageView.setImageResource(R.drawable.pandza)\n        11 -&gt;  iflagimageView.setImageResource(R.drawable.persau)\n        12 -&gt;  iflagimageView.setImageResource(R.drawable.svnago)\n        13 -&gt;  iflagimageView.setImageResource(R.drawable.sweben)\n        14 -&gt;  iflagimageView.setImageResource(R.drawable.tcdgbr)\n        15 -&gt;  iflagimageView.setImageResource(R.drawable.thabol)\n        16 -&gt;  iflagimageView.setImageResource(R.drawable.tjkdeu)\n        17 -&gt;  iflagimageView.setImageResource(R.drawable.tkmbel)\n        18 -&gt;  iflagimageView.setImageResource(R.drawable.tzablz)\n        19 -&gt;  iflagimageView.setImageResource(R.drawable.ukrcmr)\n        20 -&gt;  iflagimageView.setImageResource(R.drawable.uryblr)\n        21 -&gt;  iflagimageView.setImageResource(R.drawable.venbgd)\n        22 -&gt;  iflagimageView.setImageResource(R.drawable.vnmbfa)\n        23 -&gt;  iflagimageView.setImageResource(R.drawable.yembih)\n        24 -&gt;  iflagimageView.setImageResource(R.drawable.zmbchl)\n        25 -&gt;  iflagimageView.setImageResource(R.drawable.zwealb)\n        else -&gt; throw AssertionError()\n    }\n\n    if (irotationpossible)\n        {\n        iflagimageView.animate().apply {\n            rotationBy(180f)\n            duration = 1000L\n            start()\n          // permutation of values north south\n            var flagtrigramdownlist :List&lt;String&gt; = flagcountrylist.map{it.flagtrigramdown}\n            var iflagtrigramdown : String = flagtrigramdownlist[position]\n        var flagtempup: String = iflagtrigramup\n            var flagtempdown: String = iflagtrigramdown\n        iflagtrigramup = iflagsouth\n        //flagtempdown = flagtempup\n            iflagtrigramdown = flagtempup\n\n        var iflagCard = FlagCard( iflagtrigramup, iflagtrigramdown, iflagimage, iflagsouth, irotationpossible )\n            return iflagCard\n        }\n    } else {\n        return flagCard\n        //Toast.makeText(this, \"flag already matched country\", Toast.LENGTH_LONG).show()\n    }\n}\n\n\n    override fun onClick(flagcardView: View) {\n    if (flagcardView.tag != null) {\n        val index = flagcardView.tag as Int\n        var flagsouthList: List&lt;String&gt; = flagcountrylist.map{it.flagsouth }\n        val flags = flagsouthList[index]\n        Toast.makeText(this, \"country : ${flags}\", Toast.LENGTH_LONG).show()\n        var flagcard:FlagCard = flagcountrylist[index]\n        rotateFlagCard (flagcard, index)\n\n    }\n   }\n\n   }\n</code></pre>\n"}, {"tags": ["android", "kotlin", "okhttp3"], "comments": [{"owner": {"reputation": 5219, "user_id": 4562287, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-q6oUlSeB8Xo/AAAAAAAAAAI/AAAAAAAAAFg/NB15_H7Q0eo/photo.jpg?sz=128", "display_name": "Vivek Mishra", "link": "https://stackoverflow.com/users/4562287/vivek-mishra"}, "edited": false, "score": 0, "creation_date": 1554206854, "post_id": 55474295, "comment_id": 97659240, "body": "Is your error in request or in response ?"}, {"owner": {"reputation": 11, "user_id": 11285893, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4tXMfmfbUk4/AAAAAAAAAAI/AAAAAAAAAoQ/4Nj468FKW8c/photo.jpg?sz=128", "display_name": "Martin D&#233;clert", "link": "https://stackoverflow.com/users/11285893/martin-d%c3%a9clert"}, "reply_to_user": {"reputation": 5219, "user_id": 4562287, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-q6oUlSeB8Xo/AAAAAAAAAAI/AAAAAAAAAFg/NB15_H7Q0eo/photo.jpg?sz=128", "display_name": "Vivek Mishra", "link": "https://stackoverflow.com/users/4562287/vivek-mishra"}, "edited": false, "score": 0, "creation_date": 1554207171, "post_id": 55474295, "comment_id": 97659429, "body": "@VivekMishra I guess it is in response but I am not sure... how can I know that ?"}, {"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1554222244, "post_id": 55474295, "comment_id": 97668962, "body": "The exception is caused by <code>JSONObject(jsonData)</code> because <code>jsonData</code> is an empty string (the exception is &quot;end of input at character 0). Did you check whether the server responds with a JSON (e.g., via Postman or another external tool)?"}, {"owner": {"reputation": 11, "user_id": 11285893, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4tXMfmfbUk4/AAAAAAAAAAI/AAAAAAAAAoQ/4Nj468FKW8c/photo.jpg?sz=128", "display_name": "Martin D&#233;clert", "link": "https://stackoverflow.com/users/11285893/martin-d%c3%a9clert"}, "reply_to_user": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 1, "creation_date": 1554278494, "post_id": 55474295, "comment_id": 97687596, "body": "@user2340612 Hi, yes I tried with Postman and it worked. I found the solution : I just forgot to parse my response with Gson in the loginAction() method"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 11285893, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4tXMfmfbUk4/AAAAAAAAAAI/AAAAAAAAAoQ/4Nj468FKW8c/photo.jpg?sz=128", "display_name": "Martin D&#233;clert", "link": "https://stackoverflow.com/users/11285893/martin-d%c3%a9clert"}, "is_accepted": false, "score": 0, "last_activity_date": 1554278561, "creation_date": 1554278561, "answer_id": 55489996, "question_id": 55474295, "link": "https://stackoverflow.com/questions/55474295/problem-while-trying-to-call-my-api-androidruntime-fatal-exception-okhttp-di/55489996#55489996", "title": "problem while trying to call my API - AndroidRuntime: FATAL EXCEPTION: OkHttp Dispatcher", "body": "<p>I found the response : I just forgot to parse the response into json using Gson in loginAction() method</p>\n\n<pre><code>private fun loginAction(user: String)\n    {\n        UserService.userLogin(user, {\n            response -&gt;\n            val token = response.header(\"x-auth\")\n            val userData = Gson().fromJson(response.body()!!.string(), User::class.java)\n            createUserSession(baseContext, userData, token)\n\n            this.openHomeActivity()\n        },\n        {\n            error -&gt;\n            Log.d(\"ERROR\", error.toString())\n        })\n    }\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11285893, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4tXMfmfbUk4/AAAAAAAAAAI/AAAAAAAAAoQ/4Nj468FKW8c/photo.jpg?sz=128", "display_name": "Martin D&#233;clert", "link": "https://stackoverflow.com/users/11285893/martin-d%c3%a9clert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 245, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1554278561, "creation_date": 1554206470, "last_edit_date": 1554216291, "question_id": 55474295, "link": "https://stackoverflow.com/questions/55474295/problem-while-trying-to-call-my-api-androidruntime-fatal-exception-okhttp-di", "title": "problem while trying to call my API - AndroidRuntime: FATAL EXCEPTION: OkHttp Dispatcher", "body": "<p>I found the response :\nI just forgot to parse the response into json using Gson in loginAction() method</p>\n\n<pre><code>private fun loginAction(user: String)\n    {\n        UserService.userLogin(user, {\n            response -&gt;\n            val token = response.header(\"x-auth\")\n            val userData = Gson().fromJson(response.body()!!.string(), User::class.java)\n            createUserSession(baseContext, userData, token)\n\n            this.openHomeActivity()\n        },\n        {\n            error -&gt;\n            Log.d(\"ERROR\", error.toString())\n        })\n    }\n</code></pre>\n\n<p>I am trying to add a login activity to my mobile application, using an external API to check email and password.\nI use OkHttp 3.14.0 to connect to the API, but I am getting that error when I try to connect my user :</p>\n\n<pre><code>2019-04-02 13:37:10.630 5118-5176/fr.myapp.firstapp E/AndroidRuntime: FATAL EXCEPTION: OkHttp Dispatcher\n    Process: fr.myapp.firstapp, PID: 5118\n    java.lang.Error: org.json.JSONException: End of input at character 0 of \n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1173)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641)\n        at java.lang.Thread.run(Thread.java:764)\n     Caused by: org.json.JSONException: End of input at character 0 of \n        at org.json.JSONTokener.syntaxError(JSONTokener.java:449)\n        at org.json.JSONTokener.nextValue(JSONTokener.java:97)\n        at org.json.JSONObject.&lt;init&gt;(JSONObject.java:159)\n        at org.json.JSONObject.&lt;init&gt;(JSONObject.java:176)\n        at fr.myapp.firstapp.LoginActivity$loginAction$1.invoke(LoginActivity.kt:44)\n        at fr.myapp.firstapp.LoginActivity$loginAction$1.invoke(LoginActivity.kt:15)\n        at fr.myapp.firstapp.network.UserService$Companion$userLogin$1.onResponse(UserService.kt:21)\n        at okhttp3.RealCall$AsyncCall.execute(RealCall.java:174)\n        at okhttp3.internal.NamedRunnable.run(NamedRunnable.java:32)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641)\u00a0\n        at java.lang.Thread.run(Thread.java:764)\u00a0\n</code></pre>\n\n<p>here is my login activity :</p>\n\n<pre><code>class LoginActivity : AppCompatActivity() {\n\n    lateinit var usernameInput: EditText\n    lateinit var passwordInput: EditText\n    lateinit var loginBtn: Button\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.login_activity)\n\n        this.usernameInput = findViewById(R.id.login_username_input)\n        this.passwordInput = findViewById(R.id.login_password_input)\n        this.loginBtn = findViewById(R.id.login_action_btn)\n\n        loginBtn.setOnClickListener { this.loginAction(this.loginInfo()) }\n    }\n\n    private fun openHomeActivity()\n    {\n        val intent = Intent(this, HomeActivity::class.java)\n        startActivity(intent)\n        finish()\n    }\n\n    private fun loginAction(user: String)\n    {\n        UserService.userLogin(user, {\n            response -&gt;\n            val jsonData: String = response.body()!!.string()\n            val userObj = JSONObject(jsonData)\n\n            createUserSession(this, userObj)\n            this.openHomeActivity()\n        },\n        {\n            error -&gt;\n            Log.d(\"ERROR\", error.toString())\n        })\n    }\n\n    private fun loginInfo(): String\n    {\n        val username: String = this.usernameInput.text.toString()\n        val password: String = this.passwordInput.text.toString().sha512()\n        val data = JSONObject()\n            .put(\"username\", username)\n            .put(\"password\", password)\n\n        return data.toString()\n    }\n}\n</code></pre>\n\n<p>and my user service :</p>\n\n<pre><code>class UserService {\n    companion object {\n        private val JSON = MediaType.get(\"application/json; charset=utf-8\")\n\n        fun userLogin(data: String, success: (success: Response) -&gt; Unit, failure: (error: IOException) -&gt; Unit)\n        {\n            val body = RequestBody.create(this.JSON, data)\n            val request: Request = Request.Builder()\n                .url(UrlBuilder.api + \"/user/login\")\n                .post(body)\n                .build()\n\n            OkHttpClient().newCall(request).enqueue(object: Callback {\n                override fun onResponse(call: Call, response: Response) = success(response)\n                override fun onFailure(call: Call, e: IOException) = failure(e)\n            })\n        }\n}\n</code></pre>\n\n<p>I also added the authorisation to connect to the Internet in my AndroidManifest.xml :</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.INTERNET\"/&gt;\n</code></pre>\n\n<p>Thank you for your help</p>\n\n<p>PS : sorry for my english, this is not my primary language</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 863, "user_id": 6055194, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-V5I5_v4C3NI/AAAAAAAAAAI/AAAAAAAAAj0/U5nM_g-8yS8/photo.jpg?sz=128", "display_name": "Zhebzhik Babich", "link": "https://stackoverflow.com/users/6055194/zhebzhik-babich"}, "edited": false, "score": 0, "creation_date": 1554205518, "post_id": 55473770, "comment_id": 97658425, "body": "may be you need to use <code>reified @PureReifiable</code>. look here <a href=\"https://stackoverflow.com/a/46870546/6055194\">stackoverflow.com/a/46870546/6055194</a>"}], "answers": [{"tags": [], "owner": {"reputation": 613, "user_id": 6752997, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/96NOg.png?s=128&g=1", "display_name": "Jakub Licznerski", "link": "https://stackoverflow.com/users/6752997/jakub-licznerski"}, "is_accepted": true, "score": 0, "last_activity_date": 1554205707, "creation_date": 1554205707, "answer_id": 55474067, "question_id": 55473770, "link": "https://stackoverflow.com/questions/55473770/cannot-use-t-as-reified-type-parameter/55474067#55474067", "title": "Cannot use &#39;T&#39; as reified type parameter", "body": "<p>You should change <code>dataDecrypt</code> like that:</p>\n\n<pre><code>inline fun &lt;reified T&gt; dataDecrypt(password: String, data: String): T? {\n     ...\n     try {\n          ...\n          if (!deString.isEmpty()){\n              ...\n              return Gson().fromJson(deString, T::class.java)\n          }\n          ...\n     }\n }\n</code></pre>\n\n<p>And on the call site the <code>T</code> type will be inferred from <code>result</code>:</p>\n\n<pre><code>override val result:T\nget() = RSAUtil.dataDecrypt(RSAUtil.getKeyPassword(), data)!!\n</code></pre>\n\n<p>You can read more about inline functions and reified types <a href=\"https://kotlinlang.org/docs/reference/inline-functions.html\" rel=\"nofollow noreferrer\">here</a> and I strongly recommend to do so. I would also point out that your code is ill-formatted, it is advised to use <code>?:</code> instead of <code>!!</code> in <a href=\"https://kotlinlang.org/docs/reference/null-safety.html\" rel=\"nofollow noreferrer\">nullability checks</a> and companion objects are discouraged in Kotlin, you could define functions outside of class and use (or import) them as if they were static.</p>\n"}], "owner": {"reputation": 3, "user_id": 11299214, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-l08Spha9UK8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reXgQVBOaYLHgz8daMbFJAjw-yXqA/mo/photo.jpg?sz=128", "display_name": "AndroidMose", "link": "https://stackoverflow.com/users/11299214/androidmose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1888, "favorite_count": 0, "accepted_answer_id": 55474067, "answer_count": 1, "score": -2, "last_activity_date": 1554211015, "creation_date": 1554204775, "last_edit_date": 1554211015, "question_id": 55473770, "link": "https://stackoverflow.com/questions/55473770/cannot-use-t-as-reified-type-parameter", "title": "Cannot use &#39;T&#39; as reified type parameter", "body": "<p>/**\nthis \"T::class.java\" report an error :Cannot use 'T' as reified type parameter. Use a class instead!\nso how can i fix it or what can i do to realize this way?please.\n**/\nsee the next kotlin code</p>\n\n<pre><code>data class PostHttpResultBean&lt;T&gt;(private var errno:Int,private var error:String,private var data:String):IHttpResultEntity&lt;T&gt;{\noverride val errorCode: Int\n    get() = errno\noverride val errorMessage: String\n    get() = error\noverride val isSuccess: Boolean\n    get() = errno==0\noverride val result:T\n    get() = RSAUtil.dataDecrypt(RSAUtil.getKeyPassword(), data,T::class.java)!!\n\nclass RSAUtil {\ncompanion object {\nfun &lt;T&gt; dataDecrypt(password: String, data: String, java: Class&lt;T&gt;): T? {\n    val content = Base64.decode(data.toByteArray(), Base64.NO_WRAP)\n    try {\n        var deString = decrypt(content, password)\n        if (!deString.isEmpty()){\n            val first = deString.substring(0, deString.lastIndexOf(\":\") + 1)\n            deString = \"$first$deString}\"\n            return Gson().fromJson(deString,java)\n        }\n\n        return null\n    } catch (e: Exception) {\n        e.printStackTrace()\n    }\n\n    return null\n }\n }\n }\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-recyclerview", "linearlayoutmanager"], "answers": [{"tags": [], "owner": {"reputation": 880, "user_id": 1654690, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7f24dfc79b29dab23804693ecf3e88b2?s=128&d=identicon&r=PG", "display_name": "andreich", "link": "https://stackoverflow.com/users/1654690/andreich"}, "is_accepted": true, "score": 0, "last_activity_date": 1560162584, "last_edit_date": 1560162584, "creation_date": 1554289086, "answer_id": 55493517, "question_id": 55473768, "link": "https://stackoverflow.com/questions/55473768/prefetching-view-for-child-recycler-view-is-not-working/55493517#55493517", "title": "Prefetching view for child recycler view is not working", "body": "<p>prefetching working only for scrolling, not for the first initial items creation.  </p>\n\n<p>Finally I use custom layout manager with override <code>getExtraLayoutSpace</code>\nand return <code>100000</code>. <strong>My solution potentially dangerous</strong>, but I use it, because I know that item count can't be more than 10 items.</p>\n"}], "owner": {"reputation": 880, "user_id": 1654690, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7f24dfc79b29dab23804693ecf3e88b2?s=128&d=identicon&r=PG", "display_name": "andreich", "link": "https://stackoverflow.com/users/1654690/andreich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 980, "favorite_count": 1, "accepted_answer_id": 55493517, "answer_count": 1, "score": 3, "last_activity_date": 1560162584, "creation_date": 1554204762, "last_edit_date": 1554217692, "question_id": 55473768, "link": "https://stackoverflow.com/questions/55473768/prefetching-view-for-child-recycler-view-is-not-working", "title": "Prefetching view for child recycler view is not working", "body": "<p>I have vertical RecyclerView with child(nested) horizontal RecyclerView.\nFor second recycler I use layout manager:</p>\n\n<pre><code>LinearLayoutManager(itemView.context, LinearLayoutManager.HORIZONTAL, false).apply {\n                    isItemPrefetchEnabled = true\n                    initialPrefetchItemCount = 4\n                }\n</code></pre>\n\n<p>But nested recycler builds only first two visible items.</p>\n\n<p>Full code:</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        val recycler = findViewById&lt;RecyclerView&gt;(R.id.recycler)\n\n        recycler.layoutManager = LinearLayoutManager(this)\n        recycler.adapter = MainAdapter(buildElements())\n    }\n\n    private fun buildElements(): List&lt;Parent&gt; {\n        return (0..2).map { pCount -&gt; createParent(pCount) }\n    }\n\n    private fun createParent(index: Int): Parent {\n        return Parent(text = \"$index\",\n            list = (0..30).map { Child(\"item $it\") }\n        )\n    }\n}\n</code></pre>\n\n<p>Main adapter</p>\n\n<pre><code>class MainAdapter(private val list: List&lt;Parent&gt;) : RecyclerView.Adapter&lt;MainAdapter.CustomHolder&gt;() {\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): CustomHolder {\n        val inflater = LayoutInflater.from(parent.context)\n        return CustomHolder(inflater.inflate(R.layout.item, parent, false))\n    }\n\n    override fun getItemCount(): Int = list.size\n\n    override fun onBindViewHolder(holder: CustomHolder, position: Int) {\n        holder.bind(list[position])\n    }\n\n    class CustomHolder(itemView: View) : RecyclerView.ViewHolder(itemView) {\n        private val recycler = itemView.findViewById&lt;RecyclerView&gt;(R.id.recyclerView)\n        private val title = itemView.findViewById&lt;TextView&gt;(R.id.title)\n\n        init {\n            recycler.layoutManager =\n                LinearLayoutManager(itemView.context, LinearLayoutManager.HORIZONTAL, false).apply {\n                    isItemPrefetchEnabled = true\n                    initialPrefetchItemCount = 4\n                }\n        }\n\n        fun bind(data: Parent) {\n            title.text = data.text\n            recycler.adapter = ChildAdapter(data.list)\n        }\n    }\n}\n</code></pre>\n\n<p>Main recycler element</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;FrameLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n             android:layout_width=\"match_parent\"\n             android:layout_height=\"wrap_content\"&gt;\n\n    &lt;TextView\n            android:id=\"@+id/title\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"16dp\"/&gt;\n\n    &lt;androidx.recyclerview.widget.RecyclerView\n            android:id=\"@+id/recyclerView\"\n            android:layout_marginTop=\"16dp\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"/&gt;\n&lt;/FrameLayout&gt;\n</code></pre>\n\n<p>Child adapter</p>\n\n<pre><code>class ChildAdapter(private val list: List&lt;Child&gt;) : RecyclerView.Adapter&lt;ChildAdapter.ChildHolder&gt;() {\n\n    companion object {\n        private val TAG = ChildAdapter::class.java.simpleName\n    }\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ChildHolder {\n        val inflater = LayoutInflater.from(parent.context)\n        return ChildHolder(inflater.inflate(R.layout.child, parent, false))\n    }\n\n    override fun getItemCount(): Int = list.size\n\n    override fun onBindViewHolder(holder: ChildHolder, position: Int) {\n        holder.bind(list[position])\n    }\n\n    class ChildHolder(itemView: View) : RecyclerView.ViewHolder(itemView) {\n        private val title = itemView.findViewById&lt;TextView&gt;(R.id.childText)\n        fun bind(data: Child) {\n            title.text = data.text\n            Log.d(TAG, \"bind child element: ${data.text}\")\n        }\n    }\n}\n</code></pre>\n\n<p>And child element:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;FrameLayout\n        xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        android:layout_width=\"275dp\"\n        android:padding=\"8dp\"\n        android:layout_height=\"100dp\"&gt;\n\n    &lt;TextView\n            android:id=\"@+id/childText\"\n            android:layout_width=\"wrap_content\"\n            android:layout_gravity=\"center\"\n            android:layout_height=\"wrap_content\"/&gt;\n&lt;/FrameLayout&gt;\n</code></pre>\n\n<p>In logs is see only this:</p>\n\n<pre><code>D/ChildAdapter: bind child element: item 0\nD/ChildAdapter: bind child element: item 1\nD/ChildAdapter: bind child element: item 0\nD/ChildAdapter: bind child element: item 1\nD/ChildAdapter: bind child element: item 0\nD/ChildAdapter: bind child element: item 1\n</code></pre>\n\n<p>Logs mean that only the first and second elements was build, but I want prebuilt also third and forth elements.</p>\n\n<p>Also I try use <a href=\"https://github.com/HJWAJ/RecyclerViewThings/blob/5535b2d61c56c445bf0e13caaf47884cc93bcec7/app/src/main/java/com/hjwaj/myapplication/prefetch/PreloadLinearLayoutManager.java\" rel=\"nofollow noreferrer\">this</a>, but it also not working</p>\n"}, {"tags": ["java", "android", "xml", "kotlin", "gif"], "comments": [{"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1554204854, "post_id": 55473560, "comment_id": 97657977, "body": "That code is using coroutines, which is a kotlin-specific feature, so you won&#39;t be able to code the exact same behaviour in Java"}, {"owner": {"reputation": 1, "user_id": 8736091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IpR8P.jpg?s=128&g=1", "display_name": "Amol Dhage", "link": "https://stackoverflow.com/users/8736091/amol-dhage"}, "reply_to_user": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1554205672, "post_id": 55473560, "comment_id": 97658526, "body": "Ooh...so is any other option to do it?"}, {"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1554205854, "post_id": 55473560, "comment_id": 97658623, "body": "Based on another answer here on stackoverflow it seems like Kotlin compiler performs some kind of transformation to coroutines, so I guess there&#39;s no easy way to do the same in Java"}, {"owner": {"reputation": 1, "user_id": 8736091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IpR8P.jpg?s=128&g=1", "display_name": "Amol Dhage", "link": "https://stackoverflow.com/users/8736091/amol-dhage"}, "reply_to_user": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1554205972, "post_id": 55473560, "comment_id": 97658691, "body": "ohk...but the main library used is wrote in java. This link to <a href=\"https://github.com/koral--/android-gif-drawable\" rel=\"nofollow noreferrer\">github.com/koral--/android-gif-drawable</a>"}, {"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1554208807, "post_id": 55473560, "comment_id": 97660534, "body": "Yes, my point was that you can&#39;t convert the exact code to Java, but on the other hand you don&#39;t need to do the exact same thing. That code is first extracting frames and durations from a GIF resource and then it&#39;s playing the animation by changing the visible frame after some delay. It&#39;s just using coroutines to avoid freezing the main thread, but in Java you can use a new thread"}, {"owner": {"reputation": 1, "user_id": 8736091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IpR8P.jpg?s=128&g=1", "display_name": "Amol Dhage", "link": "https://stackoverflow.com/users/8736091/amol-dhage"}, "reply_to_user": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1554209369, "post_id": 55473560, "comment_id": 97660887, "body": "yaa bro you are right. is it possible for you to code it java and show me."}, {"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1554211183, "post_id": 55473560, "comment_id": 97662029, "body": "Unfortunately I don&#39;t have the Android SDK installed on my machine, so I can&#39;t really use that library"}, {"owner": {"reputation": 1, "user_id": 8736091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IpR8P.jpg?s=128&g=1", "display_name": "Amol Dhage", "link": "https://stackoverflow.com/users/8736091/amol-dhage"}, "reply_to_user": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 1, "creation_date": 1554212071, "post_id": 55473560, "comment_id": 97662585, "body": "it&#39;s ohk bro thanks...i will give a try"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8736091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IpR8P.jpg?s=128&g=1", "display_name": "Amol Dhage", "link": "https://stackoverflow.com/users/8736091/amol-dhage"}, "edited": false, "score": 0, "creation_date": 1554205628, "post_id": 55473655, "comment_id": 97658501, "body": "yaa i have updated to latest plug-in...but still it&#39;s disabled."}, {"owner": {"reputation": 2075, "user_id": 8773560, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/4263c95e332a7fe29736c8d526d35289?s=128&d=identicon&r=PG", "display_name": "Constantin N.", "link": "https://stackoverflow.com/users/8773560/constantin-n"}, "reply_to_user": {"reputation": 1, "user_id": 8736091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IpR8P.jpg?s=128&g=1", "display_name": "Amol Dhage", "link": "https://stackoverflow.com/users/8736091/amol-dhage"}, "edited": false, "score": 0, "creation_date": 1554207273, "post_id": 55473655, "comment_id": 97659490, "body": "What is your Android Studio version?"}, {"owner": {"reputation": 1, "user_id": 8736091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IpR8P.jpg?s=128&g=1", "display_name": "Amol Dhage", "link": "https://stackoverflow.com/users/8736091/amol-dhage"}, "edited": false, "score": 0, "creation_date": 1554207837, "post_id": 55473655, "comment_id": 97659891, "body": "android studio version is 3.3.1"}, {"owner": {"reputation": 2075, "user_id": 8773560, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/4263c95e332a7fe29736c8d526d35289?s=128&d=identicon&r=PG", "display_name": "Constantin N.", "link": "https://stackoverflow.com/users/8773560/constantin-n"}, "reply_to_user": {"reputation": 1, "user_id": 8736091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IpR8P.jpg?s=128&g=1", "display_name": "Amol Dhage", "link": "https://stackoverflow.com/users/8736091/amol-dhage"}, "edited": false, "score": 0, "creation_date": 1554210504, "post_id": 55473655, "comment_id": 97661591, "body": "Please  refer to this link blog.safedk.com/technology/hello-kotlin-convert-android-proj&zwnj;&#8203;ect-part-1/"}, {"owner": {"reputation": 1, "user_id": 8736091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IpR8P.jpg?s=128&g=1", "display_name": "Amol Dhage", "link": "https://stackoverflow.com/users/8736091/amol-dhage"}, "edited": false, "score": 0, "creation_date": 1554265859, "post_id": 55473655, "comment_id": 97682695, "body": "this din help me"}], "tags": [], "owner": {"reputation": 2075, "user_id": 8773560, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/4263c95e332a7fe29736c8d526d35289?s=128&d=identicon&r=PG", "display_name": "Constantin N.", "link": "https://stackoverflow.com/users/8773560/constantin-n"}, "is_accepted": false, "score": 1, "last_activity_date": 1554204403, "creation_date": 1554204403, "answer_id": 55473655, "question_id": 55473560, "link": "https://stackoverflow.com/questions/55473560/i-have-a-kotlin-gif-decorder-code-but-i-want-this-code-to-be-written-in-java/55473655#55473655", "title": "I have a kotlin Gif decorder code but I want this code to be written in java", "body": "<p>you can use The Kotlin plugin if you're using Android Studio:</p>\n\n<blockquote>\n  <p>Menu > Tools > Kotlin -> Decompile Kotlin to Java.</p>\n</blockquote>\n"}], "owner": {"reputation": 1, "user_id": 8736091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IpR8P.jpg?s=128&g=1", "display_name": "Amol Dhage", "link": "https://stackoverflow.com/users/8736091/amol-dhage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1557413840, "creation_date": 1554204131, "last_edit_date": 1554205878, "question_id": 55473560, "link": "https://stackoverflow.com/questions/55473560/i-have-a-kotlin-gif-decorder-code-but-i-want-this-code-to-be-written-in-java", "title": "I have a kotlin Gif decorder code but I want this code to be written in java", "body": "<p>I'm working on GIF decoder. The code is working fine. Only think I'm totally new to kotlin so not able to understand the syntax used in. So I'm totally lost. Help me to write this same code in Java. i want this code to be used in main activity(Java). But the current code is wrote for Fragments in Kotlin.</p>\n\n<p>And this library used <a href=\"https://github.com/koral--/android-gif-drawable\" rel=\"nofollow noreferrer\">https://github.com/koral--/android-gif-drawable</a></p>\n\n<p>Code:</p>\n\n<pre><code>class GifDecoderFragment : BaseFragment(), CoroutineScope {\n    private val job = Job()\n    override val coroutineContext: CoroutineContext\n        get() = Dispatchers.Main + job\n\n    private var frames = emptyList&lt;Bitmap&gt;()\n    private var durations = emptyList&lt;Int&gt;()\n\n    private var currentFrameIndex = 0\n\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n        return inflater.inflate(R.layout.decoder, container, false)\n    }\n\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n        launch(Dispatchers.IO) {\n            val frames = mutableListOf&lt;Bitmap&gt;()\n            val durations = mutableListOf&lt;Int&gt;()\n            val decoder = GifDecoder(InputSource.ResourcesSource(resources, R.drawable.room3))\n\n            for (i in 0 until decoder.numberOfFrames) {\n                val frame = Bitmap.createBitmap(decoder.width, decoder.height, Bitmap.Config.ARGB_8888)\n                decoder.seekToFrame(i, frame)\n\n                Log.d(\"BaseActivityneww\", \"onCreate: $i\")\n\n                frames += frame\n                durations += decoder.getFrameDuration(i)\n\n\n            }\n            decoder.recycle()\n            withContext(Dispatchers.Main){\n                this@GifDecoderFragment.frames = frames\n                this@GifDecoderFragment.durations = durations\n\n                if (isAdded) {\n                    startAnimation()\n                    decoderLoadingTextView.visibility = View.GONE\n                }\n            }\n        }\n    }\n\n    override fun onResume() {\n        super.onResume()\n        if (frames.isNotEmpty()) {\n            startAnimation()\n        }\n    }\n\n    private fun startAnimation() {\n        decoderImageView.setImageBitmap(frames[currentFrameIndex])\n\n\n        launch {\n            delay(durations[currentFrameIndex].toLong())\n            advanceAnimation()\n        }\n    }\n\n    override fun onPause() {\n        job.cancelChildren()\n        super.onPause()\n    }\n\n    override fun onDestroy() {\n        job.cancel()\n        super.onDestroy()\n    }\n\n    private fun advanceAnimation() {\n        currentFrameIndex++\n\n        currentFrameIndex %= frames.size\ndecoderImageView.setImageBitmap(frames[currentFrameIndex])\n\nlaunch {\n            delay(durations[currentFrameIndex].toLong())\n            advanceAnimation()\n        }\n    }\n</code></pre>\n\n<p>Xml:</p>\n\n<pre><code> &lt;ImageView\n        android:id=\"@+id/decoderImageView\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        /&gt;\n</code></pre>\n"}, {"tags": ["android", "kotlin", "google-cloud-firestore"], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 11083013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72699827904a24abc759c46a5ef3e2ca?s=128&d=identicon&r=PG&f=1", "display_name": "sansiad", "link": "https://stackoverflow.com/users/11083013/sansiad"}, "edited": false, "score": 0, "creation_date": 1554202904, "post_id": 55473090, "comment_id": 97656738, "body": "yes,i am aware about geofirestore,but i wanted to know if there was anything other than that to get nearby without location.Just out of curiosity,how do game apps show list of  nearby users,do they use geofirestore or something similiar?"}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "reply_to_user": {"reputation": 47, "user_id": 11083013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72699827904a24abc759c46a5ef3e2ca?s=128&d=identicon&r=PG&f=1", "display_name": "sansiad", "link": "https://stackoverflow.com/users/11083013/sansiad"}, "edited": false, "score": 0, "creation_date": 1554202986, "post_id": 55473090, "comment_id": 97656789, "body": "Yes, they use something similar according to the platform on which the game is build."}], "tags": [], "owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "is_accepted": true, "score": 1, "last_activity_date": 1554202715, "creation_date": 1554202715, "answer_id": 55473090, "question_id": 55473000, "link": "https://stackoverflow.com/questions/55473000/is-there-a-way-to-get-a-list-of-all-closeby-users-without-sending-location-updat/55473090#55473090", "title": "Is there a way to get a list of all closeby users without sending location updates to server?", "body": "<blockquote>\n  <p>Is there a way to get all nearby users names when they are logged in without sending location updates of individual users to server?</p>\n</blockquote>\n\n<p>No, there is not. Without having the current position of each user, you cannot get nearby users. For Android, there is a library named <a href=\"https://github.com/imperiumlabs/GeoFirestore-Android\" rel=\"nofollow noreferrer\">GeoFirestore</a> which can help you achieve this. But note, it's mandatory to have the positions so you can know which user is more closer (or in a range) of your current position.</p>\n"}], "owner": {"reputation": 47, "user_id": 11083013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72699827904a24abc759c46a5ef3e2ca?s=128&d=identicon&r=PG&f=1", "display_name": "sansiad", "link": "https://stackoverflow.com/users/11083013/sansiad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "accepted_answer_id": 55473090, "answer_count": 1, "score": 0, "last_activity_date": 1554202715, "creation_date": 1554202386, "question_id": 55473000, "link": "https://stackoverflow.com/questions/55473000/is-there-a-way-to-get-a-list-of-all-closeby-users-without-sending-location-updat", "title": "Is there a way to get a list of all closeby users without sending location updates to server?", "body": "<p>I am using kotlin where all registered users are stored in firestore.Is there a way to get all nearby users names when they are logged in without sending location updates of individual users to server?Any suggestion or reference will be very useful as I am new to this.</p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 33331, "user_id": 1898563, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d99204bcce923f40f5c72b7f80121644?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/1898563/michael"}, "edited": false, "score": 0, "creation_date": 1554202219, "post_id": 55472844, "comment_id": 97656345, "body": "&quot;that&#39;s kotlin code but same principles apply&quot; false"}], "answers": [{"tags": [], "owner": {"reputation": 25778, "user_id": 4467208, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/H3QRx.jpg?s=128&g=1", "display_name": "Murat Karag&#246;z", "link": "https://stackoverflow.com/users/4467208/murat-karag%c3%b6z"}, "is_accepted": false, "score": 0, "last_activity_date": 1554202004, "creation_date": 1554202004, "answer_id": 55472895, "question_id": 55472844, "link": "https://stackoverflow.com/questions/55472844/not-using-the-override-annotation-when-implementing-an-abstract-method/55472895#55472895", "title": "Not using the @Override annotation when implementing an abstract method", "body": "<p>That is because the language designers decided it like that. Kotlin requires explicit override modifiers while Java does not.</p>\n\n<p>See <a href=\"https://kotlinlang.org/docs/reference/classes.html#overriding-methods\" rel=\"nofollow noreferrer\">Overriding Methods in Kotlin</a></p>\n"}], "owner": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 0, "closed_date": 1554202245, "answer_count": 1, "score": 0, "last_activity_date": 1554202371, "creation_date": 1554201857, "question_id": 55472844, "link": "https://stackoverflow.com/questions/55472844/not-using-the-override-annotation-when-implementing-an-abstract-method", "closed_reason": "Duplicate", "title": "Not using the @Override annotation when implementing an abstract method", "body": "<p>How come in the first code block of <a href=\"https://stackoverflow.com/a/1921759/6733153\">this Runnable implementation</a> there is no <code>@Override</code> annotation on <code>run()</code>? - <code>run()</code> is an abstract method:</p>\n\n<pre><code>handler = new Handler();\n\nfinal Runnable r = new Runnable() {\n    public void run() {\n        tv.append(\"Hello World\");\n        handler.postDelayed(this, 1000);\n    }\n};\n\nhandler.postDelayed(r, 1000);\n</code></pre>\n\n<p>Compare this to my Android <code>onCheckedChanged</code> function which is also an abstract method:</p>\n\n<pre><code>currentlocation.setOnCheckedChangeListener(object: RadioGroup.OnCheckedChangeListener{\n    override fun onCheckedChanged(group: RadioGroup?, checkedId: Int) {\n\n    }\n\n})\n</code></pre>\n\n<p>which has to have the <code>override</code> modifier (note: that's kotlin code but same principles apply).</p>\n\n<p>How come the 2nd the 2nd code block needs to have the override keyword but the first doesn't? </p>\n"}, {"tags": ["android", "gradle", "kotlin"], "comments": [{"owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 0, "creation_date": 1600933958, "post_id": 55470905, "comment_id": 113246966, "body": "The &#39;correct&#39; way is to file a feature request for AGP and/or Kotlin compiler."}, {"owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 0, "creation_date": 1600934149, "post_id": 55470905, "comment_id": 113247062, "body": "I don&#39;t see how this question is different from <i><a href=\"https://stackoverflow.com/q/64016332/192373\">How to exclude kotlin files from compiling with gradle</a></i>. <i><code>The suggested solution didn&#39;t work</code></i> is not a reason in itself to open a separate question. If you are not satisfied with an answer, you can vote for the question, add comments, propose a bounty or spread the word via other channels."}], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 993441, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/202c5bea213581779f579f09f65be37e?s=128&d=identicon&r=PG", "display_name": "user993441", "link": "https://stackoverflow.com/users/993441/user993441"}, "edited": false, "score": 0, "creation_date": 1554196365, "post_id": 55470960, "comment_id": 97652710, "body": "Thanks for your reply but unfortunately this does not work."}, {"owner": {"reputation": 178, "user_id": 8712139, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-V7C44mtJWj0/AAAAAAAAAAI/AAAAAAAAFEo/cANpvlqilCY/photo.jpg?sz=128", "display_name": "Aravind V", "link": "https://stackoverflow.com/users/8712139/aravind-v"}, "edited": false, "score": 0, "creation_date": 1554196404, "post_id": 55470960, "comment_id": 97652732, "body": "i think your file name that u write is wrong check with the file name"}], "tags": [], "owner": {"reputation": 2210, "user_id": 3364266, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/04d1edaaf3fafd9a515da1b800d4e95e?s=128&d=identicon&r=PG&f=1", "display_name": "Samir Bhatt", "link": "https://stackoverflow.com/users/3364266/samir-bhatt"}, "is_accepted": false, "score": 0, "last_activity_date": 1554196293, "creation_date": 1554196293, "answer_id": 55470960, "question_id": 55470905, "link": "https://stackoverflow.com/questions/55470905/exclude-kotlin-files-from-gradle-build-in-android-studio/55470960#55470960", "title": "Exclude Kotlin files from gradle build in Android Studio", "body": "<p>try below :</p>\n\n<pre><code>exclude '**/*.kt'\n</code></pre>\n\n<p>It will exclude all file with extention .kt</p>\n"}, {"comments": [{"owner": {"reputation": 121, "user_id": 993441, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/202c5bea213581779f579f09f65be37e?s=128&d=identicon&r=PG", "display_name": "user993441", "link": "https://stackoverflow.com/users/993441/user993441"}, "edited": false, "score": 2, "creation_date": 1554197873, "post_id": 55471174, "comment_id": 97653649, "body": "Thanks for your reply. This also does not work for me. The java files I excluded throw a ClassNotFoundException when accessing them in code but this is not true for the Kotlin files"}], "tags": [], "owner": {"reputation": 10161, "user_id": 8034839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N8r2x.jpg?s=128&g=1", "display_name": "shizhen", "link": "https://stackoverflow.com/users/8034839/shizhen"}, "is_accepted": false, "score": 0, "last_activity_date": 1554196924, "creation_date": 1554196924, "answer_id": 55471174, "question_id": 55470905, "link": "https://stackoverflow.com/questions/55470905/exclude-kotlin-files-from-gradle-build-in-android-studio/55471174#55471174", "title": "Exclude Kotlin files from gradle build in Android Studio", "body": "<p>Try below, it works on my machine.</p>\n\n<pre><code>android {\n    ...\n\n    sourceSets {\n        main {\n            java {\n                exclude '**/your_file_1.kt',\n                        '**/your_file_2.kt',\n                        '**/your_file_3.kt',\n                        '**/your_file_4.kt',\n                        '**/your_file_5.kt'\n            }\n        }\n    }\n\n    ...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 6720871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec589045aff32b20b4db9317ee391ddb?s=128&d=identicon&r=PG&f=1", "display_name": "Richard", "link": "https://stackoverflow.com/users/6720871/richard"}, "is_accepted": false, "score": 0, "last_activity_date": 1596474928, "last_edit_date": 1596474928, "creation_date": 1596453154, "answer_id": 63228386, "question_id": 55470905, "link": "https://stackoverflow.com/questions/55470905/exclude-kotlin-files-from-gradle-build-in-android-studio/63228386#63228386", "title": "Exclude Kotlin files from gradle build in Android Studio", "body": "<p>You can exclude paths matching pattern like:</p>\n<pre><code>android {\n    sourceSets {\n        main {\n            java {\n                exclude '**/TestExcludeClass.java'\n            }\n\n            kotlin {\n                exclude '**/TestExcludeKotlinClass.kt'\n            }\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 993441, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/202c5bea213581779f579f09f65be37e?s=128&d=identicon&r=PG", "display_name": "user993441", "link": "https://stackoverflow.com/users/993441/user993441"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 816, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1596474928, "creation_date": 1554196100, "last_edit_date": 1554196612, "question_id": 55470905, "link": "https://stackoverflow.com/questions/55470905/exclude-kotlin-files-from-gradle-build-in-android-studio", "title": "Exclude Kotlin files from gradle build in Android Studio", "body": "<p>I want to exclude Kotlin files within a folder from the gradle build in Android Studio. This works fine as long as the files are <code>.java</code> files but when converting them to Kotlin, the exclude command ignores the Kotlin files in the folder. </p>\n\n<p>The following is used within my app modules <code>build.gradle</code> file to exclude the folder:</p>\n\n<pre><code> sourceSets {\n    main {\n        java {\n            exclude '**/folderToExclude'\n        }\n    }\n}\n</code></pre>\n\n<p>I already checked the following link, but the suggested solution didn't work: </p>\n\n<p><a href=\"https://stackoverflow.com/questions/54376686/how-to-exclude-kotlin-files-from-compiling-with-gradle\">How to exclude kotlin files from compiling with gradle</a></p>\n"}, {"tags": ["list", "kotlin", "immutability", "mutability"], "comments": [{"owner": {"reputation": 12218, "user_id": 1540818, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oZ1EX.jpg?s=128&g=1", "display_name": "Joffrey", "link": "https://stackoverflow.com/users/1540818/joffrey"}, "edited": false, "score": 0, "creation_date": 1554198601, "post_id": 55470693, "comment_id": 97654088, "body": "How can the framework impose a <code>listOf()</code> call? It probably simply expects the <code>List</code> type, but you should be free to build that list however you see fit. I don&#39;t quite understand your constraints here. I posted an answer with the way I would do it, but I&#39;m not sure this matches your constraints."}], "answers": [{"tags": [], "owner": {"reputation": 2904, "user_id": 1159507, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e23948e15e918c710ec34483c65d1b93?s=128&d=identicon&r=PG", "display_name": "anber", "link": "https://stackoverflow.com/users/1159507/anber"}, "is_accepted": false, "score": 0, "last_activity_date": 1554196573, "creation_date": 1554196573, "answer_id": 55471053, "question_id": 55470693, "link": "https://stackoverflow.com/questions/55470693/how-to-add-values-to-a-mutable-list-to-then-add-to-an-immutable-one/55471053#55471053", "title": "How to add values to a mutable list to then add to an immutable one", "body": "<p>If I understand you correctly you can create mutable list, add items in loop, and then convert it to immutable list:</p>\n\n<pre><code>val mutableList = mutableListOf&lt;String&gt;()\nfor (i in 0..10) {\n    mutableList.add(i.toString())\n}\nval immutableList = mutableList.toList()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12218, "user_id": 1540818, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oZ1EX.jpg?s=128&g=1", "display_name": "Joffrey", "link": "https://stackoverflow.com/users/1540818/joffrey"}, "is_accepted": false, "score": 2, "last_activity_date": 1554199320, "last_edit_date": 1554199320, "creation_date": 1554198351, "answer_id": 55471659, "question_id": 55470693, "link": "https://stackoverflow.com/questions/55470693/how-to-add-values-to-a-mutable-list-to-then-add-to-an-immutable-one/55471659#55471659", "title": "How to add values to a mutable list to then add to an immutable one", "body": "<p>You can't really \"add to an immutable [list]\".</p>\n\n<p>If you are already using a mutable list somewhere, then you can use <code>toList()</code> (like in @anber's answer) to get a read-only version or you could also directly pass it to a function expecting a <code>List</code> (if you don't change the list while the framework is using it).</p>\n\n<p>If you simply want to build an immutable list of number strings from a range of numbers, this can be achieved using basic functional operations starting from the range object itself:</p>\n\n<pre><code>val list = (1..100).map { \"$it\" }\n</code></pre>\n\n<p>Note the Kotlin range syntax here. That way you don't really have to use a <code>for</code> loop, and you don't even have to use a temporary mutable list. Mutable stuff is not very idiomatic in Kotlin, unless it's part of the business.</p>\n\n<p>You could also use <code>it.toString()</code> instead of the string template, but I find it more readable with the template.</p>\n"}, {"tags": [], "owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "is_accepted": false, "score": 0, "last_activity_date": 1554238154, "last_edit_date": 1554238154, "creation_date": 1554236313, "answer_id": 55482936, "question_id": 55470693, "link": "https://stackoverflow.com/questions/55470693/how-to-add-values-to-a-mutable-list-to-then-add-to-an-immutable-one/55482936#55482936", "title": "How to add values to a mutable list to then add to an immutable one", "body": "<p>There is a function which looks like a constructor, but is actually top-level function. You can use it like this:</p>\n\n<pre><code>val l = List(99) { \"${it + 1}\" }\n</code></pre>\n\n<p><code>l</code> will be of type <code>List&lt;String&gt;</code> (immutable).</p>\n"}], "owner": {"reputation": 13, "user_id": 10005787, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TtaSKOozyck/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq2A7Wkx6y3iWC3QYcaxtMpshvILDA/mo/photo.jpg?sz=128", "display_name": "lolitsyaboixd", "link": "https://stackoverflow.com/users/10005787/lolitsyaboixd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 797, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1554238154, "creation_date": 1554195425, "question_id": 55470693, "link": "https://stackoverflow.com/questions/55470693/how-to-add-values-to-a-mutable-list-to-then-add-to-an-immutable-one", "title": "How to add values to a mutable list to then add to an immutable one", "body": "<p>So I am using a custom SDK where I need to input a range of numbers, say from 1 to 100 as Strings into a listOf collection. Is there some efficient way this could be done with say a for loop? I barely have any experience with kotlin so all help is appreciated!</p>\n"}, {"tags": ["java", "android", "kotlin", "treeview", "radio-group"], "comments": [{"owner": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "edited": false, "score": 0, "creation_date": 1554970021, "post_id": 55470395, "comment_id": 97946911, "body": "Thanks for the link! I tried <a href=\"https://github.com/thoughtbot/expandable-recycler-view\" rel=\"nofollow noreferrer\">github.com/thoughtbot/expandable-recycler-view</a>, but there are only two levels, but you can see how they work with RadioButtons. The project is old, so requires some time to upgrade, if necessary."}, {"owner": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "edited": false, "score": 0, "creation_date": 1554970706, "post_id": 55470395, "comment_id": 97947280, "body": "I upgraded it, and if you want that archive, I will send."}, {"owner": {"reputation": 11, "user_id": 8451107, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4yWeDjWX5zU/AAAAAAAAAAI/AAAAAAAAA6k/ddDnAQT9QYI/photo.jpg?sz=128", "display_name": "Ehtisham Ali Shah", "link": "https://stackoverflow.com/users/8451107/ehtisham-ali-shah"}, "reply_to_user": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "edited": false, "score": 0, "creation_date": 1554988129, "post_id": 55470395, "comment_id": 97957657, "body": "Yes please send it. That would be great."}, {"owner": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "edited": false, "score": 0, "creation_date": 1554989433, "post_id": 55470395, "comment_id": 97958600, "body": "<a href=\"http://ge.tt/5QmMQWv2\" rel=\"nofollow noreferrer\">ge.tt/5QmMQWv2</a>"}, {"owner": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "edited": false, "score": 0, "creation_date": 1555068598, "post_id": 55470395, "comment_id": 97989845, "body": "You are welcome! From the second attempt I could install AndroidTreeView. Thank you very much for the link!"}, {"owner": {"reputation": 11, "user_id": 8451107, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4yWeDjWX5zU/AAAAAAAAAAI/AAAAAAAAA6k/ddDnAQT9QYI/photo.jpg?sz=128", "display_name": "Ehtisham Ali Shah", "link": "https://stackoverflow.com/users/8451107/ehtisham-ali-shah"}, "reply_to_user": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "edited": false, "score": 0, "creation_date": 1555072985, "post_id": 55470395, "comment_id": 97992244, "body": "Most welcome :)"}], "owner": {"reputation": 11, "user_id": 8451107, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4yWeDjWX5zU/AAAAAAAAAAI/AAAAAAAAA6k/ddDnAQT9QYI/photo.jpg?sz=128", "display_name": "Ehtisham Ali Shah", "link": "https://stackoverflow.com/users/8451107/ehtisham-ali-shah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 928, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1554194504, "creation_date": 1554194442, "last_edit_date": 1554194504, "question_id": 55470395, "link": "https://stackoverflow.com/questions/55470395/how-to-implement-three-level-expandable-list-recycler-view-tree-view-with-radio", "title": "How to Implement Three Level Expandable list/Recycler View/Tree View with Radio Groups in the third level", "body": "<p>I am stuck in a situation where I have to use 3 level Expandable list and in the lowest level/ 3 level there will be radio group. 2nd level can have multiple sub levels. In other words 2nd level can have multiple children.</p>\n\n<p>I have tried Expandable List View inside Recycler View but since the Recycler View inflates the view in the OnCreateView. I cannot change the size of the view in the OnBindHolder. Similar problem is with the ExpandableListView inside ExpandableListView.</p>\n\n<p>I have tried AndroidTreeView library.\n<a href=\"https://github.com/bmelnychuk/AndroidTreeView\" rel=\"nofollow noreferrer\">https://github.com/bmelnychuk/AndroidTreeView</a></p>\n\n<p>It works fine for the check boxes as I do not have to handle the checks of the other boxes. But in case of Radio Buttons. I am unable to create a radio group so that only one item is selected at a time in the 3rd level. Since I do not have control over the other radio buttons. </p>\n\n<p>I have tried to modify the OnViewHolder Class for the Third level. but I am unable to handle the checks of the other radio buttons properly and even if I do it. The activity has to be restarted to apply the changes which produces a jerk. That is something I do not want.</p>\n\n<p>Here is my third level OnViewHolderClass:</p>\n\n<pre><code>\nclass ThirdListViewHolder(context: Context, var reloadView: () -&gt; Unit) :\n    TreeNode.BaseNodeViewHolder&lt;ThirdListViewHolder.IconTreeItem&gt;(context) {\n\n    override fun createNodeView(node: TreeNode, value: IconTreeItem): View {\n        val inflater = LayoutInflater.from(context)\n        val view = inflater.inflate(R.layout.item_child_view_package_order_items_expandable_list_view, null, false)\n        val tvValue = view.findViewById(R.id.select_item_check_box) as RadioButton\n        tvValue.text = value.text\n        tvValue.tag = value.tag\n\n\n        tvValue.setOnCheckedChangeListener { buttonView, isChecked -&gt;\n            if (isChecked) {\n\n                val getTag = tvValue.tag.toString().split(\"_\")\n\n                for (i in 0 until checkListControl.size) {\n                    val grandParentID = checkListControl.get(i).grandParentID\n                    val parentID = checkListControl.get(i).parentID\n                    val childID = checkListControl.get(i).childID\n                    val isChecked = checkListControl.get(i).isChecked\n\n                    if (grandParentID.equals(getTag[0]) &amp;&amp; parentID.equals(getTag[1]) &amp;&amp; childID.equals(getTag[2])) {\n\n                        val oldItem = CheckListControl(getTag[0], getTag[1], getTag[2], tvValue.text.toString(), false)\n                        checkListControl.remove(oldItem)\n\n                        val newItem = CheckListControl(getTag[0], getTag[1], getTag[2], tvValue.text.toString(), true)\n                        tvValue.isChecked = true\n\n                        checkListControl.add(newItem)\n                        break\n\n                    }\n                }\n            }\n            reloadView()\n        }\n        return view\n    }\n\n    class IconTreeItem {\n        var icon: Int = 0\n        var tag: String? = null\n        var text: String? = null\n        var isChecked: Boolean = false\n    }\n\n\n    fun manageList(tag: String, name: String, isChecked: Boolean) {\n\n        Log.d(\"tag_value\", tag)\n        var parentId: String? = null\n        var itemId: String? = null\n\n        val ids = tag.split(\"_\")\n        parentId = (ids.get(0).toInt() + 1).toString()\n\n\n        for (i in 0 until PackageOrderItemsActivity.itemIdsList.size) {\n            if (PackageOrderItemsActivity.itemIdsList.get(i).name.equals(name)) {\n                itemId = PackageOrderItemsActivity.itemIdsList.get(i).item_id\n            }\n        }\n\n        if (isChecked) {\n            //Add\n            if (PackageOrderItemsActivity.ParentChildHashMap.containsKey(parentId)) {\n                val array = PackageOrderItemsActivity.ParentChildHashMap.get(parentId)\n                if (!array!!.contains(itemId)) {\n                    array.add(itemId!!)\n                    PackageOrderItemsActivity.ParentChildHashMap.put(parentId, array)\n                }\n            } else {\n                val array: ArrayList&lt;String&gt; = ArrayList()\n                array.add(itemId!!)\n                PackageOrderItemsActivity.ParentChildHashMap.put(parentId, array)\n            }\n        } else {\n            if (PackageOrderItemsActivity.ParentChildHashMap.containsKey(parentId)) {\n                val array = PackageOrderItemsActivity.ParentChildHashMap.get(parentId)\n                if (array!!.contains(itemId)) {\n                    array.remove(itemId)\n\n                    if (array.isEmpty())\n                        PackageOrderItemsActivity.ParentChildHashMap.remove(parentId)\n                    else\n                        PackageOrderItemsActivity.ParentChildHashMap.put(parentId, array)\n\n                }\n            }\n\n        }\n\n        Log.d(\"hashMap\", PackageOrderItemsActivity.ParentChildHashMap.toString())\n\n    }\n\n\n}\n\n</code></pre>\n\n<p>And here is my code for the TreeView creation in the Activity:</p>\n\n<pre><code> fun populateTree() {\n        val root = TreeNode.root()\n        var parent: TreeNode? = null\n\n//            val parent = TreeNode(\"parentList\")\n//            val child0 = TreeNode(\"secondList\")\n//            val child1 = TreeNode(\"thirdList\")\n\n        for (i in 0 until parentList.size) {\n            var child1: TreeNode? = null\n            var child2: TreeNode? = null\n\n            val nodeItem = ParentListViewHolder.IconTreeItem()\n            nodeItem.text = parentList.get(i)\n            parent = TreeNode(nodeItem).setViewHolder(ParentListViewHolder(this@PackageOrderItemsActivity))\n\n            for (j in 0 until secondList.size) {\n                val nodeItem1 = SecondListViewHolder.IconTreeItem()\n                nodeItem1.text = secondList.get(j)\n                child1 = TreeNode(nodeItem1).setViewHolder(SecondListViewHolder(this@PackageOrderItemsActivity))\n                parent.addChild(child1)\n\n                if (thirdList.containsKey(secondList.get(j))) {\n\n                    val list = thirdList.get(secondList.get(j))!!\n\n                    Log.d(\"firstList\", list.toString())\n                    for (l in 0 until list.size) {\n                        val nodeItem2 = ThirdListViewHolder.IconTreeItem()\n\n                        nodeItem2.text = list.get(l)\n                        nodeItem2.tag = i.toString() + \"_\" + j + \"_\" + l\n\n                        if(firstTime) {\n                            val checkListItem =\n                                CheckListControl(i.toString(), j.toString(), l.toString(), list.get(l), false)\n                            checkListControl.add(checkListItem)\n                        }\n\n                        for (m in 0 until checkListControl.size) {\n                            val grandParentId = checkListControl.get(m).grandParentID\n                            val parentId = checkListControl.get(m).parentID\n                            val childId = checkListControl.get(m).childID\n                            val isChecked = checkListControl.get(m).isChecked\n\n                            if (grandParentId.equals(i.toString()) &amp;&amp; parentId.equals(j.toString()) &amp;&amp;\n                                childId.equals(l.toString())\n                            ) {\n                                nodeItem2.isChecked = isChecked\n                            }\n                        }\n\n                        child2 =\n                            TreeNode(nodeItem2).setViewHolder(\n                                ThirdListViewHolder(\n                                    this@PackageOrderItemsActivity, reloadView = {\n                                        //  populateTree()\n                                        // init()\n                                        ParentChildHashMap.clear()\n                                        parentList.clear()\n                                        secondList.clear()\n                                        thirdList.clear()\n                                        container.removeAllViews()\n\n                                        getSubscriptionDetails()\n                                    })\n                            )\n\n                        child1.addChild(child2)\n                        if (nodeItem2.isChecked) {\n                            parent.isExpanded = true\n                            child1.isExpanded = true\n                        }\n\n                    }\n                }\n\n\n            }\n            firstTime = false\n            root.addChild(parent)\n\n        }\n\n\n\n        tView = AndroidTreeView(this@PackageOrderItemsActivity, root)\n        container.addView(tView!!.view)\n\n\n    }\n\n</code></pre>\n"}, {"tags": ["android", "kotlin", "popupmenu"], "comments": [{"owner": {"reputation": 540, "user_id": 2987882, "user_type": "registered", "accept_rate": 91, "profile_image": "https://graph.facebook.com/1619731367/picture?type=large", "display_name": "AI.", "link": "https://stackoverflow.com/users/2987882/ai"}, "edited": false, "score": 0, "creation_date": 1554194020, "post_id": 55470123, "comment_id": 97651389, "body": "strange enough."}, {"owner": {"reputation": 419, "user_id": 4958351, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZxzO7OcPByw/AAAAAAAAAAI/AAAAAAAAAXw/9TL_toKfeOo/photo.jpg?sz=128", "display_name": "AIMIN PAN", "link": "https://stackoverflow.com/users/4958351/aimin-pan"}, "edited": false, "score": 0, "creation_date": 1554194967, "post_id": 55470123, "comment_id": 97651879, "body": "post your R.menu file"}, {"owner": {"reputation": 323, "user_id": 5437331, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ImJzd.jpg?s=128&g=1", "display_name": "CodeRed", "link": "https://stackoverflow.com/users/5437331/codered"}, "edited": false, "score": 0, "creation_date": 1554195434, "post_id": 55470123, "comment_id": 97652149, "body": "Depends on what the <code>view</code> is that you&#39;re passing to PopupMenu constructor."}, {"owner": {"reputation": 323, "user_id": 5437331, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ImJzd.jpg?s=128&g=1", "display_name": "CodeRed", "link": "https://stackoverflow.com/users/5437331/codered"}, "edited": false, "score": 0, "creation_date": 1554195734, "post_id": 55470123, "comment_id": 97652333, "body": "Ah wait just realised something: Why are you inflating the popup in <code>onOptionsItemSelected()</code>? Is this some kind of secondary menu? If not just put it <code>onCreateOptionsMenu()</code>"}, {"owner": {"reputation": 540, "user_id": 2987882, "user_type": "registered", "accept_rate": 91, "profile_image": "https://graph.facebook.com/1619731367/picture?type=large", "display_name": "AI.", "link": "https://stackoverflow.com/users/2987882/ai"}, "reply_to_user": {"reputation": 419, "user_id": 4958351, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZxzO7OcPByw/AAAAAAAAAAI/AAAAAAAAAXw/9TL_toKfeOo/photo.jpg?sz=128", "display_name": "AIMIN PAN", "link": "https://stackoverflow.com/users/4958351/aimin-pan"}, "edited": false, "score": 0, "creation_date": 1554196333, "post_id": 55470123, "comment_id": 97652692, "body": "@AIMINPAN done."}, {"owner": {"reputation": 540, "user_id": 2987882, "user_type": "registered", "accept_rate": 91, "profile_image": "https://graph.facebook.com/1619731367/picture?type=large", "display_name": "AI.", "link": "https://stackoverflow.com/users/2987882/ai"}, "reply_to_user": {"reputation": 323, "user_id": 5437331, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ImJzd.jpg?s=128&g=1", "display_name": "CodeRed", "link": "https://stackoverflow.com/users/5437331/codered"}, "edited": false, "score": 0, "creation_date": 1554196342, "post_id": 55470123, "comment_id": 97652697, "body": "@CodeRed post edited"}], "answers": [{"comments": [{"owner": {"reputation": 540, "user_id": 2987882, "user_type": "registered", "accept_rate": 91, "profile_image": "https://graph.facebook.com/1619731367/picture?type=large", "display_name": "AI.", "link": "https://stackoverflow.com/users/2987882/ai"}, "edited": false, "score": 0, "creation_date": 1554197594, "post_id": 55471311, "comment_id": 97653471, "body": "I want Logout display exactly like figure 1"}], "tags": [], "owner": {"reputation": 419, "user_id": 4958351, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZxzO7OcPByw/AAAAAAAAAAI/AAAAAAAAAXw/9TL_toKfeOo/photo.jpg?sz=128", "display_name": "AIMIN PAN", "link": "https://stackoverflow.com/users/4958351/aimin-pan"}, "is_accepted": false, "score": 0, "last_activity_date": 1554197379, "creation_date": 1554197379, "answer_id": 55471311, "question_id": 55470123, "link": "https://stackoverflow.com/questions/55470123/weird-in-popup-menu/55471311#55471311", "title": "Weird in popup menu", "body": "<p>Menu in ActionBar is populated automatically by system, you don't need to write code to populate it.</p>\n\n<p>To achieve the menu like figure 1, fragment_menu should be like:</p>\n\n<pre><code>&lt;menu&gt;\n  &lt;item android:title=\"Search\" /&gt;\n  &lt;item android:title=\"Locate\" /&gt;\n  &lt;item android:title=\"Refresh\" /&gt;\n  &lt;item android:title=\"Help\" /&gt;\n  &lt;item android:title=\"Check for update\" /&gt;\n&lt;/menu&gt;\n</code></pre>\n\n<p>onOptionItemSelected is used to handle when above menu is clicked, not used to show the menu.</p>\n\n<p>popup menu is free position menu like right click menus in windows, not the one you expect in figure 1.</p>\n"}, {"tags": [], "owner": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "is_accepted": true, "score": 2, "last_activity_date": 1554198213, "creation_date": 1554198213, "answer_id": 55471602, "question_id": 55470123, "link": "https://stackoverflow.com/questions/55470123/weird-in-popup-menu/55471602#55471602", "title": "Weird in popup menu", "body": "<p>You are passing the <strong>wrong</strong> <code>view</code> as what @CodeRed mentioned.</p>\n\n<p>Replace  </p>\n\n<pre><code>var popup: PopupMenu? = PopupMenu(context!!, view!!)\n</code></pre>\n\n<p>to</p>\n\n<pre><code>val vItem = getActivity().findViewById&lt;View&gt;(R.id.more)\nvar popup: PopupMenu? = PopupMenu(context!!, vItem)\n</code></pre>\n"}], "owner": {"reputation": 540, "user_id": 2987882, "user_type": "registered", "accept_rate": 91, "profile_image": "https://graph.facebook.com/1619731367/picture?type=large", "display_name": "AI.", "link": "https://stackoverflow.com/users/2987882/ai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 55471602, "answer_count": 2, "score": 0, "last_activity_date": 1554198213, "creation_date": 1554193540, "last_edit_date": 1554196764, "question_id": 55470123, "link": "https://stackoverflow.com/questions/55470123/weird-in-popup-menu", "title": "Weird in popup menu", "body": "<p>I have created a <code>menu</code> icon on action bar. When it is clicked, I expect it will show something like this</p>\n\n<p><a href=\"https://i.stack.imgur.com/JV7S3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JV7S3.png\" alt=\"enter image description here\"></a></p>\n\n<p>But it display on the left hand side instead.</p>\n\n<p><a href=\"https://i.stack.imgur.com/NBkQx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NBkQx.png\" alt=\"enter image description here\"></a></p>\n\n<p>What could be this issue ?</p>\n\n<pre><code> override fun onCreateOptionsMenu(menu: Menu?, inflater: MenuInflater?) {\n        inflater!!.inflate(R.menu.fragment_menu, menu)\n    }\n\n    override fun onOptionsItemSelected(item: MenuItem): Boolean {\n            val id = item.getItemId()\n            if (id == R.id.more) {\n                var popup: PopupMenu? = PopupMenu(context!!, view!!)\n                popup?.menuInflater?.inflate(R.menu.pop_up_menu, popup.menu)\n                popup?.show()\n\n                popup?.setOnMenuItemClickListener({ item: MenuItem? -&gt;\n                    when (item!!.itemId) {\n                        R.id.logOut -&gt; {\n                        }\n                    }\n                    true\n                })\n            } else\n                super.onOptionsItemSelected(item)\n\n            return true\n        }\n</code></pre>\n\n<p><strong>fragment_menu</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;menu xmlns:android=\"http://schemas.android.com/apk/res/android\" xmlns:app=\"http://schemas.android.com/apk/res-auto\"&gt;\n    &lt;item android:id=\"@+id/more\"\n          android:title=\"menu\"\n          app:showAsAction=\"always\"\n          android:icon=\"@drawable/ic_more\"/&gt;\n&lt;/menu&gt;\n</code></pre>\n\n<p><strong>pop_up_menu</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;menu\n        xmlns:android=\"http://schemas.android.com/apk/res/android\" xmlns:app=\"http://schemas.android.com/apk/res-auto\"&gt;\n\n    &lt;item\n            android:id=\"@+id/logOut\"\n            app:showAsAction=\"always\"\n            android:title=\"Log Out\"\n    /&gt;\n\n&lt;/menu&gt;\n</code></pre>\n\n<p>The view  I passing is this</p>\n\n<pre><code>@Nullable\n    public View getView() {\n        return this.mView;\n    }\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-livedata", "mutablelivedata"], "owner": {"reputation": 620, "user_id": 3906919, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/611290901/picture?type=large", "display_name": "Mikkel Larsen", "link": "https://stackoverflow.com/users/3906919/mikkel-larsen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 317, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1554191930, "creation_date": 1554190866, "last_edit_date": 1554191930, "question_id": 55469351, "link": "https://stackoverflow.com/questions/55469351/livedata-and-transformations-switchmap-crashing", "title": "LiveData and Transformations.switchMap crashing", "body": "<p>I've got an app where I want to add a status of some sort, and if added, I want my UI to show a snackbar saying it was added. I've got a repository, where I add my status. If successful, I'll post the value back to my ViewModel. Since it's a snackbar, I want to show it only once, so if I try to add a status again it won't reach the previous state it was in. </p>\n\n<p>So I'm trying to implement the recommended approach from this article: <a href=\"https://medium.com/androiddevelopers/livedata-with-snackbar-navigation-and-other-events-the-singleliveevent-case-ac2622673150\" rel=\"nofollow noreferrer\">https://medium.com/androiddevelopers/livedata-with-snackbar-navigation-and-other-events-the-singleliveevent-case-ac2622673150</a></p>\n\n<p>So I've got the Event class added to my project.</p>\n\n<p>Then my repository looks something like this:</p>\n\n<pre><code>private val _statusAdded = MutableLiveData&lt;Event&lt;AbstractRepositoryCallback.ResultState&lt;Boolean&gt;&gt;&gt;()\noverride val statusAdded: LiveData&lt;Event&lt;AbstractRepositoryCallback.ResultState&lt;Boolean&gt;&gt;&gt; = _statusAdded\n\nval result = _firebaseFunctions.getHttpsCallable(\"someTable\").call(data).awaitResult()\n\nwhen(result)\n{\nis Result.Success -&gt; this._statusAdded.postValue(Event(AbstractRepositoryCallback.ResultState(true, null)))\nis Result.Error -&gt; this._statusAdded.postValue(Event(AbstractRepositoryCallback.ResultState(false, MessageFactory.getError(R.string.create_status_failed_label))))\n}\n</code></pre>\n\n<p>In my ViewModel, I listen to this LiveData like this:</p>\n\n<pre><code>val state: LiveData&lt;DataHolder&lt;Boolean&gt;&gt; = Transformations.switchMap(repository.statusAdded) { data -&gt;\n    getStatusAdded(data)\n}\n\nprivate fun getStatusAdded(data: Event&lt;AbstractRepositoryCallback.ResultState&lt;Boolean&gt;&gt;): LiveData&lt;DataHolder&lt;Boolean&gt;&gt; {\n    data.getContentIfNotHandled()?.let {\n        object : AbstractRepositoryCallback&lt;Boolean&gt;(it) {\n            override fun onSuccess(data: Boolean) {\n                liveData.value = DataHolder.success(data)\n            }\n\n            override fun onError(message: IMessage) {\n                super.onError(message)\n                liveData.value = DataHolder.error(message)\n            }\n        }\n    }\n    return liveData\n}\n</code></pre>\n\n<p>The DataHolder class and AbstractRepositoryCallback are just some classes we've made to make stuff a bit more generic, so don't mind that.</p>\n\n<p>Anyhow, when I try to add the status here, I get the following error:</p>\n\n<pre><code>java.lang.NoClassDefFoundError: Failed resolution of: Ldk/../../ViewModel$getStatusAdded$1$1;\n    at ../../ViewModel.access$getStatusAdded(ViewModel.kt:53)\n</code></pre>\n\n<p>Hopefully someome can help me out with what's happening here, I'm new to this LiveData, but I've followed some guides on how to use it, and most people say this Event class is good for Snackbars etc, it just seems most examples are from ViewModel to Fragment/Activity, and not a bit before.</p>\n\n<p>I open up a new ViewModel each time, so it gets destroyed, so I can't keep the getContentIfNotHandled stuff from the ViewModel. Because it'll always just be false.</p>\n"}, {"tags": ["kotlin", "interface", "android-recyclerview"], "answers": [{"comments": [{"owner": {"reputation": 157, "user_id": 11248404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d46d1dd4aaa17d6a11970b59c2a2a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Kanan", "link": "https://stackoverflow.com/users/11248404/kanan"}, "edited": false, "score": 0, "creation_date": 1554195343, "post_id": 55469671, "comment_id": 97652091, "body": "radioButton.setOnClickListener(_ -&gt; listner.onItemCompanyClick(company))"}, {"owner": {"reputation": 157, "user_id": 11248404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d46d1dd4aaa17d6a11970b59c2a2a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Kanan", "link": "https://stackoverflow.com/users/11248404/kanan"}, "edited": false, "score": 0, "creation_date": 1554198835, "post_id": 55469671, "comment_id": 97654219, "body": "radiobutton value pass next activity"}], "tags": [], "owner": {"reputation": 191, "user_id": 4809601, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-E_KYhCqdz7E/AAAAAAAAAAI/AAAAAAAAAFM/koXjKu-aTEU/photo.jpg?sz=128", "display_name": "Robert LaFondue", "link": "https://stackoverflow.com/users/4809601/robert-lafondue"}, "is_accepted": false, "score": 0, "last_activity_date": 1554192477, "last_edit_date": 1554192477, "creation_date": 1554192008, "answer_id": 55469671, "question_id": 55468936, "link": "https://stackoverflow.com/questions/55468936/recyclerview-radiobutton-click-event-on-activity-kotlin-using-interfaces/55469671#55469671", "title": "recyclerview radiobutton click event on activity kotlin using interfaces", "body": "<p>Your interface is never called, you should call if when user click on your button.</p>\n\n<p>Try something like:</p>\n\n<p>MainActivity.kt</p>\n\n<pre><code>     class Company : AppCompatActivity(),CompanyAdapter.Listner{\n\n       override fun onItemCompanyClick(company: Company){\nToast.makeText(this, \"You clicked: ${company.Cmp_Name}\", Toast.LENGTH_LONG).show()\n    }\n }\n</code></pre>\n\n<p>CompanyAdapter.kt</p>\n\n<pre><code>  class CompanyAdapter(private val listner :Listner, internal var companyList: List&lt;Company&gt;)\n        :RecyclerView.Adapter&lt;CompanyAdapter.CompanyViewHolder&gt;()\n    {\n interface Listner{\n      fun onItemCompanyClick(company: Company)\n    }\n\n        override fun onCreateViewHolder(p0: ViewGroup, p1: Int): CompanyViewHolder {\n\n\n            val itemView = LayoutInflater.from(p0.context).inflate(R.layout.list_view_item,p0,false)\n\n            return CompanyViewHolder(itemView)\n        }\n\n        override fun getItemCount(): Int {\n\n            return companyList.size\n        }\n\n        override fun onBindViewHolder(p0: CompanyViewHolder, p1: Int) {\n\n\n           // p0.rbButton.text = this!!.companyList?.get(p1)?.Cmp_Name\n            p0.bindModel(companyList[p1])\n        }\n\n        inner class CompanyViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView){\n\n            val radioButton : RadioButton = itemView.findViewById(R.id.rbCompanyName)\n\n            fun bindModel(company: Company){\n\n                radioButton.text = company.Cmp_Name\n                radioButton.setOnClickListener(_ -&gt; listner.onItemCompanyClick(company))\n            }\n        }\n    }\n</code></pre>\n\n<p>Also read <a href=\"https://developer.android.com/training/basics/fragments/communicating\" rel=\"nofollow noreferrer\">this guide about interface</a>, hope it helps.</p>\n"}], "owner": {"reputation": 157, "user_id": 11248404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d46d1dd4aaa17d6a11970b59c2a2a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Kanan", "link": "https://stackoverflow.com/users/11248404/kanan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554192477, "creation_date": 1554189314, "question_id": 55468936, "link": "https://stackoverflow.com/questions/55468936/recyclerview-radiobutton-click-event-on-activity-kotlin-using-interfaces", "title": "recyclerview radiobutton click event on activity kotlin using interfaces", "body": "<p>Data Load in Recyclerview after Generated Click Event Item using Interface on \nActivity. code is below but Activity onItemCompanyClick is not execute.</p>\n\n<p>How to Generate click event and get Value from the recyclerview using interfce.  </p>\n\n<p>MainActivity.kt </p>\n\n<pre><code>class Company : AppCompatActivity(),CompanyAdapter.Listner{\n\noverride fun onItemCompanyClick(company: Company) {\n\n        Toast.makeText(this, \"You clicked: ${company.Cmp_Name}\", Toast.LENGTH_LONG).show()\n    }\n\n}\n</code></pre>\n\n<p>CompanyAdapter.kt</p>\n\n<pre><code>class CompanyAdapter(private val listner :Listner, internal var companyList: List&lt;Company&gt;)\n    :RecyclerView.Adapter&lt;CompanyAdapter.CompanyViewHolder&gt;()\n{\n\n    interface Listner {\n\n        fun onItemCompanyClick(company: Company)\n    }\n    override fun onCreateViewHolder(p0: ViewGroup, p1: Int): CompanyViewHolder {\n\n\n        val itemView = LayoutInflater.from(p0.context).inflate(R.layout.list_view_item,p0,false)\n\n        return CompanyViewHolder(itemView)\n    }\n\n    override fun getItemCount(): Int {\n\n        return companyList.size\n    }\n\n    override fun onBindViewHolder(p0: CompanyViewHolder, p1: Int) {\n\n\n       // p0.rbButton.text = this!!.companyList?.get(p1)?.Cmp_Name\n        p0.bindModel(companyList[p1])\n    }\n\n    inner class CompanyViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView){\n\n        val radioButton : RadioButton = itemView.findViewById(R.id.rbCompanyName)\n\n        fun bindModel(company: Company){\n\n            radioButton.text = company.Cmp_Name\n        }\n    }\n\n\n\n}\n</code></pre>\n"}, {"tags": ["spring", "spring-boot", "kotlin", "corda"], "comments": [{"owner": {"reputation": 1786, "user_id": 5383281, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qhNkSRFReEE/AAAAAAAAAAI/AAAAAAAAA6w/kmJaxw-_9rw/photo.jpg?sz=128", "display_name": "Mebin Joe", "link": "https://stackoverflow.com/users/5383281/mebin-joe"}, "edited": false, "score": 0, "creation_date": 1554187974, "post_id": 55467939, "comment_id": 97648266, "body": "which line you getting syntax error ?"}, {"owner": {"reputation": 23, "user_id": 10584667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bba50bc5ee20cd1be94f368fd044697?s=128&d=identicon&r=PG&f=1", "display_name": "D.Jack", "link": "https://stackoverflow.com/users/10584667/d-jack"}, "reply_to_user": {"reputation": 1786, "user_id": 5383281, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qhNkSRFReEE/AAAAAAAAAAI/AAAAAAAAA6w/kmJaxw-_9rw/photo.jpg?sz=128", "display_name": "Mebin Joe", "link": "https://stackoverflow.com/users/5383281/mebin-joe"}, "edited": false, "score": 0, "creation_date": 1554190188, "post_id": 55467939, "comment_id": 97649460, "body": "Line1- val customCriteria = QueryCriteria.VaultCustomQueryCriteria(results)} Line2- val criteria = customCriteria.and(customCriteria), Line3- return ResponseEntity.ok(res)"}], "answers": [{"tags": [], "owner": {"reputation": 1630, "user_id": 9875429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R91b7.jpg?s=128&g=1", "display_name": "Ashutosh Meher", "link": "https://stackoverflow.com/users/9875429/ashutosh-meher"}, "is_accepted": false, "score": 0, "last_activity_date": 1591956354, "creation_date": 1591956354, "answer_id": 62341959, "question_id": 55467939, "link": "https://stackoverflow.com/questions/55467939/how-do-fetch-the-state-with-custome-query-corda-application-using-spring-boot-w/62341959#62341959", "title": "How do fetch the state with custome query? Corda application using Spring boot webserver- error while fetching the result", "body": "<p>I think the issue is because <code>VaultCustomQueryCriteria</code> is applicable only to <code>StatePersistable</code> objects. So you should use <code>PersistentIOU</code> instead of <code>IOUState</code>. Also, I could see incorrect use of brackets. Here is how your code should look like:</p>\n\n<pre><code>@GetMapping(value = [\"getIous\"],produces = [ MediaType.APPLICATION_JSON_VALUE])\nprivate fun getTransactionOne(@RequestParam(value = \"payloadId\") payloadId: String): ResponseEntity&lt;List&lt;IOUState&gt;&gt; {\n        val generalCriteria = QueryCriteria.VaultQueryCriteria(Vault.StateStatus.ALL)\n        val results = builder {\n            val idx = IOUSchemaV1.PersistentIOU::iouId.equal(payloadId);\n            val customCriteria = QueryCriteria.VaultCustomQueryCriteria(idx)\n            val criteria = generalCriteria.and(customCriteria)\n            proxy.vaultQueryBy&lt;IOUState&gt;(criteria);\n        }\n        return ResponseEntity.ok(results)\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 10584667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bba50bc5ee20cd1be94f368fd044697?s=128&d=identicon&r=PG&f=1", "display_name": "D.Jack", "link": "https://stackoverflow.com/users/10584667/d-jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1591956354, "creation_date": 1554185152, "last_edit_date": 1554192017, "question_id": 55467939, "link": "https://stackoverflow.com/questions/55467939/how-do-fetch-the-state-with-custome-query-corda-application-using-spring-boot-w", "title": "How do fetch the state with custome query? Corda application using Spring boot webserver- error while fetching the result", "body": "<p>I have created the IOU in corda applicatiion, the IOU has ID,xml payload in body, partyName. NOW, i want to fetch the state with custome query that is basis on ID. NOTE- i am not using linearID.</p>\n\n<p>Below is my API call- which gives me syntax error on. Can someone please correct me, what is the wrong thing that i am doing. </p>\n\n<pre><code>@GetMapping(value = [\"getIous\"],produces = [ MediaType.APPLICATION_JSON_VALUE])\n    private fun getTransactionOne(@RequestParam(value = \"payloadId\") payloadId: String): ResponseEntity&lt;List&lt;IOUState&gt;&gt; {\n        val generalCriteria = QueryCriteria.VaultQueryCriteria(Vault.StateStatus.ALL)\n        val results = builder { IOUState::iouId.equal(payloadId)\n            val customCriteria = QueryCriteria.VaultCustomQueryCriteria(results)}\n\n            val criteria = customCriteria.and(customCriteria)\n\n            val res = proxy.vaultQueryBy&lt;IOUState&gt;(criteria)\n            return ResponseEntity.ok(res)\n    }\n</code></pre>\n"}, {"tags": ["spring-boot", "servlets", "kotlin", "download"], "comments": [{"owner": {"reputation": 1673, "user_id": 3775934, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/i2TBD.png?s=128&g=1", "display_name": "Scrobot", "link": "https://stackoverflow.com/users/3775934/scrobot"}, "edited": false, "score": 0, "creation_date": 1554185875, "post_id": 55467363, "comment_id": 97647257, "body": "Perhaps, your resource does not have match time to gather fully and only part of it is sent. Try to debug method &#39;loadFileAsResource&#39; and look inside, what is he returned."}, {"owner": {"reputation": 341, "user_id": 8814467, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/810ced661ac8fff319d7b8fd3801c18c?s=128&d=identicon&r=PG&f=1", "display_name": "Aliy", "link": "https://stackoverflow.com/users/8814467/aliy"}, "reply_to_user": {"reputation": 1673, "user_id": 3775934, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/i2TBD.png?s=128&g=1", "display_name": "Scrobot", "link": "https://stackoverflow.com/users/3775934/scrobot"}, "edited": false, "score": 0, "creation_date": 1554195623, "post_id": 55467363, "comment_id": 97652258, "body": "Thanks for the quick replay, I have debugged more than enough. I was wondering  whether it is  linked to keeping connection alive or smth like that, When i have tried downloading this file on browser, at first it downloads some part of it quickly like 100KB out of 150 and remained 50KB so slowly like 6kb per second I dont get it tbh.  to @Scrobot"}], "answers": [{"tags": [], "owner": {"reputation": 341, "user_id": 8814467, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/810ced661ac8fff319d7b8fd3801c18c?s=128&d=identicon&r=PG&f=1", "display_name": "Aliy", "link": "https://stackoverflow.com/users/8814467/aliy"}, "is_accepted": true, "score": 0, "last_activity_date": 1554198541, "creation_date": 1554198541, "answer_id": 55471716, "question_id": 55467363, "link": "https://stackoverflow.com/questions/55467363/how-to-make-file-downloadable-from-server-to-front-end-in-spring-boot-project-c/55471716#55471716", "title": "How to make file downloadable from server to Front End in Spring Boot project, Created Rest API for file downloading but not functioning as expected?", "body": "<blockquote>\n  <p>I have no idea what happened but i have solved above problem by adding some header elements like below:</p>\n</blockquote>\n\n<pre><code>@RequestMapping(value = [\"/download\"], method = [RequestMethod.GET])\n@Throws(IOException::class)\nfun downloadFile(@Valid data: FileDeleteDTO): ResponseEntity&lt;Any&gt; {\n\n    val fileGetFromDb =  baseFileUploaderAttachmentService.getByUid(data.qquuid)\n    val pathFileName = fileGetFromDb.get().filename + '.' + fileGetFromDb.get().extension\n    val originalFileName = fileGetFromDb.get().originalName + '.' + fileGetFromDb.get().extension\n\n    val filePath = UPLOAD_ROOT_FOLDER + fileGetFromDb.get().path + pathFileName\n\n    val file = File(filePath)\n\n    val resource = InputStreamResource(FileInputStream(file))\n    val headers = HttpHeaders()\n\n    headers.add(\"Content-Disposition\", String.format(\"attachment; filename=\\\"%s\\\"\", originalFileName))\n    headers.add(\"Cache-Control\", \"no-cache, no-store, must-revalidate\")\n    headers.add(\"Pragma\", \"no-cache\")\n    headers.add(\"Expires\", \"0\")\n\n    return ResponseEntity.ok().headers(headers).contentLength(\n        file.length()\n    ).contentType((MediaType.valueOf(fileGetFromDb.get().mime_type!!))).body(resource)\n}\n</code></pre>\n\n<blockquote>\n  <p>Just wondering does Cache control has impact on this issue? Where can i learn about headers? </p>\n</blockquote>\n"}], "owner": {"reputation": 341, "user_id": 8814467, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/810ced661ac8fff319d7b8fd3801c18c?s=128&d=identicon&r=PG&f=1", "display_name": "Aliy", "link": "https://stackoverflow.com/users/8814467/aliy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 478, "favorite_count": 0, "accepted_answer_id": 55471716, "answer_count": 1, "score": 1, "last_activity_date": 1554198541, "creation_date": 1554181970, "question_id": 55467363, "link": "https://stackoverflow.com/questions/55467363/how-to-make-file-downloadable-from-server-to-front-end-in-spring-boot-project-c", "title": "How to make file downloadable from server to Front End in Spring Boot project, Created Rest API for file downloading but not functioning as expected?", "body": "<p>In general, I have created rest controller for both uploading and downloading a file from front end (React) to our file system. Uploading works great, as expected. However, downloading rest api not functioning properly. it downloads only 12kb or smth like that of the file. Is there anything [configs] that I am missing in my project or what? Please help! any comment or suggestion would be appreciated thanks in advance </p>\n\n<pre><code>@GetMapping(\"/get\")\n    fun getFile(@Valid data: FileDeleteDTO): ResponseEntity&lt;Resource&gt;{\n\n        val header = HttpHeaders()\n\n        val fileGetFromDb =  baseFileUploaderAttachmentService.getByUid(data.qquuid)\n        if (!fileGetFromDb.isPresent)\n            throw FileNotFoundException()\n        val pathFileName = fileGetFromDb.get().filename + '.' + fileGetFromDb.get().extension\n        val originalFileName = fileGetFromDb.get().originalName + '.' + fileGetFromDb.get().extension\n//        val filePath = UPLOAD_ROOT_FOLDER + fileGetFromDb.get().path + pathFileName\n        val filePath = UPLOAD_ROOT_FOLDER + fileGetFromDb.get().path\n//        val file = File(filePath)\n        header.contentType = (MediaType.valueOf(fileGetFromDb.get().mime_type!!))\n        header.contentLength = fileGetFromDb.get().size\n        header.set(\"Content-Disposition\", \"attachment; filename=$originalFileName\")\n\n        return ResponseEntity.ok()\n                    .headers(header)\n                    .body(loadFileAsResource(pathFileName,Paths.get(filePath)))\n\n    }\n\n\n    fun loadFileAsResource(fileName: String, fileStorageLocation: Path): Resource {\n\n        try {\n            val filePath = fileStorageLocation.resolve(fileName).normalize()\n            val resource = UrlResource(filePath.toUri())\n            return if (resource.exists()) {\n                resource\n            } else {\n                throw FileNotFoundException(\"File not found $fileName\")\n            }\n        } catch (ex: MalformedURLException) {\n            throw Exception(\"File not found $fileName\", ex)\n        }\n\n    }\n</code></pre>\n\n<blockquote>\n  <p><a href=\"https://i.stack.imgur.com/CYaKG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CYaKG.png\" alt=\"This is the result from Insomnia which shows the result in which only some part of image is downloaded\"></a></p>\n</blockquote>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 15590, "user_id": 6478047, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Rd7gY.jpg?s=128&g=1", "display_name": "Manohar Reddy", "link": "https://stackoverflow.com/users/6478047/manohar-reddy"}, "edited": false, "score": 1, "creation_date": 1554178183, "post_id": 55466795, "comment_id": 97645029, "body": "Here is a tip for future purpose , write code in java and paste it in android studio and it will ask to convert it to kotlin , just press yes . It works most of the time for small pieces of code"}], "answers": [{"tags": [], "owner": {"reputation": 3155, "user_id": 10317684, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1vZU7dxLnug/AAAAAAAAAAI/AAAAAAAAATs/NO0fprNnb6s/photo.jpg?sz=128", "display_name": "Ricky Mo", "link": "https://stackoverflow.com/users/10317684/ricky-mo"}, "is_accepted": false, "score": 4, "last_activity_date": 1554180233, "last_edit_date": 1554180233, "creation_date": 1554179113, "answer_id": 55466943, "question_id": 55466795, "link": "https://stackoverflow.com/questions/55466795/remove-word-from-string-list-in-kotlin/55466943#55466943", "title": "Remove Word from String List in Kotlin", "body": "<p><code>removePrefix</code> removes the specific part of the string only if that is the prefix. Obviously, this is not your case. You could do a <code>split</code>, <code>filter</code>, <code>join</code> sequence to yield your expected result.</p>\n\n<pre><code>println(\"SUMMARY WINTER FORMAL\".split(\" \").filter { it != \"SUMMARY\" }.joinToString(\" \")) \n//output : \"WINTER FORMAL\"\n</code></pre>\n\n<p>But if you have multiple contiguous spaces, they will become one space in the output. Also this method does not work if \"SUMMARY\" is not surrounded by spaces, e.g. \"SUMMARYWINTERFORMAL\" won't be changed.</p>\n\n<p>You can remove part of the string by replacing it with empty string, but note that this will keep any surrounding characters including the surrounding spaces.</p>\n\n<pre><code>println(\"SUMMARY WINTER FORMAL\".replace(\"SUMMARY\",\"\"))\n//output : \" WINTER FORMAL\"\n</code></pre>\n\n<p>Note that there is a space in front of \"WINTER\"</p>\n\n<p>If you wan't to include the spaces if any, using Regular Expression would do:</p>\n\n<pre><code>println(\"SUMMARY WINTER FORMAL\".replace(\"\\\\s*SUMMARY\\\\s*\".toRegex(),\"\"))\n//output : \"WINTER FORMAL\"\nprintln(\"SUMMARYWINTERFORMAL\".replace(\"\\\\s*SUMMARY\\\\s*\".toRegex(),\"\"))\n//output : \"WINTERFORMAL\"\nprintln(\"  SUMMARY  WINTER FORMAL\".replace(\"\\\\s*SUMMARY\\\\s*\".toRegex(),\"\"))\n//output : \"WINTER FORMAL\"\n</code></pre>\n\n<p>You can modify the regular expression even more to better suit your use case.</p>\n"}, {"comments": [{"owner": {"reputation": 945, "user_id": 394842, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f635789c47f734898a6e8dd16052dc1?s=128&d=identicon&r=PG&f=1", "display_name": "Genevieve", "link": "https://stackoverflow.com/users/394842/genevieve"}, "edited": false, "score": 0, "creation_date": 1554389221, "post_id": 55467777, "comment_id": 97742359, "body": "Didn&#39;t realize that they couldn&#39;t be changed, thanks!"}], "tags": [], "owner": {"reputation": 4522, "user_id": 101337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fae6fc1741623270471a080b705b1fa0?s=128&d=identicon&r=PG", "display_name": "Alexander Egger", "link": "https://stackoverflow.com/users/101337/alexander-egger"}, "is_accepted": true, "score": 3, "last_activity_date": 1554184286, "creation_date": 1554184286, "answer_id": 55467777, "question_id": 55466795, "link": "https://stackoverflow.com/questions/55466795/remove-word-from-string-list-in-kotlin/55467777#55467777", "title": "Remove Word from String List in Kotlin", "body": "<p>Strings in Kotlin (and Java) are immutable. So <code>item.removePrefix</code> returns a new String and you have to update the list or create a new list like this:</p>\n\n<pre><code>for (item in eventLines) {\n\n    when {\n        item.contains(\"SUMMARY\") -&gt; \n            eventLinesWithPrefixRemoved.add(item.removePrefix(\"SUMMARY\"))\n        else -&gt; eventLinesWithPrefixRemoved.add(item)\n    }\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1673, "user_id": 3775934, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/i2TBD.png?s=128&g=1", "display_name": "Scrobot", "link": "https://stackoverflow.com/users/3775934/scrobot"}, "is_accepted": false, "score": 0, "last_activity_date": 1554186615, "creation_date": 1554186615, "answer_id": 55468247, "question_id": 55466795, "link": "https://stackoverflow.com/questions/55466795/remove-word-from-string-list-in-kotlin/55468247#55468247", "title": "Remove Word from String List in Kotlin", "body": "<p>If you want only to remove 'SUMMARY' from the string, you can use this case</p>\n\n<pre><code>val l = listOf(\"SUMMARY WINTER FORMAL\", \"SUMMARY FORMAL\", \"WINTER FORMAL\", \"SUMMARY WINTER\")\n\n    println(\n        l.map {\n            it.split(\" \")\n                .filter { s -&gt; s != \"SUMMARY\" }\n                .joinToString(\" \")\n        }\n    ) // puts [WINTER FORMAL, FORMAL, WINTER FORMAL, WINTER]\n</code></pre>\n"}], "owner": {"reputation": 945, "user_id": 394842, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f635789c47f734898a6e8dd16052dc1?s=128&d=identicon&r=PG&f=1", "display_name": "Genevieve", "link": "https://stackoverflow.com/users/394842/genevieve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1640, "favorite_count": 0, "accepted_answer_id": 55467777, "answer_count": 3, "score": 4, "last_activity_date": 1554186615, "creation_date": 1554177819, "question_id": 55466795, "link": "https://stackoverflow.com/questions/55466795/remove-word-from-string-list-in-kotlin", "title": "Remove Word from String List in Kotlin", "body": "<p>I have a mutable list of strings and I'm trying to remove a word from each of them. The problem is that I don't believe the word is being removed from each line.</p>\n\n<pre><code>    for (item in stringLines) {\n\n        when {\n\n            item.contains(\"SUMMARY\") -&gt; eventLines.add(item)\n            item.contains(\"DTSTART\") -&gt; startDateLines.add(item)\n            item.contains(\"DTEND\") -&gt; endDateLines.add(item)\n            //item.contains(\"URL:\") -&gt; locationLines.add(item)\n            //item.contains(\"CATEGORIES\") -&gt; categoriesLines.add(item)\n    }\n\n    }\n\n    for (item in eventLines) {\n\n        when{\n            item.contains(\"SUMMARY\") -&gt; item.removePrefix(\"SUMMARY\")\n        }\n\n    }\n</code></pre>\n\n<p>The string is</p>\n\n<pre><code>SUMMARY WINTER FORMAL\n</code></pre>\n\n<p>and I need</p>\n\n<pre><code>WINTER FORMAL\n</code></pre>\n\n<p>but whatever reason it just doesn't appear. I know how to do this in java but I have no idea how to do this in Kotlin and I could not find any function that was able to accomplish this. What am I missing?</p>\n"}, {"tags": ["android", "kotlin", "android-inapp-purchase", "play-billing-library"], "comments": [{"owner": {"reputation": 172, "user_id": 2406925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c47e0a80eac7869985c2933edd44a28?s=128&d=identicon&r=PG", "display_name": "unzila", "link": "https://stackoverflow.com/users/2406925/unzila"}, "edited": false, "score": 0, "creation_date": 1554176617, "post_id": 55466643, "comment_id": 97644744, "body": "try this link <a href=\"https://github.com/StephenVinouze/KinApp\" rel=\"nofollow noreferrer\">github.com/StephenVinouze/KinApp</a>"}], "answers": [{"tags": [], "owner": {"reputation": 771, "user_id": 4464547, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/SU8yD.jpg?s=128&g=1", "display_name": "Tazwar Utshas", "link": "https://stackoverflow.com/users/4464547/tazwar-utshas"}, "is_accepted": true, "score": 1, "last_activity_date": 1556944793, "creation_date": 1556944793, "answer_id": 55979495, "question_id": 55466643, "link": "https://stackoverflow.com/questions/55466643/how-to-implement-android-in-app-purchase-in-kotlin/55979495#55979495", "title": "How to implement Android in app purchase in kotlin?", "body": "<ol>\n<li>Normally billing client doesn't work in emulator. So, either made the emulator work or easier way is to check it in real android phone, where the app will be downloaded using testers email.</li>\n<li>Complete the google play set up very carefully. That part is very useful. The documentation I used over there is actually very good. I could not understood it fully first. It was my fault. Also, You can check <a href=\"https://println.home.blog/2019/05/04/google-play-in-app-purchase-in-kotlin/\" rel=\"nofollow noreferrer\">this documentation</a>.</li>\n</ol>\n"}], "owner": {"reputation": 771, "user_id": 4464547, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/SU8yD.jpg?s=128&g=1", "display_name": "Tazwar Utshas", "link": "https://stackoverflow.com/users/4464547/tazwar-utshas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2773, "favorite_count": 3, "accepted_answer_id": 55979495, "answer_count": 1, "score": 6, "last_activity_date": 1557466777, "creation_date": 1554176455, "last_edit_date": 1554176964, "question_id": 55466643, "link": "https://stackoverflow.com/questions/55466643/how-to-implement-android-in-app-purchase-in-kotlin", "title": "How to implement Android in app purchase in kotlin?", "body": "<p>I want to implement Google Play's billing for my android app's in-app purchase, which is written in kotlin. I am following <a href=\"https://medium.com/chili-labs/tutorial-google-play-billing-in-app-purchases-6143bda8d290\" rel=\"noreferrer\">this tutorial</a>.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>private lateinit var billingClient: BillingClient\n    private lateinit var productsAdapter: ProductsAdapter\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        setupBillingClient()\n    }\n\n    private fun setupBillingClient() {\n        billingClient = BillingClient\n            .newBuilder(this)\n            .setListener(this)\n            .build()\n\n        billingClient.startConnection(object : BillingClientStateListener {\n            override fun onBillingSetupFinished(@BillingClient.BillingResponse billingResponseCode: Int) {\n                if (billingResponseCode == BillingClient.BillingResponse.OK) {\n                    println(\"BILLING | startConnection | RESULT OK\")\n                } else {\n                    println(\"BILLING | startConnection | RESULT: $billingResponseCode\")\n                }\n            }\n\n            override fun onBillingServiceDisconnected() {\n                println(\"BILLING | onBillingServiceDisconnected | DISCONNECTED\")\n            }\n        })\n    }\n\n    fun onLoadProductsClicked(view: View) {\n        if (billingClient.isReady) {\n            val params = SkuDetailsParams\n                .newBuilder()\n                .setSkusList(skuList)\n                .setType(BillingClient.SkuType.INAPP)\n                .build()\n            billingClient.querySkuDetailsAsync(params) { responseCode, skuDetailsList -&gt;\n                if (responseCode == BillingClient.BillingResponse.OK) {\n                    println(\"querySkuDetailsAsync, responseCode: $responseCode\")\n                    initProductAdapter(skuDetailsList)\n                } else {\n                    println(\"Can't querySkuDetailsAsync, responseCode: $responseCode\")\n                }\n            }\n        } else {\n            println(\"Billing Client not ready\")\n        }\n    }\n\n\n    private fun initProductAdapter(skuDetailsList: List&lt;SkuDetails&gt;) {\n        productsAdapter = ProductsAdapter(skuDetailsList) {\n            val billingFlowParams = BillingFlowParams\n                .newBuilder()\n                .setSkuDetails(it)\n                .build()\n            billingClient.launchBillingFlow(this, billingFlowParams)\n        }\n        //products.adapter = productsAdapter\n\n    }\n\n    override fun onPurchasesUpdated(responseCode: Int, purchases: MutableList&lt;Purchase&gt;?) {\n        println(\"onPurchasesUpdated: $responseCode\")\n        allowMultiplePurchases(purchases)\n    }\n\n    private fun allowMultiplePurchases(purchases: MutableList&lt;Purchase&gt;?) {\n        val purchase = purchases?.first()\n        if (purchase != null) {\n            billingClient.consumeAsync(purchase.purchaseToken) { responseCode, purchaseToken -&gt;\n                if (responseCode == BillingClient.BillingResponse.OK &amp;&amp; purchaseToken != null) {\n                    println(\"AllowMultiplePurchases success, responseCode: $responseCode\")\n                } else {\n                    println(\"Can't allowMultiplePurchases, responseCode: $responseCode\")\n                }\n            }\n        }\n    }\n\n    private fun clearHistory() {\n        billingClient.queryPurchases(BillingClient.SkuType.INAPP).purchasesList\n            .forEach {\n                billingClient.consumeAsync(it.purchaseToken) { responseCode, purchaseToken -&gt;\n                    if (responseCode == BillingClient.BillingResponse.OK &amp;&amp; purchaseToken != null) {\n                        println(\"onPurchases Updated consumeAsync, purchases token removed: $purchaseToken\")\n                    } else {\n                        println(\"onPurchases some troubles happened: $responseCode\")\n                    }\n                }\n            }\n    }\n\n    companion object {\n        private val skuList = listOf(\"get_5_coins\", \"get_10_coins\")\n    }\n</code></pre>\n\n<p>I also added <code>implementation 'com.android.billingclient:billing:1.2.2'</code> in my <code>build.gradle</code> and also added <code>com.android.vending.BILLING</code> and Internet uses-permission in my menifest file.</p>\n\n<p>When I'm running this code, it is showing that billing client isn't ready.</p>\n"}, {"tags": ["rest", "http", "kotlin", "parse-platform"], "comments": [{"owner": {"reputation": 67098, "user_id": 1235698, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90fd9ad4efef8eb93209f42183c48f3e?s=128&d=identicon&r=PG", "display_name": "Marcin Orlowski", "link": "https://stackoverflow.com/users/1235698/marcin-orlowski"}, "edited": false, "score": 0, "creation_date": 1554174033, "post_id": 55466343, "comment_id": 97644187, "body": "<code>that causes an error</code> why? it&#39;s pretty valid. Just ensure you decode it back once received"}, {"owner": {"reputation": 5134, "user_id": 4785114, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/7R0VR.jpg?s=128&g=1", "display_name": "alexpfx", "link": "https://stackoverflow.com/users/4785114/alexpfx"}, "reply_to_user": {"reputation": 67098, "user_id": 1235698, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90fd9ad4efef8eb93209f42183c48f3e?s=128&d=identicon&r=PG", "display_name": "Marcin Orlowski", "link": "https://stackoverflow.com/users/1235698/marcin-orlowski"}, "edited": false, "score": 0, "creation_date": 1554174495, "post_id": 55466343, "comment_id": 97644299, "body": "how? the server is not mine. I received an http 500 error."}], "answers": [{"tags": [], "owner": {"reputation": 600, "user_id": 3134635, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/dqbZ1.jpg?s=128&g=1", "display_name": "ssakash", "link": "https://stackoverflow.com/users/3134635/ssakash"}, "is_accepted": true, "score": 1, "last_activity_date": 1554182468, "creation_date": 1554182468, "answer_id": 55467432, "question_id": 55466343, "link": "https://stackoverflow.com/questions/55466343/fuel-http-avoid-url-encoding/55467432#55467432", "title": "Fuel HTTP - Avoid URL encoding", "body": "<p>Here is a clear instruction about using the rest api. </p>\n\n<p><a href=\"https://docs.parseplatform.org/rest/guide/#query-constraints\" rel=\"nofollow noreferrer\">https://docs.parseplatform.org/rest/guide/#query-constraints</a></p>\n\n<p>The value/formatting of where key is wrong. You must use double quotes and ':' instead of directly using the query key with '='. </p>\n\n<p>So your encoded URL should be something like this one: \n<a href=\"https://parseapi.back4app.com/classes/tournaments?where=%7B%22name%22%3A%22Brasileir%C3%A3o%2B2019%22%7D\" rel=\"nofollow noreferrer\">https://parseapi.back4app.com/classes/tournaments?where=%7B%22name%22%3A%22Brasileir%C3%A3o%2B2019%22%7D</a></p>\n"}, {"tags": [], "owner": {"reputation": 5134, "user_id": 4785114, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/7R0VR.jpg?s=128&g=1", "display_name": "alexpfx", "link": "https://stackoverflow.com/users/4785114/alexpfx"}, "is_accepted": false, "score": 0, "last_activity_date": 1554199356, "creation_date": 1554199356, "answer_id": 55472011, "question_id": 55466343, "link": "https://stackoverflow.com/questions/55466343/fuel-http-avoid-url-encoding/55472011#55472011", "title": "Fuel HTTP - Avoid URL encoding", "body": "<p>In fact it wasn't an encoding problem. </p>\n\n<p>I change my kotlin code to the snippet below replacing the Map inside listOf by plain string and it works. </p>\n\n<pre><code>val (request, _, result)\n                = Fuel.get(baseUrl.plus(\"/classes/Tournaments\"), listOf(\"where\" to \"{\\\"name\\\": \\\"$name\\\"}\")).responseString()\n        val (payload, error) = result\n</code></pre>\n"}], "owner": {"reputation": 5134, "user_id": 4785114, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/7R0VR.jpg?s=128&g=1", "display_name": "alexpfx", "link": "https://stackoverflow.com/users/4785114/alexpfx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 340, "favorite_count": 0, "accepted_answer_id": 55467432, "answer_count": 2, "score": -1, "last_activity_date": 1554199356, "creation_date": 1554173942, "last_edit_date": 1554175171, "question_id": 55466343, "link": "https://stackoverflow.com/questions/55466343/fuel-http-avoid-url-encoding", "title": "Fuel HTTP - Avoid URL encoding", "body": "<p>Using retrofit I could make a get and avoid URL encoded like below:</p>\n\n<pre><code>@GET(\"classes/Tournaments\")\n    fun searchTournament(@Query(value = \"where\", encoded = false) query: String): Call&lt;List&lt;Tournament&gt;&gt;\n</code></pre>\n\n<p>In Fuel this GET request: </p>\n\n<pre><code>fun searchTournament(name: String): Any {\n    val (request, _, result)\n            = Fuel.get(baseUrl.plus(\"/classes/tournaments\"), listOf(\"where\" to mapOf(\"name\" to name))).responseString()\n    val (payload, error) = result\n\n    println(request.url)\n\n    return \"\"\n}\n</code></pre>\n\n<p>generate this URL: <code>https://parseapi.back4app.com/classes/tournaments?where=%7Bname%3DBrasileir%C3%A3o+2019%7D</code> that causes an error.</p>\n\n<p>I could not found anything clear in docs about avoids encoded. Is this possible?</p>\n\n<p>My app is a Kotlin console App (Without Android)</p>\n\n<p>When I send this Query to server it responds with an Http 500 - Internal Server Errors (without more details). I think it is not understanding the query. </p>\n\n<pre><code>2019-04-02T03:17:23.314Z - Uncaught internal server error.\n</code></pre>\n\n<p>The server is an instance of ParseServer(Back4App) I couldn't decode the query there. </p>\n"}, {"tags": ["kotlin", "code-cleanup"], "comments": [{"owner": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "edited": false, "score": 0, "creation_date": 1554173189, "post_id": 55465985, "comment_id": 97644004, "body": "Don&#39;t you think you should just remove the very last <code>.toList()</code>?"}, {"owner": {"reputation": 2246, "user_id": 9038584, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/POPil.jpg?s=128&g=1", "display_name": "Tenten Ponce", "link": "https://stackoverflow.com/users/9038584/tenten-ponce"}, "reply_to_user": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "edited": false, "score": 0, "creation_date": 1554173310, "post_id": 55465985, "comment_id": 97644033, "body": "sorry just to add, I also don&#39;t think my solution is that much clean, maybe if there&#39;s any suggestion on how to do it in a cleaner way."}, {"owner": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "edited": false, "score": 0, "creation_date": 1554181422, "post_id": 55465985, "comment_id": 97645732, "body": "also shouldn&#39;t you be using a <code>Map</code> instead of a list?"}, {"owner": {"reputation": 2246, "user_id": 9038584, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/POPil.jpg?s=128&g=1", "display_name": "Tenten Ponce", "link": "https://stackoverflow.com/users/9038584/tenten-ponce"}, "reply_to_user": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "edited": false, "score": 0, "creation_date": 1554183056, "post_id": 55465985, "comment_id": 97646189, "body": "Yes I do use a <code>Map</code> to swap value via key easily. I&#39;m trying to look for a cleaner approach in my code above (nested for loop)."}], "answers": [{"comments": [{"owner": {"reputation": 2246, "user_id": 9038584, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/POPil.jpg?s=128&g=1", "display_name": "Tenten Ponce", "link": "https://stackoverflow.com/users/9038584/tenten-ponce"}, "edited": false, "score": 0, "creation_date": 1554254714, "post_id": 55469342, "comment_id": 97680550, "body": "I don&#39;t think nests are easy to read at first, that&#39;s why I&#39;m looking for some operators that will reduce or remove it, but, must still be readable."}], "tags": [], "owner": {"reputation": 191, "user_id": 4809601, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-E_KYhCqdz7E/AAAAAAAAAAI/AAAAAAAAAFM/koXjKu-aTEU/photo.jpg?sz=128", "display_name": "Robert LaFondue", "link": "https://stackoverflow.com/users/4809601/robert-lafondue"}, "is_accepted": false, "score": 0, "last_activity_date": 1554190822, "creation_date": 1554190822, "answer_id": 55469342, "question_id": 55465985, "link": "https://stackoverflow.com/questions/55465985/kotlin-nested-for-loops-to-assequence/55469342#55469342", "title": "Kotlin nested for loops to asSequence", "body": "<p>Why do you want to use asSequence() ? You can go for something like that:</p>\n\n<pre><code> val myFields = getMyFields()\n val otherFields = getOtherFields()\n\n        myFields.forEach{firstField -&gt;\n            otherFields.forEach{secondField -&gt;\n                if (firstField.key == secondField.key) {\n                    myFields[myFields.indexOf(firstField)] = secondField.value\n                }\n            }\n        }\n</code></pre>\n\n<p>This will do the same job than your nested for loop and it's easier to read, to understand and so to maintain than your nested asSequence().</p>\n"}, {"comments": [{"owner": {"reputation": 2246, "user_id": 9038584, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/POPil.jpg?s=128&g=1", "display_name": "Tenten Ponce", "link": "https://stackoverflow.com/users/9038584/tenten-ponce"}, "edited": false, "score": 0, "creation_date": 1554254847, "post_id": 55477863, "comment_id": 97680571, "body": "This is what I&#39;m looking for, thanks also for the explanation, I&#39;ll just adjust this according to my actual needs :)"}], "tags": [], "owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "is_accepted": true, "score": 2, "last_activity_date": 1554217198, "creation_date": 1554217198, "answer_id": 55477863, "question_id": 55465985, "link": "https://stackoverflow.com/questions/55465985/kotlin-nested-for-loops-to-assequence/55477863#55477863", "title": "Kotlin nested for loops to asSequence", "body": "<p>As comments suggest, this would probably be much more efficient with a <code>Map</code>.</p>\n\n<p>(More precisely, a map solution would take time proportional to the <em>sum</em> of the list lengths, while the nested for loop takes time proportional to their <em>product</em> \u2014 which gets bigger much faster.)</p>\n\n<p>Here's one way of doing that:</p>\n\n<pre><code>val otherFields = getOtherFields().associate{ it.key to it.value }\n\nval myFields = getMyFields().map {\n    val otherValue = otherFields[it.key]\n    if (otherValue != null) it.copy(value = otherValue) else it\n}\n</code></pre>\n\n<p>The first line creates a <code>Map</code> from the \u2018other fields\u2019 keys to their values.\u00a0 The rest then uses it to create a new list from \u2018my fields\u2019, substituting the values from the \u2018other fields\u2019 where present.</p>\n\n<p>I've had to make assumptions about the types &amp;c, since the code in the question is incomplete, but this should do the same.\u00a0 Obviously, you can change how it merges the values by amending the <code>it.copy()</code>.</p>\n\n<p>There are likely to be even simpler and more efficient ways, depending on the surrounding code.\u00a0 If you expanded it into a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a> \u2014 in particular, one that illustrates how you already use a <code>Map</code>, as per your comment \u2014 we might be able to suggest something better.</p>\n"}], "owner": {"reputation": 2246, "user_id": 9038584, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/POPil.jpg?s=128&g=1", "display_name": "Tenten Ponce", "link": "https://stackoverflow.com/users/9038584/tenten-ponce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 772, "favorite_count": 0, "accepted_answer_id": 55477863, "answer_count": 2, "score": 0, "last_activity_date": 1554217198, "creation_date": 1554171105, "question_id": 55465985, "link": "https://stackoverflow.com/questions/55465985/kotlin-nested-for-loops-to-assequence", "title": "Kotlin nested for loops to asSequence", "body": "<p>I'm trying to convert my nested for loop to <code>asSequence</code> in Kotlin. Here, my goal is to <strong>get and update the value of all my object array</strong> from <strong>another object array with the same key</strong>.</p>\n\n<p>nested for loop:</p>\n\n<pre><code>val myFields = getMyFields()\nval otherFields = getOtherFields()\n\nfor (myField in myFields) { // loop tru the my fields\n     for (otherField in otherFields) { // find the same fields\n          if (myField.key == otherField.key) { // if the same, update the value\n              val updatedMyField = myField.copy(value = otherValue.value)\n\n              myFields[myFields.indexOf(myField)] = updatedMyField // update my field value\n              break\n           }\n      }\n}\n</code></pre>\n\n<p>What I've tried:</p>\n\n<pre><code>val updatedMyFields = getMyFields().asSequence()\n                    .map { myField -&gt;\n                        getOtherFields().asSequence()\n                            .map { otherField -&gt;\n                                if (myField.key == otherField.key) {\n                                    return@map otherField.value\n                                } else {\n                                    return@map \"\"\n                                }\n                            }\n                            .filter { it?.isNotEmpty() == true }\n                            .first()?.map { myField.copy(value = it.toString()) }\n                    }\n                    .toList()\n</code></pre>\n\n<p>but this does not compile as it will return <code>List&lt;List&lt;MyField&gt;&gt;</code>.</p>\n\n<p>I'm just looking for something much cleaner for this.</p>\n"}, {"tags": ["kotlin", "junit", "kotlin-coroutines"], "answers": [{"comments": [{"owner": {"reputation": 4336, "user_id": 819651, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b3b2801b397b45b57b784c83b6274e22?s=128&d=identicon&r=PG", "display_name": "Lu&#237;s Soares", "link": "https://stackoverflow.com/users/819651/lu%c3%ads-soares"}, "edited": false, "score": 0, "creation_date": 1554186679, "post_id": 55468079, "comment_id": 97647609, "body": "Thanks! But won&#39;t that make <code>concurrentCall</code> be blocking? Or is that <code>awaitAll</code> in the context of the threads?"}, {"owner": {"reputation": 4522, "user_id": 101337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fae6fc1741623270471a080b705b1fa0?s=128&d=identicon&r=PG", "display_name": "Alexander Egger", "link": "https://stackoverflow.com/users/101337/alexander-egger"}, "reply_to_user": {"reputation": 4336, "user_id": 819651, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b3b2801b397b45b57b784c83b6274e22?s=128&d=identicon&r=PG", "display_name": "Lu&#237;s Soares", "link": "https://stackoverflow.com/users/819651/lu%c3%ads-soares"}, "edited": false, "score": 1, "creation_date": 1554190819, "post_id": 55468079, "comment_id": 97649769, "body": "Yes this makes <code>concurrentCrawl</code> blocking but the individual crawls will be carried out in parallel. If you want to wait for the jobs to continue outside of <code>concurrentCrawl</code> you have to pass the job to the calling function. I included an example for that in my answer"}, {"owner": {"reputation": 4336, "user_id": 819651, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b3b2801b397b45b57b784c83b6274e22?s=128&d=identicon&r=PG", "display_name": "Lu&#237;s Soares", "link": "https://stackoverflow.com/users/819651/lu%c3%ads-soares"}, "edited": false, "score": 0, "creation_date": 1554198370, "post_id": 55468079, "comment_id": 97653956, "body": "was the <code>suspend</code> needed? I&#39;m not sure from the docs when it should be used. thanks!"}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 1, "creation_date": 1554203813, "post_id": 55468079, "comment_id": 97657315, "body": "In the first case, <code>awaitAll</code> suspends so <code>concurrentCrawl</code> must be a <code>suspend fun</code>. In the second case it never suspends, therefore it shouldn&#39;t be a <code>suspend fun</code>. Also, don&#39;t use <code>async</code> when you aren&#39;t getting a result value from the coroutine. Basically, <code>Deferred&lt;Unit&gt;</code> is a code smell all of its own."}, {"owner": {"reputation": 4336, "user_id": 819651, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b3b2801b397b45b57b784c83b6274e22?s=128&d=identicon&r=PG", "display_name": "Lu&#237;s Soares", "link": "https://stackoverflow.com/users/819651/lu%c3%ads-soares"}, "edited": false, "score": 0, "creation_date": 1554208918, "post_id": 55468079, "comment_id": 97660603, "body": "So.. suspending means it can run in parallel or suspended without blocking the main flow right? Regarding <code>Deferred&lt;Unit&gt;</code>, I suppose you mean I should use <code>launch</code> instead."}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1554215640, "post_id": 55468079, "comment_id": 97664941, "body": "Yes, use <code>launch</code> and <code>Job.join()</code> instead of <code>Deferred.await()</code>."}, {"owner": {"reputation": 4522, "user_id": 101337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fae6fc1741623270471a080b705b1fa0?s=128&d=identicon&r=PG", "display_name": "Alexander Egger", "link": "https://stackoverflow.com/users/101337/alexander-egger"}, "edited": false, "score": 0, "creation_date": 1554218327, "post_id": 55468079, "comment_id": 97666664, "body": "Thanks for pointing out the <code>Deferred&lt;Unit&gt;</code> code smell. Added the <code>launch</code> version to the answer"}], "tags": [], "owner": {"reputation": 4522, "user_id": 101337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fae6fc1741623270471a080b705b1fa0?s=128&d=identicon&r=PG", "display_name": "Alexander Egger", "link": "https://stackoverflow.com/users/101337/alexander-egger"}, "is_accepted": true, "score": 3, "last_activity_date": 1554218325, "last_edit_date": 1554218325, "creation_date": 1554185821, "answer_id": 55468079, "question_id": 55464901, "link": "https://stackoverflow.com/questions/55464901/testing-coroutines-in-kotlin/55468079#55468079", "title": "Testing coroutines in Kotlin", "body": "<p><code>runBlocking</code> waits for all suspend functions to finish, but as <code>concurrentCrawl</code> basically just starts new jobs in new threads with <code>GlobalScope.async</code> <code>currentCrawl</code>, and therefore <code>runBlocking</code>, is done after all jobs were started and not after all of this jobs have finished.</p>\n\n<p>You have to wait for all jobs started with <code>GlobalScope.async</code> to finish like this:</p>\n\n<pre><code>suspend fun concurrentCrawl() {\n    cities.map { loc -&gt;\n        1.rangeTo(10).map { start -&gt;\n            GlobalScope.async {\n                val rests = scrapYelp.scrap(loc, start * 10)\n                restaurantsRepository.saveAll(rests)\n            }\n        }.awaitAll()\n    }\n}\n</code></pre>\n\n<p>If you want to wait for <code>concurrentCrawl()</code> to finish outside of <code>concurrentCrawl()</code> then you have to pass the <code>Deferred</code> results to the calling function like in the following example. In that case the <code>suspend</code> keyword can be removed from <code>concurrentCrawl()</code>.</p>\n\n<pre><code>fun concurrentCrawl(): List&lt;Deferred&lt;Unit&gt;&gt; {\n    return cities.map { loc -&gt;\n        1.rangeTo(10).map { start -&gt;\n            GlobalScope.async {\n                println(\"hallo world $start\")\n            }\n        }\n    }.flatten()\n}\n\n\nrunBlocking {\n    concurrentCrawl().awaitAll()\n}\n</code></pre>\n\n<p>As mentioned in the comments: In this case the <code>async</code> method does not return any value so it is better to use launch instead:</p>\n\n<pre><code>fun concurrentCrawl(): List&lt;Job&gt; {\n    return cities.map { loc -&gt;\n        1.rangeTo(10).map { start -&gt;\n            GlobalScope.launch {\n                println(\"hallo world $start\")\n            }\n        }\n    }.flatten()\n}\n\nrunBlocking {\n    concurrentCrawl().joinAll()\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 429, "user_id": 7537239, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OFGLGjeP0xA/AAAAAAAAAAI/AAAAAAAAXTo/kD7R7-ivZfo/photo.jpg?sz=128", "display_name": "RBusarow", "link": "https://stackoverflow.com/users/7537239/rbusarow"}, "is_accepted": false, "score": 2, "last_activity_date": 1554378922, "creation_date": 1554378922, "answer_id": 55515411, "question_id": 55464901, "link": "https://stackoverflow.com/questions/55464901/testing-coroutines-in-kotlin/55515411#55515411", "title": "Testing coroutines in Kotlin", "body": "<p>You could also just use <a href=\"https://mockk.io\" rel=\"nofollow noreferrer\">MockK</a> for this (and so much more).</p>\n\n<p>MockK's <code>verify</code> has a <code>timeout : Long</code> parameter specifically for handling these races in tests.</p>\n\n<p>You could leave your production code as it is, and change your test to this:</p>\n\n<pre><code>import io.mockk.verify\n\n@Test\nfun `test X`() = runBlocking {\n   // ... \n\n   crawlYelp.concurrentCrawl()\n\n   verify(exactly = 40, timeout = 5000L) {\n      restaurantsRepository.saveAll(restaurants)\n   }\n   // ...\n}\n</code></pre>\n\n<p>If the verify is successful at any point before 5 seconds, it'll pass and move on.  Else, the verify (and test) will fail.</p>\n"}], "owner": {"reputation": 4336, "user_id": 819651, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b3b2801b397b45b57b784c83b6274e22?s=128&d=identicon&r=PG", "display_name": "Lu&#237;s Soares", "link": "https://stackoverflow.com/users/819651/lu%c3%ads-soares"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1403, "favorite_count": 0, "accepted_answer_id": 55468079, "answer_count": 2, "score": 3, "last_activity_date": 1554378922, "creation_date": 1554161104, "last_edit_date": 1554233897, "question_id": 55464901, "link": "https://stackoverflow.com/questions/55464901/testing-coroutines-in-kotlin", "title": "Testing coroutines in Kotlin", "body": "<p>I have this simple test about a crawler that is supposed to call the repo 40 times:</p>\n\n<pre><code>@Test\nfun testX() {\n   // ... \n   runBlocking {\n        crawlYelp.concurrentCrawl()\n        // Thread.sleep(5000) // works if I un-comment\n   }\n   verify(restaurantsRepository, times(40)).saveAll(restaurants)\n   // ...\n}\n</code></pre>\n\n<p>and this implementation:</p>\n\n<pre><code>suspend fun concurrentCrawl() {\n    cities.map { loc -&gt;\n        1.rangeTo(10).map { start -&gt;\n            GlobalScope.async {\n                val rests = scrapYelp.scrap(loc, start * 10)\n                restaurantsRepository.saveAll(rests)\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>But... I get this:</p>\n\n<pre><code>Wanted 40 times:\n-&gt; at ....testConcurrentCrawl(CrawlYelpTest.kt:46)\nBut was 30 times:\n</code></pre>\n\n<p>(the 30 is changing all the time; so it seems the test is not waiting...)</p>\n\n<p>Why does it pass when I do the sleep? It should not be needed given I run blocking..</p>\n\n<p>BTW, I have a controller that is supposed to be kept asynchronous:</p>\n\n<pre><code>@PostMapping(\"crawl\")\nsuspend fun crawl(): String {\n    crawlYelp.concurrentCrawl()\n    return \"crawling\" // this is supposed to be returned right away\n}\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["java", "android", "generics", "kotlin", "interface"], "comments": [{"owner": {"reputation": 16481, "user_id": 1392277, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yJUSK.jpg?s=128&g=1", "display_name": "LppEdd", "link": "https://stackoverflow.com/users/1392277/lppedd"}, "edited": false, "score": 3, "creation_date": 1554155656, "post_id": 55463812, "comment_id": 97640285, "body": "Btw, this is harder than I thought. At least for my Kotlin knowledge"}, {"owner": {"reputation": 560, "user_id": 3187706, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAUgX.png?s=128&g=1", "display_name": "mrpasqal", "link": "https://stackoverflow.com/users/3187706/mrpasqal"}, "reply_to_user": {"reputation": 16481, "user_id": 1392277, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yJUSK.jpg?s=128&g=1", "display_name": "LppEdd", "link": "https://stackoverflow.com/users/1392277/lppedd"}, "edited": false, "score": 1, "creation_date": 1554190006, "post_id": 55463812, "comment_id": 97649348, "body": "I also thought that converting the Java code to Kotlin would be straight-forward, but in cases when you have a lot abstraction it gets much complicated."}], "answers": [{"comments": [{"owner": {"reputation": 560, "user_id": 3187706, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAUgX.png?s=128&g=1", "display_name": "mrpasqal", "link": "https://stackoverflow.com/users/3187706/mrpasqal"}, "edited": false, "score": 0, "creation_date": 1554189112, "post_id": 55464376, "comment_id": 97648901, "body": "This is true for the declaration part, but I need this on the caller side."}], "tags": [], "owner": {"reputation": 1121, "user_id": 1142467, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0BAic.png?s=128&g=1", "display_name": "seeming.amusing", "link": "https://stackoverflow.com/users/1142467/seeming-amusing"}, "is_accepted": false, "score": 0, "last_activity_date": 1554157249, "creation_date": 1554157249, "answer_id": 55464376, "question_id": 55463812, "link": "https://stackoverflow.com/questions/55463812/invoking-a-method-with-a-generic-type-in-kotlin-with-multiple-parameter-type-con/55464376#55464376", "title": "Invoking a method with a generic type in Kotlin with multiple parameter type constraints", "body": "<p>You should be able to achieve this using the following:</p>\n\n<pre><code>fun &lt;T&gt; getSpecificView() where T : View, T : ISSpecificView {}\n</code></pre>\n\n<p>Documentation for this can be found <a href=\"https://kotlinlang.org/docs/reference/generics.html#upper-bounds\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 560, "user_id": 3187706, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAUgX.png?s=128&g=1", "display_name": "mrpasqal", "link": "https://stackoverflow.com/users/3187706/mrpasqal"}, "edited": false, "score": 0, "creation_date": 1554189848, "post_id": 55464390, "comment_id": 97649268, "body": "This looks promising, however a bit hacky than generic solution - providing that I have to deal with several cases like this, I&#39;d need to create a new abstract class for each interface I need to combine with the <code>View</code> class. Will check it out.  Still it would be nice to simply provide something alike <code>&lt;View &amp; ISpecificView&gt;</code> for the callers. Maybe this should be a new ticket for Jetbrains?"}, {"owner": {"reputation": 16481, "user_id": 1392277, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yJUSK.jpg?s=128&g=1", "display_name": "LppEdd", "link": "https://stackoverflow.com/users/1392277/lppedd"}, "reply_to_user": {"reputation": 560, "user_id": 3187706, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAUgX.png?s=128&g=1", "display_name": "mrpasqal", "link": "https://stackoverflow.com/users/3187706/mrpasqal"}, "edited": false, "score": 1, "creation_date": 1554190808, "post_id": 55464390, "comment_id": 97649764, "body": "@mrpasqal Feel free to answer there <a href=\"https://discuss.kotlinlang.org/t/calling-java-from-kotlin-type-inference-for-t-extends-one-two/12191\" rel=\"nofollow noreferrer\">discuss.kotlinlang.org/t/&hellip;</a>"}, {"owner": {"reputation": 16481, "user_id": 1392277, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yJUSK.jpg?s=128&g=1", "display_name": "LppEdd", "link": "https://stackoverflow.com/users/1392277/lppedd"}, "reply_to_user": {"reputation": 560, "user_id": 3187706, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAUgX.png?s=128&g=1", "display_name": "mrpasqal", "link": "https://stackoverflow.com/users/3187706/mrpasqal"}, "edited": false, "score": 0, "creation_date": 1554192182, "post_id": 55464390, "comment_id": 97650431, "body": "@mrpasqal I updated the answer with more precise code."}, {"owner": {"reputation": 560, "user_id": 3187706, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAUgX.png?s=128&g=1", "display_name": "mrpasqal", "link": "https://stackoverflow.com/users/3187706/mrpasqal"}, "edited": false, "score": 1, "creation_date": 1554195469, "post_id": 55464390, "comment_id": 97652171, "body": "Good catch. This helps a lot. Since there is no more elegant solution in place, I&#39;m marking this as an accepted answer. Not much elegant, but works.  It looks like Kotlin sill has to improve. Thanks for your support @LeppEdd!"}], "tags": [], "owner": {"reputation": 16481, "user_id": 1392277, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yJUSK.jpg?s=128&g=1", "display_name": "LppEdd", "link": "https://stackoverflow.com/users/1392277/lppedd"}, "is_accepted": true, "score": 6, "last_activity_date": 1554192489, "last_edit_date": 1554192489, "creation_date": 1554157312, "answer_id": 55464390, "question_id": 55463812, "link": "https://stackoverflow.com/questions/55463812/invoking-a-method-with-a-generic-type-in-kotlin-with-multiple-parameter-type-con/55464390#55464390", "title": "Invoking a method with a generic type in Kotlin with multiple parameter type constraints", "body": "<p>To recap (and I hope I got the question right!), in Java you can do</p>\n\n<pre><code>final View view = getContainer().getSpecificView();  // or\nfinal ISpecificView iview = getContainer().getSpecificView();\n</code></pre>\n\n<p>In Kotlin the same thing</p>\n\n<pre><code>val view: View = getContainer().getSpecificView()\n</code></pre>\n\n<p>results in <code>Type inference failed: Not enough information to infer parameter T</code></p>\n\n<hr>\n\n<p>After 50 minutes of trying and trying...<br>\nJust create a dummy <code>class</code> (abstract?) </p>\n\n<pre><code>abstract class KView : View(), ISpecificView\n</code></pre>\n\n<p>And use it to explicitly set a generic return type</p>\n\n<pre><code>val view: View = getContainer().getSpecificView&lt;KView&gt;()\nview.whateverClassMethod()\n\nval iview: ISpecificView = getContainer().getSpecificView&lt;KView&gt;()\niview.whateverInterfaceMethod()\n\n// or just\n\n(getContainer().getSpecificView&lt;KView&gt;() as View).whateverClassMethod()\n(getContainer().getSpecificView&lt;KView&gt;() as ISpecificView).whateverInterfaceMethod()\n</code></pre>\n\n<p>A specific cast to <code>View</code> or <code>ISpecificView</code> is required, because if you just do</p>\n\n<pre><code>getContainer().getSpecificView&lt;KView&gt;()\n</code></pre>\n\n<p>you'll get</p>\n\n<pre><code>class your.package$ExtendingClass cannot be cast to class your.package.KView\n</code></pre>\n\n<p>but that's is perfectly fine.<br>\nEven in Java you need to decide if you want a <code>View</code> or an <code>ISpecificView</code>.</p>\n\n<hr>\n\n<p>This way you'll be able to operate on all the methods of <code>View</code> or <code>ISpecificView</code>.</p>\n\n<hr>\n\n<p>Really, I don't know what else to try. Hope someone comes up with something better.</p>\n\n<p>Edit: if what you mean is in Java you do</p>\n\n<pre><code>final ExtendedView ev = getContainer().getSpecificView();\n</code></pre>\n\n<p>well, this is a bit wrong imho, even if it compiles, as you cannot guarantee the return type is really <code>ExtendedView</code>. You just know for sure it extends <code>View</code> and implements <code>ISpecificView</code>.</p>\n"}], "owner": {"reputation": 560, "user_id": 3187706, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAUgX.png?s=128&g=1", "display_name": "mrpasqal", "link": "https://stackoverflow.com/users/3187706/mrpasqal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1171, "favorite_count": 2, "accepted_answer_id": 55464390, "answer_count": 2, "score": 5, "last_activity_date": 1554192489, "creation_date": 1554154002, "question_id": 55463812, "link": "https://stackoverflow.com/questions/55463812/invoking-a-method-with-a-generic-type-in-kotlin-with-multiple-parameter-type-con", "title": "Invoking a method with a generic type in Kotlin with multiple parameter type constraints", "body": "<p>I have the following interface method definition written in Java:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>&lt;T extends View &amp; ISpecificView&gt; T getSpecificView();\n</code></pre>\n\n<p>A Java-based consumer code is able to operate on this method simply by invoking it and treat the returned value as an object extending the <code>View</code> class and implementing the <code>ISpecificView</code> interface the following way: </p>\n\n<pre><code>getContainer().getSpecificView().whateverTclassMethod()\n</code></pre>\n\n<p>Trying to invoke the same code in Kotlin I get the <code>Type inference failed: Not enough information to infer parameter T (...) Please specify it explicitly</code> error on the <code>getSpecificView()</code> method.\nI'd love to provide the type explicitly, but I'm unable to pass any specific class, since it may be any ancestor of the <code>View</code> class that implements the <code>ISpecificView</code> interface. Passing either single <code>View</code> or <code>ISpecificView</code> does not help - it results in the <code>Type argument is not within its bounds. Expected: View! Found ICustomView</code> and vice versa.</p>\n\n<p>Is there any possibility to pass an equivalent to Java's <code>T extends View &amp; ISpecificView</code> in Kotlin while calling a method, so I can make use of it?</p>\n"}, {"tags": ["android", "kotlin", "android-databinding"], "answers": [{"tags": [], "owner": {"reputation": 37038, "user_id": 1167780, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/91400f43464cd8aaaf935d0992371c6c?s=128&d=identicon&r=PG", "display_name": "MrEngineer13", "link": "https://stackoverflow.com/users/1167780/mrengineer13"}, "is_accepted": true, "score": 0, "last_activity_date": 1555598160, "last_edit_date": 1555598160, "creation_date": 1555597733, "answer_id": 55748196, "question_id": 55463617, "link": "https://stackoverflow.com/questions/55463617/compilation-error-cannot-find-symbol-fragmentbindingimpl-with-custom-attributes/55748196#55748196", "title": "Compilation error: Cannot find symbol FragmentBindingImpl with custom attributes", "body": "<p>Here I was binding to custom attributes and needed to set custom getters/setters in the custom view I inflated</p>\n\n<p>EDIT: </p>\n\n<p>Example</p>\n\n<pre><code>public class ColorPicker extends View {\n    private int color;\n\n    public void setColor(int color) {\n        this.color = color;\n        invalidate();\n    }\n\n    public int getColor() {\n        return color;\n    }\n\n//...\n}\n</code></pre>\n\n<p>Here's what the xml looks like</p>\n\n<pre><code>&lt;com.example.myapp.ColorPicker\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    app:color=\"@{color}\"/&gt;\n</code></pre>\n"}], "owner": {"reputation": 37038, "user_id": 1167780, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/91400f43464cd8aaaf935d0992371c6c?s=128&d=identicon&r=PG", "display_name": "MrEngineer13", "link": "https://stackoverflow.com/users/1167780/mrengineer13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 461, "favorite_count": 0, "accepted_answer_id": 55748196, "answer_count": 1, "score": 1, "last_activity_date": 1555598188, "creation_date": 1554152969, "last_edit_date": 1555598188, "question_id": 55463617, "link": "https://stackoverflow.com/questions/55463617/compilation-error-cannot-find-symbol-fragmentbindingimpl-with-custom-attributes", "title": "Compilation error: Cannot find symbol FragmentBindingImpl with custom attributes", "body": "<p>I have data binding elsewhere and this is the only place where it's giving me these issues I don't have dagger. If I remove the lines in this view that use data binding I get no errors and can install on my device. I've tried every combination of rebuilding/restarting and clearing caches and deleting build files. I also tried disabling data binding and reenabling it.</p>\n\n<p>Here's the layout file I'm using called <code>fragment_subscription.xml</code></p>\n\n<pre><code>&lt;layout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"&gt;\n  &lt;data&gt;\n\n    &lt;variable name=\"fragment\" type=\"com.example.subscription.SubscriptionFragment\"/&gt;\n\n    &lt;variable name=\"week\" type=\"com.android.billingclient.api.SkuDetails\"/&gt;\n    &lt;variable name=\"month\" type=\"com.android.billingclient.api.SkuDetails\"/&gt;\n    &lt;variable name=\"year\" type=\"com.android.billingclient.api.SkuDetails\"/&gt;\n\n  &lt;/data&gt;\n\n&lt;com.example.CustomButton\n                android:id=\"@+id/week_subscription_button\"\n                android:layout_width=\"0dp\"\n                android:layout_height=\"wrap_content\"\n                android:layout_weight=\"1\"\n                android:layout_gravity=\"center_vertical\"\n                android:padding=\"5dp\"\n                app:presetButtonPriceText=\"@{week.price}\"\n                app:presetButtonUnitText=\"@string/week_subscription_unit\"\n                app:presetButtonValueText=\"@string/week_subscription_value\"/&gt;\n\n        &lt;com.example.CustomButton\n                android:id=\"@+id/month_subscription_button\"\n                android:layout_width=\"0dp\"\n                android:layout_height=\"wrap_content\"\n                android:layout_weight=\"1\"\n                android:layout_gravity=\"center_vertical\"\n                android:padding=\"5dp\"\n                app:presetButtonPriceText=\"@{month.price}\"\n                app:presetButtonUnitText=\"@string/month_subscription_unit\"\n                app:presetButtonValueText=\"@string/month_subscription_value\"/&gt;\n\n        &lt;com.example.CustomButton\n                android:id=\"@+id/year_subscription_button\"\n                android:layout_width=\"0dp\"\n                android:layout_height=\"wrap_content\"\n                android:layout_weight=\"1\"\n                android:layout_gravity=\"center_vertical\"\n                android:padding=\"5dp\"\n                app:presetButtonPriceText=\"@{year.price}\"\n                app:presetButtonUnitText=\"@string/year_subscription_unit\"\n                app:presetButtonValueText=\"@string/year_subscription_value\"/&gt;\n\n&lt;/layout&gt;\n</code></pre>\n\n<p>Here are my custom button specific view attributes</p>\n\n<pre><code>    &lt;attr name=\"presetButtonUnitText\" format=\"integer\"/&gt;\n    &lt;attr name=\"presetButtonPriceText\" format=\"string\"/&gt;\n    &lt;attr name=\"presetButtonValueText\" format=\"integer\"/&gt;\n</code></pre>\n\n<p>Here is where I create my view in <code>SubscriptionFragment.kt</code></p>\n\n<pre><code>override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n    return FragmentSubscriptionBinding.inflate(inflater, container, false).let {\n        this.binding = it\n        bind(skuDetailsList)\n        it.root\n    }\n}\n</code></pre>\n\n<p>Here's where I bind my view</p>\n\n<pre><code>private fun bind(skuList: MutableList&lt;SkuDetails&gt;) {\n    binding?.let {\n        if (skuList.isNotEmpty()) {\n            it.week = skuList[0]\n            it.month = skuList[1]\n            it.year = skuList[2]\n            it.fragment = SubscriptionFragment@this\n        }\n\n    }\n}\n</code></pre>\n\n<p>I have tried adding these lines in my apps' gradle.properties</p>\n\n<pre><code>android.databinding.enableV2 = true\nandroid.enableExperimentalFeatureDatabinding = true\n</code></pre>\n\n<p>I have added these to my apps' gradle</p>\n\n<pre><code>kapt 'com.android.databinding:compiler:3.1.4'\nkapt {\n    generateStubs = true\n}\nconfigurations.all {\n    resolutionStrategy {\n        force 'com.android.support:support-annotations:23.1.1'\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "android-intent", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 94, "user_id": 6407505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c3e2ee7251d87f22476199af2b5da27?s=128&d=identicon&r=PG&f=1", "display_name": "Jigar", "link": "https://stackoverflow.com/users/6407505/jigar"}, "is_accepted": false, "score": 0, "last_activity_date": 1554179753, "creation_date": 1554179753, "answer_id": 55467023, "question_id": 55463395, "link": "https://stackoverflow.com/questions/55463395/run-a-function-in-its-entirety-before-moving-to-next-activity/55467023#55467023", "title": "Run a function in its entirety before moving to next activity", "body": "<p>try Using thread.\nnew Runnable ();</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 11091950, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HViWl.png?s=128&g=1", "display_name": "obama", "link": "https://stackoverflow.com/users/11091950/obama"}, "edited": false, "score": 0, "creation_date": 1554233754, "post_id": 55468154, "comment_id": 97674420, "body": "I&#39;m aware it&#39;s probably something to do with a coroutine. I&#39;ve been directed to documents such as the one you&#39;ve linked before but to no amount of success. No matter what I seem to do, be it define suspend functions, use runBlocking, whatever, every single time, when the code gets to &quot;onChildAdded&quot; it moves on and does something else. All I need to do is to execute that onChildAdded before anything else, but I can&#39;t seem to do that."}], "tags": [], "owner": {"reputation": 564, "user_id": 4948827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oJddy.jpg?s=128&g=1", "display_name": "Ryan Godlonton-Shaw", "link": "https://stackoverflow.com/users/4948827/ryan-godlonton-shaw"}, "is_accepted": false, "score": 0, "last_activity_date": 1554186178, "creation_date": 1554186178, "answer_id": 55468154, "question_id": 55463395, "link": "https://stackoverflow.com/questions/55463395/run-a-function-in-its-entirety-before-moving-to-next-activity/55468154#55468154", "title": "Run a function in its entirety before moving to next activity", "body": "<p>I would suggest running this in a coroutine.</p>\n\n<p>For asynchronous programming using coroutines, please have a look at this link.\n<a href=\"https://kotlinlang.org/docs/reference/coroutines-overview.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/coroutines-overview.html</a></p>\n"}], "owner": {"reputation": 21, "user_id": 11091950, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HViWl.png?s=128&g=1", "display_name": "obama", "link": "https://stackoverflow.com/users/11091950/obama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1554186178, "creation_date": 1554151910, "last_edit_date": 1554179510, "question_id": 55463395, "link": "https://stackoverflow.com/questions/55463395/run-a-function-in-its-entirety-before-moving-to-next-activity", "title": "Run a function in its entirety before moving to next activity", "body": "<p>I want to click a button, which will pull some data from Firebase, then I want to go to the next activity, passing an array that contains the Firebase data. I still can't wrap my head around asynchronous code, and I was hoping someone could help me out with the simplest way to accomplish this. </p>\n\n<p>I've experimented with runblocking, suspend functions, await and async, but I can't seem to get it right. Here's my on click listener:</p>\n\n<pre><code>btn_games_quiz.setOnClickListener {\n\n    listenForQuestions()\n\n    val intent = Intent(this, QuizActivity::class.java)\n    intent.putExtra(\"questionArray\", questionArray)\n    startActivity(intent)\n\n}\n</code></pre>\n\n<p>And here's listenForQuestions:</p>\n\n<pre><code>private fun listenForQuestions(){\n\n    val current = LocalDateTime.now()\n    val formatter = DateTimeFormatter.ofPattern(\"MM\")\n    val formatted = current.format(formatter)\n    val currentMonth = QuizActivity.months[formatted.toInt()]\n\n    val ref = FirebaseDatabase.getInstance().getReference(\"/quizzes/$currentMonth\")\n\n    ref.addChildEventListener(object: ChildEventListener {\n\n        override fun onChildAdded(p0: DataSnapshot, p1: String?) {\n                val questionItem = p0.getValue(Question::class.java)\n\n                if (questionItem != null) {\n                    questionArray += questionItem\n                }\n        }\n\n        override fun onCancelled(p0: DatabaseError) {\n        }\n\n        override fun onChildChanged(p0: DataSnapshot, p1: String?) {\n        }\n\n        override fun onChildMoved(p0: DataSnapshot, p1: String?) {\n        }\n\n        override fun onChildRemoved(p0: DataSnapshot) {\n        }\n    })\n\n}\n</code></pre>\n\n<p>A point in the right direction would be greatly appreciated.</p>\n"}, {"tags": ["android", "function", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 2956, "user_id": 8430649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e074258011c72401b1f2f3939f3689c?s=128&d=identicon&r=PG&f=1", "display_name": "S-Sh", "link": "https://stackoverflow.com/users/8430649/s-sh"}, "is_accepted": true, "score": 2, "last_activity_date": 1554151700, "creation_date": 1554151700, "answer_id": 55463361, "question_id": 55463314, "link": "https://stackoverflow.com/questions/55463314/how-to-add-seperate-file-with-functions-in-android-studio/55463361#55463361", "title": "How to add seperate file with functions in Android Studio", "body": "<p>You should not create new <code>MainActivity</code> instance in your helper function. Instead, pass context as a parameter:</p>\n\n<pre><code>fun mToast(context: Context, t: String, x: Int, y: Int) {\n    val toast = Toast.makeText(context, t, Toast.LENGTH_SHORT)\n    toast.setGravity(Gravity.BOTTOM, x, y)\n    toast.show()\n}\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 6337304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a615b10771e2f58d7a6f5b118e954002?s=128&d=identicon&r=PG", "display_name": "user5860", "link": "https://stackoverflow.com/users/6337304/user5860"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 55463361, "answer_count": 1, "score": 1, "last_activity_date": 1554151700, "creation_date": 1554151511, "question_id": 55463314, "link": "https://stackoverflow.com/questions/55463314/how-to-add-seperate-file-with-functions-in-android-studio", "title": "How to add seperate file with functions in Android Studio", "body": "<p>I'd like to have a file with some functions that I can add to my projects. So I can just add that file and then use the same things again. </p>\n\n<p>I've made a new file, added a simple function and tried to run it in my MainActivity. \nMainactivity can \"see\" my function, but the app crashes as soon as the function is being run.\nIs it possible to make a seperate file like this and have access to all functions, as if they were in my MainActivity?</p>\n\n<p>Just for testing I did this:</p>\n\n<p>MainActivity.kt</p>\n\n<pre><code>mToast(\"Its working\", 0, 500)\n</code></pre>\n\n<p>funs.tk</p>\n\n<pre><code>package com.myname.app\n\nimport android.view.Gravity\nimport android.widget.Toast\n\nfun mToast(t: String, x: Int, y: Int) {\n    val toast = Toast.makeText(MainActivity().applicationContext, t, Toast.LENGTH_SHORT)\n    toast.setGravity(Gravity.BOTTOM, x, y)\n    toast.show()\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 14717790, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/6e1ea985ebfb0b17b6e1137041c2c757?s=128&d=identicon&r=PG", "display_name": "Jeff Emuveyan", "link": "https://stackoverflow.com/users/14717790/jeff-emuveyan"}, "is_accepted": false, "score": 0, "last_activity_date": 1606459410, "creation_date": 1606459410, "answer_id": 65033070, "question_id": 55462980, "link": "https://stackoverflow.com/questions/55462980/android-9-frozen-ui-after-unlocking-screen/65033070#65033070", "title": "Android 9 frozen ui after unlocking screen", "body": "<p>I experienced this before. You need to quickly display and hide an alert dialog in the onResume of ur Fragment or Activity. This action will prevent the screen from freezing.</p>\n"}], "owner": {"reputation": 1115, "user_id": 6855603, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W4AH6.png?s=128&g=1", "display_name": "estn", "link": "https://stackoverflow.com/users/6855603/estn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 271, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1606459410, "creation_date": 1554150017, "last_edit_date": 1555786904, "question_id": 55462980, "link": "https://stackoverflow.com/questions/55462980/android-9-frozen-ui-after-unlocking-screen", "title": "Android 9 frozen ui after unlocking screen", "body": "<p>I am building timer application, I have a viewmodel that processes timer data (implemented with rxjava) and holds it in livedata object, then there is fragment that subscribes to this livedata and shows it in view. </p>\n\n<p>So the flow is that timer is running somewhere in viewmodel and current time left is exposed to view through livedata. I am testing that timer is still running even if I rotate screen, lock the screen and return and so on. </p>\n\n<p>On Android 9 if I lock the screen and then come back to it, the ui is frozen - updates from timer livedata is not shown in views. I am logging that fragment is indeed receiving these timer updates but it is not shown in the views for some reason. I was able to reproduce it only on Android 9.</p>\n\n<p>fragment code:</p>\n\n<pre><code>class TomatoFragment : BaseFragment&lt;FragmentTomatoBinding, TomatoFragmentViewModel&gt;(), OnBackPressedCallback {\n\ncompanion object {\n    fun newInstance() = TomatoFragment()\n}\n\noverride val viewModelClass = TomatoFragmentViewModel::class.java\noverride val layoutId = R.layout.fragment_tomato\n\n////// some stuff\n\noverride fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n    super.onViewCreated(view, savedInstanceState)\n    viewModel.initTomato()\n\n    initObservers()\n}\n\nprivate fun initObservers() {\n    observe(viewModel.getViewData()) {\n        val newText = it.getMainActionText(extendedFabTomatoSession.context)\n        extendedFabTomatoSession.text = newText\n\n        Log.d(\"SRA4KA\", \"time left: ${it.getShownTimeFormatted(requireContext())}\")\n        textTomatoTimeLeft.text = it.getShownTimeFormatted(requireContext())\n    }\n\n // some other stuff   \n}\n</code></pre>\n\n<p>It seems really bizarre, because I literally log that the text is being set but nothing changes on the screen. I recorded a video of it : <a href=\"https://youtu.be/l9kUexJKyaY\" rel=\"nofollow noreferrer\">https://youtu.be/l9kUexJKyaY</a></p>\n\n<p><strong>UPDATE</strong>\nI searched google issue tracker and found <a href=\"https://issuetracker.google.com/issues/118178434\" rel=\"nofollow noreferrer\">https://issuetracker.google.com/issues/118178434</a> which could be same/similar issue</p>\n"}, {"tags": ["android", "android-fragments", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 651, "user_id": 9996859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70a96acd8b90c93283345107873c06d1?s=128&d=identicon&r=PG&f=1", "display_name": "andrewedgar", "link": "https://stackoverflow.com/users/9996859/andrewedgar"}, "edited": false, "score": 0, "creation_date": 1554150067, "post_id": 55462735, "comment_id": 97638284, "body": "I want a slide animation directly from one fragment to another via button click, but I do not want the user to be able to slide it without the button.  Edit: And FrameLayout worked for that. Thank you."}, {"owner": {"reputation": 2146, "user_id": 3780625, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/dKJKS.jpg?s=128&g=1", "display_name": "Maxouille", "link": "https://stackoverflow.com/users/3780625/maxouille"}, "reply_to_user": {"reputation": 651, "user_id": 9996859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70a96acd8b90c93283345107873c06d1?s=128&d=identicon&r=PG&f=1", "display_name": "andrewedgar", "link": "https://stackoverflow.com/users/9996859/andrewedgar"}, "edited": false, "score": 1, "creation_date": 1554150787, "post_id": 55462735, "comment_id": 97638599, "body": "So you have to work with a <code>FrameLayout</code> and some animations but I think you did that ;)"}], "tags": [], "owner": {"reputation": 2146, "user_id": 3780625, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/dKJKS.jpg?s=128&g=1", "display_name": "Maxouille", "link": "https://stackoverflow.com/users/3780625/maxouille"}, "is_accepted": true, "score": 1, "last_activity_date": 1554149038, "creation_date": 1554149038, "answer_id": 55462735, "question_id": 55462436, "link": "https://stackoverflow.com/questions/55462436/fragment-disappearing-when-called-from-pageradapter/55462735#55462735", "title": "Fragment disappearing when called from PagerAdapter", "body": "<p>Do you have a <code>ViewPager</code> container for your framgents ? </p>\n\n<ul>\n<li>If yes, that's not the way to use the pagerAdapter. You should see <a href=\"https://guides.codepath.com/android/viewpager-with-fragmentpageradapter\" rel=\"nofollow noreferrer\">this link</a>. It's in Java but you can easily adapt it to kotlin.</li>\n<li>If no, I'm not sure what you are trying to do but I think the\nViewPager is what you need. </li>\n</ul>\n\n<p>If you just want to switch fragments on a click, just use a <code>FrameLayout</code> to display the fragment you want and switch between them with transactions. I'm not familiar with kotlin but something like this should work.</p>\n\n<pre><code>private fun switchScreens(i: Integer) {\n\n    val fragment;\n\n    when (i) {\n        0 -&gt; fragment = WelcomeFragment.newInstance()\n        1 -&gt; fragment = LanguageSelectFragment.newInstance()\n    }\n\n    val fragmentManager = supportFragmentManager\n    val fragmentTransaction = fragmentManager.beginTransaction()\n    fragmentTransaction.replace(R.id.main_view_pager, fragment)\n    fragmentTransaction.commit()\n}\n</code></pre>\n\n<p>If you want to slide to one fragment to another, you can use a <code>ViewPager</code> (see the link above).</p>\n\n<p>Best</p>\n"}], "owner": {"reputation": 651, "user_id": 9996859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70a96acd8b90c93283345107873c06d1?s=128&d=identicon&r=PG&f=1", "display_name": "andrewedgar", "link": "https://stackoverflow.com/users/9996859/andrewedgar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 55462735, "answer_count": 1, "score": 2, "last_activity_date": 1554149038, "creation_date": 1554147685, "last_edit_date": 1554148691, "question_id": 55462436, "link": "https://stackoverflow.com/questions/55462436/fragment-disappearing-when-called-from-pageradapter", "title": "Fragment disappearing when called from PagerAdapter", "body": "<p>I have an Activity with a ViewPager containing Fragments that are summoned with custom buttons. Currently, my custom adapter's getItem method is being called, but the pager is going blank rather than going to the new fragment</p>\n\n<p>Here is my adapter :</p>\n\n<pre><code>class ScreenSlidePagerAdapter(fragmentManager: FragmentManager) : FragmentStatePagerAdapter(fragmentManager) {\n\n\n    private val NUM_FRAGMENTS = 2\n\n\n\n    override fun getCount(): Int = NUM_FRAGMENTS\n\n    override fun getItem(position: Int): Fragment {\n\n        var fragment: Fragment = WelcomeFragment.newInstance()\n\n\n        when (position) {\n            0 -&gt; fragment = WelcomeFragment.newInstance()\n            1 -&gt; fragment = LanguageSelectFragment.newInstance()\n\n\n        }\n\n        println(position)\n\n\n\n        return fragment\n    }\n}\n</code></pre>\n\n<p>Here is the method that gets called on button click. The views are given a tag corresponding to their Fragment's position in the adapter, and this is retrieved on click to pull up the right fragment.</p>\n\n<pre><code>private fun switchScreens(view: View) {\n\n\n        val fragment = mPagerAdapter.getItem(view.getTag().toString().toInt())\n        val fragmentManager = supportFragmentManager\n        val fragmentTransaction = fragmentManager.beginTransaction()\n        fragmentTransaction.replace(R.id.main_view_pager, fragment)\n        fragmentTransaction.commit()\n    }\n</code></pre>\n\n<p>And my fragment:</p>\n\n<pre><code>class LanguageSelectFragment : Fragment() {\n\n\n    private var listener: OnFragmentInteractionListener? = null\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        arguments?.let {\n\n        }\n    }\n\n    override fun onCreateView(\n        inflater: LayoutInflater, container: ViewGroup?,\n        savedInstanceState: Bundle?\n    ): View? {\n        // Inflate the layout for this fragment\n        return inflater.inflate(R.layout.fragment_language_select, container, false)\n    }\n\n\n    fun onButtonPressed(uri: Uri) {\n        listener?.onFragmentInteraction(uri)\n    }\n\n    override fun onAttach(context: Context) {\n        super.onAttach(context)\n        if (context is OnFragmentInteractionListener) {\n            listener = context\n        } else {\n\n        }\n    }\n\n    override fun onDetach() {\n        super.onDetach()\n        listener = null\n    }\n\n\n    interface OnFragmentInteractionListener {\n\n        fun onFragmentInteraction(uri: Uri)\n    }\n\n    companion object {\n        @JvmStatic\n        fun newInstance() =\n            LanguageSelectFragment().apply {\n                arguments = Bundle().apply {\n\n                }\n            }\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-recyclerview"], "owner": {"reputation": 78, "user_id": 11033601, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uug4v.jpg?s=128&g=1", "display_name": "Alex K", "link": "https://stackoverflow.com/users/11033601/alex-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 146, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1554224352, "creation_date": 1554144571, "last_edit_date": 1554224352, "question_id": 55461720, "link": "https://stackoverflow.com/questions/55461720/how-to-load-data-to-imageview-after-refresh-of-recycvlerview", "title": "How to load Data to imageView, after refresh of recycvlerview", "body": "<p>I have two recyclerViews, which represent my grocery list. \nWhen I click on an item it gets \"transferred\" to the other list. \nThe problem is that the images are loaded with Glide and Firebase Storage and they don't show the correct images even if the listitem does not have a path.</p>\n\n<p>I have tried every notifyDataSetChanged(), recyclerView.notifyItemChanged() and recyclerView.invalidate() and others. Maybe you could help me.</p>\n\n<p>This is my Adapter:</p>\n\n<pre><code>\nclass RecyclerViewAdapterEinkaufslisteDetail(\n    val context: Context,\n    val lebensmittelList: ArrayList&lt;Inventarstueck&gt;\n) :\n    RecyclerView.Adapter&lt;RecyclerViewAdapterEinkaufslisteDetail.ViewHolder&gt;() {\n\n\n\n\n    override fun onBindViewHolder(holder: RecyclerViewAdapterEinkaufslisteDetail.ViewHolder, position: Int) {\n        // TODO(\"not implemented\") //To change body of created functions use File | Settings | File Templates.\n\n\n        //Es wird der Name, die Anzahl, die Einheit (gramm, kg, etc) das Bild und ein Warnzeichen angezeigt, falls ein Produkt abl\u00e4ufty\n        holder.mName.text = lebensmittelList[position].name_de.toString()\n\n\n        val array = holder.itemView.getContext().getResources().getStringArray(R.array.einheit_kurz)\n\n\n        val placeholder =\n            lebensmittelList[position].restlichemenge.toString() + \" \" + array[lebensmittelList[position].einheit!!]\n\n\n\n\n        holder.mAnzahl.text = placeholder\n        //   holder.txtTitle.text = userList[position]\n\n        holder.mZeichen.visibility = View.INVISIBLE\n\n\n        //KLEINEs Anzeigebild der Produkte runterladen\n\n        if (!(lebensmittelList[position].fotoURL.isNullOrEmpty() || lebensmittelList[position].fotoURL.isNullOrBlank())) {\n\n            //\u00dcberpr\u00fcfen, ob im Feld die Endung gespeichert ist, wenn nicht, immer png!!\n            val url:String\n            if(lebensmittelList[position].fotoURL!!.endsWith(\".png\")){\n                url = lebensmittelList[position].fotoURL!!\n            }else{\n                url = lebensmittelList[position].fotoURL + \".png\"\n            }\n\n            val storage = FirebaseStorage.getInstance()\n            val storageRef = storage.reference\n            // Points to \"images\"\n            val imagesRef = storageRef.child(Constants.FIREBASE_STORAGE_PRODUKTFOTO_KLEIN_PFAD)\n            val fotoRef = imagesRef.child(url)\n\n            GlideApp.with(this.context).load(fotoRef).into(holder.mProduktfoto)\n\n        }\n\n    }\n\n    override fun getItemCount(): Int {\n        return lebensmittelList.size\n    }\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): RecyclerViewAdapterEinkaufslisteDetail.ViewHolder {\n\n        val v = LayoutInflater.from(parent.context).inflate(R.layout.recyclerview_item_inventar, parent, false)\n        return ViewHolder(v)\n\n    }\n\n\n    class ViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView), View.OnClickListener, View.OnLongClickListener{\n\n        init {\n            itemView.setOnClickListener(this)\n            itemView.setOnLongClickListener(this)\n        }\n\n\n\n\n        override fun onClick(v: View) {\n            clickListener!!.onItemClick(adapterPosition, v);\n        }\n\n        override fun onLongClick(v: View): Boolean {\n            clickListener!!.onItemLongClick(adapterPosition, v)\n            return true\n        }\n\n        val mName = itemView.findViewById&lt;TextView&gt;(R.id.rvInventar_tv_Produktname)\n        val mAnzahl = itemView.findViewById&lt;TextView&gt;(R.id.rvInventar_tv_Anzahl)\n        val mProduktfoto = itemView.findViewById&lt;ImageView&gt;(R.id.rvInventarProduktFoto)\n       val mZeichen = itemView.findViewById&lt;ImageView&gt;(R.id.rvInventar_Icon)\n        //  val txtTitle = itemView.findViewById&lt;TextView&gt;(R.id.txtTitle)\n        val mCard = itemView.findViewById&lt;MaterialCardView&gt;(R.id.rvCardInventar)\n\n\n\n    }\n\n    fun setOnItemClickListener(clickListener: ClickListener) {\n        RecyclerViewAdapterEinkaufslisteDetail.clickListener = clickListener\n    }\n    interface ClickListener {\n        fun onItemClick(position: Int, v: View)\n        fun onItemLongClick(position: Int, v: View)\n\n    }\n\n    companion object {\n        private var clickListener: RecyclerViewAdapterEinkaufslisteDetail.ClickListener? = null\n    }\n}\n</code></pre>\n\n<p>This is where I change the data:</p>\n\n<pre><code>   rvKaufen = findViewById(R.id.rvEinkaufslisteDetailKaufen)\n        val layoutmanager = GridLayoutManager(this, 3)\n        rvKaufen.layoutManager = layoutmanager\n\n\n        rvGekauft = findViewById(R.id.rvEinkaufslisteDetailGekauft)\n        val layoutmanager2 = GridLayoutManager(this, 3)\n        rvGekauft.layoutManager = layoutmanager2\n\n\n        rvadapter = RecyclerViewAdapterEinkaufslisteDetail(this, itemsInEinkaufsliste)\n        //  val rvadapter = RecyclerViewAdapterInventar(this.context!!, lebensmittelliste)\n        rvadapterGekauft = RecyclerViewAdapterEinkaufslisteDetail(this, itemsGekauft)\n\n\n        //nur einmal itemclicklistener zuweisen, sonst megafehler! intern abrufen aus welchem Recyclerview der Click gekommen ist\n/**/   rvadapter.setOnItemClickListener(object : RecyclerViewAdapterEinkaufslisteDetail.ClickListener {\n            override fun onItemClick(position: Int, v: View) {\n                Log.d(\"Click\", \"onItemClick position: $position\")\n                val parentId = (v.parent as View).id\n                if (parentId == rvKaufen.id) {\n\n                    Toast.makeText(this@EinkaufslisteDetail, \"GeKAUFt\", Toast.LENGTH_SHORT).show()\n\n                    /*  val inventarstueck = rvadapter.lebensmittelList[position].copy()\n\n\n                     //Hier auch aus den Listen l\u00f6schen??\n                     //TODO\n                    rvadapterGekauft.lebensmittelList.add(inventarstueck)\n                     rvadapterGekauft.notifyDataSetChanged()\n\n                     rvadapter.lebensmittelList.removeAt(position)\n\n                   //  itemsInEinkaufsliste.removeAt(position)\n                     rvadapter.notifyItemRemoved(position)\n\n                     //  rvadapter.lebensmittelList.removeAt(position)\n                     */\n                    //rvadapter.notifyDataSetChanged()\n                    val inventarstueck = itemsInEinkaufsliste[position].copy()\n                    //itemsGekauft.add(inventarstueck)\n                    itemsGekauft.add(inventarstueck)\n                    rvadapterGekauft.notifyItemInserted(itemsGekauft.size-1)\n\n                   // rvadapterGekauft.notifyItemRangeChanged(0,itemsGekauft.size)\n\n\n                    itemsInEinkaufsliste.removeAt(position)\n                    rvadapter.notifyItemRemoved(position)\n\n\n\n\n                    rvadapter.notifyItemRangeChanged(position,itemsInEinkaufsliste.size)\n\n\n             /*       rvKaufen.adapter = null\n                    rvKaufen.layoutManager = null\n                    rvKaufen.adapter = rvadapter\n                    val layoutmanager3 = GridLayoutManager(this@EinkaufslisteDetail, 3)\n                    rvKaufen.layoutManager = layoutmanager3\n\n                    rvadapter.notifyDataSetChanged()\n                    //rvKaufen.removeViewAt(position)\n                   // rvGekauft.add\n                    rvGekauft.adapter = null\n                    rvGekauft.layoutManager = null\n                    rvGekauft.adapter = rvadapterGekauft\n                    val layoutmanager4 = GridLayoutManager(this@EinkaufslisteDetail, 3)\n                    rvKaufen.layoutManager = layoutmanager4\n\n                    rvadapterGekauft.notifyDataSetChanged()*/\n\n                } else if (parentId == rvGekauft.id) {\n                    Toast.makeText(this@EinkaufslisteDetail, \"Zur\u00fcck geschoben\", Toast.LENGTH_SHORT).show()\n\n                   /* val inventarstueck = rvadapterGekauft.lebensmittelList[position].copy()\n\n                    rvadapter.lebensmittelList.add(inventarstueck)\n                    rvadapter.notifyDataSetChanged()\n\n                    rvadapterGekauft.lebensmittelList.removeAt(position)\n                    rvadapterGekauft.notifyItemRemoved(position)*/\n\n\n                    val inventarstueck = itemsGekauft[position].copy()\n                    //itemsGekauft.add(inventarstueck)\n                    itemsInEinkaufsliste.add(inventarstueck)\n                    rvadapter.notifyItemInserted(itemsInEinkaufsliste.size-1)\n\n\n                   // rvadapter.notifyItemRangeChanged(0,itemsInEinkaufsliste.size)\n\n\n                    itemsGekauft.removeAt(position)\n                    rvadapterGekauft.notifyItemRemoved(position)\n\n\n                    rvadapterGekauft.notifyItemRangeChanged(position,itemsGekauft.size)\n\n\n\n\n\n\n                 /*   rvKaufen.adapter = null\n                    rvKaufen.layoutManager = null\n                    rvKaufen.adapter = rvadapter\n                    val layoutmanager3 = GridLayoutManager(this@EinkaufslisteDetail, 3)\n                    rvKaufen.layoutManager = layoutmanager3\n\n                    rvadapter.notifyDataSetChanged()\n\n\n\n                    rvGekauft.adapter = null\n                    rvGekauft.layoutManager = null\n                    rvGekauft.adapter = rvadapterGekauft\n                    val layoutmanager4 = GridLayoutManager(this@EinkaufslisteDetail, 3)\n                    rvKaufen.layoutManager = layoutmanager4\n\n                    rvadapterGekauft.notifyDataSetChanged()*/\n                }\n\n\n            }\n\n            override fun onItemLongClick(position: Int, v: View) {\n                Log.d(\"Click\", \"onItemLongClick pos = $position\")\n                Log.d(\"Click\", \"onItemClick position: $position\")\n                val parentId = (v.parent as View).id\n                if (parentId == rvKaufen.id) {\n\n                    Toast.makeText(this@EinkaufslisteDetail, \"Ver\u00e4ndern\", Toast.LENGTH_SHORT).show()\n\n                    val inventarstueck = rvadapter.lebensmittelList[position].copy()\n                    val intent = Intent(this@EinkaufslisteDetail, EinkaufslisteProduktBearbeiten::class.java)\n                    intent.putExtra(\"swissID\",inventarstueck.swiss_id)\n                    intent.putExtra(\"scandatum\",inventarstueck.scandatum)\n                    intent.putExtra(\"einkaufslistenID\",einkaufslistenID)\n                    startActivityForResult(intent,_resultCODE)\n\n                }else if (parentId == rvGekauft.id) {\n                    Toast.makeText(this@EinkaufslisteDetail, \"Keine Aktion m\u00f6glich\", Toast.LENGTH_SHORT).show()\n\n                }\n\n\n            }\n        })\n</code></pre>\n\n<p>When I call the SetItemClickListener on the second recyclerView as well, then the whole process doesn't work.</p>\n\n<p>It is very rare that there are two recyclerViews used so I haven't found anything either.</p>\n\n<p><strong>EDIT</strong>\nI found the solution for my Problem:</p>\n\n<p>I set the ImageView to a default picture, in case there is no URL., </p>\n\n<pre><code>  if (!(lebensmittelList[position].fotoURL.isNullOrEmpty() || lebensmittelList[position].fotoURL.isNullOrBlank())) {\n     .\n     .\n     .       GlideApp.with(this.context).load(fotoRef).into(holder.mProduktfoto)\n\n        }else{\n\n            holder.mProduktfoto.setImageResource(R.drawable.logo_384_384)\n        }\n\n</code></pre>\n"}, {"tags": ["class", "kotlin", "primitive"], "answers": [{"comments": [{"owner": {"reputation": 472, "user_id": 7947368, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/fe1dd8f191cef546b5ab514c2b00733b?s=128&d=identicon&r=PG", "display_name": "Sheed", "link": "https://stackoverflow.com/users/7947368/sheed"}, "edited": false, "score": 0, "creation_date": 1554141225, "post_id": 55460932, "comment_id": 97634512, "body": "and how do i get my head around that? I need to analyze any kind of value"}, {"owner": {"reputation": 128160, "user_id": 321697, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/FHlMy.jpg?s=128&g=1", "display_name": "Kevin Coppock", "link": "https://stackoverflow.com/users/321697/kevin-coppock"}, "reply_to_user": {"reputation": 472, "user_id": 7947368, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/fe1dd8f191cef546b5ab514c2b00733b?s=128&d=identicon&r=PG", "display_name": "Sheed", "link": "https://stackoverflow.com/users/7947368/sheed"}, "edited": false, "score": 0, "creation_date": 1554141354, "post_id": 55460932, "comment_id": 97634557, "body": "That&#39;s what you&#39;re doing by declaring the type as <code>Any</code>. A method can&#39;t accept both a primitive and an object, so to support it, the primitives must be auto-boxed into a wrapper object."}, {"owner": {"reputation": 472, "user_id": 7947368, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/fe1dd8f191cef546b5ab514c2b00733b?s=128&d=identicon&r=PG", "display_name": "Sheed", "link": "https://stackoverflow.com/users/7947368/sheed"}, "edited": false, "score": 0, "creation_date": 1554141454, "post_id": 55460932, "comment_id": 97634612, "body": "but I can only accept certain types of data : primitives, string and a certain class, I reject the others, isn&#39;t there a method like &quot;isPrimitive&quot; for wrapper classes?"}, {"owner": {"reputation": 128160, "user_id": 321697, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/FHlMy.jpg?s=128&g=1", "display_name": "Kevin Coppock", "link": "https://stackoverflow.com/users/321697/kevin-coppock"}, "reply_to_user": {"reputation": 472, "user_id": 7947368, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/fe1dd8f191cef546b5ab514c2b00733b?s=128&d=identicon&r=PG", "display_name": "Sheed", "link": "https://stackoverflow.com/users/7947368/sheed"}, "edited": false, "score": 0, "creation_date": 1554141507, "post_id": 55460932, "comment_id": 97634629, "body": "If you can only accept certain types, why not declare methods explicitly for those supported types? That way you fail at compile-time if you pass in an unsupported value."}], "tags": [], "owner": {"reputation": 128160, "user_id": 321697, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/FHlMy.jpg?s=128&g=1", "display_name": "Kevin Coppock", "link": "https://stackoverflow.com/users/321697/kevin-coppock"}, "is_accepted": true, "score": 4, "last_activity_date": 1554141288, "last_edit_date": 1554141288, "creation_date": 1554141158, "answer_id": 55460932, "question_id": 55460857, "link": "https://stackoverflow.com/questions/55460857/kotlins-javaclass-isprimitive-fails-if-parameter-compile-time-is-not-actual-typ/55460932#55460932", "title": "kotlin&#39;s javaclass.isPrimitive fails if parameter compile-time is not actual type", "body": "<p>When you declare the type as <code>Double</code>, that's a primitive <code>double</code> (rather than the <code>Double</code> wrapper class). </p>\n\n<p>When you declare the type as <code>Any</code>, the method then accepts any <em>object</em> as a parameter, so even if you pass in a primitive <code>double</code>, it will be auto-boxed into a wrapper object for <code>Double</code> and will no longer be a primitive.</p>\n\n<p>You can see this by running this snippet on <a href=\"https://play.kotlinlang.org\" rel=\"nofollow noreferrer\">play.kotlinlang.org</a>:</p>\n\n<pre><code>fun main() {\n    useDouble(3.0)\n    useAny(3.0)\n}\n\nfun useDouble(value: Double) = println(\"${value.javaClass.name}\")\nfun useAny(value: Any) = println(\"${value.javaClass.name}\")\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>double\njava.lang.Double\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": false, "score": 3, "last_activity_date": 1554189133, "creation_date": 1554189133, "answer_id": 55468891, "question_id": 55460857, "link": "https://stackoverflow.com/questions/55460857/kotlins-javaclass-isprimitive-fails-if-parameter-compile-time-is-not-actual-typ/55468891#55468891", "title": "kotlin&#39;s javaclass.isPrimitive fails if parameter compile-time is not actual type", "body": "<blockquote>\n  <p>isn't there a method like \"isPrimitive\" for wrapper classes</p>\n</blockquote>\n\n<p>Not directly, but you can check whether a value belongs to a wrapper class by</p>\n\n<pre><code>value::class.javaPrimitiveType != null\n</code></pre>\n\n<p>Or if you just have a <code>clazz: Class&lt;T&gt;</code>, </p>\n\n<pre><code>clazz.kotlin.javaPrimitiveType != null\n</code></pre>\n"}], "owner": {"reputation": 472, "user_id": 7947368, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/fe1dd8f191cef546b5ab514c2b00733b?s=128&d=identicon&r=PG", "display_name": "Sheed", "link": "https://stackoverflow.com/users/7947368/sheed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 383, "favorite_count": 0, "accepted_answer_id": 55460932, "answer_count": 2, "score": 1, "last_activity_date": 1554189133, "creation_date": 1554140819, "last_edit_date": 1592644375, "question_id": 55460857, "link": "https://stackoverflow.com/questions/55460857/kotlins-javaclass-isprimitive-fails-if-parameter-compile-time-is-not-actual-typ", "title": "kotlin&#39;s javaclass.isPrimitive fails if parameter compile-time is not actual type", "body": "<p>The following code</p>\n<pre><code>fun foo(value:Double) {\n    if(!value.javaClass.isPrimitive) {\n        println(&quot;try again&quot;)\n        return\n    }\n}\n    println(&quot;that's nice&quot;)\n}\n\nfun main() {\n    foo(0.0)\n}\n</code></pre>\n<p>displays:\n&quot;that's nice&quot;</p>\n<p>but setting <code>value</code> type as <code>Any</code>:</p>\n<pre><code>fun foo(value:Any) {\n        if(!value.javaClass.isPrimitive) {\n            println(&quot;try again&quot;)\n            return\n        }\n        println(&quot;that's nice&quot;)\n    }\n\nfun main() {\n    foo(0.0)\n}\n</code></pre>\n<p>will display: &quot;try again&quot;\neven though <code>value</code>runtime type <strong>is</strong> <code>Double</code>,\nlink for testing : <a href=\"https://pl.kotl.in/HkghkAkF4\" rel=\"nofollow noreferrer\">https://pl.kotl.in/HkghkAkF4</a></p>\n<p>quote from <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/java-class.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/java-class.html</a>:</p>\n<blockquote>\n<p>inline val  T.javaClass: Class</p>\n<p>Returns the runtime Java class of this object</p>\n</blockquote>\n<p>which from <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#isPrimitive\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#isPrimitive</a> should give me right</p>\n<p>EDIT: removed unnecessary run{}</p>\n"}, {"tags": ["swift", "generics", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 7017111, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207306133227362/picture?type=large", "display_name": "David Smith", "link": "https://stackoverflow.com/users/7017111/david-smith"}, "reply_to_user": {"reputation": 54742, "user_id": 608157, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Li27g.jpg?s=128&g=1", "display_name": "David R&#246;nnqvist", "link": "https://stackoverflow.com/users/608157/david-r%c3%b6nnqvist"}, "edited": false, "score": 0, "creation_date": 1554144515, "post_id": 55460529, "comment_id": 97635897, "body": "Yeah you&#39;re right, I jumped the gun on my response and didn&#39;t notice the unused generic; updating my response"}, {"owner": {"reputation": 196293, "user_id": 2303865, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/varL9.jpg?s=128&g=1", "display_name": "Leo Dabus", "link": "https://stackoverflow.com/users/2303865/leo-dabus"}, "edited": false, "score": 0, "creation_date": 1554150136, "post_id": 55460529, "comment_id": 97638312, "body": "why not simply <code>func foo&lt;F: Foo&gt;(action: (T) -&gt; F) -&gt; F </code> ?"}, {"owner": {"reputation": 61, "user_id": 7017111, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207306133227362/picture?type=large", "display_name": "David Smith", "link": "https://stackoverflow.com/users/7017111/david-smith"}, "edited": false, "score": 0, "creation_date": 1554152668, "post_id": 55460529, "comment_id": 97639371, "body": "Its the same functionally speaking; I left it as is in case OP needs any additional constraints with the <code>associatedtype</code> for the function"}], "tags": [], "owner": {"reputation": 61, "user_id": 7017111, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207306133227362/picture?type=large", "display_name": "David Smith", "link": "https://stackoverflow.com/users/7017111/david-smith"}, "is_accepted": false, "score": 1, "last_activity_date": 1554144530, "last_edit_date": 1554144530, "creation_date": 1554139420, "answer_id": 55460529, "question_id": 55460263, "link": "https://stackoverflow.com/questions/55460263/generic-protocols-on-swift/55460529#55460529", "title": "Generic protocols on Swift", "body": "<p>I think what you're looking for is something like this:</p>\n\n<pre><code>protocol Foo {\n    associatedtype T\n    func foo&lt;F&gt;(action: (T) -&gt; F) -&gt; F where F: Foo\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 8586763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c165fc866b4e91069444bfd23cab90d?s=128&d=identicon&r=PG&f=1", "display_name": "\u042f\u0440\u043e\u0441\u043b\u0430\u0432 \u0410\u0442\u0440\u043e\u0448\u0435\u043d\u043a\u043e", "link": "https://stackoverflow.com/users/8586763/%d0%af%d1%80%d0%be%d1%81%d0%bb%d0%b0%d0%b2-%d0%90%d1%82%d1%80%d0%be%d1%88%d0%b5%d0%bd%d0%ba%d0%be"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1554144530, "creation_date": 1554138401, "question_id": 55460263, "link": "https://stackoverflow.com/questions/55460263/generic-protocols-on-swift", "title": "Generic protocols on Swift", "body": "<p>I want to translate some Kotlin code on Swift, and I have problems with it. What's the right way to write this code on Swift?</p>\n\n<pre><code>interface Foo&lt;T&gt;{\n    fun &lt;F&gt;foo(action: (T) -&gt; Foo&lt;F&gt;): Foo&lt;F&gt;\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "google-cloud-firestore", "kotlin-coroutines"], "comments": [{"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1554137585, "post_id": 55459961, "comment_id": 97632709, "body": "Firebase callbacks are executed on the main thread by default.  I see you&#39;re calling a method called <code>sendBlocking</code> on the main thread.  Blocking the main thread is always a bad idea.  You&#39;ll want to find another way of working with the the Firebase SDK rather than blocking the main thread like this."}, {"owner": {"reputation": 3174, "user_id": 4858147, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh4.googleusercontent.com/-WvQqad2FrJE/AAAAAAAAAAI/AAAAAAAAAeM/8CaDjrq8nHw/photo.jpg?sz=128", "display_name": "svkaka", "link": "https://stackoverflow.com/users/4858147/svkaka"}, "reply_to_user": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1555011483, "post_id": 55459961, "comment_id": 97970699, "body": "@DougStevenson I found solution"}], "answers": [{"tags": [], "owner": {"reputation": 3174, "user_id": 4858147, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh4.googleusercontent.com/-WvQqad2FrJE/AAAAAAAAAAI/AAAAAAAAAeM/8CaDjrq8nHw/photo.jpg?sz=128", "display_name": "svkaka", "link": "https://stackoverflow.com/users/4858147/svkaka"}, "is_accepted": true, "score": 12, "last_activity_date": 1603645328, "last_edit_date": 1603645328, "creation_date": 1555011286, "answer_id": 55639950, "question_id": 55459961, "link": "https://stackoverflow.com/questions/55459961/firebase-realtime-snapshot-listener-using-coroutines/55639950#55639950", "title": "Firebase realtime snapshot listener using Coroutines", "body": "<p>What I ended up with is I used <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.flow/-flow/index.html\" rel=\"nofollow noreferrer\">Flow</a> which is part of coroutines <code>1.2.0-alpha-2</code></p>\n<pre><code>return flowViaChannel { channel -&gt;\n   firestore.collection(path).addSnapshotListener { data, error -&gt;\n        if (error != null) {\n            channel.close(error)\n        } else {\n            if (data != null) {\n                val messages = data.toObjects(MessageEntity::class.java)\n                channel.sendBlocking(messages)\n            } else {\n                channel.close(CancellationException(&quot;No data received&quot;))\n            }\n        }\n    }\n    channel.invokeOnClose {\n        it?.printStackTrace()\n    }\n} \n</code></pre>\n<p>And that's how I observe it in my ViewModel</p>\n<pre><code>launch {\n    messageRepository.observe().collect {\n        //process\n    }\n}\n</code></pre>\n<p>more on topic <a href=\"https://medium.com/@elizarov/cold-flows-hot-channels-d74769805f9\" rel=\"nofollow noreferrer\">https://medium.com/@elizarov/cold-flows-hot-channels-d74769805f9</a></p>\n"}, {"comments": [{"owner": {"reputation": 620, "user_id": 3906919, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/611290901/picture?type=large", "display_name": "Mikkel Larsen", "link": "https://stackoverflow.com/users/3906919/mikkel-larsen"}, "edited": false, "score": 0, "creation_date": 1581512991, "post_id": 57439864, "comment_id": 106458635, "body": "What do you do in your getShoppingListItemFromSnapshot(it)? :)"}], "tags": [], "owner": {"reputation": 1582, "user_id": 1367154, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e38a0aa352049cc18f76066e042750b5?s=128&d=identicon&r=PG", "display_name": "Nishanth", "link": "https://stackoverflow.com/users/1367154/nishanth"}, "is_accepted": false, "score": 10, "last_activity_date": 1591810552, "last_edit_date": 1591810552, "creation_date": 1565418494, "answer_id": 57439864, "question_id": 55459961, "link": "https://stackoverflow.com/questions/55459961/firebase-realtime-snapshot-listener-using-coroutines/57439864#57439864", "title": "Firebase realtime snapshot listener using Coroutines", "body": "<p>I have these extension functions, so I can simply get back results from the query as a Flow. </p>\n\n<p>Flow is a Kotlin coroutine construct perfect for this purposes. \n<a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.flow/-flow/\" rel=\"noreferrer\">https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.flow/-flow/</a></p>\n\n<pre><code>@ExperimentalCoroutinesApi\nfun CollectionReference.getQuerySnapshotFlow(): Flow&lt;QuerySnapshot?&gt; {\n    return callbackFlow {\n        val listenerRegistration =\n            addSnapshotListener { querySnapshot, firebaseFirestoreException -&gt;\n                if (firebaseFirestoreException != null) {\n                    cancel(\n                        message = \"error fetching collection data at path - $path\",\n                        cause = firebaseFirestoreException\n                    )\n                    return@addSnapshotListener\n                }\n                offer(querySnapshot)\n            }\n        awaitClose {\n            Timber.d(\"cancelling the listener on collection at path - $path\")\n            listenerRegistration.remove()\n        }\n    }\n}\n\n@ExperimentalCoroutinesApi\nfun &lt;T&gt; CollectionReference.getDataFlow(mapper: (QuerySnapshot?) -&gt; T): Flow&lt;T&gt; {\n    return getQuerySnapshotFlow()\n        .map {\n            return@map mapper(it)\n        }\n}\n</code></pre>\n\n<p>The following is an example of how to use the above functions.</p>\n\n<pre><code>@ExperimentalCoroutinesApi\nfun getShoppingListItemsFlow(): Flow&lt;List&lt;ShoppingListItem&gt;&gt; {\n    return FirebaseFirestore.getInstance()\n        .collection(\"$COLLECTION_SHOPPING_LIST\")\n        .getDataFlow { querySnapshot -&gt;\n            querySnapshot?.documents?.map {\n                getShoppingListItemFromSnapshot(it)\n            } ?: listOf()\n        }\n}\n\n// Parses the document snapshot to the desired object\nfun getShoppingListItemFromSnapshot(documentSnapshot: DocumentSnapshot) : ShoppingListItem {\n        return documentSnapshot.toObject(ShoppingListItem::class.java)!!\n    }\n</code></pre>\n\n<p>And in your ViewModel class, (or your Fragment) make sure you call this from the right scope, so the listener gets removed appropriately when the user moves away from the screen.</p>\n\n<pre><code>viewModelScope.launch {\n   getShoppingListItemsFlow().collect{\n     // Show on the view.\n   }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 961, "user_id": 2299605, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l1riA.jpg?s=128&g=1", "display_name": "elementstyle", "link": "https://stackoverflow.com/users/2299605/elementstyle"}, "edited": false, "score": 1, "creation_date": 1574154967, "post_id": 58786712, "comment_id": 104120520, "body": "I tried your awaitRealtime() extension function but it&#39;s not working for me. It emits only once with actual model in the firestore. After the emit continuation.isActive() returns always false. Do you have any idea why/how to keep it active?"}, {"owner": {"reputation": 6199, "user_id": 2253682, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/skbWe.jpg?s=128&g=1", "display_name": "Adam Hurwitz", "link": "https://stackoverflow.com/users/2253682/adam-hurwitz"}, "reply_to_user": {"reputation": 961, "user_id": 2299605, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l1riA.jpg?s=128&g=1", "display_name": "elementstyle", "link": "https://stackoverflow.com/users/2299605/elementstyle"}, "edited": false, "score": 0, "creation_date": 1574182078, "post_id": 58786712, "comment_id": 104136642, "body": "Thanks for the feedback @elementstyle! I noticed this issue last night and am working to resolve it now."}, {"owner": {"reputation": 6199, "user_id": 2253682, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/skbWe.jpg?s=128&g=1", "display_name": "Adam Hurwitz", "link": "https://stackoverflow.com/users/2253682/adam-hurwitz"}, "reply_to_user": {"reputation": 961, "user_id": 2299605, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l1riA.jpg?s=128&g=1", "display_name": "elementstyle", "link": "https://stackoverflow.com/users/2299605/elementstyle"}, "edited": false, "score": 0, "creation_date": 1574185159, "post_id": 58786712, "comment_id": 104138249, "body": "I&#39;ve removed the condition <code>!value!!.isEmpty</code> which has resolved the issue. I will test throughout the day to ensure it is working."}, {"owner": {"reputation": 6199, "user_id": 2253682, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/skbWe.jpg?s=128&g=1", "display_name": "Adam Hurwitz", "link": "https://stackoverflow.com/users/2253682/adam-hurwitz"}, "reply_to_user": {"reputation": 961, "user_id": 2299605, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l1riA.jpg?s=128&g=1", "display_name": "elementstyle", "link": "https://stackoverflow.com/users/2299605/elementstyle"}, "edited": false, "score": 0, "creation_date": 1574291510, "post_id": 58786712, "comment_id": 104184738, "body": "Hi @elementstyle, the fix is working after 24hrs of testing. Please upvote the answer if it is working for yourself as well. Thanks!"}, {"owner": {"reputation": 961, "user_id": 2299605, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l1riA.jpg?s=128&g=1", "display_name": "elementstyle", "link": "https://stackoverflow.com/users/2299605/elementstyle"}, "edited": false, "score": 0, "creation_date": 1574419353, "post_id": 58786712, "comment_id": 104235759, "body": "Hi @AdamHurwitz, unfortunately it didn&#39;t help me. In my case after first emit <code>continuation.isActive()</code> returns always false so I don&#39;t receive data in the view. I&#39;m pretty new with coroutines especially flows. If you can provide a sample code demonstrating all layers (data source, repo, viewModel, view) it could help me. For now I use <a href=\"https://code.luasoftware.com/tutorials/google-cloud-firestore/firestore-query-addsnapshotlistener-as-livedata/\" rel=\"nofollow noreferrer\">this liveData approach</a>"}, {"owner": {"reputation": 6199, "user_id": 2253682, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/skbWe.jpg?s=128&g=1", "display_name": "Adam Hurwitz", "link": "https://stackoverflow.com/users/2253682/adam-hurwitz"}, "reply_to_user": {"reputation": 961, "user_id": 2299605, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l1riA.jpg?s=128&g=1", "display_name": "elementstyle", "link": "https://stackoverflow.com/users/2299605/elementstyle"}, "edited": false, "score": 0, "creation_date": 1574456247, "post_id": 58786712, "comment_id": 104253692, "body": "Here is the <a href=\"https://github.com/AdamSHurwitz/Coinverse\" rel=\"nofollow noreferrer\">Coinverse</a> open source code. The <a href=\"https://github.com/AdamSHurwitz/Coinverse/blob/master/app/src/main/java/app/coinverse/content/ContentRepository.kt#L240\" rel=\"nofollow noreferrer\">ContentRepository.kt</a> implements the <code>awaitRealtime</code> extension method above. Let me know if this clears things up for you and please star the project if useful as well."}, {"owner": {"reputation": 1293, "user_id": 12423905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f80c2e6034770729b699cd274a1738ff?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/12423905/andrew"}, "edited": false, "score": 0, "creation_date": 1600629072, "post_id": 58786712, "comment_id": 113141058, "body": "This does not work for me, it says &quot;No value passed for parameter onCancellation&quot;"}, {"owner": {"reputation": 6199, "user_id": 2253682, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/skbWe.jpg?s=128&g=1", "display_name": "Adam Hurwitz", "link": "https://stackoverflow.com/users/2253682/adam-hurwitz"}, "reply_to_user": {"reputation": 1293, "user_id": 12423905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f80c2e6034770729b699cd274a1738ff?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/12423905/andrew"}, "edited": false, "score": 0, "creation_date": 1600632243, "post_id": 58786712, "comment_id": 113141883, "body": "@Andrew, I&#39;d recommend creating a new StackOverflow post with a minimal viable sample to showcase the code implemented and the error log."}, {"owner": {"reputation": 1293, "user_id": 12423905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f80c2e6034770729b699cd274a1738ff?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/12423905/andrew"}, "edited": false, "score": 0, "creation_date": 1600633967, "post_id": 58786712, "comment_id": 113142295, "body": "Uhh I&#39;ve implemented the code above? In &quot;continuation.resume(QueryResponse(value, null))&quot; it says -&gt; &quot;No value passed for parameter onCancellation&quot;.  I think you should check your code again because the API has changed.. Resume has two parameters now"}, {"owner": {"reputation": 6199, "user_id": 2253682, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/skbWe.jpg?s=128&g=1", "display_name": "Adam Hurwitz", "link": "https://stackoverflow.com/users/2253682/adam-hurwitz"}, "reply_to_user": {"reputation": 1293, "user_id": 12423905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f80c2e6034770729b699cd274a1738ff?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/12423905/andrew"}, "edited": false, "score": 1, "creation_date": 1600750871, "post_id": 58786712, "comment_id": 113177834, "body": "Thank you for letting me know @Andrew. I will re-look at the current implementation of the code that is live in the open-source <a href=\"https://github.com/AdamSHurwitz/Coinverse\" rel=\"nofollow noreferrer\">Coinverse</a> app when I get a chance and update here if necessary."}, {"owner": {"reputation": 446, "user_id": 6007418, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2zgXY_nu5Zo/AAAAAAAAAAI/AAAAAAAAAB4/qOmgahTh1S8/photo.jpg?sz=128", "display_name": "Lennoard Silva", "link": "https://stackoverflow.com/users/6007418/lennoard-silva"}, "edited": false, "score": 0, "creation_date": 1603896328, "post_id": 58786712, "comment_id": 114181797, "body": "Does the <code>awaitRealtime()</code> cancel the snapshot listener it registrates when it dies?"}, {"owner": {"reputation": 6199, "user_id": 2253682, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/skbWe.jpg?s=128&g=1", "display_name": "Adam Hurwitz", "link": "https://stackoverflow.com/users/2253682/adam-hurwitz"}, "edited": false, "score": 0, "creation_date": 1603906450, "post_id": 58786712, "comment_id": 114186884, "body": "It&#39;s important to launch the coroutine Flow on the relevant lifecycle so that the Flow including the snapshot listener is cleared when the class launching the Flow is destroyed."}], "tags": [], "owner": {"reputation": 6199, "user_id": 2253682, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/skbWe.jpg?s=128&g=1", "display_name": "Adam Hurwitz", "link": "https://stackoverflow.com/users/2253682/adam-hurwitz"}, "is_accepted": false, "score": 4, "last_activity_date": 1595707196, "last_edit_date": 1595707196, "creation_date": 1573372265, "answer_id": 58786712, "question_id": 55459961, "link": "https://stackoverflow.com/questions/55459961/firebase-realtime-snapshot-listener-using-coroutines/58786712#58786712", "title": "Firebase realtime snapshot listener using Coroutines", "body": "<h1>Extension function to remove callbacks</h1>\n<p>For Firebase's Firestore database there are two types of calls.</p>\n<ol>\n<li>One time requests - <code>addOnCompleteListener</code></li>\n<li>Realtime updates - <code>addSnapshotListener</code></li>\n</ol>\n<h2>One time requests</h2>\n<p>For one time requests there is an <code>await</code> extension function provided by the library <code>org.jetbrains.kotlinx:kotlinx-coroutines-play-services:X.X.X</code>. The function returns results from <code>addOnCompleteListener</code>.</p>\n<p>For the latest version, see the Maven Repository, <em><a href=\"https://mvnrepository.com/artifact/org.jetbrains.kotlinx/kotlinx-coroutines-play-services\" rel=\"nofollow noreferrer\">kotlinx-coroutines-play-services</a></em>.</p>\n<p><strong>Resources</strong></p>\n<ul>\n<li><a href=\"https://joebirch.co/2019/10/03/using-firebase-on-android-with-kotlin-coroutines\" rel=\"nofollow noreferrer\">Using Firebase on Android with Kotlin Coroutines</a> by <a href=\"https://twitter.com/hitherejoe\" rel=\"nofollow noreferrer\">Joe Birch</a></li>\n<li><a href=\"https://dev.to/rosariopfernandes/using-kotlin-extension-functions-and-coroutines-with-firebase-j0k\" rel=\"nofollow noreferrer\">Using Kotlin Extension Functions and Coroutines with Firebase</a> by <a href=\"https://twitter.com/_rpfernandes\" rel=\"nofollow noreferrer\">Ros\u00e1rio Pereira Fernandes</a></li>\n</ul>\n<h2>Realtime updates</h2>\n<p>The extension function <code>awaitRealtime</code> has checks including verifying the state of the <code>continuation</code> in order to see whether it is in <code>isActive</code> state. This is important because the function is called when the user's main feed of content is updated either by a lifecycle event, refreshing the feed manually, or removing content from their feed. Without this check there will be a crash.</p>\n<p><em>ExtenstionFuction.kt</em></p>\n<pre><code>data class QueryResponse(val packet: QuerySnapshot?, val error: FirebaseFirestoreException?)\n\nsuspend fun Query.awaitRealtime() = suspendCancellableCoroutine&lt;QueryResponse&gt; { continuation -&gt;\n    addSnapshotListener({ value, error -&gt;\n        if (error == null &amp;&amp; continuation.isActive)\n            continuation.resume(QueryResponse(value, null))\n        else if (error != null &amp;&amp; continuation.isActive)\n            continuation.resume(QueryResponse(null, error))\n    })\n}\n</code></pre>\n<p>In order to handle errors the <code>try</code>/<code>catch</code> pattern is used.</p>\n<p><em>Repository.kt</em></p>\n<pre><code>object ContentRepository {\n    fun getMainFeedList(isRealtime: Boolean, timeframe: Timestamp) = flow&lt;Lce&lt;PagedListResult&gt;&gt; {\n        emit(Loading())\n        val labeledSet = HashSet&lt;String&gt;()\n        val user = usersDocument.collection(getInstance().currentUser!!.uid)\n        syncLabeledContent(user, timeframe, labeledSet, SAVE_COLLECTION, this)\n        getLoggedInNonRealtimeContent(timeframe, labeledSet, this)        \n    }\n    // Realtime updates with 'awaitRealtime' used\n    private suspend fun syncLabeledContent(user: CollectionReference, timeframe: Timestamp,\n                                       labeledSet: HashSet&lt;String&gt;, collection: String,\n                                       lce: FlowCollector&lt;Lce&lt;PagedListResult&gt;&gt;) {\n        val response = user.document(COLLECTIONS_DOCUMENT)\n            .collection(collection)\n            .orderBy(TIMESTAMP, DESCENDING)\n            .whereGreaterThanOrEqualTo(TIMESTAMP, timeframe)\n            .awaitRealtime()\n        if (response.error == null) {\n            val contentList = response.packet?.documentChanges?.map { doc -&gt;\n                doc.document.toObject(Content::class.java).also { content -&gt;\n                    labeledSet.add(content.id)\n                }\n            }\n            database.contentDao().insertContentList(contentList)\n        } else lce.emit(Error(PagedListResult(null,\n            &quot;Error retrieving user save_collection: ${response.error?.localizedMessage}&quot;)))\n    }\n    // One time updates with 'await' used\n    private suspend fun getLoggedInNonRealtimeContent(timeframe: Timestamp,\n                                                      labeledSet: HashSet&lt;String&gt;,\n                                                      lce: FlowCollector&lt;Lce&lt;PagedListResult&gt;&gt;) =\n            try {\n                database.contentDao().insertContentList(\n                        contentEnCollection.orderBy(TIMESTAMP, DESCENDING)\n                                .whereGreaterThanOrEqualTo(TIMESTAMP, timeframe).get().await()\n                                .documentChanges\n                                ?.map { change -&gt; change.document.toObject(Content::class.java) }\n                                ?.filter { content -&gt; !labeledSet.contains(content.id) })\n                lce.emit(Lce.Content(PagedListResult(queryMainContentList(timeframe), &quot;&quot;)))\n            } catch (error: FirebaseFirestoreException) {\n                lce.emit(Error(PagedListResult(\n                        null,\n                        CONTENT_LOGGED_IN_NON_REALTIME_ERROR + &quot;${error.localizedMessage}&quot;)))\n            }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14512, "user_id": 382749, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6e3d4da0667eb80d422ef1d1afc961fd?s=128&d=identicon&r=PG", "display_name": "joerick", "link": "https://stackoverflow.com/users/382749/joerick"}, "is_accepted": false, "score": 0, "last_activity_date": 1602161173, "creation_date": 1602161173, "answer_id": 64262858, "question_id": 55459961, "link": "https://stackoverflow.com/questions/55459961/firebase-realtime-snapshot-listener-using-coroutines/64262858#64262858", "title": "Firebase realtime snapshot listener using Coroutines", "body": "<p>This is working for me:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>suspend fun DocumentReference.observe(block: suspend (getNextSnapshot: suspend ()-&gt;DocumentSnapshot?)-&gt;Unit) {\n    val channel = Channel&lt;Pair&lt;DocumentSnapshot?, FirebaseFirestoreException?&gt;&gt;(Channel.UNLIMITED)\n\n    val listenerRegistration = this.addSnapshotListener { value, error -&gt;\n        channel.sendBlocking(Pair(value, error))\n    }\n\n    try {\n        block {\n            val (value, error) = channel.receive()\n\n            if (error != null) {\n                throw error\n            }\n            value\n        }\n    }\n    finally {\n        channel.close()\n        listenerRegistration.remove()\n    }\n}\n</code></pre>\n<p>Then you can use it like:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>docRef.observe { getNextSnapshot -&gt;\n    while (true) {\n         val value = getNextSnapshot() ?: continue\n         // do whatever you like with the database snapshot\n    }\n}\n</code></pre>\n<p>If the observer block throws an error, or the block finishes, or your coroutine is cancelled, the listener is removed automatically.</p>\n"}], "owner": {"reputation": 3174, "user_id": 4858147, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh4.googleusercontent.com/-WvQqad2FrJE/AAAAAAAAAAI/AAAAAAAAAeM/8CaDjrq8nHw/photo.jpg?sz=128", "display_name": "svkaka", "link": "https://stackoverflow.com/users/4858147/svkaka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5642, "favorite_count": 6, "accepted_answer_id": 55639950, "answer_count": 4, "score": 13, "last_activity_date": 1603645328, "creation_date": 1554137212, "last_edit_date": 1555011425, "question_id": 55459961, "link": "https://stackoverflow.com/questions/55459961/firebase-realtime-snapshot-listener-using-coroutines", "title": "Firebase realtime snapshot listener using Coroutines", "body": "<p>I want to be able to listen to realtime updates in Firebase DB's using Kotlin coroutines in my ViewModel.</p>\n\n<p>The problem is that whenever a new message is created in the collection my application freezes and won't recover from this state. I need to kill it and restart app.</p>\n\n<p>For the first time it passes and I can see the previous messages on the UI. This problem happens when <code>SnapshotListener</code> is called for 2nd time.</p>\n\n<p>My <code>observer()</code> function</p>\n\n<pre><code>val channel = Channel&lt;List&lt;MessageEntity&gt;&gt;()\nfirestore.collection(path).addSnapshotListener { data, error -&gt;\n    if (error != null) {\n        channel.close(error)\n    } else {\n        if (data != null) {\n            val messages = data.toObjects(MessageEntity::class.java)\n            //till this point it gets executed^^^^\n            channel.sendBlocking(messages)\n        } else {\n            channel.close(CancellationException(\"No data received\"))\n        }\n    }\n}\nreturn channel\n</code></pre>\n\n<p>That's how I want to observe messages</p>\n\n<pre><code>launch(Dispatchers.IO) {\n        val newMessages =\n            messageRepository\n                .observer()\n                .receive()\n    }\n}\n</code></pre>\n\n<p>After I replacing <code>sendBlocking()</code> with <code>send()</code> I am still not getting any new messages in the channel. <code>SnapshotListener</code> side is executed</p>\n\n<pre><code>//channel.sendBlocking(messages) was replaced by code bellow\nscope.launch(Dispatchers.IO) {\n    channel.send(messages)\n}\n//scope is my viewModel\n</code></pre>\n\n<p>How to observe messages in firestore/realtime-dbs using Kotlin coroutines?</p>\n"}, {"tags": ["android", "kotlin", "realm"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11293127, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-eOufNv1oHXY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfGXGb2RxqYuinjgOwZf-F-fwSgQA/mo/photo.jpg?sz=128", "display_name": "JMCarcedo", "link": "https://stackoverflow.com/users/11293127/jmcarcedo"}, "edited": false, "score": 0, "creation_date": 1554222259, "post_id": 55476591, "comment_id": 97668970, "body": "We already use <code>RealmMigration</code> for migration (see <code>getMigration()</code> method in <code>RealmIntance</code>class) but that wasn&#39;t exactly the point we are looking. With the migration we can&#39;t delete a realm instance with <code>deleteRealm()</code> (it&#39;s not already build)"}, {"owner": {"reputation": 11, "user_id": 11293127, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-eOufNv1oHXY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfGXGb2RxqYuinjgOwZf-F-fwSgQA/mo/photo.jpg?sz=128", "display_name": "JMCarcedo", "link": "https://stackoverflow.com/users/11293127/jmcarcedo"}, "edited": false, "score": 0, "creation_date": 1554222701, "post_id": 55476591, "comment_id": 97669212, "body": "If we want to remove them the hard way (by deleting the realm files in the database folder) we will need a <code>context </code> to search for the file (I personally think a <code>context </code> should never be passing from class to class out of the view without a very reasonable motive)  I was asking for a more creative solution."}, {"owner": {"reputation": 1897, "user_id": 1243048, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/92xOo.png?s=128&g=1", "display_name": "Maelig", "link": "https://stackoverflow.com/users/1243048/maelig"}, "reply_to_user": {"reputation": 11, "user_id": 11293127, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-eOufNv1oHXY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfGXGb2RxqYuinjgOwZf-F-fwSgQA/mo/photo.jpg?sz=128", "display_name": "JMCarcedo", "link": "https://stackoverflow.com/users/11293127/jmcarcedo"}, "edited": false, "score": 0, "creation_date": 1554285279, "post_id": 55476591, "comment_id": 97691654, "body": "Can&#39;t you just delete all old entities in the RealmMigration ? It&#39;s tedious but it&#39;ll work ;)"}, {"owner": {"reputation": 11, "user_id": 11293127, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-eOufNv1oHXY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfGXGb2RxqYuinjgOwZf-F-fwSgQA/mo/photo.jpg?sz=128", "display_name": "JMCarcedo", "link": "https://stackoverflow.com/users/11293127/jmcarcedo"}, "edited": false, "score": 0, "creation_date": 1554367174, "post_id": 55476591, "comment_id": 97727926, "body": "You mean deleting them from the schema? Shouldn&#39;t that implies that we would have to add them all again? If you don&#39;t mean that, how would we do it? I think of passing the actual builder to the migration class, build the configuration and use <code>getRealmDirectory()</code> to find and delete all that instance DB whenever is necessary but don&#39;t really know if it would work or if it is a good practice"}, {"owner": {"reputation": 1897, "user_id": 1243048, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/92xOo.png?s=128&g=1", "display_name": "Maelig", "link": "https://stackoverflow.com/users/1243048/maelig"}, "reply_to_user": {"reputation": 11, "user_id": 11293127, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-eOufNv1oHXY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfGXGb2RxqYuinjgOwZf-F-fwSgQA/mo/photo.jpg?sz=128", "display_name": "JMCarcedo", "link": "https://stackoverflow.com/users/11293127/jmcarcedo"}, "edited": false, "score": 0, "creation_date": 1554449305, "post_id": 55476591, "comment_id": 97763985, "body": "If I get correctly what you want : if schema version is X you want to delete everything to get a fresh start. If so you could delete every classes like explained here <a href=\"https://stackoverflow.com/a/36723295/1243048\">stackoverflow.com/a/36723295/1243048</a> and then create all your new classes. I&#39;m I wrong ?"}, {"owner": {"reputation": 11, "user_id": 11293127, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-eOufNv1oHXY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfGXGb2RxqYuinjgOwZf-F-fwSgQA/mo/photo.jpg?sz=128", "display_name": "JMCarcedo", "link": "https://stackoverflow.com/users/11293127/jmcarcedo"}, "edited": false, "score": 0, "creation_date": 1554711465, "post_id": 55476591, "comment_id": 97836974, "body": "You are right that&#39;s exactly what I want to achieve but trying to use a method when I don&#39;t need to delete all my classes and then creating them again."}, {"owner": {"reputation": 11, "user_id": 11293127, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-eOufNv1oHXY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfGXGb2RxqYuinjgOwZf-F-fwSgQA/mo/photo.jpg?sz=128", "display_name": "JMCarcedo", "link": "https://stackoverflow.com/users/11293127/jmcarcedo"}, "edited": false, "score": 0, "creation_date": 1554711965, "post_id": 55476591, "comment_id": 97837213, "body": "Also I don&#39;t know if it is a good practice to refer to an example in another language as in Java we don&#39;t have the same methods. I will try to use the delete all realm files approach and see what happens."}], "tags": [], "owner": {"reputation": 1897, "user_id": 1243048, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/92xOo.png?s=128&g=1", "display_name": "Maelig", "link": "https://stackoverflow.com/users/1243048/maelig"}, "is_accepted": false, "score": 0, "last_activity_date": 1554213289, "creation_date": 1554213289, "answer_id": 55476591, "question_id": 55459436, "link": "https://stackoverflow.com/questions/55459436/get-realm-old-schema-version-during-realmconfiguration-build/55476591#55476591", "title": "Get realm old schema version during RealmConfiguration build", "body": "<p>You can use <code>RealmMigration</code> implementation to check old and new versions :</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class CustomRealmMigration implements RealmMigration {\n\n    @Override\n    public void migrate(DynamicRealm realm, long oldVersion, long newVersion) {\n        //do what you want\n    }\n}\n</code></pre>\n\n<p>and add this to your <code>RealmConfiguration</code> builder :</p>\n\n<pre><code>RealmConfiguration.Builder()\n//...\n.migration(new CustomRealmMigration())\n//...\n.build()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 11293127, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-eOufNv1oHXY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfGXGb2RxqYuinjgOwZf-F-fwSgQA/mo/photo.jpg?sz=128", "display_name": "JMCarcedo", "link": "https://stackoverflow.com/users/11293127/jmcarcedo"}, "edited": false, "score": 0, "creation_date": 1554968541, "post_id": 55578487, "comment_id": 97946130, "body": "I actually saw this answer before, as I mention in the problem description, the problem with this approach is that you have to generate a Realm instance (dynamic in this case) but you have to supply a &#39;realmConfiguration&#39; where you have to set the version.   Doesn&#39;t that means that when you get its schema version it will return the one you just set in the configuration?"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "reply_to_user": {"reputation": 11, "user_id": 11293127, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-eOufNv1oHXY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfGXGb2RxqYuinjgOwZf-F-fwSgQA/mo/photo.jpg?sz=128", "display_name": "JMCarcedo", "link": "https://stackoverflow.com/users/11293127/jmcarcedo"}, "edited": false, "score": 0, "creation_date": 1554973304, "post_id": 55578487, "comment_id": 97948720, "body": "I don&#39;t think the DynamicRealm actually cares about your schema version property, because Dynamic Realm doesn&#39;t do schema validation. But the Realm file itself does have a schema version and it should be returning that"}], "tags": [], "owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "is_accepted": false, "score": 0, "last_activity_date": 1554743505, "creation_date": 1554743505, "answer_id": 55578487, "question_id": 55459436, "link": "https://stackoverflow.com/questions/55459436/get-realm-old-schema-version-during-realmconfiguration-build/55578487#55578487", "title": "Get realm old schema version during RealmConfiguration build", "body": "<p>You can open the Realm via <code>DynamicRealm.getInstance(realmConfiguration)</code> to see the schema version. If it's smaller than 6, close the dynamic Realm, then call <code>Realm.deleteRealm(realmConfiguration)</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 11293127, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-eOufNv1oHXY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfGXGb2RxqYuinjgOwZf-F-fwSgQA/mo/photo.jpg?sz=128", "display_name": "JMCarcedo", "link": "https://stackoverflow.com/users/11293127/jmcarcedo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 481, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1554743505, "creation_date": 1554135199, "question_id": 55459436, "link": "https://stackoverflow.com/questions/55459436/get-realm-old-schema-version-during-realmconfiguration-build", "title": "Get realm old schema version during RealmConfiguration build", "body": "<p>In my current project we have five different instances of realm for different porpoises. The main one's schema version is now 5 and we want to get rid of it and start the next one (schema version 6) completely clean, because we launch version 2.0.0 of the app and there were mayor DB changes.</p>\n\n<p>The question is, is there a way to check the old schema version of a realm instance before building its new configuration?</p>\n\n<p>We already tried defining a specific schema version to delete realm with <code>realmDeleteIfMigrationNeeded()</code> and providing a migration class for following versions. The problem with this approach is when a user has a version of the app with schema version below the one specify and update to an app version with a greater one an so we have a migration needed exception.</p>\n\n<p>I also found here <a href=\"https://stackoverflow.com/questions/31419803/realm-check-schema-version\">realm, check schema version</a>, here <a href=\"https://github.com/realm/realm-java/issues/2645\" rel=\"nofollow noreferrer\">https://github.com/realm/realm-java/issues/2645</a> and here <a href=\"https://github.com/realm/realm-java/issues/6049\" rel=\"nofollow noreferrer\">https://github.com/realm/realm-java/issues/6049</a> a possible solution doing 'val realm = DynamicRealm.getInstance(realmConfiguration)' and then 'getSchemaVersion()' but we really don't know how this could work as you have to provide a 'RealmConfiguration' when you actually have to set the schema version.</p>\n\n<p>I will try to clarify my question, we have the following way of getting a realm instance</p>\n\n<pre><code>private val realmConfiguration = buildRealmConfiguration(realmInstance)\n\nprivate fun buildRealmConfiguration(realmInstance: RealmInstance):\n    RealmConfiguration {\n\n    return realmInstance.run {\n        val realmBuilder = RealmConfiguration.Builder()\n            .name(getName())\n            .schemaVersion(schemaVersion.toLong())\n\n        if (this == RealmInstance.IN_MEMORY) {\n            realmBuilder.inMemory()\n        } else {\n            getMigration(realmBuilder, this)\n        }\n\n        realmBuilder.build()\n    }\n\nfun getInstance(): Realm {\n    return Realm.getInstance(realmConfiguration)\n}\n</code></pre>\n\n<pre><code>enum class RealmInstance(val instance: String, val schemaVersion: Int) {\n\n    MAIN_DB(instance = \"main_db\", schemaVersion = 5),\n    DB2(instance = \"db2\", schemaVersion = 1),\n    ...\n\n    fun getName() = instance\n\n    fun getMigration(\n        realmBuilder: RealmConfiguration.Builder, \n        realmInstance: RealmInstance\n    ) {\n\n        when (realmInstance) {\n\n            MAIN_DB -&gt; {\n                /*\n                Variable used to delete main_db Realm during migration from app version 1.x.x to version 2.0.0 due to a mayor schema change\n                */\n                val migrateToAppVersion2 = realmInstance.schemaVersion &lt;= 4\n\n                realmBuilder.apply {\n                    modules(mainDbModule())\n                    if (deleteRealm) {\n                        deleteRealmIfMigrationNeeded()\n                    } else {\n                        migration(realmMigration!!)\n                    }\n                }\n            }\n...\n</code></pre>\n\n<p>The ideal situation will be check the actual schema version of the DB before calling 'getMigration()' allowing us to always deleting realm if the old schema version belongs to v1.x.x of the app.</p>\n"}]