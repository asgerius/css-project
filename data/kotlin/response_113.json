[{"tags": ["reflection", "delegates", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 3103, "user_id": 3887813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6a5d60d4ba9be9d67243bef5ca7f0141?s=128&d=identicon&r=PG&f=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/3887813/robin"}, "is_accepted": false, "score": 3, "last_activity_date": 1488971702, "creation_date": 1488971702, "answer_id": 42669798, "question_id": 42669433, "link": "https://stackoverflow.com/questions/42669433/kotlin-how-are-a-delegates-get-and-setvalue-methods-accessed/42669798#42669798", "title": "Kotlin: How are a Delegate&#39;s get- and setValue Methods accessed?", "body": "<p>If you look at the generated Kotlin bytecode, you'll see that a private field is created in the class holding the delegate you're using, and the <code>get</code> and <code>set</code> method for the property just call the corresponding method on that delegate field.</p>\n\n<p>As the class of the delegate is known at compile time, no reflection has to happen, just simple method calls.</p>\n"}, {"comments": [{"owner": {"reputation": 214, "user_id": 5604890, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Dk-XyLaSseE/AAAAAAAAAAI/AAAAAAAAAZ4/NW9y0lmlwvk/photo.jpg?sz=128", "display_name": "Lukas", "link": "https://stackoverflow.com/users/5604890/lukas"}, "edited": false, "score": 0, "creation_date": 1488972173, "post_id": 42669819, "comment_id": 72464497, "body": "Thanks for the answer. Covers my question for the most part. &quot;There is no such interface since it is not needed (for runtime performance)&quot; - makes sense. I am still wondering tho why you don&#39;t just have delegates implement the interface anyway. It would arguably be easier to understand and create delegates then, in my opinion. But I am willing to leave it there :) (will accept in a bit if nothing amazing comes along)"}, {"owner": {"reputation": 214, "user_id": 5604890, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Dk-XyLaSseE/AAAAAAAAAAI/AAAAAAAAAZ4/NW9y0lmlwvk/photo.jpg?sz=128", "display_name": "Lukas", "link": "https://stackoverflow.com/users/5604890/lukas"}, "edited": false, "score": 0, "creation_date": 1488972470, "post_id": 42669819, "comment_id": 72464722, "body": "&quot;Extension Functions do not allow method overriding&quot; - got me on that one."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 11, "last_activity_date": 1488986414, "last_edit_date": 1495540436, "creation_date": 1488971759, "answer_id": 42669819, "question_id": 42669433, "link": "https://stackoverflow.com/questions/42669433/kotlin-how-are-a-delegates-get-and-setvalue-methods-accessed/42669819#42669819", "title": "Kotlin: How are a Delegate&#39;s get- and setValue Methods accessed?", "body": "<p>The delegates convention (<code>getValue</code> + <code>setValue</code>) is implemented at the compiler side and basically none of its resolution logic is executed at runtime: the calls to the corresponding methods of a delegate object are placed directly in the generated bytecode. </p>\n\n<p>Let's take a look at the bytecode generated for a class with a delegated property (you can do that with <a href=\"https://stackoverflow.com/a/35538539/2196460\">the bytecode viewing tool</a> built into IntelliJ IDEA):</p>\n\n<pre><code>class C {\n    val x by lazy { 123 }\n}\n</code></pre>\n\n<p>We can find the following in the generated bytecode:</p>\n\n<ul>\n<li><p>This is the field of the class <code>C</code> that stores the reference to the delegate object:</p>\n\n<pre><code>// access flags 0x12\nprivate final Lkotlin/Lazy; x$delegate\n</code></pre></li>\n<li><p>This is the part of the constructor (<code>&lt;init&gt;</code>) that initialized the delegate field, passing the function to the <code>Lazy</code> constructor:</p>\n\n<pre><code>ALOAD 0\nGETSTATIC C$x$2.INSTANCE : LC$x$2;\nCHECKCAST kotlin/jvm/functions/Function0\nINVOKESTATIC kotlin/LazyKt.lazy (Lkotlin/jvm/functions/Function0;)Lkotlin/Lazy;\nPUTFIELD C.x$delegate : Lkotlin/Lazy;\n</code></pre></li>\n<li><p>And this is the code of <code>getX()</code>:</p>\n\n<pre><code>L0\n  ALOAD 0\n  GETFIELD C.x$delegate : Lkotlin/Lazy;\n  ASTORE 1\n  ALOAD 0\n  ASTORE 2\n  GETSTATIC C.$$delegatedProperties : [Lkotlin/reflect/KProperty;\n  ICONST_0\n  AALOAD\n  ASTORE 3\nL1\n  ALOAD 1\n  INVOKEINTERFACE kotlin/Lazy.getValue ()Ljava/lang/Object;\nL2\n  CHECKCAST java/lang/Number\n  INVOKEVIRTUAL java/lang/Number.intValue ()I\n  IRETURN\n</code></pre>\n\n<p>You can see the call to the <code>getValue</code> method of <code>Lazy</code> that is placed directly in the bytecode. In fact, the compiler resolves the method with the correct signature for the delegate convention and generates the getter that calls that method.</p></li>\n</ul>\n\n<p>This convention is not the only one implemented at the compiler side: there are also <code>iterator</code>, <code>compareTo</code>, <code>invoke</code> and the other operators that can be overloaded -- all of them are similar, but the code generation logic for them is simpler than that of delegates. </p>\n\n<p>Note, however, that <strong>none of them requires an interface to be implemented</strong>: the <code>compareTo</code> operator can be defined for a type not implementing <code>Comparable&lt;T&gt;</code>, and <code>iterator()</code> does not require the type to be an implementation of <code>Iterable&lt;T&gt;</code>, they are anyway resolved at compile-time.</p>\n\n<p>While the interfaces approach could be cleaner than the operators convention, it would allow less flexibility: for example, <a href=\"https://kotlinlang.org/docs/reference/extensions.html\" rel=\"nofollow noreferrer\">extension functions</a> could not be used because they cannot be compiled into methods overriding those of an interface.</p>\n"}], "owner": {"reputation": 214, "user_id": 5604890, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Dk-XyLaSseE/AAAAAAAAAAI/AAAAAAAAAZ4/NW9y0lmlwvk/photo.jpg?sz=128", "display_name": "Lukas", "link": "https://stackoverflow.com/users/5604890/lukas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 897, "favorite_count": 0, "accepted_answer_id": 42669819, "answer_count": 2, "score": 10, "last_activity_date": 1488986414, "creation_date": 1488970628, "last_edit_date": 1488971058, "question_id": 42669433, "link": "https://stackoverflow.com/questions/42669433/kotlin-how-are-a-delegates-get-and-setvalue-methods-accessed", "title": "Kotlin: How are a Delegate&#39;s get- and setValue Methods accessed?", "body": "<p><br>I've been wondering how <a href=\"https://kotlinlang.org/docs/reference/delegated-properties.html\" rel=\"noreferrer\">delegated properties</a> (\"by\"-Keyword) work under-the-hood.<br> I get that by contract the delegate (right side of \"by\") has to implement a get and setValue(...) method, but how can that be ensured by the compiler and how can those methods be accessed at runtime?<br> My initial thought was that obviously the delegates must me implementing some sort of \"SuperDelegate\"-Interface, but it appears that is not the case.<br> So the only option left (that I am aware of) would be to use Reflection to access those methods, possibly implemented at a low level inside the language itself. I find that to be somewhat weird, since by my understanding that would be rather inefficient. Also the Reflection API is not even part of the stdlib, which makes it even weirder.</p>\n\n<p>I am assuming that the latter is already (part of) the answer. So let me furthermore ask you the following: Why is there no SuperDelegate-Interface that declare the getter and setter methods that we are forced to use anyway? Wouldn't that be much cleaner?\n<br><br></p>\n\n<p><em>The following is not essential to the question</em></p>\n\n<hr>\n\n<p>The described Interface(s) are even already defined in <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.properties/-read-only-property/\" rel=\"noreferrer\">ReadOnlyProperty</a> and <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.properties/-read-write-property/index.html\" rel=\"noreferrer\">ReadWriteProperty</a>. To decide which one to use could then be made dependable on whether we have a val/var. Or even omit that since calling the setValue Method on val's is being prevented by the compiler and only use the ReadWriteProperty-Interface as the SuperDelegate.</p>\n\n<p>Arguably when requiring a delegate to implement a certain interface the construct would be less flexible. Though that would be assuming that the Class used as a Delegate is possibly unaware of being used as such, which I find to be unlikely given the specific requirements for the necessary methods. And if you still insist, here's a crazy thought: Why not even go as far as to make that class implement the required interface via <a href=\"https://kotlinlang.org/docs/reference/extensions.html\" rel=\"noreferrer\">Extension</a> (I'm aware that's not possible as of now, but heck, why not? Probably there's a good 'why not', please let me know as a side-note).</p>\n"}, {"tags": ["java", "operator-overloading", "interop", "kotlin"], "comments": [{"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "edited": false, "score": 1, "creation_date": 1488978249, "post_id": 42666760, "comment_id": 72468895, "body": "If interested, <a href=\"https://github.com/elect86/glm\" rel=\"nofollow noreferrer\">here</a> a glm port"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "reply_to_user": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "edited": false, "score": 0, "creation_date": 1488983820, "post_id": 42666760, "comment_id": 72472876, "body": "@elect using your port is the best solution there is, why don&#39;t you post as an answer?"}, {"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "edited": false, "score": 0, "creation_date": 1488984546, "post_id": 42666760, "comment_id": 72473447, "body": "Afraid to appear too much insistent/invasive, but since you suggested it, I&#39;ll try.."}], "answers": [{"comments": [{"owner": {"reputation": 189, "user_id": 3493080, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/128Cm.png?s=128&g=1", "display_name": "baeda", "link": "https://stackoverflow.com/users/3493080/baeda"}, "edited": false, "score": 0, "creation_date": 1488981254, "post_id": 42667647, "comment_id": 72470966, "body": "That&#39;s kind of sad, as the library is really good. But using an operator overload that totally surprises you is just bad :("}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1488983718, "post_id": 42667647, "comment_id": 72472799, "body": "<code>@kotlin.internal.HidesMembers</code> would solve the problem, but you know, if you work for JetBrains.."}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 1, "last_activity_date": 1488965745, "creation_date": 1488965745, "answer_id": 42667647, "question_id": 42666760, "link": "https://stackoverflow.com/questions/42666760/java-methods-wrongly-get-automatically-overloaded-in-kotlin/42667647#42667647", "title": "Java methods wrongly get automatically overloaded in kotlin", "body": "<p>Ideally, you'd change the Java class to make its operator functions adhere to conventions better. If you can not modify that original class, you'll always have the <code>/</code> operator available to use from Kotlin when you're using it. </p>\n\n<p>Since it's inside the original class, you won't be able to override it with an extension function, the original will always have priority over it, regardless of where the extension is declared or how it's imported.</p>\n\n<p>You'll either have to live with the syntax being available, or if you really can't have that, you could create a wrapper class around <code>Vector2f</code> that doesn't have a function of that name publicly available.</p>\n"}, {"comments": [{"owner": {"reputation": 189, "user_id": 3493080, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/128Cm.png?s=128&g=1", "display_name": "baeda", "link": "https://stackoverflow.com/users/3493080/baeda"}, "edited": false, "score": 0, "creation_date": 1488987003, "post_id": 42674981, "comment_id": 72475266, "body": "I upvoted for the effort and I&#39;ll sure be looking into your GLM port instead of using the one I have right now. Since it&#39;s not providing the answer to the question (&#39;can I make kotlin accept my operator overload instead of the automatic generated one&#39;) really, I can&#39;t accept it as correct I&#39;m afraid!"}, {"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "reply_to_user": {"reputation": 189, "user_id": 3493080, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/128Cm.png?s=128&g=1", "display_name": "baeda", "link": "https://stackoverflow.com/users/3493080/baeda"}, "edited": false, "score": 1, "creation_date": 1488988469, "post_id": 42674981, "comment_id": 72476387, "body": "Yeah, don&#39;t worry, I totally get it, thanks for the upvoting :) I hope it will be useful for people who will have similar issues as your"}], "tags": [], "owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "is_accepted": false, "score": 3, "last_activity_date": 1488985898, "creation_date": 1488985898, "answer_id": 42674981, "question_id": 42666760, "link": "https://stackoverflow.com/questions/42666760/java-methods-wrongly-get-automatically-overloaded-in-kotlin/42674981#42674981", "title": "Java methods wrongly get automatically overloaded in kotlin", "body": "<p>I am working on glm port <a href=\"https://github.com/elect86/glm\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>For your example, relevant code is <a href=\"https://github.com/elect86/glm/blob/master/src/main/kotlin/vec/_2/Vec2.kt#L175-L184\" rel=\"nofollow noreferrer\">here</a></p>\n\n<pre><code>operator fun div(b: Float) = div(Vec2(), this, b, b)\noperator fun div(b: Vec2) = div(Vec2(), this, b.x, b.y)\n\nfun div(bX: Float, bY: Float, res: Vec2 = Vec2()) = div(res, this, bX, bY)\nfun div(b: Float, res: Vec2 = Vec2()) = div(res, this, b, b)\nfun div(b: Vec2, res: Vec2 = Vec2()) = div(res, this, b.x, b.y)\n\nfun div_(bX: Float, bY: Float) = div(this, this, bX, bY)\ninfix fun div_(b: Float) = div(this, this, b, b)\ninfix fun div_(b: Vec2) = div(this, this, b.x, b.y)\n</code></pre>\n\n<p>The logic behind is quite simple, referencing your sample, the shortest/simplest code:</p>\n\n<pre><code>val v0 = Vec2(12f)\nval v1 = Vec2(2f)\n\nval res = v0 / v1\n</code></pre>\n\n<p><em>always</em> creates a new instance. This somehow follows the guidelines that were also written on the <a href=\"https://kotlinlang.org/docs/reference/operator-overloading.html\" rel=\"nofollow noreferrer\">Kotlin docs</a>. And that are still there for the <code>inc()</code> and <code>dec()</code> section (it has been modified in the meanwhile).</p>\n\n<p>Also is the less error prone form as possible (personal experience..)</p>\n\n<p>For performance critical scenarios, when you don't want to allocate a new instance, the compromise is to give up on the operator overloading and use the functional form:</p>\n\n<pre><code>v0.div(v1, res)\n</code></pre>\n\n<p>that means, divide <code>v0</code> by <code>v1</code> and put the result in <code>res</code>.</p>\n\n<p>In case you want the receiver object to mutate and accomodate directly the result:</p>\n\n<pre><code>v0 div_ v1\n</code></pre>\n\n<p>the idea behind this is to exploit the similarity behind the underscore <code>_</code> and the equal sign <code>=</code> and interpret <code>div_</code> as <code>/=</code></p>\n"}], "owner": {"reputation": 189, "user_id": 3493080, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/128Cm.png?s=128&g=1", "display_name": "baeda", "link": "https://stackoverflow.com/users/3493080/baeda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 417, "favorite_count": 1, "accepted_answer_id": 42667647, "answer_count": 2, "score": 4, "last_activity_date": 1488985898, "creation_date": 1488962998, "question_id": 42666760, "link": "https://stackoverflow.com/questions/42666760/java-methods-wrongly-get-automatically-overloaded-in-kotlin", "title": "Java methods wrongly get automatically overloaded in kotlin", "body": "<p>Given a Java library containing the following (condensed) class:</p>\n\n<pre><code>public class Vector2f {\n    public float x;\n    public float y;\n\n    public Vector2f div(Vector2f other) {\n        x /= other.x;\n        y /= other.y;\n        return this;\n    }\n\n    public Vector2f div(Vector2f other, Vector2f dest) {\n        dest.x = x / other.x;\n        dest.y = y / other.y;\n        return dest;\n    }\n\n    /* ... */\n}\n</code></pre>\n\n<p>Since kotlin automagically converts suitable method names into overloaded operators, I can write</p>\n\n<pre><code>val v0 = Vector2f(12f, 12f)\nval v1 = Vector2f(2f, 2f)\n\nval res = v0 / v1\n\nprintln(v0)\nprintln(v1)\nprintln(res)\n\nres.x = 44f\nprintln()\n\nprintln(v0)\nprintln(v1)\nprintln(res)\n</code></pre>\n\n<p>...with the completely unexpected result that <code>v0</code> gets mutated by the infix division operation. And, furthermore, that the reference stored in <code>res</code> points to the same object as <code>v0</code> Output:</p>\n\n<pre><code>Vector2f(6.0, 6.0)\nVector2f(2.0, 2.0)\nVector2f(6.0, 6.0)\n\nVector2f(44.0, 6.0)\nVector2f(2.0, 2.0)\nVector2f(44.0, 6.0)\n</code></pre>\n\n<p>Since the library also provides an overload to write the result into another vector, I was wondering if I can 'tell' kotlin not to use the provided <code>Vector2f.div(Vector2f)</code> method.</p>\n\n<p>I have already tried to provide an extension method to <code>Vector2f</code> but that gets shadowed by the real member:</p>\n\n<pre><code>operator fun Vector2f.div(other: Vector2f): Vector2f = this.div(other, Vector2f())\n                      ^~~ extension is shadowed by a member: public open operator fun div(other: Vector2f!): Vector2f!\n</code></pre>\n"}, {"tags": ["android", "kotlin", "kotlin-extension"], "comments": [{"owner": {"reputation": 5252, "user_id": 1189800, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BQHkY.jpg?s=128&g=1", "display_name": "Chetan Joshi", "link": "https://stackoverflow.com/users/1189800/chetan-joshi"}, "edited": false, "score": 2, "creation_date": 1488895177, "post_id": 42650223, "comment_id": 72426487, "body": "post your layout xml and code ."}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1488895248, "post_id": 42650223, "comment_id": 72426530, "body": "Please post larger pieces of your code to provide some context."}], "answers": [{"tags": [], "owner": {"reputation": 807, "user_id": 7441041, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/affe7ad37b72e7a3e6ff2a51ddb0dd1b?s=128&d=identicon&r=PG&f=1", "display_name": "lampenlampen", "link": "https://stackoverflow.com/users/7441041/lampenlampen"}, "is_accepted": true, "score": 2, "last_activity_date": 1488896105, "last_edit_date": 1495542715, "creation_date": 1488895679, "answer_id": 42650423, "question_id": 42650223, "link": "https://stackoverflow.com/questions/42650223/findviewbyid-classcastexcpetion/42650423#42650423", "title": "findViewById ClassCastExcpetion", "body": "<p>Restarting IntelliJ solved my problem.</p>\n\n<p>Didn't thought on that, only rebuilt my Project and that didn't helped.</p>\n\n<p>Due to this <a href=\"https://stackoverflow.com/a/7731317/7441041\">Post</a>, I thought this could be my problem, so because rebuilt dosn't helped, I restartet IntelliJ and it worked.</p>\n"}], "owner": {"reputation": 807, "user_id": 7441041, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/affe7ad37b72e7a3e6ff2a51ddb0dd1b?s=128&d=identicon&r=PG&f=1", "display_name": "lampenlampen", "link": "https://stackoverflow.com/users/7441041/lampenlampen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 42650423, "answer_count": 1, "score": 2, "last_activity_date": 1488896105, "creation_date": 1488895026, "question_id": 42650223, "link": "https://stackoverflow.com/questions/42650223/findviewbyid-classcastexcpetion", "title": "findViewById ClassCastExcpetion", "body": "<p>I'm using the kotlin-extension plugin for finding the views.</p>\n\n<p>But now I get an exception by</p>\n\n<pre><code>setSupportActionBar(mainActivity_toolbar)\n</code></pre>\n\n<p>It worked until now, but now it gives an</p>\n\n<pre><code>ClassCastException: android.widget.FrameLayout cannot be cast to android.support.v7.widget.Toolbar\n</code></pre>\n\n<p>The last Thing I did, was to add an id to my fab and set an <code>OnClickListener</code>.</p>\n\n<p>But in my layout.xml:</p>\n\n<p><code>android.support.v7.widget.Toolbar</code> has the id <code>\"@+id/mainActivity_toolbar\"</code>\nand <code>FrameLayout</code> has the id <code>\"@+id/mainActivity_framelayout\"</code>.</p>\n\n<p>I first thought there is a bug in the kotlin-extension plugin, but with <code>findViewById</code> it doesn't work either.</p>\n\n<p>Thank you</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "edited": false, "score": 0, "creation_date": 1488890205, "post_id": 42646728, "comment_id": 72423109, "body": "&gt; Property must be initialized or abstract"}], "tags": [], "owner": {"reputation": 1378, "user_id": 5400641, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/00570bb707b63435b14c28d44d8feef3?s=128&d=identicon&r=PG&f=1", "display_name": "kurt", "link": "https://stackoverflow.com/users/5400641/kurt"}, "is_accepted": false, "score": -1, "last_activity_date": 1488884999, "creation_date": 1488884999, "answer_id": 42646728, "question_id": 42646452, "link": "https://stackoverflow.com/questions/42646452/jvmfield-on-properties-for-a-generic-abstract-class/42646728#42646728", "title": "@JvmField on properties for a generic/abstract class", "body": "<p>@JvmField instructs the Kotlin compiler not to generate getters/setters for this property and expose it as a field, so if it will be a field it will not possible to overwrite it. </p>\n\n<p>For your case you need something like this: </p>\n\n<pre><code>abstract class Vec2t&lt;T : Number&gt; {\n    @JvmField\n    var x: T\n\n    @JvmField\n    var y: T\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "edited": false, "score": 0, "creation_date": 1488890424, "post_id": 42647401, "comment_id": 72423258, "body": "Thanks zsmb, it looks perfect!"}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 1, "creation_date": 1488894641, "post_id": 42647401, "comment_id": 72426067, "body": "This <code>Vec2t</code> implementation can be simplified by placing the  <code>@JvmField</code> properties straight into the constructor: <code>abstract class Vec2t&lt;T : Number&gt;(@JvmField var x: T, @JvmField var y: T)</code>."}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1488894756, "post_id": 42647401, "comment_id": 72426162, "body": "Oh right, I don&#39;t know why I didn&#39;t make that step, that&#39;s much neater. Got too fixed in to having them inside the class body I suppose."}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 2, "last_activity_date": 1489043674, "last_edit_date": 1495539978, "creation_date": 1488886864, "answer_id": 42647401, "question_id": 42646452, "link": "https://stackoverflow.com/questions/42646452/jvmfield-on-properties-for-a-generic-abstract-class/42647401#42647401", "title": "@JvmField on properties for a generic/abstract class", "body": "<p>As a <code>@JvmField</code> is accessed directly in Java, we can't initialize with anything tricky like a delegate, and can't mark it as <code>lateinit</code> either. This is also why it can't be backed by an abstract or open property; if you have <code>float x;</code> inside a class in Java, it's accessed directly, and you can't intercept reads/writes to it in any way, which all the above features would require.</p>\n\n<p>The problem you're trying to solve is initializing them with valid values on creation. One thing you could do is mark them as nullable and intialize them as <code>null</code>, but I think that would go directly against the convenience you're looking for (and probably performance, since they'd now have to be boxed), I just thought I'd mention that it's possible.</p>\n\n<p>All this to say is that you're basically stuck with one of your solutions, or if it suits your use case, I'd suggest intializing them from constructor parameters:</p>\n\n<pre><code>abstract class Vec2t&lt;T : Number&gt; constructor(_x: T, _y: T)  {\n\n    @JvmField\n    var x: T = _x\n\n    @JvmField\n    var y: T = _y\n\n}\n\nclass Vec2(x: Float, y: Float) : Vec2t&lt;Float&gt;(x, y)\n</code></pre>\n\n<p>This way you have your values marked as <code>@JvmField</code>s and can access it directly from both languages, and they're intialized with a real value on creation.</p>\n\n<p><strong>Update:</strong></p>\n\n<p>Here is a shorter version (by <a href=\"https://stackoverflow.com/users/3255152/mfulton26\">@mfulton26</a>):</p>\n\n<pre><code>abstract class Vec2t&lt;T : Number&gt;(@JvmField var x: T, @JvmField var y: T)\n</code></pre>\n"}], "owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1583, "favorite_count": 0, "accepted_answer_id": 42647401, "answer_count": 2, "score": 1, "last_activity_date": 1489043674, "creation_date": 1488884254, "question_id": 42646452, "link": "https://stackoverflow.com/questions/42646452/jvmfield-on-properties-for-a-generic-abstract-class", "title": "@JvmField on properties for a generic/abstract class", "body": "<p>At the moment I have an <a href=\"https://github.com/elect86/glm/blob/master/src/main/kotlin/vec/Vec2t.kt#L15-L18\" rel=\"nofollow noreferrer\">abstract class</a>:</p>\n\n<pre><code>abstract class Vec2t&lt;T : Number&gt; {    \n\n    abstract var x: T    \n    abstract var y: T\n    ...\n}\n</code></pre>\n\n<p>and many implementing ones, such as <a href=\"https://github.com/elect86/glm/blob/master/src/main/kotlin/vec/_2/Vec2.kt#L17\" rel=\"nofollow noreferrer\">this one</a>:</p>\n\n<pre><code>data class Vec2(override var x: Float, override var y: Float) : Vec2t&lt;Float&gt;()\n</code></pre>\n\n<p>Now, my wish was to have the same access behaviour as Kotlin in Java, that is:</p>\n\n<pre><code>val f = v.x\n</code></pre>\n\n<p>or </p>\n\n<pre><code>v.x = f\n</code></pre>\n\n<p>but of course from Java the default was:</p>\n\n<pre><code>float f = v.getX();\n</code></pre>\n\n<p>or </p>\n\n<pre><code>v.setX(f);\n</code></pre>\n\n<p>I reduced somehow the \"pressure\" by writing specific <a href=\"https://github.com/elect86/glm/blob/master/src/main/kotlin/vec/Vec2t.kt#L20-L25\" rel=\"nofollow noreferrer\">access funtions</a>:</p>\n\n<pre><code>fun x(x: T) {\n    this.x = x\n}\nfun y(y: T) {\n    this.y = y\n}\n</code></pre>\n\n<p>so that I can \"only\":</p>\n\n<pre><code>float f = v.x();\n</code></pre>\n\n<p>or </p>\n\n<pre><code>v.x(f);\n</code></pre>\n\n<p>But still, I'd really love if I could have those as in Kotlin:</p>\n\n<pre><code>float f = v.x;\n</code></pre>\n\n<p>or </p>\n\n<pre><code>v.x = f;\n</code></pre>\n\n<p>The problem is that <code>@JvmField</code> is not allowed on <code>abstract</code> properties, but if I switch <code>Vec2t</code> to:</p>\n\n<pre><code>open class Vec2t&lt;T : Number&gt; {\n\n    @JvmFiled open var x: T // error\n</code></pre>\n\n<blockquote>\n  <p>property must be initialized or abstract</p>\n</blockquote>\n\n<pre><code>    @JvmField open var x by Delegates.notNull&lt;T&gt;()\n</code></pre>\n\n<p>is not valid neither:</p>\n\n<blockquote>\n  <p>@JvmField cannot be applied to delegate properties</p>\n</blockquote>\n\n<p>if I tried to initialize it:</p>\n\n<pre><code>    @JvmField open var x = 0 as T\n</code></pre>\n\n<blockquote>\n  <p>@JvmField can only be applied to final properties</p>\n</blockquote>\n\n<p>Is there a chance for me that I am unaware of?</p>\n"}, {"tags": ["operators", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 4, "creation_date": 1488885441, "post_id": 42646234, "comment_id": 72420064, "body": "Probably adding the <a href=\"https://kotlinlang.org/docs/reference/lambdas.html#function-types\" rel=\"nofollow noreferrer\">function types</a> example and the link to the reference might improve this answer."}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 2, "creation_date": 1488894741, "post_id": 42646234, "comment_id": 72426147, "body": "And now there are 3 contexts and not just 2."}, {"owner": {"reputation": 2164, "user_id": 1957951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/A6qAz.png?s=128&g=1", "display_name": "Gergely Lukacsy", "link": "https://stackoverflow.com/users/1957951/gergely-lukacsy"}, "edited": false, "score": 0, "creation_date": 1488897005, "post_id": 42646234, "comment_id": 72427705, "body": "Thanks for the help and the detailed answer, guys. I&#39;ll dig into the other two."}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 47, "last_activity_date": 1488896242, "last_edit_date": 1488896242, "creation_date": 1488883673, "answer_id": 42646234, "question_id": 42646016, "link": "https://stackoverflow.com/questions/42646016/what-does-the-arrow-operator-do-in-kotlin/42646234#42646234", "title": "What does the arrow (&quot;-&gt;&quot;) operator do in Kotlin?", "body": "<p>The <code>-&gt;</code> is part of Kotlin's syntax (similar to Java's <a href=\"https://stackoverflow.com/questions/15146052/what-does-the-arrow-operator-do-in-java\">lambda expressions syntax</a>) and can be used in 3 contexts:</p>\n\n<ul>\n<li><p><code>when</code> expressions where it separates \"matching/condition\" part from \"result/execution\" block</p>\n\n<pre><code> val greet = when(args[0]) {\n   \"Apple\", \"Orange\" -&gt; \"fruit\"\n   is Number -&gt; \"How many?\"\n   else    -&gt; \"hi!\"\n }\n</code></pre></li>\n<li><p>lambda expressions where it separates parameters from function body</p>\n\n<pre><code>  val lambda = { a:String -&gt; \"hi!\" }\n  items.filter { element -&gt; element == \"search\"  }\n</code></pre></li>\n<li><p>function types where it separates parameters types from result type e.g. <code>comparator</code></p>\n\n<pre><code>  fun &lt;T&gt; sort(comparator:(T,T) -&gt; Int){\n  }\n</code></pre></li>\n</ul>\n\n<p>Details about Kotlin grammar are <a href=\"http://kotlinlang.org/docs/reference/grammar.html\" rel=\"noreferrer\">in the documentation</a> in particular:</p>\n\n<ul>\n<li><a href=\"http://kotlinlang.org/docs/reference/grammar.html#functionType\" rel=\"noreferrer\">functionType</a></li>\n<li><a href=\"http://kotlinlang.org/docs/reference/grammar.html#functionLiteral\" rel=\"noreferrer\">functionLiteral</a></li>\n<li><a href=\"http://kotlinlang.org/docs/reference/grammar.html#whenEntry\" rel=\"noreferrer\">whenEntry</a></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 12122, "user_id": 824903, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b0903f3a872eef8fded8e48257fde823?s=128&d=identicon&r=PG", "display_name": "donturner", "link": "https://stackoverflow.com/users/824903/donturner"}, "reply_to_user": {"reputation": 227, "user_id": 9078867, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qrunB.jpg?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/9078867/will"}, "edited": false, "score": 3, "creation_date": 1559644531, "post_id": 55991807, "comment_id": 99477620, "body": "To me, the accepted answer didn&#39;t explain the fundamental concept that <code>-&gt;</code> is a separator. My answer was an attempt to address that. I also tried to provide examples which demonstrate that separation clearly."}, {"owner": {"reputation": 227, "user_id": 9078867, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qrunB.jpg?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/9078867/will"}, "edited": false, "score": 0, "creation_date": 1559752087, "post_id": 55991807, "comment_id": 99520637, "body": "Fair enough, I&#39;m new to Kotlin myself, and did not realize that."}], "tags": [], "owner": {"reputation": 12122, "user_id": 824903, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b0903f3a872eef8fded8e48257fde823?s=128&d=identicon&r=PG", "display_name": "donturner", "link": "https://stackoverflow.com/users/824903/donturner"}, "is_accepted": false, "score": 9, "last_activity_date": 1557058403, "creation_date": 1557058403, "answer_id": 55991807, "question_id": 42646016, "link": "https://stackoverflow.com/questions/42646016/what-does-the-arrow-operator-do-in-kotlin/55991807#55991807", "title": "What does the arrow (&quot;-&gt;&quot;) operator do in Kotlin?", "body": "<p>The <code>-&gt;</code> is a <strong>separator</strong>. It is special symbol used to separate code with different purposes. It can be used to: </p>\n\n<ul>\n<li><p>Separate the parameters and body of a <a href=\"https://kotlinlang.org/docs/reference/lambdas.html#lambda-expression-syntax\" rel=\"noreferrer\">lambda expression</a></p>\n\n<pre><code>val sum = { x: Int, y: Int -&gt; x + y }\n</code></pre></li>\n<li><p>Separate the parameters and return type declaration in a <a href=\"https://kotlinlang.org/docs/reference/lambdas.html#function-types\" rel=\"noreferrer\">function type</a></p>\n\n<pre><code>(R, T) -&gt; R\n</code></pre></li>\n<li><p>Separate the condition and body of a <a href=\"https://kotlinlang.org/docs/reference/control-flow.html#when-expression\" rel=\"noreferrer\">when expression</a> branch</p>\n\n<pre><code>when (x) {\n    0, 1 -&gt; print(\"x == 0 or x == 1\")\n    else -&gt; print(\"otherwise\")\n}  \n</code></pre></li>\n</ul>\n\n<p>Here it is in the <a href=\"https://kotlinlang.org/docs/reference/keyword-reference.html\" rel=\"noreferrer\">documentation</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 616, "user_id": 3297539, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KaIvt.jpg?s=128&g=1", "display_name": "smo0f", "link": "https://stackoverflow.com/users/3297539/smo0f"}, "is_accepted": false, "score": 2, "last_activity_date": 1576692229, "creation_date": 1576692229, "answer_id": 59397800, "question_id": 42646016, "link": "https://stackoverflow.com/questions/42646016/what-does-the-arrow-operator-do-in-kotlin/59397800#59397800", "title": "What does the arrow (&quot;-&gt;&quot;) operator do in Kotlin?", "body": "<p>From the <a href=\"https://kotlinlang.org/docs/reference/keyword-reference.html\" rel=\"nofollow noreferrer\">Kotlin docs</a>:</p>\n\n<blockquote>\n  <p><code>-&gt;</code></p>\n  \n  <ul>\n  <li><p>separates the parameters and body of a <a href=\"https://kotlinlang.org/docs/reference/lambdas.html#lambda-expression-syntax\" rel=\"nofollow noreferrer\">lambda expression</a></p></li>\n  <li><p>separates the parameters and return type declaration in a <a href=\"https://kotlinlang.org/docs/reference/lambdas.html#function-types\" rel=\"nofollow noreferrer\">function\n  type</a></p></li>\n  <li><p>separates the condition and body of a <a href=\"http://kotlinlang.org/docs/reference/control-flow.html#when-expression\" rel=\"nofollow noreferrer\">when expression</a> branch</p></li>\n  </ul>\n</blockquote>\n"}], "owner": {"reputation": 2164, "user_id": 1957951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/A6qAz.png?s=128&g=1", "display_name": "Gergely Lukacsy", "link": "https://stackoverflow.com/users/1957951/gergely-lukacsy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19265, "favorite_count": 10, "accepted_answer_id": 42646234, "answer_count": 3, "score": 53, "last_activity_date": 1576692229, "creation_date": 1488883102, "last_edit_date": 1488884878, "question_id": 42646016, "link": "https://stackoverflow.com/questions/42646016/what-does-the-arrow-operator-do-in-kotlin", "title": "What does the arrow (&quot;-&gt;&quot;) operator do in Kotlin?", "body": "<p>Probably a little bit broad question, but the official documentation doesn't even mentioning the arrow operator (or language construct, I don't know which phrase is more accurate) as an independent entity.</p>\n\n<p>The most obvious use is the when conditional statement, where it is used to assign an expression to a specific condition:</p>\n\n<pre><code>  val greet = when(args[0]) {\n    \"Appul\" -&gt; \"howdy!\"\n    \"Orang\" -&gt; \"wazzup?\"\n    \"Banan\" -&gt; \"bonjur!\"\n    else    -&gt; \"hi!\"\n  }\n\n  println(args[0] +\" greets you: \\\"\"+ greet +\"\\\"\")\n</code></pre>\n\n<p>What are the other uses, and what are they do?\nIs there a general meaning of the arrow operator in Kotlin?</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 3, "creation_date": 1488868527, "post_id": 42641607, "comment_id": 72410592, "body": "Kotlin is compatible with Android Studio 2.3 now. If you have Kotlin configured in your project properly, try updating your Kotlin plugin or doing an invalidate cache/restart."}, {"owner": {"reputation": 2067, "user_id": 5435658, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/92a5439c20610a55fe6fe43b2677d542?s=128&d=identicon&r=PG&f=1", "display_name": "raditya gumay", "link": "https://stackoverflow.com/users/5435658/raditya-gumay"}, "reply_to_user": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1488868893, "post_id": 42641607, "comment_id": 72410791, "body": "working like a charm!!!"}], "answers": [{"tags": [], "owner": {"reputation": 5305, "user_id": 5818889, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6b8df2f6af3fd32042982001fac8407b?s=128&d=identicon&r=PG&f=1", "display_name": "glee8e", "link": "https://stackoverflow.com/users/5818889/glee8e"}, "is_accepted": false, "score": 3, "last_activity_date": 1488951601, "creation_date": 1488951601, "answer_id": 42663785, "question_id": 42641607, "link": "https://stackoverflow.com/questions/42641607/unknown-feature-facetkotlin-language-covered-by-non-bundled-plugin-detected/42663785#42663785", "title": "Unknown feature (Facet[kotlin-language]) covered by non-bundled plugin detected", "body": "<p><em>[The text of this answer was originally written by zsmb13]</em></p>\n\n<p>Kotlin is compatible with Android Studio 2.3 now. If you have Kotlin configured in your project properly, try updating your Kotlin plugin or doing an invalidate cache/restart.</p>\n"}], "owner": {"reputation": 2067, "user_id": 5435658, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/92a5439c20610a55fe6fe43b2677d542?s=128&d=identicon&r=PG&f=1", "display_name": "raditya gumay", "link": "https://stackoverflow.com/users/5435658/raditya-gumay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1391, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1488951601, "creation_date": 1488867992, "question_id": 42641607, "link": "https://stackoverflow.com/questions/42641607/unknown-feature-facetkotlin-language-covered-by-non-bundled-plugin-detected", "title": "Unknown feature (Facet[kotlin-language]) covered by non-bundled plugin detected", "body": "<p>I just update my Android Studio to 2.3 and after it got message \"Unknown feature (Facet[kotlin-language]) covered by non-bundled plugin detected.\"</p>\n\n<p>Is this, still issus? <a href=\"https://twitter.com/kotlin/status/797111726516879360\" rel=\"nofollow noreferrer\">https://twitter.com/kotlin/status/797111726516879360</a></p>\n\n<p>Thanks</p>\n"}, {"tags": ["android", "kotlin", "android-databinding"], "answers": [{"comments": [{"owner": {"reputation": 12970, "user_id": 2741273, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71f8f37ebda905a8fffeb75e91b87a89?s=128&d=identicon&r=PG&f=1", "display_name": "Francesc", "link": "https://stackoverflow.com/users/2741273/francesc"}, "edited": false, "score": 4, "creation_date": 1488903706, "post_id": 42639099, "comment_id": 72432483, "body": "Thanks. The syntax is actually slightly different, @BindingAdapter(value= *arrayOf(&quot;arg1&quot;, &quot;arg2&quot;), requireAll = false)"}, {"owner": {"reputation": 51, "user_id": 11535782, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kkmFvjccu3E/AAAAAAAAAAI/AAAAAAAAAGs/nBWExp55heg/photo.jpg?sz=128", "display_name": "the korovay", "link": "https://stackoverflow.com/users/11535782/the-korovay"}, "edited": false, "score": 0, "creation_date": 1617893267, "post_id": 42639099, "comment_id": 118441770, "body": "Please note that <code>requireAll</code> argument must be set explicitly, that was the problem in my case"}], "tags": [], "owner": {"reputation": 45871, "user_id": 2788, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/28acae7d7979a1cd603921a198532e7d?s=128&d=identicon&r=PG", "display_name": "Strelok", "link": "https://stackoverflow.com/users/2788/strelok"}, "is_accepted": true, "score": 17, "last_activity_date": 1505309230, "last_edit_date": 1505309230, "creation_date": 1488853773, "answer_id": 42639099, "question_id": 42637100, "link": "https://stackoverflow.com/questions/42637100/binding-adapter-with-multiple-arguments-in-kotlin/42639099#42639099", "title": "Binding adapter with multiple arguments in Kotlin", "body": "<p>Should be:</p>\n\n<pre><code>@BindingAdapter(value=*arrayOf(\"arg1\", \"arg2\"), requireAll = false)\n</code></pre>\n\n<p>Please refer to the official annotations <a href=\"https://kotlinlang.org/docs/reference/annotations.html#java-annotations\" rel=\"noreferrer\">docs for Java Annotations in Kotlin</a></p>\n\n<p>Quoting:</p>\n\n<blockquote>\n  <p>For other arguments that have an array type, you need to use arrayOf explicitly:</p>\n</blockquote>\n\n<pre><code>// Java\npublic @interface AnnWithArrayMethod {\n    String[] names();\n}\n\n\n// Kotlin\n@AnnWithArrayMethod(names = arrayOf(\"abc\", \"foo\", \"bar\")) class C\n</code></pre>\n\n<p><strong>EDIT:</strong> Credit to @Francesc</p>\n"}, {"tags": [], "owner": {"reputation": 121, "user_id": 4388880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c62d3ab5d4fcab43552a20ad588a286?s=128&d=identicon&r=PG&f=1", "display_name": "jeytoe", "link": "https://stackoverflow.com/users/4388880/jeytoe"}, "is_accepted": false, "score": 7, "last_activity_date": 1504802238, "creation_date": 1504802238, "answer_id": 46101363, "question_id": 42637100, "link": "https://stackoverflow.com/questions/42637100/binding-adapter-with-multiple-arguments-in-kotlin/46101363#46101363", "title": "Binding adapter with multiple arguments in Kotlin", "body": "<p>Or you can just simply do this</p>\n\n<pre><code>@BindingAdapter(\"arg1\", \"agr2\", \"agr3\", \"agr4\", requireAll = false)\n</code></pre>\n\n<p>as pointed in  <a href=\"https://developer.android.com/topic/libraries/data-binding/index.html#custom_setters\" rel=\"noreferrer\">Android Official Docs</a></p>\n"}, {"comments": [{"owner": {"reputation": 27492, "user_id": 3773011, "user_type": "moderator", "profile_image": "https://i.stack.imgur.com/Hmfxy.jpg?s=128&g=1", "display_name": "Makyen", "link": "https://stackoverflow.com/users/3773011/makyen"}, "edited": false, "score": 3, "creation_date": 1513303860, "post_id": 47824353, "comment_id": 82612216, "body": "While this code may solve the question, <a href=\"//meta.stackexchange.com/questions/114762/explaining-entirely-code-based-answers\">including an explanation</a> of how and why this solves the problem would really help to improve the quality of your post, and probably result in more up-votes. Remember that you are answering the question for readers in the future, not just the person asking now. Please edit your answer to add explanation, and give an indication of what limitations and assumptions apply."}], "tags": [], "owner": {"reputation": 8052, "user_id": 2959120, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/hYi2J.jpg?s=128&g=1", "display_name": "Mladen Rakonjac", "link": "https://stackoverflow.com/users/2959120/mladen-rakonjac"}, "is_accepted": false, "score": 1, "last_activity_date": 1513325727, "last_edit_date": 1513325727, "creation_date": 1513299509, "answer_id": 47824353, "question_id": 42637100, "link": "https://stackoverflow.com/questions/42637100/binding-adapter-with-multiple-arguments-in-kotlin/47824353#47824353", "title": "Binding adapter with multiple arguments in Kotlin", "body": "<p>You can also do it by this way:</p>\n\n<pre><code>@BindingAdapter(value= [\"deckBackgroundAsFirstParameter\", \"typeAsSecondParameter\"], requireAll = false) \nfun loadBackgroundMethodNameForExample(imageViewForExample: ImageView, deckBackgroundAsFirstParameter: Int?, typeAsSecondParameter: Int?) {\n   ...\n}\n</code></pre>\n\n<p>where <strong>value</strong> is an array of the parameters that you want to use. </p>\n"}, {"comments": [{"owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "edited": false, "score": 0, "creation_date": 1513877390, "post_id": 47929751, "comment_id": 82828448, "body": "can you specifiy a source?"}], "tags": [], "owner": {"reputation": 1539, "user_id": 3033153, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sGIrc.jpg?s=128&g=1", "display_name": "Jose Alc&#233;rreca", "link": "https://stackoverflow.com/users/3033153/jose-alc%c3%a9rreca"}, "is_accepted": false, "score": 4, "last_activity_date": 1513876409, "creation_date": 1513876409, "answer_id": 47929751, "question_id": 42637100, "link": "https://stackoverflow.com/questions/42637100/binding-adapter-with-multiple-arguments-in-kotlin/47929751#47929751", "title": "Binding adapter with multiple arguments in Kotlin", "body": "<p>From Kotlin 1.2 you can do</p>\n\n<pre><code>@BindingAdapter(value = [\"arg1\", \"arg2\"], requireAll = false)\n</code></pre>\n"}], "owner": {"reputation": 12970, "user_id": 2741273, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71f8f37ebda905a8fffeb75e91b87a89?s=128&d=identicon&r=PG&f=1", "display_name": "Francesc", "link": "https://stackoverflow.com/users/2741273/francesc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7007, "favorite_count": 1, "accepted_answer_id": 42639099, "answer_count": 4, "score": 11, "last_activity_date": 1513876409, "creation_date": 1488840780, "question_id": 42637100, "link": "https://stackoverflow.com/questions/42637100/binding-adapter-with-multiple-arguments-in-kotlin", "title": "Binding adapter with multiple arguments in Kotlin", "body": "<p>To use multiple arguments for a data binding adapter the Java syntax is</p>\n\n<pre><code>@BindingAdapter(value={\"arg1\", \"arg2\"}, requireAll = false)\n</code></pre>\n\n<p>However this does not compile in Kotlin:</p>\n\n<pre><code>Error:(13, 37) Unexpected tokens (use ';' to separate expressions on the same line)\n</code></pre>\n\n<p>what's the correct syntax for multiple arguments in Kotlin?</p>\n"}, {"tags": ["rx-java", "kotlin"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 1, "creation_date": 1488836273, "post_id": 42635968, "comment_id": 72399659, "body": "When asking about an error, post the error."}, {"owner": {"reputation": 9475, "user_id": 1373258, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057cb1f71b78244924b7854605d79a9d?s=128&d=identicon&r=PG&f=1", "display_name": "tmn", "link": "https://stackoverflow.com/users/1373258/tmn"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1488856727, "post_id": 42635968, "comment_id": 72406516, "body": "I was going to do that but forgot, will update later for reference to others."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1488876512, "post_id": 42635968, "comment_id": 72414579, "body": "What&#39;s the error??"}, {"owner": {"reputation": 9475, "user_id": 1373258, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057cb1f71b78244924b7854605d79a9d?s=128&d=identicon&r=PG&f=1", "display_name": "tmn", "link": "https://stackoverflow.com/users/1373258/tmn"}, "edited": false, "score": 0, "creation_date": 1488915435, "post_id": 42635968, "comment_id": 72439464, "body": "Added screen clip above with error popup."}], "answers": [{"comments": [{"owner": {"reputation": 9475, "user_id": 1373258, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057cb1f71b78244924b7854605d79a9d?s=128&d=identicon&r=PG&f=1", "display_name": "tmn", "link": "https://stackoverflow.com/users/1373258/tmn"}, "edited": false, "score": 0, "creation_date": 1488856804, "post_id": 42636503, "comment_id": 72406539, "body": "Ew... Okay I&#39;ll run this tomorrow and follow up if it works. If this can&#39;t be inferred that is unfortunate."}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "reply_to_user": {"reputation": 9475, "user_id": 1373258, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057cb1f71b78244924b7854605d79a9d?s=128&d=identicon&r=PG&f=1", "display_name": "tmn", "link": "https://stackoverflow.com/users/1373258/tmn"}, "edited": false, "score": 0, "creation_date": 1489173605, "post_id": 42636503, "comment_id": 72571848, "body": "Hey, I&#39;ve just updated my answer with a better solution."}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": false, "score": 10, "last_activity_date": 1489175694, "last_edit_date": 1489175694, "creation_date": 1488837971, "answer_id": 42636503, "question_id": 42635968, "link": "https://stackoverflow.com/questions/42635968/kotlin-and-rxjava-why-is-my-single-zip-not-compiling/42636503#42636503", "title": "Kotlin and RxJava - Why is my Single.zip() not compiling?", "body": "<p>Type inference is failing for some reason, there must be somehow multiple combinations of types that could be inferred in this context.</p>\n\n<p>You can specify the types explicitly with a more traditional (and unfortunately more verbose) syntax, like this:</p>\n\n<pre><code>fun Observable&lt;BigDecimal&gt;.average() = publish().autoConnect(2).let {\n    Single.zip(it.sum().toSingle(), it.count(), BiFunction&lt;BigDecimal, Long, BigDecimal&gt; {\n        sum, count -&gt;\n        sum / BigDecimal.valueOf(count)\n    })\n}\n</code></pre>\n\n<p><strong>Update:</strong> </p>\n\n<p>I've just found out while working on a similar problem that the actual problem here is that Kotlin isn't able to infer which <code>Single.zip</code> overload you're trying to call. From the <a href=\"https://kotlinlang.org/docs/reference/java-interop.html#sam-conversions\" rel=\"noreferrer\">official documentation</a>:</p>\n\n<blockquote>\n  <p>If the Java class has multiple methods taking functional interfaces,\n  you can choose the one you need to call by using an adapter function\n  that converts a lambda to a specific SAM type. Those adapter functions\n  are also generated by the compiler when needed.</p>\n</blockquote>\n\n<p>So it turns out that using the more explicit SAM constructor solves this in itself, and gives you type inference back (basically, my previous answer was using a longer syntax than was actually required):</p>\n\n<pre><code>fun Observable&lt;BigDecimal&gt;.average(): Single&lt;BigDecimal&gt; = publish().autoConnect(2).let {\n    Single.zip(it.sum().toSingle(), it.count(), BiFunction {\n        sum, count -&gt;\n        sum / BigDecimal.valueOf(count)\n    })\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9475, "user_id": 1373258, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057cb1f71b78244924b7854605d79a9d?s=128&d=identicon&r=PG&f=1", "display_name": "tmn", "link": "https://stackoverflow.com/users/1373258/tmn"}, "edited": false, "score": 1, "creation_date": 1488915799, "post_id": 42643182, "comment_id": 72439696, "body": "Thanks, giving answer to Stepan since it maximizes inference."}, {"owner": {"reputation": 2473, "user_id": 6056359, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/ca9fU.jpg?s=128&g=1", "display_name": "Isaac Obella", "link": "https://stackoverflow.com/users/6056359/isaac-obella"}, "edited": false, "score": 1, "creation_date": 1516854610, "post_id": 42643182, "comment_id": 83862699, "body": "What if i have three or more Singles in the zip, BiFunction doesn&#39;t seem to work since it takes only two"}, {"owner": {"reputation": 4405, "user_id": 631814, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4c8f02294f1d1e1c578542deff566367?s=128&d=identicon&r=PG", "display_name": "Stepango", "link": "https://stackoverflow.com/users/631814/stepango"}, "reply_to_user": {"reputation": 2473, "user_id": 6056359, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/ca9fU.jpg?s=128&g=1", "display_name": "Isaac Obella", "link": "https://stackoverflow.com/users/6056359/isaac-obella"}, "edited": false, "score": 2, "creation_date": 1516897069, "post_id": 42643182, "comment_id": 83887166, "body": "@IzzoObella, in this case, you&#39;ll need to use Function3 instead of BiFunction"}, {"owner": {"reputation": 2473, "user_id": 6056359, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/ca9fU.jpg?s=128&g=1", "display_name": "Isaac Obella", "link": "https://stackoverflow.com/users/6056359/isaac-obella"}, "edited": false, "score": 1, "creation_date": 1516897167, "post_id": 42643182, "comment_id": 83887246, "body": "Its okay, i got a solution by using RxKotlin which has an extension function for that"}, {"owner": {"reputation": 711, "user_id": 1232726, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/Bg5nq.jpg?s=128&g=1", "display_name": "filthy_wizard", "link": "https://stackoverflow.com/users/1232726/filthy-wizard"}, "edited": false, "score": 0, "creation_date": 1526407335, "post_id": 42643182, "comment_id": 87729553, "body": "nice. much cleaner looking that writing out the whole BiFunction declaration including generics like this. BiFunction&lt;CurrencyData,CryptoCurrency, Pair&lt;CurrencyData,CryptoCurrency&gt;&gt;{ a, b -&gt; Pair(a,b)})"}], "tags": [], "owner": {"reputation": 4405, "user_id": 631814, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4c8f02294f1d1e1c578542deff566367?s=128&d=identicon&r=PG", "display_name": "Stepango", "link": "https://stackoverflow.com/users/631814/stepango"}, "is_accepted": true, "score": 45, "last_activity_date": 1488874057, "creation_date": 1488874057, "answer_id": 42643182, "question_id": 42635968, "link": "https://stackoverflow.com/questions/42635968/kotlin-and-rxjava-why-is-my-single-zip-not-compiling/42643182#42643182", "title": "Kotlin and RxJava - Why is my Single.zip() not compiling?", "body": "<p>Type inference mostly does not work for rxJava2. It's not a type inference problem actually. Kotlin usually generates extension methods to that replaces SAM with kotlin functional types, but this technic does not work for overridden methods for some reason.</p>\n\n<p>More details here <a href=\"https://youtrack.jetbrains.com/issue/KT-13609\" rel=\"noreferrer\">https://youtrack.jetbrains.com/issue/KT-13609</a></p>\n\n<p>As an option, you could try to specify types for lambda arguments</p>\n\n<pre><code>fun Observable&lt;BigDecimal&gt;.average() = publish().autoConnect(2).let {\n    Single.zip(it.sum().toSingle(), it.count(), BiFunction {\n        sum: BigDecimal, count: Long -&gt;\n        sum / BigDecimal.valueOf(count)\n    })\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7328, "user_id": 1101730, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/0ZiMa.jpg?s=128&g=1", "display_name": "Micer", "link": "https://stackoverflow.com/users/1101730/micer"}, "edited": false, "score": 0, "creation_date": 1569497845, "post_id": 55784092, "comment_id": 102621007, "body": "Is it possible to use <code>Singles.zip(..., ...)</code> when I don&#39;t know the number of Singles (having them in a List)?"}, {"owner": {"reputation": 1252, "user_id": 1572848, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3e6ec603f9ab7b02948a22118f2c656c?s=128&d=identicon&r=PG", "display_name": "William Reed", "link": "https://stackoverflow.com/users/1572848/william-reed"}, "reply_to_user": {"reputation": 7328, "user_id": 1101730, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/0ZiMa.jpg?s=128&g=1", "display_name": "Micer", "link": "https://stackoverflow.com/users/1101730/micer"}, "edited": false, "score": 0, "creation_date": 1569551300, "post_id": 55784092, "comment_id": 102641647, "body": "@Micer i think i am going to need some more context, it sounds like it would warrant its own question"}, {"owner": {"reputation": 7328, "user_id": 1101730, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/0ZiMa.jpg?s=128&g=1", "display_name": "Micer", "link": "https://stackoverflow.com/users/1101730/micer"}, "edited": false, "score": 0, "creation_date": 1569593279, "post_id": 55784092, "comment_id": 102658982, "body": "I have N urls, I need to make N network calls and merge the result. I&#39;ve created Singles and put them in the list. I couldn&#39;t use <code>Singles.zip(..., ...)</code>, because it accepts exact number of Single objects. I finally solved it by using <code>&lt;T, R&gt; Single&lt;R&gt; zip(final Iterable&lt;? extends SingleSource&lt;? extends T&gt;&gt; sources, Function&lt;? super Object[], ? extends R&gt; zipper)</code> from RxJava2 library. Thanks anyway. ;-)"}], "tags": [], "owner": {"reputation": 1252, "user_id": 1572848, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3e6ec603f9ab7b02948a22118f2c656c?s=128&d=identicon&r=PG", "display_name": "William Reed", "link": "https://stackoverflow.com/users/1572848/william-reed"}, "is_accepted": false, "score": 4, "last_activity_date": 1555860581, "creation_date": 1555860581, "answer_id": 55784092, "question_id": 42635968, "link": "https://stackoverflow.com/questions/42635968/kotlin-and-rxjava-why-is-my-single-zip-not-compiling/55784092#55784092", "title": "Kotlin and RxJava - Why is my Single.zip() not compiling?", "body": "<p>If type inferencing is the problem, one thing you can do is use <a href=\"https://github.com/ReactiveX/RxKotlin\" rel=\"nofollow noreferrer\">RxKotlin</a></p>\n\n<pre><code>implementation \"io.reactivex.rxjava2:rxkotlin:$rxKotlinVersion\"\n</code></pre>\n\n<p>RxKotlin specifically provides <a href=\"https://github.com/ReactiveX/RxKotlin#sam-helpers\" rel=\"nofollow noreferrer\">SAM helpers</a> to help mitigate the issues with type inferencing issues. </p>\n\n<p>In which case,</p>\n\n<pre><code>Singles.zip(..., ...)\n</code></pre>\n\n<p>would be able to work just fine without any ambiguity. Notice I am using <code>Singles</code> and not <code>Single</code></p>\n"}], "owner": {"reputation": 9475, "user_id": 1373258, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057cb1f71b78244924b7854605d79a9d?s=128&d=identicon&r=PG&f=1", "display_name": "tmn", "link": "https://stackoverflow.com/users/1373258/tmn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18834, "favorite_count": 4, "accepted_answer_id": 42643182, "answer_count": 3, "score": 28, "last_activity_date": 1555860581, "creation_date": 1488835991, "last_edit_date": 1488915419, "question_id": 42635968, "link": "https://stackoverflow.com/questions/42635968/kotlin-and-rxjava-why-is-my-single-zip-not-compiling", "title": "Kotlin and RxJava - Why is my Single.zip() not compiling?", "body": "<p>I'm going a little crazy here. I'm trying to create an <code>Observable&lt;BigDecimal&gt;</code> extension function (against RxJava 2.x) to emit the average of the emissions, but I'm getting a compile error with the <code>Single.zip()</code> function. Does anybody have any ideas what I'm doing wrong? I tried to be explicit with all my types too and that didn't work...</p>\n\n<pre><code>import io.reactivex.Observable\nimport io.reactivex.Single\nimport java.math.BigDecimal\n\n\nfun Observable&lt;BigDecimal&gt;.sum() = reduce { total, next -&gt; total + next }\n\n//compile error\nfun Observable&lt;BigDecimal&gt;.average() = publish().autoConnect(2).let {\n    Single.zip(it.sum().toSingle(), it.count()) {\n        sum, count -&gt; sum / BigDecimal.valueOf(count)\n    }\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/NxDZZ.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/NxDZZ.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 12820, "user_id": 1031556, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b46c5b92c22c681b79a1e91825ee757b?s=128&d=identicon&r=PG", "display_name": "Stephan", "link": "https://stackoverflow.com/users/1031556/stephan"}, "edited": false, "score": 0, "creation_date": 1488881601, "post_id": 42635617, "comment_id": 72417571, "body": "can you post your <code>productFlavors</code> definition as well as your project structure and the code where the error occurs. Also the gradle tasks for which you get the error can be helpful."}, {"owner": {"reputation": 2354, "user_id": 1081896, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/73fd9757bddc793c9d95228c62b50aaa?s=128&d=identicon&r=PG", "display_name": "Gorets", "link": "https://stackoverflow.com/users/1081896/gorets"}, "reply_to_user": {"reputation": 12820, "user_id": 1031556, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b46c5b92c22c681b79a1e91825ee757b?s=128&d=identicon&r=PG", "display_name": "Stephan", "link": "https://stackoverflow.com/users/1031556/stephan"}, "edited": false, "score": 0, "creation_date": 1488969540, "post_id": 42635617, "comment_id": 72462675, "body": "there is simple standard structure ( flavors with no extra config )"}], "answers": [{"tags": [], "owner": {"reputation": 1184, "user_id": 6275756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c4a6d2e911e7a47db549e946fef4dc1?s=128&d=identicon&r=PG&f=1", "display_name": "Vyacheslav Gerasimov", "link": "https://stackoverflow.com/users/6275756/vyacheslav-gerasimov"}, "is_accepted": false, "score": 1, "last_activity_date": 1488986188, "creation_date": 1488986188, "answer_id": 42675080, "question_id": 42635617, "link": "https://stackoverflow.com/questions/42635617/kotlin-config-for-few-flavors/42675080#42675080", "title": "Kotlin config for few flavors", "body": "<p>I suggest using the latest Kotlin version which is <code>1.1.0</code>. Tested this case and it worked for me. Here is a sample project, hope it helps. <a href=\"https://github.com/4u7/android-flavor-demo\" rel=\"nofollow noreferrer\">https://github.com/4u7/android-flavor-demo</a></p>\n\n<p>And check your directory structure. For my Env files I used:</p>\n\n<p><code>/src/prod/java/com/myapp/flavor/EnvKotlin.kt</code>\n<code>/src/stage/java/com/myapp/flavor/EnvKotlin.kt</code> </p>\n"}], "owner": {"reputation": 2354, "user_id": 1081896, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/73fd9757bddc793c9d95228c62b50aaa?s=128&d=identicon&r=PG", "display_name": "Gorets", "link": "https://stackoverflow.com/users/1081896/gorets"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 613, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1488986188, "creation_date": 1488834630, "question_id": 42635617, "link": "https://stackoverflow.com/questions/42635617/kotlin-config-for-few-flavors", "title": "Kotlin config for few flavors", "body": "<p>I got the problem with configuration of my project for few flavors. I have 2 env-s, for staging and production one. Its config set into <code>flavor-stage/Env.java</code> and <code>flavor-prod/Env.java</code> and it works as expected when you work with java code and visible from Kotlin classes too, but it crashes during compiling with</p>\n\n<pre><code>Error:(19, 23) Unresolved reference: Env\n</code></pre>\n\n<p>It seems Kotlin can resolve classes from another flavor' folder. Please help to config it. My gradle.build is:</p>\n\n<pre><code>sourceSets {\n    main.java.srcDirs += 'src/main/kotlin'\n}\n\nbuildscript {\n    ext.kotlin_version = '1.0.4'\n    repositories {\n        jcenter()\n    }\n    dependencies {\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:1.0.6\"\n        classpath \"org.jetbrains.kotlin:kotlin-android-extensions:$kotlin_version\"\n    }\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 504, "user_id": 5805371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0HotJ.jpg?s=128&g=1", "display_name": "Yuri Popiv", "link": "https://stackoverflow.com/users/5805371/yuri-popiv"}, "edited": false, "score": 0, "creation_date": 1488822827, "post_id": 42632282, "comment_id": 72392490, "body": "it&#39;s like check contains val month string FEB for example?"}, {"owner": {"reputation": 504, "user_id": 5805371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0HotJ.jpg?s=128&g=1", "display_name": "Yuri Popiv", "link": "https://stackoverflow.com/users/5805371/yuri-popiv"}, "edited": false, "score": 0, "creation_date": 1488822955, "post_id": 42632282, "comment_id": 72392565, "body": "but why val month in that format &quot;(JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC)&quot;?"}, {"owner": {"reputation": 504, "user_id": 5805371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0HotJ.jpg?s=128&g=1", "display_name": "Yuri Popiv", "link": "https://stackoverflow.com/users/5805371/yuri-popiv"}, "edited": false, "score": 0, "creation_date": 1488822999, "post_id": 42632282, "comment_id": 72392589, "body": "it also may be (JAN,FEB,MAR)?"}, {"owner": {"reputation": 25103, "user_id": 3199595, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/TwK8q.png?s=128&g=1", "display_name": "Malt", "link": "https://stackoverflow.com/users/3199595/malt"}, "reply_to_user": {"reputation": 504, "user_id": 5805371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0HotJ.jpg?s=128&g=1", "display_name": "Yuri Popiv", "link": "https://stackoverflow.com/users/5805371/yuri-popiv"}, "edited": false, "score": 0, "creation_date": 1488823211, "post_id": 42632282, "comment_id": 72392693, "body": "To match <code>JAN</code> <b>or</b> <code>FEB</code> <b>or</b> <code>MAR</code> the pattern needs to be <code>(JAN|FEB|MAR)</code>. You might want to try reading about <code>or (|)</code> in regular expressions: <a href=\"http://www.regular-expressions.info/alternation.html\" rel=\"nofollow noreferrer\">regular-expressions.info/alternation.html</a>"}, {"owner": {"reputation": 25103, "user_id": 3199595, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/TwK8q.png?s=128&g=1", "display_name": "Malt", "link": "https://stackoverflow.com/users/3199595/malt"}, "reply_to_user": {"reputation": 504, "user_id": 5805371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0HotJ.jpg?s=128&g=1", "display_name": "Yuri Popiv", "link": "https://stackoverflow.com/users/5805371/yuri-popiv"}, "edited": false, "score": 0, "creation_date": 1488823345, "post_id": 42632282, "comment_id": 72392767, "body": "The pattern <code>a(b|c)d</code> matches <code>abd</code> and <code>acd</code>. It doesn&#39;t match the string <code>abcd</code>"}, {"owner": {"reputation": 504, "user_id": 5805371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0HotJ.jpg?s=128&g=1", "display_name": "Yuri Popiv", "link": "https://stackoverflow.com/users/5805371/yuri-popiv"}, "edited": false, "score": 0, "creation_date": 1488823473, "post_id": 42632282, "comment_id": 72392824, "body": "I get it! Thank you!)"}], "tags": [], "owner": {"reputation": 25103, "user_id": 3199595, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/TwK8q.png?s=128&g=1", "display_name": "Malt", "link": "https://stackoverflow.com/users/3199595/malt"}, "is_accepted": true, "score": 13, "last_activity_date": 1488822490, "creation_date": 1488822490, "answer_id": 42632282, "question_id": 42632115, "link": "https://stackoverflow.com/questions/42632115/regex-pattern-kotlin/42632282#42632282", "title": "Regex pattern Kotlin", "body": "<p><code>${month}</code> is equal to <code>(JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC)</code></p>\n\n<p>So the String <code>\"\"\"\\d{2} ${month} \\d{4}\"\"\"</code> is actually expanded to</p>\n\n<p><code>\"\"\"\\d{2} (JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC) \\d{4}\"\"\"</code></p>\n\n<p>This a regex that captures a pair of numbers, followed by a space, then one of the values <code>JAN, FEB... DEC</code>, followed by another space and four more digits.\nSo Strings like <code>04 APR 1234</code> match the regex.</p>\n"}, {"tags": [], "owner": {"reputation": 251, "user_id": 7963160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e36581aefb22758a3638322e38e60dd2?s=128&d=identicon&r=PG&f=1", "display_name": "L.Petrosyan", "link": "https://stackoverflow.com/users/7963160/l-petrosyan"}, "is_accepted": false, "score": 1, "last_activity_date": 1595092984, "creation_date": 1595092984, "answer_id": 62971543, "question_id": 42632115, "link": "https://stackoverflow.com/questions/42632115/regex-pattern-kotlin/62971543#62971543", "title": "Regex pattern Kotlin", "body": "<p>Some addition to answer above!</p>\n<pre><code> val month = &quot;(JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC)&quot;\n\n    fun getPattern() = &quot;&quot;&quot;\\d{2}\\ ${month}\\ \\d{4}&quot;&quot;&quot;\n\n    fun main(args: Array&lt;String&gt;) {\n\n    println(&quot;11 FEB 1954&quot;.matches(getPattern().toRegex()))}\n</code></pre>\n"}], "owner": {"reputation": 504, "user_id": 5805371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0HotJ.jpg?s=128&g=1", "display_name": "Yuri Popiv", "link": "https://stackoverflow.com/users/5805371/yuri-popiv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6346, "favorite_count": 0, "accepted_answer_id": 42632282, "answer_count": 2, "score": 7, "last_activity_date": 1595092984, "creation_date": 1488821964, "last_edit_date": 1488822361, "question_id": 42632115, "link": "https://stackoverflow.com/questions/42632115/regex-pattern-kotlin", "title": "Regex pattern Kotlin", "body": "<p>Task in kotlinlang:\nUsing month variable rewrite this pattern in such a way that it matches the date in format 13 JUN 1992 (two digits, a whitespace, a month abbreviation, a whitespace, four digits).</p>\n\n<p>Answer is: \n<code>val month = \"(JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC)\"\nfun getPattern(): String = \"\"\"\\d{2} ${month} \\d{4}\"\"\"</code>\nI can't understand <code>${month}</code>. How it works?</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 1610059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3e78c13a064187bed0f6f71995f9fed?s=128&d=identicon&r=PG", "display_name": "Pepa Novotn&#253;", "link": "https://stackoverflow.com/users/1610059/pepa-novotn%c3%bd"}, "edited": false, "score": 1, "creation_date": 1514885532, "post_id": 42629954, "comment_id": 83089206, "body": "Just a note:  <code>run(UI) { ... }</code> is now deprecated and  <code>withContext(UI) {...}</code> should be used instead."}, {"owner": {"reputation": 3103, "user_id": 3887813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6a5d60d4ba9be9d67243bef5ca7f0141?s=128&d=identicon&r=PG&f=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/3887813/robin"}, "reply_to_user": {"reputation": 117, "user_id": 1610059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3e78c13a064187bed0f6f71995f9fed?s=128&d=identicon&r=PG", "display_name": "Pepa Novotn&#253;", "link": "https://stackoverflow.com/users/1610059/pepa-novotn%c3%bd"}, "edited": false, "score": 0, "creation_date": 1514892755, "post_id": 42629954, "comment_id": 83092708, "body": "@PepaNovotn&#253; Good catch! Which version of anko did this happen in?"}, {"owner": {"reputation": 117, "user_id": 1610059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3e78c13a064187bed0f6f71995f9fed?s=128&d=identicon&r=PG", "display_name": "Pepa Novotn&#253;", "link": "https://stackoverflow.com/users/1610059/pepa-novotn%c3%bd"}, "edited": false, "score": 1, "creation_date": 1514905531, "post_id": 42629954, "comment_id": 83099247, "body": "It was deprecated in 0.20 as requested in <a href=\"https://github.com/Kotlin/kotlinx.coroutines/issues/134\" rel=\"nofollow noreferrer\">github.com/Kotlin/kotlinx.coroutines/issues/134</a>"}, {"owner": {"reputation": 3103, "user_id": 3887813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6a5d60d4ba9be9d67243bef5ca7f0141?s=128&d=identicon&r=PG&f=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/3887813/robin"}, "reply_to_user": {"reputation": 117, "user_id": 1610059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3e78c13a064187bed0f6f71995f9fed?s=128&d=identicon&r=PG", "display_name": "Pepa Novotn&#253;", "link": "https://stackoverflow.com/users/1610059/pepa-novotn%c3%bd"}, "edited": false, "score": 1, "creation_date": 1514906057, "post_id": 42629954, "comment_id": 83099524, "body": "@PepaNovotn&#253; Great, thanks for the info! I&#39;ve updated the answer accordingly."}], "tags": [], "owner": {"reputation": 3103, "user_id": 3887813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6a5d60d4ba9be9d67243bef5ca7f0141?s=128&d=identicon&r=PG&f=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/3887813/robin"}, "is_accepted": false, "score": 11, "last_activity_date": 1538046545, "last_edit_date": 1538046545, "creation_date": 1488815558, "answer_id": 42629954, "question_id": 42628583, "link": "https://stackoverflow.com/questions/42628583/how-to-replace-ankos-doasync-uithread-with-kotlin-1-1-0-kotlinx-coroutines-cor/42629954#42629954", "title": "How to replace Anko&#39;s doAsync, uiThread with kotlin 1.1.0 kotlinx-coroutines-core lib&#39;s features?", "body": "<p><strong>Update for coroutines library version 0.26:</strong></p>\n\n<p><code>UI</code> has been renamed to <code>Main</code>. Complete working example for 0.26:</p>\n\n<pre><code>async(CommonPool) {\n    ...\n    withContext(Main) {\n        ...\n    }\n}\n</code></pre>\n\n<p>You don't need to read further from here, I'm leaving it up for people interested in the evolution of this solution.</p>\n\n<hr>\n\n<p><strong>Update for coroutines library version 0.20:</strong></p>\n\n<p><code>run</code> is now deprecated, you should use <code>withContext</code> instead. Complete working example for 0.20:</p>\n\n<pre><code>async(CommonPool) {\n    ...\n    withContext(UI) {\n        ...\n    }\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Update since the coroutines library was updated to version 0.13:</strong></p>\n\n<p>You can now add a dependency on <code>compile 'org.jetbrains.kotlinx:kotlinx-coroutines-android:0.13'</code> to your gradle to import the android-specific <code>UI</code> coroutine context and use it like this:</p>\n\n<pre><code>async(CommonPool) {\n    ...\n    run(UI) {\n        ...\n    }\n}\n</code></pre>\n\n<p>No need to define your own coroutine dispatcher anymore, as was still needed at the time of the original answer below.</p>\n\n<hr>\n\n<p><strong>Original answer:</strong></p>\n\n<p>It should work like this:</p>\n\n<pre><code>async(CommonPool) {\n    ...\n    run(MainThread) {\n        ...\n    }\n}\n</code></pre>\n\n<p>The problem is that right now, there is no standard implementation of <code>MainThread</code> that takes you back to the main thread on Android (this will come in a future release though!), so you would have to do that yourself, for example like this:</p>\n\n<pre><code>val MainThread = object : Executor {\n    private val mHandler = Handler(Looper.getMainLooper())\n\n    override fun execute(command: Runnable) {\n        mHandler.post(command)\n    }\n}.toCoroutineDispatcher()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6347, "user_id": 1347507, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f2e8616bfd95c514a8c29bff67b9dc17?s=128&d=identicon&r=PG", "display_name": "mike.tihonchik", "link": "https://stackoverflow.com/users/1347507/mike-tihonchik"}, "is_accepted": false, "score": 0, "last_activity_date": 1544198926, "creation_date": 1544198926, "answer_id": 53673112, "question_id": 42628583, "link": "https://stackoverflow.com/questions/42628583/how-to-replace-ankos-doasync-uithread-with-kotlin-1-1-0-kotlinx-coroutines-cor/53673112#53673112", "title": "How to replace Anko&#39;s doAsync, uiThread with kotlin 1.1.0 kotlinx-coroutines-core lib&#39;s features?", "body": "<p>With the coroutines being out of experimental state with <code>Kotlin 1.3</code>, this is how I swapped my <code>Anko</code> code with coroutines:</p>\n\n<pre><code>GlobalScope.launch(Dispatchers.Main) {\n    for ((index, test) in tests.withIndex()) {\n        try {\n            ...\n\n            async(Dispatchers.IO) {\n                OkHttpClient().newCall(test.request).execute()\n                ...\n            }\n            ...\n        } catch (e: Exception) {\n            ...\n        }\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 505, "user_id": 2811504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47ce91794321f6ec2b9e5fd92a8d14d8?s=128&d=identicon&r=PG", "display_name": "Jo&#227;o Carlos", "link": "https://stackoverflow.com/users/2811504/jo%c3%a3o-carlos"}, "edited": false, "score": 0, "creation_date": 1555004873, "post_id": 53927774, "comment_id": 97967899, "body": "OK, that solves my problem. but can I make it shorter? I mean, create a extension function or something similar"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "reply_to_user": {"reputation": 505, "user_id": 2811504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47ce91794321f6ec2b9e5fd92a8d14d8?s=128&d=identicon&r=PG", "display_name": "Jo&#227;o Carlos", "link": "https://stackoverflow.com/users/2811504/jo%c3%a3o-carlos"}, "edited": false, "score": 0, "creation_date": 1578396465, "post_id": 53927774, "comment_id": 105417023, "body": "@JoaoCarlos of course, <code>inline fun doAsync(block: CoroutineScope.() -&gt; Unit) = GlobalScope.launch(Dispatchers.Default, block)</code>"}], "tags": [], "owner": {"reputation": 18854, "user_id": 340799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c41b5e81f3659aa61e99b5c502a6cc8b?s=128&d=identicon&r=PG", "display_name": "x1a4", "link": "https://stackoverflow.com/users/340799/x1a4"}, "is_accepted": false, "score": 7, "last_activity_date": 1545802151, "creation_date": 1545802151, "answer_id": 53927774, "question_id": 42628583, "link": "https://stackoverflow.com/questions/42628583/how-to-replace-ankos-doasync-uithread-with-kotlin-1-1-0-kotlinx-coroutines-cor/53927774#53927774", "title": "How to replace Anko&#39;s doAsync, uiThread with kotlin 1.1.0 kotlinx-coroutines-core lib&#39;s features?", "body": "<p>The exact replacement for the pseudocode in the question is</p>\n\n<pre><code>GlobalScope.launch(Dispatchers.Default) {  // replaces doAsync\n    ...\n    launch(Dispatchers.Main) { // replaces uiThread\n        ...\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 373, "user_id": 5855782, "user_type": "registered", "profile_image": "https://graph.facebook.com/838139546295527/picture?type=large", "display_name": "Jetwiz", "link": "https://stackoverflow.com/users/5855782/jetwiz"}, "is_accepted": false, "score": 1, "last_activity_date": 1578394359, "creation_date": 1578394359, "answer_id": 59626982, "question_id": 42628583, "link": "https://stackoverflow.com/questions/42628583/how-to-replace-ankos-doasync-uithread-with-kotlin-1-1-0-kotlinx-coroutines-cor/59626982#59626982", "title": "How to replace Anko&#39;s doAsync, uiThread with kotlin 1.1.0 kotlinx-coroutines-core lib&#39;s features?", "body": "<pre><code>GlobalScope.launch(Dispatchers.Default) {  // Dispatchers.Default\n    ...\n    withContext(Dispatchers.Main) { // Dispatchers.Main\n        ...\n    }\n}\n</code></pre>\n\n<p>maybe for newbie, you can not log error in this coroutine. so this is the way</p>\n\n<pre><code>fun getErrorHandler ():CoroutineExceptionHandler {\n    val handler = CoroutineExceptionHandler({ coroutineContext, throwable -&gt;\n        Log.println(Log.ERROR, TAG, Log.getStackTraceString(throwable))\n        throw throwable\n    })\n\n    return handler\n}\n\nGlobalScope.launch(Dispatchers.Default + getErrorHandler()) {  // Dispatchers.Default\n    ...\n    withContext(Dispatchers.Main) { // Dispatchers.Main\n        ...\n    }\n}\n</code></pre>\n\n<p>next time, error will show in logcat. happy coroutine ^^</p>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 13447926, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bMyzM.png?s=128&g=1", "display_name": "Sun Jiao", "link": "https://stackoverflow.com/users/13447926/sun-jiao"}, "is_accepted": false, "score": 0, "last_activity_date": 1592897230, "creation_date": 1592897230, "answer_id": 62529483, "question_id": 42628583, "link": "https://stackoverflow.com/questions/42628583/how-to-replace-ankos-doasync-uithread-with-kotlin-1-1-0-kotlinx-coroutines-cor/62529483#62529483", "title": "How to replace Anko&#39;s doAsync, uiThread with kotlin 1.1.0 kotlinx-coroutines-core lib&#39;s features?", "body": "<p>coroutines library version 1.3.7:</p>\n<pre><code>GlobalScope.async(Dispatchers.Default) {\n            // do background work\n            withContext(Main) {\n                // do ui work\n            }\n        }\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 3845357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11bd294896df007ad22af7f11a4b748d?s=128&d=identicon&r=PG&f=1", "display_name": "egordeev", "link": "https://stackoverflow.com/users/3845357/egordeev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6824, "favorite_count": 0, "answer_count": 5, "score": 9, "last_activity_date": 1592897230, "creation_date": 1488811784, "question_id": 42628583, "link": "https://stackoverflow.com/questions/42628583/how-to-replace-ankos-doasync-uithread-with-kotlin-1-1-0-kotlinx-coroutines-cor", "title": "How to replace Anko&#39;s doAsync, uiThread with kotlin 1.1.0 kotlinx-coroutines-core lib&#39;s features?", "body": "<p>i have some code like:</p>\n\n<pre><code>doAsync{\n...\nuiThread{\n...\n}\n}\n</code></pre>\n\n<p>how can i replace doAsync and uiThread with something new from kotlinx-coroutines-core lib?</p>\n"}, {"tags": ["arrays", "kotlin", "mutablemap"], "answers": [{"comments": [{"owner": {"reputation": 2164, "user_id": 1957951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/A6qAz.png?s=128&g=1", "display_name": "Gergely Lukacsy", "link": "https://stackoverflow.com/users/1957951/gergely-lukacsy"}, "edited": false, "score": 1, "creation_date": 1488808280, "post_id": 42627214, "comment_id": 72382337, "body": "<b>&quot;The += operator creates a new instance of map and mutates the variable arr3&quot;</b> Dang it, that behavior tricked me (the wrong type was my fault). Thanks for your detailed answer!"}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 29, "last_activity_date": 1488808302, "last_edit_date": 1488808302, "creation_date": 1488807842, "answer_id": 42627214, "question_id": 42627103, "link": "https://stackoverflow.com/questions/42627103/kotlin-basics-how-to-add-or-set-an-element-of-a-map/42627214#42627214", "title": "Kotlin basics: how to add or set an element of a Map?", "body": "<p>You've declared mutable <code>arr3</code> with explicit type of <code>Map&lt;Any, Any&gt;</code>. The <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-map/\" rel=\"noreferrer\"><code>Map</code></a>) interface allows no mutation. The <code>+=</code> operator creates a new instance of map and mutates the variable <code>arr3</code>. To modify contents of the map declare the <code>arr3</code> as <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-mutable-map/\" rel=\"noreferrer\"><code>MutableMap</code></a> like so:</p>\n\n<pre><code>var arr3:MutableMap&lt;Any, Any&gt; = mutableMapOf()\n</code></pre>\n\n<p>or more idiomatic</p>\n\n<pre><code>var arr = mutableMapOf&lt;Any, Any&gt;()\n</code></pre>\n\n<p>Note that typically you need either mutable variable <code>var</code> or mutable instance type <code>MutableMap</code> but from my experience rarely both. </p>\n\n<p>In other words you could use mutable variable with immutable type:</p>\n\n<pre><code>var arr = mapOf&lt;Any,Any&gt;()\n</code></pre>\n\n<p>and use <code>+=</code> operator to modify <em>where</em> <code>arr</code> points to. </p>\n\n<p>Or you could use <code>MutableMap</code> with immutable <code>arr</code> variable and modify contents of where <code>arr</code> points to:</p>\n\n<pre><code>val arr = mutableMapOf&lt;Any,Any&gt;()\n</code></pre>\n\n<p>Obviously you can only modify <code>MutableMap</code> contents. So <code>arr[\"manufacturer\"] = \"Seegson\"</code> will only work with a variable which is declared as such.</p>\n"}, {"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": false, "score": 14, "last_activity_date": 1488808538, "creation_date": 1488808538, "answer_id": 42627451, "question_id": 42627103, "link": "https://stackoverflow.com/questions/42627103/kotlin-basics-how-to-add-or-set-an-element-of-a-map/42627451#42627451", "title": "Kotlin basics: how to add or set an element of a Map?", "body": "<p>Regarding the add/set operations, these can be performed on the <code>MutableMap&lt;K, V&gt;</code> (not just <code>Map&lt;K, V&gt;</code>) and can be done in several ways:</p>\n\n<ul>\n<li><p>The Java-style <code>put</code> call:</p>\n\n<pre><code>arr3.put(\"manufacturer\", \"Seegson\")\n</code></pre>\n\n<p>This call returns the value that was previously associated with the key, or <code>null</code>.</p></li>\n<li><p>A more idiomatic Kotlin call using the <a href=\"https://kotlinlang.org/docs/reference/operator-overloading.html#binary-operations\" rel=\"noreferrer\"><code>set</code> operator</a>:</p>\n\n<pre><code>arr[\"matufacturer\"] = \"Seegson\"\n</code></pre></li>\n<li><p>The <code>plusAssign</code> operator syntax:</p>\n\n<pre><code>arr += \"manufacturer\" to \"Seegson\"\n</code></pre>\n\n<p>This option introduces overhead of a <code>Pair</code> created before the call and is less readable because it can be confused with a <code>var</code> reassignment (also, it is not applicable for <code>var</code>s because of ambiguity), but still is useful when you already have a <code>Pair</code> that you want to add.</p></li>\n</ul>\n"}], "owner": {"reputation": 2164, "user_id": 1957951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/A6qAz.png?s=128&g=1", "display_name": "Gergely Lukacsy", "link": "https://stackoverflow.com/users/1957951/gergely-lukacsy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13864, "favorite_count": 2, "accepted_answer_id": 42627214, "answer_count": 2, "score": 22, "last_activity_date": 1488808538, "creation_date": 1488807554, "question_id": 42627103, "link": "https://stackoverflow.com/questions/42627103/kotlin-basics-how-to-add-or-set-an-element-of-a-map", "title": "Kotlin basics: how to add or set an element of a Map?", "body": "<p>I'd like to add/set elements of a mutable map with specific key-value pairs.\nSo far, I figured out that I can can add new elements using the plus operator along with the Pair data type:</p>\n\n<pre><code>var arr3:Map&lt;Any, Any&gt; = mutableMapOf()\narr3 += Pair(\"manufacturer\", \"Weyland-Yutani\")\n//also, the \"to\" operator works too:\n//arr3 += (\"manufacturer\" to \"Weyland-Yutani\")\n</code></pre>\n\n<p>However, I couldn't find out how to modify or add new key-value pairs:</p>\n\n<pre><code>arr3[\"manufacturer\"] = \"Seegson\"  // gives an error( Kotlin: No set method providing array access)\narr3[\"manufacturer\"] to \"Seegson\" // compiles, but nothing is added to the array\n</code></pre>\n\n<p>Could you please elaborate me how to do that?</p>\n"}, {"tags": ["java", "spring", "hibernate", "lazy-loading", "kotlin"], "comments": [{"owner": {"reputation": 21581, "user_id": 4754790, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0hACp.jpg?s=128&g=1", "display_name": "Dragan Bozanovic", "link": "https://stackoverflow.com/users/4754790/dragan-bozanovic"}, "edited": false, "score": 0, "creation_date": 1488819101, "post_id": 42625485, "comment_id": 72390260, "body": "<a href=\"http://stackoverflow.com/a/36143746/4754790\">This answer</a> provides an overview of alternatives when it comes to lazy one-to-one associations in which foreign key is in the table mapped by the child entity."}], "answers": [{"comments": [{"owner": {"reputation": 1938, "user_id": 2572584, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/42567624047b36f1ef0922eea500c8a8?s=128&d=identicon&r=PG", "display_name": "awfun", "link": "https://stackoverflow.com/users/2572584/awfun"}, "edited": false, "score": 0, "creation_date": 1488888350, "post_id": 42626916, "comment_id": 72421917, "body": "First issue was methods were not <code>open</code> and that&#39;s why Hibernate could not create a proxy. The second issue was one-to-one mapping as you&#39;ve told. The good description why it is so is here: <a href=\"http://stackoverflow.com/questions/1444227/making-a-onetoone-relation-lazy\" title=\"making a onetoone relation lazy\">stackoverflow.com/questions/1444227/&hellip;</a>"}, {"owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 0, "creation_date": 1489016487, "post_id": 42626916, "comment_id": 72492107, "body": "Please quote the important parts of the source in your answer."}], "tags": [], "owner": {"reputation": 444, "user_id": 6587216, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9ip3S.jpg?s=128&g=1", "display_name": "Shaik Elias", "link": "https://stackoverflow.com/users/6587216/shaik-elias"}, "is_accepted": true, "score": 2, "last_activity_date": 1489040784, "last_edit_date": 1495539990, "creation_date": 1488806976, "answer_id": 42626916, "question_id": 42625485, "link": "https://stackoverflow.com/questions/42625485/hibernate-ignores-lazy-fetch-type-and-loads-properties-immediately/42626916#42626916", "title": "Hibernate ignores &#39;lazy&#39; fetch type and loads properties immediately", "body": "<p>Hibernate cannot proxy your own object.\nThere are at least three well known solutions for this problem:\nThe simplest one is to fake one-to-many relationship. This will work because lazy loading of collection is much easier then lazy loading of single nullable property but generally this solution is very inconvenient if you use complex JPQL/HQL queries.\nThe other one is to use build time bytecode instrumentation. For more details please read Hibernate documentation: 19.1.7. Using lazy property fetching. Remember that in this case you have to add @LazyToOne(LazyToOneOption.NO_PROXY) annotation to one-to-one relationship to make it lazy. Setting fetch to LAZY is not enough.\nThe last solution is to use runtime bytecode instrumentation but it will work only for those who use Hibernate as JPA provider in full-blown JEE environment (in such case setting \"hibernate.ejb.use_class_enhancer\" to true should do the trick: Entity Manager Configuration) or use Hibernate with Spring configured to do runtime weaving (this might be hard to achieve on some older application servers). In this case @LazyToOne(LazyToOneOption.NO_PROXY) annotation is also required.</p>\n\n<pre><code> @Entity\npublic class Animal implements FieldHandled {\n private Person owner;\n private FieldHandler fieldHandler;\n\n @OneToOne(fetch = FetchType.LAZY, optional = true, mappedBy = \"animal\")\n @LazyToOne(LazyToOneOption.NO_PROXY)\n public Person getOwner() {\n  if (fieldHandler != null) {\n   return (Person) fieldHandler.readObject(this, \"owner\", owner);\n  }\n  return owner;\n }\n\n public void setOwner(Person owner) {\n  if (fieldHandler != null) {\n   this.owner = fieldHandler.writeObject(this, \"owner\", this.owner, owner);\n   return;\n  }\n  this.owner = owner;\n }\n\n public FieldHandler getFieldHandler() {\n  return fieldHandler;\n }\n\n public void setFieldHandler(FieldHandler fieldHandler) {\n  this.fieldHandler = fieldHandler;\n }\n}\n</code></pre>\n\n<p>Can you try this:\n<a href=\"http://justonjava.blogspot.in/2010/09/lazy-one-to-one-and-one-to-many.html\" rel=\"nofollow noreferrer\">http://justonjava.blogspot.in/2010/09/lazy-one-to-one-and-one-to-many.html</a></p>\n\n<p>reference:\n<a href=\"https://stackoverflow.com/questions/21499580/why-lazy-loading-not-working-in-one-to-one-association\">Why Lazy loading not working in one to one association?</a></p>\n"}], "owner": {"reputation": 1938, "user_id": 2572584, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/42567624047b36f1ef0922eea500c8a8?s=128&d=identicon&r=PG", "display_name": "awfun", "link": "https://stackoverflow.com/users/2572584/awfun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2886, "favorite_count": 2, "accepted_answer_id": 42626916, "answer_count": 1, "score": 4, "last_activity_date": 1489040784, "creation_date": 1488802678, "last_edit_date": 1488805971, "question_id": 42625485, "link": "https://stackoverflow.com/questions/42625485/hibernate-ignores-lazy-fetch-type-and-loads-properties-immediately", "title": "Hibernate ignores &#39;lazy&#39; fetch type and loads properties immediately", "body": "<p>I use Hibernate 5.2.5 (also use kotlin and spring 4.3.5 if that matters) and I want some of the fields of my class to be loaded lazily. But the issue is that all fields are loaded immediately, I don't have any special Hibernate settings neither use Hibernate.initialize().</p>\n\n<pre><code>@Entity(name = \"task\")\n@Table(name = \"tasks\")\n@NamedQueries(\n        NamedQuery(name = \"task.findById\", query = \"SELECT t FROM task AS t WHERE t.id = :id\")\n)\nclass Task {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    var id: Int? = null\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = \"author_id\", nullable = false)\n    lateinit var author: User\n\n    @OneToOne(fetch = FetchType.LAZY, mappedBy = \"task\")\n    var edit: TaskEdit? = null\n}\n</code></pre>\n\n<p>This is how I query</p>\n\n<p>TaskRepoImpl:</p>\n\n<pre><code>override fun findById(id: Int): Task? {\n    val task = getCurrentSession().createNamedQuery(\"task.findById\", Task::class.java)\n            .setParameter(\"id\", id)\n            .uniqueResult()\n    return task\n}\n</code></pre>\n\n<p>TaskService:</p>\n\n<pre><code>@Transactional\nfun find(id: Int): Task? {\n    return taskRepo.findById(id)\n}\n</code></pre>\n\n<p>And the output:</p>\n\n<pre><code>Hibernate: select task0_.id as id1_1_, task0_.author_id as author_i3_1_ from tasks task0_ where task0_.id=?\nHibernate: select user0_.id as id1_3_0_, user0_.enabled as enabled2_3_0_, user0_.name as name3_3_0_, user0_.password as password4_3_0_ from users user0_ where user0_.id=?\nHibernate: select taskedit0_.id as id1_0_0_, taskedit0_.task_id as task_id3_0_0_, taskedit0_.text as text2_0_0_ from task_edits taskedit0_ where taskedit0_.task_id=?\n</code></pre>\n\n<p>Please advice what's wrong with my code and how to make Hibernate load properties lazily? Thank you!</p>\n"}, {"tags": ["kotlin", "gradle-plugin"], "answers": [{"tags": [], "owner": {"reputation": 42524, "user_id": 936832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc1da0368f0874a66bd771c4d57f94b0?s=128&d=identicon&r=PG", "display_name": "Ingo Kegel", "link": "https://stackoverflow.com/users/936832/ingo-kegel"}, "is_accepted": true, "score": 3, "last_activity_date": 1488792470, "creation_date": 1488792470, "answer_id": 42621892, "question_id": 42619821, "link": "https://stackoverflow.com/questions/42619821/how-to-restrict-kotlin-from-using-java-api-which-is-announced-above-jdk1-6/42621892#42621892", "title": "How to restrict kotlin from using java api which is announced above jdk1.6", "body": "<p>You can set the <code>jdkHome</code> property of the Kotlin compiler:</p>\n\n<pre><code>compileKotlin {\n    kotlinOptions {\n        jdkHome = '[path to 1.6 JDK]'\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 795, "user_id": 1172662, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EWYly.jpg?s=128&g=1", "display_name": "Tody.Lu", "link": "https://stackoverflow.com/users/1172662/tody-lu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 42621892, "answer_count": 1, "score": 5, "last_activity_date": 1488792470, "creation_date": 1488785213, "question_id": 42619821, "link": "https://stackoverflow.com/questions/42619821/how-to-restrict-kotlin-from-using-java-api-which-is-announced-above-jdk1-6", "title": "How to restrict kotlin from using java api which is announced above jdk1.6", "body": "<p>My compilation environment is jdk1.8 and runtime environment is jdk1.6. <code>java</code> plugin of gradle has <code>sourceCompatibility</code> attribute. It is valid for java project.<br>\nFor example: when <code>sourceCompatibility=1.6</code>, compiler will report error if I use the api such as <code>Paths</code> which is from jdk1.7. </p>\n\n<p>but <code>sourceCompatibility</code> attribute doesn't work for kotlin project. I understand it is out of <code>java</code> plugin's scope. But I am strange whether <code>kotlin</code> plugin of gradle hasn't similar attribute. (<code>jvmTarget</code> attribute is 1.6 by default, it does't prevent me from using jdk1.7 api)</p>\n\n<p>=== my code ===</p>\n\n<p>kotlin code:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    val pp = Paths.get(\"/tmp\")\n    ... ...\n}\n</code></pre>\n\n<p>I want kotlin's compiler to report errors, but the compilation is successful, </p>\n\n<p>parent <code>build.gradle</code>:</p>\n\n<pre><code>buildscript {\n    repositories {\n        jcenter()\n    }\n    dependencies {\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:1.1.0\"\n    }\n}\nsubprojects {\n    apply plugin: \"java\"\n    compileJava.sourceCompatibility=1.6\n    compileJava.targetCompatibility=1.6\n    compileJava.options.encoding = 'UTF-8'\n\n    // For ubuntu\n    compileJava.options.bootClasspath = '/usr/lib/jvm/java-6-oracle/jre/lib/rt.jar'\n}\n</code></pre>\n\n<p>child kotlin project <code>build.gradle</code>:</p>\n\n<pre><code>apply plugin: 'application'\napply plugin: 'kotlin'\n\nmainClassName = 'net.cat.ApplictionKt'\nversion='1.0'\n\njar {\n    manifest {\n        attributes 'Implementation-Title': 'xxxx',\n                'Implementation-Version': version,\n                'Main-Class': mainClassName\n    }\n}\n\n\ndependencies {\n    compile \"org.jetbrains.kotlin:kotlin-stdlib:1.1.0\"\n    compile \"org.jetbrains.kotlin:kotlin-reflect:1.1.0\"\n    ... ... \n}\n</code></pre>\n"}, {"tags": ["generics", "kotlin", "reification"], "answers": [{"comments": [{"owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "edited": false, "score": 4, "creation_date": 1488756518, "post_id": 42614658, "comment_id": 72359615, "body": "To add to this answer, the reason <code>filterIsInstance</code> does not work is because the list only contains <code>Layout&lt;*&gt;</code> instances. You would need to create subclasses to distinguish them through reflection."}, {"owner": {"reputation": 1561, "user_id": 1772342, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/pvNgt.jpg?s=128&g=1", "display_name": "breandan", "link": "https://stackoverflow.com/users/1772342/breandan"}, "edited": false, "score": 0, "creation_date": 1488757016, "post_id": 42614658, "comment_id": 72359757, "body": "Thanks! But what if the thing you are filtering for is a parameterized type? How do I get something like this? <code>layouts.filter { it is Layout&lt;Horizontal&gt; }.forEach { println(it.getName()) }</code>"}, {"owner": {"reputation": 1561, "user_id": 1772342, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/pvNgt.jpg?s=128&g=1", "display_name": "breandan", "link": "https://stackoverflow.com/users/1772342/breandan"}, "edited": false, "score": 0, "creation_date": 1488757913, "post_id": 42614658, "comment_id": 72359985, "body": "Additionally, <code>layouts.filter { it.t is Horizontal }</code> returns <code>List&lt;Layout&lt;*&gt;&gt;</code>, not a <code>List&lt;Layout&lt;Horizontal&gt;&gt;</code>, so in order to convert this to the correctly typed version, we will need to use an unchecked cast, ie. <code>layouts.filter { it.t is Horizontal }.map { it as Layout&lt;Horizontal&gt; }</code>."}, {"owner": {"reputation": 1561, "user_id": 1772342, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/pvNgt.jpg?s=128&g=1", "display_name": "breandan", "link": "https://stackoverflow.com/users/1772342/breandan"}, "edited": false, "score": 0, "creation_date": 1488758122, "post_id": 42614658, "comment_id": 72360038, "body": "What I really need is a function with the following type signature <code>fun &lt;T : LayoutProtocol&gt; filterLayouts(from: Iterable&lt;Layout&lt;*&gt;&gt;): Iterable&lt;Layout&lt;T&gt;&gt;</code>."}, {"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "reply_to_user": {"reputation": 1561, "user_id": 1772342, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/pvNgt.jpg?s=128&g=1", "display_name": "breandan", "link": "https://stackoverflow.com/users/1772342/breandan"}, "edited": false, "score": 0, "creation_date": 1488759072, "post_id": 42614658, "comment_id": 72360290, "body": "@breandan then just declare that function: <code>fun &lt;T : LayoutProtocol&gt; Iterable&lt;Layout&lt;*&gt;&gt;.filterLayouts() = filter { it.t is T } as Iterable&lt;Layout&lt;T&gt;&gt;</code>"}, {"owner": {"reputation": 1561, "user_id": 1772342, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/pvNgt.jpg?s=128&g=1", "display_name": "breandan", "link": "https://stackoverflow.com/users/1772342/breandan"}, "reply_to_user": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 0, "creation_date": 1488759212, "post_id": 42614658, "comment_id": 72360322, "body": "@Ilya This returns a compiler error: <code>Error:(51, 81) Kotlin: Cannot check for instance of erased type: T</code>"}, {"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 0, "creation_date": 1488808064, "post_id": 42614658, "comment_id": 72382192, "body": "Oh, yes, like the <code>filterIsInstance</code> this function has to be <code>inline</code> and its <code>T</code> parameter has to be <code>reified</code> to be able to use <code>T</code> for is checks: <code>inline fun &lt;reified T : LayoutProtocol&gt; ...</code>"}], "tags": [], "owner": {"reputation": 3668, "user_id": 2392960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a549fcc9b00c4ce0ede36ede98548729?s=128&d=identicon&r=PG", "display_name": "Januson", "link": "https://stackoverflow.com/users/2392960/januson"}, "is_accepted": false, "score": 1, "last_activity_date": 1488751691, "creation_date": 1488751691, "answer_id": 42614658, "question_id": 42613323, "link": "https://stackoverflow.com/questions/42613323/filter-for-generic-type-without-reflection-or-casting/42614658#42614658", "title": "Filter for generic type without reflection or casting", "body": "<p>Just filter <code>layouts</code> LinkedList by <code>t: T</code> property of your Layout class.</p>\n\n<pre><code>layouts.filter { it.t is Horizontal }.forEach { println(it.getName()) }\n</code></pre>\n\n<p>It will print exactly what you want. I.E.</p>\n\n<pre><code>Horizontal layouts:\nHorizontal\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1561, "user_id": 1772342, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/pvNgt.jpg?s=128&g=1", "display_name": "breandan", "link": "https://stackoverflow.com/users/1772342/breandan"}, "edited": false, "score": 0, "creation_date": 1488817614, "post_id": 42622533, "comment_id": 72389194, "body": "Thanks, this does exactly what I want! But how can you prevent someone from calling the constructor for Layout? Or is there a way to avoid <code>Layout.create(...)</code>?"}, {"owner": {"reputation": 5110, "user_id": 1542319, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49d8051261a5786e0fed00556f644191?s=128&d=identicon&r=PG", "display_name": "SerCe", "link": "https://stackoverflow.com/users/1542319/serce"}, "reply_to_user": {"reputation": 1561, "user_id": 1772342, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/pvNgt.jpg?s=128&g=1", "display_name": "breandan", "link": "https://stackoverflow.com/users/1772342/breandan"}, "edited": false, "score": 0, "creation_date": 1488843867, "post_id": 42622533, "comment_id": 72402996, "body": "@breandan Layout.create is needed as a convenient method for creating <code>Layout</code>  subclasses. It&#39;s necessary for preserving type information."}], "tags": [], "owner": {"reputation": 5110, "user_id": 1542319, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49d8051261a5786e0fed00556f644191?s=128&d=identicon&r=PG", "display_name": "SerCe", "link": "https://stackoverflow.com/users/1542319/serce"}, "is_accepted": true, "score": 1, "last_activity_date": 1488794269, "creation_date": 1488794269, "answer_id": 42622533, "question_id": 42613323, "link": "https://stackoverflow.com/questions/42613323/filter-for-generic-type-without-reflection-or-casting/42622533#42622533", "title": "Filter for generic type without reflection or casting", "body": "<p>There is no simple way to do this because of type erasure, but if you really want and performance/readability/error-proneness is not something you are worried about, you can do a few tricks:</p>\n\n<p>First, let's add a factory method to <code>Layout</code> to preserve erased type</p>\n\n<pre><code>open internal class Layout&lt;T : LayoutProtocol&gt;(val t: T) {\n  ...\n  companion object {\n    inline fun &lt;reified T: LayoutProtocol&gt; create(instance: T): Layout&lt;T&gt; {\n      return object: Layout&lt;T&gt;(instance) {}\n    }\n  }\n}\n</code></pre>\n\n<p>(note: here I removed out variance for simplicity)</p>\n\n<p>Second, you need a helper class</p>\n\n<pre><code>open class TypeLiteral&lt;T&gt; {\n  val type: Type = getSuperclassTypeParameter(javaClass)\n\n  companion object {\n    fun getSuperclassTypeParameter(subclass: Class&lt;*&gt;) =\n      (subclass.genericSuperclass as ParameterizedType).actualTypeArguments[0]\n  }\n}\n</code></pre>\n\n<p>(note: the same approach is used by <a href=\"https://google.github.io/guice/api-docs/latest/javadoc/index.html?com/google/inject/TypeLiteral.html\" rel=\"nofollow noreferrer\">Guice DI</a>, it contains a production-ready <code>TypeLiteral</code> implementation )</p>\n\n<p>And, finally our own filter method</p>\n\n<pre><code>inline fun &lt;reified R&gt; Iterable&lt;*&gt;.genericFilterIsInstance() where R : Any =\n  filterIsInstance&lt;R&gt;()\n  .filter { object : TypeLiteral&lt;R&gt;() {}.type == it.javaClass.genericSuperclass }\n</code></pre>\n\n<p>And now it prints exactly what you want</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n  val layouts = LinkedList&lt;Layout&lt;*&gt;&gt;()\n  layouts.add(Layout.create(Horizontal()))\n  layouts.add(Layout.create(Vertical()))\n  println(\"Horizontal layouts:\")\n  layouts.genericFilterIsInstance&lt;Layout&lt;Horizontal&gt;&gt;().forEach { println(it.getName()) }\n  /* prints:\n  Horizontal layouts:\n  Horizontal\n   */\n}\n</code></pre>\n\n<p>But please, don't use this answer in production code. In real life passing a class instance for filtering would always be preferable.</p>\n"}], "owner": {"reputation": 1561, "user_id": 1772342, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/pvNgt.jpg?s=128&g=1", "display_name": "breandan", "link": "https://stackoverflow.com/users/1772342/breandan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1436, "favorite_count": 2, "accepted_answer_id": 42622533, "answer_count": 2, "score": 3, "last_activity_date": 1488794269, "creation_date": 1488744276, "last_edit_date": 1488768136, "question_id": 42613323, "link": "https://stackoverflow.com/questions/42613323/filter-for-generic-type-without-reflection-or-casting", "title": "Filter for generic type without reflection or casting", "body": "<p>In Kotlin there is a limited form of <a href=\"https://kotlinlang.org/docs/reference/inline-functions.html#reified-type-parameters\" rel=\"nofollow noreferrer\">reified generics</a>. Is there any way to use reification to filter for a generic type without using <code>getClass()</code> or <code>as</code> or any kind of weird annotation, ie. just by using the <code>is</code> keyword? For example, I have the following structure:</p>\n\n<pre><code>import java.util.*\n\ninternal class Layout&lt;out T : LayoutProtocol&gt;(val t: T) {\n    fun getName(): String {\n        return t.getName()\n    }\n}\n\ninterface LayoutProtocol {\n    fun getName(): String\n}\n\ninternal class Vertical : LayoutProtocol {\n    override fun getName(): String {\n        return \"Vertical\"\n    }\n}\n\ninternal class Horizontal : LayoutProtocol {\n    override fun getName(): String {\n        return \"Horizontal\"\n    }\n}\n\nfun main(args: Array&lt;String&gt;) {\n    val layouts = LinkedList&lt;Layout&lt;*&gt;&gt;()\n    layouts.add(Layout&lt;Horizontal&gt;(Horizontal()))\n    layouts.add(Layout&lt;Vertical&gt;(Vertical()))\n    println(\"Horizontal layouts:\")\n    layouts.filterIsInstance&lt;Layout&lt;Horizontal&gt;&gt;().forEach { println(it.getName()) }\n}\n</code></pre>\n\n<p>This outputs:</p>\n\n<pre><code>Horizontal layouts:\nHorizontal\nVertical\n</code></pre>\n\n<p>I would like it to output the following. Is there any way to get:</p>\n\n<pre><code>Horizontal layouts:\nHorizontal\n</code></pre>\n\n<p>If we look at the source code for <code>filterIsInstance(...)</code>, Kotlin does some tricky stuff to circumvent type erasure, but still does not work:</p>\n\n<pre><code>/**\n * Returns a list containing all elements that are instances of specified type parameter R.\n */\npublic inline fun &lt;reified R&gt; Iterable&lt;*&gt;.filterIsInstance(): List&lt;@kotlin.internal.NoInfer R&gt; {\n    return filterIsInstanceTo(ArrayList&lt;R&gt;())\n}\n\n/**\n * Appends all elements that are instances of specified type parameter R to the given [destination].\n */\npublic inline fun &lt;reified R, C : MutableCollection&lt;in R&gt;&gt; Iterable&lt;*&gt;.filterIsInstanceTo(destination: C): C {\n    for (element in this) if (element is R) destination.add(element)\n    return destination\n}\n</code></pre>\n\n<p>If this is not possible in Kotlin, is there any language (JVM or non-JVM) that lets me do something like the following: </p>\n\n<pre><code>inline fun &lt;reified R: LayoutProtocol&gt; filterVerticals(from: Iterable&lt;Layout&lt;R&gt;&gt;): Iterable&lt;Layout&lt;Vertical&gt;&gt; {\n    val dest = ArrayList&lt;Layout&lt;Vertical&gt;&gt;()\n\n    for (element in from)\n        if (element is Layout&lt;Vertical&gt;)\n            dest.add(element)\n\n    return dest\n}\n</code></pre>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 11535, "user_id": 1267663, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/cv7Po.jpg?s=128&g=1", "display_name": "Whymarrh", "link": "https://stackoverflow.com/users/1267663/whymarrh"}, "edited": false, "score": 0, "creation_date": 1488741070, "post_id": 42611863, "comment_id": 72354438, "body": "If you know how to implement what you want in Java but not in Kotlin, two things: 1) you should/can have that bit implemented in Java and interact with it from Kotlin, and 2) IntelliJ IDEA offers to auto-convert Java into Kotlin inside the IDE."}, {"owner": {"reputation": 807, "user_id": 7441041, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/affe7ad37b72e7a3e6ff2a51ddb0dd1b?s=128&d=identicon&r=PG&f=1", "display_name": "lampenlampen", "link": "https://stackoverflow.com/users/7441041/lampenlampen"}, "reply_to_user": {"reputation": 11535, "user_id": 1267663, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/cv7Po.jpg?s=128&g=1", "display_name": "Whymarrh", "link": "https://stackoverflow.com/users/1267663/whymarrh"}, "edited": false, "score": 0, "creation_date": 1488741373, "post_id": 42611863, "comment_id": 72354559, "body": "@Whymarrh 1) I know but I wanted to ask to learn a bit more about kotlin (if someone has a better solution). 2) good idea, didn&#39;t remember."}], "answers": [{"comments": [{"owner": {"reputation": 807, "user_id": 7441041, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/affe7ad37b72e7a3e6ff2a51ddb0dd1b?s=128&d=identicon&r=PG&f=1", "display_name": "lampenlampen", "link": "https://stackoverflow.com/users/7441041/lampenlampen"}, "edited": false, "score": 1, "creation_date": 1488737635, "post_id": 42611895, "comment_id": 72353173, "body": "Yeah, but I want the class to be a singleton. Added as third condition"}], "tags": [], "owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "is_accepted": false, "score": 0, "last_activity_date": 1488736549, "creation_date": 1488736549, "answer_id": 42611895, "question_id": 42611863, "link": "https://stackoverflow.com/questions/42611863/kotlin-object-supertype-constructor/42611895#42611895", "title": "Kotlin Object Supertype Constructor", "body": "<p>You don't need any objects or companion objects to achieve this. This is the syntax for calling the constructor of a superclass in Kotlin:</p>\n\n<pre><code>class MyClass(context: Context) : SuperClass(context)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 807, "user_id": 7441041, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/affe7ad37b72e7a3e6ff2a51ddb0dd1b?s=128&d=identicon&r=PG&f=1", "display_name": "lampenlampen", "link": "https://stackoverflow.com/users/7441041/lampenlampen"}, "edited": false, "score": 0, "creation_date": 1488738752, "post_id": 42612135, "comment_id": 72353560, "body": "But I still have the problem, that I cannot call the supertype&#39;s constructor."}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1488739734, "post_id": 42612135, "comment_id": 72353902, "body": "Imagine this was possible. Imagine there was some code in your program that referred to <code>MyClass</code>. The <code>object</code> access syntax doesn&#39;t allow you to specify any parameters; you simply refer to the object by its class name. Where would the <code>context</code> instance come from?"}, {"owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "reply_to_user": {"reputation": 807, "user_id": 7441041, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/affe7ad37b72e7a3e6ff2a51ddb0dd1b?s=128&d=identicon&r=PG&f=1", "display_name": "lampenlampen", "link": "https://stackoverflow.com/users/7441041/lampenlampen"}, "edited": false, "score": 0, "creation_date": 1488740360, "post_id": 42612135, "comment_id": 72354151, "body": "@lampenlampen Remade the answer to suit your use case."}], "tags": [], "owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "is_accepted": true, "score": 2, "last_activity_date": 1488740336, "last_edit_date": 1488740336, "creation_date": 1488737889, "answer_id": 42612135, "question_id": 42611863, "link": "https://stackoverflow.com/questions/42611863/kotlin-object-supertype-constructor/42612135#42612135", "title": "Kotlin Object Supertype Constructor", "body": "<p>Consider the following super class:</p>\n\n<pre><code>open class MySuperClass(val context: Context) {...}\n</code></pre>\n\n<p>Since Kotlin objects only have an empty constructor, you'd need a structure similar to the following:</p>\n\n<pre><code>// Private constructor is only accessible within the class.\nclass MySingleton private constructor(context: Context) : MySuperClass(context) {\n    companion object {\n        lateinit var INSTANCE: MySingleton\n            // Instance setter is only accessible from within the class.\n            private set\n\n        // Custom init function is called from outside and replaces\n        // THE WHOLE SINGLETON with a new instance\n        // to avoid internal dependencies on the old context.\n        fun init(context: Context) {\n            INSTANCE = MySingleton(context.applicationContext)\n        }\n    }\n\n    // Lazily initialized field dependent on a Context instance.\n    val prefs by lazy { PreferenceManager.getDefaultSharedPreferences(context) }\n}\n</code></pre>\n\n<p>You need to call <code>init(context)</code> once before using your singleton class and the <code>Application</code> is a great place to do that. This will also create a new instance of your singleton each time Instant Run loads a new <code>Application</code> object so you always end up with the most up-to-date application context.</p>\n\n<pre><code>class MyApplication : Application() {\n    override fun onCreate() {\n        super.onCreate()\n\n        // Eagerly initialized singleton.\n        MySingleton.init(this)\n    }\n}\n</code></pre>\n\n<p>Notes:</p>\n\n<ul>\n<li>Kotlin objects only have an empty constructor. If you need to initialize the object use a custom init function.</li>\n<li>If your fields depend on a context which may change it's better to use <code>class</code> instead of <code>object</code> and manage current instance yourself. You also have to do this if you need to pass parameters to super class of your singleton.</li>\n<li>Because you <em>eagerly</em> initialize the class at the start of your application (not at the first call of <code>getInstance(context)</code> it's a great idea to <em>lazily</em> the heavy objects within your singleton object.</li>\n<li>If your app is multi-process find a way to initialize your singleton only in the process you actually use it. (Hint: ContentProvider is created only in main process by default.)</li>\n</ul>\n"}], "owner": {"reputation": 807, "user_id": 7441041, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/affe7ad37b72e7a3e6ff2a51ddb0dd1b?s=128&d=identicon&r=PG&f=1", "display_name": "lampenlampen", "link": "https://stackoverflow.com/users/7441041/lampenlampen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4261, "favorite_count": 0, "accepted_answer_id": 42612135, "answer_count": 2, "score": 1, "last_activity_date": 1488740895, "creation_date": 1488736306, "last_edit_date": 1488740895, "question_id": 42611863, "link": "https://stackoverflow.com/questions/42611863/kotlin-object-supertype-constructor", "title": "Kotlin Object Supertype Constructor", "body": "<p>I need to implement a singleton <code>MyClass</code> in kotlin.</p>\n\n<p>Requirements:</p>\n\n<ol>\n<li>MyClass has the supertype <code>SuperClass</code> and I need to call the constructor of <code>Superclass</code></li>\n<li>I need to pass a context to <code>MyClass</code> and need the context to call the constructor of <code>Superclass</code>.</li>\n<li><code>MyClass</code> is a singleton.</li>\n</ol>\n\n<p>Java equivalent:</p>\n\n<pre><code>class MyClass extends SuperClass\n{\n    // instance variable\n    // getInstance() method\n    MyClass(Context context)\n    {\n        super(context);\n    }\n}\n</code></pre>\n\n<p>I tried to solve this with an <code>object</code> but didn't get it working.</p>\n\n<p>Is there a way to get it working with an object or do I have to use a <code>companion object</code>?</p>\n"}, {"tags": ["properties", "kotlin"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1488736251, "post_id": 42611729, "comment_id": 72352664, "body": "That&#39;s a good thing, that prevents bugs to happen, by the caller not realizing that the property must be a float. You shouldn&#39;t change anything to the code, except using a double instead of a float."}], "answers": [{"tags": [], "owner": {"reputation": 6571, "user_id": 244702, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/22b3a019954e1e8a25f303a5ed555340?s=128&d=identicon&r=PG", "display_name": "Kevin Robatel", "link": "https://stackoverflow.com/users/244702/kevin-robatel"}, "is_accepted": false, "score": -1, "last_activity_date": 1488793177, "creation_date": 1488793177, "answer_id": 42622120, "question_id": 42611729, "link": "https://stackoverflow.com/questions/42611729/property-setter-with-different-type/42622120#42622120", "title": "Property setter with different type", "body": "<p>What about:</p>\n\n<pre><code>class Test(x: Float) {\n    var x: Float = x\n        get() {\n            return field\n        }\n        set(value) { // 'value' is of type 'Float'\n            field = value\n        }\n\n    fun setX(value: Int) {\n        x = value.toFloat()\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": false, "score": 1, "last_activity_date": 1488813316, "creation_date": 1488813316, "answer_id": 42629146, "question_id": 42611729, "link": "https://stackoverflow.com/questions/42611729/property-setter-with-different-type/42629146#42629146", "title": "Property setter with different type", "body": "<p>Although you cannot overload the setter you can take advantage of the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-number/\" rel=\"nofollow noreferrer\"><code>Number</code></a> interface and simply accept all numbers and convert them to floats:</p>\n\n<pre><code>class Test(x: Float) {\n    var x: Number = x\n        get() {\n            return field\n        }\n        set(value) { // 'value' is of type 'Number'\n            field = value.toFloat()\n        }\n}\n</code></pre>\n\n<p>This means that not only <code>Float</code>, <code>Int</code>, and <code>Double</code> are accepted but also <code>Byte</code>, <code>Short</code>, <code>BigInteger</code>, <code>BigDecimal</code>, <code>AtomicInteger</code>, <code>AtomicLong</code>, <code>AtomicDouble</code>, and any other class that implements <code>Number</code>.</p>\n"}], "owner": {"reputation": 189, "user_id": 3493080, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/128Cm.png?s=128&g=1", "display_name": "baeda", "link": "https://stackoverflow.com/users/3493080/baeda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1542, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1488813316, "creation_date": 1488735521, "question_id": 42611729, "link": "https://stackoverflow.com/questions/42611729/property-setter-with-different-type", "title": "Property setter with different type", "body": "<p>Considering the following example, is it possible to have a setter for <code>x</code> that accepts an <code>Int</code> and another one that accepts a <code>Double</code>?</p>\n\n<pre><code>class Test(x: Float) {\n\n    var x: Float = x\n        get() {\n            return field\n        }\n        set(value) { // 'value' is of type 'Float'\n            field = value\n        }\n\n}\n</code></pre>\n\n<p>Reason: If I want to assign a new value to <code>x</code> I always have to append the <code>f</code> postfix to every assignment, i.e.</p>\n\n<pre><code>var v = Test(12f)\nv.x = 11   // error: 'The integer literal does not conform to the expected type Float'\nv.x = 11.0 // error: 'The floating-point literal does not conform to the expected type Float'\nv.x = 11f  // ok\n</code></pre>\n"}, {"tags": ["generics", "kotlin"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1488733265, "post_id": 42611137, "comment_id": 72351556, "body": "How would you implement it in Java? You don&#39;t know what the generic type of the B is, so you don&#39;t know if the <code>e</code> you pass is of the right type."}, {"owner": {"reputation": 107, "user_id": 6509176, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/a092J.png?s=128&g=1", "display_name": "aaa", "link": "https://stackoverflow.com/users/6509176/aaa"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1488733362, "post_id": 42611137, "comment_id": 72351604, "body": "I did find something similar to <code>ArrayList&lt;B&gt;</code> without specifying generic of <code>T</code>, and it does compile and work as expected. Though, I have no idea how that works."}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1488733456, "post_id": 42611137, "comment_id": 72351638, "body": "Yes, but it&#39;s using a raw type, and thus isn&#39;t type-safe."}, {"owner": {"reputation": 107, "user_id": 6509176, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/a092J.png?s=128&g=1", "display_name": "aaa", "link": "https://stackoverflow.com/users/6509176/aaa"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1488733582, "post_id": 42611137, "comment_id": 72351686, "body": "Ah, as Kotlin&#39;s generics are type-safe, this wouldn&#39;t be possible?"}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1488733783, "post_id": 42611137, "comment_id": 72351776, "body": "AFAIK, no, not as is. Java generics are type-safe, too. But if you use an ArrayList&lt;B&gt;, you&#39;re not using B as a generic type. You&#39;re using it as a aw type, effectively saying the compiler: forget about type safety here."}, {"owner": {"reputation": 107, "user_id": 6509176, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/a092J.png?s=128&g=1", "display_name": "aaa", "link": "https://stackoverflow.com/users/6509176/aaa"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1488733924, "post_id": 42611137, "comment_id": 72351818, "body": "Okay, thanks for clearing that up."}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1488734047, "post_id": 42611137, "comment_id": 72351874, "body": "You can do <code>fun &lt;T: A&gt; test(e: T) {         (things.get(0) as B&lt;T&gt;).pass(e)     }</code>, but it&#39;s of course not type-safe."}, {"owner": {"reputation": 107, "user_id": 6509176, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/a092J.png?s=128&g=1", "display_name": "aaa", "link": "https://stackoverflow.com/users/6509176/aaa"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1488734681, "post_id": 42611137, "comment_id": 72352116, "body": "Well, I can&#39;t exactly do that, since <code>test</code> in the actual project overrides a method (so I can&#39;t change signature). But thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 1595, "user_id": 2522630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a920075e7b5b23e6dfb1902ca8dd229?s=128&d=identicon&r=PG", "display_name": "nickrak", "link": "https://stackoverflow.com/users/2522630/nickrak"}, "is_accepted": false, "score": 0, "last_activity_date": 1490673048, "creation_date": 1490673048, "answer_id": 43060347, "question_id": 42611137, "link": "https://stackoverflow.com/questions/42611137/kotlin-generics-wildcard-with-extend/43060347#43060347", "title": "Kotlin generics wildcard with extend", "body": "<p>If you already know that T must extend A, you can specify that in 'C.things' initialization.</p>\n\n<pre><code>private val things = mutableListOf&lt;B&lt;A&gt;&gt;()\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 6509176, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/a092J.png?s=128&g=1", "display_name": "aaa", "link": "https://stackoverflow.com/users/6509176/aaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1040, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490673048, "creation_date": 1488732688, "last_edit_date": 1488733296, "question_id": 42611137, "link": "https://stackoverflow.com/questions/42611137/kotlin-generics-wildcard-with-extend", "title": "Kotlin generics wildcard with extend", "body": "<p>So, I've been trying to implement some Java in Kotlin, and I faced this challenge of passing arguments to wildcarded generic class methods.\nFor example:</p>\n\n<pre><code>interface A\nclass B&lt;in T : A&gt; {\n    fun pass(e: T) {\n    /* do something */\n    }\n }\n\nclass C {\n    private val things = mutableListOf&lt;B&lt;*&gt;&gt;()\n    fun test(e: A) {\n        things.get(0)?.pass(e) // This doesn't work, since wildcard B generic wants Nothing, since Nothing can be safely passed to it.\n         // but, I know that `e` is passable to `pass` method, since\n         // its an impl of A\n    }\n }\n</code></pre>\n\n<p>It's possible to implement this in Java, but is it in Kotlin? If so, how should I do this?</p>\n"}, {"tags": ["kotlin", "kovenant"], "answers": [{"tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": true, "score": 2, "last_activity_date": 1488811496, "creation_date": 1488811496, "answer_id": 42628477, "question_id": 42609590, "link": "https://stackoverflow.com/questions/42609590/chaining-promise-returning-functions-in-kovenant/42628477#42628477", "title": "Chaining promise returning functions in Kovenant", "body": "<p>You get <code>Promise&lt;Promise&lt;Int, Exception&gt;, Exception&gt;</code> type when you return another promise from the lambda passed to <code>then</code>. Therefore in the next <code>then</code> the argument <code>it</code> has type <code>Promise&lt;Int,...&gt;</code> instead of <code>Int</code>.</p>\n\n<p>In order to flatten promise you can use <a href=\"http://kovenant.komponents.nl/api/core_usage/#unwrap\" rel=\"nofollow noreferrer\"><code>unwrap</code></a> function, which converts <code>Promise&lt;Promise&lt;V&gt;&gt;</code> into <code>Promise&lt;V&gt;</code>. Then your example would look like:</p>\n\n<pre><code>promiseFunc1().then { it: Int -&gt;\n   promiseFunc2()\n}.unwrap()\n.then { it: Int -&gt;\n   // it is now an integer\n}\n</code></pre>\n\n<p>If that combination of <code>then {}.unwrap()</code> appears often in your code, you can use its shorthand <a href=\"http://kovenant.komponents.nl/api/functional_usage/#bind\" rel=\"nofollow noreferrer\"><code>bind</code></a> from <code>kovenant-functional</code>:</p>\n\n<pre><code>promiseFunc1() bind { it: Int -&gt;\n   promiseFunc2()\n} then { it: Int -&gt;\n   // it is now an integer\n}\n</code></pre>\n"}], "owner": {"reputation": 10703, "user_id": 126574, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/0bf9907e642c62c7bcf3bb2f92d020d4?s=128&d=identicon&r=PG", "display_name": "VitalyB", "link": "https://stackoverflow.com/users/126574/vitalyb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 361, "favorite_count": 0, "accepted_answer_id": 42628477, "answer_count": 1, "score": 1, "last_activity_date": 1488811496, "creation_date": 1488724173, "question_id": 42609590, "link": "https://stackoverflow.com/questions/42609590/chaining-promise-returning-functions-in-kovenant", "title": "Chaining promise returning functions in Kovenant", "body": "<p>I am trying to chain 2 promise returning functions with Kovenant, like so:</p>\n\n<pre><code>fun promiseFunc1() : Promise&lt;Int, Exception&gt; {\n    return Promise.of(1)\n}\n\nfun promiseFunc2() : Promise&lt;Int, Exception&gt; {\n    return Promise.of(2)\n}\n\nfun promiseCaller() {\n    promiseFunc1() then { it: Int -&gt;\n        promiseFunc2()\n    } then { it: Int -&gt;\n        // Compilation error: it is not not an integer\n    }\n}\n</code></pre>\n\n<p>It seems that <code>then</code> in Kovenant returns the value as is. How do I get the actual integer from <code>promiseFunc2</code>? The only solution I got is using the <code>get()</code> function, like so:</p>\n\n<pre><code>    promiseFunc1() then { it: Int -&gt;\n        promiseFunc2().get()\n    } then { it: Int -&gt;\n        // it is now an integer\n    }\n</code></pre>\n\n<p>However, since <code>get()</code> blocks the thread it only works if <code>then</code> is running on a background thread (which it does), still, it feels like a hack.</p>\n\n<p>Is there a better way?</p>\n"}, {"tags": ["inheritance", "kotlin"], "comments": [{"owner": {"reputation": 1526, "user_id": 1920670, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3e4c44d78b9654baf65100088deafc04?s=128&d=identicon&r=PG&f=1", "display_name": "MainActivity", "link": "https://stackoverflow.com/users/1920670/mainactivity"}, "edited": false, "score": 0, "creation_date": 1488779825, "post_id": 42601245, "comment_id": 72365618, "body": "There&#39;s no need to override, but simply to init"}], "answers": [{"comments": [{"owner": {"reputation": 1526, "user_id": 1920670, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3e4c44d78b9654baf65100088deafc04?s=128&d=identicon&r=PG&f=1", "display_name": "MainActivity", "link": "https://stackoverflow.com/users/1920670/mainactivity"}, "edited": false, "score": 0, "creation_date": 1488662721, "post_id": 42601294, "comment_id": 72333679, "body": "It looks strange to have access for creating fields in constructor and no access to init existing"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 1, "last_activity_date": 1488660901, "creation_date": 1488660901, "answer_id": 42601294, "question_id": 42601245, "link": "https://stackoverflow.com/questions/42601245/initialize-abstract-class-field-in-childs-constructor/42601294#42601294", "title": "Initialize abstract class field in child&#39;s constructor", "body": "<p>No, there's no way to do that for a property which is not declared in the parent class <a href=\"https://kotlinlang.org/docs/reference/classes.html#constructors\" rel=\"nofollow noreferrer\">primary constructor</a>.</p>\n\n<p>But you can transform your example adding a primary constructor:</p>\n\n<pre><code>public abstract class A(var name: String = \"Empty name\")\n\npublic class B(name: String) : A(name)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": false, "score": 0, "last_activity_date": 1488672218, "creation_date": 1488672218, "answer_id": 42602845, "question_id": 42601245, "link": "https://stackoverflow.com/questions/42601245/initialize-abstract-class-field-in-childs-constructor/42602845#42602845", "title": "Initialize abstract class field in child&#39;s constructor", "body": "<p>You can make <code>name</code> <code>abstract</code> or <code>open</code> and then <code>override</code> it in <code>B</code>. e.g.:</p>\n\n<pre><code>public abstract class A {\n    open var name: String = \"Empty name\"\n}\npublic class B(name: String) : A() {\n    override var name: String = name\n}\n</code></pre>\n\n<p>It isn't exactly \"in\" the constructor but it might meet your needs.</p>\n"}, {"tags": [], "owner": {"reputation": 125, "user_id": 6224750, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204455659991483/picture?type=large", "display_name": "babedev", "link": "https://stackoverflow.com/users/6224750/babedev"}, "is_accepted": false, "score": 1, "last_activity_date": 1488723256, "creation_date": 1488723256, "answer_id": 42609423, "question_id": 42601245, "link": "https://stackoverflow.com/questions/42601245/initialize-abstract-class-field-in-childs-constructor/42609423#42609423", "title": "Initialize abstract class field in child&#39;s constructor", "body": "<p>You can use <code>override</code> annotation</p>\n\n<pre><code>abstract class A {\n    open val name: String = \"Empty name\"\n}\n\nclass B(override val name: String) : A()\n</code></pre>\n"}], "owner": {"reputation": 1526, "user_id": 1920670, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3e4c44d78b9654baf65100088deafc04?s=128&d=identicon&r=PG&f=1", "display_name": "MainActivity", "link": "https://stackoverflow.com/users/1920670/mainactivity"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1279, "favorite_count": 0, "accepted_answer_id": 42601294, "answer_count": 3, "score": 1, "last_activity_date": 1488723256, "creation_date": 1488660582, "question_id": 42601245, "link": "https://stackoverflow.com/questions/42601245/initialize-abstract-class-field-in-childs-constructor", "title": "Initialize abstract class field in child&#39;s constructor", "body": "<p>I have abstract class A with some field</p>\n\n<pre><code>public abstract class A {\n    var name: String = \"Empty name\"\n}\n</code></pre>\n\n<p>and want to inherit it</p>\n\n<pre><code>public class B(name: String) : A() {\n    init {\n        this.name = name\n    }\n}\n</code></pre>\n\n<p>Is there a way for not to create an init block and do one-line init of <code>name</code> like <code>class B(::name: String)</code>?</p>\n"}, {"tags": ["android", "android-gradle-plugin", "kotlin"], "comments": [{"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1488659241, "post_id": 42600950, "comment_id": 72332644, "body": "You can delete everything in <code>C:\\Users\\Name\\.gradle\\wrapper\\dists</code>... It should re-download them"}, {"owner": {"reputation": 17, "user_id": 7659425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0ac2395c2265efadf56b53a105f5dc9?s=128&d=identicon&r=PG&f=1", "display_name": "Veranicus", "link": "https://stackoverflow.com/users/7659425/veranicus"}, "reply_to_user": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 1, "creation_date": 1489260834, "post_id": 42600950, "comment_id": 72597177, "body": "Thank you very much, it helped."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 7096369, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gmYHNcdSBGU/AAAAAAAAAAI/AAAAAAAAAAs/JTF203gejsw/photo.jpg?sz=128", "display_name": "Talon IT_", "link": "https://stackoverflow.com/users/7096369/talon-it"}, "is_accepted": false, "score": -2, "last_activity_date": 1597218519, "creation_date": 1597218519, "answer_id": 63372088, "question_id": 42600950, "link": "https://stackoverflow.com/questions/42600950/error-after-creating-new-empty-activity/63372088#63372088", "title": "Error after creating new, empty activity", "body": "<p>app build.gradle signingConfigs delete debug mode</p>\n"}], "owner": {"reputation": 17, "user_id": 7659425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0ac2395c2265efadf56b53a105f5dc9?s=128&d=identicon&r=PG&f=1", "display_name": "Veranicus", "link": "https://stackoverflow.com/users/7659425/veranicus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 453, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1597218519, "creation_date": 1488658855, "last_edit_date": 1488659176, "question_id": 42600950, "link": "https://stackoverflow.com/questions/42600950/error-after-creating-new-empty-activity", "title": "Error after creating new, empty activity", "body": "<p>This error is shown by Gradle of my new empty activity, right after i create it... Afterwards, android studio is not working properly. I may have deleted something out of a java folder, but i have reinstalled java, java sdk studio and even android studio and it still shows the same thing</p>\n\n<blockquote>\n  <p>Error:Cannot find JAR 'kotlin-compiler-embeddable-1.1-M02.jar' required by module 'gradle-script-kotlin' using classpath or distribution directory <code>'C:\\Users\\Name\\.gradle\\wrapper\\dists\\gradle-3.3-all\\55gk2rcmfc6p2dg9u9ohc3hw9\\gradle-3.3'</code></p>\n</blockquote>\n"}, {"tags": ["android", "android-studio", "intellij-idea", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 2317, "user_id": 5314268, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc78ae9c49596635d47303e28831c2fd?s=128&d=identicon&r=PG&f=1", "display_name": "madcow", "link": "https://stackoverflow.com/users/5314268/madcow"}, "edited": false, "score": 2, "creation_date": 1488656845, "post_id": 42600474, "comment_id": 72331842, "body": "Thank you! Makes sense. Strangely, I didn&#39;t see the &quot;Join declaration and assignment&quot; intention action until I hit <code>Alt+Enter</code> to manually pull up the actions menu. Maybe that&#39;s a bug? Anyways, so glad this is resolved. Thank you for the feedback on how to clean up the type declarations as well. Learning quickly :)"}, {"owner": {"reputation": 335, "user_id": 1515907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcd7891d17676becc340cff8822f4a81?s=128&d=identicon&r=PG", "display_name": "Andre", "link": "https://stackoverflow.com/users/1515907/andre"}, "edited": false, "score": 0, "creation_date": 1548614783, "post_id": 42600474, "comment_id": 95595097, "body": "But be careful, the logic changes then a bit. Init block will be called BEFORE the properties are initialized. If you assigned the properties in init block and used them directly afterwards (in the init block), then it wont work after the &quot;optimization&quot; by joining because they will be initialized after the init block has finished."}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 2, "creation_date": 1548618648, "post_id": 42600474, "comment_id": 95596275, "body": "Property initializers and initializer blocks are ran top to bottom within the class, interleaved. See the docs here: <a href=\"https://kotlinlang.org/docs/reference/classes.html#constructors\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/classes.html#constructors</a>"}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 39, "last_activity_date": 1488656536, "last_edit_date": 1488656536, "creation_date": 1488656190, "answer_id": 42600474, "question_id": 42600368, "link": "https://stackoverflow.com/questions/42600368/kotlin-android-studio-intellij-can-be-joined-with-assignment-inspection-warnin/42600474#42600474", "title": "Kotlin Android Studio/IntelliJ &quot;Can be joined with assignment&quot; Inspection Warning", "body": "<p>It's telling you that instead of having a separate <code>init</code> block, you could be initializing the variables at the place where you've declared them in the class, like so:</p>\n\n<pre><code>protected var inflater: LayoutInflater = LayoutInflater.from(context)\nprotected var images: List&lt;Uri&gt; = emptyList()\n</code></pre>\n\n<p>You should be getting the <code>Alt+Enter</code> intention action at the place of the warning to do this rewriting for you, like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/H1mxd.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/H1mxd.png\" alt=\"Join declaration and assignment intention action\"></a></p>\n\n<p>Additionally, in this form, you could clean the types up a bit like this:</p>\n\n<pre><code>protected var inflater = LayoutInflater.from(context)\nprotected var images = emptyList&lt;Uri&gt;()\n</code></pre>\n"}], "owner": {"reputation": 2317, "user_id": 5314268, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc78ae9c49596635d47303e28831c2fd?s=128&d=identicon&r=PG&f=1", "display_name": "madcow", "link": "https://stackoverflow.com/users/5314268/madcow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8366, "favorite_count": 1, "accepted_answer_id": 42600474, "answer_count": 1, "score": 22, "last_activity_date": 1488656536, "creation_date": 1488655685, "question_id": 42600368, "link": "https://stackoverflow.com/questions/42600368/kotlin-android-studio-intellij-can-be-joined-with-assignment-inspection-warnin", "title": "Kotlin Android Studio/IntelliJ &quot;Can be joined with assignment&quot; Inspection Warning", "body": "<p>I'm new to Koltin and really loving it so far, but I've hit a snag. I'm sure I'm missing something extremely, extremely basic here, but nonetheless, I'm a loss, and I appreciate any help.</p>\n\n<p>I converted a simple java class to Kotlin using the Android Studio/IntelliJ command. After this conversion, I am getting an inspection warning that I'm unsure how to resolve. I had converted 15-20 classes (many of which were far more complicated) to Kotlin before this class, and have yet to see this warning.</p>\n\n<p><a href=\"https://i.stack.imgur.com/GIw0G.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/GIw0G.png\" alt=\"enter image description here\"></a></p>\n\n<p>Again, I know this must be something really basic. But I poured through the Kotlin docs on variables and classes and couldn't find anything related to 'assignment' or initializing multiple variables at once. Maybe I'm not understanding the terms in the message? I've also Googled the exact message string (<code>\"Can be joined with assignment\"</code>) to no avail.</p>\n\n<p><strong>ImagePagerAdapter.kt</strong></p>\n\n<pre><code>abstract class ImagePagerAdapter(protected var context: Context) : PagerAdapter() {\n    protected var inflater: LayoutInflater\n    protected var images: List&lt;Uri&gt;\n\n    interface ImageLoadingListener {\n        fun onLoadingComplete()\n        fun onLoadingStarted()\n    }\n\n    init {\n        this.inflater = LayoutInflater.from(context)\n        this.images = emptyList()\n    }\n\n    override fun getCount(): Int {\n        return images.size\n    }\n\n    override fun isViewFromObject(view: View, `object`: Any): Boolean {\n        return view === `object`\n    }\n\n    override fun destroyItem(container: ViewGroup, position: Int, `object`: Any) {\n        container.removeView(`object` as View)\n    }\n\n    fun bindImages(images: List&lt;Uri&gt;) {\n        this.images = images\n    }\n}\n</code></pre>\n\n<p>Many thanks in advance!</p>\n"}, {"tags": ["operator-overloading", "kotlin"], "comments": [{"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 0, "creation_date": 1488647545, "post_id": 42598259, "comment_id": 72328592, "body": "What is the return type of <code>temp1.inverse</code>? When you invoke <code>times</code> extension in a functional form, like <code>a.times(temp1.inverse())</code> is it resolved correctly?"}, {"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "reply_to_user": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 0, "creation_date": 1488650515, "post_id": 42598259, "comment_id": 72329573, "body": "ah, it was tricky... I wrote it in functional form and Intellij was jumping between resolved and unresolved.. alt+enter, import, it resolved it definitely. Switched back to operator, flawless.. Thanks Ilya, if you want to answer, I&#39;ll accept that :)"}], "answers": [{"tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": true, "score": 1, "last_activity_date": 1488660350, "creation_date": 1488660350, "answer_id": 42601209, "question_id": 42598259, "link": "https://stackoverflow.com/questions/42598259/unresolved-times-operator/42601209#42601209", "title": "Unresolved times operator", "body": "<p>Since the extension <code>operator fun Vec3.times(b: Quat)</code> is defined in the package <code>quat</code>, you need to specify that package name when importing the operator:</p>\n\n<pre><code>import quat.times\n// or\nimport quat.*\n</code></pre>\n"}], "owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 42601209, "answer_count": 1, "score": 0, "last_activity_date": 1488660350, "creation_date": 1488644410, "question_id": 42598259, "link": "https://stackoverflow.com/questions/42598259/unresolved-times-operator", "title": "Unresolved times operator", "body": "<p>I have the following <a href=\"https://github.com/elect86/glm/blob/master/src/test/kotlin/main/quaternion.kt#L198-L202\" rel=\"nofollow noreferrer\">code</a>:</p>\n\n<pre><code>val temp1 = Quat(1f, Vec3(0, 1, 0)).normalize()\nval temp2 = Quat(.5f, Vec3(1, 0, 0)).normalize()\n\nval a = temp1 * Vec3(0, 1, 0)\nval transformed0 = a * temp1.inverse() // error\n</code></pre>\n\n<p>The first <code>*</code> is correctly resolved in the <code>Quat</code> class with this <a href=\"https://github.com/elect86/glm/blob/master/src/main/kotlin/quat/Quat.kt#L129\" rel=\"nofollow noreferrer\">operator</a>:</p>\n\n<pre><code>operator fun times(b: Vec3) = mul(Vec3(), this, b)\n</code></pre>\n\n<p>So <code>a</code> is a <code>Vec3</code> and on the last line we got a <code>Vec3 * Quat</code></p>\n\n<p>And this second operator I'd like to use is defined at top level in this <a href=\"https://github.com/elect86/glm/blob/master/src/main/kotlin/quat/quat_operators.kt#L98\" rel=\"nofollow noreferrer\">file</a>:</p>\n\n<pre><code>operator fun Vec3.times(b: Quat) = mul(Vec3(), this, b)\n</code></pre>\n\n<p>I tried to enforce by typing:</p>\n\n<p><code>import times</code></p>\n\n<p>but among the suggested <code>times</code> there isn't the one I am looking for</p>\n\n<p>What's the problem?</p>\n"}, {"tags": ["java", "kotlin"], "comments": [{"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1488813625, "post_id": 42598134, "comment_id": 72386361, "body": "See <a href=\"http://stackoverflow.com/a/34256109/3255152\">stackoverflow.com/a/34256109/3255152</a>."}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 7658603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c01e2eb2f2f90e105fb4f49851035d97?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/7658603/joshua"}, "edited": false, "score": 2, "creation_date": 1488648018, "post_id": 42598699, "comment_id": 72328765, "body": "It looks like the mapping is <a href=\"https://github.com/JetBrains/kotlin/blob/master/core/descriptor.loader.java/src/org/jetbrains/kotlin/platform/JavaToKotlinClassMap.java\" rel=\"nofollow noreferrer\">hardcoded in the Kotlin source</a> for <code>Collection</code>, <code>Iterable</code>, <code>Iterator</code>, <code>List</code>, <code>ListIterator</code>, <code>Map</code>, <code>Map.Entry</code> and <code>Set</code>, so I am accepting this answer as correct."}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 4, "last_activity_date": 1488646822, "creation_date": 1488646822, "answer_id": 42598699, "question_id": 42598134, "link": "https://stackoverflow.com/questions/42598134/how-does-hashmap-implement-the-mutablemap-interface-in-kotlin/42598699#42598699", "title": "How does HashMap implement the MutableMap interface in Kotlin?", "body": "<p>The Kotlin in Action book says the following about <code>ArrayList</code> and <code>HashMap</code>:</p>\n\n<blockquote>\n  <p>Kotlin sees them as if they inherited from the Kotlin\u2019s <code>MutableList</code> and <code>MutableSet</code> interfaces, respectively.</p>\n</blockquote>\n\n<p>So basically yes, as you've proposed, it is a special case for these collections that's implemented somehow in the Kotlin compiler. Unfortunately, this is all the detail they provide, so if you want to know more, you probably have to dive into the source of the compiler.</p>\n\n<p>I suppose the main takeaway is that this is not a language feature that you could use yourself.</p>\n"}], "owner": {"reputation": 67, "user_id": 7658603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c01e2eb2f2f90e105fb4f49851035d97?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/7658603/joshua"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1011, "favorite_count": 0, "accepted_answer_id": 42598699, "answer_count": 1, "score": 5, "last_activity_date": 1488659831, "creation_date": 1488643734, "last_edit_date": 1488659831, "question_id": 42598134, "link": "https://stackoverflow.com/questions/42598134/how-does-hashmap-implement-the-mutablemap-interface-in-kotlin", "title": "How does HashMap implement the MutableMap interface in Kotlin?", "body": "<p>(Note: There is a potential spoiler for one of the Kotlin Koans below.)</p>\n\n<p>Given a higher order function that takes a function literal like this:</p>\n\n<pre><code>fun &lt;K, V&gt; buildMap(build: MutableMap&lt;K, V&gt;.() -&gt; Unit): Map&lt;K, V&gt; {\n    // How does java.util.HashMap satisfy the MutableMap interface?\n    // Does Kotlin support ducktyping?\n    val map = HashMap&lt;K, V&gt;()\n    map.build()\n    return map\n}\n</code></pre>\n\n<p>How is it that java.util.HashMap satisfies the <code>MutableMap</code> interface that <code>build</code> is targeted against? Does Kotlin support some sort of ducktyping or is this a special-case in the Kotlin language just for certain classes that are part of the JDK?</p>\n\n<p>I looked at <a href=\"https://kotlinlang.org/docs/reference/interfaces.html\" rel=\"nofollow noreferrer\">the Kotlin documentation on interfaces</a> and searched a bit but couldn't find anything that seemed to explain this.</p>\n"}, {"tags": ["java", "spring", "spring-boot", "kotlin"], "comments": [{"owner": {"reputation": 12817, "user_id": 1324709, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZzCz9.jpg?s=128&g=1", "display_name": "Branislav Lazic", "link": "https://stackoverflow.com/users/1324709/branislav-lazic"}, "edited": false, "score": 0, "creation_date": 1488642658, "post_id": 42597862, "comment_id": 72326907, "body": "Did you try by annotation <code>UserService</code> with <code>@Service</code>?"}, {"owner": {"reputation": 1761, "user_id": 1726359, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/1caf4235671739f4a0848dd39e63a343?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/1726359/chad"}, "reply_to_user": {"reputation": 12817, "user_id": 1324709, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZzCz9.jpg?s=128&g=1", "display_name": "Branislav Lazic", "link": "https://stackoverflow.com/users/1324709/branislav-lazic"}, "edited": false, "score": 0, "creation_date": 1488642824, "post_id": 42597862, "comment_id": 72326960, "body": "I didn&#39;t. But I declared UserService as a <code>@Bean</code> in a <code>@Configuration</code> class. Added bean declaration for clarity."}, {"owner": {"reputation": 1761, "user_id": 1726359, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/1caf4235671739f4a0848dd39e63a343?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/1726359/chad"}, "reply_to_user": {"reputation": 12817, "user_id": 1324709, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZzCz9.jpg?s=128&g=1", "display_name": "Branislav Lazic", "link": "https://stackoverflow.com/users/1324709/branislav-lazic"}, "edited": false, "score": 0, "creation_date": 1488643366, "post_id": 42597862, "comment_id": 72327153, "body": "@BranislavLazic added package structure as requested"}, {"owner": {"reputation": 93551, "user_id": 2696260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qHEzx.png?s=128&g=1", "display_name": "M. Deinum", "link": "https://stackoverflow.com/users/2696260/m-deinum"}, "edited": false, "score": 0, "creation_date": 1488722308, "post_id": 42597862, "comment_id": 72347894, "body": "Not that familiar with Kotlin but the <code>@Transactional fun</code> seems to be final. Which makes it non-proxyable and hence it will use the instances of the proxy (which are <code>null</code>) instead of the calling the actually wrapped instance. Try making the function <code>open</code>."}], "answers": [{"tags": [], "owner": {"reputation": 101, "user_id": 7898033, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uRq5u.png?s=128&g=1", "display_name": "Dummyc0m", "link": "https://stackoverflow.com/users/7898033/dummyc0m"}, "is_accepted": false, "score": 0, "last_activity_date": 1500978495, "creation_date": 1500978495, "answer_id": 45300599, "question_id": 42597862, "link": "https://stackoverflow.com/questions/42597862/bean-properties-not-null-during-initialization-become-null-during-transactional/45300599#45300599", "title": "Bean properties not null during initialization become null during @Transactional method invocation", "body": "<p>Try marking the transactional function as open.</p>\n\n<p>There is a gradle plugin for marking all classes as open:</p>\n\n<pre><code>buildscript{\n    dependencies {\n        classpath(\"org.jetbrains.kotlin:kotlin-allopen:$kotlinVersion\")\n    }\n}\napply plugin: 'kotlin-spring'\n</code></pre>\n"}], "owner": {"reputation": 1761, "user_id": 1726359, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/1caf4235671739f4a0848dd39e63a343?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/1726359/chad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 320, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1500978495, "creation_date": 1488642105, "last_edit_date": 1488670794, "question_id": 42597862, "link": "https://stackoverflow.com/questions/42597862/bean-properties-not-null-during-initialization-become-null-during-transactional", "title": "Bean properties not null during initialization become null during @Transactional method invocation", "body": "<p>I am encountering an issue where a bean's properties become null during invocation of a <code>@Transactional</code> method.</p>\n\n<ul>\n<li><code>UserService</code> is a bean declared in a <code>@Configuration</code> class</li>\n<li><code>userRepository</code> and <code>passwordService</code> are non null during initialization <code>(afterPropertiesSet)</code></li>\n<li>during invocation of registerUser (which is <code>@Transactional</code>), these properties become null</li>\n<li>these properties have non nullable types</li>\n<li>same instance/bean of UserService has been used based on prints</li>\n<li>removing <code>@Transactional</code> seems to fix the issue</li>\n<li>adding or removing <code>@EnableTransactionManagement</code> seems to do nothing</li>\n</ul>\n\n<p>Service:</p>\n\n<pre><code>open class UserService (val userRepository: UserRepository,\n                        val passwordService: PasswordService) : InitializingBean {\n\n    override fun afterPropertiesSet() {\n        println(\"### this.afterPropertiesSet\")\n        println(\"### this: \" + this)\n        println(\"### userRepository: \" + userRepository)\n        println(\"### passwordService: \" + passwordService)\n    }\n\n    @Transactional\n    fun registerUser(request: UserRegistrationRequest): User {\n        println(\"### this.registerUser\")\n        println(\"### this: \" + this)\n        println(\"### userRepository: \" + userRepository)\n        println(\"### passwordService: \" + passwordService)\n        val savedUser = this.userRepository.save(request.toUser())\n        this.passwordService.savePassword(savedUser, request.password)\n        return savedUser\n    }\n\n    private fun UserRegistrationRequest.toUser(): User { ... }\n\n}\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>@Controller\nclass UserController (val userService: UserService) : InitializingBean {\n    override fun afterPropertiesSet() {\n        println(\"### controller.afterPropertiesSet: \" + userService)\n        println(\"### user service: \" + userService)\n    }\n\n    @PostMapping(\"/users\")\n    fun registerUser(@RequestBody userDetails: UserDetailsDto): ResponseEntity&lt;UserDto&gt; {\n        println(\"### controller.registerUser: \" + userService)\n        println(\"### user service: \" + userService)\n        val registeredUser = userService.registerUser(userDetails.toUserRegistrationRequest())\n        return ResponseEntity.ok(registeredUser.toDto())\n    }\n\n    private fun UserDetailsDto.toUserRegistrationRequest(): UserRegistrationRequest { ... }\n\n    private fun User.toDto(): UserDto { ... }\n}\n</code></pre>\n\n<p>Bean declaration:</p>\n\n<pre><code>@Configuration\n@EnableTransactionManagement\nopen class ApplicationServicesConfiguration {\n\n    @Bean\n    open fun userService(userRepository: UserRepository,\n                         passwordService: PasswordService): UserService = UserService(userRepository, passwordService)\n\n    @Bean\n    open fun passwordService(passwordRepository: PasswordRepository): PasswordService = PasswordService(passwordRepository)\n\n}\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>### this.afterPropertiesSet\n### this: com.sample.mojo.user.UserService@1ab14636\n### userRepository: org.springframework.data.jpa.repository.support.SimpleJpaRepository@1961d75a\n### passwordService: com.sample.mojo.user.PasswordService@36359723\n\n### controller.afterPropertiesSet: com.sample.mojo.user.UserService@1ab14636\n### user service: com.sample.mojo.user.UserService@1ab14636\n\n### controller.registerUser: com.sample.mojo.user.UserService@1ab14636\n### user service: com.sample.mojo.user.UserService@1ab14636\n\n### this.registerUser\n### this: com.sample.mojo.user.UserService@1ab14636\n### userRepository: null\n### passwordService: null\n</code></pre>\n\n<p>Package structure</p>\n\n<pre><code>com.sample.app.Application\ncom.sample.app.ApplicationServicesConfiguration\ncom.sample.app.user.UserController\ncom.sample.app.user.UserService\ncom.sample.app.user.UserRepository\ncom.sample.app.user.PasswordService\n</code></pre>\n\n<p>Is this a Spring bug? Or a Kotlin-Spring integration quirk?</p>\n"}, {"tags": ["kotlin", "companion-object"], "comments": [{"owner": {"reputation": 5305, "user_id": 5818889, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6b8df2f6af3fd32042982001fac8407b?s=128&d=identicon&r=PG&f=1", "display_name": "glee8e", "link": "https://stackoverflow.com/users/5818889/glee8e"}, "edited": false, "score": 0, "creation_date": 1488624125, "post_id": 42594469, "comment_id": 72321151, "body": "What are you talking about? There is no companion object in <code>Vec2t</code> and the compaion object of <code>Vec2</code> doesn&#39;t look like what you have given above."}, {"owner": {"reputation": 5305, "user_id": 5818889, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6b8df2f6af3fd32042982001fac8407b?s=128&d=identicon&r=PG&f=1", "display_name": "glee8e", "link": "https://stackoverflow.com/users/5818889/glee8e"}, "edited": false, "score": 0, "creation_date": 1488624210, "post_id": 42594469, "comment_id": 72321172, "body": "I checked again and I saw your <code>length</code> is probably actually named <code>SIZE</code>."}, {"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "reply_to_user": {"reputation": 5305, "user_id": 5818889, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6b8df2f6af3fd32042982001fac8407b?s=128&d=identicon&r=PG&f=1", "display_name": "glee8e", "link": "https://stackoverflow.com/users/5818889/glee8e"}, "edited": false, "score": 0, "creation_date": 1488624989, "post_id": 42594469, "comment_id": 72321391, "body": "sorry, old code, I just pushed"}], "answers": [{"tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 6, "last_activity_date": 1488625423, "creation_date": 1488625423, "answer_id": 42595208, "question_id": 42594469, "link": "https://stackoverflow.com/questions/42594469/why-i-dont-see-companion-object-component-of-extended-class/42595208#42595208", "title": "Why I don&#39;t see companion object component of extended class?", "body": "<p>In Kotlin, a <code>companion object</code> is just a specially marked <code>object</code> inside your class. You can omit its name, and it will get the default name of <code>Companion</code>, and you also get the convenience of being able to use the <code>MyClass.myProperty</code> syntax instead of <code>MyClass.Companion.myProperty</code> to access its members. It is, however, still just a nested <code>object</code>.</p>\n\n<p>Imagine how things would work if it was a regular nested object instead of a companion:</p>\n\n<pre><code>abstract class Vec2t {\n\n    object LengthKeeper {\n        val length = 2\n    }\n\n}\n\nclass Vec2 : Vec2t()\n</code></pre>\n\n<p>You could access the <code>length</code> via <code>Vec2t.LengthKeeper.length</code>, but of course you couldn't access it as <code>Vec2.LengthKeeper.length</code>, because the <code>Vec2</code> class does not have a nested object called <code>LengthKeeper</code>.</p>\n\n<p>Marking a variable inside the companion object <code>@JvmStatic</code> does generate a static variable for <code>length</code> inside <code>Vec2t</code> in the bytecode, but you can only access that from Java, where writing the following does in fact work with your code:</p>\n\n<pre><code>Vec2 v = new Vec2();\nint length = Vec2.getLength();\n</code></pre>\n\n<p>As for solving this in Kotlin, if you really have to access the property of the base class through <code>Vec2</code> with that syntax, you'll probably have to do something like this:</p>\n\n<pre><code>class Vec2 : Vec2t() {\n\n    companion object {\n        val length get() = Vec2t.length\n    }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 361, "favorite_count": 0, "accepted_answer_id": 42595208, "answer_count": 1, "score": 3, "last_activity_date": 1488625423, "creation_date": 1488620423, "last_edit_date": 1488625021, "question_id": 42594469, "link": "https://stackoverflow.com/questions/42594469/why-i-dont-see-companion-object-component-of-extended-class", "title": "Why I don&#39;t see companion object component of extended class?", "body": "<p>I have an abstract class:</p>\n\n<p><a href=\"https://github.com/elect86/glm/blob/master/src/main/kotlin/vec/Vec2t.kt#L15\" rel=\"nofollow noreferrer\"><code>abstract class Vec2t</code></a></p>\n\n<p>and an extending class:</p>\n\n<p><a href=\"https://github.com/elect86/glm/blob/master/src/main/kotlin/vec/_2/Vec2.kt#L20\" rel=\"nofollow noreferrer\"><code>class Vec2 : Vec2t</code></a></p>\n\n<p><code>Vec2t</code> has the following <a href=\"https://github.com/elect86/glm/blob/master/src/main/kotlin/vec/Vec2t.kt#L120-L125\" rel=\"nofollow noreferrer\">companion object</a>:</p>\n\n<pre><code>companion object {\n\n    @JvmField val length = 2\n}\n</code></pre>\n\n<p>But when I type <code>Vec2.length</code>, then it's marked as unresolved reference... </p>\n\n<p>Why? What am I missing?</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "edited": false, "score": 0, "creation_date": 1488613492, "post_id": 42593498, "comment_id": 72318465, "body": "Cool. Thanks! I follow the example in <a href=\"https://antonioleiva.com/classes-kotlin/\" rel=\"nofollow noreferrer\">antonioleiva.com/classes-kotlin</a>, and got into this. I&#39;ll inform Antonio about it. Thanks!"}], "tags": [], "owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "is_accepted": true, "score": 7, "last_activity_date": 1488613197, "creation_date": 1488613197, "answer_id": 42593498, "question_id": 42593464, "link": "https://stackoverflow.com/questions/42593464/class-member-setvalue-get-called-recursively-why/42593498#42593498", "title": "Class member set(value) get called recursively... why?", "body": "<p>This is because inside the setter for <code>name</code> you are setting the <code>name</code> again, which calls the setter.</p>\n\n<p>You should use <a href=\"https://kotlinlang.org/docs/reference/properties.html#backing-fields\" rel=\"noreferrer\"><code>field</code></a> to access the backing field rather than call the setter.</p>\n\n<pre><code>field = \"Name: $value\"\n</code></pre>\n"}], "owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 251, "favorite_count": 0, "accepted_answer_id": 42593498, "answer_count": 1, "score": 2, "last_activity_date": 1488613197, "creation_date": 1488613003, "question_id": 42593464, "link": "https://stackoverflow.com/questions/42593464/class-member-setvalue-get-called-recursively-why", "title": "Class member set(value) get called recursively... why?", "body": "<p>I have a class as below</p>\n\n<pre><code>class Employee(var person: String = \"Employee\", var worksAt: String = \"California\", var mood: String = \"Happy\") {\n   var name: String = \"Name: \"\n        set(value){\n            name = \"Name: $value\"\n        }\n\n    var allString: String\n        private set\n\n    init {\n        this.allString = \"$name works at $worksAt is $mood\"\n        this.person = \"Person: \" + person!!\n        this.worksAt = \"Work at: \" + worksAt\n        this.mood = \"Mood :\" + mood\n    }\n\n    override fun toString(): String {\n        return this.name + \"\\n\" + worksAt + \"\\n\" + mood\n    }\n}\n</code></pre>\n\n<p>When I set the name</p>\n\n<pre><code>        val reaEmployee = Employee()\n        reaEmployee.name = edt_main.text.toString()\n</code></pre>\n\n<p>The name get set recursively infinitely... i.e. get <code>Name: Name: .... $value</code>...  until out of memory. What have I set incorrectly?</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 12970, "user_id": 2741273, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71f8f37ebda905a8fffeb75e91b87a89?s=128&d=identicon&r=PG&f=1", "display_name": "Francesc", "link": "https://stackoverflow.com/users/2741273/francesc"}, "edited": false, "score": 0, "creation_date": 1488665680, "post_id": 42593324, "comment_id": 72334497, "body": "Yes, that&#39;s clearly an option, but I wanted to know if there&#39;s a way to tell the compiler which properties to take into account for the auto generated methods, having to override them sort of defeats the purpose of a data class. I guess I&#39;ll have to change the constructor and do the logic on the caller side if there&#39;s no other way."}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "reply_to_user": {"reputation": 12970, "user_id": 2741273, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71f8f37ebda905a8fffeb75e91b87a89?s=128&d=identicon&r=PG&f=1", "display_name": "Francesc", "link": "https://stackoverflow.com/users/2741273/francesc"}, "edited": false, "score": 1, "creation_date": 1488697363, "post_id": 42593324, "comment_id": 72340861, "body": "There is a way to tell the compiler: by writing code in the toString() method. We do not want to come up with an alternative mini-language for describing how toString() and equals() should work when we already have a perfectly fine general-purpose language for this task."}, {"owner": {"reputation": 4427, "user_id": 4706743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64b05c3b09628ba8955d6d7a188271af?s=128&d=identicon&r=PG&f=1", "display_name": "D3xter", "link": "https://stackoverflow.com/users/4706743/d3xter"}, "reply_to_user": {"reputation": 12970, "user_id": 2741273, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71f8f37ebda905a8fffeb75e91b87a89?s=128&d=identicon&r=PG&f=1", "display_name": "Francesc", "link": "https://stackoverflow.com/users/2741273/francesc"}, "edited": false, "score": 0, "creation_date": 1488747455, "post_id": 42593324, "comment_id": 72356736, "body": "@Francesc First sentence in <a href=\"https://kotlinlang.org/docs/reference/data-classes.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/data-classes.html</a> is <i>We frequently create a class to do nothing but hold data</i>. Data class have a single purpose to store data, so only taking constructor properties into account doesn&#39;t really defeat the purpose. And if you need some logic when constructing an instance, rather use a Factory or a builder which is more flexible"}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": false, "score": 6, "last_activity_date": 1488611923, "creation_date": 1488611923, "answer_id": 42593324, "question_id": 42591941, "link": "https://stackoverflow.com/questions/42591941/kotlin-data-class-with-derived-properties/42593324#42593324", "title": "Kotlin data class with derived properties", "body": "<p>You can override the <code>toString()</code> method and provide any implementation that you need, instead of the default compiler-generated implementation.</p>\n"}, {"comments": [{"owner": {"reputation": 12970, "user_id": 2741273, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71f8f37ebda905a8fffeb75e91b87a89?s=128&d=identicon&r=PG&f=1", "display_name": "Francesc", "link": "https://stackoverflow.com/users/2741273/francesc"}, "edited": false, "score": 0, "creation_date": 1488840159, "post_id": 42627220, "comment_id": 72401571, "body": "Thanks, this is a clever solution that allows keeping a simple constructor for callers while leveraging the default toString."}], "tags": [], "owner": {"reputation": 96, "user_id": 7666746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc37ba66d1fddfccb3fa39fa58f7809d?s=128&d=identicon&r=PG&f=1", "display_name": "user7666746", "link": "https://stackoverflow.com/users/7666746/user7666746"}, "is_accepted": true, "score": 3, "last_activity_date": 1488807857, "creation_date": 1488807857, "answer_id": 42627220, "question_id": 42591941, "link": "https://stackoverflow.com/questions/42591941/kotlin-data-class-with-derived-properties/42627220#42627220", "title": "Kotlin data class with derived properties", "body": "<p>DeviceModel and DeviceStatusModel are used for the toString() because you declared them as properties through the primary constructor to do what you want you must use a secondary constructor from which you call the primary constructor in which you'll declare the properties you want to see in the toString() like this :</p>\n\n<pre><code>import kotlin.properties.Delegates\nimport kotlin.collections.MutableList\n\nconst val DEVICE_MODE_MANUAL = 10\nconst val DEVICE_MODE_AUTO = 20\nconst val DEVICE_MODE_OVERRIDE = 30\n\ndata class Device private constructor ( val name: String, val id: Int, val mode: Int, val strength: Int ) {   \n\n    constructor( deviceModel: DeviceModel, deviceStatus: DeviceStatusModel  ) : \n    this(\n        name = deviceModel.name ?: \"Unknown\",\n        id = deviceModel.id ?: -1,\n        mode = when(deviceStatus.mode) {\n            1 -&gt; DEVICE_MODE_MANUAL\n            2 -&gt; DEVICE_MODE_AUTO\n            3 -&gt; DEVICE_MODE_OVERRIDE\n            else -&gt; DEVICE_MODE_MANUAL\n        },\n        strength = deviceStatus.strength ?: 0\n    ) \n}\n\ndata class DeviceModel( val name: String, val id: Int )\n\ndata class DeviceStatusModel( val mode: Int, val strength: Int )\n\nfun main(args: Array&lt;String&gt;) {\n    val deviceModel = DeviceModel( \"Test \", 35 )\n    val deviceStatusModel = DeviceStatusModel( 1, 42 )\n    val device = Device( deviceModel, deviceStatusModel )\n    println( device )\n}\n</code></pre>\n\n<p><strong>NB</strong> : I supposed you didn't want people to instantiate your object in other way than through the DeviceModel and DeviceStatusModel so i made the primary constructor private</p>\n"}], "owner": {"reputation": 12970, "user_id": 2741273, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71f8f37ebda905a8fffeb75e91b87a89?s=128&d=identicon&r=PG&f=1", "display_name": "Francesc", "link": "https://stackoverflow.com/users/2741273/francesc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1801, "favorite_count": 0, "accepted_answer_id": 42627220, "answer_count": 2, "score": 0, "last_activity_date": 1488807857, "creation_date": 1488600237, "question_id": 42591941, "link": "https://stackoverflow.com/questions/42591941/kotlin-data-class-with-derived-properties", "title": "Kotlin data class with derived properties", "body": "<p>I have a class that is the summary of 2 classes. I made this class a data class, as follows</p>\n\n<pre><code>data class Device(private val deviceModel: DeviceModel, private val deviceStatus: DeviceStatusModel) {\n    val name = deviceModel.name ?: \"Unknown\"\n    val id = deviceModel.id ?: -1\n    val mode = when(deviceStatus.mode) {\n        1 -&gt; DEVICE_MODE_MANUAL\n        2 -&gt; DEVICE_MODE_AUTO\n        3 -&gt; DEVICE_MODE_OVERRIDE\n        else -&gt; DEVICE_MODE_MANUAL\n    }\n    val strength = deviceStatus.strength ?: 0\n}\n</code></pre>\n\n<p>However when I print this class it does not print the name, id, mode and strength properties, it prints the device model and device status. Is there a way to have the class generate the toString based on the derived properties as opposed to the constructor ones?</p>\n"}, {"tags": ["android", "android-studio", "kotlin", "dagger-2", "android-databinding"], "answers": [{"comments": [{"owner": {"reputation": 2128, "user_id": 2496348, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/f5b4247efe9f1acf137af74d02778ead?s=128&d=identicon&r=PG", "display_name": "Khairil Ushan", "link": "https://stackoverflow.com/users/2496348/khairil-ushan"}, "edited": false, "score": 0, "creation_date": 1488568143, "post_id": 42586503, "comment_id": 72305365, "body": "Hi @Rene thank you so much for you answer, but after trying to apply your suggestion i got another error. you can look the update on my post. thanks"}, {"owner": {"reputation": 3942, "user_id": 16352, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/46ea9ec376def7e1a23cb681ed8fa8f9?s=128&d=identicon&r=PG", "display_name": "Rene", "link": "https://stackoverflow.com/users/16352/rene"}, "reply_to_user": {"reputation": 2128, "user_id": 2496348, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/f5b4247efe9f1acf137af74d02778ead?s=128&d=identicon&r=PG", "display_name": "Khairil Ushan", "link": "https://stackoverflow.com/users/2496348/khairil-ushan"}, "edited": false, "score": 0, "creation_date": 1488576534, "post_id": 42586503, "comment_id": 72309686, "body": "You can keep other plugins like the extension, kapt does not replace that one."}, {"owner": {"reputation": 2128, "user_id": 2496348, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/f5b4247efe9f1acf137af74d02778ead?s=128&d=identicon&r=PG", "display_name": "Khairil Ushan", "link": "https://stackoverflow.com/users/2496348/khairil-ushan"}, "edited": false, "score": 0, "creation_date": 1488595125, "post_id": 42586503, "comment_id": 72314854, "body": "Hi @Rene, actually I use Dagger2 also in my project, but since I don&#39;t think it&#39;s related with the issue, so I don&#39;t write it in my question. But turns out commenting all Dagger2 related in my project and app&#39;s level build.gradle fix the issue. hmm :/"}], "tags": [], "owner": {"reputation": 3942, "user_id": 16352, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/46ea9ec376def7e1a23cb681ed8fa8f9?s=128&d=identicon&r=PG", "display_name": "Rene", "link": "https://stackoverflow.com/users/16352/rene"}, "is_accepted": false, "score": 4, "last_activity_date": 1488577050, "last_edit_date": 1488577050, "creation_date": 1488567530, "answer_id": 42586503, "question_id": 42585880, "link": "https://stackoverflow.com/questions/42585880/errorannotation-processor-gen-annotationprocessorwrapper-debug-android-datab/42586503#42586503", "title": "Error:Annotation processor &#39;__gen.AnnotationProcessorWrapper_debug_android_databinding_annotationprocessor_ProcessDataBinding&#39; not found", "body": "<p>Starting with Kotlin 1.1 I've had to switch to the newer Kotlin annotation processor.</p>\n\n<p>Apply it like so:</p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\napply plugin: 'kotlin-kapt'\n</code></pre>\n\n<p>I've found it first mentioned in the 1.0.6 release at <a href=\"https://blog.jetbrains.com/kotlin/2016/12/kotlin-1-0-6-is-here/\" rel=\"nofollow noreferrer\">kotlin-1-0-6-is-here</a></p>\n"}, {"tags": [], "owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "is_accepted": false, "score": 0, "last_activity_date": 1489017004, "creation_date": 1489017004, "answer_id": 42684158, "question_id": 42585880, "link": "https://stackoverflow.com/questions/42585880/errorannotation-processor-gen-annotationprocessorwrapper-debug-android-datab/42684158#42684158", "title": "Error:Annotation processor &#39;__gen.AnnotationProcessorWrapper_debug_android_databinding_annotationprocessor_ProcessDataBinding&#39; not found", "body": "<ol>\n<li>Remove <code>android-apt</code> plugin from build script classpath.</li>\n<li>Use <code>kapt</code> instead of <code>apt</code>/<code>annotationProcessor</code> in your dependency configuration.</li>\n<li>Add <code>kapt 'com.android.databinding:compiler:2.3.0'</code> to your dependencies because Kotlin + Android Build Plugin 2.3.0 with databinding combo is broken.</li>\n</ol>\n\n<p>What I think happens is that <code>kapt</code> is replacing annotation processor and not picking up <code>annotationProcessor</code> configurations which is what databinding uses instead of <code>android-apt</code> plugin since 2.3.0.</p>\n\n<p>See also: <a href=\"https://code.google.com/p/android/issues/detail?id=228983\" rel=\"nofollow noreferrer\">https://code.google.com/p/android/issues/detail?id=228983</a></p>\n\n<hr>\n\n<p>If you didn't use Kotlin:</p>\n\n<ol>\n<li>Remove <code>android-apt</code> plugin from build script classpath.</li>\n<li>Use <code>annotationProcessor</code> instead of <code>apt</code> in your dependency configuration.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 2128, "user_id": 2496348, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/f5b4247efe9f1acf137af74d02778ead?s=128&d=identicon&r=PG", "display_name": "Khairil Ushan", "link": "https://stackoverflow.com/users/2496348/khairil-ushan"}, "edited": false, "score": 0, "creation_date": 1489297172, "post_id": 42736014, "comment_id": 72605612, "body": "Hey there, Since i succeeded to make it work with 2.3.0, maybe you can check my updated answer, I just copy-paste my build.gradle file to the bottom part of my question. Cheers"}, {"owner": {"reputation": 2128, "user_id": 2496348, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/f5b4247efe9f1acf137af74d02778ead?s=128&d=identicon&r=PG", "display_name": "Khairil Ushan", "link": "https://stackoverflow.com/users/2496348/khairil-ushan"}, "edited": false, "score": 0, "creation_date": 1489333623, "post_id": 42736014, "comment_id": 72615432, "body": "Yes, Im using DataBinding."}, {"owner": {"reputation": 294, "user_id": 4987078, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6atMrGJKga8/AAAAAAAAAAI/AAAAAAAAADY/WshBcns_xe4/photo.jpg?sz=128", "display_name": "Flo We", "link": "https://stackoverflow.com/users/4987078/flo-we"}, "reply_to_user": {"reputation": 2128, "user_id": 2496348, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/f5b4247efe9f1acf137af74d02778ead?s=128&d=identicon&r=PG", "display_name": "Khairil Ushan", "link": "https://stackoverflow.com/users/2496348/khairil-ushan"}, "edited": false, "score": 0, "creation_date": 1489400550, "post_id": 42736014, "comment_id": 72637827, "body": "okay so, the only difference i see is im using <code>kapt &#39;com.android.databinding:compiler:2.2.3&#39;</code>, while you&#39;re using the same version as your gradle plugin version. That might actually be it. I&#39;ll give it a try and report back tonight"}], "tags": [], "owner": {"reputation": 294, "user_id": 4987078, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6atMrGJKga8/AAAAAAAAAAI/AAAAAAAAADY/WshBcns_xe4/photo.jpg?sz=128", "display_name": "Flo We", "link": "https://stackoverflow.com/users/4987078/flo-we"}, "is_accepted": false, "score": 0, "last_activity_date": 1489240252, "creation_date": 1489240252, "answer_id": 42736014, "question_id": 42585880, "link": "https://stackoverflow.com/questions/42585880/errorannotation-processor-gen-annotationprocessorwrapper-debug-android-datab/42736014#42736014", "title": "Error:Annotation processor &#39;__gen.AnnotationProcessorWrapper_debug_android_databinding_annotationprocessor_ProcessDataBinding&#39; not found", "body": "<p>ran into the same issue today when upgrading to Kotlin 1.1.</p>\n\n<p>\"fixed\" it by rolling back to gradle 2.2.3</p>\n\n<p>I wasn't using apt in my project at all, might be related to the databinding library.\nI use kapt for realm, butterknife, dagger and databinding.</p>\n"}], "owner": {"reputation": 2128, "user_id": 2496348, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/f5b4247efe9f1acf137af74d02778ead?s=128&d=identicon&r=PG", "display_name": "Khairil Ushan", "link": "https://stackoverflow.com/users/2496348/khairil-ushan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2253, "favorite_count": 1, "answer_count": 3, "score": 3, "last_activity_date": 1489297052, "creation_date": 1488565063, "last_edit_date": 1489297052, "question_id": 42585880, "link": "https://stackoverflow.com/questions/42585880/errorannotation-processor-gen-annotationprocessorwrapper-debug-android-datab", "title": "Error:Annotation processor &#39;__gen.AnnotationProcessorWrapper_debug_android_databinding_annotationprocessor_ProcessDataBinding&#39; not found", "body": "<p>So, I'm trying to build my Android project with Kotlin and add Android DataBinding library into it. In Android Studio 2.2.3 there was no problem with it. But after update to the latest Android Studio version (2.3.0) I got this error when try to run the app.</p>\n\n<p><a href=\"https://i.stack.imgur.com/hgksF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hgksF.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here is my Project's build.gradle</p>\n\n<pre><code>buildscript {\n\n    ext.kotlinVersion = '1.1.0'\n    ext.androidGradlePluginVersion = '2.3.0'\n\n    ...\n\n    dependencies {\n        classpath \"com.android.tools.build:gradle:${androidGradlePluginVersion}\"\n\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlinVersion\"\n\n        classpath 'com.neenbedankt.gradle.plugins:android-apt:1.8'\n    }\n}\n\n...\n</code></pre>\n\n<p>And here is my App's build.gradle</p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'com.neenbedankt.android-apt'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\n\nandroid {\n    compileSdkVersion 25\n    buildToolsVersion \"25.0.2\"\n\n    ...\n\n    packagingOptions {\n        exclude 'META-INF/rxjava.properties'\n    }\n    sourceSets {\n        main.java.srcDirs += 'src/main/kotlin'\n    }\n    dataBinding.enabled = true\n}\n\ndependencies {\n\n    ...\n    compile \"com.google.dagger:dagger:${daggerVersion}\"\n    compile \"com.google.dagger:dagger-compiler:${daggerVersion}\"\n    provided 'javax.annotation:jsr250-api:1.0'\n    kapt \"com.android.databinding:compiler:$androidGradlePluginVersion\"\n    compile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlinVersion\"\n}\n</code></pre>\n\n<p>Is there something that I have to updated to make Kotlin work with Android DataBinding library? Please help. Thanks in advance.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Based on @Rene answer, I tried to replace <strong>kotlin-android-extensions</strong> with <strong>kotlin-kapt</strong> , But when I tried to sync gradle I got another error. </p>\n\n<p><a href=\"https://i.stack.imgur.com/dkJeI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dkJeI.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/4fy66.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4fy66.png\" alt=\"enter image description here\"></a></p>\n\n<p>Anyone what's wrong from this error? Thanks</p>\n\n<p><strong>FIX THAT WORKS:</strong></p>\n\n<p>Turns out I just need to update some line related with Dagger2 in my gradle. I REMOVE this line below from my Project's build.gradle file.</p>\n\n<pre><code>classpath 'com.neenbedankt.gradle.plugins:android-apt:1.8'\n</code></pre>\n\n<p>And update the dependencies related Dagger2 in my app's build.gradle file to be like this.</p>\n\n<pre><code>compile \"com.google.dagger:dagger:${daggerVersion}\"\nkapt \"com.google.dagger:dagger-compiler:${daggerVersion}\"\nprovided 'org.glassfish:javax.annotation:10.0-b28'\n</code></pre>\n\n<p>I got this settings from this <a href=\"http://www.andevcon.com/news/keddit-part-10-kotlin-dagger-2-dependency-injection\" rel=\"nofollow noreferrer\">article</a></p>\n\n<p>Here is my build.gradle content that WORKS for me. </p>\n\n<p>Project's build.gradle</p>\n\n<pre><code>buildscript {\n    ext.kotlinVersion = '1.1.0'\n    ext.androidGradlePluginVersion = '2.3.0'\n\n    repositories {\n        jcenter()\n    }\n    dependencies {\n        classpath \"com.android.tools.build:gradle:${androidGradlePluginVersion}\"\n\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlinVersion\"\n    }\n}\n\nallprojects {\n    repositories {\n        jcenter()\n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n\n<p>app's build.gradle</p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\n\nandroid {\n    compileSdkVersion 25\n    buildToolsVersion \"25.0.2\"\n    dexOptions {\n        maxProcessCount 2\n        javaMaxHeapSize \"2g\"\n    }\n    defaultConfig {\n        applicationId \"my.application.id\"\n        minSdkVersion 16\n        targetSdkVersion 25\n        versionCode 1\n        versionName \"1.0\"\n        multiDexEnabled true\n        testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n    packagingOptions {\n        exclude 'META-INF/rxjava.properties'\n    }\n    sourceSets {\n        main.java.srcDirs += 'src/main/kotlin'\n    }\n    dataBinding.enabled = true\n}\n\nkapt {\n    generateStubs = true\n}\n\next {\n    supportLibVersion = '25.2.0'\n    retrofitVersion = '2.2.0'\n    daggerVersion = '2.7'\n    googleServiceVersion = '10.2.0'\n    rxJavaVersion = '2.0.6'\n    rxAndroidVersion = '2.0.1'\n    glideVersion = '3.7.0'\n    constraintLayoutVersion = '1.0.1'\n}\n\ndependencies {\n    compile fileTree(include: ['*.jar'], dir: 'libs')\n    androidTestCompile('com.android.support.test.espresso:espresso-core:2.2.2', {\n        exclude group: 'com.android.support', module: 'support-annotations'\n    })\n    testCompile 'junit:junit:4.12'\n\n    compile \"com.squareup.retrofit2:retrofit:${retrofitVersion}\"\n    compile \"com.squareup.retrofit2:converter-gson:${retrofitVersion}\"\n    compile \"com.squareup.retrofit2:adapter-rxjava:${retrofitVersion}\"\n    compile 'com.squareup.okhttp3:logging-interceptor:3.3.0'\n\n    compile \"com.android.support:support-compat:${supportLibVersion}\"\n    compile \"com.android.support:support-core-utils:${supportLibVersion}\"\n    compile \"com.android.support:support-core-ui:${supportLibVersion}\"\n\n    compile \"com.android.support:design:${supportLibVersion}\"\n    compile \"com.android.support:appcompat-v7:${supportLibVersion}\"\n    compile \"com.android.support:recyclerview-v7:${supportLibVersion}\"\n    compile \"com.android.support:cardview-v7:${supportLibVersion}\"\n    compile \"com.android.support.constraint:constraint-layout:${constraintLayoutVersion}\"\n\n    compile \"com.google.dagger:dagger:${daggerVersion}\"\n    kapt \"com.google.dagger:dagger-compiler:${daggerVersion}\"\n    provided 'org.glassfish:javax.annotation:10.0-b28'\n\n    compile 'com.android.support:multidex:1.0.1'\n\n    compile('com.mikepenz:fastadapter:1.8.2@aar') {\n        transitive = true\n    }\n    compile 'com.mikepenz:fastadapter-extensions:1.8.0@aar'\n    compile 'com.mikepenz:materialize:1.0.0@aar'\n\n\n    compile \"com.google.android.gms:play-services-location:${googleServiceVersion}\"\n    compile \"com.google.android.gms:play-services-maps:${googleServiceVersion}\"\n\n    compile \"io.reactivex.rxjava2:rxjava:${rxJavaVersion}\"\n    compile \"io.reactivex.rxjava2:rxandroid:${rxAndroidVersion}\"\n\n    compile \"com.github.bumptech.glide:glide:${glideVersion}\"\n\n    kapt \"com.android.databinding:compiler:$androidGradlePluginVersion\"\n    compile \"org.jetbrains.kotlin:kotlin-stdlib-jre7:$kotlinVersion\"\n\n    compile 'de.hdodenhof:circleimageview:2.1.0'\n}\n\nrepositories {\n    mavenCentral()\n}\n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": ["gradle", "kotlin"], "comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1488548677, "post_id": 42580494, "comment_id": 72293454, "body": "Will it work if you change <code>apply plugin: org.jetbrains.kotlin.gradle.plugin.KotlinPluginWrapper </code> to <code>apply plugin: &#39;kotlin&#39;</code>?"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 1, "creation_date": 1488549377, "post_id": 42580494, "comment_id": 72293907, "body": "Also, it looks similar to this issue: <a href=\"https://youtrack.jetbrains.com/issue/KT-16580\" rel=\"nofollow noreferrer\">KT-16580</a>"}, {"owner": {"reputation": 98, "user_id": 3878492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b9fe738173fd34c5af04df0ef5da83d?s=128&d=identicon&r=PG", "display_name": "Jos&#233; Carlos", "link": "https://stackoverflow.com/users/3878492/jos%c3%a9-carlos"}, "reply_to_user": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 1, "creation_date": 1488551347, "post_id": 42580494, "comment_id": 72295244, "body": "@hotkey It won&#39;t work since this is a &quot;shared&quot; file that&#39;s being applied by the actual buildscripts. It&#39;s a known Gradle issue: <a href=\"https://discuss.gradle.org/t/how-do-i-apply-a-plugin-to-a-project-from-a-shared-applied-gradle-file/7508/2\" rel=\"nofollow noreferrer\">discuss.gradle.org/t/&hellip;</a>"}, {"owner": {"reputation": 15009, "user_id": 1313268, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/65NwV.jpg?s=128&g=1", "display_name": "CorayThan", "link": "https://stackoverflow.com/users/1313268/coraythan"}, "edited": false, "score": 0, "creation_date": 1489430754, "post_id": 42580494, "comment_id": 72657771, "body": "@Jos&#233;Carlos I think hotkey is correct. The exact same configuration works in <code>kotlin-gradle-plugin:1.0.6</code>, so this isn&#39;t an issue with how the plugin is declared."}, {"owner": {"reputation": 98, "user_id": 3878492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b9fe738173fd34c5af04df0ef5da83d?s=128&d=identicon&r=PG", "display_name": "Jos&#233; Carlos", "link": "https://stackoverflow.com/users/3878492/jos%c3%a9-carlos"}, "reply_to_user": {"reputation": 15009, "user_id": 1313268, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/65NwV.jpg?s=128&g=1", "display_name": "CorayThan", "link": "https://stackoverflow.com/users/1313268/coraythan"}, "edited": false, "score": 0, "creation_date": 1489586125, "post_id": 42580494, "comment_id": 72735675, "body": "@CorayThan did you mean the issue or the apply call?"}, {"owner": {"reputation": 15009, "user_id": 1313268, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/65NwV.jpg?s=128&g=1", "display_name": "CorayThan", "link": "https://stackoverflow.com/users/1313268/coraythan"}, "edited": false, "score": 0, "creation_date": 1489602882, "post_id": 42580494, "comment_id": 72747787, "body": "@Jos&#233;Carlos The issue. We already use <code>apply plugin: &#39;kotlin&#39;</code> although via our own wrapper plugin to add KotlinLint."}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 1, "creation_date": 1494506690, "post_id": 42580494, "comment_id": 74864685, "body": "The issue I mentioned above (<a href=\"https://youtrack.jetbrains.com/issue/KT-16580\" rel=\"nofollow noreferrer\">KT-16580</a>) has been fixed in the 1.1.2 release. Could you please check that it works now?"}, {"owner": {"reputation": 98, "user_id": 3878492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b9fe738173fd34c5af04df0ef5da83d?s=128&d=identicon&r=PG", "display_name": "Jos&#233; Carlos", "link": "https://stackoverflow.com/users/3878492/jos%c3%a9-carlos"}, "reply_to_user": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1494617536, "post_id": 42580494, "comment_id": 74923230, "body": "@hotkey the plugin works as expected at 1.1.2. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 98, "user_id": 3878492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b9fe738173fd34c5af04df0ef5da83d?s=128&d=identicon&r=PG", "display_name": "Jos&#233; Carlos", "link": "https://stackoverflow.com/users/3878492/jos%c3%a9-carlos"}, "is_accepted": true, "score": 1, "last_activity_date": 1494617744, "creation_date": 1494617744, "answer_id": 43945263, "question_id": 42580494, "link": "https://stackoverflow.com/questions/42580494/kotlin-compiler-not-found-using-gradle-plugin/43945263#43945263", "title": "Kotlin compiler not found using Gradle plugin", "body": "<p>It turned out to be a bug with the Gradle plugin. As pointed out by hotkeys' comment, updating to v1.1.2 fixes it.</p>\n"}], "owner": {"reputation": 98, "user_id": 3878492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b9fe738173fd34c5af04df0ef5da83d?s=128&d=identicon&r=PG", "display_name": "Jos&#233; Carlos", "link": "https://stackoverflow.com/users/3878492/jos%c3%a9-carlos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1479, "favorite_count": 1, "accepted_answer_id": 43945263, "answer_count": 1, "score": 3, "last_activity_date": 1494617744, "creation_date": 1488548532, "question_id": 42580494, "link": "https://stackoverflow.com/questions/42580494/kotlin-compiler-not-found-using-gradle-plugin", "title": "Kotlin compiler not found using Gradle plugin", "body": "<p>I'm trying to upgrade some Gradle projects from Kotlin 1.0.6 to its latest version (1.1.0). However, whenever it reaches the <code>compileKotlin</code> task it fails:</p>\n\n<pre><code>:kiwi-common-kotlin:compileKotlin FAILED\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':kiwi-common-kotlin:compileKotlin'.\n&gt; Could not find Kotlin Compiler jar. Please specify compileKotlin.compilerJarFile\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.\n\nBUILD FAILED\n</code></pre>\n\n<p>The project itself is divided in a bunch of subprojects. To avoid dupes, we have a separate file with the Kotlin definitions and import it on the projects using it:</p>\n\n<p><strong>File:</strong> gradle/kotlin.gradle</p>\n\n<pre><code>buildscript {\n\n    repositories {\n        mavenCentral()\n    }\n\n    dependencies {\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlinVersion\"\n    }\n\n}\n\napply plugin: org.jetbrains.kotlin.gradle.plugin.KotlinPluginWrapper\n\ncompileKotlin {\n    kotlinOptions.jvmTarget = \"1.6\"\n}\n</code></pre>\n\n<p>And we import it in the subprojects like this:</p>\n\n<pre><code>apply from: \"$rootDir/gradle/kotlin.gradle\"\n</code></pre>\n\n<p>Since we previously tried the early preview releases and it worked seamlessly, I changed the version a couple times to see in which version the plugin broke. It turns out it works up to 1.1-M03; beginning at 1.1-M04 it shows the exact same error as in the 1.1.0 release.</p>\n\n<p>We're using Gradle 2.10 in the project. Can you help me figure out whether it is a problem in our configuration? or a known issue with the Kotlin plugin itself?</p>\n"}, {"tags": ["java", "intellij-idea", "kotlin"], "comments": [{"owner": {"reputation": 5618, "user_id": 4681060, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100002889988419/picture?type=large", "display_name": "Krzysztof Cichocki", "link": "https://stackoverflow.com/users/4681060/krzysztof-cichocki"}, "edited": false, "score": 0, "creation_date": 1488531025, "post_id": 42571812, "comment_id": 72281733, "body": "That&#39;s why it is comment"}], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 7665867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/255d411e0b2b051a0d07a1198557ec20?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Petrov", "link": "https://stackoverflow.com/users/7665867/dmitry-petrov"}, "is_accepted": true, "score": 2, "last_activity_date": 1488797173, "creation_date": 1488797173, "answer_id": 42623565, "question_id": 42571812, "link": "https://stackoverflow.com/questions/42571812/unsupportedoperationexception-while-building-a-kotlin-project-in-idea/42623565#42623565", "title": "UnsupportedOperationException while building a Kotlin project in Idea", "body": "<p>In your example above, <code>client.execute(req)</code> returns <code>HttpResponse</code>, which is not a sub-type of <code>CloseableHttpResponse</code>. So, type mismatch error is correct. Either you should use <code>CloseableHttpClient</code> here, or cast <code>client.execute(req)</code> to <code>CloseableHttpResponse</code>. </p>\n\n<p>I couldn't reproduce <code>KotlinFrontEndException</code> from your example. From the stack trace provided I can deduce that something wrong happened with \"SAM adapters\" - that is, when you use a Kotlin lambda in a Java method call that accepts single abstract method (SAM) interface. \nPlease, file a bug here if the problem still occurs: <a href=\"http://kotl.in/issue\" rel=\"nofollow noreferrer\">http://kotl.in/issue</a></p>\n"}], "owner": {"reputation": 13167, "user_id": 399457, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6a6ed435a024926ffb41d1ad84b3b1f5?s=128&d=identicon&r=PG", "display_name": "Mentiflectax", "link": "https://stackoverflow.com/users/399457/mentiflectax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 615, "favorite_count": 0, "accepted_answer_id": 42623565, "answer_count": 1, "score": 1, "last_activity_date": 1488797173, "creation_date": 1488521308, "last_edit_date": 1488541663, "question_id": 42571812, "link": "https://stackoverflow.com/questions/42571812/unsupportedoperationexception-while-building-a-kotlin-project-in-idea", "title": "UnsupportedOperationException while building a Kotlin project in Idea", "body": "<p>When I try to build my Kotlin project I get the following <a href=\"https://gist.github.com/dpisarenko/72d7c1263adace5248bcbd43dee80746\" rel=\"nofollow noreferrer\">error</a> in Idea:</p>\n\n<pre><code>Error:Kotlin: [Internal Error] org.jetbrains.kotlin.util.KotlinFrontEndException: Exception while analyzing expression at (60,19) in E:/altruix-is/src/main/kotlin/com/mycompany/myproduct/capsulecrm/CapsuleCrmSubsystem.kt:\nclient.execute(req)\n\n[...]\n\nCaused by: java.lang.UnsupportedOperationException: doSubstitute with no original should not be called for synthetic extension\n    at org.jetbrains.kotlin.synthetic.SamAdapterFunctionsScope$MyFunctionDescriptor.doSubstitute(SamAdapterFunctionsScope.kt:165)\n    at org.jetbrains.kotlin.descriptors.impl.FunctionDescriptorImpl$CopyConfiguration.build(FunctionDescriptorImpl.java:553)\n    at org.jetbrains.kotlin.load.java.ErasedOverridabilityCondition.isOverridable(ErasedOverridabilityCondition.kt:47)\n</code></pre>\n\n<p>The error seems to occur in calls</p>\n\n<pre><code>res = client.execute(req)\n</code></pre>\n\n<p>where <code>client</code> is Apache HttpClient.</p>\n\n<p><a href=\"https://i.stack.imgur.com/pjBuN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pjBuN.png\" alt=\"Screenshot\"></a></p>\n\n<p>The source file, where this occurs can be found <a href=\"https://gist.github.com/dpisarenko/6ddcf5b29c6cbed10528501ff4599986\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>I submitted the bug report to JetBrains, but I need to work further on the project and therefore a work around. Note that until yesterday everything worked fine. Yesterday I upgraded the Kotlin plugin to the most recent version, maybe that's the problem.</p>\n\n<p>How can I avoid the error above?</p>\n\n<p><strong>Update 1 (03.03.2017 14:46 MSK):</strong></p>\n\n<p>This doesn't work:</p>\n\n<pre><code>open fun addNote(note: String, compId: Long): ValidationResult {\n    val client = httpClient\n    if (client == null) {\n        return ValidationResult(false, \"Internal error\")\n    }\n\n    var res: CloseableHttpResponse? = null\n    var req: HttpUriRequest?\n    try {\n        req = composeAddNoteRequest(note, compId)\n        res = client.execute(req)\n        if (res.statusLine.statusCode != 201) {\n            logger.error(\"addNote(note='$note', compId=$compId): Wrong status code ${res.statusLine.statusCode}\")\n            return ValidationResult(false, \"Wrong status code (CRM interaction)\")\n        }\n        return ValidationResult(true, \"\")\n    }\n    catch (throwable: Throwable) {\n        logger.error(\"addNote(note='$note', compId=$compId)\", throwable)\n        return ValidationResult(false, \"Database error\")\n    } finally {\n        close(res)\n    }\n    return ValidationResult(false, \"Internal logic error\")\n}\n</code></pre>\n\n<p>This works (difference is in the second line from the top):</p>\n\n<pre><code>open fun addNote(note: String, compId: Long): ValidationResult {\n    val client = httpClient as CloseableHttpClient // Change\n    if (client == null) {\n        return ValidationResult(false, \"Internal error\")\n    }\n\n    var res: CloseableHttpResponse? = null\n    var req: HttpUriRequest?\n    try {\n        req = composeAddNoteRequest(note, compId)\n        res = client.execute(req)\n        if (res.statusLine.statusCode != 201) {\n            logger.error(\"addNote(note='$note', compId=$compId): Wrong status code ${res.statusLine.statusCode}\")\n            return ValidationResult(false, \"Wrong status code (CRM interaction)\")\n        }\n        return ValidationResult(true, \"\")\n    }\n    catch (throwable: Throwable) {\n        logger.error(\"addNote(note='$note', compId=$compId)\", throwable)\n        return ValidationResult(false, \"Database error\")\n    } finally {\n        close(res)\n    }\n    return ValidationResult(false, \"Internal logic error\")\n}\n</code></pre>\n"}, {"tags": ["java", "classloader", "kotlin"], "comments": [{"owner": {"reputation": 67242, "user_id": 1189885, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/DLHqU.png?s=128&g=1", "display_name": "chrylis -cautiouslyoptimistic-", "link": "https://stackoverflow.com/users/1189885/chrylis-cautiouslyoptimistic"}, "edited": false, "score": 0, "creation_date": 1488519945, "post_id": 42571324, "comment_id": 72276468, "body": "What is the value of <code>this.javaClass</code>?"}, {"owner": {"reputation": 7367, "user_id": 1742973, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6ea28ba189bf64baba86a9afd6efc257?s=128&d=identicon&r=PG", "display_name": "Matias Elorriaga", "link": "https://stackoverflow.com/users/1742973/matias-elorriaga"}, "reply_to_user": {"reputation": 67242, "user_id": 1189885, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/DLHqU.png?s=128&g=1", "display_name": "chrylis -cautiouslyoptimistic-", "link": "https://stackoverflow.com/users/1189885/chrylis-cautiouslyoptimistic"}, "edited": false, "score": 0, "creation_date": 1488520185, "post_id": 42571324, "comment_id": 72276541, "body": "I&#39;ve edited my question."}, {"owner": {"reputation": 67242, "user_id": 1189885, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/DLHqU.png?s=128&g=1", "display_name": "chrylis -cautiouslyoptimistic-", "link": "https://stackoverflow.com/users/1189885/chrylis-cautiouslyoptimistic"}, "edited": false, "score": 0, "creation_date": 1488520350, "post_id": 42571324, "comment_id": 72276604, "body": "Are you getting the error at runtime or compile-time?"}, {"owner": {"reputation": 7367, "user_id": 1742973, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6ea28ba189bf64baba86a9afd6efc257?s=128&d=identicon&r=PG", "display_name": "Matias Elorriaga", "link": "https://stackoverflow.com/users/1742973/matias-elorriaga"}, "reply_to_user": {"reputation": 67242, "user_id": 1189885, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/DLHqU.png?s=128&g=1", "display_name": "chrylis -cautiouslyoptimistic-", "link": "https://stackoverflow.com/users/1189885/chrylis-cautiouslyoptimistic"}, "edited": false, "score": 0, "creation_date": 1488520414, "post_id": 42571324, "comment_id": 72276621, "body": "at runtime, I debugged and <code>javaClass</code> is not null, but <code>javaClass.classLoader</code> is"}, {"owner": {"reputation": 67242, "user_id": 1189885, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/DLHqU.png?s=128&g=1", "display_name": "chrylis -cautiouslyoptimistic-", "link": "https://stackoverflow.com/users/1189885/chrylis-cautiouslyoptimistic"}, "edited": false, "score": 0, "creation_date": 1488520502, "post_id": 42571324, "comment_id": 72276663, "body": "Oh, Kotlin. What if you explicitly use <code>getClassLoader()</code>? Shouldn&#39;t be different, but I don&#39;t know what sort of access bytecode the Kotlin compiler is emitting. If <code>getClassLoader()</code> is non-null, looks like a compiler bug. If it <i>is</i> null, post the value of <code>javaClass</code>."}, {"owner": {"reputation": 7367, "user_id": 1742973, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6ea28ba189bf64baba86a9afd6efc257?s=128&d=identicon&r=PG", "display_name": "Matias Elorriaga", "link": "https://stackoverflow.com/users/1742973/matias-elorriaga"}, "reply_to_user": {"reputation": 67242, "user_id": 1189885, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/DLHqU.png?s=128&g=1", "display_name": "chrylis -cautiouslyoptimistic-", "link": "https://stackoverflow.com/users/1189885/chrylis-cautiouslyoptimistic"}, "edited": false, "score": 0, "creation_date": 1488521002, "post_id": 42571324, "comment_id": 72276850, "body": "<code>javaClass</code> is null.. I added two screenshots."}], "answers": [{"comments": [{"owner": {"reputation": 17430, "user_id": 355438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb132c7de803cf864996a922a073e5f2?s=128&d=identicon&r=PG", "display_name": "Lu55", "link": "https://stackoverflow.com/users/355438/lu55"}, "edited": false, "score": 0, "creation_date": 1558563704, "post_id": 42576372, "comment_id": 99147738, "body": "Brief yet demonstrative explanation of explicit receivers: <a href=\"https://kotlinlang.org/docs/reference/this-expressions.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/this-expressions.html</a>"}], "tags": [], "owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "is_accepted": true, "score": 17, "last_activity_date": 1488536743, "creation_date": 1488536743, "answer_id": 42576372, "question_id": 42571324, "link": "https://stackoverflow.com/questions/42571324/kotlin-myclassclass-java-vs-this-javaclass/42576372#42576372", "title": "Kotlin: MyClass::class.java vs this.javaClass", "body": "<p>If you invoke <code>javaClass</code> inside a lambda passed to <a href=\"http://kotlinlang.org/api/latest/jvm/stdlib/kotlin/apply.html\" rel=\"noreferrer\"><code>apply</code></a>, it's called on the <em>implicit receiver</em> of that lambda. Since <code>apply</code> turns its own receiver (<code>Properties()</code> in this case) into the implicit receiver of the lambda, you're effectively getting the Java class of the <code>Properties</code> object you've created. This is of course different from the Java class of <code>ObjectFactory</code> you're getting with <code>ObjectFactory::class.java</code>.</p>\n\n<p>For a very thorough explanation of how implicit receivers work in Kotlin, you can read <a href=\"https://github.com/JetBrains/kotlin/blob/master/spec-docs/NameResolution.adoc#implicit-and-explicit-receivers\" rel=\"noreferrer\">this spec document</a>.</p>\n"}], "owner": {"reputation": 7367, "user_id": 1742973, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6ea28ba189bf64baba86a9afd6efc257?s=128&d=identicon&r=PG", "display_name": "Matias Elorriaga", "link": "https://stackoverflow.com/users/1742973/matias-elorriaga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9224, "favorite_count": 3, "accepted_answer_id": 42576372, "answer_count": 1, "score": 26, "last_activity_date": 1488536743, "creation_date": 1488518853, "last_edit_date": 1488520971, "question_id": 42571324, "link": "https://stackoverflow.com/questions/42571324/kotlin-myclassclass-java-vs-this-javaclass", "title": "Kotlin: MyClass::class.java vs this.javaClass", "body": "<p>I'm migrating a project to Kotlin, and this:</p>\n\n<pre><code>public static Properties provideProperties(String propertiesFileName) {\n    Properties properties = new Properties();\n    InputStream inputStream = null;\n    try {\n        inputStream = ObjectFactory.class.getClassLoader().getResourceAsStream(propertiesFileName);\n        properties.load(inputStream);\n        return properties;\n    } catch (IOException e) {\n        e.printStackTrace();\n    } finally {\n        if (inputStream != null) {\n            try {\n                inputStream.close();\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n    return null;\n}\n</code></pre>\n\n<p>is now:</p>\n\n<pre><code>fun provideProperties(propertiesFileName: String): Properties? {\n    return Properties().apply {\n        ObjectFactory::class.java.classLoader.getResourceAsStream(propertiesFileName).use { stream -&gt;\n            load(stream)\n        }\n    }\n}\n</code></pre>\n\n<p>very nice, Kotlin! :P</p>\n\n<p>The question is: this method looks for a <code>.properties</code> file inside <code>src/main/resources</code>. Using:</p>\n\n<pre><code>ObjectFactory::class.java.classLoader...\n</code></pre>\n\n<p>it works, but using:</p>\n\n<pre><code>this.javaClass.classLoader...\n</code></pre>\n\n<p><code>classLoader</code> is <code>null</code>...</p>\n\n<p><a href=\"https://i.stack.imgur.com/JNR4H.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/JNR4H.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/sWqjy.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/sWqjy.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/HT6ak.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/HT6ak.png\" alt=\"enter image description here\"></a></p>\n\n<p>(note that the memory address is also different)</p>\n\n<p>Why?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 810, "user_id": 1537029, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/zvYNG.jpg?s=128&g=1", "display_name": "Kim", "link": "https://stackoverflow.com/users/1537029/kim"}, "is_accepted": true, "score": 3, "last_activity_date": 1488529248, "last_edit_date": 1488529248, "creation_date": 1488528285, "answer_id": 42573626, "question_id": 42570086, "link": "https://stackoverflow.com/questions/42570086/how-to-get-put-kotlin-inner-map-or-map-of-map/42573626#42573626", "title": "How to get/put Kotlin Inner Map or Map of map", "body": "<p>Success to make it this way: </p>\n\n<p>Put Example:</p>\n\n<pre><code>var bookDetailsMap : Map&lt;Long, Map&lt;Long, BookDetail&gt;&gt; = hashMapOf()\n\nthis.bookDetailsMap = this.bookDao.findAll().groupBy { \n   it.publisherId\n}.mapValues { \n   it.value.associateBy { it.bookId} \n}\n</code></pre>\n\n<p>Get Example:</p>\n\n<pre><code>var bookDetail : BookDetail = BookDetail ()\n\nif (this.bookDetailsMap .containsKey(this.publisherId)) {\n    bookDetail = this.bookDetailsMap [this.publisherId]!![this.bookId]!!\n}\n</code></pre>\n"}], "owner": {"reputation": 810, "user_id": 1537029, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/zvYNG.jpg?s=128&g=1", "display_name": "Kim", "link": "https://stackoverflow.com/users/1537029/kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1394, "favorite_count": 2, "accepted_answer_id": 42573626, "answer_count": 1, "score": 2, "last_activity_date": 1488529248, "creation_date": 1488511536, "last_edit_date": 1488511932, "question_id": 42570086, "link": "https://stackoverflow.com/questions/42570086/how-to-get-put-kotlin-inner-map-or-map-of-map", "title": "How to get/put Kotlin Inner Map or Map of map", "body": "<p>anyone know how can i \"get/put\" inner map in kotlin ?</p>\n\n<pre><code>var bookDetailsMap: MutableMap&lt;Long, MutableMap&lt;Long, Book&gt;&gt; = mutableMapOf()\n</code></pre>\n\n<p>How can i \"put\" below book details into the map on above</p>\n\n<pre><code>var books: MutableList&lt;Book&gt; = this.bookDao.findAll()\n</code></pre>\n\n<p>Expect the storage will be like ></p>\n\n<pre><code>var bookDetailsMap: MutableMap&lt;book.publisherId, MutableMap&lt;book.bookId, Book&gt;&gt;\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "edited": false, "score": 0, "creation_date": 1488557940, "post_id": 42577381, "comment_id": 72299821, "body": "What happens when I upgrade to 1.1.1? Will I get warnings again because of this 1.1.0 new dependency?"}, {"owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "reply_to_user": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "edited": false, "score": 4, "creation_date": 1488567042, "post_id": 42577381, "comment_id": 72304854, "body": "No, the warning is there only when major/minor versions don&#39;t match. We&#39;re keeping patch version updates fully compatible between one another"}], "tags": [], "owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "is_accepted": true, "score": 106, "last_activity_date": 1574355718, "last_edit_date": 1574355718, "creation_date": 1488539576, "answer_id": 42577381, "question_id": 42569445, "link": "https://stackoverflow.com/questions/42569445/warning-kotlin-runtime-jar-files-in-the-classpath-should-have-the-same-version/42577381#42577381", "title": "warning: Kotlin runtime JAR files in the classpath should have the same version", "body": "<p>It seems that your project is configured in such a way that you depend on <code>kotlin-stdlib</code> 1.1 and <code>kotlin-reflect</code> 1.0. The most likely case is that you already have an explicit dependency on <code>kotlin-stdlib</code> 1.1 but have no dependency on <code>kotlin-reflect</code>, and some other library (which you depend on) depends on <code>kotlin-reflect</code> 1.0.</p>\n\n<p>If that indeed is the case, the solution is to provide an explicit dependency on <code>kotlin-reflect</code> 1.1.</p>\n\n<p>In Maven, add this to <code>pom.xml</code>:</p>\n\n<pre><code>    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n            &lt;artifactId&gt;kotlin-reflect&lt;/artifactId&gt;\n            &lt;version&gt;1.1.0&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n\n<p>In Gradle, add this to <code>build.gradle</code>:</p>\n\n<pre><code>dependencies {\n    implementation \"org.jetbrains.kotlin:kotlin-reflect:1.1.0\"\n}\n</code></pre>\n\n<p>See some info about this and related warnings <a href=\"https://kotlinlang.org/docs/reference/compatibility.html#binary-compatibility-warnings\" rel=\"noreferrer\">in the official docs</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 710, "user_id": 5972985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pFPntzQ62p0/AAAAAAAAAAI/AAAAAAAAACQ/-QKhIjmOBeU/photo.jpg?sz=128", "display_name": "Joseph Wambura", "link": "https://stackoverflow.com/users/5972985/joseph-wambura"}, "edited": false, "score": 0, "creation_date": 1567842329, "post_id": 53081554, "comment_id": 102092749, "body": "I added that but still gets the same error. It is driving me nut man..."}, {"owner": {"reputation": 5291, "user_id": 5279156, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vHs51.jpg?s=128&g=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/5279156/vlad"}, "reply_to_user": {"reputation": 710, "user_id": 5972985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pFPntzQ62p0/AAAAAAAAAAI/AAAAAAAAACQ/-QKhIjmOBeU/photo.jpg?sz=128", "display_name": "Joseph Wambura", "link": "https://stackoverflow.com/users/5972985/joseph-wambura"}, "edited": false, "score": 1, "creation_date": 1567844307, "post_id": 53081554, "comment_id": 102093154, "body": "@GithithuWambura put it directly in app build.gradle without bracing in <code>android {}</code> e.g."}], "tags": [], "owner": {"reputation": 5291, "user_id": 5279156, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vHs51.jpg?s=128&g=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/5279156/vlad"}, "is_accepted": false, "score": 29, "last_activity_date": 1540982830, "creation_date": 1540982830, "answer_id": 53081554, "question_id": 42569445, "link": "https://stackoverflow.com/questions/42569445/warning-kotlin-runtime-jar-files-in-the-classpath-should-have-the-same-version/53081554#53081554", "title": "warning: Kotlin runtime JAR files in the classpath should have the same version", "body": "<p>I fixed warning by overwriting kotlin version used in my app</p>\n\n<pre><code>configurations.all {\n    resolutionStrategy.eachDependency { DependencyResolveDetails details -&gt;\n        def requested = details.requested\n        if (requested.group == 'org.jetbrains.kotlin' &amp;&amp; requested.name == 'kotlin-reflect') {\n            details.useVersion kotlin_version\n        }\n    }\n}\n</code></pre>\n\n<p>e.g. <code>kotlin_version = 1.3.0</code></p>\n"}, {"tags": [], "owner": {"reputation": 87, "user_id": 9948337, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-niLCcsxubqU/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq2r2z75DbNneLk860FmfgbuxSHLVQ/mo/photo.jpg?sz=128", "display_name": "Musa Abdul Wadud", "link": "https://stackoverflow.com/users/9948337/musa-abdul-wadud"}, "is_accepted": false, "score": 6, "last_activity_date": 1571560108, "creation_date": 1571560108, "answer_id": 58471234, "question_id": 42569445, "link": "https://stackoverflow.com/questions/42569445/warning-kotlin-runtime-jar-files-in-the-classpath-should-have-the-same-version/58471234#58471234", "title": "warning: Kotlin runtime JAR files in the classpath should have the same version", "body": "<p>it happens when you are using the dagger in a kotlin project(android) and you have the kotlin version to be 1.7 i.e </p>\n\n<pre><code>implementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\n</code></pre>\n\n<p>all you have to do is add the dependency below to your app build gradle level </p>\n\n<pre><code>  implementation \"org.jetbrains.kotlin:kotlin-reflect:1.3.50\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 333, "user_id": 4352506, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DkKpi7cPLG0/AAAAAAAAAAI/AAAAAAAAA8c/MqPREk0njHM/photo.jpg?sz=128", "display_name": "jeonghyeon kim", "link": "https://stackoverflow.com/users/4352506/jeonghyeon-kim"}, "is_accepted": false, "score": 16, "last_activity_date": 1586631321, "last_edit_date": 1586631321, "creation_date": 1586620398, "answer_id": 61159614, "question_id": 42569445, "link": "https://stackoverflow.com/questions/42569445/warning-kotlin-runtime-jar-files-in-the-classpath-should-have-the-same-version/61159614#61159614", "title": "warning: Kotlin runtime JAR files in the classpath should have the same version", "body": "<p>firstly, figure out the reason by the gradle script below</p>\n\n<pre><code>./gradlew app:dependencies\n</code></pre>\n\n<p>(change <code>app</code> to your gradle module name)</p>\n\n<pre><code>+--- project :common\n|    +--- org.jetbrains.kotlin:kotlin-stdlib:1.3.61\n|    |    +--- org.jetbrains.kotlin:kotlin-stdlib-common:1.3.61\n|    |    \\--- org.jetbrains:annotations:13.0\n|    +--- org.jetbrains.kotlinx:kotlinx-coroutines-core-common:1.3.3\n|    |    \\--- org.jetbrains.kotlin:kotlin-stdlib-common:1.3.61\n|    +--- org.jetbrains.kotlinx:kotlinx-serialization-runtime-common:0.12.0 -&gt; 0.14.0\n|    |    \\--- org.jetbrains.kotlin:kotlin-stdlib-common:1.3.60 -&gt; 1.3.61\n</code></pre>\n\n<p>Then, the dependency tree will be shown.\ncheck which dependency use the issue dependency.</p>\n\n<p>If you found the dependency, decide how to solve it.</p>\n\n<ol>\n<li>upgrade the dependency's version(the dependency's latest version may refer to latest issue dependency's version)</li>\n<li>or exclude the issue dependency from the dependency</li>\n<li>or follow other answers.</li>\n</ol>\n\n<p>I'm not sure what is the best way. kindly just refer to it.</p>\n"}, {"tags": [], "owner": {"reputation": 109, "user_id": 10089487, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8s1Hb.jpg?s=128&g=1", "display_name": "Niral Dhameliya", "link": "https://stackoverflow.com/users/10089487/niral-dhameliya"}, "is_accepted": false, "score": 2, "last_activity_date": 1601557980, "creation_date": 1601557980, "answer_id": 64156159, "question_id": 42569445, "link": "https://stackoverflow.com/questions/42569445/warning-kotlin-runtime-jar-files-in-the-classpath-should-have-the-same-version/64156159#64156159", "title": "warning: Kotlin runtime JAR files in the classpath should have the same version", "body": "<p><strong>Make sure you use the same version of <code>stdlib-jdk7</code> &amp; <code>kotlin-gradle-plugin</code> dependencies to avoid warnings.</strong><br/>You can refere below example where <code>stdlib-jdk7</code> &amp; <code>kotlin-gradle-plugin</code> both have the same version</p>\n<blockquote>\n<p>app-level build.gradle file</p>\n</blockquote>\n<pre><code>dependencies {\n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk7:1.4.0&quot;\n    ...\n}\n</code></pre>\n<blockquote>\n<p>project-level build.gradle file</p>\n</blockquote>\n<pre><code>buildscript {\n    dependencies {\n         classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:1.4.0&quot; \n         ...\n    }\n</code></pre>\n<p>}</p>\n"}, {"tags": [], "owner": {"reputation": 109, "user_id": 7460214, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/95ba227d4ceb48e47ab43ea02f0b788f?s=128&d=identicon&r=PG&f=1", "display_name": "Aury0n", "link": "https://stackoverflow.com/users/7460214/aury0n"}, "is_accepted": false, "score": 0, "last_activity_date": 1611634256, "creation_date": 1611634256, "answer_id": 65895789, "question_id": 42569445, "link": "https://stackoverflow.com/questions/42569445/warning-kotlin-runtime-jar-files-in-the-classpath-should-have-the-same-version/65895789#65895789", "title": "warning: Kotlin runtime JAR files in the classpath should have the same version", "body": "<p>FOR ANDROID DEVELOPERS WITH ERROR OCCURING AT XML UNRECOGNIZED FILE</p>\n<p>It if it in Android and thew error appears by not recognizing a xml file, you could search for some error in the xml folder files(in my case, one of the files had tag  duplicated)</p>\n"}, {"tags": [], "owner": {"reputation": 123, "user_id": 12877007, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCtTFbkOUJ6c36FHOfH-kSHDukBFADdVbJclH784w=k-s128", "display_name": "Mubashir Murtaza", "link": "https://stackoverflow.com/users/12877007/mubashir-murtaza"}, "is_accepted": false, "score": 0, "last_activity_date": 1615354132, "creation_date": 1615354132, "answer_id": 66558888, "question_id": 42569445, "link": "https://stackoverflow.com/questions/42569445/warning-kotlin-runtime-jar-files-in-the-classpath-should-have-the-same-version/66558888#66558888", "title": "warning: Kotlin runtime JAR files in the classpath should have the same version", "body": "<p>replace this</p>\n<pre><code>  implementation 'org.jetbrains.kotlin:kotlin-stdlib:1.4.30'\n</code></pre>\n<p>with</p>\n<pre><code>implementation 'org.jetbrains.kotlin:kotlin-stdlib-jdk7:1.4.30'\n</code></pre>\n<p>the version of library should be same as plugin in project level</p>\n<pre><code> classpath org.jetbrains.kotlin:kotlin-gradle-plugin:1.4.30\n</code></pre>\n"}], "owner": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59693, "favorite_count": 12, "accepted_answer_id": 42577381, "answer_count": 7, "score": 98, "last_activity_date": 1615354132, "creation_date": 1488507329, "question_id": 42569445, "link": "https://stackoverflow.com/questions/42569445/warning-kotlin-runtime-jar-files-in-the-classpath-should-have-the-same-version", "title": "warning: Kotlin runtime JAR files in the classpath should have the same version", "body": "<p>I get the following warning, but I'm not sure where v1.0.6 resides.</p>\n\n<p>Is it possible this error comes from a Kotlin library somehow including an old Kotlin version?</p>\n\n<p>Any ideas how to fix it or at least how can I follow the suggestion to make kotlin-reflect explicit (1.1) ?</p>\n\n<p><a href=\"https://i.stack.imgur.com/ZwNIe.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ZwNIe.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["android", "android-studio", "kotlin", "android-databinding", "kotlin-interop"], "answers": [{"tags": [], "owner": {"reputation": 1089, "user_id": 5155869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gilQB.png?s=128&g=1", "display_name": "uramonk", "link": "https://stackoverflow.com/users/5155869/uramonk"}, "is_accepted": true, "score": 25, "last_activity_date": 1488617249, "creation_date": 1488617249, "answer_id": 42594002, "question_id": 42568394, "link": "https://stackoverflow.com/questions/42568394/build-errors-with-new-kotlin-1-1-kapt-cant-parse-databinding-params/42594002#42594002", "title": "Build errors with new kotlin 1.1 , kapt cant parse databinding params", "body": "<p>I had solved same issue.</p>\n\n<p>Delete this code.</p>\n\n<pre><code>kapt {\n    generateStubs = true\n}\n</code></pre>\n\n<p>And add this code.</p>\n\n<pre><code>apply plugin: 'kotlin-kapt'\n</code></pre>\n\n<p>Reference Links: <a href=\"https://blog.jetbrains.com/kotlin/2016/09/kotlin-1-0-4-is-here/\" rel=\"noreferrer\">https://blog.jetbrains.com/kotlin/2016/09/kotlin-1-0-4-is-here/</a></p>\n"}], "owner": {"reputation": 173, "user_id": 3184781, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K0lOJ.jpg?s=128&g=1", "display_name": "Harisvsulaiman", "link": "https://stackoverflow.com/users/3184781/harisvsulaiman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4539, "favorite_count": 3, "accepted_answer_id": 42594002, "answer_count": 1, "score": 17, "last_activity_date": 1488617249, "creation_date": 1488500188, "last_edit_date": 1488542796, "question_id": 42568394, "link": "https://stackoverflow.com/questions/42568394/build-errors-with-new-kotlin-1-1-kapt-cant-parse-databinding-params", "title": "Build errors with new kotlin 1.1 , kapt cant parse databinding params", "body": "<p>I updated my project from android studio 2.2 to android studio 2.3 and incremented the project from kotlin 1.06 to kotlin 1.1</p>\n\n<p>This is the error I get</p>\n\n<pre><code>    :app:javaPreCompileDebug\n:app:transformClassesAndDataBindingWithDataBindingMergeArtifactsForDebug UP-TO-DATE\n:app:compileDebugKotlin\nw: The '-d' option with a directory destination is ignored because '-module' is specified\n:app:compileDebugJavaWithJavac\nProcessor path was modified by kapt. Previous value = /home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlin/kotlin-stdlib-jre7/1.1.0/ef03cfed144ff47eed2cab1f7be4381bc18a6237/kotlin-stdlib-jre7-1.1.0.jar:/home/harisvsulaiman/android-studio/gradle/m2repository/commons-io/commons-io/2.4/commons-io-2.4.jar:/home/harisvsulaiman/android-studio/gradle/m2repository/com/android/databinding/compilerCommon/2.3.0/compilerCommon-2.3.0.jar:/home/harisvsulaiman/android-studio/gradle/m2repository/commons-codec/commons-codec/1.10/commons-codec-1.10.jar:/home/harisvsulaiman/Sdk/extras/m2repository/com/android/support/constraint/constraint-layout-solver/1.0.1/constraint-layout-solver-1.0.1.jar:/home/harisvsulaiman/android-studio/gradle/m2repository/com/google/guava/guava/17.0/guava-17.0.jar:/home/harisvsulaiman/Sdk/extras/android/m2repository/com/android/support/support-annotations/25.2.0/support-annotations-25.2.0.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlin/kotlin-stdlib/1.1.0/96a07041a11a09cf578892932d7511e1e11e3b6c/kotlin-stdlib-1.1.0.jar:/home/harisvsulaiman/android-studio/gradle/m2repository/com/android/databinding/baseLibrary/2.3.0/baseLibrary-2.3.0.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/com.airbnb.android/epoxy-annotations/1.7.5/509abda14719aa31f55123c9a757bdadc8f45818/epoxy-annotations-1.7.5.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/io.realm/realm-annotations-processor/3.0.0/61c2ac9e7a068736558e69d585cfa777b35058b2/realm-annotations-processor-3.0.0.jar:/home/harisvsulaiman/android-studio/gradle/m2repository/com/android/tools/annotations/24.5.0/annotations-24.5.0.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/com.github.bumptech.glide/glide/3.7.0/9e9eeaf9948ee4d6c3ab354e8dc14368f16994a4/glide-3.7.0.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/io.reactivex/rxjava/1.2.6/de0c509ae6c9db5b5b6004a9d102c92708346f7c/rxjava-1.2.6.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/com.squareup.okio/okio/1.11.0/840897fcd7223a8143f1d9b6f69714e7be34fd50/okio-1.11.0.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/com.squareup.retrofit2/adapter-rxjava/2.2.0/d80514b6f44f0c4c6234e2d67fea783a25e77275/adapter-rxjava-2.2.0.jar:/home/harisvsulaiman/android-studio/gradle/m2repository/com/googlecode/juniversalchardet/juniversalchardet/1.0.3/juniversalchardet-1.0.3.jar:/home/harisvsulaiman/android-studio/gradle/m2repository/com/android/databinding/compiler/2.3.0/compiler-2.3.0.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/org.jetbrains/annotations/13.0/919f0dfe192fb4e063e7dacadee7f8bb9a2672a9/annotations-13.0.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/io.realm/realm-annotations/3.0.0/32a01bbb8cb421b6d53d7a102412142b0391c8c7/realm-annotations-3.0.0.jar:/home/harisvsulaiman/android-studio/gradle/m2repository/org/antlr/antlr4/4.5.3/antlr4-4.5.3.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/com.squareup.retrofit2/retrofit/2.2.0/41e67dba73c3347e4503761642c39d0e06ca1f2/retrofit-2.2.0.jar:/home/harisvsulaiman/android-studio/gradle/m2repository/com/squareup/javawriter/2.5.0/javawriter-2.5.0.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/com.squareup.okhttp3/okhttp/3.6.0/69edde9fc4b01c9fd51d25b83428837478c27254/okhttp-3.6.0.jar:/home/harisvsulaiman/.android/build-cache/478fd1ace0e77af57c87f42a281aed180d5ce276/output/jars/classes.jar:/home/harisvsulaiman/.android/build-cache/d7d6ec093cb49766f796118979b331d6f5c2b4c4/output/jars/classes.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/io.realm/realm-annotations/3.0.0/32a01bbb8cb421b6d53d7a102412142b0391c8c7/realm-annotations-3.0.0.jar:/home/harisvsulaiman/.android/build-cache/17205aea1b3195cf38fb66c2e060ee4beed141f8/output/jars/classes.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/com.squareup.retrofit2/adapter-rxjava/2.2.0/d80514b6f44f0c4c6234e2d67fea783a25e77275/adapter-rxjava-2.2.0.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/com.squareup.retrofit2/retrofit/2.2.0/41e67dba73c3347e4503761642c39d0e06ca1f2/retrofit-2.2.0.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/com.squareup.okhttp3/okhttp/3.6.0/69edde9fc4b01c9fd51d25b83428837478c27254/okhttp-3.6.0.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/com.squareup.okio/okio/1.11.0/840897fcd7223a8143f1d9b6f69714e7be34fd50/okio-1.11.0.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/io.reactivex/rxjava/1.2.6/de0c509ae6c9db5b5b6004a9d102c92708346f7c/rxjava-1.2.6.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/com.github.bumptech.glide/glide/3.7.0/9e9eeaf9948ee4d6c3ab354e8dc14368f16994a4/glide-3.7.0.jar:/home/harisvsulaiman/.android/build-cache/6249fbc26c3c324164d6bccd213e772dbffabab8/output/jars/classes.jar:/home/harisvsulaiman/.android/build-cache/00346f3603afd369923753ca5b3574b3cbd68913/output/jars/classes.jar:/home/harisvsulaiman/.android/build-cache/44456db0af44370448077b85155ec1b111460aaf/output/jars/classes.jar:/home/harisvsulaiman/.android/build-cache/ab1b9ebddb2122246c96bfd338f92a2af4329445/output/jars/classes.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/com.airbnb.android/epoxy-annotations/1.7.5/509abda14719aa31f55123c9a757bdadc8f45818/epoxy-annotations-1.7.5.jar:/home/harisvsulaiman/.android/build-cache/fb128d6e98efde38d1b59985fb85f2eee1b186eb/output/jars/classes.jar:/home/harisvsulaiman/.android/build-cache/c9550d2fd003ae92d1406c8c46f2b35cffe031ce/output/jars/classes.jar:/home/harisvsulaiman/.android/build-cache/08e46ece36546bbc2b85ffa90c6a8a4cf3bbab10/output/jars/classes.jar:/home/harisvsulaiman/.android/build-cache/b293042c81288354130e748246586e2669e423d1/output/jars/classes.jar:/home/harisvsulaiman/.android/build-cache/6a84f4dc5c9dda9b0a661c34b982f15791783194/output/jars/classes.jar:/home/harisvsulaiman/Sdk/extras/m2repository/com/android/support/constraint/constraint-layout-solver/1.0.1/constraint-layout-solver-1.0.1.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlin/kotlin-stdlib-jre7/1.1.0/ef03cfed144ff47eed2cab1f7be4381bc18a6237/kotlin-stdlib-jre7-1.1.0.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlin/kotlin-stdlib/1.1.0/96a07041a11a09cf578892932d7511e1e11e3b6c/kotlin-stdlib-1.1.0.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/org.jetbrains/annotations/13.0/919f0dfe192fb4e063e7dacadee7f8bb9a2672a9/annotations-13.0.jar:/home/harisvsulaiman/.android/build-cache/79467da2ee5fd2328774a23645475ecb9d0946fd/output/jars/classes.jar:/home/harisvsulaiman/.android/build-cache/02c10559b235748437a45d6ca44f6c5e5230c4e9/output/jars/classes.jar:/home/harisvsulaiman/.android/build-cache/82bf4ec6a1051c7130958118c35d8fb99643c133/output/jars/classes.jar:/home/harisvsulaiman/.android/build-cache/8dd8873d08fda228f6ea3117e6073fd14e35a5d4/output/jars/classes.jar:/home/harisvsulaiman/.android/build-cache/8fc507ef1c90eab75de9d0123ad4b7535753f320/output/jars/classes.jar:/home/harisvsulaiman/.android/build-cache/5fb2bef0cb0bba8cf7f981cadcf1cf142a325276/output/jars/classes.jar:/home/harisvsulaiman/.android/build-cache/0727c2e3f4507058ea7ae52687ced332bf06362f/output/jars/classes.jar:/home/harisvsulaiman/.android/build-cache/31d4c76434ce8a5ba46bf630f178e855f7516250/output/jars/classes.jar:/home/harisvsulaiman/Sdk/extras/android/m2repository/com/android/support/support-annotations/25.2.0/support-annotations-25.2.0.jar:/home/harisvsulaiman/android-studio/gradle/m2repository/com/android/databinding/baseLibrary/2.3.0/baseLibrary-2.3.0.jar\nDestination for generated sources was modified by kapt. Previous value = /home/harisvsulaiman/AndroidStudioProjects/Hafiz/app/build/generated/source/apt/debug\n:app:compileDebugKotlinAfterJava\nw: The '-d' option with a directory destination is ignored because '-module' is specified\n:app:copyDebugKotlinClasses UP-TO-DATE\n:app:compileDebugNdk UP-TO-DATE\n:app:compileDebugSources\n:app:incrementalDebugUnitTestJavaCompilationSafeguard UP-TO-DATE\n:app:javaPreCompileDebugUnitTest\n:app:compileDebugUnitTestKotlin UP-TO-DATE\n:app:compileDebugUnitTestJavaWithJavac UP-TO-DATE\n:app:compileDebugUnitTestKotlinAfterJava UP-TO-DATE\n:app:copyDebugUnitTestKotlinClasses UP-TO-DATE\n:app:processDebugJavaRes UP-TO-DATE\n:app:processDebugUnitTestJavaRes UP-TO-DATE\n:app:compileDebugUnitTestSources UP-TO-DATE\n:app:incrementalDebugAndroidTestJavaCompilationSafeguard UP-TO-DATE\n:app:javaPreCompileDebugAndroidTest\n:app:compileDebugAndroidTestKotlin\n:app:compileDebugAndroidTestJavaWithJavac\nProcessor path was modified by kapt. Previous value = /home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/javax.inject/javax.inject/1/6975da39a7040257bd51d21a231b76c915872d38/javax.inject-1.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/org.hamcrest/hamcrest-core/1.3/42a25dc3219429f0e5d060061f71acb49bf010a0/hamcrest-core-1.3.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/com.google.code.findbugs/jsr305/2.0.1/516c03b21d50a644d538de0f0369c620989cd8f0/jsr305-2.0.1.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/junit/junit/4.12/2973d150c0dc1fefe998f834810d68f278ea58ec/junit-4.12.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/io.realm/realm-annotations-processor/3.0.0/61c2ac9e7a068736558e69d585cfa777b35058b2/realm-annotations-processor-3.0.0.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/javax.annotation/javax.annotation-api/1.2/479c1e06db31c432330183f5cae684163f186146/javax.annotation-api-1.2.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/org.hamcrest/hamcrest-integration/1.3/5de0c73fef18917cd85d0ab70bb23818685e4dfd/hamcrest-integration-1.3.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/io.realm/realm-annotations/3.0.0/32a01bbb8cb421b6d53d7a102412142b0391c8c7/realm-annotations-3.0.0.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/org.hamcrest/hamcrest-library/1.3/4785a3c21320980282f9f33d0d1264a69040538f/hamcrest-library-1.3.jar:/home/harisvsulaiman/android-studio/gradle/m2repository/com/squareup/javawriter/2.5.0/javawriter-2.5.0.jar:/home/harisvsulaiman/.android/build-cache/12537e43a85ab0afa777ffffaa3156b34b448f54/output/jars/classes.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/com.squareup/javawriter/2.1.1/67ff45d9ae02e583d0f9b3432a5ebbe05c30c966/javawriter-2.1.1.jar:/home/harisvsulaiman/.android/build-cache/793aa84797fecdb3ba2f8477970a8b447c352cbd/output/jars/classes.jar:/home/harisvsulaiman/.android/build-cache/ce412e8a194fce2780827ef6800ab6ff4b18323d/output/jars/classes.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/junit/junit/4.12/2973d150c0dc1fefe998f834810d68f278ea58ec/junit-4.12.jar:/home/harisvsulaiman/.android/build-cache/7e420608fba4187802d4eaa0ca3d7f5c55016f84/output/jars/classes.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/javax.inject/javax.inject/1/6975da39a7040257bd51d21a231b76c915872d38/javax.inject-1.jar:/home/harisvsulaiman/.android/build-cache/44be9593d071350b5f9d23c72dca4110a3c5e62a/output/jars/classes.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/org.hamcrest/hamcrest-integration/1.3/5de0c73fef18917cd85d0ab70bb23818685e4dfd/hamcrest-integration-1.3.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/org.hamcrest/hamcrest-library/1.3/4785a3c21320980282f9f33d0d1264a69040538f/hamcrest-library-1.3.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/org.hamcrest/hamcrest-core/1.3/42a25dc3219429f0e5d060061f71acb49bf010a0/hamcrest-core-1.3.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/com.google.code.findbugs/jsr305/2.0.1/516c03b21d50a644d538de0f0369c620989cd8f0/jsr305-2.0.1.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/javax.annotation/javax.annotation-api/1.2/479c1e06db31c432330183f5cae684163f186146/javax.annotation-api-1.2.jar:/home/harisvsulaiman/.android/build-cache/478fd1ace0e77af57c87f42a281aed180d5ce276/output/jars/classes.jar:/home/harisvsulaiman/.android/build-cache/d7d6ec093cb49766f796118979b331d6f5c2b4c4/output/jars/classes.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/io.realm/realm-annotations/3.0.0/32a01bbb8cb421b6d53d7a102412142b0391c8c7/realm-annotations-3.0.0.jar:/home/harisvsulaiman/.android/build-cache/17205aea1b3195cf38fb66c2e060ee4beed141f8/output/jars/classes.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/com.squareup.retrofit2/adapter-rxjava/2.2.0/d80514b6f44f0c4c6234e2d67fea783a25e77275/adapter-rxjava-2.2.0.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/com.squareup.retrofit2/retrofit/2.2.0/41e67dba73c3347e4503761642c39d0e06ca1f2/retrofit-2.2.0.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/com.squareup.okhttp3/okhttp/3.6.0/69edde9fc4b01c9fd51d25b83428837478c27254/okhttp-3.6.0.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/com.squareup.okio/okio/1.11.0/840897fcd7223a8143f1d9b6f69714e7be34fd50/okio-1.11.0.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/io.reactivex/rxjava/1.2.6/de0c509ae6c9db5b5b6004a9d102c92708346f7c/rxjava-1.2.6.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/com.github.bumptech.glide/glide/3.7.0/9e9eeaf9948ee4d6c3ab354e8dc14368f16994a4/glide-3.7.0.jar:/home/harisvsulaiman/.android/build-cache/6249fbc26c3c324164d6bccd213e772dbffabab8/output/jars/classes.jar:/home/harisvsulaiman/.android/build-cache/00346f3603afd369923753ca5b3574b3cbd68913/output/jars/classes.jar:/home/harisvsulaiman/.android/build-cache/44456db0af44370448077b85155ec1b111460aaf/output/jars/classes.jar:/home/harisvsulaiman/.android/build-cache/ab1b9ebddb2122246c96bfd338f92a2af4329445/output/jars/classes.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/com.airbnb.android/epoxy-annotations/1.7.5/509abda14719aa31f55123c9a757bdadc8f45818/epoxy-annotations-1.7.5.jar:/home/harisvsulaiman/.android/build-cache/fb128d6e98efde38d1b59985fb85f2eee1b186eb/output/jars/classes.jar:/home/harisvsulaiman/.android/build-cache/c9550d2fd003ae92d1406c8c46f2b35cffe031ce/output/jars/classes.jar:/home/harisvsulaiman/.android/build-cache/08e46ece36546bbc2b85ffa90c6a8a4cf3bbab10/output/jars/classes.jar:/home/harisvsulaiman/.android/build-cache/b293042c81288354130e748246586e2669e423d1/output/jars/classes.jar:/home/harisvsulaiman/.android/build-cache/6a84f4dc5c9dda9b0a661c34b982f15791783194/output/jars/classes.jar:/home/harisvsulaiman/Sdk/extras/m2repository/com/android/support/constraint/constraint-layout-solver/1.0.1/constraint-layout-solver-1.0.1.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlin/kotlin-stdlib-jre7/1.1.0/ef03cfed144ff47eed2cab1f7be4381bc18a6237/kotlin-stdlib-jre7-1.1.0.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlin/kotlin-stdlib/1.1.0/96a07041a11a09cf578892932d7511e1e11e3b6c/kotlin-stdlib-1.1.0.jar:/home/harisvsulaiman/.gradle/caches/modules-2/files-2.1/org.jetbrains/annotations/13.0/919f0dfe192fb4e063e7dacadee7f8bb9a2672a9/annotations-13.0.jar:/home/harisvsulaiman/.android/build-cache/79467da2ee5fd2328774a23645475ecb9d0946fd/output/jars/classes.jar:/home/harisvsulaiman/.android/build-cache/02c10559b235748437a45d6ca44f6c5e5230c4e9/output/jars/classes.jar:/home/harisvsulaiman/.android/build-cache/82bf4ec6a1051c7130958118c35d8fb99643c133/output/jars/classes.jar:/home/harisvsulaiman/.android/build-cache/8dd8873d08fda228f6ea3117e6073fd14e35a5d4/output/jars/classes.jar:/home/harisvsulaiman/.android/build-cache/8fc507ef1c90eab75de9d0123ad4b7535753f320/output/jars/classes.jar:/home/harisvsulaiman/.android/build-cache/5fb2bef0cb0bba8cf7f981cadcf1cf142a325276/output/jars/classes.jar:/home/harisvsulaiman/.android/build-cache/0727c2e3f4507058ea7ae52687ced332bf06362f/output/jars/classes.jar:/home/harisvsulaiman/.android/build-cache/31d4c76434ce8a5ba46bf630f178e855f7516250/output/jars/classes.jar:/home/harisvsulaiman/Sdk/extras/android/m2repository/com/android/support/support-annotations/25.2.0/support-annotations-25.2.0.jar:/home/harisvsulaiman/android-studio/gradle/m2repository/com/android/databinding/baseLibrary/2.3.0/baseLibrary-2.3.0.jar:/home/harisvsulaiman/AndroidStudioProjects/Hafiz/app/build/intermediates/classes/debug\nDestination for generated sources was modified by kapt. Previous value = /home/harisvsulaiman/AndroidStudioProjects/Hafiz/app/build/generated/source/apt/androidTest/debug\n:app:compileDebugAndroidTestJavaWithJavac FAILED\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':app:compileDebugAndroidTestJavaWithJavac'.\n&gt; java.lang.RuntimeException: Failed to parse data binding compiler options. Params:\n  kapt.annotations : /home/harisvsulaiman/AndroidStudioProjects/Hafiz/app/build/tmp/kapt/debugAndroidTest/wrappers/annotations.debugAndroidTest.txt\n  kapt.kotlin.generated : /home/harisvsulaiman/AndroidStudioProjects/Hafiz/app/build/tmp/kapt/debugAndroidTest/kotlinGenerated\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.\n\nBUILD FAILED\n</code></pre>\n\n<p><code>build.gradle</code> File:</p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'realm-android'\napply plugin: 'kotlin-android'\n\nandroid {\n    compileSdkVersion 25\n    buildToolsVersion \"25.0.2\"\n    defaultConfig {\n        applicationId \"com.spar.hafiz\"\n        minSdkVersion 17\n        targetSdkVersion 25\n        versionCode 1\n        versionName \"1.0\"\n        testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n        vectorDrawables {\n            useSupportLibrary true\n        }\n    }\n    dataBinding {\n        enabled true\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n    sourceSets {\n        main.java.srcDirs += 'src/main/kotlin'\n    }\n}\n\ndependencies {\n    compile fileTree(dir: 'libs', include: ['*.jar'])\n    androidTestCompile('com.android.support.test.espresso:espresso-core:2.2.2', {\n        exclude group: 'com.android.support', module: 'support-annotations'\n    })\n\n    kapt 'com.android.databinding:compiler:2.3.0'\n    compile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n    compile 'com.squareup.retrofit2:retrofit:2.2.0'\n    compile 'io.reactivex:rxjava:1.2.6'\n    compile 'com.synnapps:carouselview:0.0.10'\n    compile 'com.squareup.retrofit2:adapter-rxjava:2.2.0'\n    compile 'com.github.bumptech.glide:glide:3.7.0'\n    compile 'com.airbnb.android:epoxy:1.7.5'\n    testCompile 'junit:junit:4.12'\n    kapt 'com.airbnb.android:epoxy-processor:1.7.5'\n    compile 'com.android.support:support-v4:25.2.0'\n    compile 'com.android.support:appcompat-v7:25.2.0'\n    compile 'com.android.support:cardview-v7:25.2.0'\n    compile 'com.android.support.constraint:constraint-layout:1.0.1'\n    compile \"org.jetbrains.kotlin:kotlin-stdlib-jre7:$kotlin_version\"\n}\n\nkapt {\n    generateStubs = true\n}\n\nrepositories {\n    mavenCentral()\n}\n\n// Top-level build file where you can add configuration options common to all sub-projects/modules.\n\nbuildscript {\n    ext.kotlin_version = '1.1.0'\n    repositories {\n        jcenter()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:2.3.0'\n        classpath \"io.realm:realm-gradle-plugin:3.0.0\"\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n}\n\nallprojects {\n    repositories {\n        jcenter()\n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n// Top-level build file where you can add configuration options common to all sub-projects/modules.\n\nbuildscript {\n    ext.kotlin_version = '1.1.0'\n    repositories {\n        jcenter()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:2.3.0'\n        classpath \"io.realm:realm-gradle-plugin:3.0.0\"\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n}\n\nallprojects {\n    repositories {\n        jcenter()\n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n"}, {"tags": ["java", "rx-java", "kotlin", "reactive-programming"], "answers": [{"comments": [{"owner": {"reputation": 816, "user_id": 3576721, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100001738946120/picture?type=large", "display_name": "pablobaldez", "link": "https://stackoverflow.com/users/3576721/pablobaldez"}, "edited": false, "score": 0, "creation_date": 1488558463, "post_id": 42567581, "comment_id": 72300180, "body": "It&#39;s not working because in some cases the Observable&lt;Bar&gt; are empty, and the Observable&lt;Foo&gt; aren&#39;t. When it happens anything is emmited"}, {"owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "reply_to_user": {"reputation": 816, "user_id": 3576721, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100001738946120/picture?type=large", "display_name": "pablobaldez", "link": "https://stackoverflow.com/users/3576721/pablobaldez"}, "edited": false, "score": 0, "creation_date": 1488560593, "post_id": 42567581, "comment_id": 72301560, "body": "If bars is empty, how do you expect to match it with a non-empty foo?"}, {"owner": {"reputation": 816, "user_id": 3576721, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100001738946120/picture?type=large", "display_name": "pablobaldez", "link": "https://stackoverflow.com/users/3576721/pablobaldez"}, "edited": false, "score": 0, "creation_date": 1488563194, "post_id": 42567581, "comment_id": 72302974, "body": "if it&#39;s empty, so all foo&#39;s will be the older name, but they have to be emitted"}, {"owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "reply_to_user": {"reputation": 816, "user_id": 3576721, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100001738946120/picture?type=large", "display_name": "pablobaldez", "link": "https://stackoverflow.com/users/3576721/pablobaldez"}, "edited": false, "score": 2, "creation_date": 1488566688, "post_id": 42567581, "comment_id": 72304693, "body": "Observable.toMap always emits a Map so the foos will always be streamed."}], "tags": [], "owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "is_accepted": true, "score": 4, "last_activity_date": 1488495396, "creation_date": 1488495396, "answer_id": 42567581, "question_id": 42566372, "link": "https://stackoverflow.com/questions/42566372/replace-double-for-each-by-observable/42567581#42567581", "title": "Replace double for each by observable", "body": "<p>You could collect the <code>Bar</code>s into a <code>Map</code> of id to name and run foo sequence with it:</p>\n\n<pre><code>Observable&lt;Bar&gt; bars = ...\nObservable&lt;Foo&gt; foos = ...\n\nbars\n    .toMap(bar -&gt; bar.id, bar -&gt; bar.name)\n    .flatMap(map -&gt; \n        foos.doOnNext(foo -&gt; {\n            String name = map.get(foo.id);\n            if (name != null) {\n                foo.name = name;\n            }\n        })\n    )\n    .subscribe(...)\n</code></pre>\n"}], "owner": {"reputation": 816, "user_id": 3576721, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100001738946120/picture?type=large", "display_name": "pablobaldez", "link": "https://stackoverflow.com/users/3576721/pablobaldez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 42567581, "answer_count": 1, "score": 1, "last_activity_date": 1488495396, "creation_date": 1488490295, "question_id": 42566372, "link": "https://stackoverflow.com/questions/42566372/replace-double-for-each-by-observable", "title": "Replace double for each by observable", "body": "<p>I have two lists: <code>List&lt;Foo&gt;</code> and <code>List&lt;Bar&gt;</code>. For each item of <code>List&lt;Foo&gt;</code>, I have to check all items of <code>List&lt;Bar&gt;</code>, and set a value if it's are matching. Today I'm using this code:</p>\n\n<pre><code>fooList.forEach { foo -&gt;\n   barList.forEach { bar -&gt;\n        if(foo.id == bar.id) {\n            bar.name = foo.name\n        }\n    }\n}\nreturn barList\n</code></pre>\n\n<p>I want to change it, because now I have an <code>Observable&lt;Foo&gt;</code> and an <code>Observable&lt;Bar&gt;</code>. \nHow could I replace my code to use the reactive programming?</p>\n"}, {"tags": ["android", "android-studio", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 8164, "user_id": 5593959, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/9StDn.jpg?s=128&g=1", "display_name": "Dima Rostopira", "link": "https://stackoverflow.com/users/5593959/dima-rostopira"}, "is_accepted": true, "score": 1, "last_activity_date": 1488477912, "creation_date": 1488477912, "answer_id": 42562733, "question_id": 42561553, "link": "https://stackoverflow.com/questions/42561553/can-choose-android-studio-kotlin-version/42562733#42562733", "title": "Can choose Android Studio kotlin version?", "body": "<p>Kotlin version is specified in project level <code>build.gradle</code></p>\n\n<pre><code>buildscript {\n    ext.kotlin_version = '1.1.0'\n    //.....\n</code></pre>\n"}], "owner": {"reputation": 1104, "user_id": 6098741, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8a2429f946a24a1199afd6fa28bbf22f?s=128&d=identicon&r=PG&f=1", "display_name": "MrNadimi", "link": "https://stackoverflow.com/users/6098741/mrnadimi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 42562733, "answer_count": 1, "score": 0, "last_activity_date": 1488477912, "creation_date": 1488474204, "question_id": 42561553, "link": "https://stackoverflow.com/questions/42561553/can-choose-android-studio-kotlin-version", "title": "Can choose Android Studio kotlin version?", "body": "<p>I am new in a kotlin . any one know how can i choose my build kotlin version ? is it impossible to change it ? if yes , how should do this? </p>\n"}, {"tags": ["android", "kotlin", "kotlin-coroutines"], "comments": [{"owner": {"reputation": 8164, "user_id": 5593959, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/9StDn.jpg?s=128&g=1", "display_name": "Dima Rostopira", "link": "https://stackoverflow.com/users/5593959/dima-rostopira"}, "edited": false, "score": 0, "creation_date": 1488478845, "post_id": 42561217, "comment_id": 72260027, "body": "Sorry, where did you find <code>launch</code> method?"}, {"owner": {"reputation": 8164, "user_id": 5593959, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/9StDn.jpg?s=128&g=1", "display_name": "Dima Rostopira", "link": "https://stackoverflow.com/users/5593959/dima-rostopira"}, "edited": false, "score": 2, "creation_date": 1488478902, "post_id": 42561217, "comment_id": 72260062, "body": "Maybe this library will help you <a href=\"https://github.com/metalabdesign/AsyncAwait\" rel=\"nofollow noreferrer\">github.com/metalabdesign/AsyncAwait</a>"}, {"owner": {"reputation": 3341, "user_id": 5090578, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/fc255635583ec7de35e0d6630ade4044?s=128&d=identicon&r=PG", "display_name": "Rostyslav Roshak", "link": "https://stackoverflow.com/users/5090578/rostyslav-roshak"}, "reply_to_user": {"reputation": 8164, "user_id": 5593959, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/9StDn.jpg?s=128&g=1", "display_name": "Dima Rostopira", "link": "https://stackoverflow.com/users/5593959/dima-rostopira"}, "edited": false, "score": 0, "creation_date": 1488480424, "post_id": 42561217, "comment_id": 72260952, "body": "I would like through the library, but I just worried is that possible to do using only standard kotlinx.coroutines."}, {"owner": {"reputation": 3341, "user_id": 5090578, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/fc255635583ec7de35e0d6630ade4044?s=128&d=identicon&r=PG", "display_name": "Rostyslav Roshak", "link": "https://stackoverflow.com/users/5090578/rostyslav-roshak"}, "reply_to_user": {"reputation": 8164, "user_id": 5593959, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/9StDn.jpg?s=128&g=1", "display_name": "Dima Rostopira", "link": "https://stackoverflow.com/users/5593959/dima-rostopira"}, "edited": false, "score": 0, "creation_date": 1488480433, "post_id": 42561217, "comment_id": 72260961, "body": "launch is from kotlinx.coroutines"}, {"owner": {"reputation": 1839, "user_id": 882912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb0ee650f3ddaf676349ef9de068ad52?s=128&d=identicon&r=PG", "display_name": "KTCO", "link": "https://stackoverflow.com/users/882912/ktco"}, "edited": false, "score": 0, "creation_date": 1492567894, "post_id": 42561217, "comment_id": 74025812, "body": "Consider nesting <code>async(UI)</code> with <code>async(CommonPool)</code>, see <a href=\"http://stackoverflow.com/a/43151714/882912\">stackoverflow.com/a/43151714/882912</a>"}], "answers": [{"comments": [{"owner": {"reputation": 11535, "user_id": 961759, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ZqgkZ.jpg?s=128&g=1", "display_name": "Robert Estivill", "link": "https://stackoverflow.com/users/961759/robert-estivill"}, "edited": false, "score": 0, "creation_date": 1497961770, "post_id": 42570116, "comment_id": 76291302, "body": "Please refer to the official library for android coroutines -&gt; <a href=\"https://github.com/gildor/kotlin-coroutines-android/blob/master/coroutines-android/README.md\" rel=\"nofollow noreferrer\">github.com/gildor/kotlin-coroutines-android/blob/master/&hellip;</a>"}, {"owner": {"reputation": 11062, "user_id": 1104902, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e2ce37fa708768742edc4ed94b4cb76d?s=128&d=identicon&r=PG", "display_name": "pt2121", "link": "https://stackoverflow.com/users/1104902/pt2121"}, "reply_to_user": {"reputation": 11535, "user_id": 961759, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ZqgkZ.jpg?s=128&g=1", "display_name": "Robert Estivill", "link": "https://stackoverflow.com/users/961759/robert-estivill"}, "edited": false, "score": 0, "creation_date": 1497961936, "post_id": 42570116, "comment_id": 76291430, "body": "Is it from JetBrains or Android team? What do u mean by official?"}], "tags": [], "owner": {"reputation": 11062, "user_id": 1104902, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e2ce37fa708768742edc4ed94b4cb76d?s=128&d=identicon&r=PG", "display_name": "pt2121", "link": "https://stackoverflow.com/users/1104902/pt2121"}, "is_accepted": true, "score": 10, "last_activity_date": 1497962710, "last_edit_date": 1497962710, "creation_date": 1488511681, "answer_id": 42570116, "question_id": 42561217, "link": "https://stackoverflow.com/questions/42561217/how-to-use-kotlin-coroutines-await-on-main-thread/42570116#42570116", "title": "How to use Kotlin coroutines await() on main thread", "body": "<p><strong>Edit</strong>:</p>\n\n<p>Also see <a href=\"https://github.com/Kotlin/kotlinx.coroutines/blob/master/ui/kotlinx-coroutines-android/src/main/kotlin/kotlinx/coroutines/experimental/android/HandlerContext.kt\" rel=\"nofollow noreferrer\">an official example in Kotlin repo</a></p>\n\n<p>you need to implement <a href=\"https://github.com/Kotlin/kotlin-coroutines/blob/master/kotlin-coroutines-informal.md#continuation-interface\" rel=\"nofollow noreferrer\">Continuation</a> interface which makes a callback onto Android UI thread and <a href=\"https://github.com/Kotlin/kotlin-coroutines/blob/master/kotlin-coroutines-informal.md#coroutine-context\" rel=\"nofollow noreferrer\">Coroutine context</a></p>\n\n<p>e.g. (from <a href=\"https://gitlab.com/Starcarr/android-coroutines/blob/master/app/src/main/kotlin/com/starcarrlane/coroutines/experimental/Android.kt\" rel=\"nofollow noreferrer\">here</a>)</p>\n\n<pre><code>private class AndroidContinuation&lt;T&gt;(val cont: Continuation&lt;T&gt;) : Continuation&lt;T&gt; by cont {\n    override fun resume(value: T) {\n        if (Looper.myLooper() == Looper.getMainLooper()) cont.resume(value)\n        else Handler(Looper.getMainLooper()).post { cont.resume(value) }\n    }\n    override fun resumeWithException(exception: Throwable) {\n        if (Looper.myLooper() == Looper.getMainLooper()) cont.resumeWithException(exception)\n        else Handler(Looper.getMainLooper()).post { cont.resumeWithException(exception) }\n    }\n}\n\nobject Android : AbstractCoroutineContextElement(ContinuationInterceptor), ContinuationInterceptor {\n    override fun &lt;T&gt; interceptContinuation(continuation: Continuation&lt;T&gt;): Continuation&lt;T&gt; =\n        AndroidContinuation(continuation)\n}\n</code></pre>\n\n<p>Then try:</p>\n\n<pre><code>launch(Android) {\n    val aVal = a.await()\n    val bVal = b.await()\n    resultTV.setText((aVal * bVal).toString()) \n}\n</code></pre>\n\n<p>more info:</p>\n\n<p><a href=\"https://medium.com/@macastiblancot/android-coroutines-getting-rid-of-runonuithread-and-callbacks-cleaner-thread-handling-and-more-234c0a9bd8eb#.r2buf5e6h\" rel=\"nofollow noreferrer\">https://medium.com/@macastiblancot/android-coroutines-getting-rid-of-runonuithread-and-callbacks-cleaner-thread-handling-and-more-234c0a9bd8eb#.r2buf5e6h</a></p>\n"}, {"tags": [], "owner": {"reputation": 20308, "user_id": 1051598, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f9c354e780ce562daea0e21b99bfdc0d?s=128&d=identicon&r=PG", "display_name": "Roman  Elizarov", "link": "https://stackoverflow.com/users/1051598/roman-elizarov"}, "is_accepted": false, "score": 9, "last_activity_date": 1490542969, "creation_date": 1490542969, "answer_id": 43030833, "question_id": 42561217, "link": "https://stackoverflow.com/questions/42561217/how-to-use-kotlin-coroutines-await-on-main-thread/43030833#43030833", "title": "How to use Kotlin coroutines await() on main thread", "body": "<p>You shall replace <code>&lt; NEED UI thread here &gt;</code> in your code with <code>UI</code> context from <code>kotlinx-coroutines-android</code> module of <a href=\"https://github.com/Kotlin/kotlinx.coroutines\" rel=\"noreferrer\">kotlinx.coroutines</a> project. Its usage is explained in the <a href=\"https://github.com/Kotlin/kotlinx.coroutines/blob/master/ui/coroutines-guide-ui.md\" rel=\"noreferrer\">Guide to UI programming with coroutines</a> with quite a few examples.</p>\n"}, {"tags": [], "owner": {"reputation": 654, "user_id": 491816, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c68dcaaa0d308956907a9d43317aaef6?s=128&d=identicon&r=PG", "display_name": "nAndroid", "link": "https://stackoverflow.com/users/491816/nandroid"}, "is_accepted": false, "score": 0, "last_activity_date": 1502814800, "creation_date": 1502814800, "answer_id": 45697300, "question_id": 42561217, "link": "https://stackoverflow.com/questions/42561217/how-to-use-kotlin-coroutines-await-on-main-thread/45697300#45697300", "title": "How to use Kotlin coroutines await() on main thread", "body": "<p>Anko has a wrapper to do it very simply--\nsee: <a href=\"https://github.com/Kotlin/anko/wiki/Anko-Coroutines\" rel=\"nofollow noreferrer\">https://github.com/Kotlin/anko/wiki/Anko-Coroutines</a></p>\n\n<pre><code>private fun doCallAsync() = async(UI) {\n\n    val user = bg { getUser() }\n    val name = user.await().name\n    val nameView = findViewById(R.id.name) as TextView\n\n    nameView.text = name;\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2934, "user_id": 2163045, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/iAIbA.png?s=128&g=1", "display_name": "murt", "link": "https://stackoverflow.com/users/2163045/murt"}, "is_accepted": false, "score": 4, "last_activity_date": 1533117478, "last_edit_date": 1533117478, "creation_date": 1512125779, "answer_id": 47591896, "question_id": 42561217, "link": "https://stackoverflow.com/questions/42561217/how-to-use-kotlin-coroutines-await-on-main-thread/47591896#47591896", "title": "How to use Kotlin coroutines await() on main thread", "body": "<p>First of all include right library designed for Android</p>\n\n<p><strong><em>build.gradle</em></strong></p>\n\n<pre><code>apply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\n\nandroid{\n...\n   dependencies{\n      ...\n      implementation \"org.jetbrains.kotlinx:kotlinx-coroutines-android:0.19.3\"\n\n   }\n\n  kotlin {\n    experimental {\n        coroutines \"enable\"\n    }\n  }\n}\n</code></pre>\n\n<p>Then you are free to use <strong><em>UI</em></strong></p>\n\n<pre><code>suspend private fun getFilteredGList(enumList: List&lt;EnumXXX&gt;) = mList.filter {\n    ...\n}\n\nprivate fun filter() {\n    val enumList = listOf(EnumX1, EnumX2)\n    launch(UI){\n        val filteredList = getFilteredList(enumList)\n        setMarkersOnMap(filteredList)\n    }\n\n}\n</code></pre>\n\n<p>For those that expose project using <em>kotlin experimental</em> in <code>gradle</code> as <strong><em>.aar</em></strong> or <strong><em>.apk</em></strong>  to other projects module - Just remember, when You're using kotlin experimental parent modules/project have to accept <em>kotlin experimental</em> as well</p>\n\n<pre><code>kotlin {\n    experimental {\n        coroutines \"enable\"\n    }\n  }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 127, "user_id": 4288004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c71a13ea10117773c01ac54bd2ca2a57?s=128&d=identicon&r=PG&f=1", "display_name": "xuiqzy", "link": "https://stackoverflow.com/users/4288004/xuiqzy"}, "edited": false, "score": 0, "creation_date": 1589731272, "post_id": 57451079, "comment_id": 109403676, "body": "Doesn&#39;t this run statement 3 on the <code>Dispatchers.Main</code> thread and not the ui thread?"}], "tags": [], "owner": {"reputation": 109, "user_id": 2088427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d282f98b8f472cf13a575d236d07855b?s=128&d=identicon&r=PG", "display_name": "Oke Uwechue", "link": "https://stackoverflow.com/users/2088427/oke-uwechue"}, "is_accepted": false, "score": 0, "last_activity_date": 1565535583, "creation_date": 1565535583, "answer_id": 57451079, "question_id": 42561217, "link": "https://stackoverflow.com/questions/42561217/how-to-use-kotlin-coroutines-await-on-main-thread/57451079#57451079", "title": "How to use Kotlin coroutines await() on main thread", "body": "<p>This answer may be 2.5yrs after the OP's question but it may still help out others in a similar situation.</p>\n\n<p>The original goal can be achieved in a far simpler way than the accepted answer above without the use of async/await (statements 1, 2 and 3 will be executed in sequence, with their associated delays behaving as expected):</p>\n\n<pre><code>override fun onCreate(savedInstanceState: Bundle?) {\n    :\n    :\n    :\n    :\n    GlobalScope.launch(Dispatchers.Main) {\n\n    val aVal = a()   // statement 1\n    val bVal = b()   // statement 2\n\n    resultTV.setText((aVal * bVal).toString())    // statement 3\n    }\n    :\n    :\n}\n\nsuspend fun a(): Int {\n    delay(1_000L)\n    return 6\n}\n\nsuspend fun b(): Int {\n    delay(1_000L)\n    return 7\n}\n</code></pre>\n"}], "owner": {"reputation": 3341, "user_id": 5090578, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/fc255635583ec7de35e0d6630ade4044?s=128&d=identicon&r=PG", "display_name": "Rostyslav Roshak", "link": "https://stackoverflow.com/users/5090578/rostyslav-roshak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6019, "favorite_count": 1, "accepted_answer_id": 42570116, "answer_count": 5, "score": 11, "last_activity_date": 1565535583, "creation_date": 1488473294, "last_edit_date": 1552981765, "question_id": 42561217, "link": "https://stackoverflow.com/questions/42561217/how-to-use-kotlin-coroutines-await-on-main-thread", "title": "How to use Kotlin coroutines await() on main thread", "body": "<p>I just started learning Kotlin coroutines and was trying to simulate some long time API-calls with showing the result on the UI:</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n    fun log(msg: String) = println(\"[${Thread.currentThread().name}] $msg\")\n\n    override\n    fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        this.setContentView(R.layout.activity_main)\n        val resultTV = findViewById(R.id.text) as TextView\n\n        val a = async(CommonPool) {\n            delay(1_000L)\n            6\n        }\n\n        val b = async(CommonPool) {\n            delay(1_000L)\n            7\n        }\n\n        launch(&lt; NEED UI thread here &gt;) {\n            val aVal = a.await()\n            val bVal = b.await()\n            resultTV.setText((aVal * bVal).toString())\n        }\n    }\n}\n</code></pre>\n\n<p>I don't understand how could I possibly use <code>launch</code> method with <code>main</code> context. </p>\n\n<p>Unfortunately, I was not able to find anything about delivering results for some specific threads on <a href=\"https://github.com/Kotlin/kotlinx.coroutines/blob/master/coroutines-guide.md#concurrent-using-async\" rel=\"noreferrer\">the official tutorial for coroutines</a>.</p>\n"}, {"tags": ["spring", "kotlin", "reactive-programming", "spring-webflux"], "comments": [{"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 0, "creation_date": 1488456984, "post_id": 42553822, "comment_id": 72244827, "body": "Could <code>&quot;&#47;&quot;.route { GET (&quot;&#47;hello&quot;) ...</code> give you the route <code>&quot;&#47;&#47;hello&quot;</code>? Have you tried <code>&quot;&#47;&quot;.route { GET (&quot;hello&quot;)</code>?"}, {"owner": {"reputation": 45871, "user_id": 2788, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/28acae7d7979a1cd603921a198532e7d?s=128&d=identicon&r=PG", "display_name": "Strelok", "link": "https://stackoverflow.com/users/2788/strelok"}, "reply_to_user": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 0, "creation_date": 1488458206, "post_id": 42553822, "comment_id": 72245673, "body": "@marstran <code>&#47;hello</code> works, it&#39;s the nested <code>&#47;1&#47;hello</code> that doesn&#39;t work"}, {"owner": {"reputation": 5000, "user_id": 1092077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5778521f67d80de0ee3b213e4f159a59?s=128&d=identicon&r=PG", "display_name": "S&#233;bastien Deleuze", "link": "https://stackoverflow.com/users/1092077/s%c3%a9bastien-deleuze"}, "edited": false, "score": 1, "creation_date": 1488475130, "post_id": 42553822, "comment_id": 72257773, "body": "Looks like a bug, please create an issue on <a href=\"https://jira.spring.io/browse/SPR/\" rel=\"nofollow noreferrer\">jira.spring.io/browse/SPR</a>."}, {"owner": {"reputation": 45871, "user_id": 2788, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/28acae7d7979a1cd603921a198532e7d?s=128&d=identicon&r=PG", "display_name": "Strelok", "link": "https://stackoverflow.com/users/2788/strelok"}, "edited": false, "score": 0, "creation_date": 1488494893, "post_id": 42553822, "comment_id": 72268824, "body": "For others looking for information a bug has been raised: <a href=\"https://jira.spring.io/browse/SPR-15310\" rel=\"nofollow noreferrer\">jira.spring.io/browse/SPR-15310</a>"}], "answers": [{"tags": [], "owner": {"reputation": 46241, "user_id": 22982, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d1d5b668ad4b1fccb1a80e6789d11b5?s=128&d=identicon&r=PG", "display_name": "Brian Clozel", "link": "https://stackoverflow.com/users/22982/brian-clozel"}, "is_accepted": false, "score": 0, "last_activity_date": 1510825152, "creation_date": 1510825152, "answer_id": 47326174, "question_id": 42553822, "link": "https://stackoverflow.com/questions/42553822/spring-web-flux-reactive-functional-route-not-working-as-expected-with-kotlin/47326174#47326174", "title": "Spring Web Flux (reactive) functional route not working as expected with Kotlin", "body": "<p>This issue has been fixed in <a href=\"https://jira.spring.io/browse/SPR-15310\" rel=\"nofollow noreferrer\">SPR-15310</a>.</p>\n"}], "owner": {"reputation": 45871, "user_id": 2788, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/28acae7d7979a1cd603921a198532e7d?s=128&d=identicon&r=PG", "display_name": "Strelok", "link": "https://stackoverflow.com/users/2788/strelok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1655, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1510825152, "creation_date": 1488453028, "last_edit_date": 1488463197, "question_id": 42553822, "link": "https://stackoverflow.com/questions/42553822/spring-web-flux-reactive-functional-route-not-working-as-expected-with-kotlin", "title": "Spring Web Flux (reactive) functional route not working as expected with Kotlin", "body": "<p>Hello good people interested in writing spring apps in Kotlin. I am playing with Spring Boot 2.0.0 snapshot and <code>spring-webflux</code>. This piece of code:</p>\n\n<pre><code>@Component\nclass TestRouter() : RouterFunction&lt;ServerResponse&gt; {\n  override fun route(request: ServerRequest) = route(request) {\n    \"/\".route {\n      GET(\"/hello\") { ServerResponse.ok().body(BodyInserters.fromObject(\"World\")) }\n      \"/{id}\".route {\n        GET(\"/hello\") { ServerResponse.ok().body(BodyInserters.fromObject(\"World ${request.pathVariable(\"id\")}\")) }\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>does not work as expected (at least as I would expect:))</p>\n\n<pre><code>\u279c  ~ curl -i http://localhost:8080/hello\nHTTP/1.1 200 OK\ntransfer-encoding: chunked\nContent-Type: text/plain;charset=UTF-8\n\nWorld\n</code></pre>\n\n<p>but:</p>\n\n<pre><code>\u279c  ~ curl -i http://localhost:8080/1/hello\nHTTP/1.1 404 Not Found\ncontent-length: 0\n</code></pre>\n\n<p>Working case trace:</p>\n\n<pre><code>2017-03-03 00:58:03.865 TRACE 7666 --- [ctor-http-nio-4] o.s.w.r.f.server.RequestPredicates       : Pattern \"//**\" matches against value \"/hello\"\n2017-03-03 00:58:03.865 DEBUG 7666 --- [ctor-http-nio-4] o.s.w.r.function.server.RouterFunctions  : Nested predicate \"//**\" matches against \"GET /hello\"\n2017-03-03 00:58:03.865 TRACE 7666 --- [ctor-http-nio-4] o.s.w.r.f.server.RequestPredicates       : Method \"GET\" matches against value \"GET\"\n2017-03-03 00:58:03.866 TRACE 7666 --- [ctor-http-nio-4] o.s.w.r.f.server.RequestPredicates       : Pattern \"/hello\" matches against value \"/hello\"\n2017-03-03 00:58:03.866 DEBUG 7666 --- [ctor-http-nio-4] o.s.w.r.function.server.RouterFunctions  : Predicate \"(GET &amp;&amp; /hello)\" matches against \"GET /hello\"\n</code></pre>\n\n<p>Not working case trace:</p>\n\n<pre><code>2017-03-03 00:59:26.958 TRACE 7666 --- [ctor-http-nio-1] o.s.w.r.f.server.RequestPredicates       : Pattern \"//**\" matches against value \"/1/hello\"\n2017-03-03 00:59:26.958 DEBUG 7666 --- [ctor-http-nio-1] o.s.w.r.function.server.RouterFunctions  : Nested predicate \"//**\" matches against \"GET /1/hello\"\n2017-03-03 00:59:26.958 TRACE 7666 --- [ctor-http-nio-1] o.s.w.r.f.server.RequestPredicates       : Method \"GET\" matches against value \"GET\"\n2017-03-03 00:59:26.958 TRACE 7666 --- [ctor-http-nio-1] o.s.w.r.f.server.RequestPredicates       : Pattern \"/hello\" does not match against value \"/1/hello\"\n2017-03-03 00:59:26.959 TRACE 7666 --- [ctor-http-nio-1] o.s.w.r.f.server.RequestPredicates       : Pattern \"/{id}/**\" matches against value \"/1/hello\"\n2017-03-03 00:59:26.959 DEBUG 7666 --- [ctor-http-nio-1] o.s.w.r.function.server.RouterFunctions  : Nested predicate \"/{id}/**\" matches against \"GET /1/hello\"\n2017-03-03 00:59:26.959 TRACE 7666 --- [ctor-http-nio-1] o.s.w.r.f.server.RequestPredicates       : Method \"GET\" matches against value \"GET\"\n2017-03-03 00:59:26.959 TRACE 7666 --- [ctor-http-nio-1] o.s.w.r.f.server.RequestPredicates       : Pattern \"/hello\" does not match against value \"/1/hello\"\n</code></pre>\n\n<p>This seems like a bug (as the <code>\"/{id}\".route {...}</code> supposedly is using RouterFunctions.nest), but I could be wrong. Your thoughts and help are welcome.</p>\n\n<p>I obviously know that I can make <code>/1/hello</code> work by just writing <code>GET(\"/{id}/hello\") { ... }</code>, but I am interested in the nested <code>.route { ...}</code> variant as it supports my use case of adding nested routes from another location (like a map, etc). </p>\n"}, {"tags": ["unit-testing", "groovy", "mocking", "kotlin", "spock"], "answers": [{"comments": [{"owner": {"reputation": 49359, "user_id": 1082681, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/45ea14ad7f04aa78ce58cb2b52234f5b?s=128&d=identicon&r=PG", "display_name": "kriegaex", "link": "https://stackoverflow.com/users/1082681/kriegaex"}, "edited": false, "score": 2, "creation_date": 1488458700, "post_id": 42555752, "comment_id": 72246014, "body": "Before this quick answer came I wanted to reproduce the problem and noted that your sample code does not show how the mock method is called in the test. So I had to make ssumptions on that, which is not nice. Next time please also describe how you use something, not just how you declare it. <code>...</code> is not very helpful here."}, {"owner": {"reputation": 3531, "user_id": 3930424, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/dOJRF.jpg?s=128&g=1", "display_name": "GROX13", "link": "https://stackoverflow.com/users/3930424/grox13"}, "edited": false, "score": 0, "creation_date": 1488459756, "post_id": 42555752, "comment_id": 72246716, "body": "Thank you for your remark I&#39;ll try to foresee it in my questions but you could have just asked and I would have added that part of code to my question."}], "tags": [], "owner": {"reputation": 46, "user_id": 7647170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b927715d3a6485690dc2fb3127aeef1c?s=128&d=identicon&r=PG&f=1", "display_name": "Dusu", "link": "https://stackoverflow.com/users/7647170/dusu"}, "is_accepted": true, "score": 3, "last_activity_date": 1488458265, "creation_date": 1488458265, "answer_id": 42555752, "question_id": 42553786, "link": "https://stackoverflow.com/questions/42553786/in-spock-unit-test-mocked-method-is-not-being-called/42555752#42555752", "title": "In Spock unit test mocked method is not being called", "body": "<p>Please try this:</p>\n\n<pre><code>open fun findUnconfirmedTransactions(start: LocalDate, days: Days): ScrollableResults\n</code></pre>\n\n<p>Mocking needs to extend function and Spock won't be able to do so unless function is open in Kotlin.</p>\n"}], "owner": {"reputation": 3531, "user_id": 3930424, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/dOJRF.jpg?s=128&g=1", "display_name": "GROX13", "link": "https://stackoverflow.com/users/3930424/grox13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 978, "favorite_count": 2, "accepted_answer_id": 42555752, "answer_count": 1, "score": 1, "last_activity_date": 1488458265, "creation_date": 1488452914, "question_id": 42553786, "link": "https://stackoverflow.com/questions/42553786/in-spock-unit-test-mocked-method-is-not-being-called", "title": "In Spock unit test mocked method is not being called", "body": "<p>I'm trying to implement unit test using <a href=\"http://spockframework.org/\" rel=\"nofollow noreferrer\">Spock framework</a> this is what my test looks like:</p>\n\n<pre><code>    def setup() {\n        scrollableResultsMock = Mock(ScrollableResults)\n        paymentRepositoryMock = Mock(PaymentRepository)\n\n        paymentRegistryService = new PaymentRegistryService(paymentRepositoryMock)\n    }\n\n    @Unroll\n    def 'should correctly process'() {\n        given:\n        paymentRepositoryMock.findUnconfirmedTransactions(_ as LocalDate, _ as Days) &gt;&gt; scrollableResultsMock\n        ...\n    }\n</code></pre>\n\n<p>Here is class in which I'm trying to inject mocked object:</p>\n\n<pre><code>@Service\nopen class PaymentRegistryService\n@Autowired\nconstructor(\n        val paymentRepository: PaymentRepository\n) {\n\n    @Transactional\n    open fun parseRegistryFileStream(input: InputStream): LinkedList&lt;Pair&lt;Long, String&gt;&gt; {\n        ...\n        val registry = paymentRepository.findUnconfirmedTransactions(start, PERIOD)\n        ...\n    }\n}\n</code></pre>\n\n<p>While running test instead of calling my method real <code>paymentRepository</code> method is being called. I don't understand what could be the reason. <code>LocalDate</code> and <code>Days</code> are from <a href=\"http://joda-time.sourceforge.net/\" rel=\"nofollow noreferrer\">Joda time</a> and finally this is <code>paymentRepository</code> class:</p>\n\n<pre><code>@Repository\n@Transactional\nopen class PaymentRepository : AbstractRepository&lt;Payment, Long&gt;(Payment::class.java) {\n\n    fun findUnconfirmedTransactions(start: LocalDate, days: Days): ScrollableResults = criteria().add(\n            and(\n                    eq(\"isConfirmed\", false),\n                    ge(\"transactionDateTime\", start),\n                    lt(\"transactionDateTime\", start.plus(days))\n            )).setCacheMode(CacheMode.IGNORE).scroll(ScrollMode.FORWARD_ONLY)\n\n}\n</code></pre>\n"}, {"tags": ["unit-testing", "mockito", "rx-java", "kotlin", "observable"], "comments": [{"owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 0, "creation_date": 1488453000, "post_id": 42553547, "comment_id": 72242178, "body": "Let me rearrange your code:  Object x = accountManager.getToken(); System.out.println(x); System.out.println(x); // &lt;-- should this print a non-null value?  Observable.just(x).subscribe(System.out::println);"}, {"owner": {"reputation": 11131, "user_id": 1118475, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9f44a846a6337e4868ce0c8951fc246a?s=128&d=identicon&r=PG", "display_name": "Micha\u0142 Klimczak", "link": "https://stackoverflow.com/users/1118475/micha%c5%82-klimczak"}, "reply_to_user": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 0, "creation_date": 1488453728, "post_id": 42553547, "comment_id": 72242636, "body": "No, in your example you only invoked <code>getToken()</code> once. If you wrote <code>Object x = accountManager.getToken();</code> <code>Object y = accountManager.getToken();</code> then in my example <code>y</code> would not be null. The point is that upon the second read from <code>accountManager.getToken()</code> it already has the token. If that function was resolved twice inside <code>Observable.just</code>, it would return different values (as it does in my second example)."}, {"owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 0, "creation_date": 1488454767, "post_id": 42553547, "comment_id": 72243335, "body": "Do you think just() invokes your getToken function? Wrong. Just() takes a constant value reference and keeps handing out the <b>same</b> reference to subscribers."}, {"owner": {"reputation": 11131, "user_id": 1118475, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9f44a846a6337e4868ce0c8951fc246a?s=128&d=identicon&r=PG", "display_name": "Micha\u0142 Klimczak", "link": "https://stackoverflow.com/users/1118475/micha%c5%82-klimczak"}, "reply_to_user": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 0, "creation_date": 1488455147, "post_id": 42553547, "comment_id": 72243581, "body": "That&#39;s what I figured. But thanks for ensuring me with that. Now, do you know some more elegant solution to this problem than mapping null?"}, {"owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 0, "creation_date": 1488455702, "post_id": 42553547, "comment_id": 72243968, "body": "<code>Observable.fromCallable(() -&gt; accountManager.getToken())</code>."}, {"owner": {"reputation": 11131, "user_id": 1118475, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9f44a846a6337e4868ce0c8951fc246a?s=128&d=identicon&r=PG", "display_name": "Micha\u0142 Klimczak", "link": "https://stackoverflow.com/users/1118475/micha%c5%82-klimczak"}, "reply_to_user": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 0, "creation_date": 1488455828, "post_id": 42553547, "comment_id": 72244054, "body": "Damn, I feel so stupid now... Thanks. Can you write answer so that I can accept that?"}], "answers": [{"tags": [], "owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "is_accepted": true, "score": 3, "last_activity_date": 1488456362, "creation_date": 1488456362, "answer_id": 42555072, "question_id": 42553547, "link": "https://stackoverflow.com/questions/42553547/retrywhen-doesnt-call-whats-inside-observable-just/42555072#42555072", "title": "retryWhen() doesn&#39;t call what&#39;s inside Observable.just()", "body": "<p>The <code>just()</code> takes a constant value reference and keeps handing out the same reference to subscribers.</p>\n\n<p>What you need is <code>fromCallable</code>:</p>\n\n<pre><code>Observable.fromCallable(() -&gt; accountManager.getToken())\n...\n</code></pre>\n\n<p>Whenever a new subscriber (such as a retry) comes in, the lambda is executed again.</p>\n"}], "owner": {"reputation": 11131, "user_id": 1118475, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9f44a846a6337e4868ce0c8951fc246a?s=128&d=identicon&r=PG", "display_name": "Micha\u0142 Klimczak", "link": "https://stackoverflow.com/users/1118475/micha%c5%82-klimczak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 0, "accepted_answer_id": 42555072, "answer_count": 1, "score": 0, "last_activity_date": 1488456362, "creation_date": 1488452365, "last_edit_date": 1488454312, "question_id": 42553547, "link": "https://stackoverflow.com/questions/42553547/retrywhen-doesnt-call-whats-inside-observable-just", "title": "retryWhen() doesn&#39;t call what&#39;s inside Observable.just()", "body": "<p>I have a test which in which I check retry mechanism for token authorisation. Inside that test I return null as token in the beginning and then I return a valid token, like this:</p>\n\n<pre><code>whenever(accountManager.getToken())\n            .thenReturn(null)\n            .thenReturn(\"some_token\") \n</code></pre>\n\n<p>Then I have an Observable:</p>\n\n<pre><code>    return Observable.just(accountManager.getToken())\n            ...\n            .retryWhen { retryOnAuthExceptionWithBackoff(it) }\n</code></pre>\n\n<p>It should get the token, send it somewhere, wait for response and then it the response is wrong, retry the whole process again until it succeeds.</p>\n\n<p>The problem is that when <code>retryWhen()</code> kicks in, the source observable is not called again, just its initial value is returned immediately.</p>\n\n<p>On the other hand, this <strong>does</strong> work:</p>\n\n<pre><code>    return Observable.just(null)\n            .map{ accountManager.getToken() }\n            ...\n            .retryWhen { retryOnAuthExceptionWithBackoff(it) }\n</code></pre>\n\n<p>Is it by design or is it a bug? If it's by design, what would be an elegant way to write this, because <code>Observable.just(null)</code> looks just ugly.</p>\n"}, {"tags": ["java", "android", "date", "datetime", "kotlin"], "comments": [{"owner": {"reputation": 1253974, "user_id": 22656, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG", "display_name": "Jon Skeet", "link": "https://stackoverflow.com/users/22656/jon-skeet"}, "edited": false, "score": 2, "creation_date": 1488451194, "post_id": 42553017, "comment_id": 72240989, "body": "What are <code>startDate</code> and <code>endDate</code>, exactly? (We don&#39;t even know their types at the moment.) If you could use Joda Time instead, that would be a <i>lot</i> better, btw."}, {"owner": {"reputation": 721, "user_id": 7424946, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/15ay0.jpg?s=128&g=1", "display_name": "debo.stackoverflow", "link": "https://stackoverflow.com/users/7424946/debo-stackoverflow"}, "reply_to_user": {"reputation": 1253974, "user_id": 22656, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG", "display_name": "Jon Skeet", "link": "https://stackoverflow.com/users/22656/jon-skeet"}, "edited": false, "score": 0, "creation_date": 1488451817, "post_id": 42553017, "comment_id": 72241405, "body": "@JonSkeet startDate = (string)2/3/2017 endDate = (string)3/3/2017"}, {"owner": {"reputation": 1253974, "user_id": 22656, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG", "display_name": "Jon Skeet", "link": "https://stackoverflow.com/users/22656/jon-skeet"}, "edited": false, "score": 0, "creation_date": 1488452259, "post_id": 42553017, "comment_id": 72241697, "body": "So you&#39;re using the deprecated <code>Date(String)</code> constructor? I&#39;d stop doing that, to start with. I&#39;d suggest using <code>SimpleDateFormat</code> with a specific format and using the UTC time zone. (It may well be that you&#39;re getting the wrong result because of a DST transition - it&#39;s hard to know without knowing which time zone you&#39;re in.)"}, {"owner": {"reputation": 721, "user_id": 7424946, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/15ay0.jpg?s=128&g=1", "display_name": "debo.stackoverflow", "link": "https://stackoverflow.com/users/7424946/debo-stackoverflow"}, "reply_to_user": {"reputation": 1253974, "user_id": 22656, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG", "display_name": "Jon Skeet", "link": "https://stackoverflow.com/users/22656/jon-skeet"}, "edited": false, "score": 0, "creation_date": 1488453269, "post_id": 42553017, "comment_id": 72242361, "body": "@JonSkeet Ok I have implemented Sachin answer which uses the Simple date Format.From now on will not use Date constructor."}, {"owner": {"reputation": 1253974, "user_id": 22656, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG", "display_name": "Jon Skeet", "link": "https://stackoverflow.com/users/22656/jon-skeet"}, "edited": false, "score": 1, "creation_date": 1488453291, "post_id": 42553017, "comment_id": 72242375, "body": "Glad to hear it. That constructor was deprecated over 20 years ago :)"}, {"owner": {"reputation": 721, "user_id": 7424946, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/15ay0.jpg?s=128&g=1", "display_name": "debo.stackoverflow", "link": "https://stackoverflow.com/users/7424946/debo-stackoverflow"}, "reply_to_user": {"reputation": 1253974, "user_id": 22656, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG", "display_name": "Jon Skeet", "link": "https://stackoverflow.com/users/22656/jon-skeet"}, "edited": false, "score": 0, "creation_date": 1488453395, "post_id": 42553017, "comment_id": 72242431, "body": "@JonSkeet :) Thanks"}, {"owner": {"reputation": 213390, "user_id": 642706, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/ZWEI3.jpg?s=128&g=1", "display_name": "Basil Bourque", "link": "https://stackoverflow.com/users/642706/basil-bourque"}, "edited": false, "score": 2, "creation_date": 1518232811, "post_id": 42553017, "comment_id": 84433047, "body": "FYI, the troublesome old date-time classes such as <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/Date.html\" rel=\"nofollow noreferrer\"><code>java.util.Date</code></a>, <code>java.util.Calendar</code> and <code>java.text.SimpleDateFormat</code> are now <a href=\"https://en.wikipedia.org/wiki/Legacy_system\" rel=\"nofollow noreferrer\">legacy</a>, supplanted by the <a href=\"https://docs.oracle.com/javase/9/docs/api/java/time/package-summary.html\" rel=\"nofollow noreferrer\">java.time</a> classes built into Java 8 &amp; Java 9. See <a href=\"https://docs.oracle.com/javase/tutorial/datetime/TOC.html\" rel=\"nofollow noreferrer\">Tutorial by Oracle</a>. <b>See the <a href=\"https://stackoverflow.com/a/42553293/642706\">modern Answer by Anton Balaniuc</a>.</b>"}, {"owner": {"reputation": 1086, "user_id": 5697474, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sPr2gIAjPhw/AAAAAAAAAAI/AAAAAAAADlg/EUXWUbvNAwc/photo.jpg?sz=128", "display_name": "Syed Danish Haider", "link": "https://stackoverflow.com/users/5697474/syed-danish-haider"}, "edited": false, "score": 0, "creation_date": 1531136071, "post_id": 42553017, "comment_id": 89467600, "body": "follow the below link it will work for u.the easy way <a href=\"https://stackoverflow.com/a/51244555/5697474\">stackoverflow.com/a/51244555/5697474</a>"}], "answers": [{"comments": [{"owner": {"reputation": 721, "user_id": 7424946, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/15ay0.jpg?s=128&g=1", "display_name": "debo.stackoverflow", "link": "https://stackoverflow.com/users/7424946/debo-stackoverflow"}, "edited": false, "score": 0, "creation_date": 1488451538, "post_id": 42553096, "comment_id": 72241223, "body": "It is still showing 28 days for 2/3/2017,3/3/2017.Wait using joda time and notifying you"}, {"owner": {"reputation": 2284, "user_id": 2663579, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5e3dad36919bf2f2f510657f1defbf6b?s=128&d=identicon&r=PG", "display_name": "SachinSarawgi", "link": "https://stackoverflow.com/users/2663579/sachinsarawgi"}, "reply_to_user": {"reputation": 721, "user_id": 7424946, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/15ay0.jpg?s=128&g=1", "display_name": "debo.stackoverflow", "link": "https://stackoverflow.com/users/7424946/debo-stackoverflow"}, "edited": false, "score": 0, "creation_date": 1488451617, "post_id": 42553096, "comment_id": 72241268, "body": "Could you please tell what is the value of <code>startDate</code> and <code>endDate</code> variable."}, {"owner": {"reputation": 721, "user_id": 7424946, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/15ay0.jpg?s=128&g=1", "display_name": "debo.stackoverflow", "link": "https://stackoverflow.com/users/7424946/debo-stackoverflow"}, "edited": false, "score": 0, "creation_date": 1488451727, "post_id": 42553096, "comment_id": 72241343, "body": "startDate = (string)2/3/2017 endDate = (string)3/3/2017"}, {"owner": {"reputation": 2284, "user_id": 2663579, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5e3dad36919bf2f2f510657f1defbf6b?s=128&d=identicon&r=PG", "display_name": "SachinSarawgi", "link": "https://stackoverflow.com/users/2663579/sachinsarawgi"}, "reply_to_user": {"reputation": 721, "user_id": 7424946, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/15ay0.jpg?s=128&g=1", "display_name": "debo.stackoverflow", "link": "https://stackoverflow.com/users/7424946/debo-stackoverflow"}, "edited": false, "score": 0, "creation_date": 1488451938, "post_id": 42553096, "comment_id": 72241479, "body": "This method is deprecated its better to use SimpleDateFormat. Do you want to continue with this code only?? You can check here <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Date.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/java/util/Date.html</a>"}, {"owner": {"reputation": 721, "user_id": 7424946, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/15ay0.jpg?s=128&g=1", "display_name": "debo.stackoverflow", "link": "https://stackoverflow.com/users/7424946/debo-stackoverflow"}, "edited": false, "score": 0, "creation_date": 1488452054, "post_id": 42553096, "comment_id": 72241561, "body": "Ok then I will try to use SimpleDateFormat.But later.For now I want to correct this as soon as posible"}, {"owner": {"reputation": 2284, "user_id": 2663579, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5e3dad36919bf2f2f510657f1defbf6b?s=128&d=identicon&r=PG", "display_name": "SachinSarawgi", "link": "https://stackoverflow.com/users/2663579/sachinsarawgi"}, "reply_to_user": {"reputation": 721, "user_id": 7424946, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/15ay0.jpg?s=128&g=1", "display_name": "debo.stackoverflow", "link": "https://stackoverflow.com/users/7424946/debo-stackoverflow"}, "edited": false, "score": 0, "creation_date": 1488452104, "post_id": 42553096, "comment_id": 72241589, "body": "What is the format pf string date. is it &quot;MM/dd/yyyy&quot;??"}, {"owner": {"reputation": 721, "user_id": 7424946, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/15ay0.jpg?s=128&g=1", "display_name": "debo.stackoverflow", "link": "https://stackoverflow.com/users/7424946/debo-stackoverflow"}, "edited": false, "score": 0, "creation_date": 1488452176, "post_id": 42553096, "comment_id": 72241634, "body": "It is dd/MM/yyyy . So 2/3/2017 is day = 2,month = 3 and year = 2017"}, {"owner": {"reputation": 2284, "user_id": 2663579, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5e3dad36919bf2f2f510657f1defbf6b?s=128&d=identicon&r=PG", "display_name": "SachinSarawgi", "link": "https://stackoverflow.com/users/2663579/sachinsarawgi"}, "reply_to_user": {"reputation": 721, "user_id": 7424946, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/15ay0.jpg?s=128&g=1", "display_name": "debo.stackoverflow", "link": "https://stackoverflow.com/users/7424946/debo-stackoverflow"}, "edited": false, "score": 0, "creation_date": 1488452473, "post_id": 42553096, "comment_id": 72241845, "body": "You are getting 28 days because your compiler is thinking <code>day = 3,month = 2 and year = 2017 </code>"}, {"owner": {"reputation": 721, "user_id": 7424946, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/15ay0.jpg?s=128&g=1", "display_name": "debo.stackoverflow", "link": "https://stackoverflow.com/users/7424946/debo-stackoverflow"}, "edited": false, "score": 0, "creation_date": 1488452570, "post_id": 42553096, "comment_id": 72241904, "body": "Yes i just saw that.If i exchange the position of month with day and vice versa the result is correct.Dont know why the format has to be this way MM/dd/yyyy and not dd/MM/yyyy.Anyways trying your code and notifying you"}, {"owner": {"reputation": 2284, "user_id": 2663579, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5e3dad36919bf2f2f510657f1defbf6b?s=128&d=identicon&r=PG", "display_name": "SachinSarawgi", "link": "https://stackoverflow.com/users/2663579/sachinsarawgi"}, "reply_to_user": {"reputation": 721, "user_id": 7424946, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/15ay0.jpg?s=128&g=1", "display_name": "debo.stackoverflow", "link": "https://stackoverflow.com/users/7424946/debo-stackoverflow"}, "edited": false, "score": 0, "creation_date": 1488452703, "post_id": 42553096, "comment_id": 72241989, "body": "Please check Oracle documentation on Date object. Link already given in upper comment. You will understand why the format is like this."}, {"owner": {"reputation": 721, "user_id": 7424946, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/15ay0.jpg?s=128&g=1", "display_name": "debo.stackoverflow", "link": "https://stackoverflow.com/users/7424946/debo-stackoverflow"}, "edited": false, "score": 0, "creation_date": 1488453015, "post_id": 42553096, "comment_id": 72242188, "body": "Thanks for your time.The date format was wrong in my part.I upvoted and accepted your answer"}, {"owner": {"reputation": 2284, "user_id": 2663579, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5e3dad36919bf2f2f510657f1defbf6b?s=128&d=identicon&r=PG", "display_name": "SachinSarawgi", "link": "https://stackoverflow.com/users/2663579/sachinsarawgi"}, "reply_to_user": {"reputation": 721, "user_id": 7424946, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/15ay0.jpg?s=128&g=1", "display_name": "debo.stackoverflow", "link": "https://stackoverflow.com/users/7424946/debo-stackoverflow"}, "edited": false, "score": 0, "creation_date": 1488453058, "post_id": 42553096, "comment_id": 72242223, "body": "Thanks you @debo.stackoverflow. Happy to help."}], "tags": [], "owner": {"reputation": 2284, "user_id": 2663579, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5e3dad36919bf2f2f510657f1defbf6b?s=128&d=identicon&r=PG", "display_name": "SachinSarawgi", "link": "https://stackoverflow.com/users/2663579/sachinsarawgi"}, "is_accepted": true, "score": 41, "last_activity_date": 1488452642, "last_edit_date": 1495542882, "creation_date": 1488451190, "answer_id": 42553096, "question_id": 42553017, "link": "https://stackoverflow.com/questions/42553017/android-calculate-days-between-two-dates/42553096#42553096", "title": "Android calculate days between two dates", "body": "<p>Your code for generating date object:</p>\n\n<pre><code>Date date = new Date(\"2/3/2017\"); //deprecated\n</code></pre>\n\n<p>You are getting 28 days as answer because according to <code>Date(String)</code> constructor it is thinking day = 3,month = 2 and year = 2017</p>\n\n<p>You can convert String to Date as follows:</p>\n\n<pre><code>String dateStr = \"2/3/2017\";\nSimpleDateFormat sdf = new SimpleDateFormat(\"dd/MM/yyyy\");\nDate date = sdf.parse(dateStr);\n</code></pre>\n\n<p>Use above template to make your Date object. Then use below code for calculating days in between two dates. Hope this clear the thing.</p>\n\n<p>It can de done as follows:</p>\n\n<pre><code>long diff = endDateValue.getTime() - startDateValue.getTime();\nSystem.out.println (\"Days: \" + TimeUnit.DAYS.convert(diff, TimeUnit.MILLISECONDS));\n</code></pre>\n\n<p>Please check <a href=\"https://stackoverflow.com/questions/20165564/calculating-days-between-two-dates-with-in-java\">link</a></p>\n\n<p>If you use Joda Time it is much more simple:</p>\n\n<pre><code>int days = Days.daysBetween(date1, date2).getDays();\n</code></pre>\n\n<p>Please check <a href=\"https://stackoverflow.com/questions/7103064/java-calculate-the-number-of-days-between-two-dates\">JodaTime</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/12105164/java-joda-time-download-and-install-step-by-step\">How to use JodaTime in Java Project</a></p>\n"}, {"comments": [{"owner": {"reputation": 55, "user_id": 12261116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nn6en.jpg?s=128&g=1", "display_name": "tenTen", "link": "https://stackoverflow.com/users/12261116/tenten"}, "edited": false, "score": 0, "creation_date": 1607401898, "post_id": 42553213, "comment_id": 115254627, "body": "perfect answer! thanks bro"}], "tags": [], "owner": {"reputation": 326, "user_id": 7646491, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-W1XJTZbPrnE/AAAAAAAAAAI/AAAAAAAAABU/RtH2ngwtx1g/photo.jpg?sz=128", "display_name": "Jitendra virani", "link": "https://stackoverflow.com/users/7646491/jitendra-virani"}, "is_accepted": false, "score": 13, "last_activity_date": 1488451511, "creation_date": 1488451511, "answer_id": 42553213, "question_id": 42553017, "link": "https://stackoverflow.com/questions/42553017/android-calculate-days-between-two-dates/42553213#42553213", "title": "Android calculate days between two dates", "body": "<pre><code>public static int getDaysDifference(Date fromDate,Date toDate)\n{\nif(fromDate==null||toDate==null)\nreturn 0;\n\nreturn (int)( (toDate.getTime() - fromDate.getTime()) / (1000 * 60 * 60 * 24));\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 38048, "user_id": 2491410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46129117115e53dc8229f938120209c8?s=128&d=identicon&r=PG", "display_name": "Meno Hochschild", "link": "https://stackoverflow.com/users/2491410/meno-hochschild"}, "edited": false, "score": 2, "creation_date": 1488454844, "post_id": 42553293, "comment_id": 72243384, "body": "No not available on Android."}, {"owner": {"reputation": 213390, "user_id": 642706, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/ZWEI3.jpg?s=128&g=1", "display_name": "Basil Bourque", "link": "https://stackoverflow.com/users/642706/basil-bourque"}, "edited": false, "score": 1, "creation_date": 1518232954, "post_id": 42553293, "comment_id": 84433072, "body": "FYI, the troublesome old date-time classes such as <code>java.util.Date</code>, <code>java.util.Calendar</code>, and <code>java.text.SimpleDateFormat</code> are now legacy, supplanted by the <a href=\"https://docs.oracle.com/javase/9/docs/api/java/time/package-summary.html\" rel=\"nofollow noreferrer\">java.time</a> classes. Much of the <i>java.time</i> functionality is back-ported to Java 6 &amp; Java 7 in the <a href=\"http://www.threeten.org/threetenbp/\" rel=\"nofollow noreferrer\"><b><i>ThreeTen-Backport</i></b></a> project. Further adapted for earlier Android in the <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow noreferrer\"><b><i>ThreeTenABP</i></b></a> project. See <a href=\"http://stackoverflow.com/q/38922754/642706\"><i>How to use ThreeTenABP\u2026</i></a>."}, {"owner": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "edited": false, "score": 0, "creation_date": 1585681089, "post_id": 42553293, "comment_id": 107846428, "body": "Built-in since Android API level 26. For lower API levels available through the backport, <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow noreferrer\">ThreeTenABP</a>, see <a href=\"https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project\">How to use ThreeTenABP in Android Project</a>."}, {"owner": {"reputation": 440, "user_id": 1869343, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/af7f65e53496b4f79b70d932becef315?s=128&d=identicon&r=PG", "display_name": "7200rpm", "link": "https://stackoverflow.com/users/1869343/7200rpm"}, "edited": false, "score": 2, "creation_date": 1587525545, "post_id": 42553293, "comment_id": 108543019, "body": "I can confirm this is now available on Android, <i>even for less than API 26</i>. Instead of using the otherwise excellent ThreeTenABP, you just need to use Android 4.0 and add in some simple config: <a href=\"https://developer.android.com/studio/preview/features#j8-desugar\" rel=\"nofollow noreferrer\">developer.android.com/studio/preview/features#j8-desugar</a>"}], "tags": [], "owner": {"reputation": 8332, "user_id": 6440704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/816327571e74d2518fa5d5feeb6be737?s=128&d=identicon&r=PG", "display_name": "Anton Balaniuc", "link": "https://stackoverflow.com/users/6440704/anton-balaniuc"}, "is_accepted": false, "score": 7, "last_activity_date": 1488453182, "last_edit_date": 1488453182, "creation_date": 1488451724, "answer_id": 42553293, "question_id": 42553017, "link": "https://stackoverflow.com/questions/42553017/android-calculate-days-between-two-dates/42553293#42553293", "title": "Android calculate days between two dates", "body": "<p>Does <code>Android</code> fully support <code>java-8</code>? If yes you can simple use <code>ChronoUnit</code> <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/temporal/ChronoUnit.html\" rel=\"noreferrer\">class</a> </p>\n\n<pre><code>LocalDate start = LocalDate.of(2017,2,3);\nLocalDate end = LocalDate.of(2017,3,3);\n\nSystem.out.println(ChronoUnit.DAYS.between(start, end)); // 28\n</code></pre>\n\n<p>or same thing using formatter</p>\n\n<pre><code>DateTimeFormatter formatter = DateTimeFormatter.ofPattern(\"M/d/yyyy\");\nLocalDate start = LocalDate.parse(\"2/3/2017\",formatter);\nLocalDate end = LocalDate.parse(\"3/3/2017\",formatter);\n\nSystem.out.println(ChronoUnit.DAYS.between(start, end)); // 28\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 492, "user_id": 4088357, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-uUB8b5mzm64/AAAAAAAAAAI/AAAAAAAAADM/Hw8QDW9iksY/photo.jpg?sz=128", "display_name": "Janice Kartika", "link": "https://stackoverflow.com/users/4088357/janice-kartika"}, "is_accepted": false, "score": 5, "last_activity_date": 1488452709, "creation_date": 1488452709, "answer_id": 42553680, "question_id": 42553017, "link": "https://stackoverflow.com/questions/42553017/android-calculate-days-between-two-dates/42553680#42553680", "title": "Android calculate days between two dates", "body": "<p>What date format do you use? Is it <code>d/M/yyyy</code> or <code>M/d/yyyy</code>?</p>\n\n<p>d = day, M = month, yyyy = year</p>\n\n<p>(see: <a href=\"https://developer.android.com/reference/java/text/SimpleDateFormat.html\" rel=\"noreferrer\">https://developer.android.com/reference/java/text/SimpleDateFormat.html</a>)</p>\n\n<p>Then the codes:</p>\n\n<pre><code>public static final String DATE_FORMAT = \"d/M/yyyy\";  //or use \"M/d/yyyy\"   \n\npublic static long getDaysBetweenDates(String start, String end) {\n    SimpleDateFormat dateFormat = new SimpleDateFormat(DATE_FORMAT, Locale.ENGLISH);\n    Date startDate, endDate;\n    long numberOfDays = 0;\n    try {\n        startDate = dateFormat.parse(start);\n        endDate = dateFormat.parse(end);\n        numberOfDays = getUnitBetweenDates(startDate, endDate, TimeUnit.DAYS);\n    } catch (ParseException e) {\n        e.printStackTrace();\n    }\n    return numberOfDays;\n}\n</code></pre>\n\n<p>And for <code>getUnitBetweenDates</code> method:</p>\n\n<pre><code>private static long getUnitBetweenDates(Date startDate, Date endDate, TimeUnit unit) {\n    long timeDiff = endDate.getTime() - startDate.getTime();\n    return unit.convert(timeDiff, TimeUnit.MILLISECONDS);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 721, "user_id": 7424946, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/15ay0.jpg?s=128&g=1", "display_name": "debo.stackoverflow", "link": "https://stackoverflow.com/users/7424946/debo-stackoverflow"}, "edited": false, "score": 1, "creation_date": 1488452903, "post_id": 42553743, "comment_id": 72242120, "body": "Thanks i tried this code and this is working.I upvoted it but i accepted the most simple answer.Anyways thanks for your time"}, {"owner": {"reputation": 76, "user_id": 439475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93a98419a0b07e6fe822c9dcded6d2c5?s=128&d=identicon&r=PG", "display_name": "Daniele Muscetta", "link": "https://stackoverflow.com/users/439475/daniele-muscetta"}, "edited": false, "score": 1, "creation_date": 1603369664, "post_id": 42553743, "comment_id": 114019330, "body": "I love the old-skool approach. Maybe verbose, maybe other folks will frown... but at least it works everywhere, old and new. Thanks much."}], "tags": [], "owner": {"reputation": 1040, "user_id": 5798049, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/cuiNL.jpg?s=128&g=1", "display_name": "Mr. Mad", "link": "https://stackoverflow.com/users/5798049/mr-mad"}, "is_accepted": false, "score": 3, "last_activity_date": 1488452817, "creation_date": 1488452817, "answer_id": 42553743, "question_id": 42553017, "link": "https://stackoverflow.com/questions/42553017/android-calculate-days-between-two-dates/42553743#42553743", "title": "Android calculate days between two dates", "body": "<p>Have look at this code , this is helpful for me ,hope it will help you.</p>\n\n<pre><code>public String get_count_of_days(String Created_date_String, String Expire_date_String) {\nSimpleDateFormat dateFormat = new SimpleDateFormat(\"dd/MM/yyyy\", Locale.getDefault());\n\nDate Created_convertedDate = null, Expire_CovertedDate = null, todayWithZeroTime = null;\ntry {\n    Created_convertedDate = dateFormat.parse(Created_date_String);\n    Expire_CovertedDate = dateFormat.parse(Expire_date_String);\n\n    Date today = new Date();\n\n    todayWithZeroTime = dateFormat.parse(dateFormat.format(today));\n} catch (ParseException e) {\n    e.printStackTrace();\n}\n\nint c_year = 0, c_month = 0, c_day = 0;\n\nif (Created_convertedDate.after(todayWithZeroTime)) {\n    Calendar c_cal = Calendar.getInstance();\n    c_cal.setTime(Created_convertedDate);\n    c_year = c_cal.get(Calendar.YEAR);\n    c_month = c_cal.get(Calendar.MONTH);\n    c_day = c_cal.get(Calendar.DAY_OF_MONTH);\n\n} else {\n    Calendar c_cal = Calendar.getInstance();\n    c_cal.setTime(todayWithZeroTime);\n    c_year = c_cal.get(Calendar.YEAR);\n    c_month = c_cal.get(Calendar.MONTH);\n    c_day = c_cal.get(Calendar.DAY_OF_MONTH);\n}\n\n\n/*Calendar today_cal = Calendar.getInstance();\nint today_year = today_cal.get(Calendar.YEAR);\nint today = today_cal.get(Calendar.MONTH);\nint today_day = today_cal.get(Calendar.DAY_OF_MONTH);\n*/\n\nCalendar e_cal = Calendar.getInstance();\ne_cal.setTime(Expire_CovertedDate);\n\nint e_year = e_cal.get(Calendar.YEAR);\nint e_month = e_cal.get(Calendar.MONTH);\nint e_day = e_cal.get(Calendar.DAY_OF_MONTH);\n\nCalendar date1 = Calendar.getInstance();\nCalendar date2 = Calendar.getInstance();\n\ndate1.clear();\ndate1.set(c_year, c_month, c_day);\ndate2.clear();\ndate2.set(e_year, e_month, e_day);\n\nlong diff = date2.getTimeInMillis() - date1.getTimeInMillis();\n\nfloat dayCount = (float) diff / (24 * 60 * 60 * 1000);\n\nreturn (\"\" + (int) dayCount + \" Days\");\n</code></pre>\n\n<p>}</p>\n"}, {"tags": [], "owner": {"reputation": 184, "user_id": 7753077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qLnyv.jpg?s=128&g=1", "display_name": "fuzzKitty", "link": "https://stackoverflow.com/users/7753077/fuzzkitty"}, "is_accepted": false, "score": 2, "last_activity_date": 1513079517, "creation_date": 1513079517, "answer_id": 47771951, "question_id": 42553017, "link": "https://stackoverflow.com/questions/42553017/android-calculate-days-between-two-dates/47771951#47771951", "title": "Android calculate days between two dates", "body": "<p>Very simple, just use Calendar, create two instances for the two dates, convert to milliseconds, subtract and convert to days (rounded up)... like this, basically:</p>\n\n<pre><code>Calendar startDate = Calendar.getInstance();\nstartDate.set(mStartYear, mStartMonth, mStartDay);\nlong startDateMillis = startDate.getTimeInMillis();\n\nCalendar endDate = Calendar.getInstance();\nendDate.set(mEndYear, mEndMonth, mEndDay);\nlong endDateMillis = endDate.getTimeInMillis();\n\nlong differenceMillis = endDateMillis - startDateMillis;\nint daysDifference = (int) (differenceMillis / (1000 * 60 * 60 * 24));\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 213390, "user_id": 642706, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/ZWEI3.jpg?s=128&g=1", "display_name": "Basil Bourque", "link": "https://stackoverflow.com/users/642706/basil-bourque"}, "edited": false, "score": 3, "creation_date": 1518196579, "post_id": 48706121, "comment_id": 84420839, "body": "Days are not always 24 hours long, so this is not accurate. Much easier to use <code>ChronoUnit.DAYS.between( start , stop )</code>."}], "tags": [], "owner": {"reputation": 476, "user_id": 5712938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b575a62c6fd6ed7c50ebe2d14c1caed6?s=128&d=identicon&r=PG&f=1", "display_name": "grabarz121", "link": "https://stackoverflow.com/users/5712938/grabarz121"}, "is_accepted": false, "score": 2, "last_activity_date": 1518180479, "last_edit_date": 1518180479, "creation_date": 1518180176, "answer_id": 48706121, "question_id": 42553017, "link": "https://stackoverflow.com/questions/42553017/android-calculate-days-between-two-dates/48706121#48706121", "title": "Android calculate days between two dates", "body": "<p>Be carefur if you'd like to use received integer e.g. to indicate specific day in custom calendar implementation. For example, I tried to go in m app from monthly calendar view to daily view and show daily content, by calculating dates from 1970-01-01 to selected one, and each 25-31th day of month shows me as one day earlier, because <code>datesDifferenceInMillis / (24 * 60 * 60 * 1000);</code> may return something like 17645,95833333333, and casting this to int you'll get value lower by 1. In this case correctly number of days you'll get by rounding received float by using NumberFormat class. Here's my code:</p>\n\n<pre><code>NumberFormat numberFormat = NumberFormat.getInstance(Locale.getDefault());\nnumberFormat.setRoundingMode(RoundingMode.HALF_UP);\nnumberFormat.setMaximumFractionDigits(0);\nnumberFormat.setMinimumFractionDigits(0);\nint days = numberFormat.parse(numberFormat.format(value)).intValue();\n</code></pre>\n\n<p>I hope it will be helpful.</p>\n"}, {"comments": [{"owner": {"reputation": 480, "user_id": 6333971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7585e678f4fcf5a484f46285da9994?s=128&d=identicon&r=PG&f=1", "display_name": "b devloper", "link": "https://stackoverflow.com/users/6333971/b-devloper"}, "edited": false, "score": 1, "creation_date": 1583321531, "post_id": 57695391, "comment_id": 107074447, "body": "<code>val millionSeconds = Calendar.getInstance().timeInMillis - yourDate.time</code>"}], "tags": [], "owner": {"reputation": 12780, "user_id": 291240, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/J9327.jpg?s=128&g=1", "display_name": "William Hu", "link": "https://stackoverflow.com/users/291240/william-hu"}, "is_accepted": false, "score": 14, "last_activity_date": 1567052378, "last_edit_date": 1567052378, "creation_date": 1567004827, "answer_id": 57695391, "question_id": 42553017, "link": "https://stackoverflow.com/questions/42553017/android-calculate-days-between-two-dates/57695391#57695391", "title": "Android calculate days between two dates", "body": "<p><strong>Kotlin</strong></p>\n\n<p>Here is the example to calculate days from today to some date:</p>\n\n<pre><code> val millionSeconds = yourDate.time - Calendar.getInstance().timeInMillis\n leftDays.text = TimeUnit.MILLISECONDS.toDays(millionSeconds).toString() + \"days\"\n</code></pre>\n\n<p>If you want to calculate two days, then change:</p>\n\n<pre><code>val millionSeconds = yourDate1.time - yourDate2.time\n</code></pre>\n\n<p>should work.</p>\n"}, {"comments": [{"owner": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "edited": false, "score": 1, "creation_date": 1585678814, "post_id": 60944941, "comment_id": 107845382, "body": "Please don\u2019t teach the young ones to use the long outdated and notoriously troublesome <code>SimpleDateFormat</code> class. At least not as the first option. And not without any reservation. Today we have so much better in <a href=\"https://docs.oracle.com/javase/tutorial/datetime/\" rel=\"nofollow noreferrer\"><code>java.time</code>, the modern Java date and time API,</a> and its <code>DateTimeFormatter</code>. Yes, you can use it on Android. For older Android see <a href=\"https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project\">How to use ThreeTenABP in Android Project</a>."}], "tags": [], "owner": {"reputation": 113, "user_id": 7289525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FyBza.png?s=128&g=1", "display_name": "MaKi", "link": "https://stackoverflow.com/users/7289525/maki"}, "is_accepted": false, "score": 0, "last_activity_date": 1585637699, "creation_date": 1585637699, "answer_id": 60944941, "question_id": 42553017, "link": "https://stackoverflow.com/questions/42553017/android-calculate-days-between-two-dates/60944941#60944941", "title": "Android calculate days between two dates", "body": "<p>I modified Jitendra's answer in Kotlin:</p>\n\n<pre><code>fun getDaysBetweenDates(firstDateValue: String, secondDateValue: String, format: String): String\n{\n    val sdf = SimpleDateFormat(format, Locale.getDefault())\n\n    val firstDate = sdf.parse(firstDateValue)\n    val secondDate = sdf.parse(secondDateValue)\n\n    if (firstDate == null || secondDate == null)\n        return 0.toString()\n\n    return (((secondDate.time - firstDate.time) / (1000 * 60 * 60 * 24)) + 1).toString()\n}\n</code></pre>\n\n<p>and call it like</p>\n\n<pre><code>val days = getDaysBetweenDates(\"31-03-2020\", \"24-04-2020\",\"dd-MM-yyyy\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "is_accepted": false, "score": 3, "last_activity_date": 1585712119, "last_edit_date": 1585712119, "creation_date": 1585680595, "answer_id": 60957813, "question_id": 42553017, "link": "https://stackoverflow.com/questions/42553017/android-calculate-days-between-two-dates/60957813#60957813", "title": "Android calculate days between two dates", "body": "<h2>java.time and ThreeTenABP</h2>\n\n<p>If I understand correctly, you want the number of days from start day through end date <em>inclusive</em>.</p>\n\n<pre><code>    DateTimeFormatter dateFormatter = DateTimeFormatter.ofPattern(\"d/M/u\");\n\n    String startDate = \"2/3/2017\";\n    String endDate = \"3/3/2017\";\n\n    LocalDate startDateValue = LocalDate.parse(startDate, dateFormatter);\n    LocalDate endDateValue = LocalDate.parse(endDate, dateFormatter);\n    long days = ChronoUnit.DAYS.between(startDateValue, endDateValue) + 1;\n\n    System.out.println(\"Days: \" + days);\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>Days: 2</p>\n</blockquote>\n\n<p><code>ChronoUnit.DAYS.between()</code> gives us a count of days from start date inclusive to end date <em>exclusive</em>. So to include the end date too we needed to add 1 day just as you did in the question.</p>\n\n<h2>What went wrong in your code?</h2>\n\n<p>You are using the <code>Date(String)</code> constructor. This constructor has been deprecated since 1997 because it works unreliably across time zones, so don\u2019t use it. Also it\u2019s kind of magical: at least I never really know what I get. Apparently it takes <code>2/3/2017</code> to mean February 3, 2017, where you intended 2 March 2017. From February 3 to March 3 inclusive is 29 days (since 2017 wasn\u2019t a leap year). This explains why you got 29. (If necessary, we could spell our way through the documentation and find out why <code>2/3/2017</code> is interpreted the way it is, only I\u2019d find that a pointless waste of time to do.)</p>\n\n<p><strong>You can\u2019t convert from milliseconds.</strong> Please also note that not only the question but also the very many answers that convert from milliseconds to days are incorrect. Such a conversion assumes that a day is always 24 hours. Because of summer time (DST) and other time anomalies a day is not always 24 hours. All of those answers will count a day too few for example if the leave crosses the <em>spring gap</em> or <em>spring forward</em> when summer time begins.</p>\n\n<h2>Question: Doesn\u2019t java.time require Android API level 26?</h2>\n\n<p>java.time works nicely on both older and newer Android devices. It just requires at least <strong>Java 6</strong>.</p>\n\n<ul>\n<li>In Java 8 and later and on newer Android devices (from API level 26) the modern API comes built-in.</li>\n<li>In non-Android Java 6 and 7 get the ThreeTen Backport, the backport of the modern classes (ThreeTen for JSR 310; see the links at the bottom).</li>\n<li>On (older) Android use the Android edition of ThreeTen Backport. It\u2019s called ThreeTenABP. And make sure you import the date and time classes from <code>org.threeten.bp</code> with subpackages.</li>\n</ul>\n\n<h2>Links</h2>\n\n<ul>\n<li><a href=\"https://docs.oracle.com/javase/tutorial/datetime/\" rel=\"nofollow noreferrer\">Oracle tutorial: Date Time</a> explaining how to use java.time.</li>\n<li><a href=\"https://jcp.org/en/jsr/detail?id=310\" rel=\"nofollow noreferrer\">Java Specification Request (JSR) 310</a>, where <code>java.time</code> was first described.</li>\n<li><a href=\"http://www.threeten.org/threetenbp/\" rel=\"nofollow noreferrer\">ThreeTen Backport project</a>, the backport of <code>java.time</code> to Java 6 and 7 (ThreeTen for JSR-310).</li>\n<li><a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow noreferrer\">ThreeTenABP</a>, Android edition of ThreeTen Backport</li>\n<li><a href=\"https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project\">Question: How to use ThreeTenABP in Android Project</a>, with a very thorough explanation.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 831, "user_id": 1253065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/234baf7a54444da9eacf9f87fb4162e5?s=128&d=identicon&r=PG", "display_name": "semih", "link": "https://stackoverflow.com/users/1253065/semih"}, "is_accepted": false, "score": 0, "last_activity_date": 1586175853, "creation_date": 1586175853, "answer_id": 61059794, "question_id": 42553017, "link": "https://stackoverflow.com/questions/42553017/android-calculate-days-between-two-dates/61059794#61059794", "title": "Android calculate days between two dates", "body": "<p>You can use joda time, it so simple</p>\n\n<pre><code>fun getBetweenDates(startDate: Long, endDate: Long): String {\n    val period = Period(startDate, endDate, PeriodType.yearMonthDayTime())\n\n    val formatter = PeriodFormatterBuilder()\n        .appendYears().appendSuffix(\" year \")\n        .appendMonths().appendSuffix(\" month \")\n        .appendDays().appendSuffix(\" days \")\n        .appendHours().appendSuffix(\" hours \")\n        .appendMinutes().appendSuffix(\" minutes \")\n        .appendSeconds().appendSuffix(\" seconds \")\n        .appendMillis().appendSuffix(\" millis \")\n        .toFormatter()\n\n    return formatter.print(period)\n}\n</code></pre>\n\n<p>start and end dates millisecond, and result example: \"2 year 1 month ...\"</p>\n"}, {"comments": [{"owner": {"reputation": 1478, "user_id": 9716826, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "xKobalt", "link": "https://stackoverflow.com/users/9716826/xkobalt"}, "edited": false, "score": 1, "creation_date": 1598007951, "post_id": 63520992, "comment_id": 112324716, "body": "Welcome to StackOverflow! Please, provide an explanation in order to improve your answer and make it more understandable for the community"}], "tags": [], "owner": {"reputation": 1, "user_id": 9412259, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MUExnMtNWso/AAAAAAAAAAI/AAAAAAAAABE/rC57-hleMi8/photo.jpg?sz=128", "display_name": "Denis", "link": "https://stackoverflow.com/users/9412259/denis"}, "is_accepted": false, "score": 0, "last_activity_date": 1598005218, "creation_date": 1598005218, "answer_id": 63520992, "question_id": 42553017, "link": "https://stackoverflow.com/questions/42553017/android-calculate-days-between-two-dates/63520992#63520992", "title": "Android calculate days between two dates", "body": "<pre><code>fun countDaysBetweenTwoCalendar(calendarStart: Calendar, calendarEnd: Calendar) : Int{\n    val millionSeconds = calendarEnd.timeInMillis - calendarStart.timeInMillis\n    val days = TimeUnit.MILLISECONDS.toDays(millionSeconds) //this way not round number\n    val daysRounded = (millionSeconds / (1000.0 * 60 * 60 * 24)).roundToInt()\n    return daysRounded\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 198, "user_id": 11869227, "user_type": "registered", "profile_image": "https://graph.facebook.com/2426265784363328/picture?type=large", "display_name": "Arnaud", "link": "https://stackoverflow.com/users/11869227/arnaud"}, "is_accepted": false, "score": 0, "last_activity_date": 1602084811, "creation_date": 1602084811, "answer_id": 64247419, "question_id": 42553017, "link": "https://stackoverflow.com/questions/42553017/android-calculate-days-between-two-dates/64247419#64247419", "title": "Android calculate days between two dates", "body": "<p>while none of these worked for me, here is an easy way to implement your code with a very simple fonction :</p>\n<pre><code>private long getDaysDifference(Date fromDate,Date toDate) {\n\n    if(fromDate == null || toDate == null)\n        return 0;\n\n\n    int a = Integer.parseInt(DateFormat.format(&quot;dd&quot;,   fromDate)+&quot;&quot;);\n    int b = Integer.parseInt(DateFormat.format(&quot;dd&quot;,   toDate)+&quot;&quot;);\n\n    if ( b &lt;= a){\n        return Calendar.getInstance().getActualMaximum(Calendar.DAY_OF_MONTH) + b - a;\n    }\n    return b - a;\n}\n</code></pre>\n<p>EnJoY</p>\n"}, {"tags": [], "owner": {"reputation": 975, "user_id": 10390808, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FAzdI.jpg?s=128&g=1", "display_name": "Abhinav Chauhan", "link": "https://stackoverflow.com/users/10390808/abhinav-chauhan"}, "is_accepted": false, "score": 1, "last_activity_date": 1609686420, "creation_date": 1609686420, "answer_id": 65551309, "question_id": 42553017, "link": "https://stackoverflow.com/questions/42553017/android-calculate-days-between-two-dates/65551309#65551309", "title": "Android calculate days between two dates", "body": "<p><strong>SUPER SIMPLE</strong></p>\n<p>use <code>LocalDate()</code> include   <code>implementation 'com.jakewharton.threetenabp:threetenabp:1.2.1'</code> to use in android</p>\n<p><strong>Example</strong></p>\n<p><strong>IN KOTLIN</strong></p>\n<pre><code>val daysDifferene = LocalDate.of(2017,3,3).toEpochDay() - LocalDate.of(2017,3,2)\n</code></pre>\n<p><em><strong>even better</strong></em></p>\n<p>create extension function to <code>LocalDate</code> class</p>\n<pre><code>private operator fun LocalDate.minus(other: LocalDate) = toEpochDay() - other.toEpochDay()\n  \n</code></pre>\n<p>now just say</p>\n<pre><code>val daysDifference = localDate1 - localDate2 // you get number of days in Long type\n</code></pre>\n<p><strong>IN JAVA</strong></p>\n<pre><code>long daysDifference = LocalDate.of(2017,3,3).toEpochDay() - LocalDate.of(2107,3,2) \n</code></pre>\n"}], "owner": {"reputation": 721, "user_id": 7424946, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/15ay0.jpg?s=128&g=1", "display_name": "debo.stackoverflow", "link": "https://stackoverflow.com/users/7424946/debo-stackoverflow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60823, "favorite_count": 3, "accepted_answer_id": 42553096, "answer_count": 14, "score": 23, "last_activity_date": 1609686420, "creation_date": 1488451012, "last_edit_date": 1567004893, "question_id": 42553017, "link": "https://stackoverflow.com/questions/42553017/android-calculate-days-between-two-dates", "title": "Android calculate days between two dates", "body": "<p>I have written the following code to find days between two dates</p>\n\n<pre><code>    startDateValue = new Date(startDate);\n    endDateValue = new Date(endDate);\n    long diff = endDateValue.getTime() - startDateValue.getTime();\n    long seconds = diff / 1000;\n    long minutes = seconds / 60;\n    long hours = minutes / 60;\n    long days = (hours / 24) + 1;\n    Log.d(\"days\", \"\" + days);\n</code></pre>\n\n<p>When start and end date are 2/3/2017 and 3/3/2017 respectively the number of days showing is 29.Though when they are of the same day it is showing 1.(The number of days one takes a leave.So if one takes a single day leave,he has to select same start and end date.So in this case he has taken two days leave).</p>\n\n<p>What am I doing wrong?\nThank you for your time.</p>\n\n<p>Note: Please don't use the date constructor. Check the accepted answer below. Use simpledateformat or Joda time. Date constructor is deprecated.</p>\n"}, {"tags": ["firebase", "firebase-realtime-database", "kotlin", "kotlin-interop"], "comments": [{"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1488442045, "post_id": 42546959, "comment_id": 72234909, "body": "I&#39;m experiencing no problem with that Kotlin syntax.  Type reifying is not the issue because you&#39;re creating a new object with runtime types, which effectively achieves the same thing as a reified type.  EDIT: but I do have this problem with List&lt;Foo&gt; instead of Foo.. weird."}], "answers": [{"comments": [{"owner": {"reputation": 64215, "user_id": 11238, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/BGDex.png?s=128&g=1", "display_name": "Randy Sugianto &#39;Yuku&#39;", "link": "https://stackoverflow.com/users/11238/randy-sugianto-yuku"}, "edited": false, "score": 0, "creation_date": 1488452753, "post_id": 42550043, "comment_id": 72242019, "body": "Thanks for suggesting <code>ArrayList</code>. It works when <code>ArrayList</code> is used. I tried to decompile the Java code, and both <code>List</code> and <code>ArrayList</code> version of Kotlin (I edited my question, results can be seen above). It seems that <code>List&lt;String&gt;</code> got converted to <code>List&lt;? extends String&gt;</code>, but <code>ArrayList&lt;String&gt;</code> stays as <code>ArrayList&lt;String&gt;</code>. Then this seems like a Kotlin &quot;problem&quot;."}, {"owner": {"reputation": 64215, "user_id": 11238, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/BGDex.png?s=128&g=1", "display_name": "Randy Sugianto &#39;Yuku&#39;", "link": "https://stackoverflow.com/users/11238/randy-sugianto-yuku"}, "edited": false, "score": 0, "creation_date": 1488453251, "post_id": 42550043, "comment_id": 72242349, "body": "I found the solution. I put it as an answer."}, {"owner": {"reputation": 2000, "user_id": 2828611, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/3ef0750630716bedbe40a67e834728a1?s=128&d=identicon&r=PG&f=1", "display_name": "inetphantom", "link": "https://stackoverflow.com/users/2828611/inetphantom"}, "edited": false, "score": 0, "creation_date": 1587893621, "post_id": 42550043, "comment_id": 108683061, "body": "I had to add a not null assertion: <code>snapshot.getValue(object : GenericTypeIndicator&lt;ArrayList&lt;String&gt;&gt;(){})!!</code>"}], "tags": [], "owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "is_accepted": false, "score": 5, "last_activity_date": 1488442600, "creation_date": 1488442600, "answer_id": 42550043, "question_id": 42546959, "link": "https://stackoverflow.com/questions/42546959/kotlin-cant-use-generictypeindicator-to-call-firebase-databases-getvalue/42550043#42550043", "title": "Kotlin: Can&#39;t use GenericTypeIndicator to call Firebase Database&#39;s getValue", "body": "<p>Try changing this line:</p>\n\n<pre><code>snap.getValue(object : GenericTypeIndicator&lt;List&lt;String&gt;&gt;() {})\n</code></pre>\n\n<p>To this:</p>\n\n<pre><code>snap.getValue(object : GenericTypeIndicator&lt;ArrayList&lt;String&gt;&gt;() {})\n</code></pre>\n\n<p>It works for me, but I don't know why.</p>\n"}, {"comments": [{"owner": {"reputation": 5154, "user_id": 488704, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/56d47d2256d26d41ad752ba1bb41748d?s=128&d=identicon&r=PG", "display_name": "damienix", "link": "https://stackoverflow.com/users/488704/damienix"}, "edited": false, "score": 1, "creation_date": 1491519831, "post_id": 42553985, "comment_id": 73602820, "body": "Thanks a lot, this helped. Just one tip, for Maps use the wildcard only for the value like <code>dataSnapshot.getValue(object : GenericTypeIndicator&lt;Map&lt;String, @JvmSuppressWildcards Status&gt;&gt;() {})</code>"}, {"owner": {"reputation": 93, "user_id": 3576804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gPL9j.png?s=128&g=1", "display_name": "treelzebub", "link": "https://stackoverflow.com/users/3576804/treelzebub"}, "edited": false, "score": 0, "creation_date": 1496005950, "post_id": 42553985, "comment_id": 75474060, "body": "Thank you! I&#39;ve added some typaliases to make it a bit less ugly:     <code>typealias UsersMap = Map&lt;String, @JvmSuppressWildcards User&gt;</code>       <code>val userTypeIndicator = object : GenericTypeIndicator&lt;UsersMap&gt;() {}</code>"}, {"owner": {"reputation": 9535, "user_id": 5861618, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ug9BL.png?s=128&g=1", "display_name": "Ros&#225;rio Pereira Fernandes", "link": "https://stackoverflow.com/users/5861618/ros%c3%a1rio-pereira-fernandes"}, "edited": false, "score": 1, "creation_date": 1573681682, "post_id": 42553985, "comment_id": 103965886, "body": "Using the <a href=\"https://firebaseopensource.com/projects/firebase/firebase-android-sdk/docs/ktx/database.md/\" rel=\"nofollow noreferrer\">Realtime Database Kotlin Extensions</a> you&#39;ll no longer need to use <code>GenericTypeIndicator</code>. But you do need that annotation. It would be something like: <code>snap.getValue&lt;List&lt;@JvmSuppressWildcards String&gt;&gt;()</code>."}], "tags": [], "owner": {"reputation": 64215, "user_id": 11238, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/BGDex.png?s=128&g=1", "display_name": "Randy Sugianto &#39;Yuku&#39;", "link": "https://stackoverflow.com/users/11238/randy-sugianto-yuku"}, "is_accepted": true, "score": 20, "last_activity_date": 1488453511, "last_edit_date": 1495542342, "creation_date": 1488453511, "answer_id": 42553985, "question_id": 42546959, "link": "https://stackoverflow.com/questions/42546959/kotlin-cant-use-generictypeindicator-to-call-firebase-databases-getvalue/42553985#42553985", "title": "Kotlin: Can&#39;t use GenericTypeIndicator to call Firebase Database&#39;s getValue", "body": "<p>In Kotlin,</p>\n\n<pre><code>val ti = object : GenericTypeIndicator&lt;List&lt;String&gt;&gt;() {}\n</code></pre>\n\n<p>is generated as (in Java):</p>\n\n<pre><code>SyntethicClass ti = new SyntethicClass();\n\npublic final class SyntethicClass extends GenericTypeIndicator&lt;List&lt;? extends String&gt;&gt; {}\n</code></pre>\n\n<p>Notice the wildcard <code>? extends String</code> instead of just plain <code>String</code>.</p>\n\n<p>See <a href=\"https://kotlinlang.org/docs/reference/java-to-kotlin-interop.html#variant-generics\" rel=\"noreferrer\">https://kotlinlang.org/docs/reference/java-to-kotlin-interop.html#variant-generics</a> for explanation.</p>\n\n<p>In order to prevent that, annotate the type parameter with <code>@JvmSuppressWildcards</code>:</p>\n\n<pre><code>val ti = object : GenericTypeIndicator&lt;List&lt;@JvmSuppressWildcards String&gt;&gt;() {}\n</code></pre>\n\n<p>This gets super ugly, but it works. Alternatively, use <code>ArrayList</code> as per <a href=\"https://stackoverflow.com/a/42550043/11238\">Doug's answer</a>.</p>\n"}], "owner": {"reputation": 64215, "user_id": 11238, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/BGDex.png?s=128&g=1", "display_name": "Randy Sugianto &#39;Yuku&#39;", "link": "https://stackoverflow.com/users/11238/randy-sugianto-yuku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2593, "favorite_count": 5, "accepted_answer_id": 42553985, "answer_count": 2, "score": 10, "last_activity_date": 1488453511, "creation_date": 1488429413, "last_edit_date": 1488452606, "question_id": 42546959, "link": "https://stackoverflow.com/questions/42546959/kotlin-cant-use-generictypeindicator-to-call-firebase-databases-getvalue", "title": "Kotlin: Can&#39;t use GenericTypeIndicator to call Firebase Database&#39;s getValue", "body": "<p>When using Kotlin to work with Firebase database, I can't seem to retrieve a value of type <code>List&lt;String&gt;</code> if I use a <code>GenericTypeIndicator</code> as follows:</p>\n\n<pre><code>snap.getValue(object : GenericTypeIndicator&lt;List&lt;String&gt;&gt;() {})\n</code></pre>\n\n<p>It produces an exception from the Firebase SDK as follows:</p>\n\n<pre><code>com.google.firebase.database.DatabaseException: Generic wildcard types are not supported\n    at com.google.android.gms.internal.zzbtg.zza(Unknown Source)\n    at com.google.android.gms.internal.zzbtg.zza(Unknown Source)\n    at com.google.android.gms.internal.zzbtg.zza(Unknown Source)\n    at com.google.android.gms.internal.zzbtg.zza(Unknown Source)\n    at com.google.firebase.database.DataSnapshot.getValue(Unknown Source)\n</code></pre>\n\n<p>However, if I call it from Java, as follows, it works:</p>\n\n<pre><code>snap.getValue(new GenericTypeIndicator&lt;List&lt;String&gt;&gt;() {})\n</code></pre>\n\n<p>I was guessing that it has to do with type reifying, so I did this:</p>\n\n<pre><code>inline fun &lt;reified T&gt; genericType() = object: GenericTypeIndicator&lt;T&gt;() {}\nval stringListIndicator = genericType&lt;List&lt;String&gt;&gt;()\n\nsnap.getValue(stringListIndicator)\n</code></pre>\n\n<p>but the same exception happened.</p>\n\n<p>Why is it so? </p>\n\n<hr>\n\n<p>Edit: I tried to decompile both Java and Kotlin versions using jadx-0.6.1.</p>\n\n<p><strong>Java source:</strong></p>\n\n<pre><code>public class Randommmm {\n    private static final GenericTypeIndicator&lt;List&lt;String&gt;&gt; ti = new GenericTypeIndicator&lt;List&lt;String&gt;&gt;() {\n    };\n\n    public static List&lt;String&gt; x(DataSnapshot snap) {\n        return snap.getValue(ti);\n    }\n}\n</code></pre>\n\n<p>Decompiled:</p>\n\n<pre><code>public class Randommmm {\n    private static final GenericTypeIndicator&lt;List&lt;String&gt;&gt; ti = new C12761();\n\n    static class C12761 extends GenericTypeIndicator&lt;List&lt;String&gt;&gt; {\n        C12761() {\n        }\n    }\n\n    public static List&lt;String&gt; m48x(DataSnapshot snap) {\n        return (List) snap.getValue(ti);\n    }\n}\n</code></pre>\n\n<p><strong>Kotlin source (1):</strong></p>\n\n<pre><code>object Randommmm {\n    private val ti = object : GenericTypeIndicator&lt;List&lt;String&gt;&gt;() {\n    }\n\n    fun x(snap: DataSnapshot): List&lt;String&gt; {\n        return snap.getValue(ti)\n    }\n}\n</code></pre>\n\n<p>Decompiled:</p>\n\n<pre><code>public final class Randommmm {\n    public static final Randommmm INSTANCE = null;\n    private static final Randommmm$ti$1 ti = null;\n\n    static class C12761 extends GenericTypeIndicator&lt;List&lt;String&gt;&gt; {\n        C12761() {\n        }\n    }\n\n    static {\n        Randommmm randommmm = new Randommmm();\n    }\n\n    private Randommmm() {\n        INSTANCE = this;\n        ti = new Randommmm$ti$1();\n    }\n\n    @NotNull\n    public final List&lt;String&gt; m48x(@NotNull DataSnapshot snap) {\n        Intrinsics.checkParameterIsNotNull(snap, \"snap\");\n        Object value = snap.getValue(ti);\n        Intrinsics.checkExpressionValueIsNotNull(value, \"snap.getValue(ti)\");\n        return (List) value;\n    }\n}\n\npublic final class Randommmm$ti$1 extends GenericTypeIndicator&lt;List&lt;? extends String&gt;&gt; {\n    Randommmm$ti$1() {\n    }\n}\n</code></pre>\n\n<p><strong>Kotlin source (2) using <code>ArrayList</code> as suggested by Doug:</strong></p>\n\n<pre><code>object Randommmm {\n    private val ti = object : GenericTypeIndicator&lt;ArrayList&lt;String&gt;&gt;() {\n    }\n\n    fun x(snap: DataSnapshot): List&lt;String&gt; {\n        return snap.getValue(ti)\n    }\n}\n</code></pre>\n\n<p>Decompiled:</p>\n\n<pre><code>public final class Randommmm {\n    public static final Randommmm INSTANCE = null;\n    private static final Randommmm$ti$1 ti = null;\n\n    static class C12761 extends GenericTypeIndicator&lt;List&lt;String&gt;&gt; {\n        C12761() {\n        }\n    }\n\n    static {\n        Randommmm randommmm = new Randommmm();\n    }\n\n    private Randommmm() {\n        INSTANCE = this;\n        ti = new Randommmm$ti$1();\n    }\n\n    @NotNull\n    public final List&lt;String&gt; m48x(@NotNull DataSnapshot snap) {\n        Intrinsics.checkParameterIsNotNull(snap, \"snap\");\n        Object value = snap.getValue(ti);\n        Intrinsics.checkExpressionValueIsNotNull(value, \"snap.getValue(ti)\");\n        return (List) value;\n    }\n}\n\npublic final class Randommmm$ti$1 extends GenericTypeIndicator&lt;ArrayList&lt;String&gt;&gt; {\n    Randommmm$ti$1() {\n    }\n}\n</code></pre>\n"}]