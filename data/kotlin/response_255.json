[{"tags": ["android", "json", "rest", "heroku", "kotlin"], "comments": [{"owner": {"reputation": 4550, "user_id": 5235032, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/U2YdE.jpg?s=128&g=1", "display_name": "Jayanth", "link": "https://stackoverflow.com/users/5235032/jayanth"}, "edited": false, "score": 0, "creation_date": 1574900527, "post_id": 59080021, "comment_id": 104397266, "body": "show us the code or error logs so that it&#39;ll be easy for us to find out what went wrong."}, {"owner": {"reputation": 53, "user_id": 11485879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c9567224c3240945fd857b2b664091?s=128&d=identicon&r=PG&f=1", "display_name": "Zekarias Semegnew", "link": "https://stackoverflow.com/users/11485879/zekarias-semegnew"}, "reply_to_user": {"reputation": 4550, "user_id": 5235032, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/U2YdE.jpg?s=128&g=1", "display_name": "Jayanth", "link": "https://stackoverflow.com/users/5235032/jayanth"}, "edited": false, "score": 0, "creation_date": 1574902686, "post_id": 59080021, "comment_id": 104397664, "body": "@Jayanth  There is no error, because the app runs but blank fragment. I have edited the post and added the code that I wrote so far. Can you check it please?"}], "answers": [{"tags": [], "owner": {"reputation": 53, "user_id": 11485879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c9567224c3240945fd857b2b664091?s=128&d=identicon&r=PG&f=1", "display_name": "Zekarias Semegnew", "link": "https://stackoverflow.com/users/11485879/zekarias-semegnew"}, "is_accepted": false, "score": 0, "last_activity_date": 1575045137, "creation_date": 1575045137, "answer_id": 59108336, "question_id": 59080021, "link": "https://stackoverflow.com/questions/59080021/android-rest-api-call-with-no-response-from-back-end-for-new-records/59108336#59108336", "title": "Android REST API call with no response from back end for new records", "body": "<p>I got the problem, I had commited a fault. I have been sending incorrect param to POST operation and Moshi could't parse the NULL value</p>\n"}], "owner": {"reputation": 53, "user_id": 11485879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c9567224c3240945fd857b2b664091?s=128&d=identicon&r=PG&f=1", "display_name": "Zekarias Semegnew", "link": "https://stackoverflow.com/users/11485879/zekarias-semegnew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 538, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575045137, "creation_date": 1574899147, "last_edit_date": 1574902999, "question_id": 59080021, "link": "https://stackoverflow.com/questions/59080021/android-rest-api-call-with-no-response-from-back-end-for-new-records", "title": "Android REST API call with no response from back end for new records", "body": "<p>I am developing <code>android app</code> for course project. My app has back end (<code>REST API</code>) which I developed and deployed on <code>Heroku</code>. Now I am trying to fetch the data from back end. I used <code>Retrofit</code> (<code>network API</code>) and <code>Moshi</code> (for parsing <code>JSON</code> string). </p>\n\n<p>I have successfully got response from the back end with 3 records for the first time (The records were created when I write the <code>API</code> in <code>Ruby on Rails</code>). Then for testing the app, I sent <code>POST</code> for 2 records from <code>Postman</code> and I run the app again. This time I got no response. Then I send <code>DELETE</code> operation for the last 2 added records and I run the app again, this time I got response for the old records. Then I send another <code>DELETE</code> operation from <code>Postman</code> for one of old record and send <code>POST</code> operation. Then the app displays no response. I deleted the new records, then the app displays the old records.</p>\n\n<p>Generally the <code>app</code> is displaying old records only. whenever I send new <code>POST</code> operation, I didn't get response. I am surprised by what is happening. Can someone tell me what could be the problem? I have cleared all the <code>caches</code> in my phone, restarted the phone, reinstalled the app but still the problem exists.</p>\n\n<p>(I can GET all the data successfully from Postman and Browser)</p>\n\n<p><strong><code>EventApiService.kt</code>   // where I define Retrofit and Moshi objects</strong></p>\n\n<pre><code>private val BASE_URL = \"https://eventnotifierjson2.herokuapp.com/\"\n\nprivate val moshi = Moshi.Builder()\n    .add(KotlinJsonAdapterFactory())\n    .build()\n\nprivate val retrofit = Retrofit.Builder()\n    .addConverterFactory(MoshiConverterFactory.create(moshi))\n    .addCallAdapterFactory(CoroutineCallAdapterFactory())\n    .baseUrl(BASE_URL)\n    .build()\n\n\ninterface EventApiInterface{\n    @GET(\"events\")\n    fun getEvents():\n            Deferred&lt;List&lt;Event&gt;&gt;\n}\n\nobject EventApi {\n\n    val retrofitService : EventApiInterface by lazy {\n        retrofit.create(EventApiInterface::class.java)\n    }\n}\n</code></pre>\n\n<p>============================<br>\n<strong>ViewModel for EventsListFragment</strong></p>\n\n<pre><code>class EventListViewModel: ViewModel(){\n\n     private val _eventResponses = MutableLiveData&lt;List&lt;Event&gt;&gt;()\n\n    val eventResponses : LiveData&lt;List&lt;Event&gt;&gt;\n        get() = _eventResponses\n\n\n    private val _responseStatus = MutableLiveData&lt;String&gt;()\n\n    val responseStatus : LiveData&lt;String&gt;\n        get() = _responseStatus\n\n    private val eventCoroutineJob = Job()\n\n    private val eventCoroutineScope = CoroutineScope(eventCoroutineJob  + Dispatchers.Main)\n\n    init {\n        retrieveEventsInBackground()\n    }\n    private fun retrieveEventsInBackground() {\n        eventCoroutineScope.launch {\n            // Get the Deferred object for our Retrofit request\n            var getPropertiesDeferred = EventApi.retrofitService.getEvents()\n            try {\n                // this will run on a thread managed by Retrofit\n                val listResult = getPropertiesDeferred.await()\n                _eventResponses.value = listResult\n                Log.i(\"RETROFIT ZEK: \", _eventResponses.value.toString())\n            } catch (e: Exception) {\n                _responseStatus.value = e.message\n            }\n        }\n    }\n\n\n    override fun onCleared() {\n        super.onCleared()\n        eventCoroutineJob.cancel()\n    }\n\n}\n</code></pre>\n\n<p>================================</p>\n\n<pre><code>class EventListFragment : Fragment() {\n\n    lateinit var binding : FragmentEventListBinding\n    private val viewModel: EventListViewModel by lazy {\n        ViewModelProviders.of(this).get(EventListViewModel::class.java)\n    }\n    private lateinit var eventAdapter : EventsRecyclerAdapter\n\n    override fun onCreateView(\n        inflater: LayoutInflater, container: ViewGroup?,\n        savedInstanceState: Bundle?\n    ): View? {\n\n\n        binding = FragmentEventListBinding.inflate(inflater)\n        binding.setLifecycleOwner(this)\n        binding.viewModel = viewModel\n        initializeRecyclerView()\n        return binding.root\n    }\n\n    private fun initializeRecyclerView(){\n        binding.eventsRecyclerView.apply {\n             layoutManager = LinearLayoutManager(this@EventListFragment.context)\n            val cardDecoration = CardViewDecoration(30)\n            addItemDecoration(cardDecoration)\n            eventAdapter = EventsRecyclerAdapter()\n            adapter = eventAdapter\n        }\n    }\n</code></pre>\n\n<h1>    }</h1>\n\n<p><strong>BindingAdapters for recycler view and image to be displayed</strong></p>\n\n<pre><code>@BindingAdapter(\"listData\")\nfun bindRecyclerView(recyclerView: RecyclerView,  data: List&lt;Event&gt;?){\n    val adapter = recyclerView.adapter as EventsRecyclerAdapter\n    adapter.submitList(data)\n}\n\n@BindingAdapter(\"imageUrl\")\nfun bindImage(imgView: ImageView, imgUrl: String?) {\n    imgUrl?.let {\n        val imgUri = imgUrl.toUri().buildUpon().scheme(\"https\").build()\n        Glide.with(imgView.context)\n            .load(imgUri)\n            .apply(RequestOptions()\n                .placeholder(R.drawable.ic_gerald_g_boy_face_cartoon)\n                .error(R.drawable.ic_gerald_g_boy_face_cartoon))\n            .into(imgView)\n    }\n}\n</code></pre>\n\n<p>==========================<br>\n<strong>Data Class for Event objects in retrieved from JSON array</strong></p>\n\n<pre><code>data class Event(val id: Int,\n                 val title: String,\n                 val description: String,\n                 val country: String,\n                 val city:  String,\n                 @Json(name = \"event_location\") val eventLocation : String,\n                 @Json(name = \"event_date\") val eventDate : String,\n                 @Json(name = \"event_time\") val eventTime: String,\n                 @Json(name = \"event_status\") val eventStatus: String,\n                 @Json(name = \"user_id\") val userId: Int,\n                 @Json(name = \"created_at\") val createdAt: String,\n                 @Json(name = \"updated_at\") val updatedAt: String,\n                 val eventimage : EventImage)\ndata class EventImage(\n   val url: String\n</code></pre>\n\n<h1>    )</h1>\n\n<p><strong>fragment_event_list.xml</strong> // The view where I inflate the ViewHolder to</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;layout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"&gt;\n   &lt;data&gt;\n      &lt;variable\n          name=\"viewModel\"\n          type=\"com.mobapproject.eventsroom.modelviews.EventListViewModel\" /&gt;\n   &lt;/data&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".fragments.EventListFragment\"&gt;\n\n   &lt;androidx.recyclerview.widget.RecyclerView\n       android:layout_width=\"match_parent\"\n       android:layout_height=\"match_parent\"\n       app:listData=\"@{viewModel.eventResponses}\"\n       android:id=\"@+id/eventsRecyclerView\"/&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n&lt;/layout&gt;\n</code></pre>\n\n<p>============================<br>\n<strong>events_list_layout.xml</strong> // layout for the ViewHolder</p>\n\n<pre><code>&lt;androidx.cardview.widget.CardView\n\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n\n    app:cardElevation=\"10dp\"\n    app:cardCornerRadius=\"2dp\"\n    app:cardPreventCornerOverlap=\"false\"&gt;\n\n    &lt;androidx.constraintlayout.widget.ConstraintLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"&gt;\n\n        &lt;ImageView\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"0dp\"\n            app:layout_constraintTop_toTopOf=\"parent\"\n            app:layout_constraintLeft_toLeftOf=\"parent\"\n            app:layout_constraintRight_toRightOf=\"parent\"\n            app:imageUrl=\"@{eventsData.eventimage.url}\"\n            android:id=\"@+id/event_image\"\n            android:padding=\"0dp\"\n            android:layout_margin=\"0dp\"\n            android:adjustViewBounds=\"true\"\n            android:scaleType=\"centerCrop\"\n            /&gt;\n\n\n        &lt;LinearLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            app:layout_constraintTop_toBottomOf=\"@id/event_image\"\n            app:layout_constraintLeft_toLeftOf=\"parent\"\n            app:layout_constraintRight_toRightOf=\"parent\"\n            app:layout_constraintBottom_toBottomOf=\"parent\"\n            android:orientation=\"vertical\"\n            android:padding=\"10dp\"\n            android:id=\"@+id/container1\"&gt;\n            &lt;TextView\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"\n                android:id=\"@+id/event_title\"\n                android:text=\"@{eventsData.title}\"\n                android:textColor=\"#000\"\n                android:textSize=\"19sp\"/&gt;\n\n            &lt;TextView\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"\n                android:id=\"@+id/event_location\"\n                android:text=\"@{eventsData.eventLocation}\"\n                android:textSize=\"15sp\"\n                android:layout_marginTop=\"10dp\"/&gt;\n\n\n        &lt;/LinearLayout&gt;\n\n\n\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n\n\n&lt;/androidx.cardview.widget.CardView&gt;\n&lt;/layout&gt;\n</code></pre>\n\n<p>=============================\n<strong>JSON response looks the following</strong></p>\n\n<pre><code>{\n\"id\": 1,\n\"title\": \"Dummy title\",\n\"description\": \"Dummy Description\",\n\"country\": \"Italy\",\n\"city\": \"Rome\",\n\"event_location\": \"Rome\",\n\"event_date\": \"2019-11-26\",\n\"event_time\": \"2000-01-01T21:28:16.000Z\",\n\"event_status\": \"open\",\n\"user_id\": 1,\n\"created_at\": \"2019-11-25T01:51:36.075Z\",\n\"updated_at\": \"2019-11-25T01:51:36.075Z\",\n\"eventimage\": {\n      \"url\": \"http://res.cloudinary.com/zakstorage/.....\"\n        }\n}\n</code></pre>\n"}, {"tags": ["kotlin", "extension-function"], "comments": [{"owner": {"reputation": 10456, "user_id": 9241978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7f9d2a03452f74bfd802e36d50b7db?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel", "link": "https://stackoverflow.com/users/9241978/pawel"}, "edited": false, "score": 0, "creation_date": 1574896451, "post_id": 59079341, "comment_id": 104396372, "body": "Remember that extension functions are just regular functions with slightly altered call syntax (receiver is basically first argument). Personally I only create private inner extensions to prevent confusion."}], "answers": [{"tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": false, "score": 0, "last_activity_date": 1574929033, "creation_date": 1574929033, "answer_id": 59084372, "question_id": 59079341, "link": "https://stackoverflow.com/questions/59079341/what-is-a-user-case-for-creating-an-extension-function-as-a-method-inside-a-clas/59084372#59084372", "title": "What is a user case for creating an extension function as a method inside a class/interface?", "body": "<p>When you only ever want to use this function inside your class/interface and its subtypes (or nearly so; you already know how to get out with <code>with</code> as per your previous question, but that shouldn't be a common case).</p>\n\n<p>The specific example just seems like a bad idea once you need to work with more than one <code>Monoid</code> at once.</p>\n"}], "owner": {"reputation": 1537, "user_id": 1678893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZOh9W.jpg?s=128&g=1", "display_name": "Diego Marin Santos", "link": "https://stackoverflow.com/users/1678893/diego-marin-santos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574929033, "creation_date": 1574894024, "question_id": 59079341, "link": "https://stackoverflow.com/questions/59079341/what-is-a-user-case-for-creating-an-extension-function-as-a-method-inside-a-clas", "title": "What is a user case for creating an extension function as a method inside a class/interface?", "body": "<p>I saw some examples of extension functions being defined inside a class/interface but I didn't understand the reason it would be done. Could someone show when it would be the proper way to implement some use case?</p>\n\n<p>One particular example that I didn't understand very well:</p>\n\n<pre><code>interface Monoid&lt;A&gt; { \n    fun z(): A \n    fun A.add(other:A):A \n}\n</code></pre>\n"}, {"tags": ["kotlin", "micronaut", "micronaut-client"], "answers": [{"comments": [{"owner": {"reputation": 1255, "user_id": 433168, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e257008a27d31126a51c3277a2931518?s=128&d=identicon&r=PG", "display_name": "Jim Wharton", "link": "https://stackoverflow.com/users/433168/jim-wharton"}, "edited": false, "score": 0, "creation_date": 1575048155, "post_id": 59108301, "comment_id": 104449240, "body": "Yep. Also <code>run { systemProperty(&#39;micronaut.environments&#39;,&#39;dev&#39;) }</code> was required in my <code>build.gradle</code>. Once I added that, I could use <code>@Client(&quot;\\${myserviceclient.baseUri}&quot;)</code> (The backslash is required due to Kotlin&#39;s string interpolation). Thank you!"}, {"owner": {"reputation": 21901, "user_id": 3533584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6683339fd1680ef0de6cbcadaa49fd6?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Scott Brown", "link": "https://stackoverflow.com/users/3533584/jeff-scott-brown"}, "reply_to_user": {"reputation": 1255, "user_id": 433168, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e257008a27d31126a51c3277a2931518?s=128&d=identicon&r=PG", "display_name": "Jim Wharton", "link": "https://stackoverflow.com/users/433168/jim-wharton"}, "edited": false, "score": 0, "creation_date": 1575068662, "post_id": 59108301, "comment_id": 104454679, "body": "FYI... The system property isn&#39;t really required, that is one way to do it though.  For example, you could also set the <code>MICRONAUT_ENVIRONMENTS</code> operating system environment variable and have the same effect."}], "tags": [], "owner": {"reputation": 21901, "user_id": 3533584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6683339fd1680ef0de6cbcadaa49fd6?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Scott Brown", "link": "https://stackoverflow.com/users/3533584/jeff-scott-brown"}, "is_accepted": true, "score": 1, "last_activity_date": 1575044921, "creation_date": 1575044921, "answer_id": 59108301, "question_id": 59079276, "link": "https://stackoverflow.com/questions/59079276/micronaut-declarative-client-with-base-url-per-environment/59108301#59108301", "title": "Micronaut declarative client with base url per environment", "body": "<blockquote>\n  <p>I'm setting my client's base uri in application.dev.yml</p>\n</blockquote>\n\n<p>You probably want <code>application-dev.yml</code>.</p>\n\n<blockquote>\n  <p>But how would I make this work in the @Client() annotation?</p>\n</blockquote>\n\n<p>You can put a config key in the <code>@Client</code> value using something like <code>@Client(\"${myserviceclient.baseUri}\")</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 632, "user_id": 390436, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/fe492f37cb78e92e5a8bfd1e0b5870b5?s=128&d=identicon&r=PG", "display_name": "tibi", "link": "https://stackoverflow.com/users/390436/tibi"}, "is_accepted": false, "score": 0, "last_activity_date": 1609166809, "creation_date": 1609166809, "answer_id": 65479417, "question_id": 59079276, "link": "https://stackoverflow.com/questions/59079276/micronaut-declarative-client-with-base-url-per-environment/65479417#65479417", "title": "Micronaut declarative client with base url per environment", "body": "<p>If you want the url somewhere in your code use this:</p>\n<pre><code>@Value(&quot;${micronaut.http.services.occupancy.urls}&quot;)\nprivate String occupancyUrl;\n</code></pre>\n"}], "owner": {"reputation": 1255, "user_id": 433168, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e257008a27d31126a51c3277a2931518?s=128&d=identicon&r=PG", "display_name": "Jim Wharton", "link": "https://stackoverflow.com/users/433168/jim-wharton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 372, "favorite_count": 0, "accepted_answer_id": 59108301, "answer_count": 2, "score": 0, "last_activity_date": 1609166809, "creation_date": 1574893635, "question_id": 59079276, "link": "https://stackoverflow.com/questions/59079276/micronaut-declarative-client-with-base-url-per-environment", "title": "Micronaut declarative client with base url per environment", "body": "<p>I'd like to be able to use Micronaut's declarative client to hit an a different endpoint based on whether I'm in a local development environment vs a production environment.</p>\n\n<p>I'm setting my client's base uri in <code>application.dev.yml</code>:</p>\n\n<pre><code>myserviceclient:\n  baseUri: http://localhost:1080/endpoint\n</code></pre>\n\n<p>Reading the docs from Micronaut, they have the developer jumping through quite a few hoops to get a dynamic value piped into the actual client. They're actually quite confusing. So I've created a configuration like this:</p>\n\n<pre><code>@ConfigurationProperties(PREFIX)\nclass MyServiceClientConfig {\n\n  companion object {\n    const val PREFIX = \"myserviceclient\"\n    const val BASE_URL = \"http://localhost:1080/endpoint\"\n  }\n\n  var baseUri: String? = null\n\n  fun toMap(): MutableMap&lt;String, Any&gt; {\n    val m = HashMap&lt;String, Any&gt;()\n    if (baseUri != null) {\n      m[\"baseUri\"] = baseUri!!\n    }\n\n    return m\n  }\n}\n</code></pre>\n\n<p>But as you can see, that's not actually reading any values from <code>application.yml</code>, it's simply setting a const value as a static on the class. I'd like that <code>BASE_URL</code> value to be dynamic based on which environment I'm in. </p>\n\n<p>To use this class, I've created a declarative client like this:</p>\n\n<pre><code>@Client(MyServiceClientConfig.BASE_URL)\ninterface MyServiceClient {\n\n  @Post(\"/user/kfc\")\n  @Produces(\"application/json\")\n  fun sendUserKfc(transactionDto: TransactionDto)\n}\n</code></pre>\n\n<p>The docs show an example where they're interpolating values from the config map that's built like this:</p>\n\n<pre><code>@Get(\"/api/\\${bintray.apiversion}/repos/\\${bintray.organization}/\\${bintray.repository}/packages\") \n</code></pre>\n\n<p>But how would I make this work in the <code>@Client()</code> annotation? </p>\n\n<p>Nowhere in that example do they show how <code>bintray</code> is getting defined/injected/etc. This appears to be the same syntax that's used with the <code>@Value()</code> annotation. I've tried using that as well, but every value I try to use ends up being <code>null</code>. </p>\n\n<p>This is very frustrating, but I'm sure I'm missing a key piece that will make this all work.</p>\n"}, {"tags": ["kotlin", "spring-data-jpa", "kotlin-coroutines"], "comments": [{"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1574927797, "post_id": 59079247, "comment_id": 104404066, "body": "You may be violating the threading policy of the implicit ORM session in use. You use <code>save</code> from one thread, switch to another thread to query, then do the last check from the original thread. The <code>save</code> command probably doesn&#39;t commit the transaction and the other thread starts its own, concurrent transaction isolated from the original one."}, {"owner": {"reputation": 125, "user_id": 4143142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f33c5a0b14c735f792e3ec69608784a?s=128&d=identicon&r=PG&f=1", "display_name": "itavq", "link": "https://stackoverflow.com/users/4143142/itavq"}, "reply_to_user": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1574944643, "post_id": 59079247, "comment_id": 104412939, "body": "@MarkoTopolnik 10x. to rule that out, I&#39;ve changed the save(...) to saveAndFlush(...) - to no avail."}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1574945339, "post_id": 59079247, "comment_id": 104413318, "body": "I wouldn&#39;t even expect that to make a difference. <code>save()</code> does nothing but enroll your object into the local cache, whereas <code>saveAndFlush()</code> immediately executes an <code>INSERT</code> statement. Both are transaction-local actions and aren&#39;t visible outside it."}], "owner": {"reputation": 125, "user_id": 4143142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f33c5a0b14c735f792e3ec69608784a?s=128&d=identicon&r=PG&f=1", "display_name": "itavq", "link": "https://stackoverflow.com/users/4143142/itavq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 170, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1574944684, "creation_date": 1574893469, "last_edit_date": 1574944684, "question_id": 59079247, "link": "https://stackoverflow.com/questions/59079247/kotlin-coroutine-in-spring-datajpatest", "title": "Kotlin coroutine in Spring DataJpaTest", "body": "<p>In a spring Boot service we have a new Kotlin coroutine implementation which works nicely.</p>\n\n<p>However, when trying to test it the JpaRepository seems to get \"truncated\" when accessed on a coroutine block. here is a simplified portion of the code:</p>\n\n<pre><code>import kotlinx.coroutines.*\nimport org.junit.jupiter.api.Test\nimport org.junit.jupiter.api.extension.ExtendWith\nimport org.springframework.beans.factory.annotation.Autowired\nimport org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest\nimport org.springframework.data.jpa.repository.JpaRepository\nimport org.springframework.test.context.ContextConfiguration\nimport org.springframework.test.context.junit.jupiter.SpringExtension\nimport javax.persistence.*\n\n@ExtendWith(SpringExtension::class)\n@ContextConfiguration(classes = [SpringTestConfig::class])\n@DataJpaTest\nclass BadRepoTest(@Autowired val testedRepository: TestRepository) {\n    @Test\n    fun testRepo() {\n\n        testedRepository.saveAndFlush(TestEntity())\n\n        println(\"count at start: ${testedRepository.count()} and $testedRepository\")\n        runBlocking {\n            runCodeAsync().await()\n        }\n        println(\"count post async code: ${testedRepository.count()} and $testedRepository\")\n    }\n\n    fun runCodeAsync(): Deferred&lt;Unit&gt; {\n        return GlobalScope.async {\n            println(\"count in async code: ${testedRepository.count()} and $testedRepository\")\n        }\n    }\n}\n\ninterface TestRepository : JpaRepository&lt;TestEntity, Int&gt;\n\n@Entity\n@Table(name = \"test\")\ndata class TestEntity(\n    @Id @GeneratedValue(strategy = GenerationType.IDENTITY) val id: Int? = null\n)\n</code></pre>\n\n<p>I would expect the repository to contain a single entity at all time during the test run, but the code prints:</p>\n\n<pre><code>count at the start: 1 and SimpleJpaRepository@40d04cf8\ncount in async code: 0 and SimpleJpaRepository@40d04cf8\ncount post async code: 1 and SimpleJpaRepository@40d04cf8\n</code></pre>\n\n<p>Could you please advise?</p>\n"}, {"tags": ["android", "kotlin", "retrofit", "moshi"], "comments": [{"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1574929600, "post_id": 59078818, "comment_id": 104404870, "body": "&quot;I used also list but it didn&#39;t work.&quot; Do you mean <code>var animaux: List&lt;Animaux&gt;</code> instead of <code>Animaux</code>? It looks like it should work to me, or if it doesn&#39;t that&#39;s a different error."}, {"owner": {"reputation": 57, "user_id": 11568557, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ViRbe.jpg?s=128&g=1", "display_name": "nimondo", "link": "https://stackoverflow.com/users/11568557/nimondo"}, "reply_to_user": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1574951082, "post_id": 59078818, "comment_id": 104416456, "body": "How do you implement it in the model class. Could you show how to do it becuase when I try I get this error <code>error: Entities and POJOs must have a usable public constructor. You can have an empty constructor or a constructor whose parameters match the fields (by name and type). - java.util.List\t</code>"}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 11568557, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ViRbe.jpg?s=128&g=1", "display_name": "nimondo", "link": "https://stackoverflow.com/users/11568557/nimondo"}, "edited": false, "score": 0, "creation_date": 1598224179, "post_id": 59100310, "comment_id": 112380129, "body": "Thank you for your answer. Very helphful. @Alexey Romanov"}], "tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": true, "score": 2, "last_activity_date": 1575011782, "creation_date": 1575011782, "answer_id": 59100310, "question_id": 59078818, "link": "https://stackoverflow.com/questions/59078818/expected-begin-object-but-was-begin-array-at-path-moshi-json-data-exception/59100310#59100310", "title": "Expected BEGIN_OBJECT but was BEGIN_ARRAY at path Moshi Json Data Exception", "body": "<p>Your JSON has a list of <code>Animaux</code>, not just a single one. So you need <code>var animaux: List[Animaux]</code>, not just <code>Animaux</code>. </p>\n\n<blockquote>\n  <p>How do you implement it in the model class. Could you show how to do it becuase when I try I get this error error: <code>Entities and POJOs must have a usable public constructor. You can have an empty constructor or a constructor whose parameters match the fields (by name and type). - java.util.List</code></p>\n</blockquote>\n\n<p>Room <a href=\"https://developer.android.com/training/data-storage/room/referencing-data#understand-no-object-references\" rel=\"nofollow noreferrer\">doesn't support such fields directly</a>. You could technically make it work (see answers to <a href=\"https://stackoverflow.com/questions/44580702/android-room-persistent-library-how-to-insert-class-that-has-a-list-object-fie\">Android room persistent library - how to insert class that has a List object field</a>), but your data is definitely complex enough that I wouldn't try to use a single class both for JSON and for Room; it'll end up with a very <a href=\"https://en.wikipedia.org/wiki/Database_normalization\" rel=\"nofollow noreferrer\">un-normalized database</a>. </p>\n"}], "owner": {"reputation": 57, "user_id": 11568557, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ViRbe.jpg?s=128&g=1", "display_name": "nimondo", "link": "https://stackoverflow.com/users/11568557/nimondo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1002, "favorite_count": 0, "accepted_answer_id": 59100310, "answer_count": 1, "score": 1, "last_activity_date": 1593178121, "creation_date": 1574890806, "last_edit_date": 1593178121, "question_id": 59078818, "link": "https://stackoverflow.com/questions/59078818/expected-begin-object-but-was-begin-array-at-path-moshi-json-data-exception", "title": "Expected BEGIN_OBJECT but was BEGIN_ARRAY at path Moshi Json Data Exception", "body": "<p>I'm using Moshi as converter for Retrofit, but for one particular request it doesn't work and exception is thrown:</p>\n<blockquote>\n<p>com.squareup.moshi.JsonDataException: Expected BEGIN_OBJECT but was BEGIN_ARRAY at path $.animaux</p>\n</blockquote>\n<p>Here is the Json</p>\n<pre>    &quot;nb_animaux&quot;: 1,\n    &quot;animaux&quot;: [\n        {\n            &quot;code_iso&quot;: &quot;768010103010004&quot;,\n            &quot;photos&quot;: [],\n            &quot;espece&quot;: {\n                &quot;id&quot;: 1,\n                &quot;fr&quot;: &quot;Bovin&quot;,\n                &quot;en&quot;: &quot;Bovine&quot;\n            },\n            &quot;elevage&quot;: {\n                &quot;parametre_geographique&quot;: {\n                    &quot;prefecture&quot;: &quot;Oti&quot;,\n                    &quot;region&quot;: &quot;Savane&quot;,\n                    &quot;commune&quot;: &quot;Mango&quot;,\n                    &quot;pays&quot;: {\n                        &quot;fr&quot;: &quot;TOGO&quot;,\n                        &quot;en&quot;: &quot;TOGO&quot;\n                    },\n                    &quot;village&quot;: &quot;Fonboro&quot;\n                },\n                &quot;type_elevage&quot;: {},\n                &quot;code_elevage&quot;: &quot;76801010301&quot;\n            },\n            &quot;sexe&quot;: &quot;m&quot;,\n            &quot;date_naissance&quot;: 1561932000,\n            &quot;category&quot;: {\n                &quot;fr&quot;: &quot;Taureau&quot;,\n                &quot;en&quot;: &quot;Bull&quot;\n            },\n            &quot;proprietaire&quot;: {\n                &quot;id&quot;: 10,\n                &quot;fullname&quot;: &quot;edem&quot;,\n                &quot;adresse&quot;: &quot;lome&quot;,\n                &quot;telephone&quot;: &quot;98665478&quot;\n            }\n        }\n    ],\n    &quot;num_transport&quot;: &quot;1/11/2019/TG&quot;,\n    &quot;date_transport&quot;: 1574784132,\n    &quot;traite&quot;: false\n}\n</pre>\n<p>My model class</p>\n<pre><code>@Entity\ndata class Animal(\n    @field:PrimaryKey\n    var id: Long,\n    @ColumnInfo(name = &quot;nb_animaux&quot;)\n    @Json(name = &quot;nb_animaux&quot;)\n    var nbAnimaux : Int,\n    @Embedded\n    @get:Json(name = &quot;animaux&quot;)\n    var animaux : Animaux,\n    @ColumnInfo(name = &quot;num_transport&quot;)\n    @Json(name = &quot;num_transport&quot;)\n    var numeroTransport : String,\n    @ColumnInfo(name = &quot;date_transport&quot;)\n    @Json(name = &quot;date_transport&quot;)\n    var dateTransport : Long,\n    var traite: Boolean\n\n)\n@JsonClass(generateAdapter = true)\ndata class Animaux(\n    @ColumnInfo(name = &quot;animaux_id&quot;)\n    var id : Long,\n    @ColumnInfo(name = &quot;code_iso&quot;)\n    @Json(name = &quot;code_iso&quot;)\n    var codeIso : Long,\n    @Embedded\n    var espece : Espece,\n    @Embedded\n    var elevage : Elevage,\n    var sexe : String,\n    @ColumnInfo(name = &quot;date_naisance&quot;)\n    @Json(name = &quot;date_naisance&quot;)\n    var dateNaissance : Long,\n    @ColumnInfo(name = &quot;race_pere&quot;)\n    @Json(name = &quot;race_pere&quot;)\n    var racePere: String,\n    @ColumnInfo(name = &quot;race_mere&quot;)\n    @Json(name = &quot;race_mere&quot;)\n    var raceMere: String,\n    @Embedded\n    var category: Category,\n    @Embedded\n    var proprietaire: Proprietaire\n\n)\n/*{\n    constructor() : this(0, 0, Espece(0,&quot;&quot;,&quot;&quot;), Elevage(0, ParametreGeographique(&quot;&quot;,&quot;&quot;,&quot;&quot;,\n        Country(&quot;&quot;,&quot;&quot;),&quot;&quot;\n    ),0), &quot;&quot;, 0, &quot;&quot;, &quot;&quot;, Category(0,&quot;&quot;,&quot;&quot;),Proprietaire\n    (0,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;))\n}\n */\ndata class Espece(\n    @ColumnInfo(name = &quot;id_espece&quot;)\n    @Json(name = &quot;id_espece&quot;)\n    var id: Long,\n    var fr : String,\n    var en : String\n)\ndata class Elevage(\n    @ColumnInfo(name = &quot;id_elevage&quot;)\n    @Json(name = &quot;id_elevage&quot;)\n    var id: Long,\n    @Embedded\n    var parametregeographique: ParametreGeographique,\n    @ColumnInfo(name = &quot;code_elevage&quot;)\n    @Json(name = &quot;code_elevage&quot;)\n    var codeElevage : Long\n)\ndata class ParametreGeographique(\n    var prefecture : String,\n    var region : String,\n    var commune : String,\n    @Embedded\n    var pays : Country,\n    var village : String\n)\ndata class Country(\n    @ColumnInfo(name = &quot;fr_pays&quot;)\n    @Json(name = &quot;fr_pays&quot;)\n    var fr : String,\n    @ColumnInfo(name = &quot;en_pays&quot;)\n    @Json(name = &quot;en_pays&quot;)\n    var en : String\n)\n\ndata class Category (\n    @ColumnInfo(name = &quot;id_category&quot;)\n    var id: Long,\n    @ColumnInfo(name = &quot;fr_category&quot;)\n    var fr : String,\n    @ColumnInfo(name = &quot;en_category&quot;)\n    var en : String\n)\ndata class Proprietaire(\n    @ColumnInfo(name = &quot;id_proprietaire&quot;)\n    var id: Long,\n    var fullname : String,\n    var telephone : String,\n    @ColumnInfo(name = &quot;telephone_second&quot;)\n    var telephoneSecond : String,\n    @ColumnInfo(name = &quot;photo_profile&quot;)\n    var photoProfil : String\n)\n</code></pre>\n<p>The retrofit call</p>\n<pre><code>@GET(&quot;marche-betail/transport/{id}&quot;)\nfun commandesDetailFromServer(@Path(&quot;id&quot;) id: Long?): Observable&lt;Animal&gt;\n</code></pre>\n<p>How can I handle the error. I tried to use constructor for <code>Animaux</code> class but I get error. I used also <code>list&lt;Animaux&gt;</code> but it didn't work.</p>\n"}, {"tags": ["android", "oop", "kotlin", "interface", "extension-function"], "comments": [{"owner": {"reputation": 1600, "user_id": 1292745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGKY6.gif?s=128&g=1", "display_name": "gpunto", "link": "https://stackoverflow.com/users/1292745/gpunto"}, "edited": false, "score": 0, "creation_date": 1574893531, "post_id": 59078359, "comment_id": 104395585, "body": "The extension function is accepting any <i>concrete</i> object implementing <code>FruitColorsInterface</code>. Then it calls <code>mixColors()</code> on that object and it will execute the concrete method implemented inside the object. In your case, by calling the extension function, you are passing <code>this</code>: it being an instance of <code>AppleTrimViewModel</code>, that indeed implements <code>mixColors()</code>."}], "answers": [{"comments": [{"owner": {"reputation": 257, "user_id": 4403927, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3ff3676a971cc3fd244d79ada43f76a5?s=128&d=identicon&r=PG&f=1", "display_name": "Drocchio", "link": "https://stackoverflow.com/users/4403927/drocchio"}, "edited": false, "score": 0, "creation_date": 1575148990, "post_id": 59080829, "comment_id": 104470381, "body": "sometimes syntactic sugar make me lose contact with the old java logic, but I forgive kotlin, is pragmatic and fast and I can always see the java code generated if want to understand"}], "tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": true, "score": 1, "last_activity_date": 1574907850, "last_edit_date": 1574907850, "creation_date": 1574907120, "answer_id": 59080829, "question_id": 59078359, "link": "https://stackoverflow.com/questions/59078359/why-the-methods-propreties-of-an-interface-can-be-passed-in-an-extension-functi/59080829#59080829", "title": "why the methods /propreties of an interface can be passed in an extension function", "body": "<p>In the scope of an extension function you have an instance of the type that it extends (in your example it is <code>FruitColorsInterface</code>) available as <code>this</code> \u2014 an implicit receiver. </p>\n\n<p>Using that <code>this</code> instance you can invoke other functions and properties available on that type, no matter whether they are members or extensions.</p>\n\n<p>As to why you can call just <code>mixColors()</code> instead of <code>this.mixColors()</code> in the extension function body, it's because <code>this</code> is available implicitly, same as in the member function bodies, and thus it can be omitted. </p>\n"}], "owner": {"reputation": 257, "user_id": 4403927, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3ff3676a971cc3fd244d79ada43f76a5?s=128&d=identicon&r=PG&f=1", "display_name": "Drocchio", "link": "https://stackoverflow.com/users/4403927/drocchio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 59080829, "answer_count": 1, "score": 0, "last_activity_date": 1574990421, "creation_date": 1574888418, "last_edit_date": 1574990421, "question_id": 59078359, "link": "https://stackoverflow.com/questions/59078359/why-the-methods-propreties-of-an-interface-can-be-passed-in-an-extension-functi", "title": "why the methods /propreties of an interface can be passed in an extension function", "body": "<p>Today I had to use an extension function which had as predicate an Interface, a kind of <code>Interface.whateverExtensionFunction()</code> \nand a I had a <code>class ViewModel () :InterfaceInherithingFromAnotherInterface</code>.  The architectural idea \n  behind is to maintain my viewModel tidy and delegate some heavy weight to the extension function.\nI do not understand why into my ViewModel in whatever method I can call the extension function <code>FruitColorsInterface.changeColors()</code> as in the code below into the method <code>cut()</code> </p>\n\n<p>I <strong>do not undersand how is possible that effectively into the extension function, I can call the interface method</strong></p>\n\n<p>If a class implements an interface this is a contract to <strong>implement the methods</strong> of the interface and not too pass an object Interface has happens in this extension class**</p>\n\n<pre><code>class testInterface(){\n\n    @Test\n    fun testInterface(){\nAppleTrim().cut()\n    }\n\n}\n\nclass AppleTrimViewModel : FruitColorsInterface{\n    override val red: String\n        get() = TODO(\"not implemented\") //To change initializer of created properties use File | Settings | File Templates.\n    override val green: String\n        get() = TODO(\"not implemented\") //To change initializer of created properties use File | Settings | File Templates.\n\n    override fun mixColors(): String {\n        TODO(\"not implemented\") //To change body of created functions use File | Settings | File Templates.\n    }\n\n    override fun move3d() {\n        TODO(\"not implemented\") //To change body of created functions use File | Settings | File Templates.\n    }\n\n    override fun spinFromTop(): Int {\n        TODO(\"not implemented\") //To change body of created functions use File | Settings | File Templates.\n    }\n\n    fun cut(){\n\n        changeColors()\n        //FruitColorsInterface.changeColors()//why this is error?\n\n    }\n}\n\ninterface FruitColorsInterface {\n    val red :String\n    val green:String\n\n    fun mixColors(): String\n    fun move3d()\n    fun spinFromTop() :Int\n\n}\n\nfun FruitColorsInterface.changeColors(){\n    println(\"Ehy\")\n    mixColors()//WHY IS THAT? \n\n}\n</code></pre>\n\n<p>if I decompile in Java I get a static function where is passed an interface</p>\n\n<pre><code>    public static final void changeColors(@NotNull FruitColorsInterface $this$changeColors) {\n          Intrinsics.checkParameterIsNotNull($this$changeColors, \"$this$changeColors\");\n          String var1 = \"Ehy\";\n          System.out.println(var1);\n          $this$changeColors.mixColors();\n       }\n//and\n   public final void cut() {\n      Test_interfaceKt.changeColors(this);\n   }\n</code></pre>\n"}, {"tags": ["kotlin", "functional-programming", "sealed-class"], "comments": [{"owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "edited": false, "score": 6, "creation_date": 1574885819, "post_id": 59077164, "comment_id": 104392809, "body": "<code>list.head</code>, <code>list.tail</code>?"}, {"owner": {"reputation": 27, "user_id": 12356143, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217757550184437/picture?type=large", "display_name": "Momo", "link": "https://stackoverflow.com/users/12356143/momo"}, "reply_to_user": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "edited": false, "score": 0, "creation_date": 1574932914, "post_id": 59077164, "comment_id": 104406572, "body": "This was my first choice. But with :   is List.Node&lt;T&gt; -&gt; List.Node&lt;R&gt; (f (list.head), list.tail.map (f))  map doesn&#39;t work any longer"}, {"owner": {"reputation": 27, "user_id": 12356143, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217757550184437/picture?type=large", "display_name": "Momo", "link": "https://stackoverflow.com/users/12356143/momo"}, "reply_to_user": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "edited": false, "score": 0, "creation_date": 1574967514, "post_id": 59077164, "comment_id": 104423525, "body": "Found a solution after some more research  fun &lt;T,R&gt; List&lt;T&gt;.map (f : (T) -&gt; R) : List&lt;R&gt; = when (this) {     List.Nil -&gt; List.Nil as List&lt;R&gt;     is List.Node -&gt; List.Node (f(head), tail.map(f)) }"}], "answers": [{"tags": [], "owner": {"reputation": 27, "user_id": 12356143, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217757550184437/picture?type=large", "display_name": "Momo", "link": "https://stackoverflow.com/users/12356143/momo"}, "is_accepted": true, "score": 0, "last_activity_date": 1576075312, "creation_date": 1576075312, "answer_id": 59288230, "question_id": 59077164, "link": "https://stackoverflow.com/questions/59077164/kotlin-functional-programming-sealed-class-list/59288230#59288230", "title": "Kotlin: functional programming, sealed class List", "body": "<p>Found a solution after some more research fun  List.map (f : (T) -> R) : List = when (this) { List.Nil -> List.Nil as List is List.Node -> List.Node (f(head), tail.map(f)) }</p>\n"}], "owner": {"reputation": 27, "user_id": 12356143, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217757550184437/picture?type=large", "display_name": "Momo", "link": "https://stackoverflow.com/users/12356143/momo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 59288230, "answer_count": 1, "score": 0, "last_activity_date": 1576075312, "creation_date": 1574882442, "last_edit_date": 1574928288, "question_id": 59077164, "link": "https://stackoverflow.com/questions/59077164/kotlin-functional-programming-sealed-class-list", "title": "Kotlin: functional programming, sealed class List", "body": "<p>I am practicing some functional programming with a sealed class List and a map function.</p>\n\n<p>So far the code for the sealed class</p>\n\n<pre><code>sealed class List &lt;T&gt; {\n\n    class Node &lt;T&gt; ( val head : T , val tail : List&lt;T&gt;) : List&lt;T&gt; () {\n        override fun toString () =\n            \"${head.toString()} , ${tail.toString()}\"\n    }\n\n    object Nil : List&lt;Nothing&gt; ()  {\n        override fun toString () = \"NIL\"\n    }\n\n    companion object {\n        operator\n        fun &lt;T&gt; invoke (vararg values : T ) : List&lt;T&gt;{\n            val empty = Nil as List&lt;T&gt;\n            val res = values.foldRight( empty , { v, l -&gt; l.addFirst(v)   })\n            return res\n        }\n    }\n\n    fun addFirst ( head : T ) : List&lt;T&gt; = Node (head , this)\n\n    fun removeFirst ()  : List &lt;T&gt; = when (this) {\n        is Nil -&gt; throw IllegalStateException()\n        is Node&lt;T&gt; -&gt; this.tail\n    }\n\n}\n</code></pre>\n\n<p>The map function <strong><em>inside</em></strong> the sealed class worked fine, but now I want it to run <strong><em>outside</em></strong> the sealed class like</p>\n\n<pre><code>fun &lt;T,R&gt; map (list:List&lt;T&gt;, f: (T) -&gt; R) {\n    when(list) {\n        is List.Nil -&gt; List.Nil as List&lt;R&gt;\n        is List.Node -&gt; List.Node&lt;R&gt; (f(head), tail.map(f))\n    }\n}\n</code></pre>\n\n<p>But now \"head\" and \"tail\" don't work any longer, because of unresolved references. I tried different strategies, but nothings works. Any ideas how to solve it? </p>\n"}, {"tags": ["java", "gradle", "kotlin", "sonarqube", "jacoco"], "answers": [{"tags": [], "owner": {"reputation": 2928, "user_id": 7747942, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5jXKyAbmi_M/AAAAAAAAAAI/AAAAAAAAAFQ/AewmU0ev_68/photo.jpg?sz=128", "display_name": "Sylhare", "link": "https://stackoverflow.com/users/7747942/sylhare"}, "is_accepted": true, "score": 1, "last_activity_date": 1574880980, "creation_date": 1574880980, "answer_id": 59076854, "question_id": 59076853, "link": "https://stackoverflow.com/questions/59076853/sonarqube-not-picking-up-both-kotlin-and-java-coverage-gradle-project/59076854#59076854", "title": "Sonarqube not picking up both Kotlin and Java Coverage gradle project", "body": "<p>First make sure your <code>jacocoTestReport</code> creates a xml report:</p>\n\n<pre><code>jacocoTestReport {\n    reports {\n        xml {\n            enabled true\n        }\n        xml.destination \"build/reports/jacocoTestReport.xml\"\n    }\n} \n</code></pre>\n\n<p>Then you will need to force those xml reports into sonar using the <code>xmlReportPaths</code> property in sonaqube for all projects.</p>\n\n<p>You can see multiple paths here, that's in case you have multiple sub projects in your projects which also have mixed source Java / Kotlin.</p>\n\n<pre><code>sonarqube {\n        properties {\n            property \"sonar.java.coveragePlugin\", \"jacoco\"\n            property(\"sonar.coverage.jacoco.xmlReportPaths\", \"../../build/reports/jacocoTestReport.xml,../build/reports/jacocoTestReport.xml\")\n        }\n}\n</code></pre>\n\n<p>With that sonar will consider all the xml reports and generate the whole coverage.</p>\n"}], "owner": {"reputation": 2928, "user_id": 7747942, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5jXKyAbmi_M/AAAAAAAAAAI/AAAAAAAAAFQ/AewmU0ev_68/photo.jpg?sz=128", "display_name": "Sylhare", "link": "https://stackoverflow.com/users/7747942/sylhare"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 888, "favorite_count": 0, "accepted_answer_id": 59076854, "answer_count": 1, "score": 1, "last_activity_date": 1574880980, "creation_date": 1574880980, "question_id": 59076853, "link": "https://stackoverflow.com/questions/59076853/sonarqube-not-picking-up-both-kotlin-and-java-coverage-gradle-project", "title": "Sonarqube not picking up both Kotlin and Java Coverage gradle project", "body": "<p>This is <strong>not</strong> an android project with mixed source Java and Kotlin.\nEventhough many have had issues with coverage, kotlin and sonar. I didn't find one for this case.</p>\n\n<p>Sonarqube is not picking up both Kotlin and Java Coverage generated by Jacoco:</p>\n\n<ul>\n<li>Gradle 4.8</li>\n<li>Java 1.8</li>\n<li>Kotlin 1.3.50</li>\n</ul>\n\n<p>It gets the Java one, but all of the Kotlin classes gets ignored.\nI have applied all required plugin in the gradle file:</p>\n\n<pre><code>allprojects {\n    apply plugin: 'jacoco'\n    apply plugin: 'java'\n    apply plugin: 'org.sonarqube'\n    apply plugin: 'kotlin'\n\n   ...\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "mvvm", "realm", "clean-architecture"], "answers": [{"tags": [], "owner": {"reputation": 622, "user_id": 6598930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcef5b88079e42cf3560c55d10ae8971?s=128&d=identicon&r=PG&f=1", "display_name": "Myk", "link": "https://stackoverflow.com/users/6598930/myk"}, "is_accepted": false, "score": 0, "last_activity_date": 1574881394, "creation_date": 1574881394, "answer_id": 59076952, "question_id": 59076757, "link": "https://stackoverflow.com/questions/59076757/how-to-properly-separate-realm-from-the-rest-of-the-app/59076952#59076952", "title": "How to properly separate Realm from the rest of the app?", "body": "<p>So I have attempted to come up with a solution to this myself. I haven't tested it very well yet but my idea is basically to modify the LiveRealmResults file from the official example to let the caller (RealmHelper for example) know when it changes states between inactive and active. When it is active the caller will open the realm and pass in the results. When it changes to inactive the caller will close the realm. This is what my LiveRealmResults looks like:</p>\n\n<pre><code>@MainThread\nclass LiveRealmResults&lt;T : RealmModel&gt;(\n    private val getResults: () -&gt; RealmResults&lt;T&gt;,\n    private val closeRealm: () -&gt; Unit\n) : LiveData&lt;List&lt;T&gt;&gt;() {\n\n    private var results: RealmResults&lt;T&gt;? = null\n    private val listener = OrderedRealmCollectionChangeListener&lt;RealmResults&lt;T&gt;&gt; { \n        results, _ -&gt;\n\n        this@LiveRealmResults.value = results\n    }\n\n    override fun onActive() {\n        super.onActive()\n\n        results = getResults()\n\n        if (results?.isValid == true) {\n            results?.addChangeListener(listener)\n        }\n        if (results?.isLoaded == true) {\n            value = results\n        }\n    }\n\n    override fun onInactive() {\n        super.onInactive()\n\n        if (results?.isValid == true) {\n            results?.removeChangeListener(listener)\n        }\n        removeObserver()\n    }\n}\n</code></pre>\n\n<p>It will be used like so:</p>\n\n<pre><code>class RealmHelper() {\n\n    fun getObjects(): LiveData&lt;List&lt;Objects&gt;&gt; {\n        var realm: Realm? = null\n\n        return LiveRealmResults&lt;Objects&gt;(getResults = {\n\n            realm = Realm.getDefaultInstance()\n            realm!!.where&lt;Objects&gt;().findAll()\n        }, removeObserver = {\n\n            realm?.close()\n        })\n    }\n}\n</code></pre>\n\n<p>This method at least allows me to keep all realm logic in the RealmHelper, only exposing LiveData and not RealmResults. Whenever the LiveData is inactive the Realm is closed. In my example I'm returning RealmObject but I'm fine converting from RealmObject to normal object so I'm am not concerned with that part for this example.</p>\n"}], "owner": {"reputation": 622, "user_id": 6598930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcef5b88079e42cf3560c55d10ae8971?s=128&d=identicon&r=PG&f=1", "display_name": "Myk", "link": "https://stackoverflow.com/users/6598930/myk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 184, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574881394, "creation_date": 1574880569, "question_id": 59076757, "link": "https://stackoverflow.com/questions/59076757/how-to-properly-separate-realm-from-the-rest-of-the-app", "title": "How to properly separate Realm from the rest of the app?", "body": "<p>In my app I am trying to use MVVM with repositories databases and all that. I like to keep all my external dependencies and such separate and compartmentalized into their own files/modules so that they can easily be replaced or swapped out. </p>\n\n<p>With Realm I could make this work really well by using unmanaged objects. I can have a RealmHelper class for example which just opens a realm instance, queries or performs some transaction and then closes the realm and returns an object. </p>\n\n<p>So how can I accomplish something similar with managed objects? The problem is in this case that you have to know when to close the realm. The obvious solution here I think is to let the database know when you are done with it, but this seems like a tedious and unoptimized solution. Is there another better way?</p>\n"}, {"tags": ["firebase", "intellij-idea", "kotlin", "google-cloud-firestore"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 11777294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f5989aee0d35e845b62021407ec9a8e?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/11777294/benjamin"}, "is_accepted": true, "score": 1, "last_activity_date": 1575396826, "creation_date": 1575396826, "answer_id": 59163068, "question_id": 59076255, "link": "https://stackoverflow.com/questions/59076255/compiled-jar-keeps-throwing-uncaught-exception-in-the-synchronizationcontext/59163068#59163068", "title": "Compiled Jar keeps throwing: Uncaught exception in the SynchronizationContext", "body": "<p>Hey so after googling some more I found some an article listing code snipets from LoadBalancerRegistry (<a href=\"https://www.codota.com/code/java/classes/io.grpc.LoadBalancerRegistry\" rel=\"nofollow noreferrer\">https://www.codota.com/code/java/classes/io.grpc.LoadBalancerRegistry</a>) and I scrolled around in it and found this: PickFirstBalancerFactory.init()</p>\n\n<p>So i decided to look for this Factory but couldn't find it, instead I found PickFirstLoadBalancerProvider(). Remembering from randomly going through the autocomplete that in order to register something to LoadBalancerRegistry one would need a Provider.</p>\n\n<p>Long story short I set them both together and added the following to the init section of my class and it works fine now!</p>\n\n<p><code>LoadBalancerRegistry.getDefaultRegistry().register(PickFirstLoadBalancerProvider())</code></p>\n\n<p>Thought I should answer if anyone has the same issue!</p>\n\n<p>FYI: The icon still changes to that weird one. I don't know why or how thats even possible but it works if I replace it in the .jar so I don't really care xD</p>\n"}], "owner": {"reputation": 21, "user_id": 11777294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f5989aee0d35e845b62021407ec9a8e?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/11777294/benjamin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 777, "favorite_count": 0, "accepted_answer_id": 59163068, "answer_count": 1, "score": 1, "last_activity_date": 1575396826, "creation_date": 1574878457, "question_id": 59076255, "link": "https://stackoverflow.com/questions/59076255/compiled-jar-keeps-throwing-uncaught-exception-in-the-synchronizationcontext", "title": "Compiled Jar keeps throwing: Uncaught exception in the SynchronizationContext", "body": "<p>I have been trying to make a small application which first scans a HTML for data and then uploads it to my Firestore. I'm now essentially done with it and when starting it from within IntelliJ IDEA it works just fine. However as soon as I export it in to an artifact it starts throwing the follwing exception when trying to download/upload from/to Firestore!</p>\n\n<p>I should mention that I'm coding in Koltin/JVM as it is way easier. Since there is no Kotlin Firebase-Admin version I'm just using the Java one which shouldn't be a problem since Kotlin compiles down to Java. If I'm wrong about that pls correct me!</p>\n\n<pre><code>Nov 27, 2019 6:59:17 PM io.grpc.internal.ManagedChannelImpl$1 uncaughtException\nSEVERE: [Channel&lt;1&gt;: (firestore.googleapis.com:443)] Uncaught exception in the SynchronizationContext. Panic!\njava.lang.IllegalStateException: Could not find policy 'pick_first'. Make sure its implementation is either registered to LoadBalancerRegistry or included in META-INF/services/io.grpc.LoadBalancerProvider from your jar files.\n    at io.grpc.internal.AutoConfiguredLoadBalancerFactory$AutoConfiguredLoadBalancer.&lt;init&gt;(AutoConfiguredLoadBalancerFactory.java:97)\n    at io.grpc.internal.AutoConfiguredLoadBalancerFactory.newLoadBalancer(AutoConfiguredLoadBalancerFactory.java:67)\n    at io.grpc.internal.ManagedChannelImpl.exitIdleMode(ManagedChannelImpl.java:379)\n    at io.grpc.internal.ManagedChannelImpl$ChannelTransportProvider$1ExitIdleModeForTransport.run(ManagedChannelImpl.java:473)\n    at io.grpc.SynchronizationContext.drain(SynchronizationContext.java:95)\n    at io.grpc.SynchronizationContext.execute(SynchronizationContext.java:127)\n    at io.grpc.internal.ManagedChannelImpl$ChannelTransportProvider.get(ManagedChannelImpl.java:477)\n    at io.grpc.internal.ClientCallImpl.startInternal(ClientCallImpl.java:257)\n    at io.grpc.internal.ClientCallImpl.start(ClientCallImpl.java:190)\n    at io.grpc.internal.CensusTracingModule$TracingClientInterceptor$1.start(CensusTracingModule.java:394)\n    at io.grpc.internal.CensusStatsModule$StatsClientInterceptor$1.start(CensusStatsModule.java:695)\n    at io.grpc.ForwardingClientCall.start(ForwardingClientCall.java:32)\n    at com.google.api.gax.grpc.GrpcHeaderInterceptor$1.start(GrpcHeaderInterceptor.java:94)\n    at com.google.api.gax.grpc.GrpcDirectStreamController.startCommon(GrpcDirectStreamController.java:115)\n    at com.google.api.gax.grpc.GrpcDirectStreamController.start(GrpcDirectStreamController.java:101)\n    at com.google.api.gax.grpc.GrpcDirectServerStreamingCallable.call(GrpcDirectServerStreamingCallable.java:68)\n    at com.google.api.gax.grpc.GrpcServerStreamingRequestParamCallable.call(GrpcServerStreamingRequestParamCallable.java:61)\n    at com.google.api.gax.grpc.GrpcExceptionServerStreamingCallable.call(GrpcExceptionServerStreamingCallable.java:59)\n    at com.google.api.gax.rpc.WatchdogServerStreamingCallable.call(WatchdogServerStreamingCallable.java:69)\n    at com.google.api.gax.rpc.ServerStreamingCallable$1.call(ServerStreamingCallable.java:237)\n    at com.google.api.gax.rpc.ServerStreamingAttemptCallable.call(ServerStreamingAttemptCallable.java:230)\n    at com.google.api.gax.rpc.ServerStreamingAttemptCallable.start(ServerStreamingAttemptCallable.java:193)\n    at com.google.api.gax.rpc.RetryingServerStreamingCallable.call(RetryingServerStreamingCallable.java:87)\n    at com.google.api.gax.tracing.TracedServerStreamingCallable.call(TracedServerStreamingCallable.java:76)\n    at com.google.api.gax.rpc.ServerStreamingCallable$1.call(ServerStreamingCallable.java:237)\n    at com.google.api.gax.rpc.ServerStreamingCallable.serverStreamingCall(ServerStreamingCallable.java:166)\n    at com.google.api.gax.rpc.ServerStreamingCallable.serverStreamingCall(ServerStreamingCallable.java:178)\n    at com.google.cloud.firestore.FirestoreImpl.streamRequest(FirestoreImpl.java:474)\n    at com.google.cloud.firestore.FirestoreImpl.getAll(FirestoreImpl.java:243)\n    at com.google.cloud.firestore.FirestoreImpl.getAll(FirestoreImpl.java:253)\n    at com.google.cloud.firestore.FirestoreImpl.getAll(FirestoreImpl.java:143)\n    at com.google.cloud.firestore.DocumentReference.get(DocumentReference.java:354)\n    at FirebaseHandler.getLehrer(FirebaseHandler.kt:95)\n    at HtmReader.readFile(HtmReader.kt:12)\n    at MainView.theStuff(MainView.kt:61)\n    at MainView.onDock(MainView.kt:44)\n    at tornadofx.UIComponent.callOnDock$tornadofx(Component.kt:700)\n    at tornadofx.UIComponent$rootSceneWindowShowingPropertyChangeListener$1.changed(Component.kt:556)\n    at tornadofx.UIComponent$rootSceneWindowShowingPropertyChangeListener$1.changed(Component.kt:327)\n    at com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(ExpressionHelper.java:182)\n    at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)\n    at javafx.beans.property.ReadOnlyBooleanPropertyBase.fireValueChangedEvent(ReadOnlyBooleanPropertyBase.java:72)\n    at javafx.beans.property.ReadOnlyBooleanWrapper.fireValueChangedEvent(ReadOnlyBooleanWrapper.java:103)\n    at javafx.beans.property.BooleanPropertyBase.markInvalid(BooleanPropertyBase.java:110)\n    at javafx.beans.property.BooleanPropertyBase.set(BooleanPropertyBase.java:144)\n    at javafx.stage.Window.setShowing(Window.java:922)\n    at javafx.stage.Window.show(Window.java:937)\n    at javafx.stage.Stage.show(Stage.java:259)\n    at tornadofx.App.start(App.kt:101)\n    at com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$161(LauncherImpl.java:863)\n    at com.sun.javafx.application.PlatformImpl.lambda$runAndWait$174(PlatformImpl.java:326)\n    at com.sun.javafx.application.PlatformImpl.lambda$null$172(PlatformImpl.java:295)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at com.sun.javafx.application.PlatformImpl.lambda$runLater$173(PlatformImpl.java:294)\n    at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)\n    at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)\n    at com.sun.glass.ui.win.WinApplication.lambda$null$147(WinApplication.java:177)\n    at java.lang.Thread.run(Thread.java:748)\n</code></pre>\n\n<p>My code wich (in this case) downloads stuff is as following:</p>\n\n<pre><code>fun getLehrer(): HashMap&lt;String, Any&gt; {\n        [...]\n        val out = HashMap&lt;String, Any&gt;()\n\n        try {\n            val future = firestore.collection(\"stuff\").document(\"lehrer\").get()\n\n            future.await()\n\n            if (future.isDone) {\n                [...]\n            }\n        } catch (ex: Exception) {\n            println(\" ++ cant get lehrer liste\")\n        }\n\n        [...]\n    }\n</code></pre>\n\n<p>The error occurs at this line:</p>\n\n<pre><code>val future = firestore.collection(\"stuff\").document(\"lehrer\").get()\n</code></pre>\n\n<p>I have been trying to fix this for days now and literally spend hours googeling and trying different things but nothing has worked for me so far!</p>\n\n<p>I tried:</p>\n\n<ul>\n<li>randomly adding a LoadBalancer since i wasn't able to find any viable docs</li>\n<li>adding the loadbalancer to my META-INF/services</li>\n<li>I also found something that seemed similar here (<a href=\"https://github.com/grpc/grpc-java/issues/5493\" rel=\"nofollow noreferrer\">https://github.com/grpc/grpc-java/issues/5493</a>) but it talks about a load of stuff I don't use and frankly don't understand</li>\n</ul>\n\n<p>FYI: Weirdly my icon from my resource folder turns into a completly different one in the Jar. Dont ask me why. I couldn't find an anwser to that as well, but it isn't such a big issue since I can just replace that in the jar.</p>\n\n<p>Oh and also this is my first question so if I made any mistakes I'm sorry! I probably made some spelling errors as well which I appolagize for.</p>\n\n<p>Any help would be greatly appreciated!</p>\n\n<p>-Benni</p>\n"}, {"tags": ["xml", "string", "android-studio", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 88945, "user_id": 290085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306077a2fb7af6587f470214a1b337ff?s=128&d=identicon&r=PG", "display_name": "kjhughes", "link": "https://stackoverflow.com/users/290085/kjhughes"}, "is_accepted": false, "score": 1, "last_activity_date": 1574878212, "last_edit_date": 1574878212, "creation_date": 1574877127, "answer_id": 59075898, "question_id": 59074691, "link": "https://stackoverflow.com/questions/59074691/why-dont-hyphens-display-in-my-app-when-i-include-them-in-my-strings-xml-file/59075898#59075898", "title": "Why don&#39;t hyphens display in my app when I include them in my strings.xml file?", "body": "<p>It's a bit unclear whether you want hyphen-minus or en dash characters, but be aware of the differences between various dashes:</p>\n\n<ul>\n<li><code>-</code> is a hyphen-minus (<code>0x2D</code>) and appears directly on ASCII keyboards.</li>\n<li>\u2010 is a hyphen (<code>&amp;#8208;</code>)</li>\n<li>\u2013 is an en dash (<code>&amp;#8211;</code>) and is what your second example has at the end.</li>\n<li>\u2014 is an em dash (<code>&amp;#8212;</code>)</li>\n</ul>\n\n<p>See <a href=\"https://www.fileformat.info/info/unicode/category/Pd/list.htm\" rel=\"nofollow noreferrer\">Unicode Characters in the 'Punctuation, Dash' Category</a></p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7142686"}, "is_accepted": false, "score": 0, "last_activity_date": 1574892592, "creation_date": 1574892592, "answer_id": 59079110, "question_id": 59074691, "link": "https://stackoverflow.com/questions/59074691/why-dont-hyphens-display-in-my-app-when-i-include-them-in-my-strings-xml-file/59079110#59079110", "title": "Why don&#39;t hyphens display in my app when I include them in my strings.xml file?", "body": "<p>I increased the width of the text view as the trailing dashes/hyphens were being truncated.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7142686"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1574892592, "creation_date": 1574872379, "last_edit_date": 1574872695, "question_id": 59074691, "link": "https://stackoverflow.com/questions/59074691/why-dont-hyphens-display-in-my-app-when-i-include-them-in-my-strings-xml-file", "title": "Why don&#39;t hyphens display in my app when I include them in my strings.xml file?", "body": "<p>I have defined a string resource in my strings.xml resource file as follows:</p>\n\n<pre><code>    &lt;string name=\"title_counties\"&gt;--- Counties ---&lt;/string&gt;\n</code></pre>\n\n<p>But when I run my app I only see the first three dashes before \"Counties\" and nothing is displayed after that.</p>\n\n<p>When I edit the string resource to:</p>\n\n<pre><code>    &lt;string name=\"title_counties\"&gt;--- Counties &amp;#8211;&amp;#8211;&amp;#8211;&lt;/string&gt;\n</code></pre>\n\n<p>I still don't see the trailing dashes.</p>\n"}, {"tags": ["java", "kotlin", "static", "predicate"], "comments": [{"owner": {"reputation": 39204, "user_id": 5761558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3cf04bfac11ef3ee693852eccde3b3c?s=128&d=identicon&r=PG&f=1", "display_name": "ernest_k", "link": "https://stackoverflow.com/users/5761558/ernest-k"}, "edited": false, "score": 1, "creation_date": 1574870044, "post_id": 59073888, "comment_id": 104385544, "body": "I think the same <i>practice</i> is applied in Java too, like (<code>BiPredicate&lt;String, String&gt; bp = String::equals;</code> - <code>.equals</code> called on first string)... But no idea whether this has been named."}, {"owner": {"reputation": 33440, "user_id": 1831987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38b1c37530189ec4471a43a618e33f67?s=128&d=identicon&r=PG", "display_name": "VGR", "link": "https://stackoverflow.com/users/1831987/vgr"}, "edited": false, "score": 1, "creation_date": 1574873388, "post_id": 59073888, "comment_id": 104387356, "body": "The java.io.File class is obsolete.  You should be using <a href=\"https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/nio/file/Path.html\" rel=\"nofollow noreferrer\">Path</a> and <a href=\"https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/nio/file/Files.html\" rel=\"nofollow noreferrer\">Files</a> instead.  If you do that, your method won\u2019t be needed, as there is already <a href=\"https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/nio/file/Path.html#startsWith%28java.nio.file.Path%29\" rel=\"nofollow noreferrer\">Path.startsWith</a> (which tests for ancestry and is <i>not</i> the same as String.startsWith)."}], "answers": [{"comments": [{"owner": {"reputation": 370, "user_id": 4359679, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-72o0vzuMxa4/AAAAAAAAAAI/AAAAAAAAAKA/vOOUcgY5TuI/photo.jpg?sz=128", "display_name": "Nikita Bobko", "link": "https://stackoverflow.com/users/4359679/nikita-bobko"}, "edited": false, "score": 0, "creation_date": 1575585350, "post_id": 59074441, "comment_id": 104626404, "body": "Seems like no more valuable answer with exact pattern name with appropriate references isn&#39;t coming up so marking as right answer. Thanks for a great answer!"}], "tags": [], "owner": {"reputation": 7350, "user_id": 1971216, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ca6fc652faba0b899be996a6e675270e?s=128&d=identicon&r=PG", "display_name": "QuentinC", "link": "https://stackoverflow.com/users/1971216/quentinc"}, "is_accepted": true, "score": 2, "last_activity_date": 1574871595, "creation_date": 1574871595, "answer_id": 59074441, "question_id": 59073888, "link": "https://stackoverflow.com/questions/59073888/java-static-predicate-naming-convention/59074441#59074441", "title": "Java static predicate naming convention", "body": "<p>I'm not sure that there's a name or any real formalization. At best, it's just a common convention to have the first parameter look like the <code>this</code>.\nAlthough rarest, the \"this last\" convention also exists, more in C and early C++ (Example: stdio with fread/fwrite)</p>\n\n<p>There also exist conventions based on the argument type; for example promoting the following order:</p>\n\n<ul>\n<li>Collection and other objects with generic parameters</li>\n<li>Arrays of objects</li>\n<li>Objects without generics</li>\n<li>String</li>\n<li>Arrays of primitive types, e.g. <code>byte[]</code></li>\n<li>double, float</li>\n<li>long, int, short, byte</li>\n<li>boolean</li>\n</ul>\n\n<p>There also exist the more or less exact opposite order. Other conventions also tend to group arguments by their type, prefering <code>method(String, String, int, int)</code> rather than <code>method(String, int, String, int)</code>.</p>\n\n<p>As you can see, there are a lot of conventions that exist. I'm not sure that any of them has a name, and that any is really much more used than any other.\nIt isn't as clear as camelCase vs. snake_case for example, which almost no one contradict.</p>\n\n<p>What you can keep from all that is the following: put the arguments in the order that looks the most logical and straightforward to you.\nThe most important is to stay consist in the entire project, i.e. don't write <code>isFileX(a,b)</code> and then <code>isFileY(b,a)</code> for example, a fortiori if the two methods are in the same class.\nIN case of doubt, don't hesitate to ask other people working on your project what they think is the best.</p>\n\n<p>For your particular case, it's reasonnable to put child first because of the \"this first\" rule, but it's as reasonnable to put the parent first, as it's also a common convention for example in GUI frameworks.\nIt's up to you to decide.</p>\n"}], "owner": {"reputation": 370, "user_id": 4359679, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-72o0vzuMxa4/AAAAAAAAAAI/AAAAAAAAAKA/vOOUcgY5TuI/photo.jpg?sz=128", "display_name": "Nikita Bobko", "link": "https://stackoverflow.com/users/4359679/nikita-bobko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 407, "favorite_count": 0, "accepted_answer_id": 59074441, "answer_count": 1, "score": 2, "last_activity_date": 1574895102, "creation_date": 1574869723, "last_edit_date": 1574895102, "question_id": 59073888, "link": "https://stackoverflow.com/questions/59073888/java-static-predicate-naming-convention", "title": "Java static predicate naming convention", "body": "<p>Let's say I want to write <code>isSubdirectory</code> static function in my <code>FileUtils</code> helper class. This function would look like:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>class FileUtils {\n  public static boolean isSubdirectory(File child, File parent) {\n    // ...\n  }\n}\n</code></pre>\n\n<p>Or I could flip <code>parent</code> and <code>child</code> parameters:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>class FileUtils {\n  public static boolean isSubdirectory(File parent, File child) {\n    // ...\n  }\n}\n</code></pre>\n\n<p>And I cannot choose which order is right...</p>\n\n<p>In Kotlin there would not be any doubts: just declare extension function:</p>\n\n<pre><code>fun File.isSubdirectory(parent: File) {\n  // ...\n}\n</code></pre>\n\n<p>With an eye on kotlin I have invented mnemonic rule: first parameter in static function should be considered as <code>this</code> (I'm not the first who invented this rule. I saw many people also using it). So in this example I'd prefer placing <code>child</code> as first parameter. </p>\n\n<p>But the question is: is this rule is already formalized and has well known name? I've tired to repeat this rule to people who don't know it and I wish I could simply refer to this rule by it's name.</p>\n"}, {"tags": ["java", "android", "firebase", "kotlin", "firebase-realtime-database"], "comments": [{"owner": {"reputation": 4919, "user_id": 3399890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/171944b3f88fd2fa4bc824b4b298de4e?s=128&d=identicon&r=PG&f=1", "display_name": "robsiemb", "link": "https://stackoverflow.com/users/3399890/robsiemb"}, "edited": false, "score": 0, "creation_date": 1574869943, "post_id": 59073785, "comment_id": 104385493, "body": "Welcome to SO!  Firebase has an <a href=\"https://firebase.google.com/docs/emulator-suite\" rel=\"nofollow noreferrer\">emulator suite</a> that can be used for testing.  As written, this question is very broad.  You should be more specific about what you have tried and what isn&#39;t working for you."}, {"owner": {"reputation": 1, "user_id": 12446914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40b06455b28b5adf3e2de75680ec1b67?s=128&d=identicon&r=PG&f=1", "display_name": "nela125", "link": "https://stackoverflow.com/users/12446914/nela125"}, "reply_to_user": {"reputation": 4919, "user_id": 3399890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/171944b3f88fd2fa4bc824b4b298de4e?s=128&d=identicon&r=PG&f=1", "display_name": "robsiemb", "link": "https://stackoverflow.com/users/3399890/robsiemb"}, "edited": false, "score": 0, "creation_date": 1574872856, "post_id": 59073785, "comment_id": 104387062, "body": "I&#39;ve got implemented method to add book and author to firebase realtime database. I don&#39;t know how to implement unit tests for that method."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12446914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40b06455b28b5adf3e2de75680ec1b67?s=128&d=identicon&r=PG&f=1", "display_name": "nela125", "link": "https://stackoverflow.com/users/12446914/nela125"}, "edited": false, "score": 0, "creation_date": 1574872422, "post_id": 59073920, "comment_id": 104386830, "body": "So if I choose first option I&#39;m using references to my realtime database but calling goOffline() makes that changes will not be saved? And how should I call goOffline()? firebaseReferance.goOffline()?"}], "tags": [], "owner": {"reputation": 43, "user_id": 11889041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c56b9f54d377338ffe9000f6190d55b?s=128&d=identicon&r=PG&f=1", "display_name": "karankaran", "link": "https://stackoverflow.com/users/11889041/karankaran"}, "is_accepted": false, "score": 0, "last_activity_date": 1574869806, "creation_date": 1574869806, "answer_id": 59073920, "question_id": 59073785, "link": "https://stackoverflow.com/questions/59073785/mock-firebase-android-applicattion/59073920#59073920", "title": "Mock firebase android applicattion", "body": "<p>Option 1: If you are just using the Realtime Database, one thing you can do is call goOffline() at the beginning of your tests. This will block all network activity, but local events will still fire due to latency compensation. This has limitations (e.g. Security Rules aren't enforced and transactions don't work outline), but may work depending on your use case.</p>\n\n<p>Option 2: Check out <a href=\"https://github.com/azell/quasar-firebase\" rel=\"nofollow noreferrer\">https://github.com/azell/quasar-firebase</a></p>\n\n<p>Option 3: Or for another approach which is not the same as mocking you could try environmental 'sandboxing'.</p>\n\n<p>Instead of storing everything under the same root node you would create a different root node per environment.</p>\n\n<p>For example:</p>\n\n<pre><code>{\nDEV : { data : {'all_your_dev_data_lives_here'}}\nPRODUCTION : { data : {'all_your_production_data_lives_here'} \n}\n</code></pre>\n\n<p>Within your android application you would build a configuration flag that lets you switch between 'DEV' and 'PRODUCTION'. If the flag is 'DEV' it would only ever write to the 'DEV' root node in Firebase and leave PRODUCTION untouched.</p>\n"}], "owner": {"reputation": 1, "user_id": 12446914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40b06455b28b5adf3e2de75680ec1b67?s=128&d=identicon&r=PG&f=1", "display_name": "nela125", "link": "https://stackoverflow.com/users/12446914/nela125"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 155, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574869806, "creation_date": 1574869361, "last_edit_date": 1574869566, "question_id": 59073785, "link": "https://stackoverflow.com/questions/59073785/mock-firebase-android-applicattion", "title": "Mock firebase android applicattion", "body": "<p>I'm new in programming and i have to create a simple application with a database. I'm using Firebase realtime database and I have no idea how to do unit tests.</p>\n\n<p>How can I mock database and push there some fake data to test?</p>\n\n<p>Can you show me an example? </p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 741, "user_id": 8677930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WjJem.jpg?s=128&g=1", "display_name": "Mayokun", "link": "https://stackoverflow.com/users/8677930/mayokun"}, "edited": false, "score": 1, "creation_date": 1574871091, "post_id": 59073433, "comment_id": 104386135, "body": "Can you show what the errors are in the Logcat ?"}, {"owner": {"reputation": 77, "user_id": 12228159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54ddd28dfa401973bd61f5aa754bf4e1?s=128&d=identicon&r=PG&f=1", "display_name": "highrankin", "link": "https://stackoverflow.com/users/12228159/highrankin"}, "reply_to_user": {"reputation": 741, "user_id": 8677930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WjJem.jpg?s=128&g=1", "display_name": "Mayokun", "link": "https://stackoverflow.com/users/8677930/mayokun"}, "edited": false, "score": 0, "creation_date": 1574874955, "post_id": 59073433, "comment_id": 104388162, "body": "I have edited the post to include <code>Logcat</code> errors at the bottom. Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 12228159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54ddd28dfa401973bd61f5aa754bf4e1?s=128&d=identicon&r=PG&f=1", "display_name": "highrankin", "link": "https://stackoverflow.com/users/12228159/highrankin"}, "edited": false, "score": 0, "creation_date": 1574876949, "post_id": 59075832, "comment_id": 104389087, "body": "However it won&#39;t work when trying to stream from a http link and not https. <code>&quot;http:&#47;&#47;s3.voscast.com:9532&quot;</code> is a no go."}], "tags": [], "owner": {"reputation": 77, "user_id": 12228159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54ddd28dfa401973bd61f5aa754bf4e1?s=128&d=identicon&r=PG&f=1", "display_name": "highrankin", "link": "https://stackoverflow.com/users/12228159/highrankin"}, "is_accepted": false, "score": 0, "last_activity_date": 1574876887, "creation_date": 1574876887, "answer_id": 59075832, "question_id": 59073433, "link": "https://stackoverflow.com/questions/59073433/building-a-simple-mediaplayer-with-kotlin-in-android-studio-can-not-get-url-dat/59075832#59075832", "title": "Building a simple MediaPlayer with Kotlin in Android Studio. Can not get URL dataSource to stream", "body": "<p>Ok it seems for some reason it is working as posted on some emulators but not others. Nexus 5: works, Pixel 3a: works, Pixel 2: does not work.</p>\n\n<p>Any ideas why this might be?</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 14224145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25fa7eef35128bc6eb70ec180405a830?s=128&d=identicon&r=PG", "display_name": "Aung Phyo Zaw", "link": "https://stackoverflow.com/users/14224145/aung-phyo-zaw"}, "is_accepted": false, "score": 0, "last_activity_date": 1602942139, "last_edit_date": 1602942139, "creation_date": 1602866041, "answer_id": 64393104, "question_id": 59073433, "link": "https://stackoverflow.com/questions/59073433/building-a-simple-mediaplayer-with-kotlin-in-android-studio-can-not-get-url-dat/64393104#64393104", "title": "Building a simple MediaPlayer with Kotlin in Android Studio. Can not get URL dataSource to stream", "body": "<p>If you want to play the songs from your device , here is the codes , remember play is\na button to trigger the song play. Hope you goodluck</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>     fun getURI(){\n        val path: String =\n            Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_MUSIC)\n                .getAbsolutePath()\n        val directory = File(path)\n        try {\n            val mSongsList: Array&lt;File&gt; = directory.listFiles()\n            val mUri = Uri.fromFile(mSongsList[0])\n            Log.v(&quot;MainActivity&quot;, mUri.toString())\n            mp!!.reset()\n            mp!!.setAudioStreamType(AudioManager.STREAM_MUSIC)\n            mp!!.setDataSource(this, mUri)\n            mp!!.prepare()\n            play!!.setOnClickListener {\n                mp!!.start()\n            }\n\n        } catch (e: IOException) {\n            e.printStackTrace()\n        }\n    }\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 12228159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54ddd28dfa401973bd61f5aa754bf4e1?s=128&d=identicon&r=PG&f=1", "display_name": "highrankin", "link": "https://stackoverflow.com/users/12228159/highrankin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 666, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1602942139, "creation_date": 1574868219, "last_edit_date": 1574874914, "question_id": 59073433, "link": "https://stackoverflow.com/questions/59073433/building-a-simple-mediaplayer-with-kotlin-in-android-studio-can-not-get-url-dat", "title": "Building a simple MediaPlayer with Kotlin in Android Studio. Can not get URL dataSource to stream", "body": "<p>I'm trying to make a simple radio streaming app with Kotlin in Android studio.</p>\n\n<p>This is my code. When i press play on the emulator the app crashes. </p>\n\n<pre><code>package com.example.myapplication\n\nimport android.media.MediaPlayer\nimport androidx.appcompat.app.AppCompatActivity\nimport android.os.Bundle\nimport android.view.View\nimport java.lang.Exception\n\n\n\nclass MainActivity : AppCompatActivity() {\n\n     var mp: MediaPlayer?=null\n\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n    }\n\n\n fun playRadio (view: View) {\n     mp = MediaPlayer()\n\n\n     try {\n         mp!!.setDataSource(\"https://s2.radio.co/sdf9aeb4e9/listen\")\n         mp!!.prepare()\n         mp!!.start()\n\n     } catch (ex:Exception){}\n\n\n}\n\n    fun pauseButton (view: View){\n        try {\n            mp!!.stop()\n\n        } catch (ex:Exception){}\n\n\n    }\n\n\n}\n</code></pre>\n\n<p>Hit a bit of a wall with it. Any help greatly appreciated.</p>\n\n<p>errors in the <code>Logcat</code> are as follows:</p>\n\n<pre><code>2019-11-27 17:13:34.336 21050-21050/com.example.myapplication V/MediaHTTPService: MediaHTTPService(android.media.MediaHTTPService@c7f0ecc): Cookies: null\n2019-11-27 17:13:34.348 21050-21082/com.example.myapplication V/MediaHTTPService: makeHTTPConnection: CookieManager created: java.net.CookieManager@663a515\n2019-11-27 17:13:34.348 21050-21082/com.example.myapplication V/MediaHTTPService: makeHTTPConnection(android.media.MediaHTTPService@c7f0ecc): cookieHandler: java.net.CookieManager@663a515 Cookies: null\n2019-11-27 17:13:34.360 21050-21082/com.example.myapplication D/NetworkSecurityConfig: No Network Security Config specified, using platform default\n2019-11-27 17:14:04.837 21050-21082/com.example.myapplication E/MediaPlayerNative: error (1, -2147483648)\n2019-11-27 17:14:04.841 21050-21050/com.example.myapplication I/Choreographer: Skipped 1830 frames!  The application may be doing too much work on its main thread.\n</code></pre>\n"}, {"tags": ["unit-testing", "gradle", "kotlin", "java-test-fixtures", "kotlin-gradle-plugin"], "owner": {"reputation": 14855, "user_id": 3159253, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/046000bcd9bbb664fc01891f558baa0d?s=128&d=identicon&r=PG&f=1", "display_name": "user3159253", "link": "https://stackoverflow.com/users/3159253/user3159253"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 400, "favorite_count": 1, "answer_count": 0, "score": 5, "last_activity_date": 1574866448, "creation_date": 1574866448, "question_id": 59072889, "link": "https://stackoverflow.com/questions/59072889/how-to-test-kotlin-function-declared-internal-from-within-tests-when-java-test", "title": "How to test kotlin function declared `internal` from within tests when java-test-fixtures module is in use", "body": "<p>I've tried to make use of <a href=\"https://docs.gradle.org/current/userguide/java_testing.html#sec:java_test_fixtures\" rel=\"noreferrer\">test fixtures</a> in my project in kotlin. Unfortunately I have encountered a strange problem, probably a bug, in a component of the toolchain (not sure which one).</p>\n\n<p>Normally a Kotlin function in <code>main</code> declared <code>internal</code> can be accessible from a unit <code>test</code> from the same package. There's a number of proofs supporting this claim, particularly <a href=\"https://stackoverflow.com/questions/35683991/kotlin-make-an-internal-function-visible-for-unit-tests\">Kotlin: Make an internal function visible for unit tests</a></p>\n\n<p>Indeed if we have <a href=\"https://github.com/amorozov/broken-test-fixtures/blob/master/src/main/kotlin/main.kt\" rel=\"noreferrer\">src/main/kotlin/ main.kt</a>:</p>\n\n<pre><code>@file:JvmName(\"Main\")\npackage org.example.broken_test_fixtures\n\ninternal fun sayHello(who: String): String = \"Hello, $who!\"\n\nfun main() {\n    println(sayHello(\"world\"))\n}\n</code></pre>\n\n<p>and <a href=\"https://github.com/amorozov/broken-test-fixtures/blob/master/src/test/kotlin/SayHelloTest.kt\" rel=\"noreferrer\">src/test/kotlin/SayHelloTest.kt</a>:</p>\n\n<pre><code>package org.example.broken_test_fixtures\n\nimport org.junit.jupiter.api.Assertions.assertEquals\nimport org.junit.jupiter.api.Test\n\nclass SayHelloTest {\n    @Test\n    fun testSayHello() {\n        val expected = \"Hello, world!\"\n        val actual = sayHello(\"world\")\n        assertEquals(actual, expected)\n    }\n}\n</code></pre>\n\n<p>the test is passed successfully with a regular <a href=\"https://github.com/amorozov/broken-test-fixtures/blob/5b29b0129b35a4338cc355d6d2faddaf9dee082c/build.gradle.kts\" rel=\"noreferrer\">build.gradle.kts</a>:</p>\n\n<pre><code>plugins {\n    kotlin(\"jvm\") version \"1.3.61\"\n}\n\n\ngroup = \"org.example\"\nversion = \"1.0-SNAPSHOT\"\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation(kotlin(\"stdlib-jdk8\"))\n    testImplementation(\"org.junit.jupiter:junit-jupiter-api:5.5.2\")\n    testRuntimeOnly(\"org.junit.jupiter:junit-jupiter-engine:5.5.2\")\n}\n\ntasks {\n    compileKotlin {\n        kotlinOptions.jvmTarget = \"1.8\"\n    }\n    compileTestKotlin {\n        kotlinOptions.jvmTarget = \"1.8\"\n    }\n}\n\ntasks.withType&lt;Test&gt; {\n    useJUnitPlatform()\n}\n</code></pre>\n\n<p>So far so good.</p>\n\n<p>But with <a href=\"https://github.com/amorozov/broken-test-fixtures/blob/master/build.gradle.kts\" rel=\"noreferrer\">an addition</a> of a single line into the plugins list:</p>\n\n<pre><code>id(\"java-test-fixtures\")\n</code></pre>\n\n<p>the build of the test gets broken with the following error:</p>\n\n<pre><code>e: /home/work/users/alex/broken-test-fixtures/src/test/kotlin/SayHelloTest.kt: (10, 22): Cannot access 'sayHello': it is internal in 'org.example.broken_test_fixtures'\n</code></pre>\n\n<p>I've discovered that similar problems were mentioned in <a href=\"https://github.com/gradle/gradle/issues/11094\" rel=\"noreferrer\">Gradle</a>, <a href=\"https://youtrack.jetbrains.com/issue/KT-20760\" rel=\"noreferrer\">Kotlin Gradle plugin</a> bug trackers. Unfortunately I couldn't extract a solution from those issues. Perhaps, it's a different problem.</p>\n\n<p>For the reader's convenience I have prepared a tiny <a href=\"https://github.com/amorozov/broken-test-fixtures\" rel=\"noreferrer\">repo on Github</a> demonstrating the problem.</p>\n"}, {"tags": ["java", "android", "kotlin", "acra"], "comments": [{"owner": {"reputation": 300, "user_id": 7528285, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212123161171300/picture?type=large", "display_name": "diAz", "link": "https://stackoverflow.com/users/7528285/diaz"}, "edited": false, "score": 0, "creation_date": 1574865511, "post_id": 59072462, "comment_id": 104383008, "body": "where should i save this token ?"}], "answers": [{"comments": [{"owner": {"reputation": 300, "user_id": 7528285, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212123161171300/picture?type=large", "display_name": "diAz", "link": "https://stackoverflow.com/users/7528285/diaz"}, "edited": false, "score": 0, "creation_date": 1574931546, "post_id": 59080648, "comment_id": 104405846, "body": "<code>val value = ACRA.getErrorReporter().getCustomData(&quot;MY_KEY&quot;)</code> always return null in <code>sendHttpRequests</code>"}, {"owner": {"reputation": 300, "user_id": 7528285, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212123161171300/picture?type=large", "display_name": "diAz", "link": "https://stackoverflow.com/users/7528285/diaz"}, "edited": false, "score": 0, "creation_date": 1574933491, "post_id": 59080648, "comment_id": 104406857, "body": "i can&#39;t generate a new one in the ReportSender and i would like to avoid the SharedPreferences."}, {"owner": {"reputation": 7212, "user_id": 4388512, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rrgmo.png?s=128&g=1", "display_name": "F43nd1r", "link": "https://stackoverflow.com/users/4388512/f43nd1r"}, "reply_to_user": {"reputation": 300, "user_id": 7528285, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212123161171300/picture?type=large", "display_name": "diAz", "link": "https://stackoverflow.com/users/7528285/diaz"}, "edited": false, "score": 0, "creation_date": 1574958253, "post_id": 59080648, "comment_id": 104420160, "body": "see updated answer on how to retrieve something from custom data"}], "tags": [], "owner": {"reputation": 7212, "user_id": 4388512, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rrgmo.png?s=128&g=1", "display_name": "F43nd1r", "link": "https://stackoverflow.com/users/4388512/f43nd1r"}, "is_accepted": true, "score": 1, "last_activity_date": 1574958222, "last_edit_date": 1574958222, "creation_date": 1574905339, "answer_id": 59080648, "question_id": 59072462, "link": "https://stackoverflow.com/questions/59072462/acra-how-to-retrieve-a-token-from-a-custom-class-inheriting-from-reportsenderfa/59080648#59080648", "title": "Acra: How to retrieve a token from a custom class inheriting from ReportSenderFactory", "body": "<p>There are a few solutions depending on your requirements:</p>\n\n<ul>\n<li>If you want your token to be part of your report, use <code>ErrorReporter.putCustomData</code>, the retrieve it in <code>ReportSender.send</code> with </li>\n</ul>\n\n<pre><code>((JSONObject)report.get(ReportField.CUSTOM_DATA.name())).optString(\"YOUR_KEY\")\n</code></pre>\n\n<ul>\n<li>If your token is generated without user interaction, just generate it in the <code>ReportSender</code>.</li>\n<li>Otherwise, use any persistent storage like <code>SharedPreferences</code> or plain files.</li>\n</ul>\n\n<hr>\n\n<p><strong>Background info:</strong></p>\n\n<p>Acra runs <code>ReportSender</code>s in a separate process (because a dying process after a crash is not a good place to do network stuff). </p>\n\n<p>This means most in-memory storage can't be used for sharing data between the app and <code>ReportSender</code>s. </p>\n\n<p><code>ErrorReporter.putCustomData</code> works because reports are saved to disk temporarily. </p>\n"}], "owner": {"reputation": 300, "user_id": 7528285, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212123161171300/picture?type=large", "display_name": "diAz", "link": "https://stackoverflow.com/users/7528285/diaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 59080648, "answer_count": 1, "score": 0, "last_activity_date": 1574958222, "creation_date": 1574865097, "question_id": 59072462, "link": "https://stackoverflow.com/questions/59072462/acra-how-to-retrieve-a-token-from-a-custom-class-inheriting-from-reportsenderfa", "title": "Acra: How to retrieve a token from a custom class inheriting from ReportSenderFactory", "body": "<p>I have a token that I generate in one of my activities and that I want to be able to retrieve it from my HttpSender when I do sendHttpRequests.</p>\n\n<p>The problem is that I always end up with a null token... The <code>sendHttpRequests()</code> method is triggered when a crash occurs.</p>\n\n<p>(I'm a beginner on Acra)</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@AcraCore(reportSenderFactoryClasses = [SenderFactory::class])\nclass MyApp : Application() {\n\n    override fun onCreate() {\n        super.onCreate()\n        ACRA.init(this)\n    }\n}\n</code></pre>\n\n<pre class=\"lang-java prettyprint-override\"><code>class SenderFactory : ReportSenderFactory {\n\n    override fun create(context: Context, config: CoreConfiguration): ReportSender = AcraSender(config)\n}\n\n</code></pre>\n\n<pre class=\"lang-java prettyprint-override\"><code>class AcraSender(\n    config: CoreConfiguration,\n    method: Method = POST,\n    type: StringFormat? = null\n) : HttpSender(config, method, type) {\n\n    override fun sendHttpRequests(\n        configuration: CoreConfiguration,\n        context: Context,\n        method: Method,\n        contentType: String,\n        login: String?,\n        password: String?,\n        connectionTimeOut: Int,\n        socketTimeOut: Int,\n        headers: Map&lt;String, String&gt;?,\n        content: String,\n        url: URL,\n        attachments: MutableList&lt;Uri&gt;\n    ) {\n\n        //I want to retrieve my TOKEN here\n    }\n}\n</code></pre>\n"}, {"tags": ["kotlin", "arrow-kt"], "comments": [{"owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "edited": false, "score": 1, "creation_date": 1574886337, "post_id": 59072111, "comment_id": 104392999, "body": "As I understand it, you can&#39;t do that in pure FP, because pure FP doesn&#39;t <i>have</i> side-effects\u2026"}, {"owner": {"reputation": 823, "user_id": 1713450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb4683615320a349adc8ac4f68faace0?s=128&d=identicon&r=PG", "display_name": "user1713450", "link": "https://stackoverflow.com/users/1713450/user1713450"}, "reply_to_user": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "edited": false, "score": 0, "creation_date": 1576010834, "post_id": 59072111, "comment_id": 104757263, "body": "@gidds Functional programming does have side effects. They&#39;re just isolated to a small part of your program so that everything not in that small part can easily be tested. A program with no side effects basically can&#39;t do anything. Outputting to the screen is a side effect. Getting user input is a side effect. Reading from a file is a side effect. Naturally if you can&#39;t display anything or get user input, it&#39;s worthless."}], "answers": [{"comments": [{"owner": {"reputation": 823, "user_id": 1713450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb4683615320a349adc8ac4f68faace0?s=128&d=identicon&r=PG", "display_name": "user1713450", "link": "https://stackoverflow.com/users/1713450/user1713450"}, "edited": false, "score": 0, "creation_date": 1576011020, "post_id": 59115388, "comment_id": 104757343, "body": "Personally I don&#39;t like the convention of &quot;suspend means impure&quot; - there are plenty of things you&#39;d put in a suspend function that is pure. Hashing a large ByteArray, for example, I&#39;d put in a suspend function. Personally, I mark my side effects differently. Reading from a file, for example, belongs in an IO monad. Then you always know if you call a function has side effects because its return type is IO (for example)."}], "tags": [], "owner": {"reputation": 516, "user_id": 11821486, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EDNO6-KVW5Y/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfE1EiIikaAuI945YWrgoo5R3ruAg/photo.jpg?sz=128", "display_name": "El Paco", "link": "https://stackoverflow.com/users/11821486/el-paco"}, "is_accepted": false, "score": 3, "last_activity_date": 1575110822, "creation_date": 1575110822, "answer_id": 59115388, "question_id": 59072111, "link": "https://stackoverflow.com/questions/59072111/functional-programming-short-circuiting/59115388#59115388", "title": "Functional Programming short circuiting", "body": "<p>The best starting point for your case is <a href=\"https://arrow-kt.io/docs/patterns/error_handling/\" rel=\"nofollow noreferrer\">https://arrow-kt.io/docs/patterns/error_handling/</a></p>\n\n<p>If you'd like to do side-effects such as logging, the easiest thing you can do is make all of them <code>suspend</code> functions to mark them as impure. That way your whole program will be a chain of suspend function calls.</p>\n\n<p>You haveto execute that first suspend function in the main, or the beggining of the business logic such as <code>Activity#onCreate</code>, or your <code>Controller</code>. To execute that first suspend function use <code>IO { myBusinessLogic() }.unsafeRunAsync { }</code></p>\n"}], "owner": {"reputation": 1850, "user_id": 423199, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/OrFPh.jpg?s=128&g=1", "display_name": "Hector", "link": "https://stackoverflow.com/users/423199/hector"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575110822, "creation_date": 1574863984, "question_id": 59072111, "link": "https://stackoverflow.com/questions/59072111/functional-programming-short-circuiting", "title": "Functional Programming short circuiting", "body": "<p>I am investigating Functional Programming, namely <code>Arrow-kt</code> with <code>Kotlin</code></p>\n\n<p>my use case is as follows:</p>\n\n<p>I want to perform an <code>Action</code> and return the associated <code>Reaction</code></p>\n\n<p>Both <code>Action</code> and <code>Reaction</code> have associated <code>Side Effects</code></p>\n\n<p>the sequence of events is</p>\n\n<p>1). On accepting the <code>Action</code> immediately tigger the associated <code>Actions Side Effects</code></p>\n\n<p>2). Perform the <code>Action</code> and obtain the <code>Reaction</code></p>\n\n<p>3). Trigger the <code>Reactions Side Effects</code></p>\n\n<p>4). Return the <code>Reaction</code> result.</p>\n\n<p>Additional factors to take into account when the Action is requested to be performed</p>\n\n<p>a). When the Action has never been performed; complete the entire sequence, e.g. steps 1 - 4.</p>\n\n<p>b). When the <code>Action</code> is being performed; short circuit the sequence so that steps 2 - 4 are not completed</p>\n\n<p>c). When the <code>Action</code> has completed; short circuit steps 1 - 3 and return the <code>Reaction</code> result</p>\n\n<p>The Side Effects mentioned above include <code>Logging</code>, <code>Analytics</code>, and <code>User Interface</code> effects.</p>\n\n<p>I've a feeling that my requirement that the <code>Action</code> and <code>Reaction</code> Side Effects are triggered immediately means that a Functional Programming solution is not appropriate for my use case</p>\n\n<p>The <code>Arrow-kt</code> presentations and blogs I have found describe how <code>Either</code> can be used to short circuit sequences based on Error Conditions being raised or using <code>Option</code> with <code>Some</code> and <code>None</code> to achieve the same type of behaviour.</p>\n\n<p>What I am having difficulty with</p>\n\n<p>i). is where to start????</p>\n\n<p>ii). with four steps to complete, how to control/manage \"short circuiting\" so that either steps 1 - 4, just step 1, or just step 4 is completed</p>\n\n<p>Is it possible to achieve the desired behaviour using Functional Programming?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 12866, "user_id": 425183, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/e0c5c530fea29645f2ed15380c66afe8?s=128&d=identicon&r=PG", "display_name": "Ognyan", "link": "https://stackoverflow.com/users/425183/ognyan"}, "reply_to_user": {"reputation": 25736, "user_id": 6395627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dac5493d339ba8cb379f4efb2485d65?s=128&d=identicon&r=PG&f=1", "display_name": "Slaw", "link": "https://stackoverflow.com/users/6395627/slaw"}, "edited": false, "score": 0, "creation_date": 1574864872, "post_id": 59072006, "comment_id": 104382622, "body": "@slaw I am able to use it like <code>var ret = dbc.query...</code> but the problem is that I don&#39;t understand the reason for the error."}, {"owner": {"reputation": 12866, "user_id": 425183, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/e0c5c530fea29645f2ed15380c66afe8?s=128&d=identicon&r=PG", "display_name": "Ognyan", "link": "https://stackoverflow.com/users/425183/ognyan"}, "reply_to_user": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1574865024, "post_id": 59072006, "comment_id": 104382701, "body": "@Tenfour04 it is the built-in kotlin function <code>use</code>"}], "answers": [{"comments": [{"owner": {"reputation": 25736, "user_id": 6395627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dac5493d339ba8cb379f4efb2485d65?s=128&d=identicon&r=PG&f=1", "display_name": "Slaw", "link": "https://stackoverflow.com/users/6395627/slaw"}, "edited": false, "score": 0, "creation_date": 1574864996, "post_id": 59072338, "comment_id": 104382680, "body": "Can <code>lateinit</code> be used with local variables?"}, {"owner": {"reputation": 1307, "user_id": 4681367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83a0416184c6ffe72aac807e2feac5ce?s=128&d=identicon&r=PG&f=1", "display_name": "Lionel Briand", "link": "https://stackoverflow.com/users/4681367/lionel-briand"}, "reply_to_user": {"reputation": 25736, "user_id": 6395627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dac5493d339ba8cb379f4efb2485d65?s=128&d=identicon&r=PG&f=1", "display_name": "Slaw", "link": "https://stackoverflow.com/users/6395627/slaw"}, "edited": false, "score": 1, "creation_date": 1574865451, "post_id": 59072338, "comment_id": 104382971, "body": "I use kotlin 1.3.61 and it works with local variables. I don&#39;t know with previous versions"}, {"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 1, "creation_date": 1574866057, "post_id": 59072338, "comment_id": 104383319, "body": "You can&#39;t use <code>lateinit</code> on primitives."}, {"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1574866257, "post_id": 59072338, "comment_id": 104383444, "body": "They provide <code>Delegates.notNull()</code> to get a similar effect for primitives."}], "tags": [], "owner": {"reputation": 1307, "user_id": 4681367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83a0416184c6ffe72aac807e2feac5ce?s=128&d=identicon&r=PG&f=1", "display_name": "Lionel Briand", "link": "https://stackoverflow.com/users/4681367/lionel-briand"}, "is_accepted": false, "score": 3, "last_activity_date": 1574864747, "creation_date": 1574864747, "answer_id": 59072338, "question_id": 59072006, "link": "https://stackoverflow.com/questions/59072006/why-kotlin-insist-ret-variable-to-be-initialized/59072338#59072338", "title": "Why kotlin insist `ret` variable to be initialized?", "body": "<p>The compiler don't allow unsafe variables like that to be returned. A variable must always be something.</p>\n\n<p>In your case, <code>ret</code> is initialized inside a lambda. The compiler doesn't know if this lambda is executed or not. If not, <code>ret</code> remains in its unsafe state. Throwing a <code>NullPointerException</code> at the end.</p>\n\n<p>If you're sure that this variable is always assigned you can look at <a href=\"https://kotlinlang.org/docs/reference/properties.html#late-initialized-properties-and-variables\" rel=\"nofollow noreferrer\">lateinit variables</a>. You can also put a default value to it <code>var ret = 0</code> and ommit the else statement.</p>\n"}, {"comments": [{"owner": {"reputation": 5335, "user_id": 6920962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e62cd73355fc90d37429f9443df38da?s=128&d=identicon&r=PG&f=1", "display_name": "user28434", "link": "https://stackoverflow.com/users/6920962/user28434"}, "edited": false, "score": 0, "creation_date": 1574867100, "post_id": 59072540, "comment_id": 104383959, "body": "You may tell compiler that you will run it exactly once, using <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.contracts/-contract-builder/calls-in-place.html\" rel=\"nofollow noreferrer\">contracts</a>(currently experimental)."}, {"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "reply_to_user": {"reputation": 5335, "user_id": 6920962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e62cd73355fc90d37429f9443df38da?s=128&d=identicon&r=PG&f=1", "display_name": "user28434", "link": "https://stackoverflow.com/users/6920962/user28434"}, "edited": false, "score": 0, "creation_date": 1574867319, "post_id": 59072540, "comment_id": 104384091, "body": "@user28434 How would you add that to the standard lib function? Wrap it in another function?"}, {"owner": {"reputation": 5335, "user_id": 6920962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e62cd73355fc90d37429f9443df38da?s=128&d=identicon&r=PG&f=1", "display_name": "user28434", "link": "https://stackoverflow.com/users/6920962/user28434"}, "edited": false, "score": 0, "creation_date": 1574867525, "post_id": 59072540, "comment_id": 104384195, "body": "why not? If your new function wrapper would be inlinable you will get no significant overhead."}], "tags": [], "owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "is_accepted": true, "score": 5, "last_activity_date": 1574866640, "last_edit_date": 1574866640, "creation_date": 1574865378, "answer_id": 59072540, "question_id": 59072006, "link": "https://stackoverflow.com/questions/59072006/why-kotlin-insist-ret-variable-to-be-initialized/59072540#59072540", "title": "Why kotlin insist `ret` variable to be initialized?", "body": "<p>The compiler isn't smart enough to know for sure the lambda will be run once, so it can't figure this out for you.</p>\n\n<p>The reason we don't have this problem with many of the standard library higher-order functions is that they utilize contracts, which tell the compiler what they are doing with the lambda that is passed in (such as guaranteeing that the lambda will be called exactly once).</p>\n\n<p>Unfortunately, <code>Closeable.use()</code> doesn't specify a contract (possibly because of it re-throwing exceptions?).</p>\n\n<p>But <code>use</code> does return the result of calling the lambda, so you could do</p>\n\n<pre><code>val ret = dbc.query(...).use { c -&gt;\n    if (c.moveToFirst()) {\n        c.getInt(0)\n    } else {\n        0\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 12866, "user_id": 425183, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/e0c5c530fea29645f2ed15380c66afe8?s=128&d=identicon&r=PG", "display_name": "Ognyan", "link": "https://stackoverflow.com/users/425183/ognyan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 1, "accepted_answer_id": 59072540, "answer_count": 2, "score": 1, "last_activity_date": 1574866640, "creation_date": 1574863645, "question_id": 59072006, "link": "https://stackoverflow.com/questions/59072006/why-kotlin-insist-ret-variable-to-be-initialized", "title": "Why kotlin insist `ret` variable to be initialized?", "body": "<p>I have the following function:</p>\n\n<pre><code>override fun countForTicket(dbc: SQLiteDatabase, ticketId: Long): Int {\n    var ret: Int\n\n    dbc.query(\n        TABLE_SECOND_CHANCE_PRIZES, arrayOf(\"count(id)\"),\n        \"ticket = ?\", arrayOf(ticketId.toString()),\n        null, null, null\n    ).use { c -&gt;\n        ret = if (c.moveToFirst()) {\n            c.getInt(0)\n        } else {\n            0\n        }\n    }\n\n\n    return ret\n}\n</code></pre>\n\n<p>The problem is that in line <code>return ret</code> <code>ret</code> is underlined with red and when trying to compile it gives me error:</p>\n\n<blockquote>\n  <p>Variable 'ret' must be initialized</p>\n</blockquote>\n\n<p>From my point of view it seems that <code>ret</code> is always initialized. What am I missing?\nIs it because the initialization is happening in a lambda and the compiler cannot guarantee that the variable is initialized?</p>\n"}, {"tags": ["generics", "kotlin", "reflection"], "comments": [{"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1574862026, "post_id": 59071497, "comment_id": 104380893, "body": "what did you try so far? where is your code?"}, {"owner": {"reputation": 71, "user_id": 7265094, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/672c67907070838d70f4034482f74236?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Evans", "link": "https://stackoverflow.com/users/7265094/joel-evans"}, "edited": false, "score": 0, "creation_date": 1574862436, "post_id": 59071497, "comment_id": 104381111, "body": "even though I explained what I&#39;ve already tried, and that it didn&#39;t work, I&#39;ve added my example code to the original post."}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1574863443, "post_id": 59071497, "comment_id": 104381717, "body": "why do you access it via reflection? You need to pass an array of the same type to that method... if you have no access to the type (I assume that is your problem otherwise I see no reason for reflection), you can use something like: <code>listOf(enumInstance).toTypedArray()</code> to get the array you require..."}, {"owner": {"reputation": 71, "user_id": 7265094, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/672c67907070838d70f4034482f74236?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Evans", "link": "https://stackoverflow.com/users/7265094/joel-evans"}, "edited": false, "score": 0, "creation_date": 1574887509, "post_id": 59071497, "comment_id": 104393437, "body": "I have to access it via reflection so my app is compatible with several versions of an API (Bukkit)"}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 7265094, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/672c67907070838d70f4034482f74236?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Evans", "link": "https://stackoverflow.com/users/7265094/joel-evans"}, "edited": false, "score": 0, "creation_date": 1574890618, "post_id": 59074997, "comment_id": 104394629, "body": "That worked! Thanks a lot. Can you possibly fix the link to the documentation?"}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "reply_to_user": {"reputation": 71, "user_id": 7265094, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/672c67907070838d70f4034482f74236?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Evans", "link": "https://stackoverflow.com/users/7265094/joel-evans"}, "edited": false, "score": 0, "creation_date": 1574893486, "post_id": 59074997, "comment_id": 104395573, "body": "@JoelEvans Fixed, no idea what happened there."}], "tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": true, "score": 1, "last_activity_date": 1574893470, "last_edit_date": 1574893470, "creation_date": 1574873510, "answer_id": 59074997, "question_id": 59071497, "link": "https://stackoverflow.com/questions/59071497/passing-unknown-enum-type-to-method-with-vararg-enum-parameter/59074997#59074997", "title": "Passing unknown enum type to method with vararg enum parameter", "body": "<p>I think this should work:</p>\n\n<pre><code>val arr = java.lang.reflect.Array.newInstance(enumClass, 1)\njava.lang.reflect.Array.set(arr, 0, enumInstance)\naddItemFlagsMethod!!.invoke(itemMeta, arr)\n</code></pre>\n\n<p>See <a href=\"https://docs.oracle.com/javase/10/docs/api/java/lang/reflect/Array.html\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n"}], "owner": {"reputation": 71, "user_id": 7265094, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/672c67907070838d70f4034482f74236?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Evans", "link": "https://stackoverflow.com/users/7265094/joel-evans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 59074997, "answer_count": 1, "score": -1, "last_activity_date": 1574893470, "creation_date": 1574861854, "last_edit_date": 1574887606, "question_id": 59071497, "link": "https://stackoverflow.com/questions/59071497/passing-unknown-enum-type-to-method-with-vararg-enum-parameter", "title": "Passing unknown enum type to method with vararg enum parameter", "body": "<p>I have a method that I found through reflection that takes in a <code>vararg itemFlags: ItemFlag</code> parameter. I have the enum type, <code>ItemFlag</code>, which I also found through reflection. How do I go about invoking the method with a typed array of <code>ItemFlag</code> if the type is unknown? I've tried creating an <code>Array&lt;Any&gt;</code> with the enum instances and passing that as the argument but it throws <code>IllegalArgumentException</code> with a message of <code>argument type mismatch</code>.</p>\n\n<p>My code (trimmed for example):</p>\n\n<pre><code>val itemStack = ...\nval itemMeta = ...\n\nval enumClass = Class.forName(\"org.bukkit.inventory.ItemFlag\")\nval enumInstance = (enumClass!!.enumConstants as Array&lt;Enum&lt;*&gt;&gt;).first { it.name == \"HIDE_ENCHANTS\" }\nval addItemFlagsMethod = ItemMeta::class.java.declaredMethods.first { method -&gt; method.name == \"addItemFlags\" }\n\n// addItemFlags only parameter is vararg flags: ItemFlag\naddItemFlagsMethod!!.invoke(itemMeta, arrayOf(enumInstance))\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-room"], "answers": [{"tags": [], "owner": {"reputation": 895, "user_id": 8493280, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-QD20ZOFuHKM/AAAAAAAAAAI/AAAAAAAAAD8/HAHAJe7ON64/photo.jpg?sz=128", "display_name": "Yang Liu", "link": "https://stackoverflow.com/users/8493280/yang-liu"}, "is_accepted": false, "score": 2, "last_activity_date": 1574865686, "last_edit_date": 1574865686, "creation_date": 1574861790, "answer_id": 59071476, "question_id": 59071356, "link": "https://stackoverflow.com/questions/59071356/how-to-create-a-generic-adapter-in-kotlin/59071476#59071476", "title": "How to create a generic Adapter in Kotlin?", "body": "<p>Some idea for your reference by using  <code>Interface</code>:</p>\n\n<pre><code>interface Article {\n    getWikiPage(): WikiPage\n}\n\nclass FavoriteArticle : Article {\n    getWikiPage() = wikiPage\n}\n\nclass HistoryArticle: Article {\n    getWikiPage() = wikiPage\n}\n\n// Adapter\nclass Adapter&lt;Article&gt;\n...\noverride fun onBindViewHolder(holder: Holder, position: Int) {\n    val page = currentResult[position].getWikiPage()\n    holder.updateWithPage(page)\n}\n...\n\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 6023578, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2202fbe24ebf5780f9d6ccd4f671663c?s=128&d=identicon&r=PG&f=1", "display_name": "Netheru", "link": "https://stackoverflow.com/users/6023578/netheru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 350, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1574865686, "creation_date": 1574861390, "question_id": 59071356, "link": "https://stackoverflow.com/questions/59071356/how-to-create-a-generic-adapter-in-kotlin", "title": "How to create a generic Adapter in Kotlin?", "body": "<p>I have 3 similars adapters and I want to combine them in 1. The only thing that is different is the ArrayList type. I have 2 room entities for room, FavoriteArticle, and HistoryArticle, but they have the same fields as WikiPage.</p>\n\n<pre><code>class Adapter&lt;T&gt; (@LayoutRes private val layoutRes: Int) : RecyclerView.Adapter&lt;Holder&gt;() {\n\nval currentResult: ArrayList&lt;T&gt; = ArrayList()\n\noverride fun getItemCount() = currentResult.size\n\noverride fun onCreateViewHolder(parent: ViewGroup, viewType: Int): Holder {\n    val cardItem = LayoutInflater.from(parent.context).inflate(layoutRes, parent, false)\n    return Holder(cardItem)\n}\n\noverride fun onBindViewHolder(holder: Holder, position: Int) {\n    val page = currentResult[position]\n    holder.updateWithPage(page)\n}\n\nfun add(wiki: ArrayList&lt;T&gt;?) { {\n     currentResult.clear()\n     if (wiki != null) {\n         currentResult.addAll(wiki)\n     }\n }\n</code></pre>\n\n<p>}</p>\n\n<p>Holder class:</p>\n\n<pre><code>class Holder(itemView: View) : RecyclerView.ViewHolder(itemView) {\n\nprivate val articleImageView: ImageView = itemView.findViewById(R.id.articleCardItemImage)\nprivate val titleTextView: TextView = itemView.findViewById(R.id.articleCardItemTitle)\nprivate lateinit var currentPage: WikiPage\n\ninit {\n    itemView.setOnClickListener {\n        itemView.context.startActivity(ArticleDetailActivity.createStartIntent(itemView.context, currentPage))\n    }\n}\n\nfun updateWithPage(page: WikiPage) {\n    currentPage = page\n    titleTextView.text = page.title\n        Picasso.get().load(page.thumbnail.source).into(articleImageView)\n}\n</code></pre>\n\n<p>}</p>\n\n<p>I can't figure out how to modify my updateWithPage function from onBindViewHolder using generics. How can I do this?</p>\n"}, {"tags": ["java", "android", "string", "kotlin", "expression"], "comments": [{"owner": {"reputation": 2756, "user_id": 2235972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZDR82.png?s=128&g=1", "display_name": "denvercoder9", "link": "https://stackoverflow.com/users/2235972/denvercoder9"}, "edited": false, "score": 0, "creation_date": 1574876743, "post_id": 59070919, "comment_id": 104388985, "body": "the string will contain ONLY <code>true</code>, <code>false</code>, <code>&amp;&amp;</code>, <code>||</code>, <code>!</code> and <code>()</code>? If yes, then you could write a simple program with stack to solve this. It&#39;s similar to &quot;balance parentheses&quot; problem."}, {"owner": {"reputation": 214, "user_id": 4865235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f2cf7cc5b212c6f338f54ee1a9071a8?s=128&d=identicon&r=PG&f=1", "display_name": "Pragya Singla", "link": "https://stackoverflow.com/users/4865235/pragya-singla"}, "reply_to_user": {"reputation": 2756, "user_id": 2235972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZDR82.png?s=128&g=1", "display_name": "denvercoder9", "link": "https://stackoverflow.com/users/2235972/denvercoder9"}, "edited": false, "score": 0, "creation_date": 1574881345, "post_id": 59070919, "comment_id": 104390971, "body": "Thanks for your answer. yes it will only contain true, false, &amp;&amp;, ||, ! and ()."}], "answers": [{"tags": [], "owner": {"reputation": 299, "user_id": 8391757, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/q5rjR.jpg?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/8391757/michael"}, "is_accepted": false, "score": 0, "last_activity_date": 1600185688, "creation_date": 1600185688, "answer_id": 63905720, "question_id": 59070919, "link": "https://stackoverflow.com/questions/59070919/evaluate-string-expression-in-kotlin-without-using-script-engine/63905720#63905720", "title": "Evaluate string expression in kotlin without using script engine", "body": "<p>I know my answer will not help you in your case where your string expression contain true, false, &amp;&amp;, ||, ! and (). BUT for those who wants to evaluate mathematical expressions I found <a href=\"https://github.com/RotBolt/KParser\" rel=\"nofollow noreferrer\">this library</a> that handles almost all mathematical operators.</p>\n<p>Add it to your project and use it this way</p>\n<pre><code>    // In root build.gradle\n    repositories {\n    maven {\n        url  &quot;https://dl.bintray.com/kaendagger/KParser&quot;\n          }\n    } \n\n    //Add in the dependencies\n    dependencies{\n     implementation 'io.kaen.dagger:KParser-jvm:0.1.1'\n    }\n</code></pre>\n<p>And then in your code you can do something like this</p>\n<pre><code>val parser = ExpressionParser()\nval result = parser.evaluate(&quot;5+1+cos(PI)-2*2/4&quot;)\nprintln(result)\n</code></pre>\n"}], "owner": {"reputation": 214, "user_id": 4865235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f2cf7cc5b212c6f338f54ee1a9071a8?s=128&d=identicon&r=PG&f=1", "display_name": "Pragya Singla", "link": "https://stackoverflow.com/users/4865235/pragya-singla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 231, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1600185688, "creation_date": 1574859915, "last_edit_date": 1574876306, "question_id": 59070919, "link": "https://stackoverflow.com/questions/59070919/evaluate-string-expression-in-kotlin-without-using-script-engine", "title": "Evaluate string expression in kotlin without using script engine", "body": "<p>I want to evaluate the string expression without using script engine:</p>\n\n<p>string expression can be like:</p>\n\n<blockquote>\n  <p>\"((true&amp;&amp;(!false)||true)&amp;&amp;true)&amp;&amp;true\" </p>\n</blockquote>\n\n<p>Anybody have any idea how this can be done in android using kotlin</p>\n\n<p>Thanks</p>\n"}, {"tags": ["android", "kotlin", "android-canvas", "android-paint"], "owner": {"reputation": 11, "user_id": 12445652, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-t5QNym2wsX8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd09JMy_DyHQRpuyM1iT9TXVNoOTg/photo.jpg?sz=128", "display_name": "Sercan I\u015f\u0131k", "link": "https://stackoverflow.com/users/12445652/sercan-i%c5%9f%c4%b1k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1574859737, "creation_date": 1574859334, "last_edit_date": 1574859737, "question_id": 59070754, "link": "https://stackoverflow.com/questions/59070754/how-android-zoom-works-properly", "title": "How Android Zoom works properly?", "body": "<p>Circle 1 in the image shows the correct location.But when I draw the same circle in the second circle area, there is a different background. I have trouble solving the problem.Can you help me ?</p>\n\n<p><img src=\"https://i.stack.imgur.com/jExe3.jpg\" alt=\"encountered error image\"></p>\n\n<pre><code>if (zooming) {\n  zMatrix!!.reset()\n  zMatrix!!.postScale(2 f, 2 f, zoomPos!!.x, zoomPos!!.y)\n  zPaint!!.shader.setLocalMatrix(zMatrix)\n  val src = RectF(zoomPos!!.x - 50, zoomPos!!.y - 50, zoomPos!!.x + 50, zoomPos!!.y + 50)\n  val dst = RectF(0 f, 0 f, 100 f, 100 f)\n  zMatrix!!.setRectToRect(src, dst, Matrix.ScaleToFit.CENTER)\n  zMatrix!!.postScale(2 f, 2 f)\n  zPaint!!.shader.setLocalMatrix(zMatrix)\n  zPaint!!.color = Color.BLACK\n  canvas ? .drawCircle(100 f, 100 f, 100 f, zPaint) // 1 Circle\n  canvas ? .drawCircle(zoomPos!!.x, zoomPos!!.y, 100 f, zPaint) // 2 Circle\n}\n</code></pre>\n"}, {"tags": ["kotlin", "retrofit2", "rx-java2", "okhttp"], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 5778387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ccea44afe18af1bc8234f35c9f724f1?s=128&d=identicon&r=PG&f=1", "display_name": "K. Donon", "link": "https://stackoverflow.com/users/5778387/k-donon"}, "edited": false, "score": 0, "creation_date": 1574863995, "post_id": 59071870, "comment_id": 104382069, "body": "Thanks for the advise. I&#39;ve already seen this tuto. In my case <i>photo_url1</i> are image File on the device. and i should use MultipartBody.Part for that. in  the object cars are arraylist but in many tuto the use only single object with one image"}], "tags": [], "owner": {"reputation": 250, "user_id": 9876410, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Aqua Freshka", "link": "https://stackoverflow.com/users/9876410/aqua-freshka"}, "is_accepted": false, "score": 0, "last_activity_date": 1574863159, "creation_date": 1574863159, "answer_id": 59071870, "question_id": 59070505, "link": "https://stackoverflow.com/questions/59070505/how-to-use-retrofit-2-to-send-object-with-list-of-another-object-with-image/59071870#59071870", "title": "How to use Retrofit 2 to send object with list of another object with image", "body": "<p>I adivise you to either send data as a class following this methode : <a href=\"https://futurestud.io/tutorials/retrofit-send-objects-in-request-body\" rel=\"nofollow noreferrer\">https://futurestud.io/tutorials/retrofit-send-objects-in-request-body</a></p>\n\n<p>Or you can create your json and send it like this : <a href=\"https://stackoverflow.com/questions/21398598/how-to-post-raw-whole-json-in-the-body-of-a-retrofit-request\">How to POST raw whole JSON in the body of a Retrofit request?</a></p>\n"}, {"tags": [], "owner": {"reputation": 29, "user_id": 5778387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ccea44afe18af1bc8234f35c9f724f1?s=128&d=identicon&r=PG&f=1", "display_name": "K. Donon", "link": "https://stackoverflow.com/users/5778387/k-donon"}, "is_accepted": false, "score": 0, "last_activity_date": 1574881470, "last_edit_date": 1574881470, "creation_date": 1574880112, "answer_id": 59076642, "question_id": 59070505, "link": "https://stackoverflow.com/questions/59070505/how-to-use-retrofit-2-to-send-object-with-list-of-another-object-with-image/59076642#59076642", "title": "How to use Retrofit 2 to send object with list of another object with image", "body": "<p>After long search i got a way to solve my problem. Perhaps that can help somebody.</p>\n\n<pre><code> @Multipart\n @POST(\"declaration\")\n fun addDeclaration(@Part carsImage: MutableList&lt;MultipartBody.Part&gt;, @PartMap \n declaration: HashMap&lt;String?, RequestBody?&gt;?): Observable&lt;Response&gt;\n\n\n\nval declarationInfo: HashMap&lt;String?, RequestBody?&gt;? = HashMap()\n                declarationInfo[\"transport\"] = createPartFromString(\"\" + declarationVente.transport)\n                task[\"fraisTransport\"] = createPartFromString(\"\" +declarationVente.fraisTransport)\n\n\n\nval body: MutableList&lt;MultipartBody.Part&gt; = mutableListOf()\nval listA: List&lt;Cars&gt; = mutableListOf&lt;Cars&gt;().apply {\n                    for (aD in 0 until  it.size) {\n               declarationInfo[\"cars[$aD][id]\"] = createPartFromString(it[aD].animalId.toString())\n                        declarationInfo[\"cars[$aD][prix]\"] = createPartFromString(it[aD].prixDeclaration.toString())\n\n                        val photoFile1 = File(it[aD].photo1)\n                        val reqFile = photoFile1.asRequestBody(\"image/*\".toMediaTypeOrNull())\n                        val imageFile1 = MultipartBody.Part.createFormData(\"cars[$aD][uploadFile1]\", photoFile1.name, reqFile)\n\n                        body.add(imageFile1)\n                     }\n                }\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 5778387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ccea44afe18af1bc8234f35c9f724f1?s=128&d=identicon&r=PG&f=1", "display_name": "K. Donon", "link": "https://stackoverflow.com/users/5778387/k-donon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 578, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1574881470, "creation_date": 1574858517, "question_id": 59070505, "link": "https://stackoverflow.com/questions/59070505/how-to-use-retrofit-2-to-send-object-with-list-of-another-object-with-image", "title": "How to use Retrofit 2 to send object with list of another object with image", "body": "<p>I need somebody help for this case:\nHere the format of my object :</p>\n\n<pre><code>{\n \"transport\": true,\n \"fraisTransport\": \"string\"\n \"cars\": [\n    {\n      \"id\": \"string\",\n      \"prix\": \"string\",\n      \"photo_url1\" : \"string\",\n      \"photo_url2\" : \"string\"\n    },\n    {\n      \"id\": \"string\",\n      \"prix\": \"string\",\n      \"photo_url1\" : \"string\",\n      \"photo_url2\" : \"string\"\n    }\n  ]\n}\n</code></pre>\n\n<p>Here is my Api interface</p>\n\n<pre><code>@Multipart\n@POST(\"declaration\")\nfun addDeclaration( @Part carsImage: Array&lt;MultipartBody.Part&gt; ,\n                    @Part propertyCars: MultipartBody.Part,\n                    @Part dataDeclaration:  RequestBody): Observable&lt;Response&gt;\n</code></pre>\n\n<p>here how i set the variable for <em>dataDEclaration</em></p>\n\n<pre><code>   val jsonObject = JSONObject()\n       jsonObject.put(\"transport\", declaration.transport)\n       jsonObject.put(\"frais_transport\", declaration.fraisTransport)\n       val bodyDeclarationInfo = jsonObject.toString().toRequestBody(\"application/json; charset=utf-8\".toMediaTypeOrNull())\n</code></pre>\n\n<p><strong>Now my problem is how to set the variable for <em>cars objects</em>. Please any suggestions will welcome. Thanks</strong></p>\n"}, {"tags": ["android", "kotlin", "java.util.scanner", "ibeacon"], "comments": [{"owner": {"reputation": 657, "user_id": 5182150, "user_type": "registered", "profile_image": "https://graph.facebook.com/892258294180976/picture?type=large", "display_name": "Jude Osbert K", "link": "https://stackoverflow.com/users/5182150/jude-osbert-k"}, "edited": false, "score": 1, "creation_date": 1574857766, "post_id": 59070206, "comment_id": 104378475, "body": "can you post the snippet where you access this code section? Seems like you are not calling init before getIbeacon(). What you could do is to add a call to init inside the null check instead of throwing the error"}, {"owner": {"reputation": 114, "user_id": 6026476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vZyvw.jpg?s=128&g=1", "display_name": "Gustavo Ara&#250;jo", "link": "https://stackoverflow.com/users/6026476/gustavo-ara%c3%bajo"}, "edited": false, "score": 0, "creation_date": 1574857934, "post_id": 59070206, "comment_id": 104378577, "body": "This instance that you declare is in a companion object scope? Usually this context message that you got is only a warning because keeping a context statically may produce memory leak and bad behaviors in the app. The value being null, did you check if you really are setting any value in it? You&#39;re declaration define instance as null, therefore if you never change it..."}, {"owner": {"reputation": 183, "user_id": 7978415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58498c7f2ffd60d880dce0d79bc287e6?s=128&d=identicon&r=PG&f=1", "display_name": "rengineer", "link": "https://stackoverflow.com/users/7978415/rengineer"}, "edited": false, "score": 0, "creation_date": 1574858314, "post_id": 59070206, "comment_id": 104378819, "body": "Thanks-I added in the code section where it is accessed in the above"}, {"owner": {"reputation": 657, "user_id": 5182150, "user_type": "registered", "profile_image": "https://graph.facebook.com/892258294180976/picture?type=large", "display_name": "Jude Osbert K", "link": "https://stackoverflow.com/users/5182150/jude-osbert-k"}, "edited": false, "score": 0, "creation_date": 1575288450, "post_id": 59070206, "comment_id": 104504049, "body": "The second code you attached you are never calling init() and that was why the error was coming."}], "answers": [{"comments": [{"owner": {"reputation": 183, "user_id": 7978415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58498c7f2ffd60d880dce0d79bc287e6?s=128&d=identicon&r=PG&f=1", "display_name": "rengineer", "link": "https://stackoverflow.com/users/7978415/rengineer"}, "edited": false, "score": 0, "creation_date": 1574858561, "post_id": 59070400, "comment_id": 104378941, "body": "thank you-I inputted this in but the init(context) doesn&#39;t seem to compile-what you put makes sense but not sure why it isnt working"}, {"owner": {"reputation": 657, "user_id": 5182150, "user_type": "registered", "profile_image": "https://graph.facebook.com/892258294180976/picture?type=large", "display_name": "Jude Osbert K", "link": "https://stackoverflow.com/users/5182150/jude-osbert-k"}, "reply_to_user": {"reputation": 183, "user_id": 7978415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58498c7f2ffd60d880dce0d79bc287e6?s=128&d=identicon&r=PG&f=1", "display_name": "rengineer", "link": "https://stackoverflow.com/users/7978415/rengineer"}, "edited": false, "score": 0, "creation_date": 1580637443, "post_id": 59070400, "comment_id": 106156529, "body": "@rengineer Sorry. Were you able to figure it out?"}, {"owner": {"reputation": 183, "user_id": 7978415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58498c7f2ffd60d880dce0d79bc287e6?s=128&d=identicon&r=PG&f=1", "display_name": "rengineer", "link": "https://stackoverflow.com/users/7978415/rengineer"}, "edited": false, "score": 0, "creation_date": 1580769183, "post_id": 59070400, "comment_id": 106199592, "body": "yes I was able to figure out out-this worked. thank you"}], "tags": [], "owner": {"reputation": 657, "user_id": 5182150, "user_type": "registered", "profile_image": "https://graph.facebook.com/892258294180976/picture?type=large", "display_name": "Jude Osbert K", "link": "https://stackoverflow.com/users/5182150/jude-osbert-k"}, "is_accepted": true, "score": 1, "last_activity_date": 1574858139, "creation_date": 1574858139, "answer_id": 59070400, "question_id": 59070206, "link": "https://stackoverflow.com/questions/59070206/assigned-variable-in-kotlin-doesnt-resolve-correctly/59070400#59070400", "title": "Assigned Variable in Kotlin Doesn&#39;t Resolve Correctly", "body": "<pre><code>    companion object {\n\n        var instance: IbeaconTooth? = null\n\n        fun init(context: Context) {\n            if (instance == null) {\n                synchronized(IbeaconTooth::class.java) {\n                    if (instance == null) {\n                        instance = IbeaconTooth(context)\n                    }\n                }\n            }\n        }\n\n        fun getIbeacon(context:Context): IbeaconTooth {\n            if (instance == null) {\n                instance = init(context)\n            }\n            return instance as IbeaconTooth\n        }\n\n    }\n</code></pre>\n\n<p>This will eliminate the overhead of calling init before get. </p>\n"}], "owner": {"reputation": 183, "user_id": 7978415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58498c7f2ffd60d880dce0d79bc287e6?s=128&d=identicon&r=PG&f=1", "display_name": "rengineer", "link": "https://stackoverflow.com/users/7978415/rengineer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 59070400, "answer_count": 1, "score": 0, "last_activity_date": 1574858211, "creation_date": 1574857546, "last_edit_date": 1574858211, "question_id": 59070206, "link": "https://stackoverflow.com/questions/59070206/assigned-variable-in-kotlin-doesnt-resolve-correctly", "title": "Assigned Variable in Kotlin Doesn&#39;t Resolve Correctly", "body": "<p>I have an issue where <code>var instance: IbeaconTooth? = null</code> is highlighted with \"Do not place Android context classes in static fields\". I tried everything I can think of to resolve this issue but nothing seems to work. Whenever I run the app, the error I receive is \"ibeantooth is null , please use init() method\". Any assistance is appreciated.</p>\n\n<p>IbeaconTooth.kt</p>\n\n<pre><code>class IbeaconTooth constructor(mContext: Context) {\n\n        private val cxt: Context = mContext\n        private val manager: BluetoothManager = cxt.getSystemService(Context.BLUETOOTH_SERVICE) as BluetoothManager\n        private val adapter: BluetoothAdapter = manager.adapter\n        private var scanner: BluetoothLeScanner? = null\n        private var isScan: Boolean = false\n        private val TAG = \"beacon\"\n        // scan callback\n        private var bleCallback: BeaconBleCallback? = null\n        private var leCallback: BeaconLeCallback? = null\n\n        init {\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {\n                scanner = adapter.bluetoothLeScanner\n            }\n        }\n\n        companion object {\n\n            var instance: IbeaconTooth? = null\n\n            fun init(context: Context) {\n                if (instance == null) {\n                    synchronized(IbeaconTooth::class.java) {\n                        if (instance == null) {\n                            instance = IbeaconTooth(context)\n                        }\n                    }\n                }\n            }\n\n            fun getIbeacon(): IbeaconTooth {\n                if (instance == null) {\n                    throw IllegalArgumentException(\"ibeantooth is null , please use init() method\")\n                }\n                return instance as IbeaconTooth\n            }\n\n        }\n\n        fun startBeacon(onBeaconScanListener: OnBeaconScanListener) {\n            if (isScan) {\n                Log.d(TAG, \"already start scan\")\n                onBeaconScanListener.onScanErrorMsg(\"start scan already\")\n            } else {\n                if (scanner == null) {\n                    bleCallback = BeaconBleCallback(onBeaconScanListener)\n                    adapter.startLeScan(bleCallback)\n                } else {\n                    // android 5.0\n                    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {\n                        leCallback = BeaconLeCallback(onBeaconScanListener)\n                        scanner?.startScan(leCallback)\n                    }\n                }\n            }\n        }\n\n        fun stopBeacon() {\n            if (isScan) {\n                // stop scan\n                if (scanner == null) {\n                    if (bleCallback != null) {\n                        adapter.stopLeScan(bleCallback)\n                    }\n                } else {\n                    if (leCallback != null) {\n                        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {\n                            scanner?.stopScan(leCallback)\n                        }\n                    }\n                }\n            } else {\n                Log.d(TAG, \"already stop scan\")\n            }\n        }\n    }\n</code></pre>\n\n<p>ActivateBeacon.kt</p>\n\n<pre><code>class ActivateBeacon : AppCompatActivity(), OnBeaconScanListener {\n    private lateinit var rippleView: RippleView\n\n    override fun OnScanResult(beacon: Beacon) {\n        Log.v(\"beacon\", \"result &gt; $beacon\")\n        rippleView.newRipple()\n\n    }\n\n    override fun onScanErrorMsg(msg: String) {\n        Toast.makeText(this, msg, Toast.LENGTH_SHORT).show()\n    }\n\n    override fun getScanFilter(): BeaconFilter = BeaconFilter()\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_ibeacon)\n        rippleView = findViewById(R.id.circle_ripple)\n        rippleView.newRipple()\n    }\n    override fun onResume() {\n        super.onResume()\n        IbeaconTooth.getIbeacon().startBeacon(this)\n\n    }\n\n    override fun onDestroy() {\n        super.onDestroy()\n        IbeaconTooth.getIbeacon().stopBeacon()\n    }\n\n    override fun onBackPressed() {\n        finish()\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 2756, "user_id": 2235972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZDR82.png?s=128&g=1", "display_name": "denvercoder9", "link": "https://stackoverflow.com/users/2235972/denvercoder9"}, "edited": false, "score": 0, "creation_date": 1574857659, "post_id": 59070176, "comment_id": 104378424, "body": "what&#39;s the package name for <code>VouchersResponse</code>?"}, {"owner": {"reputation": 37128, "user_id": 1083093, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/3AgYu.jpg?s=128&g=1", "display_name": "Devrath", "link": "https://stackoverflow.com/users/1083093/devrath"}, "reply_to_user": {"reputation": 2756, "user_id": 2235972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZDR82.png?s=128&g=1", "display_name": "denvercoder9", "link": "https://stackoverflow.com/users/2235972/denvercoder9"}, "edited": false, "score": 0, "creation_date": 1574857993, "post_id": 59070176, "comment_id": 104378600, "body": "@sonnet .... <code>package com.spurtree.demo.models.ResponseObjects</code>  .... that was the issue ... after adding package import it resolved ... Post it as answer ... i will accept"}], "answers": [{"tags": [], "owner": {"reputation": 2756, "user_id": 2235972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZDR82.png?s=128&g=1", "display_name": "denvercoder9", "link": "https://stackoverflow.com/users/2235972/denvercoder9"}, "is_accepted": true, "score": 1, "last_activity_date": 1574862785, "creation_date": 1574862785, "answer_id": 59071764, "question_id": 59070176, "link": "https://stackoverflow.com/questions/59070176/how-to-import-a-kotlin-data-class-in-java-class/59071764#59071764", "title": "How to import a kotlin data class in Java class", "body": "<p>Import the class using the package name:</p>\n\n<pre><code>import com.my.package.MyClass\n</code></pre>\n"}], "owner": {"reputation": 37128, "user_id": 1083093, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/3AgYu.jpg?s=128&g=1", "display_name": "Devrath", "link": "https://stackoverflow.com/users/1083093/devrath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 450, "favorite_count": 0, "accepted_answer_id": 59071764, "answer_count": 1, "score": 3, "last_activity_date": 1574862785, "creation_date": 1574857432, "question_id": 59070176, "link": "https://stackoverflow.com/questions/59070176/how-to-import-a-kotlin-data-class-in-java-class", "title": "How to import a kotlin data class in Java class", "body": "<p>I have a kotlin class <strong>VouchersResponse.kt</strong></p>\n\n<pre><code>import com.google.gson.annotations.SerializedName\n    data class VouchersResponse (\n        @SerializedName(\"genotp\") val genotp : Genotp,\n        @SerializedName(\"exp\") val exp : Exp,\n        @SerializedName(\"otpvalidate\") val otpvalidate : Otpvalidate,\n        @SerializedName(\"status\") val status : Status\n    )\n</code></pre>\n\n<p>In java class I am not able to import <code>VouchersResponse</code></p>\n\n<pre><code>public class HomePageBannerRepository {\n    private Observable&lt;VouchersResponse&gt; movieDBResponseObservable;\n}\n</code></pre>\n\n<p><strong>What I am able to do:</strong> I am able to import  kotlin data class in another kotlin class</p>\n\n<p><strong>Question</strong>: How to import a <code>kotlin</code> data class in java class</p>\n"}, {"tags": ["gradle", "kotlin", "gradle-kotlin-dsl", "detekt"], "answers": [{"comments": [{"owner": {"reputation": 14274, "user_id": 2621917, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2ecd16dbe555b9596651e94668f71466?s=128&d=identicon&r=PG", "display_name": "Michael Piefel", "link": "https://stackoverflow.com/users/2621917/michael-piefel"}, "edited": false, "score": 1, "creation_date": 1574934077, "post_id": 59080711, "comment_id": 104407197, "body": "For reference: For the Kotlin DSL, it\u2019s <code>tasks.getByPath(&quot;detekt&quot;).onlyIf { project.hasProperty(&quot;runDetekt&quot;) }</code>."}, {"owner": {"reputation": 14274, "user_id": 2621917, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2ecd16dbe555b9596651e94668f71466?s=128&d=identicon&r=PG", "display_name": "Michael Piefel", "link": "https://stackoverflow.com/users/2621917/michael-piefel"}, "edited": false, "score": 2, "creation_date": 1574934309, "post_id": 59080711, "comment_id": 104407346, "body": "And, better still, since it is awkward to add one more command line parameter: <code>tasks.getByPath(&quot;detekt&quot;).onlyIf { gradle.startParameter.taskNames.contains(&quot;detekt&quot;) }</code>"}], "tags": [], "owner": {"reputation": 445, "user_id": 4535853, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-5wPNP9wDq4s/AAAAAAAAAAI/AAAAAAAAAFs/_3QLRVK_AhQ/photo.jpg?sz=128", "display_name": "Max", "link": "https://stackoverflow.com/users/4535853/max"}, "is_accepted": true, "score": 2, "last_activity_date": 1574905911, "creation_date": 1574905911, "answer_id": 59080711, "question_id": 59069898, "link": "https://stackoverflow.com/questions/59069898/disable-automatic-detekt-run-in-gradle/59080711#59080711", "title": "Disable automatic Detekt run in Gradle", "body": "<p>There are a lot of ways to skip the task.\nThe easiest one is to add <code>onlyIf</code> condition for your task.\nFor example:</p>\n\n<pre><code>task detect {\n    doFirst {\n        println 'detect'\n    }\n}\n\ndetect.onlyIf { project.hasProperty('runDetect') }\n</code></pre>\n\n<p>The <code>detect</code> task will be executed only when the <code>onlyIf</code> condition is true.</p>\n\n<pre><code>./gradlew detect -PrunDetect\n</code></pre>\n\n<p>Please take a look here for details <a href=\"https://docs.gradle.org/current/userguide/more_about_tasks.html#sec:skipping_tasks\" rel=\"nofollow noreferrer\">https://docs.gradle.org/current/userguide/more_about_tasks.html#sec:skipping_tasks</a></p>\n"}], "owner": {"reputation": 14274, "user_id": 2621917, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2ecd16dbe555b9596651e94668f71466?s=128&d=identicon&r=PG", "display_name": "Michael Piefel", "link": "https://stackoverflow.com/users/2621917/michael-piefel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 511, "favorite_count": 0, "accepted_answer_id": 59080711, "answer_count": 1, "score": 2, "last_activity_date": 1574905911, "creation_date": 1574856487, "question_id": 59069898, "link": "https://stackoverflow.com/questions/59069898/disable-automatic-detekt-run-in-gradle", "title": "Disable automatic Detekt run in Gradle", "body": "<p>I have added <a href=\"https://arturbosch.github.io/detekt/kotlindsl.html\" rel=\"nofollow noreferrer\">Detekt</a> to my Gradle project. My intention was to invoke <code>detekt</code> on demand only, since it creates a lot of false positives. However, the <code>detekt</code> task is active by default (and breaks the build). How can I avoid this dependency?</p>\n\n<p>What I tried: I have added a <code>gradle.taskGraph.beforeTask</code> block that sets <code>enabled = false</code> conditionally:</p>\n\n<pre><code>gradle.taskGraph.beforeTask {\n    val containsDetektTaskCall = gradle.startParameter.taskNames.contains(\"detekt\")\n    if (name.startsWith(\"detekt\") &amp;&amp; !containsDetektTaskCall) {\n        logger.lifecycle(\"Skipping all 'detekt-plugin' tasks\")\n        enabled = false\n    }\n}\n</code></pre>\n\n<p>I have the feeling that these 7 lines of code are really a bit much just to override a task dependency. I would appreciate a general Gradle answer as well as some Detekt-specific way.</p>\n"}, {"tags": ["android", "kotlin", "androidx"], "comments": [{"owner": {"reputation": 895, "user_id": 8493280, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-QD20ZOFuHKM/AAAAAAAAAAI/AAAAAAAAAD8/HAHAJe7ON64/photo.jpg?sz=128", "display_name": "Yang Liu", "link": "https://stackoverflow.com/users/8493280/yang-liu"}, "edited": false, "score": 3, "creation_date": 1574856630, "post_id": 59069879, "comment_id": 104377816, "body": "Can your paste your layout xml too?"}, {"owner": {"reputation": 1, "user_id": 12445557, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDa0ytmgf70FhPLLFIfEriLHNDWGqGIA5g9hy9UNA=k-s128", "display_name": "Harun Rashid", "link": "https://stackoverflow.com/users/12445557/harun-rashid"}, "reply_to_user": {"reputation": 895, "user_id": 8493280, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-QD20ZOFuHKM/AAAAAAAAAAI/AAAAAAAAAD8/HAHAJe7ON64/photo.jpg?sz=128", "display_name": "Yang Liu", "link": "https://stackoverflow.com/users/8493280/yang-liu"}, "edited": false, "score": 0, "creation_date": 1574881125, "post_id": 59069879, "comment_id": 104390886, "body": "?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;<a href=\"http://schemas.android.com/apk/res/android\" rel=\"nofollow noreferrer\">schemas.android.com/apk/res/android</a>&quot;     xmlns:app=&quot;<a href=\"http://schemas.android.com/apk/res-auto\" rel=\"nofollow noreferrer\">schemas.android.com/apk/res-auto</a>&quot;     xmlns:tools=&quot;<a href=\"http://schemas.android.com/tools\" rel=\"nofollow noreferrer\">schemas.android.com/tools</a>&quot;     android:id=&quot;@+id/etName&quot;     android:layout_width=&quot;match_parent&quot;     android:layout_height=&quot;match_parent&quot;     tools:context=&quot;.MainActivity&quot;&gt;"}], "answers": [{"tags": [], "owner": {"reputation": 136101, "user_id": 101361, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fb0da94b98f64b5b8f12caeb3a049b80?s=128&d=identicon&r=PG", "display_name": "laalto", "link": "https://stackoverflow.com/users/101361/laalto"}, "is_accepted": false, "score": 0, "last_activity_date": 1574885497, "creation_date": 1574885497, "answer_id": 59077807, "question_id": 59069879, "link": "https://stackoverflow.com/questions/59069879/android-studio-app-keeps-on-crashing-and-showing-screen-cast-error/59077807#59077807", "title": "Android studio app keeps on crashing and showing screen cast error", "body": "<p>Looks like you have</p>\n\n<pre><code>android:id=\"@+id/etName\"\n</code></pre>\n\n<p>in your root <code>ConstraintLayout</code>. In code you have</p>\n\n<pre><code>val Name = findViewById&lt;EditText&gt;(R.id.etName)\n</code></pre>\n\n<p>which finds a view by id <code>etName</code> and attempts to cast it to <code>EditText</code>. The algorithm in <code>findViewById()</code> is just a simple tree search that stops at first match which is the root layout for you. If you have another view (such as your <code>EditText</code>) with the same id, the search never reaches that deep. Bang, <code>ClassCastException</code>.</p>\n\n<p>To fix it, remove the id from the root layout, or change it to something unique within the layout file, and ensure you actually have an <code>EditText</code> with id <code>etName</code> in the layout.</p>\n"}], "owner": {"reputation": 1, "user_id": 12445557, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDa0ytmgf70FhPLLFIfEriLHNDWGqGIA5g9hy9UNA=k-s128", "display_name": "Harun Rashid", "link": "https://stackoverflow.com/users/12445557/harun-rashid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 126, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1574885497, "creation_date": 1574856427, "last_edit_date": 1574881370, "question_id": 59069879, "link": "https://stackoverflow.com/questions/59069879/android-studio-app-keeps-on-crashing-and-showing-screen-cast-error", "title": "Android studio app keeps on crashing and showing screen cast error", "body": "<blockquote>\n  <p>Caused by: java.lang.ClassCastException:\n  androidx.constraintlayout.widget.ConstraintLayout cannot be  cast to\n  android.widget.EditTextat\n  com.example.login.MainActivity.onCreate(MainActivity.kt:18)\n          at android.app.Activity.performCreate(Activity.java:7009)\n          at android.app.Activity.performCreate(Activity.java:7000)\n          at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1214)\n          at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2731)\n          at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2856)\u00a0\n          at android.app.ActivityThread.-wrap11(Unknown Source:0)\u00a0\n          at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1589)\u00a0\n          at android.os.Handler.dispatchMessage(Handler.java:106)\u00a0\n          at android.os.Looper.loop(Looper.java:164)\u00a0\n          at android.app.ActivityThread.main(ActivityThread.java:6494)\u00a0\n          at java.lang.reflect.Method.invoke(Native Method)\u00a0\n          at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:438)\u00a0\n          at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:807)</p>\n</blockquote>\n\n<p>This is my kotlin code where error is coming: </p>\n\n<pre><code>val Name = findViewById&lt;EditText&gt;(R.id.etName)\n\nval Password = findViewById&lt;EditText&gt;(R.id.etpassword)\n\nval Login = findViewById&lt;Button&gt;(R.id.btnlogin)\n\nval Info = findViewById&lt;TextView&gt;(R.id.tvinfo)\n\n?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout\nxmlns:android=\"http://schemas.android.com/apk/res/android\"    \nxmlns:app=\"http://schemas.android.com/apk/res-auto\"\nxmlns:tools=\"http://schemas.android.com/tools\"\nandroid:id=\"@+id/etName\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"match_parent\"\ntools:context=\".MainActivity\"&gt;\n</code></pre>\n"}, {"tags": ["kotlin", "reflection"], "answers": [{"comments": [{"owner": {"reputation": 705, "user_id": 4437044, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f4ef761590498c405d63f6f2e87dad38?s=128&d=identicon&r=PG&f=1", "display_name": "shurrok", "link": "https://stackoverflow.com/users/4437044/shurrok"}, "edited": false, "score": 1, "creation_date": 1574856589, "post_id": 59069859, "comment_id": 104377786, "body": "Wow, that works. I thought I need to use this annotation only if my code is supposed to work with some other java code... Thanks!"}, {"owner": {"reputation": 3419, "user_id": 2401265, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/16369b0c7c1f0fff22ff47be0a22289a?s=128&d=identicon&r=PG", "display_name": "gmetax", "link": "https://stackoverflow.com/users/2401265/gmetax"}, "reply_to_user": {"reputation": 705, "user_id": 4437044, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f4ef761590498c405d63f6f2e87dad38?s=128&d=identicon&r=PG&f=1", "display_name": "shurrok", "link": "https://stackoverflow.com/users/4437044/shurrok"}, "edited": false, "score": 1, "creation_date": 1574857810, "post_id": 59069859, "comment_id": 104378512, "body": "If I am correct, the part or reflection is java, so you want the method to be static in java that is why you need the annotation :)"}], "tags": [], "owner": {"reputation": 3419, "user_id": 2401265, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/16369b0c7c1f0fff22ff47be0a22289a?s=128&d=identicon&r=PG", "display_name": "gmetax", "link": "https://stackoverflow.com/users/2401265/gmetax"}, "is_accepted": true, "score": 3, "last_activity_date": 1574857767, "last_edit_date": 1574857767, "creation_date": 1574856355, "answer_id": 59069859, "question_id": 59069774, "link": "https://stackoverflow.com/questions/59069774/kotlin-reflection-for-object-class-gives-null/59069859#59069859", "title": "Kotlin reflection for object class gives null", "body": "<p>If I remember correctly you have to change it like that .. </p>\n\n<pre><code>@JvmStatic\nfun getAll(): Map&lt;String, List&lt;String&gt;&gt; {\n    return mapOf(\n        \"Mark\" to listOf(\"Banana\"),\n        \"John\" to listOf(\"Strawbery\", \"Pie\"),\n        \"Lily\" to listOf(\"Apple\", \"Banana\", \"Pie\"),\n    )\n}\n</code></pre>\n\n<p><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/-jvm-static/index.html\" rel=\"nofollow noreferrer\">JVMStatic</a></p>\n"}, {"comments": [{"owner": {"reputation": 705, "user_id": 4437044, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f4ef761590498c405d63f6f2e87dad38?s=128&d=identicon&r=PG&f=1", "display_name": "shurrok", "link": "https://stackoverflow.com/users/4437044/shurrok"}, "edited": false, "score": 0, "creation_date": 1574863198, "post_id": 59071489, "comment_id": 104381557, "body": "It is very generic indeed. But thanks for all the tips :)"}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "reply_to_user": {"reputation": 705, "user_id": 4437044, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f4ef761590498c405d63f6f2e87dad38?s=128&d=identicon&r=PG&f=1", "display_name": "shurrok", "link": "https://stackoverflow.com/users/4437044/shurrok"}, "edited": false, "score": 0, "creation_date": 1574863775, "post_id": 59071489, "comment_id": 104381926, "body": "if it is very generic, then <code>@JvmStatic</code> is probably no solution to it... and if it is, it is probably not that generic ;-)"}, {"owner": {"reputation": 705, "user_id": 4437044, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f4ef761590498c405d63f6f2e87dad38?s=128&d=identicon&r=PG&f=1", "display_name": "shurrok", "link": "https://stackoverflow.com/users/4437044/shurrok"}, "edited": false, "score": 0, "creation_date": 1574865150, "post_id": 59071489, "comment_id": 104382776, "body": "How can you know that without knowing the context of the project? :D"}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "reply_to_user": {"reputation": 705, "user_id": 4437044, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f4ef761590498c405d63f6f2e87dad38?s=128&d=identicon&r=PG&f=1", "display_name": "shurrok", "link": "https://stackoverflow.com/users/4437044/shurrok"}, "edited": false, "score": 0, "creation_date": 1574865374, "post_id": 59071489, "comment_id": 104382925, "body": "experience (if you can set <code>@JvmStatic</code> everywhere, then you can also introduce an appropriate other structure) ... but as I do not know for sure I used &quot;probably&quot; ;-)"}, {"owner": {"reputation": 705, "user_id": 4437044, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f4ef761590498c405d63f6f2e87dad38?s=128&d=identicon&r=PG&f=1", "display_name": "shurrok", "link": "https://stackoverflow.com/users/4437044/shurrok"}, "edited": false, "score": 0, "creation_date": 1574865531, "post_id": 59071489, "comment_id": 104383019, "body": "I assure you that the reflection is exactly what I need in my strict example. I just want to point that the question wasn&#39;t about if I should use the reflection or not but how to get the object function from it ;-)"}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "reply_to_user": {"reputation": 705, "user_id": 4437044, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f4ef761590498c405d63f6f2e87dad38?s=128&d=identicon&r=PG&f=1", "display_name": "shurrok", "link": "https://stackoverflow.com/users/4437044/shurrok"}, "edited": false, "score": 0, "creation_date": 1574866261, "post_id": 59071489, "comment_id": 104383448, "body": "I don&#39;t really mind, if you require it to be honest... ;-) most of time I saw it used, it wasn&#39;t necessary (with a bit of refactoring)... but if you really require it, I doubt that <code>@JvmStatic</code> is the solution to it ;-) (as that will force you to adapt each and every <code>object</code>, which defeats the purpose of having a generic solution ;-))"}, {"owner": {"reputation": 705, "user_id": 4437044, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f4ef761590498c405d63f6f2e87dad38?s=128&d=identicon&r=PG&f=1", "display_name": "shurrok", "link": "https://stackoverflow.com/users/4437044/shurrok"}, "reply_to_user": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1574866668, "post_id": 59071489, "comment_id": 104383697, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/203192/discussion-between-shurrok-and-roland\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "is_accepted": false, "score": 1, "last_activity_date": 1574861827, "creation_date": 1574861827, "answer_id": 59071489, "question_id": 59069774, "link": "https://stackoverflow.com/questions/59069774/kotlin-reflection-for-object-class-gives-null/59071489#59071489", "title": "Kotlin reflection for object class gives null", "body": "<p>As you can access (and have control over) both, the caller, as also the target, you probably shouldn't use reflection. <code>@JvmStatic</code> is a solution to this, but only if you can alter the target class.</p>\n\n<p>If you can't and still need reflection, the following may help you:</p>\n\n<pre><code>val dictClass = Class.forName(\"com.example.util.Dict\")\nval getAllRelationsMethod = relationsClass.getMethod(\"getAll\")\nval objectInstance = dictClass.getField(\"INSTANCE\").get(null) // get value of static field INSTANCE (which every object has)\nval peopleWithMeals = getAllRelationsMethod.invoke(objectInstance)\n</code></pre>\n\n<p>It first extracts the object's instance with which you can call the object functions.</p>\n\n<p>If you know that the object is always <code>Dict</code> and you imported it appropriately, you can also just use the following to call a function of/on it:</p>\n\n<pre><code>val dictClass = Class.forName(\"com.example.util.Dict\")\nval getAllRelationsMethod = relationsClass.getMethod(\"getAll\")\nval peopleWithMeals = getAllRelationsMethod.invoke(Dict) // Dict is an object and here the actual instance is used...\n</code></pre>\n\n<p>If it isn't very generic what you want to do, then omit reflection. Maybe having appropriate interfaces may help you accomplish something similar instead of using reflection?</p>\n"}], "owner": {"reputation": 705, "user_id": 4437044, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f4ef761590498c405d63f6f2e87dad38?s=128&d=identicon&r=PG&f=1", "display_name": "shurrok", "link": "https://stackoverflow.com/users/4437044/shurrok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 319, "favorite_count": 1, "accepted_answer_id": 59069859, "answer_count": 2, "score": 2, "last_activity_date": 1574861827, "creation_date": 1574856028, "question_id": 59069774, "link": "https://stackoverflow.com/questions/59069774/kotlin-reflection-for-object-class-gives-null", "title": "Kotlin reflection for object class gives null", "body": "<p>I'm diving into reflection and I've met the following issue with this object class:</p>\n\n<pre><code>object Dict {\n\n     fun getAll(): Map&lt;String, List&lt;String&gt;&gt; {\n        return mapOf(\n            \"Mark\" to listOf(\"Banana\"),\n            \"John\" to listOf(\"Strawbery\", \"Pie\"),\n            \"Lily\" to listOf(\"Apple\", \"Banana\", \"Pie\"),\n        )\n    }\n}\n</code></pre>\n\n<p>knowing the package canonical name of this class I can get this method:</p>\n\n<pre><code>val dictClass = Class.forName(\"com.example.util.Dict\")\nval getAllRelationsMethod = relationsClass.getMethod(\"getAll\")\nval peopleWithMeals = getAllRelationsMethod.invoke(null) // this line gives error\n</code></pre>\n\n<p>I got the following exception: <code>java.lang.NullPointerException: null receiver</code></p>\n\n<p>I'm passing the null into the <code>invoke()</code> method because it doesn't need a class instance to call (like static in java). Does the method call differs from Java here somehow? Didn't find a tip around the Internet so that's why I'm asking here. Thanks in advance! :)</p>\n"}, {"tags": ["android", "kotlin", "jackson", "retrofit", "android-livedata"], "comments": [{"owner": {"reputation": 3271, "user_id": 764624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bcb73d4a76eb0dbb40705de0cee1d23?s=128&d=identicon&r=PG", "display_name": "Ivan Wooll", "link": "https://stackoverflow.com/users/764624/ivan-wooll"}, "edited": false, "score": 0, "creation_date": 1574855803, "post_id": 59069548, "comment_id": 104377359, "body": "It seems like you&#39;re trying to guess what the cause of your perceived lag and poor performance. I recommend you to use the profiler built in to Android Studio to get a better unerstanding  <a href=\"https://developer.android.com/studio/profile/android-profiler\" rel=\"nofollow noreferrer\">developer.android.com/studio/profile/android-profiler</a>?"}, {"owner": {"reputation": 769, "user_id": 1466854, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d18bea5d7b5cdfd30b90d6b336857b5a?s=128&d=identicon&r=PG&f=1", "display_name": "JJack_", "link": "https://stackoverflow.com/users/1466854/jjack"}, "reply_to_user": {"reputation": 3271, "user_id": 764624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bcb73d4a76eb0dbb40705de0cee1d23?s=128&d=identicon&r=PG", "display_name": "Ivan Wooll", "link": "https://stackoverflow.com/users/764624/ivan-wooll"}, "edited": false, "score": 0, "creation_date": 1574855978, "post_id": 59069548, "comment_id": 104377462, "body": "Thank you for your response. What about Retrofit, Jackson and LiveData? Do you think we use them in the right way?"}], "owner": {"reputation": 769, "user_id": 1466854, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d18bea5d7b5cdfd30b90d6b336857b5a?s=128&d=identicon&r=PG&f=1", "display_name": "JJack_", "link": "https://stackoverflow.com/users/1466854/jjack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1574859480, "creation_date": 1574855347, "last_edit_date": 1574859480, "question_id": 59069548, "link": "https://stackoverflow.com/questions/59069548/async-json-mapping-with-jackson-and-retrofit", "title": "Async JSON mapping with Jackson and Retrofit", "body": "<p>We use a Repository in order to provide information to an activity through a ViewModel.</p>\n\n<p>We use Retrofit 2 to perform network operations and Jackson for JSON mapping. Here how this is performed inside the repository:</p>\n\n<pre><code>private fun getRemoteSuggestions(locale: String, term: String, pos: String): LiveData&lt;Suggestions?&gt; {\n    val suggestionLiveData: MutableLiveData&lt;Suggestions?&gt; = MutableLiveData()\n\n    if (request != null) {\n        request?.cancel()\n    }\n\n    request = autocompleteService.fetch(locale, term, pos)\n    request?.enqueue {\n        onResponse = { response -&gt;\n            val payload = response.body()?.payload\n            payload?.let {\n                val suggestions = objectMapper().treeToValue(payload, Suggestions::class.java)\n                if (suggestions.isEmpty()) {\n                    suggestions.error = ServiceError(Errors.NO_DATA_FOUND)\n                }\n                if (waitingForTerm == term) suggestionLiveData.postValue(suggestions)\n            } ?: run {\n                if (waitingForTerm == term) suggestionLiveData.postValue(null)\n            }\n        }\n        onFailure = { error -&gt;\n            Logger.d(\"Need to throw exception\")\n        }\n    }\n    return suggestionLiveData\n}\n</code></pre>\n\n<p>As far as we know <code>enqueue</code> performs network calls in a background thread, but <code>onResponse</code> works in the main thread.\nCould adding Anko <code>doAsync{}</code> be a possible solution?</p>\n\n<pre><code>private fun getRemoteSuggestions(locale: String, term: String, pos: String): LiveData&lt;Suggestions?&gt; {\n    ...\n        onResponse = { response -&gt;\n            doAsync {\n                ...\n            }\n        }\n    ...\n}\n</code></pre>\n\n<p>In addition this is how we update our RecycleView.</p>\n\n<pre><code>this.autocompleteViewModel.getSuggestions(term).observe(this, Observer {\n    if (this.searchTriggered) return@Observer\n    it?.let { suggestions -&gt;\n        val sections = autocompleteViewModel.getAutocompleteSections(term.length, suggestions)\n        runOnUiThread {\n            autocompleteAdapter?.add(sections)\n        }\n    }\n})\n</code></pre>\n\n<p>What do you think? Are there any better solutions?</p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 2756, "user_id": 2235972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZDR82.png?s=128&g=1", "display_name": "denvercoder9", "link": "https://stackoverflow.com/users/2235972/denvercoder9"}, "edited": false, "score": 0, "creation_date": 1574853192, "post_id": 59068077, "comment_id": 104375926, "body": "shouldn&#39;t your base url be something like <code>https:&#47;&#47;abhi-debug.github.io&#47;</code> and the @GET fun be <code>&quot;Caption&#47;All&quot;</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 239, "user_id": 12228267, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jy6Eo.jpg?s=128&g=1", "display_name": "Peter Alwin", "link": "https://stackoverflow.com/users/12228267/peter-alwin"}, "is_accepted": false, "score": 0, "last_activity_date": 1574851467, "last_edit_date": 1574851467, "creation_date": 1574850680, "answer_id": 59068107, "question_id": 59068077, "link": "https://stackoverflow.com/questions/59068077/call-retrofit-without-having-value/59068107#59068107", "title": "Call Retrofit without having Value", "body": "<pre><code>  @GET(\".\")\n  fun fetchData(): Call&lt;List&lt;Data&gt;&gt;\n</code></pre>\n\n<p>Pass <code>\".\"</code> as the parameter</p>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 12253473, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDiWdQpYKfHzDHVP-C1uz4fNj9QPk5etqzlzpnWeQ=k-s128", "display_name": "Abhishek Chaurasia", "link": "https://stackoverflow.com/users/12253473/abhishek-chaurasia"}, "edited": false, "score": 0, "creation_date": 1574852345, "post_id": 59068366, "comment_id": 104375440, "body": "[\t{     \t\t&quot;id&quot;: 1, \t\t&quot;title&quot;: &quot;ALL&quot;, \t\t&quot;url&quot;: &quot;<a href=\"https://abhi-debug.github.io/Caption/All/\" rel=\"nofollow noreferrer\">abhi-debug.github.io/Caption/All</a>&quot; \t},  this is my json file so i am fecthing base url from this json i cant separate base url"}], "tags": [], "owner": {"reputation": 500, "user_id": 3809653, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Ezd9I.png?s=128&g=1", "display_name": "ArbenMaloku", "link": "https://stackoverflow.com/users/3809653/arbenmaloku"}, "is_accepted": false, "score": 0, "last_activity_date": 1574851481, "creation_date": 1574851481, "answer_id": 59068366, "question_id": 59068077, "link": "https://stackoverflow.com/questions/59068077/call-retrofit-without-having-value/59068366#59068366", "title": "Call Retrofit without having Value", "body": "<p>My suggestion would be to have a base URL like: <a href=\"https://abhi-debug.github.io/\" rel=\"nofollow noreferrer\">https://abhi-debug.github.io/</a></p>\n\n<p>And then add this:</p>\n\n<pre><code>@GET(\"Caption/All\")\nfun fetchData(): Call&lt;List&lt;Data&gt;&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 12253473, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDiWdQpYKfHzDHVP-C1uz4fNj9QPk5etqzlzpnWeQ=k-s128", "display_name": "Abhishek Chaurasia", "link": "https://stackoverflow.com/users/12253473/abhishek-chaurasia"}, "edited": false, "score": 0, "creation_date": 1574854687, "post_id": 59068827, "comment_id": 104376732, "body": "IllegalArgumentException: baseUrl must end in /: <a href=\"https://abhi-debug.github.io/Caption/demo.json\" rel=\"nofollow noreferrer\">abhi-debug.github.io/Caption/demo.json</a>  how to by pass this if url do not have  / at the end in base url"}, {"owner": {"reputation": 53, "user_id": 2580882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CWYer.jpg?s=128&g=1", "display_name": "Deep Sheth", "link": "https://stackoverflow.com/users/2580882/deep-sheth"}, "reply_to_user": {"reputation": 5, "user_id": 12253473, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDiWdQpYKfHzDHVP-C1uz4fNj9QPk5etqzlzpnWeQ=k-s128", "display_name": "Abhishek Chaurasia", "link": "https://stackoverflow.com/users/12253473/abhishek-chaurasia"}, "edited": false, "score": 0, "creation_date": 1574856191, "post_id": 59068827, "comment_id": 104377584, "body": "In Solution 1- @GET(&quot;./&quot;) as following approach <a href=\"https://github.com/square/retrofit/issues/1567#issuecomment-180115150\" rel=\"nofollow noreferrer\">github.com/square/retrofit/issues/1567#issuecomment-18011515&zwnj;&#8203;0</a>  In solution 2 -You can concate string like this retrofitInterface.fetchData(&quot;<a href=\"https://abhi-debug.github.io/Caption/All&quot;+&quot;/&quot;\" rel=\"nofollow noreferrer\">abhi-debug.github.io/Caption/Al&zwnj;&#8203;l&quot;+&quot;/&quot;</a>);"}], "tags": [], "owner": {"reputation": 53, "user_id": 2580882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CWYer.jpg?s=128&g=1", "display_name": "Deep Sheth", "link": "https://stackoverflow.com/users/2580882/deep-sheth"}, "is_accepted": false, "score": 0, "last_activity_date": 1574852957, "creation_date": 1574852957, "answer_id": 59068827, "question_id": 59068077, "link": "https://stackoverflow.com/questions/59068077/call-retrofit-without-having-value/59068827#59068827", "title": "Call Retrofit without having Value", "body": "<p><strong>Solution 1</strong></p>\n\n<p>You can use @GET(\".\") to indicate that your url is the same as the base url.</p>\n\n<pre><code>@GET(\".\") \nCall&lt;List&lt;Data&gt;&gt; fetchData();\n</code></pre>\n\n<p><strong>Solution 2</strong></p>\n\n<p>You can pass URL to reuest as you mention you got URL in json response</p>\n\n<pre><code>@GET()\nCall&lt;List&lt;Data&gt;&gt; fetchData(@Url String url);\n</code></pre>\n\n<p>and call</p>\n\n<pre><code>Call&lt;List&lt;Data&gt;&gt; call = retrofitInterface.fetchData(\"https://abhi-debug.github.io/Caption/All\");\n    call.enqueue(new Callback&lt;List&lt;Data&gt;&gt;() {\n    @Override\n    public void onResponse(Call&lt;List&lt;Data&gt;&gt; call, Response&lt;List&lt;Data&gt;&gt; response) {\n        Log.i(TAG, response.body().toString());\n\n        List&lt;Data&gt; body = response.body();\n\n        Log.i(TAG, body.get(0).getId()+\"\");\n    }\n\n    @Override\n    public void onFailure(Call&lt;List&lt;Data&gt;&gt; call, Throwable t) {\n        // Log error here since request failed\n        Log.e(TAG, t.toString());\n    }\n});\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1807, "user_id": 3789993, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/CmUp9.png?s=128&g=1", "display_name": "AbhayBohra", "link": "https://stackoverflow.com/users/3789993/abhaybohra"}, "is_accepted": false, "score": 0, "last_activity_date": 1574854325, "creation_date": 1574854325, "answer_id": 59069266, "question_id": 59068077, "link": "https://stackoverflow.com/questions/59068077/call-retrofit-without-having-value/59069266#59069266", "title": "Call Retrofit without having Value", "body": "<p>In your Api Interface use this method</p>\n\n<pre><code>@GET\nCall&lt;JsonObject&gt; fetchData(@Url String config);\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 12253473, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDiWdQpYKfHzDHVP-C1uz4fNj9QPk5etqzlzpnWeQ=k-s128", "display_name": "Abhishek Chaurasia", "link": "https://stackoverflow.com/users/12253473/abhishek-chaurasia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1574854392, "creation_date": 1574850613, "last_edit_date": 1574854392, "question_id": 59068077, "link": "https://stackoverflow.com/questions/59068077/call-retrofit-without-having-value", "title": "Call Retrofit without having Value", "body": "<p>how to call Retrofit  GET method api in which no value will pass in GET(\")</p>\n\n<p>this is my code</p>\n\n<pre><code>@GET(\" \")\nfun fetchData(): Call&lt;List&lt;Data&gt;&gt;\n</code></pre>\n\n<p>this is my BASE URL <a href=\"https://abhi-debug.github.io/Caption/All\" rel=\"nofollow noreferrer\">https://abhi-debug.github.io/Caption/All</a></p>\n\n<p>and it cant have backslash at end </p>\n"}, {"tags": ["java", "spring-boot", "elasticsearch", "kotlin"], "comments": [{"owner": {"reputation": 11235, "user_id": 977919, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/eT2FU.jpg?s=128&g=1", "display_name": "sidgate", "link": "https://stackoverflow.com/users/977919/sidgate"}, "edited": false, "score": 0, "creation_date": 1574850629, "post_id": 59067858, "comment_id": 104374460, "body": "do you have <code>spatial4j</code> lib dependency?"}, {"owner": {"reputation": 61, "user_id": 10466802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NtDe4.jpg?s=128&g=1", "display_name": "Peter Parker", "link": "https://stackoverflow.com/users/10466802/peter-parker"}, "reply_to_user": {"reputation": 11235, "user_id": 977919, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/eT2FU.jpg?s=128&g=1", "display_name": "sidgate", "link": "https://stackoverflow.com/users/977919/sidgate"}, "edited": false, "score": 0, "creation_date": 1574863679, "post_id": 59067858, "comment_id": 104381865, "body": "no, i have only <code>org.locationtech.jts &#47; 1.16.1</code> i will add <code>spatial4j</code> and try"}, {"owner": {"reputation": 61, "user_id": 10466802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NtDe4.jpg?s=128&g=1", "display_name": "Peter Parker", "link": "https://stackoverflow.com/users/10466802/peter-parker"}, "reply_to_user": {"reputation": 11235, "user_id": 977919, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/eT2FU.jpg?s=128&g=1", "display_name": "sidgate", "link": "https://stackoverflow.com/users/977919/sidgate"}, "edited": false, "score": 0, "creation_date": 1574865308, "post_id": 59067858, "comment_id": 104382882, "body": "Now I have no console error, but I can not affect my index with this method. How do I modify this method to fetch all objects within my index <code>my_index</code> that are within the polygon?"}, {"owner": {"reputation": 11235, "user_id": 977919, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/eT2FU.jpg?s=128&g=1", "display_name": "sidgate", "link": "https://stackoverflow.com/users/977919/sidgate"}, "edited": false, "score": 0, "creation_date": 1575021074, "post_id": 59067858, "comment_id": 104437042, "body": "update your question with new issue. what is expected? what&#39;s actual?"}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 10466802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NtDe4.jpg?s=128&g=1", "display_name": "Peter Parker", "link": "https://stackoverflow.com/users/10466802/peter-parker"}, "is_accepted": true, "score": 0, "last_activity_date": 1575294680, "creation_date": 1575294680, "answer_id": 59140330, "question_id": 59067858, "link": "https://stackoverflow.com/questions/59067858/using-elasticsearch-query-on-springboot/59140330#59140330", "title": "using elasticsearch query on springboot", "body": "<p>after a bit of research this way I can use Spring's JPA to query</p>\n\n<pre><code>val filter = QueryBuilders.geoShapeQuery(\"SitePoint\", ShapeBuilders.newPolygon(coordinates)).relation(ShapeRelation.WITHIN)\n\n            val searchQuery = NativeSearchQueryBuilder()\n                    .withQuery(matchQuery(\"id\", id))\n                    .withFilter(filter)\n                    .build()\n\n            return template.queryForList(searchQuery, MyClass::class.java)\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 10466802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NtDe4.jpg?s=128&g=1", "display_name": "Peter Parker", "link": "https://stackoverflow.com/users/10466802/peter-parker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 59140330, "answer_count": 1, "score": 0, "last_activity_date": 1575294680, "creation_date": 1574849885, "question_id": 59067858, "link": "https://stackoverflow.com/questions/59067858/using-elasticsearch-query-on-springboot", "title": "using elasticsearch query on springboot", "body": "<p>I have this query working, I have the expected results using it in kibana.</p>\n\n<pre><code>GET my_index/_search\n{\n    \"query\": {\n        \"bool\" : {\n            \"must\" : {\n                \"match_all\" : {}\n            },\n            \"filter\" : {\n                \"geo_shape\" : {\n                    \"SitePoint\" : {\n                        \"shape\": {\n                           \"type\": \"polygon\",\n                           \"coordinates\" : [\n                            [[18.85491,-33.92305],\n                            [18.8604,-33.9319],\n                            [18.85618,-33.9399],\n                            [18.84809,-33.94153],\n                            [18.85491,-33.92305]]\n                           ]\n                        },\n                        \"relation\": \"within\"\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>and I'm trying to build something solid using ElasticsearchRepository with Kotlin or Java, I really don't find much about it on the internet or I don't understand the documentation as I should.</p>\n\n<pre><code>val coor = mutableListOf(org.locationtech.jts.geom.Coordinate(18.85491,-33.92305),\n                org.locationtech.jts.geom.Coordinate(18.8604,-33.9319),\n                org.locationtech.jts.geom.Coordinate(18.85618,-33.9399),\n                org.locationtech.jts.geom.Coordinate(18.84809,-33.94153),\n                org.locationtech.jts.geom.Coordinate(18.85491,-33.92305))\n\n        val query = QueryBuilders\n                .geoShapeQuery(\"objects\", ShapeBuilders.newPolygon(coor))\n                .relation(ShapeRelation.WITHIN)\n</code></pre>\n\n<p>just running this to see the query i have a <code>java.lang.ClassNotFoundException: org.locationtech.spatial4j.exception.InvalidShapeException</code></p>\n\n<p>Can someone help me?</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 977, "user_id": 56647, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/e1oXP.png?s=128&g=1", "display_name": "Ulrik Rasmussen", "link": "https://stackoverflow.com/users/56647/ulrik-rasmussen"}, "edited": false, "score": 0, "creation_date": 1574848723, "post_id": 59067292, "comment_id": 104373297, "body": "Yes, that will work, but only when the object is a top-level singleton. I was actually after something a bit more general. For example, if I have <code>class Bar(val offset: Int) { fun Int.negate() = offset - this }</code> and then set <code>val bar = Bar(42)</code>, then I still cannot refer to <code>bar.negate</code>."}, {"owner": {"reputation": 1574, "user_id": 8103819, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QBJQK.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/8103819/daniel"}, "reply_to_user": {"reputation": 977, "user_id": 56647, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/e1oXP.png?s=128&g=1", "display_name": "Ulrik Rasmussen", "link": "https://stackoverflow.com/users/56647/ulrik-rasmussen"}, "edited": false, "score": 0, "creation_date": 1574849627, "post_id": 59067292, "comment_id": 104373856, "body": "looks like you are missing the point of extension functions, all extension functions should be static, otherwise the compiler will not know which one to pick. What you are trying to achieve can be done with plain method calls, extension functions are used to extend the functionality of a class."}, {"owner": {"reputation": 977, "user_id": 56647, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/e1oXP.png?s=128&g=1", "display_name": "Ulrik Rasmussen", "link": "https://stackoverflow.com/users/56647/ulrik-rasmussen"}, "edited": false, "score": 0, "creation_date": 1574849881, "post_id": 59067292, "comment_id": 104373991, "body": "No? They are statically resolved, but they can very well live in dynamically allocated objects, and in fact they can be closures. Case in point, I can write <code>with(bar) { 5.negate() }</code> without any problems."}, {"owner": {"reputation": 1574, "user_id": 8103819, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QBJQK.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/8103819/daniel"}, "reply_to_user": {"reputation": 977, "user_id": 56647, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/e1oXP.png?s=128&g=1", "display_name": "Ulrik Rasmussen", "link": "https://stackoverflow.com/users/56647/ulrik-rasmussen"}, "edited": false, "score": 0, "creation_date": 1574860753, "post_id": 59067292, "comment_id": 104380141, "body": "The only viable variant I find with classes is to inherit then  <code>class Bar : Foo() {     fun test() {         println(5.negate())     } }</code>, in Foo all extension methods are defined"}, {"owner": {"reputation": 977, "user_id": 56647, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/e1oXP.png?s=128&g=1", "display_name": "Ulrik Rasmussen", "link": "https://stackoverflow.com/users/56647/ulrik-rasmussen"}, "edited": false, "score": 0, "creation_date": 1574861581, "post_id": 59067292, "comment_id": 104380635, "body": "I actually tried that as well. Unfortunately it also does not work for the use case I have, because of limitations due to type erasure. E.g. have <code>interface Monoid&lt;A&gt; { fun z(): A fun A.add(other:A):A }</code> and want to implement <code>class PairIsMon&lt;A,B&gt;(val monA: Monoid&lt;A&gt;, val monB: Monoid&lt;B&gt;): Monoid&lt;Pair&lt;A,B&gt;&gt;, Monoid&lt;A&gt; by monA, Monoid&lt;B&gt; by monB { ... }</code>. This would actually be <i>really</i> nice if it worked, but I am not allowed to inherit from <code>Monoid</code> twice with different type arguments, because of type erasure..."}], "tags": [], "owner": {"reputation": 1574, "user_id": 8103819, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QBJQK.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/8103819/daniel"}, "is_accepted": false, "score": 0, "last_activity_date": 1574848018, "creation_date": 1574848018, "answer_id": 59067292, "question_id": 59067172, "link": "https://stackoverflow.com/questions/59067172/refer-to-extension-function-defined-as-a-member-inlining-with/59067292#59067292", "title": "Refer to extension function defined as a member; inlining `with`", "body": "<p>Yes, you can refer directly. For that you just need to import the extension function to your current package:</p>\n\n<pre><code>import Foo.negate\n</code></pre>\n\n<p>Then in your code you can do:</p>\n\n<pre><code>println(5.negate())\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 977, "user_id": 56647, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/e1oXP.png?s=128&g=1", "display_name": "Ulrik Rasmussen", "link": "https://stackoverflow.com/users/56647/ulrik-rasmussen"}, "edited": false, "score": 0, "creation_date": 1574856642, "post_id": 59069653, "comment_id": 104377825, "body": "Yes I think so, unfortunately. It&#39;s the same as writing <code>with(bar) { 5.negate() }</code> though."}, {"owner": {"reputation": 1537, "user_id": 1678893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZOh9W.jpg?s=128&g=1", "display_name": "Diego Marin Santos", "link": "https://stackoverflow.com/users/1678893/diego-marin-santos"}, "reply_to_user": {"reputation": 977, "user_id": 56647, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/e1oXP.png?s=128&g=1", "display_name": "Ulrik Rasmussen", "link": "https://stackoverflow.com/users/56647/ulrik-rasmussen"}, "edited": false, "score": 0, "creation_date": 1574856765, "post_id": 59069653, "comment_id": 104377899, "body": "looks a bit better imo"}], "tags": [], "owner": {"reputation": 1537, "user_id": 1678893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZOh9W.jpg?s=128&g=1", "display_name": "Diego Marin Santos", "link": "https://stackoverflow.com/users/1678893/diego-marin-santos"}, "is_accepted": false, "score": 0, "last_activity_date": 1574856809, "last_edit_date": 1574856809, "creation_date": 1574855675, "answer_id": 59069653, "question_id": 59067172, "link": "https://stackoverflow.com/questions/59067172/refer-to-extension-function-defined-as-a-member-inlining-with/59069653#59069653", "title": "Refer to extension function defined as a member; inlining `with`", "body": "<p>Maybe this is the best you can get</p>\n\n<pre><code>class Bar(val offset: Int) { fun Int.negate() = offset - this }\n\nfun main() { \n    val bar = Bar(42)\n    bar.run { 5.negate() }\n}\n</code></pre>\n"}], "owner": {"reputation": 977, "user_id": 56647, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/e1oXP.png?s=128&g=1", "display_name": "Ulrik Rasmussen", "link": "https://stackoverflow.com/users/56647/ulrik-rasmussen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1574856809, "creation_date": 1574847647, "question_id": 59067172, "link": "https://stackoverflow.com/questions/59067172/refer-to-extension-function-defined-as-a-member-inlining-with", "title": "Refer to extension function defined as a member; inlining `with`", "body": "<p>Say I have the following:</p>\n\n<pre><code>object Foo {\n    fun Int.negate() = -this\n    fun negateInt(n: Int) = -n\n}\n</code></pre>\n\n<p>I can call the extension method <code>negate</code> on <code>Foo</code> by using <code>with</code>:</p>\n\n<pre><code>fun main() {\n  println(with(Foo) { 5.negate() }) // prints -5\n}\n</code></pre>\n\n<p>I can call the other method by calling it on the <code>Foo</code> object:</p>\n\n<pre><code>fun main2() {\n    println(Foo.negateInt(5)) // prints -5\n}\n</code></pre>\n\n<p>I think <code>with(Foo) { 5.negate() }</code> is syntactically a bit on the heavy side compared to <code>Foo.negateInt(5)</code> when the body is just a single invocation. I can't find a more compact way to perform this call though. I had hoped that I could do <code>Foo::negate</code> to get a function <code>(Int) -&gt; Int</code> where <code>this</code> has been lifted to be an argument, just like I can do for normal non-extension methods. For example, <code>val f = Int::toString</code> will give me a function <code>(Int) -&gt; String</code> such that <code>f(42)</code> is equivalent to <code>42.toString()</code>. If I could do that, then I could write <code>(Foo::negate)(5)</code> which is still heavy, but less heavy than <code>with(Foo) { ... }</code>.</p>\n\n<p>Is there really no way to explicitly refer to an extension method defined as a member?</p>\n"}, {"tags": ["android", "kotlin", "android-button"], "comments": [{"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1574847530, "post_id": 59067092, "comment_id": 104372576, "body": "What exactly is the question? How to set a drawable on a View in code?"}], "answers": [{"comments": [{"owner": {"reputation": 171, "user_id": 11829277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7118318530de68e4934039e544e2390?s=128&d=identicon&r=PG&f=1", "display_name": "CallMePedro", "link": "https://stackoverflow.com/users/11829277/callmepedro"}, "edited": false, "score": 0, "creation_date": 1574847650, "post_id": 59067167, "comment_id": 104372645, "body": "Thank you :) This is what I was looking for :)"}], "tags": [], "owner": {"reputation": 782, "user_id": 2031246, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGkY.jpg?s=128&g=1", "display_name": "John Le", "link": "https://stackoverflow.com/users/2031246/john-le"}, "is_accepted": false, "score": 3, "last_activity_date": 1574847628, "creation_date": 1574847628, "answer_id": 59067167, "question_id": 59067092, "link": "https://stackoverflow.com/questions/59067092/change-icon-in-button-if-condition/59067167#59067167", "title": "Change icon in button if (condition)", "body": "<p>You can try this way:</p>\n\n<pre><code>Button.setCompoundDrawablesWithIntrinsicBounds(\n        R.drawable.my_button,\n        R.drawable.my_button,\n        R.drawable.my_button,\n        R.drawable.my_button\n    )\n</code></pre>\n\n<p>I recommend you to have a look on <a href=\"https://youtu.be/bQu64DmaNn8\" rel=\"nofollow noreferrer\">this tutorial</a> for more detail.</p>\n"}, {"tags": [], "owner": {"reputation": 239, "user_id": 12228267, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jy6Eo.jpg?s=128&g=1", "display_name": "Peter Alwin", "link": "https://stackoverflow.com/users/12228267/peter-alwin"}, "is_accepted": false, "score": 2, "last_activity_date": 1574847715, "creation_date": 1574847715, "answer_id": 59067196, "question_id": 59067092, "link": "https://stackoverflow.com/questions/59067092/change-icon-in-button-if-condition/59067196#59067196", "title": "Change icon in button if (condition)", "body": "<pre><code>    Drawable img = getResources().getDrawable( R.drawable.profile_aadhar );\n    binding.btn.setCompoundDrawablesWithIntrinsicBounds( img, null, null, null);\n\n     position to set\n     Note setCompoundDrawablesWithIntrinsicBounds( left, top, right, bottom);\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10351180"}, "is_accepted": false, "score": 0, "last_activity_date": 1574848827, "last_edit_date": 1574848827, "creation_date": 1574847772, "answer_id": 59067211, "question_id": 59067092, "link": "https://stackoverflow.com/questions/59067092/change-icon-in-button-if-condition/59067211#59067211", "title": "Change icon in button if (condition)", "body": "<p>you can use it like this.</p>\n\n<pre><code>&lt;Button\n    android:id=\"@+id/btn\"\n    android:drawableStart=\"@drawable/my_button\"\n    android:text=\"ABC\"\n    /&gt;\n\n\n\nif (condition)\n    btn.setBackgroundResource(R.drawable.img1); \nelse\n    btn.setBackgroundResource(R.drawable.img2);\n</code></pre>\n\n<p>It will work.</p>\n"}], "owner": {"reputation": 171, "user_id": 11829277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7118318530de68e4934039e544e2390?s=128&d=identicon&r=PG&f=1", "display_name": "CallMePedro", "link": "https://stackoverflow.com/users/11829277/callmepedro"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 0, "closed_date": 1574848225, "answer_count": 3, "score": 0, "last_activity_date": 1574851372, "creation_date": 1574847351, "last_edit_date": 1574851372, "question_id": 59067092, "link": "https://stackoverflow.com/questions/59067092/change-icon-in-button-if-condition", "closed_reason": "Duplicate", "title": "Change icon in button if (condition)", "body": "<p>I have a button with icon and text inside. </p>\n\n<pre><code>&lt;Button\n...\nandroid:drawableStart=\"@drawable/my_button\"\nandroid:text=\"ABC\"\n...\n/&gt;\n</code></pre>\n\n<p>I would like to change icon from code if condition exists.</p>\n\n<pre><code>if (condition)\n   setIcon1()\nelse\n   setIcon2()\n</code></pre>\n\n<p>It has to be a button otherwise the layouts will split up.</p>\n"}, {"tags": ["java", "android", "android-studio", "kotlin"], "comments": [{"owner": {"reputation": 9541, "user_id": 1568530, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001179991520/picture?type=large", "display_name": "Vladyslav Matviienko", "link": "https://stackoverflow.com/users/1568530/vladyslav-matviienko"}, "edited": false, "score": 1, "creation_date": 1574846157, "post_id": 59066626, "comment_id": 104371815, "body": "you can&#39;t edit your APK contents form itself. Therefore, if the file is in assets - you can&#39;t edit it."}, {"owner": {"reputation": 1744, "user_id": 8842694, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1s4AN1_hjqE/AAAAAAAAAAI/AAAAAAAAAfI/3zXyhP8eIEs/photo.jpg=k-s128", "display_name": "Rishabh Sahrawat", "link": "https://stackoverflow.com/users/8842694/rishabh-sahrawat"}, "reply_to_user": {"reputation": 9541, "user_id": 1568530, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001179991520/picture?type=large", "display_name": "Vladyslav Matviienko", "link": "https://stackoverflow.com/users/1568530/vladyslav-matviienko"}, "edited": false, "score": 0, "creation_date": 1574846267, "post_id": 59066626, "comment_id": 104371886, "body": "okay, so where should I place the files for editing?. I read about putting them in <code>app&#47;src</code>"}, {"owner": {"reputation": 9541, "user_id": 1568530, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001179991520/picture?type=large", "display_name": "Vladyslav Matviienko", "link": "https://stackoverflow.com/users/1568530/vladyslav-matviienko"}, "edited": false, "score": 0, "creation_date": 1574846303, "post_id": 59066626, "comment_id": 104371908, "body": "that&#39;s up to you where to put it. On external or internal storage."}, {"owner": {"reputation": 1744, "user_id": 8842694, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1s4AN1_hjqE/AAAAAAAAAAI/AAAAAAAAAfI/3zXyhP8eIEs/photo.jpg=k-s128", "display_name": "Rishabh Sahrawat", "link": "https://stackoverflow.com/users/8842694/rishabh-sahrawat"}, "reply_to_user": {"reputation": 9541, "user_id": 1568530, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001179991520/picture?type=large", "display_name": "Vladyslav Matviienko", "link": "https://stackoverflow.com/users/1568530/vladyslav-matviienko"}, "edited": false, "score": 0, "creation_date": 1574846397, "post_id": 59066626, "comment_id": 104371956, "body": "okay, so how would you proceed with this problem of writing?. Where would you have placed the file?"}, {"owner": {"reputation": 9541, "user_id": 1568530, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001179991520/picture?type=large", "display_name": "Vladyslav Matviienko", "link": "https://stackoverflow.com/users/1568530/vladyslav-matviienko"}, "edited": false, "score": 0, "creation_date": 1574846402, "post_id": 59066626, "comment_id": 104371959, "body": "also if you only want to replace <code>JJ</code> with <code>NN</code>, it is much easier to use <code>String.replace(&quot;JJ&quot;,&quot;NN&quot;)</code> (that is java, not kotlin, I know, but it should not be a problem to convert)"}, {"owner": {"reputation": 9541, "user_id": 1568530, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001179991520/picture?type=large", "display_name": "Vladyslav Matviienko", "link": "https://stackoverflow.com/users/1568530/vladyslav-matviienko"}, "edited": false, "score": 0, "creation_date": 1574846433, "post_id": 59066626, "comment_id": 104371971, "body": "It depends on what you want to do with the file (except just editting it)"}, {"owner": {"reputation": 1744, "user_id": 8842694, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1s4AN1_hjqE/AAAAAAAAAAI/AAAAAAAAAfI/3zXyhP8eIEs/photo.jpg=k-s128", "display_name": "Rishabh Sahrawat", "link": "https://stackoverflow.com/users/8842694/rishabh-sahrawat"}, "reply_to_user": {"reputation": 9541, "user_id": 1568530, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001179991520/picture?type=large", "display_name": "Vladyslav Matviienko", "link": "https://stackoverflow.com/users/1568530/vladyslav-matviienko"}, "edited": false, "score": 0, "creation_date": 1574846461, "post_id": 59066626, "comment_id": 104371987, "body": "Yes, it works perfectly but I just can not make changes to the file."}, {"owner": {"reputation": 1744, "user_id": 8842694, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1s4AN1_hjqE/AAAAAAAAAAI/AAAAAAAAAfI/3zXyhP8eIEs/photo.jpg=k-s128", "display_name": "Rishabh Sahrawat", "link": "https://stackoverflow.com/users/8842694/rishabh-sahrawat"}, "reply_to_user": {"reputation": 9541, "user_id": 1568530, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001179991520/picture?type=large", "display_name": "Vladyslav Matviienko", "link": "https://stackoverflow.com/users/1568530/vladyslav-matviienko"}, "edited": false, "score": 0, "creation_date": 1574846540, "post_id": 59066626, "comment_id": 104372025, "body": "Once this file is written I want to place it back in assets. This editing of file is one time only. It is me doing it, not the user of the app."}, {"owner": {"reputation": 9541, "user_id": 1568530, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001179991520/picture?type=large", "display_name": "Vladyslav Matviienko", "link": "https://stackoverflow.com/users/1568530/vladyslav-matviienko"}, "edited": false, "score": 0, "creation_date": 1574846583, "post_id": 59066626, "comment_id": 104372046, "body": "you can&#39;t place it back in assets, as I already said - assets are part of APK, and you can&#39;t edit APK"}, {"owner": {"reputation": 1744, "user_id": 8842694, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1s4AN1_hjqE/AAAAAAAAAAI/AAAAAAAAAfI/3zXyhP8eIEs/photo.jpg=k-s128", "display_name": "Rishabh Sahrawat", "link": "https://stackoverflow.com/users/8842694/rishabh-sahrawat"}, "reply_to_user": {"reputation": 9541, "user_id": 1568530, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001179991520/picture?type=large", "display_name": "Vladyslav Matviienko", "link": "https://stackoverflow.com/users/1568530/vladyslav-matviienko"}, "edited": false, "score": 0, "creation_date": 1574846657, "post_id": 59066626, "comment_id": 104372088, "body": "I could cut/copy/paste files manually that are in assets or other folders."}, {"owner": {"reputation": 9541, "user_id": 1568530, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001179991520/picture?type=large", "display_name": "Vladyslav Matviienko", "link": "https://stackoverflow.com/users/1568530/vladyslav-matviienko"}, "edited": false, "score": 0, "creation_date": 1574846748, "post_id": 59066626, "comment_id": 104372138, "body": "Android application is assembled int the APK, which contains your compiled sources, assets and other things. <b>APK can not be modified</b> from the app itself. You can only read from it, not write into it."}, {"owner": {"reputation": 9541, "user_id": 1568530, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001179991520/picture?type=large", "display_name": "Vladyslav Matviienko", "link": "https://stackoverflow.com/users/1568530/vladyslav-matviienko"}, "edited": false, "score": 0, "creation_date": 1574846792, "post_id": 59066626, "comment_id": 104372157, "body": "When you install APK there are no assets folders anywhere, assets are part of APK."}, {"owner": {"reputation": 9541, "user_id": 1568530, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001179991520/picture?type=large", "display_name": "Vladyslav Matviienko", "link": "https://stackoverflow.com/users/1568530/vladyslav-matviienko"}, "edited": false, "score": 0, "creation_date": 1574846819, "post_id": 59066626, "comment_id": 104372168, "body": "Please pass some basic android tutorials before you continue. It looks like you are missing android basics."}], "answers": [{"comments": [{"owner": {"reputation": 1744, "user_id": 8842694, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1s4AN1_hjqE/AAAAAAAAAAI/AAAAAAAAAfI/3zXyhP8eIEs/photo.jpg=k-s128", "display_name": "Rishabh Sahrawat", "link": "https://stackoverflow.com/users/8842694/rishabh-sahrawat"}, "edited": false, "score": 0, "creation_date": 1574846822, "post_id": 59066829, "comment_id": 104372171, "body": "Hi Sumit, thanks for the answer. This sounds reasonable, but the problem is the <code>File(file)</code>, I can not access the <code>file</code> by giving the path to it here, which is required by <code>File</code> function. SO, my question is where should I place this <code>file</code>, in which folder of android studio, so that I can access it by giving the path"}, {"owner": {"reputation": 1744, "user_id": 8842694, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1s4AN1_hjqE/AAAAAAAAAAI/AAAAAAAAAfI/3zXyhP8eIEs/photo.jpg=k-s128", "display_name": "Rishabh Sahrawat", "link": "https://stackoverflow.com/users/8842694/rishabh-sahrawat"}, "edited": false, "score": 0, "creation_date": 1574849041, "post_id": 59066829, "comment_id": 104373510, "body": "What is <code>f</code> here in <code>f.writeText</code>?"}, {"owner": {"reputation": 68, "user_id": 7474666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c888f96aaaac5256fa054205512f15e?s=128&d=identicon&r=PG", "display_name": "Sumit Gohil", "link": "https://stackoverflow.com/users/7474666/sumit-gohil"}, "reply_to_user": {"reputation": 1744, "user_id": 8842694, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1s4AN1_hjqE/AAAAAAAAAAI/AAAAAAAAAfI/3zXyhP8eIEs/photo.jpg=k-s128", "display_name": "Rishabh Sahrawat", "link": "https://stackoverflow.com/users/8842694/rishabh-sahrawat"}, "edited": false, "score": 0, "creation_date": 1574855188, "post_id": 59066829, "comment_id": 104377031, "body": "I am sorry that was from old solution. Please check if new solution by @markB works."}], "tags": [], "owner": {"reputation": 68, "user_id": 7474666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c888f96aaaac5256fa054205512f15e?s=128&d=identicon&r=PG", "display_name": "Sumit Gohil", "link": "https://stackoverflow.com/users/7474666/sumit-gohil"}, "is_accepted": false, "score": 0, "last_activity_date": 1574848430, "last_edit_date": 1574848430, "creation_date": 1574846515, "answer_id": 59066829, "question_id": 59066626, "link": "https://stackoverflow.com/questions/59066626/how-to-write-edit-a-txt-file-using-kotlin-in-android-studio/59066829#59066829", "title": "How to Write/ Edit a txt file using Kotlin in Android Studio?", "body": "<p>Hi you can use the following solution to achieve your desired result.  </p>\n\n<p>UPDATE : Please try this solution to read file from assets and get your result. This solution is not tested.</p>\n\n<p>Make sure yourfilename.txt is under assets folder.</p>\n\n<pre><code>try {\nval inputStream:InputStream = assets.open(\"yourfilename.txt\")\n      val text = inputStream.bufferedReader().use{it.readText()}\n\n        println(text)\n        text = text.replace(\"JJ\".toRegex(), \"NN\")\n        f.writeText(text)\n}catch (e:Exception){\n        Log.d(TAG, e.toString())\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 297, "user_id": 7491121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/438c4d6376b2e40ea9277e85712554d2?s=128&d=identicon&r=PG&f=1", "display_name": "markB", "link": "https://stackoverflow.com/users/7491121/markb"}, "is_accepted": false, "score": 0, "last_activity_date": 1574857839, "last_edit_date": 1574857839, "creation_date": 1574850662, "answer_id": 59068099, "question_id": 59066626, "link": "https://stackoverflow.com/questions/59066626/how-to-write-edit-a-txt-file-using-kotlin-in-android-studio/59068099#59068099", "title": "How to Write/ Edit a txt file using Kotlin in Android Studio?", "body": "<pre><code>fun main(args: Array&lt;String&gt;) {\nvar lineNumber = 0\nvar newString = \"\"\nFile(\"src/dataFile\").forEachLine {\n    ++lineNumber\n    println(\"$lineNumber: $it\")\n    newString = it.replace(\"JJ\", \"NN\")\n    println(\"New string : $newString\")\n}\nFile(\"src/dataFile\").writeText(newString) \n}\n</code></pre>\n"}], "owner": {"reputation": 1744, "user_id": 8842694, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1s4AN1_hjqE/AAAAAAAAAAI/AAAAAAAAAfI/3zXyhP8eIEs/photo.jpg=k-s128", "display_name": "Rishabh Sahrawat", "link": "https://stackoverflow.com/users/8842694/rishabh-sahrawat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1370, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1574857839, "creation_date": 1574845801, "question_id": 59066626, "link": "https://stackoverflow.com/questions/59066626/how-to-write-edit-a-txt-file-using-kotlin-in-android-studio", "title": "How to Write/ Edit a txt file using Kotlin in Android Studio?", "body": "<p>I am in the beginning of Android App learning phase. I have a .txt file in my assets folder consisting of strings in each line, like this-</p>\n\n<pre><code>AWOL    JJ  AWOL\nAaronic JJ  Aaronic\nAaronical   JJ  Aaronical\n</code></pre>\n\n<p>What I want to do is just replace <code>JJ</code> with <code>NN</code> and keep rest the same. My questions are-</p>\n\n<ol>\n<li>Is there a way to edit the already existing file, because all the solutions I found are talking about creating some other file using function <code>File(&lt;filename&gt;)</code>?</li>\n<li>If I follow the solutions described on different websites, I can not access the file USING <code>File()</code>, it shows the error that the <code>file can not be found</code> even though I have created an empty file with the same name. I can not access the file if it is inside <code>assets</code> folder or inside <code>app/src</code>. So, instead I am using <code>Context.assets.open(&lt;filename&gt;)</code> for readin the orginal file which opens the file as <code>inputstream</code>. Although I don't know any other way of opening the file using <code>File()</code> for writing.</li>\n</ol>\n\n<pre><code>// FOR READING FROM ORIGINAL FILE\nvar inputStreamLemmDict = BufferedReader(InputStreamReader(context!!.assets.open(\"my_file.dict\"))).readLines()\n\n// FOR WRITING TO ANOTHER FILE\nFile(\"path_to/my_file.txt\").bufferedWriter().use { out -&gt;\n        inputStreamLemmDict.forEach {\n            var eachLineSplit = it.split(\"\\\\s\".toRegex())\n            if (eachLineSplit[1] == \"NNN\") {\n                out.write(\"${eachLineSplit[0]}\\tNN\\t${eachLineSplit[2]}\\n\")\n            }\n            else {\n            out.write(\"${it}\\n\")\n            }\n        }\n</code></pre>\n\n<p>Any help is appreciated. Thank you!</p>\n"}, {"tags": ["json", "kotlin", "moshi"], "comments": [{"owner": {"reputation": 5397, "user_id": 6275174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2VQA5.jpg?s=128&g=1", "display_name": "Nicola Gallazzi", "link": "https://stackoverflow.com/users/6275174/nicola-gallazzi"}, "edited": false, "score": 0, "creation_date": 1574848675, "post_id": 59066476, "comment_id": 104373266, "body": "what do you mean by &quot;response from my server which is dynamic in nature&quot;? You should know how your server behaves in order to serialize data in your app. Post some server responses"}, {"owner": {"reputation": 387, "user_id": 985191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d4a9c1dc61c9ae70c7b64d074a67fc0?s=128&d=identicon&r=PG", "display_name": "Jignesh Shah", "link": "https://stackoverflow.com/users/985191/jignesh-shah"}, "reply_to_user": {"reputation": 5397, "user_id": 6275174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2VQA5.jpg?s=128&g=1", "display_name": "Nicola Gallazzi", "link": "https://stackoverflow.com/users/6275174/nicola-gallazzi"}, "edited": false, "score": 0, "creation_date": 1574850069, "post_id": 59066476, "comment_id": 104374105, "body": "@Nicola - I get a JSONArray containing Strings or Integers or a custom object, based on certain conditions. May not be the best schema I agree, but this is something I&#39;m trying to address."}, {"owner": {"reputation": 5397, "user_id": 6275174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2VQA5.jpg?s=128&g=1", "display_name": "Nicola Gallazzi", "link": "https://stackoverflow.com/users/6275174/nicola-gallazzi"}, "edited": false, "score": 0, "creation_date": 1574851370, "post_id": 59066476, "comment_id": 104374905, "body": "I would identify a finite number of response types and for each response I would define a moshi custom adapter"}], "answers": [{"comments": [{"owner": {"reputation": 1741, "user_id": 2445763, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/vps5R.png?s=128&g=1", "display_name": "lasec0203", "link": "https://stackoverflow.com/users/2445763/lasec0203"}, "edited": false, "score": 0, "creation_date": 1600457813, "post_id": 62657686, "comment_id": 113105299, "body": "for those needing a more detailed example or are working with parsing complex objects see <a href=\"https://stackoverflow.com/questions/51548692/moshi-cannot-find-my-custom-adapter-written-in-kotlin-for-a-parameterized-type\">this</a> and <a href=\"https://github.com/loewenfels/dep-graph-releaser/blob/66c822830aa38ac6b4a2278dfe0020d551782bf0/dep-graph-releaser-serialization/src/main/kotlin/ch/loewenfels/depgraph/serialization/PairAdapterFactory.kt\" rel=\"nofollow noreferrer\">this</a>"}], "tags": [], "owner": {"reputation": 573, "user_id": 3101115, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6e7c9083b3e6ebcd16e6bb337dab243d?s=128&d=identicon&r=PG&f=1", "display_name": "Georgiy Shur", "link": "https://stackoverflow.com/users/3101115/georgiy-shur"}, "is_accepted": false, "score": 3, "last_activity_date": 1593520822, "creation_date": 1593520822, "answer_id": 62657686, "question_id": 59066476, "link": "https://stackoverflow.com/questions/59066476/how-do-i-use-moshi-to-serialize-a-json-string-into-org-json-jsonobject/62657686#62657686", "title": "How do I use Moshi to serialize a json string into org.json.JSONObject?", "body": "<p>I've stumbled upon the same problem recently. I needed to resend some of the data from one endpoint to another with adding some new stuff to it.</p>\n<p>The response from the server looks like this:</p>\n<pre><code>{\n    &quot;someProperty&quot;: &quot;value&quot;,\n    &quot;someOtherProperty&quot;: &quot;otherValue&quot;,\n    &quot;someDynamicProperty&quot;: {\n        // There may be anything including nested structures, not known beforehand\n    }\n}\n</code></pre>\n<p>Normally Moshi doesn't have built-in support for something like this, but it allows you to build your own adapters and handle the parsing logic.</p>\n<p>What you need is define the type that you want to receive as a result:</p>\n<pre><code>@JsonClass(generateAdapter = true)\ndata class CustomResponse(\n    val someProperty: String,\n    val someOtherProperty: String,\n    val someDynamicProperty: JSONObject?\n)\n</code></pre>\n<p>Then, you need to create a custom adapter to handle the parsing:</p>\n<pre><code>internal object JSONObjectAdapter {\n\n    @FromJson\n    fun fromJson(reader: JsonReader): JSONObject? {\n        // Here we're expecting the JSON object, it is processed as Map&lt;String, Any&gt; by Moshi\n        return (reader.readJsonValue() as? Map&lt;String, Any&gt;)?.let { data -&gt;\n            try {\n                JSONObject(data)\n            } catch (e: JSONException) {\n                // Handle error if arises\n            }\n        }\n    }\n\n    @ToJson\n    fun toJson(writer: JsonWriter, value: JSONObject?) {\n        value?.let { writer.value(Buffer().writeUtf8(value.toString())) }\n    }\n}\n</code></pre>\n<p>Then, just add this adapter to Moshi builder on creation:</p>\n<pre><code>Moshi.Builder().add(JSONObjectAdapter).build()\n</code></pre>\n<p>or use Moshi annotations if you want to apply it only to some particular properties.</p>\n"}], "owner": {"reputation": 387, "user_id": 985191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d4a9c1dc61c9ae70c7b64d074a67fc0?s=128&d=identicon&r=PG", "display_name": "Jignesh Shah", "link": "https://stackoverflow.com/users/985191/jignesh-shah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1212, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1593520822, "creation_date": 1574845242, "question_id": 59066476, "link": "https://stackoverflow.com/questions/59066476/how-do-i-use-moshi-to-serialize-a-json-string-into-org-json-jsonobject", "title": "How do I use Moshi to serialize a json string into org.json.JSONObject?", "body": "<p>I have a JSON response from my server which is dynamic in nature and I cannot map it into a Kotlin Data Class.</p>\n\n<p>I would like to create a <code>org.json.JSONObject</code> out of it and parse it from there.\nI've looked around SO and Moshi's doc but couldn't find any easy way of achieving this.</p>\n\n<p>Any suggestions?</p>\n"}, {"tags": ["java", "android", "firebase", "kotlin", "google-cloud-platform"], "comments": [{"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 2, "creation_date": 1574840258, "post_id": 59064986, "comment_id": 104368891, "body": "I strongly suggest not trying to immediately launch your app upon receipt of a message.  This is disruptive to the user experience.  Imagine if all apps simply forced themselves to launch just because a message was received - that would be <b>very</b> undesirable chaos as all apps simply message themselves to get attention."}, {"owner": {"reputation": 448, "user_id": 9348953, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8832f44894e16afd15276600c9fd19db?s=128&d=identicon&r=PG&f=1", "display_name": "Sanjay", "link": "https://stackoverflow.com/users/9348953/sanjay"}, "edited": false, "score": 0, "creation_date": 1574841216, "post_id": 59064986, "comment_id": 104369355, "body": "i think its very hard after android improved their security. we cannot run app like that we can open app when onMessageReceived() method it will work some time than it will automatically destroy. you can try using package whitelisted if it&#39;s work."}], "answers": [{"comments": [{"owner": {"reputation": 623, "user_id": 7305947, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-d1VSNZaMY-E/AAAAAAAAAAI/AAAAAAAABx4/5ktGc6zGwXg/photo.jpg?sz=128", "display_name": "Davinder Goel", "link": "https://stackoverflow.com/users/7305947/davinder-goel"}, "edited": false, "score": 0, "creation_date": 1574839902, "post_id": 59065075, "comment_id": 104368719, "body": "it will work when click on notification. it&#39;s working but i need auto launch my app when received the notification."}], "tags": [], "owner": {"reputation": 2440, "user_id": 3469691, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/kEjVo.png?s=128&g=1", "display_name": "Aman Shekhar", "link": "https://stackoverflow.com/users/3469691/aman-shekhar"}, "is_accepted": false, "score": 0, "last_activity_date": 1574839576, "creation_date": 1574839576, "answer_id": 59065075, "question_id": 59064986, "link": "https://stackoverflow.com/questions/59064986/how-can-i-launch-my-app-or-an-activity-on-notification-received-when-app-is-in-b/59065075#59065075", "title": "how can i launch my app or an activity on notification received when app is in background or killed?", "body": "<p><strong>Use your app server and FCM server API: Set the data key only. Can be either collapsible or non-collapsible.</strong></p>\n\n<p>If you are sending the notification from console, then use the particular key to send the notification from the Advanced Option features.</p>\n\n<pre><code>   if (getIntent().getExtras() != null) {\n     // Call your NotificationActivity here..\n     Intent intent = new Intent(MainActivity.this, NotificationActivity.class);\n     startActivity(intent);\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2440, "user_id": 3469691, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/kEjVo.png?s=128&g=1", "display_name": "Aman Shekhar", "link": "https://stackoverflow.com/users/3469691/aman-shekhar"}, "is_accepted": false, "score": 2, "last_activity_date": 1574840025, "creation_date": 1574840025, "answer_id": 59065184, "question_id": 59064986, "link": "https://stackoverflow.com/questions/59064986/how-can-i-launch-my-app-or-an-activity-on-notification-received-when-app-is-in-b/59065184#59065184", "title": "how can i launch my app or an activity on notification received when app is in background or killed?", "body": "<p>Try this one. </p>\n\n<pre><code>@Override\npublic void onMessageReceived(RemoteMessage remoteMessage) {\n    // Check if message contains a notification payload.\n    if (remoteMessage.getNotification() != null) {\n        startActivity(new Intent(this, MainActivity.class));\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 623, "user_id": 7305947, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-d1VSNZaMY-E/AAAAAAAAAAI/AAAAAAAABx4/5ktGc6zGwXg/photo.jpg?sz=128", "display_name": "Davinder Goel", "link": "https://stackoverflow.com/users/7305947/davinder-goel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1015, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1574846587, "creation_date": 1574839236, "last_edit_date": 1574846587, "question_id": 59064986, "link": "https://stackoverflow.com/questions/59064986/how-can-i-launch-my-app-or-an-activity-on-notification-received-when-app-is-in-b", "title": "how can i launch my app or an activity on notification received when app is in background or killed?", "body": "<p>I have a requirement for my app. I have to launch my app when I received a Notification (specific notification type) when my app is in background or killed state. I didn't find any solution for background. I'm using FCM for notifications.</p>\n\n<p>Actually my app support calling functionality from web side to mobile and when admin initiate call then I received a FCM push notification. when my app is foreground than it's work fine but when it is in background, than I received notification but for launch app I have to click on notification. but I need to launch app immediately. Have any one have any solution?</p>\n"}, {"tags": ["kotlin", "arraylist", "casting", "any"], "answers": [{"tags": [], "owner": {"reputation": 46525, "user_id": 7294900, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Pdqi4.gif?s=128&g=1", "display_name": "user7294900", "link": "https://stackoverflow.com/users/7294900/user7294900"}, "is_accepted": true, "score": 1, "last_activity_date": 1574840609, "creation_date": 1574840609, "answer_id": 59065337, "question_id": 59064964, "link": "https://stackoverflow.com/questions/59064964/kotlin-check-and-access-a-class-from-listany/59065337#59065337", "title": "Kotlin Check and access a class from List&lt;Any&gt;", "body": "<p>You can use simple <a href=\"https://kotlinlang.org/docs/reference/collection-elements.html\" rel=\"nofollow noreferrer\">elementAt</a> to get class</p>\n\n<pre><code>elements.elementAt(2)\n</code></pre>\n\n<blockquote>\n  <p><code>elementAt()</code> is useful for collections that do not provide indexed access, or are not statically known to provide one. In case of List, it's more idiomatic to use indexed access operator (get() or []).</p>\n</blockquote>\n\n<p>and check class using <a href=\"https://kotlinlang.org/docs/reference/typecasts.html\" rel=\"nofollow noreferrer\">is</a></p>\n\n<pre><code>if (obj is AdViewClass) {\n</code></pre>\n\n<blockquote>\n  <p>We can check whether an object conforms to a given type at runtime by using the is operator</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 6712, "user_id": 6678991, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/vT7P5.jpg?s=128&g=1", "display_name": "Mahdi-Malv", "link": "https://stackoverflow.com/users/6678991/mahdi-malv"}, "is_accepted": false, "score": 4, "last_activity_date": 1574840803, "creation_date": 1574840803, "answer_id": 59065388, "question_id": 59064964, "link": "https://stackoverflow.com/questions/59064964/kotlin-check-and-access-a-class-from-listany/59065388#59065388", "title": "Kotlin Check and access a class from List&lt;Any&gt;", "body": "<p>You can get <strong>all instances of a specific class</strong> that are in a list using the <code>filterIsInstance(Class&lt;&gt;)</code></p>\n\n<pre><code>val elements: List&lt;Any&gt; = listOf&lt;Any&gt;(\"trevor\", \"john\", AdViewClass, \"0goo\")\nval listOfAdViewClass = elements.filterIsInstance(AdViewClass::class.java)\n</code></pre>\n\n<p>The filtered list will contain all instances of that class in the list.</p>\n"}], "owner": {"reputation": 85, "user_id": 5929213, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/934f8bec2da7f3634b7a22a676e43475?s=128&d=identicon&r=PG&f=1", "display_name": "Terry", "link": "https://stackoverflow.com/users/5929213/terry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 59065337, "answer_count": 2, "score": 1, "last_activity_date": 1574843584, "creation_date": 1574839106, "last_edit_date": 1574843584, "question_id": 59064964, "link": "https://stackoverflow.com/questions/59064964/kotlin-check-and-access-a-class-from-listany", "title": "Kotlin Check and access a class from List&lt;Any&gt;", "body": "<p>How can you check and access adViewClass from the array of Any?</p>\n\n<pre><code>val adViewClass = AddViewClass(name = \"an instance\")\nval elements = listOf(\"trevor\", \"john\", adViewClass, \"0goo\")\n</code></pre>\n\n<p>How to get that <code>adViewClass</code> from list</p>\n"}, {"tags": ["java", "android", "kotlin", "garbage-collection"], "comments": [{"owner": {"reputation": 785, "user_id": 5571700, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/edfa10f7db9a89a516b196098f6a1409?s=128&d=identicon&r=PG&f=1", "display_name": "p.mathew13", "link": "https://stackoverflow.com/users/5571700/p-mathew13"}, "edited": false, "score": 0, "creation_date": 1574838539, "post_id": 59064678, "comment_id": 104368105, "body": "It is not recommended to call System.gc() anywhere in ur code especially after a loop. One thing u can do is deallocate that object created after ur use case is done"}, {"owner": {"reputation": 5421, "user_id": 7972699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bED4H.jpg?s=128&g=1", "display_name": "Anmol", "link": "https://stackoverflow.com/users/7972699/anmol"}, "edited": false, "score": 0, "creation_date": 1574838793, "post_id": 59064678, "comment_id": 104368219, "body": "GC does not help you in memory leak&#39;s use weak reference for storing the object and the store the weak reference in your list"}, {"owner": {"reputation": 321, "user_id": 1390980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/feb490a2a93143953189f6c421470e8b?s=128&d=identicon&r=PG", "display_name": "ycansener", "link": "https://stackoverflow.com/users/1390980/ycansener"}, "edited": false, "score": 1, "creation_date": 1574838860, "post_id": 59064678, "comment_id": 104368251, "body": "As far as I know, it does not matter how often you call the GC in your code unless you force it to collect. It basically schedule a task when you call GC, and when the time comes, it will execute GC process. Even though it looks like the best way to reallocate free memory by collecting the unused spaces, GC consumes some processing power to find orphan variables and free-to-reallocate memory spaces."}, {"owner": {"reputation": 499, "user_id": 1930573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09c442a422dcc11a53d1f25480cd79a8?s=128&d=identicon&r=PG&f=1", "display_name": "Rishabh Dhawan", "link": "https://stackoverflow.com/users/1930573/rishabh-dhawan"}, "edited": false, "score": 1, "creation_date": 1574839388, "post_id": 59064678, "comment_id": 104368486, "body": "After adding Data object to the list , I don&#39;t need that object anymore... WRONG. Java passes reference of your object, so after adding data object to the list, you cannot simply mark it up for GC. As long as your list contains a reference to your data object, GC call will not collect it. And also you do not need to manually call GC, it will be called by system and all objects which are not referenced anymore will be collected."}, {"owner": {"reputation": 93, "user_id": 12443413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bc2b11dd627a3ab2af9e87c4cbd1451?s=128&d=identicon&r=PG&f=1", "display_name": "Ankur Shinde", "link": "https://stackoverflow.com/users/12443413/ankur-shinde"}, "reply_to_user": {"reputation": 321, "user_id": 1390980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/feb490a2a93143953189f6c421470e8b?s=128&d=identicon&r=PG", "display_name": "ycansener", "link": "https://stackoverflow.com/users/1390980/ycansener"}, "edited": false, "score": 0, "creation_date": 1574840890, "post_id": 59064678, "comment_id": 104369187, "body": "thanks for ur suggestions. my problem with the list is cleared.  But for the knowledge, I just want to ask, If I call the garbage collector randomly does it affect the application. and as @ycansener said it will schedule the garbage collector.  this mean it doesn&#39;t call the collectors at the same time, then what will happen to all GC if they invoked at same time?"}, {"owner": {"reputation": 9541, "user_id": 1568530, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001179991520/picture?type=large", "display_name": "Vladyslav Matviienko", "link": "https://stackoverflow.com/users/1568530/vladyslav-matviienko"}, "edited": false, "score": 1, "creation_date": 1574842459, "post_id": 59064678, "comment_id": 104369886, "body": "<code>Does it affect the application</code> yes, it uses CPU time, therefore slows everything down. The other sing is that you should not call GC manually. It makes no sense."}], "answers": [{"tags": [], "owner": {"reputation": 945, "user_id": 3717124, "user_type": "registered", "accept_rate": 19, "profile_image": "https://i.stack.imgur.com/IAf8g.jpg?s=128&g=1", "display_name": "Anbarasu Chinna", "link": "https://stackoverflow.com/users/3717124/anbarasu-chinna"}, "is_accepted": false, "score": -1, "last_activity_date": 1574841622, "creation_date": 1574841622, "answer_id": 59065597, "question_id": 59064678, "link": "https://stackoverflow.com/questions/59064678/if-i-run-the-garbage-collector-programmatically-inside-a-loop-in-does-it-affect/59065597#59065597", "title": "If I run the Garbage Collector programmatically inside a loop. In does it affect my Android application?", "body": "<p>To make your app really responsive do the following.</p>\n\n<ul>\n<li>Follow the design pattern principle as you need.</li>\n<li>Create good architecture for your project.</li>\n<li>Handling bitmap properly - when not in use do not forget to call recycle() on bitmap, that will cause memory issue.</li>\n<li>Using componentcallback2 we can get memory info in service/activity before doing intensive process.</li>\n<li>Avoid bg service in application. If it is mandatory concentrate on efficient way of handling or use Job Scheduler or intent service.The drawback in service is the RAM(memory) used by a service in not available to another process.</li>\n<li>Instead of using hashmap we can use sparseArray, sparseBooleanArray.</li>\n<li>Do not create local variable in onDraw method().</li>\n<li>Remove memory intensive resources and dependencies.</li>\n<li>Reduce overall size of a apk.</li>\n<li>Use dagger2 for dependency injection, it does not use reflection api, but other library uses reflection api they gives noticeable delay while running the app.</li>\n<li>It\u2019s recommended creating all your layout using xml file. It\u2019s better you do this with Coordinator layout.</li>\n<li>Do all your time consuming process off the main thread. </li>\n<li>When loading multiple images parallely over network call do it with caching mechanism.</li>\n</ul>\n\n<p>Still you want to initiate garbage collection manually you can do it, but not recommended instead kill your app and sleep.</p>\n"}, {"tags": [], "owner": {"reputation": 1844, "user_id": 5736633, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/rM1Fw.png?s=128&g=1", "display_name": "vatbub", "link": "https://stackoverflow.com/users/5736633/vatbub"}, "is_accepted": true, "score": 1, "last_activity_date": 1574845795, "creation_date": 1574845795, "answer_id": 59066624, "question_id": 59064678, "link": "https://stackoverflow.com/questions/59064678/if-i-run-the-garbage-collector-programmatically-inside-a-loop-in-does-it-affect/59066624#59066624", "title": "If I run the Garbage Collector programmatically inside a loop. In does it affect my Android application?", "body": "<p>The garbage collector only collects objects which are not referenced in your code anymore. By adding it to a list, a reference is stored in the list and this reference is kept as long as the list is still referenced. If you want GC to collect your object, one of the following things must happen (assuming that neither the object nor the list are referenced anywhere else):</p>\n\n<ul>\n<li>The object is removed from the list</li>\n<li>The list goes out of scope</li>\n<li>The list variable is set to <code>null</code></li>\n</ul>\n\n<p>In that case, GC will collect the object. In general, the system is pretty smart about when to invoke GC, so invoking GC manually increases the complexity of your program while decreasing its performance (as GC also requires CPU time) and is thus not recommended.</p>\n\n<p>If you wish to avoid memory leaks:</p>\n\n<ul>\n<li>Make sure there is no stale reference to your objects</li>\n<li>Use <code>WeakReference</code></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 499, "user_id": 1930573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09c442a422dcc11a53d1f25480cd79a8?s=128&d=identicon&r=PG&f=1", "display_name": "Rishabh Dhawan", "link": "https://stackoverflow.com/users/1930573/rishabh-dhawan"}, "is_accepted": false, "score": 0, "last_activity_date": 1574863885, "last_edit_date": 1592644375, "creation_date": 1574863885, "answer_id": 59072082, "question_id": 59064678, "link": "https://stackoverflow.com/questions/59064678/if-i-run-the-garbage-collector-programmatically-inside-a-loop-in-does-it-affect/59072082#59072082", "title": "If I run the Garbage Collector programmatically inside a loop. In does it affect my Android application?", "body": "<p>In comment you asked &quot;what will happen if multiple <code>gc</code> calls are invoked at the same time?</p>\n<blockquote>\n<p>When in doubt, look at the source code.</p>\n<p>Source Code of System.gc() method</p>\n</blockquote>\n<pre><code> /**\n * Runs the garbage collector.\n * &lt;p&gt;\n * Calling the &lt;code&gt;gc&lt;/code&gt; method suggests that the Java Virtual\n * Machine expend effort toward recycling unused objects in order to\n * make the memory they currently occupy available for quick reuse.\n * When control returns from the method call, the Java Virtual\n * Machine has made a best effort to reclaim space from all discarded\n * objects.\n * &lt;p&gt;\n * The call &lt;code&gt;System.gc()&lt;/code&gt; is effectively equivalent to the\n * call:\n * &lt;blockquote&gt;&lt;pre&gt;\n * Runtime.getRuntime().gc()\n * &lt;/pre&gt;&lt;/blockquote&gt;\n *\n * @see     java.lang.Runtime#gc()\n */\npublic static void gc() {\n    boolean shouldRunGC;\n    synchronized (LOCK) {\n        shouldRunGC = justRanFinalization;\n        if (shouldRunGC) {\n            justRanFinalization = false;\n        } else {\n            runGC = true;\n        }\n    }\n    if (shouldRunGC) {\n        Runtime.getRuntime().gc();\n    }\n}\n</code></pre>\n<blockquote>\n<p>Declaration of justRanFinalization field.</p>\n</blockquote>\n<pre><code>/**\n * If we just ran finalization, we might want to do a GC to free the finalized objects.\n * This lets us do gc/runFinlization/gc sequences but prevents back to back System.gc().\n */\nprivate static boolean justRanFinalization;\n</code></pre>\n<p>So if <code>justRanFinalization</code> is <code>false</code>, then by calling <code>gc</code> multiple times you are creating a <code>boolean</code> and needlessly acquiring a <code>LOCK</code>.</p>\n"}], "owner": {"reputation": 93, "user_id": 12443413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bc2b11dd627a3ab2af9e87c4cbd1451?s=128&d=identicon&r=PG&f=1", "display_name": "Ankur Shinde", "link": "https://stackoverflow.com/users/12443413/ankur-shinde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 419, "favorite_count": 0, "accepted_answer_id": 59066624, "answer_count": 3, "score": 0, "last_activity_date": 1574863885, "creation_date": 1574837948, "last_edit_date": 1574840123, "question_id": 59064678, "link": "https://stackoverflow.com/questions/59064678/if-i-run-the-garbage-collector-programmatically-inside-a-loop-in-does-it-affect", "title": "If I run the Garbage Collector programmatically inside a loop. In does it affect my Android application?", "body": "<p>To minimize the memory leak problems and optimize my application. I want to make sure the stability of my application and to do this I am looking into the problem of memory allocation and deallocation. </p>\n\n<p>I create an object of data class inside a loop and add it to a list and after that, I don\u2019t need that data class object, so I want to remove that object from the memory without closing the screen or activity.</p>\n\n<p>For this after adding the object to the list, I invoke the System.gc().</p>\n\n<p>Does it affect the application because of too many garbage collection calls?</p>\n"}, {"tags": ["android", "kotlin", "retrofit", "rx-java", "kotlin-coroutines"], "comments": [{"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 1, "creation_date": 1574836512, "post_id": 59064175, "comment_id": 104367291, "body": "What&#39;s in the <code>coroutineContext</code> that you&#39;re placing in the <code>CoroutineScope()</code> call? My suspicion is that you have a regular <code>Job</code> instance in there, inside the context."}, {"owner": {"reputation": 478, "user_id": 8030546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/haVbb.jpg?s=128&g=1", "display_name": "Ankit Dubey", "link": "https://stackoverflow.com/users/8030546/ankit-dubey"}, "reply_to_user": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1574836664, "post_id": 59064175, "comment_id": 104367351, "body": "coroutineContext is defined in my BaseViewModel   like                             abstract class BaseViewModel : ViewModel(), CoroutineScope{      private val job: Job= Job()          override val coroutineContext: CoroutineContext         get() = <b>Dispatchers.Main + job + handler</b>      _ _ _ _"}, {"owner": {"reputation": 324, "user_id": 5354658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e0bf43308c75d6bca39c9583b7ebb49?s=128&d=identicon&r=PG&f=1", "display_name": "Choim", "link": "https://stackoverflow.com/users/5354658/choim"}, "edited": false, "score": 1, "creation_date": 1574837553, "post_id": 59064175, "comment_id": 104367679, "body": "do you use <code>SupervisorJob</code>? you should use <code>SupervisorJob</code> to avoid error propagation from child coroutines. otherwise, when child make a exception, your root job would be cancelled."}, {"owner": {"reputation": 478, "user_id": 8030546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/haVbb.jpg?s=128&g=1", "display_name": "Ankit Dubey", "link": "https://stackoverflow.com/users/8030546/ankit-dubey"}, "edited": false, "score": 0, "creation_date": 1574837619, "post_id": 59064175, "comment_id": 104367711, "body": "SupervisorJob? this one is new for me it. Let me check it."}, {"owner": {"reputation": 478, "user_id": 8030546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/haVbb.jpg?s=128&g=1", "display_name": "Ankit Dubey", "link": "https://stackoverflow.com/users/8030546/ankit-dubey"}, "reply_to_user": {"reputation": 324, "user_id": 5354658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e0bf43308c75d6bca39c9583b7ebb49?s=128&d=identicon&r=PG&f=1", "display_name": "Choim", "link": "https://stackoverflow.com/users/5354658/choim"}, "edited": false, "score": 0, "creation_date": 1574837831, "post_id": 59064175, "comment_id": 104367796, "body": "@Choim Thanks a lot. Seems it is working fine now. I just replaced Job() to SuperivsorJob() and its working fine now. Don&#39;t know magic behind yet happy."}], "answers": [{"comments": [{"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1574841344, "post_id": 59064641, "comment_id": 104369416, "body": "I think there&#39;s no point anymore in recommending the long-hand style of implementing <code>CoroutineScope</code>, the new way with <code>by MainScope</code> has the same semantics with less boilerplate. On the other hand, the composition vs. inheritance styles each have their own advantages and neither is an all-round winner."}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 2, "last_activity_date": 1574837780, "creation_date": 1574837780, "answer_id": 59064641, "question_id": 59064175, "link": "https://stackoverflow.com/questions/59064175/coroutine-never-calls-api-after-once-api-is-failed/59064641#59064641", "title": "Coroutine never calls API after once API is failed", "body": "<p>Whenever you start a coroutine with a coroutine builder such as <code>launch</code>, you need to start it in a given <code>CoroutineScope</code> - this is enforced by the function being <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/launch.html\" rel=\"nofollow noreferrer\">defined as an extension on <code>CoroutineScope</code></a>. This scope contains a <code>CoroutineContext</code>, which will define how the coroutine is executed.</p>\n\n<p>Based on the comment above, I assume you are using roughly this setup:</p>\n\n<pre><code>abstract class BaseViewModel : ViewModel(), CoroutineScope { \n    private val job: Job = Job()\n    override val coroutineContext: CoroutineContext \n        get() = Dispatchers.Main + job\n\n    override fun onCleared() {\n        coroutineContext.cancel()\n    }\n}\n</code></pre>\n\n<p>By using <code>GlobalScope.launch(coroutineContext)</code>, you're actually overriding everything provided by <code>GlobalScope</code> with the context parameter. Plus, since your <code>ViewModel</code> itself is a scope already, you don't need to <code>launch</code> in <code>GlobalScope</code> in the first place. You can simply write down <code>launch</code> within the <code>ViewModel</code> with no scope specified (essentially <code>this.launch {}</code>) and no context passed to it, as it will get the one from the scope anyway.</p>\n\n<p>The other issue is that you're using a regular <code>Job</code> as a part of your <code>CoroutineContext</code>. This <code>Job</code> becomes a parent for every coroutine you start, and whenever a child coroutine fails, such as on a network error, the parent <code>Job</code> gets cancelled too - meaning that any further children you attempt to start will fail immediately as well, as you can't start a new child under an already failed <code>Job</code> (see the <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/-job/index.html\" rel=\"nofollow noreferrer\"><code>Job</code> documentation</a> for more details).</p>\n\n<p>To avoid this, you can use a <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/-supervisor-job.html\" rel=\"nofollow noreferrer\"><code>SupervisorJob</code></a> instead, which can also group your coroutines together as children, and cancel them when the <code>ViewModel</code> is cleared, but won't get cancelled if one of its children fail.</p>\n\n<hr>\n\n<p>So to sum up the fixes to make at the code level quickly:</p>\n\n<ul>\n<li><p>Use a <code>SupervisorJob</code> in the <code>ViewModel</code> (and while you're there, create this combined <code>CoroutineContext</code> just once, by directly assigning it, and not placing it in a getter):</p>\n\n<pre><code>override val coroutineContext: CoroutineContext = Dispatchers.Main + SupervisorJob()\n</code></pre></li>\n<li><p>Launch your coroutines in the scope defined in the <code>ViewModel</code> instead of in <code>GlobalScope</code>:</p>\n\n<pre><code>abstract class BaseViewModel : ViewModel(), CoroutineScope { \n     // ...\n\n    fun load() {\n        launch { // equivalent to this.launch, because `this` is a CoroutineScope\n            // do loading\n        }\n    }\n}\n</code></pre></li>\n</ul>\n\n<hr>\n\n<p>You may also want to consider having your <code>ViewModel</code> contain a <code>CoroutineScope</code> instead of implementing the interface itself, <a href=\"https://proandroiddev.com/why-your-class-probably-shouldnt-implement-coroutinescope-eb34f722e510\" rel=\"nofollow noreferrer\">as described here</a> an <a href=\"https://github.com/Kotlin/kotlinx.coroutines/issues/1581\" rel=\"nofollow noreferrer\">discussed here</a>.</p>\n\n<hr>\n\n<p>There's a lot of reading to do on this topic, here are some articles I usually recommend:</p>\n\n<ul>\n<li><a href=\"https://medium.com/@elizarov/coroutine-context-and-scope-c8b255d59055\" rel=\"nofollow noreferrer\">https://medium.com/@elizarov/coroutine-context-and-scope-c8b255d59055</a></li>\n<li><a href=\"https://medium.com/@elizarov/the-reason-to-avoid-globalscope-835337445abc\" rel=\"nofollow noreferrer\">https://medium.com/@elizarov/the-reason-to-avoid-globalscope-835337445abc</a></li>\n<li><a href=\"https://proandroiddev.com/demystifying-coroutinecontext-1ce5b68407ad\" rel=\"nofollow noreferrer\">https://proandroiddev.com/demystifying-coroutinecontext-1ce5b68407ad</a></li>\n</ul>\n\n<p>... and everything else by Roman Elizarov on his blog, really :)</p>\n"}, {"comments": [{"owner": {"reputation": 478, "user_id": 8030546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/haVbb.jpg?s=128&g=1", "display_name": "Ankit Dubey", "link": "https://stackoverflow.com/users/8030546/ankit-dubey"}, "edited": false, "score": 0, "creation_date": 1574841063, "post_id": 59065191, "comment_id": 104369277, "body": "So you mean to say I don&#39;t need to use Job() or SupervisorJob() as my coroutine will be cleared automatically as soon as viewmodel is cleared"}, {"owner": {"reputation": 324, "user_id": 5354658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e0bf43308c75d6bca39c9583b7ebb49?s=128&d=identicon&r=PG&f=1", "display_name": "Choim", "link": "https://stackoverflow.com/users/5354658/choim"}, "reply_to_user": {"reputation": 478, "user_id": 8030546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/haVbb.jpg?s=128&g=1", "display_name": "Ankit Dubey", "link": "https://stackoverflow.com/users/8030546/ankit-dubey"}, "edited": false, "score": 0, "creation_date": 1574843502, "post_id": 59065191, "comment_id": 104370466, "body": "@AnkitDubey yes, because <code>viewModelScope</code> use <code>SupervisorJob</code> internally."}], "tags": [], "owner": {"reputation": 324, "user_id": 5354658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e0bf43308c75d6bca39c9583b7ebb49?s=128&d=identicon&r=PG&f=1", "display_name": "Choim", "link": "https://stackoverflow.com/users/5354658/choim"}, "is_accepted": false, "score": 0, "last_activity_date": 1574840053, "creation_date": 1574840053, "answer_id": 59065191, "question_id": 59064175, "link": "https://stackoverflow.com/questions/59064175/coroutine-never-calls-api-after-once-api-is-failed/59065191#59065191", "title": "Coroutine never calls API after once API is failed", "body": "<p>One more option.</p>\n\n<p>If you use <code>androidx.lifecycle:lifecycle-extensions:2.1.0</code>, <code>ViewModel</code> now has <code>viewModelScope</code> extension property use <code>SupervisorJob</code> default. And it will be cleared automatically when <code>ViewModel</code> cleared.</p>\n"}], "owner": {"reputation": 478, "user_id": 8030546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/haVbb.jpg?s=128&g=1", "display_name": "Ankit Dubey", "link": "https://stackoverflow.com/users/8030546/ankit-dubey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 286, "favorite_count": 2, "accepted_answer_id": 59064641, "answer_count": 2, "score": 2, "last_activity_date": 1574840053, "creation_date": 1574835557, "last_edit_date": 1574835930, "question_id": 59064175, "link": "https://stackoverflow.com/questions/59064175/coroutine-never-calls-api-after-once-api-is-failed", "title": "Coroutine never calls API after once API is failed", "body": "<p>In my viewmodel i've a function which uses coroutine to call an API.</p>\n\n<pre><code>fun loadPosts(){\n\n    GlobalScope.launch(coroutineContext){\n        changeState(load = true)\n        val list= withContext(Dispatchers.IO) {\n            apiService.getProfile(AUTH)\n        }\n        changeState(false,false,null)\n        showResult(list)\n    }\n}\n</code></pre>\n\n<p>Everytime i click on a button, this function is fired, API is called and I get valid response. But once my api get Exception like 500 or Http 401 Unauthorized, then again when I hit the button, Coroutine is never called and seems it returns the again error message from cache.</p>\n\n<p>For a use case: </p>\n\n<p>I clicked on button -> Api is called  -> got success response</p>\n\n<p>Again I clicked on  -> Api is called  -> got success response</p>\n\n<p>I disconnected my internet from phone</p>\n\n<p>I clicked on button -> Api is called -> got exception something like ConnectionError</p>\n\n<p>I connected my phone to internet</p>\n\n<p>I clicked on button -> <strong>Api is not called</strong> -> got exception something like ConnectionError</p>\n\n<p>Now even my phone has valid internet connection, I press on button, instead of calling api and wait for response, It gives me previous failed response again and again.</p>\n\n<p><strong>Earlier I was using Rxjava and I didn't face any such issue in that. I am new to coroutines so if anyone have any suggestion you are most welcome</strong></p>\n"}, {"tags": ["android", "kotlin", "build.gradle", "gradle-kotlin-dsl"], "comments": [{"owner": {"reputation": 1510, "user_id": 6276596, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209812458696523/picture?type=large", "display_name": "Furkan Yurdakul", "link": "https://stackoverflow.com/users/6276596/furkan-yurdakul"}, "edited": false, "score": 1, "creation_date": 1574837091, "post_id": 59063530, "comment_id": 104367504, "body": "<b>Program type already present:</b> These errors mostly appear when there are two instances of libraries on a single project that conflicts with each other. Run <code>gradlew app:dependencies</code> (on Linux: <code>.&#47;gradlew app:dependencies</code>) to see your dependency tree and search for <b>kotlin.StandardKt__SynchronizedKt</b> and see how many times and where it appears. Removing one instance should solve this problem."}, {"owner": {"reputation": 468, "user_id": 5031257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/370e98bb242e16641e5d78f4c686cff8?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammed Yal&#231;\u0131n Kuru", "link": "https://stackoverflow.com/users/5031257/muhammed-yal%c3%a7%c4%b1n-kuru"}, "edited": false, "score": 0, "creation_date": 1574838059, "post_id": 59063530, "comment_id": 104367902, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/59063596/unable-to-create-debug-or-signed-apk\" title=\"unable to create debug or signed apk\">stackoverflow.com/questions/59063596/&hellip;</a>"}, {"owner": {"reputation": 21, "user_id": 11920769, "user_type": "registered", "profile_image": "https://graph.facebook.com/575243616342184/picture?type=large", "display_name": "Verdant Clock Web", "link": "https://stackoverflow.com/users/11920769/verdant-clock-web"}, "reply_to_user": {"reputation": 1510, "user_id": 6276596, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209812458696523/picture?type=large", "display_name": "Furkan Yurdakul", "link": "https://stackoverflow.com/users/6276596/furkan-yurdakul"}, "edited": false, "score": 0, "creation_date": 1574927505, "post_id": 59063530, "comment_id": 104403936, "body": "@FurkanYurdakul I tried using the cmd <code>.&#47;gradlew app: dependencies</code> and searched for <b>kotlin.StandardKt__SynchronizedKt</b>  I didn&#39;t find it"}, {"owner": {"reputation": 21, "user_id": 11920769, "user_type": "registered", "profile_image": "https://graph.facebook.com/575243616342184/picture?type=large", "display_name": "Verdant Clock Web", "link": "https://stackoverflow.com/users/11920769/verdant-clock-web"}, "reply_to_user": {"reputation": 468, "user_id": 5031257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/370e98bb242e16641e5d78f4c686cff8?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammed Yal&#231;\u0131n Kuru", "link": "https://stackoverflow.com/users/5031257/muhammed-yal%c3%a7%c4%b1n-kuru"}, "edited": false, "score": 0, "creation_date": 1574927810, "post_id": 59063530, "comment_id": 104404069, "body": "@Muhammed Yalcin Kuru Yes, the issue is similar as you posted. Not getting any leads at my end"}], "answers": [{"tags": [], "owner": {"reputation": 533, "user_id": 5783253, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/mDHAr.jpg?s=128&g=1", "display_name": "Vijaya Varma Lanke", "link": "https://stackoverflow.com/users/5783253/vijaya-varma-lanke"}, "is_accepted": false, "score": 0, "last_activity_date": 1574836873, "creation_date": 1574836873, "answer_id": 59064430, "question_id": 59063530, "link": "https://stackoverflow.com/questions/59063530/failure-build-failed-with-an-exceptionappmultidexlistdebug/59064430#59064430", "title": "FAILURE: Build failed with an exception:app:multiDexListDebug", "body": "<p>Once include the below code in your app level build.gradle and check</p>\n\n<pre><code>packagingOptions {\n    exclude 'META-INF/DEPENDENCIES'\n    exclude 'META-INF/LICENSE'\n    exclude 'META-INF/LICENSE.txt'\n    exclude 'META-INF/license.txt'\n    exclude 'META-INF/NOTICE'\n    exclude 'META-INF/NOTICE.txt'\n    exclude 'META-INF/notice.txt'\n    exclude 'META-INF/ASL2.0'\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 11920769, "user_type": "registered", "profile_image": "https://graph.facebook.com/575243616342184/picture?type=large", "display_name": "Verdant Clock Web", "link": "https://stackoverflow.com/users/11920769/verdant-clock-web"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3604, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1575004703, "creation_date": 1574832258, "last_edit_date": 1575004703, "question_id": 59063530, "link": "https://stackoverflow.com/questions/59063530/failure-build-failed-with-an-exceptionappmultidexlistdebug", "title": "FAILURE: Build failed with an exception:app:multiDexListDebug", "body": "<p>I'm struggling to fix the problem that <code>Android Studio\nUnable to create debug or signed apk</code>.</p>\n\n<pre><code>Task :app:multiDexListDebug FAILED\nTask :app:multiDexListDebug in app Finished\n:app:multiDexListDebug (Thread[Daemon worker Thread 2,5,main]) completed. Took 2.62 secs.\nAAPT2 aapt2-3.5.2-5435860-linux Daemon #0: shutdown\n</code></pre>\n\n<p><strong>FAILURE: Build failed with an exception.</strong></p>\n\n<p><strong>What went wrong:</strong></p>\n\n<pre><code>Execution failed for task ':app:multiDexListDebug'.\nA failure occurred while executing com.android.build.gradle.internal.tasks.Workers$ActionFacade\n    Error while merging dex archives: \n     Learn how to resolve the issue at https://developer.android.com/studio/build/dependencies#duplicate_classes.\n     Program type already present: kotlin.StandardKt__SynchronizedKt\n</code></pre>\n\n<p><strong>Scenario tried:</strong> </p>\n\n<ul>\n<li>enabled <code>multidex</code> true</li>\n<li>added dependency <code>Multidex 2.0.1</code>(android x)</li>\n<li>cleaning and rebuild project</li>\n<li>excluding <code>org.jetbrains.kotlin</code> from the major projects.</li>\n<li>tried using <code>api</code> &amp; <code>runtimeOnly</code></li>\n</ul>\n"}, {"tags": ["kotlin", "kotlin-coroutines"], "answers": [{"tags": [], "owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "is_accepted": false, "score": 0, "last_activity_date": 1574846071, "last_edit_date": 1574846071, "creation_date": 1574844923, "answer_id": 59066403, "question_id": 59063522, "link": "https://stackoverflow.com/questions/59063522/why-is-this-coroutines-demo-crashing/59066403#59066403", "title": "Why is this coroutines demo crashing?", "body": "<blockquote>\n  <p>My intention is to create a program to understand how many coroutines we can create.</p>\n</blockquote>\n\n<p>The program you wrote does not provide you with that answer. Rather, it puts a thin layer on top of the classic Java <code>ExecutorService</code> with up to 64 concurrent threads executing your <code>call()</code>. The reason why your computer reboots is entirely outside the code you posted in the question. It is probably related to what exactly your <code>call()</code> does.</p>\n\n<p>If you want to observe the overhead the Kotlin coroutines introduce, you must write code that doesn't involve any heavyweight operations whose overhead dwarfs that of coroutines. Here's an example:</p>\n\n<pre><code>var maxConcurrentCalls = 0\n\nfun main() {\n    runBlocking {\n        coroutines()\n    }\n    println(\"You launched %,d concurrent coroutines\".format(maxConcurrentCalls))\n}\n\nfun CoroutineScope.coroutines() {\n    var concurrentCalls = 0\n    val jobs = 1..1_000_000\n    jobs.forEach {\n        launch {\n            concurrentCalls++\n            maxConcurrentCalls = max(concurrentCalls, maxConcurrentCalls)\n            delay(1000)\n            concurrentCalls--\n        }\n    }\n}\n</code></pre>\n\n<p>On my computer it ran for about 3 seconds and printed</p>\n\n<pre><code>You launched 1,000,000 concurrent coroutines\n</code></pre>\n\n<p>Note that all these coroutines executed on the main thread, which is why I had no need for thread-safe counters.</p>\n"}], "owner": {"reputation": 1186, "user_id": 3714376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OkQsb.jpg?s=128&g=1", "display_name": "JTeam", "link": "https://stackoverflow.com/users/3714376/jteam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1574846223, "creation_date": 1574832230, "last_edit_date": 1574846223, "question_id": 59063522, "link": "https://stackoverflow.com/questions/59063522/why-is-this-coroutines-demo-crashing", "title": "Why is this coroutines demo crashing?", "body": "<pre><code>import kotlinx.coroutines.Dispatchers\nimport kotlinx.coroutines.GlobalScope\nimport kotlinx.coroutines.launch\n\nfun main() {\n    coroutines()\n    while (true) {\n    }\n}\n\nfun coroutines() {\n    val jobs = 1..100000\n    jobs.forEach {\n        GlobalScope.launch(Dispatchers.IO) {\n            val request = getRequest()\n            val client = getClient()\n            call(request, client)\n        }\n    }\n}\n</code></pre>\n\n<p>I am running this on 16GB RAM, High Sierra.</p>\n\n<p>I want to understand what's wrong I am doing here.\nMy intention is to create a program to understand how many coroutines we can create.</p>\n\n<p>Before the program ends my machine gets restarted.</p>\n"}, {"tags": ["generics", "kotlin", "project-reactor"], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 769670, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3446d3050a0f6eab14f59aa1de867ca4?s=128&d=identicon&r=PG", "display_name": "xat", "link": "https://stackoverflow.com/users/769670/xat"}, "edited": false, "score": 0, "creation_date": 1574938680, "post_id": 59071954, "comment_id": 104409736, "body": "could you elaborate more on  &quot;every subtype of <code>String</code>. which makes it <code>Nothing</code>&quot;?"}, {"owner": {"reputation": 85, "user_id": 769670, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3446d3050a0f6eab14f59aa1de867ca4?s=128&d=identicon&r=PG", "display_name": "xat", "link": "https://stackoverflow.com/users/769670/xat"}, "edited": false, "score": 0, "creation_date": 1574945301, "post_id": 59071954, "comment_id": 104413287, "body": "Thanks, this does explain why it turns into <code>Nothing</code> Because of <code>Nothing</code>, does it mean I shall not use Mono with <code>out</code> in Kotlin? basically, it loose type information in most of Mono methods. There is no class in Java being subtype of everything, it will not be a problem of Java."}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "reply_to_user": {"reputation": 85, "user_id": 769670, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3446d3050a0f6eab14f59aa1de867ca4?s=128&d=identicon&r=PG", "display_name": "xat", "link": "https://stackoverflow.com/users/769670/xat"}, "edited": false, "score": 0, "creation_date": 1574946356, "post_id": 59071954, "comment_id": 104413868, "body": "The Java equivalent of <code>Mono&lt;out String&gt;</code> is <code>Mono&lt;? extends String&gt;</code>, I expect it would run into exactly the same problems (e.g. <code>.onErrorReturn(&quot;dummy&quot;)</code> also shouldn&#39;t work; if it does, likely the compiler notices <code>String</code> is final and simplifies it to <code>Mono&lt;String&gt;</code>). If you look here <a href=\"https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Mono.html\" rel=\"nofollow noreferrer\">projectreactor.io/docs/core/release/api/reactor/core/publish&zwnj;&#8203;er/&hellip;</a>, you can see it&#39;s never used as a return type, but it&#39;s useful as a parameter type. Same in Kotlin."}, {"owner": {"reputation": 85, "user_id": 769670, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3446d3050a0f6eab14f59aa1de867ca4?s=128&d=identicon&r=PG", "display_name": "xat", "link": "https://stackoverflow.com/users/769670/xat"}, "edited": false, "score": 0, "creation_date": 1574981969, "post_id": 59071954, "comment_id": 104427208, "body": "yep, you are right, Java has the same problem. So how do I return a Mono of some type can be its subtypes?"}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "reply_to_user": {"reputation": 85, "user_id": 769670, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3446d3050a0f6eab14f59aa1de867ca4?s=128&d=identicon&r=PG", "display_name": "xat", "link": "https://stackoverflow.com/users/769670/xat"}, "edited": false, "score": 0, "creation_date": 1575010623, "post_id": 59071954, "comment_id": 104432656, "body": "Well, this <i>is</i> the way you do it. The problem is just that you can&#39;t do quite a few things with it, but 1. there are some you can, you give an example <code>test().map { &quot;haha&quot; }</code> yourself; 2. you can&#39;t really avoid it. I think the best is to convert it to <code>Mono&lt;String&gt;</code> (in this example; <code>test().map { it }</code> should do it) and then work as usual."}], "tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": true, "score": 1, "last_activity_date": 1574940996, "last_edit_date": 1574940996, "creation_date": 1574863458, "answer_id": 59071954, "question_id": 59063102, "link": "https://stackoverflow.com/questions/59063102/reactor-kotlin-generic-type-return/59071954#59071954", "title": "Reactor Kotlin Generic type return", "body": "<p><code>Mono&lt;out String&gt;</code> means basically <code>Mono&lt;some subtype of String&gt;</code>. I.e. \"<code>Mono&lt;String&gt;</code> or <code>Mono&lt;Nothing&gt;</code>\"; so for </p>\n\n<pre><code>test().onErrorReturn(x)\n</code></pre>\n\n<p>to compile, the type of <code>x</code> must work whether <code>test()</code> returns a <code>Mono&lt;String&gt;</code> or <code>Mono&lt;Nothing&gt;</code>. If it's a <code>Mono&lt;String&gt;</code>, <code>x</code> must have type <code>String</code>; if it's a <code>Mono&lt;Nothing&gt;</code>, it has to be <code>Nothing</code> (which is why <code>\"dummy\"</code> doesn't typecheck). So it has to be a subtype of both <code>String</code> and <code>Nothing</code>; which is <code>Nothing</code>.</p>\n\n<p>The compiler doesn't actually consider these as separate cases, but the outcome is the same.</p>\n"}], "owner": {"reputation": 85, "user_id": 769670, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3446d3050a0f6eab14f59aa1de867ca4?s=128&d=identicon&r=PG", "display_name": "xat", "link": "https://stackoverflow.com/users/769670/xat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 1, "accepted_answer_id": 59071954, "answer_count": 1, "score": 0, "last_activity_date": 1574940996, "creation_date": 1574829588, "question_id": 59063102, "link": "https://stackoverflow.com/questions/59063102/reactor-kotlin-generic-type-return", "title": "Reactor Kotlin Generic type return", "body": "<p>Does any one knows why generic type is turned into <code>Nothing!</code> and cannot be chained with Reactor onErrorReturn?</p>\n\n<pre><code>fun test(): Mono&lt;out String&gt; {\n        return Mono.just(\"\")\n    }\n// Compile error\ntest().onErrorReturn(\"dummy\")\n</code></pre>\n\n<blockquote>\n  <p>Type mismatched \n  Required: Nothing!\n  Found: String\n  Projected type Mono restricts use of public final fun onErrorReturn...</p>\n</blockquote>\n\n<p>However, if I use <code>map</code> and <code>onErrorReturn</code> at another function, it works</p>\n\n<pre><code>// No error\nfun useTest(): Mono&lt;String&gt; {\n        return test().map { \"haha\" }\n    }\nuseTest().onErrorReturn(\"hehe\")\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "edited": false, "score": 1, "creation_date": 1574836834, "post_id": 59063028, "comment_id": 104367412, "body": "I&#39;m not sure you can have dynamic types like that, unless you write a generator which generates all the permutations from &lt;A&gt; to &lt;A, ..., Z&gt; Maybe Arrow Meta can do that generation for you"}, {"owner": {"reputation": 1000, "user_id": 159344, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d8cb8c8cd40ddf0cd05241443a591868?s=128&d=identicon&r=PG", "display_name": "Duane J", "link": "https://stackoverflow.com/users/159344/duane-j"}, "reply_to_user": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "edited": false, "score": 0, "creation_date": 1574876227, "post_id": 59063028, "comment_id": 104388743, "body": "Do you have any examples of something like this using Arrow Meta?"}, {"owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "edited": false, "score": 0, "creation_date": 1574880900, "post_id": 59063028, "comment_id": 104390808, "body": "Unfortunately not. Easiest might be to write Kotlin / Java code that literally generates the permutations of text in your Stack Overflow question&#39;s code, outputs it to a .kt file and then tie it into a Gradle task / Maven plugin. This way you are writing code that writes the boilerplate code for you and then automate the running of that boilerplate generation via Gradle / Maven. I was thinking that you could use varargs if you are less strict with the types, but that won&#39;t work for the <code>closure: (vararg args: Any)</code> &lt;- <code>unsupported modifier on parameter in function</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1994, "user_id": 10536125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7445c27d383f2368956f6f23e75f5fe1?s=128&d=identicon&r=PG&f=1", "display_name": "Bananon", "link": "https://stackoverflow.com/users/10536125/bananon"}, "is_accepted": true, "score": 1, "last_activity_date": 1574890423, "last_edit_date": 1574890423, "creation_date": 1574889763, "answer_id": 59078625, "question_id": 59063028, "link": "https://stackoverflow.com/questions/59063028/function-that-takes-variable-number-of-typed-args-and-a-closure-with-same-number/59078625#59078625", "title": "Function that takes variable number of typed args and a closure with same number of typed args?", "body": "<p>If your <code>mergeWhenValid</code> just returns <code>closure</code> result if all <code>eithers</code> are right and <code>firstProblem.left()</code> otherwise, you should use <code>Either.fx&lt;Problem, T&gt;</code> instead of your function. Example:</p>\n\n<pre><code>Either.fx&lt;Problem, String&gt; { \"${eitherInt.bind()} ${eitherDouble.bind()} ${eitherFloat.bind()}\" }\n</code></pre>\n\n<p>If your logic is more complex and you need somehow handle all <code>eithers</code>, you can do it either by creating special merging DSL:</p>\n\n<pre><code>fun &lt;R&gt; mergeWhenValid(block: MergeWhenValidScope.() -&gt; R): R = MergeWhenValidScope().block()\n\nclass EitherProblem&lt;out T&gt;(internal val either: Either&lt;Problem, T&gt;)\n\nclass MergeWhenValidScope {\n    private val eithers = mutableListOf&lt;Either&lt;Problem, *&gt;&gt;()\n\n    operator fun &lt;T&gt; Either&lt;Problem, T&gt;.component1(): EitherProblem&lt;T&gt; {\n        eithers += this\n        return EitherProblem(this)\n    }\n\n    private fun doStuff(): Option&lt;Problem&gt; {\n        // you can use `eithers` here and choose one of their problems or create a new one\n        // if you return None, it will assume that all `eithers` are right,\n        // otherwise, problem will be wrapped in Either and returned\n        return eithers.asSequence().mapNotNull { it.swap().getOrElse { null } }.firstOption()\n    }\n\n    fun &lt;R&gt; combine(block: CombinerScope.() -&gt; R): Either&lt;Problem, R&gt; =\n        doStuff().map { it.left() }.getOrElse { CombinerScope.block().right() }\n\n    object CombinerScope {\n        operator fun &lt;T&gt; EitherProblem&lt;T&gt;.invoke() = either.getOrHandle {\n            error(\"Unexpected problem $it\")\n        }\n    }\n}\n</code></pre>\n\n<p>Use case:</p>\n\n<pre><code>mergeWhenValid {\n    val (int) = eitherInt\n    val (double) = eitherDouble\n    val (float) = eitherFloat\n    combine { \"${int()} ${double()} ${float()}\" }\n}\n</code></pre>\n\n<p>Or by pipelining functions which add all your <code>eithers</code> to some object:</p>\n\n<pre><code>fun &lt;T&gt; mergeWhenValid() = MergeWhenValidInit&lt;T&gt;()\n\nclass MergeWhenValidInit&lt;T&gt; {\n    operator fun &lt;A&gt; invoke(either: Either&lt;Problem, A&gt;): MergeWhenValid&lt;A, T, T&gt; =\n        MergeWhenValid(either, listOf(either)) { it }\n}\n\nclass MergeWhenValid&lt;A, B, C&gt;(\n    private val either: Either&lt;Problem, A&gt;,\n    private val eithers: List&lt;Either&lt;Problem, *&gt;&gt;,\n    private val previous: (B) -&gt; C // is allowed to be called only if all `eithers` are right\n) {\n    private fun doStuff(): Option&lt;Problem&gt; {\n        // you can use `eithers` here and choose one of their problems or create a new one\n        // if you return None, it will assume that all `eithers` are right,\n        // otherwise, problem will be wrapped in Either and returned\n        return eithers.asSequence().mapNotNull { it.swap().getOrElse { null } }.firstOption()\n    }\n\n    operator fun invoke(block: (A) -&gt; B): Either&lt;Problem, C&gt; =\n        doStuff().map { it.left() }.getOrElse { requireC(block).right() }\n\n    operator fun &lt;D&gt; invoke(either: Either&lt;Problem, D&gt;): MergeWhenValid&lt;D, (A) -&gt; B, C&gt; =\n        MergeWhenValid(either, eithers + either) { next -&gt; requireC(next) }\n\n    private fun requireC(next: (A) -&gt; B): C = previous(next(either.getOrHandle {\n        error(\"Unexpected problem $it\")\n    }))\n}\n</code></pre>\n\n<p>Use case:</p>\n\n<pre><code>mergeWhenValid&lt;String&gt;()(eitherInt)(eitherDouble)(eitherFloat)() { float -&gt;\n    { double -&gt; { int -&gt; \"$int $double $float\" } }\n}\n</code></pre>\n\n<p>Note: the last approach reverses the order of arguments and also forces you to write <code>{ c -&gt; { b -&gt; { a -&gt; ... } } }</code> instead of <code>{ c, b, a -&gt; ... }</code>.</p>\n"}], "owner": {"reputation": 1000, "user_id": 159344, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d8cb8c8cd40ddf0cd05241443a591868?s=128&d=identicon&r=PG", "display_name": "Duane J", "link": "https://stackoverflow.com/users/159344/duane-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 2, "accepted_answer_id": 59078625, "answer_count": 1, "score": 1, "last_activity_date": 1574890423, "creation_date": 1574828987, "question_id": 59063028, "link": "https://stackoverflow.com/questions/59063028/function-that-takes-variable-number-of-typed-args-and-a-closure-with-same-number", "title": "Function that takes variable number of typed args and a closure with same number of typed args?", "body": "<p>I'd like to make a function that takes a variable number of arguments of different types, and a closure, and call the closure with the same number of arguments, each corresponding to a type in the original argument list:</p>\n\n<pre><code>fun &lt;A, B, ...&gt;mergeWhenValid(\n    arg1: Either&lt;Problem, A&gt;,\n    arg2: Either&lt;Problem, B&gt;,\n    ...,\n    closure: (A, B, ...) -&gt; T\n): Either&lt;Problem, T&gt; {\n    // do stuff and call closure(a, b, ...)\n}\n</code></pre>\n\n<p>How might I accomplish this?</p>\n"}, {"tags": ["android", "kotlin", "android-recyclerview"], "comments": [{"owner": {"reputation": 2579, "user_id": 8533971, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/1410029569091812/picture?type=large", "display_name": "Aditya S.", "link": "https://stackoverflow.com/users/8533971/aditya-s"}, "edited": false, "score": 0, "creation_date": 1574825608, "post_id": 59062565, "comment_id": 104364228, "body": "Do you getting any warning log on click on toolbar?  Please check first is your toolbar onClick is working or not. Because you are accessing onClick on toolbar with null check may it is possible that toolbar is NULL!"}, {"owner": {"reputation": 129, "user_id": 10168482, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OvJ5Z8Ih90k/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oKAjotpuE9kPizy0X8JOntve0bfQ/mo/photo.jpg?sz=128", "display_name": "Nancy", "link": "https://stackoverflow.com/users/10168482/nancy"}, "reply_to_user": {"reputation": 2579, "user_id": 8533971, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/1410029569091812/picture?type=large", "display_name": "Aditya S.", "link": "https://stackoverflow.com/users/8533971/aditya-s"}, "edited": false, "score": 0, "creation_date": 1574825849, "post_id": 59062565, "comment_id": 104364282, "body": "tool bars click is working well no errors, I even added the break points"}, {"owner": {"reputation": 1203, "user_id": 6048312, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AyAKcG7odlw/AAAAAAAAAAI/AAAAAAAAAYw/LlW0MgtDmgM/photo.jpg?sz=128", "display_name": "Rajat Beck", "link": "https://stackoverflow.com/users/6048312/rajat-beck"}, "edited": false, "score": 0, "creation_date": 1574833824, "post_id": 59062565, "comment_id": 104366307, "body": "try adding a delay to your scroll to position code snipet ."}], "answers": [{"tags": [], "owner": {"reputation": 53, "user_id": 2580882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CWYer.jpg?s=128&g=1", "display_name": "Deep Sheth", "link": "https://stackoverflow.com/users/2580882/deep-sheth"}, "is_accepted": false, "score": 0, "last_activity_date": 1574826166, "creation_date": 1574826166, "answer_id": 59062667, "question_id": 59062565, "link": "https://stackoverflow.com/questions/59062565/unable-to-scroll-the-recyclerview-to-the-top-with-smoothscrolltoposition0/59062667#59062667", "title": "Unable to scroll the recyclerView to the top with smoothScrollToPosition(0)", "body": "<p>Remove </p>\n\n<pre><code>recyclerView.smoothScrollToPosition(0)\n</code></pre>\n\n<p>and replace it in the onClick of the toolbar with</p>\n\n<pre><code>myLayoutManager.scrollToPositionWithOffset(0, 0);\n</code></pre>\n\n<p>I hope it works fine.</p>\n"}, {"comments": [{"owner": {"reputation": 1019, "user_id": 10835478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u6IDX.jpg?s=128&g=1", "display_name": "Nice umang", "link": "https://stackoverflow.com/users/10835478/nice-umang"}, "edited": false, "score": 0, "creation_date": 1574830931, "post_id": 59063280, "comment_id": 104365433, "body": "You can apply my java code into kotlin as your requirement."}], "tags": [], "owner": {"reputation": 1019, "user_id": 10835478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u6IDX.jpg?s=128&g=1", "display_name": "Nice umang", "link": "https://stackoverflow.com/users/10835478/nice-umang"}, "is_accepted": false, "score": 0, "last_activity_date": 1574830868, "creation_date": 1574830868, "answer_id": 59063280, "question_id": 59062565, "link": "https://stackoverflow.com/questions/59062565/unable-to-scroll-the-recyclerview-to-the-top-with-smoothscrolltoposition0/59063280#59063280", "title": "Unable to scroll the recyclerView to the top with smoothScrollToPosition(0)", "body": "<p>Add below code into your activity</p>\n\n<pre><code>RecyclerView.SmoothScroller smoothScroller = new LinearSmoothScroller(context) {\n  @Override protected int getVerticalSnapPreference() {\n    return LinearSmoothScroller.SNAP_TO_START;\n  }\n};\n</code></pre>\n\n<p>Now you set the position where you want to scroll to:</p>\n\n<pre><code>smoothScroller.setTargetPosition(position);\n</code></pre>\n\n<p>and pass that SmoothScroller to the LayoutManager:</p>\n\n<pre><code>myLayoutManager.startSmoothScroll(smoothScroller);\n</code></pre>\n"}], "owner": {"reputation": 129, "user_id": 10168482, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OvJ5Z8Ih90k/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oKAjotpuE9kPizy0X8JOntve0bfQ/mo/photo.jpg?sz=128", "display_name": "Nancy", "link": "https://stackoverflow.com/users/10168482/nancy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1574830868, "creation_date": 1574825388, "question_id": 59062565, "link": "https://stackoverflow.com/questions/59062565/unable-to-scroll-the-recyclerview-to-the-top-with-smoothscrolltoposition0", "title": "Unable to scroll the recyclerView to the top with smoothScrollToPosition(0)", "body": "<p>I'm having a problem with scrolling the RecyclerView to the top when I tap the toolbar. What I want to do is to make it look like IOS. When I tap the toolbar I simply scrolls up to the top. I implemented the following code but doesn't work. the setSafeClickListener gets called but the smoothScrollToPosition is not doing anything. I would love to have some sample or hints from you! </p>\n\n<pre><code>private fun myRecyclerView(myListAdapter: MyRecyclerAdapter) {\n        recyclerView = binding.myRecycleView\n        recyclerView.isMotionEventSplittingEnabled = false\n        // myLayoutManager extends the LinearLayoutManager\n        recyclerView.layoutManager = myLayoutManager(context!!)\n        recyclerView.adapter = couponListAdapter\n        val appCompat = (activity as AppCompatActivity)\n        val toolbar = appCompat.my_tool as androidx.appcompat.widget.Toolbar\n        toolbar?.setSafeOnClickListener {\n            recyclerView.smoothScrollToPosition(0)\n        }\n    }\n</code></pre>\n"}, {"tags": ["android", "gradle", "kotlin"], "comments": [{"owner": {"reputation": 2579, "user_id": 8533971, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/1410029569091812/picture?type=large", "display_name": "Aditya S.", "link": "https://stackoverflow.com/users/8533971/aditya-s"}, "edited": false, "score": 0, "creation_date": 1574825858, "post_id": 59062538, "comment_id": 104364287, "body": "You need to write your <code>apply plugin</code> line at the top of your code."}, {"owner": {"reputation": 31, "user_id": 8577892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2106fd37d05692ff63a492a0a4a0c002?s=128&d=identicon&r=PG&f=1", "display_name": "Zidd", "link": "https://stackoverflow.com/users/8577892/zidd"}, "reply_to_user": {"reputation": 2579, "user_id": 8533971, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/1410029569091812/picture?type=large", "display_name": "Aditya S.", "link": "https://stackoverflow.com/users/8533971/aditya-s"}, "edited": false, "score": 0, "creation_date": 1574912044, "post_id": 59062538, "comment_id": 104399406, "body": "just write manually? can&#39;t auto when generate from template?"}, {"owner": {"reputation": 130, "user_id": 7807339, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LTUqPGipPIM/AAAAAAAAAAI/AAAAAAAAAaI/cbb39ksZuO8/photo.jpg?sz=128", "display_name": "Junaid Bashir", "link": "https://stackoverflow.com/users/7807339/junaid-bashir"}, "edited": false, "score": 0, "creation_date": 1600776217, "post_id": 59062538, "comment_id": 113188775, "body": "merge tag only work for xml files while creating android templates"}], "owner": {"reputation": 31, "user_id": 8577892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2106fd37d05692ff63a492a0a4a0c002?s=128&d=identicon&r=PG&f=1", "display_name": "Zidd", "link": "https://stackoverflow.com/users/8577892/zidd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1574825171, "creation_date": 1574825171, "question_id": 59062538, "link": "https://stackoverflow.com/questions/59062538/android-template-merge-build-gradle-apply-plugin-added-at-the-botttom", "title": "android template merge build.gradle: \u201capply plugin\u201d added at the botttom", "body": "<p>I created android template for android studio, \nFocus on merge the <strong>build.gradle (app)</strong> file, I need adding: <code>apply plugin: 'kotlin-kapt'</code> to project file at the top.</p>\n\n<p>This is my <strong>recipe.xml.ftl</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;recipe&gt;\n    &lt;merge from=\"build.gradle.ftl\" to=\"${escapeXmlAttribute(projectOut)}/build.gradle\" /&gt;\n&lt;/recipe&gt;\n</code></pre>\n\n<p>This is my <strong>build.gradle.ftl</strong></p>\n\n<pre><code>apply plugin: 'kotlin-kapt'\n\ndependencies {       \n}\n</code></pre>\n\n<p>But after add new code template, my <strong>build.gradle (app)</strong> file become like this:</p>\n\n<pre><code>apply plugin: 'com.android.application'\n\napply plugin: 'kotlin-android'\n\napply plugin: 'kotlin-android-extensions'\n\nandroid {\n    compileSdkVersion 29\n    buildToolsVersion \"29.0.2\"\n    defaultConfig {\n        applicationId \"com.my.full\"\n        minSdkVersion 21\n        targetSdkVersion 29\n        versionCode 1\n        versionName \"1.0\"\n        testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n}\n\ndependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\n    implementation 'androidx.appcompat:appcompat:1.1.0'\n    implementation 'androidx.core:core-ktx:1.1.0'\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.1'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.2.0'\n}\n\napply plugin: 'kotlin-kapt'\n</code></pre>\n\n<p>with <code>apply plugin: 'kotlin-kapt'</code> successfully added at the bottom file.</p>\n\n<p><strong>How make it added at the top?</strong></p>\n"}, {"tags": ["kotlin", "casting", "java-bytecode-asm", "byte-buddy"], "comments": [{"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1574825244, "post_id": 59062420, "comment_id": 104364143, "body": "I think you may want to go for something else other than inheritance. If all you want is for <code>Engine</code> to implement <code>ApiEngine</code>, then what is stopping you from doing this at compile time?"}, {"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1574825415, "post_id": 59062420, "comment_id": 104364180, "body": "Assuming you don&#39;t have access to <code>ApiEngine</code> before compile time, and you somehow manage to change the bytecode of the <code>Engine</code> instance to also behave as <code>ApiEngine</code>, then there is also the problem of knowing what methods <code>ApiEngine</code> have in order that <code>Engine</code> should also provide definitions for those methods. Please add more details to your question"}, {"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1574825841, "post_id": 59062420, "comment_id": 104364280, "body": "If it is the case that these external plugins know about this interface, then maybe the best way to go about this is to use dependency injection to inject an instance of <code>ApiEngine</code> into <code>Engine</code>. If you really want your <code>Engine</code> to behave as <code>ApiEngine</code>, then in addition to DI, you can use Kotlin&#39;s builtin delegate pattern to achieve this. Groovy is also another language that supports this kind of delegation"}, {"owner": {"reputation": 1, "user_id": 12442450, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9B9d5yxCHWE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rck0A63E_wxDRMjWCpo6MlDYGYIKg/photo.jpg?sz=128", "display_name": "Kyle Kyle", "link": "https://stackoverflow.com/users/12442450/kyle-kyle"}, "reply_to_user": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1574827079, "post_id": 59062420, "comment_id": 104364538, "body": "smac89 Do you have any info on this. I have been using Koin for dependency injection an I know that it has the bind feature. Reguarding the delegation pattern in kotlin, I have look at this before but could never find any information about how to do this.  Basically, if I have <code>ApiEngine</code> interface in its own separate module from <code>Engine</code>, I dont want to have to implement the api module into the engine. I want them to be separate."}, {"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1574828019, "post_id": 59062420, "comment_id": 104364745, "body": "What I was suggesting was this: <code>class Engine (val apiEngine: ApiEngine): ApiEngine by apiEngine</code>, and this means that <code>Engine</code> will implement <code>ApiEgine</code>, but because of delegation, it will already have all the properties of <code>ApiEngine</code>. I&#39;m not sure if this is what you want because your last comment says you don&#39;t wnat to implement the api module, but your question was asking how to also cast <code>Engine</code> to <code>ApiEngine</code>. It seems to me that if you want to be able to cast one to the other, you need inheritance for that to work and I&#39;m not sure what magic bytebuddy will provide to avoid this"}], "answers": [{"tags": [], "owner": {"reputation": 37971, "user_id": 1237575, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/bc96521f79789d75fa63cfa5c2758765?s=128&d=identicon&r=PG", "display_name": "Rafael Winterhalter", "link": "https://stackoverflow.com/users/1237575/rafael-winterhalter"}, "is_accepted": false, "score": 0, "last_activity_date": 1574970194, "creation_date": 1574970194, "answer_id": 59095358, "question_id": 59062420, "link": "https://stackoverflow.com/questions/59062420/is-there-a-way-to-dynamically-implement-api-interface-classes-in-kotlin-with-byt/59095358#59095358", "title": "Is there a way to dynamically implement API interface classes in kotlin with bytebuddy? (Mixins pattern)", "body": "<p>This is very much possible. You can for example integrate Byte Buddy as a build tool where you generate interfaces upon discovery. Simply implement the <code>Plugin</code> interface and match types based on your annotation being present.</p>\n\n<p>As a next step, you would need to instrument those types to implement an additional interface using the <code>DynamicType.Builder</code> DSL that Byte Buddy provides you. If your methods always match their signature, there is nothing more to be done since Byte Buddy automatically detects those overrides. If the method signatures can vary, you would need to implement the interface methods using <code>MethodCall</code> to implement a delegation to the actual implementation.</p>\n"}], "owner": {"reputation": 1, "user_id": 12442450, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9B9d5yxCHWE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rck0A63E_wxDRMjWCpo6MlDYGYIKg/photo.jpg?sz=128", "display_name": "Kyle Kyle", "link": "https://stackoverflow.com/users/12442450/kyle-kyle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 250, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574970194, "creation_date": 1574824003, "last_edit_date": 1574828272, "question_id": 59062420, "link": "https://stackoverflow.com/questions/59062420/is-there-a-way-to-dynamically-implement-api-interface-classes-in-kotlin-with-byt", "title": "Is there a way to dynamically implement API interface classes in kotlin with bytebuddy? (Mixins pattern)", "body": "<p>Let me summerize what I am trying to achieve. Basically I want a way to have a set of interfaces which server an an api that external plugins use to interact with the engine.</p>\n\n<p>Here is how I currently have things setup.</p>\n\n<pre><code>class Engine : ApiEngine {\n\n    override fun start() {\n        println(\"Starting Engine\")\n    }\n\n    override fun stop() {\n        println(\"Stopping Engine.\")\n    }\n}\n</code></pre>\n\n<pre><code>interface ApiEngine {\n\n    fun start()\n\n    fun stop()\n\n}\n</code></pre>\n\n<p>This is cumbersome and I have seen some other solutions using ASM and injecting the interface dynamically into the \"Engine\" class. I have seen something like this in another source but never could fully figure out how to do.</p>\n\n<pre><code>@Implements(\"ApiEngine\")\nclass Engine {\n\n    @Export(\"start\")\n    fun start() {\n        println(\"Starting Engine\")\n    }\n\n    @Export(\"stop\")\n    fun stop() {\n        println(\"Stopping Engine.\")\n    }\n}\n</code></pre>\n\n<pre><code>interface ApiEngine {\n\n    @Import(\"start\")\n    fun start()\n\n    @Import(\"stop\")\n    fun stop()\n\n}\n</code></pre>\n\n<p>My question is, in ByteBuddy, is it possible to effively make <code>Engine</code> implement <code>ApiEngine</code> so that it an instance of Engine() can be cast to ApiEngine for API usage?</p>\n"}, {"tags": ["android", "kotlin", "android-biometric-prompt", "android-biometric"], "comments": [{"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1574847868, "post_id": 59062218, "comment_id": 104372764, "body": "So which logs <b>do</b> you get?"}, {"owner": {"reputation": 81, "user_id": 10727918, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Y3vJZoNm9IQ/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-ho5uOGbRdkxQimsU7yu44CA8WW1w/mo/photo.jpg?sz=128", "display_name": "\ud0c0\ud130\ud130", "link": "https://stackoverflow.com/users/10727918/%ed%83%80%ed%84%b0%ed%84%b0"}, "reply_to_user": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1574848901, "post_id": 59062218, "comment_id": 104373418, "body": "After completing fingerprint recognition, I would like to add functions. But after recognizing the fingerprint, I tried to print Log.i, but failed."}, {"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1574849100, "post_id": 59062218, "comment_id": 104373546, "body": "Right. There are some logs you aren&#39;t getting for some reason. But I was asking which logs you <b>are</b> getting."}, {"owner": {"reputation": 81, "user_id": 10727918, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Y3vJZoNm9IQ/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-ho5uOGbRdkxQimsU7yu44CA8WW1w/mo/photo.jpg?sz=128", "display_name": "\ud0c0\ud130\ud130", "link": "https://stackoverflow.com/users/10727918/%ed%83%80%ed%84%b0%ed%84%b0"}, "reply_to_user": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1574850995, "post_id": 59062218, "comment_id": 104374677, "body": "I&#39;m sorry. I didn&#39;t understand English because I lacked it. Can you tell me if the log you are talking to is the log that I am trying to output or the log that is output to android studio Logs?"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1574852019, "post_id": 59062218, "comment_id": 104375252, "body": "<i>&quot;File does not exits.&quot;</i> &lt;- Is this a literal copy/paste, or did you type in the logs by hand? &quot;exist&quot; is misspelled."}, {"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1574852031, "post_id": 59062218, "comment_id": 104375259, "body": "The logcat output you&#39;ve posted doesn&#39;t seem to include that <code>&quot;o&quot;</code> log from the beginning of <code>showBiometricPrompt</code>. Are you sure you haven&#39;t filtered out logs from your app or something?"}, {"owner": {"reputation": 81, "user_id": 10727918, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Y3vJZoNm9IQ/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-ho5uOGbRdkxQimsU7yu44CA8WW1w/mo/photo.jpg?sz=128", "display_name": "\ud0c0\ud130\ud130", "link": "https://stackoverflow.com/users/10727918/%ed%83%80%ed%84%b0%ed%84%b0"}, "edited": false, "score": 0, "creation_date": 1574852628, "post_id": 59062218, "comment_id": 104375594, "body": "Copying and pasting as provided. @ tripleee"}, {"owner": {"reputation": 81, "user_id": 10727918, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Y3vJZoNm9IQ/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-ho5uOGbRdkxQimsU7yu44CA8WW1w/mo/photo.jpg?sz=128", "display_name": "\ud0c0\ud130\ud130", "link": "https://stackoverflow.com/users/10727918/%ed%83%80%ed%84%b0%ed%84%b0"}, "reply_to_user": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1574852917, "post_id": 59062218, "comment_id": 104375753, "body": "Does the &quot;o&quot; is Log.i(&quot;finger&quot;, &quot;o&quot;)?? you mean the Log on this? That&#39;s what I printed out for the test. That&#39;s an output, but onauthenicationError or onauthenicationSucceeded and... OnAuthenicationFailed, Toast or Logs that are output to the next are not printed  @Michael"}, {"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1574853402, "post_id": 59062218, "comment_id": 104376044, "body": "Yes, that&#39;s the log I mean. I don&#39;t see it in the logcat output you&#39;ve posted. By the way, your <code>onAuthenticationSucceeded</code> seems to expect to get a <code>CryptoObject</code> from the result, but you&#39;re not passing any <code>CryptoObject</code> to <code>authenticate</code>."}, {"owner": {"reputation": 81, "user_id": 10727918, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Y3vJZoNm9IQ/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-ho5uOGbRdkxQimsU7yu44CA8WW1w/mo/photo.jpg?sz=128", "display_name": "\ud0c0\ud130\ud130", "link": "https://stackoverflow.com/users/10727918/%ed%83%80%ed%84%b0%ed%84%b0"}, "edited": false, "score": 0, "creation_date": 1574860912, "post_id": 59062218, "comment_id": 104380230, "body": "Then can you tell me what to do if I want to add a function after I succeed in fingerprint authentication?    I understand that if onAuthenicationSucceeded is successful, it will write down the next function. Is that correct? @ Michael"}], "answers": [{"comments": [{"owner": {"reputation": 768, "user_id": 11798929, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QDnuo.jpg?s=128&g=1", "display_name": "Isai Damier", "link": "https://stackoverflow.com/users/11798929/isai-damier"}, "edited": false, "score": 0, "creation_date": 1574875064, "post_id": 59075379, "comment_id": 104388209, "body": "Disclaimer: I work on Biometrics at Google and I wrote both blog posts."}, {"owner": {"reputation": 768, "user_id": 11798929, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QDnuo.jpg?s=128&g=1", "display_name": "Isai Damier", "link": "https://stackoverflow.com/users/11798929/isai-damier"}, "edited": false, "score": 0, "creation_date": 1574876039, "post_id": 59075379, "comment_id": 104388665, "body": "Also, I&#39;m available to answer any follow up questions"}, {"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1574934197, "post_id": 59075379, "comment_id": 104407278, "body": "My somewhat unrelated follow-up is that I hope that Google will consider addressing <a href=\"https://issuetracker.google.com/issues/111315641\" rel=\"nofollow noreferrer\">what I consider to be an oversight in the biometric API</a>."}, {"owner": {"reputation": 81, "user_id": 10727918, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Y3vJZoNm9IQ/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-ho5uOGbRdkxQimsU7yu44CA8WW1w/mo/photo.jpg?sz=128", "display_name": "\ud0c0\ud130\ud130", "link": "https://stackoverflow.com/users/10727918/%ed%83%80%ed%84%b0%ed%84%b0"}, "edited": false, "score": 0, "creation_date": 1574946102, "post_id": 59075379, "comment_id": 104413731, "body": "I&#39;m very grateful to those who helped me.I solved the problem. Thankyou. @ Isai Damier @ Michael @ tripleee"}, {"owner": {"reputation": 768, "user_id": 11798929, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QDnuo.jpg?s=128&g=1", "display_name": "Isai Damier", "link": "https://stackoverflow.com/users/11798929/isai-damier"}, "edited": false, "score": 0, "creation_date": 1576693232, "post_id": 59075379, "comment_id": 104985095, "body": "if this answer directed you to solve your problem, please mark it as accepted so others can find it more easily."}, {"owner": {"reputation": 4090, "user_id": 8281994, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/iPGSu.png?s=128&g=1", "display_name": "Florian Walther", "link": "https://stackoverflow.com/users/8281994/florian-walther"}, "edited": false, "score": 1, "creation_date": 1577828614, "post_id": 59075379, "comment_id": 105266287, "body": "But even if <code>canAuthenticate()</code> doesn&#39;t return <code>BiometricManager.BIOMETRIC_SUCCESS</code>, it&#39;s still possible that it can take a password input if you set <code>setDeviceCredentialAllowed(true)</code>. Isn&#39;t it therefore wrong to wrap the prompt into this <code>BIOMETRIC_SUCCESS</code> check?"}, {"owner": {"reputation": 768, "user_id": 11798929, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QDnuo.jpg?s=128&g=1", "display_name": "Isai Damier", "link": "https://stackoverflow.com/users/11798929/isai-damier"}, "edited": false, "score": 0, "creation_date": 1577990991, "post_id": 59075379, "comment_id": 105304763, "body": "Thanks for the question!  Password here can mean device password or account password. A device password is a password that unlocks the whole device. An account password is a password specific to your app: e.g. a user&#39;s bank account password for a banking app.  This present implementation allows the user to login with biometrics or their app specific account password. <code>setDeviceCredentialAllowed()</code>, on the other hand, doesn&#39;t allow the user to enter the account password but rather to rely on the device credential for authentication -- which can be device password, PIN, or pattern."}, {"owner": {"reputation": 768, "user_id": 11798929, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QDnuo.jpg?s=128&g=1", "display_name": "Isai Damier", "link": "https://stackoverflow.com/users/11798929/isai-damier"}, "edited": false, "score": 0, "creation_date": 1577991001, "post_id": 59075379, "comment_id": 105304769, "body": "Also recall that <code>setDeviceCredentialAllowed()</code> is not compatible with <code>CryptoObject</code> or with <code>setNegativeButtonText()</code>."}, {"owner": {"reputation": 104, "user_id": 12971639, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GjEtmAq_vyg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfhVsxIq2QJU4PLG7IvMQQZ7DqGjQ/photo.jpg?sz=128", "display_name": "sandeep dhami", "link": "https://stackoverflow.com/users/12971639/sandeep-dhami"}, "edited": false, "score": 0, "creation_date": 1589362890, "post_id": 59075379, "comment_id": 109261042, "body": "@IsaiDamier I think we need to add <code>createBiometricPrompt().cancelAuthentication()</code> when authentication failed .Else next time user won&#39;t be able to open prompt."}, {"owner": {"reputation": 635, "user_id": 2410419, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/d4b24771c21acb17542499ce0a5d6a72?s=128&d=identicon&r=PG&f=1", "display_name": "Ritzor", "link": "https://stackoverflow.com/users/2410419/ritzor"}, "edited": false, "score": 0, "creation_date": 1593078605, "post_id": 59075379, "comment_id": 110655903, "body": "how to validate cryptoobject in onAuthenticationSucceeded?  to avoid any security attack?"}], "tags": [], "owner": {"reputation": 768, "user_id": 11798929, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QDnuo.jpg?s=128&g=1", "display_name": "Isai Damier", "link": "https://stackoverflow.com/users/11798929/isai-damier"}, "is_accepted": false, "score": 0, "last_activity_date": 1574875974, "last_edit_date": 1574875974, "creation_date": 1574874993, "answer_id": 59075379, "question_id": 59062218, "link": "https://stackoverflow.com/questions/59062218/android-biometricprompt-on-authenicationsucceeded-does-not-work/59075379#59075379", "title": "Android BiometricPrompt on AuthenicationSucceeded does not work", "body": "<p>Try following the instructions in <a href=\"https://android-developers.googleblog.com/2019/10/one-biometric-api-over-all-android.html\" rel=\"nofollow noreferrer\">this blog post</a>. It provides step by step instructions on how to implement BiometricPrompt. There is also more details in <a href=\"https://medium.com/@isaidamier/migrating-from-fingerprintmanager-to-biometricprompt-4bc5f570dccd\" rel=\"nofollow noreferrer\">this blog post</a>.</p>\n\n<p><strong>Here is a summary</strong>:</p>\n\n<p>1- Add the Gradle dependency to your app module (<a href=\"https://developer.android.com/jetpack/androidx/releases/biometric\" rel=\"nofollow noreferrer\">latest release</a>)</p>\n\n<pre><code> def biometric_version= '1.0.0'\n implementation \"androidx.biometric:biometric:$biometric_version\"\n</code></pre>\n\n<p>2- Create an instance of BiometricPrompt. You should get this value inside <code>onCreate()</code> of your activity or <code>onCreateView()</code> of your Fragment</p>\n\n<pre><code>private fun createBiometricPrompt(): BiometricPrompt {\n   val executor = ContextCompat.getmainExecutor(context)\n\n   val callback = object: BiometricPrompt.AuthenticationCallback() {\n       override fun onAuthenticationError(errorCode: Int, errString: CharSequence) {\n           super.onAuthenticationError(errorCode, errString)\n           showMessage(\"$errorCode :: $errString\")\n       }\n\n       override fun onAuthenticationFailed() {\n           super.onAuthenticationFailed()\n           showMessage(\"Authentication failed for an unknown reason\")\n       }\n\n       override fun onAuthenticationSucceeded(result: BiometricPrompt.AuthenticationResult) {\n           super.onAuthenticationSucceeded(result)\n           showMessage(\"Authentication was successful\")\n       }\n   }\n\n   val biometricPrompt = BiometricPrompt(context, executor, callback)\n   return biometricPrompt\n}\n</code></pre>\n\n<p>3- Build a PromptInfo object</p>\n\n<pre><code>private fun createPromptInfo(): BiometricPrompt.PromptInfo {\n   val promptInfo = BiometricPrompt.PromptInfo.Builder()\n       .setTitle(\"My App's Authentication\")\n       .setSubtitle(\"Please login to get access\")\n       .setDescription(\"My App is using Android biometric authentication\")\n              .setDeviceCredentialAllowed(true)\n       .build()\n   return promptInfo\n}\n</code></pre>\n\n<p>4- Ask the user to authenticate</p>\n\n<pre><code>val canAuthenticate = biometricManager.canAuthenticate()\nif (canAuthenticate == BiometricManager.BIOMETRIC_SUCCESS) {\n\n   biometricPrompt.authenticate(createPromptInfo())\n} else {\n   Log.d(TAG, \"could not authenticate because: $canAuthenticate\")\n}\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 10727918, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Y3vJZoNm9IQ/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-ho5uOGbRdkxQimsU7yu44CA8WW1w/mo/photo.jpg?sz=128", "display_name": "\ud0c0\ud130\ud130", "link": "https://stackoverflow.com/users/10727918/%ed%83%80%ed%84%b0%ed%84%b0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2270, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1593067402, "creation_date": 1574822265, "last_edit_date": 1574854459, "question_id": 59062218, "link": "https://stackoverflow.com/questions/59062218/android-biometricprompt-on-authenicationsucceeded-does-not-work", "title": "Android BiometricPrompt on AuthenicationSucceeded does not work", "body": "<p>Android BiometricPrompt has completed fingerprint recognition, but onAuthenicationSucceeded does not work. </p>\n\n<p>And I used androidx </p>\n\n<p>Example: <code>Log.i(\"finger\", \"onAuthenticationSucceeded\")</code> is not output</p>\n\n<p>Copied this code: <a href=\"https://developer.android.com/training/sign-in/biometric-auth#kotlin\" rel=\"nofollow noreferrer\">https://developer.android.com/training/sign-in/biometric-auth#kotlin</a></p>\n\n<p>MainActivity:</p>\n\n<pre><code>private fun showBiometricPrompt() {\n    val promptInfo = BiometricPrompt.PromptInfo.Builder()\n        .setTitle(\"Biometric login for my app\")\n        .setSubtitle(\"Log in using your biometric credential\")\n        .setNegativeButtonText(\"Cancel\")\n        .build()\n    Log.i(\"finger\", \"o\")\n    val biometricPrompt = BiometricPrompt(this, executor,\n        object : BiometricPrompt.AuthenticationCallback() {\n            override fun onAuthenticationError(errorCode: Int,\n                                               errString: CharSequence) {\n                Log.i(\"finger\", \"onAuthenticationError\")\n                super.onAuthenticationError(errorCode, errString)\n                Toast.makeText(applicationContext,\n                    \"Authentication error: $errString\", Toast.LENGTH_SHORT)\n                    .show()\n            }\n\n            override fun onAuthenticationSucceeded(\n                result: BiometricPrompt.AuthenticationResult) {\n                super.onAuthenticationSucceeded(result)\n                Log.i(\"finger\", \"onAuthenticationSucceeded\")\n                val authenticatedCryptoObject: BiometricPrompt.CryptoObject? =\n                    result.getCryptoObject()\n                // User has verified the signature, cipher, or message\n                // authentication code (MAC) associated with the crypto object,\n                // so you can use it in your app's crypto-driven workflows.\n\n            }\n\n            override fun onAuthenticationFailed() {\n                Log.i(\"finger\", \"onAuthenticationFailed\")\n                super.onAuthenticationFailed()\n                Toast.makeText(applicationContext, \"Authentication failed\",\n                    Toast.LENGTH_SHORT)\n                    .show()\n            }\n        })\n\n    // Displays the \"log in\" prompt.\n    biometricPrompt.authenticate(promptInfo)\n    }\n}\n</code></pre>\n\n<p>Logs from the current android studio</p>\n\n<pre><code>2019-11-27 19:45:22.348 11633-11633/? I/e.myapplicatio: Late-enabling -Xcheck:jni\n2019-11-27 19:45:23.124 11633-11633/com.example.myapplication W/e.myapplicatio: JIT profile information will not be recorded: profile file does not exits.\n2019-11-27 19:45:23.127 11633-11633/com.example.myapplication I/chatty: uid=10263(com.example.myapplication) identical 10 lines\n2019-11-27 19:45:23.127 11633-11633/com.example.myapplication W/e.myapplicatio: JIT profile information will not be recorded: profile file does not exits.\n2019-11-27 19:45:23.197 11633-11633/com.example.myapplication I/InstantRun: starting instant run server: is main process\n2019-11-27 19:45:23.363 11633-11633/com.example.myapplication W/e.myapplicatio: Accessing hidden method Landroid/graphics/drawable/Drawable;-&gt;getOpticalInsets()Landroid/graphics/Insets; (light greylist, linking)\n2019-11-27 19:45:23.363 11633-11633/com.example.myapplication W/e.myapplicatio: Accessing hidden field Landroid/graphics/Insets;-&gt;left:I (light greylist, linking)\n2019-11-27 19:45:23.363 11633-11633/com.example.myapplication W/e.myapplicatio: Accessing hidden field Landroid/graphics/Insets;-&gt;right:I (light greylist, linking)\n2019-11-27 19:45:23.363 11633-11633/com.example.myapplication W/e.myapplicatio: Accessing hidden field Landroid/graphics/Insets;-&gt;top:I (light greylist, linking)\n2019-11-27 19:45:23.363 11633-11633/com.example.myapplication W/e.myapplicatio: Accessing hidden field Landroid/graphics/Insets;-&gt;bottom:I (light greylist, linking)\n2019-11-27 19:45:23.421 11633-11633/com.example.myapplication D/PhoneWindow: windowLightStatusBar : false, disable View.SYSTEM_UI_FLAG_LIGHT_STATUS_BAR\n2019-11-27 19:45:23.489 11633-11633/com.example.myapplication W/e.myapplicatio: Accessing hidden method Landroid/view/View;-&gt;getAccessibilityDelegate()Landroid/view/View$AccessibilityDelegate; (light greylist, linking)\n2019-11-27 19:45:23.593 11633-11633/com.example.myapplication W/e.myapplicatio: Accessing hidden method Landroid/view/View;-&gt;computeFitSystemWindows(Landroid/graphics/Rect;Landroid/graphics/Rect;)Z (light greylist, reflection)\n2019-11-27 19:45:23.594 11633-11633/com.example.myapplication W/e.myapplicatio: Accessing hidden method Landroid/view/ViewGroup;-&gt;makeOptionalFitsSystemWindows()V (light greylist, reflection)\n2019-11-27 19:45:23.610 11633-11633/com.example.myapplication W/e.myapplicatio: Accessing hidden method Landroid/widget/TextView;-&gt;getTextDirectionHeuristic()Landroid/text/TextDirectionHeuristic; (light greylist, linking)\n2019-11-27 19:45:23.726 11633-11633/com.example.myapplication I/App\u00a0can\u00a0authenticate\u00a0using\u00a0biometrics.: OK\n2019-11-27 19:45:23.760 11633-11633/com.example.myapplication D/OpenGLRenderer: Skia GL Pipeline\n2019-11-27 19:45:23.835 11633-11633/com.example.myapplication I/TouchFilterInputStageHelper: [needTouchEventFilter] Displayid : 0\n2019-11-27 19:45:23.841 11633-11633/com.example.myapplication D/BezellessGripSuppressionFilter: getdisplaysize, x : 1440 y : 2880\n2019-11-27 19:45:23.924 11633-11733/com.example.myapplication I/Adreno: QUALCOMM build                   : 6aca7ed, I9a84ac9597\n    Build Date                       : 08/23/19\n    OpenGL ES Shader Compiler Version: EV031.25.03.07\n    Local Branch                     : \n    Remote Branch                    : refs/tags/AU_LINUX_ANDROID_LA.UM.7.5.2.R1.09.00.00.538.032\n    Remote Branch                    : NONE\n    Reconstruct Branch               : NOTHING\n2019-11-27 19:45:23.924 11633-11733/com.example.myapplication I/Adreno: Build Config                     : S L 6.0.7 AArch64\n2019-11-27 19:45:23.924 11633-11733/com.example.myapplication D/vndksupport: Loading /vendor/lib64/hw/gralloc.msm8996.so from current namespace instead of sphal namespace.\n2019-11-27 19:45:23.938 11633-11733/com.example.myapplication I/Adreno: PFP: 0x005ff112, ME: 0x005ff066\n2019-11-27 19:45:23.980 11633-11733/com.example.myapplication I/ConfigStore: android::hardware::configstore::V1_0::ISurfaceFlingerConfigs::hasWideColorDisplay retrieved: 0\n2019-11-27 19:45:23.982 11633-11733/com.example.myapplication I/ConfigStore: android::hardware::configstore::V1_0::ISurfaceFlingerConfigs::hasHDRDisplay retrieved: 0\n2019-11-27 19:45:23.983 11633-11733/com.example.myapplication I/OpenGLRenderer: Initialized EGL, version 1.4\n2019-11-27 19:45:23.983 11633-11733/com.example.myapplication D/OpenGLRenderer: Swap behavior 2\n2019-11-27 19:45:24.008 11633-11733/com.example.myapplication D/vndksupport: Loading /vendor/lib64/hw/android.hardware.graphics.mapper@2.0-impl.so from current namespace instead of sphal namespace.\n2019-11-27 19:45:24.009 11633-11733/com.example.myapplication D/vndksupport: Loading /vendor/lib64/hw/gralloc.msm8996.so from current namespace instead of sphal namespace.\n2019-11-27 19:45:24.178 11633-11633/com.example.myapplication I/Timeline: Timeline: Activity_idle id: android.os.BinderProxy@64768ba time:68742526\n2019-11-27 19:45:26.690 11633-11633/com.example.myapplication I/ViewRootImpl: ViewRoot's Touch Event : ACTION_DOWN\n2019-11-27 19:45:26.761 11633-11633/com.example.myapplication I/ViewRootImpl: ViewRoot's Touch Event : ACTION_UP\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 3357, "user_id": 341998, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/sYT3i.jpg?s=128&g=1", "display_name": "Bracadabra", "link": "https://stackoverflow.com/users/341998/bracadabra"}, "is_accepted": false, "score": 4, "last_activity_date": 1574832654, "creation_date": 1574832654, "answer_id": 59063605, "question_id": 59062217, "link": "https://stackoverflow.com/questions/59062217/setcontentview-from-list-kotlin/59063605#59063605", "title": "setContentView from List (Kotlin)", "body": "<p>You can put your layout id in extras:</p>\n\n<pre><code>val intent = Intent(this@MainActivity, FoodDetailView::class.java)\nintent.putExtra(\"EXTRA_LAYOUT\", food.layout)\nstartActivity(intent)\n</code></pre>\n\n<p>And then get it back in you target activity:</p>\n\n<pre><code>val layoutId = intent.getIntExtra(\"EXTRA_LAYOUT\", 0)\nif (layoutId &gt; 0) {\n    setContentView(layoutId)\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 12356448, "user_type": "registered", "profile_image": "https://graph.facebook.com/10218640206187838/picture?type=large", "display_name": "Marlon Gonzalez", "link": "https://stackoverflow.com/users/12356448/marlon-gonzalez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1574832654, "creation_date": 1574822248, "last_edit_date": 1574832208, "question_id": 59062217, "link": "https://stackoverflow.com/questions/59062217/setcontentview-from-list-kotlin", "title": "setContentView from List (Kotlin)", "body": "<p>Hello I have a list of foods that also contains the layout I want inflate when it is clicked.</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        setSupportActionBar(toolbar)\n\n        val food = listOf(\n            Foods(\"Creme Brulee\", \"A rich egg dessert with torched sugar on top.\", \"French\", R.drawable.cremebrulee1, R.layout.food_cremebrulee),\n            Foods(\"Hamburger\", \"Something something\", \"Spanish\", R.drawable.person2, R.layout.food_hamburger),\n            Foods(\"Grilled Cheese\", \"Something something\", \"Chinese\", R.drawable.person3, R.layout.food_hamburger),\n            Foods(\"French Onion Soup\", \"Something something\", \"French\", R.drawable.person4, R.layout.food_hamburger),\n            Foods(\"Salmon\", \"Something something\", \"German\", R.drawable.person2, R.layout.food_hamburger),\n            Foods(\"Fish Tacos\", \"Something something\", \"Dutch\", R.drawable.person3, R.layout.food_hamburger),\n            Foods(\"Vegetable Sushi\", \"Something something\", \"Asian\", R.drawable.person4, R.layout.food_hamburger),\n            Foods(\"Fried Egg\", \"Something something\", \"Thai\", R.drawable.person1, R.layout.food_hamburger),\n            Foods(\"Vinagrette\", \"Thai style vinagrette with peanut butter\", \"Indian\", R.drawable.person2, R.layout.food_hamburger)\n        )\n\n\n        myCustomFood.apply {\n            layoutManager = LinearLayoutManager(this@MainActivity)\n            adapter = FoodAdapter(food) {\n                d(\"marlon\", \"hi from MainActivity!\")\n                //startActivity(Intent(this@MainActivity, FoodDetailView::class.java))\n                startActivity(Intent(this@MainActivity, FoodDetailView::class.java))\n            }\n        }\n    }\n}\n</code></pre>\n\n<pre><code>class FoodDetailView : AppCompatActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView() &lt;--- What do I put here in order to grab the appropriate R.layout when a food on the list is clicked?\n    }\n}\n</code></pre>\n\n<p>As you can see the first selection has R.layout.cremebrulee1 and the others are R.layout.hamburger, what do I put in setContentView in order to grab the R.layout from the list?</p>\n"}, {"tags": ["android", "firebase", "kotlin", "firebase-realtime-database"], "comments": [{"owner": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "edited": false, "score": 0, "creation_date": 1574820617, "post_id": 59061909, "comment_id": 104363193, "body": "Please only use the <code>android-studio</code> tag for questions about the Android Studio IDE itself. For questions about Android programming in general, use the <code>android</code> tag."}], "answers": [{"comments": [{"owner": {"reputation": 42, "user_id": 12340963, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mByhhPPT1ag60xCRnTtSYU0rNiXYJC-6DApjmosyg=k-s128", "display_name": "ElDeivis", "link": "https://stackoverflow.com/users/12340963/eldeivis"}, "edited": false, "score": 0, "creation_date": 1574902837, "post_id": 59062050, "comment_id": 104397698, "body": "this works but is has an issue that at the end it retrieves null because the orher push does not have score value"}], "tags": [], "owner": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "is_accepted": false, "score": 0, "last_activity_date": 1574820781, "creation_date": 1574820781, "answer_id": 59062050, "question_id": 59061909, "link": "https://stackoverflow.com/questions/59061909/getting-firebasedatabse-value/59062050#59062050", "title": "Getting FirebaseDatabse value", "body": "<p>Your <code>DataSnapshot</code> can have multiple children, so you need to loop over <code>p0.children</code> to get each individual child node.</p>\n\n<pre><code>myRef?.child(mAuth?.currentUser!!.uid)?.addValueEventListener(object: ValueEventListener {\n        override fun onDataChange(snapshot: DataSnapshot) {\n            snapshot?.children?.forEach {\n                val score = it.child(\"score\")\n                Toast.makeText((context as AppCompatActivity).applicationContext, score.toString(), Toast.LENGTH_SHORT).show()\n            }\n        }\n</code></pre>\n\n<p>The <code>it</code> used in here is a reference to the current child in the <code>forEach</code> loop.</p>\n"}, {"comments": [{"owner": {"reputation": 42, "user_id": 12340963, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mByhhPPT1ag60xCRnTtSYU0rNiXYJC-6DApjmosyg=k-s128", "display_name": "ElDeivis", "link": "https://stackoverflow.com/users/12340963/eldeivis"}, "edited": false, "score": 0, "creation_date": 1574900211, "post_id": 59062198, "comment_id": 104397205, "body": "I wonder why do you comment the val score = p0.child(&quot;score&quot;)?"}, {"owner": {"reputation": 155, "user_id": 8415366, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4S5SVfABKzo/AAAAAAAAAAI/AAAAAAAAALk/-xa7eRCo-7Q/photo.jpg?sz=128", "display_name": "Prabudda Fernando", "link": "https://stackoverflow.com/users/8415366/prabudda-fernando"}, "reply_to_user": {"reputation": 42, "user_id": 12340963, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mByhhPPT1ag60xCRnTtSYU0rNiXYJC-6DApjmosyg=k-s128", "display_name": "ElDeivis", "link": "https://stackoverflow.com/users/12340963/eldeivis"}, "edited": false, "score": 0, "creation_date": 1574904477, "post_id": 59062198, "comment_id": 104397979, "body": "I forgot to remove that comment. its useless."}], "tags": [], "owner": {"reputation": 155, "user_id": 8415366, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4S5SVfABKzo/AAAAAAAAAAI/AAAAAAAAALk/-xa7eRCo-7Q/photo.jpg?sz=128", "display_name": "Prabudda Fernando", "link": "https://stackoverflow.com/users/8415366/prabudda-fernando"}, "is_accepted": true, "score": 0, "last_activity_date": 1574826863, "last_edit_date": 1574826863, "creation_date": 1574822082, "answer_id": 59062198, "question_id": 59061909, "link": "https://stackoverflow.com/questions/59061909/getting-firebasedatabse-value/59062198#59062198", "title": "Getting FirebaseDatabse value", "body": "<p>here is my answer, this should be working.</p>\n\n<pre><code>myRef?.child(mAuth?.currentUser!!.uid)?.addValueEventListener(object: ValueEventListener {\n            override fun onDataChange(p0: DataSnapshot) {\n                //val score = p0.child(\"score\")\n                snapshot?.children?.forEach { // loop for nodes\n                val map = dataSnapshot.value as HashMap&lt;String, Any&gt;?\n                    if(map!!.containsKey(\"score\")){ // check weathrer score variable is contains\n                       var score = map[\"score\"]\n                       //break :- if you do not want any oporation \n                    }\n                    Toast.makeText((context as AppCompatActivity).applicationContext, score.toString(), Toast.LENGTH_SHORT).show()\n                    }\n                }\n\n            override fun onCancelled(p0: DatabaseError) {\n                Toast.makeText((context as AppCompatActivity).applicationContext, p0.message.toString(), Toast.LENGTH_SHORT).show()\n            }\n        })\n</code></pre>\n"}], "owner": {"reputation": 42, "user_id": 12340963, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mByhhPPT1ag60xCRnTtSYU0rNiXYJC-6DApjmosyg=k-s128", "display_name": "ElDeivis", "link": "https://stackoverflow.com/users/12340963/eldeivis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 59062198, "answer_count": 2, "score": 0, "last_activity_date": 1574905945, "creation_date": 1574819579, "last_edit_date": 1574905945, "question_id": 59061909, "link": "https://stackoverflow.com/questions/59061909/getting-firebasedatabse-value", "title": "Getting FirebaseDatabse value", "body": "<p>I am new at firebase and I do not know how to get the score value in the image below which is in a push and a auth id, I have been trying to solve this problem but the app just crashes, can someone tell me how to get the score value? please</p>\n\n<pre><code>    val view: View = inflater.inflate(R.layout.fragment_classes, container, false)\n\n    mAuth = FirebaseAuth.getInstance()\n    var myRef = database?.getReference(\"Users\")\n\n    myRef?.child(mAuth?.currentUser!!.uid)?.addValueEventListener(object: ValueEventListener {\n            override fun onDataChange(p0: DataSnapshot) {\n                val score = p0.child(\"score\")\n                Toast.makeText((context as AppCompatActivity).applicationContext, score.toString(), Toast.LENGTH_SHORT).show()\n            }\n\n            override fun onCancelled(p0: DatabaseError) {\n                Toast.makeText((context as AppCompatActivity).applicationContext, p0.message.toString(), Toast.LENGTH_SHORT).show()\n            }\n        })\n\n\n    return view\n</code></pre>\n"}, {"tags": ["android", "kotlin", "mvvm", "repository", "kotlin-coroutines"], "answers": [{"comments": [{"owner": {"reputation": 752, "user_id": 5371749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9zOVs.jpg?s=128&g=1", "display_name": "james04", "link": "https://stackoverflow.com/users/5371749/james04"}, "edited": false, "score": 1, "creation_date": 1574811921, "post_id": 59060942, "comment_id": 104361314, "body": "Hmm...ok. However i think thats a problem because if i call this from a ViewModel, and the ViewModel gets destroyed before this suspend function has finished, the above block will be get canceled. Am i right...?"}, {"owner": {"reputation": 12970, "user_id": 2741273, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71f8f37ebda905a8fffeb75e91b87a89?s=128&d=identicon&r=PG&f=1", "display_name": "Francesc", "link": "https://stackoverflow.com/users/2741273/francesc"}, "reply_to_user": {"reputation": 752, "user_id": 5371749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9zOVs.jpg?s=128&g=1", "display_name": "james04", "link": "https://stackoverflow.com/users/5371749/james04"}, "edited": false, "score": 2, "creation_date": 1574812709, "post_id": 59060942, "comment_id": 104361531, "body": "Yes. If you need your function to continue running after the viewmodel is destroyed then use a scope that is not linked to the lifecycle of the viewmodel."}, {"owner": {"reputation": 12970, "user_id": 2741273, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71f8f37ebda905a8fffeb75e91b87a89?s=128&d=identicon&r=PG&f=1", "display_name": "Francesc", "link": "https://stackoverflow.com/users/2741273/francesc"}, "reply_to_user": {"reputation": 752, "user_id": 5371749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9zOVs.jpg?s=128&g=1", "display_name": "james04", "link": "https://stackoverflow.com/users/5371749/james04"}, "edited": false, "score": 0, "creation_date": 1585088007, "post_id": 59060942, "comment_id": 107642014, "body": "See updated response for coroutines that need to outlive the viewmodel."}], "tags": [], "owner": {"reputation": 12970, "user_id": 2741273, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71f8f37ebda905a8fffeb75e91b87a89?s=128&d=identicon&r=PG&f=1", "display_name": "Francesc", "link": "https://stackoverflow.com/users/2741273/francesc"}, "is_accepted": true, "score": 3, "last_activity_date": 1585087974, "last_edit_date": 1585087974, "creation_date": 1574811265, "answer_id": 59060942, "question_id": 59060874, "link": "https://stackoverflow.com/questions/59060874/coroutine-scope-inside-repository-class/59060942#59060942", "title": "Coroutine Scope inside repository class", "body": "<p>You should write your repository APIs as <code>suspend</code> functions instead, like so</p>\n\n<pre><code>suspend fun updateItems(itemList: List&lt;ItemDto&gt;) = withContext(Dispatchers.IO) {\n    val readDate = DateUtils.getCurrentDateUTCtoString()\n    for (item in itemList)\n        item.readDate = readDate\n    itemDao.updateItems(itemList)\n}\n</code></pre>\n\n<p>Edit: if you need this to run even after the viewmodel is destroyed, launch it with <code>NonCancellable</code>,</p>\n\n<pre><code>suspend fun updateItems(itemList: List&lt;ItemDto&gt;) = withContext(Dispatchers.IO + NonCancellable) {\n    val readDate = DateUtils.getCurrentDateUTCtoString()\n    for (item in itemList)\n        item.readDate = readDate\n    itemDao.updateItems(itemList)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 822, "user_id": 5304620, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zxB3k.jpg?s=128&g=1", "display_name": "Amir Raza", "link": "https://stackoverflow.com/users/5304620/amir-raza"}, "is_accepted": false, "score": 1, "last_activity_date": 1608329601, "creation_date": 1608329601, "answer_id": 65364584, "question_id": 59060874, "link": "https://stackoverflow.com/questions/59060874/coroutine-scope-inside-repository-class/65364584#65364584", "title": "Coroutine Scope inside repository class", "body": "<p>Create your method inside repository as <code>suspend fun</code> and use <code>withContext(Dispatchers.IO)</code></p>\n<p>e.g.</p>\n<pre><code>suspend fun updateItems() = withContext(Dispatchers.IO) {\n    //you work...\n}\n</code></pre>\n"}], "owner": {"reputation": 752, "user_id": 5371749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9zOVs.jpg?s=128&g=1", "display_name": "james04", "link": "https://stackoverflow.com/users/5371749/james04"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1311, "favorite_count": 2, "accepted_answer_id": 59060942, "answer_count": 2, "score": 3, "last_activity_date": 1608329601, "creation_date": 1574810721, "question_id": 59060874, "link": "https://stackoverflow.com/questions/59060874/coroutine-scope-inside-repository-class", "title": "Coroutine Scope inside repository class", "body": "<p>Lets assume that i have a list of Dtos, i want to loop throught them and set some values and then insert/update them to my Room database. So from my ViewModel i call the repository class, run the loop inside there and then i call dao.insertItems(list).</p>\n\n<pre><code>\nfun updateItems(itemList: List&lt;ItemDto&gt;) {\n        val readDate = DateUtils.getCurrentDateUTCtoString()\n        ???SCOPE???.launch(Dispatchers.IO) {\n            for (item in itemList)\n                item.readDate = readDate\n            itemDao.updateItems(itemList)\n        }\n    }\n\n</code></pre>\n\n<p>The question is what kind of courtineScope do i have to use inside the Repository class. \nDo i have to create a repositoryScope with Dispatchers.Main..? Perhaps a GlobalScope..?</p>\n"}, {"tags": ["sorting", "kotlin", "hashmap"], "comments": [{"owner": {"reputation": 1844, "user_id": 5736633, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/rM1Fw.png?s=128&g=1", "display_name": "vatbub", "link": "https://stackoverflow.com/users/5736633/vatbub"}, "edited": false, "score": 0, "creation_date": 1574846444, "post_id": 59060678, "comment_id": 104371975, "body": "Your aim is to sort the <code>chatMessages</code>-list by date and time, right?"}, {"owner": {"reputation": 47, "user_id": 12441504, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3dfd3H0llkY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdAjPIhdgr0iYMXbSSYF5hoVVAEHg/photo.jpg?sz=128", "display_name": "Cinemacom", "link": "https://stackoverflow.com/users/12441504/cinemacom"}, "reply_to_user": {"reputation": 1844, "user_id": 5736633, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/rM1Fw.png?s=128&g=1", "display_name": "vatbub", "link": "https://stackoverflow.com/users/5736633/vatbub"}, "edited": false, "score": 0, "creation_date": 1574852034, "post_id": 59060678, "comment_id": 104375260, "body": "yes, it is right."}, {"owner": {"reputation": 1844, "user_id": 5736633, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/rM1Fw.png?s=128&g=1", "display_name": "vatbub", "link": "https://stackoverflow.com/users/5736633/vatbub"}, "edited": false, "score": 0, "creation_date": 1574941244, "post_id": 59060678, "comment_id": 104411177, "body": "What is the type of <code>hashMap.get(&quot;datetime&quot;)</code> (without the call to <code>toString()</code>)?"}, {"owner": {"reputation": 47, "user_id": 12441504, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3dfd3H0llkY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdAjPIhdgr0iYMXbSSYF5hoVVAEHg/photo.jpg?sz=128", "display_name": "Cinemacom", "link": "https://stackoverflow.com/users/12441504/cinemacom"}, "reply_to_user": {"reputation": 1844, "user_id": 5736633, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/rM1Fw.png?s=128&g=1", "display_name": "vatbub", "link": "https://stackoverflow.com/users/5736633/vatbub"}, "edited": false, "score": 0, "creation_date": 1574986790, "post_id": 59060678, "comment_id": 104428021, "body": "String, i add that for mismatch (String?)"}], "answers": [{"comments": [{"owner": {"reputation": 1844, "user_id": 5736633, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/rM1Fw.png?s=128&g=1", "display_name": "vatbub", "link": "https://stackoverflow.com/users/5736633/vatbub"}, "reply_to_user": {"reputation": 47, "user_id": 12441504, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3dfd3H0llkY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdAjPIhdgr0iYMXbSSYF5hoVVAEHg/photo.jpg?sz=128", "display_name": "Cinemacom", "link": "https://stackoverflow.com/users/12441504/cinemacom"}, "edited": false, "score": 0, "creation_date": 1576412348, "post_id": 59140813, "comment_id": 104884494, "body": "<code>sort</code> relies on your implementation of the <code>compareTo</code> method. How are you storing your timestamp?"}, {"owner": {"reputation": 47, "user_id": 12441504, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3dfd3H0llkY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdAjPIhdgr0iYMXbSSYF5hoVVAEHg/photo.jpg?sz=128", "display_name": "Cinemacom", "link": "https://stackoverflow.com/users/12441504/cinemacom"}, "edited": false, "score": 1, "creation_date": 1577106181, "post_id": 59140813, "comment_id": 105092766, "body": "you are right, problem was timestamp storing class. I took care of problem. Thanks."}], "tags": [], "owner": {"reputation": 1844, "user_id": 5736633, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/rM1Fw.png?s=128&g=1", "display_name": "vatbub", "link": "https://stackoverflow.com/users/5736633/vatbub"}, "is_accepted": true, "score": 0, "last_activity_date": 1575296343, "creation_date": 1575296343, "answer_id": 59140813, "question_id": 59060678, "link": "https://stackoverflow.com/questions/59060678/how-can-i-create-hashmapstring-int-string-string-string-string-in-kotlin-f/59140813#59140813", "title": "How can I create Hashmap&lt;String,Int : String,String : String,String&gt; in Kotlin for sorting", "body": "<p>I assume that <code>chatMessages</code> is of type <code>List&lt;String&gt;</code>. This is generally bad because you cannot to anything with strings. I would suggest you to create a <code>data class</code> which contains all information about a chat message, like so:</p>\n\n<pre><code>data class ChatMessage(val dateTime: Int, val userMail: String?, val userMessage: String?) : Comparable&lt;ChatMessage&gt; {\n    override fun compareTo(other: ChatMessage) = this.dateTime.compareTo(other.dateTime)\n}\n</code></pre>\n\n<p>As you can see, this class implements the <code>Comparable&lt;ChatMessage&gt;</code> interface. If you then define the <code>chatMessages</code> list like so</p>\n\n<pre><code>private val chatMessages = mutableListOf&lt;ChatMessage&gt;()\n</code></pre>\n\n<p>you can call <code>chatMessages.sort()</code> which will then sort the list according to <code>dateTime</code> (see the implementation of <code>compareTo</code> in <code>ChatMessage</code>). The final code would look like that:</p>\n\n<pre><code>data class ChatMessage(val dateTime:Int?, val userMail: String?, val userMessage: String?) : Comparable&lt;ChatMessage&gt; {\n    override fun compareTo(other: ChatMessage) = this.dateTime.compareTo(other.dateTime)\n}\n\nprivate val chatMessages = mutableListOf&lt;ChatMessage&gt;()\n\nfun yourCode() {\n    newReference.addValueEventListener(object : ValueEventListener {\n\n        /* Use proper variable naming. Nobody will understand, what p0 is, but if you name\n        it dataSnapshot, everyone knows at a glance. */\n        override fun onDataChange(dataSnapshot: DataSnapshot) {\n\n            chatMessages.clear()\n\n            // Again, what is ds exactly? Name it properly.\n            for (ds in dataSnapshot.child(playerIDmatchWhoIs).children) {\n                // Kotlin recommends to use val instead of var.\n                // This way, you know that your variables cannot be modified unless you want them to be modified.\n                val hashMap = ds.getValue() as HashMap&lt;String, String&gt;\n\n                // use indexing instead of the get() method\n                val dateTime = hashMap[\"datetime\"]\n                val userMail = hashMap[\"usermail\"]\n                val userMessage = hashMap[\"usermessage\"]\n\n                // TODO: Handle null values properly\n                chatMessages.add(ChatMessage(dateTime!!.toInt(), userMail, userMessage))\n                recyclerViewAdapter.notifyDataSetChanged()\n\n            }\n\n            chatMessages.sort()\n        }\n    })\n}\n</code></pre>\n\n<p>This assumes that you want to store your timestamp as an integer. However, I would rather recommend to use a time library like <code>java.time</code> (built into java). In that case, you can use <code>java.time.Instant</code> which has many more possibilities to handle time and all the difficulties to handle time.</p>\n\n<p>Read more about <code>java.time.Instant</code> in the <a href=\"https://developer.android.com/reference/java/time/Instant\" rel=\"nofollow noreferrer\">Android docs</a>. If you want to learn how to parse a <code>String</code> to <code>java.time.Instant</code>, <a href=\"https://stackoverflow.com/questions/37672012/how-to-create-java-time-instant-from-pattern\">this</a> might be interesting.</p>\n"}], "owner": {"reputation": 47, "user_id": 12441504, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3dfd3H0llkY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdAjPIhdgr0iYMXbSSYF5hoVVAEHg/photo.jpg?sz=128", "display_name": "Cinemacom", "link": "https://stackoverflow.com/users/12441504/cinemacom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 59140813, "answer_count": 1, "score": 0, "last_activity_date": 1575296343, "creation_date": 1574809476, "last_edit_date": 1574824071, "question_id": 59060678, "link": "https://stackoverflow.com/questions/59060678/how-can-i-create-hashmapstring-int-string-string-string-string-in-kotlin-f", "title": "How can I create Hashmap&lt;String,Int : String,String : String,String&gt; in Kotlin for sorting", "body": "<p>I know this character (:) is meaningless in my statement, but I wanted to explain what I want. I want to sort a lot of hashmaps adding <code>Arraylist</code> and using <code>sortedBy</code> but I cant because my values return strings. </p>\n\n<p>Here is my code:</p>\n\n<pre><code>newReference.addValueEventListener(object : ValueEventListener{\n\n            override fun onDataChange(p0: DataSnapshot) {\n\n                chatMessages.clear()\n\n                for(ds in p0.child(playerIDmatchWhoIs).children){\n\n                    var hashMap = ds.getValue() as HashMap&lt;String, String&gt;\n                    var datetime = hashMap.get(\"datetime\").toString()\n                    var usermail = hashMap.get(\"usermail\")\n                    var usermessage = hashMap.get(\"usermessage\")\n\n                    chatMessages.add(\"${usermail}: ${usermessage}\")\n                    recyclerViewAdapter.notifyDataSetChanged()\n\n                }\n            }\n        })\n</code></pre>\n\n<p>(I want to sort this hashMap, it has <code>datetime</code> value but is returning string.)</p>\n\n<pre><code>println(hashMap): I/System.out: {datetime=1574807563747, usermessage=jmjgmhg, usermail=1@gmail.com}\n</code></pre>\n"}, {"tags": ["kotlin", "ontouchlistener"], "comments": [{"owner": {"reputation": 44108, "user_id": 8298909, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MRxNb.jpg?s=128&g=1", "display_name": "Ben P.", "link": "https://stackoverflow.com/users/8298909/ben-p"}, "edited": false, "score": 0, "creation_date": 1574870839, "post_id": 59060153, "comment_id": 104386001, "body": "Is there a reason you&#39;re using an <code>OnTouchListener</code> instead of an <code>OnLongClickListener</code>?"}, {"owner": {"reputation": 39, "user_id": 5021056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MSUgp.jpg?s=128&g=1", "display_name": "kuck1", "link": "https://stackoverflow.com/users/5021056/kuck1"}, "reply_to_user": {"reputation": 44108, "user_id": 8298909, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MRxNb.jpg?s=128&g=1", "display_name": "Ben P.", "link": "https://stackoverflow.com/users/8298909/ben-p"}, "edited": false, "score": 0, "creation_date": 1574884732, "post_id": 59060153, "comment_id": 104392379, "body": "I tried using that but it wasn&#39;t working as well as OnTouchListener."}], "owner": {"reputation": 39, "user_id": 5021056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MSUgp.jpg?s=128&g=1", "display_name": "kuck1", "link": "https://stackoverflow.com/users/5021056/kuck1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1574870387, "creation_date": 1574806482, "last_edit_date": 1574870387, "question_id": 59060153, "link": "https://stackoverflow.com/questions/59060153/how-to-fix-clickablespan-breaking-ontouchlistener-in-kotlin", "title": "How to fix: ClickableSpan breaking OnTouchListener in Kotlin", "body": "<p>I have a simple chat app where the user can touch and hold a message to see the user profile. I am adding a new feature where a user can be tagged so that if the tag is clicked it opens the profile of the tagged person. The new feature makes the old touch and hold functionality break.</p>\n\n<p>The touch and hold is done by overriding the onTouch method of View.OnTouchListener:</p>\n\n<pre><code>    override fun onTouch(v: View?, motionEvent: MotionEvent?): Boolean {\n        when (motionEvent?.action) {\n            MotionEvent.ACTION_DOWN -&gt; {\n                lastDown = System.currentTimeMillis()\n\n                // Update the background colour\n                v?.context?.let {\n                    backgroundView.setBackgroundColor(it.getAttrColor(R.attr.colorBackground))\n                }\n                ChatOptionsDialog.showAfterDelay(backgroundView, mMessage)\n            }\n\n            MotionEvent.ACTION_CANCEL -&gt; {\n                ChatOptionsDialog.cancelShow()\n            }\n\n            MotionEvent.ACTION_UP -&gt; {\n                ChatOptionsDialog.cancelShow()\n                ... \n</code></pre>\n\n<p>The new tagging feature is done with a ClickableSpan which I am setting up by overriding onClick:</p>\n\n<pre><code>           val clickableTerms = sortedMentions.values.map{\n                object : ClickableSpan() {\n                    override fun onClick(textView: View) {\n                        Profile.startProfileActivity(textView.context, it) \n                    }\n                }\n            }\n</code></pre>\n\n<p>The result is that I can click on the tags to open the tagged user profile, but tap and hold doesn't work very well. If I tap and hold anywhere on a message that has a tag, it does nothing. Also if I click to the right of the tag the tag still opens so it seems like that is occupying more space then it should, and tap and hold should work everywhere including over mentions.</p>\n"}, {"tags": ["kotlin", "unicode"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1574808050, "post_id": 59059948, "comment_id": 104360224, "body": "This is well covered topic for the JVM, the Java answers will also be the same for Kotlin.  See the duplicate marked above as well as others linked below..."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1574808052, "post_id": 59059948, "comment_id": 104360225, "body": "<a href=\"https://stackoverflow.com/questions/16769753/java-char-to-its-unicode-hexadecimal-string-representation-and-vice-versa/16769863\" title=\"java char to its unicode hexadecimal string representation and vice versa\">stackoverflow.com/questions/16769753/&hellip;</a>"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1574808056, "post_id": 59059948, "comment_id": 104360228, "body": "<a href=\"https://stackoverflow.com/questions/25138514/how-to-convert-hex-value-to-special-char-in-unicode\" title=\"how to convert hex value to special char in unicode\">stackoverflow.com/questions/25138514/&hellip;</a>"}], "owner": {"reputation": 95, "user_id": 3482901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1129a64dc05930615dd9fa8b6931ecbb?s=128&d=identicon&r=PG&f=1", "display_name": "Tara", "link": "https://stackoverflow.com/users/3482901/tara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 122, "favorite_count": 0, "closed_date": 1574807980, "answer_count": 0, "score": 1, "last_activity_date": 1574805414, "creation_date": 1574805414, "question_id": 59059948, "link": "https://stackoverflow.com/questions/59059948/convert-decimal-representation-of-hex-to-unicode-character-in-kotlin", "closed_reason": "Duplicate", "title": "Convert decimal representation of hex to unicode character in Kotlin", "body": "<p>I'm playing around with Kotlin. I'd like to iterate through the unicode surrogate blocks D800-DFFF and convert those to their string representation. \nFor example - the decimal representation of 0xD800 is 55296. Now, given 55296, I'd like to get the unicode character - \u00d8 from it. </p>\n\n<p>I've already tried to convert the Int to its Character representation and back to a String, which works but not for all the hex/decimal values. </p>\n"}, {"tags": ["kotlin", "retrofit", "data-class"], "comments": [{"owner": {"reputation": 26172, "user_id": 49746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IAAg.jpg?s=128&g=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/49746/todd"}, "edited": false, "score": 0, "creation_date": 1574805070, "post_id": 59059854, "comment_id": 104359193, "body": "Does this even compile? If <code>x</code> is nullable, <code>x.filter</code> shouldn&#39;t compile at all."}, {"owner": {"reputation": 199, "user_id": 8655700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/feeb09c07cc3e5b12eb1824788b6d407?s=128&d=identicon&r=PG&f=1", "display_name": "geexee", "link": "https://stackoverflow.com/users/8655700/geexee"}, "reply_to_user": {"reputation": 26172, "user_id": 49746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IAAg.jpg?s=128&g=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/49746/todd"}, "edited": false, "score": 0, "creation_date": 1574805221, "post_id": 59059854, "comment_id": 104359245, "body": "You&#39;re right. Fixed it. Thank you."}, {"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 1, "creation_date": 1574805943, "post_id": 59059854, "comment_id": 104359519, "body": "Just a note: Your filter doesn&#39;t do anything, because your input array cannot contain nulls."}, {"owner": {"reputation": 199, "user_id": 8655700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/feeb09c07cc3e5b12eb1824788b6d407?s=128&d=identicon&r=PG&f=1", "display_name": "geexee", "link": "https://stackoverflow.com/users/8655700/geexee"}, "edited": false, "score": 0, "creation_date": 1574806206, "post_id": 59059854, "comment_id": 104359612, "body": "right. corrected again"}], "answers": [{"tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": false, "score": 0, "last_activity_date": 1574864319, "creation_date": 1574864319, "answer_id": 59072198, "question_id": 59059854, "link": "https://stackoverflow.com/questions/59059854/kotlin-data-class-member-not-getting-initialized-when-using-as-a-retrofit-respo/59072198#59072198", "title": "Kotlin data class: member not getting initialized when using as a retrofit response", "body": "<p>This will depend on which <code>Converter.Factory</code> you use for Retrofit, but yours probably uses reflection in a way which doesn't actually call the constructor. I'd try <a href=\"https://square.github.io/retrofit/2.x/converter-moshi/retrofit2/converter/moshi/MoshiConverterFactory.html\" rel=\"nofollow noreferrer\"><code>MoshiConverterFactory</code></a> (if your GET response is JSON) and see if it fixes the problem.</p>\n"}], "owner": {"reputation": 199, "user_id": 8655700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/feeb09c07cc3e5b12eb1824788b6d407?s=128&d=identicon&r=PG&f=1", "display_name": "geexee", "link": "https://stackoverflow.com/users/8655700/geexee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574864319, "creation_date": 1574804954, "last_edit_date": 1574806123, "question_id": 59059854, "link": "https://stackoverflow.com/questions/59059854/kotlin-data-class-member-not-getting-initialized-when-using-as-a-retrofit-respo", "title": "Kotlin data class: member not getting initialized when using as a retrofit response", "body": "<pre><code>data class A (val x: Array&lt;String&gt;? = null) {\n    val y = x?.filter { it!=\"something\" }\n}\n</code></pre>\n\n<p>This code should make member <code>y</code> to be calculated when an <code>A</code> object is created.</p>\n\n<p>When I initiate an <code>A</code> object, both <code>x</code> and <code>y</code> gets a value.\nHowever, when I define object <code>A</code> as a response in a <code>GET</code> request using <code>retrofit2</code>, <code>x</code> gets a value but <code>y</code> is <code>null</code>.\nI cannot figure out the reason, (maybe relative to threads? I am using retrofit with coroutines), but can not explain it.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["spring-boot", "kotlin", "graphql", "graphql-java", "graphql-spqr"], "answers": [{"tags": [], "owner": {"reputation": 1892, "user_id": 1365872, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/1b175306891b22e956cf2b8f7eb74bf3?s=128&d=identicon&r=PG", "display_name": "Matthias Huttar", "link": "https://stackoverflow.com/users/1365872/matthias-huttar"}, "is_accepted": false, "score": 1, "last_activity_date": 1574931431, "creation_date": 1574931431, "answer_id": 59084970, "question_id": 59059543, "link": "https://stackoverflow.com/questions/59059543/how-to-set-header-variables-in-graphql-spqr/59084970#59084970", "title": "How to set header variables in GraphQL-SPQR", "body": "<p>when you're using spring boot, there's two options: </p>\n\n<ul>\n<li>you're using the spring boot graphql spqr starter (which brings it's own controller to handle all graphQL requests) </li>\n<li>you're using plain graphql-spqr and have your own controller to handle GraphQL requests</li>\n</ul>\n\n<p>In any case, you've got a few options: </p>\n\n<h3>Making your CustomExceptionHandler a Spring Bean and Autowiring HttpServletResponse</h3>\n\n<p>That would probably be the easiest way to go - and it would probably work in any case: You could simply make your CustomExceptionHandler a Spring bean and have it autowire the HttpServletRequest - in the handler method, you could then set it to whatever you would like it to be. Here's some dummy code in Java (sorry, I am not proficient enough in Kotlin):</p>\n\n<pre><code>@Component\nclass CustomExceptionHandler implements DataFetcherExceptionHandler {\n    private final HttpServletResponse response; \n\n    public CustomExceptionHandler(HttpServletResponse response) {\n        this.response = response; \n    }\n\n    @Override\n    public DataFetcherExceptionHandlerResult onException(DataFetcherExceptionHandlerParameters handlerParameters) {\n        response.setHeader(\"X-Request-ID\", UUID.randomUUID().toString());\n        // ... your actual error handling code\n    }\n}\n</code></pre>\n\n<p>This is going to work because spring will realise that HttpServletRequest differs for each request. It will therefore inject a dynamic proxy into your error handler that will point to the actual HttpServletResponse instance for every request. </p>\n\n<p>I would argue, that it's not the most elegant way, but it will certainly solve your problem. </p>\n\n<h3>for the graphql-spqr spring boot starter</h3>\n\n<p>There's a <a href=\"https://github.com/leangen/graphql-spqr-spring-boot-starter/blob/master/graphql-spqr-spring-boot-autoconfigure/src/main/java/io/leangen/graphql/spqr/spring/web/GraphQLController.java\" rel=\"nofollow noreferrer\">default controller implementation</a> that is used in projects using this starter. That controller will handle every graphql request that you receive. You can customise it, by implementing your own <a href=\"https://github.com/leangen/graphql-spqr-spring-boot-starter/blob/master/graphql-spqr-spring-boot-autoconfigure/src/main/java/io/leangen/graphql/spqr/spring/web/GraphQLExecutor.java\" rel=\"nofollow noreferrer\">GraphQLExecutor</a> and making it a spring bean. That executor is responsible to call the GraphQL engine, pass the parameters in and output the response. Here's <a href=\"https://github.com/leangen/graphql-spqr-spring-boot-starter/blob/master/graphql-spqr-spring-boot-autoconfigure/src/main/java/io/leangen/graphql/spqr/spring/web/servlet/websocket/DefaultGraphQLExecutor.java\" rel=\"nofollow noreferrer\">the default implementation</a>, that you might want to base your work on. </p>\n\n<p>Similarly to the previous solution, you could autowire the HttpServletResponse in that class and set a HTTP Response header. </p>\n\n<p>That solution would allow you to decide, if you want to set a request id in all cases, or just in specific error cases. (<code>graphql.execute</code> returns an object from which you can get the information if and what errors existed) </p>\n\n<h3>when using graphql-spqr without the spring boot starter</h3>\n\n<p>Locate your GraphQL controller, add an argument to that method of type HttpServletRequest - and then add headers to that as you prefer (see previous section on some more specific suggestions) </p>\n"}], "owner": {"reputation": 1649, "user_id": 6505350, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jugxh.jpg?s=128&g=1", "display_name": "LostAtSea", "link": "https://stackoverflow.com/users/6505350/lostatsea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 820, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575401509, "creation_date": 1574803478, "last_edit_date": 1575401509, "question_id": 59059543, "link": "https://stackoverflow.com/questions/59059543/how-to-set-header-variables-in-graphql-spqr", "title": "How to set header variables in GraphQL-SPQR", "body": "<p>I'm running a GraphQL API using GraphQL-SPQR and Spring Boot.</p>\n\n<p>At the moment, I am throwing <code>RuntimeException</code>s to return GraphQL errors. I have a <code>customExceptionHandler</code> that implements <code>DataFetcherExceptionHandler</code> that returns errors in the correct format, as shown below:</p>\n\n<pre><code>class CustomExceptionHandler : DataFetcherExceptionHandler {\n    override fun onException(handlerParameters: DataFetcherExceptionHandlerParameters?): DataFetcherExceptionHandlerResult {\n\n\n        // get exception\n        var exception = handlerParameters?.exception\n        val locations = listOf(handlerParameters?.sourceLocation)\n        val path = listOf(handlerParameters?.path?.segmentName)\n\n        // create a GraphQLError from your exception\n        if (exception !is GraphQLError) {\n            exception = CustomGraphQLError(exception?.localizedMessage, locations, path)\n        }\n\n        // cast to GraphQLError\n        exception as CustomGraphQLError\n\n        exception.locations = locations\n        exception.path = path\n\n        val errors = listOf&lt;GraphQLError&gt;(exception)\n\n        return DataFetcherExceptionHandlerResult.Builder().errors(errors).build()\n    }\n}\n</code></pre>\n\n<p>I use the <code>CustomExceptionHandler</code> as follows (in my main application class):</p>\n\n<pre><code>@Bean\n    fun graphQL(schema: GraphQLSchema): GraphQL {\n        return GraphQL.newGraphQL(schema)\n                .queryExecutionStrategy(AsyncExecutionStrategy(CustomExceptionHandler()))\n                .mutationExecutionStrategy(AsyncSerialExecutionStrategy(CustomExceptionHandler()))\n                .build()\n    }\n</code></pre>\n\n<p>I'd like to set a header variable for a UUID that corresponds to the exception, for logging purposes. How would I do that?</p>\n\n<p>Even better, is it possible to create a Spring Bean that puts the UUID in the header for all queries and mutations?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["unit-testing", "kotlin", "conditional-compilation"], "answers": [{"tags": [], "owner": {"reputation": 2190, "user_id": 628318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dcab77e699e7017e0c5665158d4b1e5?s=128&d=identicon&r=PG", "display_name": "drekbour", "link": "https://stackoverflow.com/users/628318/drekbour"}, "is_accepted": false, "score": 0, "last_activity_date": 1574807174, "creation_date": 1574807174, "answer_id": 59060289, "question_id": 59059423, "link": "https://stackoverflow.com/questions/59059423/is-there-a-way-to-define-test-functions-inside-of-the-class-that-is-being-tested/59060289#59060289", "title": "Is there a way to define test functions inside of the class that is being tested?", "body": "<p>Probably not the answer you want but JVM languages just don't do that (either encouraging embedded tests or capable of <code>#ifdef</code> alternative compilations). A common convention (picked up from build tools like Maven or Gradle) is to have mirrored package/directory structures:</p>\n\n<ul>\n<li><code>src/main/java/x/y/z/Foo.java</code></li>\n<li><code>src/test/java/x/y/z/FooTest.java</code></li>\n</ul>\n\n<p>IDEs know such conventions and can jump between the two quite easily (Ctrl-Shift-T on IntelliJ).</p>\n"}], "owner": {"reputation": 1, "user_id": 12440991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bc173ba71b9e57956f85da62e7605f7?s=128&d=identicon&r=PG&f=1", "display_name": "Display name", "link": "https://stackoverflow.com/users/12440991/display-name"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574807174, "creation_date": 1574802867, "question_id": 59059423, "link": "https://stackoverflow.com/questions/59059423/is-there-a-way-to-define-test-functions-inside-of-the-class-that-is-being-tested", "title": "Is there a way to define test functions inside of the class that is being tested?", "body": "<p>Is there a way to define test functions inside of the class that is being tested?</p>\n\n<p>I come from a C/C++/D background, so I'm used to being able to use conditional compilation to make parts of the code compile for unittests but not for a release build. However, in kotlin or java I'm given to understand that the only way to effect a similar result is to write a separate file that is only compiled for the unittests' target. I really don't want to make my code less legible by splitting it unnecessarily into two files and I really don't want to compile in functions that shouldn't appear in the release build, so how can I avoid that?</p>\n\n<p>People always look at me strangely when I talk about how nice it is to have at least some of the unittests inline with the code they are testing, so here's a rough example of how I can do this in C++ using any typical unittesting framework like CUnit.</p>\n\n<pre><code>class Foo\n{\n   ...\n}\n\n#ifdef BUILD_UNITTESTS\nvoid test_MyTestCase()\n{\n   ...\n}\n\nMY_MACRO_TO_REGISTER_TESTCASE_WITH_TESTING_FRAMEWORK(test_MyTestCase)\n#endif\n</code></pre>\n\n<p>How would one do something equivalent in Kotlin or Java?</p>\n"}, {"tags": ["android", "xml", "kotlin", "vector", "android-constraintlayout"], "answers": [{"comments": [{"owner": {"reputation": 332, "user_id": 8204270, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/39f5ff548717f633986612ecfa3caa72?s=128&d=identicon&r=PG&f=1", "display_name": "KayD", "link": "https://stackoverflow.com/users/8204270/kayd"}, "edited": false, "score": 0, "creation_date": 1574889420, "post_id": 59062813, "comment_id": 104394201, "body": "this seems to be a good idea, what&#39;s the empty view for? And how would you proceed to get the border like I got in my background image?"}, {"owner": {"reputation": 176, "user_id": 3003519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7899edd853af572ee37edadc3a87ffd4?s=128&d=identicon&r=PG&f=1", "display_name": "Vijay Patole", "link": "https://stackoverflow.com/users/3003519/vijay-patole"}, "reply_to_user": {"reputation": 332, "user_id": 8204270, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/39f5ff548717f633986612ecfa3caa72?s=128&d=identicon&r=PG&f=1", "display_name": "KayD", "link": "https://stackoverflow.com/users/8204270/kayd"}, "edited": false, "score": 0, "creation_date": 1575101787, "post_id": 59062813, "comment_id": 104459353, "body": "Empty View is for adjusting TextView dynamically as per the width of the imageView. You can use drawable XML background to the TextView for the border."}], "tags": [], "owner": {"reputation": 176, "user_id": 3003519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7899edd853af572ee37edadc3a87ffd4?s=128&d=identicon&r=PG&f=1", "display_name": "Vijay Patole", "link": "https://stackoverflow.com/users/3003519/vijay-patole"}, "is_accepted": false, "score": 0, "last_activity_date": 1574827303, "creation_date": 1574827303, "answer_id": 59062813, "question_id": 59058860, "link": "https://stackoverflow.com/questions/59058860/how-to-fix-the-height-width-ratio-in-a-constraint-layout-with-a-bg-image/59062813#59062813", "title": "How to fix the height / width ratio in a constraint layout with a bg image?", "body": "<p>You can use separate drawables for star and the text background and then try to achieve the UI as expected, try following which could help,</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    android:padding=\"@dimen/default_padding\"&gt;\n\n\n    &lt;androidx.constraintlayout.widget.ConstraintLayout\n        android:id=\"@+id/age\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        app:layout_constraintTop_toTopOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        android:paddingStart=\"@dimen/padding_big\"\n        android:paddingTop=\"@dimen/padding_small\"\n        android:paddingBottom=\"@dimen/padding_small\"\n        android:paddingEnd=\"@dimen/padding_small\"&gt;\n        &lt;TextView\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:text=\"10000000.000 BC\"\n            android:paddingStart=\"@dimen/default_padding\"\n            android:background=\"@color/colorRed\"\n            app:layout_constraintStart_toEndOf=\"@+id/emptyView\"\n            app:layout_constraintEnd_toEndOf=\"parent\"\n            app:layout_constraintTop_toTopOf=\"parent\"\n            app:layout_constraintBottom_toBottomOf=\"parent\"\n            /&gt;\n        &lt;ImageView\n            android:id=\"@+id/imageView\"\n            android:layout_width=\"20dp\"\n            android:layout_height=\"0dp\"\n            app:layout_constraintDimensionRatio=\"W, 1:1\"\n            app:layout_constraintStart_toStartOf=\"parent\"\n            app:layout_constraintTop_toTopOf=\"parent\"\n            app:layout_constraintBottom_toBottomOf=\"parent\"\n            android:background=\"@drawable/avtar\"/&gt;\n\n        &lt;View\n            android:id=\"@+id/emptyView\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"0dp\"\n            app:layout_constraintDimensionRatio=\"W, 0.5:1\"\n            app:layout_constraintTop_toTopOf=\"parent\"\n            app:layout_constraintBottom_toBottomOf=\"parent\"\n            app:layout_constraintStart_toStartOf=\"@+id/imageView\"/&gt;\n\n\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n"}], "owner": {"reputation": 332, "user_id": 8204270, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/39f5ff548717f633986612ecfa3caa72?s=128&d=identicon&r=PG&f=1", "display_name": "KayD", "link": "https://stackoverflow.com/users/8204270/kayd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 388, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575292129, "creation_date": 1574800000, "last_edit_date": 1575292129, "question_id": 59058860, "link": "https://stackoverflow.com/questions/59058860/how-to-fix-the-height-width-ratio-in-a-constraint-layout-with-a-bg-image", "title": "How to fix the height / width ratio in a constraint layout with a bg image?", "body": "<p>I've created a TextView inside a Constraint Layout to be displayed at the top right corner in my activity. The TextView gets his value from a JSON, so the length of it isn't fixed, the problem is the design of my background:</p>\n\n<pre><code>&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\nandroid:padding=\"@dimen/default_padding\"&gt;\n\n&lt;androidx.constraintlayout.widget.ConstraintLayout\n    android:id=\"@+id/age\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    app:layout_constraintEnd_toEndOf=\"parent\"\n    android:background=\"@drawable/btn_agebg\"\n    android:paddingStart=\"@dimen/padding_big\"\n    android:paddingTop=\"@dimen/padding_small\"\n    android:paddingBottom=\"@dimen/padding_small\"\n    android:paddingEnd=\"@dimen/padding_small\"\n\n    &gt;\n\n    &lt;TextView\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"10000000.000 BC\"\n        android:paddingStart=\"@dimen/default_padding\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        /&gt;\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n\n<p></p>\n\n<p>The result of this code is visible below:\n<a href=\"https://i.stack.imgur.com/I1rlt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/I1rlt.png\" alt=\"enter image description here\"></a></p>\n\n<p>My background contains a star in a vector format and also the button borders, so every time the width / height ratio gets out of a certain ratio (with long or short textes), the star is streched or flattened. Can I keep the aspect ratio of the background / layout within fixed limits or a prefixed ratio?</p>\n"}, {"tags": ["java", "android", "firebase", "kotlin", "google-cloud-firestore"], "comments": [{"owner": {"reputation": 63626, "user_id": 7015400, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/rhlKG.jpg?s=128&g=1", "display_name": "Peter Haddad", "link": "https://stackoverflow.com/users/7015400/peter-haddad"}, "edited": false, "score": 0, "creation_date": 1574799896, "post_id": 59058736, "comment_id": 104357077, "body": "Add ur database to the question (upload image to imgur) not Facebook"}, {"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1574799990, "post_id": 59058736, "comment_id": 104357111, "body": "The error message is telling you that you&#39;re using an invalid character # to build a path to a document.  You will have to debug your code and figure out where the invalid character is coming from."}, {"owner": {"reputation": 29, "user_id": 9405554, "user_type": "registered", "profile_image": "https://graph.facebook.com/1685792774821552/picture?type=large", "display_name": "Tunde Nii Kal&#39;el", "link": "https://stackoverflow.com/users/9405554/tunde-nii-kalel"}, "edited": false, "score": 0, "creation_date": 1574801632, "post_id": 59058736, "comment_id": 104357837, "body": "it says the error is at    mDatabaseReference.child(&quot;users&quot;).child(mobileNo)"}, {"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 1, "creation_date": 1574807028, "post_id": 59058736, "comment_id": 104359902, "body": "Then it makes sense to consider the value of <code>mobileNo</code>."}, {"owner": {"reputation": 29, "user_id": 9405554, "user_type": "registered", "profile_image": "https://graph.facebook.com/1685792774821552/picture?type=large", "display_name": "Tunde Nii Kal&#39;el", "link": "https://stackoverflow.com/users/9405554/tunde-nii-kalel"}, "edited": false, "score": 0, "creation_date": 1574861792, "post_id": 59058736, "comment_id": 104380760, "body": "i already solved this...i jusr relaced the (&quot;#&quot;) also with (&quot;&quot;)"}], "owner": {"reputation": 29, "user_id": 9405554, "user_type": "registered", "profile_image": "https://graph.facebook.com/1685792774821552/picture?type=large", "display_name": "Tunde Nii Kal&#39;el", "link": "https://stackoverflow.com/users/9405554/tunde-nii-kalel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 150, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1574799944, "creation_date": 1574799310, "last_edit_date": 1574799944, "question_id": 59058736, "link": "https://stackoverflow.com/questions/59058736/invalid-firebase-database-path-firebase-database-paths-must-not-contain", "title": "Invalid Firebase Database path: #. Firebase Database paths must not contain &#39;.&#39;, &#39;#&#39;, &#39;$&#39;, &#39;[&#39;, or &#39;]&#39;", "body": "<p><a href=\"https://facebook.com\" rel=\"nofollow noreferrer\">enter link description here</a></p>\n\n<p>I can not even figure out where my error is coming from. Please kindly help. I think it has to do with the replace strings I dont know.I am working on a firebase project.</p>\n\n<p><a href=\"https://i.stack.imgur.com/RKNpQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RKNpQ.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>private void getContactsList() {\n    final ArrayList&lt;Contact&gt; mContacts = new ArrayList&lt;&gt;();\n    mContacts.add(new Contact(mPref.getString(KEY_NAME, null), mPref.getString(KEY_MOBILE_NUMBER, null)));\n\n    ContentResolver cr = getActivity().getContentResolver();\n    Cursor contacts = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, null, null, null);\n\n    // use the cursor to access the contacts\n    while (contacts.moveToNext()) {\n\n        //get display name\n        final String name = contacts.getString(contacts.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));\n\n        //get mobile number\n        String mobileNo = contacts.getString(contacts.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));\n\n        // trim mobile number\n        mobileNo = mobileNo.replace(\" \", \"\");\n        mobileNo = mobileNo.replace(\"-\", \"\");\n        mobileNo = mobileNo.replace(\"+233\", \"\");\n\n        if (mobileNo.length() &gt; 11 &amp;&amp; mobileNo.charAt(0) == '0') {\n            mobileNo = mobileNo.substring(1);\n        }\n\n        final String finalPhoneNumber = mobileNo;\n\n        //check if user exist or not\n        mDatabaseReference.child(\"users\").child(mobileNo)\n                .addListenerForSingleValueEvent(new ValueEventListener() {\n                    @Override\n                    public void onDataChange(DataSnapshot dataSnapshot) {\n                        if (dataSnapshot.getValue() == null) {\n                            //user not exists\n                            if (!isContainsContact(mContacts, finalPhoneNumber)) {\n                                mAdapter.addItem(new Contact(name, finalPhoneNumber));\n                                mContacts.add(new Contact(name, finalPhoneNumber));\n                            }\n                        }\n                    }\n\n                    @Override\n                    public void onCancelled(DatabaseError databaseError) {\n                    }\n                });\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "android-fragments", "kotlin", "android-viewpager", "android-alertdialog"], "answers": [{"comments": [{"owner": {"reputation": 610, "user_id": 10365158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ajOMa.jpg?s=128&g=1", "display_name": "BlondeSwan", "link": "https://stackoverflow.com/users/10365158/blondeswan"}, "edited": false, "score": 0, "creation_date": 1574807332, "post_id": 59059564, "comment_id": 104360007, "body": "I&#39;m asking about a completely different issue, I&#39;m not asking for architecture critiques."}], "tags": [], "owner": {"reputation": 1, "user_id": 10027665, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--6RNYTQyyJs/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1J2DcG3c95kfd90kVov6yLZLhBIw/mo/photo.jpg?sz=128", "display_name": "Oliver", "link": "https://stackoverflow.com/users/10027665/oliver"}, "is_accepted": false, "score": -1, "last_activity_date": 1574803587, "creation_date": 1574803587, "answer_id": 59059564, "question_id": 59057726, "link": "https://stackoverflow.com/questions/59057726/passing-a-function-for-alertdialog-negativebutton-listener/59059564#59059564", "title": "Passing a function for AlertDialog NegativeButton Listener", "body": "<p>Why use ViewPager at all? Why don't you handle the fragments from the activity? That way you can always get the previous fragment in the stack or call a function for the next fragment on the positive button. </p>\n"}], "owner": {"reputation": 610, "user_id": 10365158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ajOMa.jpg?s=128&g=1", "display_name": "BlondeSwan", "link": "https://stackoverflow.com/users/10365158/blondeswan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574803587, "creation_date": 1574794751, "question_id": 59057726, "link": "https://stackoverflow.com/questions/59057726/passing-a-function-for-alertdialog-negativebutton-listener", "title": "Passing a function for AlertDialog NegativeButton Listener", "body": "<p>Would like to pass a function to execute whenever the negative button of an AlertDialog box is displayed. I have a utility function I created to display errors:</p>\n\n<pre><code>fun Context.showError(message: String, negativeLabel: Int = R.string.modal_action_dismiss, negativeAction: (() -&gt; Unit)? = null, positiveAction: (() -&gt; Unit)? = null, positiveLabel: Int? = null) {\n    val builder = AlertDialog.Builder(this)\n    builder.setMessage(message)\n    builder.setNegativeButton(negativeLabel) { dialog, _ -&gt;\n        dialog.dismiss()\n        negativeAction\n    }\n    // Set positive action only if it exists\n    if (positiveAction != null &amp;&amp; positiveLabel != null) {\n        builder.setPositiveButton(positiveLabel) { dialog, _ -&gt;\n            dialog.dismiss()\n            positiveAction\n        }\n    }\n    builder.create().show()\n}\n</code></pre>\n\n<p>This function worked fine when I call it like so:</p>\n\n<pre><code>context?.showError(R.string.modal_action_back) {\n    activity?.onBackPressed()\n}\n</code></pre>\n\n<p>However, I am using it in a fragment displayed in a <code>viewPager</code> and would like the Negative button to trigger moving the page back one page in the viewPager, and the Positive button to trigger moving to the next page in the view pager:</p>\n\n<p><strong>ViewPagerFragment</strong></p>\n\n<pre><code>class RegistrationPagerFragment : Fragment(), Injectable {\n\n    private val pageOneFragment = PageOneFragment()\n    private val pageTwoFragment = PageTwoFragment()\n    private val pageThreeFragment = PageThreeFragment()\n\n    ...\n\n    override fun onActivityCreated(savedInstanceState: Bundle?) {\n        super.onActivityCreated(savedInstanceState)\n        registrationViewModel = ViewModelProviders.of(this, viewModelFactory)\n                .get(RegistrationViewModel::class.java)\n\n        pageOneFragment.viewPager = this\n        pageTwoFragment.viewPager = this\n        pageThreeFragment.viewPager = this\n    }\n\n    ...\n\n    fun previousPage() {\n        if (viewPager.currentItem == 0) return\n        var previousPageIndex = viewPager.currentItem - 1\n        viewPager.setCurrentItem(previousPageIndex)\n    }\n\n    fun nextPage() {\n        if (viewPager.currentItem == viewPager.adapter!!.count - 1) return\n        var nextPageIndex = viewPager.currentItem + 1\n        viewPager.setCurrentItem(nextPageIndex)\n    }\n\n    fun onBackPressed() {\n        if (viewPager.currentItem &gt; 0) {\n            previousPage()\n        } else {\n            activity?.onBackPressed()\n        }\n    }\n\n    ...\n}\n\n</code></pre>\n\n<p><strong>PageOneFragment</strong></p>\n\n<pre><code>class PageOneFragment : Fragment() {\n\n    lateinit var viewPager: ViewPagerFragment\n\n    ...\n\n    fun someFunctionThatTriggersAlertDialog() {\n        context?.showError(\n            R.string.some_alert_message,\n            negativeLabel = R.string.modal_action_back,\n            negativeAction = { \n                viewPager.onBackPressed() \n            },\n            positiveLabel = R.string.modal_action_next,\n            positiveAction = { \n                viewPager.nextPage() \n            }\n         )\n    }\n\n    ...\n\n</code></pre>\n\n<p>When the PageOneFragment's displays that AlertDialog, the negative/positive functions don't call the <code>viewPager.nextPage()</code> function. </p>\n\n<p>If I were to put the contents of what's inside of the viewPager.nextPage() function inside of the block I call said function (like I do in the working example above), it would work fine. Why is this?</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 3189, "user_id": 5564683, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/VotLv.jpg?s=128&g=1", "display_name": "Augusto Carmo", "link": "https://stackoverflow.com/users/5564683/augusto-carmo"}, "edited": false, "score": 0, "creation_date": 1574934103, "post_id": 59057676, "comment_id": 104407215, "body": "I managed to reproduce it locally, but I got no idea on how to fix it :/. And as a heads up, sometimes the last lifecycle printed was <code>onPause</code>. That&#39;s a very strange behavior from Android =/"}], "owner": {"reputation": 114, "user_id": 6026476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vZyvw.jpg?s=128&g=1", "display_name": "Gustavo Ara&#250;jo", "link": "https://stackoverflow.com/users/6026476/gustavo-ara%c3%bajo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 2, "answer_count": 0, "score": 2, "last_activity_date": 1574795197, "creation_date": 1574794539, "last_edit_date": 1574795197, "question_id": 59057676, "link": "https://stackoverflow.com/questions/59057676/activity-stucked-after-returning-from-activity-that-changed-night-mode", "title": "Activity stucked after returning from Activity that changed Night Mode", "body": "<p>I'm facing a weird problem in which my Activity gets stuck with a black screen and the last callback from the lifecycle is the <code>onStop()</code>.</p>\n\n<p>The flow is: </p>\n\n<ol>\n<li>MainActivity open an AnotherActivity</li>\n<li>AnotherActivity change the app's night mode (the important part is force the app to change from night to light or vice-versa)</li>\n<li>Finish AnotherActivity. After this the app should resume MainActivity</li>\n</ol>\n\n<p>After step 3 the bug appears.</p>\n\n<p>Among all the APIs that I've tested, after step 3:</p>\n\n<ul>\n<li>From API 16 to API 22: The MainActivity only shows a black screen;</li>\n<li>From API 16 to API 28: The last lifecycle call made by MainActivity is the <code>onStop()</code>.</li>\n</ul>\n\n<p>Here is the code of both Activities that I'm using.\nThe full project is available in <a href=\"https://github.com/GustavoAraujoLetras/TestingIssue3759\" rel=\"nofollow noreferrer\">my GitHub Repository</a>.</p>\n\n<p><strong>MainActivity.kt</strong></p>\n\n<pre><code>package com.gustavogoma.android.test.testingissue3759\n\nimport android.content.Intent\nimport android.os.Bundle\nimport android.util.Log\nimport androidx.appcompat.app.AppCompatActivity\n\nclass MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        Log.i(TAG, \"onCreate\")\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n\n        if (shouldOpenAnotherActivity) {\n            shouldOpenAnotherActivity = false\n\n            startActivity(Intent(this, AnotherActivity::class.java))\n        }\n    }\n\n    override fun onRestart() {\n        Log.i(TAG, \"onRestart\")\n        super.onRestart()\n    }\n\n    override fun onStart() {\n        Log.i(TAG, \"onStart\")\n        super.onStart()\n    }\n\n    override fun onResume() {\n        Log.i(TAG, \"onResume\")\n        super.onResume()\n    }\n\n    override fun onPause() {\n        Log.i(TAG, \"onPause\")\n        super.onPause()\n    }\n\n    override fun onStop() {\n        Log.i(TAG,  \"onStop\")\n        super.onStop()\n    }\n\n    override fun onDestroy() {\n        Log.i(TAG, \"onDestroy\")\n        super.onDestroy()\n    }\n\n    companion object {\n        private val TAG = MainActivity::class.java.simpleName\n\n        private var shouldOpenAnotherActivity = true\n    }\n}\n</code></pre>\n\n<p><strong>AnotherActivity.kt</strong></p>\n\n<pre><code>package com.gustavogoma.android.test.testingissue3759\n\nimport androidx.appcompat.app.AppCompatActivity\nimport android.os.Bundle\nimport android.os.Handler\nimport android.os.Looper\nimport androidx.appcompat.app.AppCompatDelegate\nimport kotlinx.android.synthetic.main.activity_another.*\n\nclass AnotherActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_another)\n\n\n\n        Handler(Looper.getMainLooper()).postDelayed(\n            {\n                AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_YES)\n\n                finish()\n            },\n            5000\n        )\n    }\n}\n</code></pre>\n\n<p><strong>MainActivity logcat (Android 16):</strong></p>\n\n<pre><code>11-26 17:03:45.806 2051-2051 I/MainActivity: onCreate\n11-26 17:03:46.098 2051-2051 I/MainActivity: onStart\n11-26 17:03:46.101 2051-2051 I/MainActivity: onResume\n11-26 17:03:46.114 2051-2051 I/MainActivity: onPause\n11-26 17:03:46.344 2051-2051 I/MainActivity: onStop\n11-26 17:03:51.310 2051-2051 I/MainActivity: onRestart\n11-26 17:03:51.311 2051-2051 I/MainActivity: onStart\n11-26 17:03:51.312 2051-2051 I/MainActivity: onResume\n11-26 17:03:51.354 2051-2051 I/MainActivity: onPause\n11-26 17:03:51.355 2051-2051 I/MainActivity: onStop\n11-26 17:03:51.355 2051-2051 I/MainActivity: onDestroy\n11-26 17:03:51.357 2051-2051 I/MainActivity: onCreate\n11-26 17:03:51.383 2051-2051 I/MainActivity: onStart\n11-26 17:03:51.383 2051-2051 I/MainActivity: onResume\n11-26 17:03:51.392 2051-2051 I/MainActivity: onPause\n11-26 17:03:51.393 2051-2051 I/MainActivity: onStop\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 190, "user_id": 11567968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T4BVh.jpg?s=128&g=1", "display_name": "Ludiras", "link": "https://stackoverflow.com/users/11567968/ludiras"}, "edited": false, "score": 0, "creation_date": 1574801418, "post_id": 59057991, "comment_id": 104357726, "body": "I&#39;ve edited my question with a few more classes. I also think that&#39;s the line that handles the text set, but I can not understand how it is able to know that in that TextView there is a 1, a 2, and so on."}, {"owner": {"reputation": 76, "user_id": 3340804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/624224c3a08720ca5f67ad22405ea62c?s=128&d=identicon&r=PG&f=1", "display_name": "GavinSkippy", "link": "https://stackoverflow.com/users/3340804/gavinskippy"}, "reply_to_user": {"reputation": 190, "user_id": 11567968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T4BVh.jpg?s=128&g=1", "display_name": "Ludiras", "link": "https://stackoverflow.com/users/11567968/ludiras"}, "edited": false, "score": 0, "creation_date": 1574847525, "post_id": 59057991, "comment_id": 104372575, "body": "The line above is taking the text from the button that is clicked and appending it to the password field. In your layout file you have the text of each TextView set as android:text=&quot;@string/number_one&quot;. I assume this string refers to a character &quot;1&quot; in the Strings.xml file.  So when you click on a button, it is taking the text of the button, which is in the strings.xml file."}], "tags": [], "owner": {"reputation": 76, "user_id": 3340804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/624224c3a08720ca5f67ad22405ea62c?s=128&d=identicon&r=PG&f=1", "display_name": "GavinSkippy", "link": "https://stackoverflow.com/users/3340804/gavinskippy"}, "is_accepted": true, "score": 1, "last_activity_date": 1574795910, "creation_date": 1574795910, "answer_id": 59057991, "question_id": 59056949, "link": "https://stackoverflow.com/questions/59056949/wheres-he-taking-the-number-from-custom-numeric-keyboard-android-kotlin/59057991#59057991", "title": "Where&#39;s he taking the number from? Custom numeric keyboard (Android Kotlin)", "body": "<p>I think it is the line </p>\n\n<pre><code>password_field.append((v as TextView).text)\n</code></pre>\n\n<p>I would need more of the code or the layout file etc. but from the code that you have posted, this seems to be the line that would do it.</p>\n"}], "owner": {"reputation": 190, "user_id": 11567968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T4BVh.jpg?s=128&g=1", "display_name": "Ludiras", "link": "https://stackoverflow.com/users/11567968/ludiras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 59057991, "answer_count": 1, "score": 0, "last_activity_date": 1574801327, "creation_date": 1574791483, "last_edit_date": 1574801327, "question_id": 59056949, "link": "https://stackoverflow.com/questions/59056949/wheres-he-taking-the-number-from-custom-numeric-keyboard-android-kotlin", "title": "Where&#39;s he taking the number from? Custom numeric keyboard (Android Kotlin)", "body": "<p>I have a small program that I have looked for of example where a numerical personalized keyboard is created in which I have several doubts: </p>\n\n<pre><code>import android.os.Bundle\nimport android.text.Editable\nimport android.view.View\nimport android.widget.TextView\nimport androidx.appcompat.app.AppCompatActivity\nimport kotlinx.android.synthetic.main.activity_main.*\n\n\nclass MainActivity : AppCompatActivity(), View.OnClickListener {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        initViews()\n    }\n\n    private fun initViews() {\n        t9_key_0.setOnClickListener(this)\n        t9_key_1.setOnClickListener(this)\n        t9_key_2.setOnClickListener(this)\n        t9_key_3.setOnClickListener(this)\n        t9_key_4.setOnClickListener(this)\n        t9_key_5.setOnClickListener(this)\n        t9_key_6.setOnClickListener(this)\n        t9_key_7.setOnClickListener(this)\n        t9_key_8.setOnClickListener(this)\n        t9_key_9.setOnClickListener(this)\n        t9_key_backspace.setOnClickListener(this)\n        t9_key_clear.setOnClickListener(this)\n    }\n\n    override fun onClick(v: View?) {\n\n        if (v?.tag != null &amp;&amp; \"number_button\" == v.tag) {\n\n            password_field.append((v as TextView).text)\n            return\n\n        }\n        when (v?.id) {\n\n            R.id.t9_key_clear -&gt; {\n\n                password_field.text = null\n\n            }\n            R.id.t9_key_backspace -&gt; {\n\n                val editable: Editable = password_field.text\n                val charCount = editable.length\n\n                if (charCount &gt; 0) {\n\n                    editable.delete(charCount - 1, charCount)\n\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>These are my styles:</p>\n\n<pre><code>&lt;style name=\"keyboard_row\"&gt;\n    &lt;item name=\"android:layout_width\"&gt;match_parent&lt;/item&gt;\n    &lt;item name=\"android:layout_height\"&gt;wrap_content&lt;/item&gt;\n    &lt;item name=\"android:divider\"&gt;@drawable/keyboard_divider&lt;/item&gt;\n    &lt;item name=\"android:gravity\"&gt;center&lt;/item&gt;\n    &lt;item name=\"android:showDividers\"&gt;beginning|middle|end&lt;/item&gt;\n&lt;/style&gt;\n\n&lt;style name=\"keyboard_button\"&gt;\n    &lt;item name=\"android:layout_width\"&gt;0dp&lt;/item&gt;\n    &lt;item name=\"android:layout_height\"&gt;match_parent&lt;/item&gt;\n    &lt;item name=\"android:layout_weight\"&gt;1&lt;/item&gt;\n    &lt;item name=\"android:paddingTop\"&gt;12dp&lt;/item&gt;\n    &lt;item name=\"android:paddingBottom\"&gt;12dp&lt;/item&gt;\n    &lt;item name=\"android:clickable\"&gt;true&lt;/item&gt;\n    &lt;item name=\"android:gravity\"&gt;center&lt;/item&gt;\n    &lt;item name=\"android:scaleType\"&gt;centerInside&lt;/item&gt;\n    &lt;item name=\"android:background\"&gt;@drawable/keyboard_button_bg&lt;/item&gt;\n    &lt;item name=\"android:textAppearance\"&gt;?android:attr/textAppearanceLarge&lt;/item&gt;\n&lt;/style&gt;\n\n&lt;style name=\"keyboard_number_button\" parent=\"keyboard_button\"&gt;\n    &lt;item name=\"android:tag\"&gt;number_button&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n\n<p>And this is my layout:</p>\n\n<pre><code>&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"wrap_content\"\nandroid:layout_gravity=\"center\"\nandroid:layout_margin=\"20dp\"\nandroid:orientation=\"vertical\"\nandroid:padding=\"8dp\"&gt;\n\n&lt;EditText\n    android:id=\"@+id/password_field\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:layout_marginBottom=\"8dp\"\n    android:background=\"#eeeeee\"\n    android:enabled=\"false\"\n    android:minHeight=\"48dp\"\n    android:paddingLeft=\"8dp\"\n    android:paddingRight=\"8dp\"\n    android:singleLine=\"true\"\n    android:textAppearance=\"?android:attr/textAppearanceMedium\" /&gt;\n\n&lt;TableLayout\n    android:id=\"@+id/keyboard\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:background=\"@android:color/white\"\n    android:divider=\"@drawable/keyboard_divider\"\n    android:orientation=\"vertical\"\n    android:showDividers=\"beginning|middle|end\"&gt;\n\n    &lt;TableRow style=\"@style/keyboard_row\"&gt;\n\n        &lt;TextView\n            android:id=\"@+id/t9_key_1\"\n            style=\"@style/keyboard_number_button\"\n            android:text=\"@string/number_one\" /&gt;\n\n        &lt;TextView\n            android:id=\"@+id/t9_key_2\"\n            style=\"@style/keyboard_number_button\"\n            android:text=\"@string/number_two\" /&gt;\n\n        &lt;TextView\n            android:id=\"@+id/t9_key_3\"\n            style=\"@style/keyboard_number_button\"\n            android:text=\"@string/number_three\" /&gt;\n    &lt;/TableRow&gt;\n\n    &lt;TableRow style=\"@style/keyboard_row\"&gt;\n\n        &lt;TextView\n            android:id=\"@+id/t9_key_4\"\n            style=\"@style/keyboard_number_button\"\n            android:text=\"@string/number_four\" /&gt;\n\n        &lt;TextView\n            android:id=\"@+id/t9_key_5\"\n            style=\"@style/keyboard_number_button\"\n            android:text=\"@string/number_five\" /&gt;\n\n        &lt;TextView\n            android:id=\"@+id/t9_key_6\"\n            style=\"@style/keyboard_number_button\"\n            android:text=\"@string/number_six\" /&gt;\n    &lt;/TableRow&gt;\n\n    &lt;TableRow style=\"@style/keyboard_row\"&gt;\n\n        &lt;TextView\n            android:id=\"@+id/t9_key_7\"\n            style=\"@style/keyboard_number_button\"\n            android:text=\"@string/number_seven\" /&gt;\n\n        &lt;TextView\n            android:id=\"@+id/t9_key_8\"\n            style=\"@style/keyboard_number_button\"\n            android:text=\"@string/number_eight\" /&gt;\n\n        &lt;TextView\n            android:id=\"@+id/t9_key_9\"\n            style=\"@style/keyboard_number_button\"\n            android:text=\"@string/number_nine\" /&gt;\n    &lt;/TableRow&gt;\n\n    &lt;TableRow style=\"@style/keyboard_row\"&gt;\n\n        &lt;TextView\n            android:id=\"@+id/t9_key_clear\"\n            style=\"@style/keyboard_button\"\n            android:text=\"@string/btn_clear\"\n            android:textAppearance=\"?android:attr/textAppearanceMedium\" /&gt;\n\n        &lt;TextView\n            android:id=\"@+id/t9_key_0\"\n            style=\"@style/keyboard_number_button\"\n            android:text=\"@string/number_zero\" /&gt;\n\n        &lt;TextView\n            android:id=\"@+id/t9_key_backspace\"\n            style=\"@style/keyboard_button\"\n            android:text=\"@string/btn_backspace\"\n            android:textAppearance=\"?android:attr/textAppearanceMedium\" /&gt;\n    &lt;/TableRow&gt;\n&lt;/TableLayout&gt;\n</code></pre>\n\n<p></p>\n\n<p>First of all the first doubt I had was about the tag. I don't know if I'm right but as I've read, these are used for when we have many buttons with the same onClick event, they are all grouped with the same tag and so we do not have to write the same code many times. What I can not understand, is where is capturing the number that corresponds to that button, ie: how does Android Studio know that when I press the button that has 1, should place that 1? I don't see any line of code where I say it, or at least not something I know, that's why I come to you.</p>\n"}, {"tags": ["android", "android-layout", "kotlin", "android-databinding"], "comments": [{"owner": {"reputation": 413, "user_id": 6185975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c970d20395df0dc1d7c3dbad66928ec?s=128&d=identicon&r=PG&f=1", "display_name": "Lenin", "link": "https://stackoverflow.com/users/6185975/lenin"}, "edited": false, "score": 0, "creation_date": 1574790856, "post_id": 59056642, "comment_id": 104353070, "body": "buttonBg is private in your class so you would not be able to access it directly"}, {"owner": {"reputation": 15439, "user_id": 444668, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7ffced6cbed40a750c8ef8a365872fd7?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/444668/jonathan"}, "reply_to_user": {"reputation": 413, "user_id": 6185975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c970d20395df0dc1d7c3dbad66928ec?s=128&d=identicon&r=PG&f=1", "display_name": "Lenin", "link": "https://stackoverflow.com/users/6185975/lenin"}, "edited": false, "score": 0, "creation_date": 1574791581, "post_id": 59056642, "comment_id": 104353407, "body": "It is beging accessed by the get and setter function"}], "answers": [{"comments": [{"owner": {"reputation": 15439, "user_id": 444668, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7ffced6cbed40a750c8ef8a365872fd7?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/444668/jonathan"}, "edited": false, "score": 0, "creation_date": 1574852974, "post_id": 59059876, "comment_id": 104375778, "body": "But if i call setBacground from outside the viewModel to dyanmically change the bg, i would have to pass a textview?"}, {"owner": {"reputation": 116, "user_id": 11385462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87464b4ac6fec2d64137368432ec5924?s=128&d=identicon&r=PG&f=1", "display_name": "JacquesBauer", "link": "https://stackoverflow.com/users/11385462/jacquesbauer"}, "reply_to_user": {"reputation": 15439, "user_id": 444668, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7ffced6cbed40a750c8ef8a365872fd7?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/444668/jonathan"}, "edited": false, "score": 0, "creation_date": 1574864133, "post_id": 59059876, "comment_id": 104382151, "body": "You do not have to call this static method. The databinding library will call the method with the appropriate TextView and the data defined when you set it up in the xml layout file (the  <code>android:background=&quot;@={viewModel.buttonBg}&quot;</code> part). Also any changes to the Integer buttonBackground from your binding will call the setBackground binding method with the appropriate TextView."}, {"owner": {"reputation": 15439, "user_id": 444668, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7ffced6cbed40a750c8ef8a365872fd7?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/444668/jonathan"}, "edited": false, "score": 0, "creation_date": 1574865153, "post_id": 59059876, "comment_id": 104382778, "body": "So how can i dynamically change the background from code then? This is why i want to use data binding, so i can initially set a background and then later during the lifecycle of the view, change the background based on a state i have changed. this works perfectly fine for changing the text but not so for background drawable as i keep getting compilation errors saying how it cant find a setter or getter for a drawable(android:background)"}, {"owner": {"reputation": 116, "user_id": 11385462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87464b4ac6fec2d64137368432ec5924?s=128&d=identicon&r=PG&f=1", "display_name": "JacquesBauer", "link": "https://stackoverflow.com/users/11385462/jacquesbauer"}, "reply_to_user": {"reputation": 15439, "user_id": 444668, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7ffced6cbed40a750c8ef8a365872fd7?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/444668/jonathan"}, "edited": false, "score": 0, "creation_date": 1574869089, "post_id": 59059876, "comment_id": 104385025, "body": "If you want to change the background dynamically, all you would have to do is call your setButtonBg method with whatever you want. The databinding library will go ahead and change the background then. From some further research I came across the same error as you and found that if you have not already you should define: <code>apply plugin: &#39;kotlin-kapt&#39;</code> in your build.gradle. (referencing <a href=\"https://stackoverflow.com/questions/52655607/why-is-this-bindingadapter-not-working-in-kotlin\" title=\"why is this bindingadapter not working in kotlin\">stackoverflow.com/questions/52655607/&hellip;</a> )"}, {"owner": {"reputation": 15439, "user_id": 444668, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7ffced6cbed40a750c8ef8a365872fd7?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/444668/jonathan"}, "edited": false, "score": 0, "creation_date": 1574870261, "post_id": 59059876, "comment_id": 104385662, "body": "ahh ok so the setBackground method is a new method i create but i dont indirectly use as android databinding will use that? How does android databinding know to use that method?"}, {"owner": {"reputation": 116, "user_id": 11385462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87464b4ac6fec2d64137368432ec5924?s=128&d=identicon&r=PG&f=1", "display_name": "JacquesBauer", "link": "https://stackoverflow.com/users/11385462/jacquesbauer"}, "reply_to_user": {"reputation": 15439, "user_id": 444668, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7ffced6cbed40a750c8ef8a365872fd7?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/444668/jonathan"}, "edited": false, "score": 1, "creation_date": 1574872535, "post_id": 59059876, "comment_id": 104386888, "body": "Correct and the combination of the string inside of the @BindingAdapter annotation and the first parameter of the binding adapter method seem to tell android when to override the default behavior. So with the example I have in the answer it would use the setBackground method when using databinding with android:background on a TextView in your xml layout."}, {"owner": {"reputation": 116, "user_id": 11385462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87464b4ac6fec2d64137368432ec5924?s=128&d=identicon&r=PG&f=1", "display_name": "JacquesBauer", "link": "https://stackoverflow.com/users/11385462/jacquesbauer"}, "reply_to_user": {"reputation": 15439, "user_id": 444668, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7ffced6cbed40a750c8ef8a365872fd7?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/444668/jonathan"}, "edited": false, "score": 1, "creation_date": 1574872874, "post_id": 59059876, "comment_id": 104387076, "body": "Another note, you can actually define whatever string you would like for the BindingAdapter and it can pick it up in the xml layout. So if you define a function such as: <code>@BindingAdapter(&quot;backgroundSetter&quot;)</code> and then refer to it in the xml layout as <code>app:backgroundSetter=&quot;@{viewModel.buttonBg}&quot;</code>"}, {"owner": {"reputation": 15439, "user_id": 444668, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7ffced6cbed40a750c8ef8a365872fd7?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/444668/jonathan"}, "edited": false, "score": 0, "creation_date": 1574875048, "post_id": 59059876, "comment_id": 104388202, "body": "Brilliant this worked a treat. Data binding is no easy subject!"}, {"owner": {"reputation": 116, "user_id": 11385462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87464b4ac6fec2d64137368432ec5924?s=128&d=identicon&r=PG&f=1", "display_name": "JacquesBauer", "link": "https://stackoverflow.com/users/11385462/jacquesbauer"}, "reply_to_user": {"reputation": 15439, "user_id": 444668, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7ffced6cbed40a750c8ef8a365872fd7?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/444668/jonathan"}, "edited": false, "score": 0, "creation_date": 1574875497, "post_id": 59059876, "comment_id": 104388409, "body": "Glad to hear it helped!"}], "tags": [], "owner": {"reputation": 116, "user_id": 11385462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87464b4ac6fec2d64137368432ec5924?s=128&d=identicon&r=PG&f=1", "display_name": "JacquesBauer", "link": "https://stackoverflow.com/users/11385462/jacquesbauer"}, "is_accepted": true, "score": 1, "last_activity_date": 1574805380, "last_edit_date": 1574805380, "creation_date": 1574805065, "answer_id": 59059876, "question_id": 59056642, "link": "https://stackoverflow.com/questions/59056642/android-binding-of-drawable/59059876#59059876", "title": "Android binding of drawable?", "body": "<p>Sorry I am not as familiar with Kotlin, but I know in Java that you can setup a static data binding to ensure it will use resources:</p>\n\n<pre><code>    @BindingAdapter(\"android:background\")\n    public static void setBackground(TextView view, Integer buttonBackground){\n        Drawable background = view.getContext().getResources().getDrawable(buttonBackground, null);\n        view.setBackground(background);\n    }\n</code></pre>\n\n<p>You can then keep the binding as you have it in your layout xml.</p>\n\n<p>Edit:\nMore information can be found at <a href=\"https://developer.android.com/topic/libraries/data-binding/binding-adapters.html#kotlin\" rel=\"nofollow noreferrer\">https://developer.android.com/topic/libraries/data-binding/binding-adapters.html#kotlin</a></p>\n"}], "owner": {"reputation": 15439, "user_id": 444668, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7ffced6cbed40a750c8ef8a365872fd7?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/444668/jonathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 349, "favorite_count": 0, "accepted_answer_id": 59059876, "answer_count": 1, "score": 0, "last_activity_date": 1574805380, "creation_date": 1574790197, "last_edit_date": 1574798546, "question_id": 59056642, "link": "https://stackoverflow.com/questions/59056642/android-binding-of-drawable", "title": "Android binding of drawable?", "body": "<p>Hi am tryin to use data binding to bind a drawable res ID into a textview via code but i keep getting this error:</p>\n\n<pre><code>Cannot find a getter for &lt;android.widget.TextView android:background&gt; that accepts parameter type 'int'\n\nIf a binding adapter provides the getter, check that the adapter is annotated correctly and that the parameter type matches.\n</code></pre>\n\n<p>Here is the viewModel code</p>\n\n<pre><code>   @DrawableRes\n    private var buttonBg: Int = R.drawable.white_btn\n\n    @Bindable\n    fun getButtonBg(): Int {\n        return buttonBg\n    }\n\n    @Bindable\n    fun setButtonBg(bgRes: Int) {\n        if (buttonBg != bgRes) {\n            buttonBg = bgRes\n            notifyPropertyChanged(BR.buttonBg)\n        }\n    }\n</code></pre>\n\n<p>xml</p>\n\n<pre><code> &lt;TextView\n            android:id=\"@+id/toggle_textButton\"\n            style=\"@style/TextAppearance.AppCompat.Body1\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:background=\"@={viewModel.buttonBg}\"\n            android:padding=\"5dp\"\n            app:layout_constraintBottom_toBottomOf=\"parent\"\n            app:layout_constraintEnd_toEndOf=\"parent\"\n            app:layout_constraintRight_toRightOf=\"parent\"\n            app:layout_constraintTop_toTopOf=\"parent\"\n            tools:text=\"@string/follow\" /&gt;\n</code></pre>\n"}, {"tags": ["android", "kotlin", "ktor", "kotlin-multiplatform", "kotlinx.serialization"], "comments": [{"owner": {"reputation": 914, "user_id": 7473685, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-KRePsh63XPc/AAAAAAAAAAI/AAAAAAAAAVQ/H7aB1jJaHxc/photo.jpg?sz=128", "display_name": "Pavan Varma", "link": "https://stackoverflow.com/users/7473685/pavan-varma"}, "edited": false, "score": 1, "creation_date": 1574790500, "post_id": 59056611, "comment_id": 104352894, "body": "try logging the <code>text</code> and make sure that the text is in JSON format"}, {"owner": {"reputation": 14508, "user_id": 751581, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/6f8add1e3f8e4437fc89f08172de3c2d?s=128&d=identicon&r=PG", "display_name": "Patrick", "link": "https://stackoverflow.com/users/751581/patrick"}, "reply_to_user": {"reputation": 914, "user_id": 7473685, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-KRePsh63XPc/AAAAAAAAAAI/AAAAAAAAAVQ/H7aB1jJaHxc/photo.jpg?sz=128", "display_name": "Pavan Varma", "link": "https://stackoverflow.com/users/7473685/pavan-varma"}, "edited": false, "score": 0, "creation_date": 1574790889, "post_id": 59056611, "comment_id": 104353087, "body": "@PavanVarma updated with log results"}, {"owner": {"reputation": 914, "user_id": 7473685, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-KRePsh63XPc/AAAAAAAAAAI/AAAAAAAAAVQ/H7aB1jJaHxc/photo.jpg?sz=128", "display_name": "Pavan Varma", "link": "https://stackoverflow.com/users/7473685/pavan-varma"}, "edited": false, "score": 0, "creation_date": 1574791354, "post_id": 59056611, "comment_id": 104353303, "body": "is this code inside coroutine or suspend function?"}, {"owner": {"reputation": 14508, "user_id": 751581, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/6f8add1e3f8e4437fc89f08172de3c2d?s=128&d=identicon&r=PG", "display_name": "Patrick", "link": "https://stackoverflow.com/users/751581/patrick"}, "reply_to_user": {"reputation": 914, "user_id": 7473685, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-KRePsh63XPc/AAAAAAAAAAI/AAAAAAAAAVQ/H7aB1jJaHxc/photo.jpg?sz=128", "display_name": "Pavan Varma", "link": "https://stackoverflow.com/users/7473685/pavan-varma"}, "edited": false, "score": 0, "creation_date": 1574791653, "post_id": 59056611, "comment_id": 104353438, "body": "inside a coroutine.  GlobalScope.async {...}"}], "owner": {"reputation": 14508, "user_id": 751581, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/6f8add1e3f8e4437fc89f08172de3c2d?s=128&d=identicon&r=PG", "display_name": "Patrick", "link": "https://stackoverflow.com/users/751581/patrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 537, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1576742481, "creation_date": 1574790019, "last_edit_date": 1576742481, "question_id": 59056611, "link": "https://stackoverflow.com/questions/59056611/ktor-jsondecodingexception-on-valid-json", "title": "Ktor: JsonDecodingException on valid JSON", "body": "<p>The exception below is thrown after this code.  Interestingly it works while debugging and stepping through the code.  The exception is thrown on the last line.  </p>\n\n<p>Kotlin 1.3.60</p>\n\n<p>Ktor 1.2.6</p>\n\n<p>kotlinx.serialization 0.14.0</p>\n\n<pre><code>} catch (throwable: Throwable) {\n   when (throwable) {\n      is ClientRequestException -&gt; {\n          val statusCode = throwable.response.status.value\n          val byteArray = ByteArray(throwable.response.content.availableForRead)\n          throwable.response.content.readFully(byteArray, 0, byteArray.size)\n          val text = String(byteArray, 0, byteArray.size, Charsets.UTF_8)\n          logger.log(\"text is: $text\")\n          val isJson = throwable.response.headers[\"Content-Type\"]?.startsWith(\"application/json\") ?: false\n          val failure = if (isJson) {\n              val json = Json(JsonConfiguration.Default).parseJson(text).jsonObject\n</code></pre>\n\n<p>When not stepping through with the debugger, the log states that <code>text</code> is empty.  How can this be?  Is this running before all the content has been transferred?</p>\n\n<pre><code>kotlinx.serialization.json.JsonDecodingException: Invalid JSON at 0: Can't begin reading from here\n at kotlinx.serialization.json.internal.JsonReader.fail(JsonReader.kt:293)\n at kotlinx.serialization.json.internal.JsonReader.fail$default(JsonReader.kt:292)\n</code></pre>\n"}, {"tags": ["java", "kotlin"], "comments": [{"owner": {"reputation": 919, "user_id": 5371168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d1f0af42928cb0bb3b8b6f7a42adb3e?s=128&d=identicon&r=PG&f=1", "display_name": "D. Lawrence", "link": "https://stackoverflow.com/users/5371168/d-lawrence"}, "edited": false, "score": 0, "creation_date": 1574790069, "post_id": 59056593, "comment_id": 104352674, "body": "Shouldn&#39;t you call <code>MyMonth.JAN.name</code> instead?"}, {"owner": {"reputation": 25736, "user_id": 6395627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dac5493d339ba8cb379f4efb2485d65?s=128&d=identicon&r=PG&f=1", "display_name": "Slaw", "link": "https://stackoverflow.com/users/6395627/slaw"}, "edited": false, "score": 0, "creation_date": 1574791336, "post_id": 59056593, "comment_id": 104353296, "body": "My guess is since Kotlin enums already have a <code>name</code> property, as <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-enum/index.html\" rel=\"nofollow noreferrer\">seen here</a>, there&#39;s a conflict between the Java getter and the Kotlin property. If possible, I recommend changing the name of the Java field and getter to something other than <code>name</code> and <code>getName()</code>. Personally, I think it&#39;s a bad idea to have a field named <code>name</code> in a Java enum anyway, considering the existence of the <code>name()</code> method. If you can&#39;t change it, what if you call <code>getName()</code> explicitly in the Kotlin code?"}], "answers": [{"comments": [{"owner": {"reputation": 5619, "user_id": 2055854, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/974156d755f10981aba40d96375b7af5?s=128&d=identicon&r=PG", "display_name": "Orest", "link": "https://stackoverflow.com/users/2055854/orest"}, "edited": false, "score": 0, "creation_date": 1574790617, "post_id": 59056644, "comment_id": 104352946, "body": "In Java I can simply add a getter and call <code>MyMonth.JAN.getName()</code> which would return me what I need. But this getter is not used in Kotlin even though IDEA show me that it&#39;s from there, I&#39;ll update my question to make it more clear."}, {"owner": {"reputation": 5619, "user_id": 2055854, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/974156d755f10981aba40d96375b7af5?s=128&d=identicon&r=PG", "display_name": "Orest", "link": "https://stackoverflow.com/users/2055854/orest"}, "edited": false, "score": 0, "creation_date": 1574791184, "post_id": 59056644, "comment_id": 104353223, "body": "Hey @Slaw that&#39;s a good suggestion, unfortunately it&#39;s not possible to rename that field as I&#39;m not the owner of the library that has this enum. Also, I think it&#39;s not that rare when you have a Java enum that has field <code>name</code> in it."}, {"owner": {"reputation": 171740, "user_id": 869736, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/671f732e3c68c387c702112a30e5ebd8?s=128&d=identicon&r=PG&f=1", "display_name": "Louis Wasserman", "link": "https://stackoverflow.com/users/869736/louis-wasserman"}, "reply_to_user": {"reputation": 5619, "user_id": 2055854, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/974156d755f10981aba40d96375b7af5?s=128&d=identicon&r=PG", "display_name": "Orest", "link": "https://stackoverflow.com/users/2055854/orest"}, "edited": false, "score": 1, "creation_date": 1574791326, "post_id": 59056644, "comment_id": 104353287, "body": "<code>name</code> is specifically complicated by being already baked into the definition for enums. You may just have to call getName() explicitly and not use it as a property, even if IntelliJ tells you you don&#39;t have to.  It may be outright lying."}, {"owner": {"reputation": 5619, "user_id": 2055854, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/974156d755f10981aba40d96375b7af5?s=128&d=identicon&r=PG", "display_name": "Orest", "link": "https://stackoverflow.com/users/2055854/orest"}, "edited": false, "score": 0, "creation_date": 1574793572, "post_id": 59056644, "comment_id": 104354283, "body": "Yes I understand that <code>name</code> is baked into Kotlin enum, just noticed this weird behavior and was confused for a while. Thanks!"}], "tags": [], "owner": {"reputation": 171740, "user_id": 869736, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/671f732e3c68c387c702112a30e5ebd8?s=128&d=identicon&r=PG&f=1", "display_name": "Louis Wasserman", "link": "https://stackoverflow.com/users/869736/louis-wasserman"}, "is_accepted": false, "score": 4, "last_activity_date": 1574790201, "creation_date": 1574790201, "answer_id": 59056644, "question_id": 59056593, "link": "https://stackoverflow.com/questions/59056593/how-to-get-name-from-java-enum-in-kotlin/59056644#59056644", "title": "How to get name from Java enum in Kotlin", "body": "<p>Your Java API has <code>name</code> as a <em>private</em> field.  Nothing can access it, not in Java nor Kotlin.</p>\n\n<p>If you want to access it, add e.g. the following to the Java API:</p>\n\n<pre><code>public String getMonthName() { return name; }\n</code></pre>\n\n<p>...and then access it from Kotlin as</p>\n\n<pre><code>val month = MyMonth.JAN.monthName\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4313, "user_id": 2224047, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UZ83S.jpg?s=128&g=1", "display_name": "Nikolai  Shevchenko", "link": "https://stackoverflow.com/users/2224047/nikolai-shevchenko"}, "reply_to_user": {"reputation": 5619, "user_id": 2055854, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/974156d755f10981aba40d96375b7af5?s=128&d=identicon&r=PG", "display_name": "Orest", "link": "https://stackoverflow.com/users/2055854/orest"}, "edited": false, "score": 0, "creation_date": 1574794410, "post_id": 59056948, "comment_id": 104354682, "body": "@Orest that&#39;s because <b>name</b> is reserved in enums. If you could pick another property name, then it would be non-excessive"}, {"owner": {"reputation": 3743, "user_id": 10630900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ece5V.png?s=128&g=1", "display_name": "Minn", "link": "https://stackoverflow.com/users/10630900/minn"}, "reply_to_user": {"reputation": 5619, "user_id": 2055854, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/974156d755f10981aba40d96375b7af5?s=128&d=identicon&r=PG", "display_name": "Orest", "link": "https://stackoverflow.com/users/2055854/orest"}, "edited": false, "score": 1, "creation_date": 1574794479, "post_id": 59056948, "comment_id": 104354719, "body": "@Orest you could make an extension property which calls getName() to make it look more idiomatic"}, {"owner": {"reputation": 5619, "user_id": 2055854, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/974156d755f10981aba40d96375b7af5?s=128&d=identicon&r=PG", "display_name": "Orest", "link": "https://stackoverflow.com/users/2055854/orest"}, "reply_to_user": {"reputation": 4313, "user_id": 2224047, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UZ83S.jpg?s=128&g=1", "display_name": "Nikolai  Shevchenko", "link": "https://stackoverflow.com/users/2224047/nikolai-shevchenko"}, "edited": false, "score": 0, "creation_date": 1574795101, "post_id": 59056948, "comment_id": 104354982, "body": "@NikolaiShevchenko yes, it&#39;s clear to me, however I already mentioned that in the comments that it&#39;s not that rare when you have to use an enum that comes from Java with <code>name</code> field and you&#39;re not able to change it"}], "tags": [], "owner": {"reputation": 3743, "user_id": 10630900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ece5V.png?s=128&g=1", "display_name": "Minn", "link": "https://stackoverflow.com/users/10630900/minn"}, "is_accepted": true, "score": 2, "last_activity_date": 1574791466, "creation_date": 1574791466, "answer_id": 59056948, "question_id": 59056593, "link": "https://stackoverflow.com/questions/59056593/how-to-get-name-from-java-enum-in-kotlin/59056948#59056948", "title": "How to get name from Java enum in Kotlin", "body": "<p>You can call the getter directly instead of using the property syntax:</p>\n\n<pre><code>fun main() {\n    val name = MyMonth.JAN.getName()\n    println(name)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155, "user_id": 8415366, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4S5SVfABKzo/AAAAAAAAAAI/AAAAAAAAALk/-xa7eRCo-7Q/photo.jpg?sz=128", "display_name": "Prabudda Fernando", "link": "https://stackoverflow.com/users/8415366/prabudda-fernando"}, "is_accepted": false, "score": 0, "last_activity_date": 1574833127, "creation_date": 1574833127, "answer_id": 59063697, "question_id": 59056593, "link": "https://stackoverflow.com/questions/59056593/how-to-get-name-from-java-enum-in-kotlin/59063697#59063697", "title": "How to get name from Java enum in Kotlin", "body": "<p>enum is now low usage. You can use IntDef instead of enums.</p>\n\n<pre><code>@IntDef(MyMonth.JAN, MyMonth.FEB)\n@Retention(AnnotationRetention.SOURCE)\nannotation class MyMonth  {\n    companion object {\n        const val JAN = 0\n        const val FEB = 1\n\n        fun getDisplayString(toDoFilterTypes: Int): String {\n            return when (toDoFilterTypes) {\n                JAN -&gt; \"All\"\n                FEB -&gt; \"Job\"\n                else -&gt; \"N/A\"\n            }\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 5619, "user_id": 2055854, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/974156d755f10981aba40d96375b7af5?s=128&d=identicon&r=PG", "display_name": "Orest", "link": "https://stackoverflow.com/users/2055854/orest"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 915, "favorite_count": 0, "accepted_answer_id": 59056948, "answer_count": 3, "score": 0, "last_activity_date": 1574833127, "creation_date": 1574789951, "last_edit_date": 1574832821, "question_id": 59056593, "link": "https://stackoverflow.com/questions/59056593/how-to-get-name-from-java-enum-in-kotlin", "title": "How to get name from Java enum in Kotlin", "body": "<p>I have a project that is written with both Java and Kotlin languages and recently I faced next issue. </p>\n\n<p>Let's say we have <code>MyMonth</code> enum:</p>\n\n<pre><code>public enum MyMonth {\n    JAN(\"January\"),\n    FEB(\"February\");\n\n    private final String name;\n\n    MyMonth(final String name) {\n        this.name = name;\n    }\n\n    public String getName() {\n        return name;\n    }\n}\n</code></pre>\n\n<p>Then in Kotlin when we print the name of the month:</p>\n\n<pre><code>fun main() {\n    val month = MyMonth.JAN\n    println(month.name)\n}\n</code></pre>\n\n<p>we get:</p>\n\n<p><code>JAN</code> </p>\n\n<p>which is what is described in the documentation <code>https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-enum/name.html</code>, however actually the name should be <code>January</code>. </p>\n\n<p>Is there a way to get a name in Kotlin that is specified in Java enum?</p>\n\n<p>UPD: My Kotlin version is <code>1.3.30-release-170</code></p>\n\n<p>UPD2: IDEA even shows me that name is coming from the <code>getName()</code> method defined in Java:\n<a href=\"https://i.stack.imgur.com/Mq8AF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Mq8AF.png\" alt=\"enter image description here\"></a></p>\n\n<p>UPD3: When we explicitly use <code>.getName()</code> it works, however it looks kind of weird </p>\n"}, {"tags": ["android", "kotlin", "jsoup", "kotlin-coroutines"], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 7228093, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/937b1e24c6d74a60fb482e57dcc7ec38?s=128&d=identicon&r=PG&f=1", "display_name": "Efra&#237;n", "link": "https://stackoverflow.com/users/7228093/efra%c3%adn"}, "edited": false, "score": 0, "creation_date": 1574792073, "post_id": 59056633, "comment_id": 104353656, "body": "Was my thought also, but is not the case, at least not if i&#39;m using correctly the Debug: In the catch i make scrap.error = true which i use later to know if the request failed or not, setted an stop at a log between scrapPage() and downloadImages(), checked the variable links, and error was false, meaning that it never passed for the catch, or at least that&#39;s what i think it happened."}, {"owner": {"reputation": 914, "user_id": 7473685, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-KRePsh63XPc/AAAAAAAAAAI/AAAAAAAAAVQ/H7aB1jJaHxc/photo.jpg?sz=128", "display_name": "Pavan Varma", "link": "https://stackoverflow.com/users/7473685/pavan-varma"}, "reply_to_user": {"reputation": 145, "user_id": 7228093, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/937b1e24c6d74a60fb482e57dcc7ec38?s=128&d=identicon&r=PG&f=1", "display_name": "Efra&#237;n", "link": "https://stackoverflow.com/users/7228093/efra%c3%adn"}, "edited": false, "score": 0, "creation_date": 1574792236, "post_id": 59056633, "comment_id": 104353718, "body": "for your <code>scrap.error</code> to be updated properly add <code>else</code> condition in your <code>when</code>"}, {"owner": {"reputation": 145, "user_id": 7228093, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/937b1e24c6d74a60fb482e57dcc7ec38?s=128&d=identicon&r=PG&f=1", "display_name": "Efra&#237;n", "link": "https://stackoverflow.com/users/7228093/efra%c3%adn"}, "edited": false, "score": 0, "creation_date": 1574819991, "post_id": 59056633, "comment_id": 104363085, "body": "Sorry to answer late, i was away and couldn&#39;t check it. Yes, it was the reason, seems like for some reason i&#39;m still checking, my code doesn&#39;t seems to be sending the url, but instead an empty string, reason as to why the request fails. Thanks for your help!"}], "tags": [], "owner": {"reputation": 914, "user_id": 7473685, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-KRePsh63XPc/AAAAAAAAAAI/AAAAAAAAAVQ/H7aB1jJaHxc/photo.jpg?sz=128", "display_name": "Pavan Varma", "link": "https://stackoverflow.com/users/7473685/pavan-varma"}, "is_accepted": true, "score": 1, "last_activity_date": 1574790167, "creation_date": 1574790167, "answer_id": 59056633, "question_id": 59056431, "link": "https://stackoverflow.com/questions/59056431/make-coroutine-wait-for-jsoup-response-in-kotlin/59056633#59056633", "title": "Make Coroutine wait for Jsoup response in Kotlin", "body": "<p>Here <code>Jsoup.connect(URL).get()</code> is throwing an error. so, <code>Log.d(\"action\", \"Page downloaded\")</code> is not called.</p>\n\n<p>But since you are handling the exception, the code runs the catch part and completes the suspend function and moves on to <code>downloadImages()</code>.</p>\n\n<hr>\n\n<p><strong>Solution</strong></p>\n\n<p>First, add a log in the catch part of <code>scrapPage()</code> function and find out what is causing the exception. Everything else in your code is good. </p>\n"}], "owner": {"reputation": 145, "user_id": 7228093, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/937b1e24c6d74a60fb482e57dcc7ec38?s=128&d=identicon&r=PG&f=1", "display_name": "Efra&#237;n", "link": "https://stackoverflow.com/users/7228093/efra%c3%adn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 783, "favorite_count": 0, "accepted_answer_id": 59056633, "answer_count": 1, "score": 0, "last_activity_date": 1574790167, "creation_date": 1574789372, "question_id": 59056431, "link": "https://stackoverflow.com/questions/59056431/make-coroutine-wait-for-jsoup-response-in-kotlin", "title": "Make Coroutine wait for Jsoup response in Kotlin", "body": "<p>I'm kind of new developing with Android, and have problems understanding how things works. I made an app to scrap content from a page, and download elements, first with AsyncTask and worked, but since AsyncTask doesn't let me communicate with the UI Activity on progress, i decided to change to coroutines, checked an example, and the same code i used doesn't seems to work.</p>\n\n<p>I used a few logs to try to determine the problem, and seems like it doesn't wait for the Jsoup request. The coroutine first calls a method <code>scrapPage()</code> to download the HTML and scrap the links, and then calls <code>downloadImages()</code> to add the links to Android's DownloadManager. In the logs <code>Log.d(\"action\", \"Start Scrapping\")</code> is printed, but <code>Log.d(\"action\", \"Page downloaded\")</code> doesn't, still we get <code>Log.d(\"action\", \"End\")</code> from the coroutine, which makes me think that instead of waiting for the Jsoup request to answer, it goes with an empty response, causing the rest of the code to not work correctly.</p>\n\n<p>DownloadService.kt</p>\n\n<pre><code>object DownloadService {\n\n    private val parentJob = Job()\n\n    ...\n\n    private val coroutineScope = CoroutineScope(Dispatchers.Main + parentJob +\n            coroutineExceptionHandler)\n\n    fun StartService(URL: String, location:String, contx:Context) {\n\n        coroutineScope.launch(Dispatchers.Main) {\n            Log.d(\"action\", \"Start\")\n            val links = scrapPage(URL)\n            val download = downloadImages(links, location, contx)\n            Log.d(\"action\", \"End\")\n        }\n    }\n\n    private suspend fun scrapPage(url: String): MainActivity.Scrapped =\n        withContext(Dispatchers.IO) {\n            var URL = url\n            var scrap = MainActivity.Scrapped()\n            try {\n                Log.d(\"action\", \"Start Scrapping\")\n                var response = Jsoup.connect(URL).get()\n                Log.d(\"action\", \"Page downloaded\")\n                response.getElementsByClass(\"link\").forEach {\n                    /*Scrap URLs*/\n                    Log.d(\"action\", \"Add \"+link)\n                }\n            } catch (e: Exception) {\n                when(e) {\n                    is HttpStatusException -&gt; {\n                        System.out.println(e.getStatusCode())\n                        scrap.error = true\n                        error = true\n                    }\n                }\n            }\n            return@withContext scrap\n        }\n\n    ...\n}\n</code></pre>\n\n<p>MainActivity.kt</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n    ...\n    fun makeRequest(URL : String) {\n        WorkingURL = URL\n        var uri = \"\"\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\n            uri = MediaStore.Downloads.EXTERNAL_CONTENT_URI.toString()\n            log.text = uri\n        } else {\n            uri = getStoragePath()\n            log.text = uri\n        }\n        DownloadService.StartService(URL, uri, this)\n        Log.d(\"links\", DownloadService.getError().toString())\n    }\n}\n</code></pre>\n\n<p>I am not sure where the problem is, nor where to start searching. I know the code for the Scrapping works, because i used it before with AsyncTask, so the problem seems to be passing it to coroutines.</p>\n"}, {"tags": ["android", "kotlin", "mvvm", "android-room", "kotlin-coroutines"], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 11567511, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-y5B9krvh6YY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rduFJPXd0LpsePG-KHx5yh2jXjGKg/mo/photo.jpg?sz=128", "display_name": "Michael C", "link": "https://stackoverflow.com/users/11567511/michael-c"}, "edited": false, "score": 0, "creation_date": 1574815530, "post_id": 59057107, "comment_id": 104362179, "body": "Hi George, thanks for your reply! For another project I followed exactly the last example of the read on coroutines and it worked fine! Is there any way to make it work in this case too or you think it&#39;s better to give a try with promises?"}, {"owner": {"reputation": 64, "user_id": 4230863, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100006290710925/picture?type=large", "display_name": "George Chareas", "link": "https://stackoverflow.com/users/4230863/george-chareas"}, "reply_to_user": {"reputation": 71, "user_id": 11567511, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-y5B9krvh6YY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rduFJPXd0LpsePG-KHx5yh2jXjGKg/mo/photo.jpg?sz=128", "display_name": "Michael C", "link": "https://stackoverflow.com/users/11567511/michael-c"}, "edited": false, "score": 0, "creation_date": 1574861705, "post_id": 59057107, "comment_id": 104380704, "body": "I would go with promises. As you said on your edit you&#39;re waiting for the function to be fulfilled in order to proceed with the generated data. Have a look on the answer above but I&#39;m pretty sure promises will make your life easier on this one"}], "tags": [], "owner": {"reputation": 64, "user_id": 4230863, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100006290710925/picture?type=large", "display_name": "George Chareas", "link": "https://stackoverflow.com/users/4230863/george-chareas"}, "is_accepted": false, "score": 1, "last_activity_date": 1574792898, "last_edit_date": 1574792898, "creation_date": 1574792126, "answer_id": 59057107, "question_id": 59056378, "link": "https://stackoverflow.com/questions/59056378/wait-for-room-insert-query-completion/59057107#59057107", "title": "Wait for Room @Insert query completion", "body": "<p>Edit: Didn't read your conclusion before I reply but, I still think that your answer lies in coroutines</p>\n\n<p>Using callbacks or promises, won't your function be executed when the insert query is finished?</p>\n\n<blockquote>\n  <p><strong>Callbacks</strong></p>\n  \n  <p>With callbacks, the idea is to pass one function as a parameter to\n  another function, and have this one invoked once the process has\n  completed.</p>\n</blockquote>\n\n<pre><code>fun postItem(item: Item) {\n    preparePostAsync { token -&gt; \n        submitPostAsync(token, item) { post -&gt; \n            processPost(post)\n        }\n    }\n}\n\nfun preparePostAsync(callback: (Token) -&gt; Unit) {\n    // make request and return immediately \n    // arrange callback to be invoked later\n}\n</code></pre>\n\n<p>I would prefer promises to be honest</p>\n\n<blockquote>\n  <p><strong>Promises</strong></p>\n  \n  <p>The idea behind futures or promises (there are also other terms these\n  can be referred to depending on language/platform), is that when we\n  make a call, we're promised that at some point it will return with an\n  object called a Promise, which can then be operated on.</p>\n</blockquote>\n\n<pre><code>fun postItem(item: Item) {\n    preparePostAsync() \n        .thenCompose { token -&gt; \n            submitPostAsync(token, item)\n        }\n        .thenAccept { post -&gt; \n            processPost(post)\n        }\n\n}\n\nfun preparePostAsync(): Promise&lt;Token&gt; {\n    // makes request an returns a promise that is completed later\n    return promise \n}\n</code></pre>\n\n<p>Do your work and when the promise is fullfilled, proceed to data validation.</p>\n\n<p>You can read more about coroutines <a href=\"https://kotlinlang.org/docs/tutorials/coroutines/async-programming.html\" rel=\"nofollow noreferrer\">here</a></p>\n"}, {"comments": [{"owner": {"reputation": 71, "user_id": 11567511, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-y5B9krvh6YY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rduFJPXd0LpsePG-KHx5yh2jXjGKg/mo/photo.jpg?sz=128", "display_name": "Michael C", "link": "https://stackoverflow.com/users/11567511/michael-c"}, "edited": false, "score": 0, "creation_date": 1574814692, "post_id": 59057404, "comment_id": 104362012, "body": "Thanks for your reply!  I&#39;m currently trying the &quot;alternative&quot; solution because it&#39;s the same one that I have successfully implemented in the other project. It still doesn&#39;t work but I have found the problem. If i leave only roomRepository.insertLicence(licence) the check method will not be executed until the completion of the first one ( I have added 5 seconds delay after the forEach to be sure). So the problem seems to be the nested insert of all the licenceConfigurations wich &quot;break the flow&quot;. I have edited the answer with more informations"}, {"owner": {"reputation": 705, "user_id": 2745520, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/100000248269873/picture?type=large", "display_name": "A_rmas", "link": "https://stackoverflow.com/users/2745520/a-rmas"}, "edited": false, "score": 0, "creation_date": 1589980991, "post_id": 59057404, "comment_id": 109507754, "body": "(5) statement aborts at 2: [PRAGMA journal_mode=PERSIST]"}], "tags": [], "owner": {"reputation": 914, "user_id": 7473685, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-KRePsh63XPc/AAAAAAAAAAI/AAAAAAAAAVQ/H7aB1jJaHxc/photo.jpg?sz=128", "display_name": "Pavan Varma", "link": "https://stackoverflow.com/users/7473685/pavan-varma"}, "is_accepted": false, "score": 3, "last_activity_date": 1574793897, "last_edit_date": 1574793897, "creation_date": 1574793301, "answer_id": 59057404, "question_id": 59056378, "link": "https://stackoverflow.com/questions/59056378/wait-for-room-insert-query-completion/59057404#59057404", "title": "Wait for Room @Insert query completion", "body": "<p>To wait until insertion is completed, you need to move the coroutine creation from <code>insertLicences()</code> to your observer and also make the <code>insertLicences()</code> a suspend function.</p>\n\n<hr>\n\n<pre><code>loginViewModel.apiResponse.observe(this, Observer { response -&gt;\n    lifecycleScope.launch { \n        response?.let {\n             loginViewModel.insertLicences(response.licence)\n        }\n        //here I need to wait for the insertion to end\n        loginViewModel.methodToCheckForTheFieldOnDatabase()\n    }\n})\n</code></pre>\n\n<p>and</p>\n\n<pre><code>suspend fun insertLicences(licences: List&lt;Licence&gt;) {\n    roomRepository.deleteAllLicences()\n    licences.forEach { licence -&gt;\n        roomRepository.insertLicence(licence).also { insertedLicenceId -&gt;\n            licence.config?.forEach { licenceConfiguration -&gt;\n                roomRepository.insertLicenceConfiguration(\n                    licenceConfiguration.apply { licenceReference = insertedLicenceId.toInt() }\n                )\n            }\n        }\n    }\n}\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p>Alternative Solution</p>\n</blockquote>\n\n<p>You can shift all of the code present in the observer into ViewModel.</p>\n\n<pre><code>loginViewModel.apiResponse.observe(this, Observer { response -&gt;\n    loginViewModel.refreshLicenses(response)\n})\n</code></pre>\n\n<p>and in ViewModel</p>\n\n<pre><code>fun refreshLicenses(response:Response?){\n    viewModelScope.launch{\n        response?.let {\n            insertLicences(response.licence)\n        }\n        methodToCheckForTheFieldOnDatabase()\n    }\n}\n</code></pre>\n\n<p>and also make insertLicences as suspend function</p>\n\n<pre><code>suspend fun insertLicences(licences: List&lt;Licence&gt;) {\n    roomRepository.deleteAllLicences()\n    licences.forEach { licence -&gt;\n        roomRepository.insertLicence(licence).also { insertedLicenceId -&gt;\n            licence.config?.forEach { licenceConfiguration -&gt;\n                roomRepository.insertLicenceConfiguration(\n                    licenceConfiguration.apply { licenceReference = insertedLicenceId.toInt() }\n                )\n            }\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 11567511, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-y5B9krvh6YY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rduFJPXd0LpsePG-KHx5yh2jXjGKg/mo/photo.jpg?sz=128", "display_name": "Michael C", "link": "https://stackoverflow.com/users/11567511/michael-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3151, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1574814594, "creation_date": 1574789181, "last_edit_date": 1574814594, "question_id": 59056378, "link": "https://stackoverflow.com/questions/59056378/wait-for-room-insert-query-completion", "title": "Wait for Room @Insert query completion", "body": "<p>I can't figure out how to do a \"simple\" operation with Room and MVVM pattern. \nI\u2019m fetching some data with Retrofit. A \u201cproper\u201d response triggers an observer in the activity and a small part of the response itself is inserted in the database using Room library, wiping all previous values stored and inserting the fresh ones. Otherwise old values are retained on DB.\nJust after that, I would like to check for a field in the database, but I\u2019m not able to force this operation to wait until the previous one is completed.</p>\n\n<p>Models</p>\n\n<pre><code>@Entity(tableName = \"licence\")\ndata class Licence(\n    @PrimaryKey(autoGenerate = true)\n    @ColumnInfo(name = \"licence_id\")\n    var licenceId: Int = 0,\n    @Ignore\n    var config: List&lt;LicenceConfig&gt;? = null,\n.......\n//all the others attributes )\n\n@Entity(foreignKeys = [\nForeignKey(\n        entity = Licence::class,\n        parentColumns = [\"licence_id\"],\n        childColumns = [\"licence_reference\"],\n        onDelete = ForeignKey.CASCADE\n)],tableName = \"licence_configurations\")\ndata class LicenceConfig(\n    @PrimaryKey(autoGenerate = true)\n    @ColumnInfo(name = \"licence_config_id\")\n    var licenceConfigId: Int,\n\n    @ColumnInfo(name=\"licence_reference\")\n    var licenceReference: Int,\n</code></pre>\n\n<p>Observer in the activity</p>\n\n<pre><code>loginViewModel.apiResponse.observe(this, Observer { response -&gt;\n        response?.let {\n             loginViewModel.insertLicences(response.licence)\n        }\n           //here I need to wait for the insertion to end\n           loginViewModel.methodToCheckForTheFieldOnDatabase()\n})\n</code></pre>\n\n<p>ViewModel </p>\n\n<pre><code>fun insertLicences(licences: List&lt;Licence&gt;) = viewModelScope.launch {\n    roomRepository.deleteAllLicences()\n    licences.forEach { licence -&gt;\n        roomRepository.insertLicence(licence).also { insertedLicenceId -&gt;\n            licence.config?.forEach { licenceConfiguration -&gt;\n                roomRepository.insertLicenceConfiguration(\n                        licenceConfiguration.apply { licenceReference = insertedLicenceId.toInt() }\n                )\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Room Repository</p>\n\n<pre><code>class RoomRepository(private val roomDao: RoomDao) {\n\nval allLicences: LiveData&lt;List&lt;Licence&gt;&gt; = roomDao.getAllLicences()\n\nsuspend fun insertLicence(licence: Licence): Long {\n   return roomDao.insertLicence(licence)\n   }\n\nsuspend fun insertLicenceConfiguration(licenceConfiguration: LicenceConfig){\n    return roomDao.insertLicenceConfiguration(LicenceConfig)\n   }\n}\n</code></pre>\n\n<p>RoomDao</p>\n\n<pre><code>@Dao\ninterface RoomDao {\n\n@Query(\"select * from licence\")\nfun getAllLicences(): LiveData&lt;List&lt;Licence&gt;&gt;\n\n@Insert(onConflict = OnConflictStrategy.REPLACE)\nsuspend fun insertLicence(licence: Licence): Long\n\n@Insert\nsuspend fun insertLicenceConfiguration(licence: LicenceConfig)\n\n@Query(\"DELETE FROM licence\")\nsuspend fun deleteAllLicences()\n}\n</code></pre>\n\n<p>Set an observer to the \"allLicences\" LiveData or directly on that field on DB is not an option because the operations will be performed just after the activity creation and I have to wait until the API response to perform them. </p>\n\n<p>In another project, without Room, I have used async{} and .await() to perform sequential operations while working with coroutines but I can't really make it works here. When I pause the debugger just after the insertion method the value of \"allLicences\" it's always null but after resuming and exporting the DB the data are properly inserted. I also tried adding .invokeOnCompletion{} after the ViewModel method but with the same result.<br>\nBasically I would like to wait for this method to end to do another operation. </p>\n\n<p>Any suggestions? </p>\n\n<p>EDIT </p>\n\n<p>I totally forgot to report the models! Each licence have a list of configurations. When I perform a licence insert I take the autogenerated id, I apply it to the licenceConfig and then I perform the insert for each licenceConfig object (the code in the nested forEach loop of the ViewModel method). The problem seems to be that performing this nested loop breaks the \"synchronicity\" of the operation</p>\n"}, {"tags": ["generics", "kotlin", "types", "higher-kinded-types"], "answers": [{"comments": [{"owner": {"reputation": 38158, "user_id": 2707792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hjDjB.png?s=128&g=1", "display_name": "Andrey Tyukin", "link": "https://stackoverflow.com/users/2707792/andrey-tyukin"}, "edited": false, "score": 0, "creation_date": 1574795082, "post_id": 59056780, "comment_id": 104354969, "body": "This also works if <code>FooImpl</code> is actually some other interface and we want to expose <code>foo</code> to the implementing classes: for this, we just can move <code>fun &lt;B&gt; Foo&lt;B&gt;.foo(bar: B = defaultBar()): B = bar</code> into <code>Foo</code>. Thank you very much!"}], "tags": [], "owner": {"reputation": 1994, "user_id": 10536125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7445c27d383f2368956f6f23e75f5fe1?s=128&d=identicon&r=PG&f=1", "display_name": "Bananon", "link": "https://stackoverflow.com/users/10536125/bananon"}, "is_accepted": true, "score": 2, "last_activity_date": 1574790747, "creation_date": 1574790747, "answer_id": 59056780, "question_id": 59056049, "link": "https://stackoverflow.com/questions/59056049/workarounds-for-lack-of-hkt-for-the-specific-case-fnothing-for-an-fout-x/59056780#59056780", "title": "Workarounds for lack of HKT for the specific case F&lt;Nothing&gt; for an F&lt;out X&gt;", "body": "<p>You can imitate <code>super</code> by making <code>foo</code> extension function and writing <code>B : P</code> instead of <code>P super B</code>:</p>\n\n<pre><code>sealed class Bar&lt;out X&gt; {\n    data class Hello&lt;out X&gt;(val who: X) : Bar&lt;X&gt;()\n    object Empty : Bar&lt;Nothing&gt;()\n}\n\ninterface Foo&lt;out B&gt; {\n    fun defaultBar(): B\n}\n\nfun &lt;B : P, P&gt; Foo&lt;B&gt;.foo(bar: P = defaultBar()): P = bar\n\nobject FooImpl : Foo&lt;Bar&lt;Nothing&gt;&gt; {\n    override fun defaultBar(): Bar&lt;Nothing&gt; = Bar.Empty\n}\n\nfun main() {\n    println(FooImpl.foo(Bar.Hello(\"world\")))\n}\n</code></pre>\n"}], "owner": {"reputation": 38158, "user_id": 2707792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hjDjB.png?s=128&g=1", "display_name": "Andrey Tyukin", "link": "https://stackoverflow.com/users/2707792/andrey-tyukin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 59056780, "answer_count": 1, "score": 1, "last_activity_date": 1574790747, "creation_date": 1574788044, "last_edit_date": 1592644375, "question_id": 59056049, "link": "https://stackoverflow.com/questions/59056049/workarounds-for-lack-of-hkt-for-the-specific-case-fnothing-for-an-fout-x", "title": "Workarounds for lack of HKT for the specific case F&lt;Nothing&gt; for an F&lt;out X&gt;", "body": "<p>Is there any way in Kotlin to separate <code>Foo</code> from <code>Bar</code> by leaving <code>defaultBar</code> abstract in the following minimal example?</p>\n<pre><code>sealed class Bar&lt;out X&gt; {\n  data class Hello&lt;X&gt;(val who: X): Bar&lt;X&gt;()\n  object Empty : Bar&lt;Nothing&gt;()\n}\n\ninterface Foo {\n  fun defaultBar(): Bar&lt;Nothing&gt; = Bar.Empty\n  fun &lt;P&gt; foo(bar: Bar&lt;P&gt; = defaultBar()): Bar&lt;P&gt; = bar\n}\n\nfun main(args: Array&lt;String&gt;) {\n  println((object : Foo{}).foo(Bar.Hello(&quot;world&quot;)))\n}\n</code></pre>\n<p>By &quot;separate&quot;, I mean that I want <code>Foo</code> and <code>Bar</code> to be in two completely separate files, so they don't mention each other. The method <code>foo</code> is supposed to be &quot;hard&quot;, and it should stay in <code>Foo</code>. The method <code>defaultBar</code> is supposed to be &quot;trivial&quot;, it could be implemented anywhere. The only place where I want to mention both <code>Foo</code> and <code>Bar</code> should be some separate class that provides the concrete implementation of <code>defaultBar</code>.</p>\n<hr />\n<h3>What I've tried</h3>\n<p>The following attempt seemed promising for the first few moments:</p>\n<pre><code>sealed class Bar&lt;out X&gt; {\n  data class Hello&lt;X&gt;(val who: X): Bar&lt;X&gt;()\n  object Empty : Bar&lt;Nothing&gt;()\n}\n\ninterface Foo&lt;B&gt;{\n  fun &lt;P: B&gt; defaultB(): P\n  fun &lt;P: B&gt; foo(bar: P = defaultB()): P = bar\n}\n\nobject FooImpl : Foo&lt;Bar&lt;Any&gt;&gt; {\n  override fun &lt;P: Bar&lt;Any&gt;&gt; defaultB(): P = Bar.Empty\n}\n\nfun main(args: Array&lt;String&gt;) {\n  println(FooImpl.foo(Bar.Hello(&quot;world&quot;)))\n}\n</code></pre>\n<p>Unfortunately, Kotlin cannot derive from <code>Bar&lt;out X&gt;</code> and <code>P subtypeOf Bar&lt;Any&gt;</code> that <code>Bar&lt;Nothing&gt; subtypeOf P</code>.</p>\n<p>Furthermore, I also can't write something like</p>\n<pre><code>sealed class Bar&lt;out X&gt; {\n  data class Hello&lt;X&gt;(val who: X): Bar&lt;X&gt;()\n  object Empty : Bar&lt;Nothing&gt;()\n}\n\ninterface Foo&lt;B, N: B&gt; {\n  fun defaultBar(): N\n  fun &lt;P : B super N&gt; foo(bar: Bar&lt;P&gt; = defaultBar()): Bar&lt;P&gt; = bar\n}\n\nobject FooImpl : Foo&lt;Bar&lt;Any&gt;, Bar&lt;Nothing&gt;&gt; {\n  fun defaultBar(): Bar&lt;Nothing&gt; = Bar.Empty\n}\n\nfun main(args: Array&lt;String&gt;) {\n  println(FooImpl.foo(Bar.Hello(&quot;world&quot;)))\n}\n</code></pre>\n<p>, because besides not supporting HKT's, Kotlin also doesn't support lower type bounds at use-site.</p>\n<hr />\n<h3>(optional) What I wished would be possible</h3>\n<p>The following Scala snippet shows what I mean:</p>\n<pre><code>sealed trait Bar[+X]\ncase class Hello(who: String) extends Bar[String]\ncase object Empty extends Bar[Nothing]\n\ntrait Foo {\n  val defaultBar: Bar[Nothing] = Empty\n  def foo[P](bar: Bar[P] = defaultBar): Bar[P] = bar\n}\n\nprintln((new Foo{}).foo(Hello(&quot;world&quot;)))\n</code></pre>\n<p>This can be refactored into:</p>\n<pre><code>import language.higherKinds\n\nsealed trait Bar[+X]\ncase class Hello(who: String) extends Bar[String]\ncase object Empty extends Bar[Nothing]\n\ntrait Foo[B[+_]] {\n  val defaultB: B[Nothing]\n  def foo[P](b: B[P] = defaultB): B[P] = b\n}\n\nobject FooImpl extends Foo[Bar] {\n  val defaultB: Bar[Nothing] = Empty\n}\n\nprintln(FooImpl.foo(Hello(&quot;world&quot;)))\n</code></pre>\n<p>so that <code>Foo</code> does not mention <code>Bar</code> anywhere.</p>\n<hr />\n<h3>(optional) Why I hoped that it should be possible</h3>\n<p>Full HKT's aren't needed for this particular case, because we need to evaluate <code>Bar</code> only at a single type <code>Nothing</code>:</p>\n<pre><code>sealed trait Bar[+X]\ncase class Hello(who: String) extends Bar[String]\ncase object Empty extends Bar[Nothing]\n\ntrait Foo[N] {\n  val defaultBar: N\n  def foo[P &gt;: N](bar: P = defaultBar): P = bar\n}\n\nobject FooInstance extends Foo[Bar[Nothing]] {\n  val defaultBar = Empty\n}\n\nprintln(FooInstance.foo(Hello(&quot;world&quot;)))\n</code></pre>\n<p>This works without higher kinds, Java's <code>super</code> would have been sufficient. But, as already mentioned above, Kotlin doesn't seem to have anything like <code>&gt;:</code> / <code>super</code> / lower type bounds at use site.</p>\n<hr />\n<h3>Question</h3>\n<p>Is there anything that one could do except moving <code>foo</code> into <code>FooImpl</code>, i.e. merging <code>Foo</code> and <code>FooImpl</code> into one big file?</p>\n"}, {"tags": ["android", "android-fragments", "kotlin", "countdowntimer", "android-viewmodel"], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 10376535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc9e46b64c82a59b915019a406f15e2c?s=128&d=identicon&r=PG&f=1", "display_name": "Phil T.", "link": "https://stackoverflow.com/users/10376535/phil-t"}, "edited": false, "score": 0, "creation_date": 1574787876, "post_id": 59055914, "comment_id": 104351573, "body": "I saw that post before and tried it again and I think it isn&#39;t called here. When the user just navigates away from the app, it shouldn&#39;t be called if I understand it correctly, right? What I need is something exactly for that case cause the timer should just be stopped an be able to resume."}], "tags": [], "owner": {"reputation": 3271, "user_id": 764624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bcb73d4a76eb0dbb40705de0cee1d23?s=128&d=identicon&r=PG", "display_name": "Ivan Wooll", "link": "https://stackoverflow.com/users/764624/ivan-wooll"}, "is_accepted": false, "score": 0, "last_activity_date": 1574787581, "creation_date": 1574787581, "answer_id": 59055914, "question_id": 59055826, "link": "https://stackoverflow.com/questions/59055826/stop-a-timer-when-fragment-onstop-is-called/59055914#59055914", "title": "Stop a timer when Fragment onStop is called", "body": "<p>You can use the ViewModels <code>onCleared()</code> callback.</p>\n\n<p>To get an understanding of when this is called (so you can decide if it's appropriate) please see this question and the answers <a href=\"https://stackoverflow.com/questions/50983738/when-is-the-viewmodel-oncleared-called\">When is the viewmodel onCleared called</a></p>\n"}, {"comments": [{"owner": {"reputation": 17, "user_id": 10376535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc9e46b64c82a59b915019a406f15e2c?s=128&d=identicon&r=PG&f=1", "display_name": "Phil T.", "link": "https://stackoverflow.com/users/10376535/phil-t"}, "edited": false, "score": 0, "creation_date": 1574789503, "post_id": 59056138, "comment_id": 104352379, "body": "That definetly seems like I want. The first time I heard of this handling. Can you tell me how I can implement the LifecycleObserver interface in my viewmodel?   Already big thanks!"}], "tags": [], "owner": {"reputation": 12970, "user_id": 2741273, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71f8f37ebda905a8fffeb75e91b87a89?s=128&d=identicon&r=PG&f=1", "display_name": "Francesc", "link": "https://stackoverflow.com/users/2741273/francesc"}, "is_accepted": true, "score": 0, "last_activity_date": 1574788379, "creation_date": 1574788379, "answer_id": 59056138, "question_id": 59055826, "link": "https://stackoverflow.com/questions/59055826/stop-a-timer-when-fragment-onstop-is-called/59056138#59056138", "title": "Stop a timer when Fragment onStop is called", "body": "<p>If you want to execute some action in your viewmodel based on a lifecycle event, make your viewmodel implement the <code>LifecycleObserver</code> interface, then in your viewmodel you do</p>\n\n<pre><code>@OnLifecycleEvent(Lifecycle.Event.ON_STOP)\nfun stop() {\n    // stop timer\n}\n</code></pre>\n\n<p>and in your fragment, in <code>onCreateView</code> you do</p>\n\n<pre><code>lifecycle.addObserver(viewmodel)\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 10376535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc9e46b64c82a59b915019a406f15e2c?s=128&d=identicon&r=PG&f=1", "display_name": "Phil T.", "link": "https://stackoverflow.com/users/10376535/phil-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 59056138, "answer_count": 2, "score": 0, "last_activity_date": 1574788379, "creation_date": 1574787269, "question_id": 59055826, "link": "https://stackoverflow.com/questions/59055826/stop-a-timer-when-fragment-onstop-is-called", "title": "Stop a timer when Fragment onStop is called", "body": "<p>I've got a problem when I try to stop my timer. This timer is created in a FragmentViewModel. \nIf I navigate away from the app, the timer keeps running. Im looking for a way to stop him, but I cant access him from the Fragments onStop() function, since hes created in the ViewModel, which only gets referenced in the Fragments onCreate() function. Anyone got an idea how to solve this problem?</p>\n\n<p>This is how I create the ViewModel (with the timer inside):</p>\n\n<pre><code>override fun onCreateView(\n    inflater: LayoutInflater,\n    container: ViewGroup?,\n    savedInstanceState: Bundle?\n): View? {\n    val binding: GameFragmentBinding = DataBindingUtil.inflate(\n        inflater, R.layout.game_fragment, container, false)\n\n\n    val application = requireNotNull(this.activity).application\n\n    val dataSource = TranslationDB.getInstance(application).translationDBDao\n\n    val viewModelFactory = GameFragmentViewModelFactory(dataSource, application)\n\n    val gameFragmentViewModel =\n        ViewModelProviders.of(\n            this, viewModelFactory).get(GameFragmentViewModel::class.java)\n\n\n    binding.gameFragmentViewModel = gameFragmentViewModel\n</code></pre>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["android", "sorting", "kotlin", "optimization", "collections"], "answers": [{"tags": [], "owner": {"reputation": 2952, "user_id": 4413098, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a944fcc2691378e0c49b5c564bd55d2?s=128&d=identicon&r=PG&f=1", "display_name": "mightyWOZ", "link": "https://stackoverflow.com/users/4413098/mightywoz"}, "is_accepted": false, "score": 0, "last_activity_date": 1574789421, "creation_date": 1574789421, "answer_id": 59056441, "question_id": 59055795, "link": "https://stackoverflow.com/questions/59055795/optimize-sorting-methods/59056441#59056441", "title": "Optimize sorting methods", "body": "<p>Instead of using sortedBy you can use <strong>sortedWith</strong> and pass the comparator as a parameter.\nso merge both of your functions into one function and take the comparator as a parameter. for example below function expects a String Comparator.</p>\n\n<pre><code>fun getTargets(comparator: Comparator&lt;String&gt;) {\n}\n</code></pre>\n\n<p>now you can invoke this function as following</p>\n\n<pre><code>getTargets(Comparator{ o1, o2 -&gt; o1.compareTo(o2)})\n</code></pre>\n\n<p>now use this compartor in your sortedWith function call, where you sort your list.</p>\n\n<p>your calls would look something like following.</p>\n\n<pre><code>getTargets(Comparator{ o1, o2 -&gt; o1.priority.compareTo(o2.priority)}) // For priority based sorting\ngetTargets(Comparator{ o1, o2 -&gt; o1.deadline.compareTo(o2.deadline)}) // For deadline based sorting\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3391, "user_id": 6387618, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f5af475c8ce7bf4b9d300e40a4f9b6c3?s=128&d=identicon&r=PG", "display_name": "Morozov", "link": "https://stackoverflow.com/users/6387618/morozov"}, "edited": false, "score": 0, "creation_date": 1582883086, "post_id": 59060352, "comment_id": 106937758, "body": "But why u didn&#39;t use inner class for example?"}], "tags": [], "owner": {"reputation": 128160, "user_id": 321697, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/FHlMy.jpg?s=128&g=1", "display_name": "Kevin Coppock", "link": "https://stackoverflow.com/users/321697/kevin-coppock"}, "is_accepted": false, "score": 3, "last_activity_date": 1582882627, "last_edit_date": 1582882627, "creation_date": 1574807571, "answer_id": 59060352, "question_id": 59055795, "link": "https://stackoverflow.com/questions/59055795/optimize-sorting-methods/59060352#59060352", "title": "Optimize sorting methods", "body": "<p>You could do something like this:</p>\n\n<pre><code>inline fun &lt;reified T : Any, R : Comparable&lt;R&gt;&gt; DataSnapshot.sortChildrenTo(\n  targetList: MutableList&lt;T&gt;, \n  crossinline sortCriteria: (T) -&gt; R?\n) {\n  children.mapNotNull { it.getValue(T::class.java) }\n    .sortedBy(sortCriteria)\n    .toCollection(targetList)\n}\n</code></pre>\n\n<p>Which then lets you write:</p>\n\n<pre><code>targetList.clear()\ndataSnapshot.sortChildrenTo(targetList, Goal::priority)\n</code></pre>\n"}], "owner": {"reputation": 3391, "user_id": 6387618, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f5af475c8ce7bf4b9d300e40a4f9b6c3?s=128&d=identicon&r=PG", "display_name": "Morozov", "link": "https://stackoverflow.com/users/6387618/morozov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1582882627, "creation_date": 1574787149, "question_id": 59055795, "link": "https://stackoverflow.com/questions/59055795/optimize-sorting-methods", "title": "Optimize sorting methods", "body": "<p>I have two methods for sorting.\nSorting by priority and deadline.</p>\n\n<pre><code>fun getTargetsByPriority() {\n    val valueEventListener = object : ValueEventListener {\n        override fun onDataChange(dataSnapshot: DataSnapshot) {\n            targetList.clear()\n            dataSnapshot.children\n                .mapNotNull { it.getValue(Goal::class.java) }\n                .sortedBy { it.priority }\n                .toCollection(targetList)\n            contract.updateViewContent()\n        }\n\n        override fun onCancelled(databaseError: DatabaseError) {\n            Log.d(\"some\", \"Error trying to get targets for ${databaseError.message}\")\n        }\n    }\n    targetsRef?.addListenerForSingleValueEvent(valueEventListener)\n}\n\nfun getTargetsByDeadline() {\n    val valueEventListener = object : ValueEventListener {\n        override fun onDataChange(dataSnapshot: DataSnapshot) {\n            targetList.clear()\n            dataSnapshot.children\n                .mapNotNull { it.getValue(Goal::class.java) }\n                .sortedBy { it.deadline }\n                .toCollection(targetList)\n            contract.updateViewContent()\n        }\n\n        override fun onCancelled(databaseError: DatabaseError) {\n            Log.d(\"some\", \"Error trying to get targets for ${databaseError.message}\")\n        }\n    }\n    targetsRef?.addListenerForSingleValueEvent(valueEventListener)\n}\n</code></pre>\n\n<p>But they are very similar to each other. How it possible to optimize this code?</p>\n"}, {"tags": ["kotlin", "flutter"], "answers": [{"tags": [], "owner": {"reputation": 171, "user_id": 11431477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca225c961eb71b151b47b5cc74647e75?s=128&d=identicon&r=PG&f=1", "display_name": "miguelik", "link": "https://stackoverflow.com/users/11431477/miguelik"}, "is_accepted": false, "score": 0, "last_activity_date": 1574789480, "last_edit_date": 1574789480, "creation_date": 1574789082, "answer_id": 59056344, "question_id": 59055762, "link": "https://stackoverflow.com/questions/59055762/get-type-of-place-where-user-is/59056344#59056344", "title": "Get type of place where user is", "body": "<p>Maybe you are looking for google places API;</p>\n\n<pre><code>https://developers.google.com/places/web-service/search\n</code></pre>\n\n<p>you can find an example of a JSON after using the api on this section:</p>\n\n<pre><code> https://developers.google.com/places/web-service/search#find-place-responses\n</code></pre>\n\n<p>and in that JSON, there is this data(among many others):</p>\n\n<pre><code> \"name\" : \"Museum of Contemporary Art Australia\",\n \"types\" : [ \"travel_agency\", \"restaurant\", \"food\", \"establishment\" ],\n</code></pre>\n\n<p>I think you could start studying it from that point, there is a lot more of information returned in the JSON you can see in that link</p>\n"}], "owner": {"reputation": 29, "user_id": 10211505, "user_type": "registered", "profile_image": "https://graph.facebook.com/142598673313790/picture?type=large", "display_name": "Bartek Zielinski", "link": "https://stackoverflow.com/users/10211505/bartek-zielinski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574789480, "creation_date": 1574787029, "question_id": 59055762, "link": "https://stackoverflow.com/questions/59055762/get-type-of-place-where-user-is", "title": "Get type of place where user is", "body": "<p>I would like to get name of object when user is. For example: Church, Cinema.</p>\n\n<p>Can I use a GoogleMap, get user location and instead return Longitude and Latitude get object? Flutter or Kotlin.</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 10456, "user_id": 9241978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7f9d2a03452f74bfd802e36d50b7db?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel", "link": "https://stackoverflow.com/users/9241978/pawel"}, "edited": false, "score": 0, "creation_date": 1574783290, "post_id": 59054429, "comment_id": 104348940, "body": "just create a global integer variable and increment it whenever it&#39;s read"}, {"owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "edited": false, "score": 3, "creation_date": 1574783827, "post_id": 59054429, "comment_id": 104349269, "body": "Unique within what scope?  Unique within a single game (however that&#39;s defined)?  Unique within a single run of the app?  Unique for all runs on a particular machine?  Unique for every run of the app anywhere in the world, at any time?"}, {"owner": {"reputation": 171740, "user_id": 869736, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/671f732e3c68c387c702112a30e5ebd8?s=128&d=identicon&r=PG&f=1", "display_name": "Louis Wasserman", "link": "https://stackoverflow.com/users/869736/louis-wasserman"}, "edited": false, "score": 0, "creation_date": 1574785621, "post_id": 59054429, "comment_id": 104350318, "body": "Please don&#39;t create a global variable of any kind, but a factory object would probably be appropriate."}, {"owner": {"reputation": 3113, "user_id": 9968399, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bsdzB.jpg?s=128&g=1", "display_name": "Taseer", "link": "https://stackoverflow.com/users/9968399/taseer"}, "edited": false, "score": 0, "creation_date": 1574791887, "post_id": 59054429, "comment_id": 104353563, "body": "UUID could help in assigning unique IDs."}, {"owner": {"reputation": 21, "user_id": 12437834, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HXDpiKOtNLc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcLNn43zIZdMkqhhOtf5uVutvc_Kw/photo.jpg?sz=128", "display_name": "Daniel", "link": "https://stackoverflow.com/users/12437834/daniel"}, "edited": false, "score": 0, "creation_date": 1574798179, "post_id": 59054429, "comment_id": 104356334, "body": "Answer to gidds: Unique so that each player assigned to the application as a player will have a unique ID. That ID should be saved and differentiate one player from the other"}], "answers": [{"tags": [], "owner": {"reputation": 720, "user_id": 10117056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/092a193074df16e4cad3b363f491220a?s=128&d=identicon&r=PG", "display_name": "Commander Tvis", "link": "https://stackoverflow.com/users/10117056/commander-tvis"}, "is_accepted": false, "score": -1, "last_activity_date": 1588706669, "creation_date": 1588706669, "answer_id": 61621333, "question_id": 59054429, "link": "https://stackoverflow.com/questions/59054429/what-is-the-best-way-in-kotlin-to-create-a-unique-id-for-each-object-i-create/61621333#61621333", "title": "What is the best way in Kotlin to create a unique ID for each object I create?", "body": "<ol>\n<li><strong>You may increment a global variable and assign its value to ID when creating.</strong> </li>\n</ol>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>var lastID = 0L\n\nclass Player ... {\n...\ninit {\nid = lastID\nlastID++\n}\n...\n}\n</code></pre>\n\n<ol start=\"3\">\n<li>You may set id = UUID.randomBytes()</li>\n<li>You may use id = playerName.hashCode() assuming the name is unique. </li>\n</ol>\n"}], "owner": {"reputation": 21, "user_id": 12437834, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HXDpiKOtNLc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcLNn43zIZdMkqhhOtf5uVutvc_Kw/photo.jpg?sz=128", "display_name": "Daniel", "link": "https://stackoverflow.com/users/12437834/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1141, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1588706669, "creation_date": 1574782704, "last_edit_date": 1574842058, "question_id": 59054429, "link": "https://stackoverflow.com/questions/59054429/what-is-the-best-way-in-kotlin-to-create-a-unique-id-for-each-object-i-create", "title": "What is the best way in Kotlin to create a unique ID for each object I create?", "body": "<h2>My program includes a class:</h2>\n\n<pre><code>class Player (private var playerName: String,\n                  private var playerSkill: Int,\n                  private var playerType: String) {\n\n\n        var playerID = 0\n\n      }\n</code></pre>\n\n<p>I'm instantiating the object when the user wants to create a new player, and my question is what is the best way to create a unique ID (i.e. playerID) for each player. \ne.g. playerID[0] = 0, playerID[1] = 1 and so on...... \nThe purpose is to later store the Players in an Array of Players and to be able to get to each player by his ID.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["testing", "kotlin", "kotlintest"], "answers": [{"tags": [], "owner": {"reputation": 5208, "user_id": 4257162, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GKajj.jpg?s=128&g=1", "display_name": "LeoColman", "link": "https://stackoverflow.com/users/4257162/leocolman"}, "is_accepted": false, "score": 0, "last_activity_date": 1574997431, "creation_date": 1574997431, "answer_id": 59098357, "question_id": 59053700, "link": "https://stackoverflow.com/questions/59053700/kotlintest-extensions-providing-information-back-to-the-test/59098357#59098357", "title": "Kotlintest extensions providing information back to the test", "body": "<p>You can keep a reference to an extension/listener before passing it to the overriden function.</p>\n\n<p>For example:</p>\n\n<pre><code>val myListener = MyKotlinTestListener()\nval myOtherListener = MyOtherKotlinTestListener()\n\n\noverride fun listeners() = listOf(myListener, myOtherListener)\n</code></pre>\n\n<p>This way you can do what you want in your tests with that reference available</p>\n\n<pre><code>test(\"MyTest\") {\n    myListener.executeX()\n}\n</code></pre>\n\n<p>The same goes if you're using an extension of any sort.</p>\n\n<p>They'll still be executed as part of KotlinTest's lifecycle!</p>\n"}], "owner": {"reputation": 1879, "user_id": 1130975, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/3682a919cff609aa82c72a2d3549eccf?s=128&d=identicon&r=PG&f=1", "display_name": "kboom", "link": "https://stackoverflow.com/users/1130975/kboom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1574997431, "creation_date": 1574780353, "question_id": 59053700, "link": "https://stackoverflow.com/questions/59053700/kotlintest-extensions-providing-information-back-to-the-test", "title": "Kotlintest extensions providing information back to the test", "body": "<p>JUnit 5 has a neat extensions functionality which is not compatible with kotlintest even if it runs on JUnit framework. While the simple use cases in which we just need to log something can be handled by the <code>TestListener</code>, we cannot handle more advanced cases. In particular, how to interact with the extension? Ideally, I would like to get a hold of the extension so I could query it.</p>\n\n<p>In JUnit5 it would be (one of the options anyway)</p>\n\n<pre><code>@ExtendWith(MyExtension.class)\nclass Something() {\n\n @MyAnnotation\n MyType myType;\n\n @Test\n void doSomething() {\n    myType.doSomething();\n }\n\n}\n</code></pre>\n\n<p>In JUnit4 it would be even simpler</p>\n\n<pre><code>@Rule\nMyRule myRule;\n\n@Test\nvoid fun() {\n  myRule.something();\n}\n\n</code></pre>\n\n<p>Of course, there is a SpringExtension but it does the reflective instantiation of the class.\nIs there any way to do it easier?</p>\n"}, {"tags": ["android", "kotlin", "rx-java"], "answers": [{"comments": [{"owner": {"reputation": 314, "user_id": 12083845, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ATpdC.jpg?s=128&g=1", "display_name": "BWappsandmore", "link": "https://stackoverflow.com/users/12083845/bwappsandmore"}, "edited": false, "score": 1, "creation_date": 1574781149, "post_id": 59053707, "comment_id": 104347633, "body": "I have to admit that I have somehow missed this out, because I was trying something different before it. You provided a great explanation to my issue. I will keep this in mind. Thank you so much."}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 1, "last_activity_date": 1574780392, "creation_date": 1574780392, "answer_id": 59053707, "question_id": 59053512, "link": "https://stackoverflow.com/questions/59053512/why-do-i-get-a-kfunction1-instead-of-liste-in-my-rx-chain/59053707#59053707", "title": "Why do I get a KFunction1 instead of List&lt;E&gt; in my RX chain?", "body": "<p>In your <code>map</code> call, you're passing in a lambda by using curly braces <code>{}</code>, which takes the incoming parameter, ignores it, and returns a function reference. It's the same as writing down this code there:</p>\n\n<pre><code>.map { it -&gt; ::dtoToVo }\n</code></pre>\n\n<p>So you're getting a stream of function references from that point down, which shows up as a <code>KFunction</code> when you subscribe to it at the end.</p>\n\n<p>To pass in the function reference correctly, use regular parentheses:</p>\n\n<pre><code>.map(::dtoToVo)\n</code></pre>\n\n<p>This will call the <code>dtoToVo</code> function for each element, and continue the stream with whatever that function returns. So this is the equivalent of:</p>\n\n<pre><code>.map { it -&gt; dtoToVo(it) }\n</code></pre>\n"}], "owner": {"reputation": 314, "user_id": 12083845, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ATpdC.jpg?s=128&g=1", "display_name": "BWappsandmore", "link": "https://stackoverflow.com/users/12083845/bwappsandmore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 59053707, "answer_count": 1, "score": 1, "last_activity_date": 1574780392, "creation_date": 1574779752, "question_id": 59053512, "link": "https://stackoverflow.com/questions/59053512/why-do-i-get-a-kfunction1-instead-of-liste-in-my-rx-chain", "title": "Why do I get a KFunction1 instead of List&lt;E&gt; in my RX chain?", "body": "<p>In my mapping method I'm trying to remap my <code>DTO</code> objects from the API into <code>VO</code> objects that I will use on the UI. </p>\n\n<pre><code>private fun dtoToVo(dto: List&lt;AbwEANDTO&gt;): List&lt;AbwEANVO&gt; {\n        return List(dto.size) {\n            AbwEANVO(dto[it].key, dto[it].text, false)\n        }\n    }\n</code></pre>\n\n<p>and I'm adding this method in my RX chain like this:</p>\n\n<pre><code>    override fun getDeviationLookupTable(test: Boolean) {\n        compositeDisposable.add(\n            api.getDeviationLookupTable(test)\n                .map { ::dtoToVo }\n                .subscribeOn(Schedulers.io())\n                .observeOn(AndroidSchedulers.mainThread())\n                .subscribe({\n                    liveData.value = it\n                }, {\n                    Log.d(null, \"Error@getDeviationLookupTable\")\n                })\n        )\n    }\n</code></pre>\n\n<p>I expect getting a <code>List&lt;AbwEANVO&gt;</code> inside <code>it</code>, but Kotlin tells me than a <code>KFunction1&lt;@ParameterName List&lt;AbwEANDTO&gt;, List&lt;AbwEANVO&gt;&gt;!</code> was found instead. It's a typical type mismatch error, but I really can't explain to myself why I'm getting it.</p>\n\n<p>Please explain me what am I missing. Thank you very much.</p>\n"}, {"tags": ["postgresql", "kotlin", "kotlin-exposed"], "comments": [{"owner": {"reputation": 876, "user_id": 813981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b707cdfcc7f71b6b450cef2f30a2703?s=128&d=identicon&r=PG", "display_name": "Tapac", "link": "https://stackoverflow.com/users/813981/tapac"}, "edited": false, "score": 1, "creation_date": 1577534637, "post_id": 59053108, "comment_id": 105193340, "body": "What Exposed version do you use? It should be fixed in # 0.19.1 and later. See <a href=\"https://github.com/JetBrains/Exposed/issues/701\" rel=\"nofollow noreferrer\">github.com/JetBrains/Exposed/issues/701</a>"}, {"owner": {"reputation": 554, "user_id": 6927234, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-csJCjtu44WA/AAAAAAAAAAI/AAAAAAAAAzA/KWxYVXXNKwI/photo.jpg?sz=128", "display_name": "Pstr", "link": "https://stackoverflow.com/users/6927234/pstr"}, "reply_to_user": {"reputation": 876, "user_id": 813981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b707cdfcc7f71b6b450cef2f30a2703?s=128&d=identicon&r=PG", "display_name": "Tapac", "link": "https://stackoverflow.com/users/813981/tapac"}, "edited": false, "score": 0, "creation_date": 1577716083, "post_id": 59053108, "comment_id": 105234358, "body": "Yeah, I opened the issue on Github on the same date as the question here. Thanks."}], "owner": {"reputation": 554, "user_id": 6927234, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-csJCjtu44WA/AAAAAAAAAAI/AAAAAAAAAzA/KWxYVXXNKwI/photo.jpg?sz=128", "display_name": "Pstr", "link": "https://stackoverflow.com/users/6927234/pstr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 911, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1574868235, "creation_date": 1574778398, "last_edit_date": 1574868235, "question_id": 59053108, "link": "https://stackoverflow.com/questions/59053108/how-can-i-use-kotlin-exposed-to-create-a-table-in-a-database-schema-that-is-not", "title": "How can I use Kotlin-Exposed to create a table in a database schema that is not `public` or `dbo` AND create a foreign key on said table?", "body": "<p>So I'm using Kotlin Exposed to create table for authentication on my <code>postgresql</code> db.</p>\n\n<p>This table should be in a dedicated schema in my database, called, let's say: <code>authentication</code>, to be simple. All's good, I can define and create the table by using:</p>\n\n<pre><code>object UserTable: Table(\"authentication.user\") {\n  val id = integer(\"id\").primaryKey().autoIncrement()\n  val name = varchar(\"name\", 200)\n  val type = integer(\"type\").references(UserTypeTable().id)\n}\n</code></pre>\n\n<p>The creation of the table is ok on a different schema, but when it defines the <code>FK</code>,  it fails, because it uses the name of the table as suffix for the FK's name.</p>\n\n<p>So it's something like <code>fk_authentication.user_fk_type_id</code>, which is a no go, since there cannot be a <code>.</code> on the fk's name and I get a syntax error.</p>\n\n<pre><code>[main] WARN Exposed - Transaction attempt #0 failed: org.postgresql.util.PSQLException: ERROR: syntax error at or near \".\"\n  Statement(s): CREATE TABLE IF NOT EXISTS authentication.user (id INT PRIMARY KEY, \"name\" VARCHAR(200) NOT NULL, type INT NOT NULL CONSTRAINT fk_authentication.user_fk_type_id FOREIGN KEY (type) REFERENCES authentication.user_type(id) ON DELETE RESTRICT ON UPDATE RESTRICT)\norg.jetbrains.exposed.exceptions.ExposedSQLException: org.postgresql.util.PSQLException: ERROR: syntax error at or near \".\"\n</code></pre>\n\n<blockquote>\n  <p>note: I changed the statement to be relatable to the query I wrot:e here as an example. Do not attain to the statement, but to the problem at hand, to correct the syntax.</p>\n</blockquote>\n\n<p>So I think of 2 possibilities:</p>\n\n<ul>\n<li>Define table schema in another way, somehow?</li>\n<li>Define FK name explicitely.</li>\n</ul>\n\n<p>Can I do any of those? or should I approach this in another way? \nI'm trying to do both by looking at the <code>Table.kt</code> code, but not finding anything that I can use... Can someone help me?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["kotlin", "classcastexception"], "comments": [{"owner": {"reputation": 38504, "user_id": 1602555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1sjqZ.jpg?s=128&g=1", "display_name": "Karol Dowbecki", "link": "https://stackoverflow.com/users/1602555/karol-dowbecki"}, "edited": false, "score": 0, "creation_date": 1574778429, "post_id": 59052940, "comment_id": 104345983, "body": "<code>getMyLongValue(15, 10)</code> could complain that <code>java.lang.Integer</code> can not be cast to <code>Long</code> but how are you getting <code>java.lang.Object[]</code> is beyond me. Old Kotlin SDK version?"}, {"owner": {"reputation": 16592, "user_id": 2462531, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oQIzz.jpg?s=128&g=1", "display_name": "Shailendra Madda", "link": "https://stackoverflow.com/users/2462531/shailendra-madda"}, "reply_to_user": {"reputation": 38504, "user_id": 1602555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1sjqZ.jpg?s=128&g=1", "display_name": "Karol Dowbecki", "link": "https://stackoverflow.com/users/1602555/karol-dowbecki"}, "edited": false, "score": 0, "creation_date": 1574778594, "post_id": 59052940, "comment_id": 104346089, "body": "No, it&#39;s latest"}, {"owner": {"reputation": 38504, "user_id": 1602555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1sjqZ.jpg?s=128&g=1", "display_name": "Karol Dowbecki", "link": "https://stackoverflow.com/users/1602555/karol-dowbecki"}, "edited": false, "score": 1, "creation_date": 1574778634, "post_id": 59052940, "comment_id": 104346109, "body": "Will <code>getMyLongValue(15L, 10L)</code> work?"}, {"owner": {"reputation": 16592, "user_id": 2462531, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oQIzz.jpg?s=128&g=1", "display_name": "Shailendra Madda", "link": "https://stackoverflow.com/users/2462531/shailendra-madda"}, "reply_to_user": {"reputation": 38504, "user_id": 1602555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1sjqZ.jpg?s=128&g=1", "display_name": "Karol Dowbecki", "link": "https://stackoverflow.com/users/1602555/karol-dowbecki"}, "edited": false, "score": 0, "creation_date": 1574778900, "post_id": 59052940, "comment_id": 104346271, "body": "I am passing Int values but I want to cast to Long. Then why it&#39;s not allowing? Even I pass Long still the same issue."}, {"owner": {"reputation": 16592, "user_id": 2462531, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oQIzz.jpg?s=128&g=1", "display_name": "Shailendra Madda", "link": "https://stackoverflow.com/users/2462531/shailendra-madda"}, "reply_to_user": {"reputation": 38504, "user_id": 1602555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1sjqZ.jpg?s=128&g=1", "display_name": "Karol Dowbecki", "link": "https://stackoverflow.com/users/1602555/karol-dowbecki"}, "edited": false, "score": 0, "creation_date": 1574838640, "post_id": 59052940, "comment_id": 104368160, "body": "Here is the link to it <a href=\"https://pl.kotl.in/ZzKOfpPXM\" rel=\"nofollow noreferrer\">pl.kotl.in/ZzKOfpPXM</a>"}], "answers": [{"comments": [{"owner": {"reputation": 16592, "user_id": 2462531, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oQIzz.jpg?s=128&g=1", "display_name": "Shailendra Madda", "link": "https://stackoverflow.com/users/2462531/shailendra-madda"}, "edited": false, "score": 0, "creation_date": 1574839165, "post_id": 59053522, "comment_id": 104368383, "body": "I have updated my question, link to it: <a href=\"https://pl.kotl.in/ZzKOfpPXM\" rel=\"nofollow noreferrer\">pl.kotl.in/ZzKOfpPXM</a>"}, {"owner": {"reputation": 5335, "user_id": 6920962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e62cd73355fc90d37429f9443df38da?s=128&d=identicon&r=PG&f=1", "display_name": "user28434", "link": "https://stackoverflow.com/users/6920962/user28434"}, "reply_to_user": {"reputation": 16592, "user_id": 2462531, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oQIzz.jpg?s=128&g=1", "display_name": "Shailendra Madda", "link": "https://stackoverflow.com/users/2462531/shailendra-madda"}, "edited": false, "score": 0, "creation_date": 1574844582, "post_id": 59053522, "comment_id": 104371015, "body": "@ShylendraMadda, ok, your code you can add more type checks to the <code>when</code>, like <code>String</code>, and others that have <code>toLong()</code> implemented."}, {"owner": {"reputation": 16592, "user_id": 2462531, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oQIzz.jpg?s=128&g=1", "display_name": "Shailendra Madda", "link": "https://stackoverflow.com/users/2462531/shailendra-madda"}, "edited": false, "score": 0, "creation_date": 1574853089, "post_id": 59053522, "comment_id": 104375858, "body": "I want to know why it is failing w=even I pass Long type. For now I wanna check with Long."}], "tags": [], "owner": {"reputation": 5335, "user_id": 6920962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e62cd73355fc90d37429f9443df38da?s=128&d=identicon&r=PG&f=1", "display_name": "user28434", "link": "https://stackoverflow.com/users/6920962/user28434"}, "is_accepted": false, "score": 1, "last_activity_date": 1574780149, "last_edit_date": 1574780149, "creation_date": 1574779781, "answer_id": 59053522, "question_id": 59052940, "link": "https://stackoverflow.com/questions/59052940/convert-any-to-long/59053522#59053522", "title": "Convert Any to Long", "body": "<p>You can't just use <code>as Long</code> here. Because it would always fail unless you pass <code>Long</code> parameter.</p>\n\n<p>You should <code>toLong()</code> function to convert. But it's not method of <code>Any</code>. So you will have to get rid of <code>Any</code> type specification.</p>\n\n<p>One way would be to use generics, limited to some <code>interface</code>/<code>class</code> that has <code>toLong()</code> defined. Like <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-number/index.html\" rel=\"nofollow noreferrer\"><code>Number</code></a>.</p>\n\n<pre><code>fun &lt;T: Number&gt; getMyLongValue(vararg any: T) : Long {\n    val myVal = any.first().toLong()\n    return myVal\n}\n</code></pre>\n\n<p>It will definetely work for </p>\n\n<pre><code>getMyLongValue(15, 10)\n</code></pre>\n\n<p>But may not work for your real data, if it would have non-numeric \"input\".</p>\n\n<hr>\n\n<p>Also, why are you using <code>vararg</code> if you just using the first element?</p>\n\n<p>Either drop it, or handle all values:</p>\n\n<pre><code>fun &lt;T: Number&gt; getMyLongValue(vararg any: T) : List&lt;Long&gt; {\n    val myVal = any.map { it.toLong() }\n    return myVal\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16592, "user_id": 2462531, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oQIzz.jpg?s=128&g=1", "display_name": "Shailendra Madda", "link": "https://stackoverflow.com/users/2462531/shailendra-madda"}, "edited": false, "score": 0, "creation_date": 1574783171, "post_id": 59054475, "comment_id": 104348860, "body": "Even it is a number still, it is throwing the exception"}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "reply_to_user": {"reputation": 16592, "user_id": 2462531, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oQIzz.jpg?s=128&g=1", "display_name": "Shailendra Madda", "link": "https://stackoverflow.com/users/2462531/shailendra-madda"}, "edited": false, "score": 0, "creation_date": 1574786698, "post_id": 59054475, "comment_id": 104350930, "body": "@ShylendraMadda I can just show that it works here <a href=\"https://pl.kotl.in/4R6R9ckye\" rel=\"nofollow noreferrer\">pl.kotl.in/4R6R9ckye</a>"}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "reply_to_user": {"reputation": 16592, "user_id": 2462531, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oQIzz.jpg?s=128&g=1", "display_name": "Shailendra Madda", "link": "https://stackoverflow.com/users/2462531/shailendra-madda"}, "edited": false, "score": 1, "creation_date": 1574860281, "post_id": 59054475, "comment_id": 104379889, "body": "See the edit (and please read <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a> for the future, because your question was missing an important part)."}, {"owner": {"reputation": 16592, "user_id": 2462531, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oQIzz.jpg?s=128&g=1", "display_name": "Shailendra Madda", "link": "https://stackoverflow.com/users/2462531/shailendra-madda"}, "edited": false, "score": 0, "creation_date": 1574920056, "post_id": 59054475, "comment_id": 104401298, "body": "Got it simply I need to keep <code>*</code> in front of any param. This fixed my problem"}], "tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": true, "score": 2, "last_activity_date": 1574860225, "last_edit_date": 1574860225, "creation_date": 1574782840, "answer_id": 59054475, "question_id": 59052940, "link": "https://stackoverflow.com/questions/59052940/convert-any-to-long/59054475#59054475", "title": "Convert Any to Long", "body": "<blockquote>\n  <p>I am passing Int values but I want to cast to Long. Then why it's not allowing?</p>\n</blockquote>\n\n<p>Because of <a href=\"https://docs.oracle.com/javase/tutorial/java/data/autoboxing.html\" rel=\"nofollow noreferrer\">boxing</a>. <code>Any</code> corresponds to Java <code>Object</code>, so all primitives are boxed when passed to <code>getMyLongValue</code>. And you can't cast a boxed <code>Int</code> (<code>java.lang.Integer</code>) to <code>Long</code>. You'll need to handle primitives separately, or use the fact that boxed <code>Int</code>/<code>Long</code>/etc. extend <code>Number</code>, e.g.</p>\n\n<pre><code>fun getMyLongValue(vararg any: Any) : Long {\n    return when(val tmp = any.first()) {\n        is Number -&gt; tmp.toLong()\n        else -&gt; throw Exception(\"not a number\") // or do something else reasonable for your case\n    }\n}\n</code></pre>\n\n<p>EDIT: </p>\n\n<p>This problem is not related to converting to <code>Long</code>. When you write</p>\n\n<pre><code>fun getMyLongValue(vararg any: Any) { ... }\n\nfun getMyValue(vararg any: Any): Long {\n    return getMyLongValue(any)\n}\n</code></pre>\n\n<p>you pass the entire <code>any</code> from <code>getMyValue</code> as a single argument (of type <code>Array&lt;Any&gt;</code>). To pass <code>10</code> and <code>15</code> (or other arguments of <code>getMyValue</code>) separately, you need to use <a href=\"https://kotlinlang.org/docs/reference/functions.html#variable-number-of-arguments-varargs\" rel=\"nofollow noreferrer\">the spread operator</a>:</p>\n\n<pre><code>fun getMyValue(vararg any: Any): Long {\n    return getMyLongValue(*any)\n}\n</code></pre>\n"}], "owner": {"reputation": 16592, "user_id": 2462531, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oQIzz.jpg?s=128&g=1", "display_name": "Shailendra Madda", "link": "https://stackoverflow.com/users/2462531/shailendra-madda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 468, "favorite_count": 1, "accepted_answer_id": 59054475, "answer_count": 2, "score": -2, "last_activity_date": 1574860225, "creation_date": 1574777864, "last_edit_date": 1574838598, "question_id": 59052940, "link": "https://stackoverflow.com/questions/59052940/convert-any-to-long", "title": "Convert Any to Long", "body": "<p>I am trying to convert the <code>Any</code> type of an Object to <code>Long</code>, but it is showing the following exception:</p>\n\n<blockquote>\n  <p>java.lang.ClassCastException : java.lang.Object[] cannot be cast to java.lang.Long</p>\n</blockquote>\n\n<p>Here I want to cast the <code>any</code> to <code>Long</code> like below:</p>\n\n<pre><code>    fun getMyLongValue(vararg any: Any) : Long {\n    return when(val tmp = any.first()) {\n        is Number -&gt; tmp.toLong()\n        else -&gt; throw Exception(\"not a number\")\n    }\n}\n</code></pre>\n\n<p>I am passing params to it like:</p>\n\n<pre><code>    fun main() { \n    val param1 = 10\n    val param2 = 20\n    println(getMyValue(param1.toLong(), param2.toLong())) \n}\n\nfun getMyValue(vararg any: Any): Long {\n    return getMyLongValue(any)\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "build.gradle", "gradle-kotlin-dsl"], "comments": [{"owner": {"reputation": 1062, "user_id": 4028009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52d9e87ce304217b5b34a44059e5fd77?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeny  Bovykin", "link": "https://stackoverflow.com/users/4028009/evgeny-bovykin"}, "edited": false, "score": 0, "creation_date": 1574777719, "post_id": 59052655, "comment_id": 104345559, "body": "Seems like it has nothing to do with the keys, but your code simply doesn&#39;t compile. Check your syntax around line 49"}], "answers": [{"tags": [], "owner": {"reputation": 755, "user_id": 1286214, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3800e55981ddc5f7a5b6766ec2a433e6?s=128&d=identicon&r=PG", "display_name": "OLee Csobert", "link": "https://stackoverflow.com/users/1286214/olee-csobert"}, "is_accepted": false, "score": 4, "last_activity_date": 1574867942, "last_edit_date": 1574867942, "creation_date": 1574778183, "answer_id": 59053039, "question_id": 59052655, "link": "https://stackoverflow.com/questions/59052655/kotlin-dsl-retrieving-keys-from-other-file/59053039#59053039", "title": "kotlin DSL retrieving keys from other file", "body": "<p>I solved my problem (it seems so.. <strong>check the edit!!</strong>). I ended up with the following function:</p>\n\n<pre><code>// Retrieve key for api\nfun getApiKey(): String {\n    val items = HashMap&lt;String, String&gt;()\n    val f = File(\"keys.properties\")\n\n    f.forEachLine {\n        items[it.split(\"=\")[0]] = it.split(\"=\")[1]\n    }\n\n    return items[\"API_KEY\"]!!\n}\n</code></pre>\n\n<p>And then I call <code>buildConfigField</code> as follow:</p>\n\n<pre><code>buildConfigField(\"String\", \"API_KEY\", getApiKey())\n</code></pre>\n\n<p>There are no errors anymore on this part.</p>\n\n<h2>Edit</h2>\n\n<p>Once I have fixed all errors in the <code>build.gradle.kts</code>, the build of my project return that the file <code>keys.properties</code> could not be found: I had to fix my function <code>getApiKey</code>. Finally I could build and run my project with the following implementation:</p>\n\n<pre><code>// Return value of api key stored in `app/keys.properties`\nfun getApiKey(): String {\n    val items = HashMap&lt;String, String&gt;()\n\n    val fl = rootProject.file(\"app/keys.properties\")\n\n    (fl.exists())?.let {\n        fl.forEachLine {\n            items[it.split(\"=\")[0]] = it.split(\"=\")[1]\n        }\n    }\n\n    return items[\"API_KEY\"]!!\n}\n</code></pre>\n\n<p>This function is far to be good with all its hardcoded stuff but it allows to build my project.</p>\n"}, {"tags": [], "owner": {"reputation": 2039, "user_id": 5595926, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fSHYE.jpg?s=128&g=1", "display_name": "snorlax", "link": "https://stackoverflow.com/users/5595926/snorlax"}, "is_accepted": false, "score": 1, "last_activity_date": 1588969643, "creation_date": 1588969643, "answer_id": 61687562, "question_id": 59052655, "link": "https://stackoverflow.com/questions/59052655/kotlin-dsl-retrieving-keys-from-other-file/61687562#61687562", "title": "kotlin DSL retrieving keys from other file", "body": "<p>Alternative </p>\n\n<pre><code>import com.android.build.gradle.internal.cxx.configure.gradleLocalProperties\n\nval apiKey = gradleLocalProperties(rootDir).getProperty(\"key.properties\")\n</code></pre>\n\n<p>..</p>\n\n<pre><code>buildConfigField(\"String\", \"API_KEY\", \"\\\"$apiKey\\\"\")\n</code></pre>\n"}], "owner": {"reputation": 755, "user_id": 1286214, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3800e55981ddc5f7a5b6766ec2a433e6?s=128&d=identicon&r=PG", "display_name": "OLee Csobert", "link": "https://stackoverflow.com/users/1286214/olee-csobert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 957, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1588969643, "creation_date": 1574776929, "question_id": 59052655, "link": "https://stackoverflow.com/questions/59052655/kotlin-dsl-retrieving-keys-from-other-file", "title": "kotlin DSL retrieving keys from other file", "body": "<p>I am trying to switch my gradle files to Kotlin DSL. My project is making call \nto an API. </p>\n\n<p>In <code>build.gradle(app)</code> I had a function to retrieve an api key stored in an other \nfile <code>keys.properties</code>.</p>\n\n<p>After some problem (for <a href=\"https://stackoverflow.com/questions/59046413/switching-to-kotlin-dsl-unresolved-reference-when-trying-to-access-other-file\">example</a>) I rewrote the function to get the \nkey. I wrote the following function in <code>build.gradle.kts</code>:</p>\n\n<pre><code>import import java.io.File\n\nfun readFileLineByLineUsingForEachLine2(fileName: String): HashMap&lt;String, String&gt;{\n    val items = HashMap&lt;String, String&gt;()\n\n    File(fileName).forEachLine {\n        items[it.split(\"=\")[0]] = it.split(\"=\")[1]\n    }\n\n    return items\n}\n</code></pre>\n\n<p>Then I set a variable to hold the value of a particular key:</p>\n\n<pre><code>buildConfigField(String!, \"API_KEY\", returnMapOfKeys()[\"API_KEY\"])\n</code></pre>\n\n<p>After fixing some errors I am stuck with the following one:</p>\n\n<pre><code>app/build.gradle.kts:49:36: Expecting ')'\n</code></pre>\n\n<p>which point on the line above with <code>buildConfigField</code>.</p>\n\n<p>Does someone know where is this error ? </p>\n\n<p>Or does someone know how to retrieve keys from files with Kotlin DSL ?</p>\n"}, {"tags": ["gradle", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 25736, "user_id": 6395627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dac5493d339ba8cb379f4efb2485d65?s=128&d=identicon&r=PG&f=1", "display_name": "Slaw", "link": "https://stackoverflow.com/users/6395627/slaw"}, "is_accepted": true, "score": 6, "last_activity_date": 1574777624, "last_edit_date": 1574777624, "creation_date": 1574777307, "answer_id": 59052766, "question_id": 59052598, "link": "https://stackoverflow.com/questions/59052598/apply-withjavadocjar-and-withsourcesjar-for-all-subprojects-in-multi-module/59052766#59052766", "title": "apply withJavadocJar() and withSourcesJar() for all subProjects in multi-module build", "body": "<p>Placing the following in the root <code>build.gradle.kts</code> file should work:</p>\n\n<pre><code>subprojects {\n    apply&lt;JavaPlugin&gt;() // or: apply(plugin = \"java\")\n\n    configure&lt;JavaPluginExtension&gt; {\n        withSourcesJar()\n        withJavadocJar()\n    }\n}\n</code></pre>\n\n<p>Unfortunately the Kotlin DSL loses some of its ease-of-use when cross-configuring projects. See the <a href=\"https://docs.gradle.org/current/userguide/kotlin_dsl.html#sec:kotlin_cross_project_configuration\" rel=\"noreferrer\">Gradle Kotlin DSL Primer</a> guide for more information.</p>\n"}], "owner": {"reputation": 35330, "user_id": 322642, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0030846647f93ba6bf0938a199688c2e?s=128&d=identicon&r=PG", "display_name": "ligi", "link": "https://stackoverflow.com/users/322642/ligi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 366, "favorite_count": 0, "accepted_answer_id": 59052766, "answer_count": 1, "score": 2, "last_activity_date": 1574777624, "creation_date": 1574776735, "question_id": 59052598, "link": "https://stackoverflow.com/questions/59052598/apply-withjavadocjar-and-withsourcesjar-for-all-subprojects-in-multi-module", "title": "apply withJavadocJar() and withSourcesJar() for all subProjects in multi-module build", "body": "<p>currently I have:</p>\n\n<pre><code>java {\n    withJavadocJar()\n    withSourcesJar()\n}\n</code></pre>\n\n<p>in all build.gradle.kts files of modules in an multi-module build. With gradle and groovy I could just have this in the root gradle file - but I seem to not be able to do this with kotlin gradle files. Anyone knows how to do this?</p>\n"}, {"tags": ["android", "kotlin", "bottomnavigationview"], "answers": [{"comments": [{"owner": {"reputation": 455, "user_id": 10545524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vZhuO.jpg?s=128&g=1", "display_name": "Lina", "link": "https://stackoverflow.com/users/10545524/lina"}, "edited": false, "score": 0, "creation_date": 1574778001, "post_id": 59052778, "comment_id": 104345724, "body": "I tried your solution but still not get what I want"}, {"owner": {"reputation": 10141, "user_id": 7746134, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uAn6O.png?s=128&g=1", "display_name": "Saurabh Thorat", "link": "https://stackoverflow.com/users/7746134/saurabh-thorat"}, "reply_to_user": {"reputation": 455, "user_id": 10545524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vZhuO.jpg?s=128&g=1", "display_name": "Lina", "link": "https://stackoverflow.com/users/10545524/lina"}, "edited": false, "score": 1, "creation_date": 1574833790, "post_id": 59052778, "comment_id": 104366290, "body": "@Lina Set <code>app:itemBackground=@drawable&#47;selector checked_uncheked</code>"}, {"owner": {"reputation": 455, "user_id": 10545524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vZhuO.jpg?s=128&g=1", "display_name": "Lina", "link": "https://stackoverflow.com/users/10545524/lina"}, "edited": false, "score": 0, "creation_date": 1574840797, "post_id": 59052778, "comment_id": 104369137, "body": "yes, worked thank you but still have a problem  The line display on to the Name (Home,Account,....), how can i put it below with margin 2dp"}, {"owner": {"reputation": 455, "user_id": 10545524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vZhuO.jpg?s=128&g=1", "display_name": "Lina", "link": "https://stackoverflow.com/users/10545524/lina"}, "edited": false, "score": 0, "creation_date": 1574841661, "post_id": 59052778, "comment_id": 104369574, "body": "Worked Thank you, I just change the size"}], "tags": [], "owner": {"reputation": 10141, "user_id": 7746134, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uAn6O.png?s=128&g=1", "display_name": "Saurabh Thorat", "link": "https://stackoverflow.com/users/7746134/saurabh-thorat"}, "is_accepted": true, "score": 3, "last_activity_date": 1574777344, "creation_date": 1574777344, "answer_id": 59052778, "question_id": 59052420, "link": "https://stackoverflow.com/questions/59052420/add-a-line-below-each-item-selected-in-bottom-navigation-view/59052778#59052778", "title": "Add a line below each item selected in bottom navigation view", "body": "<p>Use this <code>line.xml</code>:</p>\n\n<pre><code>&lt;layer-list xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt;\n    &lt;item\n        android:left=\"32dp\"\n        android:right=\"32dp\"\n        android:top=\"32dp\"&gt;\n        &lt;shape android:shape=\"line\"&gt;\n            &lt;stroke android:width=\"6dp\" android:height=\"2dp\" android:color=\"@color/honey\"/&gt;\n            &lt;corners android:radius=\"5dp\"/&gt;\n        &lt;/shape&gt;\n    &lt;/item&gt;\n&lt;/layer-list&gt;\n</code></pre>\n\n<p>Adjust the margins according to your layout.</p>\n"}], "owner": {"reputation": 455, "user_id": 10545524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vZhuO.jpg?s=128&g=1", "display_name": "Lina", "link": "https://stackoverflow.com/users/10545524/lina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1228, "favorite_count": 0, "accepted_answer_id": 59052778, "answer_count": 1, "score": 2, "last_activity_date": 1597233676, "creation_date": 1574776137, "last_edit_date": 1574776382, "question_id": 59052420, "link": "https://stackoverflow.com/questions/59052420/add-a-line-below-each-item-selected-in-bottom-navigation-view", "title": "Add a line below each item selected in bottom navigation view", "body": "<p>I want to put a ligne below each Bottom Navigation View Item's items when It is selected. As the image below, but I don't find the way to do it.\nI create a shape line, line.xml as the following :</p>\n\n<pre><code>&lt;shape xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:shape=\"line\"&gt;\n    &lt;stroke android:width=\"6dp\" android:height=\"2dp\" android:color=\"@color/honey\"/&gt;\n    &lt;corners android:radius=\"5dp\"/&gt;\n&lt;/shape&gt;\n</code></pre>\n\n<p>and I create a selector checked_uncheked.xml as the following code :</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;selector xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt;\n    &lt;item android:drawable=\"@drawable/line\" android:state_checked=\"true\"/&gt;\n    &lt;item android:drawable=\"@color/white\" android:state_checked=\"false\"/&gt;\n&lt;/selector&gt;\n</code></pre>\n\n<p>I added <code>\"app:itemBackground=\"@drawable/line\"</code> below the bottomNavigation and still have no result </p>\n\n<p><a href=\"https://i.stack.imgur.com/W4sNi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/W4sNi.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["android", "kotlin", "android-workmanager"], "comments": [{"owner": {"reputation": 4593, "user_id": 118862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dfa913cbcfe896af79e0484084c316b?s=128&d=identicon&r=PG", "display_name": "pfmaggi", "link": "https://stackoverflow.com/users/118862/pfmaggi"}, "edited": false, "score": 0, "creation_date": 1574777003, "post_id": 59051841, "comment_id": 104345179, "body": "This doesn&#39;t look like one of the supported use cases... Can you expand a bit your question...What are you trying to implement here?"}, {"owner": {"reputation": 389, "user_id": 6151355, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-SHCzkh7oOqE/AAAAAAAAAAI/AAAAAAAAAC8/748KlWoMjcs/photo.jpg?sz=128", "display_name": "Jan Mad\u011bra", "link": "https://stackoverflow.com/users/6151355/jan-mad%c4%9bra"}, "reply_to_user": {"reputation": 4593, "user_id": 118862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dfa913cbcfe896af79e0484084c316b?s=128&d=identicon&r=PG", "display_name": "pfmaggi", "link": "https://stackoverflow.com/users/118862/pfmaggi"}, "edited": false, "score": 0, "creation_date": 1574777589, "post_id": 59051841, "comment_id": 104345497, "body": "My usecase is that you must continue you work after all request all done. And do you if in WorkManager is way to call Works in the order in which they were created?"}, {"owner": {"reputation": 4593, "user_id": 118862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dfa913cbcfe896af79e0484084c316b?s=128&d=identicon&r=PG", "display_name": "pfmaggi", "link": "https://stackoverflow.com/users/118862/pfmaggi"}, "edited": false, "score": 0, "creation_date": 1574781191, "post_id": 59051841, "comment_id": 104347655, "body": "You can append work in a unique work request, this creates a Chain for you that maintains the order of execution. Is this what you&#39;re looking for?"}, {"owner": {"reputation": 389, "user_id": 6151355, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-SHCzkh7oOqE/AAAAAAAAAAI/AAAAAAAAAC8/748KlWoMjcs/photo.jpg?sz=128", "display_name": "Jan Mad\u011bra", "link": "https://stackoverflow.com/users/6151355/jan-mad%c4%9bra"}, "reply_to_user": {"reputation": 4593, "user_id": 118862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dfa913cbcfe896af79e0484084c316b?s=128&d=identicon&r=PG", "display_name": "pfmaggi", "link": "https://stackoverflow.com/users/118862/pfmaggi"}, "edited": false, "score": 0, "creation_date": 1574783487, "post_id": 59051841, "comment_id": 104349088, "body": "Yes, that is what I am looking for. Do you have some examples for working with unique requests in chain?"}], "answers": [{"comments": [{"owner": {"reputation": 389, "user_id": 6151355, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-SHCzkh7oOqE/AAAAAAAAAAI/AAAAAAAAAC8/748KlWoMjcs/photo.jpg?sz=128", "display_name": "Jan Mad\u011bra", "link": "https://stackoverflow.com/users/6151355/jan-mad%c4%9bra"}, "edited": false, "score": 0, "creation_date": 1574846732, "post_id": 59059096, "comment_id": 104372128, "body": "And is there some way to cancel one of the work by tag?"}, {"owner": {"reputation": 4593, "user_id": 118862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dfa913cbcfe896af79e0484084c316b?s=128&d=identicon&r=PG", "display_name": "pfmaggi", "link": "https://stackoverflow.com/users/118862/pfmaggi"}, "reply_to_user": {"reputation": 389, "user_id": 6151355, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-SHCzkh7oOqE/AAAAAAAAAAI/AAAAAAAAAC8/748KlWoMjcs/photo.jpg?sz=128", "display_name": "Jan Mad\u011bra", "link": "https://stackoverflow.com/users/6151355/jan-mad%c4%9bra"}, "edited": false, "score": 0, "creation_date": 1574865819, "post_id": 59059096, "comment_id": 104383189, "body": "If we&#39;re talking about Workers in a chain (like for a unique work request using the APPEND policy), you can only cancel the whole chain. In general, as far you have assigned a tag to a work request, you can use <code>WorkManager.cancelAllWorkByTag(String)</code>. You can see the doc at:  <a href=\"https://developer.android.com/topic/libraries/architecture/workmanager/how-to/cancel-stop-work\" rel=\"nofollow noreferrer\">developer.android.com/topic/libraries/architecture/workmanag&zwnj;&#8203;er/&hellip;</a>"}, {"owner": {"reputation": 389, "user_id": 6151355, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-SHCzkh7oOqE/AAAAAAAAAAI/AAAAAAAAAC8/748KlWoMjcs/photo.jpg?sz=128", "display_name": "Jan Mad\u011bra", "link": "https://stackoverflow.com/users/6151355/jan-mad%c4%9bra"}, "edited": false, "score": 0, "creation_date": 1574869334, "post_id": 59059096, "comment_id": 104385144, "body": "Thanks a lot :) . And is there some way, to cancel the Work by tag in chain (i am using unique work with APPEND policy)? My use case is that you have works in chain waiting for network constraint, but in some point I need to cancel one of the work in chain?"}, {"owner": {"reputation": 4593, "user_id": 118862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dfa913cbcfe896af79e0484084c316b?s=128&d=identicon&r=PG", "display_name": "pfmaggi", "link": "https://stackoverflow.com/users/118862/pfmaggi"}, "reply_to_user": {"reputation": 389, "user_id": 6151355, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-SHCzkh7oOqE/AAAAAAAAAAI/AAAAAAAAAC8/748KlWoMjcs/photo.jpg?sz=128", "display_name": "Jan Mad\u011bra", "link": "https://stackoverflow.com/users/6151355/jan-mad%c4%9bra"}, "edited": false, "score": 0, "creation_date": 1574934347, "post_id": 59059096, "comment_id": 104407361, "body": "As I wrote, you cannot cancel a single Worker in a chain. You need to handle such situation passing the information that a Worker don&#39;t need to run in some other way (maybe setting some flag in your datastore)."}], "tags": [], "owner": {"reputation": 4593, "user_id": 118862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dfa913cbcfe896af79e0484084c316b?s=128&d=identicon&r=PG", "display_name": "pfmaggi", "link": "https://stackoverflow.com/users/118862/pfmaggi"}, "is_accepted": true, "score": 1, "last_activity_date": 1574801135, "creation_date": 1574801135, "answer_id": 59059096, "question_id": 59051841, "link": "https://stackoverflow.com/questions/59051841/android-workmanager-get-unfinished-works-from-workmanager/59059096#59059096", "title": "Android WorkManager - get unfinished works from WorkManager", "body": "<p>If what you want to achieve is to maintain the order of your work requests, an approach is to use an <code>UniqueWorkRequest</code> using as <a href=\"https://developer.android.com/reference/androidx/work/WorkManager.html#enqueueUniqueWork(java.lang.String,%20androidx.work.ExistingWorkPolicy,%20androidx.work.OneTimeWorkRequest)\" rel=\"nofollow noreferrer\"><code>ExistingWorkPolicy</code></a> the <code>APPEND</code> one. This creates for you a chain of work:</p>\n\n<pre><code>WorkManager.getInstance(context).enqueueUniqueWork(\"unique name\", ExistingWorkPolicy.APPEND, myOneTimeWorkRequest)\n</code></pre>\n\n<p>You can find more information in <a href=\"https://developer.android.com/topic/libraries/architecture/workmanager/how-to/unique-work\" rel=\"nofollow noreferrer\">WorkManager's Unique Work guide</a>. Keep in mind that if you cancel a work request in the chain or return <code>failure</code> from your worker, the all chain is cancelled or marked as failed.</p>\n"}], "owner": {"reputation": 389, "user_id": 6151355, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-SHCzkh7oOqE/AAAAAAAAAAI/AAAAAAAAAC8/748KlWoMjcs/photo.jpg?sz=128", "display_name": "Jan Mad\u011bra", "link": "https://stackoverflow.com/users/6151355/jan-mad%c4%9bra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 0, "accepted_answer_id": 59059096, "answer_count": 1, "score": 0, "last_activity_date": 1574801135, "creation_date": 1574774175, "question_id": 59051841, "link": "https://stackoverflow.com/questions/59051841/android-workmanager-get-unfinished-works-from-workmanager", "title": "Android WorkManager - get unfinished works from WorkManager", "body": "<p>is there any way to get all unfinished works from WorkManager from android-jetpack? I know you can get <strong>Works</strong> by id/tag. But cannot find some way to get all unfinished Works? Thanks for answers :)</p>\n"}, {"tags": ["android", "kotlin", "android-webview"], "comments": [{"owner": {"reputation": 10519, "user_id": 1199662, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/ihCLz.jpg?s=128&g=1", "display_name": "Droidman", "link": "https://stackoverflow.com/users/1199662/droidman"}, "edited": false, "score": 0, "creation_date": 1574771844, "post_id": 59051076, "comment_id": 104342255, "body": "related <a href=\"https://stackoverflow.com/questions/7610790/add-custom-headers-to-webview-resource-requests-android\" title=\"add custom headers to webview resource requests android\">stackoverflow.com/questions/7610790/&hellip;</a>"}, {"owner": {"reputation": 173, "user_id": 6902588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4606eecefbb5d50527ef17bf732c5f3?s=128&d=identicon&r=PG&f=1", "display_name": "leimenghao", "link": "https://stackoverflow.com/users/6902588/leimenghao"}, "edited": false, "score": 0, "creation_date": 1574772430, "post_id": 59051076, "comment_id": 104342635, "body": "and this <a href=\"https://stackoverflow.com/questions/19692617/how-do-i-see-request-headers-on-android-webview-requests\" title=\"how do i see request headers on android webview requests\">stackoverflow.com/questions/19692617/&hellip;</a>"}, {"owner": {"reputation": 43, "user_id": 10492754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3df1c1b2de1cf9fec17edb8a27b8b9c4?s=128&d=identicon&r=PG&f=1", "display_name": "Sawyerhard", "link": "https://stackoverflow.com/users/10492754/sawyerhard"}, "reply_to_user": {"reputation": 10519, "user_id": 1199662, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/ihCLz.jpg?s=128&g=1", "display_name": "Droidman", "link": "https://stackoverflow.com/users/1199662/droidman"}, "edited": false, "score": 0, "creation_date": 1574773376, "post_id": 59051076, "comment_id": 104343208, "body": "@Droidman, i want to get already existing headers instead of add"}], "answers": [{"tags": [], "owner": {"reputation": 172, "user_id": 9546154, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rgegn.jpg?s=128&g=1", "display_name": "Hanzla", "link": "https://stackoverflow.com/users/9546154/hanzla"}, "is_accepted": false, "score": 1, "last_activity_date": 1574775104, "creation_date": 1574775104, "answer_id": 59052117, "question_id": 59051076, "link": "https://stackoverflow.com/questions/59051076/get-request-headers-at-webview/59052117#59052117", "title": "Get request headers at webview", "body": "<p>You haven't clearly described your problem. I assume you want to change <code>minimum api</code> of your application in order to use method \"WebResourceRequest.requestHeaders\".\nFor this you can do this:</p>\n\n<ol>\n<li>Right click on your project file</li>\n<li>Select \"Open Module Settings\"</li>\n<li>Go to the \"Flavors\" tab.</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/XrcC2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XrcC2.png\" alt=\"enter image description here\"></a></p>\n\n<ol start=\"4\">\n<li>Select the \"Min Sdk Version\" from the drop down list</li>\n</ol>\n\n<p>For further help you can refer to this post. <a href=\"https://stackoverflow.com/questions/19465049/changing-api-level-android-studio/27626671#27626671\">Changing API level Android Studio</a></p>\n"}], "owner": {"reputation": 43, "user_id": 10492754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3df1c1b2de1cf9fec17edb8a27b8b9c4?s=128&d=identicon&r=PG&f=1", "display_name": "Sawyerhard", "link": "https://stackoverflow.com/users/10492754/sawyerhard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574780174, "creation_date": 1574771599, "last_edit_date": 1574780174, "question_id": 59051076, "link": "https://stackoverflow.com/questions/59051076/get-request-headers-at-webview", "title": "Get request headers at webview", "body": "<p>I login by webview and I need to get headers after logging in.\nI found, that i can get it by using a method \"<strong>WebResourceRequest.requestHeaders</strong>\":</p>\n\n<pre><code> override fun shouldInterceptRequest(\n                view: WebView?,\n                request: WebResourceRequest?\n            ): WebResourceResponse? {\n                request.requestHeaders // this method\n                return super.shouldInterceptRequest(view, request)\n            }\n</code></pre>\n\n<p>but it allows only for >=21 api version. My application has 16 minversion, are there any other ways to get headers from webview request?</p>\n"}, {"tags": ["kotlin", "tornadofx"], "comments": [{"owner": {"reputation": 771, "user_id": 11268550, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-evYZvlqxjGg/AAAAAAAAAAI/AAAAAAAAAS8/2GAma8xFqDE/photo.jpg?sz=128", "display_name": "JCamacho", "link": "https://stackoverflow.com/users/11268550/jcamacho"}, "edited": false, "score": 0, "creation_date": 1574784957, "post_id": 59050391, "comment_id": 104349951, "body": "I&#39;ll admit I&#39;m not well versed in how the config thing works but what I do know is that you are trying to put list properties of type <code>&lt;JsonValue!&gt;</code> while you&#39;ve specifically typed your ListViews as type <code>&lt;String&gt;</code>. Your IDE is slightly misleading you. It&#39;s simply asking that the minimum that it needs is a read-only list property <b>of the correct type</b>. If you want that type to be displayed in a certain way, inside the listview builder, use: <code>cellFormat {  text = &#47;* it.whateveryouwant *&#47; }</code>"}, {"owner": {"reputation": 771, "user_id": 11268550, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-evYZvlqxjGg/AAAAAAAAAAI/AAAAAAAAAS8/2GAma8xFqDE/photo.jpg?sz=128", "display_name": "JCamacho", "link": "https://stackoverflow.com/users/11268550/jcamacho"}, "edited": false, "score": 0, "creation_date": 1574785110, "post_id": 59050391, "comment_id": 104350041, "body": "You&#39;ve also failed to override the View&#39;s root, but maybe you excluded that from your example on purpose. Why are your listviews generated by functions? Do you plan to generate them multiple times in the same view?"}, {"owner": {"reputation": 179, "user_id": 4341527, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ba17ab577c578637e740847329f5067c?s=128&d=identicon&r=PG&f=1", "display_name": "fridgepolice", "link": "https://stackoverflow.com/users/4341527/fridgepolice"}, "reply_to_user": {"reputation": 771, "user_id": 11268550, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-evYZvlqxjGg/AAAAAAAAAAI/AAAAAAAAAS8/2GAma8xFqDE/photo.jpg?sz=128", "display_name": "JCamacho", "link": "https://stackoverflow.com/users/11268550/jcamacho"}, "edited": false, "score": 0, "creation_date": 1574849906, "post_id": 59050391, "comment_id": 104374010, "body": "@JCamacho - true, yes, the root is being composed elsewhere that I didn&#39;t include in source. They don&#39;t really need to be functions; I just broke them out so that I could compose the root view in a few lines. (They should probably be vals.)"}], "owner": {"reputation": 179, "user_id": 4341527, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ba17ab577c578637e740847329f5067c?s=128&d=identicon&r=PG&f=1", "display_name": "fridgepolice", "link": "https://stackoverflow.com/users/4341527/fridgepolice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1574769388, "creation_date": 1574769297, "last_edit_date": 1574769388, "question_id": 59050391, "link": "https://stackoverflow.com/questions/59050391/bind-listview-to-config-sourced-property", "title": "Bind listview to config sourced property", "body": "<p>I'm attempting to follow the guide to try to persist multiple choices from two lists to config. (<a href=\"https://edvin.gitbooks.io/tornadofx-guide/part2/Config%20Settings%20and%20State.html\" rel=\"nofollow noreferrer\">https://edvin.gitbooks.io/tornadofx-guide/part2/Config%20Settings%20and%20State.html</a>). The guide only discusses SimpleStringProperty in this context. I can see that I should be using SimpleListProperty, but I don't see the right way to associate it with config.</p>\n\n<p>My rough attempt so far:</p>\n\n<pre><code>data class Devices(val receivers: List&lt;String&gt;, val transmitters: List&lt;String&gt;)\n\n\n// XXX I'd like to just persist Devices, but I'm exposing separate properties for the constituents of Devices\nclass DevicesModel: ItemViewModel&lt;Devices&gt;() {\n\n    // XXX type ends up as Property&lt;ObservableList&lt;JsonValue&gt;&gt;, which seems wrong\n    val receivers = bind { SimpleListProperty(this, \"receivers\", config.jsonArray(\"receivers\")!!.toObservable()) }\n\n    val transmitters = bind { SimpleListProperty(this, \"transmitters\", config.jsonArray(\"transmitters\")!!.toObservable()) }    \n\n}\n\nclass FooView: View() {\n\n    val devicesModel = DevicesModel()\n\n    // XXX this wants a ReadOnlyListProperty, rather than what it's getting\n    fun receivers() = listview&lt;String&gt;(devicesModel.receivers) {\n        selectionModel.selectionMode = SelectionMode.MULTIPLE\n    }\n\n    fun transmitters() = listview&lt;String&gt;(devicesModel.transmitters) {\n        selectionModel.selectionMode = SelectionMode.MULTIPLE\n    }\n\n}\n</code></pre>\n\n<p>Obviously I haven't tackled commit etc, which I will. My question is about the binding/association specifically -- where have I gone wrong? My lack of JavaFX / UI programming background is probably hurting me here.</p>\n\n<p>I have three questions marked with XXX in code, specifically:</p>\n\n<ul>\n<li><p>I have a mismatch between the properties I'm exposing and the data class. I suppose this could be dealt with in the commit, but that seems messy.</p></li>\n<li><p>The typing on the properties themselves (particularly JsonValue being exposed) seems wrong, but I don't see a way to expose what I'm looking for.</p></li>\n<li><p>Why does <code>listview()</code> want a ReadOnlyListProperty? How do I make this accept an Observable?</p></li>\n</ul>\n\n<p>I will post a PR to the guide with an example, and some clarifying explanation, once I get this working.</p>\n"}, {"tags": ["spring", "spring-boot", "kotlin", "spring-webflux", "kotlin-coroutines"], "answers": [{"tags": [], "owner": {"reputation": 1241, "user_id": 2506874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74ecd06e94d6109b1a00fc71d7eb2854?s=128&d=identicon&r=PG", "display_name": "aduchate", "link": "https://stackoverflow.com/users/2506874/aduchate"}, "is_accepted": true, "score": 3, "last_activity_date": 1574962394, "creation_date": 1574962394, "answer_id": 59093947, "question_id": 59050089, "link": "https://stackoverflow.com/questions/59050089/using-reactivesecuritycontextholder-inside-a-kotlin-flow/59093947#59093947", "title": "Using ReactiveSecurityContextHolder inside a Kotlin Flow", "body": "<p>What you really try to achieve is accessing your ReactorContext from inside a Flow.</p>\n\n<p>One way to do this is to relax the need for returning a Flow and return a Flux instead. This allows you to recover the ReactorContext and pass it to the Flow you are going to use to generate your data.</p>\n\n<pre><code>@ExperimentalCoroutinesApi\n@GetMapping(\"/flow\")\nfun flow(): Flux&lt;Map&lt;String, String&gt;&gt; = Mono.subscriberContext().flatMapMany { reactorCtx -&gt;\n    flow {\n        val ctx = coroutineContext[ReactorContext.Key]?.context?.get&lt;Mono&lt;SecurityContext&gt;&gt;(SecurityContext::class.java)?.asFlow()?.single()\n        emit(mapOf(\"user\" to ((ctx?.authentication?.principal as? User)?.username ?: \"&lt;NONE&gt;\")))\n    }.flowOn(reactorCtx.asCoroutineContext()).asFlux()\n}\n</code></pre>\n\n<p>In the case when you need to access the ReactorContext from a suspend method, you can simply get it back from the coroutineContext with no further artifice:</p>\n\n<pre><code>@ExperimentalCoroutinesApi\n@GetMapping(\"/suspend\")\nsuspend fun suspend(): Map&lt;String,String&gt; {\n    val ctx = coroutineContext[ReactorContext.Key]?.context?.get&lt;Mono&lt;SecurityContext&gt;&gt;(SecurityContext::class.java)?.asFlow()?.single()\n    return mapOf(\"user\" to ((ctx?.authentication?.principal as? User)?.username ?: \"&lt;NONE&gt;\"))\n}\n</code></pre>\n"}], "owner": {"reputation": 138, "user_id": 3395992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58e8df8840253d52ccc68c4510691cc8?s=128&d=identicon&r=PG&f=1", "display_name": "SimonH", "link": "https://stackoverflow.com/users/3395992/simonh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 676, "favorite_count": 1, "accepted_answer_id": 59093947, "answer_count": 1, "score": 3, "last_activity_date": 1574962394, "creation_date": 1574768214, "last_edit_date": 1574861469, "question_id": 59050089, "link": "https://stackoverflow.com/questions/59050089/using-reactivesecuritycontextholder-inside-a-kotlin-flow", "title": "Using ReactiveSecurityContextHolder inside a Kotlin Flow", "body": "<p>I'm working on a Spring Boot (2.2) project using Kotlin, with CouchDB as (reactive) database, and in consequence, async DAO (either suspend functions, or functions returning a Flow). I'm trying to setup WebFlux in order to have async controllers too (again, I want to return Flows, not Flux). But I'm having troubles retrieving my security context from <code>ReactiveSecurityContextHolder</code>. </p>\n\n<p>From what I've read, unlike <code>SecurityContextHolder</code> which is using <code>ThreadLocal</code> to store it, <code>ReactiveSecurityContextHolder</code> relies on the fact that Spring, while making a subscription to my reactive chain, also stored that context inside this chain, thus allowing me to call <code>ReactiveSecurityContextHolder.getContext()</code> from within the chain. </p>\n\n<p>The problem is that I have to transform my <code>Mono&lt;SecurityContext&gt;</code> into a Flow at some point, which makes me loose my <code>SecurityContext</code>. So my question is: is there a way to have a Spring Boot controller returning a Flow while retrieving the security context from <code>ReactiveSecurityContextHolder</code> inside my logic? Basically, after simplification, it should look like this: </p>\n\n<pre><code>@GetMapping\nfun getArticles(): Flow&lt;String&gt; {\n    return ReactiveSecurityContextHolder.getContext().flux().asFlow() // returns nothing\n}\n</code></pre>\n\n<p>Note that if I return the Flux directly (skipping the <code>.asFlow()</code>), or add a <code>.single()</code> or <code>.toList()</code> in the end (hence using a <code>suspend fun</code>), then it works fine and my security context is returned, but again that's not what I want. I guess the solution would be to transfer the context from the Flux (initial reactive chain from <code>ReactiveSecurityContextHolder</code>) to the Flow, but it doesn't seem to be done by default. </p>\n\n<p>Edit: here is a sample project showcasing the problem: <a href=\"https://github.com/Simon3/webflux-kotlin-sample\" rel=\"nofollow noreferrer\">https://github.com/Simon3/webflux-kotlin-sample</a></p>\n"}, {"tags": ["android", "xml", "kotlin", "layout", "android-nestedscrollview"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 9203228, "user_type": "registered", "profile_image": "https://graph.facebook.com/1845905155420972/picture?type=large", "display_name": "frankhardenberg", "link": "https://stackoverflow.com/users/9203228/frankhardenberg"}, "edited": false, "score": 0, "creation_date": 1574766389, "post_id": 59049108, "comment_id": 104339483, "body": "I&#39;ve tried your solution but this does not change anything for my app unfortunately. I have an imageview which is 225 dp on top and some stuff on top of that imageview. All that needs to stay in position even though I need to have swipe to refresh enabled, other than that I want only the recyclerview to scroll and collapse into the imageview on top, and of course vice versa when scrolling the opposite direction."}], "tags": [], "owner": {"reputation": 53, "user_id": 2580882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CWYer.jpg?s=128&g=1", "display_name": "Deep Sheth", "link": "https://stackoverflow.com/users/2580882/deep-sheth"}, "is_accepted": false, "score": 0, "last_activity_date": 1574765006, "creation_date": 1574765006, "answer_id": 59049108, "question_id": 59048815, "link": "https://stackoverflow.com/questions/59048815/disable-certain-part-of-fragment-for-scrolling-even-though-its-inside-a-nested/59049108#59049108", "title": "Disable certain part of fragment for scrolling even though it&#39;s inside a nested scrollview", "body": "<p>As per your question description, I am assuming that you face an issue that recycler view scroll or take focus automatically while you open screen and you need to stick layout at the top so pass this field on your parent layout.</p>\n\n<pre><code>android:descendantFocusability=\"blocksDescendants\"\n</code></pre>\n\n<p>or replace your SwipeRefreshLayout</p>\n\n<pre><code>&lt;androidx.swiperefreshlayout.widget.SwipeRefreshLayout\n    android:id=\"@+id/marktplaats_refresh\"\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:descendantFocusability=\"blocksDescendants\"\n    android:layout_height=\"match_parent\"&gt;\n</code></pre>\n\n<p>I hope it helps you.</p>\n"}], "owner": {"reputation": 35, "user_id": 9203228, "user_type": "registered", "profile_image": "https://graph.facebook.com/1845905155420972/picture?type=large", "display_name": "frankhardenberg", "link": "https://stackoverflow.com/users/9203228/frankhardenberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 153, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574765006, "creation_date": 1574764132, "question_id": 59048815, "link": "https://stackoverflow.com/questions/59048815/disable-certain-part-of-fragment-for-scrolling-even-though-its-inside-a-nested", "title": "Disable certain part of fragment for scrolling even though it&#39;s inside a nested scrollview", "body": "<p>Currently I am finishing the last details of my project and I am trying to keep a certain part inside a nested scrollview to stay on top of the screen and let only the recyclerview scroll.</p>\n\n<p>This is the code I have right now:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;androidx.swiperefreshlayout.widget.SwipeRefreshLayout\n    android:id=\"@+id/marktplaats_refresh\"\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"&gt;\n    &lt;androidx.core.widget.NestedScrollView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"&gt;\n        &lt;androidx.constraintlayout.widget.ConstraintLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"&gt;\n\n            &lt;ImageView\n                android:id=\"@+id/imageView14\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:adjustViewBounds=\"true\"\n                android:scaleType=\"centerCrop\"\n                android:tint=\"#9F000000\"\n                app:layout_constraintCircleRadius=\"10dp\"\n                app:layout_constraintEnd_toEndOf=\"parent\"\n                app:layout_constraintHorizontal_bias=\"1.0\"\n                app:layout_constraintStart_toStartOf=\"parent\"\n                app:layout_constraintTop_toTopOf=\"parent\"\n                app:srcCompat=\"@drawable/offer_bg\"/&gt;\n\n            &lt;Button\n                android:id=\"@+id/verkoopEenProduct\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_marginTop=\"10dp\"\n                android:layout_marginEnd=\"10dp\"\n                android:background=\"@null\"\n                android:text=\"Verkoop een product\"\n                android:textColor=\"@color/white\"\n                android:textSize=\"12sp\"\n                android:textStyle=\"bold\"\n                app:layout_constraintEnd_toEndOf=\"parent\"\n                app:layout_constraintTop_toTopOf=\"parent\"/&gt;\n\n            &lt;EditText\n                android:id=\"@+id/button5\"\n                android:layout_width=\"0dp\"\n                android:layout_height=\"50dp\"\n                android:layout_marginStart=\"10dp\"\n                android:layout_marginTop=\"10dp\"\n                android:layout_marginEnd=\"10dp\"\n                android:background=\"@drawable/light_contact_buttons\"\n                android:hint=\"Zoek in marktplaats\"\n                android:textAlignment=\"center\"\n                android:gravity=\"center_vertical\"\n                app:layout_constraintEnd_toEndOf=\"parent\"\n                app:layout_constraintStart_toStartOf=\"parent\"\n                app:layout_constraintTop_toBottomOf=\"@+id/textView33\"/&gt;\n\n            &lt;TextView\n                android:id=\"@+id/textView32\"\n                android:layout_width=\"0dp\"\n                android:layout_height=\"wrap_content\"\n                android:layout_marginStart=\"10dp\"\n                android:layout_marginEnd=\"10dp\"\n                android:text=\"Marktplaats\"\n                android:textColor=\"@color/white\"\n                android:textSize=\"18sp\"\n                android:textStyle=\"bold\"\n                app:layout_constraintEnd_toEndOf=\"parent\"\n                app:layout_constraintStart_toStartOf=\"parent\"\n                app:layout_constraintTop_toBottomOf=\"@+id/verkoopEenProduct\"/&gt;\n\n            &lt;TextView\n                android:id=\"@+id/textView33\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_marginStart=\"10dp\"\n                android:layout_marginTop=\"10dp\"\n                android:text=\"Hier vind u alles wat u nodig\\nhebt voor uw praktijk\"\n                android:textColor=\"@color/white\"\n                app:layout_constraintStart_toStartOf=\"parent\"\n                app:layout_constraintTop_toBottomOf=\"@+id/textView32\"/&gt;\n\n            &lt;TextView\n                android:id=\"@+id/textView34\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_marginStart=\"10dp\"\n                android:layout_marginTop=\"10dp\"\n                android:text=\"Alle producten\"\n                android:textSize=\"18sp\"\n                android:textStyle=\"bold\"\n                app:layout_constraintStart_toStartOf=\"parent\"\n                app:layout_constraintTop_toBottomOf=\"@+id/imageView14\"/&gt;\n\n            &lt;androidx.recyclerview.widget.RecyclerView\n                android:id=\"@+id/marktplaats_recyclerview\"\n                android:layout_width=\"0dp\"\n                android:layout_height=\"wrap_content\"\n                app:layout_constraintBottom_toBottomOf=\"parent\"\n                app:layout_constraintEnd_toEndOf=\"parent\"\n                app:layout_constraintStart_toStartOf=\"parent\"\n                app:layout_constraintTop_toBottomOf=\"@+id/textView34\"/&gt;\n\n            &lt;Button\n                android:id=\"@+id/button11\"\n                android:translationX=\"-20dp\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_marginTop=\"10dp\"\n                android:background=\"@null\"\n                android:rotation=\"180\"\n                android:text=\"&amp;#x279C;\"\n                android:textColor=\"@color/white\"\n                android:textSize=\"36sp\"\n                app:layout_constraintStart_toStartOf=\"parent\"\n                app:layout_constraintTop_toTopOf=\"parent\"/&gt;\n        &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n    &lt;/androidx.core.widget.NestedScrollView&gt;\n&lt;/androidx.swiperefreshlayout.widget.SwipeRefreshLayout&gt;\n</code></pre>\n\n<p>And this is my kotlin</p>\n\n<pre><code>\nclass MarktplaatsOverview : ApplicationFragment(){\n    var products: Array&lt;MarketModel&gt; = arrayOf()\n\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n        super.onCreateView(inflater, container, savedInstanceState)\n        return inflater.inflate(R.layout.fragment_marktplaats, container, false)\n    }\n\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n        super.onViewCreated(view, savedInstanceState)\n        marktplaats_refresh.setOnRefreshListener {\n            refreshData()\n            marktplaats_refresh.isRefreshing = false\n        }\n\n        button11.setOnClickListener {\n            navController.navigate(R.id.action_marktplaatsOverview_to_more)\n        }\n        button5.requestFocus()\n\n        refreshData()\n\n        verkoopEenProduct.setOnClickListener {\n            navController.navigate(R.id.action_marktplaatsOverview_to_marktplaatsDetail)\n        }\n    }\n\n    private fun refreshData() {\n        if (DataStorage.market.isNotEmpty()) {\n            setupRecyclerView()\n        } else {\n            SharedInstance.api.getAllMarketItems {\n                if (isAdded) {\n                    setupRecyclerView()\n                }\n            }\n        }\n    }\n\n    private fun setupRecyclerView(){\n        SharedInstance.api.getAllMarketItems {\n            products = DataStorage.market\n            val xLayoutManager = LinearLayoutManager(context, LinearLayoutManager.VERTICAL, true)\n            xLayoutManager.stackFromEnd = true\n            marktplaats_recyclerview.layoutManager = xLayoutManager\n            marktplaats_recyclerview.adapter = MarktplaatsAdapter(products)\n        }\n    }\n}\n</code></pre>\n\n<p>Does anyone have a solution for this awkward problem? I've been trying to do some restructuring of the swiperefreshlayout, scrollviews and constraints but no succes so far.\nI also can't find anything on the internet where someone wants the same as me...</p>\n"}, {"tags": ["android", "kotlin", "kotlin-multiplatform"], "comments": [{"owner": {"reputation": 1062, "user_id": 4028009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52d9e87ce304217b5b34a44059e5fd77?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeny  Bovykin", "link": "https://stackoverflow.com/users/4028009/evgeny-bovykin"}, "edited": false, "score": 0, "creation_date": 1574777976, "post_id": 59048357, "comment_id": 104345709, "body": "Obligatory did you try Invalidate Caches and Restart?"}, {"owner": {"reputation": 113, "user_id": 10776158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ee56413b442a527366a7670b5d8f8d7?s=128&d=identicon&r=PG&f=1", "display_name": "alvinWB", "link": "https://stackoverflow.com/users/10776158/alvinwb"}, "reply_to_user": {"reputation": 1062, "user_id": 4028009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52d9e87ce304217b5b34a44059e5fd77?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeny  Bovykin", "link": "https://stackoverflow.com/users/4028009/evgeny-bovykin"}, "edited": false, "score": 0, "creation_date": 1574822779, "post_id": 59048357, "comment_id": 104363665, "body": "@EvgenyBovykin yes sir, tried that already, and nothing different"}, {"owner": {"reputation": 312, "user_id": 4759333, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh5.googleusercontent.com/-8fBY5T1QkSY/AAAAAAAAAAI/AAAAAAAABrI/_RalM-wMIOU/photo.jpg?sz=128", "display_name": "James Fu", "link": "https://stackoverflow.com/users/4759333/james-fu"}, "edited": false, "score": 0, "creation_date": 1575625665, "post_id": 59048357, "comment_id": 104637928, "body": "I face the same issue......"}, {"owner": {"reputation": 2366, "user_id": 2170109, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/0a2e3620d390e78ddb513a68a7e8bada?s=128&d=identicon&r=PG", "display_name": "hardysim", "link": "https://stackoverflow.com/users/2170109/hardysim"}, "edited": false, "score": 1, "creation_date": 1582620867, "post_id": 59048357, "comment_id": 106830793, "body": "I filed a bug for Android Studio: <a href=\"https://issuetracker.google.com/issues/150157086\" rel=\"nofollow noreferrer\">issuetracker.google.com/issues/150157086</a>"}, {"owner": {"reputation": 2366, "user_id": 2170109, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/0a2e3620d390e78ddb513a68a7e8bada?s=128&d=identicon&r=PG", "display_name": "hardysim", "link": "https://stackoverflow.com/users/2170109/hardysim"}, "edited": false, "score": 1, "creation_date": 1583924476, "post_id": 59048357, "comment_id": 107273401, "body": "I also filed an issue at jetbrains: <a href=\"https://youtrack.jetbrains.com/issue/KT-25065\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-25065</a>"}], "answers": [{"comments": [{"owner": {"reputation": 281, "user_id": 1689222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/otDjm.jpg?s=128&g=1", "display_name": "Pecan", "link": "https://stackoverflow.com/users/1689222/pecan"}, "edited": false, "score": 0, "creation_date": 1580220651, "post_id": 59062969, "comment_id": 106020947, "body": "I tried even clean install on a new computer, but the issue remains (also in version 3.5.3)."}, {"owner": {"reputation": 312, "user_id": 4759333, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh5.googleusercontent.com/-8fBY5T1QkSY/AAAAAAAAAAI/AAAAAAAABrI/_RalM-wMIOU/photo.jpg?sz=128", "display_name": "James Fu", "link": "https://stackoverflow.com/users/4759333/james-fu"}, "edited": false, "score": 0, "creation_date": 1580982582, "post_id": 59062969, "comment_id": 106279801, "body": "I also face the same issue, and it display &quot;nothing here&quot; in my common test but work well in my android test. I need to run the test by writing the configuration by my self to run the code in common test. Otherwise, you can try to run all tests by command line."}, {"owner": {"reputation": 2366, "user_id": 2170109, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/0a2e3620d390e78ddb513a68a7e8bada?s=128&d=identicon&r=PG", "display_name": "hardysim", "link": "https://stackoverflow.com/users/2170109/hardysim"}, "edited": false, "score": 0, "creation_date": 1582619357, "post_id": 59062969, "comment_id": 106830093, "body": "This happens for me since 3.5.x up to 3.6 stable today. Tried clear, re-install, jetbrains toolbox and standalone downloads etc.. Nothing helps."}, {"owner": {"reputation": 2366, "user_id": 2170109, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/0a2e3620d390e78ddb513a68a7e8bada?s=128&d=identicon&r=PG", "display_name": "hardysim", "link": "https://stackoverflow.com/users/2170109/hardysim"}, "edited": false, "score": 0, "creation_date": 1582619929, "post_id": 59062969, "comment_id": 106830338, "body": "Using normal (newest) IntelliJ shows the options to run / debug on each test but clicking on it just shows &quot;No tasks available&quot;."}, {"owner": {"reputation": 2366, "user_id": 2170109, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/0a2e3620d390e78ddb513a68a7e8bada?s=128&d=identicon&r=PG", "display_name": "hardysim", "link": "https://stackoverflow.com/users/2170109/hardysim"}, "edited": false, "score": 0, "creation_date": 1582620345, "post_id": 59062969, "comment_id": 106830530, "body": "It works on a fresh project (from the &quot;new project&quot; wizard using &quot;Mobile Shared Library | Gradle&quot;) on IntelliJ 2019.3.3. But opening the same project in Android Studio 3.6 does not (&quot;Nothing here&quot;)."}], "tags": [], "owner": {"reputation": 113, "user_id": 10776158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ee56413b442a527366a7670b5d8f8d7?s=128&d=identicon&r=PG&f=1", "display_name": "alvinWB", "link": "https://stackoverflow.com/users/10776158/alvinwb"}, "is_accepted": false, "score": 0, "last_activity_date": 1574828530, "creation_date": 1574828530, "answer_id": 59062969, "question_id": 59048357, "link": "https://stackoverflow.com/questions/59048357/kotlin-multiplatform-project-unit-test-issue/59062969#59062969", "title": "Kotlin Multiplatform Project Unit Test Issue", "body": "<p>Clean install Android Studio fixed this issue. Never thought this problem will occurr. Updated Android Studio several times in the past, and this is my first such issue encounter.</p>\n"}, {"tags": [], "owner": {"reputation": 187, "user_id": 1038199, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Obla4.jpg?s=128&g=1", "display_name": "GuilhermeM", "link": "https://stackoverflow.com/users/1038199/guilhermem"}, "is_accepted": false, "score": 2, "last_activity_date": 1589107150, "last_edit_date": 1589107150, "creation_date": 1588068043, "answer_id": 61477531, "question_id": 59048357, "link": "https://stackoverflow.com/questions/59048357/kotlin-multiplatform-project-unit-test-issue/61477531#61477531", "title": "Kotlin Multiplatform Project Unit Test Issue", "body": "<p>In my case, this issues happened when I updated from</p>\n\n<ul>\n<li><code>Android Studio 3.5.3</code> and Kotlin plugin version <code>v1.3.50-release-Studio3.5-1</code> </li>\n</ul>\n\n<p>to </p>\n\n<ul>\n<li><code>Android Studio 3.6.3</code> with Kotlin plugin <code>1.3.71-release-Studio3.6-1</code></li>\n</ul>\n\n<p>All of my common Kotlin MPP tests were not running from the expected IDE side function \"green\" run and displayed the <strong>Nothing here</strong> message too.</p>\n\n<p>I tried a few things, one of them being a full uninstall and then install but nothing seemed to work.</p>\n\n<p>What ended up working for me was (with some caveats):</p>\n\n<ul>\n<li>created a new test (works with existing tests too, but just as an example)</li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/BIhHh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BIhHh.png\" alt=\"pic 1\"></a></p>\n\n<p>to make sure the <strong>Nothing Here</strong> shows.</p>\n\n<p>Then:</p>\n\n<ul>\n<li>open the dropdown next to the Emulator selected one and click <strong>Edit Configurations</strong></li>\n<li>under <strong>Android JUnit</strong> click the <strong>+</strong> button to add a new configuration</li>\n<li>it should look like this:</li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/rZZlp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rZZlp.png\" alt=\"pic2\"></a></p>\n\n<p>make sure the test kind is <strong>Class</strong> and that you have the correct path to the file. For example:</p>\n\n<p><code>com.my.path.is.correct.MyNewTestCase</code></p>\n\n<p>Also, make sure you have the correct module for the common Kotlin; in my case it was <strong>common</strong> (not commonTest).</p>\n\n<p>After the above you should be able to run the test class from the main <strong>Run</strong> button (again, next to the Emulator drop down list) and even run it as <strong>Debug</strong>.</p>\n\n<p>The \"green\" run button next to the function will still say <strong>Nothing here</strong> but adding a breakpoint and running the new configuration from the main <strong>Debug</strong> button does work for me:</p>\n\n<p><a href=\"https://i.stack.imgur.com/2eGQ0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2eGQ0.png\" alt=\"enter image description here\"></a></p>\n\n<p>This is obviously not perfect, but it was the only way to have it working from the IDE that I could find. </p>\n\n<p>Hope it helps!</p>\n"}], "owner": {"reputation": 113, "user_id": 10776158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ee56413b442a527366a7670b5d8f8d7?s=128&d=identicon&r=PG&f=1", "display_name": "alvinWB", "link": "https://stackoverflow.com/users/10776158/alvinwb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 766, "favorite_count": 3, "answer_count": 2, "score": 9, "last_activity_date": 1589107150, "creation_date": 1574762770, "question_id": 59048357, "link": "https://stackoverflow.com/questions/59048357/kotlin-multiplatform-project-unit-test-issue", "title": "Kotlin Multiplatform Project Unit Test Issue", "body": "<p>Today I just updated my Android Studio to</p>\n\n<pre><code>Android Studio 3.5.2\nBuild #AI-191.8026.42.35.5977832, built on October 31, 2019\nJRE: 1.8.0_202-release-1483-b49-5587405 x86_64\nJVM: OpenJDK 64-Bit Server VM by JetBrains s.r.o\nmacOS 10.15.1\n</code></pre>\n\n<p>I updated the Android Studio because it prompts error to me when the kotlin version is below 1.3.60. </p>\n\n<p>However I am facing problem with the unit test file. Previously I can run the unit test without any problem. Now, when I click the run button besides the function name (on the left), it shows Nothing Here. </p>\n\n<p><a href=\"https://i.stack.imgur.com/zB4L7.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/zB4L7.png\" alt=\"enter image description here\"></a></p>\n\n<p>Below is all my dependencies</p>\n\n<pre><code>// build.gradle\n\nbuildscript {\next.kotlin_version = '1.3.60'\nrepositories {\n    google()\n    jcenter()\n    maven { url \"https://kotlin.bintray.com/kotlinx\" }\n}\n\ndependencies {\n    // classpath 'com.android.tools.build:gradle:3.4.1'\n    classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n    classpath \"org.jetbrains.kotlin:kotlin-serialization:$kotlin_version\"\n}\n}\n\nallprojects {\n  repositories {\n    google()\n    jcenter()\n  }\n}\n\ntask clean(type: Delete) {\n   delete rootProject.buildDir\n}\n\n\n apply plugin: 'kotlin-multiplatform'\n apply plugin: 'kotlinx-serialization'\n\nkotlin {\ntargets {\n    final def iOSTarget = presets.iosX64 // Simulator\n\n    fromPreset(iOSTarget, 'iOS') {\n        binaries {\n            framework('SharedCode')\n        }\n    }\n    fromPreset(presets.jvm, 'android')\n}\n\nsourceSets {\n    commonMain {\n        dependencies {\n            api 'org.jetbrains.kotlin:kotlin-stdlib-common'\n            implementation \"org.jetbrains.kotlin:kotlin-test-common:$kotlin_version\"\n            implementation \"org.jetbrains.kotlin:kotlin-test-annotations-common:$kotlin_version\"\n            implementation \"org.jetbrains.kotlin:kotlin-test-junit:$kotlin_version\"\n            implementation \"org.jetbrains.kotlin:kotlin-test:$kotlin_version\"\n        }\n    }\n\n    iOSMain {\n        dependsOn commonMain\n    }\n\n    androidMain.dependencies {\n        api 'org.jetbrains.kotlin:kotlin-stdlib'\n    }\n\n    commonTest {\n        dependsOn commonMain\n    }\n}\n}\n</code></pre>\n\n<p>Is there something that I missed out in this new Android Studio and kotlin version. I have been struggling with this for hours. Browsed web but seems couldn't find any help.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["android", "kotlin", "sharedpreferences"], "comments": [{"owner": {"reputation": 460, "user_id": 7742227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/008d753379c57a2835e987c9cf9685f3?s=128&d=identicon&r=PG&f=1", "display_name": "Oskarzito", "link": "https://stackoverflow.com/users/7742227/oskarzito"}, "edited": false, "score": 0, "creation_date": 1574763187, "post_id": 59048350, "comment_id": 104337633, "body": "Take a look here: <a href=\"https://stackoverflow.com/questions/56662832/unresolved-reference-getpreferences\" title=\"unresolved reference getpreferences\">stackoverflow.com/questions/56662832/&hellip;</a>  To summarize: &quot;getPreferences() is method of activity and you need to have Activity&#39;s instance to call it&quot;."}, {"owner": {"reputation": 761, "user_id": 11818952, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q0j58.png?s=128&g=1", "display_name": "SowingFiber", "link": "https://stackoverflow.com/users/11818952/sowingfiber"}, "reply_to_user": {"reputation": 460, "user_id": 7742227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/008d753379c57a2835e987c9cf9685f3?s=128&d=identicon&r=PG&f=1", "display_name": "Oskarzito", "link": "https://stackoverflow.com/users/7742227/oskarzito"}, "edited": false, "score": 0, "creation_date": 1574764195, "post_id": 59048350, "comment_id": 104338236, "body": "@Oskarzito no. it doesn&#39;t. Did you just flag to close it?"}, {"owner": {"reputation": 460, "user_id": 7742227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/008d753379c57a2835e987c9cf9685f3?s=128&d=identicon&r=PG&f=1", "display_name": "Oskarzito", "link": "https://stackoverflow.com/users/7742227/oskarzito"}, "edited": false, "score": 0, "creation_date": 1574764869, "post_id": 59048350, "comment_id": 104338617, "body": "no? Did I? Sorry if so, just checked for duplicate, wasn&#39;t meant to flag :)"}, {"owner": {"reputation": 761, "user_id": 11818952, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q0j58.png?s=128&g=1", "display_name": "SowingFiber", "link": "https://stackoverflow.com/users/11818952/sowingfiber"}, "reply_to_user": {"reputation": 460, "user_id": 7742227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/008d753379c57a2835e987c9cf9685f3?s=128&d=identicon&r=PG&f=1", "display_name": "Oskarzito", "link": "https://stackoverflow.com/users/7742227/oskarzito"}, "edited": false, "score": 0, "creation_date": 1574765054, "post_id": 59048350, "comment_id": 104338708, "body": "@Oskarzito ok, that&#39;s not an issue. However, I&#39;ve already accepted an appropriate answer."}], "answers": [{"tags": [], "owner": {"reputation": 53, "user_id": 2580882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CWYer.jpg?s=128&g=1", "display_name": "Deep Sheth", "link": "https://stackoverflow.com/users/2580882/deep-sheth"}, "is_accepted": false, "score": 2, "last_activity_date": 1574764544, "last_edit_date": 1574764544, "creation_date": 1574763802, "answer_id": 59048704, "question_id": 59048350, "link": "https://stackoverflow.com/questions/59048350/get-reference-to-getsharedpreferences-outside-fragment-or-activity/59048704#59048704", "title": "Get reference to getSharedPreferences outside fragment or activity", "body": "<p>You have to pass context as a constructor argument\nPlease change your class with the following code.\nI hope it helps you</p>\n\n<pre><code>abstract class Inspector(val context: Context){\n    private var PRIVATE_MODE = 0\n    private var firstRun : String = \"first_run\"\n\n    //Function returns if the app was run for the first time or not\n    fun firstRun(): Boolean{\n        return checkPref(firstRun)\n    }\n\n    private fun checkPref(PREF_NAME : String): Boolean {\n        val sharedPref: SharedPreferences = context.getSharedPreferences(PREF_NAME, PRIVATE_MODE)\n        return sharedPref.getBoolean(PREF_NAME, false)\n    }\n}\n</code></pre>\n\n<p>Pass activity or fragment object in constructor argument when you create class object.</p>\n"}, {"tags": [], "owner": {"reputation": 5397, "user_id": 6275174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2VQA5.jpg?s=128&g=1", "display_name": "Nicola Gallazzi", "link": "https://stackoverflow.com/users/6275174/nicola-gallazzi"}, "is_accepted": true, "score": 1, "last_activity_date": 1574763804, "creation_date": 1574763804, "answer_id": 59048706, "question_id": 59048350, "link": "https://stackoverflow.com/questions/59048350/get-reference-to-getsharedpreferences-outside-fragment-or-activity/59048706#59048706", "title": "Get reference to getSharedPreferences outside fragment or activity", "body": "<p><code>getSharedPreferences</code> method needs an associated context as you can see from <a href=\"https://developer.android.com/reference/android/content/SharedPreferences\" rel=\"nofollow noreferrer\">documentation page</a>. In your abstract class you haven't any context (whereas you have a context in an Activity or Fragment).\nSince you are writing a concrete method into an abstract class you need to pass the <strong>context</strong> in the class constructor, in order to get access to sharedPreferences: </p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>abstract class Inspector(private val context : Context){\n    private var PRIVATE_MODE = 0\n    private var firstRun : String = \"first_run\"\n\n    //Function returns if the app was run for the first time or not\n    fun firstRun(): Boolean{\n        return checkPref(firstRun)\n    }\n\n    private fun checkPref(PREF_NAME : String): Boolean {\n        val sharedPref: SharedPreferences = context.getSharedPreferences(PREF_NAME, PRIVATE_MODE)\n        return sharedPref.getBoolean(PREF_NAME, false)\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 761, "user_id": 11818952, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q0j58.png?s=128&g=1", "display_name": "SowingFiber", "link": "https://stackoverflow.com/users/11818952/sowingfiber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 313, "favorite_count": 0, "accepted_answer_id": 59048706, "answer_count": 2, "score": 3, "last_activity_date": 1587901012, "creation_date": 1574762750, "last_edit_date": 1587901012, "question_id": 59048350, "link": "https://stackoverflow.com/questions/59048350/get-reference-to-getsharedpreferences-outside-fragment-or-activity", "title": "Get reference to getSharedPreferences outside fragment or activity", "body": "<blockquote>\n  <p>Thanks for stopping by! Not a duplicate of <a href=\"https://stackoverflow.com/questions/56662832/unresolved-reference-getpreferences\">Unresolved reference: getPreferences</a> as they had an issue with fragment and I had issues with abstract classes</p>\n</blockquote>\n\n<p>I am creating an <code>abstract</code> class named Inspector.\nThis class will mostly be for inspecting low-level stuff like if the app was run for the first time or is the internet working, etc.</p>\n\n<p>Here is my first implementation of checking the first run: </p>\n\n<pre><code>\nimport android.content.SharedPreferences\n\nabstract class Inspector{\n    private var PRIVATE_MODE = 0\n    private var firstRun : String = \"first_run\"\n\n    //Function returns if the app was run for the first time or not\n    fun firstRun(): Boolean{\n        return checkPref(firstRun)\n    }\n\n    private fun checkPref(PREF_NAME : String): Boolean {\n        val sharedPref: SharedPreferences = getSharedPreferences(PREF_NAME, PRIVATE_MODE)\n        return sharedPref.getBoolean(PREF_NAME, false)\n    }\n}\n\n</code></pre>\n\n<p>That's all I have in my <code>Inspector.kt</code> file. However I've been stuck at this issue: </p>\n\n<p><code>Unresolved reference: getSharedPreferences</code></p>\n\n<p>I have created this in a class that doesn't do anything yet. </p>\n\n<ul>\n<li>What could be the cause of this error?</li>\n<li>How do I fix it? </li>\n<li>Is it because my class doesn't extend <code>AppCompatActivity</code>?</li>\n</ul>\n"}, {"tags": ["android", "kotlin", "pinchzoom", "gesturedetector"], "owner": {"reputation": 2090, "user_id": 4970126, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/673e18f1dee3a6671ae10f07f6cc1c53?s=128&d=identicon&r=PG&f=1", "display_name": "BVtp", "link": "https://stackoverflow.com/users/4970126/bvtp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 159, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1574764231, "creation_date": 1574762499, "question_id": 59048263, "link": "https://stackoverflow.com/questions/59048263/pinch-to-zoom-layout-with-vector-images", "title": "pinch to zoom layout with Vector images", "body": "<p>I have a layout which holds a FrameLayout, which in turn has a varying amount of ImageViews on top of it. (Only one is visible at any given time, and the user can flip/switch between them)\nAll of the ImageViews are Vector drawables.</p>\n\n<p>When I try to implement the Pinch-to-zoom functionality, I encounter various problems.</p>\n\n<p>With <strong>Solution 1 :</strong></p>\n\n<pre><code>override fun onScale(detector: ScaleGestureDetector): Boolean {\n     scaleFactor *= detector.scaleFactor\n     scaleFactor = ((scaleFactor * 100)).toInt().toFloat() / 100\n     scaleFactor = max(MIN_SCALE_FACTOR, min(scaleFactor, MAX_SCALE_FACTOR))\n\n     frameView.scaleX = scaleFactor\n     frameView.scaleY = scaleFactor\n     frameView.pivotX = e.x\n     frameView.pivotY = e.y\n}\n</code></pre>\n\n<p>Basically, I use the same logic for Double-tap zoom, and it works fine there(I'm also applying some animation to smoothen it).</p>\n\n<p>However, with pinch-to-zoom, the image suffers from stuttering, especially when I keep holding two fingers on the screen, you can see how it constantly jumps around.</p>\n\n<p>I tried <strong>Solution 2 :</strong></p>\n\n<p>which is using this OnPinchListener : <a href=\"https://www.dev2qa.com/android-pinch-zoom-layout-example/\" rel=\"nofollow noreferrer\">https://www.dev2qa.com/android-pinch-zoom-layout-example/</a></p>\n\n<p>But : </p>\n\n<p><strong>1</strong>. The example there works with a simple ImageView (NOT vector).\n    When I try it with a vector drawable, the image distorts and becomes pixeled and ugly.</p>\n\n<p><strong>2</strong>. In my case, I need to apply the scaling(zoom) to the \n    frameView (FrameLayout holding the images), so using the \"setImageBitmap\" approach \n    is irrelevant here.</p>\n\n<p>So basically it seems this solution cannot be used in my case. </p>\n\n<p>Are there any other ways (or something that I missed in my first solution perhaps) that could make the pinch to zoom work smoothly?</p>\n"}, {"tags": ["java", "android", "kotlin", "assets", "tensorflow-lite"], "answers": [{"comments": [{"owner": {"reputation": 237, "user_id": 11592881, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0USBp_9unH0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdtENQ-cak2t0Kgn-iEY3-TOyRdmw/mo/photo.jpg?sz=128", "display_name": "R.Coder", "link": "https://stackoverflow.com/users/11592881/r-coder"}, "edited": false, "score": 0, "creation_date": 1575275334, "post_id": 59134792, "comment_id": 104497526, "body": "It worked!! I can now use face net model from external storage but still i&#39;m looking for a solution to reduce the size of model hence i&#39;ll mark your answer as correct if no answer is observed for that."}], "tags": [], "owner": {"reputation": 1340, "user_id": 10888893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tqDlu.jpg?s=128&g=1", "display_name": "Mr. Patel", "link": "https://stackoverflow.com/users/10888893/mr-patel"}, "is_accepted": true, "score": 2, "last_activity_date": 1575274055, "creation_date": 1575274055, "answer_id": 59134792, "question_id": 59048118, "link": "https://stackoverflow.com/questions/59048118/how-to-reduce-size-of-tflite-model-or-download-and-set-it-programmatically/59134792#59134792", "title": "How to Reduce size of Tflite model or Download and set it programmatically?", "body": "<p>Well i can't think of any solution for reducing the size of your model file but by observing your class i can say that after all it's returning a mapped byte buffer from your file input stream so to get file from storage simply put your file in facenet folder in external storage and then get mapped bytebuffer on your file input stream here is a solution in kotlin.</p>\n\n<pre><code>class FaceNetStorage @Throws(IOException::class)\nconstructor() {\n    private val intValues = IntArray(IMAGE_HEIGHT * IMAGE_WIDTH)\n    private var imgData: ByteBuffer? = null\n\n    private var tfliteModel: MappedByteBuffer? = null\n    private var tflite: Interpreter? = null\n    private val tfliteOptions = Interpreter.Options()\n\n    init {\n        val str = Environment.getExternalStorageDirectory().toString()+\"/Facenet\"\n        val sd_main = File(str)\n        var success = true\n        if (!sd_main.exists()) {\n            success = sd_main.mkdir()\n        }\n        if (success) {\n            val sd = File(str+\"/\"+MODEL_PATH)\n            tfliteModel = loadModelFile(sd)\n            tflite = Interpreter(tfliteModel!!, tfliteOptions)\n            imgData = ByteBuffer.allocateDirect(\n                    BATCH_SIZE\n                            * IMAGE_HEIGHT\n                            * IMAGE_WIDTH\n                            * NUM_CHANNELS\n                            * NUM_BYTES_PER_CHANNEL)\n            imgData!!.order(ByteOrder.nativeOrder())\n        }\n    }\n\n    @Throws(IOException::class)\n    private fun loadModelFile(file: File): MappedByteBuffer {\n        val inputStream = FileInputStream(file)\n        val fileChannel = inputStream.channel\n        return fileChannel.map(FileChannel.MapMode.READ_ONLY, 0, fileChannel.size())\n    }\n\n    private fun convertBitmapToByteBuffer(bitmap: Bitmap) {\n        if (imgData == null) {\n            return\n        }\n        imgData!!.rewind()\n        bitmap.getPixels(intValues, 0, bitmap.width, 0, 0, bitmap.width, bitmap.height)\n        // Convert the image to floating point.\n        var pixel = 0\n        for (i in 0 until IMAGE_HEIGHT) {\n            for (j in 0 until IMAGE_WIDTH) {\n                val `val` = intValues[pixel++]\n                addPixelValue(`val`)\n            }\n        }\n    }\n\n    private fun addPixelValue(pixelValue: Int) {\n        imgData!!.putFloat((pixelValue shr 16 and 0xFF) / 255.0f)\n        imgData!!.putFloat((pixelValue shr 8 and 0xFF) / 255.0f)\n        imgData!!.putFloat((pixelValue and 0xFF) / 255.0f)\n    }\n\n    fun inspectModel() {\n        val tag = \"Model Inspection\"\n        Log.i(tag, \"Number of input tensors: \" + tflite!!.inputTensorCount.toString())\n        Log.i(tag, \"Number of output tensors: \" + tflite!!.outputTensorCount.toString())\n\n        Log.i(tag, tflite!!.getInputTensor(0).toString())\n        Log.i(tag, \"Input tensor data type: \" + tflite!!.getInputTensor(0).dataType())\n        Log.i(tag, \"Input tensor shape: \" + Arrays.toString(tflite!!.getInputTensor(0).shape()))\n        Log.i(tag, \"Output tensor 0 shape: \" + Arrays.toString(tflite!!.getOutputTensor(0).shape()))\n    }\n\n    private fun resizedBitmap(bitmap: Bitmap, height: Int, width: Int): Bitmap {\n        return Bitmap.createScaledBitmap(bitmap, width, height, true)\n    }\n\n    private fun croppedBitmap(bitmap: Bitmap, upperCornerX: Int, upperCornerY: Int, height: Int, width: Int): Bitmap {\n        return Bitmap.createBitmap(bitmap, upperCornerX, upperCornerY, width, height)\n    }\n\n    private fun run(bitmap: Bitmap): Array&lt;FloatArray&gt; {\n        var bitmap = bitmap\n        bitmap = resizedBitmap(bitmap, IMAGE_HEIGHT, IMAGE_WIDTH)\n        convertBitmapToByteBuffer(bitmap)\n\n        val embeddings = Array(1) { FloatArray(512) }\n        tflite!!.run(imgData, embeddings)\n\n        return embeddings\n    }\n\n    fun getSimilarityScore(face1: Bitmap, face2: Bitmap): Double {\n        val face1_embedding = run(face1)\n        val face2_embedding = run(face2)\n\n        var distance = 0.0\n        for (i in 0 until EMBEDDING_SIZE) {\n            distance += ((face1_embedding[0][i] - face2_embedding[0][i]) * (face1_embedding[0][i] - face2_embedding[0][i])).toDouble()\n        }\n        distance = Math.sqrt(distance)\n\n        return distance\n    }\n\n    fun close() {\n        if (tflite != null) {\n            tflite!!.close()\n            tflite = null\n        }\n        tfliteModel = null\n    }\n\n    companion object {\n        private val MODEL_PATH = \"facenet.tflite\"\n\n        private val IMAGE_MEAN = 127.5f\n        private val IMAGE_STD = 127.5f\n\n        private val BATCH_SIZE = 1\n        private val IMAGE_HEIGHT = 160\n        private val IMAGE_WIDTH = 160\n        private val NUM_CHANNELS = 3\n        private val NUM_BYTES_PER_CHANNEL = 4\n        private val EMBEDDING_SIZE = 512\n    }\n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 237, "user_id": 11592881, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0USBp_9unH0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdtENQ-cak2t0Kgn-iEY3-TOyRdmw/mo/photo.jpg?sz=128", "display_name": "R.Coder", "link": "https://stackoverflow.com/users/11592881/r-coder"}, "edited": false, "score": 0, "creation_date": 1580270605, "post_id": 59937080, "comment_id": 106038655, "body": "well i really don&#39;t know how to do that can give me link to any guides?"}, {"owner": {"reputation": 41, "user_id": 10788599, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jPlvyB6vXns/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hKfp4kRmb5q07sFy7h0ZjMX_8HBg/mo/photo.jpg?sz=128", "display_name": "William Sim", "link": "https://stackoverflow.com/users/10788599/william-sim"}, "reply_to_user": {"reputation": 237, "user_id": 11592881, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0USBp_9unH0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdtENQ-cak2t0Kgn-iEY3-TOyRdmw/mo/photo.jpg?sz=128", "display_name": "R.Coder", "link": "https://stackoverflow.com/users/11592881/r-coder"}, "edited": false, "score": 0, "creation_date": 1580329729, "post_id": 59937080, "comment_id": 106066112, "body": "edited my response to provide a bit of help with quantization"}], "tags": [], "owner": {"reputation": 41, "user_id": 10788599, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jPlvyB6vXns/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hKfp4kRmb5q07sFy7h0ZjMX_8HBg/mo/photo.jpg?sz=128", "display_name": "William Sim", "link": "https://stackoverflow.com/users/10788599/william-sim"}, "is_accepted": false, "score": 0, "last_activity_date": 1580329706, "last_edit_date": 1580329706, "creation_date": 1580150742, "answer_id": 59937080, "question_id": 59048118, "link": "https://stackoverflow.com/questions/59048118/how-to-reduce-size-of-tflite-model-or-download-and-set-it-programmatically/59937080#59937080", "title": "How to Reduce size of Tflite model or Download and set it programmatically?", "body": "<p>I'd recommend quantizing your model. This would reduce the file size by about 1/4. You can try just weight quantization, or full quantization.</p>\n\n<p>Using the Python API, for only weight quantization:</p>\n\n<pre><code>import tensorflow as tf\nconverter = tf.lite.TFLiteConverter.from_saved_model(saved_model_dir)\nconverter.optimizations = [tf.lite.Optimize.OPTIMIZE_FOR_SIZE]\ntflite_quant_model = converter.convert()\n</code></pre>\n\n<p>For full quantization, I'd recommend using a representative dataset to reduce the accuracy loss associated with quantization.</p>\n\n<pre><code>import tensorflow as tf\n\ndef representative_dataset_gen():\n  for _ in range(num_calibration_steps):\n  # Get sample input data as a numpy array in a method of your choosing.\n  yield [input]\n\nconverter = tf.lite.TFLiteConverter.from_saved_model(saved_model_dir)\nconverter.optimizations = [tf.lite.Optimize.DEFAULT]\nconverter.representative_dataset = representative_dataset_gen\ntflite_quant_model = converter.convert()\n</code></pre>\n\n<p>You can also try mobilenet architectures. Quantized versions of these can be anywhere from &lt;1MB to ~5MB. You can easily find some Tensorflow implentations of mobilefacenets with a quick google search, but here's a link to the paper that started it:\n<a href=\"https://arxiv.org/abs/1804.07573\" rel=\"nofollow noreferrer\">https://arxiv.org/abs/1804.07573</a></p>\n"}], "owner": {"reputation": 237, "user_id": 11592881, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0USBp_9unH0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdtENQ-cak2t0Kgn-iEY3-TOyRdmw/mo/photo.jpg?sz=128", "display_name": "R.Coder", "link": "https://stackoverflow.com/users/11592881/r-coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 944, "favorite_count": 1, "accepted_answer_id": 59134792, "answer_count": 2, "score": 6, "last_activity_date": 1580329706, "creation_date": 1574762001, "last_edit_date": 1575268926, "question_id": 59048118, "link": "https://stackoverflow.com/questions/59048118/how-to-reduce-size-of-tflite-model-or-download-and-set-it-programmatically", "title": "How to Reduce size of Tflite model or Download and set it programmatically?", "body": "<p>Okay so in my app i am trying to implement face recognition using face net model which is converted to tflite averaging at about 93 MB approximately,\nhowever this model eventually increases size of my apk.\nso i am trying to find alternate ways to deal with this</p>\n\n<p>Firstly i can think of is to compress it in some way and then uncompress when app is installed</p>\n\n<p>Another way is that i should upload that model to server and after being downloaded get it loaded in my application.\nHowever i do not seem know how to implement this:</p>\n\n<p>By default face net allows implementation from assets folder</p>\n\n<pre><code> var facenet = FaceNet(getAssets());\n</code></pre>\n\n<p>But in case i'm downloading that model how can i get it loaded in my application?</p>\n\n<p>Here is my face net intilization code:</p>\n\n<pre><code>  public FaceNet(AssetManager assetManager) throws IOException {\n        tfliteModel = loadModelFile(assetManager);\n        tflite = new Interpreter(tfliteModel, tfliteOptions);\n        imgData = ByteBuffer.allocateDirect(\n                BATCH_SIZE\n                        * IMAGE_HEIGHT\n                        * IMAGE_WIDTH\n                        * NUM_CHANNELS\n                        * NUM_BYTES_PER_CHANNEL);\n        imgData.order(ByteOrder.nativeOrder());\n    }   \n\n\nprivate MappedByteBuffer loadModelFile(AssetManager assetManager) throws IOException {\n            AssetFileDescriptor fileDescriptor = assetManager.openFd(MODEL_PATH);\n            FileInputStream inputStream = new FileInputStream(fileDescriptor.getFileDescriptor());\n            FileChannel fileChannel = inputStream.getChannel();\n            long startOffset = fileDescriptor.getStartOffset();\n            long declaredLength = fileDescriptor.getDeclaredLength();\n            return fileChannel.map(FileChannel.MapMode.READ_ONLY, startOffset, declaredLength);\n        }\n</code></pre>\n\n<p>My FaceNet Class:</p>\n\n<pre><code>public class FaceNet {\n    private static final String MODEL_PATH = \"facenet.tflite\";\n\n    private static final float IMAGE_MEAN = 127.5f;\n    private static final float IMAGE_STD = 127.5f;\n\n    private static final int BATCH_SIZE = 1;\n    private static final int IMAGE_HEIGHT = 160;\n    private static final int IMAGE_WIDTH = 160;\n    private static final int NUM_CHANNELS = 3;\n    private static final int NUM_BYTES_PER_CHANNEL = 4;\n    private static final int EMBEDDING_SIZE = 512;\n\n    private final int[] intValues = new int[IMAGE_HEIGHT * IMAGE_WIDTH];\n    private ByteBuffer imgData;\n\n    private MappedByteBuffer tfliteModel;\n    private Interpreter tflite;\n    private final Interpreter.Options tfliteOptions = new Interpreter.Options();\n\n    public FaceNet(AssetManager assetManager) throws IOException {\n        tfliteModel = loadModelFile(assetManager);\n        tflite = new Interpreter(tfliteModel, tfliteOptions);\n        imgData = ByteBuffer.allocateDirect(\n                BATCH_SIZE\n                        * IMAGE_HEIGHT\n                        * IMAGE_WIDTH\n                        * NUM_CHANNELS\n                        * NUM_BYTES_PER_CHANNEL);\n        imgData.order(ByteOrder.nativeOrder());\n    }\n\n    private MappedByteBuffer loadModelFile(AssetManager assetManager) throws IOException {\n        AssetFileDescriptor fileDescriptor = assetManager.openFd(MODEL_PATH);\n        FileInputStream inputStream = new FileInputStream(fileDescriptor.getFileDescriptor());\n        FileChannel fileChannel = inputStream.getChannel();\n        long startOffset = fileDescriptor.getStartOffset();\n        long declaredLength = fileDescriptor.getDeclaredLength();\n        return fileChannel.map(FileChannel.MapMode.READ_ONLY, startOffset, declaredLength);\n    }\n\n    private void convertBitmapToByteBuffer(Bitmap bitmap) {\n        if (imgData == null) {\n            return;\n        }\n        imgData.rewind();\n        bitmap.getPixels(intValues, 0, bitmap.getWidth(), 0, 0, bitmap.getWidth(), bitmap.getHeight());\n        // Convert the image to floating point.\n        int pixel = 0;\n        for (int i = 0; i &lt; IMAGE_HEIGHT; ++i) {\n            for (int j = 0; j &lt; IMAGE_WIDTH; ++j) {\n                final int val = intValues[pixel++];\n                addPixelValue(val);\n            }\n        }\n    }\n\n    private void addPixelValue(int pixelValue){\n        //imgData.putFloat((((pixelValue &gt;&gt; 16) &amp; 0xFF) - IMAGE_MEAN) / IMAGE_STD);\n        //imgData.putFloat((((pixelValue &gt;&gt; 8) &amp; 0xFF) - IMAGE_MEAN) / IMAGE_STD);\n        //imgData.putFloat(((pixelValue &amp; 0xFF) - IMAGE_MEAN) / IMAGE_STD);\n        imgData.putFloat(((pixelValue &gt;&gt; 16) &amp; 0xFF) / 255.0f);\n        imgData.putFloat(((pixelValue &gt;&gt; 8) &amp; 0xFF) / 255.0f);\n        imgData.putFloat((pixelValue &amp; 0xFF) / 255.0f);\n    }\n\n    public void inspectModel(){\n        String tag = \"Model Inspection\";\n        Log.i(tag, \"Number of input tensors: \" + String.valueOf(tflite.getInputTensorCount()));\n        Log.i(tag, \"Number of output tensors: \" + String.valueOf(tflite.getOutputTensorCount()));\n\n        Log.i(tag, tflite.getInputTensor(0).toString());\n        Log.i(tag, \"Input tensor data type: \" + tflite.getInputTensor(0).dataType());\n        Log.i(tag, \"Input tensor shape: \" + Arrays.toString(tflite.getInputTensor(0).shape()));\n        Log.i(tag, \"Output tensor 0 shape: \" + Arrays.toString(tflite.getOutputTensor(0).shape()));\n    }\n\n    private Bitmap resizedBitmap(Bitmap bitmap, int height, int width){\n        return Bitmap.createScaledBitmap(bitmap, width, height, true);\n    }\n\n    private Bitmap croppedBitmap(Bitmap bitmap, int upperCornerX, int upperCornerY, int height, int width){\n        return Bitmap.createBitmap(bitmap, upperCornerX, upperCornerY, width, height);\n    }\n\n    private float[][] run(Bitmap bitmap){\n        bitmap = resizedBitmap(bitmap, IMAGE_HEIGHT, IMAGE_WIDTH);\n        convertBitmapToByteBuffer(bitmap);\n\n        float[][] embeddings = new float[1][512];\n        tflite.run(imgData, embeddings);\n\n        return embeddings;\n    }\n\n    public double getSimilarityScore(Bitmap face1, Bitmap face2){\n        float[][] face1_embedding = run(face1);\n        float[][] face2_embedding = run(face2);\n\n        double distance = 0.0;\n        for (int i = 0; i &lt; EMBEDDING_SIZE; i++){\n            distance += (face1_embedding[0][i] - face2_embedding[0][i]) * (face1_embedding[0][i] - face2_embedding[0][i]);\n        }\n        distance = Math.sqrt(distance);\n\n        return distance;\n    }\n\n    public void close(){\n        if (tflite != null) {\n            tflite.close();\n            tflite = null;\n        }\n        tfliteModel = null;\n    }\n\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 239, "user_id": 12228267, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jy6Eo.jpg?s=128&g=1", "display_name": "Peter Alwin", "link": "https://stackoverflow.com/users/12228267/peter-alwin"}, "edited": false, "score": 0, "creation_date": 1574761023, "post_id": 59047695, "comment_id": 104336327, "body": "use @Part List&lt;MultipartBody.Part&gt; file"}, {"owner": {"reputation": 39, "user_id": 8283521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b956e4d0b2140bfb7404fd9f1d4a2a18?s=128&d=identicon&r=PG&f=1", "display_name": "Tribhuwan ", "link": "https://stackoverflow.com/users/8283521/tribhuwan"}, "reply_to_user": {"reputation": 239, "user_id": 12228267, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jy6Eo.jpg?s=128&g=1", "display_name": "Peter Alwin", "link": "https://stackoverflow.com/users/12228267/peter-alwin"}, "edited": false, "score": 0, "creation_date": 1574764054, "post_id": 59047695, "comment_id": 104338138, "body": "I am sending a single document. That does not work."}, {"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1574785310, "post_id": 59047695, "comment_id": 104350159, "body": "where do you define/initialise <code>image</code>? Where do you call <code>create</code> and which arguments are you passing?"}, {"owner": {"reputation": 39, "user_id": 8283521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b956e4d0b2140bfb7404fd9f1d4a2a18?s=128&d=identicon&r=PG&f=1", "display_name": "Tribhuwan ", "link": "https://stackoverflow.com/users/8283521/tribhuwan"}, "edited": false, "score": 0, "creation_date": 1574845010, "post_id": 59047695, "comment_id": 104371257, "body": "I found my problem and its solution. The problem was on this line :                     val document = MultipartBody.Part.createFormData(&quot;image&quot;, it.name, documentBody)                                                                                                                     I should have used &quot;document&quot; instead of &quot;image&quot;. That&#39;s working as a key. Now it is working fine."}], "owner": {"reputation": 39, "user_id": 8283521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b956e4d0b2140bfb7404fd9f1d4a2a18?s=128&d=identicon&r=PG&f=1", "display_name": "Tribhuwan ", "link": "https://stackoverflow.com/users/8283521/tribhuwan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1574767107, "creation_date": 1574760595, "last_edit_date": 1574767107, "question_id": 59047695, "link": "https://stackoverflow.com/questions/59047695/document-multipartbody-part-value-is-not-being-sent-to-the-server", "title": "document: MultipartBody.Part? Value is not being sent to the server", "body": "<p>I have created the document but the value of document does not reach the server.\nAll others have values, only the value of document is missing.\nThe same API is called from web and it works fine.</p>\n\n<pre><code>private fun createAssignment() {\n    val subject = subjectSpinner.selectedItem?.let { s -&gt; s as SubjectModel }\n    val teacherId: Long = viewModel.user?.id!!\n    val sectionBody = RequestBody.create(MediaType.get(\"text/plain\"), section.id.toString())\n    val subjectBody = RequestBody.create(MediaType.get(\"text/plain\"), subject?.id.toString())\n    val titleBody =\n        RequestBody.create(MediaType.parse(\"text/plain\"), titleEditText.text?.trim().toString())\n    val descriptionBody =\n        RequestBody.create(\n            MediaType.parse(\"text/plain\"),\n            descriptionEditText.text?.trim().toString()\n        )\n    val startDateBody = RequestBody.create(MediaType.get(\"text/plain\"), assignmentDate)\n    val endDateBody = RequestBody.create(MediaType.get(\"text/plain\"), submissionDate)\n    val teacherBody = RequestBody.create(MediaType.get(\"text/plain\"), teacherId.toString())\n    val statusBody = RequestBody.create(MediaType.get(\"text/plain\"), \"0\")\n\n\n    loadingProgressBar.visibility = View.VISIBLE\n    createButton.visibility = View.INVISIBLE\n\n    val role = viewModel.role?.slug\n\n    if (image != null) {\n        image?.let {\n            val file = File(it.path)\n            val url = file.absolutePath\n            val fileNameMap = URLConnection.getFileNameMap()\n            val mimeType = fileNameMap.getContentTypeFor(\"file://$url\")\n            val documentBody = RequestBody.create(MediaType.parse(mimeType), file)\n            val document = MultipartBody.Part.createFormData(\"image\", it.name, documentBody)\n</code></pre>\n\n<p>and service </p>\n\n<pre><code>@Multipart\n@POST(\"/api/assignment\")\nfun create(\n    @Header(\"role\") role: String,\n    @Part(\"title\") title: RequestBody,\n    @Part(\"description\") description: RequestBody,\n    @Part(\"subject_id\") subjectId: RequestBody,\n    @Part(\"teacher_id\") teacherId: RequestBody,\n    @Part(\"section_id\") sectionId: RequestBody,\n    @Part(\"assignment_date\") assignmentDate: RequestBody,\n    @Part(\"submission_date\") submissionDate: RequestBody,\n    @Part(\"status\") status: RequestBody,\n    @Part document: MultipartBody.Part?\n): Call&lt;AssignmentResponse&gt;\n</code></pre>\n"}, {"tags": ["android", "kotlin", "gradle-kotlin-dsl"], "answers": [{"tags": [], "owner": {"reputation": 172, "user_id": 7701297, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KxrmjavhI_4/AAAAAAAAAAI/AAAAAAAAH4A/2C8XKXtONcU/photo.jpg?sz=128", "display_name": "bam bam", "link": "https://stackoverflow.com/users/7701297/bam-bam"}, "is_accepted": true, "score": 0, "last_activity_date": 1574757161, "creation_date": 1574757161, "answer_id": 59046702, "question_id": 59046413, "link": "https://stackoverflow.com/questions/59046413/switching-to-kotlin-dsl-unresolved-reference-when-trying-to-access-other-file/59046702#59046702", "title": "Switching to Kotlin DSL Unresolved reference when trying to access other file", "body": "<p>did you import class? add <code>import java.util.Properties</code> on top of your build.gradle.kts</p>\n"}], "owner": {"reputation": 755, "user_id": 1286214, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3800e55981ddc5f7a5b6766ec2a433e6?s=128&d=identicon&r=PG", "display_name": "OLee Csobert", "link": "https://stackoverflow.com/users/1286214/olee-csobert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 467, "favorite_count": 0, "accepted_answer_id": 59046702, "answer_count": 1, "score": 1, "last_activity_date": 1574868300, "creation_date": 1574756032, "last_edit_date": 1574868300, "question_id": 59046413, "link": "https://stackoverflow.com/questions/59046413/switching-to-kotlin-dsl-unresolved-reference-when-trying-to-access-other-file", "title": "Switching to Kotlin DSL Unresolved reference when trying to access other file", "body": "<p>I have an error when trying to use Kotlin DSL for my gradle files.</p>\n\n<p>In <code>build.gradle(app)</code> I have a function to retrieve an api key stored in an \nfile <code>keys.properties</code>, the function in Groovy is the following:</p>\n\n<pre><code>// Retrieve key api\ndef getApiKey() {\n    def keysFile = file(\"keys.properties\")\n    def keysProperties = new Properties()\n    keysProperties.load(new FileInputStream(keysFile))\n    def apiKey = keysProperties['API_KEY']\n    return apiKey\n}\n</code></pre>\n\n<p>When switching to Kotlin DSL I naively changed the function as follow:</p>\n\n<pre><code>// Retrieve key for TMDB api\nfun getApiKey() {\n    val keysFile = file(\"keys.properties\")\n    val keysProperties = Properties()\n    keysProperties.load(FileInputStream(keysFile))\n    val apiKey = keysProperties[\"API_KEY\"]\n    return apiKey\n}\n</code></pre>\n\n<p>The build then returns the following error:</p>\n\n<pre><code>.../app/build.gradle.kts:13:26: Unresolved reference: Properties\n</code></pre>\n\n<p>Does anyone know how to fix that?</p>\n\n<h2>Edit</h2>\n\n<p>as suggested by #bam bam, adding an import <code>import java.util.Properties</code> solved the problems.. But other problems came, see <a href=\"https://stackoverflow.com/a/59053039/1286214\">this question</a></p>\n"}, {"tags": ["android", "gradle", "kotlin", "gradle-plugin"], "comments": [{"owner": {"reputation": 23433, "user_id": 1127485, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e7eccba442d1ee3ca8e4ded89b343362?s=128&d=identicon&r=PG", "display_name": "sschuberth", "link": "https://stackoverflow.com/users/1127485/sschuberth"}, "edited": false, "score": 0, "creation_date": 1582540142, "post_id": 59046202, "comment_id": 106799447, "body": "Do you happen to have any proxy settings defined?"}, {"owner": {"reputation": 23433, "user_id": 1127485, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e7eccba442d1ee3ca8e4ded89b343362?s=128&d=identicon&r=PG", "display_name": "sschuberth", "link": "https://stackoverflow.com/users/1127485/sschuberth"}, "edited": false, "score": 0, "creation_date": 1582551787, "post_id": 59046202, "comment_id": 106805580, "body": "If so, in my case the issue was that I accidentally included the user / password into the <code>systemProp.http.proxyHost</code> URL instead of splitting them out into the <code>systemProp.http.proxyUser</code> and <code>systemProp.http.proxyPassword</code> properties."}], "answers": [{"comments": [{"owner": {"reputation": 2214, "user_id": 4729203, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/83ef72e73541936fa5eae74e4703257c?s=128&d=identicon&r=PG&f=1", "display_name": "wonsuc", "link": "https://stackoverflow.com/users/4729203/wonsuc"}, "edited": false, "score": 0, "creation_date": 1594010072, "post_id": 59047364, "comment_id": 110965665, "body": "How to clean <code>Gradle cache</code>?"}, {"owner": {"reputation": 531, "user_id": 1807168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/083265881cb260fdca71af94844657fd?s=128&d=identicon&r=PG", "display_name": "Alexander Mikhalchenko", "link": "https://stackoverflow.com/users/1807168/alexander-mikhalchenko"}, "reply_to_user": {"reputation": 2214, "user_id": 4729203, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/83ef72e73541936fa5eae74e4703257c?s=128&d=identicon&r=PG&f=1", "display_name": "wonsuc", "link": "https://stackoverflow.com/users/4729203/wonsuc"}, "edited": false, "score": 0, "creation_date": 1594104375, "post_id": 59047364, "comment_id": 111000889, "body": "Remove .gradle folder in project directory and in your user&#39;s home directory."}], "tags": [], "owner": {"reputation": 531, "user_id": 1807168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/083265881cb260fdca71af94844657fd?s=128&d=identicon&r=PG", "display_name": "Alexander Mikhalchenko", "link": "https://stackoverflow.com/users/1807168/alexander-mikhalchenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1574759536, "creation_date": 1574759536, "answer_id": 59047364, "question_id": 59046202, "link": "https://stackoverflow.com/questions/59046202/org-gradle-kotlin-kotlin-dsl-was-not-found/59047364#59047364", "title": "org.gradle.kotlin.kotlin-dsl was not found", "body": "<p>The same exact build file works for me. Try clean Gradle cache in both your project and home directory and check if it will work then. If it will still fail, try to update Gradle and the plugin to the latest version <code>id(\"org.gradle.kotlin.kotlin-dsl\") version \"1.3.2\"</code></p>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 3938313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5b8d2ff46fc2d6200afec126cb22cd6?s=128&d=identicon&r=PG", "display_name": "diemer", "link": "https://stackoverflow.com/users/3938313/diemer"}, "is_accepted": false, "score": 4, "last_activity_date": 1581957721, "creation_date": 1581957721, "answer_id": 60266917, "question_id": 59046202, "link": "https://stackoverflow.com/questions/59046202/org-gradle-kotlin-kotlin-dsl-was-not-found/60266917#60266917", "title": "org.gradle.kotlin.kotlin-dsl was not found", "body": "<p>Did you check that Android Studio wasn't running in Offline Mode? Take a look at <code>Preferences/Build, Execution, Deployment/Gradle/Global Gradle settings</code> and see if Offline Work is checked.</p>\n"}, {"tags": [], "owner": {"reputation": 399, "user_id": 10096812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3205f7cfdc992e5c4c2679701625a881?s=128&d=identicon&r=PG&f=1", "display_name": "\u5085\u7ee7\u6657", "link": "https://stackoverflow.com/users/10096812/%e5%82%85%e7%bb%a7%e6%99%97"}, "is_accepted": false, "score": 0, "last_activity_date": 1592320214, "creation_date": 1592320214, "answer_id": 62411740, "question_id": 59046202, "link": "https://stackoverflow.com/questions/59046202/org-gradle-kotlin-kotlin-dsl-was-not-found/62411740#62411740", "title": "org.gradle.kotlin.kotlin-dsl was not found", "body": "<p>I have the same problem and I try <code>gradle --info</code>\n<br>the log is below:</p>\n\n<pre><code>Evaluating project ':buildSrc' using build file '/Users/fjh1997/mirai/buildSrc/build.gradle.kts'.\nI/O exception (org.apache.http.NoHttpResponseException) caught when processing request to {tls}-&gt;http://127.0.0.1:1083-&gt;https://plugins.gradle.org:443: The target server failed to respond\nRetrying request to {tls}-&gt;http://127.0.0.1:1083-&gt;https://plugins.gradle.org:443\nI/O exception (org.apache.http.NoHttpResponseException) caught when processing request to {tls}-&gt;http://127.0.0.1:1083-&gt;https://plugins.gradle.org:443: The target server failed to respond\nRetrying request to {tls}-&gt;http://127.0.0.1:1083-&gt;https://plugins.gradle.org:443\nI/O exception (org.apache.http.NoHttpResponseException) caught when processing request to {tls}-&gt;http://127.0.0.1:1083-&gt;https://plugins.gradle.org:443: The target server failed to respond\n\n</code></pre>\n\n<p>It seems that pass requests to proxy 127.0.0.1:1083.However what url I set proxy  in local gradle.properties file is 127.0.0.1:8118.What's wrong with that?After long time's efforts,I find it out.\n<br>Actually,there are two gradle.properties configuration files in your system , one is in your project/.gradle\uff0canother is in \uff5e/.gradle.And the latter is the global setting for gradle.\n<br>If the  global setting has set variables for systemProp.http.proxyHost, then whatever you set in project/.gradle/gradle.properties, proxy dosen't work at all,you have to change it in the global setting.\n<br>And BTW,I find that the global setting for gradle is changed by my android studio preference.</p>\n"}, {"tags": [], "owner": {"reputation": 2214, "user_id": 4729203, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/83ef72e73541936fa5eae74e4703257c?s=128&d=identicon&r=PG&f=1", "display_name": "wonsuc", "link": "https://stackoverflow.com/users/4729203/wonsuc"}, "is_accepted": false, "score": 0, "last_activity_date": 1594017088, "creation_date": 1594017088, "answer_id": 62750418, "question_id": 59046202, "link": "https://stackoverflow.com/questions/59046202/org-gradle-kotlin-kotlin-dsl-was-not-found/62750418#62750418", "title": "org.gradle.kotlin.kotlin-dsl was not found", "body": "<p>In my case, my company using proxy behind the network.</p>\n<p>So it must SSL handshake fail issue.</p>\n<p>To fix this issue, I use <a href=\"https://keystore-explorer.org/\" rel=\"nofollow noreferrer\">KeyStore Explorer</a>.</p>\n<p>Follow these steps.</p>\n<ol>\n<li><p>Download KeyStore Explorer and install it on your system. (In my case Windows10 OS)</p>\n</li>\n<li><p>Run KeyStore Explorer and open <code>cacerts</code> file, if you are using <em>Android Studio on Windows 10</em>, it's at here: <code>C:\\Program Files\\Android\\Android Studio(or Preview)\\jre\\jre\\lib\\security</code> with password <code>changeit</code>.</p>\n</li>\n<li><p>On the toolbar, go to <code>Examine -&gt; Examine SSL</code>, and insert these values and click <code>OK</code>.</p>\n<p><strong>SSL Host:</strong> plugins.gradle.org<br />\n<strong>SSL Port:</strong> 443</p>\n</li>\n<li><p>Click the <code>Import</code> button and <code>OK</code>.</p>\n</li>\n<li><p><code>Save</code> the file, and go to Android Studio, run <code>Invalidate Caches / Restart</code>.</p>\n</li>\n<li><p>If Android Studio is reopened, try <code>Sync Project with Gradle Files</code> again.</p>\n</li>\n</ol>\n<p>Please leave comment, if you have more questions.</p>\n"}], "owner": {"reputation": 71, "user_id": 6038337, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rxT6Yl2S5Xc/AAAAAAAAAAI/AAAAAAAAAuU/iDHOIumEBWM/photo.jpg?sz=128", "display_name": "Charming Wong", "link": "https://stackoverflow.com/users/6038337/charming-wong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3898, "favorite_count": 1, "answer_count": 4, "score": 5, "last_activity_date": 1594017088, "creation_date": 1574755160, "question_id": 59046202, "link": "https://stackoverflow.com/questions/59046202/org-gradle-kotlin-kotlin-dsl-was-not-found", "title": "org.gradle.kotlin.kotlin-dsl was not found", "body": "<p>I am getting the following error while running the build</p>\n\n<pre><code>FAILURE: Build failed with an exception.\n\n* Where:\nBuild file '/home/charming/mainframer/bigovlog_android/buildSrc/build.gradle.kts' line: 4\n\n* What went wrong:\nPlugin [id: 'org.gradle.kotlin.kotlin-dsl', version: '1.2.6'] was not found in any of the following sources:\n\n- Gradle Core Plugins (plugin is not in 'org.gradle' namespace)\n- Plugin Repositories (could not resolve plugin artifact 'org.gradle.kotlin.kotlin-dsl:org.gradle.kotlin.kotlin-dsl.gradle.plugin:1.2.6')\n  Searched in the following repositories:\n    Gradle Central Plugin Repository\n</code></pre>\n\n<p>my buildSrc/build.gradle.kts</p>\n\n<pre><code>repositories {\n    jcenter()\n}\nplugins {\n    `kotlin-dsl`\n    id(\"groovy\")\n}\ndependencies{\n    gradleApi()\n    localGroovy()\n}\n</code></pre>\n\n<p>I tried everything but still not working</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 3570, "user_id": 12121419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31b54723fc3fa242fc9b1fa46eb2ca6a?s=128&d=identicon&r=PG", "display_name": "blackapps", "link": "https://stackoverflow.com/users/12121419/blackapps"}, "edited": false, "score": 0, "creation_date": 1574754735, "post_id": 59045930, "comment_id": 104333305, "body": "What is <code>wv_rgb</code>?"}, {"owner": {"reputation": 13, "user_id": 12342290, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8-gANcpEjtk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reLZDAHHRMKY4ERSVh3PT2L96_-xA/photo.jpg?sz=128", "display_name": "Benjamin Flatz", "link": "https://stackoverflow.com/users/12342290/benjamin-flatz"}, "reply_to_user": {"reputation": 3570, "user_id": 12121419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31b54723fc3fa242fc9b1fa46eb2ca6a?s=128&d=identicon&r=PG", "display_name": "blackapps", "link": "https://stackoverflow.com/users/12121419/blackapps"}, "edited": false, "score": 0, "creation_date": 1574758722, "post_id": 59045930, "comment_id": 104335170, "body": "Yes wv_rgb is a WebView"}], "answers": [{"tags": [], "owner": {"reputation": 3570, "user_id": 12121419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31b54723fc3fa242fc9b1fa46eb2ca6a?s=128&d=identicon&r=PG", "display_name": "blackapps", "link": "https://stackoverflow.com/users/12121419/blackapps"}, "is_accepted": true, "score": 0, "last_activity_date": 1574754991, "creation_date": 1574754991, "answer_id": 59046154, "question_id": 59045930, "link": "https://stackoverflow.com/questions/59045930/is-there-a-way-to-load-multiple-urls-in-a-for-loop/59046154#59046154", "title": "Is there a way to load multiple URL&#39;s in a for loop", "body": "<p>If `wv_rgb' is a WebView than for a loadUrl you have to wait for event onPageFinished() (or onPageLoaded() forgot name).</p>\n"}, {"comments": [{"owner": {"reputation": 3570, "user_id": 12121419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31b54723fc3fa242fc9b1fa46eb2ca6a?s=128&d=identicon&r=PG", "display_name": "blackapps", "link": "https://stackoverflow.com/users/12121419/blackapps"}, "edited": false, "score": 1, "creation_date": 1574759911, "post_id": 59046363, "comment_id": 104335779, "body": "<code>and than call onPageFinished()(as stated by ...</code> One can not call onPageFinished(). It&#39;s an event. One can override it and place code in it which is executed ... when the page is finished."}], "tags": [], "owner": {"reputation": 31, "user_id": 6442746, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wzMKMtxe41o/AAAAAAAAAAI/AAAAAAAAAK8/6c2HwaIQhU4/photo.jpg?sz=128", "display_name": "takiuddin93", "link": "https://stackoverflow.com/users/6442746/takiuddin93"}, "is_accepted": false, "score": 0, "last_activity_date": 1574755812, "creation_date": 1574755812, "answer_id": 59046363, "question_id": 59045930, "link": "https://stackoverflow.com/questions/59045930/is-there-a-way-to-load-multiple-urls-in-a-for-loop/59046363#59046363", "title": "Is there a way to load multiple URL&#39;s in a for loop", "body": "<p>inside the loop you can try using onPageStarted() passing view url anf favicon and than call onPageFinished()(as stated by @blackapps) passing view and url. or try using conventional for loop(not sure, but worth a shot).</p>\n\n<p>also you can look into this link <a href=\"https://android--code.blogspot.com/2016/03/android-detect-when-webview-finish.html\" rel=\"nofollow noreferrer\">https://android--code.blogspot.com/2016/03/android-detect-when-webview-finish.html</a></p>\n"}], "owner": {"reputation": 13, "user_id": 12342290, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8-gANcpEjtk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reLZDAHHRMKY4ERSVh3PT2L96_-xA/photo.jpg?sz=128", "display_name": "Benjamin Flatz", "link": "https://stackoverflow.com/users/12342290/benjamin-flatz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 59046154, "answer_count": 2, "score": 0, "last_activity_date": 1578651250, "creation_date": 1574753977, "last_edit_date": 1574761223, "question_id": 59045930, "link": "https://stackoverflow.com/questions/59045930/is-there-a-way-to-load-multiple-urls-in-a-for-loop", "title": "Is there a way to load multiple URL&#39;s in a for loop", "body": "<p>I'm trying to control RGB LED's with an ESP8266 module. But if i try to control multiple ESP8266 modules at once, the for loop only works for the last array element.</p>\n\n<p>I've tried Toast.makeText(applicationContext, i.toString(), Toast.LENGTH_SHORT).show()\nand the loop only counts 2 also if i remove the if statement.</p>\n\n<p>The toast itself works fine on the AVD but not on my Galaxy S8.\nThe loading of all ips doesn't work on my phone and on the AVD.\nEvery time i try to control multiple devices only the last one lights up.\nHere's my RGBActivity maybe I'm missing something.</p>\n\n<pre><code>iv_rgb.setOnTouchListener {\n  _,\n  event - &gt;\n\n  if (event.action == MotionEvent.ACTION_DOWN || event.action == MotionEvent.ACTION_MOVE) {\n\n    bitmap = iv_rgb.drawingCache\n    val pixel = bitmap.getPixel(event.x.toInt(), event.y.toInt())\n\n    var r = (Color.red(pixel) * brightness) / 100\n    var g = (Color.green(pixel) * brightness) / 100\n    var b = (Color.blue(pixel) * brightness) / 100\n\n    val hex = \"#\" + Integer.toHexString(pixel)\n\n    //color_layout.setBackgroundColor(Color.rgb(r, g, b))\n    //color_view.text = \"RGB: $r, $g, $b, \\nHex: $hex\\n${Devices.deviceIP[0]}\"\n    //Toast.makeText(this@RGBActivity, Devices.deviceIP[1], Toast.LENGTH_SHORT).show()\n    for (i in Devices.deviceIP.indices) {\n      if (Devices.switch[i]) {\n        wv_rgb.loadUrl(\"http://${Devices.deviceIP[i]}/?r${r.toString()}g${g.toString()}b${b.toString()}&amp;\")\n        Toast.makeText(applicationContext, Devices.deviceIP[i], Toast.LENGTH_SHORT).show()\n        //tv_color_rgb.text = \"RGB: $r, $g, $b, \\nHex: $hex\\n${Devices.deviceIP[0]}\"\n        //sleep(100)\n\n      }\n      //wvRGB.loadUrl(\"http://${Devices.deviceIP[i]}/?r${r.toString()}g${g.toString()}b${b.toString()}&amp;\")\n      //Toast.makeText(this@RGBActivity, Devices.deviceIP[i], Toast.LENGTH_SHORT).show()\n      //sleep(100)\n\n    }\n\n  }\n  true\n\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "shopify"], "comments": [{"owner": {"reputation": 2342, "user_id": 3625409, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/TH6AY.jpg?s=128&g=1", "display_name": "Tara", "link": "https://stackoverflow.com/users/3625409/tara"}, "edited": false, "score": 1, "creation_date": 1595843220, "post_id": 59045556, "comment_id": 111603870, "body": "U got solution ? I am also facing same problm"}], "owner": {"reputation": 570, "user_id": 1969201, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/061d6c0537c534d007c9af0041e736ef?s=128&d=identicon&r=PG", "display_name": "Alex_Crack", "link": "https://stackoverflow.com/users/1969201/alex-crack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 162, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1581926672, "creation_date": 1574752342, "question_id": 59045556, "link": "https://stackoverflow.com/questions/59045556/shopifys-mobile-buy-sdk-enabling-caching-crashes-application", "title": "Shopify&#39;s mobile buy SDK enabling caching crashes application", "body": "<p>I'm creating application for Android with Kotlin.</p>\n\n<p>I use Mobile buy SDK version 3.6.0</p>\n\n<pre><code>implementation 'com.shopify.mobilebuysdk:buy3:3.6.0'\n</code></pre>\n\n<p>I build Graph client with this code:</p>\n\n<pre><code>        graphClient = GraphClient.build(this,\n            BuildConfig.SHOP_DOMAIN,\n            BuildConfig.API_KEY\n        ) {\n            httpClient = okHttpClient\n\n            httpCache(cacheDir) {\n                cacheMaxSizeBytes = 10 * 1024 * 1024\n                defaultCachePolicy = HttpCachePolicy.Default.CACHE_FIRST.expireAfter(5, TimeUnit.MINUTES)\n            }\n        }\n\n</code></pre>\n\n<p>And application crashes on start with error</p>\n\n<pre><code>java.lang.NoSuchMethodError: No static method create(Lokhttp3/internal/io/FileSystem;Ljava/io/File;IIJ)Lokhttp3/internal/cache/DiskLruCache; in class Lokhttp3/internal/cache/DiskLruCache; or its super classes (declaration of 'okhttp3.internal.cache.DiskLruCache' appears in /data/app/com.example.app/base.apk)\n        at com.shopify.buy3.internal.cache.DiskLruCacheStore.&lt;init&gt;(DiskLruCacheStore.kt:43)\n        at com.shopify.buy3.GraphClient$Config.build(GraphClient.kt:189)\n        at com.shopify.buy3.GraphClient$Companion.build(GraphClient.kt:131)\n</code></pre>\n\n<p>How can I fix this problem?</p>\n"}, {"tags": ["kotlin", "idioms"], "comments": [{"owner": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 2, "creation_date": 1574752626, "post_id": 59045539, "comment_id": 104332463, "body": "function overloading is a concept that can be applied outside of OOP for free functions as well. If you see the operator + as a free function then I don&#39;t think it&#39;s a completely seperate concept"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 4, "creation_date": 1574753166, "post_id": 59045539, "comment_id": 104332694, "body": "Here&#39;s the crucial thing missing from your question. How do you define &quot;overloading&quot; in general? My working definition is <i>&quot;to give a name or symbol different meanings for different types of operands&quot;</i>. So are operator overloading and method overloading really different?"}, {"owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 0, "creation_date": 1574753500, "post_id": 59045539, "comment_id": 104332845, "body": "I don&#39;t know how overloading works in Kotlin, but you also tagged your question C++, and in C++ you can overload the operators as if they were normal functions. And, just as with normal functions, you need to declare them. But I&#39;m not sure if your question is if there should be a default operator+ for your class A?"}, {"owner": {"reputation": 374839, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1574754280, "post_id": 59045539, "comment_id": 104333117, "body": "&quot;<i>but without a previous method with the same name</i>&quot; Wouldn&#39;t the method be called &quot;operator plus&quot;? There are many different functions with the same name, with the difference being that they take different variables."}, {"owner": {"reputation": 1519, "user_id": 4249825, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ffbd1a01848286bb7b2eafc61ef2aa27?s=128&d=identicon&r=PG&f=1", "display_name": "Mugurel", "link": "https://stackoverflow.com/users/4249825/mugurel"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1574754339, "post_id": 59045539, "comment_id": 104333142, "body": "@StoryTeller For me, overloading presumes already having a method, with name, parameters and return type. Then declaring another one with the same name but otherwise a changed signature. For operator overloading I don&#39;t see an already existing method. So when we&#39;re doing &quot;operator overloading&quot; we&#39;re declaring a new method, we&#39;re not overloading an existing one."}, {"owner": {"reputation": 469137, "user_id": 476, "user_type": "moderator", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a235706e3d81b614acaec3368edfea4b?s=128&d=identicon&r=PG", "display_name": "deceze", "link": "https://stackoverflow.com/users/476/deceze"}, "edited": false, "score": 0, "creation_date": 1574754417, "post_id": 59045539, "comment_id": 104333171, "body": "Well, without <i>overloading</i> <code>plus</code> for your custom object the default behaviour is a compilation error. But you can <i>change</i> that behaviour\u2026 \ud83d\ude09"}, {"owner": {"reputation": 374839, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 1, "creation_date": 1574754727, "post_id": 59045539, "comment_id": 104333301, "body": "@Mugurel: &quot;<i>For operator overloading I don&#39;t see an already existing method.</i>&quot; And yet you do. You can add two things together of various types already, through functions provided by your compiler. Those are methods that already exist."}], "answers": [{"tags": [], "owner": {"reputation": 1574, "user_id": 8103819, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QBJQK.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/8103819/daniel"}, "is_accepted": false, "score": 1, "last_activity_date": 1574759923, "last_edit_date": 1574759923, "creation_date": 1574759581, "answer_id": 59047381, "question_id": 59045539, "link": "https://stackoverflow.com/questions/59045539/is-overloading-in-operator-overloading-just-semantic/59047381#59047381", "title": "Is &quot;overloading&quot; in &quot;operator overloading&quot; just semantic?", "body": "<p>Looks like you are confused about operators in general.</p>\n\n<p>The thing about operators is that they are just inline <strong>functions</strong> and the operator keyword is just a language construct to give you the ability to group operators with classes.</p>\n\n<p>Where you can find answers about this is definitely the source code. If we take a look at the tests, we can find the <a href=\"https://github.com/JetBrains/kotlin/blob/b7e5d9faaeab8fe3bcba76d73558eb52ccc78f9e/idea/testData/quickfix/createFromUsage/createVariable/localVariable/nonIdentifier.kt\" rel=\"nofollow noreferrer\">following</a>:</p>\n\n<pre><code>// \"Create local variable '-'\" \"false\"\n// ACTION: Create extension function 'A.minus'\n// ACTION: Create member function 'A.minus'\n// ACTION: Replace overloaded operator with function call\n</code></pre>\n\n<p>Sadly, I cannot find the source code where operator is transformed, but most certainly this must be the procedure where the operator overload is replaced with function call.</p>\n"}], "owner": {"reputation": 1519, "user_id": 4249825, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ffbd1a01848286bb7b2eafc61ef2aa27?s=128&d=identicon&r=PG&f=1", "display_name": "Mugurel", "link": "https://stackoverflow.com/users/4249825/mugurel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1574772122, "creation_date": 1574752252, "last_edit_date": 1574772122, "question_id": 59045539, "link": "https://stackoverflow.com/questions/59045539/is-overloading-in-operator-overloading-just-semantic", "title": "Is &quot;overloading&quot; in &quot;operator overloading&quot; just semantic?", "body": "<p>Kotlin is one of the languages that allow us to easily define behavior for various predefined operators, operation named <code>operator overloading</code> - <a href=\"https://kotlinlang.org/docs/reference/operator-overloading.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/operator-overloading.html</a> </p>\n\n<p>My question is regarding the <code>overloading</code> part of the operation.</p>\n\n<p>From what I see default the language only declares operators for the basic types - <a href=\"https://github.com/JetBrains/kotlin/blob/01a613dca4042dde8d2374ff0e6610cb9eddc415/core/builtins/native/kotlin/Primitives.kt\" rel=\"nofollow noreferrer\">https://github.com/JetBrains/kotlin/blob/01a613dca4042dde8d2374ff0e6610cb9eddc415/core/builtins/native/kotlin/Primitives.kt</a></p>\n\n<p>If I'm reading this correctly our custom types would not have any of this special methods - operators available by default. And indeed if we're to try </p>\n\n<pre><code>class A { }\nval a = A()\nSystem.out.println(a + a)\n</code></pre>\n\n<p>the compiler would try to find a suitable <code>operator plus</code> method to call but ultimately give a compilation error.</p>\n\n<p>But if we do declare our own <code>operator plus</code> method</p>\n\n<pre><code>class A { \n    operator fun plus(other: A) = \"Hello!\"\n}\nval a = A()\nSystem.out.println(a + a)\n</code></pre>\n\n<p>we would indeed have \"Hello!\" printed.</p>\n\n<p>The above mechanism is called \"operator overloading\" but without a previous method with the same name we do not in fact use the OOP method overloading we all are accustomed to - <a href=\"https://en.wikipedia.org/wiki/Function_overloading\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Function_overloading</a>.</p>\n\n<p>So between the two mechanisms - operator overloading and method overloading there is really no connection, other than an unfortunate name clash?</p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 46525, "user_id": 7294900, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Pdqi4.gif?s=128&g=1", "display_name": "user7294900", "link": "https://stackoverflow.com/users/7294900/user7294900"}, "is_accepted": false, "score": 1, "last_activity_date": 1574752403, "creation_date": 1574752403, "answer_id": 59045577, "question_id": 59045477, "link": "https://stackoverflow.com/questions/59045477/how-is-companion-different-from-instance/59045577#59045577", "title": "How is Companion different from INSTANCE", "body": "<p><code>ClassName.Companion</code> can be used also for accessing a <a href=\"https://blog.mindorks.com/jvmstatic-jvmoverloads-and-jvmfield-in-kotlin\" rel=\"nofollow noreferrer\">non static method</a></p>\n\n<blockquote>\n  <p><code>iAmStaicMethod()</code> is a static function and <code>iAmNonStaticMethod()</code> is a non-static function.</p>\n  \n  <p>So, to call the above methods in Java, write the below code:</p>\n\n<pre><code>ClassName.iAmStaticMethod(); // works fine\nClassName.iAmNonStaticMethod(); // error: not a static method\nClassName.Companion.iAmStaticMethod(); // instance method remains\nClassName.Companion.iAmNonStaticMethod(); // the only way it works\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 3453, "user_id": 838355, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/AIvqN.png?s=128&g=1", "display_name": "ir2pid", "link": "https://stackoverflow.com/users/838355/ir2pid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574752403, "creation_date": 1574751968, "question_id": 59045477, "link": "https://stackoverflow.com/questions/59045477/how-is-companion-different-from-instance", "title": "How is Companion different from INSTANCE", "body": "<p>How are an object INSTANCE and a Companion object different and which situations should they be used in.</p>\n\n<pre><code>ObjectName.INSTANCE.iAmStaticMethod();\n\nClassName.Companion.iAmStaticMethod();\n</code></pre>\n"}, {"tags": ["android", "kotlin", "data-binding", "android-binding-adapter"], "comments": [{"owner": {"reputation": 239, "user_id": 12228267, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jy6Eo.jpg?s=128&g=1", "display_name": "Peter Alwin", "link": "https://stackoverflow.com/users/12228267/peter-alwin"}, "edited": false, "score": 1, "creation_date": 1574752855, "post_id": 59045450, "comment_id": 104332551, "body": "you added viewgroups as first parameter so you need to pass view from  xml          app:clickListener=&quot;@{(v) -&gt;{v,1}&quot;"}, {"owner": {"reputation": 469, "user_id": 8821635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7af91b4d2a5ec2e0d1ab925527f8fdec?s=128&d=identicon&r=PG&f=1", "display_name": "calvert", "link": "https://stackoverflow.com/users/8821635/calvert"}, "reply_to_user": {"reputation": 239, "user_id": 12228267, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jy6Eo.jpg?s=128&g=1", "display_name": "Peter Alwin", "link": "https://stackoverflow.com/users/12228267/peter-alwin"}, "edited": false, "score": 0, "creation_date": 1574806650, "post_id": 59045450, "comment_id": 104359782, "body": "Thanks but that is not working."}], "owner": {"reputation": 469, "user_id": 8821635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7af91b4d2a5ec2e0d1ab925527f8fdec?s=128&d=identicon&r=PG&f=1", "display_name": "calvert", "link": "https://stackoverflow.com/users/8821635/calvert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1574764010, "creation_date": 1574751891, "last_edit_date": 1574764010, "question_id": 59045450, "link": "https://stackoverflow.com/questions/59045450/strange-binding-adapter-click-listener-behaviour-kotlin-android", "title": "Strange binding adapter click listener behaviour kotlin android", "body": "<pre><code>&lt;ConstraintLayout\n    app:clickListener=\"@{1}\"&gt; // wont work\n\n    &lt;LinearLayout&gt;            // works here\n\n       &lt;TextView/&gt;\n       &lt;ImageView/&gt;\n\n    &lt;/LinearLayout&gt;\n&lt;/ConstraintLayout&gt;\n</code></pre>\n\n<p>I have encountered a strange behaviour that I never met before. I am trying to make the constraint layout clickable so I have a binding adapter to init the click listener.</p>\n\n<pre><code>@BindingAdapter(\"clickListener\")\nfun clickListener(view: ViewGroup, data: Int){\n    view.setOnClickListener{\n        println(\"Click\")\n    }\n}\n</code></pre>\n\n<p>The constraint layout is not listening to my clicks. By chance, I created the linear layout, moved the <code>app:clickListener=\"@{1}\"</code> from the constraint layout to linear layout. This will work and clicks are listened. If I remove the linear layout and add <code>app:clickListener=\"@{1}\"</code> to either the Textview or ImageView or both, clicks are listened too. It just won't work no matter what at the root level. </p>\n\n<p>Is there an explanation for this? I am trying to get rid of the linear layout as it adds a layer to the view but this is the only way that I can have to make it work and <strong>please note that</strong> I will only use binding adapter for this case. </p>\n"}, {"tags": ["java", "android", "datetime", "kotlin", "duration"], "comments": [{"owner": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "edited": false, "score": 0, "creation_date": 1574765254, "post_id": 59045342, "comment_id": 104338827, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/55550936/call-requires-api-level-26-current-min-is-23-java-time-instantnow\">Call requires API level 26 (current min is 23): java.time.Instant#now</a>"}, {"owner": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "edited": false, "score": 0, "creation_date": 1574765369, "post_id": 59045342, "comment_id": 104338888, "body": "The answer is that the best alternative to <code>java.time.Duration.bewteen</code> is <code>org.threeten.bp.Duration.between</code>. java.time has been backported and the backport adapted to Android. Add ThreeTenABP to your project, change the impots to use <code>org.threeten.bp</code> and keep using the code you already have."}, {"owner": {"reputation": 1460, "user_id": 10942908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jLlgs.png?s=128&g=1", "display_name": "Joshua de Guzman", "link": "https://stackoverflow.com/users/10942908/joshua-de-guzman"}, "reply_to_user": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "edited": false, "score": 0, "creation_date": 1574765447, "post_id": 59045342, "comment_id": 104338933, "body": "Yes, I&#39;m actually aware that the library exists, but I&#39;m currently leaning towards doing it what&#39;s available from the out of the box SDK without using a backport or another lib."}, {"owner": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "edited": false, "score": 1, "creation_date": 1574765919, "post_id": 59045342, "comment_id": 104339213, "body": "Thanks for reporting back. One should always think twice before accepting a third party dependency. This is a backport, so if you trust it on API level 26+, I should think that you have good reasons to trust it on lower levels too. And it will simplify things later when you move up to 26+. You should do what you find best for your situation, of course."}, {"owner": {"reputation": 1460, "user_id": 10942908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jLlgs.png?s=128&g=1", "display_name": "Joshua de Guzman", "link": "https://stackoverflow.com/users/10942908/joshua-de-guzman"}, "reply_to_user": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "edited": false, "score": 0, "creation_date": 1574766659, "post_id": 59045342, "comment_id": 104339641, "body": "I&#39;ll try to have a look on this a little bit more. I appreciate your time dropping by here!"}], "answers": [{"tags": [], "owner": {"reputation": 1460, "user_id": 10942908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jLlgs.png?s=128&g=1", "display_name": "Joshua de Guzman", "link": "https://stackoverflow.com/users/10942908/joshua-de-guzman"}, "is_accepted": true, "score": 3, "last_activity_date": 1574751566, "creation_date": 1574751566, "answer_id": 59045368, "question_id": 59045342, "link": "https://stackoverflow.com/questions/59045342/whats-the-best-alternative-for-duration-between-when-targetting-android-api-2/59045368#59045368", "title": "What&#39;s the best alternative for Duration.between when targetting Android API &lt; 26?", "body": "<p>Decided to create a legacy function for Android API &lt; 26.</p>\n\n<pre><code>/**\n * If using for Android &amp; API &lt; 26\n * @param start Epoch time in milliseconds\n * @param end Epoch time in milliseconds\n */\nfun getReadableBetweenLegacy(start: Long, end: Long): String {\n    val startDate = Date(start)\n    val endDate = Date(end)\n    val calendar = Calendar.getInstance()\n    val diff = endDate.time - startDate.time\n    calendar.timeInMillis = diff\n\n    val daySeconds = 1000 * 60 * 60 * 24\n    val hourSeconds = 1000 * 60 * 60\n    val days = diff / daySeconds\n    val hours = ((diff - (daySeconds * days)) / (hourSeconds));\n    val minutes = (diff - (daySeconds * days) - (hourSeconds * hours)) / (1000 * 60)\n\n    val stringBuilder = StringBuilder()\n    if (days != 0L) {\n        stringBuilder.append(days)\n        if (days == 1L) {\n            stringBuilder.append(\" day \")\n        } else {\n            stringBuilder.append(\" days \")\n        }\n    }\n\n    if (hours != 0L) {\n        stringBuilder.append(hours)\n        if (hours == 1L) {\n            stringBuilder.append(\" hour \")\n        } else {\n            stringBuilder.append(\" hours \")\n        }\n    }\n\n\n    if (minutes != 0L) {\n        stringBuilder.append(minutes)\n        if (minutes == 1L) {\n            stringBuilder.append(\" minute.\")\n        } else {\n            stringBuilder.append(\" minutes.\")\n        }\n    }\n\n    println(\"Breakdown:\")\n    println(\"Days: $days\")\n    println(\"Hours: $hours\")\n    println(\"Minutes: $minutes\")\n\n    return stringBuilder.toString()\n}\n</code></pre>\n\n<p>The solution is pretty straightforward with little to no margin of error at all.</p>\n"}, {"comments": [{"owner": {"reputation": 562, "user_id": 132296, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0ec63faaf9bdf72cb610f23f7579ef46?s=128&d=identicon&r=PG", "display_name": "HX_unbanned", "link": "https://stackoverflow.com/users/132296/hx-unbanned"}, "edited": false, "score": 0, "creation_date": 1615820163, "post_id": 61218399, "comment_id": 117802817, "body": "Not working on AS 4.2 Beta 6. Build fails with following Gradle 6.4.1 / AGP 4.0.2 exception: <code>&gt; No signature of method: build_dvug2jv3jezfh5oc48zh5hqe.android() is applicable for argument types: (build_dvug2jv3jezfh5oc48zh5hqe$_run_closure1) values: [build_dvug2jv3jezfh5oc48zh5hqe$_run_closure1@752d785a]</code>"}, {"owner": {"reputation": 562, "user_id": 132296, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0ec63faaf9bdf72cb610f23f7579ef46?s=128&d=identicon&r=PG", "display_name": "HX_unbanned", "link": "https://stackoverflow.com/users/132296/hx-unbanned"}, "edited": false, "score": 0, "creation_date": 1615822933, "post_id": 61218399, "comment_id": 117804337, "body": "For follow-up, issue submitted: <a href=\"https://github.com/StylingAndroid/Time/issues/1\" rel=\"nofollow noreferrer\">github.com/StylingAndroid/Time/issues/1</a>"}], "tags": [], "owner": {"reputation": 1272, "user_id": 568485, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/52e0c8bc6476aa3922c36f8031bf3b4d?s=128&d=identicon&r=PG", "display_name": "HBG", "link": "https://stackoverflow.com/users/568485/hbg"}, "is_accepted": false, "score": 1, "last_activity_date": 1586903768, "creation_date": 1586903768, "answer_id": 61218399, "question_id": 59045342, "link": "https://stackoverflow.com/questions/59045342/whats-the-best-alternative-for-duration-between-when-targetting-android-api-2/61218399#61218399", "title": "What&#39;s the best alternative for Duration.between when targetting Android API &lt; 26?", "body": "<p>If you're using Gradle plugin 4.0 or later (with Android Studio 4.0 or later), you can take advantage of D8 Core Library Desugaring. This includes a subset of the functionality found in <code>java.time</code> and will allow you to use <code>java.time.Duration</code> in your project; even if you need to support versions older than API 26.</p>\n\n<p>In your module's <code>build.gradle</code> file:</p>\n\n<pre><code>android {\n\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n        coreLibraryDesugaringEnabled true\n    }\n\n    // If using Kotlin\n    kotlinOptions {\n        jvmTarget = JavaVersion.VERSION_1_8\n    }\n}\ndependencies {\n    \u2026\n    coreLibraryDesugaring 'com.android.tools:desugar_jdk_libs:1.0.5'\n}\n</code></pre>\n\n<p>You should now be able to use this class error free.</p>\n\n<p>Some sources:</p>\n\n<ul>\n<li><a href=\"https://blog.stylingandroid.com/d8-desugaring/\" rel=\"nofollow noreferrer\">Styling Android</a></li>\n<li><a href=\"https://jakewharton.com/d8-library-desugaring/\" rel=\"nofollow noreferrer\">Jake Wharton</a></li>\n<li><a href=\"https://developer.android.com/studio/command-line/d8#j8\" rel=\"nofollow noreferrer\">Android Developers</a></li>\n</ul>\n"}], "owner": {"reputation": 1460, "user_id": 10942908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jLlgs.png?s=128&g=1", "display_name": "Joshua de Guzman", "link": "https://stackoverflow.com/users/10942908/joshua-de-guzman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 1, "accepted_answer_id": 59045368, "answer_count": 2, "score": 0, "last_activity_date": 1586903768, "creation_date": 1574751452, "last_edit_date": 1574771119, "question_id": 59045342, "link": "https://stackoverflow.com/questions/59045342/whats-the-best-alternative-for-duration-between-when-targetting-android-api-2", "title": "What&#39;s the best alternative for Duration.between when targetting Android API &lt; 26?", "body": "<p>Currently, I went on tinkering with the features of one of my pet projects.\nI decided to include the feature to block a user from doing certain action/s and display a banner to show the cooldown period.</p>\n\n<p>Eg.</p>\n\n<p>Given: User is blocked for doing certain action/s from November 19, 2019 2:00:00 AM (1574128800) up to November 21, 2019 6:32:00 PM (1574361120).</p>\n\n<p>Output: <code>2 days 16 hours 32 minutes</code></p>\n\n<p>This is the method I have right now. Unfortunately, it only works on Android API >= 26.</p>\n\n<pre><code>/**\n * If using for Android, `Duration` requires API &gt; 26\n * @param start Epoch time in milliseconds\n * @param end Epoch time in milliseconds\n */\nfun getReadableBetween(start: Long, end: Long): String {\n    val startDate = Date(start)\n    val endDate = Date(end)\n    var duration = Duration.between(startDate.toInstant(), endDate.toInstant())\n\n    val days = duration.toDays()\n    duration = duration.minusDays(days)\n    val hours = duration.toHours()\n    duration = duration.minusHours(hours)\n    val minutes = duration.toMinutes()\n\n    val stringBuilder = StringBuilder()\n\n    if (days != 0L) {\n        stringBuilder.append(days)\n        if (days == 1L) {\n            stringBuilder.append(\" day \")\n        } else {\n            stringBuilder.append(\" days \")\n        }\n    }\n\n    if (hours != 0L) {\n        stringBuilder.append(hours)\n        if (hours == 1L) {\n            stringBuilder.append(\" hour \")\n        } else {\n            stringBuilder.append(\" hours \")\n        }\n    }\n\n\n    if (minutes != 0L) {\n        stringBuilder.append(minutes)\n        if (minutes == 1L) {\n            stringBuilder.append(\" minute.\")\n        } else {\n            stringBuilder.append(\" minutes.\")\n        }\n    }\n\n    println(\"Breakdown:\")\n    println(\"Days: $days\")\n    println(\"Hours: $hours\")\n    println(\"Minutes: $minutes\")\n\n    return stringBuilder.toString()\n}\n</code></pre>\n\n<p>As much as I would like to use 3rd party libraries, I'd like to get my hands dirty using the fundamentals of date and time APIs available out of the box.</p>\n\n<p>PS. Before linking this to other SO posts, please consider the scenario.</p>\n"}, {"tags": ["java", "kotlin"], "comments": [{"owner": {"reputation": 1994, "user_id": 10536125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7445c27d383f2368956f6f23e75f5fe1?s=128&d=identicon&r=PG&f=1", "display_name": "Bananon", "link": "https://stackoverflow.com/users/10536125/bananon"}, "edited": false, "score": 4, "creation_date": 1574747328, "post_id": 59044121, "comment_id": 104330663, "body": "<a href=\"https://stackoverflow.com/a/54847719/10536125\">You can not explicitly define intersection types in Kotlin, but you can use generic type constraints to achieve it in a function parameter.</a>"}, {"owner": {"reputation": 26407, "user_id": 1384374, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/KE9pV.png?s=128&g=1", "display_name": "Mick", "link": "https://stackoverflow.com/users/1384374/mick"}, "reply_to_user": {"reputation": 1994, "user_id": 10536125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7445c27d383f2368956f6f23e75f5fe1?s=128&d=identicon&r=PG&f=1", "display_name": "Bananon", "link": "https://stackoverflow.com/users/10536125/bananon"}, "edited": false, "score": 0, "creation_date": 1574747952, "post_id": 59044121, "comment_id": 104330853, "body": "Thank you @Bananon - any ideas how to apply this to <code>typealias</code>? Just wondering if a generic typealias actually make sense.."}, {"owner": {"reputation": 1994, "user_id": 10536125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7445c27d383f2368956f6f23e75f5fe1?s=128&d=identicon&r=PG&f=1", "display_name": "Bananon", "link": "https://stackoverflow.com/users/10536125/bananon"}, "edited": false, "score": 0, "creation_date": 1574749910, "post_id": 59044121, "comment_id": 104331464, "body": "I think it&#39;s impossible to apply this to <code>typealias</code> in a current version of a language."}], "answers": [{"comments": [{"owner": {"reputation": 26407, "user_id": 1384374, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/KE9pV.png?s=128&g=1", "display_name": "Mick", "link": "https://stackoverflow.com/users/1384374/mick"}, "edited": false, "score": 0, "creation_date": 1574844639, "post_id": 59053074, "comment_id": 104371045, "body": "This is a nice approach.. Nice one @Evgeny, I am accepting your answer today, if anyone comes up with something better, I will update."}], "tags": [], "owner": {"reputation": 1062, "user_id": 4028009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52d9e87ce304217b5b34a44059e5fd77?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeny  Bovykin", "link": "https://stackoverflow.com/users/4028009/evgeny-bovykin"}, "is_accepted": true, "score": 5, "last_activity_date": 1574778273, "creation_date": 1574778273, "answer_id": 59053074, "question_id": 59044121, "link": "https://stackoverflow.com/questions/59044121/typealias-combine-multiple-interfaces-in-kotlin/59053074#59053074", "title": "Typealias - Combine Multiple Interfaces in Kotlin", "body": "<p>Why not just create new interface?</p>\n\n<pre><code>interface MyType : ReadableInterface, WritableInterface\n</code></pre>\n"}], "owner": {"reputation": 26407, "user_id": 1384374, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/KE9pV.png?s=128&g=1", "display_name": "Mick", "link": "https://stackoverflow.com/users/1384374/mick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 686, "favorite_count": 0, "accepted_answer_id": 59053074, "answer_count": 1, "score": 3, "last_activity_date": 1574778273, "creation_date": 1574744973, "last_edit_date": 1574746746, "question_id": 59044121, "link": "https://stackoverflow.com/questions/59044121/typealias-combine-multiple-interfaces-in-kotlin", "title": "Typealias - Combine Multiple Interfaces in Kotlin", "body": "<p>I'm a bit rusty with protocol composition in Kotlin, I'd just like to combine multiple interfaces by declaring a custom <code>typealias</code>:</p>\n\n<pre><code>// This doesn't work\ntypealias MyType = (ReadableInterface &amp;&amp; WritableInterface)\n</code></pre>\n\n<p>Any ideas?</p>\n\n<hr>\n\n<p>In <strong>Swift</strong>, I would do it this way:</p>\n\n<pre><code>typealias MyType = ReadableInterface &amp; WritableInterface\n</code></pre>\n\n<hr>\n\n<p>In <strong>Objective C</strong>, I would do it this way:</p>\n\n<pre><code>typedef &lt;ReadableInterface, WritableInterface&gt; MyType; \n</code></pre>\n"}, {"tags": ["javascript", "java", "android", "kotlin"], "comments": [{"owner": {"reputation": 10261, "user_id": 295004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a29d6038e4dcb7fac98ef41c002975e1?s=128&d=identicon&r=PG", "display_name": "Morrison Chang", "link": "https://stackoverflow.com/users/295004/morrison-chang"}, "edited": false, "score": 0, "creation_date": 1574739141, "post_id": 59043208, "comment_id": 104328577, "body": "Related: <a href=\"https://stackoverflow.com/q/8374016/295004\">How to execute JavaScript on Android?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4346, "user_id": 1292557, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ccb0ba86944ca95bd765dfcc1ed3eb32?s=128&d=identicon&r=PG", "display_name": "Abu Yousuf", "link": "https://stackoverflow.com/users/1292557/abu-yousuf"}, "is_accepted": false, "score": 0, "last_activity_date": 1574742134, "creation_date": 1574742134, "answer_id": 59043715, "question_id": 59043208, "link": "https://stackoverflow.com/questions/59043208/call-javascript-method-in-js-file-inside-android-studio-assets/59043715#59043715", "title": "call javascript method in .js file inside android studio assets", "body": "<p>First you have to enable JavaScript </p>\n\n<pre><code>webView.getSettings().setJavaScriptEnabled(true); \n</code></pre>\n\n<p>To call JavaScript method you have to use <code>evaluateJavascript(..)</code> method</p>\n\n<pre><code>    webView.evaluateJavascript(\"javascript: \" + \"getValue(\\\"message\\\")\", new ValueCallback&lt;String&gt;() {\n        @Override\n        public void onReceiveValue(String value) {\n            Log.i(TAG, \"onReceive\");\n            Log.i(TAG, \"Received: \" + value);\n        }\n    });\n</code></pre>\n\n<p>And your JavaScript method is like </p>\n\n<pre><code>function getValue(msg) {\n    return 10;\n}\n</code></pre>\n"}], "owner": {"reputation": 8214, "user_id": 458700, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0aae22509915fa4da811f48e757f4860?s=128&d=identicon&r=PG&f=1", "display_name": "Amira Elsayed Ismail", "link": "https://stackoverflow.com/users/458700/amira-elsayed-ismail"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574742134, "creation_date": 1574737967, "question_id": 59043208, "link": "https://stackoverflow.com/questions/59043208/call-javascript-method-in-js-file-inside-android-studio-assets", "title": "call javascript method in .js file inside android studio assets", "body": "<p>I am using a library called matrix.org </p>\n\n<p><a href=\"https://i.stack.imgur.com/FeXgJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FeXgJ.png\" alt=\"enter image description here\"></a></p>\n\n<p>there are some javascript files in this library that contains some methods</p>\n\n<p>is it possible to call these method inside native java or kotlin code of android studio ?</p>\n"}, {"tags": ["android", "kotlin", "android-edittext"], "comments": [{"owner": {"reputation": 464, "user_id": 11598177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nl2uJ.jpg?s=128&g=1", "display_name": "L2_Paver", "link": "https://stackoverflow.com/users/11598177/l2-paver"}, "edited": false, "score": 2, "creation_date": 1574737396, "post_id": 59043050, "comment_id": 104328219, "body": "you can store it in sharedpreferences"}, {"owner": {"reputation": 1000, "user_id": 579435, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/404c33522c34920c21b35d259e83322c?s=128&d=identicon&r=PG", "display_name": "sarmahdi", "link": "https://stackoverflow.com/users/579435/sarmahdi"}, "edited": false, "score": 0, "creation_date": 1574740203, "post_id": 59043050, "comment_id": 104328833, "body": "please show us your code what you have done so far and if there is an error when saving"}], "answers": [{"tags": [], "owner": {"reputation": 53, "user_id": 2580882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CWYer.jpg?s=128&g=1", "display_name": "Deep Sheth", "link": "https://stackoverflow.com/users/2580882/deep-sheth"}, "is_accepted": false, "score": 0, "last_activity_date": 1574747070, "creation_date": 1574747070, "answer_id": 59044484, "question_id": 59043050, "link": "https://stackoverflow.com/questions/59043050/how-can-i-save-data-from-an-edittext-component-so-it-shows-up-when-the-app-is-re/59044484#59044484", "title": "How can I save data from an EditText component so it shows up when the app is reopened?", "body": "<p>You have to store your data in shared preference when any click event listen or on edittext textwatcher you can set your character in preference but best way is on any click event save data on preference and when activity open set data from preference on edittext.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10351180"}, "is_accepted": false, "score": 0, "last_activity_date": 1574747924, "creation_date": 1574747924, "answer_id": 59044631, "question_id": 59043050, "link": "https://stackoverflow.com/questions/59043050/how-can-i-save-data-from-an-edittext-component-so-it-shows-up-when-the-app-is-re/59044631#59044631", "title": "How can I save data from an EditText component so it shows up when the app is reopened?", "body": "<p>Store it in Shared Preferences</p>\n\n<pre><code>SharedPreferences pref = getApplicationContext().getSharedPreferences(\"MyPref\", 0); // 0 - for private mode\n</code></pre>\n\n<p>use this save the value..</p>\n\n<pre><code>Editor editor = sharedpreferences.edit();\neditor.putString(\"key_name\", \"value\"); //here give name and value to save\neditor.commit();\n</code></pre>\n\n<p>use this to get the value.</p>\n\n<pre><code>String edittextvalue = pref.getString(\"key_name\", null); //put edittextvalue  where ever you what to show the value.\n</code></pre>\n\n<p>use this step to remove or clear the value</p>\n\n<pre><code>editor.remove(\"name\");\neditor.commit();\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8810054, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-znJuDCGi-RE/AAAAAAAAAAI/AAAAAAAAAGE/4GqgrGSzZ2A/photo.jpg?sz=128", "display_name": "Javier Quintana", "link": "https://stackoverflow.com/users/8810054/javier-quintana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1574747924, "creation_date": 1574736887, "last_edit_date": 1574739016, "question_id": 59043050, "link": "https://stackoverflow.com/questions/59043050/how-can-i-save-data-from-an-edittext-component-so-it-shows-up-when-the-app-is-re", "title": "How can I save data from an EditText component so it shows up when the app is reopened?", "body": "<p>I am using Android Studio and programming in Kotlin. I haven't been able to find a way to save the data entered by the user so it appears when they reopen the app. Thank you ahead of time!</p>\n"}, {"tags": ["kotlin", "intrinsics"], "answers": [{"comments": [{"owner": {"reputation": 238, "user_id": 932066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/914f733186933c1e932103feca03699c?s=128&d=identicon&r=PG", "display_name": "sandeep549", "link": "https://stackoverflow.com/users/932066/sandeep549"}, "edited": false, "score": 0, "creation_date": 1576285775, "post_id": 59042528, "comment_id": 104862228, "body": "Thanks @llya for giving me a great hint to search further."}], "tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": true, "score": 3, "last_activity_date": 1574733071, "last_edit_date": 1574733071, "creation_date": 1574732726, "answer_id": 59042528, "question_id": 59042483, "link": "https://stackoverflow.com/questions/59042483/where-is-function-definition-of-kotlin-plus-operator/59042528#59042528", "title": "Where is function definition of kotlin plus operator?", "body": "<p>These functions in <code>Primitives.kt</code> are implemented as compiler intrinsics. It means that when the compiler encounters such function invocation, it replaces that with some predefined sequence of lower level code or a call to another function.</p>\n\n<p>For example in Kotlin/JVM, the function call <code>Int.plus(Int): Int</code> in this code</p>\n\n<pre><code>fun test(x: Int, y: Int) {\n    x.plus(y)\n}\n</code></pre>\n\n<p>is replaced with the bytecode sequence something like this:</p>\n\n<pre><code>    ILOAD 0\n    ILOAD 1\n    IADD\n</code></pre>\n\n<p>And an example when an intrinsic function call is replaced with another function call:</p>\n\n<pre><code>fun test(x: Int, y: Int) {\n    x.compareTo(y)\n}\n</code></pre>\n\n<p>is compiled to:</p>\n\n<pre><code>    ILOAD 0\n    ILOAD 1\n    INVOKESTATIC kotlin/jvm/internal/Intrinsics.compare (II)I\n</code></pre>\n\n<p>Here the static function <code>Instrincs.compare(Int, Int)</code> is called instead of the member function <code>Int.compareTo(Int)</code>.</p>\n"}], "owner": {"reputation": 238, "user_id": 932066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/914f733186933c1e932103feca03699c?s=128&d=identicon&r=PG", "display_name": "sandeep549", "link": "https://stackoverflow.com/users/932066/sandeep549"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 59042528, "answer_count": 1, "score": 0, "last_activity_date": 1574733071, "creation_date": 1574732278, "last_edit_date": 1574732776, "question_id": 59042483, "link": "https://stackoverflow.com/questions/59042483/where-is-function-definition-of-kotlin-plus-operator", "title": "Where is function definition of kotlin plus operator?", "body": "<p>I was just looking into the source code of Primitives.kt file in kotlin source to see the function code for 'plus' operator.</p>\n\n<pre><code>/** Adds the other value to this value. */\npublic operator fun plus(other: Int): Int\n</code></pre>\n\n<p>Can someone help me guide where is the code for this function ?</p>\n"}]