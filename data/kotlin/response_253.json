[{"tags": ["java", "android", "kotlin", "webrtc", "webrtc-android"], "answers": [{"comments": [{"owner": {"reputation": 687, "user_id": 9248248, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Affk7mZCb7M/AAAAAAAAAAI/AAAAAAAAPSQ/fJKhBU2lLao/photo.jpg?sz=128", "display_name": "richa shah", "link": "https://stackoverflow.com/users/9248248/richa-shah"}, "edited": false, "score": 0, "creation_date": 1587107339, "post_id": 58922035, "comment_id": 108382976, "body": "Hii I have the same issue as urs and following the article that u suggested, I am also getting in logs about audio but not video and still, my issue has not solved the way u r saying .can u share me constrains and initial peer connection properties?"}], "tags": [], "owner": {"reputation": 444, "user_id": 6699740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PWZbK.jpg?s=128&g=1", "display_name": "Tahir Ferli", "link": "https://stackoverflow.com/users/6699740/tahir-ferli"}, "is_accepted": true, "score": 0, "last_activity_date": 1574107172, "creation_date": 1574107172, "answer_id": 58922035, "question_id": 58846684, "link": "https://stackoverflow.com/questions/58846684/webrtc-not-creating-icecandidates-for-video/58922035#58922035", "title": "WebRTC not creating IceCandidates for video", "body": "<p>Maybe it is not ideal but the following solved my problem.</p>\n\n<p>First of all it is OK to have fewer number of <code>IceCandidate</code> s. During creation of <code>IceCandidate</code> s on my side, <code>sdpMid</code> fields still don't contain video value -i receive both video and audio values for <code>sdpMid</code> key in <code>IceCandidate</code> s from socket connection-.</p>\n\n<p>All I had to do was to touch my views again after the connection is set with the following methods.</p>\n\n<p>I walked through these <a href=\"https://github.com/vivek1794/webrtc-android-codelab/blob/master/Step-3/app/src/main/java/xyz/vivekc/webrtccodelab/MainActivity.java\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://vivekc.xyz/getting-started-with-webrtc-part-4-de72b58ab31e\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<pre><code>private void updateVideoViews(final boolean remoteVisible) {\n    activity.runOnUiThread(() -&gt; {\n        ViewGroup.LayoutParams params = localVideoView.getLayoutParams();\n        ViewGroup.LayoutParams params2 = remoteVideoView.getLayoutParams();\n        if (remoteVisible) {\n            params.height = dpToPx(100);\n            params.width = dpToPx(100);\n\n            params2.height = dpToPx(100);\n            params2.width = dpToPx(100);\n        } else {\n            params = new FrameLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT);\n            params2 = new FrameLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT);\n        }\n        localVideoView.setLayoutParams(params);\n        remoteVideoView.setLayoutParams(params2);\n    });\n}\n\npublic int dpToPx(int dp) {\n    DisplayMetrics displayMetrics = getResources().getDisplayMetrics();\n    return Math.round(dp * (displayMetrics.xdpi / DisplayMetrics.DENSITY_DEFAULT));\n}\n</code></pre>\n"}], "owner": {"reputation": 444, "user_id": 6699740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PWZbK.jpg?s=128&g=1", "display_name": "Tahir Ferli", "link": "https://stackoverflow.com/users/6699740/tahir-ferli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 58922035, "answer_count": 1, "score": 1, "last_activity_date": 1574107172, "creation_date": 1573684546, "last_edit_date": 1573764488, "question_id": 58846684, "link": "https://stackoverflow.com/questions/58846684/webrtc-not-creating-icecandidates-for-video", "title": "WebRTC not creating IceCandidates for video", "body": "<p>On an Android app I am trying to make a <code>webRTC</code> connection. </p>\n\n<p>When I am the callee I receive enough number of <code>IceCandidate</code>s for video and audio from the socket connection. When my <code>IceCandidate</code>s are created there are much fewer of them. Approximately 6 of them are created and they are all for audio. </p>\n\n<p>From the log messages I see connection is successful and audio is going both ways and I manage to send my video to the caller as well however I can not receive the caller's video stream. I guess it is related to not being able to create enough <code>IceCandidate</code>s to send to socket connection. Any ideas?</p>\n"}, {"tags": ["android", "kotlin", "android-databinding", "kotlin-android-extensions"], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 4375671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8a3f0b843ff109cf347a64261c35685a?s=128&d=identicon&r=PG&f=1", "display_name": "zerstoer", "link": "https://stackoverflow.com/users/4375671/zerstoer"}, "edited": false, "score": 0, "creation_date": 1573682126, "post_id": 58846086, "comment_id": 103966077, "body": "@WidexA/S Thanks for help me. I have a question, what do you mean expand the onClickListener to accept the String?."}, {"owner": {"reputation": 67, "user_id": 4375671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8a3f0b843ff109cf347a64261c35685a?s=128&d=identicon&r=PG&f=1", "display_name": "zerstoer", "link": "https://stackoverflow.com/users/4375671/zerstoer"}, "edited": false, "score": 0, "creation_date": 1574187364, "post_id": 58846086, "comment_id": 104139333, "body": "@WidexA/S Thanks a lot Nikola, you gave me great ideas."}], "tags": [], "owner": {"reputation": 46728, "user_id": 557179, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7KJPr.jpg?s=128&g=1", "display_name": "Nikola Despotoski", "link": "https://stackoverflow.com/users/557179/nikola-despotoski"}, "is_accepted": false, "score": 1, "last_activity_date": 1573686587, "last_edit_date": 1573686587, "creation_date": 1573681428, "answer_id": 58846086, "question_id": 58845872, "link": "https://stackoverflow.com/questions/58845872/higher-order-function-for-clickablespan/58846086#58846086", "title": "Higher order function for ClickableSpan", "body": "<p>You should expand the <code>onClickListener</code> to accept the String. Then invoke it with argument. </p>\n\n<pre><code>  @BindingAdapter(\"infowithlinks\")\n    fun TextView.setOnSpanClickListener(clickListener:Function1&lt;String, Unit&gt;){\n        val clickableSpan = object : ClickableSpan() {\n            override fun onClick(widget: View){\n              with(text as SpannableString) {\n                val clickableSpan = getSpans&lt;ClickableSpan&gt;()\n                    .first() // probably search correct one\n                val start = getSpanStart(clickableSpan)\n                val end = getSpanEnd(clickableSpan)\n                val url = text.subSequence(start, end).toString()\n                clickListener(url)\n               }\n            }\n        }  \n        //....\n\n    }\n</code></pre>\n\n<p>On the xml you'll have </p>\n\n<p><code>&lt;TextView app:infowithlinks=\"@{model.processUrl}\"</code></p>\n\n<p>And in the view model</p>\n\n<pre><code>fun processUrl(url : String){\n\n}\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 4375671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8a3f0b843ff109cf347a64261c35685a?s=128&d=identicon&r=PG&f=1", "display_name": "zerstoer", "link": "https://stackoverflow.com/users/4375671/zerstoer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573686587, "creation_date": 1573680380, "last_edit_date": 1573680766, "question_id": 58845872, "link": "https://stackoverflow.com/questions/58845872/higher-order-function-for-clickablespan", "title": "Higher order function for ClickableSpan", "body": "<p>I'm trying to capture the click on a textview with links. \nTo achieve this: </p>\n\n<ul>\n<li>I created a BindingAdapter which has two params (a: TextView, clickListener: () -> Unit).</li>\n<li><p>Inside the BindingAdapter:</p>\n\n<ul>\n<li><pre><code>val clickableSpan = object : ClickableSpan() {\n  override fun onClick(widget: View) = onClickListener.invoke()\n} ``` \n</code></pre></li>\n</ul></li>\n<li><p>In a ViewModel I created a <code>fun processUrl() { Code Here }</code></p></li>\n<li>In the layout.xml: \n\n<ul>\n<li><code>&lt;TextView app:infowithlinks=\"@{() -&gt; model.processUrl()}\"</code></li>\n</ul></li>\n</ul>\n\n<p>All that works well, I would like when I click the link on the TextView be able to send the Url to the function inside the ViewModel.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["android", "android-fragments", "kotlin", "viewmodel", "android-mvvm"], "comments": [{"owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 0, "creation_date": 1573676829, "post_id": 58844931, "comment_id": 103963787, "body": "From where you initialize your <code>viewModel</code>?"}, {"owner": {"reputation": 355, "user_id": 12183825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa12d59d98a7ab4fa6d9540625389d35?s=128&d=identicon&r=PG&f=1", "display_name": "sashabeliy", "link": "https://stackoverflow.com/users/12183825/sashabeliy"}, "reply_to_user": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 0, "creation_date": 1573676911, "post_id": 58844931, "comment_id": 103963827, "body": "@Md. Asaduzamman I have followed this tutorial <a href=\"https://medium.com/@gunayadem.dev/boost-your-android-apps-with-koin-and-coroutines-using-mvvm-in-kotlin-d30fe436ab4c\" rel=\"nofollow noreferrer\">medium.com/@gunayadem.dev/&hellip;</a>"}, {"owner": {"reputation": 355, "user_id": 12183825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa12d59d98a7ab4fa6d9540625389d35?s=128&d=identicon&r=PG&f=1", "display_name": "sashabeliy", "link": "https://stackoverflow.com/users/12183825/sashabeliy"}, "reply_to_user": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 0, "creation_date": 1573676952, "post_id": 58844931, "comment_id": 103963846, "body": "@Md.Asaduzzaman there are not used viewmodelprovider"}, {"owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 0, "creation_date": 1573677261, "post_id": 58844931, "comment_id": 103963986, "body": "Then you have to use <code>private val viewModel: MainViewModel by viewModel()</code>. Tutorial doing same. You have missed it. right?"}, {"owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 0, "creation_date": 1573677626, "post_id": 58844931, "comment_id": 103964124, "body": "Please read tutorial carefully and try to understand logic instead of just copy-paste. Thanks"}, {"owner": {"reputation": 355, "user_id": 12183825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa12d59d98a7ab4fa6d9540625389d35?s=128&d=identicon&r=PG&f=1", "display_name": "sashabeliy", "link": "https://stackoverflow.com/users/12183825/sashabeliy"}, "reply_to_user": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 0, "creation_date": 1573679047, "post_id": 58844931, "comment_id": 103964712, "body": "@Md.Asaduzzaman it is still showing white screen and there is no error on the logcat I am following tutorial whats your suggestion"}, {"owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 0, "creation_date": 1573679361, "post_id": 58844931, "comment_id": 103964864, "body": "Check my answer and let me know"}, {"owner": {"reputation": 879, "user_id": 9881903, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xOtup.jpg?s=128&g=1", "display_name": "GuanHongHuang", "link": "https://stackoverflow.com/users/9881903/guanhonghuang"}, "edited": false, "score": 0, "creation_date": 1573694561, "post_id": 58844931, "comment_id": 103969461, "body": "@sashabeliy move all your initial code into <code>onViewCreated</code> instead of <code>onCreateView</code>"}, {"owner": {"reputation": 355, "user_id": 12183825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa12d59d98a7ab4fa6d9540625389d35?s=128&d=identicon&r=PG&f=1", "display_name": "sashabeliy", "link": "https://stackoverflow.com/users/12183825/sashabeliy"}, "reply_to_user": {"reputation": 879, "user_id": 9881903, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xOtup.jpg?s=128&g=1", "display_name": "GuanHongHuang", "link": "https://stackoverflow.com/users/9881903/guanhonghuang"}, "edited": false, "score": 0, "creation_date": 1573719133, "post_id": 58844931, "comment_id": 103976486, "body": "@huang12345 can you explain what you mean with coding sample"}, {"owner": {"reputation": 879, "user_id": 9881903, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xOtup.jpg?s=128&g=1", "display_name": "GuanHongHuang", "link": "https://stackoverflow.com/users/9881903/guanhonghuang"}, "edited": false, "score": 0, "creation_date": 1573721183, "post_id": 58844931, "comment_id": 103977498, "body": "@sashabeliy Check my answer"}, {"owner": {"reputation": 355, "user_id": 12183825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa12d59d98a7ab4fa6d9540625389d35?s=128&d=identicon&r=PG&f=1", "display_name": "sashabeliy", "link": "https://stackoverflow.com/users/12183825/sashabeliy"}, "edited": false, "score": 0, "creation_date": 1573723265, "post_id": 58844931, "comment_id": 103978602, "body": "@haung12345 it is still showing white screen and I have checked logcat there is also no error or any exception"}], "answers": [{"comments": [{"owner": {"reputation": 355, "user_id": 12183825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa12d59d98a7ab4fa6d9540625389d35?s=128&d=identicon&r=PG&f=1", "display_name": "sashabeliy", "link": "https://stackoverflow.com/users/12183825/sashabeliy"}, "edited": false, "score": 0, "creation_date": 1573684589, "post_id": 58845630, "comment_id": 103967016, "body": "Asaduzzamman java.lang.NoClassDefFoundError: Failed resolution of: Lorg/koin/core/parameter/ParameterListKt;         at yodgorbek.komilov.musobaqayangiliklari.ui.TopHeadlinesFragme&zwnj;&#8203;nt.&lt;init&gt;(TopHeadlin&zwnj;&#8203;esFragment.kt:90)         at yodgorbek.komilov.musobaqayangiliklari.MainActivity.onCreate&zwnj;&#8203;(MainActivity.kt:24)"}], "tags": [], "owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "is_accepted": false, "score": 0, "last_activity_date": 1573679341, "creation_date": 1573679341, "answer_id": 58845630, "question_id": 58844931, "link": "https://stackoverflow.com/questions/58844931/why-fragment-not-showing-empty-white-screen/58845630#58845630", "title": "why fragment not showing empty white screen?", "body": "<p>Your <code>initViewModel</code> doesn't looks ok. Try using below:</p>\n\n<pre><code>private fun initViewModel() {\n    viewModel?.sportList?.observe(this, Observer { newList -&gt;\n        topHeadlinesAdapter.updateData(newList)\n    })\n\n    viewModel?.showLoading?.observe(this, Observer { showLoading -&gt;\n        pb.visibility = if (showLoading) View.VISIBLE else View.GONE\n    })\n\n    viewModel?.showError?.observe(this, Observer { showError -&gt;\n        (showError)\n    })\n\n    viewModel?.loadNews()\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 355, "user_id": 12183825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa12d59d98a7ab4fa6d9540625389d35?s=128&d=identicon&r=PG&f=1", "display_name": "sashabeliy", "link": "https://stackoverflow.com/users/12183825/sashabeliy"}, "edited": false, "score": 0, "creation_date": 1573722980, "post_id": 58852628, "comment_id": 103978434, "body": "it is still showing white screen and there also not error on the logcat"}], "tags": [], "owner": {"reputation": 879, "user_id": 9881903, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xOtup.jpg?s=128&g=1", "display_name": "GuanHongHuang", "link": "https://stackoverflow.com/users/9881903/guanhonghuang"}, "is_accepted": false, "score": 0, "last_activity_date": 1573721149, "creation_date": 1573721149, "answer_id": 58852628, "question_id": 58844931, "link": "https://stackoverflow.com/questions/58844931/why-fragment-not-showing-empty-white-screen/58852628#58852628", "title": "why fragment not showing empty white screen?", "body": "<p><strong>First</strong> viewModel should not be null, use <code>lateinit</code> and init viewModel while fragment is created. </p>\n\n<p><strong>Second</strong> you dont need to use <code>findViewById</code> because you are using Kotlin.\nSo you can move all your initial view  into <code>onViewCreated</code> instead of <code>onCreateView</code></p>\n\n<p><strong>Third</strong> initialize viewModel by <code>viewModel = ViewModelProviders.of(this).get(MainViewModel::class.java)</code>\nor just <code>viewModel = MainViewModel()</code>. That make your viewModel works.</p>\n\n<p>After all, I dont know the <code>newsRepository</code> meaning in your MainModel. You never use it, maybe you can delete it.</p>\n\n<pre><code>class TopHeadlinesFragment : Fragment() {\n\n   private lateinit var viewModel: MainViewModel\n   private lateinit var topHeadlinesAdapter: TopHeadlinesAdapter\n\n   override fun onCreateView(\n       inflater: LayoutInflater,\n       container: ViewGroup?,\n       savedInstanceState: Bundle?\n   ): View? {\n       val view = inflater.inflate(\n           R.layout.fragment_top_headlines\n           , container, false\n       )\n\n       return view\n   }\n\n   override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n\n       topHeadlinesAdapter = TopHeadlinesAdapter(context)\n       recyclerView.layoutManager = LinearLayoutManager(context)\n       recyclerView.adapter = topHeadlinesAdapter\n\n       initViewModel()\n\n       viewModel.loadNews()\n   }\n\n   private fun initViewModel() {\n\n       viewModel = ViewModelProviders.of(this).get(MainViewModel::class.java)\n\n       viewModel?.sportList?.observe(this, Observer { newList -&gt;\n           topHeadlinesAdapter.updateData(newList)\n       })\n\n       viewModel?.showLoading?.observe(this, Observer { showLoading -&gt;\n\n           pb.visibility = if (showLoading) View.VISIBLE else View.GONE\n\n           viewModel?.showError?.observe(this, Observer { showError -&gt;\n               (showError)\n           })\n       })\n   }\n}\n</code></pre>\n\n<p>Hope this helps. </p>\n"}], "owner": {"reputation": 355, "user_id": 12183825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa12d59d98a7ab4fa6d9540625389d35?s=128&d=identicon&r=PG&f=1", "display_name": "sashabeliy", "link": "https://stackoverflow.com/users/12183825/sashabeliy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1573721149, "creation_date": 1573676188, "question_id": 58844931, "link": "https://stackoverflow.com/questions/58844931/why-fragment-not-showing-empty-white-screen", "title": "why fragment not showing empty white screen?", "body": "<p>I am developing a news app and I have implemented ViewModel in fragment class and getting data in fragment class but it is loading progress bar only not showing data which coming from server</p>\n\n<p>below My MainViewModel.kt</p>\n\n<pre><code>class MainViewModel(newsRepository: Any?) : ViewModel(), CoroutineScope {\n    // Coroutine's background job\n     val job = Job()\n     val sportNewsInterface: SportNewsInterface? = null\n    // Define default thread for Coroutine as Main and add job\n    override val coroutineContext: CoroutineContext = Dispatchers.Main + job\n\n     val showLoading = MutableLiveData&lt;Boolean&gt;()\n     val sportList = MutableLiveData &lt;List&lt;Article&gt;&gt;()\n    val showError = SingleLiveEvent&lt;String&gt;()\n\n\n\n    fun loadNews(\n\n    ) {\n        // Show progressBar during the operation on the MAIN (default) thread\n        showLoading.value = true\n        // launch the Coroutine\n        launch {\n            // Switching from MAIN to IO thread for API operation\n            // Update our data list with the new one from API\n            val result = withContext(Dispatchers.IO) {\n                sportNewsInterface?.getNews()\n            }\n            // Hide progressBar once the operation is done on the MAIN (default) thread\n            showLoading.value = false\n            when (result) {\n\n                is UseCaseResult.Success&lt;*&gt; -&gt; {\n                    sportList.value = result.data as List&lt;Article&gt;\n                }\n                is Error -&gt; showError.value = result.message\n            }\n        }\n\n\n    }\n\n    override fun onCleared() {\n        super.onCleared()\n        // Clear our job when the linked activity is destroyed to avoid memory leaks\n        job.cancel()\n    }\n}\n</code></pre>\n\n<p>below Adapter class</p>\n\n<pre><code>class TopHeadlinesAdapter(val context: Context) :\n    RecyclerView.Adapter&lt;TopHeadlinesAdapter.MyViewHolder&gt;() {\n\n\n\n    private var articleList: List&lt;Article&gt; by Delegates.observable(emptyList()) { _, _, _ -&gt;\n        notifyDataSetChanged()\n    }\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): MyViewHolder {\n\n        val view = LayoutInflater.from(parent.context).inflate(R.layout.news_list, parent, false)\n        return MyViewHolder(view)\n    }\n\n    override fun getItemCount(): Int {\n        return articleList.size\n    }\n\n    @SuppressLint(\"NewApi\")\n    override fun onBindViewHolder(holder: MyViewHolder, position: Int) {\n\n        holder.articleTitle.text = articleList.get(position).title\n        holder.articleSourceName.text = articleList.get(position).source.name\n        Picasso.get().load(articleList.get(position).urlToImage).into(holder.image)\n\n        val input = SimpleDateFormat(\"yyyy-MM-dd'T'HH:mm:ssX\")\n        val output = SimpleDateFormat(\"dd/MM/yyyy\")\n        var d = Date()\n        try {\n            d = input.parse(articleList[5].publishedAt)\n        } catch (e: ParseException) {\n            try {\n                val fallback = SimpleDateFormat(\"yyyy-MM-dd'T'HH:mm:ss'Z'\")\n                fallback.timeZone = TimeZone.getTimeZone(\"UTC\")\n                d = fallback.parse(articleList[5].publishedAt)\n            } catch (e2: ParseException) {\n                // TODO handle error\n                val formatted = output.format(d)\n                val timelinePoint = LocalDateTime.parse(formatted)\n                val now = LocalDateTime.now()\n\n                var elapsedTime = Duration.between(timelinePoint, now)\n\n                println(timelinePoint)\n                println(now)\n                elapsedTime.toMinutes()\n\n                holder.articleTime.text = \"${elapsedTime.toMinutes()}\"\n\n            }\n        }\n\n    }\n\n    fun updateData(newList: List&lt;Article&gt;) {\n        articleList = newList\n\n    }\n\n    @SuppressLint(\"NewApi\")\n    fun example() {\n    }\n\n    class MyViewHolder(itemView: View?) : RecyclerView.ViewHolder(itemView!!) {\n\n        val image: ImageView = itemView!!.findViewById(R.id.imageView)\n        val articleTitle: TextView = itemView!!.findViewById(R.id.articleTitle)\n        val articleSourceName: TextView = itemView!!.findViewById(R.id.articleSourceName)\n        val imageCategory: ImageView = itemView!!.findViewById(R.id.imageCategory)\n        val articleTime: TextView = itemView!!.findViewById(R.id.articleTime)\n\n    }\n}\n</code></pre>\n\n<p>below TopHeadlinesFragment where I have implemented ViewModel</p>\n\n<pre><code>class TopHeadlinesFragment : Fragment() {\n\n     private var viewModel: MainViewModel? = null\n    private lateinit var topHeadlinesAdapter: TopHeadlinesAdapter\n\n\n    //3\n    override fun onCreateView(\n        inflater: LayoutInflater,\n        container: ViewGroup?,\n        savedInstanceState: Bundle?\n    ): View? {\n        val view = inflater.inflate(\n            R.layout.fragment_top_headlines\n            , container, false\n        )\n\n\n        val recyclerView = view.findViewById(R.id.recyclerView) as RecyclerView\n        val pb = view.findViewById(R.id.pb) as ProgressBar\n        topHeadlinesAdapter = TopHeadlinesAdapter(recyclerView.context)\n        recyclerView.layoutManager = LinearLayoutManager(context)\n        recyclerView.adapter = topHeadlinesAdapter\n        initViewModel()\n\n        return view\n    }\n\n    private fun initViewModel() {\n        viewModel?.sportList?.observe(this, Observer { newList -&gt;\n            topHeadlinesAdapter.updateData(newList)\n        })\n\n\n\n\n        viewModel?.showLoading?.observe(this, Observer { showLoading -&gt;\n            pb.visibility = if (showLoading) View.VISIBLE else View.GONE\n\n\n            viewModel?.showError?.observe(this, Observer { showError -&gt;\n                (showError)\n            })\n\n            viewModel?.loadNews()\n        })\n    }\n}\n</code></pre>\n\n<p>below AppModules.kt</p>\n\n<pre><code>const val BASE_URL = \"https://newsapi.org/\"\n\nval appModules = module {\n    // The Retrofit service using our custom HTTP client instance as a singleton\n    single {\n        createWebService&lt;SportNewsInterface&gt;(\n            okHttpClient = createHttpClient(),\n            factory = RxJava2CallAdapterFactory.create(),\n            baseUrl = BASE_URL\n        )\n    }\n    // Tells Koin how to create an instance of CatRepository\n    factory&lt;NewsRepository&gt; { (NewsRepositoryImpl(sportNewsInterface = get())) }\n    // Specific viewModel pattern to tell Koin how to build MainViewModel\n    viewModel { MainViewModel (newsRepository = get ())  }\n}\n\n/* Returns a custom OkHttpClient instance with interceptor. Used for building Retrofit service */\nfun createHttpClient(): OkHttpClient {\n    val client = OkHttpClient.Builder()\n    client.readTimeout(5 * 60, TimeUnit.SECONDS)\n    return client.addInterceptor {\n        val original = it.request()\n        val requestBuilder = original.newBuilder()\n        requestBuilder.header(\"Content-Type\", \"application/json\")\n        val request = requestBuilder.method(original.method, original.body).build()\n        return@addInterceptor it.proceed(request)\n    }.build()\n}\n\n/* function to build our Retrofit service */\ninline fun &lt;reified T&gt; createWebService(\n    okHttpClient: OkHttpClient,\n    factory: CallAdapter.Factory, baseUrl: String\n): T {\n    val retrofit = Retrofit.Builder()\n        .baseUrl(baseUrl)\n        .addConverterFactory(GsonConverterFactory.create(GsonBuilder().setLenient().create()))\n        .addCallAdapterFactory(CoroutineCallAdapterFactory())\n        .addCallAdapterFactory(factory)\n        .client(okHttpClient)\n        .build()\n    return retrofit.create(T::class.java)\n}\n</code></pre>\n\n<p>below fragment_top_headlines.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"&gt;\n\n    &lt;androidx.recyclerview.widget.RecyclerView\n        android:id=\"@+id/recyclerView\"\n        android:layout_width=\"0dp\"\n        android:layout_height=\"wrap_content\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\" /&gt;\n\n    &lt;ProgressBar\n        android:id=\"@+id/pb\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_gravity=\"center\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\" /&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n\n<p>below news_list.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;androidx.cardview.widget.CardView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"&gt;\n\n    &lt;RelativeLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginTop=\"16dp\"\n        android:layout_marginBottom=\"16dp\"&gt;\n\n        &lt;ImageView\n            android:id=\"@+id/imageView\"\n            android:layout_width=\"100dp\"\n            android:layout_height=\"85dp\"\n            android:layout_marginStart=\"16dp\"\n            android:layout_marginLeft=\"16dp\"\n            android:contentDescription=\"bbc\"\n            tools:background=\"@color/colorPrimary\" /&gt;\n\n        &lt;TextView\n            android:id=\"@+id/articleTitle\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginStart=\"16dp\"\n            android:layout_marginEnd=\"16dp\"\n            android:layout_toEndOf=\"@id/imageView\"\n            android:layout_toRightOf=\"@id/imageView\"\n            android:ellipsize=\"end\"\n            android:lines=\"3\"\n            android:maxLines=\"3\"\n            android:text=\"1\\n2\\n3\\n\" /&gt;\n\n        &lt;ImageView\n            android:id=\"@+id/imageCategory\"\n            android:layout_width=\"32dp\"\n            android:layout_height=\"32dp\"\n            android:layout_below=\"@id/articleTitle\"\n            android:layout_marginStart=\"16dp\"\n            android:layout_marginLeft=\"16dp\"\n            android:layout_toEndOf=\"@id/imageView\"\n            android:layout_toRightOf=\"@id/imageView\"\n            android:src=\"@drawable/ic_espn\"\n            tools:background=\"@color/colorPrimary\" /&gt;\n\n        &lt;TextView\n            android:id=\"@+id/articleSourceName\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"32dp\"\n            android:layout_below=\"@id/articleTitle\"\n            android:layout_marginStart=\"16dp\"\n            android:layout_marginLeft=\"16dp\"\n            android:layout_toEndOf=\"@id/imageCategory\"\n            android:layout_toRightOf=\"@id/imageCategory\"\n            android:gravity=\"center|start\"\n            android:text=\"Onefootbal\" /&gt;\n\n        &lt;TextView\n            android:id=\"@+id/articleTime\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"32dp\"\n            android:layout_below=\"@id/articleTitle\"\n            android:layout_alignParentEnd=\"true\"\n            android:layout_alignParentRight=\"true\"\n            android:layout_marginStart=\"16dp\"\n            android:layout_marginEnd=\"16dp\"\n            android:layout_toEndOf=\"@id/articleSourceName\"\n            android:layout_toRightOf=\"@id/articleSourceName\"\n            android:gravity=\"center|start\"\n            android:text=\"- 1h\"\n            android:textColor=\"@android:color/darker_gray\"\n            tools:ignore=\"NotSibling\" /&gt;\n    &lt;/RelativeLayout&gt;\n\n&lt;/androidx.cardview.widget.CardView&gt;\n</code></pre>\n\n<p>below NewsRepository.kt</p>\n\n<pre><code>interface NewsRepository {\n    // Suspend is used to await the result from Deferred\n    suspend fun getNewsList(): UseCaseResult&lt;Deferred&lt;List&lt;SportNewsResponse&gt;&gt;&gt;\n}\n\nclass NewsRepositoryImpl(private val sportNewsInterface: SportNewsInterface) : NewsRepository {\n    override suspend fun getNewsList(): UseCaseResult&lt;Deferred&lt;List&lt;SportNewsResponse&gt;&gt;&gt; {\n        /*\n         We try to return a list of cats from the API\n         Await the result from web service and then return it, catching any error from API\n         */\n        return try {\n            val result = sportNewsInterface.getNews()\n            UseCaseResult.Success(result) as UseCaseResult&lt;Deferred&lt;List&lt;SportNewsResponse&gt;&gt;&gt;\n        } catch (ex: Exception) {\n            UseCaseResult.Error(ex)\n        }\n    }\n}\n</code></pre>\n\n<p>below SportInterface.kt where I am getting ending points</p>\n\n<pre><code>interface SportNewsInterface {\n\n    @GET(\"v2/top-headlines?country=us&amp;apiKey=da331087e3f3462bb534b3b0917cbee9\")\n    suspend fun getNews(): List&lt;SportNewsResponse&gt;\n\n    @GET(\"/v2/top-headlines?sources=espn&amp;apiKey=da331087e3f3462bb534b3b0917cbee9\")\n    fun getEspn(): Deferred&lt;List&lt;SportNewsResponse&gt;&gt;\n\n    @GET(\"/v2/top-headlines?sources=football-italia&amp;apiKey=da331087e3f3462bb534b3b0917cbee9\")\n    fun getFootballItalia(): Deferred&lt;List&lt;SportNewsResponse&gt;&gt;\n\n    @GET(\"/v2/top-headlines?sources=bbc-sport&amp;apiKey=da331087e3f3462bb534b3b0917cbee9\")\n    fun getBBCSport(): Deferred&lt;List&lt;SportNewsResponse&gt;&gt;\n\n\n}\n</code></pre>\n\n<p>below SportNewsResponse.kt</p>\n\n<pre><code>data class SportNewsResponse(\n    val articles: List&lt;Article&gt;,\n    val status: String,\n    val totalResults: Int\n)\n</code></pre>\n\n<p>below Article.kt</p>\n\n<pre><code>@Entity(tableName = \"news_table\")\ndata class Article(@ColumnInfo(name = \"author\")val author: String,\n                   val content: String,\n                   val description: String,\n                   val publishedAt: String,\n                   val source: Source,\n                   val title: String,\n                   val url: String,\n                   val urlToImage: String\n)\n</code></pre>\n"}, {"tags": ["kotlin", "okhttp"], "comments": [{"owner": {"reputation": 2400, "user_id": 4762282, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a87249e3029c3daae0d473b1dc712484?s=128&d=identicon&r=PG&f=1", "display_name": "Ircover", "link": "https://stackoverflow.com/users/4762282/ircover"}, "edited": false, "score": 0, "creation_date": 1574067883, "post_id": 58844346, "comment_id": 104084181, "body": "What is <code>client</code> here? Where did you get it from?"}], "answers": [{"tags": [], "owner": {"reputation": 520, "user_id": 2167355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0def11942d41b3aa6da19578c532564?s=128&d=identicon&r=PG", "display_name": "abendt", "link": "https://stackoverflow.com/users/2167355/abendt"}, "is_accepted": false, "score": 1, "last_activity_date": 1574006516, "creation_date": 1574006516, "answer_id": 58902379, "question_id": 58844346, "link": "https://stackoverflow.com/questions/58844346/replicating-the-enqueue-method/58902379#58902379", "title": "Replicating the enqueue() method", "body": "<p>one easy way is to just call the callback in a synchronous way:</p>\n\n<pre><code>if (mock != null) {\n  val response = ... // prepare mock response here\n  callback.onResponse(response)\n}\n</code></pre>\n\n<p>in consequence the callback would be invoked even before your get function finishes.</p>\n\n<p>If you want to achieve that the response actually is delivered asynchronously you need to execute the mock delivery from an extra coroutine</p>\n\n<pre><code>if (mock != null) {\n   GlobalScope.launch {\n      val response = ... // prepare mock response here\n      delay(1000)\n      callback.onResponse(response)\n   }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "is_accepted": true, "score": 1, "last_activity_date": 1574071801, "creation_date": 1574071801, "answer_id": 58912136, "question_id": 58844346, "link": "https://stackoverflow.com/questions/58844346/replicating-the-enqueue-method/58912136#58912136", "title": "Replicating the enqueue() method", "body": "<p>You're mixing different concepts with your implementation. Asynchrony should be controlled with the <code>CoroutineContext</code> instead of parameters. Like this you'll always return a non-null value. Also it's wise to hide the implementation details (here <em>OkHttp</em>) and not expose it.</p>\n\n<p>You could use <code>suspendCoroutine</code> to bridge <em>OkHttp</em> with the couroutine.</p>\n\n<pre><code>suspend fun get(\n    url: String,\n    mock : String? = null\n) = if(mock != null) {\n    delay( 1000 )\n    Response.Builder().body(\n        ResponseBody.create(\n            \"application/json\".toMediaType()\n            mock\n        )\n    ).build()\n} else suspendCoroutine { continuation -&gt;\n    client.newCall(\n        Request.Builder()\n            .url(url)\n            .build()\n    ).enqueue(\n        object : Callback {\n            override fun onFailure(call: Call, e: IOException) =\n                continuation.resumeWithException(e)\n            override fun onResponse(call: Call, response: Response) =\n                continuation.resume(response)\n        }\n    )\n}\n</code></pre>\n\n<p>To access it synchronously just use</p>\n\n<pre><code>runBlocking { get(url, mock) }\n</code></pre>\n\n<p>If you really need to provide your own <code>Callable</code>, you could easily delegate to it. But you'd also have to create a call, even though you wouldn't need it when you're mocking the response.</p>\n"}], "owner": {"reputation": 1238, "user_id": 1594313, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/57a867a7222e7ed3a8d38f3c395bde31?s=128&d=identicon&r=PG", "display_name": "Kristian", "link": "https://stackoverflow.com/users/1594313/kristian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 58912136, "answer_count": 2, "score": 1, "last_activity_date": 1574071801, "creation_date": 1573673661, "question_id": 58844346, "link": "https://stackoverflow.com/questions/58844346/replicating-the-enqueue-method", "title": "Replicating the enqueue() method", "body": "<p>I have the following method which simply fetches the data in ether SYNC or ASYNC way:</p>\n\n<pre><code>enum class CallType { SYNC, ASYNC }\n\nsuspend fun get( url: String, callType : CallType, mock : String? = null, callback: Callback? ): Response?\n{\n    var response : okhttp3.Response ?= null\n\n    val request = Request.Builder()\n        .url( url )\n        .build()\n\n    val call = client.newCall( request )\n\n    if( mock != null )\n    {\n        // this works fine for SYNC, but how to make it work with ASYNC callback?\n        delay( 1000 )\n        return okhttp3.Response.Builder().body(\n            ResponseBody.create( \"application/json\".toMediaType(), mock )\n        ).build()\n    }\n\n    if( callType == CallType.ASYNC &amp;&amp; callback != null )\n        call.enqueue( callback )\n    else\n        response = call.execute()\n\n    return response\n}\n</code></pre>\n\n<p>I would like to be able to mock/overwrite the response. I can do this fine when doing it the SYNC way, since I simply have to construct and return a fake okhttp3.response, like the snippet below, and the code execution stops and everything works out great:</p>\n\n<pre><code>    if( mock != null )\n    {\n        delay( 1000 )\n        return okhttp3.Response.Builder().body(\n            ResponseBody.create( \"application/json\".toMediaType(), mock )\n        ).build()\n    }\n</code></pre>\n\n<p>The problem is that I would like to be able to do the same for ASYNC calls, but I'm not sure where to go from here. I'm basically trying to replicate the enqueue() method so that after some delay my callback gets triggered (which was passed to the get() method) and my fake okhttp3.Response is returned via the callback, instead of <em>return</em>. Any suggestions on how to accomplish this? Thanks!</p>\n"}, {"tags": ["gradle", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 7909, "user_id": 1797912, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/86868a205951159f5580697ccd41162f?s=128&d=identicon&r=PG", "display_name": "Chriki", "link": "https://stackoverflow.com/users/1797912/chriki"}, "is_accepted": true, "score": 1, "last_activity_date": 1573681470, "creation_date": 1573681470, "answer_id": 58846092, "question_id": 58844333, "link": "https://stackoverflow.com/questions/58844333/skip-comilejava-and-processresources-task-in-gradle-for-kotlin-deployment/58846092#58846092", "title": "Skip comileJava and processResources task in gradle for Kotlin deployment", "body": "<p>Not sure why you say the tasks fail when they only report <code>NO-SOURCE</code>. As can be seen in your screenshot, despite the <code>NO-SOURCE</code>, Gradle still reports <code>BUILD SUCCESSFUL</code>.</p>\n\n<p>But of course, you can also skip these irrelevant tasks (which will make Gradle report them as <code>SKIPPED</code> instead of <code>NO-SOURCE</code>):</p>\n\n<pre><code>compileJava {\n    enabled = false\n}\n</code></pre>\n"}], "owner": {"reputation": 2201, "user_id": 3142209, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/dCJiQ.jpg?s=128&g=1", "display_name": "gutenmorgenuhu", "link": "https://stackoverflow.com/users/3142209/gutenmorgenuhu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 58846092, "answer_count": 1, "score": 1, "last_activity_date": 1573681470, "creation_date": 1573673616, "question_id": 58844333, "link": "https://stackoverflow.com/questions/58844333/skip-comilejava-and-processresources-task-in-gradle-for-kotlin-deployment", "title": "Skip comileJava and processResources task in gradle for Kotlin deployment", "body": "<p>When I deploy my kotlin project, the build depends on the classes task. \nThe problem I have with it is, that classes invokes compileJava and it always fails with <strong>\"NO-SOURCE\"</strong> error. Of course I don't have java sources, it is a Kotlin-only project.</p>\n\n<p>How can I skip the compileJava task in my build chain?</p>\n\n<p><a href=\"https://i.stack.imgur.com/j72Hx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/j72Hx.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["gradle", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 2201, "user_id": 3142209, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/dCJiQ.jpg?s=128&g=1", "display_name": "gutenmorgenuhu", "link": "https://stackoverflow.com/users/3142209/gutenmorgenuhu"}, "is_accepted": false, "score": 0, "last_activity_date": 1573672660, "creation_date": 1573672660, "answer_id": 58844083, "question_id": 58843979, "link": "https://stackoverflow.com/questions/58843979/missing-kotlin-js-map-file-compiling-kotlin-to-javascript-to-gradle/58844083#58844083", "title": "Missing kotlin.js.map file compiling Kotlin to javascript to gradle", "body": "<p>Silly me. The file WAS created, but it was not copied from META-INF because only .js files where copied.</p>\n\n<p>Here is the working implementation of the assembleWeb Task (see the Conditional with path.endsWith</p>\n\n<pre><code>task assembleWeb(type: Sync) {\n    configurations.compile.each { File file -&gt;\n        from(zipTree(file.absolutePath), {\n            includeEmptyDirs = false\n            include { fileTreeElement -&gt;\n                def path = fileTreeElement.path\n                (path.endsWith(\".js\") || path.endsWith(\".map\")) &amp;&amp; (path.startsWith(\"META-INF/resources/\") || !path.startsWith(\"META-INF/\"))\n            }\n        })\n    }\n    compileKotlin2Js {\n        kotlinOptions.outputFile = \"${projectDir}/web/output.js\"\n        kotlinOptions.moduleKind = \"plain\"\n        kotlinOptions.sourceMap = true\n        kotlinOptions.sourceMapEmbedSources = \"always\"\n\n\n    }\n\n    from compileKotlin2Js.destinationDir\n    into \"${projectDir}/web/js\"\n    dependsOn classes\n}\n</code></pre>\n"}], "owner": {"reputation": 2201, "user_id": 3142209, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/dCJiQ.jpg?s=128&g=1", "display_name": "gutenmorgenuhu", "link": "https://stackoverflow.com/users/3142209/gutenmorgenuhu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 182, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573672660, "creation_date": 1573672189, "question_id": 58843979, "link": "https://stackoverflow.com/questions/58843979/missing-kotlin-js-map-file-compiling-kotlin-to-javascript-to-gradle", "title": "Missing kotlin.js.map file compiling Kotlin to javascript to gradle", "body": "<p>I compile Kotlin to JS and it works quite well, but the Browser always shows the error:</p>\n\n<p>in the console log.</p>\n\n<blockquote>\n  <p>Failed to load resource: the server responded with a status of 404 (Not Found)\n  <a href=\"http://localhost:63342/engineEmi/web/js/kotlin.js.map\" rel=\"nofollow noreferrer\">http://localhost:63342/engineEmi/web/js/kotlin.js.map</a></p>\n</blockquote>\n\n<p>This is my <strong>build.gradle</strong> file:</p>\n\n<pre><code>group 'org.example'\nversion '1.0-SNAPSHOT'\n\nbuildscript {\n    ext.kotlin_version = '1.3.50'\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n    }\n}\napply plugin: 'kotlin2js'\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    compile \"org.jetbrains.kotlin:kotlin-stdlib-js:$kotlin_version\"\n}\n\ntask assembleWeb(type: Sync) {\n    configurations.compile.each { File file -&gt;\n        from(zipTree(file.absolutePath), {\n            includeEmptyDirs = false\n            include { fileTreeElement -&gt;\n                def path = fileTreeElement.path\n                path.endsWith(\".js\") &amp;&amp; (path.startsWith(\"META-INF/resources/\") ||\n                        !path.startsWith(\"META-INF/\"))\n            }\n        })\n    }\n    compileKotlin2Js {\n        kotlinOptions.outputFile = \"${projectDir}/web/output.js\"\n        kotlinOptions.moduleKind = \"plain\"\n        kotlinOptions.sourceMap = true\n        kotlinOptions.sourceMapEmbedSources = \"always\"\n\n\n    }\n\n    from compileKotlin2Js.destinationDir\n    into \"${projectDir}/web/js\"\n    dependsOn classes\n}\n\ntask copyHTMLFolder(type: Copy) {\n    dependsOn assembleWeb\n    from file(\"src/html/\")\n    into file(\"${projectDir}/web/\")\n}\n\ntask openUrlInBrowser {\n    dependsOn copyHTMLFolder\n    doLast {\n        java.awt.Desktop.desktop.browse \"http://localhost:63342/engineEmi/web/index.html\".toURI()\n    }\n}\n\nassemble.dependsOn assembleWeb\n\nsourceSets {\n    main.kotlin.srcDirs += 'src/'\n    main.java.srcDirs += 'src/'\n}\n</code></pre>\n\n<p>How can I let gradle generate the kotlin.ja.map file?</p>\n\n<p>Kind regards</p>\n"}, {"tags": ["android", "kotlin", "layout", "settings", "preferencescreen"], "comments": [{"owner": {"reputation": 750, "user_id": 1783734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/169c977d7c71e35679d4b1e1a5cf8bfc?s=128&d=identicon&r=PG", "display_name": "MFazio23", "link": "https://stackoverflow.com/users/1783734/mfazio23"}, "edited": false, "score": 0, "creation_date": 1573707212, "post_id": 58843842, "comment_id": 103972247, "body": "Is everything displaying as you&#39;d expect without <code>setContentView(...)</code> in <code>SettingsActivity</code>? <code>setContentView(R.layout.settings_activity)</code>"}, {"owner": {"reputation": 11, "user_id": 5887298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffad464a7c9b169c7610d3966ad12ce1?s=128&d=identicon&r=PG&f=1", "display_name": "AlanJ", "link": "https://stackoverflow.com/users/5887298/alanj"}, "reply_to_user": {"reputation": 750, "user_id": 1783734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/169c977d7c71e35679d4b1e1a5cf8bfc?s=128&d=identicon&r=PG", "display_name": "MFazio23", "link": "https://stackoverflow.com/users/1783734/mfazio23"}, "edited": false, "score": 0, "creation_date": 1573748494, "post_id": 58843842, "comment_id": 103993587, "body": "@MFazio23 Everything is displaying, except for the gap on top, that&#39;s the only thing that is wrong"}], "owner": {"reputation": 11, "user_id": 5887298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffad464a7c9b169c7610d3966ad12ce1?s=128&d=identicon&r=PG&f=1", "display_name": "AlanJ", "link": "https://stackoverflow.com/users/5887298/alanj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573671581, "creation_date": 1573671581, "question_id": 58843842, "link": "https://stackoverflow.com/questions/58843842/i-have-a-gap-on-top-of-my-preferences-fragment-dunno-what-causes-it", "title": "I have a gap on top of my preferences fragment, dunno what causes it", "body": "<p>I followed this guide <a href=\"https://developer.android.com/guide/topics/ui/settings\" rel=\"nofollow noreferrer\">https://developer.android.com/guide/topics/ui/settings</a> to create my preferences page, but when I navigate to my settings page, I get an empty row in my settings fragment just before the preferencescreen items, like in the picture <a href=\"https://imgur.com/a/KbVrIHr\" rel=\"nofollow noreferrer\">https://imgur.com/a/KbVrIHr</a></p>\n\n<p>This is my code;</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>class SettingsActivity  : AppCompatActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        supportFragmentManager\n            .beginTransaction()\n            .replace(R.id.settings_container, SettingsFragment())\n            .commit()\n    }\n}\n</code></pre>\n\n<pre class=\"lang-java prettyprint-override\"><code>class SettingsFragment : PreferenceFragmentCompat() {\n    override fun onCreatePreferences(savedInstanceState: Bundle?, rootKey: String?) {\n        addPreferencesFromResource(R.xml.preferences)\n    }\n\n}\n</code></pre>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:id=\"@+id/settings_container\"\n    android:orientation=\"vertical\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".ui.actionbar.settings.SettingsActivity\"&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;androidx.preference.PreferenceScreen\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"&gt;\n\n    &lt;PreferenceCategory\n        app:iconSpaceReserved=\"false\"\n        app:title=\"Theme\"&gt;\n\n        &lt;SwitchPreferenceCompat\n            app:iconSpaceReserved=\"false\"\n            app:key=\"switch\"\n            app:summary=\"Enable dark theme.\"\n            app:title=\"Dark Theme\" /&gt;\n    &lt;/PreferenceCategory&gt;\n\n&lt;/androidx.preference.PreferenceScreen&gt;\n</code></pre>\n"}, {"tags": ["android", "gradle", "kotlin", "module"], "answers": [{"comments": [{"owner": {"reputation": 1084, "user_id": 5459777, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/JMCBr.png?s=128&g=1", "display_name": "nuhkoca", "link": "https://stackoverflow.com/users/5459777/nuhkoca"}, "edited": false, "score": 0, "creation_date": 1573680062, "post_id": 58845685, "comment_id": 103965175, "body": "Thanks for your reply Giorgos. Android library and Java library are not identical. In this case I want to add a Java module in my project. However, it doesn&#39;t include dependencies. I will just store classes for other modules. No more."}, {"owner": {"reputation": 1557, "user_id": 3330058, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/C010X.png?s=128&g=1", "display_name": "Giorgos Neokleous", "link": "https://stackoverflow.com/users/3330058/giorgos-neokleous"}, "reply_to_user": {"reputation": 1084, "user_id": 5459777, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/JMCBr.png?s=128&g=1", "display_name": "nuhkoca", "link": "https://stackoverflow.com/users/5459777/nuhkoca"}, "edited": false, "score": 0, "creation_date": 1573680457, "post_id": 58845685, "comment_id": 103965353, "body": "@nuhkoca Android libraries can have java modules where java modules cannot have android module dependencies. I will suggest you make the change and run the library to see that it will work."}, {"owner": {"reputation": 1084, "user_id": 5459777, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/JMCBr.png?s=128&g=1", "display_name": "nuhkoca", "link": "https://stackoverflow.com/users/5459777/nuhkoca"}, "edited": false, "score": 0, "creation_date": 1573684236, "post_id": 58845685, "comment_id": 103966892, "body": "Thanks for reply. May I ask that, I am unable to add any dependencies to my Java Library? You mean that? I don&#39;t want a library which has resources, manifests or something like that."}, {"owner": {"reputation": 1600, "user_id": 1292745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGKY6.gif?s=128&g=1", "display_name": "gpunto", "link": "https://stackoverflow.com/users/1292745/gpunto"}, "edited": false, "score": 0, "creation_date": 1573684369, "post_id": 58845685, "comment_id": 103966945, "body": "You cannot add Android dependencies to a Java library"}, {"owner": {"reputation": 1557, "user_id": 3330058, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/C010X.png?s=128&g=1", "display_name": "Giorgos Neokleous", "link": "https://stackoverflow.com/users/3330058/giorgos-neokleous"}, "reply_to_user": {"reputation": 1084, "user_id": 5459777, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/JMCBr.png?s=128&g=1", "display_name": "nuhkoca", "link": "https://stackoverflow.com/users/5459777/nuhkoca"}, "edited": false, "score": 0, "creation_date": 1573684518, "post_id": 58845685, "comment_id": 103966994, "body": "@nuhkoca I still don&#39;t understand what you are trying to do. The dependencies you are trying to add &quot;androidx.X.X:x.x.x&quot; are obviously android ones. With a pure java library this is not possible. You would need to replace your &quot;apply plugin&quot; with the one posted in my answer. I recommend you reading the basic stuff before getting started."}, {"owner": {"reputation": 1084, "user_id": 5459777, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/JMCBr.png?s=128&g=1", "display_name": "nuhkoca", "link": "https://stackoverflow.com/users/5459777/nuhkoca"}, "edited": false, "score": 0, "creation_date": 1573695477, "post_id": 58845685, "comment_id": 103969658, "body": "@GiorgosNeokleous ahh ok, I got your point, thanks it is now resolved. Do you know what kind of dependencies can I add to Java Library?"}, {"owner": {"reputation": 1557, "user_id": 3330058, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/C010X.png?s=128&g=1", "display_name": "Giorgos Neokleous", "link": "https://stackoverflow.com/users/3330058/giorgos-neokleous"}, "edited": false, "score": 0, "creation_date": 1573719256, "post_id": 58845685, "comment_id": 103976545, "body": "Yes, you can add only pure java dependencies which do not have direct or transitive android dependencies"}, {"owner": {"reputation": 1084, "user_id": 5459777, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/JMCBr.png?s=128&g=1", "display_name": "nuhkoca", "link": "https://stackoverflow.com/users/5459777/nuhkoca"}, "edited": false, "score": 0, "creation_date": 1573744238, "post_id": 58845685, "comment_id": 103990837, "body": "Thanks for your help!"}], "tags": [], "owner": {"reputation": 1557, "user_id": 3330058, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/C010X.png?s=128&g=1", "display_name": "Giorgos Neokleous", "link": "https://stackoverflow.com/users/3330058/giorgos-neokleous"}, "is_accepted": true, "score": 4, "last_activity_date": 1573679556, "creation_date": 1573679556, "answer_id": 58845685, "question_id": 58843758, "link": "https://stackoverflow.com/questions/58843758/library-module-doesnt-include-dependencies-in-android/58845685#58845685", "title": "Library module doesn&#39;t include dependencies in Android", "body": "<p>If this is not the entirety of your library's gradle file, then you are missing the android plugins. </p>\n\n<p>Please add the following at the top of your library's gradle file.</p>\n\n<pre><code>apply plugin: \"com.android.library\"\n</code></pre>\n\n<p>I will also recommend having a look at the documentation: <a href=\"https://developer.android.com/studio/projects/android-library\" rel=\"nofollow noreferrer\">https://developer.android.com/studio/projects/android-library</a></p>\n"}], "owner": {"reputation": 1084, "user_id": 5459777, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/JMCBr.png?s=128&g=1", "display_name": "nuhkoca", "link": "https://stackoverflow.com/users/5459777/nuhkoca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 689, "favorite_count": 1, "accepted_answer_id": 58845685, "answer_count": 1, "score": 2, "last_activity_date": 1573679556, "creation_date": 1573671177, "last_edit_date": 1573671882, "question_id": 58843758, "link": "https://stackoverflow.com/questions/58843758/library-module-doesnt-include-dependencies-in-android", "title": "Library module doesn&#39;t include dependencies in Android", "body": "<p>I am working on a <code>multi-module</code> project and this project should have a <code>Java Library</code> module called <code>test-shared</code> to provide common test classes. However, I am facing an issue in which my module doesn't recognize dependencies and I cannot write my classes.</p>\n\n<p>Things have been done</p>\n\n<ol>\n<li>Enable offline mode and disable again.</li>\n<li>Delete <code>.gradle</code> folder and sync.</li>\n<li>Googled identical issues.</li>\n<li>Invalidate cache &amp; restart.</li>\n</ol>\n\n<p>As a result, I don't have a working project. Your help would be welcome.</p>\n\n<blockquote>\n  <p>build.gradle</p>\n</blockquote>\n\n<pre><code>apply plugin: 'java-library'\n\ndependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n\n    implementation \"org.jetbrains.kotlinx:kotlinx-coroutines-test:1.3.2\"\n    implementation \"androidx.test:rules:1.2.0\"\n    implementation \"androidx.lifecycle:lifecycle-runtime:2.1.0\"\n    implementation \"androidx.lifecycle:lifecycle-extensions:2.1.0\"\n    implementation \"androidx.lifecycle:lifecycle-livedata-ktx:2.1.0\"\n}\n\nsourceCompatibility = \"8\"\ntargetCompatibility = \"8\"\n</code></pre>\n\n<blockquote>\n  <p>Example class</p>\n</blockquote>\n\n<pre><code>class Co {\n\n    val a = LiveData&lt;Co&gt;()\n    val b = Observer&lt;Co&gt;()\n}\n</code></pre>\n\n<p>In this example, neither <code>LiveData</code> nor <code>Observer</code> are recognized. Could you please help me fix this weird issue?</p>\n\n<p>Thanks,</p>\n"}, {"tags": ["kotlin", "annotations"], "comments": [{"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1573680559, "post_id": 58843738, "comment_id": 103965396, "body": "This would only be useful at compile time. I think this could be achieved with kapt."}], "answers": [{"tags": [], "owner": {"reputation": 27113, "user_id": 1993204, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/n4qZa.jpg?s=128&g=1", "display_name": "Bartek Lipinski", "link": "https://stackoverflow.com/users/1993204/bartek-lipinski"}, "is_accepted": true, "score": 1, "last_activity_date": 1573725749, "creation_date": 1573725749, "answer_id": 58854035, "question_id": 58843738, "link": "https://stackoverflow.com/questions/58843738/using-kotlin-expression-annotations/58854035#58854035", "title": "Using kotlin expression annotations", "body": "<p>Specifying <code>@Target(AnnotationTarget.EXPRESSION)</code> is just a way of telling the compiler where the user of the annotation can put it. </p>\n\n<p>It does not do anything on it's own rather than that.</p>\n\n<p>So e.g.</p>\n\n<pre><code>@Target(AnnotationTarget.EXPRESSION)\n@Retention(AnnotationRetention.SOURCE)\nannotation class Something\n\n\n// compiler will fail here:\n@Something class Foo {\n\n    // but will succeed here:\n    val a = @Something \"value#1\"\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Unless you're writing an Annotation Processor (so a thing that looks for Annotations and does something with them), your annotations have just informational value.</strong> They are just a signal to other devs (or future You) of something.</p>\n\n<pre><code>@Target(AnnotationTarget.EXPRESSION)\n@Retention(AnnotationRetention.SOURCE)\nannotation class UglyAndOldCode\n\nval a = @UglyAndOldCode \"this is something old and requires refactoring\"\n</code></pre>\n\n<hr>\n\n<p>If you want to implement what you've stated in your question you would have to create an Annotation Processor that checks expressions marked with <code>MyExpr</code> for the condition that you've specified.</p>\n"}], "owner": {"reputation": 1786, "user_id": 2419207, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2c78050166e151a98887f8e98169e0a8?s=128&d=identicon&r=PG&f=1", "display_name": "iljau", "link": "https://stackoverflow.com/users/2419207/iljau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 58854035, "answer_count": 1, "score": 4, "last_activity_date": 1573725749, "creation_date": 1573671074, "question_id": 58843738, "link": "https://stackoverflow.com/questions/58843738/using-kotlin-expression-annotations", "title": "Using kotlin expression annotations", "body": "<p>Kotlin allows to annotate expressions. It is however unclear, how such annotations may be useful and how to use them. </p>\n\n<p>Let's say in following example I would like to check, that string contains number specified in @MyExpr annotation. Can this be achieved and how?</p>\n\n<pre><code>@Target(AnnotationTarget.EXPRESSION)\n@Retention(AnnotationRetention.SOURCE)\nannotation class MyExpr(val i: Int) {}\n\nfun someFn() {\n    val a = @MyExpr(1) \"value#1\";\n    val b = @MyExpr(2) \"value#2\";\n}\n</code></pre>\n"}, {"tags": ["list", "kotlin", "null", "nullable"], "comments": [{"owner": {"reputation": 1307, "user_id": 4681367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83a0416184c6ffe72aac807e2feac5ce?s=128&d=identicon&r=PG&f=1", "display_name": "Lionel Briand", "link": "https://stackoverflow.com/users/4681367/lionel-briand"}, "edited": false, "score": 1, "creation_date": 1573670849, "post_id": 58843539, "comment_id": 103961123, "body": "You have to define the type (<code>List&lt;String&gt;</code>), then add a question mark (<code>?</code>) to the end. <code>List&lt;String&gt;?</code> look at the <a href=\"https://kotlinlang.org/docs/reference/null-safety.html\" rel=\"nofollow noreferrer\">null safety</a>  documentation"}, {"owner": {"reputation": 174, "user_id": 7507215, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EmkH8.png?s=128&g=1", "display_name": "fisio", "link": "https://stackoverflow.com/users/7507215/fisio"}, "reply_to_user": {"reputation": 1307, "user_id": 4681367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83a0416184c6ffe72aac807e2feac5ce?s=128&d=identicon&r=PG&f=1", "display_name": "Lionel Briand", "link": "https://stackoverflow.com/users/4681367/lionel-briand"}, "edited": false, "score": 0, "creation_date": 1573671191, "post_id": 58843539, "comment_id": 103961267, "body": "thank you so much!"}], "answers": [{"tags": [], "owner": {"reputation": 723, "user_id": 638162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/776e672e155e26a29968b4e031dcf716?s=128&d=identicon&r=PG", "display_name": "wseme", "link": "https://stackoverflow.com/users/638162/wseme"}, "is_accepted": true, "score": 1, "last_activity_date": 1573671341, "creation_date": 1573671341, "answer_id": 58843797, "question_id": 58843539, "link": "https://stackoverflow.com/questions/58843539/how-to-declare-nullable-list/58843797#58843797", "title": "how to declare nullable list", "body": "<pre><code>var frase1 : List&lt;String&gt;? = null\n</code></pre>\n"}], "owner": {"reputation": 174, "user_id": 7507215, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EmkH8.png?s=128&g=1", "display_name": "fisio", "link": "https://stackoverflow.com/users/7507215/fisio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 58843797, "answer_count": 1, "score": 0, "last_activity_date": 1573671341, "creation_date": 1573670301, "last_edit_date": 1573670705, "question_id": 58843539, "link": "https://stackoverflow.com/questions/58843539/how-to-declare-nullable-list", "title": "how to declare nullable list", "body": "<p>i have to declare a class parameter of type nullable list(contaning String) with list default value= null</p>\n\n<pre><code>data class Riga(\nvar frase1 : List?&lt;String&gt;= null\n)\n</code></pre>\n\n<p>this is raising: </p>\n\n<pre><code>Property getter or setter expected \n\nOne type argument expected for interface List&lt;out E&gt;\n</code></pre>\n"}, {"tags": ["intellij-idea", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 348241, "user_id": 104891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ff652685122f4500dd4f3c21fb32da2?s=128&d=identicon&r=PG", "display_name": "CrazyCoder", "link": "https://stackoverflow.com/users/104891/crazycoder"}, "is_accepted": true, "score": 1, "last_activity_date": 1573670866, "creation_date": 1573670866, "answer_id": 58843678, "question_id": 58843502, "link": "https://stackoverflow.com/questions/58843502/cannot-find-kotlin-code-format-in-intellij/58843678#58843678", "title": "Cannot find Kotlin code format in IntelliJ", "body": "<p>Remove <code>reforma</code> from the settings filter on the top left. You should see all the languages listed:</p>\n\n<p><a href=\"https://i.stack.imgur.com/WLT2W.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WLT2W.png\" alt=\"Kotlin\"></a></p>\n\n<p>Also check you have Kotlin plug-in enabled and installed.</p>\n"}], "owner": {"reputation": 35, "user_id": 11921629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d34911def39fc3af03a4dcd1c282b8e?s=128&d=identicon&r=PG&f=1", "display_name": "Uknowledge_1", "link": "https://stackoverflow.com/users/11921629/uknowledge-1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 58843678, "answer_count": 1, "score": 1, "last_activity_date": 1573670866, "creation_date": 1573670122, "question_id": 58843502, "link": "https://stackoverflow.com/questions/58843502/cannot-find-kotlin-code-format-in-intellij", "title": "Cannot find Kotlin code format in IntelliJ", "body": "<p>Does anyone know why I don't see the Kotlin in the settings<a href=\"https://i.stack.imgur.com/dFO1M.png\" rel=\"nofollow noreferrer\"> (settings image)</a>. Or how I can change Kotlin code formatting in IntelliJ?</p>\n"}, {"tags": ["android", "kotlin", "bluetooth", "bluetooth-lowenergy"], "answers": [{"tags": [], "owner": {"reputation": 1607, "user_id": 345606, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/SkiJH.jpg?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/345606/kevin"}, "is_accepted": false, "score": 0, "last_activity_date": 1576818487, "creation_date": 1576818487, "answer_id": 59420103, "question_id": 58843327, "link": "https://stackoverflow.com/questions/58843327/unable-to-connect-to-ble-device-using-custom-app-without-workaround-using-nrf-co/59420103#59420103", "title": "Unable to Connect to BLE Device using Custom App without Workaround using nRF Connect", "body": "<p>Ah, the dreaded GATT 133 error.  This typically indicates that there is something wrong in Android's BLE stack, and resetting Bluetooth - and WiFi on older devices - will often resolve.</p>\n\n<p>Your workaround works because Android allows a Bluetooth device, connected in one app, to be shared across other apps.  Seems like an awful security vulnerability, but is expected behavior.</p>\n\n<p>Judging from your experience, however, it's entirely possible the peripheral has an unexpected configuration.  Perhaps try out <a href=\"https://github.com/uber/RxCentralBle\" rel=\"nofollow noreferrer\">RxCentralBle</a> - Uber's library for Bluetooth LE integrations - sample app and see if that works for connecting to your device.  The sample app and library are open source, so you can adapt however you see fit.</p>\n\n<p>Full disclosure - I am the author and maintainer of RxCentralBle.</p>\n"}, {"comments": [{"owner": {"reputation": 1607, "user_id": 345606, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/SkiJH.jpg?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/345606/kevin"}, "edited": false, "score": 0, "creation_date": 1578944212, "post_id": 59495984, "comment_id": 105596651, "body": "133 error is a connection error, not related to scanning."}], "tags": [], "owner": {"reputation": 403, "user_id": 2723578, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JjvcH.jpg?s=128&g=1", "display_name": "btelman96", "link": "https://stackoverflow.com/users/2723578/btelman96"}, "is_accepted": false, "score": 0, "last_activity_date": 1577420980, "creation_date": 1577420980, "answer_id": 59495984, "question_id": 58843327, "link": "https://stackoverflow.com/questions/58843327/unable-to-connect-to-ble-device-using-custom-app-without-workaround-using-nrf-co/59495984#59495984", "title": "Unable to Connect to BLE Device using Custom App without Workaround using nRF Connect", "body": "<p>Try setting the report delay to 0.</p>\n\n<p>Your setup should now look like this</p>\n\n<pre><code>val mSettings = ScanSettings.Builder().\n            setScanMode(ScanSettings.SCAN_MODE_LOW_LATENCY).\n            setReportDelay(0).\n            build()\n</code></pre>\n\n<p>You will also need to start using the single results callback instead of <code>onBatchScanResults</code>, which will require the list of results to be stored elsewhere.</p>\n\n<pre><code>override fun onScanResult(callbackType: Int, result: ScanResult?) {\n//add to the list\n//adapter.notifyDataSetChanged() if needed\n}\n</code></pre>\n\n<p>I was having this issue in one of my apps and it seemed to be the fix. </p>\n\n<p>If presenting a list to the user, it does seem like this makes the list update too quickly for a click to go through, so you may want to add your own delayed update without using <code>setReportDelay</code> if it becomes an issue</p>\n"}], "owner": {"reputation": 21, "user_id": 8056231, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8xo9rHiRpBg/AAAAAAAAAAI/AAAAAAACPFQ/oJE3g2141Vg/photo.jpg?sz=128", "display_name": "Riley", "link": "https://stackoverflow.com/users/8056231/riley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 886, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1577420980, "creation_date": 1573669420, "last_edit_date": 1573669526, "question_id": 58843327, "link": "https://stackoverflow.com/questions/58843327/unable-to-connect-to-ble-device-using-custom-app-without-workaround-using-nrf-co", "title": "Unable to Connect to BLE Device using Custom App without Workaround using nRF Connect", "body": "<p><strong>Summary and Background of Problem</strong><br></p>\n\n<p>As part of a college project, we are needing to connect to a Bluetooth LE module (BL654) with a custom app to update characteristics.<br></p>\n\n<p>The issue is that I am unable to connect to our module without first doing a workaround. I am able to search for devices without issue and our module shows in the search. I would like the app to not have to rely on another app to work properly.</p>\n\n<p>On a clean boot and clean OS install of the phone (Pixel 3XL / Pixel 3 / LG G5), I am unable to connect to our module. I am however able to connect to other BLE devices such as a Raspberry Pi and HTV Vive Base Stations.</p>\n\n<p>The error I receive in the Android Studio Logcat is:<br></p>\n\n<pre><code>D/BluetoothGatt: onClientConnectionState() - status=133 clientIf=7 device=C2:A1:E0:B3:69:54\n</code></pre>\n\n<p>After then connecting to a <strong>different</strong> device using nRF Connect I am then able to connect to our module in nRF Connect, and subsequently our module within my app. Nordic makes both the firmware running on the board and nRF Connect. This leads me to believe something special is happening between the two?</p>\n\n<p>I am using the standard Android libraries to make the connection and have also tried using RxAndroidBle.<br></p>\n\n<p>I have researched for close to a month about this error and possible solutions and was unable to resolve it. Any guidance would be appreciated.<br></p>\n\n<p>Here is a <a href=\"https://drive.google.com/file/d/1zGIgnC592OXOGj8_nVTP4N5AAijkEP-r/view?usp=sharing\" rel=\"nofollow noreferrer\">Logcat</a> of a failed connection attempt. Here is a <a href=\"https://drive.google.com/file/d/1mpb_x4BcSTQ8TFPvUKaPG4-ONc1qhrB8/view?usp=sharing\" rel=\"nofollow noreferrer\">Logcat</a> of a successful connection attempt after using the workaround.<br></p>\n\n<p>Below I will show snippets of the relevant code. If more code is required I am happy to share.<br></p>\n\n<p><strong>Code Snippets</strong><br></p>\n\n<p>I have code split between a Kotlin Class file and MainActivity.kt, to my knowledge I am passing all the correct parameters between the two files. I am a beginner to Kotlin, so try to take it easy on me ;)<br></p>\n\n<p>Finding Bluetooth Devices (Inside mBluetoothLEAdapter.kt):</p>\n\n<pre><code>fun findBluetoothDevices(mBluetoothAdapter: BluetoothAdapter?){\n        // Get and instance of the Bluetooth Low Energy Scanner\n        scanner = mBluetoothAdapter?.bluetoothLeScanner\n\n        // Create search settings object\n        val mSettings = ScanSettings.Builder().\n            setScanMode(ScanSettings.SCAN_MODE_LOW_LATENCY).\n            setReportDelay(reportDelay).\n            build()\n\n        // Create a scanning filter\n        val mFilter = ScanFilter.Builder().setDeviceName(\"AEsir ADC Test\").build()\n        val scannerFilter = arrayListOf&lt;ScanFilter&gt;()\n        scannerFilter.add(mFilter)\n\n        // Stop previous scan if there was one\n        stopScanningBluetoothDevices()\n\n        //Start new scanner\n        tools.showToast(\"Scanning...\")\n        scanner?.startScan(null, mSettings, mCallback)\n    }\n</code></pre>\n\n<p><br></p>\n\n<p>Scan Callback (Inside mBluetoothLEAdapter.kt):</p>\n\n<pre><code>inner class MCallBack: ScanCallback() {\n        override fun onScanResult(callbackType: Int, result: ScanResult?) {\n            super.onScanResult(callbackType, result)\n            stopScanningBluetoothDevices()\n            tools.showToast(\"Single Result Found!\")\n        }\n\n        override fun onScanFailed(errorCode: Int) {\n            super.onScanFailed(errorCode)\n            stopScanningBluetoothDevices()\n            tools.showToast(\"Error on Scan!\")\n            tools.showToast(errorCode.toString())\n        }\n\n        override fun onBatchScanResults(results: MutableList&lt;ScanResult&gt;?) {\n            super.onBatchScanResults(results)\n            stopScanningBluetoothDevices()\n            tools.showToast(\"Batch Results Found!\")\n            scanResults = results\n            val mAdapter = DeviceListAdapter(activity, scanResults)\n            val deviceList = activity.findViewById&lt;ListView&gt;(R.id.device_list)\n            deviceList.adapter = mAdapter\n        }\n    }\n</code></pre>\n\n<p><br></p>\n\n<p>Connecting to a Device (Inside MainActivity.kt):</p>\n\n<pre><code>// Runs when an item in the Device List is pressed.\n    // This initiates a GATT connection to the selected device.\n    override fun onListPressed(): AdapterView.OnItemClickListener? {\n        return AdapterView.OnItemClickListener { parent, _, position, _ -&gt;\n\n            if (bluetoothGatt != null) {\n                bluetoothGatt?.disconnect()\n                bluetoothGatt?.close()\n            }\n\n            val clickedItem = parent.getItemAtPosition(position) as ScanResult\n            //val device = clickedItem.device\n            val address = clickedItem.device.address\n            tools.showToast(\"Connecting to: $address\")\n\n            // CONNECTION NOT WORKING. HAVE TO USE nRF Connect to make it work\n            bluetoothGatt = clickedItem.device.connectGatt(applicationContext, false, mGattCallback, BluetoothDevice.TRANSPORT_LE)\n        }\n    }\n</code></pre>\n\n<p><br></p>\n\n<p>GattCallback (Inside MainActivity.kt):</p>\n\n<pre><code>inner class GattCallback : BluetoothGattCallback() {\n        override fun onConnectionStateChange(gatt: BluetoothGatt, status: Int, newState: Int) {\n            super.onConnectionStateChange(gatt, status, newState)\n            //If we connected to the GATT server find services on device\n            if (status == BluetoothGatt.GATT_SUCCESS) {\n                gatt.discoverServices()\n            }\n            else if (status == BluetoothGatt.STATE_CONNECTING) {\n                tools.showToast(\"Connecting I am\")\n            }\n            else if (status == BluetoothGatt.STATE_DISCONNECTED) {\n                bluetoothGatt?.close()\n                bluetoothGatt = null\n                tools.showToast(\"I got here and closed the connection\")\n            }\n        }\n\n        override fun onServicesDiscovered(gatt: BluetoothGatt?, status: Int) {\n            super.onServicesDiscovered(gatt, status)\n            bluetoothServices = gatt?.services\n        }\n\n        override fun onCharacteristicChanged(gatt: BluetoothGatt, characteristic: BluetoothGattCharacteristic) {\n            //\"Notification\"\n        }\n\n        override fun onCharacteristicWrite(gatt: BluetoothGatt?, characteristic: BluetoothGattCharacteristic?, status: Int) {\n            super.onCharacteristicWrite(gatt, characteristic, status)\n\n            //Confirm that the characteristic was actually changed\n            tools.showToast(\"Characteristic was written!\")\n        }\n\n        override fun onCharacteristicRead(gatt: BluetoothGatt, characteristic: BluetoothGattCharacteristic, status: Int) {\n\n        }\n\n        override fun onDescriptorRead(gatt: BluetoothGatt, descriptor: BluetoothGattDescriptor, status: Int) {\n\n        }\n    }\n</code></pre>\n\n<p><br></p>\n\n<blockquote>\n  <p>Thank you for any help you can offer :)</p>\n</blockquote>\n"}, {"tags": ["java", "gradle", "kotlin"], "comments": [{"owner": {"reputation": 10269, "user_id": 3950370, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b44be8311e04ebbf6d1d153e0aae4a69?s=128&d=identicon&r=PG", "display_name": "Lukas K&#246;rfer", "link": "https://stackoverflow.com/users/3950370/lukas-k%c3%b6rfer"}, "edited": false, "score": 0, "creation_date": 1573727076, "post_id": 58843282, "comment_id": 103980845, "body": "Did you declare it as a buildscript dependency?"}, {"owner": {"reputation": 1074, "user_id": 7357833, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6585dc473a049a2853663e3d90c47ded?s=128&d=identicon&r=PG&f=1", "display_name": "Andy Cribbens", "link": "https://stackoverflow.com/users/7357833/andy-cribbens"}, "reply_to_user": {"reputation": 10269, "user_id": 3950370, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b44be8311e04ebbf6d1d153e0aae4a69?s=128&d=identicon&r=PG", "display_name": "Lukas K&#246;rfer", "link": "https://stackoverflow.com/users/3950370/lukas-k%c3%b6rfer"}, "edited": false, "score": 0, "creation_date": 1573729508, "post_id": 58843282, "comment_id": 103982402, "body": "I tried that initially bit it wasn&#39;t accessible. The issue turned out to be caused by the jar file. Other jar files worked fine. I will reply to this question just in case anyone else has this question."}], "owner": {"reputation": 1074, "user_id": 7357833, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6585dc473a049a2853663e3d90c47ded?s=128&d=identicon&r=PG&f=1", "display_name": "Andy Cribbens", "link": "https://stackoverflow.com/users/7357833/andy-cribbens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573729619, "creation_date": 1573669222, "last_edit_date": 1573670374, "question_id": 58843282, "link": "https://stackoverflow.com/questions/58843282/in-a-custom-task-in-gradle-how-can-i-use-a-class-from-a-dependency", "title": "In a custom task in Gradle how can I use a class from a dependency", "body": "<p>I have a custom gradle kotlin task like below. How can I access the SomeLibraryClass class. That class lives in a jar file which I have declared as a dependency but it's not visible to the task.</p>\n\n<pre><code>tasks.register(\"my-task\") {\n    doLast {\n        SomeLibraryClass\n    }\n}\n</code></pre>\n"}, {"tags": ["kotlin", "netty", "ktor"], "comments": [{"owner": {"reputation": 2884, "user_id": 5562901, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/tVhEf.jpg?s=128&g=1", "display_name": "Saurabh Padwekar", "link": "https://stackoverflow.com/users/5562901/saurabh-padwekar"}, "edited": false, "score": 0, "creation_date": 1606797884, "post_id": 58842957, "comment_id": 115064129, "body": "Did you find the solution ?"}, {"owner": {"reputation": 847, "user_id": 10763322, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wpEXo.jpg?s=128&g=1", "display_name": "Nikita Tukkel", "link": "https://stackoverflow.com/users/10763322/nikita-tukkel"}, "reply_to_user": {"reputation": 2884, "user_id": 5562901, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/tVhEf.jpg?s=128&g=1", "display_name": "Saurabh Padwekar", "link": "https://stackoverflow.com/users/5562901/saurabh-padwekar"}, "edited": false, "score": 0, "creation_date": 1607263865, "post_id": 58842957, "comment_id": 115211848, "body": "@SaurabhPadwekar, switching from Netty to Jetty was enough for me in that case."}, {"owner": {"reputation": 2884, "user_id": 5562901, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/tVhEf.jpg?s=128&g=1", "display_name": "Saurabh Padwekar", "link": "https://stackoverflow.com/users/5562901/saurabh-padwekar"}, "edited": false, "score": 0, "creation_date": 1607377261, "post_id": 58842957, "comment_id": 115249035, "body": "Thanks for your response. So, after changing Netty to Jetty, Whether this code <code>call.receiveMultipart().forEachPart {}</code> was able to release buffer? I know I am asking too much, but will it be possible for you to share the code snippet to show how you manage to receive multipart chunks of bigger files without causing the memory to leak. Thank you."}, {"owner": {"reputation": 847, "user_id": 10763322, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wpEXo.jpg?s=128&g=1", "display_name": "Nikita Tukkel", "link": "https://stackoverflow.com/users/10763322/nikita-tukkel"}, "reply_to_user": {"reputation": 2884, "user_id": 5562901, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/tVhEf.jpg?s=128&g=1", "display_name": "Saurabh Padwekar", "link": "https://stackoverflow.com/users/5562901/saurabh-padwekar"}, "edited": false, "score": 0, "creation_date": 1607433912, "post_id": 58842957, "comment_id": 115266132, "body": "@SaurabhPadwekar, implementation in Jetty is quite different, there is no problem with direct memory. It is 25% slower though. Also I have to use Apache FileUpload instead of ktor default CIOMultipartDataBase, because CIOMultipartDataBase saves temporary file to disk during upload which is inappropriate for my service.  The upload code starts with FileUpload().getItemIterator(KtorUploadRequestContext(call.r&zwnj;&#8203;equest)), where FileUpload is from Apache and KtorUploadRequestContext is my very simple implementation of org.apache.commons.fileupload.UploadContext."}], "owner": {"reputation": 847, "user_id": 10763322, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wpEXo.jpg?s=128&g=1", "display_name": "Nikita Tukkel", "link": "https://stackoverflow.com/users/10763322/nikita-tukkel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 547, "favorite_count": 1, "answer_count": 0, "score": 4, "last_activity_date": 1573667858, "creation_date": 1573667858, "question_id": 58842957, "link": "https://stackoverflow.com/questions/58842957/is-it-possible-to-upload-large-files-to-ktor-netty-server", "title": "Is it possible to upload large files to Ktor &amp; Netty server?", "body": "<p>I was making a simple file upload&amp;download service and found out that, as far as I understand, Netty doesn't release direct buffers until request processing is over. As a result, I can't upload bigger files.</p>\n\n<p>I was trying to make sure that the problem is not inside my code, so I created the most simple tiny Ktor application:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>routing {\n    post(\"upload\") {\n        call.receiveMultipart().forEachPart {}\n        call.respond(HttpStatusCode.OK)\n    }\n}\n</code></pre>\n\n<p>The default direct memory size is about 3Gb, to make test simpler I limit it with:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>System.setProperty(\"io.netty.maxDirectMemory\", (10 * 1024 * 1024).toString())\n</code></pre>\n\n<p>before starting the NettyApplicationEngine.</p>\n\n<p>Now if I upload a large file, for example with httpie, I got \"Connection reset\":</p>\n\n<pre><code>http -v --form POST http://localhost:42195/upload file@/tmp/FileStorageLoadTest-test-data1.tmp\n\nhttp: error: ConnectionError: ('Connection aborted.', ConnectionResetError(104, 'Connection reset by peer')) while doing POST request to URL: http://localhost:42195/upload\n</code></pre>\n\n<p>On the server side there is no information about the problem except for the \"java.io.IOException: Broken delimiter occurred\" exception. But if I put the breakpoint in NettyResponsePipeline#processCallFailed, the real exception is: </p>\n\n<pre><code>io.netty.util.internal.OutOfDirectMemoryError: failed to allocate 65536 byte(s) of direct memory (used: 10420231, max: 10485760)\n</code></pre>\n\n<p>It is a pity that this exception is not logged.</p>\n\n<p>Also, I found out that the same code works without problems if I use Jetty engine instead.</p>\n\n<p>Environment:</p>\n\n<pre><code>Ubuntu Linux\nJava 8\nKtor=1.2.5\nnetty-transport-native-epoll=4.1.43.Final \n</code></pre>\n\n<p>(but if Netty started without native-epoll support, the problem is the same)</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1573670530, "post_id": 58842952, "comment_id": 103960990, "body": "Is the whole input space delineated integers? Is the final array always rectangular, or are the rows of variable size?"}, {"owner": {"reputation": 23, "user_id": 9134902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2507124bad4bde2f3bd47dc177f7151?s=128&d=identicon&r=PG&f=1", "display_name": "Garry645", "link": "https://stackoverflow.com/users/9134902/garry645"}, "reply_to_user": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1573682990, "post_id": 58842952, "comment_id": 103966413, "body": "No the array is not space delimited and yes the final array is always rectangular. A sample input would be:                                                              10 20 11111111111111111111 11000000000000000101 11111111111111110000 11111111111111110000 11000000000000000111 00011111111111111111 00111111111111111111 10000000000000001111 11111111111111111111 11111111111111111111    with the spacing representing lines"}, {"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1573683098, "post_id": 58842952, "comment_id": 103966449, "body": "So integers that you read are all from 0-9?"}, {"owner": {"reputation": 23, "user_id": 9134902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2507124bad4bde2f3bd47dc177f7151?s=128&d=identicon&r=PG&f=1", "display_name": "Garry645", "link": "https://stackoverflow.com/users/9134902/garry645"}, "reply_to_user": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1573683142, "post_id": 58842952, "comment_id": 103966469, "body": "No they are just zeroes and ones. To be very specific I am trying to solve this kattis problem: <a href=\"https://open.kattis.com/problems/10kindsofpeople\" rel=\"nofollow noreferrer\">open.kattis.com/problems/10kindsofpeople</a>"}, {"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1573848337, "post_id": 58842952, "comment_id": 104035051, "body": "I just tried it and can&#39;t get mine to do it in time. I was using flood fill, but maybe A* is better. Good luck."}], "answers": [{"tags": [], "owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "is_accepted": true, "score": 0, "last_activity_date": 1573755679, "last_edit_date": 1573755679, "creation_date": 1573740981, "answer_id": 58858870, "question_id": 58842952, "link": "https://stackoverflow.com/questions/58842952/fastest-way-to-read-in-and-print-back-out-a-2d-array-in-kotlin/58858870#58858870", "title": "Fastest way to read in and print back out a 2d array in Kotlin?", "body": "<p>I measure this to be about 4-5 times faster than your method. It iterates Chars rather than splitting each line into Strings for each character.</p>\n\n<pre><code>var rowAndColumn = readLine()!!.split(\" \")\nvar rows = rowAndColumn[0].toInt()\nvar columns = rowAndColumn[1].toInt()\nval board = arrayOfNulls&lt;IntArray?&gt;(rows)\nfor (row in 0 until rows) {\n    board[row] = readLine()!!\n        .asIterable()\n        .mapNotNull {\n            val i = it.toInt() - '0'.toInt()\n            if (i in 0..1) i else null\n        }\n        .toIntArray()\n}\nboard.requireNoNulls()\n</code></pre>\n\n<p>If you you don't mind ending up with an <code>Array&lt;List&lt;Int&gt;&gt;</code> instead of an <code>Array&lt;IntArray&gt;</code>, you can change that out on line 4 and remove the <code>.toIntArray()</code> call for a slight (~5%) improvement.</p>\n\n<p>Caveat...I was reading from a text file, not the console input, so file access may have affected the comparison. Intuition tells me it's possible this would be even faster in comparison if file reading time were removed.</p>\n"}], "owner": {"reputation": 23, "user_id": 9134902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2507124bad4bde2f3bd47dc177f7151?s=128&d=identicon&r=PG&f=1", "display_name": "Garry645", "link": "https://stackoverflow.com/users/9134902/garry645"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 1, "accepted_answer_id": 58858870, "answer_count": 1, "score": 0, "last_activity_date": 1573755679, "creation_date": 1573667854, "question_id": 58842952, "link": "https://stackoverflow.com/questions/58842952/fastest-way-to-read-in-and-print-back-out-a-2d-array-in-kotlin", "title": "Fastest way to read in and print back out a 2d array in Kotlin?", "body": "<p>The following code works for reading in a 2d array and printing it back out in Kotlin, however I imagine that with larger datasets swapping from a string to an int list would be rather slow, so is there a quicker way to do it?</p>\n\n<pre><code>fun main() {\n    var rowAndColumn = readLine()!!.split(\" \")\n    var rows = rowAndColumn[0].toInt()\n    var columns = rowAndColumn[1].toInt()\n    val board = Array(rows) { IntArray(columns).toMutableList() }\n    for (i in 0 until rows) {\n        var stringColumn = readLine()!!.split(\"\").toMutableList()\n        stringColumn.removeAll(listOf(\"\"))\n        var column = stringColumn.map {it.toInt()}.toMutableList()\n        board[i] = column\n\n    }\n    for(i in 0 until rows) {\n        println(board[i].toString())\n    }\n}\n</code></pre>\n"}, {"tags": ["java", "android", "kotlin", "garbage-collection", "kotlin-coroutines"], "answers": [{"comments": [{"owner": {"reputation": 5421, "user_id": 7972699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bED4H.jpg?s=128&g=1", "display_name": "Anmol", "link": "https://stackoverflow.com/users/7972699/anmol"}, "edited": false, "score": 1, "creation_date": 1573668177, "post_id": 58842901, "comment_id": 103959956, "body": "i will look into  <code>RecyclerViewPools</code> but my main aim of this demo app is to check the optimisation of memory when there are huge number&#39;s of ComplexCustomView&#39;s. These View&#39;s can be a part of RecyclerView/ViewPager etc."}, {"owner": {"reputation": 528, "user_id": 1552960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f0b8658a9c8761c7cfad055caed0c0a?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1552960/brandon"}, "reply_to_user": {"reputation": 5421, "user_id": 7972699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bED4H.jpg?s=128&g=1", "display_name": "Anmol", "link": "https://stackoverflow.com/users/7972699/anmol"}, "edited": false, "score": 0, "creation_date": 1573668310, "post_id": 58842901, "comment_id": 103960015, "body": "Okay! If you find a solution please post as I will be interested in how this is solved :)"}, {"owner": {"reputation": 528, "user_id": 1552960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f0b8658a9c8761c7cfad055caed0c0a?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1552960/brandon"}, "reply_to_user": {"reputation": 5421, "user_id": 7972699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bED4H.jpg?s=128&g=1", "display_name": "Anmol", "link": "https://stackoverflow.com/users/7972699/anmol"}, "edited": false, "score": 2, "creation_date": 1573668428, "post_id": 58842901, "comment_id": 103960078, "body": "<a href=\"https://developer.android.com/training/improving-layouts/loading-ondemand\" rel=\"nofollow noreferrer\">developer.android.com/training/improving-layouts/&hellip;</a>"}, {"owner": {"reputation": 5421, "user_id": 7972699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bED4H.jpg?s=128&g=1", "display_name": "Anmol", "link": "https://stackoverflow.com/users/7972699/anmol"}, "edited": false, "score": 0, "creation_date": 1581579954, "post_id": 58842901, "comment_id": 106484399, "body": "<a href=\"https://stackoverflow.com/q/19013960/7972699\">stackoverflow.com/q/19013960/7972699</a>  this helped me out a lot"}], "tags": [], "owner": {"reputation": 528, "user_id": 1552960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f0b8658a9c8761c7cfad055caed0c0a?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1552960/brandon"}, "is_accepted": false, "score": 1, "last_activity_date": 1573667629, "creation_date": 1573667629, "answer_id": 58842901, "question_id": 58842795, "link": "https://stackoverflow.com/questions/58842795/is-weakreference-of-android-views-safe/58842901#58842901", "title": "is WeakReference of Android Views safe?", "body": "<p>Look into RecyclerViewPools, you should be able to allocate a specific view (if the dynamically created ones are the same view) using the itemType and have the recyclerView reuse those views also</p>\n\n<p>The main lag isn\u2019t from Weakreferences, but purely the need to generate so many views so quickly, if you could keep a cached list of views to reuse (kind of like the recyclerViewPool) then that would reduce the inflating lag</p>\n\n<p>Only issue if you\u2019ve got so many views it causes OOM, is it possible to combine the views into a generic view with multiple functionality (less physical views, but more logic and complexity in each to cater for being used under multiple situations</p>\n\n<p>This would allow you to reuse the same view more times, meaning less caching/inflating, you\u2019ll just need to make sure the code is performing efficiently </p>\n"}], "owner": {"reputation": 5421, "user_id": 7972699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bED4H.jpg?s=128&g=1", "display_name": "Anmol", "link": "https://stackoverflow.com/users/7972699/anmol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1573667629, "creation_date": 1573667179, "question_id": 58842795, "link": "https://stackoverflow.com/questions/58842795/is-weakreference-of-android-views-safe", "title": "is WeakReference of Android Views safe?", "body": "<p>Hello i am writing a app which uses many customView(parent as FrameLayout holding activity's context). </p>\n\n<p>In the app there is a recyclerView it's holder is having <code>N</code>(significantly large number) of view's(Custom).</p>\n\n<p>As the number of View's are dynamically added (i am testing for 10k+ view's).</p>\n\n<p>in recycler View i am not doing anything special but using coroutine's so that rendering of 10k view will not block the <code>Main Thread</code> </p>\n\n<p>But due to large number's of View's in each RecyclerView Holder it's Filling up the heap memory of the app very fast as i scroll and give's OOM(Out of Memory) Crash.</p>\n\n<blockquote>\n  <p>To solve this issue i read and found I can use weak reference's to the\n  View.But i have not found any example or reference to this approach.So\n  i am not sure if using WeakReference on the Android View is a good\n  solution or not.</p>\n</blockquote>\n\n<p>Code and Demo Project Reference Below.</p>\n\n<h2><a href=\"https://github.com/andor201995/RenderIt/blob/master/app/src/main/java/com/show/singlecanvas/adapter/ViewPageAdapter.kt#49\" rel=\"nofollow noreferrer\">RecyclerView Adapter</a> :</h2>\n\n<pre><code>override fun onBindViewHolder(holder: ViewPageHolder, position: Int) {\n        val slideViewMultipleCanvas = SlideViewMultipleCanvas(context)\n        holder.slideViewItemHolder.addView(slideViewMultipleCanvas)\n        holder.positionHolder = position\n        val childJob = launch {\n            //this is where 10k+ view's are created\n            slideViewMultipleCanvas.setNumOfObjects(numOfItemsInViewPage)\n            slideViewMultipleCanvas.startJob()\n        }\n        map[position] = childJob\n    }\n</code></pre>\n\n<h2><a href=\"https://github.com/andor201995/RenderIt/blob/master/app/src/main/java/com/show/singlecanvas/customview/slideView/SlideViewMultipleCanvas.kt#L34\" rel=\"nofollow noreferrer\">CustomView</a> :</h2>\n\n<pre><code>...\n...\nsuspend fun setNumOfObjects(numberOfObjects: Int) {\n        withContext(Dispatchers.Default) {\n            for (i in 0 until numberOfObjects) {\n                // To solve OOM as number of view here in heap are &gt;10k\n                listOfObject.add(WeakReference(ShapeView(context)))\n            }\n        }\n    }\n...\n...\nprivate fun addViewInScope(): Boolean {\n        for (shapeView in listOfObject) {\n            shapeView.get()?.let {\n                addView(it)\n            }\n        }\n        return true\n    }\n....\n....\n</code></pre>\n\n<p>After Using WeakReference from my testing i have not faced any issue(<code>NO OOM's</code>) till now but still i get Lag's whenever <code>GC(Garbage Collector)</code> kick's in and collect all the weak reference.</p>\n\n<p>My Main concerns are</p>\n\n<ul>\n<li>Is There any other way to handle creation of huge number of View without using WeakReference? </li>\n<li>Is there any issue's if i use weak reference for Views?</li>\n<li>how to decrease GC lag?(even using WeakReference i am not getting smooth scroll)</li>\n</ul>\n\n<p>P.S. : I am already handling:</p>\n\n<ul>\n<li>null cases if GC collect's the weak referenced View's </li>\n<li>cancelling coroutine job's when view is recycled in RecyclerView.(can i release the weak Referred view also of this ViewHolder also???) </li>\n</ul>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 528, "user_id": 1552960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f0b8658a9c8761c7cfad055caed0c0a?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1552960/brandon"}, "edited": false, "score": 0, "creation_date": 1573668054, "post_id": 58842787, "comment_id": 103959883, "body": "Can we return a future or deferred from the method?"}, {"owner": {"reputation": 37, "user_id": 12190107, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBnOEi02cvdz-M-x47XoU_0noZykcuMTud8-fVP=k-s128", "display_name": "Claudiu Bugeac", "link": "https://stackoverflow.com/users/12190107/claudiu-bugeac"}, "reply_to_user": {"reputation": 528, "user_id": 1552960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f0b8658a9c8761c7cfad055caed0c0a?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1552960/brandon"}, "edited": false, "score": 0, "creation_date": 1573668861, "post_id": 58842787, "comment_id": 103960277, "body": "Since I&#39;m new on Kotlin I will say.. yes In the meantime I will take a look at these"}, {"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1573669999, "post_id": 58842787, "comment_id": 103960771, "body": "What are you doing with the returned &quot;method call&quot;? Not exactly clear what you are asking for."}], "answers": [{"comments": [{"owner": {"reputation": 2644, "user_id": 2957169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mf8Nx.jpg?s=128&g=1", "display_name": "charles-allen", "link": "https://stackoverflow.com/users/2957169/charles-allen"}, "edited": false, "score": 0, "creation_date": 1573668667, "post_id": 58843041, "comment_id": 103960195, "body": "...except with coroutines and suspend funs"}], "tags": [], "owner": {"reputation": 1272, "user_id": 2911348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/PoQXe.jpg?s=128&g=1", "display_name": "Prateek Jain", "link": "https://stackoverflow.com/users/2911348/prateek-jain"}, "is_accepted": false, "score": 0, "last_activity_date": 1573668233, "creation_date": 1573668233, "answer_id": 58843041, "question_id": 58842787, "link": "https://stackoverflow.com/questions/58842787/kotlin-return-callback-event/58843041#58843041", "title": "Kotlin - Return callback event", "body": "<p>when we say <code>return</code> a value, it returns a value back to the callee, in this case, whoever called the <code>onChanged</code> method. This happens in case of synchronous calls.</p>\n\n<p>In this case, <code>onChanged</code> call will be invoked in an asynchronous manner which makes it impossible to simply return a value back to the callee without a callback.</p>\n"}, {"tags": [], "owner": {"reputation": 108, "user_id": 9853503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yJCCB.jpg?s=128&g=1", "display_name": "Mykhailo Plotnikov", "link": "https://stackoverflow.com/users/9853503/mykhailo-plotnikov"}, "is_accepted": false, "score": 0, "last_activity_date": 1573668656, "last_edit_date": 1573668656, "creation_date": 1573668325, "answer_id": 58843070, "question_id": 58842787, "link": "https://stackoverflow.com/questions/58842787/kotlin-return-callback-event/58843070#58843070", "title": "Kotlin - Return callback event", "body": "<p>If i correctly understand your question, you can use observer.onChanged as Kotlin Function:<br>\n<code>val observerOnChangedFunction = observer.run { ::onChanged }</code><br>\nThan you can invoke this function:<br>\n<code>observerOnChangedFunction(instanceOfO)</code></p>\n"}, {"tags": [], "owner": {"reputation": 1293, "user_id": 12141859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62b68b508ccc9cca985ec76d00fc0b40?s=128&d=identicon&r=PG&f=1", "display_name": "Neo", "link": "https://stackoverflow.com/users/12141859/neo"}, "is_accepted": false, "score": 0, "last_activity_date": 1573716327, "creation_date": 1573716327, "answer_id": 58851438, "question_id": 58842787, "link": "https://stackoverflow.com/questions/58842787/kotlin-return-callback-event/58851438#58851438", "title": "Kotlin - Return callback event", "body": "<p>Usecase: <code>onChanged</code> as <code>var</code> field</p>\n\n<pre><code>class Foo&lt;O&gt; {\n\n   var onChanged: (O) -&gt; Unit = { /* default */}\n\n   private val observer: Observer&lt;O&gt; = object : Observer&lt;O&gt; {\n      override fun onChanged(output: O) = onChanged(output)\n   }\n}\n\nfun main() {\n   val foo = Foo&lt;Int&gt;()\n   foo.onChanged = { it.toString() }\n}\n</code></pre>\n\n<p>-</p>\n\n<p>Usecase: parameter in constructor as observer</p>\n\n<pre><code>class Foo&lt;O&gt; (\n   observer: Observer&lt;O&gt;\n) {\n   private val observer: Observer&lt;O&gt; = observer\n}\n</code></pre>\n\n<p>-</p>\n\n<p>Usecase: parameter in constructor as <code>onChanged</code> lambda</p>\n\n<pre><code>class Foo&lt;O&gt; (\n   onChanged: (O) -&gt; Unit\n) {\n   private val observer: Observer&lt;O&gt; = object : Observer&lt;O&gt; {\n      override fun onChanged(output: O) = onChanged(output)\n   }\n}\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 12190107, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBnOEi02cvdz-M-x47XoU_0noZykcuMTud8-fVP=k-s128", "display_name": "Claudiu Bugeac", "link": "https://stackoverflow.com/users/12190107/claudiu-bugeac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 634, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1573717251, "creation_date": 1573667158, "last_edit_date": 1573717251, "question_id": 58842787, "link": "https://stackoverflow.com/questions/58842787/kotlin-return-callback-event", "title": "Kotlin - Return callback event", "body": "<p>I have a quick question about Kotlin,</p>\n\n<p>For example I have a class A which have this field:</p>\n\n<pre><code>private val observer: Observer&lt;O&gt; = object : Observer&lt;O&gt; {\n    override fun onChanged(output: O) {\n\n    }\n}\n</code></pre>\n\n<p>Is there any Kotlin way of returning/passing/extending the onChange event (not the value) thru a method?</p>\n\n<p>I don't want to expose the output thru a listener/callback(Java way).\nWhat I'm looking for is to somehow return the onChanged method call, without using a \"middle\" object/callback</p>\n\n<p>Thanks</p>\n"}, {"tags": ["android", "kotlin", "android-databinding", "kotlin-android-extensions"], "answers": [{"comments": [{"owner": {"reputation": 3163, "user_id": 1690017, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/f4227236924d10a1c31e13c0857f398c?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/1690017/david"}, "edited": false, "score": 0, "creation_date": 1573668697, "post_id": 58842744, "comment_id": 103960211, "body": "But still not sure, in my case I can save adding the few Views to the ViewHolder but instead I need to add databinding to my gradle, I need to modify my layout, add a reference to each view to the the data model, adapt the RecyclerAdapter to use binding, that&#39;s not little code."}, {"owner": {"reputation": 520, "user_id": 9584758, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-VrzpU1FF5SE/AAAAAAAAAAI/AAAAAAAAAKE/a-LfZbP2Sl0/photo.jpg?sz=128", "display_name": "Raghul Vaikundam", "link": "https://stackoverflow.com/users/9584758/raghul-vaikundam"}, "reply_to_user": {"reputation": 3163, "user_id": 1690017, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/f4227236924d10a1c31e13c0857f398c?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/1690017/david"}, "edited": false, "score": 0, "creation_date": 1573706673, "post_id": 58842744, "comment_id": 103972124, "body": "The power of data-binding lies in the complex views and workflows. It will reduce tons of code. Maybe try complex views with and without data-binding. In simple views, it has very less impact"}], "tags": [], "owner": {"reputation": 520, "user_id": 9584758, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-VrzpU1FF5SE/AAAAAAAAAAI/AAAAAAAAAKE/a-LfZbP2Sl0/photo.jpg?sz=128", "display_name": "Raghul Vaikundam", "link": "https://stackoverflow.com/users/9584758/raghul-vaikundam"}, "is_accepted": true, "score": 1, "last_activity_date": 1573666984, "creation_date": 1573666984, "answer_id": 58842744, "question_id": 58842079, "link": "https://stackoverflow.com/questions/58842079/advantage-of-using-databinding-in-recycleradapter/58842744#58842744", "title": "Advantage of using DataBinding in RecyclerAdapter", "body": "<p>Actually it will reduce a lot of boilerplate code in bind function of your ViewHolder. The trick lies in the XML and bind function of the Viewholder</p>\n\n<p>With data-binding in place, your ViewHolder class will be follows</p>\n\n<pre><code>class BaseViewHolder(private val itemViewBinding: ItemViewBinding): RecyclerView.ViewHolder(itemViewBinding.root) {\n    fun bind(item: Item) {\n         itemViewBinding.item = item\n         itemViewBinding.executePendingBindings()\n    }\n}\n</code></pre>\n\n<p>Suppose before data-binding, you XML file item_view.xml is as follows</p>\n\n<pre><code>&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n        android:layout_width =\"match_parent\"\n        android:layout_height=\"match_parent\"&gt;\n        &lt;TextView\n          android:layout_width=\"wrap_content\"\n          android:layout_height=\"wrap_content\"\n          android:id=\"@+id/tvTitle\"/&gt;\n        &lt;TextView\n          android:layout_width=\"wrap_content\"\n          android:layout_height=\"wrap_content\"\n          android:id=\"@+id/tvMessage/&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>After data-binding, you XML file item_view.xml will be as follows</p>\n\n<pre><code>&lt;layout&gt;\n    &lt;data&gt;\n       &lt;variable name=\"item\"\n                 type=\"com.sample.Item\"/&gt;\n       &lt;!--your Item model should be defined in the packagename com.sample--&gt;\n    &lt;/data&gt;\n&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n        android:layout_width =\"match_parent\"\n        android:layout_height=\"match_parent\"&gt;\n        &lt;TextView\n          android:layout_width=\"wrap_content\"\n          android:layout_height=\"wrap_content\"\n          android:id=\"@+id/tvTitle\"\n          android:text=\"@{item.title}\"/&gt;\n        &lt;TextView\n          android:layout_width=\"wrap_content\"\n          android:layout_height=\"wrap_content\"\n          android:id=\"@+id/tvMessage\"\n          android:text=\"@{item.message}\"/&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>Thereby the bind function will be the same irrespective of how many more attributes we add in Item model class. So the <strong>advantage is to reduce in boilerplate code</strong>.</p>\n"}], "owner": {"reputation": 3163, "user_id": 1690017, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/f4227236924d10a1c31e13c0857f398c?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/1690017/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 0, "accepted_answer_id": 58842744, "answer_count": 1, "score": 0, "last_activity_date": 1573667472, "creation_date": 1573664507, "last_edit_date": 1573667472, "question_id": 58842079, "link": "https://stackoverflow.com/questions/58842079/advantage-of-using-databinding-in-recycleradapter", "title": "Advantage of using DataBinding in RecyclerAdapter", "body": "<p>I'm new to Kotlin and DataBinding, and based on the <a href=\"https://github.com/google/iosched/blob/89df01ebc19d9a46495baac4690c2ebfa74946dc/mobile/src/main/java/com/google/samples/apps/iosched/ui/speaker/SpeakerAdapter.kt\" rel=\"nofollow noreferrer\">Google I/O Android App on Github</a> I wrote an adapter that works but I'm not being able to completely understand why would someone prefer DataBinding over traditional methods? Is there an advantage in this case?:</p>\n\n<pre><code> internal class RecyclerAdapterKt : RecyclerView.Adapter&lt;BaseViewHolder&gt;() {\n\n    private val data = ArrayList&lt;Item&gt;()\n\n    ...\n\n    /* with data binding */\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): BaseViewHolder {\n        val inflater = LayoutInflater.from(parent.context)\n        return BaseViewHolder.BasicItemViewHolder(ItemViewBinding.inflate(inflater, parent, false))\n    }\n\n    override fun onBindViewHolder(holder: BaseViewHolder, position: Int) {\n        val item = data[position]\n        (holder as BaseViewHolder.BasicItemViewHolder).bind(item)\n    }\n\n    // without data binding\n    //    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): BaseViewHolder {\n    //        val view = from(parent.context).inflate(R.layout.item_view, parent, false)\n    //        return BaseViewHolder(view)\n    //    }\n    //\n    //    override fun onBindViewHolder(holder: BaseViewHolder, position: Int) {\n    //        val item = data[position]\n    //        holder.tv_title.text = item.title\n    //        holder.tv_message.text = item.message\n    //    }\n\n    ...\n\n  sealed class BaseViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView) {\n    class BasicItemViewHolder(\n        val binding: ItemViewBinding\n    ) : BaseViewHolder(binding.root) {\n\n        fun bind(item : Item) {\n            binding.tvTitle.text = item.title\n            // Difference with using itemView.tv_title.text?\n            binding.tvMessage.text = item.message            \n        }\n    }\n  }\n</code></pre>\n\n<p>Why not accessing directly the layout views in fun bind() through itemView?</p>\n"}, {"tags": ["android", "intellij-idea", "kotlin", "androidx", "android-sdk-tools"], "comments": [{"owner": {"reputation": 17877, "user_id": 6782707, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2425200c04f326a53ef0085b703369d6?s=128&d=identicon&r=PG", "display_name": "Edric", "link": "https://stackoverflow.com/users/6782707/edric"}, "edited": false, "score": 0, "creation_date": 1573665049, "post_id": 58842076, "comment_id": 103958453, "body": "That&#39;s because that is not the correct syntax in defining a variable: <a href=\"https://kotlinlang.org/docs/reference/basic-syntax.html#defining-variables\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/&hellip;</a>"}, {"owner": {"reputation": 17877, "user_id": 6782707, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2425200c04f326a53ef0085b703369d6?s=128&d=identicon&r=PG", "display_name": "Edric", "link": "https://stackoverflow.com/users/6782707/edric"}, "edited": false, "score": 0, "creation_date": 1573665098, "post_id": 58842076, "comment_id": 103958485, "body": "And why are you using Intellij IDEA instead of the preferred Android Studio IDE for creating Android apps?"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1573667090, "post_id": 58842076, "comment_id": 103959418, "body": "Because you shouldn&#39;t have a <code>:</code> there."}, {"owner": {"reputation": 27, "user_id": 12340431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FSl96.png?s=128&g=1", "display_name": "malta59", "link": "https://stackoverflow.com/users/12340431/malta59"}, "reply_to_user": {"reputation": 17877, "user_id": 6782707, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2425200c04f326a53ef0085b703369d6?s=128&d=identicon&r=PG", "display_name": "Edric", "link": "https://stackoverflow.com/users/6782707/edric"}, "edited": false, "score": 0, "creation_date": 1573672333, "post_id": 58842076, "comment_id": 103961778, "body": "@Edric Because compile time is faster for me on intellij rather than  building the  app and using an emulator on Android Studio, so i test code there first the i move to android studio. But as it happens when you do things to fast , now i realize that there are better ways to do what i was trying to do and that i asked too fast. Still thank you very much everyone for answering."}], "answers": [{"tags": [], "owner": {"reputation": 741, "user_id": 8677930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WjJem.jpg?s=128&g=1", "display_name": "Mayokun", "link": "https://stackoverflow.com/users/8677930/mayokun"}, "is_accepted": true, "score": 0, "last_activity_date": 1573666863, "creation_date": 1573666863, "answer_id": 58842715, "question_id": 58842076, "link": "https://stackoverflow.com/questions/58842076/unresolve-reference-for-mutablelivedata-in-kotlin-intellij/58842715#58842715", "title": "Unresolve Reference for MutableLiveData in Kotlin/IntelliJ?", "body": "<p>The issue is, that is not the correct syntax of declaring a variable in Kotlin. </p>\n\n<p>Should be: <code>var data = MutableLiveData&lt;Salt&gt;()</code>.</p>\n\n<p>Also, i'll <strong>strongly</strong> advice you use <a href=\"https://developer.android.com/studio?authuser=1\" rel=\"nofollow noreferrer\">Android Studio</a> which was designed specifically for Android development.</p>\n"}], "owner": {"reputation": 27, "user_id": 12340431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FSl96.png?s=128&g=1", "display_name": "malta59", "link": "https://stackoverflow.com/users/12340431/malta59"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 58842715, "answer_count": 1, "score": 0, "last_activity_date": 1573672154, "creation_date": 1573664492, "last_edit_date": 1573672154, "question_id": 58842076, "link": "https://stackoverflow.com/questions/58842076/unresolve-reference-for-mutablelivedata-in-kotlin-intellij", "title": "Unresolve Reference for MutableLiveData in Kotlin/IntelliJ?", "body": "<pre><code>var data = MutableLiveData&lt;Salt&gt;()\n</code></pre>\n\n<p>This is the code as simple as that , i am trying to write and test my code in IntelliJ because is more faster and convinient for me .But i get an exception when trying to call mutable live data.</p>\n\n<p>Unresolved Reference:MutableLive Data</p>\n\n<p>and intelliJ doesn't seem to find de libraries by default , i looked online and it seems i have to get the android and gradle module on the project , i already installed all the modules gradle has by default on a community intellij but it is still unable to find it.\nI could not install the android module, i clicked on install android sdk as it told me but it is stuck on this message </p>\n\n<p>reparing \"Install Android Support Repository (revision: 47.0.0)\".\nDownloading <a href=\"https://dl.google.com/android/repository/android_m2repository_r47.zip\" rel=\"nofollow noreferrer\">https://dl.google.com/android/repository/android_m2repository_r47.zip</a></p>\n\n<p>it never downloads , i downloaded the file by hand , if someone knows how to install it by hand, that would be great.\nIf there is a simpler way to use the MutableLiveDatatype , that would also help, i only want to use that on IntelliJ on a kotlin project is as simple as that.</p>\n"}, {"tags": ["kotlin", "functional-programming", "vavr"], "comments": [{"owner": {"reputation": 2644, "user_id": 2957169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mf8Nx.jpg?s=128&g=1", "display_name": "charles-allen", "link": "https://stackoverflow.com/users/2957169/charles-allen"}, "edited": false, "score": 0, "creation_date": 1573663143, "post_id": 58841465, "comment_id": 103957472, "body": "I&#39;m guessing your <code>Either</code> class is declared as <code>Either&lt;L,R&gt;</code> (the <code>R</code> seems to appear from nowhere). In your fail branch, you cast an <code>Either&lt;L,R&gt;</code> to <code>Either&lt;L,U&gt;</code>, which I think forces an inference that <code>R&#47;U</code> must be <code>Nothing</code>."}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1573674184, "post_id": 58841465, "comment_id": 103962602, "body": "Where does <code>B</code> in <code>fun fun2(a: A): Either&lt;out Fail, B&gt;</code> come from? And same for <code>A</code> in <code>fun1</code>."}, {"owner": {"reputation": 33, "user_id": 6311754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70529cd849c5f7263c1d5166ea560a9d?s=128&d=identicon&r=PG&f=1", "display_name": "guziec", "link": "https://stackoverflow.com/users/6311754/guziec"}, "edited": false, "score": 0, "creation_date": 1573723596, "post_id": 58841465, "comment_id": 103978792, "body": "Either is taken from vavr library. Both A and B are data types defined by myself"}], "answers": [{"tags": [], "owner": {"reputation": 1994, "user_id": 10536125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7445c27d383f2368956f6f23e75f5fe1?s=128&d=identicon&r=PG&f=1", "display_name": "Bananon", "link": "https://stackoverflow.com/users/10536125/bananon"}, "is_accepted": true, "score": 0, "last_activity_date": 1573939123, "creation_date": 1573939123, "answer_id": 58895326, "question_id": 58841465, "link": "https://stackoverflow.com/questions/58841465/how-to-flatmap-vavr-either-with-left-variance-annotated/58895326#58895326", "title": "How to flatMap vavr Either with left variance annotated", "body": "<p>In your particular case, you can make it compile by removing <code>out</code> variance from <code>fun1</code> and <code>fun2</code> return type. <a href=\"https://stackoverflow.com/a/22815270/10536125\">You shouldn't use wildcard types as return types anyway</a>.</p>\n\n<p>But it won't help if you have <code>fun1</code> and <code>fun2</code> defined this way:</p>\n\n<pre><code>fun fun1(): Either&lt;ConcreteFail1, A&gt;\nfun fun2(a: A): Either&lt;ConcreteFail2, B&gt;\n</code></pre>\n\n<p>Replacing <code>L</code> with <code>? extends L</code> in <code>flatMap</code> signature will not help either because of <code>ConcreteFail2</code> not being a subtype of <code>ConcreteFail1</code>. The problem is that <code>Either</code> is supposed to be covariant, but there is no such thing as <em>declaration-site variance</em> in Java. Although there is a workaround using <a href=\"https://static.javadoc.io/io.vavr/vavr/0.9.2/io/vavr/control/Either.html#narrow-io.vavr.control.Either-\" rel=\"nofollow noreferrer\"><code>Either#narrow</code></a> method:</p>\n\n<pre><code>Either.narrow&lt;Fail, A&gt;(fun1()).flatMap { Either.narrow(fun2(it)) }\n</code></pre>\n\n<p>Of course, it looks odd and must be extracted to a separate extension function:</p>\n\n<pre><code>inline fun &lt;L, R, R2&gt; Either&lt;out L, out R&gt;.narrowedFlatMap(\n    crossinline mapper: (R) -&gt; Either&lt;out L, out R2&gt;\n): Either&lt;L, R2&gt; = narrow.flatMap { mapper(it).narrow }\n</code></pre>\n\n<p>Where <code>narrow</code> is:</p>\n\n<pre><code>val &lt;L, R&gt; Either&lt;out L, out R&gt;.narrow: Either&lt;L, R&gt; get() = Either.narrow(this)\n</code></pre>\n\n<hr>\n\n<p>I think <em>Vavr</em> doesn't provide its own <code>narrowedFlatMap</code> because this method requires using a wildcard receiver type, so it can't be a member method and must be a static one, which breaks all readability of operations pipelining:</p>\n\n<pre><code>narrowedFlatMap(narrowedFlatMap(narrowedFlatMap(fun1()) { fun2(it) }) { fun3(it) }) { fun4(it) }\n</code></pre>\n\n<p>But since we use Kotlin, we can pipeline static (extension) functions as well:</p>\n\n<pre><code>fun1().narrowedFlatMap { fun2(it) }.narrowedFlatMap { fun3(it) }.narrowedFlatMap { fun4(it) }\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 6311754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70529cd849c5f7263c1d5166ea560a9d?s=128&d=identicon&r=PG&f=1", "display_name": "guziec", "link": "https://stackoverflow.com/users/6311754/guziec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 340, "favorite_count": 0, "accepted_answer_id": 58895326, "answer_count": 1, "score": 3, "last_activity_date": 1573939123, "creation_date": 1573662473, "last_edit_date": 1573719254, "question_id": 58841465, "link": "https://stackoverflow.com/questions/58841465/how-to-flatmap-vavr-either-with-left-variance-annotated", "title": "How to flatMap vavr Either with left variance annotated", "body": "<p>My code</p>\n\n<pre><code>open class Fail(override val message: String, override val cause: Throwable?) : RuntimeException(message, cause)\n\ndata class ValidationFail(override val message: String, override val cause: Throwable?) : Fail(message, cause)\n</code></pre>\n\n<p>more fails will be defined there in the future</p>\n\n<p>i have 2 functions</p>\n\n<pre><code>fun fun1(): Either&lt;out Fail, A&gt;\nfun fun2(a: A): Either&lt;out Fail, B&gt;\n</code></pre>\n\n<p>when i try to invoke them like this <code>fun1().flatMap{fun2(it)}</code>\ni got </p>\n\n<pre><code>Type mismatch: inferred type is (A!) -&gt; Either&lt;out Fail, B&gt; but ((A!) -&gt; Nothing)! was expected. Projected type Either&lt;out Fail, A&gt; restricts use of public final fun &lt;U : Any!&gt; flatMap(p0: ((R!) -&gt; Either&lt;L!, out U!&gt;!)!): Either&lt;L!, U!&gt;! defined in io.vavr.control.Either\n</code></pre>\n\n<p>Code from vavr Either:</p>\n\n<pre><code>default &lt;U&gt; Either&lt;L, U&gt; flatMap(Function&lt;? super R, ? extends Either&lt;L, ? extends U&gt;&gt; mapper) {\n    Objects.requireNonNull(mapper, \"mapper is null\");\n    if (isRight()) {\n        return (Either&lt;L, U&gt;) mapper.apply(get());\n    } else {\n        return (Either&lt;L, U&gt;) this;\n    }\n}\n</code></pre>\n\n<p>I guess o have this error because there is <code>L</code> in flatMap definition not <code>? extends L</code></p>\n\n<p>Any workaround for this ?</p>\n"}, {"tags": ["kotlin", "serialization", "kotlinx.serialization"], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 11528502, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AzcWh6BMW-Q/AAAAAAAAAAI/AAAAAAAAA2Q/TCDEdoSm0_U/photo.jpg?sz=128", "display_name": "Kilian CM", "link": "https://stackoverflow.com/users/11528502/kilian-cm"}, "is_accepted": true, "score": 3, "last_activity_date": 1573661536, "creation_date": 1573661536, "answer_id": 58841197, "question_id": 58840895, "link": "https://stackoverflow.com/questions/58840895/how-to-serialize-dynamic-keys-of-a-json-with-kotlinx/58841197#58841197", "title": "How to serialize dynamic keys of a json with kotlinx", "body": "<p>You can use a JSONObject to serialize dynamically the metadata. Your Metadata class is useless with this solution, your Image instance will have a JSONObject as metadata property :</p>\n\n<pre><code>data class Image(\n    val name: String? = null,\n    val uid: String,\n    val createdAt: String? = null,\n    val updatedAt: String? = null,\n    val metaData: JSONObject? = null,\n)\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 10450672, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Exyaf8SLwkM/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVqsqVB5ZtZ1qFo9gm1A1PXr1CauA/mo/photo.jpg?sz=128", "display_name": "Dylan Bourdere", "link": "https://stackoverflow.com/users/10450672/dylan-bourdere"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 596, "favorite_count": 0, "accepted_answer_id": 58841197, "answer_count": 1, "score": 3, "last_activity_date": 1573661536, "creation_date": 1573660533, "question_id": 58840895, "link": "https://stackoverflow.com/questions/58840895/how-to-serialize-dynamic-keys-of-a-json-with-kotlinx", "title": "How to serialize dynamic keys of a json with kotlinx", "body": "<p>I have a json with this kind of key:</p>\n\n<pre><code>...\n    \"metaData\": {\n        \"date:create\": \"2019-11-13t15:42:02+01:00\",\n        \"date:modify\": \"2019-11-13t15:42:02+01:00\",\n        \"exif:ColorSpace\": \"1\",\n        \"exif:ExifImageLength\": \"1500\",\n        \"exif:ExifImageWidth\": \"1125\",\n        \"exif:ExifOffset\": \"38\",\n        \"exif:Orientation\": \"1\",\n        \"jpeg:colorspace\": \"2\",\n        \"jpeg:sampling-factor\": \"1x1,1x1,1x1\"\n    },\n...\n</code></pre>\n\n<p>All the keys in the <code>metaData</code> object are dynamic (not really but there's hundred of different keys) how can i serialize this object without having to create a class with all the possible keys.</p>\n\n<p>This is my work:</p>\n\n<pre><code>@Serializable\ndata class Image(\n    val name: String? = null,\n    val uid: String,\n    val createdAt: String? = null,\n    val updatedAt: String? = null,\n    val metaData: MetaData? = null,\n)\n\n@Serializable\ndata class MetaData (\n    @SerialName(\"date:create\")\n    val dateCreate: String,\n\n    @SerialName(\"date:modify\")\n    val dateModify: String,\n\n    @SerialName(\"exif:ColorSpace\")\n    val exifColorSpace: String,\n\n    @SerialName(\"exif:ExifImageLength\")\n    val exifExifImageLength: String,\n\n    @SerialName(\"exif:ExifImageWidth\")\n    val exifExifImageWidth: String,\n\n    @SerialName(\"exif:ExifOffset\")\n    val exifExifOffset: String,\n\n    @SerialName(\"exif:Orientation\")\n    val exifOrientation: String,\n\n    @SerialName(\"jpeg:colorspace\")\n    val jpegColorspace: String,\n\n    @SerialName(\"jpeg:sampling-factor\")\n    val jpegSamplingFactor: String\n)\n</code></pre>\n"}, {"tags": ["android", "kotlin", "google-play-console", "gradle-kotlin-dsl", "google-play-developer-api"], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 12225251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40fc207904f804b9456b95c9a1d6f897?s=128&d=identicon&r=PG&f=1", "display_name": "macgills", "link": "https://stackoverflow.com/users/12225251/macgills"}, "is_accepted": true, "score": 0, "last_activity_date": 1573735400, "creation_date": 1573735400, "answer_id": 58857097, "question_id": 58840837, "link": "https://stackoverflow.com/questions/58840837/how-do-you-upload-an-expansion-file-to-a-draft-apk-using-google-play-developer-a/58857097#58857097", "title": "How do you upload an expansion file to a Draft Apk using Google Play Developer API Client Library for Java?", "body": "<p>I rewrote my entire app upload process with Play Developer API.</p>\n\n<p>You can't upload expansion files to draft, <a href=\"https://stackoverflow.com/questions/51546291/upload-obb-expansion-file-to-google-play-draft-artifact-using-api\">this question</a> is still relevant. I can't find the google issue it refers to but a year later it is evidently still the case.</p>\n"}], "owner": {"reputation": 31, "user_id": 12225251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40fc207904f804b9456b95c9a1d6f897?s=128&d=identicon&r=PG&f=1", "display_name": "macgills", "link": "https://stackoverflow.com/users/12225251/macgills"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 58857097, "answer_count": 1, "score": 0, "last_activity_date": 1573735400, "creation_date": 1573660334, "question_id": 58840837, "link": "https://stackoverflow.com/questions/58840837/how-do-you-upload-an-expansion-file-to-a-draft-apk-using-google-play-developer-a", "title": "How do you upload an expansion file to a Draft Apk using Google Play Developer API Client Library for Java?", "body": "<p>My current workflow is I publish my apks (4 splits by abi) to alpha in draft. This works fine because I am using Gradle Play Publisher.</p>\n\n<p>The next step is I upload the expansion file, this is a custom gradle task.</p>\n\n<p>I start an edit with an authenticated AndroidPublisher</p>\n\n<pre><code>val editId=publisher.edits().insert(packageName, null).execute().id\n</code></pre>\n\n<p>For my first apkVariant I upload the expansion file</p>\n\n<pre><code>publisher.edits().expansionfiles()\n                .upload(\n                  packageName,\n                  editId,\n                  apkVariantOutput.versionCodeOverride,\n                  \"main\",\n                  FileContent(\"application/octet-stream\",myFile)\n                ).execute()\n</code></pre>\n\n<p>and for all subsequent variants I reference the new expansion file</p>\n\n<pre><code>publisher.edits().expansionfiles().update(\n            packageName,\n            editId,\n            apkVariantOutput.versionCodeOverride,\n            \"main\",\n            ExpansionFile().apply {\n              referencesVersion = apkVariants[0].versionCodeOverride\n            }\n          ).execute()\n</code></pre>\n\n<p>and finally commit this edit</p>\n\n<pre><code>publisher.edits().commit(packageName, editId).execute()\n</code></pre>\n\n<p>example output from some prints:</p>\n\n<pre><code>{\n  \"expiryTimeSeconds\" : \"1573666146\",\n  \"id\" : \"04893130212727174754\"\n}\nsetting expansion for 6193171\n{\n  \"fileSize\" : \"590199\"\n}\n{\n  \"referencesVersion\" : 6193171\n}\n{\n  \"referencesVersion\" : 6193171\n}\n{\n  \"referencesVersion\" : 6193171\n}\n{\n  \"expiryTimeSeconds\" : \"1573666146\",\n  \"id\" : \"04893130212727174754\"\n}\n</code></pre>\n\n<p>But the expansion files never show up on the Play console even though the task completes without error.</p>\n\n<p>I hope I am fundamentally misunderstanding something about this API because I can't make sense of this.</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 2849892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e8a75df56ff6e6bebbfdcc04f38a781?s=128&d=identicon&r=PG&f=1", "display_name": "tthudium", "link": "https://stackoverflow.com/users/2849892/tthudium"}, "edited": false, "score": 0, "creation_date": 1573664369, "post_id": 58841034, "comment_id": 103958112, "body": "Thank you, this is exactly what I needed! It puts them in alphabetical order I believe"}, {"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 0, "creation_date": 1573720344, "post_id": 58841034, "comment_id": 103977055, "body": "This is less effective than just converting to a set and checking for equality. Sorting is <code>O(n * log n)</code>, while converting to a set is just <code>O(n)</code>."}], "tags": [], "owner": {"reputation": 879, "user_id": 9881903, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xOtup.jpg?s=128&g=1", "display_name": "GuanHongHuang", "link": "https://stackoverflow.com/users/9881903/guanhonghuang"}, "is_accepted": true, "score": 1, "last_activity_date": 1573692637, "last_edit_date": 1573692637, "creation_date": 1573660995, "answer_id": 58841034, "question_id": 58840798, "link": "https://stackoverflow.com/questions/58840798/how-to-tell-if-two-arrays-have-same-information-but-in-different-order-in-kotlin/58841034#58841034", "title": "How to tell if two arrays have same information but in different order in Kotlin", "body": "<pre><code>a.sorted() == b.sorted()\n</code></pre>\n\n<p>Hope this helps. </p>\n"}, {"tags": [], "owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "is_accepted": false, "score": 1, "last_activity_date": 1573661176, "creation_date": 1573661176, "answer_id": 58841101, "question_id": 58840798, "link": "https://stackoverflow.com/questions/58840798/how-to-tell-if-two-arrays-have-same-information-but-in-different-order-in-kotlin/58841101#58841101", "title": "How to tell if two arrays have same information but in different order in Kotlin", "body": "<p>I would just convert them to sets and then check if the contents are equal. Like this:</p>\n\n<pre><code>fun &lt;T&gt; checkSameInfo(arr1: Array&lt;T&gt;, arr2: Array&lt;T&gt;) = arr1.toSet() == arr2.toSet()\n</code></pre>\n\n<p>If you worked with lists instead of a arrays, you could use <code>containsAll</code>:</p>\n\n<pre><code>fun &lt;T&gt; checkSameInfo(list1: List&lt;T&gt;, list2: List&lt;T&gt;) = \n    list1.containsAll(list2) &amp;&amp; list2.containsAll(list1)\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 2849892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e8a75df56ff6e6bebbfdcc04f38a781?s=128&d=identicon&r=PG&f=1", "display_name": "tthudium", "link": "https://stackoverflow.com/users/2849892/tthudium"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 58841034, "answer_count": 2, "score": 1, "last_activity_date": 1573692637, "creation_date": 1573660194, "question_id": 58840798, "link": "https://stackoverflow.com/questions/58840798/how-to-tell-if-two-arrays-have-same-information-but-in-different-order-in-kotlin", "title": "How to tell if two arrays have same information but in different order in Kotlin", "body": "<p>Let's say I have some arrays:</p>\n\n<pre><code>val a = arrayOf(\"Pushups\", \"Benchpress\", \"Squats\")\nval b = arrayOf(\"Pushups\", \"Squats\", \"Benchpress\")\nval c = arrayOf(\"Pushups\", \"Squats\", \"Sit Ups\")\n</code></pre>\n\n<p>I essentially want to create a function to see if the two arrays have the same information, even if they're in a different order:</p>\n\n<pre><code>checkSameInfo(a,b) //Should return true\ncheckSameInfo(a,c) //Should return false\n</code></pre>\n\n<p>Is there a way of doing this, other than using a ton of for loops?</p>\n\n<p>StackOverflow has been immensely helpful in the last two months of learning kotlin, so thanks to anyone who replies :)</p>\n"}, {"tags": ["android", "kotlin", "dependency-injection", "koin"], "answers": [{"tags": [], "owner": {"reputation": 136101, "user_id": 101361, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fb0da94b98f64b5b8f12caeb3a049b80?s=128&d=identicon&r=PG", "display_name": "laalto", "link": "https://stackoverflow.com/users/101361/laalto"}, "is_accepted": false, "score": 0, "last_activity_date": 1573717631, "creation_date": 1573717631, "answer_id": 58851736, "question_id": 58840582, "link": "https://stackoverflow.com/questions/58840582/reference-activity-in-koin-module/58851736#58851736", "title": "Reference activity in koin Module", "body": "<p>Android-lifecycled components such as activities should not be in koin modules.</p>\n\n<p>For example you will have issues with e.g. configuration changes since the koin module would be serving references to stale activity after the activity is recreated.</p>\n\n<p>I haven't really worked with <code>NavController</code> but rather rolled up my own navigation solution. As a generic approach I would refactor the <code>RegistrationNavigator</code> implementation to a separate class the instance of which you can provide from your koin module. If lifecycle-dependent params such as <code>Context</code> (or <code>NavController</code>) are needed, supply them as function args.</p>\n"}], "owner": {"reputation": 68, "user_id": 8182779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32e8902cb4d72dc534c02db388ec284d?s=128&d=identicon&r=PG&f=1", "display_name": "asterixorobelix", "link": "https://stackoverflow.com/users/8182779/asterixorobelix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 329, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573717631, "creation_date": 1573659510, "last_edit_date": 1573712757, "question_id": 58840582, "link": "https://stackoverflow.com/questions/58840582/reference-activity-in-koin-module", "title": "Reference activity in koin Module", "body": "<p>I have a single activity application.</p>\n\n<p>My MainActivity is referenced in a number of dependency injection modules, as the implementer of these interfaces. I currently have a work around, which is less than ideal.</p>\n\n<pre><code>class MainActivity : TransaktActivity(), RegistrationNavigator, IAuthPresenter,\n    IAuthButtonNavigator {\n\n    override fun navigateAwayFromAuth() {\n        navController.navigate(R.id.homeFragment)\n    }\n\n    override fun navigateToAuthPin(buttonId: Int) {\n        //todo navigate to auth with pin fragment\n    }\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        _mainActivity = this\n        setContentView(R.layout.activity_main)\n    }\n\n    companion object {\n        private var _mainActivity: MainActivity? = null\n\n        fun getInstance() = _mainActivity\n    }\n}\n</code></pre>\n\n<pre><code>interface RegistrationNavigator {\n    fun navigateToCardDetails()\n    fun navigateToOtpCapture()\n    fun navigateToLoading()\n    fun navigateOutOfCardRegistration()\n}\n</code></pre>\n\n<p>The appModule is a <a href=\"https://insert-koin.io/\" rel=\"nofollow noreferrer\">Koin Module</a></p>\n\n<pre><code>val appModule = module {\n    viewModel { SharedViewModel() }\n\n    single { MainActivity.getInstance() as RegistrationNavigator }\n}\n</code></pre>\n\n<p>What is the preferred way of achieving this?</p>\n"}, {"tags": ["java", "kotlin", "state", "corda"], "answers": [{"tags": [], "owner": {"reputation": 682, "user_id": 5839126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eU1c8.gif?s=128&g=1", "display_name": "Antonis Charalambous", "link": "https://stackoverflow.com/users/5839126/antonis-charalambous"}, "is_accepted": false, "score": 1, "last_activity_date": 1573659357, "creation_date": 1573659357, "answer_id": 58840525, "question_id": 58840524, "link": "https://stackoverflow.com/questions/58840524/how-to-get-stateandref-from-a-contract-state/58840525#58840525", "title": "How to get stateAndRef from a contract state?", "body": "<p>My walk around to this is the following:  </p>\n\n<pre><code>val notary = serviceHub.networkMapCache.notaryIdentities[0]\n\nval testStateAndRef = StateAndRef(TransactionState(yourState, notary = notary), StateRef(yourState.hash(), 0))\n</code></pre>\n\n<p>Above demonstrates how to transform yourState of type contractState to stateAndRef pair </p>\n"}], "owner": {"reputation": 682, "user_id": 5839126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eU1c8.gif?s=128&g=1", "display_name": "Antonis Charalambous", "link": "https://stackoverflow.com/users/5839126/antonis-charalambous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573659357, "creation_date": 1573659357, "question_id": 58840524, "link": "https://stackoverflow.com/questions/58840524/how-to-get-stateandref-from-a-contract-state", "title": "How to get stateAndRef from a contract state?", "body": "<p>I am trying to get the stateAndRef pair from a contractState object. I need this in order to add my output state into a new command as an input state. <em>Is there a way to do this</em>?</p>\n"}, {"tags": ["android", "kotlin", "android-listview"], "comments": [{"owner": {"reputation": 35715, "user_id": 2850651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ooWVw.jpg?s=128&g=1", "display_name": "Mike M.", "link": "https://stackoverflow.com/users/2850651/mike-m"}, "edited": false, "score": 0, "creation_date": 1573687801, "post_id": 58840513, "comment_id": 103967946, "body": "Why don&#39;t those two lines work, exactly? Are you getting errors? If so, what are they?"}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 4184062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c83f79dcaf07e6cf239f63de90fa2102?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed Benattou", "link": "https://stackoverflow.com/users/4184062/mohamed-benattou"}, "edited": false, "score": 0, "creation_date": 1573665533, "post_id": 58841219, "comment_id": 103958676, "body": "No, it doesn&#39;t help, the compiler gives this error message Incompatible types: Cars and MenuItem ! Thanks for trying !"}, {"owner": {"reputation": 879, "user_id": 9881903, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xOtup.jpg?s=128&g=1", "display_name": "GuanHongHuang", "link": "https://stackoverflow.com/users/9881903/guanhonghuang"}, "reply_to_user": {"reputation": 75, "user_id": 4184062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c83f79dcaf07e6cf239f63de90fa2102?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed Benattou", "link": "https://stackoverflow.com/users/4184062/mohamed-benattou"}, "edited": false, "score": 0, "creation_date": 1573666124, "post_id": 58841219, "comment_id": 103958974, "body": "@MohamedBenattou   Why do you pass the <code>MenuItem</code> instead of pass <code>Cars</code>?"}, {"owner": {"reputation": 75, "user_id": 4184062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c83f79dcaf07e6cf239f63de90fa2102?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed Benattou", "link": "https://stackoverflow.com/users/4184062/mohamed-benattou"}, "edited": false, "score": 0, "creation_date": 1573671840, "post_id": 58841219, "comment_id": 103961559, "body": "From <b>Google</b> :  <code>override fun onContextItemSelected(item: MenuItem): Boolean {     val info = item.menuInfo as AdapterView.AdapterContextMenuInfo     return when (item.itemId) {         R.id.edit -&gt; {             editNote(info.id)             true         }         R.id.delete -&gt; {             deleteNote(info.id)             true         }         else -&gt; super.onContextItemSelected(item)     } }</code> @huange 12345"}], "tags": [], "owner": {"reputation": 879, "user_id": 9881903, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xOtup.jpg?s=128&g=1", "display_name": "GuanHongHuang", "link": "https://stackoverflow.com/users/9881903/guanhonghuang"}, "is_accepted": false, "score": 0, "last_activity_date": 1573661621, "creation_date": 1573661621, "answer_id": 58841219, "question_id": 58840513, "link": "https://stackoverflow.com/questions/58840513/is-there-a-way-to-get-a-class-item-with-custom-adapter-from-long-clicked-listv/58841219#58841219", "title": "Is there a way to get a Class Item (with custom Adapter) from long-clicked ListViewItem", "body": "<pre><code>override fun onContextItemSelected(item: MenuItem): Boolean {\n\n   when(item){\n\n      is Cars -&gt; {\n\n          //item is Cars Type in this brace\n      }\n   }\n\n ...\n}\n</code></pre>\n\n<p>Hope this helps. </p>\n"}], "owner": {"reputation": 75, "user_id": 4184062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c83f79dcaf07e6cf239f63de90fa2102?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed Benattou", "link": "https://stackoverflow.com/users/4184062/mohamed-benattou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1573665096, "creation_date": 1573659326, "last_edit_date": 1573665096, "question_id": 58840513, "link": "https://stackoverflow.com/questions/58840513/is-there-a-way-to-get-a-class-item-with-custom-adapter-from-long-clicked-listv", "title": "Is there a way to get a Class Item (with custom Adapter) from long-clicked ListViewItem", "body": "<p>I've :\na class </p>\n\n<pre><code>class Cars (Val Name String, Val Type String, Val Year String)\n</code></pre>\n\n<p>A mutable list</p>\n\n<pre><code>var listeCars : MutableList&lt;Cars&gt;? = null\n</code></pre>\n\n<p>a menu with Edit and Delete menu items\na listview with custom adapter\nthis listview is registred for context menu</p>\n\n<pre><code>registerForContextMenu(listView)\n\noverride fun onContextItemSelected(item: MenuItem): Boolean {\n        val info = item.menuInfo as AdapterContextMenuInfo\n        val carx = listeConsultations!![info.position]\n</code></pre>\n\n<p>// The last line won't work, even if i use this instead</p>\n\n<pre><code>val carx = listView.adapter.getItem(info.position) as Car\n</code></pre>\n\n<p>// because i want to retrieve the Car class item to do some actions with it like this,</p>\n\n<pre><code>        return when {\n            item.itemId == R.id.menuDelete -&gt; {\n                deleteCar(carx)\n                true\n            }\n            item.itemId == R.id.menuEdit -&gt; {\n                updateCar(carx)\n                true\n            }\n            else -&gt; super.onContextItemSelected(item)\n        }\n    }\n\nprivate fun updateCar(carx: Car?) {\n    val builder = AlertDialog.Builder(applicationContext)\n    builder.setTitle(\"Edit Car\")\n    val inflater = LayoutInflater.from(applicationContext)\n    val view = inflater.inflate(R.layout.edit_car,null)\n// .....\n}\n\nprivate fun updateCar(carx: Car?) {\n// .....\n}\n</code></pre>\n"}, {"tags": ["android", "android-layout", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 377, "user_id": 10844305, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CkeiCYYUN8E/AAAAAAAAAAI/AAAAAAAABUM/HKOzJeW9EWk/photo.jpg?sz=128", "display_name": "Sk Suraj", "link": "https://stackoverflow.com/users/10844305/sk-suraj"}, "is_accepted": false, "score": 0, "last_activity_date": 1573732805, "creation_date": 1573732805, "answer_id": 58856309, "question_id": 58839961, "link": "https://stackoverflow.com/questions/58839961/preview-for-xml-file-turns-weird-after-adding-toolsshowin-navigation-view-an/58856309#58856309", "title": "Preview for XML file turns weird after adding tools:showIn=&quot;navigation_view&quot; (Android Studio)(Kotlin)", "body": "<p>Do not use tools:showIn=\"navigation_view\". \nInstead declare this menu in your NavigationView widget like below</p>\n\n<pre><code>&lt;android.support.design.widget.NavigationView\n        android:id=\"@+id/navigation_view\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"match_parent\"\n        app:menu=\"@menu/your_menu_name_here\" /&gt;\n</code></pre>\n"}], "owner": {"reputation": 58, "user_id": 12315946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/324622cd3a7b3d4ed925ceeb60a937d2?s=128&d=identicon&r=PG&f=1", "display_name": "Jing Wey", "link": "https://stackoverflow.com/users/12315946/jing-wey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573732805, "creation_date": 1573657478, "question_id": 58839961, "link": "https://stackoverflow.com/questions/58839961/preview-for-xml-file-turns-weird-after-adding-toolsshowin-navigation-view-an", "title": "Preview for XML file turns weird after adding tools:showIn=&quot;navigation_view&quot; (Android Studio)(Kotlin)", "body": "<p>I've been learning how to create and implement drawers into my app</p>\n\n<p>Problem is the XML preview turns into a long rectangular and it doesn't show the preview properly.</p>\n\n<p>Here's before turning it into navigation view:<a href=\"https://i.stack.imgur.com/Rwj8A.jpg\" rel=\"nofollow noreferrer\">Before</a></p>\n\n<p>Here's after adding tools:showIn=\"navigation_view\":<a href=\"https://i.stack.imgur.com/wgaLE.jpg\" rel=\"nofollow noreferrer\">After</a></p>\n\n<p>I just started learning, so nothing else was added(related to drawers) except this XML file.</p>\n\n<p>Really appreciate helping a newbie out here, thanks in advance! :)</p>\n"}, {"tags": ["java", "amazon-web-services", "amazon-s3", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 1452, "user_id": 7804595, "user_type": "registered", "profile_image": "https://graph.facebook.com/1667139386646497/picture?type=large", "display_name": "Valeriy K.", "link": "https://stackoverflow.com/users/7804595/valeriy-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1573657263, "last_edit_date": 1573657263, "creation_date": 1573656811, "answer_id": 58839757, "question_id": 58839418, "link": "https://stackoverflow.com/questions/58839418/how-can-i-read-an-excel-file-xlsx-from-my-s3-bucket-with-kotlin-java/58839757#58839757", "title": "How can I read an Excel file (xlsx) from my s3 bucket with Kotlin/Java?", "body": "<p>You can get InputStream from S3Object, and then write it to a string for example:</p>\n\n<pre><code> S3ObjectInputStream s3ObjectInputStream = s3Client.getObject(new GetObjectRequest(youS3Bucket, youFileName)).getObjectContent();\nString result = new BufferedReader(new InputStreamReader(s3ObjectInputStream))\n.lines()\n.parallel()\n.collect(Collectors.joining(System.lineSeparator()));\n</code></pre>\n\n<p>or to a file:</p>\n\n<pre><code>Files.copy(s3ObjectInputStream, Paths.get(\"myFile.xlsx\"), StandardCopyOption.REPLACE_EXISTING);\n</code></pre>\n"}], "owner": {"reputation": 4398, "user_id": 1143482, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/zBqdL.png?s=128&g=1", "display_name": "jpganz18", "link": "https://stackoverflow.com/users/1143482/jpganz18"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1115, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1588433506, "creation_date": 1573655577, "last_edit_date": 1588433506, "question_id": 58839418, "link": "https://stackoverflow.com/questions/58839418/how-can-i-read-an-excel-file-xlsx-from-my-s3-bucket-with-kotlin-java", "title": "How can I read an Excel file (xlsx) from my s3 bucket with Kotlin/Java?", "body": "<p>This question is similar than others made but for different languages</p>\n\n<p><a href=\"https://stackoverflow.com/questions/53439566/python-how-to-read-and-load-an-excel-file-from-aws-s3\">Python: How to read and load an excel file from AWS S3?</a></p>\n\n<p>I am, unfortunately, not able to replicate this, I think the s3 client might be different.</p>\n\n<p>At the moment I am able to connect to read from my s3 bucket, did the following:</p>\n\n<pre><code>val payload = s3.getObject(\"my-bucket', \"my-file.xlsx\")\n</code></pre>\n\n<p>This is returning an object of type <code>S3Object</code>.</p>\n\n<p>As mentioned in other posts for python I should do </p>\n\n<pre><code> val binary = payload['Body'].read()\n</code></pre>\n\n<p>but this is not available for me. </p>\n\n<p>From payload I can see I have methods like <code>objectContent</code> but still doesn't seem to work.</p>\n\n<p>Any idea how to do it?</p>\n\n<p>I am using the AWS SDK 1.11</p>\n"}, {"tags": ["android", "android-studio", "kotlin"], "comments": [{"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 6, "creation_date": 1573653209, "post_id": 58838621, "comment_id": 103951551, "body": "Hint: Place your mouse pointer over the highlighted text."}], "answers": [{"tags": [], "owner": {"reputation": 1665, "user_id": 860311, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/1soa9.jpg?s=128&g=1", "display_name": "Vito Valov", "link": "https://stackoverflow.com/users/860311/vito-valov"}, "is_accepted": true, "score": 2, "last_activity_date": 1573654396, "creation_date": 1573654396, "answer_id": 58839068, "question_id": 58838621, "link": "https://stackoverflow.com/questions/58838621/what-does-highlighted-dependencies-mean-in-android-studio/58839068#58839068", "title": "What does highlighted dependencies mean in android studio", "body": "<p>Usually it suggests you to update the version of the dependency. \nMouseover that highlights to see what it wants.</p>\n\n<p>On OS X I usually press alt+enter and accept the suggested correction.</p>\n\n<p><a href=\"https://i.stack.imgur.com/AWzCu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AWzCu.png\" alt=\"result of mouseover on highlight\"></a></p>\n"}], "owner": {"reputation": 250, "user_id": 9876410, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Aqua Freshka", "link": "https://stackoverflow.com/users/9876410/aqua-freshka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 58839068, "answer_count": 1, "score": 0, "last_activity_date": 1573654655, "creation_date": 1573653049, "last_edit_date": 1573654655, "question_id": 58838621, "link": "https://stackoverflow.com/questions/58838621/what-does-highlighted-dependencies-mean-in-android-studio", "title": "What does highlighted dependencies mean in android studio", "body": "<p>I have some highlighted dependencies in android studio and I don't know where it's came from and how to remove it?</p>\n\n<p><img src=\"https://i.stack.imgur.com/fp8Vb.png\" alt=\"Here is the screen of the problem\"></p>\n\n<p>I have been looking all over stack-overflow and google but I can't see any reference of this.</p>\n"}, {"tags": ["java", "android", "kotlin", "gson"], "comments": [{"owner": {"reputation": 469, "user_id": 3069074, "user_type": "registered", "profile_image": "https://graph.facebook.com/1540157837/picture?type=large", "display_name": "Ravi Rajput", "link": "https://stackoverflow.com/users/3069074/ravi-rajput"}, "edited": false, "score": 0, "creation_date": 1573652516, "post_id": 58838403, "comment_id": 103951180, "body": "I have been through this, and belive me there is no solution for this from GSON guys. Good luck though"}, {"owner": {"reputation": 378, "user_id": 7216511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d93c0377ea33c50eb96c151759dedc32?s=128&d=identicon&r=PG&f=1", "display_name": "PJain", "link": "https://stackoverflow.com/users/7216511/pjain"}, "edited": false, "score": 0, "creation_date": 1573669037, "post_id": 58838403, "comment_id": 103960349, "body": "why don&#39;t you check the type of name either it is a valid JSON object or string and then based on that pass value to store and use it?"}], "answers": [{"tags": [], "owner": {"reputation": 1201, "user_id": 8835675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BAQ9X.jpg?s=128&g=1", "display_name": "Webfreak", "link": "https://stackoverflow.com/users/8835675/webfreak"}, "is_accepted": false, "score": 0, "last_activity_date": 1573652910, "creation_date": 1573652910, "answer_id": 58838580, "question_id": 58838403, "link": "https://stackoverflow.com/questions/58838403/how-to-skip-field-if-gson-serialization-failed/58838580#58838580", "title": "How to skip field if Gson serialization failed?", "body": "<p>Don't know if it will help you directly, but for the same case I did the following with Kotlinx.Serializartion library:</p>\n\n<p>Make name a JsonElement type</p>\n\n<pre><code>val name: JsonElement\n</code></pre>\n\n<p>Then create custom deserialization function like:</p>\n\n<pre><code>fun getName(): Name? =\n    if (name is JsonObject) {\n        // deserialize Name normally\n    } else {\n        // create Name by hand, only with 'name' property... \n    }\n</code></pre>\n\n<p>Hope this helps.</p>\n"}, {"tags": [], "owner": {"reputation": 8237, "user_id": 2425851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/fFyvZ.png?s=128&g=1", "display_name": "NickUnuchek", "link": "https://stackoverflow.com/users/2425851/nickunuchek"}, "is_accepted": false, "score": 0, "last_activity_date": 1573655635, "creation_date": 1573655635, "answer_id": 58839434, "question_id": 58838403, "link": "https://stackoverflow.com/questions/58838403/how-to-skip-field-if-gson-serialization-failed/58839434#58839434", "title": "How to skip field if Gson serialization failed?", "body": "<p>Found solution, just need to use one of these:</p>\n\n<p>1.\nFirst solution:</p>\n\n<pre><code>data class User(val id:String, @JsonAdapter(FailSafeNameTypeAdapter::class) val name: Name)\n</code></pre>\n\n<p>where</p>\n\n<pre><code>class FailSafeNameTypeAdapter internal constructor(private val delegate: TypeAdapter&lt;Name&gt;) : TypeAdapter&lt;Name&gt;() {\n\n    @Throws(IOException::class)\n    override fun write(writer: JsonWriter, value: Name?) {\n        if (value == null) {\n            writer.nullValue()\n            return\n        }\n\n        // This catches non-proxied collections AND initialized proxied collections\n        delegate.write(writer, value)\n    }\n\n    @Throws(IOException::class)\n    override fun read(reader: JsonReader): Name? {\n        val peek = reader.peek()\n        if (peek == STRING) {\n            reader.skipValue()\n            return null\n        }\n        return delegate.read(reader) as Name\n    }\n\n}\n</code></pre>\n\n<ol start=\"2\">\n<li></li>\n</ol>\n\n<p>Second solution</p>\n\n<pre><code>data class User(val id:String, @JsonAdapter(FailSafePriceTypeAdapterFactory::class) val name: Name)\n</code></pre>\n\n<p>where </p>\n\n<pre><code>class FailSafePriceTypeAdapterFactory : TypeAdapterFactory {\n    override fun &lt;T&gt; create(gson: Gson, type: TypeToken&lt;T&gt;): TypeAdapter&lt;T&gt;? {\n        if (Price::class.java.isAssignableFrom(type.rawType)) {\n            val delegate = gson.getDelegateAdapter&lt;T&gt;(this, type) as TypeAdapter&lt;Price&gt;\n\n            return FailSafePriceTypeAdapter(delegate) as TypeAdapter&lt;T&gt;\n        }\n\n        return null\n    }\n\n    companion object {\n        val FACTORY: TypeAdapterFactory = FailSafePriceTypeAdapterFactory()\n    }\n}\n</code></pre>\n\n<ol start=\"3\">\n3. \n</ol>\n\n<p>Third solution</p>\n\n<pre><code>val gson = GsonBuilder()\n            .setFieldNamingPolicy(FieldNamingPolicy.IDENTITY)\n            .apply {\n                registerTypeAdapterFactory(FailSafePriceTypeAdapterFactory.FACTORY)\n\n            }\n            .create()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1307, "user_id": 4681367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83a0416184c6ffe72aac807e2feac5ce?s=128&d=identicon&r=PG&f=1", "display_name": "Lionel Briand", "link": "https://stackoverflow.com/users/4681367/lionel-briand"}, "is_accepted": false, "score": 1, "last_activity_date": 1573656306, "creation_date": 1573656306, "answer_id": 58839602, "question_id": 58838403, "link": "https://stackoverflow.com/questions/58838403/how-to-skip-field-if-gson-serialization-failed/58839602#58839602", "title": "How to skip field if Gson serialization failed?", "body": "<p>Keeping your actual classes <code>User</code> and <code>Name</code>, you can create a custom <a href=\"https://static.javadoc.io/com.google.code.gson/gson/2.8.5/com/google/gson/TypeAdapter.htmlhttps://static.javadoc.io/com.google.code.gson/gson/2.8.5/com/google/gson/TypeAdapter.html\" rel=\"nofollow noreferrer\"><code>TypeAdapter</code></a> and create a full <code>Name</code> out of the single <code>name</code> string or the complete JSON object by reading it yourself. </p>\n\n<pre><code>class NameAdapter : TypeAdapter&lt;Name&gt;() {\n\n    @Throws(IOException::class)\n    override fun read(reader: JsonReader): Name? {\n        return when(reader.peek()) {\n            // if { \"name\": null }\n            JsonToken.NULL -&gt; {\n                reader.nextNull()\n                null\n            }\n            // if { \"name\": \"SomeString\" }\n            JsonToken.STRING -&gt; {\n                Name(reader.nextString(), \"\")\n            }\n            //if { \"name\": { \"firstName\": \"some\", \"lastName\": \"thing\" }\n            JsonToken.BEGIN_OBJECT -&gt; {\n                var firstName = \"\"\n                var lastName = \"\"\n\n                reader.beginObject()\n                while (reader.hasNext()) {\n                    val peek = reader.peek()\n                    if(peek == JsonToken.END_OBJECT) break\n                    else if(peek == JsonToken.NAME) {\n                        when(reader.nextName()) {\n                            // it will produce an exception if it isn't a string\n                            \"firstName\" -&gt; firstName = reader.nextString()\n                            \"lastName\" -&gt; lastName = reader.nextString()\n                        }\n                    }\n                }\n                reader.endObject()\n                Name(firstName, lastName)\n            }\n            else -&gt; throw IOException(\"Unable to parse a name\")\n        }\n    }\n\n    @Throws(IOException::class)\n    override fun write(writer: JsonWriter, value: Name?) {\n        if(value == null) {\n            writer.nullValue()\n            return\n        }\n        writer.beginObject()\n        writer.name(\"firstName\")\n        writer.value(value.firstName)\n        writer.name(\"lastName\")\n        writer.value(value.lastName)\n        writer.endObject()\n    }\n}\n</code></pre>\n\n<p>Then you can add this type adapter to your gson builder.</p>\n\n<pre><code>val gson = GsonBuilder().registerTypeAdapter(Name::class.java, NameAdapter()).build()\n</code></pre>\n\n<p>It will deserialize correctly the name in each case and produce a full <code>Name</code> class.</p>\n"}], "owner": {"reputation": 8237, "user_id": 2425851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/fFyvZ.png?s=128&g=1", "display_name": "NickUnuchek", "link": "https://stackoverflow.com/users/2425851/nickunuchek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1573656306, "creation_date": 1573652265, "question_id": 58838403, "link": "https://stackoverflow.com/questions/58838403/how-to-skip-field-if-gson-serialization-failed", "title": "How to skip field if Gson serialization failed?", "body": "<p>For example, server response#1 has <code>name</code> Object:</p>\n\n<pre><code>     {\n       \"id\":\"vfa45f42\", \n       \"name\": { \n                \"firstName\":\"UserFirstName\",\n                \"lastName\":\"UserLastName\"\n         }\n    }\n</code></pre>\n\n<p>But sometimes server response#2 has <code>name</code> String for other objects of user(that's because server has MongoDB, and at v1 it was <code>String</code>, but at v2 it is <code>Object</code>):</p>\n\n<pre><code>    {\n        \"id\":\"abfaf453\", \n        \"name\":\"OneSentenceUserName\"\n    }\n</code></pre>\n\n<p>So, if I make with response#2 this:</p>\n\n<pre><code>val type = object : TypeToken&lt;User&gt;() {}.type\ngson.fromJson(responseString, type)\n</code></pre>\n\n<p>where</p>\n\n<pre><code>data class User(val id:String, val name: Name)\n\ndata class Name(val firstName: String, val lastName: String)\n</code></pre>\n\n<p>Error is:</p>\n\n<pre><code>java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line ...\n</code></pre>\n\n<p>I expected to make <code>name = null</code> if it's <code>String</code> at json</p>\n"}, {"tags": ["android", "google-maps", "kotlin", "google-maps-android-api-2"], "comments": [{"owner": {"reputation": 3463, "user_id": 2232127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0af1bc4a99affc5af6d890404baf5f30?s=128&d=identicon&r=PG", "display_name": "JensV", "link": "https://stackoverflow.com/users/2232127/jensv"}, "edited": false, "score": 0, "creation_date": 1573651115, "post_id": 58838007, "comment_id": 103950328, "body": "Can you post the full stacktrace?"}, {"owner": {"reputation": 181, "user_id": 7621459, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wMlhC.jpg?s=128&g=1", "display_name": "DominikS", "link": "https://stackoverflow.com/users/7621459/dominiks"}, "reply_to_user": {"reputation": 3463, "user_id": 2232127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0af1bc4a99affc5af6d890404baf5f30?s=128&d=identicon&r=PG", "display_name": "JensV", "link": "https://stackoverflow.com/users/2232127/jensv"}, "edited": false, "score": 0, "creation_date": 1573651406, "post_id": 58838007, "comment_id": 103950471, "body": "Sure, added stacktrace to the question. I named <code>com.hiker.presentation.map.MapView</code> as <code>MyMapViewFragment</code> for clarity"}, {"owner": {"reputation": 3463, "user_id": 2232127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0af1bc4a99affc5af6d890404baf5f30?s=128&d=identicon&r=PG", "display_name": "JensV", "link": "https://stackoverflow.com/users/2232127/jensv"}, "edited": false, "score": 0, "creation_date": 1573651613, "post_id": 58838007, "comment_id": 103950600, "body": "Seems to me like <code>onDestroy</code> was called before <code>onCreateView</code> which is indeed odd. How are you adding the fragment to the activity?"}, {"owner": {"reputation": 181, "user_id": 7621459, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wMlhC.jpg?s=128&g=1", "display_name": "DominikS", "link": "https://stackoverflow.com/users/7621459/dominiks"}, "reply_to_user": {"reputation": 3463, "user_id": 2232127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0af1bc4a99affc5af6d890404baf5f30?s=128&d=identicon&r=PG", "display_name": "JensV", "link": "https://stackoverflow.com/users/2232127/jensv"}, "edited": false, "score": 0, "creation_date": 1573652011, "post_id": 58838007, "comment_id": 103950861, "body": "Yes, you are correct, onCreateView is not invoked when configuration changes. I&#39;m using Navigation Component with Navigation Graph and <code>com.hiker.presentation.map.MapView</code> is my starting view. In my MainActivity I have BottomNavigationView, which handles switching views"}, {"owner": {"reputation": 3463, "user_id": 2232127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0af1bc4a99affc5af6d890404baf5f30?s=128&d=identicon&r=PG", "display_name": "JensV", "link": "https://stackoverflow.com/users/2232127/jensv"}, "edited": false, "score": 0, "creation_date": 1573652303, "post_id": 58838007, "comment_id": 103951041, "body": "Cool, I just added an answer with another potential issue in addition. So you can accept it if you&#39;d like"}], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 7621459, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wMlhC.jpg?s=128&g=1", "display_name": "DominikS", "link": "https://stackoverflow.com/users/7621459/dominiks"}, "edited": false, "score": 0, "creation_date": 1573667228, "post_id": 58838401, "comment_id": 103959495, "body": "I figured out that when I rotate device on TripView then this flow happens: MapView.onDestroy() -&gt; MainActivity.onCreate() -&gt; MapView.onCreate() -&gt; TripView.onCreate(). Oddly, MapView.onCreate() is invoked, but why? This fragment doesn&#39;t have dependency with TripView. When I rotate the device second time then firstly MapView.onDestroy() and the application crashes.."}], "tags": [], "owner": {"reputation": 3463, "user_id": 2232127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0af1bc4a99affc5af6d890404baf5f30?s=128&d=identicon&r=PG", "display_name": "JensV", "link": "https://stackoverflow.com/users/2232127/jensv"}, "is_accepted": false, "score": 0, "last_activity_date": 1573652261, "creation_date": 1573652261, "answer_id": 58838401, "question_id": 58838007, "link": "https://stackoverflow.com/questions/58838007/mapviews-ondestroy-causing-uninitializedpropertyaccessexception/58838401#58838401", "title": "MapView&#39;s onDestroy() causing UninitializedPropertyAccessException", "body": "<p>More of a guess:\nA property that is <code>lateinit</code> expects the property to be initialized before any other operation is done on it. We use that in this case, because we can only initialize it in <code>onCreateView</code> and not in a constructor. You are indeed initializing <code>googleMapView</code> on the second line of <code>onCreateView</code>.</p>\n\n<p>But, you might actually not be initializing it properly if, <code>view.findViewById(R.id.mapView2)</code> would return <code>null</code>. Which is the case if no element with the id <code>mapView2</code> would be in the layout <code>fragment_map_view</code>. So verify there is actually a MapView there.</p>\n\n<hr>\n\n<p>The other case that could happen is, if the Fragment wasn't actually attached to the View Hierarchy but was instantiated and registered in the Activity. When the Activity was destroyed, it destroyed the Fragment and called a method on the uninitialized object. <em>the actual case here</em></p>\n\n<p>(See the comments for the resolution).</p>\n"}], "owner": {"reputation": 181, "user_id": 7621459, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wMlhC.jpg?s=128&g=1", "display_name": "DominikS", "link": "https://stackoverflow.com/users/7621459/dominiks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 566, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573652261, "creation_date": 1573650989, "last_edit_date": 1573651387, "question_id": 58838007, "link": "https://stackoverflow.com/questions/58838007/mapviews-ondestroy-causing-uninitializedpropertyaccessexception", "title": "MapView&#39;s onDestroy() causing UninitializedPropertyAccessException", "body": "<p>I've got strange problem with Google Map's MapView component, which cause runtime exception UninitializedPropertyAccessException. <strong>Exception is thrown after second configuration change (device rotation) in every other view except the one where MapView's method are overridden.</strong> So, being in <code>MyMapViewFragment</code> which handles lifecycle of <code>com.google.android.gms.maps.MapView</code> this error is not thrown and configuration changes works fine. </p>\n\n<p>Problem occurs in every other view, when I rotate the device <code>MyMapViewFragment.onDestroy()</code>  is invoked which destroys <code>com.google.android.gms.maps.MapView</code>:</p>\n\n<pre><code>override fun onDestroy() {\n    super.onDestroy()\n    googleMapView.onDestroy()\n}\n</code></pre>\n\n<p>Rotating device second time causes UninitializedPropertyAccessException on <code>googleMapView.onDestroy()</code> line - MapView is not initliazed. Code of <code>MyMapViewFragment</code>:</p>\n\n<pre><code>class MyMapViewFragment : Fragment(), OnMapReadyCallback {\n\n   private lateinit var googleMapView: com.google.android.gms.maps.MapView\n   private lateinit var googleMap : GoogleMap\n\n  override fun onCreateView(\n    inflater: LayoutInflater, container: ViewGroup?,\n    savedInstanceState: Bundle?\n  ): View? {\n    var view = inflater.inflate(R.layout.fragment_map_view, container, false)\n    googleMapView = view.findViewById(R.id.mapView2)\n    googleMapView.onCreate(savedInstanceState)\n    googleMapView.getMapAsync(this)\n    bottomNavigationView = requireActivity().findViewById(R.id.bottomNavigation)\n    mountainCustomInfoWindow.visibility = View.INVISIBLE\n    bottomNavigationView.visibility = View.VISIBLE\n    return view\n }\n\n  override fun onMapReady(map: GoogleMap) {\n    googleMap = map\n  }\n  override fun onPause() {\n     super.onPause()\n     googleMapView.onPause()\n  }\n  override fun onResume() {\n     super.onResume()\n     googleMapView.onResume()\n  }\n  override fun onDestroy() {\n     super.onDestroy()\n     googleMapView.onDestroy()\n  }\n  override fun onLowMemory() {\n     super.onLowMemory()\n     googleMapView.onLowMemory()\n  }\n}\n</code></pre>\n\n<p>Stacktrace:</p>\n\n<pre><code>Process: com.hiker, PID: 25388\njava.lang.RuntimeException: Unable to destroy activity {com.hiker/com.hiker.presentation.MainActivity}: kotlin.UninitializedPropertyAccessException: lateinit property googleMapView has not been initialized\n    at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:4605)\n    at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:4623)\n    at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:4897)\n    at android.app.ActivityThread.-wrap19(Unknown Source:0)\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1702)\n    at android.os.Handler.dispatchMessage(Handler.java:105)\n    at android.os.Looper.loop(Looper.java:164)\n    at android.app.ActivityThread.main(ActivityThread.java:6944)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.Zygote$MethodAndArgsCaller.run(Zygote.java:327)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1374)\n Caused by: kotlin.UninitializedPropertyAccessException: lateinit property googleMapView has not been initialized\n    at com.hiker.presentation.map.MapView.onDestroy(MapView.kt:173)\n    at androidx.fragment.app.Fragment.performDestroy(Fragment.java:2830)\n    at androidx.fragment.app.FragmentManagerImpl.moveToState(FragmentManagerImpl.java:1028)\n    at androidx.fragment.app.FragmentManagerImpl.moveFragmentToExpectedState(FragmentManagerImpl.java:1238)\n    at androidx.fragment.app.FragmentManagerImpl.moveToState(FragmentManagerImpl.java:1310)\n    at androidx.fragment.app.FragmentManagerImpl.dispatchStateChange(FragmentManagerImpl.java:2659)\n    at androidx.fragment.app.FragmentManagerImpl.dispatchDestroy(FragmentManagerImpl.java:2644)\n    at androidx.fragment.app.Fragment.performDestroy(Fragment.java:2825)\n    at androidx.fragment.app.FragmentManagerImpl.moveToState(FragmentManagerImpl.java:1028)\n    at androidx.fragment.app.FragmentManagerImpl.moveFragmentToExpectedState(FragmentManagerImpl.java:1238)\n    at androidx.fragment.app.FragmentManagerImpl.moveToState(FragmentManagerImpl.java:1303)\n    at androidx.fragment.app.FragmentManagerImpl.dispatchStateChange(FragmentManagerImpl.java:2659)\n    at androidx.fragment.app.FragmentManagerImpl.dispatchDestroy(FragmentManagerImpl.java:2644)\n    at androidx.fragment.app.FragmentController.dispatchDestroy(FragmentController.java:329)\n    at androidx.fragment.app.FragmentActivity.onDestroy(FragmentActivity.java:366)\n    at androidx.appcompat.app.AppCompatActivity.onDestroy(AppCompatActivity.java:210)\n    at android.app.Activity.performDestroy(Activity.java:7479)\n    at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1255)\n    at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:4592)\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 4313, "user_id": 2224047, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UZ83S.jpg?s=128&g=1", "display_name": "Nikolai  Shevchenko", "link": "https://stackoverflow.com/users/2224047/nikolai-shevchenko"}, "edited": false, "score": 0, "creation_date": 1573656438, "post_id": 58837784, "comment_id": 103953452, "body": "Just wondering why do need custom file extension?"}, {"owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "edited": false, "score": 0, "creation_date": 1573658324, "post_id": 58837784, "comment_id": 103954509, "body": "Technically, you don&#39;t execute <code>.kt</code> files; they&#39;re source code.  In the case of Kotlin/JVM, they get compiled to <code>.class</code> files, and it&#39;s <i>those</i> that get executed by the JVM.  (Possibly after being bundled into <code>.jar</code> or <code>.war</code> files.)  On the other hand, <code>.kts</code> script files <i>do</i> get executed.  (Or at least, they get compiled and then executed in one step, without generating any other files.)"}], "answers": [{"comments": [{"owner": {"reputation": 46525, "user_id": 7294900, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Pdqi4.gif?s=128&g=1", "display_name": "user7294900", "link": "https://stackoverflow.com/users/7294900/user7294900"}, "edited": false, "score": 0, "creation_date": 1573711645, "post_id": 58838881, "comment_id": 103973491, "body": "Strange they named method as default <code>getDefaultExtension</code>, but it&#39;s the only option"}, {"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "reply_to_user": {"reputation": 46525, "user_id": 7294900, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Pdqi4.gif?s=128&g=1", "display_name": "user7294900", "link": "https://stackoverflow.com/users/7294900/user7294900"}, "edited": false, "score": 0, "creation_date": 1573742840, "post_id": 58838881, "comment_id": 103989962, "body": "@user7294900 Yes, that would make sense if there were also something like &quot;getAlternativeExtensions&quot; or something like that"}], "tags": [], "owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "is_accepted": true, "score": 2, "last_activity_date": 1573653839, "creation_date": 1573653839, "answer_id": 58838881, "question_id": 58837784, "link": "https://stackoverflow.com/questions/58837784/execute-kotlin-files-with-extension-other-than-kt/58838881#58838881", "title": "Execute kotlin files with extension other than kt", "body": "<p>I had a quick look at the compiler source code and found the following (<a href=\"https://github.com/JetBrains/kotlin/blob/v1.3.41/compiler/cli/src/org/jetbrains/kotlin/cli/jvm/compiler/coreEnvironmentUtils.kt#L60\" rel=\"nofollow noreferrer\">source</a>):</p>\n\n<pre><code>if (!vFile.isDirectory &amp;&amp; vFile.fileType != KotlinFileType.INSTANCE) {\n    configuration.report(CompilerMessageSeverity.ERROR, \"Source entry is not a Kotlin file: $sourceRootPath\", reportLocation)\n    continue\n}\n</code></pre>\n\n<p>Where <code>vFile.fileType</code> is retrieved <a href=\"https://github.com/JetBrains/intellij-community/blob/da373a0a3c2ff03e928937bc763c138acf0432fc/platform/core-impl/src/com/intellij/core/CoreFileTypeRegistry.java#L72\" rel=\"nofollow noreferrer\">here</a> <strong>based on the file extension</strong>, which is declared in <a href=\"https://github.com/JetBrains/kotlin/blob/v1.3.41/compiler/psi/src/org/jetbrains/kotlin/idea/KotlinFileType.java\" rel=\"nofollow noreferrer\">KotlinFileType</a> to be <code>kt</code>.</p>\n\n<p>So basically I think you can't have Kotlin files with extensions other than <code>.kt</code>, otherwise the compiler will throw an error.</p>\n"}], "owner": {"reputation": 46525, "user_id": 7294900, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Pdqi4.gif?s=128&g=1", "display_name": "user7294900", "link": "https://stackoverflow.com/users/7294900/user7294900"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 58838881, "answer_count": 1, "score": 1, "last_activity_date": 1573653839, "creation_date": 1573650242, "last_edit_date": 1573651101, "question_id": 58837784, "link": "https://stackoverflow.com/questions/58837784/execute-kotlin-files-with-extension-other-than-kt", "title": "Execute kotlin files with extension other than kt", "body": "<p>In kotlin documentation I found, the kotlin file extension is always <code>.kt</code></p>\n\n<p>E.g. <a href=\"https://kotlinlang.org/docs/reference/coding-conventions.html\" rel=\"nofollow noreferrer\">Source file names</a>:</p>\n\n<blockquote>\n  <p>If a Kotlin file contains a single class (potentially with related top-level declarations), its name should be the same as the name of the class, <strong>with the .kt extension appended</strong></p>\n</blockquote>\n\n<p>Can kotlin execute files with kotlin code, but with extension other than kt?</p>\n\n<p>When I tried to change extenstion I get an error:</p>\n\n<pre><code>error: source entry is not a Kotlin file:\n</code></pre>\n"}, {"tags": ["android", "list", "class", "kotlin", "android-room"], "comments": [{"owner": {"reputation": 1293, "user_id": 12141859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62b68b508ccc9cca985ec76d00fc0b40?s=128&d=identicon&r=PG&f=1", "display_name": "Neo", "link": "https://stackoverflow.com/users/12141859/neo"}, "edited": false, "score": 0, "creation_date": 1573650581, "post_id": 58837767, "comment_id": 103949991, "body": "Could you please add an example how you would imagine it to look like?"}, {"owner": {"reputation": 15342, "user_id": 891373, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e49081f9c8f64cd6617efda90398a2a1?s=128&d=identicon&r=PG", "display_name": "Froyo", "link": "https://stackoverflow.com/users/891373/froyo"}, "edited": false, "score": 0, "creation_date": 1573652544, "post_id": 58837767, "comment_id": 103951202, "body": "Do you want to add the list as a parameter or do you want to add the items in the list as a parameter? In the 2nd scenario, how are the list items related to the fields in your class?"}, {"owner": {"reputation": 174, "user_id": 7507215, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EmkH8.png?s=128&g=1", "display_name": "fisio", "link": "https://stackoverflow.com/users/7507215/fisio"}, "reply_to_user": {"reputation": 1293, "user_id": 12141859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62b68b508ccc9cca985ec76d00fc0b40?s=128&d=identicon&r=PG&f=1", "display_name": "Neo", "link": "https://stackoverflow.com/users/12141859/neo"}, "edited": false, "score": 0, "creation_date": 1573654392, "post_id": 58837767, "comment_id": 103952233, "body": "@Neo sorry, edited"}, {"owner": {"reputation": 174, "user_id": 7507215, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EmkH8.png?s=128&g=1", "display_name": "fisio", "link": "https://stackoverflow.com/users/7507215/fisio"}, "reply_to_user": {"reputation": 15342, "user_id": 891373, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e49081f9c8f64cd6617efda90398a2a1?s=128&d=identicon&r=PG", "display_name": "Froyo", "link": "https://stackoverflow.com/users/891373/froyo"}, "edited": false, "score": 0, "creation_date": 1573654406, "post_id": 58837767, "comment_id": 103952242, "body": "@Froyo sorry edited"}, {"owner": {"reputation": 15342, "user_id": 891373, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e49081f9c8f64cd6617efda90398a2a1?s=128&d=identicon&r=PG", "display_name": "Froyo", "link": "https://stackoverflow.com/users/891373/froyo"}, "edited": false, "score": 0, "creation_date": 1573656861, "post_id": 58837767, "comment_id": 103953697, "body": "Follow up question : Are these fields also written or read from the database?"}, {"owner": {"reputation": 174, "user_id": 7507215, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EmkH8.png?s=128&g=1", "display_name": "fisio", "link": "https://stackoverflow.com/users/7507215/fisio"}, "reply_to_user": {"reputation": 15342, "user_id": 891373, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e49081f9c8f64cd6617efda90398a2a1?s=128&d=identicon&r=PG", "display_name": "Froyo", "link": "https://stackoverflow.com/users/891373/froyo"}, "edited": false, "score": 0, "creation_date": 1573657072, "post_id": 58837767, "comment_id": 103953827, "body": "@Froyo Nope, they are generated from html parsing"}], "answers": [{"comments": [{"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 1, "creation_date": 1573657898, "post_id": 58839799, "comment_id": 103954289, "body": "How do you instantiate a <code>Riga</code> with this list? Your code could be a bit more concise replacing the last four lines with <code>repeat(20 - list.size){ list.add(null) }</code>."}, {"owner": {"reputation": 174, "user_id": 7507215, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EmkH8.png?s=128&g=1", "display_name": "fisio", "link": "https://stackoverflow.com/users/7507215/fisio"}, "reply_to_user": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1573658450, "post_id": 58839799, "comment_id": 103954580, "body": "@Tenfour04 <code>var obj=Riga(list[0],list[1]...list[20])</code> thank you! that repeat fun is the icing on the cake. Editing the answer with your suggestion"}], "tags": [], "owner": {"reputation": 174, "user_id": 7507215, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EmkH8.png?s=128&g=1", "display_name": "fisio", "link": "https://stackoverflow.com/users/7507215/fisio"}, "is_accepted": false, "score": 0, "last_activity_date": 1573658988, "last_edit_date": 1573658988, "creation_date": 1573656957, "answer_id": 58839799, "question_id": 58837767, "link": "https://stackoverflow.com/questions/58837767/how-to-put-items-of-different-sized-lists-as-class-parameters/58839799#58839799", "title": "how to put items of different sized lists as class parameters?", "body": "<p>Solved, it was easy. i have preprocessed lists to be of twenty items. Better solutions are welcome.</p>\n\n<pre><code>var list=mutableListOf&lt;Int?&gt;(2,4,5)\nrepeat(20 - list.size){ list.add(null) }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 174, "user_id": 7507215, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EmkH8.png?s=128&g=1", "display_name": "fisio", "link": "https://stackoverflow.com/users/7507215/fisio"}, "edited": false, "score": 1, "creation_date": 1573672224, "post_id": 58843599, "comment_id": 103961720, "body": "very good! this is a very interesting solution! maybe this is cleaner       ` var obj=Riga(list.getOrNull(0),list.getOrNull(1)...list.getOrNul&zwnj;&#8203;l(20)) `                       No need to modify list or class! Perfect! thank you man!"}], "tags": [], "owner": {"reputation": 1293, "user_id": 12141859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62b68b508ccc9cca985ec76d00fc0b40?s=128&d=identicon&r=PG&f=1", "display_name": "Neo", "link": "https://stackoverflow.com/users/12141859/neo"}, "is_accepted": true, "score": 1, "last_activity_date": 1573670556, "creation_date": 1573670556, "answer_id": 58843599, "question_id": 58837767, "link": "https://stackoverflow.com/questions/58837767/how-to-put-items-of-different-sized-lists-as-class-parameters/58843599#58843599", "title": "how to put items of different sized lists as class parameters?", "body": "<p>The following solution is just another constructor:</p>\n\n<pre><code>@Entity\ndata class Riga(\n    @PrimaryKey var dataengNuova: String?=null,\n    var dataengVecchia: Long?=null,\n    var numggeng: Long?=null,\n    ...\n) {\n\n  constructor(values: List&lt;Int&gt;) : this(\n     values.getOrNull(0),\n     values.getOrNull(1),\n     values.getOrNull(2),\n     ...\n  )\n}\n</code></pre>\n\n<p>So passing a list would initalise the Class. If editing the Entity is not possible, create a builder / factory with the same approach.</p>\n"}], "owner": {"reputation": 174, "user_id": 7507215, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EmkH8.png?s=128&g=1", "display_name": "fisio", "link": "https://stackoverflow.com/users/7507215/fisio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 58843599, "answer_count": 2, "score": 0, "last_activity_date": 1573670556, "creation_date": 1573650188, "last_edit_date": 1573658973, "question_id": 58837767, "link": "https://stackoverflow.com/questions/58837767/how-to-put-items-of-different-sized-lists-as-class-parameters", "title": "how to put items of different sized lists as class parameters?", "body": "<p>I have to use a class as android room entity. I want to instantiate every object putting every list item as parameter.  There is a list with different size for each object.</p>\n\n<pre><code>@Entity\ndata class Riga(\n    @PrimaryKey var dataengNuova: String?=null,\n    var dataengVecchia: Long?=null,\n    var numggeng: Long?=null,\n    var dataitaVecchia: Long?=null,\n    var dataitaNuova: Long?=null,\n    var numggita: Long?=null,\n    var dataudioNuova: Long?=null,\n    var dataudioVecchia: Long?=null,\n    var numggaudio: Long?=null\n    var datangVecchia: Long?=null,\n    var numggng: Long?=null,\n    var dataitaecchia: Long?=null,\n    var dataitauova: Long?=null,\n    var numggia: Long?=null,\n    var dataudoNuova: Long?=null,\n    var datauoVecchia: Long?=null,\n    var numggadio: Long?=null\n    var numgia: Long?=null,\n    var dataudNuova: Long?=null,\n    var datauoecchia: Long?=null,\n    var numggdio: Long?=null)\n</code></pre>\n\n<p>How can I do it whereas the list for every object has different size?</p>\n\n<p>i want from something  like this:</p>\n\n<pre><code>var firstObjectParams= listOf(1,2,4,6)\nvar secondObjectParams= listOf(6,79,4657,7885,56777,5657,5677,6776)\n</code></pre>\n\n<p>something like this:</p>\n\n<pre><code>obj1=Riga('hg',1,2,4,6)\nobj2=Riga('hk',6,79,4657,7885,56777,5657,5677,6776)\n</code></pre>\n\n<p>but i have hundreds of lists that have from 1to20items.</p>\n\n<p>I know i can write twenty <code>if (list.size==number)</code> statements. i was wondering about an easier way.</p>\n"}, {"tags": ["spring", "jpa", "kotlin", "spring-data-jpa"], "answers": [{"tags": [], "owner": {"reputation": 1354, "user_id": 3693606, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e71e82ccadf4e6a43c1dc802bb7bce1e?s=128&d=identicon&r=PG&f=1", "display_name": "ArslanAnjum", "link": "https://stackoverflow.com/users/3693606/arslananjum"}, "is_accepted": false, "score": 1, "last_activity_date": 1573652198, "creation_date": 1573652198, "answer_id": 58838383, "question_id": 58836962, "link": "https://stackoverflow.com/questions/58836962/spring-data-how-to-select-from-a-table-as-you-would-poll-from-a-queue/58838383#58838383", "title": "Spring Data: How to select from a table as you would poll from a queue", "body": "<p>You can try something as follows:</p>\n\n<ol>\n<li>Use a column named in_process_by and write the id of user who is processing it. Using id of the user would help you debug if there is some problem in production.</li>\n<li>Use a column named is_processed to store the status of processing</li>\n<li>Use a column named processing_started to store the time when processing was started</li>\n<li>Each user would query the table where in_process_by is null and in_process is false and (now() - processing_started) &lt; [timeout] seconds, and get n records to process.</li>\n<li>Set in_process_by the id of user, is_processed to false and processing_started to now()</li>\n<li>After user has processed the record, he needs to update the record and set is_processed to true.</li>\n<li>Using <a href=\"https://www.baeldung.com/spring-scheduled-tasks\" rel=\"nofollow noreferrer\">@Schedule</a>, update table after [timeout] seconds. You need to update those records where in_process_by is not null, is_processed is false and (now() - processing_started) > [timeout] seconds. You need to update in_process_by to null, is_processed to false and processing_started to '1970-01-01'</li>\n<li>Use conditional update to only allow user to update the record that has in_process_by the id of this user</li>\n</ol>\n"}], "owner": {"reputation": 8135, "user_id": 2391849, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/04df260673cc820547a3083e4ee87fce?s=128&d=identicon&r=PG", "display_name": "Mulgard", "link": "https://stackoverflow.com/users/2391849/mulgard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573652198, "creation_date": 1573647459, "question_id": 58836962, "link": "https://stackoverflow.com/questions/58836962/spring-data-how-to-select-from-a-table-as-you-would-poll-from-a-queue", "title": "Spring Data: How to select from a table as you would poll from a queue", "body": "<p>I have a table with entries which need to be processed by some user. \nI do not want multiple users to process the same row and also every \nrow only needs to get processed once.</p>\n\n<p>My first idea was to do something like this:</p>\n\n<pre><code>@Named\nclass OrderService @Inject constructor(\n        private val repository: OrderRepository\n) {\n    private val queue: Queue&lt;Order&gt; = LinkedList()\n\n    fun getNextOrder(): Order? {\n        if (queue.isEmpty()) {\n            var orders: List&lt;Order&gt; = repository.findTop1000()\n\n            orders.forEach {\n                queue.offer(it)\n            }\n        }\n\n        if (!queue.isEmpty()) {\n            return queue.poll()\n        }\n\n        return null\n    }\n}\n</code></pre>\n\n<p>If the queue is empty select the next 1000 entries in the db and load it into the queue. \nIf after that the queue is not empty return the next element from the queue, return null otherwise.</p>\n\n<p>This would work for sure... but I keep thinking that there must be a much better way of doing this.</p>\n\n<p>Imagine I would change this endpoint to return multiple <code>Order</code>'s and make it pageable. With \nsuch a queueing I would have to do additional things to make sure that I always return the \nexpected page size. So if the queue only contains 5 elements, but the page size is 10 I would \nhave to check if there are more elements in the db and fill the queue before it is empty. </p>\n\n<p>It would be great if there would be a mechanism to \"lock\" a row so that it cannot get selected \nfrom the table as long as it is being processed. </p>\n\n<p>This could again be solved very easily by adding something like a <code>status</code> column and select only rows <code>where status != processing</code> but then the question would be: What if I request a row, set the <code>status</code> to <code>processing</code> and after that never process it (maybe because I finished working or closed the browser or whatever before saving it). I would have <code>status = processing</code> forever.</p>\n\n<p>Are there already good solutions for such a situation?</p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "is_accepted": true, "score": 1, "last_activity_date": 1573657515, "last_edit_date": 1573657515, "creation_date": 1573655596, "answer_id": 58839425, "question_id": 58836101, "link": "https://stackoverflow.com/questions/58836101/kotlin-generics-with-in-produces-type-mismatch-when-compiling/58839425#58839425", "title": "Kotlin generics with in produces Type mismatch when compiling", "body": "<p>Since BRepo is a <code>Repo&lt;B&gt;</code>, it is not a <code>Repo&lt;in A&gt;</code>, (but it would satisfy <code>Repo&lt;out A&gt;</code>).</p>\n\n<p>In other words, a <code>Repo&lt;in A&gt;</code> must be able to accept <code>setParam(A())</code>, but <code>BRepo.setParam()</code> can only accept a B or subclass of B.</p>\n\n<p>Or to put it another way, <code>BRepo</code> is a <code>Repo&lt;B&gt;</code>, which is a tighter restriction on the type than <code>Repo&lt;A&gt;</code> when it comes to writing values (but looser restriction when reading values).</p>\n\n<p>The reason <code>class Repo2(val repo: Repo&lt;*&gt;)</code> doesn't work is that <code>Repo&lt;*&gt;</code> is essentially a <code>Repo&lt;in Nothing/out A&gt;</code>. You can't call <code>setParam()</code> on a <code>Repo&lt;*&gt;</code> with any kind of object.</p>\n\n<p>There's a design flaw in your code that you can't fix simply by changing Repo2's constructor signature. As it stands now, Repo2 needs to be able write A's to the object you pass to it, and a BRepo by definition does not support writing A's, only B's. You will need to make at least one of your class's definitions more flexible about types.</p>\n\n<p>It might be easier to understand the covariance limitation with more common classes:</p>\n\n<pre><code>val stringList: MutableList&lt;String&gt; = ArrayList()\nvar anyList: MutableList&lt;in Any&gt; = ArrayList()\nanyList.add(5)  // ok\nanyList = stringList // Compiler error. \n                     // You wouldn't be able to call add(5) on an ArrayList&lt;String&gt;\n</code></pre>\n\n<p>Basically <code>MutableList&lt;String&gt;</code> is not a <code>MutableList&lt;in Any&gt;</code> the same way <code>Repo&lt;B&gt;</code> is not a <code>Repo&lt;in A&gt;</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 439, "user_id": 1879021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c05bf6915b5a4165defbdf303cdf09e8?s=128&d=identicon&r=PG&f=1", "display_name": "EugenUngurean", "link": "https://stackoverflow.com/users/1879021/eugenungurean"}, "is_accepted": false, "score": 1, "last_activity_date": 1573655634, "creation_date": 1573655634, "answer_id": 58839432, "question_id": 58836101, "link": "https://stackoverflow.com/questions/58836101/kotlin-generics-with-in-produces-type-mismatch-when-compiling/58839432#58839432", "title": "Kotlin generics with in produces Type mismatch when compiling", "body": "<p>The <code>Repo2</code> class expect to consume only type <code>A</code>, use <code>Repo2&lt;T : A&gt;(val repo: Repo&lt;in T&gt;)</code></p>\n\n<pre><code>open class A\nclass B : A()\nclass C : A()\nclass D : A()\n\nclass BRepo : RepoImp&lt;B&gt;()\nclass CRepo : RepoImp&lt;C&gt;()\nclass DRepo : RepoImp&lt;D&gt;()\n\ninterface Repo&lt;T : A&gt; {\n    fun setParam(param: T)\n    fun getParam(): T\n}\n\nabstract class RepoImp&lt;T : A&gt; : Repo&lt;T&gt; {\n    private lateinit var parameter: T\n    override fun setParam(param: T) {\n        parameter = param\n    }\n\n    override fun getParam(): T {\n        return parameter\n    }\n}\n\nclass Repo2&lt;T : A&gt;(val repo: Repo&lt;in T&gt;) {\n\n    fun process(b: DataContainer&lt;T&gt;) {\n        repo.setParam(b.b)\n    }\n}\n\ndata class DataContainer&lt;T : A&gt;(\n    val a: String,\n    val b: T\n)\n\nfun main() {\n\n    val repoB = BRepo()\n    val repoC = CRepo()\n    val repoD = DRepo()\n\n    val repo2 = Repo2(repoB)\n    val repo3 = Repo2(repoC)\n    val repo4 = Repo2(repoD)\n\n    repo2.process(DataContainer(\"Process B type\", B()))\n    repo3.process(DataContainer(\"Process C type\", C()))\n    repo4.process(DataContainer(\"Process D type\", D()))\n\n    println(repo2.repo.getParam())\n    println(repo3.repo.getParam())\n    println(repo4.repo.getParam())\n\n}\n</code></pre>\n"}], "owner": {"reputation": 132, "user_id": 7933960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65bed573d5aa6839fa88b0b0b0e85bc9?s=128&d=identicon&r=PG&f=1", "display_name": "JJaviMS", "link": "https://stackoverflow.com/users/7933960/jjavims"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 58839425, "answer_count": 2, "score": 0, "last_activity_date": 1573657515, "creation_date": 1573644432, "question_id": 58836101, "link": "https://stackoverflow.com/questions/58836101/kotlin-generics-with-in-produces-type-mismatch-when-compiling", "title": "Kotlin generics with in produces Type mismatch when compiling", "body": "<p>I\u00b4m working on a code with generics and when I use an <code>in</code> I got a TypeMismatch when compiling.</p>\n\n<p>The code is the following:</p>\n\n<pre><code>open class A\nclass B:A()\n\ndata class DataContainer(val a:String,\n                         val b:A)\n\ninterface Repo&lt;T:A&gt;{\n    fun setParam(param:T)\n    fun getParam():T\n}\nabstract class RepoImp&lt;T:A&gt;:Repo&lt;T&gt;{\n    private lateinit var parameter:T\n    override fun setParam(param: T) {\n        parameter = param\n    }\n\n    override fun getParam(): T {\n        return parameter\n    }\n}\nclass BRepo:RepoImp&lt;B&gt;()\n\nclass Repo2(val repo: Repo&lt;in A&gt;){\n\n    fun process(b:DataContainer){\n        repo.setParam(b.b)\n    }\n}\n\nval repoB = BRepo()\n\nval repo2 = Repo2(repoB)// Here I got: Type mismatch: inferred type is BRepo but Repo&lt;in A&gt; was expected \n</code></pre>\n\n<p>I also tried changing the attribute repo from Repo2 to Repo&lt;*> </p>\n"}, {"tags": ["android", "kotlin", "android-widget"], "comments": [{"owner": {"reputation": 3982, "user_id": 385138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/SblpO.jpg?s=128&g=1", "display_name": "SIVAKUMAR.J", "link": "https://stackoverflow.com/users/385138/sivakumar-j"}, "edited": false, "score": 0, "creation_date": 1573645597, "post_id": 58835746, "comment_id": 103947398, "body": "U can try workmanager.Reference are : *  <a href=\"https://www.googleadservices.com/pagead/aclk?sa=L&amp;ai=DChcSEwjljJq_juflAhWPFo8KHQu6DD8YABAAGgJzYg&amp;ohost=www.google.com&amp;cid=CAASE-RoAPSPAiud8K9dyGxxOTivtw8&amp;sig=AOD64_0EmpHLukdbGB9g9PN4lE8QL5tPxw&amp;q=&amp;ved=2ahUKEwjr7JO_juflAhXw_XMBHUEZBYIQ0Qx6BAgOEAE&amp;adurl=\" rel=\"nofollow noreferrer\">googleadservices.com/pagead/&hellip;</a>"}, {"owner": {"reputation": 3982, "user_id": 385138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/SblpO.jpg?s=128&g=1", "display_name": "SIVAKUMAR.J", "link": "https://stackoverflow.com/users/385138/sivakumar-j"}, "edited": false, "score": 0, "creation_date": 1573645612, "post_id": 58835746, "comment_id": 103947407, "body": "additional links are : <a href=\"https://developer.android.com/topic/libraries/architecture/workmanager?gclid=EAIaIQobChMI5Yyav47n5QIVjxaPCh0Lugw_EAAYASAAEgJKU_D_BwE\" rel=\"nofollow noreferrer\">developer.android.com/topic/libraries/architecture/&hellip;</a>"}, {"owner": {"reputation": 1368, "user_id": 9046350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff03988badcde08ee17f62f3e9efeb25?s=128&d=identicon&r=PG&f=1", "display_name": "martin1337", "link": "https://stackoverflow.com/users/9046350/martin1337"}, "reply_to_user": {"reputation": 3982, "user_id": 385138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/SblpO.jpg?s=128&g=1", "display_name": "SIVAKUMAR.J", "link": "https://stackoverflow.com/users/385138/sivakumar-j"}, "edited": false, "score": 0, "creation_date": 1573646325, "post_id": 58835746, "comment_id": 103947775, "body": "Tried alarm manager but it still showing Problem loading widget text"}, {"owner": {"reputation": 3982, "user_id": 385138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/SblpO.jpg?s=128&g=1", "display_name": "SIVAKUMAR.J", "link": "https://stackoverflow.com/users/385138/sivakumar-j"}, "edited": false, "score": 0, "creation_date": 1573646435, "post_id": 58835746, "comment_id": 103947823, "body": "Alarm manager are very old .Try work manager ."}, {"owner": {"reputation": 1368, "user_id": 9046350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff03988badcde08ee17f62f3e9efeb25?s=128&d=identicon&r=PG&f=1", "display_name": "martin1337", "link": "https://stackoverflow.com/users/9046350/martin1337"}, "reply_to_user": {"reputation": 3982, "user_id": 385138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/SblpO.jpg?s=128&g=1", "display_name": "SIVAKUMAR.J", "link": "https://stackoverflow.com/users/385138/sivakumar-j"}, "edited": false, "score": 0, "creation_date": 1573652369, "post_id": 58835746, "comment_id": 103951090, "body": "Still cant call onUpdate function. onReceive is called as manager is calling it but onUpdate is called only as I create widget on homescreen for a first time"}, {"owner": {"reputation": 3982, "user_id": 385138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/SblpO.jpg?s=128&g=1", "display_name": "SIVAKUMAR.J", "link": "https://stackoverflow.com/users/385138/sivakumar-j"}, "edited": false, "score": 0, "creation_date": 1573799730, "post_id": 58835746, "comment_id": 104011225, "body": "which onReceive method&gt;.If u are using work manager means then it is not needed to use broadcast receiver"}], "answers": [{"comments": [{"owner": {"reputation": 1368, "user_id": 9046350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff03988badcde08ee17f62f3e9efeb25?s=128&d=identicon&r=PG&f=1", "display_name": "martin1337", "link": "https://stackoverflow.com/users/9046350/martin1337"}, "edited": false, "score": 0, "creation_date": 1573645781, "post_id": 58835860, "comment_id": 103947505, "body": "It says on 1000 in setRepeating that it will be forced up to 60000ms"}], "tags": [], "owner": {"reputation": 547, "user_id": 6544105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edadbcc871577d3e5899587c8b4fa9fa?s=128&d=identicon&r=PG&f=1", "display_name": "dustblue", "link": "https://stackoverflow.com/users/6544105/dustblue"}, "is_accepted": false, "score": 0, "last_activity_date": 1573643531, "creation_date": 1573643531, "answer_id": 58835860, "question_id": 58835746, "link": "https://stackoverflow.com/questions/58835746/how-to-update-widget-with-data-from-activity/58835860#58835860", "title": "How to update widget with data from Activity?", "body": "<p>From <a href=\"https://developer.android.com/reference/android/appwidget/AppWidgetProviderInfo\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/appwidget/AppWidgetProviderInfo</a></p>\n\n<blockquote>\n  <p>Note: Updates requested with <em>updatePeriodMillis</em> will not be delivered\n  more than once every 30 minutes.</p>\n</blockquote>\n\n<p>If you want frequent updates, you should use </p>\n\n<blockquote>\n  <p><a href=\"https://developer.android.com/reference/android/app/AlarmManager?hl=en\" rel=\"nofollow noreferrer\">AlarmManager</a></p>\n</blockquote>\n\n<p>Use a service and update the widget, example:</p>\n\n<pre><code>Intent intent = new Intent(context, WidgetUpdateService.class);\nPendingIntent pendingIntent = PendingIntent.getService(context, 0, intent, 0);\nAlarmManager alarm = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);\nalarm.cancel(pending);\nalarm.setRepeating(AlarmManager.ELAPSED_REALTIME,\n    SystemClock.elapsedRealtime(), 1000, pendingIntent);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 816, "user_id": 2172227, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/58de183692ca1345ef0457f347a358ce?s=128&d=identicon&r=PG&f=1", "display_name": "Mariusz", "link": "https://stackoverflow.com/users/2172227/mariusz"}, "is_accepted": false, "score": 0, "last_activity_date": 1586463514, "creation_date": 1586463514, "answer_id": 61129553, "question_id": 58835746, "link": "https://stackoverflow.com/questions/58835746/how-to-update-widget-with-data-from-activity/61129553#61129553", "title": "How to update widget with data from Activity?", "body": "<p><code>AppWidgetProvider.onUpdate</code> is called by <code>AppWidgetProvider.onReceive</code>. Call <code>super.onReceive(context, intent)</code> at the end of <code>onReceive</code> method. Data will be updated before <code>onUpdate</code> will be called.</p>\n\n<pre><code>override fun onReceive(context: Context?, intent: Intent?) {\n    val extras = intent?.extras\n\n    extras?.let { \n        time = extras.getString(REM_TIME)?:\"\"\n        color = extras.getInt(REM_TIME_COLOR)\n    }\n\n    super.onReceive(context, intent)\n}\n</code></pre>\n"}], "owner": {"reputation": 1368, "user_id": 9046350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff03988badcde08ee17f62f3e9efeb25?s=128&d=identicon&r=PG&f=1", "display_name": "martin1337", "link": "https://stackoverflow.com/users/9046350/martin1337"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 964, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1586463514, "creation_date": 1573643126, "last_edit_date": 1573715402, "question_id": 58835746, "link": "https://stackoverflow.com/questions/58835746/how-to-update-widget-with-data-from-activity", "title": "How to update widget with data from Activity?", "body": "<p>I want to update widget with data from my <code>Activity</code> every second. I have Item which has timers and its updating by <code>onBind</code> method sending payload to it. Every time it will update data and send new (Strings, Dates, Color resources) to payload, I want to update existing Widget with these data. I should update it every second as timer goes on. (payload is sent every second) Is this possible? Because I can add my data to extras and send Intent to <code>AppWidgetProvider</code>, but I don't know how to update views in Widget with new data sent into <code>onReceive</code>. Tried this code in onUpdate function. Which should be called every 1000ms which I set in xml for widget provider - <code>android:updatePeriodMillis=\"1000\"</code>. What is happening is Grey box on my homescreen with <code>Problem loading widget</code> text. No crashes or errors were present in logs.</p>\n\n<p>RecyclerView item: </p>\n\n<pre><code>private fun updateWidgetTimer(text: String, color: Int){\n        val int = Intent(a, WidgetProvider::class.java)\n        int.apply {\n            putExtra(WidgetProvider.REM_TIME, text)\n            putExtra(WidgetProvider.REM_TIME_COLOR, color)\n            action = AppWidgetManager.ACTION_APPWIDGET_UPDATE\n        }\n    }\n</code></pre>\n\n<p>AppWidgetProvider:</p>\n\n<pre><code>   private var time: String = \"\"\n   private var color: Int = R.color.colorGreen\n   override fun onUpdate(\n        context: Context?,\n        appWidgetManager: AppWidgetManager?,\n        appWidgetIds: IntArray?\n    ) {\n        val remoteViews = RemoteViews(context?.packageName, R.layout.widget_custom_layout)\n        remoteViews.setTextViewText(R.id.timer, time)\n        context?.let {\n            remoteViews.setTextColor(R.id.timer, ContextCompat.getColor(context, color))\n        }\n    }\n\n    override fun onReceive(context: Context?, intent: Intent?) {\n            super.onReceive(context, intent)\n\n            val extras = intent?.extras\n\n            extras?.let { \n                time = extras.getString(REM_TIME)?:\"\"\n                color = extras.getInt(REM_TIME_COLOR)\n            }\n\n        }\n</code></pre>\n\n<p>UPDATE:\nPayload is successfully send to onReceive, but as onUpdate is called, none of my widgets are updated with new data.</p>\n\n<p>Example of my updated onUpdate function:</p>\n\n<pre><code>override fun onUpdate(\n        context: Context?,\n        appWidgetManager: AppWidgetManager?,\n        appWidgetIds: IntArray?\n    ) {\n\n        context?.let {\n            val currWidgetInstanceName = ComponentName(context, WidgetProvider::class.java)\n            val widgetManager = AppWidgetManager.getInstance(context)\n\n            val widgetIds = widgetManager.getAppWidgetIds(currWidgetInstanceName)\n\n            widgetIds?.forEach {wId-&gt;\n                val remoteViews = RemoteViews(context.packageName, R.layout.widget_layout)\n                remoteViews.apply {\n                    //set info title\n                    setTextViewText(R.id.title, title)\n\n                    //set subtitle\n                    setTextViewText(R.id.subT, subt)\n\n                    //set info\n                    setTextViewText(R.id.info, info)\n\n                    //set rem timer\n                    setTextViewText(R.id.outTimer, remTime)\n                    setTextColor(R.id.outTimer, ContextCompat.getColor(context, remTimeColor))\n                }\n\n                widgetManager?.updateAppWidget(currWidgetInstanceName, remoteViews)\n            }\n\n        }\n    }\n</code></pre>\n"}, {"tags": ["kotlin", "random", "probability", "probability-theory"], "comments": [{"owner": {"reputation": 3754, "user_id": 4732082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/781cea048e688814961606ddf35c5881?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous", "link": "https://stackoverflow.com/users/4732082/anonymous"}, "edited": false, "score": 0, "creation_date": 1573649979, "post_id": 58835661, "comment_id": 103949644, "body": "I recommend editing that info into your question. Good question."}, {"owner": {"reputation": 14257, "user_id": 820127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81f8fffeec4f2ba3e75aebe941e4e5dd?s=128&d=identicon&r=PG", "display_name": "rossum", "link": "https://stackoverflow.com/users/820127/rossum"}, "edited": false, "score": 0, "creation_date": 1573658705, "post_id": 58835661, "comment_id": 103954728, "body": "If your bit source is biased, then you need to look at a de-skewing technique.  <a href=\"https://tools.ietf.org/html/rfc4086\" rel=\"nofollow noreferrer\">RFC 4086</a> gives some suggestions.  The von Neumann technique (see section 4.2 of the RFC) is simple, though there are others.  To some extent you have to fit the de-skewing technique to the particular biases of your bit source."}, {"owner": {"reputation": 130, "user_id": 4038217, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Xl9qKfL57ys/AAAAAAAAAAI/AAAAAAAAAe8/AXYJSEJCZaA/photo.jpg?sz=128", "display_name": "Andika Wasisto", "link": "https://stackoverflow.com/users/4038217/andika-wasisto"}, "reply_to_user": {"reputation": 14257, "user_id": 820127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81f8fffeec4f2ba3e75aebe941e4e5dd?s=128&d=identicon&r=PG", "display_name": "rossum", "link": "https://stackoverflow.com/users/820127/rossum"}, "edited": false, "score": 0, "creation_date": 1573671482, "post_id": 58835661, "comment_id": 103961400, "body": "@rossum Its shannon entropy is 0.99916596. It passes all 114 dieharder tests. One of them is regarded as weak. What kind of deskewing method do you think is the best for my case?"}, {"owner": {"reputation": 14582, "user_id": 871096, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/39b6e181c797ef3ab2119322f7cac20b?s=128&d=identicon&r=PG", "display_name": "Robert Dodier", "link": "https://stackoverflow.com/users/871096/robert-dodier"}, "edited": false, "score": 0, "creation_date": 1573694695, "post_id": 58835661, "comment_id": 103969488, "body": "This is an interesting question, but the description is still unclear. You should state explicitly how you are constructing the integer from bits. You should also be specific about the distribution of the generated integers -- there is a lot of stuff on the linked-to page, so it&#39;s unreasonable to expect others to try to figure which of several things you might be talking about."}, {"owner": {"reputation": 130, "user_id": 4038217, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Xl9qKfL57ys/AAAAAAAAAAI/AAAAAAAAAe8/AXYJSEJCZaA/photo.jpg?sz=128", "display_name": "Andika Wasisto", "link": "https://stackoverflow.com/users/4038217/andika-wasisto"}, "reply_to_user": {"reputation": 14582, "user_id": 871096, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/39b6e181c797ef3ab2119322f7cac20b?s=128&d=identicon&r=PG", "display_name": "Robert Dodier", "link": "https://stackoverflow.com/users/871096/robert-dodier"}, "edited": false, "score": 0, "creation_date": 1573743306, "post_id": 58835661, "comment_id": 103990279, "body": "@RobertDodier Sorry. I&#39;ve annotated the page. I hope it&#39;s a little bit clearer now"}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1573744326, "post_id": 58835661, "comment_id": 103990905, "body": "All of the 16 possible outcomes are mutually exclusive, you&#39;ll only get one of them when you draw a 4 bit sample.  Hence your handwritten table violates the requirement that all of the mutually exclusive probabilities sum to 1, and thus it cannot possibly be correct."}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1573744818, "post_id": 58835661, "comment_id": 103991224, "body": "It looks like you&#39;re calculating the probabilities associated with the number of 1-bits (0, 1, 2, 3, 4) rather than the probabilities of getting each outcome.  These are two entirely different things.  If the bits are independent and equally likely to yield 0/1, then all of the 16 combinations have probability 1/16."}, {"owner": {"reputation": 18474, "user_id": 53328, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5146a847dccfbe3a906e327b8493f58d?s=128&d=identicon&r=PG", "display_name": "Martin Wickman", "link": "https://stackoverflow.com/users/53328/martin-wickman"}, "edited": false, "score": 0, "creation_date": 1573744855, "post_id": 58835661, "comment_id": 103991240, "body": "Why is the probability of getting 01010101 higher than 00000000? This makes no sense to me."}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "reply_to_user": {"reputation": 18474, "user_id": 53328, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5146a847dccfbe3a906e327b8493f58d?s=128&d=identicon&r=PG", "display_name": "Martin Wickman", "link": "https://stackoverflow.com/users/53328/martin-wickman"}, "edited": false, "score": 0, "creation_date": 1573745069, "post_id": 58835661, "comment_id": 103991398, "body": "@MartinWickman Both 01010101 and 00000000 are equally likely.  However, getting four 1&#39;s out of eight is more likely than getting zero 1&#39;s."}], "answers": [{"comments": [{"owner": {"reputation": 130, "user_id": 4038217, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Xl9qKfL57ys/AAAAAAAAAAI/AAAAAAAAAe8/AXYJSEJCZaA/photo.jpg?sz=128", "display_name": "Andika Wasisto", "link": "https://stackoverflow.com/users/4038217/andika-wasisto"}, "edited": false, "score": 0, "creation_date": 1573671116, "post_id": 58838984, "comment_id": 103961236, "body": "Yes, I concatenated the bits instead of adding them. The randomness is gathered from the shot noise of a pixel on my phone camera so technically it&#39;s a quantum RNG. Its shannon entropy is 0.99916596. It also passes all 114 dieharder tests. One of them is regarded as weak though. I&#39;m not sure if my method is good enough because some numbers are generated more often than the others. If I&#39;m generating standard 32-bit integers, 0 and 1 will never ever be generated because my boolean generator would never repeatedly generate a same bit for 32 times. What kind of unbiasing method do you suggest?"}, {"owner": {"reputation": 28567, "user_id": 815724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a514cd424088a3ba3012f5d77f2e334?s=128&d=identicon&r=PG", "display_name": "Peter O.", "link": "https://stackoverflow.com/users/815724/peter-o"}, "reply_to_user": {"reputation": 130, "user_id": 4038217, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Xl9qKfL57ys/AAAAAAAAAAI/AAAAAAAAAe8/AXYJSEJCZaA/photo.jpg?sz=128", "display_name": "Andika Wasisto", "link": "https://stackoverflow.com/users/4038217/andika-wasisto"}, "edited": false, "score": 1, "creation_date": 1573672294, "post_id": 58838984, "comment_id": 103961756, "body": "For random number generation purposes, min-entropy is more appropriate than Shannon entropy.  Also, there are many unbiasing techniques available: von Neumann, HMAC-SHA512, and others.  (For example, Cliff/Boyd/Gonzalez in 2009 reviewed HMAC as a randomness extractor.) Also note that although the underlying bit generator may be uniform, a random walk distribution from that generator is far from uniform."}, {"owner": {"reputation": 130, "user_id": 4038217, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Xl9qKfL57ys/AAAAAAAAAAI/AAAAAAAAAe8/AXYJSEJCZaA/photo.jpg?sz=128", "display_name": "Andika Wasisto", "link": "https://stackoverflow.com/users/4038217/andika-wasisto"}, "edited": false, "score": 0, "creation_date": 1573675537, "post_id": 58838984, "comment_id": 103963236, "body": "That&#39;s the problem I&#39;m trying to solve. Is there a way to make the random walk distribution from the bit generator more uniform? Does unbiasing solve that problem? I can make the generated integer as a seed of a PRNG. The random walk distribution should be more uniform. But I&#39;m not sure if it&#39;s a good idea since the generated numbers will be more predictable"}, {"owner": {"reputation": 28567, "user_id": 815724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a514cd424088a3ba3012f5d77f2e334?s=128&d=identicon&r=PG", "display_name": "Peter O.", "link": "https://stackoverflow.com/users/815724/peter-o"}, "reply_to_user": {"reputation": 130, "user_id": 4038217, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Xl9qKfL57ys/AAAAAAAAAAI/AAAAAAAAAe8/AXYJSEJCZaA/photo.jpg?sz=128", "display_name": "Andika Wasisto", "link": "https://stackoverflow.com/users/4038217/andika-wasisto"}, "edited": false, "score": 0, "creation_date": 1573676585, "post_id": 58838984, "comment_id": 103963692, "body": "The page you linked to says: &quot;If it\u2019s heads, you take one step forward.  If it\u2019s tails, you take one step back.&quot; Put another way: &quot;If the bit is 0, add 1.  If the bit is 1, subtract 1.&quot;  You start at 0, then add or subtract 1 from it depending on the outcome of each of eight bits, then give back the result.  This number can range from -8 to 8.  That is far from being a uniform distribution. (If that is not what you mean, please edit your question and detail how you are forming random numbers with your bit generator, what results you&#39;re getting (with examples), and what results you expect.)"}, {"owner": {"reputation": 28567, "user_id": 815724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a514cd424088a3ba3012f5d77f2e334?s=128&d=identicon&r=PG", "display_name": "Peter O.", "link": "https://stackoverflow.com/users/815724/peter-o"}, "reply_to_user": {"reputation": 130, "user_id": 4038217, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Xl9qKfL57ys/AAAAAAAAAAI/AAAAAAAAAe8/AXYJSEJCZaA/photo.jpg?sz=128", "display_name": "Andika Wasisto", "link": "https://stackoverflow.com/users/4038217/andika-wasisto"}, "edited": false, "score": 0, "creation_date": 1573676599, "post_id": 58838984, "comment_id": 103963697, "body": "On the other hand, a &quot;uniform random walk&quot;, as you seem to want, is also called &quot;white noise&quot;.  For this kind of walk, just take 8-bit chunks from the random bit generator and treat each of them as the two&#39;s-complement form of an 8-bit integer."}, {"owner": {"reputation": 130, "user_id": 4038217, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Xl9qKfL57ys/AAAAAAAAAAI/AAAAAAAAAe8/AXYJSEJCZaA/photo.jpg?sz=128", "display_name": "Andika Wasisto", "link": "https://stackoverflow.com/users/4038217/andika-wasisto"}, "edited": false, "score": 0, "creation_date": 1573743105, "post_id": 58838984, "comment_id": 103990152, "body": "I&#39;ve annotated the page with probabilities for each possible 4-bit integer. You can see that they&#39;re not uniform"}, {"owner": {"reputation": 130, "user_id": 4038217, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Xl9qKfL57ys/AAAAAAAAAAI/AAAAAAAAAe8/AXYJSEJCZaA/photo.jpg?sz=128", "display_name": "Andika Wasisto", "link": "https://stackoverflow.com/users/4038217/andika-wasisto"}, "edited": false, "score": 0, "creation_date": 1573748943, "post_id": 58838984, "comment_id": 103993852, "body": "I don&#39;t add/subtract the bits. I concatenate them and they&#39;re not uniform. How can they be uniform when integers with the same number of 1&#39;s and 0&#39;s have higher probabilities? Here&#39;s my implementation using Kotlin: <a href=\"https://gist.github.com/awasisto/ea60b86bf0c619bfe689a461e0fd7f1f#file-rng-kt-L49-L75\" rel=\"nofollow noreferrer\">gist.github.com/awasisto/&hellip;</a>"}, {"owner": {"reputation": 130, "user_id": 4038217, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Xl9qKfL57ys/AAAAAAAAAAI/AAAAAAAAAe8/AXYJSEJCZaA/photo.jpg?sz=128", "display_name": "Andika Wasisto", "link": "https://stackoverflow.com/users/4038217/andika-wasisto"}, "edited": false, "score": 0, "creation_date": 1573749711, "post_id": 58838984, "comment_id": 103994368, "body": "And here&#39;s a small sample of the booleans generated using my hardware-based RNG <a href=\"https://drive.google.com/file/d/1lmiFjT2qs14q0ykONd9e1djTKBYrMC06/view?usp=sharing\" rel=\"nofollow noreferrer\">drive.google.com/file/d/1lmiFjT2qs14q0ykONd9e1djTKBYrMC06/&hellip;</a>"}, {"owner": {"reputation": 28567, "user_id": 815724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a514cd424088a3ba3012f5d77f2e334?s=128&d=identicon&r=PG", "display_name": "Peter O.", "link": "https://stackoverflow.com/users/815724/peter-o"}, "reply_to_user": {"reputation": 130, "user_id": 4038217, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Xl9qKfL57ys/AAAAAAAAAAI/AAAAAAAAAe8/AXYJSEJCZaA/photo.jpg?sz=128", "display_name": "Andika Wasisto", "link": "https://stackoverflow.com/users/4038217/andika-wasisto"}, "edited": false, "score": 0, "creation_date": 1573750942, "post_id": 58838984, "comment_id": 103995151, "body": "I have edited my answer.  And by the way, the fact that chunks of bits can have a nonuniform number of bits, even if the chunks are uniformly distributed, is an interesting paradox in probability theory.  If you want to know more, you should ask a question about that fact in math.stackexchange.com, and compare the <i>uniform distribution</i> with the <i>uniform sum distribution</i>."}, {"owner": {"reputation": 130, "user_id": 4038217, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Xl9qKfL57ys/AAAAAAAAAAI/AAAAAAAAAe8/AXYJSEJCZaA/photo.jpg?sz=128", "display_name": "Andika Wasisto", "link": "https://stackoverflow.com/users/4038217/andika-wasisto"}, "edited": false, "score": 0, "creation_date": 1573810318, "post_id": 58838984, "comment_id": 104015709, "body": "Thanks for pointing out the concurrency problem. I&#39;ll synchronize the entire block. What kind of error does my approach of building the bytes, ints, and longs prone to?"}, {"owner": {"reputation": 28567, "user_id": 815724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a514cd424088a3ba3012f5d77f2e334?s=128&d=identicon&r=PG", "display_name": "Peter O.", "link": "https://stackoverflow.com/users/815724/peter-o"}, "reply_to_user": {"reputation": 130, "user_id": 4038217, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Xl9qKfL57ys/AAAAAAAAAAI/AAAAAAAAAe8/AXYJSEJCZaA/photo.jpg?sz=128", "display_name": "Andika Wasisto", "link": "https://stackoverflow.com/users/4038217/andika-wasisto"}, "edited": false, "score": 0, "creation_date": 1573818675, "post_id": 58838984, "comment_id": 104020364, "body": "Your current approach is more complicated than it has to be to extract <code>byte</code>s, <code>int</code>s, and <code>long</code>s from a string of bits, making it prone to unexpected logic errors such as the one you&#39;re suffering with (involving the distribution of the bits).  Did you try the code I suggested in my answer?"}, {"owner": {"reputation": 130, "user_id": 4038217, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Xl9qKfL57ys/AAAAAAAAAAI/AAAAAAAAAe8/AXYJSEJCZaA/photo.jpg?sz=128", "display_name": "Andika Wasisto", "link": "https://stackoverflow.com/users/4038217/andika-wasisto"}, "edited": false, "score": 0, "creation_date": 1573832656, "post_id": 58838984, "comment_id": 104027790, "body": "Mine and yours <a href=\"https://ideone.com/T1NwJg\" rel=\"nofollow noreferrer\">return the same outputs</a> but yours needs more casts when generating bytes because JVM languages can&#39;t do bitwise operations on <code>byte</code>. I think it&#39;s okay that the generated numbers aren&#39;t so uniform since in most cases we only need to generate bounded numbers"}, {"owner": {"reputation": 28567, "user_id": 815724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a514cd424088a3ba3012f5d77f2e334?s=128&d=identicon&r=PG", "display_name": "Peter O.", "link": "https://stackoverflow.com/users/815724/peter-o"}, "reply_to_user": {"reputation": 130, "user_id": 4038217, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Xl9qKfL57ys/AAAAAAAAAAI/AAAAAAAAAe8/AXYJSEJCZaA/photo.jpg?sz=128", "display_name": "Andika Wasisto", "link": "https://stackoverflow.com/users/4038217/andika-wasisto"}, "edited": false, "score": 0, "creation_date": 1573833389, "post_id": 58838984, "comment_id": 104028243, "body": "In any case, the fact remains that random chunks of bits can have a nonuniform number of set bits, even if the chunks are independent and uniformly distributed.  It sounds that this is a paradox in probability theory that is counterintuitive to you.  If you need more help understanding this, this site is the wrong place to do so; try asking in math.stackexchange.com instead. Also, I have already given you pointers in my answer on how to generate integers in an arbitrary integer range."}], "tags": [], "owner": {"reputation": 28567, "user_id": 815724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a514cd424088a3ba3012f5d77f2e334?s=128&d=identicon&r=PG", "display_name": "Peter O.", "link": "https://stackoverflow.com/users/815724/peter-o"}, "is_accepted": false, "score": 2, "last_activity_date": 1573771032, "last_edit_date": 1573771032, "creation_date": 1573654141, "answer_id": 58838984, "question_id": 58835661, "link": "https://stackoverflow.com/questions/58835661/how-to-make-a-uniform-random-integer-generator-from-a-random-boolean-generator/58838984#58838984", "title": "How to Make a Uniform Random Integer Generator from a Random Boolean Generator?", "body": "<p>Based on your edit, there appears to be a misunderstanding here. By \"uniform 4-bit integers\", you seem to have the following in mind:</p>\n\n<ol>\n<li>Start at 0.</li>\n<li>Generate a random bit. If it's 1, add 1, and otherwise subtract 1.</li>\n<li>Repeat step 2 three more times.</li>\n<li>Output the resulting number.</li>\n</ol>\n\n<p>Although the random bit generator may generate bits where each outcome is as likely as the other to be randomly generated, and each 4-bit chunk may be just as likely as any other to be randomly generated, the number of bits in each chunk is not uniformly distributed.</p>\n\n<p>What range of integers do you want? Say you're generating 4-bit integers. Do you want a range of [-4, 4], as in the 4-bit random walk in your question, or do you want a range of [-8, 7], which is what you get when you treat a 4-bit chunk of bits as a two's complement integer?</p>\n\n<p>If the former, the random walk won't generate a uniform distribution, and you will need to tackle the problem in a different way.</p>\n\n<p>In this case, to generate a uniform random number in the range [-4, 4], do the following:</p>\n\n<ol>\n<li>Take 4 bits of the random bit generator and treat them as an integer in [0, 15);</li>\n<li>If the integer is greater than 8, go to step 1.</li>\n<li>Subtract 4 from the integer and output it.</li>\n</ol>\n\n<p>This algorithm uses <em>rejection sampling</em>, but is variable-time (thus is not appropriate whenever timing differences can be exploited in a security attack). Numbers in other ranges are similarly generated, but the details are too involved to describe in this answer. See my article on <a href=\"https://peteroupc.github.io/randomfunc.html\" rel=\"nofollow noreferrer\">random number generation methods</a> for details.</p>\n\n<hr>\n\n<p>Based on the code you've shown me, your approach to building up <code>byte</code>s, <code>int</code>s, and <code>long</code>s is highly error-prone.  For example, a better way to build up an 8-bit byte to achieve what you want is as follows (keeping in mind that I am not very familiar with Kotlin, so the syntax may be wrong):</p>\n\n<pre><code>val i = 0\nval b = 0\nfor (i = 0; i &lt; 8; i++) {\n   b = b &lt;&lt; 1; // Shift old bits\n   if (bitStringBuilder[i] == '1') {\n      b = b | 1; // Set new bit\n   } else {\n      b = b | 0; // Don't set new bit\n   }\n}\nvalue = (b as byte) as T\n</code></pre>\n\n<p>Also, if <code>MediatorLiveData</code> is not thread safe, then neither is your approach to gathering bits using a <code>StringBuilder</code> (especially because <code>StringBuilder</code> is not thread safe).</p>\n\n<hr>\n\n<p><s>The approach you suggest, </s> combining eight bits of the boolean generator to make one uniform integer, will work in theory. However, in practice there are several issues:</p>\n\n<ul>\n<li>You don't mention what kind of hardware it is. In most cases, the hardware won't be likely to generate uniformly random Boolean bits unless the hardware is a so-called <em>true random number generator</em> designed for this purpose. For example, the hardware might generate uniformly distributed bits but have periodic behavior.</li>\n<li><em>Entropy</em> means how hard it is to predict the values a generator produces, compared to ideal random values. For example, a 64-bit data block with 32 bits of entropy is as hard to predict as an ideal random 32-bit data block. Characterizing a hardware device's entropy (or ability to produce unpredictable values) is far from trivial. Among other things, this involves entropy tests that have to be done across the full range of operating conditions suitable for the hardware (e.g., temperature, voltage).</li>\n<li>Most hardware cannot produce uniform random values, so usually an additional step, called <em>randomness extraction</em>, <em>entropy extraction</em>, <em>unbiasing</em>, <em>whitening</em>, or <em>deskewing</em>, is done to transform the values the hardware generates into uniformly distributed random numbers. However, it works best if the hardware's entropy is characterized first (see previous point).</li>\n<li>Finally, you still have to test whether the whole process delivers numbers that are \"adequately random\" for your purposes. There are several statistical tests that attempt to do so, such as NIST's Statistical Test Suite or TestU01.</li>\n</ul>\n\n<p>For more information, see \"<a href=\"https://peteroupc.github.io/random.html#Nondeterministic_Sources_and_Seed_Generation\" rel=\"nofollow noreferrer\">Nondeterministic Sources and Seed Generation</a>\".</p>\n\n<hr>\n\n<p>After your edits to this page, it seems you're going about the problem the wrong way. To produce a uniform random number, you don't <em>add</em> uniformly distributed random bits (e.g., <code>bit() + bit() + bit()</code>), but <em>concatenate</em> them (e.g., <code>(bit() &lt;&lt; 2) | (bit() &lt;&lt; 1) | bit()</code>). However, again, this will work in theory, but not in practice, for the reasons I mention above.</p>\n"}], "owner": {"reputation": 130, "user_id": 4038217, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Xl9qKfL57ys/AAAAAAAAAAI/AAAAAAAAAe8/AXYJSEJCZaA/photo.jpg?sz=128", "display_name": "Andika Wasisto", "link": "https://stackoverflow.com/users/4038217/andika-wasisto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1573907663, "creation_date": 1573642850, "last_edit_date": 1573907663, "question_id": 58835661, "link": "https://stackoverflow.com/questions/58835661/how-to-make-a-uniform-random-integer-generator-from-a-random-boolean-generator", "title": "How to Make a Uniform Random Integer Generator from a Random Boolean Generator?", "body": "<p>I have a hardware-based boolean generator that generates either 1 or 0 uniformly. How to use it to make a uniform 8-bit integer generator? I'm currently using the collected booleans to create the binary string for the 8-bit integer. The generated integers aren't uniformly distributed. It follows the distribution explained on <a href=\"http://galileo.phys.virginia.edu/classes/152.mf1i.spring02/RandomWalk.htm\" rel=\"nofollow noreferrer\">this page</a>. Integers with \u0336a\u0336 \u0336l\u0336o\u0336t\u0336 \u0336o\u0336f\u0336 \u0336a\u0336l\u0336t\u0336e\u0336r\u0336n\u0336a\u0336t\u0336I\u0336n\u0336g\u0336 \u0336b\u0336I\u0336t\u0336s\u0336 the same number of 1's and 0's such as 85 (01010101) and -86 (10101010) have the highest chance to be generated and integers with a lot of repeating bits such as 0 (00000000) and -1 (11111111) have the lowest chance.</p>\n\n<p>Here's the page that I've annotated with probabilities for each possible 4-bit integer. We can see that they're not uniform. 3, 5, 6, -7, -6, and -4 that have the same number of 1's and 0's have \u2076/\u2081\u2086 probability while 0 and -1 that all of their bits are the same only have \u00b9/\u2081\u2086 probability.</p>\n\n<p><img src=\"https://i.imgur.com/y9J4QfM.png\" alt=\"annotated page\">. </p>\n\n<p>And here's <a href=\"https://gist.github.com/awasisto/ea60b86bf0c619bfe689a461e0fd7f1f#file-rng-kt-L49-L75\" rel=\"nofollow noreferrer\">my implementation on Kotlin</a></p>\n"}, {"tags": ["android", "kotlin", "calendar", "android-calendar"], "owner": {"reputation": 4700, "user_id": 1443976, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/a1krG.jpg?s=128&g=1", "display_name": "Manohar Perepa", "link": "https://stackoverflow.com/users/1443976/manohar-perepa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1573642498, "creation_date": 1573642498, "question_id": 58835542, "link": "https://stackoverflow.com/questions/58835542/equivalent-ekcalendarchooser-in-android", "title": "Equivalent EKCalendarChooser in Android", "body": "<p>I am trying to implement the clone of EKCalendar in Android but I'm struck in displaying the list of holidays &amp; birthdays. Adding to that, I need to display on the users choice which email does he want to show.</p>\n\n<p>So far the code goes as,</p>\n\n<pre><code>private fun loadCalendarEvents(emailString: String) {\n    val projectionArray =\n        arrayOf(\n            CalendarContract.Calendars._ID,\n            CalendarContract.Events.TITLE,\n            CalendarContract.Events.DESCRIPTION,\n            CalendarContract.Events.DTSTART,\n            CalendarContract.Events.DTEND,\n            CalendarContract.Events.ALL_DAY,\n            CalendarContract.Events.EVENT_LOCATION,\n            CalendarContract.Attendees.ORGANIZER,\n            CalendarContract.Events.CALENDAR_TIME_ZONE,\n            CalendarContract.Events.ACCOUNT_TYPE\n        )\n\n    val startTime = Calendar.getInstance()\n\n    startTime.set(Calendar.HOUR_OF_DAY, 0)\n    startTime.set(Calendar.MINUTE, 0)\n    startTime.set(Calendar.SECOND, 0)\n\n    var fromTime = registrationPreferences.getFromTime()\n    var toTime = registrationPreferences.getToTime()\n\n    when {\n        fromTime.equals(\"6 Months\", true) -&gt; {\n            startTime.add(Calendar.MONTH, -6)\n            startTime.set(Calendar.DAY_OF_MONTH, 1)\n        }\n        fromTime.equals(\"1 Year\", true) -&gt; {\n            startTime.add(Calendar.YEAR, -1)\n        }\n        fromTime.equals(\"2 Years\", true) -&gt; {\n            startTime.add(Calendar.YEAR, -2)\n        }\n        fromTime.equals(\"3 Years\", true) -&gt; {\n            startTime.add(Calendar.YEAR, -3)\n        }\n    }\n\n    val endTime = Calendar.getInstance()\n    when {\n        toTime.equals(\"6 Months\", true) -&gt; {\n            endTime.add(Calendar.MONTH, 6)\n        }\n        toTime.equals(\"1 Year\", true) -&gt; {\n            endTime.add(Calendar.YEAR, 1)\n        }\n        toTime.equals(\"2 Years\", true) -&gt; {\n            endTime.add(Calendar.YEAR, 2)\n        }\n        toTime.equals(\"3 Years\", true) -&gt; {\n            endTime.add(Calendar.YEAR, 3)\n        }\n    }\n\n\n    val selection =\n        \"(( \" + CalendarContract.Events.DTSTART + \" &gt;= \" + startTime.timeInMillis + \" ) AND ( \" + CalendarContract.Events.DTEND + \" &lt;= \" + endTime.timeInMillis + \" ) AND ( deleted != 1 ) \" + \" AND (${CalendarContract.Calendars.OWNER_ACCOUNT} = ?)\" + \" AND (${CalendarContract.Calendars.ACCOUNT_TYPE} = ?))\"\n\n\n    val cursor = contentResolver.query(\n        CalendarContract.Events.CONTENT_URI,\n        projectionArray,\n        selection,\n        null,\n        null\n    )\n    if (cursor != null &amp;&amp; cursor.count &gt; 0 &amp;&amp; cursor.moveToFirst()) {\n        do {\n            // Need to fetch the events.\n        } while (cursor.moveToNext())\n    }\n}\n</code></pre>\n\n<p>Help would be really appreciated.</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 6153, "user_id": 4729721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a68628b01886ee639255e69111990484?s=128&d=identicon&r=PG&f=1", "display_name": "a_local_nobody", "link": "https://stackoverflow.com/users/4729721/a-local-nobody"}, "edited": false, "score": 2, "creation_date": 1573641485, "post_id": 58835178, "comment_id": 103945288, "body": "please edit your question to include your code as text, instead of an image"}], "answers": [{"tags": [], "owner": {"reputation": 1086, "user_id": 8065249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FwmfZ.jpg?s=128&g=1", "display_name": "Hamza Khan", "link": "https://stackoverflow.com/users/8065249/hamza-khan"}, "is_accepted": false, "score": 0, "last_activity_date": 1573641822, "creation_date": 1573641822, "answer_id": 58835346, "question_id": 58835178, "link": "https://stackoverflow.com/questions/58835178/meet-some-problem-when-i-initialize-a-variable-in-kotlin/58835346#58835346", "title": "Meet some problem when i initialize a variable in kotlin", "body": "<p>In Kotlin variable should be initialized first, if it can store null then there is an optional type for this or you can use lazy initialization for some objects like views properties. Also you are using <strong>val</strong> which is constant and you can't assign it value later. so use var instead. You can use late init like this</p>\n\n<pre><code>    lateinit var holder:RecyclerView.ViewHolder\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 136101, "user_id": 101361, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fb0da94b98f64b5b8f12caeb3a049b80?s=128&d=identicon&r=PG", "display_name": "laalto", "link": "https://stackoverflow.com/users/101361/laalto"}, "is_accepted": true, "score": 0, "last_activity_date": 1573650643, "creation_date": 1573650643, "answer_id": 58837900, "question_id": 58835178, "link": "https://stackoverflow.com/questions/58835178/meet-some-problem-when-i-initialize-a-variable-in-kotlin/58837900#58837900", "title": "Meet some problem when i initialize a variable in kotlin", "body": "<blockquote>\n  <p>Why i declare a value or a variable in kotlin in the class that must be initialized,while that does't need to be initialized in member function in the class?</p>\n</blockquote>\n\n<p>In a function the compiler can guarantee if the local variable is initialised before you attempt to use it. In the code you posted there's the <code>if</code>-<code>else</code> conditional that initialises your <code>holder</code> in both branches.</p>\n\n<p>A property on a class level needs to be initialised in instance init phase so that it can be guaranteed to be initialised before it is used. You can use <code>lateinit</code> keyword to leave it uninitialised and promise the compiler you're going to init it yourself before first use.</p>\n"}], "owner": {"reputation": 5, "user_id": 12354659, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBW27kTE-62nLnHNpTcT98zz-poBthXVk4zY8-3=k-s128", "display_name": "jiang fang", "link": "https://stackoverflow.com/users/12354659/jiang-fang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 0, "accepted_answer_id": 58837900, "answer_count": 2, "score": -4, "last_activity_date": 1573650643, "creation_date": 1573641299, "last_edit_date": 1573646968, "question_id": 58835178, "link": "https://stackoverflow.com/questions/58835178/meet-some-problem-when-i-initialize-a-variable-in-kotlin", "title": "Meet some problem when i initialize a variable in kotlin", "body": "<p><strong>val holder:ViewHolder  //&lt;-the  holder isn't  initialized and there is no error happen in this line ?</strong></p>\n\n<pre><code>package adapter\n\nimport android.content.Context\nimport android.graphics.Color\nimport android.view.LayoutInflater\nimport android.view.View\nimport android.view.ViewGroup\nimport android.widget.BaseAdapter\nimport android.widget.ImageView\nimport android.widget.LinearLayout\nimport android.widget.TextView\nimport bean.Planet\nimport com.example.list_view.R\n\nclass PlanetAdapter(private val context: Context, private val planetList: MutableList&lt;Planet&gt;) : BaseAdapter(){\n    override fun getItem(position: Int): Any =planetList[position]\n    override fun getItemId(position: Int): Long =position.toLong()\n    override fun getCount(): Int =planetList.size\n    override fun getView(position: Int, convertView: View?, parent: ViewGroup?): View {\n        var view=convertView\n        val holder:ViewHolder  //&lt;-the holder is not initialized and there is no error happen in this line ?\n        if(convertView==null){\n            view=LayoutInflater.from(context).inflate(R.layout.item_list_layout,parent,false)\n            holder=ViewHolder()\n            holder.ll_item=view.findViewById&lt;LinearLayout&gt;(R.id.ll_item)\n            holder.iv_icon=view.findViewById&lt;ImageView&gt;(R.id.iv_icon)\n            holder.tv_name=view.findViewById&lt;TextView&gt;(R.id.tv_name)\n            holder.tv_desc=view.findViewById(R.id.tv_desc) as TextView\n            view.tag=holder\n        }else{\n            holder= view!!.tag as ViewHolder\n        }\n        val planet=planetList[position]\n        holder.ll_item.setBackgroundColor(Color.WHITE)\n        holder.iv_icon.setImageResource(planet.image)\n        holder.tv_name.text=planet.name\n        holder.tv_desc.text=planet.desc\n        return view!!\n\n    }\n    inner class ViewHolder{\n        lateinit var ll_item:LinearLayout\n        lateinit var iv_icon:ImageView\n        lateinit var tv_name:TextView\n        lateinit var tv_desc:TextView\n    }\n}\n</code></pre>\n\n<p><strong>Why i declare a value or a variable in kotlin in the class that must be initialized,while that does't need to be initialized in member function in the class?</strong></p>\n"}, {"tags": ["hibernate", "kotlin", "quarkus"], "comments": [{"owner": {"reputation": 3892, "user_id": 3603660, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5597e9bc41683fd5c82d132cbc5bee36?s=128&d=identicon&r=PG&f=1", "display_name": "loicmathieu", "link": "https://stackoverflow.com/users/3603660/loicmathieu"}, "edited": false, "score": 0, "creation_date": 1573641743, "post_id": 58835164, "comment_id": 103945453, "body": "I think that on your example <code>Panache.getEntityManager().refresh(person)</code> is not needed as the changes of the database is reflected on the person object when you call <code>persistAndFlush</code> (the id field is populated)"}, {"owner": {"reputation": 61, "user_id": 8766470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aec3dd4ca2b41fdafe7f8ea8acc0b6ce?s=128&d=identicon&r=PG&f=1", "display_name": "Obyoxar", "link": "https://stackoverflow.com/users/8766470/obyoxar"}, "reply_to_user": {"reputation": 3892, "user_id": 3603660, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5597e9bc41683fd5c82d132cbc5bee36?s=128&d=identicon&r=PG&f=1", "display_name": "loicmathieu", "link": "https://stackoverflow.com/users/3603660/loicmathieu"}, "edited": false, "score": 0, "creation_date": 1573648066, "post_id": 58835164, "comment_id": 103948603, "body": "Ah yes, that&#39;s indeed true, thanks! That solves my problem, but I am curious how one would solve a case, where he also wants all the other properties to be refreshed."}, {"owner": {"reputation": 5642, "user_id": 563323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6886c741845f42bd459dc5dade7b1fc2?s=128&d=identicon&r=PG", "display_name": "Sanne", "link": "https://stackoverflow.com/users/563323/sanne"}, "edited": false, "score": 0, "creation_date": 1574155022, "post_id": 58835164, "comment_id": 104120551, "body": "No flush is needed. Immediately after <i>persist</i> you will have the ID assigned."}, {"owner": {"reputation": 61, "user_id": 8766470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aec3dd4ca2b41fdafe7f8ea8acc0b6ce?s=128&d=identicon&r=PG&f=1", "display_name": "Obyoxar", "link": "https://stackoverflow.com/users/8766470/obyoxar"}, "reply_to_user": {"reputation": 5642, "user_id": 563323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6886c741845f42bd459dc5dade7b1fc2?s=128&d=identicon&r=PG", "display_name": "Sanne", "link": "https://stackoverflow.com/users/563323/sanne"}, "edited": false, "score": 0, "creation_date": 1574156240, "post_id": 58835164, "comment_id": 104121206, "body": "@Sanne Thank you for your response. I guess it makes sense, the flush was there as a  artifact from the refresh."}], "owner": {"reputation": 61, "user_id": 8766470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aec3dd4ca2b41fdafe7f8ea8acc0b6ce?s=128&d=identicon&r=PG&f=1", "display_name": "Obyoxar", "link": "https://stackoverflow.com/users/8766470/obyoxar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 322, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573648177, "creation_date": 1573641279, "last_edit_date": 1573648177, "question_id": 58835164, "link": "https://stackoverflow.com/questions/58835164/support-for-em-merge-em-refresh-in-panache", "title": "Support for em.merge / em.refresh in Panache", "body": "<p>I wanted to implement something like this with Panache in Quarkus</p>\n\n<pre><code>open fun add(person: Person) {\n    em.persist(person)\n    em.flush()\n    em.refresh(person)\n}\n</code></pre>\n\n<p>So that i can access the inserted id from the Person.</p>\n\n<p>I now want to use a <code>PersonDao</code> which derives from <code>PanacheRepository&lt;Person&gt;</code>.\nThe only way of achieving the same effect as above that I see is:</p>\n\n<pre><code>open fun add(person: Person) {\n    personDao.persistAndFlush(person)\n    Panache.getEntityManager().refresh(person)\n}\n</code></pre>\n\n<p>The call to <code>Panache.getEntityManager()</code> seems kind of inelegant to me. Is there a better way? And what's with <code>Panache.getEntityManager().merge(person)</code>?</p>\n\n<p>Edit: I now know that <code>persistAndFlush</code> populates the id. But what would I do, if I also needed all of the other fields?</p>\n"}, {"tags": ["android", "kotlin", "android-intent", "android-camera-intent"], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 1914282, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Sci7g.jpg?s=128&g=1", "display_name": "Stef van Wijchen", "link": "https://stackoverflow.com/users/1914282/stef-van-wijchen"}, "edited": false, "score": 0, "creation_date": 1573647652, "post_id": 58836828, "comment_id": 103948403, "body": "Thanks for your answer. I think I&#39;ll have to create my own camera implementation then."}], "tags": [], "owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "is_accepted": true, "score": 1, "last_activity_date": 1573646993, "creation_date": 1573646993, "answer_id": 58836828, "question_id": 58834870, "link": "https://stackoverflow.com/questions/58834870/no-gallery-button-in-camera-action-intent/58836828#58836828", "title": "No gallery button in camera action intent", "body": "<blockquote>\n  <p>However, the camera action opens the stock camera app, but does not show the existing image picker in the bottom right. </p>\n</blockquote>\n\n<p>There are ~26,000 Android device models. These ship with hundreds of different \"stock\" camera apps. Your <code>ACTION_IMAGE_CAPTURE</code> <code>Intent</code> might start any of those, or any one of hundreds of other camera apps that the user might have installed from the Play Store or elsewhere.</p>\n\n<p>None have to have an \"existing image picker in the bottom right\" in any conditions.</p>\n\n<blockquote>\n  <p>How can I get this button to show up in my app as well? </p>\n</blockquote>\n\n<p>You don't.</p>\n\n<p>Presumably, the developers of that camera app decided not to offer that option for <code>ACTION_IMAGE_CAPTURE</code>. For example, perhaps the way they built that feature would break their ability to property return a result to the <code>startActivityForResult()</code> call used with <code>ACTION_IMAGE_CAPTURE</code>. That is their decision, as it is their camera app.</p>\n"}], "owner": {"reputation": 69, "user_id": 1914282, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Sci7g.jpg?s=128&g=1", "display_name": "Stef van Wijchen", "link": "https://stackoverflow.com/users/1914282/stef-van-wijchen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 58836828, "answer_count": 1, "score": 1, "last_activity_date": 1573646993, "creation_date": 1573640374, "question_id": 58834870, "link": "https://stackoverflow.com/questions/58834870/no-gallery-button-in-camera-action-intent", "title": "No gallery button in camera action intent", "body": "<p>I am developing a webview app. So far I have managed to directly open the camera when the user taps a file input, using <code>MediaStore.ACTION_IMAGE_CAPTURE</code>. </p>\n\n<p>However, the camera action opens the stock camera app, but does not show the existing image picker in the bottom right. Yet when I open the stock camera app from outside of my app, there is a circle in the bottom right, with an image preview, right next to the shutter button. </p>\n\n<p>How can I get this button to show up in my app as well?\nObviously I tried to find it by googling, but I can only find answer on how to show the user a dialog where they can pick a photo from either the camera or gallery. But nothing on how to show the \"pick from gallery\"-button in the camera action.\nIf anyone can point me to the right direction, that would be very much appreciated :)</p>\n\n<p>This is the full method I'm using:</p>\n\n<pre><code>override fun onShowFileChooser(\n    webView: WebView?,\n    filePathCallback: ValueCallback&lt;Array&lt;Uri&gt;&gt;?,\n    fileChooserParams: WebChromeClient.FileChooserParams?\n): Boolean {\n    val takePictureIntent = Intent(MediaStore.ACTION_IMAGE_CAPTURE)\n\n    // Double check that we don't have any existing callbacks\n    this@WebClient.filePathCallback?.onReceiveValue(null)\n    this@WebClient.filePathCallback = filePathCallback\n\n    if (takePictureIntent.resolveActivity(activity.packageManager) != null) {\n        // create file where image should go\n        var photoFile: File? = null\n\n        try {\n            photoFile = createImageFile()\n            takePictureIntent.putExtra(\"PhotoPath\", cameraPhotoPath)\n        } catch (exception: IOException) {\n            Log.e(\"imageError\", \"Unable to create image file\", exception)\n        }\n\n        if (photoFile != null) {\n            cameraPhotoPath = \"file:${photoFile.absolutePath}\"\n            takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(photoFile))\n        }\n    }\n\n    val contentSelectionIntent = Intent(Intent.ACTION_CHOOSER).apply {\n        addCategory(Intent.CATEGORY_OPENABLE)\n        this.type = \"image/*\"\n    }\n\n    val chooserIntent = Intent(Intent.ACTION_CHOOSER).apply {\n        putExtra(Intent.EXTRA_INTENT, contentSelectionIntent)\n        putExtra(Intent.EXTRA_INITIAL_INTENTS, arrayOf(takePictureIntent))\n    }\n\n    activity.startActivityForResult(chooserIntent, inputFileRequestCode)\n\n    return true\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 463, "user_id": 11994122, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-neqtu8QEgJ0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfpHBgTeCmo4AY2t8SXukYIS1nwQg/photo.jpg?sz=128", "display_name": "N&#233;stor Carre&#241;o Gimeno", "link": "https://stackoverflow.com/users/11994122/n%c3%a9stor-carre%c3%b1o-gimeno"}, "edited": false, "score": 0, "creation_date": 1573635864, "post_id": 58833434, "comment_id": 103942310, "body": "Not having used Kotlin, I guess this compiles simply because <code>Int?</code> automatically calls its <code>toString()</code> when passed to <code>bar()</code>. If <code>Int?</code> is a number it will always be transformed to a string. Otherwise, if it is NULL it will also be passed to <code>bar()</code> just as NULL. Maybe my answer is stupidly obvious but I don&#39;t see why this piece of code should not compile, automatically casting parameters between compatible types seems logic to me."}, {"owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "edited": false, "score": 1, "creation_date": 1573636166, "post_id": 58833434, "comment_id": 103942474, "body": "OP is correct: the compiler is smart enough to know that <code>value</code> can only be null at the point it makes the call to <code>bar()</code>.  You can tell because IDEA highlights it as an automatic \u2018smart cast\u2019.  (Kotlin doesn&#39;t do automatic conversions, except for string concatenation and a few specific cases around numeric constants.)"}, {"owner": {"reputation": 2644, "user_id": 2957169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mf8Nx.jpg?s=128&g=1", "display_name": "charles-allen", "link": "https://stackoverflow.com/users/2957169/charles-allen"}, "edited": false, "score": 0, "creation_date": 1573637146, "post_id": 58833434, "comment_id": 103942959, "body": "You could make <code>bar()</code> only accept <code>String</code> instead of <code>String?</code>"}, {"owner": {"reputation": 2644, "user_id": 2957169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mf8Nx.jpg?s=128&g=1", "display_name": "charles-allen", "link": "https://stackoverflow.com/users/2957169/charles-allen"}, "edited": false, "score": 0, "creation_date": 1573637241, "post_id": 58833434, "comment_id": 103943015, "body": "I guess you might be able to use a <code>typealias</code> for the key type... but even if you can it&#39;s almost certainly overkill."}], "answers": [{"comments": [{"owner": {"reputation": 4614, "user_id": 1378868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84a42920594ee2a0cc33012c407fd9d5?s=128&d=identicon&r=PG", "display_name": "snak", "link": "https://stackoverflow.com/users/1378868/snak"}, "edited": false, "score": 0, "creation_date": 1573689114, "post_id": 58836115, "comment_id": 103968257, "body": "Unfortunately, <code>bar</code> was in a library in my case and I wasn&#39;t able to split it into two functions, but thank you for your suggestion."}], "tags": [], "owner": {"reputation": 1293, "user_id": 12141859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62b68b508ccc9cca985ec76d00fc0b40?s=128&d=identicon&r=PG&f=1", "display_name": "Neo", "link": "https://stackoverflow.com/users/12141859/neo"}, "is_accepted": false, "score": 0, "last_activity_date": 1573644533, "creation_date": 1573644533, "answer_id": 58836115, "question_id": 58833434, "link": "https://stackoverflow.com/questions/58833434/how-can-i-prevent-from-passing-null-of-a-different-type-to-a-function/58836115#58836115", "title": "How can I prevent from passing null of a different type to a function", "body": "<blockquote>\n  <p>are there common practices to prevent this error?</p>\n</blockquote>\n\n<p>Yes - avoid using <code>null</code> and/or accepting nullable parameters.</p>\n\n<p>The method <code>fun bar(key: String?)</code> is actually two different functions - one with and one without input. The implementation could look like:</p>\n\n<pre><code>fun foo(key: String, value: Int?) {\n    if (value == null) {\n        barEmpty()\n    } else {\n        /*Something else*/\n    }\n}\n\nfun bar(key: String) {}\n\nfun barEmpty() {}\n</code></pre>\n"}], "owner": {"reputation": 4614, "user_id": 1378868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84a42920594ee2a0cc33012c407fd9d5?s=128&d=identicon&r=PG", "display_name": "snak", "link": "https://stackoverflow.com/users/1378868/snak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573688963, "creation_date": 1573635445, "last_edit_date": 1573688963, "question_id": 58833434, "link": "https://stackoverflow.com/questions/58833434/how-can-i-prevent-from-passing-null-of-a-different-type-to-a-function", "title": "How can I prevent from passing null of a different type to a function", "body": "<p>I was surprised that this code compiled in Kotlin.</p>\n\n<pre><code>fun foo(key: String, value: Int?) {\n    if (value == null) {\n        bar(value)\n    }\n}\n\nfun bar(key: String?) {\n}\n</code></pre>\n\n<p>As you can see <code>foo</code> passes <code>value</code> of type <code>Int?</code> to <code>bar</code> as <code>String?</code>. I guess this compiles because <code>value</code> must be <code>null</code> in this context, but apparently, <code>bar(value)</code> in <code>foo</code> was a typo of <code>bar(key)</code>.</p>\n\n<p>Are there any compiler options to make this an error or a warning, or are there common practices to prevent this error? I'd also like to know in which use cases this behavior is useful.</p>\n\n<p>I'm using <code>Kotlin version 1.3.50-release-112 (JRE 1.8.0_152-b16)</code>.</p>\n\n<p>Note that this code doesn't compile (as I expected).</p>\n\n<pre><code>fun foo(key: String, value: Int?) {\n    bar(value)\n}\n\nfun bar(key: String?) {\n}\n</code></pre>\n\n<p>with this error.</p>\n\n<pre><code>k2.kt:2:9: error: type mismatch: inferred type is Int? but String? was expected\n    bar(value)\n</code></pre>\n"}, {"tags": ["kotlin", "kotlin-js", "kotlin-frontend"], "comments": [{"owner": {"reputation": 3824, "user_id": 5030758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e16618cce3b29ee10722e47d02aa7eee?s=128&d=identicon&r=PG", "display_name": "Mikhail Burshteyn", "link": "https://stackoverflow.com/users/5030758/mikhail-burshteyn"}, "edited": false, "score": 0, "creation_date": 1573636600, "post_id": 58832876, "comment_id": 103942687, "body": "That is normal browser behaviour, and it is not specific to Kotlin.  When you change <code>window.location.href</code>, code execution stops and the browser performs the redirect."}, {"owner": {"reputation": 6753, "user_id": 5294091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/m7giV.png?s=128&g=1", "display_name": "Avijit Karmakar", "link": "https://stackoverflow.com/users/5294091/avijit-karmakar"}, "reply_to_user": {"reputation": 3824, "user_id": 5030758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e16618cce3b29ee10722e47d02aa7eee?s=128&d=identicon&r=PG", "display_name": "Mikhail Burshteyn", "link": "https://stackoverflow.com/users/5030758/mikhail-burshteyn"}, "edited": false, "score": 0, "creation_date": 1573636730, "post_id": 58832876, "comment_id": 103942745, "body": "Then how can I redirect to another page?"}], "owner": {"reputation": 6753, "user_id": 5294091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/m7giV.png?s=128&g=1", "display_name": "Avijit Karmakar", "link": "https://stackoverflow.com/users/5294091/avijit-karmakar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573633160, "creation_date": 1573633160, "question_id": 58832876, "link": "https://stackoverflow.com/questions/58832876/redirect-to-another-web-page-in-kotlin-web-front-end-development", "title": "Redirect to another web page in Kotlin Web Front End development", "body": "<p>I am trying to redirect to another web page in Kotlin for Web Front End development. I have wrote this code to achieve this:</p>\n\n<pre><code>window.location.href = \"adduser1.html\"\n</code></pre>\n\n<p>But if I write this code then, the code written after this line are not executing. Please help me regarding this issue.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["kotlin", "coroutine", "kotlin-coroutines"], "answers": [{"comments": [{"owner": {"reputation": 171, "user_id": 11947145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/667e1f12f6b57a884b666fd59fe73863?s=128&d=identicon&r=PG&f=1", "display_name": "vitalyros", "link": "https://stackoverflow.com/users/11947145/vitalyros"}, "edited": false, "score": 1, "creation_date": 1573636011, "post_id": 58833157, "comment_id": 103942389, "body": "I actually got it wrong in the comment, so I deleted it. Using recursion is a good solution because of the tail call optimization. Also I found out that to make it work it is necessary to use <code>delay()</code> or <code>yield()</code>, so thank you."}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 1, "creation_date": 1573639133, "post_id": 58833157, "comment_id": 103944039, "body": "You don&#39;t get tail recursion automatically in Kotlin, you must declare your function  as <code>tailrec</code>"}, {"owner": {"reputation": 171, "user_id": 11947145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/667e1f12f6b57a884b666fd59fe73863?s=128&d=identicon&r=PG&f=1", "display_name": "vitalyros", "link": "https://stackoverflow.com/users/11947145/vitalyros"}, "reply_to_user": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 2, "creation_date": 1574175036, "post_id": 58833157, "comment_id": 104132119, "body": "@MarkoTopolnik  I&#39;ve tested the code above and the OP&#39;s code with the VisualVM and observed a memory leak of <code>DispatchedContinuation</code>, <code>first$1</code>, <code>second$1</code> objects. If I use <code>delay(0)</code> or <code>yield()</code> instead of <code>delay(1000L)</code> I get OutOfMemoryError soon after start. After I added the <code>tailrec</code> keyword to the functions, there was no memory leak."}, {"owner": {"reputation": 1293, "user_id": 12141859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62b68b508ccc9cca985ec76d00fc0b40?s=128&d=identicon&r=PG&f=1", "display_name": "Neo", "link": "https://stackoverflow.com/users/12141859/neo"}, "reply_to_user": {"reputation": 171, "user_id": 11947145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/667e1f12f6b57a884b666fd59fe73863?s=128&d=identicon&r=PG&f=1", "display_name": "vitalyros", "link": "https://stackoverflow.com/users/11947145/vitalyros"}, "edited": false, "score": 0, "creation_date": 1574236051, "post_id": 58833157, "comment_id": 104155030, "body": "@vitalyros Thanks for investigation"}], "tags": [], "owner": {"reputation": 1293, "user_id": 12141859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62b68b508ccc9cca985ec76d00fc0b40?s=128&d=identicon&r=PG&f=1", "display_name": "Neo", "link": "https://stackoverflow.com/users/12141859/neo"}, "is_accepted": true, "score": 5, "last_activity_date": 1573634339, "creation_date": 1573634339, "answer_id": 58833157, "question_id": 58832733, "link": "https://stackoverflow.com/questions/58832733/kotlin-coroutine-multiple-launch/58833157#58833157", "title": "kotlin Coroutine multiple launch", "body": "<p>Your example code would work already, if it is the only running code in your application. If you need those two methods running in parallel to your application, wrap them in <code>GlobalScope.launch</code>:</p>\n\n<pre><code>GlobalScope.launch {\n\n   launch { first() }\n   launch { second() }\n}\n</code></pre>\n\n<p>This will run forever until canceled and/or an exception inside is thrown. If you don't require too many resources inside a coroutine and release them properly when used, you should never have a problem with StackOverFlow.</p>\n\n<hr>\n\n<p>In addition to recursive code: try to make a loop instead as it is suggested in the comments.</p>\n"}, {"tags": [], "owner": {"reputation": 171, "user_id": 11947145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/667e1f12f6b57a884b666fd59fe73863?s=128&d=identicon&r=PG&f=1", "display_name": "vitalyros", "link": "https://stackoverflow.com/users/11947145/vitalyros"}, "is_accepted": false, "score": 1, "last_activity_date": 1573635767, "creation_date": 1573635767, "answer_id": 58833521, "question_id": 58832733, "link": "https://stackoverflow.com/questions/58832733/kotlin-coroutine-multiple-launch/58833521#58833521", "title": "kotlin Coroutine multiple launch", "body": "<p>You can implement infinite execution with cycles</p>\n\n<pre><code>runBlocking {\n    launch { while(true) first() }\n    launch { while(true) second() }\n}\n\nsuspend fun first(){\n    // do something \n    delay(1000L)\n}\n\nsuspend fun second(){\n    // do something \n    delay(1000L)\n}\n\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 10040903, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-k2TG5u7CDxE/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1B5k_VIMV1VEnAnGKhRLMlFjkrMQ/mo/photo.jpg?sz=128", "display_name": "kokojustin", "link": "https://stackoverflow.com/users/10040903/kokojustin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1506, "favorite_count": 0, "accepted_answer_id": 58833157, "answer_count": 2, "score": 3, "last_activity_date": 1573636027, "creation_date": 1573632453, "last_edit_date": 1573632657, "question_id": 58832733, "link": "https://stackoverflow.com/questions/58832733/kotlin-coroutine-multiple-launch", "title": "kotlin Coroutine multiple launch", "body": "<p>How to make multiple launch like multiple thread in kotlin</p>\n\n<p>I want to make that <code>first</code> <code>second</code> are working at the same time forever!!</p>\n\n<p>Like this code...</p>\n\n<pre><code>runBlocking {\n\n    // first\n    launch{\n      first()\n    }\n\n    // second\n    launch{\n       second()\n    }\n}\n\n\nsuspend fun first(){\n    // do something \n    delay(1000L)\n\n    // Recursive call\n    first() \n}\n\nsuspend fun second(){\n    // do something \n    delay(1000L)\n\n    // Recursive call\n    second() \n}\n</code></pre>\n"}, {"tags": ["kotlin", "coroutine", "kotlin-coroutines"], "comments": [{"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1573637515, "post_id": 58832714, "comment_id": 103943150, "body": "Your 3rd approach is broken, it never completes on its own. You&#39;ll find completion a challenge because all you get from a <code>Future</code> is the blocking <code>get()</code> or <code>join()</code>. You need a <code>CompletableFuture</code>: <code>supplyAsync(fn, executor)</code>."}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1573638765, "post_id": 58832714, "comment_id": 103943837, "body": "The way the Kotlin library supports this is by providing <code>CompletableFuture.await()</code>. Alas, it is hardcoded to call <code>future.cancel(false)</code>. But I think you could simply write your own extension differently. Writing an extension on <code>CompletableFuture</code> is more composable with other code, could relieve you from writing a suspendable wrapper every time. Keep in mind that interrupting coroutine-carrying threads is in general a dangerous practice and could cause the interrupt signal to be received by an unintended recipient."}, {"owner": {"reputation": 6601, "user_id": 2075875, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e0b3e3d0b29b541cd13a60a9236f02ac?s=128&d=identicon&r=PG", "display_name": "Malachiasz", "link": "https://stackoverflow.com/users/2075875/malachiasz"}, "reply_to_user": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1573640722, "post_id": 58832714, "comment_id": 103944880, "body": "I have edited description, added &quot;Version D&quot;. Is this is how you implement it? (I haven&#39;t tested if the code run). Also I have found this answer: <a href=\"https://stackoverflow.com/a/58402108/2075875\">stackoverflow.com/a/58402108/2075875</a> That should be a working solution with Futures as well. (The Android which we target doesn&#39;t have CompletableFuture)"}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1573643931, "post_id": 58832714, "comment_id": 103946658, "body": "Yes, that looks like a good solution. In the absence of <code>CompletableFuture</code> I&#39;d go with that."}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 14711501, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iQEME.jpg?s=128&g=1", "display_name": "Maxim Kochetkov", "link": "https://stackoverflow.com/users/14711501/maxim-kochetkov"}, "is_accepted": false, "score": 1, "last_activity_date": 1606522478, "last_edit_date": 1606522478, "creation_date": 1606505553, "answer_id": 65042933, "question_id": 58832714, "link": "https://stackoverflow.com/questions/58832714/how-to-convert-java-blocking-function-into-cancellable-suspend-function/65042933#65042933", "title": "How to convert Java blocking function into cancellable suspend function?", "body": "<p>You may wrap blocking code via <code>suspend fun kotlinx.coroutines.runInterruptible</code></p>\n<p>It suppressed compile warning and blocking code will throw <code>InterruptedException</code> on cancellation</p>\n<pre><code>val job = launch {\n  runInterruptible {\n    Thread.sleep(500)\n  }\n}\n\njob.cancelAndJoin() // Cause will be 'java.lang.InterruptedException'\n</code></pre>\n<p>Tested on <code>org.jetbrains.kotlinx:kotlinx-coroutines-core-jvm:1.4.2</code></p>\n"}], "owner": {"reputation": 6601, "user_id": 2075875, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e0b3e3d0b29b541cd13a60a9236f02ac?s=128&d=identicon&r=PG", "display_name": "Malachiasz", "link": "https://stackoverflow.com/users/2075875/malachiasz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 581, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1606522478, "creation_date": 1573632326, "last_edit_date": 1573662091, "question_id": 58832714, "link": "https://stackoverflow.com/questions/58832714/how-to-convert-java-blocking-function-into-cancellable-suspend-function", "title": "How to convert Java blocking function into cancellable suspend function?", "body": "<p>Kotlin <code>suspend</code> functions should be nonblocking by convention (1). Often we have old Java code which relies on java Thread interruption mechanism, which we cannot (don't want to) modif (2):</p>\n\n<pre><code>public void doSomething(String arg) {\n    for (int i = 0; i &lt; 100_000; i++) {\n        heavyCrunch(arg, i);\n        if (Thread.interrupted()) {\n            // We've been interrupted: no more crunching.\n            return;\n        }\n    }\n}\n</code></pre>\n\n<p>What is the best way to adapt this code for usage in coroutines?</p>\n\n<p><strong>Version A</strong>: is unacceptable because it will run the code on the caller thread. So it will violate the <em>\"suspending functions do not block the caller thread\"</em> convention: </p>\n\n<pre><code>suspend fun doSomething(param: String) = delegate.performBlockingCode(param)\n</code></pre>\n\n<p><strong>Version B</strong>: is better because it would run the blocking function in background thread, thus it wouldn't block the callers thread (except if by chance the caller uses the same thread from Dispatchers.Default threads pool). But coroutines job cancelling wouldn't interrupt performBlockingCode() which relies on thread interruption.</p>\n\n<pre><code>suspend fun doSomething(param: String) = withContext(Dispatchers.Default) {\n    delegate.performBlockingCode(param)\n}\n</code></pre>\n\n<p><strong>Version C</strong>: is currently the only way which I see to make it working. The idea is to convert blocking function into nonblocking with Java mechanisms and later use <code>suspendCancellableCoroutine</code> (3) for converting asynchronous method into suspend function:</p>\n\n<pre><code>private ExecutorService executor = Executors.newSingleThreadExecutor();\n\npublic Future doSomethingAsync(String arg) {\n    return executor.submit(() -&gt; {\n        doSomething(arg);\n    });\n}\n\nsuspend fun doSomething(param: String) = suspendCancellableCoroutine&lt;Any&gt; { cont -&gt;\n    try {\n        val future = delegate.doSomethingAsync(param)\n    } catch (e: InterruptedException) {\n        throw CancellationException()\n    }\n    cont.invokeOnCancellation { future.cancel(true) }\n}\n</code></pre>\n\n<p><em>As commented below, above code won't work properly, because continuation.resumeWith() is not called</em></p>\n\n<p><strong>Version D</strong>: uses CompletableFuture: which provides a way to register callback for when completable completes: <em>thenAccept</em></p>\n\n<pre><code>private ExecutorService executor = Executors.newSingleThreadExecutor();\n\npublic CompletableFuture doSomethingAsync(String arg) {\n    return CompletableFuture.runAsync(() -&gt; doSomething(arg), executor);\n}\n\nsuspend fun doSomething(param: String) = suspendCancellableCoroutine&lt;Any&gt; { cont -&gt;\n    try {\n        val completableFuture = delegate.doSomethingAsync(param)\n        completableFuture.thenAccept { cont.resumeWith(Result.success(it)) }\n        cont.invokeOnCancellation { completableFuture.cancel(true) }\n    } catch (e: InterruptedException) {\n        throw CancellationException()\n    }\n}\n</code></pre>\n\n<p>Do you know any better way for that?</p>\n\n<ol>\n<li><a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/interrupt.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/tutorial/essential/concurrency/interrupt.html</a></li>\n<li><a href=\"https://medium.com/@elizarov/blocking-threads-suspending-coroutines-d33e11bf4761\" rel=\"nofollow noreferrer\">https://medium.com/@elizarov/blocking-threads-suspending-coroutines-d33e11bf4761</a></li>\n<li><a href=\"https://medium.com/@elizarov/callbacks-and-kotlin-flows-2b53aa2525cf\" rel=\"nofollow noreferrer\">https://medium.com/@elizarov/callbacks-and-kotlin-flows-2b53aa2525cf</a></li>\n</ol>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 389, "user_id": 2644365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x3iyg.jpg?s=128&g=1", "display_name": "Akash kv", "link": "https://stackoverflow.com/users/2644365/akash-kv"}, "edited": false, "score": 0, "creation_date": 1573631174, "post_id": 58832426, "comment_id": 103940113, "body": "i will check bro"}, {"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 1, "creation_date": 1573631336, "post_id": 58832426, "comment_id": 103940188, "body": "I think it should be <code>productEntity.name.contains(it, true)</code>"}], "tags": [], "owner": {"reputation": 879, "user_id": 9881903, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xOtup.jpg?s=128&g=1", "display_name": "GuanHongHuang", "link": "https://stackoverflow.com/users/9881903/guanhonghuang"}, "is_accepted": true, "score": 1, "last_activity_date": 1573631115, "creation_date": 1573631115, "answer_id": 58832426, "question_id": 58832034, "link": "https://stackoverflow.com/questions/58832034/looping-arraylist-of-combination-takes-time-kotlin/58832426#58832426", "title": "looping arraylist of combination takes time kotlin", "body": "<pre><code>private fun getProductListFromCombinations(combination: List&lt;String&gt;): List&lt;ProductEntity&gt; {\n\n    return listAllProduct.filter { productEntity -&gt;\n\n        combination.any { it.contains(productEntity.name, true) }\n    }\n}\n</code></pre>\n\n<p>Hope this help.</p>\n"}], "owner": {"reputation": 389, "user_id": 2644365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x3iyg.jpg?s=128&g=1", "display_name": "Akash kv", "link": "https://stackoverflow.com/users/2644365/akash-kv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 58832426, "answer_count": 1, "score": 0, "last_activity_date": 1573659158, "creation_date": 1573629331, "last_edit_date": 1573659158, "question_id": 58832034, "link": "https://stackoverflow.com/questions/58832034/looping-arraylist-of-combination-takes-time-kotlin", "title": "looping arraylist of combination takes time kotlin", "body": "<p>Double loop takes much time in kotlin. I have a list of words (some times list contain 100k+ words). I want to search through my product list contains list in words. How can I improve the following code? It causes anr if combination of words increased.</p>\n\n<pre><code>private fun getProductListFromCombinations(combination:List&lt;String&gt;): List&lt;ProductEntity&gt; {\n    val arrayList=  mutableListOf&lt;ProductEntity&gt;()\n\n\n        for (comb in combination){\n\n            val searchedList = listAllProduct.filter {\n\n                    obj -&gt; obj.name.contains(comb,true)\n\n            }\n\n            arrayList.addAll(searchedList)\n\n        }\n\n\n\n    return arrayList.distinct()\n}\n</code></pre>\n"}, {"tags": ["generics", "kotlin", "kotlin-reified-type-parameters"], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 411009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea358bdbd458df61ff105246f0a7beb6?s=128&d=identicon&r=PG", "display_name": "Sergey Galkin", "link": "https://stackoverflow.com/users/411009/sergey-galkin"}, "edited": false, "score": 0, "creation_date": 1573645343, "post_id": 58832665, "comment_id": 103947280, "body": "That&#39;s what I wanted to avoid. Thanks."}], "tags": [], "owner": {"reputation": 3824, "user_id": 5030758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e16618cce3b29ee10722e47d02aa7eee?s=128&d=identicon&r=PG", "display_name": "Mikhail Burshteyn", "link": "https://stackoverflow.com/users/5030758/mikhail-burshteyn"}, "is_accepted": false, "score": 2, "last_activity_date": 1573632133, "creation_date": 1573632133, "answer_id": 58832665, "question_id": 58831873, "link": "https://stackoverflow.com/questions/58831873/kotlin-function-reified-parameter-with-parametrized-return-type/58832665#58832665", "title": "Kotlin function reified parameter with parametrized return type", "body": "<p>Kotlin does not allow calling a generic function while specifying only a part of the type parameters.  If you want to call <code>create</code> with explicit type parameters, you have to specify all three of them:</p>\n\n<pre><code>ActionFactory().create&lt;ConcreteAction, Int, String&gt;().run(1)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": false, "score": 0, "last_activity_date": 1573675474, "creation_date": 1573675474, "answer_id": 58844774, "question_id": 58831873, "link": "https://stackoverflow.com/questions/58831873/kotlin-function-reified-parameter-with-parametrized-return-type/58844774#58844774", "title": "Kotlin function reified parameter with parametrized return type", "body": "<p>Note: this may not work with actual code depending on what exactly you simplified out. But given this setup, it may be reasonable to assume that the return value of <code>create</code> will actually be an instance of <code>A</code>, in which case </p>\n\n<pre><code>inline fun &lt;reified A : SomeAction&lt;*, *&gt;&gt; ActionFactory.create(): A {\n    return create(A::class.java) as A\n}\n\nActionFactory().create&lt;ConcreteAction&gt;().run(1)\n</code></pre>\n\n<p>will work. The assumption should be documented and tests added if you go that way!</p>\n"}], "owner": {"reputation": 99, "user_id": 411009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea358bdbd458df61ff105246f0a7beb6?s=128&d=identicon&r=PG", "display_name": "Sergey Galkin", "link": "https://stackoverflow.com/users/411009/sergey-galkin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1573675474, "creation_date": 1573628572, "question_id": 58831873, "link": "https://stackoverflow.com/questions/58831873/kotlin-function-reified-parameter-with-parametrized-return-type", "title": "Kotlin function reified parameter with parametrized return type", "body": "<p>I use an in-house Java framework containing the following classes (simplified for demonstration):</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>    public interface SomeAction&lt;T, R&gt; {\n        R run(T t);\n    }\n\n    public class ConcreteAction implements SomeAction&lt;Integer, String&gt; {\n\n        @Override\n        public String run(Integer arg) {\n            return \"abc\";\n        }\n    }\n\n    public class ActionFactory {\n\n        public &lt;A extends SomeAction&lt;T, R&gt;, T, R&gt; SomeAction&lt;T, R&gt; create(Class&lt;A&gt; clz) throws IllegalAccessException, InstantiationException {\n            return clz.newInstance();\n        }\n    }\n</code></pre>\n\n<p>Calling the factory method from Kotlin in a java-way works ok:</p>\n\n<pre><code>ActionFactory().create(ConcreteAction::class.java).run(1)\n</code></pre>\n\n<p>Then I created the following extension method to make it more concise:</p>\n\n<pre><code>    inline fun &lt;reified A : SomeAction&lt;T, R&gt;, T, R&gt; ActionFactory.create(): SomeAction&lt;T, R&gt; {\n        return create(A::class.java)\n    }\n</code></pre>\n\n<p>But a call to <code>ActionFactory().create&lt;ConcreteAction&gt;().run(1)</code> fails with the error <code>3 type arguments for inline fun ...</code></p>\n\n<p>Are there any ways to make it work without touching the java code?</p>\n"}, {"tags": ["android", "kotlin", "android-animation"], "answers": [{"comments": [{"owner": {"reputation": 368, "user_id": 2881193, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/76bc5f2ac7af24677b3b4f521a785167?s=128&d=identicon&r=PG&f=1", "display_name": "Jonny", "link": "https://stackoverflow.com/users/2881193/jonny"}, "edited": false, "score": 1, "creation_date": 1573661936, "post_id": 58836880, "comment_id": 103956713, "body": "Not the same effect after all. I will not have the TextView slideUp. And the Scrollview effect won&#39;t be organic (it&#39;s just repositioning)."}, {"owner": {"reputation": 1201, "user_id": 8835675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BAQ9X.jpg?s=128&g=1", "display_name": "Webfreak", "link": "https://stackoverflow.com/users/8835675/webfreak"}, "reply_to_user": {"reputation": 368, "user_id": 2881193, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/76bc5f2ac7af24677b3b4f521a785167?s=128&d=identicon&r=PG&f=1", "display_name": "Jonny", "link": "https://stackoverflow.com/users/2881193/jonny"}, "edited": false, "score": 0, "creation_date": 1573709901, "post_id": 58836880, "comment_id": 103972999, "body": "It should slide up if you placed the animateLayoutChanges correctly. Where did you add animateLayoutChanges? It should be at the root layout where myRefer resigns."}, {"owner": {"reputation": 368, "user_id": 2881193, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/76bc5f2ac7af24677b3b4f521a785167?s=128&d=identicon&r=PG&f=1", "display_name": "Jonny", "link": "https://stackoverflow.com/users/2881193/jonny"}, "edited": false, "score": 0, "creation_date": 1573716834, "post_id": 58836880, "comment_id": 103975544, "body": "The purpose of the question is not simply that ScrollView fills in the space, but rather follows TextView&#39;s translational motion (based on the applied constraints). Applying as you said I have only one show / hide of TextView, ie there is no organic movement in it."}, {"owner": {"reputation": 1201, "user_id": 8835675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BAQ9X.jpg?s=128&g=1", "display_name": "Webfreak", "link": "https://stackoverflow.com/users/8835675/webfreak"}, "reply_to_user": {"reputation": 368, "user_id": 2881193, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/76bc5f2ac7af24677b3b4f521a785167?s=128&d=identicon&r=PG&f=1", "display_name": "Jonny", "link": "https://stackoverflow.com/users/2881193/jonny"}, "edited": false, "score": 0, "creation_date": 1573718757, "post_id": 58836880, "comment_id": 103976324, "body": "Why don&#39;t you just apply the same translationY animation on scrollview then?"}], "tags": [], "owner": {"reputation": 1201, "user_id": 8835675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BAQ9X.jpg?s=128&g=1", "display_name": "Webfreak", "link": "https://stackoverflow.com/users/8835675/webfreak"}, "is_accepted": false, "score": -1, "last_activity_date": 1573647184, "creation_date": 1573647184, "answer_id": 58836880, "question_id": 58830885, "link": "https://stackoverflow.com/questions/58830885/animation-with-translatey-is-holding-constraints/58836880#58836880", "title": "Animation with TranslateY is holding Constraints", "body": "<p>I would just use <code>android:animateLayoutChanges=\"true\"</code> on the layout. And then instead of <code>animate...</code> just call <code>myRefer.visibility = View.VISIBLE</code> or <code>View.GONE</code>. It will have the same effect and the Scrollview will adjust to the hidden element.</p>\n"}], "owner": {"reputation": 368, "user_id": 2881193, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/76bc5f2ac7af24677b3b4f521a785167?s=128&d=identicon&r=PG&f=1", "display_name": "Jonny", "link": "https://stackoverflow.com/users/2881193/jonny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573661966, "creation_date": 1573623299, "last_edit_date": 1573661966, "question_id": 58830885, "link": "https://stackoverflow.com/questions/58830885/animation-with-translatey-is-holding-constraints", "title": "Animation with TranslateY is holding Constraints", "body": "<p>Before you start:</p>\n\n<ul>\n<li>I'm using <code>Kotlin</code></li>\n<li>I'm using <code>ConstraintLayout</code> (switching to <code>LinearLayout</code> or <code>RelativeLayout</code> is not an option)</li>\n</ul>\n\n<p>I have my <code>layout</code> as follows:</p>\n\n<pre><code>     &lt;TextView android:id=\"@+id/myRefer\" .../&gt;\n     &lt;ScrollView\n         ...\n         app:layout_constraintTop_toBottomOf=\"@id/myRefer\"&gt;\n     ...\n     &lt;/ScrollView&gt;\n</code></pre>\n\n<p>And my animation is developed as follows:</p>\n\n<pre><code>        myRefer.animate()\n            .translationY(-myRefer.height.toFloat())\n            .alpha(0.0f)\n</code></pre>\n\n<p>So far so good, no problem with the <code>animation</code>, everything goes as expected. </p>\n\n<p>The problem is, I thought that from the moment I'm using <code>TranslateY</code>, the <code>ScrollView</code> would follow the new position reference (topToBottom). But it keeps a white hole (as if my <code>TextView</code> is still using the reference height)</p>\n\n<p><strong>Did I misunderstand the use of TranslateY, or am I using animate() incorrectly? How would I solve this problem for my ScrollView to follow the reference.</strong></p>\n\n<p>Note: Don't suggest using <code>onAnimatonEnd</code> and setting <code>View.GONE</code>, it just makes things worse.  </p>\n"}, {"tags": ["java", "android", "gradle", "kotlin", "flutter"], "answers": [{"tags": [], "owner": {"reputation": 558, "user_id": 1453606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5109dbba3dc5fb427ea9f1b894f02f3c?s=128&d=identicon&r=PG", "display_name": "Alan M", "link": "https://stackoverflow.com/users/1453606/alan-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1573814382, "creation_date": 1573814382, "answer_id": 58875254, "question_id": 58830426, "link": "https://stackoverflow.com/questions/58830426/flutter-error-could-not-download-bundletool-jar-com-android-tools-buildbundle/58875254#58875254", "title": "Flutter error: Could not download bundletool.jar (com.android.tools.build:bundletool:0.9.0)", "body": "<p>Try to copy the above url address into your browser and see if you can access them \nfor example  this one <a href=\"https://jcenter.bintray.com/org/jetbrains/kotlin/kotlin-daemon-embeddable/1.3.50/\" rel=\"nofollow noreferrer\">https://jcenter.bintray.com/org/jetbrains/kotlin/kotlin-daemon-embeddable/1.3.50/</a></p>\n\n<p>Also try to see if you have proxy or network issue to access the internet. </p>\n"}], "owner": {"reputation": 33, "user_id": 7409245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83fd8435b92f90288151e75205fca892?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/7409245/benjamin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 704, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1573814382, "creation_date": 1573619932, "last_edit_date": 1573620379, "question_id": 58830426, "link": "https://stackoverflow.com/questions/58830426/flutter-error-could-not-download-bundletool-jar-com-android-tools-buildbundle", "title": "Flutter error: Could not download bundletool.jar (com.android.tools.build:bundletool:0.9.0)", "body": "<p>pls how can I resolve this flutter error</p>\n\n<p>What went wrong:\nA problem occurred configuring project ':flutter_udid'.</p>\n\n<pre><code>Could not resolve all artifacts for configuration ':flutter_udid:classpath'.\n   Could not download bundletool.jar (com.android.tools.build:bundletool:0.9.0)\n      Could not get resource 'https://dl.google.com/dl/android/maven2/com/android/tools/build/bundletool/0.9.0/bundletool-0.9.0.jar'.\n         Read timed out\n   Could not download kotlin-stdlib.jar (org.jetbrains.kotlin:kotlin-stdlib:1.3.50)\n      Could not get resource 'https://jcenter.bintray.com/org/jetbrains/kotlin/kotlin-stdlib/1.3.50/kotlin-stdlib-1.3.50.jar'.\n         Could not GET 'https://jcenter.bintray.com/org/jetbrains/kotlin/kotlin-stdlib/1.3.50/kotlin-stdlib-1.3.50.jar'.\n            Remote host closed connection during handshake\n   Could not download gradle-download-task.jar (de.undercouch:gradle-download-task:3.4.3)\n      Could not get resource 'https://jcenter.bintray.com/de/undercouch/gradle-download-task/3.4.3/gradle-download-task-3.4.3.jar'.\n         Could not GET 'https://jcenter.bintray.com/de/undercouch/gradle-download-task/3.4.3/gradle-download-task-3.4.3.jar'.\n            jcenter.bintray.com: Temporary failure in name resolution\n   Could not download httpmime.jar (org.apache.httpcomponents:httpmime:4.5.6)\n      Could not get resource 'https://jcenter.bintray.com/org/apache/httpcomponents/httpmime/4.5.6/httpmime-4.5.6.jar'.\n         Could not GET 'https://jcenter.bintray.com/org/apache/httpcomponents/httpmime/4.5.6/httpmime-4.5.6.jar'.\n            jcenter.bintray.com\n   Could not download httpclient.jar (org.apache.httpcomponents:httpclient:4.5.6)\n      Could not get resource 'https://jcenter.bintray.com/org/apache/httpcomponents/httpclient/4.5.6/httpclient-4.5.6.jar'.\n         Could not GET 'https://jcenter.bintray.com/org/apache/httpcomponents/httpclient/4.5.6/httpclient-4.5.6.jar'.\n            jcenter.bintray.com\n   Could not download httpcore.jar (org.apache.httpcomponents:httpcore:4.4.10)\n      Could not get resource 'https://jcenter.bintray.com/org/apache/httpcomponents/httpcore/4.4.10/httpcore-4.4.10.jar'.\n         Could not GET 'https://jcenter.bintray.com/org/apache/httpcomponents/httpcore/4.4.10/httpcore-4.4.10.jar'.\n            jcenter.bintray.com\n   Could not download error_prone_annotations.jar (com.google.errorprone:error_prone_annotations:2.3.1)\n      Could not get resource 'https://jcenter.bintray.com/com/google/errorprone/error_prone_annotations/2.3.1/error_prone_annotations-2.3.1.jar'.\n         Could not GET 'https://jcenter.bintray.com/com/google/errorprone/error_prone_annotations/2.3.1/error_prone_annotations-2.3.1.jar'.\n            jcenter.bintray.com\n   Could not download kotlin-script-runtime.jar (org.jetbrains.kotlin:kotlin-script-runtime:1.3.50)\n      Could not get resource 'https://jcenter.bintray.com/org/jetbrains/kotlin/kotlin-script-runtime/1.3.50/kotlin-script-runtime-1.3.50.jar'.\n         Could not GET 'https://jcenter.bintray.com/org/jetbrains/kotlin/kotlin-script-runtime/1.3.50/kotlin-script-runtime-1.3.50.jar'.\n            jcenter.bintray.com\n   Could not download kotlin-daemon-embeddable.jar (org.jetbrains.kotlin:kotlin-daemon-embeddable:1.3.50)\n      Could not get resource 'https://jcenter.bintray.com/org/jetbrains/kotlin/kotlin-daemon-embeddable/1.3.50/kotlin-daemon-embeddable-1.3.50.jar'.\n         Could not GET 'https://jcenter.bintray.com/org/jetbrains/kotlin/kotlin-daemon-embeddable/1.3.50/kotlin-daemon-embeddable-1.3.50.jar'.\n            jcenter.bintray.com\n   Could not download trove4j.jar (org.jetbrains.intellij.deps:trove4j:1.0.20181211)\n      Could not get resource 'https://jcenter.bintray.com/org/jetbrains/intellij/deps/trove4j/1.0.20181211/trove4j-1.0.20181211.jar'.\n         Could not GET 'https://jcenter.bintray.com/org/jetbrains/intellij/deps/trove4j/1.0.20181211/trove4j-1.0.20181211.jar'.\n            jcenter.bintray.com\n   Could not download kotlin-build-common.jar (org.jetbrains.kotlin:kotlin-build-common:1.3.50)\n      Could not get resource 'https://jcenter.bintray.com/org/jetbrains/kotlin/kotlin-build-common/1.3.50/kotlin-build-common-1.3.50.jar'.\n         Could not GET 'https://jcenter.bintray.com/org/jetbrains/kotlin/kotlin-build-common/1.3.50/kotlin-build-common-1.3.50.jar'.\n            jcenter.bintray.com\n   Could not download kotlinx-coroutines-core.jar (org.jetbrains.kotlinx:kotlinx-coroutines-core:1.1.1)\n      Could not get resource 'https://jcenter.bintray.com/org/jetbrains/kotlinx/kotlinx-coroutines-core/1.1.1/kotlinx-coroutines-core-1.1.1.jar'.\n         Could not GET 'https://jcenter.bintray.com/org/jetbrains/kotlinx/kotlinx-coroutines-core/1.1.1/kotlinx-coroutines-core-1.1.1.jar'.\n            jcenter.bintray.com\n   Could not download kotlin-stdlib-common.jar (org.jetbrains.kotlin:kotlin-stdlib-common:1.3.50)\n      Could not get resource 'https://jcenter.bintray.com/org/jetbrains/kotlin/kotlin-stdlib-common/1.3.50/kotlin-stdlib-common-1.3.50.jar'.\n         Could not GET 'https://jcenter.bintray.com/org/jetbrains/kotlin/kotlin-stdlib-common/1.3.50/kotlin-stdlib-common-1.3.50.jar'.\n            jcenter.bintray.com\n   Could not download trove4j.jar (org.jetbrains.trove4j:trove4j:20160824)\n       Could not get resource 'https://jcenter.bintray.com/org/jetbrains/trove4j/trove4j/20160824/trove4j-20160824.jar'.\n        Could not GET 'https://jcenter.bintray.com/org/jetbrains/trove4j/trove4j/20160824/trove4j-20160824.jar'.\n            jcenter.bintray.com\n   Could not download commons-codec.jar (commons-codec:commons-codec:1.10)\n      Could not get resource 'https://jcenter.bintray.com/commons-codec/commons-codec/1.10/commons-codec-1.10.jar'.\n         &gt; Could not GET 'https://jcenter.bintray.com/commons-codec/commons-codec/1.10/commons-codec-1.10.jar'.\n            &gt; jcenter.bintray.com\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n\nBUILD FAILED in 6m 2s\n  Command: /home/benny/Documents/Afiaanyi/mobile_app_codes/android/gradlew app:properties\n\n</code></pre>\n\n<p>pls can someone suggest how I can fix this errors</p>\n"}, {"tags": ["kotlin", "higher-order-functions"], "answers": [{"tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": false, "score": 2, "last_activity_date": 1573620816, "last_edit_date": 1573620816, "creation_date": 1573620388, "answer_id": 58830480, "question_id": 58830112, "link": "https://stackoverflow.com/questions/58830112/receive-transformation-map-function-to-send-into-list-mapnotnull/58830480#58830480", "title": "Receive transformation map function to send into `List&lt;&gt;.mapNotNull()`", "body": "<p>You have a list of nullable strings.</p>\n\n<p><code>mapNotNull</code> applies the transform function to an each element in a list and then checks if the result of this functions is null. So in this case, it passes a nullable string in the <code>transformer</code> function, and that function definitely cannot be of <code>(String) -&gt; String?</code> type because the parameter here is a non-nullable string.</p>\n\n<p>You should either declare the transformer function as <code>(String?) -&gt; String?</code>, or remove nulls from list before calling <code>mapNotNull</code>:</p>\n\n<pre><code>items.filterNotNull().mapNotNull(transformer)\n</code></pre>\n\n<p>Another option is to wrap <code>transformer</code> into a lambda function before passing it to <code>mapNotNull</code> and handle null elements there, for example:</p>\n\n<pre><code>items.mapNotNull { e -&gt; e?.let(transformer) }\n</code></pre>\n\n<p>this applies <code>transformer</code> function to an element only if it is not null.</p>\n"}, {"tags": [], "owner": {"reputation": 12732, "user_id": 430128, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c2aa2c9f527afea12a7fef458588b2a1?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/430128/raman"}, "is_accepted": true, "score": 2, "last_activity_date": 1573621028, "creation_date": 1573621028, "answer_id": 58830551, "question_id": 58830112, "link": "https://stackoverflow.com/questions/58830112/receive-transformation-map-function-to-send-into-list-mapnotnull/58830551#58830551", "title": "Receive transformation map function to send into `List&lt;&gt;.mapNotNull()`", "body": "<p>The <code>mapNotNull</code> function is defined as:</p>\n\n<pre><code>public inline fun &lt;T, R : Any&gt; Iterable&lt;T&gt;.mapNotNull(transform: (T) -&gt; R?): List&lt;R&gt;\n</code></pre>\n\n<p>in other words, the type of the parameter to the <code>transform</code> lambda is <code>T</code>, where <code>T</code> is the type of the <code>Iterable</code> being operated on. In your case, your iterable is a <code>List</code> of type <code>String?</code>.</p>\n\n<p>Therefore, you need to declare your transformer as type <code>(String?) -&gt; String?</code>, and only the non-null results of that transform will be included in the result.</p>\n\n<p>To update the code you supplied on play.kotlinlang, with a few additional modifications to make the type declarations a bit more idiomatic -- note, I've left the code mostly as-is, despite the odd use of the additional <code>transform</code> function:</p>\n\n<pre><code>val items = listOf&lt;String?&gt;(null, \"cosa\")\n\nfun transform (transformer: (String?) -&gt; String?): List&lt;String&gt; {\n    return items.mapNotNull(transformer)\n}\n\nfun main() {\n    val items = listOf&lt;String?&gt;(null, \"cosa\")\n\n    val transformer: (String?) -&gt; String? = {\n        // this of course means the output of transform will always be empty\n        null    \n    }\n\n    val map = transform(transformer)\n\n    print(map)\n}\n</code></pre>\n"}], "owner": {"reputation": 12683, "user_id": 273119, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/6b7f0d7d95b3a1f9547274129582b434?s=128&d=identicon&r=PG", "display_name": "Daniel Gomez Rico", "link": "https://stackoverflow.com/users/273119/daniel-gomez-rico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 58830551, "answer_count": 2, "score": 1, "last_activity_date": 1573621028, "creation_date": 1573617344, "last_edit_date": 1573620926, "question_id": 58830112, "link": "https://stackoverflow.com/questions/58830112/receive-transformation-map-function-to-send-into-list-mapnotnull", "title": "Receive transformation map function to send into `List&lt;&gt;.mapNotNull()`", "body": "<p>Im trying to write a function like <code>transform</code> that receives a function that will be used inside of mapNotNull but I cant find a way to do it.</p>\n\n<p>Example</p>\n\n<pre><code>val items: List&lt;String?&gt; = listOf(null, \"cosa\")\n\nfun transform(transformer: (String) -&gt; String?) {\n    items.mapNotNull(transformer) // &lt;-------------------------------------- THIS DOES NOT COMPILE\n}\n\nfun main() {\n    val items: List&lt;String?&gt; = listOf(null, \"cosa\")\n\n    val transformer: (String) -&gt; String? = {\n        null    \n    }\n\n    val map = transform(transformer)\n\n    print(map)\n\n}\n</code></pre>\n\n<p>You can check how this works here: <a href=\"https://play.kotlinlang.org/#eyJ2ZXJzaW9uIjoiMS4zLjQwIiwicGxhdGZvcm0iOiJqYXZhIiwiYXJncyI6IiIsImpzQ29kZSI6IiIsIm5vbmVNYXJrZXJzIjp0cnVlLCJ0aGVtZSI6ImlkZWEiLCJjb2RlIjoidmFsIGl0ZW1zOiBMaXN0PFN0cmluZz8+ID0gbGlzdE9mKG51bGwsIFwiY29zYVwiKVxuXG5mdW4gIHRyYW5zZm9ybSAodHJhbnNmb3JtZXI6IChTdHJpbmcpIC0+IFN0cmluZz8pIHtcbiAgICBpdGVtcy5tYXBOb3ROdWxsKHRyYW5zZm9ybWVyKVxufVxuXG5mdW4gbWFpbigpIHtcbiAgICB2YWwgaXRlbXM6IExpc3Q8U3RyaW5nPz4gPSBsaXN0T2YobnVsbCwgXCJjb3NhXCIpXG5cdFxuICAgIHZhbCB0cmFuc2Zvcm1lcjogKFN0cmluZykgLT4gU3RyaW5nPyA9IHtcbiAgICBcdG51bGwgICAgXG4gICAgfVxuICAgIFxuXHR2YWwgbWFwID0gdHJhbnNmb3JtKHRyYW5zZm9ybWVyKVxuXG5cdHByaW50KG1hcClcblxufSJ9\" rel=\"nofollow noreferrer\">play.kotlinlang</a></p>\n\n<p>How can I declare the parameter of <code>fun transform</code> to be able to pass it inside of the <code>mapNotNull</code> ?</p>\n"}, {"tags": ["android", "kotlin", "kotlin-coroutines"], "comments": [{"owner": {"reputation": 16050, "user_id": 4168607, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/Z0uMk.jpg?s=128&g=1", "display_name": "ADM", "link": "https://stackoverflow.com/users/4168607/adm"}, "edited": false, "score": 1, "creation_date": 1573620472, "post_id": 58829736, "comment_id": 103936667, "body": "You can not compare it .. Because under the hood they all are mostly the same in terms of performance...  They vary in resource utilization.. Except each API you have mentioned have a different purpose in android.."}], "answers": [{"tags": [], "owner": {"reputation": 699, "user_id": 3379751, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/19ac73ac00eae3b39950161b8f44d6a5?s=128&d=identicon&r=PG&f=1", "display_name": "Samuel Urbanowicz", "link": "https://stackoverflow.com/users/3379751/samuel-urbanowicz"}, "is_accepted": false, "score": 1, "last_activity_date": 1574241417, "creation_date": 1574241417, "answer_id": 58950684, "question_id": 58829736, "link": "https://stackoverflow.com/questions/58829736/best-api-to-do-background-task-in-android/58950684#58950684", "title": "Best API to do background task in android?", "body": "<p>Coroutines are designed to provide a lightweight asynchronous programming framework. You can use Coroutines to start async job which is bounded to the local lifecycle scope of some part of your app. For example, if you want to call a REST API when the user clicks the \"login\" button. In this case, you don't really care if this result was complete (for example the user can go back and the task will cancel). If you need to be sure the task will complete then the WorkManager would be a better choice (e.g. it would be suitable for a long-running upload task which would be better to perform in the background).</p>\n\n<p>If you'd like to see more about the practical use of coroutines for async jobs on Android I can recommend my article:\n<a href=\"https://www.netguru.com/codestories/android-coroutines-%EF%B8%8Fin-2020\" rel=\"nofollow noreferrer\">https://www.netguru.com/codestories/android-coroutines-%EF%B8%8Fin-2020</a></p>\n"}], "owner": {"reputation": 259, "user_id": 9846650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JH1AX.jpg?s=128&g=1", "display_name": "mad_lad", "link": "https://stackoverflow.com/users/9846650/mad-lad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 227, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1574241417, "creation_date": 1573614350, "last_edit_date": 1573625705, "question_id": 58829736, "link": "https://stackoverflow.com/questions/58829736/best-api-to-do-background-task-in-android", "title": "Best API to do background task in android?", "body": "<p>Which is fastest Kotlin Coroutines or Work Manager API to fetch images and videos from an Android phone. Or any other Methods ?</p>\n"}, {"tags": ["database", "search", "kotlin", "android-sqlite", "crud"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 12363376, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCXdSk5j_mcMhjIjEszFnw4X5-vOPSdi7Kj3QvFAw=k-s128", "display_name": "Mohammed Helal", "link": "https://stackoverflow.com/users/12363376/mohammed-helal"}, "edited": false, "score": 0, "creation_date": 1573654526, "post_id": 58830753, "comment_id": 103952331, "body": "Perfect, Worked very well"}, {"owner": {"reputation": 23, "user_id": 12363376, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCXdSk5j_mcMhjIjEszFnw4X5-vOPSdi7Kj3QvFAw=k-s128", "display_name": "Mohammed Helal", "link": "https://stackoverflow.com/users/12363376/mohammed-helal"}, "edited": false, "score": 0, "creation_date": 1573960008, "post_id": 58830753, "comment_id": 104058819, "body": "sir I&#39;ve another problem with my prog, would u help me figure it out?"}, {"owner": {"reputation": 31155, "user_id": 4744514, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RQ2Np.jpg?s=128&g=1", "display_name": "MikeT", "link": "https://stackoverflow.com/users/4744514/miket"}, "reply_to_user": {"reputation": 23, "user_id": 12363376, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCXdSk5j_mcMhjIjEszFnw4X5-vOPSdi7Kj3QvFAw=k-s128", "display_name": "Mohammed Helal", "link": "https://stackoverflow.com/users/12363376/mohammed-helal"}, "edited": false, "score": 0, "creation_date": 1573961602, "post_id": 58830753, "comment_id": 104059042, "body": "@MohammedHelal if you ask a question then there may be a chance that I&#39;ll answer."}], "tags": [], "owner": {"reputation": 31155, "user_id": 4744514, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RQ2Np.jpg?s=128&g=1", "display_name": "MikeT", "link": "https://stackoverflow.com/users/4744514/miket"}, "is_accepted": true, "score": 0, "last_activity_date": 1573622423, "creation_date": 1573622423, "answer_id": 58830753, "question_id": 58827095, "link": "https://stackoverflow.com/questions/58827095/problem-searching-sqlite-database-in-kotlin/58830753#58830753", "title": "Problem searching sqlite database in kotlin", "body": "<p>I believe that your issue is that a selection from spinner1 doesn't drive spinner2 to change. You also have inefficiencies in that if spinner 2 were to be driven by spinner1 then you would build a new adapter each time.</p>\n\n<p>Perhaps consider the following example that incorporates a single function to return the appropriate ArrayList i.e <strong>getArrayList</strong> and functions that manage a single instance of the adapter i.e. <strong>manageSpinner1</strong> and <strong>manageSpinner2</strong> noting that the spinner1's <strong>onItemSelected</strong> invokes <strong>manageSpinner2</strong>.</p>\n\n<p>The example also loads some test data via the <strong>addSomeData</strong> function (this onlt adds data when there is no data).</p>\n\n<p><strong>Note</strong> for my convenience the layout used is <strong>activity_main.xml</strong> (you would just use your layout).</p>\n\n<p>The activity <strong>MainActivity.kt</strong> is (note that much of your original code has been commented out) :-</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\n    lateinit var selected :String\n    var adapter1 :ArrayAdapter&lt;String&gt;? = null\n    var adapter2 :ArrayAdapter&lt;String&gt;? = null\n    var DepartmentList = ArrayList&lt;String&gt;()\n    var ProfessionList = ArrayList&lt;String&gt;()\n    var mySpinner1 :Spinner? = null\n    var mySpinner2 :Spinner? = null\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        val dbHelper = DBHelper(this)\n        addSomeData(dbHelper)\n        selected = \"\"\n        val s1 = spin1\n        mySpinner1 = spin1\n        mySpinner2 = spin2\n        manageSpinner1(dbHelper)\n    }\n\n\n    private fun addSomeData(dbhlepr :DBHelper) {\n        val db = dbhlepr.writableDatabase\n        if (DatabaseUtils.queryNumEntries(db,DBHelper.TABLE_EMP) &gt; 0) return\n        dbhlepr.insertDataEmp(1,\"Mary\",\"Nurse\",\"Dept1\",\"phone1\",\"14\",\"03\",\"1998\",\"01\",\"01\",\"2005\")\n        dbhlepr.insertDataEmp(2,\"John\",\"Attendant\",\"Dept6\",\"phone1\",\"14\",\"03\",\"1998\",\"01\",\"01\",\"2005\")\n        dbhlepr.insertDataEmp(3,\"Susan\",\"Doctor\",\"Dept15\",\"phone1\",\"14\",\"03\",\"1998\",\"01\",\"01\",\"2005\")\n        dbhlepr.insertDataEmp(4,\"Geoff\",\"Surgeon\",\"Dept25\",\"phone1\",\"14\",\"03\",\"1998\",\"01\",\"01\",\"2005\")\n    }\n\n    private fun manageSpinner1(dbHelper: DBHelper) {\n        DepartmentList.clear()\n        DepartmentList.addAll(getArrayList(dbHelper, TYPE_DEPT))\n        if (adapter1 == null) {\n            adapter1 = ArrayAdapter(this,android.R.layout.simple_list_item_1,DepartmentList)\n            spin1.adapter = adapter1\n            spin1.onItemSelectedListener = object : AdapterView.OnItemSelectedListener {\n                override fun onNothingSelected(parent1: AdapterView&lt;*&gt;?) {}\n\n                override fun onItemSelected(parent1: AdapterView&lt;*&gt;?, view: View?, position: Int, id: Long) {\n                    selected = \"${parent1?.selectedItem.toString()}\"\n                    manageSpinner2(dbHelper)\n                }\n            }\n        } else {\n            adapter1!!.notifyDataSetChanged()\n        }\n    }\n\n    private fun manageSpinner2(dbHelper: DBHelper) {\n        Log.d(\"SPINNER2\",\"Managing Spinner 2 selected department is \" + selected)\n        ProfessionList.clear()\n        ProfessionList.addAll(getArrayList(dbHelper, TYPE_PROF))\n        if (adapter2 == null) {\n            adapter2 = ArrayAdapter(this,android.R.layout.simple_list_item_1,ProfessionList)\n            spin2.adapter = adapter2\n            spin2.onItemSelectedListener = object : AdapterView.OnItemSelectedListener {\n                override fun onNothingSelected(parent1: AdapterView&lt;*&gt;?) {}\n\n                override fun onItemSelected(parent1: AdapterView&lt;*&gt;?, view: View?, position: Int, id: Long) {\n                }\n            }\n        } else {\n            adapter2!!.notifyDataSetChanged()\n        }\n    }\n\n    private fun getArrayList(dbHelper: DBHelper, type: Int) :ArrayList&lt;String&gt; {\n        var rv = ArrayList&lt;String&gt;()\n        var query = \"\"\n        val db = dbHelper.writableDatabase\n        if (type == TYPE_DEPT) {\n            query =\" SELECT \" + DBHelper.COL_14 + \" FROM \" + DBHelper.TABLE_EMP + \" GROUP BY \" + DBHelper.COL_14\n        } else {\n            query = \"SELECT \" + DBHelper.COL_13 + \" FROM \" + DBHelper.TABLE_EMP +\n                    \" WHERE \" + DBHelper.COL_14 + \"='\" + selected + \"'\"\n                    \" GROUP BY \" + DBHelper.COL_13\n        }\n        Log.d(\"GETARRAYLIST\",\"Query is \\n\\t\" + query)\n        val c = db.rawQuery(query,null)\n        while (c.moveToNext()) {\n            rv.add(c.getString(0))\n        }\n        c.close()\n        return rv\n    }\n\n    companion object {\n        const val TYPE_DEPT = 1\n        const val TYPE_PROF = 2\n    }\n}\n</code></pre>\n\n<h1>Results</h1>\n\n<p>When first run :-</p>\n\n<p><a href=\"https://i.stack.imgur.com/YTj0F.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YTj0F.png\" alt=\"enter image description here\"></a></p>\n\n<p>Spinner1 expanded :-</p>\n\n<p><a href=\"https://i.stack.imgur.com/C3UYr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/C3UYr.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Dept15</strong> selected (profession Doctor):-</p>\n\n<p><a href=\"https://i.stack.imgur.com/s99xq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/s99xq.png\" alt=\"enter image description here\"></a></p>\n\n<p>and so on.</p>\n\n<p>Note that Spinner2 could just be a TextView as there will only ever be 1 Profession for a selected department.</p>\n"}], "owner": {"reputation": 23, "user_id": 12363376, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCXdSk5j_mcMhjIjEszFnw4X5-vOPSdi7Kj3QvFAw=k-s128", "display_name": "Mohammed Helal", "link": "https://stackoverflow.com/users/12363376/mohammed-helal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 424, "favorite_count": 0, "accepted_answer_id": 58830753, "answer_count": 1, "score": 1, "last_activity_date": 1573622423, "creation_date": 1573594735, "question_id": 58827095, "link": "https://stackoverflow.com/questions/58827095/problem-searching-sqlite-database-in-kotlin", "title": "Problem searching sqlite database in kotlin", "body": "<p>First of all i'm nobbie in Kotlin, trying to learn at home, started making a program for company i work for.\nMade SQLite database consists of 4 tables, one of them is \"Empeloyees\" that have data of employees at the company including departments and professions.\nSecond table records Holidays taken by those employees.</p>\n\n<p>This is My Main Activity code:</p>\n\n<pre><code>class DBHelper(context: Context) :\n    SQLiteOpenHelper(context, DB_Name, null, 1) {\n    override fun onCreate(db: SQLiteDatabase) {\n        db.execSQL(\"CREATE TABLE IF NOT EXISTS Empeloyees (EmpID INTEGER PRIMARY KEY, EmpName TEXT NOT NULL, EmpProfession TEXT NOT NULL, EmpDepartment TEXT NOT NULL, EmpPhone TEXT NOT NULL, EmpDayofbirth TEXT, EmpMonthofbirth TEXT, EmpYearofbirth TEXT, EmpDayofhire  TEXT, EmpMonthofhire TEXT, EmpYearofhire TEXT)\")\n        db.execSQL(\"CREATE TABLE IF NOT EXISTS Wardeya (WarID INTEGER PRIMARY KEY AUTOINCREMENT, WarName TEXT NOT NULL)\")\n        db.execSQL(\"CREATE TABLE IF NOT EXISTS Permessions (PermID INTEGER PRIMARY KEY, EmpName TEXT NOT NULL, Engineer TEXT NOT NULL, Wardeya TEXT NOT NULL, PermDay TEXT NOT NULL, PermMonth TEXT NOT NULL, PermYear TEXT NOT NULL)\")\n        db.execSQL(\"CREATE TABLE IF NOT EXISTS Holidays (HolidayID INTEGER PRIMARY KEY, Department TEXT NOT NULL, Profession TEXT NOT NULL, EmpName TEXT NOT NULL, DaysofHoliday TEXT NOT NULL, StartDay TEXT NOT NULL, StartMonth TEXT NOT NULL, StartYear TEXT NOT NULL, EndDay TEXT NOT NULL, EndMonth TEXT NOT NULL, EndYear TEXT NOT NULL, PresentedDay TEXT NOT NULL, PresentedMonth TEXT NOT NULL, PresentedYear TEXT NOT NULL, Engineer TEXT NOT NULL, ApproveDay TEXT NOT NULL, ApproveMonth TEXT NOT NULL, ApproveYear TEXT NOT NULL)\")\n    }\n\noverride fun onUpgrade(db: SQLiteDatabase, oldVersion: Int, newVersion: Int) {\n    db.execSQL(\"DROP TABLE IF EXISTS Empeloyees\")\n    db.execSQL(\"DROP TABLE IF EXISTS Wardeya\")\n    db.execSQL(\"DROP TABLE IF EXISTS Permessions\")\n    db.execSQL(\"DROP TABLE IF EXISTS Holidays\")\n    onCreate(db)\n}\n\nfun insertDataEmp(id: Int, name: String, prof: String, department: String, phone: String, dayofbirth: String, monthofbirth: String, yearofbirth: String, dayofhire: String, monthofhire: String, yearofhire: String) {\n        val db = this.writableDatabase\n        val contentValues = ContentValues()\n        contentValues.put(COL_11, id)\n        contentValues.put(COL_12, name)\n        contentValues.put(COL_13, prof)\n        contentValues.put(COL_14, department)\n        contentValues.put(COL_15, phone)\n        contentValues.put(COL_16, dayofbirth)\n        contentValues.put(COL_17, monthofbirth)\n        contentValues.put(COL_18, yearofbirth)\n        contentValues.put(COL_19, dayofhire)\n        contentValues.put(COL_110, monthofhire)\n        contentValues.put(COL_111, yearofhire)\n        db.insert(TABLE_EMP, null, contentValues)\n    }\n\n    val allDataEmp : Cursor\n        get() {\n            val db = this.writableDatabase\n            val res = db.rawQuery(\"SELECT * FROM \" + TABLE_EMP, null)\n            return res\n        }\n</code></pre>\n\n<p>Those r for building database and tables.</p>\n\n<p>I've another activity that makes interface to insert Holidays data, like who asked to take a holiday, n which department he works in, n wats his profession. So I started the activity with 2 snippers, one to search for Departments in Empolyees table, n second is to search for professions according to departments:</p>\n\n<pre><code>override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_holidays_page)\nval s1 = spin1\n\n        s1.onItemSelectedListener = object : OnItemSelectedListener {\n            override fun onNothingSelected(parent1: AdapterView&lt;*&gt;?) {\n\n            }\n\n            override fun onItemSelected(parent1: AdapterView&lt;*&gt;?, view: View?, position: Int, id: Long) {\n                DepartmentTextView.text = \"${parent1?.selectedItem.toString()}\"\n            }\n\n        }\nval DepartmentList = ArrayList&lt;String&gt;()\n        val ProfessionList = ArrayList&lt;String&gt;()\n        val db = dbHelper.readableDatabase\n        val st1 = \"SELECT DISTINCT EmpProfession FROM Empeloyees where EmpDepartment=\\'\"+DepartmentTextView.text.toString()+\"\\'\"\n        val c1 = db.rawQuery(\"SELECT DISTINCT EmpDepartment FROM Empeloyees\", null)\n        val c2 = db.rawQuery(st1, null)\n        if (c1.moveToFirst()) {\n            do {\n                DepartmentList.add(c1.getString(c1.getColumnIndex(\"EmpDepartment\")))\n            }\n                while (c1.moveToNext())\n                val mySpinner1 = findViewById(R.id.spin1) as Spinner\n                var adapter= ArrayAdapter(this,android.R.layout.simple_list_item_1,DepartmentList)\n                mySpinner1.adapter = adapter\n            }\n        if (c2.moveToFirst()) {\n            do {\n                ProfessionList.add(c2.getString(c2.getColumnIndex(\"EmpProfession\")))\n            }\n            while (c2.moveToNext())\n            val mySpinner2 = findViewById(R.id.spin2) as Spinner\n            var adapter1 = ArrayAdapter(this, android.R.layout.simple_list_item_1, ProfessionList)\n            mySpinner2.adapter = adapter1\n        }\n    }\n</code></pre>\n\n<p>The first one departments from Employees table and put them in array list n bind it to snipper1 adapter.\nMy main Problem is the cursor of the second search, I tried all possible solutions (\"= Operator\", \"LIKE Operator\", \"MATCH Operator\"), nothing of them search in the table. But when I change cursor sql string to \"SELECT DISTINCT EmpProfession FROM Empeloyees\" I get snipper2 adapter.</p>\n\n<p>so any idea where's the problem???</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1573594724, "post_id": 58826797, "comment_id": 103930627, "body": "<code>source.forEach</code> looks like it could be your issue. You&#39;re ignoring <code>start</code> and <code>end</code>. I don&#39;t know why <code>source</code> isn&#39;t simply the new characters and <code>start</code> and <code>end</code> are necessary, but there must be some optimization going on behind the curtain, so you should only put characters of <code>source</code> that are between those indices into your builder."}, {"owner": {"reputation": 11, "user_id": 6876176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3652508acac824af2dc609dc7e5a1fbe?s=128&d=identicon&r=PG&f=1", "display_name": "bradleybj09", "link": "https://stackoverflow.com/users/6876176/bradleybj09"}, "reply_to_user": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1573595783, "post_id": 58826797, "comment_id": 103930985, "body": "@Tenfour04 That&#39;s a good point, but here&#39;s a fun fact: If I remove the Toast, everything works perfectly. And, if I wait between key presses until the toast finishes, it ALSO works. If I move the toast outside of the same scope block as what else is there, the same things happen, so it doesn&#39;t have anything to do with the return block somehow getting delayed. I think that while it is running the Toast, the source stacks up and gets wonky. So... I guess no toast from inside the filter."}, {"owner": {"reputation": 11, "user_id": 6876176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3652508acac824af2dc609dc7e5a1fbe?s=128&d=identicon&r=PG&f=1", "display_name": "bradleybj09", "link": "https://stackoverflow.com/users/6876176/bradleybj09"}, "reply_to_user": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1573597909, "post_id": 58826797, "comment_id": 103931707, "body": "I&#39;m going to retry with the toast in a separate thread in a callback to the UI context owner, instead of doing it here. It seems to be pretty directly related to running it inside of the filter. Will update when I try that."}, {"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1573663438, "post_id": 58826797, "comment_id": 103957645, "body": "In your edit, it looks like it&#39;s behaving correctly to me in your last set of logs. What am I missing? Is it that you don&#39;t want the toast to display when the user presses backspace?"}, {"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1573663863, "post_id": 58826797, "comment_id": 103957872, "body": "When pressing backspace, I would expect <code>start == end</code> so you shouldn&#39;t reach your else block, assuming you are never looking at a character outside that range."}, {"owner": {"reputation": 11, "user_id": 6876176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3652508acac824af2dc609dc7e5a1fbe?s=128&d=identicon&r=PG&f=1", "display_name": "bradleybj09", "link": "https://stackoverflow.com/users/6876176/bradleybj09"}, "reply_to_user": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1573664840, "post_id": 58826797, "comment_id": 103958360, "body": "The toast is firing when the user types &#39;a&#39;, because a 1 is still stored in source, and the entire source (not just the &#39;a&#39;) is being passed into the filter"}, {"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1573664919, "post_id": 58826797, "comment_id": 103958390, "body": "But if you&#39;re only looking at characters between start and end, you won&#39;t reach your else block because you won&#39;t be looking at the <code>1</code> character again."}, {"owner": {"reputation": 11, "user_id": 6876176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3652508acac824af2dc609dc7e5a1fbe?s=128&d=identicon&r=PG&f=1", "display_name": "bradleybj09", "link": "https://stackoverflow.com/users/6876176/bradleybj09"}, "reply_to_user": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1573755858, "post_id": 58826797, "comment_id": 103997639, "body": "I think that&#39;s the misunderstanding here: start and end are 0 and last. Because it came in a spannable, the filter is attempting to replace the ENTIRE dest with the ENTIRE source, because it&#39;s picking the whole thing up in a span. In my numeric input fields, this is not the case and what you&#39;re saying is true."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6876176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3652508acac824af2dc609dc7e5a1fbe?s=128&d=identicon&r=PG&f=1", "display_name": "bradleybj09", "link": "https://stackoverflow.com/users/6876176/bradleybj09"}, "edited": false, "score": 0, "creation_date": 1573661934, "post_id": 58827712, "comment_id": 103956709, "body": "See my edits to the original question - still broken."}, {"owner": {"reputation": 11, "user_id": 6876176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3652508acac824af2dc609dc7e5a1fbe?s=128&d=identicon&r=PG&f=1", "display_name": "bradleybj09", "link": "https://stackoverflow.com/users/6876176/bradleybj09"}, "edited": false, "score": 0, "creation_date": 1573662136, "post_id": 58827712, "comment_id": 103956841, "body": "The fundamental problem is that the characters that I am filtering out are being persisted by one of the InputFilter/EditText/Spannable/Editable and being returned in the the source. Because it&#39;s a text field, when we receive a Spannable, it attempts to replace the entire string, not just one character. This is due to how the InputFilter deals with Spannable vs not Spannable, and why it receives one vs the other."}], "tags": [], "owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "is_accepted": false, "score": 0, "last_activity_date": 1573598086, "creation_date": 1573598086, "answer_id": 58827712, "question_id": 58826797, "link": "https://stackoverflow.com/questions/58826797/when-my-inputfilter-source-comes-in-as-spannable-the-source-does-not-remove-the/58827712#58827712", "title": "When my InputFilter source comes in as spannable, the source does not remove the characters I filter out", "body": "<p>I suggest this to concisely take the source delimiters into account:</p>\n\n<pre><code>override fun filter(source: CharSequence, start: Int, end: Int, dest: Spanned?, dstart: Int, dend: Int): CharSequence? {\n    val builder = StringBuilder()\n    for (c in source.subSequence(start, end) {\n        if (c.isValid()) builder.append(c)\n    }\n    return if (builder.length == end - start) {\n        null\n    } else {\n        showInputToast(R.string.textInputInvalid)\n        //...\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 6876176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3652508acac824af2dc609dc7e5a1fbe?s=128&d=identicon&r=PG&f=1", "display_name": "bradleybj09", "link": "https://stackoverflow.com/users/6876176/bradleybj09"}, "edited": false, "score": 0, "creation_date": 1573673957, "post_id": 58842021, "comment_id": 103962502, "body": "This still doesn&#39;t address the problem that it is attempting to replace the ENTIRE field with the ENTIRE entry - right? So, imagine someone types 20 valid characters and then bumps a number. It would wipe the whole field. Because it uses the entire field as the &#39;source&#39; intended to replace the entire &#39;dest&#39;, even one character entry would wipe the entire field. It still boils down to this horrible &#39;is the source Spannable or not&#39; (This was an option I&#39;ve tested already)"}, {"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "reply_to_user": {"reputation": 11, "user_id": 6876176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3652508acac824af2dc609dc7e5a1fbe?s=128&d=identicon&r=PG&f=1", "display_name": "bradleybj09", "link": "https://stackoverflow.com/users/6876176/bradleybj09"}, "edited": false, "score": 0, "creation_date": 1573674765, "post_id": 58842021, "comment_id": 103962877, "body": "Is it? That would violate the javadoc for the method. If you look at the source code of InputFilter.LengthFilter, they use <code>&quot;&quot;</code> to reject changes, and they don&#39;t consider whether Source is a Spanned at all."}, {"owner": {"reputation": 11, "user_id": 6876176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3652508acac824af2dc609dc7e5a1fbe?s=128&d=identicon&r=PG&f=1", "display_name": "bradleybj09", "link": "https://stackoverflow.com/users/6876176/bradleybj09"}, "edited": false, "score": 0, "creation_date": 1573680805, "post_id": 58842021, "comment_id": 103965500, "body": "It is for me, but I&#39;ll keep exploring and see if I can find what&#39;s up."}], "tags": [], "owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "is_accepted": false, "score": 0, "last_activity_date": 1573664321, "creation_date": 1573664321, "answer_id": 58842021, "question_id": 58826797, "link": "https://stackoverflow.com/questions/58826797/when-my-inputfilter-source-comes-in-as-spannable-the-source-does-not-remove-the/58842021#58842021", "title": "When my InputFilter source comes in as spannable, the source does not remove the characters I filter out", "body": "<p>You might consider simplifying the whole thing to reject any incoming block of text if it contains <em>any</em> invalid characters. Presumably, you will get either one new character at a time, or the user is pasting a block of text. Do you really want to filter pieces of a block of text that contains invalid characters? In many cases, this would be unexpected behavior.</p>\n\n<p>So if it's acceptable behavior to do this, your filter simplifies down to:</p>\n\n<pre><code>override fun filter(source: CharSequence, start: Int, end: Int, dest: Spanned?, dstart: Int, dend: Int): CharSequence? {\n    for (i in start until end) {\n        if (!source.charAt(i).isValid()) {\n            showInputToast(R.string.textInputInvalid)\n            return \"\"\n        }\n    }\n    return null\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6876176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3652508acac824af2dc609dc7e5a1fbe?s=128&d=identicon&r=PG&f=1", "display_name": "bradleybj09", "link": "https://stackoverflow.com/users/6876176/bradleybj09"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1573664321, "creation_date": 1573593390, "last_edit_date": 1573661914, "question_id": 58826797, "link": "https://stackoverflow.com/questions/58826797/when-my-inputfilter-source-comes-in-as-spannable-the-source-does-not-remove-the", "title": "When my InputFilter source comes in as spannable, the source does not remove the characters I filter out", "body": "<p>I am filtering most characters and numbers out in this use case. When I type several 'filtered' characters, let's say 555, the <code>source</code> of each following filter event still has those 5's in it, even though they have been filtered out. This means that after typing 555, and having nothing appear in the EditText, I have to backspace 3 times before I actually start backspacing what is in the EditText. Not only that, but my 'invalid input' toast fires on every backspace, because my <code>source</code> still has the 5's in it.</p>\n\n<p>So, if I type abc123abc, my field shows abcabc, but logging my <code>source</code> shows abc123abc and I throw invalid toasts all over the place.</p>\n\n<p>The superclass for the filter has nothing except a protected method to show the toast, and is used on the filters that work, as well.</p>\n\n<p>InputFilter</p>\n\n<pre><code>class TextInputFilter constructor(\n    private val letters: Boolean,\n    private val numbers: Boolean,\n    private val whitespace: Boolean,\n    private val extraCharacters: Array&lt;Char&gt;,\n    context: Context?\n) : ToastInputFilter(context) {\n\n    override fun filter(source: CharSequence, start: Int, end: Int, dest: Spanned?, dstart: Int, dend: Int): CharSequence? {\n        var valid = true\n        val builder = StringBuilder()\n        source.forEach { c -&gt;\n            if (c.isValid()) {\n                builder.append(c)\n            } else {\n                valid = false\n            }\n        }\n        return if (valid) {\n            null\n        } else {\n            showInputToast(R.string.textInputInvalid)\n            if (source is Spanned) {\n                val spannable = SpannableString(builder)\n                TextUtils.copySpansFrom(source, start, builder.length, null, spannable, 0)\n                spannable\n            } else {\n                builder\n            }\n        }\n    }\n\n    private fun Char.isValid(): Boolean {\n        return when {\n            isLetter() -&gt; letters\n            isDigit() -&gt; numbers\n            isWhitespace() -&gt; whitespace\n            else -&gt; this in extraCharacters\n        }\n    }\n}\n</code></pre>\n\n<p>Instantiation with args</p>\n\n<pre><code>titleEditText.filters = arrayOf(\n                TextInputFilter(letters = true, numbers = false, whitespace = true, extraCharacters = chars, context = context)\n            )\n</code></pre>\n\n<p>The extra chars that I'm allowing</p>\n\n<pre><code>    chars = safeGetString(R.string.alphaExtraChars).toCharArray().toTypedArray()\n</code></pre>\n\n<pre><code>    &lt;string name=\"alphaExtraChars\"&gt;\\'.-&lt;/string&gt;\n</code></pre>\n\n<p>I've tried everything I can think of, and I have other filters that work fine on number input, because the source does not come in as <code>Spannable</code>, and only deals with the new piece of input, not the entire field.</p>\n\n<p>Edit after using start|end arguments, this happens:</p>\n\n<pre><code>A -&gt; Log: A | Display: A\nb -&gt; Log: Ab | Display: Ab\nc -&gt; Log: Abc | Display: Abc\n1 -&gt; Log: Abc1 | Display: Abc + TOAST\n2 -&gt; Log: Abc12 | Display: Abc + TOAST\n3 -&gt; Log: Abc123 | Display: Abc + TOAST\nBackspace -&gt; Log: Ab | Display: Ab\n</code></pre>\n\n<p>Good.\nBut, when I keep typing valid characters after invalid characters:</p>\n\n<pre><code>A -&gt; Log: A | Display: A\n1 -&gt; Log: A1 | Display: A + TOAST\na -&gt; Log: A1a | Display: Aa + TOAST\n1 -&gt; Log: A1a1 | Display: Aa + TOAST\na -&gt; Log: A1a1a | Display: Aaa + TOAST\nBackspace -&gt; Log: A1a1 | Display: Aa + TOAST\nBackspace -&gt; Log: A | Display: A\n</code></pre>\n"}, {"tags": ["java", "kotlin", "mockito", "partial-mocks"], "comments": [{"owner": {"reputation": 3646, "user_id": 11514534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b10ca983c4ac8bcb07661de28130b991?s=128&d=identicon&r=PG&f=1", "display_name": "second", "link": "https://stackoverflow.com/users/11514534/second"}, "edited": false, "score": 0, "creation_date": 1573596395, "post_id": 58826513, "comment_id": 103931190, "body": "I would interpret the <code>return of 1</code> as a sign that the class has not been mocked. (Check whether you see the <code>println</code>.) If it where mocked it is supposed to return <code>0</code>. (Unless that is different in kotlin). Partiall mocks are created using <code>spy</code>."}, {"owner": {"reputation": 255, "user_id": 545398, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7688221ebba869b849143063bb3c8b43?s=128&d=identicon&r=PG", "display_name": "Aethon Invictus", "link": "https://stackoverflow.com/users/545398/aethon-invictus"}, "reply_to_user": {"reputation": 3646, "user_id": 11514534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b10ca983c4ac8bcb07661de28130b991?s=128&d=identicon&r=PG&f=1", "display_name": "second", "link": "https://stackoverflow.com/users/11514534/second"}, "edited": false, "score": 0, "creation_date": 1573602015, "post_id": 58826513, "comment_id": 103932825, "body": "I updated the question to show that Mockito reports that the class is mocked. I also added a second call to <code>doit</code> to show that the &quot;mock&quot; is holding state."}, {"owner": {"reputation": 3646, "user_id": 11514534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b10ca983c4ac8bcb07661de28130b991?s=128&d=identicon&r=PG&f=1", "display_name": "second", "link": "https://stackoverflow.com/users/11514534/second"}, "edited": false, "score": 2, "creation_date": 1573655706, "post_id": 58826513, "comment_id": 103953064, "body": "I think this behaviour might be an incompatibility regarding <code>kotlin</code>, so I added it as a tag. Did you try other mock libraries (<code>mockito-kotlin</code> or <code>mockk</code>)?"}, {"owner": {"reputation": 255, "user_id": 545398, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7688221ebba869b849143063bb3c8b43?s=128&d=identicon&r=PG", "display_name": "Aethon Invictus", "link": "https://stackoverflow.com/users/545398/aethon-invictus"}, "reply_to_user": {"reputation": 3646, "user_id": 11514534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b10ca983c4ac8bcb07661de28130b991?s=128&d=identicon&r=PG&f=1", "display_name": "second", "link": "https://stackoverflow.com/users/11514534/second"}, "edited": false, "score": 0, "creation_date": 1573681011, "post_id": 58826513, "comment_id": 103965588, "body": "@second: Doh! We are seeing similar behavior in Java (that is what prompted the investigation). But sure enough, the Java version of the code above creates the expected mock. I will work on a better repro. Thanks!"}, {"owner": {"reputation": 3646, "user_id": 11514534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b10ca983c4ac8bcb07661de28130b991?s=128&d=identicon&r=PG&f=1", "display_name": "second", "link": "https://stackoverflow.com/users/11514534/second"}, "edited": false, "score": 1, "creation_date": 1573682488, "post_id": 58826513, "comment_id": 103966228, "body": "If you have an java example that is causing you problems feel free to add a new question including an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "answers": [{"tags": [], "owner": {"reputation": 255, "user_id": 545398, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7688221ebba869b849143063bb3c8b43?s=128&d=identicon&r=PG", "display_name": "Aethon Invictus", "link": "https://stackoverflow.com/users/545398/aethon-invictus"}, "is_accepted": false, "score": 1, "last_activity_date": 1576176476, "creation_date": 1576176476, "answer_id": 59311028, "question_id": 58826513, "link": "https://stackoverflow.com/questions/58826513/when-does-mockito-mock-create-a-partial-mock-instead-of-a-full-mock/59311028#59311028", "title": "When does Mockito.mock create a partial mock instead of a &quot;full&quot; mock?", "body": "<p>Poking through the source code and by trial and error testing, I have come to the following conclusions:</p>\n\n<ol>\n<li>When mocking a class, Mockito creates an instance of a ByteBuddy-generated subclass of the class <em>without calling the constructor</em> => all member data is default values.</li>\n<li>Open methods (the default for Java; declared with <code>open</code> in Kotlin):\n\n<ul>\n<li>by default are <em>not</em> called and return the default for the return type.</li>\n<li>will be called when configured with <code>when(...).thenCallRealMethod()</code>.</li>\n<li>will be called if the mock is created with <code>defaultAnswer</code> set to <code>CALLS_REAL_METHODS</code></li>\n</ul></li>\n<li><code>final</code> methods cannot be overridden => they will be invoked normally, but they will see default values for all member data.</li>\n</ol>\n\n<p>So, it seems that all class mocks are partial mocks, but since the default in Java is for methods to be open, they often look like regular mocks. By default, they are <em>effectively</em> regular mocks.</p>\n\n<p>This shows up quickly in Kotlin since methods are <code>final</code> by default.</p>\n\n<p>Knowing how this works makes dealing with class mocks less frustrating!</p>\n"}], "owner": {"reputation": 255, "user_id": 545398, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7688221ebba869b849143063bb3c8b43?s=128&d=identicon&r=PG", "display_name": "Aethon Invictus", "link": "https://stackoverflow.com/users/545398/aethon-invictus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 441, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1576176892, "creation_date": 1573592051, "last_edit_date": 1576176892, "question_id": 58826513, "link": "https://stackoverflow.com/questions/58826513/when-does-mockito-mock-create-a-partial-mock-instead-of-a-full-mock", "title": "When does Mockito.mock create a partial mock instead of a &quot;full&quot; mock?", "body": "<p>Given this code:</p>\n\n<pre><code>// Subject.kt\n\nopen class Subject(var x: Int) {\n\n    constructor(): this(42) {\n        println(\"made it\")\n    }\n\n    fun doit() {\n        x += 1\n        println(\"did it: $x\")\n    }\n}\n</code></pre>\n\n<pre><code>// Tests.kt\n\nimport org.junit.jupiter.api.Test\nimport org.mockito.Mockito\n\nclass Tests {\n    @Test\n    fun makeit() {\n        val mock = Mockito.mock(Subject::class.java)\n\n        val details = Mockito.mockingDetails(mock)\n        println(\"Is mock: ${details.isMock}\")\n        println(\"Is spy:  ${details.isSpy}\")\n\n        mock.doit()\n        mock.doit()\n    }\n}\n</code></pre>\n\n<p>When <code>makeit</code> is run, the output is:</p>\n\n<pre><code>Is mock: true\nIs spy:  false\ndid it: 1\ndid it: 2\n</code></pre>\n\n<p>This seems to indicate that some instance of the subject is being created but bypassing potentially critical constructor logic. This is consistent with a \"partial mock\", but the code has done nothing to request such a thing.</p>\n\n<p>I find it surprising this is default behavior since the docs all warn strongly against using partial mocks. I have been unable to find docs that describe when <code>mock()</code> returns a partial mock, and thus can't figure out how to get a \"full mock\" from a class.</p>\n\n<p>So:</p>\n\n<ul>\n<li>When does <code>Mockito.mock()</code> create a partial mock?</li>\n<li>Can Mockito create a \"full mock\" for a class? Or just for an interface?</li>\n<li>How does one request a \"full mock\"?</li>\n</ul>\n"}, {"tags": ["java", "json", "kotlin", "jackson"], "answers": [{"comments": [{"owner": {"reputation": 132, "user_id": 2510524, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc6f46e1bb9eff9bc3d84337fd6b6507?s=128&d=identicon&r=PG", "display_name": "Tin Rabzelj", "link": "https://stackoverflow.com/users/2510524/tin-rabzelj"}, "edited": false, "score": 0, "creation_date": 1573683735, "post_id": 58832089, "comment_id": 103966699, "body": "Manage to solve it with gson by modifying <a href=\"https://github.com/google/gson/blob/master/extras/src/main/java/com/google/gson/typeadapters/RuntimeTypeAdapterFactory.java\" rel=\"nofollow noreferrer\">RuntimeTypeAdapterFactory</a>."}], "tags": [], "owner": {"reputation": 3137, "user_id": 4267015, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q8N5O.jpg?s=128&g=1", "display_name": "Naor Tedgi", "link": "https://stackoverflow.com/users/4267015/naor-tedgi"}, "is_accepted": true, "score": 1, "last_activity_date": 1573629578, "creation_date": 1573629578, "answer_id": 58832089, "question_id": 58826020, "link": "https://stackoverflow.com/questions/58826020/how-to-serialize-flux-style-actions-with-nested-payload-with-jackson/58832089#58832089", "title": "How to serialize Flux style actions with nested payload with Jackson?", "body": "<p>try <code>gson</code> JsonDeserializer for basic interfaces you get out of the box \nand the JsonSerializer very easy to implement also great documented</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    val gson = GsonBuilder().registerTypeAdapter(TodoAction::class.java, TodoActionSerializer())\n        .create()\n    val jsonString = \"{type: 'ADD_TODO',payload: {text: 'Do something.'}}\"\n    val todoAction = gson.fromJson(jsonString, TodoAction::class.java)\n\n    print(todoAction)\n}\n\n\nclass TodoAction(\n    val type: String,\n    val payload: JsonObject\n)\n\n\nclass TodoActionSerializer : JsonSerializer&lt;TodoAction&gt; {\n    override fun serialize(p0: TodoAction?, p1: Type?, p2: JsonSerializationContext?): JsonElement {\n        val response = JsonObject()\n        response.addProperty(\"type\", p0!!.type)\n        response.add(\"payload\", p0.payload)\n        return response\n    }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 132, "user_id": 2510524, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc6f46e1bb9eff9bc3d84337fd6b6507?s=128&d=identicon&r=PG", "display_name": "Tin Rabzelj", "link": "https://stackoverflow.com/users/2510524/tin-rabzelj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 58832089, "answer_count": 1, "score": 1, "last_activity_date": 1573629578, "creation_date": 1573589648, "question_id": 58826020, "link": "https://stackoverflow.com/questions/58826020/how-to-serialize-flux-style-actions-with-nested-payload-with-jackson", "title": "How to serialize Flux style actions with nested payload with Jackson?", "body": "<p>I'm trying to set up custom serialization with <a href=\"https://github.com/FasterXML/jackson\" rel=\"nofollow noreferrer\">jackson</a> for \"Flux Standard Actions\".</p>\n\n<p>An example JSON:</p>\n\n<pre class=\"lang-json prettyprint-override\"><code>{\n  type: 'ADD_TODO',\n  payload: {\n    text: 'Do something.'  \n  }\n}\n</code></pre>\n\n<p>I've tried by declaring an interface with <code>@JsonSubTypes</code>:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.PROPERTY, property = \"type\")\n@JsonSubTypes(\n    JsonSubTypes.Type(value = AddTodoAction::class)\n)\ninterface Action\n\n@JsonTypeName(\"ADD_TODO\")\ndata class AddTodoAction(\n    val text: String\n) : Action\n</code></pre>\n\n<p>And writing a custom serializer:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>class ActionSerializer&lt;T : Any&gt;(clazz: KClass&lt;T&gt;) : StdSerializer&lt;T&gt;(clazz.java) {\n    override fun serialize(value: T, gen: JsonGenerator?, provider: SerializerProvider?) {\n        // ??\n    }\n\n    override fun serializeWithType(\n        value: T?,\n        gen: JsonGenerator?,\n        serializers: SerializerProvider?,\n        typeSer: TypeSerializer?\n    ) {\n        check(gen != null)\n        check(serializers != null)\n\n        if (value == null) {\n            serializers.defaultSerializeNull(gen)\n            return\n        }\n\n        val typeId = typeSer!!.typeId(value, JsonToken.START_OBJECT)\n\n        typeSer.writeTypePrefix(gen, typeId)\n        gen.writeFieldName(\"payload\")\n        serialize(value, gen, serializers)\n        typeSer.writeTypeSuffix(gen, typeId)\n    }\n}\n</code></pre>\n\n<p>The problem here is that I don't know how to write <code>serialize</code> function without causing infinite recursion. I'm not even sure that this is the best approach. Any suggestions? I wouldn't want to write something hackish and I don't want to have a separate class for each <code>payload</code>.</p>\n"}, {"tags": ["android", "kotlin", "android-recyclerview", "android-custom-view"], "comments": [{"owner": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "edited": false, "score": 0, "creation_date": 1573589813, "post_id": 58825973, "comment_id": 103928712, "body": "<code>R.layout.scanned_devices_list_item</code> appears to be a <code>LinearLayout</code> and not a <code>TextView</code>."}, {"owner": {"reputation": 1225, "user_id": 9008140, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153470332463913/picture?type=large", "display_name": "John Lord", "link": "https://stackoverflow.com/users/9008140/john-lord"}, "edited": false, "score": 0, "creation_date": 1573591116, "post_id": 58825973, "comment_id": 103929262, "body": "a recycler view expects a control to have a tag assigned to it.  Id can be recycled."}], "answers": [{"comments": [{"owner": {"reputation": 11200, "user_id": 1055395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6778daa107272cbbf6bc69c6c24683?s=128&d=identicon&r=PG&f=1", "display_name": "Anatolii", "link": "https://stackoverflow.com/users/1055395/anatolii"}, "reply_to_user": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "edited": false, "score": 0, "creation_date": 1573592371, "post_id": 58826110, "comment_id": 103929756, "body": "@MartinZeitler Thanks for the remark! I replaced it with <code>View</code>."}, {"owner": {"reputation": 139, "user_id": 12173499, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hpkMk.png?s=128&g=1", "display_name": "August W. Gruneisen", "link": "https://stackoverflow.com/users/12173499/august-w-gruneisen"}, "edited": false, "score": 1, "creation_date": 1573592648, "post_id": 58826110, "comment_id": 103929862, "body": "Beautiful! This solved my issue. Also TextView1,TextView1,TextView1 should be TextView1,TextView2,TextView3"}], "tags": [], "owner": {"reputation": 11200, "user_id": 1055395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6778daa107272cbbf6bc69c6c24683?s=128&d=identicon&r=PG&f=1", "display_name": "Anatolii", "link": "https://stackoverflow.com/users/1055395/anatolii"}, "is_accepted": true, "score": 1, "last_activity_date": 1573592709, "last_edit_date": 1573592709, "creation_date": 1573590069, "answer_id": 58826110, "question_id": 58825973, "link": "https://stackoverflow.com/questions/58825973/how-can-i-have-multiple-textviews-inside-a-recyclerview-list-item/58826110#58826110", "title": "How can I have multiple TextViews inside a RecyclerView list item", "body": "<p>You should change your <code>ViewHolder</code> implementation as it should take your parent <code>View</code>(from the xml file) as a parameter not a <code>TextView</code>. <code>TextView</code>s are subitems that can be defined as member variables in your <code>ViewHolder</code>:</p>\n\n<pre><code>import android.view.LayoutInflater\nimport android.view.ViewGroup\nimport android.widget.TextView\nimport androidx.recyclerview.widget.RecyclerView\n\nclass ScannedDevicesListAdapter(private val myDataset: Array&lt;String&gt;) :\n    RecyclerView.Adapter&lt;ScannedDevicesListAdapter.ScannedDevicesListViewHolder&gt;() {\n\n    class ScannedDevicesListViewHolder(val view: View) : RecyclerView.ViewHolder(view) {\n        val tv1 = view.TextView1\n        val tv2 = view.TextView2\n        val tv3 = view.TextView3\n    }\n\n    // Create new views (invoked by the layout manager)\n    override fun onCreateViewHolder(parent: ViewGroup,\n                                viewType: Int): \n    ScannedDevicesListAdapter.ScannedDevicesListViewHolder {\n        // create a new view\n        val linearLayout = LayoutInflater.from(parent.context)\n        .inflate(R.layout.scanned_devices_list_item, parent, false) as View\n       // set the view's size, margins, paddings and layout parameters\n       return ScannedDevicesListViewHolder(linearLayout)\n    }\n\n    override fun onBindViewHolder(holder: ScannedDevicesListViewHolder, position: Int) {\n        holder.tv1.text = myDataset[position]\n        // set your other views here\n    }\n\n    // Return the size of your dataset (invoked by the layout manager)\n    override fun getItemCount() = myDataset.size\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2728, "user_id": 10309342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e95623d18e7fff6249a8f4f922a9b22?s=128&d=identicon&r=PG&f=1", "display_name": "gehbiszumeis", "link": "https://stackoverflow.com/users/10309342/gehbiszumeis"}, "edited": false, "score": 0, "creation_date": 1573634340, "post_id": 58833066, "comment_id": 103941479, "body": "Please put your answer always in context instead of just pasting code. See <a href=\"https://stackoverflow.com/help/how-to-answer\">here</a> for more details."}], "tags": [], "owner": {"reputation": 1, "user_id": 10896401, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-bRVOEiuRzc8/AAAAAAAAAAI/AAAAAAAAAA8/6dxwXaSJfIE/photo.jpg?sz=128", "display_name": "jenil mangukiya", "link": "https://stackoverflow.com/users/10896401/jenil-mangukiya"}, "is_accepted": false, "score": 0, "last_activity_date": 1573633909, "creation_date": 1573633909, "answer_id": 58833066, "question_id": 58825973, "link": "https://stackoverflow.com/questions/58825973/how-can-i-have-multiple-textviews-inside-a-recyclerview-list-item/58833066#58833066", "title": "How can I have multiple TextViews inside a RecyclerView list item", "body": "<p>You Can try this....</p>\n\n<pre><code>    class sel_cat_adapter(ctx: Context, list: MutableList&lt;Any&gt;) :\n    RecyclerView.Adapter&lt;RecyclerView.ViewHolder&gt;() {\n    private var ctx: Context = ctx\n    private var list: MutableList&lt;Any&gt; = list\n    private var ITEM = 0\n    private var Ads = 1\n    var ITEM_PER_Ad = 5\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): RecyclerView.ViewHolder {\n\n\n        when (viewType) {\n            ITEM -&gt; {\n                var inflater =\n                    LayoutInflater.from(ctx).inflate(R.layout.customlayoutfor_sel_cat, null, false)\n                return viewholderclass(inflater)\n            }\n            Ads -&gt; {\n                var inflater = LayoutInflater.from(ctx).inflate(R.layout.ads_banner, null, false)\n                return AdsViewHolder(inflater)\n            }\n            else -&gt; {\n                var inflater = LayoutInflater.from(ctx).inflate(R.layout.ads_banner, null, false)\n                return AdsViewHolder(inflater)\n            }\n        }\n    }\n\n    override fun getItemCount(): Int {\n        return list.size\n    }\n\n    override fun onBindViewHolder(holder: RecyclerView.ViewHolder, position: Int) {\n\n        var viewtype = getItemViewType(position)\n        when (viewtype) {\n            ITEM -&gt; {\n                var myholder = holder as viewholderclass\n            }\n            Ads -&gt; {\n                var myholder = holder as AdsViewHolder\n            }\n            else -&gt; {\n\n            }\n        }\n        holder.itemView.setOnClickListener {\n            if (viewtype == ITEM) {\n               Toast.makeText(ctx, \"Item\", Toast.LENGTH_LONG).show()\n            } else {\n                Toast.makeText(ctx, \"Ads\", Toast.LENGTH_LONG).show()\n            }\n        }\n    }\n\n    override fun getItemViewType(position: Int): Int {\n        return if (position % ITEM_PER_Ad == 0) {\n            if (list[position] is AdView) {\n                Ads\n            } else {\n                ITEM\n            }\n        } else {\n            ITEM\n        }\n    }\n\n    class AdsViewHolder(itemview: View) : RecyclerView.ViewHolder(itemview){\n\n    }\n\n\n    class viewholderclass(itemview: View) : RecyclerView.ViewHolder(itemview) {\n\n\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 139, "user_id": 12173499, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hpkMk.png?s=128&g=1", "display_name": "August W. Gruneisen", "link": "https://stackoverflow.com/users/12173499/august-w-gruneisen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 878, "favorite_count": 0, "accepted_answer_id": 58826110, "answer_count": 2, "score": 1, "last_activity_date": 1573633909, "creation_date": 1573589384, "question_id": 58825973, "link": "https://stackoverflow.com/questions/58825973/how-can-i-have-multiple-textviews-inside-a-recyclerview-list-item", "title": "How can I have multiple TextViews inside a RecyclerView list item", "body": "<p>I know that RecyclerView lists are flexible and that it's possible to have multiple views in each item. I can't find any good example code that will help me implement this.</p>\n\n<p>I am trying to implement a simple RecyclerView list with each list item as a custom .xml layout that I have created. What must be done in for the RecyclerView.Adapter to be able to access each different view by its ID from the custom layout file and be able to update each value?</p>\n\n<p>I've basically copied the following code from <a href=\"https://developer.android.com/guide/topics/ui/layout/recyclerview#Adapter\" rel=\"nofollow noreferrer\">Android Docs</a>.</p>\n\n<p>//ScannedDevicesListAdapter.kt</p>\n\n<pre><code>import android.view.LayoutInflater\nimport android.view.ViewGroup\nimport android.widget.TextView\nimport androidx.recyclerview.widget.RecyclerView\n\nclass ScannedDevicesListAdapter(private val myDataset: Array&lt;String&gt;) :\n    RecyclerView.Adapter&lt;ScannedDevicesListAdapter.ScannedDevicesListViewHolder&gt;() {\n\n    // Provide a reference to the views for each data item\n    // Complex data items may need more than one view per item, and\n    // you provide access to all the views for a data item in a view holder.\n    // Each data item is just a string in this case that is shown in a TextView.\n    class ScannedDevicesListViewHolder(val textView: TextView) : RecyclerView.ViewHolder(textView)\n\n    // Create new views (invoked by the layout manager)\n    override fun onCreateViewHolder(parent: ViewGroup,\n                                    viewType: Int): ScannedDevicesListAdapter.ScannedDevicesListViewHolder {\n        // create a new view\n        val textView = LayoutInflater.from(parent.context)\n            .inflate(R.layout.scanned_devices_list_item, parent, false) as TextView\n        // set the view's size, margins, paddings and layout parameters\n        return ScannedDevicesListViewHolder(textView)\n    }\n\n    // Replace the contents of a view (invoked by the layout manager)\n    override fun onBindViewHolder(holder: ScannedDevicesListViewHolder, position: Int) {\n        // - get element from your dataset at this position\n        // - replace the contents of the view with that element\n        holder.textView.text = myDataset[position]\n    }\n\n    // Return the size of your dataset (invoked by the layout manager)\n    override fun getItemCount() = myDataset.size\n}\n</code></pre>\n\n<p>Here is the .xml file for my custom view:</p>\n\n<p><a href=\"https://i.stack.imgur.com/pubt0.png\" rel=\"nofollow noreferrer\">Screenshot of the custom list item</a></p>\n\n<p>//scanned_devices_list_item.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:padding=\"30dp\"&gt;\n\n    &lt;LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:layout_weight=\"1\"\n        android:orientation=\"vertical\"&gt;\n\n        &lt;TextView\n            android:id=\"@+id/TextView1\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_weight=\"1\"\n            tools:text=\"Field 1\" /&gt;\n\n        &lt;TextView\n            android:id=\"@+id/TextView2\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_weight=\"1\"\n            tools:text=\"Field 2\" /&gt;\n\n    &lt;/LinearLayout&gt;\n\n    &lt;LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:layout_weight=\"1\"\n        android:orientation=\"horizontal\"&gt;\n\n        &lt;TextView\n            android:id=\"@+id/TextView3\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_weight=\"1\"\n            tools:text=\"Field 3\" /&gt;\n    &lt;/LinearLayout&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 121, "user_id": 3154785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/665f474ca21aa11f96e1d9376c49091a?s=128&d=identicon&r=PG&f=1", "display_name": "user3154785", "link": "https://stackoverflow.com/users/3154785/user3154785"}, "edited": false, "score": 1, "creation_date": 1574208311, "post_id": 58825452, "comment_id": 104147778, "body": "Any update about this? I need help!"}, {"owner": {"reputation": 1145, "user_id": 10192418, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-arPOT1jpVcs/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pOEr5lASFQ7ti1Jd8bR7V4H7GtOw/mo/photo.jpg?sz=128", "display_name": "Ehsan Nokandi", "link": "https://stackoverflow.com/users/10192418/ehsan-nokandi"}, "reply_to_user": {"reputation": 121, "user_id": 3154785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/665f474ca21aa11f96e1d9376c49091a?s=128&d=identicon&r=PG&f=1", "display_name": "user3154785", "link": "https://stackoverflow.com/users/3154785/user3154785"}, "edited": false, "score": 0, "creation_date": 1574428990, "post_id": 58825452, "comment_id": 104240681, "body": "No. Nothing actually. @user3154785"}], "answers": [{"tags": [], "owner": {"reputation": 536, "user_id": 861744, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7f4427cb9d0fda8262b711a8fd81ed97?s=128&d=identicon&r=PG", "display_name": "Benjamin St&#252;rmer", "link": "https://stackoverflow.com/users/861744/benjamin-st%c3%bcrmer"}, "is_accepted": false, "score": 2, "last_activity_date": 1579622697, "creation_date": 1579622697, "answer_id": 59844959, "question_id": 58825452, "link": "https://stackoverflow.com/questions/58825452/android-camerax-api-brightness-issue/59844959#59844959", "title": "android cameraX API brightness issue", "body": "<p>This looks like an library issue. This was already observed on the camera 2 api.\nI opened an bug on the official bug tracker:\n<a href=\"https://issuetracker.google.com/issues/148045396\" rel=\"nofollow noreferrer\">https://issuetracker.google.com/issues/148045396</a></p>\n"}], "owner": {"reputation": 1145, "user_id": 10192418, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-arPOT1jpVcs/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pOEr5lASFQ7ti1Jd8bR7V4H7GtOw/mo/photo.jpg?sz=128", "display_name": "Ehsan Nokandi", "link": "https://stackoverflow.com/users/10192418/ehsan-nokandi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 454, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1579622697, "creation_date": 1573587021, "question_id": 58825452, "link": "https://stackoverflow.com/questions/58825452/android-camerax-api-brightness-issue", "title": "android cameraX API brightness issue", "body": "<p>I'm using CameraX Api in my app and I'm faced with a problem with \"Auto-Brightness Adjustment\". Actually, In some devices, it works well but in others, camera preview is very dark compared to the original camera.\n<a href=\"https://stackoverflow.com/questions/47196243/android-camera2-increase-brightness\">Here</a> somebody had the same issue but with Camera2 API.\nIt is worth mention that when I tested <a href=\"https://github.com/android/camera-samples\" rel=\"nofollow noreferrer\">google camera sample apps</a> (Camera2BasicJava and CameraXBasic), I figured out that they had the same problem too.\nI would be appreciated if you could help me with this.</p>\n"}, {"tags": ["android", "kotlin", "android-recyclerview", "retrofit2", "kotlin-coroutines"], "comments": [{"owner": {"reputation": 4717, "user_id": 4133301, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/yKdIm.jpg?s=128&g=1", "display_name": "GensaGames", "link": "https://stackoverflow.com/users/4133301/gensagames"}, "edited": false, "score": 0, "creation_date": 1573592226, "post_id": 58825330, "comment_id": 103929700, "body": "Check the answer below."}, {"owner": {"reputation": 44108, "user_id": 8298909, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MRxNb.jpg?s=128&g=1", "display_name": "Ben P.", "link": "https://stackoverflow.com/users/8298909/ben-p"}, "edited": false, "score": 0, "creation_date": 1573593523, "post_id": 58825330, "comment_id": 103930181, "body": "I don&#39;t see anything in the code that you posted that actually updates the <code>allBlog</code> observable in your <code>mainViewModel</code>, so probably it just never emits any values."}], "answers": [{"tags": [], "owner": {"reputation": 4717, "user_id": 4133301, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/yKdIm.jpg?s=128&g=1", "display_name": "GensaGames", "link": "https://stackoverflow.com/users/4133301/gensagames"}, "is_accepted": false, "score": 0, "last_activity_date": 1573592087, "creation_date": 1573592087, "answer_id": 58826519, "question_id": 58825330, "link": "https://stackoverflow.com/questions/58825330/blank-screen-with-recyclerview-no-adapter-attached/58826519#58826519", "title": "Blank screen with RecyclerView No adapter attached", "body": "<p>You forget to call <code>notifyDataSetChanged</code>, when you setup your <code>RecyclerView</code> widget. Below the full method call, to make it works. </p>\n\n<pre><code>private fun prepareRecyclerView(blogList: List&lt;Blog&gt;) {\n\n    mBlogAdapter = BlogAdapter(blogList)\n    if (this.resources.configuration.orientation == Configuration.ORIENTATION_PORTRAIT) {\n        blogRecyclerView.layoutManager = LinearLayoutManager(this)\n    } else {\n        blogRecyclerView.layoutManager = GridLayoutManager(this, 4)\n    }\n    blogRecyclerView.itemAnimator = DefaultItemAnimator()\n    blogRecyclerView.adapter = mBlogAdapter\n    mBlogAdapter.notifyDataSetChanged()\n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 97, "user_id": 8015850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05a9d756b8908de3ddc7e1a11da3f286?s=128&d=identicon&r=PG&f=1", "display_name": "GK007", "link": "https://stackoverflow.com/users/8015850/gk007"}, "edited": false, "score": 0, "creation_date": 1573621853, "post_id": 58826680, "comment_id": 103936991, "body": "I&#39;ve changed it as per you but same result"}, {"owner": {"reputation": 97, "user_id": 8015850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05a9d756b8908de3ddc7e1a11da3f286?s=128&d=identicon&r=PG&f=1", "display_name": "GK007", "link": "https://stackoverflow.com/users/8015850/gk007"}, "edited": false, "score": 0, "creation_date": 1573622284, "post_id": 58826680, "comment_id": 103937112, "body": "I&#39;ve attached repository class as well. am I using List&lt;ABCCharacters&gt; correctly?"}], "tags": [], "owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "is_accepted": false, "score": 0, "last_activity_date": 1573593891, "last_edit_date": 1573593891, "creation_date": 1573592925, "answer_id": 58826680, "question_id": 58825330, "link": "https://stackoverflow.com/questions/58825330/blank-screen-with-recyclerview-no-adapter-attached/58826680#58826680", "title": "Blank screen with RecyclerView No adapter attached", "body": "<p>Try using below implementation:</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\n    lateinit var mainViewModel: MainViewModel\n    var mBlogAdapter: BlogAdapter? = null\n    var blogList: List&lt;Blog&gt; = arrayListOf()\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        mainViewModel = ViewModelProvider(this).get(MainViewModel::class.java)\n\n        // init your RV here \n        prepareRecyclerView()\n        getPopularBlog()\n        swipe_refresh.setOnRefreshListener { mainViewModel.getAllBlog() }\n    }\n\n    private fun getPopularBlog() {\n        swipe_refresh.isRefreshing = false\n        mainViewModel.getAllBlog().observe(this, Observer {  charactersList -&gt;\n           blogList = charactersList\n           mBlogAdapter?.notifyDataSetChanged()\n        })\n    }\n\n    private fun prepareRecyclerView() {\n\n        mBlogAdapter = BlogAdapter(blogList)\n        if (this.resources.configuration.orientation == Configuration.ORIENTATION_PORTRAIT) {\n            blogRecyclerView.layoutManager = LinearLayoutManager(this)\n        } else {\n            blogRecyclerView.layoutManager = GridLayoutManager(this, 4)\n        }\n        blogRecyclerView.itemAnimator = DefaultItemAnimator()\n        blogRecyclerView.adapter = mBlogAdapter\n\n    }\n}\n</code></pre>\n\n<p>Modify your view model like below:</p>\n\n<pre><code>class MainViewModel() : ViewModel() {\n\n    val characterRepository= BlogRepository()\n\n    fun getAllBlog(): MutableLiveData&lt;List&lt;ABCCharacters&gt;&gt; {\n        return characterRepository.getMutableLiveData()\n    }\n\n    override fun onCleared() {\n        super.onCleared()\n        characterRepository.completableJob.cancel()\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 8015850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05a9d756b8908de3ddc7e1a11da3f286?s=128&d=identicon&r=PG&f=1", "display_name": "GK007", "link": "https://stackoverflow.com/users/8015850/gk007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1573622164, "creation_date": 1573586460, "last_edit_date": 1573622164, "question_id": 58825330, "link": "https://stackoverflow.com/questions/58825330/blank-screen-with-recyclerview-no-adapter-attached", "title": "Blank screen with RecyclerView No adapter attached", "body": "<p>I'm tying to parse JSON in recyclerview. App compiles fine but it's outputting empty/blank screen</p>\n\n<p>BlogAdapter.kt</p>\n\n<pre><code>class BlogAdapter(private val blogList: List&lt;Blog&gt;) : RecyclerView.Adapter&lt;BlogAdapter.ViewHolder&gt;() {\n\n\n    override fun getItemCount()= blogList.size\n\n    private var mContext: Context? = null\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {\n\n        this.mContext=parent.context;\n\n        return ViewHolder(\n            LayoutInflater.from(parent.context).inflate(\n                R.layout.character_item,\n                parent,\n                false\n            )\n        )\n    }\n\n    override fun onBindViewHolder(holder: ViewHolder, position: Int) {\n\n        val mBlog = this.blogList[position]\n\n        if (mBlog.img != null) {\n            Glide.with(mContext!!)\n                .load(mBlog.img)\n                .into(holder.ivThumbnail)\n        }\n        if (mBlog.name != null) {\n            holder.tvTitle.text = mBlog.name\n            println(\"Log: Kabe \"+mBlog.name)\n        }\n    }\n\n    class ViewHolder(itemView:View):RecyclerView.ViewHolder(itemView){\n        val ivThumbnail:ImageView = itemView.findViewById(R.id.ivThumbnail);\n        val tvTitle:TextView = itemView.findViewById(R.id.tvTitle);\n    }\n}\n</code></pre>\n\n<p>MainActivity.kt</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\n    var mainViewModel: MainViewModel? = null\n    var mBlogAdapter: BlogAdapter? = null\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        mainViewModel = ViewModelProvider(this).get(MainViewModel::class.java)\n        getPopularBlog()\n        swipe_refresh.setOnRefreshListener { getPopularBlog() }\n    }\n\n    private fun getPopularBlog() {\n        swipe_refresh.isRefreshing = false\n        mainViewModel!!.allBlog.observe(this, Observer {  charactersList -&gt;\n            prepareRecyclerView(charactersList)\n        })\n\n    }\n\n    private fun prepareRecyclerView(blogList: List&lt;Blog&gt;) {\n\n        mBlogAdapter = BlogAdapter(blogList)\n        if (this.resources.configuration.orientation == Configuration.ORIENTATION_PORTRAIT) {\n            blogRecyclerView.layoutManager = LinearLayoutManager(this)\n        } else {\n            blogRecyclerView.layoutManager = GridLayoutManager(this, 4)\n        }\n        blogRecyclerView.itemAnimator = DefaultItemAnimator()\n        blogRecyclerView.adapter = mBlogAdapter\n\n    }\n}\n</code></pre>\n\n<p>My Json file looks like this:</p>\n\n<pre><code>[\n  {\n    \"id\": 1,\n    \"name\": \"potter\",\n    \"img\": \"https://images.example.com/potter.jpg\"\n},\n{ \u2026}\n]\n</code></pre>\n\n<p>I've created it based on this tutorial: <a href=\"https://itnext.io/kotlin-wrapping-your-head-around-livedata-mutablelivedata-coroutine-networking-and-viewmodel-b552c3a74eec\" rel=\"nofollow noreferrer\">https://itnext.io/kotlin-wrapping-your-head-around-livedata-mutablelivedata-coroutine-networking-and-viewmodel-b552c3a74eec</a></p>\n\n<p>Any suggestions please</p>\n\n<p>EDIT:</p>\n\n<pre><code>class BlogRepository() {\n\n    private var character = mutableListOf&lt;ABCCharacters&gt;()\n    private var mutableLiveData = MutableLiveData&lt;List&lt;ABCCharacters&gt;&gt;()\n    val completableJob = Job()\n    private val coroutineScope = CoroutineScope(Dispatchers.IO + completableJob)\n\n    private val thisApiCorService by lazy {\n        RestApiService.createCorService()\n    }\n\n    fun getMutableLiveData():MutableLiveData&lt;List&lt;ABCCharacters&gt;&gt; {\n        coroutineScope.launch {\n            val request = thisApiCorService.getPopularBlog()\n            withContext(Dispatchers.Main) {\n                try {\n\n                    val response = request.await()\n                    val mBlogWrapper = response;\n                    if (/*mBlogWrapper != null &amp;&amp;*/ mBlogWrapper.isNotEmpty()) {\n                        character = mBlogWrapper as MutableList&lt;ABCCharacters&gt;\n                        mutableLiveData.value = character\n                    }\n\n                } catch (e: HttpException) {\n                    // Log exception //\n\n                } catch (e: Throwable) {\n                    // Log error //)\n                }\n            }\n        }\n        return mutableLiveData;\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "android-studio", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 292, "user_id": 10551887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dff76320f9f9a5faaac6537881c724e?s=128&d=identicon&r=PG&f=1", "display_name": "szakes1", "link": "https://stackoverflow.com/users/10551887/szakes1"}, "edited": false, "score": 0, "creation_date": 1573586481, "post_id": 58825298, "comment_id": 103927300, "body": "Well, this solves the &quot;hamburger&quot; style button, but I&#39;d like to have the whole Navigation Drawer which i don&#39;t know how to implement."}, {"owner": {"reputation": 292, "user_id": 10551887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dff76320f9f9a5faaac6537881c724e?s=128&d=identicon&r=PG&f=1", "display_name": "szakes1", "link": "https://stackoverflow.com/users/10551887/szakes1"}, "edited": false, "score": 0, "creation_date": 1573587665, "post_id": 58825298, "comment_id": 103927829, "body": "Do you know how can I implement this with my tabbed navigation?"}], "tags": [], "owner": {"reputation": 673, "user_id": 6580761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NFDjY.jpg?s=128&g=1", "display_name": "Lukas", "link": "https://stackoverflow.com/users/6580761/lukas"}, "is_accepted": false, "score": 0, "last_activity_date": 1573586875, "last_edit_date": 1573586875, "creation_date": 1573586291, "answer_id": 58825298, "question_id": 58825099, "link": "https://stackoverflow.com/questions/58825099/how-to-implement-navigation-drawer-in-my-activity/58825298#58825298", "title": "How to implement Navigation Drawer in my activity?", "body": "<p>First create a <code>toolbar_layout.xml</code> file</p>\n\n<p>As an example:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;RelativeLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\" android:layout_width=\"match_parent\"\n    android:layout_height=\"?attr/actionBarSize\"\n    android:background=\"@color/dark_gray\"&gt;\n\n&lt;ImageButton\n        android:layout_width=\"50dp\"\n        android:layout_height=\"match_parent\"\n        android:src=\"@drawable/ic_menu\"\n        android:layout_marginStart=\"10dp\"\n        android:id=\"@+id/menubutton_toolbar\"\n        android:background=\"@color/transparent\"\n        tools:ignore=\"ContentDescription\"/&gt;\n\n&lt;ImageView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:textAlignment=\"center\"\n        android:gravity=\"center\"\n        android:padding=\"14dp\"\n        android:src=\"@drawable/logo\" tools:ignore=\"ContentDescription\"/&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n\n<p>Add the lines below to your onCreate method in your activity:</p>\n\n<pre><code>    getSupportActionBar().setDisplayOptions(ActionBar.DISPLAY_SHOW_CUSTOM)\n    getSupportActionBar().setDisplayShowCustomEnabled(true)\n    getSupportActionBar().setCustomView(R.layout.toolbar_layout)\n\n    val view = getSupportActionBar().getCustomView()\n</code></pre>\n\n<p>To implement a touch listener to your toolbar you can simply call</p>\n\n<pre><code>var back = view.menubutton_toolbar as ImageButton;\nback.setOnClickListener {\n  //Open Drawer\n  drawer?.setDrawerLockMode(DrawerLayout.LOCK_MODE_UNDEFINED)\n  if(drawer?.getDrawerLockMode(Gravity.LEFT) != DrawerLayout.LOCK_MODE_LOCKED_CLOSED) {\n            drawer?.openDrawer(Gravity.LEFT)\n        }\n}\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>First of all we need a drawer layout like following:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"300dp\"\n    android:layout_height=\"match_parent\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    android:background=\"@color/white\"\n    android:orientation=\"vertical\"&gt;\n\n               &lt;TextView\n                    android:id=\"@+id/user_name_drawer\"\n                    android:layout_width=\"wrap_content\"\n                    android:layout_height=\"match_parent\"\n                    android:layout_marginTop=\"5dp\"\n                    android:layout_marginEnd=\"0dp\"\n                    android:textColor=\"@color/white\"\n                    android:textSize=\"18sp\"\n                    android:textStyle=\"bold\" /&gt;\n &lt;/LinearLayout&gt;\n</code></pre>\n\n<p>Then init the drawer in your MainActivity:</p>\n\n<pre><code>    var drawer = findViewById(R.id.drawer_layout) as DrawerLayout\n    var toggle : ActionBarDrawerToggle = ActionBarDrawerToggle(this,drawer, R.string.srn_drawer_open, R.string.srn_drawer_close)\n\n    drawer?.addDrawerListener(toggle)\n</code></pre>\n\n<p>I hope this will help you ^^</p>\n"}], "owner": {"reputation": 292, "user_id": 10551887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dff76320f9f9a5faaac6537881c724e?s=128&d=identicon&r=PG&f=1", "display_name": "szakes1", "link": "https://stackoverflow.com/users/10551887/szakes1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573586875, "creation_date": 1573585466, "question_id": 58825099, "link": "https://stackoverflow.com/questions/58825099/how-to-implement-navigation-drawer-in-my-activity", "title": "How to implement Navigation Drawer in my activity?", "body": "<p>I am writing a simple coupon application, but I am struggling to implement a navigation drawer in my activity. </p>\n\n<p>I have a toolbar with a tabbed navigation. I'd like to have a \"hamburger\" style button in my toolbar which will allow me to open my navigation drawer. I have no clue how to implement this. </p>\n\n<p>I'd be extremely happy if someone helped me!</p>\n\n<p>Photo of my layout in Android Studio:\n<img src=\"https://i.imgur.com/YQdzsEa.png\" alt=\"\"></p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout\n        xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        xmlns:tools=\"http://schemas.android.com/tools\"\n        xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        tools:context=\".activities.MainActivity\" android:orientation=\"vertical\"&gt;\n\n    &lt;androidx.appcompat.widget.Toolbar\n            android:id=\"@+id/toolbar\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:background=\"@color/colorSecondaryDark\"\n            android:minHeight=\"?attr/actionBarSize\"\n            android:theme=\"?attr/actionBarTheme\"\n            app:title=\"Makdolan Native\"\n            app:titleTextColor=\"@android:color/white\" /&gt;\n\n    &lt;com.google.android.material.tabs.TabLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\" android:id=\"@+id/tabLayout\"\n            android:background=\"@color/colorSecondaryDark\"\n            app:tabTextColor=\"@android:color/white\" app:tabIndicatorColor=\"@android:color/white\"\n            app:tabMode=\"scrollable\"/&gt;\n    &lt;androidx.viewpager.widget.ViewPager\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\" android:id=\"@+id/viewPager\"\n            android:background=\"@color/colorPrimary\"/&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n"}, {"tags": ["android", "kotlin", "nfc"], "answers": [{"tags": [], "owner": {"reputation": 3606, "user_id": 2373819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f0e9ea83d9ea1bbebd5488d1ad06f2b?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/2373819/andrew"}, "is_accepted": true, "score": 1, "last_activity_date": 1573601391, "creation_date": 1573601391, "answer_id": 58828204, "question_id": 58825020, "link": "https://stackoverflow.com/questions/58825020/kotlin-emv-android-nfc-tag-setconnectedtechnology-error/58828204#58828204", "title": "Kotlin EMV android.nfc.Tag.setConnectedTechnology Error", "body": "<p>You get this error when you call connect a second time on a <code>Tag</code> when you have not closed the first connection.</p>\n\n<p>I am not familiar with the library you are using but I read your code as <code>connect</code> in <code>onTagDiscovered</code> and then <code>connect</code> again in the Provider's <code>transceive</code> function when you first have not closed the <code>isoDep</code> Tag Technology</p>\n\n<p>The error log show <code>at com.example.projectz.OverView.getCard(OverView.kt:68)</code>\nis doing another <code>connect</code> - <code>at android.nfc.tech.IsoDep.connect(IsoDep.java)</code></p>\n"}], "owner": {"reputation": 182, "user_id": 10668506, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DEZw7K1sx8g/AAAAAAAAAAI/AAAAAAAAREw/0YMDWFHwEH0/photo.jpg?sz=128", "display_name": "L. Busekrus", "link": "https://stackoverflow.com/users/10668506/l-busekrus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "accepted_answer_id": 58828204, "answer_count": 1, "score": 1, "last_activity_date": 1573601391, "creation_date": 1573585147, "question_id": 58825020, "link": "https://stackoverflow.com/questions/58825020/kotlin-emv-android-nfc-tag-setconnectedtechnology-error", "title": "Kotlin EMV android.nfc.Tag.setConnectedTechnology Error", "body": "<p>So I have to do a presentation on EMV technology in computer science  my graduation year in high school.\nI want to give the class a real life aplication of this technology, because I have a bit of expierience in programming. I used the EMV Libary from devnied on GitHub. I got this Error from my code, I tried to look it up online but didn't really find something. I would be so thankful if somebody could help me.</p>\n\n<p><strong>Error:</strong>  </p>\n\n<pre><code>2019-11-12 19:22:55.450 8543-8556/com.example.projectz W/System.err: java.lang.IllegalStateException: Close other technology first!\n2019-11-12 19:22:55.450 8543-8556/com.example.projectz W/System.err:     at android.nfc.Tag.setConnectedTechnology(Tag.java:458)\n2019-11-12 19:22:55.450 8543-8556/com.example.projectz W/System.err:     at android.nfc.tech.BasicTagTechnology.connect(BasicTagTechnology.java:78)\n2019-11-12 19:22:55.450 8543-8556/com.example.projectz W/System.err:     at android.nfc.tech.IsoDep.connect(IsoDep.java)\n2019-11-12 19:22:55.450 8543-8556/com.example.projectz W/System.err:     at com.example.projectz.PcscProvider.transceive(PcscProvider.java:44)\n2019-11-12 19:22:55.450 8543-8556/com.example.projectz W/System.err:     at com.github.devnied.emvnfccard.parser.impl.ProviderWrapper.transceive(ProviderWrapper.java:47)\n2019-11-12 19:22:55.450 8543-8556/com.example.projectz W/System.err:     at com.github.devnied.emvnfccard.parser.EmvTemplate.selectPaymentEnvironment(EmvTemplate.java:536)\n2019-11-12 19:22:55.450 8543-8556/com.example.projectz W/System.err:     at com.github.devnied.emvnfccard.parser.EmvTemplate.readWithPSE(EmvTemplate.java:390)\n2019-11-12 19:22:55.450 8543-8556/com.example.projectz W/System.err:     at com.github.devnied.emvnfccard.parser.EmvTemplate.readEmvCard(EmvTemplate.java:359)\n2019-11-12 19:22:55.450 8543-8556/com.example.projectz W/System.err:     at com.example.projectz.OverView.getCard(OverView.kt:68)\n2019-11-12 19:22:55.450 8543-8556/com.example.projectz W/System.err:     at com.example.projectz.OverView.onTagDiscovered(OverView.kt:43)\n2019-11-12 19:22:55.450 8543-8556/com.example.projectz W/System.err:     at android.nfc.NfcActivityManager.onTagDiscovered(NfcActivityManager.java:444)\n2019-11-12 19:22:55.450 8543-8556/com.example.projectz W/System.err:     at android.nfc.IAppCallback$Stub.onTransact(IAppCallback.java:83)\n2019-11-12 19:22:55.450 8543-8556/com.example.projectz W/System.err:     at android.os.Binder.execTransact(Binder.java:570)\n</code></pre>\n\n<p>So this is my code:</p>\n\n<p><strong>MainActivity:</strong></p>\n\n<pre><code>override fun onResume() {\n        super.onResume()\n        nfcAdapter?.enableReaderMode(this, this,\n            NfcAdapter.FLAG_READER_NFC_A or\n                    NfcAdapter.FLAG_READER_SKIP_NDEF_CHECK,\n            null)\n    }\n    public override fun onPause() {\n        super.onPause()\n        nfcAdapter?.disableReaderMode(this)\n    }\n\n    override fun onTagDiscovered(tag: Tag?) {\n        isoDep = IsoDep.get(tag)\n        isoDep!!.connect()\n        getCard()\n    }\n\n\n    private fun getCard(){\n\n\n        if (isoDep != null &amp;&amp; status == \"not connected\"){\n            status = \"connected\"\n            val provider = PcscProvider()\n            provider.setmTagCom(isoDep)\n\n            val config = EmvTemplate.Config()\n                .setContactLess(true)\n                .setReadAllAids(true)\n                .setReadTransactions(true)\n                .setRemoveDefaultParsers(false)\n                .setReadAt(true)\n\n            val parser = EmvTemplate.Builder()\n                .setProvider(provider)\n                .setConfig(config)\n                .build()\n\n            val card = parser.readEmvCard()\n            Basic().Snackbar(this, card.iban.toString())\n        }else{\n           // getCard()\n        }\n\n    }\n</code></pre>\n\n<p><strong>Provider:</strong></p>\n\n<pre><code>      package com.example.projectz;\n\nimport android.nfc.tech.IsoDep;\nimport android.util.Log;\n\nimport com.github.devnied.emvnfccard.enums.SwEnum;\nimport com.github.devnied.emvnfccard.exception.CommunicationException;\nimport com.github.devnied.emvnfccard.parser.IProvider;\nimport com.github.devnied.emvnfccard.utils.TlvUtil;\n\n\nimport java.io.IOException;\nimport java.security.Provider;\n\nimport fr.devnied.bitlib.BytesUtils;\n\npublic class PcscProvider implements IProvider{\n\n\n    private static final String TAG = \"Provider\";\n\n\n    private IsoDep mTagCom;\n\n    public void setmTagCom(final IsoDep mTagCom) {\n        this.mTagCom = mTagCom;\n    }\n\n\n\n\n    @Override\n    public byte[] transceive(byte[] pCommand) throws CommunicationException {\n\n\n        byte[] response = null;\n        try {\n            // send command to emv card\n            mTagCom.getTag();\n            mTagCom.connect();\n            if (mTagCom.isConnected()){\n                response = mTagCom.transceive(pCommand);\n            }\n        } catch (IOException e) {\n            throw new CommunicationException(e.getMessage());\n        }\n\n\n        Log.d(TAG, \"resp: \" + BytesUtils.bytesToString(response));\n        try {\n            Log.d(TAG, \"resp: \" + TlvUtil.prettyPrintAPDUResponse(response));\n            SwEnum val = SwEnum.getSW(response);\n            if (val != null) {\n                Log.d(TAG, \"resp: \" + val.getDetail());\n            }\n        } catch (Exception e) {\n        }\n\n        return response;\n    }\n\n\n    @Override\n    public byte[] getAt() {\n        return new byte[0];\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "mapbox"], "answers": [{"tags": [], "owner": {"reputation": 1972, "user_id": 9494140, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-RiQCuWECqiE/AAAAAAAAAAI/AAAAAAAAEsI/GLtd18UG8w8/photo.jpg?sz=128", "display_name": "Ahmed Wagdi", "link": "https://stackoverflow.com/users/9494140/ahmed-wagdi"}, "is_accepted": true, "score": 1, "last_activity_date": 1573907588, "creation_date": 1573907588, "answer_id": 58890767, "question_id": 58824797, "link": "https://stackoverflow.com/questions/58824797/getting-my-location-latlng-from-mapbox-in-kotlin/58890767#58890767", "title": "Getting my location LatLng from Mapbox in kotlin", "body": "<p>I've found the answer, used <code>LocationComponent.LocationEngine.getLastLocation</code> callBack to get it , here is the code: </p>\n\n<pre><code>    private fun getMyLocation() {\n        mapboxMap?.locationComponent?.locationEngine?.getLastLocation(object :\n            LocationEngineCallback&lt;LocationEngineResult&gt; {\n            override fun onSuccess(result: LocationEngineResult?) {\n                if (result != null) {\n                    myCurrentLocation =\n                        LatLng(result.locations[0].latitude, result.locations[0].longitude)\n                    println(\"my location is : $myCurrentLocation\")\n                    getTheRoute(myCurrentLocation)\n                }\n            }\n\n            override fun onFailure(exception: Exception) {\n                toast(getString(R.string.failed_get_location))\n            }\n\n        })\n    }\n</code></pre>\n"}], "owner": {"reputation": 1972, "user_id": 9494140, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-RiQCuWECqiE/AAAAAAAAAAI/AAAAAAAAEsI/GLtd18UG8w8/photo.jpg?sz=128", "display_name": "Ahmed Wagdi", "link": "https://stackoverflow.com/users/9494140/ahmed-wagdi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 58890767, "answer_count": 1, "score": 0, "last_activity_date": 1573907588, "creation_date": 1573584092, "question_id": 58824797, "link": "https://stackoverflow.com/questions/58824797/getting-my-location-latlng-from-mapbox-in-kotlin", "title": "Getting my location LatLng from Mapbox in kotlin", "body": "<p>I'm trying to get my location using <code>mapbox</code> on an android application built with kotlin. I'm using the <code>locationComponent</code> method to get it, here is my code : </p>\n\n<pre><code>class PlaceholderFragment : Fragment(), OnMapReadyCallback, PermissionsListener {\n    private var permissionsManager: PermissionsManager = PermissionsManager(this)\n    private var mapboxMap: MapboxMap? = null\n    private var myCurrentLocation: LatLng? = null\n    var navigationMapRoute: NavigationMapRoute? = null\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        pageViewModel = ViewModelProviders.of(this).get(PageViewModel::class.java).apply {\n            setIndex(arguments?.getInt(ARG_SECTION_NUMBER) ?: 1)\n        }\n        val theActivity = activity as NavigationActivity?\n        theSteps = theActivity?.theSteps\n        case = theActivity?.case\n        case = theActivity.case\n    }\n\n    override fun onCreateView(\n        inflater: LayoutInflater, container: ViewGroup?,\n        savedInstanceState: Bundle?\n    ): View? {\n        activity?.let {\n            Mapbox.getInstance(\n                it,\n                getString(com.innoventiq.arkbeh.R.string.mapbox_access_token2)\n            )\n        }\n        val root =\n            inflater.inflate(com.innoventiq.arkbeh.R.layout.fragment_navigation, container, false)\n        return root\n    }\n\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n        super.onViewCreated(view, savedInstanceState)\n        mapView.onCreate(savedInstanceState)\n        mapView.getMapAsync(this)\n        getMyLocation()\n    }\n\n    override fun onExplanationNeeded(permissionsToExplain: MutableList&lt;String&gt;?) {\n        Toast.makeText(\n            activity,\n            com.innoventiq.arkbeh.R.string.user_location_permission_explanation,\n            Toast.LENGTH_LONG\n        )\n            .show()\n    }\n\n    override fun onPermissionResult(granted: Boolean) {\n        if (granted) {\n            enableLocationComponent(mapboxMap?.style!!)\n        } else {\n            Toast.makeText(\n                activity,\n                com.innoventiq.arkbeh.R.string.user_location_permission_not_granted,\n                Toast.LENGTH_LONG\n            )\n                .show()\n        }\n    }\n    override fun onMapReady(mapboxMap: MapboxMap) {\n        this.mapboxMap = mapboxMap\n\n        mapboxMap.cameraPosition = CameraPosition.Builder()\n            .target(myCurrentLocation)\n            .zoom(14.0)\n            .build()\n        //mapView.setOnTouchListener { v, event -&gt; true }\n        mapboxMap.setStyle(Style.OUTDOORS) {\n            enableLocationComponent(it)\n\n        }\n\n    }\n\n    @SuppressLint(\"MissingPermission\")\n    private fun enableLocationComponent(loadedMapStyle: Style) {\n        // Check if permissions are enabled and if not request\n        if (PermissionsManager.areLocationPermissionsGranted(activity)) {\n\n\n            // Create and customize the LocationComponent's options\n            val customLocationComponentOptions = activity?.let {\n                LocationComponentOptions.builder(it)\n                    .trackingGesturesManagement(true)\n                    .accuracyColor(\n                        ContextCompat.getColor(\n                            activity!!,\n                            com.innoventiq.arkbeh.R.color.colorGreen\n                        )\n                    )\n                    .build()\n\n            }\n\n            val locationComponentActivationOptions =\n                activity?.let {\n                    LocationComponentActivationOptions.builder(it, loadedMapStyle)\n                        .locationComponentOptions(customLocationComponentOptions)\n                        .build()\n                }\n\n\n            // Get an instance of the LocationComponent and then adjust its settings\n            mapboxMap?.locationComponent?.apply {\n\n                // Activate the LocationComponent with options\n                locationComponentActivationOptions?.let {\n                    this?.activateLocationComponent(\n                        it\n                    )\n                }\n\n                // Enable to make the LocationComponent visible\n                isLocationComponentEnabled = true\n\n\n                // Set the LocationComponent's camera mode\n                cameraMode = CameraMode.TRACKING\n\n                // Set the LocationComponent's render mode\n                renderMode = RenderMode.COMPASS\n\n            }\n        } else {\n            permissionsManager = PermissionsManager(this)\n            permissionsManager.requestLocationPermissions(activity)\n        }\n\n\n    }\n\n    private fun getMyLocation() {\n        myCurrentLocation =\n            mapboxMap?.locationComponent?.lastKnownLocation?.latitude?.let {\n                mapboxMap!!.locationComponent.lastKnownLocation?.longitude?.let { it1 -&gt;\n                    LatLng(it,\n                        it1\n                    )\n                }\n            }\n        println(\"the location : $myCurrentLocation \")\n    }\n\n    override fun onStart() {\n        super.onStart()\n        mapView.onStart()\n    }\n\n    override fun onResume() {\n        super.onResume()\n        mapView.onResume()\n    }\n\n    override fun onPause() {\n        super.onPause()\n        mapView.onPause()\n    }\n\n    override fun onStop() {\n        super.onStop()\n        mapView.onStop()\n    }\n\n    override fun onSaveInstanceState(outState: Bundle) {\n        super.onSaveInstanceState(outState)\n        mapView.onSaveInstanceState(outState)\n    }\n\n    override fun onDestroy() {\n        super.onDestroy()\n        mapView.onDestroy()\n    }\n\n    override fun onLowMemory() {\n        super.onLowMemory()\n        mapView.onLowMemory()\n    }\n\n    companion object {\n        /**\n         * The fragment argument representing the section number for this\n         * fragment.\n         */\n        private const val ARG_SECTION_NUMBER = \"section_number\"\n\n        /**\n         * Returns a new instance of this fragment for the given section\n         * number.\n         */\n        @JvmStatic\n        fun newInstance(sectionNumber: Int): PlaceholderFragment {\n            return PlaceholderFragment().apply {\n                arguments = Bundle().apply {\n                    putInt(ARG_SECTION_NUMBER, sectionNumber)\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>I used almost the full fragment code just trying to give you a clear view of the steps I've used to get the location.  When it comes to the line <code>println(\"the location : $myCurrentLocation \")</code> \ninside the <code>getMyLocation()</code> function , it returns this output <code>the location : null</code> ,, any help on this ?</p>\n\n<p><strong>Note</strong></p>\n\n<p>When the map loads, it shows my location perfectly and tracks it, but I just can't get the <code>LatLng</code> of it.</p>\n"}, {"tags": ["android", "kotlin", "jsoup"], "answers": [{"tags": [], "owner": {"reputation": 26172, "user_id": 49746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IAAg.jpg?s=128&g=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/49746/todd"}, "is_accepted": true, "score": 0, "last_activity_date": 1573588841, "creation_date": 1573588841, "answer_id": 58825864, "question_id": 58824732, "link": "https://stackoverflow.com/questions/58824732/kotlin-get-the-data-inside-a-center-with-jsoup/58825864#58825864", "title": "Kotlin: get the data inside a &lt;center&gt; with Jsoup", "body": "<p>If you want to extract the text before the <code>&lt;br&gt;</code>, you can split it:</p>\n\n<pre><code>val date = th.select(\"center\").html().split(\"&lt;br&gt;\").first()\n</code></pre>\n\n<p>This grabs the entire <code>&lt;center&gt;</code> tag, gets the html representation, splits it using <code>&lt;br&gt;</code> as a delimiter, and then gets the <code>first()</code> value (the left hand side).</p>\n"}], "owner": {"reputation": 105, "user_id": 11628536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f498bc3e1eefccff5db040d6cde0e1f?s=128&d=identicon&r=PG&f=1", "display_name": "luchito", "link": "https://stackoverflow.com/users/11628536/luchito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 58825864, "answer_count": 1, "score": -1, "last_activity_date": 1573588841, "creation_date": 1573583864, "question_id": 58824732, "link": "https://stackoverflow.com/questions/58824732/kotlin-get-the-data-inside-a-center-with-jsoup", "title": "Kotlin: get the data inside a &lt;center&gt; with Jsoup", "body": "<p>i have this HTML</p>\n\n<pre><code>&lt;table class=\"table\"&gt;\n\n       &lt;tr &gt;\n         &lt;th colspan=\"3\" &gt;&lt;center&gt;2019-01-01&lt;br&gt;Some Text  &lt;/center&gt;&lt;/th&gt;\n       &lt;/tr&gt;\n</code></pre>\n\n<p>i need get <strong>2019-01-01</strong>, i try this in Kotlin:</p>\n\n<pre><code>var table = doc.select(\"table.table\")[1]\n            var rows = table.select(\"tr\")\n            for (row in rows) {\n                val th = row.select(\"th\")\n                if (th.attr(\"colspan\")==\"3\"){\n                    val date= th.select(\"center\")\n                }\n</code></pre>\n\n<p>but this get all the data, how can i just extract what's inside the <code>&lt;center&gt;</code> and before <code>&lt;br&gt;</code></p>\n"}, {"tags": ["java", "android", "kotlin", "android-productflavors", "android-build-type"], "comments": [{"owner": {"reputation": 941, "user_id": 5251245, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/drtAI.jpg?s=128&g=1", "display_name": "Jameido", "link": "https://stackoverflow.com/users/5251245/jameido"}, "edited": false, "score": 0, "creation_date": 1573581821, "post_id": 58823587, "comment_id": 103925317, "body": "I suggest you to take a look at <a href=\"https://developer.android.com/studio/build/manifest-build-variables\" rel=\"nofollow noreferrer\">developer.android.com/studio/build/manifest-build-variables</a>"}, {"owner": {"reputation": 908, "user_id": 8740243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9ae629e737d133b9fe4c6ad702d3832?s=128&d=identicon&r=PG&f=1", "display_name": "Ankit Dubariya", "link": "https://stackoverflow.com/users/8740243/ankit-dubariya"}, "reply_to_user": {"reputation": 941, "user_id": 5251245, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/drtAI.jpg?s=128&g=1", "display_name": "Jameido", "link": "https://stackoverflow.com/users/5251245/jameido"}, "edited": false, "score": 0, "creation_date": 1573622530, "post_id": 58823587, "comment_id": 103937178, "body": "Thank you @Jameido, But i don&#39;t find out my solutions."}], "answers": [{"comments": [{"owner": {"reputation": 908, "user_id": 8740243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9ae629e737d133b9fe4c6ad702d3832?s=128&d=identicon&r=PG&f=1", "display_name": "Ankit Dubariya", "link": "https://stackoverflow.com/users/8740243/ankit-dubariya"}, "edited": false, "score": 0, "creation_date": 1573635807, "post_id": 58833084, "comment_id": 103942279, "body": "No no, you are not understand my question, i am saying that, i have two different app (different source code) that already published on PlayStore, and now that have lot of bug (same bug in both source code), so for resolve i required to solve bug in both source code and that wast of timing so i want to merge both source code and then want bug solving in it, now my question is if i am merge both code and creating both signed APK and upload it on PlayStore with new version of APK then it is possible ? or it will give me any error ?"}, {"owner": {"reputation": 908, "user_id": 8740243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9ae629e737d133b9fe4c6ad702d3832?s=128&d=identicon&r=PG&f=1", "display_name": "Ankit Dubariya", "link": "https://stackoverflow.com/users/8740243/ankit-dubariya"}, "edited": false, "score": 0, "creation_date": 1573648136, "post_id": 58833084, "comment_id": 103948640, "body": "Thank you @Jameido, i will try your answer."}], "tags": [], "owner": {"reputation": 941, "user_id": 5251245, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/drtAI.jpg?s=128&g=1", "display_name": "Jameido", "link": "https://stackoverflow.com/users/5251245/jameido"}, "is_accepted": true, "score": 1, "last_activity_date": 1573639705, "last_edit_date": 1573639705, "creation_date": 1573633980, "answer_id": 58833084, "question_id": 58823587, "link": "https://stackoverflow.com/questions/58823587/can-we-merge-two-android-source-and-use-product-flavors/58833084#58833084", "title": "Can we merge two android source and use product flavors?", "body": "<p>What you are looking for has been answered <a href=\"https://stackoverflow.com/a/22876224/5251245\">here</a>, basically what you need to do is to create a folder structure that mirrors the main->res->mipmap structure replacing main with your flavour name like this:</p>\n\n<pre><code>-src\n  -main\n    -res\n  -app_one\n    -res\n      -mimap-*\n        -ic_launcher.png\n  -app_two\n    -res\n      -mimap-*\n        -ic_launcher.png\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>After merging the source code of the 2 projects you need to create 2 different product flavours in your gradle configuration and use the manifest placeholders for things like the app name and package:</p>\n\n<pre><code>productFlavors {\n        app_one {\n            applicationId \"xxx.yyy.zzz\"\n        }\n        app_two {\n            applicationId \"aaa.bbb.ccc\"\n        }\n    }\n</code></pre>\n\n<p>And in your manifest:</p>\n\n<pre><code>&lt;manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    package=\"${applicationId}\"&gt;\n</code></pre>\n\n<p>If the code content is the same you shouldn't have any issue, just select the right buildVariant and keystore when preparing the release apk.</p>\n"}], "owner": {"reputation": 908, "user_id": 8740243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9ae629e737d133b9fe4c6ad702d3832?s=128&d=identicon&r=PG&f=1", "display_name": "Ankit Dubariya", "link": "https://stackoverflow.com/users/8740243/ankit-dubariya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 58833084, "answer_count": 1, "score": 0, "last_activity_date": 1573639705, "creation_date": 1573578961, "question_id": 58823587, "link": "https://stackoverflow.com/questions/58823587/can-we-merge-two-android-source-and-use-product-flavors", "title": "Can we merge two android source and use product flavors?", "body": "<p>I have two android project with <strong>same source code</strong> only <strong>app icon change</strong> in both app. But i don't have use product flavor. now i need to <strong>merge source code</strong> and use <strong>product flavor</strong>. so it is possible?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 2167, "user_id": 10992886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75ea364872e8995970feec09206d2d39?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan", "link": "https://stackoverflow.com/users/10992886/jordan"}, "edited": false, "score": 0, "creation_date": 1573578900, "post_id": 58823433, "comment_id": 103923965, "body": "<i>&quot;I need to pass String as null for the argument loginHint to signIn Java method.&quot;</i> Why is that a requirement?  Can you not just pass in an empty String, instead?"}, {"owner": {"reputation": 1, "user_id": 12362267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22a24c94f2db4477979f8445ed575096?s=128&d=identicon&r=PG&f=1", "display_name": "thedu_girl", "link": "https://stackoverflow.com/users/12362267/thedu-girl"}, "reply_to_user": {"reputation": 2167, "user_id": 10992886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75ea364872e8995970feec09206d2d39?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan", "link": "https://stackoverflow.com/users/10992886/jordan"}, "edited": false, "score": 0, "creation_date": 1573578955, "post_id": 58823433, "comment_id": 103923985, "body": "@Jordan The compiler wont allow to pass null as you are saying"}, {"owner": {"reputation": 1157, "user_id": 4615411, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10203968548633918/picture?type=large", "display_name": "Giora Guttsait", "link": "https://stackoverflow.com/users/4615411/giora-guttsait"}, "edited": false, "score": 0, "creation_date": 1573578972, "post_id": 58823433, "comment_id": 103923991, "body": "Would you have passed a <code>null</code> in your java code? Would it have acted differently if you passed <code>null</code> in the java code?"}, {"owner": {"reputation": 977, "user_id": 8101634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2071bbc2522f51e59d4a184bedea0ba1?s=128&d=identicon&r=PG&f=1", "display_name": "primo", "link": "https://stackoverflow.com/users/8101634/primo"}, "edited": false, "score": 0, "creation_date": 1573579058, "post_id": 58823433, "comment_id": 103924039, "body": "I think you have explicitly specified the String argument to be notnull. So it will not allow you to pass empty string."}, {"owner": {"reputation": 1157, "user_id": 4615411, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10203968548633918/picture?type=large", "display_name": "Giora Guttsait", "link": "https://stackoverflow.com/users/4615411/giora-guttsait"}, "edited": false, "score": 0, "creation_date": 1573579341, "post_id": 58823433, "comment_id": 103924171, "body": "@thedu_girl can you show the stack trace you get when you get a NPE?"}, {"owner": {"reputation": 1, "user_id": 12362267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22a24c94f2db4477979f8445ed575096?s=128&d=identicon&r=PG&f=1", "display_name": "thedu_girl", "link": "https://stackoverflow.com/users/12362267/thedu-girl"}, "reply_to_user": {"reputation": 1157, "user_id": 4615411, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10203968548633918/picture?type=large", "display_name": "Giora Guttsait", "link": "https://stackoverflow.com/users/4615411/giora-guttsait"}, "edited": false, "score": 0, "creation_date": 1573579542, "post_id": 58823433, "comment_id": 103924283, "body": "@Giora Guttsait you are supposed to add !! in the suffix of an object only when you are sure its not null. So directly adding !! to null is a suicide mission."}, {"owner": {"reputation": 2167, "user_id": 10992886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75ea364872e8995970feec09206d2d39?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan", "link": "https://stackoverflow.com/users/10992886/jordan"}, "edited": false, "score": 0, "creation_date": 1573580354, "post_id": 58823433, "comment_id": 103924665, "body": "@thedu_girl I&#39;m still not sure why you need to be able to pass a null to that method.  Can you not just pass in an empty String if there&#39;s no login hint?"}, {"owner": {"reputation": 1, "user_id": 12362267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22a24c94f2db4477979f8445ed575096?s=128&d=identicon&r=PG&f=1", "display_name": "thedu_girl", "link": "https://stackoverflow.com/users/12362267/thedu-girl"}, "edited": false, "score": 0, "creation_date": 1573580670, "post_id": 58823433, "comment_id": 103924810, "body": "I was referring to sample code(Java) and they are passing null. Moreover I want to know out of curiosity of such a situation where passing empty string is not an option."}, {"owner": {"reputation": 1157, "user_id": 4615411, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10203968548633918/picture?type=large", "display_name": "Giora Guttsait", "link": "https://stackoverflow.com/users/4615411/giora-guttsait"}, "edited": false, "score": 0, "creation_date": 1573584378, "post_id": 58823433, "comment_id": 103926432, "body": "@thedu_girl this is why I was asking about the stacktrace. I know Kotlin at times places non-null assertions at certain places, and it may be the case here. If we see the stack trace, we can identify where the NPE is thrown."}], "answers": [{"tags": [], "owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "is_accepted": false, "score": 0, "last_activity_date": 1573590202, "creation_date": 1573590202, "answer_id": 58826135, "question_id": 58823433, "link": "https://stackoverflow.com/questions/58823433/how-to-pass-null-from-kotlin-code-to-a-method-taking-string-as-argument-in-java/58826135#58826135", "title": "How to pass null from Kotlin code to a method taking String as argument in Java library?", "body": "<p>If the signature weren't marked with <code>@NonNull</code>, you could pass <code>null as String?</code> as a parameter to help the compiler find the right method overload. </p>\n\n<p>But since it's marked <code>@NonNull</code>, the API of this library is saying it is not designed to accept a null parameter. <a href=\"https://kotlinlang.org/docs/reference/java-interop.html#nullability-annotations\" rel=\"nofollow noreferrer\">The Kotlin compiler respects many common Java nullability annotations</a>, so it prevents you from even compiling this.</p>\n\n<p>Without looking at its docs, I'd guess you should just pass an empty string <code>\"\"</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": false, "score": 0, "last_activity_date": 1573611098, "creation_date": 1573611098, "answer_id": 58829337, "question_id": 58823433, "link": "https://stackoverflow.com/questions/58823433/how-to-pass-null-from-kotlin-code-to-a-method-taking-string-as-argument-in-java/58829337#58829337", "title": "How to pass null from Kotlin code to a method taking String as argument in Java library?", "body": "<p>It looks like the problem is in the Java declaration: <a href=\"https://github.com/AzureAD/microsoft-authentication-library-for-android/blob/a7b4a07074aef16b1fe36192ae1997203b37b9b3/msal/src/main/java/com/microsoft/identity/client/ISingleAccountPublicClientApplication.java#L66-L86\" rel=\"nofollow noreferrer\">https://github.com/AzureAD/microsoft-authentication-library-for-android/blob/a7b4a07074aef16b1fe36192ae1997203b37b9b3/msal/src/main/java/com/microsoft/identity/client/ISingleAccountPublicClientApplication.java#L66-L86</a></p>\n\n<p>While <code>loginHint</code> is described as being optional, it is marked as <code>@NonNull</code> in the parameter list, so Kotlin respects this annotation and thinks <code>null</code> is not allowed here. </p>\n\n<p>The best way to deal with it is to file an issue about the incorrect nullability to the library authors (<a href=\"https://github.com/AzureAD/microsoft-authentication-library-for-android/issues\" rel=\"nofollow noreferrer\">https://github.com/AzureAD/microsoft-authentication-library-for-android/issues</a>), but to work around it for now you can declare a static helper function in java with the right nullability information:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// here I'm using org.jetbrains.annotations to declare the right nullability:\nimport org.jetbrains.annotations.NotNull;\nimport org.jetbrains.annotations.Nullable;\n\n// A java helper class\nclass SingleAccountPublicClientApplicationUtils {\n    static void signIn(@NotNull final ISingleAccountPublicClientApplication application,\n                       @NotNull final Activity activity,\n                       @Nullable final String loginHint,\n                       @NotNull final String[] scopes,\n                       @NotNull final AuthenticationCallback callback) {\n        // just call application.signIn, java doesn't care about nullability annotations\n        application.signIn(activity, loginHint, scopes, callback);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12362267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22a24c94f2db4477979f8445ed575096?s=128&d=identicon&r=PG&f=1", "display_name": "thedu_girl", "link": "https://stackoverflow.com/users/12362267/thedu-girl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 472, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1573611098, "creation_date": 1573578354, "last_edit_date": 1573579123, "question_id": 58823433, "link": "https://stackoverflow.com/questions/58823433/how-to-pass-null-from-kotlin-code-to-a-method-taking-string-as-argument-in-java", "title": "How to pass null from Kotlin code to a method taking String as argument in Java library?", "body": "<p>I am using microsoft auth (MSAL) SDK in my android app.The SDK is in Java but my app is in Kotlin. I need to pass String as null for the argument loginHint to signIn Java method.\nExample in my Kotlin code:-</p>\n\n<pre><code>mSingleAccountApp?.signIn(this@MainActivity, null!!, getScopes(), getAuthInteractiveCallback())\n</code></pre>\n\n<p>I tried converting the code by pasting into android studio but it converted null to null!! which will give instant NPE.\nMethod signature in Java library:-</p>\n\n<pre><code>void signIn(@NonNull final Activity activity,\n                @NonNull final String loginHint,\n                @NonNull final String[] scopes,\n                @NonNull final AuthenticationCallback callback);\n</code></pre>\n"}, {"tags": ["android", "kotlin", "jsoup"], "answers": [{"tags": [], "owner": {"reputation": 4717, "user_id": 4133301, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/yKdIm.jpg?s=128&g=1", "display_name": "GensaGames", "link": "https://stackoverflow.com/users/4133301/gensagames"}, "is_accepted": false, "score": 0, "last_activity_date": 1573578058, "creation_date": 1573578058, "answer_id": 58823362, "question_id": 58823272, "link": "https://stackoverflow.com/questions/58823272/kotlin-count-the-elements-inside-a-tr-jsoup/58823362#58823362", "title": "Kotlin: count the elements inside a &lt;tr&gt; Jsoup", "body": "<pre><code>val source = \"&lt;td colspan='2' align=\"right\"&gt;UNTIL HERE&lt;/td&gt;\"\nval text = source.substring(\n     source.indexOf(\"&gt;\"),\n     source.indexOf(\"&lt;/\")\n)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1157, "user_id": 4615411, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10203968548633918/picture?type=large", "display_name": "Giora Guttsait", "link": "https://stackoverflow.com/users/4615411/giora-guttsait"}, "reply_to_user": {"reputation": 105, "user_id": 11628536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f498bc3e1eefccff5db040d6cde0e1f?s=128&d=identicon&r=PG&f=1", "display_name": "luchito", "link": "https://stackoverflow.com/users/11628536/luchito"}, "edited": false, "score": 0, "creation_date": 1573578841, "post_id": 58823480, "comment_id": 103923931, "body": "No problem \ud83d\udc4d\ud83c\udffb Don&#39;t forget to format your code \ud83d\ude01"}], "tags": [], "owner": {"reputation": 1157, "user_id": 4615411, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10203968548633918/picture?type=large", "display_name": "Giora Guttsait", "link": "https://stackoverflow.com/users/4615411/giora-guttsait"}, "is_accepted": true, "score": 1, "last_activity_date": 1573578578, "creation_date": 1573578578, "answer_id": 58823480, "question_id": 58823272, "link": "https://stackoverflow.com/questions/58823272/kotlin-count-the-elements-inside-a-tr-jsoup/58823480#58823480", "title": "Kotlin: count the elements inside a &lt;tr&gt; Jsoup", "body": "<p>Haven't used the jsoup library, but from what I understand, what you need is:</p>\n\n<pre><code>doc = connect(\"https://www.somepage.com\").get()\nval table = doc.select(\"table.table\")[1]\n// this gives you all the rows, so you iterate over them\nval rows = table.select(\"tr\")\nfor (row : rows) {\n    val cols = row.select(\"td\")\n    if (cols.length === 3) {\n        continue;\n    }\n    // here the row doesn't have 3 columns\n}\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 11628536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f498bc3e1eefccff5db040d6cde0e1f?s=128&d=identicon&r=PG&f=1", "display_name": "luchito", "link": "https://stackoverflow.com/users/11628536/luchito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 58823480, "answer_count": 2, "score": 0, "last_activity_date": 1573578578, "creation_date": 1573577712, "question_id": 58823272, "link": "https://stackoverflow.com/questions/58823272/kotlin-count-the-elements-inside-a-tr-jsoup", "title": "Kotlin: count the elements inside a &lt;tr&gt; Jsoup", "body": "<p>i have this table in HTML:</p>\n\n<pre><code>         &lt;table class=\"table\"&gt;\n         &lt;tr&gt;\n            &lt;td class=\"alignLeft\"&gt;XXX&lt;/td&gt;\n            &lt;td align=\"right\"&gt;XXX&lt;/td&gt;\n            &lt;td align=\"right\"&gt;XXX&lt;/td&gt;\n         &lt;/tr&gt;\n         &lt;tr&gt;\n            &lt;td class=\"alignLeft\"&gt;XXX&lt;/td&gt;\n            &lt;td align=\"right\"&gt;XXX&lt;/td&gt;\n            &lt;td align=\"right\"&gt;XXX&lt;/td&gt;\n         &lt;/tr&gt;\n         &lt;tr&gt;\n            &lt;td colspan='2' align=\"right\"&gt;UNTIL HERE&lt;/td&gt;\n            &lt;td align=\"right\" &gt;XXX&lt;/td&gt;\n         &lt;/tr&gt;\n&lt;td colspan='3' align='center' valign='middle'&gt;\n    &lt;table width='90%' border='0' cellspacing=\"0\" cellpadding=\"0\"&gt;\n        &lt;form name='something'&gt;\n        &lt;tr&gt;\n        &lt;td align='center'&gt;\n            &lt;select  name=\"somethingElse\" size=\"1\" class=\"select\" onChange=\"document.getElementById('script').innerHTML=this.value;\"&gt;\n                &lt;option label=\"\" value=\"000\" SELECTED&gt;&lt;/option&gt;\n                &lt;option value=\"2019\"&gt;2019&lt;/option&gt;\n\n</code></pre>\n\n<p>i need get the <strong>td</strong> values only when the <strong>tr</strong> have three <strong>td</strong>\nthis is what I have in kotlin:</p>\n\n<pre><code> doc = connect(\"https://www.somepage.com\").get()\n        val table = doc.select(\"table.table\")[1]\n        val rows = table.select(\"tr\")\n        val tds = rows.select(\"td\")\n        for (td in tds) {\n             println(td.text())\n        }\n</code></pre>\n\n<p>how can i break the for when when I got:</p>\n\n<pre><code>&lt;td colspan='2' align=\"right\"&gt;UNTIL HERE&lt;/td&gt;\n</code></pre>\n"}, {"tags": ["android", "gradle", "kotlin", "android-room", "kapt"], "comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1573577372, "post_id": 58822538, "comment_id": 103923195, "body": "Have you tried using the JDK embedded with Android Studio?"}, {"owner": {"reputation": 350, "user_id": 1305867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a2f942944be6ca802e85afc8ccfd31a?s=128&d=identicon&r=PG", "display_name": "DanyBoricua", "link": "https://stackoverflow.com/users/1305867/danyboricua"}, "edited": false, "score": 0, "creation_date": 1573582520, "post_id": 58822538, "comment_id": 103925605, "body": "If you are running <code>gradlew assemble -scan</code> from the command line make sure your <code>JAVA_HOME</code> environment variable also points to the same JDK11 you setup in Android Studio."}, {"owner": {"reputation": 5887, "user_id": 1720329, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/MbNQe.jpg?s=128&g=1", "display_name": "Bogdan Zurac", "link": "https://stackoverflow.com/users/1720329/bogdan-zurac"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1573628086, "post_id": 58822538, "comment_id": 103938782, "body": "@EpicPandaForce yes, same problem.  Dany, I couldn&#39;t even set up JDK 11 in AS, it didn&#39;t let me choose the JDK 11 folder location in the Project Structure window."}], "answers": [{"comments": [{"owner": {"reputation": 5887, "user_id": 1720329, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/MbNQe.jpg?s=128&g=1", "display_name": "Bogdan Zurac", "link": "https://stackoverflow.com/users/1720329/bogdan-zurac"}, "edited": false, "score": 2, "creation_date": 1573632771, "post_id": 58832272, "comment_id": 103940806, "body": "I&#39;m already using the embedded SDK, but that&#39;s Java 8. So it doesn&#39;t help."}, {"owner": {"reputation": 436, "user_id": 4108976, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/werHH.jpg?s=128&g=1", "display_name": "Doni", "link": "https://stackoverflow.com/users/4108976/doni"}, "reply_to_user": {"reputation": 5887, "user_id": 1720329, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/MbNQe.jpg?s=128&g=1", "display_name": "Bogdan Zurac", "link": "https://stackoverflow.com/users/1720329/bogdan-zurac"}, "edited": false, "score": 0, "creation_date": 1573721491, "post_id": 58832272, "comment_id": 103977647, "body": "i think yours <code>1.8.0_201-b0</code> , it should not beta version there, mine are 202"}, {"owner": {"reputation": 5887, "user_id": 1720329, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/MbNQe.jpg?s=128&g=1", "display_name": "Bogdan Zurac", "link": "https://stackoverflow.com/users/1720329/bogdan-zurac"}, "edited": false, "score": 0, "creation_date": 1573746066, "post_id": 58832272, "comment_id": 103992032, "body": "So I don&#39;t understand, are you encountering the error I mentioned in the question or not?"}, {"owner": {"reputation": 436, "user_id": 4108976, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/werHH.jpg?s=128&g=1", "display_name": "Doni", "link": "https://stackoverflow.com/users/4108976/doni"}, "reply_to_user": {"reputation": 5887, "user_id": 1720329, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/MbNQe.jpg?s=128&g=1", "display_name": "Bogdan Zurac", "link": "https://stackoverflow.com/users/1720329/bogdan-zurac"}, "edited": false, "score": 0, "creation_date": 1573834834, "post_id": 58832272, "comment_id": 104029103, "body": "yes i was got this when using JDK 231 downloaded from oracle web. Then able to solve this by switching back to JDK from android studio. Are you running this from terminal or press play on Android Studio ? Mine looks like this JetBrains s.r.o OpenJDK Runtime Environment 1.8.0_202-release-1483-b49-5587405"}, {"owner": {"reputation": 436, "user_id": 4108976, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/werHH.jpg?s=128&g=1", "display_name": "Doni", "link": "https://stackoverflow.com/users/4108976/doni"}, "reply_to_user": {"reputation": 5887, "user_id": 1720329, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/MbNQe.jpg?s=128&g=1", "display_name": "Bogdan Zurac", "link": "https://stackoverflow.com/users/1720329/bogdan-zurac"}, "edited": false, "score": 0, "creation_date": 1573835285, "post_id": 58832272, "comment_id": 104029349, "body": "This one is working: <a href=\"https://scans.gradle.com/s/qhvdmbsh5b2h6#infrastructure\" rel=\"nofollow noreferrer\">scans.gradle.com/s/qhvdmbsh5b2h6#infrastructure</a>  But using this one not working: <a href=\"https://scans.gradle.com/s/uqatyhc5f7lpu#infrastructure\" rel=\"nofollow noreferrer\">scans.gradle.com/s/uqatyhc5f7lpu#infrastructure</a>"}, {"owner": {"reputation": 5887, "user_id": 1720329, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/MbNQe.jpg?s=128&g=1", "display_name": "Bogdan Zurac", "link": "https://stackoverflow.com/users/1720329/bogdan-zurac"}, "edited": false, "score": 0, "creation_date": 1574169083, "post_id": 58832272, "comment_id": 104128588, "body": "The embedded JDK from AS seems to work indeed, even when specifying it as $JAVA_HOME in any terminal. Reset it to default in AS and now it seems to work. Guess something was messed up in AS for whatever reason.. Good. But we still have a problem in case we want to build our app from the CI. We would need to have the embedded SDK from AS up on the CI in order to fix this, which is really bad. This should work with any JDK version, not a IDE specific one..."}, {"owner": {"reputation": 436, "user_id": 4108976, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/werHH.jpg?s=128&g=1", "display_name": "Doni", "link": "https://stackoverflow.com/users/4108976/doni"}, "reply_to_user": {"reputation": 5887, "user_id": 1720329, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/MbNQe.jpg?s=128&g=1", "display_name": "Bogdan Zurac", "link": "https://stackoverflow.com/users/1720329/bogdan-zurac"}, "edited": false, "score": 0, "creation_date": 1574174300, "post_id": 58832272, "comment_id": 104131665, "body": "Yes something wrong there :/ . In most cases CI build won&#39;t have any benefit from incremental build. We disable incremental compilation and daemon on CI because in general CI will wipe out everything on each build. We only utilise remote cache for faster CI build."}, {"owner": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "edited": false, "score": 1, "creation_date": 1599554629, "post_id": 58832272, "comment_id": 112801788, "body": "See <a href=\"https://stackoverflow.com/questions/47728646/how-to-find-out-the-embedded-jdk-version-of-android-studio/47728957\" title=\"how to find out the embedded jdk version of android studio\">stackoverflow.com/questions/47728646/&hellip;</a> for Embedded JDK path. (C:\\Program Files\\Android\\Android Studio\\jre)"}], "tags": [], "owner": {"reputation": 436, "user_id": 4108976, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/werHH.jpg?s=128&g=1", "display_name": "Doni", "link": "https://stackoverflow.com/users/4108976/doni"}, "is_accepted": true, "score": 8, "last_activity_date": 1573630367, "creation_date": 1573630367, "answer_id": 58832272, "question_id": 58822538, "link": "https://stackoverflow.com/questions/58822538/current-jdk-version-1-8-has-a-bug-that-prevents-room-from-being-incremental/58832272#58832272", "title": "Current JDK version 1.8 has a bug that prevents Room from being incremental", "body": "<p>you will need to using JDK embedded with AS to solve this. make sure to use AS 3.5 above.\nOn project structure -> SDK location\nmake sure jdk is pointed to jdk shipped with AS.\n/Applications/Android Studio.app/Contents/jre/jdk/Contents/Home\nThen you will need to restart your AS.</p>\n\n<p>If you running from terminal make sure $JAVA_HOME contains correct path.</p>\n\n<p>I guess Android studio not supporting JDK 11 yet. I also  tried to use latest JDK 8 (231, which AS 3.5  using 202) but it causing this issue. </p>\n"}, {"tags": [], "owner": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "is_accepted": false, "score": 2, "last_activity_date": 1599555009, "last_edit_date": 1599555009, "creation_date": 1597678780, "answer_id": 63454139, "question_id": 58822538, "link": "https://stackoverflow.com/questions/58822538/current-jdk-version-1-8-has-a-bug-that-prevents-room-from-being-incremental/63454139#63454139", "title": "Current JDK version 1.8 has a bug that prevents Room from being incremental", "body": "<p>When compiling, it showed me a warning:</p>\n<blockquote>\n<p>Current JDK version has a bug (<a href=\"https://bugs.openjdk.java.net/browse/JDK-8007720\" rel=\"nofollow noreferrer\">https://bugs.openjdk.java.net/browse/JDK-8007720</a>) that prevents Room from being incremental. Consider using JDK 11+ or the embedded JDK shipped with Android Studio 3.5+.Note: <a href=\"https://i.stack.imgur.com/PqQQA.png\" rel=\"nofollow noreferrer\">1</a> Wrote GeneratedAppGlideModule with: [][WARN] Incremental annotation processing requested, but support is disabled because the following processors are not incremental: androidx.room.RoomProcessor (DYNAMIC).</p>\n</blockquote>\n<p>Then I downloaded JDK 8 (8u261) from the Oracle site (it requies registration, so look for a direct link).</p>\n<p>Installed it, changed <code>JAVA_HOME</code> system variable to a new path:</p>\n<p><a href=\"https://i.stack.imgur.com/PqQQA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PqQQA.png\" alt=\"enter image description here\" /></a></p>\n<p>Then recompiled the app. Even restart wasn't required.</p>\n<p>UPDATE</p>\n<p>After a month I again saw the same warning. Then read the accepted answer and <a href=\"https://stackoverflow.com/questions/47728646/how-to-find-out-the-embedded-jdk-version-of-android-studio/47728957\">found</a> Java embedded with Android Studio: C:\\Program Files\\Android\\Android Studio\\jre.</p>\n<p><code>File &gt; Project Structure...</code>, then <code>SDK Location</code>, and in the field <code>JDK location</code> wrote that path. Restarted AS.</p>\n"}, {"tags": [], "owner": {"reputation": 206, "user_id": 5595713, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-s9uJ0xrHNb8/AAAAAAAAAAI/AAAAAAAADeY/rPMMQ0yPUrI/photo.jpg?sz=128", "display_name": "kollesnica power", "link": "https://stackoverflow.com/users/5595713/kollesnica-power"}, "is_accepted": false, "score": 0, "last_activity_date": 1599593762, "creation_date": 1599593762, "answer_id": 63800512, "question_id": 58822538, "link": "https://stackoverflow.com/questions/58822538/current-jdk-version-1-8-has-a-bug-that-prevents-room-from-being-incremental/63800512#63800512", "title": "Current JDK version 1.8 has a bug that prevents Room from being incremental", "body": "<p>Setting <code>$JAVA_HOME</code> to <code>/Applications/AndroidStudio.app/Contents/jre/jdk/Contents/Home</code> for my shell helped me.</p>\n"}], "owner": {"reputation": 5887, "user_id": 1720329, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/MbNQe.jpg?s=128&g=1", "display_name": "Bogdan Zurac", "link": "https://stackoverflow.com/users/1720329/bogdan-zurac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2736, "favorite_count": 1, "accepted_answer_id": 58832272, "answer_count": 3, "score": 14, "last_activity_date": 1599593762, "creation_date": 1573575017, "last_edit_date": 1573633729, "question_id": 58822538, "link": "https://stackoverflow.com/questions/58822538/current-jdk-version-1-8-has-a-bug-that-prevents-room-from-being-incremental", "title": "Current JDK version 1.8 has a bug that prevents Room from being incremental", "body": "<p>We're trying to improve the build times of our multi-module Android app and we've reached the point where we tried to enable incremental KAPT annotation processing compilation.</p>\n\n<ul>\n<li><strong>Android Studio version:</strong> v3.5.2</li>\n<li><strong>Room version:</strong> v2.2.1</li>\n<li><strong>Gradle version:</strong> v5.4.6</li>\n<li><strong>Android Gradle Plugin version:</strong> v3.5.2</li>\n<li><strong>Kotlin version:</strong> v1.3.50</li>\n</ul>\n\n<p><strong>gradle.properties:</strong></p>\n\n<pre><code>org.gradle.daemon=true\norg.gradle.caching=true\norg.gradle.parallel=true\n\nkapt.incremental.apt=true\nkapt.use.worker.api=true\nkapt.include.compile.classpath=false\n\nandroid.databinding.incremental=true\n</code></pre>\n\n<p><strong>build.gradle (inside each module that uses Room):</strong></p>\n\n<pre><code>kapt {\n    arguments {\n        arg(\"room.incremental\", \"true\")\n    }\n}\n</code></pre>\n\n<p>However, while trying to benchmark the build times using <code>gradlew assemble -scan</code> command, Gradle throws the following error:</p>\n\n<pre><code>warning: Current JDK version 1.8.0_201-b09 has a bug (https://bugs.openjdk.java.net/browse/JDK-8007720) that prevents Room from being incremental. Consider using JDK 11+ or the embedded JDK shipped with Android Studio 3.5+.\nANTLR Tool version 4.5.3 used for code generation does not match the current runtime version 4.7.1\n[WARN] Incremental annotation processing requested, but support is disabled because the following processors are not incremental: androidx.room.RoomProcessor (DYNAMIC).\n</code></pre>\n\n<p>I've tried to set Open JDK 11 as the default JDK for the project in the Project Structure window, but it didn't work, it complained about it not being JDK 8. Any ideas what's wrong with this setup?</p>\n"}, {"tags": ["javascript", "gradle", "kotlin", "frontend"], "owner": {"reputation": 21, "user_id": 12361981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bdbaf747339050b3824f1557a2b32ed?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Rusch", "link": "https://stackoverflow.com/users/12361981/bill-rusch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1573574401, "creation_date": 1573574401, "question_id": 58822351, "link": "https://stackoverflow.com/questions/58822351/cannot-add-configure-the-kotlin-frontend-processresources-conflict", "title": "Cannot add/configure the kotlin frontend processResources conflict", "body": "<p>Im using kotlin with gradle to build a javascript front end and am getting the following exception:</p>\n\n<p>An exception occurred applying plugin request [id: 'org.jetbrains.kotlin.frontend', artifact: 'org.jetbrains.kotlin:kotlin-frontend-plugin:0.0.45']</p>\n\n<blockquote>\n  <p>Failed to apply plugin [id 'org.gradle.java']\n  Cannot add task 'processResources' as a task with that name already exists.</p>\n</blockquote>\n\n<p>here is my gradle.build.kts:</p>\n\n<pre><code>buildscript {\n    repositories {\n        jcenter()\n        mavenCentral()\n    }\n}\n\nplugins{\n    kotlin(\"js\")\n    kotlin(\"frontend\")\n    id(\"kotlin-dce-js\")\n}\n\ntasks.compileKotlinJs {\n    kotlinOptions.metaInfo = true\n    kotlinOptions.outputFile = \"$project.buildDir.path/js/${project.name}.js\"\n    kotlinOptions.sourceMap = true\n    kotlinOptions.moduleKind = \"umd\"\n    kotlinOptions.main = \"call\"\n}\n\nkotlinFrontend {\n    npm {\n        dependency (\"style-loader\") // production dependency\n        devDependency (\"karma\")     // development dependency\n    }\n}\n</code></pre>\n\n<p>Any help would be appreciated</p>\n"}, {"tags": ["gradle", "kotlin", "gradle-kotlin-dsl"], "owner": {"reputation": 459, "user_id": 1823476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d73cbbfd5b03884ffa9b83035cc0cd80?s=128&d=identicon&r=PG", "display_name": "chrset", "link": "https://stackoverflow.com/users/1823476/chrset"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 431, "favorite_count": 0, "answer_count": 0, "score": 5, "last_activity_date": 1573717543, "creation_date": 1573569604, "last_edit_date": 1573717543, "question_id": 58820891, "link": "https://stackoverflow.com/questions/58820891/how-to-define-gradle-project-properties-with-kotlin-dsl", "title": "How to define Gradle project properties with Kotlin DSL", "body": "<p>I'd like to check if two project properties are set and if not, set them to empty values in order to avoid a build failure. These properties are supposed come from <code>~/.gradle/gradle.properties</code> (if configured).</p>\n\n<p>The goal is to have credentials to a Maven repository in S3 defined in that local file. Every user has to put his own data there, but I want the build to just output a warning and continue if these are not set. Chances are high it will still be successful even without contacting S3.</p>\n\n<p>I have got it running with Groovy DSL, but I am now switching to Kotlin and I just can't get the syntax right.</p>\n\n<p>This is how <code>~/.gradle/gradle.properties</code> looks like:</p>\n\n<pre><code>s3AccessKeyId=ABCDEFGHIJKLMNOPQRST\ns3SecretKey=abcdefghijklmnopqrstuvwxyz1234567890abcd\n</code></pre>\n\n<p>And here are the relevant sections of the <code>build.gradle.kts</code></p>\n\n<pre><code>if (!project.hasProperty(\"s3AccessKeyId\") || !project.hasProperty(\"s3SecretKey\")) {\n    logger.lifecycle(\"WARNING: s3AccessKeyId and s3SecretKey not set!\")\n    project.extra[\"s3AccessKeyId\"] = \"\"\n    project.extra[\"s3SecretKey\"] = \"\"\n}\n\nrepositories {\n    mavenLocal()\n    maven {\n        url = uri(\"s3://maven-repo.mycompany.com.s3.eu-central-1.amazonaws.com/\")\n        credentials(AwsCredentials::class) {\n            accessKey = project.extra[\"s3AccessKeyId\"].toString()\n            secretKey = project.extra[\"s3SecretKey\"].toString()\n        }\n    }\n}\n</code></pre>\n\n<p>No matter how I write the <em>s3AccessKeyId=\"\"</em> lines, I am always getting the error:</p>\n\n<blockquote>\n  <p>Cannot get property 's3AccessKeyId' on extra properties extension as it does not exist</p>\n</blockquote>\n\n<p>If all artifacts are found in the local Maven repository, I expect the build to work, even without <code>gradle.properties</code>. Only if some artifact is missing, the build should abort with some \"credentials wrong\" error.</p>\n\n<p>As I said, it already worked with Groovy.</p>\n"}, {"tags": ["kotlin", "moshi"], "answers": [{"comments": [{"owner": {"reputation": 35330, "user_id": 322642, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0030846647f93ba6bf0938a199688c2e?s=128&d=identicon&r=PG", "display_name": "ligi", "link": "https://stackoverflow.com/users/322642/ligi"}, "edited": false, "score": 0, "creation_date": 1573594268, "post_id": 58822822, "comment_id": 103930461, "body": "thanks - but this a) produces the same error and b) is not what I want - I want to be able to omit the field in the json"}], "tags": [], "owner": {"reputation": 10859, "user_id": 3710865, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oROuW.jpg?s=128&g=1", "display_name": "sasikumar", "link": "https://stackoverflow.com/users/3710865/sasikumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1573576643, "last_edit_date": 1573576643, "creation_date": 1573576050, "answer_id": 58822822, "question_id": 58820520, "link": "https://stackoverflow.com/questions/58820520/moshi-nullable-list-fails-with-required-value/58822822#58822822", "title": "moshi nullable list fails with &quot;required value&quot;", "body": "<p>If the bar json value is null means it should be like this</p>\n\n<p><strong>json</strong></p>\n\n<pre><code>{\n\"bar\": null\n}\n</code></pre>\n\n<p>so it should be</p>\n\n<pre><code>adapter.fromJson(\"{\"bar\":null}\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 35330, "user_id": 322642, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0030846647f93ba6bf0938a199688c2e?s=128&d=identicon&r=PG", "display_name": "ligi", "link": "https://stackoverflow.com/users/322642/ligi"}, "is_accepted": true, "score": 2, "last_activity_date": 1573643413, "creation_date": 1573643413, "answer_id": 58835829, "question_id": 58820520, "link": "https://stackoverflow.com/questions/58820520/moshi-nullable-list-fails-with-required-value/58835829#58835829", "title": "moshi nullable list fails with &quot;required value&quot;", "body": "<p>The problem was actually this bug in moshi:</p>\n\n<p><a href=\"https://github.com/square/moshi/issues/990\" rel=\"nofollow noreferrer\">https://github.com/square/moshi/issues/990</a></p>\n\n<p>hat tip @cketti for pointing me to the issue.</p>\n"}], "owner": {"reputation": 35330, "user_id": 322642, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0030846647f93ba6bf0938a199688c2e?s=128&d=identicon&r=PG", "display_name": "ligi", "link": "https://stackoverflow.com/users/322642/ligi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3651, "favorite_count": 0, "accepted_answer_id": 58835829, "answer_count": 2, "score": 1, "last_activity_date": 1573643413, "creation_date": 1573568378, "question_id": 58820520, "link": "https://stackoverflow.com/questions/58820520/moshi-nullable-list-fails-with-required-value", "title": "moshi nullable list fails with &quot;required value&quot;", "body": "<p>The following works:</p>\n\n<pre><code>package com.squareup.moshi.problem\n\nimport com.squareup.moshi.JsonClass\nimport com.squareup.moshi.Moshi\n\n@JsonClass(generateAdapter = true)\ndata class Foo(\n        val bar: String?\n)\n\nfun main() {\n    val adapter=Moshi.Builder().build().adapter&lt;Foo&gt;(Foo::class.java)\n    adapter.fromJson(\"{}\")\n}\n</code></pre>\n\n<p>but when using a list it fails:</p>\n\n<pre><code>package com.squareup.moshi.problem\n\nimport com.squareup.moshi.JsonClass\nimport com.squareup.moshi.Moshi\n\n@JsonClass(generateAdapter = true)\ndata class Foo(\n        val bar: List&lt;String&gt;?\n)\n\nfun main() {\n    val adapter=Moshi.Builder().build().adapter&lt;Foo&gt;(Foo::class.java)\n    adapter.fromJson(\"{}\")\n}\n</code></pre>\n\n<p>with:</p>\n\n<pre><code>Exception in thread \"main\" com.squareup.moshi.JsonDataException: Required value 'bar' missing at $\n        at com.squareup.moshi.internal.Util.missingProperty(Util.java:605)\n        at com.squareup.moshi.problem.FooJsonAdapter.fromJson(FooJsonAdapter.kt:44)\n        at com.squareup.moshi.problem.FooJsonAdapter.fromJson(FooJsonAdapter.kt:16)\n        at com.squareup.moshi.internal.NullSafeJsonAdapter.fromJson(NullSafeJsonAdapter.java:40)\n        at com.squareup.moshi.JsonAdapter.fromJson(JsonAdapter.java:43)\n        at com.squareup.moshi.problem.MoshiProblemKt.main(MoshiProblem.kt:13)\n        at com.squareup.moshi.problem.MoshiProblemKt.main(MoshiProblem.kt)\n</code></pre>\n\n<p>How can I make it work for a list?\nHere is a repo showing the problem: <a href=\"https://github.com/ligi/moshi_problem\" rel=\"nofollow noreferrer\">https://github.com/ligi/moshi_problem</a></p>\n"}, {"tags": ["java", "kotlin", "binding", "jsr223", "scriptengine"], "comments": [{"owner": {"reputation": 1088, "user_id": 5828464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b1f08833e98bfef2561871551b57da4?s=128&d=identicon&r=PG&f=1", "display_name": "Yuri G", "link": "https://stackoverflow.com/users/5828464/yuri-g"}, "edited": false, "score": 0, "creation_date": 1573590843, "post_id": 58820509, "comment_id": 103929140, "body": "Just out of curiosity: why would you need to rope Kotlin or Scala there?"}, {"owner": {"reputation": 46525, "user_id": 7294900, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Pdqi4.gif?s=128&g=1", "display_name": "user7294900", "link": "https://stackoverflow.com/users/7294900/user7294900"}, "reply_to_user": {"reputation": 1088, "user_id": 5828464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b1f08833e98bfef2561871551b57da4?s=128&d=identicon&r=PG&f=1", "display_name": "Yuri G", "link": "https://stackoverflow.com/users/5828464/yuri-g"}, "edited": false, "score": 0, "creation_date": 1573627465, "post_id": 58820509, "comment_id": 103938541, "body": "@YuriG kotlin/scala is options to use &quot;advanced java features&quot; without upgrading java 8, also JMeter developers start using kotlin"}, {"owner": {"reputation": 1088, "user_id": 5828464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b1f08833e98bfef2561871551b57da4?s=128&d=identicon&r=PG&f=1", "display_name": "Yuri G", "link": "https://stackoverflow.com/users/5828464/yuri-g"}, "edited": false, "score": 1, "creation_date": 1573657238, "post_id": 58820509, "comment_id": 103953908, "body": "To me, Groovy feels more than enough (yes, BeanShell was ugly): fast, have all that modern bells &amp; whistles + learning curve barely exists (for ones with Java knowledge). Absolutely unnecessary activity is what you&#39;re doing. Sorry for being that straightforward, but what you said didn&#39;t convince me."}], "answers": [{"tags": [], "owner": {"reputation": 46525, "user_id": 7294900, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Pdqi4.gif?s=128&g=1", "display_name": "user7294900", "link": "https://stackoverflow.com/users/7294900/user7294900"}, "is_accepted": true, "score": 0, "last_activity_date": 1574856774, "last_edit_date": 1592644375, "creation_date": 1574856774, "answer_id": 59069986, "question_id": 58820509, "link": "https://stackoverflow.com/questions/58820509/failed-bind-parameters-using-jsr223-with-kotlin/59069986#59069986", "title": "Failed bind parameters using JSR223 with Kotlin", "body": "<p>Open an issue <a href=\"https://youtrack.jetbrains.com/issue/KT-35113\" rel=\"nofollow noreferrer\">KT-35113  Failed bind parameters using JSR223 with Kotlin</a></p>\n"}], "owner": {"reputation": 46525, "user_id": 7294900, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Pdqi4.gif?s=128&g=1", "display_name": "user7294900", "link": "https://stackoverflow.com/users/7294900/user7294900"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 280, "favorite_count": 0, "accepted_answer_id": 59069986, "answer_count": 1, "score": 1, "last_activity_date": 1574920685, "creation_date": 1573568316, "last_edit_date": 1574920685, "question_id": 58820509, "link": "https://stackoverflow.com/questions/58820509/failed-bind-parameters-using-jsr223-with-kotlin", "title": "Failed bind parameters using JSR223 with Kotlin", "body": "<p>Added Kotlin JSR223 support to JMeter and execute script using Kotlin language</p>\n\n<p>It ignores JMeter bindings parameters, as String type <code>Parameters</code>, Tried:</p>\n\n<pre><code>println(Parameters)\n</code></pre>\n\n<p>Receive unresolved error:</p>\n\n<pre><code>javax.script.ScriptException: Error: Unresolved reference: Parameters\n    at org.jetbrains.kotlin.cli.common.repl.KotlinJsr223JvmScriptEngineBase.compile(KotlinJsr223JvmScriptEngineBase.kt:74) ~[kotlin-compiler.jar:1.3.50-release-112]\n    at org.jetbrains.kotlin.cli.common.repl.KotlinJsr223JvmScriptEngineBase.compile(KotlinJsr223JvmScriptEngineBase.kt:35) ~[kotlin-compiler.jar:1.3.50-release-112]\n    at org.apache.jmeter.util.JSR223TestElement.processFileOrScript(JSR223TestElement.java:217) ~[ApacheJMeter_core.jar:5.1.1 r1855137]\n    at org.apache.jmeter.protocol.java.sampler.JSR223Sampler.sample(JSR223Sampler.java:71) [ApacheJMeter_java.jar:5.1.1 r1855137]\n    at org.apache.jmeter.threads.JMeterThread.doSampling(JMeterThread.java:622) [ApacheJMeter_core.jar:5.1.1 r1855137]\n    at org.apache.jmeter.threads.JMeterThread.executeSamplePackage(JMeterThread.java:546) [ApacheJMeter_core.jar:5.1.1 r1855137]\n    at org.apache.jmeter.threads.JMeterThread.processSampler(JMeterThread.java:486) [ApacheJMeter_core.jar:5.1.1 r1855137]\n    at org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:253) [ApacheJMeter_core.jar:5.1.1 r1855137]\n    at java.lang.Thread.run(Unknown Source) [?:1.8.0_191]\n</code></pre>\n\n<p>I tried using <code>$</code>:</p>\n\n<pre><code>println($Parameters)\n</code></pre>\n\n<p>Ambiguity error </p>\n\n<pre><code>2019-11-11 08:56:21,803 ERROR o.a.j.p.j.s.JSR223Sampler: Problem in JSR223 script JSR223 Sampler, message: javax.script.ScriptException: Error: Overload resolution ambiguity: \n@InlineOnly public inline fun println(message: Any?): Unit defined in kotlin.io\n@InlineOnly public inline fun println(message: Boolean): Unit defined in kotlin.io\n@InlineOnly public inline fun println(message: Byte): Unit defined in kotlin.io\n@InlineOnly public inline fun println(message: Char): Unit defined in kotlin.io\n@InlineOnly public inline fun println(message: CharArray): Unit defined in kotlin.io\n@InlineOnly public inline fun println(message: Double): Unit defined in kotlin.io\n@InlineOnly public inline fun println(message: Float): Unit defined in kotlin.io\n@InlineOnly public inline fun println(message: Int): Unit defined in kotlin.io\n@InlineOnly public inline fun println(message: Long): Unit defined in kotlin.io\n@InlineOnly public inline fun println(message: Short): Unit defined in kotlin.io\njavax.script.ScriptException: Error: Overload resolution ambiguity: \n@InlineOnly public inline fun println(message: Any?): Unit defined in kotlin.io\n@InlineOnly public inline fun println(message: Boolean): Unit defined in kotlin.io\n@InlineOnly public inline fun println(message: Byte): Unit defined in kotlin.io\n@InlineOnly public inline fun println(message: Char): Unit defined in kotlin.io\n@InlineOnly public inline fun println(message: CharArray): Unit defined in kotlin.io\n@InlineOnly public inline fun println(message: Double): Unit defined in kotlin.io\n@InlineOnly public inline fun println(message: Float): Unit defined in kotlin.io\n@InlineOnly public inline fun println(message: Int): Unit defined in kotlin.io\n@InlineOnly public inline fun println(message: Long): Unit defined in kotlin.io\n@InlineOnly public inline fun println(message: Short): Unit defined in kotlin.io\n    at org.jetbrains.kotlin.cli.common.repl.KotlinJsr223JvmScriptEngineBase.compile(KotlinJsr223JvmScriptEngineBase.kt:74) ~[kotlin-compiler.jar:1.3.50-release-112]\n    at org.jetbrains.kotlin.cli.common.repl.KotlinJsr223JvmScriptEngineBase.compile(KotlinJsr223JvmScriptEngineBase.kt:35) ~[kotlin-compiler.jar:1.3.50-release-112]\n    at org.apache.jmeter.util.JSR223TestElement.processFileOrScript(JSR223TestElement.java:217) ~[ApacheJMeter_core.jar:5.1.1 r1855137]\n    at org.apache.jmeter.protocol.java.sampler.JSR223Sampler.sample(JSR223Sampler.java:71) [ApacheJMeter_java.jar:5.1.1 r1855137]\n    at org.apache.jmeter.threads.JMeterThread.doSampling(JMeterThread.java:622) [ApacheJMeter_core.jar:5.1.1 r1855137]\n    at org.apache.jmeter.threads.JMeterThread.executeSamplePackage(JMeterThread.java:546) [ApacheJMeter_core.jar:5.1.1 r1855137]\n    at org.apache.jmeter.threads.JMeterThread.processSampler(JMeterThread.java:486) [ApacheJMeter_core.jar:5.1.1 r1855137]\n    at org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:253) [ApacheJMeter_core.jar:5.1.1 r1855137]\n    at java.lang.Thread.run(Unknown Source) [?:1.8.0_191]\n</code></pre>\n\n<p>It failed also using [bindings][1] as</p>\n\n<blockquote>\n<pre><code> println(bindings[\"ctx\"])\n</code></pre>\n</blockquote>\n\n<p>Similar error:</p>\n\n<pre><code> javax.script.ScriptException: Error: Unresolved reference: bindings\n</code></pre>\n\n<p>I tried also adding <a href=\"https://github.com/Kotlin/KEEP/blob/master/proposals/scripting-support.md\" rel=\"nofollow noreferrer\">importAllBindings</a>, but with same results</p>\n\n<blockquote>\n<pre><code>importAllBindings(true)\n</code></pre>\n</blockquote>\n\n<p>JMeter's <a href=\"https://github.com/apache/jmeter/blob/fe92fb1b46097a3585d756f9867b768440e4b53c/src/core/src/main/java/org/apache/jmeter/util/JSR223TestElement.java#L132\" rel=\"nofollow noreferrer\">bindings</a> code:</p>\n\n<blockquote>\n<pre><code> Bindings bindings = engine.createBindings();\n bindings.put(\"Parameters\", scriptParameters); \n ...\n CompiledScript compiledScript = compiledScriptsCache.get(newCacheKey);\n ...  \n compiledScript.eval(bindings)\n</code></pre>\n</blockquote>\n\n<p>If not using compiled script, error is similar </p>\n\n<pre><code>javax.script.ScriptException: Unresolved reference: Parameters\n    at org.jetbrains.kotlin.cli.common.repl.KotlinJsr223JvmScriptEngineBase.asJsr223EvalResult(KotlinJsr223JvmScriptEngineBase.kt:104) ~[kotlin-compiler-embeddable-1.3.50.jar:1.3.50-release-112 (1.3.50)]\n    at org.jetbrains.kotlin.cli.common.repl.KotlinJsr223JvmScriptEngineBase.compileAndEval(KotlinJsr223JvmScriptEngineBase.kt:63) ~[kotlin-compiler-embeddable-1.3.50.jar:1.3.50-release-112 (1.3.50)]\n    at kotlin.script.experimental.jvmhost.jsr223.KotlinJsr223ScriptEngineImpl.compileAndEval(KotlinJsr223ScriptEngineImpl.kt:82) ~[kotlin-main-kts.jar:1.3.50-release-112]\n    at org.jetbrains.kotlin.cli.common.repl.KotlinJsr223JvmScriptEngineBase.eval(KotlinJsr223JvmScriptEngineBase.kt:31) ~[kotlin-compiler-embeddable-1.3.50.jar:1.3.50-release-112 (1.3.50)]\n    at javax.script.AbstractScriptEngine.eval(Unknown Source) ~[?:1.8.0_191]\n    at org.apache.jmeter.util.JSR223TestElement.processFileOrScript(JSR223TestElement.java:225) ~[ApacheJMeter_core.jar:5.1.1 r1855137]\n</code></pre>\n\n<p>There's similar <a href=\"https://github.com/scala/bug/issues/11691\" rel=\"nofollow noreferrer\">issue</a> when using Scala with JSR223 </p>\n\n<blockquote>\n  <p>bindings parameters can't be used when using Scala engine (in other engines as beanshell,groovy,velocity,... it works)</p>\n</blockquote>\n"}, {"tags": ["java", "python-3.x", "kotlin"], "comments": [{"owner": {"reputation": 28506, "user_id": 9223839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29dcd6d8b4c4a0720ee253013c91d3ab?s=128&d=identicon&r=PG&f=1", "display_name": "Joakim Danielson", "link": "https://stackoverflow.com/users/9223839/joakim-danielson"}, "edited": false, "score": 2, "creation_date": 1573568575, "post_id": 58820410, "comment_id": 103918249, "body": "Here is a question on how to count the items in a list, <a href=\"https://stackoverflow.com/questions/505928/how-to-count-the-number-of-occurrences-of-an-element-in-a-list\" title=\"how to count the number of occurrences of an element in a list\">stackoverflow.com/questions/505928/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 511, "user_id": 2564032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ncQ0v.jpg?s=128&g=1", "display_name": "Vasif", "link": "https://stackoverflow.com/users/2564032/vasif"}, "reply_to_user": {"reputation": 15519, "user_id": 15472, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/9b4128da626e5b0049cd4fb88033e3b3?s=128&d=identicon&r=PG", "display_name": "tucuxi", "link": "https://stackoverflow.com/users/15472/tucuxi"}, "edited": false, "score": 0, "creation_date": 1573573532, "post_id": 58821262, "comment_id": 103921061, "body": "Oh yeah, I thought only 5 times repeated words required. Changed code to support it"}, {"owner": {"reputation": 511, "user_id": 2564032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ncQ0v.jpg?s=128&g=1", "display_name": "Vasif", "link": "https://stackoverflow.com/users/2564032/vasif"}, "reply_to_user": {"reputation": 15519, "user_id": 15472, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/9b4128da626e5b0049cd4fb88033e3b3?s=128&d=identicon&r=PG", "display_name": "tucuxi", "link": "https://stackoverflow.com/users/15472/tucuxi"}, "edited": false, "score": 0, "creation_date": 1573576595, "post_id": 58821262, "comment_id": 103922807, "body": "It returns max frequent words count"}, {"owner": {"reputation": 511, "user_id": 2564032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ncQ0v.jpg?s=128&g=1", "display_name": "Vasif", "link": "https://stackoverflow.com/users/2564032/vasif"}, "reply_to_user": {"reputation": 15519, "user_id": 15472, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/9b4128da626e5b0049cd4fb88033e3b3?s=128&d=identicon&r=PG", "display_name": "tucuxi", "link": "https://stackoverflow.com/users/15472/tucuxi"}, "edited": false, "score": 0, "creation_date": 1573648379, "post_id": 58821262, "comment_id": 103948778, "body": "@tucuxi, made necessary changes"}], "tags": [], "owner": {"reputation": 511, "user_id": 2564032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ncQ0v.jpg?s=128&g=1", "display_name": "Vasif", "link": "https://stackoverflow.com/users/2564032/vasif"}, "is_accepted": false, "score": 0, "last_activity_date": 1573648355, "last_edit_date": 1573648355, "creation_date": 1573570782, "answer_id": 58821262, "question_id": 58820410, "link": "https://stackoverflow.com/questions/58820410/how-to-get-5-most-repeated-element-in-a-map/58821262#58821262", "title": "how to get 5 most repeated element in a map?", "body": "<p>Try it as following:</p>\n\n<pre><code>        Map&lt;String, Integer&gt; words = new HashMap&lt;&gt;();\n\n        try (BufferedReader br = new BufferedReader(new FileReader(\"data.txt \"))) {\n            String line;\n            while ((line = br.readLine()) != null) {\n                String string[] = line.toLowerCase().split(\"([,.\\\\s]+) \");\n                //Adding all words generated in previous step into words\n                for (String s : string) {\n                    words.compute(s, (word, count) -&gt; {\n                        if (count == null)\n                            return 1;\n                        return count + 1;\n                    });\n                }\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n\n        final int TOP = 5;\n        final List&lt;Integer&gt; topCounts = words.values().stream()\n                .sorted(Comparator.reverseOrder())\n                .limit(TOP)\n                .collect(Collectors.toList());\n\n        final String[] topWords = new String[TOP];\n        words.forEach((word, count) -&gt; {\n            int indexOfWord = topCounts.indexOf(count);\n            if (indexOfWord &gt; -1) {\n                topWords[indexOfWord] = word;\n                topCounts.set(indexOfWord, -1);\n            }\n        });\n\n        System.out.println(\"Top 5 most repeated words: \" + Arrays.toString(topWords));\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 511, "user_id": 2564032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ncQ0v.jpg?s=128&g=1", "display_name": "Vasif", "link": "https://stackoverflow.com/users/2564032/vasif"}, "edited": false, "score": 0, "creation_date": 1573573806, "post_id": 58821722, "comment_id": 103921186, "body": "This code will not compile, arrays doesn&#39;t have method like <code>keySet</code>"}, {"owner": {"reputation": 115, "user_id": 12361373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66d1fd069c5fd823b9b211e88dc896de?s=128&d=identicon&r=PG&f=1", "display_name": "Levi007", "link": "https://stackoverflow.com/users/12361373/levi007"}, "edited": false, "score": 1, "creation_date": 1573573931, "post_id": 58821722, "comment_id": 103921265, "body": "what java version do you use?  coutnts[b] doesn&#39;t work."}, {"owner": {"reputation": 15519, "user_id": 15472, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/9b4128da626e5b0049cd4fb88033e3b3?s=128&d=identicon&r=PG", "display_name": "tucuxi", "link": "https://stackoverflow.com/users/15472/tucuxi"}, "edited": false, "score": 0, "creation_date": 1573575445, "post_id": 58821722, "comment_id": 103922132, "body": "fixed bad syntax. Should have been <code>get(b)</code> and <code>get(a)</code>. Got confused with C++ while programming directly into the answer."}, {"owner": {"reputation": 511, "user_id": 2564032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ncQ0v.jpg?s=128&g=1", "display_name": "Vasif", "link": "https://stackoverflow.com/users/2564032/vasif"}, "edited": false, "score": 0, "creation_date": 1573636994, "post_id": 58821722, "comment_id": 103942871, "body": "Explained 17 hours ago"}, {"owner": {"reputation": 15519, "user_id": 15472, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/9b4128da626e5b0049cd4fb88033e3b3?s=128&d=identicon&r=PG", "display_name": "tucuxi", "link": "https://stackoverflow.com/users/15472/tucuxi"}, "reply_to_user": {"reputation": 511, "user_id": 2564032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ncQ0v.jpg?s=128&g=1", "display_name": "Vasif", "link": "https://stackoverflow.com/users/2564032/vasif"}, "edited": false, "score": 0, "creation_date": 1573642030, "post_id": 58821722, "comment_id": 103945619, "body": "@Vasif if you downvote based on program errors, you should reverse the downvote once they are solved. I solved mine 18 hours ago (proof: <a href=\"https://ideone.com/2mO88L\" rel=\"nofollow noreferrer\">ideone.com/2mO88L</a>). Yours still does not show &quot;top 5&#183;."}], "tags": [], "owner": {"reputation": 15519, "user_id": 15472, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/9b4128da626e5b0049cd4fb88033e3b3?s=128&d=identicon&r=PG", "display_name": "tucuxi", "link": "https://stackoverflow.com/users/15472/tucuxi"}, "is_accepted": false, "score": 0, "last_activity_date": 1573575401, "last_edit_date": 1573575401, "creation_date": 1573572308, "answer_id": 58821722, "question_id": 58820410, "link": "https://stackoverflow.com/questions/58820410/how-to-get-5-most-repeated-element-in-a-map/58821722#58821722", "title": "how to get 5 most repeated element in a map?", "body": "<p>The simple way is to first count the frequency of each word (count how many times it appears), and then sort the words by their frequency, and then show the top-5 of the result. You don't actually need to sort <em>all</em> of them, but it is simpler than <em>just</em> selecting the top-5.</p>\n\n<p>Let us write some code:</p>\n\n<pre><code> class WordCounter {\n     private Map&lt;String, Integer&gt; counts = new HashMap&lt;&gt;();\n\n     public void count(String word) {\n        int prev = counts.getOrDefault(word, 0);\n        counts.put(word, prev+1);\n     }\n\n     public String[] top(int n) {\n         String[] sorted = new String[counts.size()];\n         int i=0;\n         for (String s : counts.keySet()) sorted[i++] = s;\n         Arrays.sort(sorted, (a,b) -&gt; counts.get(b).compareTo(counts.get(a))); \n         return Arrays.copyOfRange(sorted, 0, n);\n     }\n }\n</code></pre>\n\n<p>Now, we call <code>count(word)</code> after reading each word. That takes care of frequencies. And call <code>top(5)</code> after finishing, which sorts results by count (decreasing) and returns the top 5.</p>\n"}, {"comments": [{"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 0, "creation_date": 1573655909, "post_id": 58823808, "comment_id": 103953178, "body": "Good, but <code>groupingBy { it }.eachCount()</code> instead of <code>groupBy { it }.mapValues { it.value.size }</code> will make it even better."}, {"owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "reply_to_user": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 0, "creation_date": 1573656947, "post_id": 58823808, "comment_id": 103953748, "body": "@Ilya Updated, thanks!  (I wasn&#39;t going to steal Tenfour04&#39;s idea, but since you told me to\u2026 :-)"}], "tags": [], "owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "is_accepted": true, "score": 7, "last_activity_date": 1573656880, "last_edit_date": 1573656880, "creation_date": 1573579821, "answer_id": 58823808, "question_id": 58820410, "link": "https://stackoverflow.com/questions/58820410/how-to-get-5-most-repeated-element-in-a-map/58823808#58823808", "title": "how to get 5 most repeated element in a map?", "body": "<p>This is one of those cases where a functional style can lead code that's a lot shorter \u2014 and hopefully more understandable!</p>\n\n<p>Once you have the <code>words</code> list, you can simply use:</p>\n\n<pre><code>words.groupingBy{ it }\n     .eachCount()\n     .toList()\n     .sortedByDescending{ it.second }\n     .take(5)\n</code></pre>\n\n<p>The <code>groupingBy()</code> creates a <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-grouping/index.html\" rel=\"nofollow noreferrer\">Grouping</a> from the list of words.\u00a0 (Normally, you'd give a key selector function, explaining what to group the items on, but in this case we want the words themselves, hence the <code>it</code>.)\u00a0 Since we only care about the <em>number</em> of occurrences, <code>eachCount()</code> gets the counts.\u00a0 (Thanks to Ilya and Tenfour04 for that part.)</p>\n\n<p>Then we convert the map into a list, ready to be sorted.\u00a0 The list consists of pairs, with the word as the first value, and the count as the second.</p>\n\n<p>So the <code>sortedByDescending{ it.second }</code> sorts by the count.\u00a0 And because we're sorting in descending order, it gives the most frequently-used words first.</p>\n\n<p>Finally, <code>take(5)</code> takes the first five values from the list, which will be the five most common words (along with their counts).</p>\n\n<p>For example, when I ran this on a few simple sentences, it gave: <code>[(the, 4), (was, 3), (it, 3), (a, 2), (of, 2)]</code>.</p>\n\n<p>(If you only want the words, not the counts, you could then use <code>.map{it.first}</code>.\u00a0\u00a0Also, as Tenfour04 suggests, there are better ways of extracting words from text; but that can get quite complicated once you start considering case, apostrophes, hyphens, non-ASCII letters, etc. \u2014 and seems like a separate question from getting the most common words.)</p>\n"}, {"tags": [], "owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "is_accepted": false, "score": 2, "last_activity_date": 1573593172, "last_edit_date": 1573593172, "creation_date": 1573588827, "answer_id": 58825858, "question_id": 58820410, "link": "https://stackoverflow.com/questions/58820410/how-to-get-5-most-repeated-element-in-a-map/58825858#58825858", "title": "how to get 5 most repeated element in a map?", "body": "<p>Since you tagged Kotlin, here's an implementation:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>fun File.mostCommonWords(count: Int) =\n    mutableListOf&lt;String&gt;().also { words -&gt;\n        forEachLine { line -&gt;\n            words += Regex(\"[a-zA-Z-]+\").findAll(line).map { it.value.toLowerCase() }\n        }\n    }\n        .groupingBy { it }\n        .eachCount() // &lt;-- Here's your map of words to word counts\n        .toList()\n        .sortedByDescending { it.second }\n        .take(count)\n        .toMap() // Converts it from a list of pairs back to a map\n</code></pre>\n\n<p>I think it's less error-prone to find your words instead of splitting by spaces and punctuation. Your sample code misses a lot of types of punctuation. Using <code>groupingBy</code>/<code>eachCount</code> gives you a map of words to their counts, which you can sort to get the most common ones. To sort a map by values you can convert it to a list of pairs first.</p>\n"}], "owner": {"reputation": 115, "user_id": 12361373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66d1fd069c5fd823b9b211e88dc896de?s=128&d=identicon&r=PG&f=1", "display_name": "Levi007", "link": "https://stackoverflow.com/users/12361373/levi007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 776, "favorite_count": 0, "accepted_answer_id": 58823808, "answer_count": 4, "score": 3, "last_activity_date": 1573656880, "creation_date": 1573567939, "last_edit_date": 1573576027, "question_id": 58820410, "link": "https://stackoverflow.com/questions/58820410/how-to-get-5-most-repeated-element-in-a-map", "title": "how to get 5 most repeated element in a map?", "body": "<p>i want to write a program that displays for example 5 most repeated word in a text.\nthe words of the text saved in a map that its keys are words and its values are number of repeating that word.</p>\n\n<p>this program displays the most repeated word but i don't know how to improve that to display 5 most repeated word(and how to use map instead of list).</p>\n\n<pre><code>import java.io.BufferedReader;    \nimport java.io.FileReader;    \nimport java.util.ArrayList;    \n\npublic class MostRepeatedWord {    \n\n    public static void main(String[] args) throws Exception {    \n        String line, word = \"\";    \n        int count = 0, maxCount = 0;    \n        ArrayList&lt;String&gt; words = new ArrayList&lt;String&gt;();    \n\n        //Opens file in read mode    \n        FileReader file = new FileReader(\"data.txt \");    \n        BufferedReader br = new BufferedReader(file);    \n\n        //Reads each line    \n        while((line = br.readLine()) != null) {    \n            String string[] = line.toLowerCase().split(\"([,.\\\\s]+) \");    \n            //Adding all words generated in previous step into words    \n            for(String s : string){    \n                words.add(s);    \n            }    \n        }    \n\n        //Determine the most repeated word in a file    \n        for(int i = 0; i &lt; words.size(); i++){    \n            count = 1;    \n            //Count each word in the file and store it in variable count    \n            for(int j = i+1; j &lt; words.size(); j++){    \n                if(words.get(i).equals(words.get(j))){    \n                    count++;    \n                }     \n            }    \n            //If maxCount is less than count then store value of count in maxCount     \n            //and corresponding word to variable word    \n            if(count &gt; maxCount){    \n                maxCount = count;    \n                word = words.get(i);    \n            }    \n        }    \n\n        System.out.println(\"Most repeated word: \" + word);    \n        br.close();    \n    }    \n}   \n</code></pre>\n"}, {"tags": ["android-studio", "kotlin", "refactoring"], "answers": [{"comments": [{"owner": {"reputation": 657, "user_id": 7674438, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xdeVt.jpg?s=128&g=1", "display_name": "Lore", "link": "https://stackoverflow.com/users/7674438/lore"}, "edited": false, "score": 0, "creation_date": 1573653339, "post_id": 58823678, "comment_id": 103951636, "body": "I wanna move to another <i>existing</i> interface... I have edited the question..."}], "tags": [], "owner": {"reputation": 451, "user_id": 5390707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eMri2.jpg?s=128&g=1", "display_name": "theThapa", "link": "https://stackoverflow.com/users/5390707/thethapa"}, "is_accepted": false, "score": 1, "last_activity_date": 1573579291, "creation_date": 1573579291, "answer_id": 58823678, "question_id": 58820380, "link": "https://stackoverflow.com/questions/58820380/move-a-method-from-an-interface-to-another/58823678#58823678", "title": "Move a method from an interface to another", "body": "<p>@Lore, We can do that, with following steps. But with this, it seems like the newly created <code>interface</code> implements the existing one. So, we just have to delete that implementation in the new <code>interface</code> file.</p>\n\n<p><code>Select function -&gt; Refactor -&gt; Extract -&gt; Interface... -&gt; Extract to separate file -&gt; Check Move</code></p>\n"}], "owner": {"reputation": 657, "user_id": 7674438, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xdeVt.jpg?s=128&g=1", "display_name": "Lore", "link": "https://stackoverflow.com/users/7674438/lore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573653302, "creation_date": 1573567837, "last_edit_date": 1573653302, "question_id": 58820380, "link": "https://stackoverflow.com/questions/58820380/move-a-method-from-an-interface-to-another", "title": "Move a method from an interface to another", "body": "<p>I'm trying to move a Kotlin interface method to another existing interface, by refactoring. But a can't find the right option in Android Studio. Is there a way to do that?</p>\n"}, {"tags": ["android", "android-studio", "kotlin", "google-play-services"], "comments": [{"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1573574845, "post_id": 58820267, "comment_id": 103921816, "body": "<code>isGooglePlayServicesAvailable</code> doesn&#39;t care about whether the installed Google Play Services version is the latest available version. It only cares about whether the installed version is greater than or equal to the one required by your app."}, {"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1573575113, "post_id": 58820267, "comment_id": 103921954, "body": "And if you&#39;re not interested in triggering an update (which could lead to a dialog being shown), then you probably shouldn&#39;t be calling <code>makeGooglePlayServicesAvailable</code>."}, {"owner": {"reputation": 186, "user_id": 5562697, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153415125666492/picture?type=large", "display_name": "benChung", "link": "https://stackoverflow.com/users/5562697/benchung"}, "reply_to_user": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1573575499, "post_id": 58820267, "comment_id": 103922160, "body": "The &quot;makeGooglePlayServicesAvailable&quot; part is my mistake, and I have removed it from question."}], "owner": {"reputation": 186, "user_id": 5562697, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153415125666492/picture?type=large", "display_name": "benChung", "link": "https://stackoverflow.com/users/5562697/benchung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1573575420, "creation_date": 1573567411, "last_edit_date": 1573575420, "question_id": 58820267, "link": "https://stackoverflow.com/questions/58820267/could-not-handle-scenario-where-google-play-services-needs-updating-by-googleapi", "title": "Could not handle scenario where Google Play Services needs updating by GoogleApiAvailability", "body": "<p>I am currently trying to use the SMS Consent API, and I have laid out logic to check if Google Play Services is updated before I call <code>startSmsUserConsent()</code></p>\n\n<pre><code>private val googlePlayServicesIsUpdated: Boolean\n        get() {\n            val googleApiAvailability = GoogleApiAvailability.getInstance()\n            val status = googleApiAvailability.isGooglePlayServicesAvailable(this)\n\n            if (status == ConnectionResult.SERVICE_VERSION_UPDATE_REQUIRED) {\n                return false\n            }\n\n            return true\n        }\n</code></pre>\n\n<p><strong>googlePlayServicesIsUpdated</strong></p>\n\n<pre><code>private fun startSmsUserConsent() {\n        SmsRetriever.getClient(this).also {retrieverClient -&gt;\n            retrieverClient\n                    .startSmsUserConsent(null)\n                    .addOnSuccessListener { Log.d(TAG, \"listening success\") }\n                    .addOnFailureListener { Log.d(TAG, \"listening failure\") }\n        }\n    }\n</code></pre>\n\n<p><strong>startSmsUserContent()</strong></p>\n\n<pre><code>if (googlePlayServicesIsUpdated) startSmsUserConsent()\n</code></pre>\n\n<p><strong>how it's used in onCreate()</strong></p>\n\n<p>However, unlike what I expected (knowing that the Play Services is not updated), the ConnectionResult always returns as SUCCESS (0), and upon calling startSmsUserConsent(), it shows the \"Update Google Play Services\" dialog.</p>\n\n<p>This is not friendly for the user because it suggests in its message that the app can't be used if it's not updated, let alone the Play Services API at this moment is only being used to populate the OTP fields automatically.</p>\n\n<p>In essence, I just want to make the code check if Play Services is updated or not before calling <code>startSmsUserConsent()</code>, and <code>isGooglePlayServicesAvailable</code> so far didn't help fulfill the purpose.</p>\n\n<p>FYI, I am using an emulator with Android 9.0 image with Google APIs (not Google Play)</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 3980, "user_id": 3876196, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/yYJLo.png?s=128&g=1", "display_name": "AntoineB", "link": "https://stackoverflow.com/users/3876196/antoineb"}, "edited": false, "score": 0, "creation_date": 1573566215, "post_id": 58819813, "comment_id": 103917242, "body": "Do you need the assignation? If not, just <code>return X != null ? X!! : ...</code>"}, {"owner": {"reputation": 3290, "user_id": 4400065, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kbo7S.gif?s=128&g=1", "display_name": "Siegmeyer", "link": "https://stackoverflow.com/users/4400065/siegmeyer"}, "reply_to_user": {"reputation": 3980, "user_id": 3876196, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/yYJLo.png?s=128&g=1", "display_name": "AntoineB", "link": "https://stackoverflow.com/users/3876196/antoineb"}, "edited": false, "score": 0, "creation_date": 1573566294, "post_id": 58819813, "comment_id": 103917290, "body": "Unfortunately, yep."}], "answers": [{"comments": [{"owner": {"reputation": 3290, "user_id": 4400065, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kbo7S.gif?s=128&g=1", "display_name": "Siegmeyer", "link": "https://stackoverflow.com/users/4400065/siegmeyer"}, "edited": false, "score": 1, "creation_date": 1573565692, "post_id": 58819874, "comment_id": 103916925, "body": "The thing is, I need to assign to X, not only return something."}, {"owner": {"reputation": 1704, "user_id": 5909412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CczFB.png?s=128&g=1", "display_name": "P.Juni", "link": "https://stackoverflow.com/users/5909412/p-juni"}, "edited": false, "score": 0, "creation_date": 1573565713, "post_id": 58819874, "comment_id": 103916935, "body": "I believe he wants to assign value when null, not return other value"}, {"owner": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "edited": false, "score": 0, "creation_date": 1573565777, "post_id": 58819874, "comment_id": 103916975, "body": "Oops my bad. Fixed."}, {"owner": {"reputation": 3290, "user_id": 4400065, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kbo7S.gif?s=128&g=1", "display_name": "Siegmeyer", "link": "https://stackoverflow.com/users/4400065/siegmeyer"}, "edited": false, "score": 1, "creation_date": 1573566107, "post_id": 58819874, "comment_id": 103917174, "body": "Thanks for the response, I updated my question. I know that ?: is an improvement, but I&#39;m wondering if I can do it fundamentally different way."}], "tags": [], "owner": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "is_accepted": false, "score": 1, "last_activity_date": 1573565766, "last_edit_date": 1573565766, "creation_date": 1573565590, "answer_id": 58819874, "question_id": 58819813, "link": "https://stackoverflow.com/questions/58819813/how-to-rewrite-this-check-assign-and-return-pattern/58819874#58819874", "title": "How to rewrite this &quot;check, assign and return&quot; pattern?", "body": "<p>You can use the <a href=\"https://kotlinlang.org/docs/reference/null-safety.html#elvis-operator\" rel=\"nofollow noreferrer\">Elvis Operator</a>: <code>?:</code></p>\n\n<blockquote>\n  <p>If the expression to the left of ?: is not null, the elvis operator returns it, otherwise it returns the expression to the right.</p>\n</blockquote>\n\n<p>You can update your variable with the elvis operator then return the result.</p>\n\n<pre><code>fun getX(): Y {\n    x = x ?: valueIfNull   // If x is null, x becomes 'valueIfNull'.\n    return x!!             // x cannot be null, return it.\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5302, "user_id": 4265739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19cd59393a5b86c48f0da7bd5504c5b8?s=128&d=identicon&r=PG&f=1", "display_name": "leonardkraemer", "link": "https://stackoverflow.com/users/4265739/leonardkraemer"}, "reply_to_user": {"reputation": 3290, "user_id": 4400065, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kbo7S.gif?s=128&g=1", "display_name": "Siegmeyer", "link": "https://stackoverflow.com/users/4400065/siegmeyer"}, "edited": false, "score": 0, "creation_date": 1573566705, "post_id": 58820095, "comment_id": 103917520, "body": "Still this will throw a NPE and should only be used if you are working with legacy libraries where you can not be sure that y is not null."}], "tags": [], "owner": {"reputation": 5302, "user_id": 4265739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19cd59393a5b86c48f0da7bd5504c5b8?s=128&d=identicon&r=PG&f=1", "display_name": "leonardkraemer", "link": "https://stackoverflow.com/users/4265739/leonardkraemer"}, "is_accepted": true, "score": 2, "last_activity_date": 1573566560, "last_edit_date": 1573566560, "creation_date": 1573566392, "answer_id": 58820095, "question_id": 58819813, "link": "https://stackoverflow.com/questions/58819813/how-to-rewrite-this-check-assign-and-return-pattern/58820095#58820095", "title": "How to rewrite this &quot;check, assign and return&quot; pattern?", "body": "<p>I think you are looking for <code>by lazy</code> i.e. a property that is initialized the first time it is called. See <a href=\"https://kotlinlang.org/docs/reference/delegated-properties.html\" rel=\"nofollow noreferrer\">Delegated Properties</a> and <a href=\"https://www.baeldung.com/kotlin-lazy-initialization\" rel=\"nofollow noreferrer\">lazy initialization tutorial</a></p>\n\n<pre><code>val x :String by lazy {\n    \"a\"\n}\n</code></pre>\n\n<p>or in your case:    </p>\n\n<pre><code>val z : Y by lazy {\n    y!!\n}\n</code></pre>\n\n<p>You might also want to have a look at <a href=\"https://kotlinlang.org/docs/reference/properties.html#late-initialized-properties-and-variables\" rel=\"nofollow noreferrer\">lateinit-properties</a>:</p>\n\n<pre><code>lateinit val y : Y\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": false, "score": 2, "last_activity_date": 1573585557, "last_edit_date": 1573585557, "creation_date": 1573574782, "answer_id": 58822463, "question_id": 58819813, "link": "https://stackoverflow.com/questions/58819813/how-to-rewrite-this-check-assign-and-return-pattern/58822463#58822463", "title": "How to rewrite this &quot;check, assign and return&quot; pattern?", "body": "<p>You can move assignment to the right hand side of the elvis operator using <code>also</code> function:</p>\n\n<pre><code>fun getX() = x ?: valueIfXisNull.also { x = it }\n</code></pre>\n"}], "owner": {"reputation": 3290, "user_id": 4400065, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kbo7S.gif?s=128&g=1", "display_name": "Siegmeyer", "link": "https://stackoverflow.com/users/4400065/siegmeyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 58820095, "answer_count": 3, "score": 0, "last_activity_date": 1573585557, "creation_date": 1573565427, "last_edit_date": 1573566216, "question_id": 58819813, "link": "https://stackoverflow.com/questions/58819813/how-to-rewrite-this-check-assign-and-return-pattern", "title": "How to rewrite this &quot;check, assign and return&quot; pattern?", "body": "<p>Is there any clearer, more idiomatic way to rewrite this \"check, assign and return\" function?</p>\n\n<pre><code>fun getX(): Y {\n    if (X == null) {\n        X = ...\n    }\n\n    return X!!\n}\n</code></pre>\n\n<p><strong>Edit</strong>: I know of Elvis operator but the problem is that although I can save on few lines with syntax sugar</p>\n\n<pre><code>fun getX(): Y {\n    X = X ?: ...\n    return X!!\n}\n</code></pre>\n\n<p>I'm not changing the semantics of the code. I need to force casting anyway (<code>!!</code>). So it's the same, just three lines shorter.</p>\n\n<p><strong>Edit</strong>: <code>X</code> is a property on some object, and I need to update it.</p>\n"}, {"tags": ["android", "android-studio", "kotlin"], "comments": [{"owner": {"reputation": 1350, "user_id": 10445540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ca713c1a1ae615695267f4e23b8d5f5?s=128&d=identicon&r=PG&f=1", "display_name": "Artem Botnev", "link": "https://stackoverflow.com/users/10445540/artem-botnev"}, "edited": false, "score": 0, "creation_date": 1573565478, "post_id": 58819780, "comment_id": 103916811, "body": "You have to use androidx dependencies. <a href=\"https://developer.android.com/jetpack/androidx/releases/cardview\" rel=\"nofollow noreferrer\">developer.android.com/jetpack/androidx/releases/cardview</a>"}, {"owner": {"reputation": 2756, "user_id": 2235972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZDR82.png?s=128&g=1", "display_name": "denvercoder9", "link": "https://stackoverflow.com/users/2235972/denvercoder9"}, "edited": false, "score": 0, "creation_date": 1573565595, "post_id": 58819780, "comment_id": 103916873, "body": "<code>androidx.cardview.widget.CardView</code>"}, {"owner": {"reputation": 679, "user_id": 9141664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/atErF.jpg?s=128&g=1", "display_name": "Muhammad Farhan", "link": "https://stackoverflow.com/users/9141664/muhammad-farhan"}, "edited": false, "score": 0, "creation_date": 1573565763, "post_id": 58819780, "comment_id": 103916964, "body": "The problem is because you have added androidx support in your project while you are using support v7.   This is a Support v7 Card View. <code>android.support.v7.widget.CardView</code>  Use this. <code>androidx.cardview.widget.CardViewa</code>"}], "answers": [{"comments": [{"owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 0, "creation_date": 1573643584, "post_id": 58819881, "comment_id": 103946464, "body": "@Lea, did you get your answer. Let me know"}, {"owner": {"reputation": 31, "user_id": 11544084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/373df38ac824eb81265c4955adb0f1b8?s=128&d=identicon&r=PG&f=1", "display_name": "L&#233;a", "link": "https://stackoverflow.com/users/11544084/l%c3%a9a"}, "edited": false, "score": 0, "creation_date": 1573739599, "post_id": 58819881, "comment_id": 103987971, "body": "Yes, Md. Asaduzzaman, I got my answer, thank you very much! I tried before the first solution you suggested: androidx.cardview.widget.CardView but I had other errors afterwards (&#39;not bound ...&#39; something like that). I didn&#39;t try your second solution.What worked for me, was the answer from this link : <a href=\"https://stackoverflow.com/questions/53089633/how-to-add-cardview-in-layout-xml-in-androidx\" title=\"how to add cardview in layout xml in androidx\">stackoverflow.com/questions/53089633/&hellip;</a>; I thought I left a reply to the previous answer, but I am not finding it today !! Thank you very much for your answer, Md.Asaduzzaman, and thanks for checking if I found the solution. Best regards."}], "tags": [], "owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "is_accepted": false, "score": 1, "last_activity_date": 1573565623, "creation_date": 1573565623, "answer_id": 58819881, "question_id": 58819780, "link": "https://stackoverflow.com/questions/58819780/android-support-v7-widget-cardview-could-not-be-found-android-studio/58819881#58819881", "title": "android.support.v7.widget.CardView could not be found Android Studio", "body": "<p>Either use </p>\n\n<pre><code>androidx.cardview.widget.CardView\n</code></pre>\n\n<p>or</p>\n\n<pre><code>com.google.android.material.card.MaterialCardView\n</code></pre>\n\n<p>instead of </p>\n\n<pre><code>android.support.v7.widget.CardView\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 11544084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/373df38ac824eb81265c4955adb0f1b8?s=128&d=identicon&r=PG&f=1", "display_name": "L&#233;a", "link": "https://stackoverflow.com/users/11544084/l%c3%a9a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 687, "favorite_count": 0, "closed_date": 1573565596, "answer_count": 1, "score": 0, "last_activity_date": 1573565657, "creation_date": 1573565299, "question_id": 58819780, "link": "https://stackoverflow.com/questions/58819780/android-support-v7-widget-cardview-could-not-be-found-android-studio", "closed_reason": "Duplicate", "title": "android.support.v7.widget.CardView could not be found Android Studio", "body": "<p>I am following this tutorial for Android app : \n<a href=\"https://www.youtube.com/watch?v=wW-AAXOy4u4\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=wW-AAXOy4u4</a></p>\n\n<p>I added a list that may contain some items; For each item, I want it to be a Card. Created the card, imported dependencies in build.gradle:</p>\n\n<pre><code>dependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation\"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\n    implementation 'androidx.appcompat:appcompat:1.0.2'\n    implementation 'androidx.core:core-ktx:1.0.2'\n    implementation 'androidx.constraintlayout:constraintlayout:1.1.3'\n    implementation 'com.squareup:android-times-square:1.6.5@aar'\n\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.0'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.1.1'\n    implementation 'com.google.android.material:material:1.2.0-alpha01'\n    implementation 'androidx.cardview:cardview:1.0.0'\n\n}\n</code></pre>\n\n<p>as suggested here:\n<a href=\"https://stackoverflow.com/questions/28302687/android-support-v7-widget-cardview-could-not-be-found-android-studio-1-1-previe\">android.support.v7.widget.CardView could not be found (Android Studio 1.1 Preview)</a></p>\n\n<p>Nevertheless, I still get the \"android.support.v7.widget.CardView could not be found\" error.</p>\n\n<p>The error that I get:</p>\n\n<pre><code> The following classes could not be found:\n    -\u00a0android.support.v7.widget.CardView (Fix Build Path, Edit XML, Create \n    Class)\n    Tip: Try to build the project.   Tip: Try to refresh the layout.\n</code></pre>\n\n<p>Here is my main_activity_single_item code:</p>\n\n<pre><code>&lt;android.support.v7.widget.CardView\nandroid:layout_height=\"wrap_content\"\nandroid:layout_width=\"match_parent\"\nandroid:background=\"@color/colorAccent\"\nandroid:elevation=\"4dp\"\nxmlns:android=\"http://schemas.android.com/apk/res/android\"&gt;\n\n\n\n\n &lt;RelativeLayout\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"&gt;\n\n        &lt;ImageView\n            android:layout_width=\"80dp\"\n            android:layout_height=\"105dp\"\n            android:id=\"@+id/ivMain\"\n            android:layout_marginStart=\"10dp\"\n            android:layout_marginLeft=\"10dp\"\n            /&gt;\n\n            &lt;TextView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:id=\"@+id/tvMain\"\n                android:textStyle=\"bold\"\n                android:layout_toRightOf=\"@+id/ivMain\"\n                android:layout_marginLeft=\"6dp\"\n                android:layout_toEndOf=\"@+id/ivMain\"\n                android:text=\"Timetable\"\n                android:textSize=\"24sp\"/&gt;\n\n            &lt;TextView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:id=\"@+id/tvDescription\"\n                android:layout_below=\"@+id/tvMain\"\n                android:layout_toRightOf=\"@+id/ivMain\"\n                android:layout_marginLeft=\"6dp\"\n                android:text=\"Description\"\n                android:textSize=\"16dp\"/&gt;\n\n            &lt;TextView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:id=\"@+id/tvClick\"\n                android:textSize=\"12dp\"\n                android:text=\"click here\"\n                android:layout_below=\"@+id/tvDescription\"\n                android:layout_alignBottom=\"@+id/ivMain\"/&gt;\n\n    &lt;/RelativeLayout&gt;\n    &lt;/android.support.v7.widget.CardView&gt;\n</code></pre>\n\n<p>What I already tried:\nchanged in\n  <code>res-&gt;value-&gt;styles \nfrom     &lt;style name=\"AppTheme\" parent=\"Theme.AppCompat.Light.NoActionBar\"&gt;\nto     &lt;style name=\"AppTheme\" parent=\"Base.Theme.AppCompat.Light.NoActionBar\"&gt;</code> \n(error)</p>\n\n<pre><code>   File .. Invalidate caches / restart\n    Build project\n</code></pre>\n\n<p>I work on Android Studio, my API version is 22</p>\n\n<p>Can you please, share your insights on this issue ?</p>\n\n<p>Please let me know if you need some extra information.\nThank you very much.</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 292, "user_id": 10551887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dff76320f9f9a5faaac6537881c724e?s=128&d=identicon&r=PG&f=1", "display_name": "szakes1", "link": "https://stackoverflow.com/users/10551887/szakes1"}, "edited": false, "score": 0, "creation_date": 1573564558, "post_id": 58819535, "comment_id": 103916307, "body": "Can you help me do it? I&#39;m quite new and I don&#39;t know what exception to throw."}], "tags": [], "owner": {"reputation": 2756, "user_id": 2235972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZDR82.png?s=128&g=1", "display_name": "denvercoder9", "link": "https://stackoverflow.com/users/2235972/denvercoder9"}, "is_accepted": true, "score": 7, "last_activity_date": 1573564648, "last_edit_date": 1573564648, "creation_date": 1573564456, "answer_id": 58819535, "question_id": 58819456, "link": "https://stackoverflow.com/questions/58819456/return-type-of-getitem-is-not-a-subtype-of-the-return-type-of-the-overridden-m/58819535#58819535", "title": "Return type of &#39;getItem&#39; is not a subtype of the return type of the overridden member", "body": "<p>Because the super method is defined in <code>FragmentStatePagerAdapter</code> as follows:</p>\n\n<pre><code>@NonNull\npublic abstract Fragment getItem(int position);\n</code></pre>\n\n<p>So, you cannot have nullable in your overriden method:</p>\n\n<pre><code>override fun getItem(position: Int): Fragment {\n</code></pre>\n\n<p>And finally, don't return <code>null</code> from the <code>getItem(..)</code> function. Instead, throw an exception</p>\n\n<pre><code>override fun getItem(position: Int): Fragment {\n    when (position) {\n       .....\n    }\n    throw IllegalStateException(\"position $position is invalid for this viewpager\")\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 9813964, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "saidi mmaka", "link": "https://stackoverflow.com/users/9813964/saidi-mmaka"}, "is_accepted": false, "score": 1, "last_activity_date": 1599374817, "last_edit_date": 1599374817, "creation_date": 1599330062, "answer_id": 63757177, "question_id": 58819456, "link": "https://stackoverflow.com/questions/58819456/return-type-of-getitem-is-not-a-subtype-of-the-return-type-of-the-overridden-m/63757177#63757177", "title": "Return type of &#39;getItem&#39; is not a subtype of the return type of the overridden member", "body": "<p>From your <code>fun getItem(position: Int)</code> method, inside</p>\n<pre><code>when(position) {\n    //In these brackets\n}\n</code></pre>\n<ol>\n<li><p>Just delete <code>return null</code></p>\n</li>\n<li><p>Then below <code>4 -&gt; return &quot;Ma\u0142e frytki&quot;</code> add this line:</p>\n<pre><code>else -&gt; {throw IllegalStateException(&quot;$position is illegal&quot;) }\n</code></pre>\n</li>\n</ol>\n"}], "owner": {"reputation": 292, "user_id": 10551887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dff76320f9f9a5faaac6537881c724e?s=128&d=identicon&r=PG&f=1", "display_name": "szakes1", "link": "https://stackoverflow.com/users/10551887/szakes1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 896, "favorite_count": 0, "accepted_answer_id": 58819535, "answer_count": 2, "score": 1, "last_activity_date": 1599374817, "creation_date": 1573564105, "last_edit_date": 1573573017, "question_id": 58819456, "link": "https://stackoverflow.com/questions/58819456/return-type-of-getitem-is-not-a-subtype-of-the-return-type-of-the-overridden-m", "title": "Return type of &#39;getItem&#39; is not a subtype of the return type of the overridden member", "body": "<p>I am writing a simple coupon application, but recently I updated some dependencies and my <code>Fragment</code> <em>doesn't</em> allow me to <code>return null</code></p>\n\n<p>Photo of the error:\n<img src=\"https://i.imgur.com/gFrDb4m.png\" alt=\"error\"></p>\n\n<p><img src=\"https://i.imgur.com/v0i8984.png\" alt=\"error2\"></p>\n\n<pre><code>package com.szakes1.makdolannative.adapters\n\nimport androidx.fragment.app.Fragment\nimport androidx.fragment.app.FragmentManager\nimport androidx.fragment.app.FragmentStatePagerAdapter\nimport com.szakes1.makdolannative.R\nimport com.szakes1.makdolannative.fragments.CouponFragment\nimport com.szakes1.makdolannative.fragments.HomeFragment\n\nclass ViewPagerAdapter(fm: FragmentManager, private val numberOfFrags: Int) : FragmentStatePagerAdapter(fm, BEHAVIOR_RESUME_ONLY_CURRENT_FRAGMENT) {\n    override fun getItem(position: Int): Fragment? {\n        when (position) {\n            0 -&gt; return HomeFragment()\n            1 -&gt; return CouponFragment(R.drawable.coupon_hamburger)\n            2 -&gt; return CouponFragment(R.drawable.coupon_icecream)\n            3 -&gt; return CouponFragment(R.drawable.coupon_cheeseburger)\n            4 -&gt; return CouponFragment(R.drawable.coupon_fries)\n        }\n        return null\n    }\n\n    override fun getCount(): Int {\n        return numberOfFrags\n    }\n\n    override fun getPageTitle(position: Int): CharSequence? {\n        when (position) {\n            0 -&gt; return \"Jak u\u017cywa\u0107?\"\n            1 -&gt; return \"Hamburger\"\n            2 -&gt; return \"Lody\"\n            3 -&gt; return \"Cheeseburger\"\n            4 -&gt; return \"Ma\u0142e frytki\"\n        }\n        return super.getPageTitle(position)\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 668, "user_id": 3427316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c823b3b71467c27fab3da779212bbce?s=128&d=identicon&r=PG&f=1", "display_name": "Donald Wu", "link": "https://stackoverflow.com/users/3427316/donald-wu"}, "edited": false, "score": 0, "creation_date": 1573563910, "post_id": 58819353, "comment_id": 103915967, "body": "did u print <code>reversedEventList </code> ? what is the value?"}, {"owner": {"reputation": 8644, "user_id": 6813231, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/gy8Sg.jpg?s=128&g=1", "display_name": "a_subscriber", "link": "https://stackoverflow.com/users/6813231/a-subscriber"}, "reply_to_user": {"reputation": 668, "user_id": 3427316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c823b3b71467c27fab3da779212bbce?s=128&d=identicon&r=PG&f=1", "display_name": "Donald Wu", "link": "https://stackoverflow.com/users/3427316/donald-wu"}, "edited": false, "score": 0, "creation_date": 1573563989, "post_id": 58819353, "comment_id": 103916005, "body": "It&#39;s empty: loadEvents: reversedEventList(0)"}, {"owner": {"reputation": 668, "user_id": 3427316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c823b3b71467c27fab3da779212bbce?s=128&d=identicon&r=PG&f=1", "display_name": "Donald Wu", "link": "https://stackoverflow.com/users/3427316/donald-wu"}, "edited": false, "score": 0, "creation_date": 1573564040, "post_id": 58819353, "comment_id": 103916039, "body": "reversedEventList.size = 0, the list is empty"}, {"owner": {"reputation": 8644, "user_id": 6813231, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/gy8Sg.jpg?s=128&g=1", "display_name": "a_subscriber", "link": "https://stackoverflow.com/users/6813231/a-subscriber"}, "reply_to_user": {"reputation": 668, "user_id": 3427316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c823b3b71467c27fab3da779212bbce?s=128&d=identicon&r=PG&f=1", "display_name": "Donald Wu", "link": "https://stackoverflow.com/users/3427316/donald-wu"}, "edited": false, "score": 0, "creation_date": 1573564065, "post_id": 58819353, "comment_id": 103916060, "body": "@DonaldWu yes, the size = 0"}, {"owner": {"reputation": 668, "user_id": 3427316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c823b3b71467c27fab3da779212bbce?s=128&d=identicon&r=PG&f=1", "display_name": "Donald Wu", "link": "https://stackoverflow.com/users/3427316/donald-wu"}, "edited": false, "score": 0, "creation_date": 1573564077, "post_id": 58819353, "comment_id": 103916070, "body": "then so <code>java.util.NoSuchElementException: List contains no element matching the predicate.</code>"}, {"owner": {"reputation": 8644, "user_id": 6813231, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/gy8Sg.jpg?s=128&g=1", "display_name": "a_subscriber", "link": "https://stackoverflow.com/users/6813231/a-subscriber"}, "reply_to_user": {"reputation": 668, "user_id": 3427316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c823b3b71467c27fab3da779212bbce?s=128&d=identicon&r=PG&f=1", "display_name": "Donald Wu", "link": "https://stackoverflow.com/users/3427316/donald-wu"}, "edited": false, "score": 0, "creation_date": 1573564117, "post_id": 58819353, "comment_id": 103916090, "body": "@DonaldWu so before apply filter I must check is list empty?"}, {"owner": {"reputation": 668, "user_id": 3427316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c823b3b71467c27fab3da779212bbce?s=128&d=identicon&r=PG&f=1", "display_name": "Donald Wu", "link": "https://stackoverflow.com/users/3427316/donald-wu"}, "edited": false, "score": 1, "creation_date": 1573564211, "post_id": 58819353, "comment_id": 103916137, "body": "yes...<a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/last.html\" rel=\"nofollow noreferrer\">kotlinlang.org/api/latest/jvm/stdlib/kotlin.collection&zwnj;&#8203;s/&hellip;</a>....<code>NoSuchElement&zwnj;&#8203;Exception - if the array is empty.</code>"}, {"owner": {"reputation": 668, "user_id": 3427316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c823b3b71467c27fab3da779212bbce?s=128&d=identicon&r=PG&f=1", "display_name": "Donald Wu", "link": "https://stackoverflow.com/users/3427316/donald-wu"}, "edited": false, "score": 1, "creation_date": 1573564481, "post_id": 58819353, "comment_id": 103916266, "body": "maybe <code>lastOrNull</code> ? <code>val result = yourList.lastOrNull()? true : false</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 3290, "user_id": 4109713, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Z0gtVzo_pVg/AAAAAAAAAAI/AAAAAAAAACc/zf9eXprNRfE/photo.jpg?sz=128", "display_name": "Andre Classen", "link": "https://stackoverflow.com/users/4109713/andre-classen"}, "is_accepted": true, "score": 4, "last_activity_date": 1573564550, "creation_date": 1573564550, "answer_id": 58819577, "question_id": 58819353, "link": "https://stackoverflow.com/questions/58819353/java-util-nosuchelementexception-list-contains-no-element-matching-the-predicat/58819577#58819577", "title": "java.util.NoSuchElementException: List contains no element matching the predicate", "body": "<p>Maybe using <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/last-or-null.html\" rel=\"nofollow noreferrer\">lastOrNull</a> would be an option for you:</p>\n\n<pre><code>val eventList: List&lt;String&gt; = emptyList()\nval lastEvent: String? = eventList.reversed().lastOrNull { \"test\" == it }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 668, "user_id": 3427316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c823b3b71467c27fab3da779212bbce?s=128&d=identicon&r=PG&f=1", "display_name": "Donald Wu", "link": "https://stackoverflow.com/users/3427316/donald-wu"}, "is_accepted": false, "score": 1, "last_activity_date": 1573564728, "creation_date": 1573564728, "answer_id": 58819628, "question_id": 58819353, "link": "https://stackoverflow.com/questions/58819353/java-util-nosuchelementexception-list-contains-no-element-matching-the-predicat/58819628#58819628", "title": "java.util.NoSuchElementException: List contains no element matching the predicate", "body": "<p>check inside the list item is not empty then return the result</p>\n\n<pre><code>val yourList = mutableListOf&lt;String&gt;()\nyourList.add(\"aaa\")\nyourList.add(\"bbb\")\nyourList.add(\"test\")\n\nval result: String? = yourList.last {\n   if it.isNotEmpty()\n     return it == \"test\" \n}\n</code></pre>\n"}], "owner": {"reputation": 8644, "user_id": 6813231, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/gy8Sg.jpg?s=128&g=1", "display_name": "a_subscriber", "link": "https://stackoverflow.com/users/6813231/a-subscriber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2986, "favorite_count": 0, "accepted_answer_id": 58819577, "answer_count": 2, "score": 2, "last_activity_date": 1573564728, "creation_date": 1573563810, "question_id": 58819353, "link": "https://stackoverflow.com/questions/58819353/java-util-nosuchelementexception-list-contains-no-element-matching-the-predicat", "title": "java.util.NoSuchElementException: List contains no element matching the predicate", "body": "<p>Android Studio 3.6</p>\n\n<pre><code> val reversedEventList: List&lt;Event&gt; = (response.body() as List&lt;Event&gt;).reversed()\n                Debug.d(TAG, \"loadEvents: reversedEventList(\" + reversedEventList.size + \")\")\n                val lastEvent: Event = reversedEventList.last {\n                    it.info?.deviceId.equals(\n                        DeviceUtil.deviceId,\n                        true\n                    ) &amp;&amp; it.type == Type.CALL_WAITRESS\n                }\nDebug.d(TAG, \"loadEvents: lastEvent = $lastEvent)\")\n</code></pre>\n\n<p>And here logcat:</p>\n\n<pre><code>MainViewModel( 5086): loadEvents: reversedEventList(338)\nMainViewModel( 5086): loadEvents: lastEvent = Event{id = 366, orgn = 17, type = CALL_WAITRESS, started = 1566750174, finished = 1566750194, closeUser = 1, info = Info{isCash=false, isDiscount=false, deviceId = 41c2d0af61254f94a948882c7613d873}, user = '0', room = 1, table = 66, place = 1, closeInfo = CloseInfo{expectedResponceMinutes=0}})\n</code></pre>\n\n<p>Nice.</p>\n\n<p>In the next test case I force set empty list</p>\n\n<pre><code>val reversedEventList: List&lt;Event&gt; = ArrayList&lt;Event&gt;()\n</code></pre>\n\n<p>And now I get error:</p>\n\n<pre><code>MainViewModel( 7932): loadEvents: reversedEventList(0)\n11-12 15:01:44.789 E/AndroidRuntime( 7932): FATAL EXCEPTION: main\n11-12 15:01:44.789 E/AndroidRuntime( 7932): Process: debug, PID: 7932\n11-12 15:01:44.789 E/AndroidRuntime( 7932): java.util.NoSuchElementException: List contains no element matching the predicate.\n11-12 15:01:44.789 E/AndroidRuntime( 7932):     at MainViewModel$loadEvents$1.invokeSuspend(MainViewModel.kt:180)\n11-12 15:01:44.789 E/AndroidRuntime( 7932):     at kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:33)\n11-12 15:01:44.789 E/AndroidRuntime( 7932):     at kotlinx.coroutines.DispatchedTask.run(Dispatched.kt:241)\n11-12 15:01:44.789 E/AndroidRuntime( 7932):     at android.os.Handler.handleCallback(Handler.java:739)\n11-12 15:01:44.789 E/AndroidRuntime( 7932):     at android.os.Handler.dispatchMessage(Handler.java:95)\n11-12 15:01:44.789 E/AndroidRuntime( 7932):     at android.os.Looper.loop(Looper.java:148)\n11-12 15:01:44.789 E/AndroidRuntime( 7932):     at android.app.ActivityThread.main(ActivityThread.java:5417)\n11-12 15:01:44.789 E/AndroidRuntime( 7932):     at java.lang.reflect.Method.invoke(Native Method)\n11-12 15:01:44.789 E/AndroidRuntime( 7932):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n11-12 15:01:44.789 E/AndroidRuntime( 7932):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n</code></pre>\n"}, {"tags": ["json", "kotlin", "data-class"], "comments": [{"owner": {"reputation": 171, "user_id": 11947145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/667e1f12f6b57a884b666fd59fe73863?s=128&d=identicon&r=PG&f=1", "display_name": "vitalyros", "link": "https://stackoverflow.com/users/11947145/vitalyros"}, "edited": false, "score": 0, "creation_date": 1573565602, "post_id": 58819277, "comment_id": 103916877, "body": "Have you tried ObjectNode in Jackson library?"}], "answers": [{"comments": [{"owner": {"reputation": 425, "user_id": 1312353, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/de52acd22dab1c76041b169ae53c1261?s=128&d=identicon&r=PG", "display_name": "kioli", "link": "https://stackoverflow.com/users/1312353/kioli"}, "edited": false, "score": 0, "creation_date": 1573566696, "post_id": 58819927, "comment_id": 103917515, "body": "So, for the same key being used multiple times I was hoping to be able to find a solution that could be used from everywhere in the app more or less like <code>addToJson(address.streetName, &quot;blala&quot;)</code>"}], "tags": [], "owner": {"reputation": 3137, "user_id": 4267015, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q8N5O.jpg?s=128&g=1", "display_name": "Naor Tedgi", "link": "https://stackoverflow.com/users/4267015/naor-tedgi"}, "is_accepted": false, "score": 0, "last_activity_date": 1573565744, "creation_date": 1573565744, "answer_id": 58819927, "question_id": 58819277, "link": "https://stackoverflow.com/questions/58819277/how-to-edit-nested-json-in-kotlin/58819927#58819927", "title": "How to edit nested JSON in kotlin", "body": "<p>this pseudo your asking as some problems.</p>\n\n<ol>\n<li>what are you planning to do if the same nested key is used more then\nonce?</li>\n<li>T value has to be known JSON object type primitives arrays or JSON objects how you plan to enforce this in runtime? </li>\n</ol>\n\n<p>here is an example on how to access each property inside your object </p>\n\n<pre><code>val jsonString = \"{\\n\" +\n        \"  \\\"id\\\": \\\"\\\",\\n\" +\n        \"  \\\"name\\\": \\\"\\\",\\n\" +\n        \"  \\\"age\\\": 0,\\n\" +\n        \"  \\\"address\\\": {\\n\" +\n        \"    \\\"streetName\\\": \\\"\\\",\\n\" +\n        \"    \\\"streetNumber\\\": 0\\n\" +\n        \"  }\\n\" +\n        \"}\"\nval gson = Gson()\nval jsonElement = gson.fromJson(jsonString, JsonElement::class.java).asJsonObject\njsonElement.addProperty(\"id\",26)\njsonElement.addProperty(\"name\",\"sof\")\njsonElement.addProperty(\"age\",33)\nval nested = jsonElement.get(\"address\").asJsonObject\nnested.addProperty(\"streetName\",\"blala\")\nnested.addProperty(\"streetNumber\",12)\n\nprint(jsonElement)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 425, "user_id": 1312353, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/de52acd22dab1c76041b169ae53c1261?s=128&d=identicon&r=PG", "display_name": "kioli", "link": "https://stackoverflow.com/users/1312353/kioli"}, "edited": false, "score": 0, "creation_date": 1573566542, "post_id": 58820037, "comment_id": 103917425, "body": "Thank you I did not know about the ObjectNode in the Jackson library. Though I&#39;m not sure if it will reach the desired goal, which is from anywhere in the code to be able to do something like <code>addToJson(address.streetName, &quot;Lenin&quot;)</code>"}, {"owner": {"reputation": 171, "user_id": 11947145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/667e1f12f6b57a884b666fd59fe73863?s=128&d=identicon&r=PG&f=1", "display_name": "vitalyros", "link": "https://stackoverflow.com/users/11947145/vitalyros"}, "reply_to_user": {"reputation": 425, "user_id": 1312353, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/de52acd22dab1c76041b169ae53c1261?s=128&d=identicon&r=PG", "display_name": "kioli", "link": "https://stackoverflow.com/users/1312353/kioli"}, "edited": false, "score": 0, "creation_date": 1573568745, "post_id": 58820037, "comment_id": 103918340, "body": "Now I get it, you want to use multilevel paths. I don&#39;t know of any library that supports this, but I wrote you a small hack for Jackson."}, {"owner": {"reputation": 425, "user_id": 1312353, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/de52acd22dab1c76041b169ae53c1261?s=128&d=identicon&r=PG", "display_name": "kioli", "link": "https://stackoverflow.com/users/1312353/kioli"}, "edited": false, "score": 0, "creation_date": 1573585206, "post_id": 58820037, "comment_id": 103926772, "body": "Ah that looks nice indeed :) I guess it&#39;s impossible though to have a way to &quot;validate&quot; the <code>path</code> as if it was going down the fields of n instance of a class. I&#39;ll try to see if I can do with this, thousands thanks"}, {"owner": {"reputation": 171, "user_id": 11947145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/667e1f12f6b57a884b666fd59fe73863?s=128&d=identicon&r=PG&f=1", "display_name": "vitalyros", "link": "https://stackoverflow.com/users/11947145/vitalyros"}, "reply_to_user": {"reputation": 425, "user_id": 1312353, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/de52acd22dab1c76041b169ae53c1261?s=128&d=identicon&r=PG", "display_name": "kioli", "link": "https://stackoverflow.com/users/1312353/kioli"}, "edited": false, "score": 0, "creation_date": 1573637250, "post_id": 58820037, "comment_id": 103943018, "body": "I don&#39;t see it&#39;s impossible to do validation. You can implement it with a map of path (String) to type (Class) and a type check - e.g. check that when setInJson is called &#39;address:streetNumber&#39;  the value is an IntNode. Another (more canonical) way to do it would be a json schema (with a tool like this <a href=\"https://github.com/java-json-tools/json-schema-validator\" rel=\"nofollow noreferrer\">github.com/java-json-tools/json-schema-validator</a>), but it will not be optimal to use it after every modification, only after the whole json has been formed."}], "tags": [], "owner": {"reputation": 171, "user_id": 11947145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/667e1f12f6b57a884b666fd59fe73863?s=128&d=identicon&r=PG&f=1", "display_name": "vitalyros", "link": "https://stackoverflow.com/users/11947145/vitalyros"}, "is_accepted": false, "score": 0, "last_activity_date": 1573568503, "last_edit_date": 1573568503, "creation_date": 1573566149, "answer_id": 58820037, "question_id": 58819277, "link": "https://stackoverflow.com/questions/58819277/how-to-edit-nested-json-in-kotlin/58820037#58820037", "title": "How to edit nested JSON in kotlin", "body": "<p>Try ObjectNode in the Jackson (jackson-databind) library</p>\n\n<p>You can build it from scratch</p>\n\n<pre><code>val factory = JsonNodeFactory(true)\nval o = ObjectNode(factory)\no.set(\"id\", IntNode(15))\no.set(\"name\", TextNode(\"yourname\"))\no.set(\"lastName\", TextNode(\"lastname\"))\nval address = ObjectNode(factory)\no.set(\"address\", address)\naddress.set(\"streetName\", TextNode(\"Lenin\"))\naddress.set(\"streetNumber\", IntNode(5))\naddress.set(\"buildingNumber\", IntNode(15))\nprintln(o)\n</code></pre>\n\n<p>or load an existing json and modify it</p>\n\n<pre><code>val json = \"{\\n\" +\n        \"  \\\"id\\\": \\\"\\\",\\n\" +\n        \"  \\\"name\\\": \\\"\\\",\\n\" +\n        \"  \\\"age\\\": 0,\\n\" +\n        \"  \\\"address\\\": {\\n\" +\n        \"    \\\"streetName\\\": \\\"\\\",\\n\" +\n        \"    \\\"streetNumber\\\": 0\\n\" +\n        \"  }\\n\" +\n        \"}\"\nval o : ObjectNode = (ObjectMapper()).readTree(json) as ObjectNode\no.set(\"id\", IntNode(15))\no.set(\"name\", TextNode(\"yourname\"))\nval address = o.get(\"address\") as ObjectNode\naddress.set(\"streetName\", TextNode(\"Lenin\"))\naddress.set(\"streetNumber\", IntNode(5))\naddress.set(\"buildingNumber\", IntNode(15))\nprintln(o)\n</code></pre>\n\n<p>I don't know of a library that supports multilevel paths in Json.\nBut it's rather easy to implement something like this:</p>\n\n<pre><code>fun setInJson(root: ObjectNode, objectMapper: ObjectMapper, path: String, value: JsonNode) {\n    val splitPath = path.split(\":\")\n    val lastName = splitPath.last()\n    val notLastNames = splitPath.subList(0, splitPath.size - 1)\n    var node = root\n    notLastNames.forEach { nodeName -&gt;\n        node = (node.get(nodeName) as ObjectNode?) ?: {\n            val newNode = objectMapper.createObjectNode()\n            node.set(nodeName, newNode)\n            newNode\n        }()\n    }\n    node.set(lastName, value)\n}\n</code></pre>\n\n<p>can be used as:</p>\n\n<pre><code>val json = \"{\\n\" +\n        \"  \\\"id\\\": \\\"\\\",\\n\" +\n        \"  \\\"name\\\": \\\"\\\",\\n\" +\n        \"  \\\"age\\\": 0,\\n\" +\n        \"  \\\"address\\\": {\\n\" +\n        \"    \\\"streetName\\\": \\\"\\\",\\n\" +\n        \"    \\\"streetNumber\\\": 0\\n\" +\n        \"  }\\n\" +\n        \"}\"\n\nval om = ObjectMapper()\nval o : ObjectNode = (ObjectMapper()).readTree(json) as ObjectNode\nsetInJson(o, om, \"id\", IntNode(15))\nsetInJson(o, om, \"name\", TextNode(\"yourname\"))\nsetInJson(o, om, \"address:streetName\", TextNode(\"Lenin\"))\nsetInJson(o, om, \"address:streetNumber\", IntNode(5))\nprintln(o)\n</code></pre>\n"}], "owner": {"reputation": 425, "user_id": 1312353, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/de52acd22dab1c76041b169ae53c1261?s=128&d=identicon&r=PG", "display_name": "kioli", "link": "https://stackoverflow.com/users/1312353/kioli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1055, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1573570036, "creation_date": 1573563492, "last_edit_date": 1573570036, "question_id": 58819277, "link": "https://stackoverflow.com/questions/58819277/how-to-edit-nested-json-in-kotlin", "title": "How to edit nested JSON in kotlin", "body": "<p>I have a JSON model with nested fields which starts empty on which I need to, little by little, add/remove content.</p>\n\n<p>Here is the JSON structure with its default values</p>\n\n<pre><code>{\n  \"id\": \"\",\n  \"name\": \"\",\n  \"age\": 0,\n  \"address\": {\n    \"streetName\": \"\",\n    \"streetNumber\": 0\n  }\n}\n</code></pre>\n\n<p>So far I tried both to have the JSON expressed as <code>String</code> and via Kotlin <code>data class</code> (using Moshi or Gson libraries), but neither of which allows me to easily change nested properties.</p>\n\n<p>What I would like to have is a function that does the following</p>\n\n<pre><code>fun &lt;T&gt;addToJson(key: String, value: T) {\n  // Finds the key in the JSON, if nested, maybe expressing the whole path to it (i.e. address.streetName)\n  // Inserts the value in it\n  // Bonus points if there was a way to 'determine' the type of the field so that I don't risk to set for the key `streetNumber` a value that is `String`\n}\n</code></pre>\n\n<p>The ultimate goal would be to be able to call from anywhere in the app something like <code>addToJson(\"path.to.key\", 25)</code> with the key either expressed as <code>String</code> or in any other easy way</p>\n"}, {"tags": ["list", "sorting", "kotlin"], "comments": [{"owner": {"reputation": 2247, "user_id": 11342519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d481d7c4c6219c1453c46ed3b76f7535?s=128&d=identicon&r=PG&f=1", "display_name": "jsamol", "link": "https://stackoverflow.com/users/11342519/jsamol"}, "edited": false, "score": 0, "creation_date": 1573560090, "post_id": 58818243, "comment_id": 103913907, "body": "Have you tried anything so far?"}, {"owner": {"reputation": 1062, "user_id": 1517029, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e3caf22ea9f421383d431309989456a7?s=128&d=identicon&r=PG", "display_name": "The_ehT", "link": "https://stackoverflow.com/users/1517029/the-eht"}, "edited": false, "score": 0, "creation_date": 1573560283, "post_id": 58818243, "comment_id": 103914008, "body": "You just want to sort <code>b</code> ?"}, {"owner": {"reputation": 315, "user_id": 11560467, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-q1nwPe4JWJA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd6tp1zNb2bwnzflS9voC4IAbU6SA/mo/photo.jpg?sz=128", "display_name": "Mahesh Babariya", "link": "https://stackoverflow.com/users/11560467/mahesh-babariya"}, "reply_to_user": {"reputation": 1062, "user_id": 1517029, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e3caf22ea9f421383d431309989456a7?s=128&d=identicon&r=PG", "display_name": "The_ehT", "link": "https://stackoverflow.com/users/1517029/the-eht"}, "edited": false, "score": 0, "creation_date": 1573560520, "post_id": 58818243, "comment_id": 103914162, "body": "Yeah, @The_ehT, Need to sort server list (list b) based on list a"}, {"owner": {"reputation": 7872, "user_id": 7841, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/3KsHr.png?s=128&g=1", "display_name": "Leonardo Herrera", "link": "https://stackoverflow.com/users/7841/leonardo-herrera"}, "edited": false, "score": 0, "creation_date": 1573561131, "post_id": 58818243, "comment_id": 103914460, "body": "I don&#39;t think &quot;sort&quot; is the right word here. You want to filter your source list (<code>a</code>) by keeping only elements present in your target list that you get from the server (<code>b</code>)."}, {"owner": {"reputation": 1062, "user_id": 1517029, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e3caf22ea9f421383d431309989456a7?s=128&d=identicon&r=PG", "display_name": "The_ehT", "link": "https://stackoverflow.com/users/1517029/the-eht"}, "edited": false, "score": 0, "creation_date": 1573561190, "post_id": 58818243, "comment_id": 103914482, "body": "That&#39;s another way to look at it. What if he wants to sort <code>b</code> based on order of elements at <code>a</code>."}], "answers": [{"comments": [{"owner": {"reputation": 7872, "user_id": 7841, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/3KsHr.png?s=128&g=1", "display_name": "Leonardo Herrera", "link": "https://stackoverflow.com/users/7841/leonardo-herrera"}, "edited": false, "score": 1, "creation_date": 1573561180, "post_id": 58818561, "comment_id": 103914478, "body": "Is <code>toMutableList()</code> needed here?"}, {"owner": {"reputation": 7065, "user_id": 4017501, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-Mk9ZAlByQdc/AAAAAAAAAAI/AAAAAAAAAD8/TKM32IE8Mxs/photo.jpg?sz=128", "display_name": "cutiko", "link": "https://stackoverflow.com/users/4017501/cutiko"}, "reply_to_user": {"reputation": 7872, "user_id": 7841, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/3KsHr.png?s=128&g=1", "display_name": "Leonardo Herrera", "link": "https://stackoverflow.com/users/7841/leonardo-herrera"}, "edited": false, "score": 0, "creation_date": 1573561965, "post_id": 58818561, "comment_id": 103914906, "body": "@LeonardoHerrera you are right is not because the filter method will return another list, my mistake is because I was writing the method using arrays and then realize it was a list, got confused with the title, thanks it should be updated now"}], "tags": [], "owner": {"reputation": 7065, "user_id": 4017501, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-Mk9ZAlByQdc/AAAAAAAAAAI/AAAAAAAAAD8/TKM32IE8Mxs/photo.jpg?sz=128", "display_name": "cutiko", "link": "https://stackoverflow.com/users/4017501/cutiko"}, "is_accepted": false, "score": 4, "last_activity_date": 1573561964, "last_edit_date": 1573561964, "creation_date": 1573560947, "answer_id": 58818561, "question_id": 58818243, "link": "https://stackoverflow.com/questions/58818243/sort-arraylist-based-on-another-arraylist-in-kotlin/58818561#58818561", "title": "Sort ArrayList based on Another ArrayList in kotlin", "body": "<p>You are not trying to sort, you are trying to filter</p>\n\n<pre><code>fun filterByServer(server: List&lt;String&gt;, local: List&lt;String&gt;)\n        = local.filter { value -&gt; server.contains(value) }\n</code></pre>\n\n<p><code>filter</code> takes a predicate in this case if your local value is contained on the server list</p>\n"}, {"comments": [{"owner": {"reputation": 2247, "user_id": 11342519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d481d7c4c6219c1453c46ed3b76f7535?s=128&d=identicon&r=PG&f=1", "display_name": "jsamol", "link": "https://stackoverflow.com/users/11342519/jsamol"}, "edited": false, "score": 1, "creation_date": 1573561648, "post_id": 58818566, "comment_id": 103914748, "body": "There is no need to map <code>b</code> twice. You can just use <code>sortedBy</code>: <code>b.sortedBy { a.indexOf(it) }</code>"}, {"owner": {"reputation": 1062, "user_id": 1517029, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e3caf22ea9f421383d431309989456a7?s=128&d=identicon&r=PG", "display_name": "The_ehT", "link": "https://stackoverflow.com/users/1517029/the-eht"}, "reply_to_user": {"reputation": 2247, "user_id": 11342519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d481d7c4c6219c1453c46ed3b76f7535?s=128&d=identicon&r=PG&f=1", "display_name": "jsamol", "link": "https://stackoverflow.com/users/11342519/jsamol"}, "edited": false, "score": 0, "creation_date": 1573562317, "post_id": 58818566, "comment_id": 103915116, "body": "Oh yes, that&#39;s better. I completely forgot <code>sortedBy</code>. thanks for pointing out."}, {"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 1, "creation_date": 1573576034, "post_id": 58818566, "comment_id": 103922458, "body": "I don&#39;t agree the shorter code is necessary better: sorting in general makes <code>O(N*logN)</code> comparisons, where N is the number of items in the sorted list, and for each comparison it needs to perform two <code>a.indexOf(it)</code> operations, that themselves are <code>O(M)</code>, where M is the number of elements in the first list. So the resulting complexity would be <code>O(N*logN*2M)</code>. And the original approach with mapping indices has the complexity of only <code>O(N*(M + logN + 1))</code>. For large lists this difference can be significant."}], "tags": [], "owner": {"reputation": 1062, "user_id": 1517029, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e3caf22ea9f421383d431309989456a7?s=128&d=identicon&r=PG", "display_name": "The_ehT", "link": "https://stackoverflow.com/users/1517029/the-eht"}, "is_accepted": true, "score": 2, "last_activity_date": 1573717029, "last_edit_date": 1573717029, "creation_date": 1573560961, "answer_id": 58818566, "question_id": 58818243, "link": "https://stackoverflow.com/questions/58818243/sort-arraylist-based-on-another-arraylist-in-kotlin/58818566#58818566", "title": "Sort ArrayList based on Another ArrayList in kotlin", "body": "<p>You can use <code>map</code> and <code>sorted</code> to achieve that easily on the condition that <code>a</code> do not have repetition -</p>\n\n<pre><code>val a = listOf(\"G\", \"F\", \"E\", \"D\", \"C\", \"B\", \"A\")\nval b = listOf(\"A\", \"G\", \"C\")\nval there = b.map{ v -&gt; a.indexOf(v)}.sorted().map{v -&gt; a[v]}\nprintln(there)\n</code></pre>\n\n<p>Output:: [G, C, A]</p>\n\n<p>Alternate sorter way as pointed by @jsamol in comment - </p>\n\n<pre><code>val there = b.sortedBy { a.indexOf(it) }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1062, "user_id": 4028009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52d9e87ce304217b5b34a44059e5fd77?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeny  Bovykin", "link": "https://stackoverflow.com/users/4028009/evgeny-bovykin"}, "edited": false, "score": 1, "creation_date": 1573585947, "post_id": 58818678, "comment_id": 103927083, "body": "Why not use <code>b.sortedBy { indexedA[it] }</code>?"}, {"owner": {"reputation": 171, "user_id": 11947145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/667e1f12f6b57a884b666fd59fe73863?s=128&d=identicon&r=PG&f=1", "display_name": "vitalyros", "link": "https://stackoverflow.com/users/11947145/vitalyros"}, "reply_to_user": {"reputation": 1062, "user_id": 4028009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52d9e87ce304217b5b34a44059e5fd77?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeny  Bovykin", "link": "https://stackoverflow.com/users/4028009/evgeny-bovykin"}, "edited": false, "score": 0, "creation_date": 1573633458, "post_id": 58818678, "comment_id": 103941082, "body": "yup, <code>sortedBy</code> looks like a better (shorter) solution"}], "tags": [], "owner": {"reputation": 171, "user_id": 11947145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/667e1f12f6b57a884b666fd59fe73863?s=128&d=identicon&r=PG&f=1", "display_name": "vitalyros", "link": "https://stackoverflow.com/users/11947145/vitalyros"}, "is_accepted": false, "score": 1, "last_activity_date": 1573561372, "creation_date": 1573561372, "answer_id": 58818678, "question_id": 58818243, "link": "https://stackoverflow.com/questions/58818243/sort-arraylist-based-on-another-arraylist-in-kotlin/58818678#58818678", "title": "Sort ArrayList based on Another ArrayList in kotlin", "body": "<p>You can create a custom comparator based on the indices of letters in the <strong>a</strong> list. Then use the List.sortedWith function to sort the <strong>b</strong> list.\ne.g.</p>\n\n<pre><code>val a = listOf(\"G\", \"F\", \"E\", \"D\", \"C\", \"B\", \"A\")\nval b = listOf(\"A\", \"G\", \"C\")\nval indexedA: Map&lt;String, Int&gt; = a.mapIndexed { index, s -&gt; s to index }.toMap()\nval comparator = object: Comparator&lt;String&gt; {\n    override fun compare(s1: String, s2: String): Int {\n        val i1 = indexedA[s1]\n        val i2 = indexedA[s2]\n        return if (i1 == null || i2 == null) throw RuntimeException(\"unable to compare $s1 to $s2\")\n        else i1.compareTo(i2)\n    }\n}\nval c = b.sortedWith(comparator)\nSystem.out.println(c)\n</code></pre>\n\n<p>I've converted the list <strong>a</strong> to a map: Letter to Index as an optimization.</p>\n"}, {"tags": [], "owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "is_accepted": false, "score": 0, "last_activity_date": 1573580507, "creation_date": 1573580507, "answer_id": 58823955, "question_id": 58818243, "link": "https://stackoverflow.com/questions/58818243/sort-arraylist-based-on-another-arraylist-in-kotlin/58823955#58823955", "title": "Sort ArrayList based on Another ArrayList in kotlin", "body": "<p>If I understand the requirement, what we're really doing here is <em>filtering</em> the first list, according to whether its elements are in the second.\u00a0 So another approach would be to do that explicitly.</p>\n\n<pre><code>val a = listOf(\"G\", \"F\", \"E\", \"D\", \"C\", \"B\", \"A\")\nval b = listOf(\"A\", \"G\", \"C\").toSet()   // or just setOf(\u2026)\nval there = a.filter{ it in b }\n</code></pre>\n\n<p>There's a bit more processing in creating the set, but the rest is faster and scales better, as there's no sorting or scanning, and checking for presence in a set is very fast.</p>\n\n<p>(In fact, that would work fine if <code>b</code> were a list; but that wouldn't perform as well for big lists.)</p>\n"}], "owner": {"reputation": 315, "user_id": 11560467, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-q1nwPe4JWJA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd6tp1zNb2bwnzflS9voC4IAbU6SA/mo/photo.jpg?sz=128", "display_name": "Mahesh Babariya", "link": "https://stackoverflow.com/users/11560467/mahesh-babariya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1663, "favorite_count": 0, "accepted_answer_id": 58818566, "answer_count": 4, "score": 0, "last_activity_date": 1573717029, "creation_date": 1573559892, "question_id": 58818243, "link": "https://stackoverflow.com/questions/58818243/sort-arraylist-based-on-another-arraylist-in-kotlin", "title": "Sort ArrayList based on Another ArrayList in kotlin", "body": "<p>I have a list of <code>String</code> as below:-</p>\n\n<pre><code>val a = listOf(\"G\", \"F\", \"E\", \"D\", \"C\", \"B\", \"A\")\n</code></pre>\n\n<p>I will get another list from the server. For example:-</p>\n\n<pre><code>val b = listOf(\"A\", \"G\", \"C\")\n</code></pre>\n\n<p>List from the server may contain fewer elements or more elements but will not contain elements other than the first list.</p>\n\n<p>So, after sorting output should be like </p>\n\n<blockquote>\n  <p>// G, C, A</p>\n</blockquote>\n"}, {"tags": ["java", "android", "kotlin", "dagger-2"], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 6023011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebcf11d9cbf3bf7b86c0821dc39d34fc?s=128&d=identicon&r=PG&f=1", "display_name": "A. Albrg", "link": "https://stackoverflow.com/users/6023011/a-albrg"}, "edited": false, "score": 0, "creation_date": 1573560745, "post_id": 58817956, "comment_id": 103914289, "body": "Can I have a connection with you man, I am new in dagger and maybe I need some help if you don&#39;t mind"}, {"owner": {"reputation": 2247, "user_id": 11342519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d481d7c4c6219c1453c46ed3b76f7535?s=128&d=identicon&r=PG&f=1", "display_name": "jsamol", "link": "https://stackoverflow.com/users/11342519/jsamol"}, "reply_to_user": {"reputation": 133, "user_id": 6023011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebcf11d9cbf3bf7b86c0821dc39d34fc?s=128&d=identicon&r=PG&f=1", "display_name": "A. Albrg", "link": "https://stackoverflow.com/users/6023011/a-albrg"}, "edited": false, "score": 0, "creation_date": 1573562445, "post_id": 58817956, "comment_id": 103915192, "body": "@A.Albrg We can discuss any other problems you are facing in chat: <a href=\"https://chat.stackoverflow.com/rooms/202206/discussion-between-jsamol-and-a-albrg\">chat.stackoverflow.com/rooms/202206/&hellip;</a>"}], "tags": [], "owner": {"reputation": 2247, "user_id": 11342519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d481d7c4c6219c1453c46ed3b76f7535?s=128&d=identicon&r=PG&f=1", "display_name": "jsamol", "link": "https://stackoverflow.com/users/11342519/jsamol"}, "is_accepted": true, "score": 0, "last_activity_date": 1573559597, "last_edit_date": 1573559597, "creation_date": 1573558756, "answer_id": 58817956, "question_id": 58817498, "link": "https://stackoverflow.com/questions/58817498/problem-dagger-cannot-be-provided-without-an-provides-annotated-method-when-i/58817956#58817956", "title": "Problem Dagger Cannot be provided without an @Provides-annotated method, When I use @Named annotation", "body": "<p>Following <a href=\"https://kotlinlang.org/docs/reference/annotations.html#annotation-use-site-targets\" rel=\"nofollow noreferrer\">the documentation</a>:</p>\n\n<blockquote>\n  <p>When you're annotating a property or a primary constructor parameter, there are multiple Java elements which are generated from the corresponding Kotlin element, and therefore multiple possible locations for the annotation in the generated Java bytecode. To specify how exactly the annotation should be generated.</p>\n</blockquote>\n\n<p>when using <code>Named</code> providers with Kotlin you have to explicitly annotate the <strong>field</strong> with the <code>@field</code> annotation:</p>\n\n<pre><code>class IdentityRepository @Inject constructor() {\n\n    @Inject\n    @field:Named(\"NOT_AUTH_IDENTITY_SERVICE\")\n    lateinit var identityService: IdentityService\n...\n}\n</code></pre>\n\n<p>Or you could just move the property to a constructor, since you are also using constructor injection:</p>\n\n<pre><code>class IdentityRepository @Inject constructor(\n    @Named(\"NOT_AUTH_IDENTITY_SERVICE\") val identityService: IdentityService\n) {\n...\n}\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 6023011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebcf11d9cbf3bf7b86c0821dc39d34fc?s=128&d=identicon&r=PG&f=1", "display_name": "A. Albrg", "link": "https://stackoverflow.com/users/6023011/a-albrg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "accepted_answer_id": 58817956, "answer_count": 1, "score": 0, "last_activity_date": 1573559597, "creation_date": 1573557090, "question_id": 58817498, "link": "https://stackoverflow.com/questions/58817498/problem-dagger-cannot-be-provided-without-an-provides-annotated-method-when-i", "title": "Problem Dagger Cannot be provided without an @Provides-annotated method, When I use @Named annotation", "body": "<p>I am facing a problem when I put the @Named annotation in the AppModule and here is my code, The problem appears only when I add the @Named annotation to both the 'AppModule' and the 'IdentityRepository', but when I remove it from both everything is fine</p>\n\n<blockquote>\n  <p>Note that I have to use @Named because I want  to create a second\n  function with the same DataType in the same Module</p>\n</blockquote>\n\n<pre><code>@Module\nobject AppModule {\n...\n\n    @Provides\n    @JvmStatic\n    @Singleton\n    @Named(\"NOT_AUTH_IDENTITY_SERVICE\")\n    fun provideIdentityService(retrofit: Retrofit): IdentityService =\n        retrofit.create(IdentityService::class.java)\n}\n</code></pre>\n\n<p>and when I use it the IdentityRepository</p>\n\n<pre><code>class IdentityRepository @Inject constructor() {\n\n    @Inject\n    @Named(\"NOT_AUTH_IDENTITY_SERVICE\")\n    lateinit var identityService: IdentityService\n...\n}\n</code></pre>\n\n<p>I am facing this error </p>\n\n<blockquote>\n  <p>error: [Dagger/MissingBinding] solutions IdentityService cannot be\n  provided without an @Provides-annotated method. public abstract\n  interface AppComponent extends\n  dagger.android.AndroidInjector\n  { ...</p>\n</blockquote>\n"}, {"tags": ["android", "kotlin", "material-components", "material-components-android"], "comments": [{"owner": {"reputation": 186020, "user_id": 2016562, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2433495de6d2b99746f8e25344209fa7?s=128&d=identicon&r=PG", "display_name": "Gabriele Mariotti", "link": "https://stackoverflow.com/users/2016562/gabriele-mariotti"}, "edited": false, "score": 0, "creation_date": 1573554479, "post_id": 58816542, "comment_id": 103911085, "body": "It is quite difficult to help you without details. Post your app theme and for example a layout with a button to start."}, {"owner": {"reputation": 186020, "user_id": 2016562, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2433495de6d2b99746f8e25344209fa7?s=128&d=identicon&r=PG", "display_name": "Gabriele Mariotti", "link": "https://stackoverflow.com/users/2016562/gabriele-mariotti"}, "edited": false, "score": 0, "creation_date": 1573555507, "post_id": 58816542, "comment_id": 103911560, "body": "Your MaterialButton should have a colorPrimary as background and colorOnPrimary as text color."}, {"owner": {"reputation": 131, "user_id": 12360298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a824bb6f7cd986041f5c627f4fb40f1e?s=128&d=identicon&r=PG&f=1", "display_name": "yao", "link": "https://stackoverflow.com/users/12360298/yao"}, "reply_to_user": {"reputation": 186020, "user_id": 2016562, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2433495de6d2b99746f8e25344209fa7?s=128&d=identicon&r=PG", "display_name": "Gabriele Mariotti", "link": "https://stackoverflow.com/users/2016562/gabriele-mariotti"}, "edited": false, "score": 0, "creation_date": 1573555757, "post_id": 58816542, "comment_id": 103911703, "body": "@GabrieleMariotti but I don&#39;t have this issue when using &quot;com.google.android.material:material:1.0.0&quot;, is this a new format for version 1.1.0? The styles actually working, just the colors not working."}, {"owner": {"reputation": 186020, "user_id": 2016562, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2433495de6d2b99746f8e25344209fa7?s=128&d=identicon&r=PG", "display_name": "Gabriele Mariotti", "link": "https://stackoverflow.com/users/2016562/gabriele-mariotti"}, "edited": false, "score": 0, "creation_date": 1573556081, "post_id": 58816542, "comment_id": 103911830, "body": "The 1.1.0 changes a lot of features in the library (the 1.0.0 was released 1 year ago) and changes the theme. Try to use a <a href=\"https://github.com/material-components/material-components-android/blob/master/docs/getting-started.md#bridge-themes-bridge-themes\" rel=\"nofollow noreferrer\">Theme.MaterialComponents.Light.DarkActionBar.Bridge</a> in your case."}, {"owner": {"reputation": 131, "user_id": 12360298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a824bb6f7cd986041f5c627f4fb40f1e?s=128&d=identicon&r=PG&f=1", "display_name": "yao", "link": "https://stackoverflow.com/users/12360298/yao"}, "reply_to_user": {"reputation": 186020, "user_id": 2016562, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2433495de6d2b99746f8e25344209fa7?s=128&d=identicon&r=PG", "display_name": "Gabriele Mariotti", "link": "https://stackoverflow.com/users/2016562/gabriele-mariotti"}, "edited": false, "score": 0, "creation_date": 1573571693, "post_id": 58816542, "comment_id": 103920029, "body": "@GabrieleMariotti thanks but still not really working.. Gonna do more researches"}, {"owner": {"reputation": 2196, "user_id": 1950784, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d6ffbeaaaee5e9cf2819568670173e4c?s=128&d=identicon&r=PG", "display_name": "Rashad.Z", "link": "https://stackoverflow.com/users/1950784/rashad-z"}, "edited": false, "score": 0, "creation_date": 1580831508, "post_id": 58816542, "comment_id": 106223318, "body": "did it work for you @yao?"}, {"owner": {"reputation": 131, "user_id": 12360298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a824bb6f7cd986041f5c627f4fb40f1e?s=128&d=identicon&r=PG&f=1", "display_name": "yao", "link": "https://stackoverflow.com/users/12360298/yao"}, "reply_to_user": {"reputation": 2196, "user_id": 1950784, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d6ffbeaaaee5e9cf2819568670173e4c?s=128&d=identicon&r=PG", "display_name": "Rashad.Z", "link": "https://stackoverflow.com/users/1950784/rashad-z"}, "edited": false, "score": 0, "creation_date": 1580919437, "post_id": 58816542, "comment_id": 106258263, "body": "@Rashad.Z sorry I ended up gave up on updating it.."}, {"owner": {"reputation": 2196, "user_id": 1950784, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d6ffbeaaaee5e9cf2819568670173e4c?s=128&d=identicon&r=PG", "display_name": "Rashad.Z", "link": "https://stackoverflow.com/users/1950784/rashad-z"}, "edited": false, "score": 0, "creation_date": 1580988085, "post_id": 58816542, "comment_id": 106282929, "body": "@yao you can check my answer on supporting dark and light theme in this post <a href=\"https://stackoverflow.com/a/60093738/1950784\">stackoverflow.com/a/60093738/1950784</a>"}], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 7169219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e63135033a43bb48ccaff0112de3d0f?s=128&d=identicon&r=PG&f=1", "display_name": "Lawnio", "link": "https://stackoverflow.com/users/7169219/lawnio"}, "edited": false, "score": 0, "creation_date": 1581084394, "post_id": 60075236, "comment_id": 106322172, "body": "Bridge worked for me but only for a part. The textcolor in my appbar has changed and &quot;colorOnPrimary&quot; in my theme has not resolved my problem. ideas?"}], "tags": [], "owner": {"reputation": 2986, "user_id": 687255, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/mSQhj.jpg?s=128&g=1", "display_name": "adek", "link": "https://stackoverflow.com/users/687255/adek"}, "is_accepted": false, "score": 2, "last_activity_date": 1580903607, "creation_date": 1580903607, "answer_id": 60075236, "question_id": 58816542, "link": "https://stackoverflow.com/questions/58816542/updating-android-material-components-version-from-1-0-0-to-1-1-0-color-all-mess/60075236#60075236", "title": "Updating Android Material Components version from 1.0.0 to 1.1.0, color all messed up", "body": "<p>We have officially Material Components 1.1.0</p>\n\n<p>Try to use <code>parent=\"Theme.MaterialComponents.Light.DarkActionBar.Bridge\"</code></p>\n\n<p>Take a look at documentation. \n<a href=\"https://github.com/material-components/material-components-android/blob/master/docs/getting-started.md#bridge-themes-bridge-themes\" rel=\"nofollow noreferrer\">https://github.com/material-components/material-components-android/blob/master/docs/getting-started.md#bridge-themes-bridge-themes</a></p>\n\n<p>If you cannot change your theme to inherit from a Material Components theme, you can inherit from a Material Components Bridge theme.</p>\n\n<pre><code>&lt;style name=\"Theme.MyApp\" parent=\"**Theme.MaterialComponents.Light.Bridge**\"&gt;\n    &lt;!-- ... --&gt;\n&lt;/style&gt;\n</code></pre>\n\n<p>In your case change:</p>\n\n<pre><code>&lt;style name=\"AppTheme\" parent=\"Theme.MaterialComponents.Light.DarkActionBar\"&gt;\n</code></pre>\n\n<p>To:</p>\n\n<pre><code>&lt;style name=\"AppTheme\" parent=\"Theme.MaterialComponents.Light.DarkActionBar.Bridge\"&gt;\n</code></pre>\n"}], "owner": {"reputation": 131, "user_id": 12360298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a824bb6f7cd986041f5c627f4fb40f1e?s=128&d=identicon&r=PG&f=1", "display_name": "yao", "link": "https://stackoverflow.com/users/12360298/yao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 789, "favorite_count": 0, "answer_count": 1, "score": 7, "last_activity_date": 1580903607, "creation_date": 1573553972, "last_edit_date": 1573571774, "question_id": 58816542, "link": "https://stackoverflow.com/questions/58816542/updating-android-material-components-version-from-1-0-0-to-1-1-0-color-all-mess", "title": "Updating Android Material Components version from 1.0.0 to 1.1.0, color all messed up", "body": "<p>After I update the material components version from 1.0.0 to 1.1.1, the colors inside app messed up. For example color accent not working, buttons color not applied, bottom navigation view become black color.. Please help, thanks in advance!</p>\n\n<p>values/style.xml (style here not working):</p>\n\n<pre><code>&lt;style name=\"AppTheme\" parent=\"Theme.MaterialComponents.Light.DarkActionBar\"&gt;\n    &lt;item name=\"colorPrimary\"&gt;@color/colorPrimary&lt;/item&gt;\n    &lt;item name=\"colorPrimaryDark\"&gt;@color/colorPrimaryDark&lt;/item&gt;\n    &lt;item name=\"colorAccent\"&gt;@color/colorAccent&lt;/item&gt;\n&lt;/style&gt;\n&lt;style name=\"Button\" parent=\"@style/Widget.MaterialComponents.Button\"&gt;\n    &lt;item name=\"cornerRadius\"&gt;@dimen/button_radius&lt;/item&gt;\n    &lt;item name=\"fontFamily\"&gt;@font/lato_regular_400&lt;/item&gt;\n    &lt;item name=\"android:textAllCaps\"&gt;false&lt;/item&gt;\n&lt;/style&gt;\n&lt;style name=\"Button.Next\"&gt;\n    &lt;item name=\"fontFamily\"&gt;@font/lato_bold_700&lt;/item&gt;\n    &lt;item name=\"android:textSize\"&gt;@dimen/_18pxsp&lt;/item&gt;\n    &lt;item name=\"android:textAllCaps\"&gt;false&lt;/item&gt;\n    &lt;item name=\"cornerRadius\"&gt;@dimen/_40sdp&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n\n<p>values-v23/style.xml (style here is working):</p>\n\n<pre><code>&lt;style name=\"AppTheme\" parent=\"Theme.MaterialComponents.Light.DarkActionBar\"&gt;\n    &lt;item name=\"colorPrimary\"&gt;@color/colorPrimary&lt;/item&gt;\n    &lt;item name=\"colorPrimaryDark\"&gt;@color/colorPrimaryDark&lt;/item&gt;\n    &lt;item name=\"colorAccent\"&gt;@color/colorAccent&lt;/item&gt;\n    &lt;item name=\"android:windowLightStatusBar\"&gt;true&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n\n<p>button.xml:</p>\n\n<pre><code>&lt;com.google.android.material.button.MaterialButton\n        android:id=\"@+id/btn_save\"\n        style=\"@style/Button.Next\"\n        android:layout_width=\"@dimen/button_width\"\n        android:onClick=\"@{click}\"\n        android:layout_height=\"@dimen/button_height\"\n        android:layout_marginBottom=\"@dimen/_20pxdp\"\n        android:text=\"@{buttonText}\" /&gt;\n</code></pre>\n\n<p>But even the v23 style is working, the colors all still very strange, compare to before update material components version. Very hard to apply back the same colors.</p>\n"}, {"tags": ["android", "kotlin", "mvvm", "android-context", "kodein"], "comments": [{"owner": {"reputation": 2400, "user_id": 4762282, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a87249e3029c3daae0d473b1dc712484?s=128&d=identicon&r=PG&f=1", "display_name": "Ircover", "link": "https://stackoverflow.com/users/4762282/ircover"}, "edited": false, "score": 0, "creation_date": 1573558146, "post_id": 58816439, "comment_id": 103912897, "body": "Can you post message of raised exception?"}], "answers": [{"tags": [], "owner": {"reputation": 135, "user_id": 11216745, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-O0mULpSvmy8/AAAAAAAAAAI/AAAAAAAAAKM/cm0hKdhXuhQ/photo.jpg?sz=128", "display_name": "Hern&#226;ni Pereira", "link": "https://stackoverflow.com/users/11216745/hern%c3%a2ni-pereira"}, "is_accepted": true, "score": 1, "last_activity_date": 1573560053, "creation_date": 1573560053, "answer_id": 58818287, "question_id": 58816439, "link": "https://stackoverflow.com/questions/58816439/android-pass-context-in-object/58818287#58818287", "title": "Android Pass Context in object", "body": "<p>In the mainActivity:</p>\n\n<pre><code>class ExampleApplication : Application(), KodeinAware {\nlateinit var context: Context\noverride val kodein = Kodein.lazy {\n    import(androidXModule(this@ExampleApplication))\n    bind() from singleton { ExampleApiService }\n    bind() from singleton { AuthenticationApi() }\n    bind() from singleton { NetworkConnectivityInterceptor(instance()) }\n    bind() from singleton { ExampleDataBase(instance()) }\n    bind&lt;UserRepository&gt;() with singleton { UserRepository(instance(), instance()) }\n    bind() from provider { AuthenticationLoginViewModelFactory(instance(),instance()) }\n    bind() from provider { CreateAccountViewModelFactory(instance(),instance()) }\n    bind() from provider { PasswordViewModelFactory(instance(),instance()) }\n}\n\noverride fun onCreate() {\n    super.onCreate()\n    DfreeApiService.init(this)\n}\n</code></pre>\n\n<p>}</p>\n\n<p>And in the object DfreeApiSercive:</p>\n\n<pre><code>object DfreeApiService  {\n\nprivate lateinit var application: Application\n\nfun init(application: Application){\n    this.application=application\n}\n\n private lateinit var interceptor: HttpLoggingInterceptor\nprivate lateinit var okHttpClient: OkHttpClient\nprivate lateinit var networkConnectivityInterceptor: NetworkConnectivityInterceptor\n\n\nval client: Retrofit\nget() {\n    networkConnectivityInterceptor= NetworkConnectivityInterceptor(application.applicationContext)\n    interceptor = HttpLoggingInterceptor()\n    interceptor.level = HttpLoggingInterceptor.Level.BODY\n    okHttpClient= OkHttpClient.Builder()\n        .addInterceptor(networkConnectivityInterceptor)\n        .addInterceptor(interceptor)\n...\n}\n}\n</code></pre>\n\n<p>And with this way you can import the context to an object.</p>\n"}], "owner": {"reputation": 135, "user_id": 11216745, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-O0mULpSvmy8/AAAAAAAAAAI/AAAAAAAAAKM/cm0hKdhXuhQ/photo.jpg?sz=128", "display_name": "Hern&#226;ni Pereira", "link": "https://stackoverflow.com/users/11216745/hern%c3%a2ni-pereira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 993, "favorite_count": 0, "accepted_answer_id": 58818287, "answer_count": 1, "score": 0, "last_activity_date": 1573560053, "creation_date": 1573553618, "last_edit_date": 1573557553, "question_id": 58816439, "link": "https://stackoverflow.com/questions/58816439/android-pass-context-in-object", "title": "Android Pass Context in object", "body": "<p>I need to pass the Application Context to an object. This is to call a function to intercept in the okhttpClient, my connection service. I'am using an object class to build the connection to the server with retrofit and an external interface with my services.</p>\n\n<pre><code>object DfreeApiService  {\n\n   private lateinit var interceptor: HttpLoggingInterceptor\n   private lateinit var okHttpClient: OkHttpClient\n   private lateinit var networkConnectivityInterceptor: NetworkConnectivityInterceptor\n\n   val client: Retrofit\n   get() {\n       networkConnectivityInterceptor= NetworkConnectivityInterceptor() //cannot pass the context here\n       interceptor = HttpLoggingInterceptor()\n       interceptor.level = HttpLoggingInterceptor.Level.BODY\n       okHttpClient= OkHttpClient.Builder()\n          // .addInterceptor(networkConnectivityInterceptor)\n           .addInterceptor(interceptor)\n           .connectionSpecs(\n               Arrays.asList(ConnectionSpec.MODERN_TLS, ConnectionSpec.CLEARTEXT)\n           )\n           .followRedirects(true)\n           .followSslRedirects(true)\n           .retryOnConnectionFailure(true)\n           .connectTimeout(20, TimeUnit.SECONDS)\n           .readTimeout(20, TimeUnit.SECONDS)\n           .writeTimeout(20, TimeUnit.SECONDS)\n           .cache(null)\n           .build()\n\n           val retrofit: Retrofit =Retrofit.Builder()\n               .client(okHttpClient)\n               .baseUrl(\"http://example:2000/\")\n               .addConverterFactory(GsonConverterFactory.create())\n               .build()\n\n       return retrofit\n\n   }\n\n}\n</code></pre>\n\n<p>And in the following code is my <strong>interface:</strong></p>\n\n<pre><code>interface AuthenticationApi {\n\n    @POST(\"ws/login\")\n    suspend fun login(@Body userInfo: UserInfo): Response&lt;UserReponse&gt;\n\n    @POST(\"ws/register\")\n    suspend fun register(@Body userInfo: UserRegister): Response&lt;UserReponse&gt;\n\n    @POST(\"ws/pw_recover\")\n    suspend fun pw_recover(@Body email: String): Response&lt;BaseResponse&gt;\n\n    @POST(\"ws/login\")\n    suspend fun loginGoogle(@Body user: GoogleUser) : Response&lt;UserReponse&gt;\n\n\n    companion object{\n        operator fun invoke():AuthenticationApi{\n            return DfreeApiService.client.create(AuthenticationApi::class.java)\n        }\n    }\n  }\n</code></pre>\n\n<p>I'am using mvvm and kodein.\nWithout the internet interceptor the app crashes when there is no internet.\n<strong>My interceptor:</strong></p>\n\n<pre><code>    class NetworkConnectivityInterceptor(\n    context: Context\n    ) : Interceptor {\n\n    private val applicationContext = context\n\n    @RequiresApi(Build.VERSION_CODES.M)\n    override fun intercept(chain: Interceptor.Chain): Response {\n        if (!isInternetAvailable())\n            throw NoInternetException(\"Make sure you have an active data connection\")\n        return chain.proceed(chain.request())\n    }\n\n    @RequiresApi(Build.VERSION_CODES.M)\n    private fun isInternetAvailable(): Boolean {\n        var result = false\n        val connectivityManager =\n            applicationContext.getSystemService(Application.CONNECTIVITY_SERVICE) as ConnectivityManager?\n        connectivityManager?.let {\n            it.getNetworkCapabilities(connectivityManager.activeNetwork)?.apply {\n                result = when {\n                    hasTransport(NetworkCapabilities.TRANSPORT_WIFI) -&gt; true\n                    hasTransport(NetworkCapabilities.TRANSPORT_CELLULAR) -&gt; true\n                    else -&gt; false\n                }\n\n            }\n        }\n        return result\n    }\n}\n</code></pre>\n\n<p>Thanks for your attention</p>\n"}, {"tags": ["android", "kotlin", "android-context", "behavior"], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 12262856, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mC5AUVs3M3kelXYe9N5sURQpU9omVc50vnUukEv=k-s128", "display_name": "Stefan Perlic", "link": "https://stackoverflow.com/users/12262856/stefan-perlic"}, "is_accepted": false, "score": 0, "last_activity_date": 1573554356, "creation_date": 1573554356, "answer_id": 58816668, "question_id": 58816437, "link": "https://stackoverflow.com/questions/58816437/how-use-context-from-constructor/58816668#58816668", "title": "How use context from constructor?", "body": "<p>I think what you're looking for is this:</p>\n\n<pre><code>  class FabBehavior(private val context: Context?, attrs: AttributeSet?) : CoordinatorLayout.Behavior&lt;FloatingActionButton&gt;(context, attrs) {\n\n      fun doSomething() {\n       context.invokeMethodOnContext()\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 3391, "user_id": 6387618, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f5af475c8ce7bf4b9d300e40a4f9b6c3?s=128&d=identicon&r=PG", "display_name": "Morozov", "link": "https://stackoverflow.com/users/6387618/morozov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573554598, "creation_date": 1573553606, "last_edit_date": 1573554598, "question_id": 58816437, "link": "https://stackoverflow.com/questions/58816437/how-use-context-from-constructor", "title": "How use context from constructor?", "body": "<p>Right now i have class which implement <code>Behavior</code> and i use context with next code, can i simplify it?</p>\n\n<pre><code>class FabBehavior: CoordinatorLayout.Behavior&lt;FloatingActionButton&gt; {\n\n    private var myContext: Context? = null\n    private val fabDefaultBottomMargin = myContext?.resources?.getDimension(R.dimen.dp_16)?.toInt() ?: 0\n\n    constructor() : super()\n    constructor(context: Context, attrs: AttributeSet) : super(context, attrs) {\n        myContext = context\n    }\n</code></pre>\n\n<p><strong>UPDATE</strong>:</p>\n\n<p>Also i tried smth like this:</p>\n\n<pre><code>class FabBehavior(context: Context, attrs: AttributeSet?): CoordinatorLayout.Behavior&lt;FloatingActionButton&gt;(context, attrs) {\n\n    private val fabDefaultBottomMargin = context.resources?.getDimension(R.dimen.dp_16)?.toInt() ?: 0\n\n    constructor(context: Context) : this(context, null)\n</code></pre>\n"}, {"tags": ["android", "firebase", "kotlin", "google-cloud-firestore"], "answers": [{"comments": [{"owner": {"reputation": 409, "user_id": 10424056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e97ce582113f9054c3165b8669feaff?s=128&d=identicon&r=PG&f=1", "display_name": "Apri", "link": "https://stackoverflow.com/users/10424056/apri"}, "edited": false, "score": 0, "creation_date": 1573555082, "post_id": 58816452, "comment_id": 103911380, "body": "Okay, but when I have no internet connection, the dialog would still not be dismissed because <code>onSuccess()</code> would not be called."}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "reply_to_user": {"reputation": 409, "user_id": 10424056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e97ce582113f9054c3165b8669feaff?s=128&d=identicon&r=PG&f=1", "display_name": "Apri", "link": "https://stackoverflow.com/users/10424056/apri"}, "edited": false, "score": 0, "creation_date": 1573555448, "post_id": 58816452, "comment_id": 103911536, "body": "Yes, that&#39;s correct. The <code>ProgressDialog</code> will be dismissed once you regain internet connection, when <code>onSuccess()</code> is triggered. Isn&#39;t this what you want?"}, {"owner": {"reputation": 409, "user_id": 10424056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e97ce582113f9054c3165b8669feaff?s=128&d=identicon&r=PG&f=1", "display_name": "Apri", "link": "https://stackoverflow.com/users/10424056/apri"}, "edited": false, "score": 0, "creation_date": 1573555601, "post_id": 58816452, "comment_id": 103911610, "body": "No, I want it to be dismissed, when I have internet connection and <code>onSuccess()</code> or <code>onFailure()</code> is called, BUT if there is no internet connection, I also want it to be dismissed and than show a message or something else to inform the user that uploading the data didn&#39;t work."}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "reply_to_user": {"reputation": 409, "user_id": 10424056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e97ce582113f9054c3165b8669feaff?s=128&d=identicon&r=PG&f=1", "display_name": "Apri", "link": "https://stackoverflow.com/users/10424056/apri"}, "edited": false, "score": 0, "creation_date": 1573556488, "post_id": 58816452, "comment_id": 103912046, "body": "If you want to be dismissed when you have an internet connection, then you should call <code>dismiss()</code> in <code>onSuccess()</code> <b>and</b> in <code>onFailure()</code>. <b>But</b> if you dismiss the <code>ProgressDialog</code> when you have no internet connection, then you&#39;ll have nothing to dismiss when you regain connection, right? Because the <code>ProgressDialog</code> is already dismissed. If you want to know if a device is connected to the internet, please see <a href=\"https://stackoverflow.com/questions/4238921/detect-whether-there-is-an-internet-connection-available-on-android\">Detect whether there is an Internet on Android</a>. Is it ok now?"}, {"owner": {"reputation": 409, "user_id": 10424056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e97ce582113f9054c3165b8669feaff?s=128&d=identicon&r=PG&f=1", "display_name": "Apri", "link": "https://stackoverflow.com/users/10424056/apri"}, "edited": false, "score": 0, "creation_date": 1573556928, "post_id": 58816452, "comment_id": 103912279, "body": "Yes, thank you. I just wanted to know how to detect if there is internet connection."}, {"owner": {"reputation": 113, "user_id": 3029986, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/3912f68e2179206eca0a68f2b56134a6?s=128&d=identicon&r=PG&f=1", "display_name": "eslamb", "link": "https://stackoverflow.com/users/3029986/eslamb"}, "edited": false, "score": 0, "creation_date": 1585869027, "post_id": 58816452, "comment_id": 107924112, "body": "I have the same problem and this thread does not answer the question."}], "tags": [], "owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "is_accepted": true, "score": 1, "last_activity_date": 1573553657, "creation_date": 1573553657, "answer_id": 58816452, "question_id": 58816256, "link": "https://stackoverflow.com/questions/58816256/firebase-firestore-is-there-a-callback-when-there-is-no-internet-connection/58816452#58816452", "title": "Firebase Firestore: Is there a callback when there is no internet connection?", "body": "<p>First thing first. The Cloud Firestore client already runs all network operations in a background thread. This means that all operations take place without blocking the main thread. Putting it in an <code>AsyncTask</code> does <strong>not</strong> give any additional benefits.</p>\n\n<blockquote>\n  <p>For example, when I want to show a progress dialog until the data is successfully written to the Firestore, it would not dismiss if there was no connection.</p>\n</blockquote>\n\n<p>Simply by displaying the <code>ProgressDialog</code> once you call <code>setData()</code> method and dismiss it in <code>onSuccess()</code>. Since this method is called only when the data is successfully written on Firebase servers, that's the right place to use it.</p>\n\n<p>Furthermore, if you want to have the same behaviour when you read data then you should use <code>isFromCache()</code> method like explained in my answer from the following post:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/54253438/listen-for-metadata-changes-in-firebase-firestore-database\">Listen For MetaData Changes in Firebase Firestore database</a></li>\n</ul>\n"}], "owner": {"reputation": 409, "user_id": 10424056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e97ce582113f9054c3165b8669feaff?s=128&d=identicon&r=PG&f=1", "display_name": "Apri", "link": "https://stackoverflow.com/users/10424056/apri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 820, "favorite_count": 0, "accepted_answer_id": 58816452, "answer_count": 1, "score": 2, "last_activity_date": 1573553714, "creation_date": 1573552962, "last_edit_date": 1573553714, "question_id": 58816256, "link": "https://stackoverflow.com/questions/58816256/firebase-firestore-is-there-a-callback-when-there-is-no-internet-connection", "title": "Firebase Firestore: Is there a callback when there is no internet connection?", "body": "<p>I am developing an Android app using Cloud Firestore to store data. This is how I set data to the database:</p>\n\n<pre><code>private fun setData() {\n    val task = UploadDataTask()\n    task.setOnUploadFinishedListener(object: UploadDataTask.OnUploadFinishedListener{\n        override fun uploadFinished() {\n            // Do something\n        }\n\n        override fun uploadFailed() {\n            // Do something\n        }\n    })\n}\n\nprivate class UploadDataTask: AsyncTask&lt;Void, Void, Void&gt;() {\n\n    private var onUploadFinishedListener: OnUploadFinishedListener? = null\n    fun setOnUploadFinishedListener(listener: OnUploadFinishedListener) {\n        onUploadFinishedListener = listener\n    }\n\n    override fun doInBackground(vararg params: Void?): Void? {\n        val map = hashMapOf(\n            UID to firebaseUser.uid\n        )\n        firebaseFirestore.collection(USERS)\n            .document(firebaseUser.uid)\n            .set(map)\n            .addOnSuccessListener {\n                if(onUploadFinishedListener != null)\n                    onUploadFinishedListener!!.uploadFinished()\n            }\n            .addOnFailureListener {\n                if(onUploadFinishedListener != null)\n                    onUploadFinishedListener!!.uploadFailed()\n            }\n        return null\n    }\n\n    interface OnUploadFinishedListener {\n        fun uploadFinished()\n        fun uploadFailed()\n    }\n}\n</code></pre>\n\n<p>This works great, but there is one exception. When I want to load data to the Firestore, but there is no connection to the internet, neither the <code>onSuccessListener</code> nor the onFailureListener gets called. I know that this is because they only get called when the data is written to the Firestore. But I don't know of any other way to check if there is a connection or not. For example, when I want to show a progress dialog until the data is successfully written to the Firestore, it would not dismiss if there was no connection. So how can I check that?</p>\n"}, {"tags": ["unit-testing", "kotlin", "junit", "mockito"], "comments": [{"owner": {"reputation": 1293, "user_id": 12141859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62b68b508ccc9cca985ec76d00fc0b40?s=128&d=identicon&r=PG&f=1", "display_name": "Neo", "link": "https://stackoverflow.com/users/12141859/neo"}, "edited": false, "score": 0, "creation_date": 1573554908, "post_id": 58815928, "comment_id": 103911289, "body": "Plase show what <code>isFeatureRevealNowAvailable(onPermissionResponse, ::errorHandler)</code> does. I can&#39;t see what your method is influencing and your test name doesn&#39;t tell anything about expectation or output. Define what you want to happen - invocation / entity saved / return result / ..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user12331224"}, "reply_to_user": {"reputation": 1293, "user_id": 12141859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62b68b508ccc9cca985ec76d00fc0b40?s=128&d=identicon&r=PG&f=1", "display_name": "Neo", "link": "https://stackoverflow.com/users/12141859/neo"}, "edited": false, "score": 0, "creation_date": 1573558290, "post_id": 58815928, "comment_id": 103912974, "body": "Updated to show that function"}], "answers": [{"tags": [], "owner": {"reputation": 1293, "user_id": 12141859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62b68b508ccc9cca985ec76d00fc0b40?s=128&d=identicon&r=PG&f=1", "display_name": "Neo", "link": "https://stackoverflow.com/users/12141859/neo"}, "is_accepted": true, "score": 0, "last_activity_date": 1573568312, "creation_date": 1573568312, "answer_id": 58820507, "question_id": 58815928, "link": "https://stackoverflow.com/questions/58815928/how-can-i-use-mockito-to-test-this-function/58820507#58820507", "title": "How can I use Mockito to test this function?", "body": "<p>(TL;DR - go to <strong>Example</strong>)</p>\n\n<p>Since you don't define specifically what you want to test or achieve, I will give some overall tips:</p>\n\n<h2>Mocking</h2>\n\n<ul>\n<li><p>Never mock the class you want to test</p>\n\n<p><code>val mockPermissionRepository = mock(PermissionRepository::class.java)</code></p></li>\n<li><p>Mock only what you want to exclude from your test but rely on</p></li>\n<li>Try to avoid mocks whenever it is possible and makes sence, because they simulate a perfect world, not the real behaviour</li>\n</ul>\n\n<h2>Test naming</h2>\n\n<p>Use proper names to describe what you want to achive with your test. My personal favourite is to start the sentence with the word \"should ...\"   </p>\n\n<h2>Example</h2>\n\n<p>Two tests I could image to write for your function:</p>\n\n<pre><code>@Test\n    fun `should invoke reveal permission on PermissionApi when type is REVEAL_NOW`(){\n    val mockPermissionApi = mock(PermissionApi::class.java)\n    val permissionRepository = PermissionRepository(mockPermissionApi, mock())\n\n    permissionRepository.checkPermission(PermissionType.REVEAL_NOW, onPermissionResponse = {})\n\n    verify(mockPermissionApi, times(1)).getRevealNowPermission()\n}\n\n@Test\nfun `should do nothing when type is not REVEAL_NOW`() {\n    val mockPermissionApi = mock(PermissionApi::class.java)\n    val permissionRepository = PermissionRepository(mockPermissionApi, mock())\n\n    permissionRepository.checkPermission(PermissionType.ELSE, onPermissionResponse = {})\n\n    verify(mockPermissionApi, times(0)).getRevealNowPermission()\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12331224"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 58820507, "answer_count": 1, "score": 0, "last_activity_date": 1573568312, "creation_date": 1573551956, "last_edit_date": 1573558182, "question_id": 58815928, "link": "https://stackoverflow.com/questions/58815928/how-can-i-use-mockito-to-test-this-function", "title": "How can I use Mockito to test this function?", "body": "<p>I'm trying to test that Permission.REVEAL_NOW returns the method isFeatureRevealNowAvailable.\nHeres some code I already tried but didn't succeed with. Any help would be hugely appreciated as always!</p>\n\n<p>Function to test:</p>\n\n<pre><code>class PermissionRepository(private val permissionApi: PermissionApi,    \n                       private val appPreferences: AppPreferences) {\n\nfun checkPermission(permission: PermissionType, onPermissionResponse: (Boolean) -&gt; Unit) {\n    Log.i(\"Permission\", \"Checking permission\")\n    when (permission) {\n        PermissionType.REVEAL_NOW -&gt; {\n            isFeatureRevealNowAvailable(onPermissionResponse, ::errorHandler)\n        }\n    }\n}\n</code></pre>\n\n<p>Attempted solution:</p>\n\n<pre><code>@RunWith(MockitoJUnitRunner::class)\nclass PermissionRepositoryTest{\n\n@Test\nfun checkPermissionTest() {\n    val mockPermissionRepository = mock(PermissionRepository::class.java)\n    val mockPermissionApi = mock(PermissionApi::class.java)\n    val result = mockPermissionRepository.checkPermission(PermissionType.REVEAL_NOW, onPermissionResponse = null)\n\n    //Unsure of what to use here AssertThat or Mockito's \"when\" function\n\n\n}\n</code></pre>\n\n<p>}</p>\n\n<pre><code>private fun isFeatureRevealNowAvailable(permissionResponseHandler: (Boolean) -&gt; Unit, permissionError: (Throwable) -&gt; Unit) {\n\n    permissionApi.getRevealNowPermission().enqueue(object : Callback&lt;PermissionResponse&gt; {\n        override fun onFailure(call: Call&lt;PermissionResponse&gt;, t: Throwable) {\n            permissionResponseHandler(false)\n            permissionError(t)\n        }\n\n        override fun onResponse(call: Call&lt;PermissionResponse&gt;, response: Response&lt;PermissionResponse&gt;) {\n            val permissionResult = response.body()?.isRevealNow ?: false\n\n            updateUserLocalPermission(PermissionType.REVEAL_NOW, permissionResult)\n\n            permissionResponseHandler(permissionResult)\n        }\n    })\n}\n</code></pre>\n"}, {"tags": ["java", "android", "kotlin", "retrofit2"], "comments": [{"owner": {"reputation": 191, "user_id": 10314536, "user_type": "registered", "profile_image": "https://graph.facebook.com/1874478459313620/picture?type=large", "display_name": "Archu Mohan", "link": "https://stackoverflow.com/users/10314536/archu-mohan"}, "edited": false, "score": 0, "creation_date": 1573551061, "post_id": 58815528, "comment_id": 103909281, "body": "remove the header type and try again"}, {"owner": {"reputation": 133, "user_id": 6023011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebcf11d9cbf3bf7b86c0821dc39d34fc?s=128&d=identicon&r=PG&f=1", "display_name": "A. Albrg", "link": "https://stackoverflow.com/users/6023011/a-albrg"}, "reply_to_user": {"reputation": 191, "user_id": 10314536, "user_type": "registered", "profile_image": "https://graph.facebook.com/1874478459313620/picture?type=large", "display_name": "Archu Mohan", "link": "https://stackoverflow.com/users/10314536/archu-mohan"}, "edited": false, "score": 0, "creation_date": 1573551340, "post_id": 58815528, "comment_id": 103909404, "body": "Did not work ..."}, {"owner": {"reputation": 191, "user_id": 10314536, "user_type": "registered", "profile_image": "https://graph.facebook.com/1874478459313620/picture?type=large", "display_name": "Archu Mohan", "link": "https://stackoverflow.com/users/10314536/archu-mohan"}, "edited": false, "score": 0, "creation_date": 1573551405, "post_id": 58815528, "comment_id": 103909431, "body": "kindly update the log file ..."}, {"owner": {"reputation": 133, "user_id": 6023011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebcf11d9cbf3bf7b86c0821dc39d34fc?s=128&d=identicon&r=PG&f=1", "display_name": "A. Albrg", "link": "https://stackoverflow.com/users/6023011/a-albrg"}, "reply_to_user": {"reputation": 191, "user_id": 10314536, "user_type": "registered", "profile_image": "https://graph.facebook.com/1874478459313620/picture?type=large", "display_name": "Archu Mohan", "link": "https://stackoverflow.com/users/10314536/archu-mohan"}, "edited": false, "score": 0, "creation_date": 1573551676, "post_id": 58815528, "comment_id": 103909568, "body": "Which log file, I am not understand"}, {"owner": {"reputation": 4323, "user_id": 8942811, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/vr8pK.jpg?s=128&g=1", "display_name": "Bek", "link": "https://stackoverflow.com/users/8942811/bek"}, "edited": false, "score": 0, "creation_date": 1573551688, "post_id": 58815528, "comment_id": 103909574, "body": "You can&#39;t send json with <code>FormUrlEncoded</code> use @Body"}, {"owner": {"reputation": 191, "user_id": 10314536, "user_type": "registered", "profile_image": "https://graph.facebook.com/1874478459313620/picture?type=large", "display_name": "Archu Mohan", "link": "https://stackoverflow.com/users/10314536/archu-mohan"}, "edited": false, "score": 0, "creation_date": 1573551763, "post_id": 58815528, "comment_id": 103909617, "body": "The error log which gets it from retrofit or android crash log"}, {"owner": {"reputation": 133, "user_id": 6023011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebcf11d9cbf3bf7b86c0821dc39d34fc?s=128&d=identicon&r=PG&f=1", "display_name": "A. Albrg", "link": "https://stackoverflow.com/users/6023011/a-albrg"}, "edited": false, "score": 0, "creation_date": 1573551776, "post_id": 58815528, "comment_id": 103909621, "body": "True, but the backend required me to use form-data"}, {"owner": {"reputation": 4323, "user_id": 8942811, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/vr8pK.jpg?s=128&g=1", "display_name": "Bek", "link": "https://stackoverflow.com/users/8942811/bek"}, "edited": false, "score": 0, "creation_date": 1573552103, "post_id": 58815528, "comment_id": 103909800, "body": "Try to send request with <code>Postman</code>. If everything is correct then try with retrofit."}, {"owner": {"reputation": 133, "user_id": 6023011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebcf11d9cbf3bf7b86c0821dc39d34fc?s=128&d=identicon&r=PG&f=1", "display_name": "A. Albrg", "link": "https://stackoverflow.com/users/6023011/a-albrg"}, "edited": false, "score": 0, "creation_date": 1573552400, "post_id": 58815528, "comment_id": 103909955, "body": "In postman the request has done successfully"}, {"owner": {"reputation": 133, "user_id": 6023011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebcf11d9cbf3bf7b86c0821dc39d34fc?s=128&d=identicon&r=PG&f=1", "display_name": "A. Albrg", "link": "https://stackoverflow.com/users/6023011/a-albrg"}, "edited": false, "score": 0, "creation_date": 1573552419, "post_id": 58815528, "comment_id": 103909965, "body": "But in retrofit nothing success"}, {"owner": {"reputation": 4323, "user_id": 8942811, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/vr8pK.jpg?s=128&g=1", "display_name": "Bek", "link": "https://stackoverflow.com/users/8942811/bek"}, "edited": false, "score": 0, "creation_date": 1573552637, "post_id": 58815528, "comment_id": 103910112, "body": "What did you check in <code>Body</code> section in <code>Postman</code>?"}, {"owner": {"reputation": 133, "user_id": 6023011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebcf11d9cbf3bf7b86c0821dc39d34fc?s=128&d=identicon&r=PG&f=1", "display_name": "A. Albrg", "link": "https://stackoverflow.com/users/6023011/a-albrg"}, "edited": false, "score": 0, "creation_date": 1573553124, "post_id": 58815528, "comment_id": 103910374, "body": "Body =&gt; form-data"}, {"owner": {"reputation": 4323, "user_id": 8942811, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/vr8pK.jpg?s=128&g=1", "display_name": "Bek", "link": "https://stackoverflow.com/users/8942811/bek"}, "edited": false, "score": 0, "creation_date": 1573553398, "post_id": 58815528, "comment_id": 103910553, "body": "<a href=\"https://stackoverflow.com/a/49974050/8942811\">stackoverflow.com/a/49974050/8942811</a>"}, {"owner": {"reputation": 133, "user_id": 6023011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebcf11d9cbf3bf7b86c0821dc39d34fc?s=128&d=identicon&r=PG&f=1", "display_name": "A. Albrg", "link": "https://stackoverflow.com/users/6023011/a-albrg"}, "reply_to_user": {"reputation": 4323, "user_id": 8942811, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/vr8pK.jpg?s=128&g=1", "display_name": "Bek", "link": "https://stackoverflow.com/users/8942811/bek"}, "edited": false, "score": 0, "creation_date": 1573554010, "post_id": 58815528, "comment_id": 103910873, "body": "@Bek did not work man :("}], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 6023011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebcf11d9cbf3bf7b86c0821dc39d34fc?s=128&d=identicon&r=PG&f=1", "display_name": "A. Albrg", "link": "https://stackoverflow.com/users/6023011/a-albrg"}, "edited": false, "score": 0, "creation_date": 1573552364, "post_id": 58815892, "comment_id": 103909936, "body": "I try second method, but nothing change, it is like my code no difference just you created a Map instead of Fields And the value of &quot;clnt_res&quot; is still encoded by retrofit"}, {"owner": {"reputation": 183, "user_id": 6644765, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2af5afdc83f21bef7a3b4ff5ac9ac58c?s=128&d=identicon&r=PG&f=1", "display_name": "Vishal Thakkar", "link": "https://stackoverflow.com/users/6644765/vishal-thakkar"}, "reply_to_user": {"reputation": 133, "user_id": 6023011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebcf11d9cbf3bf7b86c0821dc39d34fc?s=128&d=identicon&r=PG&f=1", "display_name": "A. Albrg", "link": "https://stackoverflow.com/users/6023011/a-albrg"}, "edited": false, "score": 0, "creation_date": 1573553281, "post_id": 58815892, "comment_id": 103910472, "body": "is it working in postman?? can you please show me how do you call in postman??"}, {"owner": {"reputation": 183, "user_id": 6644765, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2af5afdc83f21bef7a3b4ff5ac9ac58c?s=128&d=identicon&r=PG&f=1", "display_name": "Vishal Thakkar", "link": "https://stackoverflow.com/users/6644765/vishal-thakkar"}, "reply_to_user": {"reputation": 133, "user_id": 6023011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebcf11d9cbf3bf7b86c0821dc39d34fc?s=128&d=identicon&r=PG&f=1", "display_name": "A. Albrg", "link": "https://stackoverflow.com/users/6023011/a-albrg"}, "edited": false, "score": 0, "creation_date": 1573553970, "post_id": 58815892, "comment_id": 103910847, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/202198/discussion-between-vishal-thakkar-and-a-albrg\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 183, "user_id": 6644765, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2af5afdc83f21bef7a3b4ff5ac9ac58c?s=128&d=identicon&r=PG&f=1", "display_name": "Vishal Thakkar", "link": "https://stackoverflow.com/users/6644765/vishal-thakkar"}, "is_accepted": false, "score": 0, "last_activity_date": 1573551851, "creation_date": 1573551851, "answer_id": 58815892, "question_id": 58815528, "link": "https://stackoverflow.com/questions/58815528/problems-sending-formurlencoded-using-retrofit/58815892#58815892", "title": "Problems Sending FormUrlEncoded using Retrofit", "body": "<p>You have 2 options to send json request from android using Retrofit.</p>\n\n<ol>\n<li>Create Pojo Model of json request and pass it by setting values of it.</li>\n<li>Create HashMap and pass it to request.</li>\n</ol>\n\n<p>Here is solution using 2nd Method:</p>\n\n<p>Create hashmap and put key(parameters) and value:</p>\n\n<pre><code>Map&lt;String,String&gt; requestMap = new HashMap&lt;&gt;();\n        requestMap.put(\"clnt_id\",\"your_value\");\n        requestMap.put(\"clnt_res\",\"your_value\");\n        requestMap.put(\"type\",\"your_value\");\n        requestMap.put(\"len\",\"your_value\");\n</code></pre>\n\n<p>Then pass it to your retrofit request using FieldMap:</p>\n\n<pre><code>@FormUrlEncoded\n    @POST(\"Endpoint\")\n    @Headers(\"Accept: Application/JSON\")\n    fun connect(\n        @FieldMap requestMap:Map&lt;String,String&gt;\n    ): Observable&lt;Token&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 133, "user_id": 6023011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebcf11d9cbf3bf7b86c0821dc39d34fc?s=128&d=identicon&r=PG&f=1", "display_name": "A. Albrg", "link": "https://stackoverflow.com/users/6023011/a-albrg"}, "is_accepted": true, "score": 0, "last_activity_date": 1575224877, "last_edit_date": 1575224877, "creation_date": 1574671303, "answer_id": 59027898, "question_id": 58815528, "link": "https://stackoverflow.com/questions/58815528/problems-sending-formurlencoded-using-retrofit/59027898#59027898", "title": "Problems Sending FormUrlEncoded using Retrofit", "body": "<p>I finally get the answer and it was a problem with symbol <code>'$'</code> in <code>'clnt_res'</code> value <code>\"AA!@#$T\"</code>, The problem is in kotlin to escape a special char you need to do this <code>\"\\$\"</code>, what I made the IDE didn't tell me that it is wrong is this <code>\"$/\"</code>.</p>\n"}], "owner": {"reputation": 133, "user_id": 6023011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebcf11d9cbf3bf7b86c0821dc39d34fc?s=128&d=identicon&r=PG&f=1", "display_name": "A. Albrg", "link": "https://stackoverflow.com/users/6023011/a-albrg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 1, "accepted_answer_id": 59027898, "answer_count": 2, "score": 0, "last_activity_date": 1575224877, "creation_date": 1573550526, "last_edit_date": 1573552123, "question_id": 58815528, "link": "https://stackoverflow.com/questions/58815528/problems-sending-formurlencoded-using-retrofit", "title": "Problems Sending FormUrlEncoded using Retrofit", "body": "<p>I have this request and I need to send it by FormUrlEncoded using Retrofit</p>\n\n<pre><code>{\n   \"clnt_id\": \"OQW\",\n   \"clnt_res\": \"AA!@#$T\",\n   \"type\": \"SCDS\",\n   \"len\": \"ASD\"\n}\n</code></pre>\n\n<p>I used this code:</p>\n\n<pre><code>    @FormUrlEncoded\n    @POST(\"Endpoint\")\n    @Headers(\"Accept: Application/JSON\")\n    fun connect(\n        @Field(\"clnt_id\") clnt_id: String,\n        @Field(value = \"clnt_res\", encoded = false) clnt_res: String,\n        @Field(\"type\") type: String,\n        @Field(\"len\") len: String\n    ): Observable&lt;Token&gt;\n</code></pre>\n\n<p>First, thing is that the request is not sent as JSON</p>\n\n<p>Second, the value of \"clnt_res\", encoded by retrofit </p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 7521, "user_id": 1219389, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6otAH.jpg?s=128&g=1", "display_name": "PPartisan", "link": "https://stackoverflow.com/users/1219389/ppartisan"}, "edited": false, "score": 0, "creation_date": 1573547960, "post_id": 58814807, "comment_id": 103907723, "body": "What you&#39;ve done is reassign the implicit parameter name (it) to an explicit parameter name (aa)."}, {"owner": {"reputation": 1537, "user_id": 1678893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZOh9W.jpg?s=128&g=1", "display_name": "Diego Marin Santos", "link": "https://stackoverflow.com/users/1678893/diego-marin-santos"}, "edited": false, "score": 0, "creation_date": 1573551336, "post_id": 58814807, "comment_id": 103909400, "body": "What&#39;s the error? I&#39;ve just run it with no problems with Kotlin 1.3.50. The error in your code is using private with a local variable"}], "answers": [{"comments": [{"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 1, "creation_date": 1573568970, "post_id": 58814944, "comment_id": 103918466, "body": "What OP has done in C is <i>shadow</i> the <code>aa</code> var with the <code>aa</code> val in the lambda scope. Not usually considered good practice."}], "tags": [], "owner": {"reputation": 7521, "user_id": 1219389, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6otAH.jpg?s=128&g=1", "display_name": "PPartisan", "link": "https://stackoverflow.com/users/1219389/ppartisan"}, "is_accepted": true, "score": 6, "last_activity_date": 1573548276, "creation_date": 1573548276, "answer_id": 58814944, "question_id": 58814807, "link": "https://stackoverflow.com/questions/58814807/why-cant-i-directly-access-the-object-used-in-the-let-scope-function-instead-of/58814944#58814944", "title": "Why can&#39;t I directly access the object used in the let scope function instead of it in Kotlin?", "body": "<p><code>it</code> is just the name kotlin gives to a parameter implicitly, which you can override with your own name (which happens in C where the parameter name is set to <code>aa</code>). </p>\n\n<p>In A, you use <code>it</code> as an implicit parameter, where it refers to a value equivalent to <code>aa</code> after it has gone through a null check.</p>\n\n<p>B doesn't work because unlike in C and A, <code>aa</code> refers to the <code>var</code> you declared outside of your <code>let</code>, which is nullable. As it is nullable, you can't simply call <code>length</code> on it in the same way as in A and C.</p>\n"}, {"tags": [], "owner": {"reputation": 15987, "user_id": 4385913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/ijSum.png?s=128&g=1", "display_name": "Skizo-oz\u1d09\u029eS", "link": "https://stackoverflow.com/users/4385913/skizo-oz%e1%b4%89%ca%9es"}, "is_accepted": false, "score": 5, "last_activity_date": 1573549882, "last_edit_date": 1592644375, "creation_date": 1573549573, "answer_id": 58815264, "question_id": 58814807, "link": "https://stackoverflow.com/questions/58814807/why-cant-i-directly-access-the-object-used-in-the-let-scope-function-instead-of/58815264#58815264", "title": "Why can&#39;t I directly access the object used in the let scope function instead of it in Kotlin?", "body": "<h2>TL;DR</h2>\n<p>Yes you can use <code>aa</code> inside <code>T.let</code> function but the problem is that it won't be casted to your object, so either or you cast it manually or you won't be able to use methods of your variable type.</p>\n<hr />\n<p>I recommend you to read this <a href=\"https://kotlinlang.org/docs/reference/lambdas.html?_ga=2.268416779.48780587.1573548884-1310030218.1571915784#it-implicit-name-of-a-single-parameter\" rel=\"noreferrer\">it implicit name of a single parameter</a> to better understanding of <code>it</code>.</p>\n<p>@PPartisan explained it ok, the thing is that yes, you can use <code>aa</code> inside your <code>T.let</code> function the problem that you are having is that the compiler is trying to do a smart cast to <code>String</code> and it's impossible to do that because <code>aa</code> is a mutable property that could have been changed.</p>\n<p>If you try to add another function like <code>isNullOrBlank()</code> it will not complain.</p>\n<p>Also one point is, <code>T.let</code> function is checking for nullability and if <code>aa</code> is null it won't do whatever is inside even if you put <code>it</code> or <code>aa</code> so an example could be :</p>\n<pre><code>private var aa:String?=null\n\nfun main() {\n    println(&quot;Hello, world!!!&quot;)\n    aa = &quot;pewlas&quot;\n    aa?.let{\n        print(&quot;example&quot;+aa.orEmpty())\n    }\n}\n</code></pre>\n<p>output :</p>\n<blockquote>\n<p>Hello, world!!!</p>\n<p>examplepewlas</p>\n</blockquote>\n<p>When you use <code>it</code> it will cast it to a <code>String</code> so, if you use <code>aa</code> inside the <code>T.let</code> function it won't cast it to String and then you won't be able to use methods from <code>String</code> like you are trying to do with <code>lenght</code> function.</p>\n"}], "owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 58814944, "answer_count": 2, "score": 2, "last_activity_date": 1573553709, "creation_date": 1573547737, "last_edit_date": 1573553709, "question_id": 58814807, "link": "https://stackoverflow.com/questions/58814807/why-cant-i-directly-access-the-object-used-in-the-let-scope-function-instead-of", "title": "Why can&#39;t I directly access the object used in the let scope function instead of it in Kotlin?", "body": "<p>I know that the <em>Code C</em> is the same as the <em>Code A</em>.</p>\n\n<p>I hope to use the variable <code>aa</code> instead of <code>it</code> in <em>Code B</em>, but it cause error.</p>\n\n<p>Why isn't the <em>Code B</em> same as the <em>Code A</em>?</p>\n\n<p><strong>Code A</strong></p>\n\n<pre><code>private var aa:String?=null \n\naa?.let{\n       print(it.length)\n}\n</code></pre>\n\n<p><strong>Code B</strong></p>\n\n<pre><code>private var aa:String?=null \n\naa?.let{\n        print(aa.length)\n}\n</code></pre>\n\n<p><strong>Code C</strong></p>\n\n<pre><code>private var aa:String?=null \n\naa?.let{\n       aa-&gt; print(aa.length)\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 2475, "user_id": 5705408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35925dad32f715c478bd3f4ae26e8547?s=128&d=identicon&r=PG&f=1", "display_name": "Lenoarod", "link": "https://stackoverflow.com/users/5705408/lenoarod"}, "edited": false, "score": 0, "creation_date": 1573547741, "post_id": 58814766, "comment_id": 103907620, "body": "you can create a StateListDrawable, it has status"}], "answers": [{"comments": [{"owner": {"reputation": 2090, "user_id": 4970126, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/673e18f1dee3a6671ae10f07f6cc1c53?s=128&d=identicon&r=PG&f=1", "display_name": "BVtp", "link": "https://stackoverflow.com/users/4970126/bvtp"}, "edited": false, "score": 0, "creation_date": 1573548578, "post_id": 58814861, "comment_id": 103908010, "body": "thank you, the second solution is a bit more convenient to use, so I accepted it. Nevertheless, I will definitely check out this solution too."}], "tags": [], "owner": {"reputation": 2475, "user_id": 5705408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35925dad32f715c478bd3f4ae26e8547?s=128&d=identicon&r=PG&f=1", "display_name": "Lenoarod", "link": "https://stackoverflow.com/users/5705408/lenoarod"}, "is_accepted": false, "score": 0, "last_activity_date": 1573547962, "creation_date": 1573547962, "answer_id": 58814861, "question_id": 58814766, "link": "https://stackoverflow.com/questions/58814766/custom-textview-that-can-change-background-color/58814861#58814861", "title": "custom TextView that can change background color", "body": "<p>In the res/drawable/ folder create a <code>BtnStateDrawable.xml</code>, then set different status ShapeDrawable.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;selector xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:constantSize=[\"true\" | \"false\"]\n    android:dither=[\"true\" | \"false\"]\n    android:variablePadding=[\"true\" | \"false\"] &gt;\n    &lt;item\n        android:drawable=\"@[package:]drawable/drawable_resource\" . //here is your shapedrawable\n        android:state_pressed=[\"true\" | \"false\"]\n        android:state_focused=[\"true\" | \"false\"]\n        android:state_hovered=[\"true\" | \"false\"]\n        android:state_selected=[\"true\" | \"false\"]\n        android:state_checkable=[\"true\" | \"false\"]\n        android:state_checked=[\"true\" | \"false\"]\n        android:state_enabled=[\"true\" | \"false\"]\n        android:state_activated=[\"true\" | \"false\"]\n        android:state_window_focused=[\"true\" | \"false\"] /&gt;\n&lt;/selector&gt;\n\n\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2090, "user_id": 4970126, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/673e18f1dee3a6671ae10f07f6cc1c53?s=128&d=identicon&r=PG&f=1", "display_name": "BVtp", "link": "https://stackoverflow.com/users/4970126/bvtp"}, "edited": false, "score": 1, "creation_date": 1573548477, "post_id": 58814880, "comment_id": 103907950, "body": "Thank you, it is minimalistic and does exactly what I need. I actually tried using GradientDrawable but it crashed. Weird, I might have missed something. Anyway, as my question was for Kotlin, please add the kotlin version, when using inside the Custom View class : <code>drawable = background as GradientDrawable </code> and <code>drawable.setColor(Color.Green)</code>"}, {"owner": {"reputation": 3396, "user_id": 4854891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WEK2n.jpg?s=128&g=1", "display_name": "Jakir Hossain", "link": "https://stackoverflow.com/users/4854891/jakir-hossain"}, "reply_to_user": {"reputation": 2090, "user_id": 4970126, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/673e18f1dee3a6671ae10f07f6cc1c53?s=128&d=identicon&r=PG&f=1", "display_name": "BVtp", "link": "https://stackoverflow.com/users/4970126/bvtp"}, "edited": false, "score": 0, "creation_date": 1573548895, "post_id": 58814880, "comment_id": 103908198, "body": "I have updated my answer for kotlin. You can also upvote my answer."}], "tags": [], "owner": {"reputation": 3396, "user_id": 4854891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WEK2n.jpg?s=128&g=1", "display_name": "Jakir Hossain", "link": "https://stackoverflow.com/users/4854891/jakir-hossain"}, "is_accepted": true, "score": 1, "last_activity_date": 1573548789, "last_edit_date": 1573548789, "creation_date": 1573548025, "answer_id": 58814880, "question_id": 58814766, "link": "https://stackoverflow.com/questions/58814766/custom-textview-that-can-change-background-color/58814880#58814880", "title": "custom TextView that can change background color", "body": "<p>Yes, you can change the <code>Solid color</code> of the drawable file programmatically. like the following.</p>\n\n<pre><code>val drawable = view.getBackground() as GradientDrawable // here view is your textview reference.\ndrawable.setColor(Color.GREEN) // set your color here\n</code></pre>\n"}], "owner": {"reputation": 2090, "user_id": 4970126, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/673e18f1dee3a6671ae10f07f6cc1c53?s=128&d=identicon&r=PG&f=1", "display_name": "BVtp", "link": "https://stackoverflow.com/users/4970126/bvtp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 58814880, "answer_count": 2, "score": 0, "last_activity_date": 1573548789, "creation_date": 1573547538, "last_edit_date": 1573547797, "question_id": 58814766, "link": "https://stackoverflow.com/questions/58814766/custom-textview-that-can-change-background-color", "title": "custom TextView that can change background color", "body": "<p>I have a written a custom TextView in kotlin, which acts as a selection button. \nMeaning, in unselected states it has a grey-ish background with corners, and in selected state it this background changes color.</p>\n\n<p>(In the middle of the button there's a text)</p>\n\n<p><strong>The problem :</strong> \nI need to display a whole group of these buttons, and for each button, the color of selected state can vary and change from button to button.</p>\n\n<p>So if I have : Button1, Button2, Button3, for each of them, when they're selected, the background color is different.</p>\n\n<p>Can I somehow control the color that the drawable xml uses?</p>\n\n<p>button_background :</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;shape xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:padding=\"10dp\"\n    android:shape=\"rectangle\" &gt;\n    &lt;solid android:color=\"@color/dynamicColor\" /&gt; --&gt; how can I control this color?\n\n    &lt;corners\n        android:bottomLeftRadius=\"20dp\"\n        android:bottomRightRadius=\"20dp\"\n        android:topLeftRadius=\"20dp\"\n        android:topRightRadius=\"20dp\" /&gt;\n&lt;/shape&gt;\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-safe-args"], "comments": [{"owner": {"reputation": 4954, "user_id": 8914336, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZiaPSSVtqI/AAAAAAAAAAI/AAAAAAAAAZE/Bpxg5UxWaP0/photo.jpg?sz=128", "display_name": "coroutineDispatcher", "link": "https://stackoverflow.com/users/8914336/coroutinedispatcher"}, "edited": false, "score": 0, "creation_date": 1573560027, "post_id": 58814445, "comment_id": 103913861, "body": "show us the code of generated classes"}], "answers": [{"comments": [{"owner": {"reputation": 281, "user_id": 12759765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/311101890069bcb0cd3c261606a5a586?s=128&d=identicon&r=PG&f=1", "display_name": "qki", "link": "https://stackoverflow.com/users/12759765/qki"}, "edited": false, "score": 0, "creation_date": 1611775340, "post_id": 59765474, "comment_id": 116561966, "body": "Switching to <code>androidx.navigation.safeargs</code> indeed helped. I wonder why is this happening tho"}], "tags": [], "owner": {"reputation": 121, "user_id": 10000068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41ea3873cd75945fc9f3c7acc09f8cfb?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen Mullen", "link": "https://stackoverflow.com/users/10000068/stephen-mullen"}, "is_accepted": false, "score": 8, "last_activity_date": 1579162971, "creation_date": 1579162971, "answer_id": 59765474, "question_id": 58814445, "link": "https://stackoverflow.com/questions/58814445/why-is-android-studio-not-generating-code-for-all-the-safe-args/59765474#59765474", "title": "Why is android studio not generating code for all the safe args?", "body": "<p>Try switching to:</p>\n\n<pre><code>apply plugin: \"androidx.navigation.safeargs\"\n</code></pre>\n\n<p>instead of:</p>\n\n<pre><code>apply plugin: \"androidx.navigation.safeargs.kotlin\"\n</code></pre>\n\n<p>This will generate Java code instead of Kotlin code inside your app\\build\\generated folder. This doesn't effect your own code and you can continue to use Kotlin or Java for your Fragments.</p>\n"}, {"tags": [], "owner": {"reputation": 139, "user_id": 12618567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0O9ou.jpg?s=128&g=1", "display_name": "Mahmoud Hendi", "link": "https://stackoverflow.com/users/12618567/mahmoud-hendi"}, "is_accepted": false, "score": 1, "last_activity_date": 1588536941, "creation_date": 1588536941, "answer_id": 61581026, "question_id": 58814445, "link": "https://stackoverflow.com/questions/58814445/why-is-android-studio-not-generating-code-for-all-the-safe-args/61581026#61581026", "title": "Why is android studio not generating code for all the safe args?", "body": "<p>You just need to rebuild your project, </p>\n\n<ol>\n<li>Delete any lines that cause error for now</li>\n<li>Rebuild your project</li>\n<li>Add those lines again</li>\n</ol>\n"}], "owner": {"reputation": 107, "user_id": 1152495, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kjFdY.png?s=128&g=1", "display_name": "Aquaman254", "link": "https://stackoverflow.com/users/1152495/aquaman254"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3058, "favorite_count": 1, "answer_count": 2, "score": 9, "last_activity_date": 1588536941, "creation_date": 1573546189, "last_edit_date": 1573559831, "question_id": 58814445, "link": "https://stackoverflow.com/questions/58814445/why-is-android-studio-not-generating-code-for-all-the-safe-args", "title": "Why is android studio not generating code for all the safe args?", "body": "<p>I am using safe-args to pass arguments from one fragment to the other. Android studio intermittently generates the fragmentArgs class with all the arguments.</p>\n\n<p>What I have tried, and does work, is altering the nav graph file, making the project, then undo those changes, and finally, make the project again.</p>\n\n<p><strong>Dependencies Used:</strong></p>\n\n<p><strong>Project module:</strong></p>\n\n<p><code>ext.nav_version = '2.2.0-beta01'</code></p>\n\n<p><code>classpath \"androidx.navigation:navigation-safe-args-gradle-plugin:$nav_version\"</code></p>\n\n<p><strong>App module:</strong></p>\n\n<p><code>apply plugin: \"androidx.navigation.safeargs.kotlin\"</code></p>\n\n<pre><code>    &lt;fragment\n            android:id=\"@+id/someFragment\"\n            android:name=\"package_name.SomeFragment\"\n            android:label=\"@string/some_fragment\"&gt;\n        &lt;argument\n                android:name=\"source\"\n                android:defaultValue=\"-1\"\n                app:argType=\"integer\" /&gt;\n        &lt;argument\n                android:name=\"nationalId\"\n                android:defaultValue=\"-1\"\n                app:argType=\"integer\" /&gt;\n        &lt;argument\n                android:name=\"hudumaNumber\"\n                android:defaultValue=\"-1\"\n                app:argType=\"string\" /&gt;\n        &lt;argument\n                android:name=\"middleName\"\n                android:defaultValue=\"None\"\n                app:argType=\"string\" /&gt;\n\n    &lt;/fragment&gt;\n</code></pre>\n\n<p>I expect that all the arguments will be found in the generated class, but that is not the case.</p>\n"}, {"tags": ["android", "kotlin", "android-databinding"], "answers": [{"tags": [], "owner": {"reputation": 1782, "user_id": 4690298, "user_type": "registered", "profile_image": "https://graph.facebook.com/878678598884932/picture?type=large", "display_name": "Amjad Alwareh", "link": "https://stackoverflow.com/users/4690298/amjad-alwareh"}, "is_accepted": false, "score": 0, "last_activity_date": 1573541951, "creation_date": 1573541951, "answer_id": 58813524, "question_id": 58813232, "link": "https://stackoverflow.com/questions/58813232/data-binding-compiler-cannot-find-custom-binding-adapter-provided/58813524#58813524", "title": "Data Binding Compiler cannot find custom binding adapter provided", "body": "<p>You don't have to use <code>@JvmStatic</code> because you are using Kotlin extension feature. </p>\n"}, {"comments": [{"owner": {"reputation": 144, "user_id": 6694413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6700924269a58cba315c2e55ea56f707?s=128&d=identicon&r=PG&f=1", "display_name": "Mohanakrrishna", "link": "https://stackoverflow.com/users/6694413/mohanakrrishna"}, "edited": false, "score": 0, "creation_date": 1573543767, "post_id": 58813884, "comment_id": 103905904, "body": "This is same as what he used. He just used Extension function way. What is the difference?"}], "tags": [], "owner": {"reputation": 2722, "user_id": 1643076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/0OSSl.jpg?s=128&g=1", "display_name": "Gautam", "link": "https://stackoverflow.com/users/1643076/gautam"}, "is_accepted": false, "score": 0, "last_activity_date": 1573543676, "creation_date": 1573543676, "answer_id": 58813884, "question_id": 58813232, "link": "https://stackoverflow.com/questions/58813232/data-binding-compiler-cannot-find-custom-binding-adapter-provided/58813884#58813884", "title": "Data Binding Compiler cannot find custom binding adapter provided", "body": "<p>You need to add the view reference as a paramater to your BindingAdapter method. </p>\n\n<pre><code> @BindingAdapter(\"playState\")\n    fun setPlayState(button:Button,item: UIState) {\n        //do your work here\n    }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 7130705, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FXSYp.jpg?s=128&g=1", "display_name": "Barjuan Davis", "link": "https://stackoverflow.com/users/7130705/barjuan-davis"}, "edited": false, "score": 0, "creation_date": 1573545917, "post_id": 58813961, "comment_id": 103906829, "body": "i have used &quot;<a href=\"http://schemas.android.com/tools\" rel=\"nofollow noreferrer\">schemas.android.com/tools</a>&quot; at <code>tools</code> namespace. I have tried your solution as well but no change."}], "tags": [], "owner": {"reputation": 144, "user_id": 6694413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6700924269a58cba315c2e55ea56f707?s=128&d=identicon&r=PG&f=1", "display_name": "Mohanakrrishna", "link": "https://stackoverflow.com/users/6694413/mohanakrrishna"}, "is_accepted": false, "score": 0, "last_activity_date": 1573544048, "creation_date": 1573544048, "answer_id": 58813961, "question_id": 58813232, "link": "https://stackoverflow.com/questions/58813232/data-binding-compiler-cannot-find-custom-binding-adapter-provided/58813961#58813961", "title": "Data Binding Compiler cannot find custom binding adapter provided", "body": "<p>Your namespace </p>\n\n<blockquote>\n  <p>xmlns:app=\"http://schemas.android.com/apk/res-auto\"</p>\n</blockquote>\n\n<p>is wrong for custom binding adapters. Please use the namespace</p>\n\n<blockquote>\n  <p>xmlns:app=\"http://schemas.android.com/tools\"</p>\n</blockquote>\n\n<p>since <code>app:playState</code> is not in the namespace you have given its not working properly</p>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 7130705, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FXSYp.jpg?s=128&g=1", "display_name": "Barjuan Davis", "link": "https://stackoverflow.com/users/7130705/barjuan-davis"}, "edited": false, "score": 0, "creation_date": 1573547378, "post_id": 58814198, "comment_id": 103907460, "body": "Yes. Thank you!"}], "tags": [], "owner": {"reputation": 1637, "user_id": 5370550, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/eccb2be595b28aa6f5da58e7a32199dc?s=128&d=identicon&r=PG&f=1", "display_name": "Nik", "link": "https://stackoverflow.com/users/5370550/nik"}, "is_accepted": true, "score": 0, "last_activity_date": 1573546946, "last_edit_date": 1573546946, "creation_date": 1573545008, "answer_id": 58814198, "question_id": 58813232, "link": "https://stackoverflow.com/questions/58813232/data-binding-compiler-cannot-find-custom-binding-adapter-provided/58814198#58814198", "title": "Data Binding Compiler cannot find custom binding adapter provided", "body": "<p>I think you missed to add kotlin plugin in your gradle</p>\n\n<pre><code>apply plugin: 'kotlin-kapt'\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 7130705, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FXSYp.jpg?s=128&g=1", "display_name": "Barjuan Davis", "link": "https://stackoverflow.com/users/7130705/barjuan-davis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 418, "favorite_count": 0, "accepted_answer_id": 58814198, "answer_count": 4, "score": 0, "last_activity_date": 1573546946, "creation_date": 1573540451, "last_edit_date": 1573546566, "question_id": 58813232, "link": "https://stackoverflow.com/questions/58813232/data-binding-compiler-cannot-find-custom-binding-adapter-provided", "title": "Data Binding Compiler cannot find custom binding adapter provided", "body": "<p>I have made a binding adapter available statically inside my <code>Fragment</code> which basically change my button appearance from \"Stop\" to \"Play\" and vice-versa.</p>\n\n<pre><code>companion object {\n        @BindingAdapter(\"playState\")\n        fun Button.setPlayState(item: UIState) {\n            item.let {\n                if (it.isPlaying) {\n                    setText(\"Stop\")\n                    setBackgroundColor(ContextCompat.getColor(context, R.color.colorStop))\n                } else {\n                    setText(\"Play\")\n                    setBackgroundColor(ContextCompat.getColor(context, R.color.colorPlay))\n                }\n            }\n        }\n    }\n</code></pre>\n\n<p>Here is my layout file. I have provided a data class for it.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;layout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"&gt;\n    &lt;data&gt;\n        &lt;!-- stuff here --&gt;\n        &lt;variable\n            name=\"viewmodel\"\n            type=\"com.mypackage.ui.ViewModel\"/&gt;\n        &lt;variable\n            name=\"uistate\"\n            type=\"com.mypackage.ui.UIState\" /&gt;\n    &lt;/data&gt;\n    &lt;!-- layout, buttons, and more stuff here. Just pay attention to this following button --&gt;\n     &lt;Button\n            android:id=\"@+id/play_button\"\n            android:layout_width=\"150sp\"\n            android:layout_height=\"75sp\"\n            android:layout_marginTop=\"20sp\"\n            android:onClick=\"@{() -&gt; viewmodel.onPlayClicked()}\"\n            android:text=\"@string/play_button\"\n            app:layout_constraintBottom_toBottomOf=\"parent\"\n            app:layout_constraintEnd_toEndOf=\"parent\"\n            app:layout_constraintHorizontal_bias=\"0.498\"\n            app:layout_constraintStart_toStartOf=\"parent\"\n            app:layout_constraintTop_toBottomOf=\"@+id/minus_layout\"\n            app:layout_constraintVertical_bias=\"0.026\"\n            app:playState=\"@{uistate}\"/&gt;\n\n\n&lt;/layout&gt;\n</code></pre>\n\n<p><code>UIState</code> itself is pretty self-explanatory.</p>\n\n<pre><code>data class UIState(var isPlaying: Boolean)\n</code></pre>\n\n<p>and the <code>() -&gt; viewmodel.onPlayClicked()</code> flips the <code>Boolean</code> at <code>UIState</code>.</p>\n\n<p>After compiling, Data Binding Compiler throws this error:</p>\n\n<pre><code>Cannot find a setter for &lt;android.widget.Button app:playState&gt; \nthat accepts parameter type 'com.mypackage.ui.UIState'\n\n</code></pre>\n\n<p><b>I have tried:</b></p>\n\n<ol>\n<li>Rebuilding the project by removing .gradle folder</li>\n<li>Looking for answer <a href=\"https://stackoverflow.com/questions/57799087/two-way-binding-cannot-resolve-a-setter\">here</a> and <a href=\"https://stackoverflow.com/questions/34706399/how-to-use-data-binding-with-fragment/53932633#53932633\">here</a>.</li>\n<li>Removed <code>@JvmStatic</code> annotation at the extension function</li>\n<li>Moved the extension function to top level instead of <code>Fragment</code>'s companion object.</li>\n</ol>\n"}, {"tags": ["kotlin", "crash", "realm"], "comments": [{"owner": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "edited": false, "score": 0, "creation_date": 1573540319, "post_id": 58813148, "comment_id": 103904734, "body": "Is there more information in the LogCat? This sort of problem usually indicates you&#39;ve forgotten to add a library (or add the correct version) to your released application."}, {"owner": {"reputation": 21, "user_id": 3838293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30e38dc5a4adf65ce7e86ae1f6918b6e?s=128&d=identicon&r=PG&f=1", "display_name": "mptaurus", "link": "https://stackoverflow.com/users/3838293/mptaurus"}, "reply_to_user": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "edited": false, "score": 0, "creation_date": 1573541776, "post_id": 58813148, "comment_id": 103905179, "body": "No, no additional LogCat information. I edited my question to include information from Run on the emulator. Why it crashes only when published on the store? It is strange to me."}, {"owner": {"reputation": 10859, "user_id": 3710865, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oROuW.jpg?s=128&g=1", "display_name": "sasikumar", "link": "https://stackoverflow.com/users/3710865/sasikumar"}, "edited": false, "score": 0, "creation_date": 1573543829, "post_id": 58813148, "comment_id": 103905932, "body": "did you used any google api keys?"}, {"owner": {"reputation": 21, "user_id": 3838293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30e38dc5a4adf65ce7e86ae1f6918b6e?s=128&d=identicon&r=PG&f=1", "display_name": "mptaurus", "link": "https://stackoverflow.com/users/3838293/mptaurus"}, "edited": false, "score": 0, "creation_date": 1573544727, "post_id": 58813148, "comment_id": 103906308, "body": "no, I didn&#39;t use"}], "owner": {"reputation": 21, "user_id": 3838293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30e38dc5a4adf65ce7e86ae1f6918b6e?s=128&d=identicon&r=PG&f=1", "display_name": "mptaurus", "link": "https://stackoverflow.com/users/3838293/mptaurus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 402, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573541649, "creation_date": 1573540011, "last_edit_date": 1573541649, "question_id": 58813148, "link": "https://stackoverflow.com/questions/58813148/app-crashes-in-googleplay-store-but-not-when-developing-locally-on-emulators-and", "title": "App crashes in GooglePlay store but not when developing locally on emulators and physical devices", "body": "<p>After upgrading my app to a never version and using realm database, it crashes when downloaded from GooglePlay but never when I check it on physical devices or many emulators. What is wrong? Pls help. \nIn my app I used StaticObject to wrap some realm configurations for different languages and inMemory real to keep track of selected object along all the app.</p>\n\n<p>problem:</p>\n\n<pre><code>`java.lang.ExceptionInInitializerError: \n  at pl.nanoid.atlasotoskopii.ui.Start.MainActivity.onCreate (20)\n  at android.app.Activity.performCreate (Activity.java:7458)\n  at android.app.Activity.performCreate (Activity.java:7448)\n  at android.app.Instrumentation.callActivityOnCreate (Instrumentation.java:1286)\n  at android.app.ActivityThread.performLaunchActivity (ActivityThread.java:3409)\n  at android.app.ActivityThread.handleLaunchActivity (ActivityThread.java:3614)\n  at android.app.servertransaction.LaunchActivityItem.execute (LaunchActivityItem.java:86)\n  at android.app.servertransaction.TransactionExecutor.executeCallbacks (TransactionExecutor.java:108)\n  at android.app.servertransaction.TransactionExecutor.execute (TransactionExecutor.java:68)\n  at android.app.ActivityThread$H.handleMessage (ActivityThread.java:2199)\n  at android.os.Handler.dispatchMessage (Handler.java:112)\n  at android.os.Looper.loop (Looper.java:216)\n  at android.app.ActivityThread.main (ActivityThread.java:7625)\n  at java.lang.reflect.Method.invoke (Native Method)\n  at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run (RuntimeInit.java:524)\n  at com.android.internal.os.ZygoteInit.main (ZygoteInit.java:987)\nCaused by: java.lang.IllegalArgumentException: \n  at c.a.q$a.a (3)\n  at c.a.q$a.a (Unknown Source:5)\n  at pl.nanoid.atlasotoskopii.StaticObject.&lt;clinit&gt; (3)`\n</code></pre>\n\n<p>MainActivity:</p>\n\n<pre><code>    class MainActivity : AppCompatActivity() {\n\n    lateinit var inMemRealm: Realm\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n\n        try {\n\n            this.supportActionBar?.hide()\n\n        } finally {\n\n        }\n\n        setContentView(R.layout.activity_main)\n        val navView: BottomNavigationView = findViewById(R.id.nav_view)\n        val navController = findNavController(R.id.nav_host_fragment)\n\n\n        // Passing each menu ID as a set of Ids because each\n        // menu should be considered as top level destinations.\n        val appBarConfiguration = AppBarConfiguration(\n            setOf(\n                R.id.navigation_list,\n                R.id.navigation_info,\n                R.id.navigation_pictures\n            )\n        )\n\n        setupActionBarWithNavController(navController, appBarConfiguration)\n        navView.setupWithNavController(navController)\n\n        // Configure Realm database and create in memory Realm for selecting items\n\n        inMemRealm = Realm.getInstance(StaticObject.inMemoryRealm)\n        inMemRealm.executeTransaction {\n            val inMem = InMemRealm()\n            inMem.id = 1\n            inMemRealm.insert(inMem)\n        }\n        copyDatabaseFromBundle()\n\n    }\n\n    // COPY DATABASE from bundle to the working directory\n\n    private fun copyDatabaseFromBundle() {\n\n    }\n\n}\n</code></pre>\n\n<p>StaticObject:</p>\n\n<pre><code>    object StaticObject {\n\n    // value for number of items for adapters:\n    const val numberOfItemsInAdapters: Int = 24\n\n    val inMemoryRealm: RealmConfiguration\n    val enRealmConfig: RealmConfiguration\n    val plRealmConfig: RealmConfiguration\n    val ruRealmConfig: RealmConfiguration\n\n\n    init {\n\n        enRealmConfig = configureENRealm()\n        plRealmConfig = configurePLRealm()\n        ruRealmConfig = configureRURealm()\n        inMemoryRealm = configureInMemoryRealm()\n\n    }\n\n\n    private fun configureENRealm () : RealmConfiguration {\n\n        return RealmConfiguration.Builder()\n            .assetFile(\"tableen.realm\")\n            .schemaVersion(1)\n            .modules(TableENModule())\n            .name(\"rurealm.realm\")\n            .readOnly()\n            .build()\n    }\n\n    private fun configurePLRealm () : RealmConfiguration {\n\n        return RealmConfiguration.Builder()\n            .assetFile(\"tablepl.realm\")\n            .schemaVersion(1)\n            .modules(TablePLModule())\n            .name(\"plrealm.realm\")\n            .readOnly()\n            .build()\n    }\n\n    private fun configureRURealm () : RealmConfiguration {\n\n        return RealmConfiguration.Builder()\n            .assetFile(\"tableru.realm\")\n            .schemaVersion(1)\n            .modules(TableRUModule())\n            .name(\"enrealm.realm\")\n            .readOnly()\n            .build()\n    }\n\n    private fun configureInMemoryRealm () : RealmConfiguration {\n        return RealmConfiguration.Builder()\n            .inMemory()\n            .name(\"inMemoryRealm\")\n            .build()\n    }\n\n\n    @RealmModule(classes = arrayOf(tableen::class))\n    private class TableENModule\n\n    @RealmModule(classes = arrayOf(tablepl::class))\n    private class TablePLModule\n\n    @RealmModule(classes = arrayOf(tableru::class))\n    private class TableRUModule\n\n}\n</code></pre>\n\n<p>InMemory Realm scheme:</p>\n\n<pre><code>    import io.realm.RealmObject\n\nopen class InMemRealm: RealmObject() {\n\n    var id: Int? = null\n\n}\n</code></pre>\n\n<p>Run on emulator:</p>\n\n<pre><code>11/12 07:49:17: Launching 'app' on Pixel C API 28.\n$ adb shell am start -n \"pl.nanoid.atlasotoskopii/pl.nanoid.atlasotoskopii.ui.Start.StartActivity\" -a android.intent.action.MAIN -c android.intent.category.LAUNCHER\nWaiting for process to come online...\nConnected to process 8060 on device 'Pixel_C_API_28 [emulator-5554]'.\nCapturing and displaying logcat messages from application. This behavior can be disabled in the \"Logcat output\" section of the \"Debugger\" settings page.\nW/.atlasotoskopi: Accessing hidden method Landroid/graphics/drawable/Drawable;-&gt;getOpticalInsets()Landroid/graphics/Insets; (light greylist, linking)\n    Accessing hidden field Landroid/graphics/Insets;-&gt;left:I (light greylist, linking)\n    Accessing hidden field Landroid/graphics/Insets;-&gt;right:I (light greylist, linking)\n    Accessing hidden field Landroid/graphics/Insets;-&gt;top:I (light greylist, linking)\n    Accessing hidden field Landroid/graphics/Insets;-&gt;bottom:I (light greylist, linking)\nW/.atlasotoskopi: Accessing hidden method Landroid/view/View;-&gt;computeFitSystemWindows(Landroid/graphics/Rect;Landroid/graphics/Rect;)Z (light greylist, reflection)\nW/.atlasotoskopi: Accessing hidden method Landroid/view/ViewGroup;-&gt;makeOptionalFitsSystemWindows()V (light greylist, reflection)\nW/.atlasotoskopi: Accessing hidden method Landroid/graphics/FontFamily;-&gt;&lt;init&gt;()V (light greylist, reflection)\nW/.atlasotoskopi: Accessing hidden method Landroid/graphics/FontFamily;-&gt;addFontFromAssetManager(Landroid/content/res/AssetManager;Ljava/lang/String;IZIII[Landroid/graphics/fonts/FontVariationAxis;)Z (light greylist, reflection)\n    Accessing hidden method Landroid/graphics/FontFamily;-&gt;addFontFromBuffer(Ljava/nio/ByteBuffer;I[Landroid/graphics/fonts/FontVariationAxis;II)Z (light greylist, reflection)\n    Accessing hidden method Landroid/graphics/FontFamily;-&gt;freeze()Z (light greylist, reflection)\n    Accessing hidden method Landroid/graphics/FontFamily;-&gt;abortCreation()V (light greylist, reflection)\n    Accessing hidden method Landroid/graphics/Typeface;-&gt;createFromFamiliesWithDefault([Landroid/graphics/FontFamily;Ljava/lang/String;II)Landroid/graphics/Typeface; (light greylist, reflection)\nW/.atlasotoskopi: Accessing hidden method Landroid/widget/TextView;-&gt;getTextDirectionHeuristic()Landroid/text/TextDirectionHeuristic; (light greylist, linking)\nD/OpenGLRenderer: Skia GL Pipeline\nD/HostConnection: HostConnection::get() New Host Connection established 0xe14ee260, tid 8111\nD/HostConnection: HostComposition ext ANDROID_EMU_CHECKSUM_HELPER_v1 ANDROID_EMU_native_sync_v2 ANDROID_EMU_native_sync_v3 ANDROID_EMU_dma_v1 ANDROID_EMU_YUV420_888_to_NV21 ANDROID_EMU_YUV_Cache GL_OES_EGL_image_external_essl3 GL_OES_vertex_array_object GL_KHR_texture_compression_astc_ldr ANDROID_EMU_gles_max_version_3_0 \nI/ConfigStore: android::hardware::configstore::V1_0::ISurfaceFlingerConfigs::hasWideColorDisplay retrieved: 0\nI/ConfigStore: android::hardware::configstore::V1_0::ISurfaceFlingerConfigs::hasHDRDisplay retrieved: 0\nI/OpenGLRenderer: Initialized EGL, version 1.4\nD/OpenGLRenderer: Swap behavior 1\nW/OpenGLRenderer: Failed to choose config with EGL_SWAP_BEHAVIOR_PRESERVED, retrying without...\nD/OpenGLRenderer: Swap behavior 0\nD/eglCodecCommon: setVertexArrayObject: set vao to 0 (0) 0 0\nD/EGL_emulation: eglCreateContext: 0xe208b540: maj 3 min 0 rcv 3\nD/EGL_emulation: eglMakeCurrent: 0xe208b540: ver 3 0 (tinfo 0xe41e0620)\nD/HostConnection: createUnique: call\n    HostConnection::get() New Host Connection established 0xe14f01f0, tid 8111\nD/HostConnection: HostComposition ext ANDROID_EMU_CHECKSUM_HELPER_v1 ANDROID_EMU_native_sync_v2 ANDROID_EMU_native_sync_v3 ANDROID_EMU_dma_v1 ANDROID_EMU_YUV420_888_to_NV21 ANDROID_EMU_YUV_Cache GL_OES_EGL_image_external_essl3 GL_OES_vertex_array_object GL_KHR_texture_compression_astc_ldr ANDROID_EMU_gles_max_version_3_0 \nE/eglCodecCommon: GoldfishAddressSpaceHostMemoryAllocator: ioctl_ping failed for device_type=5, ret=-1\nD/EGL_emulation: eglMakeCurrent: 0xe208b540: ver 3 0 (tinfo 0xe41e0620)\nD/eglCodecCommon: setVertexArrayObject: set vao to 0 (0) 1 2\nW/ActivityThread: handleWindowVisibility: no activity for token android.os.BinderProxy@9195193\nI/System.out: @drawable/photo1min\nI/System.out: @drawable/photo2min\nI/System.out: @drawable/photo3min\nI/System.out: @drawable/photo4min\nI/System.out: @drawable/photo5min\nI/System.out: @drawable/photo6min\nD/EGL_emulation: eglMakeCurrent: 0xe208b540: ver 3 0 (tinfo 0xe41e0620)\nW/ActivityThread: handleWindowVisibility: no activity for token android.os.BinderProxy@4db914d\nD/EGL_emulation: eglMakeCurrent: 0xe208b540: ver 3 0 (tinfo 0xe41e0620)\nW/ActivityThread: handleWindowVisibility: no activity for token android.os.BinderProxy@aa9d30d\nD/EGL_emulation: eglMakeCurrent: 0xe208b540: ver 3 0 (tinfo 0xe41e0620)\n</code></pre>\n"}, {"tags": ["android", "kotlin", "rx-java", "rx-java2"], "comments": [{"owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "edited": false, "score": 0, "creation_date": 1573538796, "post_id": 58812717, "comment_id": 103904247, "body": "Could you show how you subscribe to the stream?"}, {"owner": {"reputation": 687, "user_id": 5216127, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-WDr3Cpl_Bck/AAAAAAAAAAI/AAAAAAAABWc/UBslToHKo1s/photo.jpg?sz=128", "display_name": "Pallavi Tapkir", "link": "https://stackoverflow.com/users/5216127/pallavi-tapkir"}, "reply_to_user": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "edited": false, "score": 0, "creation_date": 1573540383, "post_id": 58812717, "comment_id": 103904753, "body": "@tynn I have edit question, please have a look"}, {"owner": {"reputation": 23894, "user_id": 1844392, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/2jBjo.png?s=128&g=1", "display_name": "Piyush", "link": "https://stackoverflow.com/users/1844392/piyush"}, "edited": false, "score": 0, "creation_date": 1573540851, "post_id": 58812717, "comment_id": 103904905, "body": "Have you checked <a href=\"https://stackoverflow.com/questions/34520107/how-to-handle-onerror-inside-rxjava-i-am-getting-onerrornotimplementedexceptio/34520290\">this</a>?"}, {"owner": {"reputation": 687, "user_id": 5216127, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-WDr3Cpl_Bck/AAAAAAAAAAI/AAAAAAAABWc/UBslToHKo1s/photo.jpg?sz=128", "display_name": "Pallavi Tapkir", "link": "https://stackoverflow.com/users/5216127/pallavi-tapkir"}, "reply_to_user": {"reputation": 23894, "user_id": 1844392, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/2jBjo.png?s=128&g=1", "display_name": "Piyush", "link": "https://stackoverflow.com/users/1844392/piyush"}, "edited": false, "score": 0, "creation_date": 1573543087, "post_id": 58812717, "comment_id": 103905638, "body": "@Piyush yes. Not worked for me."}], "answers": [{"tags": [], "owner": {"reputation": 10859, "user_id": 3710865, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oROuW.jpg?s=128&g=1", "display_name": "sasikumar", "link": "https://stackoverflow.com/users/3710865/sasikumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1573543172, "creation_date": 1573543172, "answer_id": 58813775, "question_id": 58812717, "link": "https://stackoverflow.com/questions/58812717/rxbus-publish-throws-onerrornotimplementedexception/58813775#58813775", "title": "RxBus.Publish() throws OnErrorNotImplementedException", "body": "<p>It should be </p>\n\n<pre><code>   RxBus.subscribe(result -&gt;  if (result is GeneratedPortfolioResponse.GeneratedPortfolioScheme) \n     {\n          // code\n     }, error -&gt; yourshowErrorMethod(error))\n</code></pre>\n"}], "owner": {"reputation": 687, "user_id": 5216127, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-WDr3Cpl_Bck/AAAAAAAAAAI/AAAAAAAABWc/UBslToHKo1s/photo.jpg?sz=128", "display_name": "Pallavi Tapkir", "link": "https://stackoverflow.com/users/5216127/pallavi-tapkir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573543172, "creation_date": 1573537556, "last_edit_date": 1573540329, "question_id": 58812717, "link": "https://stackoverflow.com/questions/58812717/rxbus-publish-throws-onerrornotimplementedexception", "title": "RxBus.Publish() throws OnErrorNotImplementedException", "body": "<p>I am using <code>RxBus</code>for event passing from adapter class to fragment for specific subject</p>\n\n<pre><code>RxBus.publish(RxBus.SUBJECT_DELETE_SCHEME_FROM_CART, option)\n</code></pre>\n\n<p>and subscribe code is</p>\n\n<pre><code>RxBus.subscribe(RxBus.SUBJECT_DELETE_SCHEME_FROM_CART, this, Consumer {\n        if (it is GeneratedPortfolioResponse.GeneratedPortfolioScheme) {\n              // code\n        })\n</code></pre>\n\n<p>when I publish any event from adapter class it throws OnErrorNotImplementedException.</p>\n\n<p>How can I handle this?</p>\n"}, {"tags": ["android", "kotlin", "android-recyclerview", "android-viewtreeobserver"], "owner": {"reputation": 439, "user_id": 4549478, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh3.googleusercontent.com/-4Hu6p-clYU4/AAAAAAAAAAI/AAAAAAAAAHo/JxzHlBX7MPE/photo.jpg?sz=128", "display_name": "SARATH V", "link": "https://stackoverflow.com/users/4549478/sarath-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1573536705, "creation_date": 1573536705, "question_id": 58812580, "link": "https://stackoverflow.com/questions/58812580/recycler-item-view-height-is-changing-after-first-initialisation-in-android", "title": "Recycler item_view height is changing after first initialisation in android", "body": "<p><strong>In recycler_view adapter class the following code is added for dynamically changing height of item_view</strong></p>\n\n<pre><code>   override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): TaskListViewHolder {\n    val itemView = LayoutInflater.from(parent.context).inflate(R.layout.task_item_new, parent, false)\n\n    val vto = parentLayer!!.getViewTreeObserver()\n    vto.addOnGlobalLayoutListener(object : ViewTreeObserver.OnGlobalLayoutListener {\n        override fun onGlobalLayout() {\n            if (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.JELLY_BEAN) {\n                parentLayer!!.getViewTreeObserver().removeGlobalOnLayoutListener(this)\n            } else {\n                parentLayer!!.getViewTreeObserver().removeOnGlobalLayoutListener(this)\n            }\n           var quicktaskLayerwidth = parentLayer!!.getMeasuredWidth()\n           var quicktaskLayerheight = parentLayer!!.getMeasuredHeight()\n\n            Log.e(\"Parent_Ht\", \"\" + quicktaskLayerheight/4)\n            itemView.getLayoutParams().height = quicktaskLayerheight / 4\n\n        }\n    })\n\n\n    return TaskListViewHolder(itemView)\n}\n</code></pre>\n\n<p>In activity class there is a <strong>GridLayoutManager</strong> manager is used for showing <strong>8</strong> icons in recycler_view. </p>\n\n<p>And there is a parent Linear layout, <strong>height</strong> of which is measured in <strong>ViewTreeObserver</strong> </p>\n\n<p><strong>IMP: At first time recycler_view item height works fine, after loading some other pages and returning to main page the height of item is changing. But the log shows height is calculated and which is correct.</strong></p>\n\n<p>If someone faced same issue and resolved, need your help here.</p>\n"}, {"tags": ["android", "kotlin", "retrofit", "multipart"], "comments": [{"owner": {"reputation": 13256, "user_id": 3879847, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/shQpQ.png?s=128&g=1", "display_name": "Ranjith Kumar", "link": "https://stackoverflow.com/users/3879847/ranjith-kumar"}, "edited": false, "score": 0, "creation_date": 1573535561, "post_id": 58812369, "comment_id": 103903381, "body": "show your json response"}, {"owner": {"reputation": 4557, "user_id": 8009433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XbhSe.jpg?s=128&g=1", "display_name": "Navneet Krishna", "link": "https://stackoverflow.com/users/8009433/navneet-krishna"}, "edited": false, "score": 1, "creation_date": 1573535662, "post_id": 58812369, "comment_id": 103903398, "body": "this error clearly states that you are expecting an array on your app where as your api call returns an object response, try converting all references from <code>&lt;List&lt;Loginresponse&gt;</code> to <code>Loginresponse</code> , also sharing your response would help"}, {"owner": {"reputation": 86, "user_id": 7594134, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hAANC5Hn32o/AAAAAAAAAAI/AAAAAAAAAuc/o12OIoZiFYc/photo.jpg?sz=128", "display_name": "Humxa Moghal", "link": "https://stackoverflow.com/users/7594134/humxa-moghal"}, "edited": false, "score": 0, "creation_date": 1573536155, "post_id": 58812369, "comment_id": 103903511, "body": "<a href=\"https://stackoverflow.com/questions/36177629/retrofit2-android-expected-begin-array-but-was-begin-object-at-line-1-column-2?rq=1\">Similar question already answered, please check</a>"}, {"owner": {"reputation": 86, "user_id": 7594134, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hAANC5Hn32o/AAAAAAAAAAI/AAAAAAAAAuc/o12OIoZiFYc/photo.jpg?sz=128", "display_name": "Humxa Moghal", "link": "https://stackoverflow.com/users/7594134/humxa-moghal"}, "edited": false, "score": 1, "creation_date": 1573536270, "post_id": 58812369, "comment_id": 103903540, "body": "<a href=\"https://stackoverflow.com/questions/36177629/retrofit2-android-expected-begin-array-but-was-begin-object-at-line-1-column-2?rq=1\">You should check here first, already explained</a>"}], "answers": [{"tags": [], "owner": {"reputation": 13256, "user_id": 3879847, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/shQpQ.png?s=128&g=1", "display_name": "Ranjith Kumar", "link": "https://stackoverflow.com/users/3879847/ranjith-kumar"}, "is_accepted": false, "score": 1, "last_activity_date": 1573535973, "creation_date": 1573535973, "answer_id": 58812474, "question_id": 58812369, "link": "https://stackoverflow.com/questions/58812369/how-can-i-solve-this-error-expected-begin-array-but-was-begin-object-at-line-1/58812474#58812474", "title": "How can I solve this error :Expected BEGIN_ARRAY but was BEGIN_OBJECT at line 1 column 2 path $", "body": "<p>Your json return as JSON object. But you are trying to convert into Json array</p>\n\n<pre><code> Call&lt;List&lt;Loginresponse&gt;&gt; - you try to convert result as JSON Array (list) \n</code></pre>\n\n<p><strong>Solution</strong> </p>\n\n<p>Get the raw json result &amp; convert the pojo using <a href=\"http://www.jsonschema2pojo.org/\" rel=\"nofollow noreferrer\">http://www.jsonschema2pojo.org/</a> and try again </p>\n"}, {"tags": [], "owner": {"reputation": 1017, "user_id": 8663811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MJk1V.jpg?s=128&g=1", "display_name": "frankenstein", "link": "https://stackoverflow.com/users/8663811/frankenstein"}, "is_accepted": false, "score": 1, "last_activity_date": 1573540610, "creation_date": 1573540610, "answer_id": 58813263, "question_id": 58812369, "link": "https://stackoverflow.com/questions/58812369/how-can-i-solve-this-error-expected-begin-array-but-was-begin-object-at-line-1/58813263#58813263", "title": "How can I solve this error :Expected BEGIN_ARRAY but was BEGIN_OBJECT at line 1 column 2 path $", "body": "<p>You are trying to store json object in list that's why you are getting error .\ncheck your JSON response start with { curly bracket it means it is object not an array . array start with [ square bracket .</p>\n\n<pre><code>@PUT(\"/user/profile/{userId}\")\nfun updateProfile(@Header(\"Authorization\") token: String?, @Path(\"userId\") userID: String, @Part file: MultipartBody.Part): Call&lt;List&lt;Loginresponse&gt;&gt;\n</code></pre>\n\n<p>replace <code>Call&lt;List&lt;Loginresponse&gt;&gt;</code> with <code>Call&lt;Loginresponse&gt;</code> all over where you using  <code>updateProfile</code> method</p>\n"}], "owner": {"reputation": 111, "user_id": 12180120, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7e2vlWSDn2g/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcfE-7ziNnWl6pjCDnFtZ6p_v5y3g/photo.jpg?sz=128", "display_name": "Daesik Park", "link": "https://stackoverflow.com/users/12180120/daesik-park"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1573540610, "creation_date": 1573535297, "question_id": 58812369, "link": "https://stackoverflow.com/questions/58812369/how-can-i-solve-this-error-expected-begin-array-but-was-begin-object-at-line-1", "title": "How can I solve this error :Expected BEGIN_ARRAY but was BEGIN_OBJECT at line 1 column 2 path $", "body": "<p>How can I solve this problem?\nI don't know about solve method.\nCheck my code and help me plz.</p>\n\n<p>Please Ignore: It looks like your post is mostly code; please add some more details. It looks like your post is mostly code; please add some more details. It looks like your post is mostly code; please add some more details. It looks like your post is mostly code; please add some more details. It looks like your post is mostly code; please add some more details. It looks like your post is mostly code; please add some more details. It looks like your post is mostly code; please add some more details. It looks like your post is mostly code; please add some more details. It looks like your post is mostly code; please add some more details. It looks like your post is mostly code; please add some more details.</p>\n\n<pre><code>class InformationActivity : AppCompatActivity() {\n    private val _tag = SplashActivity::class.java.simpleName\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_information)\n\n\n        val uniqueId = SharedPreference.getidInfo(this)\n\n        val token = SharedPreference.getUserInfo(this)\n\n\n        Client.retrofitService.profile(uniqueId, token)\n            .enqueue(object : Callback&lt;LoginResponse&gt; {\n                override fun onFailure(call: Call&lt;LoginResponse&gt;, t: Throwable) {\n\n                }\n\n                override fun onResponse(\n                    call: Call&lt;LoginResponse&gt;,\n                    response: Response&lt;LoginResponse&gt;\n                ) {\n                    if (response?.isSuccessful == false) { val er = Gson().fromJson(response.errorBody()?.charStream(), ErrorResponse::class.java)\n                        Log.d(_tag, \"${er.code}:${er.message}\")\n                        if (er.code == 60203) {\n                            Toast.makeText(this@InformationActivity, \"\", Toast.LENGTH_SHORT).show()\n                        }\n                    } else if (response?.isSuccessful == true) {\n                        Glide.with(applicationContext).asBitmap().load(\"https://s3.amazonaws.com/appsdeveloperblog/micky.gif\").into(imageView)\n                        Toast.makeText(this@InformationActivity, \"\", Toast.LENGTH_LONG).show()\n\n                        val file=File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS),\"micky.gif\")\n                        var fileName=\"micky.gif\"\n\n                        val token = SharedPreference.getUserInfo(applicationContext)\n                        val uniqueId= SharedPreference.getidInfo(applicationContext)\n\n                        var requestBody: RequestBody = RequestBody.create(MediaType.parse(\"image/*\"), file)\n                        val body: MultipartBody.Part = MultipartBody.Part.createFormData(\"profile\",fileName,requestBody)\n\n                            if (uniqueId != null) {\n                                Client.retrofitService.updateProfile(token,uniqueId,body)\n                                    .enqueue(object : Callback&lt;List&lt;LoginResponse&gt;&gt; {\n                                        override fun onFailure(\n                                            call: Call&lt;List&lt;LoginResponse&gt;&gt;,\n                                            t: Throwable) { Log.d(\"\", t.message) }\n\n                                        override fun onResponse(\n                                            call: Call&lt;List&lt;LoginResponse&gt;&gt;,\n                                            response: Response&lt;List&lt;LoginResponse&gt;&gt;) { if (response?.isSuccessful)\n                                        { Toast.makeText(this@InformationActivity, \"File Uploaded Successfully...\", Toast.LENGTH_LONG).show()\n                                                Log.d(\"\", \"\" + response?.body().toString())\n                                            } else {\n                                                Toast.makeText(this@InformationActivity, \"Some error occurred...\", Toast.LENGTH_LONG).show()\n                                            }\n                                        } }) }\n                        }\n                    }\n            }) }\n}\n\n</code></pre>\n\n<pre><code>interface API {\n    @Headers(\"Content-Type: application/json\", \"Authorization:token:String\")\n\n    @Multipart\n    @PUT(\"/user/profile/{userId}\")\n    fun updateProfile(@Header(\"Authorization\") token: String?, @Path(\"userId\") userID: String, @Part file: MultipartBody.Part): Call&lt;List&lt;Loginresponse&gt;&gt;\n\n}\n</code></pre>\n\n<pre><code>object Client {\n    var retrofitService: API\n\n    init {\n        val interceptor = HttpLoggingInterceptor()\n        interceptor.level = HttpLoggingInterceptor.Level.BODY\n        val logger: OkHttpClient = OkHttpClient.Builder().addInterceptor(interceptor).readTimeout(20, TimeUnit.SECONDS).writeTimeout(20, TimeUnit.SECONDS).build()\n\n        val retrofit = Retrofit.Builder()\n            .baseUrl(\"myurl\")\n            .addConverterFactory(GsonConverterFactory.create())\n            .client(logger)\n            .build()\n\n        retrofitService = retrofit.create(API::class.java)\n    }\n}\n</code></pre>\n\n<pre><code>    @SerializedName(\"uniqueId\")\n    val user:String?=null\n\n    @SerializedName(\"nickname\")\n\n    val nickname: String?=null\n\n    @SerializedName(\"birth\")\n\n    val birth: String?=null\n\n    @SerializedName(\"profileImage\")\n\n    val profileImage: String?=null\n\n    @SerializedName(\"profileThumbnail\")\n\n    val profileThumbnails: String?=null\n\n    @SerializedName(\"gender\")\n\n    val gender: Int?=null\n\n    @SerializedName(\"token\")\n    val token: String? = null\n}\n\n\n\n\n</code></pre>\n"}, {"tags": ["kotlin", "tornadofx"], "answers": [{"tags": [], "owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "is_accepted": true, "score": 1, "last_activity_date": 1573540619, "creation_date": 1573540619, "answer_id": 58813267, "question_id": 58812259, "link": "https://stackoverflow.com/questions/58812259/unresolved-reference-fontawesomeiconview-what-library-should-i-import/58813267#58813267", "title": "Unresolved reference: FontAwesomeIconView - What library should I import?", "body": "<p>Add the dependency <code>de.jensd.fontawesomefx</code> to your project :) In the TornadoFX distribution we use it for testing, like this (Maven Syntax, adjust to your build system):</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;de.jensd&lt;/groupId&gt;\n    &lt;artifactId&gt;fontawesomefx&lt;/artifactId&gt;\n    &lt;version&gt;8.9&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}], "owner": {"reputation": 156, "user_id": 2154742, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5l16S.jpg?s=128&g=1", "display_name": "JasonArg123", "link": "https://stackoverflow.com/users/2154742/jasonarg123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 58813267, "answer_count": 1, "score": 0, "last_activity_date": 1573540619, "creation_date": 1573534514, "question_id": 58812259, "link": "https://stackoverflow.com/questions/58812259/unresolved-reference-fontawesomeiconview-what-library-should-i-import", "title": "Unresolved reference: FontAwesomeIconView - What library should I import?", "body": "<p>Following a Tornadofx tutorial, I am trying to use a function called FontAwesomeIconView() that is to be used to define a Fieldset. The problem is that I don't know what library to import in order to use FontAwesomeIconView. </p>\n\n<p>The tutorial I'm using is here: <a href=\"https://github.com/edvin/tornadofx/wiki/\" rel=\"nofollow noreferrer\">https://github.com/edvin/tornadofx/wiki/</a>. I tried searching for information about FontAwesomeIconView but came up dry. </p>\n\n<p>The code used for this example is as follows:</p>\n\n<pre><code>class CustomerForm : View() {\n    override val root = Form()\n\n    val customer = Customer()\n\n    init {\n        title = \"Register Customer\"\n\n        with (root) {\n            fieldset(\"Personal Information\", FontAwesomeIconView(USER)) {\n                field(\"Name\") {\n                    textfield().bind(customer.nameProperty())\n                }\n\n            }\n        }\n    }\n\n}\n</code></pre>\n\n<p>I expected to see \"Personal Information\" text displayed in a larger, bold font with a User icon. But I'm just getting an error saying FontAwesomeIconView is an unresolved reference.</p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "edited": false, "score": 0, "creation_date": 1573558224, "post_id": 58812220, "comment_id": 103912942, "body": "can the string contain multiple numbers (scattered across the string) or just one?"}, {"owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "edited": false, "score": 0, "creation_date": 1574004775, "post_id": 58812220, "comment_id": 104067264, "body": "could we help you?"}], "answers": [{"tags": [], "owner": {"reputation": 8231, "user_id": 1113211, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/5J0hr.jpg?s=128&g=1", "display_name": "salmanwahed", "link": "https://stackoverflow.com/users/1113211/salmanwahed"}, "is_accepted": false, "score": 3, "last_activity_date": 1573536011, "creation_date": 1573536011, "answer_id": 58812481, "question_id": 58812220, "link": "https://stackoverflow.com/questions/58812220/extract-numbers-from-a-string-kotlin/58812481#58812481", "title": "Extract numbers from a string kotlin", "body": "<p>Your code is working fine. Here <code>string</code> is immutable. So it's value can't be changed. But you can assign another variable to the replaced string. </p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    var string = \"vsdhfnmsdbvfuf121535435aewr\"\n    var res = string.replace(\"[^0-9]\".toRegex(), \"\")\n    println(res)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 640, "user_id": 7966313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXcL5.jpg?s=128&g=1", "display_name": "Enzo Lizama", "link": "https://stackoverflow.com/users/7966313/enzo-lizama"}, "is_accepted": false, "score": 2, "last_activity_date": 1573557067, "last_edit_date": 1573557067, "creation_date": 1573536044, "answer_id": 58812484, "question_id": 58812220, "link": "https://stackoverflow.com/questions/58812220/extract-numbers-from-a-string-kotlin/58812484#58812484", "title": "Extract numbers from a string kotlin", "body": "<p>The <code>replace</code> method returns a new <code>String</code>, not modify the base. You can try this <a href=\"https://play.kotlinlang.org/\" rel=\"nofollow noreferrer\">here</a>, and will work for you.</p>\n\n<pre><code>var s1 = \"vsdhfnmsdbvfuf121535435aewr\"  \nvar s2 = s1.replace(\"[^0-9]\".toRegex(), \"\")\nprint(s2)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "is_accepted": false, "score": 1, "last_activity_date": 1573558510, "last_edit_date": 1573558510, "creation_date": 1573557982, "answer_id": 58817730, "question_id": 58812220, "link": "https://stackoverflow.com/questions/58812220/extract-numbers-from-a-string-kotlin/58817730#58817730", "title": "Extract numbers from a string kotlin", "body": "<p><code>replace</code> will not mutate the String <code>str</code>, that's why it is ok for <code>str</code> to be immutable (<code>val</code>) which it should be.</p>\n\n<pre><code>val str = \"vsdhfnmsdbvfuf121535435aewr\"\nval num = str.replace(Regex(\"[^0-9]\"), \"\")\nprintln(num)\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>4545121535435</p>\n</blockquote>\n\n<hr>\n\n<p>Since the title of your questions reads \"numbers\": In case you have multiple numbers scattered across the String you can use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/-regex/find-all.html\" rel=\"nofollow noreferrer\">Regex.findAll</a>. This is also a more fail safe solution because if you just remove what is around numbers then you might end up interpreting \"a1b2c3\" as \"123\" instead of as \"[1 ,2 ,3]\".</p>\n\n<pre><code>val str = \"vsdhfn4545msdbvfuf121535435aewr\"\nval numbers = Regex(\"[0-9]+\").findAll(str)\n        .map(MatchResult::value)\n        .toList()\n\nprintln(numbers)\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>[4545, 121535435]</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 2377, "user_id": 4639479, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-8o3nUQgApmM/AAAAAAAAAAI/AAAAAAAACvc/JPC4RXqvh-g/photo.jpg?sz=128", "display_name": "Bincy Baby", "link": "https://stackoverflow.com/users/4639479/bincy-baby"}, "edited": false, "score": 0, "creation_date": 1594301946, "post_id": 60424457, "comment_id": 111083237, "body": "If the input has . ,Then ?"}, {"owner": {"reputation": 1471, "user_id": 103131, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/vlH3U.png?s=128&g=1", "display_name": "jj.", "link": "https://stackoverflow.com/users/103131/jj"}, "reply_to_user": {"reputation": 2377, "user_id": 4639479, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-8o3nUQgApmM/AAAAAAAAAAI/AAAAAAAACvc/JPC4RXqvh-g/photo.jpg?sz=128", "display_name": "Bincy Baby", "link": "https://stackoverflow.com/users/4639479/bincy-baby"}, "edited": false, "score": 0, "creation_date": 1595438003, "post_id": 60424457, "comment_id": 111477260, "body": "A simple unit test can help you figure out how to include a period: <code>var result = string.filter { it.isDigit() || it == &#39;.&#39;}</code>"}], "tags": [], "owner": {"reputation": 1471, "user_id": 103131, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/vlH3U.png?s=128&g=1", "display_name": "jj.", "link": "https://stackoverflow.com/users/103131/jj"}, "is_accepted": false, "score": 35, "last_activity_date": 1582762229, "creation_date": 1582762229, "answer_id": 60424457, "question_id": 58812220, "link": "https://stackoverflow.com/questions/58812220/extract-numbers-from-a-string-kotlin/60424457#60424457", "title": "Extract numbers from a string kotlin", "body": "<p>You could also take advantage of Kotlin's String.filter:</p>\n\n<pre><code>var string = \"vsdhfnmsdbvfuf121535435aewr\"\nvar result = string.filter { it.isDigit() }\n</code></pre>\n\n<p>I got this from here: <a href=\"https://stackoverflow.com/a/57316352\">https://stackoverflow.com/a/57316352</a></p>\n"}, {"tags": [], "owner": {"reputation": 459, "user_id": 9117355, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-cbROviUOp_I/AAAAAAAAAAI/AAAAAAAABUg/_B1KMZoc3mc/photo.jpg?sz=128", "display_name": "Th&#224;nh H&#224; V\u0103n", "link": "https://stackoverflow.com/users/9117355/th%c3%a0nh-h%c3%a0-v%c4%83n"}, "is_accepted": false, "score": 0, "last_activity_date": 1582769343, "creation_date": 1582769343, "answer_id": 60425322, "question_id": 58812220, "link": "https://stackoverflow.com/questions/58812220/extract-numbers-from-a-string-kotlin/60425322#60425322", "title": "Extract numbers from a string kotlin", "body": "<p>The replace function does not modify your string, but it return a new string. Your code will be fine:</p>\n\n<ul>\n<li><code>val result = replace(\"[^0-9]\".toRegex(), \"\")</code></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 79, "user_id": 11956865, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDBP8h1I0IJsyOHhkDKdtAvbYxsse687fPxTxzL=k-s128", "display_name": "Muhammad Mubeen", "link": "https://stackoverflow.com/users/11956865/muhammad-mubeen"}, "is_accepted": false, "score": 0, "last_activity_date": 1582782762, "creation_date": 1582782762, "answer_id": 60427026, "question_id": 58812220, "link": "https://stackoverflow.com/questions/58812220/extract-numbers-from-a-string-kotlin/60427026#60427026", "title": "Extract numbers from a string kotlin", "body": "<p>Try this example:</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>  try {\n        val p = Pattern.compile(\"\\\\d+\")\n        var m = p.matcher(\"string1234more567string890\")\n         while (m.find()) {\n           System.out.println(m.group())\n          }\n      }catch (ex:java.lang.Exception){\n      }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3092, "user_id": 4528126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d048311e7a8628599bf58f40938a57fe?s=128&d=identicon&r=PG&f=1", "display_name": "Prasad", "link": "https://stackoverflow.com/users/4528126/prasad"}, "is_accepted": false, "score": 3, "last_activity_date": 1595921360, "last_edit_date": 1595921360, "creation_date": 1595920952, "answer_id": 63128932, "question_id": 58812220, "link": "https://stackoverflow.com/questions/58812220/extract-numbers-from-a-string-kotlin/63128932#63128932", "title": "Extract numbers from a string kotlin", "body": "<p>For some cases like if the text contains formatted amount, then the above answers might fail. For example, if the text is &quot;<em>Rs. 1,00,000.00</em>&quot; and if we only filter <strong>.</strong> and <strong>digit</strong>, then the output we get is .100000.00 this will be a wrong amount. So better first extract the string between digits and then filter for digit and Dot.</p>\n<pre><code>    fun String.getAmount(): String {\n    return substring(indexOfFirst { it.isDigit() }, indexOfLast { it.isDigit() } + 1)\n        .filter { it.isDigit() || it == '.' }\n    }\n</code></pre>\n<p>Following cases will be covered using above code</p>\n<blockquote>\n<pre><code>  println(&quot;Rs. 123&quot;.getAmount())\n  println(&quot;Rs. 123.23&quot;.getAmount())\n  println(&quot;Rs. 123.23/-&quot;.getAmount())\n  println(&quot;INR123.23&quot;.getAmount())\n  println(&quot;123.23INR&quot;.getAmount())\n  println(&quot;$100,000.00&quot;.getAmount())\n  println(&quot;Rs.100,000.00&quot;.getAmount())\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 81, "user_id": 12358951, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAlbD5J56ESjjzHiEyY1vEEFRUwa6j_CD37Ons=k-s128", "display_name": "Ho Binh", "link": "https://stackoverflow.com/users/12358951/ho-binh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9198, "favorite_count": 1, "answer_count": 7, "score": 8, "last_activity_date": 1595921360, "creation_date": 1573534265, "last_edit_date": 1573558271, "question_id": 58812220, "link": "https://stackoverflow.com/questions/58812220/extract-numbers-from-a-string-kotlin", "title": "Extract numbers from a string kotlin", "body": "<p><code>String.replaceAll</code> is not running and is unsupported in Kotlin. So I suggest a demo example, I hope it help. </p>\n\n<pre><code>var string = \"vsdhfnmsdbvfuf121535435aewr\"  \nstring.replace(\"[^0-9]\".toRegex(), \"\")\n</code></pre>\n"}, {"tags": ["java", "kotlin", "int"], "answers": [{"comments": [{"owner": {"reputation": 2799, "user_id": 5233942, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/9e8981604413ec5d545c042e354da7d5?s=128&d=identicon&r=PG&f=1", "display_name": "L. Swifter", "link": "https://stackoverflow.com/users/5233942/l-swifter"}, "edited": false, "score": 0, "creation_date": 1573535618, "post_id": 58812033, "comment_id": 103903395, "body": "I found that  <code>private val a: Int = 0xFFFF0000</code> is not work. It&#39;right that 0xFFFF0000 is <code>Long</code> Type, and I got the reason. But, why <code>0xFFFF0000</code> is a <code>Long</code> type, I think it&#39;s <code>Int</code> type."}, {"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 1, "creation_date": 1573570309, "post_id": 58812033, "comment_id": 103919212, "body": "If the first hex digit is 8 or higher, the positive number is too big to fit in an Int. Kotlin treats this differently than Java, which lets the number wrap around to negative. This is considered a bug by the JetBrains team, but it&#39;s one they haven&#39;t fixed in six years: <a href=\"https://youtrack.jetbrains.com/issue/KT-4749?_ga=2.112688001.407694624.1573479899-370803150.1565276011\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/&hellip;</a>"}], "tags": [], "owner": {"reputation": 879, "user_id": 9881903, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xOtup.jpg?s=128&g=1", "display_name": "GuanHongHuang", "link": "https://stackoverflow.com/users/9881903/guanhonghuang"}, "is_accepted": true, "score": 0, "last_activity_date": 1573532940, "creation_date": 1573532940, "answer_id": 58812033, "question_id": 58811970, "link": "https://stackoverflow.com/questions/58811970/why-can-not-use-hex-int-in-kotlin-method-intarrayof/58812033#58812033", "title": "Why can not use hex Int in kotlin method intArrayOf?", "body": "<p>because 0xFFFF0000 is <code>Long</code> Type,</p>\n\n<p>You can use <code>private val array: IntArray = intArrayOf(0xFFFF0000.toInt())</code></p>\n\n<p>to change type from Long to Int</p>\n\n<p>or declare <code>LongArray</code> type </p>\n\n<p>like <code>private val array: LongArray = longArrayOf(0xFFFF0000)</code></p>\n"}, {"tags": [], "owner": {"reputation": 2365, "user_id": 4774054, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/LRst1.jpg?s=128&g=1", "display_name": "Frank Neblung", "link": "https://stackoverflow.com/users/4774054/frank-neblung"}, "is_accepted": false, "score": 2, "last_activity_date": 1573543530, "creation_date": 1573543530, "answer_id": 58813852, "question_id": 58811970, "link": "https://stackoverflow.com/questions/58811970/why-can-not-use-hex-int-in-kotlin-method-intarrayof/58813852#58813852", "title": "Why can not use hex Int in kotlin method intArrayOf?", "body": "<p>While <code>0x7FFF_FFFF</code> is of typ Int, hex literals starting from <code>0x8000_0000</code> are of type Long.</p>\n\n<p>You need 32 bit to store <code>0x8000_0000</code>. While Int is signed, the value is (the least one, that is) too big to be stored in an Int.</p>\n\n<p>You can use negative hex literals though</p>\n\n<pre><code>val a: IntArray = intArrayOf(-0x1_0000)\n</code></pre>\n\n<p>If you are on the JVM, you can check with</p>\n\n<pre><code>a.forEach { println(Integer.toHexString(it)) }\nassert(0x7FFF_FFFF == Integer.MAX_VALUE)\nassert(-0x8000_0000 == Integer.MIN_VALUE)\n</code></pre>\n"}], "owner": {"reputation": 2799, "user_id": 5233942, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/9e8981604413ec5d545c042e354da7d5?s=128&d=identicon&r=PG&f=1", "display_name": "L. Swifter", "link": "https://stackoverflow.com/users/5233942/l-swifter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "accepted_answer_id": 58812033, "answer_count": 2, "score": 1, "last_activity_date": 1573543530, "creation_date": 1573532348, "question_id": 58811970, "link": "https://stackoverflow.com/questions/58811970/why-can-not-use-hex-int-in-kotlin-method-intarrayof", "title": "Why can not use hex Int in kotlin method intArrayOf?", "body": "<p>I found a strange problem in Kotlin.</p>\n\n<p>I can assign a hexadecimal integer to an Int variable, just like:</p>\n\n<pre><code>private val a = 0xFFFF0000    //works good\n</code></pre>\n\n<p>but I can't use this hex integer in <code>intArrayOf</code>:</p>\n\n<pre><code>private val array: IntArray = intArrayOf(0xFFFF0000)\n</code></pre>\n\n<p>IDE prompts: <em>the integer literal does not conform to the expected type Int</em>.\n<a href=\"https://i.stack.imgur.com/1lTSK.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1lTSK.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Does anyone know why? and is there anyway to use <code>0xFFFF0000</code> in <code>intArrayof</code>?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 6712, "user_id": 6678991, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/vT7P5.jpg?s=128&g=1", "display_name": "Mahdi-Malv", "link": "https://stackoverflow.com/users/6678991/mahdi-malv"}, "edited": false, "score": 0, "creation_date": 1573530889, "post_id": 58811724, "comment_id": 103902497, "body": "Please consider adding the error stacktrace"}, {"owner": {"reputation": 680, "user_id": 4105658, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KTWIT.jpg?s=128&g=1", "display_name": "Slipoch", "link": "https://stackoverflow.com/users/4105658/slipoch"}, "edited": false, "score": 0, "creation_date": 1573536832, "post_id": 58811724, "comment_id": 103903685, "body": "Or the response error?"}], "owner": {"reputation": 5, "user_id": 8872846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489b32c800703eeb80f1b706faadc9bd?s=128&d=identicon&r=PG&f=1", "display_name": "carlo", "link": "https://stackoverflow.com/users/8872846/carlo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1574602200, "creation_date": 1573530297, "last_edit_date": 1574602200, "question_id": 58811724, "link": "https://stackoverflow.com/questions/58811724/handling-a-onreponse-error-in-a-kotlin-program", "title": "Handling a onreponse error in a Kotlin program", "body": "<p>I am trying to work out what's wrong with this code ? I'm new to this. I'm having a response error,</p>\n\n<pre><code>        val stringRequest = object : StringRequest(Request.Method.POST, EndPoints.URL_ADD_ARTIST,\n            Response.Listener&lt;String&gt; { response -&gt;\n                try {\n                    val obj = JSONObject(response)\n                    Toast.makeText(applicationContext, obj.getString(\"message\"), Toast.LENGTH_LONG).show()\n                } catch (e: JSONException) {\n                    e.printStackTrace()\n                }\n            },\n            object : Response.ErrorListener {\n                override fun onErrorResponse(volleyError: VolleyError) {\n                    Toast.makeText(applicationContext, volleyError.message, Toast.LENGTH_LONG).show()\n                }\n            }) {\n            @Throws(AuthFailureError::class)\n            override fun getParams(): Map&lt;String, String&gt; {\n                val params = HashMap&lt;String, String&gt;()\n                params.put(\"user\", user)\n                params.put(\"password\", password)\n                params.put(\"email\", email)\n                return params\n            }\n        }\n\n        VolleySingleton.instance?.addToRequestQueue(stringRequest)\n    }\n</code></pre>\n\n<p>These lines are causing the error.</p>\n\n<pre><code>val stringRequest = object : StringRequest(Request.Method.POST, EndPoints.URL_ADD_ARTIST,\n                Response.Listener&lt;String&gt; { response -&gt;\nval obj = JSONObject(response)\n</code></pre>\n"}, {"tags": ["android", "google-maps", "kotlin", "google-play-services", "google-maps-markers"], "comments": [{"owner": {"reputation": 4346, "user_id": 1292557, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ccb0ba86944ca95bd765dfcc1ed3eb32?s=128&d=identicon&r=PG", "display_name": "Abu Yousuf", "link": "https://stackoverflow.com/users/1292557/abu-yousuf"}, "edited": false, "score": 0, "creation_date": 1573531763, "post_id": 58811648, "comment_id": 103902633, "body": "what did you mean by pin?"}, {"owner": {"reputation": 952, "user_id": 3017105, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/bd63c6c3ee7fe49585b81c50100bada4?s=128&d=identicon&r=PG&f=1", "display_name": "iSofia", "link": "https://stackoverflow.com/users/3017105/isofia"}, "reply_to_user": {"reputation": 4346, "user_id": 1292557, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ccb0ba86944ca95bd765dfcc1ed3eb32?s=128&d=identicon&r=PG", "display_name": "Abu Yousuf", "link": "https://stackoverflow.com/users/1292557/abu-yousuf"}, "edited": false, "score": 0, "creation_date": 1573532184, "post_id": 58811648, "comment_id": 103902718, "body": "The icon representing the marker that can be tapped to display the info window."}, {"owner": {"reputation": 4346, "user_id": 1292557, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ccb0ba86944ca95bd765dfcc1ed3eb32?s=128&d=identicon&r=PG", "display_name": "Abu Yousuf", "link": "https://stackoverflow.com/users/1292557/abu-yousuf"}, "edited": false, "score": 0, "creation_date": 1573533399, "post_id": 58811648, "comment_id": 103902937, "body": "Can you provide any screen shot of the problem"}, {"owner": {"reputation": 952, "user_id": 3017105, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/bd63c6c3ee7fe49585b81c50100bada4?s=128&d=identicon&r=PG&f=1", "display_name": "iSofia", "link": "https://stackoverflow.com/users/3017105/isofia"}, "reply_to_user": {"reputation": 4346, "user_id": 1292557, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ccb0ba86944ca95bd765dfcc1ed3eb32?s=128&d=identicon&r=PG", "display_name": "Abu Yousuf", "link": "https://stackoverflow.com/users/1292557/abu-yousuf"}, "edited": false, "score": 0, "creation_date": 1573550107, "post_id": 58811648, "comment_id": 103908794, "body": "@AbuYousuf I&#39;ve expanded my answer with the screenshot. Any direction would be appreciated. Thank you."}, {"owner": {"reputation": 4346, "user_id": 1292557, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ccb0ba86944ca95bd765dfcc1ed3eb32?s=128&d=identicon&r=PG", "display_name": "Abu Yousuf", "link": "https://stackoverflow.com/users/1292557/abu-yousuf"}, "edited": false, "score": 0, "creation_date": 1573559292, "post_id": 58811648, "comment_id": 103913495, "body": "I think your are reinitialize <code>myMapMarker</code> so that the previous marker stays same"}, {"owner": {"reputation": 952, "user_id": 3017105, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/bd63c6c3ee7fe49585b81c50100bada4?s=128&d=identicon&r=PG&f=1", "display_name": "iSofia", "link": "https://stackoverflow.com/users/3017105/isofia"}, "reply_to_user": {"reputation": 4346, "user_id": 1292557, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ccb0ba86944ca95bd765dfcc1ed3eb32?s=128&d=identicon&r=PG", "display_name": "Abu Yousuf", "link": "https://stackoverflow.com/users/1292557/abu-yousuf"}, "edited": false, "score": 0, "creation_date": 1573559756, "post_id": 58811648, "comment_id": 103913722, "body": "@AbuYousuf The variable <code>myMapMarker</code> is a global variable defined as <b>MarkerOptions</b>. <code>myMapMarker</code> is initialized only once in the <b>onMapReady()</b> method. Then later, when the location is updated, <code>myMapMarker</code> is moved with the <b>setPosition()</b> function. No reinitialization - only the position is changed. But the display is not updated to show the icon in the new position."}], "answers": [{"tags": [], "owner": {"reputation": 952, "user_id": 3017105, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/bd63c6c3ee7fe49585b81c50100bada4?s=128&d=identicon&r=PG&f=1", "display_name": "iSofia", "link": "https://stackoverflow.com/users/3017105/isofia"}, "is_accepted": true, "score": 0, "last_activity_date": 1573567939, "creation_date": 1573567939, "answer_id": 58820411, "question_id": 58811648, "link": "https://stackoverflow.com/questions/58811648/android-google-map-marker-not-repositioning-correctly/58820411#58820411", "title": "Android Google Map Marker not repositioning correctly", "body": "<p>The answer was staring me in the face the whole time.</p>\n\n<p>I have been adding <strong>MarkerOptions</strong> to the map instead of <strong>Marker</strong>. That is why the position data <em>(marker options)</em> changed but not the marker position itself.</p>\n\n<p>Problem solved!</p>\n"}], "owner": {"reputation": 952, "user_id": 3017105, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/bd63c6c3ee7fe49585b81c50100bada4?s=128&d=identicon&r=PG&f=1", "display_name": "iSofia", "link": "https://stackoverflow.com/users/3017105/isofia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 650, "favorite_count": 0, "accepted_answer_id": 58820411, "answer_count": 1, "score": 0, "last_activity_date": 1588046345, "creation_date": 1573529667, "last_edit_date": 1573560630, "question_id": 58811648, "link": "https://stackoverflow.com/questions/58811648/android-google-map-marker-not-repositioning-correctly", "title": "Android Google Map Marker not repositioning correctly", "body": "<p>I am displaying a Google map in an Android application with two markers. On the <strong>onMapReady</strong> method everything works well, the map renders and the markers appear with the relevant bitmaps and information.</p>\n\n<p>I have even implemented a zoom boundary using the <strong>CameraUpdateFactory()</strong> function with <strong>LatLngBounds</strong>. Again, up to this point, <strong>everything works well and as expected</strong>. Here's the snippet:</p>\n\n<pre><code>override fun onMapReady(googleMap: GoogleMap?) {\n  myGoogleMap = googleMap   \n\n  // myMapMarker is a global variable of type MarkerOptions\n  // the options are set only once here and never changed elsewhere in the code\n  myMapMarker = MarkerOptions()\n                .position(LatLng(34.1478, 118.1445))\n                .title(\"My Location\")\n                .snippet(\"Description of my location...\")\n                .icon(BitmapDescriptorFactory.fromBitmap(pinBitmap))\n\n  // myMapMarker is added to the map only once here and\n  // never removed or added again elsewhere in the code\n  myGoogleMap?.addMarker(myMapMarker)\n}\n</code></pre>\n\n<p>However, when I try to reposition the marker using the marker <strong>setPosition</strong> function <em>(just <strong>position</strong> in Kotlin)</em>, the marker position is changed but the pin remains in its original position, with the info-window still functional. I know that the marker position is updated because the next call to the <em>zoom to bounds</em> function zooms in to the new boundaries.</p>\n\n<pre><code>// only one attempt is made to move myMapMarker here \n// the marker location is successfully changed \n// &gt;&gt;&gt; evidenced by println(myMapMarker?.location)\n// the marker icon/pin is not re-positioned\nmyMapMarker?.position(LatLng(mapData.latitude, mapData.longitude))\n</code></pre>\n\n<p>I've read that the markers should be <strong>re-positioned</strong> and not removed &amp; added again. So, is there a missing step in getting the marker to reposition correctly?</p>\n\n<p>I've also tried to downgrade the Google Play Maps API from 17 to 16, but still getting the same results.</p>\n\n<p>TIA.</p>\n\n<hr>\n\n<p><strong>EDIT: Adding a screenshot to illustrate the issue</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/dYiZP.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dYiZP.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>The original marker was at 452 Ford Place <em>(the red marker).</em> After performing a <strong>setPosition()</strong>, the red marker should appear where the blue marker is, but it doesn't. It stays at 452 Ford Place.</p>\n"}, {"tags": ["spring-boot", "kotlin"], "comments": [{"owner": {"reputation": 3054, "user_id": 1776132, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UpWqp.png?s=128&g=1", "display_name": "Smile", "link": "https://stackoverflow.com/users/1776132/smile"}, "edited": false, "score": 0, "creation_date": 1573529102, "post_id": 58811468, "comment_id": 103902177, "body": "Did you try <code>@ComponentScan(arrayOf(&quot;com.tx.loader&quot;,&quot;com.tx.common&quot;))</code> ?"}, {"owner": {"reputation": 105, "user_id": 2621786, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/2rGVN.jpg?s=128&g=1", "display_name": "chiradee", "link": "https://stackoverflow.com/users/2621786/chiradee"}, "reply_to_user": {"reputation": 3054, "user_id": 1776132, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UpWqp.png?s=128&g=1", "display_name": "Smile", "link": "https://stackoverflow.com/users/1776132/smile"}, "edited": false, "score": 0, "creation_date": 1573529373, "post_id": 58811468, "comment_id": 103902225, "body": "Type mismatch, Required is String but found Array&lt;String&gt;"}, {"owner": {"reputation": 788, "user_id": 12013107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fhRtp.jpg?s=128&g=1", "display_name": "Saurabh", "link": "https://stackoverflow.com/users/12013107/saurabh"}, "edited": false, "score": 0, "creation_date": 1573529740, "post_id": 58811468, "comment_id": 103902292, "body": "Did you try <code>@ComponentScan(basePackages={&quot;com.tx.loader&quot;,&quot;com.tx.common&quot;&zwnj;&#8203;})</code>?"}, {"owner": {"reputation": 105, "user_id": 2621786, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/2rGVN.jpg?s=128&g=1", "display_name": "chiradee", "link": "https://stackoverflow.com/users/2621786/chiradee"}, "edited": false, "score": 0, "creation_date": 1573530179, "post_id": 58811468, "comment_id": 103902370, "body": "Yes I already tried that and it also gives me the same error <code>Unexpected tokens (Use &#39;;&#39; to separate expressions on the same line)</code>"}, {"owner": {"reputation": 440, "user_id": 3346408, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/j42Bs.jpg?s=128&g=1", "display_name": "Rahul Bhawar", "link": "https://stackoverflow.com/users/3346408/rahul-bhawar"}, "edited": false, "score": 0, "creation_date": 1573531951, "post_id": 58811468, "comment_id": 103902670, "body": "You can check this - <a href=\"https://stackoverflow.com/questions/10794587/how-to-scan-multiple-paths-using-the-componentscan-annotation\" title=\"how to scan multiple paths using the componentscan annotation\">stackoverflow.com/questions/10794587/&hellip;</a>"}, {"owner": {"reputation": 105, "user_id": 2621786, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/2rGVN.jpg?s=128&g=1", "display_name": "chiradee", "link": "https://stackoverflow.com/users/2621786/chiradee"}, "edited": false, "score": 0, "creation_date": 1573535842, "post_id": 58811468, "comment_id": 103903437, "body": "I already checked that, it is indicated on my post"}, {"owner": {"reputation": 5378, "user_id": 2110683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33179a1918a5d90f47cde062fab10ff4?s=128&d=identicon&r=PG", "display_name": "Dimitry Ernot", "link": "https://stackoverflow.com/users/2110683/dimitry-ernot"}, "edited": false, "score": 0, "creation_date": 1573545082, "post_id": 58811468, "comment_id": 103906445, "body": "<code>@ComponentScan(basePackages = [&quot;org.my.package&quot;, &quot;org.my.package2&quot;])</code> should work (I tested it on a configuration class)"}], "answers": [{"tags": [], "owner": {"reputation": 2928, "user_id": 7747942, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5jXKyAbmi_M/AAAAAAAAAAI/AAAAAAAAAFQ/AewmU0ev_68/photo.jpg?sz=128", "display_name": "Sylhare", "link": "https://stackoverflow.com/users/7747942/sylhare"}, "is_accepted": false, "score": 0, "last_activity_date": 1601321923, "last_edit_date": 1601321923, "creation_date": 1594307873, "answer_id": 62818187, "question_id": 58811468, "link": "https://stackoverflow.com/questions/58811468/using-multiple-path-in-componentscan-is-not-working/62818187#62818187", "title": "Using multiple path in @ComponentScan is not working", "body": "<p>Hey in <strong>Kotlin</strong> I found <code>@ComponentScan</code> to be a bit tricky.\nHere is how I used it, hopefully it matches your case:</p>\n<p>To specify the base package classes:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@ComponentScan(\nbasePackageClasses = [com.tx.loader.Example1::class, com.tx.common.Example2::class])\n)\n</code></pre>\n<p>Or use this one to specify the package names:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@ComponentScan(\n    basePackages = [&quot;com.tx.loader&quot;, &quot;com.tx.common&quot;]\n)\n</code></pre>\n<p>Or you could use it in test with the Filter for services or components to autowire only what you need:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>import org.springframework.context.annotation.ComponentScan\nimport org.springframework.stereotype.Component\nimport org.springframework.stereotype.Service\n\n@ComponentScan(\n    includeFilters = [ComponentScan.Filter(Service::class), ComponentScan.Filter(Component::class)],\n)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4313, "user_id": 2224047, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UZ83S.jpg?s=128&g=1", "display_name": "Nikolai  Shevchenko", "link": "https://stackoverflow.com/users/2224047/nikolai-shevchenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1601321717, "last_edit_date": 1601321717, "creation_date": 1600954761, "answer_id": 64047737, "question_id": 58811468, "link": "https://stackoverflow.com/questions/58811468/using-multiple-path-in-componentscan-is-not-working/64047737#64047737", "title": "Using multiple path in @ComponentScan is not working", "body": "<p>In Kotlin you don't use <code>{}</code> for array declaration, should use <code>[]</code> instead. In your particular case you can also use simplified notation</p>\n<pre><code>@ComponentScan(&quot;com.tx.loader&quot;, &quot;com.tx.common&quot;)\n</code></pre>\n<p>or traditional ('basePackages' or 'value' seems to work equally in the annotation):</p>\n<pre><code>@ComponentScan(basePackages = [&quot;com.tx.loader&quot;, &quot;com.tx.common&quot;])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 567, "user_id": 10258377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f465fafa353d27015c081b39e401756e?s=128&d=identicon&r=PG&f=1", "display_name": "Bunthai Deng", "link": "https://stackoverflow.com/users/10258377/bunthai-deng"}, "is_accepted": false, "score": 0, "last_activity_date": 1605015820, "creation_date": 1605015820, "answer_id": 64770097, "question_id": 58811468, "link": "https://stackoverflow.com/questions/58811468/using-multiple-path-in-componentscan-is-not-working/64770097#64770097", "title": "Using multiple path in @ComponentScan is not working", "body": "<p>This one solved my problem <br>\nPlace it above the <code>main</code> function <br></p>\n<pre><code>@SpringBootApplication\n@ComponentScan(basePackages = [&quot;com.*&quot;])\nfun main(...) {...}\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 2621786, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/2rGVN.jpg?s=128&g=1", "display_name": "chiradee", "link": "https://stackoverflow.com/users/2621786/chiradee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 462, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1605015820, "creation_date": 1573528370, "last_edit_date": 1594308531, "question_id": 58811468, "link": "https://stackoverflow.com/questions/58811468/using-multiple-path-in-componentscan-is-not-working", "title": "Using multiple path in @ComponentScan is not working", "body": "<p>I'm having a problem using multiple path in component scan. I tried the solution from here <a href=\"https://stackoverflow.com/questions/10794587/how-to-scan-multiple-paths-using-the-componentscan-annotation\">How to scan multiple paths using the @ComponentScan annotation?</a> but it gives me error:</p>\n<p><a href=\"https://i.stack.imgur.com/a3MyR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/a3MyR.png\" alt=\"example\" /></a></p>\n<pre><code>@ComponentScan({&quot;com.tx.loader&quot;, &quot;com.tx.common&quot;})\n@SpringBootApplication\n</code></pre>\n<p>It says</p>\n<pre class=\"lang-sh prettyprint-override\"><code>Unexpected tokens (Use ';' to separate expressions on the same line)\n</code></pre>\n<p>I'm using Kotlin and Intellij IDE.</p>\n"}]