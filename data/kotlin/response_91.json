[{"tags": ["mockito", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 10814, "user_id": 891242, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5719e9d6125bf8f75501a83e68b11412?s=128&d=identicon&r=PG", "display_name": "ZakTaccardi", "link": "https://stackoverflow.com/users/891242/zaktaccardi"}, "edited": false, "score": 0, "creation_date": 1475688892, "post_id": 39880351, "comment_id": 67047447, "body": "yup the runtime mock object looks like that. Btw, <code>HomeActivity</code> is a class, not an interface"}, {"owner": {"reputation": 22943, "user_id": 870674, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0463b7a46ed49025082a795ac2f67f49?s=128&d=identicon&r=PG", "display_name": "klimat", "link": "https://stackoverflow.com/users/870674/klimat"}, "reply_to_user": {"reputation": 10814, "user_id": 891242, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5719e9d6125bf8f75501a83e68b11412?s=128&d=identicon&r=PG", "display_name": "ZakTaccardi", "link": "https://stackoverflow.com/users/891242/zaktaccardi"}, "edited": false, "score": 0, "creation_date": 1475689096, "post_id": 39880351, "comment_id": 67047560, "body": "Yep. I meant the mock objected returned by mockito is a class which implements HomeActivity."}, {"owner": {"reputation": 10814, "user_id": 891242, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5719e9d6125bf8f75501a83e68b11412?s=128&d=identicon&r=PG", "display_name": "ZakTaccardi", "link": "https://stackoverflow.com/users/891242/zaktaccardi"}, "edited": false, "score": 0, "creation_date": 1475694322, "post_id": 39880351, "comment_id": 67050527, "body": "how would you fix this test so it passes then?"}, {"owner": {"reputation": 22943, "user_id": 870674, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0463b7a46ed49025082a795ac2f67f49?s=128&d=identicon&r=PG", "display_name": "klimat", "link": "https://stackoverflow.com/users/870674/klimat"}, "reply_to_user": {"reputation": 10814, "user_id": 891242, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5719e9d6125bf8f75501a83e68b11412?s=128&d=identicon&r=PG", "display_name": "ZakTaccardi", "link": "https://stackoverflow.com/users/891242/zaktaccardi"}, "edited": false, "score": 1, "creation_date": 1475699672, "post_id": 39880351, "comment_id": 67053423, "body": "<code>if(activity is HomeActivity)</code> should be enough"}], "tags": [], "owner": {"reputation": 22943, "user_id": 870674, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0463b7a46ed49025082a795ac2f67f49?s=128&d=identicon&r=PG", "display_name": "klimat", "link": "https://stackoverflow.com/users/870674/klimat"}, "is_accepted": true, "score": 5, "last_activity_date": 1475744827, "last_edit_date": 1475744827, "creation_date": 1475688726, "answer_id": 39880351, "question_id": 39879438, "link": "https://stackoverflow.com/questions/39879438/how-can-a-mocks-class-not-equal-its-java-class-in-kotlin/39880351#39880351", "title": "How can a mock&#39;s class not equal its java class in Kotlin?", "body": "<p>You probably want to use:</p>\n\n<p><code>if(activity is HomeActivity)</code> instead <code>(activity as HomeActivity).javaClass == HomeActivity::class.java</code></p>\n\n<p>The reason is <code>Mockito.mock(HomeActivity.java)</code> will dynamically create a class which <em>implements</em> <code>HomeActivity</code> using  <code>SomeFooMockitoImpl.class</code> which gets <code>HomeActivity.class</code> as parameter to create that mocked instance.</p>\n\n<p>You can check in runtime mock object will be something like:\n<code>HomeActivity$$EnhancerByMockitoWithCGLIB$$b8254f54</code></p>\n\n<p>and its actual class name by:</p>\n\n<p><code>activity.javaClass.simpleName</code> (should be <code>SomeFooMockitoImpl</code>)</p>\n"}], "owner": {"reputation": 10814, "user_id": 891242, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5719e9d6125bf8f75501a83e68b11412?s=128&d=identicon&r=PG", "display_name": "ZakTaccardi", "link": "https://stackoverflow.com/users/891242/zaktaccardi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "accepted_answer_id": 39880351, "answer_count": 1, "score": 1, "last_activity_date": 1475744827, "creation_date": 1475685387, "question_id": 39879438, "link": "https://stackoverflow.com/questions/39879438/how-can-a-mocks-class-not-equal-its-java-class-in-kotlin", "title": "How can a mock&#39;s class not equal its java class in Kotlin?", "body": "<pre><code>(activity as HomeActivity).javaClass == HomeActivity::class.java\n</code></pre>\n\n<p>Returns <code>false</code>. Why? Note, <code>activity</code> is mocked with the following function</p>\n\n<pre><code>fun set(activity: KClass&lt;out Activity&gt;) {\n    this.activity = Mockito.mock(activity.java)\n}\n</code></pre>\n"}, {"tags": ["spring", "kotlin"], "comments": [{"owner": {"reputation": 3037, "user_id": 6372139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O09OQ.png?s=128&g=1", "display_name": "Daniel Bubenheim", "link": "https://stackoverflow.com/users/6372139/daniel-bubenheim"}, "edited": false, "score": 0, "creation_date": 1475612565, "post_id": 39856910, "comment_id": 67010136, "body": "Are you using Spring Boot? If so, where is your bootstrap class located? It&#39;s recommended to put it inside of the root package and all other components in sub-packages. Perhaps your component scan is not working correctly. You can also leave out the <code>@EnableWebMvc</code> and <code>@ComponentScan</code>by replacing it with a single <code>@SpringBootApplication</code>. See also <a href=\"https://spring.io/blog/2016/02/15/developing-spring-boot-applications-with-kotlin\" rel=\"nofollow noreferrer\">spring.io/blog/2016/02/15/&hellip;</a> for further information."}, {"owner": {"reputation": 5443, "user_id": 1097800, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/x0q4w.jpg?s=128&g=1", "display_name": "LynAs", "link": "https://stackoverflow.com/users/1097800/lynas"}, "reply_to_user": {"reputation": 3037, "user_id": 6372139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O09OQ.png?s=128&g=1", "display_name": "Daniel Bubenheim", "link": "https://stackoverflow.com/users/6372139/daniel-bubenheim"}, "edited": false, "score": 0, "creation_date": 1475612651, "post_id": 39856910, "comment_id": 67010172, "body": "Its not spring boot application"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1475616401, "post_id": 39856910, "comment_id": 67012010, "body": "<code>@Autowired</code> will be on the private field, which is fine for Spring.  You likely should check the rest of your app, sping config, class path scanning, etc.  I don&#39;t see anything that would be a Kotlin specific problem."}, {"owner": {"reputation": 5443, "user_id": 1097800, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/x0q4w.jpg?s=128&g=1", "display_name": "LynAs", "link": "https://stackoverflow.com/users/1097800/lynas"}, "edited": false, "score": 1, "creation_date": 1475641848, "post_id": 39856910, "comment_id": 67018589, "body": "i think its kotlin problem since exact java code works perfectly. see the gist <a href=\"https://gist.github.com/lynas/9fe12c78c560876b3bc06cf03c217e4b\" rel=\"nofollow noreferrer\">gist.github.com/lynas/9fe12c78c560876b3bc06cf03c217e4b</a>"}, {"owner": {"reputation": 5443, "user_id": 1097800, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/x0q4w.jpg?s=128&g=1", "display_name": "LynAs", "link": "https://stackoverflow.com/users/1097800/lynas"}, "edited": false, "score": 0, "creation_date": 1475642116, "post_id": 39856910, "comment_id": 67018664, "body": "i have also tried <code>@Autowired     private lateinit var interceptorConfig: InterceptorConfig</code>"}, {"owner": {"reputation": 8022, "user_id": 1068649, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5e44a15ecb4ee475548612da03c81f33?s=128&d=identicon&r=PG", "display_name": "James Bassett", "link": "https://stackoverflow.com/users/1068649/james-bassett"}, "edited": false, "score": 0, "creation_date": 1475753396, "post_id": 39856910, "comment_id": 67075224, "body": "Like others I can&#39;t see anything out of place - you could ditch component scanning and declare the bean in your <code>WebConfig</code> as a alternative solution (or just construct it inline in your <code>addInterceptors()</code> method as it doesn&#39;t seem to be spring aware anyway)."}, {"owner": {"reputation": 5443, "user_id": 1097800, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/x0q4w.jpg?s=128&g=1", "display_name": "LynAs", "link": "https://stackoverflow.com/users/1097800/lynas"}, "edited": false, "score": 0, "creation_date": 1475753697, "post_id": 39856910, "comment_id": 67075425, "body": "tried <code>open class WebConfig @Autowire constructor (val inc: InterceptorConfig) : WebMvcConfigurerAdapter()</code> . it does not work because it requires a default empty constructor. I cant create the bean in <code>WebConfig</code> because I need to use <code>@Service</code> class from InterceptorConfig class"}, {"owner": {"reputation": 1376, "user_id": 1819007, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b7de393bab9656015c10f057adc7691b?s=128&d=identicon&r=PG", "display_name": "sudshekhar", "link": "https://stackoverflow.com/users/1819007/sudshekhar"}, "edited": false, "score": 0, "creation_date": 1495465568, "post_id": 39856910, "comment_id": 75251918, "body": "@LynAs did you manage to find a solution to this problem?"}, {"owner": {"reputation": 5443, "user_id": 1097800, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/x0q4w.jpg?s=128&g=1", "display_name": "LynAs", "link": "https://stackoverflow.com/users/1097800/lynas"}, "edited": false, "score": 0, "creation_date": 1495465681, "post_id": 39856910, "comment_id": 75251993, "body": "no, i could not. i created a issue in kotlin issue tracker. they closed it saying that its not a problem on there part"}, {"owner": {"reputation": 2637, "user_id": 1223719, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ad70d70b92a9e95b3a2530ea36613e6b?s=128&d=identicon&r=PG", "display_name": "aglassman", "link": "https://stackoverflow.com/users/1223719/aglassman"}, "edited": false, "score": 0, "creation_date": 1511996667, "post_id": 39856910, "comment_id": 82084537, "body": "I&#39;ve been having the same issue and it&#39;s driving me nuts."}, {"owner": {"reputation": 1410, "user_id": 5963772, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/2544b47824df3f6de9fedb13cb8c109e?s=128&d=identicon&r=PG&f=1", "display_name": "Kid101", "link": "https://stackoverflow.com/users/5963772/kid101"}, "reply_to_user": {"reputation": 2637, "user_id": 1223719, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ad70d70b92a9e95b3a2530ea36613e6b?s=128&d=identicon&r=PG", "display_name": "aglassman", "link": "https://stackoverflow.com/users/1223719/aglassman"}, "edited": false, "score": 0, "creation_date": 1557482822, "post_id": 39856910, "comment_id": 98789011, "body": "@aglassman did you manage to resolve this? driving me nuts as well"}, {"owner": {"reputation": 2637, "user_id": 1223719, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ad70d70b92a9e95b3a2530ea36613e6b?s=128&d=identicon&r=PG", "display_name": "aglassman", "link": "https://stackoverflow.com/users/1223719/aglassman"}, "reply_to_user": {"reputation": 1410, "user_id": 5963772, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/2544b47824df3f6de9fedb13cb8c109e?s=128&d=identicon&r=PG&f=1", "display_name": "Kid101", "link": "https://stackoverflow.com/users/5963772/kid101"}, "edited": false, "score": 0, "creation_date": 1557889725, "post_id": 39856910, "comment_id": 98912624, "body": "You know what @Kid101, I was able to resolve this, but for the live of me can&#39;t remember what I did.  I&#39;ll ask my co-worker tomorrow if he remembers."}], "answers": [{"comments": [{"owner": {"reputation": 5443, "user_id": 1097800, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/x0q4w.jpg?s=128&g=1", "display_name": "LynAs", "link": "https://stackoverflow.com/users/1097800/lynas"}, "edited": false, "score": 0, "creation_date": 1476441896, "post_id": 40035736, "comment_id": 67358080, "body": "good find but it does not work. getting same error <code>lateinit property interceptorConfig has not been initialized</code>"}, {"owner": {"reputation": 5443, "user_id": 1097800, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/x0q4w.jpg?s=128&g=1", "display_name": "LynAs", "link": "https://stackoverflow.com/users/1097800/lynas"}, "edited": false, "score": 0, "creation_date": 1559145224, "post_id": 40035736, "comment_id": 99331969, "body": "Tested it spring boot 2. it works <code>@field:Autowired     lateinit var demoService: DemoService</code>"}], "tags": [], "owner": {"reputation": 2779, "user_id": 404357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hv6AU.jpg?s=128&g=1", "display_name": "mantrid", "link": "https://stackoverflow.com/users/404357/mantrid"}, "is_accepted": true, "score": 2, "last_activity_date": 1476423904, "creation_date": 1476423904, "answer_id": 40035736, "question_id": 39856910, "link": "https://stackoverflow.com/questions/39856910/kotlin-cant-create-autowired-field-in-class-that-are-annotated-with-configura/40035736#40035736", "title": "Kotlin Can&#39;t create @Autowired field in Class that are annotated with @Configuration @EnableWebMvc", "body": "<p>try <code>@field:Autowired lateinit var interceptorConfig</code> or <code>@set:Autowired</code> which will tell kotlin compiler to put annotations explicitly on field/setter. by default it places them on \"property\" which is kotlin-only construct and Java may have problems accessing it. refer to <a href=\"http://kotlinlang.org/docs/reference/annotations.html#annotation-use-site-targets\" rel=\"nofollow\">kotlin docs here</a></p>\n"}], "owner": {"reputation": 5443, "user_id": 1097800, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/x0q4w.jpg?s=128&g=1", "display_name": "LynAs", "link": "https://stackoverflow.com/users/1097800/lynas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1555, "favorite_count": 4, "accepted_answer_id": 40035736, "answer_count": 1, "score": 7, "last_activity_date": 1476423904, "creation_date": 1475596789, "last_edit_date": 1476418912, "question_id": 39856910, "link": "https://stackoverflow.com/questions/39856910/kotlin-cant-create-autowired-field-in-class-that-are-annotated-with-configura", "title": "Kotlin Can&#39;t create @Autowired field in Class that are annotated with @Configuration @EnableWebMvc", "body": "<p><code>Autowired</code> field is <code>null</code> when initializing the project:</p>\n\n<pre><code>package com.lynas.config\n\nimport org.springframework.stereotype.Component\nimport org.springframework.web.servlet.handler.HandlerInterceptorAdapter\nimport javax.servlet.http.HttpServletRequest\nimport javax.servlet.http.HttpServletResponse\n\n\n@Component\nopen class InterceptorConfig : HandlerInterceptorAdapter() {\n\n    override fun preHandle(request: HttpServletRequest, response: HttpServletResponse, handler: Any?): Boolean {\n\n        return true\n    }\n}\n\n\n\npackage com.lynas.config\n\nimport org.springframework.beans.factory.annotation.Autowired\nimport org.springframework.context.annotation.ComponentScan\nimport org.springframework.context.annotation.Configuration\nimport org.springframework.web.servlet.config.annotation.EnableWebMvc\nimport org.springframework.web.servlet.config.annotation.InterceptorRegistry\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurerAdapter\n\n@Configuration\n@EnableWebMvc\n@ComponentScan(\"com.lynas\")\nopen class WebConfig() : WebMvcConfigurerAdapter() {\n\n    // this field show null\n    @Autowired\n    lateinit var interceptorConfig: InterceptorConfig\n\n    override fun addInterceptors(registry: InterceptorRegistry) {\n        registry.addInterceptor(interceptorConfig)\n    }\n\n}\n</code></pre>\n\n<p><code>lateinit var interceptorConfig: InterceptorConfig</code> is <code>null</code> when I run the application. How to fix this?</p>\n\n<p>full code <code>https://github.com/lynas/kotlinSpringBug</code></p>\n"}, {"tags": ["android", "android-intent", "push-notification", "android-view", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 614, "user_id": 4515136, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/593d41322fdf9856768987dc5c213033?s=128&d=identicon&r=PG&f=1", "display_name": "buddhabath", "link": "https://stackoverflow.com/users/4515136/buddhabath"}, "is_accepted": true, "score": 2, "last_activity_date": 1475611152, "creation_date": 1475611152, "answer_id": 39860782, "question_id": 39852971, "link": "https://stackoverflow.com/questions/39852971/how-to-handle-intent-with-kotlin-and-conductor/39860782#39860782", "title": "How to handle Intent with Kotlin and Conductor", "body": "<p>Achieved desired result.</p>\n\n<pre><code>&lt;activity android:name=\".ui.MainActivity\"\n        android:launchMode=\"singleTop\"\n        &gt;\n</code></pre>\n\n<p>MainActivity:</p>\n\n<pre><code>override fun onResume(){\n    super.onResume()\n    val bundle : Bundle? = intent.extras\n    if (bundle != null){\n        transitionToNotificationOpenController(bundle)\n    }\n}\n\n/**\n * MainActivity is defined in AndroidManifest.xml as android:launchMode=\"singleTop\"\n * onNewIntent acts as an entrypoint whenever an intent is received pointing to MainActivity,\n * since we don't want to launch a new instance of the Activity.\n * (because we want to keep the stack of RouterTransactions)\n */\noverride fun onNewIntent(intent : Intent){\n    setIntent(intent)\n}\n</code></pre>\n"}], "owner": {"reputation": 614, "user_id": 4515136, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/593d41322fdf9856768987dc5c213033?s=128&d=identicon&r=PG&f=1", "display_name": "buddhabath", "link": "https://stackoverflow.com/users/4515136/buddhabath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2137, "favorite_count": 0, "accepted_answer_id": 39860782, "answer_count": 1, "score": 0, "last_activity_date": 1475611152, "creation_date": 1475585830, "question_id": 39852971, "link": "https://stackoverflow.com/questions/39852971/how-to-handle-intent-with-kotlin-and-conductor", "title": "How to handle Intent with Kotlin and Conductor", "body": "<p>I have three Views and One activity.\nMainActivity - MainController - PushedController - NotificationOpenController.</p>\n\n<p>The MainController contains a button, when pressed does some <em>black box</em> stuff and the device recieves a notification in the notification tray.</p>\n\n<p>When the notification is clicked, I want the behavior to be as if</p>\n\n<pre><code>router.pushController(RouterTransaction.with(NotificationOpenController(bundle))\n            .pushChangeHandler(VerticalChangeHandler())\n            .popChangeHandler(VerticalChangeHandler()))\n</code></pre>\n\n<p>just happened.</p>\n\n<p><strong>Any Kotlin related tips or revisions are appreciated as I'm doing this to learn the language</strong></p>\n\n<p>I was unsure how to achieve this in a proper way through the Intents, perhaps a broadcast? but after some trial and error my code now looks like this:</p>\n\n<pre><code>override fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    App.graph.inject(this)\n    setContentView(R.layout.activity_main_kotlin)\n    Log.d(TAG,\"${FirebaseInstanceId.getInstance().getToken()}\")\n\n\n    router = Conductor.attachRouter(this, controller_container, savedInstanceState)\n\n    val startingIntent : Intent? = intent\n    if(startingIntent?.extras != null){\n        transitionToNotificationOpenController(startingIntent?.extras)\n    }\n    else{\n        if (!router.hasRootController()) {\n            router.setRoot(RouterTransaction.with(MainController()));\n        }\n    }\n}\n\noverride fun onBackPressed() {\n    if (!router.handleBack()) {\n        super.onBackPressed()\n    }\n}\n\nfun transitionToNotificationOpenController(bundl: Bundle?){ \n   router.pushController(RouterTransaction.with(NotificationOpenController(bundl))\n            .pushChangeHandler(VerticalChangeHandler())\n            .popChangeHandler(VerticalChangeHandler()))\n}\n</code></pre>\n\n<p>The Notification Intent is built like this</p>\n\n<pre><code>val builder = NotificationCompat.Builder(this).setContentTitle(\"Title\").setContentText(\"Text\")\n    val notificationIntent = Intent(this, MainActivity::class.java)\n    notificationIntent.putExtra(\"message\",messageBody)\n    val contentIntent = PendingIntent.getActivity(this, 0, notificationIntent,\n            PendingIntent.FLAG_UPDATE_CURRENT)\n...\nmanager.notify(1,builder.build())\n</code></pre>\n\n<p>However, using this approach the animation gets all wrong, and the user can only see the \"typical\"   - popup view after loading some  or launching new activity-\nsince there is a Activity Resume when pressing the notification,  followed by Activity Pause -> Activity Resume after pressing the backbutton.  </p>\n"}, {"tags": ["kotlin", "spring-test", "spring-test-mvc"], "comments": [{"owner": {"reputation": 285, "user_id": 3977873, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f655f77e3a43fa75109848f9f7253aed?s=128&d=identicon&r=PG&f=1", "display_name": "klc", "link": "https://stackoverflow.com/users/3977873/klc"}, "edited": false, "score": 0, "creation_date": 1475650385, "post_id": 39850891, "comment_id": 67021810, "body": "My mistake, this is NOT a kotlin specific problem. Java behave the same. However in kotlin i made the first param of getUserInfo not nullable, is there a way to inject the userDetail correctly by Spring?"}], "answers": [{"comments": [{"owner": {"reputation": 11211, "user_id": 1819355, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/99463baa1d0e4218941e26c2985620e5?s=128&d=identicon&r=PG", "display_name": "Alexandre M&#233;lard", "link": "https://stackoverflow.com/users/1819355/alexandre-m%c3%a9lard"}, "edited": false, "score": 0, "creation_date": 1573748192, "post_id": 39973971, "comment_id": 103993411, "body": "thank you so much, you saved my day with that line: springSecurityFilterChain is autowired with @EnableWebSecurity"}], "tags": [], "owner": {"reputation": 285, "user_id": 3977873, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f655f77e3a43fa75109848f9f7253aed?s=128&d=identicon&r=PG&f=1", "display_name": "klc", "link": "https://stackoverflow.com/users/3977873/klc"}, "is_accepted": true, "score": 1, "last_activity_date": 1476177228, "creation_date": 1476177228, "answer_id": 39973971, "question_id": 39850891, "link": "https://stackoverflow.com/questions/39850891/spring-integration-test-authenticationprincipal-not-injected/39973971#39973971", "title": "Spring integration test - AuthenticationPrincipal not injected", "body": "<p>I should use <code>MockMvcBuilders.webAppContextSetup(this.context!!)\n.apply(springSecurity(springSecurityFilterChain))</code></p>\n\n<p><code>springSecurityFilterChain</code> is autowired with <code>@EnableWebSecurity</code></p>\n\n<p>after that i can use csrf and user i want, the userDetail is injected into the controller.</p>\n\n<p>reference: <a href=\"http://docs.spring.io/spring-security/site/docs/current/reference/html/test-mockmvc.html#test-mockmvc-setup\" rel=\"nofollow\">http://docs.spring.io/spring-security/site/docs/current/reference/html/test-mockmvc.html#test-mockmvc-setup</a></p>\n"}], "owner": {"reputation": 285, "user_id": 3977873, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f655f77e3a43fa75109848f9f7253aed?s=128&d=identicon&r=PG&f=1", "display_name": "klc", "link": "https://stackoverflow.com/users/3977873/klc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1653, "favorite_count": 0, "accepted_answer_id": 39973971, "answer_count": 1, "score": 2, "last_activity_date": 1476177228, "creation_date": 1475579855, "last_edit_date": 1475672368, "question_id": 39850891, "link": "https://stackoverflow.com/questions/39850891/spring-integration-test-authenticationprincipal-not-injected", "title": "Spring integration test - AuthenticationPrincipal not injected", "body": "<p>I am trying to use kotlin in my project, which is REST API endpoints serving angularjs frontend. And I use spring rest doc for our api document.</p>\n\n<p>While migrating, I find my security context is not injected in test case.</p>\n\n<p>Test class with mockito-kotlin (mostly converted by Intellij):</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner::class)\n@ContextConfiguration(classes = arrayOf(MockAppConfig::class))\n@WebAppConfiguration\nclass UserLoginDocumentation {\n\n@get:Rule\nvar restDocumentation = JUnitRestDocumentation(\"target/generated-snippets\")\n\nprivate var mockMvc: MockMvc? = null\n\n@Autowired\nprivate val context: WebApplicationContext? = null\n\n@Before\nfun setUp() {\n    this.mockMvc = MockMvcBuilders.webAppContextSetup(this.context!!)\n            .apply&lt;DefaultMockMvcBuilder&gt;(documentationConfiguration(this.restDocumentation)\n            .uris().withScheme(\"https\").withHost(\"myhost.com\").withPort(443)).build()\n    val authentication = TestingAuthenticationToken(MyUserDetailsService.MyUserDetails(1L), null)\n    SecurityContextHolder.getContext().authentication = authentication\n}\n\n@Autowired\nlateinit var userLoginService: UserLoginService\n\n@Test\n@Throws(Exception::class)\nfun loginTest() {\n\n    whenever(userLoginService!!.getUserInfo(any(), any(), any())).thenReturn(LoginUserInfo())\n    this.mockMvc!!.perform(post(\"/myloginURL/user\")//the remaining is not important....\n</code></pre>\n\n<p>The controller:</p>\n\n<pre><code>@RequestMapping(\"/myloginURL\")\n@RestController\nclass UserLoginController\n@Autowired constructor(\n    val userLoginService: UserLoginService) {\n\n@ResponseStatus(HttpStatus.OK)\n@RequestMapping(value = \"/user\", method = arrayOf(RequestMethod.POST), produces = arrayOf(MediaType.APPLICATION_JSON_VALUE))\nfun getUser(@AuthenticationPrincipal userDetail: MyUserDetails, \n    request: HttpServletRequest, @RequestParam lang: String): LoginUserInfo? {\n    return userLoginService.getUserInfo(userDetail.userId, request.getHeader(\"Authorization\"), lang)\n}\n\n}\n</code></pre>\n\n<p>Here <code>userDetail</code> is not null, but <code>userDetail.userId</code> is null. So it looks like the authentication in test class is not injected into the controller call.</p>\n\n<p>Did I do something wrong, or how to fix it?</p>\n"}, {"tags": ["properties", "kotlin", "didset"], "answers": [{"comments": [{"owner": {"reputation": 25726, "user_id": 453435, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/SjPwA.jpg?s=128&g=1", "display_name": "Ben Leggiero", "link": "https://stackoverflow.com/users/453435/ben-leggiero"}, "edited": false, "score": 2, "creation_date": 1475543942, "post_id": 39842353, "comment_id": 66975120, "body": "Amazingly, that second approach is exactly the workaround I was building between me asking and you answering! :D"}, {"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 2, "creation_date": 1475566568, "post_id": 39842353, "comment_id": 66981901, "body": "@hotkey You should elaborate on the custom setter a bit since it&#39;s the most efficient way to implement it."}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 2, "creation_date": 1475590246, "post_id": 39842353, "comment_id": 66996825, "body": "@KirillRakhman, thanks for your remark, I&#39;ve updated the answer."}, {"owner": {"reputation": 42524, "user_id": 936832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc1da0368f0874a66bd771c4d57f94b0?s=128&d=identicon&r=PG", "display_name": "Ingo Kegel", "link": "https://stackoverflow.com/users/936832/ingo-kegel"}, "edited": false, "score": 1, "creation_date": 1475654403, "post_id": 39842353, "comment_id": 67024077, "body": "Great answer, but IMO <code>true.apply { willSet() }</code> is not idiomatic. I would change this to a code block with a return statement."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1475755753, "post_id": 39842353, "comment_id": 67076734, "body": "custom setters is the exact analog of this Swift concept"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 3, "creation_date": 1475758036, "post_id": 39842353, "comment_id": 67078460, "body": "@voddan, seems like Swift has <code>get</code>, <code>set</code>, <code>didSet</code>, <code>willSet</code>, and Kotlin doesn&#39;t have an exact equivalent for <code>didSet</code> and <code>willSet</code> (which are what the question is about)."}, {"owner": {"reputation": 25726, "user_id": 453435, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/SjPwA.jpg?s=128&g=1", "display_name": "Ben Leggiero", "link": "https://stackoverflow.com/users/453435/ben-leggiero"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1475891402, "post_id": 39842353, "comment_id": 67139224, "body": "@voddan see: <a href=\"http://stackoverflow.com/questions/24006234/what-is-the-purpose-of-willset-and-didset-in-swift\" title=\"what is the purpose of willset and didset in swift\">stackoverflow.com/questions/24006234/&hellip;</a>"}, {"owner": {"reputation": 1017, "user_id": 7064175, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vrdtd.jpg?s=128&g=1", "display_name": "JillevdW", "link": "https://stackoverflow.com/users/7064175/jillevdw"}, "edited": false, "score": 0, "creation_date": 1533044749, "post_id": 39842353, "comment_id": 90195090, "body": "The function you wrote works perfectly; thanks for the effort."}, {"owner": {"reputation": 4174, "user_id": 925135, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/QSJJI.jpg?s=128&g=1", "display_name": "Renetik", "link": "https://stackoverflow.com/users/925135/renetik"}, "reply_to_user": {"reputation": 42524, "user_id": 936832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc1da0368f0874a66bd771c4d57f94b0?s=128&d=identicon&r=PG", "display_name": "Ingo Kegel", "link": "https://stackoverflow.com/users/936832/ingo-kegel"}, "edited": false, "score": 0, "creation_date": 1619204198, "post_id": 39842353, "comment_id": 118843956, "body": "@IngoKegel similar thing immediately I had in my mind that this is not readable easily for me... the returning value is written first and code that is run before is after in connected braces... Imho its nonsense to write code that is harder to understand just to save two lines."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 80, "last_activity_date": 1475620424, "last_edit_date": 1495540445, "creation_date": 1475540156, "answer_id": 39842353, "question_id": 39842261, "link": "https://stackoverflow.com/questions/39842261/is-there-a-didset-willset-analog-in-kotlin/39842353#39842353", "title": "Is there a didSet/willSet analog in Kotlin?", "body": "<p>Although Kotlin doesn't provide a built-in Swift-style solution for property changes observation, you can still do it in several ways depending on what your goal is.</p>\n\n<ul>\n<li><p>There is <a href=\"https://kotlinlang.org/docs/reference/delegated-properties.html#observable\" rel=\"noreferrer\"><code>observable(...)</code></a> delegate <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.properties/-delegates/observable.html\" rel=\"noreferrer\">(in stdlib)</a> that allows you to handle the property changes. Usage example:</p>\n\n<pre><code>var foo: String by Delegates.observable(\"bar\") { property, old, new -&gt;\n    println(\"$property has changed from $old to $new\")\n}\n</code></pre>\n\n<p><sup>Here, <code>\"bar\"</code> is the initial value for property <code>foo</code>, and the lambda is called each time after the property is assigned, allowing you to observe the changes.There's also <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.properties/-delegates/vetoable.html\" rel=\"noreferrer\"><code>vetoable(...)</code> delegate</a> that allows you to prevent the change.</sup></p></li>\n<li><p>You can use <a href=\"https://kotlinlang.org/docs/reference/properties.html#getters-and-setters\" rel=\"noreferrer\">custom setter</a> for a property to execute arbitrary code before/after actual value change:</p>\n\n<pre><code>var foo: String = \"foo\"\n    set(value: String) {\n        baz.prepareToDoTheThing()\n        field = value\n        baz.doTheThing()\n    }\n</code></pre>\n\n<p><sup>As <a href=\"https://stackoverflow.com/users/615306/kirill-rakhman\">@KirillRakhman</a> noted, this solution is quite efficient since it introduces no overhead in method calls and objects, though the code will be a little duplicated in case of several properties.</sup></p></li>\n<li><p>In general, you can implement your own <a href=\"https://kotlinlang.org/docs/reference/delegated-properties.html\" rel=\"noreferrer\">property delegate</a>, explicitly providing the property behavior in <code>getValue(...)</code> and <code>setValue(...)</code> functions. </p>\n\n<p>To simplify your task, use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.properties/-observable-property/\" rel=\"noreferrer\"><code>ObservableProperty&lt;T&gt;</code></a> abstract class that allows you to implement delegates that observe property changes (like <code>observable</code> and <code>vetoable</code> above) Example:</p>\n\n<pre><code>var foo: String by object : ObservableProperty&lt;String&gt;(\"bar\") {\n    override fun beforeChange(property: KProperty&lt;*&gt;, oldValue: String, newValue: String): Boolean {\n        baz.prepareToDoTheThing()\n        return true // return false if you don't want the change\n    }\n\n    override fun afterChange(property: KProperty&lt;*&gt;, oldValue: String, newValue: String) {\n        baz.doTheThing()\n    }\n}\n</code></pre>\n\n<p>For your convenience, you can write a function that creates the delegate object:</p>\n\n<pre><code>fun &lt;T&gt; observing(initialValue: T,\n                  willSet: () -&gt; Unit = { },\n                  didSet: () -&gt; Unit = { }\n) = object : ObservableProperty&lt;T&gt;(initialValue) {\n    override fun beforeChange(property: KProperty&lt;*&gt;, oldValue: T, newValue: T): Boolean =\n            true.apply { willSet() }\n\n    override fun afterChange(property: KProperty&lt;*&gt;, oldValue: T, newValue: T) = didSet()\n }\n</code></pre>\n\n<p>Then you just pass lambdas to it as <code>willSet</code> and <code>didSet</code> (<a href=\"https://kotlinlang.org/docs/reference/functions.html#default-arguments\" rel=\"noreferrer\">the default argument</a> for them is <code>{ }</code>). Usage:</p>\n\n<pre><code>var foo: String by observing(\"bar\", willSet = {\n    baz.prepareToDoTheThing()\n}, didSet = {\n    baz.doTheThing()\n})\n\nvar baq: String by observing(\"bar\", didSet = { println(baq) })\n</code></pre></li>\n</ul>\n\n<p>In any case, it's up to you to make sure that the code observing the changes doesn't set the property again as it will likely fall into infinite recursion, or else you might check it in the observing code whether the setter is called recursively.</p>\n"}], "owner": {"reputation": 25726, "user_id": 453435, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/SjPwA.jpg?s=128&g=1", "display_name": "Ben Leggiero", "link": "https://stackoverflow.com/users/453435/ben-leggiero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10713, "favorite_count": 14, "accepted_answer_id": 39842353, "answer_count": 1, "score": 53, "last_activity_date": 1492022186, "creation_date": 1475539323, "last_edit_date": 1475617072, "question_id": 39842261, "link": "https://stackoverflow.com/questions/39842261/is-there-a-didset-willset-analog-in-kotlin", "title": "Is there a didSet/willSet analog in Kotlin?", "body": "<p>I love this Swift syntax; it's very helpful for many things:</p>\n\n<pre><code>var foo: Bar = Bar() {\n    willSet {\n        baz.prepareToDoTheThing()\n    }\n    didSet {\n        baz.doTheThing()\n    }\n}\n</code></pre>\n\n<p>and I'd love to do this in Kotlin. However, <a href=\"https://www.google.com/search?q=&quot;kotlin&quot;+didSet+willSet\">I can't find the proper syntax</a>!</p>\n\n<p><strong>Is there anything in Kotlin like this?</strong></p>\n\n<pre><code>var foo: Bar = Bar()\n    willSet() {\n        baz.prepareToDoTheThing()\n    }\n    didSet() {\n        baz.doTheThing()\n    }\n</code></pre>\n"}, {"tags": ["inheritance", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 7, "last_activity_date": 1475523763, "last_edit_date": 1495541707, "creation_date": 1475511083, "answer_id": 39835938, "question_id": 39835887, "link": "https://stackoverflow.com/questions/39835887/why-is-this-class-considered-final/39835938#39835938", "title": "Why is this class considered final?", "body": "<p>In Kotlin, unlike Java and C#, all classes are final by default, unless marked as <code>open</code> explicitly. Here's what's in <a href=\"https://kotlinlang.org/docs/reference/classes.html#inheritance\" rel=\"nofollow noreferrer\">the docs</a>:</p>\n\n<blockquote>\n  <p>The <code>open</code> annotation on a class is the opposite of Java\u2019s <code>final</code>: it allows others to inherit from this class. By default, all classes in Kotlin are final, which corresponds to <a href=\"http://www.oracle.com/technetwork/java/effectivejava-136174.html\" rel=\"nofollow noreferrer\">Effective Java</a>, Item 17: Design and document for inheritance or else prohibit it.</p>\n</blockquote>\n\n<p>The solution is just to mark your class as <code>open class Dice</code>. </p>\n\n<p>Also, note the <a href=\"https://stackoverflow.com/a/35921740/2196460\">limitations on <code>data</code> classes</a> inheritance: they can neither be <code>open</code> nor extend another class.</p>\n"}], "owner": {"reputation": 1082, "user_id": 422443, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2e1dcca8470fd0523aaf7b3fa1bab6bb?s=128&d=identicon&r=PG", "display_name": "barakisbrown", "link": "https://stackoverflow.com/users/422443/barakisbrown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 39835938, "answer_count": 1, "score": 3, "last_activity_date": 1475591013, "creation_date": 1475510905, "last_edit_date": 1475591013, "question_id": 39835887, "link": "https://stackoverflow.com/questions/39835887/why-is-this-class-considered-final", "title": "Why is this class considered final?", "body": "<p>I am trying to inherit the following type, but the compiler says it is final.</p>\n\n<pre><code>class Dice(private var side : Int)\n{\n    constructor(D : DiceTypesK) : this(D.value) {}\n}\n\nclass ExplodedDice(private val D : DiceTypesK) : Dice(D) \n                                              // ^^^^ this class is final and\n                                              //      can not be inherited from\n</code></pre>\n\n<p>Why my type is final, because I did not intend it to be?</p>\n"}, {"tags": ["android", "realm", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 454, "user_id": 4292389, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sJ2K7pIfqI8/AAAAAAAAAAI/AAAAAAAAApk/Kmx1TQj8zIk/photo.jpg?sz=128", "display_name": "vladimir123", "link": "https://stackoverflow.com/users/4292389/vladimir123"}, "edited": false, "score": 0, "creation_date": 1475436608, "post_id": 39820724, "comment_id": 66932095, "body": "Wow, that was fast :) Thanks!"}, {"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 1, "creation_date": 1475503415, "post_id": 39820724, "comment_id": 66956379, "body": "If escaping the method name all the time is inconvenient for you, ypu have the possibility to create an extension function with a slightly different name that delegates to <code>in</code>."}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 7, "last_activity_date": 1475436037, "creation_date": 1475436037, "answer_id": 39820724, "question_id": 39820668, "link": "https://stackoverflow.com/questions/39820668/how-to-use-realms-in-method-with-kotlin/39820724#39820724", "title": "How to use Realm&#39;s in method with Kotlin", "body": "<p>As stated in the <a href=\"https://kotlinlang.org/docs/reference/java-interop.html#escaping-for-java-identifiers-that-are-keywords-in-kotlin\" rel=\"noreferrer\">Escaping for Java identifiers that are keywords in Kotlin</a>:</p>\n\n<blockquote>\n  <p>Some of the Kotlin keywords are valid identifiers in Java: in, object,\n  is, etc. If a Java library uses a Kotlin keyword for a method, you can\n  still call the method escaping it with the backtick (`) character</p>\n</blockquote>\n\n<p>For example:</p>\n\n<pre><code>realm.where(Product::class.java).`in`(\"barcode\", barcodes).findAll()\n</code></pre>\n"}], "owner": {"reputation": 454, "user_id": 4292389, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sJ2K7pIfqI8/AAAAAAAAAAI/AAAAAAAAApk/Kmx1TQj8zIk/photo.jpg?sz=128", "display_name": "vladimir123", "link": "https://stackoverflow.com/users/4292389/vladimir123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 0, "accepted_answer_id": 39820724, "answer_count": 1, "score": 3, "last_activity_date": 1475436037, "creation_date": 1475435687, "question_id": 39820668, "link": "https://stackoverflow.com/questions/39820668/how-to-use-realms-in-method-with-kotlin", "title": "How to use Realm&#39;s in method with Kotlin", "body": "<p>I'm trying to do something like:</p>\n\n<pre><code>val barcodes = arrayOf(\"123\", \"456\", \"789\")\nrealm.where(Product::class.java).in(\"barcode\", barcodes).findAll()\n</code></pre>\n\n<p>However \"in\" is a Kotlin function and I can't access the in(String filedName, String[] values) method of RealmQuery object.</p>\n\n<p>Currently I have a java class that does the job and returns the result, but I was wondering is there a more graceful workaround for this?</p>\n"}, {"tags": ["testing", "gradle", "code-coverage", "kotlin", "jacoco"], "answers": [{"comments": [{"owner": {"reputation": 2512, "user_id": 2992899, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Mu5w6.jpg?s=128&g=1", "display_name": "Czyzby", "link": "https://stackoverflow.com/users/2992899/czyzby"}, "edited": false, "score": 0, "creation_date": 1475418484, "post_id": 39817921, "comment_id": 66926060, "body": "This is what I was afraid of. Well, do you know of any tools that can correctly calculate the code coverage of inline functions? I&#39;m maintaining a library with a module that consists mostly of type-safe builders, and while extensively unit tested - the reported code coverage percent is rather poor."}], "tags": [], "owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "is_accepted": false, "score": 5, "last_activity_date": 1475418033, "creation_date": 1475418033, "answer_id": 39817921, "question_id": 39817814, "link": "https://stackoverflow.com/questions/39817814/no-coverage-report-for-inlined-kotlin-methods/39817921#39817921", "title": "No coverage report for inlined Kotlin methods", "body": "<p>I don't believe it is possible to turn off inlining since some functions may not make any sense if they are not inlined. These include functions with <code>reified</code> types (since the inlining creates the availability of type information) and functions with lambdas as parameters, since they can affect the control flow of the method they are inlined in.</p>\n"}, {"comments": [{"owner": {"reputation": 916, "user_id": 2874418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NhGuM.jpg?s=128&g=1", "display_name": "Diego Malone", "link": "https://stackoverflow.com/users/2874418/diego-malone"}, "edited": false, "score": 1, "creation_date": 1579185427, "post_id": 44722495, "comment_id": 105687521, "body": "It was marked as duplicated of <a href=\"https://youtrack.jetbrains.com/issue/IDEA-185485\" rel=\"nofollow noreferrer\">this other bug</a>  and it is already fixed."}], "tags": [], "owner": {"reputation": 2689, "user_id": 185498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d77120c6ac145bba587b662a014dbdd4?s=128&d=identicon&r=PG", "display_name": "Manushin Igor", "link": "https://stackoverflow.com/users/185498/manushin-igor"}, "is_accepted": false, "score": 2, "last_activity_date": 1498224065, "creation_date": 1498224065, "answer_id": 44722495, "question_id": 39817814, "link": "https://stackoverflow.com/questions/39817814/no-coverage-report-for-inlined-kotlin-methods/44722495#44722495", "title": "No coverage report for inlined Kotlin methods", "body": "<p>There is the bug in the JetBrains Java Coverage tools, see <a href=\"https://youtrack.jetbrains.com/issue/KT-12605\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/issue/KT-12605</a> .</p>\n\n<p>So, just wait until bug will be fixed (or vote on it, to speedup development)</p>\n"}], "owner": {"reputation": 2512, "user_id": 2992899, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Mu5w6.jpg?s=128&g=1", "display_name": "Czyzby", "link": "https://stackoverflow.com/users/2992899/czyzby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1895, "favorite_count": 1, "answer_count": 2, "score": 12, "last_activity_date": 1498224065, "creation_date": 1475417214, "last_edit_date": 1475420717, "question_id": 39817814, "link": "https://stackoverflow.com/questions/39817814/no-coverage-report-for-inlined-kotlin-methods", "title": "No coverage report for inlined Kotlin methods", "body": "<p>Kotlin functions marked with <code>inline</code> keyword are, well, inlined during the compilation and it seems that code coverage tools (like <em>JaCoCo</em>) fail to properly calculate code coverage. What is the usual approach to overcoming this issue? Is there a way to make the test somehow avoid the inlining step and invoke the tested methods directly? Is it possible to skip report generation of all inlined methods (via <em>Gradle</em> task, for example) without excluding whole classes?</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "edited": false, "score": 0, "creation_date": 1475412227, "post_id": 39817101, "comment_id": 66924398, "body": "How are you initializing <code>mainView</code>?"}, {"owner": {"reputation": 8164, "user_id": 5593959, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/9StDn.jpg?s=128&g=1", "display_name": "Dima Rostopira", "link": "https://stackoverflow.com/users/5593959/dima-rostopira"}, "reply_to_user": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "edited": false, "score": 0, "creation_date": 1475412357, "post_id": 39817101, "comment_id": 66924438, "body": "@Kiskae updated question"}], "answers": [{"tags": [], "owner": {"reputation": 8164, "user_id": 5593959, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/9StDn.jpg?s=128&g=1", "display_name": "Dima Rostopira", "link": "https://stackoverflow.com/users/5593959/dima-rostopira"}, "is_accepted": true, "score": 2, "last_activity_date": 1475417536, "last_edit_date": 1475417536, "creation_date": 1475416778, "answer_id": 39817763, "question_id": 39817101, "link": "https://stackoverflow.com/questions/39817101/cannot-start-animator-on-a-detached-view/39817763#39817763", "title": "Cannot start animator on a detached view", "body": "<p>Not sure, if it's correct solution, but I just moved that code to <code>OnAttachStateChangeListener</code></p>\n\n<pre><code>    fun show(root: View) {\n        showAtLocation(root, Gravity.CENTER, 0, 0)\n        backgroundView.addOnAttachStateChangeListener(this)\n    }\n\n    override fun onViewAttachedToWindow(v: View?) {\n        if (v==null) return\n\n        with(ViewAnimationUtils.createCircularReveal(v, 500, 500, 0f, 500f)) {\n            interpolator = AccelerateDecelerateInterpolator()\n            duration = 2500\n            start()\n        }\n    } override fun onViewDetachedFromWindow(v: View?) {}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8164, "user_id": 5593959, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/9StDn.jpg?s=128&g=1", "display_name": "Dima Rostopira", "link": "https://stackoverflow.com/users/5593959/dima-rostopira"}, "edited": false, "score": 1, "creation_date": 1535623497, "post_id": 52090585, "comment_id": 91138632, "body": "&quot;Don&#39;t Keep Activity&quot; is used to actually reproduce this bug. This will sometime happen in production anyway, even when it&#39;s off. It&#39;s not a solution, it&#39;s &quot;It works on my phone now&quot;"}], "tags": [], "owner": {"reputation": 396, "user_id": 3664852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LfdTB.jpg?s=128&g=1", "display_name": "Mitesh Machhoya", "link": "https://stackoverflow.com/users/3664852/mitesh-machhoya"}, "is_accepted": false, "score": 0, "last_activity_date": 1535610936, "creation_date": 1535610936, "answer_id": 52090585, "question_id": 39817101, "link": "https://stackoverflow.com/questions/39817101/cannot-start-animator-on-a-detached-view/52090585#52090585", "title": "Cannot start animator on a detached view", "body": "<p>Same crash I was getting, and even same library i am using, the problem was the device has its Don't keep activity flag ON, that is why it's crashing.</p>\n\n<p><strong>Solution</strong></p>\n\n<p>Goto-->Settings-->Developer Option-->Don't Keep Activity(Make it Turn OFF)</p>\n\n<p>NOTE: Developer option path may vary with devices</p>\n\n<p>Hope it will help you.</p>\n"}], "owner": {"reputation": 8164, "user_id": 5593959, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/9StDn.jpg?s=128&g=1", "display_name": "Dima Rostopira", "link": "https://stackoverflow.com/users/5593959/dima-rostopira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2400, "favorite_count": 0, "accepted_answer_id": 39817763, "answer_count": 2, "score": 1, "last_activity_date": 1535610936, "creation_date": 1475412016, "last_edit_date": 1475412346, "question_id": 39817101, "link": "https://stackoverflow.com/questions/39817101/cannot-start-animator-on-a-detached-view", "title": "Cannot start animator on a detached view", "body": "<p>I've created class that extends PopupView in Kotlin, and trying to animate it's appearing with CircleReveal library. Here is function of my class</p>\n\n<pre><code>fun show(root: View) {\n    showAtLocation(root, Gravity.CENTER, 0, 0)\n\n    val cx = (mainView.left + mainView.right) / 2\n    val cy = (mainView.top + mainView.bottom) / 2\n    val dx = Math.max(cx, mainView.width - cx)\n    val dy = Math.max(cy, mainView.height - cy)\n    val finalRadius = Math.hypot(dx.toDouble(), dy.toDouble()).toFloat()\n\n    with (ViewAnimationUtils.createCircularReveal(mainView, cx, cy, 0f, finalRadius)) {\n        interpolator = AccelerateDecelerateInterpolator()\n        duration = 1500\n        start()\n    }\n}\n</code></pre>\n\n<p>That code gives me following error</p>\n\n<pre><code>java.lang.IllegalStateException: Cannot start this animator on a detached view!\n                                                            at android.view.RenderNode.addAnimator(RenderNode.java:817)\n                                                            at android.view.RenderNodeAnimator.setTarget(RenderNodeAnimator.java:300)\n                                                            at android.view.RenderNodeAnimator.setTarget(RenderNodeAnimator.java:282)\n                                                            at android.animation.RevealAnimator.&lt;init&gt;(RevealAnimator.java:37)\n                                                            at android.view.ViewAnimationUtils.createCircularReveal(ViewAnimationUtils.java:53)\n                                                            at io.codetail.animation.ViewAnimationUtils.createCircularReveal(ViewAnimationUtils.java:74)\n                                                            at io.codetail.animation.ViewAnimationUtils.createCircularReveal(ViewAnimationUtils.java:39)\n</code></pre>\n\n<p>Class initialization</p>\n\n<pre><code>class MemberMenu(ctx: Context, val member: Member): PopupWindow(ctx), View.OnClickListener {\nval mainView: View\n\ninit {\n    contentView = LayoutInflater.from(ctx).inflate(R.layout.member_menu_layout, null)\n    mainView = contentView.findViewById(R.id.member_menu_view)\n    val size = Helpers.dipToPixels(ctx, 240f)\n    width = size; height = size\n    setBackgroundDrawable(ColorDrawable())\n    isOutsideTouchable = true\n    isTouchable = true\n}\n.......\n</code></pre>\n"}, {"tags": ["generics", "kotlin"], "comments": [{"owner": {"reputation": 16077, "user_id": 97777, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fb95aca1c80de718bbfa01447220633b?s=128&d=identicon&r=PG", "display_name": "Duncan McGregor", "link": "https://stackoverflow.com/users/97777/duncan-mcgregor"}, "edited": false, "score": 2, "creation_date": 1475390860, "post_id": 39812227, "comment_id": 66919750, "body": "Related <a href=\"http://stackoverflow.com/q/39596420/97777\">stackoverflow.com/q/39596420/97777</a>"}], "answers": [{"comments": [{"owner": {"reputation": 16077, "user_id": 97777, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fb95aca1c80de718bbfa01447220633b?s=128&d=identicon&r=PG", "display_name": "Duncan McGregor", "link": "https://stackoverflow.com/users/97777/duncan-mcgregor"}, "edited": false, "score": 0, "creation_date": 1475390058, "post_id": 39812531, "comment_id": 66919614, "body": "I don&#39;t think it&#39;s a bug - the generic types of my function are satisfied by Any, so it compiles. The Array.fill example cited in your reference is also cited in the Kotin Generics documentation, but my attempts to use use-site variance have failed."}, {"owner": {"reputation": 16077, "user_id": 97777, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fb95aca1c80de718bbfa01447220633b?s=128&d=identicon&r=PG", "display_name": "Duncan McGregor", "link": "https://stackoverflow.com/users/97777/duncan-mcgregor"}, "edited": false, "score": 0, "creation_date": 1475439493, "post_id": 39812531, "comment_id": 66932917, "body": "I think we can hide the creation of the type-marshalling object behind a method call as in the answers to <a href=\"http://stackoverflow.com/q/39596420/97777\">stackoverflow.com/q/39596420/97777</a> - which is I suspect really the same question"}], "tags": [], "owner": {"reputation": 12732, "user_id": 430128, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c2aa2c9f527afea12a7fef458588b2a1?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/430128/raman"}, "is_accepted": true, "score": 4, "last_activity_date": 1475366945, "last_edit_date": 1475366945, "creation_date": 1475365356, "answer_id": 39812531, "question_id": 39812227, "link": "https://stackoverflow.com/questions/39812227/how-can-i-link-the-generic-types-of-two-kotlin-function-parameters/39812531#39812531", "title": "How can I link the generic types of two Kotlin function parameters?", "body": "<p>This seems to be an issue with Kotlin's type inference (though whether it is a bug or by design, I don't know). For example, if the types are explicit, this does not compile:</p>\n\n<pre><code>check&lt;String, Int&gt;(\"Hello\", String::length, \"banana\")\n</code></pre>\n\n<p>It is probably designed to work like Java's generic method type inference, which allows this because the compiler infers a common super-type of <code>R</code> and <code>T</code> for both parameters. See <a href=\"http://www.angelikalanger.com/GenericsFAQ/FAQSections/TechnicalDetails.html#FAQ404\" rel=\"nofollow\">Why doesn't type argument inference fail when I provide inconsistent method arguments?</a></p>\n\n<p>According to the post above, in Java 5, 6, and 7 you could probably declare it like</p>\n\n<pre><code>fun &lt;T, R, R1: R&gt; check(thing: T, property: KProperty1&lt;T, R&gt;, value: R1) = \n    property.get(thing) == value\n</code></pre>\n\n<p>and the call with inconsistent params would not compile (I haven't tried it). However, this was considered a bug and in Java 8 the call with inconsistent params still compiles (I tried it).</p>\n\n<p>In any case, you could wrap it in a class to avoid the inference and tie the type parameters together:</p>\n\n<pre><code>class Checker&lt;T, R&gt;(val property: KProperty1&lt;T, R&gt;)  {\n  fun check(thing: T, value: R) =\n    property.get(thing) == value\n}\n</code></pre>\n\n<pre><code>assertTrue(Checker(String::length).check(\"Hello\", 5))\n// does not compile\nassertTrue(Checker(String::length).check(\"Hello\", \"banana\"))\n</code></pre>\n"}], "owner": {"reputation": 16077, "user_id": 97777, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fb95aca1c80de718bbfa01447220633b?s=128&d=identicon&r=PG", "display_name": "Duncan McGregor", "link": "https://stackoverflow.com/users/97777/duncan-mcgregor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 634, "favorite_count": 2, "accepted_answer_id": 39812531, "answer_count": 1, "score": 3, "last_activity_date": 1475366945, "creation_date": 1475362525, "question_id": 39812227, "link": "https://stackoverflow.com/questions/39812227/how-can-i-link-the-generic-types-of-two-kotlin-function-parameters", "title": "How can I link the generic types of two Kotlin function parameters?", "body": "<p>I want to write something like </p>\n\n<pre><code>fun &lt;T, R&gt; check(thing: T, property: KProperty1&lt;T, R&gt;, value: R) = \n    property.get(thing) == value\n</code></pre>\n\n<p>so that </p>\n\n<pre><code>assertTrue(check(\"Hello\", String::length, 5))\n</code></pre>\n\n<p>but</p>\n\n<pre><code>assertTrue(check(\"Hello\", String::length, \"banana\"))\n</code></pre>\n\n<p>doesn't compile.</p>\n"}, {"tags": ["reflection", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 12732, "user_id": 430128, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c2aa2c9f527afea12a7fef458588b2a1?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/430128/raman"}, "edited": false, "score": 0, "creation_date": 1475326952, "post_id": 39806722, "comment_id": 66905187, "body": "Why not compare the class directly? <code>it.annotationClass == Metadata::class</code>"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 12732, "user_id": 430128, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c2aa2c9f527afea12a7fef458588b2a1?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/430128/raman"}, "edited": false, "score": 1, "creation_date": 1475437967, "post_id": 39806722, "comment_id": 66932498, "body": "The class is not accessible, is <code>internal</code>"}, {"owner": {"reputation": 12732, "user_id": 430128, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c2aa2c9f527afea12a7fef458588b2a1?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/430128/raman"}, "edited": false, "score": 2, "creation_date": 1475443545, "post_id": 39806722, "comment_id": 66934103, "body": "Ah. It seems to be accessible from Java. For example, I wrote this (unmerged) pull request for the Spring Framework: <a href=\"https://github.com/spring-projects/spring-framework/pull/1060/files#diff-244315b45582a5b7573a15644b16c373R48\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-framework/pull/1060/&hellip;</a> (yes, they wanted it written in Java, eek)."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 12732, "user_id": 430128, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c2aa2c9f527afea12a7fef458588b2a1?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/430128/raman"}, "edited": false, "score": 0, "creation_date": 1475496112, "post_id": 39806722, "comment_id": 66951632, "body": "Yep, Java doesn&#39;t respect the Kotlin idea of <code>internal</code>"}, {"owner": {"reputation": 1413, "user_id": 1042202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fb680a3bd143a50df2cf291981a1593?s=128&d=identicon&r=PG", "display_name": "Vojta", "link": "https://stackoverflow.com/users/1042202/vojta"}, "edited": false, "score": 1, "creation_date": 1576339762, "post_id": 39806722, "comment_id": 104871451, "body": "Metadata is <code>internal</code> in Kotlin 1.2 but it is <code>public</code> in Kotlin 1.3"}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 18, "last_activity_date": 1475496379, "last_edit_date": 1475496379, "creation_date": 1475325763, "answer_id": 39806722, "question_id": 39806721, "link": "https://stackoverflow.com/questions/39806721/i-want-to-detect-if-a-jvm-class-is-a-kotlin-class-or-not/39806722#39806722", "title": "I want to detect if a JVM Class is a Kotlin class or not", "body": "<p>Kotlin adds an annotation to all of its classes, and you can safely check for its existence by name.  This is an implementation detail and could change over time, but some key libraries use this annotation so it is likely to be ok indefinitely.</p>\n\n\n\n<pre><code>fun Class&lt;*&gt;.isKotlinClass(): Boolean {\n    return this.declaredAnnotations.any {\n        it.annotationClass.qualifiedName == \"kotlin.Metadata\"\n    }\n}\n</code></pre>\n\n<p>Can be used as:</p>\n\n<pre><code>someClass.isKotlinClass()\n</code></pre>\n\n<p>The class <code>kotlin.Metadata</code> is not accessed directly because it is marked <code>internal</code> in the Kotlin runtime.</p>\n"}], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 892, "favorite_count": 6, "accepted_answer_id": 39806722, "answer_count": 1, "score": 15, "last_activity_date": 1477695886, "creation_date": 1475325763, "last_edit_date": 1477695886, "question_id": 39806721, "link": "https://stackoverflow.com/questions/39806721/i-want-to-detect-if-a-jvm-class-is-a-kotlin-class-or-not", "title": "I want to detect if a JVM Class is a Kotlin class or not", "body": "<p>I want to do special functionality if I encounter a Kotlin class as compared to a generic Java class.  How can I detect if it is a Kotlin class?  </p>\n\n<p>I was hoping that calling <code>someClass.kotlin</code> would throw an exception or fail if the class wasn't Kotlin.  But it wraps Java classes just fine.  Then I noticed that if I do <code>someClass.kotlin.primaryConstructor</code> it seems to be <code>null</code> for all java classes even if they have a default constructor, is that a good marker?  But can that return <code>null</code> for a Kotlin class as well?</p>\n\n<p>What is the best way to say \"is this a Kotlin class?\"</p>\n"}, {"tags": ["annotations", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 1, "creation_date": 1475369263, "post_id": 39806461, "comment_id": 66916793, "body": "<code>find</code> is equivalent of <code>firstOrNull</code>, not <code>first</code>"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 0, "creation_date": 1475438111, "post_id": 39806461, "comment_id": 66932539, "body": "yep, in my mind it was backwards temporarily, just simplified the answer not worrying about it."}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 18, "last_activity_date": 1475438083, "last_edit_date": 1475438083, "creation_date": 1475323855, "answer_id": 39806461, "question_id": 39806025, "link": "https://stackoverflow.com/questions/39806025/kotlin-how-to-get-annotation-attribute-value/39806461#39806461", "title": "Kotlin - how to get annotation attribute value", "body": "<p>You can simply:</p>\n\n\n\n<pre><code>val table = c.annotations.find { it is Table } as? Table\nprintln(table?.name)\n</code></pre>\n\n<p>Note, I used the <code>is</code> operator since the annotation has <code>RUNTIME</code> retention and therefore it is an actual instance of the <code>Table</code> annotation within the collection.  But the following works for any annotation:</p>\n\n<pre><code>val table = c.annotations.find { it.annotationClass == Table::class } as? Table\n</code></pre>\n"}], "owner": {"reputation": 693, "user_id": 425993, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1267cef00f1c7f190e1912bc50d1e6e5?s=128&d=identicon&r=PG", "display_name": "Ace.Yin", "link": "https://stackoverflow.com/users/425993/ace-yin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11558, "favorite_count": 3, "accepted_answer_id": 39806461, "answer_count": 1, "score": 12, "last_activity_date": 1475438083, "creation_date": 1475321165, "question_id": 39806025, "link": "https://stackoverflow.com/questions/39806025/kotlin-how-to-get-annotation-attribute-value", "title": "Kotlin - how to get annotation attribute value", "body": "<p>say, i have one Kotlin class with annotations:</p>\n\n<pre><code>@Entity @Table(name=\"user\") data class User (val id:Long, val name:String)\n</code></pre>\n\n<p>How can i get the value of name attribute from @Table annotation?</p>\n\n<pre><code>fun &lt;T&gt; tableName(c: KClass&lt;T&gt;):String {\n    // i can get the @Table annotation like this:\n    val t = c.annotations.find { it.annotationClass == Table::class }\n    // but how can i get the value of \"name\" attribute from t?\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 2171, "user_id": 6180987, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/eAIPQ.jpg?s=128&g=1", "display_name": "Sergey Luchko", "link": "https://stackoverflow.com/users/6180987/sergey-luchko"}, "edited": false, "score": 0, "creation_date": 1475263219, "post_id": 39798539, "comment_id": 66890089, "body": "Thanks, but it&#39;s just example, I know, that I can place this function on isNice() level, anyway thanks."}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "reply_to_user": {"reputation": 2171, "user_id": 6180987, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/eAIPQ.jpg?s=128&g=1", "display_name": "Sergey Luchko", "link": "https://stackoverflow.com/users/6180987/sergey-luchko"}, "edited": false, "score": 0, "creation_date": 1475263397, "post_id": 39798539, "comment_id": 66890173, "body": "Got it. I&#39;ve updated my answer to remove the unnecessary simplified example."}], "tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": false, "score": 14, "last_activity_date": 1475263250, "last_edit_date": 1475263250, "creation_date": 1475262625, "answer_id": 39798539, "question_id": 39798269, "link": "https://stackoverflow.com/questions/39798269/return-from-lambdas-or-kotlin-return-is-not-allowed-here/39798539#39798539", "title": "Return from lambdas or Kotlin: &#39;return&#39; is not allowed here", "body": "<p>You cannot do a <a href=\"https://kotlinlang.org/docs/reference/inline-functions.html#non-local-returns\" rel=\"noreferrer\">non-local return</a> inside a lambda but you can change your lambda to an anonymous function:</p>\n\n<pre><code>fun String.isNice(): Boolean {\n    val hasRepeat = fun(): Boolean {\n        for (i in 0..(length - 2)) {\n            if (subSequence(i, i + 2).toSet().size == 1) {\n                return true\n            }\n        }\n        return false\n    }\n\n    return hasRepeat()\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2171, "user_id": 6180987, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/eAIPQ.jpg?s=128&g=1", "display_name": "Sergey Luchko", "link": "https://stackoverflow.com/users/6180987/sergey-luchko"}, "edited": false, "score": 0, "creation_date": 1475310539, "post_id": 39799406, "comment_id": 66900758, "body": "Thanks, your answer also give me some extra explanation about this question."}], "tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": true, "score": 49, "last_activity_date": 1475266394, "creation_date": 1475266394, "answer_id": 39799406, "question_id": 39798269, "link": "https://stackoverflow.com/questions/39798269/return-from-lambdas-or-kotlin-return-is-not-allowed-here/39799406#39799406", "title": "Return from lambdas or Kotlin: &#39;return&#39; is not allowed here", "body": "<p>You can label lambda and then use labeled return:</p>\n\n<pre><code>fun String.isNice(): Boolean {\n    val hasRepeat = hasRepeat@ {\n        for (i in 0 .. (length - 2)) {\n            if (subSequence(i, i + 2).toSet().size == 1) {\n                return@hasRepeat true\n                println(subSequence(i, i + 2)) // &lt;-- note that this line is unreachable\n            }\n        }\n        false\n    }\n\n    return hasRepeat()\n}\n</code></pre>\n\n<p>or you can use named local function, if you do not need <code>hasRepeat</code> to be function reference:</p>\n\n<pre><code>fun String.isNice(): Boolean {\n    fun hasRepeat(): Boolean {\n        for (i in 0 .. (length - 2)) {\n            if (subSequence(i, i + 2).toSet().size == 1) {\n                return true\n            }\n        }\n        return false\n    }\n\n    return hasRepeat()\n}\n</code></pre>\n"}], "owner": {"reputation": 2171, "user_id": 6180987, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/eAIPQ.jpg?s=128&g=1", "display_name": "Sergey Luchko", "link": "https://stackoverflow.com/users/6180987/sergey-luchko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15708, "favorite_count": 6, "accepted_answer_id": 39799406, "answer_count": 2, "score": 46, "last_activity_date": 1475266394, "creation_date": 1475261598, "question_id": 39798269, "link": "https://stackoverflow.com/questions/39798269/return-from-lambdas-or-kotlin-return-is-not-allowed-here", "title": "Return from lambdas or Kotlin: &#39;return&#39; is not allowed here", "body": "<p>I am trying to write function which will tell me that string is nice, nice means string has at least one repetition of letters in the string. But I can't to make return from lambda, it's always return false, though condition in if statement passed. Can somebody explain me how make return?</p>\n\n<p>I have tried to write return, but IDEA gave me the message <strong>Kotlin: 'return' is not allowed here</strong></p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    println(\"sddfsdf\".isNice())\n}\n\nfun String.isNice(): Boolean {\n    val hasRepeat = {\n        for (i in 0 .. (length - 2)) {\n            if (subSequence(i, i + 2).toSet().size == 1) {\n                true\n                println(subSequence(i, i + 2))\n            }\n        }\n        false\n    }\n\n    return hasRepeat()\n}\n</code></pre>\n\n<p>ouput is:</p>\n\n<pre><code>dd\nfalse\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 285, "user_id": 3977873, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f655f77e3a43fa75109848f9f7253aed?s=128&d=identicon&r=PG&f=1", "display_name": "klc", "link": "https://stackoverflow.com/users/3977873/klc"}, "edited": false, "score": 0, "creation_date": 1475286135, "post_id": 39794022, "comment_id": 66896466, "body": "Is there a way to make inline function global? As you can see this sumByBigDecimal is used accross the whole application."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 285, "user_id": 3977873, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f655f77e3a43fa75109848f9f7253aed?s=128&d=identicon&r=PG&f=1", "display_name": "klc", "link": "https://stackoverflow.com/users/3977873/klc"}, "edited": false, "score": 1, "creation_date": 1475318710, "post_id": 39794022, "comment_id": 66902850, "body": "the function is global by default @klc.  It can be imported and used anywhere."}], "tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": false, "score": 9, "last_activity_date": 1475246884, "last_edit_date": 1475246884, "creation_date": 1475246136, "answer_id": 39794022, "question_id": 39793600, "link": "https://stackoverflow.com/questions/39793600/kotlin-sum-of-bigdecimal-in-a-list/39794022#39794022", "title": "Kotlin: Sum of BigDecimal in a list", "body": "<p>You can create your own <code>sumByBigDecimal</code> <a href=\"https://kotlinlang.org/docs/reference/extensions.html#extension-functions\" rel=\"noreferrer\">extension function</a> similar to <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/sum-by-double.html\" rel=\"noreferrer\"><code>sumByDouble</code></a>. e.g.:</p>\n\n<pre><code>/**\n * Returns the sum of all values produced by [selector] function applied to each element in\n * the collection.\n */\ninline fun &lt;T&gt; Iterable&lt;T&gt;.sumByBigDecimal(selector: (T) -&gt; BigDecimal): BigDecimal {\n    var sum: BigDecimal = BigDecimal.ZERO\n    for (element in this) {\n        sum += selector(element)\n    }\n    return sum\n}\n</code></pre>\n\n<p>Example usage:</p>\n\n<pre><code>val totalById = list\n        .filter { it.status == StatusEnum.Active }\n        .groupBy { it.item.id }\n        .mapValues { it.value.sumByBigDecimal { it.amount } }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 285, "user_id": 3977873, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f655f77e3a43fa75109848f9f7253aed?s=128&d=identicon&r=PG&f=1", "display_name": "klc", "link": "https://stackoverflow.com/users/3977873/klc"}, "edited": false, "score": 2, "creation_date": 1475286384, "post_id": 39795307, "comment_id": 66896494, "body": "I tried:  .mapValues { it.value.map { it.amount}.fold(BigDecimal.ZERO, BigDecimal::add)   but complierr complain &quot;::add&quot;:  None of the following functions can be called with the arguments supplied:"}, {"owner": {"reputation": 285, "user_id": 3977873, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f655f77e3a43fa75109848f9f7253aed?s=128&d=identicon&r=PG&f=1", "display_name": "klc", "link": "https://stackoverflow.com/users/3977873/klc"}, "edited": false, "score": 0, "creation_date": 1475286389, "post_id": 39795307, "comment_id": 66896496, "body": "[ERROR] private open fun add(p0: BigInteger!, p1: Int, p2: BigInteger!, p3: Int): BigDecimal! defined in java.math.BigDecimal [ERROR] private open fun add(p0: Long, p1: Int, p2: BigInteger!, p3: Int): BigDecimal! defined in java.math.BigDecimal [ERROR] private open fun add(p0: Long, p1: Int, p2: Long, p3: Int): BigDecimal! defined in java.math.BigDecimal [ERROR] private open fun add(p0: Long, p1: Long): Long defined in java.math.BigDecimal [ERROR] private open fun add(p0: Long, p1: Long, p2: Int): BigDecimal! defined in java.math.BigDecimal"}, {"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "reply_to_user": {"reputation": 285, "user_id": 3977873, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f655f77e3a43fa75109848f9f7253aed?s=128&d=identicon&r=PG&f=1", "display_name": "klc", "link": "https://stackoverflow.com/users/3977873/klc"}, "edited": false, "score": 0, "creation_date": 1475293834, "post_id": 39795307, "comment_id": 66897587, "body": "@klc, I&#39;ve crafted a complete example and it works: <a href=\"http://try.kotlinlang.org/#/UserProjects/cpohvnjtfr0uvpvcjc3gt02b1t/n0j3v72oh55hdf141663os6eek\" rel=\"nofollow noreferrer\">try.kotlinlang.org/#/UserProjects/cpohvnjtfr0uvpvcjc3gt02b1t&zwnj;&#8203;/&hellip;</a>, you can try it yourself there."}, {"owner": {"reputation": 285, "user_id": 3977873, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f655f77e3a43fa75109848f9f7253aed?s=128&d=identicon&r=PG&f=1", "display_name": "klc", "link": "https://stackoverflow.com/users/3977873/klc"}, "edited": false, "score": 0, "creation_date": 1475312976, "post_id": 39795307, "comment_id": 66901340, "body": "thanks for the example, i can&#39;t get it compile in intellij though....will look into it.... The first way works!"}], "tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": true, "score": 29, "last_activity_date": 1599168956, "last_edit_date": 1599168956, "creation_date": 1475250263, "answer_id": 39795307, "question_id": 39793600, "link": "https://stackoverflow.com/questions/39793600/kotlin-sum-of-bigdecimal-in-a-list/39795307#39795307", "title": "Kotlin: Sum of BigDecimal in a list", "body": "<p>Just like you've used <code>Collectors.reducing</code> in java, you can use <code>fold</code> or <code>reduce</code> extension functions in Kotlin:</p>\n<pre><code>val bigDecimals: List&lt;BigDecimal&gt; = ...\nval sum = bigDecimals.fold(BigDecimal.ZERO) { acc, e -&gt; acc + e }\n// or\nval sum2 = bigDecimals.fold(BigDecimal.ZERO, BigDecimal::add)\n</code></pre>\n<p>The full example on play.kotlinlang.org: <a href=\"https://pl.kotl.in/o6pRhrqys\" rel=\"noreferrer\">https://pl.kotl.in/o6pRhrqys</a></p>\n<p>Starting with <strong>Kotlin 1.4</strong> there's now a function <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/sum-of.html\" rel=\"noreferrer\"><code>sumOf</code></a>, that takes a selector function and sums all values returned by this selector, so you can use it as following:</p>\n<pre><code>val totalById = list\n                .groupBy { it.id }\n                .mapValues { it.value.sumOf { it.amount } }\n</code></pre>\n<p>The full example on play.kotlinlang.org: <a href=\"https://pl.kotl.in/jXAfoyff-\" rel=\"noreferrer\">https://pl.kotl.in/jXAfoyff-</a></p>\n"}, {"tags": [], "owner": {"reputation": 17145, "user_id": 5093961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3736a281ed5cdc18e41f6d3100d76dcc?s=128&d=identicon&r=PG", "display_name": "Steven Spungin", "link": "https://stackoverflow.com/users/5093961/steven-spungin"}, "is_accepted": false, "score": 4, "last_activity_date": 1521042391, "creation_date": 1521042391, "answer_id": 49282150, "question_id": 39793600, "link": "https://stackoverflow.com/questions/39793600/kotlin-sum-of-bigdecimal-in-a-list/49282150#49282150", "title": "Kotlin: Sum of BigDecimal in a list", "body": "<p>Combining the fold approach and the extension function approach, you can do this:</p>\n\n<pre><code>fun Iterable&lt;BigDecimal&gt;.sumByBigDecimal(): BigDecimal {\n    return this.fold(BigDecimal.ZERO) { acc, e -&gt; acc + e }\n}\n\nfun &lt;T&gt; Iterable&lt;T&gt;.sumByBigDecimal(transform: (T) -&gt; BigDecimal): BigDecimal {\n    return this.fold(BigDecimal.ZERO) { acc, e -&gt; acc + transform.invoke(e) }\n}\n</code></pre>\n\n<p>Use them like this:</p>\n\n<pre><code>listOfBigs.sumByBigDecimal()\n\nlistOfWidgets.sumByBigDecimal { it.price }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1565, "user_id": 859673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d311deee39c399097f60d37c338c64aa?s=128&d=identicon&r=PG", "display_name": "ygor", "link": "https://stackoverflow.com/users/859673/ygor"}, "is_accepted": false, "score": 0, "last_activity_date": 1551935591, "creation_date": 1551935591, "answer_id": 55036511, "question_id": 39793600, "link": "https://stackoverflow.com/questions/39793600/kotlin-sum-of-bigdecimal-in-a-list/55036511#55036511", "title": "Kotlin: Sum of BigDecimal in a list", "body": "<p>If the list is not empty, you can also use <code>reduce</code>:</p>\n\n<pre><code>val bigDecimals: List&lt;BigDecimal&gt; = ...\nval sum = bigDecimals.reduce(BigDecimal::add)\n</code></pre>\n\n<p>If the list can be empty, than you need <code>fold</code> and <code>BigDecimal.ZERO</code>, just like the accepted answer suggests.</p>\n"}, {"comments": [{"owner": {"reputation": 1155, "user_id": 6491200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ee9f07ba539cbd424db19acf116ce83?s=128&d=identicon&r=PG", "display_name": "Caio Santos", "link": "https://stackoverflow.com/users/6491200/caio-santos"}, "edited": false, "score": 0, "creation_date": 1616285201, "post_id": 64536760, "comment_id": 117954510, "body": "This should be the right/best answer! Thank you."}], "tags": [], "owner": {"reputation": 31, "user_id": 13237249, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GhgxvIjNdF9-lOA4vNrdU5iaoAkRsleivDMFjTWsA=k-s128", "display_name": "Jacek Pietras", "link": "https://stackoverflow.com/users/13237249/jacek-pietras"}, "is_accepted": false, "score": 3, "last_activity_date": 1603713751, "creation_date": 1603713751, "answer_id": 64536760, "question_id": 39793600, "link": "https://stackoverflow.com/questions/39793600/kotlin-sum-of-bigdecimal-in-a-list/64536760#64536760", "title": "Kotlin: Sum of BigDecimal in a list", "body": "<p>In Kotlin 1.4 they introduced <code>sumOf</code>, usage of it:</p>\n<pre><code>val bigDecimals: List&lt;BigDecimal&gt; = ...\nval sum = bigDecimals.sumOf { it }\n</code></pre>\n<p><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/sum-of.html\" rel=\"nofollow noreferrer\">documentation</a></p>\n"}], "owner": {"reputation": 285, "user_id": 3977873, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f655f77e3a43fa75109848f9f7253aed?s=128&d=identicon&r=PG&f=1", "display_name": "klc", "link": "https://stackoverflow.com/users/3977873/klc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9973, "favorite_count": 2, "accepted_answer_id": 39795307, "answer_count": 5, "score": 14, "last_activity_date": 1603713751, "creation_date": 1475244873, "last_edit_date": 1475245345, "question_id": 39793600, "link": "https://stackoverflow.com/questions/39793600/kotlin-sum-of-bigdecimal-in-a-list", "title": "Kotlin: Sum of BigDecimal in a list", "body": "<p>I have a list that I want to filter, then return a map of id with sum of amounts:</p>\n\n<pre><code>val totalById = list\n                    .filter { it.status == StatusEnum.Active }\n                    .groupBy { it.item.id }\n                    .mapValues { it.value.sumBy { it.amount } }\n</code></pre>\n\n<p>\"it.amount\" is BigDecimal, but looks like sumBy is Int only.</p>\n\n<p>For java 8 it'd be:</p>\n\n<p><code>Collectors.groupingBy(i-&gt; i.getItem().getId(), Collectors.mapping(Item::getAmount, Collectors.reducing(BigDecimal.ZERO, BigDecimal::add))))</code></p>\n\n<p>Is there a way to do it in Kotlin?</p>\n"}, {"tags": ["mockito", "kotlin", "setter", "verify"], "answers": [{"comments": [{"owner": {"reputation": 1025, "user_id": 4777865, "user_type": "registered", "profile_image": "https://graph.facebook.com/752566834859188/picture?type=large", "display_name": "Gabriel Rohden", "link": "https://stackoverflow.com/users/4777865/gabriel-rohden"}, "edited": false, "score": 0, "creation_date": 1606348910, "post_id": 39786121, "comment_id": 114940966, "body": "Also be sure to check that the verified property is marked as <b>open</b>... took me a while before actually reading mockito message about that"}], "tags": [], "owner": {"reputation": 5483, "user_id": 1356130, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/71a884fac9d80ee3171a4018b1eaf660?s=128&d=identicon&r=PG", "display_name": "atok", "link": "https://stackoverflow.com/users/1356130/atok"}, "is_accepted": true, "score": 51, "last_activity_date": 1609523269, "last_edit_date": 1609523269, "creation_date": 1475221011, "answer_id": 39786121, "question_id": 39786012, "link": "https://stackoverflow.com/questions/39786012/how-to-verify-call-on-setter-in-kotlin-using-mockito/39786121#39786121", "title": "How to verify call on setter in kotlin using mockito?", "body": "<p>It's simpler than you think. Calling:</p>\n<pre><code>verify(contract.loginDisplay).username = &quot;&quot;\n</code></pre>\n<p>will have the result you want. Setter <code>setUsername</code> on the mock of <code>contract.loginDisplay</code> will be called.</p>\n"}], "owner": {"reputation": 471, "user_id": 1261504, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/f4f29cb6fad3da88220e0ae4c89dfc14?s=128&d=identicon&r=PG", "display_name": "przebar", "link": "https://stackoverflow.com/users/1261504/przebar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3787, "favorite_count": 0, "accepted_answer_id": 39786121, "answer_count": 1, "score": 17, "last_activity_date": 1609523269, "creation_date": 1475220581, "question_id": 39786012, "link": "https://stackoverflow.com/questions/39786012/how-to-verify-call-on-setter-in-kotlin-using-mockito", "title": "How to verify call on setter in kotlin using mockito?", "body": "<pre><code>interface LoginDisplay {\n    var username: String\n    var password: String\n}\n\n\nclass LoginActivityLoginDisplay : LoginDisplay {\n\n    override var username: String\n        get() = usernameEditView.text.toString()\n        set(value) {\n            usernameEditView.setText(value)\n        }\n\n    override var password: String\n        get() = passwordEditView.text.toString()\n        set(value) {\n            passwordEditView.setText(value)\n        }\n\n}\n</code></pre>\n\n<p>This is the example of code I'd like to test with Mockito as follows:</p>\n\n<pre><code>verify(contract.loginDisplay).username\n</code></pre>\n\n<p>Tricky thing is - that in this call i can only verify getter of field username, meanwhile I'd like to test call on setter of this field.</p>\n\n<p>Any help?</p>\n"}, {"tags": ["gson", "kotlin"], "comments": [{"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 0, "creation_date": 1475184882, "post_id": 39780021, "comment_id": 66854951, "body": "Show us the json please."}, {"owner": {"reputation": 2094, "user_id": 3858030, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/213edfb3b091fb865caa70bde8c43763?s=128&d=identicon&r=PG", "display_name": "Ufkoku", "link": "https://stackoverflow.com/users/3858030/ufkoku"}, "reply_to_user": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 0, "creation_date": 1475185552, "post_id": 39780021, "comment_id": 66855217, "body": "@miensol json objects don&#39;t contain field &quot;answers&quot;. But I also triyed to use ExclusionStrategy for serialization and deserialization to exclude this field."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 0, "creation_date": 1475234631, "post_id": 39780021, "comment_id": 66873742, "body": "A side note:  Jackson (JSON deser) has Kotlin support for dealing with Kotlin constructors and use cases via <a href=\"https://github.com/FasterXML/jackson-module-kotlin\" rel=\"nofollow noreferrer\">github.com/FasterXML/jackson-module-kotlin</a> ... for other Java libraries you should check for similar because they do not understand all concepts Kotlin nor take advantage of them.  You will end up doing unnatural Kotlin (i.e. the answer from @miensol) just to satisfy your deser library.  unfortuneatly GSON is not extensible in a way that allows it to be friendlier to Kotlin."}], "answers": [{"tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 8, "last_activity_date": 1475519213, "last_edit_date": 1495541909, "creation_date": 1475214129, "answer_id": 39784450, "question_id": 39780021, "link": "https://stackoverflow.com/questions/39780021/kotlin-object-deserialization-with-gson/39784450#39784450", "title": "Kotlin object deserialization with GSON", "body": "<p>As described in <a href=\"https://stackoverflow.com/questions/18645050/is-default-no-args-constructor-mandatory-for-gson\">this answer</a> <a href=\"https://github.com/google/gson\" rel=\"noreferrer\">Gson</a> can <em>unsafely</em> handle no-args constructor scenarios. It does so by leveraging <a href=\"https://github.com/google/gson/blob/master/gson/src/main/java/com/google/gson/internal/UnsafeAllocator.java\" rel=\"noreferrer\"><code>UnsafeAllocator</code></a> that in turn uses <a href=\"http://www.docjar.com/docs/api/sun/misc/Unsafe.html#allocateInstance(Class)\" rel=\"noreferrer\"><code>allocateInstan\u0441e(Class p)</code></a>. This means that when there is no no-args constructor and there is no custom <a href=\"https://github.com/google/gson/blob/master/UserGuide.md#TOC-Writing-an-Instance-Creator\" rel=\"noreferrer\">instance creator</a> registered the object created by <code>Gson</code> <strong>will have fields initialized with their declared types default values</strong>.</p>\n\n<p>To resolve that either add a no-arg constructor i.e</p>\n\n<pre><code>private constructor() : this(-1, -1, \"\", \"\", \"\", null, -1, \"\", \"\", -1, null, -1, -1, null, null, -1, null)\n</code></pre>\n\n<p>Or add default parameter values to your primary constructor like so:</p>\n\n<pre><code>class ThreadComment(\n        banned: Int = -1,\n        closed: Int = -1,\n        comment: String? = null,\n        date: String? = null,\n        email: String? = null,\n        files: ArrayList&lt;File&gt;? = null,\n        lasthit: Int = -1,\n        name: String? = null,\n        num: String? = null,\n        op: Int = -1,\n        parent: String? = null,\n        postsCount: Int = -1,\n        sticky: Int = -1,\n        subject: String? = null,\n        tags: String? = null,\n        timestamp: Int = -1,\n        trip: String? = null\n) : Comment(banned, closed, comment, date, email, files, lasthit, name, num, op, parent, postsCount, sticky, subject, tags, timestamp, trip) {\n    val answers: ArrayList&lt;String&gt; = ArrayList()\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1845, "user_id": 4204176, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7d2919f023447cbe3492e8d5f8ae4ad6?s=128&d=identicon&r=PG", "display_name": "Jesus Almaral - Hackaprende", "link": "https://stackoverflow.com/users/4204176/jesus-almaral-hackaprende"}, "is_accepted": false, "score": 9, "last_activity_date": 1488305106, "creation_date": 1488305106, "answer_id": 42515813, "question_id": 39780021, "link": "https://stackoverflow.com/questions/39780021/kotlin-object-deserialization-with-gson/42515813#42515813", "title": "Kotlin object deserialization with GSON", "body": "<p>That\u00b4s weird, I just used @SerializedName normally as in Java with a data class and it worked:</p>\n\n<pre><code>data class(@SerializedName(\"my_string_value\") val myStringValue: String, @SerializedName(\"my_int_value\") val myIntValue: Int)\n</code></pre>\n"}], "owner": {"reputation": 2094, "user_id": 3858030, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/213edfb3b091fb865caa70bde8c43763?s=128&d=identicon&r=PG", "display_name": "Ufkoku", "link": "https://stackoverflow.com/users/3858030/ufkoku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9181, "favorite_count": 1, "accepted_answer_id": 39784450, "answer_count": 2, "score": 5, "last_activity_date": 1488305106, "creation_date": 1475183165, "last_edit_date": 1475196191, "question_id": 39780021, "link": "https://stackoverflow.com/questions/39780021/kotlin-object-deserialization-with-gson", "title": "Kotlin object deserialization with GSON", "body": "<p>I have a class </p>\n\n<pre><code>class ThreadComment(\n    banned: Int,\n    closed: Int,\n    comment: String?,\n    date: String?,\n    email: String?,\n    files: ArrayList&lt;File&gt;?,\n    lasthit: Int,\n    name: String?,\n    num: String?,\n    op: Int,\n    parent: String?,\n    postsCount: Int,\n    sticky: Int,\n    subject: String?,\n    tags: String?,\n    timestamp: Int,\n    trip: String?) : Comment(banned, closed, comment, date, email, files, lasthit, name, num, op, parent, postsCount, sticky, subject, tags, timestamp, trip) {\n\nval answers: ArrayList&lt;String&gt; = ArrayList()}\n</code></pre>\n\n<p>Parent class looks like </p>\n\n<pre><code>open class Comment(\n    @com.google.gson.annotations.SerializedName(\"banned\")\n    val banned: Int = 0,\n\n    @com.google.gson.annotations.SerializedName(\"closed\")\n    val closed: Int = 0,\n\n    @com.google.gson.annotations.SerializedName(\"comment\")\n    val comment: String? = null,\n\n    @com.google.gson.annotations.SerializedName(\"date\")\n    val date: String? = null,\n\n    @com.google.gson.annotations.SerializedName(\"email\")\n    val email: String? = null,\n\n    @com.google.gson.annotations.SerializedName(\"files\")\n    val files: ArrayList&lt;File&gt;? = null,\n\n    @com.google.gson.annotations.SerializedName(\"lasthit\")\n    val lasthit: Int = 0,\n\n    @com.google.gson.annotations.SerializedName(\"name\")\n    val name: String? = null,\n\n    @com.google.gson.annotations.SerializedName(\"num\")\n    val num: String? = null,\n\n    @com.google.gson.annotations.SerializedName(\"op\")\n    val op: Int = 0,\n\n    @com.google.gson.annotations.SerializedName(\"parent\")\n    val parent: String? = null,\n\n    @com.google.gson.annotations.SerializedName(\"posts_count\")\n    val postsCount: Int = 0,\n\n    @com.google.gson.annotations.SerializedName(\"sticky\")\n    val sticky: Int = 0,\n\n    @com.google.gson.annotations.SerializedName(\"subject\")\n    val subject: String? = null,\n\n    @com.google.gson.annotations.SerializedName(\"tags\")\n    val tags: String? = null,\n\n    @com.google.gson.annotations.SerializedName(\"timestamp\")\n    val timestamp: Int = 0,\n\n    @com.google.gson.annotations.SerializedName(\"trip\")\n    val trip: String? = null) : Serializable\n</code></pre>\n\n<p>But after deserialization with GSON answers field is null. \n<a href=\"https://i.stack.imgur.com/3ijnL.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/3ijnL.png\" alt=\"Debugger\"></a></p>\n\n<p>I also tried to put initiation into init{}, but it still null, by lazy throws an exception about calling lazy.getValue on a null object reference</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 17986, "user_id": 4730812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d336a10204c1cd2e7fa47071ed629669?s=128&d=identicon&r=PG&f=1", "display_name": "piotrek1543", "link": "https://stackoverflow.com/users/4730812/piotrek1543"}, "edited": false, "score": 0, "creation_date": 1476535308, "post_id": 39764704, "comment_id": 67392635, "body": "this might be issue with data-binding library, remove all data-binding dependencies and code."}], "answers": [{"tags": [], "owner": {"reputation": 17986, "user_id": 4730812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d336a10204c1cd2e7fa47071ed629669?s=128&d=identicon&r=PG&f=1", "display_name": "piotrek1543", "link": "https://stackoverflow.com/users/4730812/piotrek1543"}, "is_accepted": true, "score": 2, "last_activity_date": 1476538336, "creation_date": 1476538336, "answer_id": 40059640, "question_id": 39764704, "link": "https://stackoverflow.com/questions/39764704/errorexecution-failed-for-task-appcompiledebugkotlinafterjava/40059640#40059640", "title": "Error:Execution failed for task &#39;:app:compileDebugKotlinAfterJava&#39;", "body": "<p>First of all, check if you have done all steps described in article below correctly: <a href=\"https://kotlinlang.org/docs/tutorials/kotlin-android.html\" rel=\"nofollow\">https://kotlinlang.org/docs/tutorials/kotlin-android.html</a></p>\n\n<p>Then check which <code>kotlin-plugin</code> are you're already using. Hope you're not using <code>1.0.4</code> version and you chose <code>Stable</code> channel for <code>kotlin</code> updates, if not please downgrade it and rebuild projects.</p>\n\n<p>There are some known issues dealing Kotlin with Data Binding library. Please, if possible - remove all its dependencies and rewrite binded code using <code>kotlin-extensions</code> library. Trust me, you don't need this library, when you're using code.</p>\n\n<p>Then choose <code>File -&gt; Invalidate Caches</code>, after invalidating and restart android studio, clean and rebuild your project.</p>\n\n<p>Hope it will help</p>\n"}, {"tags": [], "owner": {"reputation": 575, "user_id": 6362346, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FeiKe.jpg?s=128&g=1", "display_name": "marlonpya", "link": "https://stackoverflow.com/users/6362346/marlonpya"}, "is_accepted": false, "score": 1, "last_activity_date": 1517331491, "creation_date": 1517331491, "answer_id": 48526719, "question_id": 39764704, "link": "https://stackoverflow.com/questions/39764704/errorexecution-failed-for-task-appcompiledebugkotlinafterjava/48526719#48526719", "title": "Error:Execution failed for task &#39;:app:compileDebugKotlinAfterJava&#39;", "body": "<p>maybe u change version Kotlin language to ext.kotlin_version = '1.0.2-1'\nby </p>\n\n<p><a href=\"https://github.com/djuarez/Kotlin-CleanArchitecture/blob/master/build.gradle\" rel=\"nofollow noreferrer\">https://github.com/djuarez/KotlinCleanArchitecture/blob/master/build.gradle</a></p>\n"}], "owner": {"reputation": 15, "user_id": 6682769, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C2z0K.png?s=128&g=1", "display_name": "Liwei", "link": "https://stackoverflow.com/users/6682769/liwei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3746, "favorite_count": 0, "accepted_answer_id": 40059640, "answer_count": 2, "score": 0, "last_activity_date": 1517331491, "creation_date": 1475136335, "last_edit_date": 1475400746, "question_id": 39764704, "link": "https://stackoverflow.com/questions/39764704/errorexecution-failed-for-task-appcompiledebugkotlinafterjava", "title": "Error:Execution failed for task &#39;:app:compileDebugKotlinAfterJava&#39;", "body": "<pre><code>Information:Gradle tasks [:app:assembleDebug]\n/Users/liwei/Desktop/Schedule/app/src/main/java/com/schedule/MainActivity.kt\nError:(5, 16) Unresolved reference: os\nError:(12, 8) Unresolved reference: java\nError:(13, 8) Unresolved reference: java\nError:(21, 5) 'onCreate' overrides nothing\nError:(21, 47) Unresolved reference: Bundle\nError:(27, 26) Unresolved reference: SimpleDateFormat\nError:(28, 20) Unresolved reference: Date\nError:(28, 25) Unresolved reference: System\nError:(31, 19) Unresolved reference: Calendar\nError:(35, 41) Unresolved reference: Calendar\nError:(46, 47) Type mismatch: inferred type is MainActivity but Context was expected\nError:(49, 25) Type mismatch: inferred type is kotlin.String but java.lang.String was expected\nError:(50, 24) The integer literal does not conform to the expected type Object\nError:(52, 45) Type mismatch: inferred type is MainActivity but Context was expected\nError:(55, 25) Type mismatch: inferred type is kotlin.String but java.lang.String was expected\nError:(56, 24) The integer literal does not conform to the expected type Object\nError:(58, 45) Type mismatch: inferred type is MainActivity but Context was expected\nError:(61, 25) Type mismatch: inferred type is kotlin.String but java.lang.String was expected\nError:(62, 24) The integer literal does not conform to the expected type Object\nError:(64, 44) Type mismatch: inferred type is MainActivity but Context was expected\nError:(67, 25) Type mismatch: inferred type is kotlin.String but  java.lang.String was expected\nError:(68, 24) The integer literal does not conform to the expected type Object\nError:(70, 37) Unresolved reference. None of the following candidates is applicable because of receiver type mismatch:\npublic val [ERROR : ].tab: PagerBottomTabLayout! defined in kotlinx.android.synthetic.main.activity_main\nError:(84, 5) Class 'OnTabItemlistener' must be declared abstract or implement abstract member public abstract fun onSelected(p0: Int, p1: Object!): Unit defined in me.majiajie.pagerbottomtabstrip.listener.OnTabItemSelectListener\nError:(85, 9) 'onSelected' overrides nothing\nError:(86, 19) Unresolved reference: UnsupportedOperationException\nError:(89, 9) 'onRepeatClick' overrides nothing\nError:(90, 19) Unresolved reference: UnsupportedOperationException\nError:Execution failed for task ':app:compileDebugKotlinAfterJava'.\n</code></pre>\n\n<blockquote>\n  <p>Compilation error. See log for more details\n  Information:BUILD FAILED\n  Information:Total time: 8.812 secs\n  Information:29 errors\n  Information:0 warnings\n  Information:See complete output in console</p>\n</blockquote>\n\n<p>Kotlin Error\nI don\u2018t down\nAlways appear this type of problem\nPlease\nHelp\nThanks</p>\n\n<p><img src=\"https://i.stack.imgur.com/BnMzA.png\" alt=\"enter image description here\"></p>\n\n<p><img src=\"https://i.stack.imgur.com/Bnwhj.png\" alt=\"enter image description here\"></p>\n"}]