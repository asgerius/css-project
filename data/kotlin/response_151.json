[{"tags": ["android", "firebase-realtime-database", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 894, "user_id": 2467270, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/6e17d7890dc4410cd04ca6bb49d282f2?s=128&d=identicon&r=PG&f=1", "display_name": "secondubly", "link": "https://stackoverflow.com/users/2467270/secondubly"}, "edited": false, "score": 0, "creation_date": 1511997103, "post_id": 47563332, "comment_id": 82084679, "body": "Didn&#39;t help - I still got the same error on the same line - if it helps, I know that the code retrieves the info from the db, it just break down after that step when I try to assign it to a variable (not sure exactly what is going on in the code at that point since when I stepped through it, it throws the error after retrieving things from the db)"}, {"owner": {"reputation": 4485, "user_id": 538837, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/cg8lv.jpg?s=128&g=1", "display_name": "Erik", "link": "https://stackoverflow.com/users/538837/erik"}, "reply_to_user": {"reputation": 894, "user_id": 2467270, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/6e17d7890dc4410cd04ca6bb49d282f2?s=128&d=identicon&r=PG&f=1", "display_name": "secondubly", "link": "https://stackoverflow.com/users/2467270/secondubly"}, "edited": false, "score": 0, "creation_date": 1511997740, "post_id": 47563332, "comment_id": 82084900, "body": "not sure but just double check the case for all field names and uninstall app, Android Studio clean and try it again. The uninstall is important since Firebase local cash must be flushed"}, {"owner": {"reputation": 894, "user_id": 2467270, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/6e17d7890dc4410cd04ca6bb49d282f2?s=128&d=identicon&r=PG&f=1", "display_name": "secondubly", "link": "https://stackoverflow.com/users/2467270/secondubly"}, "edited": false, "score": 0, "creation_date": 1511998394, "post_id": 47563332, "comment_id": 82085128, "body": "I&#39;m running it on an emulator, do you think that could be causing an issue?"}], "tags": [], "owner": {"reputation": 4485, "user_id": 538837, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/cg8lv.jpg?s=128&g=1", "display_name": "Erik", "link": "https://stackoverflow.com/users/538837/erik"}, "is_accepted": false, "score": 0, "last_activity_date": 1511996691, "creation_date": 1511996691, "answer_id": 47563332, "question_id": 47563197, "link": "https://stackoverflow.com/questions/47563197/class-is-missing-a-constructor-with-no-arguments-but-ive-provided-a-construct/47563332#47563332", "title": "Class is missing a constructor with no arguments - but I&#39;ve provided a constructor", "body": "<p>Not sure about Kotlin(never used it) but i think the pojo field names have to match the Firebase entry name</p>\n\n<p>like:</p>\n\n<blockquote>\n  <p>var Password: String = \"\",</p>\n</blockquote>\n\n<p>has the capital \"P\" but in your Firebase the \"Password\" is spelled with a lower case..</p>\n"}, {"comments": [{"owner": {"reputation": 894, "user_id": 2467270, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/6e17d7890dc4410cd04ca6bb49d282f2?s=128&d=identicon&r=PG&f=1", "display_name": "secondubly", "link": "https://stackoverflow.com/users/2467270/secondubly"}, "edited": false, "score": 0, "creation_date": 1511999645, "post_id": 47563597, "comment_id": 82085531, "body": "That did it! Thanks a bunch!"}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1512033922, "post_id": 47563597, "comment_id": 82097061, "body": "&quot;So unfortunatly you can&#39;t use a data class for that way.&quot; This doesn&#39;t follow, a data class can have a 0-parameter constructor."}], "tags": [], "owner": {"reputation": 1484, "user_id": 9015942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd9a76c3fcb8e3eb6514d68462067902?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian K", "link": "https://stackoverflow.com/users/9015942/adrian-k"}, "is_accepted": true, "score": 1, "last_activity_date": 1511999204, "last_edit_date": 1511999204, "creation_date": 1511998343, "answer_id": 47563597, "question_id": 47563197, "link": "https://stackoverflow.com/questions/47563197/class-is-missing-a-constructor-with-no-arguments-but-ive-provided-a-construct/47563597#47563597", "title": "Class is missing a constructor with no arguments - but I&#39;ve provided a constructor", "body": "<p>Have a look at the Docs <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/database/DataSnapshot.html#getValue(java.lang.Class&lt;T&gt;)\" rel=\"nofollow noreferrer\">Here</a></p>\n\n<p>When using the snap.getValue(Class) getter, the class should have a 0 argument constructor.</p>\n\n<p>So unfortunatly you can't use a data class for that way. Just rewrite your class as</p>\n\n<pre><code>class User(){\n    var firstName: String = \"\"\n    var lastName: String = \"\"\n    var email: String = \"\"\n    var password: String = \"\"\n    var dateJoined: Long = 0L\n}\n</code></pre>\n\n<p>You might want to use lower case variable names, as it is convention.\nAlso, you can avoid Any for dateJoined, as I assume it is a UTC timestamp.</p>\n\n<p>The firebase sdk will then check for each of the database keys if a setter/public field for that name exists and if so, set it. Kotlin generates setters and getters automaticly, so you only have to make sure that the members are named the same as the keys in your database. </p>\n\n<p>Even though one of the developers once said (and this seems to not appear in the docs) that the sdk will try to access multiple nameing styles. This is quite vague, so better make sure to match the database keys.</p>\n"}, {"tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": false, "score": 0, "last_activity_date": 1512033835, "creation_date": 1512033835, "answer_id": 47569881, "question_id": 47563197, "link": "https://stackoverflow.com/questions/47563197/class-is-missing-a-constructor-with-no-arguments-but-ive-provided-a-construct/47569881#47569881", "title": "Class is missing a constructor with no arguments - but I&#39;ve provided a constructor", "body": "<p>If all primary constructor parameters have default values, Kotlin will generate a parameterless constructor as well. In your case <code>DateJoined</code> is missing one. So</p>\n\n<pre><code>data class User(\n        var FirstName: String = \"\",\n        var LastName: String = \"\",\n        var Email: String = \"\",\n        var Password: String = \"\",\n        var DateJoined: ... = ...\n)\n</code></pre>\n\n<p>(I don't know which types are allowed for fields in FireBase, but <code>Any</code> probably isn't one and if it is it can't be efficient.)</p>\n"}], "owner": {"reputation": 894, "user_id": 2467270, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/6e17d7890dc4410cd04ca6bb49d282f2?s=128&d=identicon&r=PG&f=1", "display_name": "secondubly", "link": "https://stackoverflow.com/users/2467270/secondubly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 807, "favorite_count": 0, "accepted_answer_id": 47563597, "answer_count": 3, "score": 0, "last_activity_date": 1521634051, "creation_date": 1511995934, "last_edit_date": 1521634051, "question_id": 47563197, "link": "https://stackoverflow.com/questions/47563197/class-is-missing-a-constructor-with-no-arguments-but-ive-provided-a-construct", "title": "Class is missing a constructor with no arguments - but I&#39;ve provided a constructor", "body": "<p>I am trying to retrieve the user's info after they log in from Firebase. I have the sneaking suspicion that this error isn't actually my problem - and has to deal with the fact that I'm using <code>ServerValue.Timestamp</code> to store the date/time for a user when they've registered (as I'm trying to pull dateJoined back out, and my class has no idea what to do with it).  My database looks something like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/FszF6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FszF6.png\" alt=\"enter image description here\"></a></p>\n\n<p>And when logging in, this is the code I use to grab the user's information</p>\n\n<pre><code>//grab user's name from firebase\n//drill down to specific user\nval usersRef = FirebaseDatabase.getInstance().getReference(\"Users\")\nval loggedInUserRef = usersRef.child(user.uid) //specific to the logged in user\nval dataRef = loggedInUserRef.child(\"UserInfo\") //get logged in user info\n//attach listener\ndataRef.addListenerForSingleValueEvent(object : ValueEventListener {\n    override fun onDataChange(dataSnapshot: DataSnapshot) {\n        // Get Post object and use the values to update the UI\n        val user_data = dataSnapshot.getValue(User::class.java)\n        Log.w(TAG, dataSnapshot.value.toString())\n\n        //add relevant data to shared preferences\n        prefs.userName = \"$user_data.FirstName $user_data.LastName\"\n    }\n\n    override fun onCancelled(databaseError: DatabaseError) {}\n})\n</code></pre>\n\n<p>And I have my User class in a separate file here:</p>\n\n<pre><code>package androidproject.project_rc\n\n    data class User(\n            var FirstName: String = \"\",\n            var LastName: String = \"\",\n            var Email: String = \"\",\n            var Password: String = \"\",\n            var DateJoined: Any\n    )\n</code></pre>\n\n<p>Around this line: <code>val user_data = dataSnapshot.getValue(User::class.java)</code> is where the error gets thrown - what gives?</p>\n"}, {"tags": ["orm", "kotlin", "mybatis"], "owner": {"reputation": 389, "user_id": 2061329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abf30799e22b0a572f10c1b280d75fb?s=128&d=identicon&r=PG", "display_name": "Sourabh", "link": "https://stackoverflow.com/users/2061329/sourabh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 667, "favorite_count": 2, "answer_count": 0, "score": 2, "last_activity_date": 1511994634, "creation_date": 1511994634, "question_id": 47562935, "link": "https://stackoverflow.com/questions/47562935/mybatis-with-immutable-data-classes-in-kotlin", "title": "MyBatis with immutable data classes in Kotlin", "body": "<p>Kotlin has <a href=\"https://kotlinlang.org/docs/reference/compiler-plugins.html#no-arg-compiler-plugin\" rel=\"nofollow noreferrer\">this noarg plugin</a> to generate a synthetic noarg constructor for classes without one to help JPA (and frameworks like mybatis, hibernate) to instantiate a new object. Ex:</p>\n\n<pre><code>data class User(val id: Int, val name: String)\n</code></pre>\n\n<p>Given these properties are declared as val, i.e. immutable, how do these frameworks go about creating a fully baked object with all the values set. The kotlin-noarg plugin is just helping in instantiating a new instance, but the properties (id and name) are still immutable and hence shouldn't be allowed to change once the object is created.</p>\n\n<p>To be clear, things work perfectly fine after adding the noarg plugin. The question is how, given that the properties are immutable.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/32038177/kotlin-with-jpa-default-constructor-hell\">This SO question</a> too talks about this solution, but not the how part.</p>\n"}, {"tags": ["java", "android", "onclick", "kotlin", "onclicklistener"], "answers": [{"tags": [], "owner": {"reputation": 1484, "user_id": 9015942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd9a76c3fcb8e3eb6514d68462067902?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian K", "link": "https://stackoverflow.com/users/9015942/adrian-k"}, "is_accepted": true, "score": 2, "last_activity_date": 1511996515, "last_edit_date": 1511996515, "creation_date": 1511995676, "answer_id": 47563145, "question_id": 47562451, "link": "https://stackoverflow.com/questions/47562451/translate-from-java-to-kotlin-onclicklistener/47563145#47563145", "title": "Translate from Java to Kotlin OnClickListener", "body": "<p>When I check in android studio, there seems to be no interface Button.OnClickListener, just change it to View.OnClickListener and you should be good to go.</p>\n\n<p>The Kotlin style would be to use a lambda. For example :</p>\n\n<pre><code>btn.setOnClickListener { v -&gt; doSomething() }\n</code></pre>\n\n<p>To pass this as an argument, just store it as </p>\n\n<p><code>val listener={v:View -&gt; doSomething()}</code></p>\n\n<p>or</p>\n\n<p><code>val listener:((View) -&gt; Unit)={v -&gt; doSomething()}</code></p>\n\n<p>To pass it to a function, the parameters should look like this:</p>\n\n<pre><code>fun foo(listener:((View) -&gt; Unit)){\n    btn.setOnClickListener(listener)\n}\n\nval l={ v:View -&gt; Log.d(\"View\", \"click\")}\n\nfoo(l)\n</code></pre>\n"}], "owner": {"reputation": 167, "user_id": 3570546, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/100000111182089/picture?type=large", "display_name": "Gustavo Sooeiro", "link": "https://stackoverflow.com/users/3570546/gustavo-sooeiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 766, "favorite_count": 0, "accepted_answer_id": 47563145, "answer_count": 1, "score": 1, "last_activity_date": 1511996515, "creation_date": 1511992274, "question_id": 47562451, "link": "https://stackoverflow.com/questions/47562451/translate-from-java-to-kotlin-onclicklistener", "title": "Translate from Java to Kotlin OnClickListener", "body": "<p>I am having trouble on the ways this code could be translated.\nSo I have a few code in JAVA, as follows:</p>\n\n<p>An OnClickListener set for a button:</p>\n\n<pre><code>Button.OnClickListener mTakePicSOnClickListener = \n    new Button.OnClickListener() {\n    @Override\n    public void onClick(View v) {\n        dispatchTakePictureIntent(ACTION_TAKE_PHOTO_S);\n    }\n};\n</code></pre>\n\n<p>Then I have the button itself, and a function to apply that OnClickListener to that button:</p>\n\n<pre><code>Button picSBtn = (Button) findViewById(R.id.btnIntendS);\nsetBtnListenerOrDisable( \n            picSBtn, \n            mTakePicSOnClickListener,\n            MediaStore.ACTION_IMAGE_CAPTURE\n    );\n</code></pre>\n\n<p>Then I have this function:</p>\n\n<pre><code>private void setBtnListenerOrDisable( \n        Button btn, \n        Button.OnClickListener onClickListener,\n        String intentName\n) {\n    if (isIntentAvailable(this, intentName)) {\n        btn.setOnClickListener(onClickListener);            \n    } else {\n        btn.setText( \n            getText(R.string.cannot).toString() + \" \" + btn.getText());\n        btn.setClickable(false);\n    }\n}\n</code></pre>\n\n<p>So I asked to Android Studio to translate the code to kotlin.</p>\n\n<p>It has just some minor changes to make, but in this case it does not work. It seems that there is a big difference on the approach to that.</p>\n\n<p>So in Kotlin the same portions of code are as this:</p>\n\n<pre><code>internal var mTakePicSOnClickListener: Button.OnClickListener = object : Button.OnClickListener {\n    override fun onClick(v: View) {\n        dispatchTakePictureIntent(ACTION_TAKE_PHOTO_S)\n    }\n}\n</code></pre>\n\n<p>After change a little bit of code I have:</p>\n\n<pre><code>val picSBtn = btnIntendS as Button\n    setBtnListenerOrDisable(\n            picSBtn,\n            mTakePicSOnClickListener,\n            MediaStore.ACTION_IMAGE_CAPTURE\n    )\n</code></pre>\n\n<p>Then the function:</p>\n\n<pre><code>private fun setBtnListenerOrDisable(\n        btn: Button,\n        onClickListener: View.OnClickListener,\n        intentName: String\n) {\n    if (isIntentAvailable(this, intentName)) {\n        btn.setOnClickListener(onClickListener)\n    } else {\n        btn.text = getText(R.string.cannot).toString() + \" \" + btn.text\n        btn.isClickable = false\n    }\n}\n</code></pre>\n\n<p>The error AndroidStudio is pointing is at the creation of the \"generic\" OnClickListener:</p>\n\n<pre><code>internal var mTakePicSOnClickListener: Button.OnClickListener\n</code></pre>\n\n<p>I don't know to create this in Kotlin and the translator gave me that.</p>\n\n<p>Does anyone knows if a should just translate that, or take another approach?</p>\n\n<p>Thanks a lot!</p>\n"}, {"tags": ["kotlin", "operator-overloading", "coroutine", "kotlinx.coroutines"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1511988918, "post_id": 47561627, "comment_id": 82080995, "body": "It&#39;s explained in the same doc: <a href=\"https://github.com/Kotlin/kotlinx.coroutines/blob/master/coroutines-guide.md#combining-contexts\" rel=\"nofollow noreferrer\">github.com/Kotlin/kotlinx.coroutines/blob/master/&hellip;</a>"}, {"owner": {"reputation": 2805, "user_id": 7117454, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oaWD5.png?s=128&g=1", "display_name": "Raymond Arteaga", "link": "https://stackoverflow.com/users/7117454/raymond-arteaga"}, "edited": false, "score": 0, "creation_date": 1528321475, "post_id": 47561627, "comment_id": 88467828, "body": "It seems &quot;+&quot; operator symbolically adds one &quot;nesting level&quot; in the list of current coroutine contexts. It makes possible the later &quot;join&quot; to nested coroutines."}], "answers": [{"comments": [{"owner": {"reputation": 20308, "user_id": 1051598, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f9c354e780ce562daea0e21b99bfdc0d?s=128&d=identicon&r=PG", "display_name": "Roman  Elizarov", "link": "https://stackoverflow.com/users/1051598/roman-elizarov"}, "edited": false, "score": 3, "creation_date": 1512026740, "post_id": 47562185, "comment_id": 82093390, "body": "It is worth noting here, that you can always navigate to the corresponding method to see its documentation by Ctrl+Click (Cmd+Click on Mac) on <code>+</code> symbol in your code in IDEA."}, {"owner": {"reputation": 160, "user_id": 5249920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a21d124f7231dcd46d6b2f5845a8bbc?s=128&d=identicon&r=PG&f=1", "display_name": "Yt100", "link": "https://stackoverflow.com/users/5249920/yt100"}, "edited": false, "score": 0, "creation_date": 1574824078, "post_id": 47562185, "comment_id": 104363907, "body": "<code>launch(coroutineContext + job) {}</code> is the same as <code>launch(coroutineContext.plus(job) {}</code>, which is the short form."}], "tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": true, "score": 5, "last_activity_date": 1511991191, "creation_date": 1511991191, "answer_id": 47562185, "question_id": 47561627, "link": "https://stackoverflow.com/questions/47561627/in-kotlin-coroutines/47562185#47562185", "title": "&quot;+&quot; in Kotlin Coroutines?", "body": "<p>It\u2019s an example of <a href=\"https://kotlinlang.org/docs/reference/operator-overloading.html\" rel=\"noreferrer\">operator overloading</a>.\nThe following shows the documentation of method <code>CoroutineContext::plus</code>:</p>\n\n<pre><code>open operator fun plus(context: CoroutineContext): CoroutineContext\n</code></pre>\n\n<blockquote>\n  <p>Returns a context containing elements from this context and elements from other context. The elements from this context with the same key as in the other one are dropped.</p>\n</blockquote>\n\n<p>It\u2019s basically a merge of two contexts.</p>\n"}], "owner": {"reputation": 1441, "user_id": 3239558, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/100002152175824/picture?type=large", "display_name": "user3239558", "link": "https://stackoverflow.com/users/3239558/user3239558"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 713, "favorite_count": 2, "accepted_answer_id": 47562185, "answer_count": 1, "score": 5, "last_activity_date": 1512024515, "creation_date": 1511988796, "last_edit_date": 1512024515, "question_id": 47561627, "link": "https://stackoverflow.com/questions/47561627/in-kotlin-coroutines", "title": "&quot;+&quot; in Kotlin Coroutines?", "body": "<p>This is example code for a <a href=\"https://github.com/Kotlin/kotlinx.coroutines/blob/master/coroutines-guide.md#cancellation-via-explicit-job\" rel=\"nofollow noreferrer\">Cancellation via explicit job</a> for Kotlin Coroutines:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) = runBlocking&lt;Unit&gt; {\n    val job = Job() // create a job object to manage our lifecycle\n\n    // now launch ten coroutines for a demo, each working for a different time\n    val coroutines = List(10) { i -&gt;\n        // they are all children of our job object\n        launch(coroutineContext + job) { // we use the context of main runBlocking thread, but with our own job object\n            delay((i + 1) * 200L) // variable delay 200ms, 400ms, ... etc\n            println(\"Coroutine $i is done\")\n        }\n    }\n    println(\"Launched ${coroutines.size} coroutines\")\n    delay(500L) // delay for half a second\n    println(\"Cancelling the job!\")\n    job.cancelAndJoin() // cancel all our coroutines and wait for all of them to complete\n}\n</code></pre>\n\n<p>I am confused about <code>+</code> in the expression <code>coroutineContext + job</code>?</p>\n\n<p>What it is doing? Is it operator overwriting?</p>\n"}, {"tags": ["spring", "jpa", "collections", "annotations", "kotlin"], "comments": [{"owner": {"reputation": 2256, "user_id": 4906586, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/wSTXo.jpg?s=128&g=1", "display_name": "Al-un", "link": "https://stackoverflow.com/users/4906586/al-un"}, "edited": false, "score": 0, "creation_date": 1511988996, "post_id": 47561547, "comment_id": 82081034, "body": "As far as I understand, a JPA entity design has to be able to be converted to an <a href=\"https://www.smartdraw.com/entity-relationship-diagram/\" rel=\"nofollow noreferrer\">ERD</a>. The <code>Map&lt;K, Collection&lt;V&gt;&gt;</code> object is hardly achievable in an ERD. How did you design you data in your database? You might need to create an <code>AssetRoles</code> entity and have a <code>@OneToMany Collection&lt;AssetRoles&gt;</code> in your <code>User</code> entity. Unrelated to JPA but where the syntax <code>var xxx: </code> comes from?"}, {"owner": {"reputation": 53, "user_id": 1572928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9167b9dfea0cb315db2a25aee153d64?s=128&d=identicon&r=PG", "display_name": "pedroh", "link": "https://stackoverflow.com/users/1572928/pedroh"}, "reply_to_user": {"reputation": 2256, "user_id": 4906586, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/wSTXo.jpg?s=128&g=1", "display_name": "Al-un", "link": "https://stackoverflow.com/users/4906586/al-un"}, "edited": false, "score": 0, "creation_date": 1511989567, "post_id": 47561547, "comment_id": 82081326, "body": "Ups it&#39;s kotlin, I&#39;m updating the tags. I&#39;m open to the database design (it&#39;s done by annotations) but what makes sense to me was a user_role_asset table with user_id, role_id and asset_id. I was trying to use something like you said Collection&lt;AssetRole&gt; but I&#39;m struggling with the annotation. I can&#39;t seem to get it working."}, {"owner": {"reputation": 196, "user_id": 7528137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cf548f4ea6b3a06f6d959790dc43825?s=128&d=identicon&r=PG&f=1", "display_name": "Ursache", "link": "https://stackoverflow.com/users/7528137/ursache"}, "edited": false, "score": 0, "creation_date": 1511989779, "post_id": 47561547, "comment_id": 82081444, "body": "I would use OneToMany and ManyToOne annotations. 1 Asset to many Roles and 1 User to Many Assets."}, {"owner": {"reputation": 53, "user_id": 1572928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9167b9dfea0cb315db2a25aee153d64?s=128&d=identicon&r=PG", "display_name": "pedroh", "link": "https://stackoverflow.com/users/1572928/pedroh"}, "reply_to_user": {"reputation": 196, "user_id": 7528137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cf548f4ea6b3a06f6d959790dc43825?s=128&d=identicon&r=PG&f=1", "display_name": "Ursache", "link": "https://stackoverflow.com/users/7528137/ursache"}, "edited": false, "score": 0, "creation_date": 1511990756, "post_id": 47561547, "comment_id": 82081932, "body": "@Ursache can you provide some sample please?"}], "owner": {"reputation": 53, "user_id": 1572928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9167b9dfea0cb315db2a25aee153d64?s=128&d=identicon&r=PG", "display_name": "pedroh", "link": "https://stackoverflow.com/users/1572928/pedroh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 327, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1511989774, "creation_date": 1511988463, "last_edit_date": 1511989774, "question_id": 47561547, "link": "https://stackoverflow.com/questions/47561547/mapping-nested-collections-with-hibernate-jpa-annotations-mapkey-setvalues", "title": "Mapping nested collections with hibernate JPA annotations? Map&lt;Key,Set&lt;Values&gt;&gt;", "body": "<p>I'm not sure how to annotate the bellow classes correctly. What I'm trying to do is to have on the <strong>User</strong> entity, a list of roles for a mapped <strong>Asset</strong>.</p>\n\n<pre><code>@Entity\nclass Asset{\n    @Id @GeneratedValue(strategy = GenerationType.AUTO)\n    var id: Long = -1\n}\n\n@Entity\nclass Role {\n    @Id @GeneratedValue(strategy = GenerationType.AUTO)\n    var id: Long = -1\n}\n\n@Entity\nclass User{\n    @Id @GeneratedValue(strategy = GenerationType.AUTO)\n    var id: Long = -1\n\n    ???\n    var roles: Map&lt;Asset, Set&lt;Role&gt;&gt; = HashMap()\n}\n</code></pre>\n\n<p>From what I discovered hibernate does not support a map of sets (<a href=\"https://stackoverflow.com/questions/939235/how-do-i-map-a-nested-collection-mapkey-listvalues-with-hibernate-jpa-anno\">link here</a>). So I tried other options as an intermediate class like <a href=\"https://stackoverflow.com/a/941069\">this</a>.</p>\n\n<p>But I'm struggling with the annotations. Can someone please tell what annotations I have to put on the three classes?</p>\n\n<p>If someone knows a better approach instead of the map, to have the user roles by asset, please tell.</p>\n"}, {"tags": ["android", "string", "kotlin", "substring", "string-interpolation"], "comments": [{"owner": {"reputation": 2767, "user_id": 2290950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8iIm5.png?s=128&g=1", "display_name": "Viktor Yakunin", "link": "https://stackoverflow.com/users/2290950/viktor-yakunin"}, "edited": false, "score": 0, "creation_date": 1511987400, "post_id": 47561263, "comment_id": 82080205, "body": "what have you tried to solve the problem?"}, {"owner": {"reputation": 2767, "user_id": 2290950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8iIm5.png?s=128&g=1", "display_name": "Viktor Yakunin", "link": "https://stackoverflow.com/users/2290950/viktor-yakunin"}, "edited": false, "score": 0, "creation_date": 1511987464, "post_id": 47561263, "comment_id": 82080231, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/3481828/how-to-split-a-string-in-java\">How to split a string in Java</a>"}, {"owner": {"reputation": 1368, "user_id": 6406541, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/bxYMU.png?s=128&g=1", "display_name": "Daniel Dramond", "link": "https://stackoverflow.com/users/6406541/daniel-dramond"}, "reply_to_user": {"reputation": 2767, "user_id": 2290950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8iIm5.png?s=128&g=1", "display_name": "Viktor Yakunin", "link": "https://stackoverflow.com/users/2290950/viktor-yakunin"}, "edited": false, "score": 0, "creation_date": 1511987532, "post_id": 47561263, "comment_id": 82080256, "body": "@ViktorYakunin I know substring is most probably the best way to go about it but I&#39;m not really familiar with startIndexes and endIndexes etc."}, {"owner": {"reputation": 1368, "user_id": 6406541, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/bxYMU.png?s=128&g=1", "display_name": "Daniel Dramond", "link": "https://stackoverflow.com/users/6406541/daniel-dramond"}, "reply_to_user": {"reputation": 2767, "user_id": 2290950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8iIm5.png?s=128&g=1", "display_name": "Viktor Yakunin", "link": "https://stackoverflow.com/users/2290950/viktor-yakunin"}, "edited": false, "score": 0, "creation_date": 1511987574, "post_id": 47561263, "comment_id": 82080283, "body": "@ViktorYakunin Would I be able to use Java and Kotlin in the same file?"}, {"owner": {"reputation": 1819, "user_id": 2091315, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d917f52b71a9937ef9db6e0baa97a248?s=128&d=identicon&r=PG", "display_name": "Fantini", "link": "https://stackoverflow.com/users/2091315/fantini"}, "edited": false, "score": 0, "creation_date": 1511987602, "post_id": 47561263, "comment_id": 82080293, "body": "Just search for it in google, first link: <a href=\"http://kotlination.com/kotlin/kotlin-split-string-example\" rel=\"nofollow noreferrer\">kotlination.com/kotlin/kotlin-split-string-example</a>"}, {"owner": {"reputation": 1368, "user_id": 6406541, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/bxYMU.png?s=128&g=1", "display_name": "Daniel Dramond", "link": "https://stackoverflow.com/users/6406541/daniel-dramond"}, "reply_to_user": {"reputation": 1819, "user_id": 2091315, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d917f52b71a9937ef9db6e0baa97a248?s=128&d=identicon&r=PG", "display_name": "Fantini", "link": "https://stackoverflow.com/users/2091315/fantini"}, "edited": false, "score": 0, "creation_date": 1511987647, "post_id": 47561263, "comment_id": 82080323, "body": "@Fantini Straight to the point. Appreciate it"}, {"owner": {"reputation": 2767, "user_id": 2290950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8iIm5.png?s=128&g=1", "display_name": "Viktor Yakunin", "link": "https://stackoverflow.com/users/2290950/viktor-yakunin"}, "edited": false, "score": 0, "creation_date": 1511987792, "post_id": 47561263, "comment_id": 82080400, "body": "it uses the same API, kotlin extends Java, and compiles into java byte code."}], "answers": [{"tags": [], "owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "is_accepted": true, "score": 9, "last_activity_date": 1595500505, "last_edit_date": 1595500505, "creation_date": 1511987842, "answer_id": 47561403, "question_id": 47561263, "link": "https://stackoverflow.com/questions/47561263/kotlin-how-do-i-get-characters-after-in-a-string/47561403#47561403", "title": "Kotlin: How do I get characters after &quot;@&quot; in a string?", "body": "<p><strong>Note</strong>: <a href=\"https://stackoverflow.com/a/47561575/7366707\">Ivan Wooll's answer</a> brings up the point of using <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/substring-after-last.html\" rel=\"nofollow noreferrer\"><code>substringAfterLast</code></a>, which is a very useful utility, though it is important to keep in mind that it <strong>cannot return <code>null</code></strong> and instead defaults to a provided default value (this is the original string, if nothing is specified).</p>\n<p>I personally prefer dealing with <code>null</code> in cases where invalid input is a reasonable concern, rather than e.g. an empty string, because it's a much clearer indication that the delimiter was not found, and this special case can be easily handled by chaining <code>?:</code>, <code>?.</code>, <code>let</code>, etc.</p>\n<p>Here's an example of possibly-unwanted behavior:</p>\n<pre><code>string           | string.substringAfterLast(&quot;@&quot;)\n-------------------------------------------------\n&quot;domain.com&quot;     | &quot;domain.com&quot; !\n&quot;@domain.com&quot;    | &quot;domain.com&quot;\n&quot;foo@domain.com&quot; | &quot;domain.com&quot;\n</code></pre>\n<hr />\n<p>Just for the sake of completeness:</p>\n<pre><code>val string = &quot;hello@world.com&quot;\n\nval index = string.indexOf('@')\n\nval domain: String? = if (index == -1) null else string.substring(index + 1)\n</code></pre>\n<p>This assigns the part after <code>@</code> to <code>domain</code> if it exists, otherwise <code>null</code>.</p>\n<hr />\n<p>For learning, IntelliJ's Java -&gt; Kotlin converter may be of use.</p>\n<p>By default, this shortcut is usually mapped to <kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>Shift</kbd>+<kbd>K</kbd>.</p>\n<p>You could even make this an extension property:</p>\n<pre><code>val String.domain: String?\n    get() {\n        val index = string.indexOf('@')\n        return if (index == -1) null else string.substring(index + 1)\n    }\n</code></pre>\n<p>and then you would be able to do</p>\n<pre><code>println(&quot;hello@world.com&quot;.domain)\n</code></pre>\n<p>You could shorten this code to one line with <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/let.html\" rel=\"nofollow noreferrer\"><code>let</code></a>:</p>\n<pre><code>string.indexOf('@').let { if (it == -1) null else string.substring(it + 1) }\n</code></pre>\n<hr />\n<p>Here's a <a href=\"https://stackoverflow.com/questions/18498036/parse-rfc-2822-email-addresses-in-java\">similar question in Java</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 2785, "user_id": 256245, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/025e9bac298f53bd6515842ca16ca4b1?s=128&d=identicon&r=PG", "display_name": "Fabricio Lemos", "link": "https://stackoverflow.com/users/256245/fabricio-lemos"}, "edited": false, "score": 1, "creation_date": 1511993291, "post_id": 47561575, "comment_id": 82083149, "body": "I like this one better. In this case, you don&#39;t even need the index value."}, {"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 4, "creation_date": 1512025271, "post_id": 47561575, "comment_id": 82092672, "body": "Nice find, though <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/substring-after-last.html\" rel=\"nofollow noreferrer\"><code>substringAfterLast</code></a> doesn&#39;t return a nullable string - the default value is the string itself. Whether this is desired depends on the use."}], "tags": [], "owner": {"reputation": 3271, "user_id": 764624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bcb73d4a76eb0dbb40705de0cee1d23?s=128&d=identicon&r=PG", "display_name": "Ivan Wooll", "link": "https://stackoverflow.com/users/764624/ivan-wooll"}, "is_accepted": false, "score": 38, "last_activity_date": 1511994757, "last_edit_date": 1511994757, "creation_date": 1511988560, "answer_id": 47561575, "question_id": 47561263, "link": "https://stackoverflow.com/questions/47561263/kotlin-how-do-i-get-characters-after-in-a-string/47561575#47561575", "title": "Kotlin: How do I get characters after &quot;@&quot; in a string?", "body": "<p>While there's nothing wrong with the accepted answer the Kotlin standard library is worth exploring as it contains nice little methods like <code>substringAfterLast</code>which would shorten the example to this</p>\n\n<pre><code>val string = \"hello@world.com\"\n\nval domain: String? = string.substringAfterLast(\"@\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17453, "user_id": 5279996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf8327567575d69a46bd8afe8db4466e?s=128&d=identicon&r=PG", "display_name": "Braian Coronel", "link": "https://stackoverflow.com/users/5279996/braian-coronel"}, "is_accepted": false, "score": 0, "last_activity_date": 1564424660, "creation_date": 1564424660, "answer_id": 57259492, "question_id": 47561263, "link": "https://stackoverflow.com/questions/47561263/kotlin-how-do-i-get-characters-after-in-a-string/57259492#57259492", "title": "Kotlin: How do I get characters after &quot;@&quot; in a string?", "body": "<p>The following expression describes the second substring be the delimiter character x</p>\n\n<pre><code>yourText.split('x')[1]\n</code></pre>\n"}], "owner": {"reputation": 1368, "user_id": 6406541, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/bxYMU.png?s=128&g=1", "display_name": "Daniel Dramond", "link": "https://stackoverflow.com/users/6406541/daniel-dramond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17076, "favorite_count": 1, "accepted_answer_id": 47561403, "answer_count": 3, "score": 12, "last_activity_date": 1595500505, "creation_date": 1511987291, "question_id": 47561263, "link": "https://stackoverflow.com/questions/47561263/kotlin-how-do-i-get-characters-after-in-a-string", "title": "Kotlin: How do I get characters after &quot;@&quot; in a string?", "body": "<p>I have a string that is an email. I want to be able to get the domain part of the email no matter what the string/email is. Essentially I'm wanting to get hold of the characters after the @ part of the string. For example, for testing@kotlin.com, I'm after the <strong>kotlin.com</strong> part.</p>\n\n<p>val emailString = \"hello@world.com\"</p>\n"}, {"tags": ["android", "unit-testing", "kotlin", "mockito", "kotlinx.coroutines"], "answers": [{"tags": [], "owner": {"reputation": 137, "user_id": 2179802, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ad497888d51649fc42d38e94f5e2a9f4?s=128&d=identicon&r=PG", "display_name": "Faraaz", "link": "https://stackoverflow.com/users/2179802/faraaz"}, "is_accepted": false, "score": 1, "last_activity_date": 1511989488, "creation_date": 1511989488, "answer_id": 47561773, "question_id": 47560808, "link": "https://stackoverflow.com/questions/47560808/kotlin-coroutines-unit-testing-using-mockito/47561773#47561773", "title": "Kotlin coroutines unit testing using mockito", "body": "<p>It was the mockito version, 2.10 and below does not support suspend functions.  bumping it to latest(2.12) fixed it. </p>\n"}], "owner": {"reputation": 137, "user_id": 2179802, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ad497888d51649fc42d38e94f5e2a9f4?s=128&d=identicon&r=PG", "display_name": "Faraaz", "link": "https://stackoverflow.com/users/2179802/faraaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 812, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1511989488, "creation_date": 1511985630, "last_edit_date": 1511986013, "question_id": 47560808, "link": "https://stackoverflow.com/questions/47560808/kotlin-coroutines-unit-testing-using-mockito", "title": "Kotlin coroutines unit testing using mockito", "body": "<p>i am getting the below when i try to mock and verify on an activity that's calling a suspend function</p>\n\n<p><strong>Error:</strong></p>\n\n<p>Argument(s) are different! Wanted:\nuserManager.getAccountInfo(\n(onCreate_callsGetAccountInformation$1) kotlinx.coroutines.experimental.CoroutineScope.() -> kotlin.Unit\n);\n-> at com.pharmacy.AccountActivityTests$onCreate_callsGetAccountInformation$1.doResume(AccountActivityTests.kt:117)\nActual invocation has different arguments:\nuserManager.getAccountInfo(\n() kotlinx.coroutines.experimental.CoroutineScope.() -> kotlin.Unit\n)\n-> at com.pharmacy.AccountActivity$loadAccountInfoAsync$1$1.doResume(AccountActivity.kt:199)</p>\n\n<p><strong>Code:</strong></p>\n\n<p>I have my unit test case decorated with runBlocking like this:</p>\n\n<pre><code>    @Test \n    fun onCreate_callsGetAccountInformation() = runBlocking&lt;Unit&gt; \n    { whenever(userManager.getAccountInfo()).thenReturn(AccountInformation()) \n      subject = Robolectric.setupActivity(AccountActivity::class.java) \n      verify(userManager).getAccountInfo() \n    }\n</code></pre>\n\n<p>here -> usermanager.getAccountInfo() is a suspend function.</p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 11621, "user_id": 556495, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1a96b42c52adae7773b71378ca52a2fb?s=128&d=identicon&r=PG", "display_name": "Emil", "link": "https://stackoverflow.com/users/556495/emil"}, "edited": false, "score": 0, "creation_date": 1511986866, "post_id": 47560451, "comment_id": 82079982, "body": "If you use another BLE scanning app, like nRF Connect, do the devices show up there?"}, {"owner": {"reputation": 349, "user_id": 7769067, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/e546c59fb85eca735f30f6265e18244f?s=128&d=identicon&r=PG&f=1", "display_name": "dawzaw", "link": "https://stackoverflow.com/users/7769067/dawzaw"}, "reply_to_user": {"reputation": 11621, "user_id": 556495, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1a96b42c52adae7773b71378ca52a2fb?s=128&d=identicon&r=PG", "display_name": "Emil", "link": "https://stackoverflow.com/users/556495/emil"}, "edited": false, "score": 0, "creation_date": 1511988518, "post_id": 47560451, "comment_id": 82080774, "body": "@Emil nRF Connect shows nothing. Dunno why. When I go to bluetooth setting on my phone and scan manually it detects my other two phones(both of them support BLE). And there&#39;s another thing, yesterday I was able to find one of this phone, but today my app doesn&#39;t detect them."}, {"owner": {"reputation": 11621, "user_id": 556495, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1a96b42c52adae7773b71378ca52a2fb?s=128&d=identicon&r=PG", "display_name": "Emil", "link": "https://stackoverflow.com/users/556495/emil"}, "edited": false, "score": 0, "creation_date": 1511990444, "post_id": 47560451, "comment_id": 82081776, "body": "If you are sure there are advertising BLE devices nearby and it doesn&#39;t show up there either, then something is wrong with your phone/OS, either a bug or some setting is misconfigured."}], "answers": [{"tags": [], "owner": {"reputation": 349, "user_id": 7769067, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/e546c59fb85eca735f30f6265e18244f?s=128&d=identicon&r=PG&f=1", "display_name": "dawzaw", "link": "https://stackoverflow.com/users/7769067/dawzaw"}, "is_accepted": false, "score": 0, "last_activity_date": 1512019488, "creation_date": 1512019488, "answer_id": 47566438, "question_id": 47560451, "link": "https://stackoverflow.com/questions/47560451/bluetooth-low-energy-scanner-seems-to-work-properly-but-find-no-devices/47566438#47566438", "title": "Bluetooth Low Energy scanner seems to work properly but find no devices", "body": "<p>It's turned out that phones that do support Bluetooth Low Energy are not visible. When I simulted GATT server on one of then my app found this phone. </p>\n"}], "owner": {"reputation": 349, "user_id": 7769067, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/e546c59fb85eca735f30f6265e18244f?s=128&d=identicon&r=PG&f=1", "display_name": "dawzaw", "link": "https://stackoverflow.com/users/7769067/dawzaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 383, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1512019488, "creation_date": 1511984119, "last_edit_date": 1511985335, "question_id": 47560451, "link": "https://stackoverflow.com/questions/47560451/bluetooth-low-energy-scanner-seems-to-work-properly-but-find-no-devices", "title": "Bluetooth Low Energy scanner seems to work properly but find no devices", "body": "<p>I have a problem with Bluetooth Low Energy. Everything seems to be working fine.</p>\n\n<p>Logger shows this: <code>onClientRegistered() - status=0 clientIf=7 mClientIf=0</code>,which means that the status is success, clientif=6 refers to the client interface. </p>\n\n<p>So the scanner is working properly. The problem is that it cannot find any device.</p>\n\n<p>I have <code>BLUETOOTH, BLUETOOTH_ADMIN, ACCESS_COARSE_LOCATION</code> permissions in the manifest. I check for them when app starts. Everyone who has problem with \"no scan results\" gets the reply about enabling location. I did it and still nothing.</p>\n\n<p><code>onScanResults</code> never succeed.</p>\n\n<p>I'm using android 7.0.0.</p>\n\n<pre><code>class MainActivity : AppCompatActivity(), AnkoLogger {\n\n    lateinit var bleManager: BluetoothManager\n    lateinit var bleAdapter: BluetoothAdapter\n    lateinit var bleScanner: BluetoothLeScanner\n\n    val REQUEST_BLUETOOTH = 0\n    val REQUEST_COARSE_LOCATION = 1\n\n    val ui by lazy { MainUI() }\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        ui.setContentView(this)\n\n        checkLocationPerm()\n\n        bleManager = getSystemService(Context.BLUETOOTH_SERVICE) as BluetoothManager\n        bleAdapter = bleManager.adapter\n        bleScanner = bleAdapter.bluetoothLeScanner\n\n        checkEnableBluetooth()\n\n        ui.scanButton.onClick {\n            startScan()\n        }\n    }\n\n\n    fun checkLocationPerm() {\n        val perm = PermissionChecker.checkSelfPermission(applicationContext, Manifest.permission.ACCESS_COARSE_LOCATION)\n        if (perm == PermissionChecker.PERMISSION_GRANTED) {\n            info(\"Location permission granted\")\n        } else requestEnableLocation()\n    }\n\n    fun requestEnableLocation() = requestPermissions(arrayOf(Manifest.permission.ACCESS_COARSE_LOCATION),\n            REQUEST_COARSE_LOCATION)\n\n    fun checkEnableBluetooth() {\n        if (!bleAdapter.isEnabled) {\n            val enableBtIntent = Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE)\n            startActivityForResult(enableBtIntent, REQUEST_BLUETOOTH)\n            info(\"Requested user to enable bluetooth.\")\n        }\n    }\n\n    fun startScan() {\n        var scanResults = mutableMapOf&lt;String?, BluetoothDevice?&gt;()\n        var bleScanCallback = BleScanCallback(scanResults)\n        bleScanner.startScan(bleScanCallback)\n    }\n\n\n    class BleScanCallback(resultMap: MutableMap&lt;String?, BluetoothDevice?&gt;) : ScanCallback(), AnkoLogger {\n\n        var resultOfScan = resultMap\n\n        override fun onScanResult(callbackType: Int, result: ScanResult?) {\n            addScanResult(result)\n            info(\"I found a ble device ${result?.device?.address}\")\n\n        }\n\n        override fun onBatchScanResults(results: MutableList&lt;ScanResult&gt;?) {\n            info(\"I found a device!\")\n        }\n\n        override fun onScanFailed(errorCode: Int) {\n            info(\"Bluetooth LE scan failed. Error code: $errorCode\")\n        }\n\n        fun addScanResult(scanResult: ScanResult?) {\n            val bleDevice = scanResult?.device\n            val deviceAddress = bleDevice?.address\n            resultOfScan.put(deviceAddress, bleDevice)\n        }\n    }\n}\n</code></pre>\n\n<p>I just want to log the addresses of bluetooth devices. I check BleScanCallback object and it is fine. I have no idea what's wrong with my code. </p>\n"}, {"tags": ["maven", "jsp", "tomcat", "kotlin"], "comments": [{"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1511983754, "post_id": 47559745, "comment_id": 82078379, "body": "I&#39;m not quite familiar but why is your class in <code>resources</code>? I don&#39;t think that&#39;s the right location"}, {"owner": {"reputation": 23, "user_id": 7185177, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-f8Mgsakhhaw/AAAAAAAAAAI/AAAAAAAACNc/ajNbjkONOP4/photo.jpg?sz=128", "display_name": "Erezbiox1", "link": "https://stackoverflow.com/users/7185177/erezbiox1"}, "reply_to_user": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1511983949, "post_id": 47559745, "comment_id": 82078499, "body": "@1blustone because of maven I&#39;m pretty sure."}, {"owner": {"reputation": 23, "user_id": 7185177, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-f8Mgsakhhaw/AAAAAAAAAAI/AAAAAAAACNc/ajNbjkONOP4/photo.jpg?sz=128", "display_name": "Erezbiox1", "link": "https://stackoverflow.com/users/7185177/erezbiox1"}, "reply_to_user": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1511985289, "post_id": 47559745, "comment_id": 82079178, "body": "@1blustone when I created the project, the resource folder was exactly where the src folder was in my previous jsp projects, and the project had no src folders, so I&#39;ve just assumed it&#39;s there.  <a href=\"https://i.imgur.com/PS9hOpF.png\" rel=\"nofollow noreferrer\">this is the project&#39;s structure now</a>, and it works!, post this as an answer, thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "is_accepted": true, "score": 0, "last_activity_date": 1511986699, "creation_date": 1511986699, "answer_id": 47561097, "question_id": 47559745, "link": "https://stackoverflow.com/questions/47559745/writing-jsp-in-kotlin-with-maven-error-instantiating-servlet-class-classnotfo/47561097#47561097", "title": "Writing JSP in kotlin with maven - Error instantiating servlet class, ClassNotFoundException", "body": "<p>The classes in your project are in the <code>resources</code> folder.</p>\n\n<p>This is not where they should be - this folder is used only for resources.</p>\n\n<p>Create a new folder, mark it as source root, and use that folder instead.</p>\n"}], "owner": {"reputation": 23, "user_id": 7185177, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-f8Mgsakhhaw/AAAAAAAAAAI/AAAAAAAACNc/ajNbjkONOP4/photo.jpg?sz=128", "display_name": "Erezbiox1", "link": "https://stackoverflow.com/users/7185177/erezbiox1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 1, "accepted_answer_id": 47561097, "answer_count": 1, "score": 0, "last_activity_date": 1511986699, "creation_date": 1511981459, "question_id": 47559745, "link": "https://stackoverflow.com/questions/47559745/writing-jsp-in-kotlin-with-maven-error-instantiating-servlet-class-classnotfo", "title": "Writing JSP in kotlin with maven - Error instantiating servlet class, ClassNotFoundException", "body": "<p>so I've been trying out JSP for some time now, and I want to use it with kotlin and maven, I'm having some problems,</p>\n\n<p>It throws ClassNotFoundException, here is my files:</p>\n\n<ul>\n<li><p><a href=\"https://pastebin.com/XkzdhLj0\" rel=\"nofollow noreferrer\">web.xml</a></p>\n\n<pre><code>&lt;web-app&gt;\n  &lt;display-name&gt;Archetype Created Web Application&lt;/display-name&gt;\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;Servlet&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;com.erezbiox1.Servlet&lt;/servlet-class&gt;\n    &lt;/servlet&gt;\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;Servlet&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/test&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n&lt;/web-app&gt;\n</code></pre></li>\n<li><p><a href=\"https://pastebin.com/EVKHfcGc\" rel=\"nofollow noreferrer\">pom.xml</a></p>\n\n<pre><code>&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\"&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;com.erezbiox1&lt;/groupId&gt;\n  &lt;artifactId&gt;KotlinJsp&lt;/artifactId&gt;\n  &lt;packaging&gt;war&lt;/packaging&gt;\n  &lt;version&gt;1.0&lt;/version&gt;\n  &lt;name&gt;KotlinJsp&lt;/name&gt;\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;3.8.1&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n      &lt;artifactId&gt;kotlin-stdlib&lt;/artifactId&gt;\n      &lt;version&gt;1.2.0&lt;/version&gt;\n    &lt;/dependency&gt;\n      &lt;dependency&gt;\n          &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n          &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\n          &lt;version&gt;2.5&lt;/version&gt;\n      &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n  &lt;build&gt;\n    &lt;finalName&gt;KotlinJsp&lt;/finalName&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n        &lt;artifactId&gt;kotlin-maven-plugin&lt;/artifactId&gt;\n        &lt;version&gt;1.2.0&lt;/version&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;id&gt;compile&lt;/id&gt;\n            &lt;phase&gt;compile&lt;/phase&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;compile&lt;/goal&gt;\n            &lt;/goals&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre></li>\n<li><p><a href=\"https://pastebin.com/LB0aJ7cd\" rel=\"nofollow noreferrer\">Servlet.kt</a></p>\n\n<pre><code>// Tried with, and without this:\n@file:JvmName(\"Servlet\")\n\npackage com.erezbiox1\n\nimport javax.servlet.http.HttpServlet\nimport javax.servlet.http.HttpServletRequest\nimport javax.servlet.http.HttpServletResponse\n\nclass Servlet : HttpServlet(){\n\noverride fun doGet(req: HttpServletRequest, resp: HttpServletResponse) {\n    resp.writer.println(\"&lt;h1&gt;IT WORKS!&lt;/h1&gt;\")\n    resp.writer.flush()\n}\n\n}\n</code></pre></li>\n</ul>\n\n<p>and here is the project structure:\n<a href=\"https://i.stack.imgur.com/CTtcp.png\" rel=\"nofollow noreferrer\">Project Structure</a></p>\n\n<p>here is the <a href=\"https://pastebin.com/B3tsWzy3\" rel=\"nofollow noreferrer\">error</a>:</p>\n\n<pre><code>// Exception:\n\njavax.servlet.ServletException: Error instantiating servlet class com.erezbiox1.Servlet\n    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:503)\n    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)\n    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:950)\n    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:421)\n    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1070)\n    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:611)\n    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:314)\n    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    java.lang.Thread.run(Thread.java:745)\n\n// Root Cause:\n\njava.lang.ClassNotFoundException: com.erezbiox1.Servlet\n    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1720)\n    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1571)\n    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:503)\n    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)\n    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:950)\n    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:421)\n    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1070)\n    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:611)\n    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:314)\n    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    java.lang.Thread.run(Thread.java:745)\n</code></pre>\n\n<p>Is it even possible? both jsp, kotlin and maven?\nThanks!</p>\n"}, {"tags": ["android", "android-layout", "kotlin", "android-recyclerview"], "comments": [{"owner": {"reputation": 2207, "user_id": 6251577, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a134274d88afcaf5d78bc94fbfdb655c?s=128&d=identicon&r=PG&f=1", "display_name": "Kuva", "link": "https://stackoverflow.com/users/6251577/kuva"}, "edited": false, "score": 0, "creation_date": 1511972872, "post_id": 47557047, "comment_id": 82072297, "body": "Give your recyclerView items layouts"}, {"owner": {"reputation": 2207, "user_id": 6251577, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a134274d88afcaf5d78bc94fbfdb655c?s=128&d=identicon&r=PG&f=1", "display_name": "Kuva", "link": "https://stackoverflow.com/users/6251577/kuva"}, "edited": false, "score": 0, "creation_date": 1511972973, "post_id": 47557047, "comment_id": 82072367, "body": "And quick suggestion - don&#39;t use ConstrainLayout. There are still bugs in it."}, {"owner": {"reputation": 10656, "user_id": 2399024, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JjSNR.jpg?s=128&g=1", "display_name": "donfuxx", "link": "https://stackoverflow.com/users/2399024/donfuxx"}, "edited": false, "score": 0, "creation_date": 1511973828, "post_id": 47557047, "comment_id": 82072859, "body": "how do your item layouts <code>recived_chat_box_item</code> and <code>send_chat_box_item</code> look like? And is your recyclerview <code>setHasFixedSize</code> set to true?"}, {"owner": {"reputation": 1268, "user_id": 4400700, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/78909ce06fe62e919899484f8955d361?s=128&d=identicon&r=PG&f=1", "display_name": "Ch4t4r", "link": "https://stackoverflow.com/users/4400700/ch4t4r"}, "edited": false, "score": 0, "creation_date": 1511974840, "post_id": 47557047, "comment_id": 82073533, "body": "The height of <code>recived_chat_box_item</code> and <code>send_chat_box_item</code> is propably set to <code>match_parent</code> which it shouldn&#39;t."}, {"owner": {"reputation": 275, "user_id": 5606148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YBTSp.jpg?s=128&g=1", "display_name": "Andrew Hossam", "link": "https://stackoverflow.com/users/5606148/andrew-hossam"}, "reply_to_user": {"reputation": 2207, "user_id": 6251577, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a134274d88afcaf5d78bc94fbfdb655c?s=128&d=identicon&r=PG&f=1", "display_name": "Kuva", "link": "https://stackoverflow.com/users/6251577/kuva"}, "edited": false, "score": 0, "creation_date": 1512029782, "post_id": 47557047, "comment_id": 82094904, "body": "@Kuva I didn&#39;t understand your first comment but the layout items is already added and question is edited  I used LinearLayout everywhere and the same issue happened"}, {"owner": {"reputation": 275, "user_id": 5606148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YBTSp.jpg?s=128&g=1", "display_name": "Andrew Hossam", "link": "https://stackoverflow.com/users/5606148/andrew-hossam"}, "reply_to_user": {"reputation": 10656, "user_id": 2399024, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JjSNR.jpg?s=128&g=1", "display_name": "donfuxx", "link": "https://stackoverflow.com/users/2399024/donfuxx"}, "edited": false, "score": 0, "creation_date": 1512030449, "post_id": 47557047, "comment_id": 82095255, "body": "@donfuxx I set setHasFixedSize to true and the same result."}, {"owner": {"reputation": 275, "user_id": 5606148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YBTSp.jpg?s=128&g=1", "display_name": "Andrew Hossam", "link": "https://stackoverflow.com/users/5606148/andrew-hossam"}, "reply_to_user": {"reputation": 1268, "user_id": 4400700, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/78909ce06fe62e919899484f8955d361?s=128&d=identicon&r=PG&f=1", "display_name": "Ch4t4r", "link": "https://stackoverflow.com/users/4400700/ch4t4r"}, "edited": false, "score": 0, "creation_date": 1512030511, "post_id": 47557047, "comment_id": 82095282, "body": "@Ch4t4r Despite that will effect the design, I did as you say but it still deform"}, {"owner": {"reputation": 10656, "user_id": 2399024, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JjSNR.jpg?s=128&g=1", "display_name": "donfuxx", "link": "https://stackoverflow.com/users/2399024/donfuxx"}, "edited": false, "score": 0, "creation_date": 1512036555, "post_id": 47557047, "comment_id": 82098733, "body": "do you really need to set <code>android:layout_height=&quot;0dp&quot;</code> for the recylerview? Have you already tried setting <code>match_parent</code> or <code>wrap_content</code>?"}, {"owner": {"reputation": 505, "user_id": 6170625, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-OVkMtjC5wgQ/AAAAAAAAAAI/AAAAAAAAAJo/ZMsQ-loF1Bw/photo.jpg?sz=128", "display_name": "Pranav Ashok", "link": "https://stackoverflow.com/users/6170625/pranav-ashok"}, "edited": false, "score": 0, "creation_date": 1512036572, "post_id": 47557047, "comment_id": 82098750, "body": "on manifests file add windowSoftInputMode as adjustResize"}, {"owner": {"reputation": 275, "user_id": 5606148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YBTSp.jpg?s=128&g=1", "display_name": "Andrew Hossam", "link": "https://stackoverflow.com/users/5606148/andrew-hossam"}, "reply_to_user": {"reputation": 505, "user_id": 6170625, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-OVkMtjC5wgQ/AAAAAAAAAAI/AAAAAAAAAJo/ZMsQ-loF1Bw/photo.jpg?sz=128", "display_name": "Pranav Ashok", "link": "https://stackoverflow.com/users/6170625/pranav-ashok"}, "edited": false, "score": 0, "creation_date": 1512036792, "post_id": 47557047, "comment_id": 82098893, "body": "@PranavAshok Doesn&#39;t work"}, {"owner": {"reputation": 275, "user_id": 5606148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YBTSp.jpg?s=128&g=1", "display_name": "Andrew Hossam", "link": "https://stackoverflow.com/users/5606148/andrew-hossam"}, "reply_to_user": {"reputation": 10656, "user_id": 2399024, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JjSNR.jpg?s=128&g=1", "display_name": "donfuxx", "link": "https://stackoverflow.com/users/2399024/donfuxx"}, "edited": false, "score": 0, "creation_date": 1512036885, "post_id": 47557047, "comment_id": 82098950, "body": "@donfuxx I tried this also when I convert the whole view to LinearView"}], "owner": {"reputation": 275, "user_id": 5606148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YBTSp.jpg?s=128&g=1", "display_name": "Andrew Hossam", "link": "https://stackoverflow.com/users/5606148/andrew-hossam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 725, "favorite_count": 2, "answer_count": 0, "score": 5, "last_activity_date": 1512028977, "creation_date": 1511971556, "last_edit_date": 1512028977, "question_id": 47557047, "link": "https://stackoverflow.com/questions/47557047/recyclerview-cells-deform-when-keyboard-opened", "title": "RecyclerView cells deform when keyboard opened", "body": "<p>I am implementing a chat inside my app, and the recycler view behave in wired way when the keyboard opened, the cards expands by itself</p>\n\n<p>I tried to disable the recycling ,change the way I build the layout but nothing works,I need to understand why this happened and how to fix it.</p>\n\n<p>The XML layout for the view</p>\n\n<pre><code>&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\nxmlns:app=\"http://schemas.android.com/apk/res-auto\"\nxmlns:tools=\"http://schemas.android.com/tools\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"match_parent\"\nandroid:background=\"@android:color/white\"\nandroid:orientation=\"vertical\"\ntools:context=\"io.thed.cuju.ChatDetailsFragment\"&gt;\n\n&lt;LinearLayout\n    android:id=\"@+id/linearLayout22\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:gravity=\"center\"\n    android:padding=\"8dp\"\n    app:layout_constraintEnd_toEndOf=\"parent\"\n    app:layout_constraintStart_toStartOf=\"parent\"\n    app:layout_constraintTop_toTopOf=\"parent\"&gt;\n\n    &lt;ImageView\n        android:id=\"@+id/chat_image\"\n        android:layout_width=\"32dp\"\n        android:layout_height=\"32dp\"\n        tools:src=\"@drawable/avatar\" /&gt;\n\n    &lt;TextView\n        android:id=\"@+id/name_search\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginBottom=\"8dp\"\n        android:layout_marginLeft=\"8dp\"\n        android:layout_marginStart=\"8dp\"\n        android:layout_marginTop=\"8dp\"\n        android:textSize=\"16sp\"\n        tools:text=\"Bradley Anderson\" /&gt;\n&lt;/LinearLayout&gt;\n\n&lt;include\n    android:id=\"@+id/say_hi\"\n    layout=\"@layout/say_hi_chat\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:visibility=\"gone\" /&gt;\n\n&lt;android.support.constraint.ConstraintLayout\n    android:id=\"@+id/chat_list_and_input_section\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"vertical\"&gt;\n\n    &lt;android.support.v7.widget.RecyclerView\n        android:id=\"@+id/chat_details_recyclerView\"\n        android:layout_width=\"0dp\"\n        android:layout_height=\"0dp\"\n        android:layout_weight=\"1\"\n        app:layoutManager=\"android.support.v7.widget.LinearLayoutManager\"\n        app:layout_constraintBottom_toTopOf=\"@+id/linearLayout5\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toBottomOf=\"@+id/space2\"\n        app:reverseLayout=\"true\"\n        tools:listitem=\"@layout/recived_chat_box_item\" /&gt;\n\n    &lt;TextView\n        android:id=\"@+id/space2\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"1dp\"\n        android:background=\"@color/Gray\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\" /&gt;\n\n    &lt;ProgressBar\n        android:id=\"@+id/progressBar12\"\n        style=\"?android:attr/progressBarStyle\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginBottom=\"8dp\"\n        android:layout_marginEnd=\"8dp\"\n        android:layout_marginStart=\"8dp\"\n        android:layout_marginTop=\"8dp\"\n        android:visibility=\"invisible\"\n        app:layout_constraintBottom_toTopOf=\"@+id/linearLayout5\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\" /&gt;\n\n    &lt;LinearLayout\n        android:id=\"@+id/linearLayout5\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:gravity=\"center_vertical\"\n        android:orientation=\"horizontal\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"&gt;\n\n        &lt;EditText\n            android:id=\"@+id/to_be_sent_chat\"\n            style=\"@style/cujuEditText\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginEnd=\"8dp\"\n            android:layout_marginStart=\"8dp\"\n            android:layout_weight=\"1\"\n            android:ems=\"10\"\n            android:hint=\"Type a message\"\n            android:inputType=\"textPersonName\"\n            app:layout_constraintBottom_toBottomOf=\"parent\"\n            app:layout_constraintEnd_toStartOf=\"@+id/chat_extra\"\n            app:layout_constraintStart_toStartOf=\"parent\"\n            app:layout_constraintTop_toTopOf=\"parent\" /&gt;\n\n        &lt;ImageView\n            android:id=\"@+id/send\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:src=\"@drawable/send_chat\"\n            app:layout_constraintBottom_toBottomOf=\"parent\"\n            app:layout_constraintEnd_toEndOf=\"@+id/to_be_sent_chat\"\n            app:layout_constraintTop_toTopOf=\"@+id/to_be_sent_chat\" /&gt;\n\n        &lt;ImageView\n            android:id=\"@+id/chat_extra\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginEnd=\"16dp\"\n            android:layout_marginRight=\"16dp\"\n            android:src=\"@drawable/add_media_circle\"\n            app:layout_constraintBottom_toBottomOf=\"parent\"\n            app:layout_constraintEnd_toEndOf=\"parent\" /&gt;\n    &lt;/LinearLayout&gt;\n&lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n\n<p></p>\n\n<p>The Adapter</p>\n\n<pre><code>    package io.thed.cuju.adapters\n\nimport android.app.Activity\nimport android.content.Context\nimport android.content.Intent\nimport android.net.Uri\nimport android.support.v4.content.ContextCompat\nimport android.support.v7.widget.RecyclerView\nimport android.text.format.DateUtils\nimport android.view.LayoutInflater\nimport android.view.View\nimport android.view.ViewGroup\nimport android.widget.ImageView\nimport android.widget.TextView\nimport com.google.gson.Gson\nimport com.pddstudio.preferences.encrypted.EncryptedPreferences\nimport com.squareup.picasso.Picasso\nimport io.thed.cuju.R\nimport io.thed.cuju.beans.MessageBean\nimport io.thed.cuju.beans.UserBean\nimport io.thed.cuju.constants.*\nimport io.thed.cuju.customsViews.ZoomImageFragment\nimport java.text.SimpleDateFormat\nimport java.util.*\n\nclass ChatDetailsAdapter// Provide a suitable constructor (depends on the kind of dataset)\n(private val chatList: List&lt;MessageBean&gt;, internal var context: Context) : RecyclerView.Adapter&lt;ChatDetailsAdapter.ViewHolder&gt;() {\n    internal var token: String? = null\n    internal var user: UserBean? = null\n\n    val SENT_CHAT = 1\n    val RECIVED_CHAT = 2\n\n    override fun getItemViewType(position: Int): Int {\n        val current: MessageBean = chatList[position]\n        val encryptedPreferences = EncryptedPreferences.Builder(context).withEncryptionPassword(PASSWORD).build()\n        var token: String = encryptedPreferences.getString(USER_PREF_TOKEN_KEY, NO_TOKEN)\n        tokenForImage = \"?x-access-token=\" + token\n        user = Gson().fromJson(encryptedPreferences!!.getString(USER_PREF_KEY, \"\"), UserBean::class.java)\n        if (user!!._id != current.from) {\n            return RECIVED_CHAT\n        } else {\n            return SENT_CHAT\n        }\n    }\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ChatDetailsAdapter.ViewHolder {\n\n        val v: View?\n        if (viewType == SENT_CHAT) {\n            v = LayoutInflater.from(parent.context).inflate(R.layout.send_chat_box_item, parent, false)\n        } else {\n            v = LayoutInflater.from(parent.context).inflate(R.layout.recived_chat_box_item, parent, false)\n        }\n\n        return ViewHolder(v)\n    }\n\n    // set the view's size, margins, paddings and layout parameters\n\n    lateinit var tokenForImage: String\n\n    override fun onBindViewHolder(holder: ViewHolder, position: Int) {\n        val current = chatList[position]\n        holder.setIsRecyclable(false)\n        if (current.data.text != null) {\n            holder.chat_text.text = current.data.text\n        }\n        if (current.data.type == \"picture\") {\n            val url = BASE_URL + current.data.media!!.thumbnail + tokenForImage\n            Picasso.with(context).load(Uri.parse(url)).fit().placeholder(context.resources.getDrawable(R.drawable.placeholder)).into(holder.chat_image)\n            holder.chat_image.visibility = View.VISIBLE\n            holder.chat_play.visibility = View.GONE\n\n            holder.chat_image.setOnClickListener {\n                ZoomImageFragment.newInstance(url).show((context as Activity).fragmentManager, \"\")\n            }\n        } else if (current.data.type == \"video\") {\n            val url = BASE_URL + current.data.media!!.thumbnail + tokenForImage\n            Picasso.with(context).load(Uri.parse(url)).fit().placeholder(context.resources.getDrawable(R.drawable.placeholder)).into(holder.chat_image)\n            holder.chat_image.visibility = View.VISIBLE\n            holder.chat_play.visibility = View.VISIBLE\n\n            holder.chat_image.setOnClickListener {\n                val intent = Intent(Intent.ACTION_VIEW, Uri.parse(BASE_URL + current.data.media.link + tokenForImage))\n                ContextCompat.startActivity(context, intent, null)\n            }\n        } else {\n            holder.chat_image.visibility = View.GONE\n            holder.chat_play.visibility = View.GONE\n        }\n\n        val formatter = SimpleDateFormat(DATE_FORMAT)\n        formatter.timeZone = TimeZone.getTimeZone(\"GMT\")\n\n        try {\n            val dateToBeParsed = DateUtils.getRelativeTimeSpanString(formatter.parse(current.created_at).time, System.currentTimeMillis(), DateUtils.MINUTE_IN_MILLIS)\n            holder.chat_time.text = dateToBeParsed\n\n        } catch (e: Exception) {\n            println(e.message)\n            holder.chat_time.text = current.created_at\n        }\n\n        if (holder.itemViewType == SENT_CHAT) {\n            if (current.failed) {\n                holder.chat_status!!.setImageResource(R.drawable.message_seen)\n            } else if (current.seen) {\n                holder.chat_status!!.setImageResource(R.drawable.message_seen)\n            } else if (current.received) {\n                holder.chat_status!!.setImageResource(R.drawable.message_recived_not_seen)\n\n            } else if (current.sent) {\n                holder.chat_status!!.setImageResource(R.drawable.message_sent_to_server)\n            }\n        }\n    }\n\n    override fun getItemCount(): Int {\n        return chatList.size\n    }\n\n    class ViewHolder(v: View) : RecyclerView.ViewHolder(v) {\n        val chat_image: ImageView = v.findViewById(R.id.chat_image)\n        val chat_play: ImageView = v.findViewById(R.id.chat_play)\n        val chat_text: TextView = v.findViewById(R.id.chat_text)\n        val chat_time: TextView = v.findViewById(R.id.chat_time)\n        val chat_status: ImageView? = v.findViewById(R.id.chat_status)\n\n    }\n}\n</code></pre>\n\n<p>reviced_chat_box_item.xml (sorry for the typo)</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.constraint.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:layout_marginTop=\"8dp\"&gt;\n\n    &lt;android.support.v7.widget.CardView\n        android:id=\"@+id/cardView2\"\n        android:layout_width=\"0dp\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginEnd=\"8dp\"\n        android:layout_marginStart=\"12dp\"\n        app:cardBackgroundColor=\"@color/recivedChat\"\n        app:cardCornerRadius=\"12dp\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\"&gt;\n\n        &lt;android.support.constraint.ConstraintLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:padding=\"8dp\"&gt;\n\n            &lt;ImageView\n                android:id=\"@+id/chat_image\"\n                android:layout_width=\"0dp\"\n                android:layout_height=\"wrap_content\"\n                android:layout_marginTop=\"8dp\"\n                android:adjustViewBounds=\"true\"\n                android:visibility=\"gone\"\n                app:layout_constraintEnd_toEndOf=\"parent\"\n                app:layout_constraintStart_toStartOf=\"parent\"\n                app:layout_constraintTop_toBottomOf=\"@+id/chat_text\"\n                tools:srcCompat=\"@drawable/content_image\" /&gt;\n\n            &lt;ImageView\n                android:id=\"@+id/chat_play\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:visibility=\"gone\"\n                app:layout_constraintBottom_toBottomOf=\"@+id/chat_image\"\n                app:layout_constraintEnd_toEndOf=\"@+id/chat_image\"\n                app:layout_constraintStart_toStartOf=\"@+id/chat_image\"\n                app:layout_constraintTop_toTopOf=\"@+id/chat_image\"\n                app:srcCompat=\"@drawable/play\" /&gt;\n\n            &lt;TextView\n                android:id=\"@+id/chat_text\"\n                android:layout_width=\"0dp\"\n                android:layout_height=\"wrap_content\"\n                android:layout_margin=\"6dp\"\n                android:layout_marginEnd=\"2dp\"\n                android:layout_marginLeft=\"16dp\"\n                android:layout_marginRight=\"2dp\"\n                android:layout_marginStart=\"16dp\"\n                android:layout_marginTop=\"8dp\"\n                android:text=\"Hello buddy, gonna go for a training today?\"\n                android:textColor=\"@color/chat_color\"\n                android:textSize=\"15sp\"\n                app:layout_constraintEnd_toEndOf=\"parent\"\n                app:layout_constraintStart_toStartOf=\"parent\"\n                app:layout_constraintTop_toTopOf=\"parent\" /&gt;\n        &lt;/android.support.constraint.ConstraintLayout&gt;\n\n    &lt;/android.support.v7.widget.CardView&gt;\n\n    &lt;TextView\n        android:id=\"@+id/chat_time\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginLeft=\"12dp\"\n        android:layout_marginStart=\"12dp\"\n        android:layout_marginTop=\"4dp\"\n        android:text=\"12 mins ago\"\n        android:textColor=\"@color/time_ago\"\n        android:textSize=\"13sp\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toBottomOf=\"@+id/cardView2\" /&gt;\n\n&lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n\n<p>send_chat_box_item.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.constraint.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:layout_marginTop=\"8dp\"&gt;\n\n    &lt;android.support.v7.widget.CardView\n        android:id=\"@+id/cardView2\"\n        android:layout_width=\"0dp\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginEnd=\"12dp\"\n        android:layout_marginStart=\"8dp\"\n        app:cardCornerRadius=\"12dp\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\"&gt;\n\n        &lt;android.support.constraint.ConstraintLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:padding=\"8dp\"&gt;\n\n            &lt;ImageView\n                android:id=\"@+id/chat_image\"\n                android:layout_width=\"0dp\"\n                android:layout_height=\"wrap_content\"\n                android:layout_marginTop=\"8dp\"\n                android:adjustViewBounds=\"true\"\n                android:visibility=\"gone\"\n                app:layout_constraintEnd_toEndOf=\"parent\"\n                app:layout_constraintStart_toStartOf=\"parent\"\n                app:layout_constraintTop_toBottomOf=\"@+id/chat_text\"\n                tools:srcCompat=\"@drawable/content_image\" /&gt;\n\n            &lt;ImageView\n                android:id=\"@+id/chat_play\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:adjustViewBounds=\"false\"\n                android:visibility=\"gone\"\n                app:layout_constraintBottom_toBottomOf=\"@+id/chat_image\"\n                app:layout_constraintEnd_toEndOf=\"@+id/chat_image\"\n                app:layout_constraintStart_toStartOf=\"@+id/chat_image\"\n                app:layout_constraintTop_toTopOf=\"@+id/chat_image\"\n                app:srcCompat=\"@drawable/play\" /&gt;\n\n            &lt;TextView\n                android:id=\"@+id/chat_text\"\n                android:layout_width=\"0dp\"\n                android:layout_height=\"wrap_content\"\n                android:layout_margin=\"6dp\"\n                android:layout_marginEnd=\"16dp\"\n                android:layout_marginLeft=\"2dp\"\n                android:layout_marginRight=\"16dp\"\n                android:layout_marginStart=\"2dp\"\n                android:layout_marginTop=\"8dp\"\n                android:text=\"Hello buddy, gonna go for a training today?\"\n                android:textColor=\"@color/chat_color\"\n                android:textSize=\"15sp\"\n                app:layout_constraintEnd_toEndOf=\"parent\"\n                app:layout_constraintStart_toStartOf=\"parent\"\n                app:layout_constraintTop_toTopOf=\"parent\" /&gt;\n        &lt;/android.support.constraint.ConstraintLayout&gt;\n    &lt;/android.support.v7.widget.CardView&gt;\n\n    &lt;TextView\n        android:id=\"@+id/chat_time\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginEnd=\"12dp\"\n        android:layout_marginRight=\"12dp\"\n        android:layout_marginTop=\"4dp\"\n        android:text=\"12 mins ago\"\n        android:textColor=\"@color/time_ago\"\n        android:textSize=\"13sp\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintTop_toBottomOf=\"@+id/cardView2\" /&gt;\n\n    &lt;ImageView\n        android:id=\"@+id/chat_status\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginBottom=\"8dp\"\n        android:layout_marginEnd=\"8dp\"\n        android:layout_marginRight=\"8dp\"\n        android:layout_marginTop=\"8dp\"\n        app:layout_constraintBottom_toBottomOf=\"@+id/chat_time\"\n        app:layout_constraintEnd_toStartOf=\"@+id/chat_time\"\n        app:layout_constraintTop_toTopOf=\"@+id/chat_time\"\n        app:srcCompat=\"@drawable/message_seen\" /&gt;\n&lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/83lpR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/83lpR.png\" alt=\"This is a screenshot before opening the keyboard\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/ge3Zr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ge3Zr.png\" alt=\"This is after the keyboard opened\"></a></p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 2639, "user_id": 3072566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jaZNV.png?s=128&g=1", "display_name": "litelite", "link": "https://stackoverflow.com/users/3072566/litelite"}, "edited": false, "score": 5, "creation_date": 1511969804, "post_id": 47556407, "comment_id": 82070158, "body": "According to the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-hash-map/index.html\" rel=\"nofollow noreferrer\">doc</a>, <code>var map=HashMap(n)</code> specifies the initial capacity."}], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 5, "last_activity_date": 1511970555, "last_edit_date": 1511970555, "creation_date": 1511970202, "answer_id": 47556602, "question_id": 47556407, "link": "https://stackoverflow.com/questions/47556407/what-is-the-difference-between-var-map-hashmapint-string-and-var-map-hashmap/47556602#47556602", "title": "What is the difference between var map=HashMap&lt;Int,String&gt;() and var map=HashMap&lt;Int,String&gt;(n)?", "body": "<p>The <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html#HashMap-int-\" rel=\"nofollow noreferrer\"><code>HashMap(n)</code></a> overload accepts the <em>initial capacity</em>, which is used to initialize the <code>HashMap</code> with the provided capacity instead of the default one (which is rather small to reduce memory usage, 16 in JDK 8).</p>\n\n<p>Use it when you know how many items you are going to put into the map, at least approximately, because it allows you to avoid overhead of re-allocating the map and re-hashing the keys as you put entries into it</p>\n"}], "owner": {"reputation": 27, "user_id": 8314905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5edfe77794305a24af49b68f8d56db27?s=128&d=identicon&r=PG&f=1", "display_name": "ruchitesh22", "link": "https://stackoverflow.com/users/8314905/ruchitesh22"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 1, "accepted_answer_id": 47556602, "answer_count": 1, "score": -2, "last_activity_date": 1511973213, "creation_date": 1511969635, "last_edit_date": 1511973213, "question_id": 47556407, "link": "https://stackoverflow.com/questions/47556407/what-is-the-difference-between-var-map-hashmapint-string-and-var-map-hashmap", "title": "What is the difference between var map=HashMap&lt;Int,String&gt;() and var map=HashMap&lt;Int,String&gt;(n)?", "body": "<p>Consider <code>n</code> is any integer with any particular value in the range of <code>Int</code> data type. so What is the difference between <code>var map=HashMap&lt;Int,String&gt;()</code> and <code>var map=HashMap&lt;Int,String&gt;(n)</code> ?</p>\n"}, {"tags": ["spring", "jpa", "kotlin", "fsm", "spring-statemachine"], "answers": [{"comments": [{"owner": {"reputation": 489, "user_id": 1401162, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/34ccb916234d4117540155fed4e4ce1c?s=128&d=identicon&r=PG&f=1", "display_name": "Vipercold", "link": "https://stackoverflow.com/users/1401162/vipercold"}, "edited": false, "score": 0, "creation_date": 1512055857, "post_id": 47568774, "comment_id": 82110964, "body": "I&#39;ll try to use this implementation and sent you some feedback. thank you !"}], "tags": [], "owner": {"reputation": 2373, "user_id": 3737429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e0edea48e7de04dc3c5fbc94f05f3c4?s=128&d=identicon&r=PG", "display_name": "Janne Valkealahti", "link": "https://stackoverflow.com/users/3737429/janne-valkealahti"}, "is_accepted": true, "score": 2, "last_activity_date": 1512029879, "creation_date": 1512029879, "answer_id": 47568774, "question_id": 47553460, "link": "https://stackoverflow.com/questions/47553460/how-to-retrieve-and-find-current-state-on-spring-state-machine/47568774#47568774", "title": "How to retrieve and find current state on Spring State Machine?", "body": "<p>This indeed has been quite awkward to do using existing functionality as there is a lot of moving parts as you've probably seen from samples and docs.</p>\n\n<p>I'm currently working to overhaul things around this in next 1.2.8 release to make persisting easier. If you're willing to use snapshots(in 1.2.x branch) until 1.2.8 is out, then start by checking new sample <a href=\"https://github.com/spring-projects/spring-statemachine/tree/1.2.x/spring-statemachine-samples/datajpapersist\" rel=\"nofollow noreferrer\">datajpapersist sample</a>. Based on same concepts as storing configs but with new persist classes in <a href=\"https://github.com/spring-projects/spring-statemachine/tree/1.2.x/spring-statemachine-data/jpa/src/main/java/org/springframework/statemachine/data/jpa\" rel=\"nofollow noreferrer\">spring-statemachine-data</a>. Also issues around this <a href=\"https://github.com/spring-projects/spring-statemachine/milestone/31\" rel=\"nofollow noreferrer\">1.2.8 gh issues</a>.</p>\n\n<p>It'd be good to get some feedback on this.</p>\n"}], "owner": {"reputation": 489, "user_id": 1401162, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/34ccb916234d4117540155fed4e4ce1c?s=128&d=identicon&r=PG&f=1", "display_name": "Vipercold", "link": "https://stackoverflow.com/users/1401162/vipercold"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1374, "favorite_count": 0, "accepted_answer_id": 47568774, "answer_count": 1, "score": 1, "last_activity_date": 1512054403, "creation_date": 1511960311, "last_edit_date": 1512054403, "question_id": 47553460, "link": "https://stackoverflow.com/questions/47553460/how-to-retrieve-and-find-current-state-on-spring-state-machine", "title": "How to retrieve and find current state on Spring State Machine?", "body": "<p>I'm creating an project that needs a FSM and i choose Spring State Machine to help me solve the problem. I'm using JPA and trying to figure out how to start the state machine based on my current state retrieving the state from an JPA repository. I found on documentation this approach:\n<a href=\"https://docs.spring.io/spring-statemachine/docs/current/reference/htmlsingle/#statemachine-recipes-persist\" rel=\"nofollow noreferrer\">state machine persist</a></p>\n\n<p>But i'm confusing about this approach too: <a href=\"https://docs.spring.io/spring-statemachine/docs/current/reference/htmlsingle/#sm-persist\" rel=\"nofollow noreferrer\">persisting state machine</a></p>\n\n<p>I'm not trying to persist all state machine configuration, but only start and send events based on my entity status. but in both cases i don't know how to put jpa repository to find my current state.</p>\n\n<p>Now i'm trying this approach:</p>\n\n<pre><code>class StateMachineAdapter&lt;S, E, T&gt; {\n\nlateinit var stateMachineFactory: StateMachineFactory&lt;S, E&gt;\n\nlateinit var persister: StateMachinePersister&lt;S, E, T&gt;\n\nfun stateMachineRestore(contextObject: T): StateMachine&lt;S, E&gt; {\n    val stateMachine: StateMachine&lt;S, E&gt; = stateMachineFactory.getStateMachine()\n    return persister.restore(stateMachine, contextObject)\n}\n\n\nfun persist(stateMachine: StateMachine&lt;S, E&gt;, contestation: T) {\n    persister.persist(stateMachine, contestation)\n}\n\nfun create(): StateMachine&lt;S, E&gt; {\n    val stateMachine: StateMachine&lt;S, E&gt; = stateMachineFactory.getStateMachine()\n    stateMachine.start()\n    return stateMachine\n }\n\n\n }\n</code></pre>\n\n<p>I found this piece of code in Spring documentation, and i thought it could be replaced with JpaRepository:</p>\n\n<pre><code>public void change(int order, String event) {\nOrder o = jdbcTemplate.queryForObject(\"select id, state from orders where id = ?\", new Object[] { order },\n        new RowMapper&lt;Order&gt;() {\n            public Order mapRow(ResultSet rs, int rowNum) throws SQLException {\n                return new Order(rs.getInt(\"id\"), rs.getString(\"state\"));\n            }\n        });\nhandler.handleEventWithState(MessageBuilder.withPayload(event).setHeader(\"order\", order).build(), o.state);\n }\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-recyclerview", "universal-image-loader"], "comments": [{"owner": {"reputation": 243, "user_id": 7364714, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1nAyHw5YEmo/AAAAAAAAAAI/AAAAAAAAACY/_3AUy_Gs2I8/photo.jpg?sz=128", "display_name": "Arbaz Rizvi", "link": "https://stackoverflow.com/users/7364714/arbaz-rizvi"}, "edited": false, "score": 1, "creation_date": 1511959655, "post_id": 47553188, "comment_id": 82063012, "body": "Try to use any image loader library like glide, fresco etc. and also maintain your image url with your viewholder"}, {"owner": {"reputation": 3421, "user_id": 1206800, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9d34e72e6421ad14761ca7c28c9d26f4?s=128&d=identicon&r=PG", "display_name": "Anthea", "link": "https://stackoverflow.com/users/1206800/anthea"}, "edited": false, "score": 0, "creation_date": 1511961731, "post_id": 47553188, "comment_id": 82064283, "body": "possible duplicate: <a href=\"https://stackoverflow.com/questions/26525999/recyclerview-async-image-loading\" title=\"recyclerview async image loading\">stackoverflow.com/questions/26525999/&hellip;</a>"}, {"owner": {"reputation": 357, "user_id": 4026441, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/37IQa.jpg?s=128&g=1", "display_name": "Norris Boateng", "link": "https://stackoverflow.com/users/4026441/norris-boateng"}, "reply_to_user": {"reputation": 243, "user_id": 7364714, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1nAyHw5YEmo/AAAAAAAAAAI/AAAAAAAAACY/_3AUy_Gs2I8/photo.jpg?sz=128", "display_name": "Arbaz Rizvi", "link": "https://stackoverflow.com/users/7364714/arbaz-rizvi"}, "edited": false, "score": 0, "creation_date": 1512031818, "post_id": 47553188, "comment_id": 82095890, "body": "@ArbazRizvi I&#39;ll try another library and see but i&#39;m currently using <a href=\"https://github.com/nostra13/Android-Universal-Image-Loader\" rel=\"nofollow noreferrer\">UIL</a>"}], "answers": [{"tags": [], "owner": {"reputation": 520, "user_id": 8969251, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d6476f113c0f5ea5683178674fbe7fbf?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Solanki", "link": "https://stackoverflow.com/users/8969251/nikhil-solanki"}, "is_accepted": false, "score": 0, "last_activity_date": 1511960167, "creation_date": 1511960167, "answer_id": 47553423, "question_id": 47553188, "link": "https://stackoverflow.com/questions/47553188/loading-picture-to-correct-position-in-recycler-view/47553423#47553423", "title": "Loading picture to correct position in recycler view", "body": "<p>you nedd to put setHasStableIds(true); in your Adapter's constructor and put :</p>\n\n<pre><code>@Override\npublic int getItemViewType(int position) {\n    return position;\n}\n\n@Override\npublic long getItemId(int position) {\n    return position;\n}\n</code></pre>\n\n<p>So it will keep all images at exact positions even after scroll.</p>\n"}, {"comments": [{"owner": {"reputation": 17743, "user_id": 558433, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/XZg0R.jpg?s=128&g=1", "display_name": "Marcos Vasconcelos", "link": "https://stackoverflow.com/users/558433/marcos-vasconcelos"}, "reply_to_user": {"reputation": 357, "user_id": 4026441, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/37IQa.jpg?s=128&g=1", "display_name": "Norris Boateng", "link": "https://stackoverflow.com/users/4026441/norris-boateng"}, "edited": false, "score": 0, "creation_date": 1512050865, "post_id": 47553908, "comment_id": 82107564, "body": "setImageBitmap(null) before downloading the new one"}, {"owner": {"reputation": 357, "user_id": 4026441, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/37IQa.jpg?s=128&g=1", "display_name": "Norris Boateng", "link": "https://stackoverflow.com/users/4026441/norris-boateng"}, "edited": false, "score": 0, "creation_date": 1512059893, "post_id": 47553908, "comment_id": 82113644, "body": "Thanks will try it out and see"}], "tags": [], "owner": {"reputation": 17743, "user_id": 558433, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/XZg0R.jpg?s=128&g=1", "display_name": "Marcos Vasconcelos", "link": "https://stackoverflow.com/users/558433/marcos-vasconcelos"}, "is_accepted": false, "score": 0, "last_activity_date": 1512050846, "last_edit_date": 1512050846, "creation_date": 1511961838, "answer_id": 47553908, "question_id": 47553188, "link": "https://stackoverflow.com/questions/47553188/loading-picture-to-correct-position-in-recycler-view/47553908#47553908", "title": "Loading picture to correct position in recycler view", "body": "<p>The RecyclerView will reuse ViewHolders to reduce inflation and memory usage.</p>\n\n<p>The correct way is in the onBindViewHolder is to clear the old state of the View (seting image as null) and seting the new ones.</p>\n\n<p>Make sure to clear it all times it come onBind (before testing)</p>\n\n<pre><code>articleImage.displayImage(null)\nif (image.isBlank()){\n</code></pre>\n\n<p>Since downloading is a async task it will not be at the way when binding, that's why you just clear the old one, for texts it is immediately available to be set.</p>\n"}, {"tags": [], "owner": {"reputation": 3421, "user_id": 1206800, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9d34e72e6421ad14761ca7c28c9d26f4?s=128&d=identicon&r=PG", "display_name": "Anthea", "link": "https://stackoverflow.com/users/1206800/anthea"}, "is_accepted": false, "score": 0, "last_activity_date": 1511962009, "creation_date": 1511962009, "answer_id": 47553966, "question_id": 47553188, "link": "https://stackoverflow.com/questions/47553188/loading-picture-to-correct-position-in-recycler-view/47553966#47553966", "title": "Loading picture to correct position in recycler view", "body": "<p>Consider using a library for async image loading, e.g. <a href=\"http://square.github.io/picasso/\" rel=\"nofollow noreferrer\">Picasso</a>. There everything is handled for you, like caching, placeholder ... </p>\n\n<p>In your adapter: </p>\n\n<pre><code>Picasso.with(context).load(\"url\")\n.placeholder(R.drawable.user_placeholder).into(imageView);\n</code></pre>\n\n<p>Gradle:</p>\n\n<pre><code>compile 'com.squareup.picasso:picasso:2.5.2'\n</code></pre>\n\n<p>That's all!</p>\n"}], "owner": {"reputation": 357, "user_id": 4026441, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/37IQa.jpg?s=128&g=1", "display_name": "Norris Boateng", "link": "https://stackoverflow.com/users/4026441/norris-boateng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1240, "favorite_count": 1, "answer_count": 3, "score": 0, "last_activity_date": 1512050846, "creation_date": 1511959390, "question_id": 47553188, "link": "https://stackoverflow.com/questions/47553188/loading-picture-to-correct-position-in-recycler-view", "title": "Loading picture to correct position in recycler view", "body": "<p>I make a network call in my recycler adapter to retrieve the url for a picture. After the url is received, I use universal image loader to load the picture into an image view. The problem is when I don't scroll the pictures are loaded into the right place but as soon as I scroll the pictures are inflated in the wrong place.\nHere's my adapter:</p>\n\n<pre><code>override fun onBindViewHolder(holder: RecyclerView.ViewHolder, position: Int) {\n    if (holder is ViewHolder) {\n        val article = feeds[position]\n\n        holder.articleTitle.setFont(\"SourceSansPro-SemiBold.ttf\")\n        holder.articleDescription.setFont(\"OpenSans-Regular.ttf\")\n        holder.articleTime.setFont(\"OpenSans-Light.ttf\")\n\n        mAnimator?.onBindViewHolder(holder.itemView, position)\n        holder.apply {\n            article.apply {\n                articleTitle.text = title\n                articleDescription.text = Html.fromHtml(description)\n                articleTime.text = TimeUtils.convertLongToTime(pubDate)\n\n                if (image.isBlank()){\n                    //load picture url when it's empty\n                    mContext?.doAsync {\n                        ImageExtractor.extractImageUrl(link, object : OnImageExtractorListener {\n                            override fun onSuccess(url: String) {\n                                v(\"imaaaage success $title $url\")\n                                mContext?.runOnUiThread {\n                                    article.image = url\n\n                                    //use uil to load the image didn't work so I tried just updating the model\n                                    //articleImage.displayImage(url)\n\n                                    feeds[position] = article\n                                    notifyItemChanged(position)\n                                }\n                                val dbo = context.getDatabase()\n                                dbo.updateArticleImage(dbo,url,article.id)\n                            }\n\n                            override fun onError() {\n                            }\n                        })\n                    }\n                }else{\n                    articleImage.displayImage(image)\n                    isRead?.let {\n                        if (isRead!! &amp;&amp; !isSaved){\n                            grayScale(holder)\n                        }\n                    }\n                }\n\n                container.setOnClickListener {\n                    itemClick(this)\n                    if (!isSaved){\n                        article.isRead = true\n                        feeds[position] = article\n                        notifyItemChanged(position)\n                    }\n                }\n            }\n        }\n    }else if (holder is LoadingViewHolder){\n        holder.progressBar.isIndeterminate = true\n    }\n}\n</code></pre>\n\n<p>I need a way to load the images in their right places if the user is scrolling or not.</p>\n"}, {"tags": ["android", "android-emulator", "kotlin", "genymotion", "avd"], "answers": [{"tags": [], "owner": {"reputation": 284, "user_id": 5040129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/178cc3fbdd0532ba5e46a77a4ad06659?s=128&d=identicon&r=PG&f=1", "display_name": "vikrant arankalle", "link": "https://stackoverflow.com/users/5040129/vikrant-arankalle"}, "is_accepted": false, "score": 0, "last_activity_date": 1511959011, "creation_date": 1511959011, "answer_id": 47553058, "question_id": 47552594, "link": "https://stackoverflow.com/questions/47552594/android-studio-3-1-canary-4-genymotion-emulator-plugin-failed/47553058#47553058", "title": "Android Studio 3.1 Canary 4 Genymotion Emulator Plugin Failed", "body": "<p>Please use stable Channel of Android Studio for full flexed functionality \nTry to update your android studio to 3.0.1 version and it will work <a href=\"https://stackoverflow.com/questions/26418487/what-is-the-difference-between-android-studio-beta-channel-android-studio-canar/26418512\">read this</a></p>\n\n<p>for updating Android studio go to Help>Check For Updates> Updates> Stable Channel\n<a href=\"https://i.stack.imgur.com/pRWBX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pRWBX.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 65, "user_id": 6916777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1xvUC.jpg?s=128&g=1", "display_name": "RoshanADK", "link": "https://stackoverflow.com/users/6916777/roshanadk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 403, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1511959011, "creation_date": 1511957554, "last_edit_date": 1511959000, "question_id": 47552594, "link": "https://stackoverflow.com/questions/47552594/android-studio-3-1-canary-4-genymotion-emulator-plugin-failed", "title": "Android Studio 3.1 Canary 4 Genymotion Emulator Plugin Failed", "body": "<p>I'm using <strong>Android Studio 3.1 Canary 4</strong> with <strong>Kotlin Support</strong>. Since the default <strong>Android AVD</strong> is too slow, I prefer <strong>Genymotion</strong>. Inspite of installing Necessary Plugins, there is no option for Genymotion Emulator in the Android Studio.Is it not supported being Beta? Or am I missing something ?</p>\n\n<p><a href=\"https://i.stack.imgur.com/DtMIE.png\" rel=\"nofollow noreferrer\">Plugin</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/jzwDM.png\" rel=\"nofollow noreferrer\">Installed Genymotion</a></p>\n\n<p><strong>PS</strong> : [Installed Virtual Box,Genymotion, Android Studio] And Selected SDK from Genymotion. Also Configured the virtual box. And Restarted a lot of times after doing each steps</p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "is_accepted": true, "score": 4, "last_activity_date": 1511956182, "creation_date": 1511956182, "answer_id": 47552133, "question_id": 47551961, "link": "https://stackoverflow.com/questions/47551961/kotlin-destructuring-in-lambda-parameters/47552133#47552133", "title": "Kotlin: Destructuring in lambda parameters", "body": "<p>You can destructure the pair directly in the argument list. You are only missing the parenthesis in your first example.</p>\n\n<pre><code>list.forEach { (first, second) -&gt;\n  first + second\n}\n</code></pre>\n"}], "owner": {"reputation": 15751, "user_id": 1345655, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2f01aca0b4d2d9347a6fd0f16f24d084?s=128&d=identicon&r=PG", "display_name": "Kshitiz Sharma", "link": "https://stackoverflow.com/users/1345655/kshitiz-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 47552133, "answer_count": 1, "score": 1, "last_activity_date": 1511956182, "creation_date": 1511955646, "question_id": 47551961, "link": "https://stackoverflow.com/questions/47551961/kotlin-destructuring-in-lambda-parameters", "title": "Kotlin: Destructuring in lambda parameters", "body": "<p>Is there a way to iterate over a list of objects/pairs like so:</p>\n\n<pre><code>val list = listOf(Pair(1,2),Pair(2,3))\n\nlist.forEach { first, second -&gt;\n     first + second\n}\n</code></pre>\n\n<p>Following doesn't work either:</p>\n\n<pre><code>list.forEach { (first, second) in it -&gt;\n         first + second\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "google-vision", "vision-api"], "comments": [{"owner": {"reputation": 2143, "user_id": 2949834, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/LikXg.png?s=128&g=1", "display_name": "kimkevin", "link": "https://stackoverflow.com/users/2949834/kimkevin"}, "edited": false, "score": 0, "creation_date": 1511949772, "post_id": 47549921, "comment_id": 82056452, "body": "please add your code and error log"}, {"owner": {"reputation": 4323, "user_id": 8942811, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/vr8pK.jpg?s=128&g=1", "display_name": "Bek", "link": "https://stackoverflow.com/users/8942811/bek"}, "edited": false, "score": 0, "creation_date": 1511949902, "post_id": 47549921, "comment_id": 82056536, "body": "did you try android:configChanges=&quot;orientation|keyboardHidden&quot;?"}, {"owner": {"reputation": 605, "user_id": 6270838, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10201835414884191/picture?type=large", "display_name": "Jakub Gruber", "link": "https://stackoverflow.com/users/6270838/jakub-gruber"}, "edited": false, "score": 0, "creation_date": 1511949949, "post_id": 47549921, "comment_id": 82056564, "body": "How would that helped me?"}, {"owner": {"reputation": 4323, "user_id": 8942811, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/vr8pK.jpg?s=128&g=1", "display_name": "Bek", "link": "https://stackoverflow.com/users/8942811/bek"}, "edited": false, "score": 0, "creation_date": 1511949994, "post_id": 47549921, "comment_id": 82056601, "body": "it prevents activity from restart"}, {"owner": {"reputation": 605, "user_id": 6270838, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10201835414884191/picture?type=large", "display_name": "Jakub Gruber", "link": "https://stackoverflow.com/users/6270838/jakub-gruber"}, "edited": false, "score": 0, "creation_date": 1511950062, "post_id": 47549921, "comment_id": 82056662, "body": "Not really what I&#39;d have wanted. I need to inflate new layout file in case of rotation."}, {"owner": {"reputation": 1205, "user_id": 1880899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76a14dafdc4757bdd0d2132ece91485b?s=128&d=identicon&r=PG", "display_name": "Sumit Anantwar", "link": "https://stackoverflow.com/users/1880899/sumit-anantwar"}, "edited": false, "score": 0, "creation_date": 1511950414, "post_id": 47549921, "comment_id": 82056902, "body": "Add the code for your Activity and Fragment as well. The most probable reason would be improper handling of activity recreation on orientation change."}, {"owner": {"reputation": 605, "user_id": 6270838, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10201835414884191/picture?type=large", "display_name": "Jakub Gruber", "link": "https://stackoverflow.com/users/6270838/jakub-gruber"}, "reply_to_user": {"reputation": 1205, "user_id": 1880899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76a14dafdc4757bdd0d2132ece91485b?s=128&d=identicon&r=PG", "display_name": "Sumit Anantwar", "link": "https://stackoverflow.com/users/1880899/sumit-anantwar"}, "edited": false, "score": 0, "creation_date": 1511961562, "post_id": 47549921, "comment_id": 82064152, "body": "@SumitAnantwar I added the source code"}], "answers": [{"tags": [], "owner": {"reputation": 436, "user_id": 5400534, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MC1Rx.jpg?s=128&g=1", "display_name": "CodeBulls Inc.", "link": "https://stackoverflow.com/users/5400534/codebulls-inc"}, "is_accepted": false, "score": 0, "last_activity_date": 1511951449, "last_edit_date": 1511951449, "creation_date": 1511950528, "answer_id": 47550243, "question_id": 47549921, "link": "https://stackoverflow.com/questions/47549921/app-crashes-when-rotating-screen/47550243#47550243", "title": "App crashes when rotating screen", "body": "<p>Whenever Android destroys and recreates your Activity for orientation change, it calls onSaveInstanceState().</p>\n\n<p>So do save necessary data in a Bundle in onSaveInstanceState() and restore the same in onCreate() by checking if field savedInstanceState is null?</p>\n"}], "owner": {"reputation": 605, "user_id": 6270838, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10201835414884191/picture?type=large", "display_name": "Jakub Gruber", "link": "https://stackoverflow.com/users/6270838/jakub-gruber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 315, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1512029949, "creation_date": 1511949666, "last_edit_date": 1512029949, "question_id": 47549921, "link": "https://stackoverflow.com/questions/47549921/app-crashes-when-rotating-screen", "title": "App crashes when rotating screen", "body": "<p>I am using Mobile Vision API to detect faces on front facing camera. I used Google's FaceTracker demo, but I need to use it in Fragment. It is working, but when I try to rotate screen, application crashes with exception <code>RuntimeException: Fail to connect to camera service</code>.</p>\n\n<p>Fragment code:</p>\n\n<pre><code>class EyeTrackerFragment : Fragment(), AnkoLogger {\n\nprivate var cameraSource: CameraSource? = null\n\nprivate lateinit var cameraSourcePreview: CameraSourcePreview\nprivate lateinit var graphicOverlay: GraphicOverlay\n\nprivate var callback: OnEyeContextUpdatedListener? = null\n\ncompanion object {\n    // google play services error code\n    private val RC_HANDLE_GMS = 9001\n    // permission request codes need to be &lt; 256\n    private val RC_HANDLE_CAMERA_PERM = 2\n}\n\noverride fun onAttach(context: Context?) {\n    super.onAttach(context)\n\n    try {\n        callback = activity as OnEyeContextUpdatedListener\n    } catch (e: ClassCastException) {\n        throw ClassCastException(\"${activity} must implement OnEyeContextUpdatedListener\")\n    }\n}\n\n/**\n * Restarts the camera.\n */\noverride fun onResume() {\n    super.onResume()\n\n    startCameraSource()\n}\n\n/**\n * Stops the camera.\n */\noverride fun onPause() {\n    super.onPause()\n    cameraSourcePreview.stop()\n}\n\n/**\n * Releases the resources associated with the camera source, the associated detector, and the\n * rest of the processing pipeline.\n */\noverride fun onDestroy() {\n    super.onDestroy()\n    cameraSource?.release()\n}\n\noverride fun onCreateView(inflater: LayoutInflater?, container: ViewGroup?, savedInstanceState: Bundle?): View? =\n        inflater!!.inflate(R.layout.fragment_face_tracker, container, false)\n\noverride fun onViewCreated(view: View?, savedInstanceState: Bundle?) {\n    super.onViewCreated(view, savedInstanceState)\n\n    cameraSourcePreview = getView()!!.findViewById&lt;View&gt;(R.id.preview) as CameraSourcePreview\n    graphicOverlay = getView()!!.findViewById&lt;View&gt;(R.id.faceOverlay) as GraphicOverlay\n\n    if (ActivityCompat.checkSelfPermission(context.applicationContext, Manifest.permission.CAMERA) == PackageManager.PERMISSION_GRANTED) {\n        createCameraSource()\n    } else {\n        requestCameraPermission()\n    }\n}\n\n/**\n * Handles the requesting of the camera permission.  This includes\n * showing a \"Toast\" message of why the permission is needed then\n * sending the request.\n */\nprivate fun requestCameraPermission() {\n    warn(\"Camera permission is not granted. Requesting permission\")\n\n    val permissions = arrayOf(Manifest.permission.CAMERA)\n\n    if (!ActivityCompat.shouldShowRequestPermissionRationale(activity,\n            Manifest.permission.CAMERA)) {\n        ActivityCompat.requestPermissions(activity, permissions, RC_HANDLE_CAMERA_PERM)\n        return\n    }\n\n    Toast.makeText(context.applicationContext, \"Give me permissions\", Toast.LENGTH_LONG).show()\n}\n\nprivate fun createCameraSource() {\n    val detector = FaceDetector.Builder(context.applicationContext)\n            .setClassificationType(FaceDetector.ALL_CLASSIFICATIONS)\n            .setProminentFaceOnly(true)\n            .setTrackingEnabled(true)\n            .setMode(FaceDetector.ACCURATE_MODE)\n            .build()\n\n    val faceTracker = GraphicFaceTracker(graphicOverlay, callback, context)\n    val faceProcessor = LargestFaceFocusingProcessor(detector, faceTracker)\n    detector.setProcessor(faceProcessor)\n\n    if (!detector.isOperational) {\n        longToast(\"Face detector dependencies are not yet available.\")\n    }\n\n    cameraSource = CameraSource.Builder(context, detector)\n            .setRequestedPreviewSize(640, 480)\n            .setFacing(CameraSource.CAMERA_FACING_FRONT)\n            .setRequestedFps(30.0f)\n            .build()\n}\n\nprivate fun startCameraSource() {\n    // check that the device has play services available.\n    val code = GoogleApiAvailability.getInstance().isGooglePlayServicesAvailable(\n            context.applicationContext)\n    if (code != ConnectionResult.SUCCESS) {\n        val dlg = GoogleApiAvailability.getInstance().getErrorDialog(activity, code, RC_HANDLE_GMS)\n        dlg.show()\n    }\n\n    if (cameraSource != null) {\n        try {\n            cameraSourcePreview.start(cameraSource!!, graphicOverlay)\n        } catch (e: IOException) {\n            error(\"Unable to start camera source.\", e)\n            cameraSource!!.release()\n            cameraSource = null\n        }\n\n    }\n}\n\noverride fun onRequestPermissionsResult(requestCode: Int, permissions: Array&lt;String&gt;, grantResults: IntArray) {\n    if (requestCode != RC_HANDLE_CAMERA_PERM) {\n        debug(\"Got unexpected permission result: $requestCode\")\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults)\n        return\n    }\n\n    if (grantResults.size != 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n        debug(\"Camera permission granted - initialize the camera source\")\n        createCameraSource()\n        return\n    }\n\n    error(\"Permission not granted: results len = ${grantResults.size}. Result code = ${if (grantResults.isNotEmpty()) grantResults[0] else \"(empty)\"}\")\n\n    val builder = AlertDialog.Builder(context)\n    builder.setTitle(\"Face Tracker sample\")\n            .setMessage(\"Have no camera permission\")\n            .setPositiveButton(\"Ok\", { _, _ -&gt; activity.finish() })\n            .show()\n}\n</code></pre>\n\n<p>}</p>\n\n<p>According to Activity code. It only attaches previous fragment in onCreate method and then does not do anything.</p>\n\n<p>I guess that camera instance was not released in some situation, but it is done in the same way like in Activity. Is there any special behavior in Fragment that would require extra actions in comparision with activies?</p>\n\n<p>Full exception log:</p>\n\n<pre><code>E/AndroidRuntime: FATAL EXCEPTION: main\n              Process: com.eyetracker.android.demo, PID: 22631\n              java.lang.RuntimeException: Fail to connect to camera service\n                  at android.hardware.Camera.&lt;init&gt;(Camera.java:520)\n                  at android.hardware.Camera.open(Camera.java:361)\n                  at com.google.android.gms.vision.CameraSource.zzchq(Unknown Source)\n                  at com.google.android.gms.vision.CameraSource.start(Unknown Source)\n                  at com.eyetracker.android.camera.CameraSourcePreview.startIfReady(CameraSourcePreview.kt:82)\n                  at com.eyetracker.android.camera.CameraSourcePreview.access$startIfReady(CameraSourcePreview.kt:18)\n                  at com.eyetracker.android.camera.CameraSourcePreview$SurfaceCallback.surfaceCreated(CameraSourcePreview.kt:104)\n                  at android.view.SurfaceView.updateWindow(SurfaceView.java:580)\n                  at android.view.SurfaceView$3.onPreDraw(SurfaceView.java:176)\n                  at android.view.ViewTreeObserver.dispatchOnPreDraw(ViewTreeObserver.java:948)\n                  at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1974)\n                  at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1065)\n                  at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:5901)\n                  at android.view.Choreographer$CallbackRecord.run(Choreographer.java:767)\n                  at android.view.Choreographer.doCallbacks(Choreographer.java:580)\n                  at android.view.Choreographer.doFrame(Choreographer.java:550)\n                  at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:753)\n                  at android.os.Handler.handleCallback(Handler.java:739)\n                  at android.os.Handler.dispatchMessage(Handler.java:95)\n                  at android.os.Looper.loop(Looper.java:211)\n                  at android.app.ActivityThread.main(ActivityThread.java:5389)\n                  at java.lang.reflect.Method.invoke(Native Method)\n                  at java.lang.reflect.Method.invoke(Method.java:372)\n                  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1020)\n                  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:815)\n</code></pre>\n"}, {"tags": ["android", "kotlin", "init"], "comments": [{"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 1, "creation_date": 1511964764, "post_id": 47549523, "comment_id": 82066361, "body": "You can&#39;t <code>return</code> from a constructor in Java either."}], "answers": [{"tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": false, "score": 3, "last_activity_date": 1511948890, "creation_date": 1511948890, "answer_id": 47549660, "question_id": 47549523, "link": "https://stackoverflow.com/questions/47549523/how-to-get-exception-in-init-block-kotlin/47549660#47549660", "title": "How to get exception in init block kotlin", "body": "<p>If an instance cannot be created due to errors in <code>init</code>, this error shouldn't be suppressed but delegated to the caller. So just do not catch the exception and the <code>init</code> \"stopps\" automatically.</p>\n"}], "owner": {"reputation": 1, "user_id": 4081742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ab5e90b48f436de11be5c1f2ef90f79?s=128&d=identicon&r=PG&f=1", "display_name": "NothingStone", "link": "https://stackoverflow.com/users/4081742/nothingstone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1528, "favorite_count": 1, "answer_count": 1, "score": -2, "last_activity_date": 1517432578, "creation_date": 1511948442, "last_edit_date": 1517432578, "question_id": 47549523, "link": "https://stackoverflow.com/questions/47549523/how-to-get-exception-in-init-block-kotlin", "title": "How to get exception in init block kotlin", "body": "<p>following the code, in <code>init</code> function I create a <code>Person</code> object\uff0cand have an exception\uff0cnow I want to stop the progress in <code>catch</code> like java return. How can I do it?</p>\n\n<pre><code>class Person {\n    val age: String = \"10\"\n    private lateinit var person: Person\n\n    init {\n        try {\n            person = get(2)\n        } catch (exception: Throwable) {\n\n        }\n        println(\"----------------do it $person.age\")\n    }\n\n    fun get(i: Int): Person {\n        when (i) {\n            1 -&gt; {\n                return Person()\n            }\n            else -&gt; {\n                throw MyException(\"aaaaaaaaa\")\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["java", "kotlin", "kotlin-lateinit"], "comments": [{"owner": {"reputation": 4677, "user_id": 3673259, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/DPHO1.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3673259/joshua"}, "edited": false, "score": 0, "creation_date": 1511949984, "post_id": 47549015, "comment_id": 82056593, "body": "I don&#39;t know the answer. But why you use <code>isInitialized</code> over nullable? <code>lateinit</code> show always be initialized before the object being use."}, {"owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "edited": false, "score": 0, "creation_date": 1511950295, "post_id": 47549015, "comment_id": 82056820, "body": "@Eledgy your code does not compile. you cannot put an if-expression directly in a class body. i think you forgot to wrap it inside an init block. i know, this does not fix your inital problem."}, {"owner": {"reputation": 3281, "user_id": 6808319, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d9314641b8d5132a63d011fd051a199?s=128&d=identicon&r=PG&f=1", "display_name": "ElegyD", "link": "https://stackoverflow.com/users/6808319/elegyd"}, "reply_to_user": {"reputation": 4677, "user_id": 3673259, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/DPHO1.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3673259/joshua"}, "edited": false, "score": 0, "creation_date": 1511950767, "post_id": 47549015, "comment_id": 82057160, "body": "@Joshua I have one case where person may not be initialized yet"}, {"owner": {"reputation": 3281, "user_id": 6808319, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d9314641b8d5132a63d011fd051a199?s=128&d=identicon&r=PG&f=1", "display_name": "ElegyD", "link": "https://stackoverflow.com/users/6808319/elegyd"}, "reply_to_user": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "edited": false, "score": 0, "creation_date": 1511950864, "post_id": 47549015, "comment_id": 82057232, "body": "@WilliMentzel It&#39;s just an example, I&#39;ve put the code in a method"}, {"owner": {"reputation": 4677, "user_id": 3673259, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/DPHO1.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3673259/joshua"}, "edited": false, "score": 1, "creation_date": 1511951112, "post_id": 47549015, "comment_id": 82057431, "body": "@ElegyD Then, you should use <code>Person?</code>. If you abuse <code>lateinit</code>, you need an if everytime you access person which make you go back to Java with null checking."}, {"owner": {"reputation": 930, "user_id": 5125812, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bPxL4.jpg?s=128&g=1", "display_name": "Victor Rendina", "link": "https://stackoverflow.com/users/5125812/victor-rendina"}, "edited": false, "score": 0, "creation_date": 1512654513, "post_id": 47549015, "comment_id": 82352667, "body": "I had the same issue using a <code>protected lateinit var</code> in a superclass and then calling isInitialized from a subclass. It seems like the underlying Java implementation is just wrapping the variable with <code>if(variable != null) {}</code> so this seems strange."}], "answers": [{"comments": [{"owner": {"reputation": 531, "user_id": 3970630, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/wzfSm.png?s=128&g=1", "display_name": "Ric17101", "link": "https://stackoverflow.com/users/3970630/ric17101"}, "edited": false, "score": 2, "creation_date": 1605592239, "post_id": 49710377, "comment_id": 114690327, "body": "this should still be considered at kotlin v1.3.+ :)"}], "tags": [], "owner": {"reputation": 4909, "user_id": 1177295, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/jHPUu.jpg?s=128&g=1", "display_name": "Raghavendra", "link": "https://stackoverflow.com/users/1177295/raghavendra"}, "is_accepted": true, "score": 22, "last_activity_date": 1523124246, "creation_date": 1523124246, "answer_id": 49710377, "question_id": 47549015, "link": "https://stackoverflow.com/questions/47549015/isinitialized-backing-field-of-lateinit-var-is-not-accessible-at-this-point/49710377#49710377", "title": "isInitialized - Backing field of lateinit var is not accessible at this point", "body": "<p>According to the <a href=\"https://kotlinlang.org/docs/reference/properties.html#checking-whether-a-lateinit-var-is-initialized-since-12\" rel=\"noreferrer\">docs</a>:</p>\n\n<blockquote>\n  <p>This check is only available for the properties that are lexically accessible, i.e. declared in the same type or in one of the outer types, or at top level in the same file.</p>\n</blockquote>\n\n<p>Which is why you cannot check that in the main function.</p>\n"}, {"comments": [{"owner": {"reputation": 2297, "user_id": 1726296, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q8mT7.jpg?s=128&g=1", "display_name": "Tejasvi Hegde", "link": "https://stackoverflow.com/users/1726296/tejasvi-hegde"}, "edited": false, "score": 2, "creation_date": 1549813896, "post_id": 51258077, "comment_id": 96029082, "body": "Very nice and elegant. converted to property.. val isThingInitialized: Boolean = ::thing.isInitialized"}, {"owner": {"reputation": 377, "user_id": 4739877, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4Ir9U.png?s=128&g=1", "display_name": "Thomas Sunderland", "link": "https://stackoverflow.com/users/4739877/thomas-sunderland"}, "reply_to_user": {"reputation": 2297, "user_id": 1726296, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q8mT7.jpg?s=128&g=1", "display_name": "Tejasvi Hegde", "link": "https://stackoverflow.com/users/1726296/tejasvi-hegde"}, "edited": false, "score": 1, "creation_date": 1558462658, "post_id": 51258077, "comment_id": 99107045, "body": "@TejasviHegde won&#39;t isThingInitialized be set to false on creation and never be updated to true once thing is initialized given that it is immutable?"}, {"owner": {"reputation": 3473, "user_id": 2740621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MpxtQ.png?s=128&g=1", "display_name": "AutonomousApps", "link": "https://stackoverflow.com/users/2740621/autonomousapps"}, "reply_to_user": {"reputation": 377, "user_id": 4739877, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4Ir9U.png?s=128&g=1", "display_name": "Thomas Sunderland", "link": "https://stackoverflow.com/users/4739877/thomas-sunderland"}, "edited": false, "score": 0, "creation_date": 1558469607, "post_id": 51258077, "comment_id": 99109872, "body": "@ThomasSunderland <code>isThingInitialized</code> is not immutable, it&#39;s a function."}, {"owner": {"reputation": 377, "user_id": 4739877, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4Ir9U.png?s=128&g=1", "display_name": "Thomas Sunderland", "link": "https://stackoverflow.com/users/4739877/thomas-sunderland"}, "edited": false, "score": 0, "creation_date": 1558560053, "post_id": 51258077, "comment_id": 99146687, "body": "@AutonomousApps I was speaking about Tejasvi&#39;s comment where they suggest that it can be a property and in their sample it is immutable"}, {"owner": {"reputation": 6398, "user_id": 2127950, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/27eef5e6b57a1d7a7eaaf107a14fffb3?s=128&d=identicon&r=PG", "display_name": "portfoliobuilder", "link": "https://stackoverflow.com/users/2127950/portfoliobuilder"}, "edited": false, "score": 0, "creation_date": 1561681407, "post_id": 51258077, "comment_id": 100154097, "body": "Is that preferred over var thing:Thing? = null? Why not instantiate to null?"}, {"owner": {"reputation": 162, "user_id": 4054306, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7671f6da7c1b27589f592fe1e08beddc?s=128&d=identicon&r=PG", "display_name": "Xavier Arias", "link": "https://stackoverflow.com/users/4054306/xavier-arias"}, "edited": false, "score": 2, "creation_date": 1567762917, "post_id": 51258077, "comment_id": 102069325, "body": "<code>val isThingInitialized: Boolean = ::thing.isInitialized</code> will always be false since is pre-calculated only once. You can make a function as in this solution, or make a lazy field: <code>val isThingInitialized: Boolean by lazy { ::thing.isInitialized }</code>"}, {"owner": {"reputation": 1343, "user_id": 9005383, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-rymLhVRbsIw/AAAAAAAAAAI/AAAAAAAAG20/cTAJhtYO4mY/photo.jpg?sz=128", "display_name": "Tamim Attafi", "link": "https://stackoverflow.com/users/9005383/tamim-attafi"}, "edited": false, "score": 0, "creation_date": 1571484371, "post_id": 51258077, "comment_id": 103261875, "body": "what if you don&#39;t have access to the super class?"}, {"owner": {"reputation": 1343, "user_id": 9005383, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-rymLhVRbsIw/AAAAAAAAAAI/AAAAAAAAG20/cTAJhtYO4mY/photo.jpg?sz=128", "display_name": "Tamim Attafi", "link": "https://stackoverflow.com/users/9005383/tamim-attafi"}, "reply_to_user": {"reputation": 2297, "user_id": 1726296, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q8mT7.jpg?s=128&g=1", "display_name": "Tejasvi Hegde", "link": "https://stackoverflow.com/users/1726296/tejasvi-hegde"}, "edited": false, "score": 0, "creation_date": 1571484488, "post_id": 51258077, "comment_id": 103261908, "body": "@TejasviHegde using a property can only be successful if you set up a getter to it."}], "tags": [], "owner": {"reputation": 3473, "user_id": 2740621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MpxtQ.png?s=128&g=1", "display_name": "AutonomousApps", "link": "https://stackoverflow.com/users/2740621/autonomousapps"}, "is_accepted": false, "score": 67, "last_activity_date": 1531202131, "creation_date": 1531202131, "answer_id": 51258077, "question_id": 47549015, "link": "https://stackoverflow.com/questions/47549015/isinitialized-backing-field-of-lateinit-var-is-not-accessible-at-this-point/51258077#51258077", "title": "isInitialized - Backing field of lateinit var is not accessible at this point", "body": "<p>A really simple workaround to the constraints described by the <a href=\"https://stackoverflow.com/a/49710377/2740621\">accepted answer</a> is the following:</p>\n\n<pre><code>class LateClass {\n    lateinit var thing: Thing\n    fun isThingInitialized() = ::thing.isInitialized\n}\n\nclass Client {\n    val lateClass = LateClass()\n    ... things happen ...\n    if (lateClass.isThingInitialized() {\n        // do stuff with lateClass.thing, safely\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1200, "user_id": 3702595, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/VIHEp.png?s=128&g=1", "display_name": "Sattar Hummatli", "link": "https://stackoverflow.com/users/3702595/sattar-hummatli"}, "is_accepted": false, "score": 5, "last_activity_date": 1598511879, "creation_date": 1598511879, "answer_id": 63610794, "question_id": 47549015, "link": "https://stackoverflow.com/questions/47549015/isinitialized-backing-field-of-lateinit-var-is-not-accessible-at-this-point/63610794#63610794", "title": "isInitialized - Backing field of lateinit var is not accessible at this point", "body": "<p>My version as a Kotlin property.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>class LateClass {\n    lateinit var thing: Thing\n    val isThingInitialized get() = this::thing.isInitialized \n}\n</code></pre>\n"}], "owner": {"reputation": 3281, "user_id": 6808319, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d9314641b8d5132a63d011fd051a199?s=128&d=identicon&r=PG&f=1", "display_name": "ElegyD", "link": "https://stackoverflow.com/users/6808319/elegyd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9498, "favorite_count": 3, "accepted_answer_id": 49710377, "answer_count": 3, "score": 52, "last_activity_date": 1598511879, "creation_date": 1511946953, "last_edit_date": 1511950718, "question_id": 47549015, "link": "https://stackoverflow.com/questions/47549015/isinitialized-backing-field-of-lateinit-var-is-not-accessible-at-this-point", "title": "isInitialized - Backing field of lateinit var is not accessible at this point", "body": "<p>I'm trying to check if a <code>lateinit</code> property has been initialized.<br>\nIn Kotlin 1.2 we now have the <code>isInitialized</code> method for that. It works when I do that in the class where the lateinit property is declared.\nBut when I try to call this from another class I get the following warning:  </p>\n\n<blockquote>\n  <p>Backing field of 'lateinit var foo: Bar' is not accessible at this point</p>\n</blockquote>\n\n<p>My model class (let's say <code>Person</code>) is written in Java<br>\nTwo other classes (let's say <code>Test1</code> and <code>Test2</code>) are written in Kotlin  </p>\n\n<p>Example:</p>\n\n<pre><code>class Test1 {\n    lateinit var person: Person\n\n    fun method() {\n        if (::person.isInitialized) {\n            // This works\n        }\n    }\n}\n</code></pre>\n\n<p>-</p>\n\n<pre><code>class Test2 {\n    lateinit var test1: Test1\n\n    fun method() {\n        if (test1::person.isInitialized) {\n            // Error\n        }\n    }\n}\n</code></pre>\n\n<p>Any chance to get this working?  </p>\n\n<p>My current workaround is to make a method in Test1 which returns <code>isInitialized</code> from the <code>person</code> property.  </p>\n\n<pre><code>fun isPersonInitialized(): Boolean = ::person.isInitialized\n\n//in Test2:\nif (test1.isPersonInitialized()) {\n    // Works\n}\n</code></pre>\n"}, {"tags": ["interface", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 7173, "user_id": 3753273, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/5135b28f6bb4bf11bc932641a0362fd4?s=128&d=identicon&r=PG&f=1", "display_name": "Android Developer", "link": "https://stackoverflow.com/users/3753273/android-developer"}, "edited": false, "score": 0, "creation_date": 1511944776, "post_id": 47547738, "comment_id": 82053181, "body": "thanks..how will i return the setted string from getter?"}, {"owner": {"reputation": 7173, "user_id": 3753273, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/5135b28f6bb4bf11bc932641a0362fd4?s=128&d=identicon&r=PG&f=1", "display_name": "Android Developer", "link": "https://stackoverflow.com/users/3753273/android-developer"}, "edited": false, "score": 0, "creation_date": 1511954292, "post_id": 47547738, "comment_id": 82059644, "body": "println(Child().propertyWithImplementation) gives output &quot;foo&quot;.Expected output &quot;foo foo&quot;"}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "reply_to_user": {"reputation": 7173, "user_id": 3753273, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/5135b28f6bb4bf11bc932641a0362fd4?s=128&d=identicon&r=PG&f=1", "display_name": "Android Developer", "link": "https://stackoverflow.com/users/3753273/android-developer"}, "edited": false, "score": 0, "creation_date": 1511955154, "post_id": 47547738, "comment_id": 82060171, "body": "In the example code? You&#39;ll only get <code>foo foo</code> after you <i>set</i> <code>propertyWithImplementation = &quot;foo&quot;</code>."}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "reply_to_user": {"reputation": 7173, "user_id": 3753273, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/5135b28f6bb4bf11bc932641a0362fd4?s=128&d=identicon&r=PG&f=1", "display_name": "Android Developer", "link": "https://stackoverflow.com/users/3753273/android-developer"}, "edited": false, "score": 0, "creation_date": 1511955198, "post_id": 47547738, "comment_id": 82060194, "body": "It seems that what you really want is to override the <i>getter</i>, not the setter. You should be able to figure out how."}], "tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": true, "score": 3, "last_activity_date": 1511945541, "last_edit_date": 1511945541, "creation_date": 1511942435, "answer_id": 47547738, "question_id": 47547505, "link": "https://stackoverflow.com/questions/47547505/setting-setter-of-an-interface-in-class-implementing-it/47547738#47547738", "title": "Setting setter of an interface in class implementing it", "body": "<p>You are <em>overriding</em> the <code>var</code>, not setting it, and not using the parent setter in the override, so it ends up not being used in any way. Setting it would look like e.g.</p>\n\n<pre><code>class Child : MyInterface {\n    override val prop: Int = 29\n    init {\n        propertyWithImplementation=\"bhu\"\n    }\n}\n</code></pre>\n\n<p>but if you do that the output will be <code>foo</code> because that's what the getter <em>always</em> returns. And the setter doesn't actually set anything, it just creates a string and ignores it.</p>\n\n<p>You don't have backing fields in an interface, so you'll need to store the value somewhere else, e.g. </p>\n\n<pre><code>interface MyInterface {\n    protected var backingProperty: String\n\n    var propertyWithImplementation: String\n        get() = backingProperty\n        set(text){ backingProperty = \"$text foo\" }\n}\n\nclass Child {\n    override var backingProperty = \"foo\"\n}\n</code></pre>\n\n<p>to fix this problem.</p>\n"}], "owner": {"reputation": 7173, "user_id": 3753273, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/5135b28f6bb4bf11bc932641a0362fd4?s=128&d=identicon&r=PG&f=1", "display_name": "Android Developer", "link": "https://stackoverflow.com/users/3753273/android-developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1111, "favorite_count": 0, "accepted_answer_id": 47547738, "answer_count": 1, "score": 0, "last_activity_date": 1511945541, "creation_date": 1511941524, "question_id": 47547505, "link": "https://stackoverflow.com/questions/47547505/setting-setter-of-an-interface-in-class-implementing-it", "title": "Setting setter of an interface in class implementing it", "body": "<p>Just begin with using kotlin in android-</p>\n\n<p>I am trying to use setter of an interface in a class implementing it-</p>\n\n<pre><code>interface MyInterface {\n    val prop: Int // abstract\n\nvar propertyWithImplementation: String\n    get() = \"foo\"\nset(text){\"$text foo\"}\n\nfun foo() {\n    print(prop)\n}\n\n}\n\nclass Child : MyInterface {\n    override val prop: Int = 29\n override var propertyWithImplementation=\"bhu\"\n\n}\nfun main(args: Array&lt;String&gt;) {\n    println(Child().propertyWithImplementation)\n}\n</code></pre>\n\n<p>Output:bhu</p>\n\n<p>Expected Output=bhu foo </p>\n\n<p>Where am i going wrong?</p>\n"}, {"tags": ["android", "sockets", "bluetooth", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 466, "user_id": 7780673, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a9465c6e30757980e2c2d710f824523a?s=128&d=identicon&r=PG", "display_name": "Mox_z", "link": "https://stackoverflow.com/users/7780673/mox-z"}, "edited": false, "score": 0, "creation_date": 1511947438, "post_id": 47548931, "comment_id": 82054828, "body": "is there any way for me to track the state of the connection? So that I can see when the connection is being closed? Something similar to isConnected maybe but for the connection status? Or any other way to find out where the connection is being closed?"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 466, "user_id": 7780673, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a9465c6e30757980e2c2d710f824523a?s=128&d=identicon&r=PG", "display_name": "Mox_z", "link": "https://stackoverflow.com/users/7780673/mox-z"}, "edited": false, "score": 0, "creation_date": 1511947595, "post_id": 47548931, "comment_id": 82054946, "body": "You&#39;ve already found it. An exception is thrown when you do I/O. Any <code>IOException</code> other than <code>SocketTimeoutException</code> is fatal to the connection."}, {"owner": {"reputation": 466, "user_id": 7780673, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a9465c6e30757980e2c2d710f824523a?s=128&d=identicon&r=PG", "display_name": "Mox_z", "link": "https://stackoverflow.com/users/7780673/mox-z"}, "edited": false, "score": 0, "creation_date": 1511947835, "post_id": 47548931, "comment_id": 82055114, "body": "so the connection is closing right there when that exception is thrown? But isn&#39;t the Exception occuring because the connection is closed?"}, {"owner": {"reputation": 466, "user_id": 7780673, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a9465c6e30757980e2c2d710f824523a?s=128&d=identicon&r=PG", "display_name": "Mox_z", "link": "https://stackoverflow.com/users/7780673/mox-z"}, "edited": false, "score": 0, "creation_date": 1511976370, "post_id": 47548931, "comment_id": 82074421, "body": "Please explain this to me. It would be very helpful."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 466, "user_id": 7780673, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a9465c6e30757980e2c2d710f824523a?s=128&d=identicon&r=PG", "display_name": "Mox_z", "link": "https://stackoverflow.com/users/7780673/mox-z"}, "edited": false, "score": 0, "creation_date": 1511993184, "post_id": 47548931, "comment_id": 82083107, "body": "If you&#39;re doing a send, the connection has already closed and been detected by the network, and it is reported to you next time you send. If you were blocking in a receive, the connection has just been dropped."}, {"owner": {"reputation": 466, "user_id": 7780673, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a9465c6e30757980e2c2d710f824523a?s=128&d=identicon&r=PG", "display_name": "Mox_z", "link": "https://stackoverflow.com/users/7780673/mox-z"}, "edited": false, "score": 0, "creation_date": 1512079564, "post_id": 47548931, "comment_id": 82124380, "body": "finally able to solve this thanks to your answer and some more research. combining my SendThread and ReceiveThread into one ConnectedThread with a continuous accept loop and Synchronized write function seemed to stop the connection being closed and still allow writing to the OutputStream."}], "tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": true, "score": 2, "last_activity_date": 1511946670, "creation_date": 1511946670, "answer_id": 47548931, "question_id": 47547445, "link": "https://stackoverflow.com/questions/47547445/if-isconnected-returns-true-why-does-exeption-say-that-it-isnt-connected/47548931#47548931", "title": "If isConnected returns true, why does Exeption say that it isn&#39;t connected?", "body": "<p><code>isConnected()</code> tells you about the state of the <code>Socket</code>. If you have ever connected or accepted it, it returns true. Even after you close it. It doesn't magically become false when the peer disconnects.</p>\n\n<p>The exception is telling you about the state of the <em>connection</em>.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 7652841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104fc1f4e0a1979c55013800d04b87b6?s=128&d=identicon&r=PG&f=1", "display_name": "Saleh hammudeh", "link": "https://stackoverflow.com/users/7652841/saleh-hammudeh"}, "is_accepted": false, "score": 1, "last_activity_date": 1595884135, "last_edit_date": 1595884135, "creation_date": 1595881709, "answer_id": 63123057, "question_id": 47547445, "link": "https://stackoverflow.com/questions/47547445/if-isconnected-returns-true-why-does-exeption-say-that-it-isnt-connected/63123057#63123057", "title": "If isConnected returns true, why does Exeption say that it isn&#39;t connected?", "body": "<p>I had the same problem\nI've used this code to solve this problem</p>\n<pre><code>socket.socket.IsConnected\n</code></pre>\n<p>The first <code>socket</code> is a variable socket to connect to server.</p>\n<p>The second <code>socket</code> is your server and you can get anything you want</p>\n<p>And <code>IsConnected</code> will inform you if you have connection with server or not</p>\n"}], "owner": {"reputation": 466, "user_id": 7780673, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a9465c6e30757980e2c2d710f824523a?s=128&d=identicon&r=PG", "display_name": "Mox_z", "link": "https://stackoverflow.com/users/7780673/mox-z"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 425, "favorite_count": 0, "accepted_answer_id": 47548931, "answer_count": 2, "score": 0, "last_activity_date": 1595884135, "creation_date": 1511941337, "question_id": 47547445, "link": "https://stackoverflow.com/questions/47547445/if-isconnected-returns-true-why-does-exeption-say-that-it-isnt-connected", "title": "If isConnected returns true, why does Exeption say that it isn&#39;t connected?", "body": "<p>I am writing an android app that is supposed to send a file over Bluetooth. for now i am just trying to send text. The sending device appears to send correctly and the receiving device is receiving a connection from the other device. The receiver is able to get a socket from the listening server socket and an input stream from that. My problem is that it is not able to read from the input stream. The part that really perplexes me is that the Exception that i get indicates that the related socket is closed, however Socket.isConnected() returns true both before attempting to read, and after the Exception occurs. How can this be possible? How can this code:</p>\n\n<pre><code>class ReceiveThread(val socket: BluetoothSocket):Thread() {\n\nvar count:Int = 0\nvar bytes:Int = 0\nval buffer:ByteArray = ByteArray(1024)\nval byteList = mutableListOf&lt;Byte&gt;()\nval inStream:InputStream\n\ninit {\n    inStream = socket.inputStream\n}\n\noverride fun run() {\n    BluetoothService.log(\"Begin ${BTS_Constants.THREAD_RECEIVE}\")\n    BluetoothService.log(\"preparing to read data (socket connected): ${socket.isConnected}\")\n    name = BTS_Constants.THREAD_RECEIVE\n\n    try {\n        bytes = inStream.read(buffer)\n    }catch (e:Exception){\n        BluetoothService.log(\"error reading from stream (socket connected):${socket.isConnected}\", e)\n        BluetoothService.state = BTS_Constants.STATE_NONE\n    }\n\n    if (byteList.size&gt;0) BluetoothService.log(\"data read: ${byteList.get(0) as Char}\") else BluetoothService.log(\"failed to get\")\n}\n\nfun cancel() = inStream.close()\n}\n</code></pre>\n\n<p>result in this log message:</p>\n\n<pre><code>11-28 23:23:33.958 25325-25534/com.example.zemcd.fileblue D/BluetoothService: Begin RECEIVE\n11-28 23:23:33.958 25325-25534/com.example.zemcd.fileblue D/BluetoothService: preparing to read data (socket connected): true\n11-28 23:23:34.035 25325-25534/com.example.zemcd.fileblue E/BluetoothService: error reading from stream (socket connected): true\n\njava.io.IOException: bt socket closed, read return: -1\n\nat android.bluetooth.BluetoothSocket.read(BluetoothSocket.java:588)\n\nat android.bluetooth.BluetoothInputStream.read(BluetoothInputStream.java:96)\n\nat java.io.InputStream.read(InputStream.java:101)\n\nat com.example.zemcd.fileblue.ReceiveThread.run(BluetoothService.kt:263)\n11-28 23:23:34.035 25325-25534/com.example.zemcd.fileblue D/BluetoothService: failed to get\n</code></pre>\n\n<p>If the socket is closed why is this returning true? How can i track down where my socket is closing? Please help me to understand this. </p>\n"}, {"tags": ["android", "kotlin", "dagger-2"], "answers": [{"comments": [{"owner": {"reputation": 2842, "user_id": 15206072, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCUbp260KwC6mozrQ-XhmkbymN7qfMzKniFSEQb8A=k-s128", "display_name": "Sumanth Jois", "link": "https://stackoverflow.com/users/15206072/sumanth-jois"}, "edited": false, "score": 0, "creation_date": 1511939881, "post_id": 47546848, "comment_id": 82050666, "body": "Hey I just added a Activity scope to MainActivityComponent and included subcomponents in AppModule but still I am getting a internal compiler error"}, {"owner": {"reputation": 395, "user_id": 5264772, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-97udj4nE7oA/AAAAAAAAAAI/AAAAAAAABB0/6q0gJDPyEr4/photo.jpg?sz=128", "display_name": "Abhishek Sinha", "link": "https://stackoverflow.com/users/5264772/abhishek-sinha"}, "reply_to_user": {"reputation": 2842, "user_id": 15206072, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCUbp260KwC6mozrQ-XhmkbymN7qfMzKniFSEQb8A=k-s128", "display_name": "Sumanth Jois", "link": "https://stackoverflow.com/users/15206072/sumanth-jois"}, "edited": false, "score": 0, "creation_date": 1511940628, "post_id": 47546848, "comment_id": 82051010, "body": "Did you also add <code>subcomponets</code> to Module as shown in the link?"}], "tags": [], "owner": {"reputation": 395, "user_id": 5264772, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-97udj4nE7oA/AAAAAAAAAAI/AAAAAAAABB0/6q0gJDPyEr4/photo.jpg?sz=128", "display_name": "Abhishek Sinha", "link": "https://stackoverflow.com/users/5264772/abhishek-sinha"}, "is_accepted": false, "score": 0, "last_activity_date": 1511938852, "creation_date": 1511938852, "answer_id": 47546848, "question_id": 47546574, "link": "https://stackoverflow.com/questions/47546574/android-internal-compiler-error-while-using-dagger-2-kotlin/47546848#47546848", "title": "Android: Internal Compiler error while using Dagger 2 (Kotlin)", "body": "<p>I can't really understand the error message as of now. There are two things that I can see which can make it go wrong here <BR>\n1) To add a subcomponent to a parent component, add the subcomponent class to the subcomponents attribute of a @Module that the parent component installs. Then the subcomponent\u2019s builder can be requested from within the parent <BR></p>\n\n<p><code>\n@Module(subcomponents = XYZ.class)\nclass AppModule(val app: Application){\n</code></p>\n\n<p>2) Also, you are providing the same scope to subcomponent and component which is not allowed unless there is no ambiguity in resolution. \nPlease read the documentation here at \n <a href=\"https://google.github.io/dagger/subcomponents.html\" rel=\"nofollow noreferrer\">https://google.github.io/dagger/subcomponents.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 650, "user_id": 236385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4aa3cd8cf9fc11a0142cb9b0efa695e?s=128&d=identicon&r=PG", "display_name": "Hai", "link": "https://stackoverflow.com/users/236385/hai"}, "is_accepted": false, "score": -1, "last_activity_date": 1511940318, "creation_date": 1511940318, "answer_id": 47547186, "question_id": 47546574, "link": "https://stackoverflow.com/questions/47546574/android-internal-compiler-error-while-using-dagger-2-kotlin/47547186#47547186", "title": "Android: Internal Compiler error while using Dagger 2 (Kotlin)", "body": "<p>Your error has nothing to do with Dagger, but with Android's data binding library. Are you using that? If not, remove it from your dependencies and try again?</p>\n"}], "owner": {"reputation": 2842, "user_id": 15206072, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCUbp260KwC6mozrQ-XhmkbymN7qfMzKniFSEQb8A=k-s128", "display_name": "Sumanth Jois", "link": "https://stackoverflow.com/users/15206072/sumanth-jois"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 316, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1511975032, "creation_date": 1511937748, "last_edit_date": 1511975032, "question_id": 47546574, "link": "https://stackoverflow.com/questions/47546574/android-internal-compiler-error-while-using-dagger-2-kotlin", "title": "Android: Internal Compiler error while using Dagger 2 (Kotlin)", "body": "<p>I am trying to use Dagger 2 in Android. Implementation is very straightforward. Below are dagger 2 related <code>Component</code>s and <code>Module</code>s:</p>\n\n<p><strong>ApplicationComponent.kt</strong></p>\n\n<pre><code>@Singleton\n@Component(modules = arrayOf(AppModule::class))\ninterface ApplicationComponent {\n    fun inject(app: Application)\n    fun inject(mainActivity: MainActivity)\n    fun plusMainAcitvityComponent(mainActivityModule: MainActivityModule): MainActivityComponent\n}\n</code></pre>\n\n<p><strong>MainActivityComponent.kt</strong></p>\n\n<pre><code>@Subcomponent(modules = arrayOf(MainActivityModule::class, GoogleApiClientModule::class))\ninterface MainActivityComponent{\n\n    fun inject(mainActivity: MainActivity)\n\n}\n</code></pre>\n\n<p><strong>AppModule.kt</strong></p>\n\n<pre><code>@Module\nclass AppModule(val app: Application){\n\n    @ApplicationContext\n    @Provides\n    fun providesApplicationContext() = app\n\n}\n</code></pre>\n\n<p><strong>GoogleApiClientModule.kt</strong></p>\n\n<pre><code>@Module\nclass GoogleApiClientModule{\n\n    companion object {\n        val TAG = \"GoogleApiClientModule\"\n    }\n\n    @Singleton\n    @Provides\n    fun providesGoogleApiClient(@ActivityContext activity: MainActivity, connectionFailedListener: OnConnectionFailedListener) =\n            GoogleApiClient.Builder(activity)\n                    .addApi(Places.GEO_DATA_API)\n                    .addApi(Places.PLACE_DETECTION_API)\n                    .enableAutoManage(activity, connectionFailedListener)\n                    .build()\n\n    @Singleton\n    @Provides\n    fun providesConnectionFailedListener() = OnConnectionFailedListener {\n        Log.d(TAG, \"GAC connection has failed\")\n    }\n\n}\n</code></pre>\n\n<p><strong>GooglePlacesClientModule.kt</strong></p>\n\n<pre><code>@Module\nclass GooglePlacesClientModule {\n\n    @Provides\n    fun providesGeoDataClient(@ActivityContext activity: MainActivity) = Places.getGeoDataClient(activity, null)\n\n}\n</code></pre>\n\n<p><strong>MainActivityModule.kt</strong></p>\n\n<pre><code>@Module\nclass MainActivityModule(val activity: MainActivity){\n\n    @ActivityContext\n    @Provides\n    fun providesActivityContext() = activity\n\n\n}\n</code></pre>\n\n<p>Below is my <strong>Main Activity</strong> where I am injecting the above components:</p>\n\n<pre><code> class MainActivity : AppCompatActivity(), OnMapReadyCallback {\n\n    lateinit var binding: ActivityMainBinding\n    lateinit var mapFragment: SupportMapFragment\n    @Inject lateinit var app: App\n    @Inject lateinit var mainViewModelFactory: MainViewModelFactory\n    lateinit var mainViewModel: MainViewModel\n\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        //Data binding\n        binding = DataBindingUtil.setContentView(this, R.layout.activity_main)\n        //Dagger inject\n        App.appComponent.inject(this)\n        app.plustMainAcitvityComponent(this)?.inject(this)\n        //Viewmodel init\n        mainViewModel = ViewModelProviders.of(this, mainViewModelFactory).get(MainViewModel::class.java)\n        //Ui init\n        setSupportActionBar(binding.toolbarLayout?.toolbar)\n        setupBottomSheetLayout()\n        setupGoogleMap()\n    }\n      ----\n     ---\n   }\n</code></pre>\n\n<p>Below is my <code>App</code> where Dagger is initialized:</p>\n\n<pre><code>class App: Application(){\n\n    var mainActivityComponent: MainActivityComponent? = null\n\n    companion object {\n        lateinit var appComponent: ApplicationComponent\n    }\n\n    override fun onCreate() {\n        super.onCreate()\n        setupDagger()\n    }\n\n    fun setupDagger(){\n        appComponent = DaggerApplicationComponent.builder().appModule(AppModule(this)).build()\n    }\n\n\n    fun plustMainAcitvityComponent(activity: MainActivity) : MainActivityComponent?{\n        if(mainActivityComponent == null) {\n            mainActivityComponent = appComponent.plusMainAcitvityComponent(MainActivityModule(activity))\n        }\n        return mainActivityComponent\n    }\n\n    fun clearMainActivityComponent(){\n        mainActivityComponent = null\n    }\n\n}\n</code></pre>\n\n<p>When I run the app I am getting a <strong>internal compiler error</strong>. Below are my IDE logs:</p>\n\n<blockquote>\n  <p>2017-11-29 11:54:39,953 [J pool 2/4]   WARN - hes.resolve.KotlinCacheService - Could not find correct module information.\n  Reason: Analyzing element of type class com.android.tools.idea.databinding.LightGeneratedComponentClass with no containing file\n  Text:\n  null \n  2017-11-29 11:54:39,953 [J pool 2/4]   WARN - .resolve.jvm.JvmAnalyzerFacade - Java referenced null from LibraryInfo(libraryName=com.android.databinding:library-1.3.1)\n  Referenced class was: JavaClassImpl: DATA binding component class</p>\n</blockquote>\n\n<p><strong>NOTE</strong>: MainActivityComponent is a SubComponent of ApplicationComponent. Even though ApplicationComponent has only one module at present, Further modules will be added in the future</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 800, "user_id": 5912570, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aNMw4Qrx4v8/AAAAAAAAAAI/AAAAAAAAB-4/lll-4_R7zdA/photo.jpg?sz=128", "display_name": "Harshad Prajapati", "link": "https://stackoverflow.com/users/5912570/harshad-prajapati"}, "edited": false, "score": 0, "creation_date": 1511937567, "post_id": 47546476, "comment_id": 82049633, "body": "i found one <a href=\"https://github.com/tylersuehr7/social-text-view\" rel=\"nofollow noreferrer\">library</a>.this may help you"}, {"owner": {"reputation": 577, "user_id": 4619977, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/fe2187a9cba2627a4ff29f745a6e1254?s=128&d=identicon&r=PG&f=1", "display_name": "Deepan", "link": "https://stackoverflow.com/users/4619977/deepan"}, "reply_to_user": {"reputation": 800, "user_id": 5912570, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aNMw4Qrx4v8/AAAAAAAAAAI/AAAAAAAAB-4/lll-4_R7zdA/photo.jpg?sz=128", "display_name": "Harshad Prajapati", "link": "https://stackoverflow.com/users/5912570/harshad-prajapati"}, "edited": false, "score": 0, "creation_date": 1511939756, "post_id": 47546476, "comment_id": 82050613, "body": "@HarshadPrajapati it didnt work with edittext. I am dealing with cursor positions too, so i need something to work with edittext. Thanks for the suggestion :)"}, {"owner": {"reputation": 2606, "user_id": 5230881, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-HG5fYGvbCUA/AAAAAAAAAAI/AAAAAAAAAGA/a6y-whXuXoY/photo.jpg?sz=128", "display_name": "Raja", "link": "https://stackoverflow.com/users/5230881/raja"}, "edited": false, "score": 0, "creation_date": 1511950062, "post_id": 47546476, "comment_id": 82056661, "body": "See my updated post it will help you.. its works fine to me.."}, {"owner": {"reputation": 698, "user_id": 2522797, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sMiSv.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/2522797/tas"}, "edited": false, "score": 0, "creation_date": 1565713844, "post_id": 47546476, "comment_id": 101435220, "body": "See my solution in kotlin for hashtag similarly you can do for mention; <a href=\"https://stackoverflow.com/a/57481803/2522797\">stackoverflow.com/a/57481803/2522797</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2606, "user_id": 5230881, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-HG5fYGvbCUA/AAAAAAAAAAI/AAAAAAAAAGA/a6y-whXuXoY/photo.jpg?sz=128", "display_name": "Raja", "link": "https://stackoverflow.com/users/5230881/raja"}, "reply_to_user": {"reputation": 577, "user_id": 4619977, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/fe2187a9cba2627a4ff29f745a6e1254?s=128&d=identicon&r=PG&f=1", "display_name": "Deepan", "link": "https://stackoverflow.com/users/4619977/deepan"}, "edited": false, "score": 0, "creation_date": 1511940014, "post_id": 47546851, "comment_id": 82050725, "body": "can you try with my sample input?"}], "tags": [], "owner": {"reputation": 2606, "user_id": 5230881, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-HG5fYGvbCUA/AAAAAAAAAAI/AAAAAAAAAGA/a6y-whXuXoY/photo.jpg?sz=128", "display_name": "Raja", "link": "https://stackoverflow.com/users/5230881/raja"}, "is_accepted": false, "score": 0, "last_activity_date": 1511950022, "last_edit_date": 1511950022, "creation_date": 1511938864, "answer_id": 47546851, "question_id": 47546476, "link": "https://stackoverflow.com/questions/47546476/android-edittext-color-change-for-mentions-and-hashtags-while-typing/47546851#47546851", "title": "Android edittext color change for @mentions and #hashtags while typing", "body": "<p>you have to try like this</p>\n\n<pre><code>  lateinit var content:EditText\n    private var intCount = 0\n    private var initialStringLength = 0\n    private var strText = \"\"\n\n    private fun initTextAreaView() {\n        content= findViewById(R.id.testText)\n        content.addTextChangedListener(object : TextWatcher {\n            override fun afterTextChanged(s: Editable?) {}\n            override fun beforeTextChanged(s: CharSequence?, start: Int, count: Int, after: Int) {}\n            override fun onTextChanged(s: CharSequence?, start: Int, before: Int, count: Int) {\n                val typedString = s.toString()\n                val stringArrayObj = typedString.split(\" \".toRegex()).dropLastWhile({ it.isEmpty() }).toTypedArray()\n                var cnt = 0\n                if (typedString.length != initialStringLength &amp;&amp; typedString.length != 0) {\n                    if (typedString.substring(typedString.length - 1) != \" \") {\n                        initialStringLength = typedString.length\n                        cnt = intCount\n                        for (i in stringArrayObj.indices)\n                            if (stringArrayObj[i].get(0) == '#' || stringArrayObj[i].get(0) == '@') {\n                                 strText = strText + \" \" + \"&lt;font color='#EE0000'&gt;\" + stringArrayObj[i] + \"&lt;/font&gt;\"\n                            }\n                            else\n                                strText = strText + \" \" + stringArrayObj[i]\n                    }\n                    if (intCount == cnt) {\n                        intCount = stringArrayObj.size\n                        content.setText(Html.fromHtml(strText))\n                        content.setSelection(content.getText().toString().length)\n                    }\n                } else {\n                    strText = \"\"\n                }\n\n            }\n        })\n    }\n</code></pre>\n"}], "owner": {"reputation": 577, "user_id": 4619977, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/fe2187a9cba2627a4ff29f745a6e1254?s=128&d=identicon&r=PG&f=1", "display_name": "Deepan", "link": "https://stackoverflow.com/users/4619977/deepan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 686, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1511950022, "creation_date": 1511937240, "last_edit_date": 1511939622, "question_id": 47546476, "link": "https://stackoverflow.com/questions/47546476/android-edittext-color-change-for-mentions-and-hashtags-while-typing", "title": "Android edittext color change for @mentions and #hashtags while typing", "body": "<p>I have a <code>edittext</code> and when the user types in it the color of <strong>@mentions</strong> and <strong>#hashtags</strong> should change. I have used <code>textwatcher</code> but it is laggy and it misses out some characters while typing. I would love to hear about alternatives.</p>\n\n<p>This is my code:    </p>\n\n<pre><code>var previousString = \"\"\n        override fun initTextAreaView() {\n            if(twitterAvailable &amp;&amp; twitterIsEnabled) CHARLIMIT = 280\n            if(!twitterIsEnabled &amp;&amp; linkedInAvailable &amp;&amp; linkedInIsEnabled) CHARLIMIT = 700\n            charcount.text = CHARLIMIT.toString()\n            content.addTextChangedListener(object : TextWatcher {\n                override fun afterTextChanged(s: Editable?) {}\n                override fun beforeTextChanged(s: CharSequence?, start: Int, count: Int, after: Int) {}\n                override fun onTextChanged(s: CharSequence?, start: Int, before: Int, count: Int) {\n                    if(s.toString()!=previousString)checkMentionsAndHashtags(s.toString())\n\n                }\n            })\n        }\n\n        var textSpanList: ArrayList&lt;TextSpan&gt; = ArrayList()\n        private fun checkMentionsAndHashtags(s: String) {\n            previousString = s\n            textSpanList = ArrayList()\n            val words = s.split(\" \")\n            for(word in words){\n                if(word.length&gt;0) {\n                    if (word[0] == '@' || word[0] == '#') {\n                        val n = s.lastIndexOf(word)\n                        textSpanList.add(TextSpan(n, (n+word.length)))\n                    }\n                }\n            }\n            changeTextColor(s, SpannableStringBuilder(s))\n        }\n\n        private fun changeTextColor(s: String = \"\", str: SpannableStringBuilder = SpannableStringBuilder(\"\")) {\n            Log.d(\"TEXTSPANS\", textSpanList.toString())\n            if(textSpanList.size&gt;0){\n                for(span in textSpanList) {\n                    str.setSpan(ForegroundColorSpan(resources.getColor(R.color.colorPrimary)), span.startPos, span.endPos, 0)\n                }\n            }\n            val cursorPos = content.selectionEnd\n            content.text = str\n            content.setSelection(cursorPos)\n        }\n</code></pre>\n"}, {"tags": ["arrays", "string", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 2606, "user_id": 5230881, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-HG5fYGvbCUA/AAAAAAAAAAI/AAAAAAAAAGA/a6y-whXuXoY/photo.jpg?sz=128", "display_name": "Raja", "link": "https://stackoverflow.com/users/5230881/raja"}, "is_accepted": true, "score": 16, "last_activity_date": 1511952928, "last_edit_date": 1511952928, "creation_date": 1511935712, "answer_id": 47546150, "question_id": 47546127, "link": "https://stackoverflow.com/questions/47546127/kotlin-how-to-convert-string-to-bytearray/47546150#47546150", "title": "Kotlin - How to convert String to ByteArray", "body": "<p>You do it like this:</p>\n\n<pre><code>val testVal = \"Good Morning\"\nval bytes = testVal.toByteArray()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5487, "user_id": 1143026, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/Na6LO.jpg?s=128&g=1", "display_name": "Kanaiya Katarmal", "link": "https://stackoverflow.com/users/1143026/kanaiya-katarmal"}, "is_accepted": false, "score": 6, "last_activity_date": 1511935776, "creation_date": 1511935776, "answer_id": 47546163, "question_id": 47546127, "link": "https://stackoverflow.com/questions/47546127/kotlin-how-to-convert-string-to-bytearray/47546163#47546163", "title": "Kotlin - How to convert String to ByteArray", "body": "<p>Use <code>String.toByteArray()</code> </p>\n\n<p>extension: <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/to-byte-array.html\" rel=\"noreferrer\">https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/to-byte-array.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 2556, "user_id": 5955784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c12dc4e9a11dbe06a656c4329fb68081?s=128&d=identicon&r=PG&f=1", "display_name": "Ankit Patidar", "link": "https://stackoverflow.com/users/5955784/ankit-patidar"}, "is_accepted": false, "score": 1, "last_activity_date": 1511952908, "last_edit_date": 1511952908, "creation_date": 1511938576, "answer_id": 47546785, "question_id": 47546127, "link": "https://stackoverflow.com/questions/47546127/kotlin-how-to-convert-string-to-bytearray/47546785#47546785", "title": "Kotlin - How to convert String to ByteArray", "body": "<p>Here is solution for this:</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        val checkString = \"Good Morning\"\n        val byteString = checkString.toByteArray()\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8346402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/464921ba1f0bf44d40a4a27153dc010f?s=128&d=identicon&r=PG&f=1", "display_name": "twechy", "link": "https://stackoverflow.com/users/8346402/twechy"}, "is_accepted": false, "score": 0, "last_activity_date": 1535964803, "creation_date": 1535964803, "answer_id": 52146295, "question_id": 47546127, "link": "https://stackoverflow.com/questions/47546127/kotlin-how-to-convert-string-to-bytearray/52146295#52146295", "title": "Kotlin - How to convert String to ByteArray", "body": "<p>you can use .toByteArray() function on a string and the compiler will convert it</p>\n"}, {"tags": [], "owner": {"reputation": 2031, "user_id": 1435543, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OJWi8.png?s=128&g=1", "display_name": "smac2020", "link": "https://stackoverflow.com/users/1435543/smac2020"}, "is_accepted": false, "score": 0, "last_activity_date": 1613594825, "creation_date": 1613594825, "answer_id": 66249710, "question_id": 47546127, "link": "https://stackoverflow.com/questions/47546127/kotlin-how-to-convert-string-to-bytearray/66249710#66249710", "title": "Kotlin - How to convert String to ByteArray", "body": "<p>You can use this too - JSON string:</p>\n<pre><code>val payLoad = &quot;{\\&quot;Hello \\&quot;:\\&quot;Paris\\&quot;,\\&quot;countryCode\\&quot;:\\&quot;FR\\&quot;}&quot;\nval byteArray = payLoad.encodeToByteArray()\n</code></pre>\n"}], "owner": {"reputation": 1575, "user_id": 2264402, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/KoiFW.jpg?s=128&g=1", "display_name": "Pradeep Bishnoi", "link": "https://stackoverflow.com/users/2264402/pradeep-bishnoi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7868, "favorite_count": 0, "accepted_answer_id": 47546150, "answer_count": 5, "score": 8, "last_activity_date": 1613594825, "creation_date": 1511935574, "last_edit_date": 1511952950, "question_id": 47546127, "link": "https://stackoverflow.com/questions/47546127/kotlin-how-to-convert-string-to-bytearray", "title": "Kotlin - How to convert String to ByteArray", "body": "<p>I am trying to convert <code>String</code> to <code>ByteArray</code> in Kotlin. </p>\n\n<p>In Java we can convert using <code>getBytes()</code> method.</p>\n"}, {"tags": ["android", "properties", "kotlin", "kotlin-interop"], "answers": [{"tags": [], "owner": {"reputation": 34292, "user_id": 627727, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/uOIWL.jpg?s=128&g=1", "display_name": "mkobit", "link": "https://stackoverflow.com/users/627727/mkobit"}, "is_accepted": true, "score": 3, "last_activity_date": 1511934295, "creation_date": 1511934295, "answer_id": 47545869, "question_id": 47545585, "link": "https://stackoverflow.com/questions/47545585/why-do-some-java-setter-methods-automatically-become-kotlin-properties-but-some/47545869#47545869", "title": "Why do some Java setter methods automatically become Kotlin properties but some don&#39;t?", "body": "<p>From the <a href=\"https://kotlinlang.org/docs/reference/java-interop.html#getters-and-setters\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n\n<blockquote>\n  <p><code>Boolean</code> accessor methods (where the name of the getter starts with <code>is</code> and the name of the setter starts with <code>set</code>) are represented as properties which have the same name as the getter method.</p>\n</blockquote>\n\n<p>And still as of Kotlin 1.2.0:</p>\n\n<blockquote>\n  <p>Note that, if the Java class only has a setter, it will not be visible as a property in Kotlin, because Kotlin does not support set-only properties at this time.</p>\n</blockquote>\n\n<p>There is no method in the Java class of signature <code>boolean isSupportMultipleWindows()</code> and <a href=\"https://developer.android.com/reference/android/webkit/WebSettings.html#supportMultipleWindows()\" rel=\"nofollow noreferrer\"><code>boolean supportMultipleWindows()</code></a> does not match the property representation in Kotlin.</p>\n"}], "owner": {"reputation": 64215, "user_id": 11238, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/BGDex.png?s=128&g=1", "display_name": "Randy Sugianto &#39;Yuku&#39;", "link": "https://stackoverflow.com/users/11238/randy-sugianto-yuku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 47545869, "answer_count": 1, "score": 1, "last_activity_date": 1511934328, "creation_date": 1511932857, "question_id": 47545585, "link": "https://stackoverflow.com/questions/47545585/why-do-some-java-setter-methods-automatically-become-kotlin-properties-but-some", "title": "Why do some Java setter methods automatically become Kotlin properties but some don&#39;t?", "body": "<p>e.g. this <a href=\"https://developer.android.com/reference/android/webkit/WebSettings.html\" rel=\"nofollow noreferrer\">WebSettings</a> Java class. </p>\n\n<p>It has a Java method <code>setJavaScriptEnabled(boolean)</code> that turns into a Kotlin property <code>javaScriptEnabled</code> as below, but there is also <code>setSupportZoom(boolean)</code> that does not turn into a Kotlin property <code>supportZoom</code>.</p>\n\n<pre><code>        settings.javaScriptEnabled = true\n        settings.domStorageEnabled = true\n        settings.setSupportZoom(false)\n        settings.builtInZoomControls = false\n        settings.setSupportMultipleWindows(true)\n</code></pre>\n"}, {"tags": ["java", "android", "kotlin", "observable", "rx-java2"], "owner": {"reputation": 365, "user_id": 3900210, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1c2ea656f87f465289d7fb2e3abd952f?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar", "link": "https://stackoverflow.com/users/3900210/sagar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 148, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1511939794, "creation_date": 1511931674, "last_edit_date": 1511939794, "question_id": 47545397, "link": "https://stackoverflow.com/questions/47545397/rxjava-handling-multiple-callbacks-inside-an-observable", "title": "RxJava handling multiple callbacks inside an observable", "body": "<p>I have an <code>Observable</code> which has multiple <em>callbacks</em> inside it. The first one fetches a list from the server and the second one is the item change callback which tells if an item in the list has changed. This is my current implementation:</p>\n\n<pre><code>Flowable.create({ emitter -&gt;\n        val offlineManager = OfflineManager.getInstance(context)\n\n        offlineManager.listOfflineRegions(object : OfflineManager.ListOfflineRegionsCallback {\n\n            override fun onList(offlineRegions: Array&lt;OfflineRegion&gt;) {\n                offlineRegionsFetch(offlineRegions, emitter)\n            }\n\n            override fun onError(error: String) {\n                emitter.onError(IllegalStateException(\"Saved offline regions read error\"))\n            }\n        })\n    }, BackpressureStrategy.BUFFER)\n\n   private fun offlineRegionsFetch(offlineRegionList: Array&lt;OfflineRegion&gt;, emitter: FlowableEmitter&lt;List&lt;OfflineMap&gt;&gt;) {\n\n    if (offlineRegionList.isNotEmpty()) {\n        val count = 0\n\n        val offlineMaps = offlineRegionList.map { OfflineMap(it.id.toString(), OfflineMapManager.getRegionName(it), 0L, OfflineMapStatus(FETCH)) } as ArrayList&lt;OfflineMap&gt;\n\n        offlineRegionList.forEachIndexed { index, offlineRegion -&gt;\n            offlineRegion.getStatus(object : com.mapbox.mapboxsdk.offline.OfflineRegion.OfflineRegionStatusCallback {\n\n                override fun onStatus(status: OfflineRegionStatus) {\n                    if (status.isComplete) {\n                        offlineMaps[index] = OfflineMap(offlineRegion.id.toString(), OfflineMapManager.getRegionName(offlineRegion), status.completedResourceSize, OfflineMapStatus(SUCCESS))\n                        count + 1\n                    } else if (status.downloadState == OfflineRegion.STATE_INACTIVE) {\n                        offlineMaps[index] = OfflineMap(offlineRegion.id.toString(), OfflineMapManager.getRegionName(offlineRegion), status.completedResourceSize, OfflineMapStatus(PAUSED))\n                        count + 1\n                    } else if (!status.isRequiredResourceCountPrecise) {\n                        offlineMaps[index] = OfflineMap(offlineRegion.id.toString(), OfflineMapManager.getRegionName(offlineRegion), 0L, OfflineMapStatus(DOWNLOAD_STARTED))\n                        count + 1\n                    } else if (!status.isComplete &amp;&amp; status.isRequiredResourceCountPrecise) {\n                        val percentage = 100.0 * status.completedResourceCount / status.requiredResourceCount\n                        offlineMaps[index] = OfflineMap(offlineRegion.id.toString(), OfflineMapManager.getRegionName(offlineRegion), status.completedResourceSize,\n                                OfflineMapStatus(PROGRESS, offlineRegion.id.toString(), Math.round(percentage)))\n                        count + 1\n                    }\n                }\n\n                override fun onError(error: String) {\n                    offlineMaps[index] = OfflineMap(offlineRegion.id.toString(), OfflineMapManager.getRegionName(offlineRegion), -1L,\n                            OfflineMapStatus(ERROR, offlineRegion.id.toString(), errorCode = errorMap(error), errorMsg = error))\n                    count + 1\n                }\n            })\n        }\n\n        if (count == offlineRegionList.size) {\n            emitter.onNext(offlineMaps)\n        }\n    } else {\n        emitter.onNext(listOf())\n    }\n}\n</code></pre>\n\n<p>The <code>onNext</code> here doesn't even happen as the status callback is async. How can I make it such that the <code>onNext</code> <strong>waits for the callback and then fires</strong>. Also its <code>n</code> number of status callbacks where <code>n</code> is the number of items in the list.</p>\n"}, {"tags": ["kotlin", "terminology"], "comments": [{"owner": {"reputation": 14830, "user_id": 3757232, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/kLzML.jpg?s=128&g=1", "display_name": "Jared Smith", "link": "https://stackoverflow.com/users/3757232/jared-smith"}, "edited": false, "score": 0, "creation_date": 1567862720, "post_id": 47543386, "comment_id": 102096915, "body": "Wow. Nice first question, and welcome to stack overflow!"}, {"owner": {"reputation": 5595, "user_id": 252080, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/73d28072b248c62daa400049d37e6812?s=128&d=identicon&r=PG", "display_name": "String", "link": "https://stackoverflow.com/users/252080/string"}, "edited": false, "score": 0, "creation_date": 1613576677, "post_id": 47543386, "comment_id": 117118424, "body": "I personally like <i>bang bang</i>. It&#39;s short and to the point: if you use this, things are liable to explode."}], "answers": [{"comments": [{"owner": {"reputation": 5491, "user_id": 1439771, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/egtxg.png?s=128&g=1", "display_name": "SimY4", "link": "https://stackoverflow.com/users/1439771/simy4"}, "edited": false, "score": 1, "creation_date": 1511918495, "post_id": 47543419, "comment_id": 82044201, "body": "I prefer <code>danger zone operator</code> :)"}], "tags": [], "owner": {"reputation": 26172, "user_id": 49746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IAAg.jpg?s=128&g=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/49746/todd"}, "is_accepted": false, "score": 14, "last_activity_date": 1568064289, "last_edit_date": 1568064289, "creation_date": 1511917257, "answer_id": 47543419, "question_id": 47543386, "link": "https://stackoverflow.com/questions/47543386/what-is-the-name-of-kotlins-operator/47543419#47543419", "title": "What is the name of Kotlin&#39;s !! operator", "body": "<p>The <a href=\"https://kotlinlang.org/docs/reference/null-safety.html#the--operator\" rel=\"noreferrer\">Kotlin documentation</a> refers to it as <code>the not-null assertion operator</code>.</p>\n\n<p>Personally, I call it the <code>hold my beer operator</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 10656, "user_id": 2399024, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JjSNR.jpg?s=128&g=1", "display_name": "donfuxx", "link": "https://stackoverflow.com/users/2399024/donfuxx"}, "is_accepted": false, "score": 2, "last_activity_date": 1511931060, "last_edit_date": 1511931060, "creation_date": 1511930623, "answer_id": 47545188, "question_id": 47543386, "link": "https://stackoverflow.com/questions/47543386/what-is-the-name-of-kotlins-operator/47545188#47545188", "title": "What is the name of Kotlin&#39;s !! operator", "body": "<p>I like to say <strong>\"non-null asserted call\"</strong> for things like</p>\n\n<pre><code>a!!.length\n</code></pre>\n\n<p>that is also how it is shown in the Android studio <kbd>ALT</kbd>+<kbd>ENTER</kbd> context menu.</p>\n\n<p>Makes sense to me because that sums up what it is actually doing.</p>\n"}, {"comments": [{"owner": {"reputation": 1805, "user_id": 7598113, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/afa022bfb89a6089383cb2f018438855?s=128&d=identicon&r=PG&f=1", "display_name": "kuza", "link": "https://stackoverflow.com/users/7598113/kuza"}, "edited": false, "score": 0, "creation_date": 1511963813, "post_id": 47545454, "comment_id": 82065702, "body": "AFAIK Kotlin compiler still wraps such statement to provide more verbose exception than just simple Java\u2019s NPE. It will be similar to NPE but will carry information like what class/method/code line was responsible for the NPE."}], "tags": [], "owner": {"reputation": 1104, "user_id": 2154011, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/u0iO8.jpg?s=128&g=1", "display_name": "Maxim Firsoff", "link": "https://stackoverflow.com/users/2154011/maxim-firsoff"}, "is_accepted": false, "score": 1, "last_activity_date": 1511932114, "creation_date": 1511932114, "answer_id": 47545454, "question_id": 47543386, "link": "https://stackoverflow.com/questions/47543386/what-is-the-name-of-kotlins-operator/47545454#47545454", "title": "What is the name of Kotlin&#39;s !! operator", "body": "<p>I'm using \"force-unwrapping\" (same as is in Swift).</p>\n"}, {"tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": false, "score": 4, "last_activity_date": 1511937782, "creation_date": 1511937782, "answer_id": 47546586, "question_id": 47543386, "link": "https://stackoverflow.com/questions/47543386/what-is-the-name-of-kotlins-operator/47546586#47546586", "title": "What is the name of Kotlin&#39;s !! operator", "body": "<p>I use to call it \"<strong>double bang</strong>\", but actually <code>hold my beer operator</code> does get to the heart of it too (thx @Todd ;-)).</p>\n"}, {"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": false, "score": 5, "last_activity_date": 1512037735, "creation_date": 1512037735, "answer_id": 47571169, "question_id": 47543386, "link": "https://stackoverflow.com/questions/47543386/what-is-the-name-of-kotlins-operator/47571169#47571169", "title": "What is the name of Kotlin&#39;s !! operator", "body": "<p>\"Kotlin in Action\" calls it the not-null assertion operator. We've decided to update the docs to use this term too.</p>\n"}], "owner": {"reputation": 89, "user_id": 8671785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f9252fa70353260fce764b60ed0ef1e?s=128&d=identicon&r=PG&f=1", "display_name": "Jon", "link": "https://stackoverflow.com/users/8671785/jon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2624, "favorite_count": 1, "answer_count": 5, "score": 8, "last_activity_date": 1568064289, "creation_date": 1511916982, "last_edit_date": 1567907767, "question_id": 47543386, "link": "https://stackoverflow.com/questions/47543386/what-is-the-name-of-kotlins-operator", "title": "What is the name of Kotlin&#39;s !! operator", "body": "<p>When in a conversation with other developers, what do I call the <code>!!</code> operator? </p>\n\n<p>In Kotlin, the <code>?:</code> is called the <strong>Elvis operator</strong></p>\n\n<p>These sources don't say what the name of <code>!!</code> is:</p>\n\n<ul>\n<li><a href=\"http://kotlinlang.org/docs/reference/null-safety.html#the--operator\" rel=\"nofollow noreferrer\">http://kotlinlang.org/docs/reference/null-safety.html#the--operator</a></li>\n<li><a href=\"http://kotlinlang.org/docs/reference/keyword-reference.html\" rel=\"nofollow noreferrer\">http://kotlinlang.org/docs/reference/keyword-reference.html</a></li>\n</ul>\n\n<p>Looking online, the generic term for <code>!!</code> is <strong>double bang</strong>. Do I use the same for Kotlin even though swift's <code>!</code> operator is called <strong>forced unwrapping</strong> (Note: the <code>!</code> in swift is similar to Kotlin's <code>!!</code>.)</p>\n\n<p>What I'm specifically looking for:</p>\n\n<ul>\n<li>A name that I can verbally call the <code>!!</code> operation that Kotlin developers can understand</li>\n<li>A name other than <strong>double exclamation</strong> or <strong>bang bang</strong> or <strong>double bang</strong></li>\n</ul>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 12695, "user_id": 11934042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4fd3e15c86ccfd8897e44bc97856fbe?s=128&d=identicon&r=PG", "display_name": "peterevans", "link": "https://stackoverflow.com/users/11934042/peterevans"}, "edited": false, "score": 0, "creation_date": 1591334143, "post_id": 47547401, "comment_id": 110021376, "body": "I missed <code>compile</code> -&gt; <code>implementation</code>. Thanks."}], "tags": [], "owner": {"reputation": 650, "user_id": 236385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4aa3cd8cf9fc11a0142cb9b0efa695e?s=128&d=identicon&r=PG", "display_name": "Hai", "link": "https://stackoverflow.com/users/236385/hai"}, "is_accepted": false, "score": 1, "last_activity_date": 1511941152, "creation_date": 1511941152, "answer_id": 47547401, "question_id": 47542735, "link": "https://stackoverflow.com/questions/47542735/error2-0-unable-to-find-method-org-gradle-api-internal-file-defaultsourcedi/47547401#47547401", "title": "Error:(2, 0) Unable to find method &#39;org.gradle.api.internal.file.DefaultSourceDirectorySet", "body": "<p>Try</p>\n\n<pre><code>./gradlew clean\n./gradlew assemble\n</code></pre>\n\n<p>And see if that helps? Also in your dependencies make sure to change <code>compile</code> to <code>implementation</code>, recommended as of Gradle 3</p>\n"}], "owner": {"reputation": 29, "user_id": 8625204, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8bf925bebc1b6d7d895624cc2fa0d75f?s=128&d=identicon&r=PG&f=1", "display_name": "joshua", "link": "https://stackoverflow.com/users/8625204/joshua"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2517, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1511941152, "creation_date": 1511912246, "last_edit_date": 1511914856, "question_id": 47542735, "link": "https://stackoverflow.com/questions/47542735/error2-0-unable-to-find-method-org-gradle-api-internal-file-defaultsourcedi", "title": "Error:(2, 0) Unable to find method &#39;org.gradle.api.internal.file.DefaultSourceDirectorySet", "body": "<p>I recently Upgrade My android studio to 3.0.1 When i try to create the new project i get the below error My code runs fine on older version i also upgrade the Gradle Plugin</p>\n\n<p><strong>Error</strong></p>\n\n<pre><code>Error:(2, 0) Unable to find method \n\n'org.gradle.api.internal.file.DefaultSourceDirectorySet.&lt;init&gt;(Ljava/lang/String;Lorg/gradle/api/internal/file/FileResolver;)V'. Possible causes for this unexpected error include:&lt;ul&gt;&lt;li&gt;Gradle's dependency cache may be corrupt (this sometimes occurs after a network connection timeout.) &lt;a href=\"syncProject\"&gt;Re-download dependencies and sync project (requires network)&lt;/a&gt;&lt;/li&gt;&lt;li&gt;The state of a Gradle build process (daemon) may be corrupt. Stopping all Gradle daemons may solve this problem. &lt;a href=\"stopGradleDaemons\"&gt;Stop Gradle build processes (requires restart)&lt;/a&gt;&lt;/li&gt;&lt;li&gt;Your project may be using a third-party plugin which is not compatible with the other plugins in the project or the version of Gradle requested by the project.&lt;/li&gt;&lt;/ul&gt;In the case of corrupt Gradle processes, you can also try closing the IDE and then killing all Java processes.\n</code></pre>\n\n<p><strong>Build Gradle File</strong></p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\n\nandroid {\n    compileSdkVersion 26\n    defaultConfig {\n        applicationId \"com.example.android.myapplication\"\n        minSdkVersion 22\n        targetSdkVersion 26\n        versionCode 1\n        versionName \"1.0\"\n        testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n}\n\ndependencies {\n\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation 'com.android.support:appcompat-v7:26.1.0'\n    implementation 'com.android.support.constraint:constraint-layout:1.0.2'\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'com.android.support.test:runner:1.0.1'\n    androidTestImplementation 'com.android.support.test.espresso:espresso-core:3.0.1'\n    compile 'com.android.support:cardview-v7:26.1.0'\n    compile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n}\nrepositories {\n    mavenCentral()\n}\n</code></pre>\n"}, {"tags": ["android", "date", "kotlin", "java.util.date"], "comments": [{"owner": {"reputation": 23192, "user_id": 2684, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Z9oZ0.jpg?s=128&g=1", "display_name": "Martin Marconcini", "link": "https://stackoverflow.com/users/2684/martin-marconcini"}, "edited": false, "score": 0, "creation_date": 1511910360, "post_id": 47542322, "comment_id": 82041969, "body": "<code>calling Calendar.getInstance() takes too much unnecessary work</code> care to describe what this unnecessary work is that you are looking to optimize it?"}, {"owner": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "edited": false, "score": 0, "creation_date": 1511965775, "post_id": 47542322, "comment_id": 82067051, "body": "In which time zone do you want this? Not asking because it makes a radical difference for the answer; just to point out that you need to decide."}, {"owner": {"reputation": 213390, "user_id": 642706, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/ZWEI3.jpg?s=128&g=1", "display_name": "Basil Bourque", "link": "https://stackoverflow.com/users/642706/basil-bourque"}, "edited": false, "score": 1, "creation_date": 1511973818, "post_id": 47542322, "comment_id": 82072855, "body": "This code uses troublesome old date-time classes now supplanted by the java.time classes. For older Java and Android, see the <i>ThreeTen-Backport</i> and <i>ThreeTenABP</i> projects."}], "answers": [{"comments": [{"owner": {"reputation": 2155, "user_id": 4201925, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh5.googleusercontent.com/-Cw6gTmQUnXk/AAAAAAAAAAI/AAAAAAAAAEc/vGwNsq3E5Aw/photo.jpg?sz=128", "display_name": "Valentin Baryshev", "link": "https://stackoverflow.com/users/4201925/valentin-baryshev"}, "edited": false, "score": 1, "creation_date": 1511910649, "post_id": 47542474, "comment_id": 82042074, "body": "I am using android. There is no java 8"}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "reply_to_user": {"reputation": 2155, "user_id": 4201925, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh5.googleusercontent.com/-Cw6gTmQUnXk/AAAAAAAAAAI/AAAAAAAAAEc/vGwNsq3E5Aw/photo.jpg?sz=128", "display_name": "Valentin Baryshev", "link": "https://stackoverflow.com/users/4201925/valentin-baryshev"}, "edited": false, "score": 2, "creation_date": 1511946150, "post_id": 47542474, "comment_id": 82053987, "body": "@ValentinBaryshev This package was finally added in API level 26: <a href=\"https://developer.android.com/reference/java/time/package-summary.html\" rel=\"nofollow noreferrer\">developer.android.com/reference/java/time/package-summary.ht&zwnj;&#8203;ml</a>. And for previous versions consider <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow noreferrer\">github.com/JakeWharton/ThreeTenABP</a>."}, {"owner": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "edited": false, "score": 1, "creation_date": 1511952634, "post_id": 47542474, "comment_id": 82058514, "body": "<code>Date.getMonth()</code> is unreliable across time zones. It was deprecated for a reason."}, {"owner": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "edited": false, "score": 0, "creation_date": 1511965659, "post_id": 47542474, "comment_id": 82066975, "body": "Using Java 8 (or ThreeTen Backport in Java 6 or 7) is a good idea. Feeding <code>Date.getTime()</code> into <code>LocalDate.ofEpochDay()</code> will give you the wrong result: the former gives milliseconds, the latter expects days."}], "tags": [], "owner": {"reputation": 299, "user_id": 8978587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ln6Kz.png?s=128&g=1", "display_name": "ShaharT", "link": "https://stackoverflow.com/users/8978587/shahart"}, "is_accepted": false, "score": 2, "last_activity_date": 1511910607, "creation_date": 1511910607, "answer_id": 47542474, "question_id": 47542322, "link": "https://stackoverflow.com/questions/47542322/fast-way-to-get-month-number-from-java-util-date/47542474#47542474", "title": "Fast way to get month number from java.util.Date", "body": "<p><code>Date.getMonth()</code> although deprecated is fine. Java keeps backward compatability. </p>\n\n<p>If using Java 8, you can do some benchmark of your version  <code>Calendar.getInstance().get(Calendar.MONTH)</code> vs the new <code>LocalDate.ofEpochDay(new Date().getTime()).getMonthValue()</code></p>\n"}, {"tags": [], "owner": {"reputation": 7234, "user_id": 1635726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d953b08802f5c84ae6dca2db9faf4f?s=128&d=identicon&r=PG", "display_name": "closure", "link": "https://stackoverflow.com/users/1635726/closure"}, "is_accepted": false, "score": 1, "last_activity_date": 1511935627, "creation_date": 1511935627, "answer_id": 47546137, "question_id": 47542322, "link": "https://stackoverflow.com/questions/47542322/fast-way-to-get-month-number-from-java-util-date/47546137#47546137", "title": "Fast way to get month number from java.util.Date", "body": "<p>It is not very clear, why is Calendar.getInstance() is sub optimal. However, for your requirement, how about coding it like this:</p>\n\n<pre><code>private fun getYearMonth(date: Date): Int {\n    val calendar = Calendar.getInstance()\n    calendar.time = date\n    return calendar.get(Calendar.YEAR) * 100 + calendar.get(Calendar.MONTH) \n}\n</code></pre>\n\n<p>Gives you access to yearMonth in single interger, like 201711</p>\n"}, {"tags": [], "owner": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "is_accepted": true, "score": 2, "last_activity_date": 1511970856, "creation_date": 1511970856, "answer_id": 47556797, "question_id": 47542322, "link": "https://stackoverflow.com/questions/47542322/fast-way-to-get-month-number-from-java-util-date/47556797#47556797", "title": "Fast way to get month number from java.util.Date", "body": "<h2><code>java.time</code></h2>\n\n<p><a href=\"https://stackoverflow.com/a/47542474/5772882\">ShaharT in an answer</a> already mentioned Java 8 as an option. Even on Android Java 7 I believe it\u2019s worth considering using <a href=\"https://docs.oracle.com/javase/tutorial/datetime/\" rel=\"nofollow noreferrer\">JSR-310, the modern Java date and time API also known as <code>java.time</code></a> for your task. It came out with Java 8, but you can use it too. It is generally much nicer to work with. It includes a class <code>YearMonth</code> for representing a year and a month, just what you need, and this saves you from using two functions and instantiating a <code>Calendar</code> object for each of those two method calls. So I wanted to show you the correct way to make that conversion.</p>\n\n<p>I am sorry that I cannot write Kotlin code. You will have to make do with Java code, and I trust you to adapt. The Java code is:</p>\n\n<pre><code>private ZoneId zone = ZoneId.of(\"Europe/Moscow\");\n\nprivate YearMonth yearMonthFromDate(Date date) {\n    ZonedDateTime dateTime = date.toInstant().atZone(zone);\n    return YearMonth.from(dateTime);\n}\n</code></pre>\n\n<p>Please insert your desired time zone if you didn\u2019t want Europe/Moscow.</p>\n\n<p>Now you are at it, if you go down this avenue, you may also want to consider whether you want <code>Date</code> objects in you app at all, or you prefer classes from JSR-310. The <code>Date</code> and <code>Calendar</code> classes are considered long outmoded.</p>\n\n<h2>Performance</h2>\n\n<p>On my Mac I ran 100 000 <code>Date</code> objects through the above method in 37 milliseconds. It may not be the same on an average Android device, but I\u2019m not convinced that you need to worry about how fast the conversion is. General rule of thumb is you shouldn\u2019t worry about it until you see a problem in a realistic setting. If not sure, then test in a realistic setting at your earliest convenience.</p>\n\n<h2>To use on Android</h2>\n\n<p>To use JSR-310 on Android you will need to have the ThreeTenABP (ABP for Android backport). It is all very well and thoroughly explained in <a href=\"https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project\">this question: How to use ThreeTenABP in Android Project</a>.</p>\n"}], "owner": {"reputation": 2155, "user_id": 4201925, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh5.googleusercontent.com/-Cw6gTmQUnXk/AAAAAAAAAAI/AAAAAAAAAEc/vGwNsq3E5Aw/photo.jpg?sz=128", "display_name": "Valentin Baryshev", "link": "https://stackoverflow.com/users/4201925/valentin-baryshev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5264, "favorite_count": 0, "accepted_answer_id": 47556797, "answer_count": 3, "score": 1, "last_activity_date": 1511970856, "creation_date": 1511909779, "last_edit_date": 1511910585, "question_id": 47542322, "link": "https://stackoverflow.com/questions/47542322/fast-way-to-get-month-number-from-java-util-date", "title": "Fast way to get month number from java.util.Date", "body": "<p>I have a recyclerview in my Android app with many dates. In order to sort data &amp; insert separators between items grouped by month+year, i use following funs:</p>\n\n<pre><code>private fun monthFromDate(date: Date): Int {\n    val calendar = Calendar.getInstance()\n    calendar.time = date\n    return calendar.get(Calendar.MONTH)\n}\n\nprivate fun yearFromDate(date: Date): Int {\n    val calendar = Calendar.getInstance()\n    calendar.time = date\n    return calendar.get(Calendar.YEAR)\n}\n</code></pre>\n\n<p>I think its bad idea always call Calendar.getInstance(). I don't want to introduce a local variable either. (btw all methods like date.month date.year are <em>deprecated</em>)</p>\n\n<p><strong>The question:</strong>\nI have two util.java.Date instances. Let them be equal if both month &amp; year are equal. How can I implement this fun in fast &amp; optimal way?</p>\n"}, {"tags": ["kotlin", "rx-java", "retrofit2", "rx-android"], "answers": [{"tags": [], "owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "is_accepted": true, "score": 4, "last_activity_date": 1511911519, "creation_date": 1511911519, "answer_id": 47542621, "question_id": 47540807, "link": "https://stackoverflow.com/questions/47540807/how-to-get-response-in-retrofit-while-using-rxandroid/47542621#47542621", "title": "how to get response in retrofit while using rxAndroid?", "body": "<p>Instead of <code>Single&lt;T&gt;</code>, have it return <code>Single&lt;Response&lt;T&gt;&gt;</code>.</p>\n"}], "owner": {"reputation": 2865, "user_id": 1865027, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/92b3e08891af2a97d6725e72c595373b?s=128&d=identicon&r=PG", "display_name": "user1865027", "link": "https://stackoverflow.com/users/1865027/user1865027"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 509, "favorite_count": 0, "accepted_answer_id": 47542621, "answer_count": 1, "score": 1, "last_activity_date": 1511911519, "creation_date": 1511902697, "question_id": 47540807, "link": "https://stackoverflow.com/questions/47540807/how-to-get-response-in-retrofit-while-using-rxandroid", "title": "how to get response in retrofit while using rxAndroid?", "body": "<p>I'm currently following this <a href=\"https://medium.com/@mtrax/rxandroid-2-with-retrofit-2-and-gson-3f08d4c2627d\" rel=\"nofollow noreferrer\">tutorial</a>. While I've successfully adopted rxAndroid to avoid the <code>Exception</code> caused by recycled view, I'm losing the <code>Response</code> object from retrofit. </p>\n\n<p>My original request was made by...</p>\n\n<pre><code>interface UserRepo {\n    @GET(\"user\")\n    fun get(): Call&lt;User&gt;\n}\n\n// then call it by\nuserRepo.get().enqueue(callback)\n</code></pre>\n\n<p>where <code>callback</code> would have the <code>Response</code> object, but after converting the above to...</p>\n\n<pre><code>interface UserRepo {\n    @GET(\"user\")\n    fun get(): Single&lt;User&gt;\n}\n\n// then call it by\nmCompositeDisposable.add(userRepo.get()\n                    .subscribeOn(Schedulers.io())\n                    .observeOn(AndroidSchedulers.mainThread())\n                    .subscribe(\n                            { success -&gt; \n                                // todo success \n                            },\n                            { error -&gt;\n                                // todo error\n                            }\n                    )\n            )\n</code></pre>\n\n<p>I basically don't have access to <code>Response</code> from callback. I do kinda need the status code. Any idea how?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["javascript", "html", "intellij-idea", "kotlin", "kotlin-js-interop"], "comments": [{"owner": {"reputation": 853, "user_id": 4005417, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5UX4Q.jpg?s=128&g=1", "display_name": "Anand Siddharth", "link": "https://stackoverflow.com/users/4005417/anand-siddharth"}, "edited": false, "score": 0, "creation_date": 1511899468, "post_id": 47539943, "comment_id": 82036989, "body": "are you asking the solution for javscript?? cause kotlin cannot be used in doing so in a webpage"}, {"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "reply_to_user": {"reputation": 853, "user_id": 4005417, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5UX4Q.jpg?s=128&g=1", "display_name": "Anand Siddharth", "link": "https://stackoverflow.com/users/4005417/anand-siddharth"}, "edited": false, "score": 0, "creation_date": 1511899708, "post_id": 47539943, "comment_id": 82037107, "body": "@AnandSiddharth Kotlin/JS is a valid compilation target - it would work."}, {"owner": {"reputation": 853, "user_id": 4005417, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5UX4Q.jpg?s=128&g=1", "display_name": "Anand Siddharth", "link": "https://stackoverflow.com/users/4005417/anand-siddharth"}, "reply_to_user": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1511900433, "post_id": 47539943, "comment_id": 82037508, "body": "This might work out :  In that html button set a onclick handler (as mentioned here <a href=\"https://kotlinlang.org/docs/reference/js-to-kotlin-interop.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/js-to-kotlin-interop.html</a>) you can call a Kotlin function which then executes this javscript  <code>document.getElementsByTagName(&#39;header&#39;).item(0).innerHTML = &#39;button clicked&#39;</code>. (as mentioned here <a href=\"https://kotlinlang.org/docs/reference/js-interop.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/js-interop.html</a>) @1blustone Thanks for letting me know about this kotlin stuff and Please mention if I am wrong any where in this comment"}, {"owner": {"reputation": 81, "user_id": 5731518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e39bcbcc0e48314caa0d85de431c06f8?s=128&d=identicon&r=PG&f=1", "display_name": "Black Boy", "link": "https://stackoverflow.com/users/5731518/black-boy"}, "reply_to_user": {"reputation": 853, "user_id": 4005417, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5UX4Q.jpg?s=128&g=1", "display_name": "Anand Siddharth", "link": "https://stackoverflow.com/users/4005417/anand-siddharth"}, "edited": false, "score": 0, "creation_date": 1512071054, "post_id": 47539943, "comment_id": 82120225, "body": "@AnandSiddharth Thanks for responding I tried a number things to get it work but can&#39;t seem to figured this out I created a gist of my code: <a href=\"https://gist.github.com/blackBoyCode/8aab3e8172b4c394f3e6da7b207dc002\" rel=\"nofollow noreferrer\">gist.github.com/blackBoyCode/8aab3e8172b4c394f3e6da7b207dc00&zwnj;&#8203;2</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2335, "user_id": 518491, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/anHUr.png?s=128&g=1", "display_name": "Andi", "link": "https://stackoverflow.com/users/518491/andi"}, "is_accepted": false, "score": 4, "last_activity_date": 1512565064, "last_edit_date": 1512565064, "creation_date": 1512564198, "answer_id": 47674590, "question_id": 47539943, "link": "https://stackoverflow.com/questions/47539943/how-to-make-button-click-listener-event-in-kotlin-javascript/47674590#47674590", "title": "How to make button click listener event in Kotlin/JavaScript?", "body": "<ol>\n<li>Create a Kotlin/JS project in IntelliJ, named \"JSProject\"</li>\n<li>Create an <code>index.html</code> file including a button with ID \"mybutton\"</li>\n<li>Create a Kotlin file <code>main.kt</code> with the following content:</li>\n</ol>\n\n\n\n<pre><code>import org.w3c.dom.HTMLButtonElement\nimport kotlin.browser.document\n\nfun main(args: Array&lt;String&gt;) {\n    val button = document.getElementById(\"mybutton\") as HTMLButtonElement\n    button.addEventListener(\"click\", {\n        document.title = \"button was clicked\"\n    })\n}\n</code></pre>\n\n\n\n<ol start=\"4\">\n<li>Import the Kotlin JS library and your code (JS compiled from Kotlin) in at the end of your HTML file:</li>\n</ol>\n\n\n\n<pre><code>       ...\n       &lt;script src=\"out/production/JSProject/lib/kotlin.js\"&gt;&lt;/script&gt;\n       &lt;script src=\"out/production/JSProject/JSProject.js\"&gt;&lt;/script&gt;\n    &lt;/body&gt;\n    &lt;/html&gt;\n</code></pre>\n\n\n\n<ol start=\"5\">\n<li><p>Compile your Kotlin code to JS (menu: Build | Rebuild Project)</p></li>\n<li><p>Open the <code>index.html</code> file in a web browser and click on the button. \"button was clicked\" appears in the title. </p></li>\n</ol>\n"}], "owner": {"reputation": 81, "user_id": 5731518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e39bcbcc0e48314caa0d85de431c06f8?s=128&d=identicon&r=PG&f=1", "display_name": "Black Boy", "link": "https://stackoverflow.com/users/5731518/black-boy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2340, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1512565064, "creation_date": 1511899195, "question_id": 47539943, "link": "https://stackoverflow.com/questions/47539943/how-to-make-button-click-listener-event-in-kotlin-javascript", "title": "How to make button click listener event in Kotlin/JavaScript?", "body": "<p>Inside IntellJ IDEA, I ve created a button in my HTML file with an id. What I'm trying to achieve is to change the  header tag to \"button clicked\" using kotlin.</p>\n\n<p>Upon searching the kolinlang.org website and others resources I have trouble finding simple reference for doing specific things I wonder if there a translated kotlin/javascript site where all of them is put together like this site for example: <a href=\"https://www.w3schools.com/js/default.asp\" rel=\"nofollow noreferrer\">https://www.w3schools.com/js/default.asp</a></p>\n\n<p>Thanks</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 6999715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f68ce656854024ee602518010db6d8c?s=128&d=identicon&r=PG", "display_name": "Hi Lo", "link": "https://stackoverflow.com/users/6999715/hi-lo"}, "edited": false, "score": 0, "creation_date": 1511892796, "post_id": 47538188, "comment_id": 82033464, "body": "Hi there, really I was looking at the general concept of returning a specific value from a lambda when the lambda handles multiple vars (in this case x &amp; t) using let allows me to do this but can it be done within the lambda itself without chaining?"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "reply_to_user": {"reputation": 123, "user_id": 6999715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f68ce656854024ee602518010db6d8c?s=128&d=identicon&r=PG", "display_name": "Hi Lo", "link": "https://stackoverflow.com/users/6999715/hi-lo"}, "edited": false, "score": 1, "creation_date": 1511893332, "post_id": 47538188, "comment_id": 82033732, "body": "@HiLo, I&#39;m not 100% sure what you&#39;re asking, but maybe you&#39;re looking for <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/reduce.html\" rel=\"nofollow noreferrer\"><code>reduce</code></a>, which is really a more general <code>sum</code>."}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1511895096, "post_id": 47538188, "comment_id": 82034623, "body": "You&#39;ll either have to chain calls or use an operator like <code>fold</code> or <code>reduce</code> - those are only available on a <code>List</code> though, not a <code>Map</code>.  I&#39;ve edited my answer with a solution using <code>fold</code> which looks more like your code, that operator might be what you&#39;re looking for."}, {"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1511902721, "post_id": 47538188, "comment_id": 82038764, "body": "I believe you could even destructure <code>pair</code> into <code>(_, value)</code>, perhaps this fits with Kotlin&#39;s functional features :)"}, {"owner": {"reputation": 650, "user_id": 236385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4aa3cd8cf9fc11a0142cb9b0efa695e?s=128&d=identicon&r=PG", "display_name": "Hai", "link": "https://stackoverflow.com/users/236385/hai"}, "reply_to_user": {"reputation": 123, "user_id": 6999715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f68ce656854024ee602518010db6d8c?s=128&d=identicon&r=PG", "display_name": "Hi Lo", "link": "https://stackoverflow.com/users/6999715/hi-lo"}, "edited": false, "score": 1, "creation_date": 1511941454, "post_id": 47538188, "comment_id": 82051465, "body": "@HiLo the concept you are talking about is <code>fold</code>. Read the second part of @zsmb13 &#39;s answer, he&#39;s right. The 0 replaces your t = 0 and acc is effectively your t. Also note that you can just do &#39;hm.values&#39; to get the values: <code>hm.values.fold(0)  { t, v -&gt; t + v}</code>"}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": false, "score": 4, "last_activity_date": 1511894861, "last_edit_date": 1511894861, "creation_date": 1511892390, "answer_id": 47538188, "question_id": 47538137, "link": "https://stackoverflow.com/questions/47538137/developing-lambda-expression/47538188#47538188", "title": "Developing lambda expression", "body": "<p>You can map your <code>HashMap</code> entries to their values to get a List of Ints, and then sum the values in that list:</p>\n\n<pre><code>hm.map { it.value }.sum()\n</code></pre>\n\n<p>If you have a <code>List</code> instead of a <code>Map</code>, you can also use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/fold.html\" rel=\"nofollow noreferrer\"><code>fold</code></a> or <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/reduce.html\" rel=\"nofollow noreferrer\"><code>reduce</code></a> to do similar things to your original code:</p>\n\n<pre><code>hm.toList().fold(0, { acc, pair -&gt; acc + pair.second })\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 6999715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f68ce656854024ee602518010db6d8c?s=128&d=identicon&r=PG", "display_name": "Hi Lo", "link": "https://stackoverflow.com/users/6999715/hi-lo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1511894861, "creation_date": 1511892167, "last_edit_date": 1511892679, "question_id": 47538137, "link": "https://stackoverflow.com/questions/47538137/developing-lambda-expression", "title": "Developing lambda expression", "body": "<pre><code>var t = 0\nfun sumIntMap(hm: HashMap&lt;Int,Int&gt;) = hm.forEach{ x -&gt; t+=x.value \n}.let { t }\n</code></pre>\n\n<p>Trying to sum a Hashmap Int values here with a function, I cannot seem to optimize it so that it requires not capturing and needing the temp var (t).</p>\n\n<p>How can I use temp vars in lambdas and return them? Is how I wrote it the only real way (using a let to return the temp var)?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["android", "kotlin", "anko"], "comments": [{"owner": {"reputation": 557, "user_id": 775362, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1b0d7604cc8b28c346bc108f1e0fea89?s=128&d=identicon&r=PG", "display_name": "Hawkings", "link": "https://stackoverflow.com/users/775362/hawkings"}, "edited": false, "score": 0, "creation_date": 1521158564, "post_id": 47537852, "comment_id": 85624273, "body": "you can try <code>margin = dip(40)</code>, it worked for me"}, {"owner": {"reputation": 2544, "user_id": 4030157, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/urP4E.png?s=128&g=1", "display_name": "eurosecom", "link": "https://stackoverflow.com/users/4030157/eurosecom"}, "reply_to_user": {"reputation": 557, "user_id": 775362, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1b0d7604cc8b28c346bc108f1e0fea89?s=128&d=identicon&r=PG", "display_name": "Hawkings", "link": "https://stackoverflow.com/users/775362/hawkings"}, "edited": false, "score": 0, "creation_date": 1521191709, "post_id": 47537852, "comment_id": 85635051, "body": "to @Hawkings I am sorry it does not work. It is the same result. Can you send me link to your ankocomponent, please ?"}, {"owner": {"reputation": 557, "user_id": 775362, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1b0d7604cc8b28c346bc108f1e0fea89?s=128&d=identicon&r=PG", "display_name": "Hawkings", "link": "https://stackoverflow.com/users/775362/hawkings"}, "edited": false, "score": 0, "creation_date": 1521499469, "post_id": 47537852, "comment_id": 85748447, "body": "I use it like this: <code>coordinatorLayout { verticalLayout { &#47;* the rest of the content goes here *&#47; } floatingActionButton().lparams { margin = dip(40) } }</code>"}], "answers": [{"tags": [], "owner": {"reputation": 86, "user_id": 8485264, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-96Cvok-ljT4/AAAAAAAAAAI/AAAAAAAAHOE/hDaNNsIgNnY/photo.jpg?sz=128", "display_name": "Duane", "link": "https://stackoverflow.com/users/8485264/duane"}, "is_accepted": false, "score": 0, "last_activity_date": 1551141880, "creation_date": 1551141880, "answer_id": 54876915, "question_id": 47537852, "link": "https://stackoverflow.com/questions/47537852/how-to-set-bottom-margin-to-fab-in-anko-dsl-layout/54876915#54876915", "title": "How to set bottom margin to FAB in Anko DSL layout?", "body": "<p>I think you are not setting the lparams correctly. The proper form is:</p>\n\n<pre><code>floatingActionButton {\n    imageResource = android.R.drawable.ic_input_add\n}.lparams{\n    rightMargin = dip(16)\n    bottomMargin = dip(16)\n    alignParentBottom()\n    alignParentRight()\n}\n</code></pre>\n"}], "owner": {"reputation": 2544, "user_id": 4030157, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/urP4E.png?s=128&g=1", "display_name": "eurosecom", "link": "https://stackoverflow.com/users/4030157/eurosecom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1000, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551141880, "creation_date": 1511891183, "last_edit_date": 1511891840, "question_id": 47537852, "link": "https://stackoverflow.com/questions/47537852/how-to-set-bottom-margin-to-fab-in-anko-dsl-layout", "title": "How to set bottom margin to FAB in Anko DSL layout?", "body": "<p>I use Anko DSL layout in my kotlin activity. I can not set bottom margin to FAB. Right margin work. </p>\n\n<p><a href=\"https://i.stack.imgur.com/iQwfg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iQwfg.png\" alt=\"enter image description here\"></a></p>\n\n<p>In my activity</p>\n\n<pre><code>override fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    (application as SamfantozziApp).dgaeacomponent().inject(this)\n\n    InvoiceListKtActivityUI(_rxBus).setContentView(this)\n\n}\n</code></pre>\n\n<p>My Anko DSL layout InvoiceListKtActivityUI.kt</p>\n\n<pre><code>class InvoiceListKtActivityUI (val _rxBus: RxBus): AnkoComponent&lt;InvoiceListKtActivity&gt;{\n\noverride fun createView(ui: AnkoContext&lt;InvoiceListKtActivity&gt;): View = with(ui){\n\n    return relativeLayout{\n        padding = dip(5)\n        lparams {\n            width = matchParent\n            height = wrapContent\n            margin = 5\n        }\n\n        verticalLayout{\n\n            tabLayout{\n                lparams {\n                width = matchParent\n                height = wrapContent\n                }\n                id = R.id.tabs\n\n            }\n\n            viewPager{\n                lparams {\n                width = matchParent\n                height = matchParent\n                }\n                id = R.id.container\n\n            }\n\n        }\n\n        floatingActionButton{\n            lparams {\n                width = wrapContent\n                height = wrapContent\n                rightMargin = 40   //works\n                bottomMargin = 40  //does not work\n                alignParentBottom()\n                alignParentRight()\n            }\n            imageResource = android.R.drawable.ic_input_add\n            id = R.id.fabinvoice\n            onClick{\n                _rxBus.send(InvoiceListFragment.ClickFobEvent())\n            }\n\n        }\n\n    }\n\n  }\n\n}\n</code></pre>\n"}, {"tags": ["spring-boot", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "is_accepted": false, "score": 2, "last_activity_date": 1511887649, "last_edit_date": 1511887649, "creation_date": 1511886875, "answer_id": 47536537, "question_id": 47536474, "link": "https://stackoverflow.com/questions/47536474/kotlin-springboot-application-why-no-function-with-expression-body/47536537#47536537", "title": "kotlin springboot application - why no function with expression body?", "body": "<pre><code>fun main(args: Array&lt;String&gt;) {\n   runApplication&lt;MyApplication&gt;(*args)\n}\n</code></pre>\n\n<p><code>main</code> returns <code>Unit</code> here implicitely which is correct.</p>\n\n<p>Here </p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) = runApplication&lt;RankedApplication&gt;(*args)\n</code></pre>\n\n<p>the return type is inferred from the given expression to something other than <code>Unit</code> (because <code>runApplication</code> returns something) which does not work because the main function has to return <code>Unit</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "is_accepted": true, "score": 5, "last_activity_date": 1511887586, "last_edit_date": 1511887586, "creation_date": 1511886888, "answer_id": 47536541, "question_id": 47536474, "link": "https://stackoverflow.com/questions/47536474/kotlin-springboot-application-why-no-function-with-expression-body/47536541#47536541", "title": "kotlin springboot application - why no function with expression body?", "body": "<p><code>runApplication</code> does not return <code>Unit</code>.</p>\n\n<p>The signature and return type of <code>main</code> <em>must</em> be exactly:</p>\n\n<pre><code>fun main(Array&lt;String&gt;): Unit\n</code></pre>\n\n<p><code>runApplication</code>, though, <a href=\"https://github.com/sdeleuze/spring-boot/blob/master/spring-boot-project/spring-boot/src/main/kotlin/org/springframework/boot/SpringApplicationExtensions.kt#L31\" rel=\"noreferrer\">returns a <code>ConfigurableApplicationContext</code></a>.</p>\n\n<p>Your \"main\" method is equivalent to:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;): ConfigurableApplicationContext {\n    return runApplication&lt;MyApplication&gt;(*args)\n}\n</code></pre>\n\n<p>since the return type is deduced from the expression - and you can see this is not a valid entry point.</p>\n\n<p>Your first method works because</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    runApplication&lt;MyApplication&gt;(*args)\n}\n</code></pre>\n\n<p>is the same as</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;): Unit {\n    runApplication&lt;MyApplication&gt;(*args)\n    return Unit\n}\n</code></pre>\n\n<p>since <code>Unit</code> (a singleton object) is the default return type when none is specified, and is implicitly returned at the end of a method declared to return <code>Unit</code>.</p>\n\n<p>This is also why <code>return</code> without an argument is valid - it just returns <code>Unit</code>.</p>\n\n<hr>\n\n<p>If you wanted to, you could make a method to convert things to <code>Unit</code> though this is probably overkill.</p>\n\n<pre><code>inline fun Unit(lambda: () -&gt; Any?) {\n    lambda()\n}\n\n...\n\nfun main(args: Array&lt;String&gt;) = Unit { runApplication&lt;MyApplication&gt;(*args) }\n</code></pre>\n\n<hr>\n\n<p><a href=\"https://stackoverflow.com/a/540486/7366707\">It's the same in Java</a>, which is likely where this requirement comes from - the main method's signature must be <code>public static void main(String[])</code>.</p>\n"}], "owner": {"reputation": 10456, "user_id": 290425, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/TnCaZ.jpg?s=128&g=1", "display_name": "Jan Galinski", "link": "https://stackoverflow.com/users/290425/jan-galinski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 583, "favorite_count": 0, "accepted_answer_id": 47536541, "answer_count": 2, "score": 1, "last_activity_date": 1512126817, "creation_date": 1511886686, "last_edit_date": 1512126817, "question_id": 47536474, "link": "https://stackoverflow.com/questions/47536474/kotlin-springboot-application-why-no-function-with-expression-body", "title": "kotlin springboot application - why no function with expression body?", "body": "<p>In my (2.0.0.M6) kotlin-spring boot app, everything works fine when I do </p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n   runApplication&lt;MyApplication&gt;(*args)\n}\n</code></pre>\n\n<p>but the mainClass can not be found and IDEA does not allow running the app when I do</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) = runApplication&lt;RankedApplication&gt;(*args)\n</code></pre>\n\n<p>this is not critical at all, but I wonder: why?</p>\n"}, {"tags": ["unit-testing", "testing", "intellij-idea", "kotlin", "corda"], "answers": [{"tags": [], "owner": {"reputation": 23867, "user_id": 4620025, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/hKFnG.jpg?s=128&g=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/4620025/joel"}, "is_accepted": true, "score": 2, "last_activity_date": 1511880720, "creation_date": 1511880720, "answer_id": 47534468, "question_id": 47534217, "link": "https://stackoverflow.com/questions/47534217/difference-between-various-verifysignatures-functions-in-corda-flow-unit-testing/47534468#47534468", "title": "Difference between various verifySignatures functions in Corda flow unit testing", "body": "<p><strong>verify</strong></p>\n\n<p><code>fun verify(services: ServiceHub, checkSufficientSignatures: Boolean = true)</code> verifies that the transaction is valid according to the contracts of its states.</p>\n\n<p>If <code>checkSufficientSignatures == true</code>, this function will also check that all the required signatures are present and valid.</p>\n\n<p><strong>verifyRequiredSignatures</strong></p>\n\n<p><code>fun verifyRequiredSignatures()</code> checks that all the required signatures are present and valid, but does <strong>not</strong> check whether the transaction is valid according to the contracts of its states.</p>\n\n<p><strong>verifySignaturesExcept</strong></p>\n\n<p><code>fun verifySignaturesExcept(vararg allowedToBeMissing: PublicKey)</code> checks that all the required signatures are present and valid, except for those listed as <code>allowedToBeMissing</code>. It does <strong>not</strong> check whether the transaction is valid according to the contracts of its states.</p>\n\n<p>This function is useful is you know that one or more required signatures have not yet been added (e.g. if you are a required signer, but you want to check the existing signatures before adding your own).</p>\n"}], "owner": {"reputation": 685, "user_id": 8344252, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/QmV0W.jpg?s=128&g=1", "display_name": "Stefano.Maffullo", "link": "https://stackoverflow.com/users/8344252/stefano-maffullo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 47534468, "answer_count": 1, "score": 0, "last_activity_date": 1511880720, "creation_date": 1511880026, "question_id": 47534217, "link": "https://stackoverflow.com/questions/47534217/difference-between-various-verifysignatures-functions-in-corda-flow-unit-testing", "title": "Difference between various verifySignatures functions in Corda flow unit testing", "body": "<p>What's the difference between those three methods in Corda flow unit testing?</p>\n\n<pre><code>ptx.verify(servicehub)\nptx.verifyRequiredSignatures()\nptx.verifySignaturesExcept(vararg allowedToBeMissed)\n</code></pre>\n\n<p>Because now I cannot use <code>ptx.verifySignatures()</code> as before and I have those three options!\nThanks</p>\n"}, {"tags": ["android", "kotlin", "google-fit"], "answers": [{"comments": [{"owner": {"reputation": 2201, "user_id": 708157, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/5257277ea1b93d915f31686831340c2e?s=128&d=identicon&r=PG", "display_name": "mars3142", "link": "https://stackoverflow.com/users/708157/mars3142"}, "edited": false, "score": 0, "creation_date": 1512116525, "post_id": 47585434, "comment_id": 82135623, "body": "Thanks for the long explanation. I also tried to debug it, but was not successful. You saved my day and now I have to find a solution to show the user anything."}, {"owner": {"reputation": 2201, "user_id": 708157, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/5257277ea1b93d915f31686831340c2e?s=128&d=identicon&r=PG", "display_name": "mars3142", "link": "https://stackoverflow.com/users/708157/mars3142"}, "edited": false, "score": 0, "creation_date": 1512133284, "post_id": 47585434, "comment_id": 82145120, "body": "I doubled checked your answer within the Google Fit app -&gt; &quot;Speed is too high - You can change distance or time&quot;. This seems to be an acceptable behaviour for such an exception."}], "tags": [], "owner": {"reputation": 2817, "user_id": 1963973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5364da37e0b8fcf0af75906ee36b84fd?s=128&d=identicon&r=PG", "display_name": "marianosimone", "link": "https://stackoverflow.com/users/1963973/marianosimone"}, "is_accepted": true, "score": 5, "last_activity_date": 1512092623, "creation_date": 1512092623, "answer_id": 47585434, "question_id": 47532849, "link": "https://stackoverflow.com/questions/47532849/add-google-fit-distance-datapoint-out-of-range/47585434#47585434", "title": "add Google Fit distance (DataPoint out of range)", "body": "<p><em>TL;DR: The code is OK, but you are trying to add a <code>DataPoint</code> that is (in the API's eyes) bogus: you can't go over 100 meters/second</em></p>\n\n<p>There are some internal validations in the API that check for limits on the input data, and throw an exceptions if the data doesn't comply.</p>\n\n<p>Some decompiled code that shows these limits (in particular, you are interested in <code>com.google.distance.delta</code>):</p>\n\n<pre><code>private zzbtw() {\n    HashMap var1;\n    (var1 = new HashMap()).put(\"latitude\", new zzbty(-90.0D, 90.0D, (zzbtx)null));\n    var1.put(\"longitude\", new zzbty(-180.0D, 180.0D, (zzbtx)null));\n    var1.put(\"accuracy\", new zzbty(0.0D, 10000.0D, (zzbtx)null));\n    var1.put(\"bpm\", new zzbty(0.0D, 1000.0D, (zzbtx)null));\n    var1.put(\"altitude\", new zzbty(-100000.0D, 100000.0D, (zzbtx)null));\n    var1.put(\"percentage\", new zzbty(0.0D, 100.0D, (zzbtx)null));\n    var1.put(\"confidence\", new zzbty(0.0D, 100.0D, (zzbtx)null));\n    var1.put(\"duration\", new zzbty(0.0D, 9.223372036854776E18D, (zzbtx)null));\n    var1.put(\"height\", new zzbty(0.0D, 3.0D, (zzbtx)null));\n    var1.put(\"weight\", new zzbty(0.0D, 1000.0D, (zzbtx)null));\n    var1.put(\"speed\", new zzbty(0.0D, 11000.0D, (zzbtx)null));\n    this.zzhbn = Collections.unmodifiableMap(var1);\n    HashMap var2;\n    (var2 = new HashMap()).put(\"com.google.step_count.delta\", zzc(\"steps\", new zzbty(0.0D, 1.0E-8D, (zzbtx)null)));\n    var2.put(\"com.google.calories.consumed\", zzc(\"calories\", new zzbty(0.0D, 1.0E-6D, (zzbtx)null)));\n    var2.put(\"com.google.calories.expended\", zzc(\"calories\", new zzbty(0.0D, 5.555555555555555E-10D, (zzbtx)null)));\n    var2.put(\"com.google.distance.delta\", zzc(\"distance\", new zzbty(0.0D, 1.0E-7D, (zzbtx)null)));\n    this.zzhbm = Collections.unmodifiableMap(var2);\n}\n</code></pre>\n\n<p>As the times are transformed from your time unit into nanoseconds (see <code>DataPoint.setTimeInterval</code>), you end up with 1e-7 (as you are coming from milliseconds), and </p>\n\n<p>Your data:</p>\n\n<ul>\n<li>Time delta: 80s -> 80000000000</li>\n<li>Distance delta: 12000mts</li>\n<li>Speed: 12000mts/80000000000ns -> 0.00000015mts/ns -> 1.5e-7</li>\n</ul>\n\n<p>Long story short: try 8000 and see it working, try 8001 and see it failing</p>\n\n<p>Unfortunately, I couldn't find any documentation about this, and had to debug step by step to get to this.</p>\n"}], "owner": {"reputation": 2201, "user_id": 708157, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/5257277ea1b93d915f31686831340c2e?s=128&d=identicon&r=PG", "display_name": "mars3142", "link": "https://stackoverflow.com/users/708157/mars3142"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1000, "favorite_count": 1, "accepted_answer_id": 47585434, "answer_count": 1, "score": 2, "last_activity_date": 1512092623, "creation_date": 1511875946, "last_edit_date": 1512025744, "question_id": 47532849, "link": "https://stackoverflow.com/questions/47532849/add-google-fit-distance-datapoint-out-of-range", "title": "add Google Fit distance (DataPoint out of range)", "body": "<p>My code</p>\n\n<pre><code>val startTime = 1510241100000 // 2017-11-09T15:25:00+00:00\nval endTime = 1510241180000   // 2017-11-09T15:26:20+00:00\nval distance = 12000.0f\n\nval distanceDataSource = DataSource.Builder()\n    .setAppPackageName(packageName)\n    .setDataType(DataType.AGGREGATE_DISTANCE_DELTA)\n    .setType(DataSource.TYPE_RAW)\n    .build()\nval distanceDataSet = DataSet.create(distanceDataSource)\nval distancePoint = distanceDataSet.createDataPoint()\n    .setTimeInterval(startTime, endTime, TimeUnit.MILLISECONDS)\ndistancePoint.getValue(Field.FIELD_DISTANCE).setFloat(distance)\n    distanceDataSet.add(distancePoint) // here is the crash\n</code></pre>\n\n<p>crashed with <strong>java.lang.IllegalArgumentException: DataPoint out of range</strong>, if the diff between <strong>startTime</strong> and <strong>endTime</strong> is less then 10 minutes. </p>\n\n<p>Has someone an idea, what is wrong with my code?</p>\n"}, {"tags": ["android", "if-statement", "kotlin"], "comments": [{"owner": {"reputation": 780, "user_id": 4724129, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HVtz3.jpg?s=128&g=1", "display_name": "Clement Osei Tano", "link": "https://stackoverflow.com/users/4724129/clement-osei-tano"}, "edited": false, "score": 0, "creation_date": 1511873854, "post_id": 47532111, "comment_id": 82020729, "body": "Almost every Turing Language - lol. C, C++, Java, C# etc"}], "answers": [{"tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": true, "score": 4, "last_activity_date": 1511874153, "last_edit_date": 1511874153, "creation_date": 1511873804, "answer_id": 47532174, "question_id": 47532111, "link": "https://stackoverflow.com/questions/47532111/naming-a-condition-if-value-for-use-in-if-block/47532174#47532174", "title": "Naming a condition if-value for use in if block", "body": "<p>In Kotlin, I'd recommend to use higher-order functions for creating such a temporary variable, like <code>let</code>:</p>\n\n<pre><code>this.substringBefore(\":\").let { myval -&gt;\n     if (myval.toInt() != 0) {\n         myval + \"h\"\n     } else \"\"\n}\n</code></pre>\n"}], "owner": {"reputation": 2124, "user_id": 6325119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10209015392040147/picture?type=large", "display_name": "Joel Brostr&#246;m", "link": "https://stackoverflow.com/users/6325119/joel-brostr%c3%b6m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 47532174, "answer_count": 1, "score": 0, "last_activity_date": 1511878252, "creation_date": 1511873590, "last_edit_date": 1511878252, "question_id": 47532111, "link": "https://stackoverflow.com/questions/47532111/naming-a-condition-if-value-for-use-in-if-block", "title": "Naming a condition if-value for use in if block", "body": "<p>To limit the amount of double code instances i would like to name my variables in if statement much like you do in for loops.</p>\n\n<p>My expression:</p>\n\n<pre><code>var hours = if (this.substringBefore(\":\").toInt() != 0) \n   {this.substringBefore(\":\") + \"h\" }\n   {else \"\"}\n</code></pre>\n\n<p>I want something like:</p>\n\n<pre><code>var hours = if (MY_VAR = this.substringBefore(\":\").toInt() != 0) \n   { MY_VAR + \"h\" }\n   else { \"\" }\n</code></pre>\n\n<p>I mainly write in kotlin, but I'm interested in finding other languages that does this.</p>\n"}, {"tags": ["android", "service", "kotlin", "android-notifications", "background-service"], "comments": [{"owner": {"reputation": 10570, "user_id": 2263683, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/BlUVe.png?s=128&g=1", "display_name": "Alex Jolig", "link": "https://stackoverflow.com/users/2263683/alex-jolig"}, "edited": false, "score": 1, "creation_date": 1552551223, "post_id": 47531742, "comment_id": 97054571, "body": "<a href=\"https://stackoverflow.com/a/46449975/2263683\">This answer</a> was my solution."}], "answers": [{"comments": [{"owner": {"reputation": 2445, "user_id": 2314881, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/wkopL.jpg?s=128&g=1", "display_name": "Amrut", "link": "https://stackoverflow.com/users/2314881/amrut"}, "edited": false, "score": 0, "creation_date": 1522918597, "post_id": 47533338, "comment_id": 86346198, "body": "Do we need to make these changes in case of JobIntentService? Or it is handling it internally?"}, {"owner": {"reputation": 2983, "user_id": 7767664, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/32630cb48af30367a74442b541b5f94a?s=128&d=identicon&r=PG&f=1", "display_name": "user924", "link": "https://stackoverflow.com/users/7767664/user924"}, "edited": false, "score": 2, "creation_date": 1525765993, "post_id": 47533338, "comment_id": 87474327, "body": "why not <code>IMPORTANCE_DEFAULT</code> instead of <code>IMPORTANCE_NONE</code>?"}, {"owner": {"reputation": 2983, "user_id": 7767664, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/32630cb48af30367a74442b541b5f94a?s=128&d=identicon&r=PG&f=1", "display_name": "user924", "link": "https://stackoverflow.com/users/7767664/user924"}, "reply_to_user": {"reputation": 1219, "user_id": 6243324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zH73q.png?s=128&g=1", "display_name": "Sub 6 Resources", "link": "https://stackoverflow.com/users/6243324/sub-6-resources"}, "edited": false, "score": 0, "creation_date": 1525766354, "post_id": 47533338, "comment_id": 87474520, "body": "@Sub6Resources well it&#39;s not that popular as swift (which is really replaces objective-c fast), kotlin is much older than swift (and so? did it replace java as swift did with objective-c?), but still isn&#39;t that popular and its rating on Tiobe index site is very low (swift rating is much higher)"}, {"owner": {"reputation": 1219, "user_id": 6243324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zH73q.png?s=128&g=1", "display_name": "Sub 6 Resources", "link": "https://stackoverflow.com/users/6243324/sub-6-resources"}, "reply_to_user": {"reputation": 2983, "user_id": 7767664, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/32630cb48af30367a74442b541b5f94a?s=128&d=identicon&r=PG&f=1", "display_name": "user924", "link": "https://stackoverflow.com/users/7767664/user924"}, "edited": false, "score": 1, "creation_date": 1526097818, "post_id": 47533338, "comment_id": 87621829, "body": "@user924 Kotlin is actually a newer language than Swift. Kotlin doesn&#39;t replace Java, it is just an alternative to Java for Android development. If you try it out, you&#39;ll see it is actually quite similar in syntax to Swift. I personally believe it is better than Java, despite what the Tiobe index says (the index is subject to a little bit of non-response bias). It fixes many of the issues that Java has, including the dreaded NullPointerException, verbosity, and several other things. According to the latest Google I/O, 95% of developers who use Kotlin for Android are happy with it."}, {"owner": {"reputation": 2983, "user_id": 7767664, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/32630cb48af30367a74442b541b5f94a?s=128&d=identicon&r=PG&f=1", "display_name": "user924", "link": "https://stackoverflow.com/users/7767664/user924"}, "reply_to_user": {"reputation": 1219, "user_id": 6243324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zH73q.png?s=128&g=1", "display_name": "Sub 6 Resources", "link": "https://stackoverflow.com/users/6243324/sub-6-resources"}, "edited": false, "score": 0, "creation_date": 1526150469, "post_id": 47533338, "comment_id": 87635009, "body": "@Sub6Resources one thing disappoints me, Kotlin can replace Java in Android at some point (Google does great job), but it&#39;s bad that we still have to deal with Oracle Java for JVM developing in other areas (not mobile, but desktop/server/embedded apps). But now we have two languages... Yeah I know that Kotlin/Swift are very similar, I don&#39;t know who plagiarises the most but Kotlin was released (First appeared\t2011) much sooner than Swift (First appeared 2014)"}, {"owner": {"reputation": 789, "user_id": 7429464, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87cbc78c40faa671dfd44f89cd58f287?s=128&d=identicon&r=PG&f=1", "display_name": "FindOutIslamNow", "link": "https://stackoverflow.com/users/7429464/findoutislamnow"}, "edited": false, "score": 0, "creation_date": 1527392359, "post_id": 47533338, "comment_id": 88108410, "body": "For me, the line <code>NotificationCompat.Builder(this, channelId )</code> produces error, since my min sdk is 14 while this constructor overload does not exist yet."}, {"owner": {"reputation": 928, "user_id": 7212836, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v7BHs.jpg?s=128&g=1", "display_name": "Evgenii Vorobei", "link": "https://stackoverflow.com/users/7212836/evgenii-vorobei"}, "edited": false, "score": 3, "creation_date": 1529835272, "post_id": 47533338, "comment_id": 89010612, "body": "This should be called from onCreate() of your service"}, {"owner": {"reputation": 118, "user_id": 1557305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f84e18e102345c79ebd2dac9f6a0d3d1?s=128&d=identicon&r=PG", "display_name": "Fahad", "link": "https://stackoverflow.com/users/1557305/fahad"}, "edited": false, "score": 0, "creation_date": 1533127785, "post_id": 47533338, "comment_id": 90231634, "body": "This is generating a notification in my status bar &quot; App name is running Tap for more info&quot; which is not cancelable. When I am giving channel in my notification. Any fix for that?"}, {"owner": {"reputation": 103440, "user_id": 6618622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z7q0p.jpg?s=128&g=1", "display_name": "CopsOnRoad", "link": "https://stackoverflow.com/users/6618622/copsonroad"}, "edited": false, "score": 0, "creation_date": 1537872232, "post_id": 47533338, "comment_id": 91932928, "body": "Unfortunately, this code fails in Android 9.0 (API 28)."}, {"owner": {"reputation": 10413, "user_id": 1724097, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c8d7280f1bbcfcca4a0989d6b86350e0?s=128&d=identicon&r=PG", "display_name": "Rawa", "link": "https://stackoverflow.com/users/1724097/rawa"}, "reply_to_user": {"reputation": 103440, "user_id": 6618622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z7q0p.jpg?s=128&g=1", "display_name": "CopsOnRoad", "link": "https://stackoverflow.com/users/6618622/copsonroad"}, "edited": false, "score": 0, "creation_date": 1537874672, "post_id": 47533338, "comment_id": 91934362, "body": "@CopsOnRoad In what way? I&#39;m currently using it my project targeting API 28."}, {"owner": {"reputation": 103440, "user_id": 6618622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z7q0p.jpg?s=128&g=1", "display_name": "CopsOnRoad", "link": "https://stackoverflow.com/users/6618622/copsonroad"}, "edited": false, "score": 0, "creation_date": 1537876334, "post_id": 47533338, "comment_id": 91935350, "body": "I am probably your well wisher because this will cause crashes (caused in my app too by many Pixel users who updated it to Android 9.0 and gave 1 star ratings). I found the solution of why. Please see my updated answer."}, {"owner": {"reputation": 10413, "user_id": 1724097, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c8d7280f1bbcfcca4a0989d6b86350e0?s=128&d=identicon&r=PG", "display_name": "Rawa", "link": "https://stackoverflow.com/users/1724097/rawa"}, "reply_to_user": {"reputation": 103440, "user_id": 6618622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z7q0p.jpg?s=128&g=1", "display_name": "CopsOnRoad", "link": "https://stackoverflow.com/users/6618622/copsonroad"}, "edited": false, "score": 0, "creation_date": 1537876932, "post_id": 47533338, "comment_id": 91935761, "body": "@CopsOnRoad I&#39;m not sure what you are doing in you app, but I&#39;ve a Google Pixel XL with 9.0 (And Google Pixel 2 XL) and it is working fine. Also tried with a Oneplus 6 with 9.0. Do you still have a requiresApi annotation?"}, {"owner": {"reputation": 103440, "user_id": 6618622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z7q0p.jpg?s=128&g=1", "display_name": "CopsOnRoad", "link": "https://stackoverflow.com/users/6618622/copsonroad"}, "edited": false, "score": 2, "creation_date": 1537877938, "post_id": 47533338, "comment_id": 91936441, "body": "@Rawa Well even I am not sure what you are doing with your Foreground service in the app because the Documentation doesn&#39;t lie. It clearly states, you will get SecurityException if you try to create foreground service without the permission in the manifest."}, {"owner": {"reputation": 10413, "user_id": 1724097, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c8d7280f1bbcfcca4a0989d6b86350e0?s=128&d=identicon&r=PG", "display_name": "Rawa", "link": "https://stackoverflow.com/users/1724097/rawa"}, "edited": false, "score": 0, "creation_date": 1537878396, "post_id": 47533338, "comment_id": 91936756, "body": "That is correct, this issue was a answer for Android 8.1 though. At that point the API for 9.0 wasn&#39;t set and the permission not required. Furthermore, you shouldn&#39;t get the same &quot;java.lang.RuntimeException: invalid channel for service notification&quot; runtime error for a permission error. I&#39;ll gladly update the response to help others though."}, {"owner": {"reputation": 867, "user_id": 3545042, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8c0a82873fc8c2f917f9fb87bf1acf98?s=128&d=identicon&r=PG&f=1", "display_name": "patel135", "link": "https://stackoverflow.com/users/3545042/patel135"}, "edited": false, "score": 0, "creation_date": 1542022874, "post_id": 47533338, "comment_id": 93407052, "body": "@Rawa How to do not show notification like App is running in the background?"}, {"owner": {"reputation": 10413, "user_id": 1724097, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c8d7280f1bbcfcca4a0989d6b86350e0?s=128&d=identicon&r=PG", "display_name": "Rawa", "link": "https://stackoverflow.com/users/1724097/rawa"}, "reply_to_user": {"reputation": 867, "user_id": 3545042, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8c0a82873fc8c2f917f9fb87bf1acf98?s=128&d=identicon&r=PG&f=1", "display_name": "patel135", "link": "https://stackoverflow.com/users/3545042/patel135"}, "edited": false, "score": 0, "creation_date": 1542028936, "post_id": 47533338, "comment_id": 93410281, "body": "@135 With a foreground service you can&#39;t, it needs to have a notification consistently not to be killed. These are new a restrictions from Oreo and newer, to ensure apps are not draining your battery."}, {"owner": {"reputation": 856, "user_id": 8251553, "user_type": "registered", "accept_rate": 10, "profile_image": "https://i.stack.imgur.com/WtiFP.jpg?s=128&g=1", "display_name": "Kapil soni", "link": "https://stackoverflow.com/users/8251553/kapil-soni"}, "edited": false, "score": 0, "creation_date": 1582344858, "post_id": 47533338, "comment_id": 106755300, "body": "@Rawa: sir i got above error in ionic3 can you tell me how to implement above code in ionic3?"}, {"owner": {"reputation": 2983, "user_id": 7767664, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/32630cb48af30367a74442b541b5f94a?s=128&d=identicon&r=PG&f=1", "display_name": "user924", "link": "https://stackoverflow.com/users/7767664/user924"}, "edited": false, "score": 0, "creation_date": 1611860214, "post_id": 47533338, "comment_id": 116593422, "body": "it won&#39;t help for many Huawei devices anyway"}], "tags": [], "owner": {"reputation": 10413, "user_id": 1724097, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c8d7280f1bbcfcca4a0989d6b86350e0?s=128&d=identicon&r=PG", "display_name": "Rawa", "link": "https://stackoverflow.com/users/1724097/rawa"}, "is_accepted": true, "score": 277, "last_activity_date": 1572421119, "last_edit_date": 1572421119, "creation_date": 1511877452, "answer_id": 47533338, "question_id": 47531742, "link": "https://stackoverflow.com/questions/47531742/startforeground-fail-after-upgrade-to-android-8-1/47533338#47533338", "title": "startForeground fail after upgrade to Android 8.1", "body": "<p>After some tinkering for a while with different solutions i found out that one must create a notification channel in Android 8.1 and above.</p>\n\n<pre><code>private fun startForeground() {\n    val channelId =\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n                createNotificationChannel(\"my_service\", \"My Background Service\")\n            } else {\n                // If earlier version channel ID is not used\n                // https://developer.android.com/reference/android/support/v4/app/NotificationCompat.Builder.html#NotificationCompat.Builder(android.content.Context)\n                \"\"\n            }\n\n    val notificationBuilder = NotificationCompat.Builder(this, channelId )\n    val notification = notificationBuilder.setOngoing(true)\n            .setSmallIcon(R.mipmap.ic_launcher)\n            .setPriority(PRIORITY_MIN)\n            .setCategory(Notification.CATEGORY_SERVICE)\n            .build()\n    startForeground(101, notification)\n}\n\n@RequiresApi(Build.VERSION_CODES.O)\nprivate fun createNotificationChannel(channelId: String, channelName: String): String{\n    val chan = NotificationChannel(channelId,\n            channelName, NotificationManager.IMPORTANCE_NONE)\n    chan.lightColor = Color.BLUE\n    chan.lockscreenVisibility = Notification.VISIBILITY_PRIVATE\n    val service = getSystemService(Context.NOTIFICATION_SERVICE) as NotificationManager\n    service.createNotificationChannel(chan)\n    return channelId\n}\n</code></pre>\n\n<p>From my understanding background services are now displayed as normal notifications that the user then can select to not show by deselecting the notification channel.</p>\n\n<p><strong>Update</strong>:\nAlso don't forget to add the foreground permission as required Android P:</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.FOREGROUND_SERVICE\" /&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15333, "user_id": 1617737, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/BSCrn.jpg?s=128&g=1", "display_name": "ban-geoengineering", "link": "https://stackoverflow.com/users/1617737/ban-geoengineering"}, "edited": false, "score": 2, "creation_date": 1516802578, "post_id": 47634345, "comment_id": 83838118, "body": "Part of the above code is now deprecated, which you can overcome by changing <code>Notification.Builder(getApplicationContext()).setChannelId(C&zwnj;&#8203;HANNEL_ONE_ID)...</code> to <code>Notification.Builder(getApplicationContext(), CHANNEL_ONE_ID)...</code>"}, {"owner": {"reputation": 11567, "user_id": 2533290, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/zp2v0.jpg?s=128&g=1", "display_name": "Martin Pfeffer", "link": "https://stackoverflow.com/users/2533290/martin-pfeffer"}, "reply_to_user": {"reputation": 15333, "user_id": 1617737, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/BSCrn.jpg?s=128&g=1", "display_name": "ban-geoengineering", "link": "https://stackoverflow.com/users/1617737/ban-geoengineering"}, "edited": false, "score": 1, "creation_date": 1518177773, "post_id": 47634345, "comment_id": 84409091, "body": "@ban-geoengineering you&#39;re absolutely right... I added new sample code. Thanks."}, {"owner": {"reputation": 2983, "user_id": 7767664, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/32630cb48af30367a74442b541b5f94a?s=128&d=identicon&r=PG&f=1", "display_name": "user924", "link": "https://stackoverflow.com/users/7767664/user924"}, "edited": false, "score": 0, "creation_date": 1525766032, "post_id": 47634345, "comment_id": 87474349, "body": "why <code>PRIORITY_MAX</code> what is better to use?"}], "tags": [], "owner": {"reputation": 11567, "user_id": 2533290, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/zp2v0.jpg?s=128&g=1", "display_name": "Martin Pfeffer", "link": "https://stackoverflow.com/users/2533290/martin-pfeffer"}, "is_accepted": false, "score": 17, "last_activity_date": 1525688212, "last_edit_date": 1525688212, "creation_date": 1512393647, "answer_id": 47634345, "question_id": 47531742, "link": "https://stackoverflow.com/questions/47531742/startforeground-fail-after-upgrade-to-android-8-1/47634345#47634345", "title": "startForeground fail after upgrade to Android 8.1", "body": "<p>Works properly on Andorid 8.1:</p>\n\n<p>Updated sample (without any deprecated code):</p>\n\n<pre><code>public NotificationBattery(Context context) {\n    this.mCtx = context;\n\n    mBuilder = new NotificationCompat.Builder(context, CHANNEL_ID)\n            .setContentTitle(context.getString(R.string.notification_title_battery))\n            .setSmallIcon(R.drawable.ic_launcher)\n            .setVisibility(NotificationCompat.VISIBILITY_PUBLIC)\n            .setChannelId(CHANNEL_ID)\n            .setOnlyAlertOnce(true)\n            .setPriority(NotificationCompat.PRIORITY_MAX)\n            .setWhen(System.currentTimeMillis() + 500)\n            .setGroup(GROUP)\n            .setOngoing(true);\n\n    mRemoteViews = new RemoteViews(context.getPackageName(), R.layout.notification_view_battery);\n\n    initBatteryNotificationIntent();\n\n    mBuilder.setContent(mRemoteViews);\n\n    mNotificationManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);\n\n    if (AesPrefs.getBooleanRes(R.string.SHOW_BATTERY_NOTIFICATION, true)) {\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n            NotificationChannel channel = new NotificationChannel(CHANNEL_ID, context.getString(R.string.notification_title_battery),\n                    NotificationManager.IMPORTANCE_DEFAULT);\n            channel.setShowBadge(false);\n            channel.setSound(null, null);\n            mNotificationManager.createNotificationChannel(channel);\n        }\n    } else {\n        mNotificationManager.cancel(Const.NOTIFICATION_CLIPBOARD);\n    }\n}\n</code></pre>\n\n<p>Old snipped (it's a different app - <strong>not</strong> related to the code above):</p>\n\n<pre><code>@Override\npublic int onStartCommand(Intent intent, int flags, final int startId) {\n    Log.d(TAG, \"onStartCommand\");\n\n    String CHANNEL_ONE_ID = \"com.kjtech.app.N1\";\n    String CHANNEL_ONE_NAME = \"Channel One\";\n    NotificationChannel notificationChannel = null;\n    if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.O) {\n        notificationChannel = new NotificationChannel(CHANNEL_ONE_ID,\n                CHANNEL_ONE_NAME, IMPORTANCE_HIGH);\n        notificationChannel.enableLights(true);\n        notificationChannel.setLightColor(Color.RED);\n        notificationChannel.setShowBadge(true);\n        notificationChannel.setLockscreenVisibility(Notification.VISIBILITY_PUBLIC);\n        NotificationManager manager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);\n        manager.createNotificationChannel(notificationChannel);\n    }\n\n    Bitmap icon = BitmapFactory.decodeResource(getResources(), R.mipmap.ic_launcher);\n    Notification notification = new Notification.Builder(getApplicationContext())\n            .setChannelId(CHANNEL_ONE_ID)\n            .setContentTitle(getString(R.string.obd_service_notification_title))\n            .setContentText(getString(R.string.service_notification_content))\n            .setSmallIcon(R.mipmap.ic_launcher)\n            .setLargeIcon(icon)\n            .build();\n\n    Intent notificationIntent = new Intent(getApplicationContext(), MainActivity.class);\n    notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);\n    notification.contentIntent = PendingIntent.getActivity(getApplicationContext(), 0, notificationIntent, 0);\n\n    startForeground(START_FOREGROUND_ID, notification);\n\n    return START_STICKY;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13996, "user_id": 279404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e086a970195a255844197d25575914b?s=128&d=identicon&r=PG", "display_name": "Timores", "link": "https://stackoverflow.com/users/279404/timores"}, "edited": false, "score": 2, "creation_date": 1531915768, "post_id": 48226341, "comment_id": 89774041, "body": "Should the constant NOTIFICATION_CHANNEL_ID_TASK (2nd line) be NOTIFICATION_CHANNEL_ID_INFO?"}, {"owner": {"reputation": 13508, "user_id": 3922207, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/ktCUi.jpg?s=128&g=1", "display_name": "Anggrayudi H", "link": "https://stackoverflow.com/users/3922207/anggrayudi-h"}, "reply_to_user": {"reputation": 13996, "user_id": 279404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e086a970195a255844197d25575914b?s=128&d=identicon&r=PG", "display_name": "Timores", "link": "https://stackoverflow.com/users/279404/timores"}, "edited": false, "score": 0, "creation_date": 1537612256, "post_id": 48226341, "comment_id": 91853927, "body": "@Timores, no. You can replace it with your own constant."}], "tags": [], "owner": {"reputation": 13508, "user_id": 3922207, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/ktCUi.jpg?s=128&g=1", "display_name": "Anggrayudi H", "link": "https://stackoverflow.com/users/3922207/anggrayudi-h"}, "is_accepted": false, "score": 8, "last_activity_date": 1515760197, "creation_date": 1515760197, "answer_id": 48226341, "question_id": 47531742, "link": "https://stackoverflow.com/questions/47531742/startforeground-fail-after-upgrade-to-android-8-1/48226341#48226341", "title": "startForeground fail after upgrade to Android 8.1", "body": "<p>In my case, it's because we tried to post a notification without specifying the <code>NotificationChannel</code>:</p>\n\n<pre><code>public static final String NOTIFICATION_CHANNEL_ID_SERVICE = \"com.mypackage.service\";\npublic static final String NOTIFICATION_CHANNEL_ID_TASK = \"com.mypackage.download_info\";\n\npublic void initChannel(){\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n        NotificationManager nm = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);\n        nm.createNotificationChannel(new NotificationChannel(NOTIFICATION_CHANNEL_ID_SERVICE, \"App Service\", NotificationManager.IMPORTANCE_DEFAULT));\n        nm.createNotificationChannel(new NotificationChannel(NOTIFICATION_CHANNEL_ID_INFO, \"Download Info\", NotificationManager.IMPORTANCE_DEFAULT));\n    }\n}\n</code></pre>\n\n<p>The best place to put above code is in <code>onCreate()</code> method in the <code>Application</code> class, so that we just need to declare it once for all:</p>\n\n<pre><code>public class App extends Application {\n\n    @Override\n    public void onCreate() {\n        super.onCreate();\n        initChannel();\n    }\n}\n</code></pre>\n\n<p>After we set this up, we can use notification with the <code>channelId</code> we just specified:</p>\n\n<pre><code>Intent i = new Intent(this, MainActivity.class);\ni.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);\nPendingIntent pi = PendingIntent.getActivity(this, 0, i, PendingIntent.FLAG_UPDATE_CURRENT);\nNotificationCompat.Builder builder = new NotificationCompat.Builder(this, NOTIFICATION_CHANNEL_ID_INFO);\n            .setContentIntent(pi)\n            .setWhen(System.currentTimeMillis())\n            .setContentTitle(\"VirtualBox.exe\")\n            .setContentText(\"Download completed\")\n            .setSmallIcon(R.mipmap.ic_launcher);\n</code></pre>\n\n<p>Then, we can use it to post a notification:</p>\n\n<pre><code>int notifId = 45;\nNotificationManager nm = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);\nnm.notify(notifId, builder.build());\n</code></pre>\n\n<p>If you want to use it as foreground service's notification:</p>\n\n<pre><code>startForeground(notifId, builder.build());\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 884, "user_id": 9924372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A9CJ4.jpg?s=128&g=1", "display_name": "Arjun", "link": "https://stackoverflow.com/users/9924372/arjun"}, "is_accepted": false, "score": 3, "last_activity_date": 1529958166, "last_edit_date": 1529958166, "creation_date": 1529952360, "answer_id": 51030038, "question_id": 47531742, "link": "https://stackoverflow.com/questions/47531742/startforeground-fail-after-upgrade-to-android-8-1/51030038#51030038", "title": "startForeground fail after upgrade to Android 8.1", "body": "<p>This worked for me. In my service class, I created the notification channel for android 8.1 as below:</p>\n\n<pre><code>public class Service extends Service {\n\n    public static final String NOTIFICATION_CHANNEL_ID_SERVICE = \"com.package.MyService\";\n    public static final String NOTIFICATION_CHANNEL_ID_INFO = \"com.package.download_info\";\n\n    @Override\n    public void onCreate() {\n\n        super.onCreate();\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n            NotificationManager nm = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);\n            nm.createNotificationChannel(new NotificationChannel(NOTIFICATION_CHANNEL_ID_SERVICE, \"App Service\", NotificationManager.IMPORTANCE_DEFAULT));\n            nm.createNotificationChannel(new NotificationChannel(NOTIFICATION_CHANNEL_ID_INFO, \"Download Info\", NotificationManager.IMPORTANCE_DEFAULT));\n        } else {\n            Notification notification = new Notification();\n            startForeground(1, notification);\n        }\n    }\n}\n</code></pre>\n\n<p>Note: Create the channel where you are creating the Notification for <code>Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O</code> </p>\n"}, {"comments": [{"owner": {"reputation": 1282, "user_id": 4298143, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ab8308e1a96d575b392a678e3927e432?s=128&d=identicon&r=PG&f=1", "display_name": "Cody", "link": "https://stackoverflow.com/users/4298143/cody"}, "edited": false, "score": 0, "creation_date": 1538684186, "post_id": 51281297, "comment_id": 92240403, "body": "Is there a reason for using a unique IDs in the two startForeground( ) calls? Can&#39;t they be the same here since its the same notification?"}, {"owner": {"reputation": 775, "user_id": 7382665, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/16f644a9822fd4517c202f10b1fead29?s=128&d=identicon&r=PG&f=1", "display_name": "Shruti", "link": "https://stackoverflow.com/users/7382665/shruti"}, "edited": false, "score": 0, "creation_date": 1539670192, "post_id": 51281297, "comment_id": 92574294, "body": "@CopsOnRoad so there&#39;s no need of notification channel for O?"}, {"owner": {"reputation": 103440, "user_id": 6618622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z7q0p.jpg?s=128&g=1", "display_name": "CopsOnRoad", "link": "https://stackoverflow.com/users/6618622/copsonroad"}, "reply_to_user": {"reputation": 775, "user_id": 7382665, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/16f644a9822fd4517c202f10b1fead29?s=128&d=identicon&r=PG&f=1", "display_name": "Shruti", "link": "https://stackoverflow.com/users/7382665/shruti"}, "edited": false, "score": 2, "creation_date": 1539670342, "post_id": 51281297, "comment_id": 92574366, "body": "@Shruti You need to add permission along with the code for Android 9.0. Both are needed."}, {"owner": {"reputation": 775, "user_id": 7382665, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/16f644a9822fd4517c202f10b1fead29?s=128&d=identicon&r=PG&f=1", "display_name": "Shruti", "link": "https://stackoverflow.com/users/7382665/shruti"}, "edited": false, "score": 0, "creation_date": 1539671832, "post_id": 51281297, "comment_id": 92575002, "body": "@CopsOnRoad Thanks, added that! But <code>if (Build.VERSION.SDK_INT &gt; Build.VERSION_CODES.O)</code> should be <code>if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O)</code> cause acc to doc: Starting in Android 8.0 (API level 26), all notifications must be assigned to a channel."}, {"owner": {"reputation": 775, "user_id": 7382665, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/16f644a9822fd4517c202f10b1fead29?s=128&d=identicon&r=PG&f=1", "display_name": "Shruti", "link": "https://stackoverflow.com/users/7382665/shruti"}, "edited": false, "score": 0, "creation_date": 1539671914, "post_id": 51281297, "comment_id": 92575043, "body": "@CopsOnRoad I am getting this exception for API level 26 and above(Oreo and Pie)"}, {"owner": {"reputation": 775, "user_id": 7382665, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/16f644a9822fd4517c202f10b1fead29?s=128&d=identicon&r=PG&f=1", "display_name": "Shruti", "link": "https://stackoverflow.com/users/7382665/shruti"}, "edited": false, "score": 2, "creation_date": 1539672694, "post_id": 51281297, "comment_id": 92575403, "body": "@CopsOnRoad This is the exception &#39;Fatal Exception: android.app.RemoteServiceException: Context.startForegroundService() did not then call Service.startForeground()&#39;"}, {"owner": {"reputation": 103440, "user_id": 6618622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z7q0p.jpg?s=128&g=1", "display_name": "CopsOnRoad", "link": "https://stackoverflow.com/users/6618622/copsonroad"}, "edited": false, "score": 0, "creation_date": 1539672748, "post_id": 51281297, "comment_id": 92575435, "body": "Could you please post the question separately, I will definitely help you."}, {"owner": {"reputation": 775, "user_id": 7382665, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/16f644a9822fd4517c202f10b1fead29?s=128&d=identicon&r=PG&f=1", "display_name": "Shruti", "link": "https://stackoverflow.com/users/7382665/shruti"}, "reply_to_user": {"reputation": 103440, "user_id": 6618622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z7q0p.jpg?s=128&g=1", "display_name": "CopsOnRoad", "link": "https://stackoverflow.com/users/6618622/copsonroad"}, "edited": false, "score": 0, "creation_date": 1539673087, "post_id": 51281297, "comment_id": 92575618, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/181925/discussion-between-shruti-and-copsonroad\">continue this discussion in chat</a>."}, {"owner": {"reputation": 103440, "user_id": 6618622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z7q0p.jpg?s=128&g=1", "display_name": "CopsOnRoad", "link": "https://stackoverflow.com/users/6618622/copsonroad"}, "reply_to_user": {"reputation": 2462, "user_id": 1800333, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/hNt5F.jpg?s=128&g=1", "display_name": "Sujith Manjavana", "link": "https://stackoverflow.com/users/1800333/sujith-manjavana"}, "edited": false, "score": 0, "creation_date": 1557844049, "post_id": 51281297, "comment_id": 98896483, "body": "@SujithManjavana it just saying that <code>manager</code> should not be <code>null</code>"}, {"owner": {"reputation": 3247, "user_id": 2068732, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/mMeD8.jpg?s=128&g=1", "display_name": "matdev", "link": "https://stackoverflow.com/users/2068732/matdev"}, "edited": false, "score": 2, "creation_date": 1561454806, "post_id": 51281297, "comment_id": 100059380, "body": "Is it possible to avoid displaying the notification while the service is running ?"}, {"owner": {"reputation": 21213, "user_id": 2826147, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/gbeN1.jpg?s=128&g=1", "display_name": "Amit Vaghela", "link": "https://stackoverflow.com/users/2826147/amit-vaghela"}, "edited": false, "score": 0, "creation_date": 1568290006, "post_id": 51281297, "comment_id": 102232617, "body": "sometimes it works without &lt;uses-permission android:name=&quot;android.permission.FOREGROUND_SERVICE&quot; /&gt;"}, {"owner": {"reputation": 103440, "user_id": 6618622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z7q0p.jpg?s=128&g=1", "display_name": "CopsOnRoad", "link": "https://stackoverflow.com/users/6618622/copsonroad"}, "reply_to_user": {"reputation": 21213, "user_id": 2826147, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/gbeN1.jpg?s=128&g=1", "display_name": "Amit Vaghela", "link": "https://stackoverflow.com/users/2826147/amit-vaghela"}, "edited": false, "score": 0, "creation_date": 1568301212, "post_id": 51281297, "comment_id": 102239278, "body": "@AmitVaghela It can only work if you have <code>targetSdkVersion</code> less than <code>28</code>."}, {"owner": {"reputation": 181, "user_id": 6852563, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52a5beffcf9e6668eb020a6ffbffd4a0?s=128&d=identicon&r=PG&f=1", "display_name": "Benoit Canonne", "link": "https://stackoverflow.com/users/6852563/benoit-canonne"}, "edited": false, "score": 0, "creation_date": 1571048772, "post_id": 51281297, "comment_id": 103098656, "body": "It&#39;s works, but i have a notification when the app start. How remove it ?"}, {"owner": {"reputation": 1361, "user_id": 9401556, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-t9VqZdwsXog/AAAAAAAAAAI/AAAAAAAAC-Y/OTSnBoAVw6I/photo.jpg?sz=128", "display_name": "Mohamad Mousheimish", "link": "https://stackoverflow.com/users/9401556/mohamad-mousheimish"}, "edited": false, "score": 0, "creation_date": 1587164867, "post_id": 51281297, "comment_id": 108411924, "body": "I have a simple question, let&#39;s say I want to do a specific code when my service is running. Where should I put this code? Like getting the location or something like that. After creating the <code>Notification</code> ?"}], "tags": [], "owner": {"reputation": 103440, "user_id": 6618622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z7q0p.jpg?s=128&g=1", "display_name": "CopsOnRoad", "link": "https://stackoverflow.com/users/6618622/copsonroad"}, "is_accepted": false, "score": 157, "last_activity_date": 1544885186, "last_edit_date": 1544885186, "creation_date": 1531299540, "answer_id": 51281297, "question_id": 47531742, "link": "https://stackoverflow.com/questions/47531742/startforeground-fail-after-upgrade-to-android-8-1/51281297#51281297", "title": "startForeground fail after upgrade to Android 8.1", "body": "<h3>Java Solution (Android 9.0, API 28)</h3>\n\n<p>In your <code>Service</code> class, add this:</p>\n\n<pre><code>@Override\npublic void onCreate(){\n    super.onCreate();\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O)\n        startMyOwnForeground();\n    else\n        startForeground(1, new Notification());\n}\n\nprivate void startMyOwnForeground(){\n    String NOTIFICATION_CHANNEL_ID = \"com.example.simpleapp\";\n    String channelName = \"My Background Service\";\n    NotificationChannel chan = new NotificationChannel(NOTIFICATION_CHANNEL_ID, channelName, NotificationManager.IMPORTANCE_NONE);\n    chan.setLightColor(Color.BLUE);\n    chan.setLockscreenVisibility(Notification.VISIBILITY_PRIVATE);\n    NotificationManager manager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);\n    assert manager != null;\n    manager.createNotificationChannel(chan);\n\n    NotificationCompat.Builder notificationBuilder = new NotificationCompat.Builder(this, NOTIFICATION_CHANNEL_ID);\n    Notification notification = notificationBuilder.setOngoing(true)\n            .setSmallIcon(R.drawable.icon_1)\n            .setContentTitle(\"App is running in background\")\n            .setPriority(NotificationManager.IMPORTANCE_MIN)\n            .setCategory(Notification.CATEGORY_SERVICE)\n            .build();\n    startForeground(2, notification);\n}\n</code></pre>\n\n<p><strong>UPDATE: ANDROID 9.0 PIE (API 28)</strong></p>\n\n<p>Add this permission to your <code>AndroidManifest.xml</code> file:</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.FOREGROUND_SERVICE\" /&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5517, "user_id": 6211703, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a45e104f225460fb1ea5d2562fefacaf?s=128&d=identicon&r=PG", "display_name": "Ray Li", "link": "https://stackoverflow.com/users/6211703/ray-li"}, "edited": false, "score": 0, "creation_date": 1554838507, "post_id": 51349999, "comment_id": 97896250, "body": "Thanks for translating the code to Java. It&#39;s a big help for Java projects!"}, {"owner": {"reputation": 83, "user_id": 10081260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5317a375b2686c868ddc76f72a68c56?s=128&d=identicon&r=PG&f=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/10081260/john-smith"}, "edited": false, "score": 0, "creation_date": 1613245925, "post_id": 51349999, "comment_id": 117018626, "body": "Thank you so much. This code working in android 8.1. But not working in android 11. Is there any updates? Please....."}], "tags": [], "owner": {"reputation": 1877, "user_id": 5727285, "user_type": "registered", "accept_rate": 19, "profile_image": "https://i.stack.imgur.com/AwYFr.jpg?s=128&g=1", "display_name": "Hamza", "link": "https://stackoverflow.com/users/5727285/hamza"}, "is_accepted": false, "score": 32, "last_activity_date": 1542359963, "last_edit_date": 1542359963, "creation_date": 1531670646, "answer_id": 51349999, "question_id": 47531742, "link": "https://stackoverflow.com/questions/47531742/startforeground-fail-after-upgrade-to-android-8-1/51349999#51349999", "title": "startForeground fail after upgrade to Android 8.1", "body": "<p>The first answer is great only for those people who know kotlin, for those who still using java here I translate the first answer</p>\n\n<pre><code> public Notification getNotification() {\n        String channel;\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O)\n            channel = createChannel();\n        else {\n            channel = \"\";\n        }\n        NotificationCompat.Builder mBuilder = new NotificationCompat.Builder(this, channel).setSmallIcon(android.R.drawable.ic_menu_mylocation).setContentTitle(\"snap map fake location\");\n        Notification notification = mBuilder\n                .setPriority(PRIORITY_LOW)\n                .setCategory(Notification.CATEGORY_SERVICE)\n                .build();\n\n\n        return notification;\n    }\n\n    @NonNull\n    @TargetApi(26)\n    private synchronized String createChannel() {\n        NotificationManager mNotificationManager = (NotificationManager) this.getSystemService(Context.NOTIFICATION_SERVICE);\n\n        String name = \"snap map fake location \";\n        int importance = NotificationManager.IMPORTANCE_LOW;\n\n        NotificationChannel mChannel = new NotificationChannel(\"snap map channel\", name, importance);\n\n        mChannel.enableLights(true);\n        mChannel.setLightColor(Color.BLUE);\n        if (mNotificationManager != null) {\n            mNotificationManager.createNotificationChannel(mChannel);\n        } else {\n            stopSelf();\n        }\n        return \"snap map channel\";\n    } \n</code></pre>\n\n<p>For android, P don't forget to include this permission </p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.FOREGROUND_SERVICE\" /&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 103440, "user_id": 6618622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z7q0p.jpg?s=128&g=1", "display_name": "CopsOnRoad", "link": "https://stackoverflow.com/users/6618622/copsonroad"}, "edited": false, "score": 0, "creation_date": 1554317005, "post_id": 54012579, "comment_id": 97710710, "body": "Can you please clarify what changes you have made in this code, I didn&#39;t get this."}, {"owner": {"reputation": 190, "user_id": 4574300, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/78gI4.jpg?s=128&g=1", "display_name": "Thamarai T", "link": "https://stackoverflow.com/users/4574300/thamarai-t"}, "edited": false, "score": 0, "creation_date": 1554804548, "post_id": 54012579, "comment_id": 97877291, "body": "Versions 8.0 and Android Pie works perfectly. But why do we need Notification channel for version 8.1 only?"}], "tags": [], "owner": {"reputation": 354, "user_id": 1410759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/337049ef7442bb761f983f8f9b3a5558?s=128&d=identicon&r=PG", "display_name": "MobileMateo", "link": "https://stackoverflow.com/users/1410759/mobilemateo"}, "is_accepted": false, "score": 6, "last_activity_date": 1571831753, "last_edit_date": 1571831753, "creation_date": 1546460075, "answer_id": 54012579, "question_id": 47531742, "link": "https://stackoverflow.com/questions/47531742/startforeground-fail-after-upgrade-to-android-8-1/54012579#54012579", "title": "startForeground fail after upgrade to Android 8.1", "body": "<p>Thanks to @CopsOnRoad, his solution was a big help but only works for SDK\n26 and higher. My app targets 24 and higher. </p>\n\n<p>To keep Android Studio from complaining you need a conditional directly around the notification. It is not smart enough to know the code is in a method conditional to VERSION_CODE.O.</p>\n\n<pre><code>@Override\npublic void onCreate(){\n    super.onCreate();\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O)\n        startMyOwnForeground();\n    else\n        startForeground(1, new Notification());\n}\n\nprivate void startMyOwnForeground(){\n\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O){\n\n        String NOTIFICATION_CHANNEL_ID = \"com.example.simpleapp\";\n        String channelName = \"My Background Service\";\n        NotificationChannel chan = new NotificationChannel(NOTIFICATION_CHANNEL_ID, channelName, NotificationManager.IMPORTANCE_NONE);\n        chan.setLightColor(Color.BLUE);\n        chan.setLockscreenVisibility(Notification.VISIBILITY_PRIVATE);\n        NotificationManager manager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);\n        assert manager != null;\n        manager.createNotificationChannel(chan);\n\n        NotificationCompat.Builder notificationBuilder = new NotificationCompat.Builder(this, NOTIFICATION_CHANNEL_ID);\n        Notification notification = notificationBuilder.setOngoing(true)\n                .setSmallIcon(AppSpecific.SMALL_ICON)\n                .setContentTitle(\"App is running in background\")\n                .setPriority(NotificationManager.IMPORTANCE_MIN)\n                .setCategory(Notification.CATEGORY_SERVICE)\n                .build();\n        startForeground(2, notification);\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4805, "user_id": 1085264, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b8e1b984756a7ed46d210e80c0957895?s=128&d=identicon&r=PG", "display_name": "straya", "link": "https://stackoverflow.com/users/1085264/straya"}, "edited": false, "score": 1, "creation_date": 1568250878, "post_id": 57794607, "comment_id": 102217889, "body": "Please take some time to explain the rationale for your solution."}], "tags": [], "owner": {"reputation": 631, "user_id": 8650263, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-K_AsuQybNoM/AAAAAAAAAAI/AAAAAAAAAAs/OB3yLmaPV7k/photo.jpg?sz=128", "display_name": "Shahriar Nasim Nafi", "link": "https://stackoverflow.com/users/8650263/shahriar-nasim-nafi"}, "is_accepted": false, "score": -1, "last_activity_date": 1567624699, "creation_date": 1567624699, "answer_id": 57794607, "question_id": 47531742, "link": "https://stackoverflow.com/questions/47531742/startforeground-fail-after-upgrade-to-android-8-1/57794607#57794607", "title": "startForeground fail after upgrade to Android 8.1", "body": "<p>Here is my solution</p>\n\n<pre><code>private static final int NOTIFICATION_ID = 200;\nprivate static final String CHANNEL_ID = \"myChannel\";\nprivate static final String CHANNEL_NAME = \"myChannelName\";\n\nprivate void startForeground() {\n\n    final NotificationCompat.Builder mBuilder = new NotificationCompat.Builder(\n            getApplicationContext(), CHANNEL_ID);\n\n    Notification notification;\n\n\n\n        notification = mBuilder.setTicker(getString(R.string.app_name)).setWhen(0)\n                .setOngoing(true)\n                .setContentTitle(getString(R.string.app_name))\n                .setContentText(\"Send SMS gateway is running background\")\n                .setSmallIcon(R.mipmap.ic_launcher)\n                .setShowWhen(true)\n                .build();\n\n        NotificationManager notificationManager = (NotificationManager) getApplication().getSystemService(Context.NOTIFICATION_SERVICE);\n\n        //All notifications should go through NotificationChannel on Android 26 &amp; above\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n            NotificationChannel channel = new NotificationChannel(CHANNEL_ID,\n                    CHANNEL_NAME,\n                    NotificationManager.IMPORTANCE_DEFAULT);\n            notificationManager.createNotificationChannel(channel);\n\n        }\n        notificationManager.notify(NOTIFICATION_ID, notification);\n\n    }\n</code></pre>\n\n<p>Hope it will help :)</p>\n"}, {"tags": [], "owner": {"reputation": 2983, "user_id": 7767664, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/32630cb48af30367a74442b541b5f94a?s=128&d=identicon&r=PG&f=1", "display_name": "user924", "link": "https://stackoverflow.com/users/7767664/user924"}, "is_accepted": false, "score": 2, "last_activity_date": 1611859993, "creation_date": 1611859993, "answer_id": 65943477, "question_id": 47531742, "link": "https://stackoverflow.com/questions/47531742/startforeground-fail-after-upgrade-to-android-8-1/65943477#65943477", "title": "startForeground fail after upgrade to Android 8.1", "body": "<p>Alternative answer: if it's a Huawei device and you have implemented requirements needed for Oreo 8 Android and there are still issues only with Huawei devices than it's only device issue, you can read <a href=\"https://dontkillmyapp.com/huawei\" rel=\"nofollow noreferrer\">https://dontkillmyapp.com/huawei</a></p>\n"}], "owner": {"reputation": 10413, "user_id": 1724097, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c8d7280f1bbcfcca4a0989d6b86350e0?s=128&d=identicon&r=PG", "display_name": "Rawa", "link": "https://stackoverflow.com/users/1724097/rawa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121418, "favorite_count": 41, "accepted_answer_id": 47533338, "answer_count": 9, "score": 226, "last_activity_date": 1611859993, "creation_date": 1511872378, "last_edit_date": 1595538848, "question_id": 47531742, "link": "https://stackoverflow.com/questions/47531742/startforeground-fail-after-upgrade-to-android-8-1", "title": "startForeground fail after upgrade to Android 8.1", "body": "<p>After upgrading my phone to 8.1 Developer Preview my background service no longer starts up properly.</p>\n<p>In my long-running service I've implemented a <code>startForeground</code> method to start the ongoing notification which is called in on create.</p>\n<pre><code>@TargetApi(Build.VERSION_CODES.O)\nprivate fun startForeground() {\n    // Safe call, handled by compat lib.\n    val notificationBuilder = NotificationCompat.Builder(this, DEFAULT_CHANNEL_ID)\n\n    val notification = notificationBuilder.setOngoing(true)\n            .setSmallIcon(R.drawable.ic_launcher_foreground)\n            .build()\n    startForeground(101, notification)\n}\n</code></pre>\n<p>Error message:</p>\n<pre><code>11-28 11:47:53.349 24704-24704/$PACKAGE_NAMEE/AndroidRuntime: FATAL EXCEPTION: main\n    Process: $PACKAGE_NAME, PID: 24704\n    android.app.RemoteServiceException: Bad notification for startForeground: java.lang.RuntimeException: invalid channel for service notification: Notification(channel=My channel pri=0 contentView=null vibrate=null sound=null defaults=0x0 flags=0x42 color=0x00000000 vis=PRIVATE)\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1768)\n        at android.os.Handler.dispatchMessage(Handler.java:106)\n        at android.os.Looper.loop(Looper.java:164)\n        at android.app.ActivityThread.main(ActivityThread.java:6494)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:438)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:807)\n</code></pre>\n<p><code>invalid channel for service notification</code>, apparently my old channel the <code>DEFAULT_CHANNEL_ID</code> is no longer appropriate for API 27 I assume. What would be the proper channel? I've tried to look through the documentation</p>\n"}, {"tags": ["android", "android-studio", "intellij-idea", "kotlin", "android-studio-3.0"], "answers": [{"comments": [{"owner": {"reputation": 3713, "user_id": 3801327, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jBaPg.png?s=128&g=1", "display_name": "Rick Sanchez", "link": "https://stackoverflow.com/users/3801327/rick-sanchez"}, "edited": false, "score": 0, "creation_date": 1511995761, "post_id": 47537202, "comment_id": 82084163, "body": "Even move just moves it to its own class, but same package. I found this bug report for this <a href=\"https://youtrack.jetbrains.com/issue/KT-19924\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-19924</a>"}], "tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": false, "score": 0, "last_activity_date": 1511888883, "creation_date": 1511888883, "answer_id": 47537202, "question_id": 47529699, "link": "https://stackoverflow.com/questions/47529699/why-cant-i-specify-where-i-want-my-kotlin-file-to-be-destinated-in-android-stud/47537202#47537202", "title": "Why can&#39;t I specify where I want my Kotlin file to be destinated in Android Studio?", "body": "<p>You do need a second step currently, but it's very simple: create it in <code>MyListActivity.kt</code> and then <code>Option+Enter</code> on the created interface will give you option to move it to a separate file. And look on <a href=\"https://youtrack.jetbrains.com/\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/</a> if there is an issue for this yet.</p>\n"}], "owner": {"reputation": 4739, "user_id": 1348187, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/dZMOO.jpg?s=128&g=1", "display_name": "Rafael Ruiz Mu&#241;oz", "link": "https://stackoverflow.com/users/1348187/rafael-ruiz-mu%c3%b1oz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1511888883, "creation_date": 1511866243, "question_id": 47529699, "link": "https://stackoverflow.com/questions/47529699/why-cant-i-specify-where-i-want-my-kotlin-file-to-be-destinated-in-android-stud", "title": "Why can&#39;t I specify where I want my Kotlin file to be destinated in Android Studio?", "body": "<p>my problem is the following:</p>\n\n<p>I'm using Android Studio 3.0.1 and I'm trying to be as fast as possible on creating new files (using <strong>MVP</strong> can be a challenge in Kotlin).</p>\n\n<p>For example, when in Java you find this:\n<a href=\"https://i.stack.imgur.com/c97zs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/c97zs.png\" alt=\"enter image description here\"></a></p>\n\n<p>Then if you click (according to your computer) on Option + Enter, I have the option to create my interface:</p>\n\n<p><a href=\"https://i.stack.imgur.com/QzYda.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QzYda.png\" alt=\"enter image description here\"></a></p>\n\n<p>I can choose the package and the folder where it will be placed:\n<a href=\"https://i.stack.imgur.com/jTRQZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jTRQZ.png\" alt=\"enter image description here\"></a></p>\n\n<p>But when I'm with Kotlin:</p>\n\n<p>It just offers me to choose the class container (and I want to import it, setting up externally)</p>\n\n<p><a href=\"https://i.stack.imgur.com/EeoNY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EeoNY.png\" alt=\"enter image description here\"></a></p>\n\n<p>Is there any reason why Android Studio is not equipped with this?</p>\n"}, {"tags": ["kotlin", "spring-data", "spring-data-jpa", "dao"], "comments": [{"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1511866248, "post_id": 47529644, "comment_id": 82015803, "body": "<a href=\"https://medium.com/square-corner-blog/an-optionals-place-in-kotlin-17d7b271eefe\" rel=\"nofollow noreferrer\">An <code>Optional</code>\u2019s place in Kotlin</a> - when it&#39;s not required, nullable types are definitely the more idiomatic solution"}, {"owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "edited": false, "score": 2, "creation_date": 1511877510, "post_id": 47529644, "comment_id": 82023223, "body": "In your example you don&#39;t even have to use the <code>takeIf</code> part. It will be the same without as well."}, {"owner": {"reputation": 10010, "user_id": 298430, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/59f4dbadde568115653307fefda7e422?s=128&d=identicon&r=PG", "display_name": "smallufo", "link": "https://stackoverflow.com/users/298430/smallufo"}, "reply_to_user": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "edited": false, "score": 0, "creation_date": 1511877575, "post_id": 47529644, "comment_id": 82023264, "body": "Thanks @tynn ..."}], "answers": [{"tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": true, "score": 6, "last_activity_date": 1511943337, "last_edit_date": 1511943337, "creation_date": 1511866566, "answer_id": 47529837, "question_id": 47529644, "link": "https://stackoverflow.com/questions/47529644/should-kotlins-dao-return-optional-or-null/47529837#47529837", "title": "Should Kotlin&#39;s DAO return Optional or null?", "body": "<p>I wouldn't use <code>Optional</code> if you don't have to. It only adds unnecessary overhead as working with nullable types is more readable and more idiomatic in Kotlin. There's no advantage of using <code>Optional</code> in Kotlin.</p>\n\n<p>Here's another discussion on that: <a href=\"https://discuss.kotlinlang.org/t/java-api-design-for-kotlin-consumption-optional-or-null/2455\" rel=\"nofollow noreferrer\">https://discuss.kotlinlang.org/t/java-api-design-for-kotlin-consumption-optional-or-null/2455</a></p>\n"}, {"comments": [{"owner": {"reputation": 832, "user_id": 5009459, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f726d0f8972102c15733fff4a01d61dc?s=128&d=identicon&r=PG", "display_name": "JBarros35", "link": "https://stackoverflow.com/users/5009459/jbarros35"}, "edited": false, "score": 0, "creation_date": 1601048951, "post_id": 56541947, "comment_id": 113292871, "body": "the Kotlin optionals are bad implemented in comparison to other languages. I think his suggestion above is better."}, {"owner": {"reputation": 785, "user_id": 1441857, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lXQRz.png?s=128&g=1", "display_name": "Rohde Fischer", "link": "https://stackoverflow.com/users/1441857/rohde-fischer"}, "reply_to_user": {"reputation": 832, "user_id": 5009459, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f726d0f8972102c15733fff4a01d61dc?s=128&d=identicon&r=PG", "display_name": "JBarros35", "link": "https://stackoverflow.com/users/5009459/jbarros35"}, "edited": false, "score": 0, "creation_date": 1601055624, "post_id": 56541947, "comment_id": 113295707, "body": "@JBarros35 probably the cleanest would be to implement a specific data structure for the purpose and use meaningful worlds for it. After all &quot;empty&quot; or &quot;null&quot; can mean just about anything depending on the context, but if you have a structure named &quot;NotSpecified&quot; or &quot;NotFound&quot; it is much more clear. Question is if we want to do the needed amount of work, to get that in a good way? (No I do not have a good answer for that)"}], "tags": [], "owner": {"reputation": 785, "user_id": 1441857, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lXQRz.png?s=128&g=1", "display_name": "Rohde Fischer", "link": "https://stackoverflow.com/users/1441857/rohde-fischer"}, "is_accepted": false, "score": 1, "last_activity_date": 1560249829, "creation_date": 1560249829, "answer_id": 56541947, "question_id": 47529644, "link": "https://stackoverflow.com/questions/47529644/should-kotlins-dao-return-optional-or-null/56541947#56541947", "title": "Should Kotlin&#39;s DAO return Optional or null?", "body": "<p>I have to say I disagree with @s1m0nw1</p>\n\n<p>What Kotlin does is to give us a nice way of dealing with a mistake. Kotlin cannot remove that mistake, because it's so inherent in the JVM and would damage the integration with legacy Java and poorly written Java. However, because it has a nice tool to deal with the bad design does not mean that we should embrace the bad design and do it ourselves.</p>\n\n<p>Some reasoning:</p>\n\n<ul>\n<li><p>Nullable still give the same set of problems the second your Kotlin code is called from Java. Now you just masked the underlying problem, actively damaging your clients. - By itself this is a strong enough reason IMO.</p></li>\n<li><p>Null is still ambiguous, what does null mean? Error? Value missing? Or? Null has no clear meaning, even if you assign it a meaning, you have to document it everywhere and hope that people reads it. Value.EMPTY, Value.MISSING, throw new Exception() all have (somewhat) clearly defined meanings clearly readable from your code. It's the same problem as with booleans as a shortcut for binary enum values, e.g.:</p></li>\n</ul>\n\n<pre><code>val testPassed = runTest()\n\nif (testPassed) // ...\n</code></pre>\n\n<p>this has a clear meaning, only as long a you have the variable name. Passing it on, refactoring etc. can quite fast obfuscate it. What the user meant:</p>\n\n<pre><code>val testResult = runTest()\nif (testResult == TestResult.PASSED)\n</code></pre>\n\n<p>is clear and readable. So per the same argument, let your code communicate your intent. Do not take the shortcut. Again I see the Kotlin dealings with null as extremely nice, for dealing with poor code, I do not see it as an excuse for producing poor code.</p>\n\n<ul>\n<li><p>Null is logically illogical, essentially it's a pointer that doesn't point. It's basically a nonsense \"value\" that isn't really a value. It's not really anything. </p></li>\n<li><p>With nulls you will still have to do weird things for API's that utilize various stream functionality, so by using null you will either have to do hacky things like illustrated in the debate that s1m0nw1 links to, or do explicit conversions anyway, so you'll end up having them both anyway, saving exactly nothing by choosing null, but ending up dealing with both the semantics of the nullable and Optional.</p></li>\n<li><p>It's a minimum amount work to ensure that you return Optional. I mean come one, we are not talking about a lot of extra code here. Don't be afraid of writing a few extra lines to do things right. Readability, flexibility etc. should come before short code. Just because there's a new smart feature to write things shortly and avoid mistakes does not mean you have to use it all the time. Keep in mind that to a hammer everything looks like a nail :)</p></li>\n</ul>\n\n<p>The problem with not doing null though is the lack of a proper \"Maybe\"-type in Java. The more correct solution is the Option/Maybe types utilized by functional languages, however, Java's Optional is only a half measure. It does not fully capture the semantics of a true Maybe/Option type, which is why you shouldn't use Optional for parameters and fields.</p>\n\n<p>For parameters this isn't an issue, since you can easily ensure an overload that doesn't take that parameter to begin with - a task that's even easier in languages like Kotlin.</p>\n\n<p>For fields it seems the current \"solutions\" are to define a proper Maybe/Option-type, perhaps specific for each of your types, to ensure that type erasure and serializations doesn't hinder you. You could use the NullObject pattern, which seems like a slightly uglier way to do the exact same. Or have the nasty null value, but encapsulate it completely in your class. So far I've been doing the last, but I'm not fond of it :/ but pragmatism has its place ;)</p>\n"}], "owner": {"reputation": 10010, "user_id": 298430, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/59f4dbadde568115653307fefda7e422?s=128&d=identicon&r=PG", "display_name": "smallufo", "link": "https://stackoverflow.com/users/298430/smallufo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1965, "favorite_count": 0, "accepted_answer_id": 47529837, "answer_count": 2, "score": 9, "last_activity_date": 1560249829, "creation_date": 1511866070, "last_edit_date": 1512152875, "question_id": 47529644, "link": "https://stackoverflow.com/questions/47529644/should-kotlins-dao-return-optional-or-null", "title": "Should Kotlin&#39;s DAO return Optional or null?", "body": "<p>Prior to Kotlin/JPA , I used to write my DAO layer like this :</p>\n\n<pre><code>public interface UserDao extends JpaRepository&lt;User,Long&gt; {\n    Optional&lt;User&gt; findBySsn(String ssn);\n}\n</code></pre>\n\n<p>And in the caller side , if I want to find someone or create user by SSN , I can write this:</p>\n\n<pre><code>val user = userDao.findBySsn(value).orElseGet {\n    userDao.save(value)\n}\n</code></pre>\n\n<p>It works well and looks fluent.</p>\n\n<p>But since Kotlin introduces null-safety , there is another idiomatic way (dao still in Java ):</p>\n\n<pre><code>public interface UserDao extends JpaRepository&lt;User,Long&gt;  {\n\n    Optional&lt;User&gt; findBySsn(String ssn);\n\n    @Query(\"select u from User u where u.ssn = :ssn\")\n    @Nullable User findBySsnNullable(@Param(\"ssn\") String ssn)\n}\n</code></pre>\n\n<p>And in the client side :</p>\n\n<pre><code>val user = userDao.findBySsnNullable(value)\n      .takeIf{ it -&gt; it != null}? : userDao.save(User(value))\n</code></pre>\n\n<p>Both ways work good. But I wonder which is preferred ? Is it good for Kotlin to dependent on Java8's <code>Optional</code> in API design ? What's the cons for a Kotlin project to depend on (or intercommunicate via) Java8's <code>Optional</code>/<code>Stream</code> API (since Kotlin has its own) ?</p>\n\n<p>Kotlin can compile to JavaScript (I haven't studied that). If the project is depend on Java's <code>Optional</code>/<code>Stream</code> , will it have problem compiling to JS?</p>\n\n<p>---- updated ----</p>\n\n<p>According to <a href=\"https://blog.jetbrains.com/kotlin/2017/11/kotlin-1-2-released/#comment-45118\" rel=\"nofollow noreferrer\">Jetbrains</a></p>\n\n<blockquote>\n  <p>No, common code can only depend on other common libraries. Kotlin has\n  no support for translating Java bytecode into JS.</p>\n</blockquote>\n"}, {"tags": ["android", "sockets", "stream", "kotlin", "bluetooth-socket"], "answers": [{"comments": [{"owner": {"reputation": 466, "user_id": 7780673, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a9465c6e30757980e2c2d710f824523a?s=128&d=identicon&r=PG", "display_name": "Mox_z", "link": "https://stackoverflow.com/users/7780673/mox-z"}, "edited": false, "score": 0, "creation_date": 1511853297, "post_id": 47525381, "comment_id": 82007669, "body": "thanks. this answer is very infomative, but i made the changes to the code and it is still blockiing. maybe i am misunderstanding. I changed <code>bytes = it.readBytes()</code> to <code>byteSize = it.read(buffer)</code> and added a byteSize variable to my code. as an Int field of my Receive Thread. am i needing to do something more? i am not seeing any more in the documentation and because i am using kotlin i can&#39;t do the<code>while((byteSize = it.read(buffer))!=-1)</code> loop."}, {"owner": {"reputation": 1314, "user_id": 6952632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6fe561e3e70b441ad8ca9ce63242620?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitrii Nechepurenko", "link": "https://stackoverflow.com/users/6952632/dmitrii-nechepurenko"}, "reply_to_user": {"reputation": 466, "user_id": 7780673, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a9465c6e30757980e2c2d710f824523a?s=128&d=identicon&r=PG", "display_name": "Mox_z", "link": "https://stackoverflow.com/users/7780673/mox-z"}, "edited": false, "score": 0, "creation_date": 1511854223, "post_id": 47525381, "comment_id": 82008106, "body": "@Mox_z Are you sure that ReceiveThread call method read before  SendThread call method write ?"}, {"owner": {"reputation": 466, "user_id": 7780673, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a9465c6e30757980e2c2d710f824523a?s=128&d=identicon&r=PG", "display_name": "Mox_z", "link": "https://stackoverflow.com/users/7780673/mox-z"}, "edited": false, "score": 0, "creation_date": 1511854461, "post_id": 47525381, "comment_id": 82008228, "body": "Yes, the write side is completing the send. but could this have something to do with it being a BufferedInputStream? is there a different technique used there?"}, {"owner": {"reputation": 466, "user_id": 7780673, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a9465c6e30757980e2c2d710f824523a?s=128&d=identicon&r=PG", "display_name": "Mox_z", "link": "https://stackoverflow.com/users/7780673/mox-z"}, "edited": false, "score": 0, "creation_date": 1511854476, "post_id": 47525381, "comment_id": 82008238, "body": "see above comment"}, {"owner": {"reputation": 1314, "user_id": 6952632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6fe561e3e70b441ad8ca9ce63242620?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitrii Nechepurenko", "link": "https://stackoverflow.com/users/6952632/dmitrii-nechepurenko"}, "reply_to_user": {"reputation": 466, "user_id": 7780673, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a9465c6e30757980e2c2d710f824523a?s=128&d=identicon&r=PG", "display_name": "Mox_z", "link": "https://stackoverflow.com/users/7780673/mox-z"}, "edited": false, "score": 0, "creation_date": 1511854847, "post_id": 47525381, "comment_id": 82008436, "body": "@Mox_z why you can&#39;t use <code>while</code>? And can it be a bluetooth connect problem?"}, {"owner": {"reputation": 466, "user_id": 7780673, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a9465c6e30757980e2c2d710f824523a?s=128&d=identicon&r=PG", "display_name": "Mox_z", "link": "https://stackoverflow.com/users/7780673/mox-z"}, "edited": false, "score": 0, "creation_date": 1511855358, "post_id": 47525381, "comment_id": 82008698, "body": "i guess in kotlin the example that i showed you is an assignment and cannot be used in place of the expression that while(expression) expects as an argument. maybe there is a work around? i will try taking a look at my send code. maybe im just missing something there. also, i am going to post an edit to this question showing the updated code and new error message i am receiving. I think this is helping to clarifiy my problem."}, {"owner": {"reputation": 466, "user_id": 7780673, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a9465c6e30757980e2c2d710f824523a?s=128&d=identicon&r=PG", "display_name": "Mox_z", "link": "https://stackoverflow.com/users/7780673/mox-z"}, "edited": false, "score": 0, "creation_date": 1511855628, "post_id": 47525381, "comment_id": 82008823, "body": "i posted an edit. maybe you were right about the problem being with my send code and not my receive code?"}, {"owner": {"reputation": 1314, "user_id": 6952632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6fe561e3e70b441ad8ca9ce63242620?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitrii Nechepurenko", "link": "https://stackoverflow.com/users/6952632/dmitrii-nechepurenko"}, "reply_to_user": {"reputation": 466, "user_id": 7780673, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a9465c6e30757980e2c2d710f824523a?s=128&d=identicon&r=PG", "display_name": "Mox_z", "link": "https://stackoverflow.com/users/7780673/mox-z"}, "edited": false, "score": 0, "creation_date": 1511857269, "post_id": 47525381, "comment_id": 82009740, "body": "@Mox_z I&#39;ve updated my answer. You have a close bt socket on receive side so you don&#39;t have bluetooth connection between programs on your devices. Therefore you can&#39;t read any of bytes and have an exception."}, {"owner": {"reputation": 466, "user_id": 7780673, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a9465c6e30757980e2c2d710f824523a?s=128&d=identicon&r=PG", "display_name": "Mox_z", "link": "https://stackoverflow.com/users/7780673/mox-z"}, "edited": false, "score": 0, "creation_date": 1511924056, "post_id": 47525381, "comment_id": 82045517, "body": "could this be something to do with me not correctly synchronizing my threads? my outStream and inStream references are passed in as args but the streams originally come from a BluetoothSocket aquired by a singleton object: BluetoothService. could passing the socket into an unsynchronized thread be part of the problem?"}, {"owner": {"reputation": 466, "user_id": 7780673, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a9465c6e30757980e2c2d710f824523a?s=128&d=identicon&r=PG", "display_name": "Mox_z", "link": "https://stackoverflow.com/users/7780673/mox-z"}, "reply_to_user": {"reputation": 1314, "user_id": 6952632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6fe561e3e70b441ad8ca9ce63242620?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitrii Nechepurenko", "link": "https://stackoverflow.com/users/6952632/dmitrii-nechepurenko"}, "edited": false, "score": 0, "creation_date": 1511934623, "post_id": 47525381, "comment_id": 82048597, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/160046/discussion-between-mox-z-and-dmitrii-nechepurenko\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 1314, "user_id": 6952632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6fe561e3e70b441ad8ca9ce63242620?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitrii Nechepurenko", "link": "https://stackoverflow.com/users/6952632/dmitrii-nechepurenko"}, "is_accepted": true, "score": 2, "last_activity_date": 1511856755, "last_edit_date": 1511856755, "creation_date": 1511851117, "answer_id": 47525381, "question_id": 47524148, "link": "https://stackoverflow.com/questions/47524148/kotlin-readbytes-never-completes/47525381#47525381", "title": "Kotlin readBytes() never completes", "body": "<p>If you look on source of Kotlin extension function <a href=\"https://github.com/JetBrains/kotlin/blob/1.1.60/libraries/stdlib/src/kotlin/io/IOStreams.kt#L115\" rel=\"nofollow noreferrer\"><code>readBytes</code></a> you see that it starts loop while <code>InputStream.read(buffer) &gt; 0</code>. According to <a href=\"https://developer.android.com/reference/java/io/InputStream.html#read(byte[])\" rel=\"nofollow noreferrer\">documentation</a>: </p>\n\n<blockquote>\n  <p>This method blocks until input data is available, end of file is detected, or an exception is thrown.</p>\n</blockquote>\n\n<p>Second iteration of this loop freeze your program.\nSo don't use method  <code>readBytes</code>. Just <code>read(buffer)</code>.\nFor example - <a href=\"https://developer.android.com/guide/topics/connectivity/bluetooth.html#ManagingAConnection\" rel=\"nofollow noreferrer\">https://developer.android.com/guide/topics/connectivity/bluetooth.html#ManagingAConnection</a></p>\n\n<p>Update:</p>\n\n<p>Now  <code>ReceiveThread</code> can receive one message from stream. But your bluetooth socket is close. So your problem is in setup bluetooth connection and <code>inStream</code>'s initialization. Maybe you have wrong send part too.</p>\n"}], "owner": {"reputation": 466, "user_id": 7780673, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a9465c6e30757980e2c2d710f824523a?s=128&d=identicon&r=PG", "display_name": "Mox_z", "link": "https://stackoverflow.com/users/7780673/mox-z"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2018, "favorite_count": 0, "accepted_answer_id": 47525381, "answer_count": 1, "score": 4, "last_activity_date": 1511856755, "creation_date": 1511844096, "last_edit_date": 1511855589, "question_id": 47524148, "link": "https://stackoverflow.com/questions/47524148/kotlin-readbytes-never-completes", "title": "Kotlin readBytes() never completes", "body": "<p>I am only trying to write and read across a Bluetooth Socket but i my readBytes call is not completing. I think that this is very simple but maybe i am just using the wrong type of stream or something. As of right now my code is just sending a small amount of text as bytes. This is placeholder code that will be replaced with code that writes and reads a file over the stream. Here is my Receive Thread:</p>\n\n<pre><code>class ReceiveThread(val inStream:BufferedInputStream):Thread() {\n\nvar bytes:ByteArray? = null\n\n\noverride fun run() {\n    BluetoothService.log(\"Begin ${BTS_Constants.THREAD_RECEIVE}\")\n    BluetoothService.log(\"preparing to read data\")\n    name = BTS_Constants.THREAD_RECEIVE\n\n//here is my new code\n    inStream.use {\n        do{\n            count++\n            BluetoothService.log(\"read loop round $count\")\n            byteList.add(it.read() as Byte)\n        }while (it.available()&gt;0)\n     }\n    BluetoothService.log(\"data read: ${byteList.get(0) as Char}\")\n}\n}\n</code></pre>\n\n<p>and here is my Send Thread:</p>\n\n<pre><code>class SendThread(val outStream:BufferedOutputStream, val file:File? = null):Thread(){\n\nvar bytes:ByteArray? = null\n\noverride fun run() {\n    BluetoothService.log(\"Begin : ${BTS_Constants.THREAD_SEND}\")\n    name = BTS_Constants.THREAD_SEND\n\n    bytes = \"hello testing\".toByteArray()\n    try{\n        outStream.use {\n            it.write(bytes)\n            it.flush()\n        }\n    }catch (ioe:IOException){\n\n    }\n\n    BluetoothService.log(\"data sent\")\n}\n\n}\n</code></pre>\n\n<p>the data is successfully sent, and the <code>BluetoothService.log(\"data sent\")</code> call is reached and displayed in the logcat for the device that is running a Send Thread. For the device running the Receive Thread logs the \"Preparing to read data\" message, but never logs the <code>data read: \"$bytes message\"</code>. </p>\n\n<p>How can i make this call to inStream.readBytes() complete? </p>\n\n<p>Edit: new Error message that i am receiving:</p>\n\n<pre><code>11-27 23:45:29.298 16253-16413/com.example.zemcd.fileblue E/AndroidRuntime: FATAL EXCEPTION: RECEIVE\n                                                                        Process: com.example.zemcd.fileblue, PID: 16253\n                                                                        java.io.IOException: bt socket closed, read return: -1\n                  at android.bluetooth.BluetoothSocket.read(BluetoothSocket.java:588)\n                  at android.bluetooth.BluetoothInputStream.read(BluetoothInputStream.java:96)\n                  at java.io.BufferedInputStream.fill(BufferedInputStream.java:235)\n                  at java.io.BufferedInputStream.read(BufferedInputStream.java:254)\n                  at com.example.zemcd.fileblue.ReceiveThread.run(BluetoothService.kt:230)\n</code></pre>\n"}, {"tags": ["java", "android", "android-fragments", "kotlin"], "comments": [{"owner": {"reputation": 386, "user_id": 8816819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b1c0ab7d389604aace65d97e69f6f09?s=128&d=identicon&r=PG&f=1", "display_name": "Jacky Choi", "link": "https://stackoverflow.com/users/8816819/jacky-choi"}, "edited": false, "score": 0, "creation_date": 1511839441, "post_id": 47523399, "comment_id": 82003116, "body": "<a href=\"https://stackoverflow.com/questions/34541650/kotlin-android-extensions-and-fragments\" title=\"kotlin android extensions and fragments\">stackoverflow.com/questions/34541650/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1039, "user_id": 5400914, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/798902f710714568d56d720b6d06e685?s=128&d=identicon&r=PG&f=1", "display_name": "yogesh lokhande", "link": "https://stackoverflow.com/users/5400914/yogesh-lokhande"}, "is_accepted": true, "score": 0, "last_activity_date": 1511847332, "creation_date": 1511847332, "answer_id": 47524643, "question_id": 47523399, "link": "https://stackoverflow.com/questions/47523399/android-button-on-fragment/47524643#47524643", "title": "Android : Button on Fragment", "body": "<p>You need to implememnt your onClick listener in following method :</p>\n\n<pre><code> override fun onViewCreated(view: View?, savedInstanceState: Bundle?) {\n        super.onViewCreated(view, savedInstanceState)\n\n\n    }\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9017884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e814137dfdc7fd6b0f1554dbbffe9d4?s=128&d=identicon&r=PG&f=1", "display_name": "soap", "link": "https://stackoverflow.com/users/9017884/soap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 1, "accepted_answer_id": 47524643, "answer_count": 1, "score": -3, "last_activity_date": 1517316273, "creation_date": 1511838980, "last_edit_date": 1517316273, "question_id": 47523399, "link": "https://stackoverflow.com/questions/47523399/android-button-on-fragment", "title": "Android : Button on Fragment", "body": "<p>Hi I just started making Android apps with Kotlin a got small problem with my app </p>\n\n<p>When I try to use OnclickListener my app crashes </p>\n\n<p><a href=\"https://pastebin.com/2NAW7ffh\" rel=\"nofollow noreferrer\">My code</a></p>\n\n<pre><code>class fr_cooking : Fragment() {\n\n    override fun onCreateView(inflater: LayoutInflater?, container: ViewGroup?,\n                              savedInstanceState: Bundle?): View? {\n\n        button.setOnClickListener({\n            textView2.text = \"blablabla\"\n        })\n\n        return inflater!!.inflate(R.layout.fragment_fr_cooking, container, false)\n\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "anko"], "answers": [{"tags": [], "owner": {"reputation": 532, "user_id": 1532987, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EyRl5.jpg?s=128&g=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/1532987/ali"}, "is_accepted": true, "score": 4, "last_activity_date": 1516051106, "last_edit_date": 1516051106, "creation_date": 1516044243, "answer_id": 48269440, "question_id": 47523380, "link": "https://stackoverflow.com/questions/47523380/anko-theme-and-style/48269440#48269440", "title": "Anko theme and style", "body": "<p>I just Google for same question, and find the answer <a href=\"https://github.com/Kotlin/anko/commit/306d38c22e45dfedaa8a8cd0cd9519c9f31f8599\" rel=\"nofollow noreferrer\">here</a></p>\n\n<h3>Themes</h3>\n\n<p>Anko support theme override (the xml way is adding <code>android:theme</code> parameter >to any view) too by <code>themed</code> prefix before any view or layout:</p>\n\n<pre><code>kotlin themedLinearLayout(ThemeOverlay_AppCompat_Dark) { \n  orientation = VERTICAL   \n  gravity = BOTTOM \n}\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 5713163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e09201c78ee9b2c4dc3248eecf6363e8?s=128&d=identicon&r=PG&f=1", "display_name": "user5713163", "link": "https://stackoverflow.com/users/5713163/user5713163"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 899, "favorite_count": 2, "accepted_answer_id": 48269440, "answer_count": 1, "score": 4, "last_activity_date": 1516051106, "creation_date": 1511838885, "question_id": 47523380, "link": "https://stackoverflow.com/questions/47523380/anko-theme-and-style", "title": "Anko theme and style", "body": "<p>Is there a way to add <strong>theme</strong> and <strong>style</strong> to a Layout with Anko? Thanks</p>\n\n<pre><code>&lt;RelativeLayout\nandroid:id=\"@+id/rlHeaderLayout\"\nstyle=\"?defaultStyle\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"wrap_content\"\nandroid:theme=\"?topBarThemeContext\"&gt;\n</code></pre>\n"}, {"tags": ["kotlin", "kotlinx.coroutines"], "comments": [{"owner": {"reputation": 20308, "user_id": 1051598, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f9c354e780ce562daea0e21b99bfdc0d?s=128&d=identicon&r=PG", "display_name": "Roman  Elizarov", "link": "https://stackoverflow.com/users/1051598/roman-elizarov"}, "edited": false, "score": 0, "creation_date": 1511942250, "post_id": 47521941, "comment_id": 82051840, "body": "When you say &quot;300 jobs with parallelism factor == 50&quot;, what do you mean by &quot;parallelist factor&quot; if this is not, in your mind, a number of underlying real threads?"}, {"owner": {"reputation": 41, "user_id": 9017417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a931c381284a31ed54e70e82dcc4c37d?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksei Lebedev", "link": "https://stackoverflow.com/users/9017417/aleksei-lebedev"}, "reply_to_user": {"reputation": 20308, "user_id": 1051598, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f9c354e780ce562daea0e21b99bfdc0d?s=128&d=identicon&r=PG", "display_name": "Roman  Elizarov", "link": "https://stackoverflow.com/users/1051598/roman-elizarov"}, "edited": false, "score": 0, "creation_date": 1512315984, "post_id": 47521941, "comment_id": 82198026, "body": "I mean that jobs should be queued with length 50, but using light-weight coroutines (probably with about 4 real thread underlying instead of 50 real threads). But if I write something as like as in a comment below all 300 jobs/tasks is starting simultaneously."}], "answers": [{"tags": [], "owner": {"reputation": 2689, "user_id": 185498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d77120c6ac145bba587b662a014dbdd4?s=128&d=identicon&r=PG", "display_name": "Manushin Igor", "link": "https://stackoverflow.com/users/185498/manushin-igor"}, "is_accepted": false, "score": 1, "last_activity_date": 1532169033, "creation_date": 1532169033, "answer_id": 51455176, "question_id": 47521941, "link": "https://stackoverflow.com/questions/47521941/is-there-way-to-get-fixedtreadpool-behavior-using-coroutines/51455176#51455176", "title": "Is there way to get FixedTreadPool behavior using coroutines?", "body": "<p>First of all - please <a href=\"https://github.com/Kotlin/kotlinx.coroutines/issues/261\" rel=\"nofollow noreferrer\">check issue on Gitbub</a>, possible there are official solution.</p>\n\n<p>You can use coroutine channels for this logic</p>\n\n<pre><code>/**\n * How it works:\n * 1. Executors queue has N items\n * 2. Before each execution:\n * 2.1. Get item from queue (if it is possible)\n * 2.2. Execute action\n * 2.3. Return item to queue\n *\n * Example below allows us to execute methods in the resticted count of threads.\n * However we can create object pool from this Semaphore:\n * 1. Firstly - push N pooled objects into executors variable (e.g. we will have Channel&lt;PooledObject&gt;\n * 2. Then change signature of schedule method: just change arg \"()\" to PooledObject\n */\nclass Semapshore(maxParallelWorkers: Int) {\n    private val executors = Channel&lt;Unit&gt;(maxParallelWorkers).apply {\n        runBlocking {\n            repeat(maxParallelWorkers) {\n                send(Unit)\n            }\n        }\n    }\n\n    suspend fun &lt;TResult&gt; schedule(func: () -&gt; TResult): TResult {\n        val executor = executors.receive()\n\n        return try {\n            func()\n        } finally {\n            executors.send(executor)\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 9017417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a931c381284a31ed54e70e82dcc4c37d?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksei Lebedev", "link": "https://stackoverflow.com/users/9017417/aleksei-lebedev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1532169033, "creation_date": 1511828019, "last_edit_date": 1512347248, "question_id": 47521941, "link": "https://stackoverflow.com/questions/47521941/is-there-way-to-get-fixedtreadpool-behavior-using-coroutines", "title": "Is there way to get FixedTreadPool behavior using coroutines?", "body": "<p>Is there way to get the same behavior as code snippet below has but using coroutines?</p>\n\n<p><strong>Updated code snippet:</strong></p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) = runBlocking {\n    val executor = Executors.newFixedThreadPool(50)\n    log.info(\"Start\")\n    val jobs = List(300) {\n        executor.submit {\n            log.info(\"worker #$it started\")\n            sleep(1000L)\n            log.info(\"worker #$it done\")\n        }\n    }\n    jobs.forEach { it.get() }\n    executor.shutdown()\n    log.info(\"All done!\")\n}\n</code></pre>\n\n<p>How can I run 300 jobs with parallelism factor == 50, but without creation 50 real threads?</p>\n\n<p><strong>Update 2: Solution</strong></p>\n\n<p>After reading <a href=\"https://github.com/Kotlin/kotlinx.coroutines/blob/master/coroutines-guide.md\" rel=\"nofollow noreferrer\">Coroutines Guide</a> one more time, I've found that <a href=\"https://github.com/Kotlin/kotlinx.coroutines/blob/master/coroutines-guide.md#fan-out\" rel=\"nofollow noreferrer\">Fan-out example</a> is exactly what I was looking for. Thus, my example will look as follows:</p>\n\n<pre><code>fun produceTasks() = produce {\n    for (taskId in 1..300) {\n        send(\n                async(start = CoroutineStart.LAZY) {\n                    delay(1000) // simulate long work\n                    taskId\n                }\n        )\n    }\n    close()\n}\n\nfun launchWorker(index: Int, channel: ProducerJob&lt;Deferred&lt;Int&gt;&gt;) = launch {\n    channel.consumeEach {\n        val result = it.await()\n        log.info(\"Worker #$index done task #$result\")\n    }\n}\n\nfun main(args: Array&lt;String&gt;) = runBlocking {\n    val tasks = produceTasks()\n    val workers = List(50) { launchWorker(it + 1, tasks) }\n    workers.forEach { it.join() }\n    log.info(\"Done\")\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1511862550, "post_id": 47521421, "comment_id": 82013105, "body": "I hope you do it in InteliJ and your auto-completion works :/"}], "answers": [{"tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": true, "score": 3, "last_activity_date": 1511862556, "last_edit_date": 1511862556, "creation_date": 1511825162, "answer_id": 47521497, "question_id": 47521421, "link": "https://stackoverflow.com/questions/47521421/unable-to-use-tochar-after-readline/47521497#47521497", "title": "Unable to use .toChar() after readLine()", "body": "<p><code>readLine()</code> returns a <code>String?</code>. This type does not have a <code>toChar</code> method. What you can do is take the first char of that <code>String</code> like this:</p>\n\n<pre><code>charAr[i] = readLine()?.get(0) ?: throw IllegalArgumentException()\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9017291, "user_type": "registered", "profile_image": "https://graph.facebook.com/871179076389485/picture?type=large", "display_name": "Zouhair Rouika", "link": "https://stackoverflow.com/users/9017291/zouhair-rouika"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 47521497, "answer_count": 1, "score": 0, "last_activity_date": 1511862556, "creation_date": 1511824734, "question_id": 47521421, "link": "https://stackoverflow.com/questions/47521421/unable-to-use-tochar-after-readline", "title": "Unable to use .toChar() after readLine()", "body": "<p>I am Unable to use the <code>.toChar()</code> in Kotlin after the <code>readLine()!!</code></p>\n\n<p>Like in This Case</p>\n\n<pre><code>//An Array Of Characters\n    var CharAr= Array&lt;Char&gt;(5){' '}\n    for(i in 0..4){\n        println(\"Please Enter The character Number ${i+1}\")\n        CharAr[i]= readLine()!!.toChar()\n    }\n</code></pre>\n\n<p>Or Even In This Case </p>\n\n<pre><code>//Normal readLine()\nvar CharacterNum1:Char\n    println(\"Please Enter a Character\")\n    CharacterNum1= readLine()!!.toChar()\n</code></pre>\n\n<p>Thank You For Your Help :) </p>\n"}, {"tags": ["java", "kotlin", "mockito"], "answers": [{"comments": [{"owner": {"reputation": 962, "user_id": 5473669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/36798d3580a2113bd6babeeb2f0c666b?s=128&d=identicon&r=PG&f=1", "display_name": "MaxG", "link": "https://stackoverflow.com/users/5473669/maxg"}, "edited": false, "score": 0, "creation_date": 1511816862, "post_id": 47519713, "comment_id": 81995975, "body": "Thanks for the quick response. I will try It tomorrow at work :D"}], "tags": [], "owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "is_accepted": true, "score": 3, "last_activity_date": 1511817184, "last_edit_date": 1511817184, "creation_date": 1511816400, "answer_id": 47519713, "question_id": 47519631, "link": "https://stackoverflow.com/questions/47519631/mockito-unit-testing-on-all-method-invocations-of-a-class-return-true/47519713#47519713", "title": "Mockito unit testing: on all method invocations of a class, return &quot;true&quot;", "body": "<p><a href=\"https://static.javadoc.io/org.mockito/mockito-core/2.12.0/org/mockito/Mockito.html#defaultreturn\" rel=\"nofollow noreferrer\">You can register an <code>Answer</code> to change the default return value</a>.</p>\n\n<p>For example (using the excellent <a href=\"https://github.com/nhaarman/mockito-kotlin\" rel=\"nofollow noreferrer\">mockito-kotlin</a> wrapper):</p>\n\n<pre><code>interface Thingy {\n    fun foo() : Boolean\n    fun bar() : Boolean\n}\n\nclass ThingyTest {\n    @Test\n    fun test() {\n        val t1 = mock&lt;Thingy&gt;(defaultAnswer = Answer { false })\n        println(t1.foo())   // \"false\"\n        println(t1.bar())   // \"false\"\n\n        val t2 = mock&lt;Thingy&gt;(defaultAnswer = Answer { true })\n        println(t2.foo())   // \"true\"\n        println(t2.bar())   // \"true\"\n    }\n}\n</code></pre>\n\n<p>Of course, in a more complex case you may have methods that return different types, in which case you'd need to do something smarter in your <code>Answer</code> implementation!</p>\n"}], "owner": {"reputation": 962, "user_id": 5473669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/36798d3580a2113bd6babeeb2f0c666b?s=128&d=identicon&r=PG&f=1", "display_name": "MaxG", "link": "https://stackoverflow.com/users/5473669/maxg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 281, "favorite_count": 0, "closed_date": 1511822712, "accepted_answer_id": 47519713, "answer_count": 1, "score": 0, "last_activity_date": 1511817184, "creation_date": 1511816036, "question_id": 47519631, "link": "https://stackoverflow.com/questions/47519631/mockito-unit-testing-on-all-method-invocations-of-a-class-return-true", "closed_reason": "Duplicate", "title": "Mockito unit testing: on all method invocations of a class, return &quot;true&quot;", "body": "<p>I have a class in kotlin <code>SmsHandler</code>, with a method <code>determineFiltersPass</code> that invokes methods of another class, <code>SmsSendingFilters</code>:</p>\n\n<pre><code>class SmsHandler(val filterPredicates: SmsSendingFilters) {\n    fun determineFiltersPass(sms: SmsDto): Boolean = with(sms.filters) {\n        var pass = true\n        for (filter in FiltersDto::class.memberProperties)\n            pass = when (FilterType.valueOf(filter.name.toUpperCase())) {\n                UNIQUE -&gt; if (filter.get(sms.filters) != null) {\n                    val unique = filter.get(sms.filters) as Boolean\n                    pass &amp;&amp; if (unique) filterPredicates.isUnique().test(sms) else true\n                } else pass &amp;&amp; true\n                RECENT -&gt; if (filter.get(sms.filters) != null) {\n                    pass &amp;&amp; filterPredicates.shouldSendByTimePeriodFromLastMessage().test(sms)\n                } else pass &amp;&amp; true\n                else -&gt; pass &amp;&amp; true\n            }\n        pass\n    }\n}\n\n\nclass SmsSendingFilters {\n\n    fun isUnique(): Predicate&lt;SmsDto&gt; = Predicate {\n        with(it) {\n        repo.findAllByMessageIdAndMobileNumAndAppIdAndParamMap(messageId!!, mobileNum!!, appId!!, paramMap!!.toString()).isEmpty()\n        }\n    }\n\n    fun shouldSendByTimePeriodFromLastMessage(): Predicate&lt;SmsDto&gt; = Predicate {\n        val calendar = Calendar.getInstance()\n        calendar.time = Date()\n        with(it.filters.recent ?: \"\" to \"\") {\n            val size = this.second.toInt()\n            when (IntervalType.valueOf(this.first.toUpperCase())) {\n                SECOND -&gt; calendar.add(Calendar.SECOND, -1 * size)\n                MINUTE -&gt; calendar.add(Calendar.MINUTE, -1 * size)\n                HOUR -&gt; calendar.add(Calendar.HOUR, -1 * size)\n                MONTH -&gt; calendar.add(Calendar.MONTH, -1 * size)\n                YEAR -&gt; calendar.add(Calendar.YEAR, -1 * size)\n                else -&gt; Unit\n            }\n            with(it) {\n                repo.findAllByMessageIdAndMobileNumAndAppId(messageId!!, mobileNum!!, appId!!)\n                    .none { it.dateSent?.toInstant()?.isAfter(calendar.toInstant()) ?: true }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Now, I'm testing the class <code>SmsHandler</code> and because I predict that more filters will be added to the second class, I want to create a generic mock that on invocation of any method from class <code>SmsSendingFilters</code>, will return <code>true</code> or <code>false</code> as I please. Is there a way of doing so without describing the invocation of each method name explicitly (through reflection I guess)?</p>\n\n<p>I'm not looking for a solution of sort:</p>\n\n<pre><code>when(filterPredicates.shouldSendByTimePeriodFromLastMessage().test(any()).thenReturn(true)\n</code></pre>\n\n<p>But, something that complies with this logic:</p>\n\n<pre><code>when(filterPredicates.&lt;anyMethodInvoked&gt;().test(any())).thenReturn(true)\n</code></pre>\n"}, {"tags": ["android", "android-activity", "kotlin", "fragment", "android-lifecycle"], "answers": [{"tags": [], "owner": {"reputation": 730, "user_id": 6585161, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WLrkBqo0vUU/AAAAAAAAAAI/AAAAAAAAABE/TJbeoxy91Ao/photo.jpg?sz=128", "display_name": "Bryan Dormaier", "link": "https://stackoverflow.com/users/6585161/bryan-dormaier"}, "is_accepted": false, "score": 0, "last_activity_date": 1511818175, "creation_date": 1511818175, "answer_id": 47520096, "question_id": 47519516, "link": "https://stackoverflow.com/questions/47519516/handling-a-task-after-a-fragment-loads/47520096#47520096", "title": "Handling a task after a Fragment Loads", "body": "<p>The fragment is not immediately available in on created because it has its own process for going through. If you want to maintain a presenter structure, you should create a companion presenter object for the fragment to coordinate the fragment rather than controlling it via Activity.</p>\n"}], "owner": {"reputation": 1099, "user_id": 1327957, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/12190abf8ac417e88aee9f229addd09e?s=128&d=identicon&r=PG", "display_name": "Josh Ribeiro", "link": "https://stackoverflow.com/users/1327957/josh-ribeiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511818175, "creation_date": 1511815558, "question_id": 47519516, "link": "https://stackoverflow.com/questions/47519516/handling-a-task-after-a-fragment-loads", "title": "Handling a task after a Fragment Loads", "body": "<p>My little learning project here is a simple note taking app that uses dynamic fragments to save notes. I'm having an issue when it comes to displaying loaded text from a \".txt\" file into a TextView. </p>\n\n<p>Debugging shows that when I go to find my <strong>NoteEditFragment</strong>, it is null. This is likely the reason my file isn't correctly being translated into the TextView. How do I go about invoking my NoteEditFragment's setText function only after the Fragment comes into existence? Is there a better way to do this? I'm trying to keep fragments only handling UI and use my Activity as more of a presenter. </p>\n\n<p>The sequence that doesn't work:</p>\n\n<pre><code>//Interfaces\noverride fun noteEditSaveClicked(note: String) {\n        saveNote(note)\n        swapFragments()\n        openNote()\n    }\n</code></pre>\n\n<p>The sequence that works (likely because it waits until the Fragment is loaded)</p>\n\n<pre><code>   override fun onStart() {\n        super.onStart()\n        openNote()\n    }\n</code></pre>\n\n<p>Complete Activity Code:</p>\n\n<pre><code>package com.inviscidlabs.kotlinnotes\n\nimport android.os.Bundle\nimport android.support.v4.app.Fragment\nimport android.support.v7.app.AppCompatActivity\nimport android.view.Menu\nimport android.view.MenuItem\nimport kotlinx.android.synthetic.main.activity_note_home.*\nimport java.io.File\n\nclass NoteHome : NoteHomeFragmentEvent, NoteEditAction, AppCompatActivity() {\n\n\n//Lifecycle\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_note_home)\n        setSupportActionBar(toolbar)\n        swapFragments()\n    }\n\n    override fun onStart() {\n        super.onStart()\n        openNote()\n    }\n\n    override fun onCreateOptionsMenu(menu: Menu): Boolean {\n        // Inflate the menu; this adds items to the action bar if it is present.\n        menuInflater.inflate(R.menu.menu_note_home, menu)\n        return true\n    }\n\n    override fun onOptionsItemSelected(item: MenuItem): Boolean {\n        return when (item.itemId) {\n            R.id.action_settings -&gt; true\n            else -&gt; super.onOptionsItemSelected(item)\n        }\n    }\n\n//Local Functions\n    private fun openNote(){\n        var printText = \"\"\n\n        File(this.filesDir, \"note.txt\").bufferedReader().forEachLine { line -&gt;\n            printText += line\n        }\n\n        val f: NoteHomeFragment? = supportFragmentManager.findFragmentByTag(FragmentIDs.HOME.fragID) as NoteHomeFragment?\n        f?.setNote(printText)\n\n    }\n\n    private fun swapFragments() {\n        val replaceFragment = { frag: Fragment, fragTag: String -&gt;\n            supportFragmentManager.beginTransaction().replace(R.id.anh_fragContainer,\n                    frag, fragTag).commit()\n        }\n\n        if (supportFragmentManager.fragments.size &gt; 0) {\n            if (supportFragmentManager.findFragmentByTag(FragmentIDs.NOTEEDIT.fragID) == null) {\n                replaceFragment(NoteEditFragment(), FragmentIDs.NOTEEDIT.fragID)\n            } else {\n                replaceFragment(NoteHomeFragment(), FragmentIDs.HOME.fragID)\n                openNote()\n            }\n        } else {\n            replaceFragment(NoteHomeFragment(), FragmentIDs.HOME.fragID)\n            openNote()\n        }\n    }\n\n    fun saveNote(noteBody: String){\n        File(this.filesDir, \"note.txt\").bufferedWriter().use { out -&gt;\n            out.write(noteBody)\n        }\n    }\n\n\n//Interfaces\n    override fun noteEditSaveClicked(note: String) {\n            saveNote(note)\n            swapFragments()\n            openNote()\n        }\n\n    override fun addNoteFabClicked() { swapFragments()}\n\n}\n\nenum class FragmentIDs (val fragID: String){\n    NOTEEDIT(\"NoteEditFragment\"), HOME(\"NoteHomeFragment\")\n}\n</code></pre>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 2, "creation_date": 1511809572, "post_id": 47518077, "comment_id": 81992242, "body": "What is the issue here?"}, {"owner": {"reputation": 177, "user_id": 8852115, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/7097d13dc0db08910937125f2cbccc72?s=128&d=identicon&r=PG&f=1", "display_name": "j jobe", "link": "https://stackoverflow.com/users/8852115/j-jobe"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1511809702, "post_id": 47518077, "comment_id": 81992303, "body": "how to make retrofit  pojo class for this json form ?"}, {"owner": {"reputation": 1043, "user_id": 7941229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe47e79f6fb006f59a8292094d96b5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Salman500", "link": "https://stackoverflow.com/users/7941229/salman500"}, "edited": false, "score": 0, "creation_date": 1511811625, "post_id": 47518077, "comment_id": 81993308, "body": "go to file-&gt;setting-&gt;plugins-&gt; find gson formater-&gt; install and then  restart android studio then create class and use alt+enter select gson formater , copy all json paste the json in gson formater,  it will automatically create a pojo for you"}, {"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1511814902, "post_id": 47518077, "comment_id": 81994960, "body": "The question and all comments from the OP make it even more confusing - what do you need? What is wrong with the answer given?"}, {"owner": {"reputation": 177, "user_id": 8852115, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/7097d13dc0db08910937125f2cbccc72?s=128&d=identicon&r=PG&f=1", "display_name": "j jobe", "link": "https://stackoverflow.com/users/8852115/j-jobe"}, "edited": false, "score": 0, "creation_date": 1511817180, "post_id": 47518077, "comment_id": 81996137, "body": "how to make pojo class to these json form in the above ,,all the solution didn&#39;t notice that there is tow object that have same  tag how to call tow ID withe different value in one ID in class ?"}], "answers": [{"comments": [{"owner": {"reputation": 177, "user_id": 8852115, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/7097d13dc0db08910937125f2cbccc72?s=128&d=identicon&r=PG&f=1", "display_name": "j jobe", "link": "https://stackoverflow.com/users/8852115/j-jobe"}, "edited": false, "score": 0, "creation_date": 1511810324, "post_id": 47518263, "comment_id": 81992632, "body": "it will not work because we have tow id in json from which value will call when u call id and etc"}, {"owner": {"reputation": 177, "user_id": 8852115, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/7097d13dc0db08910937125f2cbccc72?s=128&d=identicon&r=PG&f=1", "display_name": "j jobe", "link": "https://stackoverflow.com/users/8852115/j-jobe"}, "edited": false, "score": 0, "creation_date": 1511812063, "post_id": 47518263, "comment_id": 81993544, "body": "bro in jsom form in above how many id in side the json ? tow right ?"}, {"owner": {"reputation": 177, "user_id": 8852115, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/7097d13dc0db08910937125f2cbccc72?s=128&d=identicon&r=PG&f=1", "display_name": "j jobe", "link": "https://stackoverflow.com/users/8852115/j-jobe"}, "edited": false, "score": 0, "creation_date": 1511812162, "post_id": 47518263, "comment_id": 81993597, "body": "so how can i get each one Separately ?in pojo class u write its only one id we need to make list of id so we could get both id 1 and 2"}], "tags": [], "owner": {"reputation": 867, "user_id": 7589424, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/rsOMM.jpg?s=128&g=1", "display_name": "Sagar Jethva", "link": "https://stackoverflow.com/users/7589424/sagar-jethva"}, "is_accepted": false, "score": 0, "last_activity_date": 1511810760, "last_edit_date": 1511810760, "creation_date": 1511810235, "answer_id": 47518263, "question_id": 47518077, "link": "https://stackoverflow.com/questions/47518077/how-to-make-retrofit-pojo-class-for-this-json/47518263#47518263", "title": "how to make retrofit POJO class for this Json", "body": "<p>Generate pojo class using <a href=\"http://www.jsonschema2pojo.org/\" rel=\"nofollow noreferrer\">jsonschema2pojo</a></p>\n\n<pre><code>import java.util.HashMap;\nimport java.util.Map;\n\npublic class Example {\n\nprivate String iD;\nprivate String sectionName;\nprivate String title;\n\n  public Example(){\n  }\n\n  public Example(String id,String sectionName,String title){\n      this.iD = id;\n      this.sectionName = sectionName;\n      this.title = title;\n  }\n  public String getID() {\n     return iD;\n  }\n\n  public void setID(String iD) {\n     this.iD = iD;\n  }\n\n public String getSectionName() {\n    return sectionName;\n }\n\n public void setSectionName(String sectionName) {\n    this.sectionName = sectionName;\n }\n\n public String getTitle() {\n    return title;\n }\n\n public void setTitle(String title) {\n    this.title = title;\n }\n\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 867, "user_id": 7589424, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/rsOMM.jpg?s=128&g=1", "display_name": "Sagar Jethva", "link": "https://stackoverflow.com/users/7589424/sagar-jethva"}, "is_accepted": false, "score": 0, "last_activity_date": 1511852692, "creation_date": 1511852692, "answer_id": 47525777, "question_id": 47518077, "link": "https://stackoverflow.com/questions/47518077/how-to-make-retrofit-pojo-class-for-this-json/47525777#47525777", "title": "how to make retrofit POJO class for this Json", "body": "<p>whenever you have multiple jsonArray value in your json data, we need to store all data in ArrayList. here i have make some code for you i hope might be helpful you.</p>\n\n<p>Your json data</p>\n\n<pre><code>     String jsonDemo = \"[{\\\"ID\\\":\\\"1\\\",\\n\" +\n                \"\\\"SectionName\\\":\\\"\\\"\\n\" +\n                \",\\\"Title\\\":\\\"testosss\\\"}\\n\" +\n                \",{\\\"ID\\\":\\\"2\\\"\\n\" +\n                \",\\\"SectionName\\\":\\\"\\\",\\n\" +\n                \"\\\"Title\\\":\\\"test\\\"}]\";\n</code></pre>\n\n<p>for get josn data and store in ArrayList with Example pojo class\ncreate ArrayList class with pojo model class</p>\n\n<pre><code>ArrayList&lt;Example&gt; arrayList = new ArrayList&lt;&gt;();\n</code></pre>\n\n<p>json parsing and store each data in arraylist</p>\n\n<pre><code> try {\n\n            JSONArray jsonArray = new JSONArray(jsonDemo);\n            for(int i=0;i&lt;jsonArray.length();i++){\n\n                JSONObject jsonObject = jsonArray.getJSONObject(i);\n\n                String ID = jsonObject.getString(\"ID\");\n                String sectionName = jsonObject.getString(\"SectionName\");\n                String title = jsonObject.getString(\"Title\");\n\n                arrayList.add(new Example(ID,sectionName,title));\n            }\n\n        } catch (JSONException e) {\n            e.printStackTrace();\n        }\n</code></pre>\n\n<p>Retrieve all json data</p>\n\n<pre><code> if(arrayList.size()&gt;0){\n            for(int i=0;i&lt;arrayList.size();i++){\n                Example example = arrayList.get(i);\n                Log.d(\"Example\",\"ID : \" + example.getID());\n                Log.d(\"Example\",\"getSectionName : \" + example.getSectionName());\n                Log.d(\"Example\",\"getTitle : \" + example.getTitle());\n            }\n        }\n</code></pre>\n"}], "owner": {"reputation": 177, "user_id": 8852115, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/7097d13dc0db08910937125f2cbccc72?s=128&d=identicon&r=PG&f=1", "display_name": "j jobe", "link": "https://stackoverflow.com/users/8852115/j-jobe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 661, "favorite_count": 1, "answer_count": 2, "score": -2, "last_activity_date": 1511852692, "creation_date": 1511809528, "question_id": 47518077, "link": "https://stackoverflow.com/questions/47518077/how-to-make-retrofit-pojo-class-for-this-json", "title": "how to make retrofit POJO class for this Json", "body": "<p>here is the json form that i try to make pojo class for it </p>\n\n<pre><code> [{\"ID\":\"1\",\n\"SectionName\":\"\"\n,\"Title\":\"testosss\"}\n,{\"ID\":\"2\"\n,\"SectionName\":\"\",\n\"Title\":\"test\"}]\n</code></pre>\n\n<p>i have one array with list of object what should i do to make pojo class in this case ?</p>\n"}, {"tags": ["android", "kotlin", "android-studio-3.0"], "comments": [{"owner": {"reputation": 163, "user_id": 6123024, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh4.googleusercontent.com/-V-Mr228DUPE/AAAAAAAAAAI/AAAAAAAAA2g/5WMP7Wpsnww/photo.jpg?sz=128", "display_name": "Ritu Nagpal", "link": "https://stackoverflow.com/users/6123024/ritu-nagpal"}, "edited": false, "score": 0, "creation_date": 1525245962, "post_id": 47517954, "comment_id": 87276196, "body": "is it Resolved ?"}, {"owner": {"reputation": 2284, "user_id": 1106598, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JlR3w.jpg?s=128&g=1", "display_name": "Gokhan Arik", "link": "https://stackoverflow.com/users/1106598/gokhan-arik"}, "edited": false, "score": 0, "creation_date": 1538023381, "post_id": 47517954, "comment_id": 91998375, "body": "It happened to me in Android 8.0"}], "owner": {"reputation": 14372, "user_id": 852499, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/53c5ebb83f2cb72ef2f30c2c203f4b21?s=128&d=identicon&r=PG", "display_name": "Mustafa G&#252;ven", "link": "https://stackoverflow.com/users/852499/mustafa-g%c3%bcven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 670, "favorite_count": 1, "answer_count": 0, "score": 16, "last_activity_date": 1511855633, "creation_date": 1511809024, "last_edit_date": 1511855633, "question_id": 47517954, "link": "https://stackoverflow.com/questions/47517954/an-exception-occurs-during-evaluate-expression-action", "title": "An exception occurs during Evaluate Expression Action :", "body": "<p>I'm developing an application using kotlin on Android Studio and it gives me below error while trying to debug an object. I guess it only occurs while working with the old devices like samsung s3 which is running on 4.3 because it does not happen when I try to reproduce the same process with the other devices which run on 7.0 and 8.0. Anyone here who saw something like this before? Is it a bug or are config changes necessary that I'm unaware?</p>\n\n<p>my kotlin version: 1.1.61</p>\n\n<p>EDIT: I created a bug report <a href=\"https://issuetracker.google.com/issues/69821974\" rel=\"noreferrer\">https://issuetracker.google.com/issues/69821974</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/oZ9TH.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/oZ9TH.png\" alt=\"not working\"></a>\n<a href=\"https://i.stack.imgur.com/Ad6tu.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Ad6tu.jpg\" alt=\"working\"></a></p>\n"}, {"tags": ["spring", "javafx", "kotlin"], "comments": [{"owner": {"reputation": 272, "user_id": 5705324, "user_type": "registered", "profile_image": "https://graph.facebook.com/1101354429877706/picture?type=large", "display_name": "Artur Czopek", "link": "https://stackoverflow.com/users/5705324/artur-czopek"}, "edited": false, "score": 0, "creation_date": 1511815698, "post_id": 47517252, "comment_id": 81995356, "body": "Please, provide packages name either"}, {"owner": {"reputation": 175596, "user_id": 2189127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8e6e627b4b90ec816c5c7aa04cbcc26?s=128&d=identicon&r=PG", "display_name": "James_D", "link": "https://stackoverflow.com/users/2189127/james-d"}, "edited": false, "score": 0, "creation_date": 1511817291, "post_id": 47517252, "comment_id": 81996181, "body": "It&#39;s not clear how you are getting Spring to instantiate the controllers: by default they are just instantiated by the <code>FXMLLoader</code> directly. I don&#39;t know kotlin, but there is a related Java question at <a href=\"https://stackoverflow.com/questions/40539310/dependency-injection-and-javafx\" title=\"dependency injection and javafx\">stackoverflow.com/questions/40539310/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3871, "user_id": 889053, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/3e26b08aa9c9bff40d6dab7b98680bf4?s=128&d=identicon&r=PG", "display_name": "Christian Bongiorno", "link": "https://stackoverflow.com/users/889053/christian-bongiorno"}, "edited": false, "score": 0, "creation_date": 1511909688, "post_id": 47521103, "comment_id": 82041703, "body": "I think if you declare in the class constructor of app <code>class App(private val State) : Application()</code> It will work"}], "tags": [], "owner": {"reputation": 5491, "user_id": 1439771, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/egtxg.png?s=128&g=1", "display_name": "SimY4", "link": "https://stackoverflow.com/users/1439771/simy4"}, "is_accepted": true, "score": 1, "last_activity_date": 1511918367, "last_edit_date": 1511918367, "creation_date": 1511822809, "answer_id": 47521103, "question_id": 47517252, "link": "https://stackoverflow.com/questions/47517252/can-i-use-autowire-spring-context-for-a-kotlin-desktop-application/47521103#47521103", "title": "Can I use @autowire (spring-context) for a kotlin desktop application?", "body": "<p>Have a look at <a href=\"http://gluonhq.com/labs/ignite/\" rel=\"nofollow noreferrer\">GluonHQ Ignite</a> and <a href=\"http://afterburner.adam-bien.com/\" rel=\"nofollow noreferrer\">afterburner.fx</a>. They're meant to provide DI capabilities to your JavaFX application. I usually prefer the first one, because it allows you to inject whatever DI framework you choose.</p>\n\n<p>Simple app configuration with ignite will look like this:</p>\n\n<pre><code>class Starter: Application() {\n\n    private val context = SpringContext(this) { listOf() /* collection of packages to scan for bean definitions */ }\n    @Autowired \n    private lateinit var loader: FXMLLoader\n\n    override fun start(primaryStage: Stage) {\n        context.init()\n\n        /* ... now your FXML controllers can use autowiring */\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 8213964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9988b7b7a1a036157b6a40dcfc124ddb?s=128&d=identicon&r=PG&f=1", "display_name": "Oleinik D", "link": "https://stackoverflow.com/users/8213964/oleinik-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 386, "favorite_count": 0, "accepted_answer_id": 47521103, "answer_count": 1, "score": 0, "last_activity_date": 1511971060, "creation_date": 1511806213, "last_edit_date": 1511971060, "question_id": 47517252, "link": "https://stackoverflow.com/questions/47517252/can-i-use-autowire-spring-context-for-a-kotlin-desktop-application", "title": "Can I use @autowire (spring-context) for a kotlin desktop application?", "body": "<p>I'm trying to use Spring DI for kotlin-javafx desktop app but Spring doesn't inject a beans to lateinit property.</p>\n\n<p>Here is my starter class</p>\n\n<pre><code>package ui\n\n@Component\nclass Starter : Application() {\n\n    override fun start(primaryStage: Stage?) {\n\n        val root : Parent = FXMLLoader.load(javaClass.getResource(\"/view/main.fxml\"))\n        primaryStage?.title = \"Title\"\n        primaryStage?.scene = Scene(root)\n        primaryStage?.show()\n    }\n\n    companion object {\n        @JvmStatic\n        fun main(args: Array&lt;String&gt;) {\n            AnnotationConfigApplicationContext(SpringConfig::class.java)\n\n            launch(Starter::class.java, *args)\n        }\n    }   \n\n}\n</code></pre>\n\n<p>Here is my Spring-config class</p>\n\n<pre><code>package config\n\n@Configuration\n@ComponentScan(basePackages = arrayOf(\"domain\", \"ui\"))\nopen class SpringConfig {   \n\n}\n</code></pre>\n\n<p>Here is my bean that I want to inject</p>\n\n<pre><code>package domain\n\n@Component\nopen class State {\n\n    private val coinsState = mapOf(Coin.SYS to CoinState(Coin.SYS))\n\n    fun setActiveForCoin(coin : Coin, isActive : Boolean) {\n        val coin = coinsState[coin]\n        if (coin == null) throw IllegalArgumentException(\"Coin $coin does not exist!\")\n        coin.isActive = isActive\n    }\n}\n</code></pre>\n\n<p>and finally my javafx controller which should receive a bean (instance of the controller created automatically, I just setup his name in .fxml file)</p>\n\n<pre><code>package ui.controller\n\n@Component\nclass CoinController {\n\n    @Autowired\n    private lateinit var state : State\n\n    @FXML\n    fun showConfirmDialog(actionEvent: ActionEvent) {\n        println(state)\n\n        val alert = Alert(AlertType.CONFIRMATION)\n        alert.title = \"Confirmation Dialog\"\n        alert.headerText = \"Look, a Confirmation Dialog\"\n        //alert.contentText = \"Are you ok with this?\"\n\n        val result = alert.showAndWait()\n        if (result.get() == ButtonType.OK) {\n            // ... user chose OK\n        } else {\n            // ... user chose CANCEL or closed the dialog\n        }\n    }\n\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "retrofit2"], "answers": [{"tags": [], "owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "is_accepted": true, "score": 1, "last_activity_date": 1511805272, "creation_date": 1511805272, "answer_id": 47517028, "question_id": 47516882, "link": "https://stackoverflow.com/questions/47516882/retrofit-pass-two-parameters/47517028#47517028", "title": "Retrofit - pass two parameters", "body": "<p><code>@Query</code> automatically generates the query part of the URL, so your <code>@GET</code> annotation should not include it.</p>\n\n<p>Instead of <code>@GET(\"www.example.com/getnewcar/?car[color]={colorOfCar}&amp;car[price]={priceOfCar}\")</code> it should just be <code>@GET(\"www.example.com/getnewcar/\")</code>.</p>\n"}], "owner": {"reputation": 457, "user_id": 8526400, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8c836f22756bd51f9a97468f7455c3b2?s=128&d=identicon&r=PG&f=1", "display_name": "JoshuaMad", "link": "https://stackoverflow.com/users/8526400/joshuamad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 569, "favorite_count": 0, "accepted_answer_id": 47517028, "answer_count": 1, "score": 0, "last_activity_date": 1511805272, "creation_date": 1511804707, "question_id": 47516882, "link": "https://stackoverflow.com/questions/47516882/retrofit-pass-two-parameters", "title": "Retrofit - pass two parameters", "body": "<p>Link: <code>\"www.example.com/getnewcar/?car[color]={colorOfCar}&amp;car[price]={priceOfCar}\"</code></p>\n\n<pre><code>@GET(...)\nfun getNewCar(\n            @Query(\"car[color]\") color: String,\n            @Query(\"car[price]\") price: String,\n            ...\n    ): Single&lt;JSONApiObject&gt;\n</code></pre>\n\n<p>I call this function like: <code>b.getNewCar(carColor, carPrice)</code></p>\n\n<p>URL query string \"..\" must not have replace block. For dynamic query parameters use @Query. What am I doing wrong? I looked at docs and they suggest using @Query. Can't find what's off tho.</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 2419, "user_id": 5689605, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/dY18P.jpg?s=128&g=1", "display_name": "Debanjan", "link": "https://stackoverflow.com/users/5689605/debanjan"}, "edited": false, "score": 1, "creation_date": 1511804720, "post_id": 47516676, "comment_id": 81989712, "body": "I haven&#39;t used the libraries you mentioned, but if you may, try with Retrofit 2. And also please edit and put the code you have tried so other users can point out your mistake."}, {"owner": {"reputation": 21170, "user_id": 2949612, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/RLdcF.png?s=128&g=1", "display_name": "pRaNaY", "link": "https://stackoverflow.com/users/2949612/pranay"}, "edited": false, "score": 0, "creation_date": 1511804850, "post_id": 47516676, "comment_id": 81989779, "body": "Can you please add code which u are trying, which help us to identified crash cause?"}, {"owner": {"reputation": 2390, "user_id": 6121643, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/exMvQ.jpg?s=128&g=1", "display_name": "Irony Stack", "link": "https://stackoverflow.com/users/6121643/irony-stack"}, "edited": false, "score": 0, "creation_date": 1511804852, "post_id": 47516676, "comment_id": 81989780, "body": "With the suggestion given by @Debnjan  Volley is also good and easy option"}, {"owner": {"reputation": 6703, "user_id": 1797950, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/1KyYn.jpg?s=128&g=1", "display_name": "crgarridos", "link": "https://stackoverflow.com/users/1797950/crgarridos"}, "edited": false, "score": 0, "creation_date": 1511805916, "post_id": 47516676, "comment_id": 81990400, "body": "It may be because on Android you can&#39;t do a network call in the main thread. can you post your logcat output ?"}, {"owner": {"reputation": 59, "user_id": 5922206, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y3pSI.jpg?s=128&g=1", "display_name": "NightStallion", "link": "https://stackoverflow.com/users/5922206/nightstallion"}, "reply_to_user": {"reputation": 6703, "user_id": 1797950, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/1KyYn.jpg?s=128&g=1", "display_name": "crgarridos", "link": "https://stackoverflow.com/users/1797950/crgarridos"}, "edited": false, "score": 0, "creation_date": 1511807168, "post_id": 47516676, "comment_id": 81991009, "body": "@crgarridos , done"}, {"owner": {"reputation": 6703, "user_id": 1797950, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/1KyYn.jpg?s=128&g=1", "display_name": "crgarridos", "link": "https://stackoverflow.com/users/1797950/crgarridos"}, "edited": false, "score": 0, "creation_date": 1511807845, "post_id": 47516676, "comment_id": 81991360, "body": "Ok, my assumption is right. As others guys say, take a look to retrofit or use AsyncTask (Anko library has a pretty good shorcut to this one)"}], "answers": [{"tags": [], "owner": {"reputation": 2931, "user_id": 2148666, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uLn2O.jpg?s=128&g=1", "display_name": "Nicol&#225;s Carrasco", "link": "https://stackoverflow.com/users/2148666/nicol%c3%a1s-carrasco"}, "is_accepted": false, "score": 0, "last_activity_date": 1511814885, "creation_date": 1511814885, "answer_id": 47519377, "question_id": 47516676, "link": "https://stackoverflow.com/questions/47516676/make-http-request-on-button-click-in-kotlin/47519377#47519377", "title": "Make HTTP request on button click in Kotlin", "body": "<p>You just need to look at the stack trace to find the issue. The code is throwing a <a href=\"https://developer.android.com/reference/android/os/NetworkOnMainThreadException.html\" rel=\"nofollow noreferrer\">NetworkOnMainThreadException</a>. This happens when you try to access the network from within Android's main (often called UI) thread. This <a href=\"https://stackoverflow.com/questions/6343166/how-do-i-fix-android-os-networkonmainthreadexception\">question</a> have some good answers about this issue, however instead of trying to use <code>AsyncTask</code> make sure to read the documentation of your chosen network library and see how to make the call on a different thread.</p>\n"}, {"tags": [], "owner": {"reputation": 557, "user_id": 991200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5ebbf205fc133cfe1223c633a024fd2?s=128&d=identicon&r=PG", "display_name": "Nelson Almendra", "link": "https://stackoverflow.com/users/991200/nelson-almendra"}, "is_accepted": false, "score": 0, "last_activity_date": 1511947579, "creation_date": 1511947579, "answer_id": 47549220, "question_id": 47516676, "link": "https://stackoverflow.com/questions/47516676/make-http-request-on-button-click-in-kotlin/47549220#47549220", "title": "Make HTTP request on button click in Kotlin", "body": "<p>I'm not sure if this is the root of your problem but your request method signature should be:</p>\n\n<pre><code>fun request(view: View)\n{\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1211, "user_id": 5928940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bb38bce9f53c4b3c1dd047689715f45?s=128&d=identicon&r=PG&f=1", "display_name": "Suraj Nair", "link": "https://stackoverflow.com/users/5928940/suraj-nair"}, "is_accepted": false, "score": 0, "last_activity_date": 1511967377, "creation_date": 1511967377, "answer_id": 47555686, "question_id": 47516676, "link": "https://stackoverflow.com/questions/47516676/make-http-request-on-button-click-in-kotlin/47555686#47555686", "title": "Make HTTP request on button click in Kotlin", "body": "<p>As other members answered your code is calling network operation on main thread that's why it is crashing . You can avoid this either by using <a href=\"https://kotlinlang.org/docs/reference/coroutines.html\" rel=\"nofollow noreferrer\">Kotlin Coroutines</a> or by using methods of Anko Library (Which is officially supported by kotlin to simplify things in android). Here i just give a reference for how to do Async call in <a href=\"https://github.com/Kotlin/anko\" rel=\"nofollow noreferrer\">Anko</a>.</p>\n\n<pre><code>doAsync { \n\n    // Call all operation  related to network or other ui blocking operations here.\n    uiThread { \n        // perform all ui related operation here    \n    }\n}\n</code></pre>\n\n<p>To do it as Kotlin Coroutines, you can refer this answer:-</p>\n\n<p><a href=\"https://stackoverflow.com/questions/43132080/kotlin-coroutines-the-right-way-in-android/47555497#47555497\">Kotlin Coroutines the right way in Android</a></p>\n"}], "owner": {"reputation": 59, "user_id": 5922206, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y3pSI.jpg?s=128&g=1", "display_name": "NightStallion", "link": "https://stackoverflow.com/users/5922206/nightstallion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1434, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1511967377, "creation_date": 1511803869, "last_edit_date": 1511806584, "question_id": 47516676, "link": "https://stackoverflow.com/questions/47516676/make-http-request-on-button-click-in-kotlin", "title": "Make HTTP request on button click in Kotlin", "body": "<p>I want to make a request in my android app when the button is clicked. In Python I could do this like that:</p>\n\n<pre><code>import requests\nparams = {\n  'param1':some_string,\n  'param2':some_int,\n  'param3':another_string\n  }\nrequests.post(\"https://some.api.com/method/some.method\", params=params)\n</code></pre>\n\n<p>I'd like to do the same in Kotlin when I push the button. I tried tp do this with <a href=\"https://github.com/kittinunf/Fuel\" rel=\"nofollow noreferrer\">Fuel</a> and <a href=\"http://khttp.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">khhtp</a> but didn't succeed much -- app crashed as soon as I pushed the button, responsible for sending request.</p>\n\n<p>UPD: What I used:</p>\n\n<p>AndroidManifest.xml</p>\n\n<pre><code>...\n&lt;uses-permission android:name=\"android.permission.INTERNET\" /&gt;\n&lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" /&gt;\n...\n</code></pre>\n\n<p>build.gradle</p>\n\n<pre><code>dependencies {\n...\ncompile 'com.github.jkcclemens:khttp:0.1.0'\n...\n}\n</code></pre>\n\n<p>MainActivity.kt</p>\n\n<pre><code>fun request(){\n    var message = \"message\"\n    var uid = \"123456\" //I wanted to use it as int, but mapOf didn't allow me\n    var token = \"token\"\n    val payload = mapOf(\"token\" to token, \"user_id\" to uid, \"message\" to message)\n    get(\"https://some.api.com/method/some.method\", params=payload)\n    val popup = Toast.makeText(this,\"Message sent!\",Toast.LENGTH_LONG)\n    popup.show()\n}\n</code></pre>\n\n<p>activity_main.xml</p>\n\n<pre><code>&lt;Button\n...\n    android:onClick=\"request\" /&gt;\n</code></pre>\n\n<p>This is the example with khhtp, the one with Fuel is gone. </p>\n\n<p>UPD2. Part of Logcat output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/MeLIl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MeLIl.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/EQMyY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EQMyY.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["generics", "kotlin", "rx-java2"], "comments": [{"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1511803249, "post_id": 47515612, "comment_id": 81988885, "body": "&quot;ran into a number of errors&quot; - can you specify an example?"}], "answers": [{"tags": [], "owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "is_accepted": false, "score": 0, "last_activity_date": 1511803065, "creation_date": 1511803065, "answer_id": 47516460, "question_id": 47515612, "link": "https://stackoverflow.com/questions/47515612/why-cant-i-use-the-interface-as-the-generic-type-in-this-rx-transformer/47516460#47516460", "title": "Why can&#39;t I use the interface as the generic type in this Rx transformer?", "body": "<p>From what you have specified, it seems <code>T</code> will always be a subtype of <code>GenericResponse</code> - adding a type parameter constraint may be what you want.</p>\n\n<pre><code>fun &lt;T : GenericResponse&gt; wrapRetrofitExceptionSingle() {\n    ...\n}\n</code></pre>\n"}], "owner": {"reputation": 9772, "user_id": 1618135, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/UqWor.jpg?s=128&g=1", "display_name": "blackpanther", "link": "https://stackoverflow.com/users/1618135/blackpanther"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1511803065, "creation_date": 1511800210, "question_id": 47515612, "link": "https://stackoverflow.com/questions/47515612/why-cant-i-use-the-interface-as-the-generic-type-in-this-rx-transformer", "title": "Why can&#39;t I use the interface as the generic type in this Rx transformer?", "body": "<p>I have the following data classes in Kotlin as reference:</p>\n\n<pre><code>interface GenericResponse {\n\n    val error: Error?\n\n    fun hasErrorObject(): Boolean = error != null\n}\n\ndata class LoginResponse(\n    val name: String,\n    val auth: String,\n    @SerializedName(\"error\") override val error: Error? = null\n) : GenericResponse\n</code></pre>\n\n<p><code>LoginResponse</code> implements <code>GenericResponse</code>. I'm using a Retrofit API in the following manner:</p>\n\n<pre><code>@POST(\"******\")\nfun createSession(@Body body: LoginBody): Single&lt;Response&lt;LoginResponse&gt;&gt;\n</code></pre>\n\n<p>Furthermore, I use a transformer to extract the error from the <code>LoginResponse</code> if it exists as shown below:</p>\n\n<pre><code>class ExceptionTransformers {\n    fun &lt;T&gt; wrapRetrofitExceptionSingle(): (Single&lt;Response&lt;T&gt;&gt;) -&gt; Single&lt;T&gt; {\n        return { it: Single&lt;Response&lt;T&gt;&gt; -&gt;\n            it.flatMap { response: Response&lt;T&gt; -&gt;\n                if (response.code() == 200 &amp;&amp; response.body() != null) {\n                    val genericResponse = response.body() as GenericResponse\n                    if (genericResponse.hasErrorObject()) {\n                        Single.error { MyException(genericResponse.error!!) }\n                    } else {\n                        Single.just(response.body()!!)\n                    }\n                } else {\n                    Single.error { UnknownError() }\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>As you can see, I have to cast the response body into a <code>GenericResponse</code> instance and then continue the login in the <code>ExceptionTransformer</code>. My question is this: Is there a way of using the return type as <code>GenericResponse</code> rather than type <code>T</code> (the generic)? I have tried to do that - but ran into a number of errors when using it like this:</p>\n\n<pre><code>fun createSession(loginBody: LoginBody): Single&lt;LoginResponse&gt; {\n    return apiService.createSession(loginBody)\n          .compose(exceptionTransformers.wrapRetrofitExceptionSingle())\n}\n</code></pre>\n"}, {"tags": ["android", "android-viewpager", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 2540, "user_id": 1508887, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dcab98a7cbe42c1d6d010c61beab5041?s=128&d=identicon&r=PG", "display_name": "Fifer Sheep", "link": "https://stackoverflow.com/users/1508887/fifer-sheep"}, "edited": false, "score": 0, "creation_date": 1511867071, "post_id": 47517191, "comment_id": 82016368, "body": "Sorry, I don&#39;t want the <code>ViewPager</code> to switch pages vertically. I want the <code>ViewPager</code> to do what it does normally - horizontally, but I want the scrolling of the fragments&#39; <code>ListView</code> to hide a fixed view as it scrolls."}, {"owner": {"reputation": 229, "user_id": 8807500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52b69c320b99236863ac35abe1f10e3f?s=128&d=identicon&r=PG&f=1", "display_name": "slee", "link": "https://stackoverflow.com/users/8807500/slee"}, "reply_to_user": {"reputation": 2540, "user_id": 1508887, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dcab98a7cbe42c1d6d010c61beab5041?s=128&d=identicon&r=PG", "display_name": "Fifer Sheep", "link": "https://stackoverflow.com/users/1508887/fifer-sheep"}, "edited": false, "score": 0, "creation_date": 1511875543, "post_id": 47517191, "comment_id": 82021891, "body": "Are you mean you don&#39;t want swipe left right for change of fragment A B C ?"}, {"owner": {"reputation": 2540, "user_id": 1508887, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dcab98a7cbe42c1d6d010c61beab5041?s=128&d=identicon&r=PG", "display_name": "Fifer Sheep", "link": "https://stackoverflow.com/users/1508887/fifer-sheep"}, "edited": false, "score": 0, "creation_date": 1511881131, "post_id": 47517191, "comment_id": 82025845, "body": "I do want to swipe left/right switching fragments, but I also want the &quot;header&quot; to scroll away with the fragment content. (But to not move the &quot;header&quot; when swiping left/right)"}, {"owner": {"reputation": 229, "user_id": 8807500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52b69c320b99236863ac35abe1f10e3f?s=128&d=identicon&r=PG&f=1", "display_name": "slee", "link": "https://stackoverflow.com/users/8807500/slee"}, "reply_to_user": {"reputation": 2540, "user_id": 1508887, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dcab98a7cbe42c1d6d010c61beab5041?s=128&d=identicon&r=PG", "display_name": "Fifer Sheep", "link": "https://stackoverflow.com/users/1508887/fifer-sheep"}, "edited": false, "score": 0, "creation_date": 1511882988, "post_id": 47517191, "comment_id": 82027170, "body": "Are you mean you want to swipe switching, but without any animation effect ?"}], "tags": [], "owner": {"reputation": 229, "user_id": 8807500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52b69c320b99236863ac35abe1f10e3f?s=128&d=identicon&r=PG&f=1", "display_name": "slee", "link": "https://stackoverflow.com/users/8807500/slee"}, "is_accepted": false, "score": 0, "last_activity_date": 1511877078, "last_edit_date": 1511877078, "creation_date": 1511805969, "answer_id": 47517191, "question_id": 47515391, "link": "https://stackoverflow.com/questions/47515391/is-there-a-way-to-make-viewpager-decorviews-scroll-with-the-fragment-content/47517191#47517191", "title": "Is there a way to make ViewPager DecorView&#39;s scroll with the fragment content?", "body": "<p>Build custom ViewPager to prevent left/right swipe, just sample set any motion of X axis become 0 :</p>\n\n<pre><code>class CustomViewPager : ViewPager {\n\n\n    constructor(context: Context) : super(context) {\n\n    }\n\n    constructor(context: Context, attrs: AttributeSet) : super(context, attrs) {\n\n    }\n\n\n\n\n\n\n    private fun transferXY(ev: MotionEvent): MotionEvent {\n        //Prevent X movement\n\n\n              val height = height.toFloat()\n\n\n\n             ev.setLocation(0f, ev.y / width * height)\n\n        return ev\n    }\n\n    override fun onInterceptTouchEvent(ev: MotionEvent): Boolean {\n        val intercepted = super.onInterceptTouchEvent(transferXY(ev))\n        transferXY(ev)\n        return intercepted\n    }\n\n    override fun onTouchEvent(ev: MotionEvent): Boolean {\n        return super.onTouchEvent(transferXY(ev))\n    }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 2540, "user_id": 1508887, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dcab98a7cbe42c1d6d010c61beab5041?s=128&d=identicon&r=PG", "display_name": "Fifer Sheep", "link": "https://stackoverflow.com/users/1508887/fifer-sheep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 362, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1511877078, "creation_date": 1511799534, "last_edit_date": 1511871249, "question_id": 47515391, "link": "https://stackoverflow.com/questions/47515391/is-there-a-way-to-make-viewpager-decorviews-scroll-with-the-fragment-content", "title": "Is there a way to make ViewPager DecorView&#39;s scroll with the fragment content?", "body": "<p>I'm trying to get a <code>ViewPager.DecorView</code> that sits under the tabs of the <code>ViewPager</code>, that <em>doesn't</em> swipe left/right with the pages, but <em>does</em> scroll up (or, at least, away) when the content of the fragment's <code>ListView</code> is scrolled up. However, I'm struggling to find any way of making the <code>DecorView</code> scroll up with the content.</p>\n\n<p>Do I need to communicate the scrolling state to the <code>Activity</code>, to then pass it to the <code>ViewPager</code> to scroll the <code>DecorView</code> away?? It feels like I'm missing something there.</p>\n\n<p>I also tried using <code>CoordinatorLayout</code>, but can't seem to get this working across the <code>Activity</code>/<code>Fragment</code></p>\n\n<p>Here is the current source: <a href=\"https://github.com/fifersheep/android-sample-fixed-banner\" rel=\"nofollow noreferrer\">https://github.com/fifersheep/android-sample-fixed-banner</a></p>\n\n<p>But in the interest of not relying on links, here's a simplified version of what I have at the moment:</p>\n\n<p><em>MainActivity.kt</em></p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        val pager = findViewById&lt;ViewPager&gt;(R.id.pager)\n        pager.adapter = MainActivityPagerAdapter(supportFragmentManager)\n\n       val tabLayout = findViewById&lt;TabLayout&gt;(R.id.tab_layout)\n        tabLayout.setupWithViewPager(pager)\n    }\n\n    private inner class MainActivityPagerAdapter(fm: FragmentManager) : FragmentPagerAdapter(fm) {\n        val titles = listOf(\"Fragment A\", \"Fragment B\", \"Fragment C\")\n\n        override fun getItem(position: Int): Fragment = CustomFragment.instance(titles[position])\n\n        override fun getPageTitle(position: Int): CharSequence = titles[position]\n\n        override fun getCount(): Int = titles.size\n    }\n}\n</code></pre>\n\n<p><em>activity_main.xml</em></p>\n\n<pre><code>&lt;LinearLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    android:orientation=\"vertical\"\n    tools:context=\"uk.lobsterdoodle.sample.fixedscrollingtablayoutbanner.MainActivity\"&gt;\n\n    &lt;android.support.design.widget.TabLayout\n        android:id=\"@+id/tab_layout\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        app:tabIndicatorColor=\"#fff\"\n        app:tabIndicatorHeight=\"2dp\"\n        app:tabMode=\"fixed\"\n        app:tabMaxWidth=\"0dp\"\n        app:tabGravity=\"fill\"\n        app:tabSelectedTextColor=\"#fff\"\n        app:tabTextColor=\"#6fff\"\n        android:background=\"@color/colorPrimaryDark\" /&gt;\n\n    &lt;android.support.v4.view.ViewPager\n        android:id=\"@+id/pager\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"&gt;\n\n        &lt;uk.lobsterdoodle.sample.fixedscrollingtablayoutbanner.BannerView\n            android:id=\"@+id/static_header\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_gravity=\"top\"/&gt;\n\n    &lt;/android.support.v4.view.ViewPager&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p><em>CustomFragment.kt</em></p>\n\n<pre><code>class CustomFragment : Fragment() {\n        private lateinit var adapter: ArrayAdapter&lt;String&gt;\n\n        override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n            val view = inflater.inflate(R.layout.fragment_sample, container, false)\n            adapter = ArrayAdapter(context, R.layout.my_list_item, (1..20).map { \"${arguments.get(\"header\")}: Item #$it\" })\n            view.findViewById&lt;ListView&gt;(R.id.list_view).adapter = adapter\n            return view\n        }\n\n        companion object {\n            fun instance(header: String): Fragment {\n                val frag = CustomFragment()\n                val args = Bundle()\n                args.putString(\"header\", header)\n                frag.arguments = args\n                return frag\n            }\n        }\n    }\n</code></pre>\n\n<p><em>fragment_sample.xml</em></p>\n\n<pre><code>&lt;android.support.constraint.ConstraintLayout\n                 xmlns:android=\"http://schemas.android.com/apk/res/android\"\n                 xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n                 xmlns:tools=\"http://schemas.android.com/tools\"\n                 android:layout_width=\"match_parent\"\n                 android:layout_height=\"match_parent\"&gt;\n\n    &lt;ListView\n        android:id=\"@+id/list_view\"\n        android:layout_width=\"0dp\"\n        android:layout_height=\"0dp\"\n        app:layout_constraintLeft_toLeftOf=\"parent\"\n        app:layout_constraintRight_toRightOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        tools:listitem=\"@layout/my_list_item\"/&gt;\n\n&lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n\n<p><em>BannerView.kt</em></p>\n\n<pre><code>@ViewPager.DecorView\nclass BannerView @JvmOverloads constructor(context: Context, attrs: AttributeSet? = null, defStyleAttr: Int = 0) : FrameLayout(context, attrs, defStyleAttr) {\n    init {\n        inflate(context, R.layout.view_banner, this)\n    }\n}\n</code></pre>\n\n<p><em>my_list_item.xml</em></p>\n\n<pre><code>&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:orientation=\"vertical\"\n        android:background=\"#eee\"&gt;\n\n    &lt;TextView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:padding=\"8dp\"\n        android:text=\"Simplification of banner layout\"/&gt;\n\n    &lt;View\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"1dp\"\n        android:background=\"#ddd\" /&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n"}, {"tags": ["javascript", "android", "webview", "kotlin", "kotlin-js-interop"], "comments": [{"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1511802707, "post_id": 47515152, "comment_id": 81988567, "body": "Kotlin can compile to JS, there is a difference between Kotlin/JS and Kotlin/JVM"}, {"owner": {"reputation": 12672, "user_id": 1527232, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/n5xGm.png?s=128&g=1", "display_name": "lelloman", "link": "https://stackoverflow.com/users/1527232/lelloman"}, "edited": false, "score": 0, "creation_date": 1521128978, "post_id": 47515152, "comment_id": 85609700, "body": "You can compile Kotlin to js, ok, but if you don&#39;t have a WebView where are you going to run that js code?"}, {"owner": {"reputation": 35146, "user_id": 624069, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/b8cee93fc5bf70182b40c6c83b11dd43?s=128&d=identicon&r=PG", "display_name": "Niranj Patel", "link": "https://stackoverflow.com/users/624069/niranj-patel"}, "edited": false, "score": 0, "creation_date": 1521541588, "post_id": 47515152, "comment_id": 85764104, "body": "check my answer, it&#39;s working"}], "answers": [{"tags": [], "owner": {"reputation": 2419, "user_id": 231174, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2799805396016e89df69d26d22c4445c?s=128&d=identicon&r=PG", "display_name": "GaetanZ", "link": "https://stackoverflow.com/users/231174/gaetanz"}, "is_accepted": false, "score": 6, "last_activity_date": 1521327340, "creation_date": 1521327340, "answer_id": 49342739, "question_id": 47515152, "link": "https://stackoverflow.com/questions/47515152/kotlin-call-javascript-function-in-android-without-webview/49342739#49342739", "title": "Kotlin Call Javascript function in Android without webView", "body": "<p>It's not possible. You must not confuse the language with the platform.</p>\n\n<blockquote>\n  <p>Kotlin is interoperable with JS like Java</p>\n</blockquote>\n\n<p>means Kotlin/JS can use and be used in a Javascript platform (Node.js or browsers). The Kotlin code compiled (transpiled) into js is able to call other js files. And external Js code can call the js code build from Kotlin. This is the interoperability with JS.</p>\n\n<p>There is no interoperability between Kotlin/JS and Kotlin/JVM. </p>\n\n<p><a href=\"https://i.stack.imgur.com/EQ8cn.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/EQ8cn.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 3572, "user_id": 1299158, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/e848cdc75d0a22d7a3e370bc9aefb8c1?s=128&d=identicon&r=PG", "display_name": "box", "link": "https://stackoverflow.com/users/1299158/box"}, "edited": false, "score": 0, "creation_date": 1521542105, "post_id": 49357720, "comment_id": 85764489, "body": "I was using Rhino also, but it&#39;s just too slow...that&#39;s why I wanted to convert to Kotlin."}, {"owner": {"reputation": 35146, "user_id": 624069, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/b8cee93fc5bf70182b40c6c83b11dd43?s=128&d=identicon&r=PG", "display_name": "Niranj Patel", "link": "https://stackoverflow.com/users/624069/niranj-patel"}, "reply_to_user": {"reputation": 3572, "user_id": 1299158, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/e848cdc75d0a22d7a3e370bc9aefb8c1?s=128&d=identicon&r=PG", "display_name": "box", "link": "https://stackoverflow.com/users/1299158/box"}, "edited": false, "score": 1, "creation_date": 1521542316, "post_id": 49357720, "comment_id": 85764653, "body": "@box yes, it may be slow for large js file."}], "tags": [], "owner": {"reputation": 35146, "user_id": 624069, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/b8cee93fc5bf70182b40c6c83b11dd43?s=128&d=identicon&r=PG", "display_name": "Niranj Patel", "link": "https://stackoverflow.com/users/624069/niranj-patel"}, "is_accepted": false, "score": 9, "last_activity_date": 1536242255, "last_edit_date": 1536242255, "creation_date": 1521444419, "answer_id": 49357720, "question_id": 47515152, "link": "https://stackoverflow.com/questions/47515152/kotlin-call-javascript-function-in-android-without-webview/49357720#49357720", "title": "Kotlin Call Javascript function in Android without webView", "body": "<p>This is not possible straight forward but I found one library <a href=\"http://lifeofcoding.com/2015/04/05/Execute-JavaScript-in-Android-without-WebView/\" rel=\"nofollow noreferrer\">Execute JavaScript in Android without WebView</a> for achieve this.</p>\n\n<p>Read that blog carefully and follow below step.</p>\n\n<p>Keep your <code>JavaScript</code> file (<code>test.js</code>) in assets folder in android project.</p>\n\n<p>I have converted that code into Kotlin.</p>\n\n<p><strong>CallJavaScript.jks</strong></p>\n\n<pre><code>import org.mozilla.javascript.Context\nimport org.mozilla.javascript.Function\nimport java.io.InputStreamReader\n\n\nobject CallJavaScript {\n\n    fun callFunction(mContext: android.content.Context): Any? {\n\n        var jsResult: Any? = null\n\n        val params = arrayOf&lt;Any&gt;(\"\")\n\n        // Every Rhino VM begins with the enter()\n        // This Context is not Android's Context\n        val rhino = Context.enter()\n\n        // Turn off optimization to make Rhino Android compatible\n        rhino.optimizationLevel = -1\n        try {\n            val scope = rhino.initStandardObjects()\n\n            // Note the forth argument is 1, which means the JavaScript source has\n            // been compressed to only one line using something like YUI\n\n            val assetManager = mContext.assets\n            try {\n                val input = assetManager.open(\"test.js\")\n                val targetReader = InputStreamReader(input)\n                rhino.evaluateReader(scope, targetReader, \"JavaScript\", 1, null)\n            } catch (e: Exception) {\n                e.printStackTrace()\n            }\n\n\n            // Get the functionName defined in JavaScriptCode\n            val obj = scope.get(\"helloJS\", scope)\n\n            if (obj is Function) {\n\n                // Call the function with params\n                jsResult = obj.call(rhino, scope, scope, params)\n                // Parse the jsResult object to a String\n                val result = Context.toString(jsResult)\n            }\n        } finally {\n            Context.exit()\n        }\n        return jsResult\n    }\n}\n</code></pre>\n\n<p>Add this line to <code>build.gradle</code>:</p>\n\n<pre><code>implementation 'org.mozilla:rhino:1.7R4'\n</code></pre>\n\n<p>In your <code>assets</code> folder, create a file called <code>test.js</code>:</p>\n\n<pre><code>function helloJS()\n{\n    return \"Hello from JS\";\n}\n</code></pre>\n\n<p>Now simply call above function from Activity.</p>\n\n<pre><code> Log.e(\"JS : \", CallJavaScript.callFunction(this).toString());\n</code></pre>\n\n<p><strong>Output :</strong></p>\n\n<pre><code>E/JS\u00a0:: Hello from JS\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 871, "user_id": 1884196, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/UGVia.png?s=128&g=1", "display_name": "Fung LAM", "link": "https://stackoverflow.com/users/1884196/fung-lam"}, "is_accepted": false, "score": 0, "last_activity_date": 1521712598, "creation_date": 1521712598, "answer_id": 49425525, "question_id": 47515152, "link": "https://stackoverflow.com/questions/47515152/kotlin-call-javascript-function-in-android-without-webview/49425525#49425525", "title": "Kotlin Call Javascript function in Android without webView", "body": "<p>Kt looks like JS, but it is not. It will be compiled for Android runtime, not for the java script engine.</p>\n\n<p>JS code require a JS runtime, but it is not in Android Runtime.</p>\n\n<p>i.e. you cannot run JS directly in Java / Kt code for Android.</p>\n"}, {"tags": [], "owner": {"reputation": 2403, "user_id": 6528502, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/870552786382922/picture?type=large", "display_name": "Lucem", "link": "https://stackoverflow.com/users/6528502/lucem"}, "is_accepted": false, "score": 0, "last_activity_date": 1521717521, "creation_date": 1521717521, "answer_id": 49427306, "question_id": 47515152, "link": "https://stackoverflow.com/questions/47515152/kotlin-call-javascript-function-in-android-without-webview/49427306#49427306", "title": "Kotlin Call Javascript function in Android without webView", "body": "<p>Am not a pro in Kotlin but Java is a pie for me. Anything you can implement in Java can be implemented in Kotlin and To execute Javascript code, I use rhino which does the job pretty easier than using the webview\nImplement it:</p>\n\n<pre><code>try {\n   Scriptable scope = rhino.initStandardObjects();\n   rhino.evaluateString(scope, javaScriptCode, \"JavaScript\", 1, null);\n   Object obj = scope.get(functionNameInJavaScriptCode, scope);\n\n   if (obj instanceof Function) {\n\n       Function jsFunction = (Function) obj;\n       // Call the function with params\n       Object jsResult = jsFunction.call(rhino, scope, scope, params);\n       // Parse the jsResult object to a String\n       String result = Context.toString(jsResult);\n   }\n\n}finally {\n   Context.exit();\n}\n</code></pre>\n"}], "owner": {"reputation": 2628, "user_id": 3598263, "user_type": "registered", "accept_rate": 21, "profile_image": "https://i.stack.imgur.com/wZduf.jpg?s=128&g=1", "display_name": "Bharath Kumar Bachina", "link": "https://stackoverflow.com/users/3598263/bharath-kumar-bachina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2807, "favorite_count": 2, "answer_count": 4, "score": 11, "last_activity_date": 1593865111, "creation_date": 1511798765, "last_edit_date": 1521711356, "question_id": 47515152, "link": "https://stackoverflow.com/questions/47515152/kotlin-call-javascript-function-in-android-without-webview", "title": "Kotlin Call Javascript function in Android without webView", "body": "<p>Is there any way we can call JS function from Kotlin without having WebView in Android?</p>\n\n<p>Let's say as mentioned below I have one JS function <code>helloJS()</code> in <strong>test.js</strong> file,</p>\n\n<p><strong>test.js:-</strong></p>\n\n<pre><code>function helloJS(){\n    return \"Hello from JS\"\n}\n</code></pre>\n\n<p>And now I want to call this function from Kotlin file like </p>\n\n<p><strong>TestClass.kt:-</strong></p>\n\n<pre><code>class TestHello{\n\n    fun getHelloFromJS(){\n        val name = test.helloJS()\n    }\n}\n</code></pre>\n\n<p>Till now I am using Webview and loading JS file into that and getting result as call back</p>\n\n<p>But, I read that <a href=\"https://blog.jetbrains.com/kotlin/2014/12/javascript-interop/\" rel=\"noreferrer\">Kotlin is interoperable with JS like Java</a></p>\n\n<p>So I am curious to know if there is any way we can use that on Android without having webView</p>\n"}, {"tags": ["android", "interface", "kotlin"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 1, "creation_date": 1511794319, "post_id": 47513664, "comment_id": 81983159, "body": "I&#39;m not seeing how <code>context is FragmentEvent</code> would ever be true. In addition, that if could be simplified to <code>listener = context as? FragmentEvent</code>."}, {"owner": {"reputation": 1099, "user_id": 1327957, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/12190abf8ac417e88aee9f229addd09e?s=128&d=identicon&r=PG", "display_name": "Josh Ribeiro", "link": "https://stackoverflow.com/users/1327957/josh-ribeiro"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1511796725, "post_id": 47513664, "comment_id": 81984695, "body": "Neither do I, yet it works. I&#39;m wondering if there is a more standard way? The example was found here: <a href=\"https://www.raywenderlich.com/169885/android-fragments-tutorial-introduction-2\" rel=\"nofollow noreferrer\">raywenderlich.com/169885/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1099, "user_id": 1327957, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/12190abf8ac417e88aee9f229addd09e?s=128&d=identicon&r=PG", "display_name": "Josh Ribeiro", "link": "https://stackoverflow.com/users/1327957/josh-ribeiro"}, "edited": false, "score": 0, "creation_date": 1511797187, "post_id": 47514606, "comment_id": 81985023, "body": "Thank you for the prompt response. What I was looking for is an explanation as to why context would be an Interface. Doesn&#39;t context normally have to do with an activity or a fragment, not such a primitive class? And is this normal implementation? I am not seeing where the interface variable is instantiated."}, {"owner": {"reputation": 5192, "user_id": 3084205, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/qaFQu.jpg?s=128&g=1", "display_name": "Stanislav Bondar", "link": "https://stackoverflow.com/users/3084205/stanislav-bondar"}, "reply_to_user": {"reputation": 1099, "user_id": 1327957, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/12190abf8ac417e88aee9f229addd09e?s=128&d=identicon&r=PG", "display_name": "Josh Ribeiro", "link": "https://stackoverflow.com/users/1327957/josh-ribeiro"}, "edited": false, "score": 0, "creation_date": 1511797641, "post_id": 47514606, "comment_id": 81985313, "body": "@JoshRibeiro <code>context</code> in this case is parent activity context with all relations, so <code>FragmentEvent</code> object can be initialized if it is present in there. This style is recommended by google. If you are create new <code>Fragment</code> from dropdown menu (New -&gt; Fragment -&gt; Fragment(blank)) you&#39;ll see the same implementation"}, {"owner": {"reputation": 1099, "user_id": 1327957, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/12190abf8ac417e88aee9f229addd09e?s=128&d=identicon&r=PG", "display_name": "Josh Ribeiro", "link": "https://stackoverflow.com/users/1327957/josh-ribeiro"}, "edited": false, "score": 0, "creation_date": 1511798008, "post_id": 47514606, "comment_id": 81985550, "body": "Thank you Stanislav. I wasn&#39;t aware that it included items such as Interfaces, but your explanation about context being tied to a parent activity makes sense if that is given. I will mark this answered. Thanks again for your answer"}, {"owner": {"reputation": 2509, "user_id": 1738090, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9c5127a1f300d2f092a5eeb7f76ce348?s=128&d=identicon&r=PG", "display_name": "w3bshark", "link": "https://stackoverflow.com/users/1738090/w3bshark"}, "edited": false, "score": 0, "creation_date": 1535481499, "post_id": 47514606, "comment_id": 91079078, "body": "@StanislavBondar won&#39;t this leak listener when the Fragment is detached? Is it not necessary to set the listener to null in <code>onDetach()</code> when using lateinit var?"}], "tags": [], "owner": {"reputation": 5192, "user_id": 3084205, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/qaFQu.jpg?s=128&g=1", "display_name": "Stanislav Bondar", "link": "https://stackoverflow.com/users/3084205/stanislav-bondar"}, "is_accepted": true, "score": 6, "last_activity_date": 1511796961, "creation_date": 1511796961, "answer_id": 47514606, "question_id": 47513664, "link": "https://stackoverflow.com/questions/47513664/triggering-an-interface-in-kotlin-for-android/47514606#47514606", "title": "Triggering an Interface in Kotlin for Android", "body": "<p>In this code <code>lateinit var listener: FragmentEvent</code> should be initialized and can't be <code>null</code>. So <code>onAttach</code> should looks like </p>\n\n<pre><code>override fun onAttach(context: Context?) {\n    super.onAttach(context)\n    if (context is FragmentEvent) {\n        listener = context\n    } else {\n        throw RuntimeException(context!!.toString() + \" must implement FragmentEvent\")\n    }\n}\n</code></pre>\n\n<p>In this case if you forget to implement <code>FragmentEvent</code> in <code>Activity</code> you'll got an exception, otherwise callback is ready to use.</p>\n"}, {"tags": [], "owner": {"reputation": 197, "user_id": 3826579, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/2wpFx.jpg?s=128&g=1", "display_name": "Peterstev Uremgba", "link": "https://stackoverflow.com/users/3826579/peterstev-uremgba"}, "is_accepted": false, "score": 0, "last_activity_date": 1578959224, "creation_date": 1578959224, "answer_id": 59725762, "question_id": 47513664, "link": "https://stackoverflow.com/questions/47513664/triggering-an-interface-in-kotlin-for-android/59725762#59725762", "title": "Triggering an Interface in Kotlin for Android", "body": "<p>you could also use a try catch block and get the classic Java pattern</p>\n\n<pre><code>override fun onAttach(context: Context) {\n    super.onAttach(context)\n    try {\n        listener = context as YourInterface\n    } catch (e: IllegalStateException) {\n        Log.d(\"TAG\", \"MainActivity must implement YourInterface\")\n    }\n}\n</code></pre>\n\n<p>the 'as' keyword can be used in to replicate java explicit typecasting in kotlin</p>\n\n<pre><code>val customItem = arguments?.getSerializable(\"KEY\") as ArrayList&lt;Custom&gt;\n</code></pre>\n"}], "owner": {"reputation": 1099, "user_id": 1327957, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/12190abf8ac417e88aee9f229addd09e?s=128&d=identicon&r=PG", "display_name": "Josh Ribeiro", "link": "https://stackoverflow.com/users/1327957/josh-ribeiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3624, "favorite_count": 2, "accepted_answer_id": 47514606, "answer_count": 2, "score": 3, "last_activity_date": 1578959224, "creation_date": 1511794025, "question_id": 47513664, "link": "https://stackoverflow.com/questions/47513664/triggering-an-interface-in-kotlin-for-android", "title": "Triggering an Interface in Kotlin for Android", "body": "<p>There is a specific implementation of interface when it comes to using Kotlin for Android: triggering an interface from a fragment. Consider the common scenario where a Fragment must communicate a UI action to the parent Activity. In Java, we would define the interface, create a \"listener\" instance of it, and implement/override actions in interface parents. It is the creating a listener instance that is not so straightforward to me. After some googling, I found an implementation example but I do not understand why it works. Is there a better way to do this? Why must it be implemented the way it is below?</p>\n\n<pre><code>    class ImplementingFragment : Fragment(){\n\n  private lateinit var listener: FragmentEvent\n  private lateinit var vFab: FloatingActionButton\n\n  //Here is the key piece of code which triggers the interface which is befuddling to me\n  override fun onAttach(context: Context?) {\n          super.onAttach(context)\n          if(context is FragmentEvent) {\n              listener = context\n          }\n      }\n\n    //Notice the onClickListener using our interface listener member variable\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?,\n                              savedInstanceState: Bundle?): View? {\n        val v: View? = inflater.inflate(R.layout.fragment_layout, container, false)\n            vFab = v?.findViewById(R.id.fh_fab)\n            vFab.setOnClickListener{listener.SomethingHappened()}\n        return v\n    }  \n\n\n}\n\n\n\ninterface FragmentEvent{\n    fun SomethingHappened()\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "realm"], "comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1511793919, "post_id": 47513429, "comment_id": 81982890, "body": "<code>Enhancements: RealmList can now contain String, byte[], Boolean, Long, Integer, Short, Byte, Double, Float and Date values. Queries and Importing primitive lists from JSON are not supported yet.</code> so <b>Queries primitive lists is not supported yet</b> see <a href=\"https://github.com/realm/realm-java/blob/master/CHANGELOG.md#enhancements-4\" rel=\"nofollow noreferrer\">here</a>, it is tracked at <a href=\"https://github.com/realm/realm-java/issues/5361\" rel=\"nofollow noreferrer\">github.com/realm/realm-java/issues/5361</a> and currently <i>Blocked</i>."}, {"owner": {"reputation": 1709, "user_id": 1294982, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/fb2a35340cf7b991a942773d3f5247c3?s=128&d=identicon&r=PG&f=1", "display_name": "Maurice", "link": "https://stackoverflow.com/users/1294982/maurice"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1511794323, "post_id": 47513429, "comment_id": 81983165, "body": "Ah ok... Sheeeeeeeeeeeeet. Thank you for the comment."}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1511794594, "post_id": 47513429, "comment_id": 81983342, "body": "I agree, I want to see <code>RealmString</code> and <code>RealmLong</code> removed from all code bases, but primitive lists can&#39;t query like this yet unfortunately"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1511794659, "post_id": 47513429, "comment_id": 81983387, "body": "Can&#39;t you set up a link from the Child to the Parent, or the Parent to the Child; and then set up a linking objects in the opposing direction when you save your models?"}, {"owner": {"reputation": 1709, "user_id": 1294982, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/fb2a35340cf7b991a942773d3f5247c3?s=128&d=identicon&r=PG&f=1", "display_name": "Maurice", "link": "https://stackoverflow.com/users/1294982/maurice"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1511885264, "post_id": 47513429, "comment_id": 82028778, "body": "Yes I can and I will. Don&#39;t have the choice.."}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1511885957, "post_id": 47513429, "comment_id": 82029234, "body": "That&#39;s how I used to do it, except back then I couldn&#39;t even use <code>@LinkingObjects</code> which is a shame because it is super-powerful. Also Realm 3.x+ doesn&#39;t really like manually bidirectional schemas anymore anyways."}], "owner": {"reputation": 1709, "user_id": 1294982, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/fb2a35340cf7b991a942773d3f5247c3?s=128&d=identicon&r=PG&f=1", "display_name": "Maurice", "link": "https://stackoverflow.com/users/1294982/maurice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 651, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1511793319, "creation_date": 1511793319, "question_id": 47513429, "link": "https://stackoverflow.com/questions/47513429/realm-android-query-a-list-of-primitives-not-working", "title": "Realm Android query a list of primitives not working", "body": "<p>Two objects:\nA parent and a child with a list of parent id.</p>\n\n<p><strong>Parent</strong></p>\n\n<pre><code>open class Parent(\n        @PrimaryKey\n        open var id: Long? = null\n) : RealmObject() {}\n</code></pre>\n\n<p><strong>Child</strong></p>\n\n<pre><code>open class Child(\n        @PrimaryKey\n        open var id: Long? = null,\n        open var parentsId: RealmList&lt;Long&gt;? = null\n) : RealmObject() {}\n</code></pre>\n\n<p>Can't find a way to obtain the list of child with a parent id.</p>\n\n<p>I tried this because of this <a href=\"https://github.com/realm/realm-java/issues/5361\" rel=\"nofollow noreferrer\">link</a>:</p>\n\n<pre><code>realm.where(Child::class.java).equalTo(\"parentsId\", idParent).findAll()\n</code></pre>\n\n<p>But it's not working, always getting this error:</p>\n\n<pre><code>java.lang.IllegalArgumentException: Invalid query: field 'parentsId' in class 'Child' is of invalid type 'INTEGER_LIST'.\n</code></pre>\n"}, {"tags": ["drop-down-menu", "kotlin", "vaadin", "selection", "vaadin8"], "answers": [{"tags": [], "owner": {"reputation": 29543, "user_id": 3181392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SIgPs.png?s=128&g=1", "display_name": "cfrick", "link": "https://stackoverflow.com/users/3181392/cfrick"}, "is_accepted": true, "score": 2, "last_activity_date": 1511792220, "creation_date": 1511792220, "answer_id": 47513060, "question_id": 47512111, "link": "https://stackoverflow.com/questions/47512111/vaadin-8-nativeselect-change-data-representation-of-list/47513060#47513060", "title": "Vaadin 8 NativeSelect change data representation of list", "body": "<p>You have to provide a <a href=\"https://vaadin.com/api/8.0.5/com/vaadin/ui/NativeSelect.html#setItemCaptionGenerator-com.vaadin.ui.ItemCaptionGenerator-\" rel=\"nofollow noreferrer\"><code>setItemCaptionGenerator</code></a> for this.  Otherwise Vaadin falls back to the <code>.toString()</code> implementation.</p>\n\n<p>There is a whole section about dealing with things around that in <a href=\"https://vaadin.com/docs/v8/framework/components/components-selection.html#components.selection\" rel=\"nofollow noreferrer\">Vaadin Documentation</a></p>\n"}], "owner": {"reputation": 1595, "user_id": 2528868, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3aa060cf8a30ad2d70ac67d35660e8d0?s=128&d=identicon&r=PG", "display_name": "Shiri", "link": "https://stackoverflow.com/users/2528868/shiri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 47513060, "answer_count": 1, "score": 1, "last_activity_date": 1511792220, "creation_date": 1511789292, "last_edit_date": 1511790052, "question_id": 47512111, "link": "https://stackoverflow.com/questions/47512111/vaadin-8-nativeselect-change-data-representation-of-list", "title": "Vaadin 8 NativeSelect change data representation of list", "body": "<p>I am using Vaadin 8 <code>NativeSelect</code> as a dropdown for users to make selections. Each selection refers to an object instance that holds multiple pieces of data and I only want the dropdown to display one piece of identifying information pertaining to a single variable in that object however it doesn't seem like <code>NativeSelect</code> can handle Model and Presentation separately in an obvious way.</p>\n\n<pre><code>data class Consultant(\n    val name: String,\n    val id: Long\n)\n\nval consultantSelection = NativeSelect&lt;Consultant&gt;().apply { \n    setItems(consultantDao.getAll())\n    caption = \"Select Consultant\"\n}\n</code></pre>\n\n<p>In my code, I create a <code>NativeSelect</code> handling a type of <code>Consultant</code> which then creates a dropdown menu that simply unpacks the contents of the respective <code>Consultant</code> objects as each selectable. I would like to only display the <code>name</code> of the <code>Consultant</code> in the selection.</p>\n\n<p>Is there a way to achieve this?</p>\n"}, {"tags": ["kotlin", "javadoc"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1511789016, "post_id": 47511973, "comment_id": 81979716, "body": "You could use the <code>@Throws</code> annotation.  IMO makes most sense to place this on the interface methods."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1511789155, "post_id": 47511973, "comment_id": 81979795, "body": "If it&#39;s on the implementation, then a function taking the interface won&#39;t know whether it can throw or what it can throw. Worse would be two implementations throwing different things. See: <a href=\"https://en.wikipedia.org/wiki/Liskov_substitution_principle\" rel=\"nofollow noreferrer\">LSP</a>"}], "answers": [{"tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": true, "score": 1, "last_activity_date": 1517431951, "last_edit_date": 1517431951, "creation_date": 1511790172, "answer_id": 47512371, "question_id": 47511973, "link": "https://stackoverflow.com/questions/47511973/kotlin-document-exception-thrown-by-an-interface-method/47512371#47512371", "title": "Kotlin - Document exception thrown by an interface method", "body": "<p>Since clients program against the interface, I'd suggest the documentation to be made in the Javadoc/KDoc of that interface. Whether you actually should document them is discussed in <em><a href=\"https://stackoverflow.com/questions/824217/should-methods-that-throw-runtimeexception-indicate-it-in-method-signature\">this</a></em> thread for example: </p>\n\n<p><a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/runtime.html\" rel=\"nofollow noreferrer\">Oracle</a> recommends: </p>\n\n<blockquote>\n  <p>If it's so good to document a method's API, including the exceptions it can throw, why not specify runtime exceptions too? <br>Runtime exceptions represent problems that are the result of a programming problem, and as such, the API client code cannot reasonably be expected to recover from them or to handle them in any way. Such problems include arithmetic exceptions, such as dividing by zero; pointer exceptions, such as trying to access an object through a null reference; and indexing exceptions, such as attempting to access an array element through an index that is too large or too small.<br> Runtime exceptions can occur anywhere in a program, and in a typical one they can be very numerous. Having to add runtime exceptions in every method declaration would reduce a program's clarity.</p>\n</blockquote>\n\n<p>So if the information is useful for a client it should be documented (i.e. if the client can handle it, e.g. <code>IOException</code>). For \"regular\" runtime exceptions such as an <code>IllegalArgumentException</code> I would say \"no\", do not document them. </p>\n"}], "owner": {"reputation": 73, "user_id": 8851528, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rD2UJbOc9K4/AAAAAAAAAAI/AAAAAAAAAI4/pOR8Q1vSK20/photo.jpg?sz=128", "display_name": "Fraquack", "link": "https://stackoverflow.com/users/8851528/fraquack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 328, "favorite_count": 0, "accepted_answer_id": 47512371, "answer_count": 1, "score": 3, "last_activity_date": 1517431951, "creation_date": 1511788879, "question_id": 47511973, "link": "https://stackoverflow.com/questions/47511973/kotlin-document-exception-thrown-by-an-interface-method", "title": "Kotlin - Document exception thrown by an interface method", "body": "<p>Since Kotlin hasn't got checked exception, what's the correct way to document exception expected to be thrown by an interface method? Should I document it in the interface or in the implementing class (only if the concrete method actually throws it)?</p>\n"}, {"tags": ["android", "kotlin", "retrofit2", "kotlin-reflect"], "comments": [{"owner": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "edited": false, "score": 1, "creation_date": 1511799336, "post_id": 47510595, "comment_id": 81986414, "body": "<code>KFunction</code> should work. <code>private fun &lt;T&gt; getHttpPathFromAnnotation(method: KFunction&lt;T&gt;?)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "is_accepted": true, "score": 4, "last_activity_date": 1511792530, "last_edit_date": 1511792530, "creation_date": 1511792105, "answer_id": 47513027, "question_id": 47510595, "link": "https://stackoverflow.com/questions/47510595/read-kotlin-function-annotation-value-using-reflection/47513027#47513027", "title": "Read Kotlin function annotation value using reflection?", "body": "<p>Use the Kotlin <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/-k-function/index.html\" rel=\"nofollow noreferrer\"><code>KFunction</code></a> <em>directly</em> instead of <code>javaMethod</code> (you're using Kotlin anyway!), and <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect.full/find-annotation.html\" rel=\"nofollow noreferrer\"><code>findAnnotation</code></a> for concise, idiomatic code.</p>\n\n<p>This will also work if the annotation happens to not be the first, where <code>annotations[0]</code> may break.</p>\n\n<pre><code>val method = ApiDefinition::getObjects\n\nval annotation = method.findAnnotation&lt;GET&gt;() // Will be null if it doesn't exist\n\nval path = annotation?.path\n</code></pre>\n\n<p>Basically all <code>findAnnotation</code> does is return</p>\n\n<pre><code>annotations.filterIsInstance&lt;T&gt;().firstOrNull()\n</code></pre>\n"}], "owner": {"reputation": 27144, "user_id": 477415, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/iBHq6.jpg?s=128&g=1", "display_name": "Ollie C", "link": "https://stackoverflow.com/users/477415/ollie-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3643, "favorite_count": 0, "accepted_answer_id": 47513027, "answer_count": 1, "score": 2, "last_activity_date": 1511856706, "creation_date": 1511784281, "last_edit_date": 1511856706, "question_id": 47510595, "link": "https://stackoverflow.com/questions/47510595/read-kotlin-function-annotation-value-using-reflection", "title": "Read Kotlin function annotation value using reflection?", "body": "<p>Given an interface method like this (Android Retrofit), how do I read the URL path specified in the annotation argument from Kotlin code at runtime?</p>\n\n<p>ApiDefinition interface:</p>\n\n<pre><code>@GET(\"/api/somepath/objects/\")\nfun getObjects(...)\n</code></pre>\n\n<p>Read the annotation value:</p>\n\n<pre><code>val method = ApiDefinition::getObjects.javaMethod\nval verb = method!!.annotations[0].annotationClass.simpleName ?: \"\"\n// verb contains \"GET\" as expected\n// But how to get the path specified in the annotation?\nval path = method!!.annotations[0].????????\n</code></pre>\n\n<p>UPDATE 1</p>\n\n<p>Thanks for answers. I'm still struggling as I can't see what type to use to do the following:</p>\n\n<pre><code>val apiMethod = ApiDefinition::getObjects\n</code></pre>\n\n<p>.... then to pass that function reference into  a method like this (it's reused)</p>\n\n<pre><code>private fun getHttpPathFromAnnotation(method: Method?) : String {\n    val a = method!!.annotations[0].message\n}\n</code></pre>\n\n<p>IntelliJ IDE is suggesting I use KFunction5&lt;> as a function parameter type (it doesn't exist as far as I can see) and seems to be requiring I specify all the parameter types for the method too, which makes a generic call to get the annotation attribute impossible. Isn't there a Kotlin equivalent of \"Method\"?, a type that will accept any method? I tried KFunction, without success.</p>\n\n<p>UPDATE 2</p>\n\n<p>Thanks for clarifying things. I've got to this point:</p>\n\n<p>ApiDefinition (Retrofit interface)</p>\n\n<pre><code>@GET(API_ENDPOINT_LOCATIONS)\nfun getLocations(@Header(API_HEADER_TIMESTAMP) timestamp: String,\n                 @Header(API_HEADER_SIGNATURE) encryptedSignature: String,\n                 @Header(API_HEADER_TOKEN) token: String,\n                 @Header(API_HEADER_USERNAME) username: String\n                 ): Call&lt;List&lt;Location&gt;&gt;\n</code></pre>\n\n<p>Method to retrieve annotation argument:</p>\n\n<pre><code>private fun &lt;T&gt; getHttpPathFromAnnotation(method: KFunction&lt;T&gt;) : String {\n    return method.annotations.filterIsInstance&lt;GET&gt;().get(0).value\n}\n</code></pre>\n\n<p>Call to get the path argument for a specific method:</p>\n\n<pre><code>    val path = getHttpPathFromAnnotation&lt;ApiDefinition&gt;(ApiDefinition::getLocations as KFunction&lt;ApiDefinition&gt;)\n</code></pre>\n\n<p>The implicit cast seems to be necessary or the type parameter demands I provide a KFunction5 type.</p>\n\n<p>This code works, but it has the GET annotation hard-coded, is there a way to make it more generic? I suspect I might need to look for GET, POST and PUT and return the first match.</p>\n"}, {"tags": ["serialization", "kotlin", "google-cloud-firestore"], "comments": [{"owner": {"reputation": 1454, "user_id": 2000099, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/24acb368d6f831aa7ea51c391f32c2af?s=128&d=identicon&r=PG", "display_name": "vmtrue", "link": "https://stackoverflow.com/users/2000099/vmtrue"}, "edited": false, "score": 0, "creation_date": 1511784955, "post_id": 47509928, "comment_id": 81977137, "body": "Try to use @Transient for id"}, {"owner": {"reputation": 2530, "user_id": 2125351, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5GO1Q.jpg?s=128&g=1", "display_name": "Sean Blahovici", "link": "https://stackoverflow.com/users/2125351/sean-blahovici"}, "reply_to_user": {"reputation": 1454, "user_id": 2000099, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/24acb368d6f831aa7ea51c391f32c2af?s=128&d=identicon&r=PG", "display_name": "vmtrue", "link": "https://stackoverflow.com/users/2000099/vmtrue"}, "edited": false, "score": 1, "creation_date": 1512037337, "post_id": 47509928, "comment_id": 82099224, "body": "@fisher3421 Tried but the behaviour still remains the same."}], "owner": {"reputation": 2530, "user_id": 2125351, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5GO1Q.jpg?s=128&g=1", "display_name": "Sean Blahovici", "link": "https://stackoverflow.com/users/2125351/sean-blahovici"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 230, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1511782128, "creation_date": 1511782128, "question_id": 47509928, "link": "https://stackoverflow.com/questions/47509928/trying-to-exclude-field-when-persisting-kotlin-data-class-as-document-to-google", "title": "Trying to exclude field when persisting kotlin data class as document to Google Cloud Firestore", "body": "<p>I have this data class</p>\n\n<pre><code>data class TripEntity(@Exclude val id: String = \"\", val name: String = \"\", val totalDistance: Long = 0, val startDate: Date?, val endDate: Date?)\n</code></pre>\n\n<p>Then I have these methods to persist the data </p>\n\n<pre><code>private fun writeNewTripEntity(tripEntity: TripEntity, emitter: ObservableEmitter&lt;TripEntity&gt;) {\n    val tripCollection = FirebaseFirestore.getInstance().collection(\"users/test/trips\");\n    tripCollection.add(tripEntity).addOnSuccessListener({ documentReference -&gt;\n        onWriteEntitySuccess(documentReference, emitter, tripEntity)\n    }).addOnFailureListener({ e -&gt;\n        onWriteEntityError(e, emitter)\n    })\n}\n\nprivate fun onWriteEntitySuccess(documentReference: DocumentReference, emitter: ObservableEmitter&lt;TripEntity&gt;, tripEntity: TripEntity) {\n    Timber.log(Log.DEBUG, \"TripEntity saved to FireBase successfully: \" + documentReference.toString())\n    emitter.onNext(TripEntity(documentReference.id, tripEntity.name, tripEntity.totalDistance, tripEntity.startDate, tripEntity.endDate))\n    emitter.onComplete()\n}\n\nprivate fun onWriteEntityError(e: Exception, emitter: ObservableEmitter&lt;TripEntity&gt;) {\n    Timber.e(\"Data could not be saved: %s\", e.message)\n    emitter.onError(e)\n}\n</code></pre>\n\n<p>The document is then persisted in Firestore but the ID is not excluded, as it should be according to Firestore documentation.</p>\n\n<p><a href=\"https://i.stack.imgur.com/kDeJI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kDeJI.png\" alt=\"Document screenshot\"></a></p>\n\n<p>Thanks for any help.</p>\n"}, {"tags": ["javascript", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": true, "score": 6, "last_activity_date": 1511780882, "creation_date": 1511780882, "answer_id": 47509512, "question_id": 47509399, "link": "https://stackoverflow.com/questions/47509399/how-can-i-use-kotlinjs-without-the-stdlib/47509512#47509512", "title": "How can I use KotlinJS without the stdlib?", "body": "<p>You should make use of Kotlin's <code>kotlin-dce-js</code> Plugin, which does exactly what you want: Minimize the code to what you really use and eliminate the \"dead code\".</p>\n\n<p>See here:\n <a href=\"https://kotlinlang.org/docs/reference/javascript-dce.html#javascript-dce\" rel=\"noreferrer\">https://kotlinlang.org/docs/reference/javascript-dce.html#javascript-dce</a></p>\n\n<blockquote>\n  <p>\"There are several ways you get unused declarations: [...] - You are using a shared library which provides much more functions than you actually need. For example, standard library (kotlin.js) contains functions for manipulating lists, arrays, char sequences, adapters for DOM, etc, which together gives about 1.3 mb file. A simple \"Hello, world\" application only requires console routines, which is only few kilobytes for the entire file.\"</p>\n</blockquote>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user9017713"}, "is_accepted": false, "score": 2, "last_activity_date": 1511835296, "creation_date": 1511835296, "answer_id": 47522866, "question_id": 47509399, "link": "https://stackoverflow.com/questions/47509399/how-can-i-use-kotlinjs-without-the-stdlib/47522866#47522866", "title": "How can I use KotlinJS without the stdlib?", "body": "<p>Here's an alternative. You can kick out the kotlin runtime and make use of this method declaration:</p>\n\n<pre><code>external fun js(code: String): dynamic\n</code></pre>\n\n<p>Like, if you're using <code>console.log</code>, just write</p>\n\n<pre><code>js(\"console\").log(\"Hey man\")\n</code></pre>\n\n<p>And remove the check you mentioned in the description. It'll work.</p>\n"}], "owner": {"reputation": 5469, "user_id": 7083401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eA15o.png?s=128&g=1", "display_name": "ice1000", "link": "https://stackoverflow.com/users/7083401/ice1000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 726, "favorite_count": 3, "accepted_answer_id": 47509512, "answer_count": 2, "score": 4, "last_activity_date": 1511835296, "creation_date": 1511780555, "question_id": 47509399, "link": "https://stackoverflow.com/questions/47509399/how-can-i-use-kotlinjs-without-the-stdlib", "title": "How can I use KotlinJS without the stdlib?", "body": "<p>Since in most cases we have this:</p>\n\n<pre><code>dependencies {\n    compile \"org.jetbrains.kotlin:kotlin-stdlib-js:$kotlin_version\"\n}\n</code></pre>\n\n<p>And the Kotlin standard library seems to large for me.<br>\nI want to minimize it by creating my own stdlib, which can be smaller, by declaring only <code>external</code> methods I need.</p>\n\n<p>I tried to remove that method, it compiles, but the generated JS code has this:</p>\n\n<pre><code>if (typeof kotlin === 'undefined') {\n  throw new Error(\"Error loading module 'streaking'. Its dependency 'kotlin' was not found. Please, check whether 'kotlin' is loaded prior to 'streaking'.\");\n}\n</code></pre>\n\n<p>Which means that there must be something necessary in the stdlib, which I don't know.</p>\n\n<p>As my requirements are described above, is there any workarounds?<br>\nOr how can I reduce the size of the generated code?</p>\n"}, {"tags": ["android", "unit-testing", "junit", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 10656, "user_id": 2399024, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JjSNR.jpg?s=128&g=1", "display_name": "donfuxx", "link": "https://stackoverflow.com/users/2399024/donfuxx"}, "is_accepted": true, "score": 41, "last_activity_date": 1511779777, "creation_date": 1511779777, "answer_id": 47509138, "question_id": 47509137, "link": "https://stackoverflow.com/questions/47509137/the-rule-must-be-public-validationerror-in-kotlin-junit-test/47509138#47509138", "title": "The @Rule &gt; must be public ValidationError in Kotlin Junit test", "body": "<p>The solution is to apply @Rule annotation to property getter:</p>\n\n<pre><code>@get:Rule\nval htmlManager = HtmlManager()\n</code></pre>\n\n<p>more detail here: <a href=\"https://kotlinlang.org/docs/reference/annotations.html#java-annotations\" rel=\"noreferrer\">https://kotlinlang.org/docs/reference/annotations.html#java-annotations</a></p>\n\n<p>see the fixed test case code here in my open-source project: <a href=\"https://github.com/appham/Sharemarks/commit/310c115d5a820be900abc321cc061aeab7af2e5a#diff-5e1e851ef5b9bb333abb96dec3199a94\" rel=\"noreferrer\">https://github.com/appham/Sharemarks/commit/310c115d5a820be900abc321cc061aeab7af2e5a#diff-5e1e851ef5b9bb333abb96dec3199a94</a></p>\n"}, {"tags": [], "owner": {"reputation": 484, "user_id": 802055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dbb939fca9ad3ea92b9e73ba4130b27?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/802055/steve"}, "is_accepted": false, "score": 8, "last_activity_date": 1536054477, "creation_date": 1536054477, "answer_id": 52163471, "question_id": 47509137, "link": "https://stackoverflow.com/questions/47509137/the-rule-must-be-public-validationerror-in-kotlin-junit-test/52163471#52163471", "title": "The @Rule &gt; must be public ValidationError in Kotlin Junit test", "body": "<p>You can also use the <code>@JvmField</code> annotation</p>\n\n<pre><code>@Rule @JvmField \nval htmlManager = HtmlManager()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7609, "user_id": 2401535, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/BImS2.jpg?s=128&g=1", "display_name": "Marian Pa\u017adzioch", "link": "https://stackoverflow.com/users/2401535/marian-pa%c5%badzioch"}, "is_accepted": false, "score": 0, "last_activity_date": 1602660617, "creation_date": 1602660617, "answer_id": 64348546, "question_id": 47509137, "link": "https://stackoverflow.com/questions/47509137/the-rule-must-be-public-validationerror-in-kotlin-junit-test/64348546#64348546", "title": "The @Rule &gt; must be public ValidationError in Kotlin Junit test", "body": "<p>Another solution is:</p>\n<pre><code>val htmlManager = HtmlManager()\n    @Rule get() = field\n</code></pre>\n"}], "owner": {"reputation": 10656, "user_id": 2399024, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JjSNR.jpg?s=128&g=1", "display_name": "donfuxx", "link": "https://stackoverflow.com/users/2399024/donfuxx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4480, "favorite_count": 0, "accepted_answer_id": 47509138, "answer_count": 3, "score": 15, "last_activity_date": 1602660617, "creation_date": 1511779777, "question_id": 47509137, "link": "https://stackoverflow.com/questions/47509137/the-rule-must-be-public-validationerror-in-kotlin-junit-test", "title": "The @Rule &gt; must be public ValidationError in Kotlin Junit test", "body": "<p>I tried to use a unit test rule annotation and Android Studio didn't highlight any error here:</p>\n\n<pre><code>@Rule val htmlManager = HtmlManager()\n</code></pre>\n\n<p>However after executing the test following error happens:    </p>\n\n<blockquote>\n  <p>org.junit.internal.runners.rules.ValidationError: The @Rule\n  'htmlManager' must be public.</p>\n</blockquote>\n\n<p>How to fix this?</p>\n"}, {"tags": ["android", "gradle", "kotlin", "proguard", "signing"], "owner": {"reputation": 249, "user_id": 6787154, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fcf3a0dfdde96f9f6ba1f18ee7cde000?s=128&d=identicon&r=PG", "display_name": "Harman Kamboj", "link": "https://stackoverflow.com/users/6787154/harman-kamboj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1511771793, "creation_date": 1511771793, "question_id": 47506702, "link": "https://stackoverflow.com/questions/47506702/android-apk-crashes-after-signed-built-proguard-already-turned-off", "title": "Android Apk crashes after signed built - Proguard already turned off", "body": "<p>Android APK crashes after building a signed version, however debug version runs just fine when I deploy. I've checked the previous questions and tried disabling proguard but it's the same and the apk is still crashing.</p>\n\n<p>Here's a output from my logcat</p>\n\n<pre><code>11-27 13:33:00.432 1130-1275/? E/cm_cmc_c: app launch:com.earnso.mangaworld\n11-27 13:33:00.534 26412-26412/? E/dalvikvm: Could not find class 'kotlin.jvm.internal.PropertyReference1Impl', referenced from method com.earnso.mangaworld.util.RarContentProvider.&lt;clinit&gt;\n11-27 13:33:00.547 26412-26412/? E/AndroidRuntime: FATAL EXCEPTION: main\n                                                   Process: com.earnso.mangaworld, PID: 26412\n                                                   java.lang.NoClassDefFoundError: kotlin.jvm.internal.PropertyReference1Impl\n                                                       at com.earnso.mangaworld.util.RarContentProvider.&lt;clinit&gt;(RarContentProvider.kt)\n                                                       at java.lang.Class.newInstanceImpl(Native Method)\n                                                       at java.lang.Class.newInstance(Class.java:1215)\n                                                       at android.app.ActivityThread.installProvider(ActivityThread.java:5037)\n                                                       at android.app.ActivityThread.installContentProviders(ActivityThread.java:4623)\n                                                       at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4563)\n                                                       at android.app.ActivityThread.access$1500(ActivityThread.java:151)\n                                                       at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1402)\n                                                       at android.os.Handler.dispatchMessage(Handler.java:110)\n                                                       at android.os.Looper.loop(Looper.java:193)\n                                                       at android.app.ActivityThread.main(ActivityThread.java:5333)\n                                                       at java.lang.reflect.Method.invokeNative(Native Method)\n                                                       at java.lang.reflect.Method.invoke(Method.java:515)\n                                                       at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:828)\n                                                       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:644)\n                                                       at dalvik.system.NativeStart.main(Native Method)\n</code></pre>\n\n<p>And this is my gradle file</p>\n\n<pre><code>buildTypes {\n        debug {\n            versionNameSuffix \"-${getCommitCount()}\"\n            applicationIdSuffix \".debug\"\n            multiDexEnabled true\n        }\n        release {\n            //minifyEnabled true\n            //shrinkResources true\n            //multiDexEnabled false\n            //proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n            multiDexEnabled true\n        }\n    }\nflavorDimensions \"default\"\n    productFlavors {\n        standard {\n            buildConfigField \"boolean\", \"INCLUDE_UPDATER\", \"true\"\n            dimension \"default\"\n        }\n        fdroid {\n            dimension \"default\"\n        }\n        dev {\n            minSdkVersion 19\n            resConfigs \"en\", \"xxhdpi\"\n            dimension \"default\"\n        }\n    }\n</code></pre>\n\n<p>I've even tried commenting out everything in the proguard but it's still the same. Also I'm building standardrelease version for the app. And the Application is coded in <code>Kotlin</code></p>\n"}, {"tags": ["android", "design-patterns", "kotlin"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1511779221, "post_id": 47505991, "comment_id": 81973636, "body": "<code>now I must create Object&#39;s instance first</code> Did it work ?"}, {"owner": {"reputation": 64, "user_id": 2579004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48aefd0b782dfa5741a2cfcff86d116b?s=128&d=identicon&r=PG", "display_name": "garbus", "link": "https://stackoverflow.com/users/2579004/garbus"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1511818019, "post_id": 47505991, "comment_id": 81996553, "body": "@voddan I thought so, because I used this inside of main activity: <code>private var myPrivateVar: MySingleton = MySingleton</code>, and it did not caused syntax error. Seems like it&#39;s only copying reference in this case, or something like this. Sorry, I am still new in Kotlin."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1511819862, "post_id": 47505991, "comment_id": 81997464, "body": "I see. Since any instance initialization is an action, it is always requires braces like a function call <code>MyClass()</code>. That&#39;s how you know you call a constructor and create an object."}], "answers": [{"comments": [{"owner": {"reputation": 53550, "user_id": 1083957, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/vIOTT.jpg?s=128&g=1", "display_name": "azizbekian", "link": "https://stackoverflow.com/users/1083957/azizbekian"}, "edited": false, "score": 0, "creation_date": 1511770598, "post_id": 47506161, "comment_id": 81968498, "body": "Can I use constants without initializing the object itself? Assume, that my <code>object</code> is pretty heavy to initialize, thus I&#39;m doing it lazily, when needed. But I want to access static fields. Can that be achieved?"}, {"owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "reply_to_user": {"reputation": 53550, "user_id": 1083957, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/vIOTT.jpg?s=128&g=1", "display_name": "azizbekian", "link": "https://stackoverflow.com/users/1083957/azizbekian"}, "edited": false, "score": 2, "creation_date": 1511770642, "post_id": 47506161, "comment_id": 81968519, "body": "If declared as <code>object</code> the compiler will take care of creating it. There&#39;s only one single instance at runtime. You can&#39;t access these constants before the object is created because an object always gets created"}, {"owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "edited": false, "score": 0, "creation_date": 1511770800, "post_id": 47506161, "comment_id": 81968588, "body": "@garbus If you plan to do heavy lifting inside your object&#39;s init block, don&#39;t do it. In general one should not do that during class instantiation / object creation. But the fields should be accessible as shown by Simon and me anyways."}, {"owner": {"reputation": 64, "user_id": 2579004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48aefd0b782dfa5741a2cfcff86d116b?s=128&d=identicon&r=PG", "display_name": "garbus", "link": "https://stackoverflow.com/users/2579004/garbus"}, "edited": false, "score": 0, "creation_date": 1511773889, "post_id": 47506161, "comment_id": 81970221, "body": "Ah, so compiler creates this instance for me automatically. Did not know that. Thanks for clearing out."}, {"owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "edited": false, "score": 0, "creation_date": 1511773970, "post_id": 47506161, "comment_id": 81970268, "body": "It&#39;s happening in the generated bytecode (to be exact)"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1511779156, "post_id": 47506161, "comment_id": 81973605, "body": "By the way, the object is created lazily on the first access, just like you wanted"}, {"owner": {"reputation": 64, "user_id": 2579004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48aefd0b782dfa5741a2cfcff86d116b?s=128&d=identicon&r=PG", "display_name": "garbus", "link": "https://stackoverflow.com/users/2579004/garbus"}, "edited": false, "score": 0, "creation_date": 1511820394, "post_id": 47506161, "comment_id": 81997724, "body": "Okay, the info about auto-creating this object helped definitely. I misunderstood the idea of objects in Kotlin. Thanks!"}, {"owner": {"reputation": 64, "user_id": 2579004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48aefd0b782dfa5741a2cfcff86d116b?s=128&d=identicon&r=PG", "display_name": "garbus", "link": "https://stackoverflow.com/users/2579004/garbus"}, "reply_to_user": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "edited": false, "score": 0, "creation_date": 1511820970, "post_id": 47506161, "comment_id": 81997997, "body": "@WilliMentzel, no, I just want to keep there state of the app and name these states with human readable properties, so they will be grouped inside of this object and accessible from outside as well. This in fact works as you described, thanks!"}], "tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": true, "score": 4, "last_activity_date": 1511769357, "creation_date": 1511769357, "answer_id": 47506161, "question_id": 47505991, "link": "https://stackoverflow.com/questions/47505991/kotlin-any-substitute-for-companion-object-inside-of-another-object-not-class/47506161#47506161", "title": "Kotlin - any substitute for companion object inside of another object (not class)?", "body": "<p>As you said, <code>MySingleton</code> is an <code>object</code> and thus a <strong>singleton</strong>. There's no need to create an instance of it (not even possible). You simply access it's constants in a static way like this: <code>MySingleton._DEF_DEFINITION_NO_ONE</code>.</p>\n\n<p>If you want to use the constants without prefixing the <code>object</code> name, just import them with the fully-qualified name and use it as follows:</p>\n\n<pre><code>import package.MySingleton._DEF_DEFINITION_NO_ONE\n//...\nprintln(_DEF_DEFINITION_NO_ONE)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "is_accepted": false, "score": 6, "last_activity_date": 1511770234, "creation_date": 1511770234, "answer_id": 47506341, "question_id": 47505991, "link": "https://stackoverflow.com/questions/47505991/kotlin-any-substitute-for-companion-object-inside-of-another-object-not-class/47506341#47506341", "title": "Kotlin - any substitute for companion object inside of another object (not class)?", "body": "<p>There are two ways to work with static data in Kotlin:</p>\n\n<p><strong>An <code>object</code></strong></p>\n\n<pre><code>object ASingleton {\n    val CONSTANT_PROPERTY: Int = 1;\n}\n</code></pre>\n\n<p>If you need a single instance class, which has only one state for each property, use a singleton. Note: There can only be one instance of this class and it is created for you by the compiler.</p>\n\n<p><strong>A class with a <code>companion object</code></strong></p>\n\n<pre><code>class ClassWithCompanionObject{\n\n    val someProperty: Int = 0; // instance bound\n\n    companion object {\n        val CONSTANT_PROPERTY: Int = 1;\n    }\n}\n</code></pre>\n\n<p>If you need some static properties, and the rest should have a state which is bound to a certain instance, go with the class with <code>companion object</code>.</p>\n\n<p>Usage:</p>\n\n<pre><code>println(ASingleton.CONSTANT_PROPERTY)\nprintln(ClassWithCompanionObject.CONSTANT_PROPERTY)\n</code></pre>\n"}], "owner": {"reputation": 64, "user_id": 2579004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48aefd0b782dfa5741a2cfcff86d116b?s=128&d=identicon&r=PG", "display_name": "garbus", "link": "https://stackoverflow.com/users/2579004/garbus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1498, "favorite_count": 0, "accepted_answer_id": 47506161, "answer_count": 2, "score": 1, "last_activity_date": 1511770234, "creation_date": 1511768668, "question_id": 47505991, "link": "https://stackoverflow.com/questions/47505991/kotlin-any-substitute-for-companion-object-inside-of-another-object-not-class", "title": "Kotlin - any substitute for companion object inside of another object (not class)?", "body": "<p>I would like in my Kotlin Android app to have singleton object with some static definitions of it's inner states.</p>\n\n<p>As I understand, <code>object</code> in Kotlin is for singleton, so I am trying this kind of approach:</p>\n\n<pre><code>object MySingleton\n{\n    public const val _DEF_DEFINITION_NO_ONE: Byte = 1;\n    public const val _DEF_DEFINITION_NO_TWO: Byte = 2;\n    (...)\n}\n</code></pre>\n\n<p>This is fine, but the problem is, to being able use these definitions, now I must create Object's instance first.</p>\n\n<p>Just wondering if I am able in Kotlin to create this kind of construction and have access to these definitions without creating <code>MySingleton</code> instance? Answer would be <code>companion object</code> working similar as <code>static</code> in other languages, but it's not allowed inside objects, only inside of classes.</p>\n\n<p>Of course I can leave this as is or make these definitions global, but would like to know is it possible to do in a way I described? Or maybe should I design this in another yet way?</p>\n"}, {"tags": ["java", "interface", "annotations", "kotlin", "getter"], "answers": [{"comments": [{"owner": {"reputation": 6355, "user_id": 3755692, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/F7x32.png?s=128&g=1", "display_name": "msrd0", "link": "https://stackoverflow.com/users/3755692/msrd0"}, "edited": false, "score": 0, "creation_date": 1511855801, "post_id": 47526540, "comment_id": 82008925, "body": "Your argumentation makes sense for override properties, but not for abstract/open properties that override nothing. Although it would mean that if you override an annotated property you&#39;d need to inherit its jvm signature"}, {"owner": {"reputation": 4447, "user_id": 3050249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz2yy.jpg?s=128&g=1", "display_name": "Miha_x64", "link": "https://stackoverflow.com/users/3050249/miha-x64"}, "reply_to_user": {"reputation": 6355, "user_id": 3755692, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/F7x32.png?s=128&g=1", "display_name": "msrd0", "link": "https://stackoverflow.com/users/3755692/msrd0"}, "edited": false, "score": 2, "creation_date": 1518079755, "post_id": 47526540, "comment_id": 84359346, "body": "You&#39;re right, <code>@JvmName</code> is prohibited both for overridden and overridable functions. <a href=\"https://github.com/JetBrains/kotlin/blob/19e38bbc725ec68c9d40bc5c4ad8945266df7231/compiler/frontend.java/src/org/jetbrains/kotlin/resolve/jvm/checkers/declarationCheckers.kt#L141\" rel=\"nofollow noreferrer\">github.com/JetBrains/kotlin/blob/&hellip;</a> @msrd0, this answer is correct and should be accepted."}, {"owner": {"reputation": 6355, "user_id": 3755692, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/F7x32.png?s=128&g=1", "display_name": "msrd0", "link": "https://stackoverflow.com/users/3755692/msrd0"}, "reply_to_user": {"reputation": 4447, "user_id": 3050249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz2yy.jpg?s=128&g=1", "display_name": "Miha_x64", "link": "https://stackoverflow.com/users/3050249/miha-x64"}, "edited": false, "score": 1, "creation_date": 1518112418, "post_id": 47526540, "comment_id": 84381838, "body": "@Miha_x64 This answer is correct but yet does not answer the question &quot;how can I tell the Kotlin compiler ...&quot;, while it would answer the question &quot;can I tell the Kotlin compiler ...&quot;"}, {"owner": {"reputation": 4447, "user_id": 3050249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz2yy.jpg?s=128&g=1", "display_name": "Miha_x64", "link": "https://stackoverflow.com/users/3050249/miha-x64"}, "edited": false, "score": 0, "creation_date": 1518121276, "post_id": 47526540, "comment_id": 84386755, "body": "The answer is &#39;no way&#39;."}, {"owner": {"reputation": 636, "user_id": 7267809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oLvd4.jpg?s=128&g=1", "display_name": "Aanand Kainth", "link": "https://stackoverflow.com/users/7267809/aanand-kainth"}, "edited": false, "score": 0, "creation_date": 1570927909, "post_id": 47526540, "comment_id": 103071832, "body": "Note that Kotlin does not allow the annotation on <code>inline</code> classes."}], "tags": [], "owner": {"reputation": 386, "user_id": 8816819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b1c0ab7d389604aace65d97e69f6f09?s=128&d=identicon&r=PG&f=1", "display_name": "Jacky Choi", "link": "https://stackoverflow.com/users/8816819/jacky-choi"}, "is_accepted": false, "score": 7, "last_activity_date": 1511855617, "creation_date": 1511855617, "answer_id": 47526540, "question_id": 47504279, "link": "https://stackoverflow.com/questions/47504279/java-interop-apply-jvmname-to-getters-of-properties-in-interface-or-abstract-c/47526540#47526540", "title": "Java Interop: Apply @JvmName to getters of properties in interface or abstract class", "body": "<p>I think Kotlin has some restriction on using <code>@JvmName</code> on <code>open</code>/<code>override</code> property/function. Prohibiting the use of <code>@JvmName</code> on <code>open</code>/<code>override</code> function can avoid having different jvmName on the interface/superclass and subclass.</p>\n\n<p>In the following example, I am trying to annotate the overrided property getter with a jvmName (<code>hasValueImpl</code>) which is different from the interface (<code>hasValue</code>) and it gives compilation error:</p>\n\n<blockquote>\n  <p>'@JvmName' annotation is not applicable to this declaration</p>\n</blockquote>\n\n<pre><code>interface Abstract {\n\n    @get:JvmName(\"hasValue\")        //Compile error\n    val hasValue: Boolean\n        get() = false\n}\n\nopen class Impl : Abstract {\n\n    @get:JvmName(\"hasValueImpl\")    //Compile error\n    final override val hasValue: Boolean\n        get() = false\n\n    @get:JvmName(\"hasValue2\")       //Compile error if hasValue2 is open\n    val hasValue2: Boolean\n        get() = false\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1920, "user_id": 187148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6470f976d0185f97a1a88dd05c5fdfc?s=128&d=identicon&r=PG", "display_name": "BrunoJCM", "link": "https://stackoverflow.com/users/187148/brunojcm"}, "edited": false, "score": 1, "creation_date": 1582601504, "post_id": 58964702, "comment_id": 106824543, "body": "There is a reason: using <code>get() = &quot;My bar value&quot;</code> is like hardcoding the value for the <code>val</code> in your getter body, so you don&#39;t need a backing field, whereas just having a <code>get</code> requires a backing field to be generated, AFAIK."}], "tags": [], "owner": {"reputation": 853, "user_id": 5434860, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/821a186146724ec1ffd9e596bc0051ea?s=128&d=identicon&r=PG&f=1", "display_name": "retodaredevil", "link": "https://stackoverflow.com/users/5434860/retodaredevil"}, "is_accepted": false, "score": 5, "last_activity_date": 1574290636, "creation_date": 1574290636, "answer_id": 58964702, "question_id": 47504279, "link": "https://stackoverflow.com/questions/47504279/java-interop-apply-jvmname-to-getters-of-properties-in-interface-or-abstract-c/58964702#58964702", "title": "Java Interop: Apply @JvmName to getters of properties in interface or abstract class", "body": "<p>I turns out, this is possible:</p>\n\n<pre><code>interface Foo {\n    val bar: String\n        @get:JvmName(\"getAwesomeBar\") get\n}\n</code></pre>\n\n<hr>\n\n<p>However, it is interesting that this does NOT work:</p>\n\n<pre><code>interface Foo {\n    @get:JvmName(\"getAwesomeBar\") \n    val bar: String\n}\n</code></pre>\n\n<p>But, this does work:</p>\n\n<pre><code>class Foo {\n    val bar: String\n        @JvmName(\"getAwesomeBar\") get() = \"My bar value\"\n}\n</code></pre>\n\n<p>and this works too!</p>\n\n<pre><code>class Foo {\n    @get:JvmName(\"getAwesomeBar\") \n    val bar: String\n        get() = \"My bar value\"\n}\n</code></pre>\n\n<hr>\n\n<p>Why you need to have the extra <code>get:</code> when doing this in interfaces is beyond me. I'm sure there is a reason for it.</p>\n"}, {"comments": [{"owner": {"reputation": 4447, "user_id": 3050249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz2yy.jpg?s=128&g=1", "display_name": "Miha_x64", "link": "https://stackoverflow.com/users/3050249/miha-x64"}, "edited": false, "score": 0, "creation_date": 1592854109, "post_id": 59716818, "comment_id": 110568850, "body": "Note that this should be done to <b>every override</b> of this member, and see issue comments in YouTrack for details."}], "tags": [], "owner": {"reputation": 370, "user_id": 4359679, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-72o0vzuMxa4/AAAAAAAAAAI/AAAAAAAAAKA/vOOUcgY5TuI/photo.jpg?sz=128", "display_name": "Nikita Bobko", "link": "https://stackoverflow.com/users/4359679/nikita-bobko"}, "is_accepted": true, "score": 10, "last_activity_date": 1578919106, "creation_date": 1578919106, "answer_id": 59716818, "question_id": 47504279, "link": "https://stackoverflow.com/questions/47504279/java-interop-apply-jvmname-to-getters-of-properties-in-interface-or-abstract-c/59716818#59716818", "title": "Java Interop: Apply @JvmName to getters of properties in interface or abstract class", "body": "<p>There is a workaround, see: <a href=\"https://youtrack.jetbrains.com/issue/KT-31420\" rel=\"noreferrer\">https://youtrack.jetbrains.com/issue/KT-31420</a></p>\n\n<p>Simply suppress this <code>INAPPLICABLE_JVM_NAME</code> error with annotation: <code>@Suppress(\"INAPPLICABLE_JVM_NAME\")</code></p>\n"}], "owner": {"reputation": 6355, "user_id": 3755692, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/F7x32.png?s=128&g=1", "display_name": "msrd0", "link": "https://stackoverflow.com/users/3755692/msrd0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2078, "favorite_count": 0, "accepted_answer_id": 59716818, "answer_count": 3, "score": 15, "last_activity_date": 1578919106, "creation_date": 1511759352, "last_edit_date": 1511838991, "question_id": 47504279, "link": "https://stackoverflow.com/questions/47504279/java-interop-apply-jvmname-to-getters-of-properties-in-interface-or-abstract-c", "title": "Java Interop: Apply @JvmName to getters of properties in interface or abstract class", "body": "<p>Usually, we can write the following code in kotlin:</p>\n\n<pre><code>val hasValue : Boolean\n    @JvmName(\"hasValue\") get() = true\n</code></pre>\n\n<p>This will generate the method <code>hasValue()</code> instead of <code>getHasValue()</code> for <strong>Java interop</strong>.</p>\n\n<p>However, in an interface, this gives me a compile error:</p>\n\n<pre><code>val hasValue : Boolean\n   @JvmName(\"hasValue\") get\n</code></pre>\n\n<p>The same goes for the following declaration in an abstract class:</p>\n\n<pre><code>abstract val hasValue : Boolean\n    @JvmName(\"hasValue\") get\n</code></pre>\n\n<p>So here is my question: How can I tell the kotlin compiler to use <code>hasValue()</code> instead of <code>getHasValue()</code> for getters (and setters) of properties in a kotlin interfaces?</p>\n"}, {"tags": ["android", "kotlin", "android-manifest"], "answers": [{"comments": [{"owner": {"reputation": 2230, "user_id": 3060279, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100003359002838/picture?type=large", "display_name": "lxknvlk", "link": "https://stackoverflow.com/users/3060279/lxknvlk"}, "edited": false, "score": 0, "creation_date": 1534191247, "post_id": 47504197, "comment_id": 90614159, "body": "I use this and i get unresolved reference: Application, while in Java all works ok"}], "tags": [], "owner": {"reputation": 556, "user_id": 8268794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a592b5486382e69f086902fe208803a5?s=128&d=identicon&r=PG&f=1", "display_name": "Chithra B", "link": "https://stackoverflow.com/users/8268794/chithra-b"}, "is_accepted": false, "score": 1, "last_activity_date": 1511758820, "creation_date": 1511758820, "answer_id": 47504197, "question_id": 47504073, "link": "https://stackoverflow.com/questions/47504073/how-to-use-kotlin-to-define-a-android-application-class/47504197#47504197", "title": "How to use kotlin to define a android Application class?", "body": "<p>Use the following where in the type is changed to class from object</p>\n\n<pre><code>class MyApplication : Application() {\noverride fun onCreate() {\n      super.onCreate()\n      initOkHttp()\n  }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2230, "user_id": 3060279, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100003359002838/picture?type=large", "display_name": "lxknvlk", "link": "https://stackoverflow.com/users/3060279/lxknvlk"}, "edited": false, "score": 0, "creation_date": 1534191242, "post_id": 47504203, "comment_id": 90614156, "body": "I use this and i get unresolved reference: Application, while in Java all works ok"}], "tags": [], "owner": {"reputation": 1786, "user_id": 6644840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKU70.png?s=128&g=1", "display_name": "Yamini Balakrishnan", "link": "https://stackoverflow.com/users/6644840/yamini-balakrishnan"}, "is_accepted": false, "score": 1, "last_activity_date": 1511758874, "creation_date": 1511758874, "answer_id": 47504203, "question_id": 47504073, "link": "https://stackoverflow.com/questions/47504073/how-to-use-kotlin-to-define-a-android-application-class/47504203#47504203", "title": "How to use kotlin to define a android Application class?", "body": "<p>You should use <code>class</code> instead of <code>Object</code>, to make it work.</p>\n\n<pre><code> class MyApplication : Application() {\n      override fun onCreate() {\n          super.onCreate()\n          initOkHttp()\n      }\n   }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 566, "user_id": 3458074, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/01732e26320fde8276f1d79899915a8c?s=128&d=identicon&r=PG&f=1", "display_name": "Pavan P", "link": "https://stackoverflow.com/users/3458074/pavan-p"}, "is_accepted": false, "score": 0, "last_activity_date": 1511759340, "creation_date": 1511759340, "answer_id": 47504277, "question_id": 47504073, "link": "https://stackoverflow.com/questions/47504073/how-to-use-kotlin-to-define-a-android-application-class/47504277#47504277", "title": "How to use kotlin to define a android Application class?", "body": "<p>The reason you're getting that error is because the <code>object</code> modifier effectively makes your class a singleton, therefore there's no practical way for it to be instantiated. Therefore replace it with <code>class</code> which is the equivalent of an ordinary Java class.</p>\n"}, {"tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 3, "last_activity_date": 1511759395, "creation_date": 1511759395, "answer_id": 47504285, "question_id": 47504073, "link": "https://stackoverflow.com/questions/47504073/how-to-use-kotlin-to-define-a-android-application-class/47504285#47504285", "title": "How to use kotlin to define a android Application class?", "body": "<p>The solution ais to use the <code>class</code> keyword instead of <code>object</code>. An <a href=\"https://kotlinlang.org/docs/reference/object-declarations.html#object-declarations\" rel=\"nofollow noreferrer\"><code>object</code> declaration</a> in Kotlin is a singleton, which means it only has a single instance, and it has a private constructor to prevent the creation of any other instances.</p>\n\n<p>In the case of an <code>Application</code> class on Android however, the framework itself will create the instance when your application launches, and this requires an accessible private constructor.</p>\n"}, {"tags": [], "owner": {"reputation": 361, "user_id": 4242794, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-mj872VL0v-I/AAAAAAAAAAI/AAAAAAAABIo/igezWYd4Af8/photo.jpg?sz=128", "display_name": "sanjay", "link": "https://stackoverflow.com/users/4242794/sanjay"}, "is_accepted": false, "score": 0, "last_activity_date": 1586635570, "creation_date": 1586635570, "answer_id": 61163039, "question_id": 47504073, "link": "https://stackoverflow.com/questions/47504073/how-to-use-kotlin-to-define-a-android-application-class/61163039#61163039", "title": "How to use kotlin to define a android Application class?", "body": "<p>This way you can create an application class </p>\n\n<pre><code>class MyApplication : Application() {\n   override fun onCreate() {\n      super.onCreate()\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 8529952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/363688069d9c15de408573f860fa8aba?s=128&d=identicon&r=PG&f=1", "display_name": "Z.Vincent", "link": "https://stackoverflow.com/users/8529952/z-vincent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4488, "favorite_count": 1, "accepted_answer_id": 47504285, "answer_count": 5, "score": 1, "last_activity_date": 1586635570, "creation_date": 1511757717, "question_id": 47504073, "link": "https://stackoverflow.com/questions/47504073/how-to-use-kotlin-to-define-a-android-application-class", "title": "How to use kotlin to define a android Application class?", "body": "<p>Here is My Code:</p>\n\n<pre><code> object MyApplication : Application() {\n\n      override fun onCreate() {\n          super.onCreate()\n          initOkHttp()\n      }\n   }\n</code></pre>\n\n<p>when I declare <code>MyApplication</code> in <code>AndroidManifest</code>,it occurs <code>has no default constructor</code>,can anybody help me?\n<a href=\"https://i.stack.imgur.com/O3KRl.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"}, {"tags": ["android", "listview", "kotlin"], "comments": [{"owner": {"reputation": 9164, "user_id": 6740698, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tFFAJ2BB1co/AAAAAAAAAAI/AAAAAAAAMBM/Mp1krWr_OVA/photo.jpg?sz=128", "display_name": "Xenolion", "link": "https://stackoverflow.com/users/6740698/xenolion"}, "edited": false, "score": 0, "creation_date": 1511735852, "post_id": 47501583, "comment_id": 81959202, "body": "Your layout has a default alternative in android which I hope will work!"}, {"owner": {"reputation": 9554, "user_id": 31782, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8ea4581df89970a5ba17daf4ad93041c?s=128&d=identicon&r=PG", "display_name": "n0rd", "link": "https://stackoverflow.com/users/31782/n0rd"}, "reply_to_user": {"reputation": 9164, "user_id": 6740698, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tFFAJ2BB1co/AAAAAAAAAAI/AAAAAAAAMBM/Mp1krWr_OVA/photo.jpg?sz=128", "display_name": "Xenolion", "link": "https://stackoverflow.com/users/6740698/xenolion"}, "edited": false, "score": 0, "creation_date": 1511736301, "post_id": 47501583, "comment_id": 81959334, "body": "@Xenolion, alternatives would be nice to know, but at this point I am most interested in explanation why I see the behavior I see and what do I set it up to behave like I want it to behave without constraining it too much."}, {"owner": {"reputation": 9164, "user_id": 6740698, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tFFAJ2BB1co/AAAAAAAAAAI/AAAAAAAAMBM/Mp1krWr_OVA/photo.jpg?sz=128", "display_name": "Xenolion", "link": "https://stackoverflow.com/users/6740698/xenolion"}, "edited": false, "score": 0, "creation_date": 1511736423, "post_id": 47501583, "comment_id": 81959374, "body": "<code>android:adjustViewBounds=&quot;true&quot;</code> why false put true????? I think it should be true for you to get what you want?"}, {"owner": {"reputation": 9554, "user_id": 31782, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8ea4581df89970a5ba17daf4ad93041c?s=128&d=identicon&r=PG", "display_name": "n0rd", "link": "https://stackoverflow.com/users/31782/n0rd"}, "reply_to_user": {"reputation": 9164, "user_id": 6740698, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tFFAJ2BB1co/AAAAAAAAAAI/AAAAAAAAMBM/Mp1krWr_OVA/photo.jpg?sz=128", "display_name": "Xenolion", "link": "https://stackoverflow.com/users/6740698/xenolion"}, "edited": false, "score": 0, "creation_date": 1511736447, "post_id": 47501583, "comment_id": 81959381, "body": "Tried that, too. No change"}], "answers": [{"comments": [{"owner": {"reputation": 9554, "user_id": 31782, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8ea4581df89970a5ba17daf4ad93041c?s=128&d=identicon&r=PG", "display_name": "n0rd", "link": "https://stackoverflow.com/users/31782/n0rd"}, "edited": false, "score": 0, "creation_date": 1511735503, "post_id": 47501685, "comment_id": 81959094, "body": "That&#39;s not what I want. I thought I pretty clearly stated that in my post"}], "tags": [], "owner": {"reputation": 1, "user_id": 8501896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1474bcd8961172033c2e39903fc46789?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Sallam", "link": "https://stackoverflow.com/users/8501896/ahmed-sallam"}, "is_accepted": false, "score": -1, "last_activity_date": 1511735409, "creation_date": 1511735409, "answer_id": 47501685, "question_id": 47501583, "link": "https://stackoverflow.com/questions/47501583/list-item-height-changes-when-item-image-is-set/47501685#47501685", "title": "List item height changes when item image is set", "body": "<p>In item Layout change the ImageView layout_width and layout_height to fixed size as:\nfor example:</p>\n\n<pre><code>&lt;ImageView\n    android:id=\"@+id/imageView\"\n    android:layout_width=\"150dp\" \n    android:layout_height=\"150dp\"\n    android:adjustViewBounds=\"false\"\n    android:scaleType=\"fitCenter\"\n    app:srcCompat=\"@mipmap/ic_cross\" /&gt;\n</code></pre>\n\n<p>change \"150dp\" as you like.</p>\n"}, {"comments": [{"owner": {"reputation": 9554, "user_id": 31782, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8ea4581df89970a5ba17daf4ad93041c?s=128&d=identicon&r=PG", "display_name": "n0rd", "link": "https://stackoverflow.com/users/31782/n0rd"}, "edited": false, "score": 0, "creation_date": 1511769368, "post_id": 47505582, "comment_id": 81967965, "body": "Could you please elaborate on why do you think <code>match_parent</code> for the <code>ListView</code> is wrong? And, no, it does not work. With <code>wrap_content</code> <code>ListView</code> disappears completely."}], "tags": [], "owner": {"reputation": 396, "user_id": 8023701, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DDgf5kCDyro/AAAAAAAAAAI/AAAAAAAAAWI/2XPqxPLD5KQ/photo.jpg?sz=128", "display_name": "Nbn", "link": "https://stackoverflow.com/users/8023701/nbn"}, "is_accepted": false, "score": 0, "last_activity_date": 1511766841, "creation_date": 1511766841, "answer_id": 47505582, "question_id": 47501583, "link": "https://stackoverflow.com/questions/47501583/list-item-height-changes-when-item-image-is-set/47505582#47505582", "title": "List item height changes when item image is set", "body": "<p>Its because the height of your ListView is match_parent. Change the height of the ListView to wrap_content.</p>\n\n<pre><code>&lt;ListView\nandroid:id=\"@+id/imageList\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"wrap_content\" /&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9554, "user_id": 31782, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8ea4581df89970a5ba17daf4ad93041c?s=128&d=identicon&r=PG", "display_name": "n0rd", "link": "https://stackoverflow.com/users/31782/n0rd"}, "edited": false, "score": 0, "creation_date": 1511810342, "post_id": 47511039, "comment_id": 81992639, "body": "Tried that. For some reason I don&#39;t see any effect whatsoever, and anyway, I want all list items to be of the same height."}, {"owner": {"reputation": 2279, "user_id": 3451344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqk5E.jpg?s=128&g=1", "display_name": "Sangeet Suresh", "link": "https://stackoverflow.com/users/3451344/sangeet-suresh"}, "reply_to_user": {"reputation": 9554, "user_id": 31782, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8ea4581df89970a5ba17daf4ad93041c?s=128&d=identicon&r=PG", "display_name": "n0rd", "link": "https://stackoverflow.com/users/31782/n0rd"}, "edited": false, "score": 0, "creation_date": 1511842272, "post_id": 47511039, "comment_id": 82003879, "body": "What&#39;s your compile sdk ?"}, {"owner": {"reputation": 9554, "user_id": 31782, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8ea4581df89970a5ba17daf4ad93041c?s=128&d=identicon&r=PG", "display_name": "n0rd", "link": "https://stackoverflow.com/users/31782/n0rd"}, "edited": false, "score": 0, "creation_date": 1511927609, "post_id": 47511039, "comment_id": 82046425, "body": "<code>compileSdkVersion 26</code>, <code>minSdkVersion 14</code>"}], "tags": [], "owner": {"reputation": 2279, "user_id": 3451344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqk5E.jpg?s=128&g=1", "display_name": "Sangeet Suresh", "link": "https://stackoverflow.com/users/3451344/sangeet-suresh"}, "is_accepted": false, "score": 0, "last_activity_date": 1511785744, "creation_date": 1511785744, "answer_id": 47511039, "question_id": 47501583, "link": "https://stackoverflow.com/questions/47501583/list-item-height-changes-when-item-image-is-set/47511039#47511039", "title": "List item height changes when item image is set", "body": "<p>Please try to set <code>android:adjustViewBounds=\"true\"</code></p>\n\n<p>For example, please have a look on following screenshots</p>\n\n<p>With  <code>android:adjustViewBounds=\"false\"</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/bUTeY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bUTeY.png\" alt=\"\"></a></p>\n\n<p>With  <code>android:adjustViewBounds=\"true\"</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/gGk7J.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gGk7J.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 9554, "user_id": 31782, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8ea4581df89970a5ba17daf4ad93041c?s=128&d=identicon&r=PG", "display_name": "n0rd", "link": "https://stackoverflow.com/users/31782/n0rd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1511785744, "creation_date": 1511734588, "question_id": 47501583, "link": "https://stackoverflow.com/questions/47501583/list-item-height-changes-when-item-image-is-set", "title": "List item height changes when item image is set", "body": "<p>I want to have a list view with items that consist of an image thumbnail on the left and some text on the right. The list view is declared like this:</p>\n\n<pre><code>&lt;ListView\n    android:id=\"@+id/imageList\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\" /&gt;\n</code></pre>\n\n<p>The item itself like this:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"?android:attr/listPreferredItemHeight\"\n    android:orientation=\"horizontal\"&gt;\n\n    &lt;ImageView\n        android:id=\"@+id/imageView\"\n        android:layout_width=\"0dp\"\n        android:layout_height=\"match_parent\"\n        android:layout_weight=\"1\"\n        android:adjustViewBounds=\"false\"\n        android:scaleType=\"fitCenter\"\n        app:srcCompat=\"@mipmap/ic_cross\" /&gt;\n\n    &lt;TextView\n        android:id=\"@+id/textView\"\n        android:layout_width=\"0dp\"\n        android:layout_height=\"match_parent\"\n        android:layout_weight=\"5\"\n        android:gravity=\"center_vertical|start\"\n        android:text=\"TextView\" /&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>Now, at some point in my code I assign an adapter to a <code>ListView</code>:</p>\n\n<pre><code>val lv = findViewById&lt;ListView&gt;(R.id.imageList)\nlv.adapter = ImageListBinder(this, cachedImages!!)\n</code></pre>\n\n<p>And <code>ImageListBinder.getView</code> looks like this:</p>\n\n<pre><code>override fun getView(position: Int, convertView: View?, parent: ViewGroup?): View\n{\n    val view = convertView ?: createView()\n    val holder = view.tag as ViewHolder\n\n    holder.textView.text = \"Some text\"\n    val bmp = BitmapFactory.decodeFile(images[position].localPath.absolutePath)\n    holder.imageView.setImageBitmap(bmp)\n\n    return view\n}\n\nprivate fun createView() : View\n{\n    val view = inflater.inflate(R.layout.list_row, null)\n    view.tag = ViewHolder(view.findViewById(R.id.imageView), view.findViewById(R.id.textView))\n    return view\n}\n\nprivate class ViewHolder(val imageView: ImageView, val textView: TextView)\n</code></pre>\n\n<p>The issue is that when those images get assigned to ImageViews, the height of the list item becomes equal to the original height of the image (so if I add the 100x1600 image to the list, the item height becomes 1600 pixels) despite the fact that <code>LinearLayout</code>'s height is fixed and <code>ImageView</code>'s height is set to <code>match_parent</code>:\n<a href=\"https://i.stack.imgur.com/crmVB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/crmVB.png\" alt=\"looong list items\"></a></p>\n\n<p>What am I doing wrong here? How to make list item height to stay as specified?</p>\n\n<p>I tried reading ImageView's height and width before calling the <code>setImageBitmap</code>, followed by resetting them after, that didn't help, I also tried setting the <code>android:adjustViewBounds=\"false\"</code> and <code>android:scaleType=\"fitCenter\"</code> which didn't change anything either. The only thing that worked so far was setting the <code>android:layout_height=\"?android:attr/listPreferredItemHeight\"</code> on the <code>ImageView</code>, but I don't want to set image view height so hard. At least no until I understand why I see what I see now.</p>\n"}, {"tags": ["gradle", "kotlin", "jacoco"], "answers": [{"comments": [{"owner": {"reputation": 802, "user_id": 807828, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7c941377e5abd4861f233e9f3603cbba?s=128&d=identicon&r=PG", "display_name": "vextorspace", "link": "https://stackoverflow.com/users/807828/vextorspace"}, "edited": false, "score": 0, "creation_date": 1511808201, "post_id": 47506470, "comment_id": 81991566, "body": "Thank you very much! I spent hours trying to figure it out!"}], "tags": [], "owner": {"reputation": 1392, "user_id": 94249, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6f676db35d9c4a3b701ca41f266d693c?s=128&d=identicon&r=PG", "display_name": "Mario Mueller", "link": "https://stackoverflow.com/users/94249/mario-mueller"}, "is_accepted": true, "score": 5, "last_activity_date": 1511770851, "creation_date": 1511770851, "answer_id": 47506470, "question_id": 47500986, "link": "https://stackoverflow.com/questions/47500986/jacoco-with-gradle-and-kotlin-is-not-creating-jacoco-exec-file/47506470#47506470", "title": "Jacoco with gradle and kotlin is not creating jacoco.exec file", "body": "<p>The Jacoco is not yet able to attach itself to the new task names that JUint5 uses (e.g. <code>junitPlatformTest</code>).</p>\n\n<p>You need to \"help\" Gradle to create the connection between the two tasks using the <code>task.dependsOn(otherTask)</code> method call.</p>\n\n<p>In your case, adding this to your build.gradle may work:</p>\n\n<pre><code>jacoco {\n    // This is the latest version at the time of writing this. Change as you need.\n    toolVersion = '0.7.9'\n    applyTo junitPlatformTest\n}\n\ntest.dependsOn junitPlatformTest\n</code></pre>\n"}], "owner": {"reputation": 802, "user_id": 807828, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7c941377e5abd4861f233e9f3603cbba?s=128&d=identicon&r=PG", "display_name": "vextorspace", "link": "https://stackoverflow.com/users/807828/vextorspace"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1038, "favorite_count": 0, "accepted_answer_id": 47506470, "answer_count": 1, "score": 2, "last_activity_date": 1511770851, "creation_date": 1511730074, "question_id": 47500986, "link": "https://stackoverflow.com/questions/47500986/jacoco-with-gradle-and-kotlin-is-not-creating-jacoco-exec-file", "title": "Jacoco with gradle and kotlin is not creating jacoco.exec file", "body": "<p>I've set up a basic kotlin project (empty classes, one test file) and have tried to set up jacoco with gradle using the plugin for gradle: <a href=\"https://docs.gradle.org/current/userguide/jacoco_plugin.html\" rel=\"nofollow noreferrer\">https://docs.gradle.org/current/userguide/jacoco_plugin.html</a></p>\n\n<p>When I run the tests, the one test passes, however there is no jacoco.exec file created. What am I missing? I assume the classes are never getting instrumented but can't seem to find much information on how to set up the build.gradle for jacoco. Or can jacoco not instrument class files created from kotlin?</p>\n\n<pre><code>group 'com.ronnev.filewatcher'\nversion '0.1'\n\nbuildscript {\n    ext.kotlin_version = '1.1.61'\n\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n        classpath 'org.junit.platform:junit-platform-gradle-plugin:1.0.2'\n    }\n}\n\napply plugin: 'kotlin'\napply plugin: 'org.junit.platform.gradle.plugin'\napply plugin: 'jacoco'\n\nrepositories {\n    mavenCentral()\n    jcenter()\n}\n\ndependencies {\n    compile \"org.jetbrains.kotlin:kotlin-stdlib-jre8:$kotlin_version\"\n\n    testCompile 'org.junit.jupiter:junit-jupiter-api:5.0.2'\n\n    testRuntime 'org.junit.jupiter:junit-jupiter-engine:5.0.2'\n}\n\njacoco {\n    toolVersion = \"0.7.9\"\n    reportsDir = file(\"$buildDir/jacoco/\")\n}\n\njacocoTestReport {\n    classDirectories = files(\"${buildDir}/classes\")\n\n    reports {\n        xml.enabled true\n        csv.enabled false\n        html.destination file(\"${buildDir}/jacoco/jacocoHtml\")\n    }\n}\n\ntest {\n    jacoco {\n        append = false\n        destinationFile = file(\"$buildDir/jacoco/jacocoTest.exec\")\n    }\n}\n</code></pre>\n\n<p>when I run gradle test I expect a build/jacoco/jacoco.exec file to be created but it is not.</p>\n\n<pre><code>vextorspace@vPrecise:~/projects/filewatcher $ gradle clean test\n:clean\n:compileKotlin\nw: /home/vextorspace/projects/filewatcher/src/main/kotlin/com/ronnev/filewatcher/files/DependentFinder.kt: (6, 28): Parameter 'className' is never used\n:compileJava UP-TO-DATE\n:copyMainKotlinClasses\n:processResources UP-TO-DATE\n:classes UP-TO-DATE\n:compileTestKotlin\n:compileTestJava UP-TO-DATE\n:copyTestKotlinClasses\n:processTestResources\n:testClasses\n:junitPlatformTest\n\nTest run finished after 71 ms\n[         2 containers found      ]\n[         0 containers skipped    ]\n[         2 containers started    ]\n[         0 containers aborted    ]\n[         2 containers successful ]\n[         0 containers failed     ]\n[         1 tests found           ]\n[         0 tests skipped         ]\n[         1 tests started         ]\n[         0 tests aborted         ]\n[         1 tests successful      ]\n[         0 tests failed          ]\n\n:test SKIPPED\n\nBUILD SUCCESSFUL\n</code></pre>\n\n<p>and when I look in the build directory there is no jacoco folder created:</p>\n\n<pre><code>vextorspace@vPrecise:~/projects/filewatcher $ ls build\nclasses  kotlin  kotlin-build  kotlin-classes  resources  test-results\n</code></pre>\n\n<p>Any help or hints would be much appreciated!</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["java", "android", "xml", "kotlin", "listener"], "comments": [{"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1511723262, "post_id": 47499891, "comment_id": 81955248, "body": "&quot;It doesn&#39;t work&quot; - what&#39;s the error?"}, {"owner": {"reputation": 581, "user_id": 7809349, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh6.googleusercontent.com/-xxj8AcvmCrU/AAAAAAAAAAI/AAAAAAAAF_o/XRDsjNGm0QE/photo.jpg?sz=128", "display_name": "manwhotrycoding", "link": "https://stackoverflow.com/users/7809349/manwhotrycoding"}, "reply_to_user": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1511723576, "post_id": 47499891, "comment_id": 81955367, "body": "Listener isn&#39;t active"}, {"owner": {"reputation": 843, "user_id": 1504247, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/j43X7.jpg?s=128&g=1", "display_name": "vvy", "link": "https://stackoverflow.com/users/1504247/vvy"}, "edited": false, "score": 1, "creation_date": 1523655040, "post_id": 47499891, "comment_id": 86666555, "body": "Helped me in implementing a callback. The <code>object:OnClickListenerInterface</code> part was not known to me. Thanks"}, {"owner": {"reputation": 19894, "user_id": 753632, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e1eaa448ca773169f1296987a87cb67?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidDev", "link": "https://stackoverflow.com/users/753632/androiddev"}, "edited": false, "score": 0, "creation_date": 1560589210, "post_id": 47499891, "comment_id": 99793004, "body": "Here are some solutions: <a href=\"https://stackoverflow.com/a/56608847/753632\">stackoverflow.com/a/56608847/753632</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1720, "user_id": 3702048, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b4458913b3478738489a6ab015d424c?s=128&d=identicon&r=PG", "display_name": "Yev Kanivets", "link": "https://stackoverflow.com/users/3702048/yev-kanivets"}, "is_accepted": false, "score": 0, "last_activity_date": 1511723870, "creation_date": 1511723870, "answer_id": 47500028, "question_id": 47499891, "link": "https://stackoverflow.com/questions/47499891/how-i-can-use-callback-in-kotlin/47500028#47500028", "title": "How I can use callback in Kotlin?", "body": "<p>First of all you need to remove this code:</p>\n\n<pre><code>mCircleShape.setOnClickListener(View.OnClickListener {\n      if (listener == null) return@OnClickListener\n      listener!!.onClick()\n    })\n</code></pre>\n\n<p>Because listener is always null at first and your code just always returns. </p>\n\n<p><code>var listener: OnClickListenerInterface? = null</code> is already public (this is a default access level in Kotlin). So you can just set it in your activity, when needed. Use <code>listener?.onClick()</code> call to trigger it from your CircleShape.</p>\n"}, {"tags": [], "owner": {"reputation": 55, "user_id": 4218242, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000472157866/picture?type=large", "display_name": "Gabriel Janucik", "link": "https://stackoverflow.com/users/4218242/gabriel-janucik"}, "is_accepted": false, "score": 1, "last_activity_date": 1561635762, "last_edit_date": 1561635762, "creation_date": 1511773673, "answer_id": 47507204, "question_id": 47499891, "link": "https://stackoverflow.com/questions/47499891/how-i-can-use-callback-in-kotlin/47507204#47507204", "title": "How I can use callback in Kotlin?", "body": "<p>Have you tried to use a lambda expression? For example in your case:</p>\n\n<pre><code>mCircleShape.setOnClickListener( \n    { _ -&gt; ToastUtils.showSuccessMessage(context,\"pressed\") }\n)\n</code></pre>\n\n<p>Or if you want to make it more kotlin style:</p>\n\n<pre><code>mCircleShape.listener = ( \n    { _ -&gt; ToastUtils.showSuccessMessage(context,\"pressed\") }\n)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19894, "user_id": 753632, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e1eaa448ca773169f1296987a87cb67?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidDev", "link": "https://stackoverflow.com/users/753632/androiddev"}, "edited": false, "score": 4, "creation_date": 1560589429, "post_id": 48761541, "comment_id": 99793052, "body": "Your second solutions doesn&#39;t demonstrate how the setOnClickListener in CirclesShapt.kt is suppose to call the listener."}], "tags": [], "owner": {"reputation": 805, "user_id": 6455501, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7xYuC.jpg?s=128&g=1", "display_name": "glagarto", "link": "https://stackoverflow.com/users/6455501/glagarto"}, "is_accepted": false, "score": 30, "last_activity_date": 1615533231, "last_edit_date": 1615533231, "creation_date": 1518507008, "answer_id": 48761541, "question_id": 47499891, "link": "https://stackoverflow.com/questions/47499891/how-i-can-use-callback-in-kotlin/48761541#48761541", "title": "How I can use callback in Kotlin?", "body": "<p>On CircleShape.kt.</p>\n<pre><code>private listener OnClickListenerInterface? = null\n...\nfun setOnClickListener(listener: OnClickListenerInterface) {\n    this.listener = listener\n}\n</code></pre>\n<p>On your Activity</p>\n<pre><code>mCircleShape.setOnClickListener(object: CircleShape.OnClickListenerInterface {\n    override fun onClick() {\n      // Do something here\n    }\n})\n</code></pre>\n<p>If you're gonna use lambda expression, you can use a Function Type. Here how it looks like\non CirclesShapt.kt</p>\n<pre><code>fun setOnClickListener(listener: () -&gt; Unit){\n   listener() // or you could use optional if the lister is nullable &quot;listener?.invoke()&quot;\n}\n</code></pre>\n<p>So in activity looks like.</p>\n<pre><code>mCircleShape.setOnClickListener {\n  // Do something here\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1910, "user_id": 5353589, "user_type": "registered", "profile_image": "https://graph.facebook.com/990020434382892/picture?type=large", "display_name": "Weidian Huang", "link": "https://stackoverflow.com/users/5353589/weidian-huang"}, "is_accepted": false, "score": 63, "last_activity_date": 1557990112, "last_edit_date": 1557990112, "creation_date": 1541170828, "answer_id": 53121003, "question_id": 47499891, "link": "https://stackoverflow.com/questions/47499891/how-i-can-use-callback-in-kotlin/53121003#53121003", "title": "How I can use callback in Kotlin?", "body": "<p>A more simpler solution by using lambda.</p>\n\n<p>Inside CircleShape.kt, declare a lambda function.</p>\n\n<pre><code>var listener: (()-&gt;Unit)? = null\n...\n// When you want to invoke the listener\nlistener?.invoke()\n</code></pre>\n\n<p>Inside your Activity</p>\n\n<pre><code>mCircleShape.listener = {\n    // Do something when you observed a call\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 324, "user_id": 8867099, "user_type": "registered", "profile_image": "https://graph.facebook.com/1630676726983371/picture?type=large", "display_name": "Rishabh Shukla", "link": "https://stackoverflow.com/users/8867099/rishabh-shukla"}, "is_accepted": false, "score": 7, "last_activity_date": 1549629114, "creation_date": 1549629114, "answer_id": 54592564, "question_id": 47499891, "link": "https://stackoverflow.com/questions/47499891/how-i-can-use-callback-in-kotlin/54592564#54592564", "title": "How I can use callback in Kotlin?", "body": "<p>to use Kotlin callbacks , \nI use them in my api calls for success or failure\nuse </p>\n\n<blockquote>\n  <p>create enum class for state</p>\n</blockquote>\n\n<pre><code>enum class APIState(val result: Boolean) {\nSUCCESS(true),\nFAILURE(false)}\n</code></pre>\n\n<blockquote>\n  <p>use call back in fun</p>\n</blockquote>\n\n<pre><code> private fun fetchFeesList(studentID:String,call:(APIState)-&gt;Unit){\n ... do stuff here , and use call(APIState.SUCCESS) or call(APIState.FAILURE) }\n</code></pre>\n\n<blockquote>\n  <p>when calling function fetchFeesList , call it like</p>\n</blockquote>\n\n<pre><code>fetchFeesList(studentID){\n        val res = it.result\n        if(res){\n            toast(\"success\")\n        }else {\n            toast(\"failure\")\n        }\n    }\n</code></pre>\n\n<blockquote>\n  <p>for toast(\"message\") , use Anko Lib from GitHub : - <a href=\"https://github.com/Kotlin/anko\" rel=\"noreferrer\">https://github.com/Kotlin/anko</a></p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 6146, "user_id": 6204133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vG3q4.jpg?s=128&g=1", "display_name": "Dan Alboteanu", "link": "https://stackoverflow.com/users/6204133/dan-alboteanu"}, "is_accepted": false, "score": 23, "last_activity_date": 1582662315, "last_edit_date": 1582662315, "creation_date": 1560415136, "answer_id": 56576605, "question_id": 47499891, "link": "https://stackoverflow.com/questions/47499891/how-i-can-use-callback-in-kotlin/56576605#56576605", "title": "How I can use callback in Kotlin?", "body": "<p>define a function like this:</p>\n\n<pre><code>  fun performWork(param1: String, myCallback: (result: String?) -&gt; Unit) {\n    // perform some network work\n\n    // on network finished\n    myCallback.invoke(\"result from network\")\n  }\n</code></pre>\n\n<p>use like this:</p>\n\n<pre><code>  performWork(\"http://...\"){ result -&gt;\n  //use result\n  }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 9336757, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-442r6YZOQUc/AAAAAAAAAAI/AAAAAAAAADE/8bR0n1yu7dA/photo.jpg?sz=128", "display_name": "Makari Kevin", "link": "https://stackoverflow.com/users/9336757/makari-kevin"}, "is_accepted": false, "score": 0, "last_activity_date": 1597242904, "creation_date": 1597242904, "answer_id": 63378814, "question_id": 47499891, "link": "https://stackoverflow.com/questions/47499891/how-i-can-use-callback-in-kotlin/63378814#63378814", "title": "How I can use callback in Kotlin?", "body": "<p>I was desperately looking for a Kotlin solution similar to what Java interfaces offer until I bumped into the suggestions offered thereabove. Having tried all of them, I was unable to arrive at a working solution that would suit my scenario.</p>\n<p>This led to my own implementation which worked perfectly according to my use case, and therefore thought I could share the same here, though it may not be the perfect way of doing it, apologies in advance.</p>\n<p>The steps:</p>\n<ul>\n<li><strong>1. Define your interface:</strong></li>\n</ul>\n<pre><code>interface OnClickListenerInterface {\n    fun onClick()\n}\n</code></pre>\n<ul>\n<li><strong>2. Inside the class that will trigger the &quot;onClick&quot; callback i.e. &quot;CircleShape&quot; for your case:</strong></li>\n</ul>\n<p>Create a nullable variable.</p>\n<pre><code>var listener: OnClickListenerInterface? = null\n</code></pre>\n<p>Declare a function to initialise the variable above.</p>\n<pre><code>fun initOnClickInterface(listener: OnClickListenerInterface){\n        this.listener = listener\n    }\n</code></pre>\n<p>At the point where you want to trigger the &quot;onClick&quot; callback:</p>\n<pre><code>mCircleShape.setOnClickListener(View.OnClickListener {\n      if (listener == null) return@OnClickListener\n      listener?.onClick() // Trigger the call back\n    })\n</code></pre>\n<ul>\n<li><strong>3. Inside the activity where you want to receive the &quot;onClick&quot; callback:</strong></li>\n</ul>\n<p>Make the activity implement the OnClickListenerInterface, then create an object of your CircleShape class.</p>\n<pre><code>class Activity : AppCompatActivity(), OnClickListenerInterface {\n    val mCircleShape = CircleShape()\n    // ...other stuff\n</code></pre>\n<p>Inside the onCreate function of this activity, initialise your interface using the initOnClickInterface function we created in the CircleShape class.</p>\n<pre><code>mCircleShape.initOnClickListenerInterface(this)\n</code></pre>\n<p>Then finish by overriding the onClick method of our interface by adding the code below in the activity.</p>\n<pre><code>override fun onClick() {\n        // Callback received successfully. Do your stuff here\n    }\n</code></pre>\n<p>The above steps worked for me.</p>\n<p>As I said, in case of any issues with my coding, I'm a learner too \ud83d\ude0e.</p>\n<p>Cheers!</p>\n"}], "owner": {"reputation": 581, "user_id": 7809349, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh6.googleusercontent.com/-xxj8AcvmCrU/AAAAAAAAAAI/AAAAAAAAF_o/XRDsjNGm0QE/photo.jpg?sz=128", "display_name": "manwhotrycoding", "link": "https://stackoverflow.com/users/7809349/manwhotrycoding"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69611, "favorite_count": 14, "answer_count": 7, "score": 52, "last_activity_date": 1615533231, "creation_date": 1511722955, "question_id": 47499891, "link": "https://stackoverflow.com/questions/47499891/how-i-can-use-callback-in-kotlin", "title": "How I can use callback in Kotlin?", "body": "<p>I have View and one CircleShape , which should show toast in this View. And I use it in main Activity.\nThis is my interface </p>\n\n<pre><code>interface OnClickListenerInterface {\n  fun onClick()\n}\n</code></pre>\n\n<p>It is CircleShape( it is View in my xml) and listener in my View. I want to implement OnClick in my Activity. </p>\n\n<pre><code> var listener: OnClickListenerInterface? = null\n\n mCircleShape.setOnClickListener(View.OnClickListener {\n      if (listener == null) return@OnClickListener\n      listener!!.onClick()\n    })\n</code></pre>\n\n<p>I know , that in Kotlin getters and setters generic automatics, but how I can set listener if it private. It is code from my Activity, but It doesn't work</p>\n\n<pre><code>CircleShape.listener  = object :OnClickListenerInterface{\n      override fun onClick() {\n        ToastUtils.showSuccessMessage(getContext(),\"pressed\")\n      }\n    }\n</code></pre>\n\n<p>How I should to use Callback, onClickListenere in Kotlin?</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 4, "creation_date": 1511723323, "post_id": 47499872, "comment_id": 81955276, "body": "It may be worth noting that (IIRC) this creates a new array."}, {"owner": {"reputation": 15891, "user_id": 5382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s3eFh.jpg?s=128&g=1", "display_name": "Mikezx6r", "link": "https://stackoverflow.com/users/5382/mikezx6r"}, "edited": false, "score": 2, "creation_date": 1511872401, "post_id": 47499872, "comment_id": 82019781, "body": "I believe <a href=\"https://youtrack.jetbrains.com/issue/KT-20462\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-20462</a> fixes this performance/memory allocation issue. 1.2-Beta2 contains this fix."}, {"owner": {"reputation": 107167, "user_id": 878126, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/D5dZW.jpg?s=128&g=1", "display_name": "android developer", "link": "https://stackoverflow.com/users/878126/android-developer"}, "edited": false, "score": 0, "creation_date": 1539596768, "post_id": 47499872, "comment_id": 92545352, "body": "This works. I now wonder how you would do this on Java. Does anyone know?"}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "reply_to_user": {"reputation": 107167, "user_id": 878126, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/D5dZW.jpg?s=128&g=1", "display_name": "android developer", "link": "https://stackoverflow.com/users/878126/android-developer"}, "edited": false, "score": 0, "creation_date": 1539606367, "post_id": 47499872, "comment_id": 92550721, "body": "@androiddeveloper - I don&#39;t think you need to do anything special in Java.  This just works: <code>void a(String... strings) { &#47;* Stuff *&#47; } void b(String... strings) { a(strings); }</code>."}, {"owner": {"reputation": 107167, "user_id": 878126, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/D5dZW.jpg?s=128&g=1", "display_name": "android developer", "link": "https://stackoverflow.com/users/878126/android-developer"}, "edited": false, "score": 0, "creation_date": 1539609005, "post_id": 47499872, "comment_id": 92552359, "body": "@OliverCharlesworth OK thanks. I was sure it didn&#39;t work for me at some point, as this is actually what I&#39;ve tried, but now on POC it does work, so something else must have caused the initial error."}], "tags": [], "owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "is_accepted": true, "score": 72, "last_activity_date": 1511722851, "creation_date": 1511722851, "answer_id": 47499872, "question_id": 47499838, "link": "https://stackoverflow.com/questions/47499838/how-to-pass-vararg-to-a-varag-function-or-constructor-in-kotlin/47499872#47499872", "title": "How to Pass vararg to a varag function or constructor in Kotlin?", "body": "<p>From <a href=\"https://kotlinlang.org/docs/reference/functions.html#variable-number-of-arguments-varargs\" rel=\"noreferrer\">the docs</a>:</p>\n\n<blockquote>\n  <p>Inside a function a <code>vararg</code>-parameter of type <code>T</code> is visible as an array of <code>T</code>.</p>\n</blockquote>\n\n<p>So in the <code>SubtractionOperation</code> constructor, <code>values</code> is really an <code>Array&lt;Value&gt;</code>.  You need to use the <strong>spread</strong> operator (<code>*</code>) to forward these on:</p>\n\n<pre><code>class SubtractionOperation private constructor(vararg values: Value) : Operation(*values) ...\n</code></pre>\n"}], "owner": {"reputation": 567, "user_id": 8667560, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-MfYxyjgp_r4/AAAAAAAAAAI/AAAAAAAAEtw/vd0K2ghtEXM/photo.jpg?sz=128", "display_name": "Rafael Ferreira Rocha", "link": "https://stackoverflow.com/users/8667560/rafael-ferreira-rocha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7879, "favorite_count": 5, "accepted_answer_id": 47499872, "answer_count": 1, "score": 30, "last_activity_date": 1511723098, "creation_date": 1511722667, "last_edit_date": 1511723098, "question_id": 47499838, "link": "https://stackoverflow.com/questions/47499838/how-to-pass-vararg-to-a-varag-function-or-constructor-in-kotlin", "title": "How to Pass vararg to a varag function or constructor in Kotlin?", "body": "<p>Kotlin does not allow my subclass to pass vararg to my super class constuctor\nHere is my Operation class:</p>\n\n<pre><code>package br.com.xp.operation\n\nimport java.util.ArrayList\n\nabstract class Operation(vararg values: Value) : Value {\n    protected var values: MutableList&lt;Value&gt; = ArrayList()\n\n    internal abstract val operator: String\n}\n</code></pre>\n\n<p>and here is my SubtractionOperation class:</p>\n\n<pre><code>package br.com.xp.operation\n\nclass SubtractionOperation private constructor(vararg values: Value) : Operation(values) {\n    override val operator: String\n        get() = \"-\"\n}\n</code></pre>\n\n<p>The compile says: </p>\n\n<blockquote>\n  <p>Type mismatch Required Value found Array</p>\n</blockquote>\n\n<p>Can anyone explain why this is not possible?</p>\n"}, {"tags": ["android", "firebase", "transactions", "kotlin", "google-cloud-firestore"], "answers": [{"tags": [], "owner": {"reputation": 1988, "user_id": 4149649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wf9Kc.jpg?s=128&g=1", "display_name": "Yuri Misyac", "link": "https://stackoverflow.com/users/4149649/yuri-misyac"}, "is_accepted": false, "score": 0, "last_activity_date": 1522700894, "creation_date": 1522700894, "answer_id": 49618336, "question_id": 47499615, "link": "https://stackoverflow.com/questions/47499615/firestore-transactions-increment-and-decrement-counter-getting-inconsistent-resu/49618336#49618336", "title": "FireStore Transactions increment and decrement counter getting inconsistent result", "body": "<p>Maybe you have to add <code>return null</code> inside <code>Transaction.Function.apply()</code> method, like <a href=\"https://github.com/firebase/snippets-android/blob/27bc210b9111eefc15a8aa75bb9917e91d7c47b1/firestore/app/src/main/java/com/google/example/firestore/DocSnippets.java#L504-L527\" rel=\"nofollow noreferrer\">this</a></p>\n"}], "owner": {"reputation": 1351, "user_id": 6810881, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9fbe82e0efab895d67e02b10d615fac3?s=128&d=identicon&r=PG&f=1", "display_name": "gautam", "link": "https://stackoverflow.com/users/6810881/gautam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 759, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1593013009, "creation_date": 1511721237, "last_edit_date": 1522715711, "question_id": 47499615, "link": "https://stackoverflow.com/questions/47499615/firestore-transactions-increment-and-decrement-counter-getting-inconsistent-resu", "title": "FireStore Transactions increment and decrement counter getting inconsistent result", "body": "<p>Here is the code of transaction:-   </p>\n\n<pre><code>var sfDocRef = firebaseCloudStore.collection(\"New\").document(documentRef.get(pos))\n    firebaseCloudStore.runTransaction(Transaction.Function {\n        transaction - &gt;\n            val snapshot = transaction.get(sfDocRef)\n        var newlikes: Double\n\n        if (isliked == true) {\n            newlikes = snapshot.getDouble(\"likes\") !!+1\n        } else {\n            newlikes = snapshot.getDouble(\"likes\") !!-1\n        }\n        transaction.update(sfDocRef, \"likes\", newlikes)\n    }).addOnSuccessListener {\n\n        var ref = firebaseCloudStore.collection(\"New\").document(documentRef.get(pos)).get().addOnCompleteListener {\n            list = it.result.toObject(New::class.java)\n            arraylist.get(pos).likes = list.likes\n            arraylist.get(pos).isliked = !arraylist.get(pos).isliked\n            adapter.notifyItemChanged(pos)\n\n        }\n    }.addOnFailureListener(OnFailureListener {\n        e - &gt; Log.w(\"TAG\", \"Transaction failure.\", e)\n    })\n</code></pre>\n\n<p>Here I have implemented FireStore transactions as mentioned in the docs but still getting inconsistent result , like if you press like button repeatedly fast then the result is either more larger or more less . Is there any error in code or I'm doing something wrong?</p>\n"}, {"tags": ["android", "gradle", "junit", "kotlin", "jacoco"], "answers": [{"tags": [], "owner": {"reputation": 1414, "user_id": 1204440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rlt7l.png?s=128&g=1", "display_name": "Carmen", "link": "https://stackoverflow.com/users/1204440/carmen"}, "is_accepted": true, "score": 4, "last_activity_date": 1511719616, "creation_date": 1511719616, "answer_id": 47499352, "question_id": 47499351, "link": "https://stackoverflow.com/questions/47499351/jacoco-is-reporting-0-coverage-of-kotlin-classes-by-unit-tests-in-an-android-pr/47499352#47499352", "title": "Jacoco is reporting 0 coverage of Kotlin classes by unit tests, in an Android project", "body": "<p>I had to add <code>includeNoLocationClasses = true</code> to my gradle file as follows, to make the jacoco report reflect the coverage of Kotlin classes by unit tests:</p>\n\n<pre><code>android {\n    testOptions {\n        unitTests {\n            all {\n                jvmArgs '-noverify', '-ea'\n                jacoco {\n                    includeNoLocationClasses = true\n                }\n            }\n            includeAndroidResources = true\n        }\n    }\n}\n</code></pre>\n\n<p>Note: this solution works for running tests from the command line, but I still get 0% coverage when running with coverage from inside Android Studio.</p>\n"}], "owner": {"reputation": 1414, "user_id": 1204440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rlt7l.png?s=128&g=1", "display_name": "Carmen", "link": "https://stackoverflow.com/users/1204440/carmen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2445, "favorite_count": 0, "accepted_answer_id": 47499352, "answer_count": 1, "score": 4, "last_activity_date": 1511719616, "creation_date": 1511719616, "question_id": 47499351, "link": "https://stackoverflow.com/questions/47499351/jacoco-is-reporting-0-coverage-of-kotlin-classes-by-unit-tests-in-an-android-pr", "title": "Jacoco is reporting 0 coverage of Kotlin classes by unit tests, in an Android project", "body": "<p>I'm using Android Gradle Plugin 3.0.0.</p>\n\n<p>I'm migrating an Android app from java to kotlin. My app has classes in Java and Kotlin, and tests are in Java.</p>\n\n<p>I run <code>./gradlew clean jacocoTestReport</code>.</p>\n\n<p>This runs both unit tests (<code>src/test</code>) and instrumentation tests (<code>src/androidTest</code>).</p>\n\n<p>The report produced by jacoco in <code>app/build/reports/jacoco/jacocoTestReport/html/index.html</code> doesn't show coverage for Kotlin classes which are indeed covered by unit tests.</p>\n\n<p>The report does show coverage correctly from instrumentation tests.</p>\n\n<p>Note: I came across these other questions, which aren't exactly the same issue:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/45464138/jacoco-returning-0-coverage-with-kotlin-and-android-3-0\">JaCoCo returning 0% Coverage with Kotlin and Android 3.0</a> has a problem with code coverage by instrumentation tests, not unit tests.</li>\n<li><a href=\"https://stackoverflow.com/questions/34044798/android-studio-jacoco-reports-0-coverage\">Android Studio JaCoCo reports 0% coverage</a> has a problem with code coverage from inside Android Studio, but not Kotlin-specific.</li>\n</ul>\n\n<p>Relevant portions of my app module's build.gradle:</p>\n\n<pre><code>apply plugin: 'jacoco'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-kapt'\n...\nandroid {\n    defaultConfig {\n        sourceSets {\n            main.java.srcDirs += \"$projectDir/src/main/kotlin\"\n        }\n    }\n\n    testOptions {\n        unitTests {\n            all {\n                jvmArgs '-noverify', '-ea'\n            }\n            includeAndroidResources = true\n        }\n    }\n}\n\ndependencies {\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib-jre7:$kotlin_version\"\n    ....\n}\n\njacoco {\n    toolVersion '0.7.9'\n}\n\ntask jacocoTestReport(type: JacocoReport, dependsOn: [\"testDebugUnitTest\", \"createDebugCoverageReport\"]) {\n    reports {\n        html.enabled = true\n    }\n    classDirectories = fileTree(\n            dir: \"${buildDir}\",\n            includes: [\"tmp/kotlin-classes/debug/ca/rmen/android/poetassistant/**/*.class\",\n                       \"intermediates/classes/debug/ca/rmen/android/poetassistant/**/*.class\"],\n            excludes: [\"**/R.class\", \"**/R*.class\", \"**/Manifest.class\", \"**/Manifest*.class\", \"**/BuildConfig.class\",\n                       // ignore databinding generated code:\n                       \"**/ca/rmen/android/poetassistant/databinding/*.class\",\n                       ... other excludes ...\n                       \"**/ca/rmen/android/poetassistant/BR.class\",\n                       \"**/com/android/**/*.class\"])\n    sourceDirectories = files(\"${project.projectDir}/src/main/java\", \"${project.projectDir}/src/main/kotlin\")\n    executionData = fileTree(\n            dir: \"${buildDir}\",\n            includes: [\n                    \"jacoco/testDebugUnitTest.exec\",\n                    \"outputs/code-coverage/connected/*coverage.ec\"\n            ])\n}\n</code></pre>\n"}, {"tags": ["kotlin", "rx-java2"], "comments": [{"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 1, "creation_date": 1511719685, "post_id": 47499343, "comment_id": 81953991, "body": "Is <code>repository.insertOrUpdate(note)</code> <code>null</code>?"}, {"owner": {"reputation": 962, "user_id": 5190902, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/eb6720410a4e0dfc1cb57513231fbe33?s=128&d=identicon&r=PG&f=1", "display_name": "liminal", "link": "https://stackoverflow.com/users/5190902/liminal"}, "reply_to_user": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1511720044, "post_id": 47499343, "comment_id": 81954104, "body": "You are right, what a silly mistake! I thought I should not even care setting up the second Completable in my unit test since the first one should result in error. Wrong! Thanks for your help!"}, {"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 1, "creation_date": 1511720796, "post_id": 47499343, "comment_id": 81954343, "body": "I&#39;m not sure how comprehensive it is, or if this fixes your problem, but <a href=\"https://github.com/ReactiveX/RxKotlin\" rel=\"nofollow noreferrer\"><code>RxKotlin</code></a> adds Kotlin extensions to RxJava - it may be worth taking a look if you haven&#39;t already."}, {"owner": {"reputation": 962, "user_id": 5190902, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/eb6720410a4e0dfc1cb57513231fbe33?s=128&d=identicon&r=PG&f=1", "display_name": "liminal", "link": "https://stackoverflow.com/users/5190902/liminal"}, "reply_to_user": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1511721697, "post_id": 47499343, "comment_id": 81954704, "body": "Will take a look and possibly start using RxKotlin instead of RxJava. My app is 100% Kotlin"}], "answers": [{"tags": [], "owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "is_accepted": true, "score": 2, "last_activity_date": 1511723110, "last_edit_date": 1511723110, "creation_date": 1511720600, "answer_id": 47499494, "question_id": 47499343, "link": "https://stackoverflow.com/questions/47499343/completable-andthen-results-in-other-is-null/47499494#47499494", "title": "Completable.andThen results in &quot;other is null&quot;", "body": "<p>This seems to have been resolved, but just to tie up loose ends, the argument to <code>concatWith</code> (<code>repository.insertOrUpdate(note)</code> in this case) cannot be null.</p>\n\n<p>Interestingly, ReactiveX seems to have its own <code>ObjectHelper.requireNonNull</code> function, but <em>hasn't</em> annotated the parameter with any sort of <code>NotNull</code> annotation, so the <code>Kotlin</code> compiler can't check nullability at compile time.</p>\n\n<p>It might be worth suggesting this in an issue.</p>\n"}], "owner": {"reputation": 962, "user_id": 5190902, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/eb6720410a4e0dfc1cb57513231fbe33?s=128&d=identicon&r=PG&f=1", "display_name": "liminal", "link": "https://stackoverflow.com/users/5190902/liminal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 648, "favorite_count": 0, "accepted_answer_id": 47499494, "answer_count": 1, "score": 1, "last_activity_date": 1511754261, "creation_date": 1511719567, "last_edit_date": 1511754261, "question_id": 47499343, "link": "https://stackoverflow.com/questions/47499343/completable-andthen-results-in-other-is-null", "title": "Completable.andThen results in &quot;other is null&quot;", "body": "<p>I have the following code:</p>\n\n<pre><code>fun edit(note: Note): Completable = getValidationCompletable(note).andThen(repository.insertOrUpdate(note))\n\nprivate fun getValidationCompletable(note: Note): Completable {\n    return if (!note.isValidForEdit()) {\n        Completable.error(IllegalArgumentException(\"note failed validation before edit\"))\n    } else {\n        Completable.complete()\n    }\n}\n</code></pre>\n\n<p>in the case where <code>note.isValidForEdit()</code>returns false, I get the following:</p>\n\n<pre><code>java.lang.NullPointerException: other is null\n\nat io.reactivex.internal.functions.ObjectHelper.requireNonNull(ObjectHelper.java:39)\nat io.reactivex.Completable.concatWith(Completable.java:1040)\nat io.reactivex.Completable.andThen(Completable.java:908)\n</code></pre>\n\n<p>Can anyone shed any light on this?</p>\n"}, {"tags": ["android", "lambda", "kotlin"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5436326"}, "edited": false, "score": 0, "creation_date": 1511718652, "post_id": 47498993, "comment_id": 81953599, "body": "thanks @pickle_morty your explanation was very specific and clear . the blog post was very helpful"}], "tags": [], "owner": {"reputation": 2105, "user_id": 1909309, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/zBBmU.jpg?s=128&g=1", "display_name": "Wubbalubbadubdub", "link": "https://stackoverflow.com/users/1909309/wubbalubbadubdub"}, "is_accepted": true, "score": 2, "last_activity_date": 1511717395, "creation_date": 1511717395, "answer_id": 47498993, "question_id": 47498785, "link": "https://stackoverflow.com/questions/47498785/kotlin-extension-function-dont-get-how-this-thing-works/47498993#47498993", "title": "kotlin Extension function don&#39;t get how this thing works", "body": "<p>The main thing about both of this functions are , they are extension function \naccording to <a href=\"https://kotlinlang.org/docs/reference/extensions.html\" rel=\"nofollow noreferrer\">official Doc</a></p>\n\n<blockquote>\n  <p>To declare an extension function, we need to prefix its name with a receiver type, i.e. the type being extended. The following adds a swap function to <code>MutableList&lt;Int&gt;</code></p>\n</blockquote>\n\n<pre><code>fun MutableList&lt;Int&gt;.swap(index1: Int, index2: Int) {\nval tmp = this[index1] // 'this' corresponds to the list\nthis[index1] = this[index2]\nthis[index2] = tmp\n}\n</code></pre>\n\n<blockquote>\n  <p>The this keyword inside an extension function corresponds to the receiver object (the one that is passed before the dot). Now, we can call such a function on any <code>MutableList&lt;Int&gt;</code></p>\n</blockquote>\n\n<p>Now if you want you can change the type Int to Generic Like this </p>\n\n<pre><code>fun &lt;T&gt; MutableList&lt;T&gt;.swap(index1: Int, index2: Int) {\nval tmp = this[index1] // 'this' corresponds to the list\nthis[index1] = this[index2]\nthis[index2] = tmp\n}\n</code></pre>\n\n<p>Now look at the funtion <code>useOrDefault</code> is taking the caller object (\"a\" in the example), and if it's not null, it runs the function \"usage\", otherwise it returns the default value. As usage is acting as an extension function of the caller, that's why it can do \"this?.usage()\"</p>\n\n<p>read this article this will be very helpful to understand this function </p>\n\n<p><a href=\"https://antonioleiva.com/generic-functions-kotlin/\" rel=\"nofollow noreferrer\">Ninja Functions in Kotlin</a></p>\n"}, {"tags": [], "owner": {"reputation": 162, "user_id": 8320224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/690c13ebd4b14ac64b9b34e9962ec668?s=128&d=identicon&r=PG&f=1", "display_name": "user8320224", "link": "https://stackoverflow.com/users/8320224/user8320224"}, "is_accepted": false, "score": 0, "last_activity_date": 1511782312, "creation_date": 1511782312, "answer_id": 47509976, "question_id": 47498785, "link": "https://stackoverflow.com/questions/47498785/kotlin-extension-function-dont-get-how-this-thing-works/47509976#47509976", "title": "kotlin Extension function don&#39;t get how this thing works", "body": "<p>doubleWith() convenient to use with object as first parameter, complex expression as second parameter and lambda as third, for example</p>\n\n<pre><code>doubleWith(first = a, second = {complex expression}) { \n    // first as this (like in with body)\n    // and second as it (or explicit parameter name)\n    // in lambda body\n    ...\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5436326"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 47498993, "answer_count": 2, "score": 0, "last_activity_date": 1511782312, "creation_date": 1511716137, "question_id": 47498785, "link": "https://stackoverflow.com/questions/47498785/kotlin-extension-function-dont-get-how-this-thing-works", "title": "kotlin Extension function don&#39;t get how this thing works", "body": "<p>I am a very new on learning Kotlin . As far everything was quite understandable , By Today I have came across to a piece of code which intimidate me . I have searched a lot and did some research on this piece of code . here is this two extension function I need to understand </p>\n\n<pre><code>private fun T ?.useOrDefault(default: R, usage: T.(R) -&gt; R) = this?.usage(default) ?:default\n</code></pre>\n\n<p>second one </p>\n\n<pre><code>inline fun &lt;F, S&gt; doubleWith(first: F, second: S, runWith: F.(S) -&gt; Unit) {\n   first.runWith(second)\n  }\n</code></pre>\n\n<p>usage</p>\n\n<pre><code>a.useOrDefault(100) { getInteger(R.styleable.ArcSeekBar_maxProgress, it) } \nset(progress) { \nfield = bound(0, progress, Int.MAX_VALUE) \ndrawData?.let \n  { \n    drawData = it.copy(maxProgress = progress) } invalidate() \n   }\n</code></pre>\n\n<p>I have a basic understanding over lambdas and higher order function but this generics version of function is really out of my reach as a beginner </p>\n\n<p>Thanks and appreciations in advance</p>\n"}, {"tags": ["android", "kotlin", "rx-java", "observable", "rx-android"], "answers": [{"tags": [], "owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "is_accepted": true, "score": 2, "last_activity_date": 1511716503, "creation_date": 1511716503, "answer_id": 47498836, "question_id": 47498462, "link": "https://stackoverflow.com/questions/47498462/mutable-list-of-obersableobject-wait-until-all-of-them-finish-and-combine-them/47498836#47498836", "title": "Mutable list of Obersable&lt;Object&gt; wait until all of them finish and combine them into a List&lt;Object&gt;", "body": "<p>You can use <a href=\"http://reactivex.io/RxJava/javadoc/io/reactivex/Observable.html#concat-java.lang.Iterable-\" rel=\"nofollow noreferrer\"><code>Observable.concat()</code></a> for this and call <a href=\"http://reactivex.io/RxJava/javadoc/io/reactivex/Observable.html#toList--\" rel=\"nofollow noreferrer\"><code>toList()</code></a> on it.</p>\n\n<pre><code>Observable.concat(observableList)\n          .subscribeOn(...)\n          .toList()\n          .observeOn(...)\n          .subscribe(...)\n</code></pre>\n\n<p>Inbetween you can also switch threads with <code>subscribeOn</code> and <code>observeOn</code> to make sure not to block the UI thread.</p>\n"}], "owner": {"reputation": 33, "user_id": 5181123, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-btkkWCXoOTk/AAAAAAAAAAI/AAAAAAAALJs/WL_9NRo0U-0/photo.jpg?sz=128", "display_name": "Diego Gaspar", "link": "https://stackoverflow.com/users/5181123/diego-gaspar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 500, "favorite_count": 0, "accepted_answer_id": 47498836, "answer_count": 1, "score": 1, "last_activity_date": 1511716503, "creation_date": 1511714159, "last_edit_date": 1511714979, "question_id": 47498462, "link": "https://stackoverflow.com/questions/47498462/mutable-list-of-obersableobject-wait-until-all-of-them-finish-and-combine-them", "title": "Mutable list of Obersable&lt;Object&gt; wait until all of them finish and combine them into a List&lt;Object&gt;", "body": "<p>I'm not an expert in RxJava/RxAndroid and I'm having some issues with this scenario. \nBasically I have a mutable list of observable which I won't ever know the size and I want to wait until all of them are completed as well.</p>\n\n<pre><code>var observableList: MutableList&lt;Observable&lt;Object&gt;&gt; = mutableListOf()\n</code></pre>\n\n<p>And I would like to do something like: </p>\n\n<pre><code>Observable.zip(observableList,....)\n</code></pre>\n\n<p>and combine all the <code>Object</code> results into <code>Object&lt;List&gt;</code></p>\n"}, {"tags": ["java", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 9010958, "user_type": "registered", "profile_image": "https://graph.facebook.com/148514509118246/picture?type=large", "display_name": "blogtrai", "link": "https://stackoverflow.com/users/9010958/blogtrai"}, "edited": false, "score": 0, "creation_date": 1511714864, "post_id": 47498396, "comment_id": 81952255, "body": "Thanks for your answer. But, is there any other way?"}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": true, "score": 2, "last_activity_date": 1511714741, "last_edit_date": 1511714741, "creation_date": 1511713843, "answer_id": 47498396, "question_id": 47498258, "link": "https://stackoverflow.com/questions/47498258/assign-a-new-value-to-variables-by-using-method-in-kotlin/47498396#47498396", "title": "Assign a new value to variables by using method in Kotlin?", "body": "<p>In your <code>main</code> function you create 2 separate instances of the <code>drawTriangle</code> class, thus there are 2 sets of variables - one of them you change, one of them you print. A short fix:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;){\n    val d = drawTriangle()\n    d.inputRowandColumn()\n    d.Printvalue()\n}\n</code></pre>\n\n<p>P.S. Your Kotlin code drastically differs from your Java code. In your Java snippet you use 2 <code>static</code> fields, which belong to a class. But in the Kotlin snippet you use 2 member properties, which need instances to be stored in.</p>\n\n<p>P.P.S. Your Kotlin code kinda looks like C#. When learning a new language it is not a bad idea to use the naming conventions of that language ;)</p>\n"}, {"tags": [], "owner": {"reputation": 15891, "user_id": 5382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s3eFh.jpg?s=128&g=1", "display_name": "Mikezx6r", "link": "https://stackoverflow.com/users/5382/mikezx6r"}, "is_accepted": false, "score": 0, "last_activity_date": 1511873170, "creation_date": 1511873170, "answer_id": 47531986, "question_id": 47498258, "link": "https://stackoverflow.com/questions/47498258/assign-a-new-value-to-variables-by-using-method-in-kotlin/47531986#47531986", "title": "Assign a new value to variables by using method in Kotlin?", "body": "<p>I'm not sure why you're doing what you're doing. As per voddan, your code is not equivalent. Java is using statics, which are associated with the class, and not an instance, hence your ability to access them directly from the static 'main' method.</p>\n\n<p>Kotlin separates class (static) items from instance items. If you define a class, you can only instantiate instances and work with them.</p>\n\n<p>If you truly want to implement your attempt in Kotlin, you need to use an 'object' rather than a 'class'. An object in Kotlin is a singleton. Here's how you would write it in Kotlin.</p>\n\n<pre><code>object drawTriangle {\n    var intColumn: Int = 0\n    var intRow: Int = 0\n\n    fun drawTriangle() {\n        this.inputRowandColumn()\n        this.printvalue()\n    }\n\n    fun inputRowandColumn() {\n        intColumn = 12\n        intRow = 3\n    }\n\n    fun printvalue() {\n        println(\"the value of Rows is: $intRow\")\n        println(\"the value of Column is: $intColumn\")\n    }\n}\n\nfun main(args: Array&lt;String&gt;) {\n    drawTriangle.inputRowandColumn()\n    drawTriangle.printvalue()\n}\n</code></pre>\n\n<p>Note that I removed the 'public' as Kotlin's default is public. Removed semi-colons, and renamed things to conform to Kotlin naming standards.</p>\n"}], "owner": {"reputation": 25, "user_id": 9010958, "user_type": "registered", "profile_image": "https://graph.facebook.com/148514509118246/picture?type=large", "display_name": "blogtrai", "link": "https://stackoverflow.com/users/9010958/blogtrai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1711, "favorite_count": 0, "accepted_answer_id": 47498396, "answer_count": 2, "score": 2, "last_activity_date": 1512202504, "creation_date": 1511713030, "last_edit_date": 1512202504, "question_id": 47498258, "link": "https://stackoverflow.com/questions/47498258/assign-a-new-value-to-variables-by-using-method-in-kotlin", "title": "Assign a new value to variables by using method in Kotlin?", "body": "<p>In Java, I can use [class-name].[method] to change the value of variables in a class like:</p>\n\n<pre><code> public class Main {    \n    public static void main(String[] args) {\n        // Prints \"Hello, World\" to the terminal window.\n        test.teste();\n        test.printlnvar();\n    }        \n}\n\nclass test{\n    public static int a = 0;\n    public static int b = 0;\n    public static void teste(){\n        a = 9;\n        b = 12;\n    }\n    public static void printlnvar(){\n        System.out.println(\"the value of A: \" + a);\n        System.out.println(\"the value of B: \" + b);\n    }\n}\n</code></pre>\n\n<p>However, how can I do that in Kotlin? I try but the result is always 0 for variable IntColumn and IntRow in code below:</p>\n\n<pre><code>public class drawTriangle{       \n   public var IntColumn:Int = 0;\n   public var IntRow:Int = 0;\n\n  fun drawTriangle(){\n    this.inputRowandColumn();\n    this.Printvalue();\n  }\n\n  fun inputRowandColumn(){\n    IntColumn = 12;\n    IntRow = 3;\n  }\n\n  fun Printvalue(){\n    println(\"the value of rows is: ${IntRow}\");\n    println(\"the value of column is: ${IntColumn}\");\n  }\n}\n\nfun main(args: Array&lt;String&gt;){\n    drawTriangle().inputRowandColumn();\n    drawTriangle().Printvalue();\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 7276394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c9c519e578224fbfd43db84380d4945?s=128&d=identicon&r=PG&f=1", "display_name": "flokol120", "link": "https://stackoverflow.com/users/7276394/flokol120"}, "edited": false, "score": 0, "creation_date": 1511720485, "post_id": 47499260, "comment_id": 81954248, "body": "Thank you for your answer. But I wanted a Time Picker, not a Date Picker. But there is a TimePickerDialog too, which I could use, Thanks!"}], "tags": [], "owner": {"reputation": 676, "user_id": 7697901, "user_type": "registered", "profile_image": "https://graph.facebook.com/1373770156022605/picture?type=large", "display_name": "Aliaksandr Kavalenka", "link": "https://stackoverflow.com/users/7697901/aliaksandr-kavalenka"}, "is_accepted": false, "score": 4, "last_activity_date": 1511768398, "last_edit_date": 1511768398, "creation_date": 1511719114, "answer_id": 47499260, "question_id": 47498014, "link": "https://stackoverflow.com/questions/47498014/android-kotlin-dialogfragment-timepicker/47499260#47499260", "title": "Android Kotlin DialogFragment (TimePicker)", "body": "<p>Maybe that helps you</p>\n\n<p>I have a function <strong>getDate()</strong></p>\n\n<pre><code>fun getDate(textView: TextView, context: Context){\n\n        val cal = Calendar.getInstance()\n\n        val dateSetListener = DatePickerDialog.OnDateSetListener { view, year, monthOfYear, dayOfMonth -&gt;\n            cal.set(Calendar.YEAR, year)\n            cal.set(Calendar.MONTH, monthOfYear)\n            cal.set(Calendar.DAY_OF_MONTH, dayOfMonth)\n\n            textView.text = SimpleDateFormat(\"dd.MM.yyyy\").format(cal.time)\n\n        }\n\n        textView.setOnClickListener {\n            DatePickerDialog(context, dateSetListener,\n                    cal.get(Calendar.YEAR),\n                    cal.get(Calendar.MONTH),\n                    cal.get(Calendar.DAY_OF_MONTH)).show()\n        }\n    }\n</code></pre>\n\n<p>If an Activity need call DatePickerDialog - I simply use my function</p>\n\n<pre><code>presenter.getDate(textViewTime, this)\n</code></pre>\n\n<p>presenter - it is object where is my function getDate</p>\n"}, {"tags": [], "owner": {"reputation": 97, "user_id": 7276394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c9c519e578224fbfd43db84380d4945?s=128&d=identicon&r=PG&f=1", "display_name": "flokol120", "link": "https://stackoverflow.com/users/7276394/flokol120"}, "is_accepted": true, "score": 6, "last_activity_date": 1511721316, "creation_date": 1511721316, "answer_id": 47499627, "question_id": 47498014, "link": "https://stackoverflow.com/questions/47498014/android-kotlin-dialogfragment-timepicker/47499627#47499627", "title": "Android Kotlin DialogFragment (TimePicker)", "body": "<p><a href=\"https://stackoverflow.com/users/7697901/aliaksandr-kavalenka\">Aliaksandr Kavalenka</a> came up with a neat workaround, which was for a date picker. I formatted his idea to work with a time picker:</p>\n\n<pre><code>fun getTime(textView: TextView, context: Context){\n\n    val cal = Calendar.getInstance()\n\n    val timeSetListener = TimePickerDialog.OnTimeSetListener { timePicker, hour, minute -&gt;\n        cal.set(Calendar.HOUR_OF_DAY, hour)\n        cal.set(Calendar.MINUTE, minute)\n\n        textView.text = SimpleDateFormat(\"HH:mm\").format(cal.time)\n    }\n\n    textView.setOnClickListener {\n        TimePickerDialog(context, timeSetListener, cal.get(Calendar.HOUR_OF_DAY), cal.get(Calendar.MINUTE), true).show()\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 97, "user_id": 7276394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c9c519e578224fbfd43db84380d4945?s=128&d=identicon&r=PG&f=1", "display_name": "flokol120", "link": "https://stackoverflow.com/users/7276394/flokol120"}, "edited": false, "score": 0, "creation_date": 1511767144, "post_id": 47503070, "comment_id": 81967078, "body": "Thank You! The error is gone but both <code>newFragment.show(this@AddTimer.fragmentManager, &quot;timePicker&quot;)</code> and <code>newFragment.show(fragmentManager, &quot;timePicker&quot;)</code> produces a <code>java.lang.IllegalArgumentException: Parameter specified as non-null is null: method kotlin.jvm.internal.Intrinsics.checkParameterIsNotNull, parameter savedInstanceState</code>. Any idea for that?"}], "tags": [], "owner": {"reputation": 10286, "user_id": 710802, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/7bdd31a948096ab5e3f26f62bb44fed7?s=128&d=identicon&r=PG&f=1", "display_name": "bond", "link": "https://stackoverflow.com/users/710802/bond"}, "is_accepted": false, "score": 0, "last_activity_date": 1511748901, "creation_date": 1511748901, "answer_id": 47503070, "question_id": 47498014, "link": "https://stackoverflow.com/questions/47498014/android-kotlin-dialogfragment-timepicker/47503070#47503070", "title": "Android Kotlin DialogFragment (TimePicker)", "body": "<p>Looks like you are mixing Regular DialogFragment with Support Lib Fragment.\nYou should extend \"android.support.v4.app.DialogFragment\" instead of \"import android.app.DialogFragment\".</p>\n\n<p>Support lib uses support library version FragmentManager not regular Fragment Manager.</p>\n\n<p>Hope this helps.</p>\n"}, {"tags": [], "owner": {"reputation": 199, "user_id": 9832581, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "abhilasha Yadav", "link": "https://stackoverflow.com/users/9832581/abhilasha-yadav"}, "is_accepted": false, "score": 0, "last_activity_date": 1527061196, "last_edit_date": 1527061196, "creation_date": 1527058321, "answer_id": 50481638, "question_id": 47498014, "link": "https://stackoverflow.com/questions/47498014/android-kotlin-dialogfragment-timepicker/50481638#50481638", "title": "Android Kotlin DialogFragment (TimePicker)", "body": "<pre><code> private var date: DatePickerDialog.OnDateSetListener? = null\n\n date = DatePickerDialog.OnDateSetListener { view, year, monthOfYear, dayOfMonth -&gt;\n\n            myCalendar?.set(Calendar.YEAR, year)\n            myCalendar?.set(Calendar.MONTH, monthOfYear)\n            myCalendar?.set(Calendar.DAY_OF_MONTH, dayOfMonth)\n            val myFormat = \"yyyy-MM-dd\"\n            val sdf = SimpleDateFormat(myFormat, Locale.getDefault())\n            Log.d(\"date_of_birth\", sdf.format(myCalendar?.time))\n\n        }\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 7276394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c9c519e578224fbfd43db84380d4945?s=128&d=identicon&r=PG&f=1", "display_name": "flokol120", "link": "https://stackoverflow.com/users/7276394/flokol120"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7409, "favorite_count": 0, "accepted_answer_id": 47499627, "answer_count": 4, "score": 2, "last_activity_date": 1527061196, "creation_date": 1511711666, "question_id": 47498014, "link": "https://stackoverflow.com/questions/47498014/android-kotlin-dialogfragment-timepicker", "title": "Android Kotlin DialogFragment (TimePicker)", "body": "<p>I'm having problems showing a DialogFragment with Android in Kotlin. This is what I got so far:</p>\n\n<p>The <code>TimePickerFragment.kt</code></p>\n\n<pre><code>package de.flokol120.UniversalSleepTimer\n\nimport android.app.Dialog\nimport android.app.DialogFragment\nimport android.widget.TimePicker\nimport android.app.TimePickerDialog\nimport android.os.Bundle\nimport android.text.format.DateFormat\nimport java.util.*\n\n\n/**\n * @author flokol120\n * TimePicker Fragment to get the time\n */\nclass TimePickerFragment : DialogFragment(), TimePickerDialog.OnTimeSetListener {\n\n    override fun onCreateDialog(savedInstanceState: Bundle): Dialog {\n        val c = Calendar.getInstance()\n        val hour = c.get(Calendar.HOUR_OF_DAY)\n        val minute = c.get(Calendar.MINUTE)\n\n        return TimePickerDialog(getActivity(), this, hour, minute,\n                DateFormat.is24HourFormat(getActivity()))\n    }\n\n    override fun onTimeSet(view: TimePicker, hourOfDay: Int, minute: Int) {\n        //TODO add this\n    }\n}\n</code></pre>\n\n<p>and the <code>AddTimer.kt</code></p>\n\n<pre><code>package de.flokol120.UniversalSleepTimer\n\nimport android.os.Bundle\nimport android.support.v4.app.Fragment\nimport android.view.LayoutInflater\nimport android.view.View\nimport android.view.ViewGroup\nimport android.widget.Button\n\n\n/**\n * @author flokol120\n * the fragment which adds a simple kill Timer\n */\nclass AddTimer : Fragment() {\n\n    lateinit var timePicker : Button\n\n    override fun onCreateView(inflater: LayoutInflater?, container: ViewGroup?,\n                              savedInstanceState: Bundle?): View? {\n        val v = inflater!!.inflate(R.layout.fragment_add_timer, container, false)\n\n        timePicker = v.findViewById(R.id.timePicker)\n\n        timePicker.setOnClickListener {\n            val newFragment = TimePickerFragment()\n            newFragment.show(fragmentManager, \"timePicker\")\n        }\n\n        return v\n    }\n\n}\n</code></pre>\n\n<p>I also tried replacing the <code>fragmentManager</code> with <code>this@AddTimer.fragmentManager</code> but this doesn't seem to be the solution.</p>\n\n<p>I am pretty clueless now because Android Studio says I have to use an <code>FragmentManager!</code> as first parameter but I am using one, right?</p>\n"}, {"tags": ["kotlin", "tornadofx"], "answers": [{"tags": [], "owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "is_accepted": true, "score": 2, "last_activity_date": 1511696652, "creation_date": 1511696652, "answer_id": 47495770, "question_id": 47495630, "link": "https://stackoverflow.com/questions/47495630/binding-a-domain-model-with-nullable-fields-in-itemviewmodel/47495770#47495770", "title": "Binding a domain model with nullable fields in ItemViewModel", "body": "<p>This should already be working in TornadoFX 1.7.13-SNAPSHOT, we did some improvements to nullable POJO's. An alternative approach (and better IMO) is to use JavaFX properties in your domain objects:</p>\n\n<pre><code>class Person {\n    val nameProperty = SimpleStringProperty()\n    var name by nameProperty\n}\n</code></pre>\n\n<p>One last thing to consider is that you haven't set an initial item into your ViewModel. Remember that the ViewModel doesn't itself create instances of your item, you have to do that manually, or even give the ViewModel a default item when it's created:</p>\n\n<pre><code>class PersonModel : ItemViewModel&lt;Person&gt;(Person()) {\n    val name = bind(Person::name)\n}\n</code></pre>\n"}], "owner": {"reputation": 5360, "user_id": 3139545, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8c4a158119260b6a27a6bab276cac749?s=128&d=identicon&r=PG&f=1", "display_name": "user3139545", "link": "https://stackoverflow.com/users/3139545/user3139545"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "accepted_answer_id": 47495770, "answer_count": 1, "score": 0, "last_activity_date": 1511696652, "creation_date": 1511695831, "question_id": 47495630, "link": "https://stackoverflow.com/questions/47495630/binding-a-domain-model-with-nullable-fields-in-itemviewmodel", "title": "Binding a domain model with nullable fields in ItemViewModel", "body": "<p>When running this code:</p>\n\n<pre><code>class PersonApp : App(PersonView::class)\nclass Person {\n    var name: String? = null\n}\nclass PersonModel: ItemViewModel&lt;Person&gt;() {\n    val name = bind(Person::name)\n}\nclass PersonView : View() {\n    val model: PersonModel by inject()\n    override val root = form {\n        textfield(model.name)\n    }\n}\n</code></pre>\n\n<p>The following exception is thrown:</p>\n\n<pre><code>Nov 26, 2017 12:18:10 PM tornadofx.DefaultErrorHandler uncaughtException\nSEVERE: Uncaught error\nkotlin.TypeCastException: null cannot be cast to non-null type javafx.beans.property.Property&lt;N&gt;\n    at favetelinguis.bfgx.PersonModel$$special$$inlined$bindMutableNullableField$1.invoke(ViewModel.kt:538)\n    at favetelinguis.bfgx.PersonModel$$special$$inlined$bindMutableNullableField$1.invoke(ViewModel.kt:512)\n    at favetelinguis.bfgx.PersonModel.&lt;init&gt;(Exeee.kt:27)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n    at java.lang.Class.newInstance(Class.java:442)\n    at tornadofx.FXKt.find(FX.kt:413)\n    at favetelinguis.bfgx.Bree$$special$$inlined$inject$1.getValue(Component.kt:954)\n    at favetelinguis.bfgx.Bree$$special$$inlined$inject$1.getValue(Component.kt:151)\n    at favetelinguis.bfgx.Bree.getModel(Exeee.kt)\n    at favetelinguis.bfgx.Bree$root$1.invoke(Exeee.kt:20)\n    at favetelinguis.bfgx.Bree$root$1.invoke(Exeee.kt:17)\n    at tornadofx.FXKt.opcr(FX.kt:454)\n    at tornadofx.FormsKt.form(Forms.kt:23)\n    at favetelinguis.bfgx.Bree.&lt;init&gt;(Exeee.kt:19)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n    at java.lang.Class.newInstance(Class.java:442)\n    at tornadofx.FXKt.find(FX.kt:413)\n    at tornadofx.FXKt.find$default(FX.kt:398)\n    at tornadofx.App.start(App.kt:79)\n    at com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$162(LauncherImpl.java:863)\n    at com.sun.javafx.application.PlatformImpl.lambda$runAndWait$175(PlatformImpl.java:326)\n    at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)\n    at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)\n</code></pre>\n\n<p>What is the idiomatic way of working with domain models where all the initial values are null and are to be set from the GUI? That is how can i change the code above to get it working as expected?</p>\n"}, {"tags": ["android", "kotlin", "android-glide"], "comments": [{"owner": {"reputation": 380, "user_id": 11319773, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-bZ4_ENIpF3Y/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd0woEiR5ylqC2yg2aF6GwuiJvkKw/mo/photo.jpg?sz=128", "display_name": "Axes Grinds", "link": "https://stackoverflow.com/users/11319773/axes-grinds"}, "edited": false, "score": 0, "creation_date": 1617292639, "post_id": 47494919, "comment_id": 118269873, "body": "What was your solution for this??"}], "owner": {"reputation": 5088, "user_id": 2077479, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/0Wh1v.png?s=128&g=1", "display_name": "Jongz Puangput", "link": "https://stackoverflow.com/users/2077479/jongz-puangput"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 720, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1511690496, "creation_date": 1511690496, "question_id": 47494919, "link": "https://stackoverflow.com/questions/47494919/glide-onloadfailed-trigger-after-all-image-loaded-after-scroll-down-then-scrol", "title": "Glide onLoadFailed() trigger after all image loaded after scroll down then scroll up", "body": "<p>I have the following view to show brand item scroll horizontally...</p>\n\n<p>onLoadFail() trigger when I scroll up, but if I comment onLoadFail() every work as expect.. What happen here !?</p>\n\n<p><strong>With onLoadFail()</strong></p>\n\n<pre><code>            // Setup product image\n            Glide.with(context)\n                    .load(item.shopImageURL)\n                    .into(holder.imgBrand)\n                    .onLoadFailed(ContextCompat.getDrawable(context, android.R.drawable.ic_dialog_alert))\n</code></pre>\n\n<p>GIF Link: <a href=\"https://drive.google.com/file/d/1h8FAV-QjtqpZl9ELm1Bc7g7OdVDfZPro/view?usp=sharing\" rel=\"nofollow noreferrer\">google drive</a></p>\n\n<p><strong>Without onLoadFail()</strong></p>\n\n<pre><code>            // Setup product image\n            Glide.with(context)\n                    .load(item.shopImageURL)\n                    .into(holder.imgBrand)\n</code></pre>\n\n<p>GIF Link: <a href=\"https://drive.google.com/file/d/1ZRSx41PdAGIkNhk5upxjmmFQlLGd1FeN/view?usp=sharing\" rel=\"nofollow noreferrer\">google drive</a></p>\n\n<p><strong>LoveBrandView.kt</strong></p>\n\n<pre><code>class LoveBrandView : LinearLayout {\n\n    constructor(context: Context?) : super(context)\n    constructor(context: Context?, attrs: AttributeSet?) : super(context, attrs)\n    constructor(context: Context?, attrs: AttributeSet?, defStyleAttr: Int) : super(context, attrs, defStyleAttr)\n\n    private val adapter = LoveBrandAdapter()\n\n    init {\n        // Set layout orientation to vertical\n        orientation = VERTICAL\n        setBackgroundColor(Color.parseColor(\"#262626\"))\n        val inflater = LayoutInflater.from(context)\n        inflater.inflate(R.layout.view_home_highlight_brand, this, true)\n\n        // Attach the adapter to the recyclerview to populate items\n        rcvLoveBrand.adapter = adapter\n        // Set layout manager to position the items\n        rcvLoveBrand.layoutManager = LinearLayoutManager(context, LinearLayoutManager.HORIZONTAL, false)\n        // Snap list item after scroll on the gravity start of screen\n        val snapHelperTop = GravitySnapHelper(Gravity.START)\n        snapHelperTop.attachToRecyclerView(rcvLoveBrand)\n\n        adapter.setListItem(mock())\n        adapter.notifyDataSetChanged()\n    }\n\n    fun mock(): MutableList&lt;ShopItem&gt; {\n        val items = mutableListOf&lt;ShopItem&gt;()\n        items.add(ShopItem(shopImageURL = \"https://static.webshopapp.com/shops/208373/files/133254608/500x300x2/calvin-klein.jpg\"))\n        items.add(ShopItem(shopImageURL = \"https://lux-store.com/image/catalog/PopularBrands/brand-logo-9.jpg\"))\n        items.add(ShopItem(shopImageURL = \"https://logoeps.com/wp-content/uploads/2011/08/uniqlo-logo-vector.jpg\"))\n        items.add(ShopItem(shopImageURL = \"https://logoeps.com/wp-content/uploads/2011/08/esprit-logo.jpg\"))\n        items.add(ShopItem(shopImageURL = \"https://i.pinimg.com/736x/b5/2c/51/b52c51f556c88216c1795f4ca433fd01--product-logo-fashion-logos.jpg\"))\n        items.add(ShopItem(shopImageURL = \"https://www.logodesignteam.com/blog/wp-content/uploads/2017/06/Ralph-Lauren-Logo.png\"))\n        items.add(ShopItem(shopImageURL = \"https://i.pinimg.com/736x/95/6f/1e/956f1edc1ec624cc97301e72c6d5b90e--fashion-logos-fashion-typography.jpg\"))\n        items.add(ShopItem(shopImageURL = \"https://www.logodesignteam.com/blog/wp-content/uploads/2017/06/Chanel_Logo.png\"))\n        items.add(ShopItem(shopImageURL = \"https://www.logodesignteam.com/blog/wp-content/uploads/2017/06/Paul-Smith-Logo.png\"))\n        items.add(ShopItem(shopImageURL = \"https://www.logodesignteam.com/blog/wp-content/uploads/2017/06/Louis-Vuitton-Logo.png\"))\n        items.add(ShopItem(shopImageURL = \"https://i.pinimg.com/originals/53/29/06/53290622f51318026dd537a2a9e7da94.jpg\"))\n        items.add(ShopItem(shopImageURL = \"https://prowly-uploads.s3.amazonaws.com/uploads/PressRoom/563/cover_photo/large_slack-imgs.com.png\"))\n        items.add(ShopItem(shopImageURL = \"https://www.logodesignteam.com/blog/wp-content/uploads/2017/07/Intel-Logo.png\"))\n        return items\n    }\n\n    inner class LoveBrandAdapter : RecyclerView.Adapter&lt;LoveBrandAdapter.ViewHolder&gt;() {\n\n        private var items = mutableListOf&lt;ShopItem&gt;()\n\n        fun setListItem(newItem: MutableList&lt;ShopItem&gt;) {\n            items = newItem\n        }\n\n        override fun onBindViewHolder(holder: ViewHolder?, position: Int) {\n\n            val item = items[position]\n\n            if (holder != null) {\n                // Setup product image\n                Glide.with(context)\n                        .load(item.shopImageURL)\n                        .into(holder.imgBrand)\n                        .onLoadFailed(ContextCompat.getDrawable(context, android.R.drawable.ic_dialog_alert))\n            }\n        }\n\n        override fun getItemCount() = items.size\n\n        override fun onCreateViewHolder(parent: ViewGroup?, viewType: Int): ViewHolder {\n            val inflater = LayoutInflater.from(parent?.context)\n            val view = inflater.inflate(R.layout.listitem_home_highlight_brand, parent, false)\n            return ViewHolder(view)\n        }\n\n        inner class ViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView) {\n            val imgBrand: ImageView = itemView.findViewById(R.id.imgBrand)\n        }\n\n    }\n\n}\n</code></pre>\n\n<p><strong>XML</strong></p>\n\n<pre><code>&lt;merge xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    tools:background=\"#262626\"\n    tools:parentTag=\"android.widget.LinearLayout\"\n    tools:orientation=\"vertical\"\n    tools:context=\".ui.home.HomeActivity\"&gt;\n\n    &lt;RelativeLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginTop=\"32dp\"\n        android:layout_marginBottom=\"32dp\"\n        android:layout_marginLeft=\"16dp\"\n        android:layout_marginRight=\"16dp\"\n        android:orientation=\"horizontal\"&gt;\n\n        &lt;TextView\n            android:id=\"@+id/tvTitle\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:text=\"Brand We Love\"\n            android:textAllCaps=\"true\"\n            android:textColor=\"@color/colorAccent\"\n            android:textSize=\"18sp\"\n            android:textStyle=\"bold\" /&gt;\n\n        &lt;View\n            android:id=\"@+id/guideline\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"0dp\"\n            android:layout_alignBaseline=\"@id/tvTitle\"\n            android:layout_gravity=\"bottom\"\n            android:layout_marginLeft=\"8dp\"\n            android:layout_marginStart=\"8dp\"\n            android:layout_toEndOf=\"@+id/tvTitle\"\n            android:layout_toRightOf=\"@+id/tvTitle\" /&gt;\n\n        &lt;View\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"1dp\"\n            android:layout_above=\"@+id/guideline\"\n            android:layout_gravity=\"bottom\"\n            android:layout_marginLeft=\"8dp\"\n            android:layout_marginStart=\"8dp\"\n            android:layout_toEndOf=\"@+id/tvTitle\"\n            android:layout_toRightOf=\"@+id/tvTitle\"\n            android:background=\"@color/colorAccent\" /&gt;\n\n    &lt;/RelativeLayout&gt;\n\n    &lt;com.abfabmarket.mobile.abfab.ui.view.CustomRecycleView\n        android:id=\"@+id/rcvLoveBrand\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"150dp\"\n        android:layout_marginBottom=\"32dp\"\n        android:orientation=\"horizontal\"\n        app:layoutManager=\"android.support.v7.widget.LinearLayoutManager\"\n        tools:listitem=\"@layout/listitem_home_highlight_brand\" /&gt;\n\n&lt;/merge&gt;\n</code></pre>\n"}, {"tags": ["android", "android-asynctask", "kotlin"], "comments": [{"owner": {"reputation": 2767, "user_id": 2290950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8iIm5.png?s=128&g=1", "display_name": "Viktor Yakunin", "link": "https://stackoverflow.com/users/2290950/viktor-yakunin"}, "edited": false, "score": 0, "creation_date": 1511688578, "post_id": 47494668, "comment_id": 81944345, "body": "AsyncTask holds the reference of your activity and whenever you recreate your activity your old one still there because of AsyncTask and old AsynctTask still running, that is why you can see log. All this code is example of how you should&#39;nt code."}, {"owner": {"reputation": 10749, "user_id": 2108972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38a04d0ccf9b761c9373ec9905ca7e92?s=128&d=identicon&r=PG", "display_name": "greenapps", "link": "https://stackoverflow.com/users/2108972/greenapps"}, "edited": false, "score": 0, "creation_date": 1511688907, "post_id": 47494668, "comment_id": 81944416, "body": "<code>When i finish the activity(flipping the phone),and try to start again</code>. It is unclear what you try to start again.  Moreover asynctasks cannot be restarted. You should create a new asynctask."}, {"owner": {"reputation": 10749, "user_id": 2108972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38a04d0ccf9b761c9373ec9905ca7e92?s=128&d=identicon&r=PG", "display_name": "greenapps", "link": "https://stackoverflow.com/users/2108972/greenapps"}, "edited": false, "score": 0, "creation_date": 1511689278, "post_id": 47494668, "comment_id": 81944491, "body": "My god ... @Bernouilli Gate can you stop editing every post? Pretty annoing. I was checking what OP had edited to only discover that it was you again."}, {"owner": {"reputation": 45, "user_id": 4072236, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/1383374292/picture?type=large", "display_name": "Amit Laloush", "link": "https://stackoverflow.com/users/4072236/amit-laloush"}, "reply_to_user": {"reputation": 2767, "user_id": 2290950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8iIm5.png?s=128&g=1", "display_name": "Viktor Yakunin", "link": "https://stackoverflow.com/users/2290950/viktor-yakunin"}, "edited": false, "score": 0, "creation_date": 1511701294, "post_id": 47494668, "comment_id": 81947979, "body": "so what i should do instead @Viktor Yakunin ?"}, {"owner": {"reputation": 45, "user_id": 4072236, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/1383374292/picture?type=large", "display_name": "Amit Laloush", "link": "https://stackoverflow.com/users/4072236/amit-laloush"}, "reply_to_user": {"reputation": 10749, "user_id": 2108972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38a04d0ccf9b761c9373ec9905ca7e92?s=128&d=identicon&r=PG", "display_name": "greenapps", "link": "https://stackoverflow.com/users/2108972/greenapps"}, "edited": false, "score": 0, "creation_date": 1511702391, "post_id": 47494668, "comment_id": 81948297, "body": "@greenapps  for Simplification i have two activity, one, have a button to go to the other activity and the second activity start the AsyncTask and count the time, when i flip the phone the second activity finish(cancel the AsyncTask) and i&#39;m returning to the first activity,but when i try to start the second activity again it doesn&#39;t work"}, {"owner": {"reputation": 10749, "user_id": 2108972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38a04d0ccf9b761c9373ec9905ca7e92?s=128&d=identicon&r=PG", "display_name": "greenapps", "link": "https://stackoverflow.com/users/2108972/greenapps"}, "edited": false, "score": 0, "creation_date": 1511733596, "post_id": 47494668, "comment_id": 81958601, "body": "That makes no sense. If you flip the phone during second activity the second activity restarts. You do not have to do anything for that. And it will not go back to first activity first."}], "answers": [{"tags": [], "owner": {"reputation": 2767, "user_id": 2290950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8iIm5.png?s=128&g=1", "display_name": "Viktor Yakunin", "link": "https://stackoverflow.com/users/2290950/viktor-yakunin"}, "is_accepted": false, "score": 0, "last_activity_date": 1511703302, "creation_date": 1511703302, "answer_id": 47496721, "question_id": 47494668, "link": "https://stackoverflow.com/questions/47494668/start-asynctask-the-second-time/47496721#47496721", "title": "start AsyncTask the second time", "body": "<p>Simple timer application to solve your problem could be implemented this way:</p>\n\n<pre><code>class TimerApp : Application() {//TODO add TimerApp to manifest\n    val startTime: Long by lazy { System.currentTimeMillis() }\n\n    companion object {\n        lateinit var instance: TimerApp\n            private set\n    }\n\n    override fun onCreate() {\n        super.onCreate()\n        instance = this\n    }\n\n}\n\nclass FirstActivity : AppCompatActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        //init your views\n        val timerTV = TextView(this)\n        timerTV.postDelayed({ timerTV.text = TimerApp.instance.startTime.getElapsed() }, 1000)\n    }\n}\n\nfun Long.getElapsed(): String {\n    val delta = System.currentTimeMillis() - this //elapsed time in ms\n    TODO(\"return formatted string\")\n}\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 4072236, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/1383374292/picture?type=large", "display_name": "Amit Laloush", "link": "https://stackoverflow.com/users/4072236/amit-laloush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511703302, "creation_date": 1511688131, "last_edit_date": 1511688918, "question_id": 47494668, "link": "https://stackoverflow.com/questions/47494668/start-asynctask-the-second-time", "title": "start AsyncTask the second time", "body": "<p>i'm building an android app that counts the time since one of the activity started, the first time i started the activity everything works fine the timer works fine and it display the time on the TextView.\nWhen i finish the activity(flipping the phone),and try to start again the timer works fine(i display it as a Log) but the textview doesn't change </p>\n\n<pre><code>override fun doInBackground(vararg params: Activity): String? {\n    val acc = Accelerometer(params[0])\n    dealsList.forEach {Log.d(\"fallDeals\", it) }\n    while (true) {\n        sleep(100)\n        publishProgress()\n\n\n\n\n        Log.i(\"TAG\", \"${tiltSensorsValues[0] - acc.xPos!!} ${tiltSensorsValues[1] - acc.yPos!!} ${acc.zPos!!}\")\n        if (flippedPhone(acc)) {\n            Log.i(\"REFRENCES\", \"${dbRefrences.stateRef}\")\n            dbRefrences.stateRef.setValue(\"empty\")\n            addToOldDataTableDatabase()\n            return \"Triggered\"\n            break\n\n        }\n    }\n}\n\nprivate fun flippedPhone(acc: Accelerometer) =\n        (tiltSensorsValues[0] - acc.xPos!! &lt; -4 || tiltSensorsValues[0] - acc.xPos!! &gt; 4 ||\n                tiltSensorsValues[1] - acc.yPos!! &lt; -4 || tiltSensorsValues[1] - acc.yPos!! &gt; 4)\n\n\noverride fun onPostExecute(result: String?) {\n    super.onPostExecute(result)\n    dbRefrences.currentRef.child(USERS).removeValue()\n    dbRefrences.stateRef.setValue(\"empty\")\n    Toast.makeText(context,setTimer(),Toast.LENGTH_SHORT).show()\n\n}\n\n\n//*********************************************\n//Functions\n//*********************************************\n\n/**\n *  adding the data to the old data table\n */\nprivate fun addToOldDataTableDatabase() {\n    val oldDataTableRef = dbRefrences.tableRef.child(OLD_DATA)\n    oldDataTableRef.child(gDate()).child(getCurrentTime())?.child(TIME)?.setValue(timer.text)\n    Log.i(\"My Service\", userList.size.toString())\n    userList.forEach {\n        oldDataTableRef.child(gDate()).child(getCurrentTime())?.child(PARTICIPANTS)?.\n                child(it.userId)?.setValue(it.name)\n    }\n\n}\n\nprivate fun gDate(): String {\n    val c = Calendar.getInstance()\n    val df = SimpleDateFormat(\"dd-MM-yyyy\")\n    return df.format(c.time)\n}\n\n\n/**\n * return the time that has passed since the group started\n */\nprivate fun setTimer(): String {\n    val difference = Calendar.getInstance().timeInMillis - startTime\n    val minutes = TimeUnit.MILLISECONDS.toMinutes(difference).rem(60)\n    val seconds = TimeUnit.MILLISECONDS.toSeconds(difference).rem(60)\n    val hours = TimeUnit.MILLISECONDS.toHours(difference).rem(24)\n\n    Log.i(\"TAG\", \"${String.format(\"%02d\", hours)}:${String.format(\"%02d\", minutes)}:${String.format(\"%02d\", seconds)}\")\n    return \"${String.format(\"%02d\", hours)}:${String.format(\"%02d\", minutes)}:${String.format(\"%02d\", seconds)}\"\n}\n\n/**\n * changing the textView text to the time that has passed since they started\n */\noverride fun onProgressUpdate(vararg values: Void?) {\n    super.onProgressUpdate(*values)\n    timer.text = setTimer()\n\n\n}\n</code></pre>\n\n<p>by the way i'm using kotlin</p>\n"}, {"tags": ["generics", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "is_accepted": true, "score": 3, "last_activity_date": 1511701208, "last_edit_date": 1511701208, "creation_date": 1511689170, "answer_id": 47494779, "question_id": 47493467, "link": "https://stackoverflow.com/questions/47493467/how-to-deal-with-generic-bounds-migrating-from-java-to-kotlin/47494779#47494779", "title": "How to deal with generic bounds migrating from Java to Kotlin?", "body": "<p>The reason why this \"worked\" in Java was because <code>&lt;T extends Diff&gt;</code> uses the <a href=\"https://docs.oracle.com/javase/tutorial/java/generics/rawTypes.html\" rel=\"nofollow noreferrer\">raw type</a> <code>Diff</code>. Don't do this!</p>\n\n<hr>\n\n<p>The closest you can get is to use a recursive type bound:</p>\n\n<pre><code>interface Diff&lt;T : Diff&lt;T&gt;&gt; {\n    fun lessThan(other: T): Boolean\n}\n</code></pre>\n\n<p>The problem is, you can substitute any other subtype of <code>Diff</code>.</p>\n\n<p>However, when <em>using</em> the <code>Diff</code>, use the generic type constraint <code>T : Diff&lt;T&gt;</code>:</p>\n\n<pre><code>fun &lt;T : Diff&lt;T&gt;&gt; diffUser(diff1: T, diff2: T) {\n    println(diff1.lessThan(diff2))\n}\n</code></pre>\n\n<p>and any <code>Diff</code> that doesn't implement <code>Diff&lt;SameType&gt;</code> will not be accepted.</p>\n\n<p>Example:</p>\n\n<pre><code>class CDiff(private val value: Int) : Diff&lt;DDiff&gt; { // &lt;-- Wrong type!\n    override fun lessThan(other: DDiff) = value &lt; other.value\n}\n\nclass DDiff(val value: Int) : Diff&lt;DDiff&gt; {\n    override fun lessThan(other: DDiff) = value &lt; other.value\n}\n\nfun test() {\n    diffUser(CDiff(3), CDiff(4)) // &lt;-- Doesn't compile due to the generic constraint\n    diffUser(DDiff(3), DDiff(4))\n}\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/8537500/java-the-meaning-of-t-extends-comparablet\">This same approach</a> is used by the <code>Comparable</code> class.</p>\n\n<hr>\n\n<p>Although this works, what you <em>really</em> want is a \"self type\" <a href=\"https://discuss.kotlinlang.org/t/self-types/371\" rel=\"nofollow noreferrer\">and this is not supported, although it was on the roadmap at some point</a>. I believe JetBrains denied the request for this, though I cannot find the bug report.</p>\n\n<p><a href=\"https://stackoverflow.com/a/7355094/7366707\">This answer</a> details a workaround in Java using <a href=\"https://en.wikipedia.org/wiki/Curiously_recurring_template_pattern\" rel=\"nofollow noreferrer\">the CRT pattern</a>, though it is not necessarily type safe.</p>\n"}], "owner": {"reputation": 10162, "user_id": 430720, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/028694798d002eba1e272107640656ee?s=128&d=identicon&r=PG", "display_name": "Jaguar", "link": "https://stackoverflow.com/users/430720/jaguar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 47494779, "answer_count": 1, "score": 2, "last_activity_date": 1511701208, "creation_date": 1511675535, "question_id": 47493467, "link": "https://stackoverflow.com/questions/47493467/how-to-deal-with-generic-bounds-migrating-from-java-to-kotlin", "title": "How to deal with generic bounds migrating from Java to Kotlin?", "body": "<p>My goal is to have the interface methods accept the class type of the implementation. Here's the code I have written so far:</p>\n\n<pre><code>internal interface Diff&lt;Diff&gt; {   //in Java I was using &lt;? extends Diff&gt;\n    fun lessThan(other: Diff): Boolean\n}\n\nprivate class ADiff(private val value: Int) : Diff&lt;ADiff&gt; {\n\n    override fun lessThan(other: ADiff): Boolean {\n        return value &lt; other.value\n    }\n\n}\n\n//B can now accept even int types which is not desired\nprivate class BDiff(private val value: Int) : Diff&lt;Int&gt; {\n\n    override fun lessThan(other: Int): Boolean {\n        return value &lt; other\n    }\n\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "dagger-2"], "comments": [{"owner": {"reputation": 13924, "user_id": 344487, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/121250664bfcadc67069fda58195234b?s=128&d=identicon&r=PG", "display_name": "Fred", "link": "https://stackoverflow.com/users/344487/fred"}, "edited": false, "score": 1, "creation_date": 1511694378, "post_id": 47491639, "comment_id": 81945858, "body": "try replacing <code>@Inject</code> with <code>@field:Inject</code> or <code>@set:Inject</code>. Not sure if it helps."}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1511708066, "post_id": 47491639, "comment_id": 81950075, "body": "Yeah <code>@field:Inject</code>"}, {"owner": {"reputation": 17436, "user_id": 5241933, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/n9pSx.jpg?s=128&g=1", "display_name": "David Rawson", "link": "https://stackoverflow.com/users/5241933/david-rawson"}, "edited": false, "score": 0, "creation_date": 1511722573, "post_id": 47491639, "comment_id": 81955042, "body": "Why are you using <code>dagger:2.5</code> and not the latest version which is <code>dagger 2.13</code>?"}, {"owner": {"reputation": 61, "user_id": 6628505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b422bbf76bbeb5576404402eb42c9aa9?s=128&d=identicon&r=PG&f=1", "display_name": "Maciek", "link": "https://stackoverflow.com/users/6628505/maciek"}, "reply_to_user": {"reputation": 17436, "user_id": 5241933, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/n9pSx.jpg?s=128&g=1", "display_name": "David Rawson", "link": "https://stackoverflow.com/users/5241933/david-rawson"}, "edited": false, "score": 0, "creation_date": 1511727786, "post_id": 47491639, "comment_id": 81956787, "body": "@DavidRawson I used 2.5 because that was the version used in tutorial which I followed and I just wanted to be sure that gradle configuration is right. I have changed it to 2.13 as you said."}, {"owner": {"reputation": 61, "user_id": 6628505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b422bbf76bbeb5576404402eb42c9aa9?s=128&d=identicon&r=PG&f=1", "display_name": "Maciek", "link": "https://stackoverflow.com/users/6628505/maciek"}, "reply_to_user": {"reputation": 13924, "user_id": 344487, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/121250664bfcadc67069fda58195234b?s=128&d=identicon&r=PG", "display_name": "Fred", "link": "https://stackoverflow.com/users/344487/fred"}, "edited": false, "score": 0, "creation_date": 1511728038, "post_id": 47491639, "comment_id": 81956877, "body": "@Fred, I tried \\@field:Inject without any success :("}, {"owner": {"reputation": 17436, "user_id": 5241933, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/n9pSx.jpg?s=128&g=1", "display_name": "David Rawson", "link": "https://stackoverflow.com/users/5241933/david-rawson"}, "edited": false, "score": 0, "creation_date": 1511728735, "post_id": 47491639, "comment_id": 81957113, "body": "Can you try a clean and rebuild now?"}, {"owner": {"reputation": 61, "user_id": 6628505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b422bbf76bbeb5576404402eb42c9aa9?s=128&d=identicon&r=PG&f=1", "display_name": "Maciek", "link": "https://stackoverflow.com/users/6628505/maciek"}, "edited": false, "score": 0, "creation_date": 1511731481, "post_id": 47491639, "comment_id": 81958047, "body": "Yeah, I did it, and still the same :("}, {"owner": {"reputation": 31520, "user_id": 1837367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v8XDk.jpg?s=128&g=1", "display_name": "David Medenjak", "link": "https://stackoverflow.com/users/1837367/david-medenjak"}, "edited": false, "score": 0, "creation_date": 1511974949, "post_id": 47491639, "comment_id": 82073590, "body": "Please include your IMainComponent. Does it contain an inject method for MainActivity? Or did you use a Supertype?"}, {"owner": {"reputation": 61, "user_id": 6628505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b422bbf76bbeb5576404402eb42c9aa9?s=128&d=identicon&r=PG&f=1", "display_name": "Maciek", "link": "https://stackoverflow.com/users/6628505/maciek"}, "reply_to_user": {"reputation": 31520, "user_id": 1837367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v8XDk.jpg?s=128&g=1", "display_name": "David Medenjak", "link": "https://stackoverflow.com/users/1837367/david-medenjak"}, "edited": false, "score": 0, "creation_date": 1511982327, "post_id": 47491639, "comment_id": 82077614, "body": "@DavidMedenjak Firstly I tried using supertype without any success so now it looks as I pasted."}, {"owner": {"reputation": 1323, "user_id": 5264543, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/bPZFX.png?s=128&g=1", "display_name": "Mahdi Nouri", "link": "https://stackoverflow.com/users/5264543/mahdi-nouri"}, "edited": false, "score": 0, "creation_date": 1511984274, "post_id": 47491639, "comment_id": 82078684, "body": "show us your MainPresenterModule"}, {"owner": {"reputation": 61, "user_id": 6628505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b422bbf76bbeb5576404402eb42c9aa9?s=128&d=identicon&r=PG&f=1", "display_name": "Maciek", "link": "https://stackoverflow.com/users/6628505/maciek"}, "edited": false, "score": 0, "creation_date": 1511986532, "post_id": 47491639, "comment_id": 82079828, "body": "Ok I&#39;ve done that"}, {"owner": {"reputation": 31520, "user_id": 1837367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v8XDk.jpg?s=128&g=1", "display_name": "David Medenjak", "link": "https://stackoverflow.com/users/1837367/david-medenjak"}, "edited": false, "score": 0, "creation_date": 1512492579, "post_id": 47491639, "comment_id": 82275899, "body": "Please update your question with the code you actually use and the error you face. I don&#39;t think that the code as you include it in your question would compile, since I can see no subcomponent or component dependency, and the <code>App</code> dependency can&#39;t be satisfied. This will not compile, so the runtime error seems weird to me."}, {"owner": {"reputation": 568, "user_id": 3178374, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000703175713/picture?type=large", "display_name": "Paulina", "link": "https://stackoverflow.com/users/3178374/paulina"}, "edited": false, "score": 0, "creation_date": 1533831995, "post_id": 47491639, "comment_id": 90502519, "body": "I got the simillar problem and the reason was, that I didn&#39;t change the Application name in manifest (in your case it will be App)"}], "owner": {"reputation": 61, "user_id": 6628505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b422bbf76bbeb5576404402eb42c9aa9?s=128&d=identicon&r=PG&f=1", "display_name": "Maciek", "link": "https://stackoverflow.com/users/6628505/maciek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1133, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1511986456, "creation_date": 1511653690, "last_edit_date": 1511986456, "question_id": 47491639, "link": "https://stackoverflow.com/questions/47491639/kotlin-dagger-2-is-is-not-injecting-objects", "title": "Kotlin - Dagger 2 is is not injecting objects", "body": "<p>I have created simple application to test Dagger 2 injection. I think I have written everything propertly but in runtime I get this error. </p>\n\n<pre><code>kotlin.UninitializedPropertyAccessException: lateinit property app has not been initialized\n</code></pre>\n\n<p>It turns out that none of my dependencies are injected.</p>\n\n<p>Here is my example:</p>\n\n<p>Component:</p>\n\n<pre><code>@Component(modules = arrayOf(AppModule::class))\ninterface AppComponent {\n    fun inject(app : App)\n}\n</code></pre>\n\n<p>IMainomponent:</p>\n\n<pre><code>@Component(modules = arrayOf(MainPresenterModule::class))\ninterface IMainComponent {\n    fun inject(mainView : MainActivity)\n}\n</code></pre>\n\n<p>AppModule:</p>\n\n<pre><code>@Module\nclass AppModule(val app: App) {\n    @Provides @Singleton fun provideApp() : App = app\n}\n</code></pre>\n\n<p>Main presenter module:</p>\n\n<pre><code>@Module\nclass MainPresenterModule(private val view: MainActivity) {\n    @Provides\n    fun provideView() : MainActivity = view\n}\n</code></pre>\n\n<p>Use in activity:</p>\n\n<pre><code>class MainActivity : AppCompatActivity(), IMainView {\n\n    @Inject lateinit var presenter : MainPresenter\n    @Inject lateinit var app : App\n\n    val component: IMainComponent by lazy {\n        DaggerIMainComponent\n                .builder()\n                .mainPresenterModule(MainPresenterModule(this))\n                .build()\n    }\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        component.inject(this)\n    //        presenter.beginMessuring()\n\n        if(app != null) // fails here because all lateinits are null\n        {\n\n        }\n    }\n\n    override fun toastMessage(message: String) {\n        Toast.makeText(this, message, Toast.LENGTH_LONG).show()\n    }\n}\n</code></pre>\n\n<p>Could you tell me if I am doing something wrong.</p>\n\n<p>Gradle dagger settigns:</p>\n\n<pre><code>kapt 'com.google.dagger:dagger-compiler:2.13'\nimplementation 'com.google.dagger:dagger:2.13'\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>I have notieced that when I configure Dagger graph using for example this, </p>\n\n<pre><code>DaggerIMainComponent.builder().mainPresenterModule(MainPresenterModule(this)).build()\n</code></pre>\n\n<p>I get info that mainPresenterModule method is deprecated. I found info that android studio usually shows that info when it cant find any @Inject of components provided by builded module.</p>\n"}, {"tags": ["java", "android", "kotlin", "jsoup", "screen-scraping"], "comments": [{"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 0, "creation_date": 1511650440, "post_id": 47491103, "comment_id": 81937850, "body": "If there is an RSS feed that&#39;s better to use"}, {"owner": {"reputation": 1, "user_id": 9008737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/841263519f1dadbbe9b98fb0c025046a?s=128&d=identicon&r=PG&f=1", "display_name": "Tahaga", "link": "https://stackoverflow.com/users/9008737/tahaga"}, "reply_to_user": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 0, "creation_date": 1511654011, "post_id": 47491103, "comment_id": 81938568, "body": "I wanted to, but there is no RSS feed..."}, {"owner": {"reputation": 932, "user_id": 5313817, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UJFqZYuTpRY/AAAAAAAAAAI/AAAAAAAABt8/h_nND2qPEEw/photo.jpg?sz=128", "display_name": "Rishal dev singh", "link": "https://stackoverflow.com/users/5313817/rishal-dev-singh"}, "edited": false, "score": 0, "creation_date": 1511691250, "post_id": 47491103, "comment_id": 81945009, "body": "paste your html content instead of putting screenshots, it will be easier for us to help you"}, {"owner": {"reputation": 1, "user_id": 9008737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/841263519f1dadbbe9b98fb0c025046a?s=128&d=identicon&r=PG&f=1", "display_name": "Tahaga", "link": "https://stackoverflow.com/users/9008737/tahaga"}, "edited": false, "score": 0, "creation_date": 1511694905, "post_id": 47491103, "comment_id": 81945995, "body": "Just edited, I added the code!"}], "owner": {"reputation": 1, "user_id": 9008737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/841263519f1dadbbe9b98fb0c025046a?s=128&d=identicon&r=PG&f=1", "display_name": "Tahaga", "link": "https://stackoverflow.com/users/9008737/tahaga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 271, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1511694886, "creation_date": 1511648754, "last_edit_date": 1511694886, "question_id": 47491103, "link": "https://stackoverflow.com/questions/47491103/android-scraping-articles-with-jsoup", "title": "Android : Scraping articles with jsoup", "body": "<p>First, let's sum up what I'm trying to do. I'm building an android app for my school which basically scrapes articles my school posts on its website and first lists them in a recyclerview and then you can read them in a detailed view.</p>\n\n<p>For the scraping part, I use Jsoup. I got the detailed view done, and the recycleview too. Everything works fine without the scraping part. </p>\n\n<p>When I scrape a single article to the detailed view, it works without problems. The problem is when I'm trying to scrape all titles of the webpage and displaying them into my recyclerview. </p>\n\n<p>Here's a screenshot of what I'm trying to scrape and my code : </p>\n\n<p><a href=\"https://i.stack.imgur.com/YwGcp.png\" rel=\"nofollow noreferrer\">Webpage source annotated screenshot</a></p>\n\n<p>I'm trying to get all the titles and urls.\nHere's a part of the website's code, I need what's in the spans with \"font-size:1em;\" and the href link. </p>\n\n<pre><code>  &lt;div class=\"col-xs-6 col-sm-4 col-md-3\" class=\"derniers3articles\" style=\"height:250px;\"&gt;\n  &lt;a href=\"https://legymnase.eu/2017/11/frum-franco-allemand/\" style=\"text-decoration:none;\"&gt;\n    &lt;figure class=\"mini_img\"&gt;&lt;img src=\"https://legymnase.eu/cms/wp-content/uploads/2017/11/forumff-250x150.jpg\" width=\"250\" height=\"150\" alt=\"\" class=\"image3derniers arrondie\"&gt;&lt;/figure&gt;\n    &lt;span style=\"color:grey;\"&gt;20-Nov-2017&lt;/span&gt;&lt;br&gt;\n    &lt;span style=\"font-size:1em;\"&gt;Forum franco-allemand&lt;/span&gt;\n  &lt;/a&gt;\n</code></pre>\n\n<p>\n  \n      \n        \n        18-Nov-2017<br>\n        Les \u00e9l\u00e8ves de 1ES, de futurs citoyens ...\n      \n  \n  \n      \n        \n        14-Nov-2017<br>\n        Ventes de g\u00e2teaux afin de financer le ...\n      \n  </p>\n\n<p>Here's my code : </p>\n\n<pre><code>class LyceeList : AppCompatActivity() {\n\nvar titles = ArrayList&lt;String&gt;()\nvar urls = ArrayList&lt;String&gt;()\nvar articles = ArrayList&lt;Article&gt;()\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_lycee)\n\n    val recyclerView = findViewById&lt;RecyclerView&gt;(R.id.lyceeRecycler) as RecyclerView\n\n    recyclerView.layoutManager = LinearLayoutManager(this, LinearLayout.VERTICAL, false)\n\n    val recupArticles: AsyncTask&lt;Void, Void, Void&gt;? = RecupArticles().execute()\n\n\n    for (i in 0 until urls.size) {\n        articles.add(Article(urls[i], titles[i]))\n    }\n\n    val adapter = LyceeAdapter(articles)\n\n    recyclerView.adapter = adapter\n\n}\n\ninner class RecupArticles : AsyncTask&lt;Void, Void, Void&gt;() {\n\n\n\n    override fun doInBackground(vararg p0: Void?): Void? {\n        try {\n            var doc: Document = Jsoup.connect(\"https://legymnase.eu/lycee/\").get()\n            val titlesElement : Elements = doc.select(\"div.derniers3articles &gt; span\")\n            val urlsProvisory : Elements = doc.select(\"div.derniers3articles &gt; a\")\n            val urlsElement : Elements = doc.select(\"a[href]\")\n\n\n            for (i in 0 until titlesElement.size) {\n                titles[i] = titlesElement.get(i).text()\n            }\n\n            for (i in 0 until urlsElement.size) {\n                urls[i] = urlsElement.get(i).text()\n            }\n\n\n        } catch (e: Exception) {\n            e.printStackTrace()\n        }\n        return null\n    }\n\n    override fun onPostExecute(result: Void?) {\n        super.onPostExecute(result)\n\n    }\n\n}\n</code></pre>\n\n<p>}</p>\n\n<p>If I manually add an Article like .add(Article(\"Testurl\", \"TestTitle\") it does show up in the recyclerview. But these don't. After several tests, I feel like in my loop in onCreate, the arrays are empty... Have you got any ideas please?</p>\n\n<p>Also, another secondary problem : How can I implement the onclicklistener on the single cardviews to send the URL to the \"articleDetail\" activity and open it up? Should I put the url as extra to the intent? (this question is secundary, the first one is the one to solve.)</p>\n\n<p>Thanks very much in advance !</p>\n"}, {"tags": ["android", "kotlin", "dagger-2"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 6628505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b422bbf76bbeb5576404402eb42c9aa9?s=128&d=identicon&r=PG&f=1", "display_name": "Maciek", "link": "https://stackoverflow.com/users/6628505/maciek"}, "edited": false, "score": 0, "creation_date": 1511649286, "post_id": 47491131, "comment_id": 81937615, "body": "I did how you mentioned. In View I replaced changed field type to MainPresenter  but I still get kotlin.UninitailizedPropertyException."}], "tags": [], "owner": {"reputation": 19872, "user_id": 804967, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/JVZu9.jpg?s=128&g=1", "display_name": "fweigl", "link": "https://stackoverflow.com/users/804967/fweigl"}, "is_accepted": false, "score": 1, "last_activity_date": 1511648955, "creation_date": 1511648955, "answer_id": 47491131, "question_id": 47491009, "link": "https://stackoverflow.com/questions/47491009/dagger-2-kotlin-cant-inject-presenter-into-view/47491131#47491131", "title": "Dagger 2 + Kotlin can&#39;t inject Presenter into View", "body": "<p>Whenever trying to inject any interface, like in your case <code>IMainPresenter</code>, you need to tell dagger which concrete implementation to use. Dagger has no means of knowing which implementation of that interface you want to 'have' (you might have numerous implementations of that interface). </p>\n\n<p>You did the right thing for the <code>IMainView</code> by adding a <code>@Provides</code>-annotated method to your module. You can do the same for your presenter, but that imho would render the whole point of dagger useless, because you'd have to create the presenter yourself when creating the module. </p>\n\n<p>So I would, instead of injecting the <code>IMainPresenter</code> interface into your activity, inject the concrete implementation <code>MainPresenter</code>. Then you also shouldn't need a <code>@Provides</code> method in your module (for the presenter).  </p>\n"}], "owner": {"reputation": 61, "user_id": 6628505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b422bbf76bbeb5576404402eb42c9aa9?s=128&d=identicon&r=PG&f=1", "display_name": "Maciek", "link": "https://stackoverflow.com/users/6628505/maciek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 408, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511651534, "creation_date": 1511648006, "last_edit_date": 1511651534, "question_id": 47491009, "link": "https://stackoverflow.com/questions/47491009/dagger-2-kotlin-cant-inject-presenter-into-view", "title": "Dagger 2 + Kotlin can&#39;t inject Presenter into View", "body": "<p>I am trying to create simple MVP Archtecture app using Dagger 2. I am tying to achieave same result as in this tutorial, but with Kotlin. Here is my code so far.</p>\n\n<p>Presenter:</p>\n\n<pre><code>class MainPresenter @Inject constructor(var view: IMainView): IMainPresenter{\n\noverride fun beginMessuring() {\n    view.toastMessage(\"Measuring started\")\n}\n\noverride fun stopMessuring() {\n    view.toastMessage(\"Measuring stopped\")\n}\n\n}\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>class MainActivity : AppCompatActivity(), IMainView {\n\n@Inject lateinit var presenter : MainPresenter\n\nval component: IMainComponent by lazy {\n    DaggerIMainComponent\n            .builder()\n            .mainPresenterModule(MainPresenterModule(this))\n            .build()\n}\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main)\n    component.inject(this)\n    presenter.beginMessuring()\n}\n\noverride fun toastMessage(message: String) {\n    Toast.makeText(this, message, Toast.LENGTH_LONG).show()\n}\n}\n</code></pre>\n\n<p>Dagger Module:</p>\n\n<pre><code>@Module\nclass MainPresenterModule(private val view: IMainView) {\n    @Provides\n    fun provideView() = view\n}\n</code></pre>\n\n<p>Dagger Component:</p>\n\n<pre><code>@Component(modules = arrayOf(MainPresenterModule::class))\ninterface IMainComponent {\n    fun inject(mainView : IMainActivity)\n}\n</code></pre>\n\n<p>The problem is that I am getting build error which starts with this:</p>\n\n<pre><code>java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.maciej.spiritlvl/com.example.maciej.spiritlvl.View.MainActivity}: kotlin.UninitializedPropertyAccessException: lateinit property presenter has not been initialized\n</code></pre>\n\n<p>PS, my gradle dagger config:</p>\n\n<pre><code>kapt 'com.google.dagger:dagger-compiler:2.9'\nmplementation 'com.google.dagger:dagger:2.9'\n</code></pre>\n\n<p>EDIT:\nChanged injected presenter type from IMainView to MainView. </p>\n"}, {"tags": ["java", "kotlin", "method-reference"], "comments": [{"owner": {"reputation": 42860, "user_id": 54937, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d968f2f1240bf3e2c4080e773cc95129?s=128&d=identicon&r=PG", "display_name": "Sedat Kapanoglu", "link": "https://stackoverflow.com/users/54937/sedat-kapanoglu"}, "edited": false, "score": 0, "creation_date": 1511646895, "post_id": 47490817, "comment_id": 81937048, "body": "If Kotlin doesn\u2019t support specifying an overload you can create a wrapper function that calls the correct overload and use that instead."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 1, "creation_date": 1511647771, "post_id": 47490817, "comment_id": 81937250, "body": "Docs link: <a href=\"https://kotlinlang.org/docs/reference/reflection.html#function-references\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 26542, "user_id": 3699139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pYdt3.jpg?s=128&g=1", "display_name": "Jorn Vernee", "link": "https://stackoverflow.com/users/3699139/jorn-vernee"}, "is_accepted": true, "score": 7, "last_activity_date": 1511647106, "creation_date": 1511647106, "answer_id": 47490898, "question_id": 47490817, "link": "https://stackoverflow.com/questions/47490817/is-it-possible-to-use-println-as-a-function-reference-in-kotlin/47490898#47490898", "title": "is it possible to use println as a function reference in Kotlin", "body": "<p>The problem is that you're passing a function which in turn returns the function <code>println</code>, so the compiler can't figure out which <code>println</code> to return. What you want to do is use <code>println</code> itself as an argument, for which you need to use <code>()</code>:</p>\n\n<pre><code>listOf(1, 2, 3).forEach(::println)\n</code></pre>\n"}], "owner": {"reputation": 9497, "user_id": 2735286, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/87ddd81aa1b12c27aecdab22da387f5c?s=128&d=identicon&r=PG&f=1", "display_name": "gil.fernandes", "link": "https://stackoverflow.com/users/2735286/gil-fernandes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 551, "favorite_count": 0, "accepted_answer_id": 47490898, "answer_count": 1, "score": 2, "last_activity_date": 1511647106, "creation_date": 1511646438, "last_edit_date": 1511647015, "question_id": 47490817, "link": "https://stackoverflow.com/questions/47490817/is-it-possible-to-use-println-as-a-function-reference-in-kotlin", "title": "is it possible to use println as a function reference in Kotlin", "body": "<p>In Java 8 and 9 it is possible to have method references for printing to the console, like e.g:</p>\n\n<pre><code>List.of(1, 2, 3).forEach(System.out::println);\n</code></pre>\n\n<p>In Kotlin I did not find a way to use a method reference to print to the console. I have tried to translate this to use a function reference:</p>\n\n<pre><code>listOf(1, 2, 3).forEach { println(it) }\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>listOf(1, 2, 3).forEach { ::println }\n</code></pre>\n\n<p>But I am getting this error:</p>\n\n<pre><code>Overload resolution ambiguity. All these functions match.\n@InlineOnly public inline fun println(): Unit defined in kotlin.io\n@InlineOnly public inline fun println(message: Any?): Unit defined in kotlin.io\n@InlineOnly public inline fun println(message: Boolean): Unit defined in kotlin.io\n@InlineOnly public inline fun println(message: Byte): Unit defined in kotlin.io\n@InlineOnly public inline fun println(message: Char): Unit defined in kotlin.io\n@InlineOnly public inline fun println(message: CharArray): Unit defined in kotlin.io\n@InlineOnly public inline fun println(message: Double): Unit defined in kotlin.io\n@InlineOnly public inline fun println(message: Float): Unit defined in kotlin.io\n@InlineOnly public inline fun println(message: Int): Unit defined in kotlin.io\n@InlineOnly public inline fun println(message: Long): Unit defined in kotlin.io\n@InlineOnly public inline fun println(message: Short): Unit defined in kotlin.io\n</code></pre>\n\n<p>How can I solve this resolution ambiguity? Is it possible to use a function reference in this case?</p>\n"}, {"tags": ["null", "kotlin", "do-while", "nullable"], "comments": [{"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 2, "creation_date": 1511700320, "post_id": 47490273, "comment_id": 81947692, "body": "Why don&#39;t you simplify to just <code>while (next != null) { ... }</code>?"}, {"owner": {"reputation": 862, "user_id": 1417883, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/56fe3a87ac4d39ab9b7a15f92b5fd7dc?s=128&d=identicon&r=PG", "display_name": "barsan-md", "link": "https://stackoverflow.com/users/1417883/barsan-md"}, "reply_to_user": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1511704729, "post_id": 47490273, "comment_id": 81949062, "body": "You are right! I didn&#39;t see it."}], "answers": [{"comments": [{"owner": {"reputation": 862, "user_id": 1417883, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/56fe3a87ac4d39ab9b7a15f92b5fd7dc?s=128&d=identicon&r=PG", "display_name": "barsan-md", "link": "https://stackoverflow.com/users/1417883/barsan-md"}, "edited": false, "score": 0, "creation_date": 1511643385, "post_id": 47490388, "comment_id": 81936178, "body": "Then it can change also between while condition and the assingment <code>prev = next</code>"}, {"owner": {"reputation": 160, "user_id": 7512448, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/OgLAI.png?s=128&g=1", "display_name": "Zonico", "link": "https://stackoverflow.com/users/7512448/zonico"}, "reply_to_user": {"reputation": 862, "user_id": 1417883, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/56fe3a87ac4d39ab9b7a15f92b5fd7dc?s=128&d=identicon&r=PG", "display_name": "barsan-md", "link": "https://stackoverflow.com/users/1417883/barsan-md"}, "edited": false, "score": 0, "creation_date": 1511644572, "post_id": 47490388, "comment_id": 81936502, "body": "@biowep prev = next!! should fit, shouldn&#39;t it?"}, {"owner": {"reputation": 862, "user_id": 1417883, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/56fe3a87ac4d39ab9b7a15f92b5fd7dc?s=128&d=identicon&r=PG", "display_name": "barsan-md", "link": "https://stackoverflow.com/users/1417883/barsan-md"}, "edited": false, "score": 0, "creation_date": 1511644695, "post_id": 47490388, "comment_id": 81936535, "body": "Sure, it does, but it&#39;s a work around a non coherent behaviour, also it does introduce a non necessary control."}, {"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 0, "creation_date": 1514602563, "post_id": 47490388, "comment_id": 83031193, "body": "Here <code>next</code> is a local variable which doesn&#39;t leak outside the function, so it cannot be changed in another thread."}], "tags": [], "owner": {"reputation": 160, "user_id": 7512448, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/OgLAI.png?s=128&g=1", "display_name": "Zonico", "link": "https://stackoverflow.com/users/7512448/zonico"}, "is_accepted": false, "score": -1, "last_activity_date": 1511643350, "last_edit_date": 1511643350, "creation_date": 1511643011, "answer_id": 47490388, "question_id": 47490273, "link": "https://stackoverflow.com/questions/47490273/kotlin-compiler-cant-figure-out-that-variable-is-not-nullable-in-do-while-loop/47490388#47490388", "title": "Kotlin compiler can&#39;t figure out that variable is not nullable in do-while loop", "body": "<p>The compiler probably assumes that next can be changed between the if statement and the loop from another thread.\nSince you can assure that next is not null, just add !! to next when using it in the loop: next!!</p>\n"}], "owner": {"reputation": 862, "user_id": 1417883, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/56fe3a87ac4d39ab9b7a15f92b5fd7dc?s=128&d=identicon&r=PG", "display_name": "barsan-md", "link": "https://stackoverflow.com/users/1417883/barsan-md"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1517219218, "creation_date": 1511642043, "question_id": 47490273, "link": "https://stackoverflow.com/questions/47490273/kotlin-compiler-cant-figure-out-that-variable-is-not-nullable-in-do-while-loop", "title": "Kotlin compiler can&#39;t figure out that variable is not nullable in do-while loop", "body": "<p>I have the following method. Its logic is very simple, if right is set then call left while it has a value (not null). When I write it in the following way, it works.</p>\n\n<pre><code>fun goNext(from: Node): Node? {\n    var prev : Node = from\n    var next : Node? = from.right\n    if (next != null) {\n        prev = next\n        next = next.left\n        while (next != null) {\n            prev = next\n            next = next.left\n        }\n    }\n    return prev\n}\n</code></pre>\n\n<p>If, instead, I try to shorten the code using a do-while loop, it no longer smart casts <code>next</code> to <code>Node</code>. It shows this error:</p>\n\n<pre><code>Type mismatch.\nRequired: Node&lt;T&gt;\nFound: Node&lt;T&gt;?\n</code></pre>\n\n<p>The code follows:</p>\n\n<pre><code>fun goNext(from: Node): Node? {\n    var prev : Node = from\n    var next : Node? = from.right\n    if (next != null) {\n        do {\n            prev = next // Error is here, even though next can't be null\n            next = next.left\n        } while (next != null)\n    }\n    return prev\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 5911, "user_id": 1835650, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/46VRA.jpg?s=128&g=1", "display_name": "TeeTracker", "link": "https://stackoverflow.com/users/1835650/teetracker"}, "edited": false, "score": 0, "creation_date": 1511787933, "post_id": 47487901, "comment_id": 81979054, "body": "Same problem I have"}, {"owner": {"reputation": 2779, "user_id": 5744335, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8q0Xo.jpg?s=128&g=1", "display_name": "Arshak", "link": "https://stackoverflow.com/users/5744335/arshak"}, "reply_to_user": {"reputation": 5911, "user_id": 1835650, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/46VRA.jpg?s=128&g=1", "display_name": "TeeTracker", "link": "https://stackoverflow.com/users/1835650/teetracker"}, "edited": false, "score": 0, "creation_date": 1511946160, "post_id": 47487901, "comment_id": 82053994, "body": "@TeeTracker You can update the plugin to solve this issue. Refer to <a href=\"https://stackoverflow.com/a/47483040/5744335\">this link</a> for more info"}, {"owner": {"reputation": 3892, "user_id": 4359492, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh5.googleusercontent.com/-bItm3-ieAtU/AAAAAAAAAAI/AAAAAAAAAH8/gizqGXoq7rs/photo.jpg?sz=128", "display_name": "Razvan Cristian Lung", "link": "https://stackoverflow.com/users/4359492/razvan-cristian-lung"}, "edited": false, "score": 0, "creation_date": 1512031262, "post_id": 47487901, "comment_id": 82095611, "body": "The issue is gone. Thanks."}, {"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 0, "creation_date": 1524839507, "post_id": 47487901, "comment_id": 87145930, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/47482853/plugin-org-jetbrains-kotlin-failed-to-initialize-and-will-be-disabled-please\">Plugin &#39;org.jetbrains.kotlin&#39; failed to initialize and will be disabled. Please restart Android Studio</a>"}], "answers": [{"tags": [], "owner": {"reputation": 199, "user_id": 9832581, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "abhilasha Yadav", "link": "https://stackoverflow.com/users/9832581/abhilasha-yadav"}, "is_accepted": false, "score": 0, "last_activity_date": 1527090189, "creation_date": 1527090189, "answer_id": 50492527, "question_id": 47487901, "link": "https://stackoverflow.com/questions/47487901/kotlin-plugin-crashes-android-studio/50492527#50492527", "title": "Kotlin plugin crashes Android Studio", "body": "<pre><code>  ext.kotlin_version = '1.2.41'\n</code></pre>\n\n<p>please use this and after sync please re-start your android studio.</p>\n"}], "owner": {"reputation": 3892, "user_id": 4359492, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh5.googleusercontent.com/-bItm3-ieAtU/AAAAAAAAAAI/AAAAAAAAAH8/gizqGXoq7rs/photo.jpg?sz=128", "display_name": "Razvan Cristian Lung", "link": "https://stackoverflow.com/users/4359492/razvan-cristian-lung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 455, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1527090189, "creation_date": 1511625833, "last_edit_date": 1515361484, "question_id": 47487901, "link": "https://stackoverflow.com/questions/47487901/kotlin-plugin-crashes-android-studio", "title": "Kotlin plugin crashes Android Studio", "body": "<p>I've update the Kotlin plugin to version 1.1.61 but Android studio don't start up with the new plugin. </p>\n\n<p>The error:</p>\n\n<pre><code>Plugin 'org.jetbrains.kotlin' failed to initialize and will be disabled.  Please restart Android Studio.\n\ncom.intellij.openapi.extensions.impl.PicoPluginExtensionInitializationException: Duplicate registration for EP: org.jetbrains.uast.uastLanguagePlugin: original plugin com.intellij, new plugin org.jetbrains.kotlin\n</code></pre>\n"}, {"tags": ["unit-testing", "testing", "intellij-idea", "kotlin", "corda"], "comments": [{"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1511609028, "post_id": 47484749, "comment_id": 81925635, "body": "That &quot;folder&quot; is a <a href=\"https://www.jetbrains.com/help/idea/modules.html\" rel=\"nofollow noreferrer\">module</a>. You can add the second module as a dependency of the first one using gradle."}], "answers": [{"tags": [], "owner": {"reputation": 23867, "user_id": 4620025, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/hKFnG.jpg?s=128&g=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/4620025/joel"}, "is_accepted": true, "score": 1, "last_activity_date": 1511617848, "creation_date": 1511617848, "answer_id": 47486709, "question_id": 47484749, "link": "https://stackoverflow.com/questions/47484749/how-to-import-a-directory-full-package-in-intellij-for-testing-purposes/47486709#47486709", "title": "How to import a Directory/full package in Intellij for Testing purposes", "body": "<p>You need to modify the build.gradle file of the CorDapp including the tests to depend on the other CorDapp.</p>\n\n<p>See the example here: <a href=\"https://github.com/corda/cordapp-template-kotlin/blob/release-V2/cordapp/build.gradle#L58\" rel=\"nofollow noreferrer\">https://github.com/corda/cordapp-template-kotlin/blob/release-V2/cordapp/build.gradle#L58</a></p>\n"}], "owner": {"reputation": 685, "user_id": 8344252, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/QmV0W.jpg?s=128&g=1", "display_name": "Stefano.Maffullo", "link": "https://stackoverflow.com/users/8344252/stefano-maffullo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 47486709, "answer_count": 1, "score": 0, "last_activity_date": 1511617848, "creation_date": 1511604448, "question_id": 47484749, "link": "https://stackoverflow.com/questions/47484749/how-to-import-a-directory-full-package-in-intellij-for-testing-purposes", "title": "How to import a Directory/full package in Intellij for Testing purposes", "body": "<p>I'm working on a project that have two separated directory (like two separate applications that we called cordApp), in the first cordapp we have \"a, b, c\" classes and in the second one we have \"d, e, f\" classes.\nThe idea behind is that the second cordapp must be much lighter than the first one because it has to travel on the network, so the size \"heaviness\" of the first is greater than the second.</p>\n\n<p>We put the testing folder in the first one (the heavier) but I need to test also stuffs from the \"lighter\" one, how can I import the second one in the first one?\nFor now my go-for solution is to create the testing folder also in the second one but it's not that good because it will make it heavier.</p>\n\n<p>Any idea on how to import a full directory/full app in the other one?</p>\n\n<p>This is a photo of the project, \"cordapp-contract-states\" is the light one and has to be imported in \"cordapp\" \n <a href=\"https://i.stack.imgur.com/b1rAo.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/b1rAo.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["android", "kotlin", "android-room"], "answers": [{"tags": [], "owner": {"reputation": 3767, "user_id": 5431173, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5cc099bed59473fb573fe169561bc244?s=128&d=identicon&r=PG&f=1", "display_name": "Akshay Sood", "link": "https://stackoverflow.com/users/5431173/akshay-sood"}, "is_accepted": true, "score": 1, "last_activity_date": 1511603757, "creation_date": 1511603757, "answer_id": 47484660, "question_id": 47484497, "link": "https://stackoverflow.com/questions/47484497/android-room-library-error-cannot-find-setter-for-field-kotlin/47484660#47484660", "title": "Android Room library error: Cannot find setter for field. (Kotlin)", "body": "<p>I removed the initialization of <code>sr_no</code> from </p>\n\n<pre><code>@PrimaryKey(autoGenerate = true)\n        var sr_no: Int = 0\n</code></pre>\n\n<p>and the final code is: </p>\n\n<pre><code>@PrimaryKey(autoGenerate = true)\n        var sr_no: Int\n</code></pre>\n\n<p>worked for me because it was an auto-generated field.</p>\n"}, {"comments": [{"owner": {"reputation": 2185, "user_id": 973919, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/872fbcf803b76777b0e48dc58957f8ec?s=128&d=identicon&r=PG", "display_name": "xarlymg89", "link": "https://stackoverflow.com/users/973919/xarlymg89"}, "edited": false, "score": 0, "creation_date": 1553163875, "post_id": 50095552, "comment_id": 97286390, "body": "It seems ridiculous to me that you cannot define class properties with a prefix like &#39;is&#39;. I believe it&#39;s possible to create columns with such a prefix without troubles. Anyway, thanks a lot for this information!"}], "tags": [], "owner": {"reputation": 4360, "user_id": 1868841, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ADiwD.jpg?s=128&g=1", "display_name": "Waqar UlHaq", "link": "https://stackoverflow.com/users/1868841/waqar-ulhaq"}, "is_accepted": false, "score": 4, "last_activity_date": 1525072180, "creation_date": 1525072180, "answer_id": 50095552, "question_id": 47484497, "link": "https://stackoverflow.com/questions/47484497/android-room-library-error-cannot-find-setter-for-field-kotlin/50095552#50095552", "title": "Android Room library error: Cannot find setter for field. (Kotlin)", "body": "<p>Most of the time issue is occurring because of the following:</p>\n\n<h2><strong>Problem 1:</strong></h2>\n\n<p><strong>Final field</strong>: Fields are marked with val, they are effectively final and don't have setter fields. </p>\n\n<p><strong>Solution</strong>: Replace the fields <strong>val</strong> with <strong>var</strong>. You might also need to initialize the fields.</p>\n\n<h2><strong>Problem 2:</strong></h2>\n\n<p><strong>is keyword</strong>: We cannot use sqllite reserved keywords line for fields naming <a href=\"http://www.sqlite.org/lang_keywords.html\" rel=\"nofollow noreferrer\">source</a> e.g.</p>\n\n<p>The following will cause error</p>\n\n<pre><code> @ColumnInfo(name = \"IS_ACTIVE\") var isActive\n</code></pre>\n\n<p><strong>Solution</strong>: The solution is:</p>\n\n<pre><code>@ColumnInfo(name = \"IS_ACTIVE\") var active\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3939, "user_id": 5710872, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ecb59af7d4d59ec44d2a05193c74062a?s=128&d=identicon&r=PG&f=1", "display_name": "Qamar", "link": "https://stackoverflow.com/users/5710872/qamar"}, "is_accepted": false, "score": 0, "last_activity_date": 1533912996, "last_edit_date": 1533912996, "creation_date": 1533902932, "answer_id": 51786216, "question_id": 47484497, "link": "https://stackoverflow.com/questions/47484497/android-room-library-error-cannot-find-setter-for-field-kotlin/51786216#51786216", "title": "Android Room library error: Cannot find setter for field. (Kotlin)", "body": "<p>There is an issue in room orm library with kotlin java code generation.</p>\n\n<p>My optional field <code>isFavorite</code> and compile time same error then I change my field name to <code>favorite</code> then compiled. </p>\n\n<p>before\n<code>var isFavorite: Int? = 0,\n</code>\nworking fine:\n<code>var favorite: Int? = 0,\n</code>\nThanks </p>\n"}], "owner": {"reputation": 3767, "user_id": 5431173, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5cc099bed59473fb573fe169561bc244?s=128&d=identicon&r=PG&f=1", "display_name": "Akshay Sood", "link": "https://stackoverflow.com/users/5431173/akshay-sood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3573, "favorite_count": 0, "accepted_answer_id": 47484660, "answer_count": 3, "score": 4, "last_activity_date": 1533912996, "creation_date": 1511602535, "last_edit_date": 1511603391, "question_id": 47484497, "link": "https://stackoverflow.com/questions/47484497/android-room-library-error-cannot-find-setter-for-field-kotlin", "title": "Android Room library error: Cannot find setter for field. (Kotlin)", "body": "<p>I am using room library and I have below mentioned entity:</p>\n\n<pre><code>@Parcelize\n@Entity(tableName = \"tb_option\")\ndata class OptionsTable(\n        var question_id: Int? = null,\n        var option_id: Int? = null,\n        var option: String? = null,\n        var is_selected: Int? = null,\n\n\n        @PrimaryKey(autoGenerate = true)\n        var sr_no: Int = 0) : Parcelable\n</code></pre>\n\n<p>as you can see I have all the field declared as <code>var</code> but it is still showing error as: </p>\n\n<pre><code>error: Cannot find setter for field.\ne: \n\ne:     private java.lang.Integer is_selected;\ne:      \n\n\n\n                     ^\n</code></pre>\n\n<p>please suggest some fix for this.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["android", "android-recyclerview", "kotlin"], "comments": [{"owner": {"reputation": 187, "user_id": 6312945, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eEJf0.jpg?s=128&g=1", "display_name": "josh_gom3z", "link": "https://stackoverflow.com/users/6312945/josh-gom3z"}, "edited": false, "score": 1, "creation_date": 1511602261, "post_id": 47484419, "comment_id": 81923728, "body": "Could you post your code inside the RecyclerView Adapter"}, {"owner": {"reputation": 5865, "user_id": 3676184, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/e3d0f66167a77f42ccbc191a91f163fd?s=128&d=identicon&r=PG&f=1", "display_name": "Pavya", "link": "https://stackoverflow.com/users/3676184/pavya"}, "edited": false, "score": 0, "creation_date": 1511602290, "post_id": 47484419, "comment_id": 81923740, "body": "its because of  result[0].toString() . 0 index"}, {"owner": {"reputation": 2809, "user_id": 3242314, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tcMi6.png?s=128&g=1", "display_name": "N.Y", "link": "https://stackoverflow.com/users/3242314/n-y"}, "reply_to_user": {"reputation": 187, "user_id": 6312945, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eEJf0.jpg?s=128&g=1", "display_name": "josh_gom3z", "link": "https://stackoverflow.com/users/6312945/josh-gom3z"}, "edited": false, "score": 0, "creation_date": 1511602832, "post_id": 47484419, "comment_id": 81923880, "body": "@josh_gom3z I added my RecyclerView adapter code (CategoryList_Adapter)"}, {"owner": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 1, "creation_date": 1511603401, "post_id": 47484419, "comment_id": 81924033, "body": "why dont you override <code>RecyclerView.Adapter#getItemId(int position)</code> ? did you read <code>onCreateViewHolder</code> documentation? and what is last <code>int</code> parameter?"}, {"owner": {"reputation": 2809, "user_id": 3242314, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tcMi6.png?s=128&g=1", "display_name": "N.Y", "link": "https://stackoverflow.com/users/3242314/n-y"}, "reply_to_user": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1511604872, "post_id": 47484419, "comment_id": 81924482, "body": "@pskink No Id doesn&#39;t read, I am new to android development. Thank you, I&#39;m studying about it right now."}, {"owner": {"reputation": 2809, "user_id": 3242314, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tcMi6.png?s=128&g=1", "display_name": "N.Y", "link": "https://stackoverflow.com/users/3242314/n-y"}, "reply_to_user": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1511604921, "post_id": 47484419, "comment_id": 81924491, "body": "@pskink Can you give me an article about this?"}, {"owner": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1511604950, "post_id": 47484419, "comment_id": 81924501, "body": "hmmm, about what?"}, {"owner": {"reputation": 2809, "user_id": 3242314, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tcMi6.png?s=128&g=1", "display_name": "N.Y", "link": "https://stackoverflow.com/users/3242314/n-y"}, "edited": false, "score": 0, "creation_date": 1511604976, "post_id": 47484419, "comment_id": 81924509, "body": "what you say. override RecyclerView.Adapter#getItemId(int position) ..."}, {"owner": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 1, "creation_date": 1511605389, "post_id": 47484419, "comment_id": 81924630, "body": "it is used by <a href=\"https://developer.android.com/reference/android/support/v7/widget/RecyclerView.ViewHolder.html#getItemId()\" rel=\"nofollow noreferrer\">ViewHolder#getItemId()</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2809, "user_id": 3242314, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tcMi6.png?s=128&g=1", "display_name": "N.Y", "link": "https://stackoverflow.com/users/3242314/n-y"}, "edited": false, "score": 0, "creation_date": 1511683725, "post_id": 47484851, "comment_id": 81943361, "body": "This is not my answer but is another way that solved my problem. Thank you"}], "tags": [], "owner": {"reputation": 210, "user_id": 3148648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af8deba2b5b9e17424d6f06889a54258?s=128&d=identicon&r=PG&f=1", "display_name": "Jackey kabra", "link": "https://stackoverflow.com/users/3148648/jackey-kabra"}, "is_accepted": true, "score": 2, "last_activity_date": 1511605896, "last_edit_date": 1511605896, "creation_date": 1511605243, "answer_id": 47484851, "question_id": 47484419, "link": "https://stackoverflow.com/questions/47484419/why-clicking-on-recyclerview-items-return-a-wrong-item-id/47484851#47484851", "title": "Why clicking on RecyclerView items return a wrong item id?", "body": "<p>Yes, I got the same issue but I resolved it using interface.\nFirst, you will create an interface on click class in your adapter class.</p>\n\n<p>ex:\n    public class TestAdapter extends RecyclerView.Adapter {</p>\n\n<pre><code>Context context;\nOnTapClickListner tapClick;\nList&lt;ModelClass&gt; datas;\n\npublic TestAdapter(Context context,OnTapClickListner tapClick,List&lt;ModelClass&gt; datas) {\n        super();\n        this.context = context;\n        this.mediaClick = mediaClick;\n        this.datas = datas;\n    }\n\n@Override\npublic void onBindViewHolder(ViewHolder holder, int position) {\n\n  ModelClass mainData = datas.get(position);\n\n  holder.View.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n               tapClick.onItemClick(mainData);\n           }\n    }\n }\n\n@Override\npublic int getItemCount() {\n       return datas.size();\n  }\n\npublic interface OnTapClickListner {\n        void onItemClick(ModelClass data);\n    }\n}\n</code></pre>\n\n<p>you have set interface look like this in adpter class.\nthen you will use adapter in your main class and onclick look like this:</p>\n\n<pre><code>TestAdapter.OnTapClickListner itemClick = new TestAdapter.OnTapClickListner() {\n        @Override\n        public void onItemClick(ModelClass data) {\n\n    }\n}\n</code></pre>\n\n<p>Itemclick use in your adpter like this:</p>\n\n<pre><code>new TestAdapter(this,itemClick,datas);\n</code></pre>\n"}], "owner": {"reputation": 2809, "user_id": 3242314, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tcMi6.png?s=128&g=1", "display_name": "N.Y", "link": "https://stackoverflow.com/users/3242314/n-y"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 861, "favorite_count": 0, "accepted_answer_id": 47484851, "answer_count": 1, "score": -1, "last_activity_date": 1511605896, "creation_date": 1511601953, "last_edit_date": 1511602737, "question_id": 47484419, "link": "https://stackoverflow.com/questions/47484419/why-clicking-on-recyclerview-items-return-a-wrong-item-id", "title": "Why clicking on RecyclerView items return a wrong item id?", "body": "<p>Why clicking on RecyclerView items return a wrong item id? (It changed depending on scrolling the list)</p>\n\n<p>I have an <code>Activity</code> with a button inside. I pop a dialog when the user clicks on the button. Inside the dialog, I have a <code>RecyclerView</code>.\nMy <code>RecyclerView</code> adapter use an web service to fetch the list:</p>\n\n<pre><code>setRecyclerViewAdapter(recycleView,1)\nval dialogBuilder = AlertDialog.Builder(this)\nval dialogView = this.layoutInflater.inflate(R.layout.dialog_menu, null)\ndialogBuilder.setView(dialogView)\nval b = dialogBuilder.create()\nb.show()\n</code></pre>\n\n<p>Below code is for fetching data from webservice and setting the <code>RecyclerView</code> adapter:</p>\n\n<pre><code>private fun setRecyclerViewAdapter(recycleList:RecyclerView,subjectId:Int){\n     recycleList.layoutManager =LinearLayoutManager(this,LinearLayoutManager.VERTICAL, false)\n\n        doAsync {\n            categoryList= GetSubCategoriesWebService()\n                    .SetRecyclerViewAdapter(subjectId)\n            uiThread {\n            }\n            onComplete {\n                val onClick= View.OnClickListener {\n                    val returnIntent = Intent()\n                    returnIntent.putExtra(\"result\", result[0].toString())\n                    setResult(Activity.RESULT_OK, returnIntent)\n                    finish()\n                }\n                val adapter = CategoryList_Adapter(categoryList,onClick,result)\n                recycleList.adapter = adapter\n                adapter.notifyDataSetChanged()\n            }\n        }\n    }\n</code></pre>\n\n<p>In the <code>CategoryList_Adapter</code> I use the <code>onClick</code> for the <code>RecyclerView</code> <code>setOnClickListener</code> function ...</p>\n\n<p>Note that the <code>Result</code> is an array that store the user click on RecyclerView items and give Id back to the activity and it's filled in the <code>CategoryList_Adapter</code>.</p>\n\n<hr>\n\n<p>This is CategoryList_Adapter code:</p>\n\n<pre><code>class CategoryList_Adapter(private val dataList: ArrayList&lt;CategoryListObject&gt;?, \n                           private val listener: View.OnClickListener?, \n                           private val adSubjectId :IntArray?) \n    : RecyclerView.Adapter&lt;CategoryList_Adapter.ItemRowHolder&gt;() {\n    override fun onCreateViewHolder(viewGroup: ViewGroup, i: Int): ItemRowHolder {\n        val rowNumber = getItemViewType(i)\n        val view = LayoutInflater.from(viewGroup.context)\n                .inflate(R.layout.category_listview_row, viewGroup, false)\n        return ItemRowHolder(view, rowNumber, dataList!![i].id)\n    }\n\n    override fun onBindViewHolder(itemRowHolder: ItemRowHolder, i: Int) {\n        Log.d(\"position  \", i.toString())\n        itemRowHolder.itemTitle.text = dataList!![i].title\n    }\n     inner class ItemRowHolder(view: View,\n                              rowNumber: Int,\n                              subjectId: Int)\n        : RecyclerView.ViewHolder(view) {\n        var itemTitle: TextView\n\n        init {\n            view.setOnClickListener(listener)\n            if(adSubjectId!=null)\n                adSubjectId[0]=subjectId\n     }\n}\n</code></pre>\n\n<p>Why?</p>\n\n<p>Thank you for your patience.</p>\n"}, {"tags": ["javafx", "kotlin", "tornadofx"], "answers": [{"comments": [{"owner": {"reputation": 5360, "user_id": 3139545, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8c4a158119260b6a27a6bab276cac749?s=128&d=identicon&r=PG&f=1", "display_name": "user3139545", "link": "https://stackoverflow.com/users/3139545/user3139545"}, "edited": false, "score": 0, "creation_date": 1511601912, "post_id": 47484302, "comment_id": 81923635, "body": "Sorry it is my questions that is bad. I want to know how to make this part of a TornadoFX view, i will post the code i have so far and the problem might be clearer."}], "tags": [], "owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "is_accepted": true, "score": 1, "last_activity_date": 1511602860, "last_edit_date": 1511602860, "creation_date": 1511601091, "answer_id": 47484302, "question_id": 47483962, "link": "https://stackoverflow.com/questions/47483962/tornadofx-overriding-layoutchildren-on-region/47484302#47484302", "title": "TornadoFX overriding layoutChildren on Region", "body": "<p>I'm not sure what you mean by translating to TornadoFX, but writing the <code>layoutChildren</code> in Kotlin would look something like this:</p>\n\n<pre><code>override fun layoutChildren() {\n    layoutInArea(highlight, 0.0, 0.0, width, height, baselineOffset, HPos.CENTER, VPos.CENTER);\n}\n</code></pre>\n\n<p>EDIT: You updated the code example to a View, so I think I understand what you want now :)</p>\n\n<p>First, make sure the View doesn't require parameters, because that would make it impossible to inject this view. Either pass parameters using <code>by param()</code> or better yet, inject a ViewModel in the scope of the View, and inject that ViewModel into your View.</p>\n\n<p>Maybe you can add x and y as properties to ReversiModel?</p>\n\n<p>If you need to create a custom Region you can create what would be an anonymous inner class equivalent, in Java speak:</p>\n\n<pre><code>class ReversiSquare : View() {\n    val model: ReversiModel by inject()\n\n    override val root = object : Region() {\n        // ...\n\n        override fun layoutChildren() {\n            layoutInArea(highlight, 0.0, 0.0, width, height, baselineOffset, HPos.CENTER, VPos.CENTER);\n        }\n    }\n}\n</code></pre>\n\n<p>To open this View now, create a new scope and push the ReversiModel into it:</p>\n\n<pre><code>// Create the model, set x, y and other initial state in the model\nval model = ReversiModel()\nmodel.x = 42\n\n// Create a new scope and push the ReversiModel into it\nval scope = Scope(model)\n\n// Find the ReversiSquare in the new scope\nfind&lt;ReversiSquare&gt;(scope) {\n    // Do something with the sequare, like openWindow() or similar\n}\n</code></pre>\n"}], "owner": {"reputation": 5360, "user_id": 3139545, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8c4a158119260b6a27a6bab276cac749?s=128&d=identicon&r=PG&f=1", "display_name": "user3139545", "link": "https://stackoverflow.com/users/3139545/user3139545"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 47484302, "answer_count": 1, "score": 0, "last_activity_date": 1511602860, "creation_date": 1511598121, "last_edit_date": 1511601971, "question_id": 47483962, "link": "https://stackoverflow.com/questions/47483962/tornadofx-overriding-layoutchildren-on-region", "title": "TornadoFX overriding layoutChildren on Region", "body": "<p>Im trying to translate <a href=\"https://github.com/Apress/pro-javafx-8/blob/master/projavafx8/ch05/Reversi/src/projavafx/reversi/ui/ReversiSquare.java\" rel=\"nofollow noreferrer\">this</a> JavaFX class to TornadoFX. Hover im not able to figure out how <code>protected void layoutChildren()</code> should be done with TornadoFX?</p>\n\n<p>This is the code I have so far:</p>\n\n<pre><code>class ReversiSquare(x: Int, y: Int) : View() {\n\n    var x by property(x)\n    fun xProperty() = getProperty(ReversiSquare::y)\n\n    var y by property(y)\n    fun yProperty() = getProperty(ReversiSquare::y)\n\n    var highlight: Region by singleAssign()\n    var highlightTransition: FadeTransition by singleAssign()\n\n    val model = ReversiModel\n\n    override val root = region {\n        region {\n            opacity = 0.0\n            style = \"-fx-border-width: 3; -fx-border-color: dodgerblue\"\n            highlight = this\n        }\n        // todo not sure this works with singleAssign\n        highlightTransition = FadeTransition(Duration.millis(200.0), highlight).apply {\n            fromValue = 0.0\n            toValue = 1.0\n        }\n\n        styleProperty().bind(Bindings.`when`(model.legalMove(x, y))\n                .then(\"-fx-background-color: derive(dodgerblue, -60%)\")\n                .otherwise(\"-fx-background-color: burlywood\"))\n\n        val light = Light.Distant().apply {\n            azimuth = -135.0\n            elevation = 30.0\n        }\n        effect = Lighting(light)\n        setPrefSize(200.0,200.0)\n        this += highlight\n        addEventHandler(MouseEvent.MOUSE_ENTERED_TARGET) {\n            if(model.legalMove(x ,y).get()) {\n                with(highlightTransition) {\n                    rate =1.0\n                    play()\n                }\n            }\n        }\n        addEventHandler(MouseEvent.MOUSE_EXITED_TARGET) {\n            with(highlightTransition) {\n                rate = -1.0\n                play()\n            }\n        }\n        onDoubleClick {\n            model.play(x, y)\n            highlightTransition.rate = -1.0\n            highlightTransition.play()\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["android-studio", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 262, "user_id": 2451543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8dc15e5b8b6a52475213fc15d059929?s=128&d=identicon&r=PG", "display_name": "Eelco", "link": "https://stackoverflow.com/users/2451543/eelco"}, "edited": false, "score": 0, "creation_date": 1511881641, "post_id": 47483040, "comment_id": 82026215, "body": "Instead of downgrading I updated the plugin and everything worked fine afterwards."}, {"owner": {"reputation": 1092, "user_id": 4753198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8xZDQ.jpg?s=128&g=1", "display_name": "sonichy", "link": "https://stackoverflow.com/users/4753198/sonichy"}, "edited": false, "score": 1, "creation_date": 1566465132, "post_id": 47483040, "comment_id": 101667470, "body": "Upgrade to  AS 3.5, this error appears. Solution 1: no Kotlin menu. Solution 2: no   upgrade or downgrade."}], "tags": [], "owner": {"reputation": 2779, "user_id": 5744335, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8q0Xo.jpg?s=128&g=1", "display_name": "Arshak", "link": "https://stackoverflow.com/users/5744335/arshak"}, "is_accepted": true, "score": 13, "last_activity_date": 1511935969, "last_edit_date": 1511935969, "creation_date": 1511589120, "answer_id": 47483040, "question_id": 47482853, "link": "https://stackoverflow.com/questions/47482853/plugin-org-jetbrains-kotlin-failed-to-initialize-and-will-be-disabled-please/47483040#47483040", "title": "Plugin &#39;org.jetbrains.kotlin&#39; failed to initialize and will be disabled. Please restart Android Studio", "body": "<blockquote>\n  <p>To solve this issue, you have to either <strong>upgrade or downgrade your kotlin plugin</strong></p>\n</blockquote>\n\n<p><strong>Solution 1: Upgrade Plugin</strong>\n<br><br>First go to Tools menu > Select Kotlin > Configure Kotlin Plugin Updates > Select one of the kotlin plugin &amp; press download (stable or early access, i chose early access to solve this issue)</p>\n\n<p>And finally change the kotlin version in build.gradle(Project:) according to the \ndownloaded version</p>\n\n<p><br><a href=\"https://i.stack.imgur.com/xmqBm.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/xmqBm.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Solution 2: Downgrade Plugin</strong></p>\n\n<p>If your on <strong>mac</strong> then press: <code>Command + ,</code>\n to open preference, then select plugin &amp; search for kotlin &amp; uninstall it, it will rollback to previous version: 1.1.51</p>\n\n<p>On <strong>Windows machine</strong>, press <code>Control + Alt + S</code> to open settings dialog, then select plugins &amp; search for kotlin &amp; uninstall it, it will rollback to previous version: 1.1.51</p>\n\n<p><a href=\"https://i.stack.imgur.com/sc1GO.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/sc1GO.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Please Note:</strong> Do not uncheck kotlin in plugins else it will disable kotlin &amp; fail to recognise kotlin file &amp; syntax</p>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 5078247, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oe5uDAdkfTA/AAAAAAAAAAI/AAAAAAAAAE8/tO3_p3xqcc8/photo.jpg?sz=128", "display_name": "senthil kumar", "link": "https://stackoverflow.com/users/5078247/senthil-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1511935913, "creation_date": 1511935913, "answer_id": 47546183, "question_id": 47482853, "link": "https://stackoverflow.com/questions/47482853/plugin-org-jetbrains-kotlin-failed-to-initialize-and-will-be-disabled-please/47546183#47546183", "title": "Plugin &#39;org.jetbrains.kotlin&#39; failed to initialize and will be disabled. Please restart Android Studio", "body": "<p>This issue has been resolved in the latest kotlin plugin version <strong>1.2.0-release-Studio3.0-1</strong>. Try updating the kotlin plugin version.</p>\n"}, {"comments": [{"owner": {"reputation": 1261, "user_id": 2741080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d044428e8f02b614742c77a5aa26932e?s=128&d=identicon&r=PG&f=1", "display_name": "Swordsman", "link": "https://stackoverflow.com/users/2741080/swordsman"}, "edited": false, "score": 2, "creation_date": 1513421156, "post_id": 47825903, "comment_id": 82653678, "body": "For Android studio 3.1 Canary 5, I solved it by using the one from <a href=\"https://plugins.jetbrains.com/plugin/6954-kotlin\" rel=\"nofollow noreferrer\">here</a>. Choose <code>AS3.1</code> version and install it manually."}, {"owner": {"reputation": 642, "user_id": 8968956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38cb5bfbfc38e6a3476baee2e3ec1222?s=128&d=identicon&r=PG&f=1", "display_name": "trinadh thatakula", "link": "https://stackoverflow.com/users/8968956/trinadh-thatakula"}, "reply_to_user": {"reputation": 1261, "user_id": 2741080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d044428e8f02b614742c77a5aa26932e?s=128&d=identicon&r=PG&f=1", "display_name": "Swordsman", "link": "https://stackoverflow.com/users/2741080/swordsman"}, "edited": false, "score": 0, "creation_date": 1513568622, "post_id": 47825903, "comment_id": 82688657, "body": "thanks @swordsman it worked although in that link there is 1.2.0 while the latest one is 1.2.10"}, {"owner": {"reputation": 7596, "user_id": 1009132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75930f51f830aa057b0eaf61a3dd62a8?s=128&d=identicon&r=PG", "display_name": "albodelu", "link": "https://stackoverflow.com/users/1009132/albodelu"}, "edited": false, "score": 1, "creation_date": 1513746641, "post_id": 47825903, "comment_id": 82764905, "body": "<a href=\"https://plugins.jetbrains.com/plugin/6954-kotlin/update/41603\" rel=\"nofollow noreferrer\">1.2.10 already available for AS3.1 via IDE or direct download</a>"}], "tags": [], "owner": {"reputation": 642, "user_id": 8968956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38cb5bfbfc38e6a3476baee2e3ec1222?s=128&d=identicon&r=PG&f=1", "display_name": "trinadh thatakula", "link": "https://stackoverflow.com/users/8968956/trinadh-thatakula"}, "is_accepted": false, "score": 2, "last_activity_date": 1513312699, "creation_date": 1513312699, "answer_id": 47825903, "question_id": 47482853, "link": "https://stackoverflow.com/questions/47482853/plugin-org-jetbrains-kotlin-failed-to-initialize-and-will-be-disabled-please/47825903#47825903", "title": "Plugin &#39;org.jetbrains.kotlin&#39; failed to initialize and will be disabled. Please restart Android Studio", "body": "<p>If upgrading doesn't help try downgrading </p>\n\n<p>when i faces the same issue with Android studio 3.1 Canary 5 with Kotlin version v1.2.10-release-IJ2017.1-1 (latest version as on 15 dec 2017) I tried the above solution which didn't work so i just uninstalled the update and it reverted back to version 1.1.51 and that worked without any issue</p>\n"}], "owner": {"reputation": 16326, "user_id": 883033, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/lkrDS.jpg?s=128&g=1", "display_name": "Chandra Sekhar", "link": "https://stackoverflow.com/users/883033/chandra-sekhar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5217, "favorite_count": 2, "accepted_answer_id": 47483040, "answer_count": 3, "score": 7, "last_activity_date": 1513312699, "creation_date": 1511587108, "last_edit_date": 1511616723, "question_id": 47482853, "link": "https://stackoverflow.com/questions/47482853/plugin-org-jetbrains-kotlin-failed-to-initialize-and-will-be-disabled-please", "title": "Plugin &#39;org.jetbrains.kotlin&#39; failed to initialize and will be disabled. Please restart Android Studio", "body": "<p>After Android Studio's Kotlin plugin update, It stopped working. Plugin is getting disabled automatically. Below error I am getting.</p>\n\n<pre><code>com.intellij.openapi.extensions.impl.PicoPluginExtensionInitializationException: Duplicate registration for EP: org.jetbrains.uast.uastLanguagePlugin: original plugin com.intellij, new plugin org.jetbrains.kotlin\nat com.intellij.openapi.extensions.impl.ExtensionsAreaImpl.registerExtensionPoint(ExtensionsAreaImpl.java:286)\nat com.intellij.openapi.extensions.impl.ExtensionsAreaImpl.registerExtensionPoint(ExtensionsAreaImpl.java:128)\nat com.intellij.ide.plugins.IdeaPluginDescriptorImpl.registerExtensionPoints(IdeaPluginDescriptorImpl.java:328)\nat com.intellij.ide.plugins.PluginManagerCore.registerExtensionPointsAndExtensions(PluginManagerCore.java:1352)\nat com.intellij.ide.plugins.PluginManagerCore.initializePlugins(PluginManagerCore.java:1264)\nat com.intellij.ide.plugins.PluginManagerCore.initPlugins(PluginManagerCore.java:1393)\nat com.intellij.ide.plugins.PluginManagerCore.getPlugins(PluginManagerCore.java:121)\nat com.intellij.openapi.components.impl.ComponentManagerImpl.getComponentConfigs(ComponentManagerImpl.java:302)\nat com.intellij.openapi.components.impl.ComponentManagerImpl.init(ComponentManagerImpl.java:95)\nat com.intellij.openapi.application.impl.ApplicationImpl.load(ApplicationImpl.java:425)\nat com.intellij.openapi.application.impl.ApplicationImpl.load(ApplicationImpl.java:411)\nat com.intellij.idea.IdeaApplication.run(IdeaApplication.java:206)\nat com.intellij.idea.MainImpl$1.lambda$null$0(MainImpl.java:49)\nat java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:311)\nat java.awt.EventQueue.dispatchEventImpl(EventQueue.java:762)\nat java.awt.EventQueue.access$500(EventQueue.java:98)\nat java.awt.EventQueue$3.run(EventQueue.java:715)\nat java.awt.EventQueue$3.run(EventQueue.java:709)\nat java.security.AccessController.doPrivileged(Native Method)\nat java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)\nat java.awt.EventQueue.dispatchEvent(EventQueue.java:732)\nat com.intellij.ide.IdeEventQueue.dispatchEvent(IdeEventQueue.java:343)\nat java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201)\nat java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)\nat java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)\nat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\nat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)\nat java.awt.EventDispatchThread.run(EventDispatchThread.java:82)\n</code></pre>\n"}, {"tags": ["functional-programming", "kotlin", "continuation-passing"], "answers": [{"tags": [], "owner": {"reputation": 1896, "user_id": 4506528, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4eKvX.png?s=128&g=1", "display_name": "Hay", "link": "https://stackoverflow.com/users/4506528/hay"}, "is_accepted": false, "score": 2, "last_activity_date": 1512918919, "last_edit_date": 1512918919, "creation_date": 1512918552, "answer_id": 47740150, "question_id": 47481218, "link": "https://stackoverflow.com/questions/47481218/kotlin-either-monad-refactoring-a-constructor-call-to-handle-cps/47740150#47740150", "title": "Kotlin Either monad: Refactoring a constructor call to handle CPS", "body": "<p>I believe I understood what was wrong.</p>\n\n<p>In FP examples written in a proper functional programming language, applicative style is written like <code>someFunction map a apply b</code> but in Kotlin, because we are dealing with methods of objects, this is written in the reserve order when reading from left to right, but in the correct order in terms of argument evaluation. This confused me very much.</p>\n\n<pre><code>private fun requestCountBetweenQueryC(me: RequestModel): Perhaps&lt;CountBetweenQuery&gt; {\n    val newCountBetweenQueryCurried: (begin: LocalDate) -&gt; (end: LocalDate) -&gt; CountBetweenQuery =\n            ::CountBetweenQuery.curried()\n\n    val a = perhapsExtractLocalDate(me, \"begin\")\n    val b = perhapsExtractLocalDate(me, \"end\")\n\n    return b.apply(a.map(newCountBetweenQueryCurried))\n}\n</code></pre>\n\n<p>If my understanding is correct, this is also known as the <code>lift2</code> function.</p>\n"}], "owner": {"reputation": 1896, "user_id": 4506528, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4eKvX.png?s=128&g=1", "display_name": "Hay", "link": "https://stackoverflow.com/users/4506528/hay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 320, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1512918919, "creation_date": 1511566391, "last_edit_date": 1511566750, "question_id": 47481218, "link": "https://stackoverflow.com/questions/47481218/kotlin-either-monad-refactoring-a-constructor-call-to-handle-cps", "title": "Kotlin Either monad: Refactoring a constructor call to handle CPS", "body": "<p>I am an absolute beginner in functional programming and Kotlin, trying to solve exercises that I created from questions I'm asking myself; my current question being <em>\"How to put in practice functional programming onto real world applications using a Ports and Adapters architecture?\"</em></p>\n\n<p>Currently learning about the <code>Either</code> monad, I have the following function in which <code>Perhaps&lt;T&gt;</code> is just a renamed <code>Either&lt;Err, T&gt;</code> for use with <a href=\"https://vimeo.com/97344498\" rel=\"nofollow noreferrer\">exception handling</a>.</p>\n\n<p>This function takes a <code>RequestModel</code> containing arbitrary HTTP parameters, and may <code>Perhaps</code> return a <code>CountBetweenQuery</code> which is just a data class containing two <code>LocalDate</code>.</p>\n\n<pre><code>private fun requestCountBetweenQueryA(model: RequestModel): Perhaps&lt;CountBetweenQuery&gt; {\n    return try {\n        Perhaps.ret(CountBetweenQuery(extractLocalDateOrThrow(model, \"begin\"), extractLocalDateOrThrow(model, \"end\")))\n\n    } catch (e: UnsupportedTemporalTypeException) {\n        Perhaps.Fail(Err.DATE_FORMAT_IS_INVALID)\n\n    } catch (e: DateTimeException) {\n        Perhaps.Fail(Err.DATE_FORMAT_IS_INVALID)\n    }\n}\n\nprivate fun extractLocalDateOrThrow(it: RequestModel, param: String): LocalDate =\n        LocalDate.from(DateTimeFormatter.ISO_DATE.parse(it.parameters.first { it.key == param }.value))\n</code></pre>\n\n<p>In an OO language, I would refactor this so that exception handling either way below in a common exception handler, or higher above (where duplicated code is extracted into a single method). Naturally, I want to turn my <code>extractLocalDateOrThrow</code> into a <code>perhapsExtractLocalDate</code> as part of my exercise:</p>\n\n<pre><code>private fun perhapsExtractLocalDate(it: RequestModel, param: String): Perhaps&lt;LocalDate&gt; = try {\n    Perhaps.ret(LocalDate.from(DateTimeFormatter.ISO_DATE.parse(it.parameters.first { it.key == param }.value)))\n\n} catch (e: UnsupportedTemporalTypeException) {\n    Perhaps.Fail(Err.DATE_FORMAT_IS_INVALID)\n\n} catch (e: DateTimeException) {\n    Perhaps.Fail(Err.DATE_FORMAT_IS_INVALID)\n}\n</code></pre>\n\n<p>I have struggled for an hour trying to figure out how to call the constructor of <code>CountBetweenQuery</code> while preserving the continuation passing style.</p>\n\n<p>This is what I came up with:</p>\n\n<pre><code>private fun requestCountBetweenQueryB(me: RequestModel): Perhaps&lt;CountBetweenQuery&gt; {\n    val newCountBetweenQueryCurried: (begin: LocalDate) -&gt; (end: LocalDate) -&gt; CountBetweenQuery =\n            ::CountBetweenQuery.curried()\n\n    return Perhaps.ret(newCountBetweenQueryCurried)\n            .bind { function -&gt; perhapsExtractLocalDate(me, \"begin\").map(function) }\n            .bind { function -&gt; perhapsExtractLocalDate(me, \"end\").map(function) }\n}\n</code></pre>\n\n<p>At first I had expected to use <code>return</code> and <code>apply</code> because the two method calls <code>perhapsExtractLocalDate</code> are independent, therefore I would use an applicative style. Instead I was unable to figure out how to avoid using <code>bind</code>, which is from my understanding implies a monadic style.</p>\n\n<p>My questions are:</p>\n\n<ul>\n<li><p>If my understanding is correct, how can I turn this into applicative style?</p></li>\n<li><p>Are there any gross mistakes made in the implementations above? (i.e. idioms, misuse of currying)</p></li>\n</ul>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 2299, "user_id": 1596308, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/JxwHy.png?s=128&g=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/1596308/adam"}, "edited": false, "score": 0, "creation_date": 1511557907, "post_id": 47480019, "comment_id": 81914894, "body": "Ahh ok, (I listened to a talk about platform types just the other week, my brain didn&#39;t connect) I guess I applied some wishful thinking; i kinda hoped calls not matching the function would just be filtered away into the nothingness... Don&#39;t see how I can avoid the nullcheck now -.-&#39;"}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "reply_to_user": {"reputation": 2299, "user_id": 1596308, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/JxwHy.png?s=128&g=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/1596308/adam"}, "edited": false, "score": 0, "creation_date": 1511594120, "post_id": 47480019, "comment_id": 81921788, "body": "If you want do that, you could make the parameter have a nullable type and then add <code>name ?: return</code> as the first line of the function. Since parameters are essentially <code>val</code>s , it would be smart cast to the non-nullable type for the rest of the function."}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 4, "last_activity_date": 1511557623, "creation_date": 1511557623, "answer_id": 47480019, "question_id": 47479979, "link": "https://stackoverflow.com/questions/47479979/change-nullability-of-overridden-functions-parameter-in-kotlin/47480019#47480019", "title": "Change nullability of overridden function&#39;s parameter in kotlin", "body": "<p>Types coming from Java are platform types (in this case, this parameter has a type of <code>String!</code>. If the parameter is not annotated in Java, it's up to you to decide whether it can ever have a <code>null</code> value, and you have to mark the type of the parameter in Kotlin accordingly. If you mark it as non-nullable, but Java code passes <code>null</code> to it, you'll get an exception at runtime - Kotlin generates checks for parameters like this, which you can look at by decompiling the generated bytecode.</p>\n\n<p>Also see the official docs about <a href=\"https://kotlinlang.org/docs/reference/java-interop.html#null-safety-and-platform-types\" rel=\"nofollow noreferrer\">null safety and platform types</a> for more detail.</p>\n"}], "owner": {"reputation": 2299, "user_id": 1596308, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/JxwHy.png?s=128&g=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/1596308/adam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1985, "favorite_count": 0, "accepted_answer_id": 47480019, "answer_count": 1, "score": 3, "last_activity_date": 1511557623, "creation_date": 1511557391, "question_id": 47479979, "link": "https://stackoverflow.com/questions/47479979/change-nullability-of-overridden-functions-parameter-in-kotlin", "title": "Change nullability of overridden function&#39;s parameter in kotlin", "body": "<p>I am implementing an interface of a third party library(java). I am overriding a function with the following signature:</p>\n\n<pre><code>override fun onCallback(name: String?) {\n\n}\n</code></pre>\n\n<p>I can change to the following without the compiler complaining:</p>\n\n<pre><code>override fun onCallback(name: String) {\n\n}\n</code></pre>\n\n<p>What is the effect of this? What happens if the underlying library calls <code>onCallback(null)</code>?</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 2767, "user_id": 2290950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8iIm5.png?s=128&g=1", "display_name": "Viktor Yakunin", "link": "https://stackoverflow.com/users/2290950/viktor-yakunin"}, "edited": false, "score": 3, "creation_date": 1511548380, "post_id": 47478445, "comment_id": 81911774, "body": "If you can show us some code and describe a problem you faced, it might help to find a solution"}], "answers": [{"tags": [], "owner": {"reputation": 17743, "user_id": 558433, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/XZg0R.jpg?s=128&g=1", "display_name": "Marcos Vasconcelos", "link": "https://stackoverflow.com/users/558433/marcos-vasconcelos"}, "is_accepted": true, "score": 0, "last_activity_date": 1511555932, "creation_date": 1511555932, "answer_id": 47479737, "question_id": 47478445, "link": "https://stackoverflow.com/questions/47478445/android-dynamic-forms/47479737#47479737", "title": "Android dynamic forms", "body": "<p>You need the model, such:</p>\n\n<pre><code>public class Entry {\n     public String name, age, phone, email;\n}\n</code></pre>\n\n<p>You will need two screens:</p>\n\n<p>Main: a RecyclerView to hold the list and show the + button on screen and a x button on the item viewholder\nItem: layout by xml the fields of the model (Entry) you want to fill</p>\n\n<p>In Main, opens Item screen to fill a new Entry and return the new object to Main and add it to a List.</p>\n"}], "owner": {"reputation": 11, "user_id": 3241350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35c97aa990a3074797c0945f0cef678a?s=128&d=identicon&r=PG&f=1", "display_name": "user3241350", "link": "https://stackoverflow.com/users/3241350/user3241350"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 374, "favorite_count": 0, "accepted_answer_id": 47479737, "answer_count": 1, "score": -1, "last_activity_date": 1511561613, "creation_date": 1511548044, "last_edit_date": 1511561613, "question_id": 47478445, "link": "https://stackoverflow.com/questions/47478445/android-dynamic-forms", "title": "Android dynamic forms", "body": "<p>I am trying create a user input form which takes information about multiple users from a single form. Basically, each user data contains name, age, phone and email. The application user should be able to create n number of user data by clicking (+) button. When (+) is pressed same forms will be created again and app user can remove the user data by clicking (x) next each user entry.  </p>\n\n<p>How can this be done?</p>\n"}, {"tags": ["functional-programming", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 1241, "user_id": 330445, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/98913a6d084209760c6f72ab66249966?s=128&d=identicon&r=PG", "display_name": "tkr", "link": "https://stackoverflow.com/users/330445/tkr"}, "is_accepted": true, "score": 1, "last_activity_date": 1511596522, "last_edit_date": 1511596522, "creation_date": 1511596043, "answer_id": 47483730, "question_id": 47476767, "link": "https://stackoverflow.com/questions/47476767/how-can-i-make-this-function-in-a-functional-programming-way/47483730#47483730", "title": "How can i make this function in a functional programming way?", "body": "<p>Actually your function is already pure. It has no side effects.</p>\n\n<p>But you still could avoid the mutable lists by using map, <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/partition.html\" rel=\"nofollow noreferrer\">partition</a> and a <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-pair/index.html\" rel=\"nofollow noreferrer\">pair</a> destructuring declaration.</p>\n\n<p>If I replace a for loop by functional operations, I try to use multiple maps, filters, flatMaps. The nice thing about this is, that between these operations the only shared data, is the collection you pass through.</p>\n\n<pre><code>val (successList, errorsList) = offerValidateRequest.offers.map {\n    val filterRequest = OfferGetRequest(it.id, it.type)\n    val catalogs = findCatalogsWithOffers(filterRequest, channelId, tenant)\n    val errorMessages = getOfferErrorMessages(it, catalogs, filterRequest)\n    Pair(it, errorMessages)\n}.partition {\n    it.second.isEmpty()\n}\n\nreturn OfferValidateRepresentation(\n    errorsList.map { OfferValidateErrorsRepresentation(it.first.id, it.first.type, it.second.errorMessages) }, \n    successList.map { OfferValidateSuccessRepresentation(it.first.id, it.first.type) }\n )\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 7200236, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-l-8BwGpRqso/AAAAAAAAAAI/AAAAAAAAAgY/xWb4wGHPluE/photo.jpg?sz=128", "display_name": "Israel Rodrigues", "link": "https://stackoverflow.com/users/7200236/israel-rodrigues"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 47483730, "answer_count": 1, "score": -1, "last_activity_date": 1511596522, "creation_date": 1511539578, "question_id": 47476767, "link": "https://stackoverflow.com/questions/47476767/how-can-i-make-this-function-in-a-functional-programming-way", "title": "How can i make this function in a functional programming way?", "body": "<p>How would I make this function into a pure function (functional programming)?</p>\n\n<pre><code>    fun validateOffer(offerValidateRequest: OfferValidateRequest, channelId: ChannelId, tenant: Tenant): OfferValidateRepresentation {\n\n    val errorsList = mutableListOf&lt;OfferValidateErrorsRepresentation&gt;()\n    val successList = mutableListOf&lt;OfferValidateSuccessRepresentation&gt;()\n\n    offerValidateRequest.offers.forEach {\n        val filterRequest = OfferGetRequest(it.id, it.type)\n        val catalogs = findCatalogsWithOffers(filterRequest, channelId, tenant)\n        val errorMessages = getOfferErrorMessages(it, catalogs, filterRequest)\n\n        if (errorMessages.isEmpty()) {\n            successList.add(OfferValidateSuccessRepresentation(it.id, it.type))\n        } else {\n            errorsList.add(OfferValidateErrorsRepresentation(it.id, it.type, errorMessages))\n        }\n    }\n    return OfferValidateRepresentation(errorsList, successList)\n}\n</code></pre>\n\n<p>I'm not very comfortable with these iterations in the lists of errors and successes.</p>\n"}, {"tags": ["android", "firebase", "kotlin", "firebase-authentication", "firebase-security"], "comments": [{"owner": {"reputation": 1731, "user_id": 5202007, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/yOWfD.jpg?s=128&g=1", "display_name": "Mohammad Tauqir", "link": "https://stackoverflow.com/users/5202007/mohammad-tauqir"}, "edited": false, "score": 0, "creation_date": 1511519288, "post_id": 47471194, "comment_id": 81896891, "body": "see if this helps <a href=\"https://groups.google.com/forum/#!topic/firebase-talk/vDTR3sBmHKg\" rel=\"nofollow noreferrer\">groups.google.com/forum/#!topic/firebase-talk/vDTR3sBmHKg</a>"}, {"owner": {"reputation": 580, "user_id": 1935433, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/4dzc9.jpg?s=128&g=1", "display_name": "Giovanni", "link": "https://stackoverflow.com/users/1935433/giovanni"}, "reply_to_user": {"reputation": 1731, "user_id": 5202007, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/yOWfD.jpg?s=128&g=1", "display_name": "Mohammad Tauqir", "link": "https://stackoverflow.com/users/5202007/mohammad-tauqir"}, "edited": false, "score": 0, "creation_date": 1511520497, "post_id": 47471194, "comment_id": 81897597, "body": "Hi @Tauqir, thank you for your reply! Unfortunately that didn&#39;t work,  only have one project"}], "owner": {"reputation": 580, "user_id": 1935433, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/4dzc9.jpg?s=128&g=1", "display_name": "Giovanni", "link": "https://stackoverflow.com/users/1935433/giovanni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 342, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1523440621, "creation_date": 1511519101, "last_edit_date": 1523440621, "question_id": 47471194, "link": "https://stackoverflow.com/questions/47471194/kotlin-firebase-reauthenticate-google-auth-error-invalid-id-token-in-idp", "title": "Kotlin/Firebase: reauthenticate() - Google Auth ERROR (Invalid id_token in IdP)", "body": "<p>The issue I am having is with regards to re-authentication in Android (Kotlin). My goal is to delete a user account! </p>\n\n<p>I first get the current user using the following code:</p>\n\n<pre><code>val user = FirebaseAuth.getInstance().currentUser\n</code></pre>\n\n<p>From <code>user</code> I am able to get the token, the issue occurs during the reauthentication function call. </p>\n\n<p><em>At this stage, the user has already logged in. This issue is not a Google Sign In issue.</em> The code is as follows:</p>\n\n<pre><code>user.getToken(true).addOnCompleteListener { task -&gt;\n    if (task.isSuccessful) {\n        val googleIdToken = task.result.token\n        val credential = GoogleAuthProvider.getCredential(googleIdToken, null)\n        user.reauthenticate(credentials)?.addOnCompleteListener { task -&gt;\n            if (task.isSuccessful) {\n                println(\"It worked\")\n            }else {\n                println(task.exception?.localizedMessage)\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>The resulting error is: </p>\n\n<blockquote>\n  <p>An internal error has occurred. [ Invalid id_token in IdP\n  response:TOKEN_HERE*, error ]</p>\n</blockquote>\n\n<p>*The actual token is here (long string)</p>\n\n<p>Resources used: </p>\n\n<ul>\n<li><p><a href=\"https://firebase.google.com/docs/auth/android/manage-users#re-authenticate_a_user\" rel=\"nofollow noreferrer\">reauthenticate</a></p></li>\n<li><p><a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/auth/GoogleAuthProvider\" rel=\"nofollow noreferrer\">GoogleAuthProvider</a></p></li>\n<li><p><a href=\"https://firebase.google.com/docs/auth/admin/verify-id-tokens\" rel=\"nofollow noreferrer\">Verify ID Tokens</a></p></li>\n</ul>\n\n<p>The have checked the <code>google-service.json</code> and all the ID's match firebase. Any ideas?</p>\n\n<p>Thank you in advance!</p>\n"}, {"tags": ["android", "kotlin", "realm"], "comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 1, "creation_date": 1511524814, "post_id": 47471150, "comment_id": 81900092, "body": "Have you tried 0.4f instead 9f 0.4"}, {"owner": {"reputation": 6830, "user_id": 1332872, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/M03y5.jpg?s=128&g=1", "display_name": "ssuukk", "link": "https://stackoverflow.com/users/1332872/ssuukk"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1511527937, "post_id": 47471150, "comment_id": 81901930, "body": "Tired. Anyway 0.4 === 0.4f"}], "answers": [{"comments": [{"owner": {"reputation": 6830, "user_id": 1332872, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/M03y5.jpg?s=128&g=1", "display_name": "ssuukk", "link": "https://stackoverflow.com/users/1332872/ssuukk"}, "edited": false, "score": 0, "creation_date": 1511528438, "post_id": 47473605, "comment_id": 81902184, "body": "Well can&#39;t check it now. It seems it was a bug in Realm, as it fixed itself after upgrade to newest version."}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 2, "creation_date": 1511528457, "post_id": 47473605, "comment_id": 81902196, "body": "Which version to which version?"}], "tags": [], "owner": {"reputation": 2767, "user_id": 2290950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8iIm5.png?s=128&g=1", "display_name": "Viktor Yakunin", "link": "https://stackoverflow.com/users/2290950/viktor-yakunin"}, "is_accepted": false, "score": 1, "last_activity_date": 1511527448, "creation_date": 1511527448, "answer_id": 47473605, "question_id": 47471150, "link": "https://stackoverflow.com/questions/47471150/float-is-invalid-field-for-realm-comparison/47473605#47473605", "title": "Float is invalid field for Realm comparison", "body": "<p>In your case <code>height-0.4</code> results in <strong>Double</strong> type, that is what <code>between(\"value\",height-0.4,height+0.4)</code> expects, if you take closer look you will see that <code>between</code> function require value to be double, because 2nd and 3rd params are double.\nSimple example to prove this:</p>\n\n<pre><code>    private fun test(height: Float) {\n        check(height, height - 0.4)\n    }\n\n    private fun check(f1: Float, f2: Float) {\n    }\n</code></pre>\n\n<p>to keep it <strong>Float</strong> you need to make it <code>0.4F</code> (or less preferred <code>0.4.toFloat()</code>)</p>\n"}], "owner": {"reputation": 6830, "user_id": 1332872, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/M03y5.jpg?s=128&g=1", "display_name": "ssuukk", "link": "https://stackoverflow.com/users/1332872/ssuukk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1511527448, "creation_date": 1511518934, "question_id": 47471150, "link": "https://stackoverflow.com/questions/47471150/float-is-invalid-field-for-realm-comparison", "title": "Float is invalid field for Realm comparison", "body": "<p>I have a very simple class in Realm:</p>\n\n<pre><code>@RealmClass\nopen class MethanolTest  (\n    @PrimaryKey\n    var substance: String = \"\",\n    var value: Float = 0f,\n    var _id: Long = 0\n): RealmModel\n</code></pre>\n\n<p>Now I want to find a <code>value</code> that lies within some tolerance:</p>\n\n<pre><code>fun findSubstancesInMethanolTest(height : Float) =\n        KRealm.select&lt;MethanolTest&gt; {\n            it\n                    .between(\"value\",height-0.4,height+0.4)\n        }\n</code></pre>\n\n<p>It compiles ok, but at runtime fails with:</p>\n\n<pre><code>java.lang.IllegalArgumentException: Invalid query: field 'value' in class 'MethanolTest' is of invalid type 'FLOAT'.\n</code></pre>\n\n<p>Well, it IS float! And this float can be queried in different places without this exception. It seems only comparison fails.</p>\n\n<p>So what's wrong here?!</p>\n"}, {"tags": ["continuous-integration", "kotlin", "code-coverage"], "comments": [{"owner": {"reputation": 1256, "user_id": 4649515, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vrUpQ.jpg?s=128&g=1", "display_name": "jitinsharma", "link": "https://stackoverflow.com/users/4649515/jitinsharma"}, "edited": false, "score": 0, "creation_date": 1511517490, "post_id": 47470492, "comment_id": 81895724, "body": "I believe development is happening on various plugins/tools for this. Meanwhile check this: <a href=\"https://discuss.kotlinlang.org/t/gradle-code-coverage-report/390\" rel=\"nofollow noreferrer\">discuss.kotlinlang.org/t/gradle-code-coverage-report/390</a>"}], "answers": [{"comments": [{"owner": {"reputation": 9549, "user_id": 317522, "user_type": "registered", "accept_rate": 11, "profile_image": "https://i.stack.imgur.com/y7DXx.jpg?s=128&g=1", "display_name": "Paulo Merson", "link": "https://stackoverflow.com/users/317522/paulo-merson"}, "edited": false, "score": 2, "creation_date": 1542036972, "post_id": 47490468, "comment_id": 93414882, "body": "JaCoCo incorrectly marks some lines as &quot;partially covered by tests&quot;. See <a href=\"https://stackoverflow.com/questions/45525279/how-to-avoid-partial-coverage-with-lateinit-fields-in-kotlin\" title=\"how to avoid partial coverage with lateinit fields in kotlin\">stackoverflow.com/questions/45525279/&hellip;</a>"}], "tags": [], "owner": {"reputation": 15891, "user_id": 5382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s3eFh.jpg?s=128&g=1", "display_name": "Mikezx6r", "link": "https://stackoverflow.com/users/5382/mikezx6r"}, "is_accepted": false, "score": 2, "last_activity_date": 1511643537, "creation_date": 1511643537, "answer_id": 47490468, "question_id": 47470492, "link": "https://stackoverflow.com/questions/47470492/kotlin-code-coverage-in-ci-pipeline/47490468#47490468", "title": "Kotlin code coverage in CI pipeline", "body": "<p>The Jacoco plugin works fine for coverage of Kotlin code. Configure Jacoco the same as you would for Java.</p>\n\n<p><a href=\"https://docs.gradle.org/current/userguide/jacoco_plugin.html\" rel=\"nofollow noreferrer\">https://docs.gradle.org/current/userguide/jacoco_plugin.html</a></p>\n"}], "owner": {"reputation": 49, "user_id": 7262688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/333b7a7a960c2f19bfbf6bb2d68b6dee?s=128&d=identicon&r=PG&f=1", "display_name": "Shamus Harkin", "link": "https://stackoverflow.com/users/7262688/shamus-harkin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1955, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1511643537, "creation_date": 1511516898, "question_id": 47470492, "link": "https://stackoverflow.com/questions/47470492/kotlin-code-coverage-in-ci-pipeline", "title": "Kotlin code coverage in CI pipeline", "body": "<p>Interested to find code coverage tools for kotlin that work well in a CI pipeline.  use intellij built in code coverage but cant use this in CI. Thanks</p>\n"}, {"tags": ["java", "android", "crash", "kotlin", "crashlytics"], "comments": [{"owner": {"reputation": 681, "user_id": 7557205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e84f3a9c7d5d14ef29e3394928a244e?s=128&d=identicon&r=PG&f=1", "display_name": "Aswin P Ashok", "link": "https://stackoverflow.com/users/7557205/aswin-p-ashok"}, "edited": false, "score": 0, "creation_date": 1511516911, "post_id": 47470323, "comment_id": 81895378, "body": "Take a look at <a href=\"https://stackoverflow.com/questions/47250787/android-support-library-27-fragment-update\">this</a>"}], "answers": [{"tags": [], "owner": {"reputation": 632, "user_id": 7341528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ddee6302cbca0f95b323769671827d1?s=128&d=identicon&r=PG&f=1", "display_name": "Vova Stelmashchuk", "link": "https://stackoverflow.com/users/7341528/vova-stelmashchuk"}, "is_accepted": false, "score": 0, "last_activity_date": 1511537883, "creation_date": 1511537883, "answer_id": 47476392, "question_id": 47470323, "link": "https://stackoverflow.com/questions/47470323/context-null-getting-npes-all-of-a-sudden-after-moving-to-api-27/47476392#47476392", "title": "Context null , getting NPEs all of a sudden after moving to API 27", "body": "<p>You can use <code>!!</code>, for fix this.\nBut the best solution, will use <code>?</code> and <code>?.let</code> for null safety.</p>\n"}], "owner": {"reputation": 81, "user_id": 9002862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc16d45e5d8f3ac37ec83866a4a94d70?s=128&d=identicon&r=PG&f=1", "display_name": "Sid G", "link": "https://stackoverflow.com/users/9002862/sid-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1511537883, "creation_date": 1511516375, "question_id": 47470323, "link": "https://stackoverflow.com/questions/47470323/context-null-getting-npes-all-of-a-sudden-after-moving-to-api-27", "title": "Context null , getting NPEs all of a sudden after moving to API 27", "body": "<p>After upgrading to API 27 , I am seeing crashes of context being null in various places not seen before on Crashlytics.\nHas something changed ? \nHow to fix this ?</p>\n"}]