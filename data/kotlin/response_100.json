[{"tags": ["java", "kotlin", "java-interop", "synthetic"], "comments": [{"owner": {"reputation": 4447, "user_id": 3050249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz2yy.jpg?s=128&g=1", "display_name": "Miha_x64", "link": "https://stackoverflow.com/users/3050249/miha-x64"}, "edited": false, "score": 1, "creation_date": 1529262640, "post_id": 41022275, "comment_id": 88799197, "body": "I use it to hide declarations from Java, especially for those which are <code>@PublishedApi internal</code>, i. e. accessible in inline functions."}], "answers": [{"comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 2, "creation_date": 1481192525, "post_id": 41025167, "comment_id": 69281379, "body": "Well, I agree it looks like a dangerous tool that needs careful handling, but still it&#39;s a part of <code>kotlin-stdlib</code>, it&#39;s a public API. It makes me think there should be use cases for <code>@JvmSynthetic</code> which an ordinary developer (or maybe  a library/tools developer) may encounter. Also, <code>synthetic</code> methods are used broader by <code>javac</code> then just for nested classses: at least for overriding a method with a different signature (including generic methods overridden with non-generic ones)."}], "tags": [], "owner": {"reputation": 214, "user_id": 3061175, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AIPUw.jpg?s=128&g=1", "display_name": "nexbit", "link": "https://stackoverflow.com/users/3061175/nexbit"}, "is_accepted": false, "score": 12, "last_activity_date": 1481136833, "creation_date": 1481136833, "answer_id": 41025167, "question_id": 41022275, "link": "https://stackoverflow.com/questions/41022275/whats-the-intended-use-of-jvmsynthetic-in-kotlin/41025167#41025167", "title": "What&#39;s the intended use of @JvmSynthetic in Kotlin?", "body": "<p>In plain Java, <code>synthetic</code> methods are generated by the <code>javac</code> compiler. Normally the compiler must create synthetic methods on nested classes, when fields specified with the private modifier are accessed by the enclosing class.</p>\n\n<p>Given the following class in java:</p>\n\n<pre><code>public final class SyntheticSample\n{\n    public static void main(final String[] args)\n    {\n        SyntheticSample.Nested nested = new SyntheticSample.Nested();\n        out.println(\"String: \" + nested.syntheticString);\n    }\n\n    private static final class Nested\n    {\n        private String syntheticString = \"I'll become a method!\";\n    }\n}\n</code></pre>\n\n<p>when the <code>SyntheticSample</code> class accesses the <code>nested.syntheticString</code> field, it is indeed calling a static <code>synthetic</code> method generated by the compiler (named something like <code>access$100</code>).</p>\n\n<p>Even if Kotlin exposes a <code>@JvmSynthetic</code> annotation that is able to \"force\" the creation of synthetic methods, I advice to not using it in normal \"user\" code. Synthetic methods are low-level tricks made by the compiler, and we should never rely on such things in everyday code. I think it's there to support other parts of the standard library, but you should ask the JetBrains guys directly if you're curious (try on the official <a href=\"https://discuss.kotlinlang.org/\" rel=\"noreferrer\">Kotlin Discussion Forum</a>)</p>\n"}, {"tags": [], "owner": {"reputation": 4438, "user_id": 5427663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f9c9fe9199349793db217d3a9e9596?s=128&d=identicon&r=PG&f=1", "display_name": "TheOperator", "link": "https://stackoverflow.com/users/5427663/theoperator"}, "is_accepted": true, "score": 5, "last_activity_date": 1537362353, "last_edit_date": 1592644375, "creation_date": 1537362353, "answer_id": 52406574, "question_id": 41022275, "link": "https://stackoverflow.com/questions/41022275/whats-the-intended-use-of-jvmsynthetic-in-kotlin/52406574#52406574", "title": "What&#39;s the intended use of @JvmSynthetic in Kotlin?", "body": "<p>First, to answer what synthetic methods actually <em>are</em>, let's have a look at the <a href=\"https://docs.oracle.com/javase/specs/jls/se10/html/jls-13.html#jls-13.1\" rel=\"noreferrer\">Java language specification</a>:</p>\n<blockquote>\n<p><strong>11.</strong> A construct emitted by a Java compiler must be marked as <em>synthetic</em> if it does not correspond to a construct declared explicitly or implicitly in source code, unless the emitted construct is a class initialization method (JVMS \u00a72.9).</p>\n</blockquote>\n<p>The <code>@JvmSynthetic</code> annotation does exactly that: prevent access from source code. The method will still appear in reflection and is then marked as synthetic.</p>\n<p>More precisely, from <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/-jvm-synthetic/\" rel=\"noreferrer\">the Kotlin documentation</a> (emphasis mine):</p>\n<blockquote>\n<h3><code>@JvmSynthetic</code></h3>\n<p>Sets <code>ACC_SYNTHETIC</code> flag on the annotated target in the Java bytecode.</p>\n<p><strong>Synthetic targets become inaccessible for Java sources at compile time while still being accessible for Kotlin sources.</strong> Marking target as synthetic is a binary compatible change, already compiled Java code will be able to access such target.</p>\n<p>This annotation is intended for <em>rare</em> cases when API designer needs to hide Kotlin-specific target from Java API while keeping it a part of Kotlin API so the resulting API is idiomatic for both.</p>\n</blockquote>\n<p>As described in the last paragraph, <code>@JvmSynthetic</code> is a tool for API design, which lets a library writer avoid automatic generation of Java equivalents. Probably the most popular use cases are Kotlin-only features, such as operator overloading, <code>componentN()</code> methods or properties, which may have a more idiomatic way to be exposed in Java.</p>\n<p>It is noteworthy that the target of this annotations are property setters/getters, functions and fields -- basically everything that translates in Java to a method.</p>\n<pre><code>@Target([\n    AnnotationTarget.FUNCTION,\n    AnnotationTarget.PROPERTY_GETTER,\n    AnnotationTarget.PROPERTY_SETTER,\n    AnnotationTarget.FIELD])\nannotation actual class JvmSynthetic\n</code></pre>\n"}], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2359, "favorite_count": 0, "accepted_answer_id": 52406574, "answer_count": 2, "score": 20, "last_activity_date": 1561035284, "creation_date": 1481127326, "last_edit_date": 1561035284, "question_id": 41022275, "link": "https://stackoverflow.com/questions/41022275/whats-the-intended-use-of-jvmsynthetic-in-kotlin", "title": "What&#39;s the intended use of @JvmSynthetic in Kotlin?", "body": "<p>I have come across the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/-jvm-synthetic/index.html\" rel=\"nofollow noreferrer\"><code>@JvmSynthetic</code></a> annotation in kotlin-stdlib, and I'm wondering what it is for, but, unfortunately, it is undocumented. (UPD: it was at that moment)</p>\n\n<p>As far as I understand, applying it to a program element will add the <code>synthetic</code> modifier to the corresponding bytecode elements. As a consequence, the element becomes invisible from Java:</p>\n\n<pre><code>class MyClass {\n    @JvmSynthetic\n    fun f() { }\n}\n</code></pre>\n\n<p>Somewhere in Java code:</p>\n\n<pre><code>MyClass c = new MyClass();\nc.f() // Error: cannot resolve method f()\n</code></pre>\n\n<p>But the same elements are still visible in Kotlin code:</p>\n\n<pre><code>val c = MyClass()\nc.f() // OK\n</code></pre>\n\n<p>Is hiding declarations from non-Kotlin sources a valid use of <code>@JvmSynthetic</code>? Is it the intended use? What are the other appropriate use cases?</p>\n\n<p>Since <code>@JvmSynthetic</code> hides functions from Java, they cannot be overridden in Java either (and when it comes to an <code>abstract</code> member, the calls then result into <code>AbstractMethodError</code>). Given that, can I use <code>@JvmSynthetic</code> to prohibit overriding members of a Kotlin class in Java sources?</p>\n"}, {"tags": ["android", "kotlin", "anko"], "answers": [{"comments": [{"owner": {"reputation": 13134, "user_id": 5115932, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/TUPjU.jpg?s=128&g=1", "display_name": "Bryan", "link": "https://stackoverflow.com/users/5115932/bryan"}, "edited": false, "score": 1, "creation_date": 1481133031, "post_id": 41021702, "comment_id": 69255336, "body": "I did come across this as well; but I did notice one significant drawback. If, for example, you wanted a reusable portion of a layout (the <code>&lt;include&gt;</code> tag in XML), from what I understand, you must create a separate <code>AnkoComponent</code>, and use it as a view in the other component. In this case, each <code>View</code> member would be attached to the component it resides within; instead of the entire view. In this case, you would have to use say <code>mainUI.toolbarUI.toolbar</code> to access a reused view; whereas <code>find()</code> can access any view within the hierarchy."}], "tags": [], "owner": {"reputation": 471, "user_id": 1905534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6f03644e3ffd2de983e7787268c16a9?s=128&d=identicon&r=PG", "display_name": "Jacob", "link": "https://stackoverflow.com/users/1905534/jacob"}, "is_accepted": false, "score": 9, "last_activity_date": 1481125646, "creation_date": 1481125646, "answer_id": 41021702, "question_id": 41020345, "link": "https://stackoverflow.com/questions/41020345/accessing-views-from-the-activity-with-anko/41021702#41021702", "title": "Accessing views from the Activity with Anko", "body": "<p>So, why still use <code>XML id</code> to locate the View? since we already use the Anko instead of the XML.</p>\n\n<p>In my opinion, we can store the view elements inside the <code>AnkoComponent</code> instead of the <code>find view</code>'s id method. Check the code blow:</p>\n\n<pre><code>class MainActivityUI : AnkoComponent&lt;MainActivity&gt; {\n\n    lateinit var txtView: TextView\n\n    override fun createView(ui: AnkoContext&lt;MainActivity&gt;) = with(ui) {\n        frameLayout {\n            txtView = textView {\n                id = R.id.text // the id here is useless, we can delete this line.\n            }\n        }\n    }\n\n}\n\nclass MainActivity : AppCompatActivity() {\n\n    lateinit var mainUI : MainActivityUI\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n\n        mainUI = MainActivityUI()\n        mainUI.setContentView(this)\n\n        mainUI.txtView.text = \"Hello World\"\n    }\n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13134, "user_id": 5115932, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/TUPjU.jpg?s=128&g=1", "display_name": "Bryan", "link": "https://stackoverflow.com/users/5115932/bryan"}, "edited": false, "score": 0, "creation_date": 1481131882, "post_id": 41023177, "comment_id": 69254599, "body": "I do know about Kotlin Android Extensions; but as I mentioned in my question, the <i>Supporting Existing Code</i> section of the README seems to suggest that both of these methods (Kotlin Android Extensions and the <code>find</code> function) are only necessary when supporting XML code."}, {"owner": {"reputation": 10692, "user_id": 7101554, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/YgL1x.jpg?s=128&g=1", "display_name": "Leandro Borges Ferreira", "link": "https://stackoverflow.com/users/7101554/leandro-borges-ferreira"}, "reply_to_user": {"reputation": 13134, "user_id": 5115932, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/TUPjU.jpg?s=128&g=1", "display_name": "Bryan", "link": "https://stackoverflow.com/users/5115932/bryan"}, "edited": false, "score": 0, "creation_date": 1481133383, "post_id": 41023177, "comment_id": 69255543, "body": "Sorry. My bad. Check the edited answer. Maybe it helps"}, {"owner": {"reputation": 13134, "user_id": 5115932, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/TUPjU.jpg?s=128&g=1", "display_name": "Bryan", "link": "https://stackoverflow.com/users/5115932/bryan"}, "edited": false, "score": 0, "creation_date": 1481138658, "post_id": 41023177, "comment_id": 69258551, "body": "I know Anko also makes it easy to add a listener for a UI event, such as a click or a seek bar change; but what if the event is not a UI event? As a simple example, how would you use this to set the text in a <code>TextView</code> based on a dynamic value (i.e. something from a database or a network result) rather than a static one?"}, {"owner": {"reputation": 10692, "user_id": 7101554, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/YgL1x.jpg?s=128&g=1", "display_name": "Leandro Borges Ferreira", "link": "https://stackoverflow.com/users/7101554/leandro-borges-ferreira"}, "reply_to_user": {"reputation": 13134, "user_id": 5115932, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/TUPjU.jpg?s=128&g=1", "display_name": "Bryan", "link": "https://stackoverflow.com/users/5115932/bryan"}, "edited": false, "score": 1, "creation_date": 1481141201, "post_id": 41023177, "comment_id": 69260017, "body": "You should only add code for UI events in Anko, otherwise you are going to mix the view and the control layer and the project is going to be a mess.  But, yes, you can change the text of a TextView (or any other UI element) based on a dynamic value. Check my edited answer for an exemple."}, {"owner": {"reputation": 13134, "user_id": 5115932, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/TUPjU.jpg?s=128&g=1", "display_name": "Bryan", "link": "https://stackoverflow.com/users/5115932/bryan"}, "edited": false, "score": 0, "creation_date": 1481213859, "post_id": 41023177, "comment_id": 69295674, "body": "I don&#39;t think this solution really solves the issue. You cannot expect that a view should <i>only</i> be updated when it is clicked on. What if the view needs to be refreshed by a network call as soon as the application is opened? In this case you cannot call <code>doSomething()</code>, because you do not have a reference to the <code>TextView</code>. Or an even simpler example; how would you call <code>doSomething()</code> from another view (such as a <code>SwipeRefreshLayout</code>)?"}, {"owner": {"reputation": 13134, "user_id": 5115932, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/TUPjU.jpg?s=128&g=1", "display_name": "Bryan", "link": "https://stackoverflow.com/users/5115932/bryan"}, "edited": false, "score": 0, "creation_date": 1481214319, "post_id": 41023177, "comment_id": 69295973, "body": "And the <code>networkFeedback</code> function essentially raises the same issue as the answer by @Jacob."}, {"owner": {"reputation": 10692, "user_id": 7101554, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/YgL1x.jpg?s=128&g=1", "display_name": "Leandro Borges Ferreira", "link": "https://stackoverflow.com/users/7101554/leandro-borges-ferreira"}, "reply_to_user": {"reputation": 13134, "user_id": 5115932, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/TUPjU.jpg?s=128&g=1", "display_name": "Bryan", "link": "https://stackoverflow.com/users/5115932/bryan"}, "edited": false, "score": 0, "creation_date": 1481313104, "post_id": 41023177, "comment_id": 69342747, "body": "I am not assuming that a view is only updated when it is clicked on, you can see that in the method networkFeedback. I think it solves the issue in the @Jacob answer. You don&#39;t need to access view inside view like: LinearLayout.RelativeLayout.CardView.TextView.... All you have to do is call a method like: updateThatTextViewInsideCardView() (Not exactly with this name hahaha) for you UI feedback. With this logic you can call doSomething() inside another view. If you separate all the view logic in the AnkoComponents, your MVC architecture is going to get a lot better (smaller controllers)."}, {"owner": {"reputation": 13134, "user_id": 5115932, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/TUPjU.jpg?s=128&g=1", "display_name": "Bryan", "link": "https://stackoverflow.com/users/5115932/bryan"}, "edited": false, "score": 0, "creation_date": 1481316301, "post_id": 41023177, "comment_id": 69344391, "body": "I don&#39;t think you understood my comment; <code>mainUI</code> and <code>toolbarUI</code> are not separate <i>views</i> they are each a separate <code>AnkoComponent</code>. The purpose of this would be to create a single <code>ToolbarUI</code> component that you can reuse in multiple components. In this case, to access the toolbar (or a function referencing the toolbar), you would have to either call <code>mainUI.toolbarUI.toolbar</code> <i>or</i> add a function in the <code>mainUI</code> class that references the <code>toolbar</code> from its <code>ToolbarUI</code>; such as <code>mainUI.getToolbar()</code>. But this is just unnecessary boilerplate that using an <code>id</code> avoids."}], "tags": [], "owner": {"reputation": 10692, "user_id": 7101554, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/YgL1x.jpg?s=128&g=1", "display_name": "Leandro Borges Ferreira", "link": "https://stackoverflow.com/users/7101554/leandro-borges-ferreira"}, "is_accepted": false, "score": 1, "last_activity_date": 1481149003, "last_edit_date": 1481149003, "creation_date": 1481129876, "answer_id": 41023177, "question_id": 41020345, "link": "https://stackoverflow.com/questions/41020345/accessing-views-from-the-activity-with-anko/41023177#41023177", "title": "Accessing views from the Activity with Anko", "body": "<p>I believe that, as you can add behavior to your Anko files, you don't have to instantiate your views in the activity at all. </p>\n\n<p>That can be really cool, because you can separate the view layer even more. All the code that acts in your views can be inserted in the Anko files. So all you have to do is to call your activity's methods from the Anko and not instantiate any view. </p>\n\n<p>But if you need to instantiate any view... you can use Kotlin Android Extensions in your activity.</p>\n\n<p>Exemple: </p>\n\n<p>Code in your activity:</p>\n\n<pre><code>seekBar.setOnSeekBarChangeListener(object: OnSeekBarChangeListener {\n    override fun onProgressChanged(seekBar: SeekBar, progress: Int, fromUser: Boolean) {\n        // Something\n    }\n    override fun onStartTrackingTouch(seekBar: SeekBar?) {\n        // Just an empty method\n    }\n    override fun onStopTrackingTouch(seekBar: SeekBar) {\n        // Another empty method\n    }\n})\n</code></pre>\n\n<p>Code in Anko:</p>\n\n<pre><code>seekBar {\n    onSeekBarChangeListener {\n        onProgressChanged { seekBar, progress, fromUser -&gt;\n            // Something\n        }\n    }\n}\n</code></pre>\n\n<p>Now the code is in AnkoComponent. No need to instantiate the view.</p>\n\n<p><strong>Conclusion:</strong></p>\n\n<p>It's a more 'Anko' way to program if you put all your view logic in the AnkoComponents, not in your activities. </p>\n\n<p><strong>Edit:</strong></p>\n\n<p>As an exemple of a code where you don't have to instantiate a view:</p>\n\n<p>In your Anko:</p>\n\n<pre><code>var networkFeedback : TextView = null\n\n    override fun createView(ui: AnkoContext&lt;MainActivity&gt;) = with(ui) {\n            frameLayout {\n                textView {\n                    id = R.id.text2\n                    networkFeedback = this\n                    onClick {\n                        ui.owner.doSomething(2, this)\n                    }\n                }\n            }\n        }\n\nfun networkFeedback(text: String){\n       networkFeedback.text = text\n}\n</code></pre>\n\n<p>In your activity:</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\n    overriding fun onCreate{\n            [...]\n            val mainUi = AnkoUi()\n            // some dynamic task...\n            mainUi.networkFeedback(\"lalala\")\n     }\n\n    fun doSomething(number: Int, callback: TextView){\n            //Some network or database task goes here!\n\n            //And then, if the operation was successful\n\n            callback.text = \"Something has changed...\"\n        }\n</code></pre>\n\n<p>This is a very different approach. I'm not so sure if I like it or not, but this is a whole different discussion...</p>\n"}, {"comments": [{"owner": {"reputation": 1066, "user_id": 220287, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/eed77f1d0ab0049cefed29820fb5ee9e?s=128&d=identicon&r=PG", "display_name": "StephenT", "link": "https://stackoverflow.com/users/220287/stephent"}, "edited": false, "score": 0, "creation_date": 1570051916, "post_id": 46727886, "comment_id": 102796934, "body": "\ud83d\ude4f for showing use of <code>owner</code>. After 5 hours of reading about Anko (and admittedly being a Kotlin newbie), this is the very first mention of it I&#39;ve found."}], "tags": [], "owner": {"reputation": 730, "user_id": 4989585, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/MCYMQ.jpg?s=128&g=1", "display_name": "Almaz", "link": "https://stackoverflow.com/users/4989585/almaz"}, "is_accepted": false, "score": 3, "last_activity_date": 1507960944, "last_edit_date": 1507960944, "creation_date": 1507890810, "answer_id": 46727886, "question_id": 41020345, "link": "https://stackoverflow.com/questions/41020345/accessing-views-from-the-activity-with-anko/46727886#46727886", "title": "Accessing views from the Activity with Anko", "body": "<p>Do not use <b>id</b> to identify views with Anko DSL! It is unnecessary and useless because Anko was designed to get rid off XML layouts. Instead use this pattern:</p>\n\n<pre><code>class ActivityMain : AppCompatActivity() {\n\n    var mTextView: TextView  // put it here to be accessible everywhere\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        ActivityMainUI().setContentView(this)\n    }\n\n    fun yourClassMethod() {\n        // So this is am example how to get the textView \n        // defined in your Anko DSL class (not by id!):\n        mTextView.text = \"bla-bla-bla\"  \n    }\n\n}\n\nclass ActivityMainUI : AnkoComponent&lt;ActivityMain&gt; {\n\n    override fun createView(ui: AnkoContext&lt;ActivityMain&gt;) = with(ui) {\n\n        // your fancy interface with Anko DSL:\n        verticalLayout {\n            owner.mTextView = textView\n        }\n    }\n}\n</code></pre>\n\n<p>Please note the UI class definition:</p>\n\n<pre><code>class ActivityMainUI : AnkoComponent&lt;ActivityMain&gt; {\n</code></pre>\n\n<p>If you put there your activity class name in brackets then all its public variables become accessible via <b>owner</b> in UI class body so you can assing them there.<br>\nBut you may put <b>AppCompatActivity</b> easily and make some universal class which might be cloned. In this case use <b>lateinit var mTextView :\n TextView</b> in the body of UI class as described in Jacob's answer here.</p>\n"}, {"tags": [], "owner": {"reputation": 86, "user_id": 8485264, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-96Cvok-ljT4/AAAAAAAAAAI/AAAAAAAAHOE/hDaNNsIgNnY/photo.jpg?sz=128", "display_name": "Duane", "link": "https://stackoverflow.com/users/8485264/duane"}, "is_accepted": false, "score": 1, "last_activity_date": 1530814917, "creation_date": 1530814917, "answer_id": 51197704, "question_id": 41020345, "link": "https://stackoverflow.com/questions/41020345/accessing-views-from-the-activity-with-anko/51197704#51197704", "title": "Accessing views from the Activity with Anko", "body": "<p>To generalize the question a bit: How can one make an AnkoComponent that is encapsulated, can be used from the DSL and can have its data programmatically set after creation?</p>\n\n<p>Here is how I did it using the View.tag:</p>\n\n<pre><code>class MyComponent: AnkoComponent&lt;Context&gt; {\n    lateinit var innerds: TextView\n    override fun createView(ui: AnkoContext&lt;Context&gt;): View {\n        val field = with(ui) {\n            linearLayout {\n                innerds = complexView(\"hi\")\n            }\n        }\n        field.setTag(this) // store the component in the View\n        return field\n    }\n\n    fun setData(o:SomeObject) { innerds.setStuff(o.getStuff()) }\n}\n\ninline fun ViewManager.myComponent(theme: Int = 0) = myComponent(theme) {}\ninline fun ViewManager.myComponent(theme: Int = 0, init: MyComponent.() -&gt; Unit) = \n    ankoView({ MyComponent(it) }, theme, init)\n\n// And then you can use it anywhere the Anko DSL is used.\nclass SomeUser : AnkoComponent&lt;Context&gt;\n{\n    lateinit var instance:View \n    override fun createView(ui: AnkoContext&lt;Context&gt;): View {\n        linearLayout {\n            instance = myComponent {}\n        }\n    }\n    fun onDataChange(o:SomeObject) {\n        (instance.Tag as MyComponent).setData(o)\n    }\n}\n</code></pre>\n\n<p>}</p>\n"}], "owner": {"reputation": 13134, "user_id": 5115932, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/TUPjU.jpg?s=128&g=1", "display_name": "Bryan", "link": "https://stackoverflow.com/users/5115932/bryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3643, "favorite_count": 3, "answer_count": 4, "score": 6, "last_activity_date": 1530814917, "creation_date": 1481121775, "last_edit_date": 1481138934, "question_id": 41020345, "link": "https://stackoverflow.com/questions/41020345/accessing-views-from-the-activity-with-anko", "title": "Accessing views from the Activity with Anko", "body": "<p>I know I can use an <code>id</code> attribute with Anko to identify a view:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>class MainActivityUI : AnkoComponent&lt;MainActivity&gt; {\n\n    override fun createView(ui: AnkoContext&lt;MainActivity&gt;) = with(ui) {\n        frameLayout {\n            textView {\n                id = R.id.text\n            }\n        }\n    }\n\n}\n</code></pre>\n\n<p>Then obtain it in the <code>Activity</code> using the <code>find()</code> function (or by using Kotlin Android Extensions):</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\n    private val textView by lazy {\n        find&lt;TextView&gt;(R.id.text)\n    }\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        MainActivityUI().setContentView(this)\n\n        textView.text = \"Hello World\"\n    }\n\n}\n</code></pre>\n\n<p>But I feel like I am missing something; the only place the <a href=\"https://github.com/Kotlin/anko/blob/master/README.md\" rel=\"noreferrer\">README</a> mentions the <code>find</code> function or Kotlin Android Extensions is in the section titled <em>Supporting Existing Code</em>:</p>\n\n<blockquote>\n  <p>You don't have to rewrite all your UI with Anko. You can keep your old\n  classes written in Java. Moreover, if you still want (or have) to\n  write a Kotlin activity class and inflate an XML layout for some\n  reason, you can use View properties, which would make things easier:</p>\n\n<pre><code>// Same as findViewById(), simpler to use\nval name = find&lt;TextView&gt;(R.id.name)\nname.hint = \"Enter your name\"\nname.onClick { /*do something*/ }\n</code></pre>\n  \n  <p>You can make your code even more compact by using Kotlin Android\n  Extensions.</p>\n</blockquote>\n\n<p>Which makes it seem like the <code>find</code> function is only meant for supporting \"old\" XML code.</p>\n\n<p>So my question is this; is using an <code>id</code> along with the <code>find</code> function the correct way of accessing a <code>View</code> from the <code>Activity</code> using Anko? Is there a more \"Anko\" way of handling this? Or am I missing some other benefit of Anko that makes accessing the <code>View</code> from the <code>Activity</code> irrelevant?</p>\n\n<hr>\n\n<p>And a second related question; if this <em>is</em> the correct way of accessing a <code>View</code> from the <code>Activity</code>, is there a way of creating an <code>id</code> resource (i.e. <code>\"@+id/\"</code>) from within an <code>AnkoComponent</code>? Rather than creating each <code>id</code> in the <code>ids.xml</code> file.</p>\n"}, {"tags": ["intellij-idea", "kotlin", "intellij-plugin"], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 2, "last_activity_date": 1481123040, "creation_date": 1481123040, "answer_id": 41020817, "question_id": 41019865, "link": "https://stackoverflow.com/questions/41019865/intellij-idea-plugin-development-action-create-kotlin-class/41020817#41020817", "title": "Intellij IDEA plugin development. Action &quot;create kotlin class&quot;", "body": "<p>One possible way to accomplish this is to use <code>PsiFileFactory.createFileFromText()</code> to create an in-memory Kotlin file and then to pass that file as a parameter to <code>PsiDirectory.add()</code> to save it to the filesystem.</p>\n"}, {"comments": [{"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1481197276, "post_id": 41038581, "comment_id": 69284420, "body": "Please don&#39;t use PsiDirectoryFactory.createDirectory(); it&#39;s not intended to be used by plugin code. The correct way to get a directory for a virtual file is PsiManager.findDirectory()."}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1481212433, "post_id": 41038581, "comment_id": 69294701, "body": "It skips a lot of checks and always returns a new PsiDirectory instance instead of the existing one. To avoid confusion, could you please edit your answer and remove the mention of this method entirely? Thanks!"}, {"owner": {"reputation": 1128, "user_id": 4710549, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh6.googleusercontent.com/-4wgiZ21V-s4/AAAAAAAAAAI/AAAAAAAAADI/q8hYvoEldtU/photo.jpg?sz=128", "display_name": "\u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440 \u0428\u0438\u0440\u043e\u043a\u043e\u0432", "link": "https://stackoverflow.com/users/4710549/%d0%92%d0%bb%d0%b0%d0%b4%d0%b8%d0%bc%d0%b8%d1%80-%d0%a8%d0%b8%d1%80%d0%be%d0%ba%d0%be%d0%b2"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1481213997, "post_id": 41038581, "comment_id": 69295754, "body": "Ok. Thanks for explanation!"}], "tags": [], "owner": {"reputation": 1128, "user_id": 4710549, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh6.googleusercontent.com/-4wgiZ21V-s4/AAAAAAAAAAI/AAAAAAAAADI/q8hYvoEldtU/photo.jpg?sz=128", "display_name": "\u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440 \u0428\u0438\u0440\u043e\u043a\u043e\u0432", "link": "https://stackoverflow.com/users/4710549/%d0%92%d0%bb%d0%b0%d0%b4%d0%b8%d0%bc%d0%b8%d1%80-%d0%a8%d0%b8%d1%80%d0%be%d0%ba%d0%be%d0%b2"}, "is_accepted": false, "score": 1, "last_activity_date": 1481213930, "last_edit_date": 1481213930, "creation_date": 1481197168, "answer_id": 41038581, "question_id": 41019865, "link": "https://stackoverflow.com/questions/41019865/intellij-idea-plugin-development-action-create-kotlin-class/41038581#41038581", "title": "Intellij IDEA plugin development. Action &quot;create kotlin class&quot;", "body": "<p>Although yole's answer is correct, I would like to see more details about mistery PsiDirectory class.</p>\n\n<pre><code>//get directory by VirtualFile\nPsiDirectory directory = PsiManager.getInstance(project).findDirectory((getKotlinSourceDir(project))\n</code></pre>\n\n<p>Get kotlin source dir:</p>\n\n<pre><code>private VirtualFile getKotlinSourceDir(Project project) {\n    return project.getBaseDir().findChild(\"src\").findChild(\"main\").findChild(\"kotlin\");\n}\n</code></pre>\n\n<p>And than you can create subdirectories:</p>\n\n<pre><code>//someDirectoryName it is simple name \n//(i.e if you post \"com.some.package\" - it does not create com/some/package folder)\nPsiDirectory newDirectory = psiDirectory.createSubdirectory(someDirectoryName);\n</code></pre>\n"}], "owner": {"reputation": 1128, "user_id": 4710549, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh6.googleusercontent.com/-4wgiZ21V-s4/AAAAAAAAAAI/AAAAAAAAADI/q8hYvoEldtU/photo.jpg?sz=128", "display_name": "\u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440 \u0428\u0438\u0440\u043e\u043a\u043e\u0432", "link": "https://stackoverflow.com/users/4710549/%d0%92%d0%bb%d0%b0%d0%b4%d0%b8%d0%bc%d0%b8%d1%80-%d0%a8%d0%b8%d1%80%d0%be%d0%ba%d0%be%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 519, "favorite_count": 0, "accepted_answer_id": 41020817, "answer_count": 2, "score": 4, "last_activity_date": 1516784944, "creation_date": 1481120540, "last_edit_date": 1516784944, "question_id": 41019865, "link": "https://stackoverflow.com/questions/41019865/intellij-idea-plugin-development-action-create-kotlin-class", "title": "Intellij IDEA plugin development. Action &quot;create kotlin class&quot;", "body": "<p>I want to create a plugin for <strong>Intellij IDEA</strong>. I need to add an action (<code>AnAction</code>) that will create a <code>class</code> in <strong>Kotlin</strong> (not Java) in a custom <code>package</code>. I have two questions:</p>\n\n<ul>\n<li>How to create files with the desired extension?</li>\n<li>Or how to create a file with <strong>Kotlin</strong> <code>class</code>(from some base class) in a custom <code>package</code>?</li>\n</ul>\n"}, {"tags": ["android", "facebook", "android-asynctask", "kotlin", "rx-android"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1481113376, "post_id": 41017158, "comment_id": 69241737, "body": "What is the problem? Why does not your code satisfy you? Please state that in the question."}, {"owner": {"reputation": 1673, "user_id": 3775934, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/i2TBD.png?s=128&g=1", "display_name": "Scrobot", "link": "https://stackoverflow.com/users/3775934/scrobot"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1481116303, "post_id": 41017158, "comment_id": 69243773, "body": "Please, look at method &#39;likes&#39; in repository. In comments i wrote problems"}, {"owner": {"reputation": 10692, "user_id": 7101554, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/YgL1x.jpg?s=128&g=1", "display_name": "Leandro Borges Ferreira", "link": "https://stackoverflow.com/users/7101554/leandro-borges-ferreira"}, "edited": false, "score": 0, "creation_date": 1481117112, "post_id": 41017158, "comment_id": 69244348, "body": "Do you want to stop the executing of that method until the response arrives? You can use Future to do that"}], "answers": [{"tags": [], "owner": {"reputation": 1673, "user_id": 3775934, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/i2TBD.png?s=128&g=1", "display_name": "Scrobot", "link": "https://stackoverflow.com/users/3775934/scrobot"}, "is_accepted": true, "score": 0, "last_activity_date": 1481174025, "creation_date": 1481174025, "answer_id": 41032218, "question_id": 41017158, "link": "https://stackoverflow.com/questions/41017158/how-convert-many-asynctasks-to-rx-observables-in-android/41032218#41032218", "title": "How convert many AsyncTasks to Rx Observables in Android?", "body": "<p>Thanks EveryOne!) But answer was in another case) Problem was in logic, not in implementation) Facebook SDK has <a href=\"https://developers.facebook.com/docs/graph-api/making-multiple-requests\" rel=\"nofollow noreferrer\">RequestBatch</a> And no need in Future or stoping Threads)  </p>\n\n<pre><code>package com.github.scrobot.likes_listener.data.facebook\n\nimport android.util.Log\nimport com.facebook.*\nimport com.github.scrobot.likes_listener.data.facebook.models.Facebook\nimport com.github.scrobot.likes_listener.data.facebook.models.Post\nimport com.github.scrobot.likes_listener.data.facebook.models.Profile\nimport com.google.gson.GsonBuilder\nimport com.google.gson.reflect.TypeToken\nimport rus.pifpaf.client.util.rx.RxDecorator\nimport rx.Observable\nimport java.util.*\n\n\n/**\n * Created by aleksejskrobot on 07.12.16.\n */\nclass FacebookRepository {\n\n    private val facebook = Facebook.instance()\n    private val gson = GsonBuilder().create()\n\n    fun posts(): Observable&lt;GraphResponse&gt;? {\n\n        return RxDecorator&lt;GraphResponse&gt;().decorate(Observable.defer({\n            val request = GraphRequest(\n                    facebook.token,\n                    \"/me/posts\",\n                    null,\n                    HttpMethod.GET,\n                    GraphRequest.Callback { /* handle the result */ }\n            )\n\n            Observable.just(request.executeAndWait())\n        }))\n\n    }\n\n    fun setFaceBookAccessToken(currentAccessToken: AccessToken?) {\n        facebook.token = currentAccessToken\n    }\n\n    fun logout() {\n        facebook.logout()\n    }\n\n    fun token(): String? {\n        return facebook.token?.token\n    }\n\n    fun likes(posts: List&lt;Post&gt;?): Observable&lt;List&lt;Profile&gt;&gt; {\n\n        val batch = GraphRequestBatch()\n\n        posts?.mapTo(batch) { post -&gt;\n            GraphRequest(\n                    facebook.token,\n                    \"/${post.id}/likes\",\n                    null,\n                    HttpMethod.GET,\n                    GraphRequest.Callback { Log.d(\"fb:post:id\", \"${post.id}: ${it.jsonObject}\") }\n            )\n        }\n\n        return RxDecorator&lt;List&lt;GraphResponse&gt;&gt;().decorate(rx.Observable.defer({\n            rx.Observable.just(batch.executeAndWait())\n        })).map {\n            Log.d(\"batchResponse:it\", it.toString())\n\n            val list = ArrayList&lt;Profile&gt;()\n\n            for (i in it) {\n                list.addAll(gson.fromJson&lt;List&lt;Profile&gt;&gt;(\n                        i.jsonObject[\"data\"].toString(),\n                        object : TypeToken&lt;List&lt;Profile&gt;&gt;() {}.type\n                ))\n            }\n\n            list.filter {\n                list.contains(it)\n            }\n\n            return@map list\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1673, "user_id": 3775934, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/i2TBD.png?s=128&g=1", "display_name": "Scrobot", "link": "https://stackoverflow.com/users/3775934/scrobot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "accepted_answer_id": 41032218, "answer_count": 1, "score": 0, "last_activity_date": 1501583828, "creation_date": 1481112676, "last_edit_date": 1501583828, "question_id": 41017158, "link": "https://stackoverflow.com/questions/41017158/how-convert-many-asynctasks-to-rx-observables-in-android", "title": "How convert many AsyncTasks to Rx Observables in Android?", "body": "<p>I'm using Facebook Graph API to find users that liked my posts. All logic implements in few steps:</p>\n\n<ol>\n<li>Find all posts by making request to API in AsyncTask</li>\n<li>Convert this AT to Rx.Observable</li>\n<li>Map Observables GraphResponse to List(Post is POJO)</li>\n<li>Call FlatMap operator and in it body call method that iterate each post and make asyncTask, then convert it into Observable and put in Array.</li>\n<li>Merge Array of Observables in One Observable. </li>\n<li>Map its GraphResponse to Liked Profile </li>\n<li>Subscribe and render Likers List</li>\n<li>PROFIT!</li>\n</ol>\n\n<p>And I have some little problem at step #4-5. Please, look at method 'likes' in repository. In comments i wrote problems</p>\n\n<p><strong>Hint</strong>: I'm using MVP + Clean Architecture with Repository(data layer) and Interactor(business layer)</p>\n\n<pre><code>class FacebookRepository {\n\n    private val facebook = Facebook.instance()\n    private val gson = GsonBuilder().create()\n\n    fun posts(): Observable&lt;GraphResponse&gt;? {\n\n        return RxDecorator&lt;GraphResponse&gt;().decorate(Observable.defer({\n            val request = GraphRequest(\n                    facebook.token,\n                    \"/me/posts\",\n                    null,\n                    HttpMethod.GET,\n                    GraphRequest.Callback { /* handle the result */ }\n            )\n\n            Observable.just(request.executeAndWait())\n        }))\n\n    }\n\n    fun setFaceBookAccessToken(currentAccessToken: AccessToken?) {\n        facebook.token = currentAccessToken\n    }\n\n    fun logout() {\n        facebook.logout()\n    }\n\n    fun token(): String? {\n        return facebook.token?.token\n    }\n\n    fun likes(posts: List&lt;Post&gt;?): Observable&lt;List&lt;Profile&gt;&gt; {\n\n        Log.d(\"observables:posts\", posts.toString())\n\n        val p = iterateObservables(posts) // STOP HERE and WAIT to complete this method.\n\n        // Then p is composite - merge and return\n        return Observable.merge(p).map {\n            Log.d(\"merge:posts\", it.toString())\n            val profiles = gson.fromJson&lt;List&lt;Profile&gt;&gt;(\n                    it.jsonObject[\"data\"].toString(),\n                    object : TypeToken&lt;List&lt;Profile&gt;&gt;() {}.type\n            )\n\n            return@map profiles\n        }\n    }\n\n    private fun iterateObservables(posts: List&lt;Post&gt;?): MutableList&lt;Observable&lt;GraphResponse&gt;&gt;? {\n        val observables: MutableList&lt;Observable&lt;GraphResponse&gt;&gt;? = null\n\n        Log.d(\"iterateObs:posts\", posts.toString())\n        Log.d(\"posts_not_null\", (posts != null).toString())\n        Log.d(\"posts.size\", posts?.size.toString())\n\n        if (posts != null) {\n            for (post in posts) {\n\n                Log.d(\"iterateObs:post\", post.toString())\n\n                val request = GraphRequest(\n                            AccessToken.getCurrentAccessToken(),\n                            \"/${post.id}/likes\",\n                            null,\n                            HttpMethod.GET,\n                            GraphRequest.Callback { Log.d(\"fb:post:id\", \"${post.id}: ${it.jsonObject}\")\n                        }).executeAsync()\n\n                Log.d(\"obs:after:post\", observables.toString())\n            }\n        }\n\n        return observables\n    }\n}\n</code></pre>\n\n<p>And this is Interactor</p>\n\n<pre><code>class FacebookInteractor {\n\n    private val callbackManager = com.facebook.CallbackManager.Factory.create()\n    private val repository = FacebookRepository()\n\n    fun facebookAuth(view: IMainView) {\n        LoginManager\n                .getInstance()\n                .logInWithReadPermissions(\n                        view.getContext() as MainActivity,\n                        Arrays.asList(\"user_friends\", \"user_likes\", \"user_posts\", \"public_profile\", \"email\")\n                )\n    }\n\n    fun onFacebookLoginResult(requestCode: Int, resultCode: Int, data: Intent) {\n        callbackManager.onActivityResult(requestCode, resultCode, data)\n    }\n\n    fun facebookAccessTokenChanged(oldAccessToken: AccessToken?, currentAccessToken: AccessToken?) {\n        if(oldAccessToken?.token != currentAccessToken?.token) {\n            repository.setFaceBookAccessToken(currentAccessToken)\n        }\n    }\n\n    fun likes(): Observable&lt;List&lt;Profile&gt;&gt;? {\n        return repository.posts()?.map {\n            val gson = GsonBuilder().create()\n            val posts = gson.fromJson&lt;List&lt;Post&gt;&gt;(\n                    it.jsonObject[\"data\"].toString(),\n                    object : TypeToken&lt;List&lt;Post&gt;&gt;() {}.getType()\n            )\n\n            return@map posts\n        }?.flatMap {\n            return@flatMap repository.likes(it)\n        }\n    }\n\n    fun logout() {\n        repository.logout()\n    }\n\n    fun isLogined(): Boolean {\n        return repository.token() != null\n    }\n\n}\n</code></pre>\n\n<p>I'm Using Kotlin as development language.</p>\n"}, {"tags": ["android", "firebase-realtime-database", "kotlin", "firebaseui", "anko"], "owner": {"reputation": 26, "user_id": 4021665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1108321a5690c77fda9e4f7c4535a4d0?s=128&d=identicon&r=PG", "display_name": "E-Rock", "link": "https://stackoverflow.com/users/4021665/e-rock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 286, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1481090246, "creation_date": 1481067720, "last_edit_date": 1481090246, "question_id": 41006961, "link": "https://stackoverflow.com/questions/41006961/how-do-i-use-ankocomponent-inside-firebaserecycleradapter", "title": "How do I use AnkoComponent inside FirebaseRecyclerAdapter?", "body": "<p>I have this FirebaseRecyclerAdapter:</p>\n\n<pre><code>mAdapter = new FirebaseRecyclerAdapter&lt;Chat, ChatHolder&gt;(\nChat.class, \n// Below layout is where I want the AnkoComponent\nandroid.R.layout.two_line_list_item, \nChatHolder.class, \nmRef) {\n    @Override\n    public void populateViewHolder(ChatHolder chatMessageViewHolder, Chat chatMessage, int position) {\n        chatMessageViewHolder.setName(chatMessage.getName());\n        chatMessageViewHolder.setText(chatMessage.getText());\n    }\n};\nrecycler.setAdapter(mAdapter);\n</code></pre>\n\n<p>I want to use an AnkoComponent that is in a different file than the adapter. If anybody could help me with this I would be so grateful.</p>\n\n<p>Just in case it helps, below is the AnkoComponent that I want to use as my list item in the viewHolder.</p>\n\n<pre><code>class PriorityUI : AnkoComponent&lt;Priority&gt; {\n    override fun createView(ui: AnkoContext&lt;Priority&gt;) = with(ui) {\n\n        relativeLayout {\n            id = R.id.priority_item_layout\n            linearLayout {\n                orientation = LinearLayout.HORIZONTAL\n\n                textView {\n                    id = R.id.textView_priority\n                    textAlignment = Gravity.CENTER\n                }.lparams {\n                    width = matchParent\n                }\n\n            }.lparams {\n                width = matchParent\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["java", "bufferedreader", "kotlin"], "comments": [{"owner": {"reputation": 2756, "user_id": 2235972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZDR82.png?s=128&g=1", "display_name": "denvercoder9", "link": "https://stackoverflow.com/users/2235972/denvercoder9"}, "edited": false, "score": 2, "creation_date": 1481043008, "post_id": 41000584, "comment_id": 69209971, "body": "Don&#39;t concatenate strings like that. Use the <code>StringBuilder.append()</code>. There are performance issues"}, {"owner": {"reputation": 459, "user_id": 7258193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be982fbe78399aa57e83b66eaefe58b8?s=128&d=identicon&r=PG&f=1", "display_name": "Akira Kido", "link": "https://stackoverflow.com/users/7258193/akira-kido"}, "reply_to_user": {"reputation": 2756, "user_id": 2235972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZDR82.png?s=128&g=1", "display_name": "denvercoder9", "link": "https://stackoverflow.com/users/2235972/denvercoder9"}, "edited": false, "score": 0, "creation_date": 1503549499, "post_id": 41000584, "comment_id": 78663968, "body": "@rafid059 Really? I thought Java compilers (and so the Kotlin compiler) optimizes string concatenations in loops."}, {"owner": {"reputation": 2756, "user_id": 2235972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZDR82.png?s=128&g=1", "display_name": "denvercoder9", "link": "https://stackoverflow.com/users/2235972/denvercoder9"}, "edited": false, "score": 1, "creation_date": 1503773326, "post_id": 41000584, "comment_id": 78756358, "body": "Yes, the java compiler converts a += string concat to a StringBuilder operation but here it&#39;s inside a loop and the compiler can&#39;t optimize the loop part. If you dissemble this code using <code>javap -c Main.class</code>, then you&#39;ll see a StringBuilder instance inside the loop. But a new stringbuilder is created every time with the latest <code>result</code> and then <code>line</code> is appended to it. <b>TLDR;</b> compiler can&#39;t optimize a simple for-loop string concatenation"}, {"owner": {"reputation": 459, "user_id": 7258193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be982fbe78399aa57e83b66eaefe58b8?s=128&d=identicon&r=PG&f=1", "display_name": "Akira Kido", "link": "https://stackoverflow.com/users/7258193/akira-kido"}, "reply_to_user": {"reputation": 2756, "user_id": 2235972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZDR82.png?s=128&g=1", "display_name": "denvercoder9", "link": "https://stackoverflow.com/users/2235972/denvercoder9"}, "edited": false, "score": 1, "creation_date": 1504166416, "post_id": 41000584, "comment_id": 78911027, "body": "Ah I see. Thanks for the tip!"}], "answers": [{"comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 2, "creation_date": 1481113662, "post_id": 41000650, "comment_id": 69241931, "body": "An explanation: <a href=\"https://kotlinlang.org/docs/reference/idioms.html#java-7s-try-with-resources\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/&hellip;</a>"}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 78, "last_activity_date": 1481488044, "last_edit_date": 1481488044, "creation_date": 1481043119, "answer_id": 41000650, "question_id": 41000584, "link": "https://stackoverflow.com/questions/41000584/best-way-to-use-bufferedreader-in-kotlin/41000650#41000650", "title": "Best way to use BufferedReader in Kotlin", "body": "<p>You can use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/java.io.-input-stream/buffered-reader.html\" rel=\"noreferrer\"><code>bufferedReader</code></a> like so</p>\n\n<pre><code>val allText = inputStream.bufferedReader().use(BufferedReader::readText)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 133, "user_id": 11680860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XIEKx.jpg?s=128&g=1", "display_name": "AurumTechie", "link": "https://stackoverflow.com/users/11680860/aurumtechie"}, "edited": false, "score": 0, "creation_date": 1591246409, "post_id": 47148998, "comment_id": 109983734, "body": "Does <code>useLines</code> load all the lines at once? What if I am trying to read from a big file, will this use too much memory or is each line fetched as it is needed? Thanks in advance."}, {"owner": {"reputation": 173, "user_id": 602483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f197ec752cd5fc2f2e54df2456dc1ac?s=128&d=identicon&r=PG", "display_name": "baseman", "link": "https://stackoverflow.com/users/602483/baseman"}, "edited": false, "score": 1, "creation_date": 1592365876, "post_id": 47148998, "comment_id": 110396888, "body": "So with useLines uses a sequence which uses a lazy evaluation over a stream which is good for open file handle count:  (<a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/java.io.-buffered-reader/line-sequence.html\" rel=\"nofollow noreferrer\">kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/&hellip;</a>).  Jetbrains suggests for large files File.forEachLine where you work with a single line at a time  (<a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/java.io.-file/for-each-line.html\" rel=\"nofollow noreferrer\">kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/java.io.-fil&zwnj;&#8203;e/&hellip;</a>). But under the covers File.forEachLine still uses useLines with the same default buffer size of 8 * 1024"}], "tags": [], "owner": {"reputation": 341, "user_id": 5752112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e580e99107d4c70d0deb3f5cf2f47b2d?s=128&d=identicon&r=PG", "display_name": "Jo&#227;o Gon&#231;alves", "link": "https://stackoverflow.com/users/5752112/jo%c3%a3o-gon%c3%a7alves"}, "is_accepted": false, "score": 20, "last_activity_date": 1510021385, "creation_date": 1510021385, "answer_id": 47148998, "question_id": 41000584, "link": "https://stackoverflow.com/questions/41000584/best-way-to-use-bufferedreader-in-kotlin/47148998#47148998", "title": "Best way to use BufferedReader in Kotlin", "body": "<p>If you still wanted to read it line by line you could use some extension functions from std lib and do it as follows:</p>\n\n<pre><code>val reader = someStream.bufferedReader()\nval iterator = reader.linesSequences().iterator()\nwhile(iterator.hasNext()) {\n    val line = iterator.next()\n    // do something with line...\n}\nreader.close()\n</code></pre>\n\n<p>or alternatively, using a \"functional\" approach:</p>\n\n<pre><code>val reader = someStream.bufferedReader()\nreader.useLines {\n    it.map { line -&gt; // do something with line }\n}\n</code></pre>\n\n<p>by using useLines, you don't need to explicitly call close on the reader, the useLines extensions function will do it for you!</p>\n\n<p>Just adding those for reference.. cheers</p>\n"}, {"tags": [], "owner": {"reputation": 809, "user_id": 5832732, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-l6LlC5EguGE/AAAAAAAAAAI/AAAAAAAAAj0/fFgxB0OAspU/photo.jpg?sz=128", "display_name": "reza rahmad", "link": "https://stackoverflow.com/users/5832732/reza-rahmad"}, "is_accepted": false, "score": 1, "last_activity_date": 1525331290, "last_edit_date": 1525331290, "creation_date": 1525329141, "answer_id": 50148351, "question_id": 41000584, "link": "https://stackoverflow.com/questions/41000584/best-way-to-use-bufferedreader-in-kotlin/50148351#50148351", "title": "Best way to use BufferedReader in Kotlin", "body": "<p>use the code like this</p>\n\n<pre>\n\n    val input = conn.inputStream\n    val allText = input.bufferedReader().use(BufferedReader::readText)\n    val result = StringBuilder()                   \n\n    result.append(allText)\n    return result.toString()\n\n    } else {\n\n    return \"unsuccessful\"\n\n    }\n\n</pre>\n"}, {"comments": [{"owner": {"reputation": 841, "user_id": 4119226, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/LceKu.png?s=128&g=1", "display_name": "\u041d\u0438\u043a\u0438\u0442\u0430 \u0412\u0430\u0441\u0438\u043b\u044c\u0435\u0432", "link": "https://stackoverflow.com/users/4119226/%d0%9d%d0%b8%d0%ba%d0%b8%d1%82%d0%b0-%d0%92%d0%b0%d1%81%d0%b8%d0%bb%d1%8c%d0%b5%d0%b2"}, "edited": false, "score": 2, "creation_date": 1550661354, "post_id": 53646215, "comment_id": 96348495, "body": "Please note: You can iterate over lines using <code>useLines()</code> method which returns a lazy Sequence&lt;String&gt; and closes the underlying BufferedReader afterwards for you."}], "tags": [], "owner": {"reputation": 4181, "user_id": 2591088, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/571a7e48b95679b5da8c9747147f083c?s=128&d=identicon&r=PG", "display_name": "Chris Ritchie", "link": "https://stackoverflow.com/users/2591088/chris-ritchie"}, "is_accepted": false, "score": 3, "last_activity_date": 1544080047, "creation_date": 1544080047, "answer_id": 53646215, "question_id": 41000584, "link": "https://stackoverflow.com/questions/41000584/best-way-to-use-bufferedreader-in-kotlin/53646215#53646215", "title": "Best way to use BufferedReader in Kotlin", "body": "<p>Another way is to use a for loop:</p>\n\n<pre><code>val reader = BufferedReader(someStream)\nfor (line in reader.lines()) {\n    println(line)\n}\n</code></pre>\n\n<p>While is it not as concise as the accepted answer, it will allow you to loop thru and perform some kind of logic without pumping everything into one string as shown below</p>\n\n<pre><code>val allText: String = inputStream.bufferedReader().use(BufferedReader::readText)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 374, "user_id": 749427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18bf265de19d32ab20fde4344065afaf?s=128&d=identicon&r=PG", "display_name": "Alejandro Moya", "link": "https://stackoverflow.com/users/749427/alejandro-moya"}, "is_accepted": false, "score": 2, "last_activity_date": 1554911501, "creation_date": 1554911501, "answer_id": 55616718, "question_id": 41000584, "link": "https://stackoverflow.com/questions/41000584/best-way-to-use-bufferedreader-in-kotlin/55616718#55616718", "title": "Best way to use BufferedReader in Kotlin", "body": "<p>Thanks to Jo\u00e3o Gon\u00e7alves reference to the stdlib I found that you can use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/java.io.-reader/for-each-line.html\" rel=\"nofollow noreferrer\">forEachLine</a> to traverse the reader if needed.</p>\n"}, {"tags": [], "owner": {"reputation": 10242, "user_id": 908821, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2c4a1ce95e4e53e7f4a556810232e0e3?s=128&d=identicon&r=PG", "display_name": "Angel Koh", "link": "https://stackoverflow.com/users/908821/angel-koh"}, "is_accepted": false, "score": 11, "last_activity_date": 1558498274, "creation_date": 1558498274, "answer_id": 56249199, "question_id": 41000584, "link": "https://stackoverflow.com/questions/41000584/best-way-to-use-bufferedreader-in-kotlin/56249199#56249199", "title": "Best way to use BufferedReader in Kotlin", "body": "<p>you can also try using the \"forEachLine\" method.</p>\n\n<pre><code>val file = File(\"./folder/test.txt\")\nfile.bufferedReader().forEachLine {\n    println(\"value = $it\")\n} \n</code></pre>\n\n<p>it'll also automatically close the stream after reading the last line</p>\n\n<p><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/java.io.-reader/index.html\" rel=\"noreferrer\">https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/java.io.-reader/index.html</a></p>\n\n<blockquote>\n  <p>fun Reader.forEachLine(action: (String) -> Unit)<br>\n  Iterates through each\n  line of this reader, calls action for each line read and closes the\n  Reader when it's completed.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 5784, "user_id": 570612, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/E09Pt.png?s=128&g=1", "display_name": "unify", "link": "https://stackoverflow.com/users/570612/unify"}, "is_accepted": false, "score": 1, "last_activity_date": 1602784625, "creation_date": 1602784625, "answer_id": 64377253, "question_id": 41000584, "link": "https://stackoverflow.com/questions/41000584/best-way-to-use-bufferedreader-in-kotlin/64377253#64377253", "title": "Best way to use BufferedReader in Kotlin", "body": "<p>The accepted answer fails when the stream has multiple lines. This is my solution</p>\n<pre><code>val allText = inputStream.bufferedReader().use { it.readLines().joinToString(&quot;&quot;) }\n</code></pre>\n"}], "owner": {"reputation": 459, "user_id": 7258193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be982fbe78399aa57e83b66eaefe58b8?s=128&d=identicon&r=PG&f=1", "display_name": "Akira Kido", "link": "https://stackoverflow.com/users/7258193/akira-kido"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23688, "favorite_count": 11, "accepted_answer_id": 41000650, "answer_count": 7, "score": 39, "last_activity_date": 1602784625, "creation_date": 1481042842, "last_edit_date": 1522992363, "question_id": 41000584, "link": "https://stackoverflow.com/questions/41000584/best-way-to-use-bufferedreader-in-kotlin", "title": "Best way to use BufferedReader in Kotlin", "body": "<p>So I've just started using Kotlin for Android, and converted my Android Java codes into Kotlin.</p>\n\n<p>In one of the conversions, I stumbled upon a BufferedReader, which I would usually write in Java as the following:</p>\n\n<pre><code>String result = \"\";\nString line = \"\";\nBufferedReader reader = new BufferedReader(someStream);\nwhile ( (line = reader.readLine()) != null ) {\n    result += line;\n}\n</code></pre>\n\n<p>But in Kotlin, it seems that Kotlin doesn't allow me to assign values to variables in while conditions.</p>\n\n<p>Currently, I've written the code as the following:</p>\n\n<pre><code>val reader = BufferedReader(someStream)\nvar line : String? = \"\"\nwhile (line != null) {\n    line = reader.readLine()\n    result += line\n}\n</code></pre>\n\n<p>which I don't find so elegant and feels prev-gen, despite using Kotlin.</p>\n\n<p>What would be the best way to use BufferedReader in Kotlin?</p>\n"}, {"tags": ["java", "spring", "spring-mvc", "properties", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 7128, "user_id": 4189582, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rJzuadzQg0o/AAAAAAAAAAI/AAAAAAAAABQ/lRX62PozZNA/photo.jpg?sz=128", "display_name": "Ivar Reukers", "link": "https://stackoverflow.com/users/4189582/ivar-reukers"}, "edited": false, "score": 0, "creation_date": 1481017756, "post_id": 40992294, "comment_id": 69193182, "body": "But would this resolve the problem that the <code>@Value</code> is not setting the variable?"}], "tags": [], "owner": {"reputation": 4517, "user_id": 7240035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d38465d9068cdfd1ab1a456ebac2a78?s=128&d=identicon&r=PG&f=1", "display_name": "Yuva", "link": "https://stackoverflow.com/users/7240035/yuva"}, "is_accepted": false, "score": 0, "last_activity_date": 1481017655, "creation_date": 1481017655, "answer_id": 40992294, "question_id": 40991793, "link": "https://stackoverflow.com/questions/40991793/create-own-datasource-with-spring-properties/40992294#40992294", "title": "Create own DataSource with spring properties", "body": "<p>Have an @Configuration class that contains initialisation for Datasource with those properties injected into it and then auto-wire that datasource bean in all your DAOs. Thereby, you do not have to inject those property values in DAOs.</p>\n"}], "owner": {"reputation": 7128, "user_id": 4189582, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rJzuadzQg0o/AAAAAAAAAAI/AAAAAAAAABQ/lRX62PozZNA/photo.jpg?sz=128", "display_name": "Ivar Reukers", "link": "https://stackoverflow.com/users/4189582/ivar-reukers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 231, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1481017655, "creation_date": 1481016212, "question_id": 40991793, "link": "https://stackoverflow.com/questions/40991793/create-own-datasource-with-spring-properties", "title": "Create own DataSource with spring properties", "body": "<p>I'm trying to create my <strong>own</strong> <code>DataSource</code> from the <code>application-prod.properties</code>.</p>\n\n<p>Now I know my <code>application.properties</code> gets read, since it does pick up the <code>prod</code> active profile (shown in console)</p>\n\n<p>In my <code>application-prod.properties</code> I have the following:</p>\n\n<pre><code>jdbc.url=jdbc:postgresql://localhost:5432/myDb\njdbc.username=root\njdbc.password=root\njdbc.driverClassName=org.postgresql.Driver\n</code></pre>\n\n<p>Now if I change the prefix, my console throws a compile-time error <code>Could not resolve Spring property placholder</code> which makes sense. This also shows that the compiler is actually checking if the <code>@Value</code> exists within the <code>properties</code> file.</p>\n\n<pre><code>@Component\nopen class BaseDAO(\n        //@Value(\"\\${jdbc.url}\") private val url: String,\n        //@Value(\"\\${jdbc.username}\") private val username: String,\n        //@Value(\"\\${jdbc.password}\") private val password: String\n) {\n    @Value(\"\\${jdbc.url}\")\n    lateinit open var url: String\n    @Value(\"\\${jdbc.username}\")\n    lateinit open var username: String\n    @Value(\"\\${jdbc.password}\")\n    lateinit open var password: String\n\n    lateinit open public var datasource: DataSource;\n\n    open fun getDs(): DataSource {\n        return HikariCP.init(name=\"pool1\", url = url, username = username, password = password)\n    }\n}\n</code></pre>\n\n<p>Now as you can see I tried passing the <code>@Value</code> in the constructor. But since I <code>extend</code> the <code>BaseDAO</code> in all my classes, it complained about the constructor being empty (<code>class SomeDAO : BaseDAO()</code>). </p>\n\n<p>The problem occurring now is that my properties <code>url</code>, <code>username</code>, and <code>password</code> are not being initialized.</p>\n\n<hr>\n\n<p>Is there a way to resolve the <code>properties</code> (without the use of <code>@Autowired</code> on all initializations/classes.)</p>\n\n<p>The only thing I want is to read the properties from that file and use them, not looking for <em>'Spring best practices'</em> but for a <strong>solution</strong></p>\n"}, {"tags": ["kotlin", "ktor", "kotlin-exposed"], "answers": [{"tags": [], "owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "is_accepted": false, "score": 10, "last_activity_date": 1588779174, "last_edit_date": 1588779174, "creation_date": 1480983588, "answer_id": 40985731, "question_id": 40981804, "link": "https://stackoverflow.com/questions/40981804/is-there-a-way-to-run-raw-sql-with-kotlins-exposed-library/40985731#40985731", "title": "Is there a way to run raw sql with Kotlin&#39;s Exposed library", "body": "<p>Exposed has the <code>Transaction.exec(String)</code> method which probably does what you want. See <a href=\"https://github.com/JetBrains/Exposed/blob/master/exposed-tests/src/test/kotlin/org/jetbrains/exposed/sql/tests/mysql/MysqlTests.kt\" rel=\"nofollow noreferrer\">https://github.com/JetBrains/Exposed/blob/master/exposed-tests/src/test/kotlin/org/jetbrains/exposed/sql/tests/mysql/MysqlTests.kt</a></p>\n"}, {"comments": [{"owner": {"reputation": 1520, "user_id": 7417755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l7yQA.jpg?s=128&g=1", "display_name": "dustytrash", "link": "https://stackoverflow.com/users/7417755/dustytrash"}, "edited": false, "score": 0, "creation_date": 1581954936, "post_id": 41092378, "comment_id": 106600902, "body": "Kiskae&#39;s answer is dead. The link returns 404"}, {"owner": {"reputation": 141, "user_id": 7397926, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uQubM.jpg?s=128&g=1", "display_name": "Linuxea", "link": "https://stackoverflow.com/users/7397926/linuxea"}, "edited": false, "score": 1, "creation_date": 1583398990, "post_id": 41092378, "comment_id": 107104915, "body": "Should we close resources on me? like that <code>kotlin executeQuery.close() statement.close() conn.close() </code>"}], "tags": [], "owner": {"reputation": 6147, "user_id": 43836, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cbfa20635c9269675d54547c080c9b64?s=128&d=identicon&r=PG", "display_name": "pondermatic", "link": "https://stackoverflow.com/users/43836/pondermatic"}, "is_accepted": true, "score": 10, "last_activity_date": 1481499599, "creation_date": 1481499599, "answer_id": 41092378, "question_id": 40981804, "link": "https://stackoverflow.com/questions/40981804/is-there-a-way-to-run-raw-sql-with-kotlins-exposed-library/41092378#41092378", "title": "Is there a way to run raw sql with Kotlin&#39;s Exposed library", "body": "<p>With help from Kiskae's answer, I was able to run the raw sql with:</p>\n\n<pre><code>transaction {\n     val conn = TransactionManager.current().connection\n     val statement = conn.createStatement()\n     val query = \"REFRESH MATERIALIZED VIEW someview\"\n     statement.execute(query)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 980, "user_id": 450940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3aa4e8911001cbecc6343ae20094fc82?s=128&d=identicon&r=PG", "display_name": "Nikolai Manek", "link": "https://stackoverflow.com/users/450940/nikolai-manek"}, "is_accepted": false, "score": 1, "last_activity_date": 1582170728, "creation_date": 1582170728, "answer_id": 60312661, "question_id": 40981804, "link": "https://stackoverflow.com/questions/40981804/is-there-a-way-to-run-raw-sql-with-kotlins-exposed-library/60312661#60312661", "title": "Is there a way to run raw sql with Kotlin&#39;s Exposed library", "body": "<p>You can create a simple helper function like: </p>\n\n<pre> String.execAndMap(transform : (ResultSet) -> T) : List {\n         val result = arrayListOf()\n         TransactionManager.current().exec(this) { rs ->\n              while (rs.next()) {\n                   result += transform(rs)\n              }\n         }\n         return result\n    }\n\n    \"select u.name, c.name from user u inner join city c where blah blah\".execAndMap { rs ->\n        rs.getString(\"u.name\") to rs.getString(\"c.name\") \n    } \n\n</pre>\n\n<p>Taken from: <a href=\"https://github.com/JetBrains/Exposed/wiki/FAQ#q-is-it-possible-to-use-native-sql--sql-as-a-string\" rel=\"nofollow noreferrer\">https://github.com/JetBrains/Exposed/wiki/FAQ#q-is-it-possible-to-use-native-sql--sql-as-a-string</a></p>\n"}, {"tags": [], "owner": {"reputation": 91, "user_id": 12120519, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDmDxSRROMedSnfFh9PD8sMCTe2LophXXDeQ7Mv=k-s128", "display_name": "Abhinaya P", "link": "https://stackoverflow.com/users/12120519/abhinaya-p"}, "is_accepted": false, "score": 3, "last_activity_date": 1592304543, "creation_date": 1592304543, "answer_id": 62406713, "question_id": 40981804, "link": "https://stackoverflow.com/questions/40981804/is-there-a-way-to-run-raw-sql-with-kotlins-exposed-library/62406713#62406713", "title": "Is there a way to run raw sql with Kotlin&#39;s Exposed library", "body": "<pre><code>import java.sql.*\nimport org.jetbrains.exposed.sql.*\nimport org.jetbrains.exposed.sql.transactions.*\n\nfun getAccId(db : Database, acc_domain: String) {\n  transaction(db) {\n    addLogger(StdOutSqlLogger)\n    var acc_id: Long = 0\n    exec(\"select id from accounts where domain = '${acc_domain}'\") { rs -&gt;\n        while(rs.next()) {\n          acc_id = rs.getLong(\"id\")\n        }\n    }\n    println(\"Acc Id is ${acc_id}\")\n  }\n}\n\nval database = Database.connect(datasource)\ngetAccId(database,\"mytest.test.io\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 691, "user_id": 1549883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1dd28528aa18d6285c803f4d6bfb0d5?s=128&d=identicon&r=PG", "display_name": "Martin Pabst", "link": "https://stackoverflow.com/users/1549883/martin-pabst"}, "is_accepted": false, "score": 1, "last_activity_date": 1597670082, "creation_date": 1597670082, "answer_id": 63451601, "question_id": 40981804, "link": "https://stackoverflow.com/questions/40981804/is-there-a-way-to-run-raw-sql-with-kotlins-exposed-library/63451601#63451601", "title": "Is there a way to run raw sql with Kotlin&#39;s Exposed library", "body": "<p>Here an example with parameters:</p>\n<pre><code>transaction(database) {\n   val conn = TransactionManager.current().connection\n   val query = &quot;update user set name = ? where id = ?&quot;;\n   val statement = conn.prepareStatement(query, false)\n   statement.fillParameters(listOf(Pair(VarCharColumnType(), &quot;Laura&quot;),\n      Pair(IntegerColumnType(), 3)));\n   statement.executeUpdate()\n}\n</code></pre>\n"}], "owner": {"reputation": 6147, "user_id": 43836, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cbfa20635c9269675d54547c080c9b64?s=128&d=identicon&r=PG", "display_name": "pondermatic", "link": "https://stackoverflow.com/users/43836/pondermatic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8388, "favorite_count": 0, "accepted_answer_id": 41092378, "answer_count": 5, "score": 8, "last_activity_date": 1605025866, "creation_date": 1480966015, "last_edit_date": 1605025866, "question_id": 40981804, "link": "https://stackoverflow.com/questions/40981804/is-there-a-way-to-run-raw-sql-with-kotlins-exposed-library", "title": "Is there a way to run raw sql with Kotlin&#39;s Exposed library", "body": "<p>I'm trying to run some sql specific to postgres and would like to reuse the transaction management within Exposed.</p>\n"}, {"tags": ["android", "kotlin", "android-espresso"], "answers": [{"tags": [], "owner": {"reputation": 279, "user_id": 4273723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a74de164c34ec397e4858a726fd0a20?s=128&d=identicon&r=PG&f=1", "display_name": "Oguz Babaoglu", "link": "https://stackoverflow.com/users/4273723/oguz-babaoglu"}, "is_accepted": true, "score": 1, "last_activity_date": 1481023245, "creation_date": 1481023245, "answer_id": 40994110, "question_id": 40981593, "link": "https://stackoverflow.com/questions/40981593/android-espresso-tests-written-in-kotlin-cannot-see-main-classes-and-packages/40994110#40994110", "title": "Android Espresso tests (written in Kotlin) cannot see main classes and packages", "body": "<p>The kotlin test compile task needs to run after the relevant assemble task for class references to work properly.</p>\n\n<p>For <code>assembleDebugAndroidTest</code>, make sure <code>assembleDebug</code> is run first.</p>\n\n<p>From the command line, the order of tasks can be checked quickly with gradle \"<a href=\"https://docs.gradle.org/current/userguide/tutorial_gradle_command_line.html#sec:dry_run\" rel=\"nofollow noreferrer\">dry run</a>\" like so:</p>\n\n<pre><code>./gradlew assembleDebugAndroidTest -m\n</code></pre>\n\n<p>If <code>assembleDebug</code> is not in the correct order. You can fix the order by adding the following to your build file:</p>\n\n<pre><code>afterEvaluate {\n  compileDebugAndroidTestKotlin.dependsOn assembleDebug\n}\n</code></pre>\n"}], "owner": {"reputation": 4717, "user_id": 1990785, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/30ed15227ce48259bd51b3b1e515e81c?s=128&d=identicon&r=PG&f=1", "display_name": "Pragmatic geek", "link": "https://stackoverflow.com/users/1990785/pragmatic-geek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 968, "favorite_count": 0, "accepted_answer_id": 40994110, "answer_count": 1, "score": 2, "last_activity_date": 1481023245, "creation_date": 1480965070, "last_edit_date": 1480974112, "question_id": 40981593, "link": "https://stackoverflow.com/questions/40981593/android-espresso-tests-written-in-kotlin-cannot-see-main-classes-and-packages", "title": "Android Espresso tests (written in Kotlin) cannot see main classes and packages", "body": "<p>I have an issue with Kotlin Espresso tests. I have applied <code>Kotlin-Android</code> Gradle plugin in the module's build script, and the tests run without issues in Android Studio (the test class is annotated and run by <code>AndroidJUnit4</code> runner), but running the Gradle task \u201cassembleDebugAndroidTest\" from terminal fails to find my main classes and packages (classes used in the tests).  It throws an <code>Unresolved Reference</code> error.</p>\n\n<p>Here is the sourceSets section of the build script:</p>\n\n<pre><code>sourceSets {\n\n    androidTest {\n      java.srcDir 'src/sharedTestUtils/java'\n      java.srcDir 'src/acceptanceTests/java'\n      java.srcDir 'src/functionalTests/java'\n      java.srcDir 'src/sharedTestUtils/kotlin'\n      java.srcDir 'src/acceptanceTests/kotlin'\n      java.srcDir 'src/functionalTests/kotlin'\n    }\n\n    acceptanceTests {\n      java.srcDir 'src/sharedTestUtils/java'\n      java.srcDir 'src/sharedTestUtils/kotlin'\n    }\n\n    // source sets for Kotlin\n    // main.java.srcDirs += 'src/main/kotlin'\n    test.java.srcDirs += 'src/test/kotlin'\n\n} \n</code></pre>\n\n<p>And test dependencies in the module:</p>\n\n<pre><code>apply plugin: 'kotlin-android'\n\ndependencies {\n    androidTestCompile deps.kotlin\n    androidTestCompile deps.kotlinTest\n    androidTestCompile deps.kotlinTestJunit\n}\n</code></pre>\n\n<p>Project's build script:</p>\n\n<pre><code>ext.deps = [\n    kotlin                : \"org.jetbrains.kotlin:kotlin-stdlib:$ver.kotlin\",\n    kotlinTest            : \"org.jetbrains.kotlin:kotlin-test:$ver.kotlin\",\n    kotlinTestJunit       : \"org.jetbrains.kotlin:kotlin-test-junit:$ver.kotlin\"\n]\n</code></pre>\n\n<p>I'm using version 1.0.5-2 of Kotlin. </p>\n\n<p>We have a custom test runner as <code>testInstrumentationRunner</code> which registers some idling resources and some activity hook for unlocking device screen and acquiring the wake lock, and uses TestButler for disabling animations and stabilizing tests. However, the tests are annotated with Espresso jUnit 4 runner (<code>@RunWith(AndroidJUnit4::class)</code>). But the fact that Android Studio runs the tests without any issues is confusing.</p>\n"}, {"tags": ["java", "android", "api", "dependencies", "kotlin"], "comments": [{"owner": {"reputation": 22943, "user_id": 870674, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0463b7a46ed49025082a795ac2f67f49?s=128&d=identicon&r=PG", "display_name": "klimat", "link": "https://stackoverflow.com/users/870674/klimat"}, "edited": false, "score": 0, "creation_date": 1481121101, "post_id": 40972751, "comment_id": 69247246, "body": "Hey. Accepting answers makes this community better. You don&#39;t lose anything :)"}], "answers": [{"tags": [], "owner": {"reputation": 22943, "user_id": 870674, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0463b7a46ed49025082a795ac2f67f49?s=128&d=identicon&r=PG", "display_name": "klimat", "link": "https://stackoverflow.com/users/870674/klimat"}, "is_accepted": true, "score": 3, "last_activity_date": 1480940302, "creation_date": 1480940302, "answer_id": 40974141, "question_id": 40972751, "link": "https://stackoverflow.com/questions/40972751/android-client-and-java-server-in-the-same-git-project/40974141#40974141", "title": "Android client and java server in the same git project", "body": "<p>It's a classic duplication problem. What we usually do in this case?<br/>\nExtract duplicated code to the separate entity and reuse it.</p>\n\n<p>So, I would introduce a new pure java project called <code>core</code> and add it as a dependency to <code>android-client</code> and <code>server</code>.</p>\n"}], "owner": {"reputation": 1938, "user_id": 2572584, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/42567624047b36f1ef0922eea500c8a8?s=128&d=identicon&r=PG", "display_name": "awfun", "link": "https://stackoverflow.com/users/2572584/awfun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 40974141, "answer_count": 1, "score": 0, "last_activity_date": 1480940302, "creation_date": 1480935791, "question_id": 40972751, "link": "https://stackoverflow.com/questions/40972751/android-client-and-java-server-in-the-same-git-project", "title": "Android client and java server in the same git project", "body": "<p>I am developing a simple Android application and it should communicate with server using REST api. Both client and server use kotlin and serialize classes to json with Jackson and API looks like:</p>\n\n<pre><code>class xRequest { .. }\nclass xResponse { .. }\n</code></pre>\n\n<p>Client and server have their own git repositories and I use Android Studio and Idea to work with them separately. This leads to class declaration duplication as they both need to know API.</p>\n\n<p>What's the best way  to get rid of duplication? I could move API to some third project and then build - publish - add dependency on it but that's a lot of work during development.</p>\n\n<p>Is it a good idea to move them to the single project so it will look the way:</p>\n\n<pre><code>my project\n  api\n  android-client\n  server\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["spring", "spring-boot", "properties", "kotlin"], "comments": [{"owner": {"reputation": 93551, "user_id": 2696260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qHEzx.png?s=128&g=1", "display_name": "M. Deinum", "link": "https://stackoverflow.com/users/2696260/m-deinum"}, "edited": false, "score": 0, "creation_date": 1480933781, "post_id": 40971614, "comment_id": 69153138, "body": "Why? If you are using Spring Boot why not just use the default way of creating a datasource? Not sure why you want to add your own&gt;?"}, {"owner": {"reputation": 7128, "user_id": 4189582, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rJzuadzQg0o/AAAAAAAAAAI/AAAAAAAAABQ/lRX62PozZNA/photo.jpg?sz=128", "display_name": "Ivar Reukers", "link": "https://stackoverflow.com/users/4189582/ivar-reukers"}, "reply_to_user": {"reputation": 93551, "user_id": 2696260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qHEzx.png?s=128&g=1", "display_name": "M. Deinum", "link": "https://stackoverflow.com/users/2696260/m-deinum"}, "edited": false, "score": 0, "creation_date": 1480936446, "post_id": 40971614, "comment_id": 69154898, "body": "Because I can&#39;t seem to get that work as well :/ never done it but it&#39;s creating an <code>h2</code> datasource instead of using my properties"}, {"owner": {"reputation": 7128, "user_id": 4189582, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rJzuadzQg0o/AAAAAAAAAAI/AAAAAAAAABQ/lRX62PozZNA/photo.jpg?sz=128", "display_name": "Ivar Reukers", "link": "https://stackoverflow.com/users/4189582/ivar-reukers"}, "reply_to_user": {"reputation": 93551, "user_id": 2696260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qHEzx.png?s=128&g=1", "display_name": "M. Deinum", "link": "https://stackoverflow.com/users/2696260/m-deinum"}, "edited": false, "score": 0, "creation_date": 1480936610, "post_id": 40971614, "comment_id": 69154998, "body": "@M.Deinum edited the question, might be doing something wrong again there"}, {"owner": {"reputation": 93551, "user_id": 2696260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qHEzx.png?s=128&g=1", "display_name": "M. Deinum", "link": "https://stackoverflow.com/users/2696260/m-deinum"}, "edited": false, "score": 0, "creation_date": 1480937270, "post_id": 40971614, "comment_id": 69155386, "body": "It also looks like you are trying very hard to to use spring boot. Looks like you are creating new instances in the <code>EventsController</code> instead of using DI."}, {"owner": {"reputation": 93551, "user_id": 2696260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qHEzx.png?s=128&g=1", "display_name": "M. Deinum", "link": "https://stackoverflow.com/users/2696260/m-deinum"}, "edited": false, "score": 0, "creation_date": 1480937319, "post_id": 40971614, "comment_id": 69155419, "body": "Why is your <code>BaseDAO</code> configuration AND a component? Also you shouldn&#39;t need anything regarding the datasource as spring boot should already create one based on the <code>applicatation.properties</code> and not <code>config.properties</code>."}, {"owner": {"reputation": 7128, "user_id": 4189582, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rJzuadzQg0o/AAAAAAAAAAI/AAAAAAAAABQ/lRX62PozZNA/photo.jpg?sz=128", "display_name": "Ivar Reukers", "link": "https://stackoverflow.com/users/4189582/ivar-reukers"}, "reply_to_user": {"reputation": 93551, "user_id": 2696260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qHEzx.png?s=128&g=1", "display_name": "M. Deinum", "link": "https://stackoverflow.com/users/2696260/m-deinum"}, "edited": false, "score": 0, "creation_date": 1480938263, "post_id": 40971614, "comment_id": 69156017, "body": "Renamed my <code>config.properties</code> to <code>application.properties</code> (I had none), but it&#39;s still using a <code>h2</code> database (which i do have in my <code>src&#47;test&#47;resources</code> though). The <code>EventsController</code> calls a DAO which extends the BaseDAO (using <code>super.datasource</code>)."}, {"owner": {"reputation": 7128, "user_id": 4189582, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rJzuadzQg0o/AAAAAAAAAAI/AAAAAAAAABQ/lRX62PozZNA/photo.jpg?sz=128", "display_name": "Ivar Reukers", "link": "https://stackoverflow.com/users/4189582/ivar-reukers"}, "reply_to_user": {"reputation": 93551, "user_id": 2696260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qHEzx.png?s=128&g=1", "display_name": "M. Deinum", "link": "https://stackoverflow.com/users/2696260/m-deinum"}, "edited": false, "score": 0, "creation_date": 1480938288, "post_id": 40971614, "comment_id": 69156042, "body": "How can I use the Spring boot datasource? This is my first time trying this"}, {"owner": {"reputation": 93551, "user_id": 2696260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qHEzx.png?s=128&g=1", "display_name": "M. Deinum", "link": "https://stackoverflow.com/users/2696260/m-deinum"}, "edited": false, "score": 0, "creation_date": 1480939259, "post_id": 40971614, "comment_id": 69156603, "body": "You should not be calling <code>super.dataSource()</code>.... You should inject the <code>DataSource</code>, or better a <code>JdbcTemplate</code>. Those are all auto configured by Spring Boot. But as mentioned looks like you aren&#39;t using Spring Boot. You should have an application class with <code>@SpringBootApplication</code> which bootstraps your application. Then auto wire all the beans and don&#39;t create new instances. (But maybe Kotlin intercepts that but I doubt that)."}, {"owner": {"reputation": 7128, "user_id": 4189582, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rJzuadzQg0o/AAAAAAAAAAI/AAAAAAAAABQ/lRX62PozZNA/photo.jpg?sz=128", "display_name": "Ivar Reukers", "link": "https://stackoverflow.com/users/4189582/ivar-reukers"}, "reply_to_user": {"reputation": 93551, "user_id": 2696260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qHEzx.png?s=128&g=1", "display_name": "M. Deinum", "link": "https://stackoverflow.com/users/2696260/m-deinum"}, "edited": false, "score": 0, "creation_date": 1480939445, "post_id": 40971614, "comment_id": 69156721, "body": "@M.Deinum I do have a <code>Application.kt</code> with <code>@SpringBootApplication</code>, I&#39;ll edit the question and add it"}, {"owner": {"reputation": 93551, "user_id": 2696260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qHEzx.png?s=128&g=1", "display_name": "M. Deinum", "link": "https://stackoverflow.com/users/2696260/m-deinum"}, "edited": false, "score": 0, "creation_date": 1480939780, "post_id": 40971614, "comment_id": 69156913, "body": "Remove all datasource stuff from the dao. And just put an <code>@Autowired</code> field for <code>DataSource</code> in there. And don&#39;t create a new instance yourself (as, judging from the stack trace, you are doing)."}, {"owner": {"reputation": 7128, "user_id": 4189582, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rJzuadzQg0o/AAAAAAAAAAI/AAAAAAAAABQ/lRX62PozZNA/photo.jpg?sz=128", "display_name": "Ivar Reukers", "link": "https://stackoverflow.com/users/4189582/ivar-reukers"}, "reply_to_user": {"reputation": 93551, "user_id": 2696260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qHEzx.png?s=128&g=1", "display_name": "M. Deinum", "link": "https://stackoverflow.com/users/2696260/m-deinum"}, "edited": false, "score": 0, "creation_date": 1480940253, "post_id": 40971614, "comment_id": 69157187, "body": "Ok it&#39;s now returning <code>java.lang.IllegalArgumentException: dataSource or dataSourceClassName or jdbcUrl is required.</code> (Still using the same application.properties file as mentioned in the question)"}, {"owner": {"reputation": 7128, "user_id": 4189582, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rJzuadzQg0o/AAAAAAAAAAI/AAAAAAAAABQ/lRX62PozZNA/photo.jpg?sz=128", "display_name": "Ivar Reukers", "link": "https://stackoverflow.com/users/4189582/ivar-reukers"}, "reply_to_user": {"reputation": 93551, "user_id": 2696260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qHEzx.png?s=128&g=1", "display_name": "M. Deinum", "link": "https://stackoverflow.com/users/2696260/m-deinum"}, "edited": false, "score": 0, "creation_date": 1480941178, "post_id": 40971614, "comment_id": 69157775, "body": "@M.Deinum edited the question to match current code"}, {"owner": {"reputation": 93551, "user_id": 2696260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qHEzx.png?s=128&g=1", "display_name": "M. Deinum", "link": "https://stackoverflow.com/users/2696260/m-deinum"}, "edited": false, "score": 0, "creation_date": 1480942168, "post_id": 40971614, "comment_id": 69158355, "body": "And are you auto wiring everything? Service, dao, controller etc.? You also have all needed dependencies? <code>spring-boot-starter-jdbc</code> and your jdbc driver is on the classpath."}, {"owner": {"reputation": 7128, "user_id": 4189582, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rJzuadzQg0o/AAAAAAAAAAI/AAAAAAAAABQ/lRX62PozZNA/photo.jpg?sz=128", "display_name": "Ivar Reukers", "link": "https://stackoverflow.com/users/4189582/ivar-reukers"}, "reply_to_user": {"reputation": 93551, "user_id": 2696260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qHEzx.png?s=128&g=1", "display_name": "M. Deinum", "link": "https://stackoverflow.com/users/2696260/m-deinum"}, "edited": false, "score": 0, "creation_date": 1480942441, "post_id": 40971614, "comment_id": 69158524, "body": "No this is the first and only <code>@Autowire</code> I have ever written :S. I looked up some tutorials but they were all based around an <code>xml</code> file which I don&#39;t have"}, {"owner": {"reputation": 93551, "user_id": 2696260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qHEzx.png?s=128&g=1", "display_name": "M. Deinum", "link": "https://stackoverflow.com/users/2696260/m-deinum"}, "edited": false, "score": 0, "creation_date": 1480942568, "post_id": 40971614, "comment_id": 69158605, "body": "You shouldn&#39;t be using new in your code... You should auto wire everything."}, {"owner": {"reputation": 7128, "user_id": 4189582, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rJzuadzQg0o/AAAAAAAAAAI/AAAAAAAAABQ/lRX62PozZNA/photo.jpg?sz=128", "display_name": "Ivar Reukers", "link": "https://stackoverflow.com/users/4189582/ivar-reukers"}, "reply_to_user": {"reputation": 93551, "user_id": 2696260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qHEzx.png?s=128&g=1", "display_name": "M. Deinum", "link": "https://stackoverflow.com/users/2696260/m-deinum"}, "edited": false, "score": 0, "creation_date": 1480942684, "post_id": 40971614, "comment_id": 69158684, "body": "All I want is to use the <code>jdbc.url</code>, <code>jdbc.username</code> and <code>jdbc.password</code> inside my BaseDAO class where it will look it up from the <code>application.properties</code> and will change the directory it&#39;s looking in when testing"}, {"owner": {"reputation": 93551, "user_id": 2696260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qHEzx.png?s=128&g=1", "display_name": "M. Deinum", "link": "https://stackoverflow.com/users/2696260/m-deinum"}, "edited": false, "score": 0, "creation_date": 1480942737, "post_id": 40971614, "comment_id": 69158712, "body": "Again.... You have to auto wire the beans... You shouldn&#39;t be creating new instances... You want to use Spring so you have to use the spring managed instances..."}, {"owner": {"reputation": 7128, "user_id": 4189582, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rJzuadzQg0o/AAAAAAAAAAI/AAAAAAAAABQ/lRX62PozZNA/photo.jpg?sz=128", "display_name": "Ivar Reukers", "link": "https://stackoverflow.com/users/4189582/ivar-reukers"}, "reply_to_user": {"reputation": 93551, "user_id": 2696260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qHEzx.png?s=128&g=1", "display_name": "M. Deinum", "link": "https://stackoverflow.com/users/2696260/m-deinum"}, "edited": false, "score": 0, "creation_date": 1480943544, "post_id": 40971614, "comment_id": 69159173, "body": "added <code>@Autowired</code> above all instances of classes instead of creating them. But now it just throws <code>kotlin.UninitializedPropertyAccessException: lateinit property dao has not been initialized</code> that my DAO hasn&#39;t been initialized"}, {"owner": {"reputation": 93551, "user_id": 2696260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qHEzx.png?s=128&g=1", "display_name": "M. Deinum", "link": "https://stackoverflow.com/users/2696260/m-deinum"}, "edited": false, "score": 0, "creation_date": 1480944014, "post_id": 40971614, "comment_id": 69159442, "body": "Your dao should be annotated with <code>@Repository</code> and your service with <code>@Service</code>"}, {"owner": {"reputation": 7128, "user_id": 4189582, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rJzuadzQg0o/AAAAAAAAAAI/AAAAAAAAABQ/lRX62PozZNA/photo.jpg?sz=128", "display_name": "Ivar Reukers", "link": "https://stackoverflow.com/users/4189582/ivar-reukers"}, "reply_to_user": {"reputation": 93551, "user_id": 2696260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qHEzx.png?s=128&g=1", "display_name": "M. Deinum", "link": "https://stackoverflow.com/users/2696260/m-deinum"}, "edited": false, "score": 0, "creation_date": 1480944356, "post_id": 40971614, "comment_id": 69159659, "body": "Had to mark my classes as <code>open</code> to remove an error, but after doing that, I got the same error (<code>lateinit property dao has not been initialized</code>)"}, {"owner": {"reputation": 93551, "user_id": 2696260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qHEzx.png?s=128&g=1", "display_name": "M. Deinum", "link": "https://stackoverflow.com/users/2696260/m-deinum"}, "edited": false, "score": 0, "creation_date": 1480946788, "post_id": 40971614, "comment_id": 69161332, "body": "You should still let everything injected, also in your controller."}, {"owner": {"reputation": 7128, "user_id": 4189582, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rJzuadzQg0o/AAAAAAAAAAI/AAAAAAAAABQ/lRX62PozZNA/photo.jpg?sz=128", "display_name": "Ivar Reukers", "link": "https://stackoverflow.com/users/4189582/ivar-reukers"}, "reply_to_user": {"reputation": 93551, "user_id": 2696260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qHEzx.png?s=128&g=1", "display_name": "M. Deinum", "link": "https://stackoverflow.com/users/2696260/m-deinum"}, "edited": false, "score": 0, "creation_date": 1480947004, "post_id": 40971614, "comment_id": 69161480, "body": "Everything is injected (well it isn&#39;t that&#39;s the problem) except domain classes and external Utils which only get used"}, {"owner": {"reputation": 7128, "user_id": 4189582, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rJzuadzQg0o/AAAAAAAAAAI/AAAAAAAAABQ/lRX62PozZNA/photo.jpg?sz=128", "display_name": "Ivar Reukers", "link": "https://stackoverflow.com/users/4189582/ivar-reukers"}, "reply_to_user": {"reputation": 93551, "user_id": 2696260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qHEzx.png?s=128&g=1", "display_name": "M. Deinum", "link": "https://stackoverflow.com/users/2696260/m-deinum"}, "edited": false, "score": 0, "creation_date": 1480947160, "post_id": 40971614, "comment_id": 69161595, "body": "and the <code>BaseDAO</code>&#39;s constructor is called as a result of extending it"}], "answers": [{"comments": [{"owner": {"reputation": 7128, "user_id": 4189582, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rJzuadzQg0o/AAAAAAAAAAI/AAAAAAAAABQ/lRX62PozZNA/photo.jpg?sz=128", "display_name": "Ivar Reukers", "link": "https://stackoverflow.com/users/4189582/ivar-reukers"}, "edited": false, "score": 0, "creation_date": 1480933558, "post_id": 40971902, "comment_id": 69152994, "body": "I&#39;m trying this now, the problem now is that I <code>extend</code> the <code>BaseDAO</code> on all my <code>DAO</code>&#39;s. Using <code>class SomeDAO : BaseDAO() { }</code> returns <code>Multiple markers at this line - No value passed for parameter username - No value passed for parameter password - No value passed for parameter url</code>"}], "tags": [], "owner": {"reputation": 348, "user_id": 1113124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04cba3115ae7b7509934c23ce2875a93?s=128&d=identicon&r=PG", "display_name": "Piotr Jagielski", "link": "https://stackoverflow.com/users/1113124/piotr-jagielski"}, "is_accepted": false, "score": 3, "last_activity_date": 1480933193, "creation_date": 1480933193, "answer_id": 40971902, "question_id": 40971614, "link": "https://stackoverflow.com/questions/40971614/retrieve-values-from-properties-file-lateinit-property-has-not-been-initial/40971902#40971902", "title": "Retrieve values from `.properties` file | lateinit property has not been initialized", "body": "<p>The most common way we're doing it in our project is by constructor injection with <code>@Value</code> (works with Spring >= 4.3):</p>\n\n<pre><code>@PropertySource(\"classpath:config.properties\")\n@Component\nopen class BaseDAO(\n        @Value(\"\\${jdbc.url}\") private val url: String,\n        @Value(\"\\${jdbc.username}\") private val username: String,\n        @Value(\"\\${jdbc.password}\") private val password: String\n) {\n\n    val config: HikariConfig = HikariConfig()\n\n    init {\n        Class.forName(\"org.postgresql.Driver\").newInstance()\n        config.jdbcUrl = url\n        config.username = username\n        config.password = password\n        config.minimumIdle = 2\n        config.maximumPoolSize = 20\n        config.idleTimeout = 60000\n    }\n\n}\n</code></pre>\n\n<p>I think you don't need this <code>companion object</code> to create a pool, just use a property inside your DAO. </p>\n"}], "owner": {"reputation": 7128, "user_id": 4189582, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rJzuadzQg0o/AAAAAAAAAAI/AAAAAAAAABQ/lRX62PozZNA/photo.jpg?sz=128", "display_name": "Ivar Reukers", "link": "https://stackoverflow.com/users/4189582/ivar-reukers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3787, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1480941316, "creation_date": 1480932122, "last_edit_date": 1480941316, "question_id": 40971614, "link": "https://stackoverflow.com/questions/40971614/retrieve-values-from-properties-file-lateinit-property-has-not-been-initial", "title": "Retrieve values from `.properties` file | lateinit property has not been initialized", "body": "<p>I'm trying to create a spring boot application were my class will read from a file <code>src/main/resources/application.properties</code>. But for some reason I can't get my Kotlin to work with these values (returning a <code>lateinit property url has not been initialized</code>.</p>\n\n<p><strong>src/main/resources/application.properties</strong> (note, not explicitly called anywhere?)</p>\n\n<pre><code>spring.datasource.url=someUrl\nspring.datasource.username=root\nspring.datasource.password=root\nspring.datasource.driverClassName=org.postgresql.Driver\n</code></pre>\n\n<p><strong>Kotlin</strong></p>\n\n<pre><code>@Component\nopen class BaseDAO() {\n     @Autowired\n     lateinit var datasource: DataSource;\n  }\n</code></pre>\n\n<p><strong>new error</strong></p>\n\n<pre><code>kotlin.UninitializedPropertyAccessException: lateinit property datasource has not been initialized\n    at quintor.rest.persistence.BaseDAO.getDatasource(BaseDAO.kt:18) ~[classes/:na]\n    at quintor.rest.persistence.EventDAO.getMultipleEvents(EventDAO.kt:45) ~[classes/:na]\n    at quintor.rest.persistence.EventDAO.getComingOpenEvents(EventDAO.kt:98) ~[classes/:na]\n    at quintor.rest.persistence.EventService.getComingEvents(EventService.kt:23) ~[classes/:na]\n    at quintor.rest.spring.EventsController.getEvents(EventsController.kt:37) ~[classes/\n</code></pre>\n\n<p><strong>Application</strong></p>\n\n<pre><code>@SpringBootApplication\nopen class Application : SpringBootServletInitializer(){\n    companion object {\n        @JvmStatic fun main(args: Array&lt;String&gt;) {\n            SpringApplication.run(Application::class.java, *args);\n        }\n        @Override\n        protected  fun configure(app:SpringApplicationBuilder):SpringApplicationBuilder{\n            return app.sources(Application::class.java);\n\n        }\n    }\n}\n</code></pre>\n\n<p>EventDAO (mentioned in the error) is just extending the BaseDAO and using the <code>datasource</code></p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 22943, "user_id": 870674, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0463b7a46ed49025082a795ac2f67f49?s=128&d=identicon&r=PG", "display_name": "klimat", "link": "https://stackoverflow.com/users/870674/klimat"}, "edited": false, "score": 0, "creation_date": 1481121002, "post_id": 40967544, "comment_id": 69247167, "body": "Hey. Accept some answer to make this community better :)"}], "answers": [{"comments": [{"owner": {"reputation": 22943, "user_id": 870674, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0463b7a46ed49025082a795ac2f67f49?s=128&d=identicon&r=PG", "display_name": "klimat", "link": "https://stackoverflow.com/users/870674/klimat"}, "reply_to_user": {"reputation": 471, "user_id": 1905534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6f03644e3ffd2de983e7787268c16a9?s=128&d=identicon&r=PG", "display_name": "Jacob", "link": "https://stackoverflow.com/users/1905534/jacob"}, "edited": false, "score": 0, "creation_date": 1480931850, "post_id": 40968688, "comment_id": 69151978, "body": "@Jacob It will :)"}, {"owner": {"reputation": 1561, "user_id": 1772342, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/pvNgt.jpg?s=128&g=1", "display_name": "breandan", "link": "https://stackoverflow.com/users/1772342/breandan"}, "edited": false, "score": 0, "creation_date": 1480952732, "post_id": 40968688, "comment_id": 69165362, "body": "Thanks! What about if the property is a primitive type?"}, {"owner": {"reputation": 22943, "user_id": 870674, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0463b7a46ed49025082a795ac2f67f49?s=128&d=identicon&r=PG", "display_name": "klimat", "link": "https://stackoverflow.com/users/870674/klimat"}, "edited": false, "score": 1, "creation_date": 1480953621, "post_id": 40968688, "comment_id": 69165930, "body": "The easiest option it to wrap the primitive in a class ;)"}, {"owner": {"reputation": 747, "user_id": 4568811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a57f6b9a7464d58fcbf2698ba07be18?s=128&d=identicon&r=PG&f=1", "display_name": "harshtuna", "link": "https://stackoverflow.com/users/4568811/harshtuna"}, "edited": false, "score": 1, "creation_date": 1481091521, "post_id": 40968688, "comment_id": 69229005, "body": "for primitive properties - <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.properties/-delegates/not-null.html\" rel=\"nofollow noreferrer\"><code>Delegates.notNull()</code></a> + see <a href=\"http://stackoverflow.com/questions/36623177/kotlin-property-initialization-using-by-lazy-vs-lateinit\" title=\"kotlin property initialization using by lazy vs lateinit\">stackoverflow.com/questions/36623177/&hellip;</a>"}], "tags": [], "owner": {"reputation": 22943, "user_id": 870674, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0463b7a46ed49025082a795ac2f67f49?s=128&d=identicon&r=PG", "display_name": "klimat", "link": "https://stackoverflow.com/users/870674/klimat"}, "is_accepted": true, "score": 3, "last_activity_date": 1480921027, "creation_date": 1480921027, "answer_id": 40968688, "question_id": 40967544, "link": "https://stackoverflow.com/questions/40967544/how-to-explicitly-invoke-an-objects-init-block/40968688#40968688", "title": "How to explicitly invoke an object&#39;s init block?", "body": "<p>You can use <code>lateinit</code> to say to the compiler \"I'll initialize that property later\".</p>\n\n<pre><code>lateinit var project: Project\nlateinit var document: String\nlateinit var findModel: FindModel\nlateinit var findManager: FindManager\n</code></pre>\n\n<p>Then you can omit initialization in <code>init</code> block and do it whenever you want. </p>\n\n<p>A notice from the official documentation:</p>\n\n<blockquote>\n  <p>The modifier can only be used on var properties declared inside the\n  body of a class (not in the primary constructor), and only when the\n  property does not have a custom getter or setter. The type of the\n  property must be non-null, and it must not be a primitive type.</p>\n  \n  <p>Accessing a lateinit property before it has been initialized throws a\n  special exception that clearly identifies the property being accessed\n  and the fact that it hasn't been initialized.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 6473, "user_id": 2660462, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e7866e763430b8848f14ffdacb61b99f?s=128&d=identicon&r=PG", "display_name": "Lukas Lechner", "link": "https://stackoverflow.com/users/2660462/lukas-lechner"}, "is_accepted": false, "score": 0, "last_activity_date": 1481014693, "creation_date": 1481014693, "answer_id": 40991350, "question_id": 40967544, "link": "https://stackoverflow.com/questions/40967544/how-to-explicitly-invoke-an-objects-init-block/40991350#40991350", "title": "How to explicitly invoke an object&#39;s init block?", "body": "<p>I do not know if it is possible to explicitly call the init block.</p>\n\n<p>But I think this should do it for you:</p>\n\n<pre><code>object MyClass {\n\n    var editor: Editor = getDefaultEditor()\n        set(value) {\n             field = value\n             init()\n        }\n\n    lateinit var project: Project\n    lateinit var document: String\n    lateinit findModel: FindModel\n    lateinit var findManager: FindManager\n\n    init {\n        init()\n    }\n\n    private fun init() {\n        project = editor.project!!\n        document = editor.document.charsSequence.toString().toLowerCase()\n        findModel = FindManager.getInstance(project).findInFileModel.clone()\n        findManager = FindManager.getInstance(project)\n    }\n}\n</code></pre>\n\n<p>But a better design would simply be this:</p>\n\n<pre><code>object MyClass {\n\n    var editor: Editor = getDefaultEditor()\n\n    fun getProject() = editor.project!!\n    fun getDocument() = editor.document.charsSequence.toString().toLowerCase()\n    fun getFindModel() = FindManager.getInstance(getProject()).findInFileModel.clone()\n    fun getFindManager() = FindManager.getInstance(getProject())\n}\n</code></pre>\n"}], "owner": {"reputation": 1561, "user_id": 1772342, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/pvNgt.jpg?s=128&g=1", "display_name": "breandan", "link": "https://stackoverflow.com/users/1772342/breandan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 418, "favorite_count": 0, "accepted_answer_id": 40968688, "answer_count": 2, "score": 1, "last_activity_date": 1481014693, "creation_date": 1480915124, "last_edit_date": 1480915472, "question_id": 40967544, "link": "https://stackoverflow.com/questions/40967544/how-to-explicitly-invoke-an-objects-init-block", "title": "How to explicitly invoke an object&#39;s init block?", "body": "<p>I have a class that looks something like the following. On line 7, I would like to invoke the <code>init</code> block directly, however this does not seem to be possible without using reflection.</p>\n\n<pre><code>object MyClass {\n    var editor: Editor = getDefaultEditor()\n        set(value) {\n            field = value\n\n            //Todo: figure out how to avoid duplicating init block\n            project = editor.project!!\n            document = editor.document.charsSequence.toString().toLowerCase()\n            findModel = FindManager.getInstance(project).findInFileModel.clone()\n            findManager = FindManager.getInstance(project)\n        }\n\n    var project: Project\n    var document: String\n    var findModel: FindModel\n    var findManager: FindManager\n\n    init {\n        project = editor.project!!\n        document = editor.document.charsSequence.toString().toLowerCase()\n        findModel = FindManager.getInstance(project).findInFileModel.clone()\n        findManager = FindManager.getInstance(project)\n    }\n}\n</code></pre>\n\n<p>But I need to have the <code>init</code> block in order to initialize the properties without instantiating, so if I replace the code inside the <code>init</code> block with <code>setEditor(getDefaultEditor())</code>, then the compiler will complain that, \"Property must be initialized or be abstract\". How do I avoid duplicating all the stuff inside <code>init</code>?</p>\n"}, {"tags": ["int", "kotlin", "identity"], "answers": [{"tags": [], "owner": {"reputation": 5666, "user_id": 1107109, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Y0wn6.jpg?s=128&g=1", "display_name": "David Frank", "link": "https://stackoverflow.com/users/1107109/david-frank"}, "is_accepted": true, "score": 11, "last_activity_date": 1480893297, "creation_date": 1480893297, "answer_id": 40964860, "question_id": 40964804, "link": "https://stackoverflow.com/questions/40964804/kotlin-int-boxed-identity/40964860#40964860", "title": "kotlin int boxed identity", "body": "<p>This article explains it: <a href=\"http://javapapers.com/java/java-integer-cache/\" rel=\"noreferrer\">http://javapapers.com/java/java-integer-cache/</a></p>\n\n<p>The basic idea is that the Java standard lib uses a cache for values between -128 and 127, therefore they always refer to the same Integer object (by identity).</p>\n"}], "owner": {"reputation": 103, "user_id": 6693662, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-9msMolmg9EI/AAAAAAAAAAI/AAAAAAAAASM/bWlGmOToL7s/photo.jpg?sz=128", "display_name": "Tikiram Ruiz", "link": "https://stackoverflow.com/users/6693662/tikiram-ruiz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 908, "favorite_count": 0, "accepted_answer_id": 40964860, "answer_count": 1, "score": 7, "last_activity_date": 1480893297, "creation_date": 1480892876, "question_id": 40964804, "link": "https://stackoverflow.com/questions/40964804/kotlin-int-boxed-identity", "title": "kotlin int boxed identity", "body": "<p>In the documentation we have </p>\n\n<blockquote>\n  <p>Note that boxing of numbers does not preserve identity</p>\n</blockquote>\n\n<p>but the next examples give different results</p>\n\n<pre><code>val number1 = 127\nval b1 : Int? = number1\nval b2 : Int? = number1\nprint(b1 === b2) // this prints true\n\nval number2 = 128\nval c1 : Int? = number2\nval c2 : Int? = number2\nprint(c1 === c2) // this prints false\n</code></pre>\n\n<p>In numbers greater than 127 works as expected but not when is above 128 (8 bits), why?</p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 10, "last_activity_date": 1480886530, "last_edit_date": 1495542361, "creation_date": 1480884052, "answer_id": 40963397, "question_id": 40962892, "link": "https://stackoverflow.com/questions/40962892/kotlin-char-compareto-fails/40963397#40963397", "title": "Kotlin Char compareTo fails", "body": "<p><strong>TL;DR</strong> Apparently, this is a compiler bug.</p>\n\n<p>The reason for this behavior lies in the bytecode that the Kotlin compiler generates for these two calls. (If you use IntelliJ IDEA, you can inspect the bytecode using <a href=\"https://stackoverflow.com/questions/35538049/kotlin-bytecode\">the bytecode viewing tool</a>).</p>\n\n<p>First, the bytecode generated for the <code>'z'.compareTo('z')</code> call is:</p>\n\n<pre><code>LINENUMBER 10 L3\nBIPUSH 122\nBIPUSH 122\nINVOKESTATIC kotlin/jvm/internal/Intrinsics.compare (II)I\n</code></pre>\n\n<p>It calls <a href=\"https://github.com/JetBrains/kotlin/blob/master/core/runtime.jvm/src/kotlin/jvm/internal/Intrinsics.java#L158\" rel=\"nofollow noreferrer\"><code>kotlin.jvm.internal.Intrisics.compare()</code></a> that compares two <code>Int</code>s, and the <code>Char</code>s are pushed to the stack directly as <code>Int</code>s (<code>BIPUSH</code> means <em>push byte as integer</em>).</p>\n\n<p>But if you look at the bytecode for <code>pair.first.compareTo(pair.second)</code>, you will find something like this:</p>\n\n<pre><code>ALOAD 1\nINVOKEVIRTUAL kotlin/Pair.getFirst ()Ljava/lang/Object;\nCHECKCAST java/lang/Number\nINVOKEVIRTUAL java/lang/Number.intValue ()I\n\nALOAD 1\nINVOKEVIRTUAL kotlin/Pair.getSecond ()Ljava/lang/Object;\nCHECKCAST java/lang/Number\nINVOKEVIRTUAL java/lang/Number.intValue ()I\n\nINVOKESTATIC kotlin/jvm/internal/Intrinsics.compare (II)I\n</code></pre>\n\n<p>It calls <code>kotlin.jvm.internal.Intrisics.compare</code>, too, but here's what it tries to do before:</p>\n\n<ul>\n<li>Get the component from the pair (the <code>ALOAD 1</code> and <code>INVOKEVIRTUAL ...</code> lines) </li>\n<li>Check that the object can be cast to <code>Number</code> (<code>CHECKCAST ...</code>)</li>\n<li>Take <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Number.html#intValue()\" rel=\"nofollow noreferrer\"><code>java.lang.Number.intValue()</code></a> (<code>INVOKEVIRTUAL ...</code>)</li>\n</ul>\n\n<p>The second and the third lines are the culprit, <code>Char</code> is not a <code>Number</code>. It simply looks like the compiler generated incorrect bytecode for this comparison (it would be correct for the <code>Number</code> types, seems like <code>Char</code> is just not handled separately).</p>\n\n<p>There is <a href=\"https://youtrack.jetbrains.com/issue/KT-15105\" rel=\"nofollow noreferrer\">an issue about this</a> in the Kotlin issue tracker, it will likely be fixed in future releases.</p>\n\n<hr>\n\n<p>To fix the call in your code for now, you can convert the <code>Char</code>s manually before the call:</p>\n\n<pre><code>pair.first.toInt().compareTo(pair.second.toInt())\n</code></pre>\n"}], "owner": {"reputation": 5410, "user_id": 1191727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/684ae4319fded1d947c5f7181b28b944?s=128&d=identicon&r=PG", "display_name": "chalimartines", "link": "https://stackoverflow.com/users/1191727/chalimartines"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 670, "favorite_count": 1, "accepted_answer_id": 40963397, "answer_count": 1, "score": 9, "last_activity_date": 1521724837, "creation_date": 1480880943, "last_edit_date": 1521724837, "question_id": 40962892, "link": "https://stackoverflow.com/questions/40962892/kotlin-char-compareto-fails", "title": "Kotlin Char compareTo fails", "body": "<p>I have a following code snippet in Kotlin:</p>\n\n<pre><code>val pair: Pair&lt;Char,Char&gt; = 'z' to 'z'\nval comparison = pair.first.compareTo(pair.second)\nprintln(comparison)\n</code></pre>\n\n<p>It fails at the second line with the following exception when I try to run it:</p>\n\n<blockquote>\n  <p>java.lang.ClassCastException: java.lang.Character cannot be cast to java.lang.Number</p>\n</blockquote>\n\n<p>IDE (IntelliJ) doesn't complain about any wrong type. The issue is somehow related to the fact that Chars are coming from <code>Pair&lt;Char, Char&gt;</code> because <code>'z'.compareTo('z')</code> works fine. Do you know how Kotlin resolves the following call?</p>\n\n<p>I'm using Kotlin 1.0.4</p>\n"}, {"tags": ["spring-data", "kotlin", "spring-data-elasticsearch"], "comments": [{"owner": {"reputation": 11707, "user_id": 4393565, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/19ab0903bafafe65cabf872f3ef5cff6?s=128&d=identicon&r=PG", "display_name": "P.J.Meisch", "link": "https://stackoverflow.com/users/4393565/p-j-meisch"}, "edited": false, "score": 0, "creation_date": 1492273192, "post_id": 40959722, "comment_id": 73914561, "body": "thanks for that question, your code just saved me a lot of work."}, {"owner": {"reputation": 707, "user_id": 375995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5bb103603b93d448f67b662833c19623?s=128&d=identicon&r=PG", "display_name": "Alexandros", "link": "https://stackoverflow.com/users/375995/alexandros"}, "edited": false, "score": 0, "creation_date": 1554369717, "post_id": 40959722, "comment_id": 97729470, "body": "mine as well. But the question is still valid! I had the same problem and simply found this question by googling."}], "owner": {"reputation": 885, "user_id": 5477388, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/834fd4bc3204193f94bfe9664b87747c?s=128&d=identicon&r=PG&f=1", "display_name": "Geert Olaerts", "link": "https://stackoverflow.com/users/5477388/geert-olaerts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 764, "favorite_count": 1, "answer_count": 0, "score": 5, "last_activity_date": 1480862218, "creation_date": 1480862218, "question_id": 40959722, "link": "https://stackoverflow.com/questions/40959722/why-doesnt-spring-data-elasticsearch-use-the-objectmapper-from-the-spring-conte", "title": "Why doesn&#39;t spring-data-elasticsearch use the objectmapper from the spring context", "body": "<p>I am developing an application that uses spring-data-elasticsearch for the data storage. I am also writing this application using kotlin. This has some special quirks, one being that jackson needs the jackson-module-kotlin (to get rid of the problems with no args constructor). I also use the jackson-datatype-jsr310 module.</p>\n\n<p>Spring boot is nice enough to pick these modules up from the classpath and register them automatically. I also have the write-dates-as-timestamps option set to false. However spring-data-elasticsearch seems to be oblivious to it. I figured that it is because the DefaultEntityMapper news an objectmapper and doesn't use the one from the spring context. I was wondering why? I fixed it by providing some extra configuration that makes sure that spring-data-elasticsearch uses the objectmapper that i get from the spring context:</p>\n\n<pre><code>@Configuration\nopen class ElasticsearchConfig(val elasticsearchEntityMapper: ElasticsearchEntityMapper) {\n\n    @Bean\n    open fun elasticsearchTemplate(client: Client) = ElasticsearchTemplate(client, DefaultResultMapper(elasticsearchEntityMapper))\n\n}\n\n@Component\nclass ElasticsearchEntityMapper(val objectMapper: ObjectMapper) : EntityMapper {\n    override fun mapToString(`object`: Any?) = objectMapper.writeValueAsString(`object`)\n\n    override fun &lt;T : Any?&gt; mapToObject(source: String?, clazz: Class&lt;T&gt;?) = objectMapper.readValue(source, clazz)\n\n}\n</code></pre>\n\n<p>Is there a better/easier way to make sure spring-data-elasticsearch uses the objectmapper from the context?</p>\n"}, {"tags": ["clojure", "kotlin", "lazy-sequences"], "answers": [{"tags": [], "owner": {"reputation": 2142, "user_id": 117750, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a3c5aa6a5e3d8e33424f6ac89400c2ec?s=128&d=identicon&r=PG", "display_name": "arnab", "link": "https://stackoverflow.com/users/117750/arnab"}, "is_accepted": false, "score": 0, "last_activity_date": 1480706955, "creation_date": 1480706955, "answer_id": 40939617, "question_id": 40938716, "link": "https://stackoverflow.com/questions/40938716/how-to-cycle-a-list-infinitely-and-lazily-in-kotlin/40939617#40939617", "title": "How to cycle a list infinitely and lazily in Kotlin?", "body": "<p>Paraphrasing the discussion on <a href=\"https://kotlinlang.slack.com/archives/getting-started/p1480703217004177\" rel=\"nofollow noreferrer\">kotlin Slack</a>:</p>\n\n<ul>\n<li><p>using <code>List#modulo</code> would make this simpler, but not as elegant as <code>cycle</code> still, since negative indexes will still need to be handled.</p></li>\n<li><p>One option to implement a cyclical list is a <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.sequences/\" rel=\"nofollow noreferrer\"><code>Sequence</code></a>. However, a custom <code>Sequence</code> will need to be written, or generated using <code>generateSequence</code>.  We thought it's an overkill for this situation.</p></li>\n</ul>\n\n<p>Eventually I went with:</p>\n\n<ol>\n<li>Making <code>Direction</code> aware of <code>next</code> and <code>previous</code>:</li>\n</ol>\n\n<pre><code>enum class Direction {\n    N, E, S, W;\n\n    private val order by lazy { listOf(N, E, S, W) }\n\n    fun add(turns: Int): Direction {\n        val currentIndex = order.indexOf(this)\n\n        var nextIndex = (currentIndex + turns) % order.size\n        return order.possiblyNegativeLookup(nextIndex)\n    }\n\n    fun subtract(turns: Int) = add(-1 * turns)\n    fun next(): Direction = add(1)\n    fun previous(): Direction = subtract(1)\n}\n</code></pre>\n\n<ol start=\"2\">\n<li>Extending <code>List</code> with <code>possiblyNegativeLookup</code>:</li>\n</ol>\n\n<pre><code>fun &lt;E&gt; List&lt;E&gt;.possiblyNegativeLookup(i: Int): E {\n    return if (i &lt; 0) this[this.size + i] else this[i]\n}\n</code></pre>\n\n<p>So the final code turns into:</p>\n\n<pre><code>val nextHeading = if (move.turn == Turn.R) heading.next() else heading.previous()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2142, "user_id": 117750, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a3c5aa6a5e3d8e33424f6ac89400c2ec?s=128&d=identicon&r=PG", "display_name": "arnab", "link": "https://stackoverflow.com/users/117750/arnab"}, "edited": false, "score": 0, "creation_date": 1480707325, "post_id": 40939653, "comment_id": 69090835, "body": "That looks simple! Thanks, I will try it out."}, {"owner": {"reputation": 7051, "user_id": 1916449, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d5611f16fc8a1b73a03e44297682824f?s=128&d=identicon&r=PG", "display_name": "arekolek", "link": "https://stackoverflow.com/users/1916449/arekolek"}, "edited": false, "score": 0, "creation_date": 1502727931, "post_id": 40939653, "comment_id": 78315458, "body": "Why not just <code>generateSequence { this }.flatten()</code>? Do you need the seed?"}], "tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": false, "score": 4, "last_activity_date": 1480707133, "creation_date": 1480707133, "answer_id": 40939653, "question_id": 40938716, "link": "https://stackoverflow.com/questions/40938716/how-to-cycle-a-list-infinitely-and-lazily-in-kotlin/40939653#40939653", "title": "How to cycle a list infinitely and lazily in Kotlin?", "body": "<p>Custom sequence, which repeats indefinitely the given sequence or list can be written quite easily in terms of <code>flatten</code>:</p>\n\n<pre><code>fun &lt;T&gt; Sequence&lt;T&gt;.repeatIndefinitely(): Sequence&lt;T&gt; = \n    generateSequence(this) { this }.flatten()\n\nfun &lt;T&gt; List&lt;T&gt;.repeatIndefinitely(): Sequence&lt;T&gt; =\n    this.asSequence().repeatIndefinitely()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": false, "score": 4, "last_activity_date": 1480714363, "last_edit_date": 1480714363, "creation_date": 1480712877, "answer_id": 40940840, "question_id": 40938716, "link": "https://stackoverflow.com/questions/40938716/how-to-cycle-a-list-infinitely-and-lazily-in-kotlin/40940840#40940840", "title": "How to cycle a list infinitely and lazily in Kotlin?", "body": "\n\n<p>You can cycle through a list/collection in Kotlin by generating a sequence that returns the list/collection repeatedly and then flattening it. e.g.:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>generateSequence { listOf(\"a\", \"b\") }.flatten().take(5).toList()\n// [a, b, a, b, a]\n</code></pre>\n\n<p>You can define your own modulo function for coercing both negative and positive numbers to valid indices to access elements in a list (see also Google Guava's <a href=\"https://github.com/google/guava/blob/v20.0/guava/src/com/google/common/math/IntMath.java#L373-L395\" rel=\"nofollow noreferrer\"><code>IntMath.mod(int, int)</code></a>):</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>infix fun Int.modulo(modulus: Int): Int {\n    if (modulus &lt;= 0) throw ArithmeticException(\"modulus $modulus must be &gt; 0\")\n    val remainder = this % modulus\n    return if (remainder &gt;= 0) remainder else remainder + modulus\n}\n\nval list = listOf(\"a\", \"b\", \"c\", \"d\")\nlist[-1 modulo list.size] // last element\nlist[-2 modulo list.size] // second to last element\nlist[+9 modulo list.size] // second element\nlist[-12 modulo list.size] // first element\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1349, "user_id": 2465785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7192d5231450c0ccca6ad473ce1d75?s=128&d=identicon&r=PG", "display_name": "William Leung", "link": "https://stackoverflow.com/users/2465785/william-leung"}, "edited": false, "score": 0, "creation_date": 1545655084, "post_id": 40942463, "comment_id": 94670463, "body": "I think the best answer should be this <a href=\"https://stackoverflow.com/questions/40938716/how-to-cycle-a-list-infinitely-and-lazily-in-kotlin/40940840#40940840\" title=\"how to cycle a list infinitely and lazily in kotlin\">stackoverflow.com/questions/40938716/&hellip;</a> remove the last <code>toList()</code> call, that should be lazy"}, {"owner": {"reputation": 8718, "user_id": 511200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c42635853936e509f76ece9d8187c4aa?s=128&d=identicon&r=PG", "display_name": "danneu", "link": "https://stackoverflow.com/users/511200/danneu"}, "edited": false, "score": 0, "creation_date": 1549414972, "post_id": 40942463, "comment_id": 95891326, "body": "Well, the .toList() is only for demonstration purposes. Without it, my example would print &quot;kotlin.sequences.TakeSequence@1fb3ebeb&quot;. It&#39;s not part of the solution. Also, my solution indexes into a single collection which I preferred over the flatten() solution. The benefit of the flatten() solution is that it&#39;s nice to inline."}], "tags": [], "owner": {"reputation": 8718, "user_id": 511200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c42635853936e509f76ece9d8187c4aa?s=128&d=identicon&r=PG", "display_name": "danneu", "link": "https://stackoverflow.com/users/511200/danneu"}, "is_accepted": true, "score": 8, "last_activity_date": 1480802339, "last_edit_date": 1480802339, "creation_date": 1480721596, "answer_id": 40942463, "question_id": 40938716, "link": "https://stackoverflow.com/questions/40938716/how-to-cycle-a-list-infinitely-and-lazily-in-kotlin/40942463#40942463", "title": "How to cycle a list infinitely and lazily in Kotlin?", "body": "<p>Here's <code>cycle</code>:</p>\n\n<pre><code>fun &lt;T : Any&gt; cycle(vararg xs: T): Sequence&lt;T&gt; {\n    var i = 0\n    return generateSequence { xs[i++ % xs.size] }\n}\n\ncycle(\"a\", \"b\").take(5).toList() // [\"a\", \"b\", \"a\", \"b\", \"a\"]\n</code></pre>\n\n<p>Here's how you could implement turn application:</p>\n\n<pre><code>enum class Turn(val step: Int) { L(-1), R(1) }\n\nenum class Direction {\n    N, E, S, W;\n\n    fun turned(turn: Turn): Direction {\n        val mod: (Int, Int) -&gt; Int = { n, d -&gt; ((n % d) + d) % d }\n        return values()[mod(values().indexOf(this) + turn.step, values().size)]\n    }\n}\n</code></pre>\n\n<p>Sounds like <code>modulo</code> is what you're looking for -- negative index wrap-around. Couldn't find it in Kotlin's stdlib so I brought my own.</p>\n\n<pre><code>Direction.N\n    .turned(Turn.R) // E\n    .turned(Turn.R) // S\n    .turned(Turn.R) // W\n    .turned(Turn.R) // N\n    .turned(Turn.L) // W\n</code></pre>\n\n<p><code>Enum#values()</code> and <code>Enum#valueOf(_)</code> are what let you access an enum's members programmatically.</p>\n"}], "owner": {"reputation": 2142, "user_id": 117750, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a3c5aa6a5e3d8e33424f6ac89400c2ec?s=128&d=identicon&r=PG", "display_name": "arnab", "link": "https://stackoverflow.com/users/117750/arnab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1599, "favorite_count": 1, "accepted_answer_id": 40942463, "answer_count": 4, "score": 6, "last_activity_date": 1481870709, "creation_date": 1480703076, "last_edit_date": 1495540801, "question_id": 40938716, "link": "https://stackoverflow.com/questions/40938716/how-to-cycle-a-list-infinitely-and-lazily-in-kotlin", "title": "How to cycle a list infinitely and lazily in Kotlin?", "body": "<p>I have a list of <code>directions</code> and want to find the next direction when I take a right or left turn. Here is the working code I have:</p>\n\n<pre><code>enum class Turn { R, L }\nenum class Direction { N, E, S, W }\nval directionsInRightTurnOrder = listOf(Direction.N, Direction.E, Direction.S, Direction.W)\n\nprivate fun calculateNextHeading(heading: Direction, turn: Turn): Direction {\n    val currentIndex = directionsInRightTurnOrder.indexOf(heading)\n    var nextIndex = currentIndex + if (turn == Turn.R) 1 else -1\n    if (nextIndex &gt;= directionsInRightTurnOrder.size)\n        nextIndex = directionsInRightTurnOrder.size - nextIndex\n    if (nextIndex &lt; 0)\n        nextIndex += directionsInRightTurnOrder.size\n\n    return directionsInRightTurnOrder.get(nextIndex)\n}\n</code></pre>\n\n<ol>\n<li>However, this would be so much simpler and easier to read if I could take the <code>directionsInRightTurnOrder</code> list and cycle through it infinitely (and lazily). In Clojure, I can do that, using <a href=\"https://clojuredocs.org/clojure.core/cycle\" rel=\"noreferrer\">clojure.core/cycle</a>:</li>\n</ol>\n\n<pre class=\"lang-clj prettyprint-override\"><code>(take 5 (cycle [\"a\" \"b\"]))\n# (\"a\" \"b\" \"a\" \"b\" \"a\")\n</code></pre>\n\n<ol start=\"2\">\n<li><p>Another thing that would help is if I could look up in a list using a negative index, like in Ruby or Python:</p>\n\n<ul>\n<li><a href=\"http://rubyquicktips.com/post/996814716/use-negative-array-indices\" rel=\"noreferrer\">http://rubyquicktips.com/post/996814716/use-negative-array-indices</a></li>\n<li><a href=\"https://stackoverflow.com/questions/11367902/negative-index-to-python-list\">Negative index to Python list</a></li>\n</ul></li>\n</ol>\n\n<h2>Question:</h2>\n\n<ul>\n<li>Can I do <code>cycle</code> through a list/collection in Kotlin?</li>\n<li>Is there an idiomatic way to do a negative-index-lookup in Kotlin?</li>\n</ul>\n"}, {"tags": ["android", "debugging", "kotlin"], "comments": [{"owner": {"reputation": 471, "user_id": 1905534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6f03644e3ffd2de983e7787268c16a9?s=128&d=identicon&r=PG", "display_name": "Jacob", "link": "https://stackoverflow.com/users/1905534/jacob"}, "edited": false, "score": 0, "creation_date": 1480930169, "post_id": 40938528, "comment_id": 69150917, "body": "it will be helpful if you post all your build.gradle config."}, {"owner": {"reputation": 3925, "user_id": 3806331, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ab7f221d4245947fd3260c364ffd0645?s=128&d=identicon&r=PG&f=1", "display_name": "johnny_crq", "link": "https://stackoverflow.com/users/3806331/johnny-crq"}, "reply_to_user": {"reputation": 471, "user_id": 1905534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6f03644e3ffd2de983e7787268c16a9?s=128&d=identicon&r=PG", "display_name": "Jacob", "link": "https://stackoverflow.com/users/1905534/jacob"}, "edited": false, "score": 0, "creation_date": 1480932581, "post_id": 40938528, "comment_id": 69152419, "body": "@Jacob added. Please check."}, {"owner": {"reputation": 3925, "user_id": 3806331, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ab7f221d4245947fd3260c364ffd0645?s=128&d=identicon&r=PG&f=1", "display_name": "johnny_crq", "link": "https://stackoverflow.com/users/3806331/johnny-crq"}, "reply_to_user": {"reputation": 471, "user_id": 1905534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6f03644e3ffd2de983e7787268c16a9?s=128&d=identicon&r=PG", "display_name": "Jacob", "link": "https://stackoverflow.com/users/1905534/jacob"}, "edited": false, "score": 0, "creation_date": 1480932678, "post_id": 40938528, "comment_id": 69152468, "body": "i should mention this happens when i make a clean new project. Basically, New Project first grade s sync shows this, with no dependencies."}], "owner": {"reputation": 3925, "user_id": 3806331, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ab7f221d4245947fd3260c364ffd0645?s=128&d=identicon&r=PG&f=1", "display_name": "johnny_crq", "link": "https://stackoverflow.com/users/3806331/johnny-crq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 418, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1480932567, "creation_date": 1480702345, "last_edit_date": 1480932567, "question_id": 40938528, "link": "https://stackoverflow.com/questions/40938528/android-kotlin-task-debug-not-found-in-root-project", "title": "Android Kotlin Task debug not found in root project", "body": "<p>Evertime i make a new project, in the first sync i get this error:</p>\n\n<pre><code>Executing tasks: [:app:generateReleaseSources, :app:prepareReleaseUnitTestDependencies, :app:mockableAndroidJar]\n\nIncremental java compilation is an incubating feature.\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nTask 'debug' not found in root project 'MyLolChat'.\n\n* Try:\nRun gradle tasks to get a list of available tasks. Run with --info or --debug option to get more log output.\n\n* Exception is:\norg.gradle.execution.TaskSelectionException: Task 'debug' not found in root project 'MyLolChat'.\n    at org.gradle.execution.TaskSelector.getSelection(TaskSelector.java:100)\n    at org.gradle.execution.TaskSelector.getSelection(TaskSelector.java:75)\n    at org.gradle.execution.commandline.CommandLineTaskParser.parseTasks(CommandLineTaskParser.java:42)\n    at org.gradle.execution.TaskNameResolvingBuildConfigurationAction.configure(TaskNameResolvingBuildConfigurationAction.java:44)\n    at org.gradle.execution.DefaultBuildConfigurationActionExecuter.configure(DefaultBuildConfigurationActionExecuter.java:48)\n    at org.gradle.execution.DefaultBuildConfigurationActionExecuter.access$000(DefaultBuildConfigurationActionExecuter.java:25)\n    at org.gradle.execution.DefaultBuildConfigurationActionExecuter$1.proceed(DefaultBuildConfigurationActionExecuter.java:54)\n    at org.gradle.execution.DefaultTasksBuildExecutionAction.configure(DefaultTasksBuildExecutionAction.java:44)\n    at org.gradle.execution.DefaultBuildConfigurationActionExecuter.configure(DefaultBuildConfigurationActionExecuter.java:48)\n    at org.gradle.execution.DefaultBuildConfigurationActionExecuter.access$000(DefaultBuildConfigurationActionExecuter.java:25)\n    at org.gradle.execution.DefaultBuildConfigurationActionExecuter$1.proceed(DefaultBuildConfigurationActionExecuter.java:54)\n    at org.gradle.execution.ExcludedTaskFilteringBuildConfigurationAction.configure(ExcludedTaskFilteringBuildConfigurationAction.java:47)\n    at org.gradle.execution.DefaultBuildConfigurationActionExecuter.configure(DefaultBuildConfigurationActionExecuter.java:48)\n    at org.gradle.execution.DefaultBuildConfigurationActionExecuter.select(DefaultBuildConfigurationActionExecuter.java:36)\n    at org.gradle.initialization.DefaultGradleLauncher$3.run(DefaultGradleLauncher.java:142)\n    at org.gradle.internal.Factories$1.create(Factories.java:22)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:91)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:53)\n    at org.gradle.initialization.DefaultGradleLauncher.doBuildStages(DefaultGradleLauncher.java:139)\n    at org.gradle.initialization.DefaultGradleLauncher.access$200(DefaultGradleLauncher.java:32)\n    at org.gradle.initialization.DefaultGradleLauncher$1.create(DefaultGradleLauncher.java:98)\n    at org.gradle.initialization.DefaultGradleLauncher$1.create(DefaultGradleLauncher.java:92)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:91)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:63)\n    at org.gradle.initialization.DefaultGradleLauncher.doBuild(DefaultGradleLauncher.java:92)\n    at org.gradle.initialization.DefaultGradleLauncher.run(DefaultGradleLauncher.java:83)\n    at org.gradle.launcher.exec.InProcessBuildActionExecuter$DefaultBuildController.run(InProcessBuildActionExecuter.java:99)\n    at org.gradle.tooling.internal.provider.runner.BuildModelActionRunner.run(BuildModelActionRunner.java:46)\n    at org.gradle.launcher.exec.ChainingBuildActionRunner.run(ChainingBuildActionRunner.java:35)\n    at org.gradle.tooling.internal.provider.runner.SubscribableBuildActionRunner.run(SubscribableBuildActionRunner.java:58)\n    at org.gradle.launcher.exec.ChainingBuildActionRunner.run(ChainingBuildActionRunner.java:35)\n    at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:48)\n    at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:30)\n    at org.gradle.launcher.exec.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:81)\n    at org.gradle.launcher.exec.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:46)\n    at org.gradle.launcher.daemon.server.exec.ExecuteBuild.doBuild(ExecuteBuild.java:52)\n    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.WatchForDisconnection.execute(WatchForDisconnection.java:37)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.ResetDeprecationLogger.execute(ResetDeprecationLogger.java:26)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.RequestStopIfSingleUsedDaemon.execute(RequestStopIfSingleUsedDaemon.java:34)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:74)\n    at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:72)\n    at org.gradle.util.Swapper.swap(Swapper.java:38)\n    at org.gradle.launcher.daemon.server.exec.ForwardClientInput.execute(ForwardClientInput.java:72)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.health.DaemonHealthTracker.execute(DaemonHealthTracker.java:47)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.LogToClient.doBuild(LogToClient.java:60)\n    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.EstablishBuildEnvironment.doBuild(EstablishBuildEnvironment.java:72)\n    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.health.HintGCAfterBuild.execute(HintGCAfterBuild.java:41)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.StartBuildOrRespondWithBusy$1.run(StartBuildOrRespondWithBusy.java:50)\n    at org.gradle.launcher.daemon.server.DaemonStateCoordinator$1.run(DaemonStateCoordinator.java:237)\n    at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:54)\n    at org.gradle.internal.concurrent.StoppableExecutorImpl$1.run(StoppableExecutorImpl.java:40)\n\n\nBUILD FAILED\n\nTotal time: 2.708 secs\n</code></pre>\n\n<p>grade version: grade-2.14.1-all\nkotlin version: 1.0.5-2</p>\n\n<p>I have no idea how to solve it, cause the stack trace is inconclusive. Any idea?</p>\n\n<p>Edit: Gradle Build</p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\napply plugin: 'realm-android'\n\nandroid {\n    compileSdkVersion 25\n    buildToolsVersion '25.0.1'\n    defaultConfig {\n        applicationId \"...\"\n        minSdkVersion 21\n        targetSdkVersion 22\n        versionCode 1\n        versionName \"1.0\"\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n\n        debug{\n            minifyEnabled false\n        }\n    }\n    sourceSets {\n        main.java.srcDirs += 'src/main/kotlin'\n    }\n    lintOptions {\n        abortOnError false\n    }\n}\n\nkapt {\n    generateStubs = true\n}\n\ndependencies {\n    compile fileTree(include: ['*.jar'], dir: 'libs')\n    compile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n    compile \"org.jetbrains.anko:anko-sdk23:$anko_version\"\n    compile \"org.jetbrains.anko:anko-appcompat-v7:$anko_version\"\n\n    androidTestCompile \"com.android.support:support-annotations:$support_library_version\"\n\n    compile \"com.android.support:appcompat-v7:$support_library_version\"\n    compile \"com.android.support:support-annotations:$support_library_version\"\n    compile \"com.android.support:design:$support_library_version\"\n    compile \"com.android.support:cardview-v7:$support_library_version\"\n    compile \"com.android.support:recyclerview-v7:$support_library_version\"\n    compile 'io.reactivex:rxjava:1.2.1'\n    compile 'com.jakewharton.rxbinding:rxbinding:0.4.0'\n    compile 'com.jakewharton.timber:timber:4.1.2'\n    compile 'com.squareup.retrofit2:retrofit:2.1.0'\n    compile 'com.squareup.moshi:moshi:1.2.0'\n    compile 'com.squareup.retrofit2:converter-moshi:2.1.0'\n    compile 'com.squareup.retrofit2:adapter-rxjava:2.1.0'\n    compile 'com.squareup.okhttp3:logging-interceptor:3.3.1'\n    compile 'com.jakewharton.threetenabp:threetenabp:1.0.3'\n    compile 'com.github.bumptech.glide:glide:3.7.0'\n    compile 'com.github.castorflex.smoothprogressbar:library:1.0.0'\n    compile 'org.igniterealtime.smack:smack-android:4.1.0'\n    compile 'org.igniterealtime.smack:smack-tcp:4.1.0'\n}\n\nconfigurations {\n    all*.exclude group: 'xpp3', module: 'xpp3'\n}\n\nbuildscript {\n    repositories {\n        jcenter()\n        mavenCentral()\n    }\n\n    dependencies {\n        classpath \"org.jetbrains.kotlin:kotlin-android-extensions:$kotlin_version\"\n        classpath \"io.realm:realm-gradle-plugin:2.2.1\" // realm\n    }\n}\n\nrepositories {\n    mavenCentral()\n}\n\n// Top-level build file where you can add configuration options common to all sub-projects/modules.\nbuildscript {\n    ext.kotlin_version = '1.0.5-2'\n    ext.support_library_version_previous = '24.2.1'\n    ext.support_library_version = '25.0.1'\n    ext.anko_version = '0.9'\n\n    repositories {\n        mavenCentral()\n        jcenter()\n    }\n\n    dependencies {\n        classpath 'com.android.tools.build:gradle:2.2.2'\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n}\n\nallprojects {\n    repositories {\n        mavenCentral()\n        maven{\n            url 'https://oss.sonatype.org/content/repositories/snapshots/'\n        }\n        jcenter()\n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 28482, "user_id": 1904517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mn4kq.png?s=128&g=1", "display_name": "iagreen", "link": "https://stackoverflow.com/users/1904517/iagreen"}, "is_accepted": true, "score": 3, "last_activity_date": 1480656198, "creation_date": 1480656198, "answer_id": 40925341, "question_id": 40923843, "link": "https://stackoverflow.com/questions/40923843/creating-public-instance-of-private-inner-class-in-kotlin/40925341#40925341", "title": "Creating public instance of private inner class in Kotlin", "body": "<p>I would assume because there isn't really a case where it seems like the right thing to do.  Any code accessing the property <code>a</code> would not have access to its type.  You couldn't assign it to a variable.  <code>Test.A myVar</code> declaration outside of the <code>Test</code> class would error out.  By not allowing it, the code will be forced to be more consistent.  A better question would be why would Java allow it? Other languages, such as swift, have the same restriction.</p>\n"}, {"tags": [], "owner": {"reputation": 6473, "user_id": 2660462, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e7866e763430b8848f14ffdacb61b99f?s=128&d=identicon&r=PG", "display_name": "Lukas Lechner", "link": "https://stackoverflow.com/users/2660462/lukas-lechner"}, "is_accepted": false, "score": 2, "last_activity_date": 1480665025, "creation_date": 1480665025, "answer_id": 40927231, "question_id": 40923843, "link": "https://stackoverflow.com/questions/40923843/creating-public-instance-of-private-inner-class-in-kotlin/40927231#40927231", "title": "Creating public instance of private inner class in Kotlin", "body": "<p><a href=\"https://kotlinlang.org/docs/reference/visibility-modifiers.html#classes-and-interfaces\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/visibility-modifiers.html#classes-and-interfaces</a></p>\n\n<p>states: </p>\n\n<blockquote>\n  <p>NOTE for Java users: outer class does not see private members of its inner classes in Kotlin.</p>\n</blockquote>\n\n<p>For your usecase, you can use <a href=\"http://NOTE%20for%20Java%20users:%20outer%20class%20does%20not%20see%20private%20members%20of%20its%20inner%20classes%20in%20Kotlin.\" rel=\"nofollow noreferrer\">Nested Classes</a> </p>\n\n<p>In <code>private inner classes</code> you are only able to access members of your outer class.</p>\n\n<p>I think the kotlin team implemented it that way, so that is possible to reduce the scope of members in <code>private inner classes</code> to be accessible only inside the <code>inner class</code>. I think this is not possible in Java.</p>\n"}], "owner": {"reputation": 1362, "user_id": 3236557, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/p6V9b.jpg?s=128&g=1", "display_name": "Kirill Zhukov", "link": "https://stackoverflow.com/users/3236557/kirill-zhukov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1574, "favorite_count": 0, "accepted_answer_id": 40925341, "answer_count": 2, "score": 1, "last_activity_date": 1480665025, "creation_date": 1480646387, "question_id": 40923843, "link": "https://stackoverflow.com/questions/40923843/creating-public-instance-of-private-inner-class-in-kotlin", "title": "Creating public instance of private inner class in Kotlin", "body": "<p>Why Kotlin doesn't allow creation of public instances of private inner classes unlike Java?</p>\n\n<p>Works in Java:</p>\n\n<pre><code>public class Test {\n  public A a = new A();\n\n  private class A {\n  }\n}\n</code></pre>\n\n<p>Doesn't work in Kotlin (<code>A</code> class has to be <code>public</code>):</p>\n\n<pre><code>class Test {\n    var a = A()\n//      ^  \n// 'public' property exposes its private type 'A'\n\n    private inner class A\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1362, "user_id": 3236557, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/p6V9b.jpg?s=128&g=1", "display_name": "Kirill Zhukov", "link": "https://stackoverflow.com/users/3236557/kirill-zhukov"}, "edited": false, "score": 0, "creation_date": 1480648692, "post_id": 40924090, "comment_id": 69060100, "body": "So the way I&#39;m defining object is same as defining companion object and according to documentation: &quot;a companion object is initialized when the corresponding class is loaded (resolved), matching the semantics of a Java static initializer&quot;, right?"}, {"owner": {"reputation": 471, "user_id": 1905534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6f03644e3ffd2de983e7787268c16a9?s=128&d=identicon&r=PG", "display_name": "Jacob", "link": "https://stackoverflow.com/users/1905534/jacob"}, "reply_to_user": {"reputation": 1362, "user_id": 3236557, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/p6V9b.jpg?s=128&g=1", "display_name": "Kirill Zhukov", "link": "https://stackoverflow.com/users/3236557/kirill-zhukov"}, "edited": false, "score": 1, "creation_date": 1480652885, "post_id": 40924090, "comment_id": 69061116, "body": "Yeah, I guess what you need is companion object."}, {"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 2, "creation_date": 1480667962, "post_id": 40924090, "comment_id": 69066846, "body": "Why do you suggest to use <code>companion object</code>? It&#39;s effectively the same as using a regular object and you state yourself that it doesn&#39;t compile either."}], "tags": [], "owner": {"reputation": 471, "user_id": 1905534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6f03644e3ffd2de983e7787268c16a9?s=128&d=identicon&r=PG", "display_name": "Jacob", "link": "https://stackoverflow.com/users/1905534/jacob"}, "is_accepted": true, "score": 1, "last_activity_date": 1480668146, "last_edit_date": 1480668146, "creation_date": 1480647919, "answer_id": 40924090, "question_id": 40923418, "link": "https://stackoverflow.com/questions/40923418/why-i-cannot-reference-constructor-arguments-inside-of-the-class-when-defining-o/40924090#40924090", "title": "Why I cannot reference constructor arguments inside of the class when defining object", "body": "<p>First, I checked the Kotlin document about the Object keyword definition:\n<a href=\"https://kotlinlang.org/docs/reference/object-declarations.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/object-declarations.html</a></p>\n\n<p>There are two things, we need to know:</p>\n\n<ol>\n<li>Object expression:</li>\n</ol>\n\n<p>open class Bar(val b: Int)</p>\n\n<pre><code>class Foo(val f: Int) {\n    val bar = object : Bar(f) {\n    }\n}\n</code></pre>\n\n<p>It created an instance of an anonymous class that inherits from type <code>Bar</code>. And it is executed (and initialized) immediately.</p>\n\n<ol start=\"2\">\n<li>Object declaration:</li>\n</ol>\n\n<p>The singleton pattern, which can not have constructors.</p>\n\n<pre><code>open class Bar(val b: Int)  \n\nobject Foo {    \n    fun create(val f: Int) : Bar {  \n        return Bar(f)   \n    }           \n}\n</code></pre>\n\n<p>or companion object</p>\n\n<pre><code>open class Bar(val b: Int)\n\nobject Foo {\n    fun create(val f: Int) : Bar {\n        return Bar(f)\n    }       \n}\n</code></pre>\n\n<p>Ok, back to this question, I think what you want is the similar static variable in Java. Even in Java, you can't ref the un-static field object from the static field.</p>\n\n<p>And don't use object in this way:</p>\n\n<pre><code>class Foo(val f: Int) {\n    object bar : Bar(f)\n}\n</code></pre>\n\n<p>which just declared an anonymous inner class, use <strong><em>companion object</em></strong> block instead, although it still can not ref outside variables.</p>\n"}], "owner": {"reputation": 1362, "user_id": 3236557, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/p6V9b.jpg?s=128&g=1", "display_name": "Kirill Zhukov", "link": "https://stackoverflow.com/users/3236557/kirill-zhukov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 623, "favorite_count": 0, "accepted_answer_id": 40924090, "answer_count": 1, "score": 0, "last_activity_date": 1480668146, "creation_date": 1480642773, "question_id": 40923418, "link": "https://stackoverflow.com/questions/40923418/why-i-cannot-reference-constructor-arguments-inside-of-the-class-when-defining-o", "title": "Why I cannot reference constructor arguments inside of the class when defining object", "body": "<p>In this example <code>f</code> is unresolved when <code>bar</code> object is declared:</p>\n\n<pre><code>open class Bar(val b: Int)\n\nclass Foo(val f: Int) {\n    object bar : Bar(f)\n//                   ^\n//         Unresolved reference: f\n\n}\n</code></pre>\n\n<p>But when I declare <code>bar</code> as a variable, it works just fine:</p>\n\n<pre><code>open class Bar(val b: Int)\n\nclass Foo(val f: Int) {\n    val bar = Bar(f)\n}\n</code></pre>\n"}, {"tags": ["android", "rx-java", "kotlin", "rx-java2"], "answers": [{"comments": [{"owner": {"reputation": 764, "user_id": 4604129, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-X1goH9Z7dcM/AAAAAAAAAAI/AAAAAAAAAKg/CetuzYiyGNA/photo.jpg?sz=128", "display_name": "Stampede10343", "link": "https://stackoverflow.com/users/4604129/stampede10343"}, "edited": false, "score": 0, "creation_date": 1480655766, "post_id": 40925021, "comment_id": 69061884, "body": "That&#39;s perfect. Case 1 was what I needed. I was trying to do Observable.create { } with the logic there instead of using the Observable.OnSubscribe&lt;Int&gt;"}], "tags": [], "owner": {"reputation": 28482, "user_id": 1904517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mn4kq.png?s=128&g=1", "display_name": "iagreen", "link": "https://stackoverflow.com/users/1904517/iagreen"}, "is_accepted": true, "score": 1, "last_activity_date": 1480654280, "creation_date": 1480654280, "answer_id": 40925021, "question_id": 40923274, "link": "https://stackoverflow.com/questions/40923274/callback-method-called-often-to-forward-event-to-observable/40925021#40925021", "title": "Callback method called often to forward event to Observable?", "body": "<p>It is not clear from your question exactly how you pass your listener, but there are two general cases that come to mind. Pick the one matches your implementation. </p>\n\n<p><strong>Case 1:  The listener is passed as an interface</strong></p>\n\n<p>For this, I assume you have an interface similar too -- </p>\n\n<pre><code>interface SliderChangedListener {\n    fun onSliderChanged(percent: Int)\n}\n</code></pre>\n\n<p>and a method in your <code>Slider</code> class that takes an instance of that listener -- </p>\n\n<pre><code>fun setSlideListener(listener: SliderChangedListener) \n</code></pre>\n\n<p>This is a common Java pattern.  In Kotlin, it would be easier to drop the interface and just pass a function variable, but given you showed an <code>override</code> above, seems possible your view is coming from Java. Regardless, the key is to create an observable and have it create and set listener that calls <code>onNext</code>.</p>\n\n<pre><code>Observable.create(Observable.OnSubscribe&lt;Int&gt; {\n        subscriber -&gt;\n        slider.setSlideListener(object : SliderChangedListener {\n            override fun onSliderChanged(percent: Int) {\n                subscriber.onNext(percent)\n            }\n        })\n    }).subscribe { /* respond to the slide */ }\n</code></pre>\n\n<p><strong>Case 2: You extend the <code>Slider</code> class and override the listener</strong></p>\n\n<p>In this case, I assume you have a listener method in your <code>Slider</code> class that you override directly with the code in your question.  In this case, we can use a <code>Subject</code> to mediate between the listener and the subscriber.</p>\n\n<pre><code>val mySlider = object : Slider() {\n        val sliderObservable: PublishSubject&lt;Int&gt; = PublishSubject.create()\n        override fun onSliderChanged(percent: Int) {\n            sliderObservable.onNext(percent)\n        }\n    }\nmySlider.sliderObservable.subscribe({ /* do slider work */ })\n</code></pre>\n"}], "owner": {"reputation": 764, "user_id": 4604129, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-X1goH9Z7dcM/AAAAAAAAAAI/AAAAAAAAAKg/CetuzYiyGNA/photo.jpg?sz=128", "display_name": "Stampede10343", "link": "https://stackoverflow.com/users/4604129/stampede10343"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 465, "favorite_count": 0, "accepted_answer_id": 40925021, "answer_count": 1, "score": 2, "last_activity_date": 1480654280, "creation_date": 1480641758, "question_id": 40923274, "link": "https://stackoverflow.com/questions/40923274/callback-method-called-often-to-forward-event-to-observable", "title": "Callback method called often to forward event to Observable?", "body": "<p>So I have this listener on a custom slider view. The view calls <code>onSliderChanged(int percent)</code> when the user is sliding the slider. I'm trying to make a network call when the slider changes, but I don't want to make a million network calls since the method is called often when sliding. How can I make this listener callback into an Observable? I know once its an observable I can use debounce and only update after a certain time interval.</p>\n\n<p>I tried doing <code>Observable.create()</code> but I'm in a callback method and I can't figure out how that would work. I'm using Kotlin and RxJava2 btw.</p>\n\n<pre><code>override fun onSliderChanged(percent: Int)\n{\n    // Either here or in the presenter I want to make this \n    // callback reactive so I can debounce the callback\n    presenter.onSliderChanged(percent)\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 2, "creation_date": 1480614014, "post_id": 40916806, "comment_id": 69046262, "body": "Not answering the question for Kotlin 1.0.5, but in 1.1 it will likely be <code>translations.toMutableMap()</code>, as it is now in 1.1 EAP."}], "answers": [{"tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": false, "score": 3, "last_activity_date": 1617198408, "last_edit_date": 1617198408, "creation_date": 1480617466, "answer_id": 40918035, "question_id": 40916806, "link": "https://stackoverflow.com/questions/40916806/what-is-the-idiomatic-way-to-clone-a-mutablemap/40918035#40918035", "title": "What is the idiomatic way to clone a MutableMap?", "body": "<p>In Kotlin 1.1+ you can use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/to-mutable-map.html\" rel=\"nofollow noreferrer\"><code>toMutableMap</code></a>:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val mutableMap = mutableMapOf(&quot;a&quot; to 1, &quot;b&quot; to 2)\nval mutableMapCopy = mutableMap.toMutableMap()\nmutableMap.clear()\nprintln(mutableMap) //=&gt; {}\nprintln(mutableMapCopy) //=&gt; {a=1, b=2}\n</code></pre>\n<p>Kotlin Playground: <a href=\"https://pl.kotl.in/LGhPpdjv5\" rel=\"nofollow noreferrer\">https://pl.kotl.in/LGhPpdjv5</a></p>\n<hr />\n<p>The Kotlin 1.0.x Standard Library does not define an idiomatic way to copy a map. A <em>more</em> idiomatic way would be <code>map.toList().toMap()</code> but sometimes the <em>most</em> idiomatic way to do something in Kotlin is to simply define your own <a href=\"https://kotlinlang.org/docs/reference/extensions.html\" rel=\"nofollow noreferrer\">extensions</a>. e.g.:</p>\n<pre><code>fun &lt;K, V&gt; Map&lt;K, V&gt;.toMap(): Map&lt;K, V&gt; = when (size) {\n    0 -&gt; emptyMap()\n    1 -&gt; with(entries.iterator().next()) { Collections.singletonMap(key, value) }\n    else -&gt; toMutableMap()\n}\n\nfun &lt;K, V&gt; Map&lt;K, V&gt;.toMutableMap(): MutableMap&lt;K, V&gt; = LinkedHashMap(this)\n</code></pre>\n<p>The above extension functions are very similar to what is defined in <a href=\"https://github.com/JetBrains/kotlin/releases/tag/v1.1-M03\" rel=\"nofollow noreferrer\">release 1.1-M03 (EAP-3)</a>.</p>\n<p>From <a href=\"https://github.com/JetBrains/kotlin/blob/v1.1-M03/libraries/stdlib/src/kotlin/collections/Maps.kt#L442-L460\" rel=\"nofollow noreferrer\">kotlin/Maps.kt at v1.1-M03 \u00b7 JetBrains/kotlin</a>:</p>\n<blockquote>\n<pre><code>/**\n * Returns a new read-only map containing all key-value pairs from the original map.\n *\n * The returned map preserves the entry iteration order of the original map.\n */\n@SinceKotlin(&quot;1.1&quot;)\npublic fun &lt;K, V&gt; Map&lt;out K, V&gt;.toMap(): Map&lt;K, V&gt; = when (size) {\n    0 -&gt; emptyMap()\n    1 -&gt; toSingletonMap()\n    else -&gt; toMutableMap()\n}\n\n/**\n * Returns a new mutable map containing all key-value pairs from the original map.\n *\n * The returned map preserves the entry iteration order of the original map.\n */\n@SinceKotlin(&quot;1.1&quot;)\npublic fun &lt;K, V&gt; Map&lt;out K, V&gt;.toMutableMap(): MutableMap&lt;K, V&gt; = LinkedHashMap(this)\n</code></pre>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 1, "last_activity_date": 1480622776, "creation_date": 1480622776, "answer_id": 40919467, "question_id": 40916806, "link": "https://stackoverflow.com/questions/40916806/what-is-the-idiomatic-way-to-clone-a-mutablemap/40919467#40919467", "title": "What is the idiomatic way to clone a MutableMap?", "body": "<p>The intended way for that is <code>translations.toMutableMap()</code>. Unfortunately it does not preserve the nature of the map, meaning that the resulting class will depend on the implementation.</p>\n"}, {"tags": [], "owner": {"reputation": 140, "user_id": 11004423, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W050P.png?s=128&g=1", "display_name": "Acmpo6ou", "link": "https://stackoverflow.com/users/11004423/acmpo6ou"}, "is_accepted": false, "score": 0, "last_activity_date": 1617184626, "last_edit_date": 1617184626, "creation_date": 1613751514, "answer_id": 66281221, "question_id": 40916806, "link": "https://stackoverflow.com/questions/40916806/what-is-the-idiomatic-way-to-clone-a-mutablemap/66281221#66281221", "title": "What is the idiomatic way to clone a MutableMap?", "body": "<p>You can try this:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>yourMap.toMap().toMutableMap()\n</code></pre>\n<p>Here is extension function:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>MutableMap&lt;K, V&gt;.copy() = this.toMap().toMutableMap()\n</code></pre>\n"}], "owner": {"reputation": 1242, "user_id": 211560, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/1a36612786c959d96dbc0163bb286991?s=128&d=identicon&r=PG", "display_name": "Arthur", "link": "https://stackoverflow.com/users/211560/arthur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 443, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1617198408, "creation_date": 1480613198, "question_id": 40916806, "link": "https://stackoverflow.com/questions/40916806/what-is-the-idiomatic-way-to-clone-a-mutablemap", "title": "What is the idiomatic way to clone a MutableMap?", "body": "<p>I have a MutableMap called <code>translations</code>.  I want to clone this, into another MutableMap or a Map.  I have done this with the following:  <code>translations.map { it.key to it.value }.toMap()</code></p>\n\n<p>This doesn't 'feel' right to me.  Is there a more idiomatic way to clone a MutableMap?</p>\n"}]