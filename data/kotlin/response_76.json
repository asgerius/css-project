[{"tags": ["mocking", "mockito", "kotlin", "powermock", "powermockito"], "answers": [{"tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": false, "score": 1, "last_activity_date": 1466628549, "creation_date": 1466628549, "answer_id": 37977997, "question_id": 37977320, "link": "https://stackoverflow.com/questions/37977320/how-to-mock-a-kotlin-singleton-object/37977997#37977997", "title": "How to mock a Kotlin singleton object?", "body": "<p>Short of manipulating byte code the answer is no, unless you are willing and able to change the code. The most straightforward way (and the way I would recommend) to mock <code>callerFun</code>'s call to <code>SomeObject.someFun()</code> is to provide some way to slip it a mock object.</p>\n\n<p>e.g.</p>\n\n<pre><code>object SomeObject {\n    fun someFun() {}\n}\n\nfun callerFun() {\n    _callerFun { SomeObject.someFun() }\n}\n\ninternal inline fun _callerFun(caller: () -&gt; Unit) {\n    caller()\n}\n</code></pre>\n\n<p>The idea here is to change something you're willing to change. If you're certain you want a singleton and a top-level function that acts on that singleton then one way, as demonstrated above, to make the top-level function testable without changing its public signature is to move its implementation to an <code>internal</code> function that allows slipping a mock.</p>\n"}, {"comments": [{"owner": {"reputation": 5208, "user_id": 4257162, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GKajj.jpg?s=128&g=1", "display_name": "LeoColman", "link": "https://stackoverflow.com/users/4257162/leocolman"}, "edited": false, "score": 32, "creation_date": 1516465143, "post_id": 37978020, "comment_id": 83703336, "body": "This looks like an anti-pattern... One shouldn&#39;t create extra classes/interfaces in main code just for the purpose of testing!"}, {"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "reply_to_user": {"reputation": 5208, "user_id": 4257162, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GKajj.jpg?s=128&g=1", "display_name": "LeoColman", "link": "https://stackoverflow.com/users/4257162/leocolman"}, "edited": false, "score": 3, "creation_date": 1516472638, "post_id": 37978020, "comment_id": 83705948, "body": "Not extra classes, just interfaces. And you should do it because this is best practice for testing on JVM."}], "tags": [], "owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "is_accepted": true, "score": 19, "last_activity_date": 1466629407, "last_edit_date": 1466629407, "creation_date": 1466628620, "answer_id": 37978020, "question_id": 37977320, "link": "https://stackoverflow.com/questions/37977320/how-to-mock-a-kotlin-singleton-object/37978020#37978020", "title": "How to mock a Kotlin singleton object?", "body": "<p>Just make you object implement an interface, than you can mock you object with any mocking library. Here example of Junit + Mockito + <a href=\"https://github.com/nhaarman/mockito-kotlin\" rel=\"noreferrer\">Mockito-Kotlin</a>:</p>\n\n<pre><code>import com.nhaarman.mockito_kotlin.mock\nimport com.nhaarman.mockito_kotlin.whenever\nimport org.junit.Assert.assertEquals\nimport org.junit.Test\n\nobject SomeObject : SomeInterface {\n    override fun someFun():String {\n        return \"\"\n    }\n}\n\ninterface SomeInterface {\n    fun someFun():String\n}\n\nclass SampleTest {\n\n    @Test\n    fun test_with_mock() {\n        val mock = mock&lt;SomeInterface&gt;()\n\n        whenever(mock.someFun()).thenReturn(\"42\")\n\n        val answer = mock.someFun()\n\n        assertEquals(\"42\", answer)\n    }\n}\n</code></pre>\n\n<p>Or in case if you want mock <code>SomeObject</code> inside <code>callerFun</code>:</p>\n\n<pre><code>import com.nhaarman.mockito_kotlin.mock\nimport com.nhaarman.mockito_kotlin.whenever\nimport org.junit.Assert.assertEquals\nimport org.junit.Test\n\nobject SomeObject : SomeInterface {\n    override fun someFun():String {\n        return \"\"\n    }\n}\n\nclass Caller(val someInterface: SomeInterface) {\n    fun callerFun():String {\n        return \"Test ${someInterface.someFun()}\"\n    }\n}\n\n// Example of use\nval test = Caller(SomeObject).callerFun()\n\ninterface SomeInterface {\n    fun someFun():String\n}\n\nclass SampleTest {\n\n    @Test\n    fun test_with_mock() {\n        val mock = mock&lt;SomeInterface&gt;()\n        val caller = Caller(mock)\n\n        whenever(mock.someFun()).thenReturn(\"42\")\n\n        val answer = caller.callerFun()\n\n        assertEquals(\"Test 42\", answer)\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 314, "user_id": 8524651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BLz1C.png?s=128&g=1", "display_name": "Hatzen", "link": "https://stackoverflow.com/users/8524651/hatzen"}, "edited": false, "score": 0, "creation_date": 1586699718, "post_id": 48373717, "comment_id": 108217940, "body": "Also so question didnt say so but in android instrumentation test this wont work with devices api lower than pie: <a href=\"https://mockk.io/ANDROID.html\" rel=\"nofollow noreferrer\">mockk.io/ANDROID.html</a> therefore Ruslans answer is more safe to use"}], "tags": [], "owner": {"reputation": 5208, "user_id": 4257162, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GKajj.jpg?s=128&g=1", "display_name": "LeoColman", "link": "https://stackoverflow.com/users/4257162/leocolman"}, "is_accepted": false, "score": 50, "last_activity_date": 1573562041, "last_edit_date": 1573562041, "creation_date": 1516585851, "answer_id": 48373717, "question_id": 37977320, "link": "https://stackoverflow.com/questions/37977320/how-to-mock-a-kotlin-singleton-object/48373717#48373717", "title": "How to mock a Kotlin singleton object?", "body": "<p>There's a very nice mocking library for Kotlin - <a href=\"http://mockk.io/\" rel=\"noreferrer\">Mockk</a>, which allows you to mock objects, the exact same way you're desiring.</p>\n\n<p>As of its documentation:</p>\n\n<hr>\n\n<blockquote>\n  <p>Objects can be transformed to mocks following way:</p>\n</blockquote>\n\n<pre><code>object MockObj {\n  fun add(a: Int, b: Int) = a + b\n}\n\nmockkObject(MockObj) // aplies mocking to an Object\n\nassertEquals(3, MockObj.add(1, 2))\n\nevery { MockObj.add(1, 2) } returns 55\n\nassertEquals(55, MockObj.add(1, 2))\n</code></pre>\n\n<blockquote>\n  <p>To revert back use unmockkAll or unmockkObject:</p>\n</blockquote>\n\n<pre><code>@Before\nfun beforeTests() {\n    mockkObject(MockObj)\n    every { MockObj.add(1,2) } returns 55\n}\n\n@Test\nfun willUseMockBehaviour() {\n    assertEquals(55, MockObj.add(1,2))\n}\n\n@After\nfun afterTests() {\n    unmockkAll()\n    // or unmockkObject(MockObj)\n}\n</code></pre>\n\n<blockquote>\n  <p>Despite Kotlin language limits you can create new instances of objects if testing logic needs that:</p>\n</blockquote>\n\n<pre><code>val newObjectMock = mockk&lt;MockObj&gt;()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5208, "user_id": 4257162, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GKajj.jpg?s=128&g=1", "display_name": "LeoColman", "link": "https://stackoverflow.com/users/4257162/leocolman"}, "edited": false, "score": 1, "creation_date": 1567051157, "post_id": 48460393, "comment_id": 101848938, "body": "Theoretically, when you do this you should also test that your delegates work correctly, and writing a test for that will also require a delegate and so on... Using a mocked alternative, we trust that t he mock library is tested itself, and we don&#39;t need to add extra boilerplate and extra lines for this concept"}, {"owner": {"reputation": 314, "user_id": 8524651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BLz1C.png?s=128&g=1", "display_name": "Hatzen", "link": "https://stackoverflow.com/users/8524651/hatzen"}, "edited": false, "score": 0, "creation_date": 1586701433, "post_id": 48460393, "comment_id": 108218655, "body": "For sure using a mock lib is the better approach but not possible for android instrumentationtest lower than android pie. Therefor this solution looks pretty good!"}], "tags": [], "owner": {"reputation": 1806, "user_id": 4183017, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-bKVg4W1bQ2k/AAAAAAAAAAI/AAAAAAAAABM/YZcjDub2zPE/photo.jpg?sz=128", "display_name": "Ioane Sharvadze", "link": "https://stackoverflow.com/users/4183017/ioane-sharvadze"}, "is_accepted": false, "score": 8, "last_activity_date": 1517226051, "last_edit_date": 1517226051, "creation_date": 1516965861, "answer_id": 48460393, "question_id": 37977320, "link": "https://stackoverflow.com/questions/37977320/how-to-mock-a-kotlin-singleton-object/48460393#48460393", "title": "How to mock a Kotlin singleton object?", "body": "<p>You can mock Object without any extra library, by using class <em>delegates</em>. </p>\n\n<p>Here is my proposal</p>\n\n<pre><code>val someObjectDelegate : SomeInterface? = null\n\nobject SomeObject: by someObjectDelegate ?: SomeObjectImpl\n\nobject SomeObjectImpl : SomeInterface {\n\n    fun someFun() {\n        println(\"SomeObjectImpl someFun called\")\n    }\n}\n\ninterface SomeInterface {\n    fun someFun()\n}\n</code></pre>\n\n<p>In your tests you can set delegate object that will change behaviour, otherwise it will use it's real implementation. </p>\n\n<pre><code>@Beofre\nfun setUp() {\n  someObjectDelegate = object : SomeInterface {\n      fun someFun() {\n          println(\"Mocked function\")\n      }\n  }\n  // Will call method from your delegate\n  SomeObject.someFun()\n}\n</code></pre>\n\n<p><em>Of course names above are bad, but for the sake of an example it shows the purpose.</em> </p>\n\n<p>After SomeObject is initialised delegate will handle all the functions.<br>\nMore you can find in official <a href=\"https://kotlinlang.org/docs/reference/delegation.html\" rel=\"noreferrer\">documentation</a></p>\n"}, {"comments": [{"owner": {"reputation": 53550, "user_id": 1083957, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/vIOTT.jpg?s=128&g=1", "display_name": "azizbekian", "link": "https://stackoverflow.com/users/1083957/azizbekian"}, "edited": false, "score": 0, "creation_date": 1521441967, "post_id": 49318722, "comment_id": 85714276, "body": "Basically, you are relying on Kotlin implementation details: anytime Kotile designers decide to change the implementation of <code>object</code> classes then you should update all your tests."}, {"owner": {"reputation": 12672, "user_id": 1527232, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/n5xGm.png?s=128&g=1", "display_name": "lelloman", "link": "https://stackoverflow.com/users/1527232/lelloman"}, "reply_to_user": {"reputation": 53550, "user_id": 1083957, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/vIOTT.jpg?s=128&g=1", "display_name": "azizbekian", "link": "https://stackoverflow.com/users/1083957/azizbekian"}, "edited": false, "score": 2, "creation_date": 1521443424, "post_id": 49318722, "comment_id": 85714892, "body": "Well, you wouldn&#39;t need to change <i>all your tests</i>, only the mocking function. But most importantly, if the implementation of <code>object</code> changed, you would need to recompile older code. If you compile <code>Foo.bar()</code> today, the compiled outcome would use an <code>INSTANCE</code> field as well."}, {"owner": {"reputation": 782, "user_id": 5932049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddab0830ee191300d5a2caea47569d8c?s=128&d=identicon&r=PG&f=1", "display_name": "Ch Vas", "link": "https://stackoverflow.com/users/5932049/ch-vas"}, "edited": false, "score": 0, "creation_date": 1537192812, "post_id": 49318722, "comment_id": 91683401, "body": "That also works for me! Using mockito-kotlin <code>2.0.0-RC2</code>, haven&#39;t checked if version 2 provides something more straight forward though."}], "tags": [], "owner": {"reputation": 12672, "user_id": 1527232, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/n5xGm.png?s=128&g=1", "display_name": "lelloman", "link": "https://stackoverflow.com/users/1527232/lelloman"}, "is_accepted": false, "score": 9, "last_activity_date": 1521201323, "last_edit_date": 1521201323, "creation_date": 1521196795, "answer_id": 49318722, "question_id": 37977320, "link": "https://stackoverflow.com/questions/37977320/how-to-mock-a-kotlin-singleton-object/49318722#49318722", "title": "How to mock a Kotlin singleton object?", "body": "<p>Besides using <a href=\"http://mockk.io/\" rel=\"noreferrer\">Mockk</a> library, which is quite convenient, one could mock an <code>object</code> simply with Mockito and reflection. A Kotlin object is just a regular Java class with a private constructor and an <code>INSTANCE</code> static field, with reflection one can replace the value of <code>INSTANCE</code> with a mocked object. After the test the original should be restored so that the change won't affect other tests</p>\n\n<p>Using Mockito Kotlin (one needs to add an extension configuration as described <a href=\"https://stackoverflow.com/a/40018295/1527232\">here</a> to mock final classes): </p>\n\n<pre><code>testCompile \"com.nhaarman:mockito-kotlin:1.5.0\"\n</code></pre>\n\n<p>A first fun could replace the value of the static <code>INSTANCE</code> field in the <code>object</code> class and return the previous value</p>\n\n<pre><code>fun &lt;T&gt; replaceObjectInstance(clazz: Class&lt;T&gt;, newInstance: T): T {\n\n    if (!clazz.declaredFields.any {\n                it.name == \"INSTANCE\" &amp;&amp; it.type == clazz &amp;&amp; Modifier.isStatic(it.modifiers)\n            }) {\n        throw InstantiationException(\"clazz ${clazz.canonicalName} does not have a static  \" +\n                \"INSTANCE field, is it really a Kotlin \\\"object\\\"?\")\n    }\n\n    val instanceField = clazz.getDeclaredField(\"INSTANCE\")\n    val modifiersField = Field::class.java.getDeclaredField(\"modifiers\")\n    modifiersField.isAccessible = true\n    modifiersField.setInt(instanceField, instanceField.modifiers and Modifier.FINAL.inv())\n\n    instanceField.isAccessible = true\n    val originalInstance = instanceField.get(null) as T\n    instanceField.set(null, newInstance)\n    return originalInstance\n}\n</code></pre>\n\n<p>Then you could have a fun that will create a mock instance of the <code>object</code> and replace the original value with the mocked one, returning the original so that it can be reset later</p>\n\n<pre><code>fun &lt;T&gt; mockObject(clazz: Class&lt;T&gt;): T {\n    val constructor = clazz.declaredConstructors.find { it.parameterCount == 0 }\n            ?: throw InstantiationException(\"class ${clazz.canonicalName} has no empty constructor, \" +\n                    \"is it really a Kotlin \\\"object\\\"?\")\n\n    constructor.isAccessible = true\n\n    val mockedInstance = spy(constructor.newInstance() as T)\n\n    return replaceObjectInstance(clazz, mockedInstance)\n}\n</code></pre>\n\n<p>Add some Kotlin sugar</p>\n\n<pre><code>class MockedScope&lt;T : Any&gt;(private val clazz: Class&lt;T&gt;) {\n\n    fun test(block: () -&gt; Unit) {\n        val originalInstance = mockObject(clazz)\n        block.invoke()\n        replaceObjectInstance(clazz, originalInstance)\n    }\n}\n\nfun &lt;T : Any&gt; withMockObject(clazz: Class&lt;T&gt;) = MockedScope(clazz)\n</code></pre>\n\n<p>And finally, given an <code>object</code></p>\n\n<pre><code>object Foo {\n    fun bar(arg: String) = 0\n}\n</code></pre>\n\n<p>You could test it this way</p>\n\n<pre><code>withMockObject(Foo.javaClass).test {\n    doAnswer { 1 }.whenever(Foo).bar(any())\n\n    Assert.assertEquals(1, Foo.bar(\"\"))\n}\n\nAssert.assertEquals(0, Foo.bar(\"\"))\n</code></pre>\n"}], "owner": {"reputation": 707, "user_id": 3284037, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/968101a9feb5e193d0be63f87e635e7c?s=128&d=identicon&r=PG&f=1", "display_name": "user3284037", "link": "https://stackoverflow.com/users/3284037/user3284037"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24976, "favorite_count": 8, "accepted_answer_id": 37978020, "answer_count": 5, "score": 38, "last_activity_date": 1573562041, "creation_date": 1466626057, "question_id": 37977320, "link": "https://stackoverflow.com/questions/37977320/how-to-mock-a-kotlin-singleton-object", "title": "How to mock a Kotlin singleton object?", "body": "<p>Given a Kotlin singleton object and a fun that call it's method</p>\n\n<pre><code>object SomeObject {\n   fun someFun() {}\n}\n\nfun callerFun() {\n   SomeObject.someFun()\n}\n</code></pre>\n\n<p>Is there a way to mock call to <code>SomeObject.someFun()</code>?</p>\n"}, {"tags": ["kotlin", "higher-order-functions"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 2, "creation_date": 1466623407, "post_id": 37976406, "comment_id": 63399434, "body": "Kotlin made the choice to support implicit SAM interface conversion to functions only for Java interfaces. Not for Kotlin interfaces. I agree that this hurts readability in some cases. Type aliases will come in the next version (AFAIR). JetBrains will then see if that fixes the problem of if conversion of Kotlin interfaces should be allowed. There&#39;s a feature request for that: <a href=\"https://youtrack.jetbrains.com/issue/KT-7770\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-7770</a>. In the meantime, I would just use <code>(T) -&gt; Boolean</code> in the signatures. Hopefully refactoring the code with type aliases won&#39;t be too hard."}], "answers": [{"comments": [{"owner": {"reputation": 11019, "user_id": 418488, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/625af9d6f5c5062f65a43582b57c041d?s=128&d=identicon&r=PG", "display_name": "Just another metaprogrammer", "link": "https://stackoverflow.com/users/418488/just-another-metaprogrammer"}, "edited": false, "score": 1, "creation_date": 1466701873, "post_id": 37994197, "comment_id": 63439445, "body": "Thanks for the idea."}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": true, "score": 3, "last_activity_date": 1466750520, "last_edit_date": 1466750520, "creation_date": 1466691269, "answer_id": 37994197, "question_id": 37976406, "link": "https://stackoverflow.com/questions/37976406/how-do-i-avoid-object-expressions-for-functions-that-return-a-sam-interface/37994197#37994197", "title": "How do I avoid object expressions for functions that return a SAM interface", "body": "<p>Since there are no type aliases (yet), type signatures can not* substitute each other. In your case you need to use composition instead of inheritance to create a level of abstraction:</p>\n\n<pre><code>open class Receiver&lt;T&gt;(val op: (T) -&gt; Boolean)\n\nopen class PushStream&lt;T&gt;(val op: (Receiver&lt;T&gt;) -&gt; Unit)\n\nfun &lt;T&gt; singleton (v: T): PushStream&lt;T&gt; {\n    return PushStream&lt;T&gt; { r -&gt; r.op(v) }\n}\n</code></pre>\n\n<p>I replaced interfaces with classes because I don't see the rest of the code. If you need interfaces, then use factory functions:</p>\n\n<pre><code>interface Receiver&lt;T&gt; {\n    val op: (T) -&gt; Boolean\n}\n\nfun &lt;T&gt; receiver(op: (T) -&gt; Boolean) = object : Receiver&lt;T&gt; {\n    override val op = op\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4427, "user_id": 4706743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64b05c3b09628ba8955d6d7a188271af?s=128&d=identicon&r=PG&f=1", "display_name": "D3xter", "link": "https://stackoverflow.com/users/4706743/d3xter"}, "is_accepted": false, "score": 1, "last_activity_date": 1466779514, "creation_date": 1466779514, "answer_id": 38016157, "question_id": 37976406, "link": "https://stackoverflow.com/questions/37976406/how-do-i-avoid-object-expressions-for-functions-that-return-a-sam-interface/38016157#38016157", "title": "How do I avoid object expressions for functions that return a SAM interface", "body": "<p>If you define the PushStream-Interface in java, you can use it like that:</p>\n\n<pre><code>fun &lt;T&gt; singleton (v : T) : PushStream&lt;T&gt; {\n    return PushStream { r : Receiver&lt;T&gt; -&gt; r (v) }\n}\n</code></pre>\n"}], "owner": {"reputation": 11019, "user_id": 418488, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/625af9d6f5c5062f65a43582b57c041d?s=128&d=identicon&r=PG", "display_name": "Just another metaprogrammer", "link": "https://stackoverflow.com/users/418488/just-another-metaprogrammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 296, "favorite_count": 1, "accepted_answer_id": 37994197, "answer_count": 2, "score": 2, "last_activity_date": 1466779514, "creation_date": 1466622576, "question_id": 37976406, "link": "https://stackoverflow.com/questions/37976406/how-do-i-avoid-object-expressions-for-functions-that-return-a-sam-interface", "title": "How do I avoid object expressions for functions that return a SAM interface", "body": "<p>I am a kotlin newbie so maybe this is trivial but I failed to find any relevant help at kotlinlang.org.</p>\n\n<p>In an effort to learn a bit about kotlin I like to implement <code>PushStream</code> library.</p>\n\n<p>I wanted to define the fundamental types something like this:</p>\n\n<pre><code>typealias Receiver&lt;T&gt;   = (T) -&gt; bool\ntypealias PushStream&lt;T&gt; = (Receiver&lt;T&gt;) -&gt; Unit\n</code></pre>\n\n<p>AFAIK type-aliases isn't supported yet so above is just pseudocode.</p>\n\n<p>So my first attempt was this:</p>\n\n<pre><code>interface Receiver&lt;T&gt; : (T) -&gt; Boolean {\n}\n\ninterface PushStream&lt;T&gt; : (Receiver&lt;T&gt;) -&gt; Unit {\n}\n\nfun &lt;T&gt; singleton (v : T) : PushStream&lt;T&gt; {\n    return { r : Receiver&lt;T&gt; -&gt; r (v) }\n}\n</code></pre>\n\n<p>kotlin then says:</p>\n\n<pre><code>Error:(10, 12) Kotlin: Type mismatch: inferred type is (Receiver&lt;T&gt;) -&gt; Boolean but PushStream&lt;T&gt; was expected\n</code></pre>\n\n<p>I seem to be able to get around it with:</p>\n\n<pre><code>fun &lt;T&gt; singleton (v : T) : (Receiver&lt;T&gt;) -&gt; Unit {\n    return { r : Receiver&lt;T&gt; -&gt; r (v) }\n}\n</code></pre>\n\n<p>But that's not the signature I want especially for the more advanced operators I might need to specify the full function type:</p>\n\n<pre><code>fun &lt;T&gt; singleton (v : T) : ((T) -&gt; Boolean) -&gt; Unit {\n    return { r : Receiver&lt;T&gt; -&gt; r (v) }\n}\n</code></pre>\n\n<p>This I believe makes the API harder to read.</p>\n\n<p>What I could do is using an object expression:</p>\n\n<pre><code>fun &lt;T&gt; singleton (v : T) : PushStream&lt;T&gt; {\n    return object : PushStream&lt;T&gt; {\n        operator override fun invoke (r : Receiver&lt;T&gt;) : Unit {\n            r (v)\n        }\n    }\n}\n</code></pre>\n\n<p>This works but I would like to use Lambda expressions to keep the code more succinct.</p>\n\n<p>Any tips welcome. Also if you know of any interesting blogs/presentations on programming with higher-order functions in kotlin that would also be much appreciated.</p>\n"}, {"tags": ["collections", "kotlin"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 2, "creation_date": 1466557170, "post_id": 37956425, "comment_id": 63361757, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/33727657/kotlin-and-immutable-collections\">Kotlin and Immutable Collections?</a>"}, {"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1466558446, "post_id": 37956425, "comment_id": 63362029, "body": "The link offered does explain that List is not immutable, but readable. But then &quot;Readable&quot; is really not as &#39;useful&#39; given that, it could still be cast to be changed. Ideally, &#39;readable&#39; shouldn&#39;t be cast-able to something &#39;writeable&#39;"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1466562148, "post_id": 37956425, "comment_id": 63362890, "body": "It is enough to cast to <code>MutableList</code>, a super type of <code>ArrayList</code>"}, {"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 0, "creation_date": 1466595041, "post_id": 37956425, "comment_id": 63379306, "body": "It looks like you&#39;re trying to initialize the list after assigning. In that case you can do <code>ArrayList&lt;Int&gt;().apply { add(10) }</code> or even better just use the built-in factory functions like <code>listOf(10)</code>."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1466717420, "post_id": 37956425, "comment_id": 63448490, "body": "A blocker to prevent casting of List to mutable (and other collection types) wax added today to Klutter library blocking all related actions such as an <code>Iterator</code> recieved from a list, a <code>subList</code> from a list, a <code>entrySet</code> from a map and more.  See: <a href=\"http://stackoverflow.com/a/38002121/3679676\">stackoverflow.com/a/38002121/3679676</a>  ... you cannot cast around it, nor any other collection it returns, they are truly protected."}], "answers": [{"comments": [{"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "edited": false, "score": 0, "creation_date": 1466558473, "post_id": 37956531, "comment_id": 63362038, "body": "Thanks gotnull. That explained well. Immutable != Readable...  The &quot;Readable&quot; is not as safe as &quot;Immutable&quot;/"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1466562055, "post_id": 37956531, "comment_id": 63362865, "body": "some instances of <code>List</code> in kotlin&#39;s library are immutable, e.i. the cast will fail. You have to make sure that your list is indeed a subclass of <code>ArrayList</code>"}], "tags": [], "owner": {"reputation": 24020, "user_id": 264802, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/9d9b871f40b338b97bfb44bdafa14a87?s=128&d=identicon&r=PG", "display_name": "fulvio", "link": "https://stackoverflow.com/users/264802/fulvio"}, "is_accepted": true, "score": 6, "last_activity_date": 1466553998, "last_edit_date": 1495541388, "creation_date": 1466553998, "answer_id": 37956531, "question_id": 37956425, "link": "https://stackoverflow.com/questions/37956425/kotlin-modifying-immutable-list-through-cast-is-it-legitimate/37956531#37956531", "title": "Kotlin: Modifying (immutable) List through cast, is it legitimate?", "body": "<p>There are a few different types of immutability:</p>\n\n<p>One is mentioned from a separate SO answer <a href=\"https://stackoverflow.com/questions/33727657/kotlin-and-immutable-collections\">here</a>.</p>\n\n<blockquote>\n  <p>Readonly - you are NOT supposed to change it (Kotlin's List) but something may (cast to Mutable, or change from Java).</p>\n</blockquote>\n\n<p><code>List</code> is just an interface that does not have mutating methods, but you can change the instance if you cast it to <code>MutableList</code>.</p>\n\n<p>Someone then goes on to comment that Kotlin chose to be readonly in order to use Java collections directly, so there is no overhead or conversion in using Java collections.</p>\n\n<p>Kotlin List is readonly, not immutable. Other callers (Java for example) may change the list. Kotlin callers might cast the list and change it. There is no immutable protection.</p>\n\n<p>Original Source: <a href=\"https://stackoverflow.com/questions/33727657/kotlin-and-immutable-collections\">Kotlin and Immutable Collections?</a></p>\n"}, {"comments": [{"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 0, "creation_date": 1466694475, "post_id": 37961799, "comment_id": 63434510, "body": "Did you mean &quot;Kotlin&#39;s Lists are also <i>MutableList</i>&quot;?"}, {"owner": {"reputation": 25103, "user_id": 3199595, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/TwK8q.png?s=128&g=1", "display_name": "Malt", "link": "https://stackoverflow.com/users/3199595/malt"}, "reply_to_user": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 0, "creation_date": 1466694579, "post_id": 37961799, "comment_id": 63434598, "body": "@Ilya Yeah, fixed."}], "tags": [], "owner": {"reputation": 25103, "user_id": 3199595, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/TwK8q.png?s=128&g=1", "display_name": "Malt", "link": "https://stackoverflow.com/users/3199595/malt"}, "is_accepted": false, "score": 1, "last_activity_date": 1466694566, "last_edit_date": 1466694566, "creation_date": 1466581937, "answer_id": 37961799, "question_id": 37956425, "link": "https://stackoverflow.com/questions/37956425/kotlin-modifying-immutable-list-through-cast-is-it-legitimate/37961799#37961799", "title": "Kotlin: Modifying (immutable) List through cast, is it legitimate?", "body": "<p>Is it legitimate? Well, yes. There are uses cases in which that would make sense.</p>\n\n<p>Is it a good idea? I think not, especially if you're talking about casting a list that was returned by some external library. The cast will fail if someone actually hands you some <code>List</code> implementations that really is immutable and does not implement <code>MutableList</code>. The fact that at the moment (Kotlin 1.0.2), all of Kotlin's <code>Lists</code> are also <code>MutableList</code>s doesn't mean that every <code>List</code> you'll ever see in your code is also an <code>MutableList</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 4427, "user_id": 4706743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64b05c3b09628ba8955d6d7a188271af?s=128&d=identicon&r=PG&f=1", "display_name": "D3xter", "link": "https://stackoverflow.com/users/4706743/d3xter"}, "is_accepted": false, "score": 1, "last_activity_date": 1466760726, "creation_date": 1466760726, "answer_id": 38010095, "question_id": 37956425, "link": "https://stackoverflow.com/questions/37956425/kotlin-modifying-immutable-list-through-cast-is-it-legitimate/38010095#38010095", "title": "Kotlin: Modifying (immutable) List through cast, is it legitimate?", "body": "<p>Right now if you use <strong>listOf()</strong> you'll get a List with all methods, which mutate the list, throwing java.lang.UnsupportedOperationException:</p>\n\n<pre><code>val list = listOf(1, 2)\n\nval mlist = list as MutableList\n\nmlist.add(3)\n</code></pre>\n\n<p>This throws:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.UnsupportedOperationException\n        at java.util.AbstractList.add(AbstractList.java:148)\n</code></pre>\n"}], "owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1082, "favorite_count": 1, "accepted_answer_id": 37956531, "answer_count": 3, "score": 6, "last_activity_date": 1507941088, "creation_date": 1466553333, "last_edit_date": 1466558429, "question_id": 37956425, "link": "https://stackoverflow.com/questions/37956425/kotlin-modifying-immutable-list-through-cast-is-it-legitimate", "title": "Kotlin: Modifying (immutable) List through cast, is it legitimate?", "body": "<p>As we know the List in Kotlin is immutable i.e. you can't do add and remove as below.</p>\n\n<pre><code>class TempClass {\n    var myList: List&lt;Int&gt;? = null\n    fun doSomething() {\n        myList = ArrayList&lt;Int&gt;()\n        myList!!.add(10)\n        myList!!.remove(10)\n    }\n}\n</code></pre>\n\n<p>But if we cast it to ArrayList as below, the add and remove works.</p>\n\n<pre><code>class TempClass {\n    var myList: List&lt;Int&gt;? = null\n    fun doSomething() {\n        myList = ArrayList&lt;Int&gt;()\n        (myList!! as ArrayList).add(10)\n        (myList!! as ArrayList).remove(10)\n    }\n}\n</code></pre>\n\n<p>I just thought this is odd, as myList is really a List, which is suppose to be immutable. And casting it, allow it to be altered.</p>\n\n<p>Is what done above (casting to Array and modify the content) legitimate, or the language need to improve to disallow that?</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 6468069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a709eba6367635069c8893e7a3755e5?s=128&d=identicon&r=PG", "display_name": "Dante", "link": "https://stackoverflow.com/users/6468069/dante"}, "edited": false, "score": 3, "creation_date": 1496749390, "post_id": 37949190, "comment_id": 75777736, "body": "Just like Swift!"}, {"owner": {"reputation": 12909, "user_id": 458365, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/aEkXV.jpg?s=128&g=1", "display_name": "pablisco", "link": "https://stackoverflow.com/users/458365/pablisco"}, "reply_to_user": {"reputation": 81, "user_id": 6468069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a709eba6367635069c8893e7a3755e5?s=128&d=identicon&r=PG", "display_name": "Dante", "link": "https://stackoverflow.com/users/6468069/dante"}, "edited": false, "score": 40, "creation_date": 1519071899, "post_id": 37949190, "comment_id": 84751119, "body": "@Dante Kotlin initial release: 2011, Swift initial release: 2014. I think it&#39;s the other way around ;)"}, {"owner": {"reputation": 6277, "user_id": 489762, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/in7ue.jpg?s=128&g=1", "display_name": "Sudipta Som", "link": "https://stackoverflow.com/users/489762/sudipta-som"}, "edited": false, "score": 0, "creation_date": 1599122701, "post_id": 37949190, "comment_id": 112677590, "body": "Its awesome answer"}, {"owner": {"reputation": 2268, "user_id": 2808624, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8d617e3cf000421ce00074beff4b2f6c?s=128&d=identicon&r=PG&f=1", "display_name": "user2808624", "link": "https://stackoverflow.com/users/2808624/user2808624"}, "edited": false, "score": 0, "creation_date": 1604571953, "post_id": 37949190, "comment_id": 114389418, "body": "I am wondering, why the compiler does not realize that problem."}, {"owner": {"reputation": 2088, "user_id": 3701433, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/wsvfr.jpg?s=128&g=1", "display_name": "Prudhvi", "link": "https://stackoverflow.com/users/3701433/prudhvi"}, "edited": false, "score": 0, "creation_date": 1605715992, "post_id": 37949190, "comment_id": 114737829, "body": "Because it doesn&#39;t know the value at compile time. Only at runtime it detects null value."}], "tags": [], "owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "is_accepted": true, "score": 192, "last_activity_date": 1466524527, "creation_date": 1466524527, "answer_id": 37949190, "question_id": 37949024, "link": "https://stackoverflow.com/questions/37949024/kotlin-typecastexception-null-cannot-be-cast-to-non-null-type-com-midsizemango/37949190#37949190", "title": "kotlin.TypeCastException: null cannot be cast to non-null type com.midsizemango.databasekotlin.Note", "body": "<p>In this line:</p>\n\n<pre><code>note = intent.getSerializableExtra(EXTRA_NOTE) as Note\n</code></pre>\n\n<p><code>Note</code> is a <a href=\"https://kotlinlang.org/docs/reference/null-safety.html#nullable-types-and-non-null-types\">non-null type</a>, so the cast to it triggers a null check. Since you're comparing <code>note</code> to <code>null</code> manually afterwards, probably you meant the <a href=\"https://kotlinlang.org/docs/reference/typecasts.html#safe-nullable-cast-operator\">safe cast operator</a>, which yields <code>null</code> if the expression is not of the type specified in the right-hand side:</p>\n\n<pre><code>note = intent.getSerializableExtra(EXTRA_NOTE) as? Note\n</code></pre>\n"}], "owner": {"reputation": 757, "user_id": 3302296, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/9G1FH.jpg?s=128&g=1", "display_name": "Prasad Shirvandkar", "link": "https://stackoverflow.com/users/3302296/prasad-shirvandkar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72612, "favorite_count": 6, "accepted_answer_id": 37949190, "answer_count": 1, "score": 71, "last_activity_date": 1500611031, "creation_date": 1466524080, "last_edit_date": 1500611031, "question_id": 37949024, "link": "https://stackoverflow.com/questions/37949024/kotlin-typecastexception-null-cannot-be-cast-to-non-null-type-com-midsizemango", "title": "kotlin.TypeCastException: null cannot be cast to non-null type com.midsizemango.databasekotlin.Note", "body": "<p>I am trying to code my app in Kotlin, but I am getting null cannot be casted to non-null type and app force stops when I open EditNoteActivity  at EXTRA_NOTE probably.</p>\n\n<p>Any Help is Highly Appreciated</p>\n\n<p>Code:</p>\n\n<pre><code>class EditNoteActivity : AppCompatActivity() {\n\nvar note: Note? = null\n\nprivate val editNote: TextView? = null\n\nprivate val fabdrwble: Boolean? = null\nprivate val notesData: MutableList&lt;Note&gt;? = null\nprivate var databaseHelper: DatabaseHelper? = null\n\nprivate val save: Boolean? = null\nprivate var saveButton: FloatingActionButton? = null\nprivate val tint: ColorStateList? = null\n\ninternal var mRowId: Long? = null\n\ninternal var spinner: Spinner? = null\ninternal var spinnertext: String? = null\n\ninternal var fav: Int = 0\n\ninternal var mSharedFromIntentFilter = false\n\ninternal var editTitle: EditText? = null\ninternal var editContent: EditText? = null\ninternal var inputlayoutTitle: TextInputLayout? = null\ninternal var inputlayoutContent: TextInputLayout? = null\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_edit_note)\n\n    var toolbar = findViewById(R.id.toolbar_edit) as Toolbar?\n    setSupportActionBar(toolbar)\n\n    if (supportActionBar != null)\n        supportActionBar!!.setDisplayHomeAsUpEnabled(true)\n\n    databaseHelper = DatabaseHelper(applicationContext)\n\n    inputlayoutTitle = findViewById(R.id.inputlayoutTitle) as TextInputLayout?\n    inputlayoutContent = findViewById(R.id.inputlayoutContent) as TextInputLayout?\n    editTitle = findViewById(R.id.note_title) as EditText\n    editContent = findViewById(R.id.note_content) as EditText?\n\n    val bundle = intent.extras\n    val s = bundle.getString(\"edit\")\n\n    if (s == \"add\") {\n        window.setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_VISIBLE)\n    } else if (s == \"editv\") {\n        window.setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_HIDDEN)\n    }\n\n    note = intent.getSerializableExtra(EXTRA_NOTE) as Note\n    if (note != null) {\n        editTitle?.setText(note!!.getTitle())\n        editContent?.setText(note!!.getContent())\n    } else {\n        note = Note()\n        //note.setUpdatedAt(new Date());\n    }\n\n    saveButton = findViewById(R.id.add_edit_button) as FloatingActionButton?\n    saveButton!!.setOnClickListener {\n        if (isNoteFormOk) {\n            setNoteResult()\n            finish()\n        } else\n            validateNoteForm()\n    }\n\n    var ll = findViewById(R.id.llmain) as LinearLayout?\n    var ll1 = findViewById(R.id.ll1) as LinearLayout?\n\n    /*if(note.getColor() == Color.TRANSPARENT){\n        selectedColor = preselect;\n    }else {\n        selectedColor = note.getColor();\n    }\n\n    getWindow().addFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS);\n\n    systemBarTintManager = new SystemBarTintManager(this);\n    systemBarTintManager.setStatusBarTintEnabled(true);\n\n    ll.setBackgroundColor(selectedColor);\n    ll1.setBackgroundColor(selectedColor);\n    toolbar.setBackgroundColor(note.getColor());\n    systemBarTintManager.setStatusBarTintColor(selectedColor);*/\n\n}\n\noverride fun onResume() {\n    super.onResume()\n}\n\noverride fun onOptionsItemSelected(item: MenuItem): Boolean {\n    when (item.itemId) {\n\n        android.R.id.home -&gt; {\n            onBack()\n            return true\n        }\n    /*\n        case R.id.speech:\n            try {\n                displaySpeechRecognizer();\n            } catch (ActivityNotFoundException e) {\n                Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(\"https://market.android.com/details?id=com.google.android.googlequicksearchbox\"));\n                startActivity(browserIntent);\n            }\n            return true;*/\n\n        else -&gt; return super.onOptionsItemSelected(item)\n    }\n}\n\nprivate fun displaySpeechRecognizer() {\n    val intent = Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH)\n    intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, RecognizerIntent.LANGUAGE_MODEL_FREE_FORM)\n    startActivityForResult(intent, SPEECH_REQUEST_CODE)\n}\n\noverride fun onActivityResult(requestCode: Int, resultCode: Int,\n                              data: Intent) {\n    if (requestCode == SPEECH_REQUEST_CODE &amp;&amp; resultCode == Activity.RESULT_OK) {\n        val results = data.getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS)\n        val spokenText = results[0]\n        editContent?.setText(spokenText)\n    }\n    if (requestCode == RequestResultCode.REQUEST_CODE_ADD_NOTE) {\n        if (resultCode == Activity.RESULT_OK) {\n            addNote(data)\n        }\n    }\n}\n\n\nprivate val isNoteFormOk: Boolean\n    get() {\n        val title = editTitle?.text.toString()\n        return !(title == null || title.trim { it &lt;= ' ' }.length == 0)\n    }\n\nprivate fun validateNoteForm() {\n    var msg: String? = null\n    if (isNullOrBlank(editTitle?.text.toString())) {\n        msg = \"Title Required\"\n        inputlayoutTitle?.error = \"Title is Missing\"\n    }\n    if (msg != null) {\n        Toast.makeText(applicationContext, msg, Toast.LENGTH_LONG).show()\n    }\n}\n\nprivate fun setNoteResult() {\n    note!!.setTitle(editTitle?.text.toString().trim { it &lt;= ' ' })\n    note!!.setContent(editContent?.text.toString().trim { it &lt;= ' ' })\n    //note.setUpdatedAt(new Date());\n    val intent = Intent()\n    intent.putExtra(EXTRA_NOTE, note)\n    setResult(Activity.RESULT_OK, intent)\n    //addNote(intent);\n\n    Toast.makeText(this@EditNoteActivity, \"Note Saved.\", Toast.LENGTH_LONG).show()\n}\n\nprivate fun onBack() {\n    if (isNoteFormOk) {\n        if (editTitle?.text.toString() == note!!.getTitle() &amp;&amp; editContent?.text.toString() == note!!.getContent()) {\n            setResult(Activity.RESULT_CANCELED, Intent())\n            finish()\n        } else {\n            AlertDialog.Builder(this@EditNoteActivity)\n                    .setTitle(\"Save\")\n                    .setMessage(\"Do You Want to Save Note\")\n                    .setPositiveButton(\"SAVE\") { dialog, which -&gt;\n                        setNoteResult()\n                        finish()\n            }.setNegativeButton(\"CANCEL\") { dialog, which -&gt;\n                setResult(Activity.RESULT_CANCELED, Intent())\n                finish()\n            }.show()\n        }\n    } else {\n        setResult(Activity.RESULT_CANCELED, Intent())\n        finish()\n    }\n}\n\nprivate fun addNote(data: Intent) {\n    val note = data.getSerializableExtra(EXTRA_NOTE) as Note\n    val noteId = databaseHelper!!.createNote(note)\n    note.setId(noteId)\n}\n\noverride fun onBackPressed() {\n    onBack()\n    val intentHome = Intent(this@EditNoteActivity, MainActivity::class.java)\n    intentHome.flags = Intent.FLAG_ACTIVITY_CLEAR_TOP\n    intentHome.putExtra(EXTRA_NOTE, note)\n    setResult(Activity.RESULT_OK, intentHome)\n}\n\ncompanion object {\n\n    private val EXTRA_NOTE = \"EXTRA_NOTE\"\n    private val SPEECH_REQUEST_CODE = 0\n\n    fun isNullOrBlank(str: String?): Boolean {\n        return str == null || str.trim { it &lt;= ' ' }.length == 0\n    }\n}\n}\n</code></pre>\n\n<p>Logs:</p>\n\n<blockquote>\n  <p>java.lang.RuntimeException: Unable to start activity ComponentInfo{\n  com.midsizemango.databasekotlin/com.midsizemango.databasekotlin.EditNoteActivity}:\n  kotlin.TypeCastException: null cannot be cast to non-null type\n  com.midsizemango.databasekotlin.Note\n                                 at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2298)at\n  android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2360)\n  at android.app.ActivityThread.access$800(ActivityThread.java:144)\n                                                                                     at\n  android.app.ActivityThread$H.handleMessage(ActivityThread.java:1278)\n                                                                                     at android.os.Handler.dispatchMessage(Handler.java:102)\n                                                                                     at android.os.Looper.loop(Looper.java:135)\n                                                                                     at android.app.ActivityThread.main(ActivityThread.java:5221)\n                                                                                     at java.lang.reflect.Method.invoke(Native Method)\n                                                                                     at java.lang.reflect.Method.invoke(Method.java:372)\n                                                                                     at\n  com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:899)\n                                                                                     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:694)\n                                                                                  Caused by: kotlin.TypeCastException: null cannot be cast to non-null\n  type com.midsizemango.databasekotlin.Note\n                                                                                     at\n  com.midsizemango.databasekotlin.EditNoteActivity.onCreate(EditNoteActivity.kt:82)\n                                                                                     at android.app.Activity.performCreate(Activity.java:5933)\n                                                                                     at\n  android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1105)\n                                                                                     at\n  android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2251)\n                                                                                     at\n  android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2360)\u00a0\n                                                                                     at android.app.ActivityThread.access$800(ActivityThread.java:144)\u00a0\n                                                                                     at\n  android.app.ActivityThread$H.handleMessage(ActivityThread.java:1278)\u00a0\n                                                                                     at android.os.Handler.dispatchMessage(Handler.java:102)\u00a0\n                                                                                     at android.os.Looper.loop(Looper.java:135)\u00a0\n                                                                                     at android.app.ActivityThread.main(ActivityThread.java:5221)\u00a0\n                                                                                     at java.lang.reflect.Method.invoke(Native Method)\u00a0\n                                                                                     at java.lang.reflect.Method.invoke(Method.java:372)\u00a0\n                                                                                     at\n  com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:899)\u00a0\n                                                                                     at com.android.internal.os.ZygoteInit.main (ZygoteInit.java:694)</p>\n</blockquote>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 4, "creation_date": 1466519418, "post_id": 37946305, "comment_id": 63343213, "body": "It looks like your kotlin code isn&#39;t compiled during build process. Have you applied the required plugins, as the <a href=\"https://kotlinlang.org/docs/reference/using-gradle.html#targeting-android\" rel=\"nofollow noreferrer\">tutorial</a> suggests? Also take a look at this <a href=\"https://github.com/JetBrains/kotlin-examples/tree/master/gradle/android-mixed-java-kotlin-project\" rel=\"nofollow noreferrer\">example</a>"}, {"owner": {"reputation": 3471, "user_id": 2068693, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Cu4rC.jpg?s=128&g=1", "display_name": "E. Fernandes", "link": "https://stackoverflow.com/users/2068693/e-fernandes"}, "reply_to_user": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 0, "creation_date": 1466520060, "post_id": 37946305, "comment_id": 63343709, "body": "That was it! I&#39;ve added <code>apply plugin: &#39;kotlin-android&#39;</code> and now .kt file is compiled and recognized. Thank very much."}, {"owner": {"reputation": 396, "user_id": 3712710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90e2e2a6aa9e828fc71a097d1ffc8316?s=128&d=identicon&r=PG&f=1", "display_name": "Rocoty", "link": "https://stackoverflow.com/users/3712710/rocoty"}, "edited": false, "score": 1, "creation_date": 1466598048, "post_id": 37946305, "comment_id": 63381415, "body": "@EdgarDaSilvaFernandes You should add an answer to this question explaining what you did in order to fix it, and mark it as the accepted answer :)"}], "answers": [{"tags": [], "owner": {"reputation": 3471, "user_id": 2068693, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Cu4rC.jpg?s=128&g=1", "display_name": "E. Fernandes", "link": "https://stackoverflow.com/users/2068693/e-fernandes"}, "is_accepted": true, "score": 21, "last_activity_date": 1466598420, "creation_date": 1466598420, "answer_id": 37968000, "question_id": 37946305, "link": "https://stackoverflow.com/questions/37946305/how-to-solve-error-cannot-find-symbol-class-after-converting-java-class/37968000#37968000", "title": "How to solve: &quot;error: cannot find symbol class ...&quot; after converting Java class to Kotlin?", "body": "<p>As pointed out by user @Ilya, the problem was that the .kt files weren't being compiled and, therefore, couldn't be recognized when I tried to deploy the app in the device. To solve this problem, all I had to do was add <code>apply plugin: 'kotlin-android'</code> in my module's gradle.build as indicated in the links he has pointed in his comment, and that's all! It works now!</p>\n"}, {"tags": [], "owner": {"reputation": 2697, "user_id": 4650581, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hmKpWSd9B4U/AAAAAAAAAAI/AAAAAAAAAK4/xL06IHBoIyo/photo.jpg?sz=128", "display_name": "Misagh", "link": "https://stackoverflow.com/users/4650581/misagh"}, "is_accepted": false, "score": 2, "last_activity_date": 1530950865, "creation_date": 1530950865, "answer_id": 51221233, "question_id": 37946305, "link": "https://stackoverflow.com/questions/37946305/how-to-solve-error-cannot-find-symbol-class-after-converting-java-class/51221233#51221233", "title": "How to solve: &quot;error: cannot find symbol class ...&quot; after converting Java class to Kotlin?", "body": "<p>I had the same problem &amp; fixed as follows (assuming that <code>apply plugin: kotlin-android</code> is added, but the problem still remains) :</p>\n\n<p><a href=\"https://stackoverflow.com/a/51220884/4650581\">Add <strong>sourceSets</strong> under android</a></p>\n\n<pre><code>android {\n  ...\n  sourceSets {\n    main.java.srcDirs += 'src/main/kotlin'\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 3471, "user_id": 2068693, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Cu4rC.jpg?s=128&g=1", "display_name": "E. Fernandes", "link": "https://stackoverflow.com/users/2068693/e-fernandes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6628, "favorite_count": 0, "accepted_answer_id": 37968000, "answer_count": 2, "score": 10, "last_activity_date": 1530950865, "creation_date": 1466516940, "last_edit_date": 1466554603, "question_id": 37946305, "link": "https://stackoverflow.com/questions/37946305/how-to-solve-error-cannot-find-symbol-class-after-converting-java-class", "title": "How to solve: &quot;error: cannot find symbol class ...&quot; after converting Java class to Kotlin?", "body": "<p>I'm trying to start with Kotlin by converting some Java classes of my project to Kotlin and create a mixed Java/Kotlin project. In order to configure the environment I did the following:</p>\n\n<ol>\n<li>Downloaded the latest version of Kotlin plugin (1.0.2);</li>\n<li>On the top level gradle.plugin I've added: <code>classpath \"org.jetbrains.kotlin:kotlin-android-extensions:1.0.2\"</code> in the dependencies section;</li>\n<li>In my module's gradle plugin I've added: <code>compile \"org.jetbrains.kotlin:kotlin-stdlib:1.0.2\"</code> in the dependencies section;</li>\n<li>I've picked the POJO class I wanted to convert to kotlin, selected from menu Code -> Convert Java File to Kotlin File;</li>\n<li>After that, all Java classes that were importing the converted class started to display: <code>error: cannot find symbol class Chat</code>. Below are the original class, the converted class and the log:</li>\n</ol>\n\n<h1>Original Java class:</h1>\n\n<pre><code>package br.com.gogame.model;\n\nimport com.google.gson.Gson;\nimport com.orm.SugarRecord;\nimport com.orm.dsl.Ignore;\n\nimport java.io.Serializable;\nimport java.util.List;\n\nimport br.com.gogame.model.enums.ChatType;\n\n/**\n * Created by edgar on 11-Apr-16.\n */\npublic class Chat extends SugarRecord implements Serializable {\n\n    private String title;\n    private String thumbnail;\n    private ChatType chat_type;\n    private long chat_id;\n    private int num_of_members;\n    private long user_id;\n    @Ignore\n    private List&lt;Long&gt; users;\n\n    public Chat() {\n    }\n\n    public String getTitle() {\n        return title;\n    }\n\n    public void setTitle(String title) {\n        this.title = title;\n    }\n\n    public String getThumbnail() {\n        return thumbnail;\n    }\n\n    public void setThumbnail(String thumbnail) {\n        this.thumbnail = thumbnail;\n    }\n\n    public ChatType getChat_type() {\n        return chat_type;\n    }\n\n    public void setChat_type(ChatType chat_type) {\n        this.chat_type = chat_type;\n    }\n\n    public long getChat_id() {\n        return chat_id;\n    }\n\n    public void setChat_id(long chat_id) {\n        this.chat_id = chat_id;\n    }\n\n    public int getNum_of_members() {\n        return num_of_members;\n    }\n\n    public void setNum_of_members(int num_of_members) {\n        this.num_of_members = num_of_members;\n    }\n\n    public long getUser_id() {\n        return user_id;\n    }\n\n    public void setUser_id(long user_id) {\n        this.user_id = user_id;\n    }\n\n    public List&lt;Long&gt; getUsers() {\n        return users;\n    }\n\n    public void setUsers(List&lt;Long&gt; users) {\n        this.users = users;\n    }\n\n    @Override\n    public String toString() {\n        Gson gson = new Gson();\n        return gson.toJson(this, Chat.class);\n    }\n}\n</code></pre>\n\n<h1>Converted Kotlin class</h1>\n\n<pre><code>package br.com.gogame.model\n\nimport com.orm.SugarRecord\nimport com.orm.dsl.Ignore\n\nimport java.io.Serializable\n\nimport br.com.gogame.model.enums.ChatType\n\n/**\n * Created by edgar on 11-Apr-16.\n */\nclass Chat : SugarRecord(), Serializable {\n    var title: String? = null\n    var thumbnail: String? = null\n    var chat_type: ChatType? = null\n    var chat_id: Long = 0\n    var num_of_members: Int = 0\n    var user_id: Long = 0\n    @Ignore\n    var users: List&lt;Long&gt;? = null\n}\n</code></pre>\n\n<h1>Error Log:</h1>\n\n<pre><code>C:\\SIBEN\\Edgar\\workspace\\GoGame\\current\\app\\src\\main\\java\\br\\com\\gogame\\commons\\infra\\App.java\n    Error:(8, 42) error: cannot find symbol class DaggerMainComponent\n    C:\\SIBEN\\Edgar\\workspace\\GoGame\\current\\app\\src\\main\\java\\br\\com\\gogame\\view\\fragments\\FragmentChats.java\n    Error:(23, 27) error: cannot find symbol class Chat\n    C:\\SIBEN\\Edgar\\workspace\\GoGame\\current\\app\\src\\main\\java\\br\\com\\gogame\\communication\\post_office\\GCMOffice.java\n    Error:(25, 27) error: cannot find symbol class Chat\n    C:\\SIBEN\\Edgar\\workspace\\GoGame\\current\\app\\src\\main\\java\\br\\com\\gogame\\controller\\util\\JSONParser.java\n    Error:(22, 27) error: cannot find symbol class Chat\n    Error:(98, 17) error: cannot find symbol class Chat\n    Error:(111, 60) error: cannot find symbol class Chat\n    C:\\SIBEN\\Edgar\\workspace\\GoGame\\current\\app\\src\\main\\java\\br\\com\\gogame\\controller\\ChatController.java\n    Error:(23, 27) error: cannot find symbol class Chat\n    Error:(41, 12) error: cannot find symbol class Chat\n    Error:(46, 12) error: cannot find symbol class Chat\n    Error:(62, 32) error: cannot find symbol class Chat\n    C:\\SIBEN\\Edgar\\workspace\\GoGame\\current\\app\\src\\main\\java\\br\\com\\gogame\\commons\\util\\FakeDataProvider.java\n    Error:(7, 27) error: cannot find symbol class Badge\n    Error:(8, 27) error: cannot find symbol class Chat\n    Error:(21, 24) error: cannot find symbol class Badge\n    Error:(94, 24) error: cannot find symbol class Chat\n    Error:(106, 20) error: cannot find symbol class Chat\n    Error:(118, 20) error: cannot find symbol class Chat\n    Error:(130, 20) error: cannot find symbol class Chat\n    Error:(142, 20) error: cannot find symbol class Chat\n    C:\\SIBEN\\Edgar\\workspace\\GoGame\\current\\app\\src\\main\\java\\br\\com\\gogame\\controller\\util\\NotificationFactory.java\n    Error:(19, 27) error: cannot find symbol class Chat\n    C:\\SIBEN\\Edgar\\workspace\\GoGame\\current\\app\\src\\main\\java\\br\\com\\gogame\\model\\dao\\ChatDAO.java\n    Error:(13, 27) error: cannot find symbol class Chat\n    Error:(24, 29) error: cannot find symbol class Chat\n    Error:(46, 19) error: cannot find symbol class Chat\n    Error:(60, 19) error: cannot find symbol class Chat\n    C:\\SIBEN\\Edgar\\workspace\\GoGame\\current\\app\\src\\main\\java\\br\\com\\gogame\\model\\dao\\ChatUserDAO.java\n    Error:(7, 27) error: cannot find symbol class Chat\n    C:\\SIBEN\\Edgar\\workspace\\GoGame\\current\\app\\src\\main\\java\\br\\com\\gogame\\model\\dao\\Datamanager.java\n    Error:(9, 27) error: cannot find symbol class Chat\n    C:\\SIBEN\\Edgar\\workspace\\GoGame\\current\\app\\src\\main\\java\\br\\com\\gogame\\model\\dao\\LocalUserDAO.java\n    Error:(8, 27) error: cannot find symbol class Chat\n    Error:(145, 24) error: cannot find symbol class Chat\n    C:\\SIBEN\\Edgar\\workspace\\GoGame\\current\\app\\src\\main\\java\\br\\com\\gogame\\view\\adapters\\BadgesAdapter.java\n    Error:(15, 27) error: cannot find symbol class Badge\n    Error:(21, 52) error: cannot find symbol class Badge\n    Error:(25, 60) error: cannot find symbol class Badge\n    C:\\SIBEN\\Edgar\\workspace\\GoGame\\current\\app\\src\\main\\java\\br\\com\\gogame\\controller\\FriendshipController.java\n    Error:(21, 27) error: cannot find symbol class Chat\n    Error:(195, 79) error: cannot find symbol class Chat\n    Error:(33, 8) error: dagger.internal.codegen.ComponentProcessor was unable to process this class because not all of its dependencies could be resolved. Check for compilation errors or a circular dependency with generated code.\n    C:\\SIBEN\\Edgar\\workspace\\GoGame\\current\\app\\src\\main\\java\\br\\com\\gogame\\controller\\MessageController.java\n    Error:(23, 27) error: cannot find symbol class Chat\n    Error:(91, 50) error: cannot find symbol class Chat\n    Error:(117, 61) error: cannot find symbol class Chat\n    Error:(128, 65) error: cannot find symbol class Chat\n    Error:(216, 46) error: cannot find symbol class Chat\n    Error:(34, 8) error: dagger.internal.codegen.ComponentProcessor was unable to process this class because not all of its dependencies could be resolved. Check for compilation errors or a circular dependency with generated code.\n    C:\\SIBEN\\Edgar\\workspace\\GoGame\\current\\app\\src\\main\\java\\br\\com\\gogame\\view\\activities\\ActivityCanvas.java\n    Error:(38, 27) error: cannot find symbol class Chat\n    Error:(64, 13) error: cannot find symbol class Chat\n    Error:(53, 8) error: dagger.internal.codegen.ComponentProcessor was unable to process this class because not all of its dependencies could be resolved. Check for compilation errors or a circular dependency with generated code.\n    C:\\SIBEN\\Edgar\\workspace\\GoGame\\current\\app\\src\\main\\java\\br\\com\\gogame\\view\\activities\\ActivityFriends.java\n    Error:(22, 27) error: cannot find symbol class Chat\n    Error:(196, 13) error: cannot find symbol class Chat\n    Error:(39, 8) error: dagger.internal.codegen.ComponentProcessor was unable to process this class because not all of its dependencies could be resolved. Check for compilation errors or a circular dependency with generated code.\n    C:\\SIBEN\\Edgar\\workspace\\GoGame\\current\\app\\src\\main\\java\\br\\com\\gogame\\view\\adapters\\ChatAdapter.java\n    Error:(26, 27) error: cannot find symbol class Chat\n    Error:(35, 50) error: cannot find symbol class Chat\n    Error:(43, 58) error: cannot find symbol class Chat\n    Error:(35, 8) error: dagger.internal.codegen.ComponentProcessor was unable to process this class because not all of its dependencies could be resolved. Check for compilation errors or a circular dependency with generated code.\n    C:\\SIBEN\\Edgar\\workspace\\GoGame\\current\\app\\src\\main\\java\\br\\com\\gogame\\commons\\infra\\dagger\\MainComponent.java\n    Error:(42, 8) error: dagger.internal.codegen.ComponentProcessor was unable to process this interface because not all of its dependencies could be resolved. Check for compilation errors or a circular dependency with generated code.\n    Error:Execution failed for task ':app:compileDebugJavaWithJavac'.\n    &gt; Compilation failed; see the compiler error output for details.\n    Information:BUILD FAILED\n    Information:Total time: 7.406 secs\n    Information:51 errors\n    Information:4 warnings\n    Information:See complete output in console\n</code></pre>\n"}, {"tags": ["android", "android-studio", "intellij-idea", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 8795, "user_id": 414345, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3f7f2011fd205b5c59bca4f80b151611?s=128&d=identicon&r=PG", "display_name": "Brad", "link": "https://stackoverflow.com/users/414345/brad"}, "edited": false, "score": 0, "creation_date": 1466538754, "post_id": 37945028, "comment_id": 63355350, "body": "Thanks Dmitry. I&#39;m looking forward to reading Kotlin in Action once it&#39;s out."}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 9, "last_activity_date": 1466513612, "creation_date": 1466513612, "answer_id": 37945028, "question_id": 37943834, "link": "https://stackoverflow.com/questions/37943834/how-does-convert-java-file-to-kotlin-file-work/37945028#37945028", "title": "How does Convert Java File to Kotlin File work?", "body": "<p>The tool uses the IntelliJ IDEA PSI interface to parse and analyze the Java source code and then converts the resulting tree into Kotlin text. It's open-source just like everything else related to Kotlin; you can find the implementation <a href=\"https://github.com/JetBrains/kotlin/tree/master/j2k\">here</a>.</p>\n"}], "owner": {"reputation": 8795, "user_id": 414345, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3f7f2011fd205b5c59bca4f80b151611?s=128&d=identicon&r=PG", "display_name": "Brad", "link": "https://stackoverflow.com/users/414345/brad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 500, "favorite_count": 1, "accepted_answer_id": 37945028, "answer_count": 1, "score": 10, "last_activity_date": 1495228689, "creation_date": 1466510367, "last_edit_date": 1466529561, "question_id": 37943834, "link": "https://stackoverflow.com/questions/37943834/how-does-convert-java-file-to-kotlin-file-work", "title": "How does Convert Java File to Kotlin File work?", "body": "<p>I'm exploring Kotlin through <a href=\"https://leanpub.com/kotlin-for-android-developers\" rel=\"noreferrer\">Kotlin for Android Developers</a>. One of the first steps is to use <code>Convert Java File to Kotlin File</code> to see how the Java and Kotlin files compare. </p>\n\n<p>I'm curious how this feature works. </p>\n\n<p>Is the tool creating an abstract syntax tree from the Java input then transpiling to Kotlin? Or is doing something much simpler? </p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1466517242, "post_id": 37940196, "comment_id": 63341425, "body": "how do you plan to use <code>GithubApi</code>? Do you need an access from Java?"}, {"owner": {"reputation": 23, "user_id": 6238994, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hAvIjXwt0ck/AAAAAAAAAAI/AAAAAAAAAJ8/J7OK3Lfordk/photo.jpg?sz=128", "display_name": "user6238994", "link": "https://stackoverflow.com/users/6238994/user6238994"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1466519391, "post_id": 37940196, "comment_id": 63343189, "body": "@voddan No, I just need a url value to create the instance, and I can&#39;t find it in <code>KClass&lt;T&gt;.members</code>"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 6238994, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hAvIjXwt0ck/AAAAAAAAAAI/AAAAAAAAAJ8/J7OK3Lfordk/photo.jpg?sz=128", "display_name": "user6238994", "link": "https://stackoverflow.com/users/6238994/user6238994"}, "edited": false, "score": 0, "creation_date": 1466518514, "post_id": 37941757, "comment_id": 63342460, "body": "I also tried <code>@JvmStatic</code> too, IDE says <code>Only functions in named objects and companion objects of classes can be annotated with &#39;@JvmStatic&#39;</code>."}], "tags": [], "owner": {"reputation": 396, "user_id": 3712710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90e2e2a6aa9e828fc71a097d1ffc8316?s=128&d=identicon&r=PG&f=1", "display_name": "Rocoty", "link": "https://stackoverflow.com/users/3712710/rocoty"}, "is_accepted": false, "score": 1, "last_activity_date": 1466505297, "last_edit_date": 1466505297, "creation_date": 1466504367, "answer_id": 37941757, "question_id": 37940196, "link": "https://stackoverflow.com/questions/37940196/how-to-access-static-fields-with-reflect-in-kotlin/37941757#37941757", "title": "How to access static fields with reflect in kotlin?", "body": "<p>The <code>@JvmStatic</code> annotation will make the property's backing field a static one. That is, if the annotation is applied to a property within a companion object, then a new static field will be created in the enclosing class.</p>\n\n<p>Note that Kotlin really has no notion of static, and that this annotation is merely for accessibility accross JVM languages.</p>\n"}, {"tags": [], "owner": {"reputation": 1453, "user_id": 2804610, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m7Bke.jpg?s=128&g=1", "display_name": "EPadronU", "link": "https://stackoverflow.com/users/2804610/epadronu"}, "is_accepted": true, "score": 2, "last_activity_date": 1466513526, "creation_date": 1466513526, "answer_id": 37944990, "question_id": 37940196, "link": "https://stackoverflow.com/questions/37940196/how-to-access-static-fields-with-reflect-in-kotlin/37944990#37944990", "title": "How to access static fields with reflect in kotlin?", "body": "<p>How about making <code>BASE_URL</code> a compile-time constant?</p>\n\n<pre><code>interface GithubApi {\n    companion object {\n        const val BASE_URL = \"https://api.github.com/\"\n    }\n}\n</code></pre>\n\n<p>At byte-code level <code>BASE_URL</code> is a static field of the <code>GithubApi</code> interface.</p>\n\n<pre><code>public interface GithubApi {\n  public static final GithubApi$Companion Companion;\n\n  public static final java.lang.String BASE_URL;\n\n  static {};\n    Code:\n       0: new           #26                 // class GithubApi$Companion\n       3: dup\n       4: aconst_null\n       5: invokespecial #30                 // Method GithubApi$Companion.\"&lt;init&gt;\":(Lkotlin/jvm/internal/DefaultConstructorMarker;)V\n       8: putstatic     #32                 // Field Companion:LGithubApi$Companion;\n      11: return\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 6238994, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hAvIjXwt0ck/AAAAAAAAAAI/AAAAAAAAAJ8/J7OK3Lfordk/photo.jpg?sz=128", "display_name": "user6238994", "link": "https://stackoverflow.com/users/6238994/user6238994"}, "edited": false, "score": 0, "creation_date": 1466560956, "post_id": 37948032, "comment_id": 63362575, "body": "Api interface is used in <a href=\"http://square.github.io/retrofit/\" rel=\"nofollow noreferrer\">Retrofit</a>, it has to be an interface. If I replace it with a function, to access it I need an instance, to create an instance I need the url value, seems like a loop."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "reply_to_user": {"reputation": 23, "user_id": 6238994, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hAvIjXwt0ck/AAAAAAAAAAI/AAAAAAAAAJ8/J7OK3Lfordk/photo.jpg?sz=128", "display_name": "user6238994", "link": "https://stackoverflow.com/users/6238994/user6238994"}, "edited": false, "score": 0, "creation_date": 1466561821, "post_id": 37948032, "comment_id": 63362801, "body": "My point is that you don&#39;t need to place your static information into the interface. The URL may be stored anywhere (options 1 and 2) near the interface."}, {"owner": {"reputation": 23, "user_id": 6238994, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hAvIjXwt0ck/AAAAAAAAAAI/AAAAAAAAAJ8/J7OK3Lfordk/photo.jpg?sz=128", "display_name": "user6238994", "link": "https://stackoverflow.com/users/6238994/user6238994"}, "edited": false, "score": 0, "creation_date": 1466566540, "post_id": 37948032, "comment_id": 63363854, "body": "True, I can put it in a map and access it with class name (GithubApi is not the only interface like that, it&#39;s not even a real interface in my code, it&#39;s just an example), but these code I post is just for test cases, less code and less caring about performance, I do use <code>Retrofit.Builder().baseUrl(GithubApi.BASE_URL)</code> in real code."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "reply_to_user": {"reputation": 23, "user_id": 6238994, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hAvIjXwt0ck/AAAAAAAAAAI/AAAAAAAAAJ8/J7OK3Lfordk/photo.jpg?sz=128", "display_name": "user6238994", "link": "https://stackoverflow.com/users/6238994/user6238994"}, "edited": false, "score": 0, "creation_date": 1466566866, "post_id": 37948032, "comment_id": 63363929, "body": "then maybe a companion object is the way to go"}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 1, "last_activity_date": 1466521393, "creation_date": 1466521393, "answer_id": 37948032, "question_id": 37940196, "link": "https://stackoverflow.com/questions/37940196/how-to-access-static-fields-with-reflect-in-kotlin/37948032#37948032", "title": "How to access static fields with reflect in kotlin?", "body": "<p>I see four basic options for that:</p>\n\n<p>1) Extract the property into an object (companion or not):</p>\n\n<pre><code>object GithubApiUrls {\n    val BASE_URL = \"https://api.github.com/\"\n}\n</code></pre>\n\n<p>2) Make a package-level property:</p>\n\n<pre><code>package myProgram\n\nval BASE_URL = \"https://api.github.com/\"\n</code></pre>\n\n<p>3) Use a class, not an interface, if you need inheritance (no idea what for, TBH):</p>\n\n<pre><code>open class GithubApi {\n    val BASE_URL = \"https://api.github.com/\"\n}\n</code></pre>\n\n<p>4) Replace the field with a method in the interface (can be overridden):</p>\n\n<pre><code>interface GithubApi {\n    fun BaseUrl() = \"https://api.github.com/\"\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 6238994, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hAvIjXwt0ck/AAAAAAAAAAI/AAAAAAAAAJ8/J7OK3Lfordk/photo.jpg?sz=128", "display_name": "user6238994", "link": "https://stackoverflow.com/users/6238994/user6238994"}, "edited": false, "score": 0, "creation_date": 1466589842, "post_id": 37964131, "comment_id": 63375926, "body": "Using <code>AllUrls.INSTANCE.getGITHUB_URL()</code> make this method can be used only for GithubApi now, that case we don&#39;t even need a <code>clazz</code>. And I don&#39;t think putting constants in interface is wrong, there is an integer constant <code>PARCELABLE_WRITE_RETURN_VALUE</code> right in <code>android.os.Parcelable</code>."}], "tags": [], "owner": {"reputation": 151, "user_id": 475857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c31bc31c781899e015ab3dee3ead90e5?s=128&d=identicon&r=PG", "display_name": "Aleosha", "link": "https://stackoverflow.com/users/475857/aleosha"}, "is_accepted": false, "score": 1, "last_activity_date": 1466588298, "creation_date": 1466588298, "answer_id": 37964131, "question_id": 37940196, "link": "https://stackoverflow.com/questions/37940196/how-to-access-static-fields-with-reflect-in-kotlin/37964131#37964131", "title": "How to access static fields with reflect in kotlin?", "body": "<p>Wouldn't suggest putting constants in interfaces at all. It introduces too much complexity without real value gain.</p>\n\n<p>Try decoupling class that holds the constant from the actual class that implements the interface.</p>\n\n<pre><code>public class AllUrls {\n    public static final String GITHUB_URL = \"https://api.github.com/\";\n}\n</code></pre>\n\n<p>That will become</p>\n\n<pre><code>object AllUrls {\n    val GITHUB_URL = \"https://api.github.com/\"\n}\n</code></pre>\n\n<p>And to use it</p>\n\n<pre><code> static &lt;T&gt; T instanceApi(Class&lt;T&gt; clazz) throws Exception {\n    return new Retrofit.Builder()\n        .baseUrl(AllUrls.INSTANCE.getGITHUB_URL())\n        .addConverterFactory(GsonConverterFactory.create(\n                new GsonBuilder().setDateFormat(\"yyyy-MM-dd HH:mm:ss\").create()))\n        .addCallAdapterFactory(RxJavaCallAdapterFactory.create())\n        .client(getClient())\n        .build().create(clazz);\n\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 6238994, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hAvIjXwt0ck/AAAAAAAAAAI/AAAAAAAAAJ8/J7OK3Lfordk/photo.jpg?sz=128", "display_name": "user6238994", "link": "https://stackoverflow.com/users/6238994/user6238994"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1696, "favorite_count": 1, "accepted_answer_id": 37944990, "answer_count": 4, "score": 2, "last_activity_date": 1466588298, "creation_date": 1466500479, "question_id": 37940196, "link": "https://stackoverflow.com/questions/37940196/how-to-access-static-fields-with-reflect-in-kotlin", "title": "How to access static fields with reflect in kotlin?", "body": "<p>I have this abstract class in java:</p>\n\n<pre><code>abstract class AbsApiTestCase&lt;T&gt; {\n    T mApi;\n\n    @Before\n    public void setUp() throws Exception {\n        mApi = instanceApi((Class&lt;T&gt;) (\n                  (ParameterizedType) getClass().getGenericSuperclass())\n                     .getActualTypeArguments()[0]);\n    }\n\n    static &lt;T&gt; T instanceApi(Class&lt;T&gt; clazz) throws Exception {\n        return new Retrofit.Builder()\n            .baseUrl(clazz.getField(\"BASE_URL\").get(null).toString())\n            .addConverterFactory(GsonConverterFactory.create(\n                    new GsonBuilder().setDateFormat(\"yyyy-MM-dd HH:mm:ss\").create()))\n            .addCallAdapterFactory(RxJavaCallAdapterFactory.create())\n            .client(getClient())\n            .build().create(clazz);\n\n    }\n    // some code\n}\n</code></pre>\n\n<p>And api looks like this:</p>\n\n<pre><code>public interface GithubApi {\n    String BASE_URL = \"https://api.github.com/\";\n    // some code\n}\n</code></pre>\n\n<p>It can be used like this:</p>\n\n<pre><code>public class GithubApiTest extends AbsApiTestCase&lt;GithubApi&gt; {\n    // some code\n}\n</code></pre>\n\n<p>But when I convert my code to kotlin, the static field <code>BASE_URL</code> looks like this:</p>\n\n<pre><code>interface GithubApi {\n    companion object {\n        val BASE_URL = \"https://api.github.com/\"\n    }\n    // some code\n}\n</code></pre>\n\n<p>And <code>BASE_URL</code> cannot be accessed like above. I found there is a <code>@JvmField</code> annotation but Android studio says <code>JvmField cannot be applied to a property defined in companion object of interface</code>.</p>\n\n<p>Is there a way to access this \"static field\"?</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 396, "user_id": 3712710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90e2e2a6aa9e828fc71a097d1ffc8316?s=128&d=identicon&r=PG&f=1", "display_name": "Rocoty", "link": "https://stackoverflow.com/users/3712710/rocoty"}, "edited": false, "score": 0, "creation_date": 1466504833, "post_id": 37936666, "comment_id": 63332520, "body": "Well, since use is inlined, the compiler will know that IF the passed function is invoked, that will happen immediately."}, {"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "reply_to_user": {"reputation": 396, "user_id": 3712710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90e2e2a6aa9e828fc71a097d1ffc8316?s=128&d=identicon&r=PG&f=1", "display_name": "Rocoty", "link": "https://stackoverflow.com/users/3712710/rocoty"}, "edited": false, "score": 1, "creation_date": 1466506503, "post_id": 37936666, "comment_id": 63333602, "body": "@Rocoty Note that the fact that <code>use</code> is inlined depends on the library that provides the function (stdlib in this case). Imagine an implementation like: <code>inline fun &lt;T : AutoCloseable, R&gt; T.use(block: (T) -&gt; R): R? { if(otherFunc()) { block(this) } } else { null }</code>. Depending if <code>otherFunc()</code> is inlined the compiler could try to figure out things further but it becomes complicated really quickly."}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 12, "last_activity_date": 1466489365, "last_edit_date": 1466489365, "creation_date": 1466489013, "answer_id": 37936666, "question_id": 37936557, "link": "https://stackoverflow.com/questions/37936557/ensuring-a-val-is-initialised-in-kotlin/37936666#37936666", "title": "Ensuring a val is initialised in Kotlin", "body": "<p>Assign the result of <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/use.html\"><code>use</code></a> method to the variable like so:</p>\n\n<pre><code>bob = StringWriter().use { sw -&gt;\n    sw.write(\"this is a test\")\n    sw.toString()\n}\n</code></pre>\n\n<p>The Java compiler is able to figure out that the variable will be initialised because the <a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html\">try with resources</a> is a language feature. The <code>use</code> method on the other hand is a library feature with behavior dependent on the implementation that is actually imported and used. In other words the Kotlin compiler has no way of knowing if the function passed as an argument to <code>use</code> will be invoked immediately or not.</p>\n"}], "owner": {"reputation": 15063, "user_id": 68283, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8d069a55fa769812730461b355a92b04?s=128&d=identicon&r=PG", "display_name": "Rich", "link": "https://stackoverflow.com/users/68283/rich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "accepted_answer_id": 37936666, "answer_count": 1, "score": 4, "last_activity_date": 1466489365, "creation_date": 1466488528, "question_id": 37936557, "link": "https://stackoverflow.com/questions/37936557/ensuring-a-val-is-initialised-in-kotlin", "title": "Ensuring a val is initialised in Kotlin", "body": "<p>I have the following method in Java:</p>\n\n<pre><code>public void doSomething() {\n    final boolean promote = false;\n    final String bob;\n\n    if (promote) {\n        try(StringWriter sw = new StringWriter()) {\n            sw.write(\"this is a test\");\n            bob = sw.toString();\n        } catch (IOException e) {\n            e.printStackTrace();\n            throw new IllegalStateException();\n        }\n    } else {\n        bob = \"anaconda\";\n    }\n\n    System.out.println(bob);\n}\n</code></pre>\n\n<p>When I convert this to Kotlin:</p>\n\n<pre><code>    val promote = false\n    val bob: String\n\n    if (promote) {\n        try {\n            StringWriter().use { sw -&gt;\n                sw.write(\"this is a test\")\n                bob = sw.toString()\n            }\n        } catch (e: IOException) {\n            e.printStackTrace()\n            throw IllegalStateException()\n        }\n    } else {\n        bob = \"anaconda\"\n    }\n\n    println(bob)\n</code></pre>\n\n<p>But I get a compiler error on the last line: <code>Variable 'bob' must be initialized.</code></p>\n\n<p>I can't see how Kotlin could fail to initialise the <code>bob</code> variable when the Java compiler is so sure that the variable has either been initialised or an exception has been thrown.</p>\n\n<p>Is my only option to change <code>bob</code> to a <code>var</code> and initialise it?</p>\n"}, {"tags": ["java", "libgdx", "kotlin", "fastutil"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1466478601, "post_id": 37934917, "comment_id": 63319857, "body": "Does libgdx include a different version of fastutil, perhaps?"}, {"owner": {"reputation": 7656, "user_id": 1938929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/OeAme.png?s=128&g=1", "display_name": "Jire", "link": "https://stackoverflow.com/users/1938929/jire"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1466478816, "post_id": 37934917, "comment_id": 63319912, "body": "@immibis If I remove the FastUtil dependency from my project I can no longer access any of FastUtil, so my guess is no."}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1466499098, "post_id": 37934917, "comment_id": 63328452, "body": "How exactly are you compiling and running your project?"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1466522665, "post_id": 37934917, "comment_id": 63345828, "body": "Might have something in common with <a href=\"http://stackoverflow.com/questions/37625983/why-is-integer-parameter-of-java-method-mapped-to-int-and-not-platform-type\" title=\"why is integer parameter of java method mapped to int and not platform type\">stackoverflow.com/questions/37625983/&hellip;</a>"}, {"owner": {"reputation": 7656, "user_id": 1938929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/OeAme.png?s=128&g=1", "display_name": "Jire", "link": "https://stackoverflow.com/users/1938929/jire"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1466535237, "post_id": 37934917, "comment_id": 63353377, "body": "@yole I use the following Gradle script: <a href=\"https://gist.github.com/Jire/0c14429940f3e04eaeecd578a2e30b13\" rel=\"nofollow noreferrer\">gist.github.com/Jire/0c14429940f3e04eaeecd578a2e30b13</a>  I am running the project through my libGDX desktop launcher class."}, {"owner": {"reputation": 7656, "user_id": 1938929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/OeAme.png?s=128&g=1", "display_name": "Jire", "link": "https://stackoverflow.com/users/1938929/jire"}, "reply_to_user": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1466535291, "post_id": 37934917, "comment_id": 63353411, "body": "@hotkey Very possible!"}], "owner": {"reputation": 7656, "user_id": 1938929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/OeAme.png?s=128&g=1", "display_name": "Jire", "link": "https://stackoverflow.com/users/1938929/jire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1466478441, "creation_date": 1466478441, "question_id": 37934917, "link": "https://stackoverflow.com/questions/37934917/libgdx-other-libraries-arent-working", "title": "LibGDX: Other libraries aren&#39;t working?", "body": "<p>I am using LibGDX for my game, and I am trying to use FastUtil's <code>Int2BooleanArrayMap</code> to store my key states (up/down).</p>\n\n<p>Unfortunately I get this weird error:</p>\n\n<pre><code>Exception in thread \"LWJGL Application\" com.badlogic.gdx.utils.GdxRuntimeException: java.lang.NoSuchMethodError: it.unimi.dsi.fastutil.ints.Int2BooleanArrayMap.put(IZ)Ljava/lang/Boolean;\n    at com.badlogic.gdx.backends.lwjgl.LwjglApplication$1.run(LwjglApplication.java:131)\nCaused by: java.lang.NoSuchMethodError: it.unimi.dsi.fastutil.ints.Int2BooleanArrayMap.put(IZ)Ljava/lang/Boolean;\n    at com.acelta.Input.keyDown(Input.kt:12)\n    at com.badlogic.gdx.backends.lwjgl.LwjglInput.processEvents(LwjglInput.java:312)\n    at com.badlogic.gdx.backends.lwjgl.LwjglApplication.mainLoop(LwjglApplication.java:215)\n    at com.badlogic.gdx.backends.lwjgl.LwjglApplication$1.run(LwjglApplication.java:124)\n</code></pre>\n\n<p>The code is very simple for my input processor:</p>\n\n<pre><code>package org.jire.wot\n\nimport com.badlogic.gdx.InputAdapter\nimport it.unimi.dsi.fastutil.ints.Int2BooleanArrayMap\nimport org.jire.wot.App.camera\n\nobject Input : InputAdapter() {\n\n    private val map = Int2BooleanArrayMap()\n\n    override fun keyDown(keycode: Int): Boolean {\n        map.put(keycode, true)\n        return true\n    }\n\n    override fun keyUp(keycode: Int): Boolean {\n        map.put(keycode, false)\n        return true\n    }\n\n    override fun scrolled(amount: Int): Boolean {\n        camera.zoom += amount / 13F\n        if (camera.zoom &lt; 0.6F) camera.zoom = 0.6F\n        else if (camera.zoom &gt; 1F) camera.zoom = 1F\n        return true\n    }\n\n}\n</code></pre>\n\n<p>What can I do about this?</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 3, "creation_date": 1466493850, "post_id": 37933012, "comment_id": 63325306, "body": "Small correction, <code>Arrays.asList</code> returns a <code>java.util.Arrays.ArrayList</code> (not to be confused with <code>java.util.ArrayList</code>). This list is somewhat immutable in that you can&#39;t add or remove items, but you can replace items by index."}], "tags": [], "owner": {"reputation": 25103, "user_id": 3199595, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/TwK8q.png?s=128&g=1", "display_name": "Malt", "link": "https://stackoverflow.com/users/3199595/malt"}, "is_accepted": false, "score": 9, "last_activity_date": 1466464431, "last_edit_date": 1466464431, "creation_date": 1466462921, "answer_id": 37933012, "question_id": 37931676, "link": "https://stackoverflow.com/questions/37931676/how-to-turn-a-mutable-collection-into-an-immutable-one/37933012#37933012", "title": "How to turn a Mutable Collection into an Immutable one", "body": "<p>As mentioned <a href=\"https://stackoverflow.com/questions/34770493/kotlin-instantiate-immutable-list\">here</a> and <a href=\"https://stackoverflow.com/questions/33727657/kotlin-and-immutable-collections\">here</a>, you'd need to write your own <code>List</code> implementation for that, or use an existing one (Guava's ImmutableList comes to mind, or <a href=\"https://projects.eclipse.org/proposals/eclipse-collections\" rel=\"noreferrer\">Eclipse Collections</a> as <a href=\"https://stackoverflow.com/users/278836/andrew-white\">Andrew</a> suggested).</p>\n\n<p>Kotlin enforces list (im)mutability by interface only. There are no <code>List</code> implementations that don't also implement <code>MutableList</code>.</p>\n\n<p>Even the idiomatic <code>listOf(1,2,3)</code> ends up calling Kotlin's <code>ArraysUtilJVM.asList()</code> which calls Java's <code>Arrays.asList()</code> which returns a plain old Java <code>ArrayList</code>.</p>\n\n<p>If you care more about protecting your own internal list, than about the immutability itself, you can of course copy the entire collection and return it as an <code>List</code>, just like Kotlin does: </p>\n\n<pre><code>return ArrayList(original)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 50094, "user_id": 278836, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6441baaefcb6a417d11375d96ca21d56?s=128&d=identicon&r=PG", "display_name": "Andrew White", "link": "https://stackoverflow.com/users/278836/andrew-white"}, "is_accepted": false, "score": 3, "last_activity_date": 1466463499, "creation_date": 1466463499, "answer_id": 37933111, "question_id": 37931676, "link": "https://stackoverflow.com/questions/37931676/how-to-turn-a-mutable-collection-into-an-immutable-one/37933111#37933111", "title": "How to turn a Mutable Collection into an Immutable one", "body": "<p>I know this a Kotlin specific question and @Malt is correct but I would like to add an alternative. In particular I find <a href=\"https://projects.eclipse.org/proposals/eclipse-collections\" rel=\"nofollow\">Eclipse Collections</a>, formally GS-Collections, as a better alternative to Guava for most cases and it supplements Kotlin's built in collections well. </p>\n"}, {"comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 1, "creation_date": 1466717214, "post_id": 37936456, "comment_id": 63448379, "body": "A fuller version of this was added to Klutter blocking all related actions such as an <code>Iterator</code> recieved from a list, a <code>subList</code> from a list, a <code>entrySet</code> from a map and more.  See: <a href=\"http://stackoverflow.com/a/38002121/3679676\">stackoverflow.com/a/38002121/3679676</a>"}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 18, "last_activity_date": 1466488014, "creation_date": 1466488014, "answer_id": 37936456, "question_id": 37931676, "link": "https://stackoverflow.com/questions/37931676/how-to-turn-a-mutable-collection-into-an-immutable-one/37936456#37936456", "title": "How to turn a Mutable Collection into an Immutable one", "body": "<p>Currently in Kotlin stdlib there are no implementations of <code>List&lt;T&gt;</code> (<code>Map&lt;K,V&gt;</code>) that <strong>would not also implement</strong> <code>MutableList&lt;T&gt;</code> (<code>MutableMap&lt;K,V&gt;</code>). However due to <a href=\"https://kotlinlang.org/docs/reference/delegation.html\">Kotlin's delegation feature</a> the implementations become one liners:</p>\n\n<pre><code>class ImmutableList&lt;T&gt;(private val inner:List&lt;T&gt;) : List&lt;T&gt; by inner\nclass ImmutableMap&lt;K, V&gt;(private val inner: Map&lt;K, V&gt;) : Map&lt;K, V&gt; by inner\n</code></pre>\n\n<p>You can also enhance the creation of the immutable counterparts with extension methods:</p>\n\n<pre><code>fun &lt;K, V&gt; Map&lt;K, V&gt;.toImmutableMap(): Map&lt;K, V&gt; {\n    if (this is ImmutableMap&lt;K, V&gt;) {\n        return this\n    } else {\n        return ImmutableMap(this)\n    }\n}\n\nfun &lt;T&gt; List&lt;T&gt;.toImmutableList(): List&lt;T&gt; {\n    if (this is ImmutableList&lt;T&gt;) {\n        return this\n    } else {\n        return ImmutableList(this)\n    }\n}\n</code></pre>\n\n<p>The above prevents a caller from modifying the <code>List</code> (<code>Map</code>) by casting to a different class. However there are still reasons to create a copy of the original container to prevent subtle issues like <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/ConcurrentModificationException.html\">ConcurrentModificationException</a>:</p>\n\n<pre><code>class ImmutableList&lt;T&gt; private constructor(private val inner: List&lt;T&gt;) : List&lt;T&gt; by inner {\n    companion object {\n        fun &lt;T&gt; create(inner: List&lt;T&gt;) = if (inner is ImmutableList&lt;T&gt;) {\n                inner\n            } else {\n                ImmutableList(inner.toList())\n            }\n    }\n}\n\nclass ImmutableMap&lt;K, V&gt; private constructor(private val inner: Map&lt;K, V&gt;) : Map&lt;K, V&gt; by inner {\n    companion object {\n        fun &lt;K, V&gt; create(inner: Map&lt;K, V&gt;) = if (inner is ImmutableMap&lt;K, V&gt;) {\n            inner\n        } else {\n            ImmutableMap(hashMapOf(*inner.toList().toTypedArray()))\n        }\n    }\n}\n\nfun &lt;K, V&gt; Map&lt;K, V&gt;.toImmutableMap(): Map&lt;K, V&gt; = ImmutableMap.create(this)\nfun &lt;T&gt; List&lt;T&gt;.toImmutableList(): List&lt;T&gt; = ImmutableList.create(this)\n</code></pre>\n\n<p>While the above is not hard to implement there are already implementations of immutable lists and maps in both <a href=\"https://github.com/google/guava/wiki/ImmutableCollectionsExplained\">Guava</a> and <a href=\"https://projects.eclipse.org/proposals/eclipse-collections\">Eclipse-Collections</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 2, "last_activity_date": 1466518037, "creation_date": 1466518037, "answer_id": 37946708, "question_id": 37931676, "link": "https://stackoverflow.com/questions/37931676/how-to-turn-a-mutable-collection-into-an-immutable-one/37946708#37946708", "title": "How to turn a Mutable Collection into an Immutable one", "body": "<p>A classic solution is to copy your data, so that even if modified, the change would not affect the private class property:</p>\n\n<pre><code>class School {\n    private val roster = mutableMapOf&lt;Int, MutableList&lt;String&gt;&gt;()\n\n    fun db(): Map&lt;Int, List&lt;String&gt;&gt; = roster.mapValuestTo {it.value.toList}\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1372, "user_id": 3621912, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KhFGu.png?s=128&g=1", "display_name": "Benny", "link": "https://stackoverflow.com/users/3621912/benny"}, "is_accepted": false, "score": 15, "last_activity_date": 1571964315, "last_edit_date": 1571964315, "creation_date": 1571234014, "answer_id": 58415030, "question_id": 37931676, "link": "https://stackoverflow.com/questions/37931676/how-to-turn-a-mutable-collection-into-an-immutable-one/58415030#58415030", "title": "How to turn a Mutable Collection into an Immutable one", "body": "<p>Use <strong>Collections</strong> to converts a <strong>Mutable</strong> list to <strong>Immutable</strong> list, Example:</p>\n\n<p>Mutable list:</p>\n\n<pre><code>val mutableList = mutableListOf&lt;String&gt;()\n</code></pre>\n\n<p>Converts to Immutable list:</p>\n\n<pre><code>val immutableList = Collections.unmodifiableList(mutableList)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 474, "user_id": 3073044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8rHUK.jpg?s=128&g=1", "display_name": "Renann", "link": "https://stackoverflow.com/users/3073044/renann"}, "is_accepted": false, "score": 5, "last_activity_date": 1586663492, "creation_date": 1586663492, "answer_id": 61166635, "question_id": 37931676, "link": "https://stackoverflow.com/questions/37931676/how-to-turn-a-mutable-collection-into-an-immutable-one/61166635#61166635", "title": "How to turn a Mutable Collection into an Immutable one", "body": "<p>Simply call <code>toMap()</code> on your <code>MutableMap</code>.</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>val myMap = mutableMapOf&lt;String, String&gt;(\"x\" to \"y\").toMap()\n</code></pre>\n\n<p>Done.</p>\n\n<p>The same also works for lists.</p>\n"}], "owner": {"reputation": 69512, "user_id": 697630, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/40769e88c0dc93d387a9e368c332fdf9?s=128&d=identicon&r=PG", "display_name": "Edwin Dalorzo", "link": "https://stackoverflow.com/users/697630/edwin-dalorzo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29276, "favorite_count": 7, "accepted_answer_id": 37936456, "answer_count": 6, "score": 49, "last_activity_date": 1586663492, "creation_date": 1466456126, "last_edit_date": 1466459084, "question_id": 37931676, "link": "https://stackoverflow.com/questions/37931676/how-to-turn-a-mutable-collection-into-an-immutable-one", "title": "How to turn a Mutable Collection into an Immutable one", "body": "<p>I was writing a small piece of code in which I internally handle my data in a mutable map, which in turn has mutable lists.</p>\n\n<p>I wanted to expose my data to the API user, but to avoid any unsafe publication of my data I wanted to expose it in immutable collections even when internally being handled by mutable ones.</p>\n\n<pre><code>class School {\n\n    val roster: MutableMap&lt;Int, MutableList&lt;String&gt;&gt; = mutableMapOf&lt;Int, MutableList&lt;String&gt;&gt;()\n\n    fun add(name: String, grade: Int): Unit {\n        val students = roster.getOrPut(grade) { mutableListOf() }\n        if (!students.contains(name)) {\n            students.add(name)\n        }\n    }\n\n    fun sort(): Map&lt;Int, List&lt;String&gt;&gt; {\n        return db().mapValues { entry -&gt; entry.value.sorted() }\n                .toSortedMap()\n    }\n\n    fun grade(grade: Int) = db().getOrElse(grade, { listOf() })\n    fun db(): Map&lt;Int, List&lt;String&gt;&gt; = roster //Uh oh!\n}\n</code></pre>\n\n<p>I managed to expose only <code>Map</code> and <code>List</code> (which are immutable) in the public API of my class, but the instances I am actually exposing are <em>still</em> inherently mutable.</p>\n\n<p>Which means an API user could simply cast my returned map as an ImmutableMap and gain access to the precious private data internal to my class, which was intended to be protected of this kind of access.</p>\n\n<p>I couldn't find a copy constructor in the collection factory methods <code>mutableMapOf()</code> or <code>mutableListOf()</code> and so I was wondering what is the best and most efficient way to turn a mutable collection into an immutable one.</p>\n\n<p>Any advice or recommendations?</p>\n"}, {"tags": ["android", "annotations", "kotlin", "apt", "kapt"], "answers": [{"tags": [], "owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "is_accepted": true, "score": 55, "last_activity_date": 1466447218, "creation_date": 1466447218, "answer_id": 37929347, "question_id": 37926188, "link": "https://stackoverflow.com/questions/37926188/how-to-use-kapt-in-androidtest-scope/37929347#37929347", "title": "how to use kapt in androidTest scope", "body": "<p>As described in the <a href=\"https://kotlinlang.org/docs/reference/using-gradle.html#annotation-processing\" rel=\"noreferrer\">documentation</a>, it's <code>kaptAndroidTest</code> (and <code>kaptTest</code> for unit tests).</p>\n"}], "owner": {"reputation": 35330, "user_id": 322642, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0030846647f93ba6bf0938a199688c2e?s=128&d=identicon&r=PG", "display_name": "ligi", "link": "https://stackoverflow.com/users/322642/ligi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3901, "favorite_count": 2, "accepted_answer_id": 37929347, "answer_count": 1, "score": 30, "last_activity_date": 1466508825, "creation_date": 1466436130, "last_edit_date": 1466508825, "question_id": 37926188, "link": "https://stackoverflow.com/questions/37926188/how-to-use-kapt-in-androidtest-scope", "title": "how to use kapt in androidTest scope", "body": "<p>Is there a way to use kapt for the androidtest scope? Currently I am migrating from com.neenbedankt.gradle.plugins android-apt to kapt - which works fine - but I am not sure how to do it for the androidTest scope - so replacing:</p>\n\n<pre><code>apt \"com.github.hotchemi:permissionsdispatcher-processor:$permissiondispatcher_version\"\napt \"com.google.dagger:dagger-compiler:$dagger_version\"\n</code></pre>\n\n<p>with</p>\n\n<pre><code>kapt \"com.github.hotchemi:permissionsdispatcher-processor:$permissiondispatcher_version\"\nkapt \"com.google.dagger:dagger-compiler:$dagger_version\"\n</code></pre>\n\n<p>works fine - but I found no way to migrate:</p>\n\n<pre><code>androidTestApt \"com.google.dagger:dagger-compiler:$dagger_version\"\n</code></pre>\n"}, {"tags": ["gradle", "spring-boot", "kotlin", "dropwizard", "spring-loaded"], "comments": [{"owner": {"reputation": 4021, "user_id": 3830108, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/elcXQ.jpg?s=128&g=1", "display_name": "Cortwave", "link": "https://stackoverflow.com/users/3830108/cortwave"}, "edited": false, "score": 0, "creation_date": 1466425361, "post_id": 37915583, "comment_id": 63295026, "body": "jrebel is working with kotlin as I known <a href=\"https://zeroturnaround.com/software/jrebel/\" rel=\"nofollow noreferrer\">zeroturnaround.com/software/jrebel</a>"}, {"owner": {"reputation": 3299, "user_id": 1048433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61c9fcb70b34b94a7330f6ccdbdf6a75?s=128&d=identicon&r=PG", "display_name": "rattray", "link": "https://stackoverflow.com/users/1048433/rattray"}, "reply_to_user": {"reputation": 4021, "user_id": 3830108, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/elcXQ.jpg?s=128&g=1", "display_name": "Cortwave", "link": "https://stackoverflow.com/users/3830108/cortwave"}, "edited": false, "score": 0, "creation_date": 1466437203, "post_id": 37915583, "comment_id": 63303642, "body": "Sorry, I should have specified FOSS \u2013 JRebel costs $475/yr/dev <a href=\"https://zeroturnaround.com/software/jrebel/pricing/\" rel=\"nofollow noreferrer\">zeroturnaround.com/software/jrebel/pricing</a>"}, {"owner": {"reputation": 69512, "user_id": 697630, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/40769e88c0dc93d387a9e368c332fdf9?s=128&d=identicon&r=PG", "display_name": "Edwin Dalorzo", "link": "https://stackoverflow.com/users/697630/edwin-dalorzo"}, "edited": false, "score": 0, "creation_date": 1466448956, "post_id": 37915583, "comment_id": 63310388, "body": "If you are using Spring Boot, have you checked <a href=\"http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#using-boot-devtools\" rel=\"nofollow noreferrer\">Spring Boot DevTools</a>? The whole point of devtools is to do that."}, {"owner": {"reputation": 3299, "user_id": 1048433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61c9fcb70b34b94a7330f6ccdbdf6a75?s=128&d=identicon&r=PG", "display_name": "rattray", "link": "https://stackoverflow.com/users/1048433/rattray"}, "edited": false, "score": 0, "creation_date": 1466452105, "post_id": 37915583, "comment_id": 63312022, "body": "Yes, I tried Spring Boot DevTools to no avail =/"}, {"owner": {"reputation": 3299, "user_id": 1048433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61c9fcb70b34b94a7330f6ccdbdf6a75?s=128&d=identicon&r=PG", "display_name": "rattray", "link": "https://stackoverflow.com/users/1048433/rattray"}, "edited": false, "score": 0, "creation_date": 1466452177, "post_id": 37915583, "comment_id": 63312056, "body": "Oh, and Spring Loaded crashed \u2013 perhaps I should file a report / ask a separate SO question about that..."}], "answers": [{"tags": [], "owner": {"reputation": 2385, "user_id": 810109, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/ZumA5.jpg?s=128&g=1", "display_name": "mkurz", "link": "https://stackoverflow.com/users/810109/mkurz"}, "is_accepted": false, "score": -3, "last_activity_date": 1466438393, "creation_date": 1466438393, "answer_id": 37926935, "question_id": 37915583, "link": "https://stackoverflow.com/questions/37915583/how-can-you-set-up-spring-loaded-with-kotlin-gradle-and-a-web-framework/37926935#37926935", "title": "How can you set up Spring Loaded with Kotlin, Gradle, and a web framework?", "body": "<p>Check out this sbt plugin:\n<a href=\"https://github.com/pfn/kotlin-plugin\" rel=\"nofollow\">https://github.com/pfn/kotlin-plugin</a></p>\n\n<p>Haven't tried it myself, maybe this is what you are looking for.</p>\n"}], "owner": {"reputation": 3299, "user_id": 1048433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61c9fcb70b34b94a7330f6ccdbdf6a75?s=128&d=identicon&r=PG", "display_name": "rattray", "link": "https://stackoverflow.com/users/1048433/rattray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 475, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1466438393, "creation_date": 1466402935, "question_id": 37915583, "link": "https://stackoverflow.com/questions/37915583/how-can-you-set-up-spring-loaded-with-kotlin-gradle-and-a-web-framework", "title": "How can you set up Spring Loaded with Kotlin, Gradle, and a web framework?", "body": "<p>I'm new to the JVM and interested in trying Kotlin for RESTful web development. Hot reloading is a dev feature I'm used to from dynamic scripting languages like Python, Ruby, and JavaScript. </p>\n\n<p>Play, Dropwizard, and Spring Boot all seem appealing. I'd be willing to use any of the above, but I've been unable to get a simple \"save file, reload webpage\" workflow set up with any of the above. </p>\n\n<p>How can this be accomplished?</p>\n"}, {"tags": ["collections", "kotlin"], "comments": [{"owner": {"reputation": 6925, "user_id": 882251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6fcbed75edf82be759579f3fed59ab55?s=128&d=identicon&r=PG&f=1", "display_name": "Darwind", "link": "https://stackoverflow.com/users/882251/darwind"}, "edited": false, "score": 1, "creation_date": 1534849399, "post_id": 37913252, "comment_id": 90843861, "body": "Just a comment to why you can&#39;t do <code>myList = null</code> and then later on call add without <code>!!</code>. You could overcome this by using the <code>lateinit</code> keyword in front of your property like so: <code>lateinit var myList: List&lt;Int&gt;</code> this way you won&#39;t need to initialise the list immediately, but you guarantee to the compiler that you will initialise it before using the list the first time. It&#39;s a smoother solution, but it puts a responsibility on you as a developer."}], "answers": [{"comments": [{"owner": {"reputation": 24020, "user_id": 264802, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/9d9b871f40b338b97bfb44bdafa14a87?s=128&d=identicon&r=PG", "display_name": "fulvio", "link": "https://stackoverflow.com/users/264802/fulvio"}, "edited": false, "score": 0, "creation_date": 1466383953, "post_id": 37913254, "comment_id": 63278434, "body": "You&#39;re correct about using <code>MutableList</code>, however initializing it with <code>null</code> won&#39;t work. Only safe or non-null asserted calls are allowed on a nullable receiver of type <code>MutableList&lt;Int&gt;</code>."}, {"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "reply_to_user": {"reputation": 24020, "user_id": 264802, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/9d9b871f40b338b97bfb44bdafa14a87?s=128&d=identicon&r=PG", "display_name": "fulvio", "link": "https://stackoverflow.com/users/264802/fulvio"}, "edited": false, "score": 0, "creation_date": 1466384244, "post_id": 37913254, "comment_id": 63278470, "body": "It works on my end, and no error found. I don&#39;t need to initialize it unless when I need it when <code>doSomething</code>"}, {"owner": {"reputation": 6925, "user_id": 882251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6fcbed75edf82be759579f3fed59ab55?s=128&d=identicon&r=PG&f=1", "display_name": "Darwind", "link": "https://stackoverflow.com/users/882251/darwind"}, "edited": false, "score": 0, "creation_date": 1534849504, "post_id": 37913254, "comment_id": 90843911, "body": "@Elye I know this is an old answer and question, but using <code>lateinit</code> instead of making the list nullable is the proper way of going about this issue. Don&#39;t remember whether <code>lateinit</code> was added from the beginning of Kotlin though, but this is definitely the solution nowadays to use it :-)"}], "tags": [], "owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "is_accepted": false, "score": 8, "last_activity_date": 1557067896, "last_edit_date": 1557067896, "creation_date": 1466382669, "answer_id": 37913254, "question_id": 37913252, "link": "https://stackoverflow.com/questions/37913252/kotlins-list-missing-add-remove-map-missing-put-etc/37913254#37913254", "title": "Kotlin&#39;s List missing &quot;add&quot;, &quot;remove&quot;, Map missing &quot;put&quot;, etc?", "body": "<p>Apparently, the default List of Kotlin is immutable.\nTo have a List that could change, one should use MutableList as below</p>\n\n<pre><code>class TempClass {\n    var myList: MutableList&lt;Int&gt;? = null\n    fun doSomething() {\n        myList = ArrayList&lt;Int&gt;()\n        myList!!.add(10)\n        myList!!.remove(10)\n    }\n}\n</code></pre>\n\n<p><strong>Updated</strong>\nNonetheless, it is not recommended to use MutableList unless for a list that you really want to change. Refers to <a href=\"https://hackernoon.com/read-only-collection-in-kotlin-leads-to-better-coding-40cdfa4c6359\" rel=\"nofollow noreferrer\">https://hackernoon.com/read-only-collection-in-kotlin-leads-to-better-coding-40cdfa4c6359</a> for how Read-only collection provides better coding.</p>\n"}, {"comments": [{"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "edited": false, "score": 4, "creation_date": 1466383181, "post_id": 37913264, "comment_id": 63278296, "body": "Nice and well written answer. I&#39;m picking yours as the model answer despite having mine below :)"}, {"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 6, "creation_date": 1466410200, "post_id": 37913264, "comment_id": 63285931, "body": "You don&#39;t need to make the list nullable if you initialize it immediately. I edited your answer."}], "tags": [], "owner": {"reputation": 24020, "user_id": 264802, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/9d9b871f40b338b97bfb44bdafa14a87?s=128&d=identicon&r=PG", "display_name": "fulvio", "link": "https://stackoverflow.com/users/264802/fulvio"}, "is_accepted": true, "score": 391, "last_activity_date": 1581573025, "last_edit_date": 1581573025, "creation_date": 1466382871, "answer_id": 37913264, "question_id": 37913252, "link": "https://stackoverflow.com/questions/37913252/kotlins-list-missing-add-remove-map-missing-put-etc/37913264#37913264", "title": "Kotlin&#39;s List missing &quot;add&quot;, &quot;remove&quot;, Map missing &quot;put&quot;, etc?", "body": "<blockquote>\n  <p>Unlike many languages, Kotlin distinguishes between mutable and immutable collections (lists, sets, maps, etc). Precise control over exactly when collections can be edited is useful for eliminating bugs, and for designing good APIs.</p>\n</blockquote>\n\n<p><a href=\"https://kotlinlang.org/docs/reference/collections.html\" rel=\"noreferrer\">https://kotlinlang.org/docs/reference/collections.html</a></p>\n\n<p>You'll need to use a <code>MutableList</code> list.</p>\n\n<pre><code>class TempClass {\n    var myList: MutableList&lt;Int&gt; = mutableListOf&lt;Int&gt;()\n    fun doSomething() {\n        // myList = ArrayList&lt;Int&gt;() // initializer is redundant\n        myList.add(10)\n        myList.remove(10)\n    }\n}\n</code></pre>\n\n<p><code>MutableList&lt;Int&gt; = arrayListOf()</code> should also work.</p>\n"}, {"tags": [], "owner": {"reputation": 229, "user_id": 824348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36ee99262322403fef7f41b57682fd3?s=128&d=identicon&r=PG", "display_name": "bbsimon", "link": "https://stackoverflow.com/users/824348/bbsimon"}, "is_accepted": false, "score": 1, "last_activity_date": 1501249657, "creation_date": 1501249657, "answer_id": 45375174, "question_id": 37913252, "link": "https://stackoverflow.com/questions/37913252/kotlins-list-missing-add-remove-map-missing-put-etc/45375174#45375174", "title": "Kotlin&#39;s List missing &quot;add&quot;, &quot;remove&quot;, Map missing &quot;put&quot;, etc?", "body": "<p>In concept of immutable data, maybe this is a better way:</p>\n\n<pre><code>class TempClass {\n    val list: List&lt;Int&gt; by lazy {\n        listOf&lt;Int&gt;()\n    }\n    fun doSomething() {\n        list += 10\n        list -= 10\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "edited": false, "score": 0, "creation_date": 1543939216, "post_id": 47985699, "comment_id": 94094370, "body": "That means that <code>list2</code> is a mutable list, see <a href=\"https://stackoverflow.com/questions/43114367/difference-between-arrayliststring-and-mutablelistofstring-in-kotlin\" title=\"difference between arrayliststring and mutablelistofstring in kotlin\">stackoverflow.com/questions/43114367/&hellip;</a>."}], "tags": [], "owner": {"reputation": 41, "user_id": 1603132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f3915ec3af45bf5c8ccb6068ca7fc1e?s=128&d=identicon&r=PG", "display_name": "sgrover", "link": "https://stackoverflow.com/users/1603132/sgrover"}, "is_accepted": false, "score": 3, "last_activity_date": 1514342520, "creation_date": 1514342520, "answer_id": 47985699, "question_id": 37913252, "link": "https://stackoverflow.com/questions/37913252/kotlins-list-missing-add-remove-map-missing-put-etc/47985699#47985699", "title": "Kotlin&#39;s List missing &quot;add&quot;, &quot;remove&quot;, Map missing &quot;put&quot;, etc?", "body": "<p><a href=\"https://kotlinlang.org/docs/reference/collections.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/collections.html</a></p>\n\n<p>According to above link List&lt;E> is immutable in Kotlin. \nHowever this would work:</p>\n\n<pre><code>var list2 = ArrayList&lt;String&gt;()\nlist2.removeAt(1)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2449, "user_id": 2440844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/54xqn.png?s=128&g=1", "display_name": "Lukas M.", "link": "https://stackoverflow.com/users/2440844/lukas-m"}, "is_accepted": false, "score": 41, "last_activity_date": 1520715699, "creation_date": 1520715699, "answer_id": 49214008, "question_id": 37913252, "link": "https://stackoverflow.com/questions/37913252/kotlins-list-missing-add-remove-map-missing-put-etc/49214008#49214008", "title": "Kotlin&#39;s List missing &quot;add&quot;, &quot;remove&quot;, Map missing &quot;put&quot;, etc?", "body": "<h2>Defining a List collection in Kotlin in different ways:</h2>\n\n<ul>\n<li><p><strong>Immutable variable with immutable (read only) list:</strong></p>\n\n<pre><code>val users: List&lt;User&gt; = listOf( User(\"Tom\", 32), User(\"John\", 64) )\n</code></pre>\n\n<p><br/></p></li>\n<li><p><strong>Immutable variable with mutable list:</strong></p>\n\n<pre><code>val users: MutableList&lt;User&gt; = mutableListOf( User(\"Tom\", 32), User(\"John\", 64) )\n</code></pre>\n\n<p>or without initial value - empty list and without explicit variable type:</p>\n\n<pre><code>val users = mutableListOf&lt;User&gt;()\n//or\nval users = ArrayList&lt;User&gt;()\n</code></pre>\n\n<ul>\n<li>you can add items to list: \n\n<ul>\n<li><code>users.add(anohterUser)</code> or </li>\n<li><code>users += anotherUser</code> (under the hood it's <code>users.add(anohterUser)</code>)</li>\n</ul></li>\n</ul></li>\n</ul>\n\n<p><br/></p>\n\n<ul>\n<li><p><strong>Mutable variable with immutable list:</strong></p>\n\n<pre><code>var users: List&lt;User&gt; = listOf( User(\"Tom\", 32), User(\"John\", 64) )\n</code></pre>\n\n<p>or without initial value - empty list and without explicit variable type:</p>\n\n<pre><code>var users = emptyList&lt;User&gt;()\n</code></pre>\n\n<ul>\n<li>NOTE: you can add* items to list: \n\n<ul>\n<li><code>users += anotherUser</code> - *it creates new ArrayList and assigns it to <code>users</code></li>\n</ul></li>\n</ul></li>\n</ul>\n\n<p><br/></p>\n\n<ul>\n<li><p><strong>Mutable variable with mutable list:</strong></p>\n\n<pre><code>var users: MutableList&lt;User&gt; = mutableListOf( User(\"Tom\", 32), User(\"John\", 64) )\n</code></pre>\n\n<p>or without initial value - empty list and without explicit variable type:</p>\n\n<pre><code>var users = emptyList&lt;User&gt;().toMutableList()\n//or\nvar users = ArrayList&lt;User&gt;()\n</code></pre>\n\n<ul>\n<li>NOTE: you can add items to list: \n\n<ul>\n<li><code>users.add(anohterUser)</code> </li>\n<li>but not using <code>users += anotherUser</code> \n\n<blockquote>\n  <p>Error: Kotlin: Assignment operators ambiguity: <br/>\n  public operator fun  Collection.plus(element: String): List defined in kotlin.collections <br/>\n  @InlineOnly public inline operator fun  MutableCollection.plusAssign(element: String): Unit defined in kotlin.collections</p>\n</blockquote></li>\n</ul></li>\n</ul></li>\n</ul>\n\n<p><br/>\nsee also:\n<a href=\"https://kotlinlang.org/docs/reference/collections.html\" rel=\"noreferrer\">https://kotlinlang.org/docs/reference/collections.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 147, "user_id": 1640220, "user_type": "registered", "profile_image": "https://graph.facebook.com/1608578671/picture?type=large", "display_name": "dinesh salve", "link": "https://stackoverflow.com/users/1640220/dinesh-salve"}, "is_accepted": false, "score": 12, "last_activity_date": 1530543686, "last_edit_date": 1530543686, "creation_date": 1530543314, "answer_id": 51138920, "question_id": 37913252, "link": "https://stackoverflow.com/questions/37913252/kotlins-list-missing-add-remove-map-missing-put-etc/51138920#51138920", "title": "Kotlin&#39;s List missing &quot;add&quot;, &quot;remove&quot;, Map missing &quot;put&quot;, etc?", "body": "<p>Agree with all above answers of using MutableList but you can also add/remove from List and get a new list as below.</p>\n\n<pre><code>val newListWithElement = existingList + listOf(element)\nval newListMinusElement = existingList - listOf(element)\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>val newListWithElement = existingList.plus(element)\nval newListMinusElement = existingList.minus(element)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3807, "user_id": 7193506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/618c38082e6d3d590a30cc37e1b72391?s=128&d=identicon&r=PG&f=1", "display_name": "Sachin", "link": "https://stackoverflow.com/users/7193506/sachin"}, "is_accepted": false, "score": 2, "last_activity_date": 1539066395, "creation_date": 1539066395, "answer_id": 52714603, "question_id": 37913252, "link": "https://stackoverflow.com/questions/37913252/kotlins-list-missing-add-remove-map-missing-put-etc/52714603#52714603", "title": "Kotlin&#39;s List missing &quot;add&quot;, &quot;remove&quot;, Map missing &quot;put&quot;, etc?", "body": "<p>A <code>list</code> is <code>immutable</code> by <code>Default</code>, you can use <code>ArrayList</code> instead. like this :</p>\n\n<pre><code> val orders = arrayListOf&lt;String&gt;()\n</code></pre>\n\n<p>then you can <code>add/delete</code> items from this like below: </p>\n\n<pre><code>orders.add(\"Item 1\")\norders.add(\"Item 2\")\n</code></pre>\n\n<blockquote>\n  <p>by default <code>ArrayList</code> is <code>mutable</code> so you can perform the operations on it.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 25953, "user_id": 6599590, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/qLSDJ.jpg?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/6599590/andy"}, "is_accepted": false, "score": 7, "last_activity_date": 1607168700, "last_edit_date": 1607168700, "creation_date": 1547495086, "answer_id": 54188150, "question_id": 37913252, "link": "https://stackoverflow.com/questions/37913252/kotlins-list-missing-add-remove-map-missing-put-etc/54188150#54188150", "title": "Kotlin&#39;s List missing &quot;add&quot;, &quot;remove&quot;, Map missing &quot;put&quot;, etc?", "body": "<h1>In Kotlin you must use <code>MutableList</code> or <code>ArrayList</code>.</h1>\n<blockquote>\n<p>Let's see how the methods of <strong><code>MutableList</code></strong> work:</p>\n</blockquote>\n<pre><code>var listNumbers: MutableList&lt;Int&gt; = mutableListOf(10, 15, 20)\n// Result: 10, 15, 20\n\nlistNumbers.add(1000)\n// Result: 10, 15, 20, 1000\n\nlistNumbers.add(1, 250)\n// Result: 10, 250, 15, 20, 1000\n\nlistNumbers.removeAt(0)\n// Result: 250, 15, 20, 1000\n\nlistNumbers.remove(20)\n// Result: 250, 15, 1000\n\nfor (i in listNumbers) { \n    println(i) \n}\n</code></pre>\n<blockquote>\n<p>Let's see how the methods of <strong><code>ArrayList</code></strong> work:</p>\n</blockquote>\n<pre><code>var arrayNumbers: ArrayList&lt;Int&gt; = arrayListOf(1, 2, 3, 4, 5)\n// Result: 1, 2, 3, 4, 5\n\narrayNumbers.add(20)\n// Result: 1, 2, 3, 4, 5, 20\n\narrayNumbers.remove(1)\n// Result: 2, 3, 4, 5, 20\n\narrayNumbers.clear()\n// Result: Empty\n\nfor (j in arrayNumbers) { \n    println(j) \n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1743, "user_id": 1423608, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/sOkIn.jpg?s=128&g=1", "display_name": "BENN1TH", "link": "https://stackoverflow.com/users/1423608/benn1th"}, "edited": false, "score": 0, "creation_date": 1565403015, "post_id": 55708880, "comment_id": 101354796, "body": "thanks and worked well with business logic within the apply method, even used anotherList.ForEach {add(foo)} inside the .appy{}"}], "tags": [], "owner": {"reputation": 12732, "user_id": 430128, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c2aa2c9f527afea12a7fef458588b2a1?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/430128/raman"}, "is_accepted": false, "score": 4, "last_activity_date": 1615148704, "last_edit_date": 1615148704, "creation_date": 1555419898, "answer_id": 55708880, "question_id": 37913252, "link": "https://stackoverflow.com/questions/37913252/kotlins-list-missing-add-remove-map-missing-put-etc/55708880#55708880", "title": "Kotlin&#39;s List missing &quot;add&quot;, &quot;remove&quot;, Map missing &quot;put&quot;, etc?", "body": "<p><strong>UPDATE</strong>: As of Kotlin 1.3.70, the exact <code>buildList</code> function below is <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/build-list.html\" rel=\"nofollow noreferrer\">available</a> in the standard library as an experimental function, along with its analogues <code>buildSet</code> and <code>buildMap</code>. See <a href=\"https://blog.jetbrains.com/kotlin/2020/03/kotlin-1-3-70-released/\" rel=\"nofollow noreferrer\">https://blog.jetbrains.com/kotlin/2020/03/kotlin-1-3-70-released/</a>.</p>\n<h2>Confining Mutability to Builders</h2>\n<p>The top answers here correctly speak to the difference in Kotlin between read-only <code>List</code> (NOTE: <a href=\"https://stackoverflow.com/questions/33727657/kotlin-and-immutable-collections\">it's read-only, not &quot;immutable&quot;</a>), and <code>MutableList</code>.</p>\n<p>In general, one should strive to use read-only lists, however, mutability is still often useful at <em>construction</em> time, especially when dealing with third-party libraries with non-functional interfaces. For cases in which alternate construction techniques are not available, such as using <code>listOf</code> directly, or applying a functional construct like <code>fold</code> or <code>reduce</code>, a simple &quot;builder function&quot; construct like the following nicely produces a read-only list from a temporary mutable one:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val readonlyList = mutableListOf&lt;...&gt;().apply {\n  // manipulate your list here using whatever logic you need\n  // the `apply` function sets `this` to the `MutableList`\n  add(foo1)\n  addAll(foos)\n  // etc.\n}.toList()\n</code></pre>\n<p>and this can be nicely encapsulated into a re-usable inline utility function:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>inline fun &lt;T&gt; buildList(block: MutableList&lt;T&gt;.() -&gt; Unit) = \n  mutableListOf&lt;T&gt;().apply(block).toList()\n</code></pre>\n<p>which can be called like this:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val readonlyList = buildList&lt;String&gt; {\n  add(&quot;foo&quot;)\n  add(&quot;bar&quot;)\n}\n</code></pre>\n<p>Now, all of the mutability is isolated to one block scope used for construction of the read-only list, and the rest of your code uses the read-only list that is output from the builder.</p>\n"}, {"tags": [], "owner": {"reputation": 987, "user_id": 5341328, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2e205f91019d5b223172390424ac1782?s=128&d=identicon&r=PG&f=1", "display_name": "Dalvinder Singh", "link": "https://stackoverflow.com/users/5341328/dalvinder-singh"}, "is_accepted": false, "score": 5, "last_activity_date": 1562603823, "last_edit_date": 1562603823, "creation_date": 1562580279, "answer_id": 56932603, "question_id": 37913252, "link": "https://stackoverflow.com/questions/37913252/kotlins-list-missing-add-remove-map-missing-put-etc/56932603#56932603", "title": "Kotlin&#39;s List missing &quot;add&quot;, &quot;remove&quot;, Map missing &quot;put&quot;, etc?", "body": "<p>You can do with create new one like this.</p>\n\n<pre><code>var list1 = ArrayList&lt;Int&gt;()\nvar list2  = list1.toMutableList()\nlist2.add(item)\n</code></pre>\n\n<p>Now you can use list2, Thank you.</p>\n"}], "owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137985, "favorite_count": 20, "accepted_answer_id": 37913264, "answer_count": 10, "score": 219, "last_activity_date": 1615148704, "creation_date": 1466382648, "last_edit_date": 1568583852, "question_id": 37913252, "link": "https://stackoverflow.com/questions/37913252/kotlins-list-missing-add-remove-map-missing-put-etc", "title": "Kotlin&#39;s List missing &quot;add&quot;, &quot;remove&quot;, Map missing &quot;put&quot;, etc?", "body": "<p>In Java we could do the following</p>\n\n<pre><code>public class TempClass {\n    List&lt;Integer&gt; myList = null;\n    void doSomething() {\n        myList = new ArrayList&lt;&gt;();\n        myList.add(10);\n        myList.remove(10);\n    }\n}\n</code></pre>\n\n<p>But if we rewrite it to Kotlin directly as below</p>\n\n<pre><code>class TempClass {\n    var myList: List&lt;Int&gt;? = null\n    fun doSomething() {\n        myList = ArrayList&lt;Int&gt;()\n        myList!!.add(10)\n        myList!!.remove(10)\n    }\n}\n</code></pre>\n\n<p>I got the error of not finding <code>add</code> and <code>remove</code> function from my List</p>\n\n<p>I work around casting it to ArrayList, but that is odd needing to cast it, while in Java casting is not required. And that defeats the purpose of having the abstract class List</p>\n\n<pre><code>class TempClass {\n    var myList: List&lt;Int&gt;? = null\n    fun doSomething() {\n        myList = ArrayList&lt;Int&gt;()\n        (myList!! as ArrayList).add(10)\n        (myList!! as ArrayList).remove(10)\n    }\n}\n</code></pre>\n\n<p>Is there a way for me to use List but not needing to cast it, like what could be done in Java?</p>\n"}, {"tags": ["kotlin", "getter-setter"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6685522"}, "edited": false, "score": 21, "creation_date": 1495658027, "post_id": 37906803, "comment_id": 75351999, "body": "<code>In your case the private access modifier is redundant</code> How? Kotlin doc&#39;s say default modifier is public. <a href=\"https://kotlinlang.org/docs/reference/visibility-modifiers.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/visibility-modifiers.html</a>"}, {"owner": {"reputation": 4021, "user_id": 3830108, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/elcXQ.jpg?s=128&g=1", "display_name": "Cortwave", "link": "https://stackoverflow.com/users/3830108/cortwave"}, "edited": false, "score": 0, "creation_date": 1495663332, "post_id": 37906803, "comment_id": 75354270, "body": "@Nothing yes it seems like public field, but under hood you call getter method"}, {"owner": {"reputation": 2207, "user_id": 3913366, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0b23ebf0edc6ff980abd83539b6a2034?s=128&d=identicon&r=PG", "display_name": "Shubham A.", "link": "https://stackoverflow.com/users/3913366/shubham-a"}, "edited": false, "score": 0, "creation_date": 1506777587, "post_id": 37906803, "comment_id": 79960418, "body": "The <code>val isEmpty: Boolean</code> will not compile as isEmpty is not yet initialized, right? Just starting to learn Kotlin. Also, what is happening with <code>get() = field</code>?"}, {"owner": {"reputation": 3461, "user_id": 167304, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/6fuIk.jpg?s=128&g=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/167304/jason"}, "edited": false, "score": 0, "creation_date": 1596036118, "post_id": 37906803, "comment_id": 111682396, "body": "great explanation, imho the Kotlin docs are hard to understand unless you&#39;re already familiar with the language..."}, {"owner": {"reputation": 242, "user_id": 5561058, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-g91VCEoW0U4/AAAAAAAAAAI/AAAAAAAAPqM/If7t8YvfpRY/photo.jpg?sz=128", "display_name": "Yash Jain", "link": "https://stackoverflow.com/users/5561058/yash-jain"}, "edited": false, "score": 0, "creation_date": 1598555168, "post_id": 37906803, "comment_id": 112505241, "body": "Why doesn&#39;t Kotlin make use of private modifiers more often. Seems to be like all libraries&#39; variables are public."}, {"owner": {"reputation": 2478, "user_id": 24177, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/122602908/picture?type=large", "display_name": "Marchy", "link": "https://stackoverflow.com/users/24177/marchy"}, "edited": false, "score": 0, "creation_date": 1601321684, "post_id": 37906803, "comment_id": 113365814, "body": "What about if you want to use an observable with a private setter? ie: so you can perform some reactive logic when the value is set?"}], "tags": [], "owner": {"reputation": 4021, "user_id": 3830108, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/elcXQ.jpg?s=128&g=1", "display_name": "Cortwave", "link": "https://stackoverflow.com/users/3830108/cortwave"}, "is_accepted": true, "score": 160, "last_activity_date": 1466730434, "last_edit_date": 1466730434, "creation_date": 1466336249, "answer_id": 37906803, "question_id": 37906607, "link": "https://stackoverflow.com/questions/37906607/getters-and-setters-in-kotlin/37906803#37906803", "title": "Getters and Setters in Kotlin", "body": "<p>Getters and setters are auto-generated in Kotlin. If you write:</p>\n\n<pre><code>val isEmpty: Boolean\n</code></pre>\n\n<p>It is equal to the following Java code:</p>\n\n<pre><code>private final Boolean isEmpty;\n\npublic Boolean isEmpty() {\n    return isEmpty;\n}\n</code></pre>\n\n<p>In your case the private access modifier is redundant - isEmpty is private by default and can be accessed only by a getter. When you try to get your object's isEmpty property you call the get method in real. For more understanding of getters/setters in Kotlin: the two code samples below are equal:</p>\n\n<pre><code>var someProperty: String = \"defaultValue\"\n</code></pre>\n\n<p>and </p>\n\n<pre><code>var someProperty: String = \"defaultValue\"\n    get() = field\n    set(value) { field = value }\n</code></pre>\n\n<p>Also I want to point out that <code>this</code> in a getter is not your property - it's the class instance. If you want to get access to the field's value in a getter or setter you can use the reserved word <code>field</code> for it:</p>\n\n<pre><code>val isEmpty: Boolean\n  get() = field\n</code></pre>\n\n<p>If you only want to have a get method in public access - you can write this code:</p>\n\n<pre><code>var isEmpty: Boolean\n    private set \n</code></pre>\n\n<p>due to the private modifier near the set accessor you can set this value only in methods inside your object.</p>\n"}, {"comments": [{"owner": {"reputation": 2563, "user_id": 958580, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CVawG.png?s=128&g=1", "display_name": "Carel", "link": "https://stackoverflow.com/users/958580/carel"}, "edited": false, "score": 0, "creation_date": 1549026554, "post_id": 37906808, "comment_id": 95767287, "body": "Can one set and get different types ? Setting <code>x</code>  equal to some <code>&quot;Some String&quot;</code> and returning say the length, <code>11</code>, of the string ?"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 2563, "user_id": 958580, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CVawG.png?s=128&g=1", "display_name": "Carel", "link": "https://stackoverflow.com/users/958580/carel"}, "edited": false, "score": 0, "creation_date": 1549030588, "post_id": 37906808, "comment_id": 95769474, "body": "@Carel, no, as of now, this use case is not supported: the accessors of a property should operate with exactly the type of the property. Using a different type is covered by using a <a href=\"https://kotlinlang.org/docs/reference/properties.html#backing-properties\" rel=\"nofollow noreferrer\">separate backing property</a>"}, {"owner": {"reputation": 2563, "user_id": 958580, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CVawG.png?s=128&g=1", "display_name": "Carel", "link": "https://stackoverflow.com/users/958580/carel"}, "edited": false, "score": 0, "creation_date": 1549035753, "post_id": 37906808, "comment_id": 95772354, "body": "Darn, Kotlin is so very close to Python that you think it&#39;ll just work when you get reminded it&#39;s typed... and cut your own throat."}, {"owner": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "edited": false, "score": 0, "creation_date": 1553671271, "post_id": 37906808, "comment_id": 97465786, "body": "Thanks for access modifiers. I removed <code>private</code> from a variable, and it became accessible from another class with getter."}, {"owner": {"reputation": 1739, "user_id": 109795, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f8473a0c960e1cf7fbd072e0cfb80dd2?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/109795/tom"}, "edited": false, "score": 0, "creation_date": 1570779558, "post_id": 37906808, "comment_id": 103029248, "body": "I get a &quot;Private setters are not allowed for open properties&quot; when using the &quot;var x//private set&quot; combination. Resolved by declaring as &quot;final var x&quot;"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": false, "score": 31, "last_activity_date": 1466358732, "last_edit_date": 1466358732, "creation_date": 1466336267, "answer_id": 37906808, "question_id": 37906607, "link": "https://stackoverflow.com/questions/37906607/getters-and-setters-in-kotlin/37906808#37906808", "title": "Getters and Setters in Kotlin", "body": "<p>The rules about property accessors <a href=\"https://kotlinlang.org/docs/reference/visibility-modifiers.html#visibility-modifiers\" rel=\"noreferrer\">visibility modifiers</a> are the following:</p>\n\n<ul>\n<li><p>Getter visibility of <code>var</code> and <code>val</code> property should be exactly <strong>the same</strong> to the visibility of the property, thus you can only explicitly duplicate the property modifier, but it is redundant:</p>\n\n<pre><code>protected val x: Int\n    protected get() = 0 // No need in `protected` here.\n</code></pre></li>\n<li><p>Setter visibility of <code>var</code> property should be  <strong>the same or less permissive</strong> than the property visibility:</p>\n\n<pre><code>protected var x: Int\n    get() = 0\n    private set(x: Int) { } // Only `private` and `protected` are allowed.\n</code></pre></li>\n</ul>\n\n<p>In Kotlin, properties are always accessed through getter and setter, thus there's no need in making a property <code>private</code> with <code>public</code> accessors like in Java -- <a href=\"https://kotlinlang.org/docs/reference/properties.html#backing-fields\" rel=\"noreferrer\">its backing field (if present)</a> is already private. So, visibility modifiers on property accessors are only used to make setter visibility less permissive:</p>\n\n<ul>\n<li><p>For a property with backing field and default accessors:</p>\n\n<pre><code>var x = 0 // `public` by default\n    private set\n</code></pre></li>\n<li><p>For a property without backing field:</p>\n\n<pre><code>var x: Int // `public` by default\n    get() = 0\n    protected set(value: Int) { }\n</code></pre></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 476, "user_id": 4820070, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/22a3216370fb32835eb4434d65886943?s=128&d=identicon&r=PG&f=1", "display_name": "Lalit Behera", "link": "https://stackoverflow.com/users/4820070/lalit-behera"}, "is_accepted": false, "score": 8, "last_activity_date": 1498469853, "creation_date": 1498469853, "answer_id": 44756777, "question_id": 37906607, "link": "https://stackoverflow.com/questions/37906607/getters-and-setters-in-kotlin/44756777#44756777", "title": "Getters and Setters in Kotlin", "body": "<p>Getter in kotlin is by default public, but you can set the setter to private and set the value by using one method inside a class. Like this. </p>\n\n<pre><code>/**\n* Created by leo on 17/06/17.*/\n\npackage foo\nclass Person() {\nvar name: String = \"defaultValue\"\n               private set\n\nfun foo(bar: String) {\n    name = bar // name can be set here\n       }\n}\n\nfun main(args: Array&lt;String&gt;) {\n  var p = Person()\n  println(\"Name of the person is ${p.name}\")\n  p.foo(\"Jhon Doe\")\n  println(\"Name of the person is ${p.name}\")\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 143, "user_id": 6222814, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mUasP.jpg?s=128&g=1", "display_name": "Pluto65", "link": "https://stackoverflow.com/users/6222814/pluto65"}, "is_accepted": false, "score": 5, "last_activity_date": 1500896208, "creation_date": 1500896208, "answer_id": 45279617, "question_id": 37906607, "link": "https://stackoverflow.com/questions/37906607/getters-and-setters-in-kotlin/45279617#45279617", "title": "Getters and Setters in Kotlin", "body": "<p>You can see this tutorial for more info:</p>\n\n<p><a href=\"https://codete.com/blog/yet-another-kotlin-tutorial-android-developers-part-1/\" rel=\"noreferrer\" title=\"Yet Another Kotlin Tutorial for Android Developers\">Yet Another Kotlin Tutorial for Android Developers</a></p>\n\n<blockquote>\n  <p>Properties</p>\n  \n  <p>In Kotlin world, classes cannot have fields, just properties. var\n  keyword tells us the property is mutable, in contrast to val. Let\u2019s\n  see an example:</p>\n\n<pre><code>class Contact(var number: String) {\n\n   var firstName: String? = null\n   var lastName: String? = null\n   private val hasPrefix : Boolean\n       get() = number.startsWith(\"+\")\n\n}\n</code></pre>\n  \n  <p>There is not much code, but lots of things are happening behind the\n  scenes. <strong>We will go through it step by step. First of all, we created a\n  public final class Contact.</strong></p>\n  \n  <p>This is the primary rule we have to face: if not specified otherwise,\n  classes are public and final by default (by the way, the same is for\n  class methods). If you want to inherit from class, mark it with open\n  keyword.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 376, "user_id": 2566313, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/me69D.png?s=128&g=1", "display_name": "marcode_ely", "link": "https://stackoverflow.com/users/2566313/marcode-ely"}, "edited": false, "score": 0, "creation_date": 1552513839, "post_id": 51349502, "comment_id": 97043855, "body": "Thank you, it really help me!"}], "tags": [], "owner": {"reputation": 42863, "user_id": 5381331, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/be17225d9277060275486934d07d7a72?s=128&d=identicon&r=PG&f=1", "display_name": "Phan Van Linh", "link": "https://stackoverflow.com/users/5381331/phan-van-linh"}, "is_accepted": false, "score": 16, "last_activity_date": 1531666215, "creation_date": 1531666215, "answer_id": 51349502, "question_id": 37906607, "link": "https://stackoverflow.com/questions/37906607/getters-and-setters-in-kotlin/51349502#51349502", "title": "Getters and Setters in Kotlin", "body": "<p>1) Example default <code>setter</code> and <code>getter</code> for <strong>property</strong> <code>firstName</code> in Kotlin</p>\n\n<pre><code>class Person {\n    var firstName: String = \"\"\n            get() = field       // field here ~ `this.firstName` in Java or normally `_firstName` is C#\n            set(value) {\n                field = value\n            }\n\n}\n</code></pre>\n\n<p>Using</p>\n\n<pre><code>val p = Person()\np.firstName = \"A\"  // access setter\nprintln(p.firstName) // access getter (output:A)\n</code></pre>\n\n<p><strong>IF</strong> your <code>setter</code> or <code>getter</code> is <strong>exactly same</strong> above, you can remove it because it is <strong>unnecessary</strong></p>\n\n<p>2) Example custom setter and getter. </p>\n\n<pre><code>const val PREFIX = \"[ABC]\"\n\nclass Person {\n\n    // set: if value set to first name have length &lt; 1 =&gt; throw error else add prefix \"ABC\" to the name\n    // get: if name is not empty -&gt; trim for remove whitespace and add '.' else return default name\n    var lastName: String = \"\"\n        get() {\n            if (!field.isEmpty()) {\n                return field.trim() + \".\"\n            }\n            return field\n        }\n        set(value) {\n            if (value.length &gt; 1) {\n                field = PREFIX + value\n            } else {\n                throw IllegalArgumentException(\"Last name too short\")\n            }\n        }\n}\n</code></pre>\n\n<p>Using</p>\n\n<pre><code>val p = Person()\np.lastName = \"DE         \" // input with many white space\nprintln(p.lastName)  // output:[ABC]DE.\np.lastName = \"D\" // IllegalArgumentException since name length &lt; 1\n</code></pre>\n\n<p><strong>More</strong><br>\nI start learn Kotlin from Java so I am confusing about <code>field</code> and <code>property</code> because in Java there is no <code>property</code>.<br>\nAfter some search, I see <code>field</code> and <code>property</code> in Kotlin look like C#  (<a href=\"https://stackoverflow.com/questions/295104/what-is-the-difference-between-a-field-and-a-property\">What is the difference between a field and a property?</a>)</p>\n\n<p>Here is some relevant post which talk about <code>field</code> and <code>property</code> in Java and Kotlin.<br>\n<a href=\"https://stackoverflow.com/questions/2963243/does-java-have-something-similar-to-c-sharp-properties\">does java have something similar to C# properties?</a><br>\n<a href=\"https://blog.kotlin-academy.com/kotlin-programmer-dictionary-field-vs-property-30ab7ef70531\" rel=\"noreferrer\">https://blog.kotlin-academy.com/kotlin-programmer-dictionary-field-vs-property-30ab7ef70531</a></p>\n\n<p>Correct me if I am wrong. Hope it help</p>\n"}, {"tags": [], "owner": {"reputation": 187, "user_id": 6471998, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eq5kh.jpg?s=128&g=1", "display_name": "Ricky Padilla", "link": "https://stackoverflow.com/users/6471998/ricky-padilla"}, "is_accepted": false, "score": 0, "last_activity_date": 1600096486, "creation_date": 1600096486, "answer_id": 63887151, "question_id": 37906607, "link": "https://stackoverflow.com/questions/37906607/getters-and-setters-in-kotlin/63887151#63887151", "title": "Getters and Setters in Kotlin", "body": "<p>Here's a practical, real world example of a Kotlin getter and setter (See more details <a href=\"https://medium.com/swlh/kotlin-property-getters-and-setters-17ffb5a71b98\" rel=\"nofollow noreferrer\">here</a>):</p>\n<pre><code>// Custom Getter\nval friendlyDescription get(): String {\n    val isNeighborhood = district != null\n    var description = if (isNeighborhood) &quot;Neighborhood&quot; else &quot;City&quot;\n    description += &quot; in&quot;\n    if (isNeighborhood) {\n        description += &quot; $city,&quot;\n    }\n    province?.let {\n        if (it.isNotEmpty()) {\n            description += &quot; $it,&quot;\n        }\n    }\n    description += &quot; $country&quot;\n    return description\n}\n\nprint(myLocation.friendlyDescription) // &quot;Neighborhood in Denver, Colorado, United States&quot;\n\n\n// Custom Setter\nenum class SearchResultType {\n    HISTORY, SAVED, BASIC\n}\n\nprivate lateinit var resultTypeString: String\n\nvar resultType: SearchResultType\n    get() {\n        return enumValueOf(resultTypeString)\n    }\n    set(value) {\n        resultTypeString = value.toString()\n    }\n\nresult.resultType = SearchResultType.HISTORY\nprint(result.resultTypeString) // &quot;HISTORY&quot;\n\n</code></pre>\n"}], "owner": {"reputation": 3042, "user_id": 2787507, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/lv63g.jpg?s=128&g=1", "display_name": "nutella_eater", "link": "https://stackoverflow.com/users/2787507/nutella-eater"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89547, "favorite_count": 19, "accepted_answer_id": 37906803, "answer_count": 6, "score": 93, "last_activity_date": 1600096486, "creation_date": 1466334843, "last_edit_date": 1505487600, "question_id": 37906607, "link": "https://stackoverflow.com/questions/37906607/getters-and-setters-in-kotlin", "title": "Getters and Setters in Kotlin", "body": "<p>In Java, for example, I can write getters on my own (generated by IDE) or use Annotations like @Getter in lombok - which was pretty simple.</p>\n\n<p>Kotlin however has <a href=\"https://kotlinlang.org/docs/reference/properties.html\" rel=\"noreferrer\">getters and setters by default</a>.\nBut I can't understand how to use them.</p>\n\n<p>I want to make it, lets say - similar to Java:</p>\n\n<pre><code>private val isEmpty: String\n        get() = this.toString() //making this thing public rises an error: Getter visibility must be the same as property visibility.\n</code></pre>\n\n<p>So how do getters work? </p>\n"}, {"tags": ["java", "kotlin", "destructuring", "data-class"], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 2594647, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6fd0fd345af74e8308f9db5bc5cd617f?s=128&d=identicon&r=PG", "display_name": "AdiAtAnd", "link": "https://stackoverflow.com/users/2594647/adiatand"}, "edited": false, "score": 0, "creation_date": 1597556356, "post_id": 37906391, "comment_id": 112167827, "body": "Is the issue resolved? I think not..Scratch files also not supporting deconstructing values I guess... giving same error unresolved reference.. Working fine with online Kotlin compiler now but not with scratch files till today.."}], "tags": [], "owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "is_accepted": true, "score": 7, "last_activity_date": 1466333264, "creation_date": 1466333264, "answer_id": 37906391, "question_id": 37905894, "link": "https://stackoverflow.com/questions/37905894/kotlin-destructuring-variables-is-not-working-with-pair-triple-or-data-class/37906391#37906391", "title": "Kotlin destructuring variables is not working with Pair, Triple or data class", "body": "<p>This is a known limitation in the Kotlin REPL. Destructuring declarations work fine in the source code (.kt files).</p>\n\n<p>Here's the issue in the bug tracker: <a href=\"https://youtrack.jetbrains.com/issue/KT-5620\" rel=\"noreferrer\">https://youtrack.jetbrains.com/issue/KT-5620</a></p>\n"}], "owner": {"reputation": 1365, "user_id": 2397446, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a17ea754d407238ea83415d1b6145f79?s=128&d=identicon&r=PG", "display_name": "Piyush Chauhan", "link": "https://stackoverflow.com/users/2397446/piyush-chauhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 838, "favorite_count": 0, "accepted_answer_id": 37906391, "answer_count": 1, "score": 4, "last_activity_date": 1466333264, "creation_date": 1466329567, "question_id": 37905894, "link": "https://stackoverflow.com/questions/37905894/kotlin-destructuring-variables-is-not-working-with-pair-triple-or-data-class", "title": "Kotlin destructuring variables is not working with Pair, Triple or data class", "body": "<p>I've recently tried the following code in kotlinc, command line environment.</p>\n\n<pre><code>var greet = Pair(\"Hello\", \"World\")\nval (word1, word2) = greet\n</code></pre>\n\n<p>Outputting <code>word1</code> and <code>word2</code> in console outputs the below message</p>\n\n<pre><code>&gt;&gt;&gt; word1\nerror: unresolved reference: word1\nword1\n^\n</code></pre>\n\n<p>I'm not sure if de-structuring is being removed from the latest version of kotlin. Currently, using <code>1.0.2</code> version of <code>kotlinc</code> compiler on mac.</p>\n"}, {"tags": ["java", "string", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 239210, "user_id": 2711488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FhkI9.jpg?s=128&g=1", "display_name": "Holger", "link": "https://stackoverflow.com/users/2711488/holger"}, "edited": false, "score": 0, "creation_date": 1466431855, "post_id": 37889433, "comment_id": 63299821, "body": "Note that if you use a <code>Set</code> (as suggested), you don\u2019t need the double-lookup like <code>if(!found.contains(sub)) { found.add(sub); \u2026 }</code> as you can use <code>if(found.add(sub)) { \u2026 }</code>. Further, you don\u2019t need to insert a <code>toString()</code>, if you want to compare the contents. Just use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#contentEquals-java.lang.CharSequence-\" rel=\"nofollow noreferrer\"><code>sub.contentEquals(rev)</code></a>. Since you only want to print it, and only if the two objects are equal, you can just use <code>if(sub.contentEquals(StringBuffer(sub).reverse())) { println(sub); }</code>"}], "tags": [], "owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "is_accepted": true, "score": 5, "last_activity_date": 1466194362, "last_edit_date": 1466194362, "creation_date": 1466193306, "answer_id": 37889433, "question_id": 37889320, "link": "https://stackoverflow.com/questions/37889320/jvm-comparing-string-with-stringbuffer-reverse-always-fails/37889433#37889433", "title": "jvm comparing String with StringBuffer.reverse() always fails", "body": "<p><code>sub</code> is a String. <code>rev</code> is a StringBuffer. They can't be equal, since they don't even have the same type.</p>\n\n<p>Additional notes:</p>\n\n<ul>\n<li>don't use StringBuffer. Use StringBuilder. StringBuffer is needlessly synchronized, and should not be used anymore (just like Vector shouldn't be used and ArrayList should be instead).</li>\n<li><code>for (i in 0..input.length - 1)</code> can be written <code>for (i in 0 until input.length)</code> which is more elegant</li>\n<li><code>input.substring(i, i + j)</code> can't be right: at the end of the two loops, i would be length - 1, and j would be length - 1, and you would thus take a substring between length - 1 and 2 * length - 2.</li>\n<li>to store unique results, use a HashSet, not an ArrayList. Calling contains() on a HashSet is O(1), whereas it's O(n) on an ArrayList.</li>\n<li>in Kotlin, unlike in Java, you can use <code>a == b</code> to test if a is equal to b, even if a and b are references. </li>\n</ul>\n"}], "owner": {"reputation": 733, "user_id": 4727842, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0483ae091acc1d00135c0bc5a1df6e6d?s=128&d=identicon&r=PG", "display_name": "Grayden Hormes", "link": "https://stackoverflow.com/users/4727842/grayden-hormes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 37889433, "answer_count": 1, "score": 1, "last_activity_date": 1466431814, "creation_date": 1466192849, "last_edit_date": 1466431814, "question_id": 37889320, "link": "https://stackoverflow.com/questions/37889320/jvm-comparing-string-with-stringbuffer-reverse-always-fails", "title": "jvm comparing String with StringBuffer.reverse() always fails", "body": "<p>I had a problem where I was to find all he substrings of a string that are palindromes. Input would always be 1 word. The test input was aabaa. I decided to try be clever and make a string buffer of my substring then use the reverse method to compare with the original using String.equals. It didn't work.</p>\n\n<pre><code>import java.util.*\n\nfun main(args: Array&lt;String&gt;) {\n    val scan = Scanner(System.`in`)\n    val input = scan.next()\n\n    val found = ArrayList&lt;String&gt;()\n\n    for (i in 0..input.length - 1) {\n        for (j in 0..input.length - i) {\n            val sub = input.substring(i, i + j)\n\n            if (!found.contains(sub)) {\n                // println(sub)\n                found.add(sub)\n                val rev = StringBuffer(sub).reverse()\n\n                if (sub.equals(rev)) {\n                    println(rev)\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>When I uncomment the first print statement the output look like this using test input aabaa</p>\n\n<pre><code>a\naa\naab\naaba\naabaa\nab\naba\nabaa\nb\nba\nbaa\n</code></pre>\n\n<p>So I am getting the correct substrings, but the last if statement never resolves true and I don't know why this is.</p>\n"}, {"tags": ["floating-point", "nan", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 1221, "user_id": 1654255, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e031d46886850846ad20c7f03afb6db3?s=128&d=identicon&r=PG&f=1", "display_name": "AplusKminus", "link": "https://stackoverflow.com/users/1654255/apluskminus"}, "edited": false, "score": 0, "creation_date": 1466251325, "post_id": 37884396, "comment_id": 63246757, "body": "@nrohwer, thanks for your remark, updated the answer."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 12, "last_activity_date": 1466251296, "last_edit_date": 1466251296, "creation_date": 1466174487, "answer_id": 37884396, "question_id": 37884133, "link": "https://stackoverflow.com/questions/37884133/comparing-nan-in-kotlin/37884396#37884396", "title": "Comparing NaN in Kotlin", "body": "<p>That's because <strong>(2)</strong> and <strong>(3)</strong> are compiled to boxing a primitive and then <code>Double.equals</code> check: on JVM, primitive <code>double</code> can't be compared to a boxed one.</p>\n\n<p><a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#equals(java.lang.Object)\" rel=\"noreferrer\"><code>Double.equals</code></a>, in turn, checks equality by comparing <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#doubleToLongBits(double)\" rel=\"noreferrer\"><code>doubleToLongBits(...)</code></a> of the two <code>Double</code>s, and for the latter there's a guarantee that</p>\n\n<blockquote>\n  <p>If the argument is NaN, the result is <code>0x7ff8000000000000L</code>.</p>\n</blockquote>\n\n<p>So, the bits returned for two <code>NaN</code> are equal, and the rule <code>NaN != NaN</code> is ignored here. </p>\n\n<p>Also, as <strong>@miensol</strong> mentioned, there's another consequence of this equality check: <code>+0</code> and <code>-0</code> are equal according to <code>==</code> check and not to <code>equals</code> check.</p>\n\n<p>Equivalent code in Java would be:</p>\n\n<pre><code>double nan = Double.NaN;\nSystem.out.println(\"1: \" + (nan == nan)) //false \nSystem.out.println(\"2: \" + ((Double) nan).equals(((Number) nan)))\nSystem.out.println(\"3: \" + ((Number) nan).equals(nan));\n</code></pre>\n\n<p>The last two lines call <code>Double.equals</code>, comparing <code>doubleToLongBits(...)</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": false, "score": 8, "last_activity_date": 1466174657, "last_edit_date": 1495540111, "creation_date": 1466174657, "answer_id": 37884452, "question_id": 37884133, "link": "https://stackoverflow.com/questions/37884133/comparing-nan-in-kotlin/37884452#37884452", "title": "Comparing NaN in Kotlin", "body": "<p>The first comparison is equivalent to Java's:</p>\n\n<pre><code>double left = Double.NaN;\ndouble right = Double.NaN;\nboolean result = left == right;\n</code></pre>\n\n<p>And as you can <a href=\"https://stackoverflow.com/questions/8819738/why-does-double-nan-double-nan-return-false\">read in this answer</a> this is standarized and documented behavior.</p>\n\n<p>The second &amp; third comparison are equivalent to:</p>\n\n<pre><code>Double left = Double.valueOf(Double.NaN);\nNumber right = Double.valueOf(Double.NaN);\nboolean result = left.equals(right);\n</code></pre>\n\n<p>Which uses <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#equals(java.lang.Object)\" rel=\"nofollow noreferrer\">Double.equals</a>:</p>\n\n<blockquote>\n  <p>Note that in most cases, for two instances of <code>class Double</code>, <code>d1</code> and <code>d2</code>,\n  the value of <code>d1.equals(d2)</code> is true if and only if <code>d1.doubleValue() ==\n  d2.doubleValue()</code> also has the value true. However, there are two\n  exceptions: </p>\n  \n  <ul>\n  <li><p>If <code>d1</code> and <code>d2</code> both represent <code>Double.NaN</code>, then the equals\n  method returns <code>true</code>, even though <code>Double.NaN==Double.NaN</code> has the value\n  <code>false</code>. </p></li>\n  <li><p>If <code>d1</code> represents <code>+0.0</code> while <code>d2</code> represents <code>-0.0</code>, or vice versa,\n  the equal test has the value <code>false</code>, even though <code>+0.0==-0.0</code> has the\n  value <code>true</code>.</p></li>\n  </ul>\n</blockquote>\n"}], "owner": {"reputation": 1221, "user_id": 1654255, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e031d46886850846ad20c7f03afb6db3?s=128&d=identicon&r=PG&f=1", "display_name": "AplusKminus", "link": "https://stackoverflow.com/users/1654255/apluskminus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3384, "favorite_count": 1, "accepted_answer_id": 37884396, "answer_count": 2, "score": 14, "last_activity_date": 1467729470, "creation_date": 1466173700, "last_edit_date": 1495542184, "question_id": 37884133, "link": "https://stackoverflow.com/questions/37884133/comparing-nan-in-kotlin", "title": "Comparing NaN in Kotlin", "body": "<p>So I recently started loving the language kotlin. Today, while comparing doubles, I came across the inevitable <code>NaN</code>.</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    val nan = Double.NaN\n    println(\"1: \" + (nan == nan))\n    println(\"2: \" + (nan == (nan as Number)))\n    println(\"3: \" + ((nan as Number) == nan))\n}\n</code></pre>\n\n<p><em>N.B: (</em><code>Double</code> <em>is a subtype of</em> <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-number/\" rel=\"noreferrer\"><code>Number</code></a><em>)</em></p>\n\n<p>Running the above code yields:</p>\n\n<pre><code>1: false\n2: true\n3: true\n</code></pre>\n\n<p>I understand that <a href=\"https://stackoverflow.com/questions/8819738/why-does-double-nan-double-nan-return-false/8820592#8820592\">comparing</a> with <code>NaN</code> in Java returns <code>false</code>, so I would expect <code>false</code> for all expressions.</p>\n\n<p>How can this behavior be explained?\nWhat is the rationale behind it?</p>\n"}, {"tags": ["android", "json", "kotlin", "retrofit2", "simple-framework"], "comments": [{"owner": {"reputation": 121, "user_id": 6261136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab16a1fdc4018f24dce692ced6b5f098?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Vasilyev", "link": "https://stackoverflow.com/users/6261136/andrew-vasilyev"}, "edited": false, "score": 0, "creation_date": 1466166617, "post_id": 37881421, "comment_id": 63218173, "body": "and one more thing: i send it, and loggingInterceptor writing this to log: --&gt; POST https://&lt;myUrl i hide it&gt; http/1.1 D/OkHttp: Content-Type: application/xml D/OkHttp: Content-Length: 2801 D/OkHttp: Accept: application/json  and it prints my request data like json, not like xml with tags ....."}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1466168609, "post_id": 37881421, "comment_id": 63219445, "body": "&quot;urf-8&quot; is not a valid charset. Try replacing with &quot;utf-8&quot;."}, {"owner": {"reputation": 4603, "user_id": 2125612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/imL5S.jpg?s=128&g=1", "display_name": "Jickson", "link": "https://stackoverflow.com/users/2125612/jickson"}, "edited": false, "score": 0, "creation_date": 1466169278, "post_id": 37881421, "comment_id": 63219855, "body": "<a href=\"https://github.com/square/retrofit/blob/master/samples/src/main/java/com/example/retrofit/JsonAndXmlConverters.java\" rel=\"nofollow noreferrer\">github.com/square/retrofit/blob/master/samples/src/main/java&zwnj;&#8203;/&hellip;</a> This may help you."}, {"owner": {"reputation": 121, "user_id": 6261136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab16a1fdc4018f24dce692ced6b5f098?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Vasilyev", "link": "https://stackoverflow.com/users/6261136/andrew-vasilyev"}, "edited": false, "score": 0, "creation_date": 1466186219, "post_id": 37881421, "comment_id": 63229965, "body": "yole, I just wrote here with mistake. charset is not the problem ("}], "owner": {"reputation": 121, "user_id": 6261136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab16a1fdc4018f24dce692ced6b5f098?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Vasilyev", "link": "https://stackoverflow.com/users/6261136/andrew-vasilyev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2039, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1466175154, "creation_date": 1466165950, "last_edit_date": 1466175154, "question_id": 37881421, "link": "https://stackoverflow.com/questions/37881421/retrofit-2-post-xml-and-get-json-answer-from-api-with-kotlin", "title": "Retrofit 2 POST XML and get JSON answer from API. with Kotlin", "body": "<p>I need to send XML to server and I want server sends me back JSON.\nI'am using Retrofit 2 + Kotlin</p>\n\n<ol>\n<li><p>Retrofit2 method(in methods interface):</p>\n\n<pre><code>@Headers(\"Content-Type: application/xml; charset=urf-8\",\n        \"Accept: application/json\")\n@POST(Connectors.SECRET_LINK)\nfun sendCustomXml(@Body data: XmlHolder): Observable&lt;String&gt; \n</code></pre></li>\n<li><p>Retrofit2 service:</p>\n\n<pre><code>private fun &lt;S&gt; createService(serviceClass: Class&lt;S&gt;): S {\n    val retrofit = \n    return \n}\n\ninit {\n    initLoggingInterceptor()\n\n    val builder = Retrofit.Builder()\n            .baseUrl(BuildConfig.API_URL)\n            .addConverterFactory(GsonConverterFactory.create())\n            .addConverterFactory(SimpleXmlConverterFactory.create()) //here it is I thought\n            .addCallAdapterFactory(RxJavaCallAdapterFactory.create())\n\n    mService = builder.client(getHttpClient()).build().create(ApiMethods::class.java))\n}\n</code></pre></li>\n<li><p>XML object I need to send like XML(tags and so on):</p>\n\n<pre><code>@Root(name = \"root_element\")\nclass XmlHolder {\n\n    @Attribute(name = \"xmlns\")\n    private val mXmlns = \"http://www.anr.ru/types\"\n\n    @Attribute(name = \"type\")\n    private val mType = \"request\"\n\n    @Element(name = \"data\")\n    private val mData = Data()\n\n    inner class Data {\n\n        @Attribute(name = \"code\")\n        private val mCode = \"P0116\"\n\n        @Element(name = \"list_model\")\n        private val mListModel = \"123\"\n    }\n}\n</code></pre></li>\n</ol>\n\n<p>for now I got 400 error from server. shit.</p>\n\n<p>Jake Wharton, can you suggest any solutions to me? :)\nAny help, any examples, please, people...</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 12577, "user_id": 2102794, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/BrKf5.jpg?s=128&g=1", "display_name": "Sai", "link": "https://stackoverflow.com/users/2102794/sai"}, "edited": false, "score": 1, "creation_date": 1466146003, "post_id": 37874665, "comment_id": 63205290, "body": "Thanks @miensol, Is there any way this can be done using copy fun.  eg. <a href=\"https://kotlinlang.org/docs/reference/data-classes.html#copying\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/data-classes.html#copying</a>"}, {"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "reply_to_user": {"reputation": 12577, "user_id": 2102794, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/BrKf5.jpg?s=128&g=1", "display_name": "Sai", "link": "https://stackoverflow.com/users/2102794/sai"}, "edited": false, "score": 0, "creation_date": 1466146735, "post_id": 37874665, "comment_id": 63205679, "body": "@SaiKiran to use <code>copy</code> you need a data class instance. To create it you need to invoke a constructor - and here was the issue."}, {"owner": {"reputation": 3254, "user_id": 843726, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/95b742d1293465a9958a06a7b27273ea?s=128&d=identicon&r=PG", "display_name": "Gonzalo", "link": "https://stackoverflow.com/users/843726/gonzalo"}, "edited": false, "score": 0, "creation_date": 1496091483, "post_id": 37874665, "comment_id": 75508852, "body": "I&#39;m using Kotlin 1.1.2 for Android Studio 2.3 and emptyList is not available :/"}, {"owner": {"reputation": 3254, "user_id": 843726, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/95b742d1293465a9958a06a7b27273ea?s=128&d=identicon&r=PG", "display_name": "Gonzalo", "link": "https://stackoverflow.com/users/843726/gonzalo"}, "edited": false, "score": 0, "creation_date": 1496181779, "post_id": 37874665, "comment_id": 75553149, "body": "Nevermind. I didn&#39;t add kotlin to my build.gradle config file."}, {"owner": {"reputation": 1447, "user_id": 4803607, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-QHeP6Tc20AM/AAAAAAAAAAI/AAAAAAAAAEc/pumr0Mpz04U/photo.jpg?sz=128", "display_name": "Muhammad chhota", "link": "https://stackoverflow.com/users/4803607/muhammad-chhota"}, "edited": false, "score": 0, "creation_date": 1507183024, "post_id": 37874665, "comment_id": 80110397, "body": "Using emptyList will allocate memory? . I things it will be increase the memory usage"}, {"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "reply_to_user": {"reputation": 1447, "user_id": 4803607, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-QHeP6Tc20AM/AAAAAAAAAAI/AAAAAAAAAEc/pumr0Mpz04U/photo.jpg?sz=128", "display_name": "Muhammad chhota", "link": "https://stackoverflow.com/users/4803607/muhammad-chhota"}, "edited": false, "score": 3, "creation_date": 1507192987, "post_id": 37874665, "comment_id": 80115480, "body": "@Muhammadchhota <code>emptyList</code> will not repeatedly allocate memory. <a href=\"https://github.com/JetBrains/kotlin/blob/1.1.3/libraries/stdlib/src/kotlin/collections/Collections.kt#L77\" rel=\"nofollow noreferrer\">It returns a singleton</a>."}, {"owner": {"reputation": 3228, "user_id": 8700937, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100002557288121/picture?type=large", "display_name": "Farwa", "link": "https://stackoverflow.com/users/8700937/farwa"}, "edited": false, "score": 0, "creation_date": 1524484310, "post_id": 37874665, "comment_id": 86976811, "body": "How do I create a setter for this model?"}, {"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "reply_to_user": {"reputation": 3228, "user_id": 8700937, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100002557288121/picture?type=large", "display_name": "Farwa", "link": "https://stackoverflow.com/users/8700937/farwa"}, "edited": false, "score": 0, "creation_date": 1524484812, "post_id": 37874665, "comment_id": 86977127, "body": "@Farwa what do you mean by setter? The properties above are declared as <code>var</code> meaning mutable."}, {"owner": {"reputation": 3228, "user_id": 8700937, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100002557288121/picture?type=large", "display_name": "Farwa", "link": "https://stackoverflow.com/users/8700937/farwa"}, "edited": false, "score": 0, "creation_date": 1524485035, "post_id": 37874665, "comment_id": 86977278, "body": "I mean how can I assign values to those programmatically?"}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 293, "last_activity_date": 1495476588, "last_edit_date": 1495476588, "creation_date": 1466145216, "answer_id": 37874665, "question_id": 37873995, "link": "https://stackoverflow.com/questions/37873995/how-to-create-empty-constructor-for-data-class-in-kotlin-android/37874665#37874665", "title": "How to create empty constructor for data class in Kotlin Android", "body": "<p>You have 2 options here:</p>\n\n<ol>\n<li><p>Assign a default value to each <a href=\"https://kotlinlang.org/docs/reference/classes.html#constructors\" rel=\"noreferrer\">primary constructor</a> parameter:</p>\n\n<pre><code>data class Activity(\n    var updated_on: String = \"\",\n    var tags: List&lt;String&gt; = emptyList(),\n    var description: String = \"\",\n    var user_id: List&lt;Int&gt; = emptyList(),\n    var status_id: Int = -1,\n    var title: String = \"\",\n    var created_at: String = \"\",\n    var data: HashMap&lt;*, *&gt; = hashMapOf&lt;Any, Any&gt;(),\n    var id: Int = -1,\n    var counts: LinkedTreeMap&lt;*, *&gt; = LinkedTreeMap&lt;Any, Any&gt;()\n) \n</code></pre></li>\n<li><p>Declare <a href=\"https://kotlinlang.org/docs/reference/classes.html#secondary-constructors\" rel=\"noreferrer\">a secondary constructor</a> that has no parameters:</p>\n\n<pre><code>data class Activity(\n    var updated_on: String,\n    var tags: List&lt;String&gt;,\n    var description: String,\n    var user_id: List&lt;Int&gt;,\n    var status_id: Int,\n    var title: String,\n    var created_at: String,\n    var data: HashMap&lt;*, *&gt;,\n    var id: Int,\n    var counts: LinkedTreeMap&lt;*, *&gt;\n) {\n    constructor() : this(\"\", emptyList(), \n                         \"\", emptyList(), -1, \n                         \"\", \"\", hashMapOf&lt;Any, Any&gt;(), \n                         -1, LinkedTreeMap&lt;Any, Any&gt;()\n                         )\n}\n</code></pre></li>\n</ol>\n\n<p>If you don't rely on <code>copy</code> or <code>equals</code> of the <code>Activity</code> class or don't use the autogenerated <code>data class</code> methods at all you could use regular class like so:</p>\n\n<pre><code>class ActivityDto {\n    var updated_on: String = \"\",\n    var tags: List&lt;String&gt; = emptyList(),\n    var description: String = \"\",\n    var user_id: List&lt;Int&gt; = emptyList(),\n    var status_id: Int = -1,\n    var title: String = \"\",\n    var created_at: String = \"\",\n    var data: HashMap&lt;*, *&gt; = hashMapOf&lt;Any, Any&gt;(),\n    var id: Int = -1,\n    var counts: LinkedTreeMap&lt;*, *&gt; = LinkedTreeMap&lt;Any, Any&gt;()\n}\n</code></pre>\n\n<p>Not every <a href=\"https://en.wikipedia.org/wiki/Data_transfer_object\" rel=\"noreferrer\">DTO</a> needs to be a <code>data class</code> and vice versa. In fact in my experience I find data classes to be particularly useful in areas that involve some complex business logic. </p>\n"}, {"comments": [{"owner": {"reputation": 2039, "user_id": 502214, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0e26ce1fd9b907aa156d7e8e2cdd6401?s=128&d=identicon&r=PG", "display_name": "V&#245; Quang H&#242;a", "link": "https://stackoverflow.com/users/502214/v%c3%b5-quang-h%c3%b2a"}, "edited": false, "score": 0, "creation_date": 1576679845, "post_id": 47530515, "comment_id": 104977884, "body": "The last commend is wrong. At least for the Gson serializer, in fact, Gson uses the unsafe mechanism to create objects and it will not call your constructor. I have just answered a related question here <a href=\"https://stackoverflow.com/questions/59390294/what-should-i-do-if-i-dont-want-a-devired-class-call-base-classs-constructor-i/59393841#59393841\" title=\"what should i do if i dont want a devired class call base classs constructor i\">stackoverflow.com/questions/59390294/&hellip;</a>"}], "tags": [], "owner": {"reputation": 11922, "user_id": 389405, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/7dc28714614dc8bf86b8923445c7a0b5?s=128&d=identicon&r=PG", "display_name": "Gui13", "link": "https://stackoverflow.com/users/389405/gui13"}, "is_accepted": false, "score": 15, "last_activity_date": 1511868720, "creation_date": 1511868720, "answer_id": 47530515, "question_id": 37873995, "link": "https://stackoverflow.com/questions/37873995/how-to-create-empty-constructor-for-data-class-in-kotlin-android/47530515#47530515", "title": "How to create empty constructor for data class in Kotlin Android", "body": "<p>Along with @miensol answer, let me add some details:</p>\n\n<p>If you want a Java-visible empty constructor using data classes, you need to define it explicitely.</p>\n\n<p>Using default values + constructor specifier is quite easy:</p>\n\n<pre><code>data class Activity(\n    var updated_on: String = \"\",\n    var tags: List&lt;String&gt; = emptyList(),\n    var description: String = \"\",\n    var user_id: List&lt;Int&gt; = emptyList(),\n    var status_id: Int = -1,\n    var title: String = \"\",\n    var created_at: String = \"\",\n    var data: HashMap&lt;*, *&gt; = hashMapOf&lt;Any, Any&gt;(),\n    var id: Int = -1,\n    var counts: LinkedTreeMap&lt;*, *&gt; = LinkedTreeMap&lt;Any, Any&gt;()\n) {\n    constructor() : this(title = \"\") // this constructor is an explicit\n                                     // \"empty\" constructor, as seen by Java.\n}\n</code></pre>\n\n<p>This means that with this trick you can now serialize/deserialize this object with the standard Java serializers (Jackson, Gson etc).</p>\n"}, {"comments": [{"owner": {"reputation": 12722, "user_id": 938845, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yNOAZ.png?s=128&g=1", "display_name": "Panchal Amit", "link": "https://stackoverflow.com/users/938845/panchal-amit"}, "edited": false, "score": 1, "creation_date": 1573646788, "post_id": 48265021, "comment_id": 103948017, "body": "if id is auto-generated then how to use?"}, {"owner": {"reputation": 83, "user_id": 5997226, "user_type": "registered", "profile_image": "https://graph.facebook.com/558326824330836/picture?type=large", "display_name": "Jitendra Surve", "link": "https://stackoverflow.com/users/5997226/jitendra-surve"}, "edited": false, "score": 1, "creation_date": 1591721617, "post_id": 48265021, "comment_id": 110161259, "body": "Worked for me. For Firebase Chat message : <code>class FeelComChatMessage (messageText: String = &quot;&quot;, messageUser: String = &quot;&quot;)</code>"}], "tags": [], "owner": {"reputation": 8055, "user_id": 706387, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/SiTPw.jpg?s=128&g=1", "display_name": "kosiara - Bartosz Kosarzycki", "link": "https://stackoverflow.com/users/706387/kosiara-bartosz-kosarzycki"}, "is_accepted": false, "score": 85, "last_activity_date": 1516026569, "creation_date": 1516026569, "answer_id": 48265021, "question_id": 37873995, "link": "https://stackoverflow.com/questions/37873995/how-to-create-empty-constructor-for-data-class-in-kotlin-android/48265021#48265021", "title": "How to create empty constructor for data class in Kotlin Android", "body": "<p>If you give <strong>default values to all the fields</strong> - empty constructor is generated automatically by Kotlin.</p>\n\n<pre><code>data class User(var id: Long = -1,\n                var uniqueIdentifier: String? = null)\n</code></pre>\n\n<p>and you can simply call:</p>\n\n<pre><code>val user = User()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 511, "user_id": 5486945, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q9mkD.png?s=128&g=1", "display_name": "yOshi", "link": "https://stackoverflow.com/users/5486945/yoshi"}, "is_accepted": false, "score": 7, "last_activity_date": 1527817872, "creation_date": 1527817872, "answer_id": 50635041, "question_id": 37873995, "link": "https://stackoverflow.com/questions/37873995/how-to-create-empty-constructor-for-data-class-in-kotlin-android/50635041#50635041", "title": "How to create empty constructor for data class in Kotlin Android", "body": "<p>If you give a default value to each primary constructor parameter:</p>\n\n<pre><code>data class Item(var id: String = \"\",\n            var title: String = \"\",\n            var condition: String = \"\",\n            var price: String = \"\",\n            var categoryId: String = \"\",\n            var make: String = \"\",\n            var model: String = \"\",\n            var year: String = \"\",\n            var bodyStyle: String = \"\",\n            var detail: String = \"\",\n            var latitude: Double = 0.0,\n            var longitude: Double = 0.0,\n            var listImages: List&lt;String&gt; = emptyList(),\n            var idSeller: String = \"\")\n</code></pre>\n\n<p>and from the class where the instances you can call it without arguments or with the arguments that you have that moment</p>\n\n<pre><code>var newItem = Item()\n\nvar newItem2 = Item(title = \"exampleTitle\",\n            condition = \"exampleCondition\",\n            price = \"examplePrice\",\n            categoryId = \"exampleCategoryId\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 25953, "user_id": 6599590, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/qLSDJ.jpg?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/6599590/andy"}, "is_accepted": false, "score": 2, "last_activity_date": 1548614187, "last_edit_date": 1548614187, "creation_date": 1548600458, "answer_id": 54389378, "question_id": 37873995, "link": "https://stackoverflow.com/questions/37873995/how-to-create-empty-constructor-for-data-class-in-kotlin-android/54389378#54389378", "title": "How to create empty constructor for data class in Kotlin Android", "body": "<p>Non-empty secondary constructor for data class in Kotlin:</p>\n\n<pre><code>data class ChemicalElement(var name: String,\n                           var symbol: String,\n                           var atomicNumber: Int,\n                           var atomicWeight: Double,\n                           var nobleMetal: Boolean?) {\n\n    constructor(): this(\"Silver\",\n                        \"Ag\", \n                        47,\n                        107.8682,\n                        true)\n}\n\nfun main() {\n    var chemicalElement = ChemicalElement()\n    println(\"RESULT: ${chemicalElement.symbol} means ${chemicalElement.name}\")\n    println(chemicalElement)\n}\n\n// RESULT: Ag means Silver\n// ChemicalElement(name=Silver, symbol=Ag, atomicNumber=47, atomicWeight=107.8682, nobleMetal=true)\n</code></pre>\n\n<p>Empty secondary constructor for data class in Kotlin:</p>\n\n<pre><code>data class ChemicalElement(var name: String,\n                           var symbol: String,\n                           var atomicNumber: Int,\n                           var atomicWeight: Double,\n                           var nobleMetal: Boolean?) {\n\n    constructor(): this(\"\",\n                        \"\", \n                        -1,\n                        0.0,\n                        null)\n}\n\nfun main() {\n    var chemicalElement = ChemicalElement()\n    println(chemicalElement)\n}\n\n// ChemicalElement(name=, symbol=, atomicNumber=-1, atomicWeight=0.0, nobleMetal=null)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7328, "user_id": 1101730, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/0ZiMa.jpg?s=128&g=1", "display_name": "Micer", "link": "https://stackoverflow.com/users/1101730/micer"}, "is_accepted": false, "score": 3, "last_activity_date": 1555172724, "creation_date": 1555172724, "answer_id": 55667547, "question_id": 37873995, "link": "https://stackoverflow.com/questions/37873995/how-to-create-empty-constructor-for-data-class-in-kotlin-android/55667547#55667547", "title": "How to create empty constructor for data class in Kotlin Android", "body": "<p>I'd suggest to modify the primary constructor and add a <strong>default value</strong> to each parameter:</p>\n\n<pre><code>data class Activity(\n    var updated_on: String = \"\",\n    var tags: List&lt;String&gt; = emptyList(),\n    var description: String = \"\",\n    var user_id: List&lt;Int&gt; = emptyList(),\n    var status_id: Int = -1,\n    var title: String = \"\",\n    var created_at: String = \"\",\n    var data: HashMap&lt;*, *&gt; = hashMapOf&lt;Any, Any&gt;(),\n    var id: Int = -1,\n    var counts: LinkedTreeMap&lt;*, *&gt; = LinkedTreeMap&lt;Any, Any&gt;()\n)\n</code></pre>\n\n<p>You can also make values nullable by adding <code>?</code> and then you can assing <code>null</code>:</p>\n\n<pre><code>data class Activity(\n    var updated_on: String? = null,\n    var tags: List&lt;String&gt;? = null,\n    var description: String? = null,\n    var user_id: List&lt;Int&gt;? = null,\n    var status_id: Int? = null,\n    var title: String? = null,\n    var created_at: String? = null,\n    var data: HashMap&lt;*, *&gt;? = null,\n    var id: Int? = null,\n    var counts: LinkedTreeMap&lt;*, *&gt;? = null\n)\n</code></pre>\n\n<p>In general, it is a good practice to avoid nullable objects - write the code in the way that we don't need to use them. Non-nullable objects are one of the advantages of Kotlin compared to Java. Therefore, <strong>the first option above is preferable</strong>.</p>\n\n<p>Both options will give you the desired result:</p>\n\n<pre><code>val activity = Activity()\nactivity.title = \"New Computer\"\nsendToServer(activity)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8866, "user_id": 9164141, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/uiNcT.jpg?s=128&g=1", "display_name": "Gast&#243;n Saill&#233;n", "link": "https://stackoverflow.com/users/9164141/gast%c3%b3n-saill%c3%a9n"}, "is_accepted": false, "score": 5, "last_activity_date": 1562370964, "creation_date": 1562370964, "answer_id": 56910246, "question_id": 37873995, "link": "https://stackoverflow.com/questions/37873995/how-to-create-empty-constructor-for-data-class-in-kotlin-android/56910246#56910246", "title": "How to create empty constructor for data class in Kotlin Android", "body": "<p>From the <a href=\"https://kotlinlang.org/docs/reference/classes.html#constructors\" rel=\"noreferrer\">documentation</a></p>\n\n<blockquote>\n  <p>NOTE: On the JVM, if all of the parameters of the primary constructor\n  have default values, the compiler will generate an additional\n  parameterless constructor which will use the default values. This\n  makes it easier to use Kotlin with libraries such as Jackson or JPA\n  that create class instances through parameterless constructors.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 620, "user_id": 4984561, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f888449116da86c4fd06fd3e8ae69344?s=128&d=identicon&r=PG", "display_name": "mxml", "link": "https://stackoverflow.com/users/4984561/mxml"}, "is_accepted": false, "score": 10, "last_activity_date": 1600019703, "creation_date": 1600019703, "answer_id": 63873902, "question_id": 37873995, "link": "https://stackoverflow.com/questions/37873995/how-to-create-empty-constructor-for-data-class-in-kotlin-android/63873902#63873902", "title": "How to create empty constructor for data class in Kotlin Android", "body": "<p>the modern answer for this should be using Kotlin's <code>no-arg compiler plugin</code> which creates a non argument construct code for classic apies <a href=\"https://kotlinlang.org/docs/reference/compiler-plugins.html#no-arg-compiler-plugin\" rel=\"noreferrer\">more about here</a></p>\n<p>simply you have to add the plugin class path in build.gradle project level</p>\n<pre><code>    dependencies {\n    ....\n\n    classpath &quot;org.jetbrains.kotlin:kotlin-noarg:1.4.10&quot;\n\n    ....\n    }\n</code></pre>\n<p>then configure your annotation to generate the <code>no-arg</code> constructor</p>\n<pre><code>apply plugin: &quot;kotlin-noarg&quot;\n\nnoArg {\n      annotation(&quot;your.path.to.annotaion.NoArg&quot;)\n      invokeInitializers = true\n}\n</code></pre>\n<p>then define your annotation file <code>NoArg.kt</code></p>\n<pre><code> @Target(AnnotationTarget.CLASS)\n @Retention(AnnotationRetention.SOURCE)\n annotation class NoArg\n</code></pre>\n<p>finally in any data class you can simply use your own annotation</p>\n<pre><code>@NoArg\ndata class SomeClass( val datafield:Type , ...   )\n</code></pre>\n<p>I used to create my own <code>no-arg</code> constructor as the accepted answer , which i got  by search but then this plugin released or something and I found it way cleaner .</p>\n"}], "owner": {"reputation": 12577, "user_id": 2102794, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/BrKf5.jpg?s=128&g=1", "display_name": "Sai", "link": "https://stackoverflow.com/users/2102794/sai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116842, "favorite_count": 28, "accepted_answer_id": 37874665, "answer_count": 8, "score": 225, "last_activity_date": 1606732790, "creation_date": 1466142421, "last_edit_date": 1606732790, "question_id": 37873995, "link": "https://stackoverflow.com/questions/37873995/how-to-create-empty-constructor-for-data-class-in-kotlin-android", "title": "How to create empty constructor for data class in Kotlin Android", "body": "<p>I have 10+ variables declared in Kotlin data class, and I would like to create an empty constructor for it like how we typically do in Java.</p>\n<p>Data class:</p>\n<pre><code>data class Activity(\n    var updated_on: String,\n    var tags: List&lt;String&gt;,\n    var description: String,\n    var user_id: List&lt;Int&gt;,\n    var status_id: Int,\n    var title: String,\n    var created_at: String,\n    var data: HashMap&lt;*, *&gt;,\n    var id: Int,\n    var counts: LinkedTreeMap&lt;*, *&gt;,\n)\n</code></pre>\n<p>Expected usage:</p>\n<pre><code>val activity =  Activity();\nactivity.title = &quot;New Computer&quot;\nsendToServer(activity)\n</code></pre>\n<p>But the data class requires all arguments to be passed while creating a constructor. How can we simplify this like the Java POJO class constructor?</p>\n<pre><code>val activity =  Activity(null,null,null,null,null,&quot;New Computer&quot;,null,null,null,null)\nsendToServer(activity)\n</code></pre>\n"}, {"tags": ["java", "gradle", "libgdx", "kotlin"], "comments": [{"owner": {"reputation": 606, "user_id": 6452852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e442f5ac2c2be4a8c94f25a535b5a7?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Bardyshev", "link": "https://stackoverflow.com/users/6452852/andrei-bardyshev"}, "edited": false, "score": 0, "creation_date": 1466137499, "post_id": 37872958, "comment_id": 63202309, "body": "Can you share your build output?"}, {"owner": {"reputation": 68, "user_id": 3557224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f90ba30b5e468f5a48fcade48d78827?s=128&d=identicon&r=PG", "display_name": "harmony", "link": "https://stackoverflow.com/users/3557224/harmony"}, "reply_to_user": {"reputation": 606, "user_id": 6452852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e442f5ac2c2be4a8c94f25a535b5a7?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Bardyshev", "link": "https://stackoverflow.com/users/6452852/andrei-bardyshev"}, "edited": false, "score": 0, "creation_date": 1466137681, "post_id": 37872958, "comment_id": 63202363, "body": "<a href=\"http://hastebin.com/ezebosakon.vbs\" rel=\"nofollow noreferrer\">hastebin.com/ezebosakon.vbs</a>  It takes 20 seconds before outputting the first line"}, {"owner": {"reputation": 69302, "user_id": 542270, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/DJlop.jpg?s=128&g=1", "display_name": "Opal", "link": "https://stackoverflow.com/users/542270/opal"}, "edited": false, "score": 1, "creation_date": 1466144347, "post_id": 37872958, "comment_id": 63204523, "body": "Try run gradle in debug mode <code>-d</code> and examine the output to check what&#39;s going on when <i>nothing happens</i>."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1466169615, "post_id": 37872958, "comment_id": 63220111, "body": "Check your ip4 vs. ip6 is configured correctly on your machine, sometimes something with network access can stall on the JVM for like 20-30 seconds due to that.  If you debug with Intellij you will see the same pause at start of debugging."}, {"owner": {"reputation": 68, "user_id": 3557224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f90ba30b5e468f5a48fcade48d78827?s=128&d=identicon&r=PG", "display_name": "harmony", "link": "https://stackoverflow.com/users/3557224/harmony"}, "edited": false, "score": 0, "creation_date": 1466206400, "post_id": 37872958, "comment_id": 63237921, "body": "stalling right after this <code>01:32:50.151 [DEBUG] [org.gradle.internal.nativeintegration.services.NativeServic&zwnj;&#8203;es] Native-platform posix files is not available.  Continuing with fallback.</code>"}, {"owner": {"reputation": 68, "user_id": 3557224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f90ba30b5e468f5a48fcade48d78827?s=128&d=identicon&r=PG", "display_name": "harmony", "link": "https://stackoverflow.com/users/3557224/harmony"}, "edited": false, "score": 0, "creation_date": 1466207737, "post_id": 37872958, "comment_id": 63238205, "body": "here&#39;s the full log \t <a href=\"https://files.debugspeople.com/gradle/gradle.log\" rel=\"nofollow noreferrer\">files.debugspeople.com/gradle/gradle.log</a>"}], "answers": [{"comments": [{"owner": {"reputation": 68, "user_id": 3557224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f90ba30b5e468f5a48fcade48d78827?s=128&d=identicon&r=PG", "display_name": "harmony", "link": "https://stackoverflow.com/users/3557224/harmony"}, "edited": false, "score": 0, "creation_date": 1466137341, "post_id": 37873052, "comment_id": 63202263, "body": "I have the daemon enabled by default, it seems like my PC is just strange"}], "tags": [], "owner": {"reputation": 606, "user_id": 6452852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e442f5ac2c2be4a8c94f25a535b5a7?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Bardyshev", "link": "https://stackoverflow.com/users/6452852/andrei-bardyshev"}, "is_accepted": false, "score": 0, "last_activity_date": 1466137402, "last_edit_date": 1466137402, "creation_date": 1466137106, "answer_id": 37873052, "question_id": 37872958, "link": "https://stackoverflow.com/questions/37872958/gradle-taking-time-up-front-seemingly-doing-nothing/37873052#37873052", "title": "Gradle taking time up front seemingly doing nothing", "body": "<p>You can try enabling <a href=\"https://docs.gradle.org/current/userguide/gradle_daemon.html\" rel=\"nofollow\">gradle daemon</a>. \nThat way gradle won't have to load from scratch every time you start a build. Instead, it will run in background waiting for a build to start.</p>\n\n<pre><code>org.gradle.daemon=true\n</code></pre>\n\n<p>in \u00abUSER_HOME\u00bb/.gradle/gradle.properties</p>\n"}, {"comments": [{"owner": {"reputation": 68, "user_id": 3557224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f90ba30b5e468f5a48fcade48d78827?s=128&d=identicon&r=PG", "display_name": "harmony", "link": "https://stackoverflow.com/users/3557224/harmony"}, "edited": false, "score": 0, "creation_date": 1466206865, "post_id": 37890040, "comment_id": 63238011, "body": "that&#39;s the profile, 1m20.68s / 1m31.10s is startup time"}], "tags": [], "owner": {"reputation": 38794, "user_id": 25066, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bca89ff7612c074bbe1a77d2cf0a4fb0?s=128&d=identicon&r=PG", "display_name": "Eric Wendelin", "link": "https://stackoverflow.com/users/25066/eric-wendelin"}, "is_accepted": false, "score": 1, "last_activity_date": 1466195890, "creation_date": 1466195890, "answer_id": 37890040, "question_id": 37872958, "link": "https://stackoverflow.com/questions/37872958/gradle-taking-time-up-front-seemingly-doing-nothing/37890040#37890040", "title": "Gradle taking time up front seemingly doing nothing", "body": "<p>I recommend starting with some measurement:</p>\n\n<pre><code>gradlew build --profile\n</code></pre>\n\n<p>Open up /report/profile in a web browser and see what it's doing. </p>\n\n<p>It sounds to me like your project is taking a long time to configure. Do you have a large project or many projects in your build? Are you using a bunch of plugins? </p>\n\n<p>The easy way to reduce configuration time is to configure fewer things. Remove plugins that you only use rarely. Try out the <code>@Incubating</code> <code>--configure-on-demand</code> option.</p>\n\n<p>Come back after you've confirmed via profiling for further help.</p>\n"}], "owner": {"reputation": 68, "user_id": 3557224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f90ba30b5e468f5a48fcade48d78827?s=128&d=identicon&r=PG", "display_name": "harmony", "link": "https://stackoverflow.com/users/3557224/harmony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 833, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1466206353, "creation_date": 1466136327, "last_edit_date": 1466206353, "question_id": 37872958, "link": "https://stackoverflow.com/questions/37872958/gradle-taking-time-up-front-seemingly-doing-nothing", "title": "Gradle taking time up front seemingly doing nothing", "body": "<p>Gradle seem to be really slow for me and I have no idea why.\nWhenever I run a build it takes like 30 seconds for me, according to the output 25 seconds of those it's doing nothing.</p>\n\n<p>Building like this:</p>\n\n<pre><code>gradlew build --parallel --offline\n</code></pre>\n\n<p>This is happening to me now with Kotlin, it was the same when I was using Java only, incremental builds don't seem to do anything either</p>\n\n<p>EDIT: I have the gradle daemon enabled</p>\n\n<p>Every subsequent build right at the start takes as long or longer than starting the daemon apparently doing nothing</p>\n\n<p>This is my Project: <a href=\"https://github.com/forsakenharmony/GameProt\" rel=\"nofollow\">https://github.com/forsakenharmony/GameProt</a></p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1466084038, "post_id": 37860745, "comment_id": 63178720, "body": "Post the complete stack trace of the exception. I doubt Spring can inject an object. RestUtils should be a class, annotated with @Component."}, {"owner": {"reputation": 771, "user_id": 4939370, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d88bd94bd8f15918c7095a9c03e628b6?s=128&d=identicon&r=PG&f=1", "display_name": "yogiginger", "link": "https://stackoverflow.com/users/4939370/yogiginger"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1466085108, "post_id": 37860745, "comment_id": 63179642, "body": "It also doesn&#39;t work, if RestUtils is of type <code>class</code> instead of <code>data class</code>. Using an <code>object</code> here because <code>createRestTemplate()</code> should be static."}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 1, "creation_date": 1466085577, "post_id": 37860745, "comment_id": 63180005, "body": "It&#39;s not a class not a data class. It&#39;s an object. It shouldn&#39;t be an object. It should be a class. Spring is about dependency injection. Dependencies are injected in class instances. You can&#39;t use injected dependencies from static methods. So no, createRestTemplate shouldn&#39;t be static."}], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 6, "last_activity_date": 1466086560, "creation_date": 1466086560, "answer_id": 37861797, "question_id": 37860745, "link": "https://stackoverflow.com/questions/37860745/spring-configurationproperties-and-kotlin/37861797#37861797", "title": "Spring ConfigurationProperties and Kotlin?", "body": "<p>Dependency injection does not work with Kotlin <code>object</code>s. Every <code>object</code> has a single instance created by the compiler-generated code and stored in a static field, and it's not possible to inject any dependencies into that instance.</p>\n\n<p>You need to change your code so that <code>RestUtils</code> is a regular class.</p>\n"}], "owner": {"reputation": 771, "user_id": 4939370, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d88bd94bd8f15918c7095a9c03e628b6?s=128&d=identicon&r=PG&f=1", "display_name": "yogiginger", "link": "https://stackoverflow.com/users/4939370/yogiginger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2201, "favorite_count": 0, "accepted_answer_id": 37861797, "answer_count": 1, "score": 2, "last_activity_date": 1466086560, "creation_date": 1466083754, "last_edit_date": 1466084989, "question_id": 37860745, "link": "https://stackoverflow.com/questions/37860745/spring-configurationproperties-and-kotlin", "title": "Spring ConfigurationProperties and Kotlin?", "body": "<p>application.yaml:</p>\n\n<pre><code>proxy.http.host: localhost\nproxy.http.port: 3128\n</code></pre>\n\n<p>The config class:</p>\n\n<pre><code>@Component\n@ConfigurationProperties(prefix = \"proxy.http\")\ndata class ProxyConfig(var host: String = \"\", var port: Int = -1) {\n}\n</code></pre>\n\n<p>The consumer (an <code>object</code> type)</p>\n\n<pre><code>object RestUtils {\n\n    @Autowired\n    lateinit var proxyConfig: ProxyConfig\n\n    fun createRestTemplate(): RestTemplate {            \n        val proxy = Proxy(Proxy.Type.HTTP, InetSocketAddress(proxyConfig.host, 3128))\n</code></pre>\n\n<p>Unfortunatelly, it ends at runtime in a <code>kotlin.UninitializedPropertyAccessException</code> exception.</p>\n\n<p>Stacktrace:</p>\n\n<pre><code>kotlin.UninitializedPropertyAccessException: lateinit property proxyConfig has not been initialized\n    at com.test.infrastructure.RestUtils.createRestTemplate(RestUtils.kt:16) ~[classes/:na]\n    at com.test.monitoring.MonitoringController.getComponentsStatus(MonitoringController.kt:36) ~[classes/:na]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_20]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_20]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_20]\n    at java.lang.reflect.Method.invoke(Method.java:483) ~[na:1.8.0_20]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221) ~[spring-web-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136) ~[spring-web-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110) ~[spring-webmvc-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:832) ~[spring-webmvc-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:743) ~[spring-webmvc-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85) ~[spring-webmvc-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:961) ~[spring-webmvc-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:895) ~[spring-webmvc-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967) ~[spring-webmvc-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:858) ~[spring-webmvc-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:622) ~[tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843) ~[spring-webmvc-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:729) ~[tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:292) ~[tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207) ~[tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52) ~[tomcat-embed-websocket-8.0.33.jar:8.0.33]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240) ~[tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207) ~[tomcat-embed-core-8.0.33.jar:8.0.33]\n    at com.daimlertss.repocar.service.infrastructure.CorsFilter.doFilter(CorsFilter.kt:24) ~[classes/:na]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240) ~[tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207) ~[tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:316) ~[spring-security-web-4.0.4.RELEASE.jar:4.0.4.RELEASE]\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:126) ~[spring-security-web-4.0.4.RELEASE.jar:4.0.4.RELEASE]\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:90) ~[spring-security-web-4.0.4.RELEASE.jar:4.0.4.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) ~[spring-security-web-4.0.4.RELEASE.jar:4.0.4.RELEASE]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:114) ~[spring-security-web-4.0.4.RELEASE.jar:4.0.4.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) ~[spring-security-web-4.0.4.RELEASE.jar:4.0.4.RELEASE]\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:122) ~[spring-security-web-4.0.4.RELEASE.jar:4.0.4.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) ~[spring-security-web-4.0.4.RELEASE.jar:4.0.4.RELEASE]\n    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111) ~[spring-security-web-4.0.4.RELEASE.jar:4.0.4.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) ~[spring-security-web-4.0.4.RELEASE.jar:4.0.4.RELEASE]\n    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:169) ~[spring-security-web-4.0.4.RELEASE.jar:4.0.4.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) ~[spring-security-web-4.0.4.RELEASE.jar:4.0.4.RELEASE]\n    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:48) ~[spring-security-web-4.0.4.RELEASE.jar:4.0.4.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) ~[spring-security-web-4.0.4.RELEASE.jar:4.0.4.RELEASE]\n    at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:213) ~[spring-security-web-4.0.4.RELEASE.jar:4.0.4.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) ~[spring-security-web-4.0.4.RELEASE.jar:4.0.4.RELEASE]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:120) ~[spring-security-web-4.0.4.RELEASE.jar:4.0.4.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) ~[spring-security-web-4.0.4.RELEASE.jar:4.0.4.RELEASE]\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64) ~[spring-security-web-4.0.4.RELEASE.jar:4.0.4.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) ~[spring-security-web-4.0.4.RELEASE.jar:4.0.4.RELEASE]\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:91) ~[spring-security-web-4.0.4.RELEASE.jar:4.0.4.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) ~[spring-security-web-4.0.4.RELEASE.jar:4.0.4.RELEASE]\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:53) ~[spring-security-web-4.0.4.RELEASE.jar:4.0.4.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) ~[spring-security-web-4.0.4.RELEASE.jar:4.0.4.RELEASE]\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:213) ~[spring-security-web-4.0.4.RELEASE.jar:4.0.4.RELEASE]\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:176) ~[spring-security-web-4.0.4.RELEASE.jar:4.0.4.RELEASE]\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346) ~[spring-web-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:262) ~[spring-web-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240) ~[tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207) ~[tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240) ~[tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207) ~[tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:87) ~[spring-web-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240) ~[tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207) ~[tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77) ~[spring-web-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240) ~[tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207) ~[tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:121) ~[spring-web-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240) ~[tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207) ~[tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:212) ~[tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:141) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:522) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1095) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:672) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1502) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1458) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [na:1.8.0_20]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [na:1.8.0_20]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at java.lang.Thread.run(Thread.java:745) [na:1.8.0_20]\n</code></pre>\n"}, {"tags": ["spring", "intellij-idea", "gradle", "spring-boot", "kotlin"], "comments": [{"owner": {"reputation": 1466, "user_id": 1155079, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/38057f2a2124655a1eca0cff1de3f816?s=128&d=identicon&r=PG", "display_name": "Matt Friedman", "link": "https://stackoverflow.com/users/1155079/matt-friedman"}, "edited": false, "score": 0, "creation_date": 1468767200, "post_id": 37858833, "comment_id": 64251381, "body": "I seem to be having the same problem using groovy"}, {"owner": {"reputation": 1292, "user_id": 37144, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/swagC.jpg?s=128&g=1", "display_name": "Rakesh N", "link": "https://stackoverflow.com/users/37144/rakesh-n"}, "edited": false, "score": 0, "creation_date": 1526655006, "post_id": 37858833, "comment_id": 87843648, "body": "I have the same problem despite trying all the suggestions. My environment - IntelliJ 2018.1.3 CE, SpringBoot 2.0.1, Kotlin 1.2.41"}], "answers": [{"comments": [{"owner": {"reputation": 84621, "user_id": 1384297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mQ01b.jpg?s=128&g=1", "display_name": "Andy Wilkinson", "link": "https://stackoverflow.com/users/1384297/andy-wilkinson"}, "edited": false, "score": 1, "creation_date": 1466080887, "post_id": 37859540, "comment_id": 63176242, "body": "This might help too: <a href=\"https://kotlinlang.org/docs/reference/using-gradle.html#annotation-processing\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/&hellip;</a>"}], "tags": [], "owner": {"reputation": 27474, "user_id": 613628, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/81249832e79806754a4bd9c915164fbf?s=128&d=identicon&r=PG", "display_name": "Stephane Nicoll", "link": "https://stackoverflow.com/users/613628/stephane-nicoll"}, "is_accepted": false, "score": 1, "last_activity_date": 1466080791, "creation_date": 1466080791, "answer_id": 37859540, "question_id": 37858833, "link": "https://stackoverflow.com/questions/37858833/spring-configuration-metadata-json-file-is-not-generated-in-intellij-idea-for-ko/37859540#37859540", "title": "spring-configuration-metadata.json file is not generated in IntelliJ Idea for Kotlin @ConfigurationProperties class", "body": "<p>Kotlin has its own compiler. The meta-data is generated by an <a href=\"https://docs.oracle.com/javase/8/docs/api/javax/annotation/processing/Processor.html\" rel=\"nofollow\">annotation processor</a> that is a hook-point in the Java compiler. </p>\n\n<p>I have no idea if such hook-point is available in Kotlin but in any case, Spring Boot does not support anything else than Java at the moment. Maybe <a href=\"https://blog.jetbrains.com/kotlin/2015/06/better-annotation-processing-supporting-stubs-in-kapt/\" rel=\"nofollow\">this would help?</a></p>\n"}, {"comments": [{"owner": {"reputation": 1466, "user_id": 1155079, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/38057f2a2124655a1eca0cff1de3f816?s=128&d=identicon&r=PG", "display_name": "Matt Friedman", "link": "https://stackoverflow.com/users/1155079/matt-friedman"}, "edited": false, "score": 0, "creation_date": 1468767220, "post_id": 37866466, "comment_id": 64251387, "body": "Can you suggest a solution for the same issue with groovy?"}, {"owner": {"reputation": 531, "user_id": 1807168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/083265881cb260fdca71af94844657fd?s=128&d=identicon&r=PG", "display_name": "Alexander Mikhalchenko", "link": "https://stackoverflow.com/users/1807168/alexander-mikhalchenko"}, "reply_to_user": {"reputation": 1466, "user_id": 1155079, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/38057f2a2124655a1eca0cff1de3f816?s=128&d=identicon&r=PG", "display_name": "Matt Friedman", "link": "https://stackoverflow.com/users/1155079/matt-friedman"}, "edited": false, "score": 0, "creation_date": 1468910157, "post_id": 37866466, "comment_id": 64306966, "body": "As St&#233;phane Nicoll said, currently Spring Boot supports nothing but Java. During work on Kotlin-based project I came to conclusion that it is better to use Java classes for custom properties. Everything else is a hacks and workarounds (at the moment) for compiler, programming language and IDE."}, {"owner": {"reputation": 329, "user_id": 3843929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8dac1c944cd1651e7aabc471a4e46ac?s=128&d=identicon&r=PG", "display_name": "MrBigglesworth", "link": "https://stackoverflow.com/users/3843929/mrbigglesworth"}, "edited": false, "score": 1, "creation_date": 1471811966, "post_id": 37866466, "comment_id": 65485451, "body": "I got this working fine in kotlin, using spring boot 1.4.0. Without using propdeps or anything on the java side. In my web module, where all the config is used I added      kapt &quot;org.springframework.boot:spring-boot-configuration-processo&zwnj;&#8203;r&quot;and that was it"}, {"owner": {"reputation": 26227, "user_id": 1429387, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/LVOVA.jpg?s=128&g=1", "display_name": "naXa", "link": "https://stackoverflow.com/users/1429387/naxa"}, "edited": false, "score": 1, "creation_date": 1553988161, "post_id": 37866466, "comment_id": 97590408, "body": "<code>compileOnly</code> scope in Gradle 4"}], "tags": [], "owner": {"reputation": 531, "user_id": 1807168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/083265881cb260fdca71af94844657fd?s=128&d=identicon&r=PG", "display_name": "Alexander Mikhalchenko", "link": "https://stackoverflow.com/users/1807168/alexander-mikhalchenko"}, "is_accepted": true, "score": 14, "last_activity_date": 1466100604, "creation_date": 1466100604, "answer_id": 37866466, "question_id": 37858833, "link": "https://stackoverflow.com/questions/37858833/spring-configuration-metadata-json-file-is-not-generated-in-intellij-idea-for-ko/37866466#37866466", "title": "spring-configuration-metadata.json file is not generated in IntelliJ Idea for Kotlin @ConfigurationProperties class", "body": "<p>Thank you for pointing me in the right direction. So the solution is to add</p>\n\n<pre><code>dependencies {\n    ...\n    kapt \"org.springframework.boot:spring-boot-configuration-processor\"\n    optional \"org.springframework.boot:spring-boot-configuration-processor\"\n    ...\n}\n</code></pre>\n\n<p>to <strong>build.gradle</strong> file, run <strong>gradle compileJava</strong> in command line and turn on annotation processing in IntelliJ Idea settings <strong>Build, Execution, Deployment -> Compiler -> Annotation processor -> Enable anotation processing</strong>. The rest of configuration remains <a href=\"http://docs.spring.io/spring-boot/docs/1.3.5.RELEASE/reference/html/configuration-metadata.html#configuration-metadata-annotation-processor\" rel=\"noreferrer\">the same</a></p>\n\n<p>Also note that without this line</p>\n\n<pre><code>optional \"org.springframework.boot:spring-boot-configuration-processor\"\n</code></pre>\n\n<p>IntelliJ Idea will complain whith </p>\n\n<blockquote>\n  <p>Cannot resolve configuration property</p>\n</blockquote>\n\n<p>message in your <strong>application.properties</strong> or <strong>application.yml</strong></p>\n"}, {"comments": [{"owner": {"reputation": 458, "user_id": 786818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66ff5b5074934545df02bdbf52fbb866?s=128&d=identicon&r=PG", "display_name": "Mihkel Selgal", "link": "https://stackoverflow.com/users/786818/mihkel-selgal"}, "edited": false, "score": 1, "creation_date": 1503908282, "post_id": 44206922, "comment_id": 78787624, "body": "The mentioned issue is fixed and I can confirm that the Maven solution works out of the box when using with Kotlin 1.1.4 and Spring Boot 1.5.6."}], "tags": [], "owner": {"reputation": 9495, "user_id": 2145769, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CIiA2.png?s=128&g=1", "display_name": "Leonard Br&#252;nings", "link": "https://stackoverflow.com/users/2145769/leonard-br%c3%bcnings"}, "is_accepted": false, "score": 4, "last_activity_date": 1495818785, "creation_date": 1495818785, "answer_id": 44206922, "question_id": 37858833, "link": "https://stackoverflow.com/questions/37858833/spring-configuration-metadata-json-file-is-not-generated-in-intellij-idea-for-ko/44206922#44206922", "title": "spring-configuration-metadata.json file is not generated in IntelliJ Idea for Kotlin @ConfigurationProperties class", "body": "<p>For those who want to use Maven instead of Gradle, you need to add an <code>kapt</code> execution to the kotlin-maven-plugin configuration.</p>\n\n<pre><code>&lt;execution&gt;\n    &lt;id&gt;kapt&lt;/id&gt;\n    &lt;goals&gt;\n        &lt;goal&gt;kapt&lt;/goal&gt;\n    &lt;/goals&gt;\n    &lt;configuration&gt;\n        &lt;sourceDirs&gt;\n            &lt;sourceDir&gt;src/main/kotlin&lt;/sourceDir&gt;\n        &lt;/sourceDirs&gt;\n        &lt;annotationProcessorPaths&gt;\n            &lt;annotationProcessorPath&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\n                &lt;version&gt;1.5.3.RELEASE&lt;/version&gt;\n            &lt;/annotationProcessorPath&gt;\n        &lt;/annotationProcessorPaths&gt;\n    &lt;/configuration&gt;\n&lt;/execution&gt;\n</code></pre>\n\n<p>There is an open issue <a href=\"https://youtrack.jetbrains.com/issue/KT-18022\" rel=\"nofollow noreferrer\">KT-18022</a> that prevents this from working if an compiler plugin such as <code>kotlin-maven-allopen</code> is declared as dependency.</p>\n"}], "owner": {"reputation": 531, "user_id": 1807168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/083265881cb260fdca71af94844657fd?s=128&d=identicon&r=PG", "display_name": "Alexander Mikhalchenko", "link": "https://stackoverflow.com/users/1807168/alexander-mikhalchenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8603, "favorite_count": 2, "accepted_answer_id": 37866466, "answer_count": 3, "score": 13, "last_activity_date": 1495818785, "creation_date": 1466079023, "question_id": 37858833, "link": "https://stackoverflow.com/questions/37858833/spring-configuration-metadata-json-file-is-not-generated-in-intellij-idea-for-ko", "title": "spring-configuration-metadata.json file is not generated in IntelliJ Idea for Kotlin @ConfigurationProperties class", "body": "<p>I'm trying to generate spring-configuration-metadata.json file for my Spring Boot based project. If I use Java <strong>@ConfigurationProperties</strong> class it is generated correctly and automatically:</p>\n\n<pre><code>@ConfigurationProperties(\"myprops\")\npublic class MyProps {\n\n    private String hello;\n\n    public String getHello() {\n        return hello;\n    }\n\n    public void setHello(String hello) {\n        this.hello = hello;\n    }\n}\n</code></pre>\n\n<p>But if I use Kotlin class the <strong>spring-configuration-metadata.json</strong> file is not generated (I've tried both <strong>gradle build</strong> and Idea <strong>Rebuild Project</strong>).</p>\n\n<pre><code>@ConfigurationProperties(\"myprops\")\nclass MyProps {\n    var hello: String? = null\n}\n</code></pre>\n\n<p>AFAIK Kotlin generates the same class with constructor, getters and setters and should act as regular Java bean.</p>\n\n<p>Any ideas why <strong>spring-boot-configuration-processor</strong> doesn't work with Kotlin classes?</p>\n"}, {"tags": ["asynchronous", "spring-boot", "kotlin", "gatling", "deferred-result"], "comments": [{"owner": {"reputation": 180, "user_id": 1237627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/601d309a0db28b630b3c84cc7b72ee9f?s=128&d=identicon&r=PG", "display_name": "S\u0142awomir Siudek", "link": "https://stackoverflow.com/users/1237627/s%c5%82awomir-siudek"}, "edited": false, "score": 0, "creation_date": 1469358853, "post_id": 37852790, "comment_id": 64493506, "body": "Could you provide full compilable solution please? We have similar issue in Java, so the first step is to separate problem in the simplest possible scenario to investigate it."}], "owner": {"reputation": 6900, "user_id": 259562, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/648b40ee271355e605029dd38cf60cef?s=128&d=identicon&r=PG", "display_name": "dierre", "link": "https://stackoverflow.com/users/259562/dierre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 608, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1466062803, "creation_date": 1466062803, "question_id": 37852790, "link": "https://stackoverflow.com/questions/37852790/is-it-possible-to-run-an-asyncwebrequest-via-browser-call", "title": "Is it possible to run an AsyncWebRequest via browser call?", "body": "<p>I'm using Spring Boot 1.4.</p>\n\n<pre><code>@RequestMapping(\"/nonblocking/{identifier}\")\nfun get(@PathVariable identifier: String): DeferredResult&lt;List&lt;Quote&gt;&gt; {\n    logger.info(\"Starting call\")\n    val dr = DeferredResult&lt;List&lt;Quote&gt;&gt;()\n    CompletableFuture.supplyAsync({quoteRepository.getAll(identifier)})\n            .whenComplete { list, throwable -&gt; dr.setResult(list) }\n    logger.info(\"Finishing call\")\n    return dr\n}\n</code></pre>\n\n<p>When I try to run 500 call using gatling I get this error after a while:</p>\n\n<pre><code>org.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.IllegalStateException: Can't set AsyncWebRequest with concurrent handling in progress\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:982) ~[spring-webmvc-4.3.0.RC2.jar:4.3.0.RC2]\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:861) ~[spring-webmvc-4.3.0.RC2.jar:4.3.0.RC2]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:622) ~[tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:846) ~[spring-webmvc-4.3.0.RC2.jar:4.3.0.RC2]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:729) ~[tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:292) ~[tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207) ~[tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:720) ~[tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:468) ~[tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:391) ~[tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:318) ~[tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:445) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:304) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:181) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:388) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.coyote.http11.AbstractHttp11Processor.asyncDispatch(AbstractHttp11Processor.java:1715) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:652) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1502) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1458) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [na:1.8.0_65]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [na:1.8.0_65]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at java.lang.Thread.run(Thread.java:745) [na:1.8.0_65]\nCaused by: java.lang.IllegalStateException: Can't set AsyncWebRequest with concurrent handling in progress\n    at org.springframework.util.Assert.state(Assert.java:392) ~[spring-core-4.3.0.RC2.jar:4.3.0.RC2]\n    at org.springframework.web.context.request.async.WebAsyncManager.setAsyncWebRequest(WebAsyncManager.java:108) ~[spring-web-4.3.0.RC2.jar:4.3.0.RC2]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:813) ~[spring-webmvc-4.3.0.RC2.jar:4.3.0.RC2]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:738) ~[spring-webmvc-4.3.0.RC2.jar:4.3.0.RC2]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85) ~[spring-webmvc-4.3.0.RC2.jar:4.3.0.RC2]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963) ~[spring-webmvc-4.3.0.RC2.jar:4.3.0.RC2]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:897) ~[spring-webmvc-4.3.0.RC2.jar:4.3.0.RC2]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:970) ~[spring-webmvc-4.3.0.RC2.jar:4.3.0.RC2]\n    ... 24 common frames omitted\n\nCan't set AsyncWebRequest with concurrent handling in progress\n</code></pre>\n\n<p>I cannot find any information on this type of error. I was trying to use gatling to run test. Could be that the problem? Because I guess if I was to use correctly a <code>DeferredResult</code> I need to use a client that supports async.</p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 3827, "user_id": 743716, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Okvki.png?s=128&g=1", "display_name": "Rafal G.", "link": "https://stackoverflow.com/users/743716/rafal-g"}, "is_accepted": false, "score": 1, "last_activity_date": 1466062083, "creation_date": 1466062083, "answer_id": 37852571, "question_id": 37852390, "link": "https://stackoverflow.com/questions/37852390/how-to-use-volatile-in-kotlin/37852571#37852571", "title": "How to use volatile in Kotlin", "body": "<p>Kotlin does not have a <code>volatile</code> keyword but an annotation: <code>@Volatile</code> (<a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/-volatile/\" rel=\"nofollow\">https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/-volatile/</a>)</p>\n"}, {"comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1466081735, "post_id": 37852621, "comment_id": 63176872, "body": "the annotation should be on the same line, I think"}, {"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1466091867, "post_id": 37852621, "comment_id": 63184748, "body": "@voddan is that some recommended Kotlin style guide?"}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 19, "last_activity_date": 1466092143, "last_edit_date": 1466092143, "creation_date": 1466062252, "answer_id": 37852621, "question_id": 37852390, "link": "https://stackoverflow.com/questions/37852390/how-to-use-volatile-in-kotlin/37852621#37852621", "title": "How to use volatile in Kotlin", "body": "<p>You can mark a property as <code>volatile</code> with <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/-volatile/\">@Volatile</a> annotation:</p>\n\n<pre><code>@Volatile var name:String = \"stack\"\n</code></pre>\n\n<p>The resulting field declaration is equivalent to Java's:</p>\n\n<pre><code>private volatile java.lang.String name;\n</code></pre>\n\n<p>As per the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/-volatile/\">@Volatile</a> docs:</p>\n\n<blockquote>\n  <p>Marks the JVM backing field of the annotated property as volatile,\n  meaning that writes to this field are immediately made visible to\n  other threads.</p>\n</blockquote>\n"}], "owner": {"reputation": 1284, "user_id": 6233653, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3iNsk.jpg?s=128&g=1", "display_name": "Ant20", "link": "https://stackoverflow.com/users/6233653/ant20"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5937, "favorite_count": 1, "accepted_answer_id": 37852621, "answer_count": 2, "score": 10, "last_activity_date": 1531145362, "creation_date": 1466061534, "last_edit_date": 1531145362, "question_id": 37852390, "link": "https://stackoverflow.com/questions/37852390/how-to-use-volatile-in-kotlin", "title": "How to use volatile in Kotlin", "body": "<p>I tried something like this:</p>\n\n<pre><code>private volatile var instanceState: InstanceState = InstanceState.starts\n\nError:  'Expected member declaration'\n</code></pre>\n\n<p>and like this:</p>\n\n<pre><code>private volatile var instanceState: InstanceState = InstanceState.starts\n\nError:  'Property getter or setter expected'\n</code></pre>\n\n<p>Volatile not supported on Kotlin ?</p>\n"}]