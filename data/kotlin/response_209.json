[{"tags": ["android", "kotlin", "android-alertdialog", "dismiss"], "comments": [{"owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "edited": false, "score": 0, "creation_date": 1547076310, "post_id": 54119544, "comment_id": 95072157, "body": "Does <code>alertDialog.dismiss()</code> compile?"}, {"owner": {"reputation": 36, "user_id": 8468538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08afc6b618e7f179cec9f65985f39439?s=128&d=identicon&r=PG&f=1", "display_name": "randbo", "link": "https://stackoverflow.com/users/8468538/randbo"}, "reply_to_user": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "edited": false, "score": 0, "creation_date": 1547076828, "post_id": 54119544, "comment_id": 95072280, "body": "no it doesnt compile i just left it in there for the example."}, {"owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "edited": false, "score": 0, "creation_date": 1547076857, "post_id": 54119544, "comment_id": 95072293, "body": "See my answer..."}, {"owner": {"reputation": 36, "user_id": 8468538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08afc6b618e7f179cec9f65985f39439?s=128&d=identicon&r=PG&f=1", "display_name": "randbo", "link": "https://stackoverflow.com/users/8468538/randbo"}, "reply_to_user": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "edited": false, "score": 0, "creation_date": 1547077335, "post_id": 54119544, "comment_id": 95072386, "body": "again thank you very much @forpas."}], "answers": [{"tags": [], "owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "is_accepted": true, "score": 1, "last_activity_date": 1547076620, "creation_date": 1547076620, "answer_id": 54119967, "question_id": 54119544, "link": "https://stackoverflow.com/questions/54119544/how-to-close-alertdialog-with-keyboard-enter/54119967#54119967", "title": "How to close AlertDialog with keyboard Enter?", "body": "<p>You have declared <code>alertDialog</code> as <code>AlertDialog.Builder</code> and not <code>AlertDialog</code>.  <br/>\nThere is no <code>dismiss()</code> method for <code>AlertDialog.Builder</code>.  <br/>\nChange:</p>\n\n<pre><code>val alertDialog = AlertDialog.Builder(this@MainActivity)\n</code></pre>\n\n<p>to </p>\n\n<pre><code>val alertDialog = AlertDialog.Builder(this@MainActivity).create()\n</code></pre>\n\n<p>and</p>\n\n<pre><code>alertDialog.setView(input).show()\n</code></pre>\n\n<p>to</p>\n\n<pre><code>alertDialog.setView(input)\nalertDialog.show()\n</code></pre>\n"}], "owner": {"reputation": 36, "user_id": 8468538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08afc6b618e7f179cec9f65985f39439?s=128&d=identicon&r=PG&f=1", "display_name": "randbo", "link": "https://stackoverflow.com/users/8468538/randbo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 0, "accepted_answer_id": 54119967, "answer_count": 1, "score": 0, "last_activity_date": 1563264884, "creation_date": 1547074237, "last_edit_date": 1563264884, "question_id": 54119544, "link": "https://stackoverflow.com/questions/54119544/how-to-close-alertdialog-with-keyboard-enter", "title": "How to close AlertDialog with keyboard Enter?", "body": "<p>Currently when i enter text in the editText field and hit enter on the keyboard it changes my text as intended but the AlertDialog stays on screen as well as the keyboard. Is there a way i can close the Alert and keyboard when i hit enter? <code>alertDialog.dismiss()</code> or <code>alertDialog.close()</code> does not work for me. Thanks for your time.</p>\n\n<pre><code>(1..912).forEach {\n        val id = resources.getIdentifier(\"Price$it\", \"id\", packageName)\n        val tv = findViewById&lt;TextView&gt;(id)\n        tv.setOnLongClickListener {\n\n            //Alert Window\n            val alertDialog = AlertDialog.Builder(this@MainActivity)\n            alertDialog.setTitle(\"NEW PRICE\")\n            val input = EditText(this@MainActivity)\n            //Alert Submit on Enter\n            input.setOnKeyListener { v, keyCode, event -&gt;\n                if (event.action == KeyEvent.ACTION_DOWN &amp;&amp; keyCode == KeyEvent.KEYCODE_ENTER) {\n                    // Input changes text\n                    tv.text = input.text\n                    when {\n                        tv.text.startsWith(\"-\") -&gt; tv.setTextColor(Color.RED)\n                        tv.text.startsWith(\"+\") -&gt; tv.setTextColor(Color.GREEN)\n                    else -&gt; {\n                        tv.text = \"_\"\n                        tv.setTextColor(Color.DKGRAY)\n                    }\n                    }\n                    // Close Alert Window\n                    alertDialog.dismiss()\n\n\n                    // Save Price Table\n                }\n                false\n            }\n\n\n            val lp = LinearLayout.LayoutParams(\n                LinearLayout.LayoutParams.MATCH_PARENT,\n                LinearLayout.LayoutParams.MATCH_PARENT\n            )\n            input.layoutParams = lp\n            alertDialog.setView(input).show()\n            return@setOnLongClickListener true\n\n        }\n    }\n</code></pre>\n"}, {"tags": ["android", "animation", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "is_accepted": true, "score": 0, "last_activity_date": 1547071065, "creation_date": 1547071065, "answer_id": 54118973, "question_id": 54118874, "link": "https://stackoverflow.com/questions/54118874/custom-animation-android/54118973#54118973", "title": "Custom Animation Android", "body": "<p>First add this library</p>\n\n<pre><code>compile 'com.bartoszlipinski:viewpropertyobjectanimator:1.4.5'\n</code></pre>\n\n<p>Then you need the following extension functions:</p>\n\n<pre><code>fun View.objectAnimate() = ViewPropertyObjectAnimator.animate(this)\n\nprivate typealias OnMeasuredCallback = (view: View, width: Int, height: Int) -&gt; Unit\n\ninline fun View.waitForMeasure(crossinline callback: OnMeasuredCallback) {\n    val view = this\n    val width = view.getWidth()\n    val height = view.getHeight()\n\n    if (width &gt; 0 &amp;&amp; height &gt; 0) {\n        callback(view, width, height)\n        return\n    }\n\n    view.getViewTreeObserver().addOnPreDrawListener(object : ViewTreeObserver.OnPreDrawListener {\n        override fun onPreDraw(): Boolean {\n            val observer = view.getViewTreeObserver()\n            if (observer.isAlive()) {\n                observer.removeOnPreDrawListener(this)\n            }\n\n            callback(view, view.getWidth(), view.getHeight())\n\n            return true\n        }\n    })\n}\n\nfun animateTogether(vararg animators: Animator) = AnimatorSet().apply {\n    playTogether(*animators)\n}\n\n\ninline fun createAnimatorListener(\n    crossinline onAnimationEnd: (Animator) -&gt; Unit = {},\n    crossinline onAnimationStart: (Animator) -&gt; Unit = {},\n    crossinline onAnimationCancel: (Animator) -&gt; Unit = {},\n    crossinline onAnimationRepeat: (Animator) -&gt; Unit = {}\n) = object : Animator.AnimatorListener {\n    override fun onAnimationRepeat(animation: Animator) = onAnimationRepeat(animation)\n\n    override fun onAnimationEnd(animation: Animator) = onAnimationEnd(animation)\n\n    override fun onAnimationCancel(animation: Animator) = onAnimationCancel(animation)\n\n    override fun onAnimationStart(animation: Animator) = onAnimationStart(animation)\n}\n\ninline fun AnimatorSet.onAnimationEnd(crossinline onAnimationEnd: (Animator) -&gt; Unit): AnimatorSet = apply {\n    addListener(createAnimatorListener(onAnimationEnd = onAnimationEnd))\n}\n\nfun View.animateFadeOut(duration: Long = 325): Animator = run {\n    alpha = 1f\n    objectAnimate()\n        .alpha(0f)\n        .setDuration(duration)\n        .get()\n}\n\nfun View.animateFadeIn(duration: Long = 325): Animator = run {\n    alpha = 0f\n    objectAnimate()\n        .alpha(1f)\n        .setDuration(duration)\n        .get()\n}\n\nprivate fun View.animateTranslateXBy(from: Int, by: Int, duration: Long = 325): Animator = run {\n    translationX = from.toFloat()\n    objectAnimate()\n        .translationXBy(by.toFloat())\n        .setDuration(duration)\n        .get()\n}\n\nprivate fun View.animateTranslateYBy(from: Int, by: Int, duration: Long = 325): Animator = run {\n    translationY = from.toFloat()\n    objectAnimate()\n        .translationYBy(by.toFloat())\n        .setDuration(duration)\n        .get()\n}\n\nfun View.animateTranslateIn(width: Int, direction: Int, duration: Long = 325): Animator =\n    animateTranslateXBy(\n        from = direction * width,\n        by = (-1) * direction * width,\n        duration = duration\n    )\n\nfun View.animateTranslateOut(width: Int, direction: Int, duration: Long = 325): Animator =\n    animateTranslateXBy(\n        from = 0,\n        by = (-1) * direction * width,\n        duration = duration\n    )\n\n// also translateInFromTop, translateInFromBottom, translateOutToTop, translateOutToBottom\n</code></pre>\n\n<p>Then you just need to code the animation. It kinda looks like this:</p>\n\n<pre><code>newLayout.waitForMeasure { _, _, _ -&gt; \n    animateTogether(\n        topText.translateInFromTop(),\n        imageOfBus.translateInFromTop().apply {\n            startDelay = 325L\n        },\n        bottomText.translateInFromBottom().apply {\n            startDelay = 500L\n        },\n        bottomButton1.translateInFromBottom().apply {\n            startDelay = 550L\n        },\n        bottomButton2.translateInFromBottom().apply {\n            startDelay = 600L\n        },\n        bottomButton3.translateInFromBottom().apply {\n            startDelay = 650L\n        },\n    ).onFinish {\n       // ...\n    }.start()\n}\n</code></pre>\n\n<p>Blurring is actually not supported on Android, like at all, except with RenderScript, so that is \"left as homework\" (i have no idea what you can do to make that happen).</p>\n\n<p>Fading in a <code>#80000000</code> background is easy, the box blur is tricky.</p>\n\n<p>Also I didn't add pseudocode for everything, but hopefully this is enough to start out.</p>\n"}], "owner": {"reputation": 1, "user_id": 8814130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5d846784706e2cc19ecf94d05932e2d?s=128&d=identicon&r=PG&f=1", "display_name": "Typ6uHa", "link": "https://stackoverflow.com/users/8814130/typ6uha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "closed_date": 1547077302, "accepted_answer_id": 54118973, "answer_count": 1, "score": -5, "last_activity_date": 1547071065, "creation_date": 1547070553, "question_id": 54118874, "link": "https://stackoverflow.com/questions/54118874/custom-animation-android", "closed_reason": "Needs more focus", "title": "Custom Animation Android", "body": "<p>I started learn Animation in Android. Please tell me, how to create animation like in video \n<a href=\"https://youtu.be/OgcJxjSnC9I\" rel=\"nofollow noreferrer\">https://youtu.be/OgcJxjSnC9I</a></p>\n"}, {"tags": ["android", "r", "performance", "kotlin"], "comments": [{"owner": {"reputation": 13530, "user_id": 5496177, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/98e2f1facb002b8c7ab2cb041d48b0a1?s=128&d=identicon&r=PG", "display_name": "TheWanderer", "link": "https://stackoverflow.com/users/5496177/thewanderer"}, "edited": false, "score": 1, "creation_date": 1547068530, "post_id": 54118411, "comment_id": 95069457, "body": "I don&#39;t really understand what you&#39;re mapping. What is <code>leadList</code>? How big is it? If you have a large list, it&#39;s going to take a while to map it. Also, this is more of a visual efficiency thing, but Kotlin has an <code>isNullOrBlank()</code> extension method for CharSequence (and String). You can replace <code>it.businessName != null &amp;&amp; it.businessName != &quot;&quot;</code> with <code>!it.businessName.isNullOrBlank()</code>, etc."}, {"owner": {"reputation": 3293, "user_id": 1853785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TJlNB.jpg?s=128&g=1", "display_name": "Omar Mainegra", "link": "https://stackoverflow.com/users/1853785/omar-mainegra"}, "edited": false, "score": 0, "creation_date": 1547068614, "post_id": 54118411, "comment_id": 95069494, "body": "The map function doesn&#39;t look too complex, so I guess the list is huge, instead of processing the whole list, try splitting it batches and process each on demand (i.e. when the user scroll)"}], "owner": {"reputation": 820, "user_id": 2912185, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3993887fb13aa40082b2406d7eb98682?s=128&d=identicon&r=PG&f=1", "display_name": "Dan Anderson", "link": "https://stackoverflow.com/users/2912185/dan-anderson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1547077846, "creation_date": 1547068216, "last_edit_date": 1547077846, "question_id": 54118411, "link": "https://stackoverflow.com/questions/54118411/how-can-i-use-co-routines-to-update-my-adapter-in-chunksinstead-of-all-at-once", "title": "How can I use co-routines to update my adapter in chunks(instead of all at once)?", "body": "<p>EDIT:  I've slightly modified the question thanks to insights in the comments. </p>\n\n<p>So I'm filltering and mapping one list of objects to another list of objects.  The code is here:</p>\n\n<pre><code>val backingData: List&lt;AddLeadViewData&gt; = leadList\n        .filter { it.address.latitude != null || it.address.longitude != null }\n        .map {\n            val name = if (it.businessName != null &amp;&amp; it.businessName != \"\") it.businessName\n            else if (it.primaryContact != null &amp;&amp; it.primaryContact.fullName != null &amp;&amp; it.primaryContact.fullName != \"\") it.primaryContact.fullName\n            else it.status.name ?: \"\"\n            AddLeadViewData(name, it.address.singleLineAddress()\n                    ?: \"\", false, it.status.buttonDrawable, it.id!!, it.status.name, it.address.city, it.address.state, it.address.postalCode)\n        }. \n</code></pre>\n\n<p>This whole sequence is taking an average of 5 seconds which isn't good because the user is waiting for this info.  Some comments suggested I do this in chunks which is easy in Kotlin.  But how can I write a co-routine that will:</p>\n\n<p>fetch data\nthen split the list into chunks\nmap the data (objA to objB) chunk by chunk\nThen on the main thread update the adapter chunk by chunk?</p>\n\n<p>I'm not sure where to start on the co-routine. </p>\n"}, {"tags": ["android", "kotlin", "android-asynctask"], "comments": [{"owner": {"reputation": 7365, "user_id": 4252352, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/6nZz0.jpg?s=128&g=1", "display_name": "Mark Keen", "link": "https://stackoverflow.com/users/4252352/mark-keen"}, "edited": false, "score": 1, "creation_date": 1547066986, "post_id": 54117642, "comment_id": 95068781, "body": "It is not clear from your code the underlying <code>IndexOutOfBoundsException</code>.  Why are you passing the same <code>Int</code> value <code>sign</code> multiple times in your loop? If you are asynchronously mutating something in your <code>CreateLayout</code> (<code>drool</code>) class that is acted upon synchronously in your <code>Activity</code> then you will surely run into problems. You should be using your <code>CreateLayout</code> object supplied in <code>onPostExecute(result: CreateLayout?)</code> which guarantees the async task has completed processing for use with your <code>ViewGroup</code> object <code>insert_point</code>."}, {"owner": {"reputation": 298, "user_id": 6774425, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/390ae89542c8c0ff64450e63e31868e0?s=128&d=identicon&r=PG&f=1", "display_name": "sourlemonaid", "link": "https://stackoverflow.com/users/6774425/sourlemonaid"}, "reply_to_user": {"reputation": 7365, "user_id": 4252352, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/6nZz0.jpg?s=128&g=1", "display_name": "Mark Keen", "link": "https://stackoverflow.com/users/4252352/mark-keen"}, "edited": false, "score": 0, "creation_date": 1547078963, "post_id": 54117642, "comment_id": 95072748, "body": "@MarkKeen thanks! I will look into this and try it!"}, {"owner": {"reputation": 298, "user_id": 6774425, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/390ae89542c8c0ff64450e63e31868e0?s=128&d=identicon&r=PG&f=1", "display_name": "sourlemonaid", "link": "https://stackoverflow.com/users/6774425/sourlemonaid"}, "reply_to_user": {"reputation": 7365, "user_id": 4252352, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/6nZz0.jpg?s=128&g=1", "display_name": "Mark Keen", "link": "https://stackoverflow.com/users/4252352/mark-keen"}, "edited": false, "score": 0, "creation_date": 1547079591, "post_id": 54117642, "comment_id": 95072913, "body": "@MarkKeen my dude, post it as a solution if you want A check. that worked for me."}], "answers": [{"tags": [], "owner": {"reputation": 216, "user_id": 7849042, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FYkf5.png?s=128&g=1", "display_name": "Zafar Hussain", "link": "https://stackoverflow.com/users/7849042/zafar-hussain"}, "is_accepted": false, "score": 0, "last_activity_date": 1547103065, "creation_date": 1547103065, "answer_id": 54123279, "question_id": 54117642, "link": "https://stackoverflow.com/questions/54117642/how-to-set-up-an-async-task-from-an-activity-in-kotlin/54123279#54123279", "title": "How to set up an Async task from an activity in Kotlin", "body": "<pre><code>    package www.binexmining.co.`in`.binexmining.binexmining.uam.view.activity\n\nimport android.app.Activity\nimport android.os.AsyncTask\nimport android.os.Bundle\nimport android.support.annotation.MainThread\nimport kotlinx.android.synthetic.main.row_referraluser.view.*\nimport www.binexmining.co.`in`.binexmining.R\n\nclass AsynTaskKotlinMain : Activity()\n{\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_landing)\n    }\n\n    override fun onResume() {\n        super.onResume()\n        MyAssyn().execute(\"Pre-Executing Param Put here...\",\"Param For Doinbackgroun\")\n    }\n\n}\n\nclass  MyAssyn : AsyncTask&lt;Any, Any, Any&gt;()\n{\n\n    override fun onPreExecute() {\n        super.onPreExecute()\n    }\n\n    override fun doInBackground(vararg params: Any?) {\n        TODO(\"not implemented\") //To change body of created functions use File | Settings | File Templates.\n    }\n\n    override fun onPostExecute(result: Any?) {\n        super.onPostExecute(result)\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 298, "user_id": 6774425, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/390ae89542c8c0ff64450e63e31868e0?s=128&d=identicon&r=PG&f=1", "display_name": "sourlemonaid", "link": "https://stackoverflow.com/users/6774425/sourlemonaid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 4656, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547103065, "creation_date": 1547064918, "last_edit_date": 1547066017, "question_id": 54117642, "link": "https://stackoverflow.com/questions/54117642/how-to-set-up-an-async-task-from-an-activity-in-kotlin", "title": "How to set up an Async task from an activity in Kotlin", "body": "<p>I have an activity that calls a class and runs a function in that class like so:</p>\n\n<pre><code>        for (i in 0 until questions) {\n            droll.droolCalls(sign)\n        }\n</code></pre>\n\n<p>This can sometimes run forever as it has to generate a bunch of random numbers, so I want it to be able to run in the background. I wrote an AsyncTask that looks like this:</p>\n\n<pre><code>class MyAsync(\n    private val droll: CreateLayout,\n    private val questions: Int, private val sign:Int,\n    var progressBar: ProgressBar,\n    var layoutProgress: LinearLayout,\n    var layoutMain: LinearLayout\n) :\n    AsyncTask&lt;String, Int, CreateLayout&gt;() {\n\n\n    var progress = 0\n    override fun doInBackground(vararg params: String?): CreateLayout {\n        for (i in 0 until questions) {\n            droll.droolCalls(sign)\n        }\n        return droll\n    }\n\n    override fun onProgressUpdate(vararg values: Int?) {\n        super.onProgressUpdate(*values)\n        progressBar.incrementProgressBy(progress * 10)\n    }\n\n    override fun onPostExecute(result: CreateLayout?) {\n        super.onPostExecute(result)\n        layoutProgress.visibility = View.GONE\n        layoutMain.visibility = View.VISIBLE\n    }\n\n}\n</code></pre>\n\n<p>However, when i call the drollclass </p>\n\n<p><code>MyAsync(droll, totalQuestions,sign, progressBar, Loading, mainLayout).execute(\"hello\")</code></p>\n\n<p>i get an error from other functions that require drool to run.</p>\n\n<p>this one for example <code>insert_point.addView(droll.makeTextView(numberOfQuestions - 1))</code> gives me a <code>java.lang.IndexOutOfBoundsException: Index: 2, Size: 0</code> error because insert_point not getting the data from droll because the Async didn't run? however if i take it out of the Async the for loop our of the Async it works fine.</p>\n\n<p>the whole structure looks something like this</p>\n\n<pre><code>class mainclass{\n\nMyAsync(droll, totalQuestions,sign, progressBar, Loading, mainLayout).execute(\"hello\")\ninsert_point.addView(droll.makeTextView(numberOfQuestions - 1))\n\n\nclass MyAsync(\n    private val droll: CreateLayout,\n    private val questions: Int, private val sign:Int,\n    var progressBar: ProgressBar,\n    var layoutProgress: LinearLayout,\n    var layoutMain: LinearLayout\n) :\n    AsyncTask&lt;String, Int, CreateLayout&gt;() {\n\n\n    var progress = 0\n    override fun doInBackground(vararg params: String?): CreateLayout {\n        for (i in 0 until questions) {\n            droll.droolCalls(sign)\n        }\n        return droll\n    }\n\n    override fun onProgressUpdate(vararg values: Int?) {\n        super.onProgressUpdate(*values)\n        progressBar.incrementProgressBy(progress * 10)\n    }\n\n    override fun onPostExecute(result: CreateLayout?) {\n        super.onPostExecute(result)\n        layoutProgress.visibility = View.GONE\n        layoutMain.visibility = View.VISIBLE\n    }\n\n}\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["android", "asynchronous", "mvvm", "kotlin", "android-viewmodel"], "comments": [{"owner": {"reputation": 335, "user_id": 6216669, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yG6FpI9K7LM/AAAAAAAAAAI/AAAAAAAAAGI/6vCOilj4n74/photo.jpg?sz=128", "display_name": "Dries", "link": "https://stackoverflow.com/users/6216669/dries"}, "edited": false, "score": 0, "creation_date": 1547103566, "post_id": 54117320, "comment_id": 95078245, "body": "If you run the tasks in your view-model async then you should use something like <code>runOnUiThread</code> in your activity to update the UI and since there is only 1 UI thread the different callbacks won&#39;t interfere with each-other.  I don&#39;t know how you run your async code (tasks, RX Java etc); so hard to give you an answer of how you should handle the result of the tasks."}, {"owner": {"reputation": 562, "user_id": 542218, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/3ee0dd94fef4afafdb6b6906df1bb881?s=128&d=identicon&r=PG", "display_name": "Yahia", "link": "https://stackoverflow.com/users/542218/yahia"}, "reply_to_user": {"reputation": 335, "user_id": 6216669, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yG6FpI9K7LM/AAAAAAAAAAI/AAAAAAAAAGI/6vCOilj4n74/photo.jpg?sz=128", "display_name": "Dries", "link": "https://stackoverflow.com/users/6216669/dries"}, "edited": false, "score": 0, "creation_date": 1547150304, "post_id": 54117320, "comment_id": 95103636, "body": "@Dires maybe my question wasn&#39;t clear enough, I just added additional information at the end"}], "owner": {"reputation": 562, "user_id": 542218, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/3ee0dd94fef4afafdb6b6906df1bb881?s=128&d=identicon&r=PG", "display_name": "Yahia", "link": "https://stackoverflow.com/users/542218/yahia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1547150257, "creation_date": 1547063397, "last_edit_date": 1592644375, "question_id": 54117320, "link": "https://stackoverflow.com/questions/54117320/perform-multiple-async-operations-in-view-model-and-update-view-using-mvvm", "title": "Perform multiple Async operations in View Model and update View using MVVM", "body": "<p>let assume that we have an Activity with 3 hidden buttons, and it has a viewModel which have 3 different operations done in the background. For every operation when it has done it sends a signal to the View to show it's button.</p>\n<blockquote>\n<p>Activity</p>\n</blockquote>\n<pre><code>class MyActivity  : BaseAppCompatActivity()  {\n\n    private lateinit var viewModel: MyViewModel\n\n    //this method called by onCreate\n    override fun initViews(binding: ViewDataBinding) {\n        viewModel = ViewMode()\n    }\n\n    fun WhenEventAHappens() {\n        viewModel.performA()\n    }\n\n    fun WhenEventBHappens() {\n        viewModel.performB()\n    }\n\n    fun WhenEventCHappens() {\n        viewModel.performC()\n    }\n}\n</code></pre>\n<blockquote>\n<p>ViewModel</p>\n</blockquote>\n<pre><code>class MyViewModel  : BaseViewModel()  {\n\n    fun performA(){\n            //Do some staff\n            //Update UI : Show button A\n        }\n\n    fun performB(){\n            //Do some staff\n            //Update UI : Show button B\n        }\n\n    fun performC(){\n            //Do some staff\n            //Update UI : Show button C\n        }\n}   \n</code></pre>\n<p>My question is, I'm sending 3 different signals from ViewModel for View, the call of those signals will not overlaps each other . what is the best solution?</p>\n<blockquote>\n<p>Single Observable with parameters?</p>\n<p>Multiple Observable, one for every operation?</p>\n<p>Others ?</p>\n</blockquote>\n<p>Additional information: the Async tasks are done in the background and all the updates are done in the Main thread, my questions are not about threading ,  it's all about the observers</p>\n"}, {"tags": ["android", "sqlite", "kotlin"], "comments": [{"owner": {"reputation": 786, "user_id": 3885491, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/fouLC.jpg?s=128&g=1", "display_name": "Falco Winkler", "link": "https://stackoverflow.com/users/3885491/falco-winkler"}, "edited": false, "score": 1, "creation_date": 1547063315, "post_id": 54117261, "comment_id": 95067268, "body": "whats the error you get"}, {"owner": {"reputation": 786, "user_id": 3885491, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/fouLC.jpg?s=128&g=1", "display_name": "Falco Winkler", "link": "https://stackoverflow.com/users/3885491/falco-winkler"}, "edited": false, "score": 0, "creation_date": 1547063339, "post_id": 54117261, "comment_id": 95067277, "body": "if TABLE_NAME is input by an end user you need to be careful with sql injection"}, {"owner": {"reputation": 24, "user_id": 10857778, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-j2mudJAOTJg/AAAAAAAAAAI/AAAAAAAAFCk/kYMSgzRzUjk/photo.jpg?sz=128", "display_name": "Arno van Liere", "link": "https://stackoverflow.com/users/10857778/arno-van-liere"}, "reply_to_user": {"reputation": 786, "user_id": 3885491, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/fouLC.jpg?s=128&g=1", "display_name": "Falco Winkler", "link": "https://stackoverflow.com/users/3885491/falco-winkler"}, "edited": false, "score": 0, "creation_date": 1547063389, "post_id": 54117261, "comment_id": 95067297, "body": "i dont get an error, the app simply crashes. TABLE_NAME is an value assigned at the top of the document, so nog userinput here."}, {"owner": {"reputation": 5302, "user_id": 4265739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19cd59393a5b86c48f0da7bd5504c5b8?s=128&d=identicon&r=PG&f=1", "display_name": "leonardkraemer", "link": "https://stackoverflow.com/users/4265739/leonardkraemer"}, "edited": false, "score": 0, "creation_date": 1547063621, "post_id": 54117261, "comment_id": 95067382, "body": "Try <code>&quot;DROP TABLE IF EXISTS&quot;</code>, probably you try to delete a table that was not created yet. Also there should be logcat output."}, {"owner": {"reputation": 24, "user_id": 10857778, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-j2mudJAOTJg/AAAAAAAAAAI/AAAAAAAAFCk/kYMSgzRzUjk/photo.jpg?sz=128", "display_name": "Arno van Liere", "link": "https://stackoverflow.com/users/10857778/arno-van-liere"}, "edited": false, "score": 0, "creation_date": 1547063922, "post_id": 54117261, "comment_id": 95067514, "body": "<code>DROP TABLE IF EXISTS</code> also doesn&#39;t work. Where can I see logcat output?"}, {"owner": {"reputation": 2792, "user_id": 4853835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pDbHU.jpg?s=128&g=1", "display_name": "ygngy", "link": "https://stackoverflow.com/users/4853835/ygngy"}, "edited": false, "score": 0, "creation_date": 1547065169, "post_id": 54117261, "comment_id": 95068015, "body": "@ArnovanLiere copy logcat from android studio and add it here"}, {"owner": {"reputation": 24, "user_id": 10857778, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-j2mudJAOTJg/AAAAAAAAAAI/AAAAAAAAFCk/kYMSgzRzUjk/photo.jpg?sz=128", "display_name": "Arno van Liere", "link": "https://stackoverflow.com/users/10857778/arno-van-liere"}, "edited": false, "score": 0, "creation_date": 1547065218, "post_id": 54117261, "comment_id": 95068028, "body": "how do you get logcat?"}, {"owner": {"reputation": 2792, "user_id": 4853835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pDbHU.jpg?s=128&g=1", "display_name": "ygngy", "link": "https://stackoverflow.com/users/4853835/ygngy"}, "edited": false, "score": 0, "creation_date": 1547065259, "post_id": 54117261, "comment_id": 95068046, "body": "logcat is in bottom of android studio in &quot;android monitor&quot; tab"}, {"owner": {"reputation": 24, "user_id": 10857778, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-j2mudJAOTJg/AAAAAAAAAAI/AAAAAAAAFCk/kYMSgzRzUjk/photo.jpg?sz=128", "display_name": "Arno van Liere", "link": "https://stackoverflow.com/users/10857778/arno-van-liere"}, "edited": false, "score": 0, "creation_date": 1547065267, "post_id": 54117261, "comment_id": 95068050, "body": "I run the app on my phone by the way, emulator doesn&#39;t work, I don&#39;t have hardware acceleration"}, {"owner": {"reputation": 2792, "user_id": 4853835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pDbHU.jpg?s=128&g=1", "display_name": "ygngy", "link": "https://stackoverflow.com/users/4853835/ygngy"}, "edited": false, "score": 1, "creation_date": 1547065315, "post_id": 54117261, "comment_id": 95068075, "body": "plug your mobile to pc and debug your app with android studio"}, {"owner": {"reputation": 24, "user_id": 10857778, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-j2mudJAOTJg/AAAAAAAAAAI/AAAAAAAAFCk/kYMSgzRzUjk/photo.jpg?sz=128", "display_name": "Arno van Liere", "link": "https://stackoverflow.com/users/10857778/arno-van-liere"}, "edited": false, "score": 0, "creation_date": 1547065455, "post_id": 54117261, "comment_id": 95068136, "body": "E/SQLiteLog: (1) near &quot;EXISTSPasswordManager&quot;: syntax error D/AndroidRuntime: Shutting down VM E/AndroidRuntime: FATAL EXCEPTION: main     Process: nl.arnovanliere.www.dbtest, PID: 2269     android.database.sqlite.SQLiteException: near &quot;EXISTSPasswordManager&quot;: syntax error (code 1): , while compiling: DROP TABLE IF EXISTSPasswordManager"}, {"owner": {"reputation": 24, "user_id": 10857778, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-j2mudJAOTJg/AAAAAAAAAAI/AAAAAAAAFCk/kYMSgzRzUjk/photo.jpg?sz=128", "display_name": "Arno van Liere", "link": "https://stackoverflow.com/users/10857778/arno-van-liere"}, "edited": false, "score": 0, "creation_date": 1547065503, "post_id": 54117261, "comment_id": 95068158, "body": "perhaps missed a space after <code>EXISTS</code>?"}, {"owner": {"reputation": 24, "user_id": 10857778, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-j2mudJAOTJg/AAAAAAAAAAI/AAAAAAAAFCk/kYMSgzRzUjk/photo.jpg?sz=128", "display_name": "Arno van Liere", "link": "https://stackoverflow.com/users/10857778/arno-van-liere"}, "edited": false, "score": 0, "creation_date": 1547065549, "post_id": 54117261, "comment_id": 95068175, "body": "nope, thats not the problem. Added space after <code>EXISTS</code>, but the app still crashes"}, {"owner": {"reputation": 2792, "user_id": 4853835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pDbHU.jpg?s=128&g=1", "display_name": "ygngy", "link": "https://stackoverflow.com/users/4853835/ygngy"}, "edited": false, "score": 0, "creation_date": 1547065561, "post_id": 54117261, "comment_id": 95068184, "body": "add stack trace to your question not in comment."}], "answers": [{"comments": [{"owner": {"reputation": 24, "user_id": 10857778, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-j2mudJAOTJg/AAAAAAAAAAI/AAAAAAAAFCk/kYMSgzRzUjk/photo.jpg?sz=128", "display_name": "Arno van Liere", "link": "https://stackoverflow.com/users/10857778/arno-van-liere"}, "edited": false, "score": 0, "creation_date": 1547065774, "post_id": 54117831, "comment_id": 95068283, "body": "PasswordManager is the tablename, so without tablename the query is invalid i guess?"}, {"owner": {"reputation": 2792, "user_id": 4853835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pDbHU.jpg?s=128&g=1", "display_name": "ygngy", "link": "https://stackoverflow.com/users/4853835/ygngy"}, "reply_to_user": {"reputation": 24, "user_id": 10857778, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-j2mudJAOTJg/AAAAAAAAAAI/AAAAAAAAFCk/kYMSgzRzUjk/photo.jpg?sz=128", "display_name": "Arno van Liere", "link": "https://stackoverflow.com/users/10857778/arno-van-liere"}, "edited": false, "score": 0, "creation_date": 1547065839, "post_id": 54117831, "comment_id": 95068315, "body": "@ArnovanLiere sorry i meant adding space"}, {"owner": {"reputation": 24, "user_id": 10857778, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-j2mudJAOTJg/AAAAAAAAAAI/AAAAAAAAFCk/kYMSgzRzUjk/photo.jpg?sz=128", "display_name": "Arno van Liere", "link": "https://stackoverflow.com/users/10857778/arno-van-liere"}, "edited": false, "score": 0, "creation_date": 1547065876, "post_id": 54117831, "comment_id": 95068328, "body": "<code>db.execSQL(&quot;DROP TABLE IF EXISTS  &quot; + TABLE_NAME)</code> still doesn&#39;t work"}, {"owner": {"reputation": 2792, "user_id": 4853835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pDbHU.jpg?s=128&g=1", "display_name": "ygngy", "link": "https://stackoverflow.com/users/4853835/ygngy"}, "reply_to_user": {"reputation": 24, "user_id": 10857778, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-j2mudJAOTJg/AAAAAAAAAAI/AAAAAAAAFCk/kYMSgzRzUjk/photo.jpg?sz=128", "display_name": "Arno van Liere", "link": "https://stackoverflow.com/users/10857778/arno-van-liere"}, "edited": false, "score": 0, "creation_date": 1547065941, "post_id": 54117831, "comment_id": 95068355, "body": "@ArnovanLiere and what is stack trace? you can not correct an error without seeing stack trace unless you know the problem in advance"}, {"owner": {"reputation": 24, "user_id": 10857778, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-j2mudJAOTJg/AAAAAAAAAAI/AAAAAAAAFCk/kYMSgzRzUjk/photo.jpg?sz=128", "display_name": "Arno van Liere", "link": "https://stackoverflow.com/users/10857778/arno-van-liere"}, "edited": false, "score": 0, "creation_date": 1547065966, "post_id": 54117831, "comment_id": 95068365, "body": "It works, thanks!!! Also thanks for showing how to use the logcat, it solved my problem. Thanks @BAHMAN"}], "tags": [], "owner": {"reputation": 2792, "user_id": 4853835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pDbHU.jpg?s=128&g=1", "display_name": "ygngy", "link": "https://stackoverflow.com/users/4853835/ygngy"}, "is_accepted": true, "score": 0, "last_activity_date": 1547065813, "last_edit_date": 1547065813, "creation_date": 1547065697, "answer_id": 54117831, "question_id": 54117261, "link": "https://stackoverflow.com/questions/54117261/how-to-drop-table-in-sqlite-kotlin/54117831#54117831", "title": "How to drop table in SQLite Kotlin", "body": "<p>you have syntax error in SQL:</p>\n\n<pre><code>DROP TABLE IF EXISTSPasswordManager\n</code></pre>\n\n<p>the error word is:</p>\n\n<pre><code>EXISTSPasswordManager\n</code></pre>\n\n<p>add space before <code>PasswordManager</code> and after <code>EXISTS</code></p>\n"}], "owner": {"reputation": 24, "user_id": 10857778, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-j2mudJAOTJg/AAAAAAAAAAI/AAAAAAAAFCk/kYMSgzRzUjk/photo.jpg?sz=128", "display_name": "Arno van Liere", "link": "https://stackoverflow.com/users/10857778/arno-van-liere"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 921, "favorite_count": 0, "closed_date": 1547117963, "accepted_answer_id": 54117831, "answer_count": 1, "score": 0, "last_activity_date": 1547065813, "creation_date": 1547063161, "question_id": 54117261, "link": "https://stackoverflow.com/questions/54117261/how-to-drop-table-in-sqlite-kotlin", "closed_reason": "Not suitable for this site", "title": "How to drop table in SQLite Kotlin", "body": "<p>I want to drop a table in SQLite, but it doesn't work.</p>\n\n<p>My code right now looks like this</p>\n\n<pre><code>val db = this.writableDatabase\ndb.execSQL(\"DROP TABLE \" + TABLE_NAME)\ndb.close()\n</code></pre>\n\n<p>I've tried rawQuery but that doesn't work either. My app crashes when I press a button that uses this function.</p>\n"}, {"tags": ["android", "kotlin", "android-espresso"], "comments": [{"owner": {"reputation": 462, "user_id": 4582676, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kQ_JnGCo6bg/AAAAAAAAAAI/AAAAAAAAABo/bQhDxH-A0JY/photo.jpg?sz=128", "display_name": "Eduard Kornev", "link": "https://stackoverflow.com/users/4582676/eduard-kornev"}, "edited": false, "score": 0, "creation_date": 1582110947, "post_id": 54116938, "comment_id": 106661903, "body": "Have you found the answer? I have the same problem"}], "answers": [{"comments": [{"owner": {"reputation": 571, "user_id": 5127938, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GNrZo.jpg?s=128&g=1", "display_name": "Hayuki", "link": "https://stackoverflow.com/users/5127938/hayuki"}, "edited": false, "score": 0, "creation_date": 1600083995, "post_id": 61404503, "comment_id": 112966852, "body": "Thanks for this suggestion! It&#39;s the only way I managed to get the negative condition to work."}], "tags": [], "owner": {"reputation": 8875, "user_id": 3379437, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/RPALD.png?s=128&g=1", "display_name": "Beloo", "link": "https://stackoverflow.com/users/3379437/beloo"}, "is_accepted": false, "score": 2, "last_activity_date": 1587718168, "creation_date": 1587718168, "answer_id": 61404503, "question_id": 54116938, "link": "https://stackoverflow.com/questions/54116938/how-to-check-that-popup-notification-is-not-displayed-espresso/61404503#61404503", "title": "How to check that popup notification is NOT displayed. Espresso", "body": "<p>Seems that such simple check is impossible with espresso if you have a <code>PopupWindow</code> because of the way the <code>NoMatchingRootException</code> is thrown</p>\n\n<p>You may just catch the exception and complete the test but that's not a good option since throwing and catching <code>NoMatchingRootException</code> consumes a lot of time in a comparison with the default test case. Seems that Espresso is waiting for the Root for a while</p>\n\n<p>For this case is suggest just to give up with espresso here and use <code>UiAutomator</code> for this assertion</p>\n\n<pre><code>val device: UiDevice\n   get() = UiDevice.getInstance(InstrumentationRegistry.getInstrumentation())\n\nfun assertPopupIsNotDisplayed() {\n    device.waitForIdle()\n    assertFalse(device.hasObject(By.text(yourText))))\n}\n\nfun assertPopupIsDisplayed() {\n    device.waitForIdle()\n    assertTrue(device.hasObject(By.text(yourText))))\n}\n</code></pre>\n"}], "owner": {"reputation": 743, "user_id": 4341740, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/028470856b9167909282e874e67dbedc?s=128&d=identicon&r=PG&f=1", "display_name": "Stanly T", "link": "https://stackoverflow.com/users/4341740/stanly-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 545, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1601590697, "creation_date": 1547061734, "question_id": 54116938, "link": "https://stackoverflow.com/questions/54116938/how-to-check-that-popup-notification-is-not-displayed-espresso", "title": "How to check that popup notification is NOT displayed. Espresso", "body": "<p>I have popup notification. My first test checks if that notification is displayed and it passes succesfully. I use next method for this test: </p>\n\n<pre><code>fun viewInNotificationPopupIsDisplayed(viewMatcher: Matcher&lt;View&gt;) {\n    onView(viewMatcher)\n        .inRoot(RootMatchers.isPlatformPopup())\n        .check(ViewAssertions.matches(isDisplayed()))\n}\n</code></pre>\n\n<p>I have a problem with second test case where i have to check that my popup notification has already gone (means it's not displayed anymore).\nSo i'm trying to use next method:</p>\n\n<pre><code>    fun viewInNotificationPopupIsNotDisplayed(viewMatcher: Matcher&lt;View&gt;) {\n        Espresso.onView(viewMatcher)\n            .inRoot(RootMatchers.isPlatformPopup())\n            .check(matches(not(isDisplayed())))\n          //.check(ViewAssertions.doesNotExist())  // doesn't work as well\n    }\n</code></pre>\n\n<p>I get next exception:</p>\n\n<pre><code>android.support.test.espresso.NoMatchingRootException: \nMatcher 'with decor view of type PopupWindow$PopupViewContainer' \ndid not match any of the following roots: \n[Root{application-window-token=android.view.ViewRootImpl$W@bb8371e,\n window-token=android.view.ViewRootImpl$W@bb8371e, has-window-focus=true, \n</code></pre>\n\n<p>Please, can anybody help with this?</p>\n"}, {"tags": ["android", "kotlin", "rx-java2", "deadlock"], "comments": [{"owner": {"reputation": 15609, "user_id": 590790, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2648f806f3af808a2ed537c8e745558e?s=128&d=identicon&r=PG", "display_name": "Steven Jeuris", "link": "https://stackoverflow.com/users/590790/steven-jeuris"}, "edited": false, "score": 0, "creation_date": 1547068620, "post_id": 54116679, "comment_id": 95069495, "body": "I rely on a <code>.window( )</code> in the stream which takes a <code>Flowable.create</code> as a boundary indicator, used to slice up upstream items into the eventual records to be downloaded. This seems as a likely candidate for something to go wrong. Currently investigating."}, {"owner": {"reputation": 15609, "user_id": 590790, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2648f806f3af808a2ed537c8e745558e?s=128&d=identicon&r=PG", "display_name": "Steven Jeuris", "link": "https://stackoverflow.com/users/590790/steven-jeuris"}, "edited": false, "score": 0, "creation_date": 1547116822, "post_id": 54116679, "comment_id": 95084979, "body": "I <a href=\"https://stackoverflow.com/q/52956589/590790\">increased the default buffer size to 130</a>, after which it hangs after 130 emitted records, confirming the problem is related to this parameter."}, {"owner": {"reputation": 15609, "user_id": 590790, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2648f806f3af808a2ed537c8e745558e?s=128&d=identicon&r=PG", "display_name": "Steven Jeuris", "link": "https://stackoverflow.com/users/590790/steven-jeuris"}, "edited": false, "score": 0, "creation_date": 1547472972, "post_id": 54116679, "comment_id": 95193423, "body": "The root cause of my problem turned out <i>not</i> to be a same-pool deadlock, <a href=\"https://github.com/ReactiveX/RxJava/issues/6363\" rel=\"nofollow noreferrer\">but rather a bug in RxJava</a>. However, this question still makes sense, and the bugfix does not really answer it. Therefore, I will keep it around."}], "answers": [{"comments": [{"owner": {"reputation": 15609, "user_id": 590790, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2648f806f3af808a2ed537c8e745558e?s=128&d=identicon&r=PG", "display_name": "Steven Jeuris", "link": "https://stackoverflow.com/users/590790/steven-jeuris"}, "edited": false, "score": 0, "creation_date": 1547108944, "post_id": 54124364, "comment_id": 95080521, "body": "<i>&quot;Why would you want code that deadlocks?&quot;</i> To understand it better. :) The equivalent of a picture says more than a thousand words."}, {"owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "reply_to_user": {"reputation": 15609, "user_id": 590790, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2648f806f3af808a2ed537c8e745558e?s=128&d=identicon&r=PG", "display_name": "Steven Jeuris", "link": "https://stackoverflow.com/users/590790/steven-jeuris"}, "edited": false, "score": 0, "creation_date": 1547113496, "post_id": 54124364, "comment_id": 95082992, "body": "<a href=\"https://github.com/ReactiveX/RxJava/issues?q=is%3Aissue+same+pool+deadlock+is%3Aclosed\" rel=\"nofollow noreferrer\">github.com/ReactiveX/RxJava/&hellip;</a>"}], "tags": [], "owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "is_accepted": false, "score": 1, "last_activity_date": 1547108101, "creation_date": 1547108101, "answer_id": 54124364, "question_id": 54116679, "link": "https://stackoverflow.com/questions/54116679/avoiding-same-pool-deadlocks-when-using-flowable-in-reactive-extensions/54124364#54124364", "title": "Avoiding same-pool deadlocks when using Flowable in Reactive Extensions", "body": "<blockquote>\n  <ol>\n  <li>What is a same-pool deadlock in Reactive Extensions?</li>\n  </ol>\n</blockquote>\n\n<p>RxJava uses single threaded executors in the standard schedulers. When a blocking or eager source is emitting items, it occupies this single thread and even though the downstream requests more, <code>subscribeOn</code> will schedule those requests behind the currently running/blocking code that then never gets notified about the new opportunities.</p>\n\n<blockquote>\n  <p>What would be a minimal code sample to recreate it (on Android)?</p>\n</blockquote>\n\n<p>Why would you want code that deadlocks?</p>\n\n<blockquote>\n  <p>I tried applying .subscribeOn( Schedulers.io(), false )</p>\n</blockquote>\n\n<p>What is your actual flow? You likely applied <code>subscribeOn</code> too far from the source and thus it has no effect. The most reliable is to put it right next to <code>create</code>.</p>\n\n<blockquote>\n  <p>How could I go about debugging this issue, and how/where can it be resolved?</p>\n</blockquote>\n\n<p>Putting <code>doOnNext</code> and <code>doOnRequest</code> at various places and see where signals disappear.</p>\n"}], "owner": {"reputation": 15609, "user_id": 590790, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2648f806f3af808a2ed537c8e745558e?s=128&d=identicon&r=PG", "display_name": "Steven Jeuris", "link": "https://stackoverflow.com/users/590790/steven-jeuris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 313, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547108101, "creation_date": 1547060550, "question_id": 54116679, "link": "https://stackoverflow.com/questions/54116679/avoiding-same-pool-deadlocks-when-using-flowable-in-reactive-extensions", "title": "Avoiding same-pool deadlocks when using Flowable in Reactive Extensions", "body": "<p>While subscribing to a Reactive Extensions <code>Flowable</code> stream, I noticed the stream halts/hangs (no more future items are emitted, and no error is returned) after 128 items have been returned.</p>\n\n<pre><code>val download: Flowable&lt;DownloadedRecord&gt; = sensor.downloadRecords()\ndownload\n    .doOnComplete { Log.i( \"TEST\", \"Finished!\" ) }\n    .subscribe(\n        { record -&gt;\n            Log.i( \"TEST\", \"Got record: ${record.record.id}; left: ${record.recordsLeft}\" )\n        },\n        { error -&gt;\n            Log.i( \"TEST\", \"Error while downloading records: $error\" )\n        } )\n</code></pre>\n\n<p>Most likely, this is related to Reactive Extensions. I discovered <a href=\"http://reactivex.io/RxJava/2.x/javadoc/io/reactivex/Flowable.html\" rel=\"nofollow noreferrer\">the default buffer size of <code>Flowable</code> is set to 128</a>; unlikely to be a coincidence.</p>\n\n<p>While trying to understand what is happening, I ran into the following documentation on <a href=\"http://reactivex.io/RxJava/2.x/javadoc/io/reactivex/Flowable.html#subscribeOn-io.reactivex.Scheduler-boolean-\" rel=\"nofollow noreferrer\"><code>Flowable.subscribeOn</code></a>.</p>\n\n<blockquote>\n  <p>If there is a <code>create(FlowableOnSubscribe, BackpressureStrategy)</code> type source up in the chain, it is recommended to have <code>requestOn</code> false to avoid <strong>same-pool deadlock</strong> because requests may pile up behind an eager/blocking emitter.</p>\n</blockquote>\n\n<p>Although I do not quite understand what a <em>same-pool deadlock</em> is in this situation, it looks like something similar is happening to my stream.</p>\n\n<p><strong>1. What is a <em>same-pool deadlock</em> in Reactive Extensions?</strong> What would be a minimal code sample to recreate it (on Android)?</p>\n\n<p>Currently at a loss, I tried applying <code>.subscribeOn( Schedulers.io(), false )</code> before <code>.subscribe</code>, without really understanding what this does, but my stream still locks up after 128 items have been emitted.</p>\n\n<p><strong>2. How could I go about debugging this issue, and how/where can it be resolved?</strong></p>\n"}, {"tags": ["input", "kotlin", "keyboard", "enter", "submit-button"], "answers": [{"comments": [{"owner": {"reputation": 36, "user_id": 8468538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08afc6b618e7f179cec9f65985f39439?s=128&d=identicon&r=PG&f=1", "display_name": "randbo", "link": "https://stackoverflow.com/users/8468538/randbo"}, "edited": false, "score": 0, "creation_date": 1547064716, "post_id": 54116886, "comment_id": 95067850, "body": "Huge Thanks! now i just need to find a close keyboard function to add to it and a save state."}], "tags": [], "owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "is_accepted": true, "score": 1, "last_activity_date": 1547061863, "last_edit_date": 1547061863, "creation_date": 1547061531, "answer_id": 54116886, "question_id": 54116488, "link": "https://stackoverflow.com/questions/54116488/how-to-listen-for-key-input-from-user/54116886#54116886", "title": "How to listen for Key input from User?", "body": "<p>You can set your custom <code>OnKeyListener</code> for the <code>EditText</code>:</p>\n\n<pre><code>val input = EditText(this@MainActivity)\ninput.setOnKeyListener(View.OnKeyListener { v, keyCode, event -&gt;\n    if (event.action == KeyEvent.ACTION_DOWN &amp;&amp; keyCode == KeyEvent.KEYCODE_ENTER) {\n        // your code here\n        true\n    }\n    false\n})\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 411, "user_id": 3653330, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002401313945/picture?type=large", "display_name": "jackqack", "link": "https://stackoverflow.com/users/3653330/jackqack"}, "is_accepted": false, "score": 1, "last_activity_date": 1547065559, "creation_date": 1547065559, "answer_id": 54117811, "question_id": 54116488, "link": "https://stackoverflow.com/questions/54116488/how-to-listen-for-key-input-from-user/54117811#54117811", "title": "How to listen for Key input from User?", "body": "<p>You need to set <code>OnEditorActionListener</code> for your <code>EditText</code>:</p>\n\n<pre><code>val input = EditText(this@MainActivity)\ninput.setOnEditorActionListener { _, actionId, event -&gt;\n    // If triggered by an enter key, this is the event; otherwise, this is null.\n    // if shift key is down, then we want to insert the '\\n' char in the TextView;\n    if (event == null || event.isShiftPressed) return@setOnEditorActionListener false\n    // TODO: your code goes here\n    return@setOnEditorActionListener true\n}\n</code></pre>\n\n<p>In this example I additionally check that shift isn't pressed. It will work on all devices with any kind of keyboard.</p>\n\n<p><strong>Note 1</strong>. We don't need <code>actionId</code> here, but you still can set different actions for the keyboard (with <code>input.imeOptions = EditorInfo.IME_ACTION_SEND</code> or with xml attribute <code>android:imeOptions=\"actionSend\"</code>) and listener will be called for any kind action on any type of keyboard. <a href=\"https://developer.android.com/training/keyboard-input/style\" rel=\"nofollow noreferrer\">Read Android documentation</a> to learn more about actions.</p>\n\n<p><strong>Note 2</strong>. I made custom wrapper for all this logic that allows me to set enter key listener in the easiest possible way. Check out <a href=\"https://gist.github.com/jackqack/3988fad62ab4532809c9da39ca50ee92\" rel=\"nofollow noreferrer\">this gist</a>.</p>\n\n<pre><code>editText.setOnEnterActionListener {\n    Toast.makeText(context, \"Click\", Toast.LENGTH_SHORT).show()\n}\n</code></pre>\n"}], "owner": {"reputation": 36, "user_id": 8468538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08afc6b618e7f179cec9f65985f39439?s=128&d=identicon&r=PG&f=1", "display_name": "randbo", "link": "https://stackoverflow.com/users/8468538/randbo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1150, "favorite_count": 0, "accepted_answer_id": 54116886, "answer_count": 2, "score": 0, "last_activity_date": 1547065559, "creation_date": 1547059636, "last_edit_date": 1547065371, "question_id": 54116488, "link": "https://stackoverflow.com/questions/54116488/how-to-listen-for-key-input-from-user", "title": "How to listen for Key input from User?", "body": "<p>I managed to get a Alert Dialog to pop up with a editText to handle input from the user. How would i handle the submit process when they hit Enter on the keyboard? I would like to refrain from using a button to submit and change the text. Hopefully i gave enough detail as i am still quite new to this. Thanks for your time.</p>\n\n<p><a href=\"https://i.stack.imgur.com/OPFjy.png\" rel=\"nofollow noreferrer\">Phone App Pic</a></p>\n\n<p>The Alert Dialog:</p>\n\n<pre><code>(1..912).forEach {\n        val id = resources.getIdentifier(\"Price$it\", \"id\", packageName)\n        val tv = findViewById&lt;TextView&gt;(id)\n        tv.setOnLongClickListener {\n\n            //Alert Window\n            val alertDialog = AlertDialog.Builder(this@MainActivity)\n            alertDialog.setTitle(\"NEW PRICE\")\n            val input = EditText(this@MainActivity)\n            val lp = LinearLayout.LayoutParams(\n                LinearLayout.LayoutParams.MATCH_PARENT,\n                LinearLayout.LayoutParams.MATCH_PARENT\n            )\n            input.layoutParams = lp\n            alertDialog.setView(input).show()\n            return@setOnLongClickListener true\n\n        }\n    }\n</code></pre>\n\n<p>UPDATE:</p>\n\n<pre><code>(1..912).forEach {\n        val id = resources.getIdentifier(\"Price$it\", \"id\", packageName)\n        val tv = findViewById&lt;TextView&gt;(id)\n        tv.setOnLongClickListener {\n\n            //Alert Window\n            val alertDialog = AlertDialog.Builder(this@MainActivity)\n            alertDialog.setTitle(\"NEW PRICE\")\n            val input = EditText(this@MainActivity)\n            //Alert Submit on Enter\n            input.setOnKeyListener { v, keyCode, event -&gt;\n                if (event.action == KeyEvent.ACTION_DOWN &amp;&amp; keyCode == KeyEvent.KEYCODE_ENTER) {\n                    // Input changes text\n                    tv.text = input.text\n                    when {\n                        tv.text.startsWith(\"-\") -&gt; tv.setTextColor(Color.RED)\n                        tv.text.startsWith(\"+\") -&gt; tv.setTextColor(Color.GREEN)\n                    else -&gt; {\n                        tv.text = \"_\"\n                        tv.setTextColor(Color.DKGRAY)\n                    }\n                    }\n                    // Hide Keyboard\n                    // Save Price Table\n                }\n                false\n            }\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-notifications"], "answers": [{"tags": [], "owner": {"reputation": 411, "user_id": 3653330, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002401313945/picture?type=large", "display_name": "jackqack", "link": "https://stackoverflow.com/users/3653330/jackqack"}, "is_accepted": true, "score": 1, "last_activity_date": 1547068210, "creation_date": 1547068210, "answer_id": 54118409, "question_id": 54116031, "link": "https://stackoverflow.com/questions/54116031/messagingstyle-not-displaying-you-properly/54118409#54118409", "title": "MessagingStyle Not Displaying &quot;You&quot; Properly", "body": "<p>You must do 2 things:</p>\n\n<ol>\n<li>Pass a You-person to <code>Notification.MessagingStyle</code> constructor, not a recipient.</li>\n<li>Pass a null to every <code>Notification.MessagingStyle.Message</code> from You-person. There is minor issue in Kotlin with that due to new API because it has a type <code>Person</code>, not <code>Person?</code>.</li>\n</ol>\n\n<p>I just checked this code, it works like you want to:</p>\n\n<pre><code>val recipient: Person = Person.Builder().setName(\"Darren\").build()\nval you: Person = Person.Builder().setName(\"You\").build()\nval nullPerson: Person? = null\n\nval messageStyle = Notification.MessagingStyle(you) // pass you-person here\nmessageStyle.addMessage(Notification.MessagingStyle.Message(\"What's up?\", timestamp1, recipient))\nmessageStyle.addMessage(Notification.MessagingStyle.Message(\"Doing great!\", timestamp2, nullPerson)) // pass to null for a message to display `You`\n</code></pre>\n"}], "owner": {"reputation": 1186, "user_id": 1434047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abaa451e2b93ad55c9ff5107be30b5a1?s=128&d=identicon&r=PG", "display_name": "Bink", "link": "https://stackoverflow.com/users/1434047/bink"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 54118409, "answer_count": 1, "score": 0, "last_activity_date": 1547068210, "creation_date": 1547057408, "question_id": 54116031, "link": "https://stackoverflow.com/questions/54116031/messagingstyle-not-displaying-you-properly", "title": "MessagingStyle Not Displaying &quot;You&quot; Properly", "body": "<p>New to Android development and playing with the latest <code>MessagingStyle</code> code. Messages from You are being displayed with the correct icon, but, for the name, I'm expecting You instead of the recipient's name, just like the built-in Messages app. Not sure if this is something Kotlin related or not.</p>\n\n<p>Any thoughts appreciated - <code>compileSdkVersion</code> and <code>targetSdkVersion</code> are both 28.</p>\n\n<p>An example of what I\u2019m seeing is:</p>\n\n<p><a href=\"https://i.stack.imgur.com/R4Oxw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/R4Oxw.png\" alt=\"enter image description here\"></a></p>\n\n<p>Notification methods and related (less important code removed):</p>\n\n<pre><code>fun notifyTest(context: Context, upcoming: UpcomingDetail, top3Sent: List&lt;String&gt;?) {\n    //...\n\n    @TargetApi(Build.VERSION_CODES.P)\n    when (Build.VERSION.SDK_INT) {\n        in 1..27 -&gt; {\n            with(NotificationManagerCompat.from(context)) {\n                notify(upcoming.id.toInt(), legacyNotificationBuilder(\n                        context,\n                        upcoming,\n                        noteIntent,\n                        contentPending,\n                        disablePending,\n                        deletePending,\n                        postponePending,\n                        top3Sent\n                ).build())\n            }\n        }\n        else -&gt; context.getSystemService(NotificationManager::class.java)\n                .notify(upcoming.id.toInt(), notificationBuilder(\n                        context,\n                        upcoming,\n                        noteIntent,\n                        contentPending,\n                        disablePending,\n                        deletePending,\n                        postponePending,\n                        top3Sent\n                ).build())\n    }\n}\n\n@RequiresApi(Build.VERSION_CODES.P)\nprivate fun notificationBuilder(\n        context: Context,\n        upcoming: UpcomingDetail,\n        noteIntent: Intent,\n        contentPending: PendingIntent,\n        deletePending: PendingIntent,\n        disablePending: PendingIntent,\n        postponePending: PendingIntent,\n        top3Sent: List&lt;String&gt;?\n): Notification.Builder {\n    val recipient: android.app.Person = android.app.Person.Builder().setName(\"Darren\").setImportant(true).build()\n    val you: android.app.Person? = null\n\n    val messageStyle = Notification.MessagingStyle(recipient)\n    messageStyle.addMessage(Notification.MessagingStyle.Message(\"What's up?\", Instant.now().minusSeconds(5 * 60).toEpochMilli(), recipient))\n    messageStyle.addMessage(Notification.MessagingStyle.Message(\"Doing great!\", Instant.now().toEpochMilli(), you))\n\n    //...\n\n    return Notification.Builder(context, \"Input\").apply {\n        setSmallIcon(R.drawable.ic_stat)\n        style = messageStyle\n        setAutoCancel(true)\n        setCategory(Notification.CATEGORY_REMINDER)\n        setColor(ContextCompat.getColor(context, R.color.secondaryDarkColor))\n        setContentIntent(contentPending)\n        setDeleteIntent(deletePending)\n        setGroup(\"notifications\")\n        setOnlyAlertOnce(true)\n        setVisibility(Notification.VISIBILITY_PRIVATE)\n        addAction(inputAction)\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "picasso", "extension-function"], "answers": [{"comments": [{"owner": {"reputation": 511, "user_id": 7009800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c968a2c8e98e65b481339b636907d32?s=128&d=identicon&r=PG", "display_name": "Bartek Pacia", "link": "https://stackoverflow.com/users/7009800/bartek-pacia"}, "edited": false, "score": 0, "creation_date": 1547068997, "post_id": 54118000, "comment_id": 95069640, "body": "Thank you, this is exactly what I was looking for!"}], "tags": [], "owner": {"reputation": 686, "user_id": 1968123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d8ced43546846efec1fd41ae1600099?s=128&d=identicon&r=PG", "display_name": "Henning Dodenhof", "link": "https://stackoverflow.com/users/1968123/henning-dodenhof"}, "is_accepted": true, "score": 2, "last_activity_date": 1547066372, "creation_date": 1547066372, "answer_id": 54118000, "question_id": 54115983, "link": "https://stackoverflow.com/questions/54115983/kotlin-modifying-picassos-requestcreator-based-on-extension-function-argument/54118000#54118000", "title": "Kotlin - Modifying Picasso&#39;s RequestCreator based on extension function arguments", "body": "<p>You could use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/also.html\" rel=\"nofollow noreferrer\">Kotlins also function</a>:</p>\n\n<pre><code>fun ImageView.load(resId: Int, centerCrop: Boolean = true, fit: Boolean = true) {\n    Picasso.get()\n        .load(resId)\n        .also { if (centerCrop) it.centerCrop() }\n        .also { if (fit) it.fit() }\n        .into(this)\n}\n</code></pre>\n"}], "owner": {"reputation": 511, "user_id": 7009800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c968a2c8e98e65b481339b636907d32?s=128&d=identicon&r=PG", "display_name": "Bartek Pacia", "link": "https://stackoverflow.com/users/7009800/bartek-pacia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "accepted_answer_id": 54118000, "answer_count": 1, "score": 0, "last_activity_date": 1547066372, "creation_date": 1547057164, "question_id": 54115983, "link": "https://stackoverflow.com/questions/54115983/kotlin-modifying-picassos-requestcreator-based-on-extension-function-argument", "title": "Kotlin - Modifying Picasso&#39;s RequestCreator based on extension function arguments", "body": "<p>I've an extension function to <code>ImageView</code> class. I've implemented some logic on how to load an image according to arguments passed. But here I'm stuck. \nThese <code>fit()</code>, <code>centerCrop()</code> etc. return Picasso's <code>RequestCreator</code>, which I can't even construct (it has package-private constructor) in order to modify it later (based on arguments).\nI just don't know how to do this. The only way I managed to do this is as you can see below (Be warned: your eyes'll start bleeding). I can't find a \"normal\", \"good\" way to do it.</p>\n\n<p>So I'm asking you: how should I approach doing this?</p>\n\n<pre><code>fun ImageView.load(resId: Int, centerCrop: Boolean = true, fit: Boolean = true) {\n\n// Improve this, there must be a better way\n\nif (centerCrop &amp;&amp; fit) {\n    Picasso.get()\n            .load(resId)\n            .fit()\n            .centerCrop()\n            .into(this)\n} else if (centerCrop &amp;&amp; !fit) {\n    Picasso.get()\n            .load(resId)\n            .centerCrop()\n            .into(this)\n} else if (!centerCrop &amp;&amp; fit) {\n    Picasso.get()\n            .load(resId)\n            .fit()\n            .into(this)\n} else if (!centerCrop &amp;&amp; !fit) {\n    Picasso.get()\n            .load(resId)\n            .into(this)\n}\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["android", "firebase", "kotlin", "firebase-cloud-messaging", "token"], "comments": [{"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 1, "creation_date": 1547106091, "post_id": 54115894, "comment_id": 95079252, "body": "You can also check <b><a href=\"https://stackoverflow.com/questions/51594772/how-to-return-a-list-from-firestore-database-as-a-result-of-a-function-in-kotlin/51595202\">this</a></b> out."}], "answers": [{"tags": [], "owner": {"reputation": 33081, "user_id": 4625829, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tw3Uk.png?s=128&g=1", "display_name": "AL.", "link": "https://stackoverflow.com/users/4625829/al"}, "is_accepted": false, "score": 3, "last_activity_date": 1547101173, "creation_date": 1547101173, "answer_id": 54122907, "question_id": 54115894, "link": "https://stackoverflow.com/questions/54115894/kotlin-wrapped-into-a-reference-object-to-be-modified-when-captured-in-a-closur/54122907#54122907", "title": "Kotlin :Wrapped into a reference object to be modified when captured in a closure", "body": "<p>The thing here is that, the first log is inside a listener for an <em>asynchronous</em>. task. So it's probably going like this:</p>\n\n<ol>\n<li>Call <code>grabFcmToken()</code></li>\n<li><code>FirebaseInstanceId.getInstance().instanceId</code> is called. Here, the task to get the instanceId starts. So you also put in a listener. Since this is an asynchronous task, the code doesn't need to wait so it proceeds.</li>\n<li><code>Log.i(\"To be returned token \", s)</code> runs where <code>s</code> is <code>null</code>. NPE here.</li>\n</ol>\n\n<p>I would suggest altering the function to instead return the task or have a listener parameter (first one seems better). Like so:</p>\n\n<pre><code>companion object {\n        fun requestPushToken(): Task&lt;InstanceIdResult&gt; {\n            return FirebaseInstanceId.getInstance().instanceId\n        }\n}\n</code></pre>\n\n<p>Then call it from whichever class you need:</p>\n\n<pre><code>class SampleActivity: AppCompatActivity(){\n\n    YourAppService.requestPushToken().addCompleteListener { task -&gt;\n        if (task.isSuccessful){\n            // TODO: Handle\n        } else {\n            // TODO: Handle\n        }\n    }\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2152, "user_id": 3547515, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/gfppj.jpg?s=128&g=1", "display_name": "Cayce K", "link": "https://stackoverflow.com/users/3547515/cayce-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1567822370, "creation_date": 1567822370, "answer_id": 57830176, "question_id": 54115894, "link": "https://stackoverflow.com/questions/54115894/kotlin-wrapped-into-a-reference-object-to-be-modified-when-captured-in-a-closur/57830176#57830176", "title": "Kotlin :Wrapped into a reference object to be modified when captured in a closure", "body": "<p>So. I had some sort of epiphany after leaving this post. The current answer didn't actually help, but something clicked.</p>\n\n<pre><code>companion object {\n  fun grabFcmToken():String? {\n    var s:String? = null // !!!!! s is defined here\n\n    FirebaseInstanceId.getInstance().\n      instanceId.addOnCompleteListener {task -&gt;\n        if (task.isSuccessful) {\n          s = task.result!!.token // !!!!!! s is redefined inside here\n\n          Log.i(\"token used is \", s)\n        } else {\n          throw Exception(\"Can't get firebase token\")\n        } \n      }\n\n    Log.i(\"To be returned token \", s)\n\n    // !!!!!! s is never changed after the redefine\n    return s\n  }\n}\n</code></pre>\n\n<p>The third set of super excited <code>!!!!</code> is the important set. Because we never update the state of <code>s</code> anywhere else we get this issue. I say issue because I hate when my IDE tells me something isn't right. So I want to know why it thinks that. I almost fully agree with this. BUT. In your case there isn't a real simple way to change this return. I'm not 1000% you went the way I would have with this, but at the same time it looks like it works.</p>\n\n<p>Overall the point is that if you can instead do something along these lines::</p>\n\n<pre><code>instanceId.addOnCompleteListener { task -&gt;\n  val newS = \"s\"\n  if(task.isSuccessful) {\n    newS = task.result!!.token // this might give errors, but I think you get the point\n  }\n\n  return newS\n}\n</code></pre>\n\n<p>the insignificant warning will disappear.</p>\n"}], "owner": {"reputation": 133, "user_id": 9940646, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kJl9AUYnwMU/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq33nGg7vbW5HvgvvN4RwgW4CepYXg/mo/photo.jpg?sz=128", "display_name": "Ankur Ranjan", "link": "https://stackoverflow.com/users/9940646/ankur-ranjan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4323, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1567822370, "creation_date": 1547056801, "last_edit_date": 1547062893, "question_id": 54115894, "link": "https://stackoverflow.com/questions/54115894/kotlin-wrapped-into-a-reference-object-to-be-modified-when-captured-in-a-closur", "title": "Kotlin :Wrapped into a reference object to be modified when captured in a closure", "body": "<p>I am implementing Firebase on android using kotlin.</p>\n\n<p>as the <code>FirebaseInstanceId.getInstance().token</code> is depriciated, I am using the following function inside the companion object of my <code>MyFirebaseMessageService</code> class to get the token:</p>\n\n<pre><code>companion object\n{\n  fun grabFcmToken():String?\n  {\n    var s:String?=null\n    FirebaseInstanceId.getInstance().\n    instanceId.addOnCompleteListener {task -&gt;\n    if (task.isSuccessful)\n     {\n        s=task.result!!.token\n        Log.i(\"token used is \", s)\n     }\n     else\n      {\n        throw Exception(\"Can't get firebase token\")\n      } \n    }\n    Log.i(\"To be returned token \", s)\n    return s\n  }\n}\n</code></pre>\n\n<p>Android Studio highlights <code>s</code> as <code>Wrapped into a reference object to be modified when captured in a closure</code></p>\n\n<p>Upon the execution of <code>grabFcmToken()</code> the first log prints the token successfully, but the second log has a <code>java.lang.NullPointerException: println needs a message</code> indicating that s has the value <code>null</code> and hence it's value is unchanged.</p>\n\n<p>how may i modify <code>s</code> such that the captured token is being reflected in it?</p>\n"}, {"tags": ["android", "kotlin", "android-recyclerview"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8781205"}, "edited": false, "score": 0, "creation_date": 1547058424, "post_id": 54116187, "comment_id": 95065203, "body": "This is not working. It remove 2 last items from array with this code. Example: [1,2,3,4,5]. Before this it showed: [3,4,5]. And now it show: [1,2,3]"}, {"owner": {"reputation": 1037, "user_id": 3243275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IWlSJ.jpg?s=128&g=1", "display_name": "Jason Grife", "link": "https://stackoverflow.com/users/3243275/jason-grife"}, "edited": false, "score": 0, "creation_date": 1547058486, "post_id": 54116187, "comment_id": 95065240, "body": "you also need to update <code>getItemCount</code> to:  <code>override fun getItemCount(): Int {     return flowerList.size + 2 }</code>  To also account for the two hard-coded News and Title views"}], "tags": [], "owner": {"reputation": 1037, "user_id": 3243275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IWlSJ.jpg?s=128&g=1", "display_name": "Jason Grife", "link": "https://stackoverflow.com/users/3243275/jason-grife"}, "is_accepted": true, "score": 0, "last_activity_date": 1547058254, "creation_date": 1547058254, "answer_id": 54116187, "question_id": 54115471, "link": "https://stackoverflow.com/questions/54115471/how-to-get-recyclerview-getitemcount-position-start-from-2-instead-of-0/54116187#54116187", "title": "How to get recyclerView getItemCount - position start from 2 instead of 0", "body": "<p>Incrementing a counter is going to be a problem because onBindViewHolder gets called every time the view gets recycled. Instead, I think you want to change the line </p>\n\n<p>FROM:\n<code>val flower = flowerList[position]</code></p>\n\n<p>TO: \n<code>val flower = flowerList[position - 2] // subtracting two, to account for the first two positions, in the adapter, that are your News and Title views</code></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8781205"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 883, "favorite_count": 0, "accepted_answer_id": 54116187, "answer_count": 1, "score": 1, "last_activity_date": 1547058622, "creation_date": 1547054956, "last_edit_date": 1547058622, "question_id": 54115471, "link": "https://stackoverflow.com/questions/54115471/how-to-get-recyclerview-getitemcount-position-start-from-2-instead-of-0", "title": "How to get recyclerView getItemCount - position start from 2 instead of 0", "body": "<p>I'm trying to connect my recyclerview two different mutableArray and one textView. </p>\n\n<p>It works correctly instead of override fun getItemCount() starts from position 0 instead of 2. All data comes from firestore and is called in MainActivity class</p>\n\n<p>In position 0 i have own adapter for newList and it works correctly, in position 1 i have textview and it works correctly. In position 2 i want to start this flowerList but for somereason it miss 2 first items from my flowerList.</p>\n\n<p><strong>So my question is how i can make my</strong></p>\n\n<pre><code>override fun getItemCount(): Int {\n   return flowerList.size\n}\n</code></pre>\n\n<p><strong>To start from position 2 instead of position 0</strong></p>\n\n<p>Here is my full code for that adapter:</p>\n\n<pre><code>class MainAdapter(val flowerList: MutableList&lt;Flowers&gt;, val newsList: MutableList&lt;News&gt;, val context: Context) : RecyclerView.Adapter&lt;MainAdapter.ViewHolder&gt;() {\n\n    private val TYPE_NEWS_LAYOUT = 0\n    private val TYPE_TITLE_LAYOUT = 1\n    private val TYPE_FLOWERS_LAYOUT = 2\n\n    override fun onCreateViewHolder(parent: ViewGroup, position: Int): ViewHolder {\n        if (position == TYPE_NEWS_LAYOUT) {\n            val newsFeed = LayoutInflater.from(parent.context).inflate(R.layout.main_horizontal_recycler, parent, false)\n            return ViewHolder(newsFeed)\n\n        } else if (position == TYPE_TITLE_LAYOUT) {\n            val textView = LayoutInflater.from(parent.context).inflate(R.layout.item_main_text_recycler, parent, false)\n            return ViewHolder(textView)\n\n        } else {\n            val view = LayoutInflater.from(parent.context).inflate(R.layout.item_main_bottom_recycler, parent, false)\n            return ViewHolder(view)\n        }\n    }\n\n    override fun onBindViewHolder(holder: ViewHolder, position: Int) {\n        if (position == 0) {\n            holder.itemView.main_top_recycler_horizontal.layoutManager = LinearLayoutManager(context, LinearLayoutManager.HORIZONTAL, false)\n            holder.itemView.main_top_recycler_horizontal.adapter = MainHorizontalAdapter(newsList)\n        } else if (position == 1) {\n            holder.middleTitle.text = \"Text here\"\n        } else {\n            val flower = flowerList[position]\n            holder.flowerName.text = flower.flowername\n            Glide.with(context).load(flower.mainimageurl).into(holder.flowerImage)\n        }\n    }\n\n    override fun getItemViewType(position: Int): Int {\n        if (position == 0) {\n            return TYPE_NEWS_LAYOUT\n        } else if (position == 1)\n            return TYPE_TITLE_LAYOUT\n        else\n            return TYPE_FLOWERS_LAYOUT\n    }\n\n    override fun getItemCount(): Int {\n        return flowerList.size\n    }\n\n    class ViewHolder(view: View) : RecyclerView.ViewHolder(view) {\n        val flowerName = view.flower_name\n        val flowerImage = view.flower_image\n        val middleTitle = view.main_recycler_title\n    }\n}\n</code></pre>\n"}, {"tags": ["kotlin", "dagger-2", "dagger"], "answers": [{"tags": [], "owner": {"reputation": 73871, "user_id": 1426891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gFJE8.png?s=128&g=1", "display_name": "Jeff Bowman", "link": "https://stackoverflow.com/users/1426891/jeff-bowman"}, "is_accepted": true, "score": 3, "last_activity_date": 1576436265, "last_edit_date": 1576436265, "creation_date": 1547055588, "answer_id": 54115623, "question_id": 54115182, "link": "https://stackoverflow.com/questions/54115182/dagger2-how-to-use-named-with-bindsinstance/54115623#54115623", "title": "Dagger2 - How to use @Named with @BindsInstance", "body": "<p><strong>Update:</strong> <a href=\"https://github.com/google/dagger/releases/tag/dagger-2.25.2\" rel=\"nofollow noreferrer\" title=\"2.25.2 release notes, point 2\">Dagger 2.25.2</a> has eliminated the need for workaround:</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li><p>Kotlin support</p>\n  \n  <p>ii.  Qualifier annotations on fields can now be understood without\n  The need for @field:MyQualifier (646e033)</p>\n  \n  <p>iii.  @Module object classes no longer need @JvmStatic on the\n  provides methods. (0da2180)</p></li>\n  </ol>\n</blockquote>\n\n<hr>\n\n<p>This doesn't have anything to do with <code>@BindsInstance</code>, but rather the <code>@Named</code> annotations on fields. You can tell from the \"MissingBinding for String\", which would otherwise give you an error about a Named string.</p>\n\n<p>As in Svetlozar Kostadinov's article <a href=\"https://medium.com/@WindRider/correct-usage-of-dagger-2-named-annotation-in-kotlin-8ab17ced6928\" rel=\"nofollow noreferrer\">Correct usage of Dagger 2 @Named annotation in Kotlin</a>, you'll need to clarify to Kotlin that you'd like the annotations to apply to the field.</p>\n\n<pre><code>@field:[Inject Named(\"PreferenceName\")]\nlateinit var prefName : String;\n</code></pre>\n\n<p>As Svetlozar puts it:</p>\n\n<blockquote>\n  <p>The reason is because in Kotlin annotations need to be slightly more complicated in order to work as expected from Java perspective. That\u2019s coming from the fact that one Kotlin element may be a facade of multiple Java elements emitted in the bytecode. For example a Kotlin property is a facade of an underlying Java member variable, a getter and a setter. You annotate the property but what Dagger expects to be annotated is the underlying field.</p>\n</blockquote>\n\n<p>Related: <a href=\"https://stackoverflow.com/q/48442623/1426891\">Dagger 2 constructor injection in kotlin with Named arguments</a></p>\n"}], "owner": {"reputation": 968, "user_id": 5511947, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BDYhnOYieM0/AAAAAAAAAAI/AAAAAAAAC7M/UTSsQXWNTj4/photo.jpg?sz=128", "display_name": "Vairavan", "link": "https://stackoverflow.com/users/5511947/vairavan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1651, "favorite_count": 0, "accepted_answer_id": 54115623, "answer_count": 1, "score": 2, "last_activity_date": 1576436265, "creation_date": 1547053808, "last_edit_date": 1547055608, "question_id": 54115182, "link": "https://stackoverflow.com/questions/54115182/dagger2-how-to-use-named-with-bindsinstance", "title": "Dagger2 - How to use @Named with @BindsInstance", "body": "<p>How is @Named used with @BindsInstance? I have the this component</p>\n\n<pre><code>interface AppComponent : AndroidInjector&lt;MyApplication&gt;{\n    @Component.Builder\n    abstract class Builder : AndroidInjector.Builder&lt;MyApplication&gt;() {\n\n        @BindsInstance\n        abstract fun preferenceName( @Named(\"PreferenceName\") name : String ) : Builder\n    }\n}\n</code></pre>\n\n<p>and trying to inject in MyApplication</p>\n\n<pre><code>@Inject\n@Named(\"PreferenceName\")\nlateinit var prefName : String\n</code></pre>\n\n<p>But it fails with MissingBinding for String. I could resolve this with a module provider but trying to avoid provider for constants.</p>\n"}, {"tags": ["unit-testing", "spring-boot", "kotlin", "junit5"], "answers": [{"comments": [{"owner": {"reputation": 396, "user_id": 10663762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PQiUK.jpg?s=128&g=1", "display_name": "Ctorres", "link": "https://stackoverflow.com/users/10663762/ctorres"}, "edited": false, "score": 0, "creation_date": 1547134414, "post_id": 54130622, "comment_id": 95095255, "body": "Thank you for your answer, but I&#39;m not going to begin a new project. I&#39;ll loose too much time. I just cleaned my pom.xml with dependencies you talked about, but it doesn&#39;t work. If I remove the &quot;ExtendWith&quot; annotation, the injection doesn&#39;t work and I have an UninitializedPropertyAccessException (basically a Kotlin NPE)... Do you have other suggestions?"}, {"owner": {"reputation": 396, "user_id": 10663762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PQiUK.jpg?s=128&g=1", "display_name": "Ctorres", "link": "https://stackoverflow.com/users/10663762/ctorres"}, "edited": false, "score": 0, "creation_date": 1547139095, "post_id": 54130622, "comment_id": 95098194, "body": "Thank you for your help, you eventually lead me to the solution."}], "tags": [], "owner": {"reputation": 5000, "user_id": 1092077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5778521f67d80de0ee3b213e4f159a59?s=128&d=identicon&r=PG", "display_name": "S&#233;bastien Deleuze", "link": "https://stackoverflow.com/users/1092077/s%c3%a9bastien-deleuze"}, "is_accepted": false, "score": 0, "last_activity_date": 1547129790, "creation_date": 1547129790, "answer_id": 54130622, "question_id": 54115130, "link": "https://stackoverflow.com/questions/54115130/how-to-inject-a-spring-bean-in-a-junit-5-test-class-written-in-kotlin/54130622#54130622", "title": "How to inject a Spring bean in a JUnit 5 test class written in Kotlin?", "body": "<p>I guess you have an error in your dependencies. If you generate a new Spring Boot Kotlin project from <a href=\"https://start.spring.io/#!language=kotlin\" rel=\"nofollow noreferrer\">https://start.spring.io/#!language=kotlin</a> then customize your dependencies as following, it will work as expected:</p>\n\n<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n        &lt;artifactId&gt;kotlin-reflect&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n        &lt;artifactId&gt;kotlin-stdlib-jdk8&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;artifactId&gt;junit&lt;/artifactId&gt;\n                &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n        &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n        &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n\n<p>Please also notice that you don't need to specify <code>@ExtendWith(SpringExtension::class)</code> since <code>@SpringBootTest</code> is already meta annotated with this annotation as of Spring Boot 2.1.</p>\n"}, {"tags": [], "owner": {"reputation": 396, "user_id": 10663762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PQiUK.jpg?s=128&g=1", "display_name": "Ctorres", "link": "https://stackoverflow.com/users/10663762/ctorres"}, "is_accepted": true, "score": 1, "last_activity_date": 1547808907, "last_edit_date": 1547808907, "creation_date": 1547139034, "answer_id": 54133398, "question_id": 54115130, "link": "https://stackoverflow.com/questions/54115130/how-to-inject-a-spring-bean-in-a-junit-5-test-class-written-in-kotlin/54133398#54133398", "title": "How to inject a Spring bean in a JUnit 5 test class written in Kotlin?", "body": "<p>I finally found how to correct my problem. My Spring Boot version was initially \"1.5.3\", so I changed it my pom.xml to the \"2.0.2\" version. Now my tests run fine and my bean is correctly injected as expected. Here's the modified part of my pom.xml:</p>\n\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.0.2.RELEASE&lt;/version&gt;\n    &lt;relativePath/&gt;\n&lt;/parent&gt;\n</code></pre>\n\n<p>Everything is fine after modifying the version.\nHere are the usefull dependencies to test with Junit:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n    &lt;exclusions&gt;\n        &lt;exclusion&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n    &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n    &lt;version&gt;5.3.2&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n    &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}], "owner": {"reputation": 396, "user_id": 10663762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PQiUK.jpg?s=128&g=1", "display_name": "Ctorres", "link": "https://stackoverflow.com/users/10663762/ctorres"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2485, "favorite_count": 0, "accepted_answer_id": 54133398, "answer_count": 2, "score": 2, "last_activity_date": 1547808907, "creation_date": 1547053566, "last_edit_date": 1547127639, "question_id": 54115130, "link": "https://stackoverflow.com/questions/54115130/how-to-inject-a-spring-bean-in-a-junit-5-test-class-written-in-kotlin", "title": "How to inject a Spring bean in a JUnit 5 test class written in Kotlin?", "body": "<p>I try to test something in a Kotlin project using JUnit 5 and Spring Boot, but I'm unable to inject a bean in my test class.</p>\n\n<p>I tried many different annotations, but the injection nerver worked... </p>\n\n<p>Here's my test class:</p>\n\n<pre><code>@TestInstance(TestInstance.Lifecycle.PER_CLASS)\n@SpringBootTest\n@ExtendWith(SpringExtension::class)\nclass FooTest {\n\n   @Autowired\n   lateinit var repo: BarRepository\n\n   @BeforeAll\n   fun setup() {\n   }\n\n   @Test\n   fun testToto() {\n   }\n}\n</code></pre>\n\n<p>With this annotations combination, the code raises the following exception:\n <code>java.lang.NoClassDefFoundError:org/springframework/boot/context/properties/source/ConfigurationPropertySource</code>.\nAnd I'm actually unable to find where does this exception come from... I tried to do some research about this exception, but I didn't find anything satisfying...</p>\n"}, {"tags": ["android", "kotlin", "android-arrayadapter"], "comments": [{"owner": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 1, "creation_date": 1547053739, "post_id": 54115090, "comment_id": 95063024, "body": "see <a href=\"https://gist.github.com/pskink/2dd4d17a93caf02ff696533e82f952b0\" rel=\"nofollow noreferrer\">this</a> generic <code>Filterable</code> adapter"}, {"owner": {"reputation": 267, "user_id": 10429466, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-w8tbdscu__c/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWqPX9CJdAYvNscm11o8i9c82gFDg/mo/photo.jpg?sz=128", "display_name": "Projet Sin", "link": "https://stackoverflow.com/users/10429466/projet-sin"}, "reply_to_user": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1547110448, "post_id": 54115090, "comment_id": 95081237, "body": "In what point will this help me ?"}, {"owner": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1547110563, "post_id": 54115090, "comment_id": 95081294, "body": "simply use it as a base class: <code>class MyAdapter extends MatchableArrayAdapter&lt;ComplexData&gt; { ...</code>"}, {"owner": {"reputation": 267, "user_id": 10429466, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-w8tbdscu__c/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWqPX9CJdAYvNscm11o8i9c82gFDg/mo/photo.jpg?sz=128", "display_name": "Projet Sin", "link": "https://stackoverflow.com/users/10429466/projet-sin"}, "reply_to_user": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1547111424, "post_id": 54115090, "comment_id": 95081794, "body": "I&#39;ve tried to implement this. It says : &quot;you must override onBind&quot;, what does &quot;bind&quot; means?"}, {"owner": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1547111731, "post_id": 54115090, "comment_id": 95081962, "body": "do you know how to override methods from the base class? if so, override <code>protected void onBind(T item, View itemView, int position)</code> method and bind your data here, something like <a href=\"https://gist.github.com/pskink/2dd4d17a93caf02ff696533e82f952b0#file-matchablearrayadapter-java-L22\" rel=\"nofollow noreferrer\">this</a>"}, {"owner": {"reputation": 267, "user_id": 10429466, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-w8tbdscu__c/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWqPX9CJdAYvNscm11o8i9c82gFDg/mo/photo.jpg?sz=128", "display_name": "Projet Sin", "link": "https://stackoverflow.com/users/10429466/projet-sin"}, "reply_to_user": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1547113481, "post_id": 54115090, "comment_id": 95082983, "body": "Where should I override ? In my adapter or in matcharrayadapter ?"}, {"owner": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1547114392, "post_id": 54115090, "comment_id": 95083491, "body": "in your class, for example inside <code>MyAdapter</code> - you dont touch <code>MatchableArrayAdapter</code> - it is read only"}, {"owner": {"reputation": 267, "user_id": 10429466, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-w8tbdscu__c/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWqPX9CJdAYvNscm11o8i9c82gFDg/mo/photo.jpg?sz=128", "display_name": "Projet Sin", "link": "https://stackoverflow.com/users/10429466/projet-sin"}, "reply_to_user": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1547115335, "post_id": 54115090, "comment_id": 95084043, "body": "And what kind of code should I add into onBind() ? Cause my logic is in getView() for now"}, {"owner": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 1, "creation_date": 1547115420, "post_id": 54115090, "comment_id": 95084087, "body": "<a href=\"http://pastebin.com/07mBMT0t\" rel=\"nofollow noreferrer\">pastebin.com/07mBMT0t</a>"}, {"owner": {"reputation": 267, "user_id": 10429466, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-w8tbdscu__c/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWqPX9CJdAYvNscm11o8i9c82gFDg/mo/photo.jpg?sz=128", "display_name": "Projet Sin", "link": "https://stackoverflow.com/users/10429466/projet-sin"}, "reply_to_user": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1547117645, "post_id": 54115090, "comment_id": 95085489, "body": "Helpful, it&#39;s working. Now I have to find how to pass complex data (such as jsonarray) in the adapter. Thanks !"}, {"owner": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1547117824, "post_id": 54115090, "comment_id": 95085588, "body": "you pass an array or <code>List</code> in the constructor"}, {"owner": {"reputation": 267, "user_id": 10429466, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-w8tbdscu__c/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWqPX9CJdAYvNscm11o8i9c82gFDg/mo/photo.jpg?sz=128", "display_name": "Projet Sin", "link": "https://stackoverflow.com/users/10429466/projet-sin"}, "reply_to_user": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1547118186, "post_id": 54115090, "comment_id": 95085778, "body": "For now, I&#39;m passing an arrayList with only simple data (1 list row = 1 data in arrayList). I have to display data contained in a nested jsonArray (go is to display data1.1... and data2.1... under name : <code>[{&quot;name&quot;:&quot;name&quot;,&quot;array&quot;:{&quot;sub1&quot;:[[&quot;data1.1.0&quot;,&quot;data1.1.1&quot;,&quot;1&zwnj;&#8203;&quot;],[&quot;data1.2.0&quot;,&quot;dat&zwnj;&#8203;a1.2.1&quot;,&quot;1&quot;]],&quot;sub2&quot;&zwnj;&#8203;:[[&quot;data2.1.0&quot;,&quot;data&zwnj;&#8203;2.1.1&quot;,&quot;1&quot;]]}}]</code>"}], "owner": {"reputation": 267, "user_id": 10429466, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-w8tbdscu__c/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWqPX9CJdAYvNscm11o8i9c82gFDg/mo/photo.jpg?sz=128", "display_name": "Projet Sin", "link": "https://stackoverflow.com/users/10429466/projet-sin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 280, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1547065730, "creation_date": 1547053434, "last_edit_date": 1547065730, "question_id": 54115090, "link": "https://stackoverflow.com/questions/54115090/kotlin-arrayadapter-with-complex-data", "title": "Kotlin : ArrayAdapter with complex data", "body": "<p>I'm want to do this : </p>\n\n<ol>\n<li>Display a list of item in a list view (done)</li>\n<li>Set a background for the even an odd position (done)</li>\n<li>When clicking on an element, toggle subitems related to the clicked element.</li>\n</ol>\n\n<p>As you know, ArrayAdapter by default works with TextView only (as root element).</p>\n\n<p>So how can I achieve this ? (I've seen <a href=\"https://stackoverflow.com/questions/9280965/arrayadapter-requires-the-resource-id-to-be-a-textview-xml-problems\">this</a>  but still a TextView required after changes).</p>\n\n<p>Here's my custom adapter : </p>\n\n<pre><code>    class ListAdapterScolaire (context: Context, resource: Int, list: ArrayList&lt;String&gt;, private val arguments: Bundle?, private val forScol : Boolean) : ArrayAdapter&lt;String&gt;(context, resource, list) {\n\n    private val TAG = ListAdapterScolaire::class.java.simpleName\n\n    override fun getView(position: Int, convertView: View?, parent: ViewGroup): View {\n        val view = super.getView(position, convertView, parent)\n\n        val arret = view.findViewById&lt;TextView&gt;(R.id.arret)\n//        val rootView = view.findViewById&lt;LinearLayout&gt;(R.id.root_View)\n//\n//        val list = getViewsByTag(rootView, \"toToggleAction\")\n//\n//        list.forEach{it -&gt;\n//            it.setOnClickListener{ v: View -&gt;\n//                val viewParent = v.parent\n//                if (viewParent is LinearLayout) {\n//                    val taggedView : View? = viewParent.findViewWithTag&lt;View&gt;(\"toToggle\")\n//\n//                    taggedView?.visibility = when {\n//                        taggedView?.visibility == View.GONE -&gt; View.VISIBLE\n//                        else -&gt; View.GONE\n//                    }\n//                }\n//            }\n//        }\n\n\n        arret.setOnClickListener { //part to code for the toggle\n    }\n\n        if (position % 2 == 1) {\n            view.setBackgroundResource(R.color.colorWhite)\n        } else {\n            view.setBackgroundResource(R.color.grayBackground)\n        }\n        return view\n    }\n</code></pre>\n\n<p>How i call it in my code : </p>\n\n<pre><code>adapterScolaire = ListAdapterScolaire(view.context, R.layout.list_adapter, lignesScolaires, resultArgument, true)\n</code></pre>\n\n<p>And my xml for my item :</p>\n\n<pre><code>    &lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;TextView\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:id=\"@+id/arret\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:textAppearance=\"?android:attr/textAppearanceListItemSmall\"\n    android:gravity=\"center_vertical\"\n    android:paddingStart=\"?android:attr/listPreferredItemPaddingStart\"\n    android:paddingEnd=\"?android:attr/listPreferredItemPaddingEnd\"\n    android:background=\"?android:attr/activatedBackgroundIndicator\"\n    android:minHeight=\"?android:attr/listPreferredItemHeightSmall\"\n    android:layout_margin=\"0dp\"\n    android:text=\"Nom arret\"\n\n    /&gt;\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 2323, "user_id": 5184092, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/TRnWc.jpg?s=128&g=1", "display_name": "luckyging3r", "link": "https://stackoverflow.com/users/5184092/luckyging3r"}, "edited": false, "score": 0, "creation_date": 1547050035, "post_id": 54113666, "comment_id": 95060778, "body": "I don&#39;t know enough about Kotlin to really help but this might get you somewhere <a href=\"https://kotlinlang.org/docs/reference/generics.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/generics.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 6199, "user_id": 2253682, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/skbWe.jpg?s=128&g=1", "display_name": "Adam Hurwitz", "link": "https://stackoverflow.com/users/2253682/adam-hurwitz"}, "edited": false, "score": 0, "creation_date": 1556176961, "post_id": 54114157, "comment_id": 98350120, "body": "The example helped me grasp the concept. To summarize: The <code>Any</code> generic retains type <code>Any</code> whereas <code>T</code> allows the type to change depending on the value assigned."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": false, "score": 6, "last_activity_date": 1550152717, "last_edit_date": 1550152717, "creation_date": 1547050257, "answer_id": 54114157, "question_id": 54113666, "link": "https://stackoverflow.com/questions/54113666/kotlin-extension-functions-difference-between-any-and-generic-t/54114157#54114157", "title": "Kotlin extension functions - Difference between Any? and Generic T?", "body": "<p>The second function gives you an opportunity that is not used in this particular case: it <em>captures</em> the type of the receiver into the type parameter <code>T</code>, so that you may use it somewhere else in the signature, like in the parameter types or the return value type, or in the function body. </p>\n\n<p>As a quite synthetic example, a <code>listOf(this, this)</code> inside the second function would be typed as <code>List&lt;T?&gt;</code>, retaining the knowledge that the items type is the same as the receiver type, while the same expression in the first function would be a <code>List&lt;Any?&gt;</code>.</p>\n\n<p>The first function does not allow you to use the receiver type generically for storing items of this type, accepting additional items of the same type as parameters or using the receiver type in the return value type of the function, while the second function allows all of these.</p>\n\n<p>These functions are equivalent from the runtime perspective, as <a href=\"https://kotlinlang.org/docs/reference/generics.html#type-erasure\" rel=\"nofollow noreferrer\">generics are erased from the JVM bytecode</a> when the code is compiled, so you won't be able to determine the type <code>T</code> at runtime and act depending on it, unless you convert the function to an <a href=\"https://kotlinlang.org/docs/reference/inline-functions.html#reified-type-parameters\" rel=\"nofollow noreferrer\"><code>inline</code> function with a <code>reified</code> type parameter</a>.</p>\n\n<hr>\n\n<p>As a very important special case, capturing the type from a call site into a type parameter allows a higher-order function to accept another function using <code>T</code> in its signature. The standard library has a set of scoping functions (<code>run</code>, <code>apply</code>, <code>let</code>, <code>also</code>) which show the difference.</p>\n\n<p>Suppose that the signature of <code>also</code> did not use generics and looked like this:</p>\n\n<pre><code>fun Any?.also(block: (Any?) -&gt; Unit): Any? { ... }\n</code></pre>\n\n<p>This function can be called on any object, but its signature doesn't show that it's the receiver object that is passed to the <code>block</code> and returned from the function \u2013 the compiler won't be able to ensure type safety and, for example, allow a call to a member of the receiver object without a type check:</p>\n\n<pre><code>val s: String = \"abc\"\n\n// won't compile: `it` is typed as `Any?`, the returned value is `Any?`, too\nval ss1: String = (s + s).also { println(it.length) } \n\n// this will work, but it's too noisy\nval ss2: String = (s + s).also { println((it as String).length) } as String \n</code></pre>\n\n<p>Now, capturing the type parameter is exactly the way to show that it is the same type in all the three places. We modify the signature as follows:</p>\n\n<pre><code>fun &lt;T : Any?&gt; T.also(block: (T) -&gt; Unit): T { ... }\n</code></pre>\n\n<p>And the compiler can now infer the types, knowing that it's the same type <code>T</code> everywhere it appears:</p>\n\n<pre><code>val s: String = \"abc\"\n\n// OK!\nval ss: String = (s + s).also { println(it.length) } \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "is_accepted": false, "score": 1, "last_activity_date": 1547073473, "creation_date": 1547073473, "answer_id": 54119429, "question_id": 54113666, "link": "https://stackoverflow.com/questions/54113666/kotlin-extension-functions-difference-between-any-and-generic-t/54119429#54119429", "title": "Kotlin extension functions - Difference between Any? and Generic T?", "body": "<p>If you run this on the JVM you will get the following</p>\n\n<blockquote>\n  <p>java.lang.ClassFormatError: Duplicate method name&amp;signature in class\n  file ...</p>\n</blockquote>\n\n<p>This is interesting, so from a signature standpoint they are identical.</p>\n\n<p>It strongly depends on your use case, but in most cases you may want to use the generic variant, because the type may be variable but fixed at compile-time. This advantage becomes obvious here:</p>\n\n<pre><code>fun Any?.foo() = this\nfun &lt;T&gt; T?.bar() = this\n\nfun main(args: Array&lt;String&gt;) {\n    val x = 5.foo() // Any?\n    val y = 5.bar() // Int?\n}\n</code></pre>\n\n<p>All properties and functions available on <code>Int?</code> won't be usable for <code>x</code> until I explicitely cast it (to and <code>Int?</code>). <code>y</code> on the other hand \"knows\" that it returned an <code>Int?</code>.</p>\n\n<hr>\n\n<p>In your example it wouldn't make a difference since you will always return a <code>Boolean</code> and as already shown, the signature are the same.</p>\n"}], "owner": {"reputation": 76, "user_id": 10890666, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nqgkKuMC_xA/AAAAAAAAAAI/AAAAAAAAABo/G6KrV0PVW10/photo.jpg?sz=128", "display_name": "SkiFire13", "link": "https://stackoverflow.com/users/10890666/skifire13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 618, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1550152717, "creation_date": 1547048695, "question_id": 54113666, "link": "https://stackoverflow.com/questions/54113666/kotlin-extension-functions-difference-between-any-and-generic-t", "title": "Kotlin extension functions - Difference between Any? and Generic T?", "body": "<p>I was doing some coding for fun and I was wonder which one should I use. Tried both and they gave me the same result. So, what's the difference between the two?</p>\n\n<p>Examples:</p>\n\n<pre><code>fun Any?.foo() = this != null\n\nfun &lt;T&gt; T?.foo() = this != null\n</code></pre>\n\n<p>The actual function is a bit more complicated and it actually does something based on the real type of the object (like a <code>when</code> with some options)</p>\n"}, {"tags": ["java", "macos", "kotlin", "retina-display", "awtrobot"], "comments": [{"owner": {"reputation": 5138, "user_id": 7109162, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/eaf2daca9ef0a1751603bd0f707f0139?s=128&d=identicon&r=PG&f=1", "display_name": "XtremeBaumer", "link": "https://stackoverflow.com/users/7109162/xtremebaumer"}, "edited": false, "score": 2, "creation_date": 1547043126, "post_id": 54111768, "comment_id": 95056159, "body": "Whats the result of <code>Toolkit.getDefaultToolkit().getScreenSize()</code>?"}, {"owner": {"reputation": 5295, "user_id": 2513200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3d4b041c512a4e708a42494eb465b40f?s=128&d=identicon&r=PG", "display_name": "Hulk", "link": "https://stackoverflow.com/users/2513200/hulk"}, "edited": false, "score": 1, "creation_date": 1547043210, "post_id": 54111768, "comment_id": 95056214, "body": "Since Java 9, there is <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.desktop/java/awt/Robot.html#createMultiResolutionScreenCapture(java.awt.Rectangle)\" rel=\"nofollow noreferrer\"><code>Robot.createMultiResolutionScreenCapture</code></a> for the purpose of taking screen captures on displays with scaling transforms. Have you tried that one?"}, {"owner": {"reputation": 265, "user_id": 4336990, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5d59bdf84a70517cf6fec4d65023df19?s=128&d=identicon&r=PG&f=1", "display_name": "Punika", "link": "https://stackoverflow.com/users/4336990/punika"}, "edited": false, "score": 0, "creation_date": 1547045012, "post_id": 54111768, "comment_id": 95057454, "body": "the Toolkit gave 1920*1200"}, {"owner": {"reputation": 265, "user_id": 4336990, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5d59bdf84a70517cf6fec4d65023df19?s=128&d=identicon&r=PG&f=1", "display_name": "Punika", "link": "https://stackoverflow.com/users/4336990/punika"}, "reply_to_user": {"reputation": 5295, "user_id": 2513200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3d4b041c512a4e708a42494eb465b40f?s=128&d=identicon&r=PG", "display_name": "Hulk", "link": "https://stackoverflow.com/users/2513200/hulk"}, "edited": false, "score": 1, "creation_date": 1547045112, "post_id": 54111768, "comment_id": 95057511, "body": "@Hulk no I will check this. Thx"}, {"owner": {"reputation": 265, "user_id": 4336990, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5d59bdf84a70517cf6fec4d65023df19?s=128&d=identicon&r=PG&f=1", "display_name": "Punika", "link": "https://stackoverflow.com/users/4336990/punika"}, "reply_to_user": {"reputation": 5295, "user_id": 2513200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3d4b041c512a4e708a42494eb465b40f?s=128&d=identicon&r=PG", "display_name": "Hulk", "link": "https://stackoverflow.com/users/2513200/hulk"}, "edited": false, "score": 0, "creation_date": 1547225962, "post_id": 54111768, "comment_id": 95132932, "body": "@Hulk <code>Robot.createMultiResolutionScreenCapture</code> returns 3840*2400 But that is still not the right resolution."}, {"owner": {"reputation": 5295, "user_id": 2513200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3d4b041c512a4e708a42494eb465b40f?s=128&d=identicon&r=PG", "display_name": "Hulk", "link": "https://stackoverflow.com/users/2513200/hulk"}, "edited": false, "score": 0, "creation_date": 1547452590, "post_id": 54111768, "comment_id": 95183471, "body": "It should be possible to get the &quot;real&quot; resolution from the <code>GraphicsDevice</code> - along the lines of <a href=\"https://stackoverflow.com/a/40399909/2513200\">this answer to a related question</a>"}], "owner": {"reputation": 265, "user_id": 4336990, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5d59bdf84a70517cf6fec4d65023df19?s=128&d=identicon&r=PG&f=1", "display_name": "Punika", "link": "https://stackoverflow.com/users/4336990/punika"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 168, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1547541771, "creation_date": 1547042103, "last_edit_date": 1547541771, "question_id": 54111768, "link": "https://stackoverflow.com/questions/54111768/taking-a-screenshot-out-of-java-kotlin-app-of-mac-screen-retina-display", "title": "Taking a screenshot out of java/kotlin app of mac screen (Retina Display)", "body": "<p>My aim is to find a specific picture on the screen by taking a screenshot of the whole screen and find the picture (saved in the resources of the app) by comparing the pixels. </p>\n\n<p>The problem I\u00b4m facing at the moment is the part where I take a screenshot of a MacBookPro with Retina display. The resolution is 2880*1800. But with the following code (working fine on windows), I only get a screenshot with 1920*1200.</p>\n\n<pre><code>new Robot().createScreenCapture(new Rectangle(Toolkit.getDefaultToolkit().getScreenSize())\n</code></pre>\n\n<p>Obviously the screen size is wrong but even when I use 2880*1800 hardcoded, the screenshot only is 1920*1200 with black frame around.</p>\n\n<p>Does somebody know how to take the screenshot with the right resolution?</p>\n"}, {"tags": ["memory-management", "kotlin", "kotlin-companion", "object-class"], "comments": [{"owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "edited": false, "score": 0, "creation_date": 1547040665, "post_id": 54110908, "comment_id": 95054736, "body": "Some info about <code>object</code> <a href=\"https://stackoverflow.com/questions/54052761/does-object-in-kotlin-get-garbage-collected/54053195#54053195\" title=\"does object in kotlin get garbage collected\">stackoverflow.com/questions/54052761/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2904, "user_id": 1159507, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e23948e15e918c710ec34483c65d1b93?s=128&d=identicon&r=PG", "display_name": "anber", "link": "https://stackoverflow.com/users/1159507/anber"}, "is_accepted": false, "score": 1, "last_activity_date": 1547043633, "creation_date": 1547043633, "answer_id": 54112205, "question_id": 54110908, "link": "https://stackoverflow.com/questions/54110908/kotlin-memory-allocation-behaviour-for-object-class-and-companion-object/54112205#54112205", "title": "Kotlin Memory allocation behaviour for object class and companion object", "body": "<p>I believe the easiest way to answer you question is to make simple project in Kotlin, than got to <code>Tools - Kotlin - Show Kotlin bytecode</code> in IntelliJ Idea and than <code>Decompile</code> on the opened page - and you will see on what exactly Kotlin code translated.\nFor example you have Kotlin code:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    Test.test()\n}\n\nclass Test {\n\n    companion object TestCompanion{\n        fun test() {\n            println(\"TestCompanion\")\n        }\n    }\n\n}\n</code></pre>\n\n<p>Decompiled result: </p>\n\n<pre><code>public final class MainKt {\n   public static final void main(@NotNull String[] args) {\n      Test.TestCompanion.test();\n   }\n}\n\npublic final class Test {\n   public static final Test.TestCompanion TestCompanion = new Test.TestCompanion();\n\n   public static final class TestCompanion {\n      public final void test() {\n         System.out.println(\"TestCompanion\");\n      }\n   }\n}\n</code></pre>\n"}], "owner": {"reputation": 10194, "user_id": 2624806, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/d83cab7407f779ce96a0a90222b8f729?s=128&d=identicon&r=PG&f=1", "display_name": "CoDe", "link": "https://stackoverflow.com/users/2624806/code"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 416, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1547043633, "creation_date": 1547039330, "question_id": 54110908, "link": "https://stackoverflow.com/questions/54110908/kotlin-memory-allocation-behaviour-for-object-class-and-companion-object", "title": "Kotlin Memory allocation behaviour for object class and companion object", "body": "<p>Kotlin provide a better way to create singleton object and companion object to access class member via class name. Cool this is !!</p>\n\n<p>But how the memory allocation work for both declaration, does this same work like static in java and remain retain till application lifecycle.</p>\n\n<p>I have gone through couple of resource like <strong><a href=\"https://www.reddit.com/r/Kotlin/comments/5tkztz/companion_objects_are_real_objects_too/\" rel=\"nofollow noreferrer\">this</a></strong> and <strong><a href=\"https://blog.indoorway.com/swift-vs-kotlin-the-differences-in-memory-management-860828edf8\" rel=\"nofollow noreferrer\">this</a></strong>, but it did not helped me much. Any guideline !!</p>\n"}, {"tags": ["android", "kotlin", "android-viewpager", "mvp"], "comments": [{"owner": {"reputation": 8266, "user_id": 5305430, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/hxqD2.jpg?s=128&g=1", "display_name": "sushildlh", "link": "https://stackoverflow.com/users/5305430/sushildlh"}, "edited": false, "score": 0, "creation_date": 1547039411, "post_id": 54110583, "comment_id": 95053962, "body": "You can do it using JobsFragment <code>Instance</code> and other Fragments <code>getter</code> method ."}, {"owner": {"reputation": 16268, "user_id": 603270, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cbfe6e57e0fa59928be4898a7be08c5d?s=128&d=identicon&r=PG", "display_name": "shkschneider", "link": "https://stackoverflow.com/users/603270/shkschneider"}, "edited": false, "score": 0, "creation_date": 1547042782, "post_id": 54110583, "comment_id": 95055941, "body": "Use polymorphism with a base abstract Fragment <i>or</i> EventBus mechanisms <i>or</i> ViewModel from Android Architecture Components <i>or</i> share your presenter if you got one for the Activity."}], "answers": [{"tags": [], "owner": {"reputation": 1534, "user_id": 2149453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3da682eb1ffc8757594f5a9893eff12c?s=128&d=identicon&r=PG", "display_name": "Himesh goswami", "link": "https://stackoverflow.com/users/2149453/himesh-goswami"}, "is_accepted": false, "score": 0, "last_activity_date": 1547040054, "creation_date": 1547040054, "answer_id": 54111119, "question_id": 54110583, "link": "https://stackoverflow.com/questions/54110583/how-to-communicate-between-fragment-that-holds-the-viewpager-and-viewpagers-fra/54111119#54111119", "title": "How to communicate between fragment that holds the viewpager and viewpager&#39;s fragments (MVP)?", "body": "<p>Create one Abstract Fragment that extends Fragment. like this</p>\n\n<pre><code>   public abstract BaseChildFragment extends Fragment{ \n      public void onViewPagerPagechange(); \n\n}\n</code></pre>\n\n<p>Make All ChildFragment (JobsFragment , NewJobsFragment  etc) extends BaseChildFragment ,<br>\nOn your Pager Adapter add below code.<br></p>\n\n<pre><code>LruCache&lt;Integer,BaseChildFragment&gt; cache = new LruCache&lt;&gt;(4);\npublic BaseChildFragment getBaseChildFragment(int position){\n   return cache.get(position);\n}\n\n @Override\npublic Fragment getItem(int position) {\n    if (position == JOB) {\n        if (Utility.isEmpty(fragmentProfile)) {\n            jobsFragment = JobsFragment .getInstance()\n            cache.put(position,fragmentProfile );\n        }\n        return jobsFragment ;\n    } else if (position == NEW_JOB) {\n      ......\n        return fragment;\n    }\n    return null;\n}\n</code></pre>\n\n<p>On your Fragment that has View pager AddpageChangeListener like this</p>\n\n<pre><code>viewPager.addOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {\n\n// optional \n@Override\npublic void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) { }\n\n// optional \n@Override\npublic void onPageSelected(int position) {\n BaseChildFragment fragment =   adapter.getBaseChildFragment(position);\nfragmeng.onViewPagerPagechange(); \n//you can invoke presenter logic by calling this method on each child presenter will call your filter (its upto you)\n }\n    // optional \n    @Override\n    public void onPageScrollStateChanged(int state) { }\n\n});\n</code></pre>\n\n<p>This will call your ChildFragment <code>onViewPagerPagechange();</code> method. where you can load your child fragments. you can also get currently selected fragment. and simplest way is that you can get current fragment and check with <code>getInstance();</code> </p>\n"}], "owner": {"reputation": 253, "user_id": 9095728, "user_type": "registered", "profile_image": "https://graph.facebook.com/1640840835983905/picture?type=large", "display_name": "Miruna Radu", "link": "https://stackoverflow.com/users/9095728/miruna-radu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 238, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547040054, "creation_date": 1547038282, "question_id": 54110583, "link": "https://stackoverflow.com/questions/54110583/how-to-communicate-between-fragment-that-holds-the-viewpager-and-viewpagers-fra", "title": "How to communicate between fragment that holds the viewpager and viewpager&#39;s fragments (MVP)?", "body": "<p>I'm building a mvp application and i'm looking for a clean and correct way to communicate between <strong>main fragment</strong> and those <strong>viewpager's fragments</strong>.</p>\n\n<p>More specific,I have :</p>\n\n<ul>\n<li>JobsFragment : fragment which contains the view pager</li>\n<li>NewJobsFragment : one of view pager fragments</li>\n<li>RecommendedJobsFragment : 2rd fragment from viewpager</li>\n<li>SavedJobsFragment : 3rd fragment from viewpager</li>\n</ul>\n\n<p>All viewpager's fragments contain a RecyclerView.Each part uses a MVP structure ( <em>JobsFragment</em> has it's own <em>JobsPresenter</em>,<em>NewJobsFragments</em> has <em>NewJobsPresenter</em> and so on)</p>\n\n<p>User can filter the jobs in each fragment.Those filters can be selected from <em>JobsFragment</em> and when this is happening I need to 'notify' current fragment from viewpager and send those filters to it.</p>\n\n<p>I read about child-parent relationship between presenters but I don't think it's a proper solution.\nI also think about sharing a single presenter for all fragments but it's a lot of code and I guess it won't be readable anymore.</p>\n\n<p>Thanks in advance ! </p>\n"}, {"tags": ["java", "android", "kotlin", "aar"], "comments": [{"owner": {"reputation": 16268, "user_id": 603270, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cbfe6e57e0fa59928be4898a7be08c5d?s=128&d=identicon&r=PG", "display_name": "shkschneider", "link": "https://stackoverflow.com/users/603270/shkschneider"}, "edited": false, "score": 0, "creation_date": 1547039237, "post_id": 54110322, "comment_id": 95053853, "body": "Unclear what you&#39;re asking..."}, {"owner": {"reputation": 1, "user_id": 9387352, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kZtTvd7S90Y/AAAAAAAAAAI/AAAAAAAAFKE/3eW_ENLWh7s/photo.jpg?sz=128", "display_name": "Oguzhan Aydin", "link": "https://stackoverflow.com/users/9387352/oguzhan-aydin"}, "reply_to_user": {"reputation": 16268, "user_id": 603270, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cbfe6e57e0fa59928be4898a7be08c5d?s=128&d=identicon&r=PG", "display_name": "shkschneider", "link": "https://stackoverflow.com/users/603270/shkschneider"}, "edited": false, "score": 0, "creation_date": 1547039629, "post_id": 54110322, "comment_id": 95054082, "body": "I asking how to i added my lib different project and my lib with it 3rd library to be seen by the different project."}], "answers": [{"tags": [], "owner": {"reputation": 286, "user_id": 7761936, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uJ9qQ_qO8bA/AAAAAAAAAAI/AAAAAAAABfI/Sk8vRHWzwEM/photo.jpg?sz=128", "display_name": "aLT", "link": "https://stackoverflow.com/users/7761936/alt"}, "is_accepted": false, "score": 0, "last_activity_date": 1547039445, "last_edit_date": 1547039445, "creation_date": 1547038139, "answer_id": 54110548, "question_id": 54110322, "link": "https://stackoverflow.com/questions/54110322/how-to-create-aar-android-library-with-gradle/54110548#54110548", "title": "How to create *.aar Android library with gradle", "body": "<p>So, I guess you should move your .aar file to lib directory in the project folder (create it if necessary). After that in your build.gradle file in dependency section write like that</p>\n\n<pre><code>dependencies {\n    ...\n    implementation(name: 'your-library-name', ext: 'aar')\n    ...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1622, "user_id": 5324923, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4fqDYeR36ZE/AAAAAAAAAAI/AAAAAAAAADM/WXoZFO7FMd4/photo.jpg?sz=128", "display_name": "Dezso Gabos", "link": "https://stackoverflow.com/users/5324923/dezso-gabos"}, "is_accepted": false, "score": 0, "last_activity_date": 1547039194, "creation_date": 1547039194, "answer_id": 54110862, "question_id": 54110322, "link": "https://stackoverflow.com/questions/54110322/how-to-create-aar-android-library-with-gradle/54110862#54110862", "title": "How to create *.aar Android library with gradle", "body": "<p>If you are planning to release the lib, it will be better not to include the dependent libraries in the packaged aar and instead add the same compile dependencies found in lib build script inside the build script of the app as such:</p>\n\n<pre><code>app build.gradle:\n\ndependencies {\n    compile ':my-lib'\n    compile 'com.android.support:appcompat-v7:24.2.1'\n    compile 'com.facebook.android:facebook-android-sdk:4.14.1'\n    compile 'com.squareup.retrofit2:retrofit:2.3.0'\n    compile 'com.google.code.gson:gson:2.8.1'\n    compile 'io.reactivex.rxjava2:rxandroid:2.0.1'\n    compile 'com.squareup.retrofit2:adapter-rxjava2:2.3.0'\n    compile 'com.google.android.gms:play-services:11.0.4'\n}\n</code></pre>\n\n<p>That way users of your library won't face merging conflicts when they use public libraries like your library does, gradle will automatically resolve them.</p>\n\n<p>If you are looking looking for a better way to include all dependencies in a single library: Don't. Gradle cannot resolve merging conflicts if a aar contains a certain lib packaged inside while the app as well depends on the lib and contains code calling methods from lib</p>\n\n<p>You can read more details here: <a href=\"https://stackoverflow.com/questions/38658378/exclude-jar-library-from-aar\">Exclude jar-library from aar</a> \nAnd here <a href=\"https://stackoverflow.com/questions/46579067/generate-aar-file-with-all-dependencies\">Generate AAR file with all dependencies</a></p>\n"}], "owner": {"reputation": 1, "user_id": 9387352, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kZtTvd7S90Y/AAAAAAAAAAI/AAAAAAAAFKE/3eW_ENLWh7s/photo.jpg?sz=128", "display_name": "Oguzhan Aydin", "link": "https://stackoverflow.com/users/9387352/oguzhan-aydin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 500, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1547039445, "creation_date": 1547037304, "last_edit_date": 1547038664, "question_id": 54110322, "link": "https://stackoverflow.com/questions/54110322/how-to-create-aar-android-library-with-gradle", "title": "How to create *.aar Android library with gradle", "body": "<p>I would like to create my own library .aar library file, and add it to different projects as a dependency in gradle. Also, how can I add *.aar library with own gradle file in local repository?</p>\n"}, {"tags": ["kotlin", "apache-kafka", "apache-kafka-streams"], "answers": [{"comments": [{"owner": {"reputation": 17939, "user_id": 870483, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4c0cf09ba2aac169509746cf29a251a2?s=128&d=identicon&r=PG", "display_name": "Nishu Tayal", "link": "https://stackoverflow.com/users/870483/nishu-tayal"}, "edited": false, "score": 0, "creation_date": 1547045831, "post_id": 54111454, "comment_id": 95058042, "body": "It won&#39;t help because the problem is with <code>.suppress</code> method. For that Key Serde needs to be defined on State Store"}, {"owner": {"reputation": 4925, "user_id": 5950751, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NVQn2.jpg?s=128&g=1", "display_name": "Bartosz Wardzi\u0144ski", "link": "https://stackoverflow.com/users/5950751/bartosz-wardzi%c5%84ski"}, "reply_to_user": {"reputation": 17939, "user_id": 870483, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4c0cf09ba2aac169509746cf29a251a2?s=128&d=identicon&r=PG", "display_name": "Nishu Tayal", "link": "https://stackoverflow.com/users/870483/nishu-tayal"}, "edited": false, "score": 0, "creation_date": 1547049549, "post_id": 54111454, "comment_id": 95060467, "body": "@NishuTayal In my case it was enough. You can read also here: <a href=\"https://stackoverflow.com/questions/54036328/how-does-kafka-stream-send-final-aggregation-with-ktablesuppress\" title=\"how does kafka stream send final aggregation with ktablesuppress\">stackoverflow.com/questions/54036328/&hellip;</a>"}], "tags": [], "owner": {"reputation": 4925, "user_id": 5950751, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NVQn2.jpg?s=128&g=1", "display_name": "Bartosz Wardzi\u0144ski", "link": "https://stackoverflow.com/users/5950751/bartosz-wardzi%c5%84ski"}, "is_accepted": false, "score": 0, "last_activity_date": 1547041090, "creation_date": 1547041090, "answer_id": 54111454, "question_id": 54110206, "link": "https://stackoverflow.com/questions/54110206/kafkastreams-getting-window-final-results/54111454#54111454", "title": "KafkaStreams: Getting Window Final Results", "body": "<p>Add <code>Consumed</code>, when you create stream: <code>builder.stream&lt;String,Double&gt;(inputTopic, Consumed.</code>with<code>(Serdes.String(), Serdes.Double())</code></p>\n"}, {"tags": [], "owner": {"reputation": 17939, "user_id": 870483, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4c0cf09ba2aac169509746cf29a251a2?s=128&d=identicon&r=PG", "display_name": "Nishu Tayal", "link": "https://stackoverflow.com/users/870483/nishu-tayal"}, "is_accepted": false, "score": 5, "last_activity_date": 1547042726, "creation_date": 1547042726, "answer_id": 54111962, "question_id": 54110206, "link": "https://stackoverflow.com/questions/54110206/kafkastreams-getting-window-final-results/54111962#54111962", "title": "KafkaStreams: Getting Window Final Results", "body": "<p>Problem is with the KeySerde. Since <code>WindowedBy</code> operation results in <code>Windowed&lt;String&gt;</code> type key but <code>.suppress()</code> is using a default key type.</p>\n\n<p>Hence you need to define KeySerde on the State store while calling the count method as given below:</p>\n\n<pre><code>      builder.stream&lt;String,Double&gt;inputTopic)\n      .groupByKey()\n      .windowedBy(TimeWindows.of(Duration.ofSeconds(15)))\n      .count(Materialized.&lt;String, Long, WindowStore&lt;Bytes,byte[]&gt;&gt;as(\"count\").withCachingDisabled().withKeySerde(Serdes.String()))\n      .suppress(Suppressed.untilWindowCloses(BufferConfig.unbounded()))\n      .toStream()\n      . print(Printed.toSysOut());\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 183, "user_id": 4783213, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/832893010098737/picture?type=large", "display_name": "Daniel Cull", "link": "https://stackoverflow.com/users/4783213/daniel-cull"}, "edited": false, "score": 0, "creation_date": 1551183705, "post_id": 54115693, "comment_id": 96539795, "body": "Amazing explanation! Thanks for including the info on commit intervals, just made my day!"}], "tags": [], "owner": {"reputation": 626, "user_id": 9872872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f66bad62f46f9d12a57e2fa5068000d?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/9872872/john"}, "is_accepted": true, "score": 19, "last_activity_date": 1547055910, "creation_date": 1547055910, "answer_id": 54115693, "question_id": 54110206, "link": "https://stackoverflow.com/questions/54110206/kafkastreams-getting-window-final-results/54115693#54115693", "title": "KafkaStreams: Getting Window Final Results", "body": "<p>The problem is a confusing asymmetry in the way that Streams automatically wraps explicit serdes during windowing, but does not automatically wrap the default serde. IMHO, this is an oversight that should be corrected, so I've filed: <a href=\"https://issues.apache.org/jira/browse/KAFKA-7806\" rel=\"noreferrer\">https://issues.apache.org/jira/browse/KAFKA-7806</a></p>\n\n<p>As others have noted, the solution is to explicitly set the key serde upstream and not rely on the default key serde. You can either:</p>\n\n<p>Set the serdes on the windowed aggregation with <code>Materialized</code></p>\n\n<pre><code>val builder = StreamsBuilder()\nbuilder.stream&lt;String,Double&gt;(inputTopic)\n        .groupByKey()\n        .windowedBy(TimeWindows.of(Duration.ofSeconds(15)))\n        .count(Materialized.with(Serdes.String(), Serdes.Long()))\n        .suppress(Suppressed.untilWindowCloses(unbounded())))\n        .toStream()\n        .print(Printed.toSysOut())\n</code></pre>\n\n<p>(as Nishu recommended)</p>\n\n<p>(note that it is <em>not</em> necessary to name the <code>count</code> operation, which has the side effect of making it queriable)</p>\n\n<p>Or set the serdes further upstream, for example on the input:</p>\n\n<pre><code>val builder = StreamsBuilder()\nbuilder.stream&lt;String,Double&gt;(inputTopic, Consumed.with(Serdes.String(), Serdes.Double()))\n        .groupByKey()\n        .windowedBy(TimeWindows.of(Duration.ofSeconds(15)))\n        .count()\n        .suppress(Suppressed.untilWindowCloses(unbounded())))\n        .toStream()\n        .print(Printed.toSysOut())\n</code></pre>\n\n<p>(as wardziniak recommended)</p>\n\n<p>The choice is yours; I think in this case it's not too much different in either case. If you were doing a different aggregation than <code>count</code>, you'd probably be setting the value serde via <code>Materialized</code> anyway, so maybe the former would be a more uniform style.</p>\n\n<p>I also noticed that your window definition doesn't have a grace period set. The window close time is defined as <code>window end + grace period</code>, and the default is 24 hours, so you wouldn't see anything emitted from the suppression until 24 hours' worth of data have run through the app.</p>\n\n<p>For your testing effort, I'd recommend trying:</p>\n\n<pre><code>.windowedBy(TimeWindows.of(Duration.ofSeconds(15)).grace(Duration.ZERO))\n</code></pre>\n\n<p>In production, you'll want to select a grace period that balances the amount of event lateness you expect in your stream with the amount of emission promptness you wish to see from the suppression.</p>\n\n<p>One final note, I noticed in your gist that you haven't changed the default caching or commit interval. As a result, you'll notice that the <code>count</code> operator itself will buffer updates for the default 30 seconds before passing them on to suppression. This is a good config for production so you don't create a bottleneck to your local disk or to the Kafka broker. But it might surprise you while you're testing.</p>\n\n<p>Typically for tests (or interactively trying stuff out), I'll disable caching and set the commit interval short for maximum developer sanity:</p>\n\n<pre><code>properties.put(StreamsConfig.CACHE_MAX_BYTES_BUFFERING_CONFIG, 0);\nproperties.put(StreamsConfig.COMMIT_INTERVAL_MS_CONFIG, 100);\n</code></pre>\n\n<p>Sorry about the serde oversight. I hope we get KAFKA-7806 addressed soon.</p>\n\n<p>I hope this helps!</p>\n"}], "owner": {"reputation": 2380, "user_id": 2248405, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a421f00153b682b6bf85ed19c160de42?s=128&d=identicon&r=PG", "display_name": "robie2011", "link": "https://stackoverflow.com/users/2248405/robie2011"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2926, "favorite_count": 4, "accepted_answer_id": 54115693, "answer_count": 3, "score": 6, "last_activity_date": 1550543290, "creation_date": 1547036947, "last_edit_date": 1547056392, "question_id": 54110206, "link": "https://stackoverflow.com/questions/54110206/kafkastreams-getting-window-final-results", "title": "KafkaStreams: Getting Window Final Results", "body": "<p>Is it possible to get <a href=\"https://kafka.apache.org/21/documentation/streams/developer-guide/dsl-api.html#window-final-results\" rel=\"noreferrer\">window final result</a> in Kafka Streams by suppressing the intermediate results.</p>\n\n<p>I can not achieve this goal. What is wrong with my code? </p>\n\n<pre><code>    val builder = StreamsBuilder()\n    builder.stream&lt;String,Double&gt;(inputTopic)\n            .groupByKey()\n            .windowedBy(TimeWindows.of(Duration.ofSeconds(15)))\n            .count()\n            .suppress(Suppressed.untilWindowCloses(unbounded())) // not working)\n            .toStream()\n            .print(Printed.toSysOut())\n</code></pre>\n\n<p>It leads to this error: </p>\n\n<pre><code>Failed to flush state store KSTREAM-AGGREGATE-STATE-STORE-0000000001: \njava.lang.ClassCastException: org.apache.kafka.streams.kstream.Windowed cannot be cast to java.lang.String\n</code></pre>\n\n<p>Code / Error details: <a href=\"https://gist.github.com/robie2011/1caa4772b60b5a6f993e6f98e792a380\" rel=\"noreferrer\">https://gist.github.com/robie2011/1caa4772b60b5a6f993e6f98e792a380</a></p>\n"}, {"tags": ["android", "kotlin", "mvvm", "android-recyclerview", "android-livedata"], "comments": [{"owner": {"reputation": 8306, "user_id": 10271334, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2ijZhRVumwM/AAAAAAAAAAI/AAAAAAAACes/Tjw_JgqObGI/photo.jpg?sz=128", "display_name": "Jeel Vankhede", "link": "https://stackoverflow.com/users/10271334/jeel-vankhede"}, "edited": false, "score": 3, "creation_date": 1547035986, "post_id": 54109820, "comment_id": 95051861, "body": "Observe data in fragment and pass it to adapter or notify it to adapter."}, {"owner": {"reputation": 17465, "user_id": 559850, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/vJfye.jpg?s=128&g=1", "display_name": "styler1972", "link": "https://stackoverflow.com/users/559850/styler1972"}, "edited": false, "score": 0, "creation_date": 1561607239, "post_id": 54109820, "comment_id": 100121624, "body": "Pass LifecycleOwner object to the adapter?"}], "answers": [{"comments": [{"owner": {"reputation": 620, "user_id": 4984561, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f888449116da86c4fd06fd3e8ae69344?s=128&d=identicon&r=PG", "display_name": "mxml", "link": "https://stackoverflow.com/users/4984561/mxml"}, "edited": false, "score": 3, "creation_date": 1595269590, "post_id": 54211521, "comment_id": 111410637, "body": "why you&#39;re creating an instance of your adapter each time the data observed!"}], "tags": [], "owner": {"reputation": 314, "user_id": 4874842, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Mk88WO7hU5Q/AAAAAAAAAAI/AAAAAAAAABg/W9qGoLxl1iE/photo.jpg?sz=128", "display_name": "Mohammad Asheri", "link": "https://stackoverflow.com/users/4874842/mohammad-asheri"}, "is_accepted": true, "score": 4, "last_activity_date": 1547734391, "last_edit_date": 1547734391, "creation_date": 1547620042, "answer_id": 54211521, "question_id": 54109820, "link": "https://stackoverflow.com/questions/54109820/how-to-observe-livedata-in-recyclerview-adapter-in-mvvm-architecture/54211521#54211521", "title": "How to observe LiveData in RecyclerView adapter in MVVM architecture?", "body": "<p>After a full searching in several posts, finally, I found the recommended solution.\nStep 1: declare an interface in your adapter as below:</p>\n\n<pre><code>class AddExpenseLabelAdapter(\n    val items: List&lt;LabelResponse&gt;, \n    val context: Context, \n    val listener: OnLabelClickListener\n) : RecyclerView.Adapter&lt;AddExpenseLabelAdapter.ViewHolder&gt;() {\n\n    interface OnLabelClickListener {\n        fun onLabelDeleteButtonClicked(request : SubCategoryLabelRequest)\n    }\n\n    lateinit var binding: ItemListExpenseAddLabelBinding\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {\n        val inflater = LayoutInflater.from(context)\n        val binding = ItemListExpenseAddLabelBinding.inflate(inflater)\n        this.binding = binding\n        return ViewHolder(binding)\n    }\n\n    override fun onBindViewHolder(holder: ViewHolder, position: Int) {\n        holder.bind(items[position])\n    }\n\n    override fun getItemCount(): Int = items.size\n\n    inner class ViewHolder(val binding: ItemListExpenseAddLabelBinding) : RecyclerView.ViewHolder(binding.root), OnClickListener {\n        lateinit var item: LabelResponse\n        fun bind(item: LabelResponse) {\n            this.item = item\n            binding.itemListLabelLayout.setBackgroundColor(Color.parseColor(\"#\" + item.color))\n            binding.labelResponse = item\n            binding.onClickListener = this\n            binding.executePendingBindings()\n        }\n\n        override fun onClick(view: View) {\n            if (view.id == binding.itemListLabelLayout.id) {\n                val subCategoryLabelRequest = SubCategoryLabelRequest(item.id)\n                listener.onLabelDeleteButtonClicked(subCategoryLabelRequest)\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>step 2: implement the interface in your view and pass it to your adapter like this:</p>\n\n<pre><code>class AddExpenseLabelDialog : DialogFragment(), AddExpenseLabelAdapter.OnLabelClickListener {\n\n    lateinit var binding: DialogAddExpenseLabelBinding\n\n    lateinit var view: Any\n\n    var expenseId: Int = 0\n    var categoryId: Int = 0\n\n    lateinit var application: MyApplication\n\n    lateinit var addExpenseLabelViewModel: AddExpenseLabelViewModel\n\n    fun newInstance(expenseId: Int, categoryId: Int): AddExpenseLabelDialog = \n        AddExpenseLabelDialog().also { fragment -&gt;\n            arguments = Bundle().also { bundle -&gt;\n                bundle.putInt(\"expenseId\", expenseId)\n                bundle.putInt(\"categoryId\", categoryId)\n            }\n        }\n\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n        binding = DataBindingUtil.inflate(layoutInflater, R.layout.dialog_add_expense_label, container, false)\n        addExpenseLabelViewModel = ViewModelProviders.of(this).get(AddExpenseLabelViewModel::class.java)\n        expenseId = arguments!!.getInt(\"expenseId\")\n        categoryId = arguments!!.getInt(\"categoryId\")\n        initialize()\n        view = binding.root\n        return view as View\n    }\n\n    fun initialize() {\n\n        binding.labelRec.layoutManager = LinearLayoutManager(context)\n        addExpenseLabelViewModel.liveData.observe(this, Observer { response -&gt;\n            binding.labelRec.adapter = AddExpenseLabelAdapter(response as ArrayList&lt;LabelResponse&gt;, context!!, this)\n        })\n    }\n\n    override fun onLabelDeleteButtonClicked(request : SubCategoryLabelRequest) {\n        addExpenseLabelViewModel.createExpenseLabel(categoryId, expenseId, request).observe(this, Observer { response -&gt;\n            when (response?.status) {\n                Status.LOADING -&gt; Toast.makeText(activity, \"LOADING\", Toast.LENGTH_SHORT).show()\n                Status.SUCCESS -&gt; {\n                    dismiss()\n                    Toast.makeText(activity, \"SUCCESS\", Toast.LENGTH_SHORT).show()\n                }\n                else -&gt; Toast.makeText(activity, InjectorUtil.convertCodeToMessage(response?.error?.code!!), Toast.LENGTH_SHORT).show()\n            }\n        })\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2278, "user_id": 2149195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wH8P5.jpg?s=128&g=1", "display_name": "RBK", "link": "https://stackoverflow.com/users/2149195/rbk"}, "is_accepted": false, "score": 1, "last_activity_date": 1608709413, "creation_date": 1608709413, "answer_id": 65420635, "question_id": 54109820, "link": "https://stackoverflow.com/questions/54109820/how-to-observe-livedata-in-recyclerview-adapter-in-mvvm-architecture/65420635#65420635", "title": "How to observe LiveData in RecyclerView adapter in MVVM architecture?", "body": "<p>I know it's too late to answer.\nBut I hope it will help other developers searching for a resolution on a similar issue.</p>\n<p>Take a look at <a href=\"https://github.com/RaviKoradiya/LiveAdapter\" rel=\"nofollow noreferrer\">LiveAdapter</a>.</p>\n<p>You just need to add the latest dependency in Gradle.</p>\n<pre><code>dependencies {\n    implementation 'com.github.RaviKoradiya:LiveAdapter:1.3.2-1608532016'\n    // kapt 'com.android.databinding:compiler:GRADLE_PLUGIN_VERSION' // this line only for Kotlin projects\n}\n</code></pre>\n<p>and bind adapter with your RecyclerView</p>\n<pre><code>LiveAdapter(\n            data = liveListOfItems,\n            lifecycleOwner = this@MainActivity,\n            variable = BR.item )\n            .map&lt;Header, ItemHeaderBinding&gt;(R.layout.item_header) {\n                areContentsTheSame { old: Header, new: Header -&gt;\n                    return@areContentsTheSame old.text == new.text\n                }\n            }\n            .map&lt;Point, ItemPointBinding&gt;(R.layout.item_point) {\n                areContentsTheSame { old: Point, new: Point -&gt;\n                    return@areContentsTheSame old.id == new.id\n                }\n            }\n            .into(recyclerview)\n</code></pre>\n<p>That's it. Not need to write extra code for adapter implementation, observe LiveData and notify the adapter.</p>\n"}, {"tags": [], "owner": {"reputation": 2250, "user_id": 1506200, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Mj7rv.jpg?s=128&g=1", "display_name": "flame3", "link": "https://stackoverflow.com/users/1506200/flame3"}, "is_accepted": false, "score": 0, "last_activity_date": 1614087503, "creation_date": 1614087503, "answer_id": 66334226, "question_id": 54109820, "link": "https://stackoverflow.com/questions/54109820/how-to-observe-livedata-in-recyclerview-adapter-in-mvvm-architecture/66334226#66334226", "title": "How to observe LiveData in RecyclerView adapter in MVVM architecture?", "body": "<p>I think that it is ok to use notifyDataSetChanged.\nI have companies as LiveData in my ViewModel. I can observe it in the fragment onCreateView like this</p>\n<pre><code> viewModel.companies.observe(viewLifecycleOwner, {\n        binding.searchResultsRecyclerView.adapter?.notifyDataSetChanged()\n    })\n</code></pre>\n<p>When there is any change on the companies, the recyclerView is updated.</p>\n"}], "owner": {"reputation": 301, "user_id": 7634373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/045a7bd31f21a0425eb37088e5c39f55?s=128&d=identicon&r=PG&f=1", "display_name": "hadi mohammadi", "link": "https://stackoverflow.com/users/7634373/hadi-mohammadi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10354, "favorite_count": 1, "accepted_answer_id": 54211521, "answer_count": 3, "score": 11, "last_activity_date": 1614087503, "creation_date": 1547035724, "last_edit_date": 1612197166, "question_id": 54109820, "link": "https://stackoverflow.com/questions/54109820/how-to-observe-livedata-in-recyclerview-adapter-in-mvvm-architecture", "title": "How to observe LiveData in RecyclerView adapter in MVVM architecture?", "body": "<p>I have a <code>RecyclerView</code> adapter and a button in its items.</p>\n<p>When I click on the button, I want to remove its item from server and after that from <code>RecyclerView</code>.</p>\n<p>I want to do that by observing <code>LiveData</code> (when it removed from server I have to remove it from recycler view thus I need the result of server)</p>\n<p>What is the best practice way to do that - I must observe in the fragment and pass a listener to the adapter and implement that in the fragment and when user clicked on the button call a method in fragment or there is a better way to do that?</p>\n"}, {"tags": ["kotlin", "nullpointerexception"], "comments": [{"owner": {"reputation": 18780, "user_id": 5966775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d03a5259f8169269385188f7c5fb8ed?s=128&d=identicon&r=PG", "display_name": "DVarga", "link": "https://stackoverflow.com/users/5966775/dvarga"}, "edited": false, "score": 0, "creation_date": 1547033974, "post_id": 54109140, "comment_id": 95050641, "body": "Please provide a bit more context - how do you create the instance of User and what do you use to create the JSON string."}, {"owner": {"reputation": 1, "user_id": 8152354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbea3f86d889f215a24f1a9d85bea92d?s=128&d=identicon&r=PG&f=1", "display_name": "wmj", "link": "https://stackoverflow.com/users/8152354/wmj"}, "reply_to_user": {"reputation": 18780, "user_id": 5966775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d03a5259f8169269385188f7c5fb8ed?s=128&d=identicon&r=PG", "display_name": "DVarga", "link": "https://stackoverflow.com/users/5966775/dvarga"}, "edited": false, "score": 0, "creation_date": 1547034341, "post_id": 54109140, "comment_id": 95050854, "body": "I use okhttp\u3001retrofit to get data from a service . but the json string contains null field, but String in Kotlin supposed not to be null"}, {"owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "edited": false, "score": 0, "creation_date": 1547034433, "post_id": 54109140, "comment_id": 95050904, "body": "Post the code that initializes the User object with this json string."}, {"owner": {"reputation": 11714, "user_id": 323221, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/036bc6990a7ba39ac82cbfa266b7d326?s=128&d=identicon&r=PG", "display_name": "Erik Pragt", "link": "https://stackoverflow.com/users/323221/erik-pragt"}, "edited": false, "score": 1, "creation_date": 1547037421, "post_id": 54109140, "comment_id": 95052732, "body": "See this post for an explanation: <a href=\"https://stackoverflow.com/questions/52837665/why-kotlin-data-classes-can-have-nulls-in-non-nullable-fields-with-gson\" title=\"why kotlin data classes can have nulls in non nullable fields with gson\">stackoverflow.com/questions/52837665/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 8152354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbea3f86d889f215a24f1a9d85bea92d?s=128&d=identicon&r=PG&f=1", "display_name": "wmj", "link": "https://stackoverflow.com/users/8152354/wmj"}, "reply_to_user": {"reputation": 11714, "user_id": 323221, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/036bc6990a7ba39ac82cbfa266b7d326?s=128&d=identicon&r=PG", "display_name": "Erik Pragt", "link": "https://stackoverflow.com/users/323221/erik-pragt"}, "edited": false, "score": 1, "creation_date": 1547038392, "post_id": 54109140, "comment_id": 95053300, "body": "thanks @Erik Pragt"}], "owner": {"reputation": 1, "user_id": 8152354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbea3f86d889f215a24f1a9d85bea92d?s=128&d=identicon&r=PG&f=1", "display_name": "wmj", "link": "https://stackoverflow.com/users/8152354/wmj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 1, "closed_date": 1547100758, "answer_count": 0, "score": 0, "last_activity_date": 1547036697, "creation_date": 1547033486, "last_edit_date": 1547035159, "question_id": 54109140, "link": "https://stackoverflow.com/questions/54109140/kotlin-data-class-cant-trigger-kotlinnullpointexecption", "closed_reason": "Duplicate", "title": "Kotlin Data Class can&#39;t trigger KotlinNullPointExecption?", "body": "<p>For example:</p>\n\n<pre><code>data class User {\n  val name: String,\n  val address: String\n}\n</code></pre>\n\n<p>json returned by the server:</p>\n\n<pre><code>{ \n  \"name\":\"Bill\" , \n  \"address\":null\n}\n</code></pre>\n\n<p>but no <code>KotlinNullPointExecption</code> happened? Any idea why?</p>\n"}, {"tags": ["kotlin", "tornadofx"], "answers": [{"tags": [], "owner": {"reputation": 892, "user_id": 4774347, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8681b8ff4e753b78f9b0899de579d92b?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/4774347/sam"}, "is_accepted": false, "score": 0, "last_activity_date": 1547033742, "creation_date": 1547033742, "answer_id": 54109219, "question_id": 54108657, "link": "https://stackoverflow.com/questions/54108657/fragment-barchart-in-modal-is-not-updating-tornadofx/54109219#54109219", "title": "Fragment BarChart in Modal is not updating - TornadoFX", "body": "<p>Nevermind, I solved it by passing the POJO in as the scope and putting the set-up code into the <code>init</code> block. </p>\n\n<p>This article helped with the scope part: </p>\n\n<p><a href=\"https://stackoverflow.com/questions/41198155/tornadofx-how-to-pass-parameter-to-fragment-on-every-instance\">Tornadofx - How to pass parameter to Fragment on every instance</a></p>\n"}], "owner": {"reputation": 892, "user_id": 4774347, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8681b8ff4e753b78f9b0899de579d92b?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/4774347/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547033742, "creation_date": 1547031720, "question_id": 54108657, "link": "https://stackoverflow.com/questions/54108657/fragment-barchart-in-modal-is-not-updating-tornadofx", "title": "Fragment BarChart in Modal is not updating - TornadoFX", "body": "<p>I've created a Fragment to hold a <code>BarChart</code> and a <code>ScrollPane</code> - the end result will be a scrollable histogram. </p>\n\n<p>I'm creating these new fragments in a seperate modal using the <code>openModal</code> method.</p>\n\n<p>The problem that i'm having is that the <code>BarChart</code> doesn't seem to be updating when I call my <code>loadData</code> method, as shown below:</p>\n\n<pre><code>class Histogram : Fragment() {\n\n\noverride val root = vbox{\n\n    hgrow = Priority.ALWAYS\n    vgrow = Priority.ALWAYS\n\n    style{\n        minWidth = 1280.px\n        minHeight = 180.px\n    }\n\n    hbox{\n        hgrow = Priority.ALWAYS\n    }\n\n\n}\n\nprivate val bar = ScrollBar()\n\nprivate var barChart = barchart(\"bar\", CategoryAxis(), NumberAxis()){\n\n    barGap = 0.0\n    categoryGap = -1.0\n\n    hgrow = Priority.ALWAYS\n    vgrow = Priority.ALWAYS\n\n    style{\n        minWidth = 640.px\n        minHeight = 240.px\n        maxHeight = 480.px\n\n    }\n\n    isLegendVisible = false\n\n}\n\nprivate val s = XYChart.Series&lt;String, Number&gt;()\n\ninit{\n\n    root.add(barChart)\n    root.add(bar)\n\n}\n\n\nfun loadData(h: AlignmentHistogram){\n\n    s.data.add(XYChart.Data&lt;String, Number&gt;(\"asd\", 2))\n\n    barChart.title = h.rname\n\n   /* for(i in 0..MAX_DATASET_SIZE){\n        if(i &gt; h.histogram.size){\n            break\n        }\n        val data = XYChart.Data&lt;String, Int&gt;((h.firstPosition + i + 1).toString(), (h.histogram[i]))\n        println(data)\n        s.data.add(data)\n    }*/\n\n\n    s.data.add(XYChart.Data&lt;String, Number&gt;(\"asasdd\", 5))\n\n    s.name = h.rname\n\n    barChart.data.add(s)\n\n}\n\n}\n</code></pre>\n\n<p><code>AlignmentHistogram</code> is just a POJO with the data for the histogram and a few other details.</p>\n\n<p>I'm calling the fragment with the following code: </p>\n\n<pre><code>    val stage = Stage()\n    stage.title = \"${pointer.rname} - ${selectedFile.file.name}\"\n\n    val view = Histogram()\n    view.loadData(h)\n\n    val parent = StackPane()\n    stage.scene = Scene(parent, 1280.0, 360.0)\n\n    view.openModal(StageStyle.UTILITY, Modality.NONE, false, stage, false, true)\n</code></pre>\n\n<p>The result of this is just an empty histogram in a new modal, despite calling <code>barChart.data.add(s)</code></p>\n\n<p>Any ideas? Thanks in advance!</p>\n"}, {"tags": ["android", "kotlin", "kotlinx.coroutines"], "comments": [{"owner": {"reputation": 8306, "user_id": 10271334, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2ijZhRVumwM/AAAAAAAAAAI/AAAAAAAACes/Tjw_JgqObGI/photo.jpg?sz=128", "display_name": "Jeel Vankhede", "link": "https://stackoverflow.com/users/10271334/jeel-vankhede"}, "edited": false, "score": 0, "creation_date": 1547031372, "post_id": 54108446, "comment_id": 95049115, "body": "what about using <b>higer order function</b> as callback?"}, {"owner": {"reputation": 575, "user_id": 5496625, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/zB7sz.jpg?s=128&g=1", "display_name": "Jaydip Umaretiya", "link": "https://stackoverflow.com/users/5496625/jaydip-umaretiya"}, "reply_to_user": {"reputation": 8306, "user_id": 10271334, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2ijZhRVumwM/AAAAAAAAAAI/AAAAAAAACes/Tjw_JgqObGI/photo.jpg?sz=128", "display_name": "Jeel Vankhede", "link": "https://stackoverflow.com/users/10271334/jeel-vankhede"}, "edited": false, "score": 0, "creation_date": 1547031443, "post_id": 54108446, "comment_id": 95049187, "body": "I&#39;m new with <b>Coroutine</b>"}], "answers": [{"comments": [{"owner": {"reputation": 575, "user_id": 5496625, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/zB7sz.jpg?s=128&g=1", "display_name": "Jaydip Umaretiya", "link": "https://stackoverflow.com/users/5496625/jaydip-umaretiya"}, "edited": false, "score": 0, "creation_date": 1547035477, "post_id": 54108747, "comment_id": 95051553, "body": "thanks for your help your method is also correct but I was not using the interface so I use another way. Thank You"}, {"owner": {"reputation": 593, "user_id": 7793478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f0f8c2cd7071c3aedabb6e087c4765e?s=128&d=identicon&r=PG&f=1", "display_name": "Surbhi Aggarwal", "link": "https://stackoverflow.com/users/7793478/surbhi-aggarwal"}, "reply_to_user": {"reputation": 575, "user_id": 5496625, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/zB7sz.jpg?s=128&g=1", "display_name": "Jaydip Umaretiya", "link": "https://stackoverflow.com/users/5496625/jaydip-umaretiya"}, "edited": false, "score": 0, "creation_date": 1547035632, "post_id": 54108747, "comment_id": 95051644, "body": "You can follow MVP framework if you are using Kotlin and Coroutine. You will not face such problems"}, {"owner": {"reputation": 575, "user_id": 5496625, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/zB7sz.jpg?s=128&g=1", "display_name": "Jaydip Umaretiya", "link": "https://stackoverflow.com/users/5496625/jaydip-umaretiya"}, "edited": false, "score": 0, "creation_date": 1547052172, "post_id": 54108747, "comment_id": 95062109, "body": "What about the MVVM?"}, {"owner": {"reputation": 593, "user_id": 7793478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f0f8c2cd7071c3aedabb6e087c4765e?s=128&d=identicon&r=PG&f=1", "display_name": "Surbhi Aggarwal", "link": "https://stackoverflow.com/users/7793478/surbhi-aggarwal"}, "reply_to_user": {"reputation": 575, "user_id": 5496625, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/zB7sz.jpg?s=128&g=1", "display_name": "Jaydip Umaretiya", "link": "https://stackoverflow.com/users/5496625/jaydip-umaretiya"}, "edited": false, "score": 0, "creation_date": 1547101697, "post_id": 54108747, "comment_id": 95077632, "body": "No doubt, it is more automated than MVP, but while working with Kotlin and coroutine, it helped me a lot in understanding coroutine and kotlin, so I usually recommend MVP to those who have just started using kotlin or coroutine."}, {"owner": {"reputation": 575, "user_id": 5496625, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/zB7sz.jpg?s=128&g=1", "display_name": "Jaydip Umaretiya", "link": "https://stackoverflow.com/users/5496625/jaydip-umaretiya"}, "edited": false, "score": 0, "creation_date": 1547123974, "post_id": 54108747, "comment_id": 95088919, "body": "Thanks You for the help"}], "tags": [], "owner": {"reputation": 593, "user_id": 7793478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f0f8c2cd7071c3aedabb6e087c4765e?s=128&d=identicon&r=PG&f=1", "display_name": "Surbhi Aggarwal", "link": "https://stackoverflow.com/users/7793478/surbhi-aggarwal"}, "is_accepted": false, "score": 1, "last_activity_date": 1547032078, "creation_date": 1547032078, "answer_id": 54108747, "question_id": 54108446, "link": "https://stackoverflow.com/questions/54108446/android-coroutine-function-callback/54108747#54108747", "title": "Android Coroutine function callback", "body": "<p>You can use an interface something like :-</p>\n\n<pre><code>interface GroupIdViewContract{ fun returnId(groupId : String) }\n</code></pre>\n\n<p>in ViewModel</p>\n\n<pre><code>fun getGroupId(groupName: String) = scope.launch(Dispatchers.IO) {\ngroupId = repository.fetchGroupId(groupName)\nviewContract?.returnId(groupId)\n}\n</code></pre>\n\n<p>then you can implement this interface in your activity and you can easily get this group id in your activity</p>\n"}, {"comments": [{"owner": {"reputation": 575, "user_id": 5496625, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/zB7sz.jpg?s=128&g=1", "display_name": "Jaydip Umaretiya", "link": "https://stackoverflow.com/users/5496625/jaydip-umaretiya"}, "edited": false, "score": 0, "creation_date": 1547032961, "post_id": 54108750, "comment_id": 95050097, "body": "What about the observe when It&#39;s use for list only or I can use that in this fun also"}, {"owner": {"reputation": 8306, "user_id": 10271334, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2ijZhRVumwM/AAAAAAAAAAI/AAAAAAAACes/Tjw_JgqObGI/photo.jpg?sz=128", "display_name": "Jeel Vankhede", "link": "https://stackoverflow.com/users/10271334/jeel-vankhede"}, "reply_to_user": {"reputation": 575, "user_id": 5496625, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/zB7sz.jpg?s=128&g=1", "display_name": "Jaydip Umaretiya", "link": "https://stackoverflow.com/users/5496625/jaydip-umaretiya"}, "edited": false, "score": 0, "creation_date": 1547033753, "post_id": 54108750, "comment_id": 95050521, "body": "You can pass multiple parameters as arguments to function declaration. <code>callback: (Int?, List? ... any number of parameters you need.) -&gt; Unit</code>"}, {"owner": {"reputation": 575, "user_id": 5496625, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/zB7sz.jpg?s=128&g=1", "display_name": "Jaydip Umaretiya", "link": "https://stackoverflow.com/users/5496625/jaydip-umaretiya"}, "edited": false, "score": 0, "creation_date": 1547034006, "post_id": 54108750, "comment_id": 95050657, "body": "Okay this is really help full. Can You give me the best tutorial site to learn the Coroutine"}, {"owner": {"reputation": 8306, "user_id": 10271334, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2ijZhRVumwM/AAAAAAAAAAI/AAAAAAAACes/Tjw_JgqObGI/photo.jpg?sz=128", "display_name": "Jeel Vankhede", "link": "https://stackoverflow.com/users/10271334/jeel-vankhede"}, "reply_to_user": {"reputation": 575, "user_id": 5496625, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/zB7sz.jpg?s=128&g=1", "display_name": "Jaydip Umaretiya", "link": "https://stackoverflow.com/users/5496625/jaydip-umaretiya"}, "edited": false, "score": 0, "creation_date": 1547034176, "post_id": 54108750, "comment_id": 95050748, "body": "You can follow official doc, i found it helpful."}, {"owner": {"reputation": 575, "user_id": 5496625, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/zB7sz.jpg?s=128&g=1", "display_name": "Jaydip Umaretiya", "link": "https://stackoverflow.com/users/5496625/jaydip-umaretiya"}, "edited": false, "score": 0, "creation_date": 1547035406, "post_id": 54108750, "comment_id": 95051513, "body": "Thank you I will follow it"}, {"owner": {"reputation": 575, "user_id": 5496625, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/zB7sz.jpg?s=128&g=1", "display_name": "Jaydip Umaretiya", "link": "https://stackoverflow.com/users/5496625/jaydip-umaretiya"}, "edited": false, "score": 0, "creation_date": 1547188061, "post_id": 54108750, "comment_id": 95113896, "body": "I got this error Can you me what is the issue? <code>FATAL EXCEPTION: DefaultDispatcher-worker-3</code>"}, {"owner": {"reputation": 8306, "user_id": 10271334, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2ijZhRVumwM/AAAAAAAAAAI/AAAAAAAACes/Tjw_JgqObGI/photo.jpg?sz=128", "display_name": "Jeel Vankhede", "link": "https://stackoverflow.com/users/10271334/jeel-vankhede"}, "reply_to_user": {"reputation": 575, "user_id": 5496625, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/zB7sz.jpg?s=128&g=1", "display_name": "Jaydip Umaretiya", "link": "https://stackoverflow.com/users/5496625/jaydip-umaretiya"}, "edited": false, "score": 0, "creation_date": 1547188604, "post_id": 54108750, "comment_id": 95114083, "body": "This might be helpful -&gt; <a href=\"https://stackoverflow.com/questions/45326818/cant-catch-exception-throwing-after-kotlin-coroutine-is-cancelled\" title=\"cant catch exception throwing after kotlin coroutine is cancelled\">stackoverflow.com/questions/45326818/&hellip;</a>"}, {"owner": {"reputation": 575, "user_id": 5496625, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/zB7sz.jpg?s=128&g=1", "display_name": "Jaydip Umaretiya", "link": "https://stackoverflow.com/users/5496625/jaydip-umaretiya"}, "edited": false, "score": 0, "creation_date": 1547190131, "post_id": 54108750, "comment_id": 95114607, "body": "I got group id null."}], "tags": [], "owner": {"reputation": 8306, "user_id": 10271334, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2ijZhRVumwM/AAAAAAAAAAI/AAAAAAAACes/Tjw_JgqObGI/photo.jpg?sz=128", "display_name": "Jeel Vankhede", "link": "https://stackoverflow.com/users/10271334/jeel-vankhede"}, "is_accepted": true, "score": 2, "last_activity_date": 1547032091, "creation_date": 1547032091, "answer_id": 54108750, "question_id": 54108446, "link": "https://stackoverflow.com/questions/54108446/android-coroutine-function-callback/54108750#54108750", "title": "Android Coroutine function callback", "body": "<p>You can use callback by using <strong>Higher order function</strong> as callback parameter to provide data back to calling method like below :</p>\n\n<pre><code>fun getGroupId(groupName: String, callback: (Int?) -&gt; Unit) = scope.launch(Dispatchers.IO) {\n    callback(repository.fetchGroupId(groupName))\n}\n</code></pre>\n\n<p>This method would be used like below in your <code>Activity</code>:</p>\n\n<pre><code>mViewModel.getGroupId(\"your group name here\") { id -&gt;\n    // Here will be callback as group id\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2224, "user_id": 345810, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/jRHH0.jpg?s=128&g=1", "display_name": "tim4dev", "link": "https://stackoverflow.com/users/345810/tim4dev"}, "is_accepted": false, "score": 1, "last_activity_date": 1577689325, "creation_date": 1577689325, "answer_id": 59526929, "question_id": 54108446, "link": "https://stackoverflow.com/questions/54108446/android-coroutine-function-callback/59526929#59526929", "title": "Android Coroutine function callback", "body": "<p>That's what you need <a href=\"https://medium.com/@elizarov/callbacks-and-kotlin-flows-2b53aa2525cf\" rel=\"nofollow noreferrer\">Callbacks and Kotlin Flows</a>.\nFor example Single-shot callback:</p>\n\n<pre><code>interface Operation&lt;T&gt; {\n    fun performAsync(callback: (T?, Throwable?) -&gt; Unit)\n}\n\n\nsuspend fun &lt;T&gt; Operation&lt;T&gt;.perform(): T =\nsuspendCoroutine { continuation -&gt;\n    performAsync { value, exception -&gt;\n        when {\n            exception != null -&gt; // operation had failed\n                continuation.resumeWithException(exception)\n            else -&gt; // succeeded, there is a value\n                continuation.resume(value as T)\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 575, "user_id": 5496625, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/zB7sz.jpg?s=128&g=1", "display_name": "Jaydip Umaretiya", "link": "https://stackoverflow.com/users/5496625/jaydip-umaretiya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 894, "favorite_count": 0, "accepted_answer_id": 54108750, "answer_count": 3, "score": 1, "last_activity_date": 1577689325, "creation_date": 1547031090, "question_id": 54108446, "link": "https://stackoverflow.com/questions/54108446/android-coroutine-function-callback", "title": "Android Coroutine function callback", "body": "<p>Here is my fun in the <strong>Repository</strong> that returns me the String Id from the Group name</p>\n\n<pre><code>@Suppress(\u201cRedundantSuspendModifier\u201d)\n@WorkerThread\nsuspend fun fetchGroupId(groupName: String): String {\n      return groupDao.fetchGroupId(groupName)\n}\n</code></pre>\n\n<p>And this is the function on the <strong>ViewModel</strong></p>\n\n<pre><code>fun getGroupId(groupName: String) = scope.launch(Dispatchers.IO) {\n      groupId = repository.fetchGroupId(groupName)\n}\n</code></pre>\n\n<p>Now I want this group Id on the Activity side what I need to do?</p>\n"}, {"tags": ["random", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 9602523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b77b59fbae7c33057931ff29814f7b5f?s=128&d=identicon&r=PG&f=1", "display_name": "Nourdine Dali", "link": "https://stackoverflow.com/users/9602523/nourdine-dali"}, "edited": false, "score": 0, "creation_date": 1547116367, "post_id": 54108875, "comment_id": 95084688, "body": "Thank you. got it."}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 1, "last_activity_date": 1547032488, "creation_date": 1547032488, "answer_id": 54108875, "question_id": 54108298, "link": "https://stackoverflow.com/questions/54108298/why-to-add-0-while-using-nextint/54108875#54108875", "title": "Why to add 0 while using nextInt()", "body": "<p>There's no reason why you'd have to write down <code>+ 0</code> in that case. <code>nextInt</code> returns an <code>Int</code>, so adding 0 as an <code>Int</code> to it does absolutely nothing - doesn't change the type or affect the value - as you'd expect.</p>\n\n<p>Probably a typo in the tutorial.</p>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 9602523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b77b59fbae7c33057931ff29814f7b5f?s=128&d=identicon&r=PG&f=1", "display_name": "Nourdine Dali", "link": "https://stackoverflow.com/users/9602523/nourdine-dali"}, "edited": false, "score": 0, "creation_date": 1547116485, "post_id": 54109419, "comment_id": 95084756, "body": "So why do not we write  r= random.nextInt(emptyCells.size) to randomly choose one of the index from there. directly?"}, {"owner": {"reputation": 25953, "user_id": 6599590, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/qLSDJ.jpg?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/6599590/andy"}, "reply_to_user": {"reputation": 43, "user_id": 9602523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b77b59fbae7c33057931ff29814f7b5f?s=128&d=identicon&r=PG&f=1", "display_name": "Nourdine Dali", "link": "https://stackoverflow.com/users/9602523/nourdine-dali"}, "edited": false, "score": 0, "creation_date": 1547153705, "post_id": 54109419, "comment_id": 95105039, "body": "The simplest way to find out it \u2013 to ask this question to the author \u2013 Dharma Kshetri (you can find him on SO)."}], "tags": [], "owner": {"reputation": 25953, "user_id": 6599590, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/qLSDJ.jpg?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/6599590/andy"}, "is_accepted": false, "score": 1, "last_activity_date": 1547154207, "last_edit_date": 1547154207, "creation_date": 1547034433, "answer_id": 54109419, "question_id": 54108298, "link": "https://stackoverflow.com/questions/54108298/why-to-add-0-while-using-nextint/54109419#54109419", "title": "Why to add 0 while using nextInt()", "body": "<p>It's a <code>billet</code> for changing a value if you wish to. Author just showed you where and how to put it to.</p>\n\n<p>Here's how your code should look like:</p>\n\n<pre><code>var random = Random()\nvar randomIndex: Int?\nrandomIndex = random.nextInt(emptyCell.size - 1) + 2   // two values instead of 00\nprintln(\"randomIndex $randomIndex\")\n\nval emptyCellId = emptyCell[randomIndex]\nprintln(\"emptyCellId $emptyCellId\")\n\nvar btnSelect: Button?\nbtnSelect = setButtonId(noOfCards, emptyCellId)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "is_accepted": false, "score": 0, "last_activity_date": 1547170114, "last_edit_date": 1547170114, "creation_date": 1547162131, "answer_id": 54138290, "question_id": 54108298, "link": "https://stackoverflow.com/questions/54108298/why-to-add-0-while-using-nextint/54138290#54138290", "title": "Why to add 0 while using nextInt()", "body": "<p>Adding 0 will work but it does not change anything.</p>\n\n<p>Note that you are using Java's <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Random.html\" rel=\"nofollow noreferrer\">java.util.Random</a> which would limit your code to the JVM.</p>\n\n<p>If you use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.random/-random/index.html\" rel=\"nofollow noreferrer\">kotlin.random.Random</a> your code will target all platforms that Kotlin does and would be simpler because you don't need to instantiate a class.</p>\n\n<p>You can use it like this:</p>\n\n<pre><code>val randInt = Random.nextInt(emptyCell.size)\n</code></pre>\n\n<p>Check out the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.random/-random/next-int.html\" rel=\"nofollow noreferrer\">other variants of <code>nextInt</code></a> if you don't need to specify bonds or you need to specify an upper bound.</p>\n"}], "owner": {"reputation": 43, "user_id": 9602523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b77b59fbae7c33057931ff29814f7b5f?s=128&d=identicon&r=PG&f=1", "display_name": "Nourdine Dali", "link": "https://stackoverflow.com/users/9602523/nourdine-dali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 54108875, "answer_count": 3, "score": 2, "last_activity_date": 1547170152, "creation_date": 1547030669, "last_edit_date": 1547170152, "question_id": 54108298, "link": "https://stackoverflow.com/questions/54108298/why-to-add-0-while-using-nextint", "title": "Why to add 0 while using nextInt()", "body": "<p>I am following an instructor creating tic tac toy game, to make it autoplay.       </p>\n\n<pre><code>var r = Random()\nval randInt = r.nextInt(emptyCell.size-0) + 0    // adding 0 here\n</code></pre>\n\n<p>why do we need to add +0 here?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 3, "creation_date": 1547029308, "post_id": 54107820, "comment_id": 95047783, "body": "<code>as</code> is a cast operator, not a conversion operator. Use a method call such as <code>toList()</code>."}], "answers": [{"comments": [{"owner": {"reputation": 5056, "user_id": 1196988, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/Ih3Vl.jpg?s=128&g=1", "display_name": "Chris Nevill", "link": "https://stackoverflow.com/users/1196988/chris-nevill"}, "edited": false, "score": 0, "creation_date": 1547030170, "post_id": 54108063, "comment_id": 95048315, "body": "That gives me  Type mismatch. Required: Collection&lt;File&gt; Found: (MutableCollection&lt;Any?&gt;..Collection&lt;*&gt;?) at the addAll"}, {"owner": {"reputation": 2081, "user_id": 3294175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99d6b46af0ce01b3934979d8d7631b43?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Martori", "link": "https://stackoverflow.com/users/3294175/eric-martori"}, "reply_to_user": {"reputation": 5056, "user_id": 1196988, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/Ih3Vl.jpg?s=128&g=1", "display_name": "Chris Nevill", "link": "https://stackoverflow.com/users/1196988/chris-nevill"}, "edited": false, "score": 0, "creation_date": 1547030283, "post_id": 54108063, "comment_id": 95048395, "body": "What is the return type of the listFiles method?"}, {"owner": {"reputation": 5056, "user_id": 1196988, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/Ih3Vl.jpg?s=128&g=1", "display_name": "Chris Nevill", "link": "https://stackoverflow.com/users/1196988/chris-nevill"}, "edited": false, "score": 0, "creation_date": 1547030340, "post_id": 54108063, "comment_id": 95048430, "body": "public static Collection listFiles("}, {"owner": {"reputation": 2081, "user_id": 3294175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99d6b46af0ce01b3934979d8d7631b43?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Martori", "link": "https://stackoverflow.com/users/3294175/eric-martori"}, "reply_to_user": {"reputation": 5056, "user_id": 1196988, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/Ih3Vl.jpg?s=128&g=1", "display_name": "Chris Nevill", "link": "https://stackoverflow.com/users/1196988/chris-nevill"}, "edited": false, "score": 0, "creation_date": 1547030444, "post_id": 54108063, "comment_id": 95048494, "body": "try with: <code>array.addAll(myFiles as Collection&lt;File&gt;)</code> But bear in mind that this is not a completly safe option"}, {"owner": {"reputation": 5056, "user_id": 1196988, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/Ih3Vl.jpg?s=128&g=1", "display_name": "Chris Nevill", "link": "https://stackoverflow.com/users/1196988/chris-nevill"}, "edited": false, "score": 0, "creation_date": 1547031308, "post_id": 54108063, "comment_id": 95049065, "body": "I&#39;ve updated my Apache Commons version from 1.3 to 2.4 which returns Collection&lt;File&gt; - this seems to be making life easier!"}], "tags": [], "owner": {"reputation": 2081, "user_id": 3294175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99d6b46af0ce01b3934979d8d7631b43?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Martori", "link": "https://stackoverflow.com/users/3294175/eric-martori"}, "is_accepted": true, "score": 17, "last_activity_date": 1547029891, "creation_date": 1547029891, "answer_id": 54108063, "question_id": 54107820, "link": "https://stackoverflow.com/questions/54107820/kotlin-convert-collection-to-array-list/54108063#54108063", "title": "Kotlin - Convert Collection to Array List", "body": "<p><code>ArrayList</code> is a class with implementation details. <code>FileUtils</code> is returning a <code>LinkedList</code> and that is why you are having issues. You should do a cast to <code>List&lt;File&gt;</code> instead since it is an interface that both ArrayList and LinkedList implement.</p>\n\n<p>If you would need to modify the returned list you can use <code>MutableList&lt;File&gt;</code> instead the immutable one.</p>\n\n<p>But this is not the best approach because if the creators of <code>FileUtils</code> later change the implementation details of their collections your code may start crashing.</p>\n\n<p>A better soulition if explicitly need it to be an arrayList instead of a generic list could be:</p>\n\n<pre><code>val myFiles = FileUtils.listFiles(mediaStorageDir, extensions, true)\nval array = arrayListOf&lt;File&gt;()\narray.addAll(myFiles)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "is_accepted": false, "score": 9, "last_activity_date": 1547031062, "last_edit_date": 1547031062, "creation_date": 1547030139, "answer_id": 54108139, "question_id": 54107820, "link": "https://stackoverflow.com/questions/54107820/kotlin-convert-collection-to-array-list/54108139#54108139", "title": "Kotlin - Convert Collection to Array List", "body": "<p>The <code>as</code> operator is a cast.\u00a0 But <strong>a cast does not <em>convert</em> a value to a given type; a cast claims that the value is <em>already</em> of that type.</strong></p>\n\n<p>A <code>LinkedList</code> is not an <code>ArrayList</code>, so when you claim it is, the computer will call you out on your mistake \u2014 as you see!</p>\n\n<p>Instead, you need* to <em>convert</em> the value.\u00a0 Perhaps the best way is to call the extension function <code>.toArrayList()</code>.\u00a0 Alternatively, you could do call the constructor explicitly: <code>ArrayList(\u2026)</code>.</p>\n\n<p>(* This assumes you actually need an <code>ArrayList</code>.\u00a0 In practice, it's usually much better to refer only to the interface, in this case <code>List</code> or <code>MutableList</code>.\u00a0 As per other comments, the function you're calling is declared to return a <code>Collection</code>; the current implementation may return a <code>LinkedList</code> for you now, but that could change, so it's safest not to assume it implements either of those interfaces, and instead to call <code>.toList()</code> or <code>.toMutableList()</code>.)</p>\n"}, {"tags": [], "owner": {"reputation": 4346, "user_id": 1292557, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ccb0ba86944ca95bd765dfcc1ed3eb32?s=128&d=identicon&r=PG", "display_name": "Abu Yousuf", "link": "https://stackoverflow.com/users/1292557/abu-yousuf"}, "is_accepted": false, "score": 11, "last_activity_date": 1596649507, "creation_date": 1596649507, "answer_id": 63270750, "question_id": 54107820, "link": "https://stackoverflow.com/questions/54107820/kotlin-convert-collection-to-array-list/63270750#63270750", "title": "Kotlin - Convert Collection to Array List", "body": "<p>You can easily create <code>ArrayList</code> in Kotlin from any <code>Collection</code></p>\n<pre><code>val collection = FileUtils.listFiles(mediaStorageDir, extensions, true)\nval arrayList = ArrayList(collection)\n</code></pre>\n"}], "owner": {"reputation": 5056, "user_id": 1196988, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/Ih3Vl.jpg?s=128&g=1", "display_name": "Chris Nevill", "link": "https://stackoverflow.com/users/1196988/chris-nevill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21818, "favorite_count": 1, "accepted_answer_id": 54108063, "answer_count": 3, "score": 23, "last_activity_date": 1596649507, "creation_date": 1547029167, "question_id": 54107820, "link": "https://stackoverflow.com/questions/54107820/kotlin-convert-collection-to-array-list", "title": "Kotlin - Convert Collection to Array List", "body": "<p>I'm converting a Java application to Kotlin.\nIn one area it's using apache IO's FileUtils listFiles functions.</p>\n\n<p>These return collections and I'm having problems converting/casting the collections into ArrayList</p>\n\n<pre><code>        val myFiles = FileUtils.listFiles(mediaStorageDir, extensions, true) as ArrayList&lt;File&gt;\n</code></pre>\n\n<p>Whilst this compiles I get a runtime error as follows:</p>\n\n<blockquote>\n  <p>java.util.LinkedList cannot be cast to java.util.ArrayList</p>\n</blockquote>\n\n<p>What's the correct way to convert a collection object into an ArrayList?</p>\n"}, {"tags": ["android", "kotlin", "runtimeexception"], "comments": [{"owner": {"reputation": 5219, "user_id": 4562287, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-q6oUlSeB8Xo/AAAAAAAAAAI/AAAAAAAAAFg/NB15_H7Q0eo/photo.jpg?sz=128", "display_name": "Vivek Mishra", "link": "https://stackoverflow.com/users/4562287/vivek-mishra"}, "edited": false, "score": 0, "creation_date": 1547027892, "post_id": 54107274, "comment_id": 95046992, "body": "try moving your viewCreated() method code to onResume() method"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1547033353, "post_id": 54107274, "comment_id": 95050296, "body": "onSaveInstanceState does not call super, why"}, {"owner": {"reputation": 188, "user_id": 7177329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/500349d3686e259c5c8ef4fe73e8d211?s=128&d=identicon&r=PG&f=1", "display_name": "makvasic", "link": "https://stackoverflow.com/users/7177329/makvasic"}, "edited": false, "score": 0, "creation_date": 1547044582, "post_id": 54107274, "comment_id": 95057173, "body": "As error says parcel size is to big... But it should be 1MB?! What you put in bundle when calling ShowDetailFragment?    See this question for reference... <a href=\"https://stackoverflow.com/q/28667438/7177329\">stackoverflow.com/q/28667438/7177329</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3328, "user_id": 3269958, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7dgi.png?s=128&g=1", "display_name": "Shalu T D", "link": "https://stackoverflow.com/users/3269958/shalu-t-d"}, "is_accepted": false, "score": 0, "last_activity_date": 1547028648, "last_edit_date": 1547028648, "creation_date": 1547028255, "answer_id": 54107539, "question_id": 54107274, "link": "https://stackoverflow.com/questions/54107274/android-os-transactiontoolargeexception-error-in-android/54107539#54107539", "title": "android.os.TransactionTooLargeException error in Android", "body": "<p>Please Try :-</p>\n\n<pre><code>public class ShowDetailFragment extends Fragment {\n\n  public static boolean was207Called = false;\n\n  public interface ExpandViewListener {\n    void onExpandClicked();\n  }\n\n  public void setFullScreenListener(ExpandViewListener listener) {\n  }\n\n  public ShowDetailFragment() {\n  }\n\n  @Nullable\n  @Override\n  public View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\n    View v = inflater.inflate(R.layout.fragment_show_detail, container, false);\n    return v;\n  }\n\n  @Override\n  public void onActivityResult(int requestCode, int resultCode, Intent data) {\n  }\n\n  @Override\n  public void onResume() {\n    super.onResume();\n\n    Intent i = new Intent(getActivity(), \n    ForgottenPasswordActivity.class);\n    startActivity(i);\n  }\n\n  public void onFragmentRemoved() {\n    Log.d(\"XXXXX\", \"Frag removed\");\n  }\n\n  @Override\n  public void onStop() {\n    super.onStop();\n    Log.d(\"XXXX\", \"Stopping\");\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 8609978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db63ce73b8dac0f17bff07bb0103aa24?s=128&d=identicon&r=PG", "display_name": "Petr Kott", "link": "https://stackoverflow.com/users/8609978/petr-kott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 528, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1547030819, "creation_date": 1547027480, "last_edit_date": 1547030819, "question_id": 54107274, "link": "https://stackoverflow.com/questions/54107274/android-os-transactiontoolargeexception-error-in-android", "title": "android.os.TransactionTooLargeException error in Android", "body": "<p>I have a problem with my Android app returning <strong>android.os.TransactionTooLargeException</strong> even when I clean all the data from my Fragment.</p>\n\n<p>From the fragment that I implemented - see code below, I start a new activity, that activity starts but after a second the <strong>android.os.TransactionTooLargeException</strong> is thrown. I tried to clean all bundles, etc. so the fragment is as simple as possible, but it throws: </p>\n\n<blockquote>\n  <p>java.lang.RuntimeException: android.os.TransactionTooLargeException: data parcel size 608932 bytes.</p>\n</blockquote>\n\n<p><strong>Do you have any idea, where the problem can be, please?</strong></p>\n\n<pre><code>public class ShowDetailFragment extends Fragment {\n\n  public static boolean was207Called = false;\n\n  public interface ExpandViewListener {\n    void onExpandClicked();\n  }\n\n  public void setFullScreenListener(ExpandViewListener listener) {\n  }\n\n  public ShowDetailFragment() {\n  }\n\n  @Nullable\n  @Override\n  public View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\n    View v = inflater.inflate(R.layout.fragment_show_detail, null, true);\n    return v;\n  }\n\n  @Override\n  public void onActivityResult(int requestCode, int resultCode, Intent data) {\n  }\n\n  @Override\n  public void onResume() {\n    super.onResume();\n  }\n\n  @Override\n  public void onViewCreated(View view, @Nullable Bundle savedInstanceState) {\n    super.onViewCreated(view, null);\n    Intent i = new Intent(getActivity().getApplicationContext(), ForgottenPasswordActivity.class);\n    startActivity(i);\n    return;\n  }\n\n  @Override\n  public void onPause() {\n    super.onPause();\n  }\n\n  @Override\n  public void onSaveInstanceState(Bundle outState) {\n  }\n\n  public void onFragmentRemoved() {\n    Log.d(\"XXXXX\", \"Frag removed\");\n  }\n\n  @Override\n  public void onStop() {\n    super.onStop();\n    Log.d(\"XXXX\", \"Stopping\");\n  }\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": false, "score": 1, "last_activity_date": 1547026089, "creation_date": 1547026089, "answer_id": 54106839, "question_id": 54106750, "link": "https://stackoverflow.com/questions/54106750/initializing-a-field-member-in-kotlin-that-is-a-function/54106839#54106839", "title": "Initializing a field member in Kotlin that is a function", "body": "<p>The braces mean that the <code>module</code> function receives a lambda as a parameter. <a href=\"http://kotlinlang.org/docs/reference/lambdas.html#passing-a-lambda-to-the-last-parameter\" rel=\"nofollow noreferrer\">http://kotlinlang.org/docs/reference/lambdas.html#passing-a-lambda-to-the-last-parameter</a></p>\n"}, {"comments": [{"owner": {"reputation": 19894, "user_id": 753632, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e1eaa448ca773169f1296987a87cb67?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidDev", "link": "https://stackoverflow.com/users/753632/androiddev"}, "edited": false, "score": 0, "creation_date": 1547027339, "post_id": 54106922, "comment_id": 95046637, "body": "Coming from a Java background, I easily forget that Kotlin rule about being able to place the last parameter outside the paranthesis if it&#39;s a function. You&#39;re also right about it being code from Koin. Thanks."}], "tags": [], "owner": {"reputation": 2081, "user_id": 3294175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99d6b46af0ce01b3934979d8d7631b43?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Martori", "link": "https://stackoverflow.com/users/3294175/eric-martori"}, "is_accepted": true, "score": 2, "last_activity_date": 1547026366, "creation_date": 1547026366, "answer_id": 54106922, "question_id": 54106750, "link": "https://stackoverflow.com/questions/54106750/initializing-a-field-member-in-kotlin-that-is-a-function/54106922#54106922", "title": "Initializing a field member in Kotlin that is a function", "body": "<p>Note that your example seems like <a href=\"https://insert-koin.io/\" rel=\"nofollow noreferrer\">Koin</a> code.</p>\n\n<p>In a more general sense:\nIn kotlin when the last parameter of a function is another function ( see <a href=\"https://kotlinlang.org/docs/reference/lambdas.html\" rel=\"nofollow noreferrer\">Higher order functions</a>) you can put it outside the parenthesis, and if it is the only (non optional) parameter you can omit the parenthesis enterily.</p>\n\n<p>In your example <code>module</code> <code>viewModel</code> and <code>single</code> are functions that take another function as their only parameter, this way you can pass the lambda defining this paramter directly without any parenthesis.</p>\n"}], "owner": {"reputation": 19894, "user_id": 753632, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e1eaa448ca773169f1296987a87cb67?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidDev", "link": "https://stackoverflow.com/users/753632/androiddev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 54106922, "answer_count": 2, "score": 0, "last_activity_date": 1547026366, "creation_date": 1547025807, "question_id": 54106750, "link": "https://stackoverflow.com/questions/54106750/initializing-a-field-member-in-kotlin-that-is-a-function", "title": "Initializing a field member in Kotlin that is a function", "body": "<p>New to Kotlin, I have seen this code:</p>\n\n<pre><code>val myModule : Module = module {\n  viewModel { MyViewModel(get()) } \n  single { MyRepository() }\n}\n</code></pre>\n\n<p>Looking at the Kotlin docs, it isn't clear to me what the braces mean after \"module\". Is module a function and the braces are used to initialize the function? If this is true, can you point me to the part in the Kotlin documentation that indicates this? I can't find anything in the docs that shows an example of this. Here is the link:</p>\n\n<p><a href=\"https://kotlinlang.org/docs/reference/properties.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/properties.html</a></p>\n"}, {"tags": ["android", "kotlin", "arcore", "sceneform"], "answers": [{"comments": [{"owner": {"reputation": 4939, "user_id": 1801072, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k6sEG.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1801072/sam"}, "edited": false, "score": 0, "creation_date": 1573777548, "post_id": 55555977, "comment_id": 104006249, "body": "Didn&#39;t work for me. All this did was change the anchor point from the back center to apparently moving the anchor point to the bottom of the model instead. Any other ideas of things to try?"}, {"owner": {"reputation": 25953, "user_id": 6599590, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/qLSDJ.jpg?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/6599590/andy"}, "reply_to_user": {"reputation": 4939, "user_id": 1801072, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k6sEG.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1801072/sam"}, "edited": false, "score": 0, "creation_date": 1573799721, "post_id": 55555977, "comment_id": 104011223, "body": "@Sam This solution works for me. If it doesn&#39;t work for you, then, I suppose, you have other issues."}, {"owner": {"reputation": 4939, "user_id": 1801072, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k6sEG.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1801072/sam"}, "edited": false, "score": 1, "creation_date": 1573832882, "post_id": 55555977, "comment_id": 104027927, "body": "No worries @ARGeo was just checking to see if you had any other ideas since you seem to have some expertise in this area. Thanks anyways."}], "tags": [], "owner": {"reputation": 25953, "user_id": 6599590, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/qLSDJ.jpg?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/6599590/andy"}, "is_accepted": false, "score": 0, "last_activity_date": 1578746877, "last_edit_date": 1578746877, "creation_date": 1554615739, "answer_id": 55555977, "question_id": 54106499, "link": "https://stackoverflow.com/questions/54106499/added-object-on-vertical-plane-always-rotated-in-arcore/55555977#55555977", "title": "Added object on vertical plane always rotated in ARCore", "body": "<blockquote>\n  <p>To fix this issue you need to set <code>public Pose getCenterPose()</code>. It returns the pose of the center of the detected plane, defined to have the origin. The pose's transformed <code>+Y</code> axis will be point normal out of the plane, with the <code>+X</code> and <code>+Z</code> axes orienting the extents of the bounding rectangle. </p>\n</blockquote>\n\n<pre><code>anchor = mySession.createAnchor(plane.getCenterPose())\n</code></pre>\n\n<p>When the its trackable state is <code>TRACKING</code>, this pose is synced with the latest frame. When its trackable state is <code>PAUSED</code>, an identity pose will be returned. </p>\n\n<p>Your code could be the following:</p>\n\n<pre><code>Anchor newAnchor;\n\nfor (Plane plane : mSession.getAllTrackables(Plane.class)) {\n\n    if(plane.getType() == Plane.Type.VERTICAL &amp;&amp; \n       plane.getTrackingState() == TrackingState.TRACKING) {\n          newAnchor = plane.createAnchor(plane.getCenterPose());\n          break;\n    }\n}\n</code></pre>\n\n<blockquote>\n  <p><strong>One more thing from Google ARCore software engineers</strong>:</p>\n  \n  <p><code>Keep objects close to anchors</code>.</p>\n  \n  <p>When anchoring objects, make sure that they are close to the anchor you are using. Avoid placing objects farther than a few meters from the anchor to prevent unexpected rotational movement due to ARCore's updates to world space coordinates.</p>\n  \n  <p>If you need to place an object more than a few meters away from an existing anchor, create a new anchor closer to this position and attach the object to the new anchor.</p>\n</blockquote>\n"}], "owner": {"reputation": 395, "user_id": 8127475, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/Rsmsv.jpg?s=128&g=1", "display_name": "Keval Shukla", "link": "https://stackoverflow.com/users/8127475/keval-shukla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1177, "favorite_count": 0, "answer_count": 1, "score": 7, "last_activity_date": 1578746877, "creation_date": 1547024843, "last_edit_date": 1554647830, "question_id": 54106499, "link": "https://stackoverflow.com/questions/54106499/added-object-on-vertical-plane-always-rotated-in-arcore", "title": "Added object on vertical plane always rotated in ARCore", "body": "<p><a href=\"https://i.stack.imgur.com/EF1wU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EF1wU.png\" alt=\"enter image description here\"></a> </p>\n\n<p>I am adding an image on vertical plane in Sceneform ARFragment. But it always get rotated. The code is working fine on horizontal plane. My code for placing images on vertical Plane is as follow:</p>\n\n<pre><code>arFragment.setOnTapArPlaneListener { hitResult: HitResult, \n                                         plane: Plane, \n                                   motionEvent: MotionEvent -&gt;\n\n    if(!isOnceTapedOnSurface) {\n        val anchor = hitResult.createAnchor()\n        val anchorNode = AnchorNode(anchor)\n        anchorNode.setParent(arFragment.arSceneView.scene)\n\n        andy = TransformableNode(arFragment.transformationSystem)\n\n        if(plane.type == Plane.Type.VERTICAL) {\n            val anchorUp = anchorNode.up\n            andy.setLookDirection(Vector3.up(), anchorUp)\n        }\n\n        andy.setParent(anchorNode)\n        andy.renderable = andyRenderable\n        andy.select()\n\n        // arFragment.arSceneView.planeRenderer.isVisible = false\n        isOnceTapedOnSurface = true\n    }\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 4301, "user_id": 10326373, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gELRFaHltbo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNsdj9V1baYsQJixyXkjgDgjTYtUg/mo/photo.jpg?sz=128", "display_name": "Yoni Gibbs", "link": "https://stackoverflow.com/users/10326373/yoni-gibbs"}, "is_accepted": true, "score": 29, "last_activity_date": 1547024556, "creation_date": 1547024556, "answer_id": 54106423, "question_id": 54106333, "link": "https://stackoverflow.com/questions/54106333/how-to-div-of-two-integer-into-decimal-in-kotlin/54106423#54106423", "title": "how to div of two integer into decimal in kotlin?", "body": "<p><code>3</code> and <code>6</code> are both <code>Int</code>, and dividing one <code>Int</code> by another gives an <code>Int</code>: that's why you get back 0. To get a non-integer value you need to get the result of the division to be a non-integer value. One way to do this is convert the <code>Int</code> to something else before dividing it, e.g.:</p>\n\n<pre><code>val num = 3.toDouble() / 6\n</code></pre>\n\n<p><code>num</code> will now be a <code>Double</code> with a value of <code>0.5</code>, which you can format as a string as you wish.</p>\n"}], "owner": {"reputation": 594, "user_id": 7975049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5da402b2f4507e138db213ff7839c42b?s=128&d=identicon&r=PG", "display_name": "Alif Al-Gibran", "link": "https://stackoverflow.com/users/7975049/alif-al-gibran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10576, "favorite_count": 0, "accepted_answer_id": 54106423, "answer_count": 1, "score": 15, "last_activity_date": 1547024556, "creation_date": 1547024197, "question_id": 54106333, "link": "https://stackoverflow.com/questions/54106333/how-to-div-of-two-integer-into-decimal-in-kotlin", "title": "how to div of two integer into decimal in kotlin?", "body": "<p>i div two of Integer (e.x 3/6) and how to make it into 0.500000 in kotlin. i've tried some solutions but none of them solve my problem like.</p>\n\n<pre><code>val num = BigDecimal(3.div(6))\n\n    println(\"%.6f\".format(num))\n</code></pre>\n\n<p>but the result is 0.000000</p>\n"}, {"tags": ["android", "android-activity", "kotlin", "start-activity"], "comments": [{"owner": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "edited": false, "score": 2, "creation_date": 1547022307, "post_id": 54105823, "comment_id": 95043890, "body": "<code>MainActivity@this</code> not valid in my side"}], "answers": [{"tags": [], "owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "is_accepted": false, "score": 4, "last_activity_date": 1547022601, "creation_date": 1547022601, "answer_id": 54105924, "question_id": 54105823, "link": "https://stackoverflow.com/questions/54105823/thismainactivity-vs-mainactivitythis-in-kotlin/54105924#54105924", "title": "this@MainActivity vs MainActivity@this in kotlin", "body": "<p><code>this@MainActivity</code> - it is a reference to current <code>MainActivity</code> instance.</p>\n\n<p><code>MainActivity@this</code> - it is definition of a name of the label, i.e. <strong>MainActivity</strong>.</p>\n\n<p><a href=\"https://kotlinlang.org/docs/reference/returns.html#break-and-continue-labels\" rel=\"nofollow noreferrer\">More info about labels</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 3536, "user_id": 792480, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4dd6dbd81fb62519e0a5303413fb63c5?s=128&d=identicon&r=PG", "display_name": "Smeet", "link": "https://stackoverflow.com/users/792480/smeet"}, "edited": false, "score": 0, "creation_date": 1547097478, "post_id": 54105928, "comment_id": 95076472, "body": "Thank you. Intent(this@MainActivity, SettingActivity::class.java) and Intent(MainActivity@this, SettingActivity::class.java) both are valid and working fine. Is there any reason or what statement is same as MainActivity.class and this within MainActivity."}, {"owner": {"reputation": 2749, "user_id": 4395530, "user_type": "registered", "profile_image": "https://graph.facebook.com/100007756714288/picture?type=large", "display_name": "Ye Min Htut", "link": "https://stackoverflow.com/users/4395530/ye-min-htut"}, "reply_to_user": {"reputation": 3536, "user_id": 792480, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4dd6dbd81fb62519e0a5303413fb63c5?s=128&d=identicon&r=PG", "display_name": "Smeet", "link": "https://stackoverflow.com/users/792480/smeet"}, "edited": false, "score": 0, "creation_date": 1547106043, "post_id": 54105928, "comment_id": 95079214, "body": "You might want to read about it here <a href=\"https://stackoverflow.com/questions/3434041/meaning-of-this-and-class-in-java?lq=1\" title=\"meaning of this and class in java\">stackoverflow.com/questions/3434041/&hellip;</a>"}], "tags": [], "owner": {"reputation": 2749, "user_id": 4395530, "user_type": "registered", "profile_image": "https://graph.facebook.com/100007756714288/picture?type=large", "display_name": "Ye Min Htut", "link": "https://stackoverflow.com/users/4395530/ye-min-htut"}, "is_accepted": true, "score": 7, "last_activity_date": 1547022616, "creation_date": 1547022616, "answer_id": 54105928, "question_id": 54105823, "link": "https://stackoverflow.com/questions/54105823/thismainactivity-vs-mainactivitythis-in-kotlin/54105928#54105928", "title": "this@MainActivity vs MainActivity@this in kotlin", "body": "<p>According to <a href=\"https://kotlinlang.org/docs/reference/grammar.html#labelReference\" rel=\"noreferrer\">Kotlin's Grammar documentation</a>, </p>\n\n<p>MainActivity@this is just a label for <code>this</code> with the name \"MainActivity\". You can set whatever label you want.</p>\n\n<p>this@MainActivity is an actual reference of <code>this</code> from MainActivity</p>\n\n<p>Hope I make it clear.</p>\n"}], "owner": {"reputation": 3536, "user_id": 792480, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4dd6dbd81fb62519e0a5303413fb63c5?s=128&d=identicon&r=PG", "display_name": "Smeet", "link": "https://stackoverflow.com/users/792480/smeet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1951, "favorite_count": 2, "accepted_answer_id": 54105928, "answer_count": 2, "score": 4, "last_activity_date": 1547022616, "creation_date": 1547022182, "last_edit_date": 1592644375, "question_id": 54105823, "link": "https://stackoverflow.com/questions/54105823/thismainactivity-vs-mainactivitythis-in-kotlin", "title": "this@MainActivity vs MainActivity@this in kotlin", "body": "<p>As you may see that</p>\n<p><strong>this@MainActivity</strong> or <strong>MainActivity@this</strong></p>\n<p>is valid while starting activity in kotlin. I tried to find out answer but I did not found anything. Can anyone know about exact difference of it and which one valid ? Why it allowed both ?</p>\n"}, {"tags": ["java", "javafx", "kotlin", "tornadofx"], "answers": [{"comments": [{"owner": {"reputation": 892, "user_id": 4774347, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8681b8ff4e753b78f9b0899de579d92b?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/4774347/sam"}, "edited": false, "score": 0, "creation_date": 1547023984, "post_id": 54106079, "comment_id": 95044741, "body": "Thanks, that does work in my main window! My issue now is that I&#39;m attempting to open these histograms in new stages and I don&#39;t think the stylesheet is being imported - but that&#39;s another matter.  Thanks again!"}, {"owner": {"reputation": 18780, "user_id": 5966775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d03a5259f8169269385188f7c5fb8ed?s=128&d=identicon&r=PG", "display_name": "DVarga", "link": "https://stackoverflow.com/users/5966775/dvarga"}, "reply_to_user": {"reputation": 892, "user_id": 4774347, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8681b8ff4e753b78f9b0899de579d92b?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/4774347/sam"}, "edited": false, "score": 0, "creation_date": 1547024039, "post_id": 54106079, "comment_id": 95044777, "body": "Yes, it&#39;s another question, but for that you&#39;ll find definitely answers on SO :)"}], "tags": [], "owner": {"reputation": 18780, "user_id": 5966775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d03a5259f8169269385188f7c5fb8ed?s=128&d=identicon&r=PG", "display_name": "DVarga", "link": "https://stackoverflow.com/users/5966775/dvarga"}, "is_accepted": true, "score": 1, "last_activity_date": 1547023931, "last_edit_date": 1547023931, "creation_date": 1547023287, "answer_id": 54106079, "question_id": 54105416, "link": "https://stackoverflow.com/questions/54105416/how-to-color-barchart-bar-in-tornadofx/54106079#54106079", "title": "How to color BarChart bar in TornadoFx?", "body": "<p>Without TornadoFX you could use the <code>.chart-bar</code> selector in your stylesheet without defining any custom CSS classes:</p>\n\n<pre><code>.chart-bar {\n    -fx-bar-fill: #4682B4; \n}\n</code></pre>\n\n<p>The TornadoFX equivalent is:</p>\n\n<pre><code>class BarChartStyles : Stylesheet() {\n\n    companion object {\n        val backColor = c(\"#4682B4\")\n        val chartBar by cssclass()\n    }\n\n    init {\n        chartBar {\n            barFill = backColor\n        }\n    }\n}\n</code></pre>\n\n<p>After applying the style your example looks like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/XDWBq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XDWBq.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 892, "user_id": 4774347, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8681b8ff4e753b78f9b0899de579d92b?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/4774347/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 54106079, "answer_count": 1, "score": 1, "last_activity_date": 1547024270, "creation_date": 1547020318, "last_edit_date": 1547024270, "question_id": 54105416, "link": "https://stackoverflow.com/questions/54105416/how-to-color-barchart-bar-in-tornadofx", "title": "How to color BarChart bar in TornadoFx?", "body": "<p>I'm trying to change the colours/shading of the bar chart bars in TornadoFX using a custom stylesheet.</p>\n\n<p>I came across this post: <a href=\"https://stackoverflow.com/questions/14158104/javafx-barchart-color\">JavaFX BarChart bar color</a> which uses the <code>-fx-bar-fill</code> selector but I'm having a hard time translating this into a form that TornadoFX will accept.</p>\n\n<p>Here's my stylesheet:</p>\n\n<pre><code>class BarChartStyles : Stylesheet(){\n\n  companion object {\n      val histogramChart by cssclass()\n      val backColor = c(\"#4682B4\")\n  }\n\n  init{\n      histogramChart{\n          defaultColor0{\n              chartBar{\n                  barFill = backColor\n              }\n          }     \n      }\n  }\n} \n</code></pre>\n\n<p>And this is how I'm declaring the <code>BarChart</code>:</p>\n\n<pre><code>barchart(\"my histogram\", CategoryAxis(), NumberAxis()){\n\n            barGap = 0.0\n            categoryGap = 0.0\n\n            hgrow = Priority.ALWAYS\n            vgrow = Priority.ALWAYS\n\n            style{\n                minWidth = 640.px\n                minHeight = 240.px\n                maxHeight = 480.px\n            }\n\n            addClass(BarChartStyles.histogramChart)\n\n            series(\"Portfolio 1\") {\n                data(\"1\", 23)\n                data(\"2\", 14)\n                data(\"3\", 15)\n                data(\"4\", 23)\n                data(\"5\", 14)\n                data(\"6\", 15)\n                data(\"7\", 23)\n                data(\"8\", 14)\n                data(\"9\", 15)\n                data(\"10\", 23)\n                data(\"11\", 14)\n                data(\"12\", 15)\n                data(\"13\", 23)\n                data(\"14\", 14)\n                data(\"15\", 15)\n                data(\"16\", 23)\n                data(\"17\", 14)\n                data(\"18\", 15)\n            }\n\n        }\n</code></pre>\n"}, {"tags": ["java", "regex", "string", "kotlin"], "comments": [{"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 2, "creation_date": 1547020485, "post_id": 54105397, "comment_id": 95043074, "body": "Is the space + <code>|</code> a typo? See <code>.replace(Regex(&quot;&#228; |&quot;,RegexOption.IGNORE_CASE),&quot;&quot;)</code>. What is the outcome if you fix it (<code>&quot;&#228; |&quot;</code> =&gt; <code>&quot;&#228;&quot;</code>)?"}, {"owner": {"reputation": 871354, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "edited": false, "score": 5, "creation_date": 1547020599, "post_id": 54105397, "comment_id": 95043126, "body": "<i>&quot;And I measured time required for both...&quot;</i> Did you do so <a href=\"https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java\">properly</a>?"}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 2, "creation_date": 1547020647, "post_id": 54105397, "comment_id": 95043148, "body": "Shall we question your measurement?"}, {"owner": {"reputation": 871354, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "edited": false, "score": 1, "creation_date": 1547020660, "post_id": 54105397, "comment_id": 95043155, "body": "Separately: Why the multiple calls to <code>replace</code>? The above requires just two, not nine."}, {"owner": {"reputation": 2281, "user_id": 5430666, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/hams9.jpg?s=128&g=1", "display_name": "Amit Bhandari", "link": "https://stackoverflow.com/users/5430666/amit-bhandari"}, "reply_to_user": {"reputation": 871354, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "edited": false, "score": 0, "creation_date": 1547020743, "post_id": 54105397, "comment_id": 95043195, "body": "@T.J.Crowder that&#39;s not the point, I was going through existing codebase and found this code. Was trying to improve it when I came across this issue."}, {"owner": {"reputation": 2281, "user_id": 5430666, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/hams9.jpg?s=128&g=1", "display_name": "Amit Bhandari", "link": "https://stackoverflow.com/users/5430666/amit-bhandari"}, "reply_to_user": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1547020780, "post_id": 54105397, "comment_id": 95043207, "body": "@WiktorStribi\u017cew Not a typo, checked without it as well. Result is same."}, {"owner": {"reputation": 2281, "user_id": 5430666, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/hams9.jpg?s=128&g=1", "display_name": "Amit Bhandari", "link": "https://stackoverflow.com/users/5430666/amit-bhandari"}, "reply_to_user": {"reputation": 871354, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "edited": false, "score": 0, "creation_date": 1547020835, "post_id": 54105397, "comment_id": 95043229, "body": "@T.J.Crowder I did simple time comparison using currentTimeMillis. It came 3 ms on average for regex and &gt;40ms on average for normal replace"}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 3, "creation_date": 1547020915, "post_id": 54105397, "comment_id": 95043267, "body": "Ok, but note that <code>.replace(Regex(&quot;&#228; |&quot;,RegexOption.IGNORE_CASE),&quot;&quot;)</code> and <code>.replace(&quot;&#228;&quot;,&quot;&quot;)</code> are not equal in what they do as the first one removes <code>&#228;</code> + space and the second only removes <code>&#228;</code>."}, {"owner": {"reputation": 871354, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "edited": false, "score": 0, "creation_date": 1547021028, "post_id": 54105397, "comment_id": 95043319, "body": "@AmitBhandari - Please read the answers to <a href=\"https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java\">the question I linked</a>. You can&#39;t do perf analysis on the JVM like that."}, {"owner": {"reputation": 2281, "user_id": 5430666, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/hams9.jpg?s=128&g=1", "display_name": "Amit Bhandari", "link": "https://stackoverflow.com/users/5430666/amit-bhandari"}, "reply_to_user": {"reputation": 871354, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "edited": false, "score": 0, "creation_date": 1547021085, "post_id": 54105397, "comment_id": 95043347, "body": "@T.J.Crowder Okay I will check those answers out"}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1547021418, "post_id": 54105397, "comment_id": 95043503, "body": "For sure <code>&#228; |</code> fails to match because there would be no <code>&#228;</code>s after the previous call to replace."}, {"owner": {"reputation": 95, "user_id": 8236301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d3a7d13f74b150824482aa65d089486?s=128&d=identicon&r=PG&f=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/8236301/adam"}, "edited": false, "score": 0, "creation_date": 1547024282, "post_id": 54105397, "comment_id": 95044902, "body": "Offtopic, but you can write one single regex for all the empty string replacements. This way you can eliminate all those redundant method chainings."}], "owner": {"reputation": 2281, "user_id": 5430666, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/hams9.jpg?s=128&g=1", "display_name": "Amit Bhandari", "link": "https://stackoverflow.com/users/5430666/amit-bhandari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 550, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1547020251, "creation_date": 1547020251, "question_id": 54105397, "link": "https://stackoverflow.com/questions/54105397/regex-string-replace-considerably-fast-than-regular-replace-in-kotlin", "title": "Regex string replace considerably fast than regular replace in kotlin", "body": "<p>I have been trying to replace characters in string like below</p>\n\n<pre><code>data = data.replace(Regex(\"[a-z:]\", RegexOption.IGNORE_CASE), \"\")\n        .replace(Regex(\"/\", RegexOption.IGNORE_CASE), \".\")\n        .replace(Regex(\",\", RegexOption.IGNORE_CASE), \"\")\n        .replace(Regex(\"'\", RegexOption.IGNORE_CASE), \"\")\n        .replace(Regex(\"\u00e9\",RegexOption.IGNORE_CASE),\"\")\n        .replace(Regex(\"\u00ea\",RegexOption.IGNORE_CASE),\"\")\n        .replace(Regex(\"\u00f6\",RegexOption.IGNORE_CASE),\"\")\n        .replace(Regex(\"\u00c4\",RegexOption.IGNORE_CASE),\"\")\n        .replace(Regex(\"\u00e4\",RegexOption.IGNORE_CASE),\"\")\n        .replace(Regex(\"\u00e4 |\",RegexOption.IGNORE_CASE),\"\")\n</code></pre>\n\n<p>And </p>\n\n<pre><code>data = data.replace(Regex(\"[a-z:]\", RegexOption.IGNORE_CASE), \"\")\n        .replace(\"/\", \".\")\n        .replace(\",\", \"\")\n        .replace(\"'\", \"\")\n        .replace(\"\u00e9\",\"\")\n        .replace(\"\u00ea\",\"\")\n        .replace(\"\u00f6\",\"\")\n        .replace(\"\u00c4\",\"\")\n        .replace(\"\u00e4\",\"\")\n</code></pre>\n\n<p>And I measured time required for both of this code and surprisingly code with regex turned out at least 20 times faster than normal replace. </p>\n\n<p>As long as I have been reading about regex, they say regex is expensive operation, am I missing something?</p>\n"}, {"tags": ["java", "kotlin", "static-methods", "dagger-2"], "comments": [{"owner": {"reputation": 13924, "user_id": 344487, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/121250664bfcadc67069fda58195234b?s=128&d=identicon&r=PG", "display_name": "Fred", "link": "https://stackoverflow.com/users/344487/fred"}, "edited": false, "score": 0, "creation_date": 1547018021, "post_id": 54104719, "comment_id": 95041961, "body": "I one asked this question <a href=\"https://stackoverflow.com/questions/44894218/dagger-2-static-provider-methods-in-kotlin\" title=\"dagger 2 static provider methods in kotlin\">stackoverflow.com/questions/44894218/&hellip;</a> maybe one of the answers helps you with this."}, {"owner": {"reputation": 4780, "user_id": 3926506, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ex7wk.jpg?s=128&g=1", "display_name": "XIII-th", "link": "https://stackoverflow.com/users/3926506/xiii-th"}, "reply_to_user": {"reputation": 13924, "user_id": 344487, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/121250664bfcadc67069fda58195234b?s=128&d=identicon&r=PG", "display_name": "Fred", "link": "https://stackoverflow.com/users/344487/fred"}, "edited": false, "score": 0, "creation_date": 1547019990, "post_id": 54104719, "comment_id": 95042825, "body": "@Fred <a href=\"https://stackoverflow.com/a/44894535/3926506\">first answer</a> - stateless singleton, it&#39;s bad practice. <a href=\"https://stackoverflow.com/a/44994441/3926506\">Second answer</a> it&#39;s also stateless singleton but in this case it implicit (companion object instance). The aim is <b>do not create stateless singletons</b>"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1547025084, "post_id": 54104719, "comment_id": 95045362, "body": "There is no syntax for referencing a class generated by the JVM backend to contain top-level functions or properties."}, {"owner": {"reputation": 4780, "user_id": 3926506, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ex7wk.jpg?s=128&g=1", "display_name": "XIII-th", "link": "https://stackoverflow.com/users/3926506/xiii-th"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1547025711, "post_id": 54104719, "comment_id": 95045697, "body": "@yole ok, I understand about syntax. How I can define static functions set without stateless companion object?"}], "owner": {"reputation": 4780, "user_id": 3926506, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ex7wk.jpg?s=128&g=1", "display_name": "XIII-th", "link": "https://stackoverflow.com/users/3926506/xiii-th"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "closed_date": 1547025053, "answer_count": 0, "score": 0, "last_activity_date": 1547017190, "creation_date": 1547017190, "question_id": 54104719, "link": "https://stackoverflow.com/questions/54104719/how-to-use-to-filejvmname-in-anotations", "closed_reason": "Duplicate", "title": "How to use to @file:JvmName in anotations", "body": "<p>This question about how to make <em>effectively static</em> method implementations for jvm. By <em>effectively static</em> definition I mean <em>jvm static method implementation without rudimentary <strong>stateless</strong> companion object</em>.<br>\nI found this requirement when I need to implement static <code>@Provides</code> method for dagger (like suggested by <a href=\"https://link.medium.com/fZ5Yhs5vkT\" rel=\"nofollow noreferrer\">\"Favor static <code>@Provides</code> methods\"</a>). Let's consider next examples.  </p>\n\n<hr>\n\n<h1>Top level function is <em>effectively static</em></h1>\n\n<p>But it can't be referenced by class in annotations (module in dagger)</p>\n\n<h3>TestModule.kt</h3>\n\n<pre><code>@file:JvmName(\"TestModule\") // &lt;-- does not affect anything in this case\n@file:Module // &lt;-- dagger module annotation for generated TestModule class\npackage com.example\n\nimport dagger.Module\nimport dagger.Provides\n\n/**\n * Effectively jvm static implementation (without rudimentary Companion instance)\n */\n@Provides\nfun getRunnable(): Runnable = Runnable { println(42) }\n</code></pre>\n\n<h3>TestModule.decompiled.java</h3>\n\n<pre><code>package com.example;\n\nimport dagger.Module;\nimport dagger.Provides;\nimport kotlin.Metadata;\nimport kotlin.jvm.JvmName;\nimport org.jetbrains.annotations.NotNull;\n\n@Module\n@Metadata(\n   mv = {1, 1, 13},\n   bv = {1, 0, 3},\n   k = 2,\n   d1 = {\"\\u0000\\b\\n\\u0000\\n\\u0002\\u0018\\u0002\\n\\u0000\\u001a\\b\\u0010\\u0000\\u001a\\u00020\\u0001H\\u0007\u00a8\\u0006\\u0002\"},\n   d2 = {\"getRunnable\", \"Ljava/lang/Runnable;\", \"status\"}\n)\n@JvmName(\n   name = \"TestModule\"\n)\npublic final class TestModule {\n   /*\n   Instance of stateless companion object is absent - that what we want to achieve \n   */\n   @Provides\n   @NotNull\n   public static final Runnable getRunnable() {\n      return (Runnable)null.INSTANCE;\n   }\n}\n</code></pre>\n\n<h3>Issue in usage side. TestComponent.kt</h3>\n\n<pre><code>package com.example\n\nimport dagger.Component\n\n@Component(modules = [TestModule::class /* This name is not available even in compile time */])\ninterface TestComponent\n</code></pre>\n\n<h1>Rudimentary companion object</h1>\n\n<p>When we define module class with <em>companion object</em> we can refer it in annotations but in this case <code>@JvmStatic</code> methods just delegates for methods from <em>rudimentary companion object instance</em>.</p>\n\n<h3>TestModule.kt</h3>\n\n<pre><code>package com.example\n\nimport dagger.Module\nimport dagger.Provides\n\n@Module\nclass TestModule {\n\n    companion object {\n        @Provides\n        @JvmStatic\n        fun getRunnable(): Runnable = Runnable { println(42) }\n    }\n}\n</code></pre>\n\n<h3>TestModule.decompiled.java</h3>\n\n<pre><code>package com.example;\n\nimport dagger.Module;\nimport dagger.Provides;\nimport kotlin.Metadata;\nimport kotlin.jvm.JvmStatic;\nimport kotlin.jvm.internal.DefaultConstructorMarker;\nimport org.jetbrains.annotations.NotNull;\n\n@Module\n@Metadata(\n        mv = {1, 1, 13},\n        bv = {1, 0, 3},\n        k = 1,\n        d1 = {\"\\u0000\\f\\n\\u0002\\u0018\\u0002\\n\\u0002\\u0010\\u0000\\n\\u0002\\b\\u0003\\b\\u0007\\u0018\\u0000 \\u00032\\u00020\\u0001:\\u0001\\u0003B\\u0005\u00a2\\u0006\\u0002\\u0010\\u0002\u00a8\\u0006\\u0004\"},\n        d2 = {\"Lru/tensor/sbis/status/domain/assembly/TestModule;\", \"\", \"()V\", \"Companion\", \"status\"}\n)\npublic final class TestModule {\n    /*\n    Rudimentary stateless instance can be effectively omitted \n    */\n    public static final TestModule.Companion Companion = new TestModule.Companion((DefaultConstructorMarker)null);\n\n    @Provides\n    @JvmStatic\n    @NotNull\n    public static final Runnable getRunnable() {\n        return Companion.getRunnable(); // &lt;-- delegated method call\n    }\n\n    @Metadata(\n            mv = {1, 1, 13},\n            bv = {1, 0, 3},\n            k = 1,\n            d1 = {\"\\u0000\\u0012\\n\\u0002\\u0018\\u0002\\n\\u0002\\u0010\\u0000\\n\\u0002\\b\\u0002\\n\\u0002\\u0018\\u0002\\n\\u0000\\b\\u0086\\u0003\\u0018\\u00002\\u00020\\u0001B\\u0007\\b\\u0002\u00a2\\u0006\\u0002\\u0010\\u0002J\\b\\u0010\\u0003\\u001a\\u00020\\u0004H\\u0007\u00a8\\u0006\\u0005\"},\n            d2 = {\"Lru/tensor/sbis/status/domain/assembly/TestModule$Companion;\", \"\", \"()V\", \"getRunnable\", \"Ljava/lang/Runnable;\", \"status\"}\n    )\n    public static final class Companion {\n        @Provides\n        @JvmStatic\n        @NotNull\n        public final Runnable getRunnable() {\n            return (Runnable)null.INSTANCE;\n        }\n\n        private Companion() {\n        }\n\n        // $FF: synthetic method\n        public Companion(DefaultConstructorMarker $constructor_marker) {\n            this();\n        }\n    }\n}\n</code></pre>\n\n<hr>\n\n<h1>Question</h1>\n\n<p>How to refer <em>effectively static</em> stateless implementation of Util (dagger module) class by it name? </p>\n"}, {"tags": ["android", "kotlin", "resources", "android-alertdialog"], "comments": [{"owner": {"reputation": 57589, "user_id": 7666442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K8FFo.jpg?s=128&g=1", "display_name": "AskNilesh", "link": "https://stackoverflow.com/users/7666442/asknilesh"}, "edited": false, "score": 0, "creation_date": 1547010744, "post_id": 54103552, "comment_id": 95039664, "body": "can u share your layout <code>layout_loading_dialog.XML</code> file with question"}, {"owner": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "reply_to_user": {"reputation": 57589, "user_id": 7666442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K8FFo.jpg?s=128&g=1", "display_name": "AskNilesh", "link": "https://stackoverflow.com/users/7666442/asknilesh"}, "edited": false, "score": 0, "creation_date": 1547010856, "post_id": 54103552, "comment_id": 95039688, "body": "@NileshRathod posted."}, {"owner": {"reputation": 57589, "user_id": 7666442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K8FFo.jpg?s=128&g=1", "display_name": "AskNilesh", "link": "https://stackoverflow.com/users/7666442/asknilesh"}, "edited": false, "score": 0, "creation_date": 1547010993, "post_id": 54103552, "comment_id": 95039723, "body": "R u share you are getting exception from above code because code looks fine for me"}, {"owner": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "reply_to_user": {"reputation": 57589, "user_id": 7666442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K8FFo.jpg?s=128&g=1", "display_name": "AskNilesh", "link": "https://stackoverflow.com/users/7666442/asknilesh"}, "edited": false, "score": 0, "creation_date": 1547011078, "post_id": 54103552, "comment_id": 95039757, "body": "@NileshRathod yes,and it crashed on this line <code>dialog.show()</code>"}, {"owner": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "reply_to_user": {"reputation": 57589, "user_id": 7666442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K8FFo.jpg?s=128&g=1", "display_name": "AskNilesh", "link": "https://stackoverflow.com/users/7666442/asknilesh"}, "edited": false, "score": 0, "creation_date": 1547012718, "post_id": 54103552, "comment_id": 95040204, "body": "@NileshRathod I have solved it.Thanks"}, {"owner": {"reputation": 57589, "user_id": 7666442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K8FFo.jpg?s=128&g=1", "display_name": "AskNilesh", "link": "https://stackoverflow.com/users/7666442/asknilesh"}, "edited": false, "score": 1, "creation_date": 1547012781, "post_id": 54103552, "comment_id": 95040228, "body": "Happy to here that"}], "answers": [{"comments": [{"owner": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "edited": false, "score": 0, "creation_date": 1547011632, "post_id": 54103686, "comment_id": 95039891, "body": "I checked, it inside <code>layout</code> folder."}, {"owner": {"reputation": 8266, "user_id": 5305430, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/hxqD2.jpg?s=128&g=1", "display_name": "sushildlh", "link": "https://stackoverflow.com/users/5305430/sushildlh"}, "reply_to_user": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "edited": false, "score": 0, "creation_date": 1547011711, "post_id": 54103686, "comment_id": 95039914, "body": "you code looks fine. Have you used another resource inside your application ?"}], "tags": [], "owner": {"reputation": 8266, "user_id": 5305430, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/hxqD2.jpg?s=128&g=1", "display_name": "sushildlh", "link": "https://stackoverflow.com/users/5305430/sushildlh"}, "is_accepted": false, "score": 1, "last_activity_date": 1547012783, "last_edit_date": 1547012783, "creation_date": 1547011443, "answer_id": 54103686, "question_id": 54103552, "link": "https://stackoverflow.com/questions/54103552/resource-id-0x0-in-alertdialog/54103686#54103686", "title": "Resource ID #0x0 in AlertDialog", "body": "<blockquote>\n  <p>Above error comes if your application doesn't find out the resource.</p>\n</blockquote>\n\n<p>It have alot of possibilities. Such as sometimes we store files <code>style-v21</code> , <code>values-v21</code> or more.</p>\n\n<p><strong>Note:-</strong> Just check your <code>layout_loading_dialog.xml</code> inside the <code>layout</code> folder. It should not be inside the <code>layout-v21</code> folder.</p>\n\n<p><a href=\"https://i.stack.imgur.com/ZigTd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZigTd.png\" alt=\"enter image description here\"></a></p>\n\n<p>It above picture <code>fragment_sign_up_and_login.xml</code> is inside your <code>layout</code> folder but <code>fragment_splash.xml</code> is inside the <code>layout-v21</code> folder. </p>\n"}, {"comments": [{"owner": {"reputation": 57589, "user_id": 7666442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K8FFo.jpg?s=128&g=1", "display_name": "AskNilesh", "link": "https://stackoverflow.com/users/7666442/asknilesh"}, "edited": false, "score": 1, "creation_date": 1547012841, "post_id": 54103897, "comment_id": 95040242, "body": "You Just  replaced <code>AlertDialog.Builder</code> with <code>Dialog</code>"}], "tags": [], "owner": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "is_accepted": true, "score": 2, "last_activity_date": 1547012690, "creation_date": 1547012690, "answer_id": 54103897, "question_id": 54103552, "link": "https://stackoverflow.com/questions/54103552/resource-id-0x0-in-alertdialog/54103897#54103897", "title": "Resource ID #0x0 in AlertDialog", "body": "<p>It works fine after I modified to below code.</p>\n\n<pre><code>var dialogs = Dialog(this)\ndialogs.requestWindowFeature(Window.FEATURE_NO_TITLE)\ndialogs.getWindow().setBackgroundDrawable(ColorDrawable(Color.WHITE));\ndialogs.setCancelable(false)\ndialogs.setContentView(R.layout.layout_loading_dialog)\ndialogs.show()\n</code></pre>\n\n<p>No idea why.</p>\n"}], "owner": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 662, "favorite_count": 1, "accepted_answer_id": 54103897, "answer_count": 2, "score": 2, "last_activity_date": 1605152312, "creation_date": 1547010493, "last_edit_date": 1547010847, "question_id": 54103552, "link": "https://stackoverflow.com/questions/54103552/resource-id-0x0-in-alertdialog", "title": "Resource ID #0x0 in AlertDialog", "body": "<p>I adding an <code>AlertDialog</code> in kotlin file, but get exception</p>\n\n<pre><code>btnLogin.setOnClickListener { view -&gt;\n            login()\n        }\n\n\nfun login() {\n\n        val builder = AlertDialog.Builder(this@LoginActivity)\n        builder.setView(R.layout.layout_loading_dialog)\n        val dialog = builder.create()\n        dialog.show()\n     }\n</code></pre>\n\n<p><strong>Exception</strong></p>\n\n<pre><code>   android.content.res.Resources$NotFoundException: Resource ID #0x0\n        at android.content.res.ResourcesImpl.getValue(ResourcesImpl.java:195)\n        at android.content.res.Resources.loadXmlResourceParser(Resources.java:2133)\n        at android.content.res.Resources.getLayout(Resources.java:1142)\n        at android.view.LayoutInflater.inflate(LayoutInflater.java:421)\n        at android.view.LayoutInflater.inflate(LayoutInflater.java:374)\n        at android.support.v7.app.AppCompatDelegateImplV9.setContentView(AppCompatDelegateImplV9.java:287)\n</code></pre>\n\n<p><strong>xml</strong></p>\n\n<pre><code>&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n              android:layout_width=\"match_parent\"\n              android:layout_height=\"wrap_content\"\n              android:orientation=\"horizontal\"\n              android:padding=\"20dp\"&gt;\n    &lt;ProgressBar\n            android:id=\"@+id/progressBar\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"wrap_content\"\n            android:layout_weight=\"1\" /&gt;\n\n    &lt;TextView\n            android:id=\"@+id/textView\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"match_parent\"\n            android:layout_weight=\"4\"\n            android:gravity=\"center\"\n            android:text=\"Please wait! This may take a moment.\" /&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-recyclerview"], "comments": [{"owner": {"reputation": 3502, "user_id": 6880611, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-cZQAEORHS0I/AAAAAAAAAAI/AAAAAAAAAe4/KrGn0vxt7hE/photo.jpg?sz=128", "display_name": "Tejas Pandya", "link": "https://stackoverflow.com/users/6880611/tejas-pandya"}, "edited": false, "score": 0, "creation_date": 1547009987, "post_id": 54103473, "comment_id": 95039473, "body": "you&#39;re highlighting is based on position . so maintain your highlighting on another basis like  its id or name or something"}, {"owner": {"reputation": 603, "user_id": 6155816, "user_type": "registered", "profile_image": "https://graph.facebook.com/213628505692530/picture?type=large", "display_name": "Naveen", "link": "https://stackoverflow.com/users/6155816/naveen"}, "reply_to_user": {"reputation": 3502, "user_id": 6880611, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-cZQAEORHS0I/AAAAAAAAAAI/AAAAAAAAAe4/KrGn0vxt7hE/photo.jpg?sz=128", "display_name": "Tejas Pandya", "link": "https://stackoverflow.com/users/6880611/tejas-pandya"}, "edited": false, "score": 0, "creation_date": 1547010246, "post_id": 54103473, "comment_id": 95039534, "body": "how to do that? i am setting a onLongClickListener inside the onbindviewholder."}, {"owner": {"reputation": 603, "user_id": 6155816, "user_type": "registered", "profile_image": "https://graph.facebook.com/213628505692530/picture?type=large", "display_name": "Naveen", "link": "https://stackoverflow.com/users/6155816/naveen"}, "reply_to_user": {"reputation": 3502, "user_id": 6880611, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-cZQAEORHS0I/AAAAAAAAAAI/AAAAAAAAAe4/KrGn0vxt7hE/photo.jpg?sz=128", "display_name": "Tejas Pandya", "link": "https://stackoverflow.com/users/6880611/tejas-pandya"}, "edited": false, "score": 0, "creation_date": 1547010267, "post_id": 54103473, "comment_id": 95039541, "body": "from that listener i change the view bg color"}, {"owner": {"reputation": 5302, "user_id": 4265739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19cd59393a5b86c48f0da7bd5504c5b8?s=128&d=identicon&r=PG&f=1", "display_name": "leonardkraemer", "link": "https://stackoverflow.com/users/4265739/leonardkraemer"}, "edited": false, "score": 0, "creation_date": 1547010591, "post_id": 54103473, "comment_id": 95039616, "body": "I assume your adapter and recyclerview are not implemented well. Please share the adapters&#39; implementation. Just the fact that you need 2 methods to delete an item (<code>deleteResidentItem</code> and  <code>removeSelectedItemsFromModelById</code>) is an indicator."}, {"owner": {"reputation": 603, "user_id": 6155816, "user_type": "registered", "profile_image": "https://graph.facebook.com/213628505692530/picture?type=large", "display_name": "Naveen", "link": "https://stackoverflow.com/users/6155816/naveen"}, "edited": false, "score": 0, "creation_date": 1547010905, "post_id": 54103473, "comment_id": 95039703, "body": "deleteResidentItem deletes that item from server, removeSelectedItemsFromModelById removes from the modellist present in activity"}, {"owner": {"reputation": 603, "user_id": 6155816, "user_type": "registered", "profile_image": "https://graph.facebook.com/213628505692530/picture?type=large", "display_name": "Naveen", "link": "https://stackoverflow.com/users/6155816/naveen"}, "reply_to_user": {"reputation": 5302, "user_id": 4265739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19cd59393a5b86c48f0da7bd5504c5b8?s=128&d=identicon&r=PG&f=1", "display_name": "leonardkraemer", "link": "https://stackoverflow.com/users/4265739/leonardkraemer"}, "edited": false, "score": 0, "creation_date": 1547011054, "post_id": 54103473, "comment_id": 95039746, "body": "@leonardkraemer shared the adapter implementation."}], "answers": [{"comments": [{"owner": {"reputation": 57589, "user_id": 7666442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K8FFo.jpg?s=128&g=1", "display_name": "AskNilesh", "link": "https://stackoverflow.com/users/7666442/asknilesh"}, "reply_to_user": {"reputation": 5302, "user_id": 4265739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19cd59393a5b86c48f0da7bd5504c5b8?s=128&d=identicon&r=PG&f=1", "display_name": "leonardkraemer", "link": "https://stackoverflow.com/users/4265739/leonardkraemer"}, "edited": false, "score": 0, "creation_date": 1547011023, "post_id": 54103578, "comment_id": 95039733, "body": "@leonardkraemer didn&#39;t get u, any check i have updated my answer"}, {"owner": {"reputation": 603, "user_id": 6155816, "user_type": "registered", "profile_image": "https://graph.facebook.com/213628505692530/picture?type=large", "display_name": "Naveen", "link": "https://stackoverflow.com/users/6155816/naveen"}, "edited": false, "score": 0, "creation_date": 1547018521, "post_id": 54103578, "comment_id": 95042191, "body": "There is a problem in my case, i have been using my action bar icon item to remove the selected items, i have been using two listeners to communicate with the main activity, even when i add a member field to store whether it is selected or not, how should i remove the highlighting on delete?"}, {"owner": {"reputation": 57589, "user_id": 7666442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K8FFo.jpg?s=128&g=1", "display_name": "AskNilesh", "link": "https://stackoverflow.com/users/7666442/asknilesh"}, "reply_to_user": {"reputation": 603, "user_id": 6155816, "user_type": "registered", "profile_image": "https://graph.facebook.com/213628505692530/picture?type=large", "display_name": "Naveen", "link": "https://stackoverflow.com/users/6155816/naveen"}, "edited": false, "score": 0, "creation_date": 1547020712, "post_id": 54103578, "comment_id": 95043180, "body": "@NaveenKingmaker i have  mention in my answer how to <code>remove selection</code> and <code>how to delete item</code>"}, {"owner": {"reputation": 603, "user_id": 6155816, "user_type": "registered", "profile_image": "https://graph.facebook.com/213628505692530/picture?type=large", "display_name": "Naveen", "link": "https://stackoverflow.com/users/6155816/naveen"}, "edited": false, "score": 0, "creation_date": 1547021358, "post_id": 54103578, "comment_id": 95043472, "body": "unable to understand where to highlight those items?"}, {"owner": {"reputation": 603, "user_id": 6155816, "user_type": "registered", "profile_image": "https://graph.facebook.com/213628505692530/picture?type=large", "display_name": "Naveen", "link": "https://stackoverflow.com/users/6155816/naveen"}, "edited": false, "score": 0, "creation_date": 1547031269, "post_id": 54103578, "comment_id": 95049028, "body": "figured it out, all you need to do is to set up a condition loop on onBindViewHolder to highlight the items"}, {"owner": {"reputation": 57589, "user_id": 7666442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K8FFo.jpg?s=128&g=1", "display_name": "AskNilesh", "link": "https://stackoverflow.com/users/7666442/asknilesh"}, "reply_to_user": {"reputation": 603, "user_id": 6155816, "user_type": "registered", "profile_image": "https://graph.facebook.com/213628505692530/picture?type=large", "display_name": "Naveen", "link": "https://stackoverflow.com/users/6155816/naveen"}, "edited": false, "score": 0, "creation_date": 1547031359, "post_id": 54103578, "comment_id": 95049101, "body": "@NaveenKingmaker happy to help you"}, {"owner": {"reputation": 603, "user_id": 6155816, "user_type": "registered", "profile_image": "https://graph.facebook.com/213628505692530/picture?type=large", "display_name": "Naveen", "link": "https://stackoverflow.com/users/6155816/naveen"}, "edited": false, "score": 1, "creation_date": 1547031582, "post_id": 54103578, "comment_id": 95049301, "body": "Sorry should have done it , forgot to do so.Thanks for helping Nilesh and leonard"}], "tags": [], "owner": {"reputation": 57589, "user_id": 7666442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K8FFo.jpg?s=128&g=1", "display_name": "AskNilesh", "link": "https://stackoverflow.com/users/7666442/asknilesh"}, "is_accepted": true, "score": 2, "last_activity_date": 1547013947, "last_edit_date": 1547013947, "creation_date": 1547010674, "answer_id": 54103578, "question_id": 54103473, "link": "https://stackoverflow.com/questions/54103473/how-to-clear-highlighted-items-in-the-recyclerview/54103578#54103578", "title": "How to clear highlighted items in the recyclerview?", "body": "<p>Try this:</p>\n\n<p>Take a <code>Boolean</code> variable in your POJO class</p>\n\n<pre><code>public class POJO {\n\n    boolean isSelected;\n\n    public boolean isSelected() {\n        return isSelected;\n    }\n\n    public void setSelected(boolean selected) {\n        isSelected = selected;\n    }\n}\n</code></pre>\n\n<p>make below change in your <code>onBindViewHolder()</code> method</p>\n\n<pre><code> @Override\npublic void onBindViewHolder(@NonNull RecyclerView.ViewHolder holder, int position) {\n\n    if(pojoArrayList.get(position).isSelected()){\n        // make selection in your item\n    }else {\n        //remove selction from you item\n    }\n}\n</code></pre>\n\n<p>Now inside your <code>onLongClickListener</code> make your selection true </p>\n\n<p><strong>sample code</strong></p>\n\n<pre><code>    sampleButton.setOnLongClickListener(new View.OnLongClickListener() {\n        @Override\n        public boolean onLongClick(View view) {\n\n            // set the status of selection \n            pojoArrayList.get(position).setSelected(true);\n\n            return true;\n        }\n    });\n</code></pre>\n\n<p>And when your want to remove selection use this</p>\n\n<pre><code>  pojoArrayList.get(position).setSelected(false);\n</code></pre>\n\n<p>and when you want to delete item from list use that <code>boolean</code> variable to delete item</p>\n\n<pre><code> if(pojoArrayList.get(position).isSelected()){\n        //remove the item from list\n       // and  notifyDataSetChanged(); after removing the item from list\n }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5302, "user_id": 4265739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19cd59393a5b86c48f0da7bd5504c5b8?s=128&d=identicon&r=PG&f=1", "display_name": "leonardkraemer", "link": "https://stackoverflow.com/users/4265739/leonardkraemer"}, "is_accepted": false, "score": 2, "last_activity_date": 1547013897, "last_edit_date": 1547013897, "creation_date": 1547011963, "answer_id": 54103778, "question_id": 54103473, "link": "https://stackoverflow.com/questions/54103473/how-to-clear-highlighted-items-in-the-recyclerview/54103778#54103778", "title": "How to clear highlighted items in the recyclerview?", "body": "<p>Your problem is in <code>when (holder.is_selected.isChecked) {</code></p>\n\n<p>You should have the information if an item is checked on the ViewModel, not on the View and most definitely not in the ViewHolder.</p>\n\n<p>It should be something like <code>if(residentItems.get(posistion).isSelected){</code> (Using <code>when</code> is overkill for binary cases)</p>\n"}], "owner": {"reputation": 603, "user_id": 6155816, "user_type": "registered", "profile_image": "https://graph.facebook.com/213628505692530/picture?type=large", "display_name": "Naveen", "link": "https://stackoverflow.com/users/6155816/naveen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1009, "favorite_count": 0, "accepted_answer_id": 54103578, "answer_count": 2, "score": 2, "last_activity_date": 1547112939, "creation_date": 1547009826, "last_edit_date": 1547011476, "question_id": 54103473, "link": "https://stackoverflow.com/questions/54103473/how-to-clear-highlighted-items-in-the-recyclerview", "title": "How to clear highlighted items in the recyclerview?", "body": "<p>I have implemented the recycler view multiple item selection by changing the background color of item when selected.When i remove those items from the model, items get removed but the highlighting does not go away with the item removed, instead it is applied on the remaining items.</p>\n\n<p>I have tried to remove the items from the model and notify the adapter on the each removal like below</p>\n\n<pre><code>  for (item in selectedItems) {\n                        deleteResidentItem(item.key, sharedPreferences.getString(\"AuthToken\", SHARED_PREFERENCE_DOES_NOT_EXIST))\n                        removeSelectedItemsFromModelById(item.key)\n                        residentRecyclerViewAdapter.notifyItemRemoved(item.value)\n                        residentRecyclerViewAdapter.notifyItemRangeChanged(item.value, mutableResidentList.size)\n                    }\n</code></pre>\n\n<p>even after removing the item the highlighted items still appear on the list randomly, like the example below</p>\n\n<p><a href=\"https://i.stack.imgur.com/TUSt2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TUSt2.png\" alt=\"selected items\"></a>\n<a href=\"https://i.stack.imgur.com/cmUdY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cmUdY.png\" alt=\"After removal\"></a></p>\n\n<p>i want the highlighted views to be gone after removing from model, how to solve this problem?</p>\n\n<p>Adapter implementation code</p>\n\n<pre><code>class ResidentRecyclerViewAdapter( val residentItems: List&lt;ResidentListModel&gt;):RecyclerView.Adapter&lt;ResidentRecyclerViewAdapter.ResidentViewHolder&gt;() {\n\n\n\n    lateinit var residentRecyclerViewListenerInterface:ResidentRecyclerViewListenerInterface\n\n    fun initResidentRecyclerViewListenerInterface(listener:ResidentRecyclerViewListenerInterface) {\n        residentRecyclerViewListenerInterface = listener\n    }\n\n    override fun onCreateViewHolder(parent: ViewGroup, p1: Int): ResidentViewHolder {\n        var layoutInflater = LayoutInflater.from(parent.context)\n        var inflatedLayout = layoutInflater.inflate(R.layout.single_resident_item, parent, false)\n        return ResidentViewHolder(inflatedLayout, residentRecyclerViewListenerInterface)\n    }\n\n    override fun getItemCount() = residentItems.size\n    override fun onBindViewHolder(holder: ResidentViewHolder, posistion:Int) {\n        //place to bind the values\n        val ModelName = residentItems.get(posistion).ModelName\n        val VechicleNo = residentItems.get(posistion).VehicleNo\n        val SlNo = residentItems.get(posistion).SlNo\n        holder.vehicle_number.text = VechicleNo\n        holder.model_name.text = ModelName\n        holder.sl_no.text = SlNo.toString()\n\n        holder.resident_item_wrapper.setOnLongClickListener {\n\n            when (holder.is_selected.isChecked) {\n                // not checked, then check, add to list\n                false-&gt; {\n                    holder.resident_item_wrapper.setBackgroundColor(Color.parseColor(\"#1565c0\"))\n                    holder.resident_vehicle_number.setTextColor(Color.WHITE)\n                    holder.resident_model_name.setTextColor(Color.WHITE)\n                    holder.is_selected.setBackgroundColor(Color.WHITE)\n                    holder.is_selected.visibility = View.VISIBLE\n                    holder.is_selected.isChecked = true\n                    residentRecyclerViewListenerInterface.onResidentItemLongClickListener(holder.sl_no.text.toString().toInt(), posistion)\n\n                }\n\n                true -&gt; {\n                    // checked then unselect and remove from list\n                    holder.resident_item_wrapper.setBackgroundColor(Color.WHITE)\n                    holder.resident_vehicle_number.setTextColor(Color.BLACK)\n                    holder.resident_model_name.setTextColor(Color.BLACK)\n                    holder.is_selected.setBackgroundColor(Color.BLACK)\n                    holder.is_selected.visibility = View.GONE\n                    holder.is_selected.isChecked = false\n                    residentRecyclerViewListenerInterface.onResidentItemLongUnselectClickListener(holder.sl_no.text.toString().toInt(),posistion)\n\n                }\n            }\n            true\n        }\n    }\n    interface ResidentRecyclerViewListenerInterface {\n        fun onResidentItemLongClickListener(Id:Int, Position:Int)\n        fun onResidentItemClickListener(Id:Int, Position: Int)\n        fun onResidentItemLongUnselectClickListener(Id: Int, Position: Int)\n    }\n\n    class ResidentViewHolder(val view: View, residentRecyclerViewListenerInterface:ResidentRecyclerViewListenerInterface):RecyclerView.ViewHolder(view) {\n        var vehicle_number:TextView\n        var model_name:TextView\n        var sl_no:TextView\n        var resident_item_wrapper:CardView\n        var is_selected:CheckBox\n        var resident_vehicle_number:TextView\n        var resident_model_name:TextView\n        lateinit var residentRecyclerViewListenerInterface:ResidentRecyclerViewListenerInterface\n\n        init {\n            vehicle_number = view.resident_vehicle_number\n            model_name = view.resident_model_name\n            sl_no = view.resident_slno\n            resident_item_wrapper = view.resident_item_wrapper\n            is_selected = view.is_selected\n            resident_vehicle_number = view.resident_vehicle_number\n            resident_model_name = view.resident_model_name\n\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["java", "kotlin", "overriding", "nullable"], "comments": [{"owner": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "edited": false, "score": 0, "creation_date": 1546999802, "post_id": 54102237, "comment_id": 95037546, "body": "I&#39;m going to take a complete shot in the dark here... Does changing the data type from <code>Intent?</code> to <code>Intent</code> allow you to compile?"}, {"owner": {"reputation": 486, "user_id": 2017057, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8rHyH.jpg?s=128&g=1", "display_name": "James Bone", "link": "https://stackoverflow.com/users/2017057/james-bone"}, "reply_to_user": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "edited": false, "score": 0, "creation_date": 1547003075, "post_id": 54102237, "comment_id": 95038113, "body": "No.  Intent is nullable because the parent class is in Java (android.support.v7.app.AppCompatActivity)"}, {"owner": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "edited": false, "score": 1, "creation_date": 1547004167, "post_id": 54102237, "comment_id": 95038302, "body": "According to <a href=\"https://www.raywenderlich.com/500-introduction-to-android-activities-with-kotlin\" rel=\"nofollow noreferrer\">this tutorial</a>, you&#39;ll need Kotlin 1.2.71 &amp; Android Studio 3.2.1. Do you have high enough versions of these?"}, {"owner": {"reputation": 486, "user_id": 2017057, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8rHyH.jpg?s=128&g=1", "display_name": "James Bone", "link": "https://stackoverflow.com/users/2017057/james-bone"}, "reply_to_user": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "edited": false, "score": 0, "creation_date": 1547006380, "post_id": 54102237, "comment_id": 95038716, "body": "byxor: yes, those are the exact version numbers I&#39;m using.  I saw that tutorial and while I didn&#39;t download their code their snippet on that section doesn&#39;t seem to mention it."}], "answers": [{"comments": [{"owner": {"reputation": 486, "user_id": 2017057, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8rHyH.jpg?s=128&g=1", "display_name": "James Bone", "link": "https://stackoverflow.com/users/2017057/james-bone"}, "edited": false, "score": 0, "creation_date": 1547086447, "post_id": 54103099, "comment_id": 95074303, "body": "I found some additional faults with my build.gradle that were related.  I&#39;ve put them up on my blog: <a href=\"https://www.designanddata.net/wordpress/2019/01/10/kotlin-for-android-with-room/\" rel=\"nofollow noreferrer\">designanddata.net/wordpress/2019/01/10/&hellip;</a>"}], "tags": [], "owner": {"reputation": 486, "user_id": 2017057, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8rHyH.jpg?s=128&g=1", "display_name": "James Bone", "link": "https://stackoverflow.com/users/2017057/james-bone"}, "is_accepted": true, "score": 1, "last_activity_date": 1547006738, "creation_date": 1547006738, "answer_id": 54103099, "question_id": 54102237, "link": "https://stackoverflow.com/questions/54102237/override-annotation-required-and-not-kotlin/54103099#54103099", "title": "Override annotation required and not - Kotlin", "body": "<p>Thanks to a clue from byxor, I checked my build.grade</p>\n\n<p>My IDE (Android Studio) reported a version mismatch in it's Kotlin version and the documentation.  I've upgraded to 1.3.11 and it's resolved the issue by recognizing the need for the override annotation.</p>\n"}], "owner": {"reputation": 486, "user_id": 2017057, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8rHyH.jpg?s=128&g=1", "display_name": "James Bone", "link": "https://stackoverflow.com/users/2017057/james-bone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 922, "favorite_count": 0, "accepted_answer_id": 54103099, "answer_count": 1, "score": 3, "last_activity_date": 1547006738, "creation_date": 1546998577, "question_id": 54102237, "link": "https://stackoverflow.com/questions/54102237/override-annotation-required-and-not-kotlin", "title": "Override annotation required and not - Kotlin", "body": "<p>Related to : <a href=\"https://stackoverflow.com/questions/52652998/error-onactivityresult-overrides-nothing\">Error: onActivityResult overrides nothing</a></p>\n\n<p>I've tried Dhaval Patel's solution and get the report that it overrides nothing from my parser.\nOmitting the override annotation reports that it hides the super method and override is required.  Is there an issue with my parser?</p>\n\n<p>How the documentation says to implement the method (which won't compile)\n<a href=\"https://developer.android.com/training/basics/intents/result\" rel=\"nofollow noreferrer\">https://developer.android.com/training/basics/intents/result</a></p>\n\n<p>How I only get a parser warning - overrides nothing, override redundant</p>\n\n<pre><code>override fun onActivityResult(requestCode:Int, resultCode:Int, data:Intent?) \n</code></pre>\n\n<p>How I get a compile error - override annotation required:</p>\n\n<pre><code>fun onActivityResult(requestCode:Int, resultCode:Int, data:Intent?)\n</code></pre>\n"}, {"tags": ["kotlin", "fragment", "viewmodel", "anko", "anko-component"], "answers": [{"tags": [], "owner": {"reputation": 2081, "user_id": 3294175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99d6b46af0ce01b3934979d8d7631b43?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Martori", "link": "https://stackoverflow.com/users/3294175/eric-martori"}, "is_accepted": true, "score": 0, "last_activity_date": 1547019649, "creation_date": 1547019649, "answer_id": 54105259, "question_id": 54101838, "link": "https://stackoverflow.com/questions/54101838/android-how-to-observe-viewmodel-in-ankocomponent/54105259#54105259", "title": "android - how to observe viewmodel in ankocomponent", "body": "<pre><code> ViewModelProviders.of(BroadcastCalendarFragment())\n</code></pre>\n\n<p>is creating a new <code>BroadcastCalendarFragment</code> and trying to find/create the viewmodel from it. The issue is that this new fragment is not attached to any activity and for this the <code>ViewModelProviders</code> is not able to find a suitable provider.</p>\n\n<p>You should be able to find the apropiate fragment instance with </p>\n\n<pre><code>ViewModelProviders.of(owner).get(BroadcastModel::class.java)\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 5032156, "user_type": "registered", "profile_image": "https://graph.facebook.com/1442373926070203/picture?type=large", "display_name": "Michael Theodore", "link": "https://stackoverflow.com/users/5032156/michael-theodore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 54105259, "answer_count": 1, "score": -1, "last_activity_date": 1547019649, "creation_date": 1546995160, "question_id": 54101838, "link": "https://stackoverflow.com/questions/54101838/android-how-to-observe-viewmodel-in-ankocomponent", "title": "android - how to observe viewmodel in ankocomponent", "body": "<p>i want to use viewmodelproviders in anko component</p>\n\n<p>i studied viewmodel documentation on google developer guide but this particular use case is not documented</p>\n\n<pre><code>class BroadcastCalendarFragment: Fragment() \n{\n  lateinit var mBroadcastModel: BroadcastModel\n\n  override fun onCreateView(inflater: LayoutInflater, container: \n  ViewGroup?, savedInstanceState: Bundle?): View? {\n        return BroadcastCalendarUI&lt;Fragment&gt;().createView(AnkoContext.create(ctx, this))\n    }\n}\n\nclass BroadcastCalendarUI&lt;BroadcastCalendarFragment&gt;(): AnkoComponent&lt;BroadcastCalendarFragment&gt;\n{\n\n    lateinit var broadcastModel: BroadcastModel\n\n    override fun createView(ui: AnkoContext&lt;BroadcastCalendarFragment&gt;): View = with(ui) {\n    verticalLayout{\n      button.setOnclickListener{\n      broadcastModel = ViewModelProviders.of(BroadcastCalendarFragment()).get(BroadcastModel::class.java)\n\n      }\n   } \n  }\n}\n</code></pre>\n\n<p>If I click on the button, there is an error saying</p>\n\n<p>java.lang.IllegalStateException: Can't create ViewModelProvider for detached fragment</p>\n\n<p>(It craps out at the line where I use ViewModelProviders(BroadcastCalendarFragment() in the click listener)</p>\n"}, {"tags": ["android", "gradle", "kotlin", "kotlin-android-extensions"], "comments": [{"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 1, "creation_date": 1546994847, "post_id": 54101756, "comment_id": 95036459, "body": "What exactly does &quot;it does not work for me&quot; mean? What are your precise symptoms?"}, {"owner": {"reputation": 1748, "user_id": 5270947, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-U0fi_VXLGJk/AAAAAAAAAAI/AAAAAAAAFVM/RuuSB4audO0/photo.jpg?sz=128", "display_name": "Juanes30", "link": "https://stackoverflow.com/users/5270947/juanes30"}, "reply_to_user": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1546995191, "post_id": 54101756, "comment_id": 95036538, "body": "when I try to use the annotation @Parcelize it tells me unresolved reference Parcelize, and if I try to import manually, import kotlinx.android.parcel.Parcelize does not work either"}, {"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 1, "creation_date": 1546995929, "post_id": 54101756, "comment_id": 95036715, "body": "Your library <code>build.gradle</code> file does not show the <code>androidExtensions { experimental = true }</code> closure. Do you have it?"}, {"owner": {"reputation": 1748, "user_id": 5270947, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-U0fi_VXLGJk/AAAAAAAAAAI/AAAAAAAAFVM/RuuSB4audO0/photo.jpg?sz=128", "display_name": "Juanes30", "link": "https://stackoverflow.com/users/5270947/juanes30"}, "reply_to_user": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1546997365, "post_id": 54101756, "comment_id": 95037023, "body": "when I add <code>androidExtensions {experimental = true}</code> to the gradle of the library, gradle not sync,"}, {"owner": {"reputation": 16268, "user_id": 603270, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cbfe6e57e0fa59928be4898a7be08c5d?s=128&d=identicon&r=PG", "display_name": "shkschneider", "link": "https://stackoverflow.com/users/603270/shkschneider"}, "edited": false, "score": 0, "creation_date": 1547025487, "post_id": 54101756, "comment_id": 95045572, "body": "Kotlin version 1.1.4 or newer?"}, {"owner": {"reputation": 1748, "user_id": 5270947, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-U0fi_VXLGJk/AAAAAAAAAAI/AAAAAAAAFVM/RuuSB4audO0/photo.jpg?sz=128", "display_name": "Juanes30", "link": "https://stackoverflow.com/users/5270947/juanes30"}, "edited": false, "score": 0, "creation_date": 1547036444, "post_id": 54101756, "comment_id": 95052145, "body": "Kotlin version 1.3.11"}, {"owner": {"reputation": 355, "user_id": 4394827, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-PrBifHVH4R0/AAAAAAAAAAI/AAAAAAAAFFI/-g-9UGGCzqk/photo.jpg?sz=128", "display_name": "Hemanth S Tobi", "link": "https://stackoverflow.com/users/4394827/hemanth-s-tobi"}, "edited": false, "score": 0, "creation_date": 1551610328, "post_id": 54101756, "comment_id": 96695933, "body": "Is your library Android or Java. You can&#39;t add to Java library."}, {"owner": {"reputation": 1748, "user_id": 5270947, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-U0fi_VXLGJk/AAAAAAAAAAI/AAAAAAAAFVM/RuuSB4audO0/photo.jpg?sz=128", "display_name": "Juanes30", "link": "https://stackoverflow.com/users/5270947/juanes30"}, "reply_to_user": {"reputation": 355, "user_id": 4394827, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-PrBifHVH4R0/AAAAAAAAAAI/AAAAAAAAFFI/-g-9UGGCzqk/photo.jpg?sz=128", "display_name": "Hemanth S Tobi", "link": "https://stackoverflow.com/users/4394827/hemanth-s-tobi"}, "edited": false, "score": 0, "creation_date": 1551722553, "post_id": 54101756, "comment_id": 96735608, "body": "@HemanthSTobi the project is of type <code>com.android.library</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1748, "user_id": 5270947, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-U0fi_VXLGJk/AAAAAAAAAAI/AAAAAAAAFVM/RuuSB4audO0/photo.jpg?sz=128", "display_name": "Juanes30", "link": "https://stackoverflow.com/users/5270947/juanes30"}, "is_accepted": true, "score": 2, "last_activity_date": 1566526343, "creation_date": 1566526343, "answer_id": 57619043, "question_id": 54101756, "link": "https://stackoverflow.com/questions/54101756/kotlin-android-extensions-does-not-work-in-a-library-type-module/57619043#57619043", "title": "Kotlin Android Extensions does not work in a library type module", "body": "<p>I just rehearsed with the version of <code>Kotlin 1.3.50</code> and it works correctly with the following configuration:</p>\n\n<p>The project must be of type <code>com.android.application</code> or<code>com.android.library</code>. In my case I am using a project of type <code>android.library</code>.</p>\n\n<p><strong>build.gradle (library)</strong></p>\n\n<pre><code>apply plugin: 'com.android.library'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\n\nandroid {\n  ...\n}\n\nandroidExtensions {\n  experimental = true\n}\n\ndependencies {\n  ...\n}\n</code></pre>\n\n<p><strong>Model Class</strong></p>\n\n<pre><code>import android.os.Parcelable\nimport kotlinx.android.parcel.Parcelize\n\n@Parcelize\ndata class Test(val prop: String) : Parcelable\n</code></pre>\n"}], "owner": {"reputation": 1748, "user_id": 5270947, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-U0fi_VXLGJk/AAAAAAAAAAI/AAAAAAAAFVM/RuuSB4audO0/photo.jpg?sz=128", "display_name": "Juanes30", "link": "https://stackoverflow.com/users/5270947/juanes30"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1377, "favorite_count": 0, "accepted_answer_id": 57619043, "answer_count": 1, "score": 5, "last_activity_date": 1614983301, "creation_date": 1546994512, "last_edit_date": 1614983301, "question_id": 54101756, "link": "https://stackoverflow.com/questions/54101756/kotlin-android-extensions-does-not-work-in-a-library-type-module", "title": "Kotlin Android Extensions does not work in a library type module", "body": "<p>I'm trying to implement kotlin android extensions to use the @Parcelize annotation, if I implement it in the application's module ('com.android.application') it works without problems, but when I try to use it in a library-type module ('com.android.library') it does not work for me.</p>\n<p>The configuration of my gradle is the following:</p>\n<p>Build.gradle // app</p>\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'jacoco'\napply plugin: 'io.fabric'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\napply plugin: 'kotlin-kapt'\n\napply plugin: 'kotlin-allopen'\napply plugin: 'androidx.navigation.safeargs'\n\nallOpen {\n  annotation 'com.juanlondono.app.soldi.testing.OpenClass'\n}\n\nandroidExtensions {\n  experimental = true\n}\n\ndependencies {\n  implementation fileTree(dir: 'libs', include: ['*.jar'])\n\n  // ------------------------- KOTLIN ------------------------- //\n  implementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk8:1.3.11&quot;\n\n ... // Other Dependencies\n\n}\n</code></pre>\n<p>Build.gradle // library</p>\n<pre><code>    apply plugin: 'com.android.library'\n    apply plugin: 'kotlin-android'\n    apply plugin: 'kotlin-android-extensions'\n\n    dependencies {\n      implementation fileTree(dir: 'libs', include: ['*.jar'])\n    \n      // ------------------------- KOTLIN ------------------------- //\n      implementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk8:1.3.11&quot;\n   \n    ... // Other Dependencies\n    }\n</code></pre>\n<p>To make the configuration of kotlin android extensions I base myself in the following guide: <a href=\"https://kotlinlang.org/docs/tutorials/android-plugin.html\" rel=\"nofollow noreferrer\">Kotlinlang</a></p>\n<p>After making the previous configuration I try to implement the @Parcelize annotation and it does not work I get the message of <strong>unresolved reference Parcelize.</strong></p>\n<p>adding</p>\n<pre><code>androidExtensions {\n   experimental = true\n} \n</code></pre>\n<p>At the gradle of the library, the following error occurs:</p>\n<pre><code>Cannot invoke method get() on null object\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nA problem occurred configuring project ':app'.\n&gt; Could not resolve all dependencies for configuration ':app:prodDebugRuntimeClasspath'.\n   &gt; A problem occurred configuring project ':model'.\n      &gt; Failed to notify dependency resolution listener.\n         &gt; Cannot invoke method get() on null object\n         &gt; Cannot invoke method get() on null object\n         &gt; Cannot invoke method get() on null object\n         &gt; Cannot invoke method get() on null object\n</code></pre>\n<p>For now, the implementation of Parcelable is done manually.</p>\n<p><strong>UPDATE</strong></p>\n<p>recently kotlin extension is deprecated in favor of kotlin-parcelize to make the project work the following must be changed:</p>\n<p><strong>STEP 1:</strong> Update to latest kotlin version(1.4.20) or newer</p>\n<p><strong>STEP 2:</strong> replace <code>apply plugin: 'kotlin-android-extensions'</code>\nwith this <code>apply plugin: 'kotlin-parcelize'</code></p>\n<p><strong>Step 2:</strong> Remove this code from the android {}</p>\n<pre><code>androidExtensions {\n    experimental = true\n}\n</code></pre>\n<p><strong>Step 3:</strong> Replace old import <code>import kotlinx.android.parcel.Parcelize</code>\nwith new import <code>import kotlinx.parcelize.Parcelize</code></p>\n"}, {"tags": ["dictionary", "kotlin", "return-value"], "answers": [{"tags": [], "owner": {"reputation": 5302, "user_id": 4265739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19cd59393a5b86c48f0da7bd5504c5b8?s=128&d=identicon&r=PG&f=1", "display_name": "leonardkraemer", "link": "https://stackoverflow.com/users/4265739/leonardkraemer"}, "is_accepted": true, "score": 0, "last_activity_date": 1546988273, "last_edit_date": 1546988273, "creation_date": 1546985064, "answer_id": 54100416, "question_id": 54100370, "link": "https://stackoverflow.com/questions/54100370/correctly-returning-int-from-hashmap-in-a-function/54100416#54100416", "title": "Correctly returning Int from Hashmap in a function", "body": "<p>The underlying problem is that <code>calculatedResults</code> could have been modified by an other thread between contains (<code>if(calculatedResults.containsKey(n))</code>) and get (<code>return calculatedResults[n]</code>). </p>\n\n<p>Even after checking with <code>containsKey</code> <code>calculatedResults[n]</code> could therefore possibly return a wrong result, including <code>null</code>, and this way of checking should be avoided. </p>\n\n<p>Using <code>!!</code> should generally only be used when  absolutely necessary, because it can cause a NPE. It definitely is hacky.</p>\n\n<p>Use the following syntax to overcome the problem:</p>\n\n<pre><code>calculatedResults[n]?.let {\n    return it\n}\n</code></pre>\n\n<p>Basically this is a nice way of saying </p>\n\n<pre><code>val result = calculatedResults[n]\nif(result != null) {\n    return result\n}\n</code></pre>\n\n<p>see <a href=\"https://kotlinlang.org/docs/reference/null-safety.html#safe-calls\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/null-safety.html#safe-calls</a></p>\n\n<p>Even better is to use the built-in <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/get-or-put.html\" rel=\"nofollow noreferrer\">getOrPut</a>:</p>\n\n<pre><code>private fun q2(n: Int): Int {\n    return calculatedResults.getOrPut(n) { calcQ() }\n}\n\nprivate fun calcQ(): Int {\n    val q = ...\n    return q\n}\n</code></pre>\n\n<p><strong>Should the return type of the function be <code>Int?</code> because while the <code>HashMap</code> might contain the key n the value could be null? Wouldn't that mean the <code>HashMap</code> should be <code>&lt;Int, Int?&gt;</code>?</strong></p>\n\n<p>No, you did exactly the right thing when you defined the method signature. The compiler only complained because what happened within the method did not fit it. If you change the method signature you just move the problem to the function calling <code>q2</code> without handling it.</p>\n"}, {"tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": false, "score": 0, "last_activity_date": 1546986600, "creation_date": 1546986600, "answer_id": 54100662, "question_id": 54100370, "link": "https://stackoverflow.com/questions/54100370/correctly-returning-int-from-hashmap-in-a-function/54100662#54100662", "title": "Correctly returning Int from Hashmap in a function", "body": "<p>You should consider re-writing this to more idiomatic code. It's a rather basic task to compute a value if it is not set in the map already:</p>\n\n<pre><code>fun q2(n: Int): Int {\n    return calculatedResults.getOrPut(n) {\n        42 //q\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "is_accepted": false, "score": 1, "last_activity_date": 1546988485, "last_edit_date": 1546988485, "creation_date": 1546987435, "answer_id": 54100784, "question_id": 54100370, "link": "https://stackoverflow.com/questions/54100370/correctly-returning-int-from-hashmap-in-a-function/54100784#54100784", "title": "Correctly returning Int from Hashmap in a function", "body": "<p><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/get-or-put.html\" rel=\"nofollow noreferrer\">getOrPut</a> will check if a value exists for <code>n</code>. If the value exists, it will be returned. If the values does not exist the value returned by the lambda will be assigned and afterwards returned by <code>getOrPut</code>. </p>\n\n<p>Take a look at this example:</p>\n\n<pre><code>fun calculate(n: Int) = n * 5 // some calculation\n\nprivate fun q2(n: Int) = calculatedResults.getOrPut(n) {\n    calculate(n)\n}\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p>Should the return type of the function be Int? because while the\n  HashMap might contain the key n the value could be null? Wouldn't that\n  mean the HashMap should be ?</p>\n</blockquote>\n\n<p>In this case the answer to the question is obviously \"no\" because if the value is missing you just add it. So, the value returned by <code>q2</code> can never be <code>null</code>.</p>\n"}], "owner": {"reputation": 53, "user_id": 3399185, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/592895048/picture?type=large", "display_name": "mike73", "link": "https://stackoverflow.com/users/3399185/mike73"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 54100416, "answer_count": 3, "score": 2, "last_activity_date": 1546988485, "creation_date": 1546984822, "last_edit_date": 1546987520, "question_id": 54100370, "link": "https://stackoverflow.com/questions/54100370/correctly-returning-int-from-hashmap-in-a-function", "title": "Correctly returning Int from Hashmap in a function", "body": "<p>I have a function in Kotlin which takes in an <code>Int</code> argument and return a value based on a formula. To speed things up I store intermediate results in a <code>HashMap&lt;Int, Int&gt;</code></p>\n\n<pre><code>private val calculatedResults = HashMap&lt;Int, Int&gt;()\n\nprivate fun q2(n: Int): Int {\n    if(calculatedResults.containsKey(n)) {\n            return calculatedResults[n]\n    }\n\n    val q = ...\n    calculatedResults[n] = q\n    return q\n}\n</code></pre>\n\n<p>I'm getting a <code>type mismatch of Int found but Int? required</code> at</p>\n\n<pre><code>return calculatedResults[n]\n</code></pre>\n\n<p>Im not sure how to correctly write this. I had</p>\n\n<pre><code>return calculatedResults[n]!!\n</code></pre>\n\n<p>But I'm not sure, if it's a bit hacky.</p>\n\n<p>Should the return type of the function be <code>Int?</code> because while the <code>HashMap</code> might contain the key <code>n</code> the value could be <code>null</code>? Wouldn't that mean the <code>HashMap</code> should be <code>&lt;Int, Int?&gt;</code>?</p>\n"}, {"tags": ["hibernate", "jpa", "kotlin", "derby"], "comments": [{"owner": {"reputation": 1382, "user_id": 1235535, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/HQ7BS.png?s=128&g=1", "display_name": "FoxHowl", "link": "https://stackoverflow.com/users/1235535/foxhowl"}, "edited": false, "score": 0, "creation_date": 1546985754, "post_id": 54100272, "comment_id": 95033903, "body": "Have you looked at <a href=\"https://stackoverflow.com/questions/39861098/replace-sequencegenerator-since-its-deprecated\" title=\"replace sequencegenerator since its deprecated\">stackoverflow.com/questions/39861098/&hellip;</a>"}, {"owner": {"reputation": 15375, "user_id": 193453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc77f0d4e25a0f95d90a768aeb0a8517?s=128&d=identicon&r=PG", "display_name": "Bryan Pendleton", "link": "https://stackoverflow.com/users/193453/bryan-pendleton"}, "edited": false, "score": 0, "creation_date": 1547000265, "post_id": 54100272, "comment_id": 95037642, "body": "For advice on controlling the sequence number preallocation behavior of Derby, see: <a href=\"https://stackoverflow.com/a/31804619/193453\">stackoverflow.com/a/31804619/193453</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2056, "user_id": 8994385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TCrAH.png?s=128&g=1", "display_name": "Thorben Janssen", "link": "https://stackoverflow.com/users/8994385/thorben-janssen"}, "is_accepted": false, "score": 0, "last_activity_date": 1547024215, "creation_date": 1547024215, "answer_id": 54106337, "question_id": 54100272, "link": "https://stackoverflow.com/questions/54100272/hibernate-generates-next-sequence-number-by-incrementing-previous-by-100/54106337#54106337", "title": "Hibernate generates next sequence number by incrementing previous by 100", "body": "<p>You need to check the <code>INCREMENT BY</code> value of your database sequence <a href=\"https://db.apache.org/derby/docs/10.8/ref/rrefsqljcreatesequence.html\" rel=\"nofollow noreferrer\">in your database</a>. \nHibernate only request the next sequence value from the database. The database then increments it by the configure step size (in your case 100) and returns the new value.</p>\n\n<p>Before I explain Hibernate's <code>increment_size</code> parameter, please take a look at the <code>@GeneratedValue(strategy = GenerationType.SEQUENCE)</code> which I explain in <a href=\"https://thoughts-on-java.org/jpa-generate-primary-keys/\" rel=\"nofollow noreferrer\">this article</a> and <a href=\"https://www.youtube.com/watch?v=a0ScR_JAKfI\" rel=\"nofollow noreferrer\">this video</a>. It's a much easier way to tell Hibernate to use a database sequence to generate primary keys.</p>\n\n<p>The <code>increment_size</code> that you configure for your <code>@GenericGenerator</code> is only used internally to reduce the number of database roundtrips. It needs to be the same as configured for your database sequence. \nThe configured <code>increment_size</code> tells Hibernate how often it can increase a retrieved sequence value internally before it has to fetch another value from the sequence. \nHere is a quick example of what happens if you set the <code>increment_size</code> to 5:</p>\n\n<ul>\n<li><ol>\n<li>Entity: Hibernate retrieves a new sequence value from the database. The database returns 1 and increments its internal value by 5. --- Value used by Hibernate: 1 Value in database: 6</li>\n</ol></li>\n<li><ol start=\"2\">\n<li>Entity: Hibernate increments the id value internally --- Value used by Hibernate: 2 Value in database: 6</li>\n</ol></li>\n<li><ol start=\"3\">\n<li>Entity: Hibernate increments the id value internally --- Value used by Hibernate: 3 Value in database: 6</li>\n</ol></li>\n<li><ol start=\"4\">\n<li>Entity: Hibernate increments the id value internally --- Value used by Hibernate: 34Value in database: 6</li>\n</ol></li>\n<li><ol start=\"5\">\n<li>Entity: Hibernate increments the id value internally --- Value used by Hibernate: 5 Value in database: 6</li>\n</ol></li>\n<li><ol start=\"6\">\n<li>Entity: Hibernate retrieves the next sequence value from the database. The database returns 6 and increments its internal value by 5. --- Value used by Hibernate: 6 Value in database: 11</li>\n</ol></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 9161059, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JzA00Oc0jHA/AAAAAAAAAAI/AAAAAAAAAbw/8tC_UitVHBE/photo.jpg?sz=128", "display_name": "Denis Potapov", "link": "https://stackoverflow.com/users/9161059/denis-potapov"}, "is_accepted": true, "score": 0, "last_activity_date": 1547035984, "creation_date": 1547035984, "answer_id": 54109893, "question_id": 54100272, "link": "https://stackoverflow.com/questions/54100272/hibernate-generates-next-sequence-number-by-incrementing-previous-by-100/54109893#54109893", "title": "Hibernate generates next sequence number by incrementing previous by 100", "body": "<p>Thanks to this answer <a href=\"https://stackoverflow.com/a/31804619/9161059\">https://stackoverflow.com/a/31804619/9161059</a>. Autoincrement adds 100 by default if Derby db was terminated. Here is an explanation of preallocator: <a href=\"https://db.apache.org/derby/docs/10.9/ref/rrefproperpreallocator.html\" rel=\"nofollow noreferrer\">https://db.apache.org/derby/docs/10.9/ref/rrefproperpreallocator.html</a></p>\n"}], "owner": {"reputation": 1, "user_id": 9161059, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JzA00Oc0jHA/AAAAAAAAAAI/AAAAAAAAAbw/8tC_UitVHBE/photo.jpg?sz=128", "display_name": "Denis Potapov", "link": "https://stackoverflow.com/users/9161059/denis-potapov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 648, "favorite_count": 0, "accepted_answer_id": 54109893, "answer_count": 2, "score": 0, "last_activity_date": 1547035984, "creation_date": 1546984389, "question_id": 54100272, "link": "https://stackoverflow.com/questions/54100272/hibernate-generates-next-sequence-number-by-incrementing-previous-by-100", "title": "Hibernate generates next sequence number by incrementing previous by 100", "body": "<p>I'm writing a JPA entity and want it's id to be generated automatically by Hibernate. I'm using <code>@GenericGenerator</code> annotation with some parameters managing strategy and increment. I want ids to be generated consequently (1, 2, 3, 4, ...), but somehow Hibernate decides that it must be generated by incrementing previous id by 100 (1, 101, 201, ...).\nBTW I'm using Derby Embedded.   </p>\n\n<p>I found that strategy = \"increment\" fits my aim but as I understand it's type isn't thread safe.</p>\n\n<pre><code>@Table(name = \"ACCOUNTS\")\ndata class Account(\n        @Id\n        @GenericGenerator(name = \"ACCOUNT_SEQ\",\n                strategy = \"enhanced-sequence\",\n                parameters = [\n                    Parameter(name = \"initial_value\", value = \"1\"),\n                    Parameter(name = \"increment_size\", value = \"1\")]\n        )\n        @GeneratedValue(generator = \"ACCOUNT_SEQ\")\n        @Column(name = \"ID\")\n        val id: Long\n)\n</code></pre>\n\n<p>So, how can I use strategy = \"enhanced-sequence\" and increment id by 1? Is it possible?</p>\n"}, {"tags": ["java", "android-studio", "kotlin", "push-notification", "android-pendingintent"], "answers": [{"tags": [], "owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "is_accepted": true, "score": 1, "last_activity_date": 1546980764, "creation_date": 1546980764, "answer_id": 54099517, "question_id": 54098681, "link": "https://stackoverflow.com/questions/54098681/not-pass-value-from-push-notification-to-activity/54099517#54099517", "title": "Not pass value from push notification to Activity", "body": "<p>Try to use some flags, for example use <strong>FLAG_ONE_SHOT</strong> and <strong>FLAG_CANCEL_CURRENT</strong> to indicate that <strong>PendingIntent</strong> can be used only once and if the described <strong>PendingIntent</strong> already exists, the current one should be canceled before generating a new one:</p>\n\n<pre><code>val contentIntent = PendingIntent.getActivity(this, 0, \n    intent, PendingIntent.FLAG_ONE_SHOT | PendingIntent.FLAG_CANCEL_CURRENT);\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 8520727, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3e6bd62c49fb194e8986ec594255f6fc?s=128&d=identicon&r=PG&f=1", "display_name": "Yevgen", "link": "https://stackoverflow.com/users/8520727/yevgen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 54099517, "answer_count": 1, "score": 0, "last_activity_date": 1546980764, "creation_date": 1546976543, "question_id": 54098681, "link": "https://stackoverflow.com/questions/54098681/not-pass-value-from-push-notification-to-activity", "title": "Not pass value from push notification to Activity", "body": "<p>I can\u2019t pass value from push notification to activity</p>\n\n<p>I use Firebase Messaging Service for push notification. But I can\u2019t pass value to activity using PendingIntent.</p>\n\n<p><strong>MyFirebaseMessagingService</strong></p>\n\n<pre><code>val intent = Intent(this, MainActivity::class.java)\n    intent.putExtra(\"key\", \"value\")\n    val contentIntent = PendingIntent.getActivity(\n            this, 0, intent, 0)\n\n    notificationBuilder.setAutoCancel(true)\n            .setDefaults(Notification.DEFAULT_ALL)\n            .setWhen(System.currentTimeMillis())\n            .setSmallIcon(R.drawable.sa_logo_mini)\n            .setLargeIcon(BitmapFactory.decodeResource(resources, R.drawable.sa_icon_big))\n            .setContentTitle(title)\n            .setContentText(content)\n            .setContentIntent(contentIntent)\n            .setContentInfo(\"Breaking\")\n\n    notificationManager.notify(1, notificationBuilder.build())\n</code></pre>\n\n<p><strong>MainActivity</strong></p>\n\n<pre><code>    val Y = intent.getStringExtra(\"key\")\n    Log.i(C.T, \"CHECHE = \"+Y)\n</code></pre>\n\n<p>After click on push notification MainActivity start but intent.getStringExtra(\"key\") always equals null.</p>\n\n<p>Where a mistake?</p>\n"}, {"tags": ["kotlin", "delegates", "parameter-passing", "lazy-evaluation", "delegated-properties"], "answers": [{"comments": [{"owner": {"reputation": 8925, "user_id": 1697320, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5848fda512344b0bda8b2212441136ad?s=128&d=identicon&r=PG", "display_name": "Maciej Sz", "link": "https://stackoverflow.com/users/1697320/maciej-sz"}, "edited": false, "score": 0, "creation_date": 1547042067, "post_id": 54105546, "comment_id": 95055528, "body": "Ok, thats neat. But how can I make this lazy if I can&#39;t change the <code>Foo</code> class?"}, {"owner": {"reputation": 4301, "user_id": 10326373, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gELRFaHltbo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNsdj9V1baYsQJixyXkjgDgjTYtUg/mo/photo.jpg?sz=128", "display_name": "Yoni Gibbs", "link": "https://stackoverflow.com/users/10326373/yoni-gibbs"}, "reply_to_user": {"reputation": 8925, "user_id": 1697320, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5848fda512344b0bda8b2212441136ad?s=128&d=identicon&r=PG", "display_name": "Maciej Sz", "link": "https://stackoverflow.com/users/1697320/maciej-sz"}, "edited": false, "score": 0, "creation_date": 1547043145, "post_id": 54105546, "comment_id": 95056171, "body": "Good question :-) Are you able to change the client of <code>Foo</code> so that it doesn&#39;t use <code>Foo</code> directly, and instead uses some class you write which wraps or subclasses <code>Foo</code>?"}, {"owner": {"reputation": 8925, "user_id": 1697320, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5848fda512344b0bda8b2212441136ad?s=128&d=identicon&r=PG", "display_name": "Maciej Sz", "link": "https://stackoverflow.com/users/1697320/maciej-sz"}, "edited": false, "score": 0, "creation_date": 1547047817, "post_id": 54105546, "comment_id": 95059310, "body": "Well, in this case, yes. But I imagine that wrapper isn&#39;t the cleanest solution. I wish the Kotlin compiler would generate inline lambda in places where <code>val p</code> is used."}], "tags": [], "owner": {"reputation": 4301, "user_id": 10326373, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gELRFaHltbo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNsdj9V1baYsQJixyXkjgDgjTYtUg/mo/photo.jpg?sz=128", "display_name": "Yoni Gibbs", "link": "https://stackoverflow.com/users/10326373/yoni-gibbs"}, "is_accepted": true, "score": 1, "last_activity_date": 1547023348, "last_edit_date": 1547023348, "creation_date": 1547020942, "answer_id": 54105546, "question_id": 54098189, "link": "https://stackoverflow.com/questions/54098189/how-to-pass-delegated-property-anonymously-in-kotlin/54105546#54105546", "title": "How to pass Delegated property anonymously in Kotlin?", "body": "<p>I presume what you're trying to do is construct <code>Foo</code> and have <code>p</code> only calculated when it's first called? If so, I don't think that defining <code>Foo</code> as you've done will work, because when you construct <code>Foo</code>, the lazy delegate is called. That's because in order to construct <code>Foo</code>, a string is needed, so the lazy delegate is evaluated at that point. In other words, this:</p>\n\n<pre><code>val lazyP by lazy { \"foo\" }\nval foo = Foo(lazyP)\n</code></pre>\n\n<p>is more-or-less equivalent to:</p>\n\n<pre><code>val foo = Foo(\"foo\")\n</code></pre>\n\n<p>I think that if you want <code>Foo</code> to have a lazy delegated property you should define it like this:</p>\n\n<pre><code>class Foo(lazyP: Lazy&lt;String&gt;) {\n    val p by lazyP\n}\n</code></pre>\n\n<p>Then you can construct it in a one-liner without needing a separate variable:</p>\n\n<pre><code>val foo = Foo(lazy { \"foo\" })\n</code></pre>\n"}], "owner": {"reputation": 8925, "user_id": 1697320, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5848fda512344b0bda8b2212441136ad?s=128&d=identicon&r=PG", "display_name": "Maciej Sz", "link": "https://stackoverflow.com/users/1697320/maciej-sz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 54105546, "answer_count": 1, "score": 1, "last_activity_date": 1547053685, "creation_date": 1546974610, "last_edit_date": 1547053685, "question_id": 54098189, "link": "https://stackoverflow.com/questions/54098189/how-to-pass-delegated-property-anonymously-in-kotlin", "title": "How to pass Delegated property anonymously in Kotlin?", "body": "<p>Let's assume a simple class:</p>\n\n<pre><code>class Foo(val p:String)\n</code></pre>\n\n<p>I would like to create instance of the class by passing <strong>lazy delegate</strong>:</p>\n\n<pre><code>val lazyP by lazy {\"foo\"}\nprintln(Foo(lazyP).p)\n</code></pre>\n\n<p>but I don't need the boilerplate <code>lazyP</code> variable. How to write a one-liner? Something like:</p>\n\n<pre><code>println(Foo(by lazy {\"foo\"}).p)\n</code></pre>\n"}, {"tags": ["android", "kotlin", "countdowntimer"], "answers": [{"comments": [{"owner": {"reputation": 541, "user_id": 5505680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/888fd849b4f82c401be409609661ee36?s=128&d=identicon&r=PG", "display_name": "matheszabi", "link": "https://stackoverflow.com/users/5505680/matheszabi"}, "edited": false, "score": 0, "creation_date": 1546973131, "post_id": 54097770, "comment_id": 95028409, "body": "why is this upvoted? completly not the desired result: &quot;How to format 1800 seconds to MM:SS format&quot;"}, {"owner": {"reputation": 25953, "user_id": 6599590, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/qLSDJ.jpg?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/6599590/andy"}, "edited": false, "score": 0, "creation_date": 1546974878, "post_id": 54097770, "comment_id": 95029282, "body": "@Sumit, thank you very much for your answer but your code doesn&#39;t work for me. Because there&#39;s no 2-digits padding for seconds and minutes when it counts down to zero-digit."}, {"owner": {"reputation": 1635, "user_id": 1381241, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6464fd26eb57b7c8cd28694a30a19adb?s=128&d=identicon&r=PG", "display_name": "Sumit", "link": "https://stackoverflow.com/users/1381241/sumit"}, "edited": false, "score": 0, "creation_date": 1546975454, "post_id": 54097770, "comment_id": 95029579, "body": "yes, sorry. missed that detail.. the padStart mentioned by @forpas is correct. I have edited my answer to include that as well."}], "tags": [], "owner": {"reputation": 1635, "user_id": 1381241, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6464fd26eb57b7c8cd28694a30a19adb?s=128&d=identicon&r=PG", "display_name": "Sumit", "link": "https://stackoverflow.com/users/1381241/sumit"}, "is_accepted": false, "score": 0, "last_activity_date": 1546975759, "last_edit_date": 1546975759, "creation_date": 1546972831, "answer_id": 54097770, "question_id": 54097617, "link": "https://stackoverflow.com/questions/54097617/how-to-format-1800-seconds-to-mmss-format/54097770#54097770", "title": "How to format 1800 seconds to MM:SS format", "body": "<p>Following code can convert from milliseconds (which is what you have initially) to minutes and seconds:</p>\n\n<pre><code>val milliseconds: Long = 1800000\n\nval minutes = milliseconds / 1000 / 60\nval seconds = milliseconds / 1000 % 60\n\nprintln(\"$minutes min : $seconds sec\")\n</code></pre>\n\n<p>Output:</p>\n\n<p><code>30 min : 0 sec</code></p>\n\n<p><strong>EDIT 1</strong>:</p>\n\n<p>If you strictly need it from seconds to minutes and seconds, just remove the extra division by 1000.</p>\n\n<p>The code for that will be:</p>\n\n<pre><code>val seconds: Long = 1800\n\nval minutes = milliseconds / 60\nval seconds = milliseconds % 60\n\nprintln(\"$minutes min : $seconds sec\")\n</code></pre>\n\n<p>The code in the original question had milliseconds in it that's why I mentioned it from Milliseconds.</p>\n\n<p><strong>EDIT 2</strong>:</p>\n\n<p>Missed out the double digit formatting.</p>\n\n<p>The answer by @forpas using <code>.toString().padStart(2, '0')</code> will give the correct formatted output. So, the correct code would be:</p>\n\n<pre><code>val milliseconds: Long = 1800000\n\nval minutes = milliseconds / 1000 / 60\nval seconds = milliseconds / 1000 % 60\n\nprintln(\"{$minutes.toString().padStart(2, '0')} min : {$seconds.toString().padStart(2, '0')} sec\")\n</code></pre>\n\n<p>Output:</p>\n\n<p><code>30 min : 00 sec</code></p>\n"}, {"comments": [{"owner": {"reputation": 25953, "user_id": 6599590, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/qLSDJ.jpg?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/6599590/andy"}, "edited": false, "score": 0, "creation_date": 1546975242, "post_id": 54097773, "comment_id": 95029470, "body": "Thanks a lot! You were right. Your code works with zero-digits."}], "tags": [], "owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "is_accepted": true, "score": 5, "last_activity_date": 1546972838, "creation_date": 1546972838, "answer_id": 54097773, "question_id": 54097617, "link": "https://stackoverflow.com/questions/54097617/how-to-format-1800-seconds-to-mmss-format/54097773#54097773", "title": "How to format 1800 seconds to MM:SS format", "body": "<p>You get the numbers by integer division and modulo (<code>%</code>) <br/>\nand the formatting to 2 digits with <code>padStart()</code>:</p>\n\n<pre><code>val secs = 1800\nval formatted = \"${(secs / 60).toString().padStart(2, '0')} min : ${(secs % 60).toString().padStart(2, '0')} sec\"\nprintln(formatted)\n</code></pre>\n\n<p>will print</p>\n\n<pre><code>30 min : 00 sec\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 25953, "user_id": 6599590, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/qLSDJ.jpg?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/6599590/andy"}, "is_accepted": false, "score": 1, "last_activity_date": 1547025650, "last_edit_date": 1547025650, "creation_date": 1546973416, "answer_id": 54097906, "question_id": 54097617, "link": "https://stackoverflow.com/questions/54097617/how-to-format-1800-seconds-to-mmss-format/54097906#54097906", "title": "How to format 1800 seconds to MM:SS format", "body": "<p>Here's how my code looks like at the moment: </p>\n\n<pre><code>val timer = object: CountDownTimer(1800000, 1000) {\n\n    override fun onTick(millisUntilFinished: Long) {\n\n        val timeResult = \n            \"${(millisUntilFinished / 1000 / 60).toString().padStart(2, '0')}:\" +\n            \"${(millisUntilFinished / 1000 % 60).toString().padStart(2, '0')} \"\n\n        textTimer.text = \"$timeResult\"\n    }\n    override fun onFinish() {\n        textTimer.text = \"Time is out\"\n    }\n}\ntimer.start()\ntextTimer.text = \"$timer\"\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/6Rssd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6Rssd.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "is_accepted": false, "score": 3, "last_activity_date": 1546990983, "last_edit_date": 1546990983, "creation_date": 1546988459, "answer_id": 54100969, "question_id": 54097617, "link": "https://stackoverflow.com/questions/54097617/how-to-format-1800-seconds-to-mmss-format/54100969#54100969", "title": "How to format 1800 seconds to MM:SS format", "body": "<p>Since you are targeting the JVM, you should use the Java 8 Date/Time Api. You could create a very concise function like this:</p>\n\n<pre><code>fun countdown(s: Long) = with(LocalTime.ofSecondOfDay(s)) {\n    String.format(\"%02d min :%02d sec\", minute, second)\n}\n\ncountdown(1800) // 30 min : 00 sec\n</code></pre>\n\n<p><strong>Recommendation:</strong></p>\n\n<ul>\n<li><p>Don't do the calculations at call site (in <code>onTick</code>). This makes the code unecessary hard to understand. Create a separate function for that.</p></li>\n<li><p>It's a simple calculation, but use what the standard libraries give you. Firstly, the code is optimized and secondly you can easily extend the function to calculate hours and so on. Untested, hand-drafted code is error prone.</p></li>\n</ul>\n"}], "owner": {"reputation": 25953, "user_id": 6599590, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/qLSDJ.jpg?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/6599590/andy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 647, "favorite_count": 2, "accepted_answer_id": 54097773, "answer_count": 4, "score": 0, "last_activity_date": 1547025650, "creation_date": 1546972019, "last_edit_date": 1546972478, "question_id": 54097617, "link": "https://stackoverflow.com/questions/54097617/how-to-format-1800-seconds-to-mmss-format", "title": "How to format 1800 seconds to MM:SS format", "body": "<p>I have the following Kotlin code for simple countdown timer:</p>\n\n<pre><code>val thousand: Long = 1000\n\nval timer = object: CountDownTimer(1800000, 1000) {\n\n    override fun onTick(millisUntilFinished: Long) {\n        var timeResult = millisUntilFinished/thousand\n        textTimer.text = \"$timeResult\"\n    }\n    override fun onFinish() {\n        textTimer.text = \"Time is out\"\n    }\n}\ntimer.start()\ntextTimer.text = \"$timer\"\n</code></pre>\n\n<p><strong>How to format <code>1800 seconds</code> to <code>30 min : 00 sec</code> in Kotlin</strong>?</p>\n"}, {"tags": ["list", "sorting", "kotlin", "comparison"], "answers": [{"comments": [{"owner": {"reputation": 734, "user_id": 3202798, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/1397599835/picture?type=large", "display_name": "Sargon1", "link": "https://stackoverflow.com/users/3202798/sargon1"}, "edited": false, "score": 0, "creation_date": 1546971739, "post_id": 54097377, "comment_id": 95027788, "body": "Thanks! I came across this piece of documentation as well, but I didn&#39;t know that something like sortOrder existed. I can&#39;t actually find anything about sortOrder, even when searching directly for it. All I&#39;m getting are &quot;natural sort order&quot; duds. Huh..."}, {"owner": {"reputation": 4397, "user_id": 9164471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-IY5Hr42LB7Q/AAAAAAAAAAI/AAAAAAAAAHc/sk_5_2q1nCU/photo.jpg?sz=128", "display_name": "Rene", "link": "https://stackoverflow.com/users/9164471/rene"}, "reply_to_user": {"reputation": 734, "user_id": 3202798, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/1397599835/picture?type=large", "display_name": "Sargon1", "link": "https://stackoverflow.com/users/3202798/sargon1"}, "edited": false, "score": 0, "creation_date": 1547011662, "post_id": 54097377, "comment_id": 95039901, "body": "<code>sortOrder</code> is just a random name I choose for the list of currencies. Inside <code>sortedBy</code> I use the <code>indexOf</code> function with this list to get the index of the currency. The index is then used as the sorting criteria."}, {"owner": {"reputation": 734, "user_id": 3202798, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/1397599835/picture?type=large", "display_name": "Sargon1", "link": "https://stackoverflow.com/users/3202798/sargon1"}, "edited": false, "score": 0, "creation_date": 1547034756, "post_id": 54097377, "comment_id": 95051083, "body": "My bad, I copypasted the wrong name, which explains my googling difficulties earlier. I meant sortedBy."}], "tags": [], "owner": {"reputation": 4397, "user_id": 9164471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-IY5Hr42LB7Q/AAAAAAAAAAI/AAAAAAAAAHc/sk_5_2q1nCU/photo.jpg?sz=128", "display_name": "Rene", "link": "https://stackoverflow.com/users/9164471/rene"}, "is_accepted": true, "score": 2, "last_activity_date": 1546970880, "creation_date": 1546970880, "answer_id": 54097377, "question_id": 54097262, "link": "https://stackoverflow.com/questions/54097262/comparing-strings-in-kotlin-by-custom-ordering-defined-in-another-list/54097377#54097377", "title": "Comparing strings in Kotlin by custom ordering defined in another list", "body": "<p>The <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/sorted-by.html\" rel=\"nofollow noreferrer\">sortedBy</a> function will work:  </p>\n\n<pre><code>val sortOrder = listOf(\"USD\", \"EUR\", \"RMB\")\nval accounts = listOf(Account(\"EUR\"), Account(\"USD\"), Account(\"RMB\"))\nval sortedAccounts = accounts.sortedBy { sortOrder.indexOf(it.currency) }\n</code></pre>\n"}], "owner": {"reputation": 734, "user_id": 3202798, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/1397599835/picture?type=large", "display_name": "Sargon1", "link": "https://stackoverflow.com/users/3202798/sargon1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 54097377, "answer_count": 1, "score": 0, "last_activity_date": 1546970880, "creation_date": 1546970426, "question_id": 54097262, "link": "https://stackoverflow.com/questions/54097262/comparing-strings-in-kotlin-by-custom-ordering-defined-in-another-list", "title": "Comparing strings in Kotlin by custom ordering defined in another list", "body": "<p>I have a list of Accounts:</p>\n\n<pre><code>data class Account(\n        val currency: String?\n)\n</code></pre>\n\n<p>I need to sort the accounts by the currency, but not by the natural (alphabetical) ordering of the strings, which all the tutorials out there have already explained to the death, but by a custom ordering, defined preferably in a list, so I don't have to do some ugly \"if-else\" chain of some sort. For example, if I used the list</p>\n\n<pre><code>listOf(\"USD\", \"EUR\", \"RMB\")\n</code></pre>\n\n<p>for the sorting, then accounts with currency \"USD\" would come first, those with \"EUR second\", and the ones with \"RMB\" last. </p>\n"}, {"tags": ["android", "kotlin", "android-room"], "comments": [{"owner": {"reputation": 3110, "user_id": 4402462, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh3.googleusercontent.com/-_tLZ6wVqNwM/AAAAAAAAAAI/AAAAAAAABbQ/1vpw--DOl7A/photo.jpg?sz=128", "display_name": "Srikar Reddy", "link": "https://stackoverflow.com/users/4402462/srikar-reddy"}, "edited": false, "score": 1, "creation_date": 1546968498, "post_id": 54096816, "comment_id": 95026282, "body": "Like you mentioned <code>messages</code> is null but the kotlin compiler thinks <code>messages</code> not null and you&#39;re trying to set it null."}, {"owner": {"reputation": 149, "user_id": 4581809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EHhbT.jpg?s=128&g=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/4581809/jason"}, "reply_to_user": {"reputation": 3110, "user_id": 4402462, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh3.googleusercontent.com/-_tLZ6wVqNwM/AAAAAAAAAAI/AAAAAAAABbQ/1vpw--DOl7A/photo.jpg?sz=128", "display_name": "Srikar Reddy", "link": "https://stackoverflow.com/users/4402462/srikar-reddy"}, "edited": false, "score": 0, "creation_date": 1546968585, "post_id": 54096816, "comment_id": 95026313, "body": "But it shouldn&#39;t be null nor am i trying to set it to be null (not intentionally anyway), it should have the array of <code>message</code> objects pulled down from the api?"}, {"owner": {"reputation": 3110, "user_id": 4402462, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh3.googleusercontent.com/-_tLZ6wVqNwM/AAAAAAAAAAI/AAAAAAAABbQ/1vpw--DOl7A/photo.jpg?sz=128", "display_name": "Srikar Reddy", "link": "https://stackoverflow.com/users/4402462/srikar-reddy"}, "edited": false, "score": 0, "creation_date": 1546968882, "post_id": 54096816, "comment_id": 95026442, "body": "Check if the server is sending you the <code>messages_</code> json object and it is properly getting converted to array list of <code>messages</code>."}, {"owner": {"reputation": 149, "user_id": 4581809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EHhbT.jpg?s=128&g=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/4581809/jason"}, "reply_to_user": {"reputation": 3110, "user_id": 4402462, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh3.googleusercontent.com/-_tLZ6wVqNwM/AAAAAAAAAAI/AAAAAAAABbQ/1vpw--DOl7A/photo.jpg?sz=128", "display_name": "Srikar Reddy", "link": "https://stackoverflow.com/users/4402462/srikar-reddy"}, "edited": false, "score": 0, "creation_date": 1546969180, "post_id": 54096816, "comment_id": 95026566, "body": "Not sure if this makes much difference but originally was <code>List&lt;Messages&gt;</code> but was getting <code>e: error: Entities and Pojos must have a usable public constructor. You can have an empty constructor or a constructor whose parameters match the fields (by name and type). - java.util.List</code> so converted it to a <code>List</code>. Does it need to be a <code>List</code> or should <code>ArrayList</code> work just fine? (or an array of objects)"}, {"owner": {"reputation": 3110, "user_id": 4402462, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh3.googleusercontent.com/-_tLZ6wVqNwM/AAAAAAAAAAI/AAAAAAAABbQ/1vpw--DOl7A/photo.jpg?sz=128", "display_name": "Srikar Reddy", "link": "https://stackoverflow.com/users/4402462/srikar-reddy"}, "edited": false, "score": 0, "creation_date": 1546970238, "post_id": 54096816, "comment_id": 95027074, "body": "That error was that Room was unable to figure the right constructor. <code>List</code> or <code>ArrayList</code> doesn&#39;t matter. Update the question with sample json that you may recevie from the server."}, {"owner": {"reputation": 3110, "user_id": 4402462, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh3.googleusercontent.com/-_tLZ6wVqNwM/AAAAAAAAAAI/AAAAAAAABbQ/1vpw--DOl7A/photo.jpg?sz=128", "display_name": "Srikar Reddy", "link": "https://stackoverflow.com/users/4402462/srikar-reddy"}, "edited": false, "score": 0, "creation_date": 1546970266, "post_id": 54096816, "comment_id": 95027088, "body": "And, you&#39;re trying to save it to multiple tables right?"}, {"owner": {"reputation": 5935, "user_id": 10182897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PuvGT.jpg?s=128&g=1", "display_name": "Ashish", "link": "https://stackoverflow.com/users/10182897/ashish"}, "edited": false, "score": 0, "creation_date": 1546970660, "post_id": 54096816, "comment_id": 95027252, "body": "Please test your api with Postman then check all the data in response"}, {"owner": {"reputation": 149, "user_id": 4581809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EHhbT.jpg?s=128&g=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/4581809/jason"}, "edited": false, "score": 0, "creation_date": 1547029100, "post_id": 54096816, "comment_id": 95047678, "body": "Added some sample JSON to the question. Sorry, still learning but I thought <code>@Embedded</code> means it embeds within the <code>profile</code> table? So it would result in <code>messages_id</code>, <code>messages_message</code> etc. It doesn&#39;t need to be in its own table but if I remove <code>@Embedded</code> i get an error: <code>error: Cannot figure out how to save this field into database. You can consider adding a type converter for it.     private final java.util.List&lt;com.testapp.testapp.data.db.entity.Messages&gt; messages = null;</code>"}, {"owner": {"reputation": 85180, "user_id": 493939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa881f5e177eb698ff51740270bf6f52?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/493939/user"}, "edited": false, "score": 1, "creation_date": 1547030880, "post_id": 54096816, "comment_id": 95048778, "body": "@Jason Embedded works for a single object to embed its fields in the entity table. In the case of a List of objects, you have a one to many relation and this is modeled in Room with a Relation annotation in a new pojo(along with some changes to your current code). <a href=\"https://developer.android.com/training/data-storage/room/defining-data#object-relationships\" rel=\"nofollow noreferrer\">developer.android.com/training/data-storage/room/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 149, "user_id": 4581809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EHhbT.jpg?s=128&g=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/4581809/jason"}, "is_accepted": false, "score": 1, "last_activity_date": 1547036789, "creation_date": 1547036789, "answer_id": 54110160, "question_id": 54096816, "link": "https://stackoverflow.com/questions/54096816/kotlin-room-error-parameter-specified-as-non-null-is-null-method-kotlin-jvm-in/54110160#54110160", "title": "Kotlin/Room Error: Parameter specified as non-null is null: method kotlin.jvm.internal.Intrinsics.checkParameterIsNotNull, parameter messages", "body": "<p>Managed to solve this by removing <code>@Embedded</code> as I didn't necessarily need the data in another table, and added a TypeConverter to convert the list into a String and back (This <a href=\"https://stackoverflow.com/a/51083865/4581809\">question</a> helped). For reference for anyone else:</p>\n\n<p><strong>TypeConvertor Class</strong></p>\n\n<pre><code>class Convertors {\n\n    @TypeConverter\n    fun listToJson(value: List&lt;Message&gt;?): String {\n        return Gson().toJson(value)\n    }\n\n    @TypeConverter\n    fun jsonToList(value: String): List&lt;Message&gt;? {\n        val objects = Gson().fromJson(value, Array&lt;Message&gt;::class.java) as Array&lt;Message&gt;\n        val list = objects.toList()\n        return list\n    }\n\n}\n</code></pre>\n\n<p>Then adding the @TypeConverters to my database class.</p>\n\n<p><strong>Database Class</strong></p>\n\n<pre><code>@Database(entities = [ProfileResponse::class], version = 1)\n@TypeConverters(Convertors::class)\nabstract class MainDatabase: RoomDatabase() {\n\n    abstract fun profileResponseDao(): ProfileResponseDao\n\n}\n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 4581809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EHhbT.jpg?s=128&g=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/4581809/jason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3087, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1547036789, "creation_date": 1546968387, "last_edit_date": 1547028816, "question_id": 54096816, "link": "https://stackoverflow.com/questions/54096816/kotlin-room-error-parameter-specified-as-non-null-is-null-method-kotlin-jvm-in", "title": "Kotlin/Room Error: Parameter specified as non-null is null: method kotlin.jvm.internal.Intrinsics.checkParameterIsNotNull, parameter messages", "body": "<p>Not sure what is causing this, but i am trying request data from the api which includes an array of <code>Message</code> objects. If i print the result to the console, the data is correct apart from <code>Messages=null</code> when i would expect <code>Message</code> to be an array of objects. I can't understand what i've missed? </p>\n\n<p>I'm getting this error:\n<code>java.lang.IllegalArgumentException: Parameter specified as non-null is null: method kotlin.jvm.internal.Intrinsics.checkParameterIsNotNull, parameter messages</code> </p>\n\n<p>Could anyone point me in the right direction? Code below for the class:</p>\n\n<pre><code>const val PROFILE_RESPONSE_ID = 0\n\n@Entity(tableName = \"profile\")\ndata class ProfileResponse(\n    val id: Int,\n    val name: String,\n    val code: String,\n    val title: String,\n    @SerializedName(\"profile_image\")\n    val profileImage: String,\n    @SerializedName(\"background_image\")\n    val backgroundImage: String,\n    @Embedded(prefix = \"messages_\")\n    val messages: ArrayList&lt;Messages&gt;,\n) {\n    @PrimaryKey(autoGenerate = false)\n    var responseId: Int = PROFILE_RESPONSE_ID\n}\n</code></pre>\n\n<p><strong>Sample JSON:</strong></p>\n\n<pre><code>{\n  \"id\": 44,\n  \"name\": \"Jason\",\n  \"code\": \"jason\",\n  \"title\": \"Jason Scott\",\n  \"profile_image\": \"https://sampleurl.com/sample_profile.jpg\",\n  \"background_image\": \"\",\n  \"messages\": [\n    {\n      \"id\": 0001,\n      \"message\": \"Aenean eu leo quam. Pellentesque ornare sem lacinia quam venenatis vestibulum.\",\n      \"timestamp\": \"Thu, 01 Jan 1970 01:00:00 +0100\",\n    }\n    {\n      \"id\": 0002,\n      \"message\": \"Aenean eu leo quam. Pellentesque ornare sem lacinia quam venenatis vestibulum.\",\n      \"timestamp\": \"Thu, 01 Jan 1970 01:00:00 +0100\",\n    }\n    {\n      \"id\": 0003,\n      \"message\": \"Aenean eu leo quam. Pellentesque ornare sem lacinia quam venenatis vestibulum.\",\n      \"timestamp\": \"Thu, 01 Jan 1970 01:00:00 +0100\",\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "data-binding", "kotlin", "textview", "android-databinding"], "comments": [{"owner": {"reputation": 1818, "user_id": 4274651, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fd438a86da39049aa93ca14b663851ce?s=128&d=identicon&r=PG", "display_name": "janosch", "link": "https://stackoverflow.com/users/4274651/janosch"}, "edited": false, "score": 0, "creation_date": 1546971639, "post_id": 54096610, "comment_id": 95027732, "body": "Do you have to use a TextView + databinding? Generally I think TextClock would be better suited for this usecase: <a href=\"https://developer.android.com/reference/android/widget/TextClock\" rel=\"nofollow noreferrer\">developer.android.com/reference/android/widget/TextClock</a> ."}, {"owner": {"reputation": 93, "user_id": 3061967, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/edw3F.jpg?s=128&g=1", "display_name": "Arjunsinh Jadeja", "link": "https://stackoverflow.com/users/3061967/arjunsinh-jadeja"}, "reply_to_user": {"reputation": 1818, "user_id": 4274651, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fd438a86da39049aa93ca14b663851ce?s=128&d=identicon&r=PG", "display_name": "janosch", "link": "https://stackoverflow.com/users/4274651/janosch"}, "edited": false, "score": 0, "creation_date": 1546979142, "post_id": 54096610, "comment_id": 95031208, "body": "I need the text to uniformly autosize. As TextClock does not inherit AppCompat TextView, the autosizing will not be backwards compatible."}], "owner": {"reputation": 93, "user_id": 3061967, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/edw3F.jpg?s=128&g=1", "display_name": "Arjunsinh Jadeja", "link": "https://stackoverflow.com/users/3061967/arjunsinh-jadeja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 163, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1546967517, "creation_date": 1546967517, "question_id": 54096610, "link": "https://stackoverflow.com/questions/54096610/how-to-implement-textview-clock-using-data-binding", "title": "How to implement TextView Clock using data binding?", "body": "<p>One solution would be to create a <a href=\"https://stackoverflow.com/a/16154223/3061967\">TimerTask</a> which updates a LiveData variable 'time'. Then assign that variable to a TextView using data binding. Is there a better way of implementing this?</p>\n"}, {"tags": ["android", "firebase", "gradle", "firebase-realtime-database", "kotlin"], "comments": [{"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1546969832, "post_id": 54096601, "comment_id": 95026868, "body": "Have you tried to change <code>classpath &#39;com.android.tools.build:gradle:3.3.0-alpha10&#39;</code> to <code>classpath &#39;com.android.tools.build:gradle:3.2.1&#39;</code>?"}, {"owner": {"reputation": 41, "user_id": 10760681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/278ddd23954a393f12f3adee1e1aff45?s=128&d=identicon&r=PG&f=1", "display_name": "zeina", "link": "https://stackoverflow.com/users/10760681/zeina"}, "reply_to_user": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1546971747, "post_id": 54096601, "comment_id": 95027789, "body": "@AlexMamo yes, no luck"}], "answers": [{"tags": [], "owner": {"reputation": 67, "user_id": 4240813, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/3f71eb6d90ed22656cb919cd7bdd8430?s=128&d=identicon&r=PG&f=1", "display_name": "ixTec", "link": "https://stackoverflow.com/users/4240813/ixtec"}, "is_accepted": false, "score": 1, "last_activity_date": 1547237657, "creation_date": 1547237657, "answer_id": 54153460, "question_id": 54096601, "link": "https://stackoverflow.com/questions/54096601/firebase-error-program-type-already-present-com-google-api-authproviderorbui/54153460#54153460", "title": "Firebase-- Error: Program type already present: com.google.api.AuthProviderOrBuilder", "body": "<p>I ran into what could potentially be the same issue and finally solved it.</p>\n\n<p>From looking into the dependencies, I found that I had multiple version of protobuf and found that excluding all instances of protobuf-lite, solved my issue.</p>\n\n<p>I added the following to my app gradle file:</p>\n\n<pre><code>configurations.all {\n    exclude group: 'com.google.protobuf', module: 'protobuf-lite'\n}\n</code></pre>\n\n<p>Hopefully this helps you as much as it did me.</p>\n"}], "owner": {"reputation": 41, "user_id": 10760681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/278ddd23954a393f12f3adee1e1aff45?s=128&d=identicon&r=PG&f=1", "display_name": "zeina", "link": "https://stackoverflow.com/users/10760681/zeina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 553, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1547237657, "creation_date": 1546967467, "question_id": 54096601, "link": "https://stackoverflow.com/questions/54096601/firebase-error-program-type-already-present-com-google-api-authproviderorbui", "title": "Firebase-- Error: Program type already present: com.google.api.AuthProviderOrBuilder", "body": "<p>I'm trying to configure Firebase core, firestore, auth, and firebase messaging. </p>\n\n<p>I've updated all version numbers. There error comes when I include firestore and firebase core (all other dependencies/combinations work).</p>\n\n<p>error:</p>\n\n<pre><code>AGPBI: {\"kind\":\"error\",\"text\":\"Program type already present: com.google.api.AuthProviderOrBuilder\",\"sources\":[{}],\"tool\":\"D8\"}\n</code></pre>\n\n<blockquote>\n  <p>Task :app:buildInfoGeneratorDebug\n  FAILURE: Build failed with an exception.\n  * What went wrong:\n  Execution failed for task ':app:transformDexArchiveWithExternalLibsDexMergerForDebug'.\n  com.android.builder.dexing.DexArchiveMergerException: Error while merging dex archives: \n    Learn how to resolve the issue at <a href=\"https://developer.android.com/studio/build/dependencies#duplicate_classes\" rel=\"nofollow noreferrer\">https://developer.android.com/studio/build/dependencies#duplicate_classes</a>.\n    Program type already present: com.google.api.AuthProviderOrBuilder</p>\n</blockquote>\n\n<p>app gradle (edited): </p>\n\n<pre><code>android {\ncompileSdkVersion 28\ndefaultConfig {\n    applicationId \"...\"\n    minSdkVersion 19\n    targetSdkVersion 28\n    versionCode 65\n    versionName \"1.5.0\"\n    testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n    vectorDrawables.useSupportLibrary = true\n    multiDexEnabled true\n}\nbuildTypes {\n{...}\n}\ncompileOptions {\n    targetCompatibility 1.8\n    sourceCompatibility 1.8\n}\ndataBinding {\n    enabled = true\n}\npackagingOptions {\n    exclude 'META-INF/DEPENDENCIES'\n    exclude 'META-INF/INDEX.LIST'\n    exclude 'META-INF/proguard/androidx-annotations.pro'\n}\nlintOptions {\n    checkReleaseBuilds false\n}\n}\n\ndependencies {\ndef fcm_version = '17.3.4'\ndef firebase_version = '16.0.6'\ndef parse_version = '1.18.5'\ndef parse_facebook_version = '1.12.0'\ndef paypal_version = '2.16.0'\ndef permissions_version = '1.2.0'\ndef play_version = '16.0.0'\ndef work_version = '1.0.0-alpha09'\nimplementation fileTree(include: ['*.jar'], dir: 'libs')\nimplementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\n\n// support libraries\n\n// play services\nimplementation \"com.google.android.gms:play-services-location:$play_version\"\nimplementation \"com.google.android.gms:play-services-places:$play_version\"\n\n// Push notifications\nimplementation \"com.google.firebase:firebase-messaging:17.3.4'\nimplementation \"com.google.firebase:firebase-core:16.0.6'\n\n// Crash Logging\nimplementation('com.crashlytics.sdk.android:crashlytics:2.9.4@aar') {\n    transitive = true\n}\ntestImplementation 'junit:junit:4.12'\nandroidTestImplementation \"com.android.support.test:runner:$test_runner_version\"\nandroidTestImplementation \"com.android.support.test.espresso:espresso-core:$espresso_version\"\nimplementation 'org.jetbrains.kotlin:kotlin-reflect:1.2.70'\nimplementation 'com.google.firebase:firebase-firestore:17.1.5'\nimplementation 'com.google.firebase:firebase-auth:16.1.0'\n}\n\napply plugin: 'com.google.gms.google-services'\n</code></pre>\n\n<p>and project gradle:</p>\n\n<pre><code>buildscript {\next.kotlin_version = '1.2.70'\nrepositories {\n    google()\n    jcenter()\n    maven { url 'https://maven.fabric.io/public' }\n}\ndependencies {\n    classpath 'com.android.tools.build:gradle:3.3.0-alpha10'\n    classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n    //noinspection GradleDynamicVersion\n    classpath 'io.fabric.tools:gradle:1.+'\n    classpath 'com.google.gms:google-services:4.2.0'\n}\n}\n\nallprojects {\nrepositories {\n    google()\n    jcenter()\n    maven { url 'https://jitpack.io' }\n    maven { url \"https://clojars.org/repo/\"}\n    maven { url 'https://maven.fabric.io/public' }\n    flatDir {\n        dirs 'libs'\n    }\n}\n}\n\n task clean(type: Delete) {\ndelete rootProject.buildDir\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "dagger-2", "dagger"], "comments": [{"owner": {"reputation": 31520, "user_id": 1837367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v8XDk.jpg?s=128&g=1", "display_name": "David Medenjak", "link": "https://stackoverflow.com/users/1837367/david-medenjak"}, "edited": false, "score": 3, "creation_date": 1546981652, "post_id": 54096412, "comment_id": 95032227, "body": "There&#39;s no clean way around this. Your Fragment gets created <i>later</i> in a SubComponent of your ActivityComponent, yet you try to access it at creation time of the Activity. You can&#39;t directly inject objects from a lower scope."}], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 3128485, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e198380d899ae387872578987ff94d48?s=128&d=identicon&r=PG&f=1", "display_name": "brainfreak", "link": "https://stackoverflow.com/users/3128485/brainfreak"}, "edited": false, "score": 0, "creation_date": 1546989740, "post_id": 54100883, "comment_id": 95035227, "body": "Hi Jeff. This would introduce a cyclic dependency on WatchFaceFragment. Note that I&#39;m injecting the fragment in MainActivity. I&#39;m just trying to get the right structure I should follow."}, {"owner": {"reputation": 73871, "user_id": 1426891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gFJE8.png?s=128&g=1", "display_name": "Jeff Bowman", "link": "https://stackoverflow.com/users/1426891/jeff-bowman"}, "reply_to_user": {"reputation": 111, "user_id": 3128485, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e198380d899ae387872578987ff94d48?s=128&d=identicon&r=PG&f=1", "display_name": "brainfreak", "link": "https://stackoverflow.com/users/3128485/brainfreak"}, "edited": false, "score": 0, "creation_date": 1546995739, "post_id": 54100883, "comment_id": 95036668, "body": "@brainfreak The intention is that the Fragment should inject itself using <code>AndroidInjection.inject(this);</code> in <code>onAttach</code>, which creates an instance of your WatchFaceFragmentModule_ContributeWatchFaceFragment.WatchFac&zwnj;&#8203;eFragmentSubcomponen&zwnj;&#8203;t per instance of your WatchFaceFragment."}], "tags": [], "owner": {"reputation": 73871, "user_id": 1426891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gFJE8.png?s=128&g=1", "display_name": "Jeff Bowman", "link": "https://stackoverflow.com/users/1426891/jeff-bowman"}, "is_accepted": false, "score": 0, "last_activity_date": 1546988018, "creation_date": 1546988018, "answer_id": 54100883, "question_id": 54096412, "link": "https://stackoverflow.com/questions/54096412/dagger-2-matching-key-exists-in-subcomponent/54100883#54100883", "title": "Dagger 2: matching key exists in subcomponent", "body": "<p>You haven't shown us where you're including WatchFaceProvidersModule, but it <em>should</em> be included on your <code>@ContributesAndroidInjector</code> annotation in WatchFaceFragmentModule.kt, and not in AppComponent or ActivityModule:</p>\n\n<pre><code>@Module\nabstract class WatchFaceFragmentModule {\n\n  @PerFragment\n  @ContributesAndroidInjector(modules = arrayOf(WatchFaceProvidersModule::class))\n  abstract fun contributeWatchFaceFragment(): WatchFaceFragment\n}\n</code></pre>\n\n<p>This should ensure that when injecting WatchFaceFragment (and the GestureCompat etc it requires) you have access to a WatchFaceFragment instance. Otherwise, as <a href=\"https://stackoverflow.com/users/1837367/david-medenjak\">David</a> alluded to in the comments, the injector for your FreedomGuardianApp or MainActivity won't know which WatchFaceFragment to return; one may not exist yet.</p>\n"}], "owner": {"reputation": 111, "user_id": 3128485, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e198380d899ae387872578987ff94d48?s=128&d=identicon&r=PG&f=1", "display_name": "brainfreak", "link": "https://stackoverflow.com/users/3128485/brainfreak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 794, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546988018, "creation_date": 1546966704, "question_id": 54096412, "link": "https://stackoverflow.com/questions/54096412/dagger-2-matching-key-exists-in-subcomponent", "title": "Dagger 2: matching key exists in subcomponent", "body": "<p>I'm trying to use dagger 2 for dependency injection in Kotlin. The dependency graph i'm trying to create is </p>\n\n<p><code>Application-&gt; Activity -&gt; Fragment</code>\nwith each component provided with the necessary bindings/providers. Here's my current structure:</p>\n\n<p><strong>AppModule.kt</strong></p>\n\n<pre><code>@dagger.Module \nabstract class AppModule {\n\n@Binds\nabstract fun bindContext(application: Application): Context\n\n@Binds\nabstract fun bindApplication(application : Application) : Application\n}\n</code></pre>\n\n<p><strong>AppComponent.kt</strong></p>\n\n<pre><code>@Singleton\n@Component(modules = arrayOf(AppModule::class, \nAndroidInjectionModule::class, \nActivityBuilder::class))\ninterface AppComponent : \nAndroidInjector&lt;FreedomGuardianApp&gt; {\n\n@Component.Builder\nabstract class Builder : AndroidInjector.Builder&lt;FreedomGuardianApp&gt;()\n}\n</code></pre>\n\n<p><strong>ActivityModule.kt</strong></p>\n\n<pre><code>@Module\nabstract class ActivityBuilder {\n\n@PerActivity\n@ContributesAndroidInjector(modules = arrayOf(MainActivityModule::class))\nabstract fun bindMainActivity() : MainActivity\n}\n</code></pre>\n\n<p><strong>MainActivityModule.kt</strong></p>\n\n<pre><code>@Module(includes = \narrayOf(WatchFaceFragmentModule::class))\nclass MainActivityModule {\n\n@Provides\nfun adapter(activity: MainActivity): MyPagesAdapter {\n    return MyPagesAdapter(activity.supportFragmentManager)\n}\n}\n</code></pre>\n\n<p><strong>WatchFaceFragmentModule.kt</strong></p>\n\n<pre><code>@Module\nabstract class WatchFaceFragmentModule {\n\n@PerFragment\n@ContributesAndroidInjector\nabstract fun contributeWatchFaceFragment(): WatchFaceFragment\n}\n</code></pre>\n\n<p><strong>WatchFaceProvidersModule.kt</strong></p>\n\n<pre><code>@Module\nclass WatchFaceProvidersModule {\n@Provides\nfun gestureDetector(fragment: WatchFaceFragment): GestureDetectorCompat {\n    return GestureDetectorCompat(fragment.context, fragment)\n}\n\n@Provides\n@Named(\"textToSpeak\")\nfun textToSpeak(fragment: WatchFaceFragment): String {\n    return fragment.resources.getString(R.string.time_string)\n}\n\n@Provides\nfun textToSpeech(fragment: WatchFaceFragment): TextToSpeech {\n    return TextToSpeech(fragment.context, fragment)\n}\n}\n</code></pre>\n\n<p>I'm injecting GestureDetectorCompat, String(textToSpeak), TextToSpeak in WatchFaceFragment.</p>\n\n<p>Here's the error:</p>\n\n<pre><code>    public abstract interface AppComponent extends dagger.android.AndroidInjector&lt;com.medicalguardian.freedomguardian.FreedomGuardianApp&gt; {\n                ^\n  A binding with matching key exists in component: com.medicalguardian.freedomguardian.di.WatchFaceFragmentModule_ContributeWatchFaceFragment.WatchFaceFragmentSubcomponent\n      com.medicalguardian.freedomguardian.ui.fragment.WatchFaceFragment is injected at\n          com.medicalguardian.freedomguardian.ui.MainActivity.watchFaceFragment\n      com.medicalguardian.freedomguardian.ui.MainActivity is injected at\n          dagger.android.AndroidInjector.inject(T) [com.medicalguardian.freedomguardian.di.AppComponent ? com.medicalguardian.freedomguardian.di.ActivityBuilder_BindMainActivity.MainActivitySubcomponent]\n</code></pre>\n\n<p>Is my structure wrong? I'm not injecting in the constructor of WatchFaceFragment as it doesn't help. I'm using dagger support as well(DaggerFragment, DaggerApplication etc). If i'm not injecting the fragment but inject just the MainActivity, is works fine. How do i solve this issue? Apologize in advance for the lengthy read. Any help is appreciated.</p>\n"}, {"tags": ["android", "kotlin", "countdowntimer"], "comments": [{"owner": {"reputation": 369, "user_id": 9867072, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QA1KZ.png?s=128&g=1", "display_name": "WasabiTea", "link": "https://stackoverflow.com/users/9867072/wasabitea"}, "edited": false, "score": 1, "creation_date": 1546989568, "post_id": 54095875, "comment_id": 95035187, "body": "Countdown timer can be easy to use but not really accurate. You&#39;ll be able to see the timer skipping seconds as the time elapses, if the input time is long enough. Any lag in the system will cause milliseconds of delay on each tick and will eventually cause skipping as the delay accumulates.  For more accurate timer implementation, check <a href=\"https://stackoverflow.com/questions/12762272/android-countdowntimer-additional-milliseconds-delay-between-ticks\">this post</a>"}], "answers": [{"tags": [], "owner": {"reputation": 825, "user_id": 8286029, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2b4188ba2c535940200876c2cc665f89?s=128&d=identicon&r=PG&f=1", "display_name": "Elynad", "link": "https://stackoverflow.com/users/8286029/elynad"}, "is_accepted": false, "score": 3, "last_activity_date": 1546988649, "last_edit_date": 1546988649, "creation_date": 1546965191, "answer_id": 54095960, "question_id": 54095875, "link": "https://stackoverflow.com/questions/54095875/how-to-create-a-simple-countdown-timer-in-kotlin/54095960#54095960", "title": "How to create a simple countdown timer in Kotlin?", "body": "<p>Try to use objects, like this :</p>\n\n<pre><code>var countDownTimer = object : CountDownTimer(2000, 1000) {\n    // override object functions here, do it quicker by setting cursor on object, then type alt + enter ; implement members\n}\n</code></pre>\n\n<p>Try this website : <a href=\"https://try.kotlinlang.org/#/Kotlin%20Koans/Introduction/Java%20to%20Kotlin%20conversion/Task.kt\" rel=\"nofollow noreferrer\">https://try.kotlinlang.org/#/Kotlin%20Koans/Introduction/Java%20to%20Kotlin%20conversion/Task.kt</a></p>\n\n<p>You have a little button \"Convert from Java\" on the top right that could be useful to you.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Do not forget to start this object when you need it, by adding <code>.start()</code> at the end of the declaration, or wherever in your activity / fragment :</p>\n\n<pre><code>countDownTimer.start()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 414, "user_id": 9148230, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-V3gNq2v8eIc/AAAAAAAAAAI/AAAAAAAAAtk/owCj_SmLSEA/photo.jpg?sz=128", "display_name": "Akash Chaudhary", "link": "https://stackoverflow.com/users/9148230/akash-chaudhary"}, "edited": false, "score": 1, "creation_date": 1616074612, "post_id": 54095975, "comment_id": 117893346, "body": "Using timer leaks native memory in Kotlin"}, {"owner": {"reputation": 1314, "user_id": 8650422, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_JNDDkGkTYE/AAAAAAAAAAI/AAAAAAAAADY/ah_Y5aSbqYQ/photo.jpg?sz=128", "display_name": "jan4co", "link": "https://stackoverflow.com/users/8650422/jan4co"}, "reply_to_user": {"reputation": 414, "user_id": 9148230, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-V3gNq2v8eIc/AAAAAAAAAAI/AAAAAAAAAtk/owCj_SmLSEA/photo.jpg?sz=128", "display_name": "Akash Chaudhary", "link": "https://stackoverflow.com/users/9148230/akash-chaudhary"}, "edited": false, "score": 0, "creation_date": 1617231118, "post_id": 54095975, "comment_id": 118250477, "body": "@AkashChaudhary I think android suggets to use this method instead. I think I saw it in one codelab."}], "tags": [], "owner": {"reputation": 6416, "user_id": 1678729, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/010a66a94e6d6798fc5b98c07337a4ff?s=128&d=identicon&r=PG", "display_name": "Danail Alexiev", "link": "https://stackoverflow.com/users/1678729/danail-alexiev"}, "is_accepted": true, "score": 88, "last_activity_date": 1563534845, "last_edit_date": 1563534845, "creation_date": 1546965226, "answer_id": 54095975, "question_id": 54095875, "link": "https://stackoverflow.com/questions/54095875/how-to-create-a-simple-countdown-timer-in-kotlin/54095975#54095975", "title": "How to create a simple countdown timer in Kotlin?", "body": "<p>You can use Kotlin objects:</p>\n\n<pre><code>val timer = object: CountDownTimer(20000, 1000) {\n    override fun onTick(millisUntilFinished: Long) {...}\n\n    override fun onFinish() {...}\n}\ntimer.start()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7649, "user_id": 208881, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/bf3eafe58d6aba3dbab9d64307aeb6fb?s=128&d=identicon&r=PG", "display_name": "AFD", "link": "https://stackoverflow.com/users/208881/afd"}, "edited": false, "score": 9, "creation_date": 1568895438, "post_id": 55360118, "comment_id": 102425759, "body": "Minimum API level for isCountDown method is 24 (Android 7), so not for every project"}], "tags": [], "owner": {"reputation": 338, "user_id": 5847383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/klWYi.jpg?s=128&g=1", "display_name": "LiA", "link": "https://stackoverflow.com/users/5847383/lia"}, "is_accepted": false, "score": 8, "last_activity_date": 1553611987, "creation_date": 1553611987, "answer_id": 55360118, "question_id": 54095875, "link": "https://stackoverflow.com/questions/54095875/how-to-create-a-simple-countdown-timer-in-kotlin/55360118#55360118", "title": "How to create a simple countdown timer in Kotlin?", "body": "<p>Chronometer can be set to count down and it seems to me the easiest way.</p>\n\n<p>Add the <a href=\"https://developer.android.com/reference/android/widget/Chronometer.html\" rel=\"noreferrer\">Chronometer</a> view in your layout xml, example</p>\n\n<pre><code>&lt;Chronometer  \n android:id=\"@+id/view_timer\"   \n tools:targetApi=\"24\"  \n android:layout_width=\"wrap_content\"  \n android:layout_height=\"wrap_content\"/&gt;\n</code></pre>\n\n<p>Then in your activity or fragment: </p>\n\n<pre><code>   view_timer.isCountDown = true\n   view_timer.base = SystemClock.elapsedRealtime() + 20000\n   view_timer.start()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 945, "user_id": 4586030, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2JRL6.jpg?s=128&g=1", "display_name": "AbdElraouf Sabri", "link": "https://stackoverflow.com/users/4586030/abdelraouf-sabri"}, "edited": false, "score": 0, "creation_date": 1610710623, "post_id": 58448610, "comment_id": 116224233, "body": "This should be the accepted answer, there is a solid control over which dispatcher on which the work will happen."}], "tags": [], "owner": {"reputation": 3071, "user_id": 3166697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YGEWy.jpg?s=128&g=1", "display_name": "Dima Kozhevin", "link": "https://stackoverflow.com/users/3166697/dima-kozhevin"}, "is_accepted": false, "score": 6, "last_activity_date": 1571393228, "creation_date": 1571393228, "answer_id": 58448610, "question_id": 54095875, "link": "https://stackoverflow.com/questions/54095875/how-to-create-a-simple-countdown-timer-in-kotlin/58448610#58448610", "title": "How to create a simple countdown timer in Kotlin?", "body": "<p>I've solved my problem with timer in Kotlin like this:</p>\n\n<pre><code>class Timer {\n\n    private val job = SupervisorJob()\n    private val scope = CoroutineScope(Dispatchers.Default + job)\n\n    private fun startCoroutineTimer(delayMillis: Long = 0, repeatMillis: Long = 0, action: () -&gt; Unit) = scope.launch(Dispatchers.IO) {\n        delay(delayMillis)\n        if (repeatMillis &gt; 0) {\n            while (true) {\n                action()\n                delay(repeatMillis)\n            }\n        } else {\n            action()\n        }\n    }\n\n    private val timer: Job = startCoroutineTimer(delayMillis = 0, repeatMillis = 20000) {\n        Log.d(TAG, \"Background - tick\")\n        doSomethingBackground()\n        scope.launch(Dispatchers.Main) {\n            Log.d(TAG, \"Main thread - tick\")\n            doSomethingMainThread()\n        }\n    }\n\n    fun startTimer() {\n        timer.start()\n    }\n\n    fun cancelTimer() {\n        timer.cancel()\n    }\n//...\n}\n</code></pre>\n\n<p>I've used Coroutines for a timer.</p>\n"}, {"comments": [{"owner": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "edited": false, "score": 1, "creation_date": 1576322266, "post_id": 59332729, "comment_id": 104867330, "body": "Please don\u2019t teach the young ones to use the long outdated and notoriously troublesome <code>SimpleDateFormat</code> class. At least not as the first option. And not without any reservation. Today we have so much better in <a href=\"https://docs.oracle.com/javase/tutorial/datetime/\" rel=\"nofollow noreferrer\"><code>java.time</code>, the modern Java date and time API,</a> and its <code>DateTimeFormatter</code>. Yes, you can use it on Android. For older Android see <a href=\"https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project\">How to use ThreeTenABP in Android Project</a>."}, {"owner": {"reputation": 8866, "user_id": 9164141, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/uiNcT.jpg?s=128&g=1", "display_name": "Gast&#243;n Saill&#233;n", "link": "https://stackoverflow.com/users/9164141/gast%c3%b3n-saill%c3%a9n"}, "reply_to_user": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "edited": false, "score": 1, "creation_date": 1576347842, "post_id": 59332729, "comment_id": 104873605, "body": "DateTimeFormatter needs minimum api lvl 26 (android 8), with SimpleDateFormat we can use it from api 21 in wich handles more devices, I will update also the answer to work with DateTimeFormatter :)"}, {"owner": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "edited": false, "score": 1, "creation_date": 1576350876, "post_id": 59332729, "comment_id": 104874395, "body": "There\u2019s a backport. To use java.time with min SDK 21 (for example), add <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow noreferrer\">ThreeTenABP</a> to your Android project. And make sure to import the date and time classes from the <code>org.threeten.bp</code> package with subpackages. Read more in the link at the end of my previous comment."}], "tags": [], "owner": {"reputation": 8866, "user_id": 9164141, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/uiNcT.jpg?s=128&g=1", "display_name": "Gast&#243;n Saill&#233;n", "link": "https://stackoverflow.com/users/9164141/gast%c3%b3n-saill%c3%a9n"}, "is_accepted": false, "score": 3, "last_activity_date": 1576303403, "creation_date": 1576303403, "answer_id": 59332729, "question_id": 54095875, "link": "https://stackoverflow.com/questions/54095875/how-to-create-a-simple-countdown-timer-in-kotlin/59332729#59332729", "title": "How to create a simple countdown timer in Kotlin?", "body": "<p>If you want to show a countdown with days hours minutes and seconds</p>\n\n<pre><code>private lateinit var countDownTimer:CountDownTimer\n.\n.\n.\n    fun printDifferenceDateForHours() {\n\n            val currentTime = Calendar.getInstance().time\n            val endDateDay = \"03/02/2020 21:00:00\"\n            val format1 = SimpleDateFormat(\"dd/MM/yyyy hh:mm:ss\",Locale.getDefault())\n            val endDate = format1.parse(endDateDay)\n\n            //milliseconds\n            var different = endDate.time - currentTime.time\n            countDownTimer = object : CountDownTimer(different, 1000) {\n\n                override fun onTick(millisUntilFinished: Long) {\n                    var diff = millisUntilFinished\n                    val secondsInMilli: Long = 1000\n                    val minutesInMilli = secondsInMilli * 60\n                    val hoursInMilli = minutesInMilli * 60\n                    val daysInMilli = hoursInMilli * 24\n\n                    val elapsedDays = diff / daysInMilli\n                    diff %= daysInMilli\n\n                    val elapsedHours = diff / hoursInMilli\n                    diff %= hoursInMilli\n\n                    val elapsedMinutes = diff / minutesInMilli\n                    diff %= minutesInMilli\n\n                    val elapsedSeconds = diff / secondsInMilli\n\n                    txt_timeleft.text = \"$elapsedDays days $elapsedHours hs $elapsedMinutes min $elapsedSeconds sec\"\n                }\n\n                override fun onFinish() {\n                    txt_timeleft.text = \"done!\"\n                }\n            }.start()\n        }\n</code></pre>\n\n<p>If you are navigating to another activity/fragment, make sure to cancel the countdown </p>\n\n<pre><code>countDownTimer.cancel()\n</code></pre>\n\n<p>Code output</p>\n\n<blockquote>\n  <p>51 days 17 hs 56 min 5 sec</p>\n</blockquote>\n"}], "owner": {"reputation": 25953, "user_id": 6599590, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/qLSDJ.jpg?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/6599590/andy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55138, "favorite_count": 7, "accepted_answer_id": 54095975, "answer_count": 5, "score": 33, "last_activity_date": 1605000705, "creation_date": 1546964876, "last_edit_date": 1605000705, "question_id": 54095875, "link": "https://stackoverflow.com/questions/54095875/how-to-create-a-simple-countdown-timer-in-kotlin", "title": "How to create a simple countdown timer in Kotlin?", "body": "<p>I know how to create a simple countdown timer in Java. But I'd like to create this one in Kotlin.</p>\n<pre><code>package android.os;\n\nnew CountDownTimer(20000, 1000) {\n    public void onTick(long millisUntilFinished) {\n        mTextField.setText(&quot;seconds remaining: &quot; + millisUntilFinished / 1000);\n    }\n    public void onFinish() {\n        mTextField.setText(&quot;Time's finished!&quot;);\n    }\n}.start();\n</code></pre>\n<p>How can I do it using Kotlin?</p>\n"}, {"tags": ["android", "python", "android-studio", "kotlin", "refactoring"], "comments": [{"owner": {"reputation": 37094, "user_id": 543539, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/cCXi8.jpg?s=128&g=1", "display_name": "Egor", "link": "https://stackoverflow.com/users/543539/egor"}, "edited": false, "score": 0, "creation_date": 1546965063, "post_id": 54095585, "comment_id": 95024390, "body": "<code>I could use the &quot;Refactor&quot; tool from Android Studio, but I am trying to do this with a python script. </code> - why?"}, {"owner": {"reputation": 825, "user_id": 8286029, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2b4188ba2c535940200876c2cc665f89?s=128&d=identicon&r=PG&f=1", "display_name": "Elynad", "link": "https://stackoverflow.com/users/8286029/elynad"}, "reply_to_user": {"reputation": 37094, "user_id": 543539, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/cCXi8.jpg?s=128&g=1", "display_name": "Egor", "link": "https://stackoverflow.com/users/543539/egor"}, "edited": false, "score": 0, "creation_date": 1546965308, "post_id": 54095585, "comment_id": 95024515, "body": "@Egor My employeer would like to automate the build of apps. We are using differents API on the same &quot;template&quot; app, and we would like to create more apps quickly when needed, for testing purposes."}, {"owner": {"reputation": 7017, "user_id": 816416, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cea2d43b65bd3fbc1a0991c30ace34f6?s=128&d=identicon&r=PG", "display_name": "Vishnu Haridas", "link": "https://stackoverflow.com/users/816416/vishnu-haridas"}, "edited": false, "score": 0, "creation_date": 1546975525, "post_id": 54095585, "comment_id": 95029604, "body": "If you want to build APKs for different brands with different API endpoints and package names, you can use the built-in Gradle configuration. Look at this question - <a href=\"https://stackoverflow.com/q/17057314/816416\">stackoverflow.com/q/17057314/816416</a> -- Is this what you want to achieve?"}, {"owner": {"reputation": 825, "user_id": 8286029, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2b4188ba2c535940200876c2cc665f89?s=128&d=identicon&r=PG&f=1", "display_name": "Elynad", "link": "https://stackoverflow.com/users/8286029/elynad"}, "reply_to_user": {"reputation": 7017, "user_id": 816416, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cea2d43b65bd3fbc1a0991c30ace34f6?s=128&d=identicon&r=PG", "display_name": "Vishnu Haridas", "link": "https://stackoverflow.com/users/816416/vishnu-haridas"}, "edited": false, "score": 0, "creation_date": 1547036006, "post_id": 54095585, "comment_id": 95051874, "body": "@VishnuHaridas Thanks for your answer, it give me good ideas to do this. However, it seems there is a conflict with the google-services.json file, it contains the package_name and it has to be the same as the applicationId in the gradle file."}, {"owner": {"reputation": 7017, "user_id": 816416, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cea2d43b65bd3fbc1a0991c30ace34f6?s=128&d=identicon&r=PG", "display_name": "Vishnu Haridas", "link": "https://stackoverflow.com/users/816416/vishnu-haridas"}, "edited": false, "score": 0, "creation_date": 1547038808, "post_id": 54095585, "comment_id": 95053579, "body": "@Elynad Don&#39;t worry, here are some solutions for your json problem --- <a href=\"https://stackoverflow.com/a/34364376/816416\">stackoverflow.com/a/34364376/816416</a>"}, {"owner": {"reputation": 825, "user_id": 8286029, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2b4188ba2c535940200876c2cc665f89?s=128&d=identicon&r=PG&f=1", "display_name": "Elynad", "link": "https://stackoverflow.com/users/8286029/elynad"}, "edited": false, "score": 0, "creation_date": 1547041743, "post_id": 54095585, "comment_id": 95055325, "body": "Very useful indeed, but this answer does the opposite of my needs : I need to use the <b>same</b> google-services.json file for differents APK. This answer seems to use differents google-services.json files for the same APK"}, {"owner": {"reputation": 16268, "user_id": 603270, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cbfe6e57e0fa59928be4898a7be08c5d?s=128&d=identicon&r=PG", "display_name": "shkschneider", "link": "https://stackoverflow.com/users/603270/shkschneider"}, "edited": false, "score": 0, "creation_date": 1547044767, "post_id": 54095585, "comment_id": 95057300, "body": "You cannot use the same google play services configuration accross different APKs. What you could do is include multiple configurations (for multiple apps) inside a single json and that would work."}], "answers": [{"tags": [], "owner": {"reputation": 16268, "user_id": 603270, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cbfe6e57e0fa59928be4898a7be08c5d?s=128&d=identicon&r=PG", "display_name": "shkschneider", "link": "https://stackoverflow.com/users/603270/shkschneider"}, "is_accepted": false, "score": 1, "last_activity_date": 1547045075, "creation_date": 1547045075, "answer_id": 54112650, "question_id": 54095585, "link": "https://stackoverflow.com/questions/54095585/what-is-difference-between-android-studio-refactor-and-a-basic-search-replace/54112650#54112650", "title": "What is difference between Android Studio refactor and a basic search/replace?", "body": "<p>IntelliJ's Refactor option is indeed a \"find &amp; replace\". It is just also more than that in the sense that it's more powerful and watch out for a lot of things. (Don't say it out loud but it can also introduce side effects.)</p>\n\n<p>I would say the first step would be a find &amp; replace, but an intelligent one. When you do refactor an argument's name, it only updates it and not the method 200 lines below that includes the same words in it.</p>\n\n<p>It also looks for all usages, and that's way more powerful that just a global find &amp; replace.</p>\n\n<p>And the IDE provides an interface to opt-out some changes if conflicts arose. Etc.\nRead more at <a href=\"https://www.jetbrains.com/help/idea/tutorial-introduction-to-refactoring.html\" rel=\"nofollow noreferrer\">https://www.jetbrains.com/help/idea/tutorial-introduction-to-refactoring.html</a></p>\n"}], "owner": {"reputation": 825, "user_id": 8286029, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2b4188ba2c535940200876c2cc665f89?s=128&d=identicon&r=PG&f=1", "display_name": "Elynad", "link": "https://stackoverflow.com/users/8286029/elynad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1547045075, "creation_date": 1546963769, "question_id": 54095585, "link": "https://stackoverflow.com/questions/54095585/what-is-difference-between-android-studio-refactor-and-a-basic-search-replace", "title": "What is difference between Android Studio refactor and a basic search/replace?", "body": "<p>I am trying to change my package name under Android Studio, from generic_app to app_name.</p>\n\n<p>I could use the \"Refactor\" tool from Android Studio, but I am trying to do this with a python script.\nHowever, when I make my search and replace, then I open my project in android studio, my package name do not change. Calls to app_name are use in my activities and fragments, but the package name remains the same.</p>\n\n<p>Even after a build clean / rebuild project, some \"generated\" stuff are remaining with the old package name.</p>\n\n<p>What exactly differs from the Refactor tool in Android Studio, and an external search and replace ?</p>\n\n<p>How can I achieve this ?</p>\n\n<p>Here is my python code (I started today, sorry if the code is awful, feel free to give me some advices) :</p>\n\n<pre><code>import os\nimport sys\nimport fileinput\n\nsys.argv = [sys.argv[0], 'appName', 'package_name', '123', 'api_address']\n\ndef main():\n    cls()\n    print(\"Starting compiler...\")\n    if (len(sys.argv) &gt; 4):\n        print(\"\")\n        print(\"App name                  : {}\".format(sys.argv[1]))\n        print(\"Package name              : {}\".format(sys.argv[2]))\n        print(\"Establishment ID          : {}\".format(sys.argv[3]))\n        print(\"Establishment api address : {}\".format(sys.argv[4]))\n        input(\"\\nPress any key to confirm\")\n        setup(sys.argv[1])\n        refactor_package(sys.argv[1])\n        change_app_name(sys.argv[2])\n        set_establishment_id(sys.argv[3])\n        set_establishment_api_address(sys.argv[4])\n    else:\n        print(\"Incorrect use.\")\n        print(\".\\\\autocompiler.py app_name package_name establishment_id establishment_api_address\")\n    os.chdir('..')\n    message = \"\\nPress any key to close\"\n    choice = input(message).upper()\n\ndef setup(app_name):\n    command = \"\"\n    if (os.name == 'nt'):\n        command = \"robocopy /E generic_app {}\".format(app_name)\n    else:\n        command = \"cp -rf ./generic_app {}\".format(app_name)\n    os.system(command) # Will copy generic_app in a new project folder\n    os.chdir(app_name)  # Will go in the created directory\n    command = \"gradlew clean\"\n    os.system(command)  # Clear .build directory\n    command = \"gradlew cleanBuildCache\"\n    os.system(command)  # Clear .build cache directory\n\n    # Refactor ; change establishment ID &amp;&amp; API address ; build\n\ndef refactor_package(package_name):\n    rootdir = os.getcwd()\n    for root, subFolders, files in os.walk(rootdir):\n        #print(\"ROOT == {}\".format(root))\n        for file in files:\n            #print(\"\\t\\tFILE == {}\".format(file))\n            if (os.name == 'nt'):\n                check_file(root + '\\\\' + file, package_name)\n            else:\n                check_file(root + '/' + file, package_name)\n        for subFolder in subFolders:\n            print(\"\\t\\tSUBFOLDER == {}\".format(subFolders))\n\ndef check_file(filePath, packageName):\n    if (\"app\\src\\main\\java\\com\\discodery\\android\" in filePath\n        and \".git\" not in filePath):\n        print(\"OPENING FILE {}\".format(filePath))\n        with open(filePath, \"r\") as file:\n            data = file.read()\n            #print(\"---------- ORIGINAL ----------\")\n            #print(data)\n            file = open(filePath, \"w\")\n            file.write(data.replace(\"generic_app\", packageName))\n            #print(\"===== RESULT =====\")\n            file.close()\n            file = open(filePath, \"r\")\n            data = file.read()\n            #print(data)\n            file.close()\n            # input(\"Press any key to continue\")\n    elif (\"app\\src\\main\\AndroidManifest.xml\" in filePath):\n        print(\"SHOULD EDIT MANIFEST\")\n        input(\"OK\")\n        with open(filePath, \"r\") as file:\n            data = file.read()\n            file = open(filePath, \"w\")\n            file.write(data.replace('package=\"com.genericapp\"', 'package=\"com.{}\"'.format(packageName)))\n            file.close()\n    elif (\"app\\build.gradle\" in filePath):\n        print(\"SHOULD EDIT APP BUILD.GRADLE\")\n        input(\"OK\")\n        with open(filePath, \"r\") as file:\n            data = file.read()\n            file = open(filePath, \"w\")\n            file.write(data.replace('applicationId \"com.discodery.android.genericapp\"', 'applicationId \"com.discodery.android.{}\"'.format(packageName)))\n            file.close()\n\ndef change_app_name(app_name):\n    pass\n\ndef set_establishment_id(establishment_id):\n    pass\n\ndef set_establishment_api_address(api_address):\n    pass\n\ndef cls():\n    os.system('cls' if os.name == 'nt' else 'clear')\n\nmain()\n</code></pre>\n"}, {"tags": ["hibernate", "kotlin", "properties", "model", "notnull"], "answers": [{"comments": [{"owner": {"reputation": 291, "user_id": 1377182, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/04141c9b031ea6c1ec20a6a38ff10716?s=128&d=identicon&r=PG", "display_name": "Materno", "link": "https://stackoverflow.com/users/1377182/materno"}, "edited": false, "score": 0, "creation_date": 1546962928, "post_id": 54095034, "comment_id": 95023127, "body": "I thought about the same default values but I think this is some kind of implicit knowledge. I like it more explicit but I&#39;m still not sure if that is possible."}], "tags": [], "owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "is_accepted": false, "score": 0, "last_activity_date": 1546961683, "creation_date": 1546961683, "answer_id": 54095034, "question_id": 54094430, "link": "https://stackoverflow.com/questions/54094430/kotlin-property-declaration-in-hibernate-model/54095034#54095034", "title": "Kotlin: property declaration in hibernate model", "body": "<p>I use <code>0</code>, <code>false</code>, <code>\"\"</code> &amp;c for non-nullable fields (and <code>null</code> for nullable ones) \u2014 whichever makes the most sense as a \u2018default\u2019 value.</p>\n\n<p>(I'm not sure if that's best practice, but it's the best option I've seen so far!)</p>\n\n<p>The value will get overwritten when loading existing entities, of course \u2014 but it may be used when creating new ones, for fields you don't set manually.\u00a0 So that may inform your choice.</p>\n"}, {"comments": [{"owner": {"reputation": 291, "user_id": 1377182, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/04141c9b031ea6c1ec20a6a38ff10716?s=128&d=identicon&r=PG", "display_name": "Materno", "link": "https://stackoverflow.com/users/1377182/materno"}, "edited": false, "score": 0, "creation_date": 1546962780, "post_id": 54095057, "comment_id": 95023051, "body": "I thought about that but I want to prevent the whole ? and !! in the code when I access those properties. Defining nullable as false for hibernate would not help for that : /"}, {"owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "edited": false, "score": 0, "creation_date": 1546963705, "post_id": 54095057, "comment_id": 95023600, "body": "Mmm.  There&#39;s also the risk of fields still being null when trying to save; and it&#39;s not clear to the user of the entity class whether null is allowed or not."}, {"owner": {"reputation": 396, "user_id": 10663762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PQiUK.jpg?s=128&g=1", "display_name": "Ctorres", "link": "https://stackoverflow.com/users/10663762/ctorres"}, "edited": false, "score": 0, "creation_date": 1546964347, "post_id": 54095057, "comment_id": 95023971, "body": "If the field is still null when trying to save, it&#39;s because hibernate failed to put a value in this variable, so the problem will be somewhere else. I mean, if hibernate works properly, there&#39;s no way to have a null id, right?"}, {"owner": {"reputation": 291, "user_id": 1377182, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/04141c9b031ea6c1ec20a6a38ff10716?s=128&d=identicon&r=PG", "display_name": "Materno", "link": "https://stackoverflow.com/users/1377182/materno"}, "edited": false, "score": 0, "creation_date": 1546964978, "post_id": 54095057, "comment_id": 95024342, "body": "Technically yes. But you still have to do all the null check operations. For example you can not do something like var test: Long = myBaseEntity.id even if the id technically can not be null. What I want to achieve is that you can do exactly that. My possible solution above should fix that for all properties except the ID. I&#39;m still looking for a better solution for the id problem :D"}, {"owner": {"reputation": 396, "user_id": 10663762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PQiUK.jpg?s=128&g=1", "display_name": "Ctorres", "link": "https://stackoverflow.com/users/10663762/ctorres"}, "reply_to_user": {"reputation": 291, "user_id": 1377182, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/04141c9b031ea6c1ec20a6a38ff10716?s=128&d=identicon&r=PG", "display_name": "Materno", "link": "https://stackoverflow.com/users/1377182/materno"}, "edited": false, "score": 0, "creation_date": 1546965559, "post_id": 54095057, "comment_id": 95024643, "body": "@Materno, sure, I understood what your problem is, I just answered to gidds. ;) I guess your only solution is to initialize your variables with default values, but if you find a better way to avoid the problem, please post an new answered, it will help me for sure!"}, {"owner": {"reputation": 291, "user_id": 1377182, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/04141c9b031ea6c1ec20a6a38ff10716?s=128&d=identicon&r=PG", "display_name": "Materno", "link": "https://stackoverflow.com/users/1377182/materno"}, "edited": false, "score": 0, "creation_date": 1546966425, "post_id": 54095057, "comment_id": 95025127, "body": "I already posted an answer, that one with the data class below :) I&#39;m still not sure if this is good or good enough though :D Feel free to post what you think about that :)"}, {"owner": {"reputation": 396, "user_id": 10663762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PQiUK.jpg?s=128&g=1", "display_name": "Ctorres", "link": "https://stackoverflow.com/users/10663762/ctorres"}, "edited": false, "score": 0, "creation_date": 1547023335, "post_id": 54095057, "comment_id": 95044386, "body": "I chose to use traditional classes for my project, but I don&#39;t remember why, but I think I read somewhere they were sometimes buggy with hibernate. I don&#39;t know if it&#39;s true, and maybe it was, but JetBrain corrected it, I don&#39;t know. But I think if you can use data classes you should do it, because they&#39;re designed to represent data, and that&#39;s exactly what we want to do here."}, {"owner": {"reputation": 396, "user_id": 10663762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PQiUK.jpg?s=128&g=1", "display_name": "Ctorres", "link": "https://stackoverflow.com/users/10663762/ctorres"}, "edited": false, "score": 0, "creation_date": 1547023704, "post_id": 54095057, "comment_id": 95044590, "body": "Why does your data class solution resolve the issue? Your primary contructor is still accessible, and you still have to check if id is null or not when you want to use it. I mean, id is still a nullable attribute. So your problem is still here, right? Or maybe I missed something?"}, {"owner": {"reputation": 291, "user_id": 1377182, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/04141c9b031ea6c1ec20a6a38ff10716?s=128&d=identicon&r=PG", "display_name": "Materno", "link": "https://stackoverflow.com/users/1377182/materno"}, "edited": false, "score": 0, "creation_date": 1547026199, "post_id": 54095057, "comment_id": 95045958, "body": "The ID somehow still has the problem, right. But I think (correct me if I&#39;m wrong) that this is not a big deal because every entity I create just does not have an ID before I persist it with hibernate. So technically and logically the ID can be nullable. The big improvement for me seems to be that all the other fields don&#39;t have to be nullable like the &quot;number field&quot; in my example entity. They just have to be assigned via the constructor. I don&#39;t have to declare it as nullable and I don&#39;t have to declare it with some kind of &quot;default&quot; value like in the other answer."}, {"owner": {"reputation": 396, "user_id": 10663762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PQiUK.jpg?s=128&g=1", "display_name": "Ctorres", "link": "https://stackoverflow.com/users/10663762/ctorres"}, "edited": false, "score": 0, "creation_date": 1547039394, "post_id": 54095057, "comment_id": 95053955, "body": "You will have the same result as if you used my solution, I guess it&#39;s a matter of taste. But after reading all these solutions, yours seems to have the cleaner, because there&#39;s no &quot;conflict&quot; between what is written in the hibernate annotation and how the variable is declared, like in mine, and you don&#39;t have to assign fake value to the id attribute, as gidds suggested. If you encounter any difficulties due to the use of data classes, please let me know in comments section of your answer, I&#39;ll be curious to see if there&#39;s something wrong with Hibernate and data classes. Thank you ;)"}], "tags": [], "owner": {"reputation": 396, "user_id": 10663762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PQiUK.jpg?s=128&g=1", "display_name": "Ctorres", "link": "https://stackoverflow.com/users/10663762/ctorres"}, "is_accepted": false, "score": -2, "last_activity_date": 1546963977, "last_edit_date": 1546963977, "creation_date": 1546961787, "answer_id": 54095057, "question_id": 54094430, "link": "https://stackoverflow.com/questions/54094430/kotlin-property-declaration-in-hibernate-model/54095057#54095057", "title": "Kotlin: property declaration in hibernate model", "body": "<p>I had the same problem as you, and I avoided it by define the variable has nullable, then add the annotation <code>@Column(nullable = false)</code>, so that you know your entity will always have an id in the database. Here's an example of what you could have : </p>\n\n<pre><code>class BaseEntity {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(unique = true, nullable = false)\n    val id: Long? = null\n}\n</code></pre>\n\n<p>I don't know if it's the best solution, but I hope it helped you.</p>\n"}, {"tags": [], "owner": {"reputation": 291, "user_id": 1377182, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/04141c9b031ea6c1ec20a6a38ff10716?s=128&d=identicon&r=PG", "display_name": "Materno", "link": "https://stackoverflow.com/users/1377182/materno"}, "is_accepted": true, "score": -1, "last_activity_date": 1546962704, "creation_date": 1546962704, "answer_id": 54095299, "question_id": 54094430, "link": "https://stackoverflow.com/questions/54094430/kotlin-property-declaration-in-hibernate-model/54095299#54095299", "title": "Kotlin: property declaration in hibernate model", "body": "<p>Another solution I found are kotlins data classes but I'm still not sure if this is a good way.</p>\n\n<p>The Kotlin version of the Java class in my question would look like this:</p>\n\n<pre><code>@Entity\n@Table(name = \"Session_Ids\")\ndata class SessionId(\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    var id: Long?,\n\n    @Column\n    var number: Long,\n){\n    constructor(userId: Long): this(null, userId)\n}\n</code></pre>\n\n<p>The id still is nullable because otherwise hibernate may have conflicts with existing entities with the same IDs. The only other option would be 0 as a value but I think for an unpersisted entity null is more expactable than 0.</p>\n\n<p>I added the secondary constructor to prevent passing null for the ID. </p>\n\n<p>What do you think about that?</p>\n"}, {"tags": [], "owner": {"reputation": 2447, "user_id": 320761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/abRk9.png?s=128&g=1", "display_name": "Lukasz Frankowski", "link": "https://stackoverflow.com/users/320761/lukasz-frankowski"}, "is_accepted": false, "score": 0, "last_activity_date": 1617800093, "creation_date": 1617800093, "answer_id": 66986501, "question_id": 54094430, "link": "https://stackoverflow.com/questions/54094430/kotlin-property-declaration-in-hibernate-model/66986501#66986501", "title": "Kotlin: property declaration in hibernate model", "body": "<p>Problem 1 is your <code>@Column var number: Long</code>. If this field is not null, should be moved to constructor and initialized there:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>class Session(\n    @Column\n    var number: Long\n) \n</code></pre>\n<p>The same should be done for all other non-null fields, they should be initialized during object creation.</p>\n<p>Problem 2 is lazy ID which is always not null, but is not known during object creation, and is filled by Hibernate on insert. This case seems to be not solved in kotlin. As a workaround I use java-base class for entities with ID property introduced there:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@MappedSuperclass\npublic class BaseEntity {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @NonNull\n    protected Long id;\n\n}\n\n</code></pre>\n<p>If you use <code>javax.annotation.Nonnull</code> or other non-null annotation recognized by kotlin, this field will be seen as declared non-null in kotlin and you'll be able to avoid writing <code>!!</code> everywhere.</p>\n<p>Problem 3 is parent-child relation where two entities should be inserted and then set to each other in a relation, and we want to have stored related ID-s in both tables for querying purposes. This is possible in java, but not in kotlin, because it requires to declare a field on one side nullable, and forces to use <code>!!</code> everywhere, while from the business case perspective this field should be not null. In such a scenario I use the following workaround:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@Entity class UserAccount(\n\n    // user can have multiple accounts\n    @field:[\n        NotNull\n        ManyToOne\n    ]\n    val user: User,\n\n)\n\n@Entity class User {\n\n    // but has always one main account\n    @field:[\n        OneToOne\n        JoinColumn(table = TABLE, name = &quot;main_account_id&quot;)\n    ]\n    private var _mainAccount: UserAccount? = null\n\n    override var mainAccount: UserAccount\n        get() = _mainAccount!!\n        set(value) {\n            _mainAccount = value\n        }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 291, "user_id": 1377182, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/04141c9b031ea6c1ec20a6a38ff10716?s=128&d=identicon&r=PG", "display_name": "Materno", "link": "https://stackoverflow.com/users/1377182/materno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 742, "favorite_count": 1, "accepted_answer_id": 54095299, "answer_count": 4, "score": 3, "last_activity_date": 1617800093, "creation_date": 1546959506, "question_id": 54094430, "link": "https://stackoverflow.com/questions/54094430/kotlin-property-declaration-in-hibernate-model", "title": "Kotlin: property declaration in hibernate model", "body": "<p>We have plenty of java applications and are trying to implement our first one in Kotlin. The Question is: what is the best way to initialize the properties of a simple hibernate model?</p>\n\n<p>Let's take the following example in Java:</p>\n\n<pre><code>@Entity\n@Table(name = \"Session_Ids\")\npublic class SessionId() {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    protected Long id;\n\n    @Column\n    protected Long number;\n}\n</code></pre>\n\n<p>Now let's assume that the id and the number in the database can never be null. So after hibernate is done with everything the model will always have a value in the id field and a value in the number field.</p>\n\n<p>How can I do that in Kotlin?\nI can't initialize them with null because I have to declare those fields as Nullable which they shouldn't be. I can not use lateinit because both fields are primitive long types.</p>\n\n<p>The only way I see to prevent defining them as nullable is to initialize them with some wrong default value. Something like</p>\n\n<pre><code>var number: Long = -1\n</code></pre>\n\n<p>But that looks wrong to me.</p>\n\n<p>Is there some kind of best practice to do something like this in Kotlin?</p>\n\n<p>Thank you in advance!</p>\n"}, {"tags": ["postgresql", "kotlin", "jooq"], "comments": [{"owner": {"reputation": 3293, "user_id": 1853785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TJlNB.jpg?s=128&g=1", "display_name": "Omar Mainegra", "link": "https://stackoverflow.com/users/1853785/omar-mainegra"}, "edited": false, "score": 1, "creation_date": 1546963765, "post_id": 54093708, "comment_id": 95023629, "body": "According to this <a href=\"https://stackoverflow.com/a/44553992/1853785\">answer</a> is not possible, have you tried to use sealed class instead to see if it works?"}, {"owner": {"reputation": 16575, "user_id": 52954, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/49313a97f8c3f50e05b6c7ce6d3e8ecd?s=128&d=identicon&r=PG", "display_name": "LiorH", "link": "https://stackoverflow.com/users/52954/liorh"}, "reply_to_user": {"reputation": 3293, "user_id": 1853785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TJlNB.jpg?s=128&g=1", "display_name": "Omar Mainegra", "link": "https://stackoverflow.com/users/1853785/omar-mainegra"}, "edited": false, "score": 0, "creation_date": 1546980827, "post_id": 54093708, "comment_id": 95031899, "body": "Thanks, good to know that @OmarMainegra."}, {"owner": {"reputation": 182, "user_id": 3904073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/535538b93197c80b41fff0ec19ab4447?s=128&d=identicon&r=PG&f=1", "display_name": "Ishtdeep Hora", "link": "https://stackoverflow.com/users/3904073/ishtdeep-hora"}, "edited": false, "score": 1, "creation_date": 1577758457, "post_id": 54093708, "comment_id": 105247653, "body": "enum class internally extends java.lang.enum class. So, you can&#39;t extend that further"}], "owner": {"reputation": 16575, "user_id": 52954, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/49313a97f8c3f50e05b6c7ce6d3e8ecd?s=128&d=identicon&r=PG", "display_name": "LiorH", "link": "https://stackoverflow.com/users/52954/liorh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 158, "favorite_count": 0, "answer_count": 0, "score": 7, "last_activity_date": 1546963536, "creation_date": 1546956980, "last_edit_date": 1546963536, "question_id": 54093708, "link": "https://stackoverflow.com/questions/54093708/jooq-kotlin-enumtype", "title": "Jooq kotlin EnumType", "body": "<p>Is there a way in kotlin for an enum class to extend Jooq's <code>EnumType</code> ?</p>\n\n<p>I get a compile error since EnumType has an abstract getName method and so does Kotlin enum class.</p>\n\n<pre><code>Error:(96, 5) Kotlin: Inherited platform declarations clash: The following declarations have the same JVM signature (getName()Ljava/lang/String;):\n    fun &lt;get-name&gt;(): String defined in com.xyz.MyEnum.Val1\n    fun getName(): String defined in com.xyz.MyEnum.Val1\n</code></pre>\n\n<p>If I use a regular Kotlin class instead of enum class then Jooq fails with the error:</p>\n\n<pre><code>Error while looking up Scala enum\nClassNotFoundException ...\n</code></pre>\n\n<p>Can Jooq + Kotlin + Postgresql Enums play nicely?</p>\n"}, {"tags": ["java", "kotlin", "server", "development-environment", "remote-server"], "answers": [{"tags": [], "owner": {"reputation": 1312, "user_id": 1102322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LiRfT.png?s=128&g=1", "display_name": "PiotrK", "link": "https://stackoverflow.com/users/1102322/piotrk"}, "is_accepted": false, "score": 0, "last_activity_date": 1555930687, "creation_date": 1555930687, "answer_id": 55793265, "question_id": 54092115, "link": "https://stackoverflow.com/questions/54092115/easy-deployment-of-a-jvm-based-web-server-on-a-remote-machine/55793265#55793265", "title": "Easy deployment of a jvm based web server on a remote machine", "body": "<p>Do you have to keep your server code on remote machine? How about developing and testing it locally, and only when you want to test it on the actual deployment site, then deploy it?</p>\n\n<p>I once tried to use SSH-FS with IntelliJ, and because of the way IntelliJ builds its cache, the performance was terrible. The caching was in progress, but after 15 minutes I gave up. And IntelliJ without its caching and smart hints would be close to a regular editor.</p>\n\n<p>In my professional environment, I also use Unison from time to time: <a href=\"https://www.cis.upenn.edu/~bcpierce/unison/\" rel=\"nofollow noreferrer\">https://www.cis.upenn.edu/~bcpierce/unison/</a>. I have it configured in a way to copy only code, not the generated sources. Most of the times it works pretty well, but it tends to have its quirks which can make you waste half a day on debugging it. </p>\n\n<p>To sum up, I see such options:</p>\n\n<ol>\n<li>Developing and testing locally, and avoiding frequent deployments to the remote machine.</li>\n<li>VSCode with <code>sshfs</code> plugin, because why not, if it's enough for you for <code>nodejs</code>?</li>\n<li>A synchronization tool like Unison. </li>\n</ol>\n\n<p>Related answers regarding SSHFS from IntelliJ Support (several years old, but, I believe, still hold true):</p>\n\n<ul>\n<li><a href=\"https://intellij-support.jetbrains.com/hc/en-us/community/posts/206592225-Indexing-on-a-project-hosted-via-SSHFS-makes-pycharm-unusable-disable-indexing-\" rel=\"nofollow noreferrer\">https://intellij-support.jetbrains.com/hc/en-us/community/posts/206592225-Indexing-on-a-project-hosted-via-SSHFS-makes-pycharm-unusable-disable-indexing-</a></li>\n<li><a href=\"https://intellij-support.jetbrains.com/hc/en-us/community/posts/206599275-Working-directly-on-remote-project-via-ssh-\" rel=\"nofollow noreferrer\">https://intellij-support.jetbrains.com/hc/en-us/community/posts/206599275-Working-directly-on-remote-project-via-ssh-</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 54296, "user_id": 128397, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/22b05e50077230ba919b240af4bc13cd?s=128&d=identicon&r=PG", "display_name": "Daniel Pryden", "link": "https://stackoverflow.com/users/128397/daniel-pryden"}, "is_accepted": false, "score": 0, "last_activity_date": 1555935995, "creation_date": 1555935995, "answer_id": 55794403, "question_id": 54092115, "link": "https://stackoverflow.com/questions/54092115/easy-deployment-of-a-jvm-based-web-server-on-a-remote-machine/55794403#55794403", "title": "Easy deployment of a jvm based web server on a remote machine", "body": "<p>A professional deployment won't keep source code on the remote server, for several reasons:</p>\n\n<ol>\n<li><p><strong>It's less secure.</strong> If you can change your running application by editing source code and recompiling (or even if edits are deployed automatically), it's that much easier for an attacker to do the same.</p></li>\n<li><p><strong>It's less stable.</strong> What happens to users who try to access your application while you are editing source files or recompiling? At best, they get an error page; at worst, they could get a garbage response, or even a leak of customer data.</p></li>\n<li><p><strong>It's less testable.</strong> If you edit your source code and deploy immediately, how do you test to ensure that your application works? Throwing untested buggy code directly at your users is highly unprofessional.</p></li>\n<li><p><strong>It's less scalable.</strong> If you can keep your source code on the server, then by definition you only have one server.  (Or, slightly better, a small number of servers that share a common filesystem.) But that's not very scalable: you're clearly hosted in only one geographic location and thus vulnerable to all kinds of single points of failure. A professional web-scale deployment will need to be geographically distributed and redundant at every level of the application.</p></li>\n</ol>\n\n<p>If you want a \"quick iterative development cycle\" then the best way to do that is with a <strong>local development environment</strong>, which may involve a <em>local VM</em> (managed with something like Vagrant) or a <em>local container</em> (managed with something like Docker). VMs and containers both provide mechanisms to map a local directory containing your source code into the running application server.</p>\n"}], "owner": {"reputation": 1375, "user_id": 6780389, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/e0e4a17ac5c2908e5c892f6f8f87feb2?s=128&d=identicon&r=PG&f=1", "display_name": "saga", "link": "https://stackoverflow.com/users/6780389/saga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1555935995, "creation_date": 1546951572, "question_id": 54092115, "link": "https://stackoverflow.com/questions/54092115/easy-deployment-of-a-jvm-based-web-server-on-a-remote-machine", "title": "Easy deployment of a jvm based web server on a remote machine", "body": "<p>I wanted to know what is the easiest way to deploy a web server made using java or kotlin. With <code>nodejs</code>, I just keep all the server code on remote machine and edit it using the <code>sshfs</code> plugin for vscode. For jvm based servers, this doesn't appear as easy since intellij doesn't provide remote editing support. Is there a method for jvm based servers which allows quick iterative development cycle?</p>\n"}, {"tags": ["kotlin", "sharedpreferences"], "comments": [{"owner": {"reputation": 6543, "user_id": 641914, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0ba99266166249a4a67b6347b7bec53f?s=128&d=identicon&r=PG", "display_name": "Graham", "link": "https://stackoverflow.com/users/641914/graham"}, "edited": false, "score": 0, "creation_date": 1546953923, "post_id": 54092021, "comment_id": 95017472, "body": "Please edit your question and post your code so others can see what you&#39;ve already tried.  You will also have a better experience here if you take the <a href=\"https://stackoverflow.com/tour\">tour</a> and read about <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask a good question</a>"}, {"owner": {"reputation": 3293, "user_id": 1853785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TJlNB.jpg?s=128&g=1", "display_name": "Omar Mainegra", "link": "https://stackoverflow.com/users/1853785/omar-mainegra"}, "edited": false, "score": 0, "creation_date": 1546962603, "post_id": 54092021, "comment_id": 95022944, "body": "Start by saving to <code>SharedPreferences</code> the identification of the activity that is been destroyed and start it on app launch"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10884252, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hN9yBwVy70U/AAAAAAAAAAI/AAAAAAAAKQk/_A01M41kHrY/photo.jpg?sz=128", "display_name": "Aboodi", "link": "https://stackoverflow.com/users/10884252/aboodi"}, "edited": false, "score": 0, "creation_date": 1547036093, "post_id": 54095905, "comment_id": 95051917, "body": "i don&#39;t know where do i add this code? i&#39;m a complete noob! :&#39;(,"}, {"owner": {"reputation": 825, "user_id": 8286029, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2b4188ba2c535940200876c2cc665f89?s=128&d=identicon&r=PG&f=1", "display_name": "Elynad", "link": "https://stackoverflow.com/users/8286029/elynad"}, "reply_to_user": {"reputation": 3, "user_id": 10884252, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hN9yBwVy70U/AAAAAAAAAAI/AAAAAAAAKQk/_A01M41kHrY/photo.jpg?sz=128", "display_name": "Aboodi", "link": "https://stackoverflow.com/users/10884252/aboodi"}, "edited": false, "score": 0, "creation_date": 1547038137, "post_id": 54095905, "comment_id": 95053130, "body": "@Aboodi I have edited my answer. Check it out, and feel free to ask for more explanations."}], "tags": [], "owner": {"reputation": 825, "user_id": 8286029, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2b4188ba2c535940200876c2cc665f89?s=128&d=identicon&r=PG&f=1", "display_name": "Elynad", "link": "https://stackoverflow.com/users/8286029/elynad"}, "is_accepted": true, "score": 0, "last_activity_date": 1547038106, "last_edit_date": 1547038106, "creation_date": 1546964991, "answer_id": 54095905, "question_id": 54092021, "link": "https://stackoverflow.com/questions/54092021/kotlin-how-do-i-set-a-sharedpreference-code-so-that-i-open-the-closed-app-it/54095905#54095905", "title": "Kotlin - How do i set a sharedpreference code so that i open the closed app, it opens the last Activity, where i left it", "body": "<p>You could set a SplashActivity, where your app start, that will start other activities.</p>\n\n<p>In this SplashActivity, you can set a var lastActivity, that will be a code to keep in which activity you were last time.\nYou get it with SharedPreference, and then go to the activity.</p>\n\n<p>i.e :</p>\n\n<pre><code>String lastActivity = SharedPreference.getString(...) // I don't really remember the syntax\nif (lastActivity == \"HelloWorldActivity\")\n    startActivity(HelloWorldActivity.getStartIntent(context))\nelse if (lastActivity == \"GoodByeActivity\")\n    startActivity(GoodByeActivity.getStartIntent(context))\n</code></pre>\n\n<p>Then, do NOT forget to edit your SharedPreference value EACH TIME you change activity.</p>\n\n<p>I don't know if this is a good practice, but feel free to test this and give your think.</p>\n\n<p>EDIT</p>\n\n<p>First, you need to understand how is Shared Preference File. I think it looks like this :</p>\n\n<pre><code>\"app_name\"=\"Your app name\"\n\"last_activity\"=\"Your last activity\"\n\"user_age\"=\"23\"\n</code></pre>\n\n<p>This could be the first activity you launch :</p>\n\n<pre><code>class SplashActivity : AppCompatActivity() {\n\n    var lastActivity = \"\"\n\n    override fun onCreate(savedInstanceState : Bundle?) {\n        super.onCreate()\n\n        /*\n            Here, we will get the SharedPreferencesFile.\n            Then, we get the value linked to the key TAG_LAST_ACTIVITY (set in companion object)\n        */\n        val sharedPref = this.getSharedPreferences(getString(R.string.shared_preference_file_name), 0)\n        lastActivity = sharedPref.getString(TAG_LAST_ACTIVITY, \"\")\n\n        var activityToStart : AppCompatActivity? = null\n        if (lastActivity.isBlank())\n             activityToStart = YourActivityToStartAtFirstLaunch.getStartIntent(this)\n        else if (lastActivity.equals(TAG_ACTIVITY_ONE))\n             activityToStart = ActivityOne.getStartIntent(this)\n        else if (lastActivity.equals(TAG_ACTIVITY_TWO))\n             activityToStart = ActivityTwo.getStartIntent(this)\n        else if\n             ... // Use as many as else if you need, but think about the \"when\" condition, it is better !\n\n        startActivity(activityToStart)\n    }\n\n    companion object {\n        private const val TAG_LAST_ACTIVITY = \"last_activity\"\n        private const val TAG_ACTIVITY_ONE = \"activity_one\"\n        private const val TAG_ACTIVITY_TWO = \"activity_two\"\n    }\n}\n</code></pre>\n\n<p>And this could be your ActivityOne, for example :</p>\n\n<pre><code>class ActivityOne : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState : Bundle?) {\n        super.onCreate()\n\n        /*\n            Here, we will modify the variable LAST_ACTIVITY in the shared preferences file by setting it to \"activity_one\".\n            So, if the user quit this app now, you will know at next launch in which activity he stopped.\n            I think it is a better practice to set this in the onPause() or onStopped() method. Think about it ! ;)\n        */\n        val sharedPrefEditor = this.getSharedPreferences(getString(R.string.shared_preference_file_name, 0)).edit()\n        sharedPrefEditor.putString(TAG_LAST_ACTIVITY, TAG_ACTIVITY_ONE)\n        sharedPrefEditor.apply()\n    }\n\n    companion object {\n        fun getStartIntent(context : Context) : Intent = Intent(context, ActivityOne()::class.java)\n\n        private const val TAG_ACTIVITY_ONE = \"activity_one\"\n        private const val TAG_LAST_ACTIVITY = \"last_activity\"\n    }    \n}\n</code></pre>\n\n<p>Do not forget to put your shared preference file name in your values/strings.xml file :</p>\n\n<pre><code>&lt;string name=\"shared_preference_file_name\"&gt;com.example.yourappname.sharedpref\"&lt;/string&gt;\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10884252, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hN9yBwVy70U/AAAAAAAAAAI/AAAAAAAAKQk/_A01M41kHrY/photo.jpg?sz=128", "display_name": "Aboodi", "link": "https://stackoverflow.com/users/10884252/aboodi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 54095905, "answer_count": 1, "score": 0, "last_activity_date": 1547038106, "creation_date": 1546951227, "last_edit_date": 1546953824, "question_id": 54092021, "link": "https://stackoverflow.com/questions/54092021/kotlin-how-do-i-set-a-sharedpreference-code-so-that-i-open-the-closed-app-it", "title": "Kotlin - How do i set a sharedpreference code so that i open the closed app, it opens the last Activity, where i left it", "body": "<p>I made two activities in my application, I want the app to be opened where I left off. In other words, not the default activity but the activity where I was when I last exited the app.</p>\n"}, {"tags": ["kotlin", "android-recyclerview", "android-databinding", "2-way-object-databinding", "android-mvvm"], "answers": [{"comments": [{"owner": {"reputation": 419, "user_id": 5663310, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J898n.png?s=128&g=1", "display_name": "Uday Nayak", "link": "https://stackoverflow.com/users/5663310/uday-nayak"}, "edited": false, "score": 0, "creation_date": 1547031698, "post_id": 54096193, "comment_id": 95049384, "body": "what will be changes in layout(recyvlerview) or adapter?"}, {"owner": {"reputation": 825, "user_id": 8286029, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2b4188ba2c535940200876c2cc665f89?s=128&d=identicon&r=PG&f=1", "display_name": "Elynad", "link": "https://stackoverflow.com/users/8286029/elynad"}, "reply_to_user": {"reputation": 419, "user_id": 5663310, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J898n.png?s=128&g=1", "display_name": "Uday Nayak", "link": "https://stackoverflow.com/users/5663310/uday-nayak"}, "edited": false, "score": 0, "creation_date": 1547031921, "post_id": 54096193, "comment_id": 95049535, "body": "@UdayNayak what do you mean ? Which changes ?"}], "tags": [], "owner": {"reputation": 825, "user_id": 8286029, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2b4188ba2c535940200876c2cc665f89?s=128&d=identicon&r=PG&f=1", "display_name": "Elynad", "link": "https://stackoverflow.com/users/8286029/elynad"}, "is_accepted": false, "score": 1, "last_activity_date": 1547039120, "last_edit_date": 1547039120, "creation_date": 1546965961, "answer_id": 54096193, "question_id": 54091744, "link": "https://stackoverflow.com/questions/54091744/radio-button-in-recyclerview-with-kotlin-mvvm-and-databinding/54096193#54096193", "title": "Radio button in recyclerview with kotlin MVVM and databinding", "body": "<p>I usually do like this :</p>\n\n<pre><code>class YourAdapter(val selected : (YourClassType) -&gt; Unit) : RecyclerView.Adapter&lt;RecyclerView.ViewHolder&gt;() {\n\n    // override fun onCreateViewHolder\n\n    // override fun getItemCount()\n\n    // override fun onBindViewHolder\n\n    inner class YourViewHolder(val binding: YourClassItemBinding) : RecyclerView.ViewHolder(binding.root) {\n        fun setData(item : YourItem) {\n            binding.radioButton.setOnClickListener {\n                binding.radioButton.checked = true\n                selected.invoke(item) // use this if you need the item in your activity\n            }\n            // binding.viewModel.setData\n        }\n    }\n\n}\n</code></pre>\n\n<p>But you will probably need to create your own function to uncheck other radioButtons items in the list when one is selected.</p>\n\n<p>EDIT</p>\n\n<p>I don't think it is a good practice to put the adapter in the xml file.</p>\n\n<p>I usually do like this, in the activity that \"owns\" the RecyclerView :</p>\n\n<pre><code>class YourActivity : AppCompatActivity() {\n\n    var listRv : RecyclerView? = null\n\n    var viewModel = YourViewModel()\n\n    var adapter = YourAdapter {\n        // Put here the actions you want to achieve when a user click on an item and the adapter selected val is \"invoked\"\n    }\n\n    override fun onCreate(savedInstanceState : Bundle?) {\n        super.onCreate()\n\n        val binding = DataBindingUtil.setContentView&lt;ActivityYourBinding&gt;(this, R.layout.activity_your_layout)\n        binding.viewModel = viewModel\n\n        listRv = binding.yourListId\n        listRv?.adapter = adapter // Set your list adapter here\n        listRv?.layoutManager = LinearLayoutManager(this)\n\n\n        // etc.\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7518165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e04850eeb055f0fbda87834fdf258c95?s=128&d=identicon&r=PG&f=1", "display_name": "suraj bokankar", "link": "https://stackoverflow.com/users/7518165/suraj-bokankar"}, "is_accepted": false, "score": 0, "last_activity_date": 1555058671, "creation_date": 1555058671, "answer_id": 55647725, "question_id": 54091744, "link": "https://stackoverflow.com/questions/54091744/radio-button-in-recyclerview-with-kotlin-mvvm-and-databinding/55647725#55647725", "title": "Radio button in recyclerview with kotlin MVVM and databinding", "body": "<p>If your using rxjava/rxkotlin then map operator will help you to achieve above</p>\n\n<pre><code>val item=YourModel()   \nval observable:Observable&lt;YourModel&gt;\nobservable=Observable.fromIterable(list)\nobservable.map { model-&gt;\n    model.isChecked = filter.modelType===item.modelType\n    }\n}.toList().subscribeOn(Schedulers.io()).observeOn(AndroidSchedulers.mainThread()).subscribe()\n</code></pre>\n\n<p>After map operation use updated list,it will produce result which you wanted.</p>\n"}], "owner": {"reputation": 419, "user_id": 5663310, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J898n.png?s=128&g=1", "display_name": "Uday Nayak", "link": "https://stackoverflow.com/users/5663310/uday-nayak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2063, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1555058671, "creation_date": 1546950171, "last_edit_date": 1547593603, "question_id": 54091744, "link": "https://stackoverflow.com/questions/54091744/radio-button-in-recyclerview-with-kotlin-mvvm-and-databinding", "title": "Radio button in recyclerview with kotlin MVVM and databinding", "body": "<p>Redio button in recyclerview with kotlin, dagger2, retrofit , livedata, MVVM and databinding,I need updated list from videModel and also set selected positions to find it\nis selected and other on is deselected. please suggest how to select only one in RadioButton in List.\n<strong>here are my adapter:-</strong> </p>\n\n<pre><code>class DocTypeListAdapter : RecyclerView.Adapter&lt;DocTypeListAdapter.ViewHolder&gt;() {\n    private lateinit var postList: List&lt;DriverType&gt;\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): DocTypeListAdapter.ViewHolder {\n        val binding: ItemDocumentTypeBinding =\n            DataBindingUtil.inflate(LayoutInflater.from(parent.context), R.layout.item_document_type, parent, false)\n        return ViewHolder(binding)\n    }\n\n    override fun onBindViewHolder(holder: DocTypeListAdapter.ViewHolder, position: Int) {\n        holder.bind(postList[position], position, mSelectedItem)\n    }\n\n    override fun getItemCount(): Int {\n        return if (::postList.isInitialized) postList.size else 0\n    }\n\n    fun updatePostList(postList: List&lt;DriverType&gt;) {\n        this.postList = postList\n        notifyDataSetChanged()\n    }\n\n    class ViewHolder(private val binding: ItemDocumentTypeBinding) : RecyclerView.ViewHolder(binding.root) {\n        private val viewModel = DocTypeListViewModel()\n\n        fun bind(post: DriverType, position: Int, selectedPosition: Int) {\n//            viewModel.bind(post,true)\n            viewModel.bind(post,position,selectedPosition)\n\n//             mRadioButton : RadioButton = binding.radioButton;\n\n\n\n            viewModel.readioButtonClicked(getAdapterPosition(),position)\n            binding.viewModel = viewModel\n        }\n    }\n}\n</code></pre>\n\n<p>viewModel Like:- </p>\n\n<pre><code>class DocTypeListViewModel : BaseViewModel() {\n    private val postTitle = MutableLiveData&lt;String&gt;()\n    private val postBody = MutableLiveData&lt;String&gt;()\n     val isChecked = MutableLiveData&lt;Boolean&gt;()\n    private var mSelectedItem = -1\n\n\n    fun bind(post: DriverType, position: Int, selectedPosition: Int) {\n        postTitle.value = post.driver_type\n        postBody.value = post.description\n\n        if ((selectedPosition == -1 &amp;&amp; position == 0))\n            isChecked.value = true\n        else\n            if (selectedPosition == position)\n                isChecked.value = true\n            else\n                isChecked.value = false\n\n    }\n\n    fun getPostTitle(): MutableLiveData&lt;String&gt; {\n        return postTitle\n    }\n\n    fun getPostBody(): MutableLiveData&lt;String&gt; {\n        return postBody\n    }\n\n    fun getIsChecked(): MutableLiveData&lt;Boolean&gt; {\n        return isChecked\n    }\n\n    fun readioButtonClicked(selectedPosition: Int, pos:Int) {\n        mSelectedItem = selectedPosition\n\n        //            mSelectedItem=getAdapterPosition()\n//            notifyDataSetChanged()\n\n    }\n}\n</code></pre>\n\n<p>my layout:- </p>\n\n<pre><code>&lt;android.support.v7.widget.RecyclerView\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"\n                app:adapter=\"@{viewModel.getDocTypeListAdapter()}\"\n\n                android:layout_marginTop=\"8dp\"\n                app:layout_constraintTop_toBottomOf=\"@+id/textView9\"\n                app:layout_constraintStart_toStartOf=\"parent\"\n                android:layout_marginStart=\"8dp\"\n                app:layout_constraintEnd_toEndOf=\"parent\"\n                android:layout_marginEnd=\"8dp\"\n                android:id=\"@+id/recyclerView\"\n                android:layout_marginBottom=\"8dp\"\n                app:layout_constraintBottom_toTopOf=\"@+id/button\"/&gt;\n</code></pre>\n\n<p>binding adpter:-</p>\n\n<pre><code>@BindingAdapter(\"adapter\")\nfun setAdapter(view: RecyclerView, adapter: RecyclerView.Adapter&lt;*&gt;) {\n    view.adapter = adapter\n}\n</code></pre>\n"}, {"tags": ["java", "android", "jenkins", "gradle", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 379, "user_id": 11050244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd85c948cff1322cb06097c3e43e4e86?s=128&d=identicon&r=PG&f=1", "display_name": "Aars93", "link": "https://stackoverflow.com/users/11050244/aars93"}, "edited": false, "score": 0, "creation_date": 1555416474, "post_id": 54091423, "comment_id": 98096360, "body": "Thanks for helping my problem!"}], "tags": [], "owner": {"reputation": 1049, "user_id": 5191371, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-ot9rjGa7uA8/AAAAAAAAAAI/AAAAAAAAABU/koPCcazBpTA/photo.jpg?sz=128", "display_name": "Milad Bahmanabadi", "link": "https://stackoverflow.com/users/5191371/milad-bahmanabadi"}, "is_accepted": false, "score": 1, "last_activity_date": 1546948888, "creation_date": 1546948888, "answer_id": 54091423, "question_id": 54091325, "link": "https://stackoverflow.com/questions/54091325/java-util-concurrent-executionexception-com-android-builder-internal-aapt-v2-aa/54091423#54091423", "title": "java.util.concurrent.ExecutionException: com.android.builder.internal.aapt.v2.Aapt2Exception: Android resource compilation failed - Jenkins", "body": "<p>This is due to adding an image in <code>drawable</code> which has some extension like (<code>.jpg</code>), and you have changed or saved that to a <code>.png</code> format (this error will occur while changing the image format manually without using an editor tool).</p>\n\n<p>Android Studio will throws an error while compiling the resource package using AAPT (Android Asset Packaging Tool), so all you need to do is use some image editor tools.<br>\n Rebuild your project once everything is done.</p>\n"}], "owner": {"reputation": 23, "user_id": 5368483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd537defc3fa6066cb5106442cd38329?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Wahaj", "link": "https://stackoverflow.com/users/5368483/muhammad-wahaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1092, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1546958801, "creation_date": 1546948563, "last_edit_date": 1546958801, "question_id": 54091325, "link": "https://stackoverflow.com/questions/54091325/java-util-concurrent-executionexception-com-android-builder-internal-aapt-v2-aa", "title": "java.util.concurrent.ExecutionException: com.android.builder.internal.aapt.v2.Aapt2Exception: Android resource compilation failed - Jenkins", "body": "<p>I'm trying to build an APK using assembleDebug command of gradle but I'm currently facing this error: </p>\n\n<pre><code>`java.util.concurrent.ExecutionException: com.android.builder.internal.aapt.v2.Aapt2Exception: Android resource compilation failed`\n</code></pre>\n\n<p>with the following output:</p>\n\n<pre><code>  * What went wrong: Execution failed for task ':app:mergeDebugResources'.\n&gt; java.util.concurrent.ExecutionException: com.android.builder.internal.aapt.v2.Aapt2Exception: Android resource compilation failed   Output:  C:\\Windows\\System32\\config\\systemprofile\\.gradle\\caches\\transforms-1\\files-1.1\\core-0.9.6.0.aar\\18f1091c245c93f2961ec83a1230d434\\res\\anim\\popup_exit.xml: error: file not found.\n     Command: C:\\Windows\\System32\\config\\systemprofile\\.gradle\\caches\\transforms-1\\files-1.1\\aapt2-3.2.1-4818971-windows.jar\\e73f7e9c03a39a7518e973bff44c7fef\\aapt2-3.2.1-4818971-windows\\aapt2.exe compile --legacy \\\n          -o \\\n          C:\\Program Files (x86)\\Jenkins\\workspace\\HIRI App Android\\app\\build\\intermediates\\res\\merged\\debug \\\n          C:\\Windows\\System32\\config\\systemprofile\\.gradle\\caches\\transforms-1\\files-1.1\\core-0.9.6.0.aar\\18f1091c245c93f2961ec83a1230d434\\res\\anim\\popup_exit.xml Daemon:  AAPT2 aapt2-3.2.1-4818971-windows Daemon #0\n</code></pre>\n\n<p>My build.gradle file is as follows:</p>\n\n<blockquote>\n<pre><code> buildscript {\n        ext.kotlin_version = '1.2.71'\n\n        repositories {\n            google()\n            jcenter()\n        }\n        dependencies {\n            classpath 'com.android.tools.build:gradle:3.2.1'\n            classpath 'com.google.gms:google-services:4.2.0'\n            classpath 'com.github.dcendents:android-maven-gradle-plugin:2.0'\n            classpath 'com.jfrog.bintray.gradle:gradle-bintray-plugin:1.8.0'\n            // NOTE: Do not place your application dependencies here; they belong\n            // in the individual module build.gradle files\n        }\n    }\n\n    allprojects {\n        repositories {\n            google()\n            jcenter()\n            maven { url 'https://maven.google.com' }\n            maven { url 'https://jitpack.io' }\n\n        }\n</code></pre>\n</blockquote>\n\n<p><strong>The gradle version I'm using is 4.9</strong></p>\n\n<p>I'm facing the same issue for two other projects as well. </p>\n"}, {"tags": ["java", "spring-boot", "kotlin", "websocket"], "answers": [{"tags": [], "owner": {"reputation": 356, "user_id": 3376370, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/952ed47e8d996266dcad26d108f4219e?s=128&d=identicon&r=PG&f=1", "display_name": "edr", "link": "https://stackoverflow.com/users/3376370/edr"}, "is_accepted": true, "score": 0, "last_activity_date": 1546949049, "creation_date": 1546949049, "answer_id": 54091458, "question_id": 54090998, "link": "https://stackoverflow.com/questions/54090998/how-to-send-messages-in-spring-boot-via-websocket-broker-in-the-order-they-were/54091458#54091458", "title": "How to send Messages in spring boot via websocket broker in the order they were submitted?", "body": "<p>After further debugging I found my mistake. The different threads are from the submitting code. I should have added the channel interceptor to the outbound client channel, not the broker:</p>\n\n<pre><code>override fun configureClientOutboundChannel(registration: ChannelRegistration) {\n    val channelInterceptor: ChannelInterceptor = object: ChannelInterceptor {\n        override fun preSend(message: Message&lt;*&gt;, channel: MessageChannel): Message&lt;*&gt; {\n            LOGGER.debug(\"Message broker sending message on Thread \" + Thread.currentThread().id);\n            return message\n        }\n\n        override fun postSend(message: Message&lt;*&gt;, channel: MessageChannel, sent: Boolean) {\n            LOGGER.debug(\"Message broker sent message on Thread \" + Thread.currentThread().id);\n        }\n    }\n    registration.interceptors(channelInterceptor)\n}\n</code></pre>\n"}], "owner": {"reputation": 356, "user_id": 3376370, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/952ed47e8d996266dcad26d108f4219e?s=128&d=identicon&r=PG&f=1", "display_name": "edr", "link": "https://stackoverflow.com/users/3376370/edr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 931, "favorite_count": 0, "accepted_answer_id": 54091458, "answer_count": 1, "score": 1, "last_activity_date": 1548388223, "creation_date": 1546947340, "last_edit_date": 1548388223, "question_id": 54090998, "link": "https://stackoverflow.com/questions/54090998/how-to-send-messages-in-spring-boot-via-websocket-broker-in-the-order-they-were", "title": "How to send Messages in spring boot via websocket broker in the order they were submitted?", "body": "<p>I want to configure a spring boot websocket message broker such that it dispatches messages in the order they were submitted.</p>\n\n<p>Based on <a href=\"https://stackoverflow.com/questions/29689838/sockjs-receive-stomp-messages-from-spring-websocket-out-of-order\">answers to similar questions</a>, I have tried to set the pool size of the dispatching task executors to 1, but I still get messages dispatched in the wrong order.</p>\n\n<p>For debugging purposes I have added pre- and post-send channel interceptors which log the threads on which the messages are being dispatched and I can see that the Thread IDs vary.</p>\n\n<p>What I am I doing wrong?</p>\n\n<p>Code (Kotlin):</p>\n\n<p>Websocket configuration:</p>\n\n<pre><code>package foo.bar\n\nimport org.slf4j.LoggerFactory\nimport org.springframework.context.annotation.Configuration\nimport org.springframework.messaging.Message\nimport org.springframework.messaging.MessageChannel\nimport org.springframework.messaging.simp.config.ChannelRegistration\nimport org.springframework.messaging.simp.config.MessageBrokerRegistry\nimport org.springframework.messaging.support.ChannelInterceptor\nimport org.springframework.web.socket.config.annotation.EnableWebSocketMessageBroker\nimport org.springframework.web.socket.config.annotation.StompEndpointRegistry\nimport org.springframework.web.socket.config.annotation.WebSocketMessageBrokerConfigurer\n\n@Configuration\n@EnableWebSocketMessageBroker\nclass WebSocketConfig : WebSocketMessageBrokerConfigurer{\n    companion object {\n        private val LOGGER = LoggerFactory.getLogger(WebSocketConfig::class.java)\n    }\n    override fun configureMessageBroker(config: MessageBrokerRegistry) {\n        config.enableSimpleBroker(\"/topic\")\n        config.setApplicationDestinationPrefixes(\"/app\");\n        config.configureBrokerChannel().taskExecutor().corePoolSize(1)\n        config.configureBrokerChannel().taskExecutor().maxPoolSize(1)\n        val channelInterceptor: ChannelInterceptor = object: ChannelInterceptor {\n            override fun preSend(message: Message&lt;*&gt;, channel: MessageChannel): Message&lt;*&gt; {\n                LOGGER.debug(\"Message broker sending message on Thread \" + Thread.currentThread().id);\n                return message\n            }\n\n            override fun postSend(message: Message&lt;*&gt;, channel: MessageChannel, sent: Boolean) {\n                LOGGER.debug(\"Message broker sent message on Thread \" + Thread.currentThread().id);\n            }\n        }\n        config.configureBrokerChannel().interceptors(channelInterceptor)\n    }\n\n    override fun registerStompEndpoints(registry: StompEndpointRegistry) {\n        registry.addEndpoint(\"/ws\")\n                .withSockJS()\n    }\n\n    override fun configureClientOutboundChannel(registration: ChannelRegistration) {\n        registration.taskExecutor().corePoolSize(1)\n        registration.taskExecutor().maxPoolSize(1)\n    }\n\n    override fun configureClientInboundChannel(registration: ChannelRegistration) {\n        registration.taskExecutor().corePoolSize(1)\n        registration.taskExecutor().maxPoolSize(1)\n    }\n}\n</code></pre>\n\n<p>(Stripped) code for sending the message:</p>\n\n<pre><code>@Controller\nclass StateController\n\n@Autowired constructor(\n    private val template: SimpMessagingTemplate\n) {\n\n....\n\n    fun publishMsg(topicId: String, msg: MyMessageType){\n        template.convertAndSend(\"/topic/msg/\"+topicId, msg)\n    }\n}\n</code></pre>\n\n<p>Here is some examplary logging. As you can see, the executor is using more than one <code>Thread</code>, or rather, there seems to be more than one executor. Also, the Thread IDs are jumping back and forth, which to me looks like a clear confirmation that the dispatch execution is not as single-threaded as I would expect.\nLogging:</p>\n\n<pre><code>09:48:12.257 DEBUG [ault-executor-4] channelInterceptor$1.preSend             :  32  Message broker sending message on Thread 60\n09:48:12.257 DEBUG [ault-executor-0] channelInterceptor$1.preSend             :  32  Message broker sending message on Thread 47\n09:48:12.257 DEBUG [ault-executor-0] channelInterceptor$1.postSend            :  38  Message broker sent message on Thread 47\n09:48:12.257 DEBUG [ault-executor-4] channelInterceptor$1.postSend            :  38  Message broker sent message on Thread 60\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "edited": false, "score": 0, "creation_date": 1547677409, "post_id": 54090964, "comment_id": 95278584, "body": "Do the answer solve your problem? :)"}], "answers": [{"tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": false, "score": 0, "last_activity_date": 1546948990, "creation_date": 1546948990, "answer_id": 54091445, "question_id": 54090964, "link": "https://stackoverflow.com/questions/54090964/understanding-generic-parameters-in-an-abstract-class/54091445#54091445", "title": "Understanding generic parameters in an abstract class", "body": "<p>As you already referenced, this class has two generic types: <code>T</code> and <code>WH</code>. The latter does specify an <a href=\"https://kotlinlang.org/docs/reference/generics.html#upper-bounds\" rel=\"nofollow noreferrer\">upper bound</a> <code>SomeViewHolder</code> which will only allow sub types of that upper bound to be used as the generic type <code>WH</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "is_accepted": false, "score": 0, "last_activity_date": 1546969259, "creation_date": 1546969259, "answer_id": 54097011, "question_id": 54090964, "link": "https://stackoverflow.com/questions/54090964/understanding-generic-parameters-in-an-abstract-class/54097011#54097011", "title": "Understanding generic parameters in an abstract class", "body": "<p>Since your title goes: </p>\n\n<blockquote>\n  <p>Understanding generic parameters in an abstract class</p>\n</blockquote>\n\n<p>the question at hand is: Would it be different (regarding the generic types) if <code>SomeAdapter</code> would not be abstract. The answer is: No.</p>\n\n<p>In this particular example <code>T</code> can be <code>Any?</code> and <code>WH</code> can be any subclass of <code>SomeAdapter</code> or <code>SomeAdapter</code> itself (if <code>SomeAdapter</code> is not abstract).</p>\n\n<p>The types of <code>T</code> and <code>WH</code> are fixed at compile time (see <a href=\"https://kotlinlang.org/docs/reference/generics.html#type-erasure\" rel=\"nofollow noreferrer\">Type erasure</a>).</p>\n\n<p>So, you have to see generics like a variable for a type.</p>\n"}], "owner": {"reputation": 19894, "user_id": 753632, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e1eaa448ca773169f1296987a87cb67?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidDev", "link": "https://stackoverflow.com/users/753632/androiddev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1546969259, "creation_date": 1546947206, "question_id": 54090964, "link": "https://stackoverflow.com/questions/54090964/understanding-generic-parameters-in-an-abstract-class", "title": "Understanding generic parameters in an abstract class", "body": "<p>In the Kotlin docs, they show how to include type parameters:</p>\n\n<pre><code>class Box&lt;T&gt;(t: T) {\n    var value = t\n}\n</code></pre>\n\n<p>This is a simple example. But I've come across one that looks like this:</p>\n\n<pre><code>abstract class SomeAdapter&lt;T, WH: SomeViewHolder&gt;(private val viewModel: SomeModel&lt;T&gt;?) {\n\n}\n</code></pre>\n\n<p>How do I interpret this? Do I interpret this as:</p>\n\n<blockquote>\n  <p>SomeAdapter takes two parameters when it's instantiated - a T and a WH. And the constructor takes a viewModel.</p>\n</blockquote>\n"}, {"tags": ["android", "kotlin", "dagger-2", "kotlin-extension"], "comments": [{"owner": {"reputation": 8306, "user_id": 10271334, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2ijZhRVumwM/AAAAAAAAAAI/AAAAAAAACes/Tjw_JgqObGI/photo.jpg?sz=128", "display_name": "Jeel Vankhede", "link": "https://stackoverflow.com/users/10271334/jeel-vankhede"}, "edited": false, "score": 0, "creation_date": 1546948202, "post_id": 54090613, "comment_id": 95014551, "body": "You can take your <code>restService</code> object at <b>Application class</b> and use for your extensions from there statically."}, {"owner": {"reputation": 5421, "user_id": 7972699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bED4H.jpg?s=128&g=1", "display_name": "Anmol", "link": "https://stackoverflow.com/users/7972699/anmol"}, "edited": false, "score": 0, "creation_date": 1546949538, "post_id": 54090613, "comment_id": 95015213, "body": "u can send your restService also as an argument for <code>fun Timber.serverLogDebug(log: String,restService:RestService)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 410, "user_id": 5132200, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hFdHBn-PeJE/AAAAAAAAAAI/AAAAAAAABx0/DMeo7WYu3Nw/photo.jpg?sz=128", "display_name": "Janos Breuer", "link": "https://stackoverflow.com/users/5132200/janos-breuer"}, "is_accepted": true, "score": 0, "last_activity_date": 1546966051, "creation_date": 1546966051, "answer_id": 54096215, "question_id": 54090613, "link": "https://stackoverflow.com/questions/54090613/kotlin-extension-function-with-request-to-rest-server/54096215#54096215", "title": "Kotlin extension function with request to rest server", "body": "<p>In the file where you define the extension function, also define a \"singleton\" <code>object</code> to hold your <code>restService</code> instance, create a setter for it, and reference it from the logger function.</p>\n\n<pre><code>private object ServiceHolder {\n    var restService: RestService\n}\n\nfun Timber.setRestService(restService: RestService) {\n    ServiceHolder.restService = restService\n}\n\nfun Timber.serverLogDebug(log: String) {\n    ServiceHolder.restService.log(log)\n}\n</code></pre>\n\n<p>Now you can \"statically inject\" your service instance by calling <code>Timber.setRestService</code> where you plant your Timber <code>DebugTree</code>.</p>\n\n<p>Note: If you want to log to the server every time you log (or every time you log an event of a specific level), you might be better off creating a custom <code>Timber.Tree</code>.</p>\n"}], "owner": {"reputation": 344, "user_id": 3001276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04c35809665cdab906db03256460bbe5?s=128&d=identicon&r=PG&f=1", "display_name": "user3001276", "link": "https://stackoverflow.com/users/3001276/user3001276"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 54096215, "answer_count": 1, "score": 1, "last_activity_date": 1546966051, "creation_date": 1546946043, "question_id": 54090613, "link": "https://stackoverflow.com/questions/54090613/kotlin-extension-function-with-request-to-rest-server", "title": "Kotlin extension function with request to rest server", "body": "<p>I'm setting up extension function for Timber. I want to have kind of function to send log to my server. </p>\n\n<p>The problem for me is Dagger. I have instance of RestService class in dagger and I'm using it in my whole app. \nBut to use it I need inject somewhere this RestService. I can't do it in constructor because I haven't it.</p>\n\n<p>I want to have something like this:</p>\n\n<pre><code>fun Timber.serverLogDebug(log: String) {\n    restService.log(log)\n}\n</code></pre>\n\n<p>Is it probably at all? It will be convenience for me to use my mechanism like simple Timber.d().\nAlternatively I can call </p>\n\n<pre><code>restService.log(log)\n</code></pre>\n\n<p>in every place. But I have to have this instance everywhere.</p>\n"}, {"tags": ["unit-testing", "model-view-controller", "kotlin", "tornadofx"], "answers": [{"tags": [], "owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "is_accepted": true, "score": 1, "last_activity_date": 1546950224, "creation_date": 1546950224, "answer_id": 54091755, "question_id": 54090073, "link": "https://stackoverflow.com/questions/54090073/how-to-test-tornadofx-function-that-creates-a-new-view/54091755#54091755", "title": "How to test TornadoFX function that creates a new view?", "body": "<p>You need to initialize the JavaFX Toolkit. If you're using TestFX you can make a call to <code>FxToolkit.registerPrimaryStage()</code>, if not you can instantiate a <code>JFXPanel</code> to achieve the same goal.</p>\n"}, {"tags": [], "owner": {"reputation": 29, "user_id": 1429711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21b297ed5b02d1548e9bdff971af18b8?s=128&d=identicon&r=PG", "display_name": "GeePawHill", "link": "https://stackoverflow.com/users/1429711/geepawhill"}, "is_accepted": false, "score": 2, "last_activity_date": 1566144721, "creation_date": 1566144721, "answer_id": 57546295, "question_id": 54090073, "link": "https://stackoverflow.com/questions/54090073/how-to-test-tornadofx-function-that-creates-a-new-view/57546295#57546295", "title": "How to test TornadoFX function that creates a new view?", "body": "<p>In general: you don't want to test UI views. Hold tight, I'm still going to tell you how. I just want you to know it's a rare case that can be indicating design problems.</p>\n\n<p>Without TestFx such tests are quite difficult to write. With TestFx they're easier, but still both very slow and very fragile, and you'll have to take extra steps in any of the standard CI environments to allow them to run on the build boxes, which are normally not equipped to run JavaFx and not equipped with virtual displays.</p>\n\n<p>The biggest problem you (and TestFx) encounter is with getting your threads right inside the test. The tests are on one thread. The visual parts of JavaFx are on another. Your own application and JavaFx itself frequently pour their tasks into Platform.RunLater(), and if you don't account for the emptying of that queue, you'll get results that are either uniformly wrong or, worse, flicker-y. Sleeps work in some cases, but a) are sleeps and slow you down, and b) won't work as well when you run on a slower box, like a low-configured windows box in the cloud.</p>\n\n<p>Back to your general question: It likely means that your intra-View connections are complex, where UI component X depends on UI component Y. Broadly, you want UI component X to depend on properties in the Model, and you want UI component Y to depend on properties in the Model, and you want the Model handling the complex interactions between properties. TornadoFx has direct support for this, and Model classes don't need the UI running to be tested. For some cases, the Controller is the place to put that interconnected logic, but that's relatively rare. Most of what I do just doesn't call for that, but it does call for Model classes. The key insight that (Model != Domain) is well-supported in TornadoFx's ViewModel and ItemViewModel classes.</p>\n\n<p>Having said all that, if you need robot-control over the view, the way to do it is to use TestFx. If you don't, this is agreeing with and elaborating on Edvin's answer, is to have something like this:</p>\n\n<pre><code>   class UiTest {\n\n    companion object {\n        private var javaFxRunning: Boolean = false\n\n        fun start() {\n            StartWith.isUi = true\n            Errors.reallyShow = false\n            try {\n                runJavaFx()\n            } catch (e: InterruptedException) {\n                throw RuntimeException(e)\n            }\n        }\n\n        @Throws(InterruptedException::class)\n        private fun runJavaFx() {\n            if (javaFxRunning) return\n            val latch = CountDownLatch(1)\n            SwingUtilities.invokeLater {\n                JFXPanel()\n                latch.countDown()\n            }\n\n            latch.await()\n            javaFxRunning = true\n        }\n    }\n}\n\n</code></pre>\n\n<p>In the @BeforeEach or even in individual @Tests, call UiTest.start(), which will only start the javafx one time no matter how many tests need it running.</p>\n\n<p>My actual experience: the JavaFx Component &lt;-> property relationship \"just works\". That is, I gain very little from testing it, as it's not my code, and it works \"every time\". What <em>is</em> my code and <em>doesn't</em> work every time is the relationship between the properties. That's why I use ViewModel, put the interactions between properties there, and test them rigorously with microtests, which doesn't require the JavaFx thread to be running. (JavaFx properties use no multi-threading in their callbacks, so addListener targets are called synchronously.) This is particularly handy when you need to be clever with your bindings. Inlining complex JavaFx bindings inside the TornadoFx view builder is a mug's game. Extracting them to the model is dead-easy.</p>\n\n<p>I learned all this by trial and error. There is a third approach, described in this stack overflow, that can be made to work. It amounts to making 100% of your tests run in the JavaFx thread. I found it difficult, because most of my work isn't on that thread <em>in production</em>. <a href=\"https://stackoverflow.com/questions/18429422/basic-junit-test-for-javafx-8\">Basic JUnit test for JavaFX 8</a></p>\n\n<p>Good luck, and reach out if you need more help!\nGeePawHill</p>\n\n<p>P.S. Shouts out to Edvin: Great work on TornadoFx. I use it every day.</p>\n"}], "owner": {"reputation": 607, "user_id": 10832136, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rBzXQ.jpg?s=128&g=1", "display_name": "Kars", "link": "https://stackoverflow.com/users/10832136/kars"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 314, "favorite_count": 0, "accepted_answer_id": 54091755, "answer_count": 2, "score": 0, "last_activity_date": 1566144721, "creation_date": 1546944153, "question_id": 54090073, "link": "https://stackoverflow.com/questions/54090073/how-to-test-tornadofx-function-that-creates-a-new-view", "title": "How to test TornadoFX function that creates a new view?", "body": "<p>I want to test a function in which a new View is created within TornadoFX. When i call the function however, i get this error.</p>\n\n<pre><code>java.lang.ExceptionInInitializerError\n    at tornadofx.ControlsKt.button(Controls.kt:190)\n    at tornadofx.ControlsKt.button$default(Controls.kt:190)\n    at view.PeopleMenuView$setupTopBox$1$1.invoke(PeopleMenuView.kt:33)\n    at view.PeopleMenuView$setupTopBox$1$1.invoke(PeopleMenuView.kt:8)\n    at tornadofx.LayoutsKt.vbox(Layouts.kt:388)\n    at tornadofx.LayoutsKt.vbox$default(Layouts.kt:103)\n    at view.PeopleMenuView$setupTopBox$1.invoke(PeopleMenuView.kt:31)\n    at view.PeopleMenuView$setupTopBox$1.invoke(PeopleMenuView.kt:8)\n    at tornadofx.LayoutsKt.hbox(Layouts.kt:384)\n    at tornadofx.LayoutsKt.hbox$default(Layouts.kt:96)\n    at view.PeopleMenuView.setupTopBox(PeopleMenuView.kt:29)\n    at view.PeopleMenuView.&lt;init&gt;(PeopleMenuView.kt:15)\n    at presenter.MainMenuPresenter.managePeoplePressed(MainMenuPresenter.kt:11)\n    at presenter.TestMainMenuPresenter.testManagePeoplePressed(TestMainMenuPresenter.kt:16)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\n    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\n    at org.junit.runner.JUnitCore.run(JUnitCore.java:137)\n    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)\n    at com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)\n    at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)\n    at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\nCaused by: java.lang.IllegalStateException: Toolkit not initialized\n    at com.sun.javafx.application.PlatformImpl.runLater(PlatformImpl.java:273)\n    at com.sun.javafx.application.PlatformImpl.runLater(PlatformImpl.java:268)\n    at com.sun.javafx.application.PlatformImpl.setPlatformUserAgentStylesheet(PlatformImpl.java:550)\n    at com.sun.javafx.application.PlatformImpl.setDefaultPlatformUserAgentStylesheet(PlatformImpl.java:512)\n    at javafx.scene.control.Control.&lt;clinit&gt;(Control.java:87)\n    ... 36 more\n</code></pre>\n\n<p>It is because a new instance of a view is created in the function. The simplified code looks like this:</p>\n\n<pre><code>fun managePeoplePressed() {\n        view.replaceWith(PeopleMenuView())\n    }\n</code></pre>\n\n<p>When i call the method from a test, i get the error. I googled around but there's not much to find about this.</p>\n\n<p>I want to be able to test methods that create a view. Thank you.</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 16268, "user_id": 603270, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cbfe6e57e0fa59928be4898a7be08c5d?s=128&d=identicon&r=PG", "display_name": "shkschneider", "link": "https://stackoverflow.com/users/603270/shkschneider"}, "edited": false, "score": 0, "creation_date": 1546944567, "post_id": 54089781, "comment_id": 95012586, "body": "Could you post the relevant AndroidManifest code?"}, {"owner": {"reputation": 133, "user_id": 5856146, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oQz7urYhy2I/AAAAAAAAAAI/AAAAAAAAAJk/C7_xe-hX9FU/photo.jpg?sz=128", "display_name": "Kaveri", "link": "https://stackoverflow.com/users/5856146/kaveri"}, "reply_to_user": {"reputation": 16268, "user_id": 603270, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cbfe6e57e0fa59928be4898a7be08c5d?s=128&d=identicon&r=PG", "display_name": "shkschneider", "link": "https://stackoverflow.com/users/603270/shkschneider"}, "edited": false, "score": 0, "creation_date": 1546944929, "post_id": 54089781, "comment_id": 95012796, "body": "@shkschneider yes i added the manifest file contents above"}, {"owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "edited": false, "score": 0, "creation_date": 1546945863, "post_id": 54089781, "comment_id": 95013332, "body": "Have you checked for <code>context.packageName</code> having the correct string?"}, {"owner": {"reputation": 133, "user_id": 5856146, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oQz7urYhy2I/AAAAAAAAAAI/AAAAAAAAAJk/C7_xe-hX9FU/photo.jpg?sz=128", "display_name": "Kaveri", "link": "https://stackoverflow.com/users/5856146/kaveri"}, "reply_to_user": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "edited": false, "score": 0, "creation_date": 1546946416, "post_id": 54089781, "comment_id": 95013617, "body": "@tynn yes. package name is proper as expected."}, {"owner": {"reputation": 363, "user_id": 8385521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NLWTq.png?s=128&g=1", "display_name": "Pratik18", "link": "https://stackoverflow.com/users/8385521/pratik18"}, "edited": false, "score": 0, "creation_date": 1546947280, "post_id": 54089781, "comment_id": 95014112, "body": "try, remove android:resource and get value"}, {"owner": {"reputation": 133, "user_id": 5856146, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oQz7urYhy2I/AAAAAAAAAAI/AAAAAAAAAJk/C7_xe-hX9FU/photo.jpg?sz=128", "display_name": "Kaveri", "link": "https://stackoverflow.com/users/5856146/kaveri"}, "reply_to_user": {"reputation": 363, "user_id": 8385521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NLWTq.png?s=128&g=1", "display_name": "Pratik18", "link": "https://stackoverflow.com/users/8385521/pratik18"}, "edited": false, "score": 0, "creation_date": 1546949086, "post_id": 54089781, "comment_id": 95014983, "body": "@Pratik18 yes previously i had not included the resource attribute. yet the same issue was produced. I tried adding resources attribute to see if there is any change with the metadata, But no. The attributes of metadata are null with or without resource attribute"}], "answers": [{"tags": [], "owner": {"reputation": 363, "user_id": 8385521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NLWTq.png?s=128&g=1", "display_name": "Pratik18", "link": "https://stackoverflow.com/users/8385521/pratik18"}, "is_accepted": false, "score": 0, "last_activity_date": 1547009726, "creation_date": 1547009726, "answer_id": 54103465, "question_id": 54089781, "link": "https://stackoverflow.com/questions/54089781/unable-to-read-the-metadata-of-androidmanifest-xml-in-unit-test-cases/54103465#54103465", "title": "Unable to read the metadata of AndroidManifest.xml in unit test cases", "body": "<p>Try this code,</p>\n\n<pre><code>val  context = applicationContext\nval ai = context!!.packageManager.getApplicationInfo( context.packageName, PackageManager.GET_META_DATA)\nval metadata = ai.metaData!!\nval res = metadata.get( context.getString(R.string.enable_transmission))\nval aM = metadata.get(context.getString(R.string.enable_transmission))\n</code></pre>\n\n<p>In manifest meta-data tag only using android:value not using android:resource than object direct convert in particular format.</p>\n"}], "owner": {"reputation": 133, "user_id": 5856146, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oQz7urYhy2I/AAAAAAAAAAI/AAAAAAAAAJk/C7_xe-hX9FU/photo.jpg?sz=128", "display_name": "Kaveri", "link": "https://stackoverflow.com/users/5856146/kaveri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 122, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1547009726, "creation_date": 1546943108, "last_edit_date": 1546944861, "question_id": 54089781, "link": "https://stackoverflow.com/questions/54089781/unable-to-read-the-metadata-of-androidmanifest-xml-in-unit-test-cases", "title": "Unable to read the metadata of AndroidManifest.xml in unit test cases", "body": "<p>I am writing local unit testcases for my android application.\nIn one of the test cases, i need to read the contents of metadata defined in the AndroidManifest.xml</p>\n\n<p>I can easily read the data by calling these methods - metadata.getString() / metadata.getBoolean()\nwhile running the application</p>\n\n<p>I Cannot access the same in unit testing.\nthe values of the all the keys defined in maifest appears to be null here.</p>\n\n<p>In the below code, object <strong>ai is created properly, \nres is null,\naM is null,</strong></p>\n\n<p><strong>metadata is not null and it has the values for hub_url, enable_transmission and authentication as defined in manifest file.</strong></p>\n\n<p><strong>Its strange that when i try to access contents of metadata in variable a, b and c, all are null</strong></p>\n\n<pre><code>    val context = ApplicationProvider.getApplicationContext&lt;Context&gt;()\n    val ai = context!!.packageManager.getApplicationInfo( context.packageName, PackageManager.GET_META_DATA)\n    val res = ai.metaData.getBoolean( context.getString(R.string.enable_transmission))\n\n    val aM = ai.metaData.get( context.getString(R.string.enable_transmission))\n    val metadata = ai.metaData!!;\n\n    val a = metadata.getString(context.getString(R.string.hub_url))\n    val b = metadata.get(context.getString(R.string.enable_transmission));\n    val c = metadata.get(context.getString(R.string.authentication));\n</code></pre>\n\n<p>Here is the manifest file content</p>\n\n<pre><code> &lt;application&gt;\n\n    &lt;meta-data\n        android:resource=\"@string/basic\"\n        android:name=\"@string/authentication\"\n        android:value=\"@string/basic\" /&gt;\n\n    &lt;meta-data\n        android:resource=\"@string/hub_url\"\n        android:name=\"@string/hub_url\"\n        android:value=\"@string/hub_url\" /&gt;\n\n    &lt;meta-data\n        android:resource=\"@bool/enable\"\n        android:name=\"@string/enable_transmission\"\n        android:value=\"@bool/enable\" /&gt;\n\n\n&lt;/application&gt;\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-room", "data-class"], "comments": [{"owner": {"reputation": 1747, "user_id": 2519748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16f0e75028dd2c2008b54dc0e011f32e?s=128&d=identicon&r=PG", "display_name": "Rajarshi", "link": "https://stackoverflow.com/users/2519748/rajarshi"}, "edited": false, "score": 0, "creation_date": 1547027522, "post_id": 54089601, "comment_id": 95046757, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/44485631/room-persistence-errorentities-and-pojos-must-have-a-usable-public-constructor\">Room Persistence: Error:Entities and Pojos must have a usable public constructor</a> Use an empty constructor. See the answer here: <a href=\"https://stackoverflow.com/a/54107314/2519748\">stackoverflow.com/a/54107314/2519748</a>"}, {"owner": {"reputation": 1747, "user_id": 2519748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16f0e75028dd2c2008b54dc0e011f32e?s=128&d=identicon&r=PG", "display_name": "Rajarshi", "link": "https://stackoverflow.com/users/2519748/rajarshi"}, "edited": false, "score": 0, "creation_date": 1547027663, "post_id": 54089601, "comment_id": 95046851, "body": "Use an empty constructor. See the answer here: <a href=\"https://stackoverflow.com/a/54107314/2519748\">stackoverflow.com/a/54107314/2519748</a>"}], "answers": [{"tags": [], "owner": {"reputation": 28, "user_id": 9080527, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hO2j5.jpg?s=128&g=1", "display_name": "Nursultan Almakhanov", "link": "https://stackoverflow.com/users/9080527/nursultan-almakhanov"}, "is_accepted": false, "score": 0, "last_activity_date": 1546943821, "creation_date": 1546943821, "answer_id": 54089980, "question_id": 54089601, "link": "https://stackoverflow.com/questions/54089601/how-to-ignore-a-filed-of-entity-with-room/54089980#54089980", "title": "How to ignore a filed of Entity with Room", "body": "<p>Sometimes new field create an error when class implements Parcelable, so try to remove Parcelable and body of class, put Parcelable and implement members again or just implement Serializable interface instead of Parcelable.</p>\n"}, {"comments": [{"owner": {"reputation": 1972, "user_id": 7098269, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/SPI6D.jpg?s=128&g=1", "display_name": "Ehsan", "link": "https://stackoverflow.com/users/7098269/ehsan"}, "edited": false, "score": 0, "creation_date": 1546945681, "post_id": 54090301, "comment_id": 95013222, "body": "the problem is not <code>videos</code>, When I try to add <code>@Ignore  @SerializedName(&quot;images&quot;) var images: List&lt;String&gt;?</code> I will get the error"}, {"owner": {"reputation": 16268, "user_id": 603270, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cbfe6e57e0fa59928be4898a7be08c5d?s=128&d=identicon&r=PG", "display_name": "shkschneider", "link": "https://stackoverflow.com/users/603270/shkschneider"}, "reply_to_user": {"reputation": 1972, "user_id": 7098269, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/SPI6D.jpg?s=128&g=1", "display_name": "Ehsan", "link": "https://stackoverflow.com/users/7098269/ehsan"}, "edited": false, "score": 0, "creation_date": 1546945919, "post_id": 54090301, "comment_id": 95013359, "body": "Then please edit your question&#39;s code as it&#39;s invalid as of now. And i&#39;ll drop my non-answer ^^"}], "tags": [], "owner": {"reputation": 16268, "user_id": 603270, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cbfe6e57e0fa59928be4898a7be08c5d?s=128&d=identicon&r=PG", "display_name": "shkschneider", "link": "https://stackoverflow.com/users/603270/shkschneider"}, "is_accepted": false, "score": 0, "last_activity_date": 1546944989, "creation_date": 1546944989, "answer_id": 54090301, "question_id": 54089601, "link": "https://stackoverflow.com/questions/54089601/how-to-ignore-a-filed-of-entity-with-room/54090301#54090301", "title": "How to ignore a filed of Entity with Room", "body": "<p>The provided <code>Taplight</code> has errors:</p>\n\n<pre><code>@PrimaryKey(autoGenerate = true) var id: Long,\n@SerializedName(\"title\") var title: String?,\n@SerializedName(\"type\") var type: Int?,\n@SerializedName(\"os\") var os: Int?,\n@SerializedName(\"logo\") var logo: String?,\n@SerializedName(\"template\") var template: String?,\n@SerializedName(\"action\") var action: String?,\n@SerializedName(\"date\") var date: String?,\n@Embedded\n@SerializedName(\"videos\") var videos: Videos?) {\n\nconstructor() : this(0,null,null,null,null,null,null,null,null)\n</code></pre>\n\n<p><code>videos</code> seems like the last argument and the constructor was badly called. I don't know if that was a copy-paste or formatting error, but hope it could help.</p>\n"}, {"tags": [], "owner": {"reputation": 529, "user_id": 9316168, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HUaOF.jpg?s=128&g=1", "display_name": "gmk57", "link": "https://stackoverflow.com/users/9316168/gmk57"}, "is_accepted": false, "score": 5, "last_activity_date": 1590412516, "creation_date": 1590412516, "answer_id": 62003187, "question_id": 54089601, "link": "https://stackoverflow.com/questions/54089601/how-to-ignore-a-filed-of-entity-with-room/62003187#62003187", "title": "How to ignore a filed of Entity with Room", "body": "<p><code>@Ignore</code> in Kotlin classes <a href=\"https://issuetracker.google.com/issues/70762008\" rel=\"noreferrer\">requires</a> default parameter value and <code>@JvmOverloads</code> annotation:</p>\n\n<pre><code>data class Tapligh  @JvmOverloads constructor(\n    ...\n\n    @Ignore\n    @SerializedName(\"images\") var images: List&lt;String&gt;? = null\n)\n</code></pre>\n"}], "owner": {"reputation": 1972, "user_id": 7098269, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/SPI6D.jpg?s=128&g=1", "display_name": "Ehsan", "link": "https://stackoverflow.com/users/7098269/ehsan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1966, "favorite_count": 0, "answer_count": 3, "score": 6, "last_activity_date": 1590412516, "creation_date": 1546942551, "last_edit_date": 1546946266, "question_id": 54089601, "link": "https://stackoverflow.com/questions/54089601/how-to-ignore-a-filed-of-entity-with-room", "title": "How to ignore a filed of Entity with Room", "body": "<p>I have a data class that I created an <code>Entity</code> from that for my database.</p>\n\n<p>this is my data class:</p>\n\n<pre><code>@Entity\n@Parcelize\ndata class Tapligh(\n\n    @PrimaryKey(autoGenerate = true)\n    var id: Long,\n\n    @SerializedName(\"title\") var title: String?,\n    @SerializedName(\"type\") var type: Int?,\n    @SerializedName(\"os\") var os: Int?,\n    @SerializedName(\"logo\") var logo: String?,\n    @SerializedName(\"template\") var template: String?,\n    @SerializedName(\"action\") var action: String?,\n    @SerializedName(\"date\") var date: String?,\n    @Embedded\n    @SerializedName(\"videos\") var videos: Videos?,\n\n) : Parcelable {\n\n    fun getTaplighType(): Int {\n\n        return when (this.type) {\n\n            0 -&gt; TaplighType.IMAGE.type\n            1 -&gt; TaplighType.VIDEO.type\n            else -&gt; TaplighType.NATIVE.type\n        }\n    }\n}\n\n@Parcelize\ndata class Videos(\n\n    @SerializedName(\"land\") var land: String?,\n    @SerializedName(\"port\") var port: String?\n) : Parcelable\n</code></pre>\n\n<p>Now by adding below field into my <code>Tapligh</code> data class, I will get an error: </p>\n\n<pre><code> @Ignore\n @SerializedName(\"images\") var images: List&lt;String&gt;?\n</code></pre>\n\n<p>I am getting this error:</p>\n\n<pre><code>error: Entities and Pojos must have a usable public constructor. You can have an empty constructor or a constructor whose parameters match the fields (by name and type).\npublic final class Tapligh implements android.os.Parcelable {\n             ^\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1546942444, "post_id": 54089482, "comment_id": 95011411, "body": "the Section constructor has 3 params, and the GUIDE() call passes 3 params of matching types, that should ring a bell. The same syntax is used in the 2nd example of the docs you link to, it&#39;s just a slighlty simplified version"}, {"owner": {"reputation": 19894, "user_id": 753632, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e1eaa448ca773169f1296987a87cb67?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidDev", "link": "https://stackoverflow.com/users/753632/androiddev"}, "reply_to_user": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1546943516, "post_id": 54089482, "comment_id": 95012044, "body": "So is this considered an anonymous class?"}, {"owner": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1546944240, "post_id": 54089482, "comment_id": 95012432, "body": "no, I&#39;m not sure how you came to that conclusion"}, {"owner": {"reputation": 7017, "user_id": 816416, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cea2d43b65bd3fbc1a0991c30ace34f6?s=128&d=identicon&r=PG", "display_name": "Vishnu Haridas", "link": "https://stackoverflow.com/users/816416/vishnu-haridas"}, "edited": false, "score": 0, "creation_date": 1546975917, "post_id": 54089482, "comment_id": 95029791, "body": "<b>And this is possible in Java too</b>. An example here -  <a href=\"https://stackoverflow.com/a/8811869/816416\">stackoverflow.com/a/8811869/816416</a>"}], "answers": [{"comments": [{"owner": {"reputation": 19894, "user_id": 753632, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e1eaa448ca773169f1296987a87cb67?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidDev", "link": "https://stackoverflow.com/users/753632/androiddev"}, "edited": false, "score": 0, "creation_date": 1546944014, "post_id": 54089775, "comment_id": 95012331, "body": "&quot;GUIDE is an instance of Section class&quot; is the most important take-away. That isn&#39;t exactly how the docs word it. So your explanation is better. Thanks."}], "tags": [], "owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "is_accepted": true, "score": 1, "last_activity_date": 1546943094, "creation_date": 1546943094, "answer_id": 54089775, "question_id": 54089482, "link": "https://stackoverflow.com/questions/54089482/understanding-the-syntax-of-this-enum-statement/54089775#54089775", "title": "Understanding the syntax of this enum statement", "body": "<p>From <a href=\"https://kotlinlang.org/docs/reference/enum-classes.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/enum-classes.html</a>:<br/></p>\n\n<blockquote>\n  <p>Each enum constant is an object</p>\n</blockquote>\n\n<p>so <code>GUIDE</code> is an instance of <code>Section</code> class, meaning an object initialized as</p>\n\n<pre><code>GUIDE(0, R.string.main_pager_guide, QotGuideFragment())\n</code></pre>\n\n<p>You can get the values that initialized <code>GUIDE</code>, like this:</p>\n\n<pre><code>val guidePosition = Section.GUIDE.position\nval guideTextKey = Section.GUIDE.textKey\nval guideFragment = Section.GUIDE.fragment\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3419, "user_id": 2401265, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/16369b0c7c1f0fff22ff47be0a22289a?s=128&d=identicon&r=PG", "display_name": "gmetax", "link": "https://stackoverflow.com/users/2401265/gmetax"}, "is_accepted": false, "score": 0, "last_activity_date": 1546943434, "creation_date": 1546943434, "answer_id": 54089878, "question_id": 54089482, "link": "https://stackoverflow.com/questions/54089482/understanding-the-syntax-of-this-enum-statement/54089878#54089878", "title": "Understanding the syntax of this enum statement", "body": "<p>usually your enums will be like that</p>\n\n<pre><code>enum class Section() {\n    GUIDE,\n    LEARN,\n    ME,\n    PREPARE\n}\n</code></pre>\n\n<p>without any parameters</p>\n\n<p>but in your example the base constructor of the enum has parameters that are set as properties also</p>\n\n<pre><code>enum class Section(**val** position: Int, **val** textKey: Int, **val** fragment: Fragment) \n</code></pre>\n\n<p>with the keyword val in the constructor you set as property of the class</p>\n\n<p>then it has </p>\n\n<pre><code>GUIDE(0, R.string.main_pager_guide, QotGuideFragment()),\nLEARN(1, R.string.main_pager_learn, QotLearnFragment()),\nME(2, R.string.main_pager_me, QotToBeVisionFragment()),\nPREPARE(3, R.string.main_pager_prepare, QotPrepareFragment())\n</code></pre>\n\n<p>so for <code>GUIDE</code> 0 -> position, R.string.main_pager_guide -> textKey and QotGuideFragment -> fragment</p>\n"}], "owner": {"reputation": 19894, "user_id": 753632, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e1eaa448ca773169f1296987a87cb67?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidDev", "link": "https://stackoverflow.com/users/753632/androiddev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 54089775, "answer_count": 2, "score": 0, "last_activity_date": 1546943434, "creation_date": 1546942178, "question_id": 54089482, "link": "https://stackoverflow.com/questions/54089482/understanding-the-syntax-of-this-enum-statement", "title": "Understanding the syntax of this enum statement", "body": "<p>I came across the following Kotlin code for an enum:</p>\n\n<pre><code>enum class Section(val position: Int, val textKey: Int, val fragment: Fragment) {\n\n    GUIDE(0, R.string.main_pager_guide, QotGuideFragment()),\n    LEARN(1, R.string.main_pager_learn, QotLearnFragment()),\n    ME(2, R.string.main_pager_me, QotToBeVisionFragment()),\n    PREPARE(3, R.string.main_pager_prepare, QotPrepareFragment()),\n    ;\n}\n</code></pre>\n\n<p>However, when I review the Kotlin docs on enums, I don't see anything in it that shows this kind of syntax. The line:</p>\n\n<blockquote>\n  <p>GUIDE(0, R.string.main_pager_guide, QotGuideFragment())</p>\n</blockquote>\n\n<p>I don't understand how these 3 parameters are used. Also, the enum class Section shows 3 constructor parameters that don't appear to be used.</p>\n\n<p>The official docs on enum are at:</p>\n\n<p><a href=\"https://kotlinlang.org/docs/reference/enum-classes.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/enum-classes.html</a></p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1546942136, "post_id": 54089357, "comment_id": 95011206, "body": "what do you mean by &quot;address&quot;?"}, {"owner": {"reputation": 2465, "user_id": 1798031, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/jQZVl.jpg?s=128&g=1", "display_name": "mr.icetea", "link": "https://stackoverflow.com/users/1798031/mr-icetea"}, "reply_to_user": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1546942179, "post_id": 54089357, "comment_id": 95011236, "body": "@Roland I mean the object address in the memory"}, {"owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "edited": false, "score": 0, "creation_date": 1546942279, "post_id": 54089357, "comment_id": 95011303, "body": "In general, you can&#39;t.  Why would you want to?  What are you trying to achieve?"}, {"owner": {"reputation": 2465, "user_id": 1798031, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/jQZVl.jpg?s=128&g=1", "display_name": "mr.icetea", "link": "https://stackoverflow.com/users/1798031/mr-icetea"}, "reply_to_user": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "edited": false, "score": 0, "creation_date": 1546942347, "post_id": 54089357, "comment_id": 95011361, "body": "@gidds In some cases I want to track my object in memory for debugging purpose"}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1546942537, "post_id": 54089357, "comment_id": 95011460, "body": "You may want to read about memory addresses and Java... you should not access the memory address of objects directly... Some interesting questions about that: <a href=\"https://stackoverflow.com/questions/1961146/memory-address-of-variables-in-java\">Memory address of variables in Java</a>, <a href=\"https://stackoverflow.com/questions/1360826/how-to-get-address-of-a-java-object\">How to get address of a Java Object?</a>, <a href=\"https://stackoverflow.com/questions/8820164/is-there-a-way-to-get-a-reference-address\">Is there a way to get a reference address?</a> and just follow the duplicates from there on ;-)"}, {"owner": {"reputation": 2465, "user_id": 1798031, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/jQZVl.jpg?s=128&g=1", "display_name": "mr.icetea", "link": "https://stackoverflow.com/users/1798031/mr-icetea"}, "reply_to_user": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1546943247, "post_id": 54089357, "comment_id": 95011887, "body": "@Roland thank for your references"}], "answers": [{"comments": [{"owner": {"reputation": 249, "user_id": 505621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d88af3ae39080c431d081fe679ffca97?s=128&d=identicon&r=PG", "display_name": "Yolgie", "link": "https://stackoverflow.com/users/505621/yolgie"}, "edited": false, "score": 0, "creation_date": 1546942546, "post_id": 54089534, "comment_id": 95011465, "body": "If you really want the address of an object inside the JVM please refer to <a href=\"https://stackoverflow.com/questions/7060215/how-can-i-get-the-memory-location-of-a-object-in-java\">How can I get the memory location of a object in java?</a> or <a href=\"https://stackoverflow.com/questions/8820164/is-there-a-way-to-get-a-reference-address\">Is there a way to get a reference address?</a>"}], "tags": [], "owner": {"reputation": 249, "user_id": 505621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d88af3ae39080c431d081fe679ffca97?s=128&d=identicon&r=PG", "display_name": "Yolgie", "link": "https://stackoverflow.com/users/505621/yolgie"}, "is_accepted": false, "score": 1, "last_activity_date": 1546942329, "creation_date": 1546942329, "answer_id": 54089534, "question_id": 54089357, "link": "https://stackoverflow.com/questions/54089357/how-can-i-get-address-of-an-object-in-kotlin/54089534#54089534", "title": "How can I get address of an object in Kotlin?", "body": "<p>Kotlin in the JVM does not support pointers and so (apart from some jiggery-pokery with the sun.misc.Unsafe class) there is no way to obtain a variable's address.</p>\n\n<p>However, Kotlin/Native (at least back in January 2018) does support pointers to enable it to interoperate with C code. The following program shows how to obtain the address of a variable which has been allocated on the native heap. It does not appear to be possible to allocate a variable at a particular address.</p>\n\n<pre><code>// Kotlin Native v0.5\n\nimport kotlinx.cinterop.*\n\nfun main(args: Array&lt;String&gt;) {\n    val intVar = nativeHeap.alloc&lt;IntVar&gt;()\n    intVar.value = 42\n    with(intVar) { println(\"Value is $value, address is $rawPtr\") }\n    nativeHeap.free(intVar)\n}\n</code></pre>\n\n<p>results in:</p>\n\n<pre><code>Value is 42, address is 0xc149f0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2465, "user_id": 1798031, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/jQZVl.jpg?s=128&g=1", "display_name": "mr.icetea", "link": "https://stackoverflow.com/users/1798031/mr-icetea"}, "edited": false, "score": 0, "creation_date": 1546943168, "post_id": 54089573, "comment_id": 95011843, "body": "It&#39;s exactly what I am looking for."}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 14, "last_activity_date": 1546942469, "creation_date": 1546942469, "answer_id": 54089573, "question_id": 54089357, "link": "https://stackoverflow.com/questions/54089357/how-can-i-get-address-of-an-object-in-kotlin/54089573#54089573", "title": "How can I get address of an object in Kotlin?", "body": "<p>To identify an object during debugging, use <code>System.identityHashCode()</code>.</p>\n\n<p>The address of an object can't be obtained on Kotlin/JVM, and it can also change as GC runs, so it can't be used to identify an object.</p>\n"}], "owner": {"reputation": 2465, "user_id": 1798031, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/jQZVl.jpg?s=128&g=1", "display_name": "mr.icetea", "link": "https://stackoverflow.com/users/1798031/mr-icetea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3627, "favorite_count": 1, "accepted_answer_id": 54089573, "answer_count": 2, "score": 3, "last_activity_date": 1546942469, "creation_date": 1546941797, "question_id": 54089357, "link": "https://stackoverflow.com/questions/54089357/how-can-i-get-address-of-an-object-in-kotlin", "title": "How can I get address of an object in Kotlin?", "body": "<p>Simple question but I didn't see any answers on the internet. So, how can I get address of an object in Kotlin?</p>\n"}, {"tags": ["android", "kotlin", "sygic", "sygic-mobile-sdk", "sygic-maps"], "answers": [{"tags": [], "owner": {"reputation": 23, "user_id": 10645271, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Mohamed amine Chahed", "link": "https://stackoverflow.com/users/10645271/mohamed-amine-chahed"}, "is_accepted": true, "score": 0, "last_activity_date": 1547037076, "creation_date": 1547037076, "answer_id": 54110249, "question_id": 54088931, "link": "https://stackoverflow.com/questions/54088931/how-to-properly-detect-markerclick-in-sygic-map/54110249#54110249", "title": "How to properly detect markerClick in Sygic Map", "body": "<p>I've managed to do it , i just had to call the \"requestObjectsAtPoint\" inside the MapGesture listener and do some workaround ,here's the code :</p>\n\n<pre><code>       mpView.addMapGestureListener(object : MapGestureAdapter() {\n        override fun onMapClicked(e: MotionEvent?, isTwoFingers: Boolean): Boolean {\n            mpView.requestObjectsAtPoint(e!!.getX(),e.getY(), RequestObjectCallback { objects, x, y -&gt;\n\n                for (marker : ViewObject in objects )\n                {\n                    if (marker.objectType==1)\n                    {\n                        if ((marker as MapObject).mapObjectType==1)\n                        {\n                            val positionMarker = markerList.indexOf(marker)\n                            val positionLastMarker = markerList.indexOf(mSelectedMarker!!)\n                            val markerNumber = positionMarker +1\n                            val lastMarkerNumber = positionLastMarker + 1\n                            mSelectedMarker = marker as MapMarker\n                            travelStep = travelStepList.get(markerNumber -1)\n                            configTeaser(travelStep)\n                        }\n                    }\n\n\n                }\n\n            })\n\n            return true\n        }\n    })\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 10645271, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Mohamed amine Chahed", "link": "https://stackoverflow.com/users/10645271/mohamed-amine-chahed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 54110249, "answer_count": 1, "score": 0, "last_activity_date": 1547037076, "creation_date": 1546940254, "last_edit_date": 1546943558, "question_id": 54088931, "link": "https://stackoverflow.com/questions/54088931/how-to-properly-detect-markerclick-in-sygic-map", "title": "How to properly detect markerClick in Sygic Map", "body": "<p>I used MapGestureListener to compare each time the coords of the clicked area and the coords of the marker and if they're at the same coords then I'm good to go but it just won't work because of the relative altitude change that doesn't assure the accuracy of getting the clicked position.</p>\n\n<pre><code>mpView.addMapGestureListener(object : MapGestureAdapter() {\n        override fun onMapClicked(e: MotionEvent?, isTwoFingers: Boolean): Boolean {\n\n            val clickedArea=mpView.geoCoordinatesFromPoint(Math.round(e!!.getX()), Math.round(e.getY()))\n            for (marker : MapMarker in markerList )\n            {\n\n                val dist=clickedArea!!.distanceTo(marker.position)\n                if (dist&lt; 2)\n\n                {\n                    val positionMarker = markerList.indexOf(marker)\n                    val positionLastMarker = markerList.indexOf(mSelectedMarker!!)\n                    val markerNumber = positionMarker +1\n                    val lastMarkerNumber = positionLastMarker + 1\n                    travelStep = travelStepList.get(markerNumber -1)\n                    configTeaser(travelStep)\n                }\n            }\n\n            return false\n        }\n    })\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 15590, "user_id": 6478047, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Rd7gY.jpg?s=128&g=1", "display_name": "Manohar Reddy", "link": "https://stackoverflow.com/users/6478047/manohar-reddy"}, "edited": false, "score": 0, "creation_date": 1546938120, "post_id": 54088300, "comment_id": 95009024, "body": "Error suggests that is is no app on phone with package <code>com.android.phone</code> that can handle intent . Try to remove package and also create a intent chooser"}, {"owner": {"reputation": 10141, "user_id": 7746134, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uAn6O.png?s=128&g=1", "display_name": "Saurabh Thorat", "link": "https://stackoverflow.com/users/7746134/saurabh-thorat"}, "edited": false, "score": 0, "creation_date": 1546938156, "post_id": 54088300, "comment_id": 95009042, "body": "Are you running it on a tablet or something with no telephony app?"}, {"owner": {"reputation": 37128, "user_id": 1083093, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/3AgYu.jpg?s=128&g=1", "display_name": "Devrath", "link": "https://stackoverflow.com/users/1083093/devrath"}, "edited": false, "score": 0, "creation_date": 1546938175, "post_id": 54088300, "comment_id": 95009049, "body": "Even I comment out <code>callIntent.setPackage(&quot;com.android.phone&quot;)</code> still i get the error"}, {"owner": {"reputation": 37128, "user_id": 1083093, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/3AgYu.jpg?s=128&g=1", "display_name": "Devrath", "link": "https://stackoverflow.com/users/1083093/devrath"}, "reply_to_user": {"reputation": 10141, "user_id": 7746134, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uAn6O.png?s=128&g=1", "display_name": "Saurabh Thorat", "link": "https://stackoverflow.com/users/7746134/saurabh-thorat"}, "edited": false, "score": 0, "creation_date": 1546938205, "post_id": 54088300, "comment_id": 95009070, "body": "@SaurabhThorat ... I am running on my phone"}], "answers": [{"tags": [], "owner": {"reputation": 66, "user_id": 5220582, "user_type": "registered", "profile_image": "https://graph.facebook.com/985728521469258/picture?type=large", "display_name": "Murad Asgarov", "link": "https://stackoverflow.com/users/5220582/murad-asgarov"}, "is_accepted": true, "score": 3, "last_activity_date": 1546938206, "creation_date": 1546938206, "answer_id": 54088369, "question_id": 54088300, "link": "https://stackoverflow.com/questions/54088300/launching-a-dialler-from-app-in-android-gives-error/54088369#54088369", "title": "Launching a dialler from app in android gives error", "body": "<p>Try like this.</p>\n\n<pre><code>val callIntent = Intent(Intent.ACTION_DIAL)\ncallIntent.setData(Uri.parse(\"tel:\" + phone_number));\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1190, "user_id": 3683195, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/92bCh.png?s=128&g=1", "display_name": "Borja", "link": "https://stackoverflow.com/users/3683195/borja"}, "edited": false, "score": 0, "creation_date": 1613492485, "post_id": 54088434, "comment_id": 117088558, "body": "CALL_PHONE is not needed to open the dialer. It&#39;s only needed when you want to call directly without user&#39;s interaction."}, {"owner": {"reputation": 15590, "user_id": 6478047, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Rd7gY.jpg?s=128&g=1", "display_name": "Manohar Reddy", "link": "https://stackoverflow.com/users/6478047/manohar-reddy"}, "reply_to_user": {"reputation": 1190, "user_id": 3683195, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/92bCh.png?s=128&g=1", "display_name": "Borja", "link": "https://stackoverflow.com/users/3683195/borja"}, "edited": false, "score": 0, "creation_date": 1613535171, "post_id": 54088434, "comment_id": 117101571, "body": "@Borja ya, thanks edited"}], "tags": [], "owner": {"reputation": 15590, "user_id": 6478047, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Rd7gY.jpg?s=128&g=1", "display_name": "Manohar Reddy", "link": "https://stackoverflow.com/users/6478047/manohar-reddy"}, "is_accepted": false, "score": 1, "last_activity_date": 1613535153, "last_edit_date": 1613535153, "creation_date": 1546938451, "answer_id": 54088434, "question_id": 54088300, "link": "https://stackoverflow.com/questions/54088300/launching-a-dialler-from-app-in-android-gives-error/54088434#54088434", "title": "Launching a dialler from app in android gives error", "body": "<p>Use this function</p>\n<pre><code>fun callANumber(context: Context, phoneNo: String) {\n     if (TextUtils.isEmpty(phoneNo)) {\n        return\n    }\n\n    val callIntent = Intent(Intent.ACTION_CALL)\n    callIntent.data = Uri.parse(&quot;tel:$phoneNo&quot;)\n    \n    try {\n        context.startActivity(callIntent)\n    } catch (e: ActivityNotFoundException) {\n        Toast.makeText(context,&quot;No Activity found which can handle intent&quot;,Toast.LENGTH_LONG).show()\n    }\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7766, "user_id": 4517450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AFIyx.jpg?s=128&g=1", "display_name": "vikas kumar", "link": "https://stackoverflow.com/users/4517450/vikas-kumar"}, "is_accepted": false, "score": 1, "last_activity_date": 1546938456, "creation_date": 1546938456, "answer_id": 54088436, "question_id": 54088300, "link": "https://stackoverflow.com/questions/54088300/launching-a-dialler-from-app-in-android-gives-error/54088436#54088436", "title": "Launching a dialler from app in android gives error", "body": "<p>I would suggest you to remove that hardcoded package instead just use the generic intent for opening the dialer as this will call the available intent instead of given one. </p>\n\n<p>Or you just place this below code after handling the activity not found exception.</p>\n\n<pre><code>private fun startPhoneDial(phoneNo: String) {\n        val callIntent = Intent(Intent.ACTION_CALL)\n        //callIntent.data = Uri.parse(phoneNo)\n        if (Build.VERSION.SDK_INT &gt; Build.VERSION_CODES.LOLLIPOP_MR1) {\n            callIntent.setPackage(\"com.android.phone\")\n        }else{\n            callIntent.setPackage(\"com.android.server.telecom\")\n        }\n        callIntent.data = Uri.parse(\"tel:$phoneNo\")\n        try{\n        startActivity(callIntent)        \n        }\n        catch(exp : ActivityNotFoundException){\n         val intent = new Intent(Intent.ACTION_DIAL);\n         intent.setData(Uri.parse(\"tel:${phoneNo}\"));\n         startActivity(intent); \n\n        }\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 2553615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b34e0e3ae35a29299f28c02647575379?s=128&d=identicon&r=PG", "display_name": "Mohit", "link": "https://stackoverflow.com/users/2553615/mohit"}, "is_accepted": false, "score": 1, "last_activity_date": 1546940060, "creation_date": 1546940060, "answer_id": 54088880, "question_id": 54088300, "link": "https://stackoverflow.com/questions/54088300/launching-a-dialler-from-app-in-android-gives-error/54088880#54088880", "title": "Launching a dialler from app in android gives error", "body": "<p>We can call directly ACTION_DIAL.</p>\n\n<pre><code>            val phone = \"+919898989898\"\n            val intent = Intent(Intent.ACTION_DIAL, Uri.fromParts(\"tel\", phone, null))\n            startActivity(intent)\n</code></pre>\n\n<p>reference:- <a href=\"https://stackoverflow.com/a/18973484/2553615\">https://stackoverflow.com/a/18973484/2553615</a></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10524184, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-obLIoUV3qOs/AAAAAAAAAAI/AAAAAAAAAXI/0foxEGLwMik/photo.jpg?sz=128", "display_name": "Wouter Vanhauwaert", "link": "https://stackoverflow.com/users/10524184/wouter-vanhauwaert"}, "is_accepted": false, "score": 0, "last_activity_date": 1587106762, "creation_date": 1587106762, "answer_id": 61265756, "question_id": 54088300, "link": "https://stackoverflow.com/questions/54088300/launching-a-dialler-from-app-in-android-gives-error/61265756#61265756", "title": "Launching a dialler from app in android gives error", "body": "<p>Because it's the opposite way... In versions smaller than lollipop, it's:</p>\n\n<pre><code>com.android.phone\n</code></pre>\n\n<p>From versions starting at lollipop, it's:</p>\n\n<pre><code>com.android.server.telecom\n</code></pre>\n\n<p>So you should just swap your greater-than sign like:</p>\n\n<pre><code>private fun startPhoneDial(phoneNo: String) {\n    val callIntent = Intent(Intent.ACTION_CALL)\n    //callIntent.data = Uri.parse(phoneNo)\n    if (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.LOLLIPOP_MR1) {\n        callIntent.setPackage(\"com.android.phone\")\n    }else{\n        callIntent.setPackage(\"com.android.server.telecom\")\n    }\n    callIntent.data = Uri.parse(\"tel:$phoneNo\")\n    startActivity(callIntent)\n}\n</code></pre>\n"}], "owner": {"reputation": 37128, "user_id": 1083093, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/3AgYu.jpg?s=128&g=1", "display_name": "Devrath", "link": "https://stackoverflow.com/users/1083093/devrath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 408, "favorite_count": 0, "accepted_answer_id": 54088369, "answer_count": 5, "score": 1, "last_activity_date": 1613535153, "creation_date": 1546937907, "question_id": 54088300, "link": "https://stackoverflow.com/questions/54088300/launching-a-dialler-from-app-in-android-gives-error", "title": "Launching a dialler from app in android gives error", "body": "<p>I am trying to dial a user from my app launching the dialer in android</p>\n\n<p><strong>I have provided the manifest permission</strong>:</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.CALL_PHONE\"/&gt;\n</code></pre>\n\n<p><strong>I have also provided the runtime permission</strong></p>\n\n<p><strong>Code:</strong></p>\n\n<pre><code>private fun startPhoneDial(phoneNo: String) {\n        val callIntent = Intent(Intent.ACTION_CALL)\n        //callIntent.data = Uri.parse(phoneNo)\n        if (Build.VERSION.SDK_INT &gt; Build.VERSION_CODES.LOLLIPOP_MR1) {\n            callIntent.setPackage(\"com.android.phone\")\n        }else{\n            callIntent.setPackage(\"com.android.server.telecom\")\n        }\n        callIntent.data = Uri.parse(\"tel:$phoneNo\")\n        startActivity(callIntent)\n    }\n</code></pre>\n\n<p><strong>Error-Stack-Trace</strong>: </p>\n\n<pre><code>Exception: Method threw 'android.content.ActivityNotFoundException' exception.\n\nMessage: No Activity found to handle Intent { act=android.intent.action.CALL dat=tel:xxxxxxxxxx pkg=com.android.phone }\n</code></pre>\n"}, {"tags": ["kotlin", "mockito"], "comments": [{"owner": {"reputation": 9043, "user_id": 632516, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/lDpmr.jpg?s=128&g=1", "display_name": "Divers", "link": "https://stackoverflow.com/users/632516/divers"}, "edited": false, "score": 0, "creation_date": 1546937788, "post_id": 54087977, "comment_id": 95008848, "body": "If it enters to <code>getHeroes</code> method, what value is passed? Try to log/debug it."}, {"owner": {"reputation": 1926, "user_id": 1734982, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/e3666b93ef2cfee578f79a7014d45312?s=128&d=identicon&r=PG", "display_name": "Iban Arriola", "link": "https://stackoverflow.com/users/1734982/iban-arriola"}, "reply_to_user": {"reputation": 9043, "user_id": 632516, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/lDpmr.jpg?s=128&g=1", "display_name": "Divers", "link": "https://stackoverflow.com/users/632516/divers"}, "edited": false, "score": 0, "creation_date": 1546938372, "post_id": 54087977, "comment_id": 95009168, "body": "the value is an int of 0"}, {"owner": {"reputation": 9043, "user_id": 632516, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/lDpmr.jpg?s=128&g=1", "display_name": "Divers", "link": "https://stackoverflow.com/users/632516/divers"}, "edited": false, "score": 0, "creation_date": 1546938486, "post_id": 54087977, "comment_id": 95009231, "body": "<code>HeroesRepository</code> - class right? Open? Or you use mockito-inline? Also can you try <code>doReturn(heroesPublishSubject.singleOrError()).when(heroesRe&zwnj;&#8203;pository.getHeroes(A&zwnj;&#8203;rgumentMatchers.anyI&zwnj;&#8203;nt()))</code>?"}, {"owner": {"reputation": 1926, "user_id": 1734982, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/e3666b93ef2cfee578f79a7014d45312?s=128&d=identicon&r=PG", "display_name": "Iban Arriola", "link": "https://stackoverflow.com/users/1734982/iban-arriola"}, "reply_to_user": {"reputation": 9043, "user_id": 632516, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/lDpmr.jpg?s=128&g=1", "display_name": "Divers", "link": "https://stackoverflow.com/users/632516/divers"}, "edited": false, "score": 1, "creation_date": 1546938910, "post_id": 54087977, "comment_id": 95009469, "body": "Yes HeroesRepository is a class. with doReturn is also entering to getHeroes method."}, {"owner": {"reputation": 9043, "user_id": 632516, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/lDpmr.jpg?s=128&g=1", "display_name": "Divers", "link": "https://stackoverflow.com/users/632516/divers"}, "edited": false, "score": 0, "creation_date": 1546939000, "post_id": 54087977, "comment_id": 95009510, "body": "Open class? Common mockito can not mock not open classes in Kotlin. Please post the source code of this class then."}, {"owner": {"reputation": 1926, "user_id": 1734982, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/e3666b93ef2cfee578f79a7014d45312?s=128&d=identicon&r=PG", "display_name": "Iban Arriola", "link": "https://stackoverflow.com/users/1734982/iban-arriola"}, "reply_to_user": {"reputation": 9043, "user_id": 632516, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/lDpmr.jpg?s=128&g=1", "display_name": "Divers", "link": "https://stackoverflow.com/users/632516/divers"}, "edited": false, "score": 0, "creation_date": 1546939574, "post_id": 54087977, "comment_id": 95009796, "body": "Yes it is open class I edit this question to add HeroesRepository so you can check it"}, {"owner": {"reputation": 9043, "user_id": 632516, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/lDpmr.jpg?s=128&g=1", "display_name": "Divers", "link": "https://stackoverflow.com/users/632516/divers"}, "edited": false, "score": 0, "creation_date": 1546940100, "post_id": 54087977, "comment_id": 95010075, "body": "It is not an open class in your source code."}, {"owner": {"reputation": 1926, "user_id": 1734982, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/e3666b93ef2cfee578f79a7014d45312?s=128&d=identicon&r=PG", "display_name": "Iban Arriola", "link": "https://stackoverflow.com/users/1734982/iban-arriola"}, "reply_to_user": {"reputation": 9043, "user_id": 632516, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/lDpmr.jpg?s=128&g=1", "display_name": "Divers", "link": "https://stackoverflow.com/users/632516/divers"}, "edited": false, "score": 0, "creation_date": 1546940277, "post_id": 54087977, "comment_id": 95010166, "body": "what you mean it is not an open class? HeroesRepository is open class. witch one is not open?"}, {"owner": {"reputation": 1926, "user_id": 1734982, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/e3666b93ef2cfee578f79a7014d45312?s=128&d=identicon&r=PG", "display_name": "Iban Arriola", "link": "https://stackoverflow.com/users/1734982/iban-arriola"}, "reply_to_user": {"reputation": 9043, "user_id": 632516, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/lDpmr.jpg?s=128&g=1", "display_name": "Divers", "link": "https://stackoverflow.com/users/632516/divers"}, "edited": false, "score": 0, "creation_date": 1546940359, "post_id": 54087977, "comment_id": 95010208, "body": "Sorry I copied the class wrong but it is an open class. I updated it"}, {"owner": {"reputation": 1926, "user_id": 1734982, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/e3666b93ef2cfee578f79a7014d45312?s=128&d=identicon&r=PG", "display_name": "Iban Arriola", "link": "https://stackoverflow.com/users/1734982/iban-arriola"}, "reply_to_user": {"reputation": 9043, "user_id": 632516, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/lDpmr.jpg?s=128&g=1", "display_name": "Divers", "link": "https://stackoverflow.com/users/632516/divers"}, "edited": false, "score": 0, "creation_date": 1546940835, "post_id": 54087977, "comment_id": 95010481, "body": "when you put the HeroesRepository as not open it says <code>Cannot mock&#47;spy class</code> so the error is another thing"}, {"owner": {"reputation": 410, "user_id": 5132200, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hFdHBn-PeJE/AAAAAAAAAAI/AAAAAAAABx0/DMeo7WYu3Nw/photo.jpg?sz=128", "display_name": "Janos Breuer", "link": "https://stackoverflow.com/users/5132200/janos-breuer"}, "edited": false, "score": 0, "creation_date": 1547029557, "post_id": 54087977, "comment_id": 95047940, "body": "Please post the exception or the compilation error you get."}], "answers": [{"tags": [], "owner": {"reputation": 96, "user_id": 10894219, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aZVzzD9Bcx0/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZ2W6UVf-6I_E1s3nPUXfOqyDb2Bg/mo/photo.jpg?sz=128", "display_name": "Nizan Ifrach", "link": "https://stackoverflow.com/users/10894219/nizan-ifrach"}, "is_accepted": false, "score": 1, "last_activity_date": 1605110617, "last_edit_date": 1605110617, "creation_date": 1547307763, "answer_id": 54161144, "question_id": 54087977, "link": "https://stackoverflow.com/questions/54087977/mockito-when-clause-not-working-in-kotlin/54161144#54161144", "title": "Mockito when clause not working in kotlin", "body": "<p>Mockito is not quite compatible with kotlin, you can use mockito-kotlin resource instead.\nCheck out this reference:\n<a href=\"https://github.com/nhaarman/mockito-kotlin\" rel=\"nofollow noreferrer\">https://github.com/nhaarman/mockito-kotlin</a></p>\n<p>You can easily mock objects like so:</p>\n<pre><code>val heroesRepository = mock&lt;HeroesRepository&gt;()\n</code></pre>\n<p>Then you can use it as you use mockito</p>\n"}, {"tags": [], "owner": {"reputation": 820, "user_id": 4072335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c01e60f5fbc56b9ba59dde7a80bc59fc?s=128&d=identicon&r=PG&f=1", "display_name": "Can_of_awe", "link": "https://stackoverflow.com/users/4072335/can-of-awe"}, "is_accepted": false, "score": 9, "last_activity_date": 1547481512, "creation_date": 1547481512, "answer_id": 54184925, "question_id": 54087977, "link": "https://stackoverflow.com/questions/54087977/mockito-when-clause-not-working-in-kotlin/54184925#54184925", "title": "Mockito when clause not working in kotlin", "body": "<p>Without adding another dependency, you can replace using the <code>@Mock</code> annotation with a helper function somewhere:</p>\n\n<pre><code>inline fun &lt;reified T&gt; mock(): T =\n        Mockito.mock(T::class.java)\n\n// To avoid having to use backticks for \"when\"\nfun &lt;T&gt; whenever(methodCall: T): OngoingStubbing&lt;T&gt; =\n        Mockito.`when`(methodCall)\n</code></pre>\n\n<p>Then in your test:</p>\n\n<pre><code>val heroesRepository: HeroesRepository = mock()\n\n@Test\nfun yourTest() {\n    whenever(heroesRepository.getHeroes(ArgumentMatchers.anyInt()))\n        .thenReturn(heroesPublishSubject.singleOrError())\n}\n</code></pre>\n\n<p>Like you had before. This should work, because you're not expecting Mockito to deal with <code>@Mock lateinit var</code>, which it seems to be struggling with, and instead instantiating the mock yourself.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 15627674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f4cb15506288bc277da49f6259a7b76?s=128&d=identicon&r=PG&f=1", "display_name": "kaa", "link": "https://stackoverflow.com/users/15627674/kaa"}, "is_accepted": false, "score": 0, "last_activity_date": 1618357373, "creation_date": 1618357373, "answer_id": 67083696, "question_id": 54087977, "link": "https://stackoverflow.com/questions/54087977/mockito-when-clause-not-working-in-kotlin/67083696#67083696", "title": "Mockito when clause not working in kotlin", "body": "<p>FWIW, the reason that the <code>when</code> statement is just calling the actual function is because the function itself (<code>getHeroes</code>) is not marked as <code>open</code>.</p>\n<p>So even though the class is non-final the method is final and not mocked.</p>\n"}], "owner": {"reputation": 1926, "user_id": 1734982, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/e3666b93ef2cfee578f79a7014d45312?s=128&d=identicon&r=PG", "display_name": "Iban Arriola", "link": "https://stackoverflow.com/users/1734982/iban-arriola"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4574, "favorite_count": 0, "answer_count": 3, "score": 6, "last_activity_date": 1618357373, "creation_date": 1546936581, "last_edit_date": 1546940322, "question_id": 54087977, "link": "https://stackoverflow.com/questions/54087977/mockito-when-clause-not-working-in-kotlin", "title": "Mockito when clause not working in kotlin", "body": "<p>I am trying to use mockito in kotlin. I created the following test:</p>\n\n<pre><code>class HeroesDataSourceTest {\n\n    @Mock\n    lateinit var heroesRepository: HeroesRepository\n    @Mock\n    lateinit var params: PageKeyedDataSource.LoadInitialParams&lt;Int&gt;\n    @Mock\n    lateinit var callback: PageKeyedDataSource.LoadInitialCallback&lt;Int, Heroes.Hero&gt;\n\n    val hero = Heroes.Hero(1, \"superman\", \"holasuperman\", 1, null, null)\n    val results = Arrays.asList(hero)\n    val data = Heroes.Data(results)\n    val dataResult = Heroes.DataResult(data)\n\n    val compositeDisposable = CompositeDisposable()\n\n    lateinit var heroesDataSource: HeroesDataSource\n    private val heroesPublishSubject = PublishSubject.create&lt;Heroes.DataResult&gt;()\n\n    @Before\n    fun initTest(){\n        MockitoAnnotations.initMocks(this)\n\n    }\n\n    @Test\n    fun testLoadInitialSuccess(){\n        `when`(heroesRepository.getHeroes(ArgumentMatchers.anyInt())).thenReturn(heroesPublishSubject.singleOrError())\n        heroesDataSource = HeroesDataSource(heroesRepository, compositeDisposable)\n        val testObserver = TestObserver&lt;Heroes.DataResult&gt;()\n        heroesDataSource.loadInitial(params, callback)\n        heroesPublishSubject.onNext(dataResult)\n        testObserver.assertComplete()\n    }\n\n}\n</code></pre>\n\n<p>But when I execute it in the line <code>when(heroesRepository.getHeroes(ArgumentMatchers.anyInt())).thenReturn(heroesPublishSubject.singleOrError())</code> it just enter to getHeroes method instead of mocking it (and for sure since heroesRepository is not initialized because is mocket the method fails). I use this tons of times in java and it never gave me a single problem. What I have to do in kotlin to mock it properly?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Here I put also HeroesRepository class</p>\n\n<pre><code>open class HeroesRepository {\n\n    val privateKey = \"5009bb73066f50f127907511e70f691cd3f2bb2c\"\n    val publicKey = \"51ef4d355f513641b490a80d32503852\"\n    val apiDataSource = DataModule.create()\n    val pageSize = 20\n\n    fun getHeroes(page: Int): Single&lt;Heroes.DataResult&gt; {\n        val now = Date().time.toString()\n        val hash = generateHash(now + privateKey + publicKey)\n        val offset: Int = page * pageSize\n        return apiDataSource.getHeroes(now, publicKey, hash, offset, pageSize)\n    }\n\n    fun generateHash(variable: String): String {\n        val md = MessageDigest.getInstance(\"MD5\")\n        val digested = md.digest(variable.toByteArray())\n        return digested.joinToString(\"\") {\n            String.format(\"%02x\", it)\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["kotlin", "kotlin-native", "kotlin-multiplatform"], "answers": [{"tags": [], "owner": {"reputation": 610, "user_id": 7149385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BK1tL.jpg?s=128&g=1", "display_name": "ImanX", "link": "https://stackoverflow.com/users/7149385/imanx"}, "is_accepted": true, "score": 3, "last_activity_date": 1547539822, "creation_date": 1547539822, "answer_id": 54194875, "question_id": 54087641, "link": "https://stackoverflow.com/questions/54087641/how-to-use-http-request-lib-in-kotlin-native/54194875#54194875", "title": "How to use Http Request lib in Kotlin Native", "body": "<p>I see, I did read about issue in other forums, if you downgrade <code>gradle</code> to 4.7 this issue be solve. \nI downgraded gradle of project and solved.</p>\n"}], "owner": {"reputation": 610, "user_id": 7149385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BK1tL.jpg?s=128&g=1", "display_name": "ImanX", "link": "https://stackoverflow.com/users/7149385/imanx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1111, "favorite_count": 1, "accepted_answer_id": 54194875, "answer_count": 1, "score": 5, "last_activity_date": 1547539822, "creation_date": 1546935179, "last_edit_date": 1546936235, "question_id": 54087641, "link": "https://stackoverflow.com/questions/54087641/how-to-use-http-request-lib-in-kotlin-native", "title": "How to use Http Request lib in Kotlin Native", "body": "<p>I'm beginner in Kotlin native and my objective is build a lib that our Rest APIs include it and I use it on iOS and Android.\nI knew <code>ktor</code> and implemented this in my project but when I run <code>build</code> project by <code>Gradle</code> get exception where I use objects of <code>kotr</code>:</p>\n\n<pre><code>&gt; Task :apiCore:androidProcessResources NO-SOURCE\n&gt; Task :apiCore:compileKotlinAndroid UP-TO-DATE\n&gt; Task :apiCore:androidMainClasses UP-TO-DATE\n&gt; Task :apiCore:androidJar UP-TO-DATE\n\n&gt; Task :apiCore:compileKotlinIOS\nsrc/commonMain/kotlin/APICore.kt:3:8: error: unresolved reference: io\nimport io.ktor.client.HttpClient\n   ^\nsrc/commonMain/kotlin/APICore.kt:4:8: error: unresolved reference: io\nimport io.ktor.client.request.get\n   ^\nsrc/commonMain/kotlin/APICore.kt:10:17: error: unresolved reference: \nHttpClient\nval client =  HttpClient()\n            ^\n\nExecution failed for task ':apiCore:compileKotlinIOS'.\n&gt; Process 'command '/Applications/Android \nStudio.app/Contents/jre/jdk/Contents/Home/bin/java'' finished with \nnon-zero exit value 1\n</code></pre>\n\n<p>and my <code>Gradle</code> for multiplatform module:</p>\n\n<pre><code>sourceSets {\n    commonMain.dependencies {\n        api 'org.jetbrains.kotlin:kotlin-stdlib-common'\n        implementation(\"io.ktor:ktor-client-core:1.1.1\")\n    }\n\n    androidMain.dependencies {\n        api 'org.jetbrains.kotlin:kotlin-stdlib'\n        implementation (\"io.ktor:ktor-client-android:1.1.1\")\n    }\n\n    iosMain.dependencies{\n        implementation \"io.ktor:ktor-client-ios:1.1.1\"\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "is_accepted": false, "score": 3, "last_activity_date": 1546935878, "last_edit_date": 1546935878, "creation_date": 1546935452, "answer_id": 54087694, "question_id": 54087586, "link": "https://stackoverflow.com/questions/54087586/kotlin-abstract-class-secondary-constructor/54087694#54087694", "title": "Kotlin abstract class secondary constructor", "body": "<p>When you create a <strong>secondary</strong> constructor, and a class has non empty <strong>primary</strong> constructor, you should pass all parameters that <strong>primary</strong> constructor has, e.g.:</p>\n\n<pre><code>abstract class BaseAndroidViewModel(\n        application: Application,\n        private val creditsGetByIdUseCase: String,\n        private val videosGetByIdUseCase: String\n) : AndroidViewModel(application) {\n\n    constructor(application: Application) : this(application, \n            \"creditsGetByIdUseCase\", \"videosGetByIdUseCase\") // here we pass other necessary parameters\n}\n</code></pre>\n\n<p>In your case it might be the following:</p>\n\n<pre><code>@SuppressLint(\"StaticFieldLeak\")\nabstract class BaseAndroidViewModel(\n    application: Application,\n    private val creditsGetByIdUseCase: CreditsGetByIdUseCase?,\n    private val videosGetByIdUseCase: VideosGetByIdUseCase?,\n    private val reviewGetByIdUseCase: ReviewGetByIdUseCase?,\n    private val addToFavoritesUseCase: AddToFavoritesUseCase?,\n    private val getFavoriteByIdUseCase: GetFavoriteByIdUseCase?\n) : AndroidViewModel(application) {\n\n    constructor(application: Application) : this(application, null, null, null, null, null)\n}\n</code></pre>\n\n<p>Or you can create <strong>primary</strong> constructor with default parameters:</p>\n\n<pre><code>abstract class BaseAndroidViewModel(\n        application: Application,\n        private val creditsGetByIdUseCase: CreditsGetByIdUseCase? = null,\n        private val videosGetByIdUseCase: VideosGetByIdUseCase? = null,\n        private val reviewGetByIdUseCase: ReviewGetByIdUseCase? = null ,\n        private val addToFavoritesUseCase: AddToFavoritesUseCase? = null,\n        private val getFavoriteByIdUseCase: GetFavoriteByIdUseCase? = null\n    ) : AndroidViewModel(application) { ... }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1196, "user_id": 6720648, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fMFhK.jpg?s=128&g=1", "display_name": "Alok Mishra", "link": "https://stackoverflow.com/users/6720648/alok-mishra"}, "is_accepted": true, "score": 9, "last_activity_date": 1546944323, "last_edit_date": 1546944323, "creation_date": 1546938721, "answer_id": 54088521, "question_id": 54087586, "link": "https://stackoverflow.com/questions/54087586/kotlin-abstract-class-secondary-constructor/54088521#54088521", "title": "Kotlin abstract class secondary constructor", "body": "<p>You can call secondary constructor like this -</p>\n\n<pre><code>@SuppressLint(\"StaticFieldLeak\") abstract class BaseAndroidViewModel : AndroidViewModel{\nconstructor(application: Application,\n            creditsGetByIdUseCase: CreditsGetByIdUseCase,\n            videosGetByIdUseCase: VideosGetByIdUseCase,\n            reviewGetByIdUseCase: ReviewGetByIdUseCase,\n            addToFavoritesUseCase: AddToFavoritesUseCase,\n            getFavoriteByIdUseCase: GetFavoriteByIdUseCase) : super(application)\n\nconstructor(application: Application) : super(application) }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6703, "user_id": 1797950, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/1KyYn.jpg?s=128&g=1", "display_name": "crgarridos", "link": "https://stackoverflow.com/users/1797950/crgarridos"}, "is_accepted": false, "score": 0, "last_activity_date": 1546944306, "creation_date": 1546944306, "answer_id": 54090125, "question_id": 54087586, "link": "https://stackoverflow.com/questions/54087586/kotlin-abstract-class-secondary-constructor/54090125#54090125", "title": "Kotlin abstract class secondary constructor", "body": "<p>The reason you are getting a <code>cycle in the delegation calls chain error</code>, is because</p>\n\n<pre><code>constructor(application: Application): this(application)\n</code></pre>\n\n<p>Is the equivalent to java: </p>\n\n<pre><code>public MyClass(Application application){\n    this(application)\n}\n</code></pre>\n\n<p>This said you are calling your constructor recursively.</p>\n\n<hr>\n\n<p>As stated in <a href=\"https://stackoverflow.com/a/54088521/1797950\">Alok Mishra's answer</a>, you should instead make a call to the super constructor.</p>\n\n<pre><code>constructor(application: Application): super(application)\n</code></pre>\n\n<p>That is actually the equivalent of your primary constructor:</p>\n\n<pre><code>BaseAndroidViewModel(application: Application): AndroidViewModel(application)\n</code></pre>\n\n<p>You can constate that this is just a replacement of keywords <code>constructor</code> by <code>BaseAndroidViewModel</code> and <code>super</code> by <code>AndroidViewModel</code></p>\n"}], "owner": {"reputation": 19, "user_id": 5883462, "user_type": "registered", "profile_image": "https://graph.facebook.com/911151795648236/picture?type=large", "display_name": "Sergejs Bogdanovs", "link": "https://stackoverflow.com/users/5883462/sergejs-bogdanovs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2249, "favorite_count": 3, "accepted_answer_id": 54088521, "answer_count": 3, "score": 2, "last_activity_date": 1546944323, "creation_date": 1546934967, "question_id": 54087586, "link": "https://stackoverflow.com/questions/54087586/kotlin-abstract-class-secondary-constructor", "title": "Kotlin abstract class secondary constructor", "body": "<p>I can't create the secondary constructor for this abstract class.</p>\n\n<pre><code>@SuppressLint(\"StaticFieldLeak\")\nabstract class BaseAndroidViewModel(\n        application: Application,\n        private val creditsGetByIdUseCase: CreditsGetByIdUseCase,\n        private val videosGetByIdUseCase: VideosGetByIdUseCase,\n        private val reviewGetByIdUseCase: ReviewGetByIdUseCase,\n        private val addToFavoritesUseCase: AddToFavoritesUseCase,\n        private val getFavoriteByIdUseCase: GetFavoriteByIdUseCase\n) : AndroidViewModel(application) {\n\nconstructor(application: Application) : this(application) // There's a cycle in the delegation calls chain error\n</code></pre>\n"}, {"tags": ["java", "android", "android-intent", "kotlin"], "comments": [{"owner": {"reputation": 8351, "user_id": 1817031, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/MnimI.png?s=128&g=1", "display_name": "Steve M", "link": "https://stackoverflow.com/users/1817031/steve-m"}, "edited": false, "score": 0, "creation_date": 1546982571, "post_id": 54087418, "comment_id": 95032617, "body": "There is no way to do this for all Content Uri&#39;s, although you could attempt to get a usable file path and fallback to opening the InputStream and copying if it doesn&#39;t work. See <a href=\"https://commonsware.com/blog/2016/03/15/how-consume-content-uri.html\" rel=\"nofollow noreferrer\">commonsware.com/blog/2016/03/15/how-consume-content-uri.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 8351, "user_id": 1817031, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/MnimI.png?s=128&g=1", "display_name": "Steve M", "link": "https://stackoverflow.com/users/1817031/steve-m"}, "edited": false, "score": 0, "creation_date": 1546982493, "post_id": 54088057, "comment_id": 95032577, "body": "This won&#39;t work if the uri isn&#39;t for something in the MediaStore."}, {"owner": {"reputation": 312, "user_id": 8746644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a519bf2c839cd239b8c5e24a1704dca2?s=128&d=identicon&r=PG&f=1", "display_name": "michpohl", "link": "https://stackoverflow.com/users/8746644/michpohl"}, "edited": false, "score": 0, "creation_date": 1547021250, "post_id": 54088057, "comment_id": 95043424, "body": "So as long as I know I only work with audio files I am safe because the should be in the MediaStore? I&#39;ll give this a go anyway and see how well it works because it doesn&#39;t look like there are any real alternatives."}, {"owner": {"reputation": 8351, "user_id": 1817031, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/MnimI.png?s=128&g=1", "display_name": "Steve M", "link": "https://stackoverflow.com/users/1817031/steve-m"}, "reply_to_user": {"reputation": 312, "user_id": 8746644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a519bf2c839cd239b8c5e24a1704dca2?s=128&d=identicon&r=PG&f=1", "display_name": "michpohl", "link": "https://stackoverflow.com/users/8746644/michpohl"}, "edited": false, "score": 0, "creation_date": 1547151929, "post_id": 54088057, "comment_id": 95104301, "body": "@michpohl there can be audio content Uri&#39;s that aren&#39;t in the MediaStore... some file explorers will send files like that for example."}, {"owner": {"reputation": 312, "user_id": 8746644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a519bf2c839cd239b8c5e24a1704dca2?s=128&d=identicon&r=PG&f=1", "display_name": "michpohl", "link": "https://stackoverflow.com/users/8746644/michpohl"}, "reply_to_user": {"reputation": 8351, "user_id": 1817031, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/MnimI.png?s=128&g=1", "display_name": "Steve M", "link": "https://stackoverflow.com/users/1817031/steve-m"}, "edited": false, "score": 0, "creation_date": 1550669113, "post_id": 54088057, "comment_id": 96353173, "body": "So, it seems like you can&#39;t really. I&#39;m marking this as a solution, because it seems to be the most valid way of retrieving a path from a content Uri. For its caveats see @SteveM &#39;s valuable comments and the linked sources."}], "tags": [], "owner": {"reputation": 1965, "user_id": 2773112, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/738aeb9015a5d8192f74c805b4cebeea?s=128&d=identicon&r=PG&f=1", "display_name": "nkalra0123", "link": "https://stackoverflow.com/users/2773112/nkalra0123"}, "is_accepted": true, "score": 1, "last_activity_date": 1546936943, "creation_date": 1546936943, "answer_id": 54088057, "question_id": 54087418, "link": "https://stackoverflow.com/questions/54087418/android-intent-is-it-possible-to-get-a-reference-to-the-actual-file-in-storage/54088057#54088057", "title": "Android intent: Is it possible to get a reference to the actual file in storage on the phone in a proper way?", "body": "<p>We are using same thing in a production level app, and it is working fine.</p>\n\n<pre><code>        filePath = FileUtils.getPathFromURI(mUri);\n</code></pre>\n\n<hr>\n\n<pre><code> public static String getPathFromURI(Uri contentUri) {\n\n        Cursor cursor = null;\n        try {\n            final String[] proj = {MediaStore.Images.Media.DATA};\n            cursor = getAppContext().getContentResolver().query(contentUri, proj, null, null, null);\n            if (cursor == null || cursor.getCount() == 0)\n                return \"\";\n            final int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);\n            cursor.moveToFirst();\n            return cursor.getString(column_index);\n        } catch (IllegalArgumentException|SecurityException e) {\n                return \"\";\n        } finally {\n            if (cursor != null &amp;&amp; !cursor.isClosed()) cursor.close();\n        }\n    }\n</code></pre>\n"}], "owner": {"reputation": 312, "user_id": 8746644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a519bf2c839cd239b8c5e24a1704dca2?s=128&d=identicon&r=PG&f=1", "display_name": "michpohl", "link": "https://stackoverflow.com/users/8746644/michpohl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 1, "accepted_answer_id": 54088057, "answer_count": 1, "score": 1, "last_activity_date": 1546936943, "creation_date": 1546934265, "last_edit_date": 1546935228, "question_id": 54087418, "link": "https://stackoverflow.com/questions/54087418/android-intent-is-it-possible-to-get-a-reference-to-the-actual-file-in-storage", "title": "Android intent: Is it possible to get a reference to the actual file in storage on the phone in a proper way?", "body": "<p>I am working on a simple app that plays audio files and I would like to be able to open the app from an audio file in, for example, a file browser. The intent filter and all that is set, but I am struggling with how to use what I receive. </p>\n\n<p>the content:// uri I receive doesn't seem to be meant to be used to get to the actual file - I have looked at the answers to the question here:   <a href=\"https://stackoverflow.com/questions/5657411/android-getting-a-file-uri-from-a-content-uri/46889812\">Android: Getting a file URI from a content URI?</a>, but the approach described there to get a file and not just use the inputStream (which is basically what I want) doesn't seem to be the right way, judging from the discouaging comments and also this site: <a href=\"https://commonsware.com/blog/2016/03/15/how-consume-content-uri.html\" rel=\"nofollow noreferrer\">How to Consume Content from a Uri</a>. Or am I mistaken?</p>\n\n<p>Right now, I am calling this method in my MainActivity to handle my intent, which basically just creates a temporary copy of the file and passes it to where it's used: </p>\n\n<pre><code> private fun handleIntent() {\n\n    val uri = intent.data\n    val inputStream = contentResolver.openInputStream(uri)\n    val outputFile = File(this.cacheDir, \"output.wav\")\n    val outputStream = FileOutputStream(outputFile)\n    inputStream.use { input -&gt;\n        outputStream.use { output -&gt;\n            input.copyTo(output)\n        }\n    }\n    DataRepository.handleFileFromIntent(outputFile)\n    showPlayerFragmentWithFreshSelection()\n}\n</code></pre>\n\n<p>This almost works (as in I get what is passed to the app as a File), but in a wrong way. Since I want to add the file to a selection of audio files my player can go through, and would like to be able to save this selection, saving a temporary file, or even a copy at all is not the right approach here (I just named the file \"output.wav\" here because I knew for my test I would be using a .wav file)</p>\n\n<p>Is there any proper and safe way to get the actual path to the file from my content uri or is this just something that can't (or shouldn't) be done at all?</p>\n\n<p>I am writing this in Kotlin, but answers using Java are very wellcome too!</p>\n"}, {"tags": ["android", "kotlin", "android-textinputlayout"], "answers": [{"tags": [], "owner": {"reputation": 610, "user_id": 7639541, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/737d8400179b1e0280e3f90bed75b7b7?s=128&d=identicon&r=PG&f=1", "display_name": "Rohit Maurya", "link": "https://stackoverflow.com/users/7639541/rohit-maurya"}, "is_accepted": false, "score": 0, "last_activity_date": 1546966826, "creation_date": 1546966826, "answer_id": 54096446, "question_id": 54086512, "link": "https://stackoverflow.com/questions/54086512/textinputlayout-listeners-are-not-working/54096446#54096446", "title": "TextInputLayout listeners are not working", "body": "<p>I was able to solve this issue. I exactly don't know the reason, but when i removed <code>kotlinX synthetic</code> import and tried to do it in traditional <code>findViewById()</code> way. Its working. </p>\n\n<pre><code>override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n\n        textInputFirstName = view.findViewById(R.id.textInputLayoutURFirstName)\n        textInputLastName = view.findViewById(R.id.textInputLayoutURLastName)\n        textInputPassword = view.findViewById(R.id.textInputLayoutURPassword)\n        textInputEmail = view.findViewById(R.id.textInputLayoutUREmail)\n        textInputMobile = view.findViewById(R.id.textInputLayoutURMobile)\n        buttonSingUp = view.findViewById(R.id.buttonUserRegistrationSignUp)\n\n}\n</code></pre>\n"}], "owner": {"reputation": 610, "user_id": 7639541, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/737d8400179b1e0280e3f90bed75b7b7?s=128&d=identicon&r=PG&f=1", "display_name": "Rohit Maurya", "link": "https://stackoverflow.com/users/7639541/rohit-maurya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1546966826, "creation_date": 1546929890, "question_id": 54086512, "link": "https://stackoverflow.com/questions/54086512/textinputlayout-listeners-are-not-working", "title": "TextInputLayout listeners are not working", "body": "<p>I am working on signup screen, which have multiple <code>textInputLayout</code>. In <code>onResume()</code> i am adding textchange  &amp; focus listeners to all the textinputlayout.\nOn opening screen it is working fine all the focus and textchange listeners are working fine. But when i am going to next screen and again coming back to the same screen both listeners are not working. I tried to <code>initiew()</code> in <code>onViewCreated()</code> also but no luck</p>\n\n<pre><code>private lateinit var customTextInputLayouts: MutableList&lt;TextInputLayout&gt;\n\n override fun onResume() {\n        super.onResume()\n        initView()\n    }\n\n private fun initView() {\n  customTextInputLayouts = mutableListOf(textInputLayoutURFirstName, textInputLayoutURLastName,\n                textInputLayoutUREmail, textInputLayoutURMobile, textInputLayoutURPassword)\n\n  customTextInputLayouts.forEach {\n            it.editText?.apply {\n                addTextChangedListener(generalTextWatcher)\n                onFocusChangeListener = generalFocusChangeListener\n            }\n        }\n}\n</code></pre>\n\n<p>In below code i am doing validation in both listener.</p>\n\n<pre><code>private val generalFocusChangeListener = View.OnFocusChangeListener { v, hasFocus -&gt;\n        if (!hasFocus) {\n            when {\n                R.id.textInputEditTextURFirstName == v.id &amp;&amp; textInputLayoutURFirstName.editText?.text.toString().isValidName().first -&gt; textInputLayoutURFirstName.setStyle(R.drawable.text_input_layout_background, 8)\n                R.id.textInputEditTextURLastName == v.id &amp;&amp; textInputLayoutURLastName.editText?.text.toString().isValidName().first -&gt; textInputLayoutURLastName.setStyle(R.drawable.text_input_layout_background, 8)\n                R.id.textInputEditTextUREmail == v.id &amp;&amp; textInputLayoutUREmail.editText?.text.toString().isValidEmail().first -&gt; {\n                    mPresenter?.onEmailEntered(textInputLayoutUREmail.editText?.text.toString())\n                }\n                R.id.textInputEditTextURMobile == v.id &amp;&amp; textInputLayoutURMobile.editText?.text.toString().isValidMobileNumber().first -&gt; textInputLayoutURMobile.setStyle(R.drawable.text_input_layout_background, 4)\n                R.id.textInputEditTextURPassword == v.id &amp;&amp; textInputLayoutURPassword.editText?.text.toString().isValidPassword().first -&gt; textInputLayoutURPassword.setStyle(R.drawable.text_input_layout_background, 4)\n            }\n        }\n        checkRequireFieldAndEnableButton()\n    }\n\n    private val generalTextWatcher = object : TextWatcher {\n        override fun onTextChanged(s: CharSequence, start: Int, before: Int, count: Int) {\n            when {\n                textInputLayoutURFirstName.editText?.text?.hashCode() == s.hashCode() -&gt; textInputLayoutURFirstName.error = textInputLayoutURFirstName.editText?.text.toString().isValidName().second\n                textInputLayoutURLastName.editText?.text?.hashCode() == s.hashCode() -&gt; textInputLayoutURLastName.error = textInputLayoutURLastName.editText?.text.toString().isValidName().second\n                textInputLayoutUREmail.editText?.text?.hashCode() == s.hashCode() -&gt; textInputLayoutUREmail.error = textInputLayoutUREmail.editText?.text.toString().isValidEmail().second\n                textInputLayoutURMobile.editText?.text?.hashCode() == s.hashCode() -&gt; textInputLayoutURMobile.error = textInputLayoutURMobile.editText?.text.toString().isValidMobileNumber().second\n                textInputLayoutURPassword.editText?.text?.hashCode() == s.hashCode() -&gt; textInputLayoutURPassword.error = textInputLayoutURPassword.editText?.text.toString().isValidPassword().second\n            }\n            checkRequireFieldAndEnableButton()\n        }\n\n        override fun beforeTextChanged(s: CharSequence, start: Int, count: Int, after: Int) {}\n        override fun afterTextChanged(s: Editable) {}\n    }\n\n    private fun checkRequireFieldAndEnableButton() {\n        if (textInputLayoutURFirstName.editText?.text.toString().isValidName().first &amp;&amp; textInputLayoutURLastName.editText?.text.toString().isValidName().first &amp;&amp; textInputLayoutUREmail.editText?.text.toString().isValidEmail().first\n                &amp;&amp; textInputLayoutURMobile.editText?.text.toString().isValidMobileNumber().first &amp;&amp; textInputLayoutURPassword.editText?.text.toString().isValidPassword().first) {\n            buttonUserRegistrationSignUp.isEnabled = true\n            buttonUserRegistrationSignUp.alpha = 1.0f\n        } else {\n            buttonUserRegistrationSignUp.isEnabled = false\n            buttonUserRegistrationSignUp.alpha = 0.5f\n        }\n    }\n</code></pre>\n\n<p>When i am coming back to screen all the inputs data are present but when i am trying to change text or focus listeners are not working.</p>\n"}, {"tags": ["android", "kotlin", "android-edittext", "android-textinputedittext"], "comments": [{"owner": {"reputation": 16268, "user_id": 603270, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cbfe6e57e0fa59928be4898a7be08c5d?s=128&d=identicon&r=PG", "display_name": "shkschneider", "link": "https://stackoverflow.com/users/603270/shkschneider"}, "edited": false, "score": 0, "creation_date": 1546936531, "post_id": 54086400, "comment_id": 95008276, "body": "What type is the Error? Is it Error or Exception?"}], "answers": [{"comments": [{"owner": {"reputation": 1323, "user_id": 368497, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/785ab0ec5c2763808ac1e0aa5224f500?s=128&d=identicon&r=PG", "display_name": "TFennis", "link": "https://stackoverflow.com/users/368497/tfennis"}, "edited": false, "score": 0, "creation_date": 1546929808, "post_id": 54086455, "comment_id": 95005675, "body": "This seems true to me, not sure why this answer is getting negative votes."}, {"owner": {"reputation": 37128, "user_id": 1083093, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/3AgYu.jpg?s=128&g=1", "display_name": "Devrath", "link": "https://stackoverflow.com/users/1083093/devrath"}, "edited": false, "score": 0, "creation_date": 1546929846, "post_id": 54086455, "comment_id": 95005686, "body": "Thats Exactly what is happening, But what is a workaround for this or is it not possible ?"}, {"owner": {"reputation": 1323, "user_id": 368497, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/785ab0ec5c2763808ac1e0aa5224f500?s=128&d=identicon&r=PG", "display_name": "TFennis", "link": "https://stackoverflow.com/users/368497/tfennis"}, "edited": false, "score": 0, "creation_date": 1546929883, "post_id": 54086455, "comment_id": 95005704, "body": "If you&#39;re always setting your text to the same value, you could check in your text watcher to not set it if it&#39;s already at the correct value"}, {"owner": {"reputation": 8266, "user_id": 5305430, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/hxqD2.jpg?s=128&g=1", "display_name": "sushildlh", "link": "https://stackoverflow.com/users/5305430/sushildlh"}, "reply_to_user": {"reputation": 1323, "user_id": 368497, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/785ab0ec5c2763808ac1e0aa5224f500?s=128&d=identicon&r=PG", "display_name": "TFennis", "link": "https://stackoverflow.com/users/368497/tfennis"}, "edited": false, "score": 0, "creation_date": 1546929937, "post_id": 54086455, "comment_id": 95005728, "body": "@TFennis Some people are here to demotivate people. Who just down-vote and never mention why they did. We will not do anything in it."}, {"owner": {"reputation": 8266, "user_id": 5305430, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/hxqD2.jpg?s=128&g=1", "display_name": "sushildlh", "link": "https://stackoverflow.com/users/5305430/sushildlh"}, "reply_to_user": {"reputation": 37128, "user_id": 1083093, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/3AgYu.jpg?s=128&g=1", "display_name": "Devrath", "link": "https://stackoverflow.com/users/1083093/devrath"}, "edited": false, "score": 0, "creation_date": 1546930156, "post_id": 54086455, "comment_id": 95005805, "body": "@Devrath what you trying to achieve? Please share may we can help in it."}, {"owner": {"reputation": 37128, "user_id": 1083093, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/3AgYu.jpg?s=128&g=1", "display_name": "Devrath", "link": "https://stackoverflow.com/users/1083093/devrath"}, "edited": false, "score": 0, "creation_date": 1546930835, "post_id": 54086455, "comment_id": 95006039, "body": "@SushilKumar .... I am changing a value in edit text, It is a phone no field .... Once someone modifies it, i need to append it with <code>+70</code> code along with the value user entered"}, {"owner": {"reputation": 8266, "user_id": 5305430, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/hxqD2.jpg?s=128&g=1", "display_name": "sushildlh", "link": "https://stackoverflow.com/users/5305430/sushildlh"}, "edited": false, "score": 0, "creation_date": 1546931081, "post_id": 54086455, "comment_id": 95006130, "body": "try this one <a href=\"https://stackoverflow.com/a/20824665/5305430\">stackoverflow.com/a/20824665/5305430</a> or i have another one using TextView"}], "tags": [], "owner": {"reputation": 8266, "user_id": 5305430, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/hxqD2.jpg?s=128&g=1", "display_name": "sushildlh", "link": "https://stackoverflow.com/users/5305430/sushildlh"}, "is_accepted": true, "score": 3, "last_activity_date": 1546932364, "last_edit_date": 1546932364, "creation_date": 1546929670, "answer_id": 54086455, "question_id": 54086400, "link": "https://stackoverflow.com/questions/54086400/changing-the-text-in-addtextchangedlistener-listener-of-edit-text-in-android-giv/54086455#54086455", "title": "Changing the text in addTextChangedListener listener of edit text in android gives error", "body": "<p>Changing <code>EditText</code> in <code>TextWatcher</code> is not good idea at all.</p>\n\n<p>When you setting <code>text</code> to <code>editText</code> your <code>TextWatcher</code> will call again . </p>\n\n<p>Note:- And it will goes in <strong>infinite loop</strong>.</p>\n\n<p><strong>Solution for this:-</strong></p>\n\n<p>Use string value as a result in <code>TextWacher</code> and change your <code>ExitText</code> outside text-watcher.</p>\n\n<p>Using <code>TextView</code> you can do like this .....</p>\n\n<p>Create <code>TextView</code> in you layout like below.</p>\n\n<pre><code>&lt;FrameLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"&gt;\n\n\n        &lt;EditText\n            android:id=\"@+id/edit_phone\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:background=\"@drawable/border_edittext\"\n            android:gravity=\"center\"\n            android:inputType=\"number\"\n            android:padding=\"10dp\"\n            android:singleLine=\"true\" /&gt;\n\n\n\n            &lt;TextView\n                android:id=\"@+id/text_phone\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"\n                android:background=\"@drawable/border_edittext\"\n                android:gravity=\"center\"\n                android:inputType=\"number\"\n                android:padding=\"10dp\"\n                android:singleLine=\"true\" /&gt;\n\n\n\n    &lt;/FrameLayout&gt;\n</code></pre>\n\n<p>and use <code>textWatcher</code> and Update your <code>TextView</code> text inside <code>onTextChange()</code> method</p>\n\n<p><strong>Another Solution</strong> :- Create XMl like this </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:orientation=\"horizontal\"\n    android:layout_height=\"wrap_content\"&gt;\n\n    &lt;EditText\n        android:id=\"@+id/code\"\n        android:layout_width=\"50dp\"\n        android:layout_height=\"wrap_content\"\n        android:background=\"@drawable/border_edittext\"\n        android:gravity=\"center\"\n        android:inputType=\"number\"\n        android:padding=\"10dp\"\n        android:text=\"\"\n        android:singleLine=\"true\" /&gt;\n\n    &lt;EditText\n        android:id=\"@+id/mobile\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:background=\"@drawable/border_edittext\"\n        android:gravity=\"center\"\n        android:inputType=\"number\"\n        android:padding=\"10dp\"\n        android:singleLine=\"true\" /&gt;\n\n\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>and update your <code>editText</code> with <code>id</code> <strong>code</strong> in your <code>textWatcher</code> of your <code>editText</code> with <code>id</code> <strong>mobile</strong>.</p>\n"}], "owner": {"reputation": 37128, "user_id": 1083093, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/3AgYu.jpg?s=128&g=1", "display_name": "Devrath", "link": "https://stackoverflow.com/users/1083093/devrath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1750, "favorite_count": 0, "accepted_answer_id": 54086455, "answer_count": 1, "score": 1, "last_activity_date": 1546932364, "creation_date": 1546929415, "last_edit_date": 1546930150, "question_id": 54086400, "link": "https://stackoverflow.com/questions/54086400/changing-the-text-in-addtextchangedlistener-listener-of-edit-text-in-android-giv", "title": "Changing the text in addTextChangedListener listener of edit text in android gives error", "body": "<ul>\n<li>Is it not possible to change the text of <code>EditText</code> in\n<code>afterTextChanged</code></li>\n<li>It gives the error below</li>\n<li>Is there a specific way to change the text</li>\n</ul>\n\n<p><strong>code:</strong></p>\n\n<pre><code>inputEmail.addTextChangedListener(object :TextWatcher{\n            override fun afterTextChanged(s: Editable?) {\n                inputEmail.setText(\"123456\")\n            }\n\n            override fun beforeTextChanged(s: CharSequence?, start: Int, count: Int, after: Int) {\n            }\n\n            override fun onTextChanged(s: CharSequence?, start: Int, before: Int, count: Int) {\n            }\n\n        })\n</code></pre>\n\n<p><strong>Error:</strong></p>\n\n<pre><code>at com.caring2u.organizer.ui.fragments.screen.FrgBookingDetails$setEditTextListeners$4.afterTextChanged(FrgBookingDetails.kt:256)\n        at android.widget.TextView.sendAfterTextChanged(TextView.java:9605)\n        at android.widget.TextView.setText(TextView.java:5496)\n        at android.widget.TextView.setText(TextView.java:5343)\n        at android.widget.EditText.setText(EditText.java:113)\n        at android.widget.TextView.setText(TextView.java:5300)\n</code></pre>\n"}, {"tags": ["java", "android", "kotlin", "android-edittext", "singleton"], "comments": [{"owner": {"reputation": 1082, "user_id": 6903132, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gIEIl.jpg?s=128&g=1", "display_name": "Mahavir Jain", "link": "https://stackoverflow.com/users/6903132/mahavir-jain"}, "edited": false, "score": 0, "creation_date": 1546924821, "post_id": 54085519, "comment_id": 95004241, "body": "Because you are creating new instance of that class each time the method is invoked. <code>MyValidation(text).checkValid()</code> is creating new instance each time for you.You have to create instance globally."}], "answers": [{"comments": [{"owner": {"reputation": 5421, "user_id": 7972699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bED4H.jpg?s=128&g=1", "display_name": "Anmol", "link": "https://stackoverflow.com/users/7972699/anmol"}, "reply_to_user": {"reputation": 812, "user_id": 951917, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/Bogl2.jpg?s=128&g=1", "display_name": "Bulma", "link": "https://stackoverflow.com/users/951917/bulma"}, "edited": false, "score": 0, "creation_date": 1547090607, "post_id": 54085663, "comment_id": 95075086, "body": "Sure if it works do upvote and accept the answer please"}], "tags": [], "owner": {"reputation": 5421, "user_id": 7972699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bED4H.jpg?s=128&g=1", "display_name": "Anmol", "link": "https://stackoverflow.com/users/7972699/anmol"}, "is_accepted": false, "score": 0, "last_activity_date": 1546925443, "last_edit_date": 1546925443, "creation_date": 1546925075, "answer_id": 54085663, "question_id": 54085519, "link": "https://stackoverflow.com/questions/54085519/reduce-instance-of-object-class/54085663#54085663", "title": "Reduce instance of object/class", "body": "<p>For your use case you can use <a href=\"https://kotlinlang.org/docs/tutorials/kotlin-for-py/extension-functionsproperties.html\" rel=\"nofollow noreferrer\">Kotlin's extension Function</a> to check validity of text no need of a separate class to check validity. Extension function will be really convenient to use also.</p>\n\n<p>Write the below code in same place as where u are checking the string validity but out side class body.</p>\n\n<pre><code>fun String.isValidString(): Boolean {\n // use this.length etc to refer to current string\n // Check text here with Regex Pattern\n    &lt;-- TODO  --&gt;\n    // log your String\n    Log.d(\"Your String\", this)\n}\n</code></pre>\n\n<p>then your code will look like :</p>\n\n<pre><code>fun onMyTextChanged(text) {\n   // Show icon error if invalid, Show icon check done if valid\n   val isValid = text.isValidString()\n}\n</code></pre>\n\n<p>Extra:\n<a href=\"https://www.programiz.com/kotlin-programming/extension-functions\" rel=\"nofollow noreferrer\"><strong>Reference</strong></a></p>\n"}], "owner": {"reputation": 812, "user_id": 951917, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/Bogl2.jpg?s=128&g=1", "display_name": "Bulma", "link": "https://stackoverflow.com/users/951917/bulma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546925443, "creation_date": 1546924042, "question_id": 54085519, "link": "https://stackoverflow.com/questions/54085519/reduce-instance-of-object-class", "title": "Reduce instance of object/class", "body": "<p>I have a EditText field and I want to check validation input for this.<br>\nI applied MVVM + Databinding and invoke onTextChanged() method in ViewModel<br>\nSource :</p>\n\n<p>xml</p>\n\n<pre><code>android:onTextChanged=\"@{(text, start, before, count) -&gt; viewModel.onMyTextChanged(text)}\"\n</code></pre>\n\n<p>ViewModel.kt  </p>\n\n<pre><code>fun onMyTextChanged(text) {\n   // Show icon error if invalid, Show icon check done if valid\n   val isValid = MyValidation(text).checkValid()\n}\n</code></pre>\n\n<p>MyValidation.kt</p>\n\n<pre><code>class MyValidation(text: String){\n  fun checkValid(): Boolean {  \n    // Check text here with Regex Pattern\n    &lt;-- TODO  --&gt;\n    // Check instance time of class\n    Log.d(\"INSTANCE\", this.hashCode().toString() )\n  }  \n}\n</code></pre>\n\n<p>Console log: </p>\n\n<pre><code>INSTANCE : 159625389\nINSTANCE : 178364275\nINSTANCE : 190324272\n...\n</code></pre>\n\n<p>Question:</p>\n\n<p>When input text into EditText field , method onMyTextChanged will be called with the execution time = length of input Text.<br>\nTherefore, the instance of MyValidation class also increases. \n( See log )  </p>\n\n<p>I was thinking about using Object instead of Class to make Singleton by static. But I confuse that are there another solution for this case ?</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 3155, "user_id": 10317684, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1vZU7dxLnug/AAAAAAAAAAI/AAAAAAAAATs/NO0fprNnb6s/photo.jpg?sz=128", "display_name": "Ricky Mo", "link": "https://stackoverflow.com/users/10317684/ricky-mo"}, "edited": false, "score": 0, "creation_date": 1546914644, "post_id": 54084383, "comment_id": 95002205, "body": "Do you really need a spin lock? Consider callback function?"}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 5563931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/654d138c9a5d67daa43c168fd1789395?s=128&d=identicon&r=PG&f=1", "display_name": "swdmnd", "link": "https://stackoverflow.com/users/5563931/swdmnd"}, "edited": false, "score": 0, "creation_date": 1546916662, "post_id": 54084568, "comment_id": 95002545, "body": "my code is actually inside a callback function which return the result to another object. can I impement your solution? I am confused on how I should pass the result to the caller. Please see my edit on the question."}, {"owner": {"reputation": 3155, "user_id": 10317684, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1vZU7dxLnug/AAAAAAAAAAI/AAAAAAAAATs/NO0fprNnb6s/photo.jpg?sz=128", "display_name": "Ricky Mo", "link": "https://stackoverflow.com/users/10317684/ricky-mo"}, "reply_to_user": {"reputation": 101, "user_id": 5563931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/654d138c9a5d67daa43c168fd1789395?s=128&d=identicon&r=PG&f=1", "display_name": "swdmnd", "link": "https://stackoverflow.com/users/5563931/swdmnd"}, "edited": false, "score": 0, "creation_date": 1546917542, "post_id": 54084568, "comment_id": 95002708, "body": "As you want to return the result directly in your function, it must involve blocking the thread. If it is running on the UI thread, you shouldn&#39;t do so. Yet, if it is NOT running on the UI thread you can take a look at <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#wait(long)\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/7/docs/api/java/lang/Object.h&zwnj;&#8203;tml#wait(long)</a>"}, {"owner": {"reputation": 101, "user_id": 5563931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/654d138c9a5d67daa43c168fd1789395?s=128&d=identicon&r=PG&f=1", "display_name": "swdmnd", "link": "https://stackoverflow.com/users/5563931/swdmnd"}, "edited": false, "score": 0, "creation_date": 1546917556, "post_id": 54084568, "comment_id": 95002710, "body": "thank you for your answer. I figured out that I can make the Runnable runs on another thread after I read your answer. For now, I am using Timer.schedule(). I don&#39;t know if this is efficient for this case."}, {"owner": {"reputation": 101, "user_id": 5563931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/654d138c9a5d67daa43c168fd1789395?s=128&d=identicon&r=PG&f=1", "display_name": "swdmnd", "link": "https://stackoverflow.com/users/5563931/swdmnd"}, "edited": false, "score": 0, "creation_date": 1546917686, "post_id": 54084568, "comment_id": 95002739, "body": "The callback is called from a javascript interface attached to a webview, so I guess it&#39;s not on the UI thread."}], "tags": [], "owner": {"reputation": 3155, "user_id": 10317684, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1vZU7dxLnug/AAAAAAAAAAI/AAAAAAAAATs/NO0fprNnb6s/photo.jpg?sz=128", "display_name": "Ricky Mo", "link": "https://stackoverflow.com/users/10317684/ricky-mo"}, "is_accepted": true, "score": 3, "last_activity_date": 1546915348, "creation_date": 1546915348, "answer_id": 54084568, "question_id": 54084383, "link": "https://stackoverflow.com/questions/54084383/handler-postdelayed-cannot-update-boolean-variable/54084568#54084568", "title": "handler.postDelayed cannot update boolean variable", "body": "<p>Since you are using a spin lock to block the thread, the <code>Runnable</code> posted on the same thread has no chances to execute (the thread is always busy doing the <code>while</code> loop)</p>\n\n<p>Instead of using <code>while</code> loop to detect variable change, you should write a callback function to do the follow up action and call it when timeout or your service produced the result.</p>\n\n<pre><code>fun callback(result : YourResultType?)\n{\n   if(result != null)\n   {\n       //handle the result produced by the service\n   }\n   else\n   {\n       //timeout, do what ever you want to follow up\n   }\n}\n\nvar r = Runnable {\n    Log.d(\"Timeout\", \"timeout\")\n    callback(null)\n}\n\nval handler = Handler()\nhandler.postDelayed(r,1000)\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 5563931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/654d138c9a5d67daa43c168fd1789395?s=128&d=identicon&r=PG&f=1", "display_name": "swdmnd", "link": "https://stackoverflow.com/users/5563931/swdmnd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 54084568, "answer_count": 1, "score": 0, "last_activity_date": 1546916595, "creation_date": 1546913329, "last_edit_date": 1546916595, "question_id": 54084383, "link": "https://stackoverflow.com/questions/54084383/handler-postdelayed-cannot-update-boolean-variable", "title": "handler.postDelayed cannot update boolean variable", "body": "<p>I'm trying to make a code that wait until a result presents (provided by a service) or a second has passed.</p>\n\n<p>My code can detect a change in result variable but cannot detect a change made to \"waiting\" variable. I update waiting variable in a runnable, executed with Handler.postDelayed(). I've tried using @Volatile, but still no luck.</p>\n\n<pre><code>var waiting = true\nvar r = Runnable {\n    waiting=false\n    Log.d(\"Timeout\", \"timeout\")\n}\n\nval handler = Handler()\nhandler.postDelayed(r,1000)\nwhile(returnCall==null &amp;&amp; waiting){continue;}\n// handler.removeCallbacksAndMessages(null)\n</code></pre>\n\n<p>I expected an object from a service or skip the process after waiting for a second. The code never goes beyond the while statement. \"timeout\" is never printed to Logcat.</p>\n\n<p>If returnCall has been assigned, the code does proceed AND the Runnable is executed as expected (prints timeout to Logcat).</p>\n\n<p>EDIT:\nI use this code inside a callback function</p>\n\n<pre><code>var jsInterfaceCallback = object : MyJsInterface.myJsInterfaceCallback(){\n    override fun onCommand (command : String, data : HashMap&lt;String, Any&gt;) : MutableMap&lt;String, Any&gt;{\n        returnCall = null\n        // Pass intent to service\n\n        var waiting = true\n        var r = Runnable {\n            waiting=false\n            Log.d(\"Timeout\", \"timeout\")\n        }\n\n        val handler = Handler()\n        handler.postDelayed(r,1000)\n        while(returnCall==null &amp;&amp; waiting){continue;}\n        // handler.removeCallbacksAndMessages(null)\n        if(returnCall != null){\n            return returnCall!!\n        }\n        return mutableMapOf()\n    }\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 0, "creation_date": 1546910316, "post_id": 54084036, "comment_id": 95001351, "body": "What did you pass into your secondary constructor for <code>presetCode</code>?  Please read <a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1983, "user_id": 10824655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzkaE.jpg?s=128&g=1", "display_name": "chronoxor", "link": "https://stackoverflow.com/users/10824655/chronoxor"}, "is_accepted": false, "score": 1, "last_activity_date": 1546912678, "creation_date": 1546912678, "answer_id": 54084309, "question_id": 54084036, "link": "https://stackoverflow.com/questions/54084036/secondary-constructor-param/54084309#54084309", "title": "Secondary Constructor param", "body": "<p>Here is a solution I found based on your class design which requires single <code>AnotherObject</code> construction per <code>MyObject</code> instance:</p>\n\n<pre><code>class MyObject\n{\n    constructor(s1: String, s2: String, s3: String)\n    {\n        string1 = s1\n        string2 = s2\n        string3 = s3\n        anotherObject = AnotherObject(string1)\n    }\n\n    constructor(presetCode: PresetCode)\n    {\n        when (presetCode)\n        {\n            PresetCode.Code1 -&gt;\n            {\n                string1 = \"aaa\"\n                string2 = \"bbb\"\n                string3 = \"ccc\"\n            }\n            else -&gt;\n            {\n                string1 = \"\"\n                string2 = \"\"\n                string3 = \"\"\n            }\n        }\n        anotherObject = AnotherObject(string1)\n    }\n\n    var string1: String\n    var string2: String\n    var string3: String\n    var anotherObject: AnotherObject\n}\n</code></pre>\n\n<p>Hope this helps.</p>\n"}, {"comments": [{"owner": {"reputation": 805, "user_id": 1547324, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/45f9d6fc646645d9d9aeb1bd2ada060f?s=128&d=identicon&r=PG", "display_name": "ausgeorge", "link": "https://stackoverflow.com/users/1547324/ausgeorge"}, "edited": false, "score": 0, "creation_date": 1547381859, "post_id": 54088696, "comment_id": 95166463, "body": "Thanks gidds, I tried this today and it worked fantastically!"}], "tags": [], "owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "is_accepted": true, "score": 2, "last_activity_date": 1546939351, "creation_date": 1546939351, "answer_id": 54088696, "question_id": 54084036, "link": "https://stackoverflow.com/questions/54084036/secondary-constructor-param/54088696#54088696", "title": "Secondary Constructor param", "body": "<p>One option is to replace the secondary constructor with an <code>invoke()</code> method on the companion object:</p>\n\n<pre><code>class MyObject(var string1: String, var string2: String, var string3: String) {\n    companion object {\n        operator fun invoke(presetCode: PresetCode) = when (presetCode) {\n            PresetCode.Code1 -&gt; MyObject(\"aaa\", \"bbb\", \"ccc\")\n            else -&gt; MyObject(\"\", \"\", \"\")\n        }\n    }\n\n    var anotherObject = AnotherObject(string1)\n}\n</code></pre>\n\n<p>In use, it looks just like a constructor call, e.g.:</p>\n\n<pre><code>val o = MyObject(PresetCode.Code1)\n</code></pre>\n\n<p>This approach is simple, concise, and very flexible.\u00a0 (For example, it could return a cached instance instead of creating a new one.)</p>\n"}], "owner": {"reputation": 805, "user_id": 1547324, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/45f9d6fc646645d9d9aeb1bd2ada060f?s=128&d=identicon&r=PG", "display_name": "ausgeorge", "link": "https://stackoverflow.com/users/1547324/ausgeorge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 54088696, "answer_count": 2, "score": 0, "last_activity_date": 1546939351, "creation_date": 1546910073, "question_id": 54084036, "link": "https://stackoverflow.com/questions/54084036/secondary-constructor-param", "title": "Secondary Constructor param", "body": "<p>Can someone please help me work this out? My object had 3 main parameters, all Strings. I now want to add a secondary constructor with an single emum parameter, which in turn would set each of the 3 original params, as follows;</p>\n\n<pre><code>class MyObject(var string1: String, var string2: String, var string3: String)\n{\n    constructor(presetCode: PresetCode ) : this(\"\", \"\", \"\")\n    {\n      when (presetCode)\n      {\n       PresetCode.Code1 -&gt;\n        {\n         string1 = \"aaa\"\n         string2 = \"bbb\"\n         string3 = \"ccc\"\n        }\n       }\n      }\n\n   var anotherObject = AnotherObject(string1)\n\n}\n</code></pre>\n\n<p>The issue is AnotherObject(string1) isn't working, as string1 is just an empty string. </p>\n\n<p>how can I set the 3 params using this secondary constructor and then successfully call AnotherObject(string1)?\nthanks</p>\n"}, {"tags": ["android", "android-studio", "kotlin"], "comments": [{"owner": {"reputation": 55, "user_id": 10799034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UDCZV.jpg?s=128&g=1", "display_name": "Gloat", "link": "https://stackoverflow.com/users/10799034/gloat"}, "edited": false, "score": 0, "creation_date": 1546909590, "post_id": 54083648, "comment_id": 95001189, "body": "Okay edit, I changed the adminpage variable to be a string      var flowSales: String = &quot;&quot;  class adminPage : AppCompatActivity() {     override fun onCreate(savedInstanceState: Bundle?) {         super.onCreate(savedInstanceState)         setContentView(R.layout.activity_admin_page)          //do this function when button is clicked         upDate.setOnClickListener{             //edit the the variable to fit what&#39;s in editText             flowSales = editMeFs.toString()         }"}, {"owner": {"reputation": 55, "user_id": 10799034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UDCZV.jpg?s=128&g=1", "display_name": "Gloat", "link": "https://stackoverflow.com/users/10799034/gloat"}, "edited": false, "score": 0, "creation_date": 1546909672, "post_id": 54083648, "comment_id": 95001210, "body": "Now I get this showing in the TextView after pressing the update button android.support.v7.widget.AppCompatEditText{68a90a8VFED..CL. .F...... 167,330-587,421 #7f)8004a app:id/editMeFs}"}], "answers": [{"tags": [], "owner": {"reputation": 55, "user_id": 10799034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UDCZV.jpg?s=128&g=1", "display_name": "Gloat", "link": "https://stackoverflow.com/users/10799034/gloat"}, "is_accepted": false, "score": 0, "last_activity_date": 1546910062, "creation_date": 1546910062, "answer_id": 54084034, "question_id": 54083648, "link": "https://stackoverflow.com/questions/54083648/use-edittext-to-change-textview-value-on-another-activity-backoffice/54084034#54084034", "title": "use EditText to change TextView value on another activity (backoffice)", "body": "<pre><code>var flowSales: String = \"\"\n\nclass adminPage : AppCompatActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_admin_page)\n\n        //do this function when button is clicked\n        upDate.setOnClickListener{\n            //edit the the variable to fit what's in editText\n            flowSales = editMeFs.text.toString()\n        }\n    }\n\n}\n</code></pre>\n\n<p>user activity</p>\n\n<pre><code>class Activity2 : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_activity2)\n        setSupportActionBar(toolbar)\n\n        fab.setOnClickListener { view -&gt;\n            Snackbar.make(view, \"Replace with your own action\", Snackbar.LENGTH_LONG)\n                .setAction(\"Action\", null).show()\n        }\n        //call variable from admin page and set as flowersales text\n        flowersales.text = flowSales\n    }\n}\n</code></pre>\n\n<p>this works</p>\n"}, {"tags": [], "owner": {"reputation": 782, "user_id": 9657183, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OUKg8fgUlSM/AAAAAAAAAAI/AAAAAAAAAN0/LjmhQvBoUsU/photo.jpg?sz=128", "display_name": "Cafer Mert Ceyhan", "link": "https://stackoverflow.com/users/9657183/cafer-mert-ceyhan"}, "is_accepted": true, "score": 1, "last_activity_date": 1546927354, "creation_date": 1546927354, "answer_id": 54086000, "question_id": 54083648, "link": "https://stackoverflow.com/questions/54083648/use-edittext-to-change-textview-value-on-another-activity-backoffice/54086000#54086000", "title": "use EditText to change TextView value on another activity (backoffice)", "body": "<p>Firstly, always class name start with upper case. This is the truth;</p>\n\n<pre><code>class AdminPage: AppCompatActivity()\n</code></pre>\n\n<p>If we come to your problem, you can solve this way;</p>\n\n<pre><code>lateinit var flowSales: String\n\nclass AdminPage : AppCompatActivity() {\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_admin_page)\n\n    upDate.setOnClickListener{\n        flowSales = editMeFs.text.toString()\n    }\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 10799034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UDCZV.jpg?s=128&g=1", "display_name": "Gloat", "link": "https://stackoverflow.com/users/10799034/gloat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "accepted_answer_id": 54086000, "answer_count": 2, "score": 0, "last_activity_date": 1546927354, "creation_date": 1546906331, "last_edit_date": 1546916721, "question_id": 54083648, "link": "https://stackoverflow.com/questions/54083648/use-edittext-to-change-textview-value-on-another-activity-backoffice", "title": "use EditText to change TextView value on another activity (backoffice)", "body": "<p>I am wanting to create an Admin backoffice for my app, where I can update text in other activities that are set as TextView(should they be EditText)?\nI have an EditText box in my Admin activity, and have set a button that \"should\" initialize the copying of current contents in EditText and save it to a variable \"flowSales\", I than try to grab the variable \"flowSales\" in my customer activity and .setText to my TextView. Any help would be appreciated even if it's a simple, you are doing it wrong.</p>\n\n<p>I am able to find variable \"flowSales\" in my second activity, at this time my \"var flowSales = Editable\" returns no companion for Editable.</p>\n\n<p>adminPage.kt (back office) editMeFs is the EditText box, and flowSales is a variable I created so I can pull it to second activity</p>\n\n<pre><code>var flowSales = Editable\n\nclass adminPage : AppCompatActivity() {\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_admin_page)\n\n    upDate.setOnClickListener{\n        flowSales = editMeFs.text\n    }\n  }\n}\n</code></pre>\n\n<p>activity2.kt (user page) flowersales is the TextView to be updated</p>\n\n<pre><code>class Activity2 : AppCompatActivity() {\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_activity2)\n    setSupportActionBar(toolbar)\n\n    fab.setOnClickListener { view -&gt;\n        Snackbar.make(view, \"Replace with your own action\", Snackbar.LENGTH_LONG)\n            .setAction(\"Action\", null).show()\n    }\n\n    flowersales.setText(flowSales)\n  }\n}\n</code></pre>\n\n<p>So right now with <code>var flowSales = Editable</code> I am unable to run the app, returning error </p>\n\n<pre><code>\"\\adminPage.kt: (9, 17): Classifier 'Editable' does not have a companion object, and thus must be initialized here\", \nif i set \"= null\" or \"= 0\"\n</code></pre>\n\n<p>I can run my app and click the button on admin page, however when i go to the Activity 2 it has not updated the text that i had put into EditText.</p>\n"}, {"tags": ["java", "kotlin", "android-dialogfragment"], "answers": [{"comments": [{"owner": {"reputation": 132, "user_id": 9234930, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5CRCBS8AsKw/AAAAAAAAAAI/AAAAAAAAAA8/QHKCiF5_-ic/photo.jpg?sz=128", "display_name": "Youn Tivoli", "link": "https://stackoverflow.com/users/9234930/youn-tivoli"}, "edited": false, "score": 0, "creation_date": 1546978683, "post_id": 54086296, "comment_id": 95031026, "body": "Thanks this answer gave me idea about the Subject."}, {"owner": {"reputation": 10532, "user_id": 216724, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/099342755dcbc16ee2df1158b2f35038?s=128&d=identicon&r=PG", "display_name": "Sedate Alien", "link": "https://stackoverflow.com/users/216724/sedate-alien"}, "edited": false, "score": 0, "creation_date": 1557801897, "post_id": 54086296, "comment_id": 98876909, "body": "Is there a way to find out what the limitations on Kotlin scripts are? I&#39;m bumping up against some &quot;Expression is inaccessible from a nested class&quot; errors in a kts file and would like to know if it&#39;s me or Kotlin."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 10, "last_activity_date": 1546928874, "creation_date": 1546928874, "answer_id": 54086296, "question_id": 54083639, "link": "https://stackoverflow.com/questions/54083639/what-is-the-different-between-kotlin-file-class-and-kotlin-script/54086296#54086296", "title": "what is the different between Kotlin File/Class and Kotlin Script", "body": "<p>In a Kotlin source <code>*.kt</code> file, you can place top-level declarations, such as types and top-level functions and properties, but not code statements that are not nested into some declarations.</p>\n\n<p>A Kotlin Script <code>*.kts</code> file, on contrary, contains code statements on the top level, without any nesting. It is allowed to contain types, too, but with some limitations similar to those placed on nested type declarations.</p>\n"}], "owner": {"reputation": 132, "user_id": 9234930, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5CRCBS8AsKw/AAAAAAAAAAI/AAAAAAAAAA8/QHKCiF5_-ic/photo.jpg?sz=128", "display_name": "Youn Tivoli", "link": "https://stackoverflow.com/users/9234930/youn-tivoli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2023, "favorite_count": 1, "accepted_answer_id": 54086296, "answer_count": 1, "score": 6, "last_activity_date": 1591275799, "creation_date": 1546906252, "question_id": 54083639, "link": "https://stackoverflow.com/questions/54083639/what-is-the-different-between-kotlin-file-class-and-kotlin-script", "title": "what is the different between Kotlin File/Class and Kotlin Script", "body": "<p>i programming <strong>kotlin</strong> language to some weeks, and i always start with new <strong>File/Class</strong>, and I've noticed lately to <strong>kotlin</strong> <strong>Script</strong> in the menu and i ask now what's different between the <strong>Script</strong> and the <strong>File</strong> in <strong>kotlin</strong></p>\n"}, {"tags": ["android", "kotlin", "dagger-2"], "answers": [{"comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1546993552, "post_id": 54084331, "comment_id": 95036178, "body": "whoops I should have removed the provides for the <code>DataStore</code> after using <code>@Singleton @Inject</code> on the class itself"}], "tags": [], "owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "is_accepted": true, "score": 0, "last_activity_date": 1546993526, "last_edit_date": 1546993526, "creation_date": 1546912847, "answer_id": 54084331, "question_id": 54083591, "link": "https://stackoverflow.com/questions/54083591/cant-make-dagger2-inject-retrofit-apis-into-singleton-object-and-then-that-sin/54084331#54084331", "title": "Cant make dagger2 inject retrofit api&#39;s into singleton object, and then that singleton object into fragments", "body": "<pre><code>    @Singleton class DataStore @Inject constructor(\n        private val userApi: UserApi\n    ) {\n    }\n\n    class Fragment1 : Fragment() {\n      @Inject lateinit var dataStore: DataStore\n      @Inject lateinit var testApi: TestApi\n    }\n\nclass MainApplication : Application() {\n\n    lateinit var appComponent: AppComponent\n\n    override fun onCreate() {\n        super.onCreate()\n        StateSaver.setEnabledForAllActivitiesAndSupportFragments(this, true)\n\n        appComponent = DaggerAppComponent.builder()\n            .userModule(UserModule(this))\n            .retrofitModule(RetrofitModule())\n            .build()\n        }\n</code></pre>\n\n<p>AppComponent</p>\n\n<pre><code>@Singleton\n@Component(modules = [RetrofitModule::class, UserModule::class])\ninterface AppComponent {\n\n    fun inject(mainActivity: MainActivity)\n\n    fun inject(formFragment: formFragment)\n\n    fun userApi(): UserApi\n\n    fun testApi(): TestApi\n\n}\n</code></pre>\n\n<p>UserModule</p>\n\n<pre><code>    @Module\n    class UserModule(\n        val mainApplication: MainApplication\n    ) {\n      @Provides\n      fun app(): MainApplication = mainApplication\n\n      // @Singleton\n      // @Provides\n      // fun provideDataStore() : DataStore = DataStore(mainApplication)\n    }\n</code></pre>\n\n<p>RetrofitModule</p>\n\n<pre><code>    @Module\n    class RetrofitModule {\n\n        private val TAG: String = RetrofitModule::class.java.name\n\n        @Singleton\n        @Provides\n        fun provideRetrofit() : Retrofit {\n            Log.e(TAG, \"Creating retrofit ...\")\n            val httpClient = OkHttpClient.Builder()\n                .addInterceptor {\n                    val request = it.request()\n                    if (BuildConfig.DEBUG) {\n                        Log.d(TAG, \"${request.method()}: ${request.url()}\")\n                    }\n\n                    it.proceed(request)\n               }\n                .build()\n\n            return Retrofit.Builder()\n                .client(httpClient)\n                .baseUrl(\"http://192.168.0.13:3000/\")\n        .addCallAdapterFactory(RxJava2CallAdapterFactory.createWithScheduler(Schedulers.io()))\n        .addConverterFactory(JacksonConverterFactory.create(jacksonObjectMapper()))\n        .build()\n        }\n\n        @Provides\n        @Singleton\n        fun provideUserApi(retrofit: Retrofit) : UserApi {\n            return retrofit.create(UserApi::class.java)\n        }\n\n        @Provides\n        @Singleton\n        fun provideTestApi(retrofit: Retrofit) : TestApi {\n            return retrofit.create(TestApi::class.java)\n        }\n   }\n</code></pre>\n\n<p>DataStore</p>\n\n<pre><code>    @Singleton class DataStore @Inject constructor(\n        application: MainApplication\n    ) {\n        @Inject\n        lateinit var userApi: userApi\n        ...\n</code></pre>\n\n<p>FormFragment</p>\n\n<pre><code>    class FormFragment : Fragment() {\n\n       @Inject\n       lateinit var dataStore: DataStore\n\n       @Inject\n       lateinit var testApi: TestApi\n\n       override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n           super.onViewCreated(view, savedInstanceState)\n           val application = requireActivity().application as MainApplication\n\n           application.appComponent.inject(this)\n       }\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 9028622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0040b55c79ff0d4cc4c78db51fb110ed?s=128&d=identicon&r=PG&f=1", "display_name": "ivan", "link": "https://stackoverflow.com/users/9028622/ivan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "accepted_answer_id": 54084331, "answer_count": 1, "score": 1, "last_activity_date": 1546993526, "creation_date": 1546905833, "question_id": 54083591, "link": "https://stackoverflow.com/questions/54083591/cant-make-dagger2-inject-retrofit-apis-into-singleton-object-and-then-that-sin", "title": "Cant make dagger2 inject retrofit api&#39;s into singleton object, and then that singleton object into fragments", "body": "<p>What I need is:\nTo have singleton object DataStore\nDataStore will do http request, so it needs Retrofit apis in it, e.g (UserApi -- that is retrofit interface)</p>\n\n<p>Fragments and activities will contain DataStore, but they can also have some other Api's</p>\n\n<p>example of concept that I need:</p>\n\n<pre><code>    class DataStore {\n      @Inject lateinit var userApi: UserApi\n    }\n\n    class Fragment1 : Fragment() {\n      @Inject lateinit var dataStore: DataStore\n      @Inject lateinit var testApi: TestApi\n    }\n</code></pre>\n\n<p>I managed to inject api into ViewModel which was created via factory, but I need singleton data store, and I know that application dependency is part of the problem. Also there seems to be issue with injecting userApi into FormFragment.</p>\n\n<p>Here is what I have</p>\n\n<p>MainApplication</p>\n\n<pre><code>class MainApplication : Application() {\n\nlateinit var appComponent: AppComponent\n\noverride fun onCreate() {\n    super.onCreate()\n    StateSaver.setEnabledForAllActivitiesAndSupportFragments(this, true)\n\n    appComponent = DaggerAppComponent.builder()\n        .userModule(UserModule(this))\n        .retrofitModule(RetrofitModule())\n        .build()\n    }\n</code></pre>\n\n<p>AppComponent</p>\n\n<pre><code>    @Singleton\n    @Component(modules = [RetrofitModule::class, UserModule::class])\n    interface AppComponent {\n\n    fun inject(mainActivity: MainActivity)\n\n    fun inject(formFragment: formFragment)\n\n    fun inject(dataStore: DataStore)\n\n    fun userApi(): UserApi\n\n    fun testApi(): TestApi\n</code></pre>\n\n<p>}</p>\n\n<p>UserModule</p>\n\n<pre><code>    @Module\n    class UserModule(var mainApplication: MainApplication) {\n\n      @Singleton\n      @Provides\n      fun provideDataStore() : DataStore = DataStore(mainApplication)\n    }\n</code></pre>\n\n<p>RetrofitModule</p>\n\n<pre><code>    @Module\n    class RetrofitModule {\n\n        private val TAG: String = RetrofitModule::class.java.simpleName\n\n        @Singleton\n        @Provides\n        fun provideRetrofit() : Retrofit {\n            Log.e(TAG, \"Creating retrofit ...\")\n            val httpClient = OkHttpClient.Builder()\n                .addInterceptor {\n                    val request = it.request()\n                    if (BuildConfig.DEBUG) {\n                        Log.d(TAG, \"${request.method()}: ${request.url()}\")\n                    }\n\n                    it.proceed(request)\n               }\n                .build()\n\n            return Retrofit.Builder()\n                .client(httpClient)\n                .baseUrl(\"http://192.168.0.13:3000\")\n        .addCallAdapterFactory(RxJava2CallAdapterFactory.createWithScheduler(Schedulers.io()))\n        .addConverterFactory(JacksonConverterFactory.create(jacksonObjectMapper()))\n        .build()\n        }\n\n        @Provides\n        fun provideUserApi(retrofit: Retrofit) : UserApi {\n            return retrofit.create(UserApi::class.java)\n        }\n\n        @Provides\n        fun provideTestApi(retrofit: Retrofit) : TestApi {\n            return retrofit.create(TestApi::class.java)\n        }\n   }\n</code></pre>\n\n<p>DataStore</p>\n\n<pre><code>    class DataStore @Inject constructor(application: MainApplication) {\n\n        init {\n           application.appComponent.inject(this)\n        }\n\n        @Inject\n        lateinit var userApi: userApi\n        ...\n</code></pre>\n\n<p>FormFragment</p>\n\n<pre><code>    class FormFragment : Fragment() {\n\n       @Inject\n       lateinit var dataStore: DataStore\n\n       @Inject\n       lateinit var testApi: TestApi\n\n       override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n           super.onViewCreated(view, savedInstanceState)\n           val application = requireActivity().application as MainApplication\n\n           application.appComponent.inject(this)\n       }\n</code></pre>\n\n<p>I'm getting\n<code>MainApplication cannot be provided without an @Inject constructor or an @Provides-annotated method</code> at DataStore </p>\n\n<p>If I remove <code>var mainApplication</code> from DataStore, then I get error that TestApi cannot be provided without an @Inject constructor .. at FormFragment</p>\n"}, {"tags": ["android", "kotlin", "android-notifications"], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 11219784, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pfr1Pw9r8zk/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMbSoAVq1g4ZdIO4itmDdhDwV7cUQ/mo/photo.jpg?sz=128", "display_name": "Myrick Chow", "link": "https://stackoverflow.com/users/11219784/myrick-chow"}, "is_accepted": true, "score": 1, "last_activity_date": 1588941697, "creation_date": 1588941697, "answer_id": 61679396, "question_id": 54082631, "link": "https://stackoverflow.com/questions/54082631/messagingstyle-not-displaying-text/61679396#61679396", "title": "MessagingStyle Not Displaying Text", "body": "<p><a href=\"https://i.stack.imgur.com/yotVj.gif\" rel=\"nofollow noreferrer\">This is the behavior of historic message</a></p>\n\n<p>Historic message is not normally shown at the notification. It is a special message that is only shown when user is replying through a RemoteInput. See the image above to see the behaviour. It should only be used when the message is not the main subject of the notification but may give context to a conversation.</p>\n\n<p>Reference: <a href=\"https://itnext.io/android-messagingstyle-notification-as-clear-as-possible-1847f809ad59\" rel=\"nofollow noreferrer\">Android MessagingStyle Notification As Clear As Possible </a></p>\n"}], "owner": {"reputation": 1186, "user_id": 1434047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abaa451e2b93ad55c9ff5107be30b5a1?s=128&d=identicon&r=PG", "display_name": "Bink", "link": "https://stackoverflow.com/users/1434047/bink"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 1, "accepted_answer_id": 61679396, "answer_count": 1, "score": 3, "last_activity_date": 1588941697, "creation_date": 1546899305, "last_edit_date": 1547057487, "question_id": 54082631, "link": "https://stackoverflow.com/questions/54082631/messagingstyle-not-displaying-text", "title": "MessagingStyle Not Displaying Text", "body": "<p>New to Android development and I\u2019m trying out the latest <code>addHistoricMessage</code>, and I\u2019m missing something because it\u2019s not displaying anything.  On rare occasion the <code>addMessage</code> text is displayed, but the <code>addHistoricMessage</code> is never displayed. <code>addMessage</code> works consistently when using <code>NotificationCompat</code>, but <code>NotificationCompat</code> doesn\u2019t appear to have <code>addHistoricMessage</code>.</p>\n\n<p>Any thoughts appreciated - using <code>androidx.appcompat:appcompat:1.0.2</code> and <code>compileSdkVersion</code> and <code>targetSdkVersion</code> are both 28.</p>\n\n<p>An example of what I\u2019m seeing is:</p>\n\n<p><a href=\"https://i.stack.imgur.com/RxWgE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RxWgE.png\" alt=\"Notification without MessagingStyle messages\"></a></p>\n\n<p>Test button that calls notification:</p>\n\n<pre><code>fun test(view: View) {\n    val job = GlobalScope.launch {\n        val repository = DataRepository.getInstance(Db.getDb(this@MainActivity))\n\n        AlarmReceiver().notifyTest(\n                this@MainActivity,\n                repository.upcomingDetail(9),\n                arrayListOf(\"Hi!\", \"Miss you!\", \"Hello!\")\n        )\n    }\n}\n</code></pre>\n\n<p>Notification methods and related (less important code removed):</p>\n\n<pre><code>fun notifyTest(context: Context, upcoming: UpcomingDetail, top3Sent: List&lt;String&gt;?) {\n    //...\n\n    @TargetApi(Build.VERSION_CODES.P)\n    when (Build.VERSION.SDK_INT) {\n        in 1..27 -&gt; {\n            with(NotificationManagerCompat.from(context)) {\n                notify(upcoming.id.toInt(), legacyNotificationBuilder(\n                        context,\n                        upcoming,\n                        noteIntent,\n                        contentPending,\n                        disablePending,\n                        deletePending,\n                        postponePending,\n                        top3Sent\n                ).build())\n            }\n        }\n        else -&gt; context.getSystemService(NotificationManager::class.java)\n                .notify(upcoming.id.toInt(), notificationBuilder(\n                        context,\n                        upcoming,\n                        noteIntent,\n                        contentPending,\n                        disablePending,\n                        deletePending,\n                        postponePending,\n                        top3Sent\n                ).build())\n    }\n}\n\n@RequiresApi(Build.VERSION_CODES.P)\nprivate fun notificationBuilder(\n        context: Context,\n        upcoming: UpcomingDetail,\n        noteIntent: Intent,\n        contentPending: PendingIntent,\n        deletePending: PendingIntent,\n        disablePending: PendingIntent,\n        postponePending: PendingIntent,\n        top3Sent: List&lt;String&gt;?\n): Notification.Builder {\n    val recipient: android.app.Person = android.app.Person.Builder().setName(\"Darren\").setImportant(true).build()\n    val you: android.app.Person? = null\n\n    val messageStyle = Notification.MessagingStyle(recipient)\n    val message1 = Notification.MessagingStyle.Message(\"Hello!\", Instant.now().minusSeconds(10 * 60).toEpochMilli(), recipient)\n    messageStyle.addHistoricMessage(message1)\n    messageStyle.addMessage(Notification.MessagingStyle.Message(\"Hi\", Instant.now().toEpochMilli(), recipient))\n\n    val remoteInput: android.app.RemoteInput = android.app.RemoteInput.Builder(upcoming.id.toString()).run {\n        top3Sent?.let { setChoices(top3Sent.toTypedArray()) }\n        build()\n    }\n\n    //...\n\n    val inputAction = Notification.Action.Builder(0, context.getString(R.string.button_edit), inputPending).run {\n        addRemoteInput(remoteInput)\n        build()\n    }\n\n    return Notification.Builder(context, \"Input\").apply {\n        setSmallIcon(R.drawable.ic_stat)\n        style = messageStyle\n        setAutoCancel(true)\n        setCategory(Notification.CATEGORY_REMINDER)\n        setColor(ContextCompat.getColor(context, R.color.secondaryDarkColor))\n        setContentIntent(contentPending)\n        setDeleteIntent(deletePending)\n        setGroup(\"notifications\")\n        setOnlyAlertOnce(true)\n        setVisibility(Notification.VISIBILITY_PRIVATE)\n        addAction(inputAction)\n    }\n}\n</code></pre>\n"}, {"tags": ["spring-boot", "kotlin", "rx-java", "reactor-netty"], "comments": [{"owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 0, "creation_date": 1546936163, "post_id": 54082518, "comment_id": 95008112, "body": "If you go to their <a href=\"https://projectreactor.io/docs/core/release/api/index.html\" rel=\"nofollow noreferrer\">docs</a> and start typing in <code>Replay</code> into the search box, see what you get."}, {"owner": {"reputation": 65, "user_id": 9310431, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LjYAPEK1EnA/AAAAAAAAAAI/AAAAAAAALUM/fR8OqexdKgE/photo.jpg?sz=128", "display_name": "carlos sanchez", "link": "https://stackoverflow.com/users/9310431/carlos-sanchez"}, "reply_to_user": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 0, "creation_date": 1546962922, "post_id": 54082518, "comment_id": 95023122, "body": "my bad, thanks! There is a ReplayProcessor."}], "owner": {"reputation": 65, "user_id": 9310431, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LjYAPEK1EnA/AAAAAAAAAAI/AAAAAAAALUM/fR8OqexdKgE/photo.jpg?sz=128", "display_name": "carlos sanchez", "link": "https://stackoverflow.com/users/9310431/carlos-sanchez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 428, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1546903037, "creation_date": 1546898559, "last_edit_date": 1546903037, "question_id": 54082518, "link": "https://stackoverflow.com/questions/54082518/what-is-the-equivalent-to-replaysubject-rxjava-in-reactor-for-spring-webflux", "title": "What is the equivalent to ReplaySubject (RxJava) in Reactor for spring webflux?", "body": "<p>What is the equivalent to ReplaySubject (RxJava) in Reactor for spring webflux?.</p>\n\n<p>I need a hot observable channel who can have N subscribers and save the previous published elements like ReplaySubject in rxJava. \nThanks for your comments, im using Spring webflux. </p>\n\n<p>I dont find any like ReplaySubject in Reactor.</p>\n\n<p>If there is no implementation of ReplaySubject, how could i implement?, i have some code like: </p>\n\n<pre><code>class ReplayFlux&lt;T&gt; {\nprivate val elements: List&lt;T&gt; = emptyList()\nprivate val currentSubscriptions: List&lt;FluxSink&lt;T&gt;&gt; = emptyList()\n\nfun publish(element: T){\n    elements.plus(element)\n    currentSubscriptions.forEach { \n        it.next(element)\n    }\n}\n\nfun subscribe(): Flux&lt;T&gt;{\n    return Flux.create {fluxSink -&gt; \n        currentSubscriptions.plus(fluxSink)\n        elements.forEach {element -&gt; \n            fluxSink.next(element)\n        }\n    }\n}\n\nfun finish(){ currentSubscriptions.forEach { it.complete() } }\n}\n</code></pre>\n\n<p>Obviously this is not thread safe, someone have a better imp. If you think this is not so bad imp, what thread safe data structures should you use in this case?</p>\n"}, {"tags": ["javascript", "typescript", "maven", "kotlin", "kotlin-js"], "comments": [{"owner": {"reputation": 1094, "user_id": 4030765, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/1DXNv.png?s=128&g=1", "display_name": "Tagas", "link": "https://stackoverflow.com/users/4030765/tagas"}, "edited": false, "score": 0, "creation_date": 1546898991, "post_id": 54082308, "comment_id": 94998582, "body": "Maybe have a look at this: <a href=\"https://github.com/ntrrgc/ts-generator\" rel=\"nofollow noreferrer\">github.com/ntrrgc/ts-generator</a> . Why do you what to do this though? TypeScript too transpiles to JavaScript anyway..."}, {"owner": {"reputation": 2453, "user_id": 2560685, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/SIRC8.png?s=128&g=1", "display_name": "sab", "link": "https://stackoverflow.com/users/2560685/sab"}, "reply_to_user": {"reputation": 1094, "user_id": 4030765, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/1DXNv.png?s=128&g=1", "display_name": "Tagas", "link": "https://stackoverflow.com/users/4030765/tagas"}, "edited": false, "score": 0, "creation_date": 1546904030, "post_id": 54082308, "comment_id": 95000003, "body": "I need the whole code in ts, not just the model"}, {"owner": {"reputation": 204459, "user_id": 390330, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1400be56ff17549b926dd3260da4a494?s=128&d=identicon&r=PG", "display_name": "basarat", "link": "https://stackoverflow.com/users/390330/basarat"}, "edited": false, "score": 0, "creation_date": 1546906218, "post_id": 54082308, "comment_id": 95000482, "body": "Consider full-stack TypeScript from the start. Just a suggestion, might not be practical for you / your team / your use case \ud83c\udf39"}, {"owner": {"reputation": 17624, "user_id": 360811, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/M35XG.jpg?s=128&g=1", "display_name": "shabunc", "link": "https://stackoverflow.com/users/360811/shabunc"}, "edited": false, "score": 0, "creation_date": 1548174577, "post_id": 54082308, "comment_id": 95445165, "body": "What exactly are you trying to achieve? It&#39;s not clear from what you are asking. Do you want to have an opportunity to use typescript alongside with kotlin? This is doable. Or you want to compile kotlin to typescript? This is a different story."}, {"owner": {"reputation": 1467, "user_id": 980915, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/93beb63e76fbcf6ee23758450667cd51?s=128&d=identicon&r=PG", "display_name": "Ynv", "link": "https://stackoverflow.com/users/980915/ynv"}, "edited": false, "score": 0, "creation_date": 1573310273, "post_id": 54082308, "comment_id": 103844667, "body": "If you are looking for an easy way to try out ts-generator, you can try the <a href=\"https://github.com/ayedo/ktsgenerator\" rel=\"nofollow noreferrer\">ktsgenerator</a> Gradle plugin"}, {"owner": {"reputation": 2453, "user_id": 2560685, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/SIRC8.png?s=128&g=1", "display_name": "sab", "link": "https://stackoverflow.com/users/2560685/sab"}, "reply_to_user": {"reputation": 1467, "user_id": 980915, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/93beb63e76fbcf6ee23758450667cd51?s=128&d=identicon&r=PG", "display_name": "Ynv", "link": "https://stackoverflow.com/users/980915/ynv"}, "edited": false, "score": 0, "creation_date": 1573723009, "post_id": 54082308, "comment_id": 103978451, "body": "@Ynv I will try it on my project, thanks! In the mean time, can you add a real response to this post, so if it work , I change the choosen answer ?"}], "answers": [{"comments": [{"owner": {"reputation": 246, "user_id": 1742529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f5a4cd798139e906e892be25de21e7e?s=128&d=identicon&r=PG", "display_name": "user1742529", "link": "https://stackoverflow.com/users/1742529/user1742529"}, "edited": false, "score": 0, "creation_date": 1571607284, "post_id": 54186224, "comment_id": 103287510, "body": "1) JavaScript is valid TypeScript after small changes in syntax; 2) Kotlin can produce JavaScript."}], "tags": [], "owner": {"reputation": 313, "user_id": 935509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DJIfF.jpg?s=128&g=1", "display_name": "kzm", "link": "https://stackoverflow.com/users/935509/kzm"}, "is_accepted": true, "score": 12, "last_activity_date": 1597770379, "last_edit_date": 1597770379, "creation_date": 1547486089, "answer_id": 54186224, "question_id": 54082308, "link": "https://stackoverflow.com/questions/54082308/how-to-compile-kotlin-into-typescript/54186224#54186224", "title": "How to compile Kotlin into TypeScript?", "body": "<p><strong>UPDATE:</strong> Preview of TypeScript definition generation is available in IR backend since Kotlin 1.4</p>\n<p>From <a href=\"https://kotlinlang.org/docs/reference/js-ir-compiler.html#preview-generation-of-typescript-declaration-files-dts\" rel=\"nofollow noreferrer\">Kotlin documentaion</a>:</p>\n<blockquote>\n<p>The Kotlin/JS IR compiler is capable of generating TypeScript definitions from your Kotlin code. These definitions can be used by JavaScript tools and IDEs when working on hybrid apps to provide autocompletion, support static analyzers, and make it easier to include Kotlin code in JavaScript and TypeScript projects. Top-level declarations marked with @JsExport in a project that produces executable files (binaries.executable()) will get a .d.ts file generated, which contains the TypeScript definitions for the exported Kotlin declarations. In Kotlin 1.4, these declarations can be found in build/js/packages/&lt;package_name&gt;/kotlin alongside the corresponding, un-webpacked JavaScript code</p>\n</blockquote>\n<hr />\n<p>Kotlin/JS compiler can't produce TypeScript code. There are no plans to generate full TypeScript code. And there are no third-party solutions as far as I know.</p>\n<p>However, we plan to produce TypeScript definition files alongside JavaScript code: <a href=\"https://youtrack.jetbrains.com/issue/KT-16604\" rel=\"nofollow noreferrer\">KT-16604</a></p>\n"}, {"tags": [], "owner": {"reputation": 91, "user_id": 2228895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a93b6ab1892c8eceb5209c7ade491a?s=128&d=identicon&r=PG", "display_name": "user2228895", "link": "https://stackoverflow.com/users/2228895/user2228895"}, "is_accepted": false, "score": 1, "last_activity_date": 1578414186, "creation_date": 1578414186, "answer_id": 59632275, "question_id": 54082308, "link": "https://stackoverflow.com/questions/54082308/how-to-compile-kotlin-into-typescript/59632275#59632275", "title": "How to compile Kotlin into TypeScript?", "body": "<p>I wrote a plugin for gradle to assist with kotlin - typescript integration. \nIt basically generates the .d.ts files for you. </p>\n\n<p>Issues discussed here\n<a href=\"https://medium.com/@dr.david.h.akehurst/building-applications-with-kotlin-and-typescript-8a165e76252c\" rel=\"nofollow noreferrer\">https://medium.com/@dr.david.h.akehurst/building-applications-with-kotlin-and-typescript-8a165e76252c</a></p>\n\n<p>Gradle plugin is available in the gradle plugin registry. </p>\n"}], "owner": {"reputation": 2453, "user_id": 2560685, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/SIRC8.png?s=128&g=1", "display_name": "sab", "link": "https://stackoverflow.com/users/2560685/sab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3879, "favorite_count": 1, "accepted_answer_id": 54186224, "answer_count": 2, "score": 9, "last_activity_date": 1597770379, "creation_date": 1546897458, "last_edit_date": 1547495589, "question_id": 54082308, "link": "https://stackoverflow.com/questions/54082308/how-to-compile-kotlin-into-typescript", "title": "How to compile Kotlin into TypeScript?", "body": "<p>I have a JavaScript build in my Kotlin project.\nHow can I produce full TypeScript code instead of JavaScript?</p>\n\n<p>I use Maven; but if you have a Gradle solution, I'm interested.</p>\n"}, {"tags": ["javascript", "java", "kotlin", "mocking"], "owner": {"reputation": 2453, "user_id": 2560685, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/SIRC8.png?s=128&g=1", "display_name": "sab", "link": "https://stackoverflow.com/users/2560685/sab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1546897236, "creation_date": 1546897236, "question_id": 54082268, "link": "https://stackoverflow.com/questions/54082268/mock-in-kotlin-multiplateform-both-java-and-js", "title": "mock in kotlin multiplateform (both java and js)", "body": "<p>I'm currently converting a kotlin project into a multiplateform build.</p>\n\n<p>an issue is that a lot of test have mock\nAnd all the mock lib are in java only (mockito, mockk)</p>\n\n<p>Do you know any lib who allow mock in kotlin, but for both js and java?</p>\n"}, {"tags": ["kotlin", "retrofit2", "rx-java2"], "comments": [{"owner": {"reputation": 3293, "user_id": 1853785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TJlNB.jpg?s=128&g=1", "display_name": "Omar Mainegra", "link": "https://stackoverflow.com/users/1853785/omar-mainegra"}, "edited": false, "score": 1, "creation_date": 1546893731, "post_id": 54080831, "comment_id": 94996386, "body": "Show how you are calling it"}], "answers": [{"tags": [], "owner": {"reputation": 298, "user_id": 7330512, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Z8NMSkubees/AAAAAAAAAAI/AAAAAAAABJk/zvnvAlAuvM8/photo.jpg?sz=128", "display_name": "Muhammad Youssef", "link": "https://stackoverflow.com/users/7330512/muhammad-youssef"}, "is_accepted": false, "score": 1, "last_activity_date": 1546908545, "creation_date": 1546908545, "answer_id": 54083890, "question_id": 54080831, "link": "https://stackoverflow.com/questions/54080831/how-to-parse-json-array-with-retrofit-and-rxjava/54083890#54083890", "title": "How to parse json array with Retrofit and RxJava", "body": "<p>Try using <a href=\"https://github.com/square/retrofit/tree/master/retrofit-adapters/rxjava2\" rel=\"nofollow noreferrer\">RxJava2 Adapter</a></p>\n\n<p><strong>Integration</strong></p>\n\n<pre><code>implementation 'com.squareup.retrofit2:adapter-rxjava2:{retrofit_version}'\n</code></pre>\n\n<p><strong>Retrofit client setup</strong></p>\n\n<pre><code>new Retrofit.Builder()\n  .baseUrl(BASE_URL)\n  .addConverterFactory(GsonConverterFactory.create())\n  .addCallAdapterFactory(RxJava2CallAdapterFactory.create()) //option 1\n  .addCallAdapterFactory(RxJava2CallAdapterFactory.createWithScheduler(Schedulers.newThread())) //option 2\n  .build();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1460, "user_id": 10942908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jLlgs.png?s=128&g=1", "display_name": "Joshua de Guzman", "link": "https://stackoverflow.com/users/10942908/joshua-de-guzman"}, "is_accepted": false, "score": 0, "last_activity_date": 1548066038, "creation_date": 1548066038, "answer_id": 54287806, "question_id": 54080831, "link": "https://stackoverflow.com/questions/54080831/how-to-parse-json-array-with-retrofit-and-rxjava/54287806#54287806", "title": "How to parse json array with Retrofit and RxJava", "body": "<p><strong>Few notes</strong></p>\n\n<p>First of, you might need to show us how you call <code>ApiService.files()</code></p>\n\n<p><strong>What could possibly went wrong</strong></p>\n\n<p>How it is called</p>\n\n<p><strong>What could be the possible solution</strong></p>\n\n<p>Invoke the method like this</p>\n\n<pre><code>ApiService\n        .files()\n        .subscribeOn(Schedulers.io())\n        .observeOn(AndroidSchedulers.mainThread())\n        .subscribe({\n            // Handle the values here\n        },{\n            // Handle the error here\n        },{\n            // Handle the completion here (optional)\n        })\n</code></pre>\n\n<p>Not like this</p>\n\n<pre><code>ApiServices.files()\n</code></pre>\n\n<p>nor </p>\n\n<pre><code>var fileResponse = ApiServices.files()\n</code></pre>\n\n<p>Ensure the you have setup your retrofit builder well, as mentioned above</p>\n\n<ul>\n<li>RxJava2CallAdapterFactory</li>\n<li>GsonConverterFactory</li>\n</ul>\n\n<p>Other than that, without the code on how you call it, we won't be able to help you in an in-depth manner.</p>\n"}], "owner": {"reputation": 51, "user_id": 3342619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d04f93034c0a4073a829893fa0159cd5?s=128&d=identicon&r=PG&f=1", "display_name": "Martin K", "link": "https://stackoverflow.com/users/3342619/martin-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 680, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1548066038, "creation_date": 1546890398, "last_edit_date": 1546893655, "question_id": 54080831, "link": "https://stackoverflow.com/questions/54080831/how-to-parse-json-array-with-retrofit-and-rxjava", "title": "How to parse json array with Retrofit and RxJava", "body": "<p>I have problem parsing array of objects using Retrofit + RxJava </p>\n\n<p>JSON contains only this array</p>\n\n<pre><code>{\n    \"files\": [\n        {\n            \"id\": 10,\n            \"notificationId\": 15,\n            \"name\": \"cats.ncs\",\n            \"dateTime\": \"2019-01-07T17:34:45\"\n        }\n    ]\n}\n</code></pre>\n\n<p>retrotfit service</p>\n\n<pre><code>@GET(\"/api/FileApi/files\")\nfun files(): Observable&lt;FilesResponse&gt;\n</code></pre>\n\n<p>where FilesResponse is</p>\n\n<pre><code>data class FilesResponse(\n    @SerializedName(\"files\")\n    var files: List&lt;FileElement&gt;\n)\n</code></pre>\n\n<p>and FileElement</p>\n\n<pre><code>data class FileElement(\n    @SerializedName(\"id\")\n    var id: Long,\n    @SerializedName(\"notificationId\")\n    var notificationId: Long,\n    @SerializedName(\"name\")\n    var name: String,\n    @SerializedName(\"dateTime\")\n    var dateTime: String\n)\n</code></pre>\n\n<p>when I run it I get always</p>\n\n<blockquote>\n  <p>the return type of CallObjectMethodA does not match\n  io.reactivex.Observable ApiService.files()</p>\n</blockquote>\n\n<p>So how do I parse JSON containing only an array?</p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 5302, "user_id": 4265739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19cd59393a5b86c48f0da7bd5504c5b8?s=128&d=identicon&r=PG&f=1", "display_name": "leonardkraemer", "link": "https://stackoverflow.com/users/4265739/leonardkraemer"}, "edited": false, "score": 0, "creation_date": 1546884849, "post_id": 54079573, "comment_id": 94992721, "body": "there is <a href=\"https://developers.google.com/location-context/fused-location-provider/\" rel=\"nofollow noreferrer\">developers.google.com/location-context/fused-location-provid&zwnj;&#8203;er</a> you should use it."}, {"owner": {"reputation": 2736, "user_id": 5082285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6346341a24fb90f9ac3fb4ef1136d564?s=128&d=identicon&r=PG&f=1", "display_name": "Markus Kauppinen", "link": "https://stackoverflow.com/users/5082285/markus-kauppinen"}, "edited": false, "score": 0, "creation_date": 1546885089, "post_id": 54079573, "comment_id": 94992812, "body": "GPS hardly works indoors and having a SIM card in the device probably helps due to A-GPS. The NETWORK_PROVIDER isn&#39;t very accurate, but may be enough in many cases."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4016985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PBW2BRoufQw/AAAAAAAAAAI/AAAAAAAAAEw/Xt-qXb2rV_4/photo.jpg?sz=128", "display_name": "Amarildo Ribeiro", "link": "https://stackoverflow.com/users/4016985/amarildo-ribeiro"}, "edited": false, "score": 0, "creation_date": 1546885562, "post_id": 54079672, "comment_id": 94992987, "body": "Thanks, i will take a look"}, {"owner": {"reputation": 520, "user_id": 7724205, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fPQFRGTht-8/AAAAAAAAAAI/AAAAAAAAAJc/BPKlTodO4W8/photo.jpg?sz=128", "display_name": "Koushik Shom Choudhury", "link": "https://stackoverflow.com/users/7724205/koushik-shom-choudhury"}, "edited": false, "score": 0, "creation_date": 1593845319, "post_id": 54079672, "comment_id": 110924337, "body": "Good for first load, managing callbacks or implementing Single Update is a mess with Location API."}], "tags": [], "owner": {"reputation": 576, "user_id": 321272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3L2mp.jpg?s=128&g=1", "display_name": "Chandan Adiga", "link": "https://stackoverflow.com/users/321272/chandan-adiga"}, "is_accepted": false, "score": 0, "last_activity_date": 1546884987, "creation_date": 1546884987, "answer_id": 54079672, "question_id": 54079573, "link": "https://stackoverflow.com/questions/54079573/locationmanager-gps-provider-taking-too-much-time/54079672#54079672", "title": "LocationManager GPS_PROVIDER taking too much time", "body": "<p>It is suggested to use fused location provider. More details <a href=\"https://developer.android.com/training/location/receive-location-updates\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 789, "user_id": 7641174, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mT1i-1QabTQ/AAAAAAAAAAI/AAAAAAAAAcU/tMWPD90e4Uw/photo.jpg?sz=128", "display_name": "Mustansir Zia", "link": "https://stackoverflow.com/users/7641174/mustansir-zia"}, "is_accepted": false, "score": 0, "last_activity_date": 1546885311, "creation_date": 1546885311, "answer_id": 54079752, "question_id": 54079573, "link": "https://stackoverflow.com/questions/54079573/locationmanager-gps-provider-taking-too-much-time/54079752#54079752", "title": "LocationManager GPS_PROVIDER taking too much time", "body": "<p>Using the GPS_PROVIDER does take a little while to fetch location updates probably because of its accuracy in my opinion. You could also instead of wanting a new location request an older location that's slightly stale (Say for example 2 mins old) and that would be almost ready to use. </p>\n\n<p>I would, however, recommend NOT using Location Manager at all and since it is depreciated and was replaced by a much cleaner and performant <a href=\"https://developers.google.com/location-context/fused-location-provider\" rel=\"nofollow noreferrer\">Fused Location Provider API</a>. It has support for last location, location updates and it's the currently the method Google recommends. </p>\n"}], "owner": {"reputation": 1, "user_id": 4016985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PBW2BRoufQw/AAAAAAAAAAI/AAAAAAAAAEw/Xt-qXb2rV_4/photo.jpg?sz=128", "display_name": "Amarildo Ribeiro", "link": "https://stackoverflow.com/users/4016985/amarildo-ribeiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1546889458, "creation_date": 1546884555, "last_edit_date": 1546889458, "question_id": 54079573, "link": "https://stackoverflow.com/questions/54079573/locationmanager-gps-provider-taking-too-much-time", "title": "LocationManager GPS_PROVIDER taking too much time", "body": "<p>I'm using <code>LocationManager.GPS_PROVIDER</code> to get the current location of the user but it's taking too much time to return the location, should I use the <code>NETWORK_PROVIDER</code> over <code>GPS_PROVIDER</code> ? Or there is something new and better to get the current location of the user to trace a destination route ?.</p>\n\n<pre><code>locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 1000, 10f, object : LocationListener{...}\n</code></pre>\n"}, {"tags": ["variables", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 298, "user_id": 6774425, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/390ae89542c8c0ff64450e63e31868e0?s=128&d=identicon&r=PG&f=1", "display_name": "sourlemonaid", "link": "https://stackoverflow.com/users/6774425/sourlemonaid"}, "edited": false, "score": 0, "creation_date": 1546887324, "post_id": 54080050, "comment_id": 94993722, "body": "Thanks! I am going to try this out and see how it works"}], "tags": [], "owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "is_accepted": true, "score": 2, "last_activity_date": 1546886770, "creation_date": 1546886770, "answer_id": 54080050, "question_id": 54079572, "link": "https://stackoverflow.com/questions/54079572/how-to-link-variables-so-when-i-modify-one-of-them-both-are-modified-or-just-th/54080050#54080050", "title": "how to link variables so when i modify one of them both are modified? or just the top level one", "body": "<p>You can use <code>KMutableProperty0&lt;&gt;</code> class to hold reference to primitive variables: </p>\n\n<pre><code>var chosenVariable: KMutableProperty0&lt;Long&gt; = when (sign) {\n        1-&gt; ::a\n        2-&gt; ::b\n        3-&gt; ::c\n        else -&gt; ::a\n}\n\n// set value\nchosenVariable.set(7)\n</code></pre>\n\n<p>It is currently available only for global variables. <a href=\"https://discuss.kotlinlang.org/t/pass-by-ref-for-inline-functions/4805/27\" rel=\"nofollow noreferrer\">Here is some useful info</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 298, "user_id": 6774425, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/390ae89542c8c0ff64450e63e31868e0?s=128&d=identicon&r=PG&f=1", "display_name": "sourlemonaid", "link": "https://stackoverflow.com/users/6774425/sourlemonaid"}, "edited": false, "score": 0, "creation_date": 1546887459, "post_id": 54080178, "comment_id": 94993786, "body": "sorry! sign is what the user inputs to decide which variable is chosen. they give a &quot;sign&quot; and then a variable is chosen (chosenVariable) based on that sign. I updated my question with the extra info"}, {"owner": {"reputation": 340, "user_id": 8244977, "user_type": "registered", "profile_image": "https://graph.facebook.com/100007678740593/picture?type=large", "display_name": "BingLi224", "link": "https://stackoverflow.com/users/8244977/bingli224"}, "reply_to_user": {"reputation": 298, "user_id": 6774425, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/390ae89542c8c0ff64450e63e31868e0?s=128&d=identicon&r=PG&f=1", "display_name": "sourlemonaid", "link": "https://stackoverflow.com/users/6774425/sourlemonaid"}, "edited": false, "score": 0, "creation_date": 1546927636, "post_id": 54080178, "comment_id": 95004957, "body": "@sourlemonaid do you mean <code>chosenVariable</code> is of same reference of either <code>a</code>, <code>b</code>, or <code>c</code>? when <code>chosenVariable</code> is modified, either <code>a</code>, <code>b</code>, or <code>c</code> is modified at same time?"}, {"owner": {"reputation": 298, "user_id": 6774425, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/390ae89542c8c0ff64450e63e31868e0?s=128&d=identicon&r=PG&f=1", "display_name": "sourlemonaid", "link": "https://stackoverflow.com/users/6774425/sourlemonaid"}, "edited": false, "score": 0, "creation_date": 1546953708, "post_id": 54080178, "comment_id": 95017340, "body": "exactly! I didn&#39;t know that was called a reference"}], "tags": [], "owner": {"reputation": 340, "user_id": 8244977, "user_type": "registered", "profile_image": "https://graph.facebook.com/100007678740593/picture?type=large", "display_name": "BingLi224", "link": "https://stackoverflow.com/users/8244977/bingli224"}, "is_accepted": false, "score": 0, "last_activity_date": 1546887333, "creation_date": 1546887333, "answer_id": 54080178, "question_id": 54079572, "link": "https://stackoverflow.com/questions/54079572/how-to-link-variables-so-when-i-modify-one-of-them-both-are-modified-or-just-th/54080178#54080178", "title": "how to link variables so when i modify one of them both are modified? or just the top level one", "body": "<p>If you mean <code>chosenVariable</code> is the <code>sign</code>, either:</p>\n\n<p>there can be another function to set/get chosen variables (<code>a</code>, <code>b</code>, <code>c</code>), such as:</p>\n\n<pre><code>var chosenVariable : Long = 0 // init value\n\nfun set ( value : Int ) {\n    when ( chosenVariable ) {\n        // 1 -&gt; a = value\n        2 -&gt; b = value\n        3 -&gt; c = value\n        else -&gt; a = value\n    }\n}\nfun get ( ) {\n    return when ( chosenVariable ) {\n        // 1 -&gt; a\n        2 -&gt; b\n        3 -&gt; c\n        else -&gt; a\n    }\n}\n</code></pre>\n\n<p>or maybe use MutableMap instead:</p>\n\n<pre><code>val variables = mutableMapOf &lt;Long /* sign */, Int /* value */&gt; (\n    1 to 0, // a\n    2 to 0, // b\n    3 to 0, // c\n)\n\n// still with getter/setter like before, but with map\nfun get ( ) = variables [ chosenVariable ]\nfun set ( value : Int ) {\n    variables [ chosenVariable ] = value\n}\n</code></pre>\n"}], "owner": {"reputation": 298, "user_id": 6774425, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/390ae89542c8c0ff64450e63e31868e0?s=128&d=identicon&r=PG&f=1", "display_name": "sourlemonaid", "link": "https://stackoverflow.com/users/6774425/sourlemonaid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 54080050, "answer_count": 2, "score": -1, "last_activity_date": 1546887406, "creation_date": 1546884551, "last_edit_date": 1546887406, "question_id": 54079572, "link": "https://stackoverflow.com/questions/54079572/how-to-link-variables-so-when-i-modify-one-of-them-both-are-modified-or-just-th", "title": "how to link variables so when i modify one of them both are modified? or just the top level one", "body": "<p>I have 3 variables A,b and c in a class called ONE</p>\n\n<pre><code>var a = 0\nvar b = 0\nvar c = 0\n</code></pre>\n\n<p>that class(class ONE) is abstract and is used by 3 classes(TWO, THREE, FOUR). the variable selected changes by using a when statement.</p>\n\n<pre><code>var chosenVariable:Long\n        chosenVariable= when (sign){\n            1-&gt; a\n            2-&gt; b\n            3-&gt; c\n            else -&gt; a\n        }\n</code></pre>\n\n<p>note that sign is what the user inputs to decide which variable is chosen.</p>\n\n<p>my question is. when i modify <code>chosenVariable</code> I want it to change whatever variable it was set a, b or c.</p>\n\n<p>is this possible? I thought it might be called instancing, but I can't seem to come up with anything searching that way. I think i need to do it somehow with a setter and getter?</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 2537, "user_id": 1680703, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FvIM9.png?s=128&g=1", "display_name": "Anis BEN NSIR", "link": "https://stackoverflow.com/users/1680703/anis-ben-nsir"}, "edited": false, "score": 1, "creation_date": 1546878052, "post_id": 54077917, "comment_id": 94989440, "body": "could you please post the part of code related to , \tBottomNavigationView.OnNavigationItemSelectedListener, and BottomNavigationView.OnNavigationItemReselectedListener. i think that bottomNavigation.selectedItemId will notify the listener. so you are adding a new HomeFragment infinitly."}], "owner": {"reputation": 2571, "user_id": 1533670, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/3zPUY.jpg?s=128&g=1", "display_name": "Yohanes AI", "link": "https://stackoverflow.com/users/1533670/yohanes-ai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 167, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1546877511, "creation_date": 1546877511, "question_id": 54077917, "link": "https://stackoverflow.com/questions/54077917/kotlin-bottomnavigationview-selecteditemid-trigger-onbackstackchangedlistener", "title": "Kotlin BottomNavigationView.selectedItemId trigger OnBackStackChangedListener", "body": "<p>I have multiple fragment, one bottom navigation view on bottom of Main Activity. The problem appears when I want to set selected item on Bottom Navigation View when fragment pop back from stack, <code>setSelectedItemId always trigger OnBackStackChangedListener</code>, thus make loop event. Here are the code</p>\n\n<pre><code>fragmentManager.addOnBackStackChangedListener {\n    var f : Fragment = fragmentManager.findFragmentById(R.id.frame)\n\n    if(f is HomeFragment){ \n        bottomNavigation.selectedItemID = R.id.navigation_home\n    }\n}\n</code></pre>\n\n<p>I've check from the documentation at developer.android.com and various post on StackOverflow or even forum and I don't find any proper solution for my case. </p>\n\n<p>Any solution? thanks</p>\n"}, {"tags": ["android", "kotlin", "kapt"], "comments": [{"owner": {"reputation": 3910, "user_id": 4103854, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EUnmsdTd6P4/AAAAAAAAAAI/AAAAAAAAAGI/TBEWqWgj0wo/photo.jpg?sz=128", "display_name": "Logain", "link": "https://stackoverflow.com/users/4103854/logain"}, "edited": false, "score": 0, "creation_date": 1546888128, "post_id": 54077875, "comment_id": 94994074, "body": "Have you tried cleaning the build cache?"}, {"owner": {"reputation": 1, "user_id": 10880042, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NcJ8VhiIbdM/AAAAAAAAAAI/AAAAAAAAAAo/bGlWVDfECd4/photo.jpg?sz=128", "display_name": "Humak", "link": "https://stackoverflow.com/users/10880042/humak"}, "reply_to_user": {"reputation": 3910, "user_id": 4103854, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EUnmsdTd6P4/AAAAAAAAAAI/AAAAAAAAAGI/TBEWqWgj0wo/photo.jpg?sz=128", "display_name": "Logain", "link": "https://stackoverflow.com/users/4103854/logain"}, "edited": false, "score": 0, "creation_date": 1546896983, "post_id": 54077875, "comment_id": 94997779, "body": "Yes, I tried cleaning the cache, build cache, grade cache. I have used \u201cinvalidate cache and restart\u201d and etc. I can see a message \u201cInternal compiler error\u201d. I observe this problem only on kotlin versions newer than 1.2.51."}, {"owner": {"reputation": 1, "user_id": 10880042, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NcJ8VhiIbdM/AAAAAAAAAAI/AAAAAAAAAAo/bGlWVDfECd4/photo.jpg?sz=128", "display_name": "Humak", "link": "https://stackoverflow.com/users/10880042/humak"}, "reply_to_user": {"reputation": 3910, "user_id": 4103854, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EUnmsdTd6P4/AAAAAAAAAAI/AAAAAAAAAGI/TBEWqWgj0wo/photo.jpg?sz=128", "display_name": "Logain", "link": "https://stackoverflow.com/users/4103854/logain"}, "edited": false, "score": 0, "creation_date": 1546897306, "post_id": 54077875, "comment_id": 94997918, "body": "I have looked kapt source codes and I don\u2019t really understand why there is an error in this place in code."}, {"owner": {"reputation": 3910, "user_id": 4103854, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EUnmsdTd6P4/AAAAAAAAAAI/AAAAAAAAAGI/TBEWqWgj0wo/photo.jpg?sz=128", "display_name": "Logain", "link": "https://stackoverflow.com/users/4103854/logain"}, "edited": false, "score": 0, "creation_date": 1546897518, "post_id": 54077875, "comment_id": 94998016, "body": "Can you share your gradle file? Maybe you have some conflicts with other libraries/plugins. Also, just in case, make sure you have the latest version of the kotlin plugin for android studio."}], "owner": {"reputation": 1, "user_id": 10880042, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NcJ8VhiIbdM/AAAAAAAAAAI/AAAAAAAAAAo/bGlWVDfECd4/photo.jpg?sz=128", "display_name": "Humak", "link": "https://stackoverflow.com/users/10880042/humak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 231, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1546877368, "creation_date": 1546877368, "question_id": 54077875, "link": "https://stackoverflow.com/questions/54077875/kapt-error-after-updating-kotlin-version-java-lang-nosuchfielderror-content-ro", "title": "Kapt error after updating Kotlin version: java.lang.NoSuchFieldError: CONTENT_ROOTS", "body": "<p>After updating Kotlin version from 1.2.51 to 1.3.11 I have a compilation error (kaptGenerateStubsDebugKotlin FAILED).</p>\n\n<pre><code>e: java.lang.NoSuchFieldError: CONTENT_ROOTS\n at org.jetbrains.kotlin.kapt3.Kapt3ComponentRegistrar.registerProjectComponents(Kapt3Plugin.kt:296)\n at org.jetbrains.kotlin.cli.jvm.compiler.KotlinCoreEnvironment.&lt;init&gt;(KotlinCoreEnvironment.kt:179)\n at org.jetbrains.kotlin.cli.jvm.compiler.KotlinCoreEnvironment.&lt;init&gt;(KotlinCoreEnvironment.kt:117)\n at org.jetbrains.kotlin.cli.jvm.compiler.KotlinCoreEnvironment$Companion.createForProduction(KotlinCoreEnvironment.kt:413)\n at org.jetbrains.kotlin.cli.jvm.K2JVMCompiler.createCoreEnvironment(K2JVMCompiler.kt:276)\n at org.jetbrains.kotlin.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.kt:154)\n at org.jetbrains.kotlin.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.kt:63)\n at org.jetbrains.kotlin.cli.common.CLICompiler.execImpl(CLICompiler.java:108)\n at org.jetbrains.kotlin.cli.common.CLICompiler.execImpl(CLICompiler.java:52)\n at org.jetbrains.kotlin.cli.common.CLITool.exec(CLITool.kt:92)\n at org.jetbrains.kotlin.daemon.CompileServiceImpl$compile$1$1$2.invoke(CompileServiceImpl.kt:395)\n at org.jetbrains.kotlin.daemon.CompileServiceImpl$compile$1$1$2.invoke(CompileServiceImpl.kt:97)\n at org.jetbrains.kotlin.daemon.CompileServiceImpl$doCompile$$inlined$ifAlive$lambda$2.invoke(CompileServiceImpl.kt:909)\n at org.jetbrains.kotlin.daemon.CompileServiceImpl$doCompile$$inlined$ifAlive$lambda$2.invoke(CompileServiceImpl.kt:97)\n at org.jetbrains.kotlin.daemon.common.DummyProfiler.withMeasure(PerfUtils.kt:137)\n at org.jetbrains.kotlin.daemon.CompileServiceImpl.checkedCompile(CompileServiceImpl.kt:939)\n at org.jetbrains.kotlin.daemon.CompileServiceImpl.doCompile(CompileServiceImpl.kt:908)\n at org.jetbrains.kotlin.daemon.CompileServiceImpl.compile(CompileServiceImpl.kt:394)\n at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n at java.lang.reflect.Method.invoke(Method.java:498)\n at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:346)\n at sun.rmi.transport.Transport$1.run(Transport.java:200)\n at sun.rmi.transport.Transport$1.run(Transport.java:197)\n at java.security.AccessController.doPrivileged(Native Method)\n at sun.rmi.transport.Transport.serviceCall(Transport.java:196)\n at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:568)\n at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:826)\n at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:683)\n at java.security.AccessController.doPrivileged(Native Method)\n at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:682)\n at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n at java.lang.Thread.run(Thread.java:745)\n</code></pre>\n\n<p>I have also tried the latest versions (newer than 1.2.51) but I have the same problem. </p>\n"}, {"tags": ["android", "kotlin", "coroutine", "kotlinx.coroutines"], "comments": [{"owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "edited": false, "score": 0, "creation_date": 1546878949, "post_id": 54077592, "comment_id": 94989944, "body": "where and how do you start a coroutine?"}, {"owner": {"reputation": 215, "user_id": 10656024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34e4e2531b580c9fcca91f593ef5f9da?s=128&d=identicon&r=PG&f=1", "display_name": "Alessandra Maria", "link": "https://stackoverflow.com/users/10656024/alessandra-maria"}, "reply_to_user": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "edited": false, "score": 0, "creation_date": 1546879273, "post_id": 54077592, "comment_id": 94990092, "body": "Yeah thats my problem...Can you please tell me how and where could i do that?"}], "answers": [{"comments": [{"owner": {"reputation": 215, "user_id": 10656024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34e4e2531b580c9fcca91f593ef5f9da?s=128&d=identicon&r=PG&f=1", "display_name": "Alessandra Maria", "link": "https://stackoverflow.com/users/10656024/alessandra-maria"}, "edited": false, "score": 0, "creation_date": 1546885837, "post_id": 54078950, "comment_id": 94993103, "body": "thank you for the example... can you please show me the code for repository and what should MyRetrofitInterface return? A Deferred or Result?"}, {"owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "reply_to_user": {"reputation": 215, "user_id": 10656024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34e4e2531b580c9fcca91f593ef5f9da?s=128&d=identicon&r=PG&f=1", "display_name": "Alessandra Maria", "link": "https://stackoverflow.com/users/10656024/alessandra-maria"}, "edited": false, "score": 0, "creation_date": 1546887211, "post_id": 54078950, "comment_id": 94993667, "body": "<code>MyRetrofitInterface</code> is the same as in your code. Added Repository code to my answer"}, {"owner": {"reputation": 215, "user_id": 10656024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34e4e2531b580c9fcca91f593ef5f9da?s=128&d=identicon&r=PG&f=1", "display_name": "Alessandra Maria", "link": "https://stackoverflow.com/users/10656024/alessandra-maria"}, "edited": false, "score": 0, "creation_date": 1546887935, "post_id": 54078950, "comment_id": 94993995, "body": "Thank you...just a last question in my repository, I need to store the body of apiInterface.makeLoginCall(loginRequest). Since it returns a result, how could I get the body of it?"}, {"owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "reply_to_user": {"reputation": 215, "user_id": 10656024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34e4e2531b580c9fcca91f593ef5f9da?s=128&d=identicon&r=PG&f=1", "display_name": "Alessandra Maria", "link": "https://stackoverflow.com/users/10656024/alessandra-maria"}, "edited": false, "score": 0, "creation_date": 1546888849, "post_id": 54078950, "comment_id": 94994419, "body": "You can do it like this: <code>if (result is Success&lt;LoginResponse&gt;) {             val response = result.data         }</code>"}, {"owner": {"reputation": 2671, "user_id": 958025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bd938d17202eccdfaa0bd9a389a2627e?s=128&d=identicon&r=PG&f=1", "display_name": "Nimrod Dayan", "link": "https://stackoverflow.com/users/958025/nimrod-dayan"}, "edited": false, "score": 0, "creation_date": 1558556261, "post_id": 54078950, "comment_id": 99145105, "body": "@Sergey <code>login function isn&#39;t blocking the Main Thread when it is marked as &#39;suspend&#39;</code> this is not true. suspending functions don&#39;t magically turn blocking code to unblocking code. In your example, the call to <code>repo.onUserLogin(request)</code> will block the main thread. In order to avoid it, you have to use a non-Main dispatcher. Since this is a web request, the recommended dispatcher is <code>Dispatchers.IO</code>. To change dispatcher, you should wrap the call with <code>val result = withContext(Dispatchers.IO) { repo.onUserLogin(request) }</code>."}, {"owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "reply_to_user": {"reputation": 2671, "user_id": 958025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bd938d17202eccdfaa0bd9a389a2627e?s=128&d=identicon&r=PG&f=1", "display_name": "Nimrod Dayan", "link": "https://stackoverflow.com/users/958025/nimrod-dayan"}, "edited": false, "score": 0, "creation_date": 1558557076, "post_id": 54078950, "comment_id": 99145493, "body": "in <code>makeLoginCall</code> function there is a call to <code>MyRetrofitInterface?.loginRequest(loginRequest)?.await()</code>, so it is already running on another thread and no need to use <code>withContext(Dispatchers.IO)</code>. <code>MyRetrofitInterface?.loginRequest(loginRequest)?</code> returns a Deferred object, usually its used with <code>await</code> suspending function in order to wait for the result without blocking the <code>main&#47;current thread</code>. @NimrodDayan I&#39;ve edited comment a little bit to avoid misunderstanding."}, {"owner": {"reputation": 2671, "user_id": 958025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bd938d17202eccdfaa0bd9a389a2627e?s=128&d=identicon&r=PG&f=1", "display_name": "Nimrod Dayan", "link": "https://stackoverflow.com/users/958025/nimrod-dayan"}, "edited": false, "score": 0, "creation_date": 1558816802, "post_id": 54078950, "comment_id": 99227402, "body": "<code>Deferred</code> type and its <code>await()</code> method is used for concurrency. By itself, it does not provide any means to &quot;wait for the result without blocking&quot;. For example, <code>async { Thread.sleep(5000L) }</code> if run in the context of the Main dispatcher, will block the main thread! The only reason <code>repo.onUserLogin(request)</code> in your code won&#39;t block the main thread is because as you said Retrofit internally manages worker threads for the enqueued requests. But this is an implementation detail of Retrofit. It does not mean that any API that returns Deferred will do the same and that&#39;s what emphasizing here."}, {"owner": {"reputation": 1635, "user_id": 3561494, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/19c386ce6d5108ebec4f80258ea6fe2e?s=128&d=identicon&r=PG&f=1", "display_name": "user3561494", "link": "https://stackoverflow.com/users/3561494/user3561494"}, "edited": false, "score": 0, "creation_date": 1592159508, "post_id": 54078950, "comment_id": 110318598, "body": "I am trying this pattern but when an error occurs it does not go into the is Error -&gt; block even though the debugger is saying its an error $result =  {Error@10966}"}, {"owner": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "edited": false, "score": 0, "creation_date": 1593419646, "post_id": 54078950, "comment_id": 110764022, "body": "Thanks! What is <code>LoginRequest</code>?"}, {"owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "edited": false, "score": 0, "creation_date": 1593423547, "post_id": 54078950, "comment_id": 110766029, "body": "I think it&#39;s some kind of data object, containing request information, e.g. email and password."}], "tags": [], "owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "is_accepted": true, "score": 14, "last_activity_date": 1583350481, "last_edit_date": 1583350481, "creation_date": 1546881597, "answer_id": 54078950, "question_id": 54077592, "link": "https://stackoverflow.com/questions/54077592/kotlin-coroutines-handle-error-and-implementation/54078950#54078950", "title": "Kotlin coroutines handle error and implementation", "body": "<p>It is a good practice to launch a coroutine in a local scope which can be implemented in a lifecycle aware classes, for example <strong>Presenter</strong> or <strong>ViewModel</strong>. You can use next approach to pass data:</p>\n\n<ol>\n<li><p>Create <code>sealed</code> <code>Result</code> class and its inheritors in separate file:</p>\n\n<pre><code>sealed class Result&lt;out T : Any&gt;\nclass Success&lt;out T : Any&gt;(val data: T) : Result&lt;T&gt;()\nclass Error(val exception: Throwable, val message: String = exception.localizedMessage) : Result&lt;Nothing&gt;()\n</code></pre></li>\n<li><p>Make <code>onUserLogin</code> function suspendable and returning <code>Result</code> in <code>RepositoryInterface</code> and <code>Repository</code>:</p>\n\n<pre><code>suspend fun onUserLogin(loginRequest: LoginRequest): Result&lt;LoginResponse&gt; {\n    return apiInterface.makeLoginCall(loginRequest)\n}\n</code></pre></li>\n<li><p>Change <code>makeLoginCall</code> function in <code>APIInterface</code> and <code>APIInterfaceImpl</code> according to the following code:</p>\n\n<pre><code>suspend fun makeLoginCall(loginRequest: LoginRequest): Result&lt;LoginResponse&gt; {\n    if (isInternetPresent()) {\n        try {\n            val response = MyRetrofitInterface?.loginRequest(loginRequest)?.await()\n            return Success(response)\n        } catch (e: Exception) {\n            return Error(e)\n        }\n    } else {\n        return Error(Exception(Constants.NO_INTERNET))\n    }\n}\n</code></pre></li>\n<li><p>Use next code for your <code>Presenter</code>:</p>\n\n<pre><code>class Presenter(private val repo: RepositoryInterface,\n                private val uiContext: CoroutineContext = Dispatchers.Main\n) : CoroutineScope { // creating local scope\n\n    private var job: Job = Job()\n\n    // To use Dispatchers.Main (CoroutineDispatcher - runs and schedules coroutines) in Android add\n    // implementation 'org.jetbrains.kotlinx:kotlinx-coroutines-android:1.0.1'\n    override val coroutineContext: CoroutineContext\n        get() = uiContext + job\n\n    fun detachView() {\n        // cancel the job when view is detached\n        job.cancel()\n    }\n\n    fun login() = launch { // launching a coroutine\n        val request = LoginRequest()\n        val result = repo.onUserLogin(request) // onUserLogin() function isn't blocking the Main Thread\n\n        //use result, make UI updates\n        when (result) {\n            is Success&lt;LoginResponse&gt; -&gt; { /* update UI when login success */ } \n            is Error -&gt; { /* update UI when login error */ }\n        }\n    }\n}\n</code></pre></li>\n</ol>\n\n<p><strong>EDIT</strong></p>\n\n<p>We can use extension functions on <code>Result</code> class to replace <code>when</code> expression:</p>\n\n<pre><code>inline fun &lt;T : Any&gt; Result&lt;T&gt;.onSuccess(action: (T) -&gt; Unit): Result&lt;T&gt; {\n    if (this is Success) action(data)\n    return this\n}\ninline fun &lt;T : Any&gt; Result&lt;T&gt;.onError(action: (Error) -&gt; Unit): Result&lt;T&gt; {\n    if (this is Error) action(this)\n    return this\n}\n\nclass Presenter(...) : CoroutineScope {\n\n    // ...\n\n    fun login() = launch {\n        val request = LoginRequest()\n        val result = repo.onUserLogin(request) \n\n        result\n            .onSuccess {/* update UI when login success */ }\n            .onError { /* update UI when login error */ }\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "edited": false, "score": 0, "creation_date": 1593183713, "post_id": 55413508, "comment_id": 110699644, "body": "Have you moved from <code>CoroutineExceptionHandler</code> to <code>try-catch</code>?"}, {"owner": {"reputation": 853, "user_id": 7652387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7c3cd1a96fb365ccb4ccff20a82e0aa?s=128&d=identicon&r=PG&f=1", "display_name": "toffor", "link": "https://stackoverflow.com/users/7652387/toffor"}, "reply_to_user": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "edited": false, "score": 1, "creation_date": 1593294028, "post_id": 55413508, "comment_id": 110730809, "body": "Yes i moved, you should move definetly. Because first approach not best."}, {"owner": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "edited": false, "score": 1, "creation_date": 1593350855, "post_id": 55413508, "comment_id": 110743596, "body": "Thank you! I have been using <code>try-catch</code> for 2 years. I thought, <code>CoroutineExceptionHandler</code> would be better."}, {"owner": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "edited": false, "score": 0, "creation_date": 1593513396, "post_id": 55413508, "comment_id": 110801619, "body": "This is a good variant, but I found that we cannot get a right class name, method name, line number of a calling method. In <code>try-catch</code> we can invoke <code>Thread.currentThread().stackTrace[2]</code> and get line number of a crash line, but not of a calling class, but a class where <code>CoroutineScope.launchSafe</code> is written in. I mean, if we write this extension inside <code>MyLaunch.kt</code>, then in <code>try-catch</code> we will get <code>MyLaunch.launchSafe:10</code>, not <code>SomeFragment.loadItems:120</code>."}, {"owner": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "edited": false, "score": 0, "creation_date": 1593515349, "post_id": 55413508, "comment_id": 110802564, "body": "To overcome this behaviour, you can use <code>inline</code> modifier with <code>crossinline</code> and <code>noinline</code> modifiers. In this case we can capture a calling method, but not it&#39;s line number."}, {"owner": {"reputation": 853, "user_id": 7652387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7c3cd1a96fb365ccb4ccff20a82e0aa?s=128&d=identicon&r=PG&f=1", "display_name": "toffor", "link": "https://stackoverflow.com/users/7652387/toffor"}, "reply_to_user": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "edited": false, "score": 0, "creation_date": 1593586378, "post_id": 55413508, "comment_id": 110829175, "body": "Thanks that&#39;s a good point to debug properly. I will try it."}, {"owner": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "edited": false, "score": 0, "creation_date": 1593636742, "post_id": 55413508, "comment_id": 110854204, "body": "Good luck! I will later write a similar solution in another topic! Thanks!"}], "tags": [], "owner": {"reputation": 853, "user_id": 7652387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7c3cd1a96fb365ccb4ccff20a82e0aa?s=128&d=identicon&r=PG&f=1", "display_name": "toffor", "link": "https://stackoverflow.com/users/7652387/toffor"}, "is_accepted": false, "score": 6, "last_activity_date": 1566308629, "last_edit_date": 1592644375, "creation_date": 1553849159, "answer_id": 55413508, "question_id": 54077592, "link": "https://stackoverflow.com/questions/54077592/kotlin-coroutines-handle-error-and-implementation/55413508#55413508", "title": "Kotlin coroutines handle error and implementation", "body": "<p><strong>EDIT:</strong></p>\n<p>I am trying this solution in my new app and i released that if an error occurs in launchSafe method and try to retry request, launcSafe() method does not work correctly. So i changed the logic like this and problem is fixed.</p>\n<pre><code>fun CoroutineScope.launchSafe(\n    onError: (Throwable) -&gt; Unit = {},\n    onSuccess: suspend () -&gt; Unit\n) {\n   launch {\n        try {\n            onSuccess()\n        } catch (e: Exception) {\n            onError(e)\n        }\n    }\n}\n</code></pre>\n<p><strong>OLD ANSWER:</strong></p>\n<p>I think a lot about this topic and came with a solution. I think this solution cleaner and easy to handle exceptions. First of all when use write code like</p>\n<pre><code>fun getNames() = launch { }  \n</code></pre>\n<p>You are returning job instance to ui i think this is not correct. Ui should not have reference to job instance. I tried below solution it's working good for me. But i want to discuss if any side effect can occur. Appreciate to see your comments.</p>\n<pre><code>fun main() {\n\n\n    Presenter().getNames()\n\n    Thread.sleep(1000000)\n\n}\n\n\nclass Presenter(private val repository: Repository = Repository()) : CoroutineScope {\n\n    private val job = Job()\n\n    override val coroutineContext: CoroutineContext\n        get() = job + Dispatchers.Default // Can be Dispatchers.Main in Android\n\n    fun getNames() = launchSafe(::handleLoginError) {\n        println(repository.getNames())\n    }\n    \n\n    private fun handleLoginError(throwable: Throwable) {\n        println(throwable)\n    }\n\n    fun detach() = this.cancel()\n\n}\n\nclass Repository {\n\n    suspend fun getNames() = suspendCancellableCoroutine&lt;List&lt;String&gt;&gt; {\n        val timer = Timer()\n\n        it.invokeOnCancellation {\n            timer.cancel()\n        }\n\n        timer.schedule(timerTask {\n            it.resumeWithException(IllegalArgumentException())\n            //it.resume(listOf(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;))\n        }, 500)\n    }\n}\n\n\nfun CoroutineScope.launchSafe(\n    onError: (Throwable) -&gt; Unit = {},\n    onSuccess: suspend () -&gt; Unit\n) {\n    val handler = CoroutineExceptionHandler { _, throwable -&gt;\n        onError(throwable)\n    }\n\n    launch(handler) {\n        onSuccess()\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 215, "user_id": 10656024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34e4e2531b580c9fcca91f593ef5f9da?s=128&d=identicon&r=PG&f=1", "display_name": "Alessandra Maria", "link": "https://stackoverflow.com/users/10656024/alessandra-maria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8412, "favorite_count": 6, "accepted_answer_id": 54078950, "answer_count": 2, "score": 11, "last_activity_date": 1583350481, "creation_date": 1546876348, "last_edit_date": 1546943213, "question_id": 54077592, "link": "https://stackoverflow.com/questions/54077592/kotlin-coroutines-handle-error-and-implementation", "title": "Kotlin coroutines handle error and implementation", "body": "<p>Using coroutines for the first time. Need help.</p>\n\n<p>Here is my flow:</p>\n\n<p>Presenter wants to login so calls Repository Interface. Repository implements RepositoryInterface.\nSo Repository calls APIInterface. APIInterface is implemented by APIInterfaceImpl. \nThe APIInterfaceImpl finally calls the MyRetrofitInterface.</p>\n\n<p>Here is the flow diagrammatically: </p>\n\n<p>Presenter -> Repository -> APIInterfaceImpl -> MyRetrofitInterface</p>\n\n<p>Once I get login response:</p>\n\n<p>APIInterfaceImpl -> Repository -> Stores the data in cache -> Gives http status code to Presenter</p>\n\n<p>Here is my code:</p>\n\n<p>RepositoryInterface.kt</p>\n\n<pre><code>fun onUserLogin(loginRequest: LoginRequest): LoginResponse\n</code></pre>\n\n<p>Repository.kt</p>\n\n<pre><code>class Repository : RepositoryInterface {\n   private var apiInterface: APIInterface? = null\n\n   override fun onUserLogin(loginRequest: LoginRequest): LoginResponse {\n         return apiInterface?.makeLoginCall(loginRequest)\n   }\n}\n</code></pre>\n\n<p>APIInterface.kt</p>\n\n<pre><code>suspend fun makeLoginCall(loginRequest): LoginResponse?\n</code></pre>\n\n<p>APIInterfaceImpl.kt</p>\n\n<pre><code>override suspend fun makeLoginCall(loginRequest: LoginRequest): LoginResponse? {\n        if (isInternetPresent(context)) {\n            try {\n                val response = MyRetrofitInterface?.loginRequest(loginRequest)?.await()\n                return response\n            } catch (e: Exception) {\n                //How do i return a status code here\n            }\n        } else {\n        //How do i return no internet here\n            return Exception(Constants.NO_INTERNET)\n        }\n}\n</code></pre>\n\n<p>MyRetrofitInterface.kt</p>\n\n<pre><code>@POST(\"login/....\")\nfun loginRequest(@Body loginRequest: LoginRequest): Deferred&lt;LoginResponse&gt;?\n</code></pre>\n\n<p>My questions are:</p>\n\n<ol>\n<li>Is my approach architecturally right? </li>\n<li>How do I pass http error codes or no internet connection in my code</li>\n<li>Any more nicer approach to my solution?</li>\n</ol>\n"}, {"tags": ["android", "mvvm", "kotlin", "viewmodel", "android-viewmodel"], "comments": [{"owner": {"reputation": 324, "user_id": 623483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfd582334a341fbc2691a789fd851296?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/623483/dmitry"}, "edited": false, "score": 0, "creation_date": 1546962912, "post_id": 54077421, "comment_id": 95023120, "body": "did you try something like var localUserAvatar = userAvatar; then use localUserAvatar in &quot;observe&quot;? Looks like closure is copied and this copy is used instead of property &quot;userAvatar&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 1767, "user_id": 5607230, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/-yxTaDUTQbFI/AAAAAAAAAAI/AAAAAAAAACk/PyBMKtiZFCE/photo.jpg?sz=128", "display_name": "Wackaloon", "link": "https://stackoverflow.com/users/5607230/wackaloon"}, "is_accepted": false, "score": 0, "last_activity_date": 1551362361, "last_edit_date": 1551362361, "creation_date": 1551362294, "answer_id": 54927402, "question_id": 54077421, "link": "https://stackoverflow.com/questions/54077421/view-is-null-when-using-kotlinx-synthetic-on-orientation-changed/54927402#54927402", "title": "View is null when using kotlinx synthetic on orientation changed", "body": "<p>View cache is not cleared after calling <code>onDestroyView()</code> when you import only particular views. You need to import the whole package to make it work.</p>\n\n<pre><code>import kotlinx.android.synthetic.*\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 4568938, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zy0EjwC0yJg/AAAAAAAAAAI/AAAAAAAAACg/Ny1pHS5cRC8/photo.jpg?sz=128", "display_name": "waqas akram", "link": "https://stackoverflow.com/users/4568938/waqas-akram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 213, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551362361, "creation_date": 1546875680, "question_id": 54077421, "link": "https://stackoverflow.com/questions/54077421/view-is-null-when-using-kotlinx-synthetic-on-orientation-changed", "title": "View is null when using kotlinx synthetic on orientation changed", "body": "<p><strong>Myview is null in viewmodel's observer if and only if after orientation change</strong></p>\n\n<p>I used kotlinx synthetic all views are initiated but those view throw null object exception that accessed in viewmodel's observer </p>\n\n<p>this is my import </p>\n\n<pre><code> import kotlinx.android.synthetic.main.nav_header_story.user_avatar\n</code></pre>\n\n<p>Everything is good but when orientation is changed then it throws null pointer exception but other views are initiated expect in viewmodel's observer scope</p>\n\n<pre><code>   personInfoViewModel.shortUserInfo.observe(this , Observer {shortInfo -&gt;\n\n       userAvatar.setOnClickListener {\n\n        })\n</code></pre>\n\n<p>I couldn't find where the things going wrong then i tried </p>\n\n<pre><code>    userAvatar = nav_view.getHeaderView(0).findViewById(R.id.user_avatar)\n</code></pre>\n\n<p>and access this works for me every time even after orientation changed</p>\n\n<pre><code>    personInfoViewModel.shortUserInfo.observe(this , Observer {shortInfo -&gt;\n\n       userAvatar.setOnClickListener {\n\n        })\n</code></pre>\n\n<p><strong>I strange what's wrong with</strong></p>\n\n<pre><code>kotlinx.android.synthetic.main.nav_header_story.user_avatar\n</code></pre>\n\n<p><strong>after orientation changed</strong> </p>\n"}, {"tags": ["android", "node.js", "kotlin", "retrofit", "retrofit2"], "comments": [{"owner": {"reputation": 1, "user_id": 10313448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tbDlY.jpg?s=128&g=1", "display_name": "Tanny", "link": "https://stackoverflow.com/users/10313448/tanny"}, "edited": false, "score": 0, "creation_date": 1546872342, "post_id": 54076482, "comment_id": 94986169, "body": "I am using retrofit2 and I have also shared my android app screenshot"}, {"owner": {"reputation": 3518, "user_id": 4959547, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIjar.png?s=128&g=1", "display_name": "molamk", "link": "https://stackoverflow.com/users/4959547/molamk"}, "edited": false, "score": 0, "creation_date": 1546874309, "post_id": 54076482, "comment_id": 94987351, "body": "What android emulator are you using?"}, {"owner": {"reputation": 5935, "user_id": 10182897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PuvGT.jpg?s=128&g=1", "display_name": "Ashish", "link": "https://stackoverflow.com/users/10182897/ashish"}, "edited": false, "score": 0, "creation_date": 1546942871, "post_id": 54076482, "comment_id": 95011659, "body": "is that your localhost ip and is it work on postman ?"}, {"owner": {"reputation": 1, "user_id": 10313448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tbDlY.jpg?s=128&g=1", "display_name": "Tanny", "link": "https://stackoverflow.com/users/10313448/tanny"}, "edited": false, "score": 0, "creation_date": 1546951130, "post_id": 54076482, "comment_id": 95015977, "body": "I am not using an emulator, my laptop is running on i3, due to which it is very slow to run, an emulator. I have run my app on my android phone. I have provided a screenshot of it."}, {"owner": {"reputation": 1, "user_id": 10313448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tbDlY.jpg?s=128&g=1", "display_name": "Tanny", "link": "https://stackoverflow.com/users/10313448/tanny"}, "edited": false, "score": 0, "creation_date": 1546951372, "post_id": 54076482, "comment_id": 95016098, "body": "yes, it&#39;s my localhost IP and yes it is work on postman"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 10313448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tbDlY.jpg?s=128&g=1", "display_name": "Tanny", "link": "https://stackoverflow.com/users/10313448/tanny"}, "is_accepted": false, "score": 0, "last_activity_date": 1556634605, "creation_date": 1556634605, "answer_id": 55923151, "question_id": 54076482, "link": "https://stackoverflow.com/questions/54076482/failed-to-connect-to-local-host/55923151#55923151", "title": "Failed to connect to local host", "body": "<p>I have found the answer. My localhost is not connected with my android phone, that's why its showing port error. So, to connect my android phone to localhost. I actually public my localhost using \"ngrok\". Then, my data is loading on my android phone. Thank you.</p>\n"}], "owner": {"reputation": 1, "user_id": 10313448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tbDlY.jpg?s=128&g=1", "display_name": "Tanny", "link": "https://stackoverflow.com/users/10313448/tanny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567762471, "creation_date": 1546872054, "last_edit_date": 1556634842, "question_id": 54076482, "link": "https://stackoverflow.com/questions/54076482/failed-to-connect-to-local-host", "title": "Failed to connect to local host", "body": "<p>I am new to the Android App Development. I am making a demo Android app in Android studio(Kotlin). My app is basically is a server app. I am using retrofit as a library and node.js as a backend development and I am not using any database, instead of Database, I am using JSON(gson retrofit converter). So, There is a recyclerview in which, I want to fetch data, but when, I run my app in my android phone. It shows java.net socket Timeout Exception, fail to connect. At, First, I have changed my 127.0.0.1:9000 to 10.0.2.2:9000 port, but nothing happened. It showing the same thing. And I am using windows pc. I will provide my .js file and my front code. Thank you in advance.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>//my node.js codes\r\n\r\nvar express = require('express');\r\nvar app = express();\r\nvar fs = require(\"fs\");\r\n\r\nvar bodyParser = require('body-parser')\r\napp.use(bodyParser.json()); \r\napp.use(bodyParser.urlencoded({\r\n    extended: true\r\n}));\r\n\r\n//Arbitrary ID manager since we don't use a database\r\nvar index = 5;\r\n\r\n// Initializing Destinations Array.. It will behave like a dummy database \r\nvar destinations = [{\r\n    \"id\": 1,\r\n    \"city\": \"Mumbai\",\r\n    \"description\": \"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce accumsan quis justo quis hendrerit. Curabitur a ante neque. Fusce nec mauris sodales, auctor sem at, luctus eros. Praesent aliquam nibh neque. Duis ut suscipit justo, id consectetur orci. Curabitur ultricies nunc eu enim dignissim, sed laoreet odio blandit.\",\r\n    \"country\" : \"India\"\r\n}, {\r\n    \"id\": 2,\r\n    \"city\": \"Melbourne\",\r\n    \"description\": \"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce accumsan quis justo quis hendrerit. Curabitur a ante neque. Fusce nec mauris sodales, auctor sem at, luctus eros. Praesent aliquam nibh neque. Duis ut suscipit justo, id consectetur orci. Curabitur ultricies nunc eu enim dignissim, sed laoreet odio blandit.\",\r\n    \"country\" : \"Australia\"\r\n}, {\r\n    \"id\": 3,\r\n    \"city\": \"Washington DC\",\r\n    \"description\": \"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce accumsan quis justo quis hendrerit. Curabitur a ante neque. Fusce nec mauris sodales, auctor sem at, luctus eros. Praesent aliquam nibh neque. Duis ut suscipit justo, id consectetur orci. Curabitur ultricies nunc eu enim dignissim, sed laoreet odio blandit.\",\r\n    \"country\" : \"USA\"\r\n}, {\r\n    \"id\": 4,\r\n    \"city\": \"New Delhi\",\r\n    \"description\": \"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce accumsan quis justo quis hendrerit. Curabitur a ante neque. Fusce nec mauris sodales, auctor sem at, luctus eros. Praesent aliquam nibh neque. Duis ut suscipit justo, id consectetur orci. Curabitur ultricies nunc eu enim dignissim, sed laoreet odio blandit.\",\r\n    \"country\" : \"India\"\r\n}, {\r\n    \"id\": 5,\r\n    \"city\": \"Tokyo\",\r\n    \"description\": \"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce accumsan quis justo quis hendrerit. Curabitur a ante neque. Fusce nec mauris sodales, auctor sem at, luctus eros. Praesent aliquam nibh neque. Duis ut suscipit justo, id consectetur orci. Curabitur ultricies nunc eu enim dignissim, sed laoreet odio blandit.\",\r\n    \"country\" : \"Japan\"\r\n}]\r\n\r\n// A promo message to user \r\nvar message = \"Black Friday! Get 50% cachback on saving your first spot.\";\r\n\r\napp.get('/messages', function (req, res) {\r\n    res.end(JSON.stringify(message));\r\n})\r\n\r\n// Get the list of destinations, convert it to JSON and send it back to client \r\napp.get('/destination', function (req, res) {\r\n    var count = req.query.count != undefined ? req.query.count : req.query.count = 100;\r\n    if(req.query.country){\r\n        var countrySpots = destinations.filter(function(destination) {\r\n            return destination.country == req.query.country\r\n        });\r\n        res.end(JSON.stringify(countrySpots.slice(0, count)));\r\n    }\r\n    \r\n    res.end(JSON.stringify(destinations.slice(0, count)));\r\n})\r\n\r\n// Get one particular Destination using ID \r\napp.get('/destination/:id', function (req, res) {\r\n    for (var i = 0; i &lt; destinations.length; i++) {\r\n        if(destinations[i].id == req.params.id){\r\n            res.end(JSON.stringify(destinations[i]));\r\n        }\r\n    }\r\n})\r\n\r\n// Create a new Destination and add it to existing Destinations list \r\napp.post('/destination', function (req, res) {\r\n    var newDestination = {\r\n        \"city\": req.body.city,\r\n        \"description\": req.body.description,\r\n        \"country\" : req.body.country,\r\n        \"id\": index + 1\r\n    }\r\n\r\n    index++;\r\n\r\n    destinations.push(newDestination);\r\n    res.status(201).end(JSON.stringify(newDestination));\r\n})\r\n\r\n// Update a Destination \r\napp.put('/destination/:id', function (req, res) {\r\n    var destination;\r\n    for (var i = 0; i &lt; destinations.length; i++) {\r\n        if(destinations[i].id == req.params.id){\r\n            destinations[i].city = req.body.city;\r\n            destinations[i].country = req.body.country;\r\n            destinations[i].description = req.body.description;\r\n            destination = destinations[i];\r\n        }\r\n    }\r\n\r\n    res.end(JSON.stringify(destination));\r\n})\r\n\r\n// Delete a Destination \r\napp.delete('/destination/:id', function (req, res) {\r\n    for (var i = 0; i &lt; destinations.length; i++) {\r\n        if(destinations[i].id == req.params.id){\r\n            destinations.splice(i, 1);\r\n            res.status(204).end(JSON.stringify(destinations[i]));\r\n        }\r\n    }\r\n});\r\n\r\n// Home Page \r\napp.get('/', (req, res) =&gt; res.send('Welcome! You are all set to go!'))\r\n\r\n// Configure server \r\nvar server = app.listen(9000, '127.0.0.1', function (req, res) {\r\n\r\n    var host = server.address().address\r\n    var port = server.address().port\r\n\r\n    console.log(`Server running at http://${host}:${port}/`);\r\n})</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>DestinationListActivity</p>\n\n<pre><code>class DestinationListActivity : AppCompatActivity() {\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_destiny_list)\n\n    setSupportActionBar(toolbar)\n    toolbar.title = title\n\n    fab.setOnClickListener {\n        val intent = Intent(this@DestinationListActivity, DestinationCreateActivity::class.java)\n        startActivity(intent)\n    }\n}\n\noverride fun onResume() {\n    super.onResume()\n\n    loadDestinations()\n}\n\nprivate fun loadDestinations() {\n\n    // To be replaced by retrofit code\n    //  destiny_recycler_view.adapter = DestinationAdapter(SampleData.DESTINATIONS)\n\n    val destination = ServiceBuilder.buildService(DestinationService::class.java)\n\n    val requestCall = destination.getDestinationList()\n\n    requestCall.enqueue(object : Callback&lt;List&lt;Destination&gt;&gt; {\n        override fun onFailure(call: Call&lt;List&lt;Destination&gt;&gt;, t: Throwable) {\n            Toast.makeText(this@DestinationListActivity , \"Error Occures\" + t.toString(), Toast.LENGTH_LONG).show()\n        }\n\n        override fun onResponse(call: Call&lt;List&lt;Destination&gt;&gt;, response: Response&lt;List&lt;Destination&gt;&gt;) {\n            if(response.isSuccessful) {\n                val destinationList = response.body()!!\n                destiny_recycler_view.adapter = DestinationAdapter(destinationList)\n            } else if(response.code() == 401) {\n                Toast.makeText(this@DestinationListActivity, \"Your session is over plz login again\", Toast.LENGTH_LONG).show()\n            }\n            else {\n                Toast.makeText(this@DestinationListActivity, \"Failed to receive items\", Toast.LENGTH_LONG).show()\n            }\n        }\n    })\n}\n</code></pre>\n\n<p>}</p>\n\n<p>//ServiceBuilder class</p>\n\n<pre><code>object ServiceBuilder {\n\n// Before release, change this URL to your live server URL such as \"https://smartherd.com/\"\nprivate const val URL = \"http://47.247.190.247:9000/\"\n\n// Create OkHttp Client\nprivate val okHttp = OkHttpClient.Builder()\n                                  .connectTimeout(100, TimeUnit.SECONDS)\n                                  .readTimeout(100,TimeUnit.SECONDS)\n\n// Create Retrofit Builder\nprivate val builder = Retrofit.Builder().baseUrl(URL)\n    .addConverterFactory(GsonConverterFactory.create())\n    .client(okHttp.build())\n\n// Create Retrofit Instance\nprivate val retrofit = builder.build()\n\nfun &lt;T&gt; buildService(serviceType: Class&lt;T&gt;): T {\n    return retrofit.create(serviceType)\n}\n</code></pre>\n\n<p>}</p>\n\n<p>//Interface class</p>\n\n<pre><code>interface DestinationService {\n\n@GET(\"destination\")\nfun getDestinationList(): Call&lt;List&lt;Destination&gt;&gt;\n</code></pre>\n\n<p>}</p>\n\n<p><a href=\"https://i.stack.imgur.com/oJXzS.jpg\" rel=\"nofollow noreferrer\">It is a photo of my android phone</a></p>\n"}, {"tags": ["android", "datetime", "kotlin", "jodatime", "android-jodatime"], "comments": [{"owner": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "edited": false, "score": 0, "creation_date": 1546935413, "post_id": 54076033, "comment_id": 95007785, "body": "Are you using Joda-Time? If so, please tag the question accordingly to attract the right experts."}, {"owner": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "edited": false, "score": 0, "creation_date": 1546935479, "post_id": 54076033, "comment_id": 95007815, "body": "Related: <a href=\"https://stackoverflow.com/questions/48666263/java-date-parsing-why-do-i-get-an-error\">Java: Date parsing, why do I get an error</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3759, "user_id": 5434346, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/77a6965f12ed6d5082ed4a990f715f59?s=128&d=identicon&r=PG&f=1", "display_name": "K.Os", "link": "https://stackoverflow.com/users/5434346/k-os"}, "edited": false, "score": 0, "creation_date": 1546871644, "post_id": 54076292, "comment_id": 94985764, "body": "But how to pass the date to the Calendar?"}, {"owner": {"reputation": 16268, "user_id": 603270, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cbfe6e57e0fa59928be4898a7be08c5d?s=128&d=identicon&r=PG", "display_name": "shkschneider", "link": "https://stackoverflow.com/users/603270/shkschneider"}, "reply_to_user": {"reputation": 3759, "user_id": 5434346, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/77a6965f12ed6d5082ed4a990f715f59?s=128&d=identicon&r=PG&f=1", "display_name": "K.Os", "link": "https://stackoverflow.com/users/5434346/k-os"}, "edited": false, "score": 0, "creation_date": 1546872075, "post_id": 54076292, "comment_id": 94986019, "body": "I believe the <code>SimpleDateFormat</code> I posted should work. Code not run but you got the idea."}, {"owner": {"reputation": 3759, "user_id": 5434346, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/77a6965f12ed6d5082ed4a990f715f59?s=128&d=identicon&r=PG&f=1", "display_name": "K.Os", "link": "https://stackoverflow.com/users/5434346/k-os"}, "edited": false, "score": 1, "creation_date": 1546872708, "post_id": 54076292, "comment_id": 94986383, "body": "It does not work - I am using this <a href=\"https://www.epochconverter.com\" rel=\"nofollow noreferrer\">epochconverter.com</a> to check"}], "tags": [], "owner": {"reputation": 16268, "user_id": 603270, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cbfe6e57e0fa59928be4898a7be08c5d?s=128&d=identicon&r=PG", "display_name": "shkschneider", "link": "https://stackoverflow.com/users/603270/shkschneider"}, "is_accepted": false, "score": 0, "last_activity_date": 1546872050, "last_edit_date": 1546872050, "creation_date": 1546871449, "answer_id": 54076292, "question_id": 54076033, "link": "https://stackoverflow.com/questions/54076033/how-to-parse-string-date-to-other-date-for-other-timezone/54076292#54076292", "title": "How to parse String date to other date for other timezone", "body": "<p>Out of my head comes the <code>TimeZone</code> class:</p>\n\n<pre><code>val date =  \"2019-01-07T13:54:00+0000\"\nval zone = TimeZone.getTimeZone(\"Asia/Kolkata\")\n</code></pre>\n\n<p>Which <code>Calendar</code> understands:</p>\n\n<pre><code>val calendar = Calendar.getInstance(zone)\n</code></pre>\n\n<p>Then a <code>SimpleDateFormat</code> should do:</p>\n\n<pre><code>val format = \"yyyy-MM-dd'T'HH:mm:ss.SSSZ\"\nval simpleDateFormat = new SimpleDateFormat(format, Locale.ENGLISH);\ncalendar.setTime(sdf.parse(date));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "is_accepted": false, "score": 1, "last_activity_date": 1546936025, "creation_date": 1546936025, "answer_id": 54087840, "question_id": 54076033, "link": "https://stackoverflow.com/questions/54076033/how-to-parse-string-date-to-other-date-for-other-timezone/54087840#54087840", "title": "How to parse String date to other date for other timezone", "body": "<p>It\u2019s a two-step process: You parse into the offset or time zone that is in the string, then you convert to your desired time zone. I can write only Java code, I trust you to translate:</p>\n\n<pre><code>    DateTimeZone zone = DateTimeZone.forID(\"Asia/Kolkata\");\n    String date = \"2019-01-07T13:54:00+0000\";\n    DateTime dt = ISODateTimeFormat.dateTimeParser()\n            .parseDateTime(date)\n            .withZone(zone);\n    System.out.println(dt);\n</code></pre>\n\n<p>Output is:</p>\n\n<blockquote>\n  <p>2019-01-07T19:24:00.000+05:30</p>\n</blockquote>\n\n<p>You were almost there. I have textually just swapped the calls to <code>withZone</code> and <code>parseDateTime</code>.</p>\n"}], "owner": {"reputation": 3759, "user_id": 5434346, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/77a6965f12ed6d5082ed4a990f715f59?s=128&d=identicon&r=PG&f=1", "display_name": "K.Os", "link": "https://stackoverflow.com/users/5434346/k-os"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1546936025, "creation_date": 1546870502, "last_edit_date": 1546935539, "question_id": 54076033, "link": "https://stackoverflow.com/questions/54076033/how-to-parse-string-date-to-other-date-for-other-timezone", "title": "How to parse String date to other date for other timezone", "body": "<p>Given I have such String date </p>\n\n<pre><code>val date =  \"2019-01-07T13:54:00+0000\"\n</code></pre>\n\n<p>How to parse this date to other timezone e.g \"Asia/Kolkata\"?</p>\n\n<p>I was trying:</p>\n\n<pre><code>val zone = DateTimeZone.forID(\"Asia/Kolkata\")\n\nval resultMillis = ISODateTimeFormat\n    .dateTimeParser()\n    .withZone(zone)\n    .parseDateTime(date)\n</code></pre>\n\n<p>But it did not worked</p>\n"}, {"tags": ["kotlin", "rx-java", "rx-java2", "coroutine", "clean-architecture"], "comments": [{"owner": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1546870356, "post_id": 54075937, "comment_id": 94984990, "body": "<i>makes the presentation layer unaware of what the usecase is using to execute it&#39;s logic</i> - isn&#39;t that a good thing?"}, {"owner": {"reputation": 2433, "user_id": 5036979, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206947226739641/picture?type=large", "display_name": "Ahmed Ashraf", "link": "https://stackoverflow.com/users/5036979/ahmed-ashraf"}, "reply_to_user": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1546876192, "post_id": 54075937, "comment_id": 94988383, "body": "@TimCastelijns of course it is, my concern is about unit testing when using the callback approach."}, {"owner": {"reputation": 3293, "user_id": 1853785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TJlNB.jpg?s=128&g=1", "display_name": "Omar Mainegra", "link": "https://stackoverflow.com/users/1853785/omar-mainegra"}, "edited": false, "score": 0, "creation_date": 1546877062, "post_id": 54075937, "comment_id": 94988887, "body": "You should pick one approach and stick to it, if you use MVVM, it actually makes sense to use <code>Observable</code> in the ViewModels and the Views and not Callbacks"}, {"owner": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "reply_to_user": {"reputation": 3293, "user_id": 1853785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TJlNB.jpg?s=128&g=1", "display_name": "Omar Mainegra", "link": "https://stackoverflow.com/users/1853785/omar-mainegra"}, "edited": false, "score": 0, "creation_date": 1546878890, "post_id": 54075937, "comment_id": 94989913, "body": "@OmarMainegra architectural patterns like MVVM have nothing to do with rxjava etc"}, {"owner": {"reputation": 3293, "user_id": 1853785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TJlNB.jpg?s=128&g=1", "display_name": "Omar Mainegra", "link": "https://stackoverflow.com/users/1853785/omar-mainegra"}, "reply_to_user": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1546880686, "post_id": 54075937, "comment_id": 94990821, "body": "@TimCastelijns I didn&#39;t say so, I said <code>Observable</code>, and in his concrete case RxJava&#39;s <code>Observable</code> does make a lot of sense in MVVM"}, {"owner": {"reputation": 3293, "user_id": 1853785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TJlNB.jpg?s=128&g=1", "display_name": "Omar Mainegra", "link": "https://stackoverflow.com/users/1853785/omar-mainegra"}, "reply_to_user": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1546880767, "post_id": 54075937, "comment_id": 94990857, "body": "@TimCastelijns, It could be <code>LiveData</code> as well, which BTW are <code>Observable</code>s too"}, {"owner": {"reputation": 2433, "user_id": 5036979, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206947226739641/picture?type=large", "display_name": "Ahmed Ashraf", "link": "https://stackoverflow.com/users/5036979/ahmed-ashraf"}, "reply_to_user": {"reputation": 3293, "user_id": 1853785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TJlNB.jpg?s=128&g=1", "display_name": "Omar Mainegra", "link": "https://stackoverflow.com/users/1853785/omar-mainegra"}, "edited": false, "score": 0, "creation_date": 1546885919, "post_id": 54075937, "comment_id": 94993145, "body": "@OmarMainegra I&#39;m aware of what you&#39;re suggesting, my problem still stands, having the domain layer not Rx specific, or at least preventing exposure of such streams."}, {"owner": {"reputation": 3293, "user_id": 1853785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TJlNB.jpg?s=128&g=1", "display_name": "Omar Mainegra", "link": "https://stackoverflow.com/users/1853785/omar-mainegra"}, "edited": false, "score": 0, "creation_date": 1546886731, "post_id": 54075937, "comment_id": 94993491, "body": "But why want to prevent that, it looks like over-engineering, there is nothing wrong on using RxJava in your ViewModels"}, {"owner": {"reputation": 2433, "user_id": 5036979, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206947226739641/picture?type=large", "display_name": "Ahmed Ashraf", "link": "https://stackoverflow.com/users/5036979/ahmed-ashraf"}, "reply_to_user": {"reputation": 3293, "user_id": 1853785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TJlNB.jpg?s=128&g=1", "display_name": "Omar Mainegra", "link": "https://stackoverflow.com/users/1853785/omar-mainegra"}, "edited": false, "score": 0, "creation_date": 1546887384, "post_id": 54075937, "comment_id": 94993746, "body": "@OmarMainegra you&#39;re looking at it the MVVM way, I&#39;m ok with using Rx or LiveData or even ObservableFields in the presentation layer (ViewModel), the issue is that I don&#39;t want the ViewModel to know what the usecase is using to execute, so that the logic inside of it can be changed without changing anything in presentation, callbacks solve that, but it&#39;s not quite the best approach when it comes to unit testing."}, {"owner": {"reputation": 3293, "user_id": 1853785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TJlNB.jpg?s=128&g=1", "display_name": "Omar Mainegra", "link": "https://stackoverflow.com/users/1853785/omar-mainegra"}, "edited": false, "score": 0, "creation_date": 1546890964, "post_id": 54075937, "comment_id": 94995281, "body": "@AhmedAshrafGamal Like I said before, IMHO that&#39;s over-engineering, I don&#39;t see anything wrong in that, actually the opposite, what you can&#39;t expose is the implementation details (i.e. using a <code>Subject</code> instead of an <code>Observable</code>)"}], "owner": {"reputation": 2433, "user_id": 5036979, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206947226739641/picture?type=large", "display_name": "Ahmed Ashraf", "link": "https://stackoverflow.com/users/5036979/ahmed-ashraf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1546870047, "creation_date": 1546870047, "question_id": 54075937, "link": "https://stackoverflow.com/questions/54075937/an-interchangeable-substitute-to-rxjava-in-the-domain-layer", "title": "An interchangeable substitute to RxJava in the domain layer", "body": "<p>A lot of articles and open source projects out there prefer making usecases return an Observable or one of it's variants, I currently go for that too, but I have doubts.\nAlthough, I see the benefits of this in unit testing as the RxJava2 testing api is definitely rich, I suspect this is best way to go.</p>\n\n<p>What if I wanted to refactor and use Coroutines instead for the sake of an example?.\nThe above approach will undoubtedly require changes in both domain and presentation layers (changes in both the affected area and the one using it).</p>\n\n<p>On the other side, making usecases receive lambda params or callbacks in any shape, makes the presentation layer unaware of what the usecase is using to execute it's logic, but the thing is, with this approach I'll have to figure out how to test the usecases myself.</p>\n\n<p>Is there an approach I'm not seeing that unties use cases from this burden?</p>\n"}, {"tags": ["android", "kotlin", "companion-object"], "answers": [{"comments": [{"owner": {"reputation": 423, "user_id": 6566755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4zOSq.jpg?s=128&g=1", "display_name": "Hafiz Hamza", "link": "https://stackoverflow.com/users/6566755/hafiz-hamza"}, "edited": false, "score": 0, "creation_date": 1547035383, "post_id": 54076015, "comment_id": 95051497, "body": "Thanks for the answer @Raifur-rahim. I already tried it and it didn&#39;t work because I&#39;m working in an Android library, and this library is being used in more than one app, so adding this name <code>MainApplication</code> in <code>AndroidManifest.xml</code> causes merging problems. However, I found a solution and will post it."}], "tags": [], "owner": {"reputation": 330, "user_id": 5883627, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-F8H7Ak1s060/AAAAAAAAAAI/AAAAAAAAABg/h1Tc7mLrG-I/photo.jpg?sz=128", "display_name": "Raifur-rahim", "link": "https://stackoverflow.com/users/5883627/raifur-rahim"}, "is_accepted": false, "score": 28, "last_activity_date": 1557585973, "last_edit_date": 1557585973, "creation_date": 1546870406, "answer_id": 54076015, "question_id": 54075649, "link": "https://stackoverflow.com/questions/54075649/access-application-context-in-companion-object-in-kotlin/54076015#54076015", "title": "Access application context in companion object in kotlin", "body": "<p>please see this <a href=\"https://gist.github.com/paraya3636/bf8108a75eb49323e56c0c90dd0747e0\" rel=\"noreferrer\">go to link</a></p>\n\n<pre><code>class MainApplication : Application() {\n\n    init {\n        instance = this\n    }\n\n    companion object {\n        private var instance: MainApplication? = null\n\n        fun applicationContext() : Context {\n            return instance!!.applicationContext\n        }\n    }\n\n    override fun onCreate() {\n        super.onCreate()\n        // initialize for any\n\n        // Use ApplicationContext.\n        // example: SharedPreferences etc...\n        val context: Context = MainApplication.applicationContext()\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10859, "user_id": 3710865, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oROuW.jpg?s=128&g=1", "display_name": "sasikumar", "link": "https://stackoverflow.com/users/3710865/sasikumar"}, "is_accepted": false, "score": 9, "last_activity_date": 1546870497, "creation_date": 1546870497, "answer_id": 54076030, "question_id": 54075649, "link": "https://stackoverflow.com/questions/54075649/access-application-context-in-companion-object-in-kotlin/54076030#54076030", "title": "Access application context in companion object in kotlin", "body": "<p>Extends Application class like this  </p>\n\n<pre><code>import android.app.Application\nimport android.content.Context\n\nclass MyApplication : Application() {\n\noverride fun onCreate() {\nsuper.onCreate()\nMyApplication.appContext = applicationContext\n }\n\ncompanion object {\n\nlateinit  var appContext: Context\n\n}\n}\n</code></pre>\n\n<p>then get context like this</p>\n\n<pre><code>     val context = MyApplication.appContext\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2719, "user_id": 1947601, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/OkoEH.jpg?s=128&g=1", "display_name": "0xMatthewGroves", "link": "https://stackoverflow.com/users/1947601/0xmatthewgroves"}, "edited": false, "score": 1, "creation_date": 1572161015, "post_id": 54110003, "comment_id": 103470042, "body": "FYI you can drop the Companion reference by adding @JvmStatic to your setContext method."}], "tags": [], "owner": {"reputation": 423, "user_id": 6566755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4zOSq.jpg?s=128&g=1", "display_name": "Hafiz Hamza", "link": "https://stackoverflow.com/users/6566755/hafiz-hamza"}, "is_accepted": true, "score": 14, "last_activity_date": 1547036299, "creation_date": 1547036299, "answer_id": 54110003, "question_id": 54075649, "link": "https://stackoverflow.com/questions/54075649/access-application-context-in-companion-object-in-kotlin/54110003#54110003", "title": "Access application context in companion object in kotlin", "body": "<p>Actually I'm working inside an Android library and the class is abstract, so can't go with the already suggested solutions. However, I found way to do that.</p>\n\n<ol>\n<li>Creat a <code>lateinit</code> Context field inside companion object. </li>\n</ol>\n\n<pre><code>abstract class MyClass {\n\n    companion object {\n\n        private lateinit var context: Context\n\n        fun setContext(con: Context) {\n            context=con\n        }\n    }\n}\n</code></pre>\n\n<ol start=\"2\">\n<li>And then set it after the app has started</li>\n</ol>\n\n<pre><code>public class WelcomeActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_welcome);\n\n        MyClass.Companion.setContext(this);\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 423, "user_id": 6566755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4zOSq.jpg?s=128&g=1", "display_name": "Hafiz Hamza", "link": "https://stackoverflow.com/users/6566755/hafiz-hamza"}, "edited": false, "score": 0, "creation_date": 1547041913, "post_id": 54110148, "comment_id": 95055435, "body": "Thanks for the answer @WarrenFaith. I already tried this and have also posted this approach as an answer."}, {"owner": {"reputation": 56118, "user_id": 180538, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/241aa8bb2a154108277e22ed03508ab0?s=128&d=identicon&r=PG", "display_name": "WarrenFaith", "link": "https://stackoverflow.com/users/180538/warrenfaith"}, "reply_to_user": {"reputation": 423, "user_id": 6566755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4zOSq.jpg?s=128&g=1", "display_name": "Hafiz Hamza", "link": "https://stackoverflow.com/users/6566755/hafiz-hamza"}, "edited": false, "score": 0, "creation_date": 1547122548, "post_id": 54110148, "comment_id": 95088157, "body": "I have seen that but there are multiple down sides: 1. you actually have to &quot;init&quot; your library by hand somewhere while your ContentProvider would do that automatically 2. <code>lateinit</code> can lead to runtime crashes if the initialization wasn&#39;t done or done too late (and your library was called somewhere else first). Anyway if your solution is working and the disadvantages are manageable for you, great!"}], "tags": [], "owner": {"reputation": 56118, "user_id": 180538, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/241aa8bb2a154108277e22ed03508ab0?s=128&d=identicon&r=PG", "display_name": "WarrenFaith", "link": "https://stackoverflow.com/users/180538/warrenfaith"}, "is_accepted": false, "score": 1, "last_activity_date": 1547037213, "last_edit_date": 1547037213, "creation_date": 1547036756, "answer_id": 54110148, "question_id": 54075649, "link": "https://stackoverflow.com/questions/54075649/access-application-context-in-companion-object-in-kotlin/54110148#54110148", "title": "Access application context in companion object in kotlin", "body": "<p>There is a super cool article from the guys from Firebase explaining <a href=\"https://firebase.googleblog.com/2016/12/how-does-firebase-initialize-on-android.html\" rel=\"nofollow noreferrer\">how their SDK gets hold of the context</a>.</p>\n\n<p>Basically my contentprovider looks like this:</p>\n\n<pre><code>/**\n * This content provider is only responsible to inject the application context into the common module.\n */\nclass ContextProvider : ContentProvider() {\n\n    companion object {\n        private val TAG = ContextProvider::class.java.simpleName\n    }\n\n    override fun onCreate(): Boolean {\n        context?.let {\n            Common.setContext(it)\n            return true\n        }\n        Logger.e(TAG, \"Context injection to common failed. Context is null! Check ContextProvider registration in the Manifest!\")\n        return false\n    }\n\n    override fun query(uri: Uri, projection: Array&lt;String&gt;?, selection: String?, selectionArgs: Array&lt;String&gt;?, sortOrder: String?): Cursor? = null\n\n    override fun getType(uri: Uri): String? = null\n\n    override fun insert(uri: Uri, values: ContentValues?): Uri? = null\n\n    override fun delete(uri: Uri, selection: String?, selectionArgs: Array&lt;String&gt;?): Int = 0\n\n    override fun update(uri: Uri, values: ContentValues?, selection: String?, selectionArgs: Array&lt;String&gt;?): Int = 0\n}\n</code></pre>\n\n<p>And the <code>Common</code> object, which I treat like an sibling of any <code>Application</code> class looks like this:</p>\n\n<pre><code>/**\n * Partially working like an Application class by holding the appContext which makes it accessible inside this module.\n */\n@SuppressLint(\"StaticFieldLeak\")\nobject Common {\n    /**\n     * App appContext\n     */\n    @Volatile\n    lateinit var appContext: Context\n\n    var isStoreVersion: Boolean = false\n\n    fun setContext(context: Context) {\n        appContext = context\n    }\n}\n</code></pre>\n\n<p>As you can see I also enriched the <code>Common</code> object with a flag to store if the current build is a store version or not. Mainly because the BuildConfig of the app module is also not available in a module or library.</p>\n\n<p>Don't forget to add the ContentProvider to the AndroidManifest of your library within the <code>&lt;application&gt;</code> tag</p>\n\n<pre><code>&lt;provider android:name=\".util.ContextProvider\"\n          android:authorities=\"${applicationId}.common.util.contextprovider\"\n          android:exported=\"false\" /&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2531, "user_id": 3073415, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001421588810/picture?type=large", "display_name": "Ganesh Jogam", "link": "https://stackoverflow.com/users/3073415/ganesh-jogam"}, "edited": false, "score": 0, "creation_date": 1557584433, "post_id": 56091124, "comment_id": 98818739, "body": "make sure to call Test.init(context) before using Test. sharedPreferences usually in Application oncreate method"}, {"owner": {"reputation": 22959, "user_id": 6998684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqR2Z.jpg?s=128&g=1", "display_name": "IgorGanapolsky", "link": "https://stackoverflow.com/users/6998684/igorganapolsky"}, "edited": false, "score": 0, "creation_date": 1593640172, "post_id": 56091124, "comment_id": 110855367, "body": "This doesn&#39;t compile"}], "tags": [], "owner": {"reputation": 2531, "user_id": 3073415, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001421588810/picture?type=large", "display_name": "Ganesh Jogam", "link": "https://stackoverflow.com/users/3073415/ganesh-jogam"}, "is_accepted": false, "score": -1, "last_activity_date": 1557585922, "last_edit_date": 1557585922, "creation_date": 1557583918, "answer_id": 56091124, "question_id": 54075649, "link": "https://stackoverflow.com/questions/54075649/access-application-context-in-companion-object-in-kotlin/56091124#56091124", "title": "Access application context in companion object in kotlin", "body": "<pre><code>class Test { \n\n    companion object {\n        lateinit var sharedPreferences: SharedPreferences\n\n        fun init(context: Context) {\n            // to prevent multiple initialization\n            if (!Companion::sharedPreferences.isInitialized) {\n                sharedPreferences = context.getSharedPreferences(\"preference_name\", Context.MODE_PRIVATE)   \n            }\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 423, "user_id": 6566755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4zOSq.jpg?s=128&g=1", "display_name": "Hafiz Hamza", "link": "https://stackoverflow.com/users/6566755/hafiz-hamza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41263, "favorite_count": 2, "accepted_answer_id": 54110003, "answer_count": 5, "score": 27, "last_activity_date": 1557585973, "creation_date": 1546868897, "last_edit_date": 1547035923, "question_id": 54075649, "link": "https://stackoverflow.com/questions/54075649/access-application-context-in-companion-object-in-kotlin", "title": "Access application context in companion object in kotlin", "body": "<p>How can we access application context inside companion object in Android kotlin?\nI have a companion object inside an abstract class and I want to access context to read Shared Preferences, but I'm not able to get the context.</p>\n\n<p><strong>UPDATE:</strong> I'm working with this stuff in an Android library and also the class that I'm working in is abstract</p>\n"}, {"tags": ["android", "unit-testing", "kotlin", "code-coverage", "jacoco"], "answers": [{"tags": [], "owner": {"reputation": 7743, "user_id": 244993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf0ce44e342943d56f115165b7d78bdd?s=128&d=identicon&r=PG", "display_name": "Godin", "link": "https://stackoverflow.com/users/244993/godin"}, "is_accepted": true, "score": 5, "last_activity_date": 1547220928, "last_edit_date": 1547220928, "creation_date": 1546882403, "answer_id": 54079126, "question_id": 54075424, "link": "https://stackoverflow.com/questions/54075424/kotlin-jacoco-coverage-not-showing-for-static-methods-companion-in-android/54079126#54079126", "title": "Kotlin Jacoco coverage not showing for static methods (companion) in Android", "body": "<blockquote>\n  <p>following tutorial <a href=\"https://proandroiddev.com/unified-code-coverage-for-android-revisited-44789c9b722f\" rel=\"nofollow noreferrer\">https://proandroiddev.com/unified-code-coverage-for-android-revisited-44789c9b722f</a> </p>\n</blockquote>\n\n<p>after cloning of example from the same tutorial in its state as of today (<a href=\"https://github.com/rafaeltoledo/unified-code-coverage-android/tree/57ebcffedeaf9063cd2caca35bcbe1333720e81e\" rel=\"nofollow noreferrer\">HEAD commit</a>)</p>\n\n<pre><code>git clone https://github.com/rafaeltoledo/unified-code-coverage-android.git\ncd unified-code-coverage-android\ngit checkout kotlin-coverage\n</code></pre>\n\n<p>addition of companion object into <code>MainActivity</code></p>\n\n<pre><code> class MainActivity : AppCompatActivity() {\n\n+    companion object {\n+      fun executed() {\n+      }\n+\n+      fun notExecuted() {\n+      }\n+    }\n+\n     override fun onCreate(savedInstanceState: Bundle?) {\n         super.onCreate(savedInstanceState)\n         setContentView(R.layout.activity_main)\n\n+        executed()\n</code></pre>\n\n<p>start of virtual device <code>Pixel XL</code> with API <code>28</code> and target <code>Android 9.0 (Google APIs)</code> in freshly downloaded <code>Android Studio 3.2.1</code></p>\n\n<p>and execution of</p>\n\n<pre><code>./gradlew jacocoTestReport\n</code></pre>\n\n<p>following report is produced in directory <code>app/build/reports/jacoco/jacocoTestReport/html/</code> as expected</p>\n\n<p><a href=\"https://i.stack.imgur.com/funmp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/funmp.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/WUs35.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WUs35.png\" alt=\"enter image description here\"></a></p>\n\n<p>Given the amount of factors that influence result (such as versions of all involved components - Android SDK, Device, Kotlin compiler, Gradle, JaCoCo, etc, etc), attempts to guess what is different in your case are IMO counterproductive, and so that the best advice - is to perform very careful comparison of differences between your setup and above example.</p>\n\n<hr>\n\n<h3>Update</h3>\n\n<p>As was figured out during comparison by @HeWhoProtects , problem was in</p>\n\n<blockquote>\n  <p>exclusion of <code>**/*$*</code></p>\n</blockquote>\n\n<p>that refers to exclusion of class files from analysis. Single source file can compile into multiple class files, e.g. in case of nested classes in Java and exactly in case of companion in Kotlin and in both cases name of class and class file will contain <code>$</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 7743, "user_id": 244993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf0ce44e342943d56f115165b7d78bdd?s=128&d=identicon&r=PG", "display_name": "Godin", "link": "https://stackoverflow.com/users/244993/godin"}, "edited": false, "score": 1, "creation_date": 1546957305, "post_id": 54090783, "comment_id": 95019531, "body": "You&#39;re probably referring to exclusion and inclusion of <b>class</b> files or classes, this is not the same as <b>source</b> files - single source file can compile into multiple class files, e.g. in case of nested classes in Java and exactly in case of companion in Kotlin and in both cases name of class and class file will contain <code>$</code>."}], "tags": [], "owner": {"reputation": 469, "user_id": 1087923, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9ba7ab71dd9d892a3d9671878c1a7818?s=128&d=identicon&r=PG", "display_name": "HeWhoProtects", "link": "https://stackoverflow.com/users/1087923/hewhoprotects"}, "is_accepted": false, "score": 0, "last_activity_date": 1546946608, "creation_date": 1546946608, "answer_id": 54090783, "question_id": 54075424, "link": "https://stackoverflow.com/questions/54075424/kotlin-jacoco-coverage-not-showing-for-static-methods-companion-in-android/54090783#54090783", "title": "Kotlin Jacoco coverage not showing for static methods (companion) in Android", "body": "<p>I found the the cause of the problem but not sure why it caused it yet, my excludes rules includes more rules than the one in the tutorial above, in different jacoco tutorial for ignoring autogenerated files, it was suggested to include <code>'**/*$*'</code> as rule, as soon as I removed it, it showed coverage for static methods in kotlin.</p>\n\n<p>My understanding of Jacoco that these rules ignore files and will not show it in the report, and before I made the change, it was showing that this class is covered in the test coverage.... is it weird or am I missing a fundamental thing about how kotlin generates methods or how jacoco excludes rules work ?</p>\n\n<p>Anyway I hope this helps..</p>\n"}], "owner": {"reputation": 469, "user_id": 1087923, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9ba7ab71dd9d892a3d9671878c1a7818?s=128&d=identicon&r=PG", "display_name": "HeWhoProtects", "link": "https://stackoverflow.com/users/1087923/hewhoprotects"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1408, "favorite_count": 0, "accepted_answer_id": 54079126, "answer_count": 2, "score": 2, "last_activity_date": 1547220928, "creation_date": 1546867982, "question_id": 54075424, "link": "https://stackoverflow.com/questions/54075424/kotlin-jacoco-coverage-not-showing-for-static-methods-companion-in-android", "title": "Kotlin Jacoco coverage not showing for static methods (companion) in Android", "body": "<p>I implemented Jacoco in my Android project using the following tutorial <a href=\"https://proandroiddev.com/unified-code-coverage-for-android-revisited-44789c9b722f\" rel=\"nofollow noreferrer\">https://proandroiddev.com/unified-code-coverage-for-android-revisited-44789c9b722f</a> to cater for test coverage in the kotlin classes.</p>\n\n<p>For some unknown reason, it's not reporting coverage for static methods declared under the Companion block.</p>\n\n<pre><code>class Meh {\n    companion object {\n     fun test () {\n     // logic to test\n     }\n}\n</code></pre>\n\n<p>However if I convert the class to an instance rather than a singleton that I am able to see the coverage completely fine.</p>\n\n<p>Has anyone came across this problem ? and what did you do ?</p>\n"}, {"tags": ["android", "kotlin", "mapbox", "androidx"], "comments": [{"owner": {"reputation": 759, "user_id": 6509312, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/888032237980836/picture?type=large", "display_name": "Harish Kamboj", "link": "https://stackoverflow.com/users/6509312/harish-kamboj"}, "edited": false, "score": 0, "creation_date": 1546864676, "post_id": 54074582, "comment_id": 94981965, "body": "Can you please show your complete gradle files."}, {"owner": {"reputation": 342, "user_id": 5697456, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Hf-gv470aWo/AAAAAAAAAAI/AAAAAAAAAQ0/EagV6CAP5gA/photo.jpg?sz=128", "display_name": "suresh madaparthi", "link": "https://stackoverflow.com/users/5697456/suresh-madaparthi"}, "edited": false, "score": 0, "creation_date": 1546864751, "post_id": 54074582, "comment_id": 94982017, "body": "<a href=\"https://www.mapbox.com/android-docs/navigation/overview\" rel=\"nofollow noreferrer\">mapbox.com/android-docs/navigation/overview</a> follow this link"}, {"owner": {"reputation": 552, "user_id": 6056489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db43929fa2cde05270ae322ffa4bcdca?s=128&d=identicon&r=PG", "display_name": "Farshid roohi", "link": "https://stackoverflow.com/users/6056489/farshid-roohi"}, "reply_to_user": {"reputation": 342, "user_id": 5697456, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Hf-gv470aWo/AAAAAAAAAAI/AAAAAAAAAQ0/EagV6CAP5gA/photo.jpg?sz=128", "display_name": "suresh madaparthi", "link": "https://stackoverflow.com/users/5697456/suresh-madaparthi"}, "edited": false, "score": 0, "creation_date": 1546865546, "post_id": 54074582, "comment_id": 94982395, "body": "@suresh-madaparthi thanks , unfortunately, it does not help"}], "answers": [{"tags": [], "owner": {"reputation": 10844, "user_id": 7765139, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1JCJG0Q4b8I/AAAAAAAAAAI/AAAAAAAAB1w/2ghArTJ7KEs/photo.jpg?sz=128", "display_name": "Levi Moreira", "link": "https://stackoverflow.com/users/7765139/levi-moreira"}, "is_accepted": false, "score": 0, "last_activity_date": 1546864996, "creation_date": 1546864996, "answer_id": 54074695, "question_id": 54074582, "link": "https://stackoverflow.com/questions/54074582/can-not-add-dependency-mapbox-sdk-error-fragment/54074695#54074695", "title": "can not add dependency mapBox SDK error fragment", "body": "<p>It looks like you're adding your dependencies to the project level gradle file. Class path addresses should go in the project level buid.gradle file whilst library dependencies should go into the app level build.gradle files.</p>\n\n<p>In your app level build.gradle you should add:</p>\n\n<pre><code>dependencies {\n...\n   implementation 'androidx.appcompat:appcompat:1.1.0-alpha01'\n   implementation 'com.google.android.material:material:1.1.0-alpha02'\n   implementation 'com.mapbox.mapboxsdk:mapbox-android-sdk:6.8.1'\n}\n</code></pre>\n\n<p>And in your project level you should add:</p>\n\n<pre><code>dependencies {\n...\n  classpath 'com.android.tools.build:gradle:3.2.1'\n }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 552, "user_id": 6056489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db43929fa2cde05270ae322ffa4bcdca?s=128&d=identicon&r=PG", "display_name": "Farshid roohi", "link": "https://stackoverflow.com/users/6056489/farshid-roohi"}, "edited": false, "score": 0, "creation_date": 1546865496, "post_id": 54074788, "comment_id": 94982366, "body": "Unfortunately, it does not help"}, {"owner": {"reputation": 759, "user_id": 6509312, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/888032237980836/picture?type=large", "display_name": "Harish Kamboj", "link": "https://stackoverflow.com/users/6509312/harish-kamboj"}, "reply_to_user": {"reputation": 552, "user_id": 6056489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db43929fa2cde05270ae322ffa4bcdca?s=128&d=identicon&r=PG", "display_name": "Farshid roohi", "link": "https://stackoverflow.com/users/6056489/farshid-roohi"}, "edited": false, "score": 0, "creation_date": 1546865763, "post_id": 54074788, "comment_id": 94982507, "body": "Maybe its cause by other dependencies. try commenting mapbox sdk"}], "tags": [], "owner": {"reputation": 759, "user_id": 6509312, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/888032237980836/picture?type=large", "display_name": "Harish Kamboj", "link": "https://stackoverflow.com/users/6509312/harish-kamboj"}, "is_accepted": false, "score": 0, "last_activity_date": 1546865698, "last_edit_date": 1546865698, "creation_date": 1546865417, "answer_id": 54074788, "question_id": 54074582, "link": "https://stackoverflow.com/questions/54074582/can-not-add-dependency-mapbox-sdk-error-fragment/54074788#54074788", "title": "can not add dependency mapBox SDK error fragment", "body": "<p>You need to add in your Project->build.gradle file</p>\n\n<pre><code>allprojects {\n    repositories {\n        ...\n        maven { url 'https://mapbox.bintray.com/mapbox' }\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 552, "user_id": 6056489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db43929fa2cde05270ae322ffa4bcdca?s=128&d=identicon&r=PG", "display_name": "Farshid roohi", "link": "https://stackoverflow.com/users/6056489/farshid-roohi"}, "is_accepted": true, "score": 0, "last_activity_date": 1547882213, "creation_date": 1547882213, "answer_id": 54264924, "question_id": 54074582, "link": "https://stackoverflow.com/questions/54074582/can-not-add-dependency-mapbox-sdk-error-fragment/54264924#54264924", "title": "can not add dependency mapBox SDK error fragment", "body": "<p>I've added the following dependencies and my problem has been resolved \ud83d\udc4d</p>\n\n<p>i'm <strong>remove</strong> :</p>\n\n<pre><code> implementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\n</code></pre>\n\n<p>and <strong>added</strong> this : </p>\n\n<pre><code>implementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk8:$kotlin_version\"\nkapt 'androidx.databinding:databinding-compiler:3.3.0'\n</code></pre>\n"}], "owner": {"reputation": 552, "user_id": 6056489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db43929fa2cde05270ae322ffa4bcdca?s=128&d=identicon&r=PG", "display_name": "Farshid roohi", "link": "https://stackoverflow.com/users/6056489/farshid-roohi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 302, "favorite_count": 1, "accepted_answer_id": 54264924, "answer_count": 3, "score": 2, "last_activity_date": 1547882213, "creation_date": 1546864623, "last_edit_date": 1546866076, "question_id": 54074582, "link": "https://stackoverflow.com/questions/54074582/can-not-add-dependency-mapbox-sdk-error-fragment", "title": "can not add dependency mapBox SDK error fragment", "body": "<p>problem add mapBoxSDK android</p>\n\n<p>gradle class path this :</p>\n\n<pre><code> classpath 'com.android.tools.build:gradle:3.2.1'\n</code></pre>\n\n<p>and libs : </p>\n\n<pre><code>  implementation 'androidx.appcompat:appcompat:1.1.0-alpha01'\n  implementation 'com.google.android.material:material:1.1.0-alpha02'\n\n  implementation 'com.mapbox.mapboxsdk:mapbox-android-sdk:6.8.1'\n</code></pre>\n\n<p>error this : </p>\n\n<pre><code>Failed to resolve: fragment\nOpen File\n\n\nFailed to resolve: core\nOpen File\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>gradle app file : </p>\n\n<p>use <strong>androidx</strong> &amp; <strong>java 1.8</strong> &amp; <strong>gradle 2.3.1</strong></p>\n\n<p>I guess I do not support Androidx?\nDo you think this is a problem?\n    apply plugin: 'com.android.application'\n    apply plugin: 'kotlin-android'\n    apply plugin: 'kotlin-kapt'\n    apply plugin: 'kotlin-android-extensions'\n    apply plugin: 'com.google.gms.google-services'\n    apply plugin: 'io.fabric'</p>\n\n<pre><code>android {\n    compileSdkVersion 28\n    defaultConfig {\n        applicationId \"xxxx\"\n        minSdkVersion 17\n        targetSdkVersion 28\n       ....\n    }\n   ...\n    dataBinding {\n        enabled = true\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n}\n\ndependencies {\n    def lifecycle_version = \"2.1.0-alpha01\"\n    def room_version = \"2.0.0-rc01\"\n    implementation fileTree(include: ['*.jar'], dir: 'libs')\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\n    implementation 'androidx.appcompat:appcompat:1.1.0-alpha01'\n    implementation 'androidx.cardview:cardview:1.0.0'\n    implementation 'androidx.recyclerview:recyclerview:1.1.0-alpha01'\n    implementation 'com.google.android.material:material:1.1.0-alpha02'\n    implementation 'androidx.constraintlayout:constraintlayout:2.0.0-alpha3'\n\n    implementation \"androidx.room:room-runtime:$room_version\"\n    kapt \"androidx.room:room-compiler:$room_version\"\n    // lifecycle\n    implementation \"androidx.lifecycle:lifecycle-extensions:$lifecycle_version\"\n    kapt \"androidx.lifecycle:lifecycle-common-java8:$lifecycle_version\"\n    implementation 'com.google.firebase:firebase-core:16.0.6'\n    implementation 'com.crashlytics.sdk.android:crashlytics:2.9.8'\n    implementation 'org.osmdroid:osmdroid-android:6.0.3'\n\n    implementation 'com.android.support:appcompat-v7:28.0.0'\n    implementation 'com.mapbox.mapboxsdk:mapbox-android-sdk:6.8.1'\n    implementation 'com.mapbox.mapboxsdk:mapbox-android-navigation:0.26.0'\n\n\n}\n</code></pre>\n"}, {"tags": ["java", "spring", "spring-security", "kotlin", "mockk"], "comments": [{"owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "edited": false, "score": 1, "creation_date": 1546867539, "post_id": 54073139, "comment_id": 94983432, "body": "It seems like <code>mockk</code> creates a type as relaxed return value of the builder methods. Try to mock every single method manually to return the <code>HttpSecurity</code> from there."}, {"owner": {"reputation": 3592, "user_id": 3094805, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/6f9729dacae0e6942713e6e84cf8a4db?s=128&d=identicon&r=PG&f=1", "display_name": "PaulNUK", "link": "https://stackoverflow.com/users/3094805/paulnuk"}, "reply_to_user": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "edited": false, "score": 0, "creation_date": 1546870052, "post_id": 54073139, "comment_id": 94984824, "body": "Thanks, I thought I might be able to get away without doing that, but I guess not :-)"}, {"owner": {"reputation": 1494, "user_id": 3742196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JXFwn.jpg?s=128&g=1", "display_name": "oleksiyp", "link": "https://stackoverflow.com/users/3742196/oleksiyp"}, "edited": false, "score": 0, "creation_date": 1547017605, "post_id": 54073139, "comment_id": 95041793, "body": "Added an issue <a href=\"https://github.com/mockk/mockk/issues/219\" rel=\"nofollow noreferrer\">github.com/mockk/mockk/issues/219</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1494, "user_id": 3742196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JXFwn.jpg?s=128&g=1", "display_name": "oleksiyp", "link": "https://stackoverflow.com/users/3742196/oleksiyp"}, "is_accepted": true, "score": 2, "last_activity_date": 1572422413, "last_edit_date": 1572422413, "creation_date": 1548492467, "answer_id": 54376929, "question_id": 54073139, "link": "https://stackoverflow.com/questions/54073139/mockk-classcastexception-when-mocking-final-class-that-implements-multiple-int/54376929#54376929", "title": "Mockk - ClassCastException when mocking final class that implements multiple interfaces", "body": "<p>The problem here is that the template argument type is erased and not possible to recover.  The only solution is to specify mock directly so that <code>reified</code> type will capture actual class:</p>\n\n<pre><code>val mockk = mockk&lt;HttpSecurity&gt;(relaxed = true)\nval csrf = mockk.csrf()\nevery { csrf.disable() } returns mockk(relaxed = true)\nval disable = csrf.disable()\ndisable.headers()\n</code></pre>\n"}], "owner": {"reputation": 3592, "user_id": 3094805, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/6f9729dacae0e6942713e6e84cf8a4db?s=128&d=identicon&r=PG&f=1", "display_name": "PaulNUK", "link": "https://stackoverflow.com/users/3094805/paulnuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2443, "favorite_count": 0, "accepted_answer_id": 54376929, "answer_count": 1, "score": 1, "last_activity_date": 1572422413, "creation_date": 1546859030, "question_id": 54073139, "link": "https://stackoverflow.com/questions/54073139/mockk-classcastexception-when-mocking-final-class-that-implements-multiple-int", "title": "Mockk - ClassCastException when mocking final class that implements multiple interfaces", "body": "<p>I'm trying to use a mock of this Java class:</p>\n\n<pre><code>public final class HttpSecurity extends\n        AbstractConfiguredSecurityBuilder&lt;DefaultSecurityFilterChain, HttpSecurity&gt;\n        implements SecurityBuilder&lt;DefaultSecurityFilterChain&gt;,\n        HttpSecurityBuilder&lt;HttpSecurity&gt;\n</code></pre>\n\n<p>So I've created a mock like so:</p>\n\n<pre><code>private val httpSecurity: HttpSecurity = mockk(relaxed = true)\n</code></pre>\n\n<p>in order to test this bit of Java code:</p>\n\n<pre><code>  protected void configure(HttpSecurity http) throws Exception {\n        http.csrf().disable().\n                headers().frameOptions().disable().and()\n                .formLogin().loginPage(\"/login\").permitAll()....etc\n</code></pre>\n\n<p>and I'm getting the following error when I try and use it</p>\n\n<pre><code>java.lang.ClassCastException: org.springframework.security.config.annotation.web.HttpSecurityBuilder$Subclass2 cannot be cast to org.springframework.security.config.annotation.web.builders.HttpSecurity\n</code></pre>\n\n<p>Test class here:</p>\n\n<pre><code>package com.whatever\n\nimport io.mockk.mockk\nimport io.mockk.mockkClass\nimport org.junit.jupiter.api.Test\n\nimport org.springframework.core.env.Environment\nimport org.springframework.security.authentication.AuthenticationManager\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity\n\ninternal class SecurityConfigTest {\n\n\n    private val authManager: AuthenticationManager = mockk()\n    val env : Environment = mockk()\n    private val httpSecurity: HttpSecurity = mockk(relaxed = true)\n\n    val securityConfig : SecurityConfig = SecurityConfig(authManager,env)\n\n    @Test\n    fun configure() {\n        securityConfig.configure(httpSecurity)\n    }\n}\n</code></pre>\n\n<p>Any ideas how to fix this ?</p>\n"}, {"tags": ["jpa", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "is_accepted": false, "score": 1, "last_activity_date": 1546866647, "last_edit_date": 1546866647, "creation_date": 1546866338, "answer_id": 54075000, "question_id": 54072737, "link": "https://stackoverflow.com/questions/54072737/kotlin-immutable-entities-changing-unexpectedly-when-using-it-with-jpa/54075000#54075000", "title": "Kotlin immutable entities changing unexpectedly when using it with JPA", "body": "<p>I suspect the problem is that you're ignoring the return value from <code>save()</code>.\u00a0 Its docs say:</p>\n\n<blockquote>\n  <p>Saves a given entity. Use the returned instance for further operations as the save operation might have changed the entity instance completely.</p>\n</blockquote>\n\n<p>But you're not doing that; you're instead continuing to use the original instance which (as that says) may have changed.</p>\n\n<p>Instead, store the return value from <code>save()</code>, and use that thereafter.\u00a0 (Either by making <code>instance1</code> a <code>var</code>, or creating a new <code>val</code> and not referring to <code>instance1</code> afterward.)</p>\n\n<p>(This isn't a Kotlin-specific problem, and is exactly the same in Java.\u00a0 JPA , Spring, &amp;c work their magic by futzing with the bytecode, so can do things your code can't \u2014 such as changing immutable values.\u00a0 Most of the time you can ignore it, but this case makes it obvious.)</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 13093250, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GjlXW8_GYQIslbTZZJF25LG97ZBivOgbyjJu6k6=k-s128", "display_name": "user13093250", "link": "https://stackoverflow.com/users/13093250/user13093250"}, "is_accepted": false, "score": 0, "last_activity_date": 1584691385, "creation_date": 1584691385, "answer_id": 60770474, "question_id": 54072737, "link": "https://stackoverflow.com/questions/54072737/kotlin-immutable-entities-changing-unexpectedly-when-using-it-with-jpa/60770474#60770474", "title": "Kotlin immutable entities changing unexpectedly when using it with JPA", "body": "<p>Immutable types are not compatible on how JPA works.</p>\n\n<p>JPA works around the concept of UnitOfWork, which mean objects retrieved from the database lives in a PersistedContext (1st level cache) and they get discarded once the EntityManager is closed (on a web application at the end of the HTTP request).</p>\n\n<p>When using the <code>copy</code> method in an entity you just retrieved from the database, the copied object is considered <code>detached</code> from the current session meaning that changes on it cannot be tracked by JPA and the underlying implememtation (Hibernate / EclipseLink) have hard time figuring out which SQL statement needs to be fired (Insert/Update/Delete ????)</p>\n\n<p>Things got way more complex when you have complex object graph with OneToMany associations and cascading options.</p>\n\n<p>So my recommendation is unfortunately is to avoid Immutable types when using JPA.</p>\n"}], "owner": {"reputation": 990, "user_id": 4623280, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MWqA3.jpg?s=128&g=1", "display_name": "Ali Sa\u011flam", "link": "https://stackoverflow.com/users/4623280/ali-sa%c4%9flam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1584691385, "creation_date": 1546857551, "last_edit_date": 1546858249, "question_id": 54072737, "link": "https://stackoverflow.com/questions/54072737/kotlin-immutable-entities-changing-unexpectedly-when-using-it-with-jpa", "title": "Kotlin immutable entities changing unexpectedly when using it with JPA", "body": "<p>In our project we are using kotlin with JPA. All of our entities are immutable so, it is not possible to set fields of our entities directly. You have to create a new instance by using the copy method. If you want these changes to be reflected to database, you must persist this newly created entity with an explicit function call.</p>\n\n<p>In the beginning, this approach looks perfect to us. However, nowadays we are having some problems like some of our instances are changing unexpectedly in the memory.</p>\n\n<pre><code>val instance1 = repository.findById(entityId)\nrepository.save(instance1.copy(deletedAt = Instant.now()))\n..\n..\nassertNull(instance1.deletedAt())\n</code></pre>\n\n<p>In the code snipped above, instance1 is retrieved from database and its deletedAt field is set with copy method and the new instance which is created with this copy method is passed to save method of the repository. We don't set any field of instance1, we create a new instance to do these changes. However, the result on assert line is unexpectedly not-null. </p>\n\n<p>It seems, There is a confliction on JPA persistence context (first level cache) and kotlin's immutable and copy method logic.</p>\n\n<p>Is anyone facing this problem or any suggestion or best practices when using JPA and immutable Kotlin entities?</p>\n"}]