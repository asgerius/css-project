[{"tags": ["android", "lambda", "kotlin", "rx-android"], "answers": [{"tags": [], "owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "is_accepted": true, "score": 6, "last_activity_date": 1448625984, "last_edit_date": 1448625984, "creation_date": 1435742814, "answer_id": 31157476, "question_id": 31155910, "link": "https://stackoverflow.com/questions/31155910/how-to-improve-kotlin-lambda-syntax/31157476#31157476", "title": "How to improve kotlin lambda syntax?", "body": "<p>First, create a helper extension method like this:</p>\n\n<pre><code>fun&lt;T, R&gt; Observable&lt;T&gt;.subscribe(\n        receiver: R,\n        onSuccess: R.(T) -&gt; Unit, \n        onFailure: R.(Throwable) -&gt; Unit) {\n    subscribe({ receiver.onSuccess(it) }, { receiver.onFailure(it) })\n}\n</code></pre>\n\n<p>Now you can use your new method like this:</p>\n\n<pre><code>AppObservable.bindActivity(this, api.get(id)).subscribe(this, ::onSuccess, ::onFailure)\n</code></pre>\n\n<p>The <code>::</code> operator creates a method reference. Once <a href=\"https://youtrack.jetbrains.com/issue/KT-6947\" rel=\"nofollow\">KT-6947</a> gets resolved, we can omit the helper method and write <code>subscribe(this::onSuccess, this::onFailure)</code> directly. This is already possible in Java 8.</p>\n\n<p>To work around this issue we can alternatively implement the following helper method that binds a receiver to an extension method:</p>\n\n<pre><code>fun &lt;T, R, E&gt; T.bind(reference: T.(R) -&gt; E): (R) -&gt; E = { this.reference(it) }\n</code></pre>\n\n<p>and use it like this:</p>\n\n<pre><code>AppObservable.bindActivity(this, api.get(id)).subscribe(bind(Foo::onSuccess), bind(Foo::onFailure))\n</code></pre>\n\n<p>but this is hardly more elegant than your initial solution.</p>\n\n<p>EDIT1:</p>\n\n<p>Thy syntax <code>::onSuccess</code> is forbidden for now, so you have to use 'Foo::onSuccess' where <code>Foo</code> is your class name.</p>\n\n<p>EDIT2:</p>\n\n<p>You can have a little fun with operator overloading by declaring the same method as </p>\n\n<pre><code>operator fun &lt;T, R, E&gt; T.plus(reference: T.(R) -&gt; E): (R) -&gt; E = { this.reference(it) }\n</code></pre>\n\n<p>Then you can use it like so:</p>\n\n<pre><code>AppObservable.bindActivity(this, api.get(id)).subscribe(this + Foo::onSuccess, this + Foo::onFailure)\n</code></pre>\n"}], "owner": {"reputation": 373, "user_id": 1326308, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/56288df5b8204a95136603f98c3c18b8?s=128&d=identicon&r=PG", "display_name": "falcon", "link": "https://stackoverflow.com/users/1326308/falcon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 711, "favorite_count": 1, "accepted_answer_id": 31157476, "answer_count": 1, "score": 5, "last_activity_date": 1448625984, "creation_date": 1435738229, "question_id": 31155910, "link": "https://stackoverflow.com/questions/31155910/how-to-improve-kotlin-lambda-syntax", "title": "How to improve kotlin lambda syntax?", "body": "<p>I'm trying to use kotlin M12 in android project and during the work I got this piece of code <em>subscribe({onSuccess(it)}, {onFailure(it)})</em></p>\n\n<pre><code>AppObservable.bindActivity(this, api.get(id)).subscribe({onSuccess(it)}, {onFailure(it)})\n\nfun onSuccess(str: String) {}\n\nfun onFailure(tr: Throwable) {}\n</code></pre>\n\n<p>This is not so bad, but I think it would/should be better. How can I improve it?</p>\n"}, {"tags": ["junit", "gson", "kotlin"], "comments": [{"owner": {"reputation": 4016, "user_id": 1460833, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bc4821b9c16457694f503b42831198f1?s=128&d=identicon&r=PG", "display_name": "Sergey Mashkov", "link": "https://stackoverflow.com/users/1460833/sergey-mashkov"}, "edited": false, "score": 0, "creation_date": 1435927818, "post_id": 31122224, "comment_id": 50416296, "body": "As far as I remember Gson injects field values directly to the fields without constructor call so Kotlin can&#39;t verify it because even constructor is not called at all. It is done by true black magic inside gson. See example: <a href=\"https://gist.github.com/cy6erGn0m/4decafcb06baeb4f2e3b\" rel=\"nofollow noreferrer\">gist.github.com/cy6erGn0m/4decafcb06baeb4f2e3b</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1306, "user_id": 1199452, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3627d3e77bcaa8b54906393d0c9f7055?s=128&d=identicon&r=PG&f=1", "display_name": "ntoskrnl", "link": "https://stackoverflow.com/users/1199452/ntoskrnl"}, "edited": false, "score": 0, "creation_date": 1435675983, "post_id": 31125891, "comment_id": 50293887, "body": "this is the first thing we did... it prints &quot;null&quot; even for non-nullable property :("}, {"owner": {"reputation": 6181, "user_id": 647381, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/75821c39029992767a54f3016dbd7b93?s=128&d=identicon&r=PG", "display_name": "ruX", "link": "https://stackoverflow.com/users/647381/rux"}, "reply_to_user": {"reputation": 1306, "user_id": 1199452, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3627d3e77bcaa8b54906393d0c9f7055?s=128&d=identicon&r=PG&f=1", "display_name": "ntoskrnl", "link": "https://stackoverflow.com/users/1199452/ntoskrnl"}, "edited": false, "score": 0, "creation_date": 1444070882, "post_id": 31125891, "comment_id": 53736318, "body": "@ntoskrnl gson knows nothing about you declare type as not-nullable. I got a bunch of NPE at the beginning. To avoid confusion mark fields as nullable"}, {"owner": {"reputation": 1306, "user_id": 1199452, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3627d3e77bcaa8b54906393d0c9f7055?s=128&d=identicon&r=PG&f=1", "display_name": "ntoskrnl", "link": "https://stackoverflow.com/users/1199452/ntoskrnl"}, "reply_to_user": {"reputation": 6181, "user_id": 647381, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/75821c39029992767a54f3016dbd7b93?s=128&d=identicon&r=PG", "display_name": "ruX", "link": "https://stackoverflow.com/users/647381/rux"}, "edited": false, "score": 1, "creation_date": 1444150355, "post_id": 31125891, "comment_id": 53775898, "body": "@ruX we couldn&#39;t find a universal way to check if the data were parsed correctly and all required (i.e. non-nullable) fields were set. For data classes, calling <code>copy()</code> does what we want \u2013 throws an exception if at least one required field is null. The question is how to achieve this for non-data classes..."}, {"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 0, "creation_date": 1444156844, "post_id": 31125891, "comment_id": 53779689, "body": "I updated the answer. You can not check if a property&#39;s return type is not nullable. Use this to get all non-nullable properties and assert they&#39;re not null."}, {"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 0, "creation_date": 1452104404, "post_id": 31125891, "comment_id": 57025343, "body": "The previous comment was probably meant to say &quot;you can <b>now</b> check if a property&#39;s return type is not nullable.&quot;"}], "tags": [], "owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "is_accepted": true, "score": 1, "last_activity_date": 1444156785, "last_edit_date": 1444156785, "creation_date": 1435613325, "answer_id": 31125891, "question_id": 31122224, "link": "https://stackoverflow.com/questions/31122224/kotlin-unit-test-assert-object-after-gson/31125891#31125891", "title": "Kotlin: unit test assert object after gson", "body": "<p>You could use the new Kotlin reflection. If you have an instance of <code>ACategory</code>, call </p>\n\n<pre><code>ACategory::class.memberProperties\n        .filter { !it.returnType.isMarkedNullable }\n        .forEach {\n            assertNotNull(it.get(aCategory))\n        }\n</code></pre>\n\n<p>to access all properties that are marked as not nullable and assert they're not null. Make sure, you have the reflection lib on the classpath.</p>\n\n<p>Make sure you're using M14.</p>\n"}, {"comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1452048131, "post_id": 31582917, "comment_id": 56995311, "body": "The answer is cleaner from @cypressious, and allows you to more intentionally report an error for the property instead of just NPE."}, {"owner": {"reputation": 623, "user_id": 981330, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/pwe8Q.jpg?s=128&g=1", "display_name": "Dmitriy Voronin", "link": "https://stackoverflow.com/users/981330/dmitriy-voronin"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1452097566, "post_id": 31582917, "comment_id": 57020961, "body": "@JaysonMinard, agree, edited version is better than our hacky way. (changed chosen answer)"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1452097664, "post_id": 31582917, "comment_id": 57021029, "body": "Great, and its good to have this alternative which basically causes the object to recreate itself and validate its own parameters.  good hack"}], "tags": [], "owner": {"reputation": 623, "user_id": 981330, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/pwe8Q.jpg?s=128&g=1", "display_name": "Dmitriy Voronin", "link": "https://stackoverflow.com/users/981330/dmitriy-voronin"}, "is_accepted": false, "score": 0, "last_activity_date": 1437642542, "creation_date": 1437642542, "answer_id": 31582917, "question_id": 31122224, "link": "https://stackoverflow.com/questions/31122224/kotlin-unit-test-assert-object-after-gson/31582917#31582917", "title": "Kotlin: unit test assert object after gson", "body": "<p>We ended up with hack for data classes(only use case for us, so its ok).</p>\n\n<p>Calling <code>gsonConstructedObject.copy()</code> reveals all exceptions</p>\n"}], "owner": {"reputation": 623, "user_id": 981330, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/pwe8Q.jpg?s=128&g=1", "display_name": "Dmitriy Voronin", "link": "https://stackoverflow.com/users/981330/dmitriy-voronin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1157, "favorite_count": 0, "accepted_answer_id": 31125891, "answer_count": 2, "score": 5, "last_activity_date": 1444156785, "creation_date": 1435599953, "question_id": 31122224, "link": "https://stackoverflow.com/questions/31122224/kotlin-unit-test-assert-object-after-gson", "title": "Kotlin: unit test assert object after gson", "body": "<p>I have JUnit test like that:</p>\n\n<pre><code>Test fun testCategoriesLoading() {\n    val subscriber = TestSubscriber&lt;List&lt;ACategory&gt;&gt;()\n    service.categories().subscribe(subscriber)\n\n    subscriber.awaitTerminalEvent()\n\n    subscriber.assertNoErrors()\n}\n</code></pre>\n\n<p>service is <a href=\"http://square.github.io/retrofit/\" rel=\"noreferrer\">Retrofit</a>, that uses GsonConverter to deserialize json into </p>\n\n<pre><code>data class ACategory(val id: String, val title: String, val parentId: String?, val hasChildren: Boolean)\n</code></pre>\n\n<p>instances.</p>\n\n<p>Test is passing, even if ACategory filled with id = null, title = null etc.</p>\n\n<p>So, as far as i know, gson using reflection, and kotlin lazily resolves this nullability constraints on first access.</p>\n\n<p>Is there any way to force this resolve?\nSome good-looking solution without direct access to fields manually? I really don't want to write every assert by hand.</p>\n"}, {"tags": ["android", "android-layout", "android-fragments", "kotlin"], "comments": [{"owner": {"reputation": 26217, "user_id": 321354, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/af8280741145a2c2d58390fe7ef5c04d?s=128&d=identicon&r=PG&f=1", "display_name": "rciovati", "link": "https://stackoverflow.com/users/321354/rciovati"}, "edited": false, "score": 1, "creation_date": 1435564296, "post_id": 31090488, "comment_id": 50234793, "body": "Not sure it is the only issue there, but <code>LinearLayout</code> in the activity view should have <code>orientation=&quot;vertical&quot;</code>"}, {"owner": {"reputation": 298, "user_id": 1828448, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a3ee903ebc770ce1962541cac2655e91?s=128&d=identicon&r=PG", "display_name": "mrobinson7627", "link": "https://stackoverflow.com/users/1828448/mrobinson7627"}, "reply_to_user": {"reputation": 26217, "user_id": 321354, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/af8280741145a2c2d58390fe7ef5c04d?s=128&d=identicon&r=PG&f=1", "display_name": "rciovati", "link": "https://stackoverflow.com/users/321354/rciovati"}, "edited": false, "score": 0, "creation_date": 1435662942, "post_id": 31090488, "comment_id": 50283990, "body": "Wow I can&#39;t believe it; that fixed it. I guess when I was switching over from my non-fragment layouts to the fragment ones the orientation got lost. Classic case of the XY problem. Thanks a lot. If you submit this as an answer i can accept it."}, {"owner": {"reputation": 11627, "user_id": 2602791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db72b53576b82f4fa30f46bfc8438937?s=128&d=identicon&r=PG", "display_name": "BladeCoder", "link": "https://stackoverflow.com/users/2602791/bladecoder"}, "edited": false, "score": 0, "creation_date": 1497098502, "post_id": 31090488, "comment_id": 75942386, "body": "You should not perform a FragmentTransaction at the end of an asynchronous operation: if the transactions tries to execute after onStop(), you&#39;ll get an IllegalStateException."}], "answers": [{"tags": [], "owner": {"reputation": 26217, "user_id": 321354, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/af8280741145a2c2d58390fe7ef5c04d?s=128&d=identicon&r=PG&f=1", "display_name": "rciovati", "link": "https://stackoverflow.com/users/321354/rciovati"}, "is_accepted": true, "score": 3, "last_activity_date": 1435666713, "creation_date": 1435666713, "answer_id": 31138132, "question_id": 31090488, "link": "https://stackoverflow.com/questions/31090488/how-to-replace-a-framelayout-with-a-fragment-with-kotlin-on-android/31138132#31138132", "title": "How to replace a FrameLayout with a fragment with Kotlin on Android", "body": "<p>The problem is that the Activity's <code>LinearLayout</code> should have <code>orientation=\"vertical\"</code>:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"vertical\"&gt;\n\n    &lt;include\n        android:id=\"@+id/toolbar\"\n        layout=\"@layout/toolbar\" /&gt;\n\n    &lt;FrameLayout\n        android:id=\"@+id/main_content_frame\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\" /&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4116, "user_id": 9039646, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/t6Slz.jpg?s=128&g=1", "display_name": "DINA TAKLIT", "link": "https://stackoverflow.com/users/9039646/dina-taklit"}, "is_accepted": false, "score": 2, "last_activity_date": 1526512761, "last_edit_date": 1526512761, "creation_date": 1526511813, "answer_id": 50381120, "question_id": 31090488, "link": "https://stackoverflow.com/questions/31090488/how-to-replace-a-framelayout-with-a-fragment-with-kotlin-on-android/50381120#50381120", "title": "How to replace a FrameLayout with a fragment with Kotlin on Android", "body": "<p>Just i want to pay your intention to extension function it's so useful.\nHere i will share some steps to do that </p>\n\n<ol>\n<li>Creat a kotlin file called util for example and add those function which allow to add and replace the fragment </li>\n</ol>\n\n<p><strong>util.kt</strong> </p>\n\n<pre><code>fun AppCompatActivity.addFragment(fragment: Fragment, frameId: Int){\n    supportFragmentManager.inTransaction { add(frameId, fragment) }\n}\nfun AppCompatActivity.replaceFragment(fragment: Fragment, frameId: Int) {\n    supportFragmentManager.inTransaction{replace(frameId, fragment)}\n}\n\ninline fun FragmentManager.inTransaction(func: FragmentTransaction.() -&gt; FragmentTransaction) {\n    beginTransaction().func().commit()\n}\n</code></pre>\n\n<ol start=\"2\">\n<li><p>Create your fragment layout. I have call it father_fragment for example \n<strong>fahter_fragment</strong></p>\n\n<p>\n  <p></p></p>\n\n\n<pre><code>    &lt;!-- You can put whatever you want here--&gt; \n</code></pre>\n\n<p></p></li>\n<li><p>In your Activity xml create a layout which will caontain the fragment:</p></li>\n</ol>\n\n<p><strong>activity_principal.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.design.widget.CoordinatorLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\"com.tharwa.tdm2_exo2.Principal\"&gt;\n    &lt;FrameLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:id=\"@+id/container\"\n        &gt;\n    &lt;/FrameLayout&gt;\n&lt;/android.support.design.widget.CoordinatorLayout&gt;\n</code></pre>\n\n<ol start=\"4\">\n<li><p>Now in youe activity you can easily create the fragment</p>\n\n<p><strong>Principal</strong></p>\n\n<p>class Principal : AppCompatActivity() {</p>\n\n<pre><code>    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_principal)\n\n        //Create and add the fragment\n        val fatherView=FatherPresentation()\n        addFragment(fatherView,R.id.container)\n    }\n}\n</code></pre></li>\n</ol>\n\n<p>if you want to replace the fragment from your activity it's easy just do \n  replaceFragment(Fragment_you_want_to_replace_with(),id_of_of_your_frame_layout)</p>\n"}], "owner": {"reputation": 298, "user_id": 1828448, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a3ee903ebc770ce1962541cac2655e91?s=128&d=identicon&r=PG", "display_name": "mrobinson7627", "link": "https://stackoverflow.com/users/1828448/mrobinson7627"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8292, "favorite_count": 1, "accepted_answer_id": 31138132, "answer_count": 2, "score": 5, "last_activity_date": 1526512761, "creation_date": 1435419738, "last_edit_date": 1435663074, "question_id": 31090488, "link": "https://stackoverflow.com/questions/31090488/how-to-replace-a-framelayout-with-a-fragment-with-kotlin-on-android", "title": "How to replace a FrameLayout with a fragment with Kotlin on Android", "body": "<p>I'm trying to develop an Android app with Kotlin, but I've hit a bit of a snag when trying to dynamically move fragments around. What I'm trying to do is replace a FrameLayout in an Activity's layout with a fragment. Currently whenever I try to run my app it just shows a white screen under the toolbar leading me to believe that the fragment is not being added to the FrameLayout the way I expected.</p>\n\n<p>Here is my main Activity where I do the first transaction:</p>\n\n<pre><code>package net.ma.ttrobinson.kchan\n\nimport android.content.Intent\nimport android.os.Bundle\nimport android.support.v7.app.AppCompatActivity\nimport android.support.v7.widget.Toolbar\nimport android.util.Log\nimport android.view.Menu\nimport android.view.MenuItem\nimport android.view.View\nimport android.widget.Button\nimport android.widget.EditText\nimport com.androidquery.callback.AjaxStatus\nimport net.ma.ttrobinson.kchan.api.ChanThread\nimport net.ma.ttrobinson.kchan.api.Request\nimport org.jdeferred.DoneCallback\nimport org.jdeferred.FailCallback\nimport org.json.JSONArray\nimport org.json.JSONObject\n\nclass MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        val toolbar = findViewById(R.id.toolbar) as Toolbar\n        setSupportActionBar(toolbar)\n\n        getSupportFragmentManager().beginTransaction()\n            .replace(R.id.main_content_frame, MainFragment())\n            .commit()\n    }\n}\n</code></pre>\n\n<p>Here is the fragment I'm attempting to create. It simply inflates a view while adding a callback for when a button is pressed:</p>\n\n<pre><code>package net.ma.ttrobinson.kchan\n\nimport android.os.Bundle\nimport android.support.v4.app.Fragment\nimport android.util.Log\nimport android.view.LayoutInflater\nimport android.view.View\nimport android.view.ViewGroup\nimport android.widget.Button\nimport android.widget.EditText\nimport com.androidquery.callback.AjaxStatus\nimport net.ma.ttrobinson.kchan.api.ChanThread\nimport net.ma.ttrobinson.kchan.api.Request\nimport org.jdeferred.DoneCallback\nimport org.jdeferred.FailCallback\n\n/**\n * Holds the main content\n */\nclass MainFragment : Fragment() {\n    companion object {\n        val TAG = \"MainFragment\"\n    }\n\n    val debugBoard = \"g\"\n    val debugThread = \"48667796\"\n\n    override fun onCreateView(inflater : LayoutInflater, parent : ViewGroup?, savedInstanceState : Bundle?) : View {\n        val v = inflater.inflate(R.layout.fragment_main, parent, false)\n        val boardText = v.findViewById(R.id.board_text) as EditText\n        val threadText = v.findViewById(R.id.thread_text) as EditText\n        val request = Request(getActivity())\n\n        boardText.setText(debugBoard)\n        threadText.setText(debugThread)\n\n        val button = v.findViewById(R.id.submit) as Button\n        button.setOnClickListener({ v -&gt;\n            val board = boardText.getText().toString()\n            val thread = threadText.getText().toString().toInt()\n\n            val promise = request.getThread(board, thread)\n            promise.done({ thread -&gt;\n                val fm = getActivity().getSupportFragmentManager()\n                fm.beginTransaction()\n                    .replace(R.id.main_content_frame, ThreadFragment(thread), ThreadFragment.TAG)\n                    .addToBackStack(null)\n                    .commit()\n            }).fail({ result -&gt;\n                Log.v(TAG, \"Failed to get thread\")\n            })\n        })\n\n        return v\n    }\n}\n</code></pre>\n\n<p>Here's the layout that the main Activity uses with setContentView:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"&gt;\n\n    &lt;include\n        android:id=\"@+id/toolbar\"\n        layout=\"@layout/toolbar\" /&gt;\n\n    &lt;FrameLayout\n        android:id=\"@+id/main_content_frame\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\" /&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>And lastly here's the layout that the fragment is inflating:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"vertical\" &gt;\n\n    &lt;EditText\n        android:id=\"@+id/board_text\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:hint=\"@string/board_hint\"/&gt;\n\n    &lt;EditText\n        android:id=\"@+id/thread_text\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:inputType=\"phone\"\n        android:hint=\"@string/thread_hint\"/&gt;\n\n    &lt;Button\n        android:id=\"@+id/submit\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"@string/submit\"/&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>I feel like this is a fairly straightforward setup of a main Activity that has a FrameLayout that can be swapped out with other fragments. Does anyone know what I might be doing wrong?</p>\n\n<p>In the meantime I suppose I'll try to make a simpler case to try to replicate the behaviour.</p>\n\n<p>EDIT: Such a simple solution. I forgot to add <code>android:orientation=\"vertical\"</code> in my LinearLayout. Here's the updated code:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:orientation=\"vertical\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"&gt;\n\n    &lt;include\n        android:id=\"@+id/toolbar\"\n        layout=\"@layout/toolbar\" /&gt;\n\n    &lt;FrameLayout\n        android:id=\"@+id/main_content_frame\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\" /&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n"}, {"tags": ["reflection", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1452047567, "post_id": 31063142, "comment_id": 56995170, "body": "Reflection is now more complete.  View the <a href=\"https://kotlinlang.org/docs/reference/reflection.html\" rel=\"nofollow noreferrer\">documentation for Kotlin Reflection</a> and specifically that of <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/-k-class/index.html\" rel=\"nofollow noreferrer\">KClass</a> for more information."}], "tags": [], "owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "is_accepted": true, "score": 5, "last_activity_date": 1440932455, "last_edit_date": 1440932455, "creation_date": 1435279649, "answer_id": 31063142, "question_id": 31060995, "link": "https://stackoverflow.com/questions/31060995/how-do-i-get-the-declared-functions-of-a-kotlin-class-kclass-in-m12/31063142#31063142", "title": "How do I get the declared functions of a Kotlin class (KClass in M12)?", "body": "<p><strong>Update</strong>: <em>You can now get functions of a class with extensions declared in package <code>kotlin.reflect</code>: <code>functions</code>, <code>declaredFunctions</code>, <code>memberFunctions</code>, <code>staticFunctions</code>, etc.</em></p>\n\n<p>Kotlin reflection is a work in progress at the moment. We plan to ship API for introspecting functions in the next milestone, presumably at the end of this summer.</p>\n\n<p>Meanwhile, the only workaround is to use Java reflection for this task.</p>\n"}, {"tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": false, "score": 1, "last_activity_date": 1452047774, "creation_date": 1452047774, "answer_id": 34624712, "question_id": 31060995, "link": "https://stackoverflow.com/questions/31060995/how-do-i-get-the-declared-functions-of-a-kotlin-class-kclass-in-m12/34624712#34624712", "title": "How do I get the declared functions of a Kotlin class (KClass in M12)?", "body": "<p>Kotlin reflection is more full featured in later milestones include the 1.0 betas.</p>\n\n<p>View the overview documentation for <a href=\"https://kotlinlang.org/docs/reference/reflection.html\" rel=\"nofollow\">Kotlin Reflection</a> and specifically that of <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/-k-class/index.html\" rel=\"nofollow\">KClass</a>.  </p>\n\n<p>For example, given a class you can see member functions using:</p>\n\n<pre><code>val functions = Someclass::class.declaredMemberFunctions\n</code></pre>\n\n<p>or properties:</p>\n\n<pre><code>val properties = Someclass::class.declaredMemberProperties\n</code></pre>\n\n<p>And to get from a Java Class to a KClass:</p>\n\n<pre><code>val kclz = this.javaClass.kotlin\n</code></pre>\n\n<p>See also:  <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/index.html\" rel=\"nofollow\">Kotlin.reflect package API docs</a></p>\n"}], "owner": {"reputation": 1510, "user_id": 2142728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b3ca006aaf7a1160f11d133c2762e75f?s=128&d=identicon&r=PG", "display_name": "Alejandro Navas", "link": "https://stackoverflow.com/users/2142728/alejandro-navas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3772, "favorite_count": 0, "accepted_answer_id": 31063142, "answer_count": 2, "score": 2, "last_activity_date": 1452047774, "creation_date": 1435267184, "question_id": 31060995, "link": "https://stackoverflow.com/questions/31060995/how-do-i-get-the-declared-functions-of-a-kotlin-class-kclass-in-m12", "title": "How do I get the declared functions of a Kotlin class (KClass in M12)?", "body": "<p>Basically that. I'm wondering how to get the functions/methods given a KClass... looks like I can only iterate over the properties and extension properties.</p>\n"}, {"tags": ["javascript", "java", "gwt", "kotlin"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1452048231, "post_id": 31059974, "comment_id": 56995347, "body": "Have you tried to make them interop, if so, what did you discover?"}, {"owner": {"reputation": 1108, "user_id": 2013665, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42edb368a194f4573553539cc925fd2a?s=128&d=identicon&r=PG", "display_name": "alex.dorokhov", "link": "https://stackoverflow.com/users/2013665/alex-dorokhov"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1452193802, "post_id": 31059974, "comment_id": 57071893, "body": "I didn&#39;t try yet. But I found TeaVM, which possibly can solve my problem in a very elegant way without using GWT at all."}], "answers": [{"tags": [], "owner": {"reputation": 6493, "user_id": 1020900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab5f80978d59af0204e0986ca41d2c23?s=128&d=identicon&r=PG", "display_name": "bashor", "link": "https://stackoverflow.com/users/1020900/bashor"}, "is_accepted": true, "score": 1, "last_activity_date": 1435266646, "creation_date": 1435266646, "answer_id": 31060859, "question_id": 31059974, "link": "https://stackoverflow.com/questions/31059974/kotlin-js-and-gwt-interop/31060859#31060859", "title": "Kotlin JS and GWT interop", "body": "<p>I think it's simplest way to interop now is interop through javascript as far as both have functionality for that.</p>\n"}], "owner": {"reputation": 1108, "user_id": 2013665, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42edb368a194f4573553539cc925fd2a?s=128&d=identicon&r=PG", "display_name": "alex.dorokhov", "link": "https://stackoverflow.com/users/2013665/alex-dorokhov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 942, "favorite_count": 0, "accepted_answer_id": 31060859, "answer_count": 1, "score": 4, "last_activity_date": 1435266646, "creation_date": 1435263385, "question_id": 31059974, "link": "https://stackoverflow.com/questions/31059974/kotlin-js-and-gwt-interop", "title": "Kotlin JS and GWT interop", "body": "<p>Kotlin JS compiler emits Java Script code from Kotlin code.\nGWT emits Java Script code from Java source code.</p>\n\n<p>Is it possible in easy way to connect JS generated by Kotlin Compiler and JS generated by GWT compiler? How?</p>\n"}, {"tags": ["garbage-collection", "kotlin"], "comments": [{"owner": {"reputation": 496316, "user_id": 57695, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/53ee9941b3fefef67175daf212e62d41?s=128&d=identicon&r=PG", "display_name": "Peter Lawrey", "link": "https://stackoverflow.com/users/57695/peter-lawrey"}, "edited": false, "score": 4, "creation_date": 1435264378, "post_id": 31059842, "comment_id": 50141051, "body": "This question is too vague.  I suggest you experiment with this yourself.  Note: even if you see a <code>new</code> it doesn&#39;t mean the JVM will create an object as it can be optimised away."}, {"owner": {"reputation": 1108, "user_id": 2013665, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42edb368a194f4573553539cc925fd2a?s=128&d=identicon&r=PG", "display_name": "alex.dorokhov", "link": "https://stackoverflow.com/users/2013665/alex-dorokhov"}, "reply_to_user": {"reputation": 496316, "user_id": 57695, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/53ee9941b3fefef67175daf212e62d41?s=128&d=identicon&r=PG", "display_name": "Peter Lawrey", "link": "https://stackoverflow.com/users/57695/peter-lawrey"}, "edited": false, "score": 1, "creation_date": 1435265407, "post_id": 31059842, "comment_id": 50141572, "body": "I&#39;m not a Kotlin expert. Maybe someone had already made some experiments and spent a time. That is why SO exist: to share experience, isn&#39;t it?"}, {"owner": {"reputation": 496316, "user_id": 57695, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/53ee9941b3fefef67175daf212e62d41?s=128&d=identicon&r=PG", "display_name": "Peter Lawrey", "link": "https://stackoverflow.com/users/57695/peter-lawrey"}, "edited": false, "score": 1, "creation_date": 1435323951, "post_id": 31059842, "comment_id": 50166523, "body": "StackOverflow exists to give definitive answers to specific questions.  For a question like this, I suggest asking a kotlin forum.  Trying to predict in advance how something will perform is very hard, (Most experts know enough to not do this except in really obvious cases) I suggest you set up realist tests and attempt to profile them and benchmark them."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1451194337, "post_id": 31059842, "comment_id": 56697330, "body": "@alex.dorokhov topics that are too broad, or mostly opinion based are likely to be closed.  Hit the flag button on your own post and read the descriptions for reasons it might be closed.  Asking others to do significant homework for you (that&#39;s Google&#39;s job) fits into the too broad category."}], "answers": [{"tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": true, "score": 2, "last_activity_date": 1435825981, "creation_date": 1435825981, "answer_id": 31179430, "question_id": 31059842, "link": "https://stackoverflow.com/questions/31059842/kotlin-for-game-dev/31179430#31179430", "title": "Kotlin for game dev", "body": "<p>As a rule of thumb, Kotlin generates bytecode as close as possible to the one generated by Java. So, for example, if you use a function as a value, an inner class will be created, like in Java, but no more. There are also some optimization tricks like <code>IntArray</code> and <code>inline</code> to perform even better.</p>\n\n<p>And as @Peter-Lawrey said, it's always a better idea to measure the values for your specific case.</p>\n"}, {"tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": false, "score": 3, "last_activity_date": 1451915117, "last_edit_date": 1451915117, "creation_date": 1451194112, "answer_id": 34477858, "question_id": 31059842, "link": "https://stackoverflow.com/questions/31059842/kotlin-for-game-dev/34477858#34477858", "title": "Kotlin for game dev", "body": "<p>Technically, your questions comparing Kotlin to Java are moot, they will perform the same.  But Kotlin will be a better development experience. </p>\n\n<p>If Java is good for writing Games, then Kotlin would only better due to developer productivity.  </p>\n\n<p><strong>Note:</strong>  the gaming library <a href=\"https://github.com/LWJGL/lwjgl3\" rel=\"nofollow noreferrer\">LWJGL 3</a> uses Kotlin in part, with GitHub stats showing 67.3% of the code being Kotlin (template module looks to be mostly Kotlin).  So asking people who work with LWJGL will give you the best answer to this question since they have a lot of experience in this area.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Sx6ru.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Sx6ru.png\" alt=\"Github Language Stats for LWJGL3\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 480, "user_id": 4198170, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Rg8HcQrpIIY/AAAAAAAAAAI/AAAAAAAACD8/oih8PPkarOA/photo.jpg?sz=128", "display_name": "Tobse", "link": "https://stackoverflow.com/users/4198170/tobse"}, "is_accepted": false, "score": 3, "last_activity_date": 1589492758, "last_edit_date": 1589492758, "creation_date": 1587063167, "answer_id": 61257867, "question_id": 31059842, "link": "https://stackoverflow.com/questions/31059842/kotlin-for-game-dev/61257867#61257867", "title": "Kotlin for game dev", "body": "<p>You can write Kotlin Code for the JVM which causes the same allocations than the Java corresponding logic. In both cases you have to carefully check if a library call allocates new memory on the heap, or not. Using Kotlin in combination with <a href=\"https://libgdx.badlogicgames.com/\" rel=\"nofollow noreferrer\">LibGDX</a> doesn't introduce any <em>invisible GC overhead</em>. It's an effective way and works well (especially with the <a href=\"https://github.com/libktx/ktx\" rel=\"nofollow noreferrer\">ktx</a> extension.  </p>\n\n<p>But there are Kotlin language features which may help you to write your code with fewer allocations.</p>\n\n<ol>\n<li><p>Singletons are a language feature. (<a href=\"https://kotlinlang.org/docs/reference/object-declarations.html#object-declarations\" rel=\"nofollow noreferrer\">Object declarations</a>, <a href=\"https://kotlinlang.org/docs/tutorials/kotlin-for-py/objects-and-companion-objects.html\" rel=\"nofollow noreferrer\">companion object</a> )</p></li>\n<li><p>You can create wrapper classes for primitive types which compile to primitives. But you get the power of type safety and rich domain models (<a href=\"https://kotlinlang.org/docs/reference/inline-classes.html#inline-classes\" rel=\"nofollow noreferrer\">Inline classes</a>).</p></li>\n<li><p>With the combination of <a href=\"https://kotlinlang.org/docs/reference/operator-overloading.html#operator-overloading\" rel=\"nofollow noreferrer\">Operator overloading</a> and <a href=\"https://kotlinlang.org/docs/reference/inline-functions.html\" rel=\"nofollow noreferrer\">Inline Functions</a> you can build nice APIs which modify objects without allocating new ones. (Example: <a href=\"https://soywiz.com/kotlin-allocation-free-vectorial-operations-using-custom-operators/\" rel=\"nofollow noreferrer\">Allocation-free Vectorial operations using custom operators</a>)  </p></li>\n<li>If you use any kind of dependency injection mechanism or object pooling to connect your game logic and reuse objects, then <a href=\"https://kotlinlang.org/docs/reference/inline-functions.html#reified-type-parameters\" rel=\"nofollow noreferrer\">Reified type parameters</a> may help to use it in a very elegant an short way. You can skip a class as type parameter, if the compiler knows the actual type.</li>\n</ol>\n\n<p>But there is also another option which indeed gives you a different behavior in memory management. Thanks to <a href=\"https://kotlinlang.org/docs/reference/multiplatform.html\" rel=\"nofollow noreferrer\">Kotlin Multiplatform</a>, you can write your game logic as Kotlin common module and cross compile it to native code or to Javascript.<br>\nI did this in a sample Game project <a href=\"https://github.com/TobseF/Candy-Crush-Clone\" rel=\"nofollow noreferrer\">Candy Crush Clone</a>. It works with <a href=\"https://korge.soywiz.com/\" rel=\"nofollow noreferrer\">Korge</a> a <em>Modern Multiplatform Game Engine for Kotlin</em>. The game runs on the JVM, as HTML web app and as Native binary in Win, Linux, Mac, Android or IOS.<br>\nThe native compiled code has its own <a href=\"https://github.com/JetBrains/kotlin-native/blob/master/FAQ.md#q-what-is-kotlinnative-memory-management-model\" rel=\"nofollow noreferrer\">simpler garbage collection</a> and can <a href=\"https://slides.com/tobsefritz/kotlin-native-multiplatform#/5/2\" rel=\"nofollow noreferrer\">run faster</a>. So the speed-increase and the different memory management may give you the power reserve to bother even less with the GC.</p>\n\n<p>In conclusion I can recommend Kotlin for Game dev, also for GC critical scenarios. In my projects I tend to create more classes and allocate more memory when I write Kotlin code. But this is a question of programming style, not a technical one.</p>\n"}], "owner": {"reputation": 1108, "user_id": 2013665, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42edb368a194f4573553539cc925fd2a?s=128&d=identicon&r=PG", "display_name": "alex.dorokhov", "link": "https://stackoverflow.com/users/2013665/alex-dorokhov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2749, "favorite_count": 0, "accepted_answer_id": 31179430, "answer_count": 3, "score": 3, "last_activity_date": 1589492758, "creation_date": 1435262971, "last_edit_date": 1436257651, "question_id": 31059842, "link": "https://stackoverflow.com/questions/31059842/kotlin-for-game-dev", "title": "Kotlin for game dev", "body": "<p>Background:</p>\n\n<p>I'm always searching for a language to replace Java for game development. Kotlin looks promising with a good IDE support and Java interop. But one of the FPS killers for a game (on Android especially) is GC usage. So, some libraries (like libgdx) are using pools of objects, custom collections and other tricks to avoid frequent GC run. For Java that can be done in a clear way. Some other JVM languages espesially with functional support using a lot of GC by it's nature, so it is hard to avoid.</p>\n\n<p>Questions:</p>\n\n<ol>\n<li>Does Kotlin creates any invisible GC overhead in comparison to Java?</li>\n<li>Which features of Kotlin is better to avoid to have less GC work?</li>\n</ol>\n"}, {"tags": ["constructor", "kotlin", "class-attribute"], "comments": [{"owner": {"reputation": 4427, "user_id": 4706743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64b05c3b09628ba8955d6d7a188271af?s=128&d=identicon&r=PG&f=1", "display_name": "D3xter", "link": "https://stackoverflow.com/users/4706743/d3xter"}, "edited": false, "score": 0, "creation_date": 1435221313, "post_id": 31043238, "comment_id": 50112803, "body": "The second example is working with Kotlin 0.12.213. What Kotlin-Version are you using?"}, {"owner": {"reputation": 7850, "user_id": 2960788, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/423618eadcdd4a265e38985a911f5c1a?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher", "link": "https://stackoverflow.com/users/2960788/christopher"}, "reply_to_user": {"reputation": 4427, "user_id": 4706743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64b05c3b09628ba8955d6d7a188271af?s=128&d=identicon&r=PG&f=1", "display_name": "D3xter", "link": "https://stackoverflow.com/users/4706743/d3xter"}, "edited": false, "score": 0, "creation_date": 1435221846, "post_id": 31043238, "comment_id": 50113145, "body": "It works. I already used 0.12.613. But I think, I was doing something wrong. Sorry!"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1452049776, "post_id": 31043238, "comment_id": 56995754, "body": "There are more cases available, I added an answer for complete coverage."}], "answers": [{"comments": [{"owner": {"reputation": 4427, "user_id": 4706743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64b05c3b09628ba8955d6d7a188271af?s=128&d=identicon&r=PG&f=1", "display_name": "D3xter", "link": "https://stackoverflow.com/users/4706743/d3xter"}, "reply_to_user": {"reputation": 2943, "user_id": 3751534, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IejGt.jpg?s=128&g=1", "display_name": "Damon Yuan", "link": "https://stackoverflow.com/users/3751534/damon-yuan"}, "edited": false, "score": 0, "creation_date": 1533823017, "post_id": 31045230, "comment_id": 90496550, "body": "@DamonYuan What would you suggest?"}, {"owner": {"reputation": 2943, "user_id": 3751534, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IejGt.jpg?s=128&g=1", "display_name": "Damon Yuan", "link": "https://stackoverflow.com/users/3751534/damon-yuan"}, "edited": false, "score": 0, "creation_date": 1534259139, "post_id": 31045230, "comment_id": 90642396, "body": "@D3xter I think it is easy to lead to memory leak."}], "tags": [], "owner": {"reputation": 4427, "user_id": 4706743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64b05c3b09628ba8955d6d7a188271af?s=128&d=identicon&r=PG&f=1", "display_name": "D3xter", "link": "https://stackoverflow.com/users/4706743/d3xter"}, "is_accepted": true, "score": 22, "last_activity_date": 1533823069, "last_edit_date": 1533823069, "creation_date": 1435221504, "answer_id": 31045230, "question_id": 31043238, "link": "https://stackoverflow.com/questions/31043238/kotlin-initialize-class-attribute-in-constructor/31045230#31045230", "title": "Kotlin: Initialize class attribute in constructor", "body": "<p>If the only thing you are doing in the constructor is an assignment,\nthen you could use the Primary Constructor with a private Property.</p>\n\n<p>e.g:</p>\n\n<pre><code>public class TestClass(private val context: Context) {\n\n  public fun doSomeVoodoo() {\n     val text = context.getString(R.string.abc_...)\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": false, "score": 20, "last_activity_date": 1452107224, "last_edit_date": 1452107224, "creation_date": 1452049274, "answer_id": 34624907, "question_id": 31043238, "link": "https://stackoverflow.com/questions/31043238/kotlin-initialize-class-attribute-in-constructor/34624907#34624907", "title": "Kotlin: Initialize class attribute in constructor", "body": "<p>As shown by D3xter you have the option of setting it in the constructor.  You also have other options.  Here they all are...</p>\n\n\n\n<p>Create the property within the constructor (as per @D3xter), <em>this is the most common case for simple properties initialized directly by the primary constructor</em>:</p>\n\n<pre><code>class TestClass(private val context: Context) {\n    fun doSomeVoodoo() {\n        val text : String = context.getString()\n    } \n}\n</code></pre>\n\n<p>You can declare the <code>val</code> property and not initialize it, assuming all possible constructors do actually initialize it (as per your second example in the question being asked).  <em>This is normal when you have more than one constructor that could initialize a value differently</em>:</p>\n\n<pre><code>public class TestClass {\n    private val context: Context\n\n    public constructor(context : Context) {\n        this.context = context\n    }\n\n    // alternative constructor\n    public constructor(pre: PreContext) {\n        this.context = pre.readContext()\n    }\n\n    public fun doSomeVoodoo() {\n        val text : String = context.getString()\n    }\n}\n</code></pre>\n\n<p>You can pass in constructor parameters that are not property declarations, and then use those within property initializations.  <em>This is common when you have more complex initializations or need to use delegated properties</em>:</p>\n\n<pre><code>class TestClass(context: PreContext) {\n    private val context : Context by lazy { context.readContext() }\n    private val other: List&lt;Items&gt; = run {\n        context.items.map { it.tag }.filterNotNull()\n    }\n    private val simpleThing = context.getSimple()\n\n    fun doSomeVoodoo() {\n        val text : String = context.getString()\n    }\n}\n</code></pre>\n\n<p>Using <a href=\"https://kotlinlang.org/docs/reference/properties.html#late-initialized-properties\" rel=\"noreferrer\"><code>lateinit</code> modifier</a> when you cannot initialize the value during construction, but you are sure it will be done before your first read access.  <em>This is common when a dependency injection, IoC container, or something creates an empty version of your class and then initializes it immediately</em>:</p>\n\n<pre><code>class TestClass() {\n    private lateinit var context : Context // set by something else after construction\n\n    fun doSomeVoodoo() {\n        val text : String = context.getString()\n    }\n}\n</code></pre>\n\n<p>For <code>lateinit</code> the property must currently be a <code>var</code> and does not work with primitive types.  </p>\n\n<p>You can also declare a <code>var</code> property and not initialize it if you use a delegate designed for that purpose, such as <code>Delegates.notNull()</code>.  <em>This is similar to <code>lateinit</code> and common when you want a <code>var</code> that has no initial state, but is set later after construction at unknown point in time</em>:</p>\n\n<pre><code>public class TestClass() {\n    private var context: Context by Delegates.notNull()\n\n    public fun doSomeVoodoo() {\n        // if context is not set before this is called, an exception is thrown\n        val text : String = context.getString()\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13925, "user_id": 178433, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f0a7931509fe208105cdeec791c7ed04?s=128&d=identicon&r=PG", "display_name": "gMale", "link": "https://stackoverflow.com/users/178433/gmale"}, "is_accepted": false, "score": 1, "last_activity_date": 1528212930, "creation_date": 1528212930, "answer_id": 50703959, "question_id": 31043238, "link": "https://stackoverflow.com/questions/31043238/kotlin-initialize-class-attribute-in-constructor/50703959#50703959", "title": "Kotlin: Initialize class attribute in constructor", "body": "<p>I had a similar problem where I didn't want to hold onto the object after construction. Using <code>lazy</code> or <code>lateinit</code> resulted in inefficient bytecode so after some research I settled on this approach and returned to post the answer in case it helps:</p>\n\n<h2>Solution</h2>\n\n<pre><code>class TestClass(context: Context) {\n    private val homeDescription: String\n\n    init {\n        homeDescription = context.getString(R.string.abc_action_bar_home_description)\n    }\n\n    fun doSomeVoodoo() {\n        val text : String = homeDescription\n    }\n}\n</code></pre>\n\n<p>alternatively, the above can be further simplified into:</p>\n\n<pre><code>class TestClass(context: Context) {\n    private val homeDescription: String = context.getString(R.string.abc_action_bar_home_description)\n\n    fun doSomeVoodoo() {\n        val text : String = homeDescription\n    }\n}\n</code></pre>\n\n<h2>Decompiled Bytecode</h2>\n\n<p>And the decompiled java version of this feels a bit more acceptable than the other approaches and no reference to the context is held after construction:</p>\n\n<pre><code>public final class TestClass {\n    private final String homeDescription;\n\n    public final void doSomeVoodoo() {\n        String text = this.homeDescription;\n    }\n\n    public TestClass(@NotNull Context context) {\n        Intrinsics.checkParameterIsNotNull(context, \"context\");\n        super();\n        String var10001 = context.getString(2131296256);\n        Intrinsics.checkExpressionValueIsNotNull(var10001, \"context.getString(R.stri\u2026ion_bar_home_description)\");\n        this.homeDescription = var10001;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 7850, "user_id": 2960788, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/423618eadcdd4a265e38985a911f5c1a?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher", "link": "https://stackoverflow.com/users/2960788/christopher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15980, "favorite_count": 3, "accepted_answer_id": 31045230, "answer_count": 3, "score": 21, "last_activity_date": 1533823069, "creation_date": 1435215284, "question_id": 31043238, "link": "https://stackoverflow.com/questions/31043238/kotlin-initialize-class-attribute-in-constructor", "title": "Kotlin: Initialize class attribute in constructor", "body": "<p>I create a Kotlin-class with a class attribute, which I want to initialize in the constructor:</p>\n\n<pre><code>public class TestClass {\n\n    private var context : Context? = null // Nullable attribute\n\n    public constructor(context : Context) {\n       this.context = context\n    }\n\n    public fun doSomeVoodoo() {\n       val text : String = context!!.getString(R.string.abc_action_bar_home_description)\n    }\n}\n</code></pre>\n\n<p>Unfortunately I have to declare the attribute as Nullable with the \"?\" sign, although the attribute will be initialized in the constructor. Declaring this attribute as Nullable-attribute makes it always necessary to force an NonNull-value with \"!!\" or to provide a Null-check with \"?\". </p>\n\n<p>Is there any way to avoid this, if the class attribute will be initialized in the constructor? I would like to appreciate a solution like this one:</p>\n\n<pre><code>public class TestClass {\n\n    private var context : Context // Non-Nullable attribute\n\n    public constructor(context : Context) {\n       this.context = context\n    }\n\n    public fun doSomeVoodoo() {\n       val text : String = context.getString(R.string.abc_action_bar_home_description)\n    }\n}\n</code></pre>\n"}, {"tags": ["reflection", "kotlin", "java-interop"], "answers": [{"comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1452050067, "post_id": 31045050, "comment_id": 56995826, "body": "It would be good to copy some content from the issue to here that explains what cases cause the bug.  It can maybe be inferred from the question, but that isn&#39;t the same as &quot;when you do X, it fails, but Y is ok&quot;"}, {"owner": {"reputation": 1254, "user_id": 3362350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e4500858d24434055bd01b57bdc734f?s=128&d=identicon&r=PG", "display_name": "Jacob Zimmerman", "link": "https://stackoverflow.com/users/3362350/jacob-zimmerman"}, "edited": false, "score": 0, "creation_date": 1480465776, "post_id": 31045050, "comment_id": 68971448, "body": "I wouldn&#39;t call it a bug. It was simply never added as a feature."}], "tags": [], "owner": {"reputation": 4427, "user_id": 4706743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64b05c3b09628ba8955d6d7a188271af?s=128&d=identicon&r=PG&f=1", "display_name": "D3xter", "link": "https://stackoverflow.com/users/4706743/d3xter"}, "is_accepted": true, "score": 2, "last_activity_date": 1452430442, "last_edit_date": 1452430442, "creation_date": 1435221010, "answer_id": 31045050, "question_id": 31041711, "link": "https://stackoverflow.com/questions/31041711/kotlin-double-colon-reflection-operator-over/31045050#31045050", "title": "Kotlin: double colon (reflection) operator over", "body": "<p>It is a known bug.</p>\n\n<p>See this <a href=\"https://youtrack.jetbrains.com/issue/KT-6947\" rel=\"nofollow\">issue</a>.</p>\n\n<p>A workaround is to use a Lambda instead. e.g.</p>\n\n<pre><code>class Foo {\n  fun doWork(work: () -&gt; Unit) {\n    work()\n  }\n}\n\nclass Bar (val text: String) {\n  fun printText() {\n    println(\"${text}\")\n  }\n}\n\nval foo: Foo = Foo()\nval bar: Bar = Bar(\"Hello Kotlin!\")\n\nfoo.doWork(bar::printText) //Fails\nfoo.doWork({ bar.printText() }) //Is working\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1254, "user_id": 3362350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e4500858d24434055bd01b57bdc734f?s=128&d=identicon&r=PG", "display_name": "Jacob Zimmerman", "link": "https://stackoverflow.com/users/3362350/jacob-zimmerman"}, "is_accepted": false, "score": 1, "last_activity_date": 1480465609, "last_edit_date": 1480465609, "creation_date": 1452053229, "answer_id": 34625465, "question_id": 31041711, "link": "https://stackoverflow.com/questions/31041711/kotlin-double-colon-reflection-operator-over/34625465#34625465", "title": "Kotlin: double colon (reflection) operator over", "body": "<p>Technically it's not a bug. I asked early on if they planned to support method references on instances in version 1, and I was told that they most likely wouldn't.</p>\n\n<p>Method references can only be used from classes and modules, not from instances. Coming from Java 8, this seems like a big deal, but considering the potential conciseness of their lambda syntax, it really isn't.</p>\n\n<p>UPDATE: They plan to add this feature in 1.1</p>\n"}], "owner": {"reputation": 1510, "user_id": 2142728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b3ca006aaf7a1160f11d133c2762e75f?s=128&d=identicon&r=PG", "display_name": "Alejandro Navas", "link": "https://stackoverflow.com/users/2142728/alejandro-navas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1836, "favorite_count": 0, "accepted_answer_id": 31045050, "answer_count": 2, "score": 1, "last_activity_date": 1480465609, "creation_date": 1435209257, "last_edit_date": 1452050886, "question_id": 31041711, "link": "https://stackoverflow.com/questions/31041711/kotlin-double-colon-reflection-operator-over", "title": "Kotlin: double colon (reflection) operator over", "body": "<p>So I was working with VertX Web, trying to make it work with Kotlin.\nThere's a router and you have to say something like</p>\n\n<pre><code>val vertx = Vertx.vertx()\nval server = vertx.createHttpServer()\nval router = Router.router(vertx)\nserver.requestHandler(router::accept)\n</code></pre>\n\n<p>But it doesn't work. What am I doing wrong? When I use it on Kotlin defined classes, it behaves normally. Is it done on purpose?</p>\n\n<p>Whatever, I had to do it manually like this</p>\n\n<pre><code>server.requestHandler{router.accept(it)}\n</code></pre>\n"}]