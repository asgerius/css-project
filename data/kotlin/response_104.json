[{"tags": ["android", "android-fragments", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 3462, "user_id": 2094298, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/26a93895eedcc45a0ebc3bb0da2cfbe6?s=128&d=identicon&r=PG", "display_name": "Ruckus T-Boom", "link": "https://stackoverflow.com/users/2094298/ruckus-t-boom"}, "is_accepted": false, "score": 1, "last_activity_date": 1483569411, "creation_date": 1483569411, "answer_id": 41474399, "question_id": 41473904, "link": "https://stackoverflow.com/questions/41473904/fragment-as-internal-class/41474399#41474399", "title": "Fragment as internal class", "body": "<p>From the JVM's perspective, <code>internal</code> classes <strong><em>are</em></strong> public <a href=\"https://kotlinlang.org/docs/reference/visibility-modifiers.html#modules\" rel=\"nofollow noreferrer\">within the module</a>.</p>\n"}], "owner": {"reputation": 107, "user_id": 5864246, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-G8jdIaOb39E/AAAAAAAAAAI/AAAAAAAAALA/wosc9d58MOY/photo.jpg?sz=128", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u0420\u043e\u0447\u0435\u0432", "link": "https://stackoverflow.com/users/5864246/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%a0%d0%be%d1%87%d0%b5%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1483569411, "creation_date": 1483567005, "question_id": 41473904, "link": "https://stackoverflow.com/questions/41473904/fragment-as-internal-class", "title": "Fragment as internal class", "body": "<p>If I declare my fragment as private class, IDE will warn me that it should be public and if I ignore it app will crash at runtime. Question is: why everything works fine if I declare it as internal class? As I understand, fragments should be public to be able to be reinstantiated by Android itself, why it works with my internal classes?</p>\n"}, {"tags": ["proguard", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 4717, "user_id": 1990785, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/30ed15227ce48259bd51b3b1e515e81c?s=128&d=identicon&r=PG&f=1", "display_name": "Pragmatic geek", "link": "https://stackoverflow.com/users/1990785/pragmatic-geek"}, "is_accepted": true, "score": 5, "last_activity_date": 1497608644, "last_edit_date": 1497608644, "creation_date": 1487400438, "answer_id": 42312062, "question_id": 41469596, "link": "https://stackoverflow.com/questions/41469596/how-to-prevent-kotlin-unit-object-from-being-stripped-by-proguard/42312062#42312062", "title": "How to prevent kotlin.Unit object from being stripped by Proguard", "body": "<p>In Progaurd rules, wildcards after the name of the class indicate nested classes. So get rid of the <code>.**</code> after <code>Kotlin.Unit</code>:</p>\n\n<pre><code>-keep class kotlin.Unit { *; }\n</code></pre>\n\n<p>Not directly relevant but if you use Kotlin's collections, you need to add the following Proguard rule as well:</p>\n\n<pre><code>-keep class kotlin.collections.CollectionsKt { *; }\n</code></pre>\n\n<p>Since Kotlin's Standard Library has its own <code>Collections</code> file and it contains top level functions and because files with top-level functions are not a direct Java class, you should use the name Kotlin conventionally uses to store this file as a Java class. From Kotlin's documentation:</p>\n\n<blockquote>\n  <p>All the functions and properties declared in a file example.kt inside\n  a package org.foo.bar are put into a Java class named\n  org.foo.bar.ExampleKt.</p>\n  \n  <p>The name of the generated Java class can be changed using the @JvmName\n  annotation.</p>\n</blockquote>\n\n<p>And again don't use the <code>.**</code> wildcard after the class name here.</p>\n"}], "owner": {"reputation": 4717, "user_id": 1990785, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/30ed15227ce48259bd51b3b1e515e81c?s=128&d=identicon&r=PG&f=1", "display_name": "Pragmatic geek", "link": "https://stackoverflow.com/users/1990785/pragmatic-geek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1021, "favorite_count": 0, "accepted_answer_id": 42312062, "answer_count": 1, "score": 2, "last_activity_date": 1497608644, "creation_date": 1483549982, "question_id": 41469596, "link": "https://stackoverflow.com/questions/41469596/how-to-prevent-kotlin-unit-object-from-being-stripped-by-proguard", "title": "How to prevent kotlin.Unit object from being stripped by Proguard", "body": "<p>Proguard stripes <code>kotlin.Unit</code> standalone object (in Kotlin runtime library), and that causes a compilation error if you are using this type. The following rule does not help with keeping this element (perhaps because <code>Unit</code> is not a <em>class</em>, it's an <em>object</em>):</p>\n\n<pre><code>-keep class kotlin.Unit.** { *; }\n</code></pre>\n\n<p>We use the Unit type like this:</p>\n\n<pre><code>fun assert(func : Assert.() -&gt; Unit) = Assert().apply(func)\n</code></pre>\n\n<p>Is there a workaround for this issue or am I missing something?</p>\n"}, {"tags": ["arrays", "multidimensional-array", "kotlin", "flatten"], "comments": [{"owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 0, "creation_date": 1483548042, "post_id": 41468727, "comment_id": 70143514, "body": "Specify your error more precisely, use the original error message."}, {"owner": {"reputation": 103, "user_id": 2860669, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004259163195/picture?type=large", "display_name": "Matthew Mohandiss", "link": "https://stackoverflow.com/users/2860669/matthew-mohandiss"}, "reply_to_user": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 0, "creation_date": 1483548424, "post_id": 41468727, "comment_id": 70143790, "body": "added the actual error message"}], "answers": [{"comments": [{"owner": {"reputation": 23490, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 1, "creation_date": 1528654224, "post_id": 41469730, "comment_id": 88579646, "body": "For the record, the same flatten method applies to lists."}], "tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": true, "score": 10, "last_activity_date": 1483550466, "creation_date": 1483550466, "answer_id": 41469730, "question_id": 41468727, "link": "https://stackoverflow.com/questions/41468727/flatten-array-in-kotlin/41469730#41469730", "title": "Flatten array in Kotlin", "body": "<p>Arrays in Kotlin are <a href=\"https://kotlinlang.org/docs/reference/basic-types.html#arrays\" rel=\"noreferrer\">invariant</a> so an <code>Array&lt;Array&lt;Node&gt;&gt;</code> is not an <code>Array&lt;Array&lt;out T&gt;&gt;</code> (which is the receiver type for <code>flatten</code>).</p>\n\n<p>It looks like this will be fixed in Kotlin 1.1: <a href=\"https://github.com/JetBrains/kotlin/commit/49ea0f5984a90e5f2091be4a662994f0be567d8b\" rel=\"noreferrer\">Relax generic variance in Array.flatten \u00b7 JetBrains/kotlin@49ea0f5</a>.</p>\n\n<p>Until Kotlin 1.1 is released you can maintain your your own version of <code>flatten</code>:</p>\n\n<blockquote>\n<pre><code>/**\n * Returns a single list of all elements from all arrays in the given array.\n */\nfun &lt;T&gt; Array&lt;out Array&lt;out T&gt;&gt;.flatten(): List&lt;T&gt; {\n    val result = ArrayList&lt;T&gt;(sumBy { it.size })\n    for (element in this) {\n        result.addAll(element)\n    }\n    return result\n}\n</code></pre>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 4577, "user_id": 3760297, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/iNM6y.jpg?s=128&g=1", "display_name": "Iman Marashi", "link": "https://stackoverflow.com/users/3760297/iman-marashi"}, "edited": false, "score": 0, "creation_date": 1614923634, "post_id": 41479887, "comment_id": 117538729, "body": "You save me...."}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 19, "last_activity_date": 1483603046, "creation_date": 1483603046, "answer_id": 41479887, "question_id": 41468727, "link": "https://stackoverflow.com/questions/41468727/flatten-array-in-kotlin/41479887#41479887", "title": "Flatten array in Kotlin", "body": "<p>Use a more universal <code>flatMap</code>:</p>\n\n<pre><code>nodes.flatMap {it.asIterable()}\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 2860669, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004259163195/picture?type=large", "display_name": "Matthew Mohandiss", "link": "https://stackoverflow.com/users/2860669/matthew-mohandiss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4221, "favorite_count": 1, "accepted_answer_id": 41469730, "answer_count": 2, "score": 9, "last_activity_date": 1483603046, "creation_date": 1483547261, "last_edit_date": 1483548376, "question_id": 41468727, "link": "https://stackoverflow.com/questions/41468727/flatten-array-in-kotlin", "title": "Flatten array in Kotlin", "body": "<p>I have a two dimensional array of Nodes that I want to flatten into a single array of all nodes using the flatten function of Kotlin arrays.</p>\n\n<pre><code>    val nodes = kotlin.Array(width, { width -&gt;\n    kotlin.Array(height, { height -&gt; Node(width, height) })\n})\n</code></pre>\n\n<p>I then try to call the flatten function on the 2D array</p>\n\n<pre><code>nodes.flatten()\n</code></pre>\n\n<p>but I get an error: <code>Type mismatch: inferred type is Array&lt;Array&lt;Node&gt;&gt; but Array&lt;Array&lt;out ???&gt;&gt; was expected</code>. Is there another way I should be doing this?</p>\n"}, {"tags": ["java", "android", "kotlin", "android-gradle-plugin"], "answers": [{"tags": [], "owner": {"reputation": 57, "user_id": 6145694, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DVuiZQwgQVA/AAAAAAAAAAI/AAAAAAAAB1U/Zp1rUTjeZYE/photo.jpg?sz=128", "display_name": "Ilyas Shafigin", "link": "https://stackoverflow.com/users/6145694/ilyas-shafigin"}, "is_accepted": false, "score": 4, "last_activity_date": 1483891811, "creation_date": 1483891811, "answer_id": 41534738, "question_id": 41467453, "link": "https://stackoverflow.com/questions/41467453/renaming-java-directory-to-kotlin-in-android-studio/41534738#41534738", "title": "Renaming &quot;java&quot; directory to &quot;kotlin&quot; in Android Studio", "body": "<p>I think this feature Android Studio. By default, the folder with the source code it is marked as \"java\". Even if you are in the \"src/main\" folder contains \"kotlin\" and \"java\".</p>\n"}, {"comments": [{"owner": {"reputation": 2944, "user_id": 1773831, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/26563bc5396c8cde8649ddfa3f08ade7?s=128&d=identicon&r=PG", "display_name": "Ove Stoerholt", "link": "https://stackoverflow.com/users/1773831/ove-stoerholt"}, "edited": false, "score": 3, "creation_date": 1499174916, "post_id": 44825108, "comment_id": 76791463, "body": "I have the same. &#39;Android&#39; way of showing projects shows &#39;java&#39; instead of kotlin."}, {"owner": {"reputation": 2178, "user_id": 4260554, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/GVZ6I.jpg?s=128&g=1", "display_name": "Vadims Savjolovs", "link": "https://stackoverflow.com/users/4260554/vadims-savjolovs"}, "reply_to_user": {"reputation": 2944, "user_id": 1773831, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/26563bc5396c8cde8649ddfa3f08ade7?s=128&d=identicon&r=PG", "display_name": "Ove Stoerholt", "link": "https://stackoverflow.com/users/1773831/ove-stoerholt"}, "edited": false, "score": 0, "creation_date": 1499175021, "post_id": 44825108, "comment_id": 76791541, "body": "Yes, in the file system as well as in &quot;Project&quot; view it&#39;s &quot;kotlin&quot;. I think this will be fixed in next releases"}, {"owner": {"reputation": 123, "user_id": 2977081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/utPic.png?s=128&g=1", "display_name": "alpyapple", "link": "https://stackoverflow.com/users/2977081/alpyapple"}, "edited": false, "score": 0, "creation_date": 1566477224, "post_id": 44825108, "comment_id": 101674173, "body": "In Android Studio 3.5 build at august 2019, there is still <i>java</i>  in <i>Android view</i>. Others views are right in kotlin now. Is somewhere any issue open for that ?"}], "tags": [], "owner": {"reputation": 2178, "user_id": 4260554, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/GVZ6I.jpg?s=128&g=1", "display_name": "Vadims Savjolovs", "link": "https://stackoverflow.com/users/4260554/vadims-savjolovs"}, "is_accepted": false, "score": 14, "last_activity_date": 1498739128, "creation_date": 1498739128, "answer_id": 44825108, "question_id": 41467453, "link": "https://stackoverflow.com/questions/41467453/renaming-java-directory-to-kotlin-in-android-studio/44825108#44825108", "title": "Renaming &quot;java&quot; directory to &quot;kotlin&quot; in Android Studio", "body": "<p>I have the same. It happens only in \"Android\" view. When I navigate to that folder in Finder it's named 'kotlin'.\nLooks like it's a bug in the Android studio.\n<a href=\"https://i.stack.imgur.com/R8pkw.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/R8pkw.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 347, "user_id": 2712869, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/038abb6011ead5a1e7dccadbc12dbb1a?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan", "link": "https://stackoverflow.com/users/2712869/jordan"}, "edited": false, "score": 0, "creation_date": 1535950702, "post_id": 51158287, "comment_id": 91236507, "body": "where are you adding this code to see this change because it is not working for me"}, {"owner": {"reputation": 678, "user_id": 1443721, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/8c525e5dbd3185b4bb9d656d06a3d764?s=128&d=identicon&r=PG", "display_name": "user1443721", "link": "https://stackoverflow.com/users/1443721/user1443721"}, "edited": false, "score": 1, "creation_date": 1539451491, "post_id": 51158287, "comment_id": 92511088, "body": "it is not working for me either. Android Studio 3.2.1"}, {"owner": {"reputation": 324, "user_id": 7981490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9b75ff405d0bc659d583023a2f26788?s=128&d=identicon&r=PG&f=1", "display_name": "Iaroslav Ternovyi", "link": "https://stackoverflow.com/users/7981490/iaroslav-ternovyi"}, "edited": false, "score": 0, "creation_date": 1558517060, "post_id": 51158287, "comment_id": 99124150, "body": "Are you using windows ? I&#39;am on linux, for me it&#39;s working"}, {"owner": {"reputation": 1545, "user_id": 161012, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/6375cd82807e0037be29c07aeadbf91c?s=128&d=identicon&r=PG", "display_name": "Pierre Thibault", "link": "https://stackoverflow.com/users/161012/pierre-thibault"}, "edited": false, "score": 2, "creation_date": 1575394292, "post_id": 51158287, "comment_id": 104549165, "body": "This is the solution is I am using on the Mac and it works. Maybe you need to use backslashes with Windows."}, {"owner": {"reputation": 268, "user_id": 3504202, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KzRcI.jpg?s=128&g=1", "display_name": "Benjamin Bisinger", "link": "https://stackoverflow.com/users/3504202/benjamin-bisinger"}, "edited": false, "score": 2, "creation_date": 1587467998, "post_id": 51158287, "comment_id": 108517403, "body": "It needs to be inside the <code>android { }</code> block"}], "tags": [], "owner": {"reputation": 324, "user_id": 7981490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9b75ff405d0bc659d583023a2f26788?s=128&d=identicon&r=PG&f=1", "display_name": "Iaroslav Ternovyi", "link": "https://stackoverflow.com/users/7981490/iaroslav-ternovyi"}, "is_accepted": false, "score": 2, "last_activity_date": 1566979709, "last_edit_date": 1566979709, "creation_date": 1530631874, "answer_id": 51158287, "question_id": 41467453, "link": "https://stackoverflow.com/questions/41467453/renaming-java-directory-to-kotlin-in-android-studio/51158287#51158287", "title": "Renaming &quot;java&quot; directory to &quot;kotlin&quot; in Android Studio", "body": "<p>On Linux</p>\n\n<p>In your modules gradle file ex: app.gradle</p>\n\n<pre><code>sourceSets{ \n    main.java.srcDirs += 'src/main/kotlin/' \n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 29, "user_id": 5674529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5652a318440f827ed0b03a090f690c83?s=128&d=identicon&r=PG&f=1", "display_name": "Frank", "link": "https://stackoverflow.com/users/5674529/frank"}, "is_accepted": false, "score": 1, "last_activity_date": 1556628043, "last_edit_date": 1556628043, "creation_date": 1556624344, "answer_id": 55920114, "question_id": 41467453, "link": "https://stackoverflow.com/questions/41467453/renaming-java-directory-to-kotlin-in-android-studio/55920114#55920114", "title": "Renaming &quot;java&quot; directory to &quot;kotlin&quot; in Android Studio", "body": "<p>even if it is supported in <code>android studio</code>, <code>kotlin</code> is still a plugin and v3.4 has the same behavior.</p>\n\n<p>the solution:</p>\n\n<pre><code>sourceSets{ main.java.srcDirs += 'src\\\\main\\\\kotlin\\\\' }\n</code></pre>\n\n<p>in <code>settings.gradle</code> or <code>local.properties</code> works for me (windows)</p>\n"}, {"comments": [{"owner": {"reputation": 659, "user_id": 2606290, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/5fPLm.jpg?s=128&g=1", "display_name": "Fernando Prieto", "link": "https://stackoverflow.com/users/2606290/fernando-prieto"}, "edited": false, "score": 0, "creation_date": 1572726055, "post_id": 57672685, "comment_id": 103651229, "body": "That is not totally right. That is a solution which does not allow to access to the tests for any class. That means that, if you make that refactor on Android Studio, everything looks fine, your app runs, but if you try to open a Test within a class (GoTo-&gt;Test), Android Studio is not gonna be able to access to the test"}, {"owner": {"reputation": 9526, "user_id": 7356355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ed89399fa941467104efb9930687aaa?s=128&d=identicon&r=PG&f=1", "display_name": "user158", "link": "https://stackoverflow.com/users/7356355/user158"}, "reply_to_user": {"reputation": 659, "user_id": 2606290, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/5fPLm.jpg?s=128&g=1", "display_name": "Fernando Prieto", "link": "https://stackoverflow.com/users/2606290/fernando-prieto"}, "edited": false, "score": 0, "creation_date": 1572742177, "post_id": 57672685, "comment_id": 103654054, "body": "@FernandoPrieto I have not looked at the testing part, but as you can see in my updated section, it breaks the IDE functionality, that&#39;s why I opened an issue. Leave your a comment about the testing part there so they will look into that also."}, {"owner": {"reputation": 1129, "user_id": 5869837, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-K4DuMP0kysM/AAAAAAAAAAI/AAAAAAAAABc/INRwlep4S7g/photo.jpg?sz=128", "display_name": "Paulo Linhares - Packapps", "link": "https://stackoverflow.com/users/5869837/paulo-linhares-packapps"}, "edited": false, "score": 0, "creation_date": 1603900377, "post_id": 57672685, "comment_id": 114183950, "body": "I tested here with Refactory-&gt;Rename and :  It doesnt work all fine.   &#176; Test and AndroidTest execution FAIL;  &#176; Build APP OK;   OBS: My Module renamed is 100% in Kotlin."}], "tags": [], "owner": {"reputation": 9526, "user_id": 7356355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ed89399fa941467104efb9930687aaa?s=128&d=identicon&r=PG&f=1", "display_name": "user158", "link": "https://stackoverflow.com/users/7356355/user158"}, "is_accepted": false, "score": 2, "last_activity_date": 1566970117, "last_edit_date": 1566970117, "creation_date": 1566901694, "answer_id": 57672685, "question_id": 41467453, "link": "https://stackoverflow.com/questions/41467453/renaming-java-directory-to-kotlin-in-android-studio/57672685#57672685", "title": "Renaming &quot;java&quot; directory to &quot;kotlin&quot; in Android Studio", "body": "<p><strong>Update:</strong></p>\n\n<p>After refactor renaming <code>java</code> to <code>kotlin</code>, syntax highlighting got broken, cannot CTRL + B to resources in source files.</p>\n\n<p>So I opened an <a href=\"https://issuetracker.google.com/issues/140122569\" rel=\"nofollow noreferrer\">issue</a> in the issue tracker even mentioned the android view issue after renaming. </p>\n\n<p>So for now I will keep the source directory name as it is.</p>\n\n<hr>\n\n<p>Actually you just have to rename the <code>java</code> directory to <code>kotlin</code>, by right clicking on the <code>java</code> directory in <code>Project view</code> and select</p>\n\n<pre><code>Refactor &gt; Rename\n</code></pre>\n\n<p>and type the new directory name as <code>kotlin</code></p>\n\n<p><strong>No need to add any code</strong> to gradle file.</p>\n\n<p>(Works on android studio 3.5, Linux Mint)</p>\n\n<p>After refactoring on <code>Android view</code>, If it is a <code>Android app module</code> or <code>android library module</code> your source directories (java/kotlin) would not show up, but in regular <code>library module</code>s it will show up as <code>java</code>. In <code>Project view</code> all things look as expected.</p>\n"}, {"tags": [], "owner": {"reputation": 1389, "user_id": 788913, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec155834a545552bf8d60af64808dcce?s=128&d=identicon&r=PG", "display_name": "Per Christian Henden", "link": "https://stackoverflow.com/users/788913/per-christian-henden"}, "is_accepted": false, "score": 6, "last_activity_date": 1588235545, "last_edit_date": 1588235545, "creation_date": 1579524256, "answer_id": 59823569, "question_id": 41467453, "link": "https://stackoverflow.com/questions/41467453/renaming-java-directory-to-kotlin-in-android-studio/59823569#59823569", "title": "Renaming &quot;java&quot; directory to &quot;kotlin&quot; in Android Studio", "body": "<p>Android Studio 3.6 has the same behavior. \nThis is how I fixed it, in app/build.gradle:</p>\n\n<pre><code>// Register kotlin files\nandroid.sourceSets {\n     androidTest.java.srcDirs += \"src/androidTest/kotlin\"\n     debug.java.srcDirs += \"src/debug/kotlin\"\n     main.java.srcDirs += \"src/main/kotlin\"\n     test.java.srcDirs += \"src/test/kotlin\"\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 543, "user_id": 7095029, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fe39a0d8b09a65cae1fece82a612be02?s=128&d=identicon&r=PG&f=1", "display_name": "Andrea", "link": "https://stackoverflow.com/users/7095029/andrea"}, "edited": false, "score": 0, "creation_date": 1589746850, "post_id": 61162647, "comment_id": 109409999, "body": "Works in Android Studio 4.0 RC1, it should be the accepted answer."}, {"owner": {"reputation": 1132, "user_id": 4057688, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/3sHT1.jpg?s=128&g=1", "display_name": "Mirjalal", "link": "https://stackoverflow.com/users/4057688/mirjalal"}, "edited": false, "score": 0, "creation_date": 1600790203, "post_id": 61162647, "comment_id": 113196346, "body": "@kroegerama does not work in Android Studio 4.0.1. I have added the code to the bottom of <code>build.gradle.kts</code> (app level) file, however <code>kotlin</code> folder showing as <code>java</code>."}, {"owner": {"reputation": 478, "user_id": 1117509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a768c98e53a97a3260763de7a5d01883?s=128&d=identicon&r=PG", "display_name": "kroegerama", "link": "https://stackoverflow.com/users/1117509/kroegerama"}, "edited": false, "score": 0, "creation_date": 1600859951, "post_id": 61162647, "comment_id": 113219751, "body": "Android Studio shows it as <code>java</code>, but the actual folder name can be <code>kotlin</code> (if you create a <code>kotlin</code> folder instead of a <code>java</code> folder in the filesystem). AS is not yet able  to show something other than <code>java</code>."}], "tags": [], "owner": {"reputation": 478, "user_id": 1117509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a768c98e53a97a3260763de7a5d01883?s=128&d=identicon&r=PG", "display_name": "kroegerama", "link": "https://stackoverflow.com/users/1117509/kroegerama"}, "is_accepted": false, "score": 6, "last_activity_date": 1586633842, "creation_date": 1586633842, "answer_id": 61162647, "question_id": 41467453, "link": "https://stackoverflow.com/questions/41467453/renaming-java-directory-to-kotlin-in-android-studio/61162647#61162647", "title": "Renaming &quot;java&quot; directory to &quot;kotlin&quot; in Android Studio", "body": "<p>This works fine in Android Studio <code>3.6.2</code> and should be the most versatile solution until <code>AndroidSourceSet</code> starts supporting Kotlin directly. Just add the following snippet at the end of your <code>app/build.gradle[.kts]</code>:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>android.sourceSets.all {\n    java.srcDir(\"src/$name/kotlin\")\n}\n</code></pre>\n"}], "owner": {"reputation": 2525, "user_id": 3439919, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/cv1Eg.png?s=128&g=1", "display_name": "Wheel Builder", "link": "https://stackoverflow.com/users/3439919/wheel-builder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12822, "favorite_count": 12, "answer_count": 7, "score": 59, "last_activity_date": 1588235545, "creation_date": 1483543777, "last_edit_date": 1556629048, "question_id": 41467453, "link": "https://stackoverflow.com/questions/41467453/renaming-java-directory-to-kotlin-in-android-studio", "title": "Renaming &quot;java&quot; directory to &quot;kotlin&quot; in Android Studio", "body": "<p>My android project is written 100% in Kotlin and I wanted to rename the java directory to kotlin to be consistent.  I added </p>\n\n<pre><code>sourceSets{\n    main.java.srcDirs += 'src/main/kotlin'\n}\n</code></pre>\n\n<p>to gradle and renamed the directory.  All compiles and works fine.</p>\n\n<p>The only issue is that when I am in the project tab, in \"Android\" view the directory is still named \"java\" (if I switch to the project view in the dropdown, I do see \"kotlin\" tho).</p>\n\n<p>What am I missing?</p>\n"}, {"tags": ["kotlin", "tornadofx"], "comments": [{"owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "edited": false, "score": 0, "creation_date": 1483541707, "post_id": 41466441, "comment_id": 70139051, "body": "Do you want access to the actual fragments, or do you just want a list of the models they contain, and that list should update as you open/close fragment editors? Should each InstrumentFragment manage it&#39;s own/separate instrument? PS: Never instantiate a Fragment directly, use find, inject or <code>this += InstrumentFragment</code>."}, {"owner": {"reputation": 175, "user_id": 1291139, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/61977afb958e49ca1fdad04f56aaa3c0?s=128&d=identicon&r=PG", "display_name": "Wi-Al", "link": "https://stackoverflow.com/users/1291139/wi-al"}, "reply_to_user": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "edited": false, "score": 0, "creation_date": 1483546576, "post_id": 41466441, "comment_id": 70142383, "body": "I need access to list of the models (ofcource, i can also get reference on the model, if i will have list of the fragments - me the most important is clean and elegant solution ) and i want update this list after  open/close fragment editors. Each IntrumentFragment only knows about his model (or have a reference to the parent - why not?)."}], "answers": [{"comments": [{"owner": {"reputation": 175, "user_id": 1291139, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/61977afb958e49ca1fdad04f56aaa3c0?s=128&d=identicon&r=PG", "display_name": "Wi-Al", "link": "https://stackoverflow.com/users/1291139/wi-al"}, "edited": false, "score": 0, "creation_date": 1483547679, "post_id": 41468474, "comment_id": 70143245, "body": "Thank you Edvin! This what i want! I&#39;ve never used &quot;Scope&quot; and &quot;EventBus&quot; functionality. It is necessary to learn."}, {"owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "reply_to_user": {"reputation": 175, "user_id": 1291139, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/61977afb958e49ca1fdad04f56aaa3c0?s=128&d=identicon&r=PG", "display_name": "Wi-Al", "link": "https://stackoverflow.com/users/1291139/wi-al"}, "edited": false, "score": 0, "creation_date": 1483550824, "post_id": 41468474, "comment_id": 70145350, "body": "Happy to hear it :) We have added Scope and EventBus to the guide if you want to read about it there: <a href=\"https://www.gitbook.com/book/edvin/tornadofx-guide/details\" rel=\"nofollow noreferrer\">gitbook.com/book/edvin/tornadofx-guide/details</a>"}], "tags": [], "owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "is_accepted": true, "score": 3, "last_activity_date": 1483546558, "creation_date": 1483546558, "answer_id": 41468474, "question_id": 41466441, "link": "https://stackoverflow.com/questions/41466441/tornadofx-how-to-create-mdi-with-list-of-child-windows-models/41468474#41468474", "title": "TornadoFX How to create MDI with list of child windows models?", "body": "<p>In this example I'll use a view model and scoping to keep track of the item for each instrument editor. We need to make sure the instruments are unique so we can remove them from the list when the editor is closed. I created an <code>Instrument</code> domain object with an id and a name:</p>\n\n<pre><code>class Instrument {\n    val idProperty = SimpleObjectProperty&lt;UUID&gt;(UUID.randomUUID())\n    var id by idProperty\n\n    val nameProperty = SimpleStringProperty()\n    var name by nameProperty\n\n    override fun equals(other: Any?): Boolean {\n        if (this === other) return true\n        if (other?.javaClass != javaClass) return false\n\n        other as Instrument\n\n        if (id != other.id) return false\n\n        return true\n    }\n\n    override fun hashCode(): Int {\n        return id.hashCode()\n    }\n}\n</code></pre>\n\n<p>We want a view model we can inject in the instrument editor. We'll make sure the view model contains a new instrument by default. It contains a facade for the name property so we can bind it to an editor input field.</p>\n\n<pre><code>class InstrumentModel: ItemViewModel&lt;Instrument&gt;() {\n    init {\n        item = Instrument()\n        item.name = \"New instrument\"\n    }\n    val name = bind { item?.nameProperty }\n}\n</code></pre>\n\n<p>A <code>Fragment</code> has callbacks for <code>onDock</code> and <code>onUndock</code> which can be used to keep track of the model for that fragment. We can use events to signal this. Declare the following events:</p>\n\n<pre><code>class InstrumentAdded(val instrument: Instrument) : FXEvent()\nclass InstrumentRemoved(val instrument: Instrument) : FXEvent()\n</code></pre>\n\n<p>Override the docking callbacks in <code>InstrumentFragment</code> to fire these events:</p>\n\n<pre><code>override fun onDock() {\n    fire(InstrumentAdded(model.item))\n}\n\noverride fun onUndock() {\n    fire(InstrumentRemoved(model.item))\n}\n</code></pre>\n\n<p>For now we'll keep the list of instruments in the main view, <code>InstrumentsView</code>. This could just as well be in a <code>Controller</code>.</p>\n\n<pre><code>val instruments = FXCollections.observableArrayList&lt;Instrument&gt;()\n</code></pre>\n\n<p>In the init class of the main view, we'll subscribe to the events we created and modify our list:</p>\n\n<pre><code>subscribe&lt;InstrumentAdded&gt; {\n    instruments.add(it.instrument)\n}\nsubscribe&lt;InstrumentRemoved&gt; {\n    instruments.remove(it.instrument)\n}\n</code></pre>\n\n<p>The \"New Instrument\" action will open a new InstrumentEditor in a new <code>Scope</code> so we can inject the view model into it and get an instance unique to that editor.</p>\n\n<pre><code>menuitem(\"Add instrument\", \"Shortcut+A\") {\n    find&lt;InstrumentFragment&gt;(Scope()).openWindow()\n}\n</code></pre>\n\n<p>Unfortunately, we can't use <code>openInternalWindow</code> as it currently only supports one internal window at a time. Therefore I used <code>openWindow</code> instead.</p>\n\n<p>If you want to close the editor from an action, you can call <code>closeModal()</code> from anywhere inside the fragment.</p>\n\n<p>I've included a complete example app with a TableView that shows the currently open instruments. It will look like the image below. Notice that you need to hit save before the changes are flushed from the model and visible in the table.\n<a href=\"https://i.stack.imgur.com/kwCfC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kwCfC.png\" alt=\"sample app\"></a></p>\n\n<p>I hope this is what you're looking for, or that you at least can modify it to fit your use case based on this sample.</p>\n\n<pre><code>import javafx.beans.property.SimpleObjectProperty\nimport javafx.beans.property.SimpleStringProperty\nimport javafx.collections.FXCollections\nimport tornadofx.*\nimport java.util.*\n\nclass Instrument {\n    val idProperty = SimpleObjectProperty&lt;UUID&gt;(UUID.randomUUID())\n    var id by idProperty\n\n    val nameProperty = SimpleStringProperty()\n    var name by nameProperty\n\n    override fun equals(other: Any?): Boolean {\n        if (this === other) return true\n        if (other?.javaClass != javaClass) return false\n\n        other as Instrument\n\n        if (id != other.id) return false\n\n        return true\n    }\n\n    override fun hashCode(): Int {\n        return id.hashCode()\n    }\n}\n\nclass InstrumentModel : ItemViewModel&lt;Instrument&gt;() {\n    init {\n        item = Instrument()\n        item.name = \"New instrument\"\n    }\n\n    val name = bind { item?.nameProperty }\n}\n\nclass InstrumentAdded(val instrument: Instrument) : FXEvent()\nclass InstrumentRemoved(val instrument: Instrument) : FXEvent()\n\nclass InstrumentFragment : Fragment(\"Instrument Editor\") {\n    val model: InstrumentModel by inject()\n\n    override val root = form {\n        prefWidth = 300.0\n        fieldset(\"Edit instrument\") {\n            field(\"Name\") {\n                textfield(model.name)\n            }\n        }\n        button(\"Save\") {\n            setOnAction {\n                model.commit()\n            }\n        }\n    }\n\n    override fun onDock() {\n        fire(InstrumentAdded(model.item))\n    }\n\n    override fun onUndock() {\n        fire(InstrumentRemoved(model.item))\n    }\n}\n\nclass InstrumentsView : View() {\n    val instruments = FXCollections.observableArrayList&lt;Instrument&gt;()\n\n    override val root = borderpane {\n        setPrefSize(400.0, 300.0)\n        top {\n            menubar {\n                menu(\"Tools\") {\n                    menuitem(\"Add instrument\", \"Shortcut+A\") {\n                        find&lt;InstrumentFragment&gt;(Scope()).openWindow()\n                    }\n                }\n            }\n        }\n        center {\n            tableview(instruments) {\n                column(\"Name\", Instrument::nameProperty)\n                columnResizePolicy = SmartResize.POLICY\n            }\n        }\n    }\n\n    init {\n        subscribe&lt;InstrumentAdded&gt; {\n            instruments.add(it.instrument)\n        }\n        subscribe&lt;InstrumentRemoved&gt; {\n            instruments.remove(it.instrument)\n        }\n    }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 175, "user_id": 1291139, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/61977afb958e49ca1fdad04f56aaa3c0?s=128&d=identicon&r=PG", "display_name": "Wi-Al", "link": "https://stackoverflow.com/users/1291139/wi-al"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 878, "favorite_count": 0, "accepted_answer_id": 41468474, "answer_count": 1, "score": 0, "last_activity_date": 1483546558, "creation_date": 1483540691, "question_id": 41466441, "link": "https://stackoverflow.com/questions/41466441/tornadofx-how-to-create-mdi-with-list-of-child-windows-models", "title": "TornadoFX How to create MDI with list of child windows models?", "body": "<p>I have following components: </p>\n\n<pre><code>class ChildModel:ViewModel() { //or it may be an POJO, it does not matter\n  val value ....      \n} \n\nclass ParentView: View() {\n  ...\n  //Maybe this should be implemented into ParentViewModel   \n  val childrenList:List&lt;ChildModel&gt;\n\n  fun addFragmentAsChild() {\n    //should:\n    // 1. display fragment within ParentView\n    // 2. add fragment into modelList (or fragmentList - it does not matter -  important to have access to the model of every child )  \n  }\n\n  fun deleteFragmentAsChild() {\n    //should destroy child and remove item from childrenList   \n    //should work also on manual closing \n  }         \n}\n\nclass ChildFragment: Fragment() {\n  val model = ChildModel()      \n...\n}\n</code></pre>\n\n<p>Summary: I want to create MDI and have access to model for every child.</p>\n\n<p>I try do this with help \"openInternalWindow\" , but i can't create multiple child instances and i must manually manage the list - it's bad. </p>\n\n<pre><code>class InstrumentsView: View() {\n  override val root = BorderPane()\n  val instrumentList = ArrayList&lt;InstrumentFragment&gt;()\n\n  init {\n    with(root){\n      top = menubar {\n        menu(\"Tools\") {\n          menuitem(\"Add instrument\", \"Shortcut+A\") {\n            val newFragment = InstrumentFragment()\n            instrumentList.add(newFragment)\n            println(instrumentList.size)\n            openInternalWindow(newFragment, modal = false)\n          }\n\n        }\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>How to do it right tornadofx way?</p>\n"}, {"tags": ["android", "unit-testing", "code-coverage", "kotlin", "inline-functions"], "comments": [{"owner": {"reputation": 4169, "user_id": 341772, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/250b3c601cbd646bece3d2464b024488?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/341772/max"}, "edited": false, "score": 0, "creation_date": 1510248281, "post_id": 41466092, "comment_id": 81365070, "body": "This is a Kotlin bug, currently logged here: <a href=\"https://youtrack.jetbrains.com/issue/KT-12605\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-12605</a>"}, {"owner": {"reputation": 2689, "user_id": 185498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d77120c6ac145bba587b662a014dbdd4?s=128&d=identicon&r=PG", "display_name": "Manushin Igor", "link": "https://stackoverflow.com/users/185498/manushin-igor"}, "edited": false, "score": 0, "creation_date": 1510681403, "post_id": 41466092, "comment_id": 81534659, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/39817814/no-coverage-report-for-inlined-kotlin-methods\">No coverage report for inlined Kotlin methods</a>"}], "answers": [{"comments": [{"owner": {"reputation": 796, "user_id": 3797642, "user_type": "registered", "profile_image": "https://graph.facebook.com/1634273839/picture?type=large", "display_name": "elsennov", "link": "https://stackoverflow.com/users/3797642/elsennov"}, "edited": false, "score": 0, "creation_date": 1483603566, "post_id": 41479992, "comment_id": 70165206, "body": "Ah I see, so that is the reason. Thanks for the advice @voddan"}, {"owner": {"reputation": 181, "user_id": 472499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8399ba14d397ecd93a061f37aebd12b?s=128&d=identicon&r=PG", "display_name": "joseph.rawlings", "link": "https://stackoverflow.com/users/472499/joseph-rawlings"}, "edited": false, "score": 7, "creation_date": 1495822787, "post_id": 41479992, "comment_id": 75428353, "body": "The above response doesn&#39;t answer the question btw"}, {"owner": {"reputation": 3991, "user_id": 1343979, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1cde802f2b3fae0e23f43a65b507bd05?s=128&d=identicon&r=PG", "display_name": "Bass", "link": "https://stackoverflow.com/users/1343979/bass"}, "edited": false, "score": 0, "creation_date": 1615386446, "post_id": 41479992, "comment_id": 117674618, "body": "Still, coverage <b>is</b> good when it&#39;s unclear which code paths are used/covered and which are not, especially in legacy code."}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": true, "score": 1, "last_activity_date": 1483603483, "creation_date": 1483603483, "answer_id": 41479992, "question_id": 41466092, "link": "https://stackoverflow.com/questions/41466092/code-coverage-inline-function/41479992#41479992", "title": "Code Coverage Inline Function", "body": "<p>Since the code is inlined, there are no calls to this function in your tests, and <code>jacoco</code> thinks that you never use it.</p>\n\n<p>A piece of advice: forget about test coverage, it is totally useless. A project can have great tests and 30% coverage. Or someone can spend a ton of time to get 100% coverage, and still have dozens of bugs in production. I've seen both.</p>\n"}], "owner": {"reputation": 796, "user_id": 3797642, "user_type": "registered", "profile_image": "https://graph.facebook.com/1634273839/picture?type=large", "display_name": "elsennov", "link": "https://stackoverflow.com/users/3797642/elsennov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1580, "favorite_count": 2, "accepted_answer_id": 41479992, "answer_count": 1, "score": 5, "last_activity_date": 1510322922, "creation_date": 1483539696, "question_id": 41466092, "link": "https://stackoverflow.com/questions/41466092/code-coverage-inline-function", "title": "Code Coverage Inline Function", "body": "<p>i have this function written in Kotlin</p>\n\n<pre><code>inline fun &lt;T&gt; handleEmptyResult(observable: Observable&lt;T&gt;,\n                                 crossinline resultEmptyCheckingFunc: (obj: T?) -&gt; Boolean): Observable&lt;T&gt; {\n    return observable\n        .flatMap {\n            if (resultEmptyCheckingFunc(it)) {\n                Observable.error&lt;T&gt;(ResultEmptyError(Throwable()))\n            } else {\n                Observable.just(it)\n            }\n        }\n}\n</code></pre>\n\n<p>But when i created unit tests for this function, it shows 0 coverage on the report. I am using jacoco for code coverage. Do you guys know how to unit test inline function properly?\nThanks!</p>\n"}, {"tags": ["java", "enums", "kotlin"], "comments": [{"owner": {"reputation": 1253974, "user_id": 22656, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG", "display_name": "Jon Skeet", "link": "https://stackoverflow.com/users/22656/jon-skeet"}, "edited": false, "score": 0, "creation_date": 1483532130, "post_id": 41463508, "comment_id": 70132593, "body": "&quot;The eg code is in Kotlin but it is same in Java&quot; - <i>what</i> is the same in Java? Given how many more people write Java than Kotlin, I&#39;d strongly encourage you to write a Java question rather than a Kotlin one..."}, {"owner": {"reputation": 2812, "user_id": 5033475, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rsGIW.png?s=128&g=1", "display_name": "Roel Strolenberg", "link": "https://stackoverflow.com/users/5033475/roel-strolenberg"}, "edited": false, "score": 0, "creation_date": 1483533119, "post_id": 41463508, "comment_id": 70133262, "body": "Maybe leave out <code>constructor</code>. Check this for comparison: <a href=\"https://kotlinlang.org/docs/reference/enum-classes.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/enum-classes.html</a>"}, {"owner": {"reputation": 3668, "user_id": 2392960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a549fcc9b00c4ce0ede36ede98548729?s=128&d=identicon&r=PG", "display_name": "Januson", "link": "https://stackoverflow.com/users/2392960/januson"}, "edited": false, "score": 0, "creation_date": 1483533290, "post_id": 41463508, "comment_id": 70133364, "body": "<a href=\"http://stackoverflow.com/a/1080914/2392960\">stackoverflow.com/a/1080914/2392960</a>"}, {"owner": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "edited": false, "score": 1, "creation_date": 1483534148, "post_id": 41463508, "comment_id": 70133949, "body": "For tasks like this one \u2014 where you want to look up your enums by some attribute rather than their declared names \u2014 there are two standard solutions: (1) provide an automatic translation from value to name (like uppercase and replace space with underscore) (2) use a static <code>Map</code>."}], "answers": [{"comments": [{"owner": {"reputation": 12577, "user_id": 2102794, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/BrKf5.jpg?s=128&g=1", "display_name": "Sai", "link": "https://stackoverflow.com/users/2102794/sai"}, "edited": false, "score": 0, "creation_date": 1483534496, "post_id": 41463985, "comment_id": 70134164, "body": "Thank @marstran I know <code>&quot;Un flag&quot; != &quot;UN_FLAG&quot;</code>. I&#39;m seeking for solution not explanation."}, {"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "reply_to_user": {"reputation": 12577, "user_id": 2102794, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/BrKf5.jpg?s=128&g=1", "display_name": "Sai", "link": "https://stackoverflow.com/users/2102794/sai"}, "edited": false, "score": 1, "creation_date": 1483536200, "post_id": 41463985, "comment_id": 70135265, "body": "@SaiKiran See edit."}], "tags": [], "owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "is_accepted": true, "score": 15, "last_activity_date": 1483536187, "last_edit_date": 1483536187, "creation_date": 1483533342, "answer_id": 41463985, "question_id": 41463508, "link": "https://stackoverflow.com/questions/41463508/get-enum-constant-using-its-value/41463985#41463985", "title": "Get enum constant using its value", "body": "<p>The <code>valueOf</code> method takes a string that should correspond the <em>name</em> of the enum constant. However, you extract the value of the enum and try to map that back to a constant. This does not work unless the value is equal to the name of the constant.</p>\n\n<p>So your problem is that <code>TaskAction.UN_FLAG.value</code> returns <code>\"Un flag\"</code>. Then you call <code>TaskAction.valueOf(\"Un flag\")</code>, which cannot find any enum constant with the string you provided (because the name of the enum constant is <code>UN_FLAG</code>).</p>\n\n<p>So basically: <code>\"Un flag\" != \"UN_FLAG\"</code></p>\n\n<p>Edit:</p>\n\n<p>To fix the issue, I would create a function that finds the correct enum based on the value. I would place the function within the companion object of <code>TaskAction</code>. Like this:</p>\n\n<pre><code>companion object {\n  fun from(s: String): TaskAction? = values().find { it.value == s }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 2, "creation_date": 1483539651, "post_id": 41464423, "comment_id": 70137544, "body": "1.  <code>fromValue</code> might be a better name than <code>getFromValue</code>. 2.  <code>lookup</code> can be initialized simply as <code>private val lookup = values().associateBy(TaskAction::value)</code>. 3.  You might want to throw an <code>IllegalArgumentException</code> instead of a <code>KotlinNullPointerException</code>. e.g. <code>return requireNotNull(lookup[value]) { &quot;No TaskAction with value $value&quot; }</code>."}], "tags": [], "owner": {"reputation": 12577, "user_id": 2102794, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/BrKf5.jpg?s=128&g=1", "display_name": "Sai", "link": "https://stackoverflow.com/users/2102794/sai"}, "is_accepted": false, "score": 6, "last_activity_date": 1483608339, "last_edit_date": 1483608339, "creation_date": 1483534661, "answer_id": 41464423, "question_id": 41463508, "link": "https://stackoverflow.com/questions/41463508/get-enum-constant-using-its-value/41464423#41464423", "title": "Get enum constant using its value", "body": "<p>I changed my enum class to something like below, I added a static Map. Because there is no way it maps the value and name by itself. I thought this may help some.</p>\n\n<pre><code>    enum class TaskAction constructor(val value: String) {\n    ARCHIVE(\"Archive\"), UN_FLAG(\"Un flag\"), FLAG(\"Flag\"), REDO(\"Redo\"),\n    READY(\"Ready\"), EDIT(\"Edit\"), DND(\"dnd\"), DELETE(\"Delete\"),\n    IN_PROGRESS(\"In progress\"), DONE(\"Done\");\n\n    companion object {\n        private val lookup = HashMap&lt;String, TaskAction&gt;()\n\n        init {\n            TaskAction.values().map { lookup.put(it.value, it) }\n        }\n\n        fun getFromValue(value: String):TaskAction {\n            return lookup[value]!!\n        }\n    }\n}\n</code></pre>\n\n<p>Update:</p>\n\n<p>Thank to @mfulton26 i simplified my code:</p>\n\n<pre><code>enum class TaskAction constructor(val value: String) {\n    ARCHIVE(\"Archive\"), UN_FLAG(\"Un flag\"), FLAG(\"Flag\"), REDO(\"Redo\"),\n    READY(\"Ready\"), EDIT(\"Edit\"), DND(\"dnd\"), DELETE(\"Delete\"),\n    IN_PROGRESS(\"In progress\"), DONE(\"Done\");\n\n    companion object {\n        private val lookup = values().associateBy(TaskAction::value)\n        fun fromValue(value: String):TaskAction = requireNotNull(lookup[value]) { \"No TaskAction with value $value\" }\n    }\n}\n</code></pre>\n\n<p>I even reduce the code to with the help of @marstran:</p>\n\n<pre><code>companion object {\n    fun from(search: String): TaskAction =  requireNotNull(values().find { it.value == search }) { \"No TaskAction with value $search\" }\n}\n</code></pre>\n"}], "owner": {"reputation": 12577, "user_id": 2102794, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/BrKf5.jpg?s=128&g=1", "display_name": "Sai", "link": "https://stackoverflow.com/users/2102794/sai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7574, "favorite_count": 0, "closed_date": 1483607885, "accepted_answer_id": 41463985, "answer_count": 2, "score": 8, "last_activity_date": 1483608339, "creation_date": 1483531796, "question_id": 41463508, "link": "https://stackoverflow.com/questions/41463508/get-enum-constant-using-its-value", "closed_reason": "Duplicate", "title": "Get enum constant using its value", "body": "<p>Im trying to get enum using its value but it throws an error saying <code>No enum constant</code>. The eg code is in Kotlin but it is same in Java Thanks in advance.</p>\n\n<pre><code>import java.util.*\n\nenum class TaskAction constructor(val value: String) {\n    ARCHIVE(\"Archive\"), UN_FLAG(\"Un flag\"), FLAG(\"Flag\"), REDO(\"Redo\"),\n    READY(\"Ready\"), EDIT(\"Edit\"), DND(\"dnd\"), DELETE(\"Delete\"),\n    IN_PROGRESS(\"In progress\"), DONE(\"Done\");\n}\n\n\nfun main(args: Array&lt;String&gt;) {\n    showSomeThing(TaskAction.UN_FLAG.value)\n}\n\nfun showSomeThing(enum: String) {\n    println(TaskAction.valueOf(enum))\n}\n</code></pre>\n\n<p>Log:</p>\n\n<blockquote>\n  <p>Exception in thread \"main\" java.lang.IllegalArgumentException: No enum\n  constant TaskAction.Un flag</p>\n</blockquote>\n"}, {"tags": ["javafx", "scrollbar", "kotlin", "tornadofx"], "answers": [{"comments": [{"owner": {"reputation": 319, "user_id": 2147234, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eda37aa3cd03335e2c0dccc6890e32e1?s=128&d=identicon&r=PG", "display_name": "mercy123", "link": "https://stackoverflow.com/users/2147234/mercy123"}, "edited": false, "score": 0, "creation_date": 1483554395, "post_id": 41463457, "comment_id": 70147288, "body": "Perfect Solution.. Great work. I had no clue of skin property onchange event.. JavaFX feels like a vast ocean to me which might take months to learn, but thankfully I am travelling fast in a tornado :)"}, {"owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "reply_to_user": {"reputation": 319, "user_id": 2147234, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eda37aa3cd03335e2c0dccc6890e32e1?s=128&d=identicon&r=PG", "display_name": "mercy123", "link": "https://stackoverflow.com/users/2147234/mercy123"}, "edited": false, "score": 0, "creation_date": 1483688108, "post_id": 41463457, "comment_id": 70207396, "body": "Thanks for getting back to me :) This is indeed a corner case, but I think the solution worked out alright."}], "tags": [], "owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "is_accepted": true, "score": 3, "last_activity_date": 1483533743, "last_edit_date": 1483533743, "creation_date": 1483531618, "answer_id": 41463457, "question_id": 41462473, "link": "https://stackoverflow.com/questions/41462473/tornadofx-javafx-sync-scroll-across-tableviews/41463457#41463457", "title": "TornadoFX JavaFX Sync Scroll across tableviews", "body": "<p>First we need clean access to the scrollbars. When the TableView is assigned it's skin, the scrollbars will be available. We'll create a map keyed on orientation to keep track of them:</p>\n\n<pre><code>val scrollbars = HashMap&lt;Orientation, ScrollBar&gt;()\n</code></pre>\n\n<p>Once the skin is available we look up the scrollbars and assign them to our map and listen for changes so we can fire the event</p>\n\n<pre><code>skinProperty().onChange {\n    this.lookupAll(\".scroll-bar\").map { it as ScrollBar }.forEach { bar -&gt;\n        scrollbars[bar.orientation] = bar\n        bar.valueProperty().onChange {\n            fire(SyncScrollEvent(bar, this))\n        }\n    }\n}\n</code></pre>\n\n<p>We don't need the position in the event, since we can query the scrollbar for it's value, but it's easier to filter out the events if we add the source TableView. The SyncScrollEvent now looks like this:</p>\n\n<pre><code>class SyncScrollEvent(val scrollbar: ScrollBar, val table: TableView&lt;*&gt;) : FXEvent()\n</code></pre>\n\n<p>Let's listen for the scroll events and make sure we only change our scrollbar value if the event originates from the other tableview, for the corresponding orientation:</p>\n\n<pre><code>subscribe&lt;SyncScrollEvent&gt; { event -&gt;\n    if (event.table != this)\n        scrollbars[event.scrollbar.orientation]?.value = event.scrollbar.value\n}\n</code></pre>\n\n<p>For completeness, here is the whole modified app:</p>\n\n<pre><code>import javafx.beans.property.SimpleIntegerProperty\nimport javafx.beans.property.SimpleStringProperty\nimport javafx.collections.FXCollections\nimport javafx.geometry.Orientation\nimport javafx.scene.control.ScrollBar\nimport javafx.scene.control.TableView\nimport tornadofx.*\nimport java.util.*\n\nclass SyncScrollEx : View() {\n    override val root = hbox {\n        setPrefSize(300.0, 150.0)\n        add(MyTableFrag::class)\n        add(MyTableFrag::class)\n    }\n}\n\nclass MyTableFrag : Fragment() {\n    val persons = FXCollections.observableArrayList&lt;GameWarrior&gt;(\n            GameWarrior(1, \"Tyrion Lannister\", \"M\"),\n            GameWarrior(2, \"Ned Stark\", \"M\"),\n            GameWarrior(3, \"Sansa Stark\", \"F\"),\n            GameWarrior(4, \"Daenerys Targaryen\", \"F\"),\n            GameWarrior(5, \"Bran Stark\", \"M\"),\n            GameWarrior(6, \"Jon Snow\", \"M\"),\n            GameWarrior(7, \"Arya Stark\", \"F\")\n    )\n\n    val scrollbars = HashMap&lt;Orientation, ScrollBar&gt;()\n\n    override val root = vbox {\n        tableview(persons) {\n            column(\"ID\", GameWarrior::idProperty)\n            column(\"Name\", GameWarrior::nameProperty)\n            column(\"Gender\", GameWarrior::genderProperty)\n            subscribe&lt;SyncScrollEvent&gt; { event -&gt;\n                if (event.table != this)\n                    scrollbars[event.scrollbar.orientation]?.value = event.scrollbar.value\n            }\n            skinProperty().onChange {\n                this.lookupAll(\".scroll-bar\").map { it as ScrollBar }.forEach { bar -&gt;\n                    scrollbars[bar.orientation] = bar\n                    bar.valueProperty().onChange {\n                        fire(SyncScrollEvent(bar, this))\n                    }\n                }\n            }\n        }\n    }\n}\n\nclass GameWarrior(id: Int, name: String, gender: String) {\n\n    val idProperty = SimpleIntegerProperty(id)\n    var id by idProperty\n\n    val nameProperty = SimpleStringProperty(name)\n    var name by nameProperty\n\n    val genderProperty = SimpleStringProperty(gender)\n    var gender by genderProperty\n}\n\nclass SyncScrollEvent(val scrollbar: ScrollBar, val table: TableView&lt;*&gt;) : FXEvent()\n</code></pre>\n"}], "owner": {"reputation": 319, "user_id": 2147234, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eda37aa3cd03335e2c0dccc6890e32e1?s=128&d=identicon&r=PG", "display_name": "mercy123", "link": "https://stackoverflow.com/users/2147234/mercy123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 821, "favorite_count": 0, "accepted_answer_id": 41463457, "answer_count": 1, "score": 0, "last_activity_date": 1483533743, "creation_date": 1483528478, "question_id": 41462473, "link": "https://stackoverflow.com/questions/41462473/tornadofx-javafx-sync-scroll-across-tableviews", "title": "TornadoFX JavaFX Sync Scroll across tableviews", "body": "<p>I am trying to synchronise scrolls across the tableviews. (Both Horizontal &amp; Vertical)  </p>\n\n<p><a href=\"https://i.stack.imgur.com/g2UcP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/g2UcP.png\" alt=\"enter image description here\"></a></p>\n\n<p>The SyncScrollEx View has two tableView which is basically one Fragment  placed side by side, with same dataset, and hence same table size layout.  </p>\n\n<p>Expected Behaviour: When I scroll on one tableview, the other tableview's scrollbar should also scroll for the same amount.  </p>\n\n<p>Below is my current progress:  </p>\n\n<pre><code>import javafx.beans.property.SimpleIntegerProperty\nimport javafx.beans.property.SimpleStringProperty\nimport javafx.collections.FXCollections\nimport javafx.scene.control.ScrollBar\nimport tornadofx.*\n\nclass SyncScrollEx : View() {\n    override val root = hbox {\n        setPrefSize(300.0, 150.0)\n        this += find&lt;MyTableFrag&gt;()\n        this += find&lt;MyTableFrag&gt;()\n    }\n}\nclass MyTableFrag : Fragment() {\n    var addEventOnlyOnceFlag = false\n    val persons = FXCollections.observableArrayList&lt;GameWarrior&gt;(\n            GameWarrior(1,\"Tyrion Lannister\", \"M\"),\n            GameWarrior(2,\"Ned Stark\", \"M\"),\n            GameWarrior(3,\"Sansa Stark\", \"F\"),\n            GameWarrior(4,\"Daenerys Targaryen\", \"F\"),\n            GameWarrior(5,\"Bran Stark\", \"M\"),\n            GameWarrior(6,\"Jon Snow\", \"M\"),\n            GameWarrior(7,\"Arya Stark\", \"F\")\n    )\n    override val root = vbox {\n        tableview(persons) {\n            column(\"ID\", GameWarrior::idProperty)\n            column(\"Name\", GameWarrior::nameProperty)\n            column(\"Gender\", GameWarrior::genderProperty)\n            subscribe&lt;SyncScrollEvent&gt; { event -&gt;\n                //Sync the ScrollX &amp; ScrollY of both the tables\n                event.node.value = event.newVal.toDouble()\n            }\n            //Hack, need to initialize this when the table/scroll is rendered\n            setOnMouseEntered {\n                //Hack for not triggering the lookupAll event on every mouse enter\n                if (!addEventOnlyOnceFlag) {\n                    addEventOnlyOnceFlag = true\n                    //INFO: Look up for the scroll bars in tableView and add a listener\n                    this.lookupAll(\".scroll-bar\").map { node -&gt;\n                        if (node is ScrollBar) {\n                            node.valueProperty().addListener {\n                                value, oldValue, newValue -&gt;\n                                println(node.orientation.toString() + \" \" + newValue)\n                                fire(SyncScrollEvent(node, newValue))\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\nclass GameWarrior(id: Int, name: String, gender: String) {\n\n    val idProperty = SimpleIntegerProperty(id)\n    var id by idProperty\n\n    val nameProperty = SimpleStringProperty(name)\n    var name by nameProperty\n\n    val genderProperty = SimpleStringProperty(gender)\n    var gender by genderProperty\n}\nclass SyncScrollEvent(val node: ScrollBar, val newVal: Number) : FXEvent()\n</code></pre>\n\n<p>The comments highlight the problems I am facing.<br>\nAlso, I fail to understand how the \"subscribe\" will get invoked for both the tableviews in such scenario where Fire() happens inside a EventListener</p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "is_accepted": true, "score": 10, "last_activity_date": 1483528278, "creation_date": 1483528278, "answer_id": 41462408, "question_id": 41462180, "link": "https://stackoverflow.com/questions/41462180/kotlin-all-open-compiler-plugin-doesnt-work/41462408#41462408", "title": "Kotlin all-open compiler plugin doesn&#39;t work", "body": "<p>You need to add the name of the annotation to the path in your config file:</p>\n\n<pre><code>allOpen {\n    annotation(\"com.mycompany.myapp.annotation.AllOpenAnnotation\")\n}\n</code></pre>\n"}], "owner": {"reputation": 529, "user_id": 2259817, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60666dc6d6dcacd03fe979d24fe0a713?s=128&d=identicon&r=PG", "display_name": "mayTree", "link": "https://stackoverflow.com/users/2259817/maytree"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2859, "favorite_count": 0, "accepted_answer_id": 41462408, "answer_count": 1, "score": 8, "last_activity_date": 1483528278, "creation_date": 1483527569, "question_id": 41462180, "link": "https://stackoverflow.com/questions/41462180/kotlin-all-open-compiler-plugin-doesnt-work", "title": "Kotlin all-open compiler plugin doesn&#39;t work", "body": "<p>I use Realm and it requires <code>open</code> keyword to it's model classes.</p>\n\n<p>Following <a href=\"https://blog.jetbrains.com/kotlin/2016/12/kotlin-1-0-6-is-here/\" rel=\"noreferrer\">https://blog.jetbrains.com/kotlin/2016/12/kotlin-1-0-6-is-here/</a>,\nI tried to use all-open compiler plugin to remove the <code>open</code> keyword from Realm model classes.</p>\n\n<p>First, I added all-open compiler plugin and set the package name of annotation</p>\n\n<pre><code>buildscript {\n  dependencies {\n    classpath \"org.jetbrains.kotlin:kotlin-allopen:$kotlin_version\"\n  }\n}\n\napply plugin: \"kotlin-allopen\"\n\nallOpen {\n  annotation(\"com.mycompany.myapp.annotation\")\n}\n</code></pre>\n\n<p>Second, I generated annotation</p>\n\n<pre><code>package com.mycompany.myapp.annotation\nannotation class AllOpenAnnotation\n</code></pre>\n\n<p>Finally, I added the annotation to Realm model class</p>\n\n<pre><code>@AllOpenAnnotation\nclass Model {\n  var id: Int = -1,\n  var title: String = \"\",\n  var desc: String? = null\n}: RealmObject()\n</code></pre>\n\n<p>But the <code>error: cannot inherit from final Model</code> error occurs.</p>\n\n<p>Is there something that I did wrong?</p>\n"}, {"tags": ["sorting", "collections", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 8147, "user_id": 1052697, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/w37j0.png?s=128&g=1", "display_name": "Rolf \u30c4", "link": "https://stackoverflow.com/users/1052697/rolf-%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1483531047, "post_id": 41461748, "comment_id": 70131905, "body": "It seems you have solved your question. But your answer is quite low quality, you should add some more details!"}], "tags": [], "owner": {"reputation": 20901, "user_id": 9476, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f01cbd2238e2a78e4c43fa596f51d6a1?s=128&d=identicon&r=PG", "display_name": "Dmitri Nesteruk", "link": "https://stackoverflow.com/users/9476/dmitri-nesteruk"}, "is_accepted": false, "score": 2, "last_activity_date": 1483592759, "last_edit_date": 1483592759, "creation_date": 1483526220, "answer_id": 41461748, "question_id": 41461621, "link": "https://stackoverflow.com/questions/41461621/kotlin-multi-criteria-sort-not-compiling/41461748#41461748", "title": "Kotlin multi-criteria sort not compiling", "body": "<p>Fooled by distinction between <code>sortedWith</code> and <code>sortedBy</code>. Turns out that <code>sortedBy</code> uses a <em>single</em> criteria (e.g., <code>sortedBy(Person::name)</code>) whereas if you want multiple criteria, you need <code>sortedWith</code>:</p>\n\n<pre><code>people.sortedWith(compareBy(Person::age, Person::name))\n// or\npeople.sortedWith(compareBy({ it.age }, { it.name }))\n</code></pre>\n"}], "owner": {"reputation": 20901, "user_id": 9476, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f01cbd2238e2a78e4c43fa596f51d6a1?s=128&d=identicon&r=PG", "display_name": "Dmitri Nesteruk", "link": "https://stackoverflow.com/users/9476/dmitri-nesteruk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 779, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1483592759, "creation_date": 1483525842, "question_id": 41461621, "link": "https://stackoverflow.com/questions/41461621/kotlin-multi-criteria-sort-not-compiling", "title": "Kotlin multi-criteria sort not compiling", "body": "<p>This simple scenario</p>\n\n<pre><code>data class Person(var name:String, var age:Int)\n\nvar people = listOf(\n        Person(\"Adam\", 36),\n        Person(\"Boris\", 18),\n        Person(\"Claire\", 36),\n        Person(\"Adam\", 20),\n        Person(\"Jack\", 20)\n)\n\nprintln(people.sortedBy{compareBy{Person::age, Person::name}})\n</code></pre>\n\n<p>does not compile with </p>\n\n<blockquote>\n  <p>Error:(27, 29) Kotlin: Type inference failed: Not enough information to infer parameter T in inline> fun  compareBy(crossinline selector: (T) -> Comparable&lt;*>?): Comparator Please specify it explicitly.</p>\n</blockquote>\n\n<p>Changing it to </p>\n\n<pre><code>println(people.sortedBy{compareBy&lt;Person&gt;{Person::age, Person::name}})\n</code></pre>\n\n<p>doesn't work, neither does</p>\n\n<pre><code>println(people.sortedBy{compareBy&lt;Person&gt;{Person::age}.thenBy { Person::name }})\n</code></pre>\n\n<p>giving</p>\n\n<blockquote>\n  <p>Error:(28, 20) Kotlin: Type parameter bound for R in inline fun > Iterable.sortedBy(crossinline selector: (T) -> R?): List is not satisfied: inferred type Comparator is not a subtype of Comparable></p>\n</blockquote>\n\n<p>So then I also tried the multi-function overload</p>\n\n<pre><code>println(people.sortedBy{compareBy&lt;Person&gt;({it.age}, {it.name})})\n</code></pre>\n\n<p>and this yielded</p>\n\n<blockquote>\n  <p>Error:(28, 20) Kotlin: Type parameter bound for R in inline fun > Iterable.sortedBy(crossinline selector: (T) -> R?): List\n   is not satisfied: inferred type Comparator is not a subtype of Comparable></p>\n</blockquote>\n\n<p>And, even more fun if I add the type parameter for <code>sortedBy</code> too</p>\n\n<pre><code>println(people.sortedBy&lt;Person&gt;{compareBy&lt;Person&gt;({it.age}, {it.name})})\n</code></pre>\n\n<p>This yields exactly the same problem, i.e.,</p>\n\n<blockquote>\n  <p>Error:(28, 20) Kotlin: Type parameter bound for R in inline fun > Iterable.sortedBy(crossinline selector: (T) -> R?): List\n   is not satisfied: inferred type Comparator is not a subtype of Comparable></p>\n</blockquote>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["android", "android-intent", "jenkins", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 3936756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b05c83b2ee7080bd53244cc651e4ad97?s=128&d=identicon&r=PG", "display_name": "Senorsen", "link": "https://stackoverflow.com/users/3936756/senorsen"}, "is_accepted": false, "score": 0, "last_activity_date": 1505196483, "creation_date": 1505196483, "answer_id": 46169066, "question_id": 41461609, "link": "https://stackoverflow.com/questions/41461609/kotlin-class-not-found-when-built-with-jenkins/46169066#46169066", "title": "Kotlin class not found when built with jenkins", "body": "<p>Run <code>gradle clean</code> and retry the build. Not sure about your Jenkins script and how your CI workflow runs, but a clean before the build is always recommended.</p>\n\n<p>Why not post your Jenkinsfile / Jenkins CI script here =)</p>\n"}], "owner": {"reputation": 1538, "user_id": 164005, "user_type": "registered", "accept_rate": 19, "profile_image": "https://i.stack.imgur.com/xgdq6.jpg?s=128&g=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/164005/robert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 774, "favorite_count": 0, "answer_count": 1, "score": 6, "last_activity_date": 1505196483, "creation_date": 1483525812, "question_id": 41461609, "link": "https://stackoverflow.com/questions/41461609/kotlin-class-not-found-when-built-with-jenkins", "title": "Kotlin class not found when built with jenkins", "body": "<p>locally on my machine my app built successfully &amp; works fine when clicking to open an Kotlin Activity like:</p>\n\n<pre><code>galleryLayout.setOnClickListener(view -&gt; startActivity(new Intent(PreferencesActivity.this, GalleryActivity.class)));\n</code></pre>\n\n<p>But after successfully built on Jenkins CI the click action will make app crash:</p>\n\n<pre><code>Fatal Exception: java.lang.NoClassDefFoundError: Failed resolution of: Lcom/noodoe/sunray/settings/preferences/gallery/GalleryActivity;\n   at com.noodoe.sunray.settings.preferences.PreferencesActivity.lambda$setupListener$9(PreferencesActivity.java:248)\n   at com.noodoe.sunray.settings.preferences.PreferencesActivity.access$lambda$9(PreferencesActivity.java)\n   at com.noodoe.sunray.settings.preferences.PreferencesActivity$$Lambda$10.onClick(Unknown Source)\n   at android.view.View.performClick(View.java:5226)\n   at android.view.View$PerformClick.run(View.java:21266)\n   at android.os.Handler.handleCallback(Handler.java:739)\n   at android.os.Handler.dispatchMessage(Handler.java:95)\n   at android.os.Looper.loop(Looper.java:168)\n   at android.app.ActivityThread.main(ActivityThread.java:5845)\n   at java.lang.reflect.Method.invoke(Method.java)\n   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:797)\n   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:687)\nCaused by java.lang.ClassNotFoundException: Didn't find class \"com.noodoe.sunray.settings.preferences.gallery.GalleryActivity\" on path: DexPathList[[zip file \"/data/app/com.noodoe.sunray.alpha-1/base.apk\"],nativeLibraryDirectories=[/data/app/com.noodoe.sunray.alpha-1/lib/arm, /data/app/com.noodoe.sunray.alpha-1/base.apk!/lib/armeabi-v7a, /vendor/lib, /system/lib]]\n   at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:56)\n   at java.lang.ClassLoader.loadClass(ClassLoader.java:511)\n   at java.lang.ClassLoader.loadClass(ClassLoader.java:469)\n   at com.noodoe.sunray.settings.preferences.PreferencesActivity.lambda$setupListener$9(PreferencesActivity.java:248)\n   at com.noodoe.sunray.settings.preferences.PreferencesActivity.access$lambda$9(PreferencesActivity.java)\n   at com.noodoe.sunray.settings.preferences.PreferencesActivity$$Lambda$10.onClick(Unknown Source)\n   at android.view.View.performClick(View.java:5226)\n   at android.view.View$PerformClick.run(View.java:21266)\n   at android.os.Handler.handleCallback(Handler.java:739)\n   at android.os.Handler.dispatchMessage(Handler.java:95)\n   at android.os.Looper.loop(Looper.java:168)\n   at android.app.ActivityThread.main(ActivityThread.java:5845)\n   at java.lang.reflect.Method.invoke(Method.java)\n   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:797)\n   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:687)\n</code></pre>\n\n<p>here's my <a href=\"https://gist.github.com/cyberrob/c5a57c6c9b5b7a72baac709929e4b9ca\" rel=\"noreferrer\">build.gradle</a>, please help if you have any idea. Thanks!</p>\n"}, {"tags": ["extension-methods", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 1, "creation_date": 1483525223, "post_id": 41460481, "comment_id": 70128148, "body": "I would highlight that top-level extension functions are currently <b>the preferred way</b> of declaring them. I&#39;m not sure that Object-level extensions are even supposed to work that way."}, {"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 1, "creation_date": 1483525638, "post_id": 41460481, "comment_id": 70128412, "body": "Related issue for autocompleting object extensions (currently &quot;to be considered&quot;): <a href=\"https://youtrack.jetbrains.com/issue/KT-15286#tab=History\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-15286#tab=History</a>"}, {"owner": {"reputation": 9459, "user_id": 1432980, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e646027bcc545177a971230c1e23134a?s=128&d=identicon&r=PG", "display_name": "lapots", "link": "https://stackoverflow.com/users/1432980/lapots"}, "edited": false, "score": 0, "creation_date": 1483525863, "post_id": 41460481, "comment_id": 70128562, "body": "I see. I felt that I need to import it somehow, however I did not know how to do it."}], "tags": [], "owner": {"reputation": 3668, "user_id": 2392960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a549fcc9b00c4ce0ede36ede98548729?s=128&d=identicon&r=PG", "display_name": "Januson", "link": "https://stackoverflow.com/users/2392960/januson"}, "is_accepted": true, "score": 3, "last_activity_date": 1483523128, "last_edit_date": 1483523128, "creation_date": 1483522591, "answer_id": 41460481, "question_id": 41460049, "link": "https://stackoverflow.com/questions/41460049/extension-method-for-utility-class-from-external-library/41460481#41460481", "title": "extension method for utility class from external library", "body": "<p>Before you can use this extension method, you have to import it.</p>\n\n<pre><code>import PluginExtensions.normalizeFilePath\n</code></pre>\n\n<p>Your extension funcion is defined only for the PluginExtensions object. Anywhere outside of this object you need import to make extension visible. Alternative would be to define extension at the package level. This would make your extension visible for the whole package.</p>\n\n<p>Take a look at the documentation for extensions. Specifically <a href=\"https://kotlinlang.org/docs/reference/extensions.html#scope-of-extensions\" rel=\"nofollow noreferrer\">Scope of Extensions</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "is_accepted": false, "score": 2, "last_activity_date": 1483522598, "creation_date": 1483522598, "answer_id": 41460486, "question_id": 41460049, "link": "https://stackoverflow.com/questions/41460049/extension-method-for-utility-class-from-external-library/41460486#41460486", "title": "extension method for utility class from external library", "body": "<p>You need to import the function to the file where you are calling it. An extension function is not located in the class that you are extending. It is located at the place where you defined it.</p>\n\n<p>Write this in the file where you are using the function:</p>\n\n<pre><code>import PluginExtensions.normalizeFilePath\n</code></pre>\n"}], "owner": {"reputation": 9459, "user_id": 1432980, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e646027bcc545177a971230c1e23134a?s=128&d=identicon&r=PG", "display_name": "lapots", "link": "https://stackoverflow.com/users/1432980/lapots"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 712, "favorite_count": 0, "accepted_answer_id": 41460481, "answer_count": 2, "score": 3, "last_activity_date": 1483523128, "creation_date": 1483521279, "last_edit_date": 1483521608, "question_id": 41460049, "link": "https://stackoverflow.com/questions/41460049/extension-method-for-utility-class-from-external-library", "title": "extension method for utility class from external library", "body": "<p>I am using <code>FilenameUtils</code> from <code>apache commons</code></p>\n\n<p>I had such action in the code</p>\n\n<pre><code>val customPath = FilenameUtils.getPath(source) +\n        DEFAULT_SEPARATOR + FilenameUtils.getBaseName(source)\nval resultPath = FilenameUtils.separatorsToSystem(customPath)\n</code></pre>\n\n<p>I decided to make it into the extension method. I moved it into the separate class.</p>\n\n<pre><code>object PluginExtensions {\n\n    fun FilenameUtils.normalizeFilePath(source: String) : String {\n        val customPath = FilenameUtils.getPath(source) +\n                DEFAULT_SEPARATOR + FilenameUtils.getBaseName(source)\n        return FilenameUtils.separatorsToSystem(customPath)\n    }\n\n    fun File(name: String) : File = File(name).apply {\n        createNewFile()\n    }\n}\n</code></pre>\n\n<p>However it is unable to find that new method in class where I am using it</p>\n\n<p><a href=\"https://i.stack.imgur.com/7lHcc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7lHcc.png\" alt=\"enter image description here\"></a></p>\n\n<p>What is the problem?</p>\n"}, {"tags": ["java", "android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 5339746, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e2578a25e8604b7b607b99e2384062d?s=128&d=identicon&r=PG&f=1", "display_name": "Joao", "link": "https://stackoverflow.com/users/5339746/joao"}, "edited": false, "score": 0, "creation_date": 1532173205, "post_id": 41460404, "comment_id": 89880747, "body": "As of July 21, 2018. Unfortunately, the problems are not fixed. I start a project on Java and try to learn Kotlin and add it to mine project. Still, catch a data binding package reference does not exist, in all my views classes exclude one which wrote in Kotlin. I&#39;m scared to apply auto convert for all classes ) So will use your advice"}], "tags": [], "owner": {"reputation": 10444, "user_id": 458668, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/3RGgN.jpg?s=128&g=1", "display_name": "WindRider", "link": "https://stackoverflow.com/users/458668/windrider"}, "is_accepted": true, "score": 2, "last_activity_date": 1495285813, "last_edit_date": 1495285813, "creation_date": 1483522376, "answer_id": 41460404, "question_id": 41459415, "link": "https://stackoverflow.com/questions/41459415/converting-android-project-with-databinding-from-java-to-kotlin/41460404#41460404", "title": "Converting Android project with databinding from Java to Kotlin", "body": "<p>Beware of the combination of Data Binding + Kotlin! The Data Binding library internally uses Kotlin and some conflicts arise from this. I would advise you to keep your activity/fragment classes that use data binding in Java for now and convert the business logic to Kotlin. I had a lot of problems in a fairly large projects. The more dependencies the project has, the bigger the risks are. Proceed to convert classes gradually, never all at once! If you convert multiple files at once, make sure your local or remote history is intact so that you can recover if needed. Few weeks ago I've into so severe bug that make the project was impossible to be built. Some really strange things can be expected. Also beware of the alpha and beta libraries and always update library dependencies one by one to catch any incompatibility as early as possible. I hope that helped a bit.</p>\n\n<p><strong>EDIT</strong>: As of May 20, 2017, I believe most of the aforementioned problems are fixed already. Also Kotlin is now an official language, so full compatibility should be guaranteed and continuously tested by Google.</p>\n"}], "owner": {"reputation": 197, "user_id": 4674660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b48d5db8e369195dcbc7900fa4ada3c4?s=128&d=identicon&r=PG&f=1", "display_name": "oldsport76", "link": "https://stackoverflow.com/users/4674660/oldsport76"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 526, "favorite_count": 0, "accepted_answer_id": 41460404, "answer_count": 1, "score": 2, "last_activity_date": 1495285813, "creation_date": 1483519094, "question_id": 41459415, "link": "https://stackoverflow.com/questions/41459415/converting-android-project-with-databinding-from-java-to-kotlin", "title": "Converting Android project with databinding from Java to Kotlin", "body": "<p>I have a large Android project written in Java and am currently converting it to Kotlin. Many of my activites and fragments use databinding.</p>\n\n<p>Initially, when I converted my first activity using databinding to Kotlin, the project was unable to build for this activity. The error said there were missing references to the databinding library. I added:</p>\n\n<pre><code>kapt 'com.android.databinding:compiler:2.0.0-beta6'\n</code></pre>\n\n<p>to dependencies in <code>app/build.gradle</code> and also</p>\n\n<pre><code>kapt {\n    generateStubs = true\n}\n</code></pre>\n\n<p>to the same file.</p>\n\n<p>After building, the Kotlin activity with databinding worked, whereas all the remaining Java databinding activites now report that the databinding package reference does not exist.</p>\n\n<p>This leaves me in a tough spot. I was planning on converting the activities and fragments one by one to Kotlin and building them as I go, but this seems not doable at the moment since I have to make a choice between Java or Kotlin working at every build.</p>\n\n<p>I found Kotterknife: <a href=\"https://github.com/JakeWharton/kotterknife\" rel=\"nofollow noreferrer\">https://github.com/JakeWharton/kotterknife</a> , which is a view injection library for Kotlin, but I still cannot believe that there is no way to slowly convert your activities from Java to Kotlin, even if they do use databinding. It simply does not seem credible to me.</p>\n\n<p>Has anyone done converted a project in such a way in the past and succeeded without having to make a choice one or the other? Is there a way to convert single activities as you go along? The other option is to just convert all the Java to Kotlin in one go and then make one single build after it's all done, but that seems a bit risky if you put in all the work and then realize you overlooked something. Any ideas? Thanks in advance.</p>\n"}, {"tags": ["kotlin", "kotlin-allopen"], "comments": [{"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "edited": false, "score": 0, "creation_date": 1483521254, "post_id": 41457954, "comment_id": 70125695, "body": "I see you submitted a bug in tracker, so it should be here <a href=\"https://youtrack.jetbrains.com/issue/KT-15541\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-15541</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2775, "user_id": 2102748, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a1adcb8ed924ecd1045fd6252a7df18?s=128&d=identicon&r=PG", "display_name": "milosmns", "link": "https://stackoverflow.com/users/2102748/milosmns"}, "edited": false, "score": 0, "creation_date": 1523227822, "post_id": 41735710, "comment_id": 86460726, "body": "How is this not a bug? If we put the compiler aside, it&#39;s a but in the IDE at least because the message is not clear enough. I had no IDEA (pun intended) what to do with it. For normal JUnit tests it works fine, but for Spring (for example) it throws an error..."}, {"owner": {"reputation": 2775, "user_id": 2102748, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a1adcb8ed924ecd1045fd6252a7df18?s=128&d=identicon&r=PG", "display_name": "milosmns", "link": "https://stackoverflow.com/users/2102748/milosmns"}, "edited": false, "score": 0, "creation_date": 1523634971, "post_id": 41735710, "comment_id": 86656980, "body": "I meant to say &quot;<i>bug</i> in the IDE&quot;, lol. Anyway, I&#39;m following the issue now. Thanks!"}], "tags": [], "owner": {"reputation": 11142, "user_id": 2229438, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/629fdde67cb23f9d3799635d89c7b250?s=128&d=identicon&r=PG", "display_name": "Grzegorz Piwowarek", "link": "https://stackoverflow.com/users/2229438/grzegorz-piwowarek"}, "is_accepted": true, "score": 12, "last_activity_date": 1484809484, "creation_date": 1484809484, "answer_id": 41735710, "question_id": 41457954, "link": "https://stackoverflow.com/questions/41457954/kotlin-allopen-plugin-jvmfield-on-a-val-not-final-enough/41735710#41735710", "title": "Kotlin-allopen plugin + @JvmField on a val not final enough", "body": "<p>I got the official solution.</p>\n\n<p>In such case, <em>finality</em> provided by <code>val</code> is not enough. It turns out you need explicitly add <code>final</code> keyword there and this is not considered a bug.</p>\n\n<pre><code>@JvmField final val foo = null\n</code></pre>\n"}], "owner": {"reputation": 11142, "user_id": 2229438, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/629fdde67cb23f9d3799635d89c7b250?s=128&d=identicon&r=PG", "display_name": "Grzegorz Piwowarek", "link": "https://stackoverflow.com/users/2229438/grzegorz-piwowarek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1107, "favorite_count": 0, "accepted_answer_id": 41735710, "answer_count": 1, "score": 7, "last_activity_date": 1502084151, "creation_date": 1483513128, "last_edit_date": 1502084151, "question_id": 41457954, "link": "https://stackoverflow.com/questions/41457954/kotlin-allopen-plugin-jvmfield-on-a-val-not-final-enough", "title": "Kotlin-allopen plugin + @JvmField on a val not final enough", "body": "<p>I am testing a new <code>kotlin-allopen</code> and <code>kotlin-spring</code> plugins under Kotlin <code>1.0.6</code>.</p>\n\n<p>In one of my <code>@Transactional</code>-annotated classes I have a field:</p>\n\n<pre><code>@JvmField val foo = null\n</code></pre>\n\n<p>When I try to build the project, I get:</p>\n\n<p><code>Error:(45, 5) Kotlin: JvmField can only be applied to final property</code></p>\n\n<p>Is there any proper way of dealing with this? My real-life code needed <code>@JvmField</code> because of the JUnit's <code>@Rule</code>. Managed to \"solve\" the problem by removing a <code>@JvmField</code> and annotating a getter instead. Not sure if a bug or a feature.</p>\n"}, {"tags": ["recursion", "lambda", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 139, "user_id": 869820, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/92fd538676fb30444cd99675294e6155?s=128&d=identicon&r=PG", "display_name": "M Krane", "link": "https://stackoverflow.com/users/869820/m-krane"}, "edited": false, "score": 1, "creation_date": 1483474525, "post_id": 41451489, "comment_id": 70109626, "body": "Thanks, that works. The signatur of combine should be (A, B) -&gt; B. fixed that in the question."}, {"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 1, "creation_date": 1483524973, "post_id": 41451489, "comment_id": 70127993, "body": "If you&#39;re interested in actually creating a recursive lambda, you can look into the concept of y-combinators. I found this page with a list of implementations of it in different languages (no Kotlin yet though): <a href=\"https://rosettacode.org/wiki/Y_combinator\" rel=\"nofollow noreferrer\">rosettacode.org/wiki/Y_combinator</a>"}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": true, "score": 5, "last_activity_date": 1483474016, "creation_date": 1483474016, "answer_id": 41451489, "question_id": 41450940, "link": "https://stackoverflow.com/questions/41450940/kotlin-how-to-recursively-call-a-lambda-function/41451489#41451489", "title": "Kotlin - How to recursively call a lambda function", "body": "<p>You don't call a lambda (\"anonymous function\") from inside itself. That's what functions are for:</p>\n\n<pre><code>fun &lt;A, B&gt; linrec(indivisible: (List&lt;A&gt;) -&gt; Boolean,\n                  value: (List&lt;A&gt;) -&gt; B,\n                  divide: (List&lt;A&gt;) -&gt; List&lt;List&lt;A&gt;&gt;,\n                  combine: (A, A) -&gt; B\n                  ) : (List&lt;A&gt;) -&gt; B {\n\n  fun myfunc(input: List&lt;A&gt;): B {     // rearranged things here\n    return if (indivisible(input)) {  // added `return`\n      value(input)           \n    } else {\n      val split = divide(input)\n      val left = split[0][0]\n      val right = myfunc(split[1])\n      combine(left, right)            // *   \n    }\n  }\n  return ::myfunc\n}\n</code></pre>\n\n<p>Now this is exactly the code you've wrote, but it does not compile. On the line I marked with <code>*</code> kotlinc says <code>Type mismatch: inferred type is B but A was expected</code>.</p>\n\n<p>P.S. I have no idea what that code is doing, so I only fixed  the compilation error you've asked about. </p>\n"}], "owner": {"reputation": 139, "user_id": 869820, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/92fd538676fb30444cd99675294e6155?s=128&d=identicon&r=PG", "display_name": "M Krane", "link": "https://stackoverflow.com/users/869820/m-krane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3075, "favorite_count": 1, "accepted_answer_id": 41451489, "answer_count": 1, "score": 5, "last_activity_date": 1486103539, "creation_date": 1483471745, "last_edit_date": 1486103539, "question_id": 41450940, "link": "https://stackoverflow.com/questions/41450940/kotlin-how-to-recursively-call-a-lambda-function", "title": "Kotlin - How to recursively call a lambda function", "body": "<p>I'm trying to re implement the linrec function from <a href=\"http://raganwald.com/2016/12/15/what-higher-order-functions-can-teach-us-about-libraries-and-frameworks.html\" rel=\"nofollow noreferrer\">here</a> in Kotlin. Here is what it currently looks like in Kotlin:</p>\n\n<pre><code>fun &lt;A, B&gt; linrec(indivisible: (List&lt;A&gt;) -&gt; Boolean,\n                  value: (List&lt;A&gt;) -&gt; B,\n                  divide: (List&lt;A&gt;) -&gt; List&lt;List&lt;A&gt;&gt;,\n                  combine: (A, B) -&gt; B\n                  ) : (List&lt;A&gt;) -&gt; B {\n  val myfunc: (List&lt;A&gt;) -&gt; B = { input -&gt;\n    if (indivisible(input)) {\n      value(input)           \n    } else {\n      val split = divide(input)\n      val left = split[0][0]\n      val right = myfunc(split[1])  // Error\n      combine(left, right)   \n    }\n  }\n  return myfunc\n}\n</code></pre>\n\n<p>IntelliJ gives me the following errors, when I try to run the code:</p>\n\n<pre><code>Error:(40, 19) Kotlin: Unresolved reference: myfunc\n</code></pre>\n\n<p>My question is: <strong>How do I make a lambda function call itself?</strong></p>\n"}, {"tags": ["generics", "kotlin"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1483451874, "post_id": 41442245, "comment_id": 70096464, "body": "What is <code>foo</code>? Please show its declaration"}, {"owner": {"reputation": 5305, "user_id": 5818889, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6b8df2f6af3fd32042982001fac8407b?s=128&d=identicon&r=PG&f=1", "display_name": "glee8e", "link": "https://stackoverflow.com/users/5818889/glee8e"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1483526583, "post_id": 41442245, "comment_id": 70129038, "body": "@voddan Well, it&#39;s Descriptor, actually. Sorry for the mistake."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1483527363, "post_id": 41442245, "comment_id": 70129583, "body": "I don&#39;t see <code>val Invokable.declaringClass</code> anywhere. Could you provide that code too?"}, {"owner": {"reputation": 5305, "user_id": 5818889, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6b8df2f6af3fd32042982001fac8407b?s=128&d=identicon&r=PG&f=1", "display_name": "glee8e", "link": "https://stackoverflow.com/users/5818889/glee8e"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1483528696, "post_id": 41442245, "comment_id": 70130484, "body": "@voddan It&#39;s a google guava class and an online reference has already been provided above."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1483535531, "post_id": 41442245, "comment_id": 70134850, "body": "Oh, I thought this was yours extension property on <code>Invokable</code>. Thanks!"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1483535667, "post_id": 41442245, "comment_id": 70134940, "body": "It looks like a bug, but I&#39;m not sure yet. Could you provide the code which works? Where in the code should you reassign <code>this</code> into a local value?"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1483557336, "post_id": 41442245, "comment_id": 70148908, "body": "That&#39;s is definitely a bug in smart casting. Upvoted!"}], "answers": [{"tags": [], "owner": {"reputation": 2805, "user_id": 7117454, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oaWD5.png?s=128&g=1", "display_name": "Raymond Arteaga", "link": "https://stackoverflow.com/users/7117454/raymond-arteaga"}, "is_accepted": false, "score": 0, "last_activity_date": 1528343904, "creation_date": 1528343904, "answer_id": 50732743, "question_id": 41442245, "link": "https://stackoverflow.com/questions/41442245/kotlin-werid-compile-error-related-to-generics-and-auto-type-cast/50732743#50732743", "title": "Kotlin werid compile error related to generics and auto type cast", "body": "<p>It seems that smart cast is not smart enough. But you can give it a hint using: </p>\n\n<pre><code>val &lt;T : AccessibleObject&gt; T.descriptor: Descriptor\nget() = when (this) {\n    is Invokable&lt;*, *&gt; -&gt; {\n        Descriptor(this.declaringClass,\n                this.modifiers,\n                info,\n                this.declaringClass.info)\n    }\n    else -&gt; throw AssertionError()\n}\n</code></pre>\n\n<p>No need of using the val stuff. You only need to give it \"something\" to work on. It can be messy when there is nothing to \"highlight\" on the IDE :)</p>\n"}], "owner": {"reputation": 5305, "user_id": 5818889, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6b8df2f6af3fd32042982001fac8407b?s=128&d=identicon&r=PG&f=1", "display_name": "glee8e", "link": "https://stackoverflow.com/users/5818889/glee8e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528343904, "creation_date": 1483442172, "last_edit_date": 1483540062, "question_id": 41442245, "link": "https://stackoverflow.com/questions/41442245/kotlin-werid-compile-error-related-to-generics-and-auto-type-cast", "title": "Kotlin werid compile error related to generics and auto type cast", "body": "<p>I think this code snippet should compile:</p>\n\n<pre><code>package bug\n\nimport java.lang.reflect.*\n\ndata class Descriptor(val clazz: Class&lt;*&gt;, val modifiers: Int, val info: List&lt;String&gt;) {\n    constructor(clazz: Class&lt;*&gt;, modifiers: Int, vararg info: List&lt;String&gt;) :\n            this(clazz, modifiers, mutableListOf&lt;String&gt;().apply { info.forEach { this@apply.addAll(it) } })\n}\n\nprivate val AnnotatedElement.info: List&lt;String&gt;\n    get() = getAnnotation(Info::class.java)?.values?.toList() ?: listOf&lt;String&gt;()\n\nannotation class Info(val values: Array&lt;String&gt;)\n\n/**\n * A simple abstraction of com.google.common.reflect.Invokable of Guava 20.0.\n * https://github.com/google/guava/blob/v20.0/guava/src/com/google/common/reflect/Invokable.java\n */\nabstract class Invokable&lt;T, R&gt; : AccessibleObject(), Member, GenericDeclaration\n\nval &lt;T : AccessibleObject&gt; T.descriptor: Descriptor\n    get() = when (this) {\n        is Invokable&lt;*, *&gt; -&gt;\n            Descriptor(declaringClass,\n                       modifiers,\n                       info,\n                       declaringClass.info)\n        else -&gt; throw AssertionError()\n    }\n</code></pre>\n\n<p><del>Here is a convenient reference to <a href=\"https://github.com/google/guava/blob/v20.0/guava/src/com/google/common/reflect/Invokable.java\" rel=\"nofollow noreferrer\">Google Guava's Invokable</a>.</del> Brief <code>Invokable</code> definition is given.</p>\n\n<p>The above code should compile all fine but compiler yields 3 weird message, here is the log output (after proper normalization):</p>\n\n<blockquote>\n  <p>e: /path/to/source.kt: (34, 44): Type inference failed: val  Invokable.declaringClass: Class!\n  cannot be applied to\n  receiver: T#2 (type parameter of descriptor)  arguments: ()</p>\n  \n  <p>e: /path/to/source.kt: (35, 44): Type inference failed: val  Invokable.modifiers: Int\n  cannot be applied to\n  receiver: T#2 (type parameter of descriptor)  arguments: ()</p>\n  \n  <p>e: /path/to/source.kt: (37, 44): Type inference failed: val  Invokable.declaringClass: Class!\n  cannot be applied to\n  receiver: T#2 (type parameter of descriptor)  arguments: ()</p>\n</blockquote>\n\n<p>The solution is simple: assign this to a variable and use that local variable. No manual type cast or other bothering stuff and it will compile. But I'm interested <em>if this is a bug of kotlin compiler</em> or <em>I'm missing some info about kotlin generics</em></p>\n\n<p>EDIT: Working code:</p>\n\n<pre><code>package solution\n\nimport java.lang.reflect.*\n\ndata class Descriptor(val clazz: Class&lt;*&gt;, val modifiers: Int, val info: List&lt;String&gt;) {\n    constructor(clazz: Class&lt;*&gt;, modifiers: Int, vararg info: List&lt;String&gt;) :\n            this(clazz, modifiers, mutableListOf&lt;String&gt;().apply { info.forEach { this@apply.addAll(it) } })\n}\n\nprivate val AnnotatedElement.info: List&lt;String&gt;\n    get() = getAnnotation(Info::class.java)?.values?.toList() ?: listOf&lt;String&gt;()\n\nannotation class Info(val values: Array&lt;String&gt;)\n\n/**\n * A simple abstraction of com.google.common.reflect.Invokable of Guava 20.0.\n * https://github.com/google/guava/blob/v20.0/guava/src/com/google/common/reflect/Invokable.java\n */\nabstract class Invokable&lt;T, R&gt; : AccessibleObject(), Member, GenericDeclaration\n\nval &lt;T : AccessibleObject&gt; T.descriptor: Descriptor\n    get() = when (this) {\n        is Invokable&lt;*, *&gt; -&gt; {\n            val o = this // &lt;---------------------------------CHANGES BEGIN FROM THIS LINE\n            Descriptor(o.declaringClass,\n                       o.modifiers,\n                       info,\n                       o.declaringClass.info)\n        }\n        else -&gt; throw AssertionError()\n    }\n</code></pre>\n\n<p>This has been <a href=\"https://youtrack.jetbrains.com/issue/KT-15538\" rel=\"nofollow noreferrer\">submitted to JetBrains</a> but they didn't respond yet, so I will keep this open until they verified or someone come up scolding my stupidness.</p>\n"}, {"tags": ["gradle", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 8022, "user_id": 1068649, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5e44a15ecb4ee475548612da03c81f33?s=128&d=identicon&r=PG", "display_name": "James Bassett", "link": "https://stackoverflow.com/users/1068649/james-bassett"}, "is_accepted": true, "score": 4, "last_activity_date": 1483443834, "creation_date": 1483443834, "answer_id": 41442761, "question_id": 41441913, "link": "https://stackoverflow.com/questions/41441913/could-not-create-an-instance-of-gradle-plugin-extension/41442761#41442761", "title": "could not create an instance of gradle plugin extension", "body": "<p>Extensions need a default (no-arg) constructor. If you really need to assign a field to a value in your extension, you can use <code>lateinit var</code> and assign it after creating the extension in your plugin.</p>\n\n<p>In this case, it doesn't look like you need your <code>project</code> field anyway, so you can get rid of that and the constructor. Otherwise if you do need the field, still remove the constructor, but you'll need to make <code>project</code> a var with a default value of <code>null</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 535, "user_id": 546757, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3e1a3747e45df2c6e79c5029b4947c24?s=128&d=identicon&r=PG", "display_name": "Alan Cabrera", "link": "https://stackoverflow.com/users/546757/alan-cabrera"}, "is_accepted": false, "score": 0, "last_activity_date": 1556131865, "creation_date": 1556131865, "answer_id": 55836754, "question_id": 41441913, "link": "https://stackoverflow.com/questions/41441913/could-not-create-an-instance-of-gradle-plugin-extension/55836754#55836754", "title": "could not create an instance of gradle plugin extension", "body": "<p>I'm not sure what <code>ApplicationEnvironmentExtension</code> is expecting during construction, so I will assume that it's an instance of the Gradle <code>Project</code>.  Try this</p>\n\n<pre><code>project.extensions.create(\"app\", ApplicationEnvironmentExtension::class.java, project)\n</code></pre>\n\n<p>The plugin needs to pass the constructors arguments when calling <code>Project.create()</code>.  If it is an instance of the Gradle <code>Project</code>, then the type of <code>ApplicationEnvironmentExtension.project</code> should be <code>Project</code>, not the vague type <code>Any</code>.</p>\n"}], "owner": {"reputation": 9459, "user_id": 1432980, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e646027bcc545177a971230c1e23134a?s=128&d=identicon&r=PG", "display_name": "lapots", "link": "https://stackoverflow.com/users/1432980/lapots"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5586, "favorite_count": 1, "accepted_answer_id": 41442761, "answer_count": 2, "score": 1, "last_activity_date": 1556131865, "creation_date": 1483441045, "last_edit_date": 1483451028, "question_id": 41441913, "link": "https://stackoverflow.com/questions/41441913/could-not-create-an-instance-of-gradle-plugin-extension", "title": "could not create an instance of gradle plugin extension", "body": "<p>I am trying to write <code>gradle</code> plugin using <code>kotlin</code>. It supposed to work like this. While providing configuration</p>\n\n<pre><code>apply plugin: 'appenv'\n\napp {\n    srcLink \"\"\n    downloadPath \"\"\n}\n</code></pre>\n\n<p>It should allow to download file from <code>srcLink</code> and store in <code>downloadPath</code> using task <code>downloadAll</code></p>\n\n<p>I created extension class</p>\n\n<pre><code>open class ApplicationEnvironmentExtension {\n    val project: Any?\n\n    constructor(project: Any?) {\n        this.project = project\n    }\n\n    var srcLink: String = \"\"\n    var downloadPath: String = \"\"\n}\n</code></pre>\n\n<p>Create plugin class</p>\n\n<pre><code>class ApplicationEnvironmentPlugin : Plugin&lt;Project&gt; {\n\n    override fun apply(project: Project) {\n        project.extensions.create(\"app\", ApplicationEnvironmentExtension::class.java)\n        project.task(mapOf (\"type\" to Download::class.java), \"downloadAll\")\n    }\n}\n</code></pre>\n\n<p>And here his the task</p>\n\n<pre><code>class Download : DefaultTask() {\n\n    @TaskAction\n    fun download() {\n        val extension = this.project.extensions.getByName(\"app\") as ApplicationEnvironmentExtension\n        DownloadUtils.download(extension.srcLink, extension.downloadPath)\n    }\n}\n</code></pre>\n\n<p>I build it and add it as <code>jar</code> dependency to my project.\nTo check whether tasks were added I run <code>gradle tasks</code>. But during that I get the error</p>\n\n<pre><code>Could not create an instance of type com.lapots.gradle.plugins.appenv.ApplicationEnvironmentExtension_Decorated.\n</code></pre>\n\n<p>In stacktrace I get</p>\n\n<pre><code>Caused by: org.gradle.internal.reflect.ObjectInstantiationException: Could not create an instance of type com.lapots.gradle.plugins.appenv.ApplicationEnvironmentExtension_Decorated.\n        at org.gradle.internal.reflect.DirectInstantiator.newInstance(DirectInstantiator.java:53)\n        at org.gradle.api.internal.ClassGeneratorBackedInstantiator.newInstance(ClassGeneratorBackedInstantiator.java:36)\n        at org.gradle.api.internal.plugins.DefaultConvention.create(DefaultConvention.java:106)\n        at com.lapots.gradle.plugins.appenv.ApplicationEnvironmentPlugin.apply(ApplicationEnvironmentPlugin.kt:11)\n        at com.lapots.gradle.plugins.appenv.ApplicationEnvironmentPlugin.apply(ApplicationEnvironmentPlugin.kt:8)\n        at org.gradle.api.internal.plugins.ImperativeOnlyPluginApplicator.applyImperative(ImperativeOnlyPluginApplicator.java:35)\n        at org.gradle.api.internal.plugins.RuleBasedPluginApplicator.applyImperative(RuleBasedPluginApplicator.java:43)\n        at org.gradle.api.internal.plugins.DefaultPluginManager.doApply(DefaultPluginManager.java:144)\n        ... 58 more         \nCaused by: java.lang.IllegalArgumentException: Could not find any public constructor for class com.lapots.gradle.plugins.appenv.ApplicationEnvironmentExtension_Decorated which accepts parameters [].\n        at org.gradle.internal.reflect.DirectInstantiator.newInstance(DirectInstantiator.java:44)\n        ... 65 more    \n</code></pre>\n\n<p>What is the problem? Should I provide some addtional constructors to extension?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 1, "creation_date": 1483437966, "post_id": 41440750, "comment_id": 70087874, "body": "Why don&#39;t you turn it into <code>val</code> then? Every mutable property with a backing field needs to be initialized."}, {"owner": {"reputation": 9837, "user_id": 483520, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4fc6e3d12a3ca9dd7998d4109b3415ca?s=128&d=identicon&r=PG", "display_name": "Nolan Amy", "link": "https://stackoverflow.com/users/483520/nolan-amy"}, "reply_to_user": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 0, "creation_date": 1551734164, "post_id": 41440750, "comment_id": 96740737, "body": "@miensol Agreed, this should be a <code>val</code>. I was confused myself; the source of the confusion was thinking of the <code>val</code>/<code>var</code> difference as constant vs. variable, rather than read-only vs. mutable."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6685522"}, "edited": false, "score": 0, "creation_date": 1495737091, "post_id": 41441530, "comment_id": 75388773, "body": "What is mean by initialization? provide the setter? or provider the value during declaration? can you confirm please?"}, {"owner": {"reputation": 3668, "user_id": 2392960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a549fcc9b00c4ce0ede36ede98548729?s=128&d=identicon&r=PG", "display_name": "Januson", "link": "https://stackoverflow.com/users/2392960/januson"}, "edited": false, "score": 0, "creation_date": 1495781812, "post_id": 41441530, "comment_id": 75404212, "body": "Providing a value. Either by explicit initializer or inside the init block."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6685522"}, "edited": false, "score": 0, "creation_date": 1495782044, "post_id": 41441530, "comment_id": 75404320, "body": "if I didn&#39;t provide any value either during declaration or init block. Why it required to write both getter and setter? I mean suppose I just write set block as it.     <code>var good : Int         set(value){             field = 3         }</code> it will still show error about initialization. But once I write <code>get() = 3</code> or something it will solve the error. What is the reason behind?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6685522"}, "edited": false, "score": 0, "creation_date": 1495782402, "post_id": 41441530, "comment_id": 75404504, "body": "<code>var good : Int         set(value){             field = 3         }         get() = 3</code> it is not working Don&#39;t know why. but when I remove <code>field=3</code> it works fine initialization error gone."}, {"owner": {"reputation": 3668, "user_id": 2392960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a549fcc9b00c4ce0ede36ede98548729?s=128&d=identicon&r=PG", "display_name": "Januson", "link": "https://stackoverflow.com/users/2392960/januson"}, "edited": false, "score": 0, "creation_date": 1495782580, "post_id": 41441530, "comment_id": 75404593, "body": "Same as in the answer above. Take a look at the link to the backing field documentation. Var generates backing field if you are using default get/set or if you reference field in your custom ones. Ad if backing field gets generated it needs to be initialized."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6685522"}, "edited": false, "score": 0, "creation_date": 1495782999, "post_id": 41441530, "comment_id": 75404789, "body": "I already read the documents but was confused about the initialization. So just to confirm the initialization mean assigning the value during declaration or from the constructor? because I&#39;m also initializing here. <code>var good : Int set(value){ field = 3 } get() = 3</code> but it is not working."}, {"owner": {"reputation": 3668, "user_id": 2392960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a549fcc9b00c4ce0ede36ede98548729?s=128&d=identicon&r=PG", "display_name": "Januson", "link": "https://stackoverflow.com/users/2392960/januson"}, "edited": false, "score": 0, "creation_date": 1495784005, "post_id": 41441530, "comment_id": 75405314, "body": "Correct. Either explicit initializer or init. Code you posted is not initialization. get/set are just custom accessors. You modified set to always set good to 3 and get to always return 3."}], "tags": [], "owner": {"reputation": 3668, "user_id": 2392960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a549fcc9b00c4ce0ede36ede98548729?s=128&d=identicon&r=PG", "display_name": "Januson", "link": "https://stackoverflow.com/users/2392960/januson"}, "is_accepted": true, "score": 41, "last_activity_date": 1483439714, "creation_date": 1483439714, "answer_id": 41441530, "question_id": 41440750, "link": "https://stackoverflow.com/questions/41440750/kotlin-why-do-i-need-to-initialize-a-var-with-custom-getter/41441530#41441530", "title": "Kotlin: why do I need to initialize a var with custom getter?", "body": "<p>Reason behind this is <a href=\"https://kotlinlang.org/docs/reference/properties.html#backing-fields\" rel=\"noreferrer\">Backing field</a>. When you create val with custom getter that does not use field identifier to access its value, then backing field is not generated.</p>\n\n<pre><code>val greeting: String\n    get() = \"hello\"\n</code></pre>\n\n<p>If you do, then backing field is generated and needs to be initialized.</p>\n\n<pre><code>val greeting: String // Property must be initialized\n    get() = field\n</code></pre>\n\n<p>Now with var. Since backing filed is generated by default, it must be initialized.</p>\n\n<pre><code>var greeting: String // Property must be initialized\n    get() = \"hello\"\n</code></pre>\n\n<p>For this to work for var without initialization, you must provide a custom setter to prevent generation of backing field. For example:</p>\n\n<pre><code>var storage: String = \"\"\nvar greeting: String\n    get() = \"hello\"\n    set(value) { storage = value}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9837, "user_id": 483520, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4fc6e3d12a3ca9dd7998d4109b3415ca?s=128&d=identicon&r=PG", "display_name": "Nolan Amy", "link": "https://stackoverflow.com/users/483520/nolan-amy"}, "edited": false, "score": 4, "creation_date": 1551734204, "post_id": 41441687, "comment_id": 96740753, "body": "If you don&#39;t need the setter, it should be a <code>val</code> property."}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 15, "last_activity_date": 1483440261, "creation_date": 1483440261, "answer_id": 41441687, "question_id": 41440750, "link": "https://stackoverflow.com/questions/41440750/kotlin-why-do-i-need-to-initialize-a-var-with-custom-getter/41441687#41441687", "title": "Kotlin: why do I need to initialize a var with custom getter?", "body": "<p>Your code does not have a custom setter, so it is equivalent to:</p>\n\n<pre><code>var greeting: String\n    get() = \"hello\"\n    set(v) {field = v}  // Generated by default\n</code></pre>\n\n<p>The default implementation of <code>set</code> uses <code>field</code>, so you've got to initialise it. </p>\n\n<p>By the same logic, you don't have to init the field if nether your <code>set</code> nor <code>get</code> use it (which means they are both custom):</p>\n\n<pre><code>var greeting: String  // no `field` associated!\n    get() = \"hello\"\n    set(v) = TODO()\n</code></pre>\n"}], "owner": {"reputation": 6473, "user_id": 2660462, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e7866e763430b8848f14ffdacb61b99f?s=128&d=identicon&r=PG", "display_name": "Lukas Lechner", "link": "https://stackoverflow.com/users/2660462/lukas-lechner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7766, "favorite_count": 2, "accepted_answer_id": 41441530, "answer_count": 2, "score": 35, "last_activity_date": 1483440261, "creation_date": 1483437404, "question_id": 41440750, "link": "https://stackoverflow.com/questions/41440750/kotlin-why-do-i-need-to-initialize-a-var-with-custom-getter", "title": "Kotlin: why do I need to initialize a var with custom getter?", "body": "<p>Why do I need to initialize a <code>var</code> with a custom getter, that returns a constant?</p>\n\n<pre><code>var greeting: String // Property must be initialized \nget() = \"hello\"\n</code></pre>\n\n<p>I don't need initialization when I make <code>greeting</code> read-only (<code>val</code>)</p>\n"}, {"tags": ["android", "unit-testing", "mockito", "kotlin", "powermockito"], "comments": [{"owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "edited": false, "score": 0, "creation_date": 1483428672, "post_id": 41435079, "comment_id": 70083017, "body": "Just wondering: did you try building a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> - I mean for your own? Just to prove that the whole &quot;chain&quot; with Kotlin and PowerMock and static mocking works for a super simple example? Before going full scale and your real production code?"}, {"owner": {"reputation": 3471, "user_id": 2068693, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Cu4rC.jpg?s=128&g=1", "display_name": "E. Fernandes", "link": "https://stackoverflow.com/users/2068693/e-fernandes"}, "reply_to_user": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "edited": false, "score": 0, "creation_date": 1483456923, "post_id": 41435079, "comment_id": 70099695, "body": "I&#39;ve been able to user Mockito with Kotlin before. I think it is the first time I attemp to use it with PowerMockito though. I was able to solve the problem using Java. I&#39;ll post my answer soon"}], "answers": [{"comments": [{"owner": {"reputation": 1156, "user_id": 1759779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa85139d36cc5f353a044e31f242a161?s=128&d=identicon&r=PG", "display_name": "Thomas Kabassis", "link": "https://stackoverflow.com/users/1759779/thomas-kabassis"}, "edited": false, "score": 0, "creation_date": 1571000612, "post_id": 49582400, "comment_id": 103085709, "body": "The verification might be incorrect, but it is not the root cause of the NullPointerException when Postman.login(...) is called during the test."}], "tags": [], "owner": {"reputation": 5230, "user_id": 305532, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/be1815a0a124a8a1935f67426690a3eb?s=128&d=identicon&r=PG", "display_name": "Thomas Keller", "link": "https://stackoverflow.com/users/305532/thomas-keller"}, "is_accepted": false, "score": 3, "last_activity_date": 1522450158, "creation_date": 1522450158, "answer_id": 49582400, "question_id": 41435079, "link": "https://stackoverflow.com/questions/41435079/mocked-object-still-calling-method-mockito-kotlin/49582400#49582400", "title": "Mocked object still calling method (Mockito + Kotlin)", "body": "<p>Because you tell it to call the method. This</p>\n\n<pre><code>verify(mockedPostman.login(username, password))\n</code></pre>\n\n<p>should be</p>\n\n<pre><code> verify(mockedPostman).login(username, password)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1156, "user_id": 1759779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa85139d36cc5f353a044e31f242a161?s=128&d=identicon&r=PG", "display_name": "Thomas Kabassis", "link": "https://stackoverflow.com/users/1759779/thomas-kabassis"}, "is_accepted": false, "score": 9, "last_activity_date": 1571002806, "last_edit_date": 1571002806, "creation_date": 1570969164, "answer_id": 58363491, "question_id": 41435079, "link": "https://stackoverflow.com/questions/41435079/mocked-object-still-calling-method-mockito-kotlin/58363491#58363491", "title": "Mocked object still calling method (Mockito + Kotlin)", "body": "<p>Apart from having the Postman class as open, you also need to have the login method as open in order to be able to mock it.</p>\n\n<p>So the Postman class needs to be:</p>\n\n<pre><code>open class Postman(val mMessenger: TylltEndPoint) {\n\n    open fun login(email: String, password: String) {\n\n        // ...\n\n    }\n\n}\n</code></pre>\n\n<p>This is such a common issue/complaint amongst users, that <a href=\"https://kotlinlang.org/docs/reference/compiler-plugins.html\" rel=\"noreferrer\">there is also an official all-open plugin</a> that does this everywhere for you (if you don't care to strictly adhere to the principle of prohibiting inheritance unless you design for it).</p>\n"}], "owner": {"reputation": 3471, "user_id": 2068693, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Cu4rC.jpg?s=128&g=1", "display_name": "E. Fernandes", "link": "https://stackoverflow.com/users/2068693/e-fernandes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1811, "favorite_count": 2, "answer_count": 2, "score": 6, "last_activity_date": 1571002806, "creation_date": 1483405249, "last_edit_date": 1515070220, "question_id": 41435079, "link": "https://stackoverflow.com/questions/41435079/mocked-object-still-calling-method-mockito-kotlin", "title": "Mocked object still calling method (Mockito + Kotlin)", "body": "<p>I'm trying to test this class:</p>\n\n<pre><code>class LoginPresenter(val mPostman: Postman) : ContractLoginPresenter, Validator.ValidationListener {\n\n    private var view: ContractLoginView? = null\n\n    override fun setView(_view: BaseView) {\n        view = _view as ContractLoginView\n    }\n\n    override fun getValidationListener(): Validator.ValidationListener {\n        return this\n    }\n\n    override fun onValidationSucceeded() {\n        view!!.getContext().showCircularProgressBar()\n        mPostman.login(view!!.getUsername(), view!!.getPassword())\n    }\n</code></pre>\n\n<p>For this purpose, I've created this test class:</p>\n\n<pre><code>@RunWith(PowerMockRunner::class)\n@PrepareForTest(App::class)\nclass TestLoginPresenter {\n\n    var mockedPostman = mock(Postman::class.java)\n    var mockedComponent = mock(MainComponent::class.java)\n    var mockedView = mock(ContractLoginView::class.java)\n    var mockedContext = mock(AppCompatActivity::class.java)\n\n    var loginPresenter: LoginPresenter? = null\n\n    @Before\n    fun setUp() {\n        PowerMockito.mockStatic(App::class.java)\n        `when`(App.component).thenReturn(mockedComponent)\n        loginPresenter = LoginPresenter(mockedPostman)\n        loginPresenter!!.setView(mockedView)\n        `when`(mockedView.getContext()).thenReturn(mockedContext)\n    }\n\n    @Test\n    fun testGetValidationListener() {\n        assertEquals(loginPresenter!!.getValidationListener(), loginPresenter)\n    }\n\n    @Test\n    fun testOnValidationSucceeded() {\n        val password = \"password\"\n        val username = \"username\"\n        `when`(mockedView.getPassword()).thenReturn(password)\n        `when`(mockedView.getUsername()).thenReturn(username)\n        //Mockito.doNothing().`when`(mockedPostman).login(anyString(), anyString())\n\n        loginPresenter!!.onValidationSucceeded()\n        verify(mockedPostman.login(username, password))\n    }\n</code></pre>\n\n<p>Which is failing with the following stacktrace:</p>\n\n<pre><code>java.lang.NullPointerException\n    at br.com.tyllt.controller.Postman.login(Postman.kt:26)\n    at br.com.tyllt.presenter.LoginPresenter.onValidationSucceeded(LoginPresenter.kt:43)\n    at br.com.tyllt.presenter.TestLoginPresenter.testOnValidationSucceeded(TestLoginPresenter.kt:63)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.junit.internal.runners.TestMethod.invoke(TestMethod.java:68)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:310)\n    at org.junit.internal.runners.MethodRoadie$2.run(MethodRoadie.java:89)\n    at org.junit.internal.runners.MethodRoadie.runBeforesThenTestThenAfters(MethodRoadie.java:97)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.executeTest(PowerMockJUnit44RunnerDelegateImpl.java:294)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.executeTestInSuper(PowerMockJUnit47RunnerDelegateImpl.java:127)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.executeTest(PowerMockJUnit47RunnerDelegateImpl.java:82)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runBeforesThenTestThenAfters(PowerMockJUnit44RunnerDelegateImpl.java:282)\n    at org.junit.internal.runners.MethodRoadie.runTest(MethodRoadie.java:87)\n    at org.junit.internal.runners.MethodRoadie.run(MethodRoadie.java:50)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.invokeTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:207)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.runMethods(PowerMockJUnit44RunnerDelegateImpl.java:146)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$1.run(PowerMockJUnit44RunnerDelegateImpl.java:120)\n    at org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:34)\n    at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:44)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.run(PowerMockJUnit44RunnerDelegateImpl.java:122)\n    at org.powermock.modules.junit4.common.internal.impl.JUnit4TestSuiteChunkerImpl.run(JUnit4TestSuiteChunkerImpl.java:106)\n    at org.powermock.modules.junit4.common.internal.impl.AbstractCommonPowerMockRunner.run(AbstractCommonPowerMockRunner.java:53)\n    at org.powermock.modules.junit4.PowerMockRunner.run(PowerMockRunner.java:59)\n    at org.junit.runner.JUnitCore.run(JUnitCore.java:137)\n    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:119)\n    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:42)\n    at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:234)\n    at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:74)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:144)\n\n\nProcess finished with exit code -1\n</code></pre>\n\n<p>The place that the stacktrace point is the last line of postman's login fun:</p>\n\n<pre><code>open class Postman(val mMessenger: TylltEndPoint) {\n\n    fun login(email: String, password: String) {\n        val user = User()\n        user.email = email\n        user.password = password\n\n        mMessenger.login(user).enqueue(ResponseWrapperCallback(EventCatalog.e0014))\n    }\n</code></pre>\n\n<p>Once postman is being mocked, why in the world is it calling the actual implementation of <code>login()</code> fun?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 4, "creation_date": 1483429731, "post_id": 41434970, "comment_id": 70083530, "body": "Are you interested in interfaces or in annotations? You words say one, your code says another.."}], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": false, "score": 4, "last_activity_date": 1483452812, "creation_date": 1483452812, "answer_id": 41445463, "question_id": 41434970, "link": "https://stackoverflow.com/questions/41434970/nested-interface-in-kotlin/41445463#41445463", "title": "Nested interface in Kotlin", "body": "<p>There is no support for nested annotation classes in Kotlin 1.0, and no plans to add that support in version 1.1. It's possible that the feature will be supported in later versions. In the mean time, you can declare your nested annotation classes in Java.</p>\n"}, {"tags": [], "owner": {"reputation": 593, "user_id": 8124931, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-uwvUJ6lvDsI/AAAAAAAAAAI/AAAAAAAAFDg/mzjiFBqAXqM/photo.jpg?sz=128", "display_name": "Noah", "link": "https://stackoverflow.com/users/8124931/noah"}, "is_accepted": false, "score": 0, "last_activity_date": 1608364172, "creation_date": 1608364172, "answer_id": 65367755, "question_id": 41434970, "link": "https://stackoverflow.com/questions/41434970/nested-interface-in-kotlin/65367755#65367755", "title": "Nested interface in Kotlin", "body": "<p>From <a href=\"https://kotlinlang.org/docs/reference/nested-classes.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/nested-classes.html</a></p>\n<pre><code>interface OuterInterface {\n    class InnerClass\n    interface InnerInterface\n}\n\nclass OuterClass {\n    class InnerClass\n    interface InnerInterface\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 7367272, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BtLKB6BxOfU/AAAAAAAAAAI/AAAAAAAAH-Q/oFI6643kuKQ/photo.jpg?sz=128", "display_name": "Oliver Wahlen", "link": "https://stackoverflow.com/users/7367272/oliver-wahlen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 884, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1608364172, "creation_date": 1483404006, "last_edit_date": 1495540897, "question_id": 41434970, "link": "https://stackoverflow.com/questions/41434970/nested-interface-in-kotlin", "title": "Nested interface in Kotlin", "body": "<p>In Java it is possible to declare interfaces inside of interfaces:</p>\n\n<pre><code>....\npublic @interface NotEmpty {\n    ....\n    public @interface List {\n        NotEmpty[] value();\n    }\n}\n</code></pre>\n\n<p>The example is taken from hibernate's <a href=\"https://github.com/hibernate/hibernate-validator/blob/master/engine/src/main/java/org/hibernate/validator/constraints/NotEmpty.java\" rel=\"nofollow noreferrer\">NotEmpty</a> validator.\nPlease see the following <a href=\"https://stackoverflow.com/questions/24897735/what-does-this-nested-annotation-do-allow\">discussion</a> for what this is good for.</p>\n\n<p>Unfortunately in Kotlin an <code>annotation class</code> must not have a body.\nHow can nested interfaces be achieved in Kotlin?</p>\n"}, {"tags": ["java", "android", "compatibility", "kotlin", "aar"], "comments": [{"owner": {"reputation": 67242, "user_id": 1189885, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/DLHqU.png?s=128&g=1", "display_name": "chrylis -cautiouslyoptimistic-", "link": "https://stackoverflow.com/users/1189885/chrylis-cautiouslyoptimistic"}, "edited": false, "score": 0, "creation_date": 1483393370, "post_id": 41433598, "comment_id": 70073128, "body": "Do you have a dependency on the Kotlin library in your Java project (don&#39;t remember the artifact name, since they keep changing it, but maybe core)?"}], "answers": [{"tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": true, "score": 16, "last_activity_date": 1483440358, "last_edit_date": 1483440358, "creation_date": 1483430148, "answer_id": 41438811, "question_id": 41433598, "link": "https://stackoverflow.com/questions/41433598/using-a-kotlin-library-in-java-code/41438811#41438811", "title": "Using a kotlin library in java code", "body": "<p>Class <code>kotlin.Pair</code> belongs to the standard library <code>org.jetbrains.kotlin:kotlin-stdlib:1.0.0</code>, so you must have this library as a dependancy.</p>\n\n<p>It is NOT recommended to use <code>Pair</code> in public APIs. Rather than that, create your own <code>data class</code> with 2 properties and give them a clearer naming than <code>first</code> and <code>second</code>.</p>\n\n<p>The purpose of <code>Pair</code> is to server as a temporary data carrier in any intermediate operation. If you use it in your API, you lose in clarity.</p>\n"}], "owner": {"reputation": 880, "user_id": 2123156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/aWXW6.jpg?s=128&g=1", "display_name": "java acm", "link": "https://stackoverflow.com/users/2123156/java-acm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6707, "favorite_count": 2, "accepted_answer_id": 41438811, "answer_count": 1, "score": 10, "last_activity_date": 1483440358, "creation_date": 1483393040, "last_edit_date": 1483394061, "question_id": 41433598, "link": "https://stackoverflow.com/questions/41433598/using-a-kotlin-library-in-java-code", "title": "Using a kotlin library in java code", "body": "<p>I have a kotlin library <a href=\"https://github.com/ch4vi/FlowLayout\" rel=\"noreferrer\">FlowLayout lib as aar</a>,</p>\n\n<p>and want to use it in my java code (android) but can not to resolve <code>kotlin.Pair</code>.</p>\n\n<pre><code>FlowLayoutManager layoutManager=new FlowLayoutManager(3, RecyclerView.HORIZONTAL, new FlowLayoutManager.Interface() {\n    @Override\n     public kotlin.Pair&lt;Integer, Integer&gt; getProportionalSizeForChild(int i) {\n         return null;\n     }\n});\n</code></pre>\n\n<p>I have tried <code>android.support.v4.util.Pair</code> but is not compatible. How can I use a kotlin lib in java code with their object dependencies?</p>\n"}, {"tags": ["javafx", "kotlin", "tornadofx"], "comments": [{"owner": {"reputation": 489, "user_id": 4931921, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/411b7c677497b76a294a479092ec8dff?s=128&d=identicon&r=PG&f=1", "display_name": "stacktrace", "link": "https://stackoverflow.com/users/4931921/stacktrace"}, "edited": false, "score": 0, "creation_date": 1483399423, "post_id": 41432396, "comment_id": 70074851, "body": "re: #1 - what makes think it doesn&#39;t bind to the model - it works for me?  Are you hitting enter on the table cell (just losing focus doesn&#39;t force a commit)?"}, {"owner": {"reputation": 319, "user_id": 2147234, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eda37aa3cd03335e2c0dccc6890e32e1?s=128&d=identicon&r=PG", "display_name": "mercy123", "link": "https://stackoverflow.com/users/2147234/mercy123"}, "reply_to_user": {"reputation": 489, "user_id": 4931921, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/411b7c677497b76a294a479092ec8dff?s=128&d=identicon&r=PG&f=1", "display_name": "stacktrace", "link": "https://stackoverflow.com/users/4931921/stacktrace"}, "edited": false, "score": 0, "creation_date": 1483426127, "post_id": 41432396, "comment_id": 70081857, "body": "Oh.. my bad... I was not pressing enter, I was clicking outside thinking it would bind automatically (coming from a angular world) .. But yeah the functionality makes sense."}], "answers": [{"comments": [{"owner": {"reputation": 319, "user_id": 2147234, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eda37aa3cd03335e2c0dccc6890e32e1?s=128&d=identicon&r=PG", "display_name": "mercy123", "link": "https://stackoverflow.com/users/2147234/mercy123"}, "edited": false, "score": 0, "creation_date": 1483426744, "post_id": 41433810, "comment_id": 70082167, "body": "Thanks :)  ... now everything is working as expected."}], "tags": [], "owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "is_accepted": true, "score": 4, "last_activity_date": 1483394620, "creation_date": 1483394620, "answer_id": 41433810, "question_id": 41432396, "link": "https://stackoverflow.com/questions/41432396/tornadofx-tableview-using-combobox-adding-fxevent-on-buttons/41433810#41433810", "title": "Tornadofx tableview using comboBox &amp; adding FXEvent on buttons", "body": "<p>To access the EventBus from outside of a <code>Component</code>, use the <code>FX.eventbus</code> variable, and fire the event on that:</p>\n\n<pre><code>FX.eventbus.fire(DeleteEvent(index))\n</code></pre>\n\n<p>The reason you get the error when you change the value in the combobox is a bug in the framework. I have just committed a fix for it, but you can work around it by adding this extension function to your app until the 1.5.10 release:</p>\n\n<pre><code>fun &lt;S, T&gt; TableColumn&lt;S, T?&gt;.useComboBoxWorking(items: ObservableList&lt;T&gt;, afterCommit: ((TableColumn.CellEditEvent&lt;S, T?&gt;) -&gt; Unit)? = null): TableColumn&lt;S, T?&gt; {\n    cellFactory = ComboBoxTableCell.forTableColumn(items)\n    setOnEditCommit {\n        val property = it.tableColumn.getCellObservableValue(it.rowValue) as Property&lt;T?&gt;\n        property.value = it.newValue\n        afterCommit?.invoke(it)\n    }\n    return this\n}\n</code></pre>\n\n<p>Just call <code>.useComboBoxWorking()</code> instead for now, and you should be golden :)</p>\n\n<p>If you don't want to use the workaround you can temporarily change the <code>genderProperty</code> of your <code>Warrior</code> to be of type <code>SimpleObjectProperty&lt;String&gt;</code> instead of <code>SimpleStringProperty</code> as an alternative.</p>\n"}], "owner": {"reputation": 319, "user_id": 2147234, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eda37aa3cd03335e2c0dccc6890e32e1?s=128&d=identicon&r=PG", "display_name": "mercy123", "link": "https://stackoverflow.com/users/2147234/mercy123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 916, "favorite_count": 0, "accepted_answer_id": 41433810, "answer_count": 1, "score": 1, "last_activity_date": 1483394620, "creation_date": 1483385682, "question_id": 41432396, "link": "https://stackoverflow.com/questions/41432396/tornadofx-tableview-using-combobox-adding-fxevent-on-buttons", "title": "Tornadofx tableview using comboBox &amp; adding FXEvent on buttons", "body": "<p>I need help on the following basic issues :</p>\n\n<p>Requirement:<br>\nI have a tableview which can be edited (inline) and rows can be deleted too and also if required some complex operations on click of a button.  </p>\n\n<p>My Take, below are the 3 small issues:   </p>\n\n<ol>\n<li>I created a tableview with isEditable = true and made column name as editable. But when I edit, it doesnt bind to the model. (Must be missing a very simple thing)  </li>\n<li>When editing, the comboBox shows the options but onselecting a value, throws an exception.   </li>\n</ol>\n\n<blockquote>\n  <p>java.lang.ClassCastException:\n  javafx.beans.property.SimpleStringProperty cannot be cast to\n  javafx.beans.property.ObjectProperty</p>\n</blockquote>\n\n<p>Then, I have added a delete button which works fine when I uncomment tableView.items.removeAt(index)<br>\nBut since I want some additional functionalities, I decided to go with the FXEvent fire. But how should I use that here.</p>\n\n<pre><code>class MyView : View() {\n    val warriorModel : WarriorModel by inject()\n    val persons = FXCollections.observableArrayList&lt;Warrior&gt;(\n            Warrior(1,\"Tyrion Lannister\", \"M\"),\n            Warrior(2,\"Ned Stark\", \"M\"),\n            Warrior(3,\"Daenerys Targaryen\", \"F\"),\n            Warrior(4,\"Arya Stark\", \"F\")\n    )\n    override val root = vbox {\n        tableview(persons) {\n            isEditable = true\n            column(\"ID\", Warrior::idProperty)\n            column(\"Name\", Warrior::nameProperty).makeEditable()\n            column(\"Gender\", Warrior::genderProperty).useComboBox(FXCollections.observableArrayList(\"M\", \"F\"))\n            column(\"Action\", Warrior::dummyProperty).setCellFactory { DeleteButton&lt;Warrior&gt;() }\n            bindSelected(warriorModel)\n            subscribe&lt;DeleteEvent&gt; { event -&gt;\n                items.removeAt(event.index)\n            }\n        }\n    }\n}\nclass DeleteButton&lt;Warrior&gt;() : TableCell&lt;Warrior, String?&gt;() {\n    internal val btn = Button(\"Delete\")\n    override fun updateItem(item: String?, empty: Boolean) {\n        super.updateItem(item, empty)\n        if (empty) {\n            graphic = null\n            text = null\n        } else {\n            btn.setOnAction { event: ActionEvent -&gt;\n                //tableView.items.removeAt(index)\n                fire(DeleteEvent(index))\n            }\n            graphic = btn\n            text = null\n        }\n    }\n}\nclass Warrior(id: Int, name: String, gender: String) {\n\n    val idProperty = SimpleIntegerProperty(id)\n    var id by idProperty\n\n    val nameProperty = SimpleStringProperty(name)\n    var name by nameProperty\n\n    val genderProperty = SimpleStringProperty(gender)\n    var gender by genderProperty\n\n    val dummyProperty = SimpleStringProperty(\"\")\n}\nclass WarriorModel : ItemViewModel&lt;Warrior&gt;() {\n    val id = bind { item?.idProperty }\n    val name = bind { item?.nameProperty }\n    val gender = bind { item?.genderProperty }\n}\nclass DeleteEvent(val index: Int) : FXEvent()\n</code></pre>\n"}, {"tags": ["javascript", "fetch", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 6361809, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/114e5bdbbabb980e69c4f80a3081209c?s=128&d=identicon&r=PG&f=1", "display_name": "Yuri Stiopin", "link": "https://stackoverflow.com/users/6361809/yuri-stiopin"}, "edited": false, "score": 0, "creation_date": 1483459565, "post_id": 41426019, "comment_id": 70101438, "body": "Yep, I missed &quot;run&quot; before lambda, so one of solutions is run {console.log(&quot;response&quot;)}"}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": true, "score": 4, "last_activity_date": 1483356650, "creation_date": 1483356650, "answer_id": 41426019, "question_id": 41415940, "link": "https://stackoverflow.com/questions/41415940/how-do-you-implement-the-fetch-api/41426019#41426019", "title": "How do you implement the fetch api?", "body": "<p>My guess is that the problem was inside your first lambda: </p>\n\n<pre><code>.then({response -&gt; {\n    console.log(\"response\")\n}})\n</code></pre>\n\n<p>This code doesn't do anything, because it is equivalent to:</p>\n\n<pre><code>.then(fun(response: dynamic){\n    return {console.log(\"response\")}  // creates a lambda and returns it for no reason\n })\n</code></pre>\n\n<p><strong>TL;DR</strong> To fix the code remove the second pair of braces:</p>\n\n<pre><code>.then {response -&gt; console.log(\"response\")}\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 6361809, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/114e5bdbbabb980e69c4f80a3081209c?s=128&d=identicon&r=PG&f=1", "display_name": "Yuri Stiopin", "link": "https://stackoverflow.com/users/6361809/yuri-stiopin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 524, "favorite_count": 0, "accepted_answer_id": 41426019, "answer_count": 1, "score": 2, "last_activity_date": 1483356650, "creation_date": 1483278464, "last_edit_date": 1483286946, "question_id": 41415940, "link": "https://stackoverflow.com/questions/41415940/how-do-you-implement-the-fetch-api", "title": "How do you implement the fetch api?", "body": "<p>I don't understand, how to implement fetch api in kotlin\nmy code: </p>\n\n<pre><code>var smf: dynamic = js(\"({})\")\nsmf.method = \"GET\"\nsmf.mode   = \"cors\"\nsmf.cache  = \"default\"\n\nwindow.fetch(url, smf)\n        .then({response -&gt; {\n            console.log(\"response\")\n        }})\n        .catch({error -&gt;\n            console.error(\"error\")\n        })\n</code></pre>\n\n<p>And it doesn't work at all. No console messages and any</p>\n"}, {"tags": ["teamcity", "kotlin", "teamcity-10"], "answers": [{"tags": [], "owner": {"reputation": 2053, "user_id": 2815144, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/ZgHKI.jpg?s=128&g=1", "display_name": "Patrik Mihal\u010din", "link": "https://stackoverflow.com/users/2815144/patrik-mihal%c4%8din"}, "is_accepted": false, "score": 6, "last_activity_date": 1483185369, "creation_date": 1483185369, "answer_id": 41408086, "question_id": 41399911, "link": "https://stackoverflow.com/questions/41399911/trigger-using-teamcity-kotlin-dsl/41408086#41408086", "title": "Trigger using Teamcity Kotlin DSL", "body": "<p>I found the way to do it using <strong>vcs</strong> directive.</p>\n\n<p>Note, you have to import trigger class</p>\n\n<pre><code>buildType {\n    triggers {\n        vcs {\n\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 2053, "user_id": 2815144, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/ZgHKI.jpg?s=128&g=1", "display_name": "Patrik Mihal\u010din", "link": "https://stackoverflow.com/users/2815144/patrik-mihal%c4%8din"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 798, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1483185369, "creation_date": 1483117574, "question_id": 41399911, "link": "https://stackoverflow.com/questions/41399911/trigger-using-teamcity-kotlin-dsl", "title": "Trigger using Teamcity Kotlin DSL", "body": "<p>I have Teamcity job defined in Kotlin and I want to add a trigger.</p>\n\n<p>I used:</p>\n\n<pre><code>buildType {\n    triggers {\n        trigger {\n            type = \"VCS Trigger\"\n            enabled = true\n        }\n    }\n}\n</code></pre>\n\n<p>But this results to \n<a href=\"https://i.stack.imgur.com/MbLXH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MbLXH.png\" alt=\"unknown build trigger\"></a></p>\n\n<p>What definition should I use to have proper VCS trigger in place</p>\n"}, {"tags": ["android", "realm", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 5, "last_activity_date": 1483093068, "creation_date": 1483093068, "answer_id": 41394471, "question_id": 41394452, "link": "https://stackoverflow.com/questions/41394452/kotlin-extension-function-unresolved-reference/41394471#41394471", "title": "Kotlin extension function: unresolved reference", "body": "<p><code>myClass</code> is already a <code>KClass&lt;T&gt;</code> you can use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/java.html\" rel=\"nofollow noreferrer\"><code>myClass.java</code></a> member function like so:</p>\n\n<pre><code>fun &lt;T : RealmObject&gt; Realm.query(myClass : KClass&lt;T&gt;) =    \n    RealmQuery.createQuery(this, myClass.java)\n</code></pre>\n\n<p>To simplify the usage you can actually make use of <code>inline</code> like so </p>\n\n<pre><code>inline fun &lt;reified T : RealmObject&gt; Realm.query() =    \n    RealmQuery.createQuery(this, T::class.java)\n</code></pre>\n\n<p>And then use it as <code>val userQuery = Realm.query&lt;User&gt;()</code></p>\n"}], "owner": {"reputation": 610, "user_id": 4623824, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d00831d1fe891782e870c7c8cc3967ef?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Manuel Pineda Murcia", "link": "https://stackoverflow.com/users/4623824/victor-manuel-pineda-murcia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 969, "favorite_count": 0, "accepted_answer_id": 41394471, "answer_count": 1, "score": 2, "last_activity_date": 1483093068, "creation_date": 1483092981, "question_id": 41394452, "link": "https://stackoverflow.com/questions/41394452/kotlin-extension-function-unresolved-reference", "title": "Kotlin extension function: unresolved reference", "body": "<p>I'm trying to create this extension function:</p>\n\n<pre><code>fun &lt;T : RealmObject&gt; Realm.query(myClass : KClass&lt;T&gt;) {    \n    RealmQuery.createQuery(this, myClass::class.java)\n}\n</code></pre>\n\n<p>This doesn't compile. Compiler says: \"Unresolved reference: myClass\" when I write</p>\n\n<pre><code>myClass::class.java\n</code></pre>\n\n<p>But if I do this:</p>\n\n<pre><code>fun &lt;T : RealmObject&gt; Realm.query(myClass : Class&lt;T&gt;) {\n     RealmQuery.createQuery(this, myClass)\n}\n</code></pre>\n\n<p>It works perfectly! I don't understand why.</p>\n"}, {"tags": ["javafx", "spreadsheet", "kotlin", "controlsfx"], "answers": [{"tags": [], "owner": {"reputation": 1552, "user_id": 3623540, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ab14203794d1d587343ece3f6b8a9c51?s=128&d=identicon&r=PG&f=1", "display_name": "Maxoudela", "link": "https://stackoverflow.com/users/3623540/maxoudela"}, "is_accepted": true, "score": 1, "last_activity_date": 1484671131, "creation_date": 1484671131, "answer_id": 41702408, "question_id": 41392536, "link": "https://stackoverflow.com/questions/41392536/controlsfx-spreadsheetview-rowspan-indexoutofboundsexception/41702408#41702408", "title": "ControlsFX SpreadsheetView rowspan IndexOutOfBoundsException", "body": "<p>Let me apologize because it is not well documented how span must be made in the SpreadsheetView. I will update the documentation.</p>\n\n<p>If you want to span, you have to put the same cell in every cell inside the span. \nSo either you build your own cell, and then in every place. In your case, you would add the same cell in row 0 column 1 and in row 1 column 1.\nOr you could keep your code, and simply call the method <a href=\"http://controlsfx.bitbucket.org/org/controlsfx/control/spreadsheet/Grid.html#spanRow-int-int-int-\" rel=\"nofollow noreferrer\">spanRow</a> on the Grid. This method will automatically take your cell and place it accordingly. </p>\n\n<p>Regarding the second issue, please submit it to our issue tracker so we can fix it : <a href=\"https://bitbucket.org/controlsfx/controlsfx/issues?status=new&amp;status=open\" rel=\"nofollow noreferrer\">https://bitbucket.org/controlsfx/controlsfx/issues?status=new&amp;status=open</a></p>\n\n<p>If you have other issue regarding the SpreadsheetView, consider posting in our Google group where we will get notifications : <a href=\"http://groups.controlsfx.org\" rel=\"nofollow noreferrer\">http://groups.controlsfx.org</a></p>\n"}], "owner": {"reputation": 319, "user_id": 2147234, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eda37aa3cd03335e2c0dccc6890e32e1?s=128&d=identicon&r=PG", "display_name": "mercy123", "link": "https://stackoverflow.com/users/2147234/mercy123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 728, "favorite_count": 0, "accepted_answer_id": 41702408, "answer_count": 1, "score": 0, "last_activity_date": 1484671131, "creation_date": 1483083626, "last_edit_date": 1483140331, "question_id": 41392536, "link": "https://stackoverflow.com/questions/41392536/controlsfx-spreadsheetview-rowspan-indexoutofboundsexception", "title": "ControlsFX SpreadsheetView rowspan IndexOutOfBoundsException", "body": "<p>I am new to JavaFX and <a href=\"http://fxexperience.com/controlsfx/\" rel=\"nofollow noreferrer\">ControlsFX</a>.  </p>\n\n<p>I am trying to create a very basic SpreadsheetView using the ControlsFX library. Following is the function to populate and create the SpreadsheetView:</p>\n\n<pre><code>private fun spreadSheetFunc() : SpreadsheetView {\n\n    val rowCount = 15\n    val columnCount = 10\n    val grid = GridBase(rowCount, columnCount)\n\n    val rows = FXCollections.observableArrayList&lt;ObservableList&lt;SpreadsheetCell&gt;&gt;()\n    var list = FXCollections.observableArrayList&lt;SpreadsheetCell&gt;()\n    list.add(SpreadsheetCellType.STRING.createCell(0, 0, 1, 1, \"row0-col0\"))\n    list.add(SpreadsheetCellType.STRING.createCell(0, 1, 2, 1, \"row0-col1\"))\n    list.add(SpreadsheetCellType.STRING.createCell(0, 2, 1, 1, \"row0-col2\"))\n    rows.add(list)\n    list = FXCollections.observableArrayList()\n    list.add(SpreadsheetCellType.STRING.createCell(1, 0, 1, 1, \"row1-col0\"))\n    //commenting row1-col1 as row0-col1 has a rowspan of 2\n    //list.add(SpreadsheetCellType.STRING.createCell(1, 1, 1, 1, \"row1-col1\"))\n    list.add(SpreadsheetCellType.STRING.createCell(1, 2, 1, 1, \"row1-col2\"))\n    rows.add(list)\n    list = FXCollections.observableArrayList()\n    list.add(SpreadsheetCellType.STRING.createCell(2, 0, 1, 1, \"row2-col0\"))\n    list.add(SpreadsheetCellType.STRING.createCell(2, 1, 1, 1, \"row2-col1\"))\n    list.add(SpreadsheetCellType.STRING.createCell(2, 2, 1, 1, \"row2-col2\"))\n    rows.add(list)\n    list = FXCollections.observableArrayList()\n    list.add(SpreadsheetCellType.STRING.createCell(3, 0, 1, 1, \"row3-col0\"))\n    list.add(SpreadsheetCellType.STRING.createCell(3, 1, 1, 1, \"row3-col1\"))\n    list.add(SpreadsheetCellType.STRING.createCell(3, 2, 1, 1, \"row3-col2\"))\n\n    rows.add(list)\n    grid.setRows(rows)\n\n    return SpreadsheetView(grid)\n}\n</code></pre>\n\n<p>On running it, I get the following error:  </p>\n\n<blockquote>\n  <p>java.lang.IndexOutOfBoundsException: Index: 2, Size: 2 at\n  java.util.ArrayList.rangeCheck(ArrayList.java:653)</p>\n</blockquote>\n\n<p>I know its happening because I am not adding any value for rowIndex=1 colIndex=1 (see the commented out line) ... but that is what I want. </p>\n\n<p>The <code>row0-col1 has a rowspan of 2</code> which should mean that even if my row1-col1 is absent, there shouldn't be any problem.  </p>\n\n<p>Why doesn't ControlsFX automatically take care of this?  </p>\n\n<p>If I uncomment that line, I get the following output:  </p>\n\n<p><a href=\"https://i.stack.imgur.com/xB9dV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xB9dV.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Edit 1:</strong></p>\n\n<p>Also, I found another issue, when a colspan/rowspan occupies the whole column/row in the SpreadsheetView and then when one presses arrow key to navigate to cells you get an error:  </p>\n\n<p><a href=\"https://i.stack.imgur.com/EPNBm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EPNBm.png\" alt=\"enter image description here\"></a></p>\n\n<p>The above situation arises when you press the right arrow key (Even though their isn't a cell on the right) </p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1483087839, "post_id": 41385679, "comment_id": 69988413, "body": "This should work out-of-the-box, without you declaring <code>in</code> or <code>out</code> , and without casting. Otherwise you are doing something wrong and it can fail at runtime."}, {"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 0, "creation_date": 1483193433, "post_id": 41385679, "comment_id": 70020868, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/35973872/putting-a-generic-lambda-into-a-map\">Putting a generic lambda into a map</a>"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 506179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6311ff8855ce6de2ce19f3d6c7d3e6d0?s=128&d=identicon&r=PG", "display_name": "Daniel Webster", "link": "https://stackoverflow.com/users/506179/daniel-webster"}, "is_accepted": false, "score": 1, "last_activity_date": 1483039732, "creation_date": 1483039732, "answer_id": 41386049, "question_id": 41385679, "link": "https://stackoverflow.com/questions/41385679/declaring-function-literals-with-generic-input-parameters-in-kotlin/41386049#41386049", "title": "Declaring Function Literals with generic input parameters in Kotlin", "body": "<p>Ok, I didn't think of this before, but it looks like you can just cast the Function to the type of the literal.</p>\n\n<p>In other words, you can do this </p>\n\n<pre><code>var f: (Number) -&gt; Unit = { number: Number -&gt; println(number) }\nf = {int: Int -&gt; println(number) } as (Number) -&gt; Unit\n</code></pre>\n\n<p>For my actual usecase, I would make the <code>registerHandler</code> function look like this:</p>\n\n<pre><code>fun &lt;E: Event&gt; registerHandler(eventClass: KClass&lt;out E&gt;, handler: (E) -&gt; Unit) {\n    handlerMap[eventClass] = handler as (Event) -&gt; Unit\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 506179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6311ff8855ce6de2ce19f3d6c7d3e6d0?s=128&d=identicon&r=PG", "display_name": "Daniel Webster", "link": "https://stackoverflow.com/users/506179/daniel-webster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 329, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1483039732, "creation_date": 1483037882, "question_id": 41385679, "link": "https://stackoverflow.com/questions/41385679/declaring-function-literals-with-generic-input-parameters-in-kotlin", "title": "Declaring Function Literals with generic input parameters in Kotlin", "body": "<p>I don't know how to specify a function literal where the input parameter can covary so that the function literal can have assigned to it functions that accept subtypes of the input type. </p>\n\n<p>The simplest example I can come up with is that i want to do something like this:</p>\n\n<pre><code>var f: (Number) -&gt; Unit = { number: Number -&gt; println(number) }\nf = {int: Int -&gt; println(number) } // &lt;-- this does not compile\n</code></pre>\n\n<p>These declarations do not work:</p>\n\n<pre><code>var f: (in Number) -&gt; Unit = {number: Number -&gt;} // doesn't compile\nvar f: (out Number) -&gt; Unit = {number: Number -&gt;} // doesn't compile\nvar f: &lt;N: Number&gt; (N) -&gt; Unit = {number: Number -&gt;} // ridiculous\n</code></pre>\n\n<p>Here is the context of what I ACTUALLY want to do. I want to create a simple event handler class.</p>\n\n<p>This is my Kotlin code:</p>\n\n<pre><code>class EventHandler() {\n  private val NO_OP = {event: Event -&gt; }\n  private val handlerMap = \n      mutableMapOf&lt;KClass&lt;out Event&gt;, (Event) -&gt; Unit&gt;() // here is the problem declaration\n\n  fun &lt;E: Event&gt; registerHandler(\n    eventClass: KClass&lt;out E&gt;, \n    handler: (E) -&gt; Unit) {\n\n    handlerMap[eventClass] = handler // this doesn't compile\n  }\n\n  fun handle(event: Event) = getHandler(event).invoke(event)\n\n  fun getHandler(event: Event): (Event) -&gt; Unit = \n     handlerMap[event::class] ?: NO_OP\n}\n</code></pre>\n\n<p>The <code>handlerMap[eventClass] = handler</code> doesn't compile, because the <code>handlerMap</code> accepts as values <code>(Event) -&gt; Unit</code>, and the type of the <code>handler</code> is <code>(E) -&gt; Unit</code> where <code>E</code> is a type parameter that extends Event (<code>&lt;E: Event&gt;</code>).</p>\n\n<p>The Error message is:</p>\n\n<pre><code>Events.kt:[18,9] Type inference failed: Cannot infer type parameter V in operator inline fun &lt;K, V&gt; MutableMap&lt;K, V&gt;.set(key: K, value: V): Unit\n\nNone of the following substitutions\n    receiver: MutableMap&lt;KClass&lt;out Event&gt;, (Event) -&gt; Unit&gt;  arguments: (KClass&lt;out Event&gt;,(Event) -&gt; Unit)\n    receiver: MutableMap&lt;KClass&lt;out Event&gt;, (E) -&gt; Unit&gt;  arguments: (KClass&lt;out Event&gt;,(E) -&gt; Unit)\ncan be applied to\n    receiver: MutableMap&lt;KClass&lt;out Event&gt;, (Event) -&gt; Unit&gt;  arguments: (KClass&lt;out E&gt;,(E) -&gt; Unit)\n</code></pre>\n\n<p>I am using kotlin-maven-plugin:1.1-M03.</p>\n"}, {"tags": ["kotlin", "variable-assignment", "shortcut", "kotlin-null-safety"], "comments": [{"owner": {"reputation": 6473, "user_id": 2660462, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e7866e763430b8848f14ffdacb61b99f?s=128&d=identicon&r=PG", "display_name": "Lukas Lechner", "link": "https://stackoverflow.com/users/2660462/lukas-lechner"}, "edited": false, "score": 2, "creation_date": 1483018269, "post_id": 41379897, "comment_id": 69963270, "body": "<code>variable?.let { it = something }</code> does not work. It assigns <code>something</code> to <code>variable</code> only if <code>variable</code> is <i>not</i> null."}, {"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "edited": false, "score": 0, "creation_date": 1483021387, "post_id": 41379897, "comment_id": 69964981, "body": "Idk your use case, but lazy delegate can be useful in similar cases <a href=\"https://kotlinlang.org/docs/reference/delegated-properties.html#lazy\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/delegated-properties.html#lazy</a>"}, {"owner": {"reputation": 3678, "user_id": 3990222, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/xVAWT.jpg?s=128&g=1", "display_name": "Edson Menegatti", "link": "https://stackoverflow.com/users/3990222/edson-menegatti"}, "edited": false, "score": 0, "creation_date": 1483024389, "post_id": 41379897, "comment_id": 69966628, "body": "Not advisable, but here&#39;s a one liner for that <code>swipeView = swipeView ?: view.find&lt;MeasureTypePieChart&gt;(R.id.swipeableView).apply { swipeView = this }</code>"}], "answers": [{"tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": true, "score": 5, "last_activity_date": 1483022504, "creation_date": 1483022504, "answer_id": 41381865, "question_id": 41379897, "link": "https://stackoverflow.com/questions/41379897/kotlin-nullable-variable-assignment/41381865#41381865", "title": "Kotlin nullable variable assignment", "body": "<p>Shorter syntax would be to avoid <code>swipeView</code> from ever being <code>null</code>.</p>\n\n<h2>Local variable</h2>\n\n<p>If <code>swipeView</code> is a local variable then you can declare it non-null when initially assigning it:</p>\n\n<pre><code>val swipeView = ... ?: view.find&lt;MeasureTypePieChart&gt;(R.id.swipeableView)\n</code></pre>\n\n<h2>Function argument</h2>\n\n<p>If <code>swipeView</code> is a function argument then you can use a <a href=\"https://kotlinlang.org/docs/reference/functions.html#default-arguments\" rel=\"nofollow noreferrer\">default argument</a> to ensure it is never <code>null</code>:</p>\n\n<pre><code>fun something(swipeView: View = view.find&lt;MeasureTypePieChart&gt;(R.id.swipeableView))\n</code></pre>\n\n<h2>Class property</h2>\n\n<h3>Read-only</h3>\n\n<p>If <code>swipeView</code> is a read-only class property (i.e. <code>val</code>) then you can use Kotlin's built-in <a href=\"https://kotlinlang.org/docs/reference/delegated-properties.html#lazy\" rel=\"nofollow noreferrer\"><code>Lazy</code></a>:</p>\n\n<pre><code>val swipeView by lazy { view.find&lt;MeasureTypePieChart&gt;(R.id.swipeableView) }\n</code></pre>\n\n<h3>Mutable</h3>\n\n<p>If <code>swipeView</code> is a mutable class property (i.e. <code>var</code>) then you can define your own delegate similar to <code>Lazy</code> but mutable. e.g. The following is based on <a href=\"https://github.com/JetBrains/kotlin/blob/07de81937720f1327499fdfdd480bec23bd828a6/libraries/stdlib/src/kotlin/util/Lazy.kt\" rel=\"nofollow noreferrer\">kotlin/Lazy.kt</a>:</p>\n\n<pre><code>interface MutableLazy&lt;T&gt; : Lazy&lt;T&gt; {\n    override var value: T\n}\n\nfun &lt;T&gt; mutableLazy(initializer: () -&gt; T): MutableLazy&lt;T&gt; = SynchronizedMutableLazyImpl(initializer)\n\nfun &lt;T&gt; mutableLazy(lock: Any?, initializer: () -&gt; T): MutableLazy&lt;T&gt; = SynchronizedMutableLazyImpl(initializer, lock)\n\noperator fun &lt;T&gt; MutableLazy&lt;T&gt;.getValue(thisRef: Any?, property: KProperty&lt;*&gt;): T = value\noperator fun &lt;T&gt; MutableLazy&lt;T&gt;.setValue(thisRef: Any?, property: KProperty&lt;*&gt;, value: T) {\n    this.value = value\n}\n\nprivate object UNINITIALIZED_VALUE\n\nprivate class SynchronizedMutableLazyImpl&lt;T&gt;(initializer: () -&gt; T, lock: Any? = null) : MutableLazy&lt;T&gt;, Serializable {\n    private var initializer: (() -&gt; T)? = initializer\n    @Volatile private var _value: Any? = UNINITIALIZED_VALUE\n    // final field is required to enable safe publication of constructed instance\n    private val lock = lock ?: this\n\n    override var value: T\n        get() {\n            val _v1 = _value\n            if (_v1 !== UNINITIALIZED_VALUE) {\n                @Suppress(\"UNCHECKED_CAST\")\n                return _v1 as T\n            }\n\n            return synchronized(lock) {\n                val _v2 = _value\n                if (_v2 !== UNINITIALIZED_VALUE) {\n                    @Suppress(\"UNCHECKED_CAST\") (_v2 as T)\n                } else {\n                    val typedValue = initializer!!()\n                    _value = typedValue\n                    initializer = null\n                    typedValue\n                }\n            }\n        }\n        set(value) {\n            val _v1 = _value\n            if (_v1 !== UNINITIALIZED_VALUE) {\n                _value = value\n            } else synchronized(lock) {\n                _value = value\n                initializer = null\n            }\n        }\n\n    override fun isInitialized(): Boolean = _value !== UNINITIALIZED_VALUE\n\n    override fun toString(): String = if (isInitialized()) value.toString() else \"MutableLazy value not initialized yet.\"\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>var swipeView by mutableLazy { view.find&lt;MeasureTypePieChart&gt;(R.id.swipeableView) }\n</code></pre>\n\n<p>The <code>initializer</code> will only be called if <code>swipeView</code> is read and is not initialized yet (from a previous read or write).</p>\n"}], "owner": {"reputation": 3925, "user_id": 3806331, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ab7f221d4245947fd3260c364ffd0645?s=128&d=identicon&r=PG&f=1", "display_name": "johnny_crq", "link": "https://stackoverflow.com/users/3806331/johnny-crq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 559, "favorite_count": 0, "accepted_answer_id": 41381865, "answer_count": 1, "score": 5, "last_activity_date": 1502694593, "creation_date": 1483015087, "last_edit_date": 1502694593, "question_id": 41379897, "link": "https://stackoverflow.com/questions/41379897/kotlin-nullable-variable-assignment", "title": "Kotlin nullable variable assignment", "body": "<p>In Kotlin, is there any shorter syntax for this code:</p>\n\n<pre><code>if(swipeView == null){\n     swipeView = view.find&lt;MeasureTypePieChart&gt;(R.id.swipeableView)\n}\n</code></pre>\n\n<p>First i tried this:</p>\n\n<pre><code> swipeView ?: view.find&lt;MeasureTypePieChart&gt;(R.id.swipeableView)\n</code></pre>\n\n<p>but then i realised that wasn't an assignment, so that code does nothing. Then i tried:</p>\n\n<pre><code>swipeView = swipeView ?: view.find&lt;MeasureTypePieChart&gt;(R.id.swipeableView)\n</code></pre>\n\n<p>Which works, but it a bit verbose. I would expect something like this:</p>\n\n<pre><code>swipeView ?= view.find&lt;MeasureTypePieChart&gt;\n</code></pre>\n\n<p>But unfortunately that doesn't work. Is there any way of accomplish this with a short syntax?</p>\n\n<p>I know i can do this:</p>\n\n<pre><code>variable?.let { it = something } which works.\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 0, "creation_date": 1483009001, "post_id": 41378186, "comment_id": 69958229, "body": "&quot;If you won&#39;t do this, clients of your library will parse the <code>toString()</code> result to get access to <code>lineNumber</code>&quot; - even if not included in <code>toString()</code> they could still use reflection to access the field value. I&#39;d say that both approaches are the last resort and whoever is doing it must be aware of consequences (breaking encapsulation)."}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1483023346, "post_id": 41378186, "comment_id": 69966038, "body": "Perhaps the question should be, &quot;Kotlin data classes: Why allow private data properties?&quot;"}, {"owner": {"reputation": 19421, "user_id": 3795501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eaeec79535337d9a96f63f2d6ef3e49d?s=128&d=identicon&r=PG", "display_name": "Luka Jacobowitz", "link": "https://stackoverflow.com/users/3795501/luka-jacobowitz"}, "edited": false, "score": 0, "creation_date": 1483026474, "post_id": 41378186, "comment_id": 69967826, "body": "I&#39;d say <code>Effective Java</code> doesn&#39;t necessarily apply to Kotlin :)"}, {"owner": {"reputation": 941, "user_id": 1465013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7587a2b7a233238f84feb6fd22c7d869?s=128&d=identicon&r=PG", "display_name": "Ryba", "link": "https://stackoverflow.com/users/1465013/ryba"}, "edited": false, "score": 0, "creation_date": 1483037824, "post_id": 41378186, "comment_id": 69973452, "body": "I would suggest opening up a defect/enhancement request with kotlin. This does seem to be inappropriate behavior. I understand the reasoning for doing it but it should not be the default behavior imho."}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 2, "creation_date": 1483057762, "post_id": 41378186, "comment_id": 69980422, "body": "Changing the behavior of toString() for data classes would be a backwards incompatible change, so it&#39;s very unlikely that we (the Kotlin team) are going to do it."}, {"owner": {"reputation": 6473, "user_id": 2660462, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e7866e763430b8848f14ffdacb61b99f?s=128&d=identicon&r=PG", "display_name": "Lukas Lechner", "link": "https://stackoverflow.com/users/2660462/lukas-lechner"}, "reply_to_user": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 0, "creation_date": 1483079620, "post_id": 41378186, "comment_id": 69985380, "body": "@miensol How can I access the property with reflection?"}, {"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 0, "creation_date": 1483085322, "post_id": 41378186, "comment_id": 69987497, "body": "@luke <code>PhoneNumber::class.memberProperties.single { it.name == &quot;lineNumber&quot; }.let { it.isAccessible = true; it.get(phoneNumber) }</code>"}, {"owner": {"reputation": 941, "user_id": 1465013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7587a2b7a233238f84feb6fd22c7d869?s=128&d=identicon&r=PG", "display_name": "Ryba", "link": "https://stackoverflow.com/users/1465013/ryba"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1483113349, "post_id": 41378186, "comment_id": 69999775, "body": "@yole, yes it is but at the same time my understanding is that there are numerous enhancements coming to the data class in the future versions of kotlin. <i>if</i> ever an opportunity comes where backward compatibility is broken for the greater benefit then this one could also slip in along side with it."}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1483147700, "post_id": 41378186, "comment_id": 70012068, "body": "I&#39;m not aware of any planned enhancements to data classes that would break backward compatibility."}], "answers": [{"comments": [{"owner": {"reputation": 941, "user_id": 1465013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7587a2b7a233238f84feb6fd22c7d869?s=128&d=identicon&r=PG", "display_name": "Ryba", "link": "https://stackoverflow.com/users/1465013/ryba"}, "edited": false, "score": 1, "creation_date": 1483037654, "post_id": 41382277, "comment_id": 69973364, "body": "There are a number of scenarios  where one would have a data class with portions of the information being &quot;private&quot;. Just think about anything involving PCI/PII compliance (cvv, passwords, etc...). I think this should be filed as a defect/enhancement request to kotlin to remove the private values from the toString(). It has a bad smell to it."}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "reply_to_user": {"reputation": 941, "user_id": 1465013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7587a2b7a233238f84feb6fd22c7d869?s=128&d=identicon&r=PG", "display_name": "Ryba", "link": "https://stackoverflow.com/users/1465013/ryba"}, "edited": false, "score": 1, "creation_date": 1483046260, "post_id": 41382277, "comment_id": 69976931, "body": "@Ryba, CVV numbers, passwords, SSNs, and other sensitive information should not be stored in RAM longer than necessary. Salts and hashes should be used for authentication/comparison/lookup/etc. and not the raw data. Such sensitive information should also be stored using char arrays instead of <code>String</code> (<a href=\"http://security.stackexchange.com/q/73637\">security.stackexchange.com/q/73637</a>). This would also result in a more appropriate string representation: <code>PhoneNumber(prefix=0676, lineNumber=[C@610455d6)</code> although I would still challenge the appropriateness of placing such information in a <i>data class</i>."}, {"owner": {"reputation": 941, "user_id": 1465013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7587a2b7a233238f84feb6fd22c7d869?s=128&d=identicon&r=PG", "display_name": "Ryba", "link": "https://stackoverflow.com/users/1465013/ryba"}, "edited": false, "score": 0, "creation_date": 1483112960, "post_id": 41382277, "comment_id": 69999586, "body": "While all true, you have to concede that there is a point in time that it comes into the system as raw info. Just think about any kind of Http Request POJO. To get the information in, it is sent to the server unsalted, unencrypted, etc ... It is sitting inside of a data bean by definition for exactly the purpose it should. The data bean should have a getter that returns the salted/hashed version of things yes. But that is also exactly why the private variable that it is saved inside of should not be exposed in a toString() for example."}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "reply_to_user": {"reputation": 941, "user_id": 1465013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7587a2b7a233238f84feb6fd22c7d869?s=128&d=identicon&r=PG", "display_name": "Ryba", "link": "https://stackoverflow.com/users/1465013/ryba"}, "edited": false, "score": 0, "creation_date": 1483132994, "post_id": 41382277, "comment_id": 70008180, "body": "I would love to resist further but yes, such private information must be in memory at some point in time. However I still don&#39;t think you would want <code>equals()</code> or <code>hashCode()</code> on a POJO containing such information so one could simply not mark such a POJO with <code>data</code>."}], "tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": true, "score": 5, "last_activity_date": 1483025026, "last_edit_date": 1483025026, "creation_date": 1483024012, "answer_id": 41382277, "question_id": 41378186, "link": "https://stackoverflow.com/questions/41378186/kotlin-data-classes-why-does-tostring-export-private-properties/41382277#41382277", "title": "Kotlin data classes: Why does toString() export private properties", "body": "<p>I'm not sure why Kotlin allows private properties in data class constructors but it seems to me that for a <a href=\"https://kotlinlang.org/docs/reference/data-classes.html\" rel=\"noreferrer\">data class</a>, \"a class to do nothing but hold data\", you would want all of the data properties to be public and to be used in <code>equals()</code>, <code>hashCode()</code>, <code>toString()</code>, <a href=\"https://kotlinlang.org/docs/reference/multi-declarations.html\" rel=\"noreferrer\"><code>componentN()</code> functions</a>, and <code>copy()</code>.</p>\n\n<p>If this is not the case then I wouldn't call such a class a \"data class\" and <code>equals()</code>, <code>hashCode()</code>, etc. should be explicitly implemented.</p>\n"}], "owner": {"reputation": 6473, "user_id": 2660462, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e7866e763430b8848f14ffdacb61b99f?s=128&d=identicon&r=PG", "display_name": "Lukas Lechner", "link": "https://stackoverflow.com/users/2660462/lukas-lechner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1014, "favorite_count": 0, "accepted_answer_id": 41382277, "answer_count": 1, "score": 2, "last_activity_date": 1490639022, "creation_date": 1483008651, "question_id": 41378186, "link": "https://stackoverflow.com/questions/41378186/kotlin-data-classes-why-does-tostring-export-private-properties", "title": "Kotlin data classes: Why does toString() export private properties", "body": "<p>This Kotlin data class </p>\n\n<pre><code>data class PhoneNumber(val prefix: String, private val lineNumber: String)\n</code></pre>\n\n<p>has the private property <code>lineNumber</code>. </p>\n\n<p>When I create an object:</p>\n\n<pre><code>val phoneNumber = PhoneNumber(\"0676\", \"123456\")\n// toString() = PhoneNumber(prefix=0676, lineNumber=123456)\n</code></pre>\n\n<p>I do not expect that the <code>toString()</code> function also exposes <code>lineNumber</code>.</p>\n\n<p>In Effective Java, Joshua Bloch writes</p>\n\n<blockquote>\n  <p>Provide programmatic access to all of the information contained in the value returned by toString()</p>\n</blockquote>\n\n<p>If you won't do this, clients of your library will parse the <code>toString()</code> result to get access to <code>lineNumber</code>.</p>\n\n<p>Does anyone know why Kotlin does not hide private properties in <code>toString()</code> in data classes as a default?</p>\n"}, {"tags": ["android", "function", "unit-testing", "kotlin", "verify"], "answers": [{"comments": [{"owner": {"reputation": 796, "user_id": 3797642, "user_type": "registered", "profile_image": "https://graph.facebook.com/1634273839/picture?type=large", "display_name": "elsennov", "link": "https://stackoverflow.com/users/3797642/elsennov"}, "edited": false, "score": 0, "creation_date": 1483001897, "post_id": 41375116, "comment_id": 69954119, "body": "Ah ok! Thank you for the answer!"}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 5, "last_activity_date": 1482996716, "creation_date": 1482996716, "answer_id": 41375116, "question_id": 41373131, "link": "https://stackoverflow.com/questions/41373131/unit-test-verify-a-function-passed-to-be-called/41375116#41375116", "title": "Unit Test Verify a Function Passed to be Called", "body": "<p>Sure you can:</p>\n\n<pre><code>@Test\nfun `just testing`() {\n    var showedChatAssigner = false\n    var showChatComposer = false\n    var didHideChat = false\n\n    determineBottomBarView(null,{ showedChatAssigner = true }, { showChatComposer = true }, { didHideChat = true })\n\n    assertThat(showedChatAssigner, equalTo(true))\n    assertThat(showChatComposer, equalTo(false))\n    assertThat(didHideChat, equalTo(false))\n}\n</code></pre>\n"}], "owner": {"reputation": 796, "user_id": 3797642, "user_type": "registered", "profile_image": "https://graph.facebook.com/1634273839/picture?type=large", "display_name": "elsennov", "link": "https://stackoverflow.com/users/3797642/elsennov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 441, "favorite_count": 0, "accepted_answer_id": 41375116, "answer_count": 1, "score": 0, "last_activity_date": 1482996716, "creation_date": 1482985662, "question_id": 41373131, "link": "https://stackoverflow.com/questions/41373131/unit-test-verify-a-function-passed-to-be-called", "title": "Unit Test Verify a Function Passed to be Called", "body": "<p>Let's say i have this function (written in Kotlin):</p>\n\n<pre><code>fun determineBottomBarView(assignee: String?,\n                           showChatAssignerFunction: () -&gt; Unit,\n                           showChatComposerFunction: () -&gt; Unit,\n                           hideChatComposerAndAssignerFunction: () -&gt; Unit) {\n    if (assignee.isNullOrEmpty()) {\n        showChatAssignerFunction()\n    } else {\n        if (assignee.equals(localRequestManager.getUsername())) {\n            showChatComposerFunction()\n        } else {\n            hideChatComposerAndAssignerFunction()\n        }\n    }\n}\n</code></pre>\n\n<p>Is it possible to verify (in unit test) <code>showChatAssignerFunction</code> to be called when assignee is null or empty? Thank you all!</p>\n"}]