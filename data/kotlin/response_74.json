[{"tags": ["java", "generics", "kotlin"], "comments": [{"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 0, "creation_date": 1465421894, "post_id": 37712976, "comment_id": 62900337, "body": "Your java sample <code>public class MyActivityDelegate implements ActivityMvpDelegate</code> looks incomplete (it will not compile either), are you sure that&#39;s the exact declaration of <code>MyActivityDelegate</code> ?"}, {"owner": {"reputation": 466, "user_id": 5056573, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/940712002645523/picture?type=large", "display_name": "henorek", "link": "https://stackoverflow.com/users/5056573/henorek"}, "reply_to_user": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 1, "creation_date": 1465454679, "post_id": 37712976, "comment_id": 62909904, "body": "Yes it is, and yes, it compiles"}], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 7, "last_activity_date": 1465471698, "last_edit_date": 1465471698, "creation_date": 1465422180, "answer_id": 37713447, "question_id": 37712976, "link": "https://stackoverflow.com/questions/37712976/extending-generic-class-in-kotlin/37713447#37713447", "title": "Extending generic class in Kotlin", "body": "<p>Your interface declaration requires that</p>\n\n<ul>\n<li><code>V</code> extends <code>MvpView</code></li>\n<li><code>V</code> (exactly <code>V</code>, not its subtype) is used as generic parameter for <code>P extends MvpPresenter&lt;V&gt;</code></li>\n</ul>\n\n<p>Given that, you cannot extend <code>ActivityMvpDelegate&lt;MvpView, MvpPresenter&lt;V&gt;&gt;</code>, because there's no guarantee that <code>V</code> is exactly <code>MvpView</code> (also, in Kotlin, generic parameters are not implicitly inherited, you have to redeclarate them like <code>class SomeClass&lt;T&gt; : SomeInterface&lt;T&gt;</code>).</p>\n\n<p>You can, however, write it as</p>\n\n<pre><code>class MyActivityDelegate(private val activity: Activity) \n: ActivityMvpDelegate&lt;MvpView, MvpPresenter&lt;MvpView&gt;&gt;\n</code></pre>\n\n<p>or introduce another generic parameter, so that <code>V</code> and the argument for <code>P</code> are still the same:</p>\n\n<pre><code>class MyActivityDelegate&lt;T : MvpView&gt;(private val activity: Activity) \n: ActivityMvpDelegate&lt;T, MvpPresenter&lt;T&gt;&gt;\n</code></pre>\n\n<p>You can also change the generic declaration of your interface from <code>P extends MvpPresenter&lt;V&gt;</code> to <code>P extends MvpPresenter&lt;? extends V&gt;</code> (or use <a href=\"https://kotlinlang.org/docs/reference/generics.html#use-site-variance-type-projections\" rel=\"nofollow\"><code>out V</code></a> in Kotlin), and you will be able to use any subtype of <code>V</code> as the argument, including bounded generic:</p>\n\n<pre><code>class MyActivityDelegate&lt;T : MvpView&gt;(private val activity: Activity) \n: ActivityMvpDelegate&lt;MvpView, MvpPresenter&lt;T&gt;&gt;\n</code></pre>\n"}], "owner": {"reputation": 466, "user_id": 5056573, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/940712002645523/picture?type=large", "display_name": "henorek", "link": "https://stackoverflow.com/users/5056573/henorek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5990, "favorite_count": 2, "accepted_answer_id": 37713447, "answer_count": 1, "score": 8, "last_activity_date": 1465471698, "creation_date": 1465420122, "question_id": 37712976, "link": "https://stackoverflow.com/questions/37712976/extending-generic-class-in-kotlin", "title": "Extending generic class in Kotlin", "body": "<p>Lets say that I have this sample code in Java:</p>\n\n<pre><code>public class MyActivityDelegate implements ActivityMvpDelegate\n</code></pre>\n\n<p>where ActivityMvpDelegate:</p>\n\n<pre><code>interface ActivityMvpDelegate&lt;V extends MvpView, P extends MvpPresenter&lt;V&gt;&gt;\n</code></pre>\n\n<p>Same code converted to Kotlin looks like this</p>\n\n<pre><code>class MyActivityDelegate(private val activity: Activity) : ActivityMvpDelegate&lt;MvpView, MvpPresenter&lt;V&gt;&gt;\n</code></pre>\n\n<p>Of course I got unresolved reference at <code>V</code> and I'm not sure how this code should looks, in Java I don't have to specify generic over here.. any tips gonna be much appreciated</p>\n"}, {"tags": ["java", "list", "kotlin", "mutable"], "answers": [{"tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": false, "score": 4, "last_activity_date": 1465414464, "last_edit_date": 1465414464, "creation_date": 1465406083, "answer_id": 37708902, "question_id": 37707999, "link": "https://stackoverflow.com/questions/37707999/kotlin-mutablelistraw-kotlin-any-cast-to-listjsonobject/37708902#37708902", "title": "Kotlin (Mutable)List&lt;(raw) kotlin.Any?&gt; cast to List&lt;JsonObject&gt;", "body": "<p><code>JsonArray</code> can hold both primitive and complex objects:</p>\n\n<pre><code>val jsonArray = JsonArray(\"\"\"[1, {\"foo\": \"bar\"}, \"stack\"]\"\"\")\nprintln(jsonArray.toList()) // -&gt; [1, {foo=bar}, stack]\nprintln(jsonArray.toList().map { it?.javaClass?.simpleName }) // -&gt; [Integer, JsonObject, String]\n</code></pre>\n\n<p><code>JsonObject</code> in turn represents a non primitive object. In other words it's not suitable to represent <code>\"stack\"</code>, <code>5.4</code>, <code>false</code>. If you're sure that the <code>jsonArray</code> holds only <code>JsonObject</code> instances you can do:</p>\n\n<pre><code>val jsonArray = JsonArray(\"\"\"[{\"foo\": \"bar\"}]\"\"\")\nprintln(jsonArray.toList()\n        .map { it as JsonObject }\n        .map { it.getString(\"foo\")})\n</code></pre>\n"}], "owner": {"reputation": 623, "user_id": 1682698, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/33dPE.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1682698/tim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1008, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1465414464, "creation_date": 1465403162, "question_id": 37707999, "link": "https://stackoverflow.com/questions/37707999/kotlin-mutablelistraw-kotlin-any-cast-to-listjsonobject", "title": "Kotlin (Mutable)List&lt;(raw) kotlin.Any?&gt; cast to List&lt;JsonObject&gt;", "body": "<p>in my code i get an io.vertx.core.json.JsonArray and i want to have a List of JsonObjects. \nSo in Java i called jsonarray.getList() and get List - getList() returns a java.util.List.</p>\n\n<p>So in Kotlin</p>\n\n<pre><code>var list: List&lt;JsonObject&gt; = jsonArray.getList()\n</code></pre>\n\n<p>but i get an error</p>\n\n<pre><code>Type mismatch: inferred type is kotlin.collections.(Mutable)List&lt;(raw) kotlin.Any?&gt;! but kotlin.collections.List&lt;io.vertx.core.json.JsonObject&gt; was expected\n</code></pre>\n\n<p>Can i cast or so?</p>\n\n<p>Thx</p>\n"}, {"tags": ["plugins", "intellij-idea", "kotlin"], "comments": [{"owner": {"reputation": 399, "user_id": 1733053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b284f165cd5b59d5522abb52bbaa3ed0?s=128&d=identicon&r=PG&f=1", "display_name": "Elia Grady", "link": "https://stackoverflow.com/users/1733053/elia-grady"}, "edited": false, "score": 0, "creation_date": 1472115962, "post_id": 37706255, "comment_id": 65626386, "body": "Overriding project level output paths with module full paths (and not relative) solved the problem, and now the JAR is full again.Thanks, it drove me crazy :-)"}], "answers": [{"tags": [], "owner": {"reputation": 1492, "user_id": 1529758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8bbe326bfddbbb2b78912a023127a5df?s=128&d=identicon&r=PG", "display_name": "06needhamt", "link": "https://stackoverflow.com/users/1529758/06needhamt"}, "is_accepted": true, "score": 0, "last_activity_date": 1465400435, "creation_date": 1465400435, "answer_id": 37707088, "question_id": 37706255, "link": "https://stackoverflow.com/questions/37706255/only-dependancies-are-copied-when-deploying-intellij-plugins/37707088#37707088", "title": "Only dependancies are copied when deploying intellij plugins", "body": "<p>I found a workaround by manually copying the compilation output of the module except the META-INF into the generated zip file after doing this the plugin loads sucessfully</p>\n"}], "owner": {"reputation": 1492, "user_id": 1529758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8bbe326bfddbbb2b78912a023127a5df?s=128&d=identicon&r=PG", "display_name": "06needhamt", "link": "https://stackoverflow.com/users/1529758/06needhamt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 37707088, "answer_count": 1, "score": 1, "last_activity_date": 1465400435, "creation_date": 1465398180, "last_edit_date": 1465398598, "question_id": 37706255, "link": "https://stackoverflow.com/questions/37706255/only-dependancies-are-copied-when-deploying-intellij-plugins", "title": "Only dependancies are copied when deploying intellij plugins", "body": "<p>I am currently developing an intellij plugin using Kotlin and when i deploy it using the \"prepare module XXX for deployment\" only the dependencies are present in the .zip file and not the plugin itself. however it works fine when running/debugging it from the IDE.</p>\n\n<p>Update: See you track <a href=\"https://youtrack.jetbrains.com/issue/IDEA-157271\" rel=\"nofollow\">issue</a></p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1453, "user_id": 2804610, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m7Bke.jpg?s=128&g=1", "display_name": "EPadronU", "link": "https://stackoverflow.com/users/2804610/epadronu"}, "edited": false, "score": 0, "creation_date": 1465385333, "post_id": 37701185, "comment_id": 62876437, "body": "Can you tell me where in the docs I can find the related information, please?"}, {"owner": {"reputation": 1453, "user_id": 2804610, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m7Bke.jpg?s=128&g=1", "display_name": "EPadronU", "link": "https://stackoverflow.com/users/2804610/epadronu"}, "edited": false, "score": 0, "creation_date": 1465385688, "post_id": 37701185, "comment_id": 62876675, "body": "Don&#39;t worry about it. That explains why I couldn&#39;t find it, though :)"}, {"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 0, "creation_date": 1465390362, "post_id": 37701185, "comment_id": 62880116, "body": "This is probably naive, but isn&#39;t it possible to compile the overridden default parameter to an overridden method with no parameters that calls the other method with the new default parameter?"}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 13, "last_activity_date": 1593805349, "last_edit_date": 1593805349, "creation_date": 1465385205, "answer_id": 37701185, "question_id": 37700828, "link": "https://stackoverflow.com/questions/37700828/why-is-it-possible-to-omit-default-values-in-overridden-member-functions-of-sub/37701185#37701185", "title": "Why is it possible to omit default values in overridden member functions of sub-types?", "body": "<p>Yes, this is normal and to be expected.</p>\n<p>Moreover, it is <strong>not</strong> allowed to override the default values. This does not compile:</p>\n<pre><code>interface Foo {\n    fun bar(parameter: Int = 1)\n}\n\nclass Baz : Foo {\n    override fun bar(parameter: Int = 1) { // ERROR: An overriding function is not allowed to specify default values for its parameters\n    }\n}\n</code></pre>\n<p>Technically the implementation with fixed default values is much simpler than any other implementation. For example Scala goes to a great extend to provide this capability, but the generated byte code is not a simple one.</p>\n"}, {"tags": [], "owner": {"reputation": 12732, "user_id": 430128, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c2aa2c9f527afea12a7fef458588b2a1?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/430128/raman"}, "is_accepted": true, "score": 29, "last_activity_date": 1615471315, "last_edit_date": 1615471315, "creation_date": 1465385212, "answer_id": 37701188, "question_id": 37700828, "link": "https://stackoverflow.com/questions/37700828/why-is-it-possible-to-omit-default-values-in-overridden-member-functions-of-sub/37701188#37701188", "title": "Why is it possible to omit default values in overridden member functions of sub-types?", "body": "<blockquote>\n<p>Is this normal or to be expected?</p>\n</blockquote>\n<p>Yes.</p>\n<p>I suspect this was primarily a language design / usability decision. From this perspective, there were four options available:</p>\n<ol>\n<li>Declare in supertype only.</li>\n<li>Declare in subtype only.</li>\n<li>Declare in both, but do not allow subtype to change the default.</li>\n<li>Declare in both, allow subtype to override the default in the supertype.</li>\n</ol>\n<p>The Kotlin designers chose option #1. This makes sense because:</p>\n<p>Option #2 and #4 all imply that callers would not know what the default value is unless they were aware of which implementation they were using, which is of course highly undesirable. The caller would require extra logic to determine if a value is needed to override a default, which means the default would be useless.</p>\n<p>Option #3 violates the <a href=\"https://en.wikipedia.org/wiki/Don%27t_repeat_yourself\" rel=\"nofollow noreferrer\">DRY principle</a>. Why force the declaration to be in two places?</p>\n<p>That leaves Option #1 as the only sane choice.</p>\n"}], "owner": {"reputation": 1453, "user_id": 2804610, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m7Bke.jpg?s=128&g=1", "display_name": "EPadronU", "link": "https://stackoverflow.com/users/2804610/epadronu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6566, "favorite_count": 7, "accepted_answer_id": 37701188, "answer_count": 2, "score": 31, "last_activity_date": 1615471315, "creation_date": 1465384138, "question_id": 37700828, "link": "https://stackoverflow.com/questions/37700828/why-is-it-possible-to-omit-default-values-in-overridden-member-functions-of-sub", "title": "Why is it possible to omit default values in overridden member functions of sub-types?", "body": "<p>Just as stated in the title: Why is it possible to omit default values in overridden member functions of sub-types?</p>\n\n<p>Is this <em>normal</em> or to be expected?</p>\n\n<pre><code>interface Foo {\n  fun bar(parameter: Int = 1)\n}\n\nclass Baz : Foo {\n  override fun bar(parameter: Int) { // OK\n    println(parameter)\n  }\n}\n\nval baz = Baz()\n\nbaz.bar() // OK\nbaz.bar(2) // OK\n</code></pre>\n\n<p>Same behavior in the case where <code>Foo</code> is a class.</p>\n"}, {"tags": ["java", "log4j", "kotlin", "kotlin-logging"], "comments": [{"owner": {"reputation": 13177, "user_id": 411965, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/UVUN2.jpg?s=128&g=1", "display_name": "oshai", "link": "https://stackoverflow.com/users/411965/oshai"}, "edited": false, "score": 0, "creation_date": 1468495764, "post_id": 37698103, "comment_id": 64156414, "body": "see this lib: <a href=\"https://github.com/MicroUtils/kotlin.logging\" rel=\"nofollow noreferrer\">github.com/MicroUtils/kotlin.logging</a>"}], "answers": [{"comments": [{"owner": {"reputation": 5483, "user_id": 1356130, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/71a884fac9d80ee3171a4018b1eaf660?s=128&d=identicon&r=PG", "display_name": "atok", "link": "https://stackoverflow.com/users/1356130/atok"}, "edited": false, "score": 0, "creation_date": 1465378437, "post_id": 37698508, "comment_id": 62871901, "body": "This is still a little much for my taste. But looks like it can work without &lt;MyClass&gt; using LoggerFactory.getLogger(MethodHandles.lookup().lookupClass()&zwnj;&#8203;)"}], "tags": [], "owner": {"reputation": 1629, "user_id": 700848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0f335ffa8a58df3a2ab208b04002fba?s=128&d=identicon&r=PG&f=1", "display_name": "M Platvoet", "link": "https://stackoverflow.com/users/700848/m-platvoet"}, "is_accepted": true, "score": 1, "last_activity_date": 1465378694, "last_edit_date": 1465378694, "creation_date": 1465378095, "answer_id": 37698508, "question_id": 37698103, "link": "https://stackoverflow.com/questions/37698103/what-is-an-idiomatic-kotlin-way-to-aquire-a-logger/37698508#37698508", "title": "What is an idiomatic Kotlin way to aquire a Logger?", "body": "<p>You can create an utility method like</p>\n\n<pre><code>inline fun &lt;reified T:Any&gt; loggerFor() = LoggerFactory.getLogger(T::class.java)\n</code></pre>\n\n<p>And simply use it like</p>\n\n<pre><code>class MyClass {\n    companion object {\n        val log = loggerFor&lt;MyClass&gt;()\n    }\n\n    fun usage() {\n        log.debug(\"Success\")\n    }\n}\n</code></pre>\n\n<p>Alternatively you could use a file level private logger which saves you some typing, which only seems to be a good solution when you don't have multiple classes with their own loggers defined per file:</p>\n\n<pre><code>private val log = loggerFor&lt;MyClass&gt;()\n\nclass MyClass {\n    fun usage() {\n        log.debug(\"Success\")\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5483, "user_id": 1356130, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/71a884fac9d80ee3171a4018b1eaf660?s=128&d=identicon&r=PG", "display_name": "atok", "link": "https://stackoverflow.com/users/1356130/atok"}, "edited": false, "score": 1, "creation_date": 1465379125, "post_id": 37698670, "comment_id": 62872377, "body": "Woah! That&#39;s cool! You can even replace reified T with MethodHandles.lookup().lookupClass() and get the same result withouth spelling out &quot;SomeClass&quot; for the second time:   inline fun loggerAware() = HasLoggerMixin(MethodHandles.lookup().lookupClass())"}, {"owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "reply_to_user": {"reputation": 5483, "user_id": 1356130, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/71a884fac9d80ee3171a4018b1eaf660?s=128&d=identicon&r=PG", "display_name": "atok", "link": "https://stackoverflow.com/users/1356130/atok"}, "edited": false, "score": 0, "creation_date": 1465379927, "post_id": 37698670, "comment_id": 62872952, "body": "@atok Yep, seems you can."}, {"owner": {"reputation": 5483, "user_id": 1356130, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/71a884fac9d80ee3171a4018b1eaf660?s=128&d=identicon&r=PG", "display_name": "atok", "link": "https://stackoverflow.com/users/1356130/atok"}, "edited": false, "score": 0, "creation_date": 1465380021, "post_id": 37698670, "comment_id": 62873023, "body": "Thank you. I think you should post this in this question: <a href=\"http://stackoverflow.com/questions/34416869/idiomatic-way-of-logging-in-kotlin\" title=\"idiomatic way of logging in kotlin\">stackoverflow.com/questions/34416869/&hellip;</a> because its better then their results"}], "tags": [], "owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "is_accepted": false, "score": 1, "last_activity_date": 1465378868, "last_edit_date": 1465378868, "creation_date": 1465378472, "answer_id": 37698670, "question_id": 37698103, "link": "https://stackoverflow.com/questions/37698103/what-is-an-idiomatic-kotlin-way-to-aquire-a-logger/37698670#37698670", "title": "What is an idiomatic Kotlin way to aquire a Logger?", "body": "<p>First, you can add extension functions for logger creation.</p>\n\n<pre><code>inline fun &lt;reified T : Any&gt; getLogger() = LoggerFactory.getLogger(T::class.java)\nfun &lt;T : Any&gt; T.getLogger() = LoggerFactory.getLogger(javaClass)\n</code></pre>\n\n<p>Then you will be able to create a logger using the following code.</p>\n\n<pre><code>private val logger1 = getLogger&lt;SomeClass&gt;()\nprivate val logger2 = getLogger()\n</code></pre>\n\n<p>Second, you can define an interface that provides a logger and its mixin implementation.</p>\n\n<pre><code>interface LoggerAware {\n  val logger: Logger\n}\n\nclass LoggerAwareMixin(containerClass: Class&lt;*&gt;) : LoggerAware {\n  override val logger: Logger = LoggerFactory.getLogger(containerClass)\n}\n\ninline fun &lt;reified T : Any&gt; loggerAware() = LoggerAwareMixin(T::class.java)\n</code></pre>\n\n<p>This interface can be used in the following way.</p>\n\n<pre><code>class SomeClass : LoggerAware by loggerAware&lt;SomeClass&gt;() {\n  // Now you can use a logger here.\n}\n</code></pre>\n"}], "owner": {"reputation": 5483, "user_id": 1356130, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/71a884fac9d80ee3171a4018b1eaf660?s=128&d=identicon&r=PG", "display_name": "atok", "link": "https://stackoverflow.com/users/1356130/atok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 391, "favorite_count": 0, "closed_date": 1465379913, "accepted_answer_id": 37698508, "answer_count": 2, "score": 1, "last_activity_date": 1469712518, "creation_date": 1465377046, "last_edit_date": 1469712518, "question_id": 37698103, "link": "https://stackoverflow.com/questions/37698103/what-is-an-idiomatic-kotlin-way-to-aquire-a-logger", "closed_reason": "Duplicate", "title": "What is an idiomatic Kotlin way to aquire a Logger?", "body": "<p>I'm looking to replace</p>\n\n<pre><code>private static final Logger log = Logger.getLogger(MyClass.class);\n</code></pre>\n\n<p>with something that is a little less verbose and more idiomatic then</p>\n\n<pre><code>class MyClass {\n    companion object {\n        val log = LoggerFactory.getLogger(MyClass::class.java)\n    }\n\n    fun usage() {\n        log.debug(\"Success\")\n    }\n}\n</code></pre>\n\n<p>Bonus points for not having to delcare it in every class.</p>\n\n<p>I tried:</p>\n\n<pre><code>interface HasLogger {\n    val log: Logger\n        get() = LoggerFactory.getLogger(this.javaClass)\n}\n</code></pre>\n\n<p>But this results in a getLogger() call for every usage (inacceptable) also returns a logger for a subtype (not the one where it was declared). </p>\n"}, {"tags": ["java", "android", "ssl", "kotlin", "retrofit2"], "comments": [{"owner": {"reputation": 36814, "user_id": 671543, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2145962377da9419f2446cd565f614ee?s=128&d=identicon&r=PG", "display_name": "njzk2", "link": "https://stackoverflow.com/users/671543/njzk2"}, "edited": false, "score": 0, "creation_date": 1465324331, "post_id": 37686625, "comment_id": 62850706, "body": "if you don&#39;t have an ssl certificate on your dev server, why connect it using https?"}, {"owner": {"reputation": 5033, "user_id": 3067928, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/16fa1506d4412e204a64ccee50998fd8?s=128&d=identicon&r=PG&f=1", "display_name": "Ronak Patel", "link": "https://stackoverflow.com/users/3067928/ronak-patel"}, "reply_to_user": {"reputation": 36814, "user_id": 671543, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2145962377da9419f2446cd565f614ee?s=128&d=identicon&r=PG", "display_name": "njzk2", "link": "https://stackoverflow.com/users/671543/njzk2"}, "edited": false, "score": 1, "creation_date": 1465324388, "post_id": 37686625, "comment_id": 62850733, "body": "@njzk2: It&#39;s a self-signed certificate. And URL aoti-redirects to <code>https</code>."}, {"owner": {"reputation": 3495, "user_id": 1993577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/646fb3da2e0fdccacb2a4474a3a6f806?s=128&d=identicon&r=PG", "display_name": "Ruchira Randana", "link": "https://stackoverflow.com/users/1993577/ruchira-randana"}, "edited": false, "score": 0, "creation_date": 1465326482, "post_id": 37686625, "comment_id": 62851919, "body": "Why don&#39;t you add it to your trusted certificates? At least until you do the development work."}, {"owner": {"reputation": 5033, "user_id": 3067928, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/16fa1506d4412e204a64ccee50998fd8?s=128&d=identicon&r=PG&f=1", "display_name": "Ronak Patel", "link": "https://stackoverflow.com/users/3067928/ronak-patel"}, "reply_to_user": {"reputation": 3495, "user_id": 1993577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/646fb3da2e0fdccacb2a4474a3a6f806?s=128&d=identicon&r=PG", "display_name": "Ruchira Randana", "link": "https://stackoverflow.com/users/1993577/ruchira-randana"}, "edited": false, "score": 0, "creation_date": 1465327363, "post_id": 37686625, "comment_id": 62852343, "body": "@RuchiraRandana: How can I do that?"}, {"owner": {"reputation": 3495, "user_id": 1993577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/646fb3da2e0fdccacb2a4474a3a6f806?s=128&d=identicon&r=PG", "display_name": "Ruchira Randana", "link": "https://stackoverflow.com/users/1993577/ruchira-randana"}, "edited": false, "score": 0, "creation_date": 1465327683, "post_id": 37686625, "comment_id": 62852517, "body": "The easiest way I can think of is to send an email to yourself with the self-signed certificate attached. Once you get that email, open it from your Android device and download it. Then select the downloaded certificate to install it. It will show a prompt, you can simply follow it. If it was successfully installed, you can see that certificate in your device&#39;s &quot;Settings-&gt; Trusted Credentials -&gt;User&quot; section."}, {"owner": {"reputation": 22549, "user_id": 4328123, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/8qT78.jpg?s=128&g=1", "display_name": "BNK", "link": "https://stackoverflow.com/users/4328123/bnk"}, "reply_to_user": {"reputation": 3495, "user_id": 1993577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/646fb3da2e0fdccacb2a4474a3a6f806?s=128&d=identicon&r=PG", "display_name": "Ruchira Randana", "link": "https://stackoverflow.com/users/1993577/ruchira-randana"}, "edited": false, "score": 0, "creation_date": 1465641002, "post_id": 37686625, "comment_id": 62993972, "body": "@RuchiraRandana have you tried it successfully yet? The cert in my app can be added to Trusted Credential - Users, however, my app still gets that exception if not use custom trustmanager as in my answer"}, {"owner": {"reputation": 3495, "user_id": 1993577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/646fb3da2e0fdccacb2a4474a3a6f806?s=128&d=identicon&r=PG", "display_name": "Ruchira Randana", "link": "https://stackoverflow.com/users/1993577/ruchira-randana"}, "edited": false, "score": 0, "creation_date": 1465642700, "post_id": 37686625, "comment_id": 62994515, "body": "Hi BNK, I&#39;ve done this to install the certificate for Charles which is used for HTTP debugging. That is why I recommend this approach."}, {"owner": {"reputation": 22549, "user_id": 4328123, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/8qT78.jpg?s=128&g=1", "display_name": "BNK", "link": "https://stackoverflow.com/users/4328123/bnk"}, "reply_to_user": {"reputation": 3495, "user_id": 1993577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/646fb3da2e0fdccacb2a4474a3a6f806?s=128&d=identicon&r=PG", "display_name": "Ruchira Randana", "link": "https://stackoverflow.com/users/1993577/ruchira-randana"}, "edited": false, "score": 0, "creation_date": 1465657509, "post_id": 37686625, "comment_id": 62999063, "body": "@RuchiraRandana then your wifi must set your PC&#39;s IP as proxy?"}, {"owner": {"reputation": 3495, "user_id": 1993577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/646fb3da2e0fdccacb2a4474a3a6f806?s=128&d=identicon&r=PG", "display_name": "Ruchira Randana", "link": "https://stackoverflow.com/users/1993577/ruchira-randana"}, "edited": false, "score": 0, "creation_date": 1465705546, "post_id": 37686625, "comment_id": 63009845, "body": "Hi BNK, Yes. That&#39;s how I have done it. So, would that affect building the trust?"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6436690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d47ad83a7f541b9bd9ec0f0397e2560?s=128&d=identicon&r=PG&f=1", "display_name": "mwo", "link": "https://stackoverflow.com/users/6436690/mwo"}, "is_accepted": false, "score": 0, "last_activity_date": 1465326222, "creation_date": 1465326222, "answer_id": 37687339, "question_id": 37686625, "link": "https://stackoverflow.com/questions/37686625/disable-ssl-certificate-check-in-retrofit-library/37687339#37687339", "title": "Disable SSL certificate check in retrofit library", "body": "<p>Implementation of such workaround in code, even for testing purposes is a bad practice.</p>\n\n<p>You can:</p>\n\n<ol>\n<li>Generate your CA.</li>\n<li>Sign your certificate with CA.</li>\n<li>Add your CA as trusted.</li>\n</ol>\n\n<p>Some links that may be useful:</p>\n\n<ul>\n<li><p><a href=\"https://jamielinux.com/docs/openssl-certificate-authority/create-the-root-pair.html\" rel=\"nofollow\">https://jamielinux.com/docs/openssl-certificate-authority/create-the-root-pair.html</a></p></li>\n<li><p><a href=\"http://wiki.cacert.org/FAQ/ImportRootCert\" rel=\"nofollow\">http://wiki.cacert.org/FAQ/ImportRootCert</a></p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 22549, "user_id": 4328123, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/8qT78.jpg?s=128&g=1", "display_name": "BNK", "link": "https://stackoverflow.com/users/4328123/bnk"}, "is_accepted": false, "score": 4, "last_activity_date": 1465443623, "last_edit_date": 1465443623, "creation_date": 1465369564, "answer_id": 37695466, "question_id": 37686625, "link": "https://stackoverflow.com/questions/37686625/disable-ssl-certificate-check-in-retrofit-library/37695466#37695466", "title": "Disable SSL certificate check in retrofit library", "body": "<p>IMO, you can read <a href=\"https://developer.android.com/training/articles/security-ssl.html\" rel=\"nofollow\">Google's documentation - Security with HTTPS and SSL</a>.</p>\n\n<p>About sample code to use Retrofit with your self-signed certificate, please try the following, hope it helps!</p>\n\n<pre><code>...\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    try{\n        OkHttpClient client = new OkHttpClient.Builder()\n                .sslSocketFactory(getSSLSocketFactory())\n                .hostnameVerifier(getHostnameVerifier())\n                .build();\n\n        Retrofit retrofit = new Retrofit.Builder()\n                .baseUrl(API_URL_BASE)\n                .addConverterFactory(GsonConverterFactory.create())\n                .client(client)\n                .build();\n\n        WebAPIService service = retrofit.create(WebAPIService.class);\n\n        Call&lt;JsonObject&gt; jsonObjectCall = service.getData(...);\n        ...\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n}\n\n// for SSL...    \n// Read more at https://developer.android.com/training/articles/security-ssl.html#CommonHostnameProbs\nprivate HostnameVerifier getHostnameVerifier() {\n    return new HostnameVerifier() {\n        @Override\n        public boolean verify(String hostname, SSLSession session) {\n            return true; // verify always returns true, which could cause insecure network traffic due to trusting TLS/SSL server certificates for wrong hostnames\n            //HostnameVerifier hv = HttpsURLConnection.getDefaultHostnameVerifier();\n            //return hv.verify(\"localhost\", session);\n        }\n    };\n}        \n\nprivate TrustManager[] getWrappedTrustManagers(TrustManager[] trustManagers) {\n    final X509TrustManager originalTrustManager = (X509TrustManager) trustManagers[0];\n    return new TrustManager[]{\n            new X509TrustManager() {\n                public X509Certificate[] getAcceptedIssuers() {\n                    return originalTrustManager.getAcceptedIssuers();\n                }\n\n                public void checkClientTrusted(X509Certificate[] certs, String authType) {\n                    try {\n                        if (certs != null &amp;&amp; certs.length &gt; 0){\n                            certs[0].checkValidity();\n                        } else {\n                            originalTrustManager.checkClientTrusted(certs, authType);\n                        }\n                    } catch (CertificateException e) {\n                        Log.w(\"checkClientTrusted\", e.toString());\n                    }\n                }\n\n                public void checkServerTrusted(X509Certificate[] certs, String authType) {\n                    try {\n                        if (certs != null &amp;&amp; certs.length &gt; 0){\n                            certs[0].checkValidity();\n                        } else {\n                            originalTrustManager.checkServerTrusted(certs, authType);\n                        }\n                    } catch (CertificateException e) {\n                        Log.w(\"checkServerTrusted\", e.toString());\n                    }\n                }\n            }\n    };\n}\n\nprivate SSLSocketFactory getSSLSocketFactory()\n        throws CertificateException, KeyStoreException, IOException,\n        NoSuchAlgorithmException, KeyManagementException {\n    CertificateFactory cf = CertificateFactory.getInstance(\"X.509\");\n    InputStream caInput = getResources().openRawResource(R.raw.your_cert); // File path: app\\src\\main\\res\\raw\\your_cert.cer\n    Certificate ca = cf.generateCertificate(caInput);\n    caInput.close();\n    KeyStore keyStore = KeyStore.getInstance(\"BKS\");\n    keyStore.load(null, null);\n    keyStore.setCertificateEntry(\"ca\", ca);\n    String tmfAlgorithm = TrustManagerFactory.getDefaultAlgorithm();\n    TrustManagerFactory tmf = TrustManagerFactory.getInstance(tmfAlgorithm);\n    tmf.init(keyStore);\n    TrustManager[] wrappedTrustManagers = getWrappedTrustManagers(tmf.getTrustManagers());\n    SSLContext sslContext = SSLContext.getInstance(\"TLS\");\n    sslContext.init(null, wrappedTrustManagers, null);\n    return sslContext.getSocketFactory();\n}\n...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 30786, "user_id": 2252113, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/TTazp.png?s=128&g=1", "display_name": "Hitesh Sahu", "link": "https://stackoverflow.com/users/2252113/hitesh-sahu"}, "is_accepted": false, "score": 39, "last_activity_date": 1486718664, "creation_date": 1486718664, "answer_id": 42155739, "question_id": 37686625, "link": "https://stackoverflow.com/questions/37686625/disable-ssl-certificate-check-in-retrofit-library/42155739#42155739", "title": "Disable SSL certificate check in retrofit library", "body": "<p>Use this class to get unsafe Retrofit instance. I have included imports to avoid confusion.</p>\n\n<pre><code>import java.security.cert.CertificateException;\n\nimport javax.net.ssl.HostnameVerifier;\nimport javax.net.ssl.SSLContext;\nimport javax.net.ssl.SSLSession;\nimport javax.net.ssl.SSLSocketFactory;\nimport javax.net.ssl.TrustManager;\nimport javax.net.ssl.X509TrustManager;\n\nimport okhttp3.OkHttpClient;\nimport retrofit2.Retrofit;\nimport retrofit2.converter.gson.GsonConverterFactory;\nimport view.utils.AppConstants;\n\n/**\n * Created by Hitesh.Sahu on 11/23/2016.\n */\n\npublic class NetworkHandler {\n\n    public static Retrofit getRetrofit() {\n\n        return new Retrofit.Builder()\n                .baseUrl(AppConstants.BASE_URL)\n                .addConverterFactory(GsonConverterFactory.create())\n                .client(getUnsafeOkHttpClient())\n                .build();\n    }\n\n\n    private static OkHttpClient getUnsafeOkHttpClient() {\n        try {\n            // Create a trust manager that does not validate certificate chains\n            final TrustManager[] trustAllCerts = new TrustManager[] {\n                    new X509TrustManager() {\n                        @Override\n                        public void checkClientTrusted(java.security.cert.X509Certificate[] chain, String authType) throws CertificateException {\n                        }\n\n                        @Override\n                        public void checkServerTrusted(java.security.cert.X509Certificate[] chain, String authType) throws CertificateException {\n                        }\n\n                        @Override\n                        public java.security.cert.X509Certificate[] getAcceptedIssuers() {\n                            return new java.security.cert.X509Certificate[]{};\n                        }\n                    }\n            };\n\n            // Install the all-trusting trust manager\n            final SSLContext sslContext = SSLContext.getInstance(\"SSL\");\n            sslContext.init(null, trustAllCerts, new java.security.SecureRandom());\n            // Create an ssl socket factory with our all-trusting manager\n            final SSLSocketFactory sslSocketFactory = sslContext.getSocketFactory();\n\n            OkHttpClient.Builder builder = new OkHttpClient.Builder();\n            builder.sslSocketFactory(sslSocketFactory);\n            builder.hostnameVerifier(new HostnameVerifier() {\n                @Override\n                public boolean verify(String hostname, SSLSession session) {\n                    return true;\n                }\n            });\n\n            OkHttpClient okHttpClient = builder.build();\n            return okHttpClient;\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n</code></pre>\n\n<p>And then simply use retrofit without ssl check like this</p>\n\n<pre><code>    private void postFeedbackOnServer() {\n\n        MyApiEndpointInterface apiService =\n                NetworkHandler.getRetrofit().create(MyApiEndpointInterface.class);\n\n        Call&lt;ResponseBE&gt; call = apiService.submitFeedbackToServer(requestObject);\n\n        Log.e(TAG ,  \"Request is\" + new Gson().toJson(requestObject).toString() );\n\n        call.enqueue(new Callback&lt;ResponseBE&gt;() {\n            @Override\n            public void onResponse(Call&lt;ResponseBE&gt; call, Response&lt;ResponseBE&gt; response) {\n                int statusCode = response.code();\n\n                if (statusCode == HttpURLConnection.HTTP_OK) {\n\n              ......\n\n                } else {\n                    Toast.makeText(FeedbackActivity.this, \"Failed to submit Data\" + statusCode, Toast.LENGTH_SHORT).show();\n                }\n            }\n\n            @Override\n            public void onFailure(Call&lt;ResponseBE&gt; call, Throwable t) {\n\n                // Log error here since request failed\n                Toast.makeText(FeedbackActivity.this, \"Failure\" + t.getLocalizedMessage(), Toast.LENGTH_SHORT).show();\n\n            }\n        });\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14335, "user_id": 490315, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/LJRFQ.jpg?s=128&g=1", "display_name": "whirlwin", "link": "https://stackoverflow.com/users/490315/whirlwin"}, "is_accepted": false, "score": 9, "last_activity_date": 1539262433, "creation_date": 1539262433, "answer_id": 52760579, "question_id": 37686625, "link": "https://stackoverflow.com/questions/37686625/disable-ssl-certificate-check-in-retrofit-library/52760579#52760579", "title": "Disable SSL certificate check in retrofit library", "body": "<p>The syntax has changed a little since Hitesh Sahu's answer was posted. Now you can use lambdas for some of the methods, remove some throw clauses and chain builder method invocations.</p>\n\n<pre><code>private static OkHttpClient createOkHttpClient() {\n    try {\n        final TrustManager[] trustAllCerts = new TrustManager[] {\n                new X509TrustManager() {\n                    @Override\n                    public void checkClientTrusted(java.security.cert.X509Certificate[] chain, String authType) {}\n\n                    @Override\n                    public void checkServerTrusted(java.security.cert.X509Certificate[] chain, String authType) {}\n\n                    @Override\n                    public java.security.cert.X509Certificate[] getAcceptedIssuers() {\n                        return new java.security.cert.X509Certificate[]{};\n                    }\n                }\n        };\n        final SSLContext sslContext = SSLContext.getInstance(\"SSL\");\n        sslContext.init(null, trustAllCerts, new java.security.SecureRandom());\n        return new OkHttpClient.Builder()\n                .sslSocketFactory(sslContext.getSocketFactory())\n                .hostnameVerifier((hostname, session) -&gt; true)\n                .build();\n    } catch (Exception e) {\n        throw new RuntimeException(e);\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5882, "user_id": 4598169, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42f0c50fc77c68c1b4bc96740d701fd4?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun", "link": "https://stackoverflow.com/users/4598169/tarun"}, "is_accepted": false, "score": 1, "last_activity_date": 1577714803, "creation_date": 1577714803, "answer_id": 59532160, "question_id": 37686625, "link": "https://stackoverflow.com/questions/37686625/disable-ssl-certificate-check-in-retrofit-library/59532160#59532160", "title": "Disable SSL certificate check in retrofit library", "body": "<p>Adding code for doing same in Kotlin based on @Hitesh Sahu's answer : </p>\n\n<pre><code>fun getRetrofirApiService(currentBaseURL: String): YourAPIService{\n    val TIMEOUT = 2L\n    val logging = HttpLoggingInterceptor()\n    logging.setLevel(HttpLoggingInterceptor.Level.BODY)\n\n    val retrofit = Retrofit.Builder()\n        .baseUrl(currentBaseURL)\n        .addCallAdapterFactory(RxJava2CallAdapterFactory.create())\n        .addConverterFactory(NullOnEmptyConverterFactory())\n        .addConverterFactory(GsonConverterFactory.create())\n        .client(createOkHttpClient())\n        .build()\n    return retrofit.create(APIService::class.java)\n}\n</code></pre>\n\n<p>Now create Http client for same as shown below :</p>\n\n<pre><code>private fun createOkHttpClient(): OkHttpClient {\n    return try {\n        val trustAllCerts: Array&lt;TrustManager&gt; = arrayOf(MyManager())\n        val sslContext = SSLContext.getInstance(\"SSL\")\n        sslContext.init(null, trustAllCerts, SecureRandom())\n        val logging = HttpLoggingInterceptor()\n        logging.level = HttpLoggingInterceptor.Level.BODY\n        OkHttpClient.Builder()\n            .sslSocketFactory(sslContext.getSocketFactory())\n            .addInterceptor(logging)\n            .hostnameVerifier { hostname: String?, session: SSLSession? -&gt; true }\n            .build()\n    } catch (e: Exception) {\n        throw RuntimeException(e)\n    }\n}\n</code></pre>\n\n<p>MyManager class is as shown below : </p>\n\n<pre><code>class MyManager : X509TrustManager {\n\n    override fun checkServerTrusted(\n        p0: Array&lt;out java.security.cert.X509Certificate&gt;?,\n        p1: String?\n    ) {\n        //allow all\n    }\n\n    override fun checkClientTrusted(\n        p0: Array&lt;out java.security.cert.X509Certificate&gt;?,\n        p1: String?\n    ) {\n        //allow all\n    }\n\n    override fun getAcceptedIssuers(): Array&lt;java.security.cert.X509Certificate&gt; {\n        return arrayOf()\n    }\n}\n</code></pre>\n\n<p>Imports for same are as shown below : </p>\n\n<pre><code>    import okhttp3.MediaType\n    import okhttp3.OkHttpClient\n    import okhttp3.RequestBody\n    import okhttp3.logging.HttpLoggingInterceptor\n    import retrofit2.Retrofit\n    import retrofit2.adapter.rxjava2.Result\n    import retrofit2.adapter.rxjava2.RxJava2CallAdapterFactory\n    import retrofit2.converter.gson.GsonConverterFactory\n    import java.security.SecureRandom\n    import java.util.concurrent.TimeUnit\n    import javax.net.ssl.SSLContext\n    import javax.net.ssl.SSLSession\n    import javax.net.ssl.TrustManager\n    import javax.net.ssl.X509TrustManager\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7300, "user_id": 3240381, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/n4mkr.png?s=128&g=1", "display_name": "Cabezas", "link": "https://stackoverflow.com/users/3240381/cabezas"}, "is_accepted": false, "score": 3, "last_activity_date": 1597335197, "creation_date": 1597335197, "answer_id": 63399149, "question_id": 37686625, "link": "https://stackoverflow.com/questions/37686625/disable-ssl-certificate-check-in-retrofit-library/63399149#63399149", "title": "Disable SSL certificate check in retrofit library", "body": "<p>In my case I solved like this with kotlin:</p>\n<pre><code>object Instance {\n\n    private const val BASE_URL: String = &quot;https://base_url/&quot;\n\n    val service: Service by lazy {\n        Retrofit\n            .Builder()\n            .baseUrl(BASE_URL)\n            .client(getUnsafeOkHttpClient())\n            .build().create(Service::class.java)\n    }\n    private fun getUnsafeOkHttpClient(): OkHttpClient? {\n        return try {\n            // Create a trust manager that does not validate certificate chains\n            val trustAllCerts = arrayOf&lt;TrustManager&gt;(\n                object : X509TrustManager {\n                    @Throws(CertificateException::class)\n                    override fun checkClientTrusted(\n                        chain: Array&lt;X509Certificate?&gt;?,\n                        authType: String?\n                    ) {\n                    }\n\n                    @Throws(CertificateException::class)\n                    override fun checkServerTrusted(\n                        chain: Array&lt;X509Certificate?&gt;?,\n                        authType: String?\n                    ) {\n                    }\n\n                    override fun getAcceptedIssuers(): Array&lt;X509Certificate?&gt;? {\n                        return arrayOf()\n                    }\n                }\n            )\n\n            // Install the all-trusting trust manager\n            val sslContext = SSLContext.getInstance(&quot;SSL&quot;)\n            sslContext.init(null, trustAllCerts, SecureRandom())\n            // Create an ssl socket factory with our all-trusting manager\n            val sslSocketFactory = sslContext.socketFactory\n            val trustManagerFactory: TrustManagerFactory =\n                TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm())\n            trustManagerFactory.init(null as KeyStore?)\n            val trustManagers: Array&lt;TrustManager&gt; =\n                trustManagerFactory.trustManagers\n            check(!(trustManagers.size != 1 || trustManagers[0] !is X509TrustManager)) {\n                &quot;Unexpected default trust managers:&quot; + trustManagers.contentToString()\n            }\n\n            val trustManager =\n                trustManagers[0] as X509TrustManager\n\n\n            val builder = OkHttpClient.Builder()\n            builder.sslSocketFactory(sslSocketFactory, trustManager)\n            builder.hostnameVerifier(HostnameVerifier { _, _ -&gt; true })\n            builder.build()\n        } catch (e: Exception) {\n            throw RuntimeException(e)\n        }\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5893, "user_id": 1782954, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b212b5aab981e974ee59394bbfbd2199?s=128&d=identicon&r=PG", "display_name": "javabeangrinder", "link": "https://stackoverflow.com/users/1782954/javabeangrinder"}, "is_accepted": false, "score": 1, "last_activity_date": 1597414552, "creation_date": 1597414552, "answer_id": 63414523, "question_id": 37686625, "link": "https://stackoverflow.com/questions/37686625/disable-ssl-certificate-check-in-retrofit-library/63414523#63414523", "title": "Disable SSL certificate check in retrofit library", "body": "<p>I tried @whirlwin's solution on this page but that didn't work with java 9+. Some small changes resulted in this:</p>\n<pre><code>    private static OkHttpClient createTrustingOkHttpClient() {\n    try {\n        X509TrustManager x509TrustManager = new X509TrustManager() {\n            @Override\n            public void checkClientTrusted(java.security.cert.X509Certificate[] chain, String authType) {}\n\n            @Override\n            public void checkServerTrusted(java.security.cert.X509Certificate[] chain, String authType) {}\n\n            @Override\n            public java.security.cert.X509Certificate[] getAcceptedIssuers() {\n                return new java.security.cert.X509Certificate[]{};\n            }\n        };\n        final TrustManager[] trustAllCerts = new TrustManager[] {\n                x509TrustManager\n        };\n        final SSLContext sslContext = SSLContext.getInstance(&quot;SSL&quot;);\n        sslContext.init(null, trustAllCerts, new java.security.SecureRandom());\n        return new OkHttpClient.Builder()\n                .sslSocketFactory(sslContext.getSocketFactory(), x509TrustManager)\n                .hostnameVerifier((hostname, session) -&gt; true)\n                .build();\n    } catch (Exception e) {\n        throw new RuntimeException(e);\n    }\n}\n</code></pre>\n<p>And this worked for me as you can imagine. Happy days! Still, be careful when using this.</p>\n"}], "owner": {"reputation": 5033, "user_id": 3067928, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/16fa1506d4412e204a64ccee50998fd8?s=128&d=identicon&r=PG&f=1", "display_name": "Ronak Patel", "link": "https://stackoverflow.com/users/3067928/ronak-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37208, "favorite_count": 11, "answer_count": 7, "score": 19, "last_activity_date": 1612807261, "creation_date": 1465323796, "last_edit_date": 1577714860, "question_id": 37686625, "link": "https://stackoverflow.com/questions/37686625/disable-ssl-certificate-check-in-retrofit-library", "title": "Disable SSL certificate check in retrofit library", "body": "<p>I am using retrofit in android to connect with server.</p>\n\n<pre><code>public class ApiClient {\n    public static final String BASE_URL = \"https://example.com/\";\n    private static Retrofit retrofit = null;\n\n    public static Retrofit getClient() {\n        if (retrofit==null) {\n            retrofit = new Retrofit.Builder()\n                    .baseUrl(BASE_URL)\n                    .addConverterFactory(GsonConverterFactory.create())\n                    .build();\n        }\n        return retrofit;\n    }\n}\n</code></pre>\n\n<p>This is my dev. server and I want to disable certificate check. How can I implement in this code?</p>\n\n<blockquote>\n  <p>ERROR: javax.net.ssl.SSLHandshakeException: java.security.cert.CertPathValidatorException: Trust anchor for certification path not found.</p>\n</blockquote>\n"}, {"tags": ["java", "intellij-idea", "gradle", "build", "kotlin"], "comments": [{"owner": {"reputation": 9688, "user_id": 1402641, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/befad7c8ccbe09dc47c507242d3744cd?s=128&d=identicon&r=PG", "display_name": "Marcin Kozi\u0144ski", "link": "https://stackoverflow.com/users/1402641/marcin-kozi%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1465456424, "post_id": 37676679, "comment_id": 62910841, "body": "What problem are you getting with posting code in a correct format? You should be able to paste in your code into the text field, select it all and just choose &quot;Code sample&quot; button at the top of the text field. The icon looks like this: <code>{}</code>. Or you can hit Ctrl+K after selecting text."}, {"owner": {"reputation": 435, "user_id": 6063999, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/a136dda6e51a00e34ea9578bbc9e4b16?s=128&d=identicon&r=PG&f=1", "display_name": "Ives", "link": "https://stackoverflow.com/users/6063999/ives"}, "reply_to_user": {"reputation": 9688, "user_id": 1402641, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/befad7c8ccbe09dc47c507242d3744cd?s=128&d=identicon&r=PG", "display_name": "Marcin Kozi\u0144ski", "link": "https://stackoverflow.com/users/1402641/marcin-kozi%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1465460228, "post_id": 37676679, "comment_id": 62913159, "body": "thank you, ctrl+K is work, if i use icon it can&#39;t be contain in correctly format."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1465571689, "post_id": 37676679, "comment_id": 62972984, "body": "There is a current issue with Gradle + Kotlin and the daemon, you will find that it references an old version of a class instead of a new.  So you receive unresolved references in this case.  Try <code>.&#47;gradlew --stop</code> to stop the daemon, then do a clean build and see if it fixes the problem.  or <code>.&#47;gradlew --no-daemon</code> when building to check."}], "owner": {"reputation": 435, "user_id": 6063999, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/a136dda6e51a00e34ea9578bbc9e4b16?s=128&d=identicon&r=PG&f=1", "display_name": "Ives", "link": "https://stackoverflow.com/users/6063999/ives"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 893, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1465460155, "creation_date": 1465294888, "last_edit_date": 1465460155, "question_id": 37676679, "link": "https://stackoverflow.com/questions/37676679/kotlin-project-cant-be-build-in-gradlecan-not-find-reference", "title": "kotlin project can&#39;t be build in gradle(can not find reference)", "body": "<p>I have a java project that write in kotlin ,i use intelliJ IDEA to develop this project. I have trouble on the dependencies setting (multiple project). I already read lot of examples , but I can't find the workaround , here is my dependencies setting code, it can be build in java class correctly , but the kotlin class will get lot of error 'Unresolved reference' . Is that any wrong about my setting or gradle is not suitable with kotlin .</p>\n\n<p>PS : when i only build core project , build process will successful , but build at test project will get the reference unresolved error</p>\n\n<p>following is the code of build.gradle.</p>\n\n<pre><code>allprojects {\n    apply plugin: 'java'\n    apply plugin: 'kotlin'\n    group 'TestProject'\n    version '1.0'}\nsubprojects{\n    apply plugin:  'java'\n    apply plugin: 'kotlin'\n    def defaultEncoding = 'UTF-8'\n    compileJava.options.encoding = defaultEncoding\n    sourceCompatibility = 1.8\n    targetCompatibility = 1.8\n\n    repositories {\n        mavenCentral()\n        mavenLocal()}\n\n    dependencies {\n        // Kotlin\n        compile \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n        compile \"org.jetbrains.kotlin:kotlin-reflect:$kotlin_version\"\n        compile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n        testCompile group: 'junit', name: 'junit', version: '4.11'\n        // JDOM\n        compile \"org.jdom:jdom:$jdom_version\"\n        // Jaxen\n        compile group: 'jaxen', name: 'jaxen', version: '1.1.6'\n        // JUnit\n        compile \"junit:junit:$junit_version\"\n        // Log4j2\n        compile \"org.apache.logging.log4j:log4j-api:2.5\"\n        compile \"org.apache.logging.log4j:log4j-core:2.5\"\n        // JOGL\n        String[] versions = \"$jogl_version\".split(\"\\\\.\")\n        if (Integer.parseInt(versions[0]) &gt;= 2 &amp;&amp;  Integer.parseInt(versions[1]) &gt;= 2) {  \n            compile \"org.jogamp.gluegen:gluegen-rt:$jogl_version\"\n            compile \"org.jogamp.jogl:jogl-all:$jogl_version\"\n            println \"JOGL 2.2.0 later\"\n        } else {      \n            compile files(\"../libs/thirdparty/jogl/jogl-2/jar/jogl-all.jar\")\n            compile files(\"../libs/thirdparty/jogl/jogl-2/jar/gluegen-rt.jar\")\n            println \"JOGL 2.1.5 before\"}\n        runtime \"org.jogamp.gluegen:gluegen-rt:$jogl_version:natives-linux-amd64\"\n        runtime \"org.jogamp.gluegen:gluegen-rt:$jogl_version:natives-linux-i586\"\n        runtime \"org.jogamp.gluegen:gluegen-rt:$jogl_version:natives-macosx-universal\"\n        runtime \"org.jogamp.gluegen:gluegen-rt:$jogl_version:natives-windows-amd64\"\n        runtime \"org.jogamp.gluegen:gluegen-rt:$jogl_version:natives-windows-i586\"\n        runtime \"org.jogamp.jogl:jogl-all:$jogl_version:natives-linux-amd64\"\n        runtime \"org.jogamp.jogl:jogl-all:$jogl_version:natives-linux-i586\"\n        runtime \"org.jogamp.jogl:jogl-all:$jogl_version:natives-macosx-universal\"\n        runtime \"org.jogamp.jogl:jogl-all:$jogl_version:natives-windows-amd64\"\n        runtime \"org.jogamp.jogl:jogl-all:$jogl_version:natives-windows-i586\"\n\n        testCompile \"junit:junit:$junit_version\"\n        testCompile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n        testCompile \"org.jetbrains.kotlin:kotlin-test:$kotlin_version\"\n\n        // Jython\n        compile 'org.python:jython-standalone:2.7.0'\n        // RxKotlin\n        compile 'io.reactivex:rxkotlin:0.55.0'\n        compile 'io.reactivex:rxswing:0.24.0'\n        // Mockito\n        compile 'org.mockito:mockito-all:1.9.5'  \n        compile 'args4j:args4j:2.33'\n\n        compile 'org.json:json:20160212'\n        // Lombok\n        compile \"org.projectlombok:lombok:$lombok_version\"}\n\n    sourceSets.main.java.srcDirs = ['src']\n\n    sourceSets.main.kotlin.srcDirs = ['src']\n\n    sourceSets.main.resources.srcDirs = ['../res','src']\n\n    sourceSets.test.java.srcDirs = ['test']\n\n    sourceSets.test.kotlin.srcDirs = ['test']\n\n    sourceSets.test.resources.srcDirs = ['../res','src']\n\n    buildDir = 'build'}\n\nbuildscript {\n    // JOGL \n    ext.jogl_version = '2.1.0'\n\n    // Kotlin \n    ext.kotlin_version = '1.0.1'\n\n    // JUnit \n    ext.junit_version = '4.12'\n\n    // JDOM \n    ext.jdom_version = '1.1'\n\n    // Lombok \n    ext.lombok_version ='1.16.8'\n\n    repositories {\n        flatDir { dirs \"lib\" }\n        mavenLocal()\n        mavenCentral()}\n    dependencies {\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"}}\n\ndependencies {\n    buildDir = 'out'}\n\nsourceCompatibility = 1.8\n\nproject(':mainproject') {\n    dependencies {\n        compile project(':core')\n        compile project(':movie')}}\n\nproject(':movie'){\n    dependencies{\n        compile project(':core')}}\n</code></pre>\n"}, {"tags": ["java", "lambda", "kotlin", "anonymous"], "answers": [{"tags": [], "owner": {"reputation": 6549, "user_id": 1148030, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/IdZzM.jpg?s=128&g=1", "display_name": "Peter Lamberg", "link": "https://stackoverflow.com/users/1148030/peter-lamberg"}, "is_accepted": false, "score": 2, "last_activity_date": 1465282102, "last_edit_date": 1465282102, "creation_date": 1465281108, "answer_id": 37672036, "question_id": 37672023, "link": "https://stackoverflow.com/questions/37672023/how-to-create-an-instance-of-anonymous-interface-in-kotlin/37672036#37672036", "title": "How to create an instance of anonymous interface in Kotlin?", "body": "<p>The simplest answer probably is the Kotlin's lambda:</p>\n\n<pre><code>val handler = Handler&lt;MyContext&gt; {\n  println(\"Hello world\")\n}\n\nhandler.call(myContext) // Prints \"Hello world\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 2, "creation_date": 1465341066, "post_id": 37672334, "comment_id": 62858233, "body": "<code>acceptHandler { println(&quot;Hello: $it&quot;)}</code> would also work in most cases"}, {"owner": {"reputation": 50744, "user_id": 835883, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/n7jEz.png?s=128&g=1", "display_name": "j2emanue", "link": "https://stackoverflow.com/users/835883/j2emanue"}, "edited": false, "score": 5, "creation_date": 1546232619, "post_id": 37672334, "comment_id": 94804891, "body": "For anyone struggling . i think the interface must be declared in java. i think SAM conversion not working for kotlin interfaces.   if its a kotlin interface you have to use the object:Handler{}  way.   per here:  <a href=\"https://youtrack.jetbrains.com/issue/KT-7770\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-7770</a> ."}, {"owner": {"reputation": 11193, "user_id": 21399, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d80da33cc7d28b76bb5911bd0d1d056d?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/21399/nick"}, "edited": false, "score": 4, "creation_date": 1599230418, "post_id": 37672334, "comment_id": 112719123, "body": "You can do this with a Kotlin interface as of 1.4 - you just declare it as a <code>fun interface</code>."}, {"owner": {"reputation": 12398, "user_id": 1310566, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/5qiMO.jpg?s=128&g=1", "display_name": "Simon Forsberg", "link": "https://stackoverflow.com/users/1310566/simon-forsberg"}, "reply_to_user": {"reputation": 11193, "user_id": 21399, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d80da33cc7d28b76bb5911bd0d1d056d?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/21399/nick"}, "edited": false, "score": 0, "creation_date": 1617564323, "post_id": 37672334, "comment_id": 118334310, "body": "@Nick I&#39;d recommend adding that as a separate answer, or editing it into this answer"}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 156, "last_activity_date": 1618128861, "last_edit_date": 1618128861, "creation_date": 1465282143, "answer_id": 37672334, "question_id": 37672023, "link": "https://stackoverflow.com/questions/37672023/how-to-create-an-instance-of-anonymous-interface-in-kotlin/37672334#37672334", "title": "How to create an instance of anonymous interface in Kotlin?", "body": "<p>Assuming the interface has only a single method you can make use of <a href=\"https://kotlinlang.org/docs/reference/java-interop.html#sam-conversions\" rel=\"nofollow noreferrer\">SAM</a>.</p>\n<pre><code>val handler = Handler&lt;String&gt; { println(&quot;Hello: $it&quot;) }\n</code></pre>\n<p>Since version 1.4 Kotlin supports SAM for interfaces defined in Kotlin. That requires prefixing the <code>interface</code> keyword with <code>fun</code></p>\n<pre><code>fun interface Handler&lt;C&gt; {\n  fun call(context: C);\n}\n</code></pre>\n<p>If you have a method that accepts a handler then you can even omit type arguments:</p>\n<pre><code>fun acceptHandler(handler:Handler&lt;String&gt;){}\n\nacceptHandler(Handler { println(&quot;Hello: $it&quot;) })\n\nacceptHandler({ println(&quot;Hello: $it&quot;) })\n\nacceptHandler { println(&quot;Hello: $it&quot;) }\n</code></pre>\n<p>If the interface has more than one method the syntax is a bit more verbose:</p>\n<pre><code>val handler = object: Handler2&lt;String&gt; {\n    override fun call(context: String?) { println(&quot;Call: $context&quot;) }\n    override fun run(context: String?) { println(&quot;Run: $context&quot;)  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2337, "user_id": 2171513, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c3d5c945dc5a0888b8b0c5635cf04ff4?s=128&d=identicon&r=PG", "display_name": "Aalap", "link": "https://stackoverflow.com/users/2171513/aalap"}, "is_accepted": false, "score": 19, "last_activity_date": 1595503890, "last_edit_date": 1595503890, "creation_date": 1546252792, "answer_id": 53986465, "question_id": 37672023, "link": "https://stackoverflow.com/questions/37672023/how-to-create-an-instance-of-anonymous-interface-in-kotlin/53986465#53986465", "title": "How to create an instance of anonymous interface in Kotlin?", "body": "<p>I had a case where I did not want to create a var for it but do it inline. The way I achieved it is</p>\n<pre><code>funA(object: InterfaceListener {\n                        override fun OnMethod1() {}\n\n                        override fun OnMethod2() {}\n})\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 709, "user_id": 6611895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pJ7gk.jpg?s=128&g=1", "display_name": "pruthwiraj.kadam", "link": "https://stackoverflow.com/users/6611895/pruthwiraj-kadam"}, "is_accepted": false, "score": 16, "last_activity_date": 1560419588, "last_edit_date": 1560419588, "creation_date": 1560417997, "answer_id": 56577394, "question_id": 37672023, "link": "https://stackoverflow.com/questions/37672023/how-to-create-an-instance-of-anonymous-interface-in-kotlin/56577394#56577394", "title": "How to create an instance of anonymous interface in Kotlin?", "body": "<pre><code>     val obj = object : MyInterface {\n         override fun function1(arg:Int) { ... }\n\n         override fun function12(arg:Int,arg:Int) { ... }\n     }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11193, "user_id": 21399, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d80da33cc7d28b76bb5911bd0d1d056d?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/21399/nick"}, "is_accepted": false, "score": 0, "last_activity_date": 1617865401, "creation_date": 1617865401, "answer_id": 66998853, "question_id": 37672023, "link": "https://stackoverflow.com/questions/37672023/how-to-create-an-instance-of-anonymous-interface-in-kotlin/66998853#66998853", "title": "How to create an instance of anonymous interface in Kotlin?", "body": "<p>As of Kotlin 1.4 you can declare a functional interface:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>fun interface Handler&lt;C&gt; {\n  fun call(context: C);\n}\n</code></pre>\n<p>and then you can create one concisely:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val handler = Handler&lt;String&gt; {\n  println(&quot;Handling $it&quot;)\n}\n</code></pre>\n<p><a href=\"https://pl.kotl.in/kii_4xIiB\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}], "owner": {"reputation": 6549, "user_id": 1148030, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/IdZzM.jpg?s=128&g=1", "display_name": "Peter Lamberg", "link": "https://stackoverflow.com/users/1148030/peter-lamberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49840, "favorite_count": 19, "accepted_answer_id": 37672334, "answer_count": 5, "score": 101, "last_activity_date": 1618128861, "creation_date": 1465281034, "last_edit_date": 1465282080, "question_id": 37672023, "link": "https://stackoverflow.com/questions/37672023/how-to-create-an-instance-of-anonymous-interface-in-kotlin", "title": "How to create an instance of anonymous interface in Kotlin?", "body": "<p>I have a third party Java library which an object with interface like this:</p>\n\n<pre><code>public interface Handler&lt;C&gt; {\n  void call(C context) throws Exception;\n}\n</code></pre>\n\n<p>How can I concisely implement it in Kotlin similar to Java anonymous class like this:</p>\n\n<pre><code>Handler&lt;MyContext&gt; handler = new Handler&lt;MyContext&gt; {\n   @Override\n   public void call(MyContext context) throws Exception {\n      System.out.println(\"Hello world\");\n   }\n}\n\nhandler.call(myContext) // Prints \"Hello world\"\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 6, "last_activity_date": 1465213801, "creation_date": 1465213801, "answer_id": 37656693, "question_id": 37656544, "link": "https://stackoverflow.com/questions/37656544/defining-size-to-a-custom-array-type-in-android-kotlin/37656693#37656693", "title": "Defining size to a custom array type in Android Kotlin", "body": "<p>You need to specify that the element type of the array is nullable:</p>\n\n<pre><code>private var dots: Array&lt;ImageView?&gt;? = null\n</code></pre>\n"}], "owner": {"reputation": 637, "user_id": 3020796, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/4Az58.png?s=128&g=1", "display_name": "Falling Into Infinity", "link": "https://stackoverflow.com/users/3020796/falling-into-infinity"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1890, "favorite_count": 1, "accepted_answer_id": 37656693, "answer_count": 1, "score": 2, "last_activity_date": 1563668946, "creation_date": 1465213395, "last_edit_date": 1465213841, "question_id": 37656544, "link": "https://stackoverflow.com/questions/37656544/defining-size-to-a-custom-array-type-in-android-kotlin", "title": "Defining size to a custom array type in Android Kotlin", "body": "<p>How to define size for any custom component based array like <strong>ImageView</strong>?</p>\n\n<p>I've tried the following code with a type mismatch error,</p>\n\n<pre><code>    private var dots: Array&lt;ImageView&gt;? = null\n    dots = arrayOfNulls&lt;ImageView&gt;(size)\n</code></pre>\n\n<p>Here's the actual Java code,</p>\n\n<pre><code>private ImageView[] dots;\ndots = new ImageView[dotsCount];\n</code></pre>\n"}, {"tags": ["unit-testing", "mockito", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "edited": false, "score": 0, "creation_date": 1465277216, "post_id": 37655955, "comment_id": 62819916, "body": "Thanks miensol. I&#39;m thinking of if I am mocking myObject, and want to test that <code>myFunctionOne</code> to verify it is calling <code>functionWithFuncParam</code>, is there a way I could supply &quot;any()&quot; for the Function Param?"}, {"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "reply_to_user": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "edited": false, "score": 0, "creation_date": 1465278873, "post_id": 37655955, "comment_id": 62820592, "body": "@Elye see my update. What is passed to <code>myObject</code> appears to me like an implementation detail - and it&#39;s generally a bad idea to rely on them in tests. One not test their behavior together and not rely on mocks?"}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 3, "last_activity_date": 1465278814, "last_edit_date": 1465278814, "creation_date": 1465211571, "answer_id": 37655955, "question_id": 37655431, "link": "https://stackoverflow.com/questions/37655431/kotlin-unit-testing-for-function-parameter-and-object/37655955#37655955", "title": "Kotlin Unit Testing for Function Parameter and Object", "body": "<p>Assuming <code>funcParam</code> is <code>public</code> intentionally you can test it as any other method:</p>\n\n<pre><code>class MyClass1Tests {\n    val sut = MyClass1(MyObject())\n\n    @Test\n    fun `funcParam multiplies input`() {\n        assertThat(sut.funcParam(4), equalTo(16))\n        assertThat(sut.funcParam(1), equalTo(1))\n        assertThat(sut.funcParam(0), equalTo(0))\n        assertThat(sut.funcParam(-10), equalTo(100))\n    }\n}\n</code></pre>\n\n<p>If <code>funcParam</code> is private you shouldn't test its behavior directly but only through public interface of it's containing class.</p>\n\n<p>When testing <code>functionWithFuncParam</code> you can easily supply a stub implementation of <code>(Int) -&gt; Int</code>:</p>\n\n<pre><code>class MyObjectTests {\n    val outContent = ByteArrayOutputStream().apply {\n        System.setOut(PrintStream(this))\n    }\n    val sut = MyObject()\n    @Test\n    fun `functionWithFuncParam prints function output `() {\n        sut.functionWithFuncParam { 12345678  }\n        assertThat(outContent.toString(), containsString(\"12345678\"))\n    }\n}\n</code></pre>\n\n<p>If you'd like to test <code>MyClass1</code> interaction with <code>MyObject</code> one way is to use interface implemented <code>MyObject</code> by in <code>MyClass1</code>. Usually the best choice if 2 classes are distinct collaborators in a sense that they have separate mostly unrelated behaviour:</p>\n\n<pre><code>interface FunctionalObj {\n    fun functionWithFuncParam(funcParam: (Int) -&gt; Int)\n}\nclass MyClass1(val myObject: FunctionalObj) {\n//omitted for brevity\n}\nclass MyClass1Tests {\n    var params = mutableListOf&lt;(Int)-&gt;Int&gt;()\n    val sut = MyClass1(object: FunctionalObj {\n        override fun functionWithFuncParam(funcParam: (Int) -&gt; Int) { params.add(funcParam) }\n    })\n\n    @Test\n    fun `myFunctionOne calls delegate`() {\n        sut.myFunctionOne()\n        assertThat(params.size, equalTo(1))\n        assertThat(params[0], equalTo(sut.funcParam))//only if `funcParam` is public\n    }\n}\n</code></pre>\n\n<p>If <code>MyClass1</code> and <code>MyObject</code> interaction is more complex (i.e. involves more calls both <a href=\"https://en.wikipedia.org/wiki/Command%E2%80%93query_separation\" rel=\"nofollow\">queries and commands</a>) it would imply that they are peers working together closely. In such case, using mocks can lead to brittle and hard to write tests.</p>\n"}], "owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2776, "favorite_count": 0, "accepted_answer_id": 37655955, "answer_count": 1, "score": 2, "last_activity_date": 1465278814, "creation_date": 1465210012, "question_id": 37655431, "link": "https://stackoverflow.com/questions/37655431/kotlin-unit-testing-for-function-parameter-and-object", "title": "Kotlin Unit Testing for Function Parameter and Object", "body": "<p>In Kotlin,, we could have function object and pass in as function parameter. </p>\n\n<ol>\n<li>How to create unit test to test the function object logic? (e.g. <code>funcParam</code> below)</li>\n<li><p>How to unit test the function that has function parameter? (e.g. <code>functionWithFuncParam</code> below) - i.e. can I create a Mock for <code>funcParam</code>?</p>\n\n<pre><code>class MyClass1(val myObject: MyObject) {\n    val funcParam = fun (num: Int): Int {\n        return num * num\n    }\n\n    fun myFunctionOne() {\n        myObject.functionWithFuncParam(funcParam)\n    }\n}\n\nclass MyObject () {\n    fun functionWithFuncParam(funcParam: (Int) -&gt; Int) {\n        println(funcParam(32))\n    }\n}\n</code></pre></li>\n</ol>\n"}, {"tags": ["maven", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1043, "user_id": 98476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d87a40397fc684e62d312d221ed901bb?s=128&d=identicon&r=PG", "display_name": "Gareth", "link": "https://stackoverflow.com/users/98476/gareth"}, "edited": false, "score": 0, "creation_date": 1608287052, "post_id": 37716591, "comment_id": 115542687, "body": "Although note that you have a mixed java/kotlin test codebase then you probably want <code>process-test-sources</code> as the phase for your test-compile"}, {"owner": {"reputation": 734, "user_id": 2659499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4ee20e70d51946dbd8e2029151804bcb?s=128&d=identicon&r=PG", "display_name": "Vahid", "link": "https://stackoverflow.com/users/2659499/vahid"}, "edited": false, "score": 0, "creation_date": 1616443709, "post_id": 37716591, "comment_id": 117999909, "body": "@llya, what you explained makes sense and actually worked for me but what confuses me is that reading <a href=\"https://kotlinlang.org/docs/maven.html#compile-kotlin-and-java-sources\" rel=\"nofollow noreferrer\">Compile Kotlin &amp; Java sources</a>, it is mentioned that by just adding Kotlin plugin before maven compiler, one can compile a mixed project. I tried it and it did not work. I had to bind Kotlin to <code>process-sources</code> phase to make it work. Do you know the reason behind what the actual documentation is suggesting?"}], "tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": true, "score": 17, "last_activity_date": 1465445044, "creation_date": 1465445044, "answer_id": 37716591, "question_id": 37652948, "link": "https://stackoverflow.com/questions/37652948/kotlin-maven-plugin-order-of-compilation/37716591#37716591", "title": "Kotlin maven plugin order of compilation", "body": "<p>Kotlin compiler can parse java sources, so you could reference java classes in your kotlin code, even if those classes have not been compiled yet.</p>\n\n<p>After Kotlin compiler had compiled kotlin code, Java compiler could compile those java classes taking compiled kotlin classes as a dependency.</p>\n\n<p>So, answering your question, yes \u2014 Kotlin compiler plugin must be executed before java compiler plugin in a project that mixes kotlin and java sources. This is achieved by scheduling the execution on the earlier phase of build, namely <code>process-sources</code>.</p>\n\n<p>Here is the example of kotlin maven plugin configuration for mixed Kotlin-Java maven module:</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n    &lt;artifactId&gt;kotlin-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;${kotlin.version}&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;compile&lt;/id&gt;\n            &lt;phase&gt;process-sources&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;compile&lt;/goal&gt;\n            &lt;/goals&gt;\n        &lt;/execution&gt;\n        &lt;execution&gt;\n            &lt;id&gt;test-compile&lt;/id&gt;\n            &lt;phase&gt;test-compile&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;test-compile&lt;/goal&gt;\n            &lt;/goals&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4323, "user_id": 2486846, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/H8MCN.png?s=128&g=1", "display_name": "Daniel Oliveira", "link": "https://stackoverflow.com/users/2486846/daniel-oliveira"}, "edited": false, "score": 0, "creation_date": 1520005334, "post_id": 47550724, "comment_id": 85150567, "body": "The official documentation did not work for me, because the &quot;phase&quot; on this doc says &quot;compile&quot; but actually it should run on &quot;process-sources&quot;."}], "tags": [], "owner": {"reputation": 591, "user_id": 1898348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7fd1cb575799fa7dd88d2b17408f748?s=128&d=identicon&r=PG&f=1", "display_name": "jjoller", "link": "https://stackoverflow.com/users/1898348/jjoller"}, "is_accepted": false, "score": 2, "last_activity_date": 1511951829, "creation_date": 1511951829, "answer_id": 47550724, "question_id": 37652948, "link": "https://stackoverflow.com/questions/37652948/kotlin-maven-plugin-order-of-compilation/47550724#47550724", "title": "Kotlin maven plugin order of compilation", "body": "<p>In order to compile a project that contains both, Kotlin and Java code, you have to make sure that the Kotlin compiler runs before the Java compiler. I configured the compile plugins as described in the <a href=\"https://kotlinlang.org/docs/reference/using-maven.html\" rel=\"nofollow noreferrer\">official Kotlin documentation</a> and it worked like a charm: </p>\n\n<pre><code>        &lt;plugin&gt;\n            &lt;artifactId&gt;kotlin-maven-plugin&lt;/artifactId&gt;\n            &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n            &lt;version&gt;${kotlin.version}&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;compile&lt;/id&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;compile&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;test-compile&lt;/id&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;test-compile&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;version&gt;3.5.1&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;1.8&lt;/source&gt;\n                &lt;target&gt;1.8&lt;/target&gt;\n            &lt;/configuration&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;default-compile&lt;/id&gt;\n                    &lt;phase&gt;none&lt;/phase&gt;\n                &lt;/execution&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;default-testCompile&lt;/id&gt;\n                    &lt;phase&gt;none&lt;/phase&gt;\n                &lt;/execution&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;java-compile&lt;/id&gt;\n                    &lt;phase&gt;compile&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;compile&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;java-test-compile&lt;/id&gt;\n                    &lt;phase&gt;test-compile&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;testCompile&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n</code></pre>\n"}], "owner": {"reputation": 4441, "user_id": 1716487, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/cb7969a127a12e8707cfa9fb95431d58?s=128&d=identicon&r=PG", "display_name": "morpheus05", "link": "https://stackoverflow.com/users/1716487/morpheus05"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2704, "favorite_count": 2, "accepted_answer_id": 37716591, "answer_count": 2, "score": 6, "last_activity_date": 1511951829, "creation_date": 1465202309, "last_edit_date": 1465291551, "question_id": 37652948, "link": "https://stackoverflow.com/questions/37652948/kotlin-maven-plugin-order-of-compilation", "title": "Kotlin maven plugin order of compilation", "body": "<p>I have a question regarding the kotlin-maven plugin: \nHow is the order of compilation determined? \nI mean: Must the kotlin compiler come first? Does it understand java code? The java compiler doesn't understand kotlin code, so I guess it checks against the byte code, but for this, the bytecode for kotlin must be present, so someone has to determine that the kotline compiler must compile its code before javac. </p>\n\n<p>Example: I have java Class A that depends on Kotlin Class B and B also depends on A.</p>\n\n<p>Do I have to do something manually in the maven plugin by declare it before the java maven compiler?</p>\n"}, {"tags": ["android", "rx-java", "kotlin", "observable"], "comments": [{"owner": {"reputation": 1918, "user_id": 388142, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c927cb4c497268fe679b1e64b30e1810?s=128&d=identicon&r=PG", "display_name": "erkangur", "link": "https://stackoverflow.com/users/388142/erkangur"}, "edited": false, "score": 0, "creation_date": 1465467415, "post_id": 37645886, "comment_id": 62917722, "body": "Your <code>fetchItem</code> function can return an error instead of <code>null</code>, so you can use error handling operators instead of checking for null."}], "answers": [{"tags": [], "owner": {"reputation": 5504, "user_id": 2929266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/655498081d822322f4346139997e4ee9?s=128&d=identicon&r=PG&f=1", "display_name": "kjones", "link": "https://stackoverflow.com/users/2929266/kjones"}, "is_accepted": false, "score": 0, "last_activity_date": 1465533925, "creation_date": 1465533925, "answer_id": 37740086, "question_id": 37645886, "link": "https://stackoverflow.com/questions/37645886/merging-data-from-different-observables-and-choosing-different-fetching-strateg/37740086#37740086", "title": "Merging data from different Observables, and choosing different fetching strategies, depending on data availability", "body": "<p>I don't know Kotlin syntax, but here is a Java example that you can translate. It requires <code>cache.fetchItem(itemId)</code> to complete instead of emitting a <code>null</code> when the item is not in the cache.</p>\n\n<p>If <code>cacheFetch</code> emits an item, the <code>flatMap()</code> will ensure that the item has the text and fetch it from the network if needed.</p>\n\n<p>If there is nothing in cache, <code>fullFetch</code> will get it from the network. </p>\n\n<p><code>concatWith(fullFetch).take(1)</code> will ensure that <code>fullFetch</code> is only subscribed to if there is nothing in cache.</p>\n\n<p>The item is only saved to cache if it was updated.</p>\n\n<pre><code>Observable&lt;Item&gt; cacheFetch = cache.fetchItem(itemId);\nObservable&lt;Item&gt; fullFetch =\n  Observable\n    .zip(\n      api1.fetchItem(itemId),\n      api2.fetchItem(itemId),\n      (item, itemText) -&gt; {\n          item.text = itemText;\n          return item;\n      })\n    .doOnNext(cache::saveOrUpdateItem);\n\nObservable&lt;Item&gt; resultObservable =\n  cacheFetch\n    .flatMap(item -&gt; {\n      if (item.text != null &amp;&amp; !item.text.isEmpty()) {\n        return Observable.just(item);\n      }\n      return api2\n        .fetchItem(itemId)\n        .map(itemText -&gt; {\n          item.text = itemText;\n          return item;\n        })\n        .doOnNext(cache::saveOrUpdateItem);\n    })\n    .concatWith(fullFetch)\n    .take(1);\n  }\n</code></pre>\n"}], "owner": {"reputation": 3694, "user_id": 1107412, "user_type": "registered", "accept_rate": 37, "profile_image": "https://i.stack.imgur.com/96ODm.png?s=128&g=1", "display_name": "Preslav Rachev", "link": "https://stackoverflow.com/users/1107412/preslav-rachev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1465533925, "creation_date": 1465154750, "question_id": 37645886, "link": "https://stackoverflow.com/questions/37645886/merging-data-from-different-observables-and-choosing-different-fetching-strateg", "title": "Merging data from different Observables, and choosing different fetching strategies, depending on data availability", "body": "<p>I have a situation, in which, by fetching an <code>Item</code> object, one of three things should happen:</p>\n\n<ul>\n<li>If the item is not present in cache (a.k.a is null), then load data from both <code>api1</code>, and <code>api2</code>, merge the data and return an <code>Observable</code>.</li>\n<li>If the item is present in cache, but a certain piece of it is missing, load data from <code>api2</code>, and merge it with the already available data in the cache</li>\n<li>if the entire data is available in the cache, simply return it.</li>\n</ul>\n\n<p>So far, this is the best that I have managed to come up with:</p>\n\n<pre><code>val cacheObservable = cache.fetchItem(itemId);\nval api1Observable = api1.fetchItem(itemId);\nval api2Observable = api2.fetchItem(itemId);\n\nval resultObservable = cacheObservable!!.flatMap { item: Item? -&gt;\n    if (item == null) {\n        /* Get the item data, and the full text separately, then combine them */\n        Observable.zip(api1Observable, api2Observable, { itemData, itemText -&gt;\n            itemData.apply { text = itemText }\n        });\n    } else if (item.text.isNullOrEmpty()) {\n        /* Get the full text only, then add it to the already cached version */\n        cacheObservable.zipWith(api2Observable, { cachedItem, itemText -&gt; cachedItem.apply { text = itemText; } });\n    } else {\n        /* if the data and the full text are provided, simply return */\n        Observable.just(item);\n    }\n}.doOnNext { item -&gt; cache.saveOrUpdateItem(item); }\n\nreturn resultObservable;\n</code></pre>\n\n<p>This works OK, so far, but I have been wondering, if there is a more declarative way to achieve the same effect. Suggestions are welcome.</p>\n"}, {"tags": ["generics", "kotlin", "data-class"], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": false, "score": 4, "last_activity_date": 1465147631, "last_edit_date": 1495535470, "creation_date": 1465145357, "answer_id": 37644407, "question_id": 37644132, "link": "https://stackoverflow.com/questions/37644132/is-there-a-way-to-require-a-generic-type-to-be-a-data-class-in-kotlin/37644407#37644407", "title": "Is there a way to require a generic type to be a data class in Kotlin?", "body": "<p>No, <code>data</code> classes don't have any specific representation in type system and cannot be distinguished from regular classes (<a href=\"https://stackoverflow.com/questions/29069988/is-there-a-way-to-identify-a-kotlin-data-class-from-a-regular-kotlin-class\">similar question</a>).</p>\n\n<p>You can, however, require the methods a <code>data</code> class with certain number of components has using an interface (actually it will be a marker interface on <code>data</code> classes). </p>\n\n<p>Here's an example for <code>data</code> classes with two components:</p>\n\n<pre><code>interface Data2&lt;T1, T2&gt; {\n    operator fun component1(): T1\n    operator fun component2(): T2\n    fun copy(t1: T1, t2: T2): Data2&lt;T1, T2&gt;\n}\n</code></pre>\n\n<p><sup><code>toString</code>, <code>hashCode</code> and <code>equals</code> can be called on any type anyway.</sup></p>\n\n<p>Then just mark your <code>data</code> class with the interface:</p>\n\n<pre><code>data class Impl(val i: Int, val s: String): Data2&lt;Int, String&gt;\n\nval d: Data2&lt;Int, String&gt; = Impl(1, \"2\")\nval (c1, c2) = d\nval copy = d.copy(-1, d.component2())\n</code></pre>\n\n<p><code>copy</code> function is not completely type-safe because Kotlin <a href=\"https://stackoverflow.com/questions/29565043/how-to-specify-own-type-as-return-type-in-kotlin\">doesn't have self type</a> (and no way to require interface implementations to be subtype of a specific type), but if you only mark your <code>data</code> classes with it, it should work (see another option below).</p>\n\n<p>Another drawback is that you lose default parameters of <code>copy</code> method and have to call it with all the parameters specified:</p>\n\n<pre><code>val d = myD2.copy(newValue, myD2.component2())\n</code></pre>\n\n<hr>\n\n<p><sup>Another option is to define these interfaces as <code>Data2&lt;T1, T2, out Self&gt;</code>, <code>class Impl(...): Data2&lt;..., Impl&gt;</code>, and make <code>copy</code> return <code>Self</code>, but it won't make it any better if you use the interface as <code>Data2&lt;SomeType, SomeType, *&gt;</code>.</sup></p>\n"}, {"comments": [{"owner": {"reputation": 28310, "user_id": 1642079, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/OheTJ.jpg?s=128&g=1", "display_name": "Chad Bingham", "link": "https://stackoverflow.com/users/1642079/chad-bingham"}, "edited": false, "score": 0, "creation_date": 1521061126, "post_id": 37644438, "comment_id": 85578011, "body": "Is there a concern about this causing an infinite loop? Where we can&#39;t really call <code>super.copy</code>, won&#39;t it call copy recursively? I named mine <code>copyID</code> just to be sure."}, {"owner": {"reputation": 782, "user_id": 9657183, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OUKg8fgUlSM/AAAAAAAAAAI/AAAAAAAAAN0/LjmhQvBoUsU/photo.jpg?sz=128", "display_name": "Cafer Mert Ceyhan", "link": "https://stackoverflow.com/users/9657183/cafer-mert-ceyhan"}, "edited": false, "score": 1, "creation_date": 1583997013, "post_id": 37644438, "comment_id": 107300955, "body": "It&#39;s working. copy coming from data class. copy name can be clone or another."}], "tags": [], "owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "is_accepted": true, "score": 11, "last_activity_date": 1465146267, "last_edit_date": 1465146267, "creation_date": 1465145539, "answer_id": 37644438, "question_id": 37644132, "link": "https://stackoverflow.com/questions/37644132/is-there-a-way-to-require-a-generic-type-to-be-a-data-class-in-kotlin/37644438#37644438", "title": "Is there a way to require a generic type to be a data class in Kotlin?", "body": "<p>I have the feeling that what you actually want is that T should be able to copy itself with a new ID, and have an ID. Not necessarily that it is a data class. So you could just use an interface to define that. </p>\n\n<p>For example:</p>\n\n<pre><code>interface CopyableWithId&lt;out T&gt; where T: CopyableWithId&lt;T&gt; {\n    fun copy(newId: Long): T\n    val id: Long\n}\n\ndata class BarBaz(override var id: Long, var name: String): CopyableWithId&lt;BarBaz&gt; {\n    override fun copy(newId: Long): BarBaz = copy(id = newId)\n}\n\nclass Repository&lt;T&gt; where T : CopyableWithId&lt;T&gt;{\n\n    val map: MutableMap&lt;Long, CopyableWithId&lt;T&gt;&gt; = HashMap()\n\n    fun add(obj: T) {\n        val copy = obj.copy(generateID())\n        map.put(copy.id, copy)\n    }\n\n    private fun generateID(): Long {\n        return 1L\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3029, "user_id": 3278271, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c4bb5e87583adc567dccfcf71e32b606?s=128&d=identicon&r=PG&f=1", "display_name": "Arsenius", "link": "https://stackoverflow.com/users/3278271/arsenius"}, "is_accepted": false, "score": 3, "last_activity_date": 1553071874, "creation_date": 1553071874, "answer_id": 55256742, "question_id": 37644132, "link": "https://stackoverflow.com/questions/37644132/is-there-a-way-to-require-a-generic-type-to-be-a-data-class-in-kotlin/55256742#55256742", "title": "Is there a way to require a generic type to be a data class in Kotlin?", "body": "<p>You also can implement copy or component1, component2 more generalised way.</p>\n\n<p>For example:</p>\n\n<pre><code>    interface Copyable &lt;T&gt; {\n        fun copy(fields: T.() -&gt; T): T\n    }\n\n    data class BarBaz(var id: Long, var name: String): Copyable&lt;BarBaz&gt; {\n        override fun copy(fields: BarBaz.() -&gt; BarBaz): BarBaz {\n           val instance = fields(this)\n           return copy(id = instance.id, name = instance.name)\n        }\n    }\n\nclass Repository&lt;T&gt; where T : Copyable&lt;T&gt;{\n\n    val map: MutableMap&lt;Long, Copyable&lt;T&gt;&gt; = HashMap()\n\n    fun add(obj: T) {\n        val copy = obj.copy{id = generateID()}\n        map.put(copy.id, copy)\n    }\n\n    private fun generateID(): Long {\n        return 1L\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 111, "user_id": 2895083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4933a056b5d15f6f6b91711746c8d8a?s=128&d=identicon&r=PG&f=1", "display_name": "Anton", "link": "https://stackoverflow.com/users/2895083/anton"}, "is_accepted": false, "score": 0, "last_activity_date": 1598509747, "last_edit_date": 1598509747, "creation_date": 1598448678, "answer_id": 63598804, "question_id": 37644132, "link": "https://stackoverflow.com/questions/37644132/is-there-a-way-to-require-a-generic-type-to-be-a-data-class-in-kotlin/63598804#63598804", "title": "Is there a way to require a generic type to be a data class in Kotlin?", "body": "<p>Could be unrelated because I had similar but slightly different problem.</p>\n<p>I need to have moved shared logic to a super class and the issue was that I can't use <strong>copy</strong> method of generic <strong>T</strong>. I found this workaround:</p>\n<p>Entity:</p>\n<pre><code>data class MyEntity(\n    val id: String,\n    val createdAt: Instant,\n    val updatedAt: Instant\n)\n</code></pre>\n<p>Abstract Generic Repository:</p>\n<pre><code>abstract class GenericRepository&lt;T&gt; {\n\n    abstract val copyFn: KCallable&lt;T&gt;\n\n    fun add(obj: T) {\n        val instanceParameter = copyFn.instanceParameter!!\n        val idParameter = copyFn.findParameterByName(&quot;id&quot;)!!\n        val copy = copyFn.callBy(\n            mapOf(\n                instanceParameter to obj,\n                idParameter to &quot;new id&quot;\n            )\n        )\n        // Do whatever you want with the copy\n    }\n}\n</code></pre>\n<p>Or cleaner and more generic version of Abstract Generic Repository:</p>\n<pre><code>abstract class BetterGenericRepository&lt;T&gt; {\n\n    abstract val copyFn: KCallable&lt;T&gt;\n\n    fun add(obj: T): T {\n        val instanceParameter = getInstanceParameter()\n        val idParameter = getParameterByName(instanceParameter, &quot;id&quot;)\n        val updatedAtParameter = getParameterByName(instanceParameter, &quot;updatedAt&quot;)\n        val copy = copyFn.callBy(\n            mapOf(\n                instanceParameter to obj,\n                idParameter to &quot;new id&quot;,\n                updatedAtParameter to Instant.now()\n            )\n        )\n        // Do whatever you want with the copy\n        return copy\n    }\n\n    private fun getInstanceParameter() =\n        copyFn.instanceParameter\n            ?: throw RuntimeException(&quot;${copyFn.returnType} must be Data Class or its method '${copyFn.name}' must have 'instanceParameter' as KParameter&quot;)\n\n    private fun getParameterByName(instanceParameter: KParameter, name: String) =\n        copyFn.findParameterByName(name)\n            ?: throw RuntimeException(&quot;${instanceParameter.type} must have '$name' property&quot;)\n}\n</code></pre>\n<p>Specific implementation of Abstract Repository</p>\n<pre><code>class MyRepository: BetterGenericRepository&lt;MyEntity&gt;() {\n    override val copyFn = MyEntity::copy\n}\n</code></pre>\n<p>And simple check:</p>\n<pre><code>fun main() {\n    val repository = MyRepository()\n    val entity = MyEntity(\n        id = &quot;1&quot;,\n        createdAt = Instant.EPOCH,\n        updatedAt = Instant.EPOCH\n    )\n    println(entity)\n    println(repository.add(entity))\n}\n</code></pre>\n<p>The result</p>\n<pre><code>MyEntity(id=1, createdAt=1970-01-01T00:00:00Z, updatedAt=1970-01-01T00:00:00Z)\nMyEntity(id=new id, createdAt=1970-01-01T00:00:00Z, updatedAt=2020-08-26T13:29:42.982Z)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6427178"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7512, "favorite_count": 1, "accepted_answer_id": 37644438, "answer_count": 4, "score": 13, "last_activity_date": 1598509747, "creation_date": 1465143738, "question_id": 37644132, "link": "https://stackoverflow.com/questions/37644132/is-there-a-way-to-require-a-generic-type-to-be-a-data-class-in-kotlin", "title": "Is there a way to require a generic type to be a data class in Kotlin?", "body": "<p>The following does not work, but hopefully helps you understand what I mean:</p>\n\n<pre><code>class Example&lt;T : DataClass&gt;\n</code></pre>\n\n<p>In case you would like to know what I am trying to accomplish, this is an example of what I had in mind:</p>\n\n<pre><code>class Repository&lt;T&gt; where T : Entity, // Entity defines mutable property 'id'\n                          T : DataClass {\n\n  // assume there is a map here\n\n  fun add(obj: T) {\n    val copy = obj.copy(id = generateID())\n    map.put(copy.id, copy)\n  }\n\n}\n</code></pre>\n\n<p>Or is there a better way to accomplish what I am trying to do?</p>\n"}, {"tags": ["android", "gradle", "android-gradle-plugin", "kotlin", "gradle-kotlin-dsl"], "comments": [{"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 1, "creation_date": 1465200161, "post_id": 37640433, "comment_id": 62784195, "body": "As described in <a href=\"https://github.com/gradle/gradle-script-kotlin/releases/tag/v1.0.0-M1\" rel=\"nofollow noreferrer\">github.com/gradle/gradle-script-kotlin/releases/tag/v1.0.0-M&zwnj;&#8203;1</a> , at this time Gradle Script Kotlin does not support external plugins, and thus can&#39;t be used to build Android projects."}, {"owner": {"reputation": 9688, "user_id": 1402641, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/befad7c8ccbe09dc47c507242d3744cd?s=128&d=identicon&r=PG", "display_name": "Marcin Kozi\u0144ski", "link": "https://stackoverflow.com/users/1402641/marcin-kozi%c5%84ski"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1465201504, "post_id": 37640433, "comment_id": 62784909, "body": "Thanks @yole! I know about that, I&#39;ve seen discussions that you can migrate some parts of build scripts to Kotlin, that&#39;s why I said I&#39;d accept answers that convert &quot;as much as possible&quot;. So I hope people might share their attempts and hacks."}], "answers": [{"tags": [], "owner": {"reputation": 17986, "user_id": 4730812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d336a10204c1cd2e7fa47071ed629669?s=128&d=identicon&r=PG&f=1", "display_name": "piotrek1543", "link": "https://stackoverflow.com/users/4730812/piotrek1543"}, "is_accepted": false, "score": 2, "last_activity_date": 1471379505, "creation_date": 1471379505, "answer_id": 38983953, "question_id": 37640433, "link": "https://stackoverflow.com/questions/37640433/convert-android-project-to-use-gradle-script-kotlin/38983953#38983953", "title": "Convert Android project to use Gradle Script Kotlin", "body": "<p>there's already an <code>hello-android</code> example which descibe how to do it.</p>\n\n<p>Check: <a href=\"https://github.com/gradle/gradle-script-kotlin/tree/master/samples/hello-android\" rel=\"nofollow\">https://github.com/gradle/gradle-script-kotlin/tree/master/samples/hello-android</a></p>\n\n<p>Note that:</p>\n\n<blockquote>\n  <p>It has been tested against Android Studio 2.2 Preview 6 with the latest Kotlin plugin from the EAP 1.1 channel.</p>\n</blockquote>\n\n<p>Read also: <a href=\"https://github.com/gradle/gradle-script-kotlin/issues/2\" rel=\"nofollow\">https://github.com/gradle/gradle-script-kotlin/issues/2</a></p>\n\n<p>Hope it will help</p>\n"}], "owner": {"reputation": 9688, "user_id": 1402641, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/befad7c8ccbe09dc47c507242d3744cd?s=128&d=identicon&r=PG", "display_name": "Marcin Kozi\u0144ski", "link": "https://stackoverflow.com/users/1402641/marcin-kozi%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1484, "favorite_count": 3, "answer_count": 1, "score": 6, "last_activity_date": 1602084447, "creation_date": 1465119445, "last_edit_date": 1504920988, "question_id": 37640433, "link": "https://stackoverflow.com/questions/37640433/convert-android-project-to-use-gradle-script-kotlin", "title": "Convert Android project to use Gradle Script Kotlin", "body": "<p>I would like to convert <code>build.gradle</code> files in my Android projects from Groovy to Kotlin using <a href=\"https://github.com/gradle/gradle-script-kotlin\" rel=\"nofollow\">Gradle Script Kotlin</a>. Preferably I'd like all of them in Kotlin, but if there are some limitations then as much as possible.</p>\n\n<p>Lets assume I have just an empty project, freshly created from an Android Studio \"New application\" template (<code>minSdkVersion 15</code>, using AppCompat if that matters). What steps do I need to take for such project to convert it to Gradle Script Kotlin.</p>\n\n<p>I hope this should be a great starting point for me (and everybody else) and I can can handle converting any custom logic I have on my own.</p>\n"}, {"tags": ["kotlin", "kotlin-null-safety"], "comments": [{"owner": {"reputation": 69864, "user_id": 444991, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c57f597182ae324d8eb33b935f7d38af?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/444991/matt"}, "edited": false, "score": 0, "creation_date": 1466626948, "post_id": 37639524, "comment_id": 63401208, "body": "Please do not edit your question such that it invalidates existing answers. Instead, post a new question."}], "answers": [{"comments": [{"owner": {"reputation": 1465, "user_id": 3601872, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/bc3ba40e96018f0f241539ce4f6d283a?s=128&d=identicon&r=PG&f=1", "display_name": "Dina Kleper", "link": "https://stackoverflow.com/users/3601872/dina-kleper"}, "edited": false, "score": 0, "creation_date": 1465116540, "post_id": 37639620, "comment_id": 62760162, "body": "This might be a stupid question, but I thought val cannot be changed once assigned and I need to change my map in this program."}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "reply_to_user": {"reputation": 1465, "user_id": 3601872, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/bc3ba40e96018f0f241539ce4f6d283a?s=128&d=identicon&r=PG&f=1", "display_name": "Dina Kleper", "link": "https://stackoverflow.com/users/3601872/dina-kleper"}, "edited": false, "score": 0, "creation_date": 1465117286, "post_id": 37639620, "comment_id": 62760326, "body": "You need to change the <b>content</b> of the map. You can do that because the map is of type MutableMap. But you don&#39;t need to be able to replace the map by another one, i.e. assign a new value to the map variable, i.e. do <code>map = anotherMap</code>."}], "tags": [], "owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "is_accepted": false, "score": 2, "last_activity_date": 1465113396, "last_edit_date": 1465113396, "creation_date": 1465112711, "answer_id": 37639620, "question_id": 37639524, "link": "https://stackoverflow.com/questions/37639524/null-pointer-exception-working-with-map-kotlin/37639620#37639620", "title": "Null Pointer Exception working with Map (Kotlin)", "body": "<pre><code>if(kindCounter[kind]==0){\n   kindCounter[kind]=0\n}\n</code></pre>\n\n<p>This doesn't make much sense: you test if the value is 0, and if it is, you set it to 0. So it's basically a noop.</p>\n\n<p>What you want is to test if the value is null:</p>\n\n<pre><code>if (kindCounter[kind] == null) {\n   kindCounter[kind] = 0\n}\n</code></pre>\n\n<p>You could also avoid using the dangerous <code>!!</code> operator by saving the value into a variable.</p>\n\n<p>And you should really use val rather than var: all of your fields shouldn't be mutable:</p>\n\n<pre><code>class SymbolTable() {\n    val map = mutableMapOf&lt;String, Entry&gt;()\n    val kindCounter = mutableMapOf&lt;String, Int&gt;()\n\n    fun define(name: String, kind: String, type: String) {\n        val count = kindCounter[kind] ?: 0\n        map[name] = Entry(type, kind, 1)\n        kindCounter[kind] = count + 1\n    }\n}\n\nclass Entry(val type: String, val kind: String, val index: Int)\n\nfun main(args:Array&lt;String&gt;) {\n    val example = SymbolTable()\n    example.define(\"ex1\", \"ex1\", \"ex1\")\n    example.define(\"ex2\", \"ex2\", \"ex2\")\n}\n</code></pre>\n"}], "owner": {"reputation": 1465, "user_id": 3601872, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/bc3ba40e96018f0f241539ce4f6d283a?s=128&d=identicon&r=PG&f=1", "display_name": "Dina Kleper", "link": "https://stackoverflow.com/users/3601872/dina-kleper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1724, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1502691282, "creation_date": 1465111983, "last_edit_date": 1502691282, "question_id": 37639524, "link": "https://stackoverflow.com/questions/37639524/null-pointer-exception-working-with-map-kotlin", "title": "Null Pointer Exception working with Map (Kotlin)", "body": "<p>I have the following class:</p>\n\n<pre><code>class SymbolTable(){\n    var map = mutableMapOf&lt;String, Entry&gt;()\n    var kindCounter = mutableMapOf&lt;String, Int&gt;()\n\n    fun define(name:String, kind:String, type:String){\n        if(kindCounter[kind]==0){\n            kindCounter[kind]=0\n        }\n        var index = 1\n        map[name]= Entry(type, kind, index)\n        kindCounter[kind]=kindCounter[kind]!!.plus(1)\n    }\n</code></pre>\n\n<p>class Entry looks like this:</p>\n\n<pre><code>class Entry(var type:String, var kind:String, var index:Int)\n</code></pre>\n\n<p>Main:</p>\n\n<pre><code>fun main(args:Array&lt;String&gt;){\n    var example = SymbolTable()\n    example.define(\"ex1\", \"ex1\", \"ex1\")\n    example.define(\"ex2\", \"ex2\", \"ex2\")\n}\n</code></pre>\n\n<p>When I run the program and try using the \"define\" function I get the following error:</p>\n\n<pre><code>Exception in thread \"main\" kotlin.KotlinNullPointerException\n    at SymbolTable.define(SymbolTable.kt:21)\n    at SymbolTableKt.main(SymbolTable.kt:31)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:144)\n</code></pre>\n\n<p>I assume the problem has something to do with how I create a new symbolTable class, but seeing as Kotlin doesn't have \"new\" I don't know how to avoid the null pointer exception. </p>\n"}, {"tags": ["android", "android-fragments", "widget", "fragment", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 7476207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e30f0714fa55475e9507dc9d0343cd43?s=128&d=identicon&r=PG&f=1", "display_name": "Xiang Peng", "link": "https://stackoverflow.com/users/7476207/xiang-peng"}, "is_accepted": false, "score": 0, "last_activity_date": 1486492815, "creation_date": 1486492815, "answer_id": 42097470, "question_id": 37632536, "link": "https://stackoverflow.com/questions/37632536/show-a-fragment-in-an-android-widget/42097470#42097470", "title": "Show a fragment in an android widget", "body": "<p>First of all, please check out this documentation: <a href=\"https://developer.android.com/guide/topics/appwidgets/index.html#CreatingLayout\" rel=\"nofollow noreferrer\">https://developer.android.com/guide/topics/appwidgets/index.html#CreatingLayout</a></p>\n\n<p>This section specifically explained what a widget layout could use, it provides you a list with all available layout classes and widget classes. If anything that's not on the list, it will not work on a widget. </p>\n\n<p>If you could dig into there class source file, some of them you should see  - @RemoteView at the beginning, this means the class is good for widget; if a class does not have this mark, it means you can't use it in widget.</p>\n"}], "owner": {"reputation": 801, "user_id": 1382827, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ad6fb14f386fdbd82584bd90b6372d7a?s=128&d=identicon&r=PG", "display_name": "Samyn", "link": "https://stackoverflow.com/users/1382827/samyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1692, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1486492815, "creation_date": 1465057729, "question_id": 37632536, "link": "https://stackoverflow.com/questions/37632536/show-a-fragment-in-an-android-widget", "title": "Show a fragment in an android widget", "body": "<p>I want to show a widget, which loads an already working fragment in the widget space. I can't seem to find any documentation that handles loading fragments into a widget though? Can anyone help me out?</p>\n\n<p><em>widget_current.xml</em></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n          android:orientation=\"vertical\"\n          android:layout_width=\"match_parent\"\n          android:layout_height=\"match_parent\"&gt;\n&lt;fragment android:layout_width=\"match_parent\" \n          android:layout_height=\"match_parent\"\n          android:id=\"@+id/widgetCurrent\" /&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p><em>widget_provider.xml</em></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;appwidget-provider xmlns:android=\"http://schemas.android.com/apk/res/android\"\n                android:minWidth=\"40dp\"\n                android:minHeight=\"40dp\"\n                android:updatePeriodMillis=\"86400000\"\n                android:initialLayout=\"@layout/widget_current\"\n                android:resizeMode=\"horizontal|vertical\"\n                android:widgetCategory=\"home_screen\"&gt;\n&lt;/appwidget-provider&gt;\n</code></pre>\n\n<p><em>UpcomingEventWidgets.kt</em></p>\n\n<pre><code>class UpcomingEventsWidget: AppWidgetProvider() {\noverride fun onUpdate(context: Context, appWidgetManager: AppWidgetManager, appWidgetIds: IntArray) {\n    super.onUpdate(context, appWidgetManager, appWidgetIds)\n\n    val remoteView = RemoteViews(context.packageName, R.layout.widget_current)\n\n    appWidgetManager.updateAppWidget(appWidgetIds, remoteView)\n}\n}\n</code></pre>\n\n<p>How do I go about loading the fragment into the remoteView?</p>\n"}, {"tags": ["kotlin", "anko"], "answers": [{"tags": [], "owner": {"reputation": 1453, "user_id": 2804610, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m7Bke.jpg?s=128&g=1", "display_name": "EPadronU", "link": "https://stackoverflow.com/users/2804610/epadronu"}, "is_accepted": true, "score": 5, "last_activity_date": 1465051259, "creation_date": 1465051259, "answer_id": 37631466, "question_id": 37631397, "link": "https://stackoverflow.com/questions/37631397/complex-gravity-in-anko/37631466#37631466", "title": "Complex Gravity in Anko", "body": "<p>In Kotlin, the bitwise OR is <code>or</code> instead of <code>|</code>. <code>Gravity.BOTTOM or Gravity.END</code> should work.</p>\n"}, {"tags": [], "owner": {"reputation": 12909, "user_id": 458365, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/aEkXV.jpg?s=128&g=1", "display_name": "pablisco", "link": "https://stackoverflow.com/users/458365/pablisco"}, "is_accepted": false, "score": 2, "last_activity_date": 1495245071, "creation_date": 1495245071, "answer_id": 44081129, "question_id": 37631397, "link": "https://stackoverflow.com/questions/37631397/complex-gravity-in-anko/44081129#44081129", "title": "Complex Gravity in Anko", "body": "<p>To make it easier to read you can also use this instead of <code>or</code>:</p>\n\n<pre><code>floatingActionButton {\n  id = FAB_ID\n}.lparams {\n  margin = dip(16)\n  gravity = BOTTOM + END\n}\n</code></pre>\n\n<p>Remember to do an import of the gravity values:</p>\n\n<pre><code>import android.view.Gravity.BOTTOM\nimport android.view.Gravity.END\n</code></pre>\n"}], "owner": {"reputation": 10222, "user_id": 1407672, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Fn99v.png?s=128&g=1", "display_name": "Charlie-Blake", "link": "https://stackoverflow.com/users/1407672/charlie-blake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1516, "favorite_count": 0, "accepted_answer_id": 37631466, "answer_count": 2, "score": 1, "last_activity_date": 1495245071, "creation_date": 1465050726, "question_id": 37631397, "link": "https://stackoverflow.com/questions/37631397/complex-gravity-in-anko", "title": "Complex Gravity in Anko", "body": "<p>I'm trying to estabilish a BOTTOM|END gravity in a FloatingActionButton via anko</p>\n\n<pre><code>floatingActionButton {\n    id = FAB_ID\u2211\n}.lparams {\n    margin = dip(16)\n    gravity = Gravity.BOTTOM | Gravity.END\n}\n</code></pre>\n\n<p>However it seems like Kotlin does not recognize the <code>|</code>operator. What am I supposed to do?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 8458, "user_id": 786388, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/69de0a32836e6068a2f0baba75627b00?s=128&d=identicon&r=PG", "display_name": "ean5533", "link": "https://stackoverflow.com/users/786388/ean5533"}, "edited": false, "score": 0, "creation_date": 1465061347, "post_id": 37630633, "comment_id": 62748008, "body": "As an aside, even if it were possible define an exponent operator, I would recommend against using <code>^</code>. In Java, C#, and many other languages, the <code>^</code> operator performs <a href=\"https://en.wikipedia.org/wiki/Exclusive_or\" rel=\"nofollow noreferrer\">xor</a>, so it would be surprising to see it do something different in Kotlin."}, {"owner": {"reputation": 2442, "user_id": 3666302, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e9aed854fcd666aba1316ef908ad5913?s=128&d=identicon&r=PG&f=1", "display_name": "TomTom", "link": "https://stackoverflow.com/users/3666302/tomtom"}, "reply_to_user": {"reputation": 8458, "user_id": 786388, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/69de0a32836e6068a2f0baba75627b00?s=128&d=identicon&r=PG", "display_name": "ean5533", "link": "https://stackoverflow.com/users/786388/ean5533"}, "edited": false, "score": 0, "creation_date": 1465063180, "post_id": 37630633, "comment_id": 62748582, "body": "Yes, <code>**</code> would probably be the safer choice."}], "answers": [{"tags": [], "owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "is_accepted": false, "score": 0, "last_activity_date": 1465046281, "creation_date": 1465046281, "answer_id": 37630689, "question_id": 37630633, "link": "https://stackoverflow.com/questions/37630633/how-to-define-new-operator-in-kotlin/37630689#37630689", "title": "How to define new operator in Kotlin?", "body": "<p>No. Kotlin only allows overloading a <strong>predefined</strong> set of operators, as indicated in <a href=\"https://kotlinlang.org/docs/reference/operator-overloading.html\" rel=\"nofollow\">the documentation</a>. And <code>^</code> is not one of them (it's not even an operator AFAIK, so it can't be overloaded).</p>\n"}, {"comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 7, "creation_date": 1465063117, "post_id": 37630881, "comment_id": 62748567, "body": "all of the above, but &quot;Fortunately&quot;"}, {"owner": {"reputation": 2442, "user_id": 3666302, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e9aed854fcd666aba1316ef908ad5913?s=128&d=identicon&r=PG&f=1", "display_name": "TomTom", "link": "https://stackoverflow.com/users/3666302/tomtom"}, "edited": false, "score": 0, "creation_date": 1465063354, "post_id": 37630881, "comment_id": 62748639, "body": "I hope they consider consider adding a power operator, since it is widely used in any kind of math. <code>Math.pow</code> is a little bit clunky imo."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 25, "last_activity_date": 1527269517, "last_edit_date": 1527269517, "creation_date": 1465047467, "answer_id": 37630881, "question_id": 37630633, "link": "https://stackoverflow.com/questions/37630633/how-to-define-new-operator-in-kotlin/37630881#37630881", "title": "How to define new operator in Kotlin?", "body": "<p>Unfortunately, you cannot define new operators, there's only a <a href=\"https://kotlinlang.org/docs/reference/operator-overloading.html\" rel=\"noreferrer\">predefined set</a> of those that can be overloaded. Some operators might be added to this set later, there's an <a href=\"https://youtrack.jetbrains.com/issue/KT-1440\" rel=\"noreferrer\">open issue</a> for that in the Kotlin issue tracker.</p>\n\n<p>However, you can use backticked names to define <code>infix</code> extension functions which look like operators (much less pretty though):</p>\n\n<pre><code>infix fun Int.`^`(exponent: Int): Int = ... \n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>5 `^` 3\n</code></pre>\n\n<p>Note that <code>infix</code> functions have precedence lower than that of operators, thus </p>\n\n<pre><code>1 + 1 `^` 3 == 8\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 301, "user_id": 7323667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20f7ae4c007710d8dfb6b8b51d640dda?s=128&d=identicon&r=PG&f=1", "display_name": "yane", "link": "https://stackoverflow.com/users/7323667/yane"}, "edited": false, "score": 2, "creation_date": 1565198054, "post_id": 56997853, "comment_id": 101280320, "body": "Great!  and what about this?     inline infix fun &lt;T : Number&gt; T.v(exponent: T): Double = this.toDouble().pow(exponent.toDouble())"}, {"owner": {"reputation": 1833, "user_id": 1062727, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b5b9976710eed726413233e9fef7f43e?s=128&d=identicon&r=PG", "display_name": "Paulo Buchsbaum", "link": "https://stackoverflow.com/users/1062727/paulo-buchsbaum"}, "reply_to_user": {"reputation": 301, "user_id": 7323667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20f7ae4c007710d8dfb6b8b51d640dda?s=128&d=identicon&r=PG&f=1", "display_name": "yane", "link": "https://stackoverflow.com/users/7323667/yane"}, "edited": false, "score": 0, "creation_date": 1565203623, "post_id": 56997853, "comment_id": 101282736, "body": "Yes! You are right. Great idea.I will change in my code."}], "tags": [], "owner": {"reputation": 1833, "user_id": 1062727, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b5b9976710eed726413233e9fef7f43e?s=128&d=identicon&r=PG", "display_name": "Paulo Buchsbaum", "link": "https://stackoverflow.com/users/1062727/paulo-buchsbaum"}, "is_accepted": false, "score": 2, "last_activity_date": 1562882656, "creation_date": 1562882656, "answer_id": 56997853, "question_id": 37630633, "link": "https://stackoverflow.com/questions/37630633/how-to-define-new-operator-in-kotlin/56997853#56997853", "title": "How to define new operator in Kotlin?", "body": "<p>I works with <em>Math</em>. <em>Android Studio</em> forbids to use <code>^</code> with quotes. \nSo I've defined <code>v</code> operator (<code>^</code> upside down). Is it ugly?  Yes, but it is best than\nthons of typecasting and <code>pow</code> notation.</p>\n\n<pre><code>inline infix fun Double.v(exponent: Int): Double = this.pow(exponent)\ninline infix fun Double.v(exponent: Long): Double = this.pow(exponent.toDouble())\ninline infix fun Double.v(exponent: Double): Double = this.pow(exponent)\ninline infix fun Int.v(exponent: Int): Double = this.toDouble().pow(exponent)\ninline infix fun Int.v(exponent: Long): \n      Double = this.toDouble().pow(exponent.toDouble())\ninline infix fun Int.v(exponent: Double): Double = this.toDouble().pow(exponent)\ninline infix fun Long.v(exponent: Int): Double = this.toDouble().pow(exponent)\ninline infix fun Long.v(exponent: Long): \n      Double = this.toDouble().pow(exponent.toDouble())\ninline infix fun Long.v(exponent: Double): \n      Double = this.toDouble().pow(exponent)\n</code></pre>\n\n<p><code>inline</code> usage generates no extra load in runtime, even inside heavier loops. </p>\n\n<p>Unfortunately, the damaged operator precedence forces you to surround the power operation with parentheses. And the compiler forces you flank with spaces. </p>\n\n<p>After all, what gives the best look?</p>\n\n<p>This?             </p>\n\n<pre><code>var k=2  \n...\nprintln((k v 5)+3)\n</code></pre>\n\n<p>Or this? </p>\n\n<pre><code>var k=2\n ... \nprintln(k.toDouble().pow(5) + 3)\n</code></pre>\n\n<p>I vote on the fist option!. </p>\n"}], "owner": {"reputation": 2442, "user_id": 3666302, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e9aed854fcd666aba1316ef908ad5913?s=128&d=identicon&r=PG&f=1", "display_name": "TomTom", "link": "https://stackoverflow.com/users/3666302/tomtom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4566, "favorite_count": 0, "accepted_answer_id": 37630881, "answer_count": 3, "score": 12, "last_activity_date": 1562882656, "creation_date": 1465045925, "question_id": 37630633, "link": "https://stackoverflow.com/questions/37630633/how-to-define-new-operator-in-kotlin", "title": "How to define new operator in Kotlin?", "body": "<p>Is it possible to define a generic exponentiation operator that can be interfaced like this:</p>\n\n<pre><code>&gt; 10^3         // 1000\n&gt; 2.71^2       // 7.3441\n&gt; 3.14^(-3.14) // 0.027..\n</code></pre>\n\n<p>According to the docs it's possible to extend classes with infix functions:</p>\n\n<pre><code>// Define extension to Int\ninfix fun Int.exp(exponent: Int): Int {\n...\n}\n</code></pre>\n\n<p>But they don't allow symbols like <code>^</code></p>\n"}, {"tags": ["generics", "reflection", "kotlin", "type-parameter", "constructor-reference"], "answers": [{"tags": [], "owner": {"reputation": 579, "user_id": 3301979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60bd29b0c3b3df081319675eb1d4b295?s=128&d=identicon&r=PG", "display_name": "erokhins", "link": "https://stackoverflow.com/users/3301979/erokhins"}, "is_accepted": true, "score": 2, "last_activity_date": 1465071561, "creation_date": 1465071561, "answer_id": 37634637, "question_id": 37629644, "link": "https://stackoverflow.com/questions/37629644/how-to-pass-a-type-parameter-to-a-generic-class-constructor-reference/37634637#37634637", "title": "How to pass a type parameter to a generic class constructor reference?", "body": "<p>Yes, it is possible to improve the compiler here. It could infer type parameter for <code>ConstructMe</code>. See issue <a href=\"https://youtrack.jetbrains.com/issue/KT-10711\" rel=\"nofollow\">https://youtrack.jetbrains.com/issue/KT-10711</a>.</p>\n\n<p>For non-inline ounter function(in this case it is constructor of Test) there is no difference between lambda and callable reference to constructor. For both cases compiler creates anonymous class which has method <code>invoke</code> that creates an instance of <code>ConstructMe</code>. </p>\n\n<p>But callable reference is more convenient than lambda in cases where constructor has a lot of parameters.</p>\n"}], "owner": {"reputation": 317, "user_id": 2681754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7184d202cdf2dcb759d852059498a8e?s=128&d=identicon&r=PG&f=1", "display_name": "johnp", "link": "https://stackoverflow.com/users/2681754/johnp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1249, "favorite_count": 2, "accepted_answer_id": 37634637, "answer_count": 1, "score": 6, "last_activity_date": 1465071561, "creation_date": 1465039562, "question_id": 37629644, "link": "https://stackoverflow.com/questions/37629644/how-to-pass-a-type-parameter-to-a-generic-class-constructor-reference", "title": "How to pass a type parameter to a generic class constructor reference?", "body": "<p>Assume the following code:</p>\n\n<pre><code>class ConstructMe&lt;T&gt; {}\ndata class Test&lt;T&gt; constructor(var supplier: () -&gt; ConstructMe&lt;T&gt;) {}\n\nfun main(args: Array&lt;String&gt;) {\n    works&lt;Int&gt;()\n    breaks&lt;Int&gt;()\n}\n\nfun &lt;T&gt; works() {\n    Test&lt;T&gt;({ ConstructMe&lt;T&gt;() }) // (1) any one class type parameter can be removed like:\n    Test({ ConstructMe&lt;T&gt;() })  // (2) still works (class type inferred by argument type)\n    Test&lt;T&gt;({ ConstructMe() })  // (3) still works (argument type inferred by class type)\n}\n\nfun &lt;T&gt; breaks() {\n    Test&lt;T&gt;(::ConstructMe) // type interference failed (should probably work like (3); compiler improvement possible?)\n    Test&lt;T&gt;(::ConstructMe&lt;T&gt;) // type interference failed &amp; type argument not allowed (language change necessary?)\n}\n</code></pre>\n\n<p>I've run into this by passing JavaFX properties (<code>SimpleIntegerProperty</code>, <code>SimpleStringProperty</code>, ... and <code>SimpleObjectProperty&lt;T&gt;</code>) to a generic class constructors <code>() -&gt; Property&lt;T&gt;</code> argument, where passing <code>::SimpleIntegerProperty</code> works without a problem, while <code>::SimpleObjectProperty</code> fails like the above example code. </p>\n\n<p>Is it possible to improve the compiler here or to allow passing type parameters to constructor/function references?\nDoes it even make sense to use constructor references over simple lambda expressions here? Does it compile any differently?</p>\n"}, {"tags": ["java", "parameters", "kotlin", "fastutil"], "answers": [{"tags": [], "owner": {"reputation": 579, "user_id": 3301979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60bd29b0c3b3df081319675eb1d4b295?s=128&d=identicon&r=PG", "display_name": "erokhins", "link": "https://stackoverflow.com/users/3301979/erokhins"}, "is_accepted": true, "score": 10, "last_activity_date": 1465037385, "creation_date": 1465037385, "answer_id": 37629293, "question_id": 37625983, "link": "https://stackoverflow.com/questions/37625983/why-is-integer-parameter-of-java-method-mapped-to-int-and-not-platform-type/37629293#37629293", "title": "Why is Integer parameter of Java method mapped to Int and not platform type?", "body": "<p>I suspect that it is a kotlin compiler bug.\nProblem here is in interface <code>IntStack</code> which is implemented by <code>IntArrayList</code>:</p>\n\n<pre><code>interface Stack&lt;T&gt; {\n    void push(T t);\n}\n\ninterface IntStack extends Stack&lt;Integer&gt; {\n    void push(int i);\n}\n</code></pre>\n\n<p>Kotlin sees only one method <code>push(Int)</code> in interface <code>IntStack</code>, or, more precisely, kotlin wrongly supposes that <code>push(int i)</code> is an override of method <code>push(T t)</code>.</p>\n"}], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 455, "favorite_count": 3, "accepted_answer_id": 37629293, "answer_count": 1, "score": 8, "last_activity_date": 1465037385, "creation_date": 1465010218, "last_edit_date": 1495535350, "question_id": 37625983, "link": "https://stackoverflow.com/questions/37625983/why-is-integer-parameter-of-java-method-mapped-to-int-and-not-platform-type", "title": "Why is Integer parameter of Java method mapped to Int and not platform type?", "body": "<p><sup>Inspired by <a href=\"https://stackoverflow.com/questions/37625599/kotlin-what-can-i-do-when-a-java-library-has-an-overload-of-primitive-and-boxed/37625834#37625834\">another question</a>.</sup></p>\n\n<p>In <code>fastutil</code> library there's <code>IntArrayList</code> class which has a method with the following Java signature:</p>\n\n<pre><code>public void push(Integer o)\n</code></pre>\n\n<p>From Kotlin it is seen as</p>\n\n<pre><code>push(o: Int)\n</code></pre>\n\n<p><strong>Is there a specific reason why it is <code>Int</code> and not platform type <code>Int!</code>?</strong> </p>\n\n<p>I expected it to be <code>push(o: Int!)</code> at least because a method with the same signature defined in Java source within the project with Kotlin sources has <code>Int!</code> as parameter type seen from Kotlin (even defined in different module, and even imported from jar of that module!).</p>\n\n<p>Also, the described behavior causes <code>push(Integer o)</code> to conflict with <code>push(int o)</code> (in the same class) which has <code>Int</code> parameter legally -- they are both seen as <code>push(o: Int)</code>. If there was <code>Int!</code> for <code>Integer</code>, there would be no conflict (I tried also to define this pair of methods in my code -- still works as I expect, there's <code>Int!</code>).</p>\n\n<hr>\n\n<p>Kotlin version is <code>1.0.2</code>.</p>\n\n<p>Gradle dependency for <code>fastutil</code>:</p>\n\n<pre><code>compile group: 'it.unimi.dsi', name: 'fastutil', version: '7.0.12'\n</code></pre>\n"}, {"tags": ["kotlin", "overloading"], "answers": [{"comments": [{"owner": {"reputation": 7656, "user_id": 1938929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/OeAme.png?s=128&g=1", "display_name": "Jire", "link": "https://stackoverflow.com/users/1938929/jire"}, "edited": false, "score": 2, "creation_date": 1465008075, "post_id": 37625615, "comment_id": 62734045, "body": "That is a viable solution but don&#39;t you suspect there be an easier way?"}], "tags": [], "owner": {"reputation": 2863, "user_id": 2297560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/948d4a17494b3c616a0873453b74670c?s=128&d=identicon&r=PG", "display_name": "user2297560", "link": "https://stackoverflow.com/users/2297560/user2297560"}, "is_accepted": false, "score": 1, "last_activity_date": 1465005366, "creation_date": 1465005366, "answer_id": 37625615, "question_id": 37625599, "link": "https://stackoverflow.com/questions/37625599/kotlin-what-can-i-do-when-a-java-library-has-an-overload-of-both-primitive-and/37625615#37625615", "title": "Kotlin: What can I do when a Java library has an overload of both primitive and boxed type?", "body": "<p>Have you tried writing a Java class to serve as an intermediary?  That is, write your own java class with the method you want Kotlin to see, then call that method from your Kotlin code.</p>\n"}, {"comments": [{"owner": {"reputation": 7656, "user_id": 1938929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/OeAme.png?s=128&g=1", "display_name": "Jire", "link": "https://stackoverflow.com/users/1938929/jire"}, "edited": false, "score": 1, "creation_date": 1465008881, "post_id": 37625834, "comment_id": 62734143, "body": "This does not seem to be working with Kotlin 1.0.2 stable (<code>x</code> is an <code>Int</code>): <a href=\"http://i.imgur.com/KLVy5Vn.png\" rel=\"nofollow noreferrer\">i.imgur.com/KLVy5Vn.png</a>"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 7656, "user_id": 1938929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/OeAme.png?s=128&g=1", "display_name": "Jire", "link": "https://stackoverflow.com/users/1938929/jire"}, "edited": false, "score": 1, "creation_date": 1465009270, "post_id": 37625834, "comment_id": 62734192, "body": "@Jire, ah, indeed. I had tested it only with Java sources within the the same project, and it had worked for that case. The problem is that for <code>push(Integer)</code> the Kotlin signature is <code>push(Int)</code> for some reason and not <code>push(Int!)</code>."}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 7656, "user_id": 1938929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/OeAme.png?s=128&g=1", "display_name": "Jire", "link": "https://stackoverflow.com/users/1938929/jire"}, "edited": false, "score": 1, "creation_date": 1465038607, "post_id": 37625834, "comment_id": 62740767, "body": "@Jire, this turned out to be a bug in the compiler."}, {"owner": {"reputation": 25342, "user_id": 234901, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/5d95dbec709c9c45e9fc325e750cdcdd?s=128&d=identicon&r=PG", "display_name": "Enno Shioji", "link": "https://stackoverflow.com/users/234901/enno-shioji"}, "edited": false, "score": 2, "creation_date": 1469451042, "post_id": 37625834, "comment_id": 64526168, "body": "This solution doesn&#39;t work as of <code>v1.0.3</code> but apparently does work on <code>v1.1-M01</code>"}, {"owner": {"reputation": 7656, "user_id": 1938929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/OeAme.png?s=128&g=1", "display_name": "Jire", "link": "https://stackoverflow.com/users/1938929/jire"}, "edited": false, "score": 0, "creation_date": 1473467316, "post_id": 37625834, "comment_id": 66167544, "body": "@hotkey Even in v1.1-M01 you can&#39;t call the primitive version if you want to use an argument"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 7656, "user_id": 1938929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/OeAme.png?s=128&g=1", "display_name": "Jire", "link": "https://stackoverflow.com/users/1938929/jire"}, "edited": false, "score": 1, "creation_date": 1473492383, "post_id": 37625834, "comment_id": 66171594, "body": "@Jire, agreed, but <a href=\"https://youtrack.jetbrains.com/issueMobile/KT-11440\" rel=\"nofollow noreferrer\">the related issue</a> has been marked as fixed and has target version 1.0.4, so the fix will hopefully be released soon."}, {"owner": {"reputation": 552, "user_id": 3667225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qNRwJ.jpg?s=128&g=1", "display_name": "B W", "link": "https://stackoverflow.com/users/3667225/b-w"}, "edited": false, "score": 0, "creation_date": 1507559334, "post_id": 37625834, "comment_id": 80246727, "body": "This problem is referenced in <a href=\"https://github.com/mgp/book-notes/blob/master/effective-java-2nd-edition.markdown#item-41-use-overloading-judiciously\" rel=\"nofollow noreferrer\">Effective Java Item #41</a>. The author recommends just this: either cast your argument to the boxed type (e.g. <code>5 as Int?</code>) or use some other means to force your argument into the boxed type (e.g. invoke <code>Integer.valueOf(5)</code>)."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": false, "score": 9, "last_activity_date": 1475144989, "last_edit_date": 1475144989, "creation_date": 1465008430, "answer_id": 37625834, "question_id": 37625599, "link": "https://stackoverflow.com/questions/37625599/kotlin-what-can-i-do-when-a-java-library-has-an-overload-of-both-primitive-and/37625834#37625834", "title": "Kotlin: What can I do when a Java library has an overload of both primitive and boxed type?", "body": "<p>Consider these methods in Java:</p>\n\n<pre><code>void f(int x) { }\nvoid f(Integer y) { }\n</code></pre>\n\n<p>In Kotlin, they are seen as</p>\n\n<pre><code>f(x: Int)\nf(x: Int!)\n</code></pre>\n\n<p><sup>The second method has a parameter of <a href=\"https://kotlinlang.org/docs/reference/java-interop.html#null-safety-and-platform-types\" rel=\"nofollow\">platform type</a>, meaning it <em>might be</em> nullable, corresponding to <code>Integer</code>.</sup></p>\n\n<p>First one can be simply called with Kotlin <code>Int</code> passed: </p>\n\n<pre><code>f(5) // calls f(int x)\n</code></pre>\n\n<p>To call the second one, you can cast the argument to nullable <code>Int?</code>, thus selecting the overload:</p>\n\n<pre><code>f(5 as Int?) // calls f(Integer y)\n</code></pre>\n"}], "owner": {"reputation": 7656, "user_id": 1938929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/OeAme.png?s=128&g=1", "display_name": "Jire", "link": "https://stackoverflow.com/users/1938929/jire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2245, "favorite_count": 2, "answer_count": 2, "score": 8, "last_activity_date": 1475144989, "creation_date": 1465005137, "last_edit_date": 1465009888, "question_id": 37625599, "link": "https://stackoverflow.com/questions/37625599/kotlin-what-can-i-do-when-a-java-library-has-an-overload-of-both-primitive-and", "title": "Kotlin: What can I do when a Java library has an overload of both primitive and boxed type?", "body": "<p>For example, FastUtil's <code>IntArrayList</code> has a <code>push</code> method that accepts both <code>int</code> (primitive) and <code>Integer</code> (boxed), but Kotlin sees these both as the same function <code>push(Int)</code>, therefore I cannot use the function at all as the function is ambiguous.</p>\n\n<p>What should I do when a Java library has overloads for both the primitive and boxed type?</p>\n\n<p>(p.s. I am aware that I can use the <code>add(int)</code> method. I am in search of what to do if I come across such a problem in the future.)</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 9688, "user_id": 1402641, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/befad7c8ccbe09dc47c507242d3744cd?s=128&d=identicon&r=PG", "display_name": "Marcin Kozi\u0144ski", "link": "https://stackoverflow.com/users/1402641/marcin-kozi%c5%84ski"}, "edited": false, "score": 3, "creation_date": 1464972054, "post_id": 37618738, "comment_id": 62721547, "body": "Maybe what you need is to make the property nullable (change type to <code>File?</code>) and just check if it is null instead?"}, {"owner": {"reputation": 9328, "user_id": 4613968, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/100000926329265/picture?type=large", "display_name": "Mathew Hany", "link": "https://stackoverflow.com/users/4613968/mathew-hany"}, "reply_to_user": {"reputation": 9688, "user_id": 1402641, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/befad7c8ccbe09dc47c507242d3744cd?s=128&d=identicon&r=PG", "display_name": "Marcin Kozi\u0144ski", "link": "https://stackoverflow.com/users/1402641/marcin-kozi%c5%84ski"}, "edited": false, "score": 1, "creation_date": 1464985450, "post_id": 37618738, "comment_id": 62728248, "body": "Well, I actually tried that and it will do the trick, however I will have to edit the <code>allSeries</code> var to <code>seriesDir?.listFiles()?.map { it.name }?.toTypedArray()</code>, which is not very &quot;pretty&quot;"}, {"owner": {"reputation": 9688, "user_id": 1402641, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/befad7c8ccbe09dc47c507242d3744cd?s=128&d=identicon&r=PG", "display_name": "Marcin Kozi\u0144ski", "link": "https://stackoverflow.com/users/1402641/marcin-kozi%c5%84ski"}, "edited": false, "score": 1, "creation_date": 1464985710, "post_id": 37618738, "comment_id": 62728371, "body": "You can do a plain old null check and smart cast will make it prettier. <code>if (seriesDir != null) {</code> <code>allSeries = seriesDir.listFiles().map { it.name }.toTypedArray()</code> <code>}</code>"}, {"owner": {"reputation": 1805, "user_id": 7598113, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/afa022bfb89a6089383cb2f018438855?s=128&d=identicon&r=PG&f=1", "display_name": "kuza", "link": "https://stackoverflow.com/users/7598113/kuza"}, "edited": false, "score": 0, "creation_date": 1552893740, "post_id": 37618738, "comment_id": 97167741, "body": "Please consider accepting more up to date <a href=\"https://stackoverflow.com/a/46584412/7598113\">answer</a>"}], "answers": [{"comments": [{"owner": {"reputation": 9328, "user_id": 4613968, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/100000926329265/picture?type=large", "display_name": "Mathew Hany", "link": "https://stackoverflow.com/users/4613968/mathew-hany"}, "edited": false, "score": 0, "creation_date": 1464969862, "post_id": 37618803, "comment_id": 62720401, "body": "I have a JavaFX application, and I have a button which will be always disables unless a variable (which is <code>lateinit</code>) has been initialized. In other words: I want the button to be disabled as long as the variable hasn&#39;t been initialized. Is there a good way to do that?"}, {"owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "reply_to_user": {"reputation": 9328, "user_id": 4613968, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/100000926329265/picture?type=large", "display_name": "Mathew Hany", "link": "https://stackoverflow.com/users/4613968/mathew-hany"}, "edited": false, "score": 0, "creation_date": 1464970008, "post_id": 37618803, "comment_id": 62720479, "body": "@MathewHany How would it be getting initialized normally? You might want to look at property getter/setters and a SimpleBooleanProperty which you can bind to the disabled property of the button"}, {"owner": {"reputation": 9328, "user_id": 4613968, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/100000926329265/picture?type=large", "display_name": "Mathew Hany", "link": "https://stackoverflow.com/users/4613968/mathew-hany"}, "edited": false, "score": 1, "creation_date": 1464970049, "post_id": 37618803, "comment_id": 62720507, "body": "To be more specific, I have a simple app that contains 4 buttons, the first button will open a DirectoryChooser dialog, and the other 3 will be disabled, when the user choose a directory then all the other buttons will be available to the user."}, {"owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "reply_to_user": {"reputation": 9328, "user_id": 4613968, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/100000926329265/picture?type=large", "display_name": "Mathew Hany", "link": "https://stackoverflow.com/users/4613968/mathew-hany"}, "edited": false, "score": 0, "creation_date": 1464977210, "post_id": 37618803, "comment_id": 62724264, "body": "@MathewHany you can natively implement that using a SimpleObjectProperty to hold the chosen file, then using the <code>isNull</code> binding to disable the other buttons."}, {"owner": {"reputation": 1526, "user_id": 1920670, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3e4c44d78b9654baf65100088deafc04?s=128&d=identicon&r=PG&f=1", "display_name": "MainActivity", "link": "https://stackoverflow.com/users/1920670/mainactivity"}, "edited": false, "score": 1, "creation_date": 1534157429, "post_id": 37618803, "comment_id": 90594953, "body": "<a href=\"https://kotlinlang.org/docs/reference/whatsnew12.html#checking-whether-a-lateinit-var-is-initialized\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/&hellip;</a> xsveda answer is more up to date"}, {"owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "reply_to_user": {"reputation": 1526, "user_id": 1920670, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3e4c44d78b9654baf65100088deafc04?s=128&d=identicon&r=PG&f=1", "display_name": "MainActivity", "link": "https://stackoverflow.com/users/1920670/mainactivity"}, "edited": false, "score": 0, "creation_date": 1534173968, "post_id": 37618803, "comment_id": 90605644, "body": "@Serge True, although for this specific question <code>lateinit</code> was not really the correct solution anyway"}], "tags": [], "owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "is_accepted": false, "score": 41, "last_activity_date": 1557066557, "last_edit_date": 1557066557, "creation_date": 1464969446, "answer_id": 37618803, "question_id": 37618738, "link": "https://stackoverflow.com/questions/37618738/how-to-check-if-a-lateinit-variable-has-been-initialized/37618803#37618803", "title": "How to check if a &quot;lateinit&quot; variable has been initialized?", "body": "<p>Try to use it and you will receive a <code>UninitializedPropertyAccessException</code> if it is not initialized.</p>\n\n<p><code>lateinit</code> is specifically for cases where fields are initialized after construction, but before actual use (a model which most injection frameworks use).\nIf this is not your use case <code>lateinit</code> might not be the right choice.</p>\n\n<p>EDIT: Based on what you want to do something like this would work better:</p>\n\n<pre><code>val chosenFile = SimpleObjectProperty&lt;File?&gt;\nval button: Button\n\n// Disables the button if chosenFile.get() is null\nbutton.disableProperty.bind(chosenFile.isNull())\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13263, "user_id": 2862474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1e0bd0af574c69e2cdb27eda9ccf0b6?s=128&d=identicon&r=PG&f=1", "display_name": "xsveda", "link": "https://stackoverflow.com/users/2862474/xsveda"}, "reply_to_user": {"reputation": 497, "user_id": 1145820, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e5befdd781802592ec1ef8cc91f5dbd5?s=128&d=identicon&r=PG", "display_name": "fer.marino", "link": "https://stackoverflow.com/users/1145820/fer-marino"}, "edited": false, "score": 3, "creation_date": 1511989172, "post_id": 46584412, "comment_id": 82081125, "body": "@fer.marino: Well, Kotlin 1.2 actually allows you to use <code>lateinit</code> also for local variables, see <a href=\"http://kotlinlang.org/docs/reference/whatsnew12.html#lateinit-top-level-properties-and-local-variables\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/&hellip;</a>"}, {"owner": {"reputation": 8612, "user_id": 8874958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39990cd5d2bd537729f7b2b7a1a724a7?s=128&d=identicon&r=PG&f=1", "display_name": "Kishan Solanki", "link": "https://stackoverflow.com/users/8874958/kishan-solanki"}, "edited": false, "score": 0, "creation_date": 1527567198, "post_id": 46584412, "comment_id": 88161532, "body": "This ain&#39;t working for me. I get &quot;lateinit property has not been initialized&quot; even after using it."}, {"owner": {"reputation": 685, "user_id": 5269276, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/48ea7f5acbc5050b46623bb8723d4200?s=128&d=identicon&r=PG&f=1", "display_name": "vihkat", "link": "https://stackoverflow.com/users/5269276/vihkat"}, "edited": false, "score": 10, "creation_date": 1539246717, "post_id": 46584412, "comment_id": 92434387, "body": "this::lateinitVar.isInitialized"}, {"owner": {"reputation": 5646, "user_id": 2021812, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/MehDl.jpg?s=128&g=1", "display_name": "Malwinder Singh", "link": "https://stackoverflow.com/users/2021812/malwinder-singh"}, "edited": false, "score": 29, "creation_date": 1557985068, "post_id": 46584412, "comment_id": 98950610, "body": "what is meaning of <code>::</code> before <code>file</code>?"}, {"owner": {"reputation": 1152, "user_id": 673167, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/69593b9b71770789a7124512d05c035e?s=128&d=identicon&r=PG", "display_name": "notGeek", "link": "https://stackoverflow.com/users/673167/notgeek"}, "reply_to_user": {"reputation": 5646, "user_id": 2021812, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/MehDl.jpg?s=128&g=1", "display_name": "Malwinder Singh", "link": "https://stackoverflow.com/users/2021812/malwinder-singh"}, "edited": false, "score": 9, "creation_date": 1562777694, "post_id": 46584412, "comment_id": 100486949, "body": "@MalwinderSingh it creates a member reference or a class reference."}, {"owner": {"reputation": 419, "user_id": 4099295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbc51b615d2491cefeb381fe8555d38?s=128&d=identicon&r=PG", "display_name": "Haomin", "link": "https://stackoverflow.com/users/4099295/haomin"}, "reply_to_user": {"reputation": 5646, "user_id": 2021812, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/MehDl.jpg?s=128&g=1", "display_name": "Malwinder Singh", "link": "https://stackoverflow.com/users/2021812/malwinder-singh"}, "edited": false, "score": 1, "creation_date": 1572993949, "post_id": 46584412, "comment_id": 103733910, "body": "@MalwinderSingh it creates a member reference like @notGeek mentioned. Since here we are referring to the reference within this class, the <code>this</code> keyword is not necessary. The verbose syntax is <code>if (this::file.isInitialized) { ... }</code>"}, {"owner": {"reputation": 2607, "user_id": 4235946, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/te30Y.jpg?s=128&g=1", "display_name": "Juan Jos&#233; Melero G&#243;mez", "link": "https://stackoverflow.com/users/4235946/juan-jos%c3%a9-melero-g%c3%b3mez"}, "edited": false, "score": 0, "creation_date": 1574855554, "post_id": 46584412, "comment_id": 104377226, "body": "You should add a disclaimer warning that using this method is by no means the intended way to use the lateinit modifier in a pro environment."}, {"owner": {"reputation": 8990, "user_id": 624814, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/3a863d626cfeba2251bdf48ee8b38b7a?s=128&d=identicon&r=PG", "display_name": "SMBiggs", "link": "https://stackoverflow.com/users/624814/smbiggs"}, "edited": false, "score": 0, "creation_date": 1598912466, "post_id": 46584412, "comment_id": 112605263, "body": "Oh yeah, should have guessed that we need two colons in a row.  Monkeys typing could have figured that out in a few hundred years.  And it&#39;s soooo more intuitive and easier to type than <code>if (file == null)</code>.  I&#39;m glad kotlin saves us so much typing and is so easy to understand!"}, {"owner": {"reputation": 15791, "user_id": 839733, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/2s6lO.jpg?s=128&g=1", "display_name": "Abhijit Sarkar", "link": "https://stackoverflow.com/users/839733/abhijit-sarkar"}, "edited": false, "score": 2, "creation_date": 1601015429, "post_id": 46584412, "comment_id": 113277377, "body": "How do we check this for local <code>lateinit</code>, where <code>this</code> is something different?"}, {"owner": {"reputation": 507, "user_id": 5959593, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/78d489b31ec60519733298259e8c1dc7?s=128&d=identicon&r=PG&f=1", "display_name": "Minh Ngh\u0129a", "link": "https://stackoverflow.com/users/5959593/minh-ngh%c4%a9a"}, "edited": false, "score": 0, "creation_date": 1608224663, "post_id": 46584412, "comment_id": 115524340, "body": "It seems that this can be done from inside the class, but I can&#39;t find any source."}], "tags": [], "owner": {"reputation": 13263, "user_id": 2862474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1e0bd0af574c69e2cdb27eda9ccf0b6?s=128&d=identicon&r=PG&f=1", "display_name": "xsveda", "link": "https://stackoverflow.com/users/2862474/xsveda"}, "is_accepted": true, "score": 1256, "last_activity_date": 1586646950, "last_edit_date": 1586646950, "creation_date": 1507202606, "answer_id": 46584412, "question_id": 37618738, "link": "https://stackoverflow.com/questions/37618738/how-to-check-if-a-lateinit-variable-has-been-initialized/46584412#46584412", "title": "How to check if a &quot;lateinit&quot; variable has been initialized?", "body": "<p>There is a <code>lateinit</code> improvement in Kotlin 1.2 that allows to check the initialization state of <code>lateinit</code> variable directly:</p>\n\n<pre><code>lateinit var file: File    \n\nif (this::file.isInitialized) { ... }\n</code></pre>\n\n<p>See the annoucement on <a href=\"https://blog.jetbrains.com/kotlin/2017/09/kotlin-1-2-beta-is-out/\" rel=\"noreferrer\">JetBrains blog</a> or the <a href=\"https://github.com/Kotlin/KEEP/pull/73\" rel=\"noreferrer\">KEEP proposal</a>.</p>\n\n<p><strong>UPDATE:</strong> Kotlin 1.2 has been released. You can find <code>lateinit</code> enhancements here:</p>\n\n<ul>\n<li><a href=\"http://kotlinlang.org/docs/reference/whatsnew12.html#checking-whether-a-lateinit-var-is-initialized\" rel=\"noreferrer\">Checking whether a lateinit var is initialized</a></li>\n<li><a href=\"http://kotlinlang.org/docs/reference/whatsnew12.html#lateinit-top-level-properties-and-local-variables\" rel=\"noreferrer\">Lateinit top-level properties and local variables</a></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 2700, "user_id": 1819684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rh5yA.png?s=128&g=1", "display_name": "gforce301", "link": "https://stackoverflow.com/users/1819684/gforce301"}, "edited": false, "score": 0, "creation_date": 1544464504, "post_id": 53705801, "comment_id": 94276631, "body": "This does not provide an answer to the question. To critique or request clarification from an author, leave a comment below their post. - <a href=\"/review/low-quality-posts/21646722\">From Review</a>"}, {"owner": {"reputation": 1107, "user_id": 1947494, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/yGTAe.jpg?s=128&g=1", "display_name": "Nikhil Katekhaye", "link": "https://stackoverflow.com/users/1947494/nikhil-katekhaye"}, "reply_to_user": {"reputation": 2700, "user_id": 1819684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rh5yA.png?s=128&g=1", "display_name": "gforce301", "link": "https://stackoverflow.com/users/1819684/gforce301"}, "edited": false, "score": 2, "creation_date": 1544506292, "post_id": 53705801, "comment_id": 94289603, "body": "@gforce301 It will definetly used for checking."}, {"owner": {"reputation": 1446, "user_id": 2451763, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/T436R.jpg?s=128&g=1", "display_name": "Sparker0i", "link": "https://stackoverflow.com/users/2451763/sparker0i"}, "edited": false, "score": 2, "creation_date": 1597493506, "post_id": 53705801, "comment_id": 112154115, "body": "Well this is the only answer that worked for me on Android Studio having Kotlin version 1.3"}], "tags": [], "owner": {"reputation": 1107, "user_id": 1947494, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/yGTAe.jpg?s=128&g=1", "display_name": "Nikhil Katekhaye", "link": "https://stackoverflow.com/users/1947494/nikhil-katekhaye"}, "is_accepted": false, "score": 74, "last_activity_date": 1610230472, "last_edit_date": 1610230472, "creation_date": 1544445430, "answer_id": 53705801, "question_id": 37618738, "link": "https://stackoverflow.com/questions/37618738/how-to-check-if-a-lateinit-variable-has-been-initialized/53705801#53705801", "title": "How to check if a &quot;lateinit&quot; variable has been initialized?", "body": "<p>Using <code>.isInitialized</code> property one can check initialization state of a lateinit variable.</p>\n<pre><code>if (::file.isInitialized) {\n    // File is initialized\n} else {\n    // File is not initialized\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5646, "user_id": 2021812, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/MehDl.jpg?s=128&g=1", "display_name": "Malwinder Singh", "link": "https://stackoverflow.com/users/2021812/malwinder-singh"}, "edited": false, "score": 3, "creation_date": 1557985089, "post_id": 55845094, "comment_id": 98950622, "body": "what is meaning of <code>::</code> before <code>bar</code>?"}, {"owner": {"reputation": 166, "user_id": 4132327, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-S3kAXH6zS84/AAAAAAAAAAI/AAAAAAAAELs/P_GxwWNLkkQ/photo.jpg?sz=128", "display_name": "DMonkey", "link": "https://stackoverflow.com/users/4132327/dmonkey"}, "reply_to_user": {"reputation": 5646, "user_id": 2021812, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/MehDl.jpg?s=128&g=1", "display_name": "Malwinder Singh", "link": "https://stackoverflow.com/users/2021812/malwinder-singh"}, "edited": false, "score": 2, "creation_date": 1558519865, "post_id": 55845094, "comment_id": 99125738, "body": "@Malwinder Singh &quot;creates a member reference or a class reference&quot; - Kotlin Doc"}], "tags": [], "owner": {"reputation": 25953, "user_id": 6599590, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/qLSDJ.jpg?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/6599590/andy"}, "is_accepted": false, "score": 4, "last_activity_date": 1556181419, "creation_date": 1556181419, "answer_id": 55845094, "question_id": 37618738, "link": "https://stackoverflow.com/questions/37618738/how-to-check-if-a-lateinit-variable-has-been-initialized/55845094#55845094", "title": "How to check if a &quot;lateinit&quot; variable has been initialized?", "body": "<p>To check if a <code>lateinit var</code> were initialised or not use a <code>.isInitialized</code> on the reference to that property:</p>\n\n<pre><code>if (foo::bar.isInitialized) {\n    println(foo.bar)\n}\n</code></pre>\n\n<blockquote>\n  <p>This checking is only available for the properties that are accessible lexically, i.e. declared in the same type or in one of the outer types, or at top level in the same file.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 1545, "user_id": 9061224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mzACU.jpg?s=128&g=1", "display_name": "MarGin", "link": "https://stackoverflow.com/users/9061224/margin"}, "edited": false, "score": 0, "creation_date": 1578476143, "post_id": 56895940, "comment_id": 105447254, "body": "I am using a local init variable when I use this check that gives an error like unresolved reference"}], "tags": [], "owner": {"reputation": 29080, "user_id": 1084174, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/BsASP.png?s=128&g=1", "display_name": "Sazzad Hissain Khan", "link": "https://stackoverflow.com/users/1084174/sazzad-hissain-khan"}, "is_accepted": false, "score": 15, "last_activity_date": 1562660283, "last_edit_date": 1562660283, "creation_date": 1562294773, "answer_id": 56895940, "question_id": 37618738, "link": "https://stackoverflow.com/questions/37618738/how-to-check-if-a-lateinit-variable-has-been-initialized/56895940#56895940", "title": "How to check if a &quot;lateinit&quot; variable has been initialized?", "body": "<p><a href=\"https://stackoverflow.com/a/46584412/1084174\">Accepted answer</a> gives me a compiler error in <code>Kotlin 1.3+</code>, I had to explicitly mention the <code>this</code> keyword before <code>::</code>. Below is the working code.</p>\n\n<pre><code>lateinit var file: File\n\nif (this::file.isInitialized) {\n\n    // file is not null\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 918, "user_id": 2207107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2fc83a88f6f39988632437eb7576d45?s=128&d=identicon&r=PG", "display_name": "takharsh", "link": "https://stackoverflow.com/users/2207107/takharsh"}, "is_accepted": false, "score": 1, "last_activity_date": 1562298627, "creation_date": 1562298627, "answer_id": 56896328, "question_id": 37618738, "link": "https://stackoverflow.com/questions/37618738/how-to-check-if-a-lateinit-variable-has-been-initialized/56896328#56896328", "title": "How to check if a &quot;lateinit&quot; variable has been initialized?", "body": "<pre><code>kotlin.UninitializedPropertyAccessException: lateinit property clientKeypair has not been initialized\n</code></pre>\n\n<p>Bytecode says...blah blah..</p>\n\n<pre><code>public final static synthetic access$getClientKeypair$p(Lcom/takharsh/ecdh/MainActivity;)Ljava/security/KeyPair;\n\n`L0\nLINENUMBER 11 L0\nALOAD 0\nGETFIELD com/takharsh/ecdh/MainActivity.clientKeypair : Ljava/security/KeyPair;\nDUP\nIFNONNULL L1\nLDC \"clientKeypair\"\nINVOKESTATIC kotlin/jvm/internal/Intrinsics.throwUninitializedPropertyAccessException (Ljava/lang/String;)V\n    L1\nARETURN\n</code></pre>\n\n<p>L2\n    LOCALVARIABLE $this Lcom/takharsh/ecdh/MainActivity; L0 L2 0\n    MAXSTACK = 2\n    MAXLOCALS = 1</p>\n\n<p>Kotlin creates an extra local variable of same instance and check if it null or not, if null then throws 'throwUninitializedPropertyAccessException' else return the local object.\nAbove bytecode explained <a href=\"https://www.kotlindevelopment.com/lateinit-kotlin/\" rel=\"nofollow noreferrer\">here</a>\nSolution\nSince kotlin 1.2 it allows to check weather lateinit var has been initialized or not using <code>.isInitialized</code></p>\n"}, {"comments": [{"owner": {"reputation": 419, "user_id": 4099295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbc51b615d2491cefeb381fe8555d38?s=128&d=identicon&r=PG", "display_name": "Haomin", "link": "https://stackoverflow.com/users/4099295/haomin"}, "edited": false, "score": 0, "creation_date": 1604611092, "post_id": 59785680, "comment_id": 114407600, "body": "Exactly what I was looking for and pointed me to the right direct"}], "tags": [], "owner": {"reputation": 5511, "user_id": 7682257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3VeNQ.jpg?s=128&g=1", "display_name": "Suraj Vaishnav", "link": "https://stackoverflow.com/users/7682257/suraj-vaishnav"}, "is_accepted": false, "score": 46, "last_activity_date": 1608743577, "last_edit_date": 1608743577, "creation_date": 1579257452, "answer_id": 59785680, "question_id": 37618738, "link": "https://stackoverflow.com/questions/37618738/how-to-check-if-a-lateinit-variable-has-been-initialized/59785680#59785680", "title": "How to check if a &quot;lateinit&quot; variable has been initialized?", "body": "<p>You can easily do this by:</p>\n<pre><code>::variableName.isInitialized\n</code></pre>\n<p>or</p>\n<pre><code>this::variableName.isInitialized\n</code></pre>\n<p>But if you are inside a listener or inner class, do this:</p>\n<pre><code>this@OuterClassName::variableName.isInitialized\n</code></pre>\n<p>Note: The above statements work fine if you are writing them in the same file(same class or inner class) where the variable is declared but this will not work <strong>if you want to check the variable of other class (which could be a superclass or any other class which is instantiated)</strong>, for ex:</p>\n<pre><code>class Test {\n    lateinit var str:String\n}\n</code></pre>\n<p>And to check if str is initialized:</p>\n<p><a href=\"https://i.stack.imgur.com/f6wo6.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/f6wo6.png\" alt=\"enter image description here\" /></a></p>\n<p>What we are doing here: checking <code>isInitialized</code> for field <code>str</code> of <code>Test</code> class in <code>Test2</code> class.\nAnd we get an error backing field of var is not accessible at this point.\nCheck a <a href=\"https://stackoverflow.com/questions/47549015/isinitialized-backing-field-of-lateinit-var-is-not-accessible-at-this-point\">question</a> already raised about this.</p>\n"}, {"tags": [], "owner": {"reputation": 12288, "user_id": 5699956, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8f8a27337886706b303e88cf00edb24e?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/5699956/max"}, "is_accepted": false, "score": 8, "last_activity_date": 1610230396, "last_edit_date": 1610230396, "creation_date": 1593674517, "answer_id": 62691044, "question_id": 37618738, "link": "https://stackoverflow.com/questions/37618738/how-to-check-if-a-lateinit-variable-has-been-initialized/62691044#62691044", "title": "How to check if a &quot;lateinit&quot; variable has been initialized?", "body": "<p>If you have a <code>lateinit</code> property in one class and need to check if it is initialized from another class</p>\n<pre><code>if(foo::file.isInitialized) // this wouldn't work\n</code></pre>\n<p>The workaround I have found is to create a function to check if the property is initialized and then you can call that function from any other class.</p>\n<p><strong>Example:</strong></p>\n<pre><code>class Foo() {\n\n    private lateinit var myFile: File\n\n    fun isFileInitialised() = ::file.isInitialized\n}\n\n // in another class\nclass Bar() {\n\n    val foo = Foo()\n\n    if(foo.isFileInitialised()) // this should work\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 193, "user_id": 4176408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1xIHq.jpg?s=128&g=1", "display_name": "Aalishan Ansari", "link": "https://stackoverflow.com/users/4176408/aalishan-ansari"}, "is_accepted": false, "score": 2, "last_activity_date": 1615027120, "creation_date": 1615027120, "answer_id": 66504754, "question_id": 37618738, "link": "https://stackoverflow.com/questions/37618738/how-to-check-if-a-lateinit-variable-has-been-initialized/66504754#66504754", "title": "How to check if a &quot;lateinit&quot; variable has been initialized?", "body": "<p><strong>For me It worked</strong></p>\n<pre><code>if (::file.isInitialized) {\n //true\n} \nelse {\n//false\n}\n</code></pre>\n"}], "owner": {"reputation": 9328, "user_id": 4613968, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/100000926329265/picture?type=large", "display_name": "Mathew Hany", "link": "https://stackoverflow.com/users/4613968/mathew-hany"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184907, "favorite_count": 53, "accepted_answer_id": 46584412, "answer_count": 9, "score": 571, "last_activity_date": 1615027120, "creation_date": 1464969236, "last_edit_date": 1574856213, "question_id": 37618738, "link": "https://stackoverflow.com/questions/37618738/how-to-check-if-a-lateinit-variable-has-been-initialized", "title": "How to check if a &quot;lateinit&quot; variable has been initialized?", "body": "<p>I wonder if there is a way to check if a <code>lateinit</code> variable has been initialized. For example:</p>\n\n<pre><code>class Foo() {\n\n    private lateinit var myFile: File\n\n    fun bar(path: String?) {\n        path?.let { myFile = File(it) }\n    }\n\n    fun bar2() {\n        myFile.whateverMethod()\n        // May crash since I don't know whether myFile has been initialized\n    }\n}\n</code></pre>\n"}, {"tags": ["kotlin", "control-flow"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1465019349, "post_id": 37610629, "comment_id": 62735931, "body": "the <code>if</code> construct is more preferable for binary situations like this one. Has the exact same effect as <code>when</code> here"}, {"owner": {"reputation": 2442, "user_id": 3666302, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e9aed854fcd666aba1316ef908ad5913?s=128&d=identicon&r=PG&f=1", "display_name": "TomTom", "link": "https://stackoverflow.com/users/3666302/tomtom"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1465042387, "post_id": 37610629, "comment_id": 62741908, "body": "Why is it preferrable if it has the same effect? The advantage of <code>when</code> is that it has room to grow."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1465044838, "post_id": 37610629, "comment_id": 62742635, "body": "In case of nullability <code>when</code> has nothing to grow for. Using <code>when</code> as a glorified <code>if</code> is quite wasteful IMO"}, {"owner": {"reputation": 2442, "user_id": 3666302, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e9aed854fcd666aba1316ef908ad5913?s=128&d=identicon&r=PG&f=1", "display_name": "TomTom", "link": "https://stackoverflow.com/users/3666302/tomtom"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1465063713, "post_id": 37610629, "comment_id": 62748730, "body": "It&#39;s only wasteful if <code>when</code> desugars to something that uses more resources than a plain <code>if</code>. If not, then you have one less line and conditional expandability in contrast to <code>if</code>."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1465067288, "post_id": 37610629, "comment_id": 62749755, "body": "When I see <code>when</code>, I prepare myself to a multy-chose. So it would surprised  me to find only a bi-chose."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1465067371, "post_id": 37610629, "comment_id": 62749785, "body": "It is only a matter of taste. Fortunately Kotlin allows us to do what we think is necessary"}], "answers": [{"tags": [], "owner": {"reputation": 1453, "user_id": 2804610, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m7Bke.jpg?s=128&g=1", "display_name": "EPadronU", "link": "https://stackoverflow.com/users/2804610/epadronu"}, "is_accepted": false, "score": 12, "last_activity_date": 1464946274, "creation_date": 1464946274, "answer_id": 37610762, "question_id": 37610629, "link": "https://stackoverflow.com/questions/37610629/how-to-pattern-match-optionals-in-kotlin/37610762#37610762", "title": "How to pattern match optionals in Kotlin?", "body": "<p>You can accomplish that as follows:</p>\n\n<pre><code>val meaningOfLife: String? = null\n\nwhen (meaningOfLife) {\n  is String -&gt; println(meaningOfLife)\n  else -&gt; println(\"There's no meaning\")\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 2, "creation_date": 1464958563, "post_id": 37610857, "comment_id": 62712543, "body": "OP wanted to know how to use pattern matching to do it. Anyways, I think your expression could be cleaned up to this: <code>println(meaningOfLife ?: &quot;There is no meaning&quot;)</code>"}], "tags": [], "owner": {"reputation": 11, "user_id": 6219767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/deca0f5cc9d866613c521af94791a6c0?s=128&d=identicon&r=PG&f=1", "display_name": "Vasiliy_N", "link": "https://stackoverflow.com/users/6219767/vasiliy-n"}, "is_accepted": false, "score": 0, "last_activity_date": 1464950056, "last_edit_date": 1464950056, "creation_date": 1464946552, "answer_id": 37610857, "question_id": 37610629, "link": "https://stackoverflow.com/questions/37610629/how-to-pattern-match-optionals-in-kotlin/37610857#37610857", "title": "How to pattern match optionals in Kotlin?", "body": "<p>Try this:</p>\n\n<pre><code>val meaningOfLife : String? = null    \nmeaningOfLife?.let { println(it) } ?: println(\"There's no meaning\")\n</code></pre>\n\n<p><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/let.html\" rel=\"nofollow\">let in stdlib</a></p>\n"}, {"comments": [{"owner": {"reputation": 1453, "user_id": 2804610, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m7Bke.jpg?s=128&g=1", "display_name": "EPadronU", "link": "https://stackoverflow.com/users/2804610/epadronu"}, "edited": false, "score": 1, "creation_date": 1464971556, "post_id": 37617974, "comment_id": 62721287, "body": "Making <code>is String</code> the first case achieves a similar effect."}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 1453, "user_id": 2804610, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m7Bke.jpg?s=128&g=1", "display_name": "EPadronU", "link": "https://stackoverflow.com/users/2804610/epadronu"}, "edited": false, "score": 1, "creation_date": 1464973343, "post_id": 37617974, "comment_id": 62722239, "body": "@EPadronU, not completely: as seen from bytecode perspective, <code>is String</code> causes <code>instanceof</code> check, while the code in the answer doesn&#39;t, it only compares the reference with <code>null</code>."}, {"owner": {"reputation": 1453, "user_id": 2804610, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m7Bke.jpg?s=128&g=1", "display_name": "EPadronU", "link": "https://stackoverflow.com/users/2804610/epadronu"}, "edited": false, "score": 0, "creation_date": 1464974015, "post_id": 37617974, "comment_id": 62722590, "body": "Thank you. That&#39;s very useful to know. Fortunately, I said &quot;similar&quot; ;)"}, {"owner": {"reputation": 2442, "user_id": 3666302, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e9aed854fcd666aba1316ef908ad5913?s=128&d=identicon&r=PG&f=1", "display_name": "TomTom", "link": "https://stackoverflow.com/users/3666302/tomtom"}, "edited": false, "score": 0, "creation_date": 1465042231, "post_id": 37617974, "comment_id": 62741853, "body": "Unfortunately the smart cast only works if <code>meaningOfLife</code> is immutable. There&#39;s no way around <code>meaningOfLife!!.function()</code> when it&#39;s mutable, is it?"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 2442, "user_id": 3666302, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e9aed854fcd666aba1316ef908ad5913?s=128&d=identicon&r=PG&f=1", "display_name": "TomTom", "link": "https://stackoverflow.com/users/3666302/tomtom"}, "edited": false, "score": 0, "creation_date": 1465042572, "post_id": 37617974, "comment_id": 62741972, "body": "@TomTom, the compiler cannot guarantee null-safety in case of <code>var</code>, so there&#39;s indeed no other way but to create another local <code>val</code>. But when a variable is non-nullable and you only need smart cast for <code>var</code> you can write something like <code>myVar.let { when (it) { &#47;*smart cast works here*&#47; } }</code>."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 18, "last_activity_date": 1465043046, "last_edit_date": 1495542863, "creation_date": 1464966914, "answer_id": 37617974, "question_id": 37610629, "link": "https://stackoverflow.com/questions/37610629/how-to-pattern-match-optionals-in-kotlin/37617974#37617974", "title": "How to pattern match optionals in Kotlin?", "body": "<p>One of possible ways is to match <code>null</code> first so that in <code>else</code> branch the <code>String?</code> is implicitly converted to <code>String</code>:</p>\n\n<pre><code>val meaningOfLife: String? = null\n\nwhen (meaningOfLife) {\n    null -&gt; println(\"There's no meaning\")\n    else -&gt; println(meaningOfLife.toUpperCase()) //non-nullable here\n}\n</code></pre>\n\n<p>This is a special case of a <a href=\"https://kotlinlang.org/docs/reference/typecasts.html#smart-casts\" rel=\"noreferrer\">smart cast</a> performed by the compiler.</p>\n\n<p>Similar effect can be achieved with <code>is String</code> and <code>else</code> branches -- <code>is String</code>-check is true when the value is not null.</p>\n\n<p>For more idioms regarding null-safety please see <a href=\"https://stackoverflow.com/a/34498563/2196460\">this answer</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1465019864, "post_id": 37626897, "comment_id": 62736041, "body": "I understand the question was probably not about it, but I think this option should also be mentioned"}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 2, "last_activity_date": 1465019827, "creation_date": 1465019827, "answer_id": 37626897, "question_id": 37610629, "link": "https://stackoverflow.com/questions/37610629/how-to-pattern-match-optionals-in-kotlin/37626897#37626897", "title": "How to pattern match optionals in Kotlin?", "body": "<p>FYI, the particular situation in the question has a way simple solution with the <code>?:</code> operator of default value:</p>\n\n<pre><code>println(meaningOfLife ?: \"There's no meaning\")\n</code></pre>\n\n<p>The example in the question is probably a simplified real situation, so a null check is how I would do it. IMHO <code>if</code> is a better way to go when you have a binary chose of control flow:</p>\n\n<pre><code>if(meaningOfLife != null)\n    println(meaningOfLife)\nelse\n    println(\"There's no meaning\")\n</code></pre>\n\n<p>Takes exactly the same number of lines, BTW.</p>\n"}], "owner": {"reputation": 2442, "user_id": 3666302, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e9aed854fcd666aba1316ef908ad5913?s=128&d=identicon&r=PG&f=1", "display_name": "TomTom", "link": "https://stackoverflow.com/users/3666302/tomtom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2195, "favorite_count": 1, "accepted_answer_id": 37617974, "answer_count": 4, "score": 17, "last_activity_date": 1465043046, "creation_date": 1464945889, "question_id": 37610629, "link": "https://stackoverflow.com/questions/37610629/how-to-pattern-match-optionals-in-kotlin", "title": "How to pattern match optionals in Kotlin?", "body": "<p>Is it possible to write something like this, or do we have to revert back to manual null checking in Kotlin?</p>\n\n<pre><code>val meaningOfLife : String? = null\n\nwhen meaningOfLife {\n    exists -&gt; println(meaningOfLife)\n    else   -&gt; println(\"There's no meaning\")\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 6493, "user_id": 1020900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab5f80978d59af0204e0986ca41d2c23?s=128&d=identicon&r=PG", "display_name": "bashor", "link": "https://stackoverflow.com/users/1020900/bashor"}, "edited": false, "score": 0, "creation_date": 1465077630, "post_id": 37609071, "comment_id": 62752694, "body": "Related issue: <a href=\"https://youtrack.jetbrains.com/issue/KT-5075\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-5075</a>"}, {"owner": {"reputation": 21048, "user_id": 603516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/40895ef337d0a2eb7d538f5f8b3e6d58?s=128&d=identicon&r=PG", "display_name": "Vadzim", "link": "https://stackoverflow.com/users/603516/vadzim"}, "edited": false, "score": 2, "creation_date": 1495959767, "post_id": 37609071, "comment_id": 75460475, "body": "<a href=\"https://youtrack.jetbrains.com/issue/KT-12611\" rel=\"nofollow noreferrer\">KT-12611</a> states that <code>indices</code> optimization was included in Kotlin 1.0.3."}], "answers": [{"comments": [{"owner": {"reputation": 41540, "user_id": 127013, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5cfa38a7e54e6c6a850dc6169a699246?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/127013/matthias"}, "edited": false, "score": 0, "creation_date": 1464944160, "post_id": 37609496, "comment_id": 62703572, "body": "True, this gets rid of the <code>IntRange</code> allocation. Which is interesting, because it&#39;s still denoting an IntRange syntax wise. Thanks! Worth filing a bug against the documentation for this? It&#39;s misleading at best."}, {"owner": {"reputation": 41540, "user_id": 127013, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5cfa38a7e54e6c6a850dc6169a699246?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/127013/matthias"}, "edited": false, "score": 0, "creation_date": 1464944631, "post_id": 37609496, "comment_id": 62703846, "body": "To add to my previous comment: clearly compiler magic at work, since as soon you pull out <code>0..count - 1</code> into a function acting on the array, it results in an <code>IntRange</code> allocation."}, {"owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "reply_to_user": {"reputation": 41540, "user_id": 127013, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5cfa38a7e54e6c6a850dc6169a699246?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/127013/matthias"}, "edited": false, "score": 3, "creation_date": 1464946597, "post_id": 37609496, "comment_id": 62705052, "body": "That&#39;s a pure compiler optimization and I suppose there will be more in future. <a href=\"https://youtrack.jetbrains.com/issue/KT-11173\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-11173</a>"}, {"owner": {"reputation": 41540, "user_id": 127013, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5cfa38a7e54e6c6a850dc6169a699246?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/127013/matthias"}, "edited": false, "score": 1, "creation_date": 1464980076, "post_id": 37609496, "comment_id": 62725663, "body": "After investigating Ilya&#39;s answer more, I don&#39;t think this should be the accepted answer anymore. Any of the 3 suggestions result in no extra allocations, given the iterable is an array, NOT a list."}], "tags": [], "owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "is_accepted": true, "score": 19, "last_activity_date": 1464942293, "creation_date": 1464942293, "answer_id": 37609496, "question_id": 37609071, "link": "https://stackoverflow.com/questions/37609071/array-list-iteration-without-extra-object-allocations/37609496#37609496", "title": "Array/List iteration without extra object allocations", "body": "<p>As far as I know the only allocation-less way to define a <code>for</code> loop is</p>\n\n<pre><code>for (i in 0..count - 1)\n</code></pre>\n\n<p>All other forms lead to either a <code>Range</code> allocation or an <code>Iterator</code> allocation. Unfortunately, you cannot even define an effective reverse <code>for</code> loop.</p>\n"}, {"comments": [{"owner": {"reputation": 41540, "user_id": 127013, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5cfa38a7e54e6c6a850dc6169a699246?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/127013/matthias"}, "edited": false, "score": 2, "creation_date": 1464979486, "post_id": 37619192, "comment_id": 62725370, "body": "Now this is interesting. I assumed all of these would lead to the allocation of iterators--but they don&#39;t, at least not if the iterated object is an array. They do for Lists and other collection types. Thanks for pointing this out!"}], "tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": false, "score": 42, "last_activity_date": 1464970779, "creation_date": 1464970779, "answer_id": 37619192, "question_id": 37609071, "link": "https://stackoverflow.com/questions/37609071/array-list-iteration-without-extra-object-allocations/37619192#37619192", "title": "Array/List iteration without extra object allocations", "body": "<p>To iterate an array without allocating extra objects you can use one of the following ways.</p>\n\n<ol>\n<li><code>for</code>-loop</li>\n</ol>\n\n<pre><code>    for (e in arr) {\n        println(e)\n    }\n</code></pre>\n\n<ol start=\"2\">\n<li><code>forEach</code> extension</li>\n</ol>\n\n<pre><code>    arr.forEach {\n        println(it)\n    }\n</code></pre>\n\n<ol start=\"3\">\n<li><code>forEachIndexed</code> extension, if you need to know index of each element</li>\n</ol>\n\n<pre><code>    arr.forEachIndexed { index, e -&gt;\n        println(\"$e at $index\")\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 454, "user_id": 9617715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcf88fd452f56344b35129f952de8b86?s=128&d=identicon&r=PG&f=1", "display_name": "Manikandan", "link": "https://stackoverflow.com/users/9617715/manikandan"}, "is_accepted": false, "score": 0, "last_activity_date": 1581234668, "last_edit_date": 1581234668, "creation_date": 1581234317, "answer_id": 60134505, "question_id": 37609071, "link": "https://stackoverflow.com/questions/37609071/array-list-iteration-without-extra-object-allocations/60134505#60134505", "title": "Array/List iteration without extra object allocations", "body": "<p>Here is an example of preparing a list and iterate with index and value.</p>\n\n<pre><code>val list = arrayListOf(\"1\", \"11\", \"111\")\nfor ((index, value) in list.withIndex()) {\n   println(\"$index: $value\")\n}\n</code></pre>\n\n<p>Output: </p>\n\n<p>0:1</p>\n\n<p>1:11</p>\n\n<p>2:111</p>\n\n<p>Also, following code works similar,</p>\n\n<pre><code>val simplearray = arrayOf(1, 2, 3, 4, 5)\nfor ((index, value) in simplearray.withIndex()) {\n    println(\"$index: $value\")\n}\n</code></pre>\n"}], "owner": {"reputation": 41540, "user_id": 127013, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5cfa38a7e54e6c6a850dc6169a699246?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/127013/matthias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36047, "favorite_count": 11, "accepted_answer_id": 37609496, "answer_count": 3, "score": 41, "last_activity_date": 1581234668, "creation_date": 1464940905, "last_edit_date": 1592644375, "question_id": 37609071, "link": "https://stackoverflow.com/questions/37609071/array-list-iteration-without-extra-object-allocations", "title": "Array/List iteration without extra object allocations", "body": "<p>I'm working on a game written in Kotlin and was looking into improving GC churn. One of the major sources of churn are for-loops called in the main game/rendering loops that result in the allocation of iterators.</p>\n<p>Turning to the documentation, I found this paragraph:</p>\n<blockquote>\n<p>A for loop over an array is compiled to an index-based loop that does not create an iterator object.</p>\n<p>If you want to iterate through an array or a list with an index, you can do it this way:</p>\n</blockquote>\n<pre><code>for (i in array.indices)\n  print(array[i])\n</code></pre>\n<blockquote>\n<p>Note that this \u201citeration through a range\u201d is compiled down to optimal implementation with no extra objects created.</p>\n</blockquote>\n<p><a href=\"https://kotlinlang.org/docs/reference/control-flow.html#for-loops\" rel=\"noreferrer\">https://kotlinlang.org/docs/reference/control-flow.html#for-loops</a></p>\n<p>Is this really true? To verify, I took this simple Kotlin program and inspected the generated byte code:</p>\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    val arr = arrayOf(1, 2, 3)\n    for (i in arr.indices) {\n        println(arr[i])\n    }\n}\n</code></pre>\n<p>According to the quote above, this should not result in any objects allocated, but get compiled down to a good old pre-Java-5 style for-loop. However, what I got was this:</p>\n<pre><code>      41: aload_1\n      42: checkcast     #23                 // class &quot;[Ljava/lang/Object;&quot;\n      45: invokestatic  #31                 // Method kotlin/collections/ArraysKt.getIndices:([Ljava/lang/Object;)Lkotlin/ranges/IntRange;\n      48: dup\n      49: invokevirtual #37                 // Method kotlin/ranges/IntRange.getFirst:()I\n      52: istore_2\n      53: invokevirtual #40                 // Method kotlin/ranges/IntRange.getLast:()I\n      56: istore_3\n      57: iload_2\n      58: iload_3\n      59: if_icmpgt     93\n</code></pre>\n<p>This looks to me as if a method called <code>getIndices</code> is called that allocates a temporary <code>IntRange</code> object to back up bounds checking in this loop. How is this an &quot;optimal implementation&quot; with &quot;no extra objects created&quot;, or am I missing something?</p>\n<p><strong>UPDATE:</strong>\nSo, after toying around a bit more and looking at the answers, the following appears to be true for Kotlin 1.0.2:</p>\n<p><strong>Arrays:</strong></p>\n<ul>\n<li><code>for (i in array.indices)</code>: range allocation</li>\n<li><code>for (i in 0..array.size)</code>: no allocation</li>\n<li><code>for (el in array)</code>: no allocation</li>\n<li><code>array.forEach</code>: no allocation</li>\n</ul>\n<p><strong>Collections:</strong></p>\n<ul>\n<li><code>for (i in coll.indices)</code> range allocation</li>\n<li><code>for (i in 0..coll.size)</code>: no allocation</li>\n<li><code>for (el in coll)</code>: iterator allocation</li>\n<li><code>coll.forEach</code>: iterator allocation</li>\n</ul>\n"}, {"tags": ["constants", "kotlin"], "comments": [{"owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "edited": false, "score": 1, "creation_date": 1464881689, "post_id": 37595936, "comment_id": 62677549, "body": "<a href=\"https://kotlinlang.org/docs/reference/properties.html#compile-time-constants\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/&hellip;</a>"}, {"owner": {"reputation": 2399, "user_id": 6838146, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VE5iL.jpg?s=128&g=1", "display_name": "Lokesh Desai", "link": "https://stackoverflow.com/users/6838146/lokesh-desai"}, "edited": false, "score": 0, "creation_date": 1591372798, "post_id": 37595936, "comment_id": 110040959, "body": "You can read this article <a href=\"https://www.android4dev.com/difference-between-var-val-and-const-in-kotlin/\" rel=\"nofollow noreferrer\">android4dev.com/difference-between-var-val-and-const-in-kotl&zwnj;&#8203;in</a>  or Watch this video <a href=\"https://www.youtube.com/watch?v=DQLrEGqSSI8&amp;t=6s\" rel=\"nofollow noreferrer\">youtube.com/watch?v=DQLrEGqSSI8&amp;t=6s</a>"}], "answers": [{"comments": [{"owner": {"reputation": 9328, "user_id": 4613968, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/100000926329265/picture?type=large", "display_name": "Mathew Hany", "link": "https://stackoverflow.com/users/4613968/mathew-hany"}, "edited": false, "score": 3, "creation_date": 1464881574, "post_id": 37596023, "comment_id": 62677463, "body": "What about something like this: <code>const val foo = &quot;Hello world&quot;</code> and <code>val bar = &quot;Hello world&quot;</code>? Are they the same?"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 9328, "user_id": 4613968, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/100000926329265/picture?type=large", "display_name": "Mathew Hany", "link": "https://stackoverflow.com/users/4613968/mathew-hany"}, "edited": false, "score": 5, "creation_date": 1464881645, "post_id": 37596023, "comment_id": 62677522, "body": "@MathewHany, at least not in terms of bytecode, see: <a href=\"http://stackoverflow.com/questions/37482378/static-data-in-kotlin/37485356#37485356\" title=\"static data in kotlin\">stackoverflow.com/questions/37482378/static-data-in-kotlin/&hellip;</a>"}, {"owner": {"reputation": 19421, "user_id": 3795501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eaeec79535337d9a96f63f2d6ef3e49d?s=128&d=identicon&r=PG", "display_name": "Luka Jacobowitz", "link": "https://stackoverflow.com/users/3795501/luka-jacobowitz"}, "edited": false, "score": 4, "creation_date": 1464881731, "post_id": 37596023, "comment_id": 62677576, "body": "I think <code>const</code> values will just be completely inlined during compilation."}, {"owner": {"reputation": 489, "user_id": 136062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15157d8f8e0dfd5acad81c078ceee4b0?s=128&d=identicon&r=PG", "display_name": "Eric Lloyd", "link": "https://stackoverflow.com/users/136062/eric-lloyd"}, "edited": false, "score": 125, "creation_date": 1496937093, "post_id": 37596023, "comment_id": 75878314, "body": "This begs another question: Why does Kotlin require <code>const val</code> instead of just <code>const</code>? It seems to me the <code>val</code> keyword is totally superfluous in this context, since <code>const var</code> would be absurd on its face."}, {"owner": {"reputation": 3254, "user_id": 843726, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/95b742d1293465a9958a06a7b27273ea?s=128&d=identicon&r=PG", "display_name": "Gonzalo", "link": "https://stackoverflow.com/users/843726/gonzalo"}, "edited": false, "score": 3, "creation_date": 1521815998, "post_id": 37596023, "comment_id": 85906930, "body": "Then why the differentiation? Why can&#39;t the compiler determine if a value is a const and compute its value at compile time if it is?"}, {"owner": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "edited": false, "score": 0, "creation_date": 1522066660, "post_id": 37596023, "comment_id": 85985654, "body": "<code>const val</code> is underlined with red with a message: <code>Modifier &#39;const&#39; is not applicable to &#39;local variable&#39;</code> inside a function."}, {"owner": {"reputation": 509, "user_id": 2832996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46814cb72562ea0b2e5b9da4cad32ea6?s=128&d=identicon&r=PG", "display_name": "Aro", "link": "https://stackoverflow.com/users/2832996/aro"}, "reply_to_user": {"reputation": 489, "user_id": 136062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15157d8f8e0dfd5acad81c078ceee4b0?s=128&d=identicon&r=PG", "display_name": "Eric Lloyd", "link": "https://stackoverflow.com/users/136062/eric-lloyd"}, "edited": false, "score": 26, "creation_date": 1522697766, "post_id": 37596023, "comment_id": 86242248, "body": "@EricLloyd With <code>const val</code>, <code>const</code> is a modifier on <code>val</code> rather than a keyword. Modifiers &gt; keywords. More examples of this same design are, <code>annotation&#47;enum&#47;data class</code>, <code>private val</code>, <code>inline fun</code>, etc."}, {"owner": {"reputation": 50744, "user_id": 835883, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/n7jEz.png?s=128&g=1", "display_name": "j2emanue", "link": "https://stackoverflow.com/users/835883/j2emanue"}, "edited": false, "score": 1, "creation_date": 1546946123, "post_id": 37596023, "comment_id": 95013470, "body": "since consts are assigned at compile time, when the object is destroyed by GC will the constants be free or do they reside forever ?"}, {"owner": {"reputation": 19894, "user_id": 753632, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e1eaa448ca773169f1296987a87cb67?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidDev", "link": "https://stackoverflow.com/users/753632/androiddev"}, "reply_to_user": {"reputation": 509, "user_id": 2832996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46814cb72562ea0b2e5b9da4cad32ea6?s=128&d=identicon&r=PG", "display_name": "Aro", "link": "https://stackoverflow.com/users/2832996/aro"}, "edited": false, "score": 0, "creation_date": 1558967513, "post_id": 37596023, "comment_id": 99263495, "body": "@Aro So in other words, a constant modifying a constant. Yeah makes sense (rolls eyes)."}, {"owner": {"reputation": 4090, "user_id": 8281994, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/iPGSu.png?s=128&g=1", "display_name": "Florian Walther", "link": "https://stackoverflow.com/users/8281994/florian-walther"}, "reply_to_user": {"reputation": 489, "user_id": 136062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15157d8f8e0dfd5acad81c078ceee4b0?s=128&d=identicon&r=PG", "display_name": "Eric Lloyd", "link": "https://stackoverflow.com/users/136062/eric-lloyd"}, "edited": false, "score": 0, "creation_date": 1570611072, "post_id": 37596023, "comment_id": 102963435, "body": "@EricLloyd A <code>const</code> is inlined by the compiler which you don&#39;t always want because it requires recompilation in order the change the value"}, {"owner": {"reputation": 489, "user_id": 136062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15157d8f8e0dfd5acad81c078ceee4b0?s=128&d=identicon&r=PG", "display_name": "Eric Lloyd", "link": "https://stackoverflow.com/users/136062/eric-lloyd"}, "reply_to_user": {"reputation": 4090, "user_id": 8281994, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/iPGSu.png?s=128&g=1", "display_name": "Florian Walther", "link": "https://stackoverflow.com/users/8281994/florian-walther"}, "edited": false, "score": 2, "creation_date": 1571120551, "post_id": 37596023, "comment_id": 103123611, "body": "@FlorianWalther Yeah, that&#39;s kinda the idea -- I typically use <code>const</code>s for truly immutable values -- HTTP verbs, the value of Pi, etc. If it&#39;s a mutable or even configurable value, a <code>const</code> isn&#39;t the answer."}, {"owner": {"reputation": 1684, "user_id": 205943, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/a6fe3fd7c49c4cb055f1d73b7dc4fed6?s=128&d=identicon&r=PG", "display_name": "Dainius", "link": "https://stackoverflow.com/users/205943/dainius"}, "edited": false, "score": 0, "creation_date": 1611216106, "post_id": 37596023, "comment_id": 116380080, "body": "seeing how Kotlin is superior because it reduces nosiness of unnecessary tings, &quot;val&quot; in &quot;const val&quot; is totally useless, unless of course you can write &quot;const var&quot; which is nonsense."}], "tags": [], "owner": {"reputation": 19421, "user_id": 3795501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eaeec79535337d9a96f63f2d6ef3e49d?s=128&d=identicon&r=PG", "display_name": "Luka Jacobowitz", "link": "https://stackoverflow.com/users/3795501/luka-jacobowitz"}, "is_accepted": true, "score": 467, "last_activity_date": 1525705609, "last_edit_date": 1525705609, "creation_date": 1464881060, "answer_id": 37596023, "question_id": 37595936, "link": "https://stackoverflow.com/questions/37595936/what-is-the-difference-between-const-and-val/37596023#37596023", "title": "What is the difference between &quot;const&quot; and &quot;val&quot;?", "body": "<p><code>const</code>s are compile time constants. Meaning that their value has to be assigned during compile time, unlike <code>val</code>s, where it can be done at runtime.</p>\n\n<p>This means, that <code>const</code>s can never be assigned to a function or any class constructor, but only to a <code>String</code> or primitive.</p>\n\n<p>For example:</p>\n\n<pre><code>const val foo = complexFunctionCall()   //Not okay\nval fooVal = complexFunctionCall()  //Okay\n\nconst val bar = \"Hello world\"           //Also okay\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1453, "user_id": 2804610, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m7Bke.jpg?s=128&g=1", "display_name": "EPadronU", "link": "https://stackoverflow.com/users/2804610/epadronu"}, "is_accepted": false, "score": 42, "last_activity_date": 1553041690, "last_edit_date": 1592644375, "creation_date": 1464965303, "answer_id": 37617464, "question_id": 37595936, "link": "https://stackoverflow.com/questions/37595936/what-is-the-difference-between-const-and-val/37617464#37617464", "title": "What is the difference between &quot;const&quot; and &quot;val&quot;?", "body": "<p>Just to add to Luka's answer:</p>\n<blockquote>\n<p><strong>Compile-Time Constants</strong></p>\n<p>Properties the value of which is known at compile time can be marked as compile time constants using the const modifier. Such properties need to fulfill the following requirements:</p>\n<ul>\n<li>Top-level or member of an <a href=\"https://kotlinlang.org/docs/reference/object-declarations.html#object-declarations\" rel=\"noreferrer\">object declaration</a> or a <a href=\"https://kotlinlang.org/docs/reference/object-declarations.html#companion-objects\" rel=\"noreferrer\">companion object</a>.</li>\n<li>Initialized with a value of type String or a primitive type</li>\n<li>No custom getter</li>\n</ul>\n<p>Such properties can be used in annotations.</p>\n</blockquote>\n<p>Source: <a href=\"https://kotlinlang.org/docs/reference/properties.html#compile-time-constants\" rel=\"noreferrer\">Official documentation</a></p>\n"}, {"comments": [{"owner": {"reputation": 1210, "user_id": 4520965, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/7j7J0.png?s=128&g=1", "display_name": "James Jordan Taylor", "link": "https://stackoverflow.com/users/4520965/james-jordan-taylor"}, "edited": false, "score": 2, "creation_date": 1541360368, "post_id": 51807142, "comment_id": 93180683, "body": "Could someone state in a comment why this answer was downvoted to oblivion?"}, {"owner": {"reputation": 16930, "user_id": 1032613, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/h4jzP.jpg?s=128&g=1", "display_name": "user1032613", "link": "https://stackoverflow.com/users/1032613/user1032613"}, "reply_to_user": {"reputation": 1210, "user_id": 4520965, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/7j7J0.png?s=128&g=1", "display_name": "James Jordan Taylor", "link": "https://stackoverflow.com/users/4520965/james-jordan-taylor"}, "edited": false, "score": 3, "creation_date": 1541632787, "post_id": 51807142, "comment_id": 93287313, "body": "@JamesJordanTaylor I upvoted. But I assume it&#39;s because some people didn&#39;t read it carefully, and at a quick glance this answer seems to be talking about how to convert from java to kotlin, which would be off-topic."}, {"owner": {"reputation": 1898, "user_id": 2990350, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/Evlzj.jpg?s=128&g=1", "display_name": "DYS", "link": "https://stackoverflow.com/users/2990350/dys"}, "edited": false, "score": 2, "creation_date": 1550031773, "post_id": 51807142, "comment_id": 96115853, "body": "What if <code>const</code> is removed, will it yield a different Java file?"}, {"owner": {"reputation": 350, "user_id": 2549436, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100001046890306/picture?type=large", "display_name": "Varun Ajay Gupta", "link": "https://stackoverflow.com/users/2549436/varun-ajay-gupta"}, "reply_to_user": {"reputation": 1898, "user_id": 2990350, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/Evlzj.jpg?s=128&g=1", "display_name": "DYS", "link": "https://stackoverflow.com/users/2990350/dys"}, "edited": false, "score": 2, "creation_date": 1583249144, "post_id": 51807142, "comment_id": 107048134, "body": "@DYS: I think it will remove the &quot;static&quot; and it will be just public final String str = &quot;hello&quot;;"}], "tags": [], "owner": {"reputation": 453, "user_id": 8510023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c490925c5133c1c4f3a96640f1f1580a?s=128&d=identicon&r=PG", "display_name": "Jin Wang", "link": "https://stackoverflow.com/users/8510023/jin-wang"}, "is_accepted": false, "score": 24, "last_activity_date": 1534063020, "creation_date": 1534063020, "answer_id": 51807142, "question_id": 37595936, "link": "https://stackoverflow.com/questions/37595936/what-is-the-difference-between-const-and-val/51807142#51807142", "title": "What is the difference between &quot;const&quot; and &quot;val&quot;?", "body": "<p>You can transform the Kotlin to Java.\nThen you can see <strong>const</strong> has one more <strong>static</strong> modifier than <strong>val</strong>.\nThe simple code like this.</p>\n\n<p>Kotlin:</p>\n\n<pre><code>const val str = \"hello\"\nclass SimplePerson(val name: String, var age: Int)\n</code></pre>\n\n<p>To Java(Portion):</p>\n\n<pre><code>@NotNull\npublic static final String str = \"hello\";\n\npublic final class SimplePerson {\n   @NotNull\n   private final String name;\n   private int age;\n\n   @NotNull\n   public final String getName() {\n      return this.name;\n   }\n\n   public final int getAge() {\n      return this.age;\n   }\n\n   public final void setAge(int var1) {\n      this.age = var1;\n   }\n\n   public SimplePerson(@NotNull String name, int age) {\n      Intrinsics.checkParameterIsNotNull(name, \"name\");\n      super();\n      this.name = name;\n      this.age = age;\n   }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 441, "user_id": 10182932, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GEtkWrXsNWo/AAAAAAAAAAI/AAAAAAAAABA/4DUafuH5Njc/photo.jpg?sz=128", "display_name": "Shivam Tripathi", "link": "https://stackoverflow.com/users/10182932/shivam-tripathi"}, "is_accepted": false, "score": 15, "last_activity_date": 1582660927, "creation_date": 1582660927, "answer_id": 60402319, "question_id": 37595936, "link": "https://stackoverflow.com/questions/37595936/what-is-the-difference-between-const-and-val/60402319#60402319", "title": "What is the difference between &quot;const&quot; and &quot;val&quot;?", "body": "<p><strong>const kotlin to Java</strong></p>\n\n<pre><code>const val Car_1 = \"BUGATTI\" // final static String Car_1 = \"BUGATTI\";\n</code></pre>\n\n<p><strong>val kotlin to Java</strong></p>\n\n<pre><code>val Car_1 = \"BUGATTI\"   // final String Car_1 = \"BUGATTI\";\n</code></pre>\n\n<p><strong>In simple Language</strong></p>\n\n<ol>\n<li>The value of the const variable is known at compile time.</li>\n<li>The value of val is used to define constants at run time.</li>\n</ol>\n\n<p><strong>Example 1-</strong></p>\n\n<pre><code>const val Car_1 = \"BUGATTI\" \u2714  \nval Car_2 = getCar() \u2714    \nconst val Car_3 = getCar() \u274c \n\n//Because the function will not get executed at the compile time so it will through error\n\nfun getCar(): String {\n    return \"BUGATTI\"\n}\n</code></pre>\n\n<p>This is because getCar() is evaluated at run time and assigns the value to Car.</p>\n\n<p><strong>Additionally -</strong></p>\n\n<ol>\n<li><strong>val</strong> is read-only means immutable that is known at run-time</li>\n<li><strong>var</strong> is mutable that is known at run-time</li>\n<li><strong>const</strong> are immutable and variables that are known at compile-time </li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 1062, "user_id": 4838216, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/4d5cbe16a581e7620802a34270c46595?s=128&d=identicon&r=PG&f=1", "display_name": "whatwhatwhat", "link": "https://stackoverflow.com/users/4838216/whatwhatwhat"}, "edited": false, "score": 0, "creation_date": 1607033447, "post_id": 60463951, "comment_id": 115153382, "body": "Compile-time happens before run-time, right?"}, {"owner": {"reputation": 396, "user_id": 12982747, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XNXDHKKaBok/AAAAAAAAAAI/AAAAAAAAAAA/AKF05nBy6gkcCrQIHOItWbOdUzi825_qJA/photo.jpg?sz=128", "display_name": "Arpan Sircar", "link": "https://stackoverflow.com/users/12982747/arpan-sircar"}, "reply_to_user": {"reputation": 1062, "user_id": 4838216, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/4d5cbe16a581e7620802a34270c46595?s=128&d=identicon&r=PG&f=1", "display_name": "whatwhatwhat", "link": "https://stackoverflow.com/users/4838216/whatwhatwhat"}, "edited": false, "score": 1, "creation_date": 1614613400, "post_id": 60463951, "comment_id": 117431560, "body": "@whatwhatwhat yes. The code is compiled before being sent for execution. The point of time when the code executes is what is essentially known as run-time execution."}], "tags": [], "owner": {"reputation": 351, "user_id": 3540896, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tFy7I.jpg?s=128&g=1", "display_name": "Kifayat Ullah", "link": "https://stackoverflow.com/users/3540896/kifayat-ullah"}, "is_accepted": false, "score": 7, "last_activity_date": 1582983088, "last_edit_date": 1582983088, "creation_date": 1582970818, "answer_id": 60463951, "question_id": 37595936, "link": "https://stackoverflow.com/questions/37595936/what-is-the-difference-between-const-and-val/60463951#60463951", "title": "What is the difference between &quot;const&quot; and &quot;val&quot;?", "body": "<p>Both <code>val</code> and <code>const</code> are immutable. </p>\n\n<p><code>const</code> is used to declare compile-time constants, whereas <code>val</code> for run-time constants.</p>\n\n<pre><code>const val VENDOR_NAME = \"Kifayat Pashteen\"  // Assignment done at compile-time\n\nval PICon = getIP()  // Assignment done at run-time\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11426, "user_id": 1573279, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/0J39C.jpg?s=128&g=1", "display_name": "Gunaseelan", "link": "https://stackoverflow.com/users/1573279/gunaseelan"}, "edited": false, "score": 0, "creation_date": 1610182035, "post_id": 61929443, "comment_id": 116055449, "body": "copycat found. Original answer is <a href=\"https://stackoverflow.com/questions/37595936/what-is-the-difference-between-const-and-val/37596023#37596023\" title=\"what is the difference between const and val\">stackoverflow.com/questions/37595936/&hellip;</a>"}, {"owner": {"reputation": 1694, "user_id": 2673386, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc376861b2ff6f3088bb4c338df6126a?s=128&d=identicon&r=PG", "display_name": "EntangledLoops", "link": "https://stackoverflow.com/users/2673386/entangledloops"}, "reply_to_user": {"reputation": 11426, "user_id": 1573279, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/0J39C.jpg?s=128&g=1", "display_name": "Gunaseelan", "link": "https://stackoverflow.com/users/1573279/gunaseelan"}, "edited": false, "score": 0, "creation_date": 1610317494, "post_id": 61929443, "comment_id": 116088396, "body": "@Gunaseelan Also, the snippet doesn&#39;t compile."}, {"owner": {"reputation": 11426, "user_id": 1573279, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/0J39C.jpg?s=128&g=1", "display_name": "Gunaseelan", "link": "https://stackoverflow.com/users/1573279/gunaseelan"}, "reply_to_user": {"reputation": 1694, "user_id": 2673386, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc376861b2ff6f3088bb4c338df6126a?s=128&d=identicon&r=PG", "display_name": "EntangledLoops", "link": "https://stackoverflow.com/users/2673386/entangledloops"}, "edited": false, "score": 0, "creation_date": 1610330459, "post_id": 61929443, "comment_id": 116090690, "body": "@EntangledLoops, Yes, You are correct, Lol."}], "tags": [], "owner": {"reputation": 101, "user_id": 4782561, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PVsKAlRe5p0/AAAAAAAAAAI/AAAAAAAAABU/CCt9vVNgzWs/photo.jpg?sz=128", "display_name": "Ajay Vishwakarma", "link": "https://stackoverflow.com/users/4782561/ajay-vishwakarma"}, "is_accepted": false, "score": 9, "last_activity_date": 1610449928, "last_edit_date": 1610449928, "creation_date": 1590046200, "answer_id": 61929443, "question_id": 37595936, "link": "https://stackoverflow.com/questions/37595936/what-is-the-difference-between-const-and-val/61929443#61929443", "title": "What is the difference between &quot;const&quot; and &quot;val&quot;?", "body": "<p>In kotlin, <code>const</code> and <code>val</code> both represents the immutability and read only values and act as <code>final</code> keyword in java.</p>\n<p><code>val</code> keyword must be used to declare for run time values and <code>const</code> keyword must be used to declare compile time values.</p>\n<p>Keep in mind, const must be used only with primitive data types not for function and constructors.</p>\n<p>Example -</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const val fun1 = anyFunctionOrConstructor() // it is not fine\nval fun2 = anyFunctionOrConstructor() // it is perfectly fine      \nconst val aa = \"My String\" // it is perfectly fine</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 25953, "user_id": 6599590, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/qLSDJ.jpg?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/6599590/andy"}, "is_accepted": false, "score": 1, "last_activity_date": 1605961716, "last_edit_date": 1605961716, "creation_date": 1605961290, "answer_id": 64942978, "question_id": 37595936, "link": "https://stackoverflow.com/questions/37595936/what-is-the-difference-between-const-and-val/64942978#64942978", "title": "What is the difference between &quot;const&quot; and &quot;val&quot;?", "body": "<h1>val</h1>\n<p>Kotlin <code>val</code> keyword is for <strong>read-only</strong> properties in comparison with Kotlin <code>var</code> keyword. The other name for <code>read-only</code> property is <code>immutable</code>.</p>\n<p>Kotlin code:</p>\n<pre><code>val variation: Long = 100L\n</code></pre>\n<p>Java equivalent looks like this:</p>\n<pre><code>final Long variation = 100L;\n</code></pre>\n<p><br></p>\n<h1>const val</h1>\n<p>We use <code>const</code> keyword for immutable properties too. <code>const</code> is used for properties that are known at compile-time. That's the difference. Take into consideration that <code>const</code> property must be declared <strong><code>globally</code></strong>.</p>\n<p>Kotlin code (in playground):</p>\n<pre><code>const val WEBSITE_NAME: String = &quot;Google&quot;\n\nfun main() {    \n    println(WEBSITE_NAME)\n}\n</code></pre>\n<p>Java code (in playground):</p>\n<pre><code>class Playground {\n\n    final static String WEBSITE_NAME = &quot;Google&quot;;\n\n    public static void main(String[ ] args) {\n        System.out.println(WEBSITE_NAME);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 9328, "user_id": 4613968, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/100000926329265/picture?type=large", "display_name": "Mathew Hany", "link": "https://stackoverflow.com/users/4613968/mathew-hany"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57730, "favorite_count": 36, "accepted_answer_id": 37596023, "answer_count": 7, "score": 330, "last_activity_date": 1610449928, "creation_date": 1464880832, "last_edit_date": 1571200709, "question_id": 37595936, "link": "https://stackoverflow.com/questions/37595936/what-is-the-difference-between-const-and-val", "title": "What is the difference between &quot;const&quot; and &quot;val&quot;?", "body": "<p>I have recently read about the <code>const</code> keyword, and I'm so confused! I can't find any difference between <code>const</code> and the <code>val</code> keyword, I mean we can use both of them to make an immutable variable, is there anything else that I'm missing?</p>\n"}, {"tags": ["guava", "kotlin"], "comments": [{"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 1, "creation_date": 1464881332, "post_id": 37593738, "comment_id": 62677260, "body": "Can you describe the problem you&#39;re trying to solve? I guess it is by design that deriving from <code>ImmutableTable</code> is not easy but I suspect that&#39;s not your end goal."}, {"owner": {"reputation": 2678, "user_id": 986533, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fd7ff53528251bc135a8978c34a0d1d4?s=128&d=identicon&r=PG", "display_name": "Konrad Jamrozik", "link": "https://stackoverflow.com/users/986533/konrad-jamrozik"}, "reply_to_user": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 0, "creation_date": 1464886049, "post_id": 37593738, "comment_id": 62680374, "body": "My end goal is to be able to call a no-arg constructor of a class that inherits from (extends/implements) Table interface. At the same time, I do not want to be forced to reimplement all the Table methods. I hoped I can inherit from ImmutableTable as it implements many methods of Table, but probably you are right that ImmutableTable cannot be inherited by design (my mistake then). In such case I have to work with Table directly. But then if I want to delegate to Table, to avoid reimplementing methods, I am forced to use a constructor that takes Table as arg."}, {"owner": {"reputation": 3304, "user_id": 28465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e23d8c7533d46d5d0c48969819fc5b00?s=128&d=identicon&r=PG", "display_name": "Chris Povirk", "link": "https://stackoverflow.com/users/28465/chris-povirk"}, "edited": false, "score": 1, "creation_date": 1464886292, "post_id": 37593738, "comment_id": 62680513, "body": "I don&#39;t know Kotlin, but: Does <a href=\"http://google.github.io/guava/releases/19.0/api/docs/com/google/common/collect/ForwardingTable.html\" rel=\"nofollow noreferrer\"><code>ForwardingTable</code></a> help here? It, unlike <code>ImmutableTable</code>, is extensible. You could make it forward to an <code>ImmutableTable</code> delegate."}, {"owner": {"reputation": 2678, "user_id": 986533, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fd7ff53528251bc135a8978c34a0d1d4?s=128&d=identicon&r=PG", "display_name": "Konrad Jamrozik", "link": "https://stackoverflow.com/users/986533/konrad-jamrozik"}, "edited": false, "score": 0, "creation_date": 1464887055, "post_id": 37593738, "comment_id": 62680997, "body": "Yes, thanks! <code>ForwardingTable</code> provides <code>delegate</code> method which I can use instead of Kotlin&#39;s <a href=\"https://kotlinlang.org/docs/reference/delegation.html#class-delegation\" rel=\"nofollow noreferrer\">class delegation</a>. The <code>delegate</code> method allows me to delegate to a field instantiated in class constructor. Kotlin&#39;s class delegation forbids this: the delegation can happen only to a constructor parameter, not a field initialized in constructor."}], "answers": [{"comments": [{"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 1, "creation_date": 1464891699, "post_id": 37598292, "comment_id": 62683598, "body": "Why a private primary constructor plus a public secondary constructor instead of a single public primary constructor with default arguments? i.e. Why not simply <code>class MyTable(table: Table&lt;Int, Int, Int&gt; = TreeBasedTable.create()) : Table&lt;Int, Int, Int&gt; by table</code>?"}, {"owner": {"reputation": 3685, "user_id": 278897, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2d136f656bfb9290913ff85abbeccfd7?s=128&d=identicon&r=PG", "display_name": "Paul Blessing", "link": "https://stackoverflow.com/users/278897/paul-blessing"}, "reply_to_user": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 3, "creation_date": 1464892241, "post_id": 37598292, "comment_id": 62683946, "body": "That should work fine as well. I was going under the assumption that it was not desirable for calling code to be able to supply a <code>Table</code> implementation at all."}], "tags": [], "owner": {"reputation": 3685, "user_id": 278897, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2d136f656bfb9290913ff85abbeccfd7?s=128&d=identicon&r=PG", "display_name": "Paul Blessing", "link": "https://stackoverflow.com/users/278897/paul-blessing"}, "is_accepted": true, "score": 9, "last_activity_date": 1464887901, "creation_date": 1464887901, "answer_id": 37598292, "question_id": 37593738, "link": "https://stackoverflow.com/questions/37593738/in-kotlin-how-to-delegate-to-an-interface-and-provide-only-a-no-arg-public-cons/37598292#37598292", "title": "In Kotlin, how to delegate to an interface and provide only a no-arg public constructor?", "body": "<p>As mentioned in comments, Guava has <code>ForwardingTable</code> that can accomplish this. But here's another option that should work even for interfaces where there isn't a \"forwarding\" version defined. </p>\n\n<pre><code>class MyTable private constructor(table: Table&lt;Int, Int, Int&gt;) : Table&lt;Int, Int, Int&gt; by table {\n\n    constructor() : this(TreeBasedTable.create()) // or a different type of table if desired\n\n}\n</code></pre>\n"}], "owner": {"reputation": 2678, "user_id": 986533, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fd7ff53528251bc135a8978c34a0d1d4?s=128&d=identicon&r=PG", "display_name": "Konrad Jamrozik", "link": "https://stackoverflow.com/users/986533/konrad-jamrozik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1053, "favorite_count": 1, "accepted_answer_id": 37598292, "answer_count": 1, "score": 6, "last_activity_date": 1578004135, "creation_date": 1464875184, "last_edit_date": 1578004135, "question_id": 37593738, "link": "https://stackoverflow.com/questions/37593738/in-kotlin-how-to-delegate-to-an-interface-and-provide-only-a-no-arg-public-cons", "title": "In Kotlin, how to delegate to an interface and provide only a no-arg public constructor?", "body": "<p>The problem arises from the fact that Kotlin <a href=\"https://kotlinlang.org/docs/reference/delegation.html#class-delegation\" rel=\"nofollow noreferrer\" title=\"class delegation\">class delegation</a> allows to delegate only to constructor parameters, thus seemingly forcing you to provide constructor with an argument.</p>\n\n<p>Below is my original question pertaining to a concrete use case of this problem.</p>\n\n<hr>\n\n<p>I want to do the following:</p>\n\n<pre><code>val myTable1: MyTable = MyTable()\n</code></pre>\n\n<p>where </p>\n\n<ul>\n<li><code>MyTable</code> inherits from <a href=\"https://github.com/google/guava/wiki/NewCollectionTypesExplained#table\" rel=\"nofollow noreferrer\">ImmutableTable</a> (<a href=\"http://google.github.io/guava/releases/snapshot/api/docs/src-html/com/google/common/collect/ImmutableTable.html#line.45\" rel=\"nofollow noreferrer\">src</a>) or at least <a href=\"https://github.com/google/guava/wiki/NewCollectionTypesExplained#table\" rel=\"nofollow noreferrer\">Table</a> </li>\n<li>and I do not have to manually delegate all the <code>Table</code> methods to some base implementation.</li>\n</ul>\n\n<p>I also want to avoid the following:</p>\n\n<pre><code>val myTable2: MyTable = MyTable.build() \n</code></pre>\n\n<p>i.e. I do not want to be forced to use companion objects / static factory methods. </p>\n\n<p>I tried to extend <code>ImmutableTable</code>, but I am getting <code>This type has a constructor, and thus must be initialized here</code>.</p>\n\n<p>I tried to extend <code>Table</code> interface and delegate to it (to avoid reimplementing methods) but then I am forced to provide an instance of <code>Table</code> as constructor parameter. I cannot just initialize it in <code>init {}</code> block.</p>\n\n<p>Please see <a href=\"https://gist.github.com/konrad-jamrozik/3bdf9a306fea6a2e25f42ee8b4bc5aa8\" rel=\"nofollow noreferrer\">this gist</a> for my exact attempts.</p>\n\n<p>Kotlin version used: <code>1.0.2</code></p>\n"}, {"tags": ["java", "reflection", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 7, "last_activity_date": 1464856420, "creation_date": 1464856420, "answer_id": 37586604, "question_id": 37586532, "link": "https://stackoverflow.com/questions/37586532/how-to-find-methods-with-an-annotation-in-a-class/37586604#37586604", "title": "How to find methods with an annotation in a class?", "body": "<p>The annotation will be the instance of your <code>MyAnnotation</code> class. Therefore, all you need to do is:</p>\n\n<pre><code>cls.memberFunctions.filter { it.annotations.any { anno -&gt; anno is MyAnnotation } }\n</code></pre>\n"}], "owner": {"reputation": 5483, "user_id": 1356130, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/71a884fac9d80ee3171a4018b1eaf660?s=128&d=identicon&r=PG", "display_name": "atok", "link": "https://stackoverflow.com/users/1356130/atok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 979, "favorite_count": 1, "accepted_answer_id": 37586604, "answer_count": 1, "score": 3, "last_activity_date": 1464856420, "creation_date": 1464856204, "question_id": 37586532, "link": "https://stackoverflow.com/questions/37586532/how-to-find-methods-with-an-annotation-in-a-class", "title": "How to find methods with an annotation in a class?", "body": "<p>Given an annotation</p>\n\n<pre><code>@Target(AnnotationTarget.FUNCTION)\n@Retention(AnnotationRetention.RUNTIME)\nannotation class MyAnnotation\n</code></pre>\n\n<p>How to find methods with this annotation?</p>\n\n<p>This is how far I got:</p>\n\n<pre><code>val cls = myObject.javaClass.kotlin\nval found = cls.memberFunctions.filter { it.annotations.contains( ??? ) }\n</code></pre>\n"}, {"tags": ["json", "gson", "kotlin"], "comments": [{"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 0, "creation_date": 1464855211, "post_id": 37585578, "comment_id": 62657928, "body": "Are you sure you have <code>int id;</code> and not <code>Integer id;</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 341, "user_id": 5421493, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b6b6095bc8d6179fea9399fdd782ff6c?s=128&d=identicon&r=PG&f=1", "display_name": "Mahabub", "link": "https://stackoverflow.com/users/5421493/mahabub"}, "edited": false, "score": 0, "creation_date": 1464858132, "post_id": 37586334, "comment_id": 62659820, "body": "I was trying to avoid this. But I guess this is the only way"}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1464862558, "post_id": 37586334, "comment_id": 62663030, "body": "The secondary constructor isn&#39;t necessary, is it? The example could simply be <code>class A(var id: Int? = null, var name: String? = null)</code>"}, {"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "reply_to_user": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1464863016, "post_id": 37586334, "comment_id": 62663364, "body": "@mfulton26 the parameterless constructor is used by <code>gson.fromJson(json, A::class.java)</code>"}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 1, "creation_date": 1464867750, "post_id": 37586334, "comment_id": 62666472, "body": "<code>gson.fromJson(json, A::class.java)</code> works for me without <code>constructor() : this(null, null)</code>. This is because &quot;on the JVM, if all of the parameters of the primary constructor have default values, the compiler will generate an additional parameterless constructor which will use the default values. This makes it easier to use Kotlin with libraries such as Jackson or JPA that create class instances through parameterless constructors.&quot; (<a href=\"https://kotlinlang.org/docs/reference/classes.html#secondary-constructors\" rel=\"nofollow noreferrer\">Secondary Constructors - Classes and Inheritance - Kotlin Programming Language</a>)"}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 6, "last_activity_date": 1464868324, "last_edit_date": 1464868324, "creation_date": 1464855591, "answer_id": 37586334, "question_id": 37585578, "link": "https://stackoverflow.com/questions/37585578/how-to-handle-an-empty-param-in-kotlin/37586334#37586334", "title": "How to handle an empty param in Kotlin?", "body": "<p>Kotlint treats <a href=\"https://kotlinlang.org/docs/reference/null-safety.html\" rel=\"nofollow\">null safety seriously</a> thus you have to be explicit about the initialization values. Your example can be translated to:</p>\n\n<pre><code>class A(var id: Int? = null, var name: String? = null)\n</code></pre>\n\n<p>Notice that the above has both <a href=\"https://kotlinlang.org/docs/reference/functions.html#default-arguments\" rel=\"nofollow\">default arguments</a> and a <a href=\"https://kotlinlang.org/docs/reference/classes.html#secondary-constructors\" rel=\"nofollow\">parameterless constructor on the JVM</a>. This let's you write:</p>\n\n<pre><code>val a = A()\n</code></pre>\n\n<p>As well as:</p>\n\n<pre><code>val a = gson.fromJson(json, A::class.java)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1547, "user_id": 1020871, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2af0b561054a608a7f1877deaeb3f748?s=128&d=identicon&r=PG", "display_name": "Love", "link": "https://stackoverflow.com/users/1020871/love"}, "edited": false, "score": 0, "creation_date": 1481815868, "post_id": 37610536, "comment_id": 69536056, "body": "Keep in mind that the lateinit properties will cause <code>UninitializedPropertyAccessException</code> if uninitialized when accessed, eg <code>Gson().fromJson(&quot;{}&quot;, A::class.java).name</code>"}], "tags": [], "owner": {"reputation": 1453, "user_id": 2804610, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m7Bke.jpg?s=128&g=1", "display_name": "EPadronU", "link": "https://stackoverflow.com/users/2804610/epadronu"}, "is_accepted": false, "score": 1, "last_activity_date": 1464945591, "creation_date": 1464945591, "answer_id": 37610536, "question_id": 37585578, "link": "https://stackoverflow.com/questions/37585578/how-to-handle-an-empty-param-in-kotlin/37610536#37610536", "title": "How to handle an empty param in Kotlin?", "body": "<p>How about <code>lateinit</code>? </p>\n\n<pre><code>/* ***************************************************************************/\nclass A() {\n  lateinit var id : Integer // Integer instead of Int due to lateinit's no-primitives requirement\n  lateinit var name : String\n\n  constructor(id : Integer, name : String) : this() {\n    this.id = id\n    this.name = name\n  }\n}\n/* ***************************************************************************/\n\n/* ***************************************************************************/\nfun main(args: Array&lt;String&gt;) {\n  val a = A()\n\n  a.name = \"test\"\n\n  assert(Gson().toJson(a) == \"\"\"{\"name\":\"test\"}\"\"\")\n\n  val aFromJson = Gson().fromJson(\"\"\"{\"name\":\"test\"}\"\"\", A::class.java)\n\n  assert(a.name == \"test\")\n}\n/* ***************************************************************************/\n</code></pre>\n\n<p>The advantage of using <code>lateinit</code> is the lack of nullable properties inside the class thus, you avoid dealing with a bunch of null checking and <code>?.</code> derefering.</p>\n"}], "owner": {"reputation": 341, "user_id": 5421493, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b6b6095bc8d6179fea9399fdd782ff6c?s=128&d=identicon&r=PG&f=1", "display_name": "Mahabub", "link": "https://stackoverflow.com/users/5421493/mahabub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1096, "favorite_count": 0, "accepted_answer_id": 37586334, "answer_count": 2, "score": 3, "last_activity_date": 1464945820, "creation_date": 1464853323, "last_edit_date": 1464945820, "question_id": 37585578, "link": "https://stackoverflow.com/questions/37585578/how-to-handle-an-empty-param-in-kotlin", "title": "How to handle an empty param in Kotlin?", "body": "<p>In java we can do following</p>\n\n<pre><code>class A{\n  int id;\n  String name;\n\n  public A(){}\n  public A(int id, String name){\n    this.id = id;\n    this.name = name;\n  }\n  // getter/ setter\n}\n</code></pre>\n\n<p>then I can create a new Object and get json as following</p>\n\n<pre><code>A a= new A()\na.setName(\"test\")\n\nSystem.out.println(new Gson().toJson(a))\n</code></pre>\n\n<p>which gives me the result </p>\n\n<pre><code>{\"name\":\"test\"}\n</code></pre>\n\n<p>In kotlin how can i achive this?</p>\n\n<p>The problem I am facing is kotlin saying primitive type has to be initialized. So in json I am getting both <code>id</code> and <code>name</code>; which i don't want</p>\n\n<p>So how to do this???</p>\n"}]