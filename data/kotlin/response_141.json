[{"tags": ["android-studio", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 15070, "user_id": 210916, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5c7e713b6f536d3fa0c9e1fbbdfb9c1?s=128&d=identicon&r=PG", "display_name": "MPelletier", "link": "https://stackoverflow.com/users/210916/mpelletier"}, "edited": false, "score": 3, "creation_date": 1505941919, "post_id": 46331760, "comment_id": 79624437, "body": "<code>Use single name import</code> turns it off for good, it seems. Great stuff! Thanks!"}], "tags": [], "owner": {"reputation": 2472, "user_id": 775282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c161c3b25645471c05560402910ef118?s=128&d=identicon&r=PG", "display_name": "fal", "link": "https://stackoverflow.com/users/775282/fal"}, "is_accepted": true, "score": 16, "last_activity_date": 1505941533, "creation_date": 1505941533, "answer_id": 46331760, "question_id": 46331562, "link": "https://stackoverflow.com/questions/46331562/how-to-control-when-imports-are-replaced-by-wildcard-in-android-studio-in-kotlin/46331760#46331760", "title": "How to control when Imports are replaced by wildcard in Android Studio in Kotlin files", "body": "<p>You can set this under the Kotlin \"Code Style\" section in Preferences:</p>\n\n<p><a href=\"https://i.stack.imgur.com/hN0nw.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/hN0nw.png\" alt=\"Imports\"></a></p>\n"}], "owner": {"reputation": 15070, "user_id": 210916, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5c7e713b6f536d3fa0c9e1fbbdfb9c1?s=128&d=identicon&r=PG", "display_name": "MPelletier", "link": "https://stackoverflow.com/users/210916/mpelletier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2031, "favorite_count": 1, "accepted_answer_id": 46331760, "answer_count": 1, "score": 9, "last_activity_date": 1505941533, "creation_date": 1505940729, "question_id": 46331562, "link": "https://stackoverflow.com/questions/46331562/how-to-control-when-imports-are-replaced-by-wildcard-in-android-studio-in-kotlin", "title": "How to control when Imports are replaced by wildcard in Android Studio in Kotlin files", "body": "<p>I noticed that for up to 4 imports from the same package, auto-import will simply append the import in the list:</p>\n\n<pre><code>import android.support.v7.widget.AppCompatImageButton\nimport android.support.v7.widget.LinearLayoutManager\nimport android.support.v7.widget.RecyclerView\nimport android.support.v7.widget.Toolbar\n</code></pre>\n\n<p>But adding a 5th import will make auto-import switch to a wildcard:</p>\n\n<pre><code>import android.support.v7.widget.*\n</code></pre>\n\n<p>Is there a way to keep auto-import on but tell it to not do that, or change the threshold? I don't mind having a long list of imports, it feels... familiar.</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 6703, "user_id": 1797950, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/1KyYn.jpg?s=128&g=1", "display_name": "crgarridos", "link": "https://stackoverflow.com/users/1797950/crgarridos"}, "edited": false, "score": 0, "creation_date": 1505924377, "post_id": 46326974, "comment_id": 79615062, "body": "<code>findViewById&lt;View&gt;(R.id.my_toolbar) as Toolbar</code> is useless, use just <code>findViewById&lt;Toolbar&gt;(R.id.my_toolbar)</code>"}, {"owner": {"reputation": 13, "user_id": 7781942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IlWBU.png?s=128&g=1", "display_name": "tofte", "link": "https://stackoverflow.com/users/7781942/tofte"}, "reply_to_user": {"reputation": 6703, "user_id": 1797950, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/1KyYn.jpg?s=128&g=1", "display_name": "crgarridos", "link": "https://stackoverflow.com/users/1797950/crgarridos"}, "edited": false, "score": 0, "creation_date": 1505924935, "post_id": 46326974, "comment_id": 79615431, "body": "tried the change, but I don&#39;t see a difference in behavior whether I do it one way or the other."}, {"owner": {"reputation": 6703, "user_id": 1797950, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/1KyYn.jpg?s=128&g=1", "display_name": "crgarridos", "link": "https://stackoverflow.com/users/1797950/crgarridos"}, "edited": false, "score": 0, "creation_date": 1505926000, "post_id": 46326974, "comment_id": 79616098, "body": "It isn&#39;t about the question. Just avoid an extra cast"}, {"owner": {"reputation": 13, "user_id": 7781942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IlWBU.png?s=128&g=1", "display_name": "tofte", "link": "https://stackoverflow.com/users/7781942/tofte"}, "reply_to_user": {"reputation": 6703, "user_id": 1797950, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/1KyYn.jpg?s=128&g=1", "display_name": "crgarridos", "link": "https://stackoverflow.com/users/1797950/crgarridos"}, "edited": false, "score": 0, "creation_date": 1505927007, "post_id": 46326974, "comment_id": 79616655, "body": "understod, I will adopt your suggestion"}, {"owner": {"reputation": 21170, "user_id": 2949612, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/RLdcF.png?s=128&g=1", "display_name": "pRaNaY", "link": "https://stackoverflow.com/users/2949612/pranay"}, "edited": false, "score": 0, "creation_date": 1505928068, "post_id": 46326974, "comment_id": 79617279, "body": "You want to display both menu always visible. Right?"}, {"owner": {"reputation": 13, "user_id": 7781942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IlWBU.png?s=128&g=1", "display_name": "tofte", "link": "https://stackoverflow.com/users/7781942/tofte"}, "edited": false, "score": 0, "creation_date": 1505929780, "post_id": 46326974, "comment_id": 79618297, "body": "No, I want to display the Menu options if there is room for them. The answer from RobCo did the trick for me. The menu options are now shown if there is room for it."}], "answers": [{"tags": [], "owner": {"reputation": 4869, "user_id": 6151924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d32a9252d2034b93b3eb8f743512104?s=128&d=identicon&r=PG&f=1", "display_name": "RobCo", "link": "https://stackoverflow.com/users/6151924/robco"}, "is_accepted": true, "score": 3, "last_activity_date": 1505924732, "creation_date": 1505924732, "answer_id": 46327221, "question_id": 46326974, "link": "https://stackoverflow.com/questions/46326974/android-toolbar-menu-items-never-shows-but-goes-into-overflow/46327221#46327221", "title": "Android Toolbar menu items never shows, but goes into overflow", "body": "<p>You are using all Android APIs, not support library.<br>\nSo try using <code>android</code> instead of <code>app</code>:</p>\n\n<pre><code>android:showAsAction=\"ifRoom\"\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7781942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IlWBU.png?s=128&g=1", "display_name": "tofte", "link": "https://stackoverflow.com/users/7781942/tofte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 395, "favorite_count": 0, "accepted_answer_id": 46327221, "answer_count": 1, "score": 1, "last_activity_date": 1505927929, "creation_date": 1505923823, "last_edit_date": 1505927929, "question_id": 46326974, "link": "https://stackoverflow.com/questions/46326974/android-toolbar-menu-items-never-shows-but-goes-into-overflow", "title": "Android Toolbar menu items never shows, but goes into overflow", "body": "<p>I am trying to implement the toolbar that Android made available in v21 with a menu where the menu items are set to show \"ifroom\", but the menu items always collapses into the overflow. They also collapses into the overflow if the menu items are set to show \"always\". </p>\n\n<p>I hope someone can point out what needs to changed to make it behave correct. I would like to find a solution which doesn't do it using appcompat to achieve it, as I can see most other solutions does.</p>\n\n<p>Below I have attached my toolbar layout, menu layout and screenshoot of how it looks in the simulator, as well as the main kotlin file creating the toolbar.</p>\n\n<p>Screenshoot from emulator</p>\n\n<p><a href=\"https://i.stack.imgur.com/4qLgD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4qLgD.png\" alt=\"enter image description here\"></a></p>\n\n<p>toolbar_main.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.constraint.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\nxmlns:app=\"http://schemas.android.com/apk/res-auto\"\nxmlns:tools=\"http://schemas.android.com/tools\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"match_parent\"&gt;\n\n&lt;android.widget.Toolbar\n    android:id=\"@+id/my_toolbar\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"?android:attr/actionBarSize\"\n    app:layout_constraintTop_toTopOf=\"parent\"\n    app:layout_constraintLeft_toLeftOf=\"parent\"\n    android:elevation=\"4dp\"\n    android:theme=\"@style/ToolbarTheme\"\n    android:popupTheme=\"@android:style/ThemeOverlay.Material.Light\"\n    tools:layout_editor_absoluteY=\"0dp\"\n    tools:layout_editor_absoluteX=\"0dp\" /&gt;\n\n&lt;/android.support.constraint.ConstraintLayout&gt;    \n</code></pre>\n\n<p>menu_main.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;menu\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"&gt;\n    &lt;item\n        android:id=\"@+id/miCompose\"\n        android:icon=\"@drawable/ic_mail_outline_black_24dp\"\n        android:title=\"@string/menu_compose\"\n        android:orderInCategory=\"2\"\n        app:showAsAction=\"ifRoom\" /&gt;\n    &lt;item\n        android:id=\"@+id/miProfile\"\n        android:icon=\"@drawable/ic_perm_identity_black_24dp\"\n        android:title=\"@string/menu_profile\"\n        android:orderInCategory=\"1\"\n        app:showAsAction=\"ifRoom\"/&gt;\n\n&lt;/menu&gt;\n</code></pre>\n\n<p>mainActivity.kt</p>\n\n<pre><code>import android.app.Activity\nimport android.os.Bundle\nimport android.util.Log\nimport android.view.Menu\nimport android.widget.Toolbar\nimport android.view.View\nimport kotlinx.android.synthetic.main.activity_main.*\nimport kotlinx.android.synthetic.main.activity_main.view.*\n\nclass MainActivity : Activity() {\n    val TAG: String = \"MainActivity\"\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        Log.d(TAG, \"onCreate \")\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        val myToolbar = findViewById&lt;View&gt;(R.id.my_toolbar) as Toolbar\n        myToolbar.setTitle(R.string.title_activity_main)\n        myToolbar.inflateMenu(R.menu.menu_main)\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "autoresize", "screen-size", "text-size"], "comments": [{"owner": {"reputation": 4957, "user_id": 4700782, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/rSGzc.jpg?s=128&g=1", "display_name": "Pier Giorgio Misley", "link": "https://stackoverflow.com/users/4700782/pier-giorgio-misley"}, "edited": false, "score": 0, "creation_date": 1505922494, "post_id": 46326316, "comment_id": 79613838, "body": "<a href=\"https://stackoverflow.com/questions/32233266/how-to-use-percentage-for-android-layout\">did you have a look at this?</a>"}, {"owner": {"reputation": 1756, "user_id": 6894116, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oUvHb.png?s=128&g=1", "display_name": "Rasmus Puls", "link": "https://stackoverflow.com/users/6894116/rasmus-puls"}, "reply_to_user": {"reputation": 4957, "user_id": 4700782, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/rSGzc.jpg?s=128&g=1", "display_name": "Pier Giorgio Misley", "link": "https://stackoverflow.com/users/4700782/pier-giorgio-misley"}, "edited": false, "score": 0, "creation_date": 1505923015, "post_id": 46326316, "comment_id": 79614209, "body": "This is not really what i&#39;m asking. I&#39;m asking how to set a textsize that that will make the text&#39;s height corrospond to a percentage of the parent containers height."}], "answers": [{"comments": [{"owner": {"reputation": 1756, "user_id": 6894116, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oUvHb.png?s=128&g=1", "display_name": "Rasmus Puls", "link": "https://stackoverflow.com/users/6894116/rasmus-puls"}, "edited": false, "score": 0, "creation_date": 1505993836, "post_id": 46326573, "comment_id": 79645647, "body": "Hi, my textViews is inside tableRows which ofc is inside TableLayout... i guess i could make the table row&#39;s use weight on height so they would take equal amout of height which in total will be the full container right? then you suggest that i also put weight/weightsum on the textViews inside the table rows? that would make them grow in height to match parent and would also scale up the fontsize ? so the text becames bigger like in my image example?"}, {"owner": {"reputation": 1756, "user_id": 6894116, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oUvHb.png?s=128&g=1", "display_name": "Rasmus Puls", "link": "https://stackoverflow.com/users/6894116/rasmus-puls"}, "edited": false, "score": 0, "creation_date": 1506004770, "post_id": 46326573, "comment_id": 79653829, "body": "I added weight to my tableRow&#39;s like so: val params : TableLayout.LayoutParams = TableLayout.LayoutParams() params.weight = 1f val row = TableRow(activity) row.layoutParams = params  This made all the rows 1/17 heigh - so i&#39;m getting closer, and it already looks better. Thanks a lot for your tip! How ever on large screens it still looks silly because the text is very small, is it now this &quot;autosizingTextView&quot; comes in play? or is there a way to allow the textsize to grow as its parent grows ?"}], "tags": [], "owner": {"reputation": 77347, "user_id": 1631193, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c713494416ceac454d71c524e15f1c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Sechan", "link": "https://stackoverflow.com/users/1631193/gabe-sechan"}, "is_accepted": false, "score": 0, "last_activity_date": 1505922628, "creation_date": 1505922628, "answer_id": 46326573, "question_id": 46326316, "link": "https://stackoverflow.com/questions/46326316/android-set-textsize-so-its-height-matches-a-percentage-of-its-parent-layouts/46326573#46326573", "title": "Android. set textSize so it&#39;s height matches a percentage of it&#39;s parent layouts height - possible?", "body": "<p>If the parent is a LinearLayout, use weights and weightSum with a 0dp height for the TextView.  This will make the textView take a percentage of the parent by weight/weightsum.</p>\n\n<p>If the parent is a RelativeLayout, use PercentRelativeLayout from the support library instead, which has support for percentages.</p>\n\n<p>If the parent is something other than those two, you'll have to see what the parent supports for layout options.</p>\n"}], "owner": {"reputation": 1756, "user_id": 6894116, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oUvHb.png?s=128&g=1", "display_name": "Rasmus Puls", "link": "https://stackoverflow.com/users/6894116/rasmus-puls"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1210, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505922628, "creation_date": 1505921827, "last_edit_date": 1505922582, "question_id": 46326316, "link": "https://stackoverflow.com/questions/46326316/android-set-textsize-so-its-height-matches-a-percentage-of-its-parent-layouts", "title": "Android. set textSize so it&#39;s height matches a percentage of it&#39;s parent layouts height - possible?", "body": "<p>My task is simple, but any solution seems very complex... I have an app that dynamically generates 17 tablerows with a textView/editText in each row. Right now the textSize is hardcoded to 20f for all textViews/editText - it looks decent on my phone but it is not very compatible with fx. a tablet. I want to set the textsize to a number that will make the height of the text 1/17 of its outer container. each tableRow will then fit perfectly on the screen no matter what size/resolution the device has.</p>\n\n<p><a href=\"https://i.stack.imgur.com/5n65V.png\" rel=\"nofollow noreferrer\">How it looks on different scrren sizes</a> - img</p>\n\n<p><a href=\"https://i.stack.imgur.com/hASnl.png\" rel=\"nofollow noreferrer\">How it should looks on different scrren sizes</a> - img</p>\n\n<p>and no matter what other kind of screen; inches, dimension, resolution etc. etc. the text line height should ALWAYS be 1/17 of the red box's height. Is this even possible?</p>\n\n<p>I write in kotlin and my UI is dynamically generated, i create the rows &amp; textViews like this:</p>\n\n<pre><code>fun createRow(label: String, tf: Typeface): TableRow {\n        val row = TableRow(activity)\n        row.setBackgroundResource(R.drawable.border)\n        gameSheetTable.addView(row)\n        val tw = TextView(activity)\n        tw.text = label\n        tw.textSize = textSize\n        tw.typeface = tf\n        tw.setTextColor(Color.BLACK)\n        textViews.add(tw)\n        row.addView(tw)\n        return row\n    }\n</code></pre>\n\n<p><strong>I have tried:</strong></p>\n\n<ol>\n<li><p>using different values for different screen sizes; hdpi, mdpi, xhdpi, xxhdpi, xxxhdpi - This result was very ugly and did not work at all, the 10\" tablet was recognized as a large device but had poor resolution so the text went way out of the screen, other 10\" tables was ok. so this method is completle useless. right?</p></li>\n<li><p>I hardcoded the textSize to be very small, and made a loop that would increase it by one for every cycle. Problem here is that the textView's are not rendered before the function returns. So the loop condition is never able to check if the new textSize matches 1/17 in height of the outer containers height. When debuggin and stepping over 'tw.textSize = newTextSize' which should also increase the height of the row but since it doesn't render nh = nameRow.height is still the same so the loop just runs in infinity...</p></li>\n</ol>\n\n<p>`</p>\n\n<pre><code>fun resizeText(){ \n    val maxHeight = dgs_cointainer.height \n    var nh = nameRow.height \n    while(maxHeight &gt; nh * 17){ \n        textSize += 1 \n        editTexts.forEach { \n            et -&gt; et.textSize = textSize \n        } \n        textViews.forEach { \n            tw -&gt; tw.textSize = textSize \n        } \n    nh = nameRow.height } \n}\n</code></pre>\n\n<p><strong>DID NOT WORK</strong></p>\n\n<ol start=\"3\">\n<li>(didn't try yet) then there is this \"new\" Autosizing TextView, but I can't find any examples to configure it to be 1/17 of somethings height and autosize to that, and I'm a bit confused if it will work on older devices since it states to require android 8.0 API level 26 ??? - can this do what i'm trying?</li>\n</ol>\n"}, {"tags": ["json", "spring", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 245, "user_id": 5193930, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-iMVktmmQeB8/AAAAAAAAAAI/AAAAAAAAAgU/KXCkvhko21k/photo.jpg?sz=128", "display_name": "Z3nk", "link": "https://stackoverflow.com/users/5193930/z3nk"}, "edited": false, "score": 1, "creation_date": 1505926749, "post_id": 46326273, "comment_id": 79616525, "body": "Your first point was good and make it works ! But didn&#39;t need to change my fields in snakey_case :) Thanks to solve it"}], "tags": [], "owner": {"reputation": 26172, "user_id": 49746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IAAg.jpg?s=128&g=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/49746/todd"}, "is_accepted": true, "score": 2, "last_activity_date": 1505921681, "creation_date": 1505921681, "answer_id": 46326273, "question_id": 46324776, "link": "https://stackoverflow.com/questions/46324776/kotlin-data-class-httpmessagenotreadableexception/46326273#46326273", "title": "kotlin data class HttpMessageNotReadableException", "body": "<p>I got this to work by making two slight changes.</p>\n\n<p>First, since all your <code>Project</code> fields are nullable, provide default values so the compiler will generate a zero argument constructor:</p>\n\n<pre><code>data class Project(val name:String? = null, val gitlabId: String? = null, val fichierVersion: String? = null)\n</code></pre>\n\n<p>Second, it seems that Spring wants your fields to be in <code>snakey_case</code> rather than <code>camelCase</code>, so change your payload to this:</p>\n\n<pre><code>{\n  \"name\":\"front_msel\",\n  \"gitlab_id\": \"83\",\n  \"fichier_version\":\"VERSION\"\n}\n</code></pre>\n"}], "owner": {"reputation": 245, "user_id": 5193930, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-iMVktmmQeB8/AAAAAAAAAAI/AAAAAAAAAgU/KXCkvhko21k/photo.jpg?sz=128", "display_name": "Z3nk", "link": "https://stackoverflow.com/users/5193930/z3nk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1080, "favorite_count": 0, "accepted_answer_id": 46326273, "answer_count": 1, "score": 1, "last_activity_date": 1582217351, "creation_date": 1505917691, "last_edit_date": 1505926859, "question_id": 46324776, "link": "https://stackoverflow.com/questions/46324776/kotlin-data-class-httpmessagenotreadableexception", "title": "kotlin data class HttpMessageNotReadableException", "body": "<p>I'm trying this code with postman, but nothing works, why ?</p>\n\n<p>What i send : </p>\n\n<pre><code>{\n    \"name\":\"front_msel\",\n    \"gitlabId\": \"83\",\n    \"fichierVersion\":\"VERSION\"\n}\n</code></pre>\n\n<p>My spring controller : </p>\n\n<pre><code>@RestController\n@RequestMapping(\"/projects\")\nclass ProjectController(val projectRepository: ProjectRepository) {\n    private val log = LoggerFactory.getLogger(ProjectController::class.java)\n\n    @PostMapping()\n    fun saveProject(@RequestBody payload: Project): String {\n        log.info(\"project: '{}'\", payload.toString())\n       return projectRepository.save(payload).gitlabId?:\"-1\"\n    }\n\n}\n</code></pre>\n\n<p>What i get : </p>\n\n<pre><code>{\n\"timestamp\": 1505917417221,\n\"status\": 400,\n\"error\": \"Bad Request\",\n\"exception\": \"org.springframework.http.converter.HttpMessageNotReadableException\",\n\"message\": \"JSON parse error: Can not construct instance of com.......model.Project: no suitable constructor found, can not deserialize from Object value (missing default constructor or creator, or perhaps need to add/enable type information?); nested exception is com.fasterxml.jackson.databind.JsonMappingException: Can not construct instance of com.......model.Project: no suitable constructor found, can not deserialize from Object value (missing default constructor or creator, or perhaps need to add/enable type information?)\\n at [Source: java.io.PushbackInputStream@66ba61d9; line: 2, column: 2]\",\n\"path\": \"/projects\"\n</code></pre>\n\n<p>}</p>\n\n<p>My project data class : </p>\n\n<pre><code>data class Project(val name:String?, val gitlabId: String?, val fichierVersion: String?)\n</code></pre>\n\n<p>I doubled check params, it's not a wording mistake, what does this things doesn't works ?</p>\n\n<p><strong>EDIT :</strong></p>\n\n<p>Thanks to Todd, the problem was resolve by adding null value to my param, to generate a zero argument constructor. Thanks !</p>\n\n<pre><code>data class Project(val name:String? = null, val gitlabId: String? = null, val fichierVersion: String? = null)\n</code></pre>\n"}, {"tags": ["java", "annotations", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 511, "user_id": 5827505, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cfzdNJnmAKY/AAAAAAAAAAI/AAAAAAAABvU/F4LMzNdILGM/photo.jpg?sz=128", "display_name": "Dragos Rachieru", "link": "https://stackoverflow.com/users/5827505/dragos-rachieru"}, "edited": false, "score": 0, "creation_date": 1577379018, "post_id": 46340133, "comment_id": 105156603, "body": "he asked about annotation processors, not a normal function"}], "tags": [], "owner": {"reputation": 548, "user_id": 2751848, "user_type": "registered", "profile_image": "https://graph.facebook.com/1334006851/picture?type=large", "display_name": "V&#225;clav Hodek", "link": "https://stackoverflow.com/users/2751848/v%c3%a1clav-hodek"}, "is_accepted": false, "score": -4, "last_activity_date": 1505985791, "creation_date": 1505985791, "answer_id": 46340133, "question_id": 46323988, "link": "https://stackoverflow.com/questions/46323988/java-kotlin-annotation-processor-get-type-of-annotated-field-property/46340133#46340133", "title": "Java/Kotlin annotation processor: get type of annotated field/property", "body": "<p>You can use reflection to get what you need. </p>\n\n<pre><code>import kotlin.reflect.full.declaredMemberProperties\nimport kotlin.reflect.full.findAnnotation\nimport kotlin.reflect.full.starProjectedType\n\nannotation class AnnotatedProp\n\nclass Foo {\n    @AnnotatedProp\n    var foo: Boolean? = null\n    var bar: String? = null\n}\n\nfun main(args: Array&lt;String&gt;) {\n\n    // Process annotated properties declared in class Foo.\n    Foo::class.declaredMemberProperties.filter {\n        it.findAnnotation&lt;AnnotatedProp&gt;() != null\n    }.forEach {\n        println(\"Name: ${it.name}\")\n        println(\"Nullable: ${it.returnType.isMarkedNullable}\")\n        println(\"Type: ${it.returnType.classifier!!.starProjectedType}\")\n    }\n\n}\n</code></pre>\n\n<p>This will print out:</p>\n\n<pre><code>Name: foo\nNullable: true\nType: kotlin.Boolean\n</code></pre>\n\n<p>Kotlin's standard library does not come with reflection, so be sure to add </p>\n\n<pre><code>compile \"org.jetbrains.kotlin:kotlin-reflect:$version_kotlin\"\n</code></pre>\n\n<p>to your Gradle build file. </p>\n"}, {"tags": [], "owner": {"reputation": 149, "user_id": 5428739, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/de2995f30ef37bd47369fafdf4569638?s=128&d=identicon&r=PG&f=1", "display_name": "Sheppard", "link": "https://stackoverflow.com/users/5428739/sheppard"}, "is_accepted": false, "score": 3, "last_activity_date": 1506106685, "creation_date": 1506106685, "answer_id": 46371531, "question_id": 46323988, "link": "https://stackoverflow.com/questions/46323988/java-kotlin-annotation-processor-get-type-of-annotated-field-property/46371531#46371531", "title": "Java/Kotlin annotation processor: get type of annotated field/property", "body": "<p>The way I've done it, ensure your annotation has an <code>AnnotationTarget.FIELD</code> target. </p>\n\n<p>Than after you get the <code>Element</code> instance with required annotation, just:\n<code>val returnTypeQualifiedName = element.asType().toString()</code> \nif you want to find out if it's nullable:</p>\n\n<pre><code>private fun isNullableProperty(element: Element): Boolean {\n        val nullableAnnotation = element.getAnnotation(org.jetbrains.annotations.Nullable::class.java)\n        if (nullableAnnotation == null) {\n            return false\n        } else {\n            return true\n        }\n    }\n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 5428739, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/de2995f30ef37bd47369fafdf4569638?s=128&d=identicon&r=PG&f=1", "display_name": "Sheppard", "link": "https://stackoverflow.com/users/5428739/sheppard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1077, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1506106685, "creation_date": 1505915585, "question_id": 46323988, "link": "https://stackoverflow.com/questions/46323988/java-kotlin-annotation-processor-get-type-of-annotated-field-property", "title": "Java/Kotlin annotation processor: get type of annotated field/property", "body": "<p>For example I have a class:</p>\n\n<pre><code>class Foo {\n  @AnnotatedProp\n  var foo: Boolean? = null\n}\n</code></pre>\n\n<p>How can I get type of <code>foo</code> property in my custom annotation processor?\nin pseudo I'd expect something like:\n<code>annotatedElement.getStringifiedReturnTypeSomehow() //returns \"Boolean\"</code></p>\n"}, {"tags": ["java", "android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 5758573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/530bd0f0b22e903367945c92f22ceb9e?s=128&d=identicon&r=PG&f=1", "display_name": "L\u1ed9c Nguy\u1ec5n Ph\u01b0\u1edbc V\u0129nh", "link": "https://stackoverflow.com/users/5758573/l%e1%bb%99c-nguy%e1%bb%85n-ph%c6%b0%e1%bb%9bc-v%c4%a9nh"}, "edited": false, "score": 0, "creation_date": 1505912904, "post_id": 46322695, "comment_id": 79606558, "body": "Hi Vikas, I have update my question for clearly. I want to know name of edit field in soft keyboard. Anyway, thanks for your answer :) !"}, {"owner": {"reputation": 2641, "user_id": 7073808, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/--ImTRkYRdz0/AAAAAAAAAAI/AAAAAAAAABk/LksPtBHMaB8/photo.jpg?sz=128", "display_name": "UltimateDevil", "link": "https://stackoverflow.com/users/7073808/ultimatedevil"}, "reply_to_user": {"reputation": 21, "user_id": 5758573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/530bd0f0b22e903367945c92f22ceb9e?s=128&d=identicon&r=PG&f=1", "display_name": "L\u1ed9c Nguy\u1ec5n Ph\u01b0\u1edbc V\u0129nh", "link": "https://stackoverflow.com/users/5758573/l%e1%bb%99c-nguy%e1%bb%85n-ph%c6%b0%e1%bb%9bc-v%c4%a9nh"}, "edited": false, "score": 0, "creation_date": 1505915760, "post_id": 46322695, "comment_id": 79608769, "body": "Ok, Just explain little bit more what you want. May be I can help you"}], "tags": [], "owner": {"reputation": 2641, "user_id": 7073808, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/--ImTRkYRdz0/AAAAAAAAAAI/AAAAAAAAABk/LksPtBHMaB8/photo.jpg?sz=128", "display_name": "UltimateDevil", "link": "https://stackoverflow.com/users/7073808/ultimatedevil"}, "is_accepted": false, "score": 0, "last_activity_date": 1505912149, "creation_date": 1505912149, "answer_id": 46322695, "question_id": 46322601, "link": "https://stackoverflow.com/questions/46322601/android-soft-keyboard-edit-field/46322695#46322695", "title": "Android soft keyboard edit field", "body": "<p>Use <code>Editext</code> and add a field to your <code>editext</code> <code>android:hint</code>. see the code below :</p>\n\n<pre><code> &lt;EditText\n       android:id=\"@+id/toDo\" \n       android:layout_width=\"wrap_content\"\n       android:layout_height=\"wrap_content\"\n       android:hint=\"Add a To Do\"/&gt;\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5758573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/530bd0f0b22e903367945c92f22ceb9e?s=128&d=identicon&r=PG&f=1", "display_name": "L\u1ed9c Nguy\u1ec5n Ph\u01b0\u1edbc V\u0129nh", "link": "https://stackoverflow.com/users/5758573/l%e1%bb%99c-nguy%e1%bb%85n-ph%c6%b0%e1%bb%9bc-v%c4%a9nh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1505912684, "creation_date": 1505911845, "last_edit_date": 1505912684, "question_id": 46322601, "link": "https://stackoverflow.com/questions/46322601/android-soft-keyboard-edit-field", "title": "Android soft keyboard edit field", "body": "<p>When I click a floating button in <a href=\"https://i.stack.imgur.com/YRxh8.png\" rel=\"nofollow noreferrer\">this picture</a>, the soft keyboard will show with edit field like <a href=\"https://i.stack.imgur.com/mDpRM.png\" rel=\"nofollow noreferrer\">this</a>. I don't know the keyword to search the edit field of soft keyboard. Thanks for reading !</p>\n"}, {"tags": ["android", "design-patterns", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 146, "user_id": 3446263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1af1d60fa37e507d998dcb63d9815df3?s=128&d=identicon&r=PG&f=1", "display_name": "Michal G", "link": "https://stackoverflow.com/users/3446263/michal-g"}, "edited": false, "score": 0, "creation_date": 1506080244, "post_id": 46321986, "comment_id": 79686785, "body": "Thank you for the hints. :)"}], "tags": [], "owner": {"reputation": 496, "user_id": 4079304, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5bba3ca029851e880b03bcffaff72ac2?s=128&d=identicon&r=PG&f=1", "display_name": "Arutha", "link": "https://stackoverflow.com/users/4079304/arutha"}, "is_accepted": false, "score": 0, "last_activity_date": 1505910103, "creation_date": 1505910103, "answer_id": 46321986, "question_id": 46321561, "link": "https://stackoverflow.com/questions/46321561/kotlin-android-app-changing-view-elements-from-outside-activity/46321986#46321986", "title": "Kotlin / Android app - changing view elements from outside Activity", "body": "<p>You can use Observers, observables to do it. RxJava/RxAndroid/RxKotlin</p>\n\n<p>or you can use Otto or greenbus for event sending/catching from a singleton class.</p>\n\n<p>RxKotlin example.</p>\n\n<p>UserManager.kt</p>\n\n<pre><code>    @Singleton\n    class UserManager(private val rxBus : RxBus){\n\n    fun sendX(){\n    rxBus.send(EventX())\n    } \n</code></pre>\n\n<p>on Main activity</p>\n\n<p>MainActivity.kt</p>\n\n<pre><code>class MainActivity : AppCompat ....\n\nonCreate(...){\n\n\nrxBus.toObservable()\n                                   .applySchedulers()\n                                   .subscribe({ event -&gt;\n                                                  if (event is EventX)\n                                                  {\n                                                      //do something here.\n                                                  }\n                                              })\n                          )\n}\n</code></pre>\n\n<p>rxBus.kt</p>\n\n<pre><code>@Singleton\nclass RxBus\n{\n    private val _bus = PublishSubject.create&lt;Any&gt;()\n\n    fun send(o: Any)\n    {\n        _bus.onNext(o)\n    }\n\n    fun toObservable(): Observable&lt;Any&gt;\n    {\n        return _bus\n    }\n\n    fun hasObservers(): Boolean\n    {\n        return _bus.hasObservers()\n    }\n}\n</code></pre>\n\n<p>Otto is a good and easy to use library from square, but jake warthon said don't use it on kotlin go with rxjava. i don't remember why.</p>\n"}], "owner": {"reputation": 146, "user_id": 3446263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1af1d60fa37e507d998dcb63d9815df3?s=128&d=identicon&r=PG&f=1", "display_name": "Michal G", "link": "https://stackoverflow.com/users/3446263/michal-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 336, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505910240, "creation_date": 1505908989, "last_edit_date": 1505910240, "question_id": 46321561, "link": "https://stackoverflow.com/questions/46321561/kotlin-android-app-changing-view-elements-from-outside-activity", "title": "Kotlin / Android app - changing view elements from outside Activity", "body": "<p>I am using kotlin lang to create my Android app.</p>\n\n<p>I wanted to create an object (singleton) that would specialise in modyfying my main activity's view components dynamically (like buttons etc) and would be used by my main activity itself.</p>\n\n<p>Some problems arose. First of all, the object is (of course) not Activity type, so  I cannot use for example findViewById and other Activity's functions etc. I tried to resolve this by passing main Activity by object's constructor, but it's not allowed - since objects cannot have their constructors.</p>\n\n<p>Additionally I am not sure, if this app design is acceptable according to at least good practices. If not really - what design pattern should I use to separate logic of how to change my layouts from the code that only will modify view elements?</p>\n\n<p>Thank you in advance for any suggestions.</p>\n"}, {"tags": ["hibernate", "orm", "kotlin", "vert.x", "reactive"], "answers": [{"comments": [{"owner": {"reputation": 1602, "user_id": 3105524, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/5b169766a0453f1ace846e5d425c940b?s=128&d=identicon&r=PG", "display_name": "Kamyar", "link": "https://stackoverflow.com/users/3105524/kamyar"}, "edited": false, "score": 0, "creation_date": 1506034208, "post_id": 46349738, "comment_id": 79668546, "body": "It is good answer! But I need to sacrifice my Repository pattern to use this method: I have to send e.g. the Entity Type and Id and expect the verticle to return the item which the id is its key! But I am now using a BaseRepository as parent and several Repository classes for DB actions. How can I mix your way with repository?"}, {"owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "reply_to_user": {"reputation": 1602, "user_id": 3105524, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/5b169766a0453f1ace846e5d425c940b?s=128&d=identicon&r=PG", "display_name": "Kamyar", "link": "https://stackoverflow.com/users/3105524/kamyar"}, "edited": false, "score": 0, "creation_date": 1506061962, "post_id": 46349738, "comment_id": 79676150, "body": "@Kamyar In practice, you would wrap each of your repositories into a verticle. So instead of &quot;some_description_of_what_you_want&quot; you would send &quot;apples&quot; or &quot;bananas&quot;, and it would go to specific repo. Also notice you can send any payload through EventBus, so you can send object IDs, for example."}, {"owner": {"reputation": 1602, "user_id": 3105524, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/5b169766a0453f1ace846e5d425c940b?s=128&d=identicon&r=PG", "display_name": "Kamyar", "link": "https://stackoverflow.com/users/3105524/kamyar"}, "edited": false, "score": 0, "creation_date": 1506068485, "post_id": 46349738, "comment_id": 79679775, "body": "As you already know, each repository has many actions, sometimes more than simple CRUD! Even in your case, I must send my favorite action (add, remove, edit..) in some way. I think making so many Verticles is a code smell!"}, {"owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "reply_to_user": {"reputation": 1602, "user_id": 3105524, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/5b169766a0453f1ace846e5d425c940b?s=128&d=identicon&r=PG", "display_name": "Kamyar", "link": "https://stackoverflow.com/users/3105524/kamyar"}, "edited": false, "score": 0, "creation_date": 1506081764, "post_id": 46349738, "comment_id": 79687827, "body": "Probably I didn&#39;t explain myself correctly. You don&#39;t have to create verticle per method. You create verticle per your Repository. Name of the action is the name agreed with repository. Payload may be JSON of the following form: <code>{&quot;action&quot;:&quot;DELETE&quot;,&quot;id&quot;:123}</code>. Your repository verticle can fetch this object, and call whichever method you declared in repo."}, {"owner": {"reputation": 1602, "user_id": 3105524, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/5b169766a0453f1ace846e5d425c940b?s=128&d=identicon&r=PG", "display_name": "Kamyar", "link": "https://stackoverflow.com/users/3105524/kamyar"}, "edited": false, "score": 0, "creation_date": 1506085497, "post_id": 46349738, "comment_id": 79690500, "body": "But your solution is not so great! It is also a code smell IMHO!"}, {"owner": {"reputation": 1602, "user_id": 3105524, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/5b169766a0453f1ace846e5d425c940b?s=128&d=identicon&r=PG", "display_name": "Kamyar", "link": "https://stackoverflow.com/users/3105524/kamyar"}, "edited": false, "score": 0, "creation_date": 1506701011, "post_id": 46349738, "comment_id": 79939972, "body": "I wrote the code as you recommended! I also wrote a MessageCodec to handle inter-verticle messages. Anyway, I have still the problem: the entityManager is now never closed! When should I close it? Should I bind it to web request or not? Binding it to verticle instance is right?"}, {"owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "reply_to_user": {"reputation": 1602, "user_id": 3105524, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/5b169766a0453f1ace846e5d425c940b?s=128&d=identicon&r=PG", "display_name": "Kamyar", "link": "https://stackoverflow.com/users/3105524/kamyar"}, "edited": false, "score": 0, "creation_date": 1506705593, "post_id": 46349738, "comment_id": 79942211, "body": "You have stop() method in your Verticle for that."}], "tags": [], "owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "is_accepted": false, "score": 1, "last_activity_date": 1506014390, "creation_date": 1506014390, "answer_id": 46349738, "question_id": 46320507, "link": "https://stackoverflow.com/questions/46320507/how-can-i-get-current-web-request-using-vert-x-web/46349738#46349738", "title": "How can I get current web request using Vert.x Web?", "body": "<p>What you normally should do is initialize EntityManager in one Verticle, and handle web requests in the other. Communicate using EventBus. Something along those lines (code is not exact):</p>\n\n<pre><code>public class DBVerticle extends AbstractVerticle {\n   public void start() throws Exception {\n      EntityManager em = ...; //init your EM   \n\n      vertx.eventBus().&lt;String&gt;consumer(\"some_description_of_what_you_want\").handler(h -&gt; {\n          ResultSet rs = em.doSomeQuery();\n          h.reply(rs);\n      });\n   }\n}\n\npublic class WebVerticle extends AbstractVerticle { \n   public void start() throws Exception {\n       HttpServer server = vertx.createHttpServer();\n       Router router = Router.router(vertx);\n\n       router.get(\"/\").handler(ctx -&gt; {\n          vertx.eventBus().&lt;String&gt;send(\"some_description_of_what_you_want\", \"maybe payload\", result -&gt; {\n           if (result.succeeded()) {\n              ctx.end(result);\n           }\n        });\n       });\n\n       server.handler(router::accept);\n   }\n}\n</code></pre>\n\n<p>You can see an example here: <a href=\"https://github.com/vert-x3/vertx-examples/tree/master/spring-examples/spring-example/src/main/java/io/vertx/examples/spring/verticle\" rel=\"nofollow noreferrer\">https://github.com/vert-x3/vertx-examples/tree/master/spring-examples/spring-example/src/main/java/io/vertx/examples/spring/verticle</a></p>\n"}, {"comments": [{"owner": {"reputation": 1602, "user_id": 3105524, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/5b169766a0453f1ace846e5d425c940b?s=128&d=identicon&r=PG", "display_name": "Kamyar", "link": "https://stackoverflow.com/users/3105524/kamyar"}, "edited": false, "score": 0, "creation_date": 1506068280, "post_id": 46359746, "comment_id": 79679660, "body": "I tried it but in this case I have to pass the entityManager to my repositories which is not my favorite way to do it!"}, {"owner": {"reputation": 1602, "user_id": 3105524, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/5b169766a0453f1ace846e5d425c940b?s=128&d=identicon&r=PG", "display_name": "Kamyar", "link": "https://stackoverflow.com/users/3105524/kamyar"}, "edited": false, "score": 0, "creation_date": 1506070175, "post_id": 46359746, "comment_id": 79680748, "body": "BTW the only thing I get this way is centralizing entity manager instantiation which I can do using IoC instead! And I can omit your way and instead start creating object at first line of each handler and closing at end line! the first line here is replaced with context and the last must be replaced with next() to let another one close the entity manager! Do you think your way is useful yet?"}, {"owner": {"reputation": 5302, "user_id": 51560, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e948f0816514cc90a10bbe9ca1060d60?s=128&d=identicon&r=PG", "display_name": "Paulo Lopes", "link": "https://stackoverflow.com/users/51560/paulo-lopes"}, "reply_to_user": {"reputation": 1602, "user_id": 3105524, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/5b169766a0453f1ace846e5d425c940b?s=128&d=identicon&r=PG", "display_name": "Kamyar", "link": "https://stackoverflow.com/users/3105524/kamyar"}, "edited": false, "score": 0, "creation_date": 1506076722, "post_id": 46359746, "comment_id": 79684802, "body": "You said you wanted an entity manager per request so the example above does that for you. It also allows you to access the manager from other handlers even if declared on other class files."}], "tags": [], "owner": {"reputation": 5302, "user_id": 51560, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e948f0816514cc90a10bbe9ca1060d60?s=128&d=identicon&r=PG", "display_name": "Paulo Lopes", "link": "https://stackoverflow.com/users/51560/paulo-lopes"}, "is_accepted": false, "score": 0, "last_activity_date": 1506067318, "creation_date": 1506067318, "answer_id": 46359746, "question_id": 46320507, "link": "https://stackoverflow.com/questions/46320507/how-can-i-get-current-web-request-using-vert-x-web/46359746#46359746", "title": "How can I get current web request using Vert.x Web?", "body": "<p>If I understood correctly you want to initialize your entity manager per request and make it available at any handler later on. In this case you could do something like:</p>\n\n<pre><code>public class MainVerticle extends AbstractVerticle {\n  public void start() throws Exception {\n\n    HttpServer server = vertx.createHttpServer();\n    Router router = Router.router(vertx);\n\n    router.route().handler(ctx -&gt; {\n      EntityManager em = ...; //init your EM\n      ctx.put(\"em\", em);\n      ctx.next();\n      // as of this moment the entity manager is available for all\n      // handlers in the current request by the key \"em\" \n    }\n\n    router.get(\"/\").handler(ctx -&gt; {\n      EntityManager em = ctx.get(\"em\");\n      // use it as you would...\n      ctx.response().end(/* your response here... */);\n    });\n\n    server.handler(router::accept);\n  }\n}\n</code></pre>\n\n<p>Be aware that this code never closes/disposes your entity manager and you might need to add a end handler/exception handler somewhere to close it.</p>\n"}], "owner": {"reputation": 1602, "user_id": 3105524, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/5b169766a0453f1ace846e5d425c940b?s=128&d=identicon&r=PG", "display_name": "Kamyar", "link": "https://stackoverflow.com/users/3105524/kamyar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 380, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1506067318, "creation_date": 1505905878, "question_id": 46320507, "link": "https://stackoverflow.com/questions/46320507/how-can-i-get-current-web-request-using-vert-x-web", "title": "How can I get current web request using Vert.x Web?", "body": "<p>I am writing a project using Hibernate (JPA) + Vert.x Web (Kotlin) and I need to bind EntityManager to Web Request, I mean I want to create EntityManager per each web request. I need to get current web request from VertX using some static method (object in Kotlin). Is there a way to do that? Or am I going the wrong way since VertX is reactive?</p>\n"}, {"tags": ["android", "android-studio", "kotlin"], "comments": [{"owner": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "edited": false, "score": 0, "creation_date": 1505906053, "post_id": 46320224, "comment_id": 79601691, "body": "The code seems to be correct. You may put your cursor on <code>nameTextField</code> and press <code>Ctrl+Q</code> to see if it is <code>EditText</code>."}, {"owner": {"reputation": 9, "user_id": 7688524, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10212413777924402/picture?type=large", "display_name": "Eduardo Guterres", "link": "https://stackoverflow.com/users/7688524/eduardo-guterres"}, "reply_to_user": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "edited": false, "score": 0, "creation_date": 1505906668, "post_id": 46320224, "comment_id": 79602173, "body": "apparently is a problem with findViewById, but I dont know how to replace this"}], "answers": [{"comments": [{"owner": {"reputation": 1385, "user_id": 4971561, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-YIQlI2oeD5Q/AAAAAAAAAAI/AAAAAAAAAGA/jJHvlu2yYaI/photo.jpg?sz=128", "display_name": "Maro\u0161 \u0160eleng", "link": "https://stackoverflow.com/users/4971561/maro%c5%a1-%c5%a0eleng"}, "edited": false, "score": 2, "creation_date": 1505908178, "post_id": 46320820, "comment_id": 79603191, "body": "Definitely don&#39;t use the <code>!!</code> syntax."}, {"owner": {"reputation": 13256, "user_id": 3879847, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/shQpQ.png?s=128&g=1", "display_name": "Ranjith Kumar", "link": "https://stackoverflow.com/users/3879847/ranjith-kumar"}, "reply_to_user": {"reputation": 1385, "user_id": 4971561, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-YIQlI2oeD5Q/AAAAAAAAAAI/AAAAAAAAAGA/jJHvlu2yYaI/photo.jpg?sz=128", "display_name": "Maro\u0161 \u0160eleng", "link": "https://stackoverflow.com/users/4971561/maro%c5%a1-%c5%a0eleng"}, "edited": false, "score": 0, "creation_date": 1505909961, "post_id": 46320820, "comment_id": 79604424, "body": "@Maro\u0161\u0160eleng Android studio suggest this. Shall I use ? syntax"}, {"owner": {"reputation": 13256, "user_id": 3879847, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/shQpQ.png?s=128&g=1", "display_name": "Ranjith Kumar", "link": "https://stackoverflow.com/users/3879847/ranjith-kumar"}, "reply_to_user": {"reputation": 9, "user_id": 7688524, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10212413777924402/picture?type=large", "display_name": "Eduardo Guterres", "link": "https://stackoverflow.com/users/7688524/eduardo-guterres"}, "edited": false, "score": 0, "creation_date": 1505910013, "post_id": 46320820, "comment_id": 79604470, "body": "@EduardoGuterres this is kotlin syntax. Nothing else. Please put green tick for this answer"}, {"owner": {"reputation": 9, "user_id": 7688524, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10212413777924402/picture?type=large", "display_name": "Eduardo Guterres", "link": "https://stackoverflow.com/users/7688524/eduardo-guterres"}, "edited": false, "score": 0, "creation_date": 1505910074, "post_id": 46320820, "comment_id": 79604516, "body": "@RanjithKumar cant I take out the !! ?"}, {"owner": {"reputation": 13256, "user_id": 3879847, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/shQpQ.png?s=128&g=1", "display_name": "Ranjith Kumar", "link": "https://stackoverflow.com/users/3879847/ranjith-kumar"}, "reply_to_user": {"reputation": 9, "user_id": 7688524, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10212413777924402/picture?type=large", "display_name": "Eduardo Guterres", "link": "https://stackoverflow.com/users/7688524/eduardo-guterres"}, "edited": false, "score": 0, "creation_date": 1505910240, "post_id": 46320820, "comment_id": 79604653, "body": "@EduardoGuterres  if you take out --&gt; surround with if(dialogView !=null). Another null avoiding syntax also there. I will update later"}], "tags": [], "owner": {"reputation": 13256, "user_id": 3879847, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/shQpQ.png?s=128&g=1", "display_name": "Ranjith Kumar", "link": "https://stackoverflow.com/users/3879847/ranjith-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1505906837, "creation_date": 1505906837, "answer_id": 46320820, "question_id": 46320224, "link": "https://stackoverflow.com/questions/46320224/unresolved-reference-text-android-studio-kotlin-findviewbyid-fault/46320820#46320820", "title": "unresolved reference: text - Android Studio + Kotlin (findViewById fault?)", "body": "<p>Please use this kind of syntax</p>\n\n<pre><code> val nameTextField = dialogView!!.findViewById(R.id.addChannelNameTxt) as EditText\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9, "user_id": 7688524, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10212413777924402/picture?type=large", "display_name": "Eduardo Guterres", "link": "https://stackoverflow.com/users/7688524/eduardo-guterres"}, "edited": false, "score": 0, "creation_date": 1505914198, "post_id": 46322642, "comment_id": 79607533, "body": "always check when I say the root is null? just want to make sure I udnerstand what I am doing :)"}, {"owner": {"reputation": 6703, "user_id": 1797950, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/1KyYn.jpg?s=128&g=1", "display_name": "crgarridos", "link": "https://stackoverflow.com/users/1797950/crgarridos"}, "reply_to_user": {"reputation": 9, "user_id": 7688524, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10212413777924402/picture?type=large", "display_name": "Eduardo Guterres", "link": "https://stackoverflow.com/users/7688524/eduardo-guterres"}, "edited": false, "score": 0, "creation_date": 1505916805, "post_id": 46322642, "comment_id": 79609546, "body": "I don&#39;t understand your question"}, {"owner": {"reputation": 9, "user_id": 7688524, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10212413777924402/picture?type=large", "display_name": "Eduardo Guterres", "link": "https://stackoverflow.com/users/7688524/eduardo-guterres"}, "edited": false, "score": 0, "creation_date": 1505917889, "post_id": 46322642, "comment_id": 79610310, "body": "&quot;You shoul always check if the value is null&quot;. You mean I should check every time my root is null?"}], "tags": [], "owner": {"reputation": 6703, "user_id": 1797950, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/1KyYn.jpg?s=128&g=1", "display_name": "crgarridos", "link": "https://stackoverflow.com/users/1797950/crgarridos"}, "is_accepted": true, "score": 1, "last_activity_date": 1505912002, "creation_date": 1505912002, "answer_id": 46322642, "question_id": 46320224, "link": "https://stackoverflow.com/questions/46320224/unresolved-reference-text-android-studio-kotlin-findviewbyid-fault/46322642#46322642", "title": "unresolved reference: text - Android Studio + Kotlin (findViewById fault?)", "body": "<p>You shoul always check if the value is null. It can be done using <code>if(yourvar != null)</code> and kotlin will autocast to not-null type in the following lines. You can also use the elvis operator (<code>?:</code>) to reach this.</p>\n\n<pre><code>val dialogView = layoutInflater.inflate(R.layout.add_channel_dialog, null) ?: return\n</code></pre>\n\n<p>this will ensure that you are returning a not-null instance fro the view or exit from the fuction if not. and then you can call safelly:</p>\n\n<pre><code>val nameTextField = dialogView.findViewById&lt;EditText&gt;(R.id.addChannelNameTxt)\n</code></pre>\n\n<hr>\n\n<p>The use <code>!!</code> operator is not recommened, from the <a href=\"https://kotlinlang.org/docs/reference/null-safety.html#the--operator\" rel=\"nofollow noreferrer\">doc</a>:</p>\n\n<blockquote>\n  <p>The !! Operator is for NPE-lovers.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 3989654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06aebe44ede69768c635b96e97a5ca43?s=128&d=identicon&r=PG&f=1", "display_name": "ROHIT KUMAR GUPTA", "link": "https://stackoverflow.com/users/3989654/rohit-kumar-gupta"}, "reply_to_user": {"reputation": 1605, "user_id": 4854110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f31a57ea3ee823fe3e6ecd9cac9d5cea?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick", "link": "https://stackoverflow.com/users/4854110/patrick"}, "edited": false, "score": 0, "creation_date": 1523900932, "post_id": 49860958, "comment_id": 86741909, "body": "No, actually this line import all view ids for that particular layout, by using this line you don&#39;t have to even use findViewById."}], "tags": [], "owner": {"reputation": 1, "user_id": 3989654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06aebe44ede69768c635b96e97a5ca43?s=128&d=identicon&r=PG&f=1", "display_name": "ROHIT KUMAR GUPTA", "link": "https://stackoverflow.com/users/3989654/rohit-kumar-gupta"}, "is_accepted": false, "score": -1, "last_activity_date": 1523892322, "creation_date": 1523892322, "answer_id": 49860958, "question_id": 46320224, "link": "https://stackoverflow.com/questions/46320224/unresolved-reference-text-android-studio-kotlin-findviewbyid-fault/49860958#49860958", "title": "unresolved reference: text - Android Studio + Kotlin (findViewById fault?)", "body": "<p>import kotlinx.android.synthetic.main.your_layout_xml_name.*</p>\n\n<p>Please replace \"your_layout_xml_name\" with your \"layout_name\" on the import line will solve your problem.</p>\n"}], "owner": {"reputation": 9, "user_id": 7688524, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10212413777924402/picture?type=large", "display_name": "Eduardo Guterres", "link": "https://stackoverflow.com/users/7688524/eduardo-guterres"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4110, "favorite_count": 1, "accepted_answer_id": 46322642, "answer_count": 3, "score": 0, "last_activity_date": 1523892322, "creation_date": 1505905092, "last_edit_date": 1505905681, "question_id": 46320224, "link": "https://stackoverflow.com/questions/46320224/unresolved-reference-text-android-studio-kotlin-findviewbyid-fault", "title": "unresolved reference: text - Android Studio + Kotlin (findViewById fault?)", "body": "<p>I am trying to create an alert dialog although I have a very strange problem. My .text is giving me the error \"unresolved reference\". I triple and quadra checked but cant really find the reason.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>fun addChannelClicked(view: View) {\n    if (AuthService.isLoggedIn) {\n        val builder = AlertDialog.Builder(this)\n        val dialogView = layoutInflater.inflate(R.layout.add_channel_dialog, null)\n\n        builder.setView(dialogView)\n                .setPositiveButton(\"Add\") { dialogInterface, i  -&gt;\n                    // perform some logic when clicked\n                    val nameTextField = dialogView.findViewById&lt;EditText&gt;(R.id.addChannelNameTxt)\n                    val descTextField = dialogView.findViewById&lt;EditText&gt;(R.id.addChannelDescTxt)\n                    val channelName = nameTextField.text.toString()\n                    val channelDesc = descTextField.text.toString()\n\n                    // Create channel with the channel name and description\n                    hideKeyboard()\n\n                }\n                .setNegativeButton(\"Cancel\") { dialogInterface, i -&gt;\n                    // Cancel and close the dialog\n                    hideKeyboard()\n                }\n                .show()\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "string", "intellij-idea", "kotlin", "kotlin-android-extensions"], "comments": [{"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1505936424, "post_id": 46319586, "comment_id": 79621809, "body": "Looks like you have the entire assignment expression selected. Please try putting the caret on the string constant instead."}, {"owner": {"reputation": 6181, "user_id": 3322533, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cbbd1b40887d19bc0c8fdd5ef42a05ed?s=128&d=identicon&r=PG", "display_name": "User1291", "link": "https://stackoverflow.com/users/3322533/user1291"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1505938072, "post_id": 46319586, "comment_id": 79622677, "body": "@yole Really?! I tried putting the carret at the end of the string, but that didn&#39;t work. You really have to put it ON the string, as in &quot;in-between the quotation marks&quot;... Thanks. Want to make an answer out of it?"}], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 1, "last_activity_date": 1505939759, "creation_date": 1505939759, "answer_id": 46331353, "question_id": 46319586, "link": "https://stackoverflow.com/questions/46319586/string-ressource-extraction-for-kotlin-in-android-studio/46331353#46331353", "title": "string ressource extraction for kotlin in android studio?", "body": "<p>The action works if you put the editor caret inside the string literal (between the quotation marks).</p>\n"}], "owner": {"reputation": 6181, "user_id": 3322533, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cbbd1b40887d19bc0c8fdd5ef42a05ed?s=128&d=identicon&r=PG", "display_name": "User1291", "link": "https://stackoverflow.com/users/3322533/user1291"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 46331353, "answer_count": 1, "score": 0, "last_activity_date": 1505939759, "creation_date": 1505903176, "question_id": 46319586, "link": "https://stackoverflow.com/questions/46319586/string-ressource-extraction-for-kotlin-in-android-studio", "title": "string ressource extraction for kotlin in android studio?", "body": "<p>So the only thing I see in Android Studio (3.0 Beta 6) when I alt-enter is a very useless \"adjust code style settings\" option.</p>\n\n<p><a href=\"https://i.stack.imgur.com/JHcOz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JHcOz.png\" alt=\"adjust code style settings\"></a></p>\n\n<p>This is very inconvenient.</p>\n\n<p>There SHOULD be that feature in there, somewhere, since <a href=\"https://youtrack.jetbrains.com/issue/KT-11715#tab=History\" rel=\"nofollow noreferrer\">this issue, here</a> has been marked \"fixed\", and true enough, if I \"Help->find action\"-search it, I do find an intent</p>\n\n<p><a href=\"https://i.stack.imgur.com/vHx2X.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vHx2X.png\" alt=\"toggled-on intent\"></a></p>\n\n<p>But this doesn't do anything. How do I get this to work?</p>\n"}, {"tags": ["java", "kotlin"], "comments": [{"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 0, "creation_date": 1505898849, "post_id": 46317772, "comment_id": 79597064, "body": "use backtick, e.g: <code>it.`val`</code>"}], "answers": [{"comments": [{"owner": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "edited": false, "score": 0, "creation_date": 1505901069, "post_id": 46317952, "comment_id": 79598570, "body": "@juzaai I mean <code>implements</code> is reserved in Java. But is there a way to escape it or we should prevent using Java&#39;s reserved words also?"}, {"owner": {"reputation": 4815, "user_id": 2418224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zSFiW.png?s=128&g=1", "display_name": "juzraai", "link": "https://stackoverflow.com/users/2418224/juzraai"}, "reply_to_user": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "edited": false, "score": 0, "creation_date": 1505901350, "post_id": 46317952, "comment_id": 79598765, "body": "@BakaWaii Oh, I misunderstood, sorry. Currently I don&#39;t know about the solution for that case (tried to use <code>@JvmName</code> with no luck)."}, {"owner": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "edited": false, "score": 1, "creation_date": 1505901495, "post_id": 46317952, "comment_id": 79598850, "body": "@juzraai I see. Maybe I should simply prevent using them."}, {"owner": {"reputation": 273, "user_id": 8598615, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6b08f064935ebd6cfcc44f1bc01932b?s=128&d=identicon&r=PG&f=1", "display_name": "Balaraju M", "link": "https://stackoverflow.com/users/8598615/balaraju-m"}, "edited": false, "score": 1, "creation_date": 1505903189, "post_id": 46317952, "comment_id": 79599935, "body": "@Bakawali i think this way we can <a href=\"https://stackoverflow.com/questions/44456977/calling-kotlin-functions-which-are-keywords-in-java-from-java?rq=1\" title=\"calling kotlin functions which are keywords in java from java\">stackoverflow.com/questions/44456977/&hellip;</a>"}, {"owner": {"reputation": 273, "user_id": 8598615, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6b08f064935ebd6cfcc44f1bc01932b?s=128&d=identicon&r=PG&f=1", "display_name": "Balaraju M", "link": "https://stackoverflow.com/users/8598615/balaraju-m"}, "edited": false, "score": 2, "creation_date": 1505903248, "post_id": 46317952, "comment_id": 79599984, "body": "@JvmName(&quot;neww&quot;) fun new(): String {     return &quot;just returns some string&quot; } \t\t   String s = something.neww();  and what finally i am getting is better to avoid kotlin keywords as java identifiers and visa versa @Bakavali,@Juzraai"}, {"owner": {"reputation": 273, "user_id": 8598615, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6b08f064935ebd6cfcc44f1bc01932b?s=128&d=identicon&r=PG&f=1", "display_name": "Balaraju M", "link": "https://stackoverflow.com/users/8598615/balaraju-m"}, "edited": false, "score": 0, "creation_date": 1505905276, "post_id": 46317952, "comment_id": 79601222, "body": "Yes,That is really better even if kotlin contributors deprecate those words it is better ininteroperablity"}], "tags": [], "owner": {"reputation": 4815, "user_id": 2418224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zSFiW.png?s=128&g=1", "display_name": "juzraai", "link": "https://stackoverflow.com/users/2418224/juzraai"}, "is_accepted": true, "score": 5, "last_activity_date": 1505905462, "last_edit_date": 1505905462, "creation_date": 1505898877, "answer_id": 46317952, "question_id": 46317772, "link": "https://stackoverflow.com/questions/46317772/how-kotlin-will-take-val-as-an-keyword-from-java-class/46317952#46317952", "title": "How Kotlin will take val as an keyword from java class", "body": "<p><a href=\"https://kotlinlang.org/docs/reference/java-interop.html#escaping-for-java-identifiers-that-are-keywords-in-kotlin\" rel=\"nofollow noreferrer\">According to the documentation</a>, <strong>if your Java identifier is a keyword in Kotlin,</strong> you can still use it in Kotlin if you wrap it in backticks.</p>\n\n<p>For example, if you have this in Java:</p>\n\n<pre><code>public class JavaClass {\n    public static int val = 3;\n}\n</code></pre>\n\n<p>You can access it in Kotlin this way:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    println(JavaClass.`val`) // prints 3\n}\n</code></pre>\n\n<hr>\n\n<p>EDIT (v2):</p>\n\n<blockquote>\n  <p>What about reverse from kotlin to java here java is strictly typed lang,how it consider kotlin val keyword</p>\n</blockquote>\n\n<p><strong>If your Kotlin identifier is a Java keyword</strong>, then you may have trouble.</p>\n\n<p>For methods, the <code>@JvmName(\"other-name\")</code> <a href=\"https://stackoverflow.com/questions/44456977/calling-kotlin-functions-which-are-keywords-in-java-from-java?rq=1\">annotation can be used in Kotlin</a> to override the method name.</p>\n\n<p>Kotlin:</p>\n\n<pre><code>class KotlinClass {\n    @JvmName(\"otherName\")\n    fun new() {\n        // ...\n    }\n}\n</code></pre>\n\n<p>Java:</p>\n\n<pre><code>public static void main(String[] args) {\n    KotlinClass.otherName();\n}\n</code></pre>\n\n<p>But for fields, AFAIK there's no solution provided by Kotlin or Java.</p>\n\n<p><strong>It's better not to use Kotlin keywords, nor Java keywords in your programs.</strong></p>\n\n<hr>\n\n<p>EDIT (v1): (misunderstood the second question, and wrote in general about how to use Kotlin fields in Java)</p>\n\n<p>Kotlin properties will be seen as getter and setter methods in Java. Properties declared with <code>val</code> will only have a getter. If you add <a href=\"https://kotlinlang.org/docs/reference/java-to-kotlin-interop.html#instance-fields\" rel=\"nofollow noreferrer\"><code>@JvmField</code></a> to a Kotlin property, you can then access that field also in a direct way. (<code>val</code> will be final, as expected).</p>\n\n<p>Kotlin:</p>\n\n<pre><code>class KotlinClass {\n    val a = 1\n    var b = 2\n    @JvmField val c = 3\n    @JvmField var d = 4\n}\n</code></pre>\n\n<p>Java:</p>\n\n<pre><code>public static void main(String[] args) {\n    KotlinClass o = new KotlinClass();\n    o.getA(); // 1\n    // o.setA(1); // not exists\n    o.getB(); // 2\n    o.setB(1);\n    o.c; // 3\n    o.getC(); // 3\n    // o.c = 1; // compile error\n    // o.setC(1); // not exists\n    o.d; // 4\n    o.getD(); // 4\n    o.d; = 4\n    o.setD(1);\n}\n</code></pre>\n"}], "owner": {"reputation": 273, "user_id": 8598615, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6b08f064935ebd6cfcc44f1bc01932b?s=128&d=identicon&r=PG&f=1", "display_name": "Balaraju M", "link": "https://stackoverflow.com/users/8598615/balaraju-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 484, "favorite_count": 0, "accepted_answer_id": 46317952, "answer_count": 1, "score": 2, "last_activity_date": 1505905462, "creation_date": 1505898432, "last_edit_date": 1505901393, "question_id": 46317772, "link": "https://stackoverflow.com/questions/46317772/how-kotlin-will-take-val-as-an-keyword-from-java-class", "title": "How Kotlin will take val as an keyword from java class", "body": "<p>In Kotlin they are introduced a keyword <code>val</code> and it is interoperable with Java (we can access functions and members from Java, and vice versa).</p>\n\n<p>In Java there is no keyword <code>val</code>, if my code is look like this in Java</p>\n\n<pre><code>class Myclass{\n    int val =10; //here val is variable name \n}\n</code></pre>\n\n<p>If I pass this one to Kotlin class, how it's taken?</p>\n"}, {"tags": ["android", "android-activity", "arraylist", "kotlin", "baseadapter"], "owner": {"reputation": 677, "user_id": 3491853, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/702e677117e7ff8618bee424e6f9f8be?s=128&d=identicon&r=PG&f=1", "display_name": "MB_Coder", "link": "https://stackoverflow.com/users/3491853/mb-coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 463, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1505891157, "creation_date": 1505878323, "last_edit_date": 1505891157, "question_id": 46312823, "link": "https://stackoverflow.com/questions/46312823/how-to-use-setonclicklistener-between-grid-view-and-list-view-in-kotlin", "title": "How to use setOnclickListener between Grid View and List View in kotlin", "body": "<p>I have 3 activities to connect between the:</p>\n\n<p>The first activity for Grid View  \"<strong>MainActivity.kt</strong>\",\nsecond for List View  \"<strong>Main2Activity.kt</strong>\",\nthird for Details,\nby using setOnclickListener in Grid View activity I wanna click on the image <strong>(a)</strong> inside  \"<strong>MainActivity.kt</strong>\" to  be converted to adapter1 inside second activity \"<strong>Main2Activity.kt</strong>\",\nand then click on the image <strong>(b)</strong> inside  \"<strong>MainActivity.kt</strong>\" to be converted to adapter2 inside second activity \"<strong>Main2Activity.kt</strong>\", how to make it works?</p>\n\n<p><strong>Note:</strong> I'm using BaseAdapter \nand second activity contains 2 ArrayList </p>\n\n<p><strong>Here is a MainActivity.kt</strong></p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\nvar adapter:FoodAdapter?=null\nvar listOfFoods =ArrayList&lt;Food&gt;()\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(layout.activity_main)\n\n\n    // load foods\n    listOfFoods.add(Food(\"Coffee\",\"   Coffee preparation is\", a))\n    listOfFoods.add(Food(\"Coffee\",\"   Coffee preparation is\", b))\n    listOfFoods.add(Food(\"Coffee\",\"   Coffee preparation is\", c))\n    listOfFoods.add(Food(\"Coffee\",\"   Coffee preparation is\", d))\n\n    adapter= FoodAdapter(this,listOfFoods)\n\n    gvListFood.adapter =adapter\n\n}\n\n\nclass  FoodAdapter: BaseAdapter {\n    var listOfFood= ArrayList&lt;Food&gt;()\n    var context: Context?=null\n    constructor(context:Context,listOfFood:ArrayList&lt;Food&gt;):super(){\n        this.context=context\n        this.listOfFood=listOfFood\n    }\n    override fun getView(p0: Int, p1: View?, p2: ViewGroup?): View? {\n        val food = this.listOfFood[p0]\n        var inflator = context!!.getSystemService(Context.LAYOUT_INFLATER_SERVICE) as LayoutInflater\n        var foodView= inflator.inflate(layout.food_ticket,null)\n        foodView.ivFoodImage.setImageResource(food.image!!)\n        foodView.ivFoodImage.setOnClickListener {\n            if (foodView.ivFoodImage.equals(a)) {\n            val intent = Intent(context, Main2Activity::class.java)\n\n            intent.putExtra(\"name\", food.name!!)\n            intent.putExtra(\"des\", food.des!!)\n            intent.putExtra(\"image\", food.image!!)\n            context!!.startActivity(intent)\n        }else if (foodView.ivFoodImage.equals(b)){\n                val intent = Intent(context, Main2Activity::class.java)\n\n                intent.putExtra(\"name\", food.name!!)\n                intent.putExtra(\"des\", food.des!!)\n                intent.putExtra(\"image\", food.image!!)\n                context!!.startActivity(intent)\n            }\n        }\n        return foodView\n    }\n\n    override fun getItem(p0: Int): Any {\n        return listOfFood[p0]\n    }\n\n    override fun getItemId(p0: Int): Long {\n        return p0.toLong()\n    }\n\n    override fun getCount(): Int {\n\n        return listOfFood.size\n    }\n\n}\n}\n</code></pre>\n\n<p><strong>Here is a Main2Activity.kt</strong></p>\n\n<pre><code>class Main2Activity : AppCompatActivity() {\nvar adapter1: FoodAdapter? = null\nvar adapter2: FoodAdapter2? = null\nvar listOfFoods2 = ArrayList&lt;Food&gt;()\nvar listOfFoods3 = ArrayList&lt;Food&gt;()\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main2)\n\n    val bundle = intent.extras\n    val name = bundle.getString(\"name\")\n    val des = bundle.getString(\"des\")\n    val image = bundle.getInt(\"image\")\n\n    ivFoodImage2?.let {\n        it.setImageResource(image)\n    }\n    //ivFoodImage2.setImageResource(image)\n    tvName2?.let {\n        it.text = name\n    }\n    //tvName2.text=name\n    tvDes2?.let {\n        it.text = des\n    }\n    //tvDes2.text=des\n\n\n\n    // load foods2\n    listOfFoods2.add(Food(\"Coffee\", \"   Coffee1 preparation is\", R.drawable.a))\n     listOfFoods2.add(Food(\"Coffee\", \"   Coffee2 preparation is\", R.drawable.b))\n\n         //listOfFoods2.add(Food(\"Coffee\",\"   Coffee preparation is\",R.drawable.c))\n         //listOfFoods2.add(Food(\"Coffee\",\"   Coffee preparation is\",R.drawable.d))\n\n\n    // load foods3\n\n\n    //listOfFoods3.add(Food(\"Coffee\",\"   Coffee preparation is\",R.drawable.a))\n    //listOfFoods3.add(Food(\"Coffee\",\"   Coffee preparation is\",R.drawable.b))\n    listOfFoods3.add(Food(\"Coffee\", \"   Coffee3 preparation is\", R.drawable.c))\n    listOfFoods3.add(Food(\"Coffee\", \"   Coffee4 preparation is\", R.drawable.d))\n\n\n\n  if(adapter1 ==lvFoods2.adapter) {\n  adapter1 = FoodAdapter(listOfFoods2, this)\n  lvFoods2.adapter = adapter1\n  } else if (adapter2==lvFoods2.adapter) {\n  adapter2 = FoodAdapter2(listOfFoods3, this)\n  lvFoods2.adapter = adapter2\n  }\n\n}\n\n\nclass FoodAdapter : BaseAdapter {\n    var context: Context? = null\n    var listOfFoodsLocal2 = ArrayList&lt;Food&gt;()\n\n constructor(listOfFoods2: ArrayList&lt;Food&gt;, context: Context) : super() {    \n\n\n        this.listOfFoodsLocal2 = listOfFoods2\n        this.context = context\n    }\n\n    override fun getView(p0: Int, p1: View?, p2: ViewGroup?): View {\n        val food = this.listOfFoodsLocal2[p0]\n        var inflator = context!!.getSystemService(Context.LAYOUT_INFLATER_SERVICE) as LayoutInflater\n        val foodView = inflator.inflate(R.layout.food_ticket2, null)\n\n\n                 foodView.ivFoodImage2?.let {\n                     it.setImageResource(food.image!!)\n                 }\n        foodView.tvName2?.let {\n\n            it.text = food.name!!\n        }\n        foodView.tvDes2?.let {\n            it.text = food.des!!\n        }\n\n        foodView.ivFoodImage2.setOnClickListener {\n\n            //move to next\n            val intent = Intent(context, FoodDetails::class.java)\n            intent.putExtra(\"name\", food.name!!)\n            intent.putExtra(\"des\", food.des!!)\n            intent.putExtra(\"image\", food.image!!)\n\n            context!!.startActivity(intent)\n\n        }\n        return foodView\n\n    }\n\n\n    override fun getItem(p0: Int): Any {\n        return listOfFoodsLocal2[p0]\n    }\n\n    override fun getItemId(p0: Int): Long {\n        return p0.toLong()\n    }\n\n    override fun getCount(): Int {\n        return listOfFoodsLocal2.size\n    }\n\n}\n\nclass FoodAdapter2 : BaseAdapter {\n    var context: Context? = null\n    var listOfFoodsLocal3 = ArrayList&lt;Food&gt;()\n\n constructor(listOfFoods3: ArrayList&lt;Food&gt;, context: Context) : super() {       \n        this.listOfFoodsLocal3 = listOfFoods3\n        this.context = context\n    }\n\n    override fun getView(p0: Int, p1: View?, p2: ViewGroup?): View {\n        val food = this.listOfFoodsLocal3[p0]\n        var inflator = context!!.getSystemService(Context.LAYOUT_INFLATER_SERVICE) as LayoutInflater\n        val foodView = inflator.inflate(R.layout.food_ticket2, null)\n\n\n         foodView.ivFoodImage2?.let {\n             it.setImageResource(food.image!!)\n         }\n        foodView.tvName2?.let {\n            it.text = food.name!!\n        }\n         foodView.tvDes2?.let {\n             it.text = food.des!!\n         }\n\n\n\n        foodView.ivFoodImage2.setOnClickListener {\n\n            //move to next\n            val intent = Intent(context, FoodDetails::class.java)\n            intent.putExtra(\"name\", food.name!!)\n            intent.putExtra(\"des\", food.des!!)\n            intent.putExtra(\"image\", food.image!!)\n\n            context!!.startActivity(intent)\n\n        }\n        return foodView\n\n    }\n\n\n    override fun getItem(p0: Int): Any {\n        return listOfFoodsLocal3[p0]\n    }\n\n    override fun getItemId(p0: Int): Long {\n        return p0.toLong()\n    }\n\n    override fun getCount(): Int {\n        return listOfFoodsLocal3.size\n    }\n\n}\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 8621, "user_id": 5247292, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/fQKn3.png?s=128&g=1", "display_name": "guenhter", "link": "https://stackoverflow.com/users/5247292/guenhter"}, "is_accepted": true, "score": 2, "last_activity_date": 1505884801, "creation_date": 1505884801, "answer_id": 46313845, "question_id": 46312775, "link": "https://stackoverflow.com/questions/46312775/why-can-i-define-a-var-without-a-class-in-kotlin/46313845#46313845", "title": "Why can I define a var without a class in Kotlin?", "body": "<p>If you decompile the resulting <code>.class</code> file, you will get:</p>\n\n<pre><code>public final class myClassKt { \n  @NotNull\n  public static final String getB() { return b; } \n  public static final void setB(@NotNull String b) { ... } \n  @NotNull\n  private static String b = \"New Girl\";\n}\n</code></pre>\n\n<p>So the answer is, that you get a <code>private static</code> field, with <code>static</code> access methods to it (get and set)</p>\n"}], "owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 46313845, "answer_count": 1, "score": 0, "last_activity_date": 1505887623, "creation_date": 1505878063, "last_edit_date": 1505887623, "question_id": 46312775, "link": "https://stackoverflow.com/questions/46312775/why-can-i-define-a-var-without-a-class-in-kotlin", "title": "Why can I define a var without a class in Kotlin?", "body": "<p>I define a var b in the file myClass.kt which isn't contained any class, and the app can run correctly.</p>\n\n<p>It seems that the var b is just like static var in Java, right?</p>\n\n<p><strong>Main</strong></p>\n\n<pre><code>package com.example.dagger.kotlin.ui\nclass HomeActivity : DemoActivity() {\n    @Inject\n    lateinit var locationManager: LocationManager\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        (application as DemoApplication).component.inject(this)\n\n        // TODO Do something with the injected dependencies here\n        locationInfo.text = \"Injected LocationManager:\\n$locationManager\"\n\n\n        Toast.makeText(this, b, Toast.LENGTH_LONG).show();\n\n    }\n\n\n\n}\n</code></pre>\n\n<p><strong>myClass.kt</strong></p>\n\n<pre><code>package com.example.dagger.kotlin.ui\nvar  b=\"New Girl\"\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 34292, "user_id": 627727, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/uOIWL.jpg?s=128&g=1", "display_name": "mkobit", "link": "https://stackoverflow.com/users/627727/mkobit"}, "edited": false, "score": 2, "creation_date": 1505876722, "post_id": 46312569, "comment_id": 79587025, "body": "What happens when you try to compile or run it? That will give you your answer."}], "answers": [{"comments": [{"owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "edited": false, "score": 0, "creation_date": 1505880617, "post_id": 46312687, "comment_id": 79587930, "body": "Thanks! but I get the error  &quot;Type mismatch: inferred type is Int but Unit was expected&quot; when I use Code B"}, {"owner": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "reply_to_user": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "edited": false, "score": 0, "creation_date": 1505880776, "post_id": 46312687, "comment_id": 79587975, "body": "The return type of the enclosing function should be match with the return value. See the above example. The return type of <code>getLength()</code> is <code>Int</code> and the return value is <code>-1</code>. The <code>return</code> here returns from the nearest enclosing function but not assigning a value to <code>l</code>."}, {"owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "edited": false, "score": 0, "creation_date": 1505881039, "post_id": 46312687, "comment_id": 79588028, "body": "But Why is Code A  OK ?"}, {"owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "edited": false, "score": 0, "creation_date": 1505881171, "post_id": 46312687, "comment_id": 79588056, "body": "and more val l = b?.length ?: {return -1} is not OK"}, {"owner": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "reply_to_user": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "edited": false, "score": 0, "creation_date": 1505881575, "post_id": 46312687, "comment_id": 79588177, "body": "Code A is ok because <code>-1</code> is an expression which denotes a value, so that it can be assigned to <code>l</code>. But in code B, <code>return -1</code> is an expression which returns from a function."}, {"owner": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "reply_to_user": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "edited": false, "score": 0, "creation_date": 1505882217, "post_id": 46312687, "comment_id": 79588346, "body": "Don&#39;t mix up the elvis operator with <code>if-else</code>. When you write <code>{return -1}</code> after <code>?:</code>, it denotes a function type and <code>return</code> is not allowed here. You should use <code>run</code> if you need to run a block of code using elvis operator. Like: <code>val l = b?.length ?: run { return -1 }</code> or <code>val l = b?.length ?: run { return@run -1 }</code>"}, {"owner": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "reply_to_user": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "edited": false, "score": 0, "creation_date": 1505888557, "post_id": 46312687, "comment_id": 79590767, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/154850/discussion-between-bakawaii-and-hellocw\">continue this discussion in chat</a>."}, {"owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "edited": false, "score": 0, "creation_date": 1505889436, "post_id": 46312687, "comment_id": 79591227, "body": "To BakaWaii, could you have a look at my question which I have made some update ? Thanks!"}], "tags": [], "owner": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "is_accepted": false, "score": 5, "last_activity_date": 1505888515, "last_edit_date": 1505888515, "creation_date": 1505877394, "answer_id": 46312687, "question_id": 46312569, "link": "https://stackoverflow.com/questions/46312569/can-i-add-return-when-i-use-elvis-operation-in-kotlin/46312687#46312687", "title": "Can I add return when I use Elvis operation in Kotlin?", "body": "<p>From <a href=\"https://kotlinlang.org/docs/reference/null-safety.html#elvis-operator\" rel=\"nofollow noreferrer\">Kotlin's doc</a>:</p>\n\n<blockquote>\n  <p>If the expression to the left of <code>?:</code> is not null, the elvis operator returns it, otherwise it returns the expression to the right. Note that, since <code>throw</code> and <code>return</code> are expressions in Kotlin, they can also be used on the right hand side of the elvis operator.</p>\n</blockquote>\n\n<p>and <a href=\"https://kotlinlang.org/docs/reference/returns.html#returns-and-jumps\" rel=\"nofollow noreferrer\">also</a>,</p>\n\n<blockquote>\n  <p><code>return</code>. By default returns from the nearest enclosing function or anonymous function.</p>\n</blockquote>\n\n<p>So, the answer is yes, as long as the return type of the enclosing function matches with the return value, for example:</p>\n\n<pre><code>fun getLength(b: String?): Int {\n    val l = b?.length ?: return -1    //return an `Int`\n    //if return -1, the code below will not execute\n    return l\n}\n</code></pre>\n\n<p>Note that code A and code B are different in control flow. If you are trying to assign an alternative/default value when the left-hand side value is null, code A will be the best approach.</p>\n"}, {"comments": [{"owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "edited": false, "score": 0, "creation_date": 1505892910, "post_id": 46315129, "comment_id": 79593276, "body": "Thanks! it&#39;s hard to understand Code B, could you write down a equivalence code of Code B for me ?"}, {"owner": {"reputation": 2400, "user_id": 4762282, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a87249e3029c3daae0d473b1dc712484?s=128&d=identicon&r=PG&f=1", "display_name": "Ircover", "link": "https://stackoverflow.com/users/4762282/ircover"}, "reply_to_user": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "edited": false, "score": 0, "creation_date": 1505894159, "post_id": 46315129, "comment_id": 79594021, "body": "@HelloCW Added example to my answer."}, {"owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "edited": false, "score": 0, "creation_date": 1505896141, "post_id": 46315129, "comment_id": 79595292, "body": "Thanks! Now I see completely. Before I think &quot;return -1&quot; will assign -1 to var l in Code B, in fact it&#39;s to assign -1 to function  onCreate(savedInstanceState: Bundle?), and Android studio doesn&#39;t give more details error message."}], "tags": [], "owner": {"reputation": 2400, "user_id": 4762282, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a87249e3029c3daae0d473b1dc712484?s=128&d=identicon&r=PG&f=1", "display_name": "Ircover", "link": "https://stackoverflow.com/users/4762282/ircover"}, "is_accepted": true, "score": 3, "last_activity_date": 1505894133, "last_edit_date": 1505894133, "creation_date": 1505890332, "answer_id": 46315129, "question_id": 46312569, "link": "https://stackoverflow.com/questions/46312569/can-i-add-return-when-i-use-elvis-operation-in-kotlin/46315129#46315129", "title": "Can I add return when I use Elvis operation in Kotlin?", "body": "<p>Difference between <code>Code A</code> and <code>Code B</code> that first one set <code>-1</code> to your variable (now it is <code>l</code>), and second one set <code>-1</code> as result of function work. And <code>Type mismatch</code> error message says that function should not return any value (or return <code>Unit</code>) but you are trying to return int - so it is not Elvis operator syntax error.</p>\n\n<p>Then if you place your <code>Code B</code> in some <code>Int</code> function (like you did it in <code>Code C</code>) there would not be any errors.</p>\n\n<p><strong>Example</strong></p>\n\n<p>If you want to \"convert\" <code>Int</code> to <code>StringBuilder</code> you can do it like following:</p>\n\n<pre><code>fun toStringBuilder(i: Int?): StringBuilder {\n    val result = i?.toString() ?: \"\"\n    return StringBuilder(result)\n}\n</code></pre>\n\n<p>Guess there is no questions. </p>\n\n<p>Second example is absolutelly correct too.</p>\n\n<pre><code>fun toStringBuilder(i: Int?): StringBuilder {\n    val result = i?.toString() ?: return StringBuilder()\n    return StringBuilder(result)\n}\n</code></pre>\n\n<p>If parameter value is <code>null</code> function will not reach second line because it would return at first.</p>\n\n<p>And third example whould generate error (like your <code>Code B</code>).</p>\n\n<pre><code>fun toStringBuilder(i: Int?): StringBuilder {\n    val result = i?.toString() ?: return \"\"\n    return StringBuilder(result)\n}\n</code></pre>\n\n<p>Again there is no error in syntax. Elvis operator is correct. Error is because you are trying to return <code>String</code> to function that declared as returning <code>StringBuilder</code>.</p>\n"}], "owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2868, "favorite_count": 0, "accepted_answer_id": 46315129, "answer_count": 2, "score": 1, "last_activity_date": 1505895788, "creation_date": 1505876589, "last_edit_date": 1505895788, "question_id": 46312569, "link": "https://stackoverflow.com/questions/46312569/can-i-add-return-when-i-use-elvis-operation-in-kotlin", "title": "Can I add return when I use Elvis operation in Kotlin?", "body": "<p>I have read Elvis Operator  at <a href=\"http://mings.in/2017/03/12/Kotlin-Null-Safety.html\" rel=\"nofollow noreferrer\">http://mings.in/2017/03/12/Kotlin-Null-Safety.html</a></p>\n\n<p>The Code A and Code C are OK, but Code B is error (\"Type mismatch: inferred type is Int but Unit was expected\" ), why?</p>\n\n<p><strong>Code A</strong></p>\n\n<pre><code>override fun onCreate(savedInstanceState: Bundle?) {\n      super.onCreate(savedInstanceState)\n      setContentView(R.layout.activity_main)  \n\n      val b: String?  = \"hello\"\n      val l = b?.length ?: -1\n }\n</code></pre>\n\n<p><strong>Code B</strong></p>\n\n<pre><code>   override fun onCreate(savedInstanceState: Bundle?) {\n      super.onCreate(savedInstanceState)\n      setContentView(R.layout.activity_main)\n\n      val b: String?  = \"hello\"\n      val l = b?.length ?: return -1\n\n    }\n</code></pre>\n\n<p><strong>Code C</strong></p>\n\n<pre><code> fun getLength(b: String?): Int {\n        val l = b?.length ?: return -1       \n        return l\n    }\n</code></pre>\n\n<p>BTW, BakaWaii told me \"Code A is ok because -1 is an expression which denotes a value, so that it can be assigned to l. But in code B, return -1 is an expression which returns from a function.\"</p>\n\n<p>I can't understand that \"in code B, return -1 is an expression which returns from a function\". I think that \"return -1 \" will return -1, why does the app occur \"Type mismatch: inferred type is Int but Unit was expected\" ?</p>\n\n<p><strong>And more:</strong></p>\n\n<p>Code C just like Code B, I don't know why it's OK !!!!</p>\n"}, {"tags": ["java", "kotlin", "observable", "reactive-programming", "reactive"], "comments": [{"owner": {"reputation": 23, "user_id": 5738435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/654268cfab8c14f1e6350b3f9e6efad8?s=128&d=identicon&r=PG&f=1", "display_name": "Anatoly Kislov", "link": "https://stackoverflow.com/users/5738435/anatoly-kislov"}, "edited": false, "score": 0, "creation_date": 1505869774, "post_id": 46311462, "comment_id": 79585393, "body": "Solved with removing .observeOn() from subscriber. I wonder if there a way to use multi-threading with .connect() in such way."}], "answers": [{"tags": [], "owner": {"reputation": 23, "user_id": 5738435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/654268cfab8c14f1e6350b3f9e6efad8?s=128&d=identicon&r=PG&f=1", "display_name": "Anatoly Kislov", "link": "https://stackoverflow.com/users/5738435/anatoly-kislov"}, "is_accepted": false, "score": 0, "last_activity_date": 1505869679, "creation_date": 1505869679, "answer_id": 46311762, "question_id": 46311462, "link": "https://stackoverflow.com/questions/46311462/wait-for-completion-of-tasks-of-subscribers-of-connectableobservable/46311762#46311762", "title": "Wait for completion of tasks of subscribers of ConnectableObservable", "body": "<p>One of may subscribers contained .observeOn(Schedulers.io()) which sends emits to specified Scheduler. Probably .connect() only wait for current thread. Removing it solves the problem.</p>\n"}], "owner": {"reputation": 23, "user_id": 5738435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/654268cfab8c14f1e6350b3f9e6efad8?s=128&d=identicon&r=PG&f=1", "display_name": "Anatoly Kislov", "link": "https://stackoverflow.com/users/5738435/anatoly-kislov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505869679, "creation_date": 1505866664, "question_id": 46311462, "link": "https://stackoverflow.com/questions/46311462/wait-for-completion-of-tasks-of-subscribers-of-connectableobservable", "title": "Wait for completion of tasks of subscribers of ConnectableObservable", "body": "<p>I created an observable that is going to be used via multiple subscribers that making some resource-intensive tasks with emits. Using like this:</p>\n\n<pre><code>val connectableObservable = Observable.create {...}.publish()\nconnectableObservable.doOnNext {...}.subscribe()\nconnectableObservable.doOnNext {...}.subscribe()\nconnectableObservable.connect()\n</code></pre>\n\n<p>Unfortunately, connect() is only synchronously waiting for a source not for subscribers to complete tasks. Is there a way to wait for subscribers of ConnectableObservable to finish tasks and only then continue execution?</p>\n"}, {"tags": ["for-loop", "foreach", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 4677, "user_id": 3673259, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/DPHO1.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3673259/joshua"}, "is_accepted": false, "score": 7, "last_activity_date": 1505880595, "creation_date": 1505880595, "answer_id": 46313149, "question_id": 46311279, "link": "https://stackoverflow.com/questions/46311279/kotlin-difference-between-foreachindexed-and-for-in-loop/46313149#46313149", "title": "Kotlin - Difference between &quot;forEachIndexed&quot; and &quot;for in&quot; loop", "body": "<p>No, they are the same. You can read the source of <a href=\"https://github.com/JetBrains/kotlin/blob/8cb194c03fa2a26889afafea6bf730528875b196/libraries/stdlib/src/generated/_Collections.kt#L1487\" rel=\"noreferrer\">forEachIndexed</a> and <a href=\"https://github.com/JetBrains/kotlin/blob/caa2d7a6ce80901f240227ecd4819713c064a2a8/libraries/stdlib/src/generated/_Collections.kt#L1293\" rel=\"noreferrer\">withIndex</a>.</p>\n\n<pre><code>public inline fun &lt;T&gt; Iterable&lt;T&gt;.forEachIndexed(action: (index: Int, T) -&gt; Unit): Unit {\n    var index = 0\n    for (item in this) action(index++, item)\n}\n\n\npublic fun &lt;T&gt; Iterable&lt;T&gt;.withIndex(): Iterable&lt;IndexedValue&lt;T&gt;&gt; {\n    return IndexingIterable { iterator() }\n}\n</code></pre>\n\n<p><code>forEachIndexed</code> use a local var to count the index while <code>withIndex</code> create a decorator for iterator which also use a var to count index. In theory, <code>withIndex</code> create one more layer of wrapping but the performance should be the same. </p>\n"}], "owner": {"reputation": 9976, "user_id": 1369016, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/DkJLX.png?s=128&g=1", "display_name": "Bitcoin Cash - ADA enthusiast", "link": "https://stackoverflow.com/users/1369016/bitcoin-cash-ada-enthusiast"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7825, "favorite_count": 1, "answer_count": 1, "score": 7, "last_activity_date": 1505880595, "creation_date": 1505865064, "question_id": 46311279, "link": "https://stackoverflow.com/questions/46311279/kotlin-difference-between-foreachindexed-and-for-in-loop", "title": "Kotlin - Difference between &quot;forEachIndexed&quot; and &quot;for in&quot; loop", "body": "<p>I am confused on what are the advantages/disadvantages of each of these approaches (assuming I need to use both <code>index</code> and <code>product</code>):</p>\n\n<pre><code>products.forEachIndexed{ index, product -&gt;\n    ...\n}\n\nfor ((index, product) in products.withIndex()) {\n    ...\n}\n</code></pre>\n\n<p><code>products</code> here is a simple collection.</p>\n\n<p>Is there any performance/best practice/etc argument to prefer one over the other?</p>\n"}, {"tags": ["android", "kotlin", "startactivityforresult"], "comments": [{"owner": {"reputation": 31012, "user_id": 25398, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3690dee254e9aa9d98ff964a70e89f23?s=128&d=identicon&r=PG", "display_name": "Cody Caughlan", "link": "https://stackoverflow.com/users/25398/cody-caughlan"}, "edited": false, "score": 0, "creation_date": 1505842708, "post_id": 46306586, "comment_id": 79575190, "body": "Whats in the <code>logcat</code>?"}, {"owner": {"reputation": 1257, "user_id": 7454155, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1998741250353293/picture?type=large", "display_name": "Raj Suvariya", "link": "https://stackoverflow.com/users/7454155/raj-suvariya"}, "reply_to_user": {"reputation": 31012, "user_id": 25398, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3690dee254e9aa9d98ff964a70e89f23?s=128&d=identicon&r=PG", "display_name": "Cody Caughlan", "link": "https://stackoverflow.com/users/25398/cody-caughlan"}, "edited": false, "score": 0, "creation_date": 1505843206, "post_id": 46306586, "comment_id": 79575419, "body": "@CodyCaughlan I have updated the queston"}, {"owner": {"reputation": 1023, "user_id": 5390839, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/u8Wk2.png?s=128&g=1", "display_name": "buradd", "link": "https://stackoverflow.com/users/5390839/buradd"}, "edited": false, "score": 0, "creation_date": 1505843309, "post_id": 46306586, "comment_id": 79575464, "body": "are there any fragments involved or is it activity to activity?"}, {"owner": {"reputation": 1257, "user_id": 7454155, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1998741250353293/picture?type=large", "display_name": "Raj Suvariya", "link": "https://stackoverflow.com/users/7454155/raj-suvariya"}, "reply_to_user": {"reputation": 1023, "user_id": 5390839, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/u8Wk2.png?s=128&g=1", "display_name": "buradd", "link": "https://stackoverflow.com/users/5390839/buradd"}, "edited": false, "score": 0, "creation_date": 1505843808, "post_id": 46306586, "comment_id": 79575709, "body": "@buradd it is activity to activity"}, {"owner": {"reputation": 1023, "user_id": 5390839, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/u8Wk2.png?s=128&g=1", "display_name": "buradd", "link": "https://stackoverflow.com/users/5390839/buradd"}, "edited": false, "score": 0, "creation_date": 1505845767, "post_id": 46306586, "comment_id": 79576689, "body": "try putting a break point on the line super.onActivityResult(requestCode, resultCode, data), then debug it and see if the super is getting called at all.. if it&#39;s getting called and just not hitting your result_code condition than we can narrow down the cause better"}, {"owner": {"reputation": 2577, "user_id": 3451639, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/fGkB6.jpg?s=128&g=1", "display_name": "Aleksander Mielczarek", "link": "https://stackoverflow.com/users/3451639/aleksander-mielczarek"}, "edited": false, "score": 0, "creation_date": 1505847035, "post_id": 46306586, "comment_id": 79577408, "body": "When <code>viewAllNotes</code> is called?"}, {"owner": {"reputation": 2918, "user_id": 984724, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T2JaK.png?s=128&g=1", "display_name": "Dave Thomas", "link": "https://stackoverflow.com/users/984724/dave-thomas"}, "edited": false, "score": 0, "creation_date": 1505860648, "post_id": 46306586, "comment_id": 79583216, "body": "When <code>onActivityResult</code> is called. First line <code>super.onActivityResult(requestCode, resultCode, data)</code>. A breakpoint there."}, {"owner": {"reputation": 11627, "user_id": 2602791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db72b53576b82f4fa30f46bfc8438937?s=128&d=identicon&r=PG", "display_name": "BladeCoder", "link": "https://stackoverflow.com/users/2602791/bladecoder"}, "edited": false, "score": 0, "creation_date": 1505865234, "post_id": 46306586, "comment_id": 79584402, "body": "You should probably override finish() instead of onbackpressed() so it will also set the result if you press the up button (which is different from the back button)"}, {"owner": {"reputation": 1257, "user_id": 7454155, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1998741250353293/picture?type=large", "display_name": "Raj Suvariya", "link": "https://stackoverflow.com/users/7454155/raj-suvariya"}, "edited": false, "score": 0, "creation_date": 1505918271, "post_id": 46306586, "comment_id": 79610601, "body": "The result is being set for sure. I have debugged the code and it is reaching the last line but after that there is no callback received in onActivityResult"}, {"owner": {"reputation": 203, "user_id": 828090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2Ngnm.jpg?s=128&g=1", "display_name": "Mahesh", "link": "https://stackoverflow.com/users/828090/mahesh"}, "edited": false, "score": 0, "creation_date": 1508326211, "post_id": 46306586, "comment_id": 80565246, "body": "@RajSuvariya did u found the solution?"}, {"owner": {"reputation": 1257, "user_id": 7454155, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1998741250353293/picture?type=large", "display_name": "Raj Suvariya", "link": "https://stackoverflow.com/users/7454155/raj-suvariya"}, "reply_to_user": {"reputation": 203, "user_id": 828090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2Ngnm.jpg?s=128&g=1", "display_name": "Mahesh", "link": "https://stackoverflow.com/users/828090/mahesh"}, "edited": false, "score": 1, "creation_date": 1510204720, "post_id": 46306586, "comment_id": 81337777, "body": "@Mahesh yes I solved it. There was no issue with code something wrong with the build. I refreshed the gradle and it worked"}], "owner": {"reputation": 1257, "user_id": 7454155, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1998741250353293/picture?type=large", "display_name": "Raj Suvariya", "link": "https://stackoverflow.com/users/7454155/raj-suvariya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1198, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1505855648, "creation_date": 1505842384, "last_edit_date": 1505855648, "question_id": 46306586, "link": "https://stackoverflow.com/questions/46306586/onactivityresult-not-getting-called-when-calling-java-activity-from-kotlin-for-r", "title": "onActivityResult not getting called when calling java activity from kotlin for result", "body": "<p>I am using Kotlin and Java in my project. I am opening a Java activity for result from Kotlin but the <code>onActivityResult</code> function written in Kotlin never gets called.</p>\n\n<p>Code (Kotlin):</p>\n\n<pre><code> override fun viewAllNotes() {\n        val intent : Intent = Intent(this, ViewAllNotesActivity::class.java)\n        intent.putExtra(AppConstants.VIEW_ALL_FLOW, AppConstants.VIEW_ALL_NOTES_FLOW)\n        startActivityForResult(intent, VIEW_ALL_REQUEST_CODE)\n }\n\n\noverride fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\n    super.onActivityResult(requestCode, resultCode, data)\n    if (resultCode == Activity.RESULT_OK){\n        if (requestCode == VIEW_ALL_REQUEST_CODE){\n            if (data!!.getParcelableArrayListExtra&lt;ListNote&gt;(AppConstants.NOTES_LIST)!=null){\n                mViewModel.mNotesReminders.listNote = data.getParcelableArrayListExtra(AppConstants.NOTES_LIST)\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Code (Java):</p>\n\n<pre><code> @Override\n public void onBackPressed() {\n        Intent result = new Intent();\n        result.putParcelableArrayListExtra(AppConstants.NOTES_LIST, mNotesList);\n        setResult(Activity.RESULT_OK, result);\n        this.finish();\n }\n</code></pre>\n\n<p>logcat</p>\n\n<pre><code>09-19 23:13:18.343 1552-1843/? I/ActivityManager: START u0 {cmp=com.raj.ifa.debug/com.raj.ifa.ui.viewAllNotesAndReminder.ViewAllNotesActivity (has extras)} from uid 10081 on display 0\n09-19 23:13:18.383 28407-28407/com.raj.ifa.debug I/AppCompatViewInflater: app:theme is now deprecated. Please move to using android:theme instead.\n09-19 23:13:18.607 28407-28412/com.raj.ifa.debug I/art: Do partial code cache collection, code=124KB, data=100KB\n09-19 23:13:18.619 28407-28412/com.raj.ifa.debug I/art: After code cache collection, code=123KB, data=100KB\n09-19 23:13:18.619 28407-28412/com.raj.ifa.debug I/art: Increasing code cache capacity to 512KB\n09-19 23:13:18.792 28407-28428/com.raj.ifa.debug D/EGL_emulation: eglMakeCurrent: 0xa89852a0: ver 2 0 (tinfo 0xa8983630)\n09-19 23:13:18.823 28407-28428/com.raj.ifa.debug D/EGL_emulation: eglMakeCurrent: 0xa89852a0: ver 2 0 (tinfo 0xa8983630)\n09-19 23:13:18.858 1552-1572/? I/ActivityManager: Displayed com.raj.ifa.debug/com.raj.ifa.ui.viewAllNotesAndReminder.ViewAllNotesActivity: +500ms\n09-19 23:13:18.863 28407-28428/com.raj.ifa.debug D/EGL_emulation: eglMakeCurrent: 0xa89852a0: ver 2 0 (tinfo 0xa8983630)\n09-19 23:13:18.880 28407-28428/com.raj.ifa.debug D/EGL_emulation: eglMakeCurrent: 0xa89852a0: ver 2 0 (tinfo 0xa8983630)\n09-19 23:13:18.925 28407-28407/com.raj.ifa.debug W/IInputConnectionWrapper: finishComposingText on inactive InputConnection\n09-19 23:13:18.950 28407-28428/com.raj.ifa.debug D/EGL_emulation: eglMakeCurrent: 0xa89852a0: ver 2 0 (tinfo 0xa8983630)\n09-19 23:13:18.953 28407-28428/com.raj.ifa.debug D/OpenGLRenderer: endAllActiveAnimators on 0x8e89d080 (RippleDrawable) with handle 0x8e85d6c0\n09-19 23:13:19.240 1552-22693/? I/WindowManager: Destroying surface Surface(name=com.raj.ifa.debug/com.raj.ifa.ui.userDetails.UserDetailsActivity) called by com.android.server.wm.WindowStateAnimator.destroySurface:2014 com.android.server.wm.WindowStateAnimator.destroySurfaceLocked:881 com.android.server.wm.WindowState.destroyOrSaveSurface:2073 com.android.server.wm.WindowManagerService.tryStartExitingAnimation:3017 com.android.server.wm.WindowManagerService.relayoutWindow:2897 com.android.server.wm.Session.relayout:215 android.view.IWindowSession$Stub.onTransact:286 com.android.server.wm.Session.onTransact:136 \n09-19 23:13:21.707 28407-28428/com.raj.ifa.debug D/EGL_emulation: eglMakeCurrent: 0xa89852a0: ver 2 0 (tinfo 0xa8983630)\n09-19 23:13:21.767 28407-28428/com.raj.ifa.debug D/EGL_emulation: eglMakeCurrent: 0xa89852a0: ver 2 0 (tinfo 0xa8983630)\n09-19 23:13:21.800 28407-28428/com.raj.ifa.debug D/EGL_emulation: eglMakeCurrent: 0xa89852a0: ver 2 0 (tinfo 0xa8983630)\n09-19 23:13:21.831 28407-28428/com.raj.ifa.debug D/EGL_emulation: eglMakeCurrent: 0xa89852a0: ver 2 0 (tinfo 0xa8983630)\n09-19 23:13:21.834 28407-28428/com.raj.ifa.debug D/OpenGLRenderer: endAllActiveAnimators on 0x8ce94e80 (RippleDrawable) with handle 0x8e85d270\n09-19 23:13:22.084 1552-14164/? I/WindowManager: Destroying surface Surface(name=com.raj.ifa.debug/com.raj.ifa.ui.viewAllNotesAndReminder.ViewAllNotesActivity) called by com.android.server.wm.WindowStateAnimator.destroySurface:2014 com.android.server.wm.WindowStateAnimator.destroySurfaceLocked:881 com.android.server.wm.WindowState.removeLocked:1449 com.android.server.wm.WindowManagerService.removeWindowInnerLocked:2478 com.android.server.wm.WindowManagerService.removeWindowLocked:2436 com.android.server.wm.WindowManagerService.removeWindowLocked:2305 com.android.server.wm.WindowManagerService.removeWindow:2300 com.android.server.wm.Session.remove:193 \n09-19 23:13:22.261 28407-28428/com.raj.ifa.debug D/EGL_emulation: eglMakeCurrent: 0xa89852a0: ver 2 0 (tinfo 0xa8983630)\n</code></pre>\n\n<p>Can anyone tell me what is wrong with my above code?</p>\n"}, {"tags": ["android", "kotlin", "android-room"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6490462"}, "edited": false, "score": 0, "creation_date": 1505841818, "post_id": 46306147, "comment_id": 79574714, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/44065371/android-room-persistences-library-and-kotlin\">Android Room Persistences library and Kotlin</a>"}, {"owner": {"reputation": 1646, "user_id": 3563511, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9yKT7.jpg?s=128&g=1", "display_name": "thealeksandr", "link": "https://stackoverflow.com/users/3563511/thealeksandr"}, "edited": false, "score": 0, "creation_date": 1505842247, "post_id": 46306147, "comment_id": 79574939, "body": "@Ibrahim similar but different. In my case I have problems only with JellyBean. 4.4 and above are working correctly and app configured according google documentation."}], "owner": {"reputation": 1646, "user_id": 3563511, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9yKT7.jpg?s=128&g=1", "display_name": "thealeksandr", "link": "https://stackoverflow.com/users/3563511/thealeksandr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 192, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1505842069, "creation_date": 1505840861, "last_edit_date": 1505842069, "question_id": 46306147, "link": "https://stackoverflow.com/questions/46306147/room-kotlin-problems-only-with-jellybean", "title": "Room, Kotlin problems only with JellyBean", "body": "<p>I have application in Kotlin where I am using Room library. Application works fine with Android 4.4 and above. But have this issue with android JellyBean (tested 4.1 and 4.2):</p>\n\n<pre><code>Caused by: java.lang.RuntimeException: cannot find implementation for com.app.example.database.AppDatabase. AppDatabase_Impl does not exist\n                                                                  at android.arch.persistence.room.Room.getGeneratedImplementation(Room.java:90)\n                                                                  at android.arch.persistence.room.RoomDatabase$Builder.build(RoomDatabase.java:440)\n                                                                  at com.app.example.application.MyApplication.onCreate(MyApplication.kt:36)\n                                                                  at android.app.Instrumentation.callApplicationOnCreate(Instrumentation.java:999)\n</code></pre>\n\n<p>I tried using</p>\n\n<pre><code>kapt {\n    generateStubs = true\n}\n</code></pre>\n\n<p>and </p>\n\n<pre><code>apply plugin: 'kotlin-kapt'\n</code></pre>\n\n<p>No difference. Same error.</p>\n"}, {"tags": ["java", "generics", "inheritance", "kotlin"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1505839147, "post_id": 46305481, "comment_id": 79573477, "body": "<code>A</code> says that users can map anything. But if the implementation is <code>B</code>, they can only map animals. That raises red flags."}, {"owner": {"reputation": 2169, "user_id": 4564505, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qRYlQ.jpg?s=128&g=1", "display_name": "pavlos163", "link": "https://stackoverflow.com/users/4564505/pavlos163"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1505839349, "post_id": 46305481, "comment_id": 79573569, "body": "Thanks for your comment. Okay, so is there a way to provide what the users can map in the children classes?"}], "answers": [{"comments": [{"owner": {"reputation": 2169, "user_id": 4564505, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qRYlQ.jpg?s=128&g=1", "display_name": "pavlos163", "link": "https://stackoverflow.com/users/4564505/pavlos163"}, "edited": false, "score": 0, "creation_date": 1505841800, "post_id": 46305885, "comment_id": 79574708, "body": "I see. Is that true even if in <code>Mapper&lt;A&gt;</code> and <code>Mapper&lt;B&gt;</code>, <code>A</code> is a subtype of <code>B</code>? Is the relationship between <code>A</code> and <code>B</code> irrelevant?"}, {"owner": {"reputation": 2169, "user_id": 4564505, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qRYlQ.jpg?s=128&g=1", "display_name": "pavlos163", "link": "https://stackoverflow.com/users/4564505/pavlos163"}, "edited": false, "score": 0, "creation_date": 1505841857, "post_id": 46305885, "comment_id": 79574739, "body": "As a side note, it would be really cleaner for me to be able to call <code>toEntity</code> from the parent. What other design could I follow that would allow that? What about passing a <code>Mapper</code> as a parameter?"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 2169, "user_id": 4564505, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qRYlQ.jpg?s=128&g=1", "display_name": "pavlos163", "link": "https://stackoverflow.com/users/4564505/pavlos163"}, "edited": false, "score": 0, "creation_date": 1505842198, "post_id": 46305885, "comment_id": 79574917, "body": "@pk1914 Yes, if <code>Mapper&lt;T&gt;</code> is invariant, <code>Mapper&lt;A&gt;</code> and <code>Mapper&lt;B&gt;</code> are never subtypes of each other if <code>A</code> and <code>B</code> are different, including even <code>A</code> and <code>B</code> that are subtypes of each other."}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 2169, "user_id": 4564505, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qRYlQ.jpg?s=128&g=1", "display_name": "pavlos163", "link": "https://stackoverflow.com/users/4564505/pavlos163"}, "edited": false, "score": 0, "creation_date": 1505842457, "post_id": 46305885, "comment_id": 79575054, "body": "@pk1914, I&#39;ve added a pattern that can be used to improve the usability of such hierarchy. However, it&#39;s hard to tell whether it&#39;s useful for you without knowing the actual use cases."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 7, "last_activity_date": 1505842385, "last_edit_date": 1592644375, "creation_date": 1505839963, "answer_id": 46305885, "question_id": 46305481, "link": "https://stackoverflow.com/questions/46305481/kotlin-inheritance-with-generics/46305885#46305885", "title": "Kotlin inheritance with generics", "body": "<p>Note the two facts about inheritance and generics:</p>\n<ul>\n<li><p>A <code>val</code> property can only be overridden with a subtype of the original property type. That's because all the users of the type expect it to return some instance of the original type. For example, it's okay to override a <code>CharSequence</code> property with <code>String</code>.</p>\n<p><sup>A <code>var</code> property cannot even use a subtype, only the original type, because the users may want to assign an instance of the original type into the property.</sup></p>\n</li>\n<li><p>Kotlin generics <a href=\"https://kotlinlang.org/docs/reference/generics.html#variance\" rel=\"noreferrer\">are invariant by default</a>. Given <code>Mapper&lt;T&gt;</code>, any two of its instantiations <code>Mapper&lt;A&gt;</code> and <code>Mapper&lt;B&gt;</code> are not subtypes of each other if <code>A</code> and <code>B</code> are different.</p>\n</li>\n</ul>\n<p>Given this, you cannot override a property of type <code>Mapper&lt;Any&gt;</code> with <code>Mapper&lt;SomeType&gt;</code>, because the latter is not a subtype of the former.</p>\n<p>You cannot use <a href=\"https://kotlinlang.org/docs/reference/generics.html#declaration-site-variance\" rel=\"noreferrer\">declaration-site variance</a> to make all <code>Mapper&lt;T&gt;</code> usages covariant (declare the interface as <code>interface Mapper&lt;out T&gt;</code>) because of <code>T</code> used as the type of a parameter in <code>fun toEntity(entry: T): Entity</code>.</p>\n<p>You can try to apply <a href=\"https://kotlinlang.org/docs/reference/generics.html#use-site-variance-type-projections\" rel=\"noreferrer\">use-site variance</a>, declaring the property as</p>\n<pre><code>abstract val mapper: Mapper&lt;out Any&gt;\n</code></pre>\n<p>But this way the users of the class <code>A</code> won't be able to call <code>fun toEntity(entry: T): Entity</code>, since they will not know what is the actual type that replaces <code>Any</code> in the child class and thus what they can safely pass as <code>entry</code>. However, if the exact type (e.g. <code>B</code>) is known to the user, they will see the type of <code>mapper</code> as it is declared in the overridden property.</p>\n<hr>\n<p>A common pattern that can allow you to use the overridden property in a more flexible way is to parameterize the parent class <code>class A&lt;T&gt;</code> and define the property as <code>val mapper: Mapper&lt;T&gt;</code>.</p>\n<p>This way, the subtypes will have to specify which <code>T</code> they use in their declaration: <code>class B(...) : A&lt;Animal&gt;(...)</code>, and the users that see <code>A&lt;Animal&gt;</code> (even without knowing it's actually <code>B&lt;Animal&gt;</code> will safely get its <code>mapper</code> as <code>Mapper&lt;Animal&gt;</code>.</p>\n"}], "owner": {"reputation": 2169, "user_id": 4564505, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qRYlQ.jpg?s=128&g=1", "display_name": "pavlos163", "link": "https://stackoverflow.com/users/4564505/pavlos163"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2856, "favorite_count": 1, "accepted_answer_id": 46305885, "answer_count": 1, "score": 2, "last_activity_date": 1505842385, "creation_date": 1505838487, "question_id": 46305481, "link": "https://stackoverflow.com/questions/46305481/kotlin-inheritance-with-generics", "title": "Kotlin inheritance with generics", "body": "<p>I have an abstract class, let's call it A.</p>\n\n<pre><code>abstract class A(private val name: String) {\n\n    fun read(key: String): Entity {\n        ...\n    }\n\n    fun write(entity: Entity) {\n        ...\n    }\n\n    abstract val mapper: Mapper&lt;Any&gt;\n\n    ...\n\n    interface Mapper&lt;T&gt; {\n        fun toEntity(entry: T): Entity\n\n        fun fromEntity(entity: Entity): T\n    }\n\n    ...\n</code></pre>\n\n<p>It has an abstract mapper. The point of that is that I can map different objects to Entity and use <code>read</code> and <code>write</code>.</p>\n\n<p>My child class, let's call it B, is structured like this:</p>\n\n<pre><code>class B(private val name: String) : A(name) {\n    override val mapper = AnimalMapper\n\n    object AnimalMapper: Mapper&lt;Animal&gt; {\n        override fun fromEntity(entity: Entity): Animal {\n            TODO(\"not implemented\")\n        }\n\n        override fun toEntity(animal: Animal): Entity {\n            TODO(\"not implemented\")\n        }\n    }\n}\n</code></pre>\n\n<p>Ideally, I wanted to have an interface in the <code>Mapper</code> generic and not <code>Any</code>, but I'm simplifying this just for the question.</p>\n\n<p>The issue is that I get this error:</p>\n\n<p><code>Type of 'mapper' is not a subtype of the overridden property 'public abstract val mapper: Mapper&lt;Any&gt; defined in ...</code></p>\n\n<p>Why is that?</p>\n"}, {"tags": ["android", "listview", "android-recyclerview", "kotlin"], "comments": [{"owner": {"reputation": 4656, "user_id": 7138492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8KSN4.png?s=128&g=1", "display_name": "Sergei Emelianov", "link": "https://stackoverflow.com/users/7138492/sergei-emelianov"}, "edited": false, "score": 0, "creation_date": 1505837184, "post_id": 46304968, "comment_id": 79572407, "body": "Why not use OnItemClickListener instead of OnClickListener?"}, {"owner": {"reputation": 976, "user_id": 6884584, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1120792461340487/picture?type=large", "display_name": "Alex Ioja-Yang", "link": "https://stackoverflow.com/users/6884584/alex-ioja-yang"}, "reply_to_user": {"reputation": 4656, "user_id": 7138492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8KSN4.png?s=128&g=1", "display_name": "Sergei Emelianov", "link": "https://stackoverflow.com/users/7138492/sergei-emelianov"}, "edited": false, "score": 0, "creation_date": 1505837954, "post_id": 46304968, "comment_id": 79572834, "body": "Could you please check my updated question? I am not that familiar with Android so it might as well be something obvious that I&#39;m missing."}, {"owner": {"reputation": 4656, "user_id": 7138492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8KSN4.png?s=128&g=1", "display_name": "Sergei Emelianov", "link": "https://stackoverflow.com/users/7138492/sergei-emelianov"}, "edited": false, "score": 0, "creation_date": 1505841502, "post_id": 46304968, "comment_id": 79574541, "body": "I&#39;m sorry, the OnItemClickListener actually doesn&#39;t work so well with RecycleView. I&#39;ve written you an answer on how I&#39;d solve the NullPointerException problem."}], "answers": [{"comments": [{"owner": {"reputation": 976, "user_id": 6884584, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1120792461340487/picture?type=large", "display_name": "Alex Ioja-Yang", "link": "https://stackoverflow.com/users/6884584/alex-ioja-yang"}, "edited": false, "score": 0, "creation_date": 1505841551, "post_id": 46306298, "comment_id": 79574571, "body": "That&#39;s what I did to get the error in the first place"}, {"owner": {"reputation": 976, "user_id": 6884584, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1120792461340487/picture?type=large", "display_name": "Alex Ioja-Yang", "link": "https://stackoverflow.com/users/6884584/alex-ioja-yang"}, "edited": false, "score": 0, "creation_date": 1505841681, "post_id": 46306298, "comment_id": 79574650, "body": "Thank you, will update tomorrow when I&#39;ll get back to the machine"}, {"owner": {"reputation": 976, "user_id": 6884584, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1120792461340487/picture?type=large", "display_name": "Alex Ioja-Yang", "link": "https://stackoverflow.com/users/6884584/alex-ioja-yang"}, "edited": false, "score": 0, "creation_date": 1505895732, "post_id": 46306298, "comment_id": 79595038, "body": "I have updated my question with code. Please note it&#39;s Kotlin, not Java, but syntax it&#39;s so similar I&#39;m sure that won&#39;t be a problem :)"}, {"owner": {"reputation": 4656, "user_id": 7138492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8KSN4.png?s=128&g=1", "display_name": "Sergei Emelianov", "link": "https://stackoverflow.com/users/7138492/sergei-emelianov"}, "reply_to_user": {"reputation": 976, "user_id": 6884584, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1120792461340487/picture?type=large", "display_name": "Alex Ioja-Yang", "link": "https://stackoverflow.com/users/6884584/alex-ioja-yang"}, "edited": false, "score": 0, "creation_date": 1505920794, "post_id": 46306298, "comment_id": 79612512, "body": "Alright, I&#39;ve added 2nd answer, since I thought that 1st answer could be useful for someone else.. I hope is solves your problem."}, {"owner": {"reputation": 438, "user_id": 7011829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WB2Q6.jpg?s=128&g=1", "display_name": "Vikash Sharma", "link": "https://stackoverflow.com/users/7011829/vikash-sharma"}, "edited": false, "score": 1, "creation_date": 1578668545, "post_id": 46306298, "comment_id": 105525214, "body": "I don&#39;t know why but this work. Thanks @SerjArdovic"}], "tags": [], "owner": {"reputation": 4656, "user_id": 7138492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8KSN4.png?s=128&g=1", "display_name": "Sergei Emelianov", "link": "https://stackoverflow.com/users/7138492/sergei-emelianov"}, "is_accepted": false, "score": 2, "last_activity_date": 1505841560, "last_edit_date": 1505841560, "creation_date": 1505841406, "answer_id": 46306298, "question_id": 46304968, "link": "https://stackoverflow.com/questions/46304968/refresh-activity-when-click-in-recyclerview/46306298#46306298", "title": "Refresh Activity when click in RecyclerView", "body": "<p>For your Adapter class you'll be having a ViewHolder class (probably as an inner class) which implements the OnClickListener as such in this code:</p>\n\n<pre><code>class ViewHolder extends RecyclerView.ViewHolder implements OnClickListener {\n\n    TextView textView;\n    ImageView imageView;\n\n    ViewHolder(View itemView) {\n        super(itemView);\n        textView = (TextView) itemView.findViewById(R.id.text_view);\n        imageView = (ImageView) itemView.findViewById(R.id.image_view);\n    }\n\n    @Override\n    void onClick(View v) {\n\n    }\n}\n</code></pre>\n\n<p>Assuming your Adapter is not an inner class of your Activity class, if you are willing with onClick() to access your Activity class' methods/variables you MUST have the reference.</p>\n\n<p>The preferable way is to pass the Context reference via the constructor of your Adapter, given your ViewHolder is an inner class of your Adapter:</p>\n\n<pre><code>class MyAdapter extends extends RecyclerView.Adapter&lt;RecyclerView.ViewHolder&gt; {\n\n    Context context;\n\n    MyAdapter(Context context) {\n        this.context = context;\n    }\n\n    class ViewHolder extends RecyclerView.ViewHolder implements OnClickListener {\n\n        TextView textView;\n        ImageView imageView;\n\n        ViewHolder(View itemView) {\n            super(itemView);\n            textView = (TextView) itemView.findViewById(R.id.text_view);\n            imageView = (ImageView) itemView.findViewById(R.id.image_view);\n        }\n\n        @Override\n        void onClick(View v) {\n            // Here we gain access to non-private methods/variables \n            // of the Activity, which Context reference we are holding.\n            ((MyActivity) context).someMethod();\n        }\n    }\n}\n</code></pre>\n\n<p>Hope, this helps.</p>\n"}, {"tags": [], "owner": {"reputation": 4656, "user_id": 7138492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8KSN4.png?s=128&g=1", "display_name": "Sergei Emelianov", "link": "https://stackoverflow.com/users/7138492/sergei-emelianov"}, "is_accepted": true, "score": 1, "last_activity_date": 1505920718, "creation_date": 1505920718, "answer_id": 46325927, "question_id": 46304968, "link": "https://stackoverflow.com/questions/46304968/refresh-activity-when-click-in-recyclerview/46325927#46325927", "title": "Refresh Activity when click in RecyclerView", "body": "<p>Alright, here is another solution you can try: </p>\n\n<p>Add this interface to your app:</p>\n\n<pre><code>interface ClickListener {\n    void onItemClicked(int position);\n}\n</code></pre>\n\n<p>Implement it inside your MainActivity (or whatever activity you have the buttons on). </p>\n\n<p>Pass the reference of the interface inside your Adapter constructor:\n    ArrayList mList;\n    ClickListener listener;</p>\n\n<pre><code>public MyAdapter(ArrayList&lt;NewsFeed&gt; mList, ClickListener listener) {\n    this.listener = listener;\n}\n\n@Override\npublic MyAdapter.NavViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n    View v = LayoutInflater.from(parent.getContext()).inflate(R.layout.someL, parent, false);\n    return new ViewHolder(v, listener);\n\n}\n\npublic void getItemClicked(int position){\n    mList.get(position);\n}\n</code></pre>\n\n<p>Finally, inside you ViewHolder class:</p>\n\n<pre><code>class ViewHolder extends RecyclerView.ViewHolder implements OnClickListener {\n\n    TextView textView;\n    ImageView imageView;\n    ClickListener listener;\n\n    ViewHolder(View itemView, ClickListener listener) {\n        super(itemView);\n        this.listener = listener;\n        textView = (TextView) itemView.findViewById(R.id.text_view);\n        imageView = (ImageView) itemView.findViewById(R.id.image_view);\n        textView.setOnClickListener(this)\n    }\n\n    @Override\n    void onClick(View v) {\n      listener.onItemClicked(getAdapterPosition());\n    }\n</code></pre>\n\n<p>And finally inside your Activity (which implements ClickListener interface) you'll have to override void <code>onItemClicked(int position);</code> inside which you'll have your action.</p>\n\n<p>P.S.: This answer was written with major help from user: <a href=\"https://stackoverflow.com/users/2667883/chaynik\">https://stackoverflow.com/users/2667883/chaynik</a></p>\n"}, {"tags": [], "owner": {"reputation": 9, "user_id": 9578635, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DagdX52i2C4/AAAAAAAAAAI/AAAAAAAAAEE/aK6VpDrnick/photo.jpg?sz=128", "display_name": "Rajan Garg", "link": "https://stackoverflow.com/users/9578635/rajan-garg"}, "is_accepted": false, "score": 0, "last_activity_date": 1534431436, "last_edit_date": 1534431436, "creation_date": 1534416631, "answer_id": 51875274, "question_id": 46304968, "link": "https://stackoverflow.com/questions/46304968/refresh-activity-when-click-in-recyclerview/51875274#51875274", "title": "Refresh Activity when click in RecyclerView", "body": "<ol>\n<li>make a function reload() and reload the all views</li>\n<li>pass your activity context using .this to adapter</li>\n<li><p>in adapter, pass the context to the class object like</p>\n\n<pre><code>MyActivity activity = (MyActivity)context\n</code></pre></li>\n</ol>\n\n<p>and call the method like:</p>\n\n<pre><code>activity.reload();\n</code></pre>\n"}], "owner": {"reputation": 976, "user_id": 6884584, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1120792461340487/picture?type=large", "display_name": "Alex Ioja-Yang", "link": "https://stackoverflow.com/users/6884584/alex-ioja-yang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3925, "favorite_count": 0, "accepted_answer_id": 46325927, "answer_count": 3, "score": 1, "last_activity_date": 1534431436, "creation_date": 1505836803, "last_edit_date": 1505895893, "question_id": 46304968, "link": "https://stackoverflow.com/questions/46304968/refresh-activity-when-click-in-recyclerview", "title": "Refresh Activity when click in RecyclerView", "body": "<p>I have an activity made of 2 main items: a RecyclerView and a ListView. The RecyclerView acts as a filter and selecting/unselecting items in it will affect the contents of the ListView. Everything works well until I tried to implement the onClickListener on the RecyclerView and realised that's not an option. </p>\n\n<p>I have tried going down the route of setting an OnClickListener inside the ViewHolder, but it needs to call a function inside the main activity and refresh it's listView. Any such interaction triggers the following error:</p>\n\n<pre><code>java.lang.NullPointerException\n    at android.support.v7.app.AppCompatDelegateImplBase.&lt;init&gt;(AppCompatDelegateImplBase.java:117)\n    at android.support.v7.app.AppCompatDelegateImplV9.&lt;init&gt;(AppCompatDelegateImplV9.java:149)\n    at android.support.v7.app.AppCompatDelegateImplV11.&lt;init&gt;(AppCompatDelegateImplV11.java:29)\n    at android.support.v7.app.AppCompatDelegateImplV14.&lt;init&gt;(AppCompatDelegateImplV14.java:54)\n    at android.support.v7.app.AppCompatDelegate.create(AppCompatDelegate.java:202)\n    at android.support.v7.app.AppCompatDelegate.create(AppCompatDelegate.java:183)\n    at android.support.v7.app.AppCompatActivity.getDelegate(AppCompatActivity.java:519)\n    at android.support.v7.app.AppCompatActivity.findViewById(AppCompatActivity.java:190)\n    at .newsScreen._$_findCachedViewById(newsScreen.kt)\n    at .newsScreen.filterNews(newsScreen.kt:71)\n    at Cells.NewsFeedList$NewsSource$1.onClick(News Lists.kt:84)\n</code></pre>\n\n<p>Suppose it makes sense since I am trying to access UI from outside it's class, but I could not find alternatives to it. </p>\n\n<p><strong>RecyclerView Adapter:</strong></p>\n\n<pre><code>class NewsFeedList() : RecyclerView.Adapter&lt;NewsFeedList.NewsSource&gt;() {\n    private var source: List&lt;NewsFeed&gt; = ArrayList()\n\n    constructor(s: ArrayList&lt;NewsFeed&gt;) : this() {\n        source = s\n    }\n\n    class NewsSource : RecyclerView.ViewHolder {\n\n        private var mTextView: TextView? = null\n\n        constructor(v: View): super(v) {\n            mTextView = v.title\n        }\n\n        fun bindInfo(news: NewsFeed, view: View, int: Int) {\n            mTextView!!.text = news.title\n            view.tag = int\n            view.setOnClickListener { newsScreen().filterNews(view.tag.toString().toInt()) }\n            if (news.selected) view.background = ColorDrawable(Color.parseColor(news.color))\n            else view.background = ColorDrawable(Color.parseColor(design.backgroundColor))\n        }\n    }\n\n    override fun onCreateViewHolder(parent: ViewGroup?, viewType: Int): NewsFeedList.NewsSource {\n        val view = LayoutInflater.from(parent!!.context).inflate(R.layout.newsfeed_list, parent, false)\n        return NewsSource(view)\n    }\n\n    override fun onBindViewHolder(holder: NewsFeedList.NewsSource, position: Int) {\n        holder.bindInfo(source[position], holder.itemView, position)\n    }\n\n    override fun getItemCount(): Int {\n        return source.count()\n    }\n\n}\n</code></pre>\n\n<p>Then, inside my newsScreen class I need to access the RecyclerView adapter with new data </p>\n\n<pre><code>fun filterNews(i: Int) {\n\n    newsFeed[i].selected = !newsFeed[i].selected\n    filter.adapter = NewsFeedList(newsFeed)\n\n}\n</code></pre>\n\n<p>If I remove any references to filter (RecyclerView), everything is fine, but the purpose of the onClickListener is to refresh the Activities content.</p>\n\n<p>Is there any way to achieve this or should I change the RecyclerView to a different UI element?</p>\n\n<p><strong>Edit:</strong>\nI have tried adding an OnClickListener to the RecyclerView but it does not seem to get triggered. <strong>Code:</strong></p>\n\n<pre><code>filter.adapter = NewsFeedList(newsFeed)\nfilter.layoutManager = LinearLayoutManager(this@newsScreen, LinearLayoutManager.HORIZONTAL, false)\nfilter.setOnClickListener { v: View? -&gt;\n       filterNews(v!!.tag.toString().toInt())\n}\n</code></pre>\n"}, {"tags": ["error-handling", "kotlin", "rx-java2"], "answers": [{"comments": [{"owner": {"reputation": 19894, "user_id": 753632, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e1eaa448ca773169f1296987a87cb67?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidDev", "link": "https://stackoverflow.com/users/753632/androiddev"}, "edited": false, "score": 0, "creation_date": 1563278998, "post_id": 46305507, "comment_id": 100639475, "body": "This isn&#39;t very useful for those cases where each observable really needs to handle their own errors separately."}], "tags": [], "owner": {"reputation": 19872, "user_id": 804967, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/JVZu9.jpg?s=128&g=1", "display_name": "fweigl", "link": "https://stackoverflow.com/users/804967/fweigl"}, "is_accepted": true, "score": 1, "last_activity_date": 1505840125, "last_edit_date": 1505840125, "creation_date": 1505838575, "answer_id": 46305507, "question_id": 46303087, "link": "https://stackoverflow.com/questions/46303087/rx2-0-nested-subscription-error-handling/46305507#46305507", "title": "RX2.0 nested subscription error handling", "body": "<p>In your case, you'd need to handle <code>onError</code> for every <code>subscription</code>: </p>\n\n<pre><code>    observable1Thing().subscribe({ obs1Result -&gt; \n\n        observable2Thing().subscribe({ obs2Result -&gt; \n\n        }, { obs2Error -&gt; \n\n        })\n\n\n    }, { obs1error -&gt; \n\n    })\n</code></pre>\n\n<p>If you'd combine the <code>observables</code> with an operator like <code>flatMap</code>, you'd only need one <code>subcription</code> and thus handle only one <code>onError</code> case. \nWhich operator you would use depends on how you want to combine the <code>observables</code>. </p>\n\n<p>Example: </p>\n\n<pre><code>    obs1().flatMap { obs2() }.subscribe({\n\n    }, { error -&gt;\n\n    })\n</code></pre>\n"}], "owner": {"reputation": 2771, "user_id": 5963279, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/10207102799463401/picture?type=large", "display_name": "Thomas Cook", "link": "https://stackoverflow.com/users/5963279/thomas-cook"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 0, "accepted_answer_id": 46305507, "answer_count": 1, "score": 1, "last_activity_date": 1505840125, "creation_date": 1505831318, "question_id": 46303087, "link": "https://stackoverflow.com/questions/46303087/rx2-0-nested-subscription-error-handling", "title": "RX2.0 nested subscription error handling", "body": "<p>I'm trying to figure out how exceptions are caught by RX streams. In particular, if I have a subscription within a subscription and the inner subscription receives an exception from it's observable, do I need to handle that in onError for inner subscription or can I handle it in onError of parent subscription? </p>\n\n<pre><code>observableThing1.subscribe({ _ -&gt;\n    observableThing2.subscribe({ _ -&gt;\n        // Something horrible happens here an an exception is throw by observableThing2\n    })\n}, { error -&gt; \n    // Expecting I can handle all errors at the top most subscription\n})\n</code></pre>\n"}, {"tags": ["android", "android-layout", "canvas", "kotlin"], "comments": [{"owner": {"reputation": 7021, "user_id": 4620609, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dR89W.jpg?s=128&g=1", "display_name": "Samuel Robert", "link": "https://stackoverflow.com/users/4620609/samuel-robert"}, "edited": false, "score": 0, "creation_date": 1505825168, "post_id": 46300700, "comment_id": 79563923, "body": "Have you tried <code>View#invalidate</code>?"}, {"owner": {"reputation": 598, "user_id": 4039605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4afeedb783b16902502d08d5343def13?s=128&d=identicon&r=PG&f=1", "display_name": "JoboFive", "link": "https://stackoverflow.com/users/4039605/jobofive"}, "reply_to_user": {"reputation": 7021, "user_id": 4620609, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dR89W.jpg?s=128&g=1", "display_name": "Samuel Robert", "link": "https://stackoverflow.com/users/4620609/samuel-robert"}, "edited": false, "score": 0, "creation_date": 1505891842, "post_id": 46300700, "comment_id": 79592602, "body": "View#invalidate is not working for me. Thanks for your comment. Anyway, I have fixed this issue with a little change. if (myView.mBitmap != null) {                         myView.mBitmap.eraseColor(Color.TRANSPARENT);                         myView.mPath.reset();                         //myView.invalidate();                     }"}], "owner": {"reputation": 598, "user_id": 4039605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4afeedb783b16902502d08d5343def13?s=128&d=identicon&r=PG&f=1", "display_name": "JoboFive", "link": "https://stackoverflow.com/users/4039605/jobofive"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 194, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1505824811, "creation_date": 1505824811, "question_id": 46300700, "link": "https://stackoverflow.com/questions/46300700/how-to-reset-framelayout-or-delete-layout-cache", "title": "How to reset FrameLayout or delete layout cache", "body": "<p>In one of my canvas signature application, I am adding canvas view inside FrameLayout. It is working fine for me. Whenever I try to reset it the rendered content on view is removed but the cache is not cleared. </p>\n\n<p>Please suggest me if anyone already did that... </p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 2341, "user_id": 3883569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c778021c6ac70c1fe99a0294b0ed664f?s=128&d=identicon&r=PG&f=1", "display_name": "FreshD", "link": "https://stackoverflow.com/users/3883569/freshd"}, "is_accepted": true, "score": 2, "last_activity_date": 1505819488, "creation_date": 1505819488, "answer_id": 46298944, "question_id": 46298370, "link": "https://stackoverflow.com/questions/46298370/python-vars-in-kotlin/46298944#46298944", "title": "Python vars() in Kotlin", "body": "<p>If you are using the Koltin data class you can just print the class</p>\n\n<pre><code> class Test(val one: String, val two: String, val three: String)\n\nfun main(args: Array&lt;String&gt;) {\n    val test = Test(\"Kotlin\", \"is\", \"fun\")\n    println(test)\n}\n</code></pre>\n\n<p>which will produce: <code>Test(one=Kotlin, two=is, three=fun)</code></p>\n\n<p>Kotlin data classes also provide a <code>componentN()</code> function. Look <a href=\"https://medium.com/@DarrenAtherton/intro-to-data-classes-in-kotlin-7f956d54365c\" rel=\"nofollow noreferrer\">here</a> for some informations about data classes in Kotlin</p>\n\n<p>For regular classes you can try the approach of <a href=\"https://stackoverflow.com/a/38688203\">this answer</a> </p>\n"}], "owner": {"reputation": 172, "user_id": 5555675, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a2047359528882fe93d16a31a519a6f3?s=128&d=identicon&r=PG&f=1", "display_name": "Usmiech", "link": "https://stackoverflow.com/users/5555675/usmiech"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 46298944, "answer_count": 1, "score": 0, "last_activity_date": 1505819488, "creation_date": 1505817737, "question_id": 46298370, "link": "https://stackoverflow.com/questions/46298370/python-vars-in-kotlin", "title": "Python vars() in Kotlin", "body": "<p>This python code </p>\n\n<pre><code>class Test:\n  def __init__(self):\n    self.one = \"python\"\n    self.two = \"is\"\n    self.three = \"fun!\"\nt=Test()\nprint(vars(t))\n</code></pre>\n\n<p>prints a collection of fields and their values:\n<code>{'one': 'python', 'two': 'is', 'three': 'fun!'}</code>\nHow can I do the same in Kotlin? </p>\n"}, {"tags": ["kotlin", "kotlin-dokka"], "comments": [{"owner": {"reputation": 14914, "user_id": 1217087, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4190f29b0630968bd964485175551851?s=128&d=identicon&r=PG", "display_name": "Adam S", "link": "https://stackoverflow.com/users/1217087/adam-s"}, "edited": false, "score": 0, "creation_date": 1505823677, "post_id": 46296886, "comment_id": 79562871, "body": "Interesting. This works fine, except for the IDE warning. If I add a <code>val</code> or <code>var</code> before <code>param</code> it goes away (and of course becomes a property) - and I don&#39;t get the warning if I document a method param in this way."}, {"owner": {"reputation": 1736, "user_id": 2825964, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/K8YjK.jpg?s=128&g=1", "display_name": "Markus Marvell", "link": "https://stackoverflow.com/users/2825964/markus-marvell"}, "reply_to_user": {"reputation": 14914, "user_id": 1217087, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4190f29b0630968bd964485175551851?s=128&d=identicon&r=PG", "display_name": "Adam S", "link": "https://stackoverflow.com/users/1217087/adam-s"}, "edited": false, "score": 0, "creation_date": 1505825387, "post_id": 46296886, "comment_id": 79564075, "body": "@AdamS That&#39;s how it&#39;s meant to work for properties and method params. I could add a <code>constructor</code> identifier before the primary constructor and treat it as a method. But I&#39;d like to avoid clutter."}], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 6, "last_activity_date": 1505827485, "creation_date": 1505827485, "answer_id": 46301695, "question_id": 46296886, "link": "https://stackoverflow.com/questions/46296886/how-to-document-a-primary-constructor-parameter-with-kotlin-dokka/46301695#46301695", "title": "How to document a primary constructor parameter with Kotlin Dokka", "body": "<p>Actually, dokka correctly finds the parameter if you reference it with <code>[param]</code> in the <code>@constructor</code> paragraph, you can check that by inspecting the URL that appears in the assembled docs, which looks like:</p>\n\n<pre><code>file:///.../some.package/-a/-init-.html#some.package.A$&lt;init&gt;(kotlin.Int)/param\n</code></pre>\n\n<p>Seemingly, the warning about an unresolved reference is an issue with the IDE support for KDoc. Please report it at <a href=\"http://kotl.in/issue\" rel=\"noreferrer\">kotl.in/issue</a>.</p>\n\n<p>Another option is to use <code>@param</code> in the class KDoc:</p>\n\n<pre><code>/** \n * Class A does something using [param]. \n * @param param means something special.\n*/\nclass A (param: Int)\n</code></pre>\n"}], "owner": {"reputation": 1736, "user_id": 2825964, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/K8YjK.jpg?s=128&g=1", "display_name": "Markus Marvell", "link": "https://stackoverflow.com/users/2825964/markus-marvell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1752, "favorite_count": 1, "accepted_answer_id": 46301695, "answer_count": 1, "score": 8, "last_activity_date": 1505827485, "creation_date": 1505813690, "question_id": 46296886, "link": "https://stackoverflow.com/questions/46296886/how-to-document-a-primary-constructor-parameter-with-kotlin-dokka", "title": "How to document a primary constructor parameter with Kotlin Dokka", "body": "<p>Let's say there's a class which primary constructor has the parameter <code>param</code> that I'd like to be resolved (linked to the actual parameter) within the doc block of the class. </p>\n\n<pre><code>/** Class A does something using [param]. \n@constructor constructs A with [param].\n*/\nclass A (param: Int)\n</code></pre>\n\n<p>However, the inscription <code>param</code> is highlighted by the IDE saying that it cannot resolve symbol <code>param</code>.</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 148364, "user_id": 501696, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/shkBF.png?s=128&g=1", "display_name": "Blackbelt", "link": "https://stackoverflow.com/users/501696/blackbelt"}, "is_accepted": true, "score": 3, "last_activity_date": 1505812497, "creation_date": 1505812497, "answer_id": 46296440, "question_id": 46296406, "link": "https://stackoverflow.com/questions/46296406/textcolor-is-changing-to-wrong-one/46296440#46296440", "title": "TextColor is changing to wrong one", "body": "<p>you are using the <code>resId</code> of the color, while <code>setTextColor</code> expects the <code>Color</code> . You should use Resources to convert the R.color to color the resource <code>represents</code> </p>\n"}, {"tags": [], "owner": {"reputation": 356, "user_id": 320676, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/52e57991898599311c526a33c5795c86?s=128&d=identicon&r=PG&f=1", "display_name": "user320676", "link": "https://stackoverflow.com/users/320676/user320676"}, "is_accepted": false, "score": 1, "last_activity_date": 1505812728, "creation_date": 1505812728, "answer_id": 46296503, "question_id": 46296406, "link": "https://stackoverflow.com/questions/46296406/textcolor-is-changing-to-wrong-one/46296503#46296503", "title": "TextColor is changing to wrong one", "body": "<p>Try below code-</p>\n\n<pre><code>ContextCompat.getColor(context, R.color.green)\n\nContextCompat.getColor(context, R.color.red)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 327, "user_id": 3182061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e18ab820224a9e42e6733e6f5dc3e524?s=128&d=identicon&r=PG&f=1", "display_name": "Whisky", "link": "https://stackoverflow.com/users/3182061/whisky"}, "is_accepted": false, "score": 0, "last_activity_date": 1505813115, "creation_date": 1505813115, "answer_id": 46296662, "question_id": 46296406, "link": "https://stackoverflow.com/questions/46296406/textcolor-is-changing-to-wrong-one/46296662#46296662", "title": "TextColor is changing to wrong one", "body": "<p>setTextColor expects \"int\" of Color which we can provide by <strong>R.color.\"<em>color code</em>\"</strong> rather than resId.</p>\n"}], "owner": {"reputation": 385, "user_id": 8352819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d123e9c386d3b9638cea80081e736035?s=128&d=identicon&r=PG&f=1", "display_name": "Kremik13", "link": "https://stackoverflow.com/users/8352819/kremik13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 46296440, "answer_count": 3, "score": 2, "last_activity_date": 1505813115, "creation_date": 1505812410, "question_id": 46296406, "link": "https://stackoverflow.com/questions/46296406/textcolor-is-changing-to-wrong-one", "title": "TextColor is changing to wrong one", "body": "<p>I'm just trying to change textcolor in my recyclerview using this code \u2193\u2193\u2193</p>\n\n<pre><code>itemView.resultTV.textColor = if (result &gt;= 0) R.color.green else R.color.red\n</code></pre>\n\n<p>But it changes the color to light purple, which is neither basic color nor green nor red. </p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["android", "unit-testing", "kotlin", "android-testing"], "comments": [{"owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 5, "creation_date": 1505809539, "post_id": 46295418, "comment_id": 79553325, "body": "No, Android&#39;s dex format does not support spaces in method names."}, {"owner": {"reputation": 2514, "user_id": 664955, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce57f967f833d1ac8a318ebda047e647?s=128&d=identicon&r=PG", "display_name": "sindrenm", "link": "https://stackoverflow.com/users/664955/sindrenm"}, "reply_to_user": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 0, "creation_date": 1515770359, "post_id": 46295418, "comment_id": 83440176, "body": "You should submit an answer so that this question can be closed, @nhaarman. :-)"}, {"owner": {"reputation": 22949, "user_id": 6998684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqR2Z.jpg?s=128&g=1", "display_name": "IgorGanapolsky", "link": "https://stackoverflow.com/users/6998684/igorganapolsky"}, "edited": false, "score": 0, "creation_date": 1525809243, "post_id": 46295418, "comment_id": 87500206, "body": "I am facing the same issue.  Is there a solution for this?"}, {"owner": {"reputation": 1537, "user_id": 599865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e41d5cecddf9cd0be97b1d3aae6a836?s=128&d=identicon&r=PG", "display_name": "Yoel Gluschnaider", "link": "https://stackoverflow.com/users/599865/yoel-gluschnaider"}, "reply_to_user": {"reputation": 22949, "user_id": 6998684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqR2Z.jpg?s=128&g=1", "display_name": "IgorGanapolsky", "link": "https://stackoverflow.com/users/6998684/igorganapolsky"}, "edited": false, "score": 1, "creation_date": 1572622097, "post_id": 46295418, "comment_id": 103626661, "body": "@IgorGanapolsky - this is still not supported. It is the Android runtime, no solution from the developer perspective. Sadly you need to have 2 different naming conventions - one for unit tests and one for Android tests or just not use backticks in all the tests to be consistent."}, {"owner": {"reputation": 22949, "user_id": 6998684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqR2Z.jpg?s=128&g=1", "display_name": "IgorGanapolsky", "link": "https://stackoverflow.com/users/6998684/igorganapolsky"}, "edited": false, "score": 0, "creation_date": 1572630485, "post_id": 46295418, "comment_id": 103630531, "body": "Luckily there&#39;s <b>AndroidX Test</b> now, which omits the need to have two separate test directories :)"}], "answers": [{"comments": [{"owner": {"reputation": 22949, "user_id": 6998684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqR2Z.jpg?s=128&g=1", "display_name": "IgorGanapolsky", "link": "https://stackoverflow.com/users/6998684/igorganapolsky"}, "edited": false, "score": 0, "creation_date": 1572630529, "post_id": 51620289, "comment_id": 103630555, "body": "Why does Swift support it?"}], "tags": [], "owner": {"reputation": 455, "user_id": 2213377, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9fMQ9.png?s=128&g=1", "display_name": "Matthew R.", "link": "https://stackoverflow.com/users/2213377/matthew-r"}, "is_accepted": false, "score": 14, "last_activity_date": 1533063513, "creation_date": 1533063513, "answer_id": 51620289, "question_id": 46295418, "link": "https://stackoverflow.com/questions/46295418/cannot-use-kotlin-backticked-method-names-in-androidtest-bad-descriptor-except/51620289#51620289", "title": "Cannot use Kotlin backticked method names in androidTest - bad descriptor exception", "body": "<p>As @nhaarman mentioned, Android does not support backticked function names. From the <a href=\"https://kotlinlang.org/docs/reference/coding-conventions.html\" rel=\"noreferrer\">Kotlin Coding Conventions</a>:</p>\n\n<blockquote>\n  <p>In tests (and only in tests), it's acceptable to use method names with spaces enclosed in backticks. <em>(Note that such method names are currently not supported by the Android runtime.)</em> Underscores in method names are also allowed in test code.</p>\n\n<pre><code>class MyTestCase {\n    @Test fun `ensure everything works`() { ... }\n    @Test fun ensureEverythingWorks_onAndroid() { ... }\n}\n</code></pre>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 2739, "user_id": 1885562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/yLWG7.jpg?s=128&g=1", "display_name": "rafakob", "link": "https://stackoverflow.com/users/1885562/rafakob"}, "edited": false, "score": 0, "creation_date": 1614087727, "post_id": 62597742, "comment_id": 117273010, "body": "It does work on 30+ but there are some tradeoffs. Android Studio 4.1.2 underlines as error those methods (it compiles fine). Also, it does not work when Orchestrator is enabled - it compiles but it hangs on instantiating tests. Nevertheless we&#39;re getting closer! :)"}, {"owner": {"reputation": 5596, "user_id": 7365866, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iNhGH.png?s=128&g=1", "display_name": "Ben Butterworth", "link": "https://stackoverflow.com/users/7365866/ben-butterworth"}, "edited": false, "score": 0, "creation_date": 1614791461, "post_id": 62597742, "comment_id": 117494780, "body": "To fix the underlined error, add <code>@file:Suppress(&quot;IllegalIdentifier&quot;)</code> to the top of the file."}], "tags": [], "owner": {"reputation": 6305, "user_id": 389649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fc842fef375d0c258c3762684d149d1?s=128&d=identicon&r=PG", "display_name": "Cristan", "link": "https://stackoverflow.com/users/389649/cristan"}, "is_accepted": true, "score": 9, "last_activity_date": 1593424530, "last_edit_date": 1593424530, "creation_date": 1593184357, "answer_id": 62597742, "question_id": 46295418, "link": "https://stackoverflow.com/questions/46295418/cannot-use-kotlin-backticked-method-names-in-androidtest-bad-descriptor-except/62597742#62597742", "title": "Cannot use Kotlin backticked method names in androidTest - bad descriptor exception", "body": "<p>Support for spaces in function names has been <a href=\"https://android.googlesource.com/platform/art/+/ab5f4c17a86b8c808dba862db566f0ffa1146367\" rel=\"noreferrer\">added</a> and is now available in API 30.</p>\n<p>To use it, set <code>buildToolsVersion</code>, <code>compileSdkVersion</code> and <code>targetSdkVersion</code> to 30+  and run your tests on an Android 30+ device. If you want to use this in anything else than tests, you'll have to set <code>minSdkVersion</code> to 30+ as well.</p>\n"}], "owner": {"reputation": 11131, "user_id": 1118475, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9f44a846a6337e4868ce0c8951fc246a?s=128&d=identicon&r=PG", "display_name": "Micha\u0142 Klimczak", "link": "https://stackoverflow.com/users/1118475/micha%c5%82-klimczak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1974, "favorite_count": 2, "accepted_answer_id": 62597742, "answer_count": 2, "score": 23, "last_activity_date": 1593424530, "creation_date": 1505809344, "question_id": 46295418, "link": "https://stackoverflow.com/questions/46295418/cannot-use-kotlin-backticked-method-names-in-androidtest-bad-descriptor-except", "title": "Cannot use Kotlin backticked method names in androidTest - bad descriptor exception", "body": "<p>In my unit tests I use Kotlin's backticked methods for better readability, e.g. </p>\n\n<pre><code>@Test fun `Foo should return bar`()\n</code></pre>\n\n<p>It works nice and well for tests in <code>&lt;module&gt;/src/test</code> directory, but when I try to do the same in <code>&lt;module&gt;/src/androidTest</code> I get an exception:</p>\n\n<pre><code>Error:java.lang.IllegalArgumentException: bad descriptor: Lcom/packageName/MainActivityTest$Foo should return bar$1;\nError:Execution failed for task ':sample:transformClassesWithDexBuilderForDebugAndroidTest'. &gt; com.android.build.api.transform.TransformException: org.gradle.tooling.BuildException: com.android.dx.cf.iface.ParseException: bad descriptor: Lcom/packageName/MainActivityTest$Foo should return bar$1;\n</code></pre>\n\n<p>Is there some trick to make it work?</p>\n"}, {"tags": ["android", "kotlin", "retrofit", "rx-java"], "comments": [{"owner": {"reputation": 1577, "user_id": 4279905, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b94ec276d9ce3164b3490fdc35a39618?s=128&d=identicon&r=PG&f=1", "display_name": "ste9206", "link": "https://stackoverflow.com/users/4279905/ste9206"}, "edited": false, "score": 0, "creation_date": 1505810100, "post_id": 46295237, "comment_id": 79553658, "body": "why don&#39;t you use subscribeBy of rxKotlin?"}, {"owner": {"reputation": 1034, "user_id": 3084502, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d6086bf6578718fe7aa8c519ee5c7ac3?s=128&d=identicon&r=PG&f=1", "display_name": "ejay", "link": "https://stackoverflow.com/users/3084502/ejay"}, "reply_to_user": {"reputation": 1577, "user_id": 4279905, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b94ec276d9ce3164b3490fdc35a39618?s=128&d=identicon&r=PG&f=1", "display_name": "ste9206", "link": "https://stackoverflow.com/users/4279905/ste9206"}, "edited": false, "score": 0, "creation_date": 1505810799, "post_id": 46295237, "comment_id": 79554076, "body": "you&#39;re right, I could, this will be the next step, but need first to resolve my problem"}], "answers": [{"comments": [{"owner": {"reputation": 1861, "user_id": 2793036, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/aiInx.jpg?s=128&g=1", "display_name": "Rishabh876", "link": "https://stackoverflow.com/users/2793036/rishabh876"}, "edited": false, "score": 0, "creation_date": 1548495381, "post_id": 46302070, "comment_id": 95568138, "body": "Instead of handling this on every api call, I would really love to see an implementation that can do this via ConverterFactory or OkHttp Interceptors. By creating an Error class that extends Throwable. Any idea how it can be done?"}], "tags": [], "owner": {"reputation": 2577, "user_id": 3451639, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/fGkB6.jpg?s=128&g=1", "display_name": "Aleksander Mielczarek", "link": "https://stackoverflow.com/users/3451639/aleksander-mielczarek"}, "is_accepted": true, "score": 3, "last_activity_date": 1505828446, "creation_date": 1505828446, "answer_id": 46302070, "question_id": 46295237, "link": "https://stackoverflow.com/questions/46295237/rxjava-retrofit-parse-api-error-for-user/46302070#46302070", "title": "Rxjava retrofit parse api error for user", "body": "<p>You will need instance of <strong>retrofit</strong> to map exception to error response. Here is an example:</p>\n\n<pre><code>class Error(\n        var reason: String = \"\",\n        var details: String = \"\",\n        var type: String = \"\"\n)\n\napi.getUser()\n        .subscribeOn(Schedulers.io())\n        .observeOn(AndroidSchedulers.mainThread())\n        .subscribe({ user -&gt;\n            println(\"Get user success : $user\")\n        }, { throwable -&gt;\n            if (throwable is HttpException) {\n                val converter: Converter&lt;ResponseBody, Error&gt; = retrofit.responseBodyConverter(Error::class.java, emptyArray())\n                val error = converter.convert(throwable.response().errorBody())\n                println(\"Get user error : ${error.reason}\")\n            } else {\n                println(\"Get user error : $throwable\")\n            }\n        })\n</code></pre>\n"}], "owner": {"reputation": 1034, "user_id": 3084502, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d6086bf6578718fe7aa8c519ee5c7ac3?s=128&d=identicon&r=PG&f=1", "display_name": "ejay", "link": "https://stackoverflow.com/users/3084502/ejay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 851, "favorite_count": 0, "accepted_answer_id": 46302070, "answer_count": 1, "score": 0, "last_activity_date": 1505828446, "creation_date": 1505808673, "question_id": 46295237, "link": "https://stackoverflow.com/questions/46295237/rxjava-retrofit-parse-api-error-for-user", "title": "Rxjava retrofit parse api error for user", "body": "<p>I'm using RxJava with retrofit in a library project. Everything is working fine, I get the expected result when I request data.</p>\n\n<pre><code>@GET(Routes.ME)\nfun getUserObservable(): Observable&lt;User&gt;\n</code></pre>\n\n<p>From the API class:</p>\n\n<pre><code>fun getUser(): Observable&lt;User&gt; {\n    return usersService.getUserObservable()\n}\n</code></pre>\n\n<p>From the main project which use this library, I get the user like this:</p>\n\n<pre><code>api.getUser().observeOn(AndroidSchedulers.mainThread())\n             .subscribeOn(Schedulers.io())\n             .subscribe({ user -&gt;\n                        println(\"Get user success : $user\")\n                    }, { error -&gt;\n                        println(\"Get user error : $error\")\n                    })\n</code></pre>\n\n<p>All is working fine, but if an API error occurs, then the API send us for example: </p>\n\n<pre><code>{reason: \"the reason of the error\", details: \"some details\", type:\"the type error\"}\n</code></pre>\n\n<p>What I want is to provide explicitly this error to the front which get this error, because until now, when I get the error from the error Observable, the front can't parse this error I want to build. So my purpose is to parse this error from my library, build an Error POJO with the provided API json, and send it when the front get the error. If the error doesn't come from the API, then the front should get the normal error.</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 11295, "user_id": 5558150, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k9GtP.jpg?s=128&g=1", "display_name": "Bhuvanesh BS", "link": "https://stackoverflow.com/users/5558150/bhuvanesh-bs"}, "edited": false, "score": 0, "creation_date": 1505801342, "post_id": 46292658, "comment_id": 79548346, "body": "He asked for difference between lambda method and normal method. Please update your answer @Intellij Amiya"}, {"owner": {"reputation": 2641, "user_id": 7073808, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/--ImTRkYRdz0/AAAAAAAAAAI/AAAAAAAAABk/LksPtBHMaB8/photo.jpg?sz=128", "display_name": "UltimateDevil", "link": "https://stackoverflow.com/users/7073808/ultimatedevil"}, "edited": false, "score": 1, "creation_date": 1505804233, "post_id": 46292658, "comment_id": 79550027, "body": "Thanks, for you answer @IntelliJAmiya. It helps me lot to understand. setOnClickListener transformation"}], "tags": [], "owner": {"reputation": 69545, "user_id": 3395198, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/CJtaZ.jpg?s=128&g=1", "display_name": "IntelliJ Amiya", "link": "https://stackoverflow.com/users/3395198/intellij-amiya"}, "is_accepted": false, "score": 3, "last_activity_date": 1505808722, "last_edit_date": 1505808722, "creation_date": 1505799776, "answer_id": 46292658, "question_id": 46292538, "link": "https://stackoverflow.com/questions/46292538/difference-between-onclicklistener-methods-in-kotlin/46292658#46292658", "title": "Difference between OnclickListener methods in Kotlin", "body": "<p>Your Question:\n<strong>What is the difference between those methods? If they differ, which one is better and why?</strong></p>\n\n<p>After compilation, both will produce the same bytecode but while writing it will give you more readability by single line implementation.</p>\n\n<p>The great feature of Java 8 is Lambda expressions. With Lambda you can write java code simpler. The ugly look of code slightly changed by this feature. </p>\n\n<p>Example: <a href=\"http://tutorials.jenkov.com/java/lambda-expressions.html\" rel=\"nofollow noreferrer\">source</a></p>\n\n<p>You can write <strong>Single Abstract Method (SAM)</strong> as lambda.</p>\n\n<p>If your interface has an only one method.</p>\n\n<pre><code>public interface StateChangeListener {\n\n    public void onStateChange(State oldState, State newState);\n\n}\n</code></pre>\n\n<p>You can write it as Lambda like this.</p>\n\n<pre><code>stateOwner.addStateListener(\n    (oldState, newState) -&gt; System.out.println(\"State changed\")\n);\n</code></pre>\n\n<p>But both of the methods are same but you can see the second one is so simple and removed ugly implementation.</p>\n\n<p>In Kotlin, lambda expressions are different from Java.</p>\n\n<p><strong>Kotlin lambda</strong> expression example: <a href=\"https://kotlinlang.org/docs/reference/lambdas.html\" rel=\"nofollow noreferrer\">source</a></p>\n\n<pre><code>val add: (Int, Int) -&gt; Int = { a, b -&gt;  a + b }\n</code></pre>\n\n<p>The above function variable can be called like this:</p>\n\n<pre><code>val addedValue: Int = add(5, 5)\n</code></pre>\n\n<p>This will return you the added value of two integers.</p>\n\n<p>In this example you can see <code>(Int, Int) -&gt; Int</code>, this is called lambda function in Kotlin.</p>\n\n<p>So Kotlin lambda and Java lambda functions are completely different.</p>\n\n<p>You can see in the Kotlin Docs:</p>\n\n<blockquote>\n  <p>Just like Java 8, Kotlin supports SAM conversions. This means that\n  Kotlin function literals can be automatically converted into\n  implementations of Java interfaces with a single non-default method,\n  as long as the parameter types of the interface method match the\n  parameter types of the Kotlin function.</p>\n</blockquote>\n\n<p>Actually, you are writing the lambda in kotlin, later it will be converted to java interface. So both methods are different. But when it comes to execution both are same. It won't affect compile time so it's always suggested to use lambda.</p>\n\n<p>Hope it helps :)</p>\n"}, {"comments": [{"owner": {"reputation": 11295, "user_id": 5558150, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k9GtP.jpg?s=128&g=1", "display_name": "Bhuvanesh BS", "link": "https://stackoverflow.com/users/5558150/bhuvanesh-bs"}, "edited": false, "score": 0, "creation_date": 1505801602, "post_id": 46292844, "comment_id": 79548491, "body": "Nice information man, But your example is not relevant to his question."}, {"owner": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "reply_to_user": {"reputation": 11295, "user_id": 5558150, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k9GtP.jpg?s=128&g=1", "display_name": "Bhuvanesh BS", "link": "https://stackoverflow.com/users/5558150/bhuvanesh-bs"}, "edited": false, "score": 0, "creation_date": 1505802352, "post_id": 46292844, "comment_id": 79548952, "body": "@Bhuvanesh Bs The example I added is used to explain the SAM conversion."}, {"owner": {"reputation": 2641, "user_id": 7073808, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/--ImTRkYRdz0/AAAAAAAAAAI/AAAAAAAAABk/LksPtBHMaB8/photo.jpg?sz=128", "display_name": "UltimateDevil", "link": "https://stackoverflow.com/users/7073808/ultimatedevil"}, "edited": false, "score": 1, "creation_date": 1505804474, "post_id": 46292844, "comment_id": 79550177, "body": "Thanks for sharing this nice information @BakaWaii."}, {"owner": {"reputation": 2641, "user_id": 7073808, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/--ImTRkYRdz0/AAAAAAAAAAI/AAAAAAAAABk/LksPtBHMaB8/photo.jpg?sz=128", "display_name": "UltimateDevil", "link": "https://stackoverflow.com/users/7073808/ultimatedevil"}, "edited": false, "score": 0, "creation_date": 1505805753, "post_id": 46292844, "comment_id": 79551049, "body": "Sure IntelliJAmiya and thanks again @BakaWaii. for this excellent answer. It helps me lot to understand Kotlin programming Structure."}, {"owner": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "reply_to_user": {"reputation": 2641, "user_id": 7073808, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/--ImTRkYRdz0/AAAAAAAAAAI/AAAAAAAAABk/LksPtBHMaB8/photo.jpg?sz=128", "display_name": "UltimateDevil", "link": "https://stackoverflow.com/users/7073808/ultimatedevil"}, "edited": false, "score": 0, "creation_date": 1505806166, "post_id": 46292844, "comment_id": 79551310, "body": "@Vikas Tiwari You are welcome. I am discovering Kotlin too. I think there can be a more well-explain answer from someone for this question."}], "tags": [], "owner": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "is_accepted": true, "score": 7, "last_activity_date": 1505802753, "last_edit_date": 1505802753, "creation_date": 1505800531, "answer_id": 46292844, "question_id": 46292538, "link": "https://stackoverflow.com/questions/46292538/difference-between-onclicklistener-methods-in-kotlin/46292844#46292844", "title": "Difference between OnclickListener methods in Kotlin", "body": "<p>They refer to the same function but are written in different way. The first one is the typical way to invoke the <code>setOnClickListener()</code> function which accepts an <code>OnClickListener</code> object.</p>\n\n<p>The second one make use of lambda expression. It works because <code>View.OnClickListener</code> is a <a href=\"https://stackoverflow.com/questions/17913409/what-is-a-sam-type-in-java\">SAM type</a> defined in Java and Kotlin supports <a href=\"https://kotlinlang.org/docs/reference/java-interop.html#sam-conversions\" rel=\"noreferrer\">SAM conversions</a>.</p>\n\n<blockquote>\n  <p>Just like Java 8, Kotlin supports SAM conversions. This means that Kotlin function literals can be automatically converted into implementations of Java interfaces with a single non-default method, as long as the parameter types of the interface method match the parameter types of the Kotlin function.</p>\n</blockquote>\n\n<p>Suppose you have an interface defined in Java like this:</p>\n\n<pre><code>public class Example {\n    public interface SingleMethodInterface {\n        int length(String text);\n    }\n\n    public static void set(SingleMethodInterface sam) {}\n}\n</code></pre>\n\n<p>Then, you can call <code>set()</code> function in the following two ways in Kotlin:</p>\n\n<pre><code>//Passing a function type which accept a `String` and return an `Int`\nval length: (String) -&gt; Int = { it.length }\nExample.set(length)\n//or\nExample.set { it.length }\n\n//Passing an object which implements `SingleMethodInterface`\nval length2: Main.SingleMethodInterface = object: Main.SingleMethodInterface {\n    override fun length(text: String): Int {\n        return text.length\n    }\n}\nExample.set(length2)\n</code></pre>\n\n<p>In short, SAM conversion provide a way to write clean code in Kotlin which interop with Java.</p>\n"}], "owner": {"reputation": 2641, "user_id": 7073808, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/--ImTRkYRdz0/AAAAAAAAAAI/AAAAAAAAABk/LksPtBHMaB8/photo.jpg?sz=128", "display_name": "UltimateDevil", "link": "https://stackoverflow.com/users/7073808/ultimatedevil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4989, "favorite_count": 4, "accepted_answer_id": 46292844, "answer_count": 2, "score": 12, "last_activity_date": 1505813278, "creation_date": 1505799179, "last_edit_date": 1505803895, "question_id": 46292538, "link": "https://stackoverflow.com/questions/46292538/difference-between-onclicklistener-methods-in-kotlin", "title": "Difference between OnclickListener methods in Kotlin", "body": "<p>I am learning Kotlin. Before that, I have worked with Java for Android Development. Kotlin is a great language to learn. I have a confusion while I was using <code>setOnClickListener(View.OnClickListener)</code>. I have seen two hints on Android Studio.</p>\n\n<p><a href=\"https://i.stack.imgur.com/mTRiq.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/mTRiq.png\" alt=\"image\"></a></p>\n\n<p>I know how to work or define both of them.</p>\n\n<p>The first way to implementing <code>OnClickListerner</code></p>\n\n<pre><code> send_button.setOnClickListener(object : View.OnClickListener{\n       override fun onClick(p0: View?) {\n           TODO(\"not implemented\") //To change body of created functions use File | Settings | File Templates.\n       }\n   })\n</code></pre>\n\n<p>and this is the second way of implementing <code>OnClickListener</code></p>\n\n<pre><code> send_button.setOnClickListener {\n        TODO(\"not implemented\") //To change body of created functions use File | Settings | File Templates.\n    }\n</code></pre>\n\n<p>I understand as far as the second method is based on lambda. But I can't have the proper understanding of these methods.</p>\n\n<p>So, my question is: What is the difference between those methods? If they differ, which one is better and why?</p>\n"}, {"tags": ["android", "kotlin", "parcelable"], "comments": [{"owner": {"reputation": 21170, "user_id": 2949612, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/RLdcF.png?s=128&g=1", "display_name": "pRaNaY", "link": "https://stackoverflow.com/users/2949612/pranay"}, "edited": false, "score": 0, "creation_date": 1505793168, "post_id": 46290802, "comment_id": 79545671, "body": "Make sure you have added <code>apply plugin: &#39;kotlin-kapt&#39;</code> in your <b>app</b> level gradle."}], "answers": [{"comments": [{"owner": {"reputation": 2354, "user_id": 4087344, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fb68218de627010e4dcb414c1a2814b3?s=128&d=identicon&r=PG&f=1", "display_name": "TOP", "link": "https://stackoverflow.com/users/4087344/top"}, "edited": false, "score": 0, "creation_date": 1505791136, "post_id": 46290981, "comment_id": 79545169, "body": "As I said, Android Studio automatically generates Parcelable methods for me."}, {"owner": {"reputation": 4677, "user_id": 3673259, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/DPHO1.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3673259/joshua"}, "reply_to_user": {"reputation": 2354, "user_id": 4087344, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fb68218de627010e4dcb414c1a2814b3?s=128&d=identicon&r=PG&f=1", "display_name": "TOP", "link": "https://stackoverflow.com/users/4087344/top"}, "edited": false, "score": 0, "creation_date": 1505792343, "post_id": 46290981, "comment_id": 79545446, "body": "@T Delete the methods or delete the <code>@Parcelize</code>. For I mean creating, it is kapt doing it. You won&#39;t see it in your source code."}, {"owner": {"reputation": 2354, "user_id": 4087344, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fb68218de627010e4dcb414c1a2814b3?s=128&d=identicon&r=PG&f=1", "display_name": "TOP", "link": "https://stackoverflow.com/users/4087344/top"}, "edited": false, "score": 0, "creation_date": 1505837908, "post_id": 46290981, "comment_id": 79572802, "body": "Thank you. Remove @Parcelize helped. Delete the methods doesn&#39;t help"}], "tags": [], "owner": {"reputation": 4677, "user_id": 3673259, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/DPHO1.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3673259/joshua"}, "is_accepted": false, "score": 2, "last_activity_date": 1505789062, "creation_date": 1505789062, "answer_id": 46290981, "question_id": 46290802, "link": "https://stackoverflow.com/questions/46290802/kotlin-compile-error-when-using-parcelable/46290981#46290981", "title": "Kotlin compile error when using Parcelable", "body": "<p>See <a href=\"https://blog.jetbrains.com/kotlin/2017/08/kotlin-1-1-4-is-out/\" rel=\"nofollow noreferrer\">https://blog.jetbrains.com/kotlin/2017/08/kotlin-1-1-4-is-out/</a> and <a href=\"https://github.com/Kotlin/KEEP/blob/master/proposals/extensions/android-parcelable.md\" rel=\"nofollow noreferrer\">https://github.com/Kotlin/KEEP/blob/master/proposals/extensions/android-parcelable.md</a> for details about <code>@Parcelize</code>. </p>\n\n<p><code>@Parcelize</code> generate the <code>Parcelable</code> methods for you. You do not need to create them yourself. If you are creating it yourself, remove <code>@Parcelize</code>. </p>\n\n<p>Also, note that <code>@Parcelize</code> is experimental.</p>\n"}, {"comments": [{"owner": {"reputation": 2354, "user_id": 4087344, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fb68218de627010e4dcb414c1a2814b3?s=128&d=identicon&r=PG&f=1", "display_name": "TOP", "link": "https://stackoverflow.com/users/4087344/top"}, "edited": false, "score": 0, "creation_date": 1505837934, "post_id": 46292871, "comment_id": 79572821, "body": "Thank you. I have to delete @Parcelize"}], "tags": [], "owner": {"reputation": 65664, "user_id": 3998402, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b1deae6b5ee0cdf29e9a4d9f219f547a?s=128&d=identicon&r=PG&f=1", "display_name": "humazed", "link": "https://stackoverflow.com/users/3998402/humazed"}, "is_accepted": false, "score": 1, "last_activity_date": 1505801333, "last_edit_date": 1505801333, "creation_date": 1505800675, "answer_id": 46292871, "question_id": 46290802, "link": "https://stackoverflow.com/questions/46290802/kotlin-compile-error-when-using-parcelable/46292871#46292871", "title": "Kotlin compile error when using Parcelable", "body": "<p>It's a bug in android studio that it can't understand yet that <code>@Parcelize</code> is generating the Parcelization code.</p>\n\n<p>in the meantime, you can just ignore that lint check by adding</p>\n\n<pre><code>@SuppressLint(\"ParcelCreator\")\n</code></pre>\n\n<p>so your code will be</p>\n\n<pre><code>@Parcelize\n@SuppressLint(\"ParcelCreator\")\ndata class BankCard(var owner: String, var number: String, var isDefaultCard: Boolean) : Parcelable\n</code></pre>\n"}], "owner": {"reputation": 2354, "user_id": 4087344, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fb68218de627010e4dcb414c1a2814b3?s=128&d=identicon&r=PG&f=1", "display_name": "TOP", "link": "https://stackoverflow.com/users/4087344/top"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2435, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1506352747, "creation_date": 1505787399, "last_edit_date": 1506352747, "question_id": 46290802, "link": "https://stackoverflow.com/questions/46290802/kotlin-compile-error-when-using-parcelable", "title": "Kotlin compile error when using Parcelable", "body": "<p>I'm trying to implement <code>Parcelable</code> for my class. Android Studio automatically generates code for me. Now my class looks like that:</p>\n\n<pre><code>    @Parcelize\ndata class BankCard(var owner: String, var number: String, var isDefaultCard: Boolean) : Parcelable {\n    constructor(parcel: Parcel) : this(\n            parcel.readString(),\n            parcel.readString(),\n            parcel.readByte() != 0.toByte()) {\n    }\n\n    override fun writeToParcel(parcel: Parcel, flags: Int) {\n        parcel.writeString(owner)\n        parcel.writeString(number)\n        parcel.writeByte(if (isDefaultCard) 1 else 0)\n    }\n\n    override fun describeContents(): Int {\n        return 0\n    }\n\n    companion object CREATOR : Parcelable.Creator&lt;BankCard&gt; {\n        override fun createFromParcel(parcel: Parcel): BankCard {\n            return BankCard(parcel)\n        }\n\n        override fun newArray(size: Int): Array&lt;BankCard?&gt; {\n            return arrayOfNulls(size)\n        }\n    }\n}\n</code></pre>\n\n<p>But when I run project, I get this compile error: <strong>:app:kaptDebugKotlin</strong></p>\n\n<p>Here is the log:</p>\n\n<pre><code>     public static final model.BankCard$Creator CREATOR = null;\ne:                                               ^\ne:   symbol:   class BankCard$Creator\ne:   location: package model\ne: /Users/sunshine/Desktop/Cars/app/build/tmp/kapt3/stubs/debug/model/Car.java:16: error: cannot find symbol\ne: \n\ne:     public static final model.Car$Creator CREATOR = null;\ne:                                               ^\ne:   symbol:   class Car$Creator\ne:   location: package model\ne: java.lang.IllegalStateException: failed to analyze: org.jetbrains.kotlin.kapt3.diagnostic.KaptError: Error while annotation processing\n    at org.jetbrains.kotlin.analyzer.AnalysisResult.throwIfError(AnalysisResult.kt:57)\n    at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.compileModules(KotlinToJVMBytecodeCompiler.kt:138)\n    at org.jetbrains.kotlin.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.kt:170)\n    at org.jetbrains.kotlin.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.kt:58)\n    at org.jetbrains.kotlin.cli.common.CLICompiler.execImpl(CLICompiler.java:93)\n    at org.jetbrains.kotlin.cli.common.CLICompiler.execImpl(CLICompiler.java:46)\n    at org.jetbrains.kotlin.cli.common.CLITool.exec(CLITool.kt:92)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl$compile$1$2.invoke(CompileServiceImpl.kt:386)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl$compile$1$2.invoke(CompileServiceImpl.kt:98)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl$doCompile$$inlined$ifAlive$lambda$2.invoke(CompileServiceImpl.kt:832)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl$doCompile$$inlined$ifAlive$lambda$2.invoke(CompileServiceImpl.kt:98)\n    at org.jetbrains.kotlin.daemon.common.DummyProfiler.withMeasure(PerfUtils.kt:137)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl.checkedCompile(CompileServiceImpl.kt:859)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl.doCompile(CompileServiceImpl.kt:831)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl.compile(CompileServiceImpl.kt:385)\n    at sun.reflect.GeneratedMethodAccessor79.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:346)\n    at sun.rmi.transport.Transport$1.run(Transport.java:200)\n    at sun.rmi.transport.Transport$1.run(Transport.java:197)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at sun.rmi.transport.Transport.serviceCall(Transport.java:196)\n    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:568)\n    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:826)\n    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:683)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:682)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: org.jetbrains.kotlin.kapt3.diagnostic.KaptError: Error while annotation processing\n    at org.jetbrains.kotlin.kapt3.AnnotationProcessingKt.doAnnotationProcessing(annotationProcessing.kt:90)\n    at org.jetbrains.kotlin.kapt3.AnnotationProcessingKt.doAnnotationProcessing$default(annotationProcessing.kt:42)\n    at org.jetbrains.kotlin.kapt3.AbstractKapt3Extension.runAnnotationProcessing(Kapt3Extension.kt:205)\n    at org.jetbrains.kotlin.kapt3.AbstractKapt3Extension.analysisCompleted(Kapt3Extension.kt:166)\n    at org.jetbrains.kotlin.kapt3.ClasspathBasedKapt3Extension.analysisCompleted(Kapt3Extension.kt:82)\n    at org.jetbrains.kotlin.cli.jvm.compiler.TopDownAnalyzerFacadeForJVM$analyzeFilesWithJavaIntegration$2.invoke(TopDownAnalyzerFacadeForJVM.kt:96)\n    at org.jetbrains.kotlin.cli.jvm.compiler.TopDownAnalyzerFacadeForJVM.analyzeFilesWithJavaIntegration(TopDownAnalyzerFacadeForJVM.kt:106)\n    at org.jetbrains.kotlin.cli.jvm.compiler.TopDownAnalyzerFacadeForJVM.analyzeFilesWithJavaIntegration$default(TopDownAnalyzerFacadeForJVM.kt:83)\n    at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler$analyze$1.invoke(KotlinToJVMBytecodeCompiler.kt:377)\n    at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler$analyze$1.invoke(KotlinToJVMBytecodeCompiler.kt:68)\n    at org.jetbrains.kotlin.cli.common.messages.AnalyzerWithCompilerReport.analyzeAndReport(AnalyzerWithCompilerReport.kt:96)\n    at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.analyze(KotlinToJVMBytecodeCompiler.kt:368)\n    at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.compileModules(KotlinToJVMBytecodeCompiler.kt:133)\n    ... 29 more\n</code></pre>\n\n<p>Please help!</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 1802, "user_id": 1045902, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cae064ef599158ab518d569351fcb650?s=128&d=identicon&r=PG", "display_name": "DPM", "link": "https://stackoverflow.com/users/1045902/dpm"}, "edited": false, "score": 0, "creation_date": 1505783200, "post_id": 46290113, "comment_id": 79543447, "body": "You can compare two floating points if you want, why couldn&#39;t you?. It&#39;s not a common scenario since it&#39;s a brittle solution for most problems. What you usually want to do is compare values within an epsilon of difference or use precise decimal arithmetics. In this case it looks like a valid solution since it&#39;s bound to converge to a certain value."}, {"owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "reply_to_user": {"reputation": 1802, "user_id": 1045902, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cae064ef599158ab518d569351fcb650?s=128&d=identicon&r=PG", "display_name": "DPM", "link": "https://stackoverflow.com/users/1045902/dpm"}, "edited": false, "score": 0, "creation_date": 1505784472, "post_id": 46290113, "comment_id": 79543734, "body": "In some language, such as Fortran, floating-point number is not a accurate, so if (x==y) return y should be if (ABS(x-y)&lt;0.0000000001) return y"}], "answers": [{"tags": [], "owner": {"reputation": 1802, "user_id": 1045902, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cae064ef599158ab518d569351fcb650?s=128&d=identicon&r=PG", "display_name": "DPM", "link": "https://stackoverflow.com/users/1045902/dpm"}, "is_accepted": false, "score": 3, "last_activity_date": 1505784605, "creation_date": 1505784605, "answer_id": 46290429, "question_id": 46290113, "link": "https://stackoverflow.com/questions/46290113/can-i-compare-whether-two-floating-point-number-are-equal-in-kotlin/46290429#46290429", "title": "Can I compare whether two floating-point number are equal in Kotlin?", "body": "<p>To further extend on my comment and getting more precise, the documentation gives you the key.</p>\n\n<p><a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#cos(double)\" rel=\"nofollow noreferrer\">Math.cos(double)</a></p>\n\n<blockquote>\n  <p>The computed result must be within 1 ulp of the exact result. Results\n  must be semi-monotonic.</p>\n</blockquote>\n\n<p>An ulp is the difference between an encoded floating point number and the next number that can be encoded in the data type, in this case, double.</p>\n\n<p>If the result must be within 1 ulp, that means the result can be one of, at most,  two floating point values.</p>\n\n<p>It follows that the only way that the computation wouldn't stop is if an input of one of these numbers will give you the other number. But since the function is semi-monotonic that means that can't happen. Otherwise you would have the higher value of the two as input giving you the lower value as output, and the lower value giving you the higher one as output. Semi-monotonic means it only goes in one direction (to put it very simply and somewhat inaccurately).</p>\n"}, {"comments": [{"owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "edited": false, "score": 0, "creation_date": 1505786886, "post_id": 46290488, "comment_id": 79544301, "body": "Thanks! I assume that Math.cos(x) will be 0.7390851332151607 after I calculate 100 times manually, the code above will be calculate 500 times until x==yy, and when the  code above run again, maybe it need calculate 800 times until x==yy, right?"}, {"owner": {"reputation": 4677, "user_id": 3673259, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/DPHO1.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3673259/joshua"}, "reply_to_user": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "edited": false, "score": 0, "creation_date": 1505789229, "post_id": 46290488, "comment_id": 79544790, "body": "@HelloCW No, there are no guarantee they are equal even that are mathematical equal."}, {"owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "edited": false, "score": 0, "creation_date": 1505794215, "post_id": 46290488, "comment_id": 79545908, "body": "Thanks! If so, why did you think that the sample code is correct? I think it should be if (ABS(x-y)&lt;0.0000000001) return y , the sample code will be infinite loop"}, {"owner": {"reputation": 4677, "user_id": 3673259, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/DPHO1.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3673259/joshua"}, "reply_to_user": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "edited": false, "score": 0, "creation_date": 1505794592, "post_id": 46290488, "comment_id": 79546018, "body": "@HelloCW I did not say it is correct. I just said it is possible that <code>x==y</code> even it is very small."}, {"owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "edited": false, "score": 0, "creation_date": 1505801582, "post_id": 46290488, "comment_id": 79548475, "body": "Do you mean that the x==y maybe true when x=1.0000000001 and y=1.0000000002"}, {"owner": {"reputation": 4677, "user_id": 3673259, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/DPHO1.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3673259/joshua"}, "reply_to_user": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "edited": false, "score": 1, "creation_date": 1505802229, "post_id": 46290488, "comment_id": 79548860, "body": "@HelloCW I mean float can equal but they have to be exact. <code>1.0000000001</code> and <code>1.0000000002</code> are not exact the same, so they are not equal. But there are rounding occurs in float which <b>MAY</b> make the final result equal."}], "tags": [], "owner": {"reputation": 4677, "user_id": 3673259, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/DPHO1.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3673259/joshua"}, "is_accepted": false, "score": 2, "last_activity_date": 1505785060, "creation_date": 1505785060, "answer_id": 46290488, "question_id": 46290113, "link": "https://stackoverflow.com/questions/46290113/can-i-compare-whether-two-floating-point-number-are-equal-in-kotlin/46290488#46290488", "title": "Can I compare whether two floating-point number are equal in Kotlin?", "body": "<blockquote>\n  <p>In my mind, we can't compare whether two floating-point number are equal, so I think that the result of if (x == y) is always false, right?</p>\n</blockquote>\n\n<p>No, this is wrong. You <strong>CAN</strong> compare whether two floating-point number are equal but it is mostly meaningless. Because floating point by definition is not accurate. Even two different calculations have same result in Math, it does not necessary equal in program because of rounding error. It still may a chance to be equal. </p>\n"}], "owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4437, "favorite_count": 0, "answer_count": 2, "score": 7, "last_activity_date": 1505785060, "creation_date": 1505781850, "question_id": 46290113, "link": "https://stackoverflow.com/questions/46290113/can-i-compare-whether-two-floating-point-number-are-equal-in-kotlin", "title": "Can I compare whether two floating-point number are equal in Kotlin?", "body": "<p>The following code is from <a href=\"https://kotlinlang.org/docs/reference/functions.html?q=&amp;p=0\" rel=\"noreferrer\">https://kotlinlang.org/docs/reference/functions.html?q=&amp;p=0</a></p>\n\n<p>This code calculates the fixpoint of cosine, which is a mathematical constant. It simply calls Math.cos repeatedly starting at 1.0 until the result doesn't change any more, yielding a result of 0.7390851332151607. </p>\n\n<p>In my mind, we can't compare whether two floating-point number are equal, so I think that the result of <code>if (x == y)</code> is always false, right?</p>\n\n<pre><code>private fun findFixPoint(): Double {\n    var x = 1.0\n    while (true) {\n        val y = Math.cos(x)\n        if (x == y) return y\n        x = y\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "bluetooth", "connection", "kotlin"], "comments": [{"owner": {"reputation": 18360, "user_id": 2911458, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3a6060bc7ace07fa75791cd5dac2d46a?s=128&d=identicon&r=PG", "display_name": "stkent", "link": "https://stackoverflow.com/users/2911458/stkent"}, "edited": false, "score": 0, "creation_date": 1505776078, "post_id": 46289221, "comment_id": 79541785, "body": "No idea if capitalization of the UUID might make a difference? Value looks ok otherwise (<a href=\"https://www.bluetooth.com/specifications/assigned-numbers/service-discovery\" rel=\"nofollow noreferrer\">bluetooth.com/specifications/assigned-numbers/service-disco&zwnj;&#8203;very</a>)"}, {"owner": {"reputation": 1165, "user_id": 4145397, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/NP13i.jpg?s=128&g=1", "display_name": "92AlanC", "link": "https://stackoverflow.com/users/4145397/92alanc"}, "reply_to_user": {"reputation": 18360, "user_id": 2911458, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3a6060bc7ace07fa75791cd5dac2d46a?s=128&d=identicon&r=PG", "display_name": "stkent", "link": "https://stackoverflow.com/users/2911458/stkent"}, "edited": false, "score": 0, "creation_date": 1505780662, "post_id": 46289221, "comment_id": 79542879, "body": "Nope, didn&#39;t work. Thanks though"}], "answers": [{"comments": [{"owner": {"reputation": 4939, "user_id": 1801072, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k6sEG.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1801072/sam"}, "edited": false, "score": 1, "creation_date": 1505781125, "post_id": 46290020, "comment_id": 79542998, "body": "Originally had nice javadocs and headers, but Stack Overflow limits character count so had to remove them to make it fit lol. Hope it helps, if not, no worries, good luck all the same."}, {"owner": {"reputation": 1165, "user_id": 4145397, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/NP13i.jpg?s=128&g=1", "display_name": "92AlanC", "link": "https://stackoverflow.com/users/4145397/92alanc"}, "edited": false, "score": 0, "creation_date": 1505783414, "post_id": 46290020, "comment_id": 79543495, "body": "Thank you for your help mate!"}, {"owner": {"reputation": 4939, "user_id": 1801072, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k6sEG.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1801072/sam"}, "reply_to_user": {"reputation": 1165, "user_id": 4145397, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/NP13i.jpg?s=128&g=1", "display_name": "92AlanC", "link": "https://stackoverflow.com/users/4145397/92alanc"}, "edited": false, "score": 0, "creation_date": 1505949341, "post_id": 46290020, "comment_id": 79626940, "body": "No problem, happy to help :)"}, {"owner": {"reputation": 854, "user_id": 5488468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uZFd2.jpg?s=128&g=1", "display_name": "Bipin Bharti", "link": "https://stackoverflow.com/users/5488468/bipin-bharti"}, "edited": false, "score": 0, "creation_date": 1580380250, "post_id": 46290020, "comment_id": 106081642, "body": "hello Sam What is BluetoothChangedReceiver and  BluetoothDeviceReceiver?"}, {"owner": {"reputation": 4939, "user_id": 1801072, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k6sEG.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1801072/sam"}, "edited": false, "score": 0, "creation_date": 1580400108, "post_id": 46290020, "comment_id": 106093160, "body": "hi Bipin, this post is so old, I&#39;m not even sure where I kept these files anymore lol. but they were just standard receiver classes named as you see above and then they would forward bluetooth connection events to whoever was listening for it in the app. I&#39;ll see if I can find them, but at this point, there is probably newer libraries to help with all of this stuff."}, {"owner": {"reputation": 631, "user_id": 4776577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/677911868980798/picture?type=large", "display_name": "Karan Khurana", "link": "https://stackoverflow.com/users/4776577/karan-khurana"}, "reply_to_user": {"reputation": 854, "user_id": 5488468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uZFd2.jpg?s=128&g=1", "display_name": "Bipin Bharti", "link": "https://stackoverflow.com/users/5488468/bipin-bharti"}, "edited": false, "score": 0, "creation_date": 1598365606, "post_id": 46290020, "comment_id": 112431485, "body": "@BipinBharti were did you get the list of all unpaired devices ?"}], "tags": [], "owner": {"reputation": 4939, "user_id": 1801072, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k6sEG.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1801072/sam"}, "is_accepted": true, "score": 3, "last_activity_date": 1505781074, "creation_date": 1505781074, "answer_id": 46290020, "question_id": 46289221, "link": "https://stackoverflow.com/questions/46289221/bluetoothsocket-not-connecting-to-target-device/46290020#46290020", "title": "BluetoothSocket not connecting to target device", "body": "<p>Well, I don't see exactly what you are doing wrong here. However, I have done quite a bit of Bluetooth work. More recently just focused in BLE. You should be able to discover your nearby BT devices and see their UUIDs.</p>\n\n<p>I have written a helper class about 3 years ago so it's a little old, but should be mostly the same code. Happy to share it with you if it helps.</p>\n\n<pre><code>public class BluetoothConnector {\n\nprivate static final String TAG = Globals.SEARCH_STRING + BluetoothConnector.class.getSimpleName();\nprivate static final String DEFAULT_SERVER_NAME_FOR_APP = \"tn_bt_default_server\";\nprivate static final int DEFAULT_DISCOVERABLE_DURATION_MS = 30000;\nprivate static final UUID DEFAULT_UUID = UUID.fromString(\"6534c201-039c-4e4f-89f9-5ca8cfeb9667\");\npublic static final int ENABLE_DISCOVER_INTENT = 1002;\n\nprotected boolean mIsToastEnabled = false; //Access from calling class to enable toasting of progress to screen if necessary\nprivate Handler mUIHandler;\nprivate static ServerSocketThread mServerSocketThread;\nprivate static ClientSocketThread mClientSocketThread;\nprivate ManageConnectionThread mManageConnectionThread;\nprivate Context mContext;\nprivate IBluetoothDataListener mBluetoothDataListener;\npublic final Object ServerSocketLock = new Object();\npublic final Object ClientSocketLock = new Object();\npublic final Object ManageConnectionLock = new Object();\n\n\n\npublic BluetoothConnector(Context context, IBluetoothDataListener listener){\n    this(context, new Handler(Looper.getMainLooper()), listener);\n\n}\npublic BluetoothConnector(Context context, Handler UIHandler, IBluetoothDataListener listener){\n    Log.v(TAG, \"BluetoothConnector(context=\" + context + \", Handler=\" + UIHandler.getClass().getSimpleName() + \", IBluetoothDataListener=\" + listener.getClass().getSimpleName());\n    mContext = context;\n    mUIHandler = UIHandler;\n    mBluetoothDataListener = listener;\n\n}\n\n\npublic void makeThisDeviceDiscoverable(Activity callingActivity){\n    makeThisDeviceDiscoverable(callingActivity, BluetoothAdapter.getDefaultAdapter(), DEFAULT_DISCOVERABLE_DURATION_MS);\n\n}\npublic void makeThisDeviceDiscoverable(Activity callingActivity, BluetoothAdapter adapter){\n    makeThisDeviceDiscoverable(callingActivity, adapter, DEFAULT_DISCOVERABLE_DURATION_MS);\n\n}\npublic void makeThisDeviceDiscoverable(Activity callingActivity, int durationInMs){\n    makeThisDeviceDiscoverable(callingActivity, BluetoothAdapter.getDefaultAdapter(), durationInMs);\n\n}\npublic void makeThisDeviceDiscoverable(Activity callingActivity, BluetoothAdapter adapter, int durationInMs) {\n    Log.v(TAG, \"makeThisDeviceDiscoverable(callingActivity=\" + callingActivity.getClass().getSimpleName() + \", BluetoothAdapter=\" + (adapter == null ? \"null\" : adapter.getName()) + \", duration=\" + String.valueOf(durationInMs));\n    if(adapter == null){\n        Log.v(TAG, \"adapter is null\");\n\n    }else if(adapter.getScanMode() != BluetoothAdapter.SCAN_MODE_CONNECTABLE_DISCOVERABLE) {\n        Log.v(TAG, \"Launching Activity to request Discoverable Permission\");\n        Intent discoverableIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_DISCOVERABLE);\n        discoverableIntent.putExtra(BluetoothAdapter.EXTRA_DISCOVERABLE_DURATION, durationInMs);\n        callingActivity.startActivityForResult(discoverableIntent, ENABLE_DISCOVER_INTENT);\n\n    }else{\n        Log.v(TAG, \"adapter is already in SCAN MODE\");\n\n    }\n\n}\npublic void awaitConnectionFromDevice(){\n    awaitConnectionFromDevice(DEFAULT_UUID, BluetoothAdapter.getDefaultAdapter());\n\n}\npublic void awaitConnectionFromDevice(UUID commonKey){\n    awaitConnectionFromDevice(commonKey, BluetoothAdapter.getDefaultAdapter());\n\n}\npublic void awaitConnectionFromDevice(BluetoothAdapter adapter){\n    awaitConnectionFromDevice(DEFAULT_UUID, adapter);\n\n}\npublic void awaitConnectionFromDevice(UUID commonKey, BluetoothAdapter adapter){\n    Log.v(TAG, \"awaitConnectionFromDevice for UUID: \" + String.valueOf(commonKey) + \", BluetoothAdapter=\" + (adapter == null ? \"null\" : adapter.getName()));\n    cancelDiscovery();\n\n    synchronized (ServerSocketLock){\n        if(mServerSocketThread != null){\n            Log.v(TAG, \"Server Socket Thread was not null so canceling current Thread\");\n            mServerSocketThread.cancel();\n\n        }\n\n        Log.v(TAG, \"Attempting to Start new ServerThread\");\n        mServerSocketThread = new ServerSocketThread(commonKey, adapter);\n        mServerSocketThread.start();\n\n    }\n\n}\npublic void cancelAwaitingConnectionFromDevice(){\n    Log.v(TAG, \"cancelAwaitingConnectionFromDevice\");\n    synchronized (ServerSocketLock){\n        if(mServerSocketThread != null){\n            mServerSocketThread.cancel();\n            mServerSocketThread = null;\n            Log.v(TAG, \"canceling Server Socket Thread\");\n\n        }else{\n            Log.v(TAG, \"Server Socket null, so not canceling\");\n\n        }\n\n    }\n\n}\n\npublic void startDiscovery() {\n    startDiscovery(BluetoothAdapter.getDefaultAdapter());\n\n}\npublic void startDiscovery(BluetoothAdapter adapter){\n    Log.v(TAG, \"startDiscovery to find list of devices in range\");\n    adapter.startDiscovery();\n\n}\npublic void cancelDiscovery() {\n    cancelDiscovery(BluetoothAdapter.getDefaultAdapter());\n\n}\npublic void cancelDiscovery(BluetoothAdapter adapter){\n    Log.v(TAG, \"cancelDiscovery\");\n    adapter.cancelDiscovery();\n\n}\npublic void connectToDevice(BluetoothDevice device){\n    connectToDevice(device, DEFAULT_UUID);\n\n}\npublic void connectToDevice(BluetoothDevice device, UUID commonKey){\n    Log.v(TAG, \"connectToDevice(BluetoothDevice=\" + (device == null ? \"null\" : device.getName()) + \", UUID=\" + String.valueOf(commonKey));\n    synchronized (ClientSocketLock){\n        if(mClientSocketThread != null){\n            Log.v(TAG, \"Client Socket Thread was not null so canceling current Thread\");\n            mClientSocketThread.cancel();\n\n        }else{\n            Log.v(TAG, \"Client Socket Thread is NULL so not canceling\");\n\n        }\n\n        Log.v(TAG, \"ClientSocketThread Starting\");\n        mClientSocketThread = new ClientSocketThread(device, commonKey);\n        mClientSocketThread.start();\n\n    }\n\n}\npublic BluetoothDevice getBluetoothDeviceByMac(String mac){\n    Log.v(TAG, \"getBluetoothDeviceByMac(mac=\" + mac);\n    return getBluetoothDeviceByMac(mac, BluetoothAdapter.getDefaultAdapter());\n\n}\npublic BluetoothDevice getBluetoothDeviceByMac(String mac, BluetoothAdapter adapter) {\n    Log.v(TAG, \"getBluetoothDeviceByMac(mac=\" + mac + \", BluetoothAdapter=\" + (adapter == null ? \"null\" : adapter.getName()));\n    return adapter.getRemoteDevice(mac);\n\n}\n\npublic ArrayList&lt;KeyValueModel&gt; getPairedDevices(){\n    return getPairedDevices(BluetoothAdapter.getDefaultAdapter());\n}\npublic ArrayList&lt;KeyValueModel&gt; getPairedDevices(BluetoothAdapter adapter){\n    ArrayList&lt;KeyValueModel&gt; bondedDevices = new ArrayList&lt;KeyValueModel&gt;();\n\n    Set&lt;BluetoothDevice&gt; pairedDevices = adapter.getBondedDevices();\n    Log.v(TAG, \"getPairedDevices Found \" + pairedDevices.size() + \" number of paired devices\");\n\n    // If there are paired devices\n    if (pairedDevices.size() &gt; 0) {\n        // Loop through paired devices\n        for (BluetoothDevice device : pairedDevices) {\n            // Add the name and address to an array adapter to show in a ListView\n            bondedDevices.add(new KeyValueModel(device.getAddress(), device.getName()));\n\n        }\n    }\n\n    return bondedDevices;\n}\npublic static void unpairDevice(BluetoothDevice device){\n    Log.v(TAG, \"unpairDevice\");\n    try{\n        Method method = device.getClass().getMethod(\"removeBond\", (Class[]) null);\n        method.invoke(device, (Object[]) null);\n\n    }catch (Exception ex){\n        Log.e(TAG, \"Error Unpairing Device: \" + ex.getMessage());\n\n    }\n}\npublic boolean sendDataToConnectedDevice(byte[] data){\n    Log.v(TAG, \"sendDataToConnectedDevice\");\n    synchronized (ManageConnectionLock){\n        mManageConnectionThread.write(data);\n        return true;\n\n    }\n\n}\npublic void setBluetoothDataListener(IBluetoothDataListener listener){\n    mBluetoothDataListener = listener;\n}\npublic boolean getIsConnected(){\n    synchronized (ManageConnectionLock) {\n        return mManageConnectionThread != null &amp;&amp; mManageConnectionThread.isAlive();\n\n    }\n}\n\nprivate void startManageConnectionThread(BluetoothSocket socket){\n    Log.v(TAG, \"startManageConnectionThread for Socket: \" + (socket == null ? \"null\" : socket.getClass().getSimpleName()));\n    synchronized (ManageConnectionLock) {\n        mManageConnectionThread = new ManageConnectionThread(socket);\n        mManageConnectionThread.start();\n\n    }\n\n}\nprivate void handleDataReceivedFromConnectedDevice(final byte[] bytes){\n    Log.v(TAG, \"handleDataReceivedFromConnectedDevice\");\n    Log.v(TAG, \"bytes to Listener: \" + new String(bytes));\n\n    if(mUIHandler != null &amp;&amp; mBluetoothDataListener != null){\n        mUIHandler.post(new Runnable() {\n            @Override\n            public void run() {\n                if (mBluetoothDataListener != null) {\n                    mBluetoothDataListener.onReceivedPayloadFromConnectedDevice(bytes);\n\n                }\n\n            }\n\n        });\n\n    }else{\n        Log.v(TAG, \"UIHandler was null so skipped sending payload to listener\");\n\n    }\n\n}\nprivate void handleConnected(){\n    Log.e(TAG, \"handleConnected\");\n    if(mUIHandler != null &amp;&amp; mBluetoothDataListener != null){\n        mUIHandler.post(new Runnable() {\n            @Override\n            public void run() {\n                if(mBluetoothDataListener != null){\n                    mBluetoothDataListener.onConnectedToTargetDevice();\n\n                }\n\n            }\n\n        });\n\n    }else{\n        Log.v(TAG, \"UIHandler was null so skipped sending payload to listener\");\n\n    }\n\n}\nprivate void handleDisconnected(){\n    Log.e(TAG, \"handleDisconnected\");\n    if(mUIHandler != null &amp;&amp; mBluetoothDataListener != null){\n        mUIHandler.post(new Runnable() {\n            @Override\n            public void run() {\n                if(mBluetoothDataListener != null){\n                    mBluetoothDataListener.onDisconnectedFromTargetDevice();\n\n                }\n            }\n        });\n\n    }else{\n        Log.v(TAG, \"UIHandler or Listener was null so skipped sending payload to listener\");\n\n    }\n}\nprivate void handleFailedToConnectAsServer(final Exception ex){\n    Log.e(TAG, \"handleFailedToConnectAsServer ex:  \" + ex.getMessage());\n    if(mUIHandler != null &amp;&amp; mBluetoothDataListener != null){\n        mUIHandler.post(new Runnable() {\n            @Override\n            public void run() {\n                if(mBluetoothDataListener != null){\n                    mBluetoothDataListener.onFailedToReceiveConnectionFromTargetDevice(ex);\n\n                }\n            }\n        });\n\n    }else{\n        Log.v(TAG, \"UIHandler or Listener was null so skipped sending payload to listener\");\n\n    }\n\n}\nprivate void handleFailedToConnectAsClient(final Exception ex){\n    Log.e(TAG, \"handleFailedToConnectAsClient ex:  \" + ex.getMessage());\n    if(mUIHandler != null &amp;&amp; mBluetoothDataListener != null){\n        mUIHandler.post(new Runnable() {\n            @Override\n            public void run() {\n                if(mBluetoothDataListener != null){\n                    mBluetoothDataListener.onFailedToConnectToTargetDevice(ex);\n\n                }\n            }\n        });\n\n    }else{\n        Log.v(TAG, \"UIHandler or Listener was null so skipped sending payload to listener\");\n\n    }\n}\nprivate void handleErrorInRetrievingData(final Exception ex){\n    Log.e(TAG, \"handleErrorInRetrievingData ex:  \" + ex.getMessage());\n    if(mUIHandler != null &amp;&amp; mBluetoothDataListener != null){\n        mUIHandler.post(new Runnable() {\n            @Override\n            public void run() {\n                if(mBluetoothDataListener != null){\n                    mBluetoothDataListener.onErrorReceivingPayloadFromConnectedDevice(ex);\n\n                }\n\n            }\n        });\n\n    }else{\n        Log.v(TAG, \"UIHandler or Listener was null so skipped sending payload to listener\");\n\n    }\n\n}\nprivate void handleFailedToSendDataToConnectedDevice(final Exception ex){\n    Log.e(TAG, \"handleFailedToSendDataToConnectedDevice ex:  \" + ex.getMessage());\n    if(mUIHandler != null &amp;&amp; mBluetoothDataListener != null){\n        mUIHandler.post(new Runnable() {\n            @Override\n            public void run() {\n                if(mBluetoothDataListener != null){\n                    mBluetoothDataListener.onFailedToSendDataToConnectedDevice(ex);\n\n                }\n\n            }\n        });\n\n    }else{\n        Log.v(TAG, \"UIHandler or Listener was null so skipped sending payload to listener\");\n\n    }\n\n}\nprivate void toastMessage(final String value){\n    if(!mIsToastEnabled || mUIHandler == null) {\n        return;\n    }\n\n    mUIHandler.post(new Runnable() {\n        @Override\n        public void run() {\n            try{\n                Toast.makeText(mContext, value, Toast.LENGTH_SHORT).show();\n\n            }catch(Exception ex){\n                Log.v(TAG, \"Error Toasting, possibly bad handler, or context: \" + ex.getMessage());\n\n            }\n        }\n    });\n}\n\n\nprivate class ServerSocketThread extends Thread{\n\n    private final String TAG = Globals.SEARCH_STRING + ServerSocketThread.class.getSimpleName();\n    private final BluetoothServerSocket mServerSocket;\n\n    public ServerSocketThread(UUID commonKey, BluetoothAdapter adapter) {\n        Log.v(TAG, \"ServerSocketThread Constructor\");\n        BluetoothServerSocket tmp = null;\n\n        try {\n            Log.v(TAG, \"listening for RFComas Server: \" + DEFAULT_SERVER_NAME_FOR_APP + \", and commonKey: \" + String.valueOf(commonKey));\n            // MY_UUID is the app's UUID string, also used by the client code\n            tmp = adapter.listenUsingRfcommWithServiceRecord(DEFAULT_SERVER_NAME_FOR_APP, commonKey);\n            toastMessage(\"Listening for RFComm As Server on UUID: \" + String.valueOf(commonKey));\n\n        } catch (IOException e) {\n            Log.e(TAG, \"Error creating ServerSocket: \" + e.getMessage());\n            toastMessage(\"Error Creating ServerSocket: \" + e.getMessage());\n\n        }\n\n        mServerSocket = tmp;\n\n    }\n\n    public void run() {\n        Log.v(TAG, \"ServerSocket run\");\n        BluetoothSocket socket = null;\n        // Keep listening until exception occurs or a socket is returned\n        while (mServerSocket != null) {\n            try {\n                Log.v(TAG, \"ServerSocket.accept()\");\n                toastMessage(\"ServerSocket.accept()\");\n                //Waits for Client Connection to pass Socket, then we close down\n                socket = mServerSocket.accept();\n\n            } catch (IOException e) {\n                Log.e(TAG, \"ServerSocket.accept() Error: \" + e.getMessage());\n                toastMessage(\"ServerSocket.accept() Error: \" + e.getMessage());\n                handleFailedToConnectAsServer(e);\n                break;\n\n            }\n\n            // If a connection was accepted we don't need to keep server listening, so close unless multiple client/server connections is desired\n            if (socket != null) {\n                try{\n                    Log.v(TAG, \"ServerSocket Accepted Client Socket, Begin Listening Connect Thread\");\n                    toastMessage(\"ServerSocket Accepted Client Socket, Begin Listening Connect Thread\");\n                    // Do work to manage the connection (in a separate thread)\n                    startManageConnectionThread(socket);\n                    //mServerSocket.close();\n\n                }catch(Exception ex){\n                    Log.e(TAG, \"Exception closing Server Socket\");\n\n                }\n\n                //break; //Add in Break if you want to shut down listening for connections\n            }else{\n                Log.v(TAG, \"Socket wasn't accepted\");\n                toastMessage(\"Socket wasn't accepted\");\n                handleFailedToConnectAsServer(new Exception(\"Socket is Null\"));\n\n            }\n        }\n\n        Log.v(TAG, \"Exiting Server Accept Thread\");\n    }\n    public void cancel() {\n        try {\n            Log.v(TAG, \"ServerSocketThread Canceled\");\n            mServerSocket.close();\n\n        } catch (IOException e) {\n            Log.e(TAG, \"ServerSocketThread Error: \" + e.getMessage());\n\n        }\n    }\n\n}\nprivate class ClientSocketThread extends Thread{\n\n    private BluetoothSocket mSocket;\n    private final BluetoothDevice mDevice;\n\n    public ClientSocketThread(BluetoothDevice device, UUID commonKey) {\n        Log.v(TAG, \"ClientSocketThread Constructor\");\n        // Use a temporary object that is later assigned to mmSocket,\n        // because mmSocket is final\n        BluetoothSocket tmp = null;\n        mDevice = device;\n\n        // Get a BluetoothSocket to connect with the given BluetoothDevice\n        try {\n            Log.v(TAG, \"Client creating RFComm Socket to Server with UUID: \" + String.valueOf(commonKey));\n            toastMessage(\"Client creating RFComm Socket to Server with UUID: \" + String.valueOf(commonKey));\n            // MY_UUID is the app's UUID string, also used by the server code\n            tmp = device.createRfcommSocketToServiceRecord(commonKey);\n\n        } catch (IOException e) {\n            Log.e(TAG, \"Error creating Client Socket: \" + e.getMessage());\n            toastMessage(\"Creating Socket Exception: \" + e.getMessage());\n            handleFailedToConnectAsClient(e);\n\n        }\n\n        mSocket = tmp;\n\n    }\n\n    public void run() {\n        try {\n            if(mSocket == null){\n                Log.e(TAG, \"Error Client Socket is Null, Canceling Client Thread\");\n                return;\n\n            }\n\n            Log.v(TAG, \"Client Connecting\");\n            // Connect to the server, or timeout eventually\n            toastMessage(\"Client Connecting\");\n            mSocket.connect();\n\n        } catch (IOException connectException) {\n            // Unable to connect; close the socket and try the fallback method of reflection with port to connect\n            try {\n                Log.e(\"\", \"trying fallback...\");\n                toastMessage(\"Client Connection Failed Exception: \" + connectException.getMessage());\n\n                mSocket = (BluetoothSocket) mDevice.getClass().getMethod(\"createRfcommSocket\", new Class[]{int.class}).invoke(mDevice, 1);\n                toastMessage(\"Client Connect Again Attempt 2, but with fall back Reflection and port\");\n                Log.v(TAG, \"Client Connect Again Attempt 2, but with fall back Reflection and port\");\n                mSocket.connect();\n\n                Log.e(\"\", \"Connected\");\n                toastMessage(\"Client Connected\");\n\n            } catch (Exception ex) {\n                Log.e(\"\", \"Couldn't establish Bluetooth connection!\");\n                toastMessage(\"Client Couldn't Establish Connection to Server: \" + ex.getMessage());\n                handleFailedToConnectAsClient(ex);\n                return;\n\n            }\n        }\n\n        // Do work to manage the connection (in a separate thread)\n        startManageConnectionThread(mSocket);\n    }\n    public void cancel() {\n        try {\n            Log.v(TAG, \"Client Socket cancel\");\n            mSocket.close();\n\n        } catch (IOException e) {\n            Log.e(TAG, \"Error Closing Socket\");\n\n        }\n    }\n\n}\nprivate class ManageConnectionThread extends Thread {\n\n    /////////////\n    // MEMBERS //\n    /////////////\n    private final String TAG = Globals.SEARCH_STRING + ManageConnectionThread.class.getSimpleName();\n    private final BluetoothSocket mSocket;\n    private final InputStream mInStream;\n    private final OutputStream mOutStream;\n\n\n    //////////////////\n    //  CONSTRUCTOR //\n    //////////////////\n    public ManageConnectionThread(BluetoothSocket socket) {\n        mSocket = socket;\n\n        handleConnected();\n        InputStream tmpIn = null;\n        OutputStream tmpOut = null;\n\n        // Get the input and output streams, using temp objects because\n        try {\n            Log.v(TAG, \"ManageConnectionThread Constructor\");\n            Log.v(TAG, \"Connected to Socket = \" + String.valueOf(socket.isConnected()));\n            toastMessage(\"Listening for input or output Stream\");\n            Log.v(TAG, \"Get InputStream\");\n            tmpIn = socket.getInputStream();\n            Log.v(TAG, \"Get OutputStream\");\n            tmpOut = socket.getOutputStream();\n\n        } catch (IOException e) {\n            Log.e(TAG, \"Error getting Socket Streams: \" + e.getMessage());\n            toastMessage(\"Connect Thread: Error: \" + e.getMessage());\n            handleErrorInRetrievingData(e);\n\n        }\n\n        mInStream = tmpIn;\n        mOutStream = tmpOut;\n    }\n\n\n    ///////////////\n    // OVERRIDES //\n    ///////////////\n    public void run() {\n        // Keep listening to the InputStream until an exception occurs\n        while (true) {\n            try {\n                // Read from the InputStream\n                byte[] data = new byte[16384];\n                int nRead;\n                ByteArrayOutputStream buffer = new ByteArrayOutputStream();\n\n                while ((nRead = mInStream.read(data, 0, data.length)) != -1) {\n                    //Log.v(TAG, \"bytes Read: \" + String.valueOf(nRead));\n                    buffer.write(data, 0, nRead);\n\n                    //TODO Find better way to find End Of Message rather than looking for }\n                    String temp = new String(buffer.toByteArray());\n                    //Log.v(TAG, \"current Data: \" + temp);\n                    if(temp.contains(\"}\")){\n                        Log.v(TAG, \"bytes reading complete\");\n                        handleDataReceivedFromConnectedDevice(buffer.toByteArray());\n                        buffer.flush();\n                        buffer = new ByteArrayOutputStream();\n\n                    }else{\n                        Log.v(TAG, \"More bytes Available\");\n\n                    }\n\n                }\n\n            } catch (IOException e) {\n                Log.e(TAG, \"Error reading inputStream\");\n                handleErrorInRetrievingData(e);\n                break;\n\n            }\n\n        }\n\n        Log.v(TAG, \"Exiting Managed Connection Thread\");\n        handleDisconnected();\n\n    }\n\n\n    /////////////\n    // METHODS //\n    /////////////\n    public void write(byte[] bytes) {\n        try {\n            Log.v(TAG, \"ManageConnectionThread write(bytes)\");\n            mOutStream.write(bytes);\n\n        } catch (IOException e) {\n            Log.e(TAG, \"Error Writing Stream: \" + e.getMessage());\n            handleFailedToSendDataToConnectedDevice(e);\n\n        }\n    }\n    public void cancel() {\n        try {\n            Log.v(TAG, \"ManageConnectionThread cancel\");\n            handleDisconnected();\n            mSocket.close();\n\n        } catch (IOException e) {\n            Log.e(TAG, \"Error Closing BluetoothSocket: \" + e.getMessage());\n\n        }\n    }\n\n}\n\n\npublic interface IBluetoothDataListener{\n\n    //////////////////////\n    // OVERRIDE METHODS //\n    //////////////////////\n    void onReceivedPayloadFromConnectedDevice(byte[] payload);\n    void onErrorReceivingPayloadFromConnectedDevice(Exception ex);\n    void onFailedToConnectToTargetDevice(Exception ex);\n    void onFailedToReceiveConnectionFromTargetDevice(Exception ex);\n    void onFailedToSendDataToConnectedDevice(Exception ex);\n    void onConnectedToTargetDevice();\n    void onDisconnectedFromTargetDevice();\n\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Then of course you will want to make sure you have your broadcast receivers setup:</p>\n\n<pre><code> &lt;receiver\n        android:name=\".receivers.BluetoothChangedReceiver\"\n        android:enabled=\"true\" &gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=\"android.bluetooth.adapter.action.STATE_CHANGED\" /&gt;\n            &lt;action android:name=\"android.bluetooth.adapter.action.SCAN_MODE_CHANGED\" /&gt;\n            &lt;action android:name=\"android.bluetooth.adapter.action.DISCOVERY_STARTED\" /&gt;\n            &lt;action android:name=\"android.bluetooth.adapter.action.DISCOVERY_FINISHED\" /&gt;\n            &lt;action android:name=\"android.bluetooth.adapter.action.CONNECTION_STATE_CHANGED\" /&gt;\n            &lt;action android:name=\"android.bluetooth.device.action.FOUND\" /&gt;\n            &lt;action android:name=\"android.bluetooth.device.action.DISAPPEARED\" /&gt;\n        &lt;/intent-filter&gt;\n    &lt;/receiver&gt;\n\n    &lt;receiver\n        android:name=\".receivers.BluetoothDeviceReceiver\"\n        android:enabled=\"true\" &gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=\"android.bluetooth.device.action.FOUND\" /&gt;\n            &lt;action android:name=\"android.bluetooth.device.action.DISAPPEARED\" /&gt;\n            &lt;action android:name=\"android.bluetooth.device.action.ACL_CONNECTED\" /&gt;\n            &lt;action android:name=\"android.bluetooth.device.action.ACL_DISCONNECTED\" /&gt;\n            &lt;action android:name=\"android.bluetooth.device.action.ACTION_ACL_DISCONNECT_REQUESTED\" /&gt;\n            &lt;action android:name=\"android.bluetooth.device.action.BOND_STATE_CHANGED\" /&gt;\n            &lt;action android:name=\"android.bluetooth.device.action.UUID\" /&gt;\n        &lt;/intent-filter&gt;\n    &lt;/receiver&gt;\n</code></pre>\n"}], "owner": {"reputation": 1165, "user_id": 4145397, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/NP13i.jpg?s=128&g=1", "display_name": "92AlanC", "link": "https://stackoverflow.com/users/4145397/92alanc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1924, "favorite_count": 1, "accepted_answer_id": 46290020, "answer_count": 1, "score": 0, "last_activity_date": 1505781074, "creation_date": 1505774901, "question_id": 46289221, "link": "https://stackoverflow.com/questions/46289221/bluetoothsocket-not-connecting-to-target-device", "title": "BluetoothSocket not connecting to target device", "body": "<p>I'm trying to connect my device to another one via Bluetooth, but when I select the device I want to connect with, I get an <code>IOException</code> saying </p>\n\n<blockquote>\n  <p>read failed, socket might closed or timeout, read ret: -1 </p>\n</blockquote>\n\n<p>Just to illustrate how my app works, I have a <code>RecyclerView</code> populated with the devices my Bluetooth scan has found, then when I click an item the app is supposed to connect with that device.</p>\n\n<p>Below is my the code for my connection thread:</p>\n\n<pre><code>private val MY_UUID = UUID.fromString(\"00001101-0000-1000-8000-00805f9b34fb\")\n\nprivate lateinit var device: BluetoothDevice\nprivate lateinit var onDeviceActionListener: OnDeviceActionListener\nprivate lateinit var socket: BluetoothSocket\n\nfun init(device: BluetoothDevice,\n         onDeviceActionListener: OnDeviceActionListener): ConnectionThread {\n    this.device = device\n    this.onDeviceActionListener = onDeviceActionListener\n    try {\n        socket = device.createRfcommSocketToServiceRecord(MY_UUID)\n    } catch (e: IOException) {\n        Log.e(TAG, \"Error creating socket\", e)\n    }\n    return this\n}\n\noverride fun run() {\n    try {\n        socket.connect()\n    } catch (openException: IOException) {\n        Log.e(TAG, \"Error opening connection. Trying to close...\", openException)\n        try {\n            socket.close()\n        } catch (closeException: IOException) {\n            Log.e(TAG, \"Error closing socket\", closeException)\n        }\n        return\n    }\n    onDeviceActionListener.onDeviceConnect(device)\n}\n</code></pre>\n\n<p>My guess is there is something wrong with my UUID. I've tried some other values but still didn't work.</p>\n\n<p>Any help will be much appreciated.</p>\n"}, {"tags": ["android", "kotlin", "alert", "anko"], "comments": [{"owner": {"reputation": 21170, "user_id": 2949612, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/RLdcF.png?s=128&g=1", "display_name": "pRaNaY", "link": "https://stackoverflow.com/users/2949612/pranay"}, "edited": false, "score": 1, "creation_date": 1505793879, "post_id": 46288529, "comment_id": 79545837, "body": "Can we see some code which you are trying to open progressDialog?"}], "owner": {"reputation": 556, "user_id": 7480923, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8fcb1aa2b43bf2bb7d943fd1b62664c7?s=128&d=identicon&r=PG", "display_name": "Julian Torregrosa", "link": "https://stackoverflow.com/users/7480923/julian-torregrosa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 508, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1505771982, "creation_date": 1505770372, "last_edit_date": 1505771982, "question_id": 46288529, "link": "https://stackoverflow.com/questions/46288529/change-buttons-text-and-progressbar-colors-with-anko", "title": "Change buttons text and progressbar colors with Anko", "body": "<p>I need to change the default text colors of Anko alerts. I have the same problem with progressbars inside progressDialogs. It would be nice to customize them and even the description/title text colors or the alerts background colors.</p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 4, "creation_date": 1505753948, "post_id": 46284545, "comment_id": 79532182, "body": "Yes. Did you try? <code>src&#47;main&#47;java</code> and <code>src&#47;main&#47;kotlin</code> . <a href=\"https://developer.android.com/kotlin/get-started.html#add-kotlin\" rel=\"nofollow noreferrer\">developer.android.com/kotlin/get-started.html#add-kotlin</a>"}, {"owner": {"reputation": 1853, "user_id": 7543771, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/nWUXl.jpg?s=128&g=1", "display_name": "Zafar Kurbonov", "link": "https://stackoverflow.com/users/7543771/zafar-kurbonov"}, "reply_to_user": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1505754090, "post_id": 46284545, "comment_id": 79532263, "body": "Didnt get exactly what you  meant @cricket_007?"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1505757457, "post_id": 46284545, "comment_id": 79533994, "body": "Read the link ;)"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1505757886, "post_id": 46284545, "comment_id": 79534200, "body": "What do you mean by non-primitive fields? <a href=\"https://ideone.com/QNURYB\" rel=\"nofollow noreferrer\">ideone.com/QNURYB</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1853, "user_id": 7543771, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/nWUXl.jpg?s=128&g=1", "display_name": "Zafar Kurbonov", "link": "https://stackoverflow.com/users/7543771/zafar-kurbonov"}, "edited": false, "score": 0, "creation_date": 1505754127, "post_id": 46284622, "comment_id": 79532281, "body": "Yes I can create, But how about merging two Languages together to work on"}, {"owner": {"reputation": 11295, "user_id": 5558150, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k9GtP.jpg?s=128&g=1", "display_name": "Bhuvanesh BS", "link": "https://stackoverflow.com/users/5558150/bhuvanesh-bs"}, "reply_to_user": {"reputation": 1853, "user_id": 7543771, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/nWUXl.jpg?s=128&g=1", "display_name": "Zafar Kurbonov", "link": "https://stackoverflow.com/users/7543771/zafar-kurbonov"}, "edited": false, "score": 1, "creation_date": 1505754953, "post_id": 46284622, "comment_id": 79532722, "body": "Why not its interoperable. So you can call java codes from kotlin and vise versa"}, {"owner": {"reputation": 6601, "user_id": 5457853, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ee94ffac93a9a507abbbbd679f4779a?s=128&d=identicon&r=PG&f=1", "display_name": "Thracian", "link": "https://stackoverflow.com/users/5457853/thracian"}, "edited": false, "score": 0, "creation_date": 1505763281, "post_id": 46284622, "comment_id": 79536863, "body": "Do you have to write all code again for Kotlin, can Android Studio translate your existing Java code to Kotlin? I would like to migrate to Kotlin, since i&#39;m learning Swift now. I have 4 years of Java experience but i don&#39;t want to write all code for all my apps again."}, {"owner": {"reputation": 11295, "user_id": 5558150, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k9GtP.jpg?s=128&g=1", "display_name": "Bhuvanesh BS", "link": "https://stackoverflow.com/users/5558150/bhuvanesh-bs"}, "edited": false, "score": 0, "creation_date": 1505793536, "post_id": 46284622, "comment_id": 79545749, "body": "Don&#39;t write again. Android studio convert java code to kotlin. Control + Alt + shift + k, by this shortcut you can migrate your java code as kotlin. However, minor changes should be done by you to complete the operation."}], "tags": [], "owner": {"reputation": 11295, "user_id": 5558150, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k9GtP.jpg?s=128&g=1", "display_name": "Bhuvanesh BS", "link": "https://stackoverflow.com/users/5558150/bhuvanesh-bs"}, "is_accepted": false, "score": 3, "last_activity_date": 1505753981, "creation_date": 1505753981, "answer_id": 46284622, "question_id": 46284545, "link": "https://stackoverflow.com/questions/46284545/combine-java-with-kotlin-in-android/46284622#46284622", "title": "Combine Java with Kotlin in Android", "body": "<p>You can create a java similar <strong>static</strong> variables using <strong>companion object</strong>.</p>\n\n<p>You can easily create <strong>singleton</strong> in Kotlin using <strong>object</strong>.</p>\n\n<p>After I leant kotlin. I have migrated all my codes to Kotlin.</p>\n"}, {"tags": [], "owner": {"reputation": 265, "user_id": 7564505, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh5.googleusercontent.com/-zy50c_ccwjU/AAAAAAAAAAI/AAAAAAAAAbE/YX_EidktHZA/photo.jpg?sz=128", "display_name": "Leonardo Cavazzani", "link": "https://stackoverflow.com/users/7564505/leonardo-cavazzani"}, "is_accepted": false, "score": 5, "last_activity_date": 1505754018, "creation_date": 1505754018, "answer_id": 46284639, "question_id": 46284545, "link": "https://stackoverflow.com/questions/46284545/combine-java-with-kotlin-in-android/46284639#46284639", "title": "Combine Java with Kotlin in Android", "body": "<p>You can have in your project Java and Kotlin Class and Activities.</p>\n\n<p>The same Class can't have Java and Kotlin. \nYou can convert a Java file to Kotlin with <strong>Ctrl+Alt+Shift+K</strong> or just double tap SHIFT and search for <strong>Convert Java to Kotlin</strong></p>\n"}, {"tags": [], "owner": {"reputation": 7413, "user_id": 2032539, "user_type": "registered", "accept_rate": 7, "profile_image": "https://i.stack.imgur.com/eWqmm.jpg?s=128&g=1", "display_name": "Emanuel S", "link": "https://stackoverflow.com/users/2032539/emanuel-s"}, "is_accepted": false, "score": 1, "last_activity_date": 1505755031, "last_edit_date": 1505755031, "creation_date": 1505754529, "answer_id": 46284793, "question_id": 46284545, "link": "https://stackoverflow.com/questions/46284545/combine-java-with-kotlin-in-android/46284793#46284793", "title": "Combine Java with Kotlin in Android", "body": "<p>Even if it's interop you can't mix Java and Kotlin in the same file.</p>\n\n<p>If you really want to have static methods/variables you can use an <code>companion object</code>. You can also access create a \"real\" static method in your JVM by using <code>@JvmStatic</code>. </p>\n\n<p>Simple sample is:</p>\n\n<pre><code>companion object {  \n    @JvmStatic \n    fun newInstance() ) SampleFragment()\n}\n</code></pre>\n\n<p>which equals to</p>\n\n<pre><code>public static SampleFragment() { return new SampleFragment(); } \n</code></pre>\n\n<p>By using <code>@JvmStatic</code> you can use Java to access your Static methods like before.</p>\n"}, {"tags": [], "owner": {"reputation": 66307, "user_id": 599346, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/be66588cfacdbed6f5b7581e4eec4c95?s=128&d=identicon&r=PG", "display_name": "tyczj", "link": "https://stackoverflow.com/users/599346/tyczj"}, "is_accepted": true, "score": 38, "last_activity_date": 1505754746, "creation_date": 1505754746, "answer_id": 46284846, "question_id": 46284545, "link": "https://stackoverflow.com/questions/46284545/combine-java-with-kotlin-in-android/46284846#46284846", "title": "Combine Java with Kotlin in Android", "body": "<p>If your question is can you use kotlin files in java files and vice versa then the answer is yes.</p>\n\n<p>If you are asking if you can use kotlin syntax in java files and vice versa then the answer is no.</p>\n\n<p>To use kotlin code in a java class you are simply using the class like any other java class</p>\n"}], "owner": {"reputation": 1853, "user_id": 7543771, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/nWUXl.jpg?s=128&g=1", "display_name": "Zafar Kurbonov", "link": "https://stackoverflow.com/users/7543771/zafar-kurbonov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18380, "favorite_count": 7, "closed_date": 1505803906, "accepted_answer_id": 46284846, "answer_count": 4, "score": 23, "last_activity_date": 1505755031, "creation_date": 1505753697, "question_id": 46284545, "link": "https://stackoverflow.com/questions/46284545/combine-java-with-kotlin-in-android", "closed_reason": "Needs more focus", "title": "Combine Java with Kotlin in Android", "body": "<blockquote>\n  <p>I am slightly moving from Java to Kotlin in android app development,\n  but there are some cases where I don't want to code in Kotlin and want\n  those particular cases be written in Java: </p>\n</blockquote>\n\n<ul>\n<li>It is effort-saving that Kotlin removes extra usage of\n<code>findViewByIds</code></li>\n<li>I know that it is now <code>null-safety</code> which oppositely Java always triggered with <code>NullPointerException</code></li>\n<li><code>Lambda</code> expressions are also provided and many other features.</li>\n</ul>\n\n<p>But still, some of my codes cannot be written in Kotlin such as <code>static</code> members or <code>non-primitive</code> fields.</p>\n\n<p>Kotlin annotations actually can replace those <code>static members</code>. But love some coding features of Java and dont want to leave that.</p>\n\n<blockquote>\n  <p><strong>My question is can I combine Java and Kotlin together?</strong> </p>\n</blockquote>\n"}, {"tags": ["java", "spring-boot", "kotlin", "http-status-codes"], "comments": [{"owner": {"reputation": 8660, "user_id": 5749570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d2d0247d580de0aae4511d84551f10?s=128&d=identicon&r=PG&f=1", "display_name": "VHS", "link": "https://stackoverflow.com/users/5749570/vhs"}, "edited": false, "score": 1, "creation_date": 1505749639, "post_id": 46283086, "comment_id": 79529738, "body": "If you try status 103, does it work?"}, {"owner": {"reputation": 2035, "user_id": 3049524, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/Wa4ZB.png?s=128&g=1", "display_name": "Max Peng", "link": "https://stackoverflow.com/users/3049524/max-peng"}, "reply_to_user": {"reputation": 8660, "user_id": 5749570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d2d0247d580de0aae4511d84551f10?s=128&d=identicon&r=PG&f=1", "display_name": "VHS", "link": "https://stackoverflow.com/users/5749570/vhs"}, "edited": false, "score": 0, "creation_date": 1505750805, "post_id": 46283086, "comment_id": 79530465, "body": "@VHS No, it doesn&#39;t work."}, {"owner": {"reputation": 8660, "user_id": 5749570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d2d0247d580de0aae4511d84551f10?s=128&d=identicon&r=PG&f=1", "display_name": "VHS", "link": "https://stackoverflow.com/users/5749570/vhs"}, "edited": false, "score": 1, "creation_date": 1505750949, "post_id": 46283086, "comment_id": 79530564, "body": "And how about trying <code>ResponseEntity.status(HttpStatus.CHECKPOINT).build();</code> instead?"}, {"owner": {"reputation": 2035, "user_id": 3049524, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/Wa4ZB.png?s=128&g=1", "display_name": "Max Peng", "link": "https://stackoverflow.com/users/3049524/max-peng"}, "reply_to_user": {"reputation": 8660, "user_id": 5749570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d2d0247d580de0aae4511d84551f10?s=128&d=identicon&r=PG&f=1", "display_name": "VHS", "link": "https://stackoverflow.com/users/5749570/vhs"}, "edited": false, "score": 0, "creation_date": 1505751169, "post_id": 46283086, "comment_id": 79530709, "body": "Still with no luck."}, {"owner": {"reputation": 8660, "user_id": 5749570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d2d0247d580de0aae4511d84551f10?s=128&d=identicon&r=PG&f=1", "display_name": "VHS", "link": "https://stackoverflow.com/users/5749570/vhs"}, "edited": false, "score": 0, "creation_date": 1505751218, "post_id": 46283086, "comment_id": 79530746, "body": "I&#39;m afraid i can&#39;t be of further help. Hope you find a solution soon."}, {"owner": {"reputation": 2035, "user_id": 3049524, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/Wa4ZB.png?s=128&g=1", "display_name": "Max Peng", "link": "https://stackoverflow.com/users/3049524/max-peng"}, "reply_to_user": {"reputation": 8660, "user_id": 5749570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d2d0247d580de0aae4511d84551f10?s=128&d=identicon&r=PG&f=1", "display_name": "VHS", "link": "https://stackoverflow.com/users/5749570/vhs"}, "edited": false, "score": 0, "creation_date": 1505751615, "post_id": 46283086, "comment_id": 79530984, "body": "Thank you anyway."}, {"owner": {"reputation": 33671, "user_id": 453005, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Rjx6y.png?s=128&g=1", "display_name": "DwB", "link": "https://stackoverflow.com/users/453005/dwb"}, "edited": false, "score": 0, "creation_date": 1505752689, "post_id": 46283086, "comment_id": 79531577, "body": "define the phrase: &quot;request will always hang&quot; in your question."}, {"owner": {"reputation": 2035, "user_id": 3049524, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/Wa4ZB.png?s=128&g=1", "display_name": "Max Peng", "link": "https://stackoverflow.com/users/3049524/max-peng"}, "reply_to_user": {"reputation": 33671, "user_id": 453005, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Rjx6y.png?s=128&g=1", "display_name": "DwB", "link": "https://stackoverflow.com/users/453005/dwb"}, "edited": false, "score": 0, "creation_date": 1505752933, "post_id": 46283086, "comment_id": 79531697, "body": "@DwB I uploaded a screenshot in the gist."}, {"owner": {"reputation": 150, "user_id": 7883542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f708d88338755fe1a6651474486c77c?s=128&d=identicon&r=PG&f=1", "display_name": "boukobba adil", "link": "https://stackoverflow.com/users/7883542/boukobba-adil"}, "edited": false, "score": 0, "creation_date": 1505753532, "post_id": 46283086, "comment_id": 79531988, "body": "No matching constant for [105]. you should use the defined constant in HttpStatus enum."}, {"owner": {"reputation": 2035, "user_id": 3049524, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/Wa4ZB.png?s=128&g=1", "display_name": "Max Peng", "link": "https://stackoverflow.com/users/3049524/max-peng"}, "reply_to_user": {"reputation": 33671, "user_id": 453005, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Rjx6y.png?s=128&g=1", "display_name": "DwB", "link": "https://stackoverflow.com/users/453005/dwb"}, "edited": false, "score": 0, "creation_date": 1505784620, "post_id": 46283086, "comment_id": 79543782, "body": "@DwB No, I don&#39;t think so. If you try some other status, say 789, it works. This ticket says spring boot already implement that. <a href=\"https://jira.spring.io/browse/SPR-14205\" rel=\"nofollow noreferrer\">jira.spring.io/browse/SPR-14205</a>"}, {"owner": {"reputation": 46241, "user_id": 22982, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d1d5b668ad4b1fccb1a80e6789d11b5?s=128&d=identicon&r=PG", "display_name": "Brian Clozel", "link": "https://stackoverflow.com/users/22982/brian-clozel"}, "edited": false, "score": 0, "creation_date": 1505804060, "post_id": 46283086, "comment_id": 79549933, "body": "Could you &quot;curl -v&quot; this endpoint and post it here?"}, {"owner": {"reputation": 2035, "user_id": 3049524, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/Wa4ZB.png?s=128&g=1", "display_name": "Max Peng", "link": "https://stackoverflow.com/users/3049524/max-peng"}, "reply_to_user": {"reputation": 46241, "user_id": 22982, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d1d5b668ad4b1fccb1a80e6789d11b5?s=128&d=identicon&r=PG", "display_name": "Brian Clozel", "link": "https://stackoverflow.com/users/22982/brian-clozel"}, "edited": false, "score": 0, "creation_date": 1505808243, "post_id": 46283086, "comment_id": 79552611, "body": "@BrianClozel please see the gif I create above."}, {"owner": {"reputation": 33671, "user_id": 453005, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Rjx6y.png?s=128&g=1", "display_name": "DwB", "link": "https://stackoverflow.com/users/453005/dwb"}, "edited": false, "score": 0, "creation_date": 1505843005, "post_id": 46283086, "comment_id": 79575331, "body": "try sending a 1xx response with a simple servlet.  The problem may not be with spring, but with the container (tomcat or other)"}], "answers": [{"tags": [], "owner": {"reputation": 6882, "user_id": 1526192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b1e6d193a83e029043203ba8195c68a?s=128&d=identicon&r=PG", "display_name": "Phil Webb", "link": "https://stackoverflow.com/users/1526192/phil-webb"}, "is_accepted": false, "score": 1, "last_activity_date": 1505844950, "creation_date": 1505844950, "answer_id": 46307257, "question_id": 46283086, "link": "https://stackoverflow.com/questions/46283086/spring-boot-request-hang-there-when-return-1xx-status-code/46307257#46307257", "title": "Spring boot request hang there when return 1xx status code", "body": "<p>As far as I can tell the Spring <code>DispacherServlet</code> is handling the different return codes in exactly the same way. I think what's happening is curl is just leaving the connection open because the response is in the <code>1xx</code> range.</p>\n\n<p><a href=\"http://www.informit.com/articles/article.aspx?p=29817&amp;seqNum=7\" rel=\"nofollow noreferrer\">This article</a> provides a good primer on status codes. This sentence in particular is relevant:</p>\n\n<blockquote>\n  <p>100\u2013199 Codes in the 100s are informational, indicating that the client should respond with some other action. </p>\n</blockquote>\n\n<p>If you run <code>curl</code> with <code>--trace</code> you'll see that the <code>105</code> response does actually arrive:</p>\n\n<pre><code>curl -v -trace http://localhost:8080/hello                                                                                                                                                                                                                                                                                                 \nTrying ::1...\nTCP_NODELAY set\nConnected to localhost (::1) port 8080 (#0)\n&gt; GET /hello HTTP/1.1\n&gt; Host: localhost:8080\n&gt; User-Agent: curl/7.54.0\n&gt; Accept: */*\n&gt; \n&lt; HTTP/1.1 105 \n&lt; Date: Tue, 19 Sep 2017 18:07:04 GMT\n^C\n</code></pre>\n\n<p>So what I think is happening is the response is returned, the client should respond with some other action (but doesn't) so it looks like the thing has hung.</p>\n\n<p>Probably the real question here is why are you trying to return a <code>105</code> status and what do you expect to happen?</p>\n"}, {"comments": [{"owner": {"reputation": 505, "user_id": 2340484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/625d8bd27e0c0092266140de5caee252?s=128&d=identicon&r=PG", "display_name": "charlb", "link": "https://stackoverflow.com/users/2340484/charlb"}, "edited": false, "score": 3, "creation_date": 1564643659, "post_id": 51619832, "comment_id": 101100106, "body": "We did a workaround for this scenario by stripping the http header &quot;Expect: 100-continue&quot; in spring cloud gateway using RemoveRequestHeader GatewayFilter."}], "tags": [], "owner": {"reputation": 150, "user_id": 922574, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6d2d9b1fc419602e85eed1488af8af3c?s=128&d=identicon&r=PG", "display_name": "Tiris", "link": "https://stackoverflow.com/users/922574/tiris"}, "is_accepted": true, "score": 0, "last_activity_date": 1533061542, "creation_date": 1533061542, "answer_id": 51619832, "question_id": 46283086, "link": "https://stackoverflow.com/questions/46283086/spring-boot-request-hang-there-when-return-1xx-status-code/51619832#51619832", "title": "Spring boot request hang there when return 1xx status code", "body": "<p>I also ran into this issue and found that it is not Spring that creates this behavior. It is Tomcat.</p>\n\n<pre><code>curl -v --header \"Expect: 100-continue\" http://localhost:8080\n</code></pre>\n\n<p>Calling any configured endpoint like this will return an extra response code that doesn't terminate the request.</p>\n\n<pre><code>  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                             Dload  Upload   Total   Spent    Left  Speed\n  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   \nTrying ::1...\n* TCP_NODELAY set\n* Connected to localhost (::1) port 8080 (#0)\n&gt; GET / HTTP/1.1\n&gt; Host: localhost:8080\n&gt; User-Agent: curl/7.56.1\n&gt; Accept: */*\n&gt; Expect: 100-continue\n&gt;\n&lt; HTTP/1.1 100\n&lt; HTTP/1.1 200\n&lt; Set-Cookie: JSESSIONID=9355141A10CF546E9A9A43F5A5C0B1A4; Path=/; HttpOnly\n&lt; Content-Type: text/html;charset=ISO-8859-1\n&lt; Content-Length: 58\n&lt; Date: Tue, 31 Jul 2018 17:27:52 GMT\n&lt;\n{ [58 bytes data]\n100    58  100    58    0     0     58      0  0:00:01 --:--:--  0:00:01    82&lt;html&gt;\n&lt;body&gt;\n&lt;h2&gt;Hello Heroku!&lt;/h2&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n\n* Connection #0 to host localhost left intact\n</code></pre>\n\n<p>note the <code>HTTP/1.1 100</code></p>\n\n<p>This response came from this project <a href=\"https://devcenter.heroku.com/articles/create-a-java-web-application-using-embedded-tomcat\" rel=\"nofollow noreferrer\">https://devcenter.heroku.com/articles/create-a-java-web-application-using-embedded-tomcat</a> which doesn't have spring. If I modify the <code>HelloServlet</code> to include a response code of 100 it just hangs.</p>\n\n<p>Looking deeper:\n<a href=\"https://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html#sec8.2.3\" rel=\"nofollow noreferrer\">https://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html#sec8.2.3</a></p>\n\n<p>The specification makes it clear that the 100 response is supposed to happen in the same request. The reason it hangs is because it is expecting the client to respond with the content of the request.</p>\n\n<p>Looking at the wiki for other 1XX response codes, it appears to also be true that some information is returned without closing the request. My guess is that Tomcat expects all 1xx response codes to act in this manner.</p>\n"}], "owner": {"reputation": 2035, "user_id": 3049524, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/Wa4ZB.png?s=128&g=1", "display_name": "Max Peng", "link": "https://stackoverflow.com/users/3049524/max-peng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2566, "favorite_count": 1, "accepted_answer_id": 51619832, "answer_count": 2, "score": 2, "last_activity_date": 1533061542, "creation_date": 1505748570, "last_edit_date": 1592644375, "question_id": 46283086, "link": "https://stackoverflow.com/questions/46283086/spring-boot-request-hang-there-when-return-1xx-status-code", "title": "Spring boot request hang there when return 1xx status code", "body": "<p>I have a small demo to play with customized status code.</p>\n<p>The interesting part is the request will always hang there if the status is below 200, like 105, 199, etc. But works for any status greater than 200, like 209, 789 etc.</p>\n<p>Http status code registry, refer to <a href=\"https://www.iana.org/assignments/http-status-codes/http-status-codes.xhtml\" rel=\"nofollow noreferrer\">https://www.iana.org/assignments/http-status-codes/http-status-codes.xhtml</a></p>\n<blockquote>\n<p>Spring boot: 1.5.4.RELEASE with embedded tomcat</p>\n<p>Java: 8</p>\n</blockquote>\n<p>Controller:</p>\n<pre><code>@RestController\npublic class DemoController {\n\n    @GetMapping(&quot;/hello&quot;)\n    public ResponseEntity get() {\n        return ResponseEntity.status(105).build();\n    }\n}\n</code></pre>\n<p>Can anyone give me a clear explanation?</p>\n<p>I create a gist at here: <a href=\"https://gist.github.com/pengisgood/dbea1fcdc45c2bb5809871c7f020b800\" rel=\"nofollow noreferrer\">https://gist.github.com/pengisgood/dbea1fcdc45c2bb5809871c7f020b800</a></p>\n<p><strong>Update:</strong></p>\n<p>I also create a small demo to reproduce it at here:\n<a href=\"https://github.com/pengisgood/springboot-customize-status-code\" rel=\"nofollow noreferrer\">https://github.com/pengisgood/springboot-customize-status-code</a></p>\n<p><strong>Update:</strong></p>\n<p>After I run <code>curl -v localhost:8080/hello</code>, I can see the status, but the response doesn't finish. Refer to the gif below:</p>\n<p><a href=\"https://i.stack.imgur.com/GVyZa.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GVyZa.gif\" alt=\"curl result\" /></a></p>\n"}, {"tags": ["spring", "mongodb", "spring-mvc", "spring-boot", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 8935, "user_id": 7637657, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5QJPu.jpg?s=128&g=1", "display_name": "Alexander Romanov", "link": "https://stackoverflow.com/users/7637657/alexander-romanov"}, "is_accepted": true, "score": 14, "last_activity_date": 1505745049, "creation_date": 1505745049, "answer_id": 46281887, "question_id": 46281830, "link": "https://stackoverflow.com/questions/46281830/i-cant-exclude-mongoautoconfiguration-in-springboot-kotlin-mongosocketopenexce/46281887#46281887", "title": "I can&#39;t exclude MongoAutoConfiguration in Springboot-Kotlin (MongoSocketOpenException)", "body": "<p>There's no java-like array initialization in <strong>Kotlin</strong>. It should be </p>\n\n<pre><code>@EnableAutoConfiguration(exclude = arrayOf(MongoAutoConfiguration::class))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 653, "user_id": 340225, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4dee7a92387ed097810ee2d1f9fae22f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/340225/eric"}, "is_accepted": false, "score": 14, "last_activity_date": 1550592353, "creation_date": 1550592353, "answer_id": 54770453, "question_id": 46281830, "link": "https://stackoverflow.com/questions/46281830/i-cant-exclude-mongoautoconfiguration-in-springboot-kotlin-mongosocketopenexce/54770453#54770453", "title": "I can&#39;t exclude MongoAutoConfiguration in Springboot-Kotlin (MongoSocketOpenException)", "body": "<p>Its better this way</p>\n\n<pre><code>@EnableAutoConfiguration(exclude = [MongoAutoConfiguration::class])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13647, "user_id": 546967, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Rr4Tm.jpg?s=128&g=1", "display_name": "Martin Devillers", "link": "https://stackoverflow.com/users/546967/martin-devillers"}, "is_accepted": false, "score": 0, "last_activity_date": 1576574392, "creation_date": 1576574392, "answer_id": 59371027, "question_id": 46281830, "link": "https://stackoverflow.com/questions/46281830/i-cant-exclude-mongoautoconfiguration-in-springboot-kotlin-mongosocketopenexce/59371027#59371027", "title": "I can&#39;t exclude MongoAutoConfiguration in Springboot-Kotlin (MongoSocketOpenException)", "body": "<p>If you're using the <code>@SpringBootApplication</code> annotation instead of <code>@EnableAutoConfiguration</code> you'll have to add it there:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication(exclude={MongoAutoConfiguration.class})\n</code></pre>\n"}], "owner": {"reputation": 4681, "user_id": 4077513, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/oxQV6.png?s=128&g=1", "display_name": "Martin Erlic", "link": "https://stackoverflow.com/users/4077513/martin-erlic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4097, "favorite_count": 1, "accepted_answer_id": 46281887, "answer_count": 3, "score": 5, "last_activity_date": 1576574392, "creation_date": 1505744880, "question_id": 46281830, "link": "https://stackoverflow.com/questions/46281830/i-cant-exclude-mongoautoconfiguration-in-springboot-kotlin-mongosocketopenexce", "title": "I can&#39;t exclude MongoAutoConfiguration in Springboot-Kotlin (MongoSocketOpenException)", "body": "<p><a href=\"https://i.stack.imgur.com/Ntip8.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Ntip8.png\" alt=\"enter image description here\"></a></p>\n\n<p>I'm getting a MongoSocketOpenException when trying to exclude MongoAutoConfiguration. I'm trying to connect to a remote MongoDB. Is the @EnableAutoConfiguration syntax correct considering I'm working in Kotlin?</p>\n\n<p><strong>Exception:</strong></p>\n\n<pre><code>com.mongodb.MongoSocketOpenException: Exception opening socket\n        at com.mongodb.connection.SocketStream.open(SocketStream.java:63) ~[mongo-java-driver-3.4.2.jar:na]\n        at com.mongodb.connection.InternalStreamConnection.open(InternalStreamConnection.java:115) ~[mongo-java-driver-3.4.2.\njar:na]\n        at com.mongodb.connection.DefaultServerMonitor$ServerMonitorRunnable.run(DefaultServerMonitor.java:113) ~[mongo-java-\ndriver-3.4.2.jar:na]\n        at java.lang.Thread.run(Thread.java:745) [na:1.8.0_20]\nCaused by: java.net.ConnectException: Connection refused: connect\n        at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method) ~[na:1.8.0_20]\n        at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85) ~[na:1.8.0_20]\n        at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:345) ~[na:1.8.0_20]\n        at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) ~[na:1.8.0_20]\n        at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) ~[na:1.8.0_20]\n        at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172) ~[na:1.8.0_20]\n        at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) ~[na:1.8.0_20]\n        at java.net.Socket.connect(Socket.java:589) ~[na:1.8.0_20]\n        at com.mongodb.connection.SocketStreamHelper.initialize(SocketStreamHelper.java:57) ~[mongo-java-driver-3.4.2.jar:na]\n\n        at com.mongodb.connection.SocketStream.open(SocketStream.java:58) ~[mongo-java-driver-3.4.2.jar:na]\n        ... 3 common frames omitted\n</code></pre>\n"}, {"tags": ["android", "kotlin", "reactive-programming", "rx-java2", "reactive"], "comments": [{"owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 3, "creation_date": 1505734503, "post_id": 46278212, "comment_id": 79519307, "body": "You have to subscribe to <code>observable</code>."}, {"owner": {"reputation": 11, "user_id": 8626373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7caf7907a0fee9d52c49e02d14463220?s=128&d=identicon&r=PG&f=1", "display_name": "Zaharieff", "link": "https://stackoverflow.com/users/8626373/zaharieff"}, "reply_to_user": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 0, "creation_date": 1505734762, "post_id": 46278212, "comment_id": 79519463, "body": "jesus, for the purpose of the example I didn&#39;t put that part, of course I subscribe to the observable.."}, {"owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 1, "creation_date": 1505735284, "post_id": 46278212, "comment_id": 79519793, "body": "<code>getObject()</code> calls <code>getItFromWeb()</code> unconditionally when filling in the parameter of <code>switchIfEmpty()</code>."}, {"owner": {"reputation": 11, "user_id": 8626373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7caf7907a0fee9d52c49e02d14463220?s=128&d=identicon&r=PG&f=1", "display_name": "Zaharieff", "link": "https://stackoverflow.com/users/8626373/zaharieff"}, "reply_to_user": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 0, "creation_date": 1505735947, "post_id": 46278212, "comment_id": 79520211, "body": "are you trying to guess this? It&#39;s switch if empty construction that should execute only if the previous only is Observable.empty"}], "answers": [{"tags": [], "owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "is_accepted": false, "score": 8, "last_activity_date": 1505736421, "creation_date": 1505736421, "answer_id": 46278878, "question_id": 46278212, "link": "https://stackoverflow.com/questions/46278212/rxjava2-switchifempty-and-verifing-an-execution/46278878#46278878", "title": "RxJava2 switchIfEmpty and verifing an execution", "body": "<p>Opening a brace doesn't magically make the code/variable beyond it get initialized in a lazy manner. What you wrote is this:</p>\n\n<pre><code>public Observable&lt;SomeVM&gt; getObject() {\n    Observable o1 = service.getPoiObject();\n    Observable o2 = service.getItFromWeb();  // &lt;-------------------\n    Observable o3 = o1.switchIfEmpty(o2);\n    return o3;\n}\n</code></pre>\n\n<p>You already did the reasonable job in <code>getPoiObject()</code> by deferring execution, which you should apply in <code>getObject()</code> as well:</p>\n\n<pre><code>public Observable getObject() {\n    return service.getPoiObject()\n             .switchIfEmpty(Observable.defer(() -&gt; getItFromWeb()));\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8626373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7caf7907a0fee9d52c49e02d14463220?s=128&d=identicon&r=PG&f=1", "display_name": "Zaharieff", "link": "https://stackoverflow.com/users/8626373/zaharieff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1770, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1505736421, "creation_date": 1505734170, "question_id": 46278212, "link": "https://stackoverflow.com/questions/46278212/rxjava2-switchifempty-and-verifing-an-execution", "title": "RxJava2 switchIfEmpty and verifing an execution", "body": "<p>so.. imagine I have a method construct like this:</p>\n\n<p>LocalDatabase:</p>\n\n<pre><code>public Observable&lt;PoiObject&gt; getPoiObject() {\n\n    return Observable.defer {\n        PoiObject object = poiDao.getPoiObject();\n        if(object == null) {\n            return Observable.empty();\n        }\n        else {\n            return Observable.just(object);\n        }\n    }\n}\n</code></pre>\n\n<p>now, I have another method somewhere else that goes like this:</p>\n\n<p>Service:</p>\n\n<pre><code>public Observable&lt;PoiObject&gt; getPoiObject() {\n    return localDatabase.getPoiObject()\n}\n\npublic Observable&lt;PoiObject&gt; getItFromWeb() {\n    return restService.getObject()\n}\n</code></pre>\n\n<p>if I try to chain up the call of the Service::getPoiObject into a Rx call like this:</p>\n\n<p>Usecase:</p>\n\n<pre><code>public Observable&lt;SomeVM&gt; getObject() {\n    return service.getPoiObject()\n        .switchIfEmpty(service.getItFromWeb())\n}\n</code></pre>\n\n<p>Then the following unit test fails:</p>\n\n<pre><code>@Test\npublic void test_getObject() {\n    Service service = mock()\n\n    when(service.getPoiObject()).thenReturn(any());\n\n    Observable&lt;SomeVM&gt; observable = usecase.getObject();\n    verify(service).getPoiObject();\n    verify(service, times(0)).getItFromWeb();\n}\n</code></pre>\n\n<p>Why would getItFromWeb() execute when clearly,the previous call is not empty (object is returned from service.getPoiObject() call). Is there any other strategy to test upon switchIfEmpty?</p>\n"}, {"tags": ["spring", "spring-boot", "mockito", "kotlin"], "comments": [{"owner": {"reputation": 5000, "user_id": 1092077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5778521f67d80de0ee3b213e4f159a59?s=128&d=identicon&r=PG", "display_name": "S&#233;bastien Deleuze", "link": "https://stackoverflow.com/users/1092077/s%c3%a9bastien-deleuze"}, "edited": false, "score": 0, "creation_date": 1505748754, "post_id": 46277983, "comment_id": 79529212, "body": "Thanks I am going to have a look."}, {"owner": {"reputation": 5000, "user_id": 1092077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5778521f67d80de0ee3b213e4f159a59?s=128&d=identicon&r=PG", "display_name": "S&#233;bastien Deleuze", "link": "https://stackoverflow.com/users/1092077/s%c3%a9bastien-deleuze"}, "edited": false, "score": 0, "creation_date": 1506072787, "post_id": 46277983, "comment_id": 79682427, "body": "I have created a repro project from this StackOverflow question and indeed such exception is raised, but the stacktrace seems to be at Spring Data Commons level which calls directly Kotlin API, so I have moved this issue to <a href=\"https://jira.spring.io/browse/DATACMNS-1170\" rel=\"nofollow noreferrer\">jira.spring.io/browse/DATACMNS-1170</a>, it will be handled by Spring Data team."}, {"owner": {"reputation": 484, "user_id": 8107664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fluUj.jpg?s=128&g=1", "display_name": "romainbsl", "link": "https://stackoverflow.com/users/8107664/romainbsl"}, "reply_to_user": {"reputation": 5000, "user_id": 1092077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5778521f67d80de0ee3b213e4f159a59?s=128&d=identicon&r=PG", "display_name": "S&#233;bastien Deleuze", "link": "https://stackoverflow.com/users/1092077/s%c3%a9bastien-deleuze"}, "edited": false, "score": 0, "creation_date": 1506073029, "post_id": 46277983, "comment_id": 79682569, "body": "Hello @S&#233;bastienDeleuze !  thanks for the commitment, I really appricate !"}], "answers": [{"comments": [{"owner": {"reputation": 484, "user_id": 8107664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fluUj.jpg?s=128&g=1", "display_name": "romainbsl", "link": "https://stackoverflow.com/users/8107664/romainbsl"}, "edited": false, "score": 0, "creation_date": 1506065462, "post_id": 46334279, "comment_id": 79677993, "body": "Thx. That&#39;s a solution but even we may not need constructors it that case, it&#39;s not sur that you&#39;ll never need it in the future. I&#39;ll wait few days before validate your answer."}], "tags": [], "owner": {"reputation": 11, "user_id": 1690763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/221ba4c07b9d85ea217a028ad83d3ef8?s=128&d=identicon&r=PG", "display_name": "sukhoi", "link": "https://stackoverflow.com/users/1690763/sukhoi"}, "is_accepted": false, "score": 0, "last_activity_date": 1505959452, "creation_date": 1505959452, "answer_id": 46334279, "question_id": 46277983, "link": "https://stackoverflow.com/questions/46277983/kotlin-springboot-2-0-0-m4-failed-tu-load-application-context-beancreationexc/46334279#46334279", "title": "Kotlin + SpringBoot 2.0.0-M4 failed tu load application context (BeanCreationException)", "body": "<p>have same problem.\nremove all constructor of Entity class except default no-arg constructor. that solve problem</p>\n"}, {"tags": [], "owner": {"reputation": 484, "user_id": 8107664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fluUj.jpg?s=128&g=1", "display_name": "romainbsl", "link": "https://stackoverflow.com/users/8107664/romainbsl"}, "is_accepted": true, "score": 0, "last_activity_date": 1523275151, "creation_date": 1523275151, "answer_id": 49732448, "question_id": 46277983, "link": "https://stackoverflow.com/questions/46277983/kotlin-springboot-2-0-0-m4-failed-tu-load-application-context-beancreationexc/49732448#49732448", "title": "Kotlin + SpringBoot 2.0.0-M4 failed tu load application context (BeanCreationException)", "body": "<p>It has been fixed since 2.0.0-M5</p>\n"}, {"tags": [], "owner": {"reputation": 1387, "user_id": 4547118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/48c1bd41974b2165147c6b381b556e20?s=128&d=identicon&r=PG&f=1", "display_name": "pokemzok", "link": "https://stackoverflow.com/users/4547118/pokemzok"}, "is_accepted": false, "score": 0, "last_activity_date": 1523276133, "creation_date": 1523276133, "answer_id": 49732769, "question_id": 46277983, "link": "https://stackoverflow.com/questions/46277983/kotlin-springboot-2-0-0-m4-failed-tu-load-application-context-beancreationexc/49732769#49732769", "title": "Kotlin + SpringBoot 2.0.0-M4 failed tu load application context (BeanCreationException)", "body": "<p>You could find useful kotlin compiler plugins. For this case (or similar) I recommend to use <a href=\"https://kotlinlang.org/docs/reference/compiler-plugins.html#jpa-support\" rel=\"nofollow noreferrer\">jpa compiler plugin</a>. It would generate behind the scenes default no-args constructor for classes annotated with  @Entity, @Embeddable and @MappedSuperclass automatically, which would allow kotlin reflection api to correctly create and populate for example entities without a need to provide every single field as optional. </p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 2686903, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hQJJR.jpg?s=128&g=1", "display_name": "daviek19", "link": "https://stackoverflow.com/users/2686903/daviek19"}, "is_accepted": false, "score": 0, "last_activity_date": 1533145734, "creation_date": 1533145734, "answer_id": 51639399, "question_id": 46277983, "link": "https://stackoverflow.com/questions/46277983/kotlin-springboot-2-0-0-m4-failed-tu-load-application-context-beancreationexc/51639399#51639399", "title": "Kotlin + SpringBoot 2.0.0-M4 failed tu load application context (BeanCreationException)", "body": "<p>I added kotlin-reflect dependency and this worked for me.</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n    &lt;artifactId&gt;kotlin-reflect&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}], "owner": {"reputation": 484, "user_id": 8107664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fluUj.jpg?s=128&g=1", "display_name": "romainbsl", "link": "https://stackoverflow.com/users/8107664/romainbsl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 843, "favorite_count": 1, "accepted_answer_id": 49732448, "answer_count": 4, "score": 1, "last_activity_date": 1533145734, "creation_date": 1505733378, "question_id": 46277983, "link": "https://stackoverflow.com/questions/46277983/kotlin-springboot-2-0-0-m4-failed-tu-load-application-context-beancreationexc", "title": "Kotlin + SpringBoot 2.0.0-M4 failed tu load application context (BeanCreationException)", "body": "<p>I'm working with Kotlin and Spring (through SpringBoot).\nI was on 2.0.0-M3 and everything was right.</p>\n\n<p>I decided to jump to M4. Then, I got some troubles.</p>\n\n<p>I got the following stack trace:</p>\n\n<pre><code>java.lang.IllegalStateException: Failed to load ApplicationContext\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:125)\n    at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:107)\n    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:117)\n    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83)\n    at org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:44)\n    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:242)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:227)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:289)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:291)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:246)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\n    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\n    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)\n    at org.junit.runner.JUnitCore.run(JUnitCore.java:137)\n    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)\n    at com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)\n    at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)\n    at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jpaMappingContext': Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: Parameter specified as non-null is null: method kotlin.reflect.jvm.ReflectJvmMapping.getJavaConstructor, parameter $receiver\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1702)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:583)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:502)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:312)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:310)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:740)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:868)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:549)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:750)\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:386)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:327)\n    at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:138)\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)\n    ... 25 more\nCaused by: java.lang.IllegalArgumentException: Parameter specified as non-null is null: method kotlin.reflect.jvm.ReflectJvmMapping.getJavaConstructor, parameter $receiver\n    at kotlin.reflect.jvm.ReflectJvmMapping.getJavaConstructor(ReflectJvmMapping.kt)\n    at org.springframework.data.mapping.model.PreferredConstructorDiscoverer$Discoverers$2.lambda$discover$2(PreferredConstructorDiscoverer.java:169)\n    at java.util.Optional.orElseGet(Optional.java:267)\n    at org.springframework.data.mapping.model.PreferredConstructorDiscoverer$Discoverers$2.discover(PreferredConstructorDiscoverer.java:165)\n    at org.springframework.data.mapping.model.PreferredConstructorDiscoverer.discover(PreferredConstructorDiscoverer.java:77)\n    at org.springframework.data.mapping.model.BasicPersistentEntity.&lt;init&gt;(BasicPersistentEntity.java:93)\n    at org.springframework.data.jpa.mapping.JpaPersistentEntityImpl.&lt;init&gt;(JpaPersistentEntityImpl.java:54)\n    at org.springframework.data.jpa.mapping.JpaMetamodelMappingContext.createPersistentEntity(JpaMetamodelMappingContext.java:66)\n    at org.springframework.data.jpa.mapping.JpaMetamodelMappingContext.createPersistentEntity(JpaMetamodelMappingContext.java:40)\n    at org.springframework.data.mapping.context.AbstractMappingContext.addPersistentEntity(AbstractMappingContext.java:376)\n    at org.springframework.data.mapping.context.AbstractMappingContext.addPersistentEntity(AbstractMappingContext.java:343)\n    at java.lang.Iterable.forEach(Iterable.java:75)\n    at org.springframework.data.mapping.context.AbstractMappingContext.initialize(AbstractMappingContext.java:469)\n    at org.springframework.data.jpa.repository.config.JpaMetamodelMappingContextFactoryBean.createInstance(JpaMetamodelMappingContextFactoryBean.java:90)\n    at org.springframework.data.jpa.repository.config.JpaMetamodelMappingContextFactoryBean.createInstance(JpaMetamodelMappingContextFactoryBean.java:43)\n    at org.springframework.beans.factory.config.AbstractFactoryBean.afterPropertiesSet(AbstractFactoryBean.java:141)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1761)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1698)\n    ... 40 more\n</code></pre>\n\n<p>Here is my code:</p>\n\n<p>Entities</p>\n\n<pre><code>@Entity\n@Table(name = \"code_list\")\nclass CodeList : Serializable {\n    /* ----- FIELDS ----- */\n    //endregion\n\n\n    //region GET / SET methods\n    @Id\n    @Column(name = \"NO_SECSOC\", nullable = false)\n    var secSocId: Long? = null\n    @Id\n    @Column(name = \"ID_CODE_LIST\")\n    var codelistId: String? = null\n    @Id\n    @Column(name = \"NO_COM_PARITAIRE\")\n    var comParitaireId: String? = null\n    @Id\n    @Column(name = \"NO_EMPLOYEUR\")\n    var employerId: Long? = null\n    @Id\n    @Column(name = \"NO_CCTE\")\n    var ccteId: String? = null\n    @Id\n    @Column(name = \"VAL_NUM\")\n    var numberValue: Long? = null\n    @Id\n    @Column(name = \"VAL_STRING\")\n    var stringValue: String? = null\n\n    @Column(name = \"DT_DEBUT_EFFET\")\n    var startEffectDate: LocalDate? = null\n\n    @Column(name = \"DT_FIN_EFFET\")\n    var endEffectDate: LocalDate? = null\n\n    @Embedded\n    var label: MultilingualString? = null\n\n    /** Set the type of value to use  */\n    @ManyToOne(optional = true, fetch = FetchType.LAZY)\n    @NotFound(action = NotFoundAction.IGNORE)\n    @JoinColumn(name = \"ID_CODE_LIST\", insertable = false, updatable = false)\n    var codeListType: CodeListType? = null\n\n    //region Constructor\n    constructor() {}\n\n    constructor(secSocId: Long?, employerId: Long?, ccteId: String, codeListId: String) {\n        this.secSocId = secSocId\n        this.employerId = employerId\n        this.ccteId = ccteId\n        this.codelistId = codeListId\n    }\n    //endregion\n\n}\n</code></pre>\n\n<p>Repository</p>\n\n<pre><code>@Component\nclass CodeListRepository {\n\n    @Autowired\n    lateinit var entityManager: EntityManager\n\n    fun findCodeListLikeCB(predicateMap: Map&lt;String, Any?&gt;): List&lt;CodeList&gt; {\n\n        val cb = entityManager.criteriaBuilder\n\n        val query = cb.createQuery(CodeList::class.java)\n\n        val codeListRoot = query.from(CodeList::class.java)\n\n        val predicateList: ArrayList&lt;Predicate&gt; = ArrayList()\n\n        // foreach to build predicateList\n        for ((key, value) in predicateMap) {\n            if (value != null) {\n                // For a list, needed to add a condition IN\n                if (value is List&lt;*&gt;)\n                    predicateList.add(codeListRoot.get&lt;Any&gt;(key).`in`(value))\n\n                //For a date, needed to add condition\n                //  For start date --&gt; before param start date\n                //  For end date   --&gt; after param date or null\n                if (value is LocalDate) {\n                    if (key == \"startEffectDate\") {\n                        predicateList.add(cb.lessThanOrEqualTo(codeListRoot.get(\"startEffectDate\"), value))\n                    }\n                    if (key == \"endEffectDate\") {\n                        // cb.conjunction allow to add parenthesis to the predicate\n                        val predicate = cb.conjunction()\n                        predicate.expressions.add(cb.or(cb.greaterThan(codeListRoot.get(\"endEffectDate\"), value), cb.isNull(codeListRoot.get&lt;Any&gt;(\"endEffectDate\"))))\n                        predicateList.add(predicate)\n                    }\n                }\n                if (value !is LocalDate &amp;&amp; value !is List&lt;*&gt;) {\n                    predicateList.add(cb.equal(codeListRoot.get&lt;Any&gt;(key), value))\n                }\n            }\n        }\n\n        query.select(codeListRoot).where(cb.and(*predicateList.toTypedArray()))\n\n        return entityManager.createQuery(query).resultList\n    }\n\n}\n</code></pre>\n\n<p>Test class</p>\n\n<pre><code>@ComponentScan(\"be.groups\")\n@EntityScan(\"be.groups\")\n@EnableJpaRepositories(basePackages = arrayOf(\"be.groups\"))\n@SpringBootTest(classes = arrayOf(DatabaseComponent::class))\n@RunWith(SpringJUnit4ClassRunner::class)\nclass CodeListRepositoryTest {\n\n    @Autowired\n    lateinit var repository: CodeListRepository\n\n    @Test\n    fun findCodeListLikeCB() {\n        val codeLists = repository.findCodeListLikeCB(mapOf(\"codelistId\" to \"CANAL\"))\n        assertNotNull(codeLists)\n        assertFalse(codeLists.isEmpty())\n\n        val codeList = repository.findCodeListLikeCB(mapOf(\"codelistId\" to \"CANAL\", \"numberValue\" to 0))\n        assertNotNull(codeList)\n        assertFalse(codeList.isEmpty())\n        assertEquals(codeList.size, 1)\n        assertEquals(codeList[0].codelistId, \"CANAL\")\n        assertEquals(codeList[0].numberValue, 0)\n    }\n\n}\n</code></pre>\n\n<p>Test configuration (mockito-extensions/org.mockito.plugins.MockMaker)</p>\n\n<pre><code>mock-maker-inline\n</code></pre>\n\n<p>Any idea on what went wrong since 2.0.0-M3 ?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 6316, "user_id": 671296, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/py1Rt.jpg?s=128&g=1", "display_name": "zoku", "link": "https://stackoverflow.com/users/671296/zoku"}, "edited": false, "score": 0, "creation_date": 1505725065, "post_id": 46275146, "comment_id": 79513204, "body": "I am aware that the title of the question is bad. I just don&#39;t have any idea how to better describe the problem."}, {"owner": {"reputation": 4677, "user_id": 3673259, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/DPHO1.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3673259/joshua"}, "edited": false, "score": 0, "creation_date": 1505726623, "post_id": 46275146, "comment_id": 79514242, "body": "Your class design is not understandable.  Why  <code>Mastery</code> need a generic parameter but not using it? Why is Skill hold a list reference to its class? Can you explain what you want to achieve and your class relationship."}, {"owner": {"reputation": 6316, "user_id": 671296, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/py1Rt.jpg?s=128&g=1", "display_name": "zoku", "link": "https://stackoverflow.com/users/671296/zoku"}, "reply_to_user": {"reputation": 4677, "user_id": 3673259, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/DPHO1.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3673259/joshua"}, "edited": false, "score": 0, "creation_date": 1505729246, "post_id": 46275146, "comment_id": 79515971, "body": "@Joshua The structure is simplified to only show the problematic part of the code. In simple terms I try to have a class implementing an interface which holds a list with the type of another class implementing another interface and being bound to the first class. The goal is to prevent mixing of skills and masteries by binding each mastery to a specific skill.  So Pelocho&#39;s answer is exactly what I was trying to do."}], "answers": [{"comments": [{"owner": {"reputation": 6316, "user_id": 671296, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/py1Rt.jpg?s=128&g=1", "display_name": "zoku", "link": "https://stackoverflow.com/users/671296/zoku"}, "edited": false, "score": 0, "creation_date": 1505734043, "post_id": 46275770, "comment_id": 79519030, "body": "Ah! That makes sense. It also explains why I&#39;ve never heard of it. It is better readable than <code>Foo&lt;T : Foo&lt;T&gt;&gt;</code> though. Now that I know <code>Self</code> is not a keyword, I also understand, what the code does. It&#39;s even simpler than I thought."}], "tags": [], "owner": {"reputation": 6094, "user_id": 5132804, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ueFFV.jpg?s=128&g=1", "display_name": "Pelocho", "link": "https://stackoverflow.com/users/5132804/pelocho"}, "is_accepted": true, "score": 3, "last_activity_date": 1505731729, "last_edit_date": 1505731729, "creation_date": 1505726450, "answer_id": 46275770, "question_id": 46275146, "link": "https://stackoverflow.com/questions/46275146/is-it-possible-to-restrict-the-type-of-a-list-to-an-implementation-of-an-interfa/46275770#46275770", "title": "Is it possible to restrict the type of a List to an implementation of an interface in Kotlin?", "body": "<p>I don't know if I really understood you but I think this piece of code solves your problem:</p>\n\n<pre><code>interface Mastery&lt;Skill&gt; {\n    val masteryName: String\n}\n\ninterface Skill&lt;Self : Skill&lt;Self&gt;&gt; {                              // forces every Skill to bound to itself\n    val masteries: List&lt;Mastery&lt;Self&gt;&gt;\n}\n\nabstract class Stealth : Skill&lt;Stealth&gt; {\n    override val masteries = ArrayList&lt;Mastery&lt;Stealth&gt;&gt;()\n}\n\nclass SoundlessMovement : Mastery&lt;Stealth&gt; {         // a Stealth mastery\n    override val masteryName = \"Soundless Movement\"\n}\n\nclass SoundlessMovement2 : Mastery&lt;Stealth&gt; {        // another Stealth mastery\n    override val masteryName = \"Soundless Movement 2\"\n}\n\nabstract class Archery : Skill&lt;Archery&gt; {         \n    override val masteries = ArrayList&lt;Mastery&lt;Archery&gt;&gt;()\n}\n\nclass SureShot : Mastery&lt;Archery&gt; {                  // some other mastery\n    override val masteryName = \"Sure shot 2\"\n}\n\nfun main(args: Array&lt;String&gt;) {\n\n    var list = ArrayList&lt;Mastery&lt;Stealth&gt;&gt;()\n\n    list.add(SoundlessMovement())            // compiles\n    list.add(SoundlessMovement2())           // compiles\n    list.add(SureShot())                     // Doesn't compile\n}\n</code></pre>\n\n<p>The key here is to use <code>Skill&lt;Self&gt;</code> to bound the current implementations. Note also that I've changed <code>class Stealth ...</code> to <code>abstract class Stealth ...</code> since you're <em>defining</em> the mastery type. Another option could be using <a href=\"https://kotlinlang.org/docs/reference/sealed-classes.html\" rel=\"nofollow noreferrer\">Kotlin's sealed class</a></p>\n\n<p>Beware that <code>Self</code> <strong>is not</strong> a reserved word nor anything similar. The code will also work if you just change it to just <code>T</code>. I chose to use <code>Self</code> just to make you aware what type you should put there</p>\n"}], "owner": {"reputation": 6316, "user_id": 671296, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/py1Rt.jpg?s=128&g=1", "display_name": "zoku", "link": "https://stackoverflow.com/users/671296/zoku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 46275770, "answer_count": 1, "score": 0, "last_activity_date": 1505731729, "creation_date": 1505724562, "last_edit_date": 1505725981, "question_id": 46275146, "link": "https://stackoverflow.com/questions/46275146/is-it-possible-to-restrict-the-type-of-a-list-to-an-implementation-of-an-interfa", "title": "Is it possible to restrict the type of a List to an implementation of an interface in Kotlin?", "body": "<p>I have a class <code>Stealth</code> implementing the interface <code>Skill</code> and a class <code>SoundlessMovement</code> implementing the interface <code>Mastery</code>. Now I want to add the mastery <code>SoundlessMovement</code> to the <code>Skill</code> <code>Stealth</code>, while ensuring the <code>Mastery</code> to be supported by the <code>Skill</code>.</p>\n\n<p>I want to do something like this (Pseudo-Kotlin):</p>\n\n<pre><code>interface Skill {\n    val masteries: List&lt;Mastery&lt;Skill&gt;&gt; // Mastery linked to type Skill\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>interface Mastery&lt;Skill&gt; { // Every Mastery must be compatible with only one Skill\n    val masteryName: String\n}\n</code></pre>\n\n<p>with implementations:</p>\n\n<pre><code>class Stealth : Skill {\n    override val masteries: ArrayList&lt;Mastery&lt;Stealth&gt;() // Any Mastery bound to Stealth\n}\n</code></pre>\n\n<p>and </p>\n\n<pre><code>class SoundlessMovement : Mastery&lt;Stealth&gt; { // Is a Mastery compatible with Stealth\n    override val masteryName = \"Soundless Movement\"\n}\n</code></pre>\n\n<p>The goal is to make sure that only compatible masteries can be added to a skill.\nIs something like this even possible? And if yes, how could it be implemented in Kotlin?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "edited": false, "score": 2, "creation_date": 1505724010, "post_id": 46274888, "comment_id": 79512500, "body": "Related: <a href=\"https://discuss.kotlinlang.org/t/relationship-between-classes-like-kotlin-int-and-java-integer-and-int-primitive/671\" rel=\"nofollow noreferrer\">discuss.kotlinlang.org/t/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 382, "user_id": 1029127, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/55b2c3cb924663d26b1a323291042f4c?s=128&d=identicon&r=PG", "display_name": "withparadox2", "link": "https://stackoverflow.com/users/1029127/withparadox2"}, "edited": false, "score": 1, "creation_date": 1603529408, "post_id": 46275168, "comment_id": 114070820, "body": "Can you add a reference since I couldn&#39;t find a clue from the documentation?"}], "tags": [], "owner": {"reputation": 3171, "user_id": 3394023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b3b645b8d145d17f9e081590d0d6fdc?s=128&d=identicon&r=PG", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/3394023/santhosh"}, "is_accepted": false, "score": 9, "last_activity_date": 1505724651, "creation_date": 1505724651, "answer_id": 46275168, "question_id": 46274888, "link": "https://stackoverflow.com/questions/46274888/what-is-the-difference-between-int-and-integer-in-kotlin/46275168#46275168", "title": "What is the difference between Int and Integer in Kotlin?", "body": "<p>A <code>Int</code> is a primitive Type. This is equivalent to JVM int.</p>\n\n<p>A nullable Int <code>Int?</code> is a boxed Type. This is equivalent to <code>java.lang.Integer</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 8621, "user_id": 5247292, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/fQKn3.png?s=128&g=1", "display_name": "guenhter", "link": "https://stackoverflow.com/users/5247292/guenhter"}, "is_accepted": false, "score": 4, "last_activity_date": 1505726190, "creation_date": 1505726190, "answer_id": 46275682, "question_id": 46274888, "link": "https://stackoverflow.com/questions/46274888/what-is-the-difference-between-int-and-integer-in-kotlin/46275682#46275682", "title": "What is the difference between Int and Integer in Kotlin?", "body": "<p>Just have a look at <a href=\"https://kotlinlang.org/docs/reference/basic-types.html#representation\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/basic-types.html#representation</a></p>\n\n<blockquote>\n  <p>On the Java platform, numbers are physically stored as JVM primitive\n  types, unless we need a nullable number reference (e.g. Int?) or\n  generics are involved. In the latter cases numbers are boxed.</p>\n</blockquote>\n\n<p>That means, that <code>Int</code> is represented as primitive <code>int</code>. Only in cases when nullability or generics are involved, the backing Wrapper Type <code>Integer</code> must be used. \nIf you use <code>Integer</code> from the beginning, you always work with the wrapper type and never with the primitive <code>int</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 4, "creation_date": 1505739880, "post_id": 46277089, "comment_id": 79522932, "body": "A non-nullable <code>Int</code> will be boxed when used with generics. For example, <code>List&lt;Int&gt;</code> will contain boxed integers."}], "tags": [], "owner": {"reputation": 9209, "user_id": 455322, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a08eee5080a1750369fc20fe332bcea0?s=128&d=identicon&r=PG", "display_name": "Les", "link": "https://stackoverflow.com/users/455322/les"}, "is_accepted": true, "score": 31, "last_activity_date": 1505732504, "last_edit_date": 1505732504, "creation_date": 1505730611, "answer_id": 46277089, "question_id": 46274888, "link": "https://stackoverflow.com/questions/46274888/what-is-the-difference-between-int-and-integer-in-kotlin/46277089#46277089", "title": "What is the difference between Int and Integer in Kotlin?", "body": "<p><code>Int</code> is a Kotlin Class derived from <code>Number</code>.  <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-int/index.html#int\" rel=\"noreferrer\">See doc</a></p>\n\n<blockquote>\n  <p>[Int] Represents a 32-bit signed integer. On the JVM, non-nullable values of\n  this type are represented as values of the primitive type int.</p>\n</blockquote>\n\n<p><code>Integer</code> is a Java Class.</p>\n\n<p>If you were to search the Kotlin spec for \"Integer\", there is no Kotlin <code>Integer</code> type.</p>\n\n<p>If you use the expression <code>is Integer</code> in IntelliJ, the IDE warns...</p>\n\n<blockquote>\n  <p>This type shouldn't be used in Kotlin, use Int instead.</p>\n</blockquote>\n\n<p><code>Integer</code> will interoperate well with Kotlin Int, but they do have some subtle differences in behavior, for example:</p>\n\n<pre><code>val one: Integer = 1 // error: \"The integer literal does not conform to the expected type Integer\"\nval two: Integer = Integer(2) // compiles\nval three: Int = Int(3) // does not compile\nval four: Int = 4 // compiles\n</code></pre>\n\n<p>In Java, there are times where you need to explicitly \"box\" an integer as an object.  In Kotlin only Nullable integers (<code>Int?</code>) are boxed.  Explicitly trying to box a non-nullable integer will give a compiler error:</p>\n\n<pre><code>val three: Int = Int(3) // error: \"Cannot access '&lt;init&gt;': it is private in 'Int'\nval four: Any = 4 // implicit boxing compiles (or is it really boxed?)\n</code></pre>\n\n<p>But <code>Int</code> and <code>Integer</code> (<code>java.lang.Integer</code>) will be treated the same most of the time.</p>\n\n<pre><code>when(four) {\n    is Int -&gt; println(\"is Int\")\n    is Integer -&gt; println(\"is Integer\")\n    else -&gt; println(\"is other\")\n} //prints \"is Int\"\nwhen(four) {\n    is Integer -&gt; println(\"is Integer\")\n    is Int -&gt; println(\"is Int\")\n    else -&gt; println(\"is other\")\n} //prints \"is Integer\"\n</code></pre>\n"}], "owner": {"reputation": 215, "user_id": 5173528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53b7d680752c0795b5baebe4173d15d9?s=128&d=identicon&r=PG&f=1", "display_name": "idjango", "link": "https://stackoverflow.com/users/5173528/idjango"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13937, "favorite_count": 4, "accepted_answer_id": 46277089, "answer_count": 3, "score": 21, "last_activity_date": 1505732504, "creation_date": 1505723692, "question_id": 46274888, "link": "https://stackoverflow.com/questions/46274888/what-is-the-difference-between-int-and-integer-in-kotlin", "title": "What is the difference between Int and Integer in Kotlin?", "body": "<p>I have tried using Int and Integer types in Kotlin.Although I don't see any difference.\nIs there a difference between Int and Integer types in Kotlin?Or are they the same?</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "reply_to_user": {"reputation": 723, "user_id": 7730573, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6bb8f939b57df2c80c2bc04530773c8d?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan", "link": "https://stackoverflow.com/users/7730573/ivan"}, "edited": false, "score": 0, "creation_date": 1505720251, "post_id": 46273764, "comment_id": 79510350, "body": "You&#39;re welcome. Next time you can also reuse the old question"}], "tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": true, "score": 1, "last_activity_date": 1505719456, "creation_date": 1505719456, "answer_id": 46273764, "question_id": 46273642, "link": "https://stackoverflow.com/questions/46273642/kotlin-generic-parameter-using-in-function/46273764#46273764", "title": "Kotlin generic parameter using in function", "body": "<p>Your <code>response: Response&lt;out ApiRs&gt;?</code> has to be <code>response: Response&lt;out T&gt;?</code>, then the error should be gone.</p>\n\n<p>The type of <code>T</code> which will be passed to the method <code>onSuccess</code> must match the generic type of the <code>apiCallback</code> parameter, which isn't <code>&lt;ApiRs&gt;</code> but <code>&lt;T&gt;</code>.</p>\n"}], "owner": {"reputation": 723, "user_id": 7730573, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6bb8f939b57df2c80c2bc04530773c8d?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan", "link": "https://stackoverflow.com/users/7730573/ivan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2860, "favorite_count": 0, "accepted_answer_id": 46273764, "answer_count": 1, "score": 2, "last_activity_date": 1505719456, "creation_date": 1505719021, "last_edit_date": 1505719294, "question_id": 46273642, "link": "https://stackoverflow.com/questions/46273642/kotlin-generic-parameter-using-in-function", "title": "Kotlin generic parameter using in function", "body": "<p>i got solution of this question: <a href=\"https://stackoverflow.com/questions/46265621/wildcards-generic-in-kotlin-for-parameter\">Wildcards generic in Kotlin for parameter</a>, but now i have other question which still related to kotlin generic</p>\n\n<p>I have an abstract class using for listen api callback like below. ApiRs is a parent object that every API response object inherit from it</p>\n\n<pre><code>abstract class ApiCallback&lt;in T : ApiRs&gt; {\n\n    open fun onSucceed(apiRsModel: T) {}\n\n    open fun onFailed(code: Int,\n                      message: String) {\n    }\n}\n</code></pre>\n\n<p>this time i write a function to handle api succeed with Retrofit2, than check something and callback to UI, here is my function: </p>\n\n<pre><code>fun &lt;T : ApiRs&gt; callbackWithSucceed(apiCallback: ApiCallback&lt;T&gt;?,\n                                        context: Context,\n                                        response: Response&lt;out ApiRs&gt;?) {\n        // unexpected error\n        if (response == null) {\n            encounterUnexpectedError(apiCallback, context, null)\n            return\n        }\n\n        // check http\n        val httpSucceed = response.code() == CODE_HTTP_SUCCEED\n                &amp;&amp; response.isSuccessful\n                &amp;&amp; response.body() != null\n        if (!httpSucceed) {\n            // HTTP response with error\n            callbackWithFailed(\n                    apiCallback,\n                    response.code(),\n                    response.message())\n            return\n        }\n\n        apiCallback?.onSucceed(response.body()!!)\n    }\n}\n</code></pre>\n\n<p><code>response</code> is Retrofit2 class, which contains my API response model (body) and every response model are inherit ApiRs, my goal is pass the model to the abstract class using this way <code>apiCallback?.onSucceed(response.body()!!)</code> but it will show an error</p>\n\n<blockquote>\n  <p>Type mismatch, required T? but Found ApiRs?</p>\n</blockquote>\n\n<p>Sorry about i have bad concept of generic. I think function <code>open fun onSucceed(apiRsModel: T) {}</code> T should inherit ApiRs because i defined in class, so i cannot understand why error message shown?</p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 1387, "user_id": 4547118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/48c1bd41974b2165147c6b381b556e20?s=128&d=identicon&r=PG&f=1", "display_name": "pokemzok", "link": "https://stackoverflow.com/users/4547118/pokemzok"}, "is_accepted": false, "score": 0, "last_activity_date": 1505720145, "creation_date": 1505720145, "answer_id": 46273948, "question_id": 46273453, "link": "https://stackoverflow.com/questions/46273453/which-way-is-better-if-i-hope-to-use-a-syntax-just-like-static-function-in-kotli/46273948#46273948", "title": "Which way is better if I hope to use a syntax just like static function in Kotlin?", "body": "<p>Actually either one is good. Use case will depend mostly on methods visibility. You have more visibility control in second case because it is not restricted by package (like the first one). First case I believe would force you to place your .kt file in highest package hierarchie in order to be used everywhere in your code.</p>\n"}, {"comments": [{"owner": {"reputation": 4677, "user_id": 3673259, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/DPHO1.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3673259/joshua"}, "reply_to_user": {"reputation": 1387, "user_id": 4547118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/48c1bd41974b2165147c6b381b556e20?s=128&d=identicon&r=PG&f=1", "display_name": "pokemzok", "link": "https://stackoverflow.com/users/4547118/pokemzok"}, "edited": false, "score": 1, "creation_date": 1505725044, "post_id": 46274359, "comment_id": 79513192, "body": "@pokemzok First, the second  way is a object method, not even static (Kotlin need companion object). Even it is companion object, this is  not the Kotlin  way of doing it, more like Java. Also, it works on nullable object with less verbose, <code>context?.display1()</code>. Also, you are create a utility class with no purpose. Putting the  functions outside the class can serve the same purpose."}], "tags": [], "owner": {"reputation": 4677, "user_id": 3673259, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/DPHO1.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3673259/joshua"}, "is_accepted": false, "score": 3, "last_activity_date": 1505721714, "creation_date": 1505721714, "answer_id": 46274359, "question_id": 46273453, "link": "https://stackoverflow.com/questions/46273453/which-way-is-better-if-i-hope-to-use-a-syntax-just-like-static-function-in-kotli/46274359#46274359", "title": "Which way is better if I hope to use a syntax just like static function in Kotlin?", "body": "<p>Definitely not the second way. The first way is fine if the method is a specific use case for the object.</p>\n\n<p>However, in your example, you probably want to invoke the method when context is available. Then, I would recommend using extension instead. </p>\n\n<pre><code>fun Context.display1(){\n    // In the function, `this` is refer to the context\n    Toast.makeText(mContext, \"Hello, World 1\", Toast.LENGTH_LONG).show();\n}\n</code></pre>\n\n<p>Then, in <code>Activity</code>, you can write like</p>\n\n<pre><code>fun example() {\n    display1()\n}\n</code></pre>\n\n<p>instead of </p>\n\n<pre><code>fun example() {\n    Display1(this)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3171, "user_id": 3394023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b3b645b8d145d17f9e081590d0d6fdc?s=128&d=identicon&r=PG", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/3394023/santhosh"}, "is_accepted": true, "score": 2, "last_activity_date": 1505725735, "creation_date": 1505725735, "answer_id": 46275527, "question_id": 46273453, "link": "https://stackoverflow.com/questions/46273453/which-way-is-better-if-i-hope-to-use-a-syntax-just-like-static-function-in-kotli/46275527#46275527", "title": "Which way is better if I hope to use a syntax just like static function in Kotlin?", "body": "<p>Let us decompile the kotlin bytecode and see the java code.</p>\n\n<p><strong>myClass1.kt</strong></p>\n\n<pre><code>public final class MyClass1Kt {\n   public static final void Display1(@NotNull Context mContext) {\n      Intrinsics.checkParameterIsNotNull(mContext, \"mContext\");\n      Toast.makeText(mContext, (CharSequence)\"Hello, World 1\", 1).show();\n   }\n</code></pre>\n\n<p><strong>myClass2.kt</strong></p>\n\n<pre><code>public final class Utility {\n   public static final Utility INSTANCE;\n\n   public final void Display2(@NotNull Context mContext) {\n      Intrinsics.checkParameterIsNotNull(mContext, \"mContext\");\n      Toast.makeText(mContext, (CharSequence)\"Hello, World 2\", 1).show();\n   }\n\n   private Utility() {\n      INSTANCE = (Utility)this;\n   }\n\n   static {\n      new Utility();\n   }\n}\n</code></pre>\n\n<p>The second way is clearly not what you intended. There is an unneeded instance creation. </p>\n"}], "owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 46275527, "answer_count": 3, "score": 1, "last_activity_date": 1505725735, "creation_date": 1505718415, "question_id": 46273453, "link": "https://stackoverflow.com/questions/46273453/which-way-is-better-if-i-hope-to-use-a-syntax-just-like-static-function-in-kotli", "title": "Which way is better if I hope to use a syntax just like static function in Kotlin?", "body": "<p>I know there isn't a static function in Kotlin, so I write two code in myClass1.kt and myClass2.kt</p>\n\n<p>I don't know which is better, could you tell me? Thanks! </p>\n\n<p><strong>Main</strong></p>\n\n<pre><code>class HomeActivity : DemoActivity() {    \n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        Display1(this)\n        Utility.Display2(this)\n    }\n}\n</code></pre>\n\n<p><strong>myClass1.kt</strong></p>\n\n<pre><code>import android.content.Context\nimport android.widget.Toast\n\nfun Display1(mContext: Context){\n    Toast.makeText(mContext, \"Hello, World 1\", Toast.LENGTH_LONG).show();\n}\n</code></pre>\n\n<p><strong>myClass2.kt</strong></p>\n\n<pre><code>import android.content.Context\nimport android.widget.Toast\n\nobject Utility {\n    fun Display2(mContext: Context) {\n        Toast.makeText(mContext, \"Hello, World 2\", Toast.LENGTH_LONG).show();\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "android-studio", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1143, "user_id": 2726202, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/20e2405aa2ff464fcfb0001467a3098d?s=128&d=identicon&r=PG&f=1", "display_name": "nios", "link": "https://stackoverflow.com/users/2726202/nios"}, "edited": false, "score": 0, "creation_date": 1509443913, "post_id": 46328839, "comment_id": 81011383, "body": "Could you clarify your answer ? What is working ? First or second snippet ?"}], "tags": [], "owner": {"reputation": 2400, "user_id": 4762282, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a87249e3029c3daae0d473b1dc712484?s=128&d=identicon&r=PG&f=1", "display_name": "Ircover", "link": "https://stackoverflow.com/users/4762282/ircover"}, "is_accepted": true, "score": -1, "last_activity_date": 1505930317, "creation_date": 1505930317, "answer_id": 46328839, "question_id": 46271621, "link": "https://stackoverflow.com/questions/46271621/android-studio-kaptdebugkoltin-internal-compiler-error/46328839#46328839", "title": "Android Studio kaptDebugKoltin internal compiler error", "body": "<p>The problem was in gradle. There was only one needed line.</p>\n\n<pre><code>apply plugin: 'kotlin-kapt'\n</code></pre>\n\n<p>Now I added android plugin line. Everything now builds as it should.</p>\n\n<pre><code>apply plugin: 'kotlin-android'\napply plugin: 'kotlin-kapt'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 9008708, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-t8ssyZLW6iU/AAAAAAAAAAI/AAAAAAAAAEU/fWv4FYZ2A64/photo.jpg?sz=128", "display_name": "\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e", "link": "https://stackoverflow.com/users/9008708/%d0%92%d0%be%d0%b7%d0%bc%d0%be%d0%b6%d0%bd%d0%be"}, "is_accepted": false, "score": 0, "last_activity_date": 1602140859, "creation_date": 1602140859, "answer_id": 64257413, "question_id": 46271621, "link": "https://stackoverflow.com/questions/46271621/android-studio-kaptdebugkoltin-internal-compiler-error/64257413#64257413", "title": "Android Studio kaptDebugKoltin internal compiler error", "body": "<p>In my case helps &quot;Build -&gt; Clean Project&quot; and &quot;Build -&gt; Rebuild Project&quot;</p>\n"}], "owner": {"reputation": 2400, "user_id": 4762282, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a87249e3029c3daae0d473b1dc712484?s=128&d=identicon&r=PG&f=1", "display_name": "Ircover", "link": "https://stackoverflow.com/users/4762282/ircover"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 960, "favorite_count": 0, "accepted_answer_id": 46328839, "answer_count": 2, "score": 1, "last_activity_date": 1602140859, "creation_date": 1505708880, "question_id": 46271621, "link": "https://stackoverflow.com/questions/46271621/android-studio-kaptdebugkoltin-internal-compiler-error", "title": "Android Studio kaptDebugKoltin internal compiler error", "body": "<p>My kotlin android project just stops to build and run. I don't know what went wrong, but some days ago everything was fine. Now on rebuild it says following:</p>\n\n<p><a href=\"https://i.stack.imgur.com/hi6ee.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hi6ee.png\" alt=\"\"></a>\nLogs contains following:</p>\n\n<pre><code>2017-09-18 08:20:17,691 [ 870125]   INFO - s.plugins.gradle.GradleManager - Instructing gradle to use java from D:/progs/Android Studio/jre \n2017-09-18 08:20:17,752 [ 870186]   INFO - ild.invoker.GradleBuildInvoker - Build command line options: [--configure-on-demand, -Pandroid.injected.invoked.from.ide=true, --init-script, C:\\Users\\User2\\AppData\\Local\\Temp\\asLocalRepo5085.gradle] \n2017-09-18 08:20:17,753 [ 870187]   INFO - xecution.GradleExecutionHelper - Passing command-line args to Gradle Tooling API: [--configure-on-demand, -Pandroid.injected.invoked.from.ide=true, --init-script, C:\\Users\\User2\\AppData\\Local\\Temp\\asLocalRepo5085.gradle] \n2017-09-18 08:20:37,451 [ 889885]   INFO - roid.sdk.MessageBuildingSdkLog - com.android.ide.common.blame.Message.&lt;init&gt;(com.android.ide.common.blame.Message$Kind, java.lang.String, java.lang.String, com.google.common.collect.ImmutableList) \njava.lang.NoSuchMethodException: com.android.ide.common.blame.Message.&lt;init&gt;(com.android.ide.common.blame.Message$Kind, java.lang.String, java.lang.String, com.google.common.collect.ImmutableList)\n    at java.lang.Class.getConstructor0(Class.java:3082)\n    at java.lang.Class.getConstructor(Class.java:1825)\n    at org.jetbrains.kotlin.android.KotlinOutputParserHelper$simpleMessageConstructor$2.invoke(KotlinOutputParserHelper.kt:171)\n    at org.jetbrains.kotlin.android.KotlinOutputParserHelper$simpleMessageConstructor$2.invoke(KotlinOutputParserHelper.kt:143)\n    at kotlin.SynchronizedLazyImpl.getValue(Lazy.kt:130)\n    at org.jetbrains.kotlin.android.KotlinOutputParserHelper.getSimpleMessageConstructor(KotlinOutputParserHelper.kt)\n    at org.jetbrains.kotlin.android.KotlinOutputParserHelper.createNewMessage(KotlinOutputParserHelper.kt:272)\n    at org.jetbrains.kotlin.android.KotlinOutputParserHelper.createMessage(KotlinOutputParserHelper.kt:250)\n    at org.jetbrains.kotlin.android.KotlinOutputParserHelper.createMessage$default(KotlinOutputParserHelper.kt:244)\n    at org.jetbrains.kotlin.android.KotlinOutputParserHelperKt.parse(KotlinOutputParserHelper.kt:41)\n    at org.jetbrains.kotlin.android.KotlinOutputParser.parse(KotlinOutputParser.java:28)\n    at com.android.ide.common.blame.parser.ToolOutputParser.parseToolOutput(ToolOutputParser.java:86)\n    at com.android.tools.idea.gradle.output.parser.BuildOutputParser.parseGradleOutput(BuildOutputParser.java:43)\n    at com.android.tools.idea.gradle.project.build.invoker.GradleTasksExecutor$GradleTasksExecutorImpl.lambda$collectMessages$5(GradleTasksExecutor.java:516)\n    at com.intellij.openapi.application.impl.ApplicationImpl$2.run(ApplicationImpl.java:307)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n2017-09-18 08:20:37,452 [ 889886]   INFO - roid.sdk.MessageBuildingSdkLog - Exception from KotlinOutputParser \n2017-09-18 08:20:37,482 [ 889916]   INFO - pl.ProjectRootManagerComponent - project roots have changed \n2017-09-18 08:20:37,724 [ 890158]   INFO - .diagnostic.PerformanceWatcher - Pushing properties took 99ms; general responsiveness: ok; EDT responsiveness: ok \n2017-09-18 08:20:37,741 [ 890175]   INFO - .diagnostic.PerformanceWatcher - Indexable file iteration took 17ms; general responsiveness: ok; EDT responsiveness: ok \n2017-09-18 08:20:37,741 [ 890175]   INFO - indexing.UnindexedFilesUpdater - Unindexed files update started: 30 files to update \n2017-09-18 08:20:38,005 [ 890439]   INFO - .diagnostic.PerformanceWatcher - Unindexed files update took 264ms; general responsiveness: ok; EDT responsiveness: ok \n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "is_accepted": false, "score": 0, "last_activity_date": 1505715688, "last_edit_date": 1505715688, "creation_date": 1505709181, "answer_id": 46271657, "question_id": 46271394, "link": "https://stackoverflow.com/questions/46271394/how-can-i-suppress-unchecked-cast-warnings-before-destructuring-declaration/46271657#46271657", "title": "how can i suppress unchecked cast warnings before destructuring declaration?", "body": "<p>You can annotate the expression like this:</p>\n\n<pre><code>val (token,role) = @Suppress(\"UNCHECKED_CAST\") (authentication.details as Pair&lt;String?,String?&gt;)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7265565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a3f97c8831d18eb1d9824b1cef06272?s=128&d=identicon&r=PG&f=1", "display_name": "user7265565", "link": "https://stackoverflow.com/users/7265565/user7265565"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 495, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1505715688, "creation_date": 1505707083, "last_edit_date": 1505708181, "question_id": 46271394, "link": "https://stackoverflow.com/questions/46271394/how-can-i-suppress-unchecked-cast-warnings-before-destructuring-declaration", "title": "how can i suppress unchecked cast warnings before destructuring declaration?", "body": "<p>the IDE show me the tips that @Suppress can not placed before destructuring declaration</p>\n\n<pre><code>@Suppress(\"UNCHECKED_CAST\")\nvar test = authentication.details as Pair&lt;String?,String?&gt;\n@Suppress(\"UNCHECKED_CAST\")\nval (token,role) = authentication.details as Pair&lt;String?,String?&gt;\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/ISzH1.jpg\" alt=\"enter image description here\"></p>\n"}, {"tags": ["kotlin", "kotlin-interop"], "comments": [{"owner": {"reputation": 4405, "user_id": 631814, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4c8f02294f1d1e1c578542deff566367?s=128&d=identicon&r=PG", "display_name": "Stepango", "link": "https://stackoverflow.com/users/631814/stepango"}, "edited": false, "score": 0, "creation_date": 1505702637, "post_id": 46270571, "comment_id": 79504248, "body": "Because <code>Callable&lt;String?&gt;</code> != <code>Callable&lt;String&gt;</code>, have you tried to declare <code>class GenericArgument : Callable&lt;String&gt;</code> ?"}, {"owner": {"reputation": 7020, "user_id": 4822566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HlNVB.png?s=128&g=1", "display_name": "Alex Taylor", "link": "https://stackoverflow.com/users/4822566/alex-taylor"}, "reply_to_user": {"reputation": 4405, "user_id": 631814, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4c8f02294f1d1e1c578542deff566367?s=128&d=identicon&r=PG", "display_name": "Stepango", "link": "https://stackoverflow.com/users/631814/stepango"}, "edited": false, "score": 0, "creation_date": 1505707566, "post_id": 46270571, "comment_id": 79505296, "body": "That just changes the expected type mismatch to <code>Class&lt;Callable&lt;String&gt;&gt;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 7020, "user_id": 4822566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HlNVB.png?s=128&g=1", "display_name": "Alex Taylor", "link": "https://stackoverflow.com/users/4822566/alex-taylor"}, "edited": false, "score": 0, "creation_date": 1505708009, "post_id": 46271183, "comment_id": 79505395, "body": "I understand there is a difference between <code>String</code> and <code>String?</code>. After that, perhaps my example breaks down a little. It&#39;s actually an abstract Java class that I&#39;m extending. The method I want to use is on the base class. That is someone else&#39;s library, making changes difficult. It&#39;s not actually a <code>Callable</code>; that was just to provide an example with the same problem. I also realise that <code>callable.toString()</code> isn&#39;t particularly useful. Once again, that was just to prove the point. It sounds like I have to change the callee (<code>hello</code>), but the caller (<code>call</code>) is the bit I can modify."}, {"owner": {"reputation": 4677, "user_id": 3673259, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/DPHO1.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3673259/joshua"}, "reply_to_user": {"reputation": 7020, "user_id": 4822566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HlNVB.png?s=128&g=1", "display_name": "Alex Taylor", "link": "https://stackoverflow.com/users/4822566/alex-taylor"}, "edited": false, "score": 0, "creation_date": 1505708413, "post_id": 46271183, "comment_id": 79505478, "body": "@AlexTaylor Java does not have generic metadata at runtime so generic cast can result in error."}, {"owner": {"reputation": 7020, "user_id": 4822566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HlNVB.png?s=128&g=1", "display_name": "Alex Taylor", "link": "https://stackoverflow.com/users/4822566/alex-taylor"}, "edited": false, "score": 0, "creation_date": 1505708800, "post_id": 46271183, "comment_id": 79505569, "body": "And Kotlin provides no ability to guard against it? Basically, the Java code couldn&#39;t provide runtime type safety in this situation, but Kotlin gives you a warning? I&#39;ve updated the code with something closer to my real code."}, {"owner": {"reputation": 4677, "user_id": 3673259, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/DPHO1.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3673259/joshua"}, "reply_to_user": {"reputation": 7020, "user_id": 4822566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HlNVB.png?s=128&g=1", "display_name": "Alex Taylor", "link": "https://stackoverflow.com/users/4822566/alex-taylor"}, "edited": false, "score": 0, "creation_date": 1505708946, "post_id": 46271183, "comment_id": 79505604, "body": "@AlexTaylor This is the JVM limitation not Java code. Kotlin compile its code to run on JVM. Kotlin give you a warning because it cannot be checked. I will have to look at your code later as I am going out for lunch."}, {"owner": {"reputation": 4677, "user_id": 3673259, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/DPHO1.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3673259/joshua"}, "reply_to_user": {"reputation": 7020, "user_id": 4822566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HlNVB.png?s=128&g=1", "display_name": "Alex Taylor", "link": "https://stackoverflow.com/users/4822566/alex-taylor"}, "edited": false, "score": 0, "creation_date": 1505712359, "post_id": 46271183, "comment_id": 79506566, "body": "@AlexTaylor  See my edit. After your update, your example only solution is force cast. But you can improve safety by implement a Kotlin function to do the force cast instead of everywhere that you call the method."}, {"owner": {"reputation": 7020, "user_id": 4822566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HlNVB.png?s=128&g=1", "display_name": "Alex Taylor", "link": "https://stackoverflow.com/users/4822566/alex-taylor"}, "edited": false, "score": 1, "creation_date": 1505713461, "post_id": 46271183, "comment_id": 79506962, "body": "OK, so we separate out the cast as a function so the suppression only affects the problem code. Got it."}], "tags": [], "owner": {"reputation": 4677, "user_id": 3673259, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/DPHO1.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3673259/joshua"}, "is_accepted": true, "score": 0, "last_activity_date": 1505712258, "last_edit_date": 1505712258, "creation_date": 1505705262, "answer_id": 46271183, "question_id": 46270571, "link": "https://stackoverflow.com/questions/46270571/kotlin-syntax-for-inferring-generic-supertype-from-subtype/46271183#46271183", "title": "Kotlin syntax for inferring generic supertype from subtype", "body": "<p>There are several problems in your code.</p>\n\n<p>First, <code>Callable&lt;String?&gt;</code> is no equal to <code>Callable&lt;String&gt;</code>. <code>Callable&lt;String?&gt;</code> means the argument can be <code>String</code> or <code>null</code> but <code>Callable&lt;String&gt;</code> is <code>String</code> only.</p>\n\n<p>Second, <code>Class&lt;GenericArgument&gt;</code> does not implement <code>Class&lt;Callable&lt;String&gt;&gt;</code> but <code>GenericArgument</code> implements <code>Callable&lt;String&gt;</code>. they are different. You can change it to use generic instead.</p>\n\n<pre><code>private fun &lt;T : Callable&lt;String&gt;&gt; hello(callable: Class&lt;T&gt;) {\n    System.out.println(callable.toString())\n}\n</code></pre>\n\n<p>Now, the generic parameter is bound by <code>Callable&lt;String&gt;</code>.</p>\n\n<p>Third, <code>callable.toString()</code> probably does not do what you want. <code>callable.toString()</code>  will call the <code>toString()</code> of the class instead of object, e.g. <code>class com.example.yourclass</code>. If you want to call the object <code>toString()</code>. This is the correct one.</p>\n\n<pre><code>override fun call(): String {\n    hello(GenericArgument())\n    return \"value\"\n}\n\nprivate fun &lt;T : Callable&lt;String&gt;&gt; hello(callable: T) {\n    System.out.println(callable.toString())\n}\n</code></pre>\n\n<p>Moreover, Kotlin allows to pass function as parameter or use SAM for interface. Implementing for <code>Callable</code> is not necessary.</p>\n\n<p>Edit: As op updated the question.</p>\n\n<pre><code>@Suppress(\"UNCHECKED_CAST\")\nfun &lt;T, U : JavaCode&lt;T&gt;&gt; JavaCode&lt;T&gt;.doTheThing2(thing: Class&lt;U&gt;) {\n    doTheThing(thing as Class&lt;JavaCode&lt;T&gt;&gt;)\n}\n</code></pre>\n"}], "owner": {"reputation": 7020, "user_id": 4822566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HlNVB.png?s=128&g=1", "display_name": "Alex Taylor", "link": "https://stackoverflow.com/users/4822566/alex-taylor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 685, "favorite_count": 1, "accepted_answer_id": 46271183, "answer_count": 1, "score": 1, "last_activity_date": 1505712258, "creation_date": 1505699657, "last_edit_date": 1505708563, "question_id": 46270571, "link": "https://stackoverflow.com/questions/46270571/kotlin-syntax-for-inferring-generic-supertype-from-subtype", "title": "Kotlin syntax for inferring generic supertype from subtype", "body": "<p>Trying to call existing Java code that expects a <code>Class</code> as a parameter, I tried code along the lines of this in Kotlin:</p>\n\n<pre><code>package com.example\n\n//Acutally imported Java code in someone elses's library\nabstract class JavaCode&lt;T&gt; {\n    fun doTheThing(thing: Class&lt;JavaCode&lt;T&gt;&gt;) {\n        //Does work\n    }\n}\n\n//My code\nclass KotlinCode : JavaCode&lt;String&gt;() {\n    fun startTheThing() {\n        doTheThing(KotlinCode::class.java)\n    }                             // ^ Type inference failed. Expected type mismatch\n}\n</code></pre>\n\n<p>But that does not compile with the following error:</p>\n\n<pre><code>Type inference failed. Expected type mismatch: inferred type is Class&lt;KotlinCode&gt; but Class&lt;JavaCode&lt;String&gt;&gt; was expected\n</code></pre>\n\n<p>So I tried to force a cast (as suggested in <a href=\"https://stackoverflow.com/questions/43982630/inferring-a-generic-type-of-map-in-kotlin\">this answer</a>):</p>\n\n<pre><code>hello(GenericArgument::class.java as Class&lt;Callable&lt;String&gt;&gt;)\n</code></pre>\n\n<p>But that has a warning:</p>\n\n<pre><code>Unchecked cast: Class&lt;KotlinCode&gt; to Class&lt;JavaCode&lt;String&gt;&gt;\n</code></pre>\n\n<p>So what is the correct syntax to use? Is <a href=\"https://stackoverflow.com/a/43983008/4822566\">this</a> related?</p>\n"}, {"tags": ["javascript", "json", "kotlin", "kotlin-js-interop"], "comments": [{"owner": {"reputation": 13500, "user_id": 1032167, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/41bf03526866687e26d626c0fcb07a5d?s=128&d=identicon&r=PG", "display_name": "varren", "link": "https://stackoverflow.com/users/1032167/varren"}, "edited": false, "score": 0, "creation_date": 1505706145, "post_id": 46270191, "comment_id": 79505008, "body": "I played some time with kotlin and... Not 100% sure that i&#39;m right, but actually what this code is doing is calling java <code>Map.toString()</code> and then gives this value to js <code>JSON.stringify</code>, so <code>&quot;{name=albert, age=26, work=[1, 2, 3]}&quot;</code> is not json, but map.toString() and <code>JSON.stringify</code> just adds quotes around this string. What you could do is to convert test data with jackson or gson in java and just forget about JSON or you could try <a href=\"https://github.com/Kotlin/kotlinx.serialization\" rel=\"nofollow noreferrer\">github.com/Kotlin/kotlinx.serialization</a>  Also take a look at <a href=\"https://discuss.kotlinlang.org/t/kotlin-serialization/2063/25\" rel=\"nofollow noreferrer\">discuss.kotlinlang.org/t/kotlin-serialization/2063/25</a>"}, {"owner": {"reputation": 3074, "user_id": 1321025, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/QFW8g.jpg?s=128&g=1", "display_name": "Albert Gao", "link": "https://stackoverflow.com/users/1321025/albert-gao"}, "reply_to_user": {"reputation": 13500, "user_id": 1032167, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/41bf03526866687e26d626c0fcb07a5d?s=128&d=identicon&r=PG", "display_name": "varren", "link": "https://stackoverflow.com/users/1032167/varren"}, "edited": false, "score": 0, "creation_date": 1505707015, "post_id": 46270191, "comment_id": 79505185, "body": "@varren Thanks very much for the help. It&#39;s a full KotinJS environment, so can&#39;t take advantage from JVM world :( I tried <code>println(JSON.stringify(testData.toString()))</code>, still no quotes. According to the posts you share, seems that built-in serialization things haven&#39;t land to KotlinJS world yet. I will look into 3rd party libs as you said, thanks."}], "answers": [{"comments": [{"owner": {"reputation": 3074, "user_id": 1321025, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/QFW8g.jpg?s=128&g=1", "display_name": "Albert Gao", "link": "https://stackoverflow.com/users/1321025/albert-gao"}, "edited": false, "score": 0, "creation_date": 1505732717, "post_id": 46274411, "comment_id": 79518148, "body": "Much better, ok for my current usage, thanks! Waiting for you guys to release :)"}, {"owner": {"reputation": 3074, "user_id": 1321025, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/QFW8g.jpg?s=128&g=1", "display_name": "Albert Gao", "link": "https://stackoverflow.com/users/1321025/albert-gao"}, "edited": false, "score": 0, "creation_date": 1505786948, "post_id": 46274411, "comment_id": 79544310, "body": "Could we iterate through the Json object&#39;s properties?"}, {"owner": {"reputation": 2015, "user_id": 1109309, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f8a2b866ae0dc92a9e774d0094da8f4d?s=128&d=identicon&r=PG", "display_name": "Alexey Andreev", "link": "https://stackoverflow.com/users/1109309/alexey-andreev"}, "reply_to_user": {"reputation": 3074, "user_id": 1321025, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/QFW8g.jpg?s=128&g=1", "display_name": "Albert Gao", "link": "https://stackoverflow.com/users/1321025/albert-gao"}, "edited": false, "score": 0, "creation_date": 1505807949, "post_id": 46274411, "comment_id": 79552426, "body": "You can call <code>Object.keys()</code> or <code>Object.getOwnPropertyNames()</code>, either as inline JS or define these methods as external."}, {"owner": {"reputation": 3074, "user_id": 1321025, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/QFW8g.jpg?s=128&g=1", "display_name": "Albert Gao", "link": "https://stackoverflow.com/users/1321025/albert-gao"}, "edited": false, "score": 0, "creation_date": 1505818596, "post_id": 46274411, "comment_id": 79559347, "body": "Thanks. But those are JS methods right? The data I got is <code>kotlin.js.Json</code>, I tried using <code>(data as dynamic).keys()</code>, cause an error: Dynamic types are not allowed in this position :("}, {"owner": {"reputation": 2015, "user_id": 1109309, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f8a2b866ae0dc92a9e774d0094da8f4d?s=128&d=identicon&r=PG", "display_name": "Alexey Andreev", "link": "https://stackoverflow.com/users/1109309/alexey-andreev"}, "reply_to_user": {"reputation": 3074, "user_id": 1321025, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/QFW8g.jpg?s=128&g=1", "display_name": "Albert Gao", "link": "https://stackoverflow.com/users/1321025/albert-gao"}, "edited": false, "score": 0, "creation_date": 1505818969, "post_id": 46274411, "comment_id": 79559612, "body": "The proper syntax is <code>data.asDynamic().keys()</code>. But this won&#39;t work, since <code>keys()</code> is not a member function. You should write something like js(&quot;Object.keys(data)&quot;) or      external class Object {         companion object {             fun keys(value: Any): Array&lt;String&gt;         }     }      Object.keys(data)"}], "tags": [], "owner": {"reputation": 2015, "user_id": 1109309, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f8a2b866ae0dc92a9e774d0094da8f4d?s=128&d=identicon&r=PG", "display_name": "Alexey Andreev", "link": "https://stackoverflow.com/users/1109309/alexey-andreev"}, "is_accepted": true, "score": 3, "last_activity_date": 1505721886, "creation_date": 1505721886, "answer_id": 46274411, "question_id": 46270191, "link": "https://stackoverflow.com/questions/46270191/how-to-serialize-a-map-to-json-string-via-json-stringify-in-kotlin-js/46274411#46274411", "title": "How to serialize a Map to JSON string via JSON.stringify in kotlin JS?", "body": "<p>Actually, you don't get the result of <code>JSON.stringify</code>. Instead, you get result of <code>kotlin.collections.HashMap.toString</code>. The reason is following: you pass the lambda as a second parameter: <code>{ _, value -&gt; value.toString() }</code>. This converts your entire map to string, using, <code>toString()</code> function. And <code>HashMap.toString</code> function is defined to generate such string, which <strong>is not</strong> a JSON string. You should have used <code>JSON.stringify</code> without second and third parameter. However, this won't work as well, producing <code>Uncaught TypeError: Converting circular structure to JSON</code> error. The reason is following: <code>JSON.stringify</code> is not part of Kotlin language, it's just a <a href=\"http://kotlinlang.org/api/latest/jvm/stdlib/kotlin.js/-j-s-o-n/index.html\" rel=\"nofollow noreferrer\">typed definition</a> of a native browser object, called JSON. <code>HashMap</code> is not an empty JavaScript object, it allows using any types of objects as keys, it exposes Java-like <code>Map</code> API, which is unavailable in JavaScript object. So, <code>HashMap</code> is not suitable for what you doing. There are several solutions:</p>\n\n<ol>\n<li><p>You can wait until we publish Kotlin multiplatform serilization, see <a href=\"https://discuss.kotlinlang.org/t/kotlin-serialization/2063\" rel=\"nofollow noreferrer\">the corresponding discussion</a>. This API is capable of understanding Kotlin clases and converting them to JSON properly.</p></li>\n<li><p>Don't use Kotlin maps and lists, use native JavaScript entities, like <a href=\"http://kotlinlang.org/api/latest/jvm/stdlib/kotlin.js/json.html\" rel=\"nofollow noreferrer\">json</a> and pure arrays. Your example can be rewritten the following way:</p>\n\n<p>import kotlin.js.json</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    val testData = json(\n        \"name\" to \"albert\",\n        \"age\" to 26,\n        \"work\" to arrayOf(\"1\", \"2\", \"3\")\n    )\n\n    var value = JSON.stringify(testData)\n\n    println(value)\n}\n</code></pre></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 406, "user_id": 1644647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qZyFl.jpg?s=128&g=1", "display_name": "jabgibson", "link": "https://stackoverflow.com/users/1644647/jabgibson"}, "is_accepted": false, "score": 1, "last_activity_date": 1567202080, "creation_date": 1567202080, "answer_id": 57733599, "question_id": 46270191, "link": "https://stackoverflow.com/questions/46270191/how-to-serialize-a-map-to-json-string-via-json-stringify-in-kotlin-js/57733599#57733599", "title": "How to serialize a Map to JSON string via JSON.stringify in kotlin JS?", "body": "<p>This answer comes a few years after the previous accepted answer, but I (who am new to Kotlin) ran into this same problem, and figured out a nice way to achieve this.</p>\n\n<ol>\n<li>Assume you have a populated Map</li>\n<li>Create an empty js object (seems hacky to me, but this is Kotlin to JS)</li>\n<li>iterate over the your map's \"toList\" method which provides a Pair</li>\n<li>insert each pair into js object</li>\n<li>grab the js JSON api</li>\n<li><p>and call \"stringify\" providing your js object. Remember to \"toString\" at the end</p>\n\n<pre><code>val data: Map&lt;String, Any?&gt; = mapOf() // 1\nval export = js(\"{}\") // 2\nfor (pair: Pair&lt;String, Any?&gt; in data.toList()) { // 3\n    export[pair.first] = pair.second // 4\n}\nval jsoner = js(\"JSON\") // 5\nreturn jsoner.stringify(export).toString() // 6\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 3074, "user_id": 1321025, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/QFW8g.jpg?s=128&g=1", "display_name": "Albert Gao", "link": "https://stackoverflow.com/users/1321025/albert-gao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9900, "favorite_count": 0, "accepted_answer_id": 46274411, "answer_count": 2, "score": 2, "last_activity_date": 1567202080, "creation_date": 1505695963, "question_id": 46270191, "link": "https://stackoverflow.com/questions/46270191/how-to-serialize-a-map-to-json-string-via-json-stringify-in-kotlin-js", "title": "How to serialize a Map to JSON string via JSON.stringify in kotlin JS?", "body": "<p>My example code is below:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    val testData = mapOf&lt;String, Any&gt;(\n        \"name\" to \"albert\",\n        \"age\" to 26,\n        \"work\" to listOf(\"1\", \"2\", \"3\")\n    )\n\n    var value = JSON.stringify(testData, { _, value -&gt; value.toString() }, 2)\n\n    println(value)\n}\n</code></pre>\n\n<p>The result is <code>\"{name=albert, age=26, work=[1, 2, 3]}\"</code>.\nSeems it misses all the double quotes around the property name and string value.</p>\n\n<p>I'm using <code>KotlinJS</code> rather than <code>Kotlin</code></p>\n\n<p>So, how to solve this?</p>\n"}, {"tags": ["android", "android-fragments", "mvvm", "kotlin", "android-architecture-components"], "comments": [{"owner": {"reputation": 153906, "user_id": 1676363, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44dac57d3bb65805bc3df4409d019c83?s=128&d=identicon&r=PG", "display_name": "ianhanniballake", "link": "https://stackoverflow.com/users/1676363/ianhanniballake"}, "edited": false, "score": 1, "creation_date": 1505682071, "post_id": 46268768, "comment_id": 79500137, "body": "What&#39;s wrong with having multiple ViewModels per component? They are keyed by class name for a reason."}, {"owner": {"reputation": 2958, "user_id": 3874721, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/yKbYg.jpg?s=128&g=1", "display_name": "Yurii Tsap", "link": "https://stackoverflow.com/users/3874721/yurii-tsap"}, "reply_to_user": {"reputation": 153906, "user_id": 1676363, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44dac57d3bb65805bc3df4409d019c83?s=128&d=identicon&r=PG", "display_name": "ianhanniballake", "link": "https://stackoverflow.com/users/1676363/ianhanniballake"}, "edited": false, "score": 0, "creation_date": 1505682601, "post_id": 46268768, "comment_id": 79500286, "body": "@ianhanniballake Hm, my thoughts on that are controversial. Always was trying to bind only one VM to one component. Lets say VM per component. <a href=\"https://github.com/googlesamples/android-architecture-components/issues/29\" rel=\"nofollow noreferrer\">github.com/googlesamples/android-architecture-components/iss&zwnj;&#8203;ues/&hellip;</a> - not the same, but viewmodel per screen."}, {"owner": {"reputation": 1560, "user_id": 4758618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f04c304d3c41dcc6f9b721cbe22d4f0?s=128&d=identicon&r=PG&f=1", "display_name": "V-master", "link": "https://stackoverflow.com/users/4758618/v-master"}, "edited": false, "score": 0, "creation_date": 1507209222, "post_id": 46268768, "comment_id": 80126014, "body": "when i had many viewmodels, all communication I had made through streams and changing variables in shared managers/models ex. first fragment changes input to 6 and sets it in manager (model) and manager using observable pattern (in your case it may be mutablelivedata) notify observers (other fragments observing live data variable) that value has changed"}, {"owner": {"reputation": 2958, "user_id": 3874721, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/yKbYg.jpg?s=128&g=1", "display_name": "Yurii Tsap", "link": "https://stackoverflow.com/users/3874721/yurii-tsap"}, "reply_to_user": {"reputation": 1560, "user_id": 4758618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f04c304d3c41dcc6f9b721cbe22d4f0?s=128&d=identicon&r=PG&f=1", "display_name": "V-master", "link": "https://stackoverflow.com/users/4758618/v-master"}, "edited": false, "score": 0, "creation_date": 1507209533, "post_id": 46268768, "comment_id": 80126239, "body": "@V-master Sure, but in such case I need to have a reference to model/manager. So I&#39;ll reference two viewmodels in my fragment."}, {"owner": {"reputation": 2259, "user_id": 2680254, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/100000442252147/picture?type=large", "display_name": "Gilberto Ibarra", "link": "https://stackoverflow.com/users/2680254/gilberto-ibarra"}, "edited": false, "score": 1, "creation_date": 1510699646, "post_id": 46268768, "comment_id": 81544385, "body": "What was your conclusion?"}], "answers": [{"tags": [], "owner": {"reputation": 1695, "user_id": 4487858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/08fvj.jpg?s=128&g=1", "display_name": "Robert Nagy", "link": "https://stackoverflow.com/users/4487858/robert-nagy"}, "is_accepted": false, "score": 7, "last_activity_date": 1516808186, "creation_date": 1516808186, "answer_id": 48426206, "question_id": 46268768, "link": "https://stackoverflow.com/questions/46268768/viewmodel-for-fragment-instead-accessing-activity-viewmodel/48426206#48426206", "title": "ViewModel for Fragment instead accessing Activity ViewModel?", "body": "<p>First there is no harm in having <em>multiple</em> <code>ViewModel</code>'s for a <em>single</em> <strong>View</strong>.</p>\n\n<p>I would think about my <strong>ViewModel</strong>'s like what kind of <em>data</em> is getting and manipulating, and group them in a way, that seems natural.</p>\n\n<p>For your case, if the fragments and the activity's logic is very similar, I think you can go with a single <code>ViewModel</code>, but I would avoid that.</p>\n\n<p>What I would do is break the activity's <code>ViewModel</code> into smaller parts and reuse the proper <code>ViewModel</code>'s in my <code>Fragments</code>, so that I wouldn't have a <strong>God ViewModel</strong>, nor roughly the same code in different <strong>ViewModel</strong>'s.</p>\n"}, {"tags": [], "owner": {"reputation": 8306, "user_id": 10271334, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2ijZhRVumwM/AAAAAAAAAAI/AAAAAAAACes/Tjw_JgqObGI/photo.jpg?sz=128", "display_name": "Jeel Vankhede", "link": "https://stackoverflow.com/users/10271334/jeel-vankhede"}, "is_accepted": false, "score": 14, "last_activity_date": 1539147144, "creation_date": 1539147144, "answer_id": 52732831, "question_id": 46268768, "link": "https://stackoverflow.com/questions/46268768/viewmodel-for-fragment-instead-accessing-activity-viewmodel/52732831#52732831", "title": "ViewModel for Fragment instead accessing Activity ViewModel?", "body": "<p><strong>What i would suggest</strong> you can do is handle two <code>ViewModel</code> for your entire use case.</p>\n\n<p>Make one <code>ViewModel</code></p>\n\n<p>Let's say <strong><code>MyActivityViewModel</code></strong> to handle all logic related for <strong>activity</strong> level. So, if any <strong>fragment</strong> logic is directly related to your <strong>activity</strong> then share your <code>ViewModel</code> like below :</p>\n\n<pre><code>ViewModelProviders.of(getActivity()).get(MyActivityViewModel.class); // Like this in fragment.\n</code></pre>\n\n<p>&amp;</p>\n\n<pre><code>ViewModelProviders.of(this).get(MyActivityViewModel.class); // Like this in activity.\n</code></pre>\n\n<p><em>This will share common <code>ViewModel</code> between your <strong>activity</strong> and <strong>fragment</em></strong>.</p>\n\n<hr>\n\n<p>Another <code>ViewModel</code> would go for <code>FirstFragment</code> in your case if you have to share logic between your <code>ChildFragment</code> :</p>\n\n<p>Here you can share <code>ViewModel</code> let's say <code>FragmentViewModel</code> like below:</p>\n\n<pre><code>ViewModelProviders.of(this).get(FragmentViewModel.class); // Like this in FirstFragment which is having view pager.\n</code></pre>\n\n<p>&amp;</p>\n\n<pre><code>ViewModelProviders.of(getParentFragment()).get(FragmentViewModel.class); // Like this in View pager fragments, getParentFragment() is First fragment in our case.\n</code></pre>\n\n<p>Although, we can still use our activity level <strong><code>MyActivityViewModel</code></strong> in our child fragments from FirstFragment like :</p>\n\n<pre><code>ViewModelProviders.of(getActivity()).get(MyActivityViewModel.class);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 546, "user_id": 10030693, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZIG43NDeCwE/AAAAAAAAAAI/AAAAAAAAAVc/QImMCtmMqy8/photo.jpg?sz=128", "display_name": "Gilboot", "link": "https://stackoverflow.com/users/10030693/gilboot"}, "is_accepted": false, "score": 0, "last_activity_date": 1589661350, "creation_date": 1589661350, "answer_id": 61843206, "question_id": 46268768, "link": "https://stackoverflow.com/questions/46268768/viewmodel-for-fragment-instead-accessing-activity-viewmodel/61843206#61843206", "title": "ViewModel for Fragment instead accessing Activity ViewModel?", "body": "<p>To solve the problem of <code>FirstFragment</code> sharing its view model with its child fragments, you can use this code to access the <code>FirstFragmentViewModel</code> from any of the child fragments:</p>\n\n<pre><code>    // in ChildFragment1\n    val firstFragmentViewModel: FirstFragmentViewModel by viewModels(\n        { requireParentFragment() }\n    )\n\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 73, "user_id": 10710395, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-2S1wbaBzU-Y/AAAAAAAAAAI/AAAAAAAAsXA/6lgFc0Ci8cc/photo.jpg?sz=128", "display_name": "Dashesh", "link": "https://stackoverflow.com/users/10710395/dashesh"}, "is_accepted": false, "score": 1, "last_activity_date": 1597995061, "creation_date": 1597995061, "answer_id": 63518430, "question_id": 46268768, "link": "https://stackoverflow.com/questions/46268768/viewmodel-for-fragment-instead-accessing-activity-viewmodel/63518430#63518430", "title": "ViewModel for Fragment instead accessing Activity ViewModel?", "body": "<p>This is updated version of answer given by Jeel Vankhede. And also Kotlin implementation of the same.</p>\n<p>Since ViewModelProviders is deprecated now we have to use ViewModelProvider.</p>\n<p>Here is how you do it in Activity:</p>\n<pre><code>ViewModelProvider(this).get(MyActivityViewModel::class.java)\n</code></pre>\n<p>Here is how you do  in Fragment:</p>\n<pre><code>ViewModelProvider(requireActivity()).get(MyActivityViewModel::class.java)\n</code></pre>\n"}], "owner": {"reputation": 2958, "user_id": 3874721, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/yKbYg.jpg?s=128&g=1", "display_name": "Yurii Tsap", "link": "https://stackoverflow.com/users/3874721/yurii-tsap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12079, "favorite_count": 19, "answer_count": 4, "score": 24, "last_activity_date": 1597995061, "creation_date": 1505681473, "last_edit_date": 1505724859, "question_id": 46268768, "link": "https://stackoverflow.com/questions/46268768/viewmodel-for-fragment-instead-accessing-activity-viewmodel", "title": "ViewModel for Fragment instead accessing Activity ViewModel?", "body": "<p>The problem is quite straightforward. The question is in context of using ViewModels, LiveData and other related <a href=\"https://developer.android.com/reference/android/arch/lifecycle/package-summary.html\" rel=\"noreferrer\">Lifecycle</a> aware arch approaches.\n<br/>I have an Activity with NavDrawer, which switches fragments inside. <br>And also I have a case when two fragments are present at the same time on the screen - this will be the main pain.\nOne Fragment has a ViewPager with nested <code>Fragments</code>(<strong>don't ask why</strong>).\nThe other fragment is just obtaining info from first one when user performs some actions. This is achieved just by sharing activity viewmodel. But the app itself has a lot of business logic and as it goes further the viewmodel goes bigger and bigger.\n<br/> What I want to ask - not a receipt or rules how to fix this, or maybe how to overcome this by fixing the entire structure of the project. I want to ask for suggestions how can I apply the MVVM approach within android.arch.lifecycle style to mine use-case.\n<br> I haven't seen something more complicated then just sharing the Activity ViewModel between Fragments. But common, that's not a cure.\n<a href=\"https://i.stack.imgur.com/kASaU.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/kASaU.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>What you can see here - a mess actually. The point is that all are sharing the <code>ActivityViewModel</code>. Connections(aggregation) from FirstFragment mean that <code>ViewPager</code> inside <code>FirstFragment</code> is initiating <code>ChildFragments</code> and they are also working with the same <code>ActivityViewModel</code>(kill me). So as result everyone is working with one shared ViewModel. \n<br> My proposal is to add a ViewModel for each Layer. So that Activity/Fragments/ChildFragments have their own ViewModels.\nBut what appears here - <strong><em>how we should communicate then</em></strong>?\n<br> Possible solutions :</p>\n\n<ul>\n<li>Having two ViewModels per one component. One ViewModel will handle/delegate the business logic and another will make the communication. <strong>Two viewmodels per component - not so good, yeah?</strong></li>\n<li>Having old manner interface(<strong>please no!</strong>)</li>\n<li><p>Other workarounds - like DB/SharedPrefs/Realm change listeners and Event Buses(<strong>I'm too old for this :(</strong> ).</p></li>\n<li><p><strong>Your solution here!</strong></p></li>\n</ul>\n\n<p>I'll say that all of the above are breaking a lot of design principles, so what should I do?\nHow should I come out of this mess? Is there any <code>Uncle Bob</code> or another <code>superhero</code> here to help?</p>\n\n<p><strong>P.S.</strong> - Well, creating UMLs or other charts isn't mine forte. Sorry for that. \n<br><strong>P.P.S.</strong> - I'm aware of <a href=\"https://github.com/googlesamples/android-architecture-components\" rel=\"noreferrer\">google</a> <a href=\"https://github.com/googlesamples/android-architecture\" rel=\"noreferrer\">samples</a>.</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 46728, "user_id": 557179, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7KJPr.jpg?s=128&g=1", "display_name": "Nikola Despotoski", "link": "https://stackoverflow.com/users/557179/nikola-despotoski"}, "edited": false, "score": 0, "creation_date": 1505661762, "post_id": 46265621, "comment_id": 79494022, "body": "<code>ApiCallback&lt;out ApiRs&gt;</code> this will take any type of <code>ApiRs</code>. See star-projections <a href=\"https://kotlinlang.org/docs/reference/generics.html#star-projections\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/generics.html#star-projections</a>"}, {"owner": {"reputation": 723, "user_id": 7730573, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6bb8f939b57df2c80c2bc04530773c8d?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan", "link": "https://stackoverflow.com/users/7730573/ivan"}, "reply_to_user": {"reputation": 46728, "user_id": 557179, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7KJPr.jpg?s=128&g=1", "display_name": "Nikola Despotoski", "link": "https://stackoverflow.com/users/557179/nikola-despotoski"}, "edited": false, "score": 0, "creation_date": 1505661831, "post_id": 46265621, "comment_id": 79494033, "body": "Does not work, when i using <code>ApiCallback&lt;out ApiRs&gt;</code>, than the warning above will show"}, {"owner": {"reputation": 58671, "user_id": 6509751, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/260caa996ae8ac9fcee35487aa8d7c81?s=128&d=identicon&r=PG&f=1", "display_name": "creativecreatorormaybenot", "link": "https://stackoverflow.com/users/6509751/creativecreatorormaybenot"}, "reply_to_user": {"reputation": 46728, "user_id": 557179, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7KJPr.jpg?s=128&g=1", "display_name": "Nikola Despotoski", "link": "https://stackoverflow.com/users/557179/nikola-despotoski"}, "edited": false, "score": 0, "creation_date": 1505665050, "post_id": 46265621, "comment_id": 79494970, "body": "@NikolaDespotoski Is right. Every API extending ApiRs will be accepted, but without another cast will only have the features your ApiRs class provides."}, {"owner": {"reputation": 723, "user_id": 7730573, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6bb8f939b57df2c80c2bc04530773c8d?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan", "link": "https://stackoverflow.com/users/7730573/ivan"}, "edited": false, "score": 0, "creation_date": 1505665221, "post_id": 46265621, "comment_id": 79495016, "body": "OK i know what you guys mean, change <code>ApiCallback&lt;ApiRs&gt;?</code> to <code>ApiCallback&lt;*&gt;?</code> right?"}, {"owner": {"reputation": 46728, "user_id": 557179, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7KJPr.jpg?s=128&g=1", "display_name": "Nikola Despotoski", "link": "https://stackoverflow.com/users/557179/nikola-despotoski"}, "edited": false, "score": 0, "creation_date": 1505674423, "post_id": 46265621, "comment_id": 79498001, "body": "No. <code>ApiCallback&lt;*&gt;</code> is same as <code>ApiCallback&lt;Any&gt;</code> you need setting upper limit of the type <code>ApiCallback&lt;out SpecificType&gt;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 723, "user_id": 7730573, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6bb8f939b57df2c80c2bc04530773c8d?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan", "link": "https://stackoverflow.com/users/7730573/ivan"}, "edited": false, "score": 0, "creation_date": 1505715360, "post_id": 46268009, "comment_id": 79507720, "body": "Thanks! your solution very make sense!"}], "tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": true, "score": 3, "last_activity_date": 1505676261, "creation_date": 1505676261, "answer_id": 46268009, "question_id": 46265621, "link": "https://stackoverflow.com/questions/46265621/wildcards-generic-in-kotlin-for-parameter/46268009#46268009", "title": "Wildcards generic in Kotlin for parameter", "body": "<p>I understand that you want to accept <code>apiCallback: ApiCallback&lt;ApiRs&gt;?</code> in your method in a way that the generic type of <code>ApiCallback</code> can be <code>ApiRs</code> itself or any of its subtypes. Instead of wildcards, Kotlin has <a href=\"https://kotlinlang.org/docs/reference/generics.html#generic-constraints\" rel=\"nofollow noreferrer\">upper bounds</a>. You can declare the function like this:</p>\n\n<pre><code>fun &lt;T: ApiRs&gt; isNetworkAvailable(apiCallback: ApiCallback&lt;T&gt;?,\n                       context: Context)\n</code></pre>\n"}], "owner": {"reputation": 723, "user_id": 7730573, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6bb8f939b57df2c80c2bc04530773c8d?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan", "link": "https://stackoverflow.com/users/7730573/ivan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1410, "favorite_count": 0, "accepted_answer_id": 46268009, "answer_count": 1, "score": 2, "last_activity_date": 1505717211, "creation_date": 1505661218, "last_edit_date": 1505717211, "question_id": 46265621, "link": "https://stackoverflow.com/questions/46265621/wildcards-generic-in-kotlin-for-parameter", "title": "Wildcards generic in Kotlin for parameter", "body": "<p>I have an abstract class using for listen api callback like below. ApiRs is a parent object that every API response object inherit from it</p>\n\n<pre><code>abstract class ApiCallback&lt;in T : ApiRs&gt; {\n\n    open fun onSucceed(apiRsModel: T) {}\n\n    open fun onFailed(code: Int,\n                      message: String) {\n    }\n}\n</code></pre>\n\n<p>and i also write a function to check network status before request api, if network is not connected, then it will trigger <code>onFailed</code></p>\n\n<pre><code>fun isNetworkAvailable(apiCallback: ApiCallback&lt;ApiRs&gt;?,\n                           context: Context): Boolean{\n        val connectivityManager = context\n                .getSystemService(Context.CONNECTIVITY_SERVICE) as ConnectivityManager\n        val networkInfo = connectivityManager.activeNetworkInfo\n\n        // device network unreachable\n        if (networkInfo == null\n                || !networkInfo.isConnected) {\n            // callback with network error\n            apiCallback?.onFailed(code, message)\n            return false\n        }\n\n        return true\n    }\n</code></pre>\n\n<p>the parameter type <code>ApiCallback&lt;ApiRs&gt;?</code> actually i want to write it like <code>ApiCallback&lt;? extends ApiRs&gt;?</code>, but Kotlin has no wildcard. If i replace the generic to <code>ApiCallback&lt;out ApiRs&gt;?</code>, it will show an error </p>\n\n<blockquote>\n  <p>Projection is conflicting with variance of the corresponding type parameter of ApiCallback</p>\n</blockquote>\n\n<p>Is there any way to fix it? or just i have wrong concept of Kotlin generic?</p>\n\n<hr>\n\n<p>2017/09/18 update - The right way is :</p>\n\n<p>Method : </p>\n\n<pre><code>fun &lt;T : ApiRs&gt; isNetworkAvailable(apiCallback: ApiCallback&lt;T&gt;?,\n                                       context: Context): Boolean {\n        val connectivityManager = context\n                .getSystemService(Context.CONNECTIVITY_SERVICE) as ConnectivityManager\n        val networkInfo = connectivityManager.activeNetworkInfo\n\n        // device network unreachable\n        if (networkInfo == null\n                || !networkInfo.isConnected) {\n            // callback with network error\n            callbackWithFailed(\n                    apiCallback,\n                    ApiError.API_ERROR_CODE_0,\n                    context.getString(R.string.api_error_code_0))\n            return false\n        }\n\n        return true\n    }\n</code></pre>\n"}, {"tags": ["intellij-idea", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1138, "user_id": 5800527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1040958575927029/picture?type=large", "display_name": "Andrew Nessin", "link": "https://stackoverflow.com/users/5800527/andrew-nessin"}, "edited": false, "score": 0, "creation_date": 1505662067, "post_id": 46265611, "comment_id": 79494096, "body": "Thank you! I saw the code for maxBy, and it is doing exactly what I am doing (transforming and keeping track of the maximum in the same loop). But I don&#39;t get how mapTo function is doing exactly what I am doing. mapTo is just transforming, but I am both transforming and keeping track of max element in the same loop. This seemed to take two loops in the IDE suggested code."}, {"owner": {"reputation": 11142, "user_id": 2229438, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/629fdde67cb23f9d3799635d89c7b250?s=128&d=identicon&r=PG", "display_name": "Grzegorz Piwowarek", "link": "https://stackoverflow.com/users/2229438/grzegorz-piwowarek"}, "reply_to_user": {"reputation": 1138, "user_id": 5800527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1040958575927029/picture?type=large", "display_name": "Andrew Nessin", "link": "https://stackoverflow.com/users/5800527/andrew-nessin"}, "edited": false, "score": 0, "creation_date": 1505662199, "post_id": 46265611, "comment_id": 79494130, "body": "@AndrewNessin yeah, I answered slightly different version of your question :) let me rephrase that"}, {"owner": {"reputation": 11142, "user_id": 2229438, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/629fdde67cb23f9d3799635d89c7b250?s=128&d=identicon&r=PG", "display_name": "Grzegorz Piwowarek", "link": "https://stackoverflow.com/users/2229438/grzegorz-piwowarek"}, "reply_to_user": {"reputation": 1138, "user_id": 5800527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1040958575927029/picture?type=large", "display_name": "Andrew Nessin", "link": "https://stackoverflow.com/users/5800527/andrew-nessin"}, "edited": false, "score": 0, "creation_date": 1505669528, "post_id": 46265611, "comment_id": 79496349, "body": "@AndrewNessin actually, thanks for the question. I will dedicate the whole article to this topic and cover it broader :) check 4comprehension.com"}], "tags": [], "owner": {"reputation": 11142, "user_id": 2229438, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/629fdde67cb23f9d3799635d89c7b250?s=128&d=identicon&r=PG", "display_name": "Grzegorz Piwowarek", "link": "https://stackoverflow.com/users/2229438/grzegorz-piwowarek"}, "is_accepted": true, "score": 5, "last_activity_date": 1505662327, "last_edit_date": 1505662327, "creation_date": 1505661174, "answer_id": 46265611, "question_id": 46265499, "link": "https://stackoverflow.com/questions/46265499/kotlin-chaining-collection-functions-performance/46265611#46265611", "title": "Kotlin chaining collection functions performance", "body": "<p><strong>TL;DR</strong></p>\n\n<p>Yes, there is a performance impact because those are actually two separate iterations.</p>\n\n<p>In this particular context, you can avoid doing the additional iteration by leveraging a dedicated <code>maxBy</code> method:</p>\n\n<pre><code>numbers.maxBy { incrementAndGetCurrentCountOf(it, tracer) } ?: 0\n</code></pre>\n\n<hr>\n\n<p>It's important to remember that Kotlin Collections, unlike Java Streams, are not lazy and all those fancy methods encapsulate simple imperative implementations.</p>\n\n<p>So <code>M</code> chained <code>map</code> calls result in O(M*N) in the optimistic case even if the whole processing could be short-circuited because visiting all elements is not necessary:</p>\n\n<pre><code>listOf(1, 2, 3)\n      .map {\n          println(it)\n      }.first()\n</code></pre>\n\n<p>this prints:</p>\n\n<pre><code>1\n2\n3\n</code></pre>\n\n<p>In such situations, it's important to remember about the existence of <code>asSequence</code> method which creates a lazily evaluated sequence backed by a given collection:</p>\n\n<pre><code>listOf(1, 2, 3).asSequence()\n      .map {\n          println(it)\n      }.first()\n</code></pre>\n\n<p>which prints:</p>\n\n<pre><code>1\n</code></pre>\n"}], "owner": {"reputation": 1138, "user_id": 5800527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1040958575927029/picture?type=large", "display_name": "Andrew Nessin", "link": "https://stackoverflow.com/users/5800527/andrew-nessin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 515, "favorite_count": 2, "accepted_answer_id": 46265611, "answer_count": 1, "score": 4, "last_activity_date": 1505662327, "creation_date": 1505660557, "question_id": 46265499, "link": "https://stackoverflow.com/questions/46265499/kotlin-chaining-collection-functions-performance", "title": "Kotlin chaining collection functions performance", "body": "<p>I am new to Kotlin and I am learning the language by solving simple puzzles in IntelliJ, using the tips presented by the IDE. I wrote this piece of code (Finding the most repeated number):</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    val tracer = mutableMapOf&lt;Int,Int&gt;()\n    var currentMaxCount = 0\n\n    val numbers = readLine()!!.split(' ').map(String :: toInt)\n\n    for(number in numbers) {\n        val currentCountOfNum = incrementAndGetCurrentCountOf(number, tracer)\n        currentMaxCount = if(currentCountOfNum &gt; currentMaxCount) currentCountOfNum else currentMaxCount\n    }\n\n    println(currentMaxCount)\n}\n\nfun incrementAndGetCurrentCountOf(num : Int, tracer: MutableMap&lt;Int,Int&gt;) =\n        if(tracer[num] == null) {\n            tracer.put(num, 1)\n            1\n        } else {\n            val newCount = tracer[num]!! + 1\n            tracer.put(num, newCount)\n            newCount\n        }\n</code></pre>\n\n<p>And the IDE suggested that the following code:</p>\n\n<pre><code>    var currentMaxCount = 0\n    for(number in numbers) {\n            val currentCountOfNum = incrementAndGetCurrentCountOf(number, tracer)\n            currentMaxCount = if(currentCountOfNum &gt; currentMaxCount) currentCountOfNum else currentMaxCount\n        }\n</code></pre>\n\n<p>be changed to this:</p>\n\n<pre><code>val currentMaxCount = numbers\n            .map { incrementAndGetCurrentCountOf(it, tracer) }\n            .max()\n            ?: 0\n</code></pre>\n\n<p>I understand what is happening. But I was wondering if the performance would become O(2n) if I use the IDE's suggestion. It's O(n) in what I came up with. I know it theoretically doesn't make a difference, but I would like know if Kotlin uses any magic to keep the running time at O(n). (Any additional suggestions to further shrink the code are welcome)</p>\n"}, {"tags": ["android", "kotlin", "kotlin-android-extensions"], "comments": [{"owner": {"reputation": 21170, "user_id": 2949612, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/RLdcF.png?s=128&g=1", "display_name": "pRaNaY", "link": "https://stackoverflow.com/users/2949612/pranay"}, "edited": false, "score": 0, "creation_date": 1505654496, "post_id": 46264480, "comment_id": 79491849, "body": "This may helps you: <a href=\"https://stackoverflow.com/questions/34169562/unresolved-reference-kotlinx\" title=\"unresolved reference kotlinx\">stackoverflow.com/questions/34169562/&hellip;</a>"}, {"owner": {"reputation": 1530, "user_id": 2011505, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/pfMQ1.jpg?s=128&g=1", "display_name": "Tharkius", "link": "https://stackoverflow.com/users/2011505/tharkius"}, "edited": false, "score": 1, "creation_date": 1505659004, "post_id": 46264480, "comment_id": 79493195, "body": "The code worked fine because that&#39;s the proper way of accessing and manipulating visual elements in android. You have to find the view before you can modify its properties."}, {"owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "reply_to_user": {"reputation": 1530, "user_id": 2011505, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/pfMQ1.jpg?s=128&g=1", "display_name": "Tharkius", "link": "https://stackoverflow.com/users/2011505/tharkius"}, "edited": false, "score": 3, "creation_date": 1505659364, "post_id": 46264480, "comment_id": 79493306, "body": "@Tharkius Except <code>kotlin-android-extensions</code> plugin allows you to access views via extension properties by using their ID as property name. So the real question is @HalilONCEN Did you <code>apply plugin: &#39;kotlin-android-extensions&#39;</code> in your module build.gradle file? If you did and it still doesn&#39;t work, you should make a feature request here <a href=\"https://youtrack.jetbrains.com/oauth?state=%2Fissues%2Fkotlin\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/oauth?state=%2Fissues%2Fkotlin</a>"}, {"owner": {"reputation": 1530, "user_id": 2011505, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/pfMQ1.jpg?s=128&g=1", "display_name": "Tharkius", "link": "https://stackoverflow.com/users/2011505/tharkius"}, "reply_to_user": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 0, "creation_date": 1505659635, "post_id": 46264480, "comment_id": 79493391, "body": "@EugenPechanec Didn&#39;t know about that, thanks for mentioning. That&#39;s a very neat plugin indeed :D"}, {"owner": {"reputation": 83, "user_id": 5032801, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-TGJa-BuYIiw/AAAAAAAAAAI/AAAAAAAAANA/F6sSTM4NklA/photo.jpg?sz=128", "display_name": "Halil ONCEN", "link": "https://stackoverflow.com/users/5032801/halil-oncen"}, "reply_to_user": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 0, "creation_date": 1505661394, "post_id": 46264480, "comment_id": 79493901, "body": "@EugenPechanec yes, this is in my build.gradle file <code>apply plugin: &#39;kotlin-android-extensions&#39;</code>"}, {"owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 0, "creation_date": 1505661755, "post_id": 46264480, "comment_id": 79494019, "body": "@HalilONCEN In that case it looks like the plugin does not support IDs with non-ASCII characters. I suggest you use only ASCII for now. In the meantime leave a bug report on YouTrack."}, {"owner": {"reputation": 83, "user_id": 5032801, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-TGJa-BuYIiw/AAAAAAAAAAI/AAAAAAAAANA/F6sSTM4NklA/photo.jpg?sz=128", "display_name": "Halil ONCEN", "link": "https://stackoverflow.com/users/5032801/halil-oncen"}, "reply_to_user": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 0, "creation_date": 1505662130, "post_id": 46264480, "comment_id": 79494114, "body": "@EugenPechanec thanks. I&#39;m reported. <a href=\"https://youtrack.jetbrains.com/issue/KT-20299\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/issue/KT-20299</a>"}, {"owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 1, "creation_date": 1505666497, "post_id": 46264480, "comment_id": 79495385, "body": "@HalilONCEN Awesome! You can post it as an answer (you can answer your own questions) and update it later when the feature is implemented."}], "owner": {"reputation": 83, "user_id": 5032801, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-TGJa-BuYIiw/AAAAAAAAAAI/AAAAAAAAANA/F6sSTM4NklA/photo.jpg?sz=128", "display_name": "Halil ONCEN", "link": "https://stackoverflow.com/users/5032801/halil-oncen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 539, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1505688601, "creation_date": 1505654135, "last_edit_date": 1505688601, "question_id": 46264480, "link": "https://stackoverflow.com/questions/46264480/kotlin-textview-id-reference-doesnt-work-with-non-english-characters", "title": "Kotlin Textview id reference doesn&#39;t work with non-english characters", "body": "<p>i'm create Textview with non-english id in my layout.xml then i want to use it in activity.kt </p>\n\n<p>layout.xml,</p>\n\n<pre><code>&lt;TextView\n    android:id=\"@+id/sonu\u00e7\"\n    .\n    .\n    ... /&gt;\n</code></pre>\n\n<p>activity.kt,</p>\n\n<pre><code>sonu\u00e7.text = \"Hello World\"\n</code></pre>\n\n<p>I'm getting an error, Unresolving reference:sonu\u00e7</p>\n\n<p>What is the solution?</p>\n\n<p><strong>Update!</strong></p>\n\n<pre><code>var sonu\u00e7 : TextView = findViewById(R.id.sonu\u00e7)\nsonu\u00e7.text = \"Hello World\"\n</code></pre>\n\n<p>This code worked fine in Kotlin. Why?</p>\n"}, {"tags": ["android", "module", "realm", "kotlin", "android-library"], "comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1505652422, "post_id": 46259994, "comment_id": 79491294, "body": "<code>(if someone from Realm reads this, you should really improve on documentation about use in libraries)</code> there is <a href=\"https://github.com/realm/realm-java/tree/8a3c4ce1f0d47c64dc4d97cfafbea1d65f5e5827/examples/moduleExample\" rel=\"nofollow noreferrer\">an official example for it.</a>"}, {"owner": {"reputation": 498, "user_id": 4084690, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh5.googleusercontent.com/-DAYELvJvxZs/AAAAAAAAAAI/AAAAAAAAG8o/fu-jDfqpIbM/photo.jpg?sz=128", "display_name": "alessandro gaboardi", "link": "https://stackoverflow.com/users/4084690/alessandro-gaboardi"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1505655018, "post_id": 46259994, "comment_id": 79492014, "body": "@EpicPandaForce Yes i read it and it clarifies some things but there is no documentation that really explains the rules of using realm in a library, like if you have to include the &quot;apply plugin&quot; in the :app gradle if you already have it in the library, if the library user can use RealmObjects with the same name as the ones in the library and in depth stuff like that."}, {"owner": {"reputation": 19323, "user_id": 1389357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uy7DP.jpg?s=128&g=1", "display_name": "Christian Melchior", "link": "https://stackoverflow.com/users/1389357/christian-melchior"}, "edited": false, "score": 1, "creation_date": 1505722087, "post_id": 46259994, "comment_id": 79511427, "body": "Realm do not take package names into account for modules and model classes, so yes, having the same name in the library and app will create conflicts. We did try to document the restrictions around schemas in the docs <a href=\"https://realm.io/docs/java/latest/#schemas\" rel=\"nofollow noreferrer\">realm.io/docs/java/latest/#schemas</a> as well as having the example project linked above, but it sounds like we need to describe the restrictions in the docs better."}, {"owner": {"reputation": 498, "user_id": 4084690, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh5.googleusercontent.com/-DAYELvJvxZs/AAAAAAAAAAI/AAAAAAAAG8o/fu-jDfqpIbM/photo.jpg?sz=128", "display_name": "alessandro gaboardi", "link": "https://stackoverflow.com/users/4084690/alessandro-gaboardi"}, "edited": false, "score": 0, "creation_date": 1505722721, "post_id": 46259994, "comment_id": 79511749, "body": "Ah thank you, i thought i was doing something very wrong"}], "answers": [{"comments": [{"owner": {"reputation": 498, "user_id": 4084690, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh5.googleusercontent.com/-DAYELvJvxZs/AAAAAAAAAAI/AAAAAAAAG8o/fu-jDfqpIbM/photo.jpg?sz=128", "display_name": "alessandro gaboardi", "link": "https://stackoverflow.com/users/4084690/alessandro-gaboardi"}, "edited": false, "score": 0, "creation_date": 1505650891, "post_id": 46260472, "comment_id": 79490872, "body": "It&#39;s already there, sorry i forgot to write it, i&#39;ll update the question"}], "tags": [], "owner": {"reputation": 1618, "user_id": 6538897, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/upe4P.jpg?s=128&g=1", "display_name": "Idee", "link": "https://stackoverflow.com/users/6538897/idee"}, "is_accepted": false, "score": 0, "last_activity_date": 1505620308, "creation_date": 1505620308, "answer_id": 46260472, "question_id": 46259994, "link": "https://stackoverflow.com/questions/46259994/how-to-use-realm-in-a-library/46260472#46260472", "title": "How to use Realm in a library", "body": "<p>Add this to your project gradle file</p>\n\n<pre><code>dependencies {\n    classpath \"io.realm:realm-gradle-plugin:3.5.0\"\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 498, "user_id": 4084690, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh5.googleusercontent.com/-DAYELvJvxZs/AAAAAAAAAAI/AAAAAAAAG8o/fu-jDfqpIbM/photo.jpg?sz=128", "display_name": "alessandro gaboardi", "link": "https://stackoverflow.com/users/4084690/alessandro-gaboardi"}, "edited": false, "score": 0, "creation_date": 1505739784, "post_id": 46277732, "comment_id": 79522867, "body": "Thank you but that wasn&#39;t the problem, the dex error went away with a clean build, it was a configuration problem with modules and Model names"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user8626261"}, "is_accepted": false, "score": 2, "last_activity_date": 1505732601, "creation_date": 1505732601, "answer_id": 46277732, "question_id": 46259994, "link": "https://stackoverflow.com/questions/46259994/how-to-use-realm-in-a-library/46277732#46277732", "title": "How to use Realm in a library", "body": "<p>you are facing Over 64K Methods Multiple dex file problem not related to realm library you need to add dependencies </p>\n\n<p>Configure your app for multidex</p>\n\n<pre><code>android {\n    defaultConfig {\n        ...\n        multiDexEnabled true\n    }\n    productFlavors {\n        dev {\n            // Enable pre-dexing to produce an APK that can be tested on\n            // Android 5.0+ without the time-consuming DEX build processes.\n            minSdkVersion 21\n        }\n        prod {\n            // The actual minSdkVersion for the production version.\n            minSdkVersion 14\n        }\n    }\n    buildTypes {\n        release {\n            minifyEnabled true\n            proguardFiles getDefaultProguardFile('proguard-android.txt'),\n                                                 'proguard-rules.pro'\n        }\n    }\n}\ndependencies {\n    compile 'com.android.support:multidex:1.0.1'\n}\n</code></pre>\n\n<p>If you do not override the Application class, edit your manifest file to set android:name in the  tag as follows:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    package=\"com.example.myapp\"&gt;\n    &lt;application\n            android:name=\"android.support.multidex.MultiDexApplication\" &gt;\n        ...\n    &lt;/application&gt;\n&lt;/manifest&gt;\n</code></pre>\n\n<p>If you do override the Application class, change it to extend MultiDexApplication (if possible) as follows:</p>\n\n<pre><code>public class MyApplication extends SomeOtherApplication {\n  @Override\n  protected void attachBaseContext(Context base) {\n     super.attachBaseContext(base);\n     MultiDex.install(this);\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 498, "user_id": 4084690, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh5.googleusercontent.com/-DAYELvJvxZs/AAAAAAAAAAI/AAAAAAAAG8o/fu-jDfqpIbM/photo.jpg?sz=128", "display_name": "alessandro gaboardi", "link": "https://stackoverflow.com/users/4084690/alessandro-gaboardi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1594, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1505732601, "creation_date": 1505613546, "last_edit_date": 1505661191, "question_id": 46259994, "link": "https://stackoverflow.com/questions/46259994/how-to-use-realm-in-a-library", "title": "How to use Realm in a library", "body": "<p>i'm trying to understand how to use Realm in a library that i'm making, i now understand RealmModules after a couple of days of research (if someone from Realm reads this, you should really improve on documentation about use in libraries). I've made a simple class that gives me the realm with library configuration:</p>\n\n<pre><code>object ChatRealm {\n    fun getChatRealm(): Realm{\n        val config = RealmConfiguration.Builder()\n                .name(\"mtchat_realmDB\")\n                .schemaVersion(2)\n                .deleteRealmIfMigrationNeeded()\n                .modules(ChatModule())\n                .build()\n        return Realm.getInstance(config)\n    }\n}\n</code></pre>\n\n<p>the module is this</p>\n\n<pre><code>@RealmModule(library = true, allClasses = true)\nclass ChatModule {}\n</code></pre>\n\n<p>and in the project Application class i setup realm like this</p>\n\n<pre><code>class App: Application() {\n    override fun onCreate() {\n        super.onCreate()\n\n        initRealm()\n        setupRealm()\n    }\n\n    private fun initRealm() {\n        Realm.init(this)\n    }\n\n    private fun setupRealm(){\n        Realm.setDefaultConfiguration(\n                RealmConfiguration.Builder()\n                        .deleteRealmIfMigrationNeeded()\n                        .modules(Realm.getDefaultModule(), ChatModule())\n                        .build()\n        )\n    }\n}\n</code></pre>\n\n<p>Now the trouble i'm having is that the build is failing or the app is crashing for various reasons based on how i configure the gradle files.</p>\n\n<p>My :app gradle is this </p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\napply plugin: 'realm-android'\n\nrepositories {\n    maven { url \"https://jitpack.io\" }\n    maven { url 'https://maven.google.com' }\n    mavenCentral()\n}\n\nbuildscript {\n    repositories {\n        jcenter()\n    }\n}\n\nandroid {\n    compileSdkVersion 26\n    buildToolsVersion \"26.0.0\"\n    defaultConfig {\n        minSdkVersion 15\n        targetSdkVersion 26\n        versionCode 1\n        versionName \"1.0\"\n        vectorDrawables.useSupportLibrary= true\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n}\n\ndependencies {\n    compile fileTree(include: ['*.jar'], dir: 'libs')\n    compile 'com.android.support:appcompat-v7:26.0.2'\n    compile 'com.android.support:design:26.0.2'\n    compile 'com.android.support.constraint:constraint-layout:1.0.2'\n    compile 'com.android.support:support-vector-drawable:26.0.2'\n    compile \"org.jetbrains.kotlin:kotlin-stdlib-jre7:$kotlin_version\"\n    compile project(':mtchat')\n}\n</code></pre>\n\n<p>and my library gradle is this </p>\n\n<pre><code>apply plugin: 'com.android.library'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\napply plugin: 'kotlin-kapt'\napply plugin: 'realm-android'\n\nrepositories {\n    maven { url \"https://jitpack.io\" }\n    maven { url 'https://maven.google.com' }\n    mavenCentral()\n}\n\nbuildscript {\n    repositories {\n        jcenter()\n    }\n}\n\nandroid {\n    compileSdkVersion 26\n    buildToolsVersion \"26.0.0\"\n\n    defaultConfig {\n        minSdkVersion 15\n        targetSdkVersion 26\n        versionCode 1\n        versionName \"1.0\"\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n\n}\n\ndependencies {\n    compile \"com.android.support:appcompat-v7:$compat_version\"\n    compile \"com.android.support:support-v4:$compat_version\"\n    compile \"org.jetbrains.kotlin:kotlin-stdlib-jre7:$kotlin_version\"\n    compile \"com.android.support:cardview-v7:$compat_version\"\n    compile \"com.android.support:recyclerview-v7:$compat_version\"\n    compile \"com.android.support:design:$compat_version\"\n    compile \"de.hdodenhof:circleimageview:2.1.0\"\n    compile 'com.github.bumptech.glide:glide:4.1.1'\n    compile 'com.android.volley:volley:1.0.0'\n}\n</code></pre>\n\n<p>and this is my project gradle</p>\n\n<pre><code>buildscript {\n    ext.kotlin_version = '1.1.4-3'\n    ext.compat_version = '26.0.2'\n\n    repositories {\n        jcenter()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:2.3.3'\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n        classpath \"io.realm:realm-gradle-plugin:3.7.2\"\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n}\n\nallprojects {\n    repositories {\n        jcenter()\n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n\n<p>and based on if i add or not the apply plugin: 'realm-android' to the :app module i get either RealmObject \"X\" is not part of the schema for this realm or if i add the plugin to the app gradle it fails to build the project completely.</p>\n\n<p><strong>Is there anyone that has used Realm in a library and wants to explain how, clearly and in depth, maybe this could be used as future reference</strong></p>\n\n<p>EDIT: With the above configuration i get this error when building </p>\n\n<pre><code>Execution failed for task ':app:transformClassesWithDexForDebug'.\n&gt; com.android.build.api.transform.TransformException: com.android.ide.common.process.ProcessException: java.util.concurrent.ExecutionException: com.android.dex.DexException: Multiple dex files define Lio/realm/ChatRealmProxyInterface;\n</code></pre>\n\n<p>EDIT 2:</p>\n\n<p>I managed to get it working by defining modules for both app and library and avoiding naming the realm models in the app the same as the ones in the library ( is this required? Or is there a way to isolate the library models so that the user can use the same names that the library models use?) Still this took me 2 days of research and i'm still unsure if I'm doing it right. It would be REALLY great if someone with more knowledge than me made a nice tutorial or something.</p>\n"}, {"tags": ["android", "kotlin", "coroutine"], "answers": [{"comments": [{"owner": {"reputation": 8922, "user_id": 887835, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/727fa5c34573207db5bad5480da311e3?s=128&d=identicon&r=PG", "display_name": "Youssef", "link": "https://stackoverflow.com/users/887835/youssef"}, "edited": false, "score": 0, "creation_date": 1505604167, "post_id": 46259307, "comment_id": 79482151, "body": "Ah this makes a lot of sense! Any idea which approach I can use to make sure that I get Final result = 10,000? Other than just doing jobs.count"}, {"owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "reply_to_user": {"reputation": 8922, "user_id": 887835, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/727fa5c34573207db5bad5480da311e3?s=128&d=identicon&r=PG", "display_name": "Youssef", "link": "https://stackoverflow.com/users/887835/youssef"}, "edited": false, "score": 0, "creation_date": 1505610506, "post_id": 46259307, "comment_id": 79483110, "body": "Only way to guarentee that is to either synchronize access to the variable or use the <code>Atomic*</code> classes to make sure each operation ends up being registered."}, {"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "reply_to_user": {"reputation": 8922, "user_id": 887835, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/727fa5c34573207db5bad5480da311e3?s=128&d=identicon&r=PG", "display_name": "Youssef", "link": "https://stackoverflow.com/users/887835/youssef"}, "edited": false, "score": 1, "creation_date": 1505660032, "post_id": 46259307, "comment_id": 79493497, "body": "@Youssef Usually, you try to avoid using any shared mutable state at all. That will also eliminate this problem."}, {"owner": {"reputation": 8922, "user_id": 887835, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/727fa5c34573207db5bad5480da311e3?s=128&d=identicon&r=PG", "display_name": "Youssef", "link": "https://stackoverflow.com/users/887835/youssef"}, "reply_to_user": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 1, "creation_date": 1505667092, "post_id": 46259307, "comment_id": 79495584, "body": "@marstran I agree that the design should move away from this, but in case we want to use it I found I can use AtomicInteger() instead."}], "tags": [], "owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "is_accepted": true, "score": 3, "last_activity_date": 1505603911, "creation_date": 1505603911, "answer_id": 46259307, "question_id": 46259255, "link": "https://stackoverflow.com/questions/46259255/kotlin-skipping-coroutines/46259307#46259307", "title": "Kotlin: Skipping Coroutines", "body": "<p><code>num++</code> consists of two operations: <code>tmp = num + 1</code> and <code>num = tmp</code>. When dealing with multithreading like your example there are cases where some operations might overwrite the results of another thread, leading to cases like your example.</p>\n\n<p>If you want to know more, research \"race conditions\" where the end result depends on a \"race\" between two seperate processes.</p>\n"}], "owner": {"reputation": 8922, "user_id": 887835, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/727fa5c34573207db5bad5480da311e3?s=128&d=identicon&r=PG", "display_name": "Youssef", "link": "https://stackoverflow.com/users/887835/youssef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "accepted_answer_id": 46259307, "answer_count": 1, "score": 1, "last_activity_date": 1505603911, "creation_date": 1505603419, "question_id": 46259255, "link": "https://stackoverflow.com/questions/46259255/kotlin-skipping-coroutines", "title": "Kotlin: Skipping Coroutines", "body": "<p>I playing around with Kotlin and Coroutines in my demo android application.</p>\n\n<p>Here's what I have:</p>\n\n<pre><code>fun testCoroutine3() = runBlocking {\n    var num = 0\n    val jobs = List(10_000) { // create a lot of coroutines and list their jobs.\n        launch(CommonPool) {\n            delay(1000L)\n            println(num++)\n        }\n    }\n\n    for(job in jobs) {\n        job.join() //wait for all jobs to finish\n    }\n    println(\"FINAL RESULT $num\")\n}\n</code></pre>\n\n<p>Basically I'm creating a list of 10,000 Coroutines that wait for 1 second and print a number then increment it.</p>\n\n<p>Then when all jobs are done I print the final result. </p>\n\n<p>(This demo is taken from the <a href=\"https://github.com/Kotlin/kotlinx.coroutines/blob/master/coroutines-guide.md#coroutines-are-light-weight\" rel=\"nofollow noreferrer\">GitHub Documentation</a>)</p>\n\n<p>Now most of my test run fine, all the coroutines run almost simultaneously, and my final result is 10000</p>\n\n<p><a href=\"https://i.stack.imgur.com/7CeuR.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7CeuR.jpg\" alt=\"Log showing Final Result = 10,000\"></a></p>\n\n<p>However in some rare occasions, I am getting the final result as 9,999</p>\n\n<p><a href=\"https://i.stack.imgur.com/d4MeO.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/d4MeO.jpg\" alt=\"Log showing Final Result = 9,999\"></a></p>\n\n<p>This become more obvious when I increase the number to 50,000 for example:</p>\n\n<p><a href=\"https://i.stack.imgur.com/fGEnk.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fGEnk.jpg\" alt=\"Log showing Final Result = 49,998\"></a></p>\n\n<p>Is it possible that Kotlin is skipping some coroutines when there's a lot of them? on the 50,000, looks like it skipped 2</p>\n\n<p>Or is something else happening here?</p>\n"}, {"tags": ["javascript", "html", "reactjs", "kotlin"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user8618510"}, "is_accepted": true, "score": 1, "last_activity_date": 1505566833, "creation_date": 1505566833, "answer_id": 46254194, "question_id": 46252441, "link": "https://stackoverflow.com/questions/46252441/kotlinx-html-ref-event/46254194#46254194", "title": "Kotlinx-html ref event", "body": "<p>This small piece of code is pretty intense with kotlin idioms and advanced features, so it's better to examine it step by step.</p>\n\n<ul>\n<li>First of all, <code>xRefImpl</code> is an extension function to a <code>Tag</code>, so having a <code>Tag</code> instance, you'll be able to call this new method.</li>\n<li>Second, <code>ref</code> is actually a react property, which allows to get a reference to the component. Here is an example from <a href=\"https://facebook.github.io/react/docs/refs-and-the-dom.html\" rel=\"nofollow noreferrer\">react documentation</a>.</li>\n</ul>\n\n<p>Example usage:</p>\n\n<pre><code>&lt;input type=\"text\"\n       ref={(input) =&gt; { this.textInput = input; }} /&gt;\n</code></pre>\n\n<p>By contract, <code>ref</code> accepts a function which will be invoked by the engine, with a reference to a component passed as an argument. The code above creates a <code>ref</code> on <code>this</code> tag (remember <code>xrefImpl</code> an extension function) with the following lambda: <code>prop.set(it.asDynamic())</code>.</p>\n\n<ul>\n<li><p>Next, <code>prop</code> is a statically-typed kotlin property (this is what <code>KMutableProperty0</code> means). It has <code>get</code> and <code>set</code> methods, and in this case it's assigned with <code>it</code> reference. Since <code>it</code> comes from the javascript, its type is unknown, hence <a href=\"https://kotlinlang.org/docs/reference/dynamic-type.html\" rel=\"nofollow noreferrer\">dynamic cast</a>.</p></li>\n<li><p><code>consumer.onTagEvent()</code> is just a kotlix-html internal way to bind javascript properties and events.</p></li>\n</ul>\n\n<p>For example, this is how 'onmouseleave' is processed in this framework:</p>\n\n<pre><code>consumer.onTagEvent(this, \"onmouseleave\") {\n  console.log(it)\n}\n</code></pre>\n\n<p>If you strip all kotlin and react idioms, the code <code>this.consumer.onTagEvent(this, \"ref\", { prop.set(it.asDynamic()) })</code> simply does <code>prop = this.getComponent()</code>. The purpose of the method is, thus, to acquire a component reference.</p>\n\n<p>Finally, since the argument is <code>KMutableProperty0</code>, it allows to bind a component to a field, like this.</p>\n\n<pre><code>xrefImpl(this::component)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8479978"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 46254194, "answer_count": 1, "score": 0, "last_activity_date": 1505568635, "creation_date": 1505554934, "last_edit_date": 1505568635, "question_id": 46252441, "link": "https://stackoverflow.com/questions/46252441/kotlinx-html-ref-event", "title": "Kotlinx-html ref event", "body": "<p>I've noticed the following function in the code base, which uses <a href=\"https://github.com/Kotlin/kotlinx.html\" rel=\"nofollow noreferrer\">kotlinx html</a>, and it's pretty hard to fully understand:</p>\n\n<pre><code>private fun &lt;E : HTMLElement&gt; Tag.xrefImpl(prop: KMutableProperty0&lt;E?&gt;) = \n    this.consumer.onTagEvent(this, \"ref\", { prop.set(it.asDynamic()) })\n</code></pre>\n\n<p>As far as I understood from googling, <code>asDynamic</code> is a kotlin-js method, that simply suppresses the type checking. OK, but the rest of it is still unclear. <a href=\"https://github.com/Kotlin/kotlinx.html/wiki\" rel=\"nofollow noreferrer\">The documentation</a> isn't very detailed about its internals, namely <code>consumer</code>, <code>ref</code> and <code>onTagEvent</code>. On top of that, why is the parameter type <code>KMutableProperty0</code>?</p>\n"}, {"tags": ["libgdx", "kotlin"], "comments": [{"owner": {"reputation": 11142, "user_id": 2229438, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/629fdde67cb23f9d3799635d89c7b250?s=128&d=identicon&r=PG", "display_name": "Grzegorz Piwowarek", "link": "https://stackoverflow.com/users/2229438/grzegorz-piwowarek"}, "edited": false, "score": 0, "creation_date": 1505548332, "post_id": 46251441, "comment_id": 79466670, "body": "What is the type of <code>keyFrames</code>?"}, {"owner": {"reputation": 18740, "user_id": 3445320, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nvbJ7_WkXK4/AAAAAAAAAAI/AAAAAAAAABs/UVW5XWwJhyY/photo.jpg?sz=128", "display_name": "Abhishek Aryan", "link": "https://stackoverflow.com/users/3445320/abhishek-aryan"}, "edited": false, "score": 0, "creation_date": 1505549533, "post_id": 46251441, "comment_id": 79466976, "body": "which LibGDX version you&#39;re using ?"}, {"owner": {"reputation": 1586, "user_id": 7717409, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/252d073ff000e1f38cd389d20d136952?s=128&d=identicon&r=PG&f=1", "display_name": "icarumbas", "link": "https://stackoverflow.com/users/7717409/icarumbas"}, "reply_to_user": {"reputation": 18740, "user_id": 3445320, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nvbJ7_WkXK4/AAAAAAAAAAI/AAAAAAAAABs/UVW5XWwJhyY/photo.jpg?sz=128", "display_name": "Abhishek Aryan", "link": "https://stackoverflow.com/users/3445320/abhishek-aryan"}, "edited": false, "score": 0, "creation_date": 1505549868, "post_id": 46251441, "comment_id": 79467072, "body": "@AbhishekAryan 1.9.6"}, {"owner": {"reputation": 1586, "user_id": 7717409, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/252d073ff000e1f38cd389d20d136952?s=128&d=identicon&r=PG&f=1", "display_name": "icarumbas", "link": "https://stackoverflow.com/users/7717409/icarumbas"}, "reply_to_user": {"reputation": 11142, "user_id": 2229438, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/629fdde67cb23f9d3799635d89c7b250?s=128&d=identicon&r=PG", "display_name": "Grzegorz Piwowarek", "link": "https://stackoverflow.com/users/2229438/grzegorz-piwowarek"}, "edited": false, "score": 0, "creation_date": 1505549958, "post_id": 46251441, "comment_id": 79467098, "body": "@GrzegorzPiwowarek &lt;out TextureRegion&gt;"}, {"owner": {"reputation": 18740, "user_id": 3445320, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nvbJ7_WkXK4/AAAAAAAAAAI/AAAAAAAAABs/UVW5XWwJhyY/photo.jpg?sz=128", "display_name": "Abhishek Aryan", "link": "https://stackoverflow.com/users/3445320/abhishek-aryan"}, "edited": false, "score": 0, "creation_date": 1505550085, "post_id": 46251441, "comment_id": 79467120, "body": "Your Animation is type of <code>TextureRegion</code> ? Is your body is Box2d body ?"}, {"owner": {"reputation": 1586, "user_id": 7717409, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/252d073ff000e1f38cd389d20d136952?s=128&d=identicon&r=PG&f=1", "display_name": "icarumbas", "link": "https://stackoverflow.com/users/7717409/icarumbas"}, "reply_to_user": {"reputation": 18740, "user_id": 3445320, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nvbJ7_WkXK4/AAAAAAAAAAI/AAAAAAAAABs/UVW5XWwJhyY/photo.jpg?sz=128", "display_name": "Abhishek Aryan", "link": "https://stackoverflow.com/users/3445320/abhishek-aryan"}, "edited": false, "score": 0, "creation_date": 1505550246, "post_id": 46251441, "comment_id": 79467162, "body": "@AbhishekAryan yes"}, {"owner": {"reputation": 1861, "user_id": 571227, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/oFDE2.png?s=128&g=1", "display_name": "haxpor", "link": "https://stackoverflow.com/users/571227/haxpor"}, "edited": false, "score": 0, "creation_date": 1505608709, "post_id": 46251441, "comment_id": 79482848, "body": "Are you sure that error result coming from the same set of test case? I mean <code>frame</code> might be different when you test both case. Just my observation as I didn&#39;t see obvious problem here. <code>[]</code> and <code>get()</code>, <code>set()</code> are the same."}, {"owner": {"reputation": 1586, "user_id": 7717409, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/252d073ff000e1f38cd389d20d136952?s=128&d=identicon&r=PG&f=1", "display_name": "icarumbas", "link": "https://stackoverflow.com/users/7717409/icarumbas"}, "reply_to_user": {"reputation": 1861, "user_id": 571227, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/oFDE2.png?s=128&g=1", "display_name": "haxpor", "link": "https://stackoverflow.com/users/571227/haxpor"}, "edited": false, "score": 1, "creation_date": 1505647101, "post_id": 46251441, "comment_id": 79489898, "body": "@haxpor I tested it 100 times in a loop and get 100 exceptions vs 0 when i changed to get()"}], "answers": [{"comments": [{"owner": {"reputation": 1586, "user_id": 7717409, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/252d073ff000e1f38cd389d20d136952?s=128&d=identicon&r=PG&f=1", "display_name": "icarumbas", "link": "https://stackoverflow.com/users/7717409/icarumbas"}, "edited": false, "score": 0, "creation_date": 1505556192, "post_id": 46252254, "comment_id": 79468720, "body": "I don&#39;t actually understand what you&#39;re mean. I got exception even in this line &quot;val texture = animations[state[e].currentState]!!.keyFrames[frame]&quot;. I don&#39;t think that i cast something here."}, {"owner": {"reputation": 18740, "user_id": 3445320, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nvbJ7_WkXK4/AAAAAAAAAAI/AAAAAAAAABs/UVW5XWwJhyY/photo.jpg?sz=128", "display_name": "Abhishek Aryan", "link": "https://stackoverflow.com/users/3445320/abhishek-aryan"}, "reply_to_user": {"reputation": 1586, "user_id": 7717409, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/252d073ff000e1f38cd389d20d136952?s=128&d=identicon&r=PG&f=1", "display_name": "icarumbas", "link": "https://stackoverflow.com/users/7717409/icarumbas"}, "edited": false, "score": 0, "creation_date": 1505557593, "post_id": 46252254, "comment_id": 79469097, "body": "what is animations ? Is it arrays of Animation ? and <code>state[e].currentState</code> ?"}, {"owner": {"reputation": 1586, "user_id": 7717409, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/252d073ff000e1f38cd389d20d136952?s=128&d=identicon&r=PG&f=1", "display_name": "icarumbas", "link": "https://stackoverflow.com/users/7717409/icarumbas"}, "edited": false, "score": 0, "creation_date": 1505558764, "post_id": 46252254, "comment_id": 79469483, "body": "animations is HashMap&lt;String, Animation&lt;out TextureRegion&gt;&gt;()"}, {"owner": {"reputation": 1586, "user_id": 7717409, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/252d073ff000e1f38cd389d20d136952?s=128&d=identicon&r=PG&f=1", "display_name": "icarumbas", "link": "https://stackoverflow.com/users/7717409/icarumbas"}, "edited": false, "score": 0, "creation_date": 1505560600, "post_id": 46252254, "comment_id": 79470066, "body": "state is component mapper from Ashley. currentState is String, but i don&#39;t think this can help so"}, {"owner": {"reputation": 18740, "user_id": 3445320, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nvbJ7_WkXK4/AAAAAAAAAAI/AAAAAAAAABs/UVW5XWwJhyY/photo.jpg?sz=128", "display_name": "Abhishek Aryan", "link": "https://stackoverflow.com/users/3445320/abhishek-aryan"}, "reply_to_user": {"reputation": 1586, "user_id": 7717409, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/252d073ff000e1f38cd389d20d136952?s=128&d=identicon&r=PG&f=1", "display_name": "icarumbas", "link": "https://stackoverflow.com/users/7717409/icarumbas"}, "edited": false, "score": 0, "creation_date": 1505573898, "post_id": 46252254, "comment_id": 79473873, "body": "I don&#39;t think so problem is in above line, may be you&#39;re accessing in some other system"}], "tags": [], "owner": {"reputation": 18740, "user_id": 3445320, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nvbJ7_WkXK4/AAAAAAAAAAI/AAAAAAAAABs/UVW5XWwJhyY/photo.jpg?sz=128", "display_name": "Abhishek Aryan", "link": "https://stackoverflow.com/users/3445320/abhishek-aryan"}, "is_accepted": false, "score": 0, "last_activity_date": 1505553577, "creation_date": 1505553577, "answer_id": 46252254, "question_id": 46251441, "link": "https://stackoverflow.com/questions/46251441/whats-difference-between-get-and-call-in-kotlin/46252254#46252254", "title": "What&#39;s difference between get and [] call in Kotlin?", "body": "<p>Casting error Object can't be cast to <code>TextureRegion</code></p>\n\n<pre><code>public operator fun get(index: Int): T\n</code></pre>\n\n<p>Returns the array element at the specified index of <code>kotlin.Array</code>. </p>\n\n<p><code>T[] keyFrames</code> is an Arrays of type T in <code>Animation</code> class.</p>\n\n<hr>\n\n<p>I declared in this way, I don't have casting error/exception.  :</p>\n\n<pre><code>lateinit var ani:Animation&lt;TextureRegion&gt;\nani = Animation(.1f,TextureRegion(Texture(\"badlogic.jpg\")))\nval y= ani.keyFrames.get(0)   // -&gt; y is a TextureRegion\n</code></pre>\n\n<p>Replaced with indexing operator </p>\n\n<pre><code>val x=ani.keyFrames[0]      // -&gt; x is a TextureRegion\n</code></pre>\n\n<p>Then assign to body userData.</p>\n\n<pre><code>val world = World(Vector2(10f,10f),false)\nval body = world.createBody(BodyDef())\nbody.userData = y       //  -&gt; Either you use x or y you always get sprite\n\nvar sprite=Sprite(body.userData as TextureRegion?)\n</code></pre>\n"}], "owner": {"reputation": 1586, "user_id": 7717409, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/252d073ff000e1f38cd389d20d136952?s=128&d=identicon&r=PG&f=1", "display_name": "icarumbas", "link": "https://stackoverflow.com/users/7717409/icarumbas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 181, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1505651087, "creation_date": 1505547507, "last_edit_date": 1505651087, "question_id": 46251441, "link": "https://stackoverflow.com/questions/46251441/whats-difference-between-get-and-call-in-kotlin", "title": "What&#39;s difference between get and [] call in Kotlin?", "body": "<p>I'm making game using Kotlin language + LibGDX library.</p>\n\n<p>Kotlin version: <code>1.1.2-4</code></p>\n\n<p>LibGDX version: <code>1.9.6</code></p>\n\n<p>As official documentation says </p>\n\n<pre><code>\"[] operation stands for calls to member functions get() and set().\" \n</code></pre>\n\n<p>But, when i try to run this line of code:</p>\n\n<p><code>body.userData = animations[state[e].currentState]!!.keyFrames[frame]</code> </p>\n\n<p>I get this error: </p>\n\n<p><code>Exception in thread \"LWJGL Application\" java.lang.ClassCastException: [Ljava.lang.Object; cannot be cast to [Lcom.badlogic.gdx.graphics.g2d.TextureRegion;\n</code></p>\n\n<p>However when i change [] to get():</p>\n\n<p><code>body.userData = animations[state[e].currentState]!!.keyFrames.get(frame)</code></p>\n\n<p>Everything gets ok.</p>\n\n<p>PS: \"frame\" is angle, converted to Int.</p>\n\n<p>UPD:\nI changed my code little bit</p>\n\n<pre><code>val animation: Animation = anim[e].animations[state[e].currentState]!!\nval tex = animation.keyFrames[frame] // Get exception on this line anyway\nbody[e].body.userData = tex\n</code></pre>\n\n<p>\u201ce\u201d is entity refrence from Ashley. \u201cbody\u201d, \u201canim\u201d, and \u201cstate\u201d are Ashley component mappers.</p>\n\n<p>For those who doesn\u2019t know what LibGDX is here is Animation class\nkeyFrames here is just a Java Array.</p>\n\n<p>UPD 2:\nI noticed that problem occurs only when i use this constructor:</p>\n\n<pre><code>Animation(float frameDuration, Array&lt;? extends T&gt; keyFrames)\n</code></pre>\n\n<p>Looks like interoperable problem.</p>\n"}, {"tags": ["android", "kotlin", "rx-java", "reactive-programming"], "answers": [{"tags": [], "owner": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "is_accepted": true, "score": 2, "last_activity_date": 1505552142, "last_edit_date": 1505552142, "creation_date": 1505551760, "answer_id": 46252001, "question_id": 46251381, "link": "https://stackoverflow.com/questions/46251381/is-there-a-way-to-sort-groupby-keys-in-rx-java-kotlin/46252001#46252001", "title": "Is there a way to sort groupBy keys in rx-java/kotlin?", "body": "<p>One of the solution is to use <code>sorted</code> function with custom <code>Comparator</code>:</p>\n\n<pre><code>Observable.fromIterable(listOf(\"4444\", \"22\", \"333\", \"1\", \"55555\"))\n        .groupBy { it.hashCode() }\n        .sorted { o1, o2 -&gt;\n            o1.key?.minus(o2.key ?: 0) ?: 0\n        }\n        .subscribe { group -&gt;\n            group.toList().subscribe { list -&gt; println(\"${group.key} $list\") }\n        }\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>49 [1]\n1600 [22]\n50643 [333]\n1600768 [4444]\n50578165 [55555]\n</code></pre>\n"}], "owner": {"reputation": 16751, "user_id": 602094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/725306370a270aec71f052f366496ddb?s=128&d=identicon&r=PG", "display_name": "triad", "link": "https://stackoverflow.com/users/602094/triad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 934, "favorite_count": 0, "accepted_answer_id": 46252001, "answer_count": 1, "score": 1, "last_activity_date": 1505552142, "creation_date": 1505546942, "last_edit_date": 1505547406, "question_id": 46251381, "link": "https://stackoverflow.com/questions/46251381/is-there-a-way-to-sort-groupby-keys-in-rx-java-kotlin", "title": "Is there a way to sort groupBy keys in rx-java/kotlin?", "body": "<p>Here's an example:</p>\n\n<pre><code>Observable.fromIterable(listOf(\"4444\", \"22\", \"333\", \"1\", \"55555\"))\n    .groupBy { it.hashCode() }\n    .subscribe { group -&gt;\n        group.toList().subscribe { list -&gt; println(\"${group.key} $list\") }\n    }\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>1600 [22]\n49 [1]\n50643 [333]\n50578165 [55555]\n1600768 [4444]\n</code></pre>\n\n<p>How to sort the keys in ascending/descending order or using a custom sort comparator?</p>\n"}, {"tags": ["javascript", "firebase", "kotlin", "firebase-cloud-messaging"], "comments": [{"owner": {"reputation": 19872, "user_id": 804967, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/JVZu9.jpg?s=128&g=1", "display_name": "fweigl", "link": "https://stackoverflow.com/users/804967/fweigl"}, "edited": false, "score": 0, "creation_date": 1505552101, "post_id": 46250613, "comment_id": 79467558, "body": "What&#39;s the FCM class?"}, {"owner": {"reputation": 21426, "user_id": 2495283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62ef72b32709062aa479476844515073?s=128&d=identicon&r=PG", "display_name": "Claies", "link": "https://stackoverflow.com/users/2495283/claies"}, "edited": false, "score": 1, "creation_date": 1505568333, "post_id": 46250613, "comment_id": 79472219, "body": "you&#39;ll have to use <code>js()</code> to wrap your JavaScript library.  see <a href=\"https://kotlinlang.org/docs/tutorials/javascript/calling-javascript-from-kotlin/calling-javascript-from-kotlin.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/tutorials/javascript/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 336, "user_id": 6407116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zQFju.jpg?s=128&g=1", "display_name": "mononz", "link": "https://stackoverflow.com/users/6407116/mononz"}, "edited": false, "score": 0, "creation_date": 1505553415, "post_id": 46252076, "comment_id": 79467879, "body": "Sorry added an edit, its the fcm-push npm module from here <a href=\"https://www.npmjs.com/package/fcm-push\" rel=\"nofollow noreferrer\">npmjs.com/package/fcm-push</a> . It only works in NodeJS with the <code>new</code> and can&#39;t figure out how to get it going in kotlin"}, {"owner": {"reputation": 19872, "user_id": 804967, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/JVZu9.jpg?s=128&g=1", "display_name": "fweigl", "link": "https://stackoverflow.com/users/804967/fweigl"}, "reply_to_user": {"reputation": 336, "user_id": 6407116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zQFju.jpg?s=128&g=1", "display_name": "mononz", "link": "https://stackoverflow.com/users/6407116/mononz"}, "edited": false, "score": 0, "creation_date": 1505553601, "post_id": 46252076, "comment_id": 79467940, "body": "@JaredHall I think i misunderstood the question, you still want your code to compile to JS, not &#39;transfer&#39; it to Kotlin on the JVM, right?"}, {"owner": {"reputation": 336, "user_id": 6407116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zQFju.jpg?s=128&g=1", "display_name": "mononz", "link": "https://stackoverflow.com/users/6407116/mononz"}, "edited": false, "score": 0, "creation_date": 1505553784, "post_id": 46252076, "comment_id": 79467995, "body": "Correct. I thought the best way for me to learn was to start converting some smaller classes to kotlin first within my larger nodejs project"}], "tags": [], "owner": {"reputation": 19872, "user_id": 804967, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/JVZu9.jpg?s=128&g=1", "display_name": "fweigl", "link": "https://stackoverflow.com/users/804967/fweigl"}, "is_accepted": false, "score": 1, "last_activity_date": 1505552353, "creation_date": 1505552353, "answer_id": 46252076, "question_id": 46250613, "link": "https://stackoverflow.com/questions/46250613/how-to-convert-js-code-to-kotlin-without-the-new-keyword/46252076#46252076", "title": "How to convert JS code to Kotlin without the &#39;new&#39; keyword", "body": "<p>The <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/require.html\" rel=\"nofollow noreferrer\">require function in Kotlin</a> is not the same as the <a href=\"https://medium.freecodecamp.org/requiring-modules-in-node-js-everything-you-need-to-know-e7fbd119be8\" rel=\"nofollow noreferrer\">require in NodeJS</a> which is probably used in your JS code. </p>\n\n<p>Whatever your FCM class is, just instantiate it without the <code>new</code> keyword. </p>\n"}, {"tags": [], "owner": {"reputation": 336, "user_id": 6407116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zQFju.jpg?s=128&g=1", "display_name": "mononz", "link": "https://stackoverflow.com/users/6407116/mononz"}, "is_accepted": false, "score": 1, "last_activity_date": 1506164550, "last_edit_date": 1506164550, "creation_date": 1505988902, "answer_id": 46341263, "question_id": 46250613, "link": "https://stackoverflow.com/questions/46250613/how-to-convert-js-code-to-kotlin-without-the-new-keyword/46341263#46341263", "title": "How to convert JS code to Kotlin without the &#39;new&#39; keyword", "body": "<p><s>Thanks to a hint from @Claies I managed get it to work using the <code>js(...)</code> wrap.~~~</p>\n\n<pre><code>val FCM = require(\"fcm-push\")\nval serverKey = \"YOURSERVERKEYHERE\"\nval fcm = js(\"new FCM(serverKey)\")\n...\nfcm.send(message) // now works\n</code></pre>\n\n<p>I'm not sure I'm totally happy with the writing pure js inside a string in kotlin so I hope there is a better way that I've missed.</s></p>\n\n<p>Edit: The above works, but its not ideal, refer to accepted answer for better implementation</p>\n"}, {"comments": [{"owner": {"reputation": 336, "user_id": 6407116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zQFju.jpg?s=128&g=1", "display_name": "mononz", "link": "https://stackoverflow.com/users/6407116/mononz"}, "edited": false, "score": 0, "creation_date": 1506164352, "post_id": 46361524, "comment_id": 79716191, "body": "Legend, thanks for this. I did have to make it <code>external class FCM(key: String) {</code> to accept the serverKey in. marked as accepted. I&#39;m not yet sure how to go about the callback or Promise part of your code, but maybe that should be a another question"}], "tags": [], "owner": {"reputation": 2015, "user_id": 1109309, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f8a2b866ae0dc92a9e774d0094da8f4d?s=128&d=identicon&r=PG", "display_name": "Alexey Andreev", "link": "https://stackoverflow.com/users/1109309/alexey-andreev"}, "is_accepted": true, "score": 3, "last_activity_date": 1571226293, "last_edit_date": 1571226293, "creation_date": 1506073121, "answer_id": 46361524, "question_id": 46250613, "link": "https://stackoverflow.com/questions/46250613/how-to-convert-js-code-to-kotlin-without-the-new-keyword/46361524#46361524", "title": "How to convert JS code to Kotlin without the &#39;new&#39; keyword", "body": "<p>Sorry but your answer you marked as correct, is in fact incorrect. I have to say this, since someone who is looking for the right answer might find it and write incorrect code. Generally, you shouldn't call the <code>require</code> function from Kotlin directly. Rather, you should use <a href=\"http://kotlinlang.org/api/latest/jvm/stdlib/kotlin.js/-js-module/index.html\" rel=\"nofollow noreferrer\"><code>@JsModule</code></a> together with <code>external</code> declarations. In your particular case it would be something like this:</p>\n\n<pre><code>@JsModule(\"fcm-push\")\nexternal class FCM(serverKey: String) {\n   fun send(message: Any?, callback: (err: Any?, response: Any?) -&gt; Unit)\n   fun send(message: Any?): Promise&lt;Any&gt;\n}\n\nval serverKey = \"YOURSERVERKEYHERE\"\nval fcm = FCM(serverKey)\n//...\nfcm.send(message)\n</code></pre>\n\n<p>Also, you should pass <code>commonjs</code> to the <code>moduleKind</code> compiler flag. See the <a href=\"http://kotlinlang.org/docs/reference/js-modules.html\" rel=\"nofollow noreferrer\">corresponding documentation page</a> for a full description.</p>\n"}], "owner": {"reputation": 336, "user_id": 6407116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zQFju.jpg?s=128&g=1", "display_name": "mononz", "link": "https://stackoverflow.com/users/6407116/mononz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4214, "favorite_count": 1, "accepted_answer_id": 46361524, "answer_count": 3, "score": 4, "last_activity_date": 1571226293, "creation_date": 1505541634, "last_edit_date": 1543738545, "question_id": 46250613, "link": "https://stackoverflow.com/questions/46250613/how-to-convert-js-code-to-kotlin-without-the-new-keyword", "title": "How to convert JS code to Kotlin without the &#39;new&#39; keyword", "body": "<p>I'm looking into converting some basic JS to Kotlin but I'm stuck on the <code>new</code> keyword. I'm not sure how to convert the following JS to Kotlin</p>\n\n<pre><code>var FCM = require('fcm-node');\nvar fcm = new FCM('YOURSERVERKEYHERE');\nvar message = { ... };\nfcm.send(message, function(err, response){ ... }\n</code></pre>\n\n<p>I tried</p>\n\n<pre><code>fun sendTestPush() {\n  val FCM = require(\"fcm-push\")\n  val fcm = new FCM(\"YOURSERVERKEYHERE\")\n\n  val data = Data(\"Title\", \"Message\")\n  val message = Message(\"registration_id\", data)\n\n  fcm.send(message)\n}\n\ndata class Message(val to: String, val data: Data)\ndata class Data(val title: String, val message: String)\n</code></pre>\n\n<p>I get the compile error <code>Unresolved reference: new</code> as Kotlin doesn't have it.\nWithout the 'new' I get the expected error <code>Attempting to TypeError: Cannot read property 'send' of undefined</code></p>\n\n<p>Any idea to get around this problem?</p>\n\n<p>Edit: FCM class is the npm package <a href=\"https://www.npmjs.com/package/fcm-push\" rel=\"nofollow noreferrer\">https://www.npmjs.com/package/fcm-push</a></p>\n"}, {"tags": ["gradle", "continuous-integration", "kotlin", "travis-ci", "multi-module"], "answers": [{"tags": [], "owner": {"reputation": 6355, "user_id": 3755692, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/F7x32.png?s=128&g=1", "display_name": "msrd0", "link": "https://stackoverflow.com/users/3755692/msrd0"}, "is_accepted": true, "score": 2, "last_activity_date": 1505599079, "creation_date": 1505599079, "answer_id": 46258783, "question_id": 46249935, "link": "https://stackoverflow.com/questions/46249935/building-multi-module-gradle-project-in-travis-ci/46258783#46258783", "title": "Building multi-module gradle project in Travis CI", "body": "\n\n<p>Trying to understand your problem, I cloned the repository and tried to run gradle on my local machine (ArchLinux) the same way Travis tries:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>./gradlew build\n</code></pre>\n\n<p>And I got the exact same error message:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Error: Could not find or load main class org.gradle.wrapper.GradleWrapperMain\n</code></pre>\n\n<p>This is really strange and I have never seen it before. So I asked myself: Where does gradle search for that class? Right, in the wrapper's jar file. And that seems to be empty:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ ls -lh gradle/wrapper/\ntotal 4.0K\n-rw-r--r-- 1 msrd0 users   0 Sep 16 23:51 gradle-wrapper.jar\n-rw-r--r-- 1 msrd0 users 230 Sep 16 23:51 gradle-wrapper.properties\n</code></pre>\n\n<h1>TL;DR</h1>\n\n<p>Whatever happened, your downloaded gradle wrapper is empty. You need to download the wrapper again, on Linux you can use this command (assuming you have gradle installed):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>gradle wrapper\n</code></pre>\n\n<p>If your local gradle distribution is old and you want to keep the version that's currently used in your repo, run:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>gradle wrapper --gradle-version=4.1\n</code></pre>\n"}], "owner": {"reputation": 1339, "user_id": 1359988, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/00c331889adb81f68b66cd75734459a6?s=128&d=identicon&r=PG", "display_name": "zjuhasz", "link": "https://stackoverflow.com/users/1359988/zjuhasz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 471, "favorite_count": 0, "accepted_answer_id": 46258783, "answer_count": 1, "score": 4, "last_activity_date": 1505599079, "creation_date": 1505534810, "question_id": 46249935, "link": "https://stackoverflow.com/questions/46249935/building-multi-module-gradle-project-in-travis-ci", "title": "Building multi-module gradle project in Travis CI", "body": "<p>I am trying to get a multi-module Gradle project to build in Travis CI and run all tests from all sub projects. By default running build from the top level build.gradle file seems to build all submodules and run all tests but Travis sees it as a failure. Ideally I'd also like to combine the Jacoco test coverage reports from all sub projects.</p>\n\n<p>The project I am trying to get this working on is open source and can be seen here: <a href=\"https://github.com/Tenkiv/Physikal\" rel=\"nofollow noreferrer\">https://github.com/Tenkiv/Physikal</a></p>\n"}, {"tags": ["types", "kotlin", "nullable"], "answers": [{"comments": [{"owner": {"reputation": 7558, "user_id": 966104, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ff370f6bd04596d5928ef29e33b25864?s=128&d=identicon&r=PG", "display_name": "Yona Appletree", "link": "https://stackoverflow.com/users/966104/yona-appletree"}, "edited": false, "score": 0, "creation_date": 1505601346, "post_id": 46252307, "comment_id": 79481677, "body": "Thanks for the ideas. I think the only reasonable one is #3, though unfortunately, it will require patching typescript-generator to use the module to get the metadata, it looks like. It really seems like a major oversight of the Kotlin team, who are quite java-interoperability-minded, to not have a way of determining nullability without writing Kotlin-specific code, though."}, {"owner": {"reputation": 20308, "user_id": 1051598, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f9c354e780ce562daea0e21b99bfdc0d?s=128&d=identicon&r=PG", "display_name": "Roman  Elizarov", "link": "https://stackoverflow.com/users/1051598/roman-elizarov"}, "reply_to_user": {"reputation": 7558, "user_id": 966104, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ff370f6bd04596d5928ef29e33b25864?s=128&d=identicon&r=PG", "display_name": "Yona Appletree", "link": "https://stackoverflow.com/users/966104/yona-appletree"}, "edited": false, "score": 2, "creation_date": 1505719395, "post_id": 46252307, "comment_id": 79509851, "body": "It is a great oversight of Java designers (a billion dollar oversight!) that there is no standard way to get nullability information in Java, so the only way to get it is via Kotlin-specific means."}], "tags": [], "owner": {"reputation": 20308, "user_id": 1051598, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f9c354e780ce562daea0e21b99bfdc0d?s=128&d=identicon&r=PG", "display_name": "Roman  Elizarov", "link": "https://stackoverflow.com/users/1051598/roman-elizarov"}, "is_accepted": true, "score": 4, "last_activity_date": 1505555363, "last_edit_date": 1505555363, "creation_date": 1505553923, "answer_id": 46252307, "question_id": 46247445, "link": "https://stackoverflow.com/questions/46247445/can-kotlin-emit-jsr-305-annotations-in-class-files/46252307#46252307", "title": "Can Kotlin emit JSR-305 annotations in class files", "body": "<p>Kotlin is designed to emit its own (JetBrains) annotations. This choise was made because <a href=\"https://jcp.org/en/jsr/detail?id=305\" rel=\"nofollow noreferrer\">JSR 305</a> was never released and there is no legal way for JetBrains to bundle JSR 305 annotations with compiler, since the license on (a dormant) JSR 305 does not allow it. The legal status of the <code>com.google.code.findbugs:jsr305</code> maven artifact is likewise murky, since <code>javax</code> package namespace is specifically reserved for JSRs.</p>\n\n<p>There are the following possible solutions:</p>\n\n<ol>\n<li><p>Write a custom Gradle plugin that post-processes Kotlin-compiled class files and changes <code>org.jetbrains.annotations.*</code> annotations to the corresponding <code>javax.annotation.*</code> annotations (<code>NotNull</code> to <code>Nonnull</code> and <code>Nullable</code> to <code>Nullable</code>) and changes the corresponding attiributes from runtime-invisible annotations to runtime-visible ones. </p></li>\n<li><p>Patch <code>typescript-generator</code> so that it used Kotlin reflection APIs in addition to Java Reflection to get nullablitity information from Kotlin classes. The entry point is for this task is <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/java.lang.-class/kotlin.html\" rel=\"nofollow noreferrer\">kotlin</a> extension of Java <code>Class</code> instance that allows to retrieve all the Kotlin metadata.</p></li>\n<li><p>Add <a href=\"https://github.com/FasterXML/jackson-module-kotlin\" rel=\"nofollow noreferrer\"><code>jackson-module-kotlin</code></a> to <code>typescript-generator</code>. This module is using Kotlin's reflection to get all the Kotlin specific information and feed it to Jackson, while <code>typescript-generator</code> is using Jackson bean introspection to get its type information, so it might just work.</p></li>\n</ol>\n"}], "owner": {"reputation": 7558, "user_id": 966104, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ff370f6bd04596d5928ef29e33b25864?s=128&d=identicon&r=PG", "display_name": "Yona Appletree", "link": "https://stackoverflow.com/users/966104/yona-appletree"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 323, "favorite_count": 0, "accepted_answer_id": 46252307, "answer_count": 1, "score": 3, "last_activity_date": 1505555363, "creation_date": 1505509425, "question_id": 46247445, "link": "https://stackoverflow.com/questions/46247445/can-kotlin-emit-jsr-305-annotations-in-class-files", "title": "Can Kotlin emit JSR-305 annotations in class files", "body": "<p>I'm using Kotlin with <a href=\"https://github.com/vojtechhabarta/typescript-generator\" rel=\"nofollow noreferrer\">https://github.com/vojtechhabarta/typescript-generator</a> to generate TypeScript definitions for my classes that are used in an API.</p>\n\n<p>To preserve nullability information, typescript-generator can use annotations present on fields and methods. It supports arbitrary annotation class names, listed in the build script.</p>\n\n<p>Kotlin, for some reason, annotates nullable fields with <code>@org.jetbrains.annotations.Nullable</code> rather than the JSR-305 annotation, <code>@javax.annotation.Nullable</code>.</p>\n\n<p>While the JSR-305 annotation has <code>RetentionPolicy.RUNTIME</code>, the Jetbrains annotation has <code>RetentionPolicy.CLASS</code>, making it unsuitable for introspection by libraries which use Java Reflection to detect annotations. </p>\n\n<p>Is it possible to have Kotlin generate standards-based annotations instead of the JetBrains proprietary annotations?</p>\n\n<p>If not, I'm interested in simple solutions to handle the issue. Perhaps a Gradle plugin that can generate JSR-305 annotations from the JetBrains ones or similar. I would really prefer to not have to double-annotate everything with a <code>?</code> and <code>@Nullable</code>.</p>\n"}, {"tags": ["arrays", "kotlin", "kotlin-null-safety"], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 9, "last_activity_date": 1505501921, "creation_date": 1505501921, "answer_id": 46245963, "question_id": 46245939, "link": "https://stackoverflow.com/questions/46245939/is-there-a-way-to-create-a-non-null-array-from-a-range/46245963#46245963", "title": "Is there a way to create a non-null array from a range?", "body": "<p>Yes, use the <a href=\"https://kotlinlang.org/docs/reference/basic-types.html#arrays\" rel=\"noreferrer\">constructor of <code>Array</code></a>:</p>\n\n<pre><code>val buttons = Array(count) { view.findViewById&lt;ImageButton&gt;(BUTTON_IDS[it])!! }\n</code></pre>\n"}], "owner": {"reputation": 13134, "user_id": 5115932, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/TUPjU.jpg?s=128&g=1", "display_name": "Bryan", "link": "https://stackoverflow.com/users/5115932/bryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 950, "favorite_count": 0, "accepted_answer_id": 46245963, "answer_count": 1, "score": 6, "last_activity_date": 1505501921, "creation_date": 1505501808, "question_id": 46245939, "link": "https://stackoverflow.com/questions/46245939/is-there-a-way-to-create-a-non-null-array-from-a-range", "title": "Is there a way to create a non-null array from a range?", "body": "<p>In Java a simple array can be created by using a traditional for loop:</p>\n\n<pre><code>ImageButton[] buttons = new ImageButton[count];\n\nfor (int i = 0; i &lt; count; i++) {\n   buttons[i] = view.findViewById(BUTTON_IDS[i]);\n}\n</code></pre>\n\n<p>A simple conversion to Kotlin yields the following:</p>\n\n<pre><code>val buttons = arrayOfNulls&lt;ImageButton&gt;(count)\n\nfor (i in 0..count) {\n    buttons[i] = view.findViewById&lt;ImageButton&gt;(BUTTON_IDS[i])\n}\n</code></pre>\n\n<p>The issue with this is that now each element in the array is optional; which riddles my code with <code>?</code> operators.</p>\n\n<p>Is there a way to create an array in a similar manner, but without the optional type?</p>\n"}, {"tags": ["java", "maven", "kotlin"], "comments": [{"owner": {"reputation": 300, "user_id": 4999263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d37f0c76fb358385ffa72749bc5711f?s=128&d=identicon&r=PG", "display_name": "brunesto", "link": "https://stackoverflow.com/users/4999263/brunesto"}, "edited": false, "score": 0, "creation_date": 1611228488, "post_id": 46245566, "comment_id": 116385756, "body": "see <a href=\"https://kotlinlang.org/docs/reference/using-maven.html#self-contained-jar-file\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/&hellip;</a>"}], "owner": {"reputation": 131, "user_id": 1482875, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/98acb5d2e81701550832aa492a828a14?s=128&d=identicon&r=PG", "display_name": "giantNinja", "link": "https://stackoverflow.com/users/1482875/giantninja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 303, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1505500279, "creation_date": 1505500279, "question_id": 46245566, "link": "https://stackoverflow.com/questions/46245566/creating-runnable-uber-jar-with-maven-from-project-mixed-with-java-and-kotlin", "title": "Creating runnable/uber jar with maven from project mixed with Java and Kotlin", "body": "<p>I have a Java project that I use maven for dependency resolution and building the self-contained, runnable/uber jar (via maven-shade-plugin currently) and I'd like to start playing around with mixing Kotlin into the projects for some new features.  </p>\n\n<p>Is using maven to create a runnable/uber jar comprised of Java (primarily) and Kotlin something that is relatively simple to do, and/or supported?  Or am I looking at a hack job of gluing together a bunch of stuff that might work if done right?  Kotlin isn't a requirement, but since it's supposed to be able to mix freely with Java, it's something I've been wanting to try out on this project.  Really trying to gauge if it's a can of worms, or no big deal (and if it's nbd, best direction to look into?)</p>\n\n<p>Here is the build section of my pom.xml so you can see how I'm creating it currently</p>\n\n<pre><code>&lt;build&gt;\n    &lt;finalName&gt;my-server&lt;/finalName&gt;\n    &lt;resources&gt;\n        &lt;resource&gt;\n            &lt;directory&gt;src/main/resources&lt;/directory&gt;\n            &lt;filtering&gt;true&lt;/filtering&gt;\n        &lt;/resource&gt;\n    &lt;/resources&gt;\n\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/plugin&gt;\n\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.4.3&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;shade&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;!-- exclude signatures --&gt;\n                        &lt;filters&gt;\n                            &lt;filter&gt;\n                                &lt;artifact&gt;*:*&lt;/artifact&gt;\n                                &lt;excludes&gt;\n                                    &lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\n                                    &lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\n                                    &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\n                                &lt;/excludes&gt;\n                            &lt;/filter&gt;\n                        &lt;/filters&gt;\n\n                        &lt;transformers&gt;\n                            &lt;transformer implementation=\"org.apache.maven.plugins.shade.resource.ServicesResourceTransformer\"/&gt;\n                            &lt;transformer implementation=\"org.apache.maven.plugins.shade.resource.ManifestResourceTransformer\"&gt;\n                                &lt;manifestEntries&gt;\n                                    &lt;Main-Class&gt;com.mycompany.myproject.mymainclass&lt;/Main-Class&gt;\n                                &lt;/manifestEntries&gt;\n                            &lt;/transformer&gt;\n                        &lt;/transformers&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.6.0&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;1.8&lt;/source&gt;\n                &lt;target&gt;1.8&lt;/target&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>Anyone have experience doing something like this?  Simple? or just stay away?</p>\n"}, {"tags": ["reflection", "kotlin", "kotlin-null-safety", "kotlin-reflect"], "answers": [{"tags": [], "owner": {"reputation": 398, "user_id": 5860372, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zHg3F3FLDsk/AAAAAAAAAAI/AAAAAAAAAFo/AUSCD3NK9Cw/photo.jpg?sz=128", "display_name": "Velmurugan V", "link": "https://stackoverflow.com/users/5860372/velmurugan-v"}, "is_accepted": false, "score": -1, "last_activity_date": 1505933201, "last_edit_date": 1505933201, "creation_date": 1505499625, "answer_id": 46245434, "question_id": 46245206, "link": "https://stackoverflow.com/questions/46245206/how-can-i-instantiate-an-object-using-default-constructor-parameter-values-in-ko/46245434#46245434", "title": "How can I instantiate an object using default constructor parameter values in Kotlin?", "body": "<p><strong>Using in Kotlin:</strong></p>\n\n<p>default values in constructors are taken only when the particular parameter of that constructor is not passed to it at all  .That means it is  done to achieve various combination of parameteraised constructor.\nfor example,</p>\n\n<pre><code>data class Bird (val name: String = \"peacock\", val gender: String = \"male\")\n</code></pre>\n\n<p>takes default values when used as Bird(), Bird(\"dove\") or Bird(gender =\"female\") .</p>\n\n<p>so to solve your issue you have to add ? next to the categories parameter.\nlike this,</p>\n\n<pre><code>data class Project(val code: String,\n                   val name: String,\n                   val categories: List&lt;String&gt;?)\n</code></pre>\n\n<p>and no need for emptyList() default.\nWhen you using emptyList as in your question you have to check for null and omit that parameter like this </p>\n\n<pre><code>val project = if(categories == null)\n       {\n          Project(code,name)\n       }\n       else\n       {\n          Project(code,name,categories)\n       }\n</code></pre>\n\n<p>That is when using this data class in another kotlin class .</p>\n\n<p><strong>Using in JAVA:</strong></p>\n\n<p>But if you want to use this data class in any java class then as @Hotkey said it is not supported by default , as kotlin supports this default parameter by using some methods under the hood.</p>\n\n<p>So to make it compatible with java class you have to add <a href=\"https://kotlinlang.org/docs/reference/java-to-kotlin-interop.html#overloads-generation\" rel=\"nofollow noreferrer\">@JvmOverloads</a> annotation but not as @Hotkey said it have to annotated like this</p>\n\n<pre><code>data class Project @JvmOverloads constructor(val code: String,\n                                             val name: String,\n                                             val categories: List&lt;String&gt;? = emptyList())\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": false, "score": 4, "last_activity_date": 1505505708, "last_edit_date": 1505505708, "creation_date": 1505502440, "answer_id": 46246073, "question_id": 46245206, "link": "https://stackoverflow.com/questions/46245206/how-can-i-instantiate-an-object-using-default-constructor-parameter-values-in-ko/46246073#46246073", "title": "How can I instantiate an object using default constructor parameter values in Kotlin?", "body": "<p>The Kotlin default parameters are not compatible with Java reflection, meaning there's no simple way to use them together, because the Kotlin default parameters actually work with a separate method under the hood that is also passed a bit mask to specify which arguments are default.</p>\n\n<p>There are two ways to fix this.</p>\n\n<ul>\n<li><p>Use Kotlin reflection. For example, the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/-k-callable/call-by.html\" rel=\"nofollow noreferrer\"><code>callBy</code></a> function supports default parameters, they can be omitted from the map.</p></li>\n<li><p>Use <a href=\"https://kotlinlang.org/docs/reference/java-to-kotlin-interop.html#overloads-generation\" rel=\"nofollow noreferrer\"><code>@JvmOverloads</code> to generate an overload without the default parameter</a>which can be called in Java.</p>\n\n<pre><code>@JvmOverloads\ndata class Project(\n    val code: String,\n    val name: String,\n    val categories: List&lt;String&gt; = emptyList()\n)\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 1166, "user_id": 211195, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/47ffd6538b8c1694db320e07af4397ff?s=128&d=identicon&r=PG", "display_name": "rosencreuz", "link": "https://stackoverflow.com/users/211195/rosencreuz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1354, "favorite_count": 2, "answer_count": 2, "score": 5, "last_activity_date": 1505933201, "creation_date": 1505498133, "question_id": 46245206, "link": "https://stackoverflow.com/questions/46245206/how-can-i-instantiate-an-object-using-default-constructor-parameter-values-in-ko", "title": "How can I instantiate an object using default constructor parameter values in Kotlin?", "body": "<p>I have data class with default values. </p>\n\n<pre><code>data class Project(\n    val code: String,\n    val name: String,\n    val categories: List&lt;String&gt; = emptyList())\n</code></pre>\n\n<p>Java reflection fails to instantiate the class when some values are null. I'm getting exception </p>\n\n<pre><code>java.lang.IllegalArgumentException: Parameter specified as non-null is null: method Project.&lt;init&gt;, parameter categories\n</code></pre>\n\n<p>This is because <code>java.lang.reflect.Constructor&lt;T&gt;.instantiateClass</code> method expects arguments that are not null. </p>\n\n<p>I have the type information, I have the constructor definition but I'm not sure how to call the constructor so that it uses the default values (The values are coming from the database and <code>categories</code> can be <code>null</code>). Is there any way to achieve this in Kotlin?</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 107167, "user_id": 878126, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/D5dZW.jpg?s=128&g=1", "display_name": "android developer", "link": "https://stackoverflow.com/users/878126/android-developer"}, "edited": false, "score": 4, "creation_date": 1553353953, "post_id": 46244475, "comment_id": 97357368, "body": "Using multiple init blocks, you can keep initialization logic close to the member declarations. Sometimes you may also want to split a single init blocks to place a property with an initializer inbetween, as property initializers and init blocks are executed in the same order as they appear in the code."}, {"owner": {"reputation": 107167, "user_id": 878126, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/D5dZW.jpg?s=128&g=1", "display_name": "android developer", "link": "https://stackoverflow.com/users/878126/android-developer"}, "edited": false, "score": 6, "creation_date": 1553358837, "post_id": 46244475, "comment_id": 97358827, "body": "That would be a very weird use case, and it&#39;s not intuitive for me to see multiple <code>init</code> calls (multiple times to initialize the object...). Anyway, thank you."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 37, "last_activity_date": 1505504974, "last_edit_date": 1505504974, "creation_date": 1505494934, "answer_id": 46244475, "question_id": 46244409, "link": "https://stackoverflow.com/questions/46244409/why-is-return-not-allowed-in-kotlin-init-block/46244475#46244475", "title": "Why is `return` not allowed in Kotlin init block?", "body": "<p>This is not allowed because of possible counter-intuitive behavior with regard to several <code>init { ... }</code> blocks, which might lead to subtle bugs:</p>\n\n<pre><code>class C {\n    init { \n        if (someCondition) return\n    }\n    init {\n        // should this block run if the previous one returned?\n    }\n}\n</code></pre>\n\n<p><sup>If the answer is 'no', the code becomes brittle: adding a <code>return</code> in one <code>init</code> block would affect the other blocks.</sup></p>\n\n<p>A possible workaround that allows you to finish a single <code>init</code> block is to use some function with lambda and <a href=\"https://kotlinlang.org/docs/reference/returns.html#return-at-labels\" rel=\"noreferrer\">a labeled return</a>:</p>\n\n<pre><code>class C {\n    init {\n        run {\n            if (someCondition) return@run\n            /* do something otherwise */\n        }\n    }\n}\n</code></pre>\n\n<p>Or use an explicitly defined <a href=\"https://kotlinlang.org/docs/reference/classes.html#constructors\" rel=\"noreferrer\">secondary constructor</a>:</p>\n\n<pre><code>class C {\n    constructor() { \n        if (someCondition) return \n        /* do something otherwise */\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 11622, "user_id": 1097451, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1516b785b675ba751aacdc05ae31764b?s=128&d=identicon&r=PG", "display_name": "Martin Drozdik", "link": "https://stackoverflow.com/users/1097451/martin-drozdik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5094, "favorite_count": 0, "accepted_answer_id": 46244475, "answer_count": 1, "score": 31, "last_activity_date": 1505504974, "creation_date": 1505494666, "question_id": 46244409, "link": "https://stackoverflow.com/questions/46244409/why-is-return-not-allowed-in-kotlin-init-block", "title": "Why is `return` not allowed in Kotlin init block?", "body": "<p>If I compile this:</p>\n\n<pre><code>class CsvFile(pathToFile : String)\n{\n    init \n    {\n        if (!File(pathToFile).exists())\n            return\n        // Do something useful here\n    }\n}\n</code></pre>\n\n<p>I get an error:</p>\n\n<blockquote>\n  <p>Error:(18, 13) Kotlin: 'return' is not allowed here</p>\n</blockquote>\n\n<p>I don't want to argue with the compiler, but I am curious about the motivation behind this restriction.</p>\n"}, {"tags": ["android", "kotlin", "spek"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8615418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d85434ca0fdbdae41fad5775be6f21e2?s=128&d=identicon&r=PG&f=1", "display_name": "HopefulAndroid", "link": "https://stackoverflow.com/users/8615418/hopefulandroid"}, "is_accepted": false, "score": 0, "last_activity_date": 1505487722, "creation_date": 1505487722, "answer_id": 46242573, "question_id": 46242496, "link": "https://stackoverflow.com/questions/46242496/why-does-this-spek-on-action-not-run/46242573#46242573", "title": "Why does this Spek on action not run?", "body": "<p>Make sure to update the spec version to be </p>\n\n<pre><code>testCompile group: 'org.jetbrains.spek', name: 'spek-api', version: '1.1.4'\ntestCompile group: 'org.jetbrains.spek', name: 'spek-junit-platform-engine', version: '1.1.4'\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8615418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d85434ca0fdbdae41fad5775be6f21e2?s=128&d=identicon&r=PG&f=1", "display_name": "HopefulAndroid", "link": "https://stackoverflow.com/users/8615418/hopefulandroid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505487722, "creation_date": 1505487486, "question_id": 46242496, "link": "https://stackoverflow.com/questions/46242496/why-does-this-spek-on-action-not-run", "title": "Why does this Spek on action not run?", "body": "<p>When I run this example code, all the code in the \"on\" action does not run in Android Studio. Do you know why? what is missing?</p>\n\n<pre><code>import org.jetbrains.spek.api.Spek  \nimport org.jetbrains.spek.api.dsl.describe  \nimport org.jetbrains.spek.api.dsl.given  \nimport org.jetbrains.spek.api.dsl.it \nimport org.jetbrains.spek.api.dsl.on\n\n@RunWith(JUnitPlatform::class) class SpekTest : Spek({\n    val x = 2\n    val y = 3\n\n    given(\"x = $x and y = $y\") {\n        val sum = x + y\n\n        on (\"why does this not run?\") {\n            it(\"should be that x + y = 5\") {\n                assertEquals(5, sum)\n            }\n\n            it(\"should be that x - y = -1\") {\n                val subtract = x - y\n                assertEquals(-111, subtract)\n            }\n        }\n\n    } })\n</code></pre>\n"}, {"tags": ["android", "kotlin", "lint"], "comments": [{"owner": {"reputation": 3910, "user_id": 4103854, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EUnmsdTd6P4/AAAAAAAAAAI/AAAAAAAAAGI/TBEWqWgj0wo/photo.jpg?sz=128", "display_name": "Logain", "link": "https://stackoverflow.com/users/4103854/logain"}, "edited": false, "score": 0, "creation_date": 1505713041, "post_id": 46241257, "comment_id": 79506800, "body": "which Kotlin version are you using? Looks like the linter is not working well with the bytecode generated by kotlin. I&#39;ve seen several issues like this being addressed by the Kotlin team."}, {"owner": {"reputation": 106, "user_id": 3287534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af465e794be1820cd1692efc6002dd61?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/3287534/nate"}, "reply_to_user": {"reputation": 3910, "user_id": 4103854, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EUnmsdTd6P4/AAAAAAAAAAI/AAAAAAAAAGI/TBEWqWgj0wo/photo.jpg?sz=128", "display_name": "Logain", "link": "https://stackoverflow.com/users/4103854/logain"}, "edited": false, "score": 0, "creation_date": 1505751057, "post_id": 46241257, "comment_id": 79530638, "body": "Just upgraded to 1.1.4-3"}, {"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 1, "creation_date": 1505795195, "post_id": 46241257, "comment_id": 79546176, "body": "This looks like the following issue: <a href=\"https://youtrack.jetbrains.com/issue/KT-20302\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-20302</a>, could you please add your case there?"}], "owner": {"reputation": 106, "user_id": 3287534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af465e794be1820cd1692efc6002dd61?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/3287534/nate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 140, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1505486105, "creation_date": 1505483589, "last_edit_date": 1505486105, "question_id": 46241257, "link": "https://stackoverflow.com/questions/46241257/extending-treemap-in-kotlin-fails-lint", "title": "Extending TreeMap in Kotlin fails lint", "body": "<p>Not sure if this is a bug or I have an issue with my implementation in Kotlin.</p>\n\n<p>I extended TreeMap:</p>\n\n<pre><code>class TargetTreeMap : TreeMap&lt;String, Target&gt;(String.CASE_INSENSITIVE_ORDER) {...)\n</code></pre>\n\n<p>After running lint, I get <code>NewApi</code> lint errors on my class:</p>\n\n<p><code>13: Call requires API level 24 (current min is 19): java.util.TreeMap#getOrDefault</code></p>\n\n<p><code>13: Call requires API level 24 (current min is 19): java.util.TreeMap#remove</code></p>\n\n<p>EDIT:\nI forgot to mention that I am not using those methods in my implementation.</p>\n"}, {"tags": ["kotlin", "coroutine", "kotlin-coroutines"], "answers": [{"comments": [{"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "edited": false, "score": 5, "creation_date": 1516920443, "post_id": 46240340, "comment_id": 83899359, "body": "It still makes me worries when I see the highlighted warning on the function we use e.g. launch, stating <code>The feature &quot;coroutines&quot; is experimental (see more here)</code> and link to <a href=\"https://kotlinlang.org/docs/diagnostics/experimental-coroutines.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/diagnostics/experimental-coroutines.html</a>"}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 4, "creation_date": 1517919159, "post_id": 46240340, "comment_id": 84282049, "body": "It&#39;s a bit of a Catch-22, isn&#39;t it? How are they going to be battle-tested if nobody tries them out :) On the other hand, my experience with JetBrains&#39; &quot;experimental&quot; features is miles above the experience with &quot;production quality&quot; releases from many other vendors. Specifically, I have had absolutely zero issues with the implementation of coroutines; the only &quot;glitches&quot; I saw were about some details in their treatment by the static type system, which have no repercussions on the runtime. They passed quite serious stress tests and benchmarks in Hazelcast Jet, with flying colors."}, {"owner": {"reputation": 98, "user_id": 9211161, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KfvgIfhrYRY/AAAAAAAAAAI/AAAAAAAAAA8/zVe7BuvTBIk/photo.jpg?sz=128", "display_name": "Jean de Klerk", "link": "https://stackoverflow.com/users/9211161/jean-de-klerk"}, "edited": false, "score": 0, "creation_date": 1534374229, "post_id": 46240340, "comment_id": 90686983, "body": "Parts of this answer are patently wrong. The <i>entire package</i> is experimental, not some parts of it."}], "tags": [], "owner": {"reputation": 20308, "user_id": 1051598, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f9c354e780ce562daea0e21b99bfdc0d?s=128&d=identicon&r=PG", "display_name": "Roman  Elizarov", "link": "https://stackoverflow.com/users/1051598/roman-elizarov"}, "is_accepted": true, "score": 113, "last_activity_date": 1539931766, "last_edit_date": 1539931766, "creation_date": 1505480801, "answer_id": 46240340, "question_id": 46240236, "link": "https://stackoverflow.com/questions/46240236/can-experimental-kotlin-coroutines-be-used-in-production/46240340#46240340", "title": "Can &quot;experimental&quot; Kotlin coroutines be used in production?", "body": "<p><strong>UPDATE</strong>: Kotlin coroutines are no longer experimental as of Kotlin 1.3.</p>\n\n<p>Kotlin coroutines can and should be used in production. That was the chief reason to officially release them in Kotlin 1.1. Having released them, the JetBrains team had committed to maintain backwards compatibility with respect to any changes that are introduced to them in the minor releases as they evolve, while allowing people to safely try them in complex production applications.</p>\n\n<p>In short, the difference between \u201cexperimental\u201d and \u201cnormal\u201d features, is that for normal Kotlin features new stuff cannot be added in minor updates, because there is a \"full compatibility\" guarantee, while for experimental features new stuff can be added, but nothing can be removed (because of the backwards compatibility guarantee).</p>\n\n<p>Experimental coroutines use a separate <code>kotlin.coroutines.experimental</code> package name, so that when coroutines design is finalized and they move to <code>kotlin.coroutines</code> package, old compiled code will not break, but will  continue to work via a separate support library.</p>\n\n<p>Further discussion (long-read) about why they are \"experimental\" and what does this mean can be found in this <a href=\"https://discuss.kotlinlang.org/t/experimental-status-of-coroutines-in-1-1-and-related-compatibility-concerns/2236\" rel=\"noreferrer\">forum post</a> by Andrey Breslav.</p>\n\n<p>The same question applies to coroutines support libraries.</p>\n\n<p>The current version of <code>kotlinx.coroutines</code> is designed for production use. It is pretty well covered with tests, lots of things are already optimized, all the changes are made considering the issues of backwards compatibility with previously compiled code. It certainly does serve as a test-bed for various coroutine-based things, so there are some parts that are clearly marked as \"work in progress\" or \"unstable\" in the documentation of the corresponding functions and classes. However, by default, all the public APIs in <code>kotlinx.coroutines</code> are considered to be stable and are being evolved, if needed, with appropriate migration aids.</p>\n"}], "owner": {"reputation": 20308, "user_id": 1051598, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f9c354e780ce562daea0e21b99bfdc0d?s=128&d=identicon&r=PG", "display_name": "Roman  Elizarov", "link": "https://stackoverflow.com/users/1051598/roman-elizarov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8337, "favorite_count": 11, "accepted_answer_id": 46240340, "answer_count": 1, "score": 85, "last_activity_date": 1552981617, "creation_date": 1505480490, "last_edit_date": 1552981617, "question_id": 46240236, "link": "https://stackoverflow.com/questions/46240236/can-experimental-kotlin-coroutines-be-used-in-production", "title": "Can &quot;experimental&quot; Kotlin coroutines be used in production?", "body": "<p>Can Kotlin coroutines be used in production, and what does their experimental status mean?</p>\n"}, {"tags": ["kotlin", "tornadofx"], "answers": [{"tags": [], "owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "is_accepted": true, "score": 3, "last_activity_date": 1505656546, "creation_date": 1505656546, "answer_id": 46264836, "question_id": 46239338, "link": "https://stackoverflow.com/questions/46239338/is-there-any-way-to-bind-a-property-to-appconfig-in-tornadofx/46264836#46264836", "title": "Is there any way to bind a property to appConfig in tornadofx?", "body": "<p>If what you want to do is to save the current width/height of the Window and restore that when the View is docked again, you can override onDock to do both operations there:</p>\n\n<pre><code>override fun onDock() {\n    if (config[\"w\"] != null &amp;&amp; config[\"h\"] != null) {\n        currentWindow?.apply {\n            width = config.double(\"w\")!!\n            height = config.double(\"h\")!!\n        }\n    }\n\n    currentWindow?.apply {\n        Bindings.add(widthProperty(), heightProperty()).onChange {\n            with (config) {\n                put(\"w\", width.toString())\n                put(\"h\", height.toString())\n                save()\n            }\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 5339, "user_id": 314310, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/9c74f9c66df98052bef13864bffcd09c?s=128&d=identicon&r=PG", "display_name": "Anindya Chatterjee", "link": "https://stackoverflow.com/users/314310/anindya-chatterjee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 46264836, "answer_count": 1, "score": 0, "last_activity_date": 1505656546, "creation_date": 1505477642, "question_id": 46239338, "link": "https://stackoverflow.com/questions/46239338/is-there-any-way-to-bind-a-property-to-appconfig-in-tornadofx", "title": "Is there any way to bind a property to appConfig in tornadofx?", "body": "<p>Suppose I want to save a view's height and width value using appConfig in tornadofx. Is there anyway I can bind these properties to appConfig, so that when I save the config, the latest value of height and width will always be saved?</p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 8621, "user_id": 5247292, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/fQKn3.png?s=128&g=1", "display_name": "guenhter", "link": "https://stackoverflow.com/users/5247292/guenhter"}, "is_accepted": true, "score": 2, "last_activity_date": 1505476749, "creation_date": 1505476749, "answer_id": 46239061, "question_id": 46238953, "link": "https://stackoverflow.com/questions/46238953/kotlin-lambda-not-calling-code-inside/46239061#46239061", "title": "Kotlin Lambda not calling code inside", "body": "<p>The list is not empty. A single <code>println(lines.size)</code> will shown you that, because that <code>println</code> is never called. </p>\n\n<p>You simply have one pair of curly braces too much.</p>\n\n<p>change your code to</p>\n\n<pre><code>   ...\n   PrintWriter(FileWriter(File(\"./lines2.txt\"))).use { out -&gt;\n\n        // list is empty??\n        println(lines.size)\n        lines.forEach {\n            out.println(it.split(\":\")[0])\n        }\n    }\n    ...\n</code></pre>\n\n<p>The reason is, that a lambda doesn't need its block in curly braces.</p>\n\n<p>So don't write</p>\n\n<pre><code>out -&gt; { ... }\n</code></pre>\n\n<p>just write</p>\n\n<pre><code>out -&gt; ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "is_accepted": false, "score": 2, "last_activity_date": 1505512547, "last_edit_date": 1505512547, "creation_date": 1505511294, "answer_id": 46247765, "question_id": 46238953, "link": "https://stackoverflow.com/questions/46238953/kotlin-lambda-not-calling-code-inside/46247765#46247765", "title": "Kotlin Lambda not calling code inside", "body": "<p>guenther already told you what is wrong with your code, but I think an explanation of what happened is missing.</p>\n\n<p>Consider the following:</p>\n\n<pre><code>val x = { println(\"y\") }\n</code></pre>\n\n<p>Will it print out <em>y</em>? No, the lamda is never invoked. You have to call <code>x()</code>.</p>\n\n<p>Let's take a look at what you did:</p>\n\n<pre><code>val x = { { println(\"y\") } }\nx()\n</code></pre>\n\n<p>Will it print out y? No, because you don't invoke the lambda that prints <em>y</em>.</p>\n\n<p>To make things more clear, let's specify the types explicitely.</p>\n\n<pre><code>val x:() -&gt; (() -&gt; Unit) = { { println(\"y\") } }\n</code></pre>\n\n<p>Now we can see that the first lambda invoked by <code>x()</code> returns a lambda as well so you would have to call <code>x()()</code> in order to invoke the returned lambda as well.</p>\n\n<p>So using a second pair a curly braces is not just not optional but gives the code a whole new meaning.</p>\n\n<hr>\n\n<p>But this means that there would be also another solution to your problem.</p>\n\n<pre><code>PrintWriter(FileWriter(File(\"./lines2.txt\"))).use { out -&gt; {\n        println(lines.size)\n        lines.forEach {\n            out.println(it.split(\":\")[0])\n        }\n    }() // &lt;-- add braces here to invoke the lambda\n}\n</code></pre>\n\n<p>So, you can either remove two brackets are add two more. Choice is yours.</p>\n\n<p><sub>Disclaimer: Removing two braces is the way to go. The other option is just to prove a point.</sub></p>\n"}], "owner": {"reputation": 13, "user_id": 8614552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c18b859ca477575bd175e2500bd46f61?s=128&d=identicon&r=PG&f=1", "display_name": "rainman", "link": "https://stackoverflow.com/users/8614552/rainman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 501, "favorite_count": 0, "accepted_answer_id": 46239061, "answer_count": 2, "score": 1, "last_activity_date": 1505522346, "creation_date": 1505476387, "last_edit_date": 1505522346, "question_id": 46238953, "link": "https://stackoverflow.com/questions/46238953/kotlin-lambda-not-calling-code-inside", "title": "Kotlin Lambda not calling code inside", "body": "<p>I encountered the strangest thing.</p>\n\n<p>Lets say I have a text file called \"lines.txt\". This file contains lines in key value pairs.</p>\n\n<pre><code>test:100\ntest1:200\ntest2:300\ntest3:400\n</code></pre>\n\n<p>If I read this file in Kotlin the list is not empty however the loop inside the output stream does not get called.</p>\n\n<pre><code>object App {\n\n@JvmStatic\nfun main(args: Array&lt;String&gt;) {\n\n    // file containing lines of text\n    val lines = Files.readAllLines(Paths.get(\"./hashes.txt\"))\n\n    // not empty\n    println(lines.size)\n\n    // write back a modified version\n    PrintWriter(FileWriter(File(\"./lines2.txt\"))).use { out -&gt; {\n\n            // this doesn't get called\n            println(lines.size)\n            lines.forEach {\n                out.println(it.split(\":\")[0])\n            }\n\n        }\n    }\n\n}\n\n}\n</code></pre>\n\n<p>I don't understand why this is so if anyone can enlighten me that would be awesome.</p>\n"}, {"tags": ["spring", "kotlin", "kotlin-interop", "kotlin-null-safety"], "comments": [{"owner": {"reputation": 5658, "user_id": 8041461, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-nR0Gs4YyO0M/AAAAAAAAAAI/AAAAAAAAAKk/ld4ET5Sgzvw/photo.jpg?sz=128", "display_name": "jrtapsell", "link": "https://stackoverflow.com/users/8041461/jrtapsell"}, "edited": false, "score": 0, "creation_date": 1505476035, "post_id": 46238790, "comment_id": 79440961, "body": "Can you autowire the nullable version? And does the field have to be lateinit"}, {"owner": {"reputation": 660, "user_id": 1424488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/unSBg.png?s=128&g=1", "display_name": "fkurth", "link": "https://stackoverflow.com/users/1424488/fkurth"}, "reply_to_user": {"reputation": 5658, "user_id": 8041461, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-nR0Gs4YyO0M/AAAAAAAAAAI/AAAAAAAAAKk/ld4ET5Sgzvw/photo.jpg?sz=128", "display_name": "jrtapsell", "link": "https://stackoverflow.com/users/8041461/jrtapsell"}, "edited": false, "score": 1, "creation_date": 1505476220, "post_id": 46238790, "comment_id": 79441099, "body": "Yes, var todCacheTimeSeconds: Int? = null works, but thats not what i want."}], "answers": [{"tags": [], "owner": {"reputation": 5658, "user_id": 8041461, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-nR0Gs4YyO0M/AAAAAAAAAAI/AAAAAAAAAKk/ld4ET5Sgzvw/photo.jpg?sz=128", "display_name": "jrtapsell", "link": "https://stackoverflow.com/users/8041461/jrtapsell"}, "is_accepted": false, "score": 0, "last_activity_date": 1558817478, "last_edit_date": 1558817478, "creation_date": 1505476420, "answer_id": 46238963, "question_id": 46238790, "link": "https://stackoverflow.com/questions/46238790/how-to-use-spring-annotations-like-autowired-or-value-in-kotlin-for-primitive/46238963#46238963", "title": "how to use spring annotations like @Autowired or @Value in kotlin for primitive types?", "body": "<p>The problem is not the annotation, but the mix of primitive and <code>lateinit</code>, as per <a href=\"https://stackoverflow.com/questions/38761294/why-doesnt-kotlin-allow-to-use-lateinit-with-primitive-types\">this question</a>, Kotlin does not allow <code>lateinit</code> primitives. </p>\n\n<p>The fix would be to change to a nullable type <code>Int?</code>, or to not use <code>lateinit</code>.</p>\n\n<p><a href=\"https://tio.run/##y84vycnM@/8/OSexuFjBWaGaKyexJDUzL7NEoSyxSCE5MTkjNSQzNzU4NTk/L6XYSsEzr4Sr9v9/AA\" rel=\"nofollow noreferrer\">This <em>TryItOnline</em></a> shows the issue.</p>\n"}, {"tags": [], "owner": {"reputation": 462, "user_id": 4582676, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kQ_JnGCo6bg/AAAAAAAAAAI/AAAAAAAAABo/bQhDxH-A0JY/photo.jpg?sz=128", "display_name": "Eduard Kornev", "link": "https://stackoverflow.com/users/4582676/eduard-kornev"}, "is_accepted": false, "score": 0, "last_activity_date": 1505494072, "creation_date": 1505494072, "answer_id": 46244275, "question_id": 46238790, "link": "https://stackoverflow.com/questions/46238790/how-to-use-spring-annotations-like-autowired-or-value-in-kotlin-for-primitive/46244275#46244275", "title": "how to use spring annotations like @Autowired or @Value in kotlin for primitive types?", "body": "<p>Kotlin compiles Int to int in java code. Spring wanted non-primitive types for injection, so you should use Int? / Boolean? / Long? and etc. Nullable types kotlin compile to Integer / Boolean / etc.</p>\n"}, {"comments": [{"owner": {"reputation": 436, "user_id": 2699805, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8725bb7aaf28a7cb2ebb6fb1d247cb6e?s=128&d=identicon&r=PG&f=1", "display_name": "qwert_ukg", "link": "https://stackoverflow.com/users/2699805/qwert-ukg"}, "edited": false, "score": 0, "creation_date": 1528350285, "post_id": 50733703, "comment_id": 88475193, "body": "also u can inject <code>env</code> and pass values form there, using <code>lazy</code> delegate"}, {"owner": {"reputation": 2775, "user_id": 2102748, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a1adcb8ed924ecd1045fd6252a7df18?s=128&d=identicon&r=PG", "display_name": "milosmns", "link": "https://stackoverflow.com/users/2102748/milosmns"}, "edited": false, "score": 1, "creation_date": 1615375394, "post_id": 50733703, "comment_id": 117669632, "body": "I would advise against a nullable type, if possible (and not only because OP said that&#39;s not an option). Making something nullable that you didn&#39;t intend to make nullable by design is basically going backwards towards Java..."}], "tags": [], "owner": {"reputation": 436, "user_id": 2699805, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8725bb7aaf28a7cb2ebb6fb1d247cb6e?s=128&d=identicon&r=PG&f=1", "display_name": "qwert_ukg", "link": "https://stackoverflow.com/users/2699805/qwert-ukg"}, "is_accepted": false, "score": 15, "last_activity_date": 1528350093, "creation_date": 1528350093, "answer_id": 50733703, "question_id": 46238790, "link": "https://stackoverflow.com/questions/46238790/how-to-use-spring-annotations-like-autowired-or-value-in-kotlin-for-primitive/50733703#50733703", "title": "how to use spring annotations like @Autowired or @Value in kotlin for primitive types?", "body": "<blockquote>\n  <p>@Value(\"\\${cacheTimeSeconds}\")\n  lateinit var cacheTimeSeconds: Int</p>\n</blockquote>\n\n<p>should be</p>\n\n<pre><code>@Value(\"\\${cacheTimeSeconds}\")\nval cacheTimeSeconds: Int? = null\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 106, "user_id": 6740934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8bf7debe4b0f8e32dd4991eec389c25?s=128&d=identicon&r=PG", "display_name": "Yao Yuan", "link": "https://stackoverflow.com/users/6740934/yao-yuan"}, "is_accepted": false, "score": 2, "last_activity_date": 1561621677, "creation_date": 1561621677, "answer_id": 56786354, "question_id": 46238790, "link": "https://stackoverflow.com/questions/46238790/how-to-use-spring-annotations-like-autowired-or-value-in-kotlin-for-primitive/56786354#56786354", "title": "how to use spring annotations like @Autowired or @Value in kotlin for primitive types?", "body": "<p>Try to set a default value</p>\n\n<pre><code>    @Value(\"\\${a}\")\n    val a: Int = 0\n</code></pre>\n\n<p>in application.properties</p>\n\n<pre><code>a=1\n</code></pre>\n\n<p>in the code</p>\n\n<pre><code>package com.example.demo\n\nimport org.springframework.beans.factory.annotation.Value\nimport org.springframework.boot.CommandLineRunner\nimport org.springframework.boot.autoconfigure.SpringBootApplication\nimport org.springframework.boot.runApplication\nimport org.springframework.stereotype.Component\n\n@SpringBootApplication\nclass DemoApplication\n\nfun main(args: Array&lt;String&gt;) {\n    runApplication&lt;DemoApplication&gt;(*args)\n}\n\n@Component\nclass Main : CommandLineRunner {\n\n    @Value(\"\\${a}\")\n    val a: Int = 0\n\n    override fun run(vararg args: String) {\n        println(a)\n    }\n}\n</code></pre>\n\n<p>it will print <code>1</code></p>\n\n<p>or use contructor inject</p>\n\n<pre><code>@Component\nclass Main(@Value(\"\\${a}\") val a: Int) : CommandLineRunner {\n\n    override fun run(vararg args: String) {\n        println(a)\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 107, "user_id": 3640754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sF4Iu.jpg?s=128&g=1", "display_name": "drix", "link": "https://stackoverflow.com/users/3640754/drix"}, "is_accepted": false, "score": 6, "last_activity_date": 1571924278, "creation_date": 1571924278, "answer_id": 58542636, "question_id": 46238790, "link": "https://stackoverflow.com/questions/46238790/how-to-use-spring-annotations-like-autowired-or-value-in-kotlin-for-primitive/58542636#58542636", "title": "how to use spring annotations like @Autowired or @Value in kotlin for primitive types?", "body": "<p>I just used <code>Number</code> instead of <code>Int</code> like so...</p>\n\n<pre><code>    @Value(\"\\${cacheTimeSeconds}\")\n    lateinit var cacheTimeSeconds: Number\n</code></pre>\n\n<p>The other options are to do what others mentioned before...</p>\n\n<pre><code>    @Value(\"\\${cacheTimeSeconds}\")\n    var cacheTimeSeconds: Int? = null\n</code></pre>\n\n<p>Or you can simply provide a default value like... </p>\n\n<pre><code>    @Value(\"\\${cacheTimeSeconds}\")\n    var cacheTimeSeconds: Int = 1\n</code></pre>\n\n<p>In my case I had to get a property that was a <code>Boolean</code> type which is primitive in Kotlin, so my code looks like this...</p>\n\n<pre><code>    @Value(\"\\${myBoolProperty}\")\n    var myBoolProperty: Boolean = false\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 468, "user_id": 4079473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e84e74ae5397937007fbd756476a4939?s=128&d=identicon&r=PG&f=1", "display_name": "anstue", "link": "https://stackoverflow.com/users/4079473/anstue"}, "is_accepted": true, "score": 18, "last_activity_date": 1576075979, "creation_date": 1576075979, "answer_id": 59288442, "question_id": 46238790, "link": "https://stackoverflow.com/questions/46238790/how-to-use-spring-annotations-like-autowired-or-value-in-kotlin-for-primitive/59288442#59288442", "title": "how to use spring annotations like @Autowired or @Value in kotlin for primitive types?", "body": "<p>You can also use the @Value annotation within the constructor:</p>\n\n<pre><code>class Test(\n    @Value(\"\\${my.value}\")\n    private val myValue: Long\n) {\n        //...\n  }\n</code></pre>\n\n<p>This has the benefit that your variable is final and none-nullable. I also prefer constructor injection. It can make testing easier.</p>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 10313787, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RCGiEVB8gwQ/AAAAAAAAAAI/AAAAAAAAHp4/BL2OXEQFqtQ/photo.jpg?sz=128", "display_name": "powermilk", "link": "https://stackoverflow.com/users/10313787/powermilk"}, "edited": false, "score": 1, "creation_date": 1615185126, "post_id": 60610316, "comment_id": 117603085, "body": "OP says &quot;Autowiring a non-primitive with spring annotations&quot;..."}, {"owner": {"reputation": 17453, "user_id": 5279996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf8327567575d69a46bd8afe8db4466e?s=128&d=identicon&r=PG", "display_name": "Braian Coronel", "link": "https://stackoverflow.com/users/5279996/braian-coronel"}, "reply_to_user": {"reputation": 61, "user_id": 10313787, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RCGiEVB8gwQ/AAAAAAAAAAI/AAAAAAAAHp4/BL2OXEQFqtQ/photo.jpg?sz=128", "display_name": "powermilk", "link": "https://stackoverflow.com/users/10313787/powermilk"}, "edited": false, "score": 0, "creation_date": 1615206963, "post_id": 60610316, "comment_id": 117611432, "body": "@powermilk Could you share the property to try to deduce why it fails or reproduce? And also the full error"}, {"owner": {"reputation": 61, "user_id": 10313787, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RCGiEVB8gwQ/AAAAAAAAAAI/AAAAAAAAHp4/BL2OXEQFqtQ/photo.jpg?sz=128", "display_name": "powermilk", "link": "https://stackoverflow.com/users/10313787/powermilk"}, "edited": false, "score": 1, "creation_date": 1615209010, "post_id": 60610316, "comment_id": 117612320, "body": "String is Object, not primitive. I know, there is only objects in Kotlin, but not for JVM.   See example in OP:   <code>@Value(&quot;\\${cacheTimeSeconds}&quot;) lateinit var cacheTimeSeconds: Int</code>  There is few solutions are given in this thread, but without default value and outside constructor you can do it in this way:  <code>@delegate:Value(&quot;\\${cacheTimeSeconds}&quot;)  var cacheTimeSeconds by Delegates.notNull&lt;Int&gt;()</code>"}, {"owner": {"reputation": 17453, "user_id": 5279996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf8327567575d69a46bd8afe8db4466e?s=128&d=identicon&r=PG", "display_name": "Braian Coronel", "link": "https://stackoverflow.com/users/5279996/braian-coronel"}, "reply_to_user": {"reputation": 61, "user_id": 10313787, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RCGiEVB8gwQ/AAAAAAAAAAI/AAAAAAAAHp4/BL2OXEQFqtQ/photo.jpg?sz=128", "display_name": "powermilk", "link": "https://stackoverflow.com/users/10313787/powermilk"}, "edited": false, "score": 0, "creation_date": 1615211844, "post_id": 60610316, "comment_id": 117613668, "body": "Updated answer. Thanks"}], "tags": [], "owner": {"reputation": 17453, "user_id": 5279996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf8327567575d69a46bd8afe8db4466e?s=128&d=identicon&r=PG", "display_name": "Braian Coronel", "link": "https://stackoverflow.com/users/5279996/braian-coronel"}, "is_accepted": false, "score": 0, "last_activity_date": 1615211529, "last_edit_date": 1615211529, "creation_date": 1583802599, "answer_id": 60610316, "question_id": 46238790, "link": "https://stackoverflow.com/questions/46238790/how-to-use-spring-annotations-like-autowired-or-value-in-kotlin-for-primitive/60610316#60610316", "title": "how to use spring annotations like @Autowired or @Value in kotlin for primitive types?", "body": "<h2>Without default value and outside constructor</h2>\n<p>From:</p>\n<pre><code>@Value(&quot;\\${cacheTimeSeconds}&quot;) lateinit var cacheTimeSeconds: Int\n</code></pre>\n<hr />\n<p>To:</p>\n<pre><code>@delegate:Value(&quot;\\${cacheTimeSeconds}&quot;)  var cacheTimeSeconds by Delegates.notNull&lt;Int&gt;()\n</code></pre>\n<p>Good Luck</p>\n<p><a href=\"https://stackoverflow.com/q/57408327/5279996\">Kotlin doesn't have primitive type</a></p>\n"}], "owner": {"reputation": 660, "user_id": 1424488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/unSBg.png?s=128&g=1", "display_name": "fkurth", "link": "https://stackoverflow.com/users/1424488/fkurth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19917, "favorite_count": 1, "accepted_answer_id": 59288442, "answer_count": 7, "score": 25, "last_activity_date": 1615211529, "creation_date": 1505475863, "question_id": 46238790, "link": "https://stackoverflow.com/questions/46238790/how-to-use-spring-annotations-like-autowired-or-value-in-kotlin-for-primitive", "title": "how to use spring annotations like @Autowired or @Value in kotlin for primitive types?", "body": "<p>Autowiring a non-primitive with spring annotations like</p>\n\n<pre><code>@Autowired\nlateinit var metaDataService: MetaDataService\n</code></pre>\n\n<p>works.</p>\n\n<p>But this doesn't work:</p>\n\n<pre><code>@Value(\"\\${cacheTimeSeconds}\")\nlateinit var cacheTimeSeconds: Int\n</code></pre>\n\n<p>with an error: </p>\n\n<blockquote>\n  <p>lateinit modifier is not allowed for primitive types.</p>\n</blockquote>\n\n<p>How to autowire primitve properties into kotlin classes?</p>\n"}, {"tags": ["android", "firebase", "kotlin"], "comments": [{"owner": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "edited": false, "score": 1, "creation_date": 1505471817, "post_id": 46237441, "comment_id": 79438372, "body": "Your code is throwing a <code>NullPointerException</code> on <code>LoginToFireBase(Login.kt:26)</code>. Did you initialize <code>mAuth</code> anywhere? If not, the <a href=\"https://stackoverflow.com/questions/34342413/what-is-the-kotlin-double-bang\"><code>mAuth!!</code> will throw a <code>NullPointerException</code></a>."}, {"owner": {"reputation": 770, "user_id": 4088239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5jSY9.jpg?s=128&g=1", "display_name": "Pavlo Zin", "link": "https://stackoverflow.com/users/4088239/pavlo-zin"}, "edited": false, "score": 0, "creation_date": 1505474032, "post_id": 46237441, "comment_id": 79439721, "body": "&quot;mAuth!!&quot; - try to never use it, if you&#39;re not 100% sure it&#39;s not null. Also avoid nullable objects as much as possible. This will lead to much cleaner and crash-free code."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7567878, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1JJgS5exvDA/AAAAAAAAAAI/AAAAAAAAAQs/I0CJ4s-FPFQ/photo.jpg?sz=128", "display_name": "SHAHIN a", "link": "https://stackoverflow.com/users/7567878/shahin-a"}, "edited": false, "score": 0, "creation_date": 1505492884, "post_id": 46239079, "comment_id": 79451858, "body": "i cant understand you !"}], "tags": [], "owner": {"reputation": 186020, "user_id": 2016562, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2433495de6d2b99746f8e25344209fa7?s=128&d=identicon&r=PG", "display_name": "Gabriele Mariotti", "link": "https://stackoverflow.com/users/2016562/gabriele-mariotti"}, "is_accepted": false, "score": 0, "last_activity_date": 1505493163, "last_edit_date": 1592644375, "creation_date": 1505476817, "answer_id": 46239079, "question_id": 46237441, "link": "https://stackoverflow.com/questions/46237441/login-to-firebase-in-kotlin-android-studio/46239079#46239079", "title": "login to firebase in kotlin android studio", "body": "<p>You can check the <a href=\"https://kotlinlang.org/docs/reference/null-safety.html\" rel=\"nofollow noreferrer\">official doc:</a></p>\n<blockquote>\n<p>Kotlin's type system is aimed to eliminate NullPointerException's from our code. The only possible causes of NPE's may be:</p>\n<ul>\n<li><p>An explicit call to throw NullPointerException();</p>\n</li>\n<li><p>Usage of the !! operator that is described below;</p>\n</li>\n<li><p>External Java code has caused it;</p>\n</li>\n<li><p>There's some data inconsistency with regard to initialization (an uninitialized this available in a constructor is used somewhere).</p>\n</li>\n</ul>\n</blockquote>\n<p>Using: <code>b!!</code> it will return a <code>non-null</code> value of <code>b</code> or throw an <code>NPE</code> if <code>b</code> is <code>null</code></p>\n<p>Check your code (you are using kotlin as java)</p>\n<pre><code>mAuth!!.createUserWithEmailAndPassword(email,password)\n</code></pre>\n<p>Did you initialize <code>mAuth</code> anywhere? If not, the <code>mAuth!!</code> will throw a <code>NullPointerException</code></p>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 7280664, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Qx05LPHy2EQ/AAAAAAAAAAI/AAAAAAAAA8I/aYY1Z1kFkN0/photo.jpg?sz=128", "display_name": "Ashwin", "link": "https://stackoverflow.com/users/7280664/ashwin"}, "is_accepted": false, "score": 0, "last_activity_date": 1515222159, "creation_date": 1515222159, "answer_id": 48125067, "question_id": 46237441, "link": "https://stackoverflow.com/questions/46237441/login-to-firebase-in-kotlin-android-studio/48125067#48125067", "title": "login to firebase in kotlin android studio", "body": "<p>Try declaring the widgets by,</p>\n\n<pre><code>fun onC (view: View) {\nval emailTxt = findViewById&lt;View&gt;(R.id.etEmail) as EditText\nval passwordTxt = findViewById&lt;View&gt;(R.id.etPassword) as EditText\nval email = emailTxt.text.toString.trim()\nval password = passwordTxt.text.toString.trim()\nLoginToFireBase (email, password)\n}\n</code></pre>\n\n<p>This may resolve your problem :)</p>\n"}], "owner": {"reputation": 1, "user_id": 7567878, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1JJgS5exvDA/AAAAAAAAAAI/AAAAAAAAAQs/I0CJ4s-FPFQ/photo.jpg?sz=128", "display_name": "SHAHIN a", "link": "https://stackoverflow.com/users/7567878/shahin-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 782, "favorite_count": 1, "answer_count": 2, "score": -1, "last_activity_date": 1515222159, "creation_date": 1505471336, "last_edit_date": 1505479283, "question_id": 46237441, "link": "https://stackoverflow.com/questions/46237441/login-to-firebase-in-kotlin-android-studio", "title": "login to firebase in kotlin android studio", "body": "<p>I'm using firebase in my android project.\nBut this is what  get when user trying to sign up in firebase using my application. </p>\n\n<p>My errors log </p>\n\n<pre><code>09-15 13:54:23.992 2716-2716/com.example.err0r1096.tikteck E/AndroidRuntime: FATAL EXCEPTION: main\n                                                                         Process: com.example.err0r1096.tikteck, PID: 2716\n\njava.lang.IllegalStateException: Could not execute method for android:onClick\n     at android.support.v7.app.AppCompatViewInflater$DeclaredOnClickListener.onClick(AppCompatViewInflater.java:293)\n     at android.view.View.performClick(View.java:5637)\n     at android.view.View$PerformClick.run(View.java:22429)\n     at android.os.Handler.handleCallback(Handler.java:751)\n     at android.os.Handler.dispatchMessage(Handler.java:95)\n     at android.os.Looper.loop(Looper.java:154)\n     at android.app.ActivityThread.main(ActivityThread.java:6119)\n     at java.lang.reflect.Method.invoke(Native Method)\n     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:886)\n     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:776)\n  Caused by: java.lang.reflect.InvocationTargetException\n     at java.lang.reflect.Method.invoke(Native Method)\n     at android.support.v7.app.AppCompatViewInflater$DeclaredOnClickListener.onClick(AppCompatViewInflater.java:288)\n     at android.view.View.performClick(View.java:5637)\u00a0\n     at android.view.View$PerformClick.run(View.java:22429)\u00a0\n     at android.os.Handler.handleCallback(Handler.java:751)\u00a0\n     at android.os.Handler.dispatchMessage(Handler.java:95)\u00a0\n     at android.os.Looper.loop(Looper.java:154)\u00a0\n     at android.app.ActivityThread.main(ActivityThread.java:6119)\u00a0\n     at java.lang.reflect.Method.invoke(Native Method)\u00a0\n     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:886)\u00a0\n     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:776)\u00a0\n  Caused by: kotlin.KotlinNullPointerException\n     at com.example.err0r1096.tikteck.Login.LoginToFireBase(Login.kt:26)\n     at com.example.err0r1096.tikteck.Login.OneC(Login.kt:20)\n     at java.lang.reflect.Method.invoke(Native Method)\u00a0\n     at android.support.v7.app.AppCompatViewInflater$DeclaredOnClickListener.onClick(AppCompatViewInflater.java:288)\u00a0\n     at android.view.View.performClick(View.java:5637)\u00a0\n     at android.view.View$PerformClick.run(View.java:22429)\u00a0\n     at android.os.Handler.handleCallback(Handler.java:751)\u00a0\n     at android.os.Handler.dispatchMessage(Handler.java:95)\u00a0\n     at android.os.Looper.loop(Looper.java:154)\u00a0\n     at android.app.ActivityThread.main(ActivityThread.java:6119)\u00a0\n     at java.lang.reflect.Method.invoke(Native Method)\u00a0\n     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:886)\u00a0\n     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:776)\u00a0\n</code></pre>\n\n<p>and this my code :</p>\n\n<pre><code>package com.example.err0r1096.tikteck\n\nimport android.support.v7.app.AppCompatActivity\nimport android.os.Bundle\nimport android.view.View\nimport android.widget.Toast\nimport com.google.firebase.auth.FirebaseAuth\nimport kotlinx.android.synthetic.main.activity_login.*\n\n\nclass Login : AppCompatActivity() {\n\n    private val mAuth: FirebaseAuth? = null\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_login)\n    }\n    fun OneC(view: View){\n\n        LoginToFireBase(etEmail.text.toString(),etPassword.text.toString())\n\n    }\n\n    fun LoginToFireBase(email:String,password:String){\n\n        mAuth!!.createUserWithEmailAndPassword(email,password)\n                .addOnCompleteListener(this){ task -&gt;\n\n                    if (task.isSuccessful){\n                        Toast.makeText(applicationContext,\"Successful login\",Toast.LENGTH_LONG).show()\n}\n                else\n                {\n                    Toast.makeText(this,\"Login UnSuccessful\",Toast.LENGTH_LONG).show()\n                }\n        }\n    }\n}\n</code></pre>\n\n<p>My application is crashing when user click on start button .</p>\n\n<p>I think the problem is in my code and not on the firebase.</p>\n"}, {"tags": ["android-studio", "intellij-idea", "kotlin", "hotkeys"], "answers": [{"comments": [{"owner": {"reputation": 591, "user_id": 1178797, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d6a5d43dc788519aeede4e31589dda34?s=128&d=identicon&r=PG", "display_name": "AlexeyGorovoy", "link": "https://stackoverflow.com/users/1178797/alexeygorovoy"}, "edited": false, "score": 0, "creation_date": 1505471269, "post_id": 46237274, "comment_id": 79438038, "body": "Upd: You can also use <code>Alt+f7</code> as a second step."}, {"owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 1, "creation_date": 1505476922, "post_id": 46237274, "comment_id": 79441538, "body": "But in your question you said that Alt+F7 gives you rubbish as well. Which is it?"}, {"owner": {"reputation": 591, "user_id": 1178797, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d6a5d43dc788519aeede4e31589dda34?s=128&d=identicon&r=PG", "display_name": "AlexeyGorovoy", "link": "https://stackoverflow.com/users/1178797/alexeygorovoy"}, "reply_to_user": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 0, "creation_date": 1505480334, "post_id": 46237274, "comment_id": 79443831, "body": "I meant to say if you first select the full name of a class and then use Alt+F7, it finds usages of a constructor only. I&#39;ll edit the answer to clarify this."}, {"owner": {"reputation": 1338, "user_id": 6006646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cac7a91e42de8d5e96b1c5cda49133e?s=128&d=identicon&r=PG&f=1", "display_name": "A. Kazarovets", "link": "https://stackoverflow.com/users/6006646/a-kazarovets"}, "edited": false, "score": 0, "creation_date": 1537007678, "post_id": 46237274, "comment_id": 91633664, "body": "Small note: if you don&#39;t want to do it with mouse use Ctrl+-&gt; to navigate to the end of class name when the caret is on it, then use Ctrl+B."}, {"owner": {"reputation": 551, "user_id": 3730470, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JC6DP.png?s=128&g=1", "display_name": "Klitos G.", "link": "https://stackoverflow.com/users/3730470/klitos-g"}, "edited": false, "score": 0, "creation_date": 1543423236, "post_id": 46237274, "comment_id": 93917273, "body": "Alt+F7 is showing the class usages, not the constructor ones, but Ctrl+B works for me"}], "tags": [], "owner": {"reputation": 591, "user_id": 1178797, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d6a5d43dc788519aeede4e31589dda34?s=128&d=identicon&r=PG", "display_name": "AlexeyGorovoy", "link": "https://stackoverflow.com/users/1178797/alexeygorovoy"}, "is_accepted": true, "score": 15, "last_activity_date": 1505480739, "last_edit_date": 1505480739, "creation_date": 1505470862, "answer_id": 46237274, "question_id": 46237145, "link": "https://stackoverflow.com/questions/46237145/find-usages-of-primary-constructor-of-a-kotlin-class/46237274#46237274", "title": "Find usages of primary constructor of a Kotlin class", "body": "<p>I'm sorry for so quickly answering my own question, but I guess I've found a solution. In two simple step:</p>\n\n<ol>\n<li>Double-click the name of a class to select it</li>\n<li>Ctrl+B to find usages (edit: Alt+f7 would also work)</li>\n</ol>\n\n<p>I'm not sure it works in all cases, but it worked for me.</p>\n"}, {"comments": [{"owner": {"reputation": 591, "user_id": 1178797, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d6a5d43dc788519aeede4e31589dda34?s=128&d=identicon&r=PG", "display_name": "AlexeyGorovoy", "link": "https://stackoverflow.com/users/1178797/alexeygorovoy"}, "edited": false, "score": 0, "creation_date": 1505480644, "post_id": 46240168, "comment_id": 79444061, "body": "I need to check this, but I guess it would find all the constructors&#39; usages, not only the primary&#39;s?"}], "tags": [], "owner": {"reputation": 14914, "user_id": 1217087, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4190f29b0630968bd964485175551851?s=128&d=identicon&r=PG", "display_name": "Adam S", "link": "https://stackoverflow.com/users/1217087/adam-s"}, "is_accepted": false, "score": 1, "last_activity_date": 1505480280, "creation_date": 1505480280, "answer_id": 46240168, "question_id": 46237145, "link": "https://stackoverflow.com/questions/46237145/find-usages-of-primary-constructor-of-a-kotlin-class/46240168#46240168", "title": "Find usages of primary constructor of a Kotlin class", "body": "<p>Since your \"Find Usages\" call (<code>Alt+F7</code> on OSX) is from the Kotlin class name (which is also the constructor definition), you'll get more results than you would have if you'd done the same on a Java constructor - as you saw. If Find Usages didn't show usages of the class from this point, how else would you know where the class is used?</p>\n\n<p>Doing this on one of my own Kotlin classes, I got the following:</p>\n\n<p><a href=\"https://i.stack.imgur.com/FsptX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FsptX.png\" alt=\"enter image description here\"></a></p>\n\n<p>Expanding \"New instance creation\" shows me constructor usage.</p>\n"}, {"comments": [{"owner": {"reputation": 591, "user_id": 1178797, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d6a5d43dc788519aeede4e31589dda34?s=128&d=identicon&r=PG", "display_name": "AlexeyGorovoy", "link": "https://stackoverflow.com/users/1178797/alexeygorovoy"}, "edited": false, "score": 0, "creation_date": 1505483074, "post_id": 46240800, "comment_id": 79445873, "body": "Well, I guess it&#39;s also a correct answer, but this method requires a bit better aiming :)"}, {"owner": {"reputation": 591, "user_id": 1178797, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d6a5d43dc788519aeede4e31589dda34?s=128&d=identicon&r=PG", "display_name": "AlexeyGorovoy", "link": "https://stackoverflow.com/users/1178797/alexeygorovoy"}, "edited": false, "score": 0, "creation_date": 1505483326, "post_id": 46240800, "comment_id": 79446046, "body": "Small correction - the caret needs to be put before the opening brace. If you put it after the brace AS says it cannot find usages or searches for usages of the first argument."}, {"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "reply_to_user": {"reputation": 591, "user_id": 1178797, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d6a5d43dc788519aeede4e31589dda34?s=128&d=identicon&r=PG", "display_name": "AlexeyGorovoy", "link": "https://stackoverflow.com/users/1178797/alexeygorovoy"}, "edited": false, "score": 2, "creation_date": 1505484241, "post_id": 46240800, "comment_id": 79446776, "body": "@AlexeyGorovoy I edited the answer. There needs to be a space or line break before the first argument."}, {"owner": {"reputation": 7683, "user_id": 590437, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oehge.jpg?s=128&g=1", "display_name": "Holger Brandl", "link": "https://stackoverflow.com/users/590437/holger-brandl"}, "edited": false, "score": 0, "creation_date": 1612631567, "post_id": 46240800, "comment_id": 116829585, "body": "Is there a youtrack ticket to ask for a better UX here?"}], "tags": [], "owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "is_accepted": false, "score": 23, "last_activity_date": 1605550629, "last_edit_date": 1605550629, "creation_date": 1505482214, "answer_id": 46240800, "question_id": 46237145, "link": "https://stackoverflow.com/questions/46237145/find-usages-of-primary-constructor-of-a-kotlin-class/46240800#46240800", "title": "Find usages of primary constructor of a Kotlin class", "body": "<p>You should put the caret next to the opening parenthesis of the primary constructor but not right before the first parameter. Possibly add a space or line break:</p>\n<pre><code>class MyAwesomeManager&lt;caret&gt;(argOne: String, argTwo: String)\n//also works\nclass MyAwesomeManager(&lt;caret&gt; argOne: String, argTwo: String)\n</code></pre>\n<p>then invoke <strong>Find Usages</strong>. This should give you only the usages of the constructor invocation.</p>\n<p>If there are no parentheses because the class has a default zero-argument constructor, you can temporarily add <code>()</code> after the class name, then proceed as above.</p>\n"}], "owner": {"reputation": 591, "user_id": 1178797, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d6a5d43dc788519aeede4e31589dda34?s=128&d=identicon&r=PG", "display_name": "AlexeyGorovoy", "link": "https://stackoverflow.com/users/1178797/alexeygorovoy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1306, "favorite_count": 4, "accepted_answer_id": 46237274, "answer_count": 3, "score": 16, "last_activity_date": 1605550629, "creation_date": 1505470427, "last_edit_date": 1505549074, "question_id": 46237145, "link": "https://stackoverflow.com/questions/46237145/find-usages-of-primary-constructor-of-a-kotlin-class", "title": "Find usages of primary constructor of a Kotlin class", "body": "<p>Imagine you have a super important and widely-used class in your Kotlin-based project. It has the only constructor which is defined like that:</p>\n\n<pre><code>class MyAwesomeManager(argOne: String, argTwo: String)\n</code></pre>\n\n<p>For some reason, you need to quickly find all uses of its <em>constructor</em>. You're using Android Studio (or Intellj IDEA).</p>\n\n<p>But... pressing <kbd>Ctrl</kbd> + <kbd>LMB</kbd> on its name gives a ton of rubbish results - uses in imports, companion object's fields calls etc. All the uses of a <em>class</em>, but not the <em>constructor</em>. The same for putting a cursor on its name and hitting <kbd>Alt</kbd> + <kbd>F7</kbd>. </p>\n\n<p>So, how do I find all and only the usages of this primary constructor?</p>\n"}, {"tags": ["android", "maven", "gradle", "kotlin", "nexus"], "answers": [{"comments": [{"owner": {"reputation": 2615, "user_id": 3535408, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/289ea239b6ee021a1789c400532aa7ce?s=128&d=identicon&r=PG&f=1", "display_name": "Mackovich", "link": "https://stackoverflow.com/users/3535408/mackovich"}, "edited": false, "score": 0, "creation_date": 1578998663, "post_id": 46235793, "comment_id": 105613320, "body": "+1 thanks that did the trick for me. Both KDoc and Kotlin source code are now included when shipping mixed-language (Java/Kotlin) libraries to Maven."}], "tags": [], "owner": {"reputation": 4377, "user_id": 1228221, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d628750d286e8eef59b91a3a88328554?s=128&d=identicon&r=PG", "display_name": "Benoit", "link": "https://stackoverflow.com/users/1228221/benoit"}, "is_accepted": false, "score": 5, "last_activity_date": 1506372882, "last_edit_date": 1506372882, "creation_date": 1505466350, "answer_id": 46235793, "question_id": 46235707, "link": "https://stackoverflow.com/questions/46235707/android-deploy-kotlin-sources-to-a-maven-repository/46235793#46235793", "title": "Android Deploy kotlin sources to a maven repository", "body": "<p>Let's assume you are using a custom maven deploy gradle configuration let's say the one provided by Chris Banes <a href=\"https://github.com/chrisbanes/gradle-mvn-push\" rel=\"nofollow noreferrer\">https://github.com/chrisbanes/gradle-mvn-push</a></p>\n\n<p>The only thing you need to do is to specify you are using *.kt files (assuming you are mixing java &amp; kotlin files in the java folder)</p>\n\n<pre><code>    android {\n\n    sourceSets {\n        main {\n            java {\n                include '**/*.java'\n                include '**/*.kt'\n            }\n        }\n    }\n\n}\n</code></pre>\n\n<p>Edit:\nOfc this only adds the code in the sources.jar. Now IntelliJ needs to use it...</p>\n"}, {"tags": [], "owner": {"reputation": 1453, "user_id": 2141659, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfmvC.jpg?s=128&g=1", "display_name": "innov8", "link": "https://stackoverflow.com/users/2141659/innov8"}, "is_accepted": false, "score": 0, "last_activity_date": 1505471297, "creation_date": 1505471297, "answer_id": 46237431, "question_id": 46235707, "link": "https://stackoverflow.com/questions/46235707/android-deploy-kotlin-sources-to-a-maven-repository/46237431#46237431", "title": "Android Deploy kotlin sources to a maven repository", "body": "<p>As a variation of method:</p>\n\n<pre><code>sourceSets {\n    main.kotlin.srcDirs += 'src/main/myKotlin'\n    main.java.srcDirs += 'src/main/myJava'\n}\n</code></pre>\n\n<p>Of course, this is for Kotlin DSL gradle, not Groovy DSL gradle:)</p>\n"}], "owner": {"reputation": 4377, "user_id": 1228221, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d628750d286e8eef59b91a3a88328554?s=128&d=identicon&r=PG", "display_name": "Benoit", "link": "https://stackoverflow.com/users/1228221/benoit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 492, "favorite_count": 2, "answer_count": 2, "score": 3, "last_activity_date": 1506372882, "creation_date": 1505466127, "question_id": 46235707, "link": "https://stackoverflow.com/questions/46235707/android-deploy-kotlin-sources-to-a-maven-repository", "title": "Android Deploy kotlin sources to a maven repository", "body": "<p>What is the gradle configuration to ensure kotlin sources are included in the sources classifier jar to be deployed in a maven repository ?</p>\n"}, {"tags": ["kotlin", "kotlin-android-extensions"], "answers": [{"comments": [{"owner": {"reputation": 6703, "user_id": 1797950, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/1KyYn.jpg?s=128&g=1", "display_name": "crgarridos", "link": "https://stackoverflow.com/users/1797950/crgarridos"}, "edited": false, "score": 7, "creation_date": 1505467043, "post_id": 46235685, "comment_id": 79435281, "body": "doing <code>+=</code> in an non-mutable list, require to copy all elements of list in a new mutable-list and then reassign it to your actual list. I didn&#39;t know it was suitable declaring your list as <code>var</code>. anyway, declaring a list a var isn&#39;t a good idea for me."}, {"owner": {"reputation": 8621, "user_id": 5247292, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/fQKn3.png?s=128&g=1", "display_name": "guenhter", "link": "https://stackoverflow.com/users/5247292/guenhter"}, "reply_to_user": {"reputation": 6703, "user_id": 1797950, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/1KyYn.jpg?s=128&g=1", "display_name": "crgarridos", "link": "https://stackoverflow.com/users/1797950/crgarridos"}, "edited": false, "score": 1, "creation_date": 1505468637, "post_id": 46235685, "comment_id": 79436385, "body": "If a list is immutable, you have no other option as declaring it as <code>var</code>. If a immutable list is declared as <code>val</code>, than the list is not able to change ever. Just be reassigning it to another variable would be possible."}, {"owner": {"reputation": 6703, "user_id": 1797950, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/1KyYn.jpg?s=128&g=1", "display_name": "crgarridos", "link": "https://stackoverflow.com/users/1797950/crgarridos"}, "edited": false, "score": 1, "creation_date": 1505469137, "post_id": 46235685, "comment_id": 79436715, "body": "Exactly, I don&#39;t want to allow to change the reference of my variables. it can have a side effect in external/concurrency tasks. better to create a copy to extract the logic. But this is out of the scope of the question."}], "tags": [], "owner": {"reputation": 8621, "user_id": 5247292, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/fQKn3.png?s=128&g=1", "display_name": "guenhter", "link": "https://stackoverflow.com/users/5247292/guenhter"}, "is_accepted": false, "score": 82, "last_activity_date": 1557657650, "last_edit_date": 1557657650, "creation_date": 1505466046, "answer_id": 46235685, "question_id": 46235579, "link": "https://stackoverflow.com/questions/46235579/how-to-add-an-item-to-an-arraylist-in-kotlin/46235685#46235685", "title": "How to add an item to an ArrayList in Kotlin?", "body": "<p>If you have a <strong>MUTABLE</strong> collection:</p>\n\n<pre><code>val list = mutableListOf(1, 2, 3)\nlist += 4\n</code></pre>\n\n<p>If you have an <strong>IMMUTABLE</strong> collection:</p>\n\n<pre><code>var list = listOf(1, 2, 3)\nlist += 4\n</code></pre>\n\n<p>note that I use <code>val</code> for the mutable list to emphasize that the object is always the same, but its content changes.</p>\n\n<p>In case of the immutable list, you have to make it <code>var</code>. A new object is created by the <code>+=</code> operator with the additional value.</p>\n"}, {"tags": [], "owner": {"reputation": 1387, "user_id": 4547118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/48c1bd41974b2165147c6b381b556e20?s=128&d=identicon&r=PG&f=1", "display_name": "pokemzok", "link": "https://stackoverflow.com/users/4547118/pokemzok"}, "is_accepted": false, "score": 26, "last_activity_date": 1505466471, "last_edit_date": 1505466471, "creation_date": 1505466162, "answer_id": 46235719, "question_id": 46235579, "link": "https://stackoverflow.com/questions/46235579/how-to-add-an-item-to-an-arraylist-in-kotlin/46235719#46235719", "title": "How to add an item to an ArrayList in Kotlin?", "body": "<p>If you want to specifically use java ArrayList then you can do something like this:</p>\n\n<pre><code>fun initList(){\n    val list: ArrayList&lt;String&gt; = ArrayList()\n    list.add(\"text\")\n    println(list)\n}\n</code></pre>\n\n<p>Otherwise @guenhter answer is the one you are looking for.</p>\n"}, {"comments": [{"owner": {"reputation": 3083, "user_id": 857969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e352d5903d5b3fee51d66505883e6721?s=128&d=identicon&r=PG", "display_name": "dasfima", "link": "https://stackoverflow.com/users/857969/dasfima"}, "edited": false, "score": 7, "creation_date": 1531721821, "post_id": 50893555, "comment_id": 89683427, "body": "Thank you! I&#39;ve been banging my head over that plus method in Arrays..."}, {"owner": {"reputation": 2243, "user_id": 3466808, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pr9RU.jpg?s=128&g=1", "display_name": "Sam Chen", "link": "https://stackoverflow.com/users/3466808/sam-chen"}, "edited": false, "score": 1, "creation_date": 1597372423, "post_id": 50893555, "comment_id": 112117674, "body": "Nice, just what I&#39;m looking for. Thank you."}, {"owner": {"reputation": 2243, "user_id": 3466808, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pr9RU.jpg?s=128&g=1", "display_name": "Sam Chen", "link": "https://stackoverflow.com/users/3466808/sam-chen"}, "edited": false, "score": 0, "creation_date": 1605380532, "post_id": 50893555, "comment_id": 114634612, "body": "What&#39;s the use difference between <code>val list: MutableList&lt;String&gt; = ArrayList()</code> and <code>val list = mutableListOf&lt;String&gt;()</code>?"}], "tags": [], "owner": {"reputation": 5882, "user_id": 4598169, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42f0c50fc77c68c1b4bc96740d701fd4?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun", "link": "https://stackoverflow.com/users/4598169/tarun"}, "is_accepted": false, "score": 112, "last_activity_date": 1557657614, "last_edit_date": 1557657614, "creation_date": 1529207979, "answer_id": 50893555, "question_id": 46235579, "link": "https://stackoverflow.com/questions/46235579/how-to-add-an-item-to-an-arraylist-in-kotlin/50893555#50893555", "title": "How to add an item to an ArrayList in Kotlin?", "body": "<p>For people just migrating from <code>java</code>, In <code>Kotlin</code> <code>List</code> is by default immutable and mutable version of Lists is called <code>MutableList</code>.</p>\n\n<p>Hence if you have something like :</p>\n\n<pre><code>val list: List&lt;String&gt; = ArrayList()\n</code></pre>\n\n<p>In this case you will not get an <code>add()</code> method as list is immutable. Hence you will have to declare a <code>MutableList</code> as shown below :</p>\n\n<pre><code>val list: MutableList&lt;String&gt; = ArrayList()\n</code></pre>\n\n<p>Now you will see an <code>add()</code> method and you can add elements to any list.</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 13228207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c3122c29c5d01177a93dfa24f106a28?s=128&d=identicon&r=PG&f=1", "display_name": "Tutorialwing.com", "link": "https://stackoverflow.com/users/13228207/tutorialwing-com"}, "is_accepted": false, "score": 4, "last_activity_date": 1611822011, "creation_date": 1611822011, "answer_id": 65933368, "question_id": 46235579, "link": "https://stackoverflow.com/questions/46235579/how-to-add-an-item-to-an-arraylist-in-kotlin/65933368#65933368", "title": "How to add an item to an ArrayList in Kotlin?", "body": "<p>You can <a href=\"https://tutorialwing.com/how-to-add-new-element-in-array-in-kotlin/#using-arraylist\" rel=\"nofollow noreferrer\" title=\"Add Elements to ArrayList in Kotlin\">add element to arrayList</a> using <strong>add()</strong> method in Kotlin. For example,</p>\n<pre><code>arrayList.add(10)\n</code></pre>\n<p>Above code will add element 10 to arrayList.</p>\n<p>However, if you are using Array or List, then you can not add element. This is because <strong>Array</strong> and <strong>List</strong> are Immutable. If you want to add element, you will have to use MutableList.</p>\n<p>Several workarounds:</p>\n<ol>\n<li><a href=\"https://tutorialwing.com/how-to-add-new-element-in-array-in-kotlin/#using-arraycopy\" rel=\"nofollow noreferrer\">Using System.arraycopy() method:</a> You can achieve same target by creating new array and copying all the data from existing array into new one along with new values. This way you will have new array with all desired values(Existing and New values)</li>\n<li><a href=\"https://tutorialwing.com/how-to-add-new-element-in-array-in-kotlin/#using-mutablelist\" rel=\"nofollow noreferrer\">Using MutableList:</a>: Convert array into mutableList using <code>toMutableList()</code> method. Then, add element into it.</li>\n<li><a href=\"https://tutorialwing.com/how-to-add-new-element-in-array-in-kotlin/#using-copyof\" rel=\"nofollow noreferrer\">Using Array.copyof()</a>: Somewhat similar as <code>System.arraycopy()</code> method.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 116, "user_id": 6602399, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ioG9ladeyts/AAAAAAAAAAI/AAAAAAAAAR0/U8Zg9EBdocc/photo.jpg?sz=128", "display_name": "The MJ", "link": "https://stackoverflow.com/users/6602399/the-mj"}, "is_accepted": false, "score": 0, "last_activity_date": 1615290561, "creation_date": 1615290561, "answer_id": 66546322, "question_id": 46235579, "link": "https://stackoverflow.com/questions/46235579/how-to-add-an-item-to-an-arraylist-in-kotlin/66546322#66546322", "title": "How to add an item to an ArrayList in Kotlin?", "body": "<p>You can add a new item to an array using <code>+=</code>, for example:</p>\n<pre><code>private var songs: Array&lt;String&gt; = arrayOf()\n   fun add(input: String) {\n        songs += input\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 931, "user_id": 6356892, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Oauqg2zAFsE/AAAAAAAAAAI/AAAAAAAAKus/paxY7blR1WI/photo.jpg?sz=128", "display_name": "shekhar g h", "link": "https://stackoverflow.com/users/6356892/shekhar-g-h"}, "is_accepted": false, "score": 0, "last_activity_date": 1618147310, "creation_date": 1618147310, "answer_id": 67045483, "question_id": 46235579, "link": "https://stackoverflow.com/questions/46235579/how-to-add-an-item-to-an-arraylist-in-kotlin/67045483#67045483", "title": "How to add an item to an ArrayList in Kotlin?", "body": "<p>\nWhat I was doing was storing a list of strings in the viewmodel and accessing it in the fragment. <p>\nI created a dialog fragment and was editing the string in the dialog and returning the string value to the main fragment using navigation components.<p>\nWhen entering the dialog fragment the viewmodel was being cleared and the list with it. so when I wud pass the list to the adapter it would not really show anything and have a reference error.<p>\nAlso,\nwhen passing list to adapter add ,toList() <p>\n`adapter.subMItList(viewModel.lableList.toList())`\n"}], "owner": {"reputation": 1372, "user_id": 6032811, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/9Rx52.jpg?s=128&g=1", "display_name": "Ramesh", "link": "https://stackoverflow.com/users/6032811/ramesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119670, "favorite_count": 12, "answer_count": 6, "score": 95, "last_activity_date": 1618147310, "creation_date": 1505465728, "last_edit_date": 1529235217, "question_id": 46235579, "link": "https://stackoverflow.com/questions/46235579/how-to-add-an-item-to-an-arraylist-in-kotlin", "title": "How to add an item to an ArrayList in Kotlin?", "body": "<p>How to add an item to an <code>ArrayList</code> in Kotlin?</p>\n"}, {"tags": ["android", "android-fragments", "kotlin", "android-8.0-oreo"], "comments": [{"owner": {"reputation": 10606, "user_id": 1559852, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FmZgv.jpg?s=128&g=1", "display_name": "savepopulation", "link": "https://stackoverflow.com/users/1559852/savepopulation"}, "edited": false, "score": 0, "creation_date": 1505462311, "post_id": 46234434, "comment_id": 79432399, "body": "can you post main activity code?"}, {"owner": {"reputation": 160, "user_id": 6215208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0011ceaa59bce8d93a9585e320e10c74?s=128&d=identicon&r=PG&f=1", "display_name": "Sunny", "link": "https://stackoverflow.com/users/6215208/sunny"}, "reply_to_user": {"reputation": 10606, "user_id": 1559852, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FmZgv.jpg?s=128&g=1", "display_name": "savepopulation", "link": "https://stackoverflow.com/users/1559852/savepopulation"}, "edited": false, "score": 0, "creation_date": 1505465597, "post_id": 46234434, "comment_id": 79434351, "body": "main activity code added please check"}, {"owner": {"reputation": 1705, "user_id": 5260051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21f64b07e45e4cc63f16fb54054f737f?s=128&d=identicon&r=PG&f=1", "display_name": "nitinkumarp", "link": "https://stackoverflow.com/users/5260051/nitinkumarp"}, "edited": false, "score": 0, "creation_date": 1505555144, "post_id": 46234434, "comment_id": 79468427, "body": "Add something from LogCat. Simply adding code wouldn&#39;t help."}], "owner": {"reputation": 160, "user_id": 6215208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0011ceaa59bce8d93a9585e320e10c74?s=128&d=identicon&r=PG&f=1", "display_name": "Sunny", "link": "https://stackoverflow.com/users/6215208/sunny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 327, "favorite_count": 3, "answer_count": 0, "score": 2, "last_activity_date": 1505477678, "creation_date": 1505461852, "last_edit_date": 1505477678, "question_id": 46234434, "link": "https://stackoverflow.com/questions/46234434/adding-fragment-in-activity-from-fragment-not-working-in-pixel-xl-android-versio", "title": "adding fragment in activity from fragment not working in Pixel XL android version 8.0.0", "body": "<p>Recently i updated my pixel xl mobile to android version 8.0.0(Orio) after that</p>\n\n<p>when I add fragment in my application by calling a method in main activity from fragment, it is not working in pixel but same code is working in other mobiles like Sony Xperia android version: 5.1.1 and Samsung S8 android version 7.0</p>\n\n<p>how to solve this ?</p>\n\n<p>my Code(In Kotlin) for calling method setUsernamePassword() in Main activity:      </p>\n\n<p><strong>(activity as MainActivity).setUsernamePassword()</strong></p>\n\n<p><strong>Main Activity Code</strong>:</p>\n\n<pre><code>import android.app.Fragment\nimport android.support.v7.app.AppCompatActivity\nimport android.os.Bundle\nimport android.widget.TextView\n\nclass MainActivity : AppCompatActivity() {\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main)\n    addFragmentToActivity(R.id.loginFragment,LoginFragment())\n    val loginText = findViewById(R.id.login_textView) as TextView\n    loginText.setOnClickListener {\n        addFragmentToActivity(R.id.loginFragment,LoginFragment())\n    }\n\n    val registerText = findViewById(R.id.register_textView) as TextView\n    registerText.setOnClickListener {\n        addFragmentToActivity(R.id.registerFragment,RegisterFragment())\n    }\n}\n\nprivate fun addFragmentToActivity(frameId: Int,fragment: Fragment) {\n    val fragmentTransaction = fragmentManager.beginTransaction()\n    fragmentTransaction.replace(frameId,fragment).addToBackStack(null)\n    fragmentTransaction.commit()\n}\n\n fun setUsernamePassword() {\n    addFragmentToActivity(R.id.setUsernamePassword,SetUsernamePasswordFragment())\n}\n\n\n\n}\n</code></pre>\n"}, {"tags": ["spring", "spring-boot", "gradle", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 2064434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b87074ddd6e85f414fe2a2e6c3ed0e51?s=128&d=identicon&r=PG", "display_name": "Tushar Saxena", "link": "https://stackoverflow.com/users/2064434/tushar-saxena"}, "edited": false, "score": 0, "creation_date": 1568449218, "post_id": 46234266, "comment_id": 102283950, "body": "save my day. Thanks!!"}], "tags": [], "owner": {"reputation": 84621, "user_id": 1384297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mQ01b.jpg?s=128&g=1", "display_name": "Andy Wilkinson", "link": "https://stackoverflow.com/users/1384297/andy-wilkinson"}, "is_accepted": true, "score": 18, "last_activity_date": 1505461282, "creation_date": 1505461282, "answer_id": 46234266, "question_id": 46233964, "link": "https://stackoverflow.com/questions/46233964/spring-boot-boot-run-cannot-add-addresources-true/46234266#46234266", "title": "Spring Boot: Boot Run cannot add addResources = true", "body": "<p>You are using Spring Boot 2.0 where the <code>addResources</code> property no longer exists. Instead, you need to set the <code>sourceResources</code> property to the source set that you want to use. Typically that\u2019s <code>sourceSets.main</code>. This is described in the <a href=\"https://docs.spring.io/spring-boot/docs/2.0.0.M3//gradle-plugin/reference/html/#running-your-application-reloading-resources\" rel=\"noreferrer\">plugin\u2019s documentation</a>.</p>\n"}], "owner": {"reputation": 73, "user_id": 8571609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43072c39dff020cf98c38054c228e9d4?s=128&d=identicon&r=PG&f=1", "display_name": "DCourtney", "link": "https://stackoverflow.com/users/8571609/dcourtney"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6252, "favorite_count": 3, "accepted_answer_id": 46234266, "answer_count": 1, "score": 7, "last_activity_date": 1505482276, "creation_date": 1505460183, "last_edit_date": 1505482276, "question_id": 46233964, "link": "https://stackoverflow.com/questions/46233964/spring-boot-boot-run-cannot-add-addresources-true", "title": "Spring Boot: Boot Run cannot add addResources = true", "body": "<p>In Kotlin, on Intellij using gradle to run the task bootRun for Spring Boot, I get the error that follows:</p>\n\n<pre><code> BUILD FAILED\n\n Total time: 0.085 secs\n Could not set unknown property 'addResources' for task ':bootRun' \n of type org.springframework.boot.gradle.tasks.run.BootRun.\n</code></pre>\n\n<p>I am using kotlinVersion = '1.1.4-3', springBootVersion = '2.0.0.M3' and my bootrun task looks like the following in my gradle.build</p>\n\n<pre><code>bootRun\n    {\n         addResources = true\n    }\n</code></pre>\n\n<p>My bootRun works as expected without the adjustments to the bootRun task</p>\n"}, {"tags": ["android", "localization", "kotlin", "locale"], "comments": [{"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 0, "creation_date": 1505460870, "post_id": 46233739, "comment_id": 79431572, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2900023/change-language-programmatically-in-android\">Change language programmatically in Android</a>"}, {"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 0, "creation_date": 1505460925, "post_id": 46233739, "comment_id": 79431600, "body": "I have voted to close this as a duplicate because the code is the exact same. The only difference between Java and Kotlin is the syntax. You can use the same methods (and you have to use the same methods) and same techniques. java and Kotlin use the same methods when running the Android framework, the only difference is syntax (and null safety, but in terms of the code itself)"}, {"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 0, "creation_date": 1505464145, "post_id": 46233739, "comment_id": 79433438, "body": "<code>println(&quot;Languagekotlin&quot; +  gc.changelanguage(baseContext))</code> prints &quot;Languagekotlinkotlin.Unit&quot; because <code>changelanguage</code> is a <code>void</code> function."}, {"owner": {"reputation": 77, "user_id": 8397347, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e3f274c8d0a78462a3f37a7b1ecd6b17?s=128&d=identicon&r=PG&f=1", "display_name": "Jyoti ", "link": "https://stackoverflow.com/users/8397347/jyoti"}, "edited": false, "score": 0, "creation_date": 1505467444, "post_id": 46233739, "comment_id": 79435580, "body": "@ LunarWatcher but ur code and question is not related to kotlin language.. !! as locale code in java works fine. i am asking relevant to kotlin programming...!!"}], "answers": [{"comments": [{"owner": {"reputation": 2516, "user_id": 683482, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/lBysC.jpg?s=128&g=1", "display_name": "Raju yourPepe", "link": "https://stackoverflow.com/users/683482/raju-yourpepe"}, "edited": false, "score": 0, "creation_date": 1540484877, "post_id": 46240217, "comment_id": 92893082, "body": "what is the gist.github for the reference ?"}], "tags": [], "owner": {"reputation": 77, "user_id": 8397347, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e3f274c8d0a78462a3f37a7b1ecd6b17?s=128&d=identicon&r=PG&f=1", "display_name": "Jyoti ", "link": "https://stackoverflow.com/users/8397347/jyoti"}, "is_accepted": false, "score": 2, "last_activity_date": 1505480437, "creation_date": 1505480437, "answer_id": 46240217, "question_id": 46233739, "link": "https://stackoverflow.com/questions/46233739/language-change-locale-in-kotlin-programming-as-locale-works-in-java-fine-but/46240217#46240217", "title": "Language Change Locale in &quot;Kotlin &quot;Programming As locale works in Java Fine but in Kotlin language not working", "body": "<p>I have resolved this issue in Kotlin Language now the language changes by improving this function</p>\n\n<pre><code>public String changelanguage(Context context) {\n    //String lang = \"hi_IN\";\n  //  Locale locale = new Locale(lang);\n    Locale locale = Locale.getDefault();\n    Locale.setDefault(locale);\n    System.out.println(\"GlobalLocale\" +locale.toString());\n    Configuration config = new Configuration();\n    config.locale = locale;\n    context.getResources().updateConfiguration(config,\n    context.getResources().getDisplayMetrics());\n    return  locale.toString();\n} \n</code></pre>\n\n<p>and it resolved my Kotlin.unit error\nand @marstran thanks for giving me hint about my issue where i am going wrong. now the issue has resolved in Kotlin.</p>\n\n<p>@LunarWatcher before doing negative voting please read question carefully.! Now Just vote up , do positive vote.!!</p>\n"}], "owner": {"reputation": 77, "user_id": 8397347, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e3f274c8d0a78462a3f37a7b1ecd6b17?s=128&d=identicon&r=PG&f=1", "display_name": "Jyoti ", "link": "https://stackoverflow.com/users/8397347/jyoti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3788, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1505480437, "creation_date": 1505459430, "last_edit_date": 1505467580, "question_id": 46233739, "link": "https://stackoverflow.com/questions/46233739/language-change-locale-in-kotlin-programming-as-locale-works-in-java-fine-but", "title": "Language Change Locale in &quot;Kotlin &quot;Programming As locale works in Java Fine but in Kotlin language not working", "body": "<p>I am working on kotlin language in my application and facing some difficulties regarding Changing Locale. As what i have do i have created one global class i.e on java and on this class i have wrote code of Language change locale code and that language code function i am calling to base application class of my project that is in Kotlin.</p>\n\n<p>Here is my source code :</p>\n\n<p>Global class (Java Code)</p>\n\n<pre><code> public void changelanguage(Context context) {\n    Locale locale = Locale.getDefault();\n    Locale.setDefault(locale);\n    System.out.println(\"GlobalLocale\" +locale.toString());\n    Configuration config = new Configuration();\n    config.locale = locale;\n    context.getResources().updateConfiguration(config,\n            context.getResources().getDisplayMetrics());\n\n}  \n</code></pre>\n\n<p>Base Application Class Code:(Kotlin)</p>\n\n<pre><code>class CrashApplicationClass : Application() {\n\nval TAG = CrashApplicationClass::class.java.simpleName\nlateinit var sDefSystemLanguage: String\nval gc = GlobalClass.getInstance()\n\noverride fun onCreate() {\n    // TODO Auto-generated method stub\n\n    // ACRA.init(this)\n    super.onCreate()\n\n    instance = this\n\n    gc.changelanguage(baseContext)\n    println(\"Languagekotlin\" +  gc.changelanguage(baseContext))\n    println(\"kotlininstance\" + instance)\n   // sDefSystemLanguage = Locale.getDefault().language\n}\n\n\nval requestQueue: RequestQueue? = null\n    get() {\n        if (field == null) {\n            return Volley.newRequestQueue(applicationContext)\n        }\n        return field\n    }\n\nfun &lt;T&gt; addToRequestQueue(request: Request&lt;T&gt;, tag: String) {\n    request.tag = if (TextUtils.isEmpty(tag)) TAG else tag\n    requestQueue?.add(request)\n}\n\nfun &lt;T&gt; addToRequestQueue(request: Request&lt;T&gt;) {\n    request.tag = TAG\n    requestQueue?.add(request)\n}\n\nfun cancelPendingRequests(tag: Any) {\n    if (requestQueue != null) {\n        requestQueue!!.cancelAll(tag)\n    }\n}\n\n\ncompanion object {\n     val TAG = CrashApplicationClass::class.java.simpleName\n\n    @get:Synchronized var instance: CrashApplicationClass? = null\n\n        private set\n}\n</code></pre>\n\n<p>}</p>\n\n<p>As whats going in code here , I have print logs in java class log the language properly gets : \nSystem.out.println(\"GlobalLocale\" +locale.toString());</p>\n\n<p>but on CrashApplication class log :\nprintln(\"Languagekotlin\" +  gc.changelanguage(baseContext)) -> \ni am getting \"Kotlin.Unit\"\nAnd also language not changed getting proper locale in java but don't know Kotlin class is not getting it returns \"Kotlin.Unit\"</p>\n\n<p>And also on Manifest i have set : android:configChanges=\"locale\"\nAny one have idea about language change in Kotlin. Plz share.</p>\n"}, {"tags": ["spring-boot", "gradle", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 337, "user_id": 8611987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cce8186bd3b39c03fe5028e9d6c2cc7?s=128&d=identicon&r=PG&f=1", "display_name": "petarkolaric", "link": "https://stackoverflow.com/users/8611987/petarkolaric"}, "is_accepted": true, "score": 0, "last_activity_date": 1505449729, "creation_date": 1505449729, "answer_id": 46231720, "question_id": 46230312, "link": "https://stackoverflow.com/questions/46230312/using-gradle-property-expansion-in-kotlin-spring-boot/46231720#46231720", "title": "Using Gradle property expansion in kotlin/spring boot", "body": "<p>So, there was a small part of my build.gradle that I did not include above as I did not know about it:</p>\n\n<pre><code>bootRun {\n    addResources = true\n}\n</code></pre>\n\n<p>According to the <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/build-tool-plugins-gradle-plugin.html#build-tool-plugins-gradle-running-applications\" rel=\"nofollow noreferrer\">Spring Boot Docs</a> having the addResources flag set to true will ignore the application.properties file created in the processResources step, and instead use the one in your projects sources. This is to allow you to dynamically change the file without needing to restart the application.</p>\n\n<p>The correct fix for this (if you need variable expansion when running with the <code>bootRun</code> task) is to set:</p>\n\n<pre><code>bootRun {\n    addResources = false\n}\n</code></pre>\n\n<p>Otherwise, if you just need expansion when building your jar, leaving this flag as <code>true</code> should be fine.</p>\n"}], "owner": {"reputation": 337, "user_id": 8611987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cce8186bd3b39c03fe5028e9d6c2cc7?s=128&d=identicon&r=PG&f=1", "display_name": "petarkolaric", "link": "https://stackoverflow.com/users/8611987/petarkolaric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1392, "favorite_count": 0, "accepted_answer_id": 46231720, "answer_count": 1, "score": 0, "last_activity_date": 1505449729, "creation_date": 1505438427, "last_edit_date": 1505439696, "question_id": 46230312, "link": "https://stackoverflow.com/questions/46230312/using-gradle-property-expansion-in-kotlin-spring-boot", "title": "Using Gradle property expansion in kotlin/spring boot", "body": "<p>I am currently building a <code>Kotlin</code>, <code>Spring Boot</code> service using gradle as the build tool. I am attempting to automatically expand properties found in my <code>application.properties</code> file, using the steps found here: </p>\n\n<p><a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/howto-properties-and-configuration.html#howto-automatic-expansion-gradle\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/current/reference/html/howto-properties-and-configuration.html#howto-automatic-expansion-gradle</a></p>\n\n<p>My versions are as follows:</p>\n\n<pre><code>- kotlin: 1.1.4-3\n- spring boot: 1.5.6.RELEASE\n- gradle: 3.5.1\n</code></pre>\n\n<p>When I run a <code>./gradlew bootRun</code>, I get the following error:</p>\n\n<pre><code>java.lang.IllegalArgumentException: Could not resolve placeholder 'myServiceName' in value \"${myServiceName}\"\n</code></pre>\n\n<p>Followed by:</p>\n\n<pre><code>java.lang.IllegalStateException: LifecycleProcessor not initialized - call 'refresh' before invoking lifecycle methods via the context: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@510aeb93: startup date [Fri Sep 15 10:59:51 AEST 2017]; parent: org.springframework.context.annotation.AnnotationConfigApplicationContext@68edf5bb\n</code></pre>\n\n<p><strong>build.gradle:</strong></p>\n\n<pre><code>apply plugin: 'kotlin'\napply plugin: 'kotlin-spring'\napply plugin: 'org.springframework.boot'\n\nprocessResources {\n    filesMatching('application.properties') {\n        expand(project.properties)\n    }\n}\n</code></pre>\n\n<p><strong>gradle.properties:</strong></p>\n\n<pre><code>myServiceName=potato-service\n</code></pre>\n\n<p><strong>application.properties:</strong></p>\n\n<pre><code>info.app.name=${myServiceName}\n</code></pre>\n\n<p>These errors appear after the app has started, and spring is trying to load the property file. </p>\n\n<p>The interesting thing is that if I change the variable that I am trying to substitute in the application.properties, to <code>myServiceName123</code> for example, gradle fails at the processResources stage.</p>\n"}, {"tags": ["jpa", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 3462, "user_id": 2094298, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/26a93895eedcc45a0ebc3bb0da2cfbe6?s=128&d=identicon&r=PG", "display_name": "Ruckus T-Boom", "link": "https://stackoverflow.com/users/2094298/ruckus-t-boom"}, "is_accepted": true, "score": 7, "last_activity_date": 1505423954, "creation_date": 1505423954, "answer_id": 46228390, "question_id": 46228320, "link": "https://stackoverflow.com/questions/46228320/kotlin-jpa-and-boolean-fields/46228390#46228390", "title": "Kotlin, JPA and boolean fields", "body": "<p>You can rename the getter like so</p>\n\n<pre><code>@get:JvmName(\"isActive\")\nvar active: Boolean = true\n</code></pre>\n"}], "owner": {"reputation": 1136, "user_id": 1296019, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/02755b78b1c7bd578aa43800a61eb235?s=128&d=identicon&r=PG", "display_name": "cocorossello", "link": "https://stackoverflow.com/users/1296019/cocorossello"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 251, "favorite_count": 2, "accepted_answer_id": 46228390, "answer_count": 1, "score": 4, "last_activity_date": 1505423954, "creation_date": 1505423616, "question_id": 46228320, "link": "https://stackoverflow.com/questions/46228320/kotlin-jpa-and-boolean-fields", "title": "Kotlin, JPA and boolean fields", "body": "<p>I'm starting to introduce kotlin in our project and I'm converting some entities to kotlin as part as a bigger refactor.</p>\n\n<p>My entity had a boolean active property:</p>\n\n<pre><code>private boolean active = true;\n\npublic boolean isActive() {\n    return active;\n}\n\npublic void setActive(final boolean active) {\n    this.active = active;\n}    \n</code></pre>\n\n<p>Now in kotlin this should be:</p>\n\n<pre><code>var isActive: Boolean = true\n</code></pre>\n\n<p>The problem is that this way I have to refactor existing queries, not a big deal, but I was expecting a smoother transition.</p>\n\n<p>I can do something like:</p>\n\n<pre><code>var active: Boolean = true\n\nval isActive: Boolean\n    get()= active\n</code></pre>\n\n<p>But it doesn't feel right. What would be the best way?</p>\n"}, {"tags": ["javascript", "android", "react-native", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 319, "user_id": 2546973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f07b2b46a30577ee15a734b438dbef9d?s=128&d=identicon&r=PG", "display_name": "Carl B", "link": "https://stackoverflow.com/users/2546973/carl-b"}, "is_accepted": false, "score": 1, "last_activity_date": 1505422942, "creation_date": 1505422942, "answer_id": 46228181, "question_id": 46227725, "link": "https://stackoverflow.com/questions/46227725/how-do-i-pass-an-array-of-objects-from-android-to-react-native/46228181#46228181", "title": "How do I pass an array of objects from Android to React Native?", "body": "<p>I did solve this only moments later by using the <code>Arguments</code> class, like so</p>\n\n<pre><code>val action = Arguments.makeNativeMap(\n  mutableMapOf(\"authenticationType\" to \"strong\",\n               \"type\" to \"AUTHENTICATION_URL\",\n               \"url\" to url) as Map&lt;String, Any&gt;)\n\nval actionArray = Arguments.makeNativeArray(listOf(action))\n\nval arguments = Arguments.createMap().apply {\n    putString(\"path\", \"general/authentication\")\n    putArray(\"actions\",actionArray)\n}\n</code></pre>\n"}], "owner": {"reputation": 319, "user_id": 2546973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f07b2b46a30577ee15a734b438dbef9d?s=128&d=identicon&r=PG", "display_name": "Carl B", "link": "https://stackoverflow.com/users/2546973/carl-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 891, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505422942, "creation_date": 1505420880, "question_id": 46227725, "link": "https://stackoverflow.com/questions/46227725/how-do-i-pass-an-array-of-objects-from-android-to-react-native", "title": "How do I pass an array of objects from Android to React Native?", "body": "<p>I'm trying to pass data into React Native from native Android. The data is an array of objects which consist of actions that should be dispatched.\nExample</p>\n\n<pre><code>{\n  \"actions: [\n    { \n      \"authenticationType: \"strong\",\n      \"type: \"AUTHENTICATION_URL\",\n      \"url: \"https://foo.bar/\",\n    },\n  ],\n}\n</code></pre>\n\n<p>I'm trying to use the <code>com.facebook.react.bridge.Arguments</code> class to do something like </p>\n\n<pre><code>val arguments = Arguments.createMap().apply {\n  putString(\"path\", \"general/authentication\")  \n  putArray(\"actions\",\n           Arguments.fromList(listOf(\n                   mapOf(\"authenticationType\" to \"strong\",\n                         \"type\" to \"AUTHENTICATION_URL\",\n                         \"url\" to url\n                   ))))\n}\n</code></pre>\n\n<p>but it only results in </p>\n\n<pre><code>09-14 20:08:53.996 10437 10437 I zygote  : Thread[1,tid=10437,Native,Thread*=0xb18da000,peer=0x73d2f568,\"main\"] recursive attempt to load library \"/data/app/com.getdreams-MO6VYrPeHVgAkBP2ori8SA==/lib/x86/libfb.so\"\n</code></pre>\n\n<p>Unsure how to create that array of javascript objects.</p>\n\n<p>Has anyone any suggestion of how to perhaps use <a href=\"https://github.com/facebook/react-native/blob/master/ReactAndroid/src/main/java/com/facebook/react/bridge/Arguments.java\" rel=\"nofollow noreferrer\"><code>com.facebook.react.bridge.Arguments</code></a> in a better way?</p>\n"}, {"tags": ["kotlin", "coroutine", "kotlin-coroutines"], "answers": [{"comments": [{"owner": {"reputation": 265, "user_id": 1917434, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/19f3df6104bcca9cb8681aff9881a7ab?s=128&d=identicon&r=PG", "display_name": "Yang Lifan", "link": "https://stackoverflow.com/users/1917434/yang-lifan"}, "edited": false, "score": 0, "creation_date": 1520848396, "post_id": 46227463, "comment_id": 85467863, "body": "Does Kotlin Coroutine or Spring have any build-in supports for the bridge between Kotlin Coroutine and Spring transaction?"}, {"owner": {"reputation": 20308, "user_id": 1051598, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f9c354e780ce562daea0e21b99bfdc0d?s=128&d=identicon&r=PG", "display_name": "Roman  Elizarov", "link": "https://stackoverflow.com/users/1051598/roman-elizarov"}, "reply_to_user": {"reputation": 265, "user_id": 1917434, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/19f3df6104bcca9cb8681aff9881a7ab?s=128&d=identicon&r=PG", "display_name": "Yang Lifan", "link": "https://stackoverflow.com/users/1917434/yang-lifan"}, "edited": false, "score": 0, "creation_date": 1538132818, "post_id": 46227463, "comment_id": 92046643, "body": "No, but it takes just a few lines to write those. We hope that Spring will provide the corresponding support in the future"}, {"owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "edited": false, "score": 0, "creation_date": 1574370479, "post_id": 46227463, "comment_id": 104220052, "body": "I believe the APIs have changed a bit since this was written. Still helpful though!"}], "tags": [], "owner": {"reputation": 20308, "user_id": 1051598, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f9c354e780ce562daea0e21b99bfdc0d?s=128&d=identicon&r=PG", "display_name": "Roman  Elizarov", "link": "https://stackoverflow.com/users/1051598/roman-elizarov"}, "is_accepted": true, "score": 38, "last_activity_date": 1538045634, "last_edit_date": 1538045634, "creation_date": 1505419723, "answer_id": 46227463, "question_id": 46227462, "link": "https://stackoverflow.com/questions/46227462/how-to-use-code-that-relies-on-threadlocal-with-kotlin-coroutines/46227463#46227463", "title": "How to use code that relies on ThreadLocal with Kotlin coroutines", "body": "<p>Coroutine's analog to <code>ThreadLocal</code> is <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.coroutines.experimental/-coroutine-context/\" rel=\"noreferrer\"><code>CoroutineContext</code></a>.</p>\n\n<p>To interoperate with <code>ThreadLocal</code>-using libraries you need to implement a custom <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.coroutines.experimental/-continuation-interceptor/index.html\" rel=\"noreferrer\"><code>ContinuationInterceptor</code></a> that supports framework-specific thread-locals. </p>\n\n<p>Here is an example. Let us assume that we use some framework that relies on a specific <code>ThreadLocal</code> to store some application-specific data (<code>MyData</code> in this example):</p>\n\n<pre><code>val myThreadLocal = ThreadLocal&lt;MyData&gt;()\n</code></pre>\n\n<p>To use it with coroutines, you'll need to implement a context that keeps the current value of <code>MyData</code> and puts it into the corresponding <code>ThreadLocal</code> every time the coroutine is resumed on a thread. The code should look like this:</p>\n\n<pre><code>class MyContext(\n    private var myData: MyData,\n    private val dispatcher: ContinuationInterceptor\n) : AbstractCoroutineContextElement(ContinuationInterceptor), ContinuationInterceptor {\n    override fun &lt;T&gt; interceptContinuation(continuation: Continuation&lt;T&gt;): Continuation&lt;T&gt; =\n        dispatcher.interceptContinuation(Wrapper(continuation))\n\n    inner class Wrapper&lt;T&gt;(private val continuation: Continuation&lt;T&gt;): Continuation&lt;T&gt; {\n        private inline fun wrap(block: () -&gt; Unit) {\n            try {\n                myThreadLocal.set(myData)\n                block()\n            } finally {\n                myData = myThreadLocal.get()\n            }\n        }\n\n        override val context: CoroutineContext get() = continuation.context\n        override fun resume(value: T) = wrap { continuation.resume(value) }\n        override fun resumeWithException(exception: Throwable) = wrap { continuation.resumeWithException(exception) }\n    }\n}\n</code></pre>\n\n<p>To use it in your coroutines, you wrap the dispatcher that you want to use with <code>MyContext</code> and give it the initial value of your data. This value will be put into the thread-local on the thread where the coroutine is resumed.</p>\n\n<pre><code>launch(MyContext(MyData(), CommonPool)) {\n    // do something...\n}\n</code></pre>\n\n<p>The implementation above would also track any changes to the thread-local that was done and store it in this context, so this way multiple invocation can share \"thread-local\" data via context.</p>\n\n<p><strong>UPDATE</strong>: Starting with <code>kotlinx.corutines</code> version <code>0.25.0</code> there is direct support for representing Java <code>ThreadLocal</code> instances as coroutine context elements. See <a href=\"https://github.com/Kotlin/kotlinx.coroutines/blob/master/docs/coroutine-context-and-dispatchers.md#thread-local-data\" rel=\"noreferrer\">this documentation</a> for details. There is also out-of-the-box support for SLF4J MDC via <code>kotlinx-coroutines-slf4j</code> integration module.</p>\n"}], "owner": {"reputation": 20308, "user_id": 1051598, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f9c354e780ce562daea0e21b99bfdc0d?s=128&d=identicon&r=PG", "display_name": "Roman  Elizarov", "link": "https://stackoverflow.com/users/1051598/roman-elizarov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7340, "favorite_count": 10, "accepted_answer_id": 46227463, "answer_count": 1, "score": 27, "last_activity_date": 1552981676, "creation_date": 1505419723, "last_edit_date": 1552981676, "question_id": 46227462, "link": "https://stackoverflow.com/questions/46227462/how-to-use-code-that-relies-on-threadlocal-with-kotlin-coroutines", "title": "How to use code that relies on ThreadLocal with Kotlin coroutines", "body": "<p>Some JVM frameworks use <code>ThreadLocal</code> to store the call context of a application, like the <a href=\"https://logback.qos.ch/manual/mdc.html\" rel=\"noreferrer\">SLF4j MDC</a>, transaction managers, security managers, and others.</p>\n\n<p>However, Kotlin coroutines are dispatched on different threads, so how it can be made to work? </p>\n\n<p>(The question is inspired by <a href=\"https://github.com/Kotlin/kotlinx.coroutines/issues/119\" rel=\"noreferrer\">GitHub issue</a>)</p>\n"}, {"tags": ["java", "spring", "spring-mvc", "kotlin", "spring-async"], "comments": [{"owner": {"reputation": 5227, "user_id": 3635454, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/k0PRy.png?s=128&g=1", "display_name": "pleft", "link": "https://stackoverflow.com/users/3635454/pleft"}, "edited": false, "score": 1, "creation_date": 1505418542, "post_id": 46226961, "comment_id": 79418001, "body": "Are you sure it is not running with void return type? How about placing a <code>System.out.println(&quot;sending email&quot;);</code> line inside your <code>sendEmail</code> method and call this async method. Does it get printed in the console?"}, {"owner": {"reputation": 5227, "user_id": 3635454, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/k0PRy.png?s=128&g=1", "display_name": "pleft", "link": "https://stackoverflow.com/users/3635454/pleft"}, "edited": false, "score": 0, "creation_date": 1505419364, "post_id": 46226961, "comment_id": 79418444, "body": "Well I suppose this means that an exception happens after step &quot;2&quot; or &quot;3&quot; which breaks the execution of the method. Can you post more classes of your spring setup e.g. the implementation of the <code>AsyncConfigurer</code> and yours <code>AsyncUncaughtExceptionHandler </code>?"}, {"owner": {"reputation": 1385, "user_id": 4971561, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-YIQlI2oeD5Q/AAAAAAAAAAI/AAAAAAAAAGA/jJHvlu2yYaI/photo.jpg?sz=128", "display_name": "Maro\u0161 \u0160eleng", "link": "https://stackoverflow.com/users/4971561/maro%c5%a1-%c5%a0eleng"}, "reply_to_user": {"reputation": 5227, "user_id": 3635454, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/k0PRy.png?s=128&g=1", "display_name": "pleft", "link": "https://stackoverflow.com/users/3635454/pleft"}, "edited": false, "score": 0, "creation_date": 1505419904, "post_id": 46226961, "comment_id": 79418729, "body": "@pleft Added the Config class. My other idea is, whether this is not cause by the fact that I am running this within a test, so when the Async method returns, the test ends (and as it is the only test I am running, it destroys the Context and all threads with it, what do you think about this?"}, {"owner": {"reputation": 5227, "user_id": 3635454, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/k0PRy.png?s=128&g=1", "display_name": "pleft", "link": "https://stackoverflow.com/users/3635454/pleft"}, "edited": false, "score": 0, "creation_date": 1505420113, "post_id": 46226961, "comment_id": 79418820, "body": "Yeap I think it is this the reason, unit test completes while the new async thread is not yet completed. Here you can find something relevant: <a href=\"https://stackoverflow.com/questions/42438862/junit-testing-a-spring-async-void-service-method\" title=\"junit testing a spring async void service method\">stackoverflow.com/questions/42438862/&hellip;</a>"}, {"owner": {"reputation": 1385, "user_id": 4971561, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-YIQlI2oeD5Q/AAAAAAAAAAI/AAAAAAAAAGA/jJHvlu2yYaI/photo.jpg?sz=128", "display_name": "Maro\u0161 \u0160eleng", "link": "https://stackoverflow.com/users/4971561/maro%c5%a1-%c5%a0eleng"}, "reply_to_user": {"reputation": 5227, "user_id": 3635454, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/k0PRy.png?s=128&g=1", "display_name": "pleft", "link": "https://stackoverflow.com/users/3635454/pleft"}, "edited": false, "score": 1, "creation_date": 1505420220, "post_id": 46226961, "comment_id": 79418871, "body": "Yes! that is exactly what I found after I made it work by putting some Thread.sleep in my test. Anyway, thanks for ideas :)"}], "answers": [{"tags": [], "owner": {"reputation": 1385, "user_id": 4971561, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-YIQlI2oeD5Q/AAAAAAAAAAI/AAAAAAAAAGA/jJHvlu2yYaI/photo.jpg?sz=128", "display_name": "Maro\u0161 \u0160eleng", "link": "https://stackoverflow.com/users/4971561/maro%c5%a1-%c5%a0eleng"}, "is_accepted": true, "score": 3, "last_activity_date": 1505420478, "creation_date": 1505420478, "answer_id": 46227633, "question_id": 46226961, "link": "https://stackoverflow.com/questions/46226961/testing-springs-async-void-returning-methods/46227633#46227633", "title": "Testing Spring&#39;s @Async void-returning methods", "body": "<p>Based on the conversation in the comment and my own observation (like putting some sleep in the test method) I found out the reason. This was cause by the destroying of the Spring Context inside the test. Because I had only one test running this async method, so the scenario was that the async method returned immediately and so did the test method. As it was the last (and only) method in my test suite, the testing Context was destroyed (and also all threads it created).</p>\n\n<p>So the resolution is to either put sleeps in the tests (very ugly) or have a look at <a href=\"https://stackoverflow.com/questions/42438862/junit-testing-a-spring-async-void-service-method\">this question</a> and get inspired.</p>\n"}], "owner": {"reputation": 1385, "user_id": 4971561, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-YIQlI2oeD5Q/AAAAAAAAAAI/AAAAAAAAAGA/jJHvlu2yYaI/photo.jpg?sz=128", "display_name": "Maro\u0161 \u0160eleng", "link": "https://stackoverflow.com/users/4971561/maro%c5%a1-%c5%a0eleng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2646, "favorite_count": 0, "accepted_answer_id": 46227633, "answer_count": 1, "score": 3, "last_activity_date": 1505420521, "creation_date": 1505417672, "last_edit_date": 1505420521, "question_id": 46226961, "link": "https://stackoverflow.com/questions/46226961/testing-springs-async-void-returning-methods", "title": "Testing Spring&#39;s @Async void-returning methods", "body": "<p>I have a little problem with <code>@Async</code> methods that return <code>void</code> (or <code>Unit</code>, I'm writing in Kotlin) in my Spring app.</p>\n\n<p>I don't know why, but when <code>@Async</code> method returns <code>void</code> it just doesn't execute, or at least it doesn't do what it is supposed to. Need to say, that in my async methods, I want to send an email using the <code>JavaMailSender</code>, so no big deal. Here is the method:</p>\n\n<pre><code>@Async\noverride fun sendEmail(locale: Locale, subject: String, message: String, to: String) {\n\n    val msg = sender.createMimeMessage()\n    println(\"1\")\n    val helper = MimeMessageHelper(msg, true, \"utf-8\")\n    helper.setFrom(\"email@example.com\")\n    helper.setTo(to)\n    println(\"2\")\n    helper.setSubject(getSubject(locale, null))\n    println(\"3\")\n    helper.setText(processTemplate(locale, null, null), true)\n    println(\"4\")\n    sender.send(msg)\n    println(\"5\")\n}\n</code></pre>\n\n<p>But an email never comes, there is no exception logged (I am running a testNG test).</p>\n\n<p>When I change the signature of the function to make it return <code>Future&lt;String&gt;</code> and add some dummy return line to the end of the function and then I call <code>service.sendEmail(...).get()</code>, the method's body magically executes and the email arrives.</p>\n\n<p>In my <code>@Configuration</code> class, there is <code>@EnableAsync</code>. I also implemented <code>AsyncConfigurer</code> and provided own executor and exception handler, because I thought it could have been something with my executor bean definition, but nothing helps.</p>\n\n<p>This is driving me crazy, because I just want to silently execute something in the background and it doesn't work. By silently I mean that I don't want to be bothered by exceptions thrown inside.</p>\n\n<p>Do you have any ideas?</p>\n\n<p><strong>Update:</strong>\nSo as @pleft advised, I put some prints inside my method.\nNow, when I run <code>mvn clean test</code>, I can see that 1,2,3 are printed, <strong>but</strong> not each time. Sometimes just 1 and 2 got printed. I also put print in my <code>AsyncUncaughtExceptionHandler</code>, but that one is not called.\nIt looks like the background thread is being killed too soon or something.</p>\n\n<p><strong>Update 2:</strong></p>\n\n<p>My ServiceConfig:</p>\n\n<pre><code>@Configuration\n@EnableScheduling\n@EnableAsync\n@ComponentScan\nclass ServiceConfig : ApplicationContextAware, EnvironmentAware, AsyncConfigurer {\n    override fun getAsyncUncaughtExceptionHandler(): AsyncUncaughtExceptionHandler {\n        return AsyncUncaughtExceptionHandler { ex, method, params -&gt;\n            println(\"Exception thrown\")\n        }\n    }\n\n    override fun getAsyncExecutor(): Executor {\n        val executor = ThreadPoolTaskExecutor()\n        executor.corePoolSize = 2\n        executor.maxPoolSize = 2\n        executor.setQueueCapacity(500)\n        executor.threadNamePrefix = \"asyncThread\"\n        executor.initialize()\n        return executor\n    }\n}\n/// other beans definitions..\n</code></pre>\n\n<p>Maybe it is important, maybe not, but I'm using Thymeleaf in that <code>processTemplate</code> method.</p>\n"}, {"tags": ["asynchronous", "kotlin", "coroutine", "kotlin-coroutines"], "comments": [{"owner": {"reputation": 5596, "user_id": 7365866, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iNhGH.png?s=128&g=1", "display_name": "Ben Butterworth", "link": "https://stackoverflow.com/users/7365866/ben-butterworth"}, "edited": false, "score": 0, "creation_date": 1598088996, "post_id": 46226518, "comment_id": 112348302, "body": "Warning to new readers, the answers seem to be in ascending order of votes, which is a little weird? <i>Scroll down to the bottom for the most upvoted answer.</i>"}], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 2179802, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ad497888d51649fc42d38e94f5e2a9f4?s=128&d=identicon&r=PG", "display_name": "Faraaz", "link": "https://stackoverflow.com/users/2179802/faraaz"}, "edited": false, "score": 1, "creation_date": 1512053520, "post_id": 46226519, "comment_id": 82109362, "body": "is Async the right coroutine builder for network calls in Android?"}, {"owner": {"reputation": 20308, "user_id": 1051598, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f9c354e780ce562daea0e21b99bfdc0d?s=128&d=identicon&r=PG", "display_name": "Roman  Elizarov", "link": "https://stackoverflow.com/users/1051598/roman-elizarov"}, "reply_to_user": {"reputation": 137, "user_id": 2179802, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ad497888d51649fc42d38e94f5e2a9f4?s=128&d=identicon&r=PG", "display_name": "Faraaz", "link": "https://stackoverflow.com/users/2179802/faraaz"}, "edited": false, "score": 0, "creation_date": 1512070544, "post_id": 46226519, "comment_id": 82119957, "body": "The right coroutine builder depends on what you are trying to accomplish"}, {"owner": {"reputation": 1111, "user_id": 358680, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJNBe.jpg?s=128&g=1", "display_name": "Luis", "link": "https://stackoverflow.com/users/358680/luis"}, "edited": false, "score": 9, "creation_date": 1513225483, "post_id": 46226519, "comment_id": 82573117, "body": "Can you elaborate on &quot;You MUST NOT forget about the coroutine you&#39;ve started with async&quot;? Are there gotchas that one wouldn&#39;t expect for example?"}, {"owner": {"reputation": 20308, "user_id": 1051598, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f9c354e780ce562daea0e21b99bfdc0d?s=128&d=identicon&r=PG", "display_name": "Roman  Elizarov", "link": "https://stackoverflow.com/users/1051598/roman-elizarov"}, "edited": false, "score": 2, "creation_date": 1513237957, "post_id": 46226519, "comment_id": 82577839, "body": "&quot;An uncaught exception inside the async code is stored inside the resulting Deferred and is not delivered anywhere else, it will get silently dropped unless processed.&quot;"}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1514376767, "post_id": 46226519, "comment_id": 82952134, "body": "What exactly determines &quot;usually printed to stderr in backend JVM applications and crashes Android applications&quot;? <code>Thread.getDefaultUncaughtExceptionHandler()</code>?"}, {"owner": {"reputation": 20308, "user_id": 1051598, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f9c354e780ce562daea0e21b99bfdc0d?s=128&d=identicon&r=PG", "display_name": "Roman  Elizarov", "link": "https://stackoverflow.com/users/1051598/roman-elizarov"}, "edited": false, "score": 0, "creation_date": 1514443804, "post_id": 46226519, "comment_id": 82974017, "body": "This behavior can be overriden in various ways."}, {"owner": {"reputation": 2496, "user_id": 5598194, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/aYtz9.png?s=128&g=1", "display_name": "N. Kudryavtsev", "link": "https://stackoverflow.com/users/5598194/n-kudryavtsev"}, "edited": false, "score": 0, "creation_date": 1517844091, "post_id": 46226519, "comment_id": 84248353, "body": "So if I&#39;d like to propagate an exception that may occur in some &quot;fire and forget&quot; code, should I use <code>async&lt;Unit&gt;</code> and write some boilerplate code that awaits its completion and checks if some exception was thrown?"}, {"owner": {"reputation": 20308, "user_id": 1051598, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f9c354e780ce562daea0e21b99bfdc0d?s=128&d=identicon&r=PG", "display_name": "Roman  Elizarov", "link": "https://stackoverflow.com/users/1051598/roman-elizarov"}, "edited": false, "score": 0, "creation_date": 1517907407, "post_id": 46226519, "comment_id": 84274227, "body": "You&#39;d propagate exceptions by launching your &quot;fire and forget&quot; code with a parent coroutine or by installing your own <code>CoroutineExceptionHandler</code> in the context."}, {"owner": {"reputation": 36733, "user_id": 907695, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/daac9f1ef1a91604000a38376cace034?s=128&d=identicon&r=PG", "display_name": "Pointer Null", "link": "https://stackoverflow.com/users/907695/pointer-null"}, "edited": false, "score": 0, "creation_date": 1525129110, "post_id": 46226519, "comment_id": 87235900, "body": "I believe I can use async{} and forget it (not await for result). In such case it shall finish computation and be garbage-collected. Or not? Why you write &quot;you must...&quot;, what happens if I don&#39;t (call await)?"}, {"owner": {"reputation": 20308, "user_id": 1051598, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f9c354e780ce562daea0e21b99bfdc0d?s=128&d=identicon&r=PG", "display_name": "Roman  Elizarov", "link": "https://stackoverflow.com/users/1051598/roman-elizarov"}, "edited": false, "score": 10, "creation_date": 1526483786, "post_id": 46226519, "comment_id": 87765309, "body": "If you forget the result of async than it will finish and will be garbage collected. However, if it crashes due to some bug in your code, you&#39;ll never learn about that. That is why."}, {"owner": {"reputation": 4916, "user_id": 969016, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/z0eok.png?s=128&g=1", "display_name": "Boy", "link": "https://stackoverflow.com/users/969016/boy"}, "edited": false, "score": 0, "creation_date": 1541482853, "post_id": 46226519, "comment_id": 93222489, "body": "if I run <code>launch</code> in a coroutine in <code>Dispatcher.IO</code> on Android, I wonder if it will swallow the exception or crash the Android app as you say..."}, {"owner": {"reputation": 20308, "user_id": 1051598, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f9c354e780ce562daea0e21b99bfdc0d?s=128&d=identicon&r=PG", "display_name": "Roman  Elizarov", "link": "https://stackoverflow.com/users/1051598/roman-elizarov"}, "edited": false, "score": 0, "creation_date": 1541509212, "post_id": 46226519, "comment_id": 93234431, "body": "Exception handling is unrelated to dispatcher that you use. You can learn more in the official docs on exception handling in coroutines: <a href=\"http://kotlinlang.org/docs/reference/coroutines/exception-handling.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/coroutines/&hellip;</a>"}, {"owner": {"reputation": 1396, "user_id": 1147930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3ca5fec77a58359de97da1a9069aee8?s=128&d=identicon&r=PG", "display_name": "croc", "link": "https://stackoverflow.com/users/1147930/croc"}, "edited": false, "score": 0, "creation_date": 1564135000, "post_id": 46226519, "comment_id": 100939575, "body": "I still wouldn&#39;t say that &quot;you <i>must</i> use <code>await</code>&quot; on <code>async</code>, but rather that you <i>should</i> (because of the reasons @RomanElizarov said)."}, {"owner": {"reputation": 4954, "user_id": 8914336, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZiaPSSVtqI/AAAAAAAAAAI/AAAAAAAAAZE/Bpxg5UxWaP0/photo.jpg?sz=128", "display_name": "coroutineDispatcher", "link": "https://stackoverflow.com/users/8914336/coroutinedispatcher"}, "edited": false, "score": 0, "creation_date": 1615468092, "post_id": 46226519, "comment_id": 117703012, "body": "Probably one of the worst places to ask this question @RomanElizarov but why is <code>join()</code> not called <code>awaitForCompletion()</code> or something like that. We can agree that <code>await()</code> might be confusing. Just curious."}, {"owner": {"reputation": 20308, "user_id": 1051598, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f9c354e780ce562daea0e21b99bfdc0d?s=128&d=identicon&r=PG", "display_name": "Roman  Elizarov", "link": "https://stackoverflow.com/users/1051598/roman-elizarov"}, "edited": false, "score": 0, "creation_date": 1616089668, "post_id": 46226519, "comment_id": 117900993, "body": "Historical reasons. It was a nice play on [an outdated] Thead-coroutine analogy. You can join a thread, you can join a coroutine."}], "tags": [], "owner": {"reputation": 20308, "user_id": 1051598, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f9c354e780ce562daea0e21b99bfdc0d?s=128&d=identicon&r=PG", "display_name": "Roman  Elizarov", "link": "https://stackoverflow.com/users/1051598/roman-elizarov"}, "is_accepted": true, "score": 279, "last_activity_date": 1505719516, "last_edit_date": 1505719516, "creation_date": 1505415779, "answer_id": 46226519, "question_id": 46226518, "link": "https://stackoverflow.com/questions/46226518/what-is-the-difference-between-launch-join-and-async-await-in-kotlin-coroutines/46226519#46226519", "title": "What is the difference between launch/join and async/await in Kotlin coroutines", "body": "<ul>\n<li><p><a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.experimental/launch.html\" rel=\"noreferrer\"><code>launch</code></a> is used to <strong>fire and forget coroutine</strong>. It is like starting a new thread. If the code inside the <code>launch</code> terminates with exception, then it is treated like <em>uncaught</em> exception in a thread -- usually printed to stderr in backend JVM applications and crashes Android applications. <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.experimental/-job/join.html\" rel=\"noreferrer\"><code>join</code></a> is used to wait for completion of the launched coroutine and it does not propagate its exception. However, a crashed <em>child</em> coroutine cancels its parent with the corresponding exception, too.</p></li>\n<li><p><a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.experimental/async.html\" rel=\"noreferrer\"><code>async</code></a> is used to <strong>start a coroutine that computes some result</strong>. The result is represented by an instance of <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.experimental/-deferred/index.html\" rel=\"noreferrer\"><code>Deferred</code></a> and you <strong>must</strong> use <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.experimental/-deferred/await.html\" rel=\"noreferrer\"><code>await</code></a> on it. An uncaught exception inside the <code>async</code> code is stored inside the resulting <code>Deferred</code> and is not delivered anywhere else, it will get silently dropped unless processed. <strong>You MUST NOT forget about the coroutine you\u2019ve started with async</strong>. </p></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 531, "user_id": 3904992, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MQnMN.jpg?s=128&g=1", "display_name": "Avilio", "link": "https://stackoverflow.com/users/3904992/avilio"}, "edited": false, "score": 0, "creation_date": 1618166949, "post_id": 48079738, "comment_id": 118514376, "body": "In the code block example for launch (used within runBlocking), I don&#39;t think you&#39;d need &quot;job.join()&quot; since the runBlocking coroutine will wait for its children to complete. You&#39;d only need this if you were creating a coroutine using a top-level scope, such as GlobalScope."}], "tags": [], "owner": {"reputation": 38571, "user_id": 1418457, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/16bebb36e0e28572a316ba0450e190d1?s=128&d=identicon&r=PG", "display_name": "onmyway133", "link": "https://stackoverflow.com/users/1418457/onmyway133"}, "is_accepted": false, "score": 91, "last_activity_date": 1514991024, "creation_date": 1514991024, "answer_id": 48079738, "question_id": 46226518, "link": "https://stackoverflow.com/questions/46226518/what-is-the-difference-between-launch-join-and-async-await-in-kotlin-coroutines/48079738#48079738", "title": "What is the difference between launch/join and async/await in Kotlin coroutines", "body": "<p>I find this guide <a href=\"https://github.com/Kotlin/kotlinx.coroutines/blob/master/coroutines-guide.md\" rel=\"noreferrer\">https://github.com/Kotlin/kotlinx.coroutines/blob/master/coroutines-guide.md</a> to be useful. I will quote the essential parts</p>\n\n<p>\ud83e\udd84 <strong>coroutine</strong></p>\n\n<blockquote>\n  <p>Essentially, coroutines are light-weight threads.</p>\n</blockquote>\n\n<p>So you can think of coroutine as something that manages thread in a very efficient way.</p>\n\n<p>\ud83d\udc24 <strong>launch</strong></p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    launch { // launch new coroutine in background and continue\n        delay(1000L) // non-blocking delay for 1 second (default time unit is ms)\n        println(\"World!\") // print after delay\n    }\n    println(\"Hello,\") // main thread continues while coroutine is delayed\n    Thread.sleep(2000L) // block main thread for 2 seconds to keep JVM alive\n}\n</code></pre>\n\n<p>So <code>launch</code> starts a background thread, does something, and returns a token immediately as <code>Job</code>. You can call <code>join</code> on this <code>Job</code> to block until this <code>launch</code> thread completes</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) = runBlocking&lt;Unit&gt; {\n    val job = launch { // launch new coroutine and keep a reference to its Job\n        delay(1000L)\n        println(\"World!\")\n    }\n    println(\"Hello,\")\n    job.join() // wait until child coroutine completes\n}\n</code></pre>\n\n<p>\ud83e\udd86 <strong>async</strong></p>\n\n<blockquote>\n  <p>Conceptually, async is just like launch. It starts a separate coroutine which is a light-weight thread that works concurrently with all the other coroutines. The difference is that launch returns a Job and does not carry any resulting value, while async returns a Deferred -- a light-weight non-blocking future that represents a promise to provide a result later.</p>\n</blockquote>\n\n<p>So <code>async</code> starts a background thread, does something, and returns a token immediately as <code>Deferred</code>. </p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) = runBlocking&lt;Unit&gt; {\n    val time = measureTimeMillis {\n        val one = async { doSomethingUsefulOne() }\n        val two = async { doSomethingUsefulTwo() }\n        println(\"The answer is ${one.await() + two.await()}\")\n    }\n    println(\"Completed in $time ms\")\n}\n</code></pre>\n\n<blockquote>\n  <p>You can use .await() on a deferred value to get its eventual result, but Deferred is also a Job, so you can cancel it if needed.</p>\n</blockquote>\n\n<p>So <code>Deferred</code> is actually a <code>Job</code>. See <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.experimental/-deferred/index.html\" rel=\"noreferrer\">https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.experimental/-deferred/index.html</a></p>\n\n<pre><code>interface Deferred&lt;out T&gt; : Job (source)\n</code></pre>\n\n<p>\ud83e\udd8b <strong>async is eager by default</strong></p>\n\n<blockquote>\n  <p>There is a laziness option to async using an optional start parameter with a value of CoroutineStart.LAZY. It starts coroutine only when its result is needed by some await or if a start function is invoked.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 931, "user_id": 5153846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c22f755fe80cea8160159bd63bdd990?s=128&d=identicon&r=PG&f=1", "display_name": "Akbolat SSS", "link": "https://stackoverflow.com/users/5153846/akbolat-sss"}, "edited": false, "score": 6, "creation_date": 1580206549, "post_id": 59387148, "comment_id": 106012911, "body": "Thanks for mentioning that <code>launch</code> is for <b>sequential</b> funs, while <code>async</code> for <b>concurrent</b>"}, {"owner": {"reputation": 103, "user_id": 6655179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7vePi.jpg?s=128&g=1", "display_name": "alexanderktx", "link": "https://stackoverflow.com/users/6655179/alexanderktx"}, "edited": false, "score": 0, "creation_date": 1583485473, "post_id": 59387148, "comment_id": 107140651, "body": "You have used launch once for all the tasks and the async for each one. Maybe it&#39;s faster because each one was launched in another coroutine and doesn&#39;t wait someone? This is an incorrect comparison. Usually performance is the same. One key difference is that launch always start a new coroutine instead of async that splits the owner one. One more factor is that if one of async tasks would fail for a reason the parent coroutine will fail either. That&#39;s why async isn&#39;t as popular as launch."}, {"owner": {"reputation": 6601, "user_id": 5457853, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ee94ffac93a9a507abbbbd679f4779a?s=128&d=identicon&r=PG&f=1", "display_name": "Thracian", "link": "https://stackoverflow.com/users/5457853/thracian"}, "edited": false, "score": 3, "creation_date": 1587804395, "post_id": 59387148, "comment_id": 108656904, "body": "This answer is not right, comparing async with suspend functions directly instead of launch. Instead of calling suspend function directly in example, if you call launch(Dispatchers.IO) {downloadTask1()} you will see that both are executed concurrently, not <b>sequentially</b>, you won&#39;t be able to get outputs but you will see that it&#39;s not sequential. Also if you do not concatenate deferred.await() and call deferred.await() separately you will see that async is sequential."}, {"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 3, "creation_date": 1589016606, "post_id": 59387148, "comment_id": 109127417, "body": "-1 this is just plain wrong. Both <code>launch</code> and <code>async</code> will start new coroutines. You&#39;re comparing a single coroutine with no children to a single coroutine with 3 children. You could replace each of the <code>async</code> invocations with <code>launch</code> and absolutely nothing would change with regard to concurrency."}, {"owner": {"reputation": 2193, "user_id": 2856202, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/AHuOz.png?s=128&g=1", "display_name": "eigenfield", "link": "https://stackoverflow.com/users/2856202/eigenfield"}, "edited": false, "score": 1, "creation_date": 1589395985, "post_id": 59387148, "comment_id": 109280831, "body": "The extraneous noise in this answer is adding complexity that is outside of the co-routine topic."}, {"owner": {"reputation": 526, "user_id": 1900854, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fa65cd905d6f4ece4e134e0526a45a76?s=128&d=identicon&r=PG", "display_name": "bio007", "link": "https://stackoverflow.com/users/1900854/bio007"}, "edited": false, "score": 0, "creation_date": 1614765659, "post_id": 59387148, "comment_id": 117482571, "body": "If you really want to compare it in this way you also need to <code>launch</code> all 3 download tasks in separate launch blocks. Otherwise you are mixing things up and confusing people. If you add <code>val job1 = launch(Dispatchers.IO) { downloadTask1() }</code>, <code>val job2 = ...</code> etc. Then you will really run it in parallel as you are suggesting with <code>async</code>."}], "tags": [], "owner": {"reputation": 6630, "user_id": 1994950, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5f16e6eff1f8a47146a95c3234218946?s=128&d=identicon&r=PG&f=1", "display_name": "Kushal", "link": "https://stackoverflow.com/users/1994950/kushal"}, "is_accepted": false, "score": 16, "last_activity_date": 1576653420, "creation_date": 1576653420, "answer_id": 59387148, "question_id": 46226518, "link": "https://stackoverflow.com/questions/46226518/what-is-the-difference-between-launch-join-and-async-await-in-kotlin-coroutines/59387148#59387148", "title": "What is the difference between launch/join and async/await in Kotlin coroutines", "body": "<p><code>launch</code> and <code>async</code> are used to start new coroutines. But, they execute them in different manner. </p>\n\n<p>I would like to show very basic example which will help you understand difference very easily</p>\n\n<blockquote>\n  <ol>\n  <li><strong>launch</strong></li>\n  </ol>\n</blockquote>\n\n<pre><code>    class MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        btnCount.setOnClickListener {\n            pgBar.visibility = View.VISIBLE\n            CoroutineScope(Dispatchers.Main).launch {\n                val currentMillis = System.currentTimeMillis()\n                val retVal1 = downloadTask1()\n                val retVal2 = downloadTask2()\n                val retVal3 = downloadTask3()\n                Toast.makeText(applicationContext, \"All tasks downloaded! ${retVal1}, ${retVal2}, ${retVal3} in ${(System.currentTimeMillis() - currentMillis)/1000} seconds\", Toast.LENGTH_LONG).show();\n                pgBar.visibility = View.GONE\n            }\n        }\n\n    // Task 1 will take 5 seconds to complete download\n    private suspend fun downloadTask1() : String {\n        kotlinx.coroutines.delay(5000);\n        return \"Complete\";\n    }\n\n    // Task 1 will take 8 seconds to complete download    \n    private suspend fun downloadTask2() : Int {\n        kotlinx.coroutines.delay(8000);\n        return 100;\n    }\n\n    // Task 1 will take 5 seconds to complete download\n    private suspend fun downloadTask3() : Float {\n        kotlinx.coroutines.delay(5000);\n        return 4.0f;\n    }\n}\n</code></pre>\n\n<p>In this example, my code is downloading 3 data on click of <code>btnCount</code> button and showing <code>pgBar</code> progress bar until all download gets completed. There are 3 <code>suspend</code> functions <code>downloadTask1()</code>, <code>downloadTask2()</code> and <code>downloadTask3()</code> which downloads data. To simulate it, I've used <code>delay()</code> in these functions. These functions waits for <code>5 seconds</code>, <code>8 seconds</code> and <code>5 seconds</code> respectively.</p>\n\n<p>As we've used <code>launch</code> for starting these suspend functions, <code>launch</code> will execute them <strong>sequentially (one-by-one)</strong>. This means that, <code>downloadTask2()</code> would start after <code>downloadTask1()</code> gets completed and <code>downloadTask3()</code> would start only after <code>downloadTask2()</code> gets completed. </p>\n\n<p>As in output screenshot <code>Toast</code>, total execution time to complete all 3 downloads would lead to <strong>5 seconds + 8 seconds + 5 seconds = 18 seconds</strong> with <code>launch</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/tSIfD.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/tSIfD.png\" alt=\"Launch Example\"></a></p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li><strong>async</strong></li>\n  </ol>\n</blockquote>\n\n<p>As we saw that <code>launch</code> makes execution <code>sequentially</code> for all 3 tasks. The time to complete all tasks was <code>18 seconds</code>. </p>\n\n<p>If those tasks are independent and if they do not need other task's computation result, we can make them run <code>concurrently</code>. They would start at same time and run concurrently in background. This can be done with <code>async</code>.</p>\n\n<p><code>async</code> returns an instance of <code>Deffered&lt;T&gt;</code> type, where <code>T</code> is type of data our suspend function returns. For example, </p>\n\n<ul>\n<li><code>downloadTask1()</code> would return <code>Deferred&lt;String&gt;</code> as String is return type of function</li>\n<li><code>downloadTask2()</code> would return <code>Deferred&lt;Int&gt;</code> as Int is return type of function</li>\n<li><code>downloadTask3()</code> would return <code>Deferred&lt;Float&gt;</code> as Float is return type of function</li>\n</ul>\n\n<p>We can use the return object from <code>async</code> of type <code>Deferred&lt;T&gt;</code> to get the returned value in <code>T</code> type. That can be done with <code>await()</code> call. Check below code for example</p>\n\n<pre><code>        btnCount.setOnClickListener {\n        pgBar.visibility = View.VISIBLE\n\n        CoroutineScope(Dispatchers.Main).launch {\n            val currentMillis = System.currentTimeMillis()\n            val retVal1 = async(Dispatchers.IO) { downloadTask1() }\n            val retVal2 = async(Dispatchers.IO) { downloadTask2() }\n            val retVal3 = async(Dispatchers.IO) { downloadTask3() }\n\n            Toast.makeText(applicationContext, \"All tasks downloaded! ${retVal1.await()}, ${retVal2.await()}, ${retVal3.await()} in ${(System.currentTimeMillis() - currentMillis)/1000} seconds\", Toast.LENGTH_LONG).show();\n            pgBar.visibility = View.GONE\n        }\n</code></pre>\n\n<p>This way, we've launched all 3 tasks concurrently. So, my total execution time to complete would be only <code>8 seconds</code> which is time for <code>downloadTask2()</code> as it is largest of all of 3 tasks. You can see this in following screenshot in <code>Toast message</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/SxpMy.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/SxpMy.png\" alt=\"await example\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 1545, "user_id": 9061224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mzACU.jpg?s=128&g=1", "display_name": "MarGin", "link": "https://stackoverflow.com/users/9061224/margin"}, "is_accepted": false, "score": 4, "last_activity_date": 1578465347, "last_edit_date": 1578465347, "creation_date": 1578053039, "answer_id": 59578324, "question_id": 46226518, "link": "https://stackoverflow.com/questions/46226518/what-is-the-difference-between-launch-join-and-async-await-in-kotlin-coroutines/59578324#59578324", "title": "What is the difference between launch/join and async/await in Kotlin coroutines", "body": "<p><strong><em>launch</em></strong> returns a job </p>\n\n<p><strong><em>async</em></strong> returns a result (deferred job)</p>\n\n<p>launch with join is used to wait until the job gets finished.it simply suspends the coroutine calling join(), leaving the current thread free to do other work (like executing another coroutine) in the meantime.</p>\n\n<p><em>async</em> is used to compute some results. It creates a coroutine and returns its future result as an implementation of Deferred. The running coroutine is canceled when the resulting deferred is canceled. </p>\n\n<p>Consider an async method that returns a string value. If the async method is used without await it will return a Deferred string but if await is used you will get a string as the result</p>\n\n<p>The key difference between async and launch. <strong><em>Deferred returns a particular value of type T after your Coroutine finishes executing, whereas Job doesn\u2019t.</em></strong></p>\n"}, {"comments": [{"owner": {"reputation": 103, "user_id": 6655179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7vePi.jpg?s=128&g=1", "display_name": "alexanderktx", "link": "https://stackoverflow.com/users/6655179/alexanderktx"}, "edited": false, "score": 1, "creation_date": 1583485755, "post_id": 59941093, "comment_id": 107140778, "body": "Thanks for this comment. It collected all points of the thread. I&#39;d add that not all launches are canceled e.g. Atomic cannot be canceled ever."}], "tags": [], "owner": {"reputation": 1187, "user_id": 2057782, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/a1WaU.jpg?s=128&g=1", "display_name": "AouledIssa", "link": "https://stackoverflow.com/users/2057782/aouledissa"}, "is_accepted": false, "score": 11, "last_activity_date": 1580174885, "creation_date": 1580174885, "answer_id": 59941093, "question_id": 46226518, "link": "https://stackoverflow.com/questions/46226518/what-is-the-difference-between-launch-join-and-async-await-in-kotlin-coroutines/59941093#59941093", "title": "What is the difference between launch/join and async/await in Kotlin coroutines", "body": "<ol>\n<li><p>both coroutine builders namely launch and async are basically lambdas with receiver of type CoroutineScope which means their inner block is compiled as a suspend function, hence they both run in an asynchronous mode AND they both will execute their block sequentially. </p></li>\n<li><p>The difference between launch and  async is that they enable two different possibilities. The launch builder returns a Job however the async function will return a Deferred object. You can use launch to execute a block that you don't expect any returned value from it i.e writing to a database or saving a file or processing something basically just called for its side effect. On the other hand async which return a Deferred as I stated previously returns a useful value from the execution of its block, an object that wraps your data, so you can use it for mainly its result but possibly for its side effect as well. N.B: you can strip the deferred and get its value using the function await, which will block the execution of your statements until a value is returned or an exceptions is thrown! You could achieve the same thing with launch by using the function join()</p></li>\n<li><p>both coroutine builder (launch and async) are cancelable.</p></li>\n<li><p>anything more?: yep with launch if an exception is thrown within its block, the coroutine is automatically canceled and the exceptions is delivered. On the other hand, if that happens with async the exception is not propagated further and should be caught/handled within the returned Deferred object.</p></li>\n<li><p>more on coroutines <a href=\"https://kotlinlang.org/docs/tutorials/coroutines/coroutines-basic-jvm.html\" rel=\"noreferrer\">https://kotlinlang.org/docs/tutorials/coroutines/coroutines-basic-jvm.html</a>\n<a href=\"https://www.codementor.io/blog/kotlin-coroutines-6n53p8cbn1\" rel=\"noreferrer\">https://www.codementor.io/blog/kotlin-coroutines-6n53p8cbn1</a></p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 8566740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b719371f39997f9e0965e3ee9480997?s=128&d=identicon&r=PG&f=1", "display_name": "Vinod Kamble", "link": "https://stackoverflow.com/users/8566740/vinod-kamble"}, "is_accepted": false, "score": 1, "last_activity_date": 1593156335, "creation_date": 1593156335, "answer_id": 62589941, "question_id": 46226518, "link": "https://stackoverflow.com/questions/46226518/what-is-the-difference-between-launch-join-and-async-await-in-kotlin-coroutines/62589941#62589941", "title": "What is the difference between launch/join and async/await in Kotlin coroutines", "body": "<p><a href=\"https://i.stack.imgur.com/9NdUa.png\" rel=\"nofollow noreferrer\">Async vs Launch</a>\n<a href=\"https://i.stack.imgur.com/9NdUa.png\" rel=\"nofollow noreferrer\">Async vs Launch Diff Image</a></p>\n<p><strong>launch / async no result</strong></p>\n<ul>\n<li>Use when don't need result,</li>\n<li>Don't block the code where is called,</li>\n<li>Run in parallel</li>\n</ul>\n<p><strong>async for result</strong></p>\n<ul>\n<li>When you need to wait the result and can run in parallel for\nefficiency</li>\n<li>Block the code where is called</li>\n<li>run in parallel</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 638, "user_id": 4762027, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-S8fFjdpGsfs/AAAAAAAAAAI/AAAAAAAAADw/0aaTfB6HqCA/photo.jpg?sz=128", "display_name": "JaviCasa", "link": "https://stackoverflow.com/users/4762027/javicasa"}, "is_accepted": false, "score": 0, "last_activity_date": 1597377869, "creation_date": 1597377869, "answer_id": 63406357, "question_id": 46226518, "link": "https://stackoverflow.com/questions/46226518/what-is-the-difference-between-launch-join-and-async-await-in-kotlin-coroutines/63406357#63406357", "title": "What is the difference between launch/join and async/await in Kotlin coroutines", "body": "<p>Alongside the other great answers, for the people familiar with Rx and getting into coroutines, <code>async</code> returns a <code>Deferred</code> which is akin to <code>Single</code> while <code>launch</code> returns a <code>Job</code> that is more akin to <code>Completable</code>. You can <code>.await()</code> to block and get the value of the first one, and <code>.join()</code> to block until the <code>Job</code> is completed.</p>\n"}, {"tags": [], "owner": {"reputation": 19, "user_id": 6779449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7971092aea3b1a498e56d15eca7cdf2a?s=128&d=identicon&r=PG&f=1", "display_name": "Himanshu Yadav", "link": "https://stackoverflow.com/users/6779449/himanshu-yadav"}, "is_accepted": false, "score": 2, "last_activity_date": 1606629221, "creation_date": 1606629221, "answer_id": 65057421, "question_id": 46226518, "link": "https://stackoverflow.com/questions/46226518/what-is-the-difference-between-launch-join-and-async-await-in-kotlin-coroutines/65057421#65057421", "title": "What is the difference between launch/join and async/await in Kotlin coroutines", "body": "<p>Async and Launch, both are used to create coroutines that run in the background. In almost every situation one can use either of them.</p>\n<p>tl;dr version:</p>\n<p>When you dont care about the task's return value, and just want to run it, you may use Launch. If you need the return type from the task/coroutine you should use async.</p>\n<p><strong>Alternate</strong>:\nHowever, I feel the above difference/approach is a consequence of thinking in terms of Java/one thread per request model. Coroutines are so inexpensive, that if you want to do something from the return value of some task/coroutine(lets say a service call) you are better off creating a new coroutine from that one. If you want a coroutine to wait for another coroutine to transfer some data, I would recommend using channels and not the return value from Deferred object. Using channels and creating as much number of coroutines as required, is the better way IMO</p>\n<p><strong>Detailed answer</strong>:</p>\n<p>The only difference is in the return type and what functionality it provides.</p>\n<p>Launch returns <code>Job</code> while Async returns <code>Deferred</code>. Interestingly enough, Deferred extends Job. Which implies it must be providing additional functionality on top of Job. Deferred is type parameterised over  where T is the return type. Thus, Deferred object can return some response from the block of code executed by async method.</p>\n<p>p.s. I only wrote this answer because I saw some factually incorrect answers on this question and wanted to clarify the concept for everyone. Also, while working on a pet project myself I faced similar problem because of previous Java background.</p>\n"}], "owner": {"reputation": 20308, "user_id": 1051598, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f9c354e780ce562daea0e21b99bfdc0d?s=128&d=identicon&r=PG", "display_name": "Roman  Elizarov", "link": "https://stackoverflow.com/users/1051598/roman-elizarov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36332, "favorite_count": 55, "accepted_answer_id": 46226519, "answer_count": 8, "score": 200, "last_activity_date": 1606629221, "creation_date": 1505415779, "last_edit_date": 1552981610, "question_id": 46226518, "link": "https://stackoverflow.com/questions/46226518/what-is-the-difference-between-launch-join-and-async-await-in-kotlin-coroutines", "title": "What is the difference between launch/join and async/await in Kotlin coroutines", "body": "<p>In the <code>kotlinx.coroutines</code> library you can start new coroutine using either <code>launch</code> (with <code>join</code>) or <code>async</code> (with <code>await</code>). What is the difference between them? </p>\n"}, {"tags": ["android", "kotlin", "rx-java", "rx-android", "rx-kotlin"], "comments": [{"owner": {"reputation": 1527, "user_id": 3435011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5bede2a138e0817c085e7cb30fa8b3d?s=128&d=identicon&r=PG&f=1", "display_name": "Jon", "link": "https://stackoverflow.com/users/3435011/jon"}, "edited": false, "score": 1, "creation_date": 1505407014, "post_id": 46224173, "comment_id": 79411671, "body": "have you considered <code>switchIfEmpty</code>? When <code>it ==0</code>, if you no longer need it for later operations then you can switch to a different observable stream (asyncOperation)"}], "answers": [{"tags": [], "owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "is_accepted": true, "score": 3, "last_activity_date": 1505407638, "creation_date": 1505407638, "answer_id": 46224508, "question_id": 46224173, "link": "https://stackoverflow.com/questions/46224173/how-can-i-conditionally-add-an-asynchronous-operation-in-the-middle-of-an-rxjava/46224508#46224508", "title": "How can I conditionally add an asynchronous operation in the middle of an RxJava stream?", "body": "<p>FlatMap it!</p>\n\n<pre><code>.flatMap {\n    if (it == 0) {\n        return@flatMap asyncOperation()\n            .ignoreElements()\n            .andThen(Observable.just(0))\n    }\n    return@flatMap Observable.just(it)\n}\n.flatMap {\n    observable1(it)\n    observable2(it)\n    Observable.merge(\n        getSpotSearchObservable(observable1),\n        getSpotSearchObservable(observable2)\n    )\n}\n</code></pre>\n"}], "owner": {"reputation": 7190, "user_id": 967131, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/db71ea1ccdc64b0704968a271bdcf39b?s=128&d=identicon&r=PG", "display_name": "Chad Schultz", "link": "https://stackoverflow.com/users/967131/chad-schultz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 0, "accepted_answer_id": 46224508, "answer_count": 1, "score": 1, "last_activity_date": 1505407638, "creation_date": 1505406473, "question_id": 46224173, "link": "https://stackoverflow.com/questions/46224173/how-can-i-conditionally-add-an-asynchronous-operation-in-the-middle-of-an-rxjava", "title": "How can I conditionally add an asynchronous operation in the middle of an RxJava stream?", "body": "<p>Here's a simplified version of what I'm trying to do (using Kotlin and RxJava)</p>\n\n<pre><code>makeServerCall()\n                .doOnNext {\n                    doStuff(it)\n                }\n                //TODO: if it == 0, call asyncOperation() and wait for its callback to fire \n                //before running the rest of the stream. Otherwise immediately run the rest\n                //of the stream\n                .flatMap {\n                    observable1(it)\n                    observable2(it)\n                    Observable.merge(\n                            getSpotSearchObservable(observable1),\n                            getSpotSearchObservable(observable2)\n                }\n                .subscribeBy(onNext = {\n                allDone()\n                    view?\n                })\n</code></pre>\n\n<p>How do I squeeze in the call to <code>asyncOperation()</code> and make the rest of the stream wait for its callback to fire, but only when a certain condition is met? This seems like it's probably a trivial operation in Rx, but no obvious solution is coming to mind.</p>\n"}, {"tags": ["java", "json", "kotlin", "jsonpath"], "comments": [{"owner": {"reputation": 3924, "user_id": 6722100, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f1c741df6363ff4fe3e32eee854821c3?s=128&d=identicon&r=PG&f=1", "display_name": "achAmh&#225;in", "link": "https://stackoverflow.com/users/6722100/achamh%c3%a1in"}, "edited": false, "score": 2, "creation_date": 1505404803, "post_id": 46223493, "comment_id": 79410239, "body": "Funnily enough, most past questions ask how to remove the quotes :)"}, {"owner": {"reputation": 21170, "user_id": 2949612, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/RLdcF.png?s=128&g=1", "display_name": "pRaNaY", "link": "https://stackoverflow.com/users/2949612/pranay"}, "edited": false, "score": 0, "creation_date": 1505405083, "post_id": 46223493, "comment_id": 79410445, "body": "Check this github issue:  <a href=\"https://github.com/json-path/JsonPath/issues/275#issue-184313633\" rel=\"nofollow noreferrer\">github.com/json-path/JsonPath/issues/275#issue-184313633</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2169, "user_id": 4564505, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qRYlQ.jpg?s=128&g=1", "display_name": "pavlos163", "link": "https://stackoverflow.com/users/4564505/pavlos163"}, "is_accepted": true, "score": 0, "last_activity_date": 1505839025, "creation_date": 1505839025, "answer_id": 46305635, "question_id": 46223493, "link": "https://stackoverflow.com/questions/46223493/keep-double-quotes-when-getting-element-from-jsonarray/46305635#46305635", "title": "Keep double quotes when getting element from JSONArray", "body": "<p>What I ended up doing was to remove the <code>[</code> and <code>]</code> symbols from the beginning of the <code>JSONArray</code> after converting it to a <code>String</code>:</p>\n\n<pre><code>private fun JSONArray.toCredentialString(): String {\n    val credentialString = this.toString()\n    return credentialString.substring(1, credentialString.length - 1)\n}\n</code></pre>\n\n<p>Any better solution is welcome.</p>\n"}], "owner": {"reputation": 2169, "user_id": 4564505, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qRYlQ.jpg?s=128&g=1", "display_name": "pavlos163", "link": "https://stackoverflow.com/users/4564505/pavlos163"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "accepted_answer_id": 46305635, "answer_count": 1, "score": 1, "last_activity_date": 1505839025, "creation_date": 1505404218, "question_id": 46223493, "link": "https://stackoverflow.com/questions/46223493/keep-double-quotes-when-getting-element-from-jsonarray", "title": "Keep double quotes when getting element from JSONArray", "body": "<p>I am using <a href=\"https://github.com/json-path/JsonPath\" rel=\"nofollow noreferrer\">JsonPath</a> to retrieve a value from a JSON file. The JSON file looks something like this:</p>\n\n<pre><code>[\n  {\n    \"username\": \"John\",\n    \"password\": {\n      \"passwordValue\": \"passwordjohn\",\n      \"secret_key\": \"123\"\n    }\n  },\n  {\n    \"username\": \"Nick\",\n    \"password\": {\n      \"passwordValue\": \"XXX\",\n      \"secret_key\": \"ZZZ\",\n      \"other_key\": \"YYY\"\n    }\n  }\n]\n</code></pre>\n\n<p>The JsonPath I am using is to retrieve the <code>password</code> from a particular user. Example:</p>\n\n<pre><code>fun getPassword() {\n    val passwords: JSONArray = read(jsonFile, \"\\$.[?(@.name==\\\"John\\\")].password\")\n}\n</code></pre>\n\n<p>However, I found two obstacles. Firstly, I get back a <code>net.minidev.json.JSONArray</code> always, and the same path with appended <code>[0]</code> doesn't work.</p>\n\n<p>Therefore, I try to get the only element from the <code>JSONArray</code> I get back, like this: <code>credentials[0]</code>. Unfortunately, this <strong>removes</strong> the double quotes in the field names, resulting in something like this:</p>\n\n<pre><code>{passwordValue: passwordjohn, secret_key: 123}\n</code></pre>\n\n<p>Which is impossible to work with.</p>\n\n<p>I am looking for a way to get this back:</p>\n\n<pre><code>{\"passwordValue\": \"passwordjohn\", \"secret_key\": \"123\"}\n</code></pre>\n"}, {"tags": ["zip", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 1230, "user_id": 3323777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b57e9b0115e6d0356bd4d7502d5cbb9?s=128&d=identicon&r=PG&f=1", "display_name": "eugene-nikolaev", "link": "https://stackoverflow.com/users/3323777/eugene-nikolaev"}, "is_accepted": false, "score": 0, "last_activity_date": 1505406874, "last_edit_date": 1505406874, "creation_date": 1505402343, "answer_id": 46222874, "question_id": 46222055, "link": "https://stackoverflow.com/questions/46222055/create-file-zip-in-kotlin/46222874#46222874", "title": "Create file ZIP in Kotlin", "body": "<p>1) You are writing an empty byte array to the <code>out</code> for each line of an input file.</p>\n\n<p>2) There is no need in <code>BufferedReader</code> because it is enough to read and write bytes instead of lines (which would lead the unpacked content not to be matched with the original).</p>\n\n<p>3) All streams should be closed in the case of exceptions. Use method <code>use</code> like try-with-resources in java.</p>\n\n<p>4) <code>val</code> instead <code>var</code> there possible</p>\n\n<p>5) Don't use absolute paths except for the quick test snippets.</p>\n\n<p>6) This snippet is not in idiomatic way for Kotlin (see the Todd's answer)</p>\n\n<p>So this is how it should work (though in the Java way):</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    val files: Array&lt;String&gt; = arrayOf(\"/home/matte/theres_no_place.png\", \"/home/matte/vladstudio_the_moon_and_the_ocean_1920x1440_signed.jpg\")\n    ZipOutputStream(BufferedOutputStream(FileOutputStream(\"/home/matte/Desktop/test.zip\"))).use { out -&gt;\n        val data = ByteArray(1024)\n        for (file in files) {\n            FileInputStream(file).use { fi -&gt;\n                BufferedInputStream(fi).use { origin -&gt;\n                    val entry = ZipEntry(file)\n                    out.putNextEntry(entry)\n                    while (true) {\n                        val readBytes = origin.read(data)\n                        if (readBytes == -1) {\n                            break\n                        }\n                        out.write(data, 0, readBytes)\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p><strong>EDIT:</strong> I've ran this snippet with my files and it worked OK.</p>\n"}, {"tags": [], "owner": {"reputation": 26172, "user_id": 49746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IAAg.jpg?s=128&g=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/49746/todd"}, "is_accepted": true, "score": 12, "last_activity_date": 1505402417, "creation_date": 1505402417, "answer_id": 46222912, "question_id": 46222055, "link": "https://stackoverflow.com/questions/46222055/create-file-zip-in-kotlin/46222912#46222912", "title": "Create file ZIP in Kotlin", "body": "<p>If you use Kotlin's <code>IOStreams.copyTo()</code> extension, it will do the copying work for you, and that ended up working for me.</p>\n\n<p>So replace this:</p>\n\n<pre><code>origin.buffered(1024).reader().forEachLine {\n    out.write(data)\n}\n</code></pre>\n\n<p>With this:</p>\n\n<pre><code>origin.copyTo(out, 1024)\n</code></pre>\n\n<p>I also had issues with the <code>ZipEntry</code> having a leading slash, but that could just be because I'm on Windows.</p>\n\n<p>Note: I didn't end up needing to call <code>closeEntry()</code> to get this to work but it is recommended.</p>\n"}, {"tags": [], "owner": {"reputation": 1501, "user_id": 7156713, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/92a37e025104ef2adec392bce783942a?s=128&d=identicon&r=PG&f=1", "display_name": "matteo", "link": "https://stackoverflow.com/users/7156713/matteo"}, "is_accepted": false, "score": 6, "last_activity_date": 1580772514, "last_edit_date": 1580772514, "creation_date": 1505459629, "answer_id": 46233801, "question_id": 46222055, "link": "https://stackoverflow.com/questions/46222055/create-file-zip-in-kotlin/46233801#46233801", "title": "Create file ZIP in Kotlin", "body": "<p>I did a mix:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    val files: Array&lt;String&gt; = arrayOf(\"/home/matte/theres_no_place.png\", \"/home/matte/vladstudio_the_moon_and_the_ocean_1920x1440_signed.jpg\")\n    ZipOutputStream(BufferedOutputStream(FileOutputStream(\"/home/matte/Desktop/test.zip\"))).use { out -&gt;\n        for (file in files) {\n            FileInputStream(file).use { fi -&gt;\n                BufferedInputStream(fi).use { origin -&gt;\n                    val entry = ZipEntry(file.substring(file.lastIndexOf(\"/\")))\n                    out.putNextEntry(entry)\n                    origin.copyTo(out, 1024)\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>It works perfectly!</p>\n"}, {"tags": [], "owner": {"reputation": 2817, "user_id": 4621448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9XSvt.jpg?s=128&g=1", "display_name": "tochkov", "link": "https://stackoverflow.com/users/4621448/tochkov"}, "is_accepted": false, "score": 0, "last_activity_date": 1571440518, "creation_date": 1571440518, "answer_id": 58459173, "question_id": 46222055, "link": "https://stackoverflow.com/questions/46222055/create-file-zip-in-kotlin/58459173#58459173", "title": "Create file ZIP in Kotlin", "body": "<p>Here is a solution working with subfolders:</p>\n\n<pre><code>fun addFolderToZip(\n    folder: String,\n    destination: String,\n    zipFileName: String = folder.substring(folder.lastIndexOf(\"/\"))\n) {\n\n    val folderToZip = File(folder)\n    var out: ZipOutputStream? = null\n    try {\n        out = ZipOutputStream(\n            BufferedOutputStream(FileOutputStream(\"$destination/$zipFileName\"))\n        )\n        recursivelyAddZipEntries(folderToZip, folderToZip.absolutePath, out)\n    } catch (e: Exception) {\n        Log.e(\"ZIP Err\", e.message)\n    } finally {\n        out?.close()\n    }\n\n}\n\n\nprivate fun recursivelyAddZipEntries(\n    folder: File,\n    basePath: String,\n    out: ZipOutputStream\n) {\n\n    val files = folder.listFiles() ?: return\n    for (file in files) {\n\n        if (file.isDirectory) {\n            recursivelyAddZipEntries(file, basePath, out)\n        } else {\n            val origin = BufferedInputStream(FileInputStream(file))\n            origin.use {\n                val entryName = file.path.substring(basePath.length)\n                out.putNextEntry(ZipEntry(entryName))\n                origin.copyTo(out, 1024)\n            }\n        }\n\n    }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 1501, "user_id": 7156713, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/92a37e025104ef2adec392bce783942a?s=128&d=identicon&r=PG&f=1", "display_name": "matteo", "link": "https://stackoverflow.com/users/7156713/matteo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9323, "favorite_count": 4, "accepted_answer_id": 46222912, "answer_count": 4, "score": 15, "last_activity_date": 1580772514, "creation_date": 1505400256, "question_id": 46222055, "link": "https://stackoverflow.com/questions/46222055/create-file-zip-in-kotlin", "title": "Create file ZIP in Kotlin", "body": "<p>I'm trying to create a zip file in Kotlin.\nthis is the code:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\nvar files: Array&lt;String&gt; = arrayOf(\"/home/matte/theres_no_place.png\", \"/home/matte/vladstudio_the_moon_and_the_ocean_1920x1440_signed.jpg\")\nvar out = ZipOutputStream(BufferedOutputStream(FileOutputStream(\"/home/matte/Desktop/test.zip\")))\nvar data = ByteArray(1024)\nfor (file in files) {\n    var fi = FileInputStream(file)\n    var origin = BufferedInputStream(fi)\n    var entry = ZipEntry(file.substring(file.lastIndexOf(\"/\")))\n    out.putNextEntry(entry)\n    origin.buffered(1024).reader().forEachLine {\n        out.write(data)\n    }\n    origin.close()\n}\nout.close()}\n</code></pre>\n\n<p>the zip file is created, but the files inside are corrupt!</p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 10519, "user_id": 1199662, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/ihCLz.jpg?s=128&g=1", "display_name": "Droidman", "link": "https://stackoverflow.com/users/1199662/droidman"}, "edited": false, "score": 2, "creation_date": 1505398033, "post_id": 46221259, "comment_id": 79405378, "body": "please provide your LogCat output at the time of the crash"}, {"owner": {"reputation": 6313, "user_id": 945226, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ek7RV.png?s=128&g=1", "display_name": "G. Blake Meike", "link": "https://stackoverflow.com/users/945226/g-blake-meike"}, "edited": false, "score": 0, "creation_date": 1505399975, "post_id": 46221259, "comment_id": 79406859, "body": "Yes.  I can tell you exactly what you are doing wrong:  You are asking a question, on StackOverflow, without including the actual error message.  Doing this is likely to get you down-voted."}, {"owner": {"reputation": 11, "user_id": 5665165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1925c5ca3f3a461ff6e68d7fe778190?s=128&d=identicon&r=PG&f=1", "display_name": "Siepraa", "link": "https://stackoverflow.com/users/5665165/siepraa"}, "edited": false, "score": 0, "creation_date": 1505401157, "post_id": 46221259, "comment_id": 79407728, "body": "09-14 14:51:41.096 6498-6498/com.corcode.myapplication E/FragmentManager: No view found for id 0x7f070075 (com.corcode.myapplication:id/testFragment) for fragment TestFragment{dcf770e #0 id=0x7f070075}"}, {"owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 0, "creation_date": 1505671253, "post_id": 46221259, "comment_id": 79496885, "body": "<code>R.id.testFragment</code> is an integer identifier. It&#39;s never null."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5665165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1925c5ca3f3a461ff6e68d7fe778190?s=128&d=identicon&r=PG&f=1", "display_name": "Siepraa", "link": "https://stackoverflow.com/users/5665165/siepraa"}, "edited": false, "score": 0, "creation_date": 1505403957, "post_id": 46222555, "comment_id": 79409644, "body": "Got it! Thanks for the answer"}], "tags": [], "owner": {"reputation": 2706, "user_id": 4213436, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-BFUsbziJO5Q/AAAAAAAAAAI/AAAAAAAACFw/9ZY8INRo5pg/photo.jpg?sz=128", "display_name": "JDenais", "link": "https://stackoverflow.com/users/4213436/jdenais"}, "is_accepted": false, "score": 1, "last_activity_date": 1505401942, "last_edit_date": 1505401942, "creation_date": 1505401505, "answer_id": 46222555, "question_id": 46221259, "link": "https://stackoverflow.com/questions/46221259/add-fragment-at-runtime-with-kotlin-causes-unfortunately-app-has-stopped/46222555#46222555", "title": "Add fragment at runtime with Kotlin causes &#39;Unfortunately app has stopped&#39;", "body": "<p>This method call is wrong :</p>\n\n<pre><code>getSupportFragmentManager().beginTransaction().add(R.id.testFragment, fragment).commit()\n</code></pre>\n\n<p>because the first param of the add method should be your fragment container (the layout in your activity which will receive the frament).</p>\n\n<p>Here you are trying to pass the layout of your fragment, which is not part of the currently inflated view hierachy. So the FragmentManager is looking in the view hierarchy for a view that does not exist, and it crashes.</p>\n\n<p>You need to pass there the id of a valid ViewGroup. We usually use a FrameLayout as a fragment container.\nAnd this container needs to be included in the layout.xml of your activity</p>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 11, "user_id": 5665165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1925c5ca3f3a461ff6e68d7fe778190?s=128&d=identicon&r=PG&f=1", "display_name": "Siepraa", "link": "https://stackoverflow.com/users/5665165/siepraa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 628, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505401942, "creation_date": 1505397924, "question_id": 46221259, "link": "https://stackoverflow.com/questions/46221259/add-fragment-at-runtime-with-kotlin-causes-unfortunately-app-has-stopped", "title": "Add fragment at runtime with Kotlin causes &#39;Unfortunately app has stopped&#39;", "body": "<p>I am new to Kotlin and I am trying to run fragment at runtime but my app crashes with message 'Unfortunately app has stopped'</p>\n\n<p>Here is my Fragment kotlin class:</p>\n\n<pre><code>import android.os.Bundle\nimport android.support.v4.app.Fragment\nimport android.view.LayoutInflater\nimport android.view.View\nimport android.view.ViewGroup\n\n    class TestFragment : Fragment() {\n\n        override fun onCreateView (inflater: LayoutInflater?, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n            return inflater?.inflate(R.layout.test_fragment, container, false)\n        }\n\n    }\n</code></pre>\n\n<p>Frame layout beggins with:</p>\n\n<pre><code>&lt;FrameLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:id=\"@+id/testFragment\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"&gt;\n</code></pre>\n\n<p>And here is my activity:</p>\n\n<pre><code>import android.annotation.SuppressLint\nimport android.os.Bundle\nimport android.support.v4.app.Fragment\nimport android.support.v7.app.AppCompatActivity\nimport kotlinx.android.synthetic.main.activity_display_text.*\n\nclass DisplayText : AppCompatActivity() {\n\n    @SuppressLint(\"ResourceType\")\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_display_text)\n\n        var toDisplay = intent.extras.get(\"MainActivity_HELLO_WORLD\")\n        displayText.text = toDisplay as String\n\n        if(R.id.testFragment !== null) {\n\n            if(savedInstanceState !== null) {\n                return\n            }\n\n            val fragment = TestFragment()\n\n            getSupportFragmentManager().beginTransaction()\n                    .add(R.id.testFragment, fragment).commit()\n\n        }\n    }\n}\n</code></pre>\n\n<p>Can you please tell me what I'm doing wrong?</p>\n"}, {"tags": ["android", "list", "kotlin", "retrofit2", "rx-java2"], "answers": [{"tags": [], "owner": {"reputation": 5391, "user_id": 1420441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UGcwx.gif?s=128&g=1", "display_name": "Henrique de Sousa", "link": "https://stackoverflow.com/users/1420441/henrique-de-sousa"}, "is_accepted": true, "score": 9, "last_activity_date": 1505394869, "creation_date": 1505394869, "answer_id": 46220172, "question_id": 46220171, "link": "https://stackoverflow.com/questions/46220171/jsonarray-to-kotlin-data-class-using-retrofit-expected-begin-object-but-was-beg/46220172#46220172", "title": "JsonArray to Kotlin data class using Retrofit (Expected BEGIN_OBJECT but was BEGIN_ARRAY)", "body": "<p>I found out that I didn't have to change the data object. </p>\n\n<p>The solution is to simply tell the calling method to retrieve a <code>List</code> of models instead of the model itself.</p>\n\n<pre><code>@GET(\"/people.json\")\nfun getPeople() : Observable&lt;List&lt;Model.Person&gt;&gt;\n</code></pre>\n\n<p>Classic example of how a difficult problem can be solved using a simple approach. Well done, <code>Retrofit</code> !</p>\n"}], "owner": {"reputation": 5391, "user_id": 1420441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UGcwx.gif?s=128&g=1", "display_name": "Henrique de Sousa", "link": "https://stackoverflow.com/users/1420441/henrique-de-sousa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3410, "favorite_count": 0, "accepted_answer_id": 46220172, "answer_count": 1, "score": 3, "last_activity_date": 1515081862, "creation_date": 1505394869, "last_edit_date": 1515081862, "question_id": 46220171, "link": "https://stackoverflow.com/questions/46220171/jsonarray-to-kotlin-data-class-using-retrofit-expected-begin-object-but-was-beg", "title": "JsonArray to Kotlin data class using Retrofit (Expected BEGIN_OBJECT but was BEGIN_ARRAY)", "body": "<p>I'm using Retrofit2</p>\n\n<pre><code>fun create(): MyApiService {\n\n    return Retrofit.Builder()\n                .addCallAdapterFactory(RxJava2CallAdapterFactory.create())\n                .addConverterFactory(GsonConverterFactory.create())\n                .baseUrl(BASE_URL)\n                .build()\n                .create(MyApiService::class.java)\n}\n</code></pre>\n\n<p>to implicitly convert the following Json</p>\n\n<pre><code>[\n    {\n        \"id\": 1,\n        \"name\": \"John\",\n    }, {\n        \"id\": 2,\n        \"name\": \"Mary\",\n    }\n]\n</code></pre>\n\n<p>into a Kotlin data class</p>\n\n<pre><code>object Model {\n    data class Person(val id: Int, val name: String)\n}\n</code></pre>\n\n<p>However, I'm getting the <code>Expected BEGIN_OBJECT but was BEGIN_ARRAY</code> error when attempting to </p>\n\n<pre><code>@GET(\"/people.json\")\nfun getPeople() : Observable&lt;Model.Person&gt;\n</code></pre>\n\n<p>I've tried changing the <code>Model</code> object to extend from List (as you'd normally do in Retrofit 1 with Java) or creating a <code>List</code> field of people, but to no avail.</p>\n"}, {"tags": ["android", "kotlin", "metadata", "proguard"], "comments": [{"owner": {"reputation": 3604, "user_id": 1643723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20e16eeec789c8b7281a9d7dd56b8030?s=128&d=identicon&r=PG", "display_name": "user1643723", "link": "https://stackoverflow.com/users/1643723/user1643723"}, "edited": false, "score": 0, "creation_date": 1505651210, "post_id": 46219853, "comment_id": 79490967, "body": "This sucks\u2026 Since you have removed (?) default Android <code>*.pro</code> file from <code>proguardFiles</code>, I suspect, that Kotlin Gradle plugin forces annotations to be kept somehow. You might have to use separate Proguard pass to strip those from your jars, \u2014 Proguard is just Java library/Ant task, so you can declare <code>classpath</code> dependency on it and use it yourself in custom Gradle task/Android Plugin transform."}, {"owner": {"reputation": 239, "user_id": 8609041, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YybPoaoA6AI/AAAAAAAAAAI/AAAAAAAAAHo/XcFZbRbO-54/photo.jpg?sz=128", "display_name": "AlexG", "link": "https://stackoverflow.com/users/8609041/alexg"}, "reply_to_user": {"reputation": 3604, "user_id": 1643723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20e16eeec789c8b7281a9d7dd56b8030?s=128&d=identicon&r=PG", "display_name": "user1643723", "link": "https://stackoverflow.com/users/1643723/user1643723"}, "edited": false, "score": 0, "creation_date": 1505721232, "post_id": 46219853, "comment_id": 79510937, "body": "@user1643723 thanks for the suggestion, I did not suspect this might come from the kotlin-gradle plugin, and I&#39;ll try the separated proguard call trick."}, {"owner": {"reputation": 239, "user_id": 8609041, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YybPoaoA6AI/AAAAAAAAAAI/AAAAAAAAAHo/XcFZbRbO-54/photo.jpg?sz=128", "display_name": "AlexG", "link": "https://stackoverflow.com/users/8609041/alexg"}, "reply_to_user": {"reputation": 3604, "user_id": 1643723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20e16eeec789c8b7281a9d7dd56b8030?s=128&d=identicon&r=PG", "display_name": "user1643723", "link": "https://stackoverflow.com/users/1643723/user1643723"}, "edited": false, "score": 0, "creation_date": 1505724018, "post_id": 46219853, "comment_id": 79512505, "body": "I checked this solution, and indeed annotations are removed. However this is not industrial, I had to rework my proguard files to have it work, and I have not tried to use the AAR at runtime yet..."}, {"owner": {"reputation": 239, "user_id": 8609041, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YybPoaoA6AI/AAAAAAAAAAI/AAAAAAAAAHo/XcFZbRbO-54/photo.jpg?sz=128", "display_name": "AlexG", "link": "https://stackoverflow.com/users/8609041/alexg"}, "reply_to_user": {"reputation": 3604, "user_id": 1643723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20e16eeec789c8b7281a9d7dd56b8030?s=128&d=identicon&r=PG", "display_name": "user1643723", "link": "https://stackoverflow.com/users/1643723/user1643723"}, "edited": false, "score": 2, "creation_date": 1505724765, "post_id": 46219853, "comment_id": 79512986, "body": "So now I checked at runtime, and this is what I expected... <code>java.lang.AbstractMethodError: abstract method &quot;java.lang.Object kotlin.jvm.functions.Function0.invoke()&quot;</code> I got cryptic errors like this one, which seems to be linked to the way java interacts with kotlin bytecode... I&#39;m doomed."}, {"owner": {"reputation": 3604, "user_id": 1643723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20e16eeec789c8b7281a9d7dd56b8030?s=128&d=identicon&r=PG", "display_name": "user1643723", "link": "https://stackoverflow.com/users/1643723/user1643723"}, "edited": false, "score": 0, "creation_date": 1505785657, "post_id": 46219853, "comment_id": 79544035, "body": "You might want to update the question with description of your recent attempts. Manually processing library files with Proguard is nontrivial task, you probably got your <code>-libraryjars</code> list wrong or something like that. Make sure, that you have both &quot;-dontskip*&quot; options in Proguard config!"}, {"owner": {"reputation": 1610, "user_id": 2220337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/22d64a068fd74d3768a167dfd85231d9?s=128&d=identicon&r=PG&f=1", "display_name": "cjurjiu", "link": "https://stackoverflow.com/users/2220337/cjurjiu"}, "edited": false, "score": 0, "creation_date": 1524138198, "post_id": 46219853, "comment_id": 86855904, "body": "Did you find a fix for this, in the meantime? Also facing the same issue."}, {"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1529508546, "post_id": 46219853, "comment_id": 88901386, "body": "Regarding the metadata, have you tried adding the ProGuard rule <code>-keepattributes !*Metadata*</code> ?"}, {"owner": {"reputation": 2246, "user_id": 1913542, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a0bd188bbbab99184afd75b18e3271d7?s=128&d=identicon&r=PG&f=1", "display_name": "stefana", "link": "https://stackoverflow.com/users/1913542/stefana"}, "reply_to_user": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1529569268, "post_id": 46219853, "comment_id": 88923986, "body": "@Michael I&#39;ve tried it, but it didn&#39;t change the output."}, {"owner": {"reputation": 225, "user_id": 9956766, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6UMPJ.jpg?s=128&g=1", "display_name": "SamyB", "link": "https://stackoverflow.com/users/9956766/samyb"}, "edited": false, "score": 0, "creation_date": 1530089282, "post_id": 46219853, "comment_id": 89106905, "body": "You should add your proguard file, to your gradle build configuration: <a href=\"https://developer.android.com/studio/build/\" rel=\"nofollow noreferrer\">developer.android.com/studio/build</a>"}], "answers": [{"tags": [], "owner": {"reputation": 282, "user_id": 8139410, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gpbSF.png?s=128&g=1", "display_name": "Pemassi", "link": "https://stackoverflow.com/users/8139410/pemassi"}, "is_accepted": false, "score": 1, "last_activity_date": 1574744649, "creation_date": 1574744649, "answer_id": 59044070, "question_id": 46219853, "link": "https://stackoverflow.com/questions/46219853/how-can-i-obfuscate-my-sdk-coded-with-kotlin-and-get-rid-of-metadata/59044070#59044070", "title": "How can I obfuscate my sdk coded with kotlin (and get rid of Metadata)", "body": "<p>Finally, I found a way to delete Kotlin metadata annotations.</p>\n\n<p>In order to hide Kotlin metadata annotations, you need to enable R8 full mode.</p>\n\n<p>Here is the information about my environment.</p>\n\n<blockquote>\n  <p>Environment</p>\n</blockquote>\n\n<pre><code>OS: macOS 10.15.1\nAndroid Studio: 3.5.1\nGradle: 5.4.1\nAndroid Gradle Tool: 3.5.2\n</code></pre>\n\n<p>What you have to do is just add properties to <code>gradle.properties</code> like below</p>\n\n<blockquote>\n  <p>gradle.properties</p>\n</blockquote>\n\n<pre><code>android.enableR8.fullMode=true\n</code></pre>\n\n<p>And here is my Proguard Rules</p>\n\n<blockquote>\n  <p>proguard-rules.pro</p>\n</blockquote>\n\n<pre><code>-dontwarn kotlin.**\n-assumenosideeffects class kotlin.jvm.internal.Intrinsics {\n    static void checkParameterIsNotNull(java.lang.Object, java.lang.String);\n}\n</code></pre>\n\n<p>FYI, R8 full mode is still testing now, so sometimes it doesn't work well. However, for me, it works perfectly for now.</p>\n"}], "owner": {"reputation": 239, "user_id": 8609041, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YybPoaoA6AI/AAAAAAAAAAI/AAAAAAAAAHo/XcFZbRbO-54/photo.jpg?sz=128", "display_name": "AlexG", "link": "https://stackoverflow.com/users/8609041/alexg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2964, "favorite_count": 11, "answer_count": 1, "score": 23, "last_activity_date": 1574744920, "creation_date": 1505393894, "last_edit_date": 1574744920, "question_id": 46219853, "link": "https://stackoverflow.com/questions/46219853/how-can-i-obfuscate-my-sdk-coded-with-kotlin-and-get-rid-of-metadata", "title": "How can I obfuscate my sdk coded with kotlin (and get rid of Metadata)", "body": "<p>I'm developing a SDK (Android library), and I have to obfuscate a large part of my code so the customer may not try and play with internal code.\nMy lib is coded in kotlin, and I used proguard to obfuscate the code. Problem is that there are still @kotlin.Metadata (runtime) annotations inside the code after compile and obfuscation. With those annotations, it's really easy to retrieve the java code that originated this \"(not-so-)obfuscated\" bytecode.</p>\n\n<p>I first thought it was my fault, and my project had too many entropy sources that might have induced this behaviour, so I made a sample project to prove that the problem does not come from my sdk implementation.\nI created a new project with AS, then a lib module with 2 files:</p>\n\n<ul>\n<li><p>facade.kt is my facade class, the one that I do not wish to obfuscate, so the customer may use it:</p>\n\n<pre><code>package com.example.mylibrary\n\nclass MyFacade(val internalClass:InternalClass) {\n\n   fun doSomething() {\n      internalClass.doSomething(\n             firstArgument=1,\n             secondArgument=2\n      )\n    }\n }\n</code></pre></li>\n<li><p>and in this sample, internal.kt holds the classes that I want to obfuscate:</p>\n\n<pre><code>package com.example.mylibrary\n\nclass InternalClass {\n    fun doSomething(firstArgument: Int, secondArgument: Int) {\n        System.out.println(\"Arguments are : $firstArgument, $secondArgument\")\n    }\n}\n</code></pre></li>\n</ul>\n\n<p>The proguard rules are injected into gradle project with this release closure:</p>\n\n<pre><code>buildTypes {\n    release {\n        minifyEnabled true\n        proguardFiles 'proguard-rules.pro'\n    }\n}\n</code></pre>\n\n<p>And here is <code>proguard-rules.pro</code> (only one line, nothing more) :</p>\n\n<pre><code>-keep class com.example.mylibrary.MyFacade {*;}\n</code></pre>\n\n<p>The result: when I <code>./gradlew clean myLib:assembleRelease</code>, I do obtain an aar in which my facade is kept, and my internal class has been renamed in 'a', with one method 'a', except that the class is still annotated with kotlin @Metadata, which holds every information that helps the decompiler retrieve the original class name, the method, attribute and argument names, etc...\nSo my code is not so obfuscated at all...</p>\n\n<pre><code>@Metadata(\n   mv = {1, 1, 7},\n   bv = {1, 0, 2},\n   k = 1,\n   d1 = {\"\\u0000\\u001a\\n\\u0002\\u0018\\u0002\\n\\u0002\\u0010\\u0000\\n\\u0002\\b\\u0002\\n\\u0002\\u0010\\u0002\\n\\u0000\\n\\u0002\\u0010\\b\\n\\u0002\\b\\u0002\\u0018\\u00002\\u00020\\u0001B\\u0005\u00a2\\u0006\\u0002\\u0010\\u0002J\\u0016\\u0010\\u0003\\u001a\\u00020\\u00042\\u0006\\u0010\\u0005\\u001a\\u00020\\u00062\\u0006\\u0010\\u0007\\u001a\\u00020\\u0006\u00a8\\u0006\\b\"},\n   d2 = {\"Lcom/example/mylibrary/InternalClass;\", \"\", \"()V\", \"doSomething\", \"\", \"firstArgument\", \"\", \"secondArgument\", \"mylibrary_release\"}\n)\npublic final class a {\n    ...\n}\n</code></pre>\n\n<p>So my question: is it possible to get rid of those annotations, am I the only one facing this problem, or have I missed something?</p>\n"}, {"tags": ["java", "android", "sqlite", "kotlin", "mobile-development"], "comments": [{"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1505393036, "post_id": 46219438, "comment_id": 79401447, "body": "&quot;I&#39;m using content provider in my application&quot; -- why? Only implement a <code>ContentProvider</code> if you are sharing data with another app."}], "answers": [{"tags": [], "owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "is_accepted": false, "score": 3, "last_activity_date": 1505393181, "creation_date": 1505393181, "answer_id": 46219589, "question_id": 46219438, "link": "https://stackoverflow.com/questions/46219438/how-to-join-two-tables-in-android-using-content-provider-query-method/46219589#46219589", "title": "how to join two tables in android using content provider query method?", "body": "<p>Content providers are an abstraction on top of SQL, so you do not have direct access to the tables to join them.</p>\n\n<p>The content provider implementation must already provide the joined tables.</p>\n\n<p>If you do not need to make the data accessible for other apps, you should probably avoid using a content provider, and use the database more directly.</p>\n"}, {"comments": [{"owner": {"reputation": 110, "user_id": 10086742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9a08eba23183def103897ea65339180?s=128&d=identicon&r=PG&f=1", "display_name": "mahdi", "link": "https://stackoverflow.com/users/10086742/mahdi"}, "edited": false, "score": 0, "creation_date": 1586866471, "post_id": 46222163, "comment_id": 108280025, "body": "What if I want to join data from android&#39;s own contentProvider (like contacts provider) with a database created by me? In this case I don&#39;t have access to table name for that specific contentProvider."}, {"owner": {"reputation": 6313, "user_id": 945226, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ek7RV.png?s=128&g=1", "display_name": "G. Blake Meike", "link": "https://stackoverflow.com/users/945226/g-blake-meike"}, "reply_to_user": {"reputation": 110, "user_id": 10086742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9a08eba23183def103897ea65339180?s=128&d=identicon&r=PG&f=1", "display_name": "mahdi", "link": "https://stackoverflow.com/users/10086742/mahdi"}, "edited": false, "score": 0, "creation_date": 1586959041, "post_id": 46222163, "comment_id": 108320843, "body": "That isn&#39;t possible, of course.  As you say, you don&#39;t have access to the table."}], "tags": [], "owner": {"reputation": 6313, "user_id": 945226, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ek7RV.png?s=128&g=1", "display_name": "G. Blake Meike", "link": "https://stackoverflow.com/users/945226/g-blake-meike"}, "is_accepted": true, "score": 2, "last_activity_date": 1505402220, "last_edit_date": 1505402220, "creation_date": 1505400509, "answer_id": 46222163, "question_id": 46219438, "link": "https://stackoverflow.com/questions/46219438/how-to-join-two-tables-in-android-using-content-provider-query-method/46222163#46222163", "title": "how to join two tables in android using content provider query method?", "body": "<p>This is easy to do.  You need to think of the join as an abstract table (sorry, code is in Java...)</p>\n\n<p>First, create a new <code>content:</code> URL and use a <code>URIMatcher</code> to parse it:</p>\n\n<pre><code>private static final int JOIN_DIR_TYPE = 10;\nprivate static final UriMatcher MATCHER = new UriMatcher(UriMatcher.NO_MATCH);\nstatic {\n    // ...\n    MATCHER.addURI(\n        MyContract.AUTHORITY,\n        MyContract.Join.TABLE,\n        JOIN_DIR_TYPE);\n}\n</code></pre>\n\n<p>Now, in your query method, delegate queries with the matching URL to a separate method:</p>\n\n<pre><code>@Override\npublic Cursor query(Uri uri, String[] proj, String sel, String[] selArgs, String sort) {\n    switch (MATCHER.match(uri)) {\n        case JOIN_DIR_TYPE:\n            return queryJoin(uri, proj, sel, selArgs, sort)\n            break;\n            // ...\n        default:\n            throw new IllegalArgumentException(\"Unexpected uri: \" + uri);\n    }\n    // ...\n}\n</code></pre>\n\n<p>Now, all you have to do is query the join, in the new method:</p>\n\n<pre><code>private Cursor queryJoin(Uri uri, String[] proj, String sel, String[] selArgs, String sort) {\n     SQLiteQueryBuilder qb = new SQLiteQueryBuilder();\n     qb.setTables(\"Bank_accounts LEFT OUTER JOIN Bank_customers ON (Bank_customers.customer_id = Bank_accounts.customer_id)\")\");\n</code></pre>\n\n<p>You may want to use the QueryBuilder's <code>ColumnMap</code> to map abstract aliases onto column names.</p>\n"}], "owner": {"reputation": 160, "user_id": 6215208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0011ceaa59bce8d93a9585e320e10c74?s=128&d=identicon&r=PG&f=1", "display_name": "Sunny", "link": "https://stackoverflow.com/users/6215208/sunny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2142, "favorite_count": 3, "accepted_answer_id": 46222163, "answer_count": 2, "score": 1, "last_activity_date": 1505402220, "creation_date": 1505392761, "last_edit_date": 1505393476, "question_id": 46219438, "link": "https://stackoverflow.com/questions/46219438/how-to-join-two-tables-in-android-using-content-provider-query-method", "title": "how to join two tables in android using content provider query method?", "body": "<p>Im new to android I'm using content provider in my application, In my application I want to join two tables but I don't know how to do it, please help me find out solution</p>\n\n<p>my tables:</p>\n\n<pre><code>CREATE TABLE Bank_customers (customer_id varchar PRIMARY KEY ,\n    customer_name varchar,\n    customer_date_of_birth date,\n    address varchar,\n    mobile integer,\n    email varchar);\n\nCREATE TABLE Bank_accounts (account_number integer(11) PRIMARY KEY,\n    customer_id varchar ,\n    account_type text,\n    account_open_date date,\n    account_balance real,FOREIGN KEY(customer_id) REFERENCES Bank_customers(customer_id));\n\nmy query: **SELECT mobile,Bank_accounts.customer_id from Bank_accounts,Bank_customers WHERE Bank_customers.customer_id = Bank_accounts.customer_id and Bank_accounts.account_number = 13323;**\n</code></pre>\n\n<p>How I can implement above query using content provider class \"query method\"</p>\n"}, {"tags": ["android", "kotlin", "android-recyclerview"], "comments": [{"owner": {"reputation": 462, "user_id": 4582676, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kQ_JnGCo6bg/AAAAAAAAAAI/AAAAAAAAABo/bQhDxH-A0JY/photo.jpg?sz=128", "display_name": "Eduard Kornev", "link": "https://stackoverflow.com/users/4582676/eduard-kornev"}, "edited": false, "score": 0, "creation_date": 1505387220, "post_id": 46217375, "comment_id": 79397342, "body": "Bad solution to use two adapters. Try to use one adapter with grid layout manager. You can set different type of grid items as in linear adapters. Also in this case you&#39;ll decide your problem."}, {"owner": {"reputation": 783, "user_id": 4928762, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/66e21b4db70dc761977afc4cd4bb4042?s=128&d=identicon&r=PG&f=1", "display_name": "Siraj Sumra", "link": "https://stackoverflow.com/users/4928762/siraj-sumra"}, "reply_to_user": {"reputation": 462, "user_id": 4582676, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kQ_JnGCo6bg/AAAAAAAAAAI/AAAAAAAAABo/bQhDxH-A0JY/photo.jpg?sz=128", "display_name": "Eduard Kornev", "link": "https://stackoverflow.com/users/4582676/eduard-kornev"}, "edited": false, "score": 0, "creation_date": 1505392193, "post_id": 46217375, "comment_id": 79400818, "body": "@EduardKornev Can you provide any demo or something that how I can display linear items in Grid manager?"}, {"owner": {"reputation": 462, "user_id": 4582676, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kQ_JnGCo6bg/AAAAAAAAAAI/AAAAAAAAABo/bQhDxH-A0JY/photo.jpg?sz=128", "display_name": "Eduard Kornev", "link": "https://stackoverflow.com/users/4582676/eduard-kornev"}, "edited": false, "score": 0, "creation_date": 1505393513, "post_id": 46217375, "comment_id": 79401840, "body": "Try to explain you in answer"}], "answers": [{"tags": [], "owner": {"reputation": 462, "user_id": 4582676, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kQ_JnGCo6bg/AAAAAAAAAAI/AAAAAAAAABo/bQhDxH-A0JY/photo.jpg?sz=128", "display_name": "Eduard Kornev", "link": "https://stackoverflow.com/users/4582676/eduard-kornev"}, "is_accepted": false, "score": 0, "last_activity_date": 1505393473, "creation_date": 1505393473, "answer_id": 46219697, "question_id": 46217375, "link": "https://stackoverflow.com/questions/46217375/android-issue-in-selection-and-deselection-of-items-in-an-adapter-kotlin/46219697#46219697", "title": "Android issue in selection and deselection of items in an Adapter kotlin?", "body": "<p>Try to use one adapter with grid manager</p>\n\n<pre><code>GridLayoutManager gridLayoutManager = new GridLayoutManager(getAppContext(), 3); \ngridLayoutManager.setSpanSizeLookup(new GridLayoutManager.SpanSizeLookup() { \n        @Override\n        public int getSpanSize(int position) {\n        //define span size for this position\n        //for example, if you have 2 column per row, you can implement something like that:\n        if(position == youRule) {\n            return 3; // 3 item in row\n        } else {\n            return 1; // 1 item in row\n        }\n    }\n});\n</code></pre>\n\n<p>Also you should merge your two adapters in one. Unlike hashmap for your items, use sorted list item [header, time, time, time, header, time, time, time, etc]. Now you can simple check what item need to mark as selected.</p>\n"}], "owner": {"reputation": 783, "user_id": 4928762, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/66e21b4db70dc761977afc4cd4bb4042?s=128&d=identicon&r=PG&f=1", "display_name": "Siraj Sumra", "link": "https://stackoverflow.com/users/4928762/siraj-sumra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 773, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1505393473, "creation_date": 1505386915, "question_id": 46217375, "link": "https://stackoverflow.com/questions/46217375/android-issue-in-selection-and-deselection-of-items-in-an-adapter-kotlin", "title": "Android issue in selection and deselection of items in an Adapter kotlin?", "body": "<p>I am creating a view to display time in grouping manner. For that I grouped items in an hashmap and passed it to the activity. From my activity, I am initializing the parent adapter to display the list in Linear fashion. In that parent adapter there is another child adapter with times items which are displayed using gridLayout manager in grid fashion. </p>\n\n<p>The Image of the current scenario and the issue is as below:\n<a href=\"https://i.stack.imgur.com/j0PfV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/j0PfV.png\" alt=\"enter image description here\"></a></p>\n\n<p>Now the actual issue, I want to select only 1 time at a time. But as you see, different arraylist has different selections here. When I select 1 item from the same group, it works fine. But it is not deselecting other groups time. How can I achieve that?</p>\n\n<p>Parent Adapter:</p>\n\n<pre><code>class TimePickerAdapter(context: Context, arrTimeSlots: ArrayList&lt;ListItem&gt;) :\n    RecyclerView.Adapter&lt;RecyclerView.ViewHolder&gt;() {\n\nval mContext = context\nval mList = arrTimeSlots\n\noverride fun onCreateViewHolder(parent: ViewGroup?, viewType: Int): RecyclerView.ViewHolder {\n    return if (viewType == ListItem.TYPE_HEADER) {\n        TimeHeaderHolder(LayoutInflater.from(parent?.context).\n                inflate(R.layout.item_time_group, parent, false))\n    } else {\n        TimeSlotsHolder(LayoutInflater.from(parent?.context).\n                inflate(R.layout.item_time_child, parent, false))\n    }\n}\n\noverride fun getItemCount() = mList.size\n\noverride fun getItemViewType(position: Int): Int {\n    return mList[position].type\n}\n\noverride fun onBindViewHolder(holder: RecyclerView.ViewHolder?, position: Int) {\n    if (holder is TimeHeaderHolder) {\n        holder.itemView?.apply {\n            with(mList[position] as TimeHeaderItem) {\n                tvTimeGroupHeader.text = date\n            }\n        }\n    } else {\n        holder?.itemView?.apply {\n            with(mList[position] as TimeSlotItem) {\n                val mAdapter = TimeSlotsAdapter(mContext, pojoOfTimeSlots)\n                rvTimeSlotsChild.layoutManager = GridLayoutManager(mContext, 3)\n                rvTimeSlotsChild.adapter = mAdapter\n            }\n        }\n    }\n}\n\ninner class TimeHeaderHolder(itemView: View) : RecyclerView.ViewHolder(itemView)\n\ninner class TimeSlotsHolder(itemView: View) : RecyclerView.ViewHolder(itemView)\n</code></pre>\n\n<p>}</p>\n\n<p>My child Timeslots adapter -> In this adapter, I have written a code to select deselect time. But it is happening for the same group only.</p>\n\n<pre><code>class TimeSlotsAdapter(context: Context, arrTimeSlots: List&lt;TimeSlots&gt;?) :\n    RecyclerView.Adapter&lt;RecyclerView.ViewHolder&gt;() {\n\nval mContext = context\nval mList = arrTimeSlots!!\n\noverride fun onCreateViewHolder(parent: ViewGroup?, viewType: Int): RecyclerView.ViewHolder {\n    return TimePickerHolder(LayoutInflater.from(parent?.context).\n            inflate(R.layout.item_time_picker, parent, false))\n}\n\noverride fun getItemCount() = mList.size\n\noverride fun onBindViewHolder(holder: RecyclerView.ViewHolder?, position: Int) {\n    holder?.itemView?.apply {\n        with(mList[position]) {\n            tvTimeView.text = convertedTime\n            if (isSelected) {\n                tvTimeView.background = ContextCompat.getDrawable(context,\n                        R.drawable.time_rounded_corner_selected)\n                tvTimeView.setTextColor(ContextCompat.getColor(context, R.color.white))\n            } else {\n                tvTimeView.background = ContextCompat.getDrawable(context,\n                        R.drawable.time_rounded_corner)\n                tvTimeView.setTextColor(ContextCompat.getColor(context, R.color.grey_text_7))\n            }\n        }\n    }\n}\n\ninner class TimePickerHolder(itemView: View) : RecyclerView.ViewHolder(itemView) {\n    init {\n        itemView.setOnClickListener {\n            for (i in mList.indices) {\n                mList[i].isSelected = false\n            }\n            mList[adapterPosition].isSelected = true\n            notifyDataSetChanged()\n\n        }\n    }\n}\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["react-native", "kotlin", "react-native-android"], "answers": [{"tags": [], "owner": {"reputation": 1224, "user_id": 1922473, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MSMhN.jpg?s=128&g=1", "display_name": "Dharmendra Pratap Singh", "link": "https://stackoverflow.com/users/1922473/dharmendra-pratap-singh"}, "is_accepted": false, "score": 1, "last_activity_date": 1511613187, "creation_date": 1511613187, "answer_id": 47486023, "question_id": 46216452, "link": "https://stackoverflow.com/questions/46216452/writing-react-native-android-module-in-kotlin/47486023#47486023", "title": "Writing react native android module in Kotlin?", "body": "<p>Writing plugin in <strong>java</strong> or <strong>kotlin</strong> doesn't have a big difference as both compile to bytecode.</p>\n\n<p>Mentioning the Github Sample that has created the same sample <strong>Taost moduel in kotlin</strong>.</p>\n\n<p><a href=\"https://github.com/ios122/kotlin-module-sample-for-reactnative\" rel=\"nofollow noreferrer\">https://github.com/ios122/kotlin-module-sample-for-reactnative</a></p>\n"}, {"tags": [], "owner": {"reputation": 11933, "user_id": 471744, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/GDzVT.jpg?s=128&g=1", "display_name": "spierce7", "link": "https://stackoverflow.com/users/471744/spierce7"}, "is_accepted": false, "score": 1, "last_activity_date": 1516717103, "creation_date": 1516717103, "answer_id": 48403930, "question_id": 46216452, "link": "https://stackoverflow.com/questions/46216452/writing-react-native-android-module-in-kotlin/48403930#48403930", "title": "Writing react native android module in Kotlin?", "body": "<p>Here is a sample with instructions of a react-native application written with Kotlin. Follow the README. <a href=\"https://github.com/ScottPierce/kotlin-react-native\" rel=\"nofollow noreferrer\">https://github.com/ScottPierce/kotlin-react-native</a></p>\n"}, {"tags": [], "owner": {"reputation": 1397, "user_id": 10199138, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-B3EYIaWV1xY/AAAAAAAAAAI/AAAAAAAABPk/MlOok2YSU5I/photo.jpg?sz=128", "display_name": "MJ Studio", "link": "https://stackoverflow.com/users/10199138/mj-studio"}, "is_accepted": false, "score": 0, "last_activity_date": 1598421448, "creation_date": 1598421448, "answer_id": 63591312, "question_id": 46216452, "link": "https://stackoverflow.com/questions/46216452/writing-react-native-android-module-in-kotlin/63591312#63591312", "title": "Writing react native android module in Kotlin?", "body": "<p>I created a simple <code>Kotlin</code>, <code>Swift</code> native module example.\n<a href=\"https://github.com/mym0404/react-native-native-module-example\" rel=\"nofollow noreferrer\">Check Github</a>.</p>\n<p>Questions or feedbacks are welcome.</p>\n"}], "owner": {"reputation": 900, "user_id": 5477257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e87b9c5be8f7fbfafb2eb1724ddeeb2d?s=128&d=identicon&r=PG&f=1", "display_name": "Amin Roosta", "link": "https://stackoverflow.com/users/5477257/amin-roosta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2483, "favorite_count": 1, "answer_count": 3, "score": 5, "last_activity_date": 1598421448, "creation_date": 1505384225, "last_edit_date": 1511640462, "question_id": 46216452, "link": "https://stackoverflow.com/questions/46216452/writing-react-native-android-module-in-kotlin", "title": "Writing react native android module in Kotlin?", "body": "<p>React native documentation provides a <a href=\"https://facebook.github.io/react-native/docs/native-modules-android.html\" rel=\"noreferrer\">Toast Module</a> example written in java.</p>\n\n<p>What does the same example look like in Kotin?<br>\nIs there any special steps to configure the android project?</p>\n"}, {"tags": ["android", "firebase", "firebase-authentication", "kotlin", "google-signin"], "comments": [{"owner": {"reputation": 1065, "user_id": 8606263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pa1B9.png?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/8606263/alex"}, "edited": false, "score": 0, "creation_date": 1505386533, "post_id": 46215461, "comment_id": 79396924, "body": "Do you have any other processes that is still running while you&#39;re trying to signOut() the user ? It seems like it might be the problem here"}, {"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1505407606, "post_id": 46215461, "comment_id": 79412039, "body": "Could you show your code that listens to the Task?  Are you absolutely certain that this didn&#39;t happen in 11.2.0?"}], "answers": [{"comments": [{"owner": {"reputation": 2129, "user_id": 1336154, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/ajJUC.jpg?s=128&g=1", "display_name": "Rinav", "link": "https://stackoverflow.com/users/1336154/rinav"}, "edited": false, "score": 1, "creation_date": 1505387909, "post_id": 46217048, "comment_id": 79397748, "body": "I am calling signUpRequest method from addOnCompleteListener with condition if (task.isSuccessful) { }"}, {"owner": {"reputation": 462, "user_id": 4582676, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kQ_JnGCo6bg/AAAAAAAAAAI/AAAAAAAAABo/bQhDxH-A0JY/photo.jpg?sz=128", "display_name": "Eduard Kornev", "link": "https://stackoverflow.com/users/4582676/eduard-kornev"}, "reply_to_user": {"reputation": 2129, "user_id": 1336154, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/ajJUC.jpg?s=128&g=1", "display_name": "Rinav", "link": "https://stackoverflow.com/users/1336154/rinav"}, "edited": false, "score": 0, "creation_date": 1505388815, "post_id": 46217048, "comment_id": 79398361, "body": "@Rinav Try to use addOnSuccessListener(). Cause it call when you receive result, otherwise addOnCompleteListener call when task complete, but not completed"}, {"owner": {"reputation": 467, "user_id": 5078003, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-uQdeXK6c8B8/AAAAAAAAAAI/AAAAAAAAABE/Wns6jcgLXrU/photo.jpg?sz=128", "display_name": "Srini", "link": "https://stackoverflow.com/users/5078003/srini"}, "edited": false, "score": 1, "creation_date": 1522669563, "post_id": 46217048, "comment_id": 86227740, "body": "@Eduard How do I keep my application <i>wait</i> till I receive successful result,Currently I am using FusedLocationProviderClient"}, {"owner": {"reputation": 2964, "user_id": 2769917, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/78c9b4e2e2a18d5c74468629bcd1c3ec?s=128&d=identicon&r=PG&f=1", "display_name": "Asif Mushtaq", "link": "https://stackoverflow.com/users/2769917/asif-mushtaq"}, "edited": false, "score": 0, "creation_date": 1529582503, "post_id": 46217048, "comment_id": 88932372, "body": "What if I need to get result on offline? or listen that data is added offline?"}], "tags": [], "owner": {"reputation": 462, "user_id": 4582676, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kQ_JnGCo6bg/AAAAAAAAAAI/AAAAAAAAABo/bQhDxH-A0JY/photo.jpg?sz=128", "display_name": "Eduard Kornev", "link": "https://stackoverflow.com/users/4582676/eduard-kornev"}, "is_accepted": false, "score": 11, "last_activity_date": 1536586788, "last_edit_date": 1536586788, "creation_date": 1505386059, "answer_id": 46217048, "question_id": 46215461, "link": "https://stackoverflow.com/questions/46215461/firebase-task-is-not-yet-complete/46217048#46217048", "title": "Firebase Task is not yet complete", "body": "<p>Try to receive result asynchronously (through <code>.addOnSuccessListener{...}</code>) or check flag <code>isSuccessful</code> from <code>Task</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 171, "user_id": 11142666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5265f7c419e17c16f48e55460902727f?s=128&d=identicon&r=PG&f=1", "display_name": "Vijayendra Vasu", "link": "https://stackoverflow.com/users/11142666/vijayendra-vasu"}, "is_accepted": false, "score": 6, "last_activity_date": 1585377059, "creation_date": 1585377059, "answer_id": 60898003, "question_id": 46215461, "link": "https://stackoverflow.com/questions/46215461/firebase-task-is-not-yet-complete/60898003#60898003", "title": "Firebase Task is not yet complete", "body": "<p>I tried the answers above but implementing <code>OnSuccessListener</code> or <code>OnCompleteListener</code> doesn't give my calling thread a way to wait until the task is complete. <code>task.getResult</code> is supposed to wait, but for some reason, it was sporadially exiting with the exception above.</p>\n\n<p>Finally, the code below seems to have fixed it:</p>\n\n<pre><code>tokenTask = firebaseUser.getIdToken(false);\nTasks.await(tokenTask);\n@NotNull GetTokenResult tokenResult = Objects.requireNonNull(tokenTask.getResult());\n</code></pre>\n\n<p>In short, I am explicitly waiting for the task to complete and then calling <code>task.getResult</code>. Only calling <code>Tasks.await(tokenTask)</code> without calling <code>task.getResult</code> does not seem to work either, as <code>Tasks.await(tokenTask)</code> somehow seems to exit before the task is complete. I am not sure why calling both is working.</p>\n\n<p>By the way, putting a breakpoint in the debugger causes the code to work because it gives the task time to complete, so this is a bit hard to debug.  </p>\n"}, {"comments": [{"owner": {"reputation": 455, "user_id": 12835918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92541530c12ecf581b1814a5bb686a14?s=128&d=identicon&r=PG&f=1", "display_name": "PenguinDan", "link": "https://stackoverflow.com/users/12835918/penguindan"}, "edited": false, "score": 1, "creation_date": 1594591522, "post_id": 61840731, "comment_id": 111171860, "body": "Usually I wouldn&#39;t download a library just to solve a simple problem but the lib is SO lightweight that I don&#39;t see why not. Great answer!"}], "tags": [], "owner": {"reputation": 7554, "user_id": 700471, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/ebb4cc58c1fce4f22abc59a1226ee8e2?s=128&d=identicon&r=PG", "display_name": "Matt Mc", "link": "https://stackoverflow.com/users/700471/matt-mc"}, "is_accepted": false, "score": 3, "last_activity_date": 1589649462, "creation_date": 1589649462, "answer_id": 61840731, "question_id": 46215461, "link": "https://stackoverflow.com/questions/46215461/firebase-task-is-not-yet-complete/61840731#61840731", "title": "Firebase Task is not yet complete", "body": "<p>I solved this using the <a href=\"https://github.com/Kotlin/kotlinx.coroutines/tree/master/integration/kotlinx-coroutines-play-services\" rel=\"nofollow noreferrer\">Kotlin+Coroutine extensions for Google Play Services</a>:</p>\n\n<pre><code>// gradle\ndependencies {\n    implementation 'org.jetbrains.kotlinx:kotlinx-coroutines-play-services:1.3.6'\n}\n</code></pre>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>// code\nval token = user.getIdToken(true).await().token\n</code></pre>\n"}], "owner": {"reputation": 2129, "user_id": 1336154, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/ajJUC.jpg?s=128&g=1", "display_name": "Rinav", "link": "https://stackoverflow.com/users/1336154/rinav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11855, "favorite_count": 2, "answer_count": 3, "score": 10, "last_activity_date": 1589649462, "creation_date": 1505381526, "last_edit_date": 1505381856, "question_id": 46215461, "link": "https://stackoverflow.com/questions/46215461/firebase-task-is-not-yet-complete", "title": "Firebase Task is not yet complete", "body": "<p>I am getting following exception randomly after signing out of Firebase using <code>FirebaseAuth.getInstance().signOut();</code> and signing in again</p>\n\n<p>I am trying to get the token from FirebaseUser after the user is successfully authenticated\n<code>signUpRequest.firebaseToken = user.getIdToken(true).result?.token</code></p>\n\n<p>user is the FirebaseUser received after authentication</p>\n\n<pre><code>E/AndroidRuntime: FATAL EXCEPTION: main\n   Process: agrahyah.keen, PID: 12082\n   java.lang.IllegalStateException: Task is not yet complete \n       at com.google.android.gms.common.internal.zzbp.zza(Unknown Source)\n       at com.google.android.gms.tasks.zzn.zzbic(Unknown Source)\n       at com.google.android.gms.tasks.zzn.getResult(Unknown Source)\n       at com.xxxActivity.makeSignUpRequest(xxxActivity.kt:129)\n       at com.xxxActivity.access$makeSignUpRequest(xxxActivity.kt:36)\n       at com.xxxActivity$signInAnonymously$1.onComplete(xxxActivity.kt:94)\n       at com.google.android.gms.tasks.zzf.run(Unknown Source)\n       at android.os.Handler.handleCallback(Handler.java:751)\n       at android.os.Handler.dispatchMessage(Handler.java:95)\n       at android.os.Looper.loop(Looper.java:154)\n       at android.app.ActivityThread.main(ActivityThread.java:6077)\n       at java.lang.reflect.Method.invoke(Native Method)\n       at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)\n       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:756)\n</code></pre>\n\n<p>I am using Firebase android sdk version <code>11.2.2</code>. This error never occured on previous versions of the Firebase SDK</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 28036, "user_id": 4826457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXT0U.jpg?s=128&g=1", "display_name": "Suraj Rao", "link": "https://stackoverflow.com/users/4826457/suraj-rao"}, "edited": false, "score": 1, "creation_date": 1505372710, "post_id": 46212581, "comment_id": 79388109, "body": "Its an array index.. always start from 0"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 4, "creation_date": 1505372863, "post_id": 46212581, "comment_id": 79388193, "body": "Out of interest, do you program in any other languages? For me, kotlin seems like an odd first choice."}, {"owner": {"reputation": 1453, "user_id": 2141659, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfmvC.jpg?s=128&g=1", "display_name": "innov8", "link": "https://stackoverflow.com/users/2141659/innov8"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1505386886, "post_id": 46212581, "comment_id": 79397154, "body": "@Bathsheba, curious as to why do feel Kotlin is an odd first choice?"}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 5, "last_activity_date": 1505372809, "creation_date": 1505372809, "answer_id": 46212634, "question_id": 46212581, "link": "https://stackoverflow.com/questions/46212581/why-does-the-var-i-begin-with-0-in-kotlin/46212634#46212634", "title": "Why does the var i begin with 0 in Kotlin?", "body": "<p>Arrays in Kotlin (like many languages including C, C++, C#, and Java) all use <em>zero based arrays</em>. This means the the first element is at position 0.</p>\n\n<p>(Cf. Fortran where arrays are 1-based).</p>\n"}, {"tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": true, "score": 6, "last_activity_date": 1505373803, "last_edit_date": 1505373803, "creation_date": 1505372819, "answer_id": 46212639, "question_id": 46212581, "link": "https://stackoverflow.com/questions/46212581/why-does-the-var-i-begin-with-0-in-kotlin/46212639#46212639", "title": "Why does the var i begin with 0 in Kotlin?", "body": "<p>The constructor you're using looks like this:</p>\n\n<pre><code> /**\n * Creates a new array with the specified [size], where each element is calculated by calling the specified\n * [init] function. The [init] function returns an array element given its index.\n */\npublic inline constructor(size: Int, init: (Int) -&gt; T)\n</code></pre>\n\n<p>It takes the index which <strong>starts at <code>0</code></strong> for an array, thus <code>{ i -&gt; (i * i).toString() }</code> with <code>0</code> as an argument results in <code>0</code>.</p>\n\n<p>You can check it with this code if there's any doubt:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    val func: (Int) -&gt; (String) = { i -&gt; (i * i).toString() }\n    println(func(0))\n}\n</code></pre>\n"}], "owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 46212639, "answer_count": 2, "score": 4, "last_activity_date": 1505373803, "creation_date": 1505372615, "question_id": 46212581, "link": "https://stackoverflow.com/questions/46212581/why-does-the-var-i-begin-with-0-in-kotlin", "title": "Why does the var i begin with 0 in Kotlin?", "body": "<p>I read a sample code <code>val asc = Array(5, { i -&gt; (i * i).toString() })</code> .</p>\n\n<p>The result is <code>[\"0\", \"1\", \"4\", \"9\", \"16\"]</code>.</p>\n\n<p>But I'm very strange why the var i begin with 0 in expression <code>{ i -&gt; (i * i).toString() }</code></p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 69545, "user_id": 3395198, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/CJtaZ.jpg?s=128&g=1", "display_name": "IntelliJ Amiya", "link": "https://stackoverflow.com/users/3395198/intellij-amiya"}, "edited": false, "score": 0, "creation_date": 1505367589, "post_id": 46211318, "comment_id": 79385561, "body": "<a href=\"https://kotlinlang.org/docs/reference/compiler-plugins.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/compiler-plugins.html</a>"}, {"owner": {"reputation": 69545, "user_id": 3395198, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/CJtaZ.jpg?s=128&g=1", "display_name": "IntelliJ Amiya", "link": "https://stackoverflow.com/users/3395198/intellij-amiya"}, "edited": false, "score": 0, "creation_date": 1505367618, "post_id": 46211318, "comment_id": 79385567, "body": "use <code>1.1.4-3</code> version ."}], "owner": {"reputation": 111, "user_id": 5757574, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aGpDiKHVvpQ/AAAAAAAAAAI/AAAAAAAAAyI/vSBK8KrLOLU/photo.jpg?sz=128", "display_name": "Subaharan Vel", "link": "https://stackoverflow.com/users/5757574/subaharan-vel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1878, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1505367972, "creation_date": 1505367506, "last_edit_date": 1505367972, "question_id": 46211318, "link": "https://stackoverflow.com/questions/46211318/could-not-find-kotlin-reflect-jar-org-jetbrains-kotlinkotlin-reflect1-1-3-2", "title": "Could not find kotlin-reflect.jar (org.jetbrains.kotlin:kotlin-reflect:1.1.3-2) in android studio 3.0", "body": "<p>I have downloaded Android Studio 3.0 have built my project, I got this error, how to fix that?</p>\n\n<p><code>Could not find kotlin-reflect.jar (org.jetbrains.kotlin:kotlin-reflect:1.1.3-2).</code> </p>\n\n<p>Searched in the following locations: <strong>file:/Applications/Android Studio 3.0 Preview.app/Contents/gradle/m2repository/org/jetbrains/kotlin/kotlin-reflect/1.1.3-2/kotlin-reflect-1.1.3-2.jar</strong></p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 4677, "user_id": 3673259, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/DPHO1.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3673259/joshua"}, "edited": false, "score": 0, "creation_date": 1505361539, "post_id": 46210069, "comment_id": 79383621, "body": "Marker interface is the only way to achieve that. For class that you does not have access (e.g. int) you can box it yourself."}, {"owner": {"reputation": 3852, "user_id": 7079453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f35f4fd1c0eaa060ffdc533c89b481e9?s=128&d=identicon&r=PG&f=1", "display_name": "F. George", "link": "https://stackoverflow.com/users/7079453/f-george"}, "edited": false, "score": 1, "creation_date": 1505370888, "post_id": 46210069, "comment_id": 79387036, "body": "Self deleted my answer as edit 2 invalidates it."}, {"owner": {"reputation": 4427, "user_id": 4706743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64b05c3b09628ba8955d6d7a188271af?s=128&d=identicon&r=PG&f=1", "display_name": "D3xter", "link": "https://stackoverflow.com/users/4706743/d3xter"}, "edited": false, "score": 0, "creation_date": 1505374153, "post_id": 46210069, "comment_id": 79388889, "body": "Can you elaborate a bit more? Is <i>doSomething</i> a method of a library you call? or does a library call your <i>doSomething</i>?"}, {"owner": {"reputation": 1025, "user_id": 2117581, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/12a3f80cf27cdbdd6bb38e5088ada257?s=128&d=identicon&r=PG", "display_name": "pleasedesktop", "link": "https://stackoverflow.com/users/2117581/pleasedesktop"}, "reply_to_user": {"reputation": 4427, "user_id": 4706743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64b05c3b09628ba8955d6d7a188271af?s=128&d=identicon&r=PG&f=1", "display_name": "D3xter", "link": "https://stackoverflow.com/users/4706743/d3xter"}, "edited": false, "score": 0, "creation_date": 1505380235, "post_id": 46210069, "comment_id": 79392579, "body": "@D3xter A library I call, e.g. Kotson&#39;s <code>jsonObject()</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1025, "user_id": 2117581, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/12a3f80cf27cdbdd6bb38e5088ada257?s=128&d=identicon&r=PG", "display_name": "pleasedesktop", "link": "https://stackoverflow.com/users/2117581/pleasedesktop"}, "edited": false, "score": 0, "creation_date": 1505433506, "post_id": 46222720, "comment_id": 79423497, "body": "Your <code>Foo</code> extension overloads won&#39;t compile because you haven&#39;t annotated them with different JVM names. As for your <code>.asJSONItem()</code> approach, that&#39;s not bad. I was just wondering whether the language could handle this without repeated boilerplate and it seems like it currently cannot."}], "tags": [], "owner": {"reputation": 4427, "user_id": 4706743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64b05c3b09628ba8955d6d7a188271af?s=128&d=identicon&r=PG&f=1", "display_name": "D3xter", "link": "https://stackoverflow.com/users/4706743/d3xter"}, "is_accepted": false, "score": 3, "last_activity_date": 1505473410, "last_edit_date": 1505473410, "creation_date": 1505401952, "answer_id": 46222720, "question_id": 46210069, "link": "https://stackoverflow.com/questions/46210069/can-we-achieve-compile-time-type-safety-for-a-union-of-types-we-cant-control/46222720#46222720", "title": "Can we achieve compile-time type safety for a union of types we can&#39;t control?", "body": "<p>So to sum it quickly up:</p>\n\n<p>You want to call methods from a library that expects <code>Pair&lt;String, *&gt;</code>,\nbut limit the possible values that <code>*</code> can be.</p>\n\n<p>TL;DR: What you are trying to accomplish is not possible without some kind of wrapper, because</p>\n\n<ol>\n<li>We have no Sum-Types in Kotlin, so no way to tell the compiler that you expect an Int or a Double or a Float and nothing else</li>\n<li>If a library-method expects something to be <code>Pair&lt;String, *&gt;</code>, there is no way for us to tell the compiler, that we just want to be able to give it a <code>String</code> instead of <code>*</code></li>\n</ol>\n\n<p>One way to get that behaviour is to create a Decorator (<a href=\"https://en.wikipedia.org/wiki/Decorator_pattern\" rel=\"nofollow noreferrer\">Decorator Pattern</a>), e.g. create your own extension methods that allow only a subset</p>\n\n<pre><code>class Foo {\n    //Allows everything\n    fun doSomething(param: Pair&lt;String, *&gt;)\n}\n\n//Now lets create our own extension methods\nfun Foo.doSomethingWithInt(param: Pair&lt;String, Int&gt;)\n\nfun Foo.doSomethingWithBoolean(param: Pair&lt;String, Boolean&gt;)\n\nfun Foo.doSomethingWithString(param: Pair&lt;String, String&gt;)\n</code></pre>\n\n<p>Or if you dont want to be able to call <code>Foo.doSomething()</code> you\ncan create a Decoractor-Class:</p>\n\n<pre><code>class FooDecorator {\n    val foo = Foo()\n\n    fun doSomething(param: Pair&lt;String, Int&gt;) { }\n}\n</code></pre>\n\n<p>And the following example is not possible without some kind of Wrapper, because there are no Sum-Types in Kotlin:</p>\n\n<pre><code>doSomething(\n    \"key1\" to false,\n    \"key2\" to \"value2\",\n    \"key3\" to 86\n)\n</code></pre>\n\n<p>What you could do is something like:</p>\n\n<p>At first, create your own <code>JSONItem</code> type and add Extension-Methods to Types that can be used as one</p>\n\n<pre><code>class JSONItem&lt;T&gt; private constructor (item: T)\n\nfun Int.asJSONItem() = JSONItem(this)\n\nfun String.asJSONItem() = JSONItem(this)\n\nfun Boolean.asJSONItem() = JSONItem(this)\n</code></pre>\n\n<p>Then you are able to do something like that:</p>\n\n<pre><code>//Your own personal doSomething\nfun doSomething(varargs: param: Pair&lt;String, JSONItem&gt;) { \n    //Call the real doSomething()\n    doSomething(param.map { Pair(it.first, it.second.item) }}\n}\n\ndoSomething(\n    \"key1\" to false.asJSONItem(),\n    \"key2\" to \"value2\".asJSONItem(),\n    \"key3\" to 86.asJSONItem()\n)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1025, "user_id": 2117581, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/12a3f80cf27cdbdd6bb38e5088ada257?s=128&d=identicon&r=PG", "display_name": "pleasedesktop", "link": "https://stackoverflow.com/users/2117581/pleasedesktop"}, "is_accepted": false, "score": 0, "last_activity_date": 1505434884, "creation_date": 1505434884, "answer_id": 46229939, "question_id": 46210069, "link": "https://stackoverflow.com/questions/46210069/can-we-achieve-compile-time-type-safety-for-a-union-of-types-we-cant-control/46229939#46229939", "title": "Can we achieve compile-time type safety for a union of types we can&#39;t control?", "body": "<p>Denotable union and intersection types are not currently supported in Kotlin (as of 1.1.x).</p>\n\n<p><a href=\"https://youtrack.jetbrains.com/issue/KT-13108\" rel=\"nofollow noreferrer\">This</a> is the relevant issue.</p>\n"}], "owner": {"reputation": 1025, "user_id": 2117581, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/12a3f80cf27cdbdd6bb38e5088ada257?s=128&d=identicon&r=PG", "display_name": "pleasedesktop", "link": "https://stackoverflow.com/users/2117581/pleasedesktop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 257, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1505473410, "creation_date": 1505359823, "last_edit_date": 1505366228, "question_id": 46210069, "link": "https://stackoverflow.com/questions/46210069/can-we-achieve-compile-time-type-safety-for-a-union-of-types-we-cant-control", "title": "Can we achieve compile-time type safety for a union of types we can&#39;t control?", "body": "<p>Let's say I have a function:</p>\n\n<pre><code>fun doSomething(vararg pairs: Pair&lt;String, *&gt;) {\n    // Do things with the pairs\n}\n</code></pre>\n\n<p>The problem with this approach is that it allows any type for the second half of <code>Pair</code> (e.g. <code>Pair&lt;String, CustomType1&gt;</code>).</p>\n\n<p>What if I only want to allow a finite number of types, how would I achieve that?</p>\n\n<p>If the function had a simpler signature, I could achieve the restriction via overload, like so:</p>\n\n<pre><code>fun doSomethingSimpler(param: Boolean) {\n    // Boolean implementation\n}\n\nfun doSomethingSimpler(param: Int) {\n    // Int implementation\n}\n\n// etc.\n</code></pre>\n\n<p>If the restricted type \"set\" was in my control, I could use an interface or a sealed class to achieve this. E.g.</p>\n\n<pre><code>sealed class Root\nclass Child1 : Root()\nclass Child2 : Root()\n\nfun doSomethingICanControl(param: Root) {\n    // Root implementation\n}\n</code></pre>\n\n<p>Yet what if I don't have control over the types or they are primitive, how do I prevent <code>*</code> from allowing everything through?</p>\n\n<p>I know I could use smart-casts to get run-time safety, but can this be done at compile time? </p>\n\n<p>Or does the language disallow it?</p>\n\n<p><strong>Edit 1</strong></p>\n\n<p>I know I could create my own box types (e.g. <code>MyBoolean</code>) and use a common interface or sealed class, but that would be boilerplate that everyone would have to write every time they needed to.</p>\n\n<p><strong>Edit 2</strong></p>\n\n<p>To be clear, I'd like to be able to make an invocation like so:</p>\n\n<pre><code>doSomething(\n    \"key1\" to false,\n    \"key2\" to \"value2\",\n    \"key3\" to 86\n)\n</code></pre>\n\n<p>... I.e. Have a mixed set of \"second\" (of <code>Pair</code>) types.</p>\n"}, {"tags": ["logging", "kotlin", "log4j2"], "answers": [{"tags": [], "owner": {"reputation": 4677, "user_id": 3673259, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/DPHO1.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3673259/joshua"}, "is_accepted": false, "score": 2, "last_activity_date": 1505361996, "creation_date": 1505361996, "answer_id": 46210347, "question_id": 46208685, "link": "https://stackoverflow.com/questions/46208685/encapsulating-getting-the-methods-name-in-a-helper-method/46210347#46210347", "title": "Encapsulating getting the method&#39;s name in a helper method", "body": "<p>You can create a function at file level.</p>\n\n<pre><code>fun getMethodName(): String =\n    Thread.currentThread().stackTrace[1].methodName\n\nclass Foo {\n    ...\n}\n</code></pre>\n\n<p>By adjusting the <code>stackTrace</code> number, you can get the level you want.</p>\n"}, {"tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": true, "score": 1, "last_activity_date": 1505370456, "last_edit_date": 1505370456, "creation_date": 1505368358, "answer_id": 46211510, "question_id": 46208685, "link": "https://stackoverflow.com/questions/46208685/encapsulating-getting-the-methods-name-in-a-helper-method/46211510#46211510", "title": "Encapsulating getting the method&#39;s name in a helper method", "body": "<p>You could define an extension function on Thread which gives you the first method on the stack:</p>\n\n<pre><code>fun Thread.firstStackMethod() = stackTrace[1].methodName\n</code></pre>\n\n<p>Call it like this then:</p>\n\n<pre><code>LOG.debug(Thread.currentThread().firstStackMethod())\n</code></pre>\n\n<p>Maybe it's even a good alternative for you to extend the Logger directly:</p>\n\n<pre><code>fun Logger.debugMethodName(t: Thread) = debug(t.stackTrace[1].methodName)\n//use\nLOG.debugMethodName(Thread.currentThread())\n</code></pre>\n"}], "owner": {"reputation": 1802, "user_id": 1045902, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cae064ef599158ab518d569351fcb650?s=128&d=identicon&r=PG", "display_name": "DPM", "link": "https://stackoverflow.com/users/1045902/dpm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 46211510, "answer_count": 2, "score": 0, "last_activity_date": 1505370456, "creation_date": 1505348715, "question_id": 46208685, "link": "https://stackoverflow.com/questions/46208685/encapsulating-getting-the-methods-name-in-a-helper-method", "title": "Encapsulating getting the method&#39;s name in a helper method", "body": "<p>For debugging purposes there's a part of my code in which I want to log the name of a method, like this:</p>\n\n<pre><code>val LOG = LogManager.getLogger(SomeClass::class.java.name)\n//...\nfun someMethod() {\n   LOG.debug(Thread.currentThread().getStackTrace()[1].getMethodName())\n</code></pre>\n\n<p>How can I have this as a minimal but legible expression? Something like:</p>\n\n<pre><code>LOG.debug(getMethodName())\n</code></pre>\n\n<p>By the way, I tried using AspectJ for this but I'm using Eclipse and the Kotlin plugin works with 1.1.1. AspectJ would require KAPT (as far as I know) which doesn't work with maven (which I'm also using) for 1.1.1.</p>\n"}, {"tags": ["kotlin", "ktor"], "answers": [{"tags": [], "owner": {"reputation": 10942, "user_id": 18575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/318654a786700455b96049d8ac9beb11?s=128&d=identicon&r=PG", "display_name": "Ilya Ryzhenkov", "link": "https://stackoverflow.com/users/18575/ilya-ryzhenkov"}, "is_accepted": true, "score": 4, "last_activity_date": 1505376558, "creation_date": 1505376558, "answer_id": 46213784, "question_id": 46208543, "link": "https://stackoverflow.com/questions/46208543/how-can-we-use-automatic-reloading/46213784#46213784", "title": "How can we use automatic reloading?", "body": "<p>Lambda might have a captured state from containing function and thus cannot be reloaded \u2013\u00a0there is no way to restore the captured state. You have to extract application into a separate function like this:</p>\n\n<pre><code>fun Application.module() {\n   install(CallLogging)\n   install(Routing) {\n      get(\"/\") {\n        call.respondText(\"\"\"Hello, world!&lt;br&gt;&lt;a href=\"/bye\"&gt;Say bye?&lt;/a&gt;\"\"\", ContentType.Text.Html)\n      }\n    \u2026\n   }\n}\n</code></pre>\n\n<p>And then start it with function reference:</p>\n\n<pre><code>embeddedServer(Jetty, watchPaths = listOf(\"embedded\"), module = Application::module).start()\n</code></pre>\n"}], "owner": {"reputation": 1025, "user_id": 2117581, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/12a3f80cf27cdbdd6bb38e5088ada257?s=128&d=identicon&r=PG", "display_name": "pleasedesktop", "link": "https://stackoverflow.com/users/2117581/pleasedesktop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1573, "favorite_count": 1, "accepted_answer_id": 46213784, "answer_count": 1, "score": 4, "last_activity_date": 1505376558, "creation_date": 1505347574, "question_id": 46208543, "link": "https://stackoverflow.com/questions/46208543/how-can-we-use-automatic-reloading", "title": "How can we use automatic reloading?", "body": "<p>Trying to utilise the automatic module reloading feature (as described <a href=\"http://ktor.io/application/autoreload.html\" rel=\"nofollow noreferrer\">here</a>), but the documentation is unfortunately not too helpful.</p>\n\n<p>It says to use configuration, but the configuration <a href=\"http://ktor.io/application/configuration.html\" rel=\"nofollow noreferrer\">page</a> is empty.</p>\n\n<p>I believe you can pass in the \"watch\" list of modules into the <code>embeddedServer()</code> call from <a href=\"http://ktor.io/getting-started.html\" rel=\"nofollow noreferrer\">this page</a>, but when I do, I get the following exception: <code>Module function provided as lambda cannot be unlinked for reload</code>.</p>\n\n<p>So it won't let you pass in a lambda as an application module, but then I'm not sure how to avoid doing that while getting access to the <code>Application</code> methods (e.g. <code>routing()</code>).</p>\n\n<p>Has anyone been able to get automatic reloading working lately?\nIf so, how?</p>\n"}]