[{"tags": ["android", "image", "kotlin", "android-sqlite"], "comments": [{"owner": {"reputation": 464, "user_id": 11598177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nl2uJ.jpg?s=128&g=1", "display_name": "L2_Paver", "link": "https://stackoverflow.com/users/11598177/l2-paver"}, "edited": false, "score": 1, "creation_date": 1571876989, "post_id": 58532216, "comment_id": 103388654, "body": "first you get the bitmap of your image then convert it to byte[]"}, {"owner": {"reputation": 146, "user_id": 11354766, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WqdQ96RoT9c/AAAAAAAAAAI/AAAAAAAAEfw/HVtSTT5f784/photo.jpg?sz=128", "display_name": "Sanush", "link": "https://stackoverflow.com/users/11354766/sanush"}, "reply_to_user": {"reputation": 464, "user_id": 11598177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nl2uJ.jpg?s=128&g=1", "display_name": "L2_Paver", "link": "https://stackoverflow.com/users/11598177/l2-paver"}, "edited": false, "score": 0, "creation_date": 1572005311, "post_id": 58532216, "comment_id": 103435573, "body": "can u send me the code for that conversion? I tried several methods but not working."}, {"owner": {"reputation": 464, "user_id": 11598177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nl2uJ.jpg?s=128&g=1", "display_name": "L2_Paver", "link": "https://stackoverflow.com/users/11598177/l2-paver"}, "edited": false, "score": 0, "creation_date": 1572223459, "post_id": 58532216, "comment_id": 103483335, "body": "I&#39;m not familiar with kotlin yet. I&#39;ll send the code in java"}], "answers": [{"comments": [{"owner": {"reputation": 146, "user_id": 11354766, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WqdQ96RoT9c/AAAAAAAAAAI/AAAAAAAAEfw/HVtSTT5f784/photo.jpg?sz=128", "display_name": "Sanush", "link": "https://stackoverflow.com/users/11354766/sanush"}, "edited": false, "score": 0, "creation_date": 1572863698, "post_id": 58584630, "comment_id": 103680673, "body": "thank you. If you are not familiar with kotlin yet you can use  <a href=\"https://try.kotlinlang.org/#/Kotlin%20Koans/Introduction/Java%20to%20Kotlin%20conversion/Task.kt\" rel=\"nofollow noreferrer\">java kotlin converter</a>"}], "tags": [], "owner": {"reputation": 464, "user_id": 11598177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nl2uJ.jpg?s=128&g=1", "display_name": "L2_Paver", "link": "https://stackoverflow.com/users/11598177/l2-paver"}, "is_accepted": false, "score": 1, "last_activity_date": 1572223529, "creation_date": 1572223529, "answer_id": 58584630, "question_id": 58532216, "link": "https://stackoverflow.com/questions/58532216/how-to-load-image-from-api-and-save-it-into-sqlite-database/58584630#58584630", "title": "How to load image from API and save it into sqlite database?", "body": "<p>This how we do it in java.</p>\n\n<pre><code>byte[] Imagebyte = getBitmapAsByteArray(((BitmapDrawable) YOUR_IMAGEVIEW.getDrawable()).getBitmap());\n</code></pre>\n\n<p>Then we store it in sqlite in FIELD's with data type BLOB.</p>\n"}], "owner": {"reputation": 146, "user_id": 11354766, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WqdQ96RoT9c/AAAAAAAAAAI/AAAAAAAAEfw/HVtSTT5f784/photo.jpg?sz=128", "display_name": "Sanush", "link": "https://stackoverflow.com/users/11354766/sanush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1572223529, "creation_date": 1571873502, "question_id": 58532216, "link": "https://stackoverflow.com/questions/58532216/how-to-load-image-from-api-and-save-it-into-sqlite-database", "title": "How to load image from API and save it into sqlite database?", "body": "<p>I'm already get images into my recycle view. All the other details were saved into sqlite database. But there is a problem with saving image. </p>\n\n<p>this is my database table and method for save details into data base</p>\n\n<p><code>val CREATE_TABLE = \"CREATE TABLE $TABLE_NAME \" +\n                \"($ID INTEGER PRIMARY KEY, $BOOK_NAME TEXT, $DESCRIPTION TEXT, $AUTHOR TEXT, $COVER_PAGE BLOB, $ISBN TEXT, $LANGUAGE TEXT, $NUMBER_OF_PAGES INTEGER, $PRICE TEXT, $CATEGORY TEXT)\"\n        db?.execSQL(CREATE_TABLE)</code></p>\n\n<pre><code>fun addFavouriteBooks(\n        id: Int,\n        bookName: String,\n        description: String,\n        author: String,\n        cover: ByteArray,\n        isbn: String,\n        language: String,\n        numbOfPages: Int,\n        price: String,\n        category: String\n    ): Long {\n        val db = this.writableDatabase\n        val contentValues = ContentValues()\n        contentValues.put(ID, id)\n        contentValues.put(BOOK_NAME, bookName)\n        contentValues.put(DESCRIPTION, description)\n        contentValues.put(AUTHOR, author)\n        contentValues.put(COVER_PAGE, cover)\n        contentValues.put(ISBN, isbn)\n        contentValues.put(LANGUAGE, language)\n        contentValues.put(NUMBER_OF_PAGES, numbOfPages)\n        contentValues.put(PRICE, price)\n        contentValues.put(CATEGORY, category)\n\n        val res = db.insert(TABLE_NAME, null, contentValues)\n        db.close()\n        return res\n    }\n</code></pre>\n\n<p>Here is my function in recycle adapter to catch the data in recycle view and sed it to the sqlite database. I haven't any idea to send image like other details.</p>\n\n<pre><code>\n        holder.like.setOnClickListener {\n            var c_id = holder.id\n            var c_name = holder.name.text.toString()\n            var c_description = holder.description\n            var c_author = holder.author.text.toString()\n            var c_cover = holder.cover.toString()\n\n            //i want to convert this c_cover into byte array\n\n            var c_isbn = holder.isbn\n            var c_lang = holder.language\n            var c_numberOfPages: Int = holder.numbOfPages.toInt()\n            var c_price = holder.price.text.toString()\n            var c_category = holder.category\n\n            var favList: Long = dbHelper.addFavouriteBooks(c_id.toInt(), c_name, c_description, c_author,c_cover, c_isbn, c_lang, c_numberOfPages, c_price, c_category)\n\n            if(favList &gt; 0)\n            {\n                Toast.makeText(context, \"Book added to favourites\", Toast.LENGTH_SHORT).show()\n            }\n        }\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 1728, "user_id": 5265414, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/DaPmy.jpg?s=128&g=1", "display_name": "OGx09", "link": "https://stackoverflow.com/users/5265414/ogx09"}, "edited": false, "score": 0, "creation_date": 1571871147, "post_id": 58531796, "comment_id": 103387566, "body": "First, uploading a project to google drive is not a good practice, rather push your codes to an online repositories like Github.com or bitbucket.com."}], "answers": [{"tags": [], "owner": {"reputation": 394, "user_id": 4228488, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7fad7743e03eaf3bfdcaa7cd584c5290?s=128&d=identicon&r=PG&f=1", "display_name": "Nacho Ramos S&#225;nchez", "link": "https://stackoverflow.com/users/4228488/nacho-ramos-s%c3%a1nchez"}, "is_accepted": true, "score": 0, "last_activity_date": 1571871720, "creation_date": 1571871720, "answer_id": 58532005, "question_id": 58531796, "link": "https://stackoverflow.com/questions/58531796/app-stops-working-before-launches-no-exceptions-adb-device/58532005#58532005", "title": "App stops working before launches, no exceptions (adb device)", "body": "<p>Your are declaring these two variables:</p>\n\n<pre><code>val a = etFirstnumber!!.text.toString().toInt()\nval b = etSecondnumber!!.text.toString().toInt()\n</code></pre>\n\n<p>outside the onCreate method which will cause a NPE because they haven't being initialized with their corresponding view.</p>\n"}], "owner": {"reputation": 87, "user_id": 12197041, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDGaiZjEXg5aASPsg5qg2obJLwO10f2ctZfYtok=k-s128", "display_name": "Iona Bartishvili", "link": "https://stackoverflow.com/users/12197041/iona-bartishvili"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 58532005, "answer_count": 1, "score": 0, "last_activity_date": 1571898438, "creation_date": 1571870050, "last_edit_date": 1571898438, "question_id": 58531796, "link": "https://stackoverflow.com/questions/58531796/app-stops-working-before-launches-no-exceptions-adb-device", "title": "App stops working before launches, no exceptions (adb device)", "body": "<p>I wrote a code for a simple \"calculator\" on android with Android Studio | Kotlin. it has several methods, like plus, minus, div, mult. when I try to build the app (on a VM or even in ADB device) there are no exceptions or errors. instead, when I want to launch the app and test, the app immediately stops working and gets killed. I tried googling a lot but nothing has appeared.</p>\n\n<ol>\n<li>I have already tried other devices, other VMs with different images.</li>\n<li>Creating new projects</li>\n</ol>\n\n<p>This is MainActivity.kt</p>\n\n<pre><code>    private var etFirstnumber: EditText? = null\n    private var etSecondnumber: EditText? = null\n    private var answer: TextView? = null\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        etFirstnumber = findViewById&lt;EditText&gt;(R.id.et_first_number)\n        etSecondnumber = findViewById&lt;EditText&gt;(R.id.et_sec_number)\n        answer = findViewById&lt;TextView&gt;(R.id.txt_answr)\n\n        val btn_plus = findViewById&lt;Button&gt;(R.id.btn_plus)\n        val btn_minus = findViewById&lt;Button&gt;(R.id.btn_minus)\n        val btn_div = findViewById&lt;Button&gt;(R.id.btn_div)\n        val btn_mult = findViewById&lt;Button&gt;(R.id.btn_mult)\n        val btn_quart = findViewById&lt;Button&gt;(R.id.btn_quart)\n        val btn_root = findViewById&lt;Button&gt;(R.id.btn_root)\n\n        btn_plus.setOnClickListener(){\n            plus()\n        }\n\n        btn_minus.setOnClickListener(){\n            minus()\n        }\n\n        btn_div.setOnClickListener(){\n            div()\n        }\n\n        btn_mult.setOnClickListener(){\n            mult()\n        }\n    }\n\n    val a = etFirstnumber!!.text.toString().toInt()\n    val b = etSecondnumber!!.text.toString().toInt()\n\n    private fun plus(){\n        val plus = a + b\n        answer!!.text = plus.toString()\n    }\n\n    private fun minus(){\n        val minus = a - b\n        answer!!.text = minus.toString()\n    }\n\n    private fun div(){\n        val div = a / b\n        answer!!.text = div.toString()\n    }\n\n    private fun mult(){\n        val mult = a * b\n        answer!!.text = mult.toString()\n    }\n\n}\n</code></pre>\n\n<p>Activity_main.xml</p>\n\n<pre><code>&lt;EditText\n    android:id=\"@+id/et_sec_number\"\n    android:layout_width=\"153dp\"\n    android:layout_height=\"43dp\"\n    android:layout_marginStart=\"40dp\"\n    android:ems=\"10\"\n    android:hint=\"@string/et_sec_number\"\n    android:importantForAutofill=\"no\"\n    android:inputType=\"number\"\n    android:text=\"@string/et_sec_number\"\n    app:layout_constraintBottom_toBottomOf=\"parent\"\n    app:layout_constraintEnd_toEndOf=\"parent\"\n    app:layout_constraintHorizontal_bias=\"0.0\"\n    app:layout_constraintStart_toEndOf=\"@+id/et_first_number\"\n    app:layout_constraintTop_toTopOf=\"parent\"\n    app:layout_constraintVertical_bias=\"0.283\" /&gt;\n\n&lt;EditText\n    android:id=\"@+id/et_first_number\"\n    android:layout_width=\"153dp\"\n    android:layout_height=\"43dp\"\n    android:ems=\"10\"\n    android:hint=\"@string/et_first_number\"\n    android:importantForAutofill=\"no\"\n    android:inputType=\"number\"\n    android:text=\"@string/et_first_number\"\n    app:layout_constraintBottom_toBottomOf=\"parent\"\n    app:layout_constraintEnd_toEndOf=\"parent\"\n    app:layout_constraintHorizontal_bias=\"0.116\"\n    app:layout_constraintStart_toStartOf=\"parent\"\n    app:layout_constraintTop_toTopOf=\"parent\"\n    app:layout_constraintVertical_bias=\"0.283\" /&gt;\n\n&lt;Button\n    android:id=\"@+id/btn_minus\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:layout_marginTop=\"90dp\"\n    android:hint=\"@string/btn_minus\"\n    android:text=\"@string/btn_minus\"\n    app:layout_constraintBottom_toBottomOf=\"parent\"\n    app:layout_constraintEnd_toEndOf=\"parent\"\n    app:layout_constraintHorizontal_bias=\"0.217\"\n    app:layout_constraintStart_toEndOf=\"@+id/btn_plus\"\n    app:layout_constraintTop_toBottomOf=\"@+id/et_sec_number\"\n    app:layout_constraintVertical_bias=\"0.0\" /&gt;\n\n&lt;Button\n    android:id=\"@+id/btn_plus\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:layout_marginStart=\"30dp\"\n    android:layout_marginTop=\"90dp\"\n    android:hint=\"@string/btn_plus\"\n    android:text=\"@string/btn_plus\"\n    app:layout_constraintBottom_toBottomOf=\"parent\"\n    app:layout_constraintEnd_toEndOf=\"parent\"\n    app:layout_constraintHorizontal_bias=\"0.0\"\n    app:layout_constraintStart_toStartOf=\"parent\"\n    app:layout_constraintTop_toBottomOf=\"@+id/et_first_number\"\n    app:layout_constraintVertical_bias=\"0.0\" /&gt;\n\n&lt;Button\n    android:id=\"@+id/btn_div\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:layout_marginTop=\"90dp\"\n    android:hint=\"@string/btn_div\"\n    android:text=\"@string/btn_div\"\n    app:layout_constraintBottom_toBottomOf=\"parent\"\n    app:layout_constraintEnd_toEndOf=\"parent\"\n    app:layout_constraintHorizontal_bias=\"0.826\"\n    app:layout_constraintStart_toEndOf=\"@+id/btn_plus\"\n    app:layout_constraintTop_toBottomOf=\"@+id/et_sec_number\"\n    app:layout_constraintVertical_bias=\"0.0\" /&gt;\n\n&lt;Button\n    android:id=\"@+id/btn_quart\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:hint=\"@string/btn_quart\"\n    android:text=\"@string/btn_quart\"\n    app:layout_constraintBottom_toBottomOf=\"parent\"\n    app:layout_constraintEnd_toEndOf=\"parent\"\n    app:layout_constraintHorizontal_bias=\"0.219\"\n    app:layout_constraintStart_toEndOf=\"@+id/btn_mult\"\n    app:layout_constraintTop_toBottomOf=\"@+id/btn_minus\"\n    app:layout_constraintVertical_bias=\"0.143\" /&gt;\n\n&lt;Button\n    android:id=\"@+id/btn_mult\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:layout_marginStart=\"30dp\"\n    android:hint=\"@string/btn_mult\"\n    android:text=\"@string/btn_mult\"\n    app:layout_constraintBottom_toBottomOf=\"parent\"\n    app:layout_constraintEnd_toStartOf=\"@+id/btn_root\"\n    app:layout_constraintHorizontal_bias=\"0.0\"\n    app:layout_constraintStart_toStartOf=\"parent\"\n    app:layout_constraintTop_toBottomOf=\"@+id/btn_plus\"\n    app:layout_constraintVertical_bias=\"0.143\" /&gt;\n\n&lt;Button\n    android:id=\"@+id/btn_root\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:layout_marginBottom=\"260dp\"\n    android:hint=\"@string/btn_root\"\n    android:text=\"@string/btn_root\"\n    app:layout_constraintBottom_toBottomOf=\"parent\"\n    app:layout_constraintEnd_toEndOf=\"parent\"\n    app:layout_constraintHorizontal_bias=\"0.829\"\n    app:layout_constraintStart_toEndOf=\"@+id/btn_plus\"\n    app:layout_constraintTop_toBottomOf=\"@+id/btn_div\"\n    app:layout_constraintVertical_bias=\"0.936\" /&gt;\n\n&lt;TextView\n    android:id=\"@+id/txt_answr\"\n    android:layout_width=\"196dp\"\n    android:layout_height=\"27dp\"\n    android:hint=\"@string/txt_answr\"\n    android:text=\"@string/txt_answr\"\n    app:layout_constraintBottom_toBottomOf=\"parent\"\n    app:layout_constraintEnd_toEndOf=\"parent\"\n    app:layout_constraintStart_toStartOf=\"parent\"\n    app:layout_constraintTop_toTopOf=\"parent\"\n    app:layout_constraintVertical_bias=\"0.135\" /&gt;\n</code></pre>\n\n<p>Strings.xml</p>\n\n<pre><code>&lt;string name=\"app_name\"&gt;BTUcalculatorTEST3&lt;/string&gt;\n&lt;string name=\"et_first_number\"&gt;Enter First Number&lt;/string&gt;\n&lt;string name=\"et_sec_number\"&gt;Enter Second Number&lt;/string&gt;\n&lt;string name=\"btn_plus\"&gt;Plus&lt;/string&gt;\n&lt;string name=\"btn_minus\"&gt;Minus&lt;/string&gt;\n&lt;string name=\"btn_div\"&gt;Divide&lt;/string&gt;\n&lt;string name=\"btn_mult\"&gt;Multiply&lt;/string&gt;\n&lt;string name=\"btn_quart\"&gt;Quart&lt;/string&gt;\n&lt;string name=\"btn_root\"&gt;Root&lt;/string&gt;\n&lt;string name=\"txt_answr\"&gt;The Answer Will Show Up Here&lt;/string&gt;\n</code></pre>\n\n<p>I will upload project file on drive for more details .. <a href=\"https://drive.google.com/open?id=1DqA1sbYN0vTkNopRS0WNXQyLt1Zqk6fy\" rel=\"nofollow noreferrer\">https://drive.google.com/open?id=1DqA1sbYN0vTkNopRS0WNXQyLt1Zqk6fy</a></p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 10456, "user_id": 9241978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7f9d2a03452f74bfd802e36d50b7db?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel", "link": "https://stackoverflow.com/users/9241978/pawel"}, "is_accepted": true, "score": 1, "last_activity_date": 1571874026, "creation_date": 1571874026, "answer_id": 58532269, "question_id": 58531157, "link": "https://stackoverflow.com/questions/58531157/kotlin-smartcast-does-not-work-for-inline-declaration/58532269#58532269", "title": "Kotlin Smartcast does not work for inline declaration", "body": "<p>This looks like intended behavior in my opinion. While in short code sample this is not confusing, if variable is declared as <code>User</code> it implies that class is being used and not one of its descendants.</p>\n\n<p>In first example smart cast works within function scope. In second it doesn't even attempt to evaluate assigned type since field is already explicitly typed.</p>\n\n<p>Consider following example to visualize why <code>main1</code> compiles:</p>\n\n<pre><code>fun main(){\n   val user : User\n   if(condition) {\n        user = Admin(\"Jon\")\n        user.name     // smart cast to \"Admin\" within if branch scope\n   } else {\n        user = User()\n   }\n   user.name // unresolved\n}\n</code></pre>\n"}], "owner": {"reputation": 2865, "user_id": 6587143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d937e3b76600ab1182224aec4710655?s=128&d=identicon&r=PG&f=1", "display_name": "Sanlok Lee", "link": "https://stackoverflow.com/users/6587143/sanlok-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 2, "accepted_answer_id": 58532269, "answer_count": 1, "score": 4, "last_activity_date": 1571874026, "creation_date": 1571865720, "question_id": 58531157, "link": "https://stackoverflow.com/questions/58531157/kotlin-smartcast-does-not-work-for-inline-declaration", "title": "Kotlin Smartcast does not work for inline declaration", "body": "<p>For these classes:</p>\n\n<pre><code>open class User\n\nclass Admin(val name: String) : User()\n</code></pre>\n\n<p><br></p>\n\n<p>This compiles:</p>\n\n<pre><code>fun main1() {\n    val user: User\n    user = Admin(\"John\")\n    user.name\n}\n</code></pre>\n\n<p>This does not compile:</p>\n\n<pre><code>fun main2() {\n    val user: User = Admin(\"John\")\n    user.name  // \"Unresolved reference: name\"\n}\n</code></pre>\n\n<p><br></p>\n\n<p>The only difference is whether to split declaration and initialization. Why is the compiler allowed to smartcast <code>user</code> to <code>Admin</code> in the first scenario but not in the second scenario?</p>\n"}, {"tags": ["android", "kotlin", "sharedpreferences"], "comments": [{"owner": {"reputation": 1234, "user_id": 6179431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DHO20.jpg?s=128&g=1", "display_name": "Sandi", "link": "https://stackoverflow.com/users/6179431/sandi"}, "edited": false, "score": 2, "creation_date": 1571869613, "post_id": 58530969, "comment_id": 103387229, "body": "I think the abstraction here can be improved. Namely, what you&#39;re really checking is whether some data exists for a given key or not. <code>SharedPreferences</code> already has this built in with <code>contains(key: String)</code> which is semantically the same as getting back a <code>null</code> value. The fact that shared preferences are backed by an XML file is an implementation detail, if <code>get(key: String)</code> returns <code>null</code> you really have no way of knowing whether the key was explicitly set to <code>null</code> or whether <code>null</code> indicates that there no value exists for that key."}, {"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1571881584, "post_id": 58530969, "comment_id": 103389444, "body": "I suggest if you want to &quot;make it null&quot;, you should <code>remove</code> it from the shared preferences, not commit a null value. Then <code>contains</code> will work as Sandi commented above."}, {"owner": {"reputation": 30613, "user_id": 3496570, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/fhSKV.jpg?s=128&g=1", "display_name": "AndroidGeek", "link": "https://stackoverflow.com/users/3496570/androidgeek"}, "edited": false, "score": 0, "creation_date": 1571898373, "post_id": 58530969, "comment_id": 103393449, "body": "And example to above discussion <a href=\"https://stackoverflow.com/a/28789934/3496570\">stackoverflow.com/a/28789934/3496570</a>"}], "answers": [{"tags": [], "owner": {"reputation": 749, "user_id": 9439899, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/moFN0.jpg?s=128&g=1", "display_name": "josxha", "link": "https://stackoverflow.com/users/9439899/josxha"}, "is_accepted": false, "score": 0, "last_activity_date": 1572092262, "creation_date": 1572092262, "answer_id": 58570680, "question_id": 58530969, "link": "https://stackoverflow.com/questions/58530969/how-to-make-a-sharedpreference-string-null/58570680#58570680", "title": "How to make a SharedPreference string null?", "body": "<p>You can simply remove the entry from your SharedPreferences.</p>\n\n<pre><code>SharedPreferences.Editor editor = sharedPrefs.edit();\neditor.remove(\"id\");\neditor.apply();\n</code></pre>\n\n<p>Now you can check with the following line if the entry exists:</p>\n\n<pre><code>if (sharedPrefs.contains(\"id\")) {\n    // entry exists\n} else {\n    // entry does not exist\n}\n</code></pre>\n"}], "owner": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572092262, "creation_date": 1571864703, "question_id": 58530969, "link": "https://stackoverflow.com/questions/58530969/how-to-make-a-sharedpreference-string-null", "title": "How to make a SharedPreference string null?", "body": "<p>When I perform:</p>\n\n<pre><code>sharedPref.putString(\"id\", null)\n</code></pre>\n\n<p>it comes up in my <code>sharedPrefs</code> file like this:</p>\n\n<pre><code>&lt;?xml version='1.0' encoding='utf-8' standalone='yes' ?&gt;\n&lt;map&gt;\n    &lt;boolean name=\"waiting\" value=\"false\" /&gt;\n    &lt;string name=\"state\"&gt;initial&lt;/string&gt;\n    &lt;string name=\"id\"&gt;&lt;/string&gt;\n&lt;/map&gt;\n</code></pre>\n\n<p>And when I try to retrieve it:</p>\n\n<pre><code>val id = sharedPref.getString(\"id\", null) ?: return // doesn't return\nLog.d(TAG, \"id == blank: ${id.isBlank()}\") // true\n</code></pre>\n\n<p>it says the value is blank and not null. </p>\n\n<p><strong>So if a string in sharedPrefs has been set to null, it will not actually be null? It will be blank (<code>\"\"</code>).</strong></p>\n\n<p>I would like to make it null so it is easier to check with Kotlin's null safety - however I'm not sure if this is possible?</p>\n"}, {"tags": ["android", "kotlin", "android-edittext"], "comments": [{"owner": {"reputation": 696, "user_id": 8521094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2397e7af590c3568e362b1804eb2d1a?s=128&d=identicon&r=PG", "display_name": "Alif Hasnain", "link": "https://stackoverflow.com/users/8521094/alif-hasnain"}, "edited": false, "score": 0, "creation_date": 1571859580, "post_id": 58529851, "comment_id": 103383727, "body": "Share your code so people can get a better understanding of the problem."}, {"owner": {"reputation": 8233, "user_id": 7594961, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/dnyEy.jpg?s=128&g=1", "display_name": "Bertram Gilfoyle", "link": "https://stackoverflow.com/users/7594961/bertram-gilfoyle"}, "edited": false, "score": 0, "creation_date": 1572127088, "post_id": 58529851, "comment_id": 103466135, "body": "Are you sure this wont happen before opening the second fragment?"}], "answers": [{"tags": [], "owner": {"reputation": 2007, "user_id": 8770663, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/boGWf.png?s=128&g=1", "display_name": "Masoud Mokhtari", "link": "https://stackoverflow.com/users/8770663/masoud-mokhtari"}, "is_accepted": false, "score": 2, "last_activity_date": 1572670314, "last_edit_date": 1572670314, "creation_date": 1572067516, "answer_id": 58568298, "question_id": 58529851, "link": "https://stackoverflow.com/questions/58529851/edittext-disapears-when-clicked-after-fragment-transaction/58568298#58568298", "title": "EditText disapears when clicked after fragment transaction", "body": "<p>Hide soft keyboard when opened second fragment. Use this code:</p>\n\n<pre><code>public void hideKeyboard(View view) {\n        if (view != null) {\n            view.clearFocus();\n            InputMethodManager imm = (InputMethodManager) view.getContext().getSystemService(Context.INPUT_METHOD_SERVICE);\n            imm.hideSoftInputFromWindow(view.getWindowToken(), 0);\n        }\n    }\n</code></pre>\n\n<p>and call <code>hideKeyboard()</code> method at <code>onPause()</code> of first fragment like this:</p>\n\n<pre><code>@Override\n    public void onPause() {\n        super.onPause();\n        if (yourEdittext!= null)\n            hideKeyboard(yourEdittext);\n    }\n</code></pre>\n\n<p>And <code>windowSoftInputMode</code> to your activity in manifest like this:</p>\n\n<pre><code>        &lt;activity\n            android:name=\".YourActivity\"\n            android:windowSoftInputMode=\"adjustResize|stateAlwaysHidden|adjustPan\"&gt;\n        &lt;/activity&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 576, "user_id": 9223264, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hd8CHstY9js/AAAAAAAAAAI/AAAAAAAAAOk/pJ463aKM9HY/photo.jpg?sz=128", "display_name": "Jaspalsinh Gohil", "link": "https://stackoverflow.com/users/9223264/jaspalsinh-gohil"}, "is_accepted": false, "score": 2, "last_activity_date": 1572412049, "creation_date": 1572412049, "answer_id": 58619084, "question_id": 58529851, "link": "https://stackoverflow.com/questions/58529851/edittext-disapears-when-clicked-after-fragment-transaction/58619084#58619084", "title": "EditText disapears when clicked after fragment transaction", "body": "<p>Simply override  method in your activity. It will automatically works in its child fragments as well...</p>\n\n<pre><code>override fun dispatchTouchEvent(ev: MotionEvent?): Boolean {\n    if (currentFocus != null) {\n        val imm = getSystemService(Context.INPUT_METHOD_SERVICE) as InputMethodManager\n        imm.hideSoftInputFromWindow(currentFocus!!.windowToken, 0)\n    }\n    return super.dispatchTouchEvent(ev)\n}\n</code></pre>\n\n<p>Also  Use the following utility functions within your Activities, Fragments to hide the soft keyboard.</p>\n\n<pre><code>fun Fragment.hideKeyboard() {\nview?.let { activity?.hideKeyboard(it) }\n}\n\nfun Activity.hideKeyboard() {\nhideKeyboard(currentFocus ?: View(this))\n}\n\nfun Context.hideKeyboard(view: View) {\nval inputMethodManager = getSystemService(Activity.INPUT_METHOD_SERVICE) as InputMethodManager\ninputMethodManager.hideSoftInputFromWindow(view.windowToken, 0)\n}\n</code></pre>\n\n<p>This will close the keyboard regardless of your code either in dialog fragment and/or activity etc.</p>\n\n<p>Usage in Activity/Fragment:</p>\n\n<pre><code>hideKeyboard()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 217, "user_id": 6096922, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YzKVE.jpg?s=128&g=1", "display_name": "Kuldeep Rathee", "link": "https://stackoverflow.com/users/6096922/kuldeep-rathee"}, "is_accepted": false, "score": 4, "last_activity_date": 1572754362, "last_edit_date": 1572754362, "creation_date": 1572413665, "answer_id": 58619287, "question_id": 58529851, "link": "https://stackoverflow.com/questions/58529851/edittext-disapears-when-clicked-after-fragment-transaction/58619287#58619287", "title": "EditText disapears when clicked after fragment transaction", "body": "<p>Set <code>android:windowSoftInputMode=\"adjustPan|adjustResize\"</code> in the <code>manifest.xml</code> file for the coresponding activity.</p>\n"}], "owner": {"reputation": 673, "user_id": 6580761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NFDjY.jpg?s=128&g=1", "display_name": "Lukas", "link": "https://stackoverflow.com/users/6580761/lukas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 1, "closed_date": 1580412343, "answer_count": 3, "score": 1, "last_activity_date": 1572754362, "creation_date": 1571859211, "last_edit_date": 1572197998, "question_id": 58529851, "link": "https://stackoverflow.com/questions/58529851/edittext-disapears-when-clicked-after-fragment-transaction", "closed_reason": "Duplicate", "title": "EditText disapears when clicked after fragment transaction", "body": "<p>my EditText works perfectly fine, until you open another fragment and return back to the first one. After clicking the EditText the keyboard pops up and it looks like the soft-keyboard is pushing the content of the fragment upwards and behind the background image.</p>\n\n<p>This looks something like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/EzWox.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EzWox.png\" alt=\"before\"></a></p>\n\n<p>And after you opended a fragment and closed it again:</p>\n\n<p><a href=\"https://i.stack.imgur.com/gPiLC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gPiLC.png\" alt=\"after\"></a></p>\n\n<p>My Search Text View:</p>\n\n<pre><code>&lt;EditText\n                android:id=\"@+id/search_view\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"40dp\"\n                android:layout_marginStart=\"30dp\"\n                android:layout_marginEnd=\"30dp\"\n                android:background=\"@drawable/textfield\"\n                android:digits=\"@string/digits\"\n                android:drawableStart=\"@drawable/ic_search\"\n                android:drawablePadding=\"10dp\"\n                android:fontFamily=\"@font/opensans_normal\"\n                android:hint=\"@string/search\"\n                android:inputType=\"text\"\n                android:paddingStart=\"10dp\"\n                android:paddingEnd=\"10dp\"\n                android:singleLine=\"true\"\n                android:textColor=\"@color/colorFont\"\n                android:textColorHint=\"@color/colorFont\"\n                android:textSize=\"15sp\" /&gt;\n</code></pre>\n\n<p>When this method gets called the bug happens:</p>\n\n<pre><code>  fun addFilter() {\n    val topicList = mutableListOf&lt;Topic?&gt;()\n    topicAdapter = TopicAdapter(topicList, context, null, true)\n\n    if (CachedData.filter.isNotEmpty()) {\n\n        if (CachedData.filter[0] != null) {\n            filterList.visibility = View.VISIBLE\n            topicList.add(Topic(CachedData.filter[0], selected = true, clickable = true))\n        }\n\n        if (CachedData.filter[1] != null) {\n            filterList.visibility = View.VISIBLE\n            if (CachedData.filter[0] == null) {\n                topicAdapter.setSubselect(-1)\n            }\n            topicList.add(Topic(CachedData.filter[1], selected = true, clickable = true))\n        }\n    }\n    filterList.adapter = topicAdapter\n    filterList.layoutManager = LinearLayoutManager(context, RecyclerView.HORIZONTAL, false)\n}\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>This only happens when something is changed in the first Fragment. For example if I add data to the dataset from the RecylerView in the first fragment the bug happens</p>\n"}, {"tags": ["java", "android", "android-studio", "kotlin"], "comments": [{"owner": {"reputation": 6153, "user_id": 4729721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a68628b01886ee639255e69111990484?s=128&d=identicon&r=PG&f=1", "display_name": "a_local_nobody", "link": "https://stackoverflow.com/users/4729721/a-local-nobody"}, "edited": false, "score": 0, "creation_date": 1571861689, "post_id": 58529636, "comment_id": 103384567, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/34588117/how-can-i-convert-a-part-of-java-source-file-to-kotlin\">How can I convert a part of Java source file to Kotlin?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 6415097, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/505631082977087/picture?type=large", "display_name": "Ravi Shanker Gowda", "link": "https://stackoverflow.com/users/6415097/ravi-shanker-gowda"}, "edited": false, "score": 0, "creation_date": 1571859748, "post_id": 58529660, "comment_id": 103383776, "body": "this doesn&#39;t seem to work for me.  I just want to convert the code not an entire file."}, {"owner": {"reputation": 6153, "user_id": 4729721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a68628b01886ee639255e69111990484?s=128&d=identicon&r=PG&f=1", "display_name": "a_local_nobody", "link": "https://stackoverflow.com/users/4729721/a-local-nobody"}, "reply_to_user": {"reputation": 73, "user_id": 6415097, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/505631082977087/picture?type=large", "display_name": "Ravi Shanker Gowda", "link": "https://stackoverflow.com/users/6415097/ravi-shanker-gowda"}, "edited": false, "score": 0, "creation_date": 1571861172, "post_id": 58529660, "comment_id": 103384345, "body": "@RaviShankerGowda kotlin has to be in a .kt file, meaning you have to convert the file too, you can&#39;t have kotlin in a java file"}], "tags": [], "owner": {"reputation": 153, "user_id": 8078393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/977ef9b8ab35f489734af431c9b5dd1b?s=128&d=identicon&r=PG&f=1", "display_name": "BluRe.CN", "link": "https://stackoverflow.com/users/8078393/blure-cn"}, "is_accepted": false, "score": 0, "last_activity_date": 1571858294, "creation_date": 1571858294, "answer_id": 58529660, "question_id": 58529636, "link": "https://stackoverflow.com/questions/58529636/is-there-a-way-to-convert-code-from-java-to-kotlin-in-android-studio-without-usi/58529660#58529660", "title": "Is there a way to convert code from Java to Kotlin in Android Studio without using the copy/paste method?", "body": "<p>Just use control+alt+shift+k to convert.</p>\n"}, {"comments": [{"owner": {"reputation": 73, "user_id": 6415097, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/505631082977087/picture?type=large", "display_name": "Ravi Shanker Gowda", "link": "https://stackoverflow.com/users/6415097/ravi-shanker-gowda"}, "edited": false, "score": 0, "creation_date": 1571859360, "post_id": 58529808, "comment_id": 103383635, "body": "oddly im missing that last option"}, {"owner": {"reputation": 19271, "user_id": 1228514, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/345055e0c6fb9430cf3d4df5267a7b79?s=128&d=identicon&r=PG", "display_name": "Alex Kucherenko", "link": "https://stackoverflow.com/users/1228514/alex-kucherenko"}, "reply_to_user": {"reputation": 73, "user_id": 6415097, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/505631082977087/picture?type=large", "display_name": "Ravi Shanker Gowda", "link": "https://stackoverflow.com/users/6415097/ravi-shanker-gowda"}, "edited": false, "score": 0, "creation_date": 1571917043, "post_id": 58529808, "comment_id": 103402821, "body": "Which Android studio version do you use? This menu item appeared in studio version 3.0. In version before 3.0 you need to install Kotlin plugin"}], "tags": [], "owner": {"reputation": 19271, "user_id": 1228514, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/345055e0c6fb9430cf3d4df5267a7b79?s=128&d=identicon&r=PG", "display_name": "Alex Kucherenko", "link": "https://stackoverflow.com/users/1228514/alex-kucherenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1571859371, "last_edit_date": 1571859371, "creation_date": 1571859032, "answer_id": 58529808, "question_id": 58529636, "link": "https://stackoverflow.com/questions/58529636/is-there-a-way-to-convert-code-from-java-to-kotlin-in-android-studio-without-usi/58529808#58529808", "title": "Is there a way to convert code from Java to Kotlin in Android Studio without using the copy/paste method?", "body": "<p>Select a file, then: Code -> Convert Java File to Kotlin File</p>\n\n<p><a href=\"https://i.stack.imgur.com/kAgfi.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kAgfi.jpg\" alt=\"In Menu: Code -&gt; Convert Java file to Kotlin File\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 733, "user_id": 7719064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/330b14ebe09d3c66209141f6268fe033?s=128&d=identicon&r=PG&f=1", "display_name": "Akshay Raiyani", "link": "https://stackoverflow.com/users/7719064/akshay-raiyani"}, "is_accepted": false, "score": 0, "last_activity_date": 1571863621, "creation_date": 1571863621, "answer_id": 58530787, "question_id": 58529636, "link": "https://stackoverflow.com/questions/58529636/is-there-a-way-to-convert-code-from-java-to-kotlin-in-android-studio-without-usi/58530787#58530787", "title": "Is there a way to convert code from Java to Kotlin in Android Studio without using the copy/paste method?", "body": "<p>Usually, I habited to convert some particular JAVA code to kotlin using <a href=\"https://try.kotlinlang.org/#/Kotlin%20Koans/Introduction/Java%20to%20Kotlin%20conversion/Task.kt\" rel=\"nofollow noreferrer\">this</a></p>\n\n<p>Select convert from java (from the top right side) and paste your JAVA code and convert it.</p>\n"}], "owner": {"reputation": 73, "user_id": 6415097, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/505631082977087/picture?type=large", "display_name": "Ravi Shanker Gowda", "link": "https://stackoverflow.com/users/6415097/ravi-shanker-gowda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1571863621, "creation_date": 1571858192, "question_id": 58529636, "link": "https://stackoverflow.com/questions/58529636/is-there-a-way-to-convert-code-from-java-to-kotlin-in-android-studio-without-usi", "title": "Is there a way to convert code from Java to Kotlin in Android Studio without using the copy/paste method?", "body": "<p>Usually I have to type the code in Java on notepad then paste it to convert the code.  Is there a button in Android Studio that will let me do this?</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 0, "creation_date": 1571857691, "post_id": 58529463, "comment_id": 103382986, "body": "Not clear about your question"}, {"owner": {"reputation": 33, "user_id": 6067204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1612e5c0a04d060acffee6bc1514d284?s=128&d=identicon&r=PG&f=1", "display_name": "kumar", "link": "https://stackoverflow.com/users/6067204/kumar"}, "reply_to_user": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 0, "creation_date": 1571930794, "post_id": 58529463, "comment_id": 103410443, "body": "I have android app with java class name as photofragment and in the same app I have created kotlin fragment  name as camerafragment . I want load the photo fragment instead of camera fragment"}, {"owner": {"reputation": 33, "user_id": 6067204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1612e5c0a04d060acffee6bc1514d284?s=128&d=identicon&r=PG&f=1", "display_name": "kumar", "link": "https://stackoverflow.com/users/6067204/kumar"}, "reply_to_user": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 0, "creation_date": 1571932229, "post_id": 58529463, "comment_id": 103411174, "body": "How do the fragment transaction between java fragment and kotlin fragment"}, {"owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 0, "creation_date": 1571932449, "post_id": 58529463, "comment_id": 103411279, "body": "Add both fragment and ActivityUtil code"}, {"owner": {"reputation": 33, "user_id": 6067204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1612e5c0a04d060acffee6bc1514d284?s=128&d=identicon&r=PG&f=1", "display_name": "kumar", "link": "https://stackoverflow.com/users/6067204/kumar"}, "reply_to_user": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 0, "creation_date": 1571940490, "post_id": 58529463, "comment_id": 103414794, "body": "updated the code"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 6067204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1612e5c0a04d060acffee6bc1514d284?s=128&d=identicon&r=PG&f=1", "display_name": "kumar", "link": "https://stackoverflow.com/users/6067204/kumar"}, "edited": false, "score": 0, "creation_date": 1572067875, "post_id": 58547164, "comment_id": 103454349, "body": "My Question  is how to call from ExpLotBcodeFragment (Java ) to CameraFragment (Kotlin)"}], "tags": [], "owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "is_accepted": true, "score": 0, "last_activity_date": 1572073588, "last_edit_date": 1572073588, "creation_date": 1571941456, "answer_id": 58547164, "question_id": 58529463, "link": "https://stackoverflow.com/questions/58529463/how-do-call-kotlin-fragment-from-java-fragment-class/58547164#58547164", "title": "how do call kotlin fragment from java fragment class", "body": "<p>Either you have to call <code>CameraFragment.Companion.newInstance()</code> or directly call <code>new CameraFragment()</code> to get <code>instance</code> of <code>CameraFragment</code>.\nCheck below:</p>\n\n<pre><code>@OnClick({R.id.scan})\npublic void onClick(View view) {\n    switch (view.getId()) {\n        case R.id.scan:\n            CameraFragment cameraFragment = CameraFragment.Companion.newInstance();\n            ActivityUtil.addFragmentToActivity(getFragmentManager(),\n                    cameraFragment, R.id.frame_content, \"cameraFragment\");\n            break;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 6067204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1612e5c0a04d060acffee6bc1514d284?s=128&d=identicon&r=PG&f=1", "display_name": "kumar", "link": "https://stackoverflow.com/users/6067204/kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 753, "favorite_count": 0, "accepted_answer_id": 58547164, "answer_count": 1, "score": -1, "last_activity_date": 1572073588, "creation_date": 1571857310, "last_edit_date": 1571939698, "question_id": 58529463, "link": "https://stackoverflow.com/questions/58529463/how-do-call-kotlin-fragment-from-java-fragment-class", "title": "how do call kotlin fragment from java fragment class", "body": "<p>This is ActivityUtil code</p>\n\n<pre><code>        public class ActivityUtil {\n\n        public static void addFragmentToActivity(@NonNull FragmentManager fragmentManager,\n                                                 @NonNull Fragment fragment, int frameId, String fragmentTag) {\n\n            //Fragment fragment1=fragmentManager.findFragmentByTag(fragmentTag);\n            Preconditions.checkNotNull(fragmentManager);\n            Preconditions.checkNotNull(fragment);\n            FragmentTransaction transaction = fragmentManager.beginTransaction();\n\n                transaction.replace(frameId, fragment, fragmentTag);\n                transaction.addToBackStack(fragmentTag);\n                transaction.commit();\n\n\n        }\n        }\n</code></pre>\n\n<p>This is main fragment class here i want add /replace fragment transaction by using kotlin fragment i.e,CameraFragment  Class</p>\n\n<p>I Already used Photofragment class now i want change the kotlin fragment, how do achieve this scenario?</p>\n\n<pre><code>    public class ExpLotBcodeFragment extends Fragment{\n     public ExpLotBcodeFragment() {      \n        }  \n          @Override\n        public void onCreate(Bundle savedInstanceState) {\n            super.onCreate(savedInstanceState);\n            this.setRetainInstance(true);\n              }\n        @SuppressLint(\"ClickableViewAccessibility\")\n        @Override\n        public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                                 Bundle savedInstanceState) {\n\n            View root = inflater.inflate(R.layout.fragment_exp_lot_bcode, container, false);\n\n\n            }\n\n\n        @OnClick({R.id.scan})\n        public void onClick(View view) {\n                switch (view.getId()) {\n                case R.id.scan:\n                     //here i want to add kotlin call CameraFragment   class\n\n                 //This is old call \n                ActivityUtil.addFragmentToActivity(getFragmentManager(), \n                photoFragment, R.id.frame_content, \"photoFragment\"); \n\n                      break;\n    }\n</code></pre>\n\n<p>This is kotlin class</p>\n\n<pre><code>class CameraFragment : Fragment() {   \n\n  companion object {\n\n    fun newInstance(): CameraFragment {\n      return CameraFragment ()\n    }\n  }\n\n\n  override fun onCreateView(inflater: LayoutInflater, \n                            container: ViewGroup?, \n                            savedInstanceState: Bundle?): View? {\n    return inflater.inflate(R.layout.fragment_exp_lot_bcode, container, false)\n  }\n\n}\n</code></pre>\n\n<p>From CameraFragment class i want to add/replace to ExpLotBcodeFragment class ?</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 11236737, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-q7qe0jvprvE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdnXfvVXY299fEiShZ0adpxg402wg/mo/photo.jpg?sz=128", "display_name": "Rashedul Hasan", "link": "https://stackoverflow.com/users/11236737/rashedul-hasan"}, "edited": false, "score": 0, "creation_date": 1571854713, "post_id": 58528572, "comment_id": 103381762, "body": "so, the last Int is return type of the function applyOp() and &#39;=op(x,y)&#39; is what will be called inside the function aka expression body."}], "tags": [], "owner": {"reputation": 44108, "user_id": 8298909, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MRxNb.jpg?s=128&g=1", "display_name": "Ben P.", "link": "https://stackoverflow.com/users/8298909/ben-p"}, "is_accepted": true, "score": 1, "last_activity_date": 1571853552, "creation_date": 1571853552, "answer_id": 58528572, "question_id": 58528461, "link": "https://stackoverflow.com/questions/58528461/dont-understand-how-this-lambda-function-works/58528572#58528572", "title": "Don&#39;t understand how this Lambda function works", "body": "<p>This is a function with an <em>expression body</em>:</p>\n\n<blockquote>\n<pre><code>fun applyOp(x: Int, y: Int, op: (Int, Int) -&gt; Int): Int = op(x, y)\n</code></pre>\n</blockquote>\n\n<p>You're probably used to seeing functions with a <em>block body</em>:</p>\n\n<blockquote>\n<pre><code>fun applyOp(x: Int, y: Int, op: (Int, Int) -&gt; Int): Int {\n    return op(x, y)\n}\n</code></pre>\n</blockquote>\n\n<p>These two are equivalent; the expression body is just a more concise way to write it.</p>\n\n<p>Similarly, these two functions are identical:</p>\n\n<pre><code>fun helloWorld(): String {\n    return \"Hello World!\"\n}\n\nfun helloWorld(): String = \"Hello World!\"\n</code></pre>\n\n<p>You can even leave the function type specification off if you use an expression body:</p>\n\n<pre><code>fun helloWorld() = \"Hello World!\"\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 11236737, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-q7qe0jvprvE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdnXfvVXY299fEiShZ0adpxg402wg/mo/photo.jpg?sz=128", "display_name": "Rashedul Hasan", "link": "https://stackoverflow.com/users/11236737/rashedul-hasan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 58528572, "answer_count": 1, "score": 1, "last_activity_date": 1610365373, "creation_date": 1571853115, "last_edit_date": 1610365373, "question_id": 58528461, "link": "https://stackoverflow.com/questions/58528461/dont-understand-how-this-lambda-function-works", "title": "Don&#39;t understand how this Lambda function works", "body": "<p>I am new in Kotlin, just learnt about lambda functions couple of days ago.</p>\n<p>So, what i understand is:</p>\n<p>lets say I have a function which takes lambda function as parameter:</p>\n<pre><code>class XX\n{\n    fun addTowNumbers(a:Int , b:Int , action: (Int,Int) -&gt; Int)\n    {\n        val result = action(a,b)\n            println(result)\n    }\n}\n</code></pre>\n<p>and call it like:</p>\n<pre><code>fun main(args: Array&lt;String&gt;)\n{\n    val x = XX();\n    val myLambda: (Int, Int) -&gt; Int = {x,y -&gt;  x+y}\n\n    x.addTowNumbers(2,5, myLambda)\n}\n</code></pre>\n<p>But saw a new way today which is below.</p>\n<p>lambda function:</p>\n<pre><code> val sum: (Int, Int) -&gt; Int = { x, y -&gt; x + y }\n</code></pre>\n<p>High level function where lambda function is used as parameter:</p>\n<pre><code> fun applyOp(x: Int, y: Int, op: (Int, Int) -&gt; Int): Int = op(x, y)\n</code></pre>\n<p>And calls it like:</p>\n<pre><code> applyOp(2, 3, sum)\n</code></pre>\n<p>So, now my confusion is with the high level function. How is there 2 colons in the parameter</p>\n<blockquote>\n<p>op: (Int, Int) -&gt; Int): Int = op(x, y)</p>\n</blockquote>\n<p>also, why is there a equal sign?</p>\n<p>What is the total lambda parameter doing?</p>\n"}, {"tags": ["firebase", "kotlin", "firebase-realtime-database", "flutter", "androidx"], "answers": [{"tags": [], "owner": {"reputation": 1502, "user_id": 3969602, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p3KUd.jpg?s=128&g=1", "display_name": "Corey Cole", "link": "https://stackoverflow.com/users/3969602/corey-cole"}, "is_accepted": false, "score": 1, "last_activity_date": 1571854460, "creation_date": 1571854460, "answer_id": 58528798, "question_id": 58528230, "link": "https://stackoverflow.com/questions/58528230/flutter-firebase-realtime-database-firebaseapp-with-name-default-doesnt-exist/58528798#58528798", "title": "Flutter Firebase Realtime Database FirebaseApp with name DEFAULT doesn&#39;t exist. Available app names: [DEFAULT]", "body": "<p>I finally found the solution</p>\n\n<p>change this</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>    final firebaseApp = FirebaseApp(name: 'DEFAULT');\n</code></pre>\n\n<p>to this</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>    final firebaseApp = FirebaseApp(name: '[DEFAULT]');\n</code></pre>\n\n<p>\ud83d\ude1e</p>\n"}], "owner": {"reputation": 1502, "user_id": 3969602, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p3KUd.jpg?s=128&g=1", "display_name": "Corey Cole", "link": "https://stackoverflow.com/users/3969602/corey-cole"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1571854460, "creation_date": 1571852123, "last_edit_date": 1571854290, "question_id": 58528230, "link": "https://stackoverflow.com/questions/58528230/flutter-firebase-realtime-database-firebaseapp-with-name-default-doesnt-exist", "title": "Flutter Firebase Realtime Database FirebaseApp with name DEFAULT doesn&#39;t exist. Available app names: [DEFAULT]", "body": "<p>How I made the repo:</p>\n\n<ul>\n<li><code>flutter create --androidx -i swift -a kotlin test_firebase_app</code></li>\n<li>Follow Flutter Firebase instructions <a href=\"https://firebase.google.com/docs/flutter/setup\" rel=\"nofollow noreferrer\">here</a></li>\n<li>Upgrade kotlin version to <code>1.3.50</code> in <code>android/build.gradle</code></li>\n</ul>\n\n<pre><code>\n    buildscript {\n        ext.kotlin_version = '1.3.50'\n        // ...\n    }\n\n</code></pre>\n\n<ul>\n<li>upgrade gradle version to 3.5.0</li>\n</ul>\n\n<pre><code>\n    dependencies {\n       classpath 'com.android.tools.build:gradle:3.5.0'\n    }\n\n</code></pre>\n\n<ul>\n<li>upgrade gradle wrapper distributionUrl <a href=\"https://developer.android.com/studio/releases/gradle-plugin.html#updating-gradle\" rel=\"nofollow noreferrer\">to support the gradle version</a></li>\n</ul>\n\n<pre><code>\n    distributionUrl=https\\://services.gradle.org/distributions/gradle-5.4.1-all.zip\n\n</code></pre>\n\n<ul>\n<li>add android x support libraries in <code>android/app/build.gradle</code></li>\n</ul>\n\n<pre><code>\n    dependencies {\n        // ...\n        implementation 'androidx.appcompat:appcompat:1.1.0'\n        implementation \"androidx.core:core-ktx:1.1.0\"\n    }\n\n</code></pre>\n\n<ul>\n<li>apply google-services plugin at end of <code>android/app/build.gradle</code></li>\n</ul>\n\n<pre><code>\n    apply plugin: 'com.google.gms.google-services'\n\n</code></pre>\n\n<ul>\n<li>check the firebase database connection in <code>main.dart</code></li>\n</ul>\n\n<pre class=\"lang-dart prettyprint-override\"><code>\n    void main() {\n      final firebaseApp = FirebaseApp(name: 'DEFAULT');\n      final db = FirebaseDatabase(\n          app: firebaseApp\n      ).reference();\n      print('checking db connection!');\n      db.child('rooms').once().then((result) =&gt; print('result = $result'));\n\n      runApp(MyApp());\n    }\n\n</code></pre>\n\n<p>Getting the error:</p>\n\n<pre><code>[        ] I/flutter (20246): checking db connection!\n[  +38 ms] E/MethodChannel#plugins.flutter.io/firebase_database(20246): Failed to handle method call\n[        ] E/MethodChannel#plugins.flutter.io/firebase_database(20246): java.lang.IllegalStateException: FirebaseApp with name DEFAULT doesn't exist. Available app names: [DEFAULT]\n[        ] E/MethodChannel#plugins.flutter.io/firebase_database(20246):     at com.google.firebase.FirebaseApp.getInstance(com.google.firebase:firebase-common@@17.0.0:269)\n[        ] E/MethodChannel#plugins.flutter.io/firebase_database(20246):     at io.flutter.plugins.firebase.database.FirebaseDatabasePlugin.onMethodCall(FirebaseDatabasePlugin.java:241)\n[        ] E/MethodChannel#plugins.flutter.io/firebase_database(20246):     at io.flutter.plugin.common.MethodChannel$IncomingMethodCallHandler.onMessage(MethodChannel.java:222)\n[        ] E/MethodChannel#plugins.flutter.io/firebase_database(20246):     at io.flutter.embedding.engine.dart.DartMessenger.handleMessageFromDart(DartMessenger.java:96)\n[        ] E/MethodChannel#plugins.flutter.io/firebase_database(20246):     at io.flutter.embedding.engine.FlutterJNI.handlePlatformMessage(FlutterJNI.java:656)\n[        ] E/MethodChannel#plugins.flutter.io/firebase_database(20246):     at android.os.MessageQueue.nativePollOnce(Native Method)\n[        ] E/MethodChannel#plugins.flutter.io/firebase_database(20246):     at android.os.MessageQueue.next(MessageQueue.java:326)\n[        ] E/MethodChannel#plugins.flutter.io/firebase_database(20246):     at android.os.Looper.loop(Looper.java:160)\n[        ] E/MethodChannel#plugins.flutter.io/firebase_database(20246):     at android.app.ActivityThread.main(ActivityThread.java:6669)\n[        ] E/MethodChannel#plugins.flutter.io/firebase_database(20246):     at java.lang.reflect.Method.invoke(Native Method)\n[        ] E/MethodChannel#plugins.flutter.io/firebase_database(20246):     at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\n[        ] E/MethodChannel#plugins.flutter.io/firebase_database(20246):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:858)\n</code></pre>\n"}, {"tags": ["android", "kotlin", "google-play", "bluetooth-lowenergy", "foreground-service"], "comments": [{"owner": {"reputation": 2251, "user_id": 5607457, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/JtWc0.jpg?s=128&g=1", "display_name": "Denis", "link": "https://stackoverflow.com/users/5607457/denis"}, "edited": false, "score": 0, "creation_date": 1583496512, "post_id": 58528160, "comment_id": 107146263, "body": "I&#39;m facing the same problem, did you get more info?"}, {"owner": {"reputation": 145, "user_id": 8839856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f620268c951601458f4e4813af19337?s=128&d=identicon&r=PG", "display_name": "atotalnoob", "link": "https://stackoverflow.com/users/8839856/atotalnoob"}, "reply_to_user": {"reputation": 2251, "user_id": 5607457, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/JtWc0.jpg?s=128&g=1", "display_name": "Denis", "link": "https://stackoverflow.com/users/5607457/denis"}, "edited": false, "score": 0, "creation_date": 1585631682, "post_id": 58528160, "comment_id": 107821404, "body": "Yes. It does affect updates, from what we have gathered. nothing will update if you have an always running service. You should listen to if there is an update available or not (see <a href=\"https://developer.android.com/guide/playcore/in-app-updates\" rel=\"nofollow noreferrer\">developer.android.com/guide/playcore/in-app-updates</a> ). We toggle our service off during a few down time hours."}, {"owner": {"reputation": 145, "user_id": 8839856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f620268c951601458f4e4813af19337?s=128&d=identicon&r=PG", "display_name": "atotalnoob", "link": "https://stackoverflow.com/users/8839856/atotalnoob"}, "reply_to_user": {"reputation": 2251, "user_id": 5607457, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/JtWc0.jpg?s=128&g=1", "display_name": "Denis", "link": "https://stackoverflow.com/users/5607457/denis"}, "edited": false, "score": 0, "creation_date": 1585631932, "post_id": 58528160, "comment_id": 107821463, "body": "We tested around 7 devices for 2 weeks and got about 70% to update with a 6 hour downtime window each night. I wish my bosses let me just prompt the users to update. Using the API above, you can do that."}], "owner": {"reputation": 145, "user_id": 8839856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f620268c951601458f4e4813af19337?s=128&d=identicon&r=PG", "display_name": "atotalnoob", "link": "https://stackoverflow.com/users/8839856/atotalnoob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1571855142, "creation_date": 1571851868, "last_edit_date": 1571855142, "question_id": 58528160, "link": "https://stackoverflow.com/questions/58528160/does-an-always-running-foreground-service-affect-play-store-auto-update", "title": "Does an always running foreground service affect play store auto update?", "body": "<p>I have an app that has an always running foreground service (restarts itself if it is killed) that uses BLE. We installed it on some tablets that are connected to wifi and cell, can update over any network, and auto updates are enabled. </p>\n\n<p>The problem is, the tablets have versions from almost 4 weeks ago running on them despite publishing 4-5 new versions since then. Other apps are updating. Why isn't my app updating? </p>\n\n<p>The tablets are on Android versions 7, 8, and 9. </p>\n"}, {"tags": ["android", "kotlin", "android-room", "android-livedata"], "comments": [{"owner": {"reputation": 2444, "user_id": 287761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UZJAT.png?s=128&g=1", "display_name": "Enselic", "link": "https://stackoverflow.com/users/287761/enselic"}, "edited": false, "score": 0, "creation_date": 1571854161, "post_id": 58527820, "comment_id": 103381502, "body": "I would update the graph directly while the app runs without taking the detour over Room, and only use the database to initialize the graph when the app is restarted."}], "answers": [{"comments": [{"owner": {"reputation": 377, "user_id": 10165118, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IMl37.jpg?s=128&g=1", "display_name": "P. Leibner", "link": "https://stackoverflow.com/users/10165118/p-leibner"}, "edited": false, "score": 0, "creation_date": 1571904265, "post_id": 58530176, "comment_id": 103396138, "body": "Thanks for your input, that definitively clears some things up for me! I will take a look into RxJava!"}], "tags": [], "owner": {"reputation": 1427, "user_id": 1815052, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bed5ab71b8d23d9bf07a5fa12915699c?s=128&d=identicon&r=PG", "display_name": "SqueezyMo", "link": "https://stackoverflow.com/users/1815052/squeezymo"}, "is_accepted": true, "score": 1, "last_activity_date": 1571861109, "last_edit_date": 1571861109, "creation_date": 1571860778, "answer_id": 58530176, "question_id": 58527820, "link": "https://stackoverflow.com/questions/58527820/android-livedata-observer-alternative-with-respect-to-performance/58530176#58530176", "title": "Android LiveData Observer alternative with respect to performance", "body": "<p>LiveData is <strong>not</strong> a stream. It is meant to represent a self-sufficient state; it should <strong>not</strong> be used for a series of independent events that you build your state upon. When you use it as intended, you should not be worried about skipping states as you only care about the current state.</p>\n\n<p>What you seem to be pursuing is a reactive stream. If you use Room, you may try RxJava and represent your measurement events as a <code>Flowable</code> stream. That would give you full control over backpressure (you can be explicit about whether you want to skip events, or buffer them, etc). Room has a <a href=\"https://developer.android.com/training/data-storage/room/accessing-data#query-rxjava\" rel=\"nofollow noreferrer\">built-in support</a> for Rx-observable queries.</p>\n\n<p>Another approach would be using LiveData that always gives a full dataset but I'm not sure if that would satisfy your constraints.</p>\n"}], "owner": {"reputation": 377, "user_id": 10165118, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IMl37.jpg?s=128&g=1", "display_name": "P. Leibner", "link": "https://stackoverflow.com/users/10165118/p-leibner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 695, "favorite_count": 1, "accepted_answer_id": 58530176, "answer_count": 1, "score": 2, "last_activity_date": 1571861109, "creation_date": 1571850325, "question_id": 58527820, "link": "https://stackoverflow.com/questions/58527820/android-livedata-observer-alternative-with-respect-to-performance", "title": "Android LiveData Observer alternative with respect to performance", "body": "<p>I am currently developing an app that among other things is able to record the smartphones sensors like acceleration etc. and plot them with the help of the GraphView library. At the moment im reading the sensors value into a Room SQLite database and then by using an observer that observes the table with the help of a LiveData object im getting the new measurements and add the last new measurement to series in the Graph. This is how I update the Graph:\n</p>\n\n<pre><code>sharedViewModel.allAccelerations.observe(viewLifecycleOwner, Observer&lt;List&lt;MeasurementDatabaseHelper.Measurement&gt;&gt; { measurements -&gt;\n    if (sharedViewModel.isReset.value == true &amp;&amp; measurements.isNotEmpty()) {\n        val time = (measurements.last().time.toDouble() - measurements.first().time.toDouble())*1e-9\n        val accX = measurements.last().accX.toDouble()\n        series.appendData(DataPoint(time, accX), true, 50)\n\n    }\n</code></pre>\n\n<p>My Problem is however that the Observer does not react to every added measurement, so that im skipping values when I add the last measurement to the series. I could surely write code that checks how many values have to be added every time the Observer reacts to a LiveData change, but that does not seem like a good option in terms of performance for me. Does anybody maybe have a better idea how to synchronize the measurements in the database with the GraphViews series?</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 4815, "user_id": 2418224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zSFiW.png?s=128&g=1", "display_name": "juzraai", "link": "https://stackoverflow.com/users/2418224/juzraai"}, "edited": false, "score": 1, "creation_date": 1571848810, "post_id": 58527199, "comment_id": 103379246, "body": "Of course it&#39;s not running while phone is turned off. That&#39;s the point of turning off the phone. Android can&#39;t turn on the phone if that&#39;s what you&#39;re expecting. - <a href=\"https://stackoverflow.com/questions/10674849/programmatically-auto-power-on-the-phone?rq=1\" title=\"programmatically auto power on the phone\">stackoverflow.com/questions/10674849/&hellip;</a>"}, {"owner": {"reputation": 191, "user_id": 8974975, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IfLtg.png?s=128&g=1", "display_name": "Irvin Joao", "link": "https://stackoverflow.com/users/8974975/irvin-joao"}, "reply_to_user": {"reputation": 4815, "user_id": 2418224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zSFiW.png?s=128&g=1", "display_name": "juzraai", "link": "https://stackoverflow.com/users/2418224/juzraai"}, "edited": false, "score": 0, "creation_date": 1571851866, "post_id": 58527199, "comment_id": 103380563, "body": "I mean when the screen is off it stops working. Not when the cell phone is off, it will obviously not work. Edit my post and I was more specific"}], "owner": {"reputation": 191, "user_id": 8974975, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IfLtg.png?s=128&g=1", "display_name": "Irvin Joao", "link": "https://stackoverflow.com/users/8974975/irvin-joao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571856434, "creation_date": 1571847599, "last_edit_date": 1571856434, "question_id": 58527199, "link": "https://stackoverflow.com/questions/58527199/service-does-not-work-when-the-screen-is-off", "title": "Service does not work when the screen is off", "body": "<p>I have a function which is responsible for detecting my location along with the location of some records that I have in the realm of my database. I calculate a range of approximately 30 meters. If my location is close to the range, it will be saved as a record in another Realm class.</p>\n\n<p>All good until there, but when the phone's screen is turned off, it stops working. </p>\n\n<p>I don't know how to make it work, I need to keep recording while the screen is off. I use a timer in the service. I was investigating what WorkManager is, but I don't think that's what I need.</p>\n\n<p>Can you help me how to improve my code?</p>\n\n<p>Thank you!</p>\n\n<pre><code>class DistanceService : Service() {\n\nprivate val timer = Timer()\n\noverride fun onBind(intent: Intent): IBinder? {\n    Log.i(\"service\", \"Close DistanceService2\")\n    return null\n}\n\noverride fun onCreate() {\n    Log.i(\"service\", \"Iniciando DistanceService\")\n    super.onCreate()\n}\n\nprivate fun startService() {\n    stopService(Intent(this, AlertRepartoSleepService::class.java))\n    timer.scheduleAtFixedRate(mainTask(), 0, 2000)\n}\n\nprivate inner class mainTask : TimerTask() {\n    override fun run() {\n        toastHandler.sendEmptyMessage(0)\n    }\n}\n\nprivate val toastHandler = @SuppressLint(\"HandlerLeak\")\nobject : Handler() {\n    override fun handleMessage(msg: Message) {\n        val gps = Gps(this@DistanceService)\n        if (gps.isLocationEnabled()) {\n            if (gps.latitude.toString() != \"0.0\" || gps.longitude.toString() != \"0.0\") {\n                distance(this@DistanceService, gps.latitude.toString(), gps.longitude.toString())\n                val toast = Toast.makeText(applicationContext, \"Rango SuministroReparto\", Toast.LENGTH_SHORT)\n                toast.setGravity(Gravity.TOP, Gravity.CENTER, 0)\n                toast.show()\n            } else {\n                Util.toastMensaje(applicationContext, \"Gps Sin Cobertura\")\n            }\n        }\n    }\n}\n\noverride fun onDestroy() {\n    timer.cancel()\n    Log.i(\"service\", \"Close DistanceService\")\n}\n\noverride fun onStartCommand(intent: Intent?, flags: Int, startId: Int): Int {\n    startService()\n    return START_STICKY\n}\n\nprivate fun distance(context: Context, latitud: String, longitud: String) {\n    Completable.fromAction {\n        Realm.getDefaultInstance().use { realm -&gt;\n            val suministroImp: SuministroImplementation = SuministroOver(realm)\n            val registroImp: RegistroImplementation = RegistroOver(realm)\n\n            val result: RealmResults&lt;SuministroReparto&gt;? = suministroImp.getSuministroReparto(1)\n            if (result != null) {\n                if (result.size != 0) {\n                    for (r: SuministroReparto in result) {\n                        if (r.latitud.isNotEmpty() &amp;&amp; r.longitud.isNotEmpty()) {\n                            val l1 = Location(\"location 1\")\n                            l1.latitude = r.latitud.toDouble()\n                            l1.longitude = r.longitud.toDouble()\n                            val l2 = Location(\"location 2\")\n                            l2.latitude = latitud.toDouble()\n                            l2.longitude = longitud.toDouble()\n\n                            try {\n                                val distancia = calculationByDistance(l1, l2)\n                                if (distancia &lt;= 15) {\n                                    if (r.foto_Reparto != 0) {\n                                        val repartoId = registroImp.getRegistroIdentity()\n                                        if (r.foto_Reparto != 2) {\n                                            suministroImp.repartoSaveService(registroImp.getRegistroIdentity(), r.id_Reparto, r.id_Operario_Reparto, Util.getFechaActual(), latitud, longitud, r.id_observacion.toString(), 0)\n                                        }\n                                        context.startService(Intent(context, AlertRepartoSleepService::class.java)\n                                                .putExtra(\"Cod_Orden_Reparto\", r.Cod_Orden_Reparto)\n                                                .putExtra(\"id_cab_Reparto\", r.id_Reparto)\n                                                .putExtra(\"direction\", r.Direccion_Reparto)\n                                                .putExtra(\"suministroNumeroReparto\", r.Suministro_Numero_reparto)\n                                                .putExtra(\"foto\", r.foto_Reparto)\n                                                .putExtra(\"operarioId\", r.id_Operario_Reparto)\n                                                .putExtra(\"cliente\", r.Cliente_Reparto)\n                                                .putExtra(\"registroId\", repartoId))\n                                        stopSelf()\n                                        break\n                                    } else {\n                                        suministroImp.repartoSaveService(registroImp.getRegistroIdentity(), r.id_Reparto, r.id_Operario_Reparto, Util.getFechaActual(), latitud, longitud, r.id_observacion.toString(), 1)\n                                    }\n                                }\n                            } catch (e: Exception) {\n                                Util.toastMensaje(applicationContext, e.toString())\n                            }\n                        }\n                    }\n                } else {\n                    notification(this@DistanceService)\n                }\n            }\n        }\n    }.subscribeOn(Schedulers.io())\n            .observeOn(AndroidSchedulers.mainThread())\n            .subscribe(object : CompletableObserver {\n                override fun onComplete() {\n                    Log.i(\"TAG\", \"COMPLETADO\")\n                }\n\n                override fun onSubscribe(d: Disposable) {\n\n                }\n\n                override fun onError(e: Throwable) {\n                    Log.i(\"TAG\", e.toString())\n                }\n            })\n}\n\nprivate fun calculationByDistance(StartP: Location, EndP: Location): Double {\n    val radius = 6371 * 1000\n    val lat1 = StartP.latitude\n    val lat2 = EndP.latitude\n    val lon1 = StartP.longitude\n    val lon2 = EndP.longitude\n    val dLat = Math.toRadians(lat2 - lat1)\n    val dLon = Math.toRadians(lon2 - lon1)\n    val a = sin(dLat / 2) * sin(dLat / 2) + (cos(Math.toRadians(lat1))\n            * cos(Math.toRadians(lat2)) * sin(dLon / 2)\n            * sin(dLon / 2))\n    val c = 2 * asin(sqrt(a))\n    val valueResult = radius * c\n    val m = valueResult / 1\n    val newFormat = DecimalFormat(\"####\")\n    val mInDec = Integer.valueOf(newFormat.format(m))\n    return mInDec.toDouble()\n}\n\nprivate fun getBasicNotificationBuilder(context: Context, channelId: String, playSound: Boolean)\n        : NotificationCompat.Builder {\n    val notificationSound: Uri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION)\n    val nBuilder = NotificationCompat.Builder(context, channelId)\n            .setSmallIcon(R.mipmap.ic_launcher)\n            .setLargeIcon(BitmapFactory.decodeResource(context.resources, R.mipmap.ic_launcher))\n            .setAutoCancel(true)\n            .setDefaults(0)\n    if (playSound) nBuilder.setSound(notificationSound)\n    return nBuilder\n}\n\nprivate fun notification(context: Context) {\n    val intent = Intent(context, MainActivity::class.java)\n    intent.flags = Intent.FLAG_ACTIVITY_NEW_TASK or Intent.FLAG_ACTIVITY_CLEAR_TASK\n    val pendingIntent = PendingIntent.getActivity(context, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT)\n    val nBuilder = getBasicNotificationBuilder(context, CHANNEL_ID_TIMER, false)\n    nBuilder.setContentTitle(String.format(\"Reparto\"))\n            .setContentText(\"Acabas de culminar tus repartos . Tomar selfie FIN DE TRABAJO\")\n            .setVibrate(longArrayOf(1000, 1000, 1000, 1000, 1000))\n            .setAutoCancel(true)\n            .setContentIntent(pendingIntent)\n    val nManager = context.getSystemService(Context.NOTIFICATION_SERVICE) as NotificationManager\n    nManager.createNotificationChannel(CHANNEL_ID_TIMER, CHANNEL_NAME_TIMER, true)\n    nManager.notify(1, nBuilder.build())\n}\n\n@TargetApi(26)\nprivate fun NotificationManager.createNotificationChannel(channelID: String,\n                                                          channelName: String,\n                                                          playSound: Boolean) {\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n        val channelImportance = if (playSound) NotificationManager.IMPORTANCE_DEFAULT\n        else NotificationManager.IMPORTANCE_LOW\n        val nChannel = NotificationChannel(channelID, channelName, channelImportance)\n        nChannel.enableLights(true)\n        nChannel.lightColor = Color.BLUE\n        this.createNotificationChannel(nChannel)\n    }\n}\n\ncompanion object {\n    private const val CHANNEL_ID_TIMER = \"enable_gps\"\n    private const val CHANNEL_NAME_TIMER = \"Dsige_Enable_Gps\"\n    private const val TIMER_ID = 0\n}\n}\n</code></pre>\n"}, {"tags": ["kotlin", "kdoc"], "comments": [{"owner": {"reputation": 3475, "user_id": 9681755, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vyDTlPZMld4/AAAAAAAAAAI/AAAAAAAACWY/knwZhoXIt8w/photo.jpg?sz=128", "display_name": "Dirk Deyne", "link": "https://stackoverflow.com/users/9681755/dirk-deyne"}, "edited": false, "score": 0, "creation_date": 1571853491, "post_id": 58527038, "comment_id": 103381217, "body": "Your code won&#39;t compile <code>Conflicting overloads</code>"}, {"owner": {"reputation": 2444, "user_id": 287761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UZJAT.png?s=128&g=1", "display_name": "Enselic", "link": "https://stackoverflow.com/users/287761/enselic"}, "edited": false, "score": 0, "creation_date": 1571853907, "post_id": 58527038, "comment_id": 103381392, "body": "While we wait on the author to update the question you can replace <code>b: String</code> with <code>b: Int</code> and it will compile."}], "owner": {"reputation": 233, "user_id": 2107065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yXjic.png?s=128&g=1", "display_name": "Jan Gillich", "link": "https://stackoverflow.com/users/2107065/jan-gillich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 143, "favorite_count": 0, "answer_count": 0, "score": 6, "last_activity_date": 1571865803, "creation_date": 1571846906, "last_edit_date": 1571865803, "question_id": 58527038, "link": "https://stackoverflow.com/questions/58527038/how-do-i-reference-a-secondary-constructor-in-kdoc", "title": "How do I reference a secondary constructor in KDoc?", "body": "<p>I have a Kotlin class with a secondary constructor, that is supposed to be used in a certain scenario. Now this should be properly documented from the first constructor so you can see it right away.</p>\n\n<pre><code>/**\n* This is my class.\n* \n* @constructor This is the primary constructor meant for Scenario A.\n* If you are in Scenario B, please use [reference to secondary constructor] &lt;- what do I put in here?\n*/\nclass MyClass(val a: String) {\n\n    constructor(b: Int) : this(\"$b abc\")\n\n}\n</code></pre>\n\n<p>I have not the slightest idea what to put in the square brackets that are meant for referencing members/functions, but I feel it should be possible.\nWould be great if somebody knows more about this \ud83d\ude4f</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "edited": false, "score": 0, "creation_date": 1571846315, "post_id": 58526685, "comment_id": 103378042, "body": "If you don&#39;t find one, you can implement your own with <a href=\"https://kotlinlang.org/docs/reference/extensions.html\" rel=\"nofollow noreferrer\">extension functions</a>. E.g. <code>fun List.zipWithNext(): List { &#47;&#47; ... }</code>"}, {"owner": {"reputation": 34704, "user_id": 1746118, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/a4a3P.png?s=128&g=1", "display_name": "Naman", "link": "https://stackoverflow.com/users/1746118/naman"}, "edited": false, "score": 1, "creation_date": 1571848307, "post_id": 58526685, "comment_id": 103378995, "body": "Updating the tags, considering the title points it out correctly yo be Kotlin specific."}], "answers": [{"tags": [], "owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "is_accepted": true, "score": 1, "last_activity_date": 1571848958, "last_edit_date": 1571848958, "creation_date": 1571848248, "answer_id": 58527337, "question_id": 58526685, "link": "https://stackoverflow.com/questions/58526685/kotlin-zip-each-element-with-the-one-which-is-two-indexes-ahead/58527337#58527337", "title": "Kotlin zip each element with the one which is two indexes ahead", "body": "<p>For this requirement the list's size must be a multiple of 4, like this:</p>\n\n<pre><code>val list = mutableListOf(\"e1\", \"e2\", \"e3\", \"e4\", \"e5\", \"e6\", \"e7\", \"e8\")\n</code></pre>\n\n<p>So what you can do first is to swap the items in positions <em>1</em> and <em>2</em>, <em>5</em> and <em>6</em>, <em>9</em> and <em>10</em> and so on:</p>\n\n<pre><code>for (i in 0..list.size / 4 - 1) \n    list[4 * i + 1] = list[4 * i + 2].also { list[4 * i + 2] = list[4 * i + 1] }\n</code></pre>\n\n<p>Now the list is this:</p>\n\n<pre><code>[e1, e3, e2, e4, e5, e7, e6, e8]\n</code></pre>\n\n<p>Finally use <code>chunked(2)</code> to split the list in lists of 2 successive items: </p>\n\n<pre><code>val newList = list.chunked(2)\nprintln(newList)\n</code></pre>\n\n<p>will print:</p>\n\n<pre><code>[[e1, e3], [e2, e4], [e5, e7], [e6, e8]]\n</code></pre>\n\n<p>If your initial list is not mutable or you want it unchanged, then create a new mutable list and operate on it:</p>\n\n<pre><code>val originalList = listOf(\"e1\", \"e2\", \"e3\", \"e4\", \"e5\", \"e6\", \"e7\", \"e8\")\nval list = originalList.toMutableList()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 806, "user_id": 1079842, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VDKW0.png?s=128&g=1", "display_name": "Mojtaba Haddadi", "link": "https://stackoverflow.com/users/1079842/mojtaba-haddadi"}, "is_accepted": false, "score": 1, "last_activity_date": 1571854316, "creation_date": 1571854316, "answer_id": 58528765, "question_id": 58526685, "link": "https://stackoverflow.com/questions/58526685/kotlin-zip-each-element-with-the-one-which-is-two-indexes-ahead/58528765#58528765", "title": "Kotlin zip each element with the one which is two indexes ahead", "body": "<p>you should do bunch of works.</p>\n\n<pre><code>val items = listOf(\"e1\", \"e2\", \"e3\", \"e4\", \"e5\", \"e6\", \"e7\", \"e8\")\n\nval partitionedItems = items.withIndex().partition { (index, _) -&gt; index % 2 == 0 }\n\nval oddList = partitionedItems.first.map { it.value }\nval evenList = partitionedItems.second.map { it.value }\n</code></pre>\n\n<p>here we have odd and even lists like this: </p>\n\n<blockquote>\n  <p>[e1, e3, e5, e7]</p>\n  \n  <p>[e2, e4, e6, e8]</p>\n</blockquote>\n\n<p>next do a zipWithNext()</p>\n\n<pre><code>oddList.zipWithNext()\n</code></pre>\n\n<p>this creates data like this</p>\n\n<blockquote>\n  <p>[(e1, e3), (e3, e5), (e5, e7)]</p>\n</blockquote>\n\n<p>but we don't need this item : </p>\n\n<blockquote>\n  <p>(e3, e5)</p>\n</blockquote>\n\n<p>thus we should filter it.</p>\n\n<pre><code>val oddListPair = oddList.zipWithNext().withIndex().filter { (index, _) -&gt; index % 2 == 0 }.map { it.value }\n</code></pre>\n\n<p>at last we have </p>\n\n<blockquote>\n  <p>[(e1, e3), (e5, e7)]</p>\n</blockquote>\n\n<p>in last step we should merge two odd and even lists.</p>\n\n<pre><code>oddListPair.zip(evenListPair){ a,b -&gt; listOf(a,b)}.flatten()\n</code></pre>\n\n<p>full code is this.</p>\n\n<pre><code>val items = listOf(\"e1\", \"e2\", \"e3\", \"e4\", \"e5\", \"e6\", \"e7\", \"e8\")\nval partitionedItems = items.withIndex().partition { (index, _) -&gt; index % 2 == 0 }\n\nval oddList = partitionedItems.first.map { it.value } \nval evenList = partitionedItems.second.map { it.value }\n\nval oddListPair = oddList.zipWithNext().withIndex().filter { (index, _) -&gt; index % 2 == 0 }.map { it.value }\nval evenListPair = evenList.zipWithNext().withIndex().filter { (index, _) -&gt; index % 2 == 0 }.map { it.value }\n\noddListPair.zip(evenListPair){ a,b -&gt; listOf(a,b)}.flatten()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "edited": false, "score": 0, "creation_date": 1571863469, "post_id": 58529522, "comment_id": 103385334, "body": "This is not what the OP wants."}, {"owner": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "reply_to_user": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "edited": false, "score": 0, "creation_date": 1571908477, "post_id": 58529522, "comment_id": 103398277, "body": "@forpas It isn&#39;t? How so?"}, {"owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "edited": false, "score": 0, "creation_date": 1571913639, "post_id": 58529522, "comment_id": 103401026, "body": "This is the expected result: <code>[(e1, e3), (e2, e4), (e5, e7), (e6, e8)]</code>"}, {"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 1, "creation_date": 1571920482, "post_id": 58529522, "comment_id": 103404642, "body": "Ok, so be it. I hope this snippet could still be useful as an answer to the first part of the question: &quot;I&#39;d like to zip e1 with e3, e2 with e4 and so forth&quot;"}, {"owner": {"reputation": 185, "user_id": 8075423, "user_type": "registered", "profile_image": "https://graph.facebook.com/1224502660993446/picture?type=large", "display_name": "Radoslav Hubenov", "link": "https://stackoverflow.com/users/8075423/radoslav-hubenov"}, "edited": false, "score": 0, "creation_date": 1571983839, "post_id": 58529522, "comment_id": 103425937, "body": "I&#39;d just like to say that your snippet was in fact useful as well. It came in handy when dealing with another similar problem!"}], "tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": false, "score": 2, "last_activity_date": 1571857592, "creation_date": 1571857592, "answer_id": 58529522, "question_id": 58526685, "link": "https://stackoverflow.com/questions/58526685/kotlin-zip-each-element-with-the-one-which-is-two-indexes-ahead/58529522#58529522", "title": "Kotlin zip each element with the one which is two indexes ahead", "body": "<p><code>items.zipWithNext()</code> function is essentially an optimized version of <code>items.zip(items.drop(1))</code>. </p>\n\n<p>Since you need to zip each item with an item that is <em>two</em> positions away, you can just use\n<code>items.zip(items.drop(2))</code>:</p>\n\n<pre><code>    val items = listOf(\"e1\", \"e2\", \"e3\", \"e4\", \"e5\", \"e6\", \"e7\", \"e8\")\n\n    println(items.zip(items.drop(2)))\n    // prints: [(e1, e3), (e2, e4), (e3, e5), (e4, e6), (e5, e7), (e6, e8)]\n</code></pre>\n"}], "owner": {"reputation": 185, "user_id": 8075423, "user_type": "registered", "profile_image": "https://graph.facebook.com/1224502660993446/picture?type=large", "display_name": "Radoslav Hubenov", "link": "https://stackoverflow.com/users/8075423/radoslav-hubenov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 58527337, "answer_count": 3, "score": 1, "last_activity_date": 1571857592, "creation_date": 1571845761, "last_edit_date": 1571848309, "question_id": 58526685, "link": "https://stackoverflow.com/questions/58526685/kotlin-zip-each-element-with-the-one-which-is-two-indexes-ahead", "title": "Kotlin zip each element with the one which is two indexes ahead", "body": "<p>I have a list with <code>(e1, e2, e3, e4, e5...)</code>. I'd like to zip <code>e1</code> with <code>e3</code>, <code>e2</code> with <code>e4</code> and so forth.</p>\n\n<p>I could not find a zip method which lets you choose which element to zip with the current one.</p>\n\n<pre><code>items.map { item -&gt; item.zipWithNext() } \n[e1, e2, e3, e4, e5, e6, e7, e8] -&gt; [(e1, e3), (e2, e4), (e5, e7), (e6, e8)]\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 1, "creation_date": 1571863880, "post_id": 58530713, "comment_id": 103385490, "body": "I like to call the first variant <code>getXxxxWithChanges()</code> and the second as just <code>getXxxx()</code>. Suspend isn&#39;t really sync, I feel."}], "tags": [], "owner": {"reputation": 29, "user_id": 548190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f95521131343273eab6a7813dee0908b?s=128&d=identicon&r=PG", "display_name": "samuelh", "link": "https://stackoverflow.com/users/548190/samuelh"}, "is_accepted": false, "score": 0, "last_activity_date": 1571863232, "creation_date": 1571863232, "answer_id": 58530713, "question_id": 58524969, "link": "https://stackoverflow.com/questions/58524969/conceptually-how-do-i-do-a-simple-read-update-cycle-using-livedata-and-room/58530713#58530713", "title": "Conceptually, how do I do a simple Read/Update cycle using LiveData and Room?", "body": "<p>I think I figured out something that's not a terrible solution, by reading the reference for Room here: <a href=\"https://developer.android.com/training/data-storage/room/accessing-data\" rel=\"nofollow noreferrer\">https://developer.android.com/training/data-storage/room/accessing-data</a></p>\n\n<p>The crux of it is that Room can return LiveData, or it can return what I would call synchronous queries.  It's the difference between the following two signatures:</p>\n\n<pre><code>@Query(\"SELECT * FROM profileData WHERE entry = :entry limit 1\")\nfun getProfileData(entry: String): LiveData&lt;ProfileData?&gt;\n\n@Query(\"SELECT * FROM profileData WHERE entry = :entry limit 1\")\nsuspend fun getProfileDataSync(entry: String): ProfileData\n</code></pre>\n\n<p>The first one you would observe, the second one you could call directly from a coroutine.</p>\n\n<p>Someone should let me know if this is not best practice, but it seems like that reference material above supports it. </p>\n\n<p>To note, I didn't have to put the Room DB in any kind of weird synchronous mode to support this.</p>\n"}], "owner": {"reputation": 29, "user_id": 548190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f95521131343273eab6a7813dee0908b?s=128&d=identicon&r=PG", "display_name": "samuelh", "link": "https://stackoverflow.com/users/548190/samuelh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571863232, "creation_date": 1571840334, "question_id": 58524969, "link": "https://stackoverflow.com/questions/58524969/conceptually-how-do-i-do-a-simple-read-update-cycle-using-livedata-and-room", "title": "Conceptually, how do I do a simple Read/Update cycle using LiveData and Room?", "body": "<p>In a Repository class (see: <a href=\"https://developer.android.com/jetpack/docs/guide\" rel=\"nofollow noreferrer\">https://developer.android.com/jetpack/docs/guide</a>), I'm trying to:</p>\n\n<p>1) Read a value from the Room DB</p>\n\n<p>2) Increment the value</p>\n\n<p>3) Write the value back out through the appDao to Room.</p>\n\n<p>I'm pretty sure I can solve this at the Dao level, ie in a Transaction or something, but I'm not sure if that's the right approach.  It seems like a pretty simple use case, and the solutions I've come up with seem way more complicated than necessary.  I'm wondering if my tenuous handle on Kotlin coroutines is holding me back here.</p>\n\n<pre><code>\n/* Repository Class*/\n\nfun getCurrentAlarmTime():LiveData&lt;Calendar&gt; {\n        return Transformations.map(appDao.getProfileData(currentAlarmTime)){ nullableProfileData -&gt;\n           if (nullableProfileData == null) {\n               defaultAlarmTime\n           } else {\n               nullableProfileData.value.toLongOrNull()?.let { millis -&gt;\n                   getCalendar(millis)\n               }\n           }\n        }\n    }\n\nfun setCurrentAlarmTime(calendar:Calendar) {\n        GlobalScope.launch {\n            appDao.setProfileData(\n                ProfileData(\n                    currentAlarmTime,\n                    calendar.timeInMillis.toString()\n                )\n            )\n        }\n    }\n\nfun incrementAlarmTimeBy1Hour() {\n// this is what I'm having a problem with, using the fns above.\n// I've got a pretty good handle on LiveData, \n// Transformations, and MediatorLiveData, \n// but I am still stuck.\n}\n\nExpected result would be that the time in the database is updated by 1 hour.\n</code></pre>\n"}, {"tags": ["android", "json", "kotlin", "sharedpreferences"], "comments": [{"owner": {"reputation": 374, "user_id": 12201062, "user_type": "registered", "profile_image": "https://graph.facebook.com/376646586550474/picture?type=large", "display_name": "Jarvis", "link": "https://stackoverflow.com/users/12201062/jarvis"}, "edited": false, "score": 0, "creation_date": 1571840842, "post_id": 58524741, "comment_id": 103375107, "body": "Verify that your registrationdate is not null. If it is null, maybe that is causing the error."}, {"owner": {"reputation": 455, "user_id": 10545524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vZhuO.jpg?s=128&g=1", "display_name": "Lina", "link": "https://stackoverflow.com/users/10545524/lina"}, "reply_to_user": {"reputation": 374, "user_id": 12201062, "user_type": "registered", "profile_image": "https://graph.facebook.com/376646586550474/picture?type=large", "display_name": "Jarvis", "link": "https://stackoverflow.com/users/12201062/jarvis"}, "edited": false, "score": 0, "creation_date": 1571841064, "post_id": 58524741, "comment_id": 103375233, "body": "it&#39;s not null, only these attributes of LocaldateTime will change to null"}, {"owner": {"reputation": 37094, "user_id": 543539, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/cCXi8.jpg?s=128&g=1", "display_name": "Egor", "link": "https://stackoverflow.com/users/543539/egor"}, "edited": false, "score": 1, "creation_date": 1571842746, "post_id": 58524741, "comment_id": 103376178, "body": "The snippet you&#39;ve attached doesn&#39;t include any references to <code>LocalDateTime</code>, so it&#39;s hard to tell what exactly is causing the error."}], "owner": {"reputation": 455, "user_id": 10545524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vZhuO.jpg?s=128&g=1", "display_name": "Lina", "link": "https://stackoverflow.com/users/10545524/lina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 573, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571839674, "creation_date": 1571839674, "question_id": 58524741, "link": "https://stackoverflow.com/questions/58524741/method-threw-java-lang-nullpointerexception-exception-cannot-evaluate-java-ti", "title": "Method threw &#39;java.lang.NullPointerException&#39; exception. Cannot evaluate java.time.LocalDateTime.toString()", "body": "<p>In my android app with kotlin, i use a login interfece which I put Email and Password. After a success authetication, I want to stock this User with SharedPreferences. \nThe User has as attribute: birthday,lastlogin and registrationdate of type of \"LocalDateTime\" and others of type String.\nThe following function, is to set the user in sharedpreferences with keyvalue \"lastUser\" : </p>\n\n<pre><code>private val sharedPreferences: SharedPreferences =\n            context.getSharedPreferences(context.packageName, Context.MODE_PRIVATE)\n    fun setUserByKeyValue(key: String,user: UsersData?) {\n        val jsonString = Gson().toJson(user)\n        val editor = sharedPreferences.edit()\n\n        editor.putString(key, jsonString).apply()\n    }\n</code></pre>\n\n<p>The problem is here as the following with the localdatetime: </p>\n\n<pre><code>Method threw 'java.lang.NullPointerException' exception. Cannot evaluate java.time.LocalDateTime.toString()\n</code></pre>\n"}, {"tags": ["java", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 35013, "user_id": 626853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ILPj4.jpg?s=128&g=1", "display_name": "Aasmund Eldhuset", "link": "https://stackoverflow.com/users/626853/aasmund-eldhuset"}, "is_accepted": true, "score": 13, "last_activity_date": 1571839860, "creation_date": 1571839860, "answer_id": 58524819, "question_id": 58524673, "link": "https://stackoverflow.com/questions/58524673/how-to-call-a-top-level-kotlin-function-in-java/58524819#58524819", "title": "How to call a top level kotlin function in java?", "body": "<p><code>foo</code> will be compiled to a static function in a class whose name is that of the Kotlin source file with the suffix <code>Kt</code> - so in this case, you can say <code>UtilKt.foo()</code>.</p>\n"}], "owner": {"reputation": 4128, "user_id": 932656, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/3bbuc.png?s=128&g=1", "display_name": "Chriss", "link": "https://stackoverflow.com/users/932656/chriss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 396, "favorite_count": 0, "accepted_answer_id": 58524819, "answer_count": 1, "score": 3, "last_activity_date": 1571840046, "creation_date": 1571839461, "last_edit_date": 1571840046, "question_id": 58524673, "link": "https://stackoverflow.com/questions/58524673/how-to-call-a-top-level-kotlin-function-in-java", "title": "How to call a top level kotlin function in java?", "body": "<p>Assume a kotlin function is defined outside of a class as top level function. </p>\n\n<p><code>Util.kt</code>:</p>\n\n<pre><code>class Util {\n   fun bar()\n}\nfun foo(){}\n</code></pre>\n\n<p>How can I call method <code>foo()</code> in Java?</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 1266, "user_id": 905414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LgrFf.jpg?s=128&g=1", "display_name": "3mpty", "link": "https://stackoverflow.com/users/905414/3mpty"}, "is_accepted": false, "score": 0, "last_activity_date": 1571863871, "last_edit_date": 1571863871, "creation_date": 1571838018, "answer_id": 58524210, "question_id": 58523887, "link": "https://stackoverflow.com/questions/58523887/kotlin-two-way-data-binding-with-2-edittext/58524210#58524210", "title": "Kotlin - Two Way Data Binding with 2 EditText", "body": "<p>Your issue is not related to data biding at all. Your implementation causes recursive calls to your getters:\nvalueFrom.get() will call valueTo.get() and it will call again valueFrom.get() -> StackOverflowError.</p>\n\n<p>You have to use kotlin backing properties, for example:</p>\n\n<pre><code>class AccessTest {\n\n    var _valueTo: String? = null\n    var _valueFrom: String? = null\n\n    var valueFrom: String? = null\n        get() {\n            return _valueTo + \"SUFFIX\"\n        }\n        set(param) {\n            field = param\n            _valueFrom = param\n        }\n\n    var valueTo: String? = null\n        get() {\n            return _valueFrom + \"SUFFIX\"\n        }\n        set(param) {\n            field = param\n            _valueTo = param\n        }\n\n    @Test\n    fun testAccess() {\n        valueTo= \"valueTo\"\n        valueFrom= \"valueFrom\"\n        print(valueTo)\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4375, "user_id": 2191256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ac211028c226a48ea0232b2600346d4?s=128&d=identicon&r=PG", "display_name": "vilpe89", "link": "https://stackoverflow.com/users/2191256/vilpe89"}, "is_accepted": false, "score": 0, "last_activity_date": 1571844133, "creation_date": 1571844133, "answer_id": 58526227, "question_id": 58523887, "link": "https://stackoverflow.com/questions/58523887/kotlin-two-way-data-binding-with-2-edittext/58526227#58526227", "title": "Kotlin - Two Way Data Binding with 2 EditText", "body": "<p>You need to check the setter's value if it's same value, then do not set it again:</p>\n\n<pre><code>class ConverterModel : BaseObservable() {\n\n    @Bindable\n   var valueFrom: String? = null\n       get() {\n           return valueTo + \"SUFFIX\"\n       }\n       set(param) {\n           if (field == param) return\n           field = param\n           notifyPropertyChanged(BR.valueFrom)\n       }\n\n   @Bindable\n   var valueTo: String? = null\n       get() {\n           return valueFrom + \"SUFFIX\"\n       }\n       set(param) {\n           if (field == param) return\n           field = param\n           notifyPropertyChanged(BR.valueTo)\n       }\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12263289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/431b617517f6f58fca8e72eb44314473?s=128&d=identicon&r=PG&f=1", "display_name": "Luca Huber", "link": "https://stackoverflow.com/users/12263289/luca-huber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1414, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1571863871, "creation_date": 1571836974, "last_edit_date": 1571845728, "question_id": 58523887, "link": "https://stackoverflow.com/questions/58523887/kotlin-two-way-data-binding-with-2-edittext", "title": "Kotlin - Two Way Data Binding with 2 EditText", "body": "<p>I tried out android's two way data binding in kotlin but I can't seem to get it working. I have 2 EditText and each of them should update the other EditText. </p>\n\n<p>For example:\nWhen i enter \"Test\" in EditText1 the EditText2 should get updated with the value from EditText1 plus a suffix <code>(e.g. TestSUFFIX)</code> and vice versa.</p>\n\n<p>These are the layouts for my <code>TextViews</code></p>\n\n<pre><code>&lt;androidx.appcompat.widget.AppCompatEditText\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:text=\"@={convertermodel.valueFrom}\" /&gt;\n\n&lt;androidx.appcompat.widget.AppCompatEditText\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:text=\"@={convertermodel.valueTo}\" /&gt;\n</code></pre>\n\n<p>and this is my <code>ViewModel</code></p>\n\n<pre><code>class ConverterModel : BaseObservable() {\n\n   @Bindable\n   var valueFrom: String? = null\n       get() {\n           return valueTo + \"SUFFIX\"\n       }\n       set(param) {\n           field = param\n           notifyPropertyChanged(BR.valueFrom)\n       }\n\n   @Bindable\n   var valueTo: String? = null\n       get() {\n           return valueFrom + \"SUFFIX\"\n       }\n       set(param) {\n           field = param\n           notifyPropertyChanged(BR.valueTo)\n       }\n}\n</code></pre>\n\n<p>It's causing an infinite loop. How can i prevent this?</p>\n"}, {"tags": ["kotlin", "android-databinding", "android-livedata", "android-viewholder", "android-binding-adapter"], "comments": [{"owner": {"reputation": 2401, "user_id": 12695027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i74ZG.png?s=128&g=1", "display_name": "Scratte", "link": "https://stackoverflow.com/users/12695027/scratte"}, "edited": false, "score": 0, "creation_date": 1618857572, "post_id": 58523664, "comment_id": 118724875, "body": "<a href=\"https://stackoverflow.com/users/9273617\">Roman Karanchuk</a> posted an <a href=\"https://stackoverflow.com/a/67154034\">Answer</a> saying &quot;You can create custom lifecycle scope attached to ViewHolder as was described here: <a href=\"https://stackoverflow.com/questions/60890819/observing-livedata-in-recyclerview\">https://stackoverflow.com/questions/60890819/observing-lived&zwnj;&#8203;ata-in-recyclerview</a>&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 12262902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6156607ba048f7d3602188bb65e40de2?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Agudelo Cruz", "link": "https://stackoverflow.com/users/12262902/daniel-agudelo-cruz"}, "edited": false, "score": 1, "creation_date": 1572010176, "post_id": 58550994, "comment_id": 103437991, "body": "As you can see in my BindingAdapters.kt, <code>app:imageDrawable</code> is specifically set to receive a LiveData&lt;Boolean&gt;. The problem is that the xml is not an activity or fragment layout, but a recycler view item layout, so, I don&#39;t know what to set as a lifecycleowner for the binding."}], "tags": [], "owner": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "is_accepted": false, "score": 0, "last_activity_date": 1571966785, "last_edit_date": 1571966785, "creation_date": 1571966461, "answer_id": 58550994, "question_id": 58523664, "link": "https://stackoverflow.com/questions/58523664/how-to-get-a-recyclerview-item-to-update-itself-from-a-livedata-value-in-its-bi/58550994#58550994", "title": "How to get a RecyclerView Item to update itself from a LiveData value in it&#39;s binding object using BindingAdapter?", "body": "<p><code>app:imageDrawable</code> won't accept any <code>LiveData&lt;Boolean&gt;</code> and I'd wonder why it isn't <code>LiveData&lt;Product&gt;</code>? Try to bind the initial value alike this:</p>\n\n<pre><code>app:imageDrawable=\"@{product.liked ? R.drawable_liked : R.drawable_neutral}\"\n</code></pre>\n\n<p>For <code>LiveData</code> the <code>LifecycleOwner</code> needs to be set for the binding:</p>\n\n<pre><code>class ProductsActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n\n        // Inflate view and obtain an instance of the binding class.\n        val binding: ProductsBinding = DataBindingUtil.setContentView(this, R.layout.products)\n\n        // Specify the current activity as the lifecycle owner.\n        binding.setLifecycleOwner(this)\n    }\n}\n</code></pre>\n\n<p>see the <a href=\"https://developer.android.com/topic/libraries/data-binding/architecture#livedata\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n"}], "owner": {"reputation": 21, "user_id": 12262902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6156607ba048f7d3602188bb65e40de2?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Agudelo Cruz", "link": "https://stackoverflow.com/users/12262902/daniel-agudelo-cruz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 920, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1618785353, "creation_date": 1571836294, "question_id": 58523664, "link": "https://stackoverflow.com/questions/58523664/how-to-get-a-recyclerview-item-to-update-itself-from-a-livedata-value-in-its-bi", "title": "How to get a RecyclerView Item to update itself from a LiveData value in it&#39;s binding object using BindingAdapter?", "body": "<p>I have a recyclerview.widget.ListAdapter to display some cards in a grid. When I click on a card, it comes to the front of the grid, flips, and when you see the front, you are supposed to be able to like it. I have an ImageView on the corner of the front of the card, that is supposed to toggle between liking or not, displaying a different drawable that I have already defined.</p>\n\n<p>My ViewHolder looks like this:</p>\n\n<pre><code>class GameCardViewHolder(private val binding : ItemGameCardBinding) :\n        RecyclerView.ViewHolder(binding.root){\n\n    companion object {\n        fun from(parent: ViewGroup): GameCardViewHolder {\n            val layoutInflater = LayoutInflater.from(parent.context)\n            val binding = ItemGameCardBinding.inflate(layoutInflater, parent, false)\n            return GameCardViewHolder(binding)\n        }\n        ...\n    }\n\n    fun bind(productCard: ProductCard, listener: OnClickListener){\n        binding.productCard = productCard\n        binding.executePendingBindings()\n        ...  \n    }\n}\n</code></pre>\n\n<p>My item_game_card.xml looks like this:</p>\n\n<pre><code>&lt;layout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"&gt;\n\n    &lt;data&gt;\n        &lt;variable\n            name=\"productCard\"\n            type=\"company.app.model.ProductCard\" /&gt;\n    &lt;/data&gt;\n    &lt;androidx.constraintlayout.widget.ConstraintLayout&gt;\n    ...\n        &lt;ImageView\n            android:id=\"@+id/gameItemLikeImageView\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"0dp\"\n            ...\n            app:imageDrawable=\"@{productCard.liked}\"\n            android:onClick=\"@{() -&gt; productCard.toggleLike()}\"\n        /&gt;\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n&lt;/layout&gt;\n</code></pre>\n\n<p>My BindingAdapters.kt:</p>\n\n<pre><code>@BindingAdapter(\"imageDrawable\")\nfun bindImageDrawable(imgView: ImageView, boolean: LiveData&lt;Boolean&gt;?) {\n    Timber.d(\"Binding liked: $boolean\")\n    when(boolean?.value){\n        true -&gt; imgView.setImageResource(R.drawable.ic_card_like)\n        false -&gt;  imgView.setImageResource(R.drawable.ic_card_dislike)\n    }\n}\n</code></pre>\n\n<p>And my ProductCard.kt:</p>\n\n<pre><code>data class ProductCard(\n    val position: Int,\n    val product: Product\n){\n    ...\n    private val _liked = MutableLiveData(false)\n    val liked : LiveData&lt;Boolean&gt;\n        get() = _liked\n\n    fun toggleLikeProduct(){\n        Timber.d(\"Toggle like before: ${_liked.value}\")\n        val oldValue = _liked.value!!\n        _liked.value = !oldValue\n        Timber.d(\"Toggle like after: ${_liked.value}\")\n    }\n}\n</code></pre>\n\n<p>When I click on the ImageView, the console prints out the before and after values every time correctly, so I know the value of the <code>liked</code> LiveData is actually changing, but the View is not updating accordingly, that is because the binding adapter is only being called once (in the <code>binding.executePendingBindings()</code> I guess, when the RecyclerView binds the ViewHolder, and not every single time the LiveData changes).</p>\n\n<p><strong>I want the BindingAdapter code to be run every time the <code>liked</code> LiveData changes.</strong></p>\n\n<p>When I do this with ViewModel and Fragment layout, every time a LiveData changes in the ViewModel, the View changes because the xml is referencing that LiveData, but I don't know why, when it comes to ProductCard and recyclerview item layout, even if the xml is referencing that LiveData, the View doesn't change, the xml is not actually binding to the LiveData, which is the whole point of having LiveData.</p>\n\n<p>I have already acheived this behaviour with a very brute, unelegant sort of way, setting an onClickListener on that view, and forcing it to change it's resource drawable, on the OnBindViewHolder like this: </p>\n\n<pre><code>fun bind(productCard: ProductCard, listener: OnClickListener){\n    binding.productCard = productCard\n    binding.executePendingBindings()\n    binding.gameItemLikeImageView.setOnClickListener {\n        it?.let {\n            val card = binding.productCard\n            Timber.d(\"Tried changing liked status: ${card!!.liked}\")\n            val old = card.liked\n            card.liked = !old\n            binding.productCard = card\n            val card2 = binding.productCard\n            Timber.d(\"Tried changing liked status: ${card2!!.liked}\")\n            if (!old){\n                it.setBackgroundResource(R.drawable.ic_card_like)\n            }\n            else {\n                it.setBackgroundResource(R.drawable.ic_card_dislike)\n            }\n        }\n    }\n    ...\n}\n</code></pre>\n\n<p>But I would really like that the behaviour of each card be controlled by the state of the ProductCard object that it is bind to.</p>\n\n<p>I have also tried to force call <code>binding.executePendingBindings()</code> every time I click, but also didn't work.</p>\n\n<p>How can I make the item_game_card.xml to observe the changes in the LiveData?</p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 23894, "user_id": 1844392, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/2jBjo.png?s=128&g=1", "display_name": "Piyush", "link": "https://stackoverflow.com/users/1844392/piyush"}, "edited": false, "score": 0, "creation_date": 1571835700, "post_id": 58523376, "comment_id": 103371906, "body": "Add <i>android:supportsRtl=&quot;true&quot;</i> in manifest file within <code>&lt;application&gt;</code> tag."}, {"owner": {"reputation": 51, "user_id": 10742851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Ilr3Bz2ypgw/AAAAAAAAAAI/AAAAAAAAABM/ZFU6OMo2_Ig/photo.jpg?sz=128", "display_name": "nasrin mohammadzadeh", "link": "https://stackoverflow.com/users/10742851/nasrin-mohammadzadeh"}, "reply_to_user": {"reputation": 23894, "user_id": 1844392, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/2jBjo.png?s=128&g=1", "display_name": "Piyush", "link": "https://stackoverflow.com/users/1844392/piyush"}, "edited": false, "score": 0, "creation_date": 1571836691, "post_id": 58523376, "comment_id": 103372581, "body": "i had been done it before, this code is working correctly in android api 25 and upper . @Piyush"}, {"owner": {"reputation": 23894, "user_id": 1844392, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/2jBjo.png?s=128&g=1", "display_name": "Piyush", "link": "https://stackoverflow.com/users/1844392/piyush"}, "edited": false, "score": 0, "creation_date": 1571836720, "post_id": 58523376, "comment_id": 103372600, "body": "Have you done <a href=\"https://stackoverflow.com/questions/38997356/change-language-programmatically-android-n-7-0-api-24\">this</a>?"}, {"owner": {"reputation": 51, "user_id": 10742851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Ilr3Bz2ypgw/AAAAAAAAAAI/AAAAAAAAABM/ZFU6OMo2_Ig/photo.jpg?sz=128", "display_name": "nasrin mohammadzadeh", "link": "https://stackoverflow.com/users/10742851/nasrin-mohammadzadeh"}, "reply_to_user": {"reputation": 23894, "user_id": 1844392, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/2jBjo.png?s=128&g=1", "display_name": "Piyush", "link": "https://stackoverflow.com/users/1844392/piyush"}, "edited": false, "score": 0, "creation_date": 1571836919, "post_id": 58523376, "comment_id": 103372718, "body": "api 24 and below @Piyush"}, {"owner": {"reputation": 23894, "user_id": 1844392, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/2jBjo.png?s=128&g=1", "display_name": "Piyush", "link": "https://stackoverflow.com/users/1844392/piyush"}, "edited": false, "score": 0, "creation_date": 1571836957, "post_id": 58523376, "comment_id": 103372739, "body": "have you checked the link? You need to go with that way"}, {"owner": {"reputation": 51, "user_id": 10742851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Ilr3Bz2ypgw/AAAAAAAAAAI/AAAAAAAAABM/ZFU6OMo2_Ig/photo.jpg?sz=128", "display_name": "nasrin mohammadzadeh", "link": "https://stackoverflow.com/users/10742851/nasrin-mohammadzadeh"}, "reply_to_user": {"reputation": 23894, "user_id": 1844392, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/2jBjo.png?s=128&g=1", "display_name": "Piyush", "link": "https://stackoverflow.com/users/1844392/piyush"}, "edited": false, "score": 0, "creation_date": 1571837027, "post_id": 58523376, "comment_id": 103372777, "body": "which link? @Piyush"}, {"owner": {"reputation": 23894, "user_id": 1844392, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/2jBjo.png?s=128&g=1", "display_name": "Piyush", "link": "https://stackoverflow.com/users/1844392/piyush"}, "edited": false, "score": 0, "creation_date": 1571837053, "post_id": 58523376, "comment_id": 103372788, "body": "Above in comment i added"}, {"owner": {"reputation": 23894, "user_id": 1844392, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/2jBjo.png?s=128&g=1", "display_name": "Piyush", "link": "https://stackoverflow.com/users/1844392/piyush"}, "edited": false, "score": 0, "creation_date": 1572836469, "post_id": 58523376, "comment_id": 103672150, "body": "that answer gave by me."}, {"owner": {"reputation": 51, "user_id": 10742851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Ilr3Bz2ypgw/AAAAAAAAAAI/AAAAAAAAABM/ZFU6OMo2_Ig/photo.jpg?sz=128", "display_name": "nasrin mohammadzadeh", "link": "https://stackoverflow.com/users/10742851/nasrin-mohammadzadeh"}, "reply_to_user": {"reputation": 23894, "user_id": 1844392, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/2jBjo.png?s=128&g=1", "display_name": "Piyush", "link": "https://stackoverflow.com/users/1844392/piyush"}, "edited": false, "score": 0, "creation_date": 1572964618, "post_id": 58523376, "comment_id": 103720456, "body": "yes thank you, i wanted to mention the answer here @Piyush"}, {"owner": {"reputation": 23894, "user_id": 1844392, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/2jBjo.png?s=128&g=1", "display_name": "Piyush", "link": "https://stackoverflow.com/users/1844392/piyush"}, "edited": false, "score": 0, "creation_date": 1574664602, "post_id": 58523376, "comment_id": 104297513, "body": "Had it been done?"}, {"owner": {"reputation": 51, "user_id": 10742851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Ilr3Bz2ypgw/AAAAAAAAAAI/AAAAAAAAABM/ZFU6OMo2_Ig/photo.jpg?sz=128", "display_name": "nasrin mohammadzadeh", "link": "https://stackoverflow.com/users/10742851/nasrin-mohammadzadeh"}, "reply_to_user": {"reputation": 23894, "user_id": 1844392, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/2jBjo.png?s=128&g=1", "display_name": "Piyush", "link": "https://stackoverflow.com/users/1844392/piyush"}, "edited": false, "score": 0, "creation_date": 1574752598, "post_id": 58523376, "comment_id": 104332448, "body": "@Piyush no i have problem with it yet"}, {"owner": {"reputation": 23894, "user_id": 1844392, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/2jBjo.png?s=128&g=1", "display_name": "Piyush", "link": "https://stackoverflow.com/users/1844392/piyush"}, "edited": false, "score": 0, "creation_date": 1574753412, "post_id": 58523376, "comment_id": 104332818, "body": "What problem ? Tell me"}], "answers": [{"tags": [], "owner": {"reputation": 1889, "user_id": 3032347, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ypW1y.jpg?s=128&g=1", "display_name": "Naruto Uzumaki", "link": "https://stackoverflow.com/users/3032347/naruto-uzumaki"}, "is_accepted": false, "score": 0, "last_activity_date": 1571838832, "last_edit_date": 1571838832, "creation_date": 1571838432, "answer_id": 58524357, "question_id": 58523376, "link": "https://stackoverflow.com/questions/58523376/how-to-create-multi-language-app-in-android/58524357#58524357", "title": "how to create multi language app in android", "body": "<p>For supporting multi language, if your users choose a language that uses right-to-left (RTL) scripts, such as Persian or Arabic, in the first you must support RTL in your app with lower API.<br><br>\nYou can check official documents <a href=\"https://developer.android.com/training/basics/supporting-devices/languages\" rel=\"nofollow noreferrer\">here</a> and for your case, <a href=\"https://developer.android.com/training/basics/supporting-devices/languages#SupportLayoutMirroring\" rel=\"nofollow noreferrer\">this</a> section provide more details.<br><br></p>\n\n<p>BTW you can check <a href=\"https://android.jlelse.eu/rtl-support-on-android-here-is-all-you-need-know-e13f2df512e2\" rel=\"nofollow noreferrer\">this</a> and <a href=\"https://www.blueappsoftware.com/android-rtl-support-multi-language-app/\" rel=\"nofollow noreferrer\">this ones</a> examples which provide some details and all you need to know.<br><br>\nHappy coding! movafagh bashi :)</p>\n"}], "owner": {"reputation": 51, "user_id": 10742851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Ilr3Bz2ypgw/AAAAAAAAAAI/AAAAAAAAABM/ZFU6OMo2_Ig/photo.jpg?sz=128", "display_name": "nasrin mohammadzadeh", "link": "https://stackoverflow.com/users/10742851/nasrin-mohammadzadeh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1571838832, "creation_date": 1571835394, "last_edit_date": 1571836581, "question_id": 58523376, "link": "https://stackoverflow.com/questions/58523376/how-to-create-multi-language-app-in-android", "title": "how to create multi language app in android", "body": "<p>I'm developing a multi language app and I'm using code below and it was working well but now it has problem in android api 24 and below without any error.\nit just translate strings but I need my app be rtl.\nwhat should I use instead of my code?</p>\n\n<pre><code>fun setNewLocale(mContext: Context, language: String): Context {\n      setLanguagePref(mContext, language)\n      if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) { \n           return updateResources(mContext, getLanguagePref(mContext)!!)             \n      }\n      return updateResourcesLegacy(mContext, getLanguagePref(mContext)!!)\n}   \n\n@TargetApi(Build.VERSION_CODES.N)   \nprivate fun updateResources(context: Context, language: String): Context {\n        val locale = Locale(language)\n        Locale.setDefault(locale)\n        val configuration = context.resources.configuration\n        configuration.setLocale(locale)\n\n        return context.createConfigurationContext(configuration)\n}\n\nprivate fun updateResourcesLegacy(context: Context, language: String): Context {\n       val locale = Locale(language)\n       Locale.setDefault(locale)\n       val resources = context.resources\n       val configuration = resources.configuration\n       configuration.locale = locale\n\n       resources.updateConfiguration(configuration, resources.displayMetrics)\n\n       return context\n }\n</code></pre>\n"}, {"tags": ["android", "kotlin", "kotlin-coroutines"], "answers": [{"comments": [{"owner": {"reputation": 1574, "user_id": 8103819, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QBJQK.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/8103819/daniel"}, "edited": false, "score": 0, "creation_date": 1571836244, "post_id": 58523520, "comment_id": 103372241, "body": "I&#39;d like to avoid checking for network connection manually since it requires a separate permission. This also doesn&#39;t solve the problem where you have to handle the exception."}, {"owner": {"reputation": 1889, "user_id": 3032347, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ypW1y.jpg?s=128&g=1", "display_name": "Naruto Uzumaki", "link": "https://stackoverflow.com/users/3032347/naruto-uzumaki"}, "reply_to_user": {"reputation": 1574, "user_id": 8103819, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QBJQK.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/8103819/daniel"}, "edited": false, "score": 0, "creation_date": 1571837225, "post_id": 58523520, "comment_id": 103372896, "body": "@Daniel Without check network connection manually, you must check retrofit call <code>onFailure</code> method for exceptions instance of <code>IOException</code>. Although that&#39;s include another error, not only offline error."}], "tags": [], "owner": {"reputation": 1889, "user_id": 3032347, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ypW1y.jpg?s=128&g=1", "display_name": "Naruto Uzumaki", "link": "https://stackoverflow.com/users/3032347/naruto-uzumaki"}, "is_accepted": false, "score": 2, "last_activity_date": 1571836818, "last_edit_date": 1571836818, "creation_date": 1571835841, "answer_id": 58523520, "question_id": 58523119, "link": "https://stackoverflow.com/questions/58523119/exception-handling-of-network-errors-retrofit/58523520#58523520", "title": "Exception handling of network errors retrofit", "body": "<p>By implementing <code>Interceptor</code>, you are in right way. But by a little change, you can this sample class:</p>\n\n<pre><code>class NetworkConnectionInterceptor(val context: Context) : Interceptor {\n\n    @Suppress(\"DEPRECATION\")\n    private val isConnected: Boolean\n        get() {\n            var result = false\n            val cm = context.getSystemService(Context.CONNECTIVITY_SERVICE) as ConnectivityManager?\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\n                cm?.run {\n                    cm.getNetworkCapabilities(cm.activeNetwork)?.run {\n                        result = when {\n                            hasTransport(NetworkCapabilities.TRANSPORT_WIFI) -&gt; true\n                            hasTransport(NetworkCapabilities.TRANSPORT_CELLULAR) -&gt; true\n                            hasTransport(NetworkCapabilities.TRANSPORT_ETHERNET) -&gt; true\n                            else -&gt; false\n                        }\n                    }\n                }\n            } else {\n                cm?.run {\n                    cm.activeNetworkInfo?.run {\n                        if (type == ConnectivityManager.TYPE_WIFI) {\n                            result = true\n                        } else if (type == ConnectivityManager.TYPE_MOBILE) {\n                            result = true\n                        }\n                    }\n                }\n            }\n            return result\n        }\n\n    @Throws(IOException::class)\n    override fun intercept(chain: Interceptor.Chain): Response {\n        if (!isConnected) {\n            // Throwing your custom exception\n            // And handle it on onFailure\n        }\n\n        val builder = chain.request().newBuilder()\n        return chain.proceed(builder.build())\n    }\n}\n</code></pre>\n\n<p>Then add it to your <code>OkHttpClient.Builder()</code>:</p>\n\n<pre><code>.addInterceptor(NetworkConnectionInterceptor(context));\n</code></pre>\n\n<p>And in failure you can handle it in <code>onFailure</code> method like this:</p>\n\n<pre><code>override fun onFailure(call: Call&lt;BaseModel&gt;, t: Throwable) {\n    if (t is NoConnectivityException) {\n        // Handle it here :)\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 563, "user_id": 6721828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zqZn9.jpg?s=128&g=1", "display_name": "Edgar Khimich", "link": "https://stackoverflow.com/users/6721828/edgar-khimich"}, "edited": false, "score": 1, "creation_date": 1585628057, "post_id": 58600120, "comment_id": 107820620, "body": "can you add asNetworkException() fun implementation please  interesting to see how do you handle error cases   thanks"}, {"owner": {"reputation": 757, "user_id": 2745944, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/t8lJ7.jpg?s=128&g=1", "display_name": "martinseal1987", "link": "https://stackoverflow.com/users/2745944/martinseal1987"}, "edited": false, "score": 0, "creation_date": 1597270054, "post_id": 58600120, "comment_id": 112081585, "body": "private fun asNetworkException(throwable: Throwable): ErrorHolder {     return ErrorHolder.NetworkConnection(throwable = throwable, message = throwable.message ?: &quot;Empty error message&quot;) }"}, {"owner": {"reputation": 757, "user_id": 2745944, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/t8lJ7.jpg?s=128&g=1", "display_name": "martinseal1987", "link": "https://stackoverflow.com/users/2745944/martinseal1987"}, "edited": false, "score": 0, "creation_date": 1597518139, "post_id": 58600120, "comment_id": 112161182, "body": "@MohammadSianaki your missing the UnExpected on error holder and the ErrorCodes class is this just a bunch of static Strings like 400 for error etc?"}, {"owner": {"reputation": 757, "user_id": 2745944, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/t8lJ7.jpg?s=128&g=1", "display_name": "martinseal1987", "link": "https://stackoverflow.com/users/2745944/martinseal1987"}, "edited": false, "score": 0, "creation_date": 1597518186, "post_id": 58600120, "comment_id": 112161203, "body": "@MohammadSianaki i also get an error when using this on Result.Success : Type parameter bound for T in   constructor Success&lt;out T : Any&gt; ( value: T )  is not satisfied: inferred type R is not a subtype of Any"}, {"owner": {"reputation": 675, "user_id": 5600256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dacf13e2ad0d8fd7217dca5b1ee9e2a?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammad Sianaki", "link": "https://stackoverflow.com/users/5600256/mohammad-sianaki"}, "reply_to_user": {"reputation": 757, "user_id": 2745944, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/t8lJ7.jpg?s=128&g=1", "display_name": "martinseal1987", "link": "https://stackoverflow.com/users/2745944/martinseal1987"}, "edited": false, "score": 0, "creation_date": 1597518868, "post_id": 58600120, "comment_id": 112161376, "body": "@martinseal1987 Yes, ErrorCodes  just contains a bunch of integers like: 400,401"}, {"owner": {"reputation": 757, "user_id": 2745944, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/t8lJ7.jpg?s=128&g=1", "display_name": "martinseal1987", "link": "https://stackoverflow.com/users/2745944/martinseal1987"}, "edited": false, "score": 0, "creation_date": 1597520352, "post_id": 58600120, "comment_id": 112161784, "body": "@MohammadSianaki any idea about the error? can you share your imports for the extension"}, {"owner": {"reputation": 675, "user_id": 5600256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dacf13e2ad0d8fd7217dca5b1ee9e2a?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammad Sianaki", "link": "https://stackoverflow.com/users/5600256/mohammad-sianaki"}, "reply_to_user": {"reputation": 757, "user_id": 2745944, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/t8lJ7.jpg?s=128&g=1", "display_name": "martinseal1987", "link": "https://stackoverflow.com/users/2745944/martinseal1987"}, "edited": false, "score": 1, "creation_date": 1597522048, "post_id": 58600120, "comment_id": 112162261, "body": "@martinseal1987 kotlin std library has it&#39;s own Result Type, make sure you are importing your own type, not the one from std lib."}], "tags": [], "owner": {"reputation": 675, "user_id": 5600256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dacf13e2ad0d8fd7217dca5b1ee9e2a?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammad Sianaki", "link": "https://stackoverflow.com/users/5600256/mohammad-sianaki"}, "is_accepted": true, "score": 5, "last_activity_date": 1597505674, "last_edit_date": 1597505674, "creation_date": 1572309839, "answer_id": 58600120, "question_id": 58523119, "link": "https://stackoverflow.com/questions/58523119/exception-handling-of-network-errors-retrofit/58600120#58600120", "title": "Exception handling of network errors retrofit", "body": "<p>Using Result to wrap my response</p>\n<pre><code>sealed class Result&lt;out T : Any&gt; {\ndata class Success&lt;out T : Any&gt;(val value: T) : Result&lt;T&gt;()\ndata class Failure(val errorHolder:ErrorHolder) : Result&lt;Nothing&gt;()}\n</code></pre>\n<p>ErrorHolder :</p>\n<pre><code>sealed class ErrorHolder(override val message):Throwable(message){\n data class NetworkConnection(override val message: String) : ErrorHolder(message)\n data class BadRequest(override val message: String) : ErrorHolder(message)\n data class UnAuthorized(override val message: String) : ErrorHolder(message)\n data class InternalServerError(override val message: String) :ErrorHolder(message)\n data class ResourceNotFound(override val message: String) : ErrorHolder(message)\n}\n</code></pre>\n<p>an extension to handle exeptions</p>\n<pre><code>suspend fun &lt;T, R&gt; Call&lt;T&gt;.awaitResult(map: (T) -&gt; R): Result&lt;R&gt; = suspendCancellableCoroutine { continuation -&gt;\ntry {\n    enqueue(object : Callback&lt;T&gt; {\n        override fun onFailure(call: Call&lt;T&gt;, throwable: Throwable) {\n            errorHappened(throwable)\n        }\n\n        override fun onResponse(call: Call&lt;T&gt;, response: Response&lt;T&gt;) {\n            if (response.isSuccessful) {\n                try {\n                    continuation.resume(Result.Success(map(response.body()!!)))\n                } catch (throwable: Throwable) {\n                    errorHappened(throwable)\n                }\n            } else {\n                errorHappened(HttpException(response))\n            }\n        }\n\n        private fun errorHappened(throwable: Throwable) {\n            continuation.resume(Result.Failure(asNetworkException(throwable)))\n        }\n    })\n} catch (throwable: Throwable) {\n    continuation.resume(Result.Failure(asNetworkException(throwable)))\n}\n\ncontinuation.invokeOnCancellation {\n    cancel()\n}}\n</code></pre>\n<p>And this how I make the api call:</p>\n<pre><code>suspend fun fetchUsers(): Result&lt;List&lt;User&gt;&gt; {\n    return service.getUsers().awaitResult { usersResponseDto -&gt;\n        usersResponseDto.toListOfUsers()\n    }\n}\n</code></pre>\n<p><strong>UPDATE:</strong></p>\n<p>Let's say you have an error body like below:</p>\n<pre><code>{\n  &quot;error&quot; : {\n    &quot;status&quot; : 502,\n    &quot;message&quot; : &quot;Bad gateway.&quot;\n  }\n}\n</code></pre>\n<p>First we should create an data class to model response body</p>\n<pre><code>data class HttpErrorEntity(\n@SerializedName(&quot;message&quot;) val errorMessage: String,\n@SerializedName(&quot;status&quot;) val errorCode: Int\n)\n</code></pre>\n<p>and here is <code>asNetworkException</code> implementation :</p>\n<pre><code>private fun asNetworkException(ex: Throwable): ErrorHolder {\n    return when (ex) {\n        is IOException -&gt; {\n            ErrorHolder.NetworkConnection(\n                &quot;No Internet Connection&quot;\n            )\n        }\n        is HttpException -&gt; extractHttpExceptions(ex)\n        else -&gt; ErrorHolder.UnExpected(&quot;Something went wrong...&quot;)\n    }\n}\n\nprivate fun extractHttpExceptions(ex: HttpException): ErrorHolder {\n    val body = ex.response()?.errorBody()\n    val gson = GsonBuilder().create()\n    val responseBody= gson.fromJson(body.toString(), JsonObject::class.java)\n    val errorEntity = gson.fromJson(responseBody, HttpErrorEntity::class.java)\n    return when (errorEntity.errorCode) {\n        ErrorCodes.BAD_REQUEST.code -&gt; \n                ErrorHolder.BadRequest(errorEntity.errorMessage)\n            \n        ErrorCodes.INTERNAL_SERVER.code -&gt; \n            ErrorHolder.InternalServerError(errorEntity.errorMessage)\n        \n        ErrorCodes.UNAUTHORIZED.code -&gt;\n            ErrorHolder.UnAuthorized(errorEntity.errorMessage)\n       \n        ErrorCodes.NOT_FOUND.code -&gt;\n            ErrorHolder.ResourceNotFound(errorEntity.errorMessage)\n        \n        else -&gt; \n            ErrorHolder.Unknown(errorEntity.errorMessage)\n        \n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1574, "user_id": 8103819, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QBJQK.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/8103819/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2470, "favorite_count": 1, "accepted_answer_id": 58600120, "answer_count": 2, "score": 2, "last_activity_date": 1597505674, "creation_date": 1571834541, "question_id": 58523119, "link": "https://stackoverflow.com/questions/58523119/exception-handling-of-network-errors-retrofit", "title": "Exception handling of network errors retrofit", "body": "<p>I was wondering what is the best way to handle network errors in retrofit requests when using coroutines. </p>\n\n<p>The classic way is handling exception at highest level, when a request is made:</p>\n\n<pre><code>try {\n    // retrofit request\n} catch(e: NetworkException) {\n    // show some error message\n}\n</code></pre>\n\n<p>I find this solution wrong and it adds a lot of boilerplate code, instead I went with creating an interceptor that returns a error response:</p>\n\n<pre><code>class ErrorResponse : Interceptor {\n    override fun intercept(chain: Interceptor.Chain): Response {\n        val request = chain.request()\n        return try {\n            chain.proceed(request)\n        } catch (e: Exception) {\n            Snackbar.make(\n                view,\n                context.resources.getText(R.string.network_error),\n                Snackbar.LENGTH_LONG\n            ).show()\n            Response.Builder()\n                .request(request)\n                .protocol(Protocol.HTTP_1_1)\n                .code(599)\n                .message(e.message!!)\n                .body(ResponseBody.create(null, e.message!!))\n                .build()\n        }\n    }\n}\n</code></pre>\n\n<p>This solution is a little better, however I think that it can be improved.</p>\n\n<p>So my question is: What is the correct way to handle the cases when user doesn't have internet connection, without a lot of boilerplate code (ideally with a global handler in case of connection errors) ?</p>\n"}, {"tags": ["android", "kotlin", "dagger-2"], "comments": [{"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "edited": false, "score": 1, "creation_date": 1571833257, "post_id": 58522687, "comment_id": 103370567, "body": "File an issue to Dagger 2 as well: <a href=\"https://github.com/google/dagger/issues/1642\" rel=\"nofollow noreferrer\">github.com/google/dagger/issues/1642</a>"}, {"owner": {"reputation": 3008, "user_id": 2439283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a58b468d0f98eab872aa90025038435?s=128&d=identicon&r=PG", "display_name": "Ignacio Tomas Crespo", "link": "https://stackoverflow.com/users/2439283/ignacio-tomas-crespo"}, "edited": false, "score": 0, "creation_date": 1571833618, "post_id": 58522687, "comment_id": 103370774, "body": "Maybe there is a library using another dagger version causing conflicts"}, {"owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 1, "creation_date": 1571834577, "post_id": 58522687, "comment_id": 103371273, "body": "If I used <code>kapt &quot;com.google.dagger:dagger-android-processor:2.25&quot;</code> with above, then there is no error"}, {"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "edited": false, "score": 0, "creation_date": 1571863992, "post_id": 58522687, "comment_id": 103385532, "body": "Tried <code>&quot;kapt &quot;com.google.dagger:dagger-android-processor:2.25&quot;</code>, doesn&#39;t work"}], "answers": [{"tags": [], "owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "is_accepted": false, "score": 1, "last_activity_date": 1571881399, "creation_date": 1571881399, "answer_id": 58533006, "question_id": 58522687, "link": "https://stackoverflow.com/questions/58522687/dagger-2-25-java-lang-noclassdeffounderror-dagger-shaded-auto-common-basicannot/58533006#58533006", "title": "Dagger 2.25 java.lang.NoClassDefFoundError: dagger/shaded/auto/common/BasicAnnotationProcessor", "body": "<p>It's a Dagger 2 issue. To be fixed in <a href=\"https://github.com/google/dagger/releases/tag/dagger-2.25.2\" rel=\"nofollow noreferrer\">https://github.com/google/dagger/releases/tag/dagger-2.25.2</a></p>\n"}], "owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1571881399, "creation_date": 1571833028, "question_id": 58522687, "link": "https://stackoverflow.com/questions/58522687/dagger-2-25-java-lang-noclassdeffounderror-dagger-shaded-auto-common-basicannot", "title": "Dagger 2.25 java.lang.NoClassDefFoundError: dagger/shaded/auto/common/BasicAnnotationProcessor", "body": "<p>When compile the below in Dagger 2.24 all works fine. However when compiler in Dagger 2.25, it error out stating <code>java.lang.NoClassDefFoundError: dagger/shaded/auto/common/BasicAnnotationProcessor</code></p>\n\n<p>Did I miss anything?</p>\n\n<p>Note I use</p>\n\n<pre><code>    implementation \"com.google.dagger:dagger:2.24\"\n    kapt \"com.google.dagger:dagger-compiler:2.24\"\n    // Change 2.24 to 2.25, the error occurs.\n</code></pre>\n\n<pre><code>fun main() {\n    val myClass = MyClass()\n}\n\nclass MyClass {\n    @Inject\n    lateinit var stringMe: String\n\n    init {\n        DaggerMyComponent.create().subComponent().inject(this)\n        println(stringMe)\n    }\n}\n\n@Component\ninterface MyComponent {\n    fun subComponent(): MySubcomponent\n//    fun inject(a: MyClass)\n}\n\n@Subcomponent(modules = [MeSubModule::class])\ninterface MySubcomponent {\n    fun inject(a: MyClass)\n}\n\n@Module\nclass MeSubModule {\n    @Provides\n    fun stringMe(): String = \"Hi here\"\n}\n\n</code></pre>\n"}, {"tags": ["android", "kotlin", "text"], "comments": [{"owner": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "edited": false, "score": 0, "creation_date": 1571831020, "post_id": 58522060, "comment_id": 103369272, "body": "Adding a path to the file-name might drastically improve the outcome."}, {"owner": {"reputation": 1889, "user_id": 3032347, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ypW1y.jpg?s=128&g=1", "display_name": "Naruto Uzumaki", "link": "https://stackoverflow.com/users/3032347/naruto-uzumaki"}, "edited": false, "score": 0, "creation_date": 1571832434, "post_id": 58522060, "comment_id": 103370085, "body": "You can check this <a href=\"https://stackoverflow.com/questions/33779607/reading-a-txt-file-and-outputing-as-a-textview-in-android/33779896#33779896\">answer</a>"}], "answers": [{"comments": [{"owner": {"reputation": 574, "user_id": 5791681, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8h6rA.jpg?s=128&g=1", "display_name": "Ricardo A.", "link": "https://stackoverflow.com/users/5791681/ricardo-a"}, "reply_to_user": {"reputation": 3, "user_id": 12262871, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDkKaeFXLRfW9YbCqtU3L2xFaPvOIZgU7NYYKPCqg=k-s128", "display_name": "TheDuck", "link": "https://stackoverflow.com/users/12262871/theduck"}, "edited": false, "score": 0, "creation_date": 1571832997, "post_id": 58522115, "comment_id": 103370430, "body": "If it&#39;s working you should mark the answer as accepted, so other people can get help from it too. @TheDuck"}], "tags": [], "owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "is_accepted": true, "score": 7, "last_activity_date": 1571831041, "creation_date": 1571831041, "answer_id": 58522115, "question_id": 58522060, "link": "https://stackoverflow.com/questions/58522060/where-do-i-have-to-put-my-txt-file-in-android-studio/58522115#58522115", "title": "Where do I have to put my txt file in Android Studio?", "body": "<blockquote>\n  <p>I already put it in the assets folder</p>\n</blockquote>\n\n<p>Use <code>getAssets()</code> on a <code>Context</code> to get an <code>AssetManager</code>. Call <code>open(\"goodstops.txt\")</code> on the <code>AssetManager</code> to get an <code>InputStream</code> to use for reading in the contents of the asset.</p>\n"}, {"comments": [{"owner": {"reputation": 574, "user_id": 5791681, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8h6rA.jpg?s=128&g=1", "display_name": "Ricardo A.", "link": "https://stackoverflow.com/users/5791681/ricardo-a"}, "edited": false, "score": 0, "creation_date": 1571832330, "post_id": 58522129, "comment_id": 103370038, "body": "Hey Stefan, thank you for helping! There are some links that I think could make your answers even more helpful: <a href=\"https://stackoverflow.com/help/how-to-answer\">How do I write a good answer?</a>, <a href=\"https://meta.stackexchange.com/a/7659/532461\">This answer</a>, and don&#39;t forget the &quot;Answering Questions&quot; section in the <a href=\"https://meta.stackexchange.com/questions/7931/faq-for-stack-exchange-sites\">FAQ</a>"}], "tags": [], "owner": {"reputation": 26, "user_id": 12262856, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mC5AUVs3M3kelXYe9N5sURQpU9omVc50vnUukEv=k-s128", "display_name": "Stefan Perlic", "link": "https://stackoverflow.com/users/12262856/stefan-perlic"}, "is_accepted": false, "score": -1, "last_activity_date": 1571831083, "creation_date": 1571831083, "answer_id": 58522129, "question_id": 58522060, "link": "https://stackoverflow.com/questions/58522060/where-do-i-have-to-put-my-txt-file-in-android-studio/58522129#58522129", "title": "Where do I have to put my txt file in Android Studio?", "body": "<p>Place it in res/raw. \nRight click on res -> new -> Android Resource Directory -> Resource Type: raw</p>\n"}, {"tags": [], "owner": {"reputation": 1350, "user_id": 10445540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ca713c1a1ae615695267f4e23b8d5f5?s=128&d=identicon&r=PG&f=1", "display_name": "Artem Botnev", "link": "https://stackoverflow.com/users/10445540/artem-botnev"}, "is_accepted": false, "score": 1, "last_activity_date": 1571832025, "creation_date": 1571832025, "answer_id": 58522403, "question_id": 58522060, "link": "https://stackoverflow.com/questions/58522060/where-do-i-have-to-put-my-txt-file-in-android-studio/58522403#58522403", "title": "Where do I have to put my txt file in Android Studio?", "body": "<p>I use extension for AssetManager</p>\n\n<pre><code>fun AssetManager.readFile(fileName: String) = open(fileName)\n  .bufferedReader()\n  .use { it.readText() }\n</code></pre>\n\n<p>to read file:</p>\n\n<pre><code>val fileContent = context.assets.readFile(\"goodstops.txt\")\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 12262871, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDkKaeFXLRfW9YbCqtU3L2xFaPvOIZgU7NYYKPCqg=k-s128", "display_name": "TheDuck", "link": "https://stackoverflow.com/users/12262871/theduck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "accepted_answer_id": 58522115, "answer_count": 3, "score": 0, "last_activity_date": 1571867639, "creation_date": 1571830851, "last_edit_date": 1571867639, "question_id": 58522060, "link": "https://stackoverflow.com/questions/58522060/where-do-i-have-to-put-my-txt-file-in-android-studio", "title": "Where do I have to put my txt file in Android Studio?", "body": "<p>I'm trying to read a File from txt, but it's throwing a FileNotFoundException</p>\n\n<p>I already put it in the assets folder, and in the app folder but the exception is still there</p>\n\n<p>Here is what I'm trying to use:</p>\n\n<pre><code>var asd=readFileAsLinesUsingReadLines(\"goodstops.txt\")\n\nfun readFileAsLinesUsingReadLines(fileName: String): List&lt;String&gt;\n            = File(fileName).readLines()\n</code></pre>\n"}, {"tags": ["android", "android-layout", "kotlin"], "comments": [{"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1571836468, "post_id": 58522059, "comment_id": 103372403, "body": "Looks like a Fragment with a transparent background, and you used <code>add</code> in the transaction instead of <code>replace</code> so the previous Fragment is still there and now it&#39;s showing through."}, {"owner": {"reputation": 1, "user_id": 1597523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1014fd84612bcc2fd4b4eaee1deff355?s=128&d=identicon&r=PG", "display_name": "Tom Peak", "link": "https://stackoverflow.com/users/1597523/tom-peak"}, "reply_to_user": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1571837604, "post_id": 58522059, "comment_id": 103373137, "body": "This is not a Fragment, this is an Activity which gets indent, both screens are the same way loaded. Even when I change Theme in my app and go back (prefs) it works on the first Theme and when I switch Theme(DarkMode) (in styles with attr) the behaviour is wrong. fE. choose ExtraInfo (&quot;Sonstige Begr&#252;ndung&quot;) it pops up (addView) a EditText but it doesn&#39;t expand the layout on Theme Dark Mode. (Glitch)"}, {"owner": {"reputation": 1, "user_id": 1597523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1014fd84612bcc2fd4b4eaee1deff355?s=128&d=identicon&r=PG", "display_name": "Tom Peak", "link": "https://stackoverflow.com/users/1597523/tom-peak"}, "reply_to_user": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1571839859, "post_id": 58522059, "comment_id": 103374487, "body": "ExtraInfo added, just set visibility \u2026 (GONE/VISIBLE) \u2026 messes up everything on DarkMode"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 1597523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1014fd84612bcc2fd4b4eaee1deff355?s=128&d=identicon&r=PG", "display_name": "Tom Peak", "link": "https://stackoverflow.com/users/1597523/tom-peak"}, "edited": false, "score": 0, "creation_date": 1571896964, "post_id": 58534844, "comment_id": 103392897, "body": "Hex are to crappy for new Androidversions, Background was set -&gt; overlay"}, {"owner": {"reputation": 1, "user_id": 1597523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1014fd84612bcc2fd4b4eaee1deff355?s=128&d=identicon&r=PG", "display_name": "Tom Peak", "link": "https://stackoverflow.com/users/1597523/tom-peak"}, "edited": false, "score": 0, "creation_date": 1571985819, "post_id": 58534844, "comment_id": 103426633, "body": "I am just a shame: #555555 never worked, just older Versions don&#39;t care. #555555 must be look like lightdarkgray not black(no value), as seen on screenshots, I should delete this post, I let  it for quick and dirty ideots, as me!"}], "tags": [], "owner": {"reputation": 1, "user_id": 1597523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1014fd84612bcc2fd4b4eaee1deff355?s=128&d=identicon&r=PG", "display_name": "Tom Peak", "link": "https://stackoverflow.com/users/1597523/tom-peak"}, "is_accepted": false, "score": 0, "last_activity_date": 1571896722, "last_edit_date": 1571896722, "creation_date": 1571895907, "answer_id": 58534844, "question_id": 58522059, "link": "https://stackoverflow.com/questions/58522059/gui-problems-on-settheme-glitch-android/58534844#58534844", "title": "GUI Problems on setTheme (Glitch) Android", "body": "<p>It seems to be a Bug ... on an Android 6 (xCover 3) it's fine, on an Android 9 (Nokia 6.1) it get glitches. I develop for API 23.\nBUT!!!!</p>\n\n<p>in DarkMode I used HEX for color, </p>\n\n<pre><code>&lt;item name=\"android:colorBackground\"&gt;@color/strongText&lt;/item&gt;\n</code></pre>\n\n<p>solves the problem.</p>\n\n<p>For TextColor for RadioButton I had to do this, I skipped selector, I don'T need it, it's ok with colorAccent</p>\n\n<pre><code>  &lt;style name=\"CheckBox\"&gt;\n    &lt;item name=\"android:padding\"&gt;8dip&lt;/item&gt;\n    &lt;item name=\"android:textColor\"&gt;?attr/TextColor&lt;/item&gt;\n    &lt;item name=\"colorControlNormal\"&gt;?attr/TextColor&lt;/item&gt;\n    &lt;item name=\"colorAccent\"&gt;@color/colorPrimary&lt;/item&gt;\n    &lt;item name=\"android:textColorSecondary\"&gt;?attr/BackGroundColor&lt;/item&gt;\n    &lt;item name=\"android:textColorHint\"&gt;?attr/TextColor&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n\n<p>and in Activity</p>\n\n<pre><code>var reasonRadioButton = RadioButton(ContextThemeWrapper(this, R.style.CheckBox)).apply {\n                        text = reason\n                        setTextAppearance(R.style.CheckBox)\n                    }\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 1597523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1014fd84612bcc2fd4b4eaee1deff355?s=128&d=identicon&r=PG", "display_name": "Tom Peak", "link": "https://stackoverflow.com/users/1597523/tom-peak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571896722, "creation_date": 1571830847, "last_edit_date": 1571889026, "question_id": 58522059, "link": "https://stackoverflow.com/questions/58522059/gui-problems-on-settheme-glitch-android", "title": "GUI Problems on setTheme (Glitch) Android", "body": "<p>I\u00b4m programming an app. We have time so I want to to a darkmode as extra. (Not Day/Night just internal setting) I defined themes with attributes like TextColor which I implemented in my style with ?attr/TextColor.</p>\n\n<p>attrs.xml</p>\n\n<pre><code>&lt;resources&gt;\n&lt;attr name=\"TextColor\" format=\"reference\" /&gt;\n&lt;attr name=\"BackGroundColor\" format=\"reference\" /&gt;\n&lt;attr name=\"LightTextColor\" format=\"reference\" /&gt;\n&lt;/resources&gt;\n</code></pre>\n\n<p>style.xml</p>\n\n<pre><code> &lt;style name=\"AppTheme\" parent=\"Theme.AppCompat.DayNight\"&gt;\n    &lt;item name=\"android:colorBackground\"&gt;@color/backGround&lt;/item&gt;\n    &lt;item name=\"colorPrimary\"&gt;@color/colorPrimary&lt;/item&gt;\n    &lt;item name=\"colorPrimaryDark\"&gt;@color/colorPrimaryDark&lt;/item&gt;\n    &lt;item name=\"colorAccent\"&gt;@color/colorAccent&lt;/item&gt;\n    &lt;item name=\"windowActionBar\"&gt;false&lt;/item&gt;\n    &lt;item name=\"windowNoTitle\"&gt;true&lt;/item&gt;\n    &lt;item name=\"TextColor\"&gt;@color/strongText&lt;/item&gt;\n    &lt;item name=\"BackGroundColor\"&gt;@color/backGround&lt;/item&gt;\n    &lt;item name=\"LightTextColor\"&gt;@color/lightText&lt;/item&gt;\n&lt;/style&gt;\n\n&lt;style name=\"DarkMode\" parent=\"Theme.AppCompat.DayNight\"&gt;\n    &lt;item name=\"android:colorBackground\"&gt;#555555&lt;/item&gt;\n    &lt;item name=\"colorPrimary\"&gt;@color/colorPrimary&lt;/item&gt;\n    &lt;item name=\"colorPrimaryDark\"&gt;@color/colorPrimaryDark&lt;/item&gt;\n    &lt;item name=\"colorAccent\"&gt;@color/colorAccent&lt;/item&gt;\n    &lt;item name=\"windowActionBar\"&gt;false&lt;/item&gt;\n    &lt;item name=\"windowNoTitle\"&gt;true&lt;/item&gt;\n    &lt;item name=\"TextColor\"&gt;@color/backGround&lt;/item&gt;\n    &lt;item name=\"BackGroundColor\"&gt;@color/strongText&lt;/item&gt;\n    &lt;item name=\"LightTextColor\"&gt;@color/lighterText&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n\n<p>I do setTheme on each Activity.(stored in pref) Works fine!</p>\n\n<pre><code> override fun onCreate(savedInstanceState: Bundle?) {\n    app = application as ChronoDroidApp\n    setTheme(app.selectedTheme)\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.actual_shift_ui)\n    loadReasons()\n}\n</code></pre>\n\n<p>I also use DynamicLayout. I add RadioButtons I need. I set Styles like:</p>\n\n<pre><code>var reasonRadioButton = RadioButton(ContextThemeWrapper(this, R.style.CheckBox)).apply {\n                        text = reason\n                    }\nreasonRadioGroup.addView(reasonRadioButton)\n</code></pre>\n\n<p>Style:</p>\n\n<pre><code>&lt;style name=\"CheckBox\"&gt;\n    &lt;item name=\"android:padding\"&gt;8dip&lt;/item&gt;\n    &lt;item name=\"android:textColor\"&gt;@drawable/radio_button&lt;/item&gt;\n    &lt;item name=\"android:buttonTint\"&gt;?attr/TextColor&lt;/item&gt;\n    &lt;item name=\"colorControlNormal\"&gt;?attr/TextColor&lt;/item&gt;\n    &lt;item name=\"colorAccent\"&gt;@color/colorPrimary&lt;/item&gt;\n    &lt;item name=\"android:textColorSecondary\"&gt;?attr/BackGroundColor&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n\n<p>(@drawable/radio_button doesn't work for me because I can't set attr in the selector XML, just \"android:textColor\">?attr/TextColor would be good - I will get that!)\nIn the Theme style I set this custom attributes. (black/white)</p>\n\n<p>But now, when I setTheme(R.style.DarkMode) it gets ... messed up! (on all dynamic generated layouts)</p>\n\n<p><a href=\"https://i.stack.imgur.com/dcVI2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dcVI2m.png\" alt=\"Glitch DarkMode\"></a></p>\n\n<p>On my normal theme the behaviour is right: (also on dynamic, it's the same):</p>\n\n<p><a href=\"https://i.stack.imgur.com/kQd8o.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kQd8om.png\" alt=\"normal theme\"></a></p>\n\n<p>My concerns are the glitches, it's really strange.\nAny ideas why I got misbehaviour?</p>\n"}, {"tags": ["java", "android", "xml", "kotlin", "spinner"], "comments": [{"owner": {"reputation": 5935, "user_id": 10182897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PuvGT.jpg?s=128&g=1", "display_name": "Ashish", "link": "https://stackoverflow.com/users/10182897/ashish"}, "edited": false, "score": 0, "creation_date": 1571830175, "post_id": 58521826, "comment_id": 103368782, "body": "Post this <code>R.array.speedByte</code>."}, {"owner": {"reputation": 5, "user_id": 12123165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4G9VG.jpg?s=128&g=1", "display_name": "Schmidi", "link": "https://stackoverflow.com/users/12123165/schmidi"}, "reply_to_user": {"reputation": 5935, "user_id": 10182897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PuvGT.jpg?s=128&g=1", "display_name": "Ashish", "link": "https://stackoverflow.com/users/10182897/ashish"}, "edited": false, "score": 0, "creation_date": 1571830247, "post_id": 58521826, "comment_id": 103368827, "body": "What do I have to change on that?"}, {"owner": {"reputation": 5935, "user_id": 10182897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PuvGT.jpg?s=128&g=1", "display_name": "Ashish", "link": "https://stackoverflow.com/users/10182897/ashish"}, "edited": false, "score": 0, "creation_date": 1571830282, "post_id": 58521826, "comment_id": 103368854, "body": "Please provide array.xml. I think the way you provided array is problematic"}, {"owner": {"reputation": 5, "user_id": 12123165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4G9VG.jpg?s=128&g=1", "display_name": "Schmidi", "link": "https://stackoverflow.com/users/12123165/schmidi"}, "reply_to_user": {"reputation": 5935, "user_id": 10182897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PuvGT.jpg?s=128&g=1", "display_name": "Ashish", "link": "https://stackoverflow.com/users/10182897/ashish"}, "edited": false, "score": 0, "creation_date": 1571830363, "post_id": 58521826, "comment_id": 103368917, "body": "added the array file"}, {"owner": {"reputation": 574, "user_id": 5791681, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8h6rA.jpg?s=128&g=1", "display_name": "Ricardo A.", "link": "https://stackoverflow.com/users/5791681/ricardo-a"}, "edited": false, "score": 0, "creation_date": 1571832662, "post_id": 58521826, "comment_id": 103370233, "body": "There are no errors? Can you post more code, so we can reproduce it? The other spinner works?"}], "answers": [{"comments": [{"owner": {"reputation": 26, "user_id": 12262856, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mC5AUVs3M3kelXYe9N5sURQpU9omVc50vnUukEv=k-s128", "display_name": "Stefan Perlic", "link": "https://stackoverflow.com/users/12262856/stefan-perlic"}, "reply_to_user": {"reputation": 5, "user_id": 12123165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4G9VG.jpg?s=128&g=1", "display_name": "Schmidi", "link": "https://stackoverflow.com/users/12123165/schmidi"}, "edited": false, "score": 0, "creation_date": 1571831230, "post_id": 58522057, "comment_id": 103369382, "body": "Can you try and instantiate your ArrayAdapter like this: <a href=\"https://stackoverflow.com/a/21024788/12262856\">stackoverflow.com/a/21024788/12262856</a>"}, {"owner": {"reputation": 5935, "user_id": 10182897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PuvGT.jpg?s=128&g=1", "display_name": "Ashish", "link": "https://stackoverflow.com/users/10182897/ashish"}, "edited": false, "score": 0, "creation_date": 1571831621, "post_id": 58522057, "comment_id": 103369634, "body": "@StefanPerlic nice suggestion."}, {"owner": {"reputation": 5, "user_id": 12123165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4G9VG.jpg?s=128&g=1", "display_name": "Schmidi", "link": "https://stackoverflow.com/users/12123165/schmidi"}, "edited": false, "score": 0, "creation_date": 1571831644, "post_id": 58522057, "comment_id": 103369652, "body": "Also didn&#39;t worked, do you think more code or anything else is needed to show to find the problem?"}, {"owner": {"reputation": 26, "user_id": 12262856, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mC5AUVs3M3kelXYe9N5sURQpU9omVc50vnUukEv=k-s128", "display_name": "Stefan Perlic", "link": "https://stackoverflow.com/users/12262856/stefan-perlic"}, "edited": false, "score": 1, "creation_date": 1571831799, "post_id": 58522057, "comment_id": 103369749, "body": "Just give me the repo, I&#39;ll run it"}], "tags": [], "owner": {"reputation": 26, "user_id": 12262856, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mC5AUVs3M3kelXYe9N5sURQpU9omVc50vnUukEv=k-s128", "display_name": "Stefan Perlic", "link": "https://stackoverflow.com/users/12262856/stefan-perlic"}, "is_accepted": false, "score": -1, "last_activity_date": 1571830844, "creation_date": 1571830844, "answer_id": 58522057, "question_id": 58521826, "link": "https://stackoverflow.com/questions/58521826/android-spinner-no-items-shown-only-arrow/58522057#58522057", "title": "Android Spinner no items shown only arrow", "body": "<p>Just add entries attribute to your xml:</p>\n\n<pre><code>&lt;Spinner\n                android:id=\"@+id/speedSpinner\"\n                android:layout_height=\"0dp\"\n                android:entries=\"@array/speedByte\"\n                android:layout_columnWeight=\"1\"\n                android:gravity=\"fill\"\n                android:layout_row=\"5\"\n                android:layout_gravity=\"center\"\n                android:layout_rowWeight=\"0.3\"\n                /&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 12123165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4G9VG.jpg?s=128&g=1", "display_name": "Schmidi", "link": "https://stackoverflow.com/users/12123165/schmidi"}, "edited": false, "score": 0, "creation_date": 1571833651, "post_id": 58522743, "comment_id": 103370789, "body": "I also have it in the stings.xml"}, {"owner": {"reputation": 769, "user_id": 6284141, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/udu0v.jpg?s=128&g=1", "display_name": "Shubham Raitka", "link": "https://stackoverflow.com/users/6284141/shubham-raitka"}, "reply_to_user": {"reputation": 5, "user_id": 12123165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4G9VG.jpg?s=128&g=1", "display_name": "Schmidi", "link": "https://stackoverflow.com/users/12123165/schmidi"}, "edited": false, "score": 0, "creation_date": 1571833876, "post_id": 58522743, "comment_id": 103370919, "body": "@Schmidi Are you able to see the items now?"}], "tags": [], "owner": {"reputation": 769, "user_id": 6284141, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/udu0v.jpg?s=128&g=1", "display_name": "Shubham Raitka", "link": "https://stackoverflow.com/users/6284141/shubham-raitka"}, "is_accepted": false, "score": 1, "last_activity_date": 1571833223, "creation_date": 1571833223, "answer_id": 58522743, "question_id": 58521826, "link": "https://stackoverflow.com/questions/58521826/android-spinner-no-items-shown-only-arrow/58522743#58522743", "title": "Android Spinner no items shown only arrow", "body": "<p>After implementing your code I was able to see the items. Where have you put the string array? It should be in the strings.xml file.</p>\n\n<pre><code>&lt;resources&gt;\n    &lt;string name=\"app_name\"&gt;My Application&lt;/string&gt;\n\n    &lt;string-array name=\"speedByte\"&gt;\n        &lt;item name=\"Byte\"&gt;Byte /s&lt;/item&gt;\n        &lt;item name=\"Kilo\"&gt;KiloByte /s&lt;/item&gt;\n        &lt;item name=\"Mega\"&gt;MegaByte /s&lt;/item&gt;\n        &lt;item name=\"Giga\"&gt;GigaByte /s&lt;/item&gt;\n        &lt;item name=\"Terra\"&gt;TerraByte /s&lt;/item&gt;\n    &lt;/string-array&gt;\n&lt;/resources&gt;\n</code></pre>\n\n<p>Also increase the height of the Spinner to make it more clickable.</p>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 12123165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4G9VG.jpg?s=128&g=1", "display_name": "Schmidi", "link": "https://stackoverflow.com/users/12123165/schmidi"}, "edited": false, "score": 1, "creation_date": 1571834682, "post_id": 58522881, "comment_id": 103371323, "body": "Ah it was the wrap content which fixed it, also needs some more height so gonna have to give it more space, thx for the answer"}], "tags": [], "owner": {"reputation": 5511, "user_id": 7682257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3VeNQ.jpg?s=128&g=1", "display_name": "Suraj Vaishnav", "link": "https://stackoverflow.com/users/7682257/suraj-vaishnav"}, "is_accepted": true, "score": 1, "last_activity_date": 1571833672, "creation_date": 1571833672, "answer_id": 58522881, "question_id": 58521826, "link": "https://stackoverflow.com/questions/58521826/android-spinner-no-items-shown-only-arrow/58522881#58522881", "title": "Android Spinner no items shown only arrow", "body": "<p>Your code seems correct and it worked for me, but I am not able to see the spinner until I have changed <code>layout_height</code> to <code>wrap_content</code>. Currently it is <code>0dp</code> I guess that's why It's not visible.</p>\n\n<p>But if you still face this issue then I will suggest you to conform that your following code is executed.</p>\n\n<pre><code>this.speedSpinner.adapter = speedAdapter\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1220, "user_id": 8144311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VkFb8.jpg?s=128&g=1", "display_name": "Zahra", "link": "https://stackoverflow.com/users/8144311/zahra"}, "is_accepted": false, "score": -1, "last_activity_date": 1571834531, "creation_date": 1571834531, "answer_id": 58523117, "question_id": 58521826, "link": "https://stackoverflow.com/questions/58521826/android-spinner-no-items-shown-only-arrow/58523117#58523117", "title": "Android Spinner no items shown only arrow", "body": "<p>Try this.It should work :\nfirst get your string array and cast it to List</p>\n\n<pre><code>    String[] speedByte= getResources().getStringArray(R.array.speedByte);\n    List&lt;String&gt; lstSpeedByte = Arrays.asList(speedByte);\n</code></pre>\n\n<p>Then pass the list to ArrayAdapter:</p>\n\n<pre><code>    ArrayAdapter&lt;String&gt; adapterSpinner =\n            new ArrayAdapter&lt;&gt;(your context, android.R.layout.simple_spinner_item, lstSpeedByte );\n\n\n    speedAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);\n    speedSpinner.setAdapter(adapterSpinner);\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 12123165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4G9VG.jpg?s=128&g=1", "display_name": "Schmidi", "link": "https://stackoverflow.com/users/12123165/schmidi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 58522881, "answer_count": 4, "score": -1, "last_activity_date": 1571834531, "creation_date": 1571830057, "last_edit_date": 1571830352, "question_id": 58521826, "link": "https://stackoverflow.com/questions/58521826/android-spinner-no-items-shown-only-arrow", "title": "Android Spinner no items shown only arrow", "body": "<p>Hey I already checked a lot of other questions about this problem but all the over solutions didn't helped. So my problem is that I also just see the arrow of a spinner and no items are shown.\nSo I have two spinners actually but their code is the same so didn't posted the other one. Hopefully someone has an idea how to fix this issue. Would be greatful for every idea!</p>\n\n<p>Code:</p>\n\n<pre><code>      var speedAdapter = ArrayAdapter.createFromResource(\n            this,\n            R.array.speedByte,\n            android.R.layout.simple_spinner_item\n        )\n\n    speedAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item)\n    this.speedSpinner.adapter = speedAdapter\n</code></pre>\n\n<p>XML:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:orientation=\"vertical\"&gt;\n\n    &lt;Space\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"0dp\"\n        android:layout_weight=\"0.05\"\n        /&gt;\n\n    &lt;TextView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"0dp\"\n        android:textStyle=\"bold\"\n        android:textSize=\"40sp\"\n        android:text=\"@string/app_name\"\n        android:textAlignment=\"center\"\n        android:layout_weight=\"0.1\"\n        /&gt;\n\n\n    &lt;com.google.android.material.tabs.TabLayout\n        android:layout_height=\"0dp\"\n        android:layout_width=\"match_parent\"\n        android:layout_weight=\"0.1\"\n        android:orientation=\"vertical\"&gt;\n\n        &lt;com.google.android.material.tabs.TabItem\n            android:layout_height=\"wrap_content\"\n            android:layout_width=\"wrap_content\"\n            android:id=\"@+id/speedTab\"\n            android:text=\"@string/tab_text_download\" /&gt;\n\n        &lt;com.google.android.material.tabs.TabItem\n            android:layout_height=\"wrap_content\"\n            android:layout_width=\"wrap_content\"\n            android:id=\"@+id/pingTab\"\n            android:text=\"@string/tab_text_ping\" /&gt;\n\n    &lt;/com.google.android.material.tabs.TabLayout&gt;\n\n\n    &lt;Space\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_weight=\"0.1\"\n        /&gt;\n\n    &lt;GridLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"0dp\"\n        android:orientation=\"horizontal\"\n        android:columnCount=\"2\"\n        android:rowCount=\"6\"\n        android:layout_weight=\"0.4\"\n\n        &gt;\n\n        &lt;Switch\n            android:layout_height=\"0dp\"\n            android:layout_rowWeight=\"0.1\"\n            android:layout_columnWeight=\"1\"\n            android:gravity=\"fill\"\n            android:text=\"@string/bit_byte\"\n            android:layout_row=\"0\"\n            android:layout_column=\"1\"\n            android:id=\"@+id/sizeBitByteSwitcher\"\n            android:layout_gravity=\"center\"\n            /&gt;\n\n        &lt;Switch\n            android:layout_height=\"0dp\"\n            android:layout_rowWeight=\"0.1\"\n            android:text=\"@string/bit_byte\"\n            android:layout_columnWeight=\"1\"\n            android:gravity=\"fill\"\n            android:layout_row=\"4\"\n            android:layout_column=\"1\"\n            android:layout_gravity=\"center\"\n            android:id=\"@+id/speedBitByteSwitcher\"\n            /&gt;\n\n        &lt;TextView\n            android:layout_columnWeight=\"1\"\n            android:layout_column=\"0\"\n            android:layout_row=\"0\"\n            android:text=\"@string/note_size\"/&gt;\n\n        &lt;EditText\n            android:id=\"@+id/textEditSize\"\n            android:layout_columnWeight=\"1\"\n            android:gravity=\"fill\"\n            android:layout_height=\"0dp\"\n            android:layout_row=\"1\"\n            android:layout_rowWeight=\"0.3\"\n            android:layout_column=\"0\"\n            android:ems=\"10\"\n            android:inputType=\"numberDecimal\" /&gt;\n\n        &lt;Space\n            android:layout_height=\"0dp\"\n            android:layout_columnWeight=\"1\"\n            android:gravity=\"fill\"\n            android:layout_rowWeight=\"0.2\"\n            android:layout_row=\"2\"\n            android:layout_column=\"0\" /&gt;\n\n\n        &lt;TextView\n            android:layout_columnWeight=\"1\"\n            android:layout_column=\"0\"\n            android:layout_row=\"3\"\n            android:text=\"@string/note_speed\"/&gt;\n\n        &lt;EditText\n            android:id=\"@+id/textEditSpeed\"\n            android:layout_columnWeight=\"1\"\n            android:gravity=\"fill\"\n            android:layout_height=\"0dp\"\n            android:layout_row=\"4\"\n            android:layout_rowWeight=\"0.3\"\n            android:layout_column=\"0\"\n            android:ems=\"10\"\n            android:inputType=\"number|numberDecimal\"\n            android:importantForAutofill=\"no\" /&gt;\n\n\n        &lt;Spinner\n            android:id=\"@+id/sizeSpinner\"\n            android:layout_columnWeight=\"1\"\n            android:gravity=\"fill\"\n            android:spinnerMode=\"dropdown\"\n            android:layout_height=\"0dp\"\n            android:layout_column=\"1\"\n            android:layout_row=\"3\"\n            android:layout_gravity=\"center\"\n            android:layout_rowWeight=\"0.3\"\n            android:foreground=\"#000000\"\n\n            /&gt;\n\n        &lt;Space\n            android:layout_columnWeight=\"1\"\n            android:gravity=\"fill\"\n            android:layout_height=\"0dp\"\n            android:layout_rowWeight=\"0.2\"\n            android:layout_row=\"2\"\n            android:spinnerMode=\"dropdown\"\n            android:layout_column=\"1\" /&gt;\n\n\n        &lt;Spinner\n            android:id=\"@+id/speedSpinner\"\n            android:layout_height=\"0dp\"\n\n            android:layout_columnWeight=\"1\"\n            android:gravity=\"fill\"\n            android:layout_row=\"5\"\n            android:layout_gravity=\"center\"\n            android:layout_rowWeight=\"0.3\"\n            /&gt;\n\n\n    &lt;/GridLayout&gt;\n\n    &lt;Button\n        android:id=\"@+id/calcBtn\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"0dp\"\n        android:layout_weight=\"0.05\"\n        android:layout_gravity=\"center\"\n        android:text=\"@string/calc_btn\"/&gt;\n\n    &lt;TextView\n        android:id=\"@+id/speedResultView\"\n        android:layout_height=\"0dp\"\n        android:layout_width=\"match_parent\"\n        android:textStyle=\"bold\"\n        android:textAlignment=\"center\"\n        android:textSize=\"30sp\"\n        android:layout_weight=\"0.2\"\n        android:text=\"RESULT\"/&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>There is also now the array resource:\n</p>\n\n<pre><code>&lt;string-array name=\"speedByte\"&gt;\n    &lt;item name=\"Byte\"&gt;Byte /s&lt;/item&gt;\n    &lt;item name=\"Kilo\"&gt;KiloByte /s&lt;/item&gt;\n    &lt;item name=\"Mega\"&gt;MegaByte /s&lt;/item&gt;\n    &lt;item name=\"Giga\"&gt;GigaByte /s&lt;/item&gt;\n    &lt;item name=\"Terra\"&gt;TerraByte /s&lt;/item&gt;\n&lt;/string-array&gt;\n</code></pre>\n\n<p></p>\n"}, {"tags": ["android", "kotlin", "android-intent", "multipartform-data", "android-file"], "comments": [{"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1571830890, "post_id": 58521780, "comment_id": 103369198, "body": "You seem to be using Retrofit or OkHttp. If so, use <a href=\"https://github.com/square/okhttp/issues/3585#issuecomment-327319196\" rel=\"nofollow noreferrer\">the <code>InputStreamRequestBody</code> found in the second code snippet of this issue comment</a> to create a <code>RequestBody</code> from a <code>Uri</code> using a <code>ContentResolver</code>."}, {"owner": {"reputation": 195, "user_id": 11767593, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2udvAOwsrts/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reDlee3-ZQeZf38QEEDosPfV4m8LA/photo.jpg?sz=128", "display_name": "HyeonSeok", "link": "https://stackoverflow.com/users/11767593/hyeonseok"}, "reply_to_user": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1571905224, "post_id": 58521780, "comment_id": 103396562, "body": "think you for your comment. but i found other way to create file. anyway thank you"}], "owner": {"reputation": 195, "user_id": 11767593, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2udvAOwsrts/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reDlee3-ZQeZf38QEEDosPfV4m8LA/photo.jpg?sz=128", "display_name": "HyeonSeok", "link": "https://stackoverflow.com/users/11767593/hyeonseok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 294, "favorite_count": 0, "closed_date": 1571830797, "answer_count": 0, "score": 0, "last_activity_date": 1571830962, "creation_date": 1571829877, "question_id": 58521780, "link": "https://stackoverflow.com/questions/58521780/how-to-get-filepdf-jpg-docs-from-local-storage-and-create-file", "closed_reason": "Duplicate", "title": "how to get file(pdf, jpg, docs) from local storage and create File", "body": "<p>I tried to create file with intent data uri</p>\n\n<p>To create File, I start intent like this</p>\n\n<pre><code>val intent = Intent(Intent.ACTION_GET_CONTENT).apply {\n                addCategory(Intent.CATEGORY_OPENABLE)\n                type = \"*/*\"\n            }\n            startActivityForResult(intent, PICK_FROM_LOCAL)\n</code></pre>\n\n<p>And this is onActivityResult code</p>\n\n<pre><code>super.onActivityResult(requestCode, resultCode, data)\n    if (requestCode === PICK_FROM_LOCAL &amp;&amp; resultCode === Activity.RESULT_OK) {\n        val uri = data?.data\n\n        val uriPath = uri?.path\n        val file = File(uriPath)\n        Log.i(\"File Path\", file.path)\n        if (file.exists()) {\n            viewModel.hasFile = true\n            val requestFile = RequestBody.create(MediaType.parse(\"multipart/form-data\"), file)\n            val multipartData =\n                MultipartBody.Part.createFormData(\"file\", file.name, requestFile)\n            viewModel.file = multipartData\n        }\n    }\n</code></pre>\n\n<p>This is Log ->  I/File\u00a0Path: /document/image:5187</p>\n\n<p>file.exists() returns false so codes below if (file.exists()) does not work</p>\n\n<p>What i want to know is how to create a file by using uri</p>\n\n<p>thank for your help</p>\n"}, {"tags": ["android", "kotlin", "navigation-drawer"], "comments": [{"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 3, "creation_date": 1571829070, "post_id": 58521503, "comment_id": 103368214, "body": "Please edit your question and provide the entire stack trace, not just the error message."}, {"owner": {"reputation": 5355, "user_id": 3738947, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/G2Hpi.jpg?s=128&g=1", "display_name": "Chirag Savsani", "link": "https://stackoverflow.com/users/3738947/chirag-savsani"}, "edited": false, "score": 2, "creation_date": 1571829192, "post_id": 58521503, "comment_id": 103368282, "body": "also, post your build.gradle file."}, {"owner": {"reputation": 23192, "user_id": 2684, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Z9oZ0.jpg?s=128&g=1", "display_name": "Martin Marconcini", "link": "https://stackoverflow.com/users/2684/martin-marconcini"}, "edited": false, "score": 1, "creation_date": 1571830473, "post_id": 58521503, "comment_id": 103368975, "body": "I think you meant to use (in your XML) <a href=\"https://developer.android.com/reference/android/support/design/widget/NavigationView\" rel=\"nofollow noreferrer\">this NavigationView</a> as opposed to <a href=\"https://developer.android.com/reference/com/google/android/material/navigation/NavigationView\" rel=\"nofollow noreferrer\">this other</a>. Hard to say without seeing your Gradle and imports. Seems like you&#39;re missing an AppBarLayout closing tag there? (below the Toolbar)."}, {"owner": {"reputation": 186020, "user_id": 2016562, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2433495de6d2b99746f8e25344209fa7?s=128&d=identicon&r=PG", "display_name": "Gabriele Mariotti", "link": "https://stackoverflow.com/users/2016562/gabriele-mariotti"}, "edited": false, "score": 0, "creation_date": 1571830540, "post_id": 58521503, "comment_id": 103369026, "body": "You <b>can&#39;t use</b> Theme.AppCompat with the material components library"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 9734334, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CSwSrE4pEsY/AAAAAAAAAAI/AAAAAAAAAAc/h4eAZwK6Zfw/photo.jpg?sz=128", "display_name": "Stefan Perli\u0107", "link": "https://stackoverflow.com/users/9734334/stefan-perli%c4%87"}, "is_accepted": false, "score": 0, "last_activity_date": 1572079545, "last_edit_date": 1572079545, "creation_date": 1571829803, "answer_id": 58521766, "question_id": 58521503, "link": "https://stackoverflow.com/questions/58521503/im-getting-a-error-inflating-class-com-google-android-material-navigation-navi/58521766#58521766", "title": "I&#39;m getting a &quot;Error inflating class com.google.android.material.navigation.NavigationView&quot;", "body": "<p>Your navigation view in the xml is from <code>com.google.android.material.navigation.NavigationView</code> and you're probably trying to inflate <code>NavigationView</code> from <code>android.support.design.widget</code>, if this is the problem just delete the import and reimport the correct package.</p>\n"}, {"tags": [], "owner": {"reputation": 769, "user_id": 6284141, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/udu0v.jpg?s=128&g=1", "display_name": "Shubham Raitka", "link": "https://stackoverflow.com/users/6284141/shubham-raitka"}, "is_accepted": false, "score": 1, "last_activity_date": 1571830447, "creation_date": 1571830447, "answer_id": 58521946, "question_id": 58521503, "link": "https://stackoverflow.com/questions/58521503/im-getting-a-error-inflating-class-com-google-android-material-navigation-navi/58521946#58521946", "title": "I&#39;m getting a &quot;Error inflating class com.google.android.material.navigation.NavigationView&quot;", "body": "<p>Close your AppBarLayout tag, like this</p>\n\n<pre><code>&lt;com.google.android.material.appbar.AppBarLayout\n        android:id=\"@+id/appBarLayout\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:theme=\"@style/ThemeOverlay.AppCompat.Dark.ActionBar\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\"&gt;\n\n        &lt;androidx.appcompat.widget.Toolbar\n            android:id=\"@+id/toolbar\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:minHeight=\"57dp\"\n            android:padding=\"1dp\"\n            app:layout_constraintTop_toTopOf=\"parent\"\n            android:theme=\"@style/AppTheme\"&gt;\n\n\n        &lt;/androidx.appcompat.widget.Toolbar&gt;\n\n&lt;/com.google.android.material.appbar.AppBarLayout&gt;\n</code></pre>\n"}], "owner": {"reputation": 744, "user_id": 860233, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/4391f7ef50dfccf09fc68ae17368d9b8?s=128&d=identicon&r=PG", "display_name": "Glenncito", "link": "https://stackoverflow.com/users/860233/glenncito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 429, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1572079545, "creation_date": 1571828923, "question_id": 58521503, "link": "https://stackoverflow.com/questions/58521503/im-getting-a-error-inflating-class-com-google-android-material-navigation-navi", "title": "I&#39;m getting a &quot;Error inflating class com.google.android.material.navigation.NavigationView&quot;", "body": "<p>I have looked at other posts to this problem and I can't seem to solve it, so I'm hoping that its just a case that I am missing something obvious.</p>\n\n<p>Here is my code: \n<strong>MainActivity.XML</strong></p>\n\n<pre><code>&lt;androidx.drawerlayout.widget.DrawerLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    android:id=\"@+id/drawer_layout\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:fitsSystemWindows=\"true\"&gt;\n\n    &lt;androidx.constraintlayout.widget.ConstraintLayout\n            android:id=\"@+id/coordinatorLayout\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"&gt;\n\n        &lt;com.google.android.material.appbar.AppBarLayout\n                android:id=\"@+id/appBarLayout\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"\n                android:theme=\"@style/ThemeOverlay.AppCompat.Dark.ActionBar\"\n                app:layout_constraintEnd_toEndOf=\"parent\"\n                app:layout_constraintStart_toStartOf=\"parent\"\n                app:layout_constraintTop_toTopOf=\"parent\"&gt;\n\n            &lt;androidx.appcompat.widget.Toolbar\n                    android:id=\"@+id/toolbar\"\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"wrap_content\"\n                    android:background=\"@color/translation_panel_blue_open_mea\"\n                    android:minHeight=\"57dp\"\n                    android:padding=\"1dp\"\n                    app:layout_constraintTop_toTopOf=\"parent\"\n                    app:subtitleTextColor=\"@color/header_grey_mea\"\n                    app:titleTextColor=\"@color/header_grey_mea\"\n                     android:theme=\"@style/AppTheme\"&gt;\n\n\n            &lt;/androidx.appcompat.widget.Toolbar&gt;\n\n\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n\n    &lt;com.google.android.material.navigation.NavigationView\n        android:id=\"@+id/nav_view\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"match_parent\"\n        android:layout_gravity=\"start\"\n        android:fitsSystemWindows=\"true\"\n        android:theme=\"@style/AppTheme\"\n        app:menu=\"@menu/burger_menu\" /&gt;\n\n&lt;/androidx.drawerlayout.widget.DrawerLayout&gt;\n</code></pre>\n\n<p><strong>burger_menu.xml</strong>\n    </p>\n\n<pre><code>&lt;menu xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt;\n    &lt;group android:checkableBehavior=\"single\"&gt;\n        &lt;item\n            android:id=\"@+id/menuLogout\"\n            android:onClick=\"initUserLogout\"\n            android:title=\"@string/log_out\"&gt;\n\n        &lt;/item&gt;\n        &lt;item\n            android:id=\"@+id/menuItemTutorial\"\n            android:onClick=\"launchTutorialView\"\n            android:title=\"@string/tutorial\"&gt;\n\n        &lt;/item&gt;\n\n    &lt;/group&gt;\n&lt;/menu&gt;\n</code></pre>\n\n<p><strong><code>AppTheme</code></strong></p>\n\n<pre><code>&lt;style name=\"AppTheme\" parent=\"Theme.AppCompat.Light.DarkActionBar\"&gt;\n        &lt;!-- Customize your theme here. --&gt;\n        &lt;item name=\"colorPrimary\"&gt;@color/colorPrimary&lt;/item&gt;\n        &lt;item name=\"colorPrimaryDark\"&gt;@color/colorPrimaryDark&lt;/item&gt;\n        &lt;item name=\"colorAccent\"&gt;@color/colorAccent&lt;/item&gt;\n        &lt;item name=\"windowActionBar\"&gt;false&lt;/item&gt;\n        &lt;item name=\"windowNoTitle\"&gt;true&lt;/item&gt;\n    &lt;/style&gt;\n</code></pre>\n\n<p>and my <code>initBurgerMenu</code>function that runs in <code>MainActivity</code>:</p>\n\n<pre><code>private fun initBurgerMenu(){\n        mDrawerLayout = findViewById(R.id.drawer_layout)\n        val navigationView: NavigationView = findViewById(R.id.nav_view)\n        navigationView.setNavigationItemSelectedListener { menuItem -&gt;\n            // set item as selected to persist highlight\n            menuItem.isChecked = true\n            // close drawer when item is tapped\n            mDrawerLayout.closeDrawers()\n            when (menuItem.itemId) {\n                R.id.menuLogout -&gt; {\n                   initUserLogout()\n                }\n                R.id.menuItemTutorial -&gt; {\n                    Toast.makeText(this, \"tutorial\", Toast.LENGTH_LONG).show()\n                }\n            }\n            true\n        }\n    }\n</code></pre>\n"}, {"tags": ["android", "kotlin", "dagger-2", "picasso"], "comments": [{"owner": {"reputation": 1967, "user_id": 4450098, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/QmO9Q.png?s=128&g=1", "display_name": "Sagar Nayak", "link": "https://stackoverflow.com/users/4450098/sagar-nayak"}, "edited": false, "score": 0, "creation_date": 1571830261, "post_id": 58521495, "comment_id": 103368839, "body": "you should use an injection pattern to inject and dependency into your activity class. and as far as Picasso is concerned i donth think you need to use injection for this unless and until you are doing some middleware work in Picasso methods. just do a Picasso.get(). for kotlin dependency injection I would suggest having a look at kodein or koin. its simpler and would get your work done to much extent."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 11921303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbaf79ce93f22355df8d05a439b6e18a?s=128&d=identicon&r=PG&f=1", "display_name": "Apptester", "link": "https://stackoverflow.com/users/11921303/apptester"}, "edited": false, "score": 0, "creation_date": 1571830072, "post_id": 58521642, "comment_id": 103368720, "body": "Thanks dear, i think this too. can you help me and send to me code?"}, {"owner": {"reputation": 1385, "user_id": 4971561, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-YIQlI2oeD5Q/AAAAAAAAAAI/AAAAAAAAAGA/jJHvlu2yYaI/photo.jpg?sz=128", "display_name": "Maro\u0161 \u0160eleng", "link": "https://stackoverflow.com/users/4971561/maro%c5%a1-%c5%a0eleng"}, "reply_to_user": {"reputation": 5, "user_id": 11921303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbaf79ce93f22355df8d05a439b6e18a?s=128&d=identicon&r=PG&f=1", "display_name": "Apptester", "link": "https://stackoverflow.com/users/11921303/apptester"}, "edited": false, "score": 0, "creation_date": 1571831142, "post_id": 58521642, "comment_id": 103369340, "body": "Basically, you define <code>lateinit var instance: App</code> inside a companion object in the <code>App</code> class. Then, in <code>onCreate</code>, you initialize: <code>instance = this</code>. You can have a look at this answer (<a href=\"https://stackoverflow.com/a/29295509/4971561\">stackoverflow.com/a/29295509/4971561</a>) to get an inspiration."}, {"owner": {"reputation": 1385, "user_id": 4971561, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-YIQlI2oeD5Q/AAAAAAAAAAI/AAAAAAAAAGA/jJHvlu2yYaI/photo.jpg?sz=128", "display_name": "Maro\u0161 \u0160eleng", "link": "https://stackoverflow.com/users/4971561/maro%c5%a1-%c5%a0eleng"}, "reply_to_user": {"reputation": 5, "user_id": 11921303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbaf79ce93f22355df8d05a439b6e18a?s=128&d=identicon&r=PG&f=1", "display_name": "Apptester", "link": "https://stackoverflow.com/users/11921303/apptester"}, "edited": false, "score": 0, "creation_date": 1571836812, "post_id": 58521642, "comment_id": 103372652, "body": "Well, instead of calling <code>App().appComponent</code>, you call <code>App.instance.appComponent</code>"}], "tags": [], "owner": {"reputation": 1385, "user_id": 4971561, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-YIQlI2oeD5Q/AAAAAAAAAAI/AAAAAAAAAGA/jJHvlu2yYaI/photo.jpg?sz=128", "display_name": "Maro\u0161 \u0160eleng", "link": "https://stackoverflow.com/users/4971561/maro%c5%a1-%c5%a0eleng"}, "is_accepted": true, "score": 0, "last_activity_date": 1571829426, "creation_date": 1571829426, "answer_id": 58521642, "question_id": 58521495, "link": "https://stackoverflow.com/questions/58521495/why-not-show-data-when-use-dagger2-on-android/58521642#58521642", "title": "Why not show data when use Dagger2 on Android", "body": "<p>I think it's because you are creating a new instance of you application class, eg. <code>App()</code> and then calling <code>getAppComponent()</code> which for sure returns <code>null</code>, as you should <strong>not</strong> construct the application instance yourself, but instead access a static property referencing it.</p>\n\n<p>To fix it, you need to add a static property (<code>instance</code>) to the <code>App</code> class and get the <code>AppComponent</code> using that property.</p>\n"}], "owner": {"reputation": 5, "user_id": 11921303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbaf79ce93f22355df8d05a439b6e18a?s=128&d=identicon&r=PG&f=1", "display_name": "Apptester", "link": "https://stackoverflow.com/users/11921303/apptester"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 58521642, "answer_count": 1, "score": 0, "last_activity_date": 1571829426, "creation_date": 1571828896, "question_id": 58521495, "link": "https://stackoverflow.com/questions/58521495/why-not-show-data-when-use-dagger2-on-android", "title": "Why not show data when use Dagger2 on Android", "body": "<p>In my application i want use <strong>Dagger2</strong> and i want show just one image from server and for show image i used <strong>Picasso</strong>.<br>\nI write below codes, but after run application not show me any image into <code>imageview</code>!<br>\nFor android i use <strong>Kotlin</strong> language.<br></p>\n\n<p><strong>Application class :</strong></p>\n\n<pre><code>class App : Application() {\n\n    var component: AppComponent? = null\n\n    override fun onCreate() {\n        super.onCreate()\n        //Init dagger component\n        component = DaggerAppComponent.builder().modulePicasso(ModulePicasso(this)).build()\n    }\n\n    fun getAppComponent(): AppComponent? {\n        return component\n    }\n}\n</code></pre>\n\n<p><strong>Activity class :</strong> </p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        App().getAppComponent()?.getPicasso()?.load(\"https://cdn01.zoomit.ir/2017/6/5f0e97c1-9eb7-4176-aa02-35252489ede8.jpg\")\n            ?.into(imageView)\n    }\n}\n</code></pre>\n\n<p>How can i fix it?</p>\n"}, {"tags": ["kotlin", "kotlin-multiplatform", "kotlin-native"], "answers": [{"comments": [{"owner": {"reputation": 3981, "user_id": 3004003, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4e3c5f99203dce2ba12b9cc9ef2b4328?s=128&d=identicon&r=PG&f=1", "display_name": "schmidt9", "link": "https://stackoverflow.com/users/3004003/schmidt9"}, "edited": false, "score": 0, "creation_date": 1598015948, "post_id": 58521109, "comment_id": 112328499, "body": "Note option with converting to and then from <code>NSString</code> may give you a screwed up result because such conversion adds extra bytes to output, that&#39;s why its better to use <i>only</i> <code>allocArrayOf</code> method"}, {"owner": {"reputation": 948, "user_id": 1067587, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/aax4Q.jpg?s=128&g=1", "display_name": "Noah Gilmore", "link": "https://stackoverflow.com/users/1067587/noah-gilmore"}, "edited": false, "score": 2, "creation_date": 1602875375, "post_id": 58521109, "comment_id": 113868544, "body": "For anyone looking at this solution, note that there are imports needed. I posted <a href=\"https://gist.github.com/noahsark769/61cfb7a8b7231e2069a9dab94cf74a62\" rel=\"nofollow noreferrer\">gist.github.com/noahsark769/61cfb7a8b7231e2069a9dab94cf74a62</a> which has the full compiling code I used here"}], "tags": [], "owner": {"reputation": 9491, "user_id": 5631145, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lgSfD.jpg?s=128&g=1", "display_name": "Francisco Durdin Garcia", "link": "https://stackoverflow.com/users/5631145/francisco-durdin-garcia"}, "is_accepted": true, "score": 16, "last_activity_date": 1571827575, "creation_date": 1571827575, "answer_id": 58521109, "question_id": 58521108, "link": "https://stackoverflow.com/questions/58521108/how-to-convert-kotlin-bytearray-to-nsdata-and-viceversa/58521109#58521109", "title": "How to convert Kotlin ByteArray to NsData and viceversa", "body": "<p><strong>NsData to ByteArray</strong></p>\n\n<pre><code>actual typealias ImageBytes = NSData\nactual fun ImageBytes.toByteArray(): ByteArray = ByteArray(this@toByteArray.length.toInt()).apply {\n    usePinned {\n        memcpy(it.addressOf(0), this@toByteArray.bytes, this@toByteArray.length)\n    }\n}\n</code></pre>\n\n<p><strong>ByteArray to NsData</strong></p>\n\n<pre><code>actual fun ByteArray.toImageBytes(): ImageBytes? = memScoped {\n    val string = NSString.create(string = this@toImageBytes.decodeToString())\n    return string.dataUsingEncoding(NSUTF8StringEncoding)\n}\n</code></pre>\n\n<p><strong>ByteArray to NsData different way</strong></p>\n\n<pre><code>actual fun ByteArray.toImageBytes() : ImageBytes = memScoped { \n    NSData.create(bytes = allocArrayOf(this@toImageBytes), \n        length = this@toImageBytes.size.toULong()) \n}\n</code></pre>\n"}], "owner": {"reputation": 9491, "user_id": 5631145, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lgSfD.jpg?s=128&g=1", "display_name": "Francisco Durdin Garcia", "link": "https://stackoverflow.com/users/5631145/francisco-durdin-garcia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1094, "favorite_count": 1, "accepted_answer_id": 58521109, "answer_count": 1, "score": 7, "last_activity_date": 1576328331, "creation_date": 1571827575, "last_edit_date": 1576328331, "question_id": 58521108, "link": "https://stackoverflow.com/questions/58521108/how-to-convert-kotlin-bytearray-to-nsdata-and-viceversa", "title": "How to convert Kotlin ByteArray to NsData and viceversa", "body": "<p>Fighting with a Kotlin Multiplatform project I have ended with the problem of needing to work with <code>NsData</code> on my iOS platform from the <code>sharedModule</code> working with Kotlin Native.</p>\n\n<p>Because of this, I need to transform objectiveC <code>NsData</code> to Kotlin <code>ByteArray</code> and way back. How can I do this?</p>\n"}, {"tags": ["java", "android", "kotlin", "android-activity"], "comments": [{"owner": {"reputation": 9541, "user_id": 1568530, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001179991520/picture?type=large", "display_name": "Vladyslav Matviienko", "link": "https://stackoverflow.com/users/1568530/vladyslav-matviienko"}, "edited": false, "score": 2, "creation_date": 1571827121, "post_id": 58520565, "comment_id": 103367217, "body": "in general, your app can&#39;t kill other apps/processes"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 8899622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d91009919fb8259d8544692b20da3a9b?s=128&d=identicon&r=PG&f=1", "display_name": "Maxime Godinas", "link": "https://stackoverflow.com/users/8899622/maxime-godinas"}, "edited": false, "score": 0, "creation_date": 1571831770, "post_id": 58521216, "comment_id": 103369735, "body": "My app will not be published in &quot;Google Play&quot;. It&#39;s only for our entreprise with specific device that not have google services. So I don&#39;t need to be worried about that. Yes I agree with this logic but I can not get the process id of other apps, I only get the process id of my app."}, {"owner": {"reputation": 7271, "user_id": 3589715, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rktTo.jpg?s=128&g=1", "display_name": "AlexPad", "link": "https://stackoverflow.com/users/3589715/alexpad"}, "reply_to_user": {"reputation": 23, "user_id": 8899622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d91009919fb8259d8544692b20da3a9b?s=128&d=identicon&r=PG&f=1", "display_name": "Maxime Godinas", "link": "https://stackoverflow.com/users/8899622/maxime-godinas"}, "edited": false, "score": 0, "creation_date": 1571857680, "post_id": 58521216, "comment_id": 103382980, "body": "Ok, I change edit my response with the code to do it"}, {"owner": {"reputation": 23, "user_id": 8899622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d91009919fb8259d8544692b20da3a9b?s=128&d=identicon&r=PG&f=1", "display_name": "Maxime Godinas", "link": "https://stackoverflow.com/users/8899622/maxime-godinas"}, "edited": false, "score": 1, "creation_date": 1571993148, "post_id": 58521216, "comment_id": 103429721, "body": "I have tried your code and I get other package name but killBackgroundProcesses doen&#39;t work. Maybe this function is not appropriate for my case because the app that I want to kill, is running in foreground. Thank you for your help."}], "tags": [], "owner": {"reputation": 7271, "user_id": 3589715, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rktTo.jpg?s=128&g=1", "display_name": "AlexPad", "link": "https://stackoverflow.com/users/3589715/alexpad"}, "is_accepted": true, "score": 2, "last_activity_date": 1571857658, "last_edit_date": 1571857658, "creation_date": 1571827954, "answer_id": 58521216, "question_id": 58520565, "link": "https://stackoverflow.com/questions/58520565/android-kill-another-app-without-system-permission/58521216#58521216", "title": "Android - Kill another app without system permission", "body": "<p>I think that first of all to do this you should seriously read the Google guidelines to make sure you have to publish it. It is essential to ask permission for everything from the end user. Ultimately, you can see if I'm not mistaken which other packages are in runtime, once you know it you might find a way to kill them.\nTry this and add \"android.permission.KILL_BACKGROUND_PROCESSES\" permission on your Manifest :</p>\n\n<pre><code>private void killOtherApps(String packageTokill){\n\n    List&lt;ApplicationInfo&gt; packages;\n    PackageManager pm;\n    pm = getPackageManager();\n    //get a list of installed apps.\n    packages = pm.getInstalledApplications(0);\n\n\n    ActivityManager mActivityManager = (ActivityManager) MainActivity.this.getSystemService(Context.ACTIVITY_SERVICE);\n    String myPackage = getApplicationContext().getPackageName();\n\n    for (ApplicationInfo packageInfo : packages) {\n\n        if((packageInfo.flags &amp; ApplicationInfo.FLAG_SYSTEM)==1) {\n            continue;\n        }\n        if(packageInfo.packageName.equals(myPackage)) {\n            continue;\n        }\n        if(packageInfo.packageName.equals(packageTokill)) {\n            mActivityManager.killBackgroundProcesses(packageInfo.packageName);    \n        }\n\n    }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 8899622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d91009919fb8259d8544692b20da3a9b?s=128&d=identicon&r=PG&f=1", "display_name": "Maxime Godinas", "link": "https://stackoverflow.com/users/8899622/maxime-godinas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "accepted_answer_id": 58521216, "answer_count": 1, "score": 2, "last_activity_date": 1571857658, "creation_date": 1571825673, "last_edit_date": 1571831660, "question_id": 58520565, "link": "https://stackoverflow.com/questions/58520565/android-kill-another-app-without-system-permission", "title": "Android - Kill another app without system permission", "body": "<p>I have an app that can start <strong>other</strong> apps. </p>\n\n<p>This works, I can do that.</p>\n\n<p>Now, I would like to also kill the apps started by my app. </p>\n\n<p>But I can't find a way to do that (My app doesn't have system permissions).</p>\n\n<p>I have tried to list all currently running processes in order to get their PID and to kill with it, but I can only get the PID of my app.</p>\n\n<p>I have tried to kill the background process (I know the package name of the app) but it doesn't work.</p>\n\n<p>So, is there a way to kill other apps with my app, without haveing system permissions?</p>\n"}, {"tags": ["android", "android-studio", "kotlin", "android-recyclerview", "android-viewpager"], "comments": [{"owner": {"reputation": 783, "user_id": 4919115, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/pRGAU.jpg?s=128&g=1", "display_name": "Miriana Itani", "link": "https://stackoverflow.com/users/4919115/miriana-itani"}, "edited": false, "score": 0, "creation_date": 1571825085, "post_id": 58520191, "comment_id": 103366203, "body": "hello, I am trying to understand your problem here. you want to do an async call in the main activity before populating fragment 2?"}, {"owner": {"reputation": 1, "user_id": 10238270, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-__SyIGtiQiM/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qxnFihBAWlhTe0BhbvAjlSWE_Q6w/mo/photo.jpg?sz=128", "display_name": "Thomas Saunders", "link": "https://stackoverflow.com/users/10238270/thomas-saunders"}, "reply_to_user": {"reputation": 783, "user_id": 4919115, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/pRGAU.jpg?s=128&g=1", "display_name": "Miriana Itani", "link": "https://stackoverflow.com/users/4919115/miriana-itani"}, "edited": false, "score": 0, "creation_date": 1571825390, "post_id": 58520191, "comment_id": 103366356, "body": "Hi Miriana, To be honest my idea would be either to do as you said and do the async call before populating fragment 2, or to update fragment 2 after the async function is done, wasn&#39;t quite sure which would be more suitable, so long as the data is able to get there in a reasonable way though I can do whatever is suggested"}, {"owner": {"reputation": 783, "user_id": 4919115, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/pRGAU.jpg?s=128&g=1", "display_name": "Miriana Itani", "link": "https://stackoverflow.com/users/4919115/miriana-itani"}, "edited": false, "score": 0, "creation_date": 1571825965, "post_id": 58520191, "comment_id": 103366653, "body": "why don&#39;t you do the async call inside the fragment itself?"}, {"owner": {"reputation": 1, "user_id": 10238270, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-__SyIGtiQiM/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qxnFihBAWlhTe0BhbvAjlSWE_Q6w/mo/photo.jpg?sz=128", "display_name": "Thomas Saunders", "link": "https://stackoverflow.com/users/10238270/thomas-saunders"}, "reply_to_user": {"reputation": 783, "user_id": 4919115, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/pRGAU.jpg?s=128&g=1", "display_name": "Miriana Itani", "link": "https://stackoverflow.com/users/4919115/miriana-itani"}, "edited": false, "score": 0, "creation_date": 1571826204, "post_id": 58520191, "comment_id": 103366750, "body": "Tried that, but effectivelly when I did it it only called when I went to view it, so essensially when I swiped to the fragments part of the viewpager the recyclerview was blank until I tried to swipe back to the original fragment at which point it would fill up, this only worked after a few seconds though and sometimes wouldn&#39;t happen at all I found, so I moved on from trying that."}, {"owner": {"reputation": 783, "user_id": 4919115, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/pRGAU.jpg?s=128&g=1", "display_name": "Miriana Itani", "link": "https://stackoverflow.com/users/4919115/miriana-itani"}, "edited": false, "score": 0, "creation_date": 1571826620, "post_id": 58520191, "comment_id": 103366945, "body": "the best approach is actually to have it in the fragment itself and put a loader in the second fragment that takes the full screen some sort of a gif. In that way, you will avoid the empty page. Then when the result of asyncall is retreived, dismiss the loader and populate the recyclerview."}], "answers": [{"tags": [], "owner": {"reputation": 6696, "user_id": 596725, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/6zgCU.jpg?s=128&g=1", "display_name": "Herry", "link": "https://stackoverflow.com/users/596725/herry"}, "is_accepted": false, "score": 0, "last_activity_date": 1571826684, "last_edit_date": 1571826684, "creation_date": 1571826293, "answer_id": 58520738, "question_id": 58520191, "link": "https://stackoverflow.com/questions/58520191/how-to-do-a-recyclerview-on-a-viewpager-from-a-asynchronous-http-post/58520738#58520738", "title": "How to do a recyclerview on a viewpager from a asynchronous HTTP post", "body": "<p>The first approach should be call API from the second fragment itself.</p>\n\n<p>Set your ViewPager's setOffscreenPageLimit to 1 so it would load the second fragment as well and check the Fragment lifecycle to see where your API call fit batter.</p>\n\n<p>onCreateView() of second fragment. Once the API call back given result bind it to View.</p>\n\n<p>You can also think about this where you will get an event when user change pagehttps://developer.android.com/reference/android/support/v4/view/ViewPager.SimpleOnPageChangeListener.html#onPageSelected(int). Once the page position is 1 then you can call API if data is not available.</p>\n"}], "owner": {"reputation": 1, "user_id": 10238270, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-__SyIGtiQiM/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qxnFihBAWlhTe0BhbvAjlSWE_Q6w/mo/photo.jpg?sz=128", "display_name": "Thomas Saunders", "link": "https://stackoverflow.com/users/10238270/thomas-saunders"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 338, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571826684, "creation_date": 1571824552, "question_id": 58520191, "link": "https://stackoverflow.com/questions/58520191/how-to-do-a-recyclerview-on-a-viewpager-from-a-asynchronous-http-post", "title": "How to do a recyclerview on a viewpager from a asynchronous HTTP post", "body": "<p>Currently designing an app in Kotlin, effectivelly needs to have two different areas that can be swiped between that use database results.</p>\n\n<p>So to do this right now I'm using a viewpager connected to 2 fragments, fragment1 is working perfectly because I can populate it from my mainactivity and because it's just using some TextViews.</p>\n\n<p>Fragment 2 however is populated by a recyclerview with a variable number of items.</p>\n\n<p>Both of these come from a async HTTP Post that sends to our website, coming out correctly as a string in the format \"45,1,5,7\" for example which I'm then converting into an ArrayList in Kotlin.</p>\n\n<p>The problem seems to be getting this array to fragment 2 before swiping to it.</p>\n\n<p>I've been trying the past few days going through different solutions but I'm not really able to get the input from any of these.</p>\n\n<p>I've also tried putting the adapter call inside the Async function itself but it doesn't display any of the fragments when I do that.</p>\n\n<p>The only thing that yielded the correct results so far was to put a second post request inside the fragment2 itself, however this only worked after swiping on it and didn't do it straight away either so isn't really viable for what I'm after.</p>\n\n<p>Code has more than just this in it, so only going to show the relevent parts.</p>\n\n<p>Main Activity oncreate(stripped alot):</p>\n\n<pre><code>    @Override\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n\n\n        window.decorView.systemUiVisibility = SYSTEM_UI_FLAG_FULLSCREEN\n\n        actionBar?.hide()\n\n        setContentView(R.layout.activity_main)\n\n\n\n        grabtraps() // Effectivelly where the Async function is done\n\n        val adapter = MyViewPagerAdapter(supportFragmentManager)\n        adapter.addFragment(fragment_1() , \" One \")\n        adapter.addFragment(Fragment2() , \" Two \")\n        //     adapter.addFragment(FragmentThree() , \" Three \")\n        //     adapter.addFragment(FragmentFour() , \" Four \")\n        vpPager.adapter = adapter\n\n        val tabs2 = findViewById&lt;TabLayout&gt;(R.id.tabs);\n        tabs2.setupWithViewPager(vpPager)\n\n// Like I said earlier, tried this inside the function but didn't show up in general.\n\n\n    }\n</code></pre>\n\n<p>Grabtraps() - still in MainActivity - I've stripped alot of the stuff relating to fragment1 since that's working</p>\n\n<pre><code>\n    fun grabtraps(){\n\n\n        val sharedPref: SharedPreferences = getSharedPreferences(PREF_NAME, PRIVATE_MODE)\n\n        val username = sharedPref.getString(\"user\", \"Not logged in\")\n\n        val jsoncode = JSONObject()\n        jsoncode.put(\"username\", username)\n\n// Basically getting username into the HTTPS Post, PHP pics it up on the otherside\n\n        \"https://fakesite.com/gettraps.php\".httpPost()\n                .header(\"Content-Type\", \"application/json\")\n                .body(jsoncode.toString())\n                .response{\n                    request, response, result -&gt;\n                    when (result) {\n\n                        is Result.Failure -&gt; {\n\n// Can probably skip this side - occurs if fails to connect.\n\n                            mResultTextView = findViewById(R.id.result_textview)\n\n\n\n                            var inputto = sharedPref.getString(\"user\", \"Please Log in\")\n                            if(inputto != \"Please Log in\"){\n                                inputto = \"Welcome, $inputto\"\n                            }\n                            mResultTextView.text = inputto\n\n\n                        }\n                        is Result.Success -&gt; {\n\n                            val output = String(response.data)\n\n                            val delimiter = \",\"\n\n                            val parts = output.split(delimiter)\n\n// Effectivelly just the output then put into an ArrayList&lt;String&gt;\n\n\n                            var myDataset = ArrayList&lt;String&gt;()\n                            myDataset.add(\"1\")\n                            myDataset.add(\"2\")\n                            myDataset.add(\"3\")\n// Decided to just test with dummydata for now till I can see it\n\n                            val test = Fragment2.MyAdapter(myDataset)\n\n//Accidently didn't remove this part, but was trying this along with some other code I got rid of to test fragment2, didn't work though.\n\n\n                            val sitespref: SharedPreferences = getSharedPreferences(LAST_SITES, PRIVATE_MODE)\n\n\n                            val editor3 = sitespref.edit()\n\n                            editor3.clear()\n                            editor3.putString(\"sites\",output)\n                            editor3.apply()\n\n//Tried using getsharedpreferences, saving the content then loading it on the otherside, as expected though it just loads up from the last time I did this so results are outdated.\n\n\n                            mResultTextView = findViewById(R.id.result_textview)\n\n\n\n                            findViewById&lt;TextView&gt;(R.id.catchsitevariable).text = parts[0]\n\n// Was just a test to see if I could override it the same way as the others - catchsitevariable is a textview in my recyclerview on the viewpager fragment\n\n\n\n\n\n\n                        }\n                    }\n                }\n\n    }\n\n\n</code></pre>\n\n<p>MyViewPagerAdapter - still on MainActivity, works correctly but figured Id include it just in case since it's relevent</p>\n\n<pre><code>\n    class MyViewPagerAdapter(manager: FragmentManager) : FragmentPagerAdapter(manager){\n\n        private val fragmentList : MutableList&lt;Fragment&gt; = ArrayList()\n        private val titleList : MutableList&lt;String&gt; = ArrayList()\n\n        override fun getItem(position: Int): Fragment {\n            return fragmentList[position]\n        }\n\n        override fun getCount(): Int {\n            return fragmentList.size\n        }\n\n        fun addFragment(fragment: Fragment,title:String){\n            fragmentList.add(fragment)\n            titleList.add(title)\n        }\n\n        override fun getPageTitle(position: Int): CharSequence? {\n            return titleList[position]\n        }\n\n    }\n\n\n\n\n</code></pre>\n\n<p>Fragment 2: Oncreateview / onviewCreated</p>\n\n<pre><code>\n\n\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?,\n                              savedInstanceState: Bundle?): View? {\n\n        val name = arguments?.getString(ARG_NAME)\n\n\n               return inflater.inflate(R.layout.page2fragment, container, false)\n\n    }\n\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n\n        var recyclerView: RecyclerView = view.findViewById&lt;RecyclerView&gt;(R.id.recyclesites)\n\nvar myDataset = ArrayList&lt;String&gt;()\n\n\n        val sharedPref: SharedPreferences = this.activity!!.getSharedPreferences(PREF_NAME, PRIVATE_MODE)\n\n        val username = sharedPref.getString(\"user\", \"Not logged in\")\n\n        val sites: SharedPreferences = this.activity!!.getSharedPreferences(LAST_SITES, PRIVATE_MODE)\n\n        val output = sites.getString(\"sites\",\"\")\n\n        println(\"output is $output\")\n\n// Was using this to test saving it, if nothing saved just comes out \"output is\" otherwise comes out with the previous result, this is getting called before the Async request in MainActivity is done.\n\n        val delimiter = \",\"\n\n        val parts = output.split(delimiter)\n\n        viewManager = LinearLayoutManager(getActivity())\n        viewAdapter = MyAdapter(myDataset)\n\n        recyclerView = view.findViewById&lt;RecyclerView&gt;(R.id.recyclesites).apply {\n            setHasFixedSize(true)\n\n            layoutManager = viewManager\n\n            val adapter = MyAdapter(myDataset)\n            adapter.replaceItems(myDataset)\n            adapter.getItemCount()\n            adapter.testing(findViewById&lt;RecyclerView&gt;(R.id.recyclesites))\n            recyclerView.adapter = adapter\n\n\n        }\n\n    }\n\n\n</code></pre>\n\n<p>MyAdapter - on fragment2, used for the recycleview</p>\n\n<pre><code>\n    class MyAdapter(private val myDataset: ArrayList&lt;String&gt;) :\n            RecyclerView.Adapter&lt;MyAdapter.MyViewHolder&gt;() {\n\n        private var items = ArrayList&lt;String&gt;()\n\n        class MyViewHolder(val textView: RelativeLayout) : RecyclerView.ViewHolder(textView)\n\n\n        override fun onCreateViewHolder(parent: ViewGroup,\n                                        viewType: Int): MyAdapter.MyViewHolder {\n\n            val textView = LayoutInflater.from(parent.context)\n                    .inflate(R.layout.recyclesites, parent, false) as RelativeLayout\n            return MyViewHolder(textView)\n        }\n        fun replaceItems(items: ArrayList&lt;String&gt;) {\n            this.items = items\n            notifyDataSetChanged()\n        }\n        override fun onBindViewHolder(holder: MyViewHolder, position: Int) {\n            holder.textView.text = myDataset[position]\n        }\n\n        fun testing(parent: ViewGroup): MyAdapter.MyViewHolder{\n            val textView = LayoutInflater.from(parent.context)\n                    .inflate(R.layout.recyclesites, parent, false) as RelativeLayout\n            return MyViewHolder(textView)\n\n//Effectivelly what I used to inflate the actual inner parts of the recyclerview\n\n        }\n        // Return the size of your dataset (invoked by the layout manager)\n        override fun getItemCount(): Int{\n            println(myDataset.size)\n// Was coming out 0 for most attempts when trying to send the data across.\n\n            return myDataset.size\n        }\n    }\n\n\n\n\n\n\n\n</code></pre>\n\n<p>Fairly new to both Stackoverflow and Kotlin, let me know if there's anything I missed.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["java", "kotlin", "appium"], "comments": [{"owner": {"reputation": 1427, "user_id": 1815052, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bed5ab71b8d23d9bf07a5fa12915699c?s=128&d=identicon&r=PG", "display_name": "SqueezyMo", "link": "https://stackoverflow.com/users/1815052/squeezymo"}, "edited": false, "score": 0, "creation_date": 1571823392, "post_id": 58519725, "comment_id": 103365288, "body": "Have you tried adding a target as <code>@field:AndroidFindBy(id = &quot;getStarted&quot;)</code>?"}, {"owner": {"reputation": 3743, "user_id": 10630900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ece5V.png?s=128&g=1", "display_name": "Minn", "link": "https://stackoverflow.com/users/10630900/minn"}, "edited": false, "score": 0, "creation_date": 1571823401, "post_id": 58519725, "comment_id": 103365293, "body": "Have you tried using <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/-jvm-field/index.html\" rel=\"nofollow noreferrer\"><code>@JvmField</code></a>?"}, {"owner": {"reputation": 421, "user_id": 5940289, "user_type": "registered", "accept_rate": 47, "profile_image": "https://lh3.googleusercontent.com/-GoeuykhJDEY/AAAAAAAAAAI/AAAAAAAAACs/ciAf6fJdCYs/photo.jpg?sz=128", "display_name": "Noel Omondi", "link": "https://stackoverflow.com/users/5940289/noel-omondi"}, "edited": false, "score": 0, "creation_date": 1571823673, "post_id": 58519725, "comment_id": 103365458, "body": "Trying these right now"}, {"owner": {"reputation": 421, "user_id": 5940289, "user_type": "registered", "accept_rate": 47, "profile_image": "https://lh3.googleusercontent.com/-GoeuykhJDEY/AAAAAAAAAAI/AAAAAAAAACs/ciAf6fJdCYs/photo.jpg?sz=128", "display_name": "Noel Omondi", "link": "https://stackoverflow.com/users/5940289/noel-omondi"}, "reply_to_user": {"reputation": 1427, "user_id": 1815052, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bed5ab71b8d23d9bf07a5fa12915699c?s=128&d=identicon&r=PG", "display_name": "SqueezyMo", "link": "https://stackoverflow.com/users/1815052/squeezymo"}, "edited": false, "score": 0, "creation_date": 1571823999, "post_id": 58519725, "comment_id": 103365628, "body": "@SqueezyMo Do I use that with lateinit?"}, {"owner": {"reputation": 1427, "user_id": 1815052, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bed5ab71b8d23d9bf07a5fa12915699c?s=128&d=identicon&r=PG", "display_name": "SqueezyMo", "link": "https://stackoverflow.com/users/1815052/squeezymo"}, "edited": false, "score": 0, "creation_date": 1571824383, "post_id": 58519725, "comment_id": 103365831, "body": "It shouldn&#39;t make a difference. But if the expected value is not nullable, I&#39;d go with lateinit."}, {"owner": {"reputation": 421, "user_id": 5940289, "user_type": "registered", "accept_rate": 47, "profile_image": "https://lh3.googleusercontent.com/-GoeuykhJDEY/AAAAAAAAAAI/AAAAAAAAACs/ciAf6fJdCYs/photo.jpg?sz=128", "display_name": "Noel Omondi", "link": "https://stackoverflow.com/users/5940289/noel-omondi"}, "reply_to_user": {"reputation": 1427, "user_id": 1815052, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bed5ab71b8d23d9bf07a5fa12915699c?s=128&d=identicon&r=PG", "display_name": "SqueezyMo", "link": "https://stackoverflow.com/users/1815052/squeezymo"}, "edited": false, "score": 0, "creation_date": 1571827531, "post_id": 58519725, "comment_id": 103367417, "body": "@SqueezyMo unfortunately, that does not work, I get a null pointer with or without lateinit"}, {"owner": {"reputation": 421, "user_id": 5940289, "user_type": "registered", "accept_rate": 47, "profile_image": "https://lh3.googleusercontent.com/-GoeuykhJDEY/AAAAAAAAAAI/AAAAAAAAACs/ciAf6fJdCYs/photo.jpg?sz=128", "display_name": "Noel Omondi", "link": "https://stackoverflow.com/users/5940289/noel-omondi"}, "reply_to_user": {"reputation": 3743, "user_id": 10630900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ece5V.png?s=128&g=1", "display_name": "Minn", "link": "https://stackoverflow.com/users/10630900/minn"}, "edited": false, "score": 0, "creation_date": 1571827594, "post_id": 58519725, "comment_id": 103367456, "body": "@Minn I have not tried using JvmField, could you please expound on how I could use this?"}], "answers": [{"tags": [], "owner": {"reputation": 356, "user_id": 4961714, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/m7DcB.png?s=128&g=1", "display_name": "conversation.16", "link": "https://stackoverflow.com/users/4961714/conversation-16"}, "is_accepted": false, "score": 0, "last_activity_date": 1579608226, "creation_date": 1579608226, "answer_id": 59840745, "question_id": 58519725, "link": "https://stackoverflow.com/questions/58519725/kotlin-returns-null-on-variables-whose-values-are-set-by-annotations/59840745#59840745", "title": "Kotlin returns null on variables whose values are set by annotations", "body": "<p>Have you called the field decorator at any point in your code?</p>\n\n<p><code>PageFactory.initElements(AppiumFieldDecorator(appiumDriver), pageObject)</code></p>\n\n<p>This is what actually populates the annotated fields.</p>\n"}], "owner": {"reputation": 421, "user_id": 5940289, "user_type": "registered", "accept_rate": 47, "profile_image": "https://lh3.googleusercontent.com/-GoeuykhJDEY/AAAAAAAAAAI/AAAAAAAAACs/ciAf6fJdCYs/photo.jpg?sz=128", "display_name": "Noel Omondi", "link": "https://stackoverflow.com/users/5940289/noel-omondi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1579608226, "creation_date": 1571823045, "question_id": 58519725, "link": "https://stackoverflow.com/questions/58519725/kotlin-returns-null-on-variables-whose-values-are-set-by-annotations", "title": "Kotlin returns null on variables whose values are set by annotations", "body": "<p>I am trying to convert the following piece of code from Java to Kotlin:</p>\n\n<pre><code>@AndroidFindBy(id = \"getStarted\")\nMobileElement androidElement;\n</code></pre>\n\n<p>What this code does is instead of instantiating the androidElement I use annotations to assign value to this class and I am able to use that variable without having to manually assign a value to it.</p>\n\n<p>In Kotlin however, I have tried to convert this code to its Kotlin equivalent but no matter what variation I try, the variable is never instantiated. I have tried the following in Kotlin:</p>\n\n<pre><code>@AndroidFindBy(id = \"getStarted\")\ninternal lateinit var androidElement: MobileElement\n\n@AndroidFindBy(id = \"getStarted\")\ninternal var androidElement: MobileElement? = null\n</code></pre>\n\n<p>My question is, how would I be able to convert this Java code to its Kotlin equivalent?</p>\n"}, {"tags": ["mongodb", "kotlin", "spring-data-mongodb"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11765603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5ebe131aed959a97328894dc487ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "kostya05983", "link": "https://stackoverflow.com/users/11765603/kostya05983"}, "is_accepted": false, "score": -1, "last_activity_date": 1571823581, "creation_date": 1571823581, "answer_id": 58519892, "question_id": 58519562, "link": "https://stackoverflow.com/questions/58519562/compound-unique-index-not-working-how-can-i-fix-it/58519892#58519892", "title": "Compound unique index not working, how can I fix it?", "body": "<p>Should use insert with reactiveMongoTemplate and index will work.</p>\n"}], "owner": {"reputation": 1, "user_id": 11765603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5ebe131aed959a97328894dc487ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "kostya05983", "link": "https://stackoverflow.com/users/11765603/kostya05983"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571823581, "creation_date": 1571822530, "question_id": 58519562, "link": "https://stackoverflow.com/questions/58519562/compound-unique-index-not-working-how-can-i-fix-it", "title": "Compound unique index not working, how can I fix it?", "body": "<p>I try to create compount index like this: </p>\n\n<pre><code>@CompoundIndexes(\nvalue = [\n        CompoundIndex(\n            name = \"entity_index\",\n            unique = true,\n            def = \"{'entityId':1, 'type': 1}\"\n        )\n    ]\n)\n\ndata class Subscription(\n    @field:Id\n    val id: String,\n\n    val entityId: String,\n\n    val type: EntityType,\n)\n</code></pre>\n\n<p>but when I save the same model with equal entityId and type with ReactiveMongoTemplate exception isn't throwned</p>\n"}, {"tags": ["android", "kotlin", "kotlin-coroutines"], "answers": [{"comments": [{"owner": {"reputation": 1312, "user_id": 4120518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iIjaE.jpg?s=128&g=1", "display_name": "vizsatiz", "link": "https://stackoverflow.com/users/4120518/vizsatiz"}, "edited": false, "score": 0, "creation_date": 1571824397, "post_id": 58519691, "comment_id": 103365838, "body": "When you did the recylcerView fix, where did you do the await for the async or can I bind the <code>Deffered</code> object to the UI"}, {"owner": {"reputation": 1340, "user_id": 10888893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tqDlu.jpg?s=128&g=1", "display_name": "Mr. Patel", "link": "https://stackoverflow.com/users/10888893/mr-patel"}, "reply_to_user": {"reputation": 1312, "user_id": 4120518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iIjaE.jpg?s=128&g=1", "display_name": "vizsatiz", "link": "https://stackoverflow.com/users/4120518/vizsatiz"}, "edited": false, "score": 0, "creation_date": 1571824807, "post_id": 58519691, "comment_id": 103366046, "body": "Well in my case await was not needed i just used coroutines to set my db operations  in background thread to fix the lag issues however when using sqlite db operations with multiple threads it might cause run time crashes because of reference issues so to solve this go to your db helper class and remove db.close() from the method which you want to use with coroutines!"}, {"owner": {"reputation": 1340, "user_id": 10888893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tqDlu.jpg?s=128&g=1", "display_name": "Mr. Patel", "link": "https://stackoverflow.com/users/10888893/mr-patel"}, "reply_to_user": {"reputation": 1312, "user_id": 4120518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iIjaE.jpg?s=128&g=1", "display_name": "vizsatiz", "link": "https://stackoverflow.com/users/4120518/vizsatiz"}, "edited": false, "score": 0, "creation_date": 1571824989, "post_id": 58519691, "comment_id": 103366142, "body": "If you&#39;ve not fully developed your app i strongly suggest you to use Realm database which is 10x better than sqlite, sqlite is undoubtedly native but in reality it sucks!"}, {"owner": {"reputation": 1312, "user_id": 4120518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iIjaE.jpg?s=128&g=1", "display_name": "vizsatiz", "link": "https://stackoverflow.com/users/4120518/vizsatiz"}, "edited": false, "score": 0, "creation_date": 1571825052, "post_id": 58519691, "comment_id": 103366181, "body": "Thanks !! Will try out realm on my next app !!"}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1571825881, "post_id": 58519691, "comment_id": 103366608, "body": "OP does seem to be using <code>Dispatchers.IO</code>, though. Just extracted to the <code>ioCoroutineContext</code>."}, {"owner": {"reputation": 1340, "user_id": 10888893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tqDlu.jpg?s=128&g=1", "display_name": "Mr. Patel", "link": "https://stackoverflow.com/users/10888893/mr-patel"}, "reply_to_user": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1571827241, "post_id": 58519691, "comment_id": 103367273, "body": "@MarkoTopolnik yes exactly however IO threads are usually intended for disk read/write operations for huge database operations using Default with async is way better! also the crash he was facing is common when working with sqlite from my perspective launch mode is used to do something in UI thread so it might cause a lag, hence a parent scope of main thread with async thread as child would be much better"}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 2, "creation_date": 1571827706, "post_id": 58519691, "comment_id": 103367520, "body": "<code>Dispatchers.Default</code> and <code>Dispatchers.IO</code> are just two thread pools, equal in every way except in the policies on how many threads they are allowed to start. <code>Default</code> is optimized for CPU-bound work and runs up to <code>availableProcessors()</code> threads whereas <code>IO</code> is meant for blocking operations and it&#39;s an elastic thread pool that will start up to 1000 threads by default. So definitely <i>don&#39;t</i> use <code>Default</code> for blocking network ops."}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1571827770, "post_id": 58519691, "comment_id": 103367556, "body": "<code>launch</code> is almost exactly the same as <code>async</code> except that <code>async</code> produces a result and <code>launch</code> just completes."}, {"owner": {"reputation": 1340, "user_id": 10888893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tqDlu.jpg?s=128&g=1", "display_name": "Mr. Patel", "link": "https://stackoverflow.com/users/10888893/mr-patel"}, "reply_to_user": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1571828114, "post_id": 58519691, "comment_id": 103367715, "body": "@MarkoTopolnik Okay thanks for enlightening me! so our best guess is he is facing crash because of multithreading with sqlite as you stated in your answer."}, {"owner": {"reputation": 1312, "user_id": 4120518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iIjaE.jpg?s=128&g=1", "display_name": "vizsatiz", "link": "https://stackoverflow.com/users/4120518/vizsatiz"}, "edited": false, "score": 0, "creation_date": 1571839692, "post_id": 58519691, "comment_id": 103374381, "body": "Seems like it has things to do with the way I handle DB <code>IO</code>. I think its with the race around where my migration might not have finished before the next db access. Some of the <code>SQLiteDiskIOException </code>  and <code>SQLitewhiDiskFullException </code> exceptions are happening in devices with &lt; 1% disk space. (which I think I can ignore) or should i ?? Thanks guys !!"}], "tags": [], "owner": {"reputation": 1340, "user_id": 10888893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tqDlu.jpg?s=128&g=1", "display_name": "Mr. Patel", "link": "https://stackoverflow.com/users/10888893/mr-patel"}, "is_accepted": false, "score": 5, "last_activity_date": 1571830439, "last_edit_date": 1571830439, "creation_date": 1571822943, "answer_id": 58519691, "question_id": 58519410, "link": "https://stackoverflow.com/questions/58519410/is-it-safe-to-do-db-read-write-from-a-launch-block-within-an-oncreate-of-an-ac/58519691#58519691", "title": "Is it safe to do DB read/write from a `launch` block within an onCreate of an activity?", "body": "<p>For database operations i believe using async mode with Default or IO thread is better.</p>\n\n<p>For instance i was working on a application where i was doing db sqlite operations in recyclerview bind view holder with launch mode in Main Thread as coroutines however by doing this my recycler view lagged a lot so instead of using launch i moved on to async in Default Thread for db operations which further resulted into performance improvements.</p>\n\n<p>As Per answer from @MarkoTopolnik i agree with him totally and in your case might be issue is with multi threading when dealing with sqlite you need to be precise on how things are actually executed.</p>\n"}, {"comments": [{"owner": {"reputation": 1312, "user_id": 4120518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iIjaE.jpg?s=128&g=1", "display_name": "vizsatiz", "link": "https://stackoverflow.com/users/4120518/vizsatiz"}, "edited": false, "score": 0, "creation_date": 1571901767, "post_id": 58520695, "comment_id": 103394982, "body": "Would there be an issue if migration is running on one coroutine launch while I try a read/write from another ?"}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "reply_to_user": {"reputation": 1312, "user_id": 4120518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iIjaE.jpg?s=128&g=1", "display_name": "vizsatiz", "link": "https://stackoverflow.com/users/4120518/vizsatiz"}, "edited": false, "score": 0, "creation_date": 1571901883, "post_id": 58520695, "comment_id": 103395033, "body": "That definitely sounds like an issue, migrations are non-transactional updates of the database schema. You should ensure that all migrations happen before any queries on the database."}], "tags": [], "owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "is_accepted": true, "score": 2, "last_activity_date": 1571826146, "creation_date": 1571826146, "answer_id": 58520695, "question_id": 58519410, "link": "https://stackoverflow.com/questions/58519410/is-it-safe-to-do-db-read-write-from-a-launch-block-within-an-oncreate-of-an-ac/58520695#58520695", "title": "Is it safe to do DB read/write from a `launch` block within an onCreate of an activity?", "body": "<p>I think your actual problem is a race between the code you execute inside <code>launch</code> and code you execute on the main thread. It could be that one codepath is doing the initialization of the DB connection and another is using that connection, and the problem is that they are concurrent. It could also be that you're performing some illegal multithreaded access to the DB client.</p>\n\n<p>Accessing the DB from a <code>launch</code>ed block is not an error on its own.</p>\n"}], "owner": {"reputation": 1312, "user_id": 4120518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iIjaE.jpg?s=128&g=1", "display_name": "vizsatiz", "link": "https://stackoverflow.com/users/4120518/vizsatiz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 0, "accepted_answer_id": 58520695, "answer_count": 2, "score": 1, "last_activity_date": 1571830439, "creation_date": 1571822070, "question_id": 58519410, "link": "https://stackoverflow.com/questions/58519410/is-it-safe-to-do-db-read-write-from-a-launch-block-within-an-oncreate-of-an-ac", "title": "Is it safe to do DB read/write from a `launch` block within an onCreate of an activity?", "body": "<p>My android app is crashing in production with different exceptions like <code>IllegalStateException</code>, <code>SQLiteDiskIOException</code>, <code>SQLiteCantOpenDatabaseException</code> etc when I try to access DB from a coroutine <code>launch</code>(created a new <code>CoroutineScope</code> for this like <code>ioCoroutineContext + SupervisorJob()</code>) block. </p>\n\n<p>Is it healthy to do a DB access from such a <code>launch</code> block ? Adding to that, since this is the first access to DB in the app it will run db migrations if any.</p>\n"}, {"tags": ["spring-boot", "kotlin", "spring-webflux", "reactive"], "answers": [{"comments": [{"owner": {"reputation": 3768, "user_id": 632293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ceeb3ac4a50392aa0f6b6b990d9b21f2?s=128&d=identicon&r=PG", "display_name": "jediz", "link": "https://stackoverflow.com/users/632293/jediz"}, "edited": false, "score": 0, "creation_date": 1584539099, "post_id": 58531355, "comment_id": 107467134, "body": "<code>syncBody</code> is now deprecated"}, {"owner": {"reputation": 1812, "user_id": 37309, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fce6b53fac90990b954c536a30b087c9?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/37309/chad"}, "edited": false, "score": 1, "creation_date": 1605287964, "post_id": 58531355, "comment_id": 114613570, "body": "Only in Spring ecosystem would this kind of thing be a runtime error and not a compile time error!"}], "tags": [], "owner": {"reputation": 6419, "user_id": 1840146, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/846e219cba64c80b7b0398b239cd4db9?s=128&d=identicon&r=PG", "display_name": "Toerktumlare", "link": "https://stackoverflow.com/users/1840146/toerktumlare"}, "is_accepted": false, "score": 22, "last_activity_date": 1584540987, "last_edit_date": 1584540987, "creation_date": 1571866907, "answer_id": 58531355, "question_id": 58519036, "link": "https://stackoverflow.com/questions/58519036/spring-webflux-throws-producer-type-is-unknow-when-i-return-value-in-the-respo/58531355#58531355", "title": "Spring WebFlux throws &#39;producer&#39; type is unknow when I return value in the response body", "body": "<p><code>Flux</code> and <code>Mono</code>s are <code>Producers</code>. They produce stuff. You are not passing in a <code>producer</code> in the body thats why you get the error, it doesn't recognize the producer you are passing, because you are passing in a <code>GetStatusViewmodel</code>.</p>\n\n<p>Your body needs to be of type <code>Mono&lt;GetStatusViewmodel&gt;</code>. You can either replace <code>body</code> with <code>bodyValue</code> (it will automatically wrap it for you) or you can wrap your <code>GetStatusViewodel</code> in a <code>Mono</code> using <code>Mono#just</code> before passing it into the <code>body</code> function.</p>\n"}, {"tags": [], "owner": {"reputation": 1289, "user_id": 1392501, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/BC9fk.jpg?s=128&g=1", "display_name": "hasan.alkhatib", "link": "https://stackoverflow.com/users/1392501/hasan-alkhatib"}, "is_accepted": true, "score": 3, "last_activity_date": 1572173359, "creation_date": 1572173359, "answer_id": 58578684, "question_id": 58519036, "link": "https://stackoverflow.com/questions/58519036/spring-webflux-throws-producer-type-is-unknow-when-i-return-value-in-the-respo/58578684#58578684", "title": "Spring WebFlux throws &#39;producer&#39; type is unknow when I return value in the response body", "body": "<p>I actually solved it, and I will post it here just in case somebody would do the same mistake I did :( It was a typical mistake for those who work with Java, <strong>it was a wrong import</strong>.</p>\n\n<p>I was using <code>fromObject()</code> method in my application <em>\"I updated the question to match my actual code\"</em>. You can find this function in both of these imports, and I was using one of the overloaded <code>body()</code> functions to pass this wrong placed function:</p>\n\n<pre><code>//this is the wrong import I was using\nimport org.springframework.web.reactive.function.server.EntityResponse.fromObject\n//this is the correct one for building the mono body\nimport org.springframework.web.reactive.function.BodyInserters.fromObject\n</code></pre>\n\n<p>By using the method from <code>BodyInserters</code>, you will be able to pass <code>fromObject(T)</code> to the body method and it will return the mono result.</p>\n"}, {"comments": [{"owner": {"reputation": 140, "user_id": 4965753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RmLu8.jpg?s=128&g=1", "display_name": "Vald&#232;se Kamdem", "link": "https://stackoverflow.com/users/4965753/vald%c3%a8se-kamdem"}, "edited": false, "score": 3, "creation_date": 1596423250, "post_id": 61379713, "comment_id": 111797530, "body": "Based on your example, You can also use <code>bodyValue</code> instead of <code>body</code> it helps you avoid wrapping the object into a <b>Mono</b>. The concerning line will look like <code>bodyValue(postRequestObj)</code>"}, {"owner": {"reputation": 352, "user_id": 7225691, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/oT3ho.jpg?s=128&g=1", "display_name": "mazend", "link": "https://stackoverflow.com/users/7225691/mazend"}, "reply_to_user": {"reputation": 140, "user_id": 4965753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RmLu8.jpg?s=128&g=1", "display_name": "Vald&#232;se Kamdem", "link": "https://stackoverflow.com/users/4965753/vald%c3%a8se-kamdem"}, "edited": false, "score": 0, "creation_date": 1618751957, "post_id": 61379713, "comment_id": 118691610, "body": "@Vald&#232;seKamdem the &#39;bodyValue&#39; function worked for me."}], "tags": [], "owner": {"reputation": 939, "user_id": 4832515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d44fed856b04025679e0a7a5c0eac31d?s=128&d=identicon&r=PG&f=1", "display_name": "SomeGuy", "link": "https://stackoverflow.com/users/4832515/someguy"}, "is_accepted": false, "score": 13, "last_activity_date": 1587620987, "last_edit_date": 1587620987, "creation_date": 1587618419, "answer_id": 61379713, "question_id": 58519036, "link": "https://stackoverflow.com/questions/58519036/spring-webflux-throws-producer-type-is-unknow-when-i-return-value-in-the-respo/61379713#61379713", "title": "Spring WebFlux throws &#39;producer&#39; type is unknow when I return value in the response body", "body": "<p>For me, I was doing something like this: </p>\n\n<pre><code>webClient.post()\n    .uri(\"/some/endpoint\")\n    .body(postRequestObj, PostRequest.class) // erroneous line \n    .accept(MediaType.APPLICATION_JSON)\n    .retrieve()\n    .bodyToMono(PostResponse.class)\n    .timeout(Duration.ofMillis(5000))\n\n</code></pre>\n\n<p>When looking at the springs docs for that function <code>body()</code>, this is what's explained:</p>\n\n<pre><code>Variant of body(Publisher, Class) that allows using any producer that can be resolved to Publisher via ReactiveAdapterRegistry.\n\nParameters:\n     producer - the producer to write to the request\n     elementClass - the type of elements produced\n\nReturns:\n    this builder\n</code></pre>\n\n<p>So the first parameter can't just be <em>any</em> object, it <em>has</em> to be a producer. Changing my above code to wrap my object around in a Mono fixed this issue for me. </p>\n\n<pre><code>webClient.post()\n    .uri(\"/some/endpoint\")\n    .body(Mono.just(postRequestObj), PostRequest.class)\n    .accept(MediaType.APPLICATION_JSON)\n    .retrieve()\n    .bodyToMono(PostResponse.class)\n    .timeout(Duration.ofMillis(5000))\n\n</code></pre>\n\n<p>reference: <a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/reactive/function/client/WebClient.RequestBodySpec.html\" rel=\"noreferrer\">https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/reactive/function/client/WebClient.RequestBodySpec.html</a></p>\n"}], "owner": {"reputation": 1289, "user_id": 1392501, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/BC9fk.jpg?s=128&g=1", "display_name": "hasan.alkhatib", "link": "https://stackoverflow.com/users/1392501/hasan-alkhatib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9514, "favorite_count": 2, "accepted_answer_id": 58578684, "answer_count": 3, "score": 13, "last_activity_date": 1587620987, "creation_date": 1571820847, "last_edit_date": 1572184407, "question_id": 58519036, "link": "https://stackoverflow.com/questions/58519036/spring-webflux-throws-producer-type-is-unknow-when-i-return-value-in-the-respo", "title": "Spring WebFlux throws &#39;producer&#39; type is unknow when I return value in the response body", "body": "<p>I'm using Spring Boot with Kotlin, and now trying to get status value from a GET restful service by passing a handler for a reactive service.</p>\n\n<p>I can see that the handler I'm passing is in the request, but whenever I'm building the body, I get this exception:</p>\n\n<pre><code>java.lang.IllegalArgumentException: 'producer' type is unknown to ReactiveAdapterRegistry\n    at org.springframework.util.Assert.notNull(Assert.java:198) ~[spring-core-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException\n</code></pre>\n\n<p><strong>Here is my code</strong>:</p>\n\n<pre><code>@Bean\n    fun getReceiptConversionStatus() = router {\n        accept(MediaType.APPLICATION_JSON).nest {\n            GET(\"/BsGetStatus/{handler}\", ::handleGetStatusRequest)\n        }\n    }\n    private fun handleGetStatusRequest(serverRequest: ServerRequest): Mono&lt;ServerResponse&gt; = ServerResponse\n            .ok()\n            .contentType(MediaType.APPLICATION_JSON)\n            .body(GetStatusViewmodel(fromObject(serverRequest.pathVariable(\"handler\"))), GetStatusViewmodel::class.java)\n            .switchIfEmpty(ServerResponse.notFound().build())\n</code></pre>\n\n<p>and that's my Viewmodel:</p>\n\n<pre><code>data class GetStatusViewmodel(\n        @JsonProperty(\"handler\") val documentHandler: String\n)\n</code></pre>\n"}, {"tags": ["spring", "spring-boot", "spring-mvc", "kotlin", "thymeleaf"], "comments": [{"owner": {"reputation": 5370, "user_id": 592355, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2nAdA.jpg?s=128&g=1", "display_name": "xerx593", "link": "https://stackoverflow.com/users/592355/xerx593"}, "edited": false, "score": 0, "creation_date": 1571826469, "post_id": 58518830, "comment_id": 103366874, "body": "<a href=\"https://www.reddit.com/r/Kotlin/comments/8lmbtq/jpa_generatedvalue_in_kotlin/\" rel=\"nofollow noreferrer\">reddit.com/r/Kotlin/comments/8lmbtq/&hellip;</a> ... : 1. move <code>id</code> from constructor to body (with default value <code>0</code>). 2. don&#39;t provide <code>id</code> (at all) nor to constructor nor to save method."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8761764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14510d9bbba67ca335db3cb64193b2ef?s=128&d=identicon&r=PG&f=1", "display_name": "E. Ekpo", "link": "https://stackoverflow.com/users/8761764/e-ekpo"}, "edited": false, "score": 0, "creation_date": 1571842919, "post_id": 58519787, "comment_id": 103376269, "body": "When a jpa entityis created the generation type auto usually delegates it to sequence generation. I&#39;ve set it butmy template page doesn&#39;t even load. It throws an exception right away"}], "tags": [], "owner": {"reputation": 348, "user_id": 10232467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c22b2ed3a5522ebc4791ac6dcb47f2e7?s=128&d=identicon&r=PG&f=1", "display_name": "Defaulter", "link": "https://stackoverflow.com/users/10232467/defaulter"}, "is_accepted": false, "score": 0, "last_activity_date": 1571823221, "creation_date": 1571823221, "answer_id": 58519787, "question_id": 58518830, "link": "https://stackoverflow.com/questions/58518830/how-to-populate-model-with-primary-key-when-persisting-through-a-controller/58519787#58519787", "title": "How to populate model with primary key when persisting through a controller", "body": "<p>Though your question is about data not getting transferred between template and JPA but exception clearly say the problem with JPA only. You are never required to pass ID while saving a new entity object in database. I suspect your id column in database table is not defined with auto generation strategy. Can you try modifying it and rerunning your code. </p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8761764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14510d9bbba67ca335db3cb64193b2ef?s=128&d=identicon&r=PG&f=1", "display_name": "E. Ekpo", "link": "https://stackoverflow.com/users/8761764/e-ekpo"}, "is_accepted": false, "score": 0, "last_activity_date": 1572138212, "creation_date": 1572138212, "answer_id": 58575892, "question_id": 58518830, "link": "https://stackoverflow.com/questions/58518830/how-to-populate-model-with-primary-key-when-persisting-through-a-controller/58575892#58575892", "title": "How to populate model with primary key when persisting through a controller", "body": "<p>I've figured it out! I used the regular old html name tag and thymeleaf parsed and read it. </p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;div class=\"col\"&gt;\n    &lt;input type=\"text\" name=\"lastName\" class=\"form-control\" placeholder=\"Last name\"&gt;\n&lt;/div&gt;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8761764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14510d9bbba67ca335db3cb64193b2ef?s=128&d=identicon&r=PG&f=1", "display_name": "E. Ekpo", "link": "https://stackoverflow.com/users/8761764/e-ekpo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1572138212, "creation_date": 1571820096, "question_id": 58518830, "link": "https://stackoverflow.com/questions/58518830/how-to-populate-model-with-primary-key-when-persisting-through-a-controller", "title": "How to populate model with primary key when persisting through a controller", "body": "<p>I'm quite new to spring and Thymeleaf integration so bear with me:</p>\n\n<p>I'm having trouble getting the data from my Thymeleaf template using a JPA model. I've tried using both sequential and identity generation strategies but It doesn't even let me load the page</p>\n\n<p>I've tried creating a completely new variable as seen before but that's clearly not the problem. I know the problem might come from the Thymeleaf references from the html but I'm quite confused; is there a way to auto generate an ID? It doesn't even let me add a value in the form as an ID</p>\n\n<pre><code>class Admin(@Id @GeneratedValue(strategy = GenerationType.IDENTITY) var id: Long, var firstName: String, var lastName: String, var login: String, var password: String) {\n</code></pre>\n\n<pre><code>    @PostMapping(\"/addstuff\")\n    fun addAdmin(@ModelAttribute(name = \"admin\") admin: Admin, result: BindingResult, model: Model): String {\n        val newAdmin: Admin = Admin(admin.id, admin.firstName, admin.lastName, admin.firstName[0].plus(admin.lastName), encoder.encode(\"password\"))\n        adminRepository.save(newAdmin)\n        return \"adminadd\"\n    }\n\n</code></pre>\n\n<pre class=\"lang-html prettyprint-override\"><code>form action=\"#\" data-th-action=\"@{/addstuff}\" th:object=\"${admin}\" method=\"post\"&gt;\n    &lt;div class=\"row justify-content-center\" id=\"mainBody\"&gt;\n        &lt;div class=\"col-8\"&gt;\n            &lt;div id=\"student0\"&gt;\n                &lt;div class=\"row\"&gt;\n                    &lt;div class=\"col\"&gt;\n                        Administrator Information\n                    &lt;/div&gt;\n                &lt;/div&gt;\n                &lt;div class=\"row\"&gt;\n                    &lt;div class=\"col\"&gt;\n                        &lt;input th:field=\"*{firstName}\" type=\"text\" class=\"form-control\" placeholder=\"First name\"&gt;\n                    &lt;/div&gt;\n                    &lt;div class=\"col\"&gt;\n                        &lt;input th:field=\"*{lastName}\" type=\"text\" class=\"form-control\" placeholder=\"Last name\"&gt;\n                    &lt;/div&gt;\n                    &lt;div class=\"col\"&gt;\n                        &lt;input type=\"number\" class=\"form-control\" placeholder=\"Administrator ID number\"&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n                &lt;div class=\"row\"&gt;\n                    &lt;div class=\"col\"&gt;\n                        &lt;label&gt;Role\n                            &lt;div class=\"form-check\"&gt;\n                                &lt;input class=\"form-check-input\" type=\"radio\" name=\"exampleRadios\" id=\"adminRadio\"\n                                       value=\"option1\" checked&gt;\n                                &lt;label class=\"form-check-label\" for=\"adminRadio\"&gt;\n                                    Administrator\n                                &lt;/label&gt;\n                            &lt;/div&gt;\n                            &lt;div class=\"form-check\"&gt;\n                                &lt;input class=\"form-check-input\" type=\"radio\" name=\"exampleRadios\" id=\"profRadio\"\n                                       value=\"option2\"&gt;\n                                &lt;label class=\"form-check-label\" for=\"profRadio\"&gt;\n                                    Professor\n                                &lt;/label&gt;\n                            &lt;/div&gt;\n                        &lt;/label&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n                &lt;hr&gt;\n            &lt;/div&gt;\n            &lt;input id=\"submitAdmin\" type=\"submit\" value=\"Add Administrator\"&gt;\n            &lt;!--            &lt;button id=\"submitAdmin\"&gt;Add Administrator&lt;/button&gt;--&gt;\n\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>The result I expect should be the persisting of the data into my local db but the error i get is this:</p>\n\n<pre><code>'admin' on field 'id': rejected value [null]; codes [typeMismatch.admin.id,typeMismatch.id,typeMismatch.long,typeMismatch]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [admin.id,id]; arguments []; default message [id]]; default message [Failed to convert value of type 'null' to required type 'long'; nested exception is org.springframework.core.convert.ConversionFailedException: Failed to convert from type [null] to type [@javax.persistence.Id @javax.persistence.GeneratedValue long] for value 'null'; nested exception is java.lang.IllegalArgumentException: A null value cannot be assigned to a primitive type]]\n</code></pre>\n\n<p>I know it has to do with the id value but I'm stuck as to how I generate a value for it. I'm using the h2 embedded database if anyone is interested. Thanks in advance</p>\n"}, {"tags": ["kotlin", "concurrency", "kotlin-coroutines", "happens-before"], "comments": [{"owner": {"reputation": 25736, "user_id": 6395627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dac5493d339ba8cb379f4efb2485d65?s=128&d=identicon&r=PG&f=1", "display_name": "Slaw", "link": "https://stackoverflow.com/users/6395627/slaw"}, "edited": false, "score": 0, "creation_date": 1571823299, "post_id": 58518783, "comment_id": 103365225, "body": "Note that when running on the JVM Kotlin uses the same memory model as Java."}, {"owner": {"reputation": 14536, "user_id": 2463035, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wWsJR.jpg?s=128&g=1", "display_name": "Vasiliy", "link": "https://stackoverflow.com/users/2463035/vasiliy"}, "reply_to_user": {"reputation": 25736, "user_id": 6395627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dac5493d339ba8cb379f4efb2485d65?s=128&d=identicon&r=PG&f=1", "display_name": "Slaw", "link": "https://stackoverflow.com/users/6395627/slaw"}, "edited": false, "score": 1, "creation_date": 1571823686, "post_id": 58518783, "comment_id": 103365465, "body": "@Slaw , I know that. However, there is a lot of magic going on under the hood. Therefore, I&#39;d like to understand whether there are any happens-before guarantees that I get from coroutines, or it&#39;s all on me."}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1571828990, "post_id": 58518783, "comment_id": 103368175, "body": "If anything, your second example presents an even simpler scenario: it just uses an object created within <code>withContext</code>, whereas the 1st example creates it first, mutates within <code>withContext</code>, and then reads after <code>withContext</code>. So the 1st example exercises more thread safety features."}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1571829114, "post_id": 58518783, "comment_id": 103368237, "body": "...and both examples exercise just the &quot;program order&quot; aspect of happens-before, the most trivial one. I&#39;m speaking on the level of coroutines here, not the underlying JVM. So basically, you&#39;re asking whether or not Kotlin coroutines are so severely broken that they don&#39;t even provide program order happens-before."}, {"owner": {"reputation": 14536, "user_id": 2463035, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wWsJR.jpg?s=128&g=1", "display_name": "Vasiliy", "link": "https://stackoverflow.com/users/2463035/vasiliy"}, "reply_to_user": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 1, "creation_date": 1571831424, "post_id": 58518783, "comment_id": 103369500, "body": "@MarkoTopolnik, correct me if I&#39;m wrong, but JLS only guarantees &quot;program order happens-before&quot; for execution on the same thread. Now, with coroutines, even though the code looks sequential, in practice there is some machinery that offloads it to different threads.  I understand your point &quot;this is such a basic guarantee that I wouldn&#39;t even waste my time checking it&quot; (from another comment), but I asked this question to get a rigorous answer. I&#39;m pretty sure that the examples I wrote are thread safe, but I want to understand why."}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1571832155, "post_id": 58518783, "comment_id": 103369930, "body": "You have to think on the level of coroutines. On that level, you wrote sequential code involving a single coroutine (<code>withContext</code> just continues executing the same coroutine in a different context). So you&#39;re exercising nothing more than program-order consistency. Now, there are two concerns: 1. Do Kotlin coroutines guarantee program-order consistency? 2. Does the actual implementation uphold that guarantee? I&#39;m not sure which of these two concerns you are suspicious about."}], "answers": [{"comments": [{"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1571856957, "post_id": 58519259, "comment_id": 103382706, "body": "The rule is this, actually: the code prior to a suspend function call <i>happens-before</i> the code inside the suspend function, <i>happens-before</i> the code after the suspend call. This, in turn, can be generalized to &quot;the code&#39;s program order is also the code&#39;s <i>happens-before</i> order&quot;. Note the absence of anything specific to suspendable functions in that statement."}, {"owner": {"reputation": 1920, "user_id": 4261472, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Rhz3p.jpg?s=128&g=1", "display_name": "Sergei Voitovich", "link": "https://stackoverflow.com/users/4261472/sergei-voitovich"}, "reply_to_user": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1593702432, "post_id": 58519259, "comment_id": 110878336, "body": "@Marko Tololnik I don&#39;t think this is the case, have a look at <a href=\"https://youtrack.jetbrains.com/issue/KT-15514\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-15514</a>"}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1593783825, "post_id": 58519259, "comment_id": 110908127, "body": "I had a look, but I didn&#39;t get your point. It doesn&#39;t discuss the ordering of suspendable function calls."}], "tags": [], "owner": {"reputation": 1920, "user_id": 4261472, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Rhz3p.jpg?s=128&g=1", "display_name": "Sergei Voitovich", "link": "https://stackoverflow.com/users/4261472/sergei-voitovich"}, "is_accepted": false, "score": 4, "last_activity_date": 1593702536, "last_edit_date": 1593702536, "creation_date": 1571821621, "answer_id": 58519259, "question_id": 58518783, "link": "https://stackoverflow.com/questions/58518783/kotlin-coroutines-happens-before-guarantees/58519259#58519259", "title": "Kotlin coroutines &quot;happens-before&quot; guarantees?", "body": "<p>Coroutines in Kotlin do provide happens before guarantees.</p>\n<p>The rule is: inside a coroutine, the code <strong>prior</strong> to a suspend function call <strong>happens before</strong> the code <strong>after</strong> the suspend call.</p>\n<p>You should think about coroutines as if they were regular threads:</p>\n<blockquote>\n<p>Even though a coroutine in Kotlin can execute on multiple threads it is just like a thread from a standpoint of mutable state. No two actions in the same coroutine can be concurrent.</p>\n</blockquote>\n<p>Source: <a href=\"https://proandroiddev.com/what-is-concurrent-access-to-mutable-state-f386e5cb8292\" rel=\"nofollow noreferrer\">https://proandroiddev.com/what-is-concurrent-access-to-mutable-state-f386e5cb8292</a></p>\n<p>Getting back to the code example. Capturing vars in lambda function bodies is not ideal, especially when lambda is a coroutine. In fact,</p>\n<blockquote>\n<p>Capturing mutable variables (var) into the scope of such block is almost always an error</p>\n</blockquote>\n<p>(a statement from KT-15514)</p>\n<p>The code prior to a lambda does not happen before the code inside.</p>\n<p>See <a href=\"https://youtrack.jetbrains.com/issue/KT-15514\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/issue/KT-15514</a></p>\n"}, {"comments": [{"owner": {"reputation": 14536, "user_id": 2463035, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wWsJR.jpg?s=128&g=1", "display_name": "Vasiliy", "link": "https://stackoverflow.com/users/2463035/vasiliy"}, "edited": false, "score": 1, "creation_date": 1571826973, "post_id": 58520801, "comment_id": 103367116, "body": "Thanks. It&#39;s actually the part after &quot;rest assured&quot; that motivated me to ask this question. Are there any links to docs that I could read? Alternatively, links to source code where this happens-before edge is established would also be of great help (join, synchronization, or any other method)."}, {"owner": {"reputation": 25736, "user_id": 6395627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dac5493d339ba8cb379f4efb2485d65?s=128&d=identicon&r=PG&f=1", "display_name": "Slaw", "link": "https://stackoverflow.com/users/6395627/slaw"}, "reply_to_user": {"reputation": 14536, "user_id": 2463035, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wWsJR.jpg?s=128&g=1", "display_name": "Vasiliy", "link": "https://stackoverflow.com/users/2463035/vasiliy"}, "edited": false, "score": 0, "creation_date": 1571827110, "post_id": 58520801, "comment_id": 103367213, "body": "@Vasiliy The <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/with-context.html\" rel=\"nofollow noreferrer\">documentation of <code>withContext</code></a> says it will &quot;<i>suspend until it completes</i>&quot;. That implies a <i>happens-before</i> relationship."}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 1, "creation_date": 1571827301, "post_id": 58520801, "comment_id": 103367297, "body": "This is such a basic guarantee that I wouldn&#39;t even waste my time checking it. Under the hood it boils down to <code>executorService.submit()</code> and there is some typical mechanism of awaiting on the completion of the task (completing a <code>CompletableFuture</code> or something similar). From Kotlin coroutines&#39; point of view there is no concurrency at all here."}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 1, "creation_date": 1571827908, "post_id": 58520801, "comment_id": 103367629, "body": "You can think of your question as analogous to asking &quot;does the OS guarantee a happens-before when suspending a thread and then resuming it on another core?&quot; Threads are to coroutines what CPU cores are to threads."}, {"owner": {"reputation": 14536, "user_id": 2463035, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wWsJR.jpg?s=128&g=1", "display_name": "Vasiliy", "link": "https://stackoverflow.com/users/2463035/vasiliy"}, "edited": false, "score": 1, "creation_date": 1571831735, "post_id": 58520801, "comment_id": 103369715, "body": "Thanks for your explanation. However, I asked this question to understand why it works. I see your point, but, so far, it&#39;s not the rigorous answer I&#39;m looking for."}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 1, "creation_date": 1571835358, "post_id": 58520801, "comment_id": 103371719, "body": "I think you&#39;re actually looking for something else than formal rigor because we have already established that your code is sequential and that Kotlin coroutines do, beyond any doubt, provide a happens-before guarantee to actions ordered by program order. Maybe you&#39;re looking for a conclusive proof that the implementation is not broken, but that&#39;s a pretty tall order, and something you&#39;ll have to keep re-evaluating with each new version of Kotlin."}, {"owner": {"reputation": 6313, "user_id": 945226, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ek7RV.png?s=128&g=1", "display_name": "G. Blake Meike", "link": "https://stackoverflow.com/users/945226/g-blake-meike"}, "edited": false, "score": 2, "creation_date": 1571839177, "post_id": 58520801, "comment_id": 103374057, "body": "Well... I actually don&#39;t think this thread has established that the code is sequential.  It has asserted it, surely.  I, too, would be interested in seeing the mechanism that guarantees that the example behaves as expected, without affecting performance."}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "reply_to_user": {"reputation": 6313, "user_id": 945226, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ek7RV.png?s=128&g=1", "display_name": "G. Blake Meike", "link": "https://stackoverflow.com/users/945226/g-blake-meike"}, "edited": false, "score": 0, "creation_date": 1571841721, "post_id": 58520801, "comment_id": 103375608, "body": "@G.BlakeMeike What do you think is missing? A link to the documentation on the semantics of <code>withContext</code>? Your second concern, the mechanism, is an implementation detail that has no bearing on the semantics. The mechanism is specific to each dispatcher, anyway."}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "reply_to_user": {"reputation": 6313, "user_id": 945226, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ek7RV.png?s=128&g=1", "display_name": "G. Blake Meike", "link": "https://stackoverflow.com/users/945226/g-blake-meike"}, "edited": false, "score": 0, "creation_date": 1571842141, "post_id": 58520801, "comment_id": 103375822, "body": "@G.BlakeMeike <code>without affecting performance</code> -- <i>of course</i> handing off to another thread and back affects performance, compared to just executing all the code without interruptions. Nobody disputes that."}], "tags": [], "owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "is_accepted": false, "score": 7, "last_activity_date": 1571853477, "last_edit_date": 1571853477, "creation_date": 1571826503, "answer_id": 58520801, "question_id": 58518783, "link": "https://stackoverflow.com/questions/58518783/kotlin-coroutines-happens-before-guarantees/58520801#58520801", "title": "Kotlin coroutines &quot;happens-before&quot; guarantees?", "body": "<p>The code you wrote has three accesses to shared state:</p>\n\n<pre><code>var mutableVar = 0                        // access 1, init\nwithContext(Dispatchers.IO) {\n    mutableVar = 1                        // access 2, write\n}\nSystem.out.println(\"value: $mutableVar\")  // access 3, read\n</code></pre>\n\n<p>The three accesses are strictly sequentially ordered, with no concurrency between them, and you can rest assured that Kotlin's infrastructure takes care of establishing a <em>happens-before</em> edge when handing off to the <code>IO</code> thread pool and back to your calling coroutine.</p>\n\n<p>Here's an equivalent example that may perhaps look more convincing:</p>\n\n<pre><code>launch(Dispatchers.Default) {\n    var mutableVar = 0             // 1\n    delay(1)\n    mutableVar = 1                 // 2\n    delay(1)\n    println(\"value: $mutableVar\")  // 3\n}\n</code></pre>\n\n<p>Since <code>delay</code> is a suspendable function, and since we're using the <code>Default</code> dispatcher that is backed by a thread pool, lines 1, 2 and 3 may each execute on a different thread. Therefore your question about <em>happen-before</em> guarantees applies equally to this example. On the other hand, in this case it is (I would hope) completely obvious that the behavior of this code is consistent with the principles of sequential execution.</p>\n"}], "owner": {"reputation": 14536, "user_id": 2463035, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wWsJR.jpg?s=128&g=1", "display_name": "Vasiliy", "link": "https://stackoverflow.com/users/2463035/vasiliy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 559, "favorite_count": 1, "answer_count": 2, "score": 12, "last_activity_date": 1593702536, "creation_date": 1571819891, "last_edit_date": 1571826660, "question_id": 58518783, "link": "https://stackoverflow.com/questions/58518783/kotlin-coroutines-happens-before-guarantees", "title": "Kotlin coroutines &quot;happens-before&quot; guarantees?", "body": "<p>Do Kotlin coroutines provide any \"happens-before\" guarantees?</p>\n\n<p>For example, is there \"happens-before\" guarantee between write to <code>mutableVar</code> and subsequent read on (potentially) other thread in this case:</p>\n\n<pre><code>suspend fun doSomething() {\n    var mutableVar = 0\n    withContext(Dispatchers.IO) {\n        mutableVar = 1\n    }\n    System.out.println(\"value: $mutableVar\")\n}\n</code></pre>\n\n<p>Edit:</p>\n\n<p>Maybe additional example will clarify the question better becuase it's more Kotlin-ish (except for mutability). Is this code thread-safe:</p>\n\n<pre><code>suspend fun doSomething() {\n    var data = withContext(Dispatchers.IO) {\n        Data(1)\n    }\n    System.out.println(\"value: ${data.data}\")\n}\n\nprivate data class Data(var data: Int)\n</code></pre>\n"}, {"tags": ["generics", "kotlin"], "comments": [{"owner": {"reputation": 25736, "user_id": 6395627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dac5493d339ba8cb379f4efb2485d65?s=128&d=identicon&r=PG&f=1", "display_name": "Slaw", "link": "https://stackoverflow.com/users/6395627/slaw"}, "edited": false, "score": 2, "creation_date": 1571817771, "post_id": 58517970, "comment_id": 103362395, "body": "You can have <code>ImageQueryResolver#getNewImages</code> return <code>Images&lt;out Image&gt;</code>."}, {"owner": {"reputation": 8135, "user_id": 2391849, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/04df260673cc820547a3083e4ee87fce?s=128&d=identicon&r=PG", "display_name": "Mulgard", "link": "https://stackoverflow.com/users/2391849/mulgard"}, "reply_to_user": {"reputation": 25736, "user_id": 6395627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dac5493d339ba8cb379f4efb2485d65?s=128&d=identicon&r=PG&f=1", "display_name": "Slaw", "link": "https://stackoverflow.com/users/6395627/slaw"}, "edited": false, "score": 0, "creation_date": 1571817978, "post_id": 58517970, "comment_id": 103362490, "body": "This works. Thank you! I will read why it works though ^^"}, {"owner": {"reputation": 25736, "user_id": 6395627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dac5493d339ba8cb379f4efb2485d65?s=128&d=identicon&r=PG&f=1", "display_name": "Slaw", "link": "https://stackoverflow.com/users/6395627/slaw"}, "edited": false, "score": 0, "creation_date": 1571818155, "post_id": 58517970, "comment_id": 103362567, "body": "This reference may help: <a href=\"https://kotlinlang.org/docs/reference/generics.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/generics.html</a>. If you&#39;re familiar with Java it&#39;s similar to using <code>Images&lt;? extends Image&gt;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 8135, "user_id": 2391849, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/04df260673cc820547a3083e4ee87fce?s=128&d=identicon&r=PG", "display_name": "Mulgard", "link": "https://stackoverflow.com/users/2391849/mulgard"}, "edited": false, "score": 2, "creation_date": 1571817960, "post_id": 58518240, "comment_id": 103362483, "body": "Hi. Thx for your reply. That does not work. It leads to a type missmatch between <code>Images&lt;T&gt;</code> and <code>Images&lt;NumberImage&gt;</code>. However, putting in <code>Images&lt;out T&gt;</code> as return type for that function works."}], "tags": [], "owner": {"reputation": 1208, "user_id": 5521670, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-25AGpL5h4WA/AAAAAAAAAAI/AAAAAAAAAMo/IEAeMQ43ydI/photo.jpg?sz=128", "display_name": "\u0160imon Koc&#250;rek", "link": "https://stackoverflow.com/users/5521670/%c5%a0imon-koc%c3%barek"}, "is_accepted": false, "score": -1, "last_activity_date": 1571817840, "creation_date": 1571817840, "answer_id": 58518240, "question_id": 58517970, "link": "https://stackoverflow.com/questions/58517970/kotlin-function-that-returns-a-generic-type-what-if-i-do-not-know-which-concre/58518240#58518240", "title": "Kotlin: Function that returns a generic type. What If I do not know which concrete type should get returned?", "body": "<p>Try this:</p>\n\n<pre><code>fun &lt;T : Image&gt; getNewImages(input: ImageInput, offset: Int, limit: Int = Int.MAX_VALUE): Images&lt;T&gt; {\n  return when (input.imageType) {\n    ImageEnum.NUMBER -&gt;\n      numberImageService.getNewImages(offset, limit)\n    ImageEnum.LETTER -&gt;\n      letterImageService.getNewImages(offset, limit)\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2796, "user_id": 7508302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bHYHM.jpg?s=128&g=1", "display_name": "Cililing", "link": "https://stackoverflow.com/users/7508302/cililing"}, "is_accepted": false, "score": 2, "last_activity_date": 1571818547, "creation_date": 1571818547, "answer_id": 58518416, "question_id": 58517970, "link": "https://stackoverflow.com/questions/58517970/kotlin-function-that-returns-a-generic-type-what-if-i-do-not-know-which-concre/58518416#58518416", "title": "Kotlin: Function that returns a generic type. What If I do not know which concrete type should get returned?", "body": "<p>You need to specify that argument, because Images is generic. So, I would suggest one of two:</p>\n\n<p>1) <code>Images&lt;out Image&gt;</code> -> return type is a subtype of Image</p>\n\n<p>2) <code>Images&lt;*&gt;</code> -> I dont care what generic type is there</p>\n\n<p>I think first solution is better (we bounded that value, so we know more what's going all) ;) </p>\n"}, {"tags": [], "owner": {"reputation": 25736, "user_id": 6395627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dac5493d339ba8cb379f4efb2485d65?s=128&d=identicon&r=PG&f=1", "display_name": "Slaw", "link": "https://stackoverflow.com/users/6395627/slaw"}, "is_accepted": true, "score": 2, "last_activity_date": 1571819373, "creation_date": 1571819373, "answer_id": 58518654, "question_id": 58517970, "link": "https://stackoverflow.com/questions/58517970/kotlin-function-that-returns-a-generic-type-what-if-i-do-not-know-which-concre/58518654#58518654", "title": "Kotlin: Function that returns a generic type. What If I do not know which concrete type should get returned?", "body": "<p>As I mentioned in a comment, you can use <code>Images&lt;out Image&gt;</code> as the return type. This is basically saying the implementation may use <code>Image</code> or a subtype of <code>Image</code>. If you're familiar with Java then it's similar to using <code>Images&lt;? extends Image&gt;</code>.</p>\n\n<p>Since your <code>Images</code> interface only ever produces objects of type <code>T</code> another option is to use <em>declaration-site variance</em> instead of <em>use-site variance</em>. In other words, you could have:</p>\n\n<pre><code>interface Images&lt;out T : Image&gt; {\n    // methods...\n}\n</code></pre>\n\n<p>Which will let you use <code>Images&lt;Image&gt;</code> as the return type:</p>\n\n<pre><code>fun getNewImages(input: ImageInput, offset: Int, limit: Int = Int.MAX_VALUE): Images&lt;Image&gt; {\n    return when (input.imageType) {\n        ImageEnum.NUMBER -&gt;\n            numberImageService.getNewImages(offset, limit)\n        ImageEnum.LETTER -&gt;\n            letterImageService.getNewImages(offset, limit)\n    }\n}\n</code></pre>\n\n<hr>\n\n<p>Here's the reference on generics in Kotlin: <a href=\"https://kotlinlang.org/docs/reference/generics.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/generics.html</a></p>\n"}], "owner": {"reputation": 8135, "user_id": 2391849, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/04df260673cc820547a3083e4ee87fce?s=128&d=identicon&r=PG", "display_name": "Mulgard", "link": "https://stackoverflow.com/users/2391849/mulgard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 58518654, "answer_count": 3, "score": 1, "last_activity_date": 1571886785, "creation_date": 1571816821, "last_edit_date": 1571886785, "question_id": 58517970, "link": "https://stackoverflow.com/questions/58517970/kotlin-function-that-returns-a-generic-type-what-if-i-do-not-know-which-concre", "title": "Kotlin: Function that returns a generic type. What If I do not know which concrete type should get returned?", "body": "<p>I have the following type:</p>\n\n<pre><code>class Images&lt;T : Image&gt;(\n    val images: List&lt;T&gt;,\n    val totalCount: Int\n)\n</code></pre>\n\n<p>So the list here can only contain objects which are inheriting from <code>Image</code>.</p>\n\n<p>Now I have an interface:</p>\n\n<pre><code>interface ImageService&lt;T : Image&gt; {\n    fun getNewImages(offset: Int, limit: Int): Images&lt;T&gt;\n\n    fun getNextImage(): Image\n}\n</code></pre>\n\n<p>And a concrete implementation:</p>\n\n<pre><code>class NumberImageService : ImageService&lt;NumberImage&gt; {\n    override fun getNewImages(offset: Int, limit: Int): Images&lt;NumberImage&gt; {\n        // return something\n    }\n\n    override fun getNextImage(): NumberImage {\n        // return something\n    }\n}\n</code></pre>\n\n<p>So far, so good. Now I have another class where I decide which concrete implementation to use based on an enum input:</p>\n\n<pre><code>class ImageQueryResolver : GraphQLQueryResolver {\n    fun getNewImages(input: ImageInput, offset: Int, limit: Int = Int.MAX_VALUE): Images {\n        return when (input.imageType) {\n            ImageEnum.NUMBER -&gt;\n                numberImageService.getNewImages(offset, limit)\n            ImageEnum.LETTER -&gt;\n                letterImageService.getNewImages(offset, limit)\n        }\n    }\n\n    fun getNextImage(input: ImageInput): Image {\n        // return something\n    }\n}\n</code></pre>\n\n<p>So this is giving me an error because the return type of <code>getNewImages</code>, which is <code>Images</code> needs to have an argument:</p>\n\n<pre><code>One type argument expected for class Images&lt;T : Image&gt;\n</code></pre>\n\n<p>But which argument do I need to use now?</p>\n"}, {"tags": ["android", "generics", "events", "kotlin", "jvm"], "answers": [{"comments": [{"owner": {"reputation": 74, "user_id": 10064182, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EVSBvQ2pr8E/AAAAAAAAAAI/AAAAAAAAADE/B7IMmG2FdHg/photo.jpg?sz=128", "display_name": "Dawid Grajewski", "link": "https://stackoverflow.com/users/10064182/dawid-grajewski"}, "edited": false, "score": 0, "creation_date": 1571822745, "post_id": 58519276, "comment_id": 103364918, "body": "However it seems to have a problem with Int.  Int::class.java.isInstance(5) // false"}, {"owner": {"reputation": 12677, "user_id": 4237609, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/RwpIW.jpg?s=128&g=1", "display_name": "Giorgio Antonioli", "link": "https://stackoverflow.com/users/4237609/giorgio-antonioli"}, "reply_to_user": {"reputation": 74, "user_id": 10064182, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EVSBvQ2pr8E/AAAAAAAAAAI/AAAAAAAAADE/B7IMmG2FdHg/photo.jpg?sz=128", "display_name": "Dawid Grajewski", "link": "https://stackoverflow.com/users/10064182/dawid-grajewski"}, "edited": false, "score": 1, "creation_date": 1571823256, "post_id": 58519276, "comment_id": 103365199, "body": "@DawidGrajewski This happens because <code>Int</code> in Kotlin can both refer to the primitive Java <code>int</code> and to the boxed Java <code>Integer</code>. If you want to support primitives, you have two possibilities: replace <code>Class&lt;T&gt;</code> with <code>KClass&lt;T&gt;</code> or check if <code>event</code> is assignable to the primitive types. E.g. <code>event is Int</code>, <code>event is Long</code>. If you can, obviously I recommend you to change <code>Class</code> to <code>KClass</code> since it will avoid you all the checks on primitive types."}, {"owner": {"reputation": 74, "user_id": 10064182, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EVSBvQ2pr8E/AAAAAAAAAAI/AAAAAAAAADE/B7IMmG2FdHg/photo.jpg?sz=128", "display_name": "Dawid Grajewski", "link": "https://stackoverflow.com/users/10064182/dawid-grajewski"}, "edited": false, "score": 1, "creation_date": 1571823710, "post_id": 58519276, "comment_id": 103365480, "body": "Thank you once more! That closes the whole thing for me. Have a good one : )"}], "tags": [], "owner": {"reputation": 12677, "user_id": 4237609, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/RwpIW.jpg?s=128&g=1", "display_name": "Giorgio Antonioli", "link": "https://stackoverflow.com/users/4237609/giorgio-antonioli"}, "is_accepted": true, "score": 2, "last_activity_date": 1571823998, "last_edit_date": 1571823998, "creation_date": 1571821701, "answer_id": 58519276, "question_id": 58517770, "link": "https://stackoverflow.com/questions/58517770/handle-generic-listeners-of-event-bus-in-kotlin/58519276#58519276", "title": "Handle generic listeners of event bus in Kotlin", "body": "<p>Since you are already exposing the class of the event (<code>EventListener#event</code>) you can use <code>isInstance()</code> to check if the class is assignment-compatible with the instance of your event.</p>\n\n<p>So, instead of:</p>\n\n<pre><code>if (listener is EventListener&lt;T&gt;)\n    listener.callback(event)\n</code></pre>\n\n<p>you can do:</p>\n\n<pre><code>if (listener.event.isInstance(event)) {\n    // The cast is safe since you checked if the event can be received by the listener.\n    (listener as EventListener&lt;T&gt;).callback(event)\n}\n</code></pre>\n\n<p><strong>Primitives</strong></p>\n\n<p>If you want to support <code>T</code> with primitive types too, you can change <code>Class&lt;T&gt;</code> to <code>KClass&lt;T&gt;</code>\u00a0or check the instance manually on each primitive type (e.g. <code>event is Int</code>, <code>event is Long</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 1922, "user_id": 306047, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c9036cb8dc5eafb78f197e3c446aeca7?s=128&d=identicon&r=PG", "display_name": "snorbi", "link": "https://stackoverflow.com/users/306047/snorbi"}, "is_accepted": false, "score": 0, "last_activity_date": 1609943198, "creation_date": 1609943198, "answer_id": 65597590, "question_id": 58517770, "link": "https://stackoverflow.com/questions/58517770/handle-generic-listeners-of-event-bus-in-kotlin/65597590#65597590", "title": "Handle generic listeners of event bus in Kotlin", "body": "<p>The documentation of <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.flow/-shared-flow/\" rel=\"nofollow noreferrer\">kotlinx.coroutines.flow.SharedFlow</a> contains a simple example:</p>\n<blockquote>\n<p>SharedFlow is useful for broadcasting events that happen inside an\napplication to subscribers that can come and go. For example, the\nfollowing class encapsulates an event bus that distributes events to\nall subscribers in a rendezvous manner, suspending until all\nsubscribers process each event:</p>\n</blockquote>\n<pre><code>class EventBus {\n    private val _events = MutableSharedFlow&lt;Event&gt;() // private mutable shared flow\n    val events = _events.asSharedFlow() // publicly exposed as read-only shared flow\n\n    suspend fun produceEvent(event: Event) {\n        _events.emit(event) // suspends until all subscribers receive it\n    }\n}\n</code></pre>\n<p>Besides, the <a href=\"https://developer.android.com/kotlin/flow/stateflow-and-sharedflow\" rel=\"nofollow noreferrer\">corresponding Android documentation</a> is useful, too.</p>\n"}], "owner": {"reputation": 74, "user_id": 10064182, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EVSBvQ2pr8E/AAAAAAAAAAI/AAAAAAAAADE/B7IMmG2FdHg/photo.jpg?sz=128", "display_name": "Dawid Grajewski", "link": "https://stackoverflow.com/users/10064182/dawid-grajewski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 609, "favorite_count": 0, "accepted_answer_id": 58519276, "answer_count": 2, "score": 3, "last_activity_date": 1609943198, "creation_date": 1571816192, "question_id": 58517770, "link": "https://stackoverflow.com/questions/58517770/handle-generic-listeners-of-event-bus-in-kotlin", "title": "Handle generic listeners of event bus in Kotlin", "body": "<p>My goal is to implement very simple event bus in Kotlin without any 3rd party libraries. I accomplished that with the code below.</p>\n\n<pre><code>class EventListener&lt;T&gt;(\n    val owner: Any,\n    val event: Class&lt;T&gt;,\n    val callback: (T) -&gt; Unit\n)\n\ninterface IEventBus {\n    fun &lt;T&gt; subscribe(owner: Any, event: Class&lt;T&gt;, callback: (T) -&gt; Unit)\n    fun unsubscribe(owner: Any)\n    fun &lt;T&gt; push(event: T)\n}\n\nclass EventBus : IEventBus {\n    private val _listeners = mutableListOf&lt;EventListener&lt;*&gt;&gt;()\n\n    override fun &lt;T&gt; subscribe(owner: Any, event: Class&lt;T&gt;, callback: (T) -&gt; Unit) {\n        val listener = EventListener(owner, event, callback)\n        _listeners.add(listener)\n    }\n\n    override fun unsubscribe(owner: Any) {\n        _listeners.removeAll {\n            it.owner == owner\n        }\n    }\n\n    override fun &lt;T&gt; push(event: T) {\n        _listeners.forEach { listener -&gt;\n            try {\n                val l = listener as EventListener&lt;T&gt; // is always a success\n                l.callback(event)                    // throws an exception if can't handle the event\n            } catch (ex: Exception) { }\n        }\n    }\n}\n</code></pre>\n\n<p>And then the usage would be like this:</p>\n\n<pre><code>// register listener\nbus.subscribe(this, String::class.java) {\n    print(it)\n}\n// push an event (from somewhere else in the project)\nbus.push(\"Hello world!\")\n</code></pre>\n\n<p>It works and is completely usable, however I am not satisfied with it... Casting <strong>listener as EventListener</strong> will always return something and then if <strong>l.callback(event)</strong> can't handle the event type it will throw an exception. So if there are many listeners subscribed then it will generate many unwanted exceptions that will just be ignored.</p>\n\n<p>I would prefer doing some kind of check first, like:</p>\n\n<pre><code>if (listener is EventListener&lt;T&gt;)\n    listener.callback(event)\n</code></pre>\n\n<p>But I found out that JVM loses information about the generic types after the compilation. I also found out that it can be bypassed using kotlin's <strong>inline</strong> and <strong>reified</strong>, however those can not be used on a method that comes from an interface...</p>\n\n<p>So my question is do you know any more elegant way to handle such generic problem?</p>\n"}, {"tags": ["android-studio", "debugging", "intellij-idea", "kotlin"], "comments": [{"owner": {"reputation": 2444, "user_id": 287761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UZJAT.png?s=128&g=1", "display_name": "Enselic", "link": "https://stackoverflow.com/users/287761/enselic"}, "edited": false, "score": 0, "creation_date": 1572502329, "post_id": 58517702, "comment_id": 103581700, "body": "Sounds like a bug, I advice you to report it: <a href=\"https://developer.android.com/studio/report-bugs\" rel=\"nofollow noreferrer\">developer.android.com/studio/report-bugs</a>"}, {"owner": {"reputation": 4717, "user_id": 4133301, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/yKdIm.jpg?s=128&g=1", "display_name": "GensaGames", "link": "https://stackoverflow.com/users/4133301/gensagames"}, "reply_to_user": {"reputation": 2444, "user_id": 287761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UZJAT.png?s=128&g=1", "display_name": "Enselic", "link": "https://stackoverflow.com/users/287761/enselic"}, "edited": false, "score": 0, "creation_date": 1572552336, "post_id": 58517702, "comment_id": 103605855, "body": "@Enselic It&#39;s too few information to consider this as bug. @Muhammad please show build configuration during <code>run</code>."}, {"owner": {"reputation": 844, "user_id": 4557882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WP8OP.jpg?s=128&g=1", "display_name": "Muhammad Muzammil", "link": "https://stackoverflow.com/users/4557882/muhammad-muzammil"}, "reply_to_user": {"reputation": 2444, "user_id": 287761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UZJAT.png?s=128&g=1", "display_name": "Enselic", "link": "https://stackoverflow.com/users/287761/enselic"}, "edited": false, "score": 1, "creation_date": 1572941574, "post_id": 58517702, "comment_id": 103708301, "body": "@Enselic Already reported: <a href=\"https://issuetracker.google.com/issues/143160964\" rel=\"nofollow noreferrer\">issuetracker.google.com/issues/143160964</a>"}], "owner": {"reputation": 844, "user_id": 4557882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WP8OP.jpg?s=128&g=1", "display_name": "Muhammad Muzammil", "link": "https://stackoverflow.com/users/4557882/muhammad-muzammil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 228, "favorite_count": 0, "answer_count": 0, "score": 12, "last_activity_date": 1572499173, "creation_date": 1571815943, "last_edit_date": 1572499173, "question_id": 58517702, "link": "https://stackoverflow.com/questions/58517702/debugger-breakpoint-hitting-on-the-same-line-in-file-but-of-the-different-build", "title": "Debugger breakpoint hitting on the same line in file but of the different build variant while using lambdas", "body": "<p>We have many different builds, flavors and dimensions in our project. But after updating to Android Studio 3.5 we noticed a strange behavior that when we create a breakpoint in some <strong>lambda</strong> of our file that exists in more than one build variant then the debugger is not working properly and is being hit in the file (of the same name and package) of the different build variant. <strong>Interestingly this whole issue only happens when the breakpoint is set to be triggered in the body of the lambda and is working perfectly fine otherwise</strong></p>\n\n<p>So in summary to reproduce this issue, you have to:</p>\n\n<ol>\n<li>Create two flavors and a file with the same name in each of these flavors</li>\n<li>Create a code that contains lambda at some line <code>X</code> in both flavors</li>\n</ol>\n\n<p>Now only one of the two things will happen but not both:</p>\n\n<ul>\n<li>When you are in flavor A and you create a trigger on line <code>X</code> it will break on the same line but in the file of flavor B</li>\n<li>When you are in flavor B and you create a trigger on line <code>X</code> it will break on the same line but in the file of flavor A</li>\n</ul>\n\n<p>Here are some of the screenshots of when we tried to reproduce the issue:</p>\n\n<p>ActualFlavor's AuthRepository (Active Build Variant):\n<a href=\"https://i.stack.imgur.com/f6S6D.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/f6S6D.png\" alt=\"enter image description here\"></a></p>\n\n<p>DummyFlavor's AuthRepository:\n<a href=\"https://i.stack.imgur.com/cCMxk.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/cCMxk.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>So the question is what are we doing wrong? Or is it really an issue in Android Studio right now?</strong></p>\n\n<p><em>Android Studio version = 3.5 kotlin version = 1.3.50 build:gradle version = 3.5.1</em></p>\n"}, {"tags": ["java", "android", "android-studio", "kotlin"], "comments": [{"owner": {"reputation": 1207, "user_id": 6671004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bueJ3.jpg?s=128&g=1", "display_name": "Shrey Garg", "link": "https://stackoverflow.com/users/6671004/shrey-garg"}, "edited": false, "score": 0, "creation_date": 1571814374, "post_id": 58516791, "comment_id": 103360754, "body": "you can directly access ui components in kotlin without using <code>findViewById</code>"}, {"owner": {"reputation": 571, "user_id": 6920141, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8b1ad21bbc4d17af96ac749a726de3c?s=128&d=identicon&r=PG&f=1", "display_name": "undefined", "link": "https://stackoverflow.com/users/6920141/undefined"}, "reply_to_user": {"reputation": 1207, "user_id": 6671004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bueJ3.jpg?s=128&g=1", "display_name": "Shrey Garg", "link": "https://stackoverflow.com/users/6671004/shrey-garg"}, "edited": false, "score": 0, "creation_date": 1571814681, "post_id": 58516791, "comment_id": 103360893, "body": "I found this not always works as expected i.e. Android Studio says view is accessable in the current context but at runtime I got NPE"}, {"owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "reply_to_user": {"reputation": 1207, "user_id": 6671004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bueJ3.jpg?s=128&g=1", "display_name": "Shrey Garg", "link": "https://stackoverflow.com/users/6671004/shrey-garg"}, "edited": false, "score": 0, "creation_date": 1571822178, "post_id": 58516791, "comment_id": 103364616, "body": "@ShreyGarg only with <code>kotlin-android-extensions</code> plugin. and it&#39;s less efficient than doing it manually (no cache overhead) or using <a href=\"https://developer.android.com/topic/libraries/view-binding\" rel=\"nofollow noreferrer\">view binding</a>."}, {"owner": {"reputation": 1207, "user_id": 6671004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bueJ3.jpg?s=128&g=1", "display_name": "Shrey Garg", "link": "https://stackoverflow.com/users/6671004/shrey-garg"}, "reply_to_user": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 0, "creation_date": 1571822391, "post_id": 58516791, "comment_id": 103364712, "body": "@EugenPechanec, what do you prefer using?"}, {"owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "reply_to_user": {"reputation": 1207, "user_id": 6671004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bueJ3.jpg?s=128&g=1", "display_name": "Shrey Garg", "link": "https://stackoverflow.com/users/6671004/shrey-garg"}, "edited": false, "score": 1, "creation_date": 1571822563, "post_id": 58516791, "comment_id": 103364798, "body": "@ShreyGarg I mostly use the extensions but I&#39;m migrating away in new code. Will use view binding when Android Studio 3.6 comes out of beta."}], "answers": [{"tags": [], "owner": {"reputation": 2796, "user_id": 7508302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bHYHM.jpg?s=128&g=1", "display_name": "Cililing", "link": "https://stackoverflow.com/users/7508302/cililing"}, "is_accepted": false, "score": 0, "last_activity_date": 1571818086, "creation_date": 1571818086, "answer_id": 58518297, "question_id": 58516791, "link": "https://stackoverflow.com/questions/58516791/is-there-way-to-teach-java-kotlin-converter-in-android-studio-to-not-use-as/58518297#58518297", "title": "Is there way to teach java-&gt; kotlin converter in Android Studio to not use `as` operator when converting findViewById?", "body": "<p>You can turn on the warning for code like this.</p>\n\n<p>Go to (Settings -> Editor -> Inspections -> Kotlin Android -> Cast can be converted to findViewById with type parameter) and switch severity to warning.</p>\n\n<p>I don't think that conventer itself can be taught that this specific cast should be converted to something other. And in fact, I would say that it's expected behavior.</p>\n\n<p>Note, that above Android SDK 28 you don't need that cast even in java:</p>\n\n<pre><code>public void hideChildTextView(View parent, @IdRes int id) {\n    TextView view = parent.findViewById(id);\n    view.setVisibility(View.GONE);\n}\n</code></pre>\n\n<p>That code would be translated to:</p>\n\n<pre><code>fun hideChildTextView(parent: View, @IdRes id: Int) {\n    val view = parent.findViewById&lt;TextView&gt;(id)\n    view.visibility = View.GONE\n}\n</code></pre>\n\n<p>It's because the type can be obtained from filed type and there is no cast needed (or it's actually casted by library).</p>\n\n<p>So, let's check other code in SDK below 28:</p>\n\n<pre><code>public void hideChildTextView2(View parent, @IdRes int id) {\n    TextView view = (TextView) parent.findViewById(id);\n    view.setVisibility(View.GONE);\n}\n</code></pre>\n\n<p>This would be converted to:</p>\n\n<pre><code>fun hideChildTextView2(parent: View, @IdRes id: Int) {\n    val view = parent.findViewById(id) as TextView\n    view.visibility = View.GONE\n}\n</code></pre>\n\n<p>So, why is that?\nmethod <code>findViewById</code> below android 28 returns just View (so we need to cast it to proper type), but above returns <code>&lt;T extends View&gt;</code>, so compiler is able to make autocast.</p>\n\n<p>So, what I would suggest? Update your compile/target SDK to 28+, clean the code in Java and then it would be working as you want. ;) </p>\n"}, {"comments": [{"owner": {"reputation": 571, "user_id": 6920141, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8b1ad21bbc4d17af96ac749a726de3c?s=128&d=identicon&r=PG&f=1", "display_name": "undefined", "link": "https://stackoverflow.com/users/6920141/undefined"}, "edited": false, "score": 0, "creation_date": 1571830265, "post_id": 58519675, "comment_id": 103368843, "body": "Indeed, the return type of findViewById has changed and now it returns not just View, but exact view declared in the layout.No need to cast it.Looks like some parts better to rewrite from scratch"}], "tags": [], "owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "is_accepted": true, "score": 2, "last_activity_date": 1571822894, "creation_date": 1571822894, "answer_id": 58519675, "question_id": 58516791, "link": "https://stackoverflow.com/questions/58516791/is-there-way-to-teach-java-kotlin-converter-in-android-studio-to-not-use-as/58519675#58519675", "title": "Is there way to teach java-&gt; kotlin converter in Android Studio to not use `as` operator when converting findViewById?", "body": "<p>Java to Kotlin converter works correctly, it produces equivalent code. Your Java code contains explicit casts, Kotlin code will include them too.</p>\n\n<p>If you want the described behavior, first move to the Android 9 generic syntax of <code>findViewById</code>.</p>\n\n<p>Then this Java code</p>\n\n<pre><code>// Old\nfinal TextView view0 = (TextView)activity.findViewById(id);\n// New\nfinal View     view1 = activity.findViewById(id);\nfinal TextView view2 = activity.findViewById(id);\n// Not useful\nfinal View     view3 = activity.&lt;TextView&gt;findViewById(id);\n</code></pre>\n\n<p>will convert to this Kotlin code</p>\n\n<pre><code>val view0 = activity.findViewById&lt;View&gt;(id) as TextView\nval view1 = activity.findViewById&lt;View&gt;(id)\nval view2 = activity.findViewById&lt;TextView&gt;(id)\nval view3 = activity.findViewById&lt;TextView&gt;(id)\n</code></pre>\n"}], "owner": {"reputation": 571, "user_id": 6920141, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8b1ad21bbc4d17af96ac749a726de3c?s=128&d=identicon&r=PG&f=1", "display_name": "undefined", "link": "https://stackoverflow.com/users/6920141/undefined"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 58519675, "answer_count": 2, "score": 1, "last_activity_date": 1571822894, "creation_date": 1571812505, "last_edit_date": 1571818834, "question_id": 58516791, "link": "https://stackoverflow.com/questions/58516791/is-there-way-to-teach-java-kotlin-converter-in-android-studio-to-not-use-as", "title": "Is there way to teach java-&gt; kotlin converter in Android Studio to not use `as` operator when converting findViewById?", "body": "<p>For example</p>\n\n<pre><code>((MyView)view.findViewById(R.id.my_view)).doSomething()\n</code></pre>\n\n<p>it converts into</p>\n\n<pre><code>(view.findViewById(R.id.my_view) as MyView).doSomething()\n</code></pre>\n\n<p>While I want it to be</p>\n\n<pre><code>view.findViewById&lt;MyView&gt;(R.id.my_view).doSomething()\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-databinding", "android-safe-args"], "answers": [{"comments": [{"owner": {"reputation": 268, "user_id": 7764067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea757aacd9693217a072e2b06682a829?s=128&d=identicon&r=PG&f=1", "display_name": "Hannah S.", "link": "https://stackoverflow.com/users/7764067/hannah-s"}, "edited": false, "score": 3, "creation_date": 1571982111, "post_id": 58552235, "comment_id": 103425475, "body": "That did do the trick, strangely enough, thanks. For others coming here with the same problem, all I had to do was refactor&gt;rename the layout xml file associated with the class that wasn&#39;t recognizing binding.root. You&#39;ll also have to rename the auto-generated class type for the binding accordingly. Once I did that, everything worked correctly and I was even able to re-rename back to the original name. Not sure how this did anything rebuilding the project didn&#39;t.."}, {"owner": {"reputation": 268, "user_id": 7764067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea757aacd9693217a072e2b06682a829?s=128&d=identicon&r=PG&f=1", "display_name": "Hannah S.", "link": "https://stackoverflow.com/users/7764067/hannah-s"}, "edited": false, "score": 0, "creation_date": 1571982180, "post_id": 58552235, "comment_id": 103425491, "body": "Also if you&#39;re here due to issues with safe-args, might wanna look into using a shared ViewModel and LiveData instead. That&#39;s what I&#39;m using now cause I had to keep going when I got stuck on safe-args and I&#39;m much happier"}, {"owner": {"reputation": 1481, "user_id": 6059583, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/BdoQK.png?s=128&g=1", "display_name": "Jeeva", "link": "https://stackoverflow.com/users/6059583/jeeva"}, "edited": false, "score": 0, "creation_date": 1617086253, "post_id": 58552235, "comment_id": 118196931, "body": "invalid caches command didn&#39;t work but renaming the layout which was not recognised did the trick."}], "tags": [], "owner": {"reputation": 151, "user_id": 11503193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e1b6be7e94c7a7ca4fb96cc19e5a12?s=128&d=identicon&r=PG&f=1", "display_name": "MarkWang", "link": "https://stackoverflow.com/users/11503193/markwang"}, "is_accepted": true, "score": 11, "last_activity_date": 1571977939, "creation_date": 1571977939, "answer_id": 58552235, "question_id": 58516299, "link": "https://stackoverflow.com/questions/58516299/cant-get-root-view-from-data-binding-after-enabling-safe-args-plugin/58552235#58552235", "title": "Can&#39;t get Root View from Data Binding after enabling safe-args plugin", "body": "<p>I have the same issue,\nit's so wired for me,\nbut just rename the layout will work again,\ntry to it :D </p>\n"}, {"comments": [{"owner": {"reputation": 7328, "user_id": 1101730, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/0ZiMa.jpg?s=128&g=1", "display_name": "Micer", "link": "https://stackoverflow.com/users/1101730/micer"}, "edited": false, "score": 0, "creation_date": 1592666516, "post_id": 58569468, "comment_id": 110509251, "body": "Just <code>Invalidate</code> works, no need to restart Android Studio."}], "tags": [], "owner": {"reputation": 341, "user_id": 4503489, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Sx-f9zEtZM4/AAAAAAAAAAI/AAAAAAAABbw/IOwOLEbrmH8/photo.jpg?sz=128", "display_name": "Daniel Chin", "link": "https://stackoverflow.com/users/4503489/daniel-chin"}, "is_accepted": false, "score": 24, "last_activity_date": 1572080936, "creation_date": 1572080936, "answer_id": 58569468, "question_id": 58516299, "link": "https://stackoverflow.com/questions/58516299/cant-get-root-view-from-data-binding-after-enabling-safe-args-plugin/58569468#58569468", "title": "Can&#39;t get Root View from Data Binding after enabling safe-args plugin", "body": "<p>I have the same issue and at last I tried</p>\n\n<p>File -> Invalid Caches/Restart</p>\n\n<p>It works for me.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11725252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RYz66.jpg?s=128&g=1", "display_name": "natanhp", "link": "https://stackoverflow.com/users/11725252/natanhp"}, "is_accepted": false, "score": 0, "last_activity_date": 1617078818, "creation_date": 1617078818, "answer_id": 66864851, "question_id": 58516299, "link": "https://stackoverflow.com/questions/58516299/cant-get-root-view-from-data-binding-after-enabling-safe-args-plugin/66864851#66864851", "title": "Can&#39;t get Root View from Data Binding after enabling safe-args plugin", "body": "<p>I have the similar issue but only in included layout, perform these operations work for me</p>\n<pre><code>Build -&gt; Clean Project\nBuild -&gt; Rebuild Project\n</code></pre>\n"}], "owner": {"reputation": 268, "user_id": 7764067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea757aacd9693217a072e2b06682a829?s=128&d=identicon&r=PG&f=1", "display_name": "Hannah S.", "link": "https://stackoverflow.com/users/7764067/hannah-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2867, "favorite_count": 3, "accepted_answer_id": 58552235, "answer_count": 3, "score": 15, "last_activity_date": 1617078818, "creation_date": 1571810120, "question_id": 58516299, "link": "https://stackoverflow.com/questions/58516299/cant-get-root-view-from-data-binding-after-enabling-safe-args-plugin", "title": "Can&#39;t get Root View from Data Binding after enabling safe-args plugin", "body": "<p>I'm working on an Android app using dataBinding and am currently trying to add the safe-args plugin, but after enabling the plugin, I can no longer get the root view via binding.root - Android Studio gives the error: </p>\n\n<pre><code>Unresolved Reference\nNone of the following candidates is applicable because of a receiver type mismatch:\n* internal val File.root: File defined in kotlin.io\n</code></pre>\n\n<p>How can I get databinding and safe-args to play nice together?</p>\n\n<p>Note that while the code snippet is in Kotlin I will happily take Java answers. Not as comfortable in Java but I can easily read it and translate it.</p>\n\n<p>I haven't been able to find anyone else with the same problem by Googling the error message and \"safe args\". I tried first with the classpath listed in the Android docs here: <a href=\"https://developer.android.com/guide/navigation/navigation-pass-data\" rel=\"noreferrer\">https://developer.android.com/guide/navigation/navigation-pass-data</a></p>\n\n<pre><code>classpath \"androidx.navigation:navigation-safe-args-gradle-plugin:2.1.0\"\n</code></pre>\n\n<p>And then also found a tutorial suggesting I use:</p>\n\n<pre><code>classpath \"android.arch.navigation:navigation-safe-args-gradle-plugin:1.0.0-alpha07\"\n</code></pre>\n\n<p>Both had the same issue: binding.root gave an error with the plugin activated</p>\n\n<p>Here is my onCreateView() for my fragment. That return line works properly when safe-args isn't enabled and doesn't work when it is enabled</p>\n\n<pre><code>   override fun onCreateView(\n    inflater: LayoutInflater, container: ViewGroup?,\n    savedInstanceState: Bundle?\n): View? {\n    binding = DataBindingUtil.inflate(inflater, R.layout.fragment_encoder, container, false)\n\n    return binding.root\n}\n</code></pre>\n\n<p>Any help solving or understanding this problem is most appreciated!</p>\n"}, {"tags": ["android", "android-studio", "kotlin", "build", "build.gradle"], "comments": [{"owner": {"reputation": 3433, "user_id": 6688493, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wHeZJ8Tx7IY/AAAAAAAAAAI/AAAAAAAAAG4/rYEipSHTsag/photo.jpg?sz=128", "display_name": "touhid udoy", "link": "https://stackoverflow.com/users/6688493/touhid-udoy"}, "edited": false, "score": 0, "creation_date": 1571808123, "post_id": 58515717, "comment_id": 103358328, "body": "the resources under build folder is meant to be changed after every build. you have the change the library/module you are using before build"}, {"owner": {"reputation": 9541, "user_id": 1568530, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001179991520/picture?type=large", "display_name": "Vladyslav Matviienko", "link": "https://stackoverflow.com/users/1568530/vladyslav-matviienko"}, "edited": false, "score": 0, "creation_date": 1571810456, "post_id": 58515717, "comment_id": 103359006, "body": "you should not try to change anything in build folder, as everything there is generated during build process, and the changes will vanish right when you press Build. Instead find corresponding file in your sources"}, {"owner": {"reputation": 1, "user_id": 9672268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb1916caedbf279e61694c0b725eef1e?s=128&d=identicon&r=PG&f=1", "display_name": "killpwnrang3", "link": "https://stackoverflow.com/users/9672268/killpwnrang3"}, "reply_to_user": {"reputation": 9541, "user_id": 1568530, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001179991520/picture?type=large", "display_name": "Vladyslav Matviienko", "link": "https://stackoverflow.com/users/1568530/vladyslav-matviienko"}, "edited": false, "score": 0, "creation_date": 1571844609, "post_id": 58515717, "comment_id": 103377167, "body": "@Vladyslav Matviienko So you are suggesting that I find the corresponding file in my src folder and make my changes there? If so, then I don&#39;t see any problem in that file."}, {"owner": {"reputation": 1, "user_id": 9672268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb1916caedbf279e61694c0b725eef1e?s=128&d=identicon&r=PG&f=1", "display_name": "killpwnrang3", "link": "https://stackoverflow.com/users/9672268/killpwnrang3"}, "edited": false, "score": 0, "creation_date": 1571890693, "post_id": 58515717, "comment_id": 103391136, "body": "Thank you so much for your help, I got it to run!!"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 9672268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb1916caedbf279e61694c0b725eef1e?s=128&d=identicon&r=PG&f=1", "display_name": "killpwnrang3", "link": "https://stackoverflow.com/users/9672268/killpwnrang3"}, "is_accepted": false, "score": 0, "last_activity_date": 1571890752, "creation_date": 1571890752, "answer_id": 58534080, "question_id": 58515717, "link": "https://stackoverflow.com/questions/58515717/unable-to-edit-android-studio-build-files/58534080#58534080", "title": "Unable to edit Android Studio build files", "body": "<p>The solution was to just change the filename which is located in the source folder to what Android Studio was suggesting.</p>\n"}], "owner": {"reputation": 1, "user_id": 9672268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb1916caedbf279e61694c0b725eef1e?s=128&d=identicon&r=PG&f=1", "display_name": "killpwnrang3", "link": "https://stackoverflow.com/users/9672268/killpwnrang3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1571890752, "creation_date": 1571806476, "question_id": 58515717, "link": "https://stackoverflow.com/questions/58515717/unable-to-edit-android-studio-build-files", "title": "Unable to edit Android Studio build files", "body": "<p>I am currently trying to run a music player app, which is made using <strong><em>Kotlin</em></strong> on <strong><em>Android Studio</em></strong>. Unfortunately when I click the \"run\" button it says \"Build failed\" and the following error appears:</p>\n\n<p><strong>\"app\\build\\tmp\\kapt3\\stubs\\debug\\com\\crrl\\beatplayer\\repository\\PlaylistRepository.java:6: error: class PlayListRepository is public, should be declared in a file named PlayListRepository.java\npublic abstract interface PlayListRepository\"</strong></p>\n\n<p>I think I know why it is showing this error; because the name of the interface is different from the filename(<strong>PlaylistRepository.java</strong>), currently this file resides in my build folder in \"app\" as you can see from the path.</p>\n\n<p>I have tried to search how to change the the contents of the file and rename it, but whenever I click \"run\" after implementing the changes, it reverts back to the old filename and content as if I didn't change anything and shows the same error.</p>\n\n<pre><code>import java.lang.System;\n\n@kotlin.Metadata(mv = {1, 1, 15}, bv = {1, 0, 3}, k = 1, d1 = {\"\\u00006\\n\\u0002\\u0018\\u0002\\n\\u0002\\u0010\\u0000\\n\\u0000\\n\\u0002\\u0010\\t\\n\\u0000\\n\\u0002\\u0010\\u000e\\n\\u0000\\n\\u0002\\u0010\\b\\n\\u0002\\b\\u0002\\n\\u0002\\u0010 \\n\\u0002\\u0018\\u0002\\n\\u0000\\n\\u0002\\u0018\\u0002\\n\\u0000\\n\\u0002\\u0010\\u0002\\n\\u0002\\b\\u0002\\bf\\u0018\\u00002\\u00020\\u0001J\\u0012\\u0010\\u0002\\u001a\\u00020\\u00032\\b\\u0010\\u0004\\u001a\\u0004\\u0018\\u00010\\u0005H&amp;J\\u0010\\u0010\\u0006\\u001a\\u00020\\u00072\\u0006\\u0010\\b\\u001a\\u00020\\u0003H&amp;J\\u000e\\u0010\\t\\u001a\\b\\u0012\\u0004\\u0012\\u00020\\u000b0\\nH&amp;J\\u0016\\u0010\\f\\u001a\\b\\u0012\\u0004\\u0012\\u00020\\r0\\n2\\u0006\\u0010\\b\\u001a\\u00020\\u0003H&amp;J\\u0018\\u0010\\u000e\\u001a\\u00020\\u000f2\\u0006\\u0010\\b\\u001a\\u00020\\u00032\\u0006\\u0010\\u0010\\u001a\\u00020\\u0003H&amp;\\u00a8\\u0006\\u0011\"}, d2 = {\"Lcom/crrl/beatplayer/repository/PlayListRepository;\", \"\", \"createPlaylist\", \"\", \"name\", \"\", \"deletePlaylist\", \"\", \"playlistId\", \"getPlaylists\", \"\", \"Lcom/crrl/beatplayer/models/Playlist;\", \"getSongsInPlaylist\", \"Lcom/crrl/beatplayer/models/Song;\", \"removeFromPlaylist\", \"\", \"id\", \"app_debug\"})\npublic interface PlayListRepository {\n\n    public abstract long createPlaylist(@org.jetbrains.annotations.Nullable()\n    java.lang.String name) throws java.lang.IllegalStateException;\n\n    @org.jetbrains.annotations.NotNull()\n    public abstract java.util.List&lt;com.crrl.beatplayer.models.Playlist&gt; getPlaylists();\n\n    @org.jetbrains.annotations.NotNull()\n    public abstract java.util.List&lt;com.crrl.beatplayer.models.Song&gt; getSongsInPlaylist(long playlistId);\n\n    public abstract void removeFromPlaylist(long playlistId, long id);\n\n    public abstract int deletePlaylist(long playlistId);\n}\n</code></pre>\n\n<p>Is there a fix to this? I have tried everything, nothing seems to work!</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 10737, "user_id": 9656320, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/64csz.jpg?s=128&g=1", "display_name": "Son Truong", "link": "https://stackoverflow.com/users/9656320/son-truong"}, "is_accepted": true, "score": 4, "last_activity_date": 1571803622, "creation_date": 1571803622, "answer_id": 58515331, "question_id": 58515083, "link": "https://stackoverflow.com/questions/58515083/kotlin-check-if-jsonobject-key-exists/58515331#58515331", "title": "Kotlin: Check if JSONObject key exists", "body": "<p>You should you <a href=\"https://developer.android.com/reference/org/json/JSONObject#optInt(java.lang.String,%20int)\" rel=\"nofollow noreferrer\">optInt (String name, int fallback)</a> to achieve your task.</p>\n\n<blockquote>\n<pre><code>public int optInt (String name, int fallback)\n</code></pre>\n  \n  <p>Returns the value mapped by name if it exists and is an int or can be\n  coerced to an int, or fallback otherwise</p>\n</blockquote>\n\n<p>Your code will be</p>\n\n<pre><code>val x: Int = j.optInt(\"mykey\", 0)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 672, "user_id": 9854554, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/btJHz.jpg?s=128&g=1", "display_name": "Naresh NK", "link": "https://stackoverflow.com/users/9854554/naresh-nk"}, "is_accepted": false, "score": 2, "last_activity_date": 1571803693, "creation_date": 1571803693, "answer_id": 58515346, "question_id": 58515083, "link": "https://stackoverflow.com/questions/58515083/kotlin-check-if-jsonobject-key-exists/58515346#58515346", "title": "Kotlin: Check if JSONObject key exists", "body": "<p>You can use <code>is</code> just like <code>instanceof</code> in java -</p>\n\n<pre><code>if (j.has(\"mykey\"){\n    val myValue = j[\"mykey\"]\n    if(myValue is Int){\n        //Use myValue here\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 2892, "user_id": 391691, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vCKhh.jpg?s=128&g=1", "display_name": "Simson", "link": "https://stackoverflow.com/users/391691/simson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 863, "favorite_count": 0, "accepted_answer_id": 58515331, "answer_count": 2, "score": 1, "last_activity_date": 1571901733, "creation_date": 1571801650, "last_edit_date": 1571901733, "question_id": 58515083, "link": "https://stackoverflow.com/questions/58515083/kotlin-check-if-jsonobject-key-exists", "title": "Kotlin: Check if JSONObject key exists", "body": "<p><strong>I want to check if an entry in my <code>JSONObject</code> exists and is the type it should be to avoid an exception when used.</strong></p>\n\n<p>I found my question almost has an answer for Java <a href=\"https://stackoverflow.com/q/32470315/391691\">Check if JSONObject key exists</a> to use the <code>has()</code> operator</p>\n\n<pre><code>import org.json.JSONArray\nimport org.json.JSONObject\n\nvar j:JSONObject\n\n        ...\n\nval x:Int = if (j.has(\"mykey\"){\n   j[\"mykey\"] as Int\n}else {\n   0\n}\n</code></pre>\n\n<p>If <code>val x:Int = j[\"mykey\"] as Int</code> is executed without the check it will throw an exception.</p>\n\n<p>Is there a more <em>kotlin</em>ish way, maybe with some Elvis operator or something, of doing this check?</p>\n\n<p>What is good way to get get the type of <code>j[\"mykey\"]</code> without risking triggering an exception?</p>\n"}, {"tags": ["android", "arrays", "json", "kotlin", "gson"], "answers": [{"tags": [], "owner": {"reputation": 475, "user_id": 11877776, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-T_0LiJG5n8k/AAAAAAAAAAI/AAAAAAAAABM/GHoMFEU_6hk/photo.jpg?sz=128", "display_name": "Duy Khanh Nguyen", "link": "https://stackoverflow.com/users/11877776/duy-khanh-nguyen"}, "is_accepted": true, "score": 1, "last_activity_date": 1571801784, "last_edit_date": 1571801784, "creation_date": 1571800744, "answer_id": 58514977, "question_id": 58514907, "link": "https://stackoverflow.com/questions/58514907/kotlin-gson-incorrect-response-parsing-from-json-array/58514977#58514977", "title": "(Kotlin) GSON incorrect response parsing from json array", "body": "<p>Your json string is an array of objects, so that you need to parse it with a list/array type</p>\n\n<pre><code>val listType = object : TypeToken&lt;List&lt;Your_Object&gt;&gt;() { }.type\nval spaceXFeed = gson.fromJson&lt;List&lt;Your_Object&gt;&gt;(body, listType)\n</code></pre>\n"}], "owner": {"reputation": 489, "user_id": 9696274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bb41d3349ae8294ea95dfac00409380?s=128&d=identicon&r=PG&f=1", "display_name": "Yevhen_Radchenko", "link": "https://stackoverflow.com/users/9696274/yevhen-radchenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 494, "favorite_count": 0, "accepted_answer_id": 58514977, "answer_count": 1, "score": 0, "last_activity_date": 1571801784, "creation_date": 1571800137, "question_id": 58514907, "link": "https://stackoverflow.com/questions/58514907/kotlin-gson-incorrect-response-parsing-from-json-array", "title": "(Kotlin) GSON incorrect response parsing from json array", "body": "<p>My problem seems similar to <a href=\"https://stackoverflow.com/questions/18712495/gson-parse-generic-json-array\">GSON parse generic Json Array</a> but it seems outdated to old way of usage. And I can't get an answer from it.</p>\n\n<p>Im parsing an url with json response, which is returning an array</p>\n\n<pre><code>[{\n    \"flight_number\": 1,\n    \"mission_name\": \"FalconSat\",\n    \"mission_id\": [],\n    \"upcoming\": false,\n    \"launch_year\": \"2006\",\n    \"launch_date_unix\": 1143239400,\n    \"launch_date_utc\": \"2006-03-24T22:30:00.000Z\",\n    \"launch_date_local\": \"2006-03-25T10:30:00+12:00\",\n    \"is_tentative\": false,\n    \"tentative_max_precision\": \"hour\",\n    \"tbd\": false,\n    \"launch_window\": 0,\n    \"rocket\": {\n        \"rocket_id\": \"falcon1\",\n        \"rocket_name\": \"Falcon 1\",\n        \"rocket_type\": \"Merlin A\",\n        \"first_stage\": {\n            \"cores\": [{\n                \"core_serial\": \"Merlin1A\",\n                \"flight\": 1,\n                \"block\": null,\n                \"gridfins\": false,\n                \"legs\": false,\n                \"reused\": false,\n                \"land_success\": null,\n                \"landing_intent\": false,\n                \"landing_type\": null,\n                \"landing_vehicle\": null\n            }]\n        },\n        \"second_stage\": {\n            \"block\": 1,\n            \"payloads\": [{\n                \"payload_id\": \"FalconSAT-2\",\n                \"norad_id\": [],\n                \"reused\": false,\n                \"customers\": [\"DARPA\"],\n                \"nationality\": \"United States\",\n                \"manufacturer\": \"SSTL\",\n                \"payload_type\": \"Satellite\",\n                \"payload_mass_kg\": 20,\n                \"payload_mass_lbs\": 43,\n                \"orbit\": \"LEO\",\n                \"orbit_params\": {\n                    \"reference_system\": \"geocentric\",\n                    \"regime\": \"low-earth\",\n                    \"longitude\": null,\n                    \"semi_major_axis_km\": null,\n                    \"eccentricity\": null,\n                    \"periapsis_km\": 400,\n                    \"apoapsis_km\": 500,\n                    \"inclination_deg\": 39,\n                    \"period_min\": null,\n                    \"lifespan_years\": null,\n                    \"epoch\": null,\n                    \"mean_motion\": null,\n                    \"raan\": null,\n                    \"arg_of_pericenter\": null,\n                    \"mean_anomaly\": null\n                },\n                \"uid\": \"UerI6qmZTU2Fx2efDFm3QQ==\"\n            }]\n</code></pre>\n\n<p>And getting </p>\n\n<blockquote>\n  <p>Expected BEGIN_OBJECT but was BEGIN_ARRAY at line 1 column 2 path $</p>\n</blockquote>\n\n<p>And crash on the start of the app as a result.\nThere is my method:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>val url = \"https://api.spacexdata.com/v3/launches\"\n        val client = OkHttpClient()\n        val request = Request.Builder().url(url).build()\n\n        client.newCall(request).enqueue(object : Callback {\n            override fun onResponse(call: Call, response: Response) {\n                val body = response.body?.string()\n                println(body)\n\n                val gson = GsonBuilder().create()\n\n                val spaceXFeed = gson.fromJson(body, SpaceXFeed::class.java)\n            }\n\n            override fun onFailure(call: Call, e: IOException) {\n                println(\"Failed to execute request\")\n            }\n        })\n\n    }\n}\n\nclass SpaceXFeed(val images: List&lt;Images&gt;)\n\nclass Images(val id: Int, val name: String)\n</code></pre>\n\n<p>Any advices how to avoid this crash and parse it properly to use fields ?</p>\n"}, {"tags": ["kotlin", "channel", "coroutine"], "comments": [{"owner": {"reputation": 12970, "user_id": 2741273, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71f8f37ebda905a8fffeb75e91b87a89?s=128&d=identicon&r=PG&f=1", "display_name": "Francesc", "link": "https://stackoverflow.com/users/2741273/francesc"}, "edited": false, "score": 1, "creation_date": 1571793691, "post_id": 58514019, "comment_id": 103355505, "body": "Did you try to call offer() instead of send()? That&#39;s not a suspending function so you don&#39;t need to spawn a coroutine."}], "answers": [{"tags": [], "owner": {"reputation": 36328, "user_id": 5483526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec50563f80bacd2a7fed69bd31d0c810?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Timmermans", "link": "https://stackoverflow.com/users/5483526/matt-timmermans"}, "is_accepted": true, "score": 2, "last_activity_date": 1571793756, "creation_date": 1571793756, "answer_id": 58514201, "question_id": 58514019, "link": "https://stackoverflow.com/questions/58514019/kotlin-coroutine-keeping-channel-send-event-synchronous/58514201#58514201", "title": "Kotlin Coroutine - Keeping Channel Send Event Synchronous", "body": "<p>Instead of launching the <code>send</code>s in parallel, you should use a <code>Channel</code> with a capacity of Channel.UNLIMITED, and have <code>onMessageReceived</code> use <code>offer</code> instead of <code>send</code>.</p>\n\n<p>This is a lot cheaper than launching a new job for each send, and the channel will preserve the order</p>\n"}], "owner": {"reputation": 220, "user_id": 4984261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a700250d798f51d108bcf90cc9dd83c9?s=128&d=identicon&r=PG&f=1", "display_name": "wesjpaul", "link": "https://stackoverflow.com/users/4984261/wesjpaul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 2, "accepted_answer_id": 58514201, "answer_count": 1, "score": 2, "last_activity_date": 1571793756, "creation_date": 1571791869, "question_id": 58514019, "link": "https://stackoverflow.com/questions/58514019/kotlin-coroutine-keeping-channel-send-event-synchronous", "title": "Kotlin Coroutine - Keeping Channel Send Event Synchronous", "body": "<p>I have a class which listens to events coming from a socket at a very fast pace. I would like to feed these events into a coroutine <code>Channel</code>. The following code is used:</p>\n\n<pre><code>class MyClass(channel: Channel&lt;String&gt;) : ... {\n\n ...\n\n  override onMessageReceived(message: String) {\n     MyScope.launch {\n        channel.send(message)\n     }\n  }\n\n}\n</code></pre>\n\n<p>This does not work since sometimes the events come in so fast that they end up getting posted out of order due to the <code>launch</code> spawning a new coroutine and everything happening in parallel. How can I ensure the order of the <code>send</code> is synchronous?</p>\n\n<p>I tried <code>newSingleThreadContext</code> which did work however it is considered experimental and has a note saying it will be removed eventually. I am looking for a more solution that is more correct and complete.</p>\n"}, {"tags": ["android", "kotlin", "android-livedata", "android-jetpack"], "comments": [{"owner": {"reputation": 2865, "user_id": 6587143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d937e3b76600ab1182224aec4710655?s=128&d=identicon&r=PG&f=1", "display_name": "Sanlok Lee", "link": "https://stackoverflow.com/users/6587143/sanlok-lee"}, "edited": false, "score": 0, "creation_date": 1571793895, "post_id": 58513149, "comment_id": 103355543, "body": "Can you show how you used <code>MutableLiveData</code>? I don&#39;t see any <code>MutableLiveData</code> in the question."}, {"owner": {"reputation": 333, "user_id": 9658507, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EBGCN.jpg?s=128&g=1", "display_name": "Agapito Gallart i Bernat", "link": "https://stackoverflow.com/users/9658507/agapito-gallart-i-bernat"}, "reply_to_user": {"reputation": 2865, "user_id": 6587143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d937e3b76600ab1182224aec4710655?s=128&d=identicon&r=PG&f=1", "display_name": "Sanlok Lee", "link": "https://stackoverflow.com/users/6587143/sanlok-lee"}, "edited": false, "score": 0, "creation_date": 1571812174, "post_id": 58513149, "comment_id": 103359658, "body": "@SanlokLee I&#39;ve posted with MutableLiveData, the key problem is that with live data the recycleview doesn&#39;t show the data retrived from Room. But if I use Live data it displays."}], "answers": [{"tags": [], "owner": {"reputation": 719, "user_id": 2709298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ce0c9b4e011ade979eb87a47ded8263?s=128&d=identicon&r=PG&f=1", "display_name": "Kishita Variya", "link": "https://stackoverflow.com/users/2709298/kishita-variya"}, "is_accepted": true, "score": 1, "last_activity_date": 1571813513, "creation_date": 1571813513, "answer_id": 58517006, "question_id": 58513149, "link": "https://stackoverflow.com/questions/58513149/livedata-works-with-recyle-view-but-mutablelivedata-dont-why/58517006#58517006", "title": "LiveData works with recyle view but MutableLiveData don&#39;t. Why?", "body": "<p>Try <code>MediatorLiveData</code> instead of mutable</p>\n\n<p>Repository:</p>\n\n<pre><code>class TipRepository (private val tipDAO: TipDAO){\n\n    // Room executes all queries on a separate thread.\n    // Observed LiveData will notify the observer when the data has changed.\n    val allTips: LiveData&lt;List&lt;Tip&gt;&gt; = tipDAO.getAll()\n\n    // The suspend modifier tells the compiler that this must be called from a\n    // coroutine or another suspend function.\n\n    suspend fun insert (tip: Tip){\n        tipDAO.insert(tip)\n    }\n\n    fun getAlphabetizedTips (): LiveData&lt;List&lt;Tip&gt;&gt; {\n        return tipDAO.getAlphabetizedTips()\n    }\n\n    suspend fun delete (tip: Tip) {\n        tipDAO.delete(tip)\n    }\n</code></pre>\n\n<p>Model view</p>\n\n<pre><code>class TipViewModel (application: Application): AndroidViewModel (application) {\n\n    private val repository : TipRepository\n    val allTips = MediatorLiveData&lt;List&lt;Tip&gt;()\n\n\n    init {\n        val tipDAO = TipRoomDatabase.getDatabase(application).tipDao()\n        repository = TipRepository(tipDAO)\n        allTips.addSource(repository.allTips){\n          this.allTips.value = it\n       }\n    }\n</code></pre>\n"}], "owner": {"reputation": 333, "user_id": 9658507, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EBGCN.jpg?s=128&g=1", "display_name": "Agapito Gallart i Bernat", "link": "https://stackoverflow.com/users/9658507/agapito-gallart-i-bernat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 1, "accepted_answer_id": 58517006, "answer_count": 1, "score": 1, "last_activity_date": 1571813513, "creation_date": 1571783688, "last_edit_date": 1571813021, "question_id": 58513149, "link": "https://stackoverflow.com/questions/58513149/livedata-works-with-recyle-view-but-mutablelivedata-dont-why", "title": "LiveData works with recyle view but MutableLiveData don&#39;t. Why?", "body": "<p>the scenario is this: </p>\n\n<p>Dao:</p>\n\n<pre><code>@Dao\ninterface TipDAO {\n    @Query(\"SELECT * FROM tip_table\")\n    fun getAll(): LiveData&lt;List&lt;Tip&gt;&gt;\n\n    @Query(\"SELECT * FROM tip_table WHERE title LIKE :title\")\n    fun findByName(title: String): Tip\n\n    @Query(\"SELECT * from tip_table ORDER BY title DESC\")\n    fun getAlphabetizedTips(): LiveData&lt;List&lt;Tip&gt;&gt;\n\n    @Insert(onConflict = OnConflictStrategy.REPLACE)\n    suspend fun insert(vararg tip: Tip)\n\n    @Insert(onConflict = OnConflictStrategy.REPLACE)\n    suspend fun insertAll(vararg tips: Tip)\n\n    @Delete\n    suspend fun delete(tip: Tip)\n\n    @Query(\"DELETE FROM tip_table\")\n    suspend fun deleteAll()\n</code></pre>\n\n<p>Repository: </p>\n\n<pre><code>\nclass TipRepository (private val tipDAO: TipDAO){\n\n    // Room executes all queries on a separate thread.\n    // Observed LiveData will notify the observer when the data has changed.\n    val allTips: LiveData&lt;List&lt;Tip&gt;&gt; = tipDAO.getAll()\n\n    // The suspend modifier tells the compiler that this must be called from a\n    // coroutine or another suspend function.\n\n    suspend fun insert (tip: Tip){\n        tipDAO.insert(tip)\n    }\n\n    fun getAlphabetizedTips (): LiveData&lt;List&lt;Tip&gt;&gt; {\n        return tipDAO.getAlphabetizedTips()\n    }\n\n    suspend fun delete (tip: Tip) {\n        tipDAO.delete(tip)\n    }\n\n</code></pre>\n\n<p>Model view</p>\n\n<pre><code>class TipViewModel (application: Application): AndroidViewModel (application) {\n\n    private val repository : TipRepository\n    val allTips: LiveData&lt;List&lt;Tip&gt;&gt;\n\n\n    init {\n        val tipDAO = TipRoomDatabase.getDatabase(application).tipDao()\n        repository = TipRepository(tipDAO)\n        allTips = repository.allTips\n    }\n\n    fun insert (tip: Tip) = viewModelScope.launch {\n        repository.insert(tip)\n    }\n\n    fun delete (tip: Tip)  = viewModelScope.launch {\n        repository.delete(tip)\n    }\n\n    fun getAlphabetizedTips () {\n        //How I can query so I can see the change ????\u00bf\u00bf\u00bf\u00bf\n    }\n\n\n}\n</code></pre>\n\n<p>Activity</p>\n\n<pre><code>    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_how_to)\n\n        val recyclerView: RecyclerView = findViewById (R.id.content)\n        val adapter = TipListAdapter(this)\n\n        recyclerView.adapter = adapter\n        recyclerView.layoutManager = LinearLayoutManager(this)\n        recyclerView.isNestedScrollingEnabled = false\n\n        tipViewModel = ViewModelProvider(this,ViewModelProvider.AndroidViewModelFactory(this.application))\n            .get(TipViewModel::class.java)\n\n        tipViewModel.allTips.observe(this,\n            Observer&lt;List&lt;Tip&gt;&gt; { tips -&gt;\n                // Update the cached copy of the tips in the adapter.\n                tips?.let { adapter.setTips(tips)} //setTips notify the listener\n            })\n\n        val addButton: Button = findViewById(R.id.how_to_add_bt)\n        val delButton: Button = findViewById(R.id.how_to_delete_bt)\n        val sortButton: ImageButton = findViewById(R.id.how_to_sort_bt)\n        val searchBar: TextView = findViewById(R.id.how_to_search_bar)\n\n        addButton.setOnClickListener {\n          Toast.makeText(this,\"ADD\", Toast.LENGTH_SHORT).show()\n          intent = Intent(this, AddActivity::class.java)\n          startActivityForResult(intent, NEW_TIP_ACTIVITY_REQUEST_CODE)\n        }\n\n        delButton.setOnClickListener {\n            TipListAdapter.delete = !TipListAdapter.delete //changes a flag \n        }\n\n        sortButton.setOnClickListener {\n            tipViewModel.getAlphabetizedTips()\n        }\n///more irrelevant code\n\noverride fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\n        super.onActivityResult(requestCode, resultCode, data)\n\n        if (NEW_TIP_ACTIVITY_REQUEST_CODE == requestCode &amp;&amp; resultCode == RESULT_OK &amp;&amp; data!= null) {\n            data.let{\n                val description: String = it.getStringExtra(AddActivity.DESCRIPTION)!!\n                val title: String = it.getStringExtra(AddActivity.TITLE)!!\n                val image: String =  it.getStringExtra(AddActivity.IMAGE)!!\n                Toast.makeText(this, \"You have created a tip succesfully\",Toast.LENGTH_SHORT).show()\n                val tip = Tip (null,title, image, description)\n                tipViewModel.insert(tip)\n            }\n        } else {\n            Toast.makeText(this,\"The tip was not uploaded correctly\",Toast.LENGTH_SHORT).show()\n        }\n    }\n</code></pre>\n\n<p>The situation is when I use <code>LiveData</code> for <em>allTips</em> in the <em>Model</em> it displays correctly into the RecycleView. But if I use <code>MutableLiveData</code> it displays nothing.  My aim is to use <code>MutableLiveData</code> to execute queries and the observer gets notified to change the recycleview data. My questions are:</p>\n\n<ul>\n<li>In the viewmodel, how can I change the LiveData allTips' value for each query I make?  i.e: getAlphabetizedTips, getTip(title), etc</li>\n<li>Why doesn't it work MutableLiveData as the snippet code as follows?</li>\n</ul>\n\n<p><strong>[EDIT]</strong></p>\n\n<p>Model view with <code>MutableLiveData</code></p>\n\n<pre><code>class TipViewModel (application: Application): AndroidViewModel (application) {\n\n    private val repository : TipRepository\n    val allTips: MutableLiveData&lt;List&lt;Tip&gt;&gt;\n\n\n    init {\n        val tipDAO = TipRoomDatabase.getDatabase(application).tipDao()\n        repository = TipRepository(tipDAO)\n        allTips.value = repository.allTips.value\n    }\n\n    fun insert (tip: Tip) = viewModelScope.launch {\n        repository.insert(tip)\n    }\n\n    fun delete (tip: Tip)  = viewModelScope.launch {\n        repository.delete(tip)\n    }\n\n    fun getAlphabetizedTips () {\n        //How I can query so I can see the change ????\u00bf\u00bf\u00bf\u00bf\n        allTips.post(respository.getAlphabetizedTips.value) \n    }\n\n\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "broadcastreceiver"], "answers": [{"tags": [], "owner": {"reputation": 12677, "user_id": 4237609, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/RwpIW.jpg?s=128&g=1", "display_name": "Giorgio Antonioli", "link": "https://stackoverflow.com/users/4237609/giorgio-antonioli"}, "is_accepted": true, "score": 4, "last_activity_date": 1571786527, "creation_date": 1571786527, "answer_id": 58513487, "question_id": 58512951, "link": "https://stackoverflow.com/questions/58512951/android-java-kotlin-conversion-fails-for-broadcast-receiver/58513487#58513487", "title": "Android java-&gt;kotlin conversion fails for broadcast receiver", "body": "<p>This happens because by default in Kotlin a nested class is static instead in Java it isn't. You have to qualify it as <code>inner</code> to reproduce the behavior of your Java code (non-static).\nIn a static nested class you can't access the non-static members of the outer class.</p>\n\n<pre><code>private inner class WaitFor (N: Int) : AsyncTask&lt;Void, Void, Void&gt;()\n</code></pre>\n"}], "owner": {"reputation": 1309, "user_id": 2631304, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7744c67c172e28b0fb042efbd00405c6?s=128&d=identicon&r=PG", "display_name": "steven smith", "link": "https://stackoverflow.com/users/2631304/steven-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 58513487, "answer_count": 1, "score": 1, "last_activity_date": 1571786527, "creation_date": 1571782463, "question_id": 58512951, "link": "https://stackoverflow.com/questions/58512951/android-java-kotlin-conversion-fails-for-broadcast-receiver", "title": "Android java-&gt;kotlin conversion fails for broadcast receiver", "body": "<p>I'm trying to convert the code below from Java to Kotlin.</p>\n\n<pre><code>public class CreateShortcut extends Activity {\n    class WaitFor extends AsyncTask&lt;Void,Void,Void&gt; {\n        final int waitPeriod;\n        private WaitFor (int N) {\n            this.waitPeriod = N * 1000;\n        }\n\n        @Override\n        protected Void doInBackground(Void... voids) {\n            try {\n                Thread.sleep(waitPeriod);\n                Intent bi = new Intent(shortcutId);\n                bi.putExtra(\"msg\", \"deny\");\n                sendBroadcast(bi);\n            }\n            catch (InterruptedException ignore) {\n            }\n            return null;\n        }\n    }\n...\n</code></pre>\n\n<p>This is the converted Kotlin.</p>\n\n<pre><code>class CreateShortcut : AppCompatActivity() {\n\n    private class WaitFor (N: Int) : AsyncTask&lt;Void, Void, Void&gt;() {\n        val waitPeriod: Int = N * 1000\n        override fun doInBackground(vararg voids: Void): Void? {\n            try {\n                Thread.sleep(waitPeriod.toLong())\n                val bi = Intent(shortcutId)\n                bi.putExtra(\"msg\", \"deny\")\n                sendBroadcast(bi)\n            } catch (ignore: InterruptedException) { /* Ignore */ }\n            return null\n        }\n    }\n</code></pre>\n\n<p>My problem is that sendBroadcast in the kotlin code is an unresolved reference.</p>\n\n<p>sendBroadcast is defined in Context and if I modify that line of code to be:</p>\n\n<pre><code>(this as CreateShortcut).sendBroadcast(bi)\n</code></pre>\n\n<p>The lint warns that the \"cast can never succeed\"\nbut the code works just fine.</p>\n\n<p>I've tried a qualified this (i.e. this@CreateShortcut) and @CreateShortcut comes up unresolved.  Also just this.sendBroadcast(intent) is also unresolved.</p>\n\n<p>The Kotlin broadcast receiver examples I've found online all just use unqualified \"sendBroadcast\" but they are typically just calling from functions within an activity class and not calling from an inner class in an activity.</p>\n\n<p>I'm stuck.  Any suggestions??</p>\n\n<p>Thanks\nSteve S.</p>\n"}, {"tags": ["android", "kotlin", "simplecursoradapter"], "comments": [{"owner": {"reputation": 464, "user_id": 11598177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nl2uJ.jpg?s=128&g=1", "display_name": "L2_Paver", "link": "https://stackoverflow.com/users/11598177/l2-paver"}, "edited": false, "score": 0, "creation_date": 1571790867, "post_id": 58512890, "comment_id": 103355003, "body": "Email can be query via <code>ContactsContract.CommonDataKinds.Email.CONTENT_URI</code> and can be get via <code>ContactsContract.CommonDataKinds.Email.DATA</code>"}], "answers": [{"tags": [], "owner": {"reputation": 722, "user_id": 9917404, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-l6nGWui8UQ0/AAAAAAAAAAI/AAAAAAAABWo/RifSkAnggAc/photo.jpg?sz=128", "display_name": "Thoriya Prahalad", "link": "https://stackoverflow.com/users/9917404/thoriya-prahalad"}, "is_accepted": true, "score": 0, "last_activity_date": 1571803870, "creation_date": 1571803870, "answer_id": 58515371, "question_id": 58512890, "link": "https://stackoverflow.com/questions/58512890/how-to-get-email-address-in-the-details-of-a-contact/58515371#58515371", "title": "How to get email address in the details of a contact", "body": "<p>Using this code to find all emails link with your contact just pass contact_id</p>\n\n<pre><code>public ArrayList&lt;String&gt; getEmail(Context context, String contact_id) {\n    ArrayList&lt;String&gt; emails = new ArrayList&lt;&gt;();\n\n    String mEmail = \"\";\n    Cursor mEmailCursor = getContentResolver().query(ContactsContract.CommonDataKinds.Email.CONTENT_URI, null, ContactsContract.CommonDataKinds.Email.CONTACT_ID + \"=?\", new String[]{contact_id}, null);\n    if (mEmailCursor.getCount() &gt; 0) {\n        while (mEmailCursor.moveToNext()) {\n            mEmail = mEmailCursor.getString(mEmailCursor.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA)).trim();\n            if (mEmail != null) {\n                emails.add(mEmail);\n            }\n        }\n    }\n    mEmailCursor.close();\n    return emails;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 12143840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5640d06d58cb28dc5b8391d5c80a439e?s=128&d=identicon&r=PG&f=1", "display_name": "Afsana Khan", "link": "https://stackoverflow.com/users/12143840/afsana-khan"}, "edited": false, "score": 0, "creation_date": 1571989017, "post_id": 58554159, "comment_id": 103427936, "body": "Just edited it and added the function to get emails"}], "tags": [], "owner": {"reputation": 37, "user_id": 12143840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5640d06d58cb28dc5b8391d5c80a439e?s=128&d=identicon&r=PG&f=1", "display_name": "Afsana Khan", "link": "https://stackoverflow.com/users/12143840/afsana-khan"}, "is_accepted": false, "score": 0, "last_activity_date": 1571988990, "creation_date": 1571988990, "answer_id": 58554159, "question_id": 58512890, "link": "https://stackoverflow.com/questions/58512890/how-to-get-email-address-in-the-details-of-a-contact/58554159#58554159", "title": "How to get email address in the details of a contact", "body": "<pre><code>    fun getemails(context:Context):ArrayList&lt;String&gt;{\n    val emails = ArrayList&lt;String&gt;()\n    var mEmail = \"\"\n    val mEmailCursor: Cursor? = contentResolver.query(ContactsContract.CommonDataKinds.Email.CONTENT_URI,\n        null, ContactsContract.CommonDataKinds.Email.CONTACT_ID,null, null);\n    if (mEmailCursor!!.getCount() &gt; 0) {\n        while (mEmailCursor.moveToNext()) {\n            mEmail = mEmailCursor.getString(mEmailCursor.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA)).trim();\n            if (mEmail != null) {\n                emails.add(mEmail);\n            }\n        }\n    }\n    mEmailCursor.close();\n    return emails;\n}\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 12143840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5640d06d58cb28dc5b8391d5c80a439e?s=128&d=identicon&r=PG&f=1", "display_name": "Afsana Khan", "link": "https://stackoverflow.com/users/12143840/afsana-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 58515371, "answer_count": 2, "score": 1, "last_activity_date": 1571988990, "creation_date": 1571782019, "last_edit_date": 1571988837, "question_id": 58512890, "link": "https://stackoverflow.com/questions/58512890/how-to-get-email-address-in-the-details-of-a-contact", "title": "How to get email address in the details of a contact", "body": "<p>I am trying to develop an app which will read the contacts from the phone and display the names of the contacts in a listview. On clicking an item of a listview the details of the contact such as name,email address and phone number will be displayed in another activity. I am able to display the name and phone number but cannot display the email address. Can anyone help to make necessary changes to read the email address and display it in the contact details?</p>\n\n<pre><code>        var cursor : Cursor? = contentResolver.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,\n            null,null,null,null)\n            startManagingCursor(cursor)\n        var selected_columns = arrayOf(\n            ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME,\n            ContactsContract.CommonDataKinds.Phone.NUMBER,\n            ContactsContract.CommonDataKinds.Phone._ID)\n        var to =  intArrayOf(android.R.id.text1)\n        simple = SimpleCursorAdapter(\n                this,android.R.layout.simple_list_item_1,cursor,selected_columns,to,0)\n        my_listview.adapter = simple\n\n        my_listview.setOnItemClickListener { parent, view, position, id -&gt;\n\n                //Log.i(\"Details\",\"Opened\")\n            val name =  cursor?.getString(cursor?.getColumnIndex(selected_columns[0]))\n            val phone =  cursor?.getString(cursor?.getColumnIndex(selected_columns[1]))\n            val intent = Intent(this, Contactdetails::class.java)\n            intent.putExtra(\"personname\",name)\n            intent.putExtra(\"personnumber\",phone)\n            startActivity(intent)\n\n        }\n\n\n    #Edited and added the function to get emails\n    fun getemails(context:Context):ArrayList&lt;String&gt;{\n        val emails = ArrayList&lt;String&gt;()\n        var mEmail = \"\"\n        val mEmailCursor: Cursor? = contentResolver.query(ContactsContract.CommonDataKinds.Email.CONTENT_URI,\n            null, ContactsContract.CommonDataKinds.Email.CONTACT_ID,null, null);\n        if (mEmailCursor!!.getCount() &gt; 0) {\n            while (mEmailCursor.moveToNext()) {\n                mEmail = mEmailCursor.getString(mEmailCursor.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA)).trim();\n                if (mEmail != null) {\n                    emails.add(mEmail);\n                }\n            }\n        }\n        mEmailCursor.close();\n        return emails;\n    }\n</code></pre>\n"}, {"tags": ["hibernate", "jpa", "generics", "kotlin", "spring-data"], "owner": {"reputation": 326, "user_id": 9248765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lXLDL.png?s=128&g=1", "display_name": "Ludov Dmitrii", "link": "https://stackoverflow.com/users/9248765/ludov-dmitrii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1572925181, "creation_date": 1571779945, "last_edit_date": 1572925181, "question_id": 58512593, "link": "https://stackoverflow.com/questions/58512593/abstract-genetic-type-in-one-to-many-relation-trouble", "title": "Abstract genetic type in one-to-many relation trouble", "body": "<p>This is what I'm trying to do:</p>\n\n<pre><code>import javax.persistence.CascadeType\nimport javax.persistence.Entity\nimport javax.persistence.GeneratedValue\nimport javax.persistence.GenerationType\nimport javax.persistence.Id\nimport javax.persistence.Inheritance\nimport javax.persistence.InheritanceType\nimport javax.persistence.JoinColumn\nimport javax.persistence.OneToMany\nimport javax.persistence.OneToOne\nimport javax.persistence.SequenceGenerator\nimport javax.persistence.Table\n\n@Entity\n@Table(schema = \"app_db\", name = \"fam\")\nclass Family(\n\n        @Id\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\n        val id: Int? = null,\n\n        @OneToOne(cascade = [CascadeType.ALL])\n        @JoinColumn(name = \"child_id\")\n        var firstChild: Child,\n\n        @OneToMany(cascade = [CascadeType.ALL])\n        @JoinColumn(name = \"fam_id\")\n        @JvmSuppressWildcards // without it gives: org.hibernate.AnnotationException: Collection has neither generic type or OneToMany.targetEntity() defined: com.betoola.integrapi.entity.schema.Family.children\n        var children: List&lt;Child&gt;\n\n)\n\n@Entity\n@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\nabstract class Child(\n        @Id\n        @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = \"schemaGen\")\n        @SequenceGenerator(name = \"schemaGen\", sequenceName = \"TEMP_SEQUENCE\", initialValue = 1, allocationSize = 1)\n        val id: Int? = null,\n\n        var name: String?)\n\n@Entity\n@Table(schema = \"app_db\", name = \"daugh\")\nclass Daughter(id: Int?, name: String) :\n        Child(id, name)\n\n@Entity\n@Table(schema = \"app_db\", name = \"son\")\nclass Son(id: Int?, name: String) :\n        Child(id, name)\n\n\n</code></pre>\n\n<p>and to test using :</p>\n\n<pre><code>\nimport org.junit.Test\nimport org.junit.runner.RunWith\nimport org.springframework.beans.factory.annotation.Autowired\nimport org.springframework.boot.test.context.SpringBootTest\nimport org.springframework.test.context.junit4.SpringRunner\n\n@RunWith(SpringRunner::class)\n@SpringBootTest\nclass RepositoryTest {\n\n    @Autowired\n    lateinit var repo: FamTypeGeneralRepository\n\n    @Test\n    fun writeSonProp() {\n        val family = Family(null, Son(null, \"Petya\"), listOf())\n        repo.save(family)\n        val findAll = repo.findAll()\n        println(findAll)\n\n    }\n\n    @Test\n    fun writeDaughProp() {\n        val family = Family(null, Daughter(null, \"Nastya\"), listOf())\n        repo.save(family)\n        val findAll = repo.findAll()\n        println(findAll)\n\n    }\n\n    @Test\n    fun writeAllProp() {\n        val firstChild = Daughter(null, \"Nastya\")\n\n        val family = Family(null, firstChild, listOf(firstChild))\n        repo.save(family)\n        val findAll = repo.findAll()\n        println(findAll)\n\n    }\n\n</code></pre>\n\n<p>The part with one-to-one relation works perfectly so 2 tests pass, I also can load all children if they already written in the base, The problem is: I can't write family entity as cascade.  It produces: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table \"CHILD\" not found; SQL statement:\nupdate child set fam_id=? where id=? [42102-199]</p>\n\n<p>I've tryed this </p>\n\n<pre><code>\n@MappedSuperclass\nabstract class Child(\n        @Id\n        @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = \"schemaGen\")\n        @SequenceGenerator(name = \"schemaGen\", sequenceName = \"TEMP_SEQUENCE\", initialValue = 1, allocationSize = 1)\n        val id: Int? = null,\n\n        var name: String?)\n\n@Entity\n@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\n@Table(schema = \"app_db\", name = \"daugh\")\nclass Daughter(id: Int?, name: String) :\n        Child(id, name)\n\n@Entity\n@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\n@Table(schema = \"app_db\", name = \"son\")\nclass Son(id: Int?, name: String) :\n        Child(id, name)\n\n\n</code></pre>\n\n<p>get org.hibernate.AnnotationException: @OneToOne or @ManyToOne on **.entity.schema.Family.firstChild references an unknown entity: **.entity.schema.Child\nhere is SQL migration</p>\n\n<pre><code>CREATE SEQUENCE TEMP_SEQUENCE;\n\nCREATE TABLE IF NOT EXISTS app_db.son\n(\n    ID INT NOT NULL AUTO_INCREMENT,\n    NAME varchar(250),\n    FAM_ID INT,\n    PRIMARY KEY (ID),\n);\nCREATE TABLE IF NOT EXISTS app_db.daugh\n(\n    ID INT NOT NULL AUTO_INCREMENT,\n    NAME varchar(250),\n    FAM_ID INT,\n    PRIMARY KEY (ID),\n);\nCREATE TABLE IF NOT EXISTS app_db.fam\n(\n    ID INT NOT NULL AUTO_INCREMENT,\n    CHILD_ID INT,\n    PRIMARY KEY (ID),\n);\n\n</code></pre>\n\n<p>Appreciate any help</p>\n"}, {"tags": ["android", "kotlin", "android-menu"], "comments": [{"owner": {"reputation": 1205, "user_id": 2846068, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kHfXv.jpg?s=128&g=1", "display_name": "MasterAler", "link": "https://stackoverflow.com/users/2846068/masteraler"}, "edited": false, "score": 0, "creation_date": 1571779820, "post_id": 58512411, "comment_id": 103352509, "body": "What&#39;s the question? I&#39;n voting this to be a question of &quot;very low quality&quot;."}, {"owner": {"reputation": 2644, "user_id": 2957169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mf8Nx.jpg?s=128&g=1", "display_name": "charles-allen", "link": "https://stackoverflow.com/users/2957169/charles-allen"}, "edited": false, "score": 0, "creation_date": 1571809539, "post_id": 58512411, "comment_id": 103358682, "body": "@Harry Indig - I&#39;ve fixed your code formatting and added the method declaration around it (I assumed this is Android Activity <code>onOptionsItemSelected</code>). You don&#39;t seem to have asked a question though... What is your goal? What have you tried so far?"}], "owner": {"reputation": 1, "user_id": 12259692, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Wx84zwq6j0k/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcLk8MSESAY_13BPKkG4c4M0TJpdQ/photo.jpg?sz=128", "display_name": "Harry Indig", "link": "https://stackoverflow.com/users/12259692/harry-indig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 18, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571811530, "creation_date": 1571778931, "last_edit_date": 1571811530, "question_id": 58512411, "link": "https://stackoverflow.com/questions/58512411/addactivity-delete-all-command-in-menu-bar", "title": "AddActivity delete all command in menu bar", "body": "<pre><code>override fun onOptionsItemSelected(item: MenuItem): Boolean {\n    return when (item.itemId) {\n        R.id.action_delete_all -&gt; {\n            val intent = Intent(this, StatsActivity::class.java)\n            startActivity(intent)\n            true\n        }\n        else -&gt; super.onOptionsItemSelected(item)\n    }\n}\n</code></pre>\n"}, {"tags": ["kotlin", "kotlin-coroutines"], "comments": [{"owner": {"reputation": 2444, "user_id": 287761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UZJAT.png?s=128&g=1", "display_name": "Enselic", "link": "https://stackoverflow.com/users/287761/enselic"}, "edited": false, "score": 0, "creation_date": 1571806924, "post_id": 58512403, "comment_id": 103358033, "body": "For me it does. Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a>. Out of curiosity, what code do you have at ReservationLogWriter.kt:105 ? Also please clarify what you mean with &quot;full stack trace&quot;. Maybe that&#39;s where our definitions diverge."}], "answers": [{"tags": [], "owner": {"reputation": 603, "user_id": 2173085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2065a57247e9cb53fd7525b01c6b903d?s=128&d=identicon&r=PG", "display_name": "Prathmesh Swaroop", "link": "https://stackoverflow.com/users/2173085/prathmesh-swaroop"}, "is_accepted": false, "score": 0, "last_activity_date": 1571815416, "creation_date": 1571815416, "answer_id": 58517544, "question_id": 58512403, "link": "https://stackoverflow.com/questions/58512403/how-to-print-current-stack-trace-inside-a-suspending-function/58517544#58517544", "title": "How to print current stack trace inside a suspending function?", "body": "<p>You can try throwing an exception in suspending function :</p>\n\n<pre><code>suspend fun f() {\n   kotlin.runCatching {\n     //any code that can throw an exception\n     throw Exception()\n     }.onFailure {\n     //print stack trace\n     it.printStackTrace()\n  }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1715, "user_id": 910095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04e96728ed86fffbb7960da7fe34cd47?s=128&d=identicon&r=PG", "display_name": "Nikola Mihajlovi\u0107", "link": "https://stackoverflow.com/users/910095/nikola-mihajlovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1612470312, "post_id": 65909118, "comment_id": 116784624, "body": "The problem was that my exception had custom constructor, and in that case the recovery implementation fails. Check out <code>CopyableThrowable</code>."}], "tags": [], "owner": {"reputation": 101, "user_id": 9706625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9299fb431b2fb627c30d4340258c95c?s=128&d=identicon&r=PG&f=1", "display_name": "pavelperc", "link": "https://stackoverflow.com/users/9706625/pavelperc"}, "is_accepted": true, "score": 1, "last_activity_date": 1611694396, "creation_date": 1611694396, "answer_id": 65909118, "question_id": 58512403, "link": "https://stackoverflow.com/questions/58512403/how-to-print-current-stack-trace-inside-a-suspending-function/65909118#65909118", "title": "How to print current stack trace inside a suspending function?", "body": "<p>Try setting this option:</p>\n<pre><code>System.setProperty(\n    kotlinx.coroutines.DEBUG_PROPERTY_NAME,\n    kotlinx.coroutines.DEBUG_PROPERTY_VALUE_ON\n)\n</code></pre>\n<p>This enables the coroutine debug mode, which recovers the full stacktraces.\nSee more here: <a href=\"https://github.com/Kotlin/kotlinx.coroutines/blob/master/docs/debugging.md\" rel=\"nofollow noreferrer\">https://github.com/Kotlin/kotlinx.coroutines/blob/master/docs/debugging.md</a></p>\n"}], "owner": {"reputation": 1715, "user_id": 910095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04e96728ed86fffbb7960da7fe34cd47?s=128&d=identicon&r=PG", "display_name": "Nikola Mihajlovi\u0107", "link": "https://stackoverflow.com/users/910095/nikola-mihajlovi%c4%87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 352, "favorite_count": 0, "accepted_answer_id": 65909118, "answer_count": 2, "score": 1, "last_activity_date": 1611694396, "creation_date": 1571778872, "question_id": 58512403, "link": "https://stackoverflow.com/questions/58512403/how-to-print-current-stack-trace-inside-a-suspending-function", "title": "How to print current stack trace inside a suspending function?", "body": "<p>How can I print current stack trace inside a suspending function?</p>\n\n<p>If I try the usual way:</p>\n\n<pre><code>    suspend fun f() {\n        Exception().printStackTrace()\n    }\n</code></pre>\n\n<p>It will print something like:</p>\n\n<pre><code>java.lang.Exception\n    at car2share.sync.reservations.ReservationLogWriter.write(ReservationLogWriter.kt:105)\n    at car2share.sync.reservations.ReservationLogWriter$write$2.invokeSuspend(ReservationLogWriter.kt)\n    at kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:33)\n    at kotlinx.coroutines.DispatchedTask.run(Dispatched.kt:241)\n    at kotlinx.coroutines.EventLoopImplBase.processNextEvent(EventLoop.common.kt:270)\n    at kotlinx.coroutines.BlockingCoroutine.joinBlocking(Builders.kt:79)\n    at kotlinx.coroutines.BuildersKt__BuildersKt.runBlocking(Builders.kt:54)\n    at kotlinx.coroutines.BuildersKt.runBlocking(Unknown Source)\n    at kotlinx.coroutines.BuildersKt__BuildersKt.runBlocking$default(Builders.kt:36)\n    at kotlinx.coroutines.BuildersKt.runBlocking$default(Unknown Source)\n</code></pre>\n\n<p>Which does not contain the full stack trace.</p>\n"}, {"tags": ["api", "generics", "kotlin", "kotlin-coroutines", "retrofit2.6"], "comments": [{"owner": {"reputation": 603, "user_id": 2173085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2065a57247e9cb53fd7525b01c6b903d?s=128&d=identicon&r=PG", "display_name": "Prathmesh Swaroop", "link": "https://stackoverflow.com/users/2173085/prathmesh-swaroop"}, "edited": false, "score": 0, "creation_date": 1571818136, "post_id": 58511846, "comment_id": 103362565, "body": "Can you please try using version retrofit_version = &quot;2.6.2&quot; ,  for me it&#39;s working fine without using @JvmSuppressWildcards"}, {"owner": {"reputation": 11, "user_id": 12232907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/302defc61932249f765751cf2969ba8e?s=128&d=identicon&r=PG&f=1", "display_name": "Fragening", "link": "https://stackoverflow.com/users/12232907/fragening"}, "reply_to_user": {"reputation": 603, "user_id": 2173085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2065a57247e9cb53fd7525b01c6b903d?s=128&d=identicon&r=PG", "display_name": "Prathmesh Swaroop", "link": "https://stackoverflow.com/users/2173085/prathmesh-swaroop"}, "edited": false, "score": 0, "creation_date": 1572097857, "post_id": 58511846, "comment_id": 103459588, "body": "I have it on the newest version and it still dosnt work for me. The strange thing is that it should work, but dosnt,"}], "owner": {"reputation": 11, "user_id": 12232907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/302defc61932249f765751cf2969ba8e?s=128&d=identicon&r=PG&f=1", "display_name": "Fragening", "link": "https://stackoverflow.com/users/12232907/fragening"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1571776167, "creation_date": 1571776167, "question_id": 58511846, "link": "https://stackoverflow.com/questions/58511846/kotlin-generic-post-request", "title": "Kotlin generic post request", "body": "<p>Hio, i\u00b4m working on a generic interface for Retrofit API calls in Kotlin. I\u00b4m kinda new to Kotlin and i feel like i\u00b4m missing something important. i tried to search for a solution but didnt found one.</p>\n\n<p>This is my interface</p>\n\n<pre><code>@JvmSuppressWildcards\ninterface GenericApiRequest {\n\n@POST(\"/stuff\")\nsuspend fun &lt;TIn, TOut&gt;getResponse(@Body request: TIn) : TOut\n}\n</code></pre>\n\n<p>This the code where i use it</p>\n\n<pre><code>val response = client.getResponse&lt;RequestDataClass, ResponseDataClass&gt;(RequestDataClass(\"stuff\"))\n</code></pre>\n\n<p>This is the Error I get:</p>\n\n<pre><code>Parameter type must not include a type variable or wildcard: TIn (parameter #1)\n    for method GenericApiRequest.getResponse\n</code></pre>\n\n<p>I thought it would be solved by the @JvmSuppressWildcards but it didnt helped. Has someone a solution for this?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1571765643, "post_id": 58509167, "comment_id": 103346919, "body": "Need more info. Is a Week always an exhaustive list of seven specific consecutive dates? Are Days simply dates (I&#39;m thinking no, because they can be moved) or events with a time? Are there sometimes gaps between Weeks because there are no Days in some weeks?"}, {"owner": {"reputation": 1933, "user_id": 2279862, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/3YRDE.jpg?s=128&g=1", "display_name": "zoltish", "link": "https://stackoverflow.com/users/2279862/zoltish"}, "reply_to_user": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1571766622, "post_id": 58509167, "comment_id": 103347314, "body": "Thats my bad. There arent any constraints on the lists, e.g. there can be any number of &quot;days&quot; in a given week for this particular scenario."}], "answers": [{"comments": [{"owner": {"reputation": 1933, "user_id": 2279862, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/3YRDE.jpg?s=128&g=1", "display_name": "zoltish", "link": "https://stackoverflow.com/users/2279862/zoltish"}, "edited": false, "score": 0, "creation_date": 1571766455, "post_id": 58509618, "comment_id": 103347237, "body": "Youre on the right track! I chose a horrible example by using days above (sorry): so please consider them special weeks where there can be any number of days. I think that complicates things quite a bit?"}, {"owner": {"reputation": 1427, "user_id": 1815052, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bed5ab71b8d23d9bf07a5fa12915699c?s=128&d=identicon&r=PG", "display_name": "SqueezyMo", "link": "https://stackoverflow.com/users/1815052/squeezymo"}, "reply_to_user": {"reputation": 1933, "user_id": 2279862, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/3YRDE.jpg?s=128&g=1", "display_name": "zoltish", "link": "https://stackoverflow.com/users/2279862/zoltish"}, "edited": false, "score": 1, "creation_date": 1571767502, "post_id": 58509618, "comment_id": 103347696, "body": "Well, there is an obvious solution (iterating over rows and subtracting their sizes from k until k &lt; row.size) but it couldn&#39;t be less elegant :("}], "tags": [], "owner": {"reputation": 1427, "user_id": 1815052, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bed5ab71b8d23d9bf07a5fa12915699c?s=128&d=identicon&r=PG", "display_name": "SqueezyMo", "link": "https://stackoverflow.com/users/1815052/squeezymo"}, "is_accepted": false, "score": 1, "last_activity_date": 1571765784, "creation_date": 1571765784, "answer_id": 58509618, "question_id": 58509167, "link": "https://stackoverflow.com/questions/58509167/moving-items-in-nested-list-overflowing-to-previous-next-index-of-parent-list-i/58509618#58509618", "title": "Moving items in nested list, overflowing to previous/next index of parent list if needed?", "body": "<p>I'm not sure if I understood your problem properly but I'll give it a try anyway.</p>\n\n<p>Basically, you have a matrix <code>NxM</code> (where <code>N=7</code> and <code>M=weeks.size</code>) where each row represents a week.</p>\n\n<p>Suppose you have a day with index <code>(i0,j0)</code> which you want to move <code>k</code> positions forward (or backward if <code>k</code> is negative). So you just need to calculate new target index <code>(i1,j1)</code> based on this input.</p>\n\n<p>It's easy to see that <code>(i1,j1) = (i0 + k/N, j0 + k%N)</code></p>\n\n<pre><code>fun getNewPosition(src: Point, k: Int): Point {\n    return Point(src.x + k/7, src.y + k%7)\n}\n</code></pre>\n\n<p><code>point.x</code> is the number of week and <code>point.y</code> is the number of day.</p>\n\n<p>Now you need to decide what you should do</p>\n\n<ol>\n<li><p>if you don't have that index in your structure,   </p></li>\n<li><p>if you already have a day with that index.</p></li>\n</ol>\n"}], "owner": {"reputation": 1933, "user_id": 2279862, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/3YRDE.jpg?s=128&g=1", "display_name": "zoltish", "link": "https://stackoverflow.com/users/2279862/zoltish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571765784, "creation_date": 1571763812, "question_id": 58509167, "link": "https://stackoverflow.com/questions/58509167/moving-items-in-nested-list-overflowing-to-previous-next-index-of-parent-list-i", "title": "Moving items in nested list, overflowing to previous/next index of parent list if needed?", "body": "<p>I have a <code>List&lt;Week&gt;</code> where each <code>Week</code> has a <code>List&lt;Day&gt;</code>.</p>\n\n<p>My intention is to move a specific day by N indexes; and if that lands it outside of the current week it resides in - move it to the appropiate week. </p>\n\n<p>How would I go about doing this?</p>\n\n<hr>\n\n<p><em>Ive tried flatMapping the list of weeks, so that all days are laid out in one giant list and I can simply move the day in that list. This works, but I end up with a new list of days and I have no idea how Id put it back together.</em> </p>\n"}, {"tags": ["java", "spring", "spring-boot", "kotlin", "jackson"], "comments": [{"owner": {"reputation": 2644, "user_id": 2957169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mf8Nx.jpg?s=128&g=1", "display_name": "charles-allen", "link": "https://stackoverflow.com/users/2957169/charles-allen"}, "edited": false, "score": 0, "creation_date": 1571809822, "post_id": 58508938, "comment_id": 103358778, "body": "Are you deserializing only, or also serializing? If you are serializing back to JSON you absolutely need to annotate the fields (since the Java field is absent information on which case to use)."}, {"owner": {"reputation": 2644, "user_id": 2957169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mf8Nx.jpg?s=128&g=1", "display_name": "charles-allen", "link": "https://stackoverflow.com/users/2957169/charles-allen"}, "edited": false, "score": 0, "creation_date": 1571810014, "post_id": 58508938, "comment_id": 103358843, "body": "Assuming you are only deserializing, I imagine you can write a custom naming strategy, the delegates to SNAKE_CASE if the key contains an &quot;_&quot;, and delegates to lowerCamelCase otherwise. There seems to be an example here (minus the delegation, but hopefully you can just construct each built-in naming strategy): <a href=\"https://dzone.com/articles/jackson-property-custom-naming-strategy\" rel=\"nofollow noreferrer\">dzone.com/articles/jackson-property-custom-naming-strategy</a> (apologies, I&#39;m not an expert)."}, {"owner": {"reputation": 8853, "user_id": 1022260, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/27a141cb4a1a2f49d43bc09a5fa742b2?s=128&d=identicon&r=PG&f=1", "display_name": "mikeb", "link": "https://stackoverflow.com/users/1022260/mikeb"}, "reply_to_user": {"reputation": 2644, "user_id": 2957169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mf8Nx.jpg?s=128&g=1", "display_name": "charles-allen", "link": "https://stackoverflow.com/users/2957169/charles-allen"}, "edited": false, "score": 0, "creation_date": 1571835936, "post_id": 58508938, "comment_id": 103372045, "body": "I am only deserializing - I might try that when I get some time..."}], "owner": {"reputation": 8853, "user_id": 1022260, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/27a141cb4a1a2f49d43bc09a5fa742b2?s=128&d=identicon&r=PG&f=1", "display_name": "mikeb", "link": "https://stackoverflow.com/users/1022260/mikeb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1571762889, "creation_date": 1571762889, "question_id": 58508938, "link": "https://stackoverflow.com/questions/58508938/jackson-converter-web-service-is-mixed-camel-case-and-underscores-can-i-have", "title": "Jackson Converter - web service is mixed camel case and underscores - can I have multipole naming strategy", "body": "<p>I have a class:</p>\n\n<pre><code>class Person {\n\n  String firstName;\n  String lastName;\n\n  // Getters and stuff\n}\n</code></pre>\n\n<p>My JSON from the web service is like <code>'{\"firstName\": \"Mike\", \"last_name\": \"Last\"}'</code></p>\n\n<p>Is there a way to configure Jackson to convert without annotating each field with its format with a <code>JsonProperty</code> annotation?  This is a contrived example but my \"real\" web service has loads of fields.</p>\n\n<p>If I use the default case, I get firstName set and lastName null, and if I get SNAKE_CASE I get the opposite.</p>\n\n<p>Can I have it try both?</p>\n\n<p>Here's the (kotlin) configuration for the mapper I'm using, currently last_name gets set and firstName does not:</p>\n\n<pre><code>@Bean\nfun mappingJackson2HttpMessageConverter(): MappingJackson2HttpMessageConverter {\n    val jsonConverter = MappingJackson2HttpMessageConverter()\n    val objectMapper = Jackson2ObjectMapperBuilder()\n            .modules(KotlinModule())\n            .build&lt;ObjectMapper&gt;()\n            .setVisibility(PropertyAccessor.SETTER, JsonAutoDetect.Visibility.ANY)\n            .setVisibility(PropertyAccessor.CREATOR, JsonAutoDetect.Visibility.ANY)\n            .setPropertyNamingStrategy(PropertyNamingStrategy.SNAKE_CASE)\n            .configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false)\n    jsonConverter.objectMapper = objectMapper\n    return jsonConverter\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "layout", "dialog", "android-constraintlayout"], "comments": [{"owner": {"reputation": 30326, "user_id": 384306, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ZED8P.jpg?s=128&g=1", "display_name": "Nathan Schwermann", "link": "https://stackoverflow.com/users/384306/nathan-schwermann"}, "edited": false, "score": 1, "creation_date": 1571761789, "post_id": 58508111, "comment_id": 103345133, "body": "Did you select the style you are using in the XML editor to FullScreenDialog? If not it&#39;ll be set to the default AppTheme"}, {"owner": {"reputation": 2060, "user_id": 3524475, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Q4zUo.jpg?s=128&g=1", "display_name": "ghita", "link": "https://stackoverflow.com/users/3524475/ghita"}, "reply_to_user": {"reputation": 30326, "user_id": 384306, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ZED8P.jpg?s=128&g=1", "display_name": "Nathan Schwermann", "link": "https://stackoverflow.com/users/384306/nathan-schwermann"}, "edited": false, "score": 0, "creation_date": 1571815991, "post_id": 58508111, "comment_id": 103361535, "body": "i don&#39;t know how to do that"}, {"owner": {"reputation": 30326, "user_id": 384306, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ZED8P.jpg?s=128&g=1", "display_name": "Nathan Schwermann", "link": "https://stackoverflow.com/users/384306/nathan-schwermann"}, "edited": false, "score": 0, "creation_date": 1571850758, "post_id": 58508111, "comment_id": 103380060, "body": "I added an answer with a pic for you. Hope it helps :-)"}], "answers": [{"tags": [], "owner": {"reputation": 30326, "user_id": 384306, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ZED8P.jpg?s=128&g=1", "display_name": "Nathan Schwermann", "link": "https://stackoverflow.com/users/384306/nathan-schwermann"}, "is_accepted": true, "score": 1, "last_activity_date": 1571850738, "creation_date": 1571850738, "answer_id": 58527905, "question_id": 58508111, "link": "https://stackoverflow.com/questions/58508111/dialog-full-screen-layout-issue/58527905#58527905", "title": "Dialog full screen layout issue", "body": "<p>Sounds like you need to update the preview style in the xml viewer. I highlighted the drop down box to use in the current release of AndroidStudio.</p>\n\n<p><a href=\"https://i.stack.imgur.com/yJHe7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yJHe7.png\" alt=\"Click dropdown box to change preview style\"></a></p>\n"}], "owner": {"reputation": 2060, "user_id": 3524475, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Q4zUo.jpg?s=128&g=1", "display_name": "ghita", "link": "https://stackoverflow.com/users/3524475/ghita"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "accepted_answer_id": 58527905, "answer_count": 1, "score": 0, "last_activity_date": 1571850738, "creation_date": 1571759788, "question_id": 58508111, "link": "https://stackoverflow.com/questions/58508111/dialog-full-screen-layout-issue", "title": "Dialog full screen layout issue", "body": "<p>The layout in a full screen dialog is not rendered properly.</p>\n\n<p>This is my dialog code:</p>\n\n<p>val mDialogView = LayoutInflater.from(this).inflate(R.layout.alertdialog_info, null)</p>\n\n<pre><code>    val mBuilder = AlertDialog.Builder(this, R.style.FullScreenDialog)\n            .setView(mDialogView)\n\n    val mAlertDialog = mBuilder.show()\n\n    mDialogView.titleTv.text = getString(R.string.title)\n    mDialogView.descriptionTv.text = getString(R.string.description)\n\n    mAlertDialog.show()\n</code></pre>\n\n<p>in style.xml this is my FullScreenDialog:</p>\n\n<pre><code>&lt;style name=\"FullScreenDialog\" parent=\"android:Theme.Dialog\"&gt;\n    &lt;item name=\"android:layout_width\"&gt;match_parent&lt;/item&gt;\n    &lt;item name=\"android:layout_height\"&gt;match_parent&lt;/item&gt;\n    &lt;item name=\"android:windowBackground\"&gt;@color/md_white_1000&lt;/item&gt;\n    &lt;item name=\"android:windowNoTitle\"&gt;true&lt;/item&gt;\n    &lt;item name=\"android:windowFullscreen\"&gt;true&lt;/item&gt;\n    &lt;item name=\"android:windowIsFloating\"&gt;false&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n\n<p>And this is my layout:</p>\n\n<pre><code> &lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n    &lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        xmlns:tools=\"http://schemas.android.com/tools\"\n        android:paddingTop=\"16dp\"\n        android:gravity=\"bottom\"\n        android:layout_marginStart=\"16dp\"\n        android:layout_marginEnd=\"16dp\"\n        xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n        android:background=\"@color/md_white_1000\"&gt;\n\n                &lt;ImageView\n                    android:id=\"@+id/iconIv\"\n                    android:layout_width=\"wrap_content\"\n                    android:layout_height=\"wrap_content\"\n                    android:layout_marginBottom=\"50dp\"\n                    android:src=\"@drawable/ic_success\"\n                    app:layout_constraintEnd_toEndOf=\"parent\"\n                    app:layout_constraintStart_toStartOf=\"parent\"\n                    app:layout_constraintBottom_toTopOf=\"@id/titleTv\" /&gt;\n\n                &lt;TextView\n                    android:id=\"@+id/titleTv\"\n                    style=\"@style/FontLocalizedBold\"\n                    android:layout_width=\"wrap_content\"\n                    android:layout_height=\"wrap_content\"\n                    tools:text=\"@string/payment_success\"\n                    android:textColor=\"@color/colorTextPrimary\"\n                    android:textSize=\"24sp\"\n                    android:layout_marginStart=\"24dp\"\n                    android:gravity=\"center\"\n                    android:layout_marginEnd=\"24dp\"\n                    android:maxLines=\"2\"\n                    android:layout_marginTop=\"16dp\"\n                    app:layout_constraintEnd_toEndOf=\"parent\"\n                    app:layout_constraintStart_toStartOf=\"parent\"\n                    app:layout_constraintTop_toTopOf=\"parent\"\n                    app:layout_constraintBottom_toBottomOf=\"parent\" /&gt;\n\n\n                &lt;TextView\n                    android:id=\"@+id/descriptionTv\"\n                    style=\"@style/FontLocalizedMedium\"\n                    android:layout_width=\"wrap_content\"\n                    android:layout_height=\"wrap_content\"\n                    android:layout_marginStart=\"24dp\"\n                    android:layout_marginTop=\"48dp\"\n                    android:layout_marginEnd=\"24dp\"\n                    android:gravity=\"center\"\n                    tools:text=\"@string/payment_success_description\"\n                    android:textSize=\"17sp\"\n                    app:layout_constraintEnd_toEndOf=\"parent\"\n                    app:layout_constraintStart_toStartOf=\"parent\"\n                    app:layout_constraintTop_toBottomOf=\"@id/titleTv\" /&gt;\n\n                &lt;TextView\n                    android:id=\"@+id/okTv\"\n                    style=\"@style/ButtonTextView\"\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"wrap_content\"\n                    android:layout_marginStart=\"16dp\"\n                    android:layout_marginEnd=\"16dp\"\n                    android:paddingBottom=\"16dp\"\n                    android:background=\"@drawable/save_button_active\"\n                    android:text=\"@string/done\"\n                    app:layout_constraintBottom_toBottomOf=\"parent\" /&gt;\n\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n\n<p>I have tried with LinearLayout instead of ConstraintLayout, but same result.</p>\n\n<p>I have attached pictures with how my xml file look, and how it looks rendered on emulator, ignore please different string values.</p>\n\n<p>emulator:\n<a href=\"https://i.stack.imgur.com/do8y2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/do8y2.png\" alt=\"emulator\"></a></p>\n\n<p>xml:\n<a href=\"https://i.stack.imgur.com/pMoAe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pMoAe.png\" alt=\"xml\"></a></p>\n\n<p>Any idea what can cause the difference in rendering?</p>\n"}, {"tags": ["javafx", "kotlin", "tornadofx"], "answers": [{"tags": [], "owner": {"reputation": 32425, "user_id": 1054140, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uKs9u.jpg?s=128&g=1", "display_name": "Sergey Grinev", "link": "https://stackoverflow.com/users/1054140/sergey-grinev"}, "is_accepted": false, "score": 0, "last_activity_date": 1571996015, "creation_date": 1571996015, "answer_id": 58555880, "question_id": 58507615, "link": "https://stackoverflow.com/questions/58507615/how-do-i-make-this-javafx-binding-fire-more-than-once/58555880#58555880", "title": "How do I make this JavaFX binding fire more than once?", "body": "<p>It looks like a race condition. Binding works asynchronously it may not have a chance to fire listeners before you assert value. </p>\n\n<p>Especially if testing code is being run on JavaFX Application thread.</p>\n"}], "owner": {"reputation": 121, "user_id": 481002, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3a8c50ed81323e54f8ec4e850d725535?s=128&d=identicon&r=PG", "display_name": "Lifto", "link": "https://stackoverflow.com/users/481002/lifto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1571996015, "creation_date": 1571757999, "last_edit_date": 1571764772, "question_id": 58507615, "link": "https://stackoverflow.com/questions/58507615/how-do-i-make-this-javafx-binding-fire-more-than-once", "title": "How do I make this JavaFX binding fire more than once?", "body": "<p>Why does this binding not trigger its associated code when the source data it is bound to is updated the second time? </p>\n\n<p>It seems to me that every change of any TestObj's 'name' field should result in testProperty1 showing the 3rd element's name. In this case it shows the name after binding, and after the first update, but after the second update it still shows the name from the first update. How do I get it to update testProperty1 every time a TestObj is changed?</p>\n\n<pre><code>class TestObj {\n    var name by property&lt;String&gt;()\n    fun nameProperty() = getProperty(TestObj::name)\n}\n\nclass TestBase {\n    var testObjs by property&lt;List&lt;TestObj&gt;&gt;()\n    fun testObjsProperty() = getProperty(TestBase::testObjs)\n}\n\nclass TestBaseModel: ItemViewModel&lt;TestBase&gt;(TestBase()) {\n    val objects: ListProperty&lt;TestObj&gt; =\n        bind(autocommit = true) { item?.testObjsProperty() } as ListProperty&lt;TestObj&gt;\n\n    fun observableObjs(): StringBinding {\n        val observableObjs = FXCollections.observableList(objects) { o: TestObj -&gt;\n            arrayOf&lt;Observable&gt;(\n                o.nameProperty()\n            )\n        }\n        return stringBinding(observableObjs, objects) {\n            (observableObjs.map {\n                it.name\n            }).joinToString()\n        }\n    }\n}\n\nval testProperty1 = SimpleStringProperty()\ntestProperty1.value = \"unset\"\n\nval base = TestBaseModel()\nfor (i in 0..4) {\n    base.objects.add(TestObj().apply{\n        name = \"$i\"\n    })\n}\n\nassertEquals(\"unset\", testProperty1.value)\n\ntestProperty1.bind(stringBinding(base.observableObjs()) {\n    base.objects[2].name\n})\n\nassertEquals(\"2\", testProperty1.value)\n\nbase.objects[2].name = \"a\"\n\nassertEquals(\"a\", testProperty1.value)\n\nbase.objects[2].name = \"ab\"\n\n// This assertion fails, claims value is still \"a\"\nassertEquals(\"ab\", testProperty1.value)\n\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-location", "fusedlocationproviderapi", "android-fusedlocation"], "comments": [{"owner": {"reputation": 23192, "user_id": 2684, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Z9oZ0.jpg?s=128&g=1", "display_name": "Martin Marconcini", "link": "https://stackoverflow.com/users/2684/martin-marconcini"}, "edited": false, "score": 0, "creation_date": 1571758195, "post_id": 58506554, "comment_id": 103343278, "body": "You cannot change the dialog. It&#39;s a google thing. But you can detect if the services are turned off and elect to show a dialog asking user to go to settings and enable it for you (or you can send the user to the settings if you desire to do so). But the dialog is there to prevent malicious apps from silently enabling the location services without user intervention. As far as <b>I</b> recall, you cannot turn Location Services from your code, you can -at the very best- send the user to the Settings so she/he can do it on your behalf."}, {"owner": {"reputation": 214, "user_id": 10257053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9132cb7ede7211ac69a20082623526a3?s=128&d=identicon&r=PG&f=1", "display_name": "hamrosvet", "link": "https://stackoverflow.com/users/10257053/hamrosvet"}, "reply_to_user": {"reputation": 23192, "user_id": 2684, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Z9oZ0.jpg?s=128&g=1", "display_name": "Martin Marconcini", "link": "https://stackoverflow.com/users/2684/martin-marconcini"}, "edited": false, "score": 0, "creation_date": 1571758637, "post_id": 58506554, "comment_id": 103343512, "body": "I have seen apps that can automatically enable location services from a custom alert dialog (the default weather app on Samsung phones for example)."}, {"owner": {"reputation": 23192, "user_id": 2684, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Z9oZ0.jpg?s=128&g=1", "display_name": "Martin Marconcini", "link": "https://stackoverflow.com/users/2684/martin-marconcini"}, "edited": false, "score": 0, "creation_date": 1571758749, "post_id": 58506554, "comment_id": 103343568, "body": "I don&#39;t have a Samsung device (and I&#39;m glad for it), but if the <b>default Samsung app</b> is doing it, <b>on Samsung phones</b>, then that&#39;s your cue: they can do whatever they want, so as long as they control their hardware and most of their software. Samsung is known to have done many smart and very stupid things on Android. This may as well be something Samsung does. Try the same app o a non Samsung phone. ;-)"}, {"owner": {"reputation": 23192, "user_id": 2684, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Z9oZ0.jpg?s=128&g=1", "display_name": "Martin Marconcini", "link": "https://stackoverflow.com/users/2684/martin-marconcini"}, "edited": false, "score": 0, "creation_date": 1571758983, "post_id": 58506554, "comment_id": 103343722, "body": "Have you taken a look at <a href=\"https://stackoverflow.com/q/33251373/2684\">this Stack Overflow question/answer</a> for example?"}, {"owner": {"reputation": 214, "user_id": 10257053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9132cb7ede7211ac69a20082623526a3?s=128&d=identicon&r=PG&f=1", "display_name": "hamrosvet", "link": "https://stackoverflow.com/users/10257053/hamrosvet"}, "reply_to_user": {"reputation": 23192, "user_id": 2684, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Z9oZ0.jpg?s=128&g=1", "display_name": "Martin Marconcini", "link": "https://stackoverflow.com/users/2684/martin-marconcini"}, "edited": false, "score": 0, "creation_date": 1571762985, "post_id": 58506554, "comment_id": 103345698, "body": "I did but it didn&#39;t help me do what i wanted so I decided to post this as a separate question."}], "answers": [{"comments": [{"owner": {"reputation": 214, "user_id": 10257053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9132cb7ede7211ac69a20082623526a3?s=128&d=identicon&r=PG&f=1", "display_name": "hamrosvet", "link": "https://stackoverflow.com/users/10257053/hamrosvet"}, "edited": false, "score": 0, "creation_date": 1571757490, "post_id": 58506873, "comment_id": 103342901, "body": "This method doesn&#39;t enable the location services automatically but instead takes the user to settings screen where it has to be enabled manually. Is it possible to turn the location services on directly from the alert dialog itself?"}, {"owner": {"reputation": 409, "user_id": 4042384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30dcfc6e45296877ba4c08ddbfabb25f?s=128&d=identicon&r=PG&f=1", "display_name": "Ghanshyam", "link": "https://stackoverflow.com/users/4042384/ghanshyam"}, "reply_to_user": {"reputation": 214, "user_id": 10257053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9132cb7ede7211ac69a20082623526a3?s=128&d=identicon&r=PG&f=1", "display_name": "hamrosvet", "link": "https://stackoverflow.com/users/10257053/hamrosvet"}, "edited": false, "score": 0, "creation_date": 1571758935, "post_id": 58506873, "comment_id": 103343682, "body": "yes it is possible to on off the location directly, i have update the above code please check and try. you can use turnGPSOn() method if you want directly"}, {"owner": {"reputation": 214, "user_id": 10257053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9132cb7ede7211ac69a20082623526a3?s=128&d=identicon&r=PG&f=1", "display_name": "hamrosvet", "link": "https://stackoverflow.com/users/10257053/hamrosvet"}, "edited": false, "score": 0, "creation_date": 1571759667, "post_id": 58506873, "comment_id": 103344115, "body": "Thanks but it is not working for me (testing on API 26 Oreo). Also, Settings.Secure.LOCATION_PROVIDERS_ALLOWED is deprecated."}, {"owner": {"reputation": 409, "user_id": 4042384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30dcfc6e45296877ba4c08ddbfabb25f?s=128&d=identicon&r=PG&f=1", "display_name": "Ghanshyam", "link": "https://stackoverflow.com/users/4042384/ghanshyam"}, "reply_to_user": {"reputation": 214, "user_id": 10257053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9132cb7ede7211ac69a20082623526a3?s=128&d=identicon&r=PG&f=1", "display_name": "hamrosvet", "link": "https://stackoverflow.com/users/10257053/hamrosvet"}, "edited": false, "score": 0, "creation_date": 1571812317, "post_id": 58506873, "comment_id": 103359724, "body": "put this permission and try  &lt;uses-permission android:name=&quot;android.permission.WRITE_SETTINGS&quot;/&gt; &lt;uses-permission android:name=&quot;android.permission.WRITE_SECURE_SETTINGS&quot;/&gt;"}], "tags": [], "owner": {"reputation": 409, "user_id": 4042384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30dcfc6e45296877ba4c08ddbfabb25f?s=128&d=identicon&r=PG&f=1", "display_name": "Ghanshyam", "link": "https://stackoverflow.com/users/4042384/ghanshyam"}, "is_accepted": false, "score": 0, "last_activity_date": 1571759069, "last_edit_date": 1571759069, "creation_date": 1571755594, "answer_id": 58506873, "question_id": 58506554, "link": "https://stackoverflow.com/questions/58506554/customise-alert-message-for-location-services-when-using-fusedlocationproviderap/58506873#58506873", "title": "Customise alert message for Location Services when using FusedLocationProviderApi", "body": "<p>Try the below line of code</p>\n\n<pre><code>public void checkGpsStatus() {\n        try {\n            LocationRequest locationRequest = LocationRequest.create();\n            locationRequest.setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY);\n            locationRequest.setInterval(30 * 1000);\n            locationRequest.setFastestInterval(5 * 1000);\n            LocationSettingsRequest.Builder builder = new LocationSettingsRequest.Builder().addLocationRequest(locationRequest);\n\n            PendingResult&lt;LocationSettingsResult&gt; result = LocationServices.SettingsApi.checkLocationSettings(mGoogleApiClientHome,   builder.build());\n            result.setResultCallback(new ResultCallback&lt;LocationSettingsResult&gt;() {\n                @Override\n                public void onResult(LocationSettingsResult result) {\n\n                    final Status status = result.getStatus();\n                    final LocationSettingsStates state = result.getLocationSettingsStates();\n\n                    switch (status.getStatusCode()) {\n                        case LocationSettingsStatusCodes.SUCCESS:\n                            hideGpsEnablDialog();\n                            break;\n\n                        case LocationSettingsStatusCodes.RESOLUTION_REQUIRED:\n                            displayPromptForEnablingGPSSecond(MainActivity.this);\n                            break;\n\n                        case LocationSettingsStatusCodes.SETTINGS_CHANGE_UNAVAILABLE:\n\n                            break;\n                    }\n                }\n            });\n        } catch (SecurityException e) {\n            e.printStackTrace();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    public Dialog locationDialog;\n    public boolean isDialogopen;\n    public void displayPromptForEnablingGPSSecond(final Activity activity) {\n        if (isDialogopen) {\n            return;\n        }\n        final String action = Settings.ACTION_LOCATION_SOURCE_SETTINGS;\n        try {\n            locationDialog = new Dialog(activity);\n            locationDialog.requestWindowFeature(Window.FEATURE_NO_TITLE);\n            locationDialog.setContentView(R.layout.dialog_confirm_type1);\n            locationDialog.setCancelable(false);\n            locationDialog.setCanceledOnTouchOutside(false);\n            int width = activity.getWindowManager().getDefaultDisplay()\n                    .getWidth();\n            width = width - 80;\n            locationDialog.getWindow().setLayout(width, ActionBar.LayoutParams.WRAP_CONTENT);\n\n            TextView tv_message = (TextView) locationDialog\n                    .findViewById(R.id.tv_message);\n\n            tv_message.setText(\"\"+getResources().getString(R.string.gps_enable_message));\n\n            final TextView tv_ok = (TextView) locationDialog\n                    .findViewById(R.id.tv_ok);\n\n            final TextView tv_cancel = (TextView) locationDialog\n                    .findViewById(R.id.tv_cancel);\n\n            tv_ok.setOnClickListener(new View.OnClickListener() {\n                @Override\n                public void onClick(View v) {\n                    isDialogopen = false;\n                    activity.startActivityForResult(new Intent(action), 11);\n                    locationDialog.dismiss();\n                }\n            });\n\n            tv_cancel.setOnClickListener(new View.OnClickListener() {\n                @Override\n                public void onClick(View v) {\n                    isDialogopen = false;\n                    hideGpsEnablDialog();\n                }\n            });\n            locationDialog.show();\n            isDialogopen = true;\n        } catch (Exception e) {\n            ExceptionHandler.printStackTrace(e);\n        }\n    }\n\n    public void hideGpsEnablDialog() {\n        try {\n            if (locationDialog != null &amp;&amp; locationDialog.isShowing()) {\n                locationDialog.dismiss();\n            }\n            isDialogopen = false;\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\nprivate void turnGPSOn(){\n    String provider = Settings.Secure.getString(getContentResolver(), Settings.Secure.LOCATION_PROVIDERS_ALLOWED);\n\n    if(!provider.contains(\"gps\")){ \n        final Intent poke = new Intent();\n        poke.setClassName(\"com.android.settings\", \"com.android.settings.widget.SettingsAppWidgetProvider\"); \n        poke.addCategory(Intent.CATEGORY_ALTERNATIVE);\n        poke.setData(Uri.parse(\"3\")); \n        sendBroadcast(poke);\n    }\n}\n\nprivate void turnGPSOff(){\n    String provider = Settings.Secure.getString(getContentResolver(), Settings.Secure.LOCATION_PROVIDERS_ALLOWED);\n\n    if(provider.contains(\"gps\")){\n        final Intent poke = new Intent();\n        poke.setClassName(\"com.android.settings\", \"com.android.settings.widget.SettingsAppWidgetProvider\");\n        poke.addCategory(Intent.CATEGORY_ALTERNATIVE);\n        poke.setData(Uri.parse(\"3\")); \n        sendBroadcast(poke);\n    }\n}\n</code></pre>\n\n<p>Hope it will help for you</p>\n"}], "owner": {"reputation": 214, "user_id": 10257053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9132cb7ede7211ac69a20082623526a3?s=128&d=identicon&r=PG&f=1", "display_name": "hamrosvet", "link": "https://stackoverflow.com/users/10257053/hamrosvet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1571759069, "creation_date": 1571754618, "last_edit_date": 1571755096, "question_id": 58506554, "link": "https://stackoverflow.com/questions/58506554/customise-alert-message-for-location-services-when-using-fusedlocationproviderap", "title": "Customise alert message for Location Services when using FusedLocationProviderApi", "body": "<p>I am using <code>Fused Location Provider API</code> to get <code>device location</code> in my project. When the location services are off it shows an <code>alert dialog</code> asking the user to turn it on. </p>\n\n<p><strong>Is there any way to customize this alert dialog to show a different message?</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/1iqzc.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1iqzc.jpg\" alt=\"dialog\"></a></p>\n\n<p>Code:</p>\n\n<pre><code>LocationServices.getSettingsClient(this)\n            .checkLocationSettings(locationRequestBuilder.build())\n            .addOnCompleteListener {\n                try { \n                    it.getResult(ApiException::class.java)\n                    // Location settings are On\n                } catch (exception: ApiException) { // Location settings are Off\n                    when (exception.statusCode) {\n                        RESOLUTION_REQUIRED -&gt; try { // Check result in onActivityResult\n                            val resolvable = exception as ResolvableApiException\n                            resolvable.startResolutionForResult(this, LOCATION_REQUEST_CODE)\n                        } catch (ignored: IntentSender.SendIntentException) {\n                        } catch (ignored: ClassCastException) {\n                        } \n                        // Location settings are not available on device\n                    }\n                }\n            }\n</code></pre>\n"}, {"tags": ["android", "kotlin", "webview"], "comments": [{"owner": {"reputation": 1106, "user_id": 6795368, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d143ab3f3cca6a127b01bd03e22ac2f9?s=128&d=identicon&r=PG&f=1", "display_name": "Den", "link": "https://stackoverflow.com/users/6795368/den"}, "edited": false, "score": 0, "creation_date": 1571751987, "post_id": 58505600, "comment_id": 103339611, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/19831645/android-catch-webview-redirection-url\">Android, catch webview redirection url</a>"}, {"owner": {"reputation": 298, "user_id": 5813395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8vgBc.jpg?s=128&g=1", "display_name": "sirdn4", "link": "https://stackoverflow.com/users/5813395/sirdn4"}, "reply_to_user": {"reputation": 1106, "user_id": 6795368, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d143ab3f3cca6a127b01bd03e22ac2f9?s=128&d=identicon&r=PG&f=1", "display_name": "Den", "link": "https://stackoverflow.com/users/6795368/den"}, "edited": false, "score": 0, "creation_date": 1571752708, "post_id": 58505600, "comment_id": 103340106, "body": "Doesn&#39;t solve in my case"}], "answers": [{"comments": [{"owner": {"reputation": 298, "user_id": 5813395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8vgBc.jpg?s=128&g=1", "display_name": "sirdn4", "link": "https://stackoverflow.com/users/5813395/sirdn4"}, "edited": false, "score": 0, "creation_date": 1571753060, "post_id": 58505842, "comment_id": 103340328, "body": "Definitely yes."}, {"owner": {"reputation": 1, "user_id": 12153693, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iEg_dkBhoLA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rciJXXRcar2l9hS4z10vjr9CNrBgw/photo.jpg?sz=128", "display_name": "artiig", "link": "https://stackoverflow.com/users/12153693/artiig"}, "reply_to_user": {"reputation": 298, "user_id": 5813395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8vgBc.jpg?s=128&g=1", "display_name": "sirdn4", "link": "https://stackoverflow.com/users/5813395/sirdn4"}, "edited": false, "score": 0, "creation_date": 1571754094, "post_id": 58505842, "comment_id": 103340975, "body": "Try to override onPageFinished(WebView view, String url) and  onPageStarted(WebView view, String url)"}], "tags": [], "owner": {"reputation": 1, "user_id": 12153693, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iEg_dkBhoLA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rciJXXRcar2l9hS4z10vjr9CNrBgw/photo.jpg?sz=128", "display_name": "artiig", "link": "https://stackoverflow.com/users/12153693/artiig"}, "is_accepted": false, "score": 0, "last_activity_date": 1571752189, "creation_date": 1571752189, "answer_id": 58505842, "question_id": 58505600, "link": "https://stackoverflow.com/questions/58505600/kotlin-webview-loadurl-with-redirect-url/58505842#58505842", "title": "Kotlin WebView loadUrl() with redirect URL", "body": "<p>Did you had <code>&lt;uses-permission android:name=\"android.permission.INTERNET\" /&gt;</code> ?</p>\n"}, {"comments": [{"owner": {"reputation": 22, "user_id": 7676906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ab776003aa4d4eda4e238309dccf15b?s=128&d=identicon&r=PG&f=1", "display_name": "Shahzad Ali", "link": "https://stackoverflow.com/users/7676906/shahzad-ali"}, "reply_to_user": {"reputation": 298, "user_id": 5813395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8vgBc.jpg?s=128&g=1", "display_name": "sirdn4", "link": "https://stackoverflow.com/users/5813395/sirdn4"}, "edited": false, "score": 0, "creation_date": 1571896418, "post_id": 58505934, "comment_id": 103392725, "body": "This is quite strange, Because I have also test this code and it perfectly works fine for me."}, {"owner": {"reputation": 22, "user_id": 7676906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ab776003aa4d4eda4e238309dccf15b?s=128&d=identicon&r=PG&f=1", "display_name": "Shahzad Ali", "link": "https://stackoverflow.com/users/7676906/shahzad-ali"}, "reply_to_user": {"reputation": 298, "user_id": 5813395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8vgBc.jpg?s=128&g=1", "display_name": "sirdn4", "link": "https://stackoverflow.com/users/5813395/sirdn4"}, "edited": false, "score": 0, "creation_date": 1571896464, "post_id": 58505934, "comment_id": 103392738, "body": "Share some more info, like share your manifest, xml, kt files."}], "tags": [], "owner": {"reputation": 22, "user_id": 7676906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ab776003aa4d4eda4e238309dccf15b?s=128&d=identicon&r=PG&f=1", "display_name": "Shahzad Ali", "link": "https://stackoverflow.com/users/7676906/shahzad-ali"}, "is_accepted": false, "score": 0, "last_activity_date": 1571752508, "creation_date": 1571752508, "answer_id": 58505934, "question_id": 58505600, "link": "https://stackoverflow.com/questions/58505600/kotlin-webview-loadurl-with-redirect-url/58505934#58505934", "title": "Kotlin WebView loadUrl() with redirect URL", "body": "<p>Here is the sample solution.\njust Try it.</p>\n\n<p>1.activity_main.xml</p>\n\n<pre><code>    &lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n    &lt;android.support.constraint.ConstraintLayout \n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\"com.kotlinwebview.MainActivity\"&gt;\n\n\n&lt;WebView\n    android:id=\"@+id/webview\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:ignore=\"MissingConstraints\"\n    tools:layout_editor_absoluteX=\"8dp\"\n    tools:layout_editor_absoluteY=\"8dp\" /&gt;\n</code></pre>\n\n<p>2) MainActivity.kt</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n    var mywebview: WebView? = null\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        mywebview = findViewById&lt;WebView&gt;(R.id.webview)\n        mywebview!!.webViewClient = object : WebViewClient() {\n            override fun shouldOverrideUrlLoading(view: WebView?, url: String?): Boolean {\n                view?.loadUrl(url)\n                return true\n            }\n        }\n        mywebview!!.loadUrl(\"https://www.google.co.in/\")\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22, "user_id": 7676906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ab776003aa4d4eda4e238309dccf15b?s=128&d=identicon&r=PG&f=1", "display_name": "Shahzad Ali", "link": "https://stackoverflow.com/users/7676906/shahzad-ali"}, "is_accepted": false, "score": 0, "last_activity_date": 1571902240, "creation_date": 1571902240, "answer_id": 58536276, "question_id": 58505600, "link": "https://stackoverflow.com/questions/58505600/kotlin-webview-loadurl-with-redirect-url/58536276#58536276", "title": "Kotlin WebView loadUrl() with redirect URL", "body": "<p>Here is complete answer.\nChange your URL accordingly in MainActivity.kt.\nMainAcivity.kt</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\n    @SuppressLint(\"SetJavaScriptEnabled\")\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n\n        setContentView(R.layout.activity_main)\n\n        val mWebView = findViewById&lt;WebView&gt;(R.id.webview)\n\n        val webSettings = mWebView.settings\n        webSettings.javaScriptEnabled = true\n        mWebView.loadUrl(getString(R.string.website_url))\n        mWebView.webViewClient = HelloWebViewClient()\n        WebView.setWebContentsDebuggingEnabled(false)\n\n    }\n\n    private inner class HelloWebViewClient : WebViewClient() {\n\n        override fun shouldOverrideUrlLoading(view: WebView, url: String): Boolean {\n            if (Uri.parse(url).host == getString(R.string.website_domain)) {\n                return false\n            }\n            val intent = Intent(Intent.ACTION_VIEW, Uri.parse(url))\n            startActivity(intent)\n            return true\n        }\n\n        override fun onPageFinished(view: WebView, url: String) {\n            // TODO Auto-generated method stub\n            super.onPageFinished(view, url)\n        }\n\n    }\n\n    override fun onKeyDown(keyCode: Int, event: KeyEvent): Boolean {\n        if (keyCode == KeyEvent.KEYCODE_BACK &amp;&amp; webview.canGoBack()) {\n            webview.goBack()\n            return true\n        }\n        return super.onKeyDown(keyCode, event)\n    }\n</code></pre>\n\n<p>activity_main.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"vertical\"\n    tools:context=\".MainActivity\"&gt;\n\n    &lt;WebView\n        android:id=\"@+id/webview\"\n        android:layout_width=\"fill_parent\"\n        android:layout_height=\"fill_parent\" /&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>AndroidManifest.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    package=\"com.example.learnkotlin\"&gt;\n\n    &lt;uses-permission android:name=\"android.permission.INTERNET\" /&gt;\n    &lt;uses-feature\n        android:name=\"android.hardware.touchscreen\"\n        android:required=\"false\" /&gt;\n    &lt;application\n        android:allowBackup=\"true\"\n        android:icon=\"@mipmap/ic_launcher\"\n        android:label=\"@string/app_name\"\n        android:roundIcon=\"@mipmap/ic_launcher_round\"\n        android:supportsRtl=\"true\"\n        android:theme=\"@style/AppTheme\"&gt;\n        &lt;activity android:name=\".MainActivity\"&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"android.intent.action.MAIN\" /&gt;\n\n                &lt;category android:name=\"android.intent.category.LAUNCHER\" /&gt;\n            &lt;/intent-filter&gt;\n\n            &lt;intent-filter\n                android:autoVerify=\"true\"\n                tools:targetApi=\"m\"&gt;\n                &lt;action android:name=\"android.intent.action.VIEW\" /&gt;\n\n                &lt;category android:name=\"android.intent.category.DEFAULT\" /&gt;\n                &lt;category android:name=\"android.intent.category.BROWSABLE\" /&gt;\n\n                &lt;data\n                    android:host=\"quaestio.org\"\n                    android:scheme=\"https\" /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n        &lt;meta-data\n            android:name=\"android.webkit.WebView.EnableSafeBrowsing\"\n            android:value=\"true\" /&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n\n<p>String.xml</p>\n\n<pre><code>&lt;resources&gt;\n    &lt;string name=\"app_name\"&gt;LearnKotlin&lt;/string&gt;\n    &lt;string name=\"website_domain\"&gt;quaestio.org&lt;/string&gt;\n    &lt;string name=\"website_url\"&gt;https://quaestio.org&lt;/string&gt;\n&lt;/resources&gt;\n</code></pre>\n\n<p>I have test this it works absolutely fine. Let me know if you face an issue.\nGood Luck.</p>\n"}], "owner": {"reputation": 298, "user_id": 5813395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8vgBc.jpg?s=128&g=1", "display_name": "sirdn4", "link": "https://stackoverflow.com/users/5813395/sirdn4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2412, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1589808163, "creation_date": 1571751454, "last_edit_date": 1571753499, "question_id": 58505600, "link": "https://stackoverflow.com/questions/58505600/kotlin-webview-loadurl-with-redirect-url", "title": "Kotlin WebView loadUrl() with redirect URL", "body": "<p>When I'm trying to load a URL with method:</p>\n\n<pre><code>webView.loadUrl(\"https://example.com\"),\n</code></pre>\n\n<p>and</p>\n\n<pre><code>webView.webViewClient = object : WebViewClient() {\n   override fun shouldOverrideUrlLoading(view: WebView?, url: String?): Boolean {\n      view?.loadUrl(url)\n      return true\n   }\n}\n</code></pre>\n\n<p>the result is blank. </p>\n\n<p>I think it happens because the URL is redirected to another link, but how to solve it?</p>\n"}, {"tags": ["android", "firebase", "kotlin", "payment-gateway", "braintree"], "answers": [{"comments": [{"owner": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "reply_to_user": {"reputation": 116, "user_id": 12257510, "user_type": "registered", "profile_image": "https://graph.facebook.com/2645605645497409/picture?type=large", "display_name": "Paul Nitu", "link": "https://stackoverflow.com/users/12257510/paul-nitu"}, "edited": false, "score": 0, "creation_date": 1571762061, "post_id": 58505657, "comment_id": 103345261, "body": "You&#39;re welcome Paul. Whoever downvoted, can you explain why please?"}, {"owner": {"reputation": 7614, "user_id": 1364007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d106de3dec9586b56ed7f110497689e?s=128&d=identicon&r=PG", "display_name": "Wai Ha Lee", "link": "https://stackoverflow.com/users/1364007/wai-ha-lee"}, "edited": false, "score": 2, "creation_date": 1571765345, "post_id": 58505657, "comment_id": 103346796, "body": "Somebody who voted to close likely downvoted - with the rationale that if a question is off-topic, answering it encourages more off-topic questions."}, {"owner": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "reply_to_user": {"reputation": 7614, "user_id": 1364007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d106de3dec9586b56ed7f110497689e?s=128&d=identicon&r=PG", "display_name": "Wai Ha Lee", "link": "https://stackoverflow.com/users/1364007/wai-ha-lee"}, "edited": false, "score": 1, "creation_date": 1571766751, "post_id": 58505657, "comment_id": 103347365, "body": "Thanks Wai, that makes sense. It&#39;s one of those guidelines I disagree with, but at least it would explain. :)"}], "tags": [], "owner": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "is_accepted": true, "score": 0, "last_activity_date": 1571751660, "creation_date": 1571751660, "answer_id": 58505657, "question_id": 58505347, "link": "https://stackoverflow.com/questions/58505347/serverless-card-payment-processor-integration-options/58505657#58505657", "title": "Serverless card payment processor integration options", "body": "<p>The Firebase <code>functions-samples</code> repo contains examples of processing payments with <a href=\"https://github.com/firebase/functions-samples/tree/master/stripe\" rel=\"nofollow noreferrer\">Stripe</a> and with <a href=\"https://github.com/firebase/functions-samples/tree/master/paypal\" rel=\"nofollow noreferrer\">Paypal</a>. If you look at the code for these, you'll see that the Firebase aspects of them are fairly similar, and the main differences are in the calls to the Paypal/Stripe API.</p>\n\n<p>If you need to support another payment provider, you will have to make your own implementation of this approach, typically using these examples as a template. I also recommend checking out the video explaining this flow: <a href=\"https://www.youtube.com/watch?v=JeyxolsJ3aE\" rel=\"nofollow noreferrer\">Go serverless: manage payments in your apps</a>.</p>\n"}], "owner": {"reputation": 116, "user_id": 12257510, "user_type": "registered", "profile_image": "https://graph.facebook.com/2645605645497409/picture?type=large", "display_name": "Paul Nitu", "link": "https://stackoverflow.com/users/12257510/paul-nitu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "closed_date": 1571764925, "accepted_answer_id": 58505657, "answer_count": 1, "score": 0, "last_activity_date": 1571751660, "creation_date": 1571750639, "question_id": 58505347, "link": "https://stackoverflow.com/questions/58505347/serverless-card-payment-processor-integration-options", "closed_reason": "Needs more focus", "title": "Serverless card payment processor integration options", "body": "<p>I m currently developing an app for a local company that needs to integrate card payments for enabling customers to buy some sort of physical products.</p>\n\n<p>Are there any options for a \"serverless\" card payment integration? </p>\n\n<p>Unfortunately I cant use Stripe + Firebase because Stripe is not available for my country. (Romania)</p>\n\n<p>Has anyone implemented a card payment solution using Braintree payments and Firebase?</p>\n\n<p>Thanks a lot.</p>\n"}, {"tags": ["java", "android", "kotlin", "calendar", "simpledateformat"], "comments": [{"owner": {"reputation": 153, "user_id": 2999097, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/d3ff3d03dc3513f9fb9e2fb0e9cedd01?s=128&d=identicon&r=PG&f=1", "display_name": "Noshaf", "link": "https://stackoverflow.com/users/2999097/noshaf"}, "edited": false, "score": 0, "creation_date": 1571749934, "post_id": 58505052, "comment_id": 103338506, "body": "you can try with `add(Calender.YEAR,1) and add(Calender.MONTH,2). may be it works"}, {"owner": {"reputation": 745, "user_id": 5293867, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZYLGf.png?s=128&g=1", "display_name": "Koushik Mondal", "link": "https://stackoverflow.com/users/5293867/koushik-mondal"}, "edited": false, "score": 1, "creation_date": 1571749946, "post_id": 58505052, "comment_id": 103338515, "body": "Then you should set Calendar year as +1 and month as +2, I can guide you better if you provide your expected String"}, {"owner": {"reputation": 5985, "user_id": 1698073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b223e1660490335df6ca5776911a2fdc?s=128&d=identicon&r=PG", "display_name": "jalynn2", "link": "https://stackoverflow.com/users/1698073/jalynn2"}, "edited": false, "score": 1, "creation_date": 1571749980, "post_id": 58505052, "comment_id": 103338531, "body": "Why are you passing this to the format method? That is what is causing the error."}, {"owner": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "edited": false, "score": 0, "creation_date": 1571750392, "post_id": 58505052, "comment_id": 103338775, "body": "As an aside consider throwing away the long outmoded and notoriously troublesome <code>SimpleDateFormat</code> and friends, and adding <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow noreferrer\">ThreeTenABP</a> to your Android project in order to use <code>java.time</code>, the modern Java date and time API. It is so much nicer to work with."}, {"owner": {"reputation": 25, "user_id": 6389616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/853cb715c16a589379c2f07b663f6b30?s=128&d=identicon&r=PG&f=1", "display_name": "Brummerly", "link": "https://stackoverflow.com/users/6389616/brummerly"}, "edited": false, "score": 0, "creation_date": 1571750398, "post_id": 58505052, "comment_id": 103338780, "body": "I am clearly overthinking this and confused myself. I just want the output string to be the return of the current date + 14 months."}], "answers": [{"tags": [], "owner": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "is_accepted": false, "score": 1, "last_activity_date": 1571753964, "last_edit_date": 1571753964, "creation_date": 1571750520, "answer_id": 58505299, "question_id": 58505052, "link": "https://stackoverflow.com/questions/58505052/returning-calendar-with-simpledateformat/58505299#58505299", "title": "Returning Calendar with SimpleDateFormat", "body": "<h2>java.time and ThreeTenABP</h2>\n\n<p>Sorry, I can write this in Java only. Please translate yourself. Your task is best solved using java.time, the modern Java date and time API.</p>\n\n<pre><code>    DateTimeFormatter dateFormatter = DateTimeFormatter.ofPattern(\"dd-MM-uuuu\");\n    LocalDate date = LocalDate.now(ZoneId.of(\"Europe/London\")).plusMonths(14);\n    String result = date.format(dateFormatter);\n    System.out.println(\"Result: \" + result);\n</code></pre>\n\n<p>Output when running today:</p>\n\n<blockquote>\n  <p>Result: 22-12-2020</p>\n</blockquote>\n\n<h2>Fixing your code</h2>\n\n<p>If you insist on using the notoriously troublesome and long outdated <code>SimpleDateFormat</code> class, just remove <code>.format(this)</code> from your code. I bet the exception is coming from there, and it\u2019s wrong since you have an almost correct call to the <code>format</code> method in the following line.</p>\n\n<pre><code>private fun bestBeforeDate(cal: Calendar = Calendar.getInstance()): String\n{\n    cal.add(Calendar.MONTH, 14)\n    val format1 = SimpleDateFormat(\"dd-MM-yyyy\")\n    return getString(R.string.best_before_date) + format1.format(cal.time)\n}\n</code></pre>\n\n<p>The <code>format</code> method expects either a <code>Date</code> (another poorly designed and long outdated class) or a <code>Long</code>. Since <code>this</code> was neither of those, you got the exception.</p>\n\n<h2>Question: Doesn\u2019t java.time require Android API level 26?</h2>\n\n<p>java.time works nicely on both older and newer Android devices. It just requires at least <strong>Java 6</strong>.</p>\n\n<ul>\n<li>In Java 8 and later and on newer Android devices (from API level 26) the modern API comes built-in.</li>\n<li>In non-Android Java 6 and 7 get the ThreeTen Backport, the backport of the modern classes (ThreeTen for JSR 310; see the links at the bottom).</li>\n<li>On (older) Android use the Android edition of ThreeTen Backport. It\u2019s called ThreeTenABP. And make sure you import the date and time classes from <code>org.threeten.bp</code> with subpackages.</li>\n</ul>\n\n<h2>Links</h2>\n\n<ul>\n<li><a href=\"https://docs.oracle.com/javase/tutorial/datetime/\" rel=\"nofollow noreferrer\">Oracle tutorial: Date Time</a> explaining how to use java.time.</li>\n<li><a href=\"https://jcp.org/en/jsr/detail?id=310\" rel=\"nofollow noreferrer\">Java Specification Request (JSR) 310</a>, where <code>java.time</code> was first described.</li>\n<li><a href=\"http://www.threeten.org/threetenbp/\" rel=\"nofollow noreferrer\">ThreeTen Backport project</a>, the backport of <code>java.time</code> to Java 6 and 7 (ThreeTen for JSR-310).</li>\n<li><a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow noreferrer\">ThreeTenABP</a>, Android edition of ThreeTen Backport</li>\n<li><a href=\"https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project\">Question: How to use ThreeTenABP in Android Project</a>, with a very thorough explanation.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 213390, "user_id": 642706, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/ZWEI3.jpg?s=128&g=1", "display_name": "Basil Bourque", "link": "https://stackoverflow.com/users/642706/basil-bourque"}, "edited": false, "score": 1, "creation_date": 1571764865, "post_id": 58505661, "comment_id": 103346580, "body": "These terrible date-time classes were supplanted years ago by the <i>java.time</i> classes defined in JSR 310. See the modern solution in the <a href=\"https://stackoverflow.com/a/58505299/642706\">Answer by Ole V.V.</a>"}], "tags": [], "owner": {"reputation": 22, "user_id": 7676906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ab776003aa4d4eda4e238309dccf15b?s=128&d=identicon&r=PG&f=1", "display_name": "Shahzad Ali", "link": "https://stackoverflow.com/users/7676906/shahzad-ali"}, "is_accepted": false, "score": 0, "last_activity_date": 1571751667, "creation_date": 1571751667, "answer_id": 58505661, "question_id": 58505052, "link": "https://stackoverflow.com/questions/58505052/returning-calendar-with-simpledateformat/58505661#58505661", "title": "Returning Calendar with SimpleDateFormat", "body": "<pre><code>    import java.util.Calendar;\nimport java.util.TimeZone;\n\n/**\n * Java program to add, subtract dates, month and year using Calendar in Java.\n * Apart from date, Calendar class also provide time related information and can\n * be used to add and subtract hours, minutes and seconds from time in Java.\n *\n * @author Shahzad Ali\n */\npublic class DateAndTimeArithmetic {\n\n    public static void main(String args[]){\n\n        //Java calendar in default timezone and default locale\n        Calendar cal = Calendar.getInstance();\n        cal.setTimeZone(TimeZone.getTimeZone(\"GMT\"));\n\n        System.out.println(\"current date: \" + getDate(cal));\n\n\n        //adding days into Date in Java\n        cal.add(Calendar.DATE, 2);\n        System.out.println(\"date after 2 days : \" + getDate(cal));\n\n        //subtracting days from Date in Java\n        cal.add(Calendar.DATE, -2);\n        System.out.println(\"date before 2 days : \" + getDate(cal));\n\n\n       //adding moths into Date\n        cal.add(Calendar.MONTH, 5);\n        System.out.println(\"date after 5 months : \" + getDate(cal));\n\n        //subtracting months from Date\n        cal.add(Calendar.MONTH, -5);\n        System.out.println(\"date before 5 months : \" + getDate(cal));\n\n        //adding year into Date\n        cal.add(Calendar.YEAR, 5);\n        System.out.println(\"date after 5 years : \" + getDate(cal));\n\n        //subtracting year from Date\n        cal.add(Calendar.YEAR, -5);\n        System.out.println(\"date before 5 years : \" + getDate(cal));\n\n        //date after 200 days from now, takes care of how many days are in month\n        //for years calendar takes care of leap year as well\n        cal.add(Calendar.DATE, 200);\n        System.out.println(\"date after 200 days from today : \" + getDate(cal));\n\n        System.out.println(\"current time in GMT: \" + getTime(cal));\n\n        //adding hours into Date\n        cal.add(Calendar.HOUR_OF_DAY, 3);\n        System.out.println(\"Time after 3 hours : \" + getTime(cal));\n\n        //subtracting hours from Date time\n        cal.add(Calendar.HOUR_OF_DAY, -3);\n        System.out.println(\"Time before 3 hours : \" + getTime(cal));\n\n        //adding minutes into Date time\n        cal.add(Calendar.MINUTE, 3);\n        System.out.println(\"Time after 3 minutes : \" + getTime(cal));\n\n        //subtracting minutes from Date time\n        cal.add(Calendar.HOUR_OF_DAY, -3);\n        System.out.println(\"Time before 3 minuets : \" + getTime(cal));\n\n    }\n\n    /**\n     *\n     * @return current Date from Calendar in dd/MM/yyyy format\n     * adding 1 into month because Calendar month starts from zero\n     */\n    public static String getDate(Calendar cal){\n        return \"\" + cal.get(Calendar.DATE) +\"/\" +\n                (cal.get(Calendar.MONTH)+1) + \"/\" + cal.get(Calendar.YEAR);\n    }\n\n    /**\n     *\n     * @return current Date from Calendar in HH:mm:SS format\n     *\n     * adding 1 into month because Calendar month starts from zero\n     */\n    public static String getTime(Calendar cal){\n        return \"\" + cal.get(Calendar.HOUR_OF_DAY) +\":\" +\n                (cal.get(Calendar.MINUTE)) + \":\" + cal.get(Calendar.SECOND);\n    }\n</code></pre>\n\n<p>}</p>\n\n<p>Sample Output Should be like this:\ncurrent date: 22/10/2019\ndate after 2 days : 22/10/2019\ndate before 2 days : 24/10/2019\ndate after 5 months : 22/3/2020</p>\n\n<p>etc...</p>\n"}], "owner": {"reputation": 25, "user_id": 6389616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/853cb715c16a589379c2f07b663f6b30?s=128&d=identicon&r=PG&f=1", "display_name": "Brummerly", "link": "https://stackoverflow.com/users/6389616/brummerly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 659, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1571753964, "creation_date": 1571749709, "question_id": 58505052, "link": "https://stackoverflow.com/questions/58505052/returning-calendar-with-simpledateformat", "title": "Returning Calendar with SimpleDateFormat", "body": "<p>I want to return the value of the calendar + 14 months using the SimpleDateFormat but am getting the below error.</p>\n\n<pre><code>private fun bestBeforeDate(cal: Calendar = Calendar.getInstance()): String\n    {\n        cal.add(Calendar.MONTH, 14)\n        val format1 = SimpleDateFormat(\"dd-MM-yyy\", Locale.getDefault()).format(this)\n        return getString(R.string.best_before_date) + format1.format(cal)\n    }\n</code></pre>\n\n<pre><code>java.lang.IllegalArgumentException: Cannot format given Object as a Date\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "owner": {"reputation": 41, "user_id": 11235711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bb29f3c68f765cf21e57808144c6b57?s=128&d=identicon&r=PG&f=1", "display_name": "Madhavi Chopade", "link": "https://stackoverflow.com/users/11235711/madhavi-chopade"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1571767025, "creation_date": 1571749668, "last_edit_date": 1571767025, "question_id": 58505039, "link": "https://stackoverflow.com/questions/58505039/why-getting-blur-image-captured-from-camera-in-android", "title": "Why getting blur image captured from camera in android?", "body": "<ol>\n<li><p>I have captured an image from the camera, but image getting blur in\nonActivityResult. below is my code, what could be the reason behind the blur image?</p>\n\n<pre><code>if(requestCode==\n          Constants.PermissionRequestCodes.REQUEST_CODE_CAMERA\n         {\n           if (data != null) {\n            if (!data.toString().equals(\"Intent {  }\")) {\n                val thumbnail = data!!.extras!!.get(\"data\")\n                val contentURI = \n                  MediaHelper.getImageUri(this,thumbnail as   Bitmap)\n                opnCropImageActivity(contentURI, \n                    requestCode,thumbnail as Bitmap)\n            }\n         }\n   } \nfun getImageUri(inContext: Context, inImage: Bitmap): Uri {\n            val bytes = ByteArrayOutputStream()\n            inImage.compress(Bitmap.CompressFormat.JPEG, 100, bytes)\n            val path = MediaStore.Images.Media.insertImage(inContext.contentResolver,\ninImage, \"Title\", null)\n            return Uri.parse(path)\n        }\n</code></pre></li>\n</ol>\n"}, {"tags": ["android", "api", "kotlin", "retrofit2", "special-characters"], "comments": [{"owner": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 2, "creation_date": 1571748541, "post_id": 58504422, "comment_id": 103337701, "body": "The &quot;replacing&quot; retrofit does is on purpose. This is called url encoding. Your browser and postman also do this under the hood"}, {"owner": {"reputation": 912, "user_id": 8468496, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CpmdYHySLQg/AAAAAAAAAAI/AAAAAAAAABM/OT-Bo98Hfho/photo.jpg?sz=128", "display_name": "Shiasu-sama", "link": "https://stackoverflow.com/users/8468496/shiasu-sama"}, "reply_to_user": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1571749081, "post_id": 58504422, "comment_id": 103337995, "body": "Why do I then still get 400: Bad Request. Is retrofit encoding it differently than my browser / Postman?"}, {"owner": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1571749387, "post_id": 58504422, "comment_id": 103338162, "body": "I don&#39;t know, check your server logs"}, {"owner": {"reputation": 912, "user_id": 8468496, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CpmdYHySLQg/AAAAAAAAAAI/AAAAAAAAABM/OT-Bo98Hfho/photo.jpg?sz=128", "display_name": "Shiasu-sama", "link": "https://stackoverflow.com/users/8468496/shiasu-sama"}, "reply_to_user": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1571750034, "post_id": 58504422, "comment_id": 103338558, "body": "Thanks @TimCastelijns. Can I manually encode my URL in Kotlin before I send it to retrofit?"}], "answers": [{"comments": [{"owner": {"reputation": 912, "user_id": 8468496, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CpmdYHySLQg/AAAAAAAAAAI/AAAAAAAAABM/OT-Bo98Hfho/photo.jpg?sz=128", "display_name": "Shiasu-sama", "link": "https://stackoverflow.com/users/8468496/shiasu-sama"}, "edited": false, "score": 0, "creation_date": 1571750090, "post_id": 58504584, "comment_id": 103338586, "body": "How can I encode my URL in Kotlin before I send it to retrofit?"}, {"owner": {"reputation": 488, "user_id": 8635148, "user_type": "registered", "profile_image": "https://graph.facebook.com/1854663324862976/picture?type=large", "display_name": "Satyajit Das", "link": "https://stackoverflow.com/users/8635148/satyajit-das"}, "reply_to_user": {"reputation": 912, "user_id": 8468496, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CpmdYHySLQg/AAAAAAAAAAI/AAAAAAAAABM/OT-Bo98Hfho/photo.jpg?sz=128", "display_name": "Shiasu-sama", "link": "https://stackoverflow.com/users/8468496/shiasu-sama"}, "edited": false, "score": 0, "creation_date": 1571750173, "post_id": 58504584, "comment_id": 103338642, "body": "If the API contains special characters and you will encode it you will not receive the response. So instead you should try changing the API structure as mention above."}, {"owner": {"reputation": 912, "user_id": 8468496, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CpmdYHySLQg/AAAAAAAAAAI/AAAAAAAAABM/OT-Bo98Hfho/photo.jpg?sz=128", "display_name": "Shiasu-sama", "link": "https://stackoverflow.com/users/8468496/shiasu-sama"}, "edited": false, "score": 0, "creation_date": 1571750286, "post_id": 58504584, "comment_id": 103338714, "body": "If my API will result in no response or 400: Bad Request; what is the purpose of encoding a URL in the first place?"}, {"owner": {"reputation": 488, "user_id": 8635148, "user_type": "registered", "profile_image": "https://graph.facebook.com/1854663324862976/picture?type=large", "display_name": "Satyajit Das", "link": "https://stackoverflow.com/users/8635148/satyajit-das"}, "reply_to_user": {"reputation": 912, "user_id": 8468496, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CpmdYHySLQg/AAAAAAAAAAI/AAAAAAAAABM/OT-Bo98Hfho/photo.jpg?sz=128", "display_name": "Shiasu-sama", "link": "https://stackoverflow.com/users/8468496/shiasu-sama"}, "edited": false, "score": 0, "creation_date": 1571750458, "post_id": 58504584, "comment_id": 103338817, "body": "Changin the API means - Change the server-side API URL. Not anything in-app."}, {"owner": {"reputation": 912, "user_id": 8468496, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CpmdYHySLQg/AAAAAAAAAAI/AAAAAAAAABM/OT-Bo98Hfho/photo.jpg?sz=128", "display_name": "Shiasu-sama", "link": "https://stackoverflow.com/users/8468496/shiasu-sama"}, "edited": false, "score": 0, "creation_date": 1571750830, "post_id": 58504584, "comment_id": 103339015, "body": "I understand changing the API URL on the server; and removing any of those special characters in the URL there will work. I&#39;m just not understanding why encoding a URL is useful if you can&#39;t get a response after encoding a URL. What is the purpose of encoding a URL?"}, {"owner": {"reputation": 912, "user_id": 8468496, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CpmdYHySLQg/AAAAAAAAAAI/AAAAAAAAABM/OT-Bo98Hfho/photo.jpg?sz=128", "display_name": "Shiasu-sama", "link": "https://stackoverflow.com/users/8468496/shiasu-sama"}, "edited": false, "score": 0, "creation_date": 1571751379, "post_id": 58504584, "comment_id": 103339283, "body": "Thanks for all the feedback. I appreciate."}], "tags": [], "owner": {"reputation": 488, "user_id": 8635148, "user_type": "registered", "profile_image": "https://graph.facebook.com/1854663324862976/picture?type=large", "display_name": "Satyajit Das", "link": "https://stackoverflow.com/users/8635148/satyajit-das"}, "is_accepted": false, "score": 2, "last_activity_date": 1571751206, "last_edit_date": 1571751206, "creation_date": 1571748147, "answer_id": 58504584, "question_id": 58504422, "link": "https://stackoverflow.com/questions/58504422/how-to-handle-special-characters-in-api-url-retrofit/58504584#58504584", "title": "How to handle special characters in API URL - Retrofit", "body": "<p>try this</p>\n\n<pre><code>import java.net.URLEncoder\n\nfun main(args: Array&lt;String&gt;) {\n    val url = \"http://foo bar/\"\n    println(URLEncoder.encode(url, \"utf-8\")) // note: encodes space to + not %20\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>http%3A%2F%2Ffoo+bar%2F\n</code></pre>\n\n<p><strong>You should avoid Special character in Api</strong></p>\n\n<p>URL encoding is often required to convert special characters (such as \"/\", \"&amp;\", \"#\", ...), because special characters: </p>\n\n<pre><code> 1. Have special meaning in some contexts, or\n 2. Are not a valid character for an URL, or\n 3. could be altered during the transfer. \n</code></pre>\n\n<p>For instance, the \"#\" character needs to be encoded because it has a special meaning of that of an HTML anchor. </p>\n\n<p>The  character needs to be encoded because it is not a valid URL character. Also, some characters, such as \"~\" might not transport properly across the internet. Instead of proceeding with the complex process you should focus on correcting the old one.</p>\n\n<p>More you can read <a href=\"https://help.marklogic.com/Knowledgebase/Article/View/251/0/using-url-encoding-to-handle-special-characters-in-a-document-uri\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 912, "user_id": 8468496, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CpmdYHySLQg/AAAAAAAAAAI/AAAAAAAAABM/OT-Bo98Hfho/photo.jpg?sz=128", "display_name": "Shiasu-sama", "link": "https://stackoverflow.com/users/8468496/shiasu-sama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1776, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571775000, "creation_date": 1571747621, "last_edit_date": 1571775000, "question_id": 58504422, "link": "https://stackoverflow.com/questions/58504422/how-to-handle-special-characters-in-api-url-retrofit", "title": "How to handle special characters in API URL - Retrofit", "body": "<p>I'm using Kotlin and retrofit in my Android App to call API's, but some of the API URLs have these characters in them: <code>^, #, ~.</code></p>\n\n<p>I'm using the <code>GET</code> API method. My host URL does not have special / strange characters in them nor does my API method names, but the API methods that I've set up; have a few parameters; and sometimes the arguments I'm sending, when calling the API methods, have these special characters in them.</p>\n\n<p>In those cases I'm not getting a response back and the API call fails.</p>\n\n<p>I've noticed that retrofit changes my URL. It replaces any special character with 3 other characters. I've tested my URLs directly in a browser and in Postman, and they work fine.</p>\n\n<p>Is there something specific I have to do in Kotlin to make retrofit be OK with my special characters?</p>\n"}, {"tags": ["android", "android-layout", "android-fragments", "kotlin", "android-alertdialog"], "comments": [{"owner": {"reputation": 1106, "user_id": 6795368, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d143ab3f3cca6a127b01bd03e22ac2f9?s=128&d=identicon&r=PG&f=1", "display_name": "Den", "link": "https://stackoverflow.com/users/6795368/den"}, "edited": false, "score": 0, "creation_date": 1571747429, "post_id": 58504304, "comment_id": 103337063, "body": "What do you mean by &quot;Interaction with Background&quot;? I guess your Dialog is closing when you tap outside it, right?"}, {"owner": {"reputation": 183, "user_id": 7978415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58498c7f2ffd60d880dce0d79bc287e6?s=128&d=identicon&r=PG&f=1", "display_name": "rengineer", "link": "https://stackoverflow.com/users/7978415/rengineer"}, "reply_to_user": {"reputation": 1106, "user_id": 6795368, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d143ab3f3cca6a127b01bd03e22ac2f9?s=128&d=identicon&r=PG&f=1", "display_name": "Den", "link": "https://stackoverflow.com/users/6795368/den"}, "edited": false, "score": 0, "creation_date": 1571747545, "post_id": 58504304, "comment_id": 103337132, "body": "Correct, the Dialog is closing when I tap outside of it-I am trying to prevent it from closing when tapped outside."}, {"owner": {"reputation": 1106, "user_id": 6795368, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d143ab3f3cca6a127b01bd03e22ac2f9?s=128&d=identicon&r=PG&f=1", "display_name": "Den", "link": "https://stackoverflow.com/users/6795368/den"}, "edited": false, "score": 0, "creation_date": 1571747585, "post_id": 58504304, "comment_id": 103337157, "body": "Just use setCancelable(false) on your Dialog.Builder"}, {"owner": {"reputation": 183, "user_id": 7978415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58498c7f2ffd60d880dce0d79bc287e6?s=128&d=identicon&r=PG&f=1", "display_name": "rengineer", "link": "https://stackoverflow.com/users/7978415/rengineer"}, "reply_to_user": {"reputation": 1106, "user_id": 6795368, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d143ab3f3cca6a127b01bd03e22ac2f9?s=128&d=identicon&r=PG&f=1", "display_name": "Den", "link": "https://stackoverflow.com/users/6795368/den"}, "edited": false, "score": 0, "creation_date": 1571748341, "post_id": 58504304, "comment_id": 103337594, "body": "Nice! that worked thanks! Do you happen to know a way to decrease the Alert Dialog width by any chance?"}], "answers": [{"comments": [{"owner": {"reputation": 183, "user_id": 7978415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58498c7f2ffd60d880dce0d79bc287e6?s=128&d=identicon&r=PG&f=1", "display_name": "rengineer", "link": "https://stackoverflow.com/users/7978415/rengineer"}, "edited": false, "score": 0, "creation_date": 1571747990, "post_id": 58504372, "comment_id": 103337397, "body": "Nice! that worked perfectly-Sorry do you happen to know a way to decrease the width size of the Alert Dialog by any chance? I&#39;ve tried to decrease it but it doesn&#39;t decrease width at all."}], "tags": [], "owner": {"reputation": 3113, "user_id": 9968399, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bsdzB.jpg?s=128&g=1", "display_name": "Taseer", "link": "https://stackoverflow.com/users/9968399/taseer"}, "is_accepted": true, "score": 2, "last_activity_date": 1571748424, "last_edit_date": 1571748424, "creation_date": 1571747508, "answer_id": 58504372, "question_id": 58504304, "link": "https://stackoverflow.com/questions/58504304/disable-interaction-with-background-when-dialog-is-opened/58504372#58504372", "title": "Disable Interaction with Background When Dialog Is Opened", "body": "<p>I suppose you want to prevent  dismissing of the dialog, in that case, all you need to do is to set it the following way:</p>\n\n<pre><code>val mBuilder = AlertDialog.Builder(this)\n                .setView(mDialogView)\n                .setCancelable(false) //This\n                .setCustomTitle(Customtitle)\n</code></pre>\n\n<blockquote>\n  <p>Sets whether the dialog is cancelable or not. The default is true.</p>\n</blockquote>\n\n<p>The dialog will be dismissed on user action.</p>\n\n<p>To adjust the dialog's width and height:</p>\n\n<pre><code>mBuilder.show().window?.setLayout(width, height)\n</code></pre>\n\n<p><strong>setLayout():</strong></p>\n\n<blockquote>\n  <p>Set the width and height layout parameters of the window. The default for both of these is MATCH_PARENT; you can change them to WRAP_CONTENT or an absolute value to make a window that is not full-screen.</p>\n</blockquote>\n"}], "owner": {"reputation": 183, "user_id": 7978415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58498c7f2ffd60d880dce0d79bc287e6?s=128&d=identicon&r=PG&f=1", "display_name": "rengineer", "link": "https://stackoverflow.com/users/7978415/rengineer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 773, "favorite_count": 0, "accepted_answer_id": 58504372, "answer_count": 1, "score": 0, "last_activity_date": 1571748424, "creation_date": 1571747288, "question_id": 58504304, "link": "https://stackoverflow.com/questions/58504304/disable-interaction-with-background-when-dialog-is-opened", "title": "Disable Interaction with Background When Dialog Is Opened", "body": "<p>I am trying to make it so that when the \"delete\" button is clicked and the Alert Dialog pops up, the user would be unable to interact with everything in the background. I tried to disable interaction by setting:</p>\n\n<pre><code>getWindow().setFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE,\nWindowManager.LayoutParams.FLAG_NOT_TOUCHABLE)\n</code></pre>\n\n<p>and allow interaction once the user selects either the cancel or keep ticket:</p>\n\n<pre><code>getWindow().clearFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE)\n</code></pre>\n\n<p>None of this seem to work. </p>\n\n<p>Also, is there a way to make the Alert Dialog's width smaller? I've tried to decrease it in the login_dialog.xml but nothing seems to work.</p>\n\n<p>MainActivity.kt </p>\n\n<pre><code>    import android.app.AlertDialog\n    import android.content.Intent\n    import android.graphics.Color\n    import android.net.Uri\n    import android.os.Bundle\n    import android.support.v7.app.AppCompatActivity\n    import android.view.Gravity\n    import android.view.LayoutInflater\n    import android.view.WindowManager\n    import android.view.animation.AnimationUtils\n    import android.widget.TextView\n    import kotlinx.android.synthetic.main.activity_main.*\n    import kotlinx.android.synthetic.main.login_dialog.view.*\n\n\n    class MainActivity : AppCompatActivity() {\n\n        override fun onCreate(savedInstanceState: Bundle?) {\n            super.onCreate(savedInstanceState)\n            setContentView(R.layout.activity_main)\n\n    //button click to show dialog\n            btn_align_delete.setOnClickListener {\n\n            getWindow().setFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE,\n            WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE);\n\n                val Customtitle = TextView(this)\n\n                Customtitle.setText(\"WARNING\")\n                Customtitle.setBackgroundColor(Color.WHITE)\n                Customtitle.setPadding(10, 30, 10, 0)\n                Customtitle.setGravity(Gravity.CENTER)\n                Customtitle.setTextColor(Color.BLACK)\n                Customtitle.setTextSize(18F)\n\n                //Inflate the dialog with custom view\n                val mDialogView = LayoutInflater.from(this).inflate(R.layout.login_dialog, null)\n                //AlertDialogBuilder\n                val mBuilder = AlertDialog.Builder(this)\n                    .setView(mDialogView)\n                    .setCustomTitle(Customtitle)\n\n                //show dialog\n                val  mAlertDialog = mBuilder.show()\n                //login button click of custom layout\n                mDialogView.keepTicketBtn.setOnClickListener {\n                    //dismiss dialog\n                getWindow().clearFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE);\n\n                    mAlertDialog.dismiss()\n                    //get text from EditTexts of custom layout\n\n                    val password = mDialogView.dialogPasswEt.text.toString()\n\n                }\n                //cancel button click of custom layout\n                mDialogView.dialogCancelBtn.setOnClickListener {\n                    //dismiss dialog\n                getWindow().clearFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE);\n\n                    mAlertDialog.dismiss()\n                }\n            }\n\n        }\n    }\n</code></pre>\n\n<p>main_activity.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.constraint.ConstraintLayout\n        xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        xmlns:tools=\"http://schemas.android.com/tools\"\n        xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        tools:context=\".MainActivity\"&gt;\n\n    &lt;Button\n            android:id=\"@+id/btn_align_delete\"\n            style=\"@style/Widget.AppCompat.Button.Borderless\"\n            android:layout_width=\"40dp\"\n            android:layout_height=\"40dp\"\n            android:layout_alignParentEnd=\"true\"\n            android:drawableEnd=\"@drawable/ticketdelete\"\n            app:layout_constraintEnd_toEndOf=\"parent\"\n            app:layout_constraintHorizontal_bias=\"0.0\" /&gt;\n\n\n\n&lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n\n<p>login_dialog.xml</p>\n\n<pre><code> &lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n\n\n    &lt;LinearLayout\n            xmlns:android=\"http://schemas.android.com/apk/res/android\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            android:orientation=\"vertical\"\n            android:gravity=\"center\"\n            android:background=\"@drawable/alert_dialog\"\n            android:padding=\"10dp\"&gt;\n\n        &lt;TextView\n                android:id=\"@+id/dialogPasswEt\"\n                android:layout_marginTop=\"0dp\"\n                android:layout_width=\"230dp\"\n                android:layout_marginStart=\"60dp\"\n                android:layout_marginEnd=\"60dp\"\n                android:textColor=\"@color/colorBorder\"\n                android:layout_height=\"wrap_content\"\n                android:fontFamily=\"@font/mlight\"\n                android:gravity=\"center_horizontal\"\n                android:text=\"You will no longer be able to add time to your stay.\"\n                android:textSize=\"12sp\" /&gt;\n\n        &lt;TextView\n                android:id=\"@+id/dialogPasswE2t\"\n                android:layout_width=\"210dp\"\n                android:layout_marginStart=\"60dp\"\n                android:layout_marginEnd=\"60dp\"\n                android:textColor=\"@color/colorBorder\"\n                android:layout_height=\"wrap_content\"\n                android:fontFamily=\"@font/mlight\"\n                android:layout_marginTop=\"15dp\"\n                android:text=\"This action CANNOT BE UNDONE.\"\n                android:textSize=\"12sp\" /&gt;\n\n        &lt;LinearLayout\n                android:layout_width=\"250dp\"\n                android:layout_height=\"wrap_content\"\n                android:orientation=\"horizontal\"\n                android:layout_marginTop=\"15dp\"\n                android:gravity=\"center\"&gt;\n\n            &lt;Button\n\n                    android:id=\"@+id/keepTicketBtn\"\n                    android:layout_width=\"125dp\"\n                    android:layout_height=\"wrap_content\"\n                    android:color=\"@color/colorBorder\"\n                    android:background=\"@drawable/btn_align\"\n                    android:text=\"Keep Ticket\"\n\n                    android:textColor=\"@color/blueOrigin\" /&gt;\n\n            &lt;Button\n                    android:id=\"@+id/dialogCancelBtn\"\n                    android:layout_width=\"125dp\"\n                    android:color=\"@color/colorBorder\"\n                    android:layout_height=\"wrap_content\"\n                    android:background=\"@drawable/btn_align\"\n                    android:text=\"DELETE\"\n                    android:textColor=\"@color/error_color_material_light\" /&gt;\n\n\n        &lt;/LinearLayout&gt;\n\n    &lt;/LinearLayout&gt;\n</code></pre>\n"}, {"tags": ["android", "kotlin", "internal-storage", "android-internal-storage"], "comments": [{"owner": {"reputation": 1957, "user_id": 3615605, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/vBNcE.jpg?s=128&g=1", "display_name": "MathankumarK", "link": "https://stackoverflow.com/users/3615605/mathankumark"}, "edited": false, "score": 0, "creation_date": 1571746801, "post_id": 58503846, "comment_id": 103336692, "body": "Xor may helps please refer this link  <a href=\"https://stackoverflow.com/a/44823351/3615605\">stackoverflow.com/a/44823351/3615605</a>"}, {"owner": {"reputation": 912, "user_id": 8468496, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CpmdYHySLQg/AAAAAAAAAAI/AAAAAAAAABM/OT-Bo98Hfho/photo.jpg?sz=128", "display_name": "Shiasu-sama", "link": "https://stackoverflow.com/users/8468496/shiasu-sama"}, "reply_to_user": {"reputation": 1957, "user_id": 3615605, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/vBNcE.jpg?s=128&g=1", "display_name": "MathankumarK", "link": "https://stackoverflow.com/users/3615605/mathankumark"}, "edited": false, "score": 0, "creation_date": 1571815760, "post_id": 58503846, "comment_id": 103361408, "body": "Thanks @MathaN but how do I implement this in my example?"}], "answers": [{"tags": [], "owner": {"reputation": 912, "user_id": 8468496, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CpmdYHySLQg/AAAAAAAAAAI/AAAAAAAAABM/OT-Bo98Hfho/photo.jpg?sz=128", "display_name": "Shiasu-sama", "link": "https://stackoverflow.com/users/8468496/shiasu-sama"}, "is_accepted": true, "score": 0, "last_activity_date": 1571824104, "creation_date": 1571824104, "answer_id": 58520039, "question_id": 58503846, "link": "https://stackoverflow.com/questions/58503846/how-to-write-read-internal-files-securely/58520039#58520039", "title": "How to write / read internal files securely", "body": "<p>After looking at definitions and declarations; I've found this:</p>\n\n<pre><code>encryptedFile.openFileOutput().bufferedWriter().use {writer -&gt;\n    writer.write(\"MY SUPER-SECRET INFORMATION\")\n}\n</code></pre>\n\n<p>Not sure how well this will work, but there's no error.</p>\n\n<p>Hope this helps someone else.</p>\n"}], "owner": {"reputation": 912, "user_id": 8468496, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CpmdYHySLQg/AAAAAAAAAAI/AAAAAAAAABM/OT-Bo98Hfho/photo.jpg?sz=128", "display_name": "Shiasu-sama", "link": "https://stackoverflow.com/users/8468496/shiasu-sama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "accepted_answer_id": 58520039, "answer_count": 1, "score": 0, "last_activity_date": 1571824104, "creation_date": 1571745679, "last_edit_date": 1571821178, "question_id": 58503846, "link": "https://stackoverflow.com/questions/58503846/how-to-write-read-internal-files-securely", "title": "How to write / read internal files securely", "body": "<p>I'm trying to create a helper class that will handle reading and writing internal files in my android app using Kotlin.</p>\n\n<p>Here are the links I followed in order:</p>\n\n<ol>\n<li><a href=\"https://developer.android.com/guide/topics/data/data-storage\" rel=\"nofollow noreferrer\">https://developer.android.com/guide/topics/data/data-storage</a></li>\n<li><a href=\"https://developer.android.com/training/data-storage/files.html#WriteInternalStorage\" rel=\"nofollow noreferrer\">https://developer.android.com/training/data-storage/files.html#WriteInternalStorage</a></li>\n<li><a href=\"https://developer.android.com/training/data-storage/files/internal\" rel=\"nofollow noreferrer\">https://developer.android.com/training/data-storage/files/internal</a></li>\n<li><a href=\"https://developer.android.com/topic/security/data\" rel=\"nofollow noreferrer\">https://developer.android.com/topic/security/data</a></li>\n</ol>\n\n<p>Here's my code:</p>\n\n<pre><code>package com.example.testapp\n\n// Added\nimport android.content.Context\nimport java.io.File\n\n// External\nimport androidx.security.crypto.EncryptedFile\nimport androidx.security.crypto.MasterKeys\n\n@Suppress(\"unused\")\nclass SystemMain {\n    fun writeFile(context: Context) {\n        // Although you can define your own key generation parameter specification, it's recommended that you use the value specified here.\n        val keyGenParameterSpec = MasterKeys.AES256_GCM_SPEC\n        val masterKeyAlias = MasterKeys.getOrCreate(keyGenParameterSpec)\n\n        // Creates a file with this name, or replaces an existing file that has the same name. Note that the file name cannot contain path separators.\n        val fileToWrite = \"my_sensitive_data.txt\"\n        val encryptedFile = EncryptedFile.Builder(File(fileToWrite), context, masterKeyAlias, EncryptedFile.FileEncryptionScheme.AES256_GCM_HKDF_4KB).build()\n\n        encryptedFile.bufferedWriter().use { writer -&gt;\n            writer.write(\"MY SUPER-SECRET INFORMATION\")\n        }\n    }\n}\n</code></pre>\n\n<p>Here's my build.gradle:</p>\n\n<pre><code>...\nimplementation \"androidx.lifecycle:lifecycle-extensions:2.1.0\"\nimplementation \"androidx.lifecycle:lifecycle-viewmodel-ktx:2.1.0\"\n\nimplementation \"androidx.security:security-crypto:1.0.0-alpha02\"\n...\n</code></pre>\n\n<p>The error I'm getting is here: <code>encryptedFile.bufferedWriter()</code></p>\n\n<blockquote>\n  <p>Unresolved reference. None of the following candidates is applicable\n  because of receiver type mismatch:</p>\n  \n  <ul>\n  <li>@InlineOnly public inline fun File.bufferedWriter(charset: Charset = ..., bufferSize: Int = ...): Buffered Writer defined in kotlin.io</li>\n  <li>@InlineOnly public inline fun OutputStream.bufferedWriter(charset: Charset = ...): BufferedWriter defined in kotlin.io</li>\n  </ul>\n</blockquote>\n\n<p>Am I missing a reference somewhere? Am I using the incorrect references? Has the code changed and the documentation on the links are outdated?</p>\n\n<p>I'm very new at this. Any advice / help will be appreciated.</p>\n"}, {"tags": ["kotlin", "kotlin-java-interop"], "comments": [{"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1571745864, "post_id": 58503303, "comment_id": 103336125, "body": "So you use the <code>@Deprecated</code>-annotation of Kotlin in Java? Which IDE and version do you use?"}, {"owner": {"reputation": 517, "user_id": 2608485, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f04275422ac4d0ab952260cbde3c8167?s=128&d=identicon&r=PG", "display_name": "gokhan", "link": "https://stackoverflow.com/users/2608485/gokhan"}, "reply_to_user": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1571745952, "post_id": 58503303, "comment_id": 103336177, "body": "I use <code>android studio 3.5.0</code>, my kotlin version is <code>1.3.31</code>"}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1571746302, "post_id": 58503303, "comment_id": 103336371, "body": "you may want to use <code>java.lang.Deprecated</code> for the Java variant... however there seems to be a problem there nonetheless... if the function is within the same file, the strike-through only appears while using code completion, but not for the written code... it works however for deprecated functions of other files... maybe you want to open an appropriate issue, if there isn&#39;t one already..."}, {"owner": {"reputation": 517, "user_id": 2608485, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f04275422ac4d0ab952260cbde3c8167?s=128&d=identicon&r=PG", "display_name": "gokhan", "link": "https://stackoverflow.com/users/2608485/gokhan"}, "reply_to_user": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1571753181, "post_id": 58503303, "comment_id": 103340405, "body": "I found workaround, i imported java&#39;s Depracted annotation as alias <code>import java.lang.Deprecated as JavaDeprecated</code> and added over the deprecated function and now it works .   ``` @JavaDeprecated @Deprecated(      message = &quot;Use other function&quot;    )   @NotNull   public final Test testFunction(@NotNull String var1) { Intrinsics.checkParameterIsNotNull(var1, &quot;id&quot;);      this.testId = var1;      return this;    } ```"}], "answers": [{"tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": false, "score": 0, "last_activity_date": 1573094494, "creation_date": 1573094494, "answer_id": 58741213, "question_id": 58503303, "link": "https://stackoverflow.com/questions/58503303/deprecated-kotlin-functions-not-warned-on-pure-java-project/58741213#58741213", "title": "Deprecated kotlin functions not warned on pure java project", "body": "<p>In Kotlin, the functions, properties, and classes marked with <code>kotlin.Deprecated</code> annotation also get the <a href=\"https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.15\" rel=\"nofollow noreferrer\">Deprecated</a> attribute in the resulting JVM bytecode. This allows Java compiler to see them as deprecated and emit the corresponding warning.</p>\n\n<p>Take for example this function that is deprecated in Kotlin: \n<a href=\"https://github.com/JetBrains/kotlin/blob/v1.3.50/libraries/stdlib/common/src/generated/_Ranges.kt#L171-L175\" rel=\"nofollow noreferrer\">https://github.com/JetBrains/kotlin/blob/v1.3.50/libraries/stdlib/common/src/generated/_Ranges.kt#L171-L175</a>\nIf you try to call it from java as</p>\n\n<pre><code>kotlin.ranges.RangesKt.intRangeContains(null, 1.0);\n</code></pre>\n\n<p>javac compiler will report the following warning:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Warning:(55, 31) java: intRangeContains(kotlin.ranges.ClosedRange&lt;java.lang.Integer&gt;,double) in kotlin.ranges.RangesKt___RangesKt has been deprecated\n</code></pre>\n\n<p>and both IDEA and Android Studio will mark it as deprecated as well:\n<a href=\"https://i.stack.imgur.com/yTFTy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yTFTy.png\" alt=\"Deprecated inspection in IDE\"></a></p>\n"}], "owner": {"reputation": 517, "user_id": 2608485, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f04275422ac4d0ab952260cbde3c8167?s=128&d=identicon&r=PG", "display_name": "gokhan", "link": "https://stackoverflow.com/users/2608485/gokhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 407, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573094494, "creation_date": 1571743894, "question_id": 58503303, "link": "https://stackoverflow.com/questions/58503303/deprecated-kotlin-functions-not-warned-on-pure-java-project", "title": "Deprecated kotlin functions not warned on pure java project", "body": "<p>I have Test class which has written purely with <code>kotlin</code> in the library project.</p>\n\n<pre><code>class Test{\n\n  @Deprecated(message = \"Use other function\")\n  fun testFunction(id: String): Test {\n      this.testId = id\n      return this\n   }\n}\n</code></pre>\n\n<p>I've deprecated <strong>testFunction()</strong> with <code>Deprecated</code> annotation. Btw <code>Deprecated</code> class is under the kotlin package. When i test this deprecated function in kotlin project works as expected(ide shows <strong>deprecated</strong> warning and strikethrough)</p>\n\n<p><strong>Example:</strong> Test(). <s>testFunction</s>(\"test\")</p>\n\n<p>But in the java project it doesn't show warning or strikethrough to function bye ide. When I open the declaration of deprecated function it's like below</p>\n\n<pre><code>  @Deprecated(\n     message = \"Use other function\"\n   )\n  @NotNull\n  public final Test testFunction(@NotNull String var1) {\n     Intrinsics.checkParameterIsNotNull(var1, \"id\");\n     this.testId = var1;\n     return this;\n   }\n</code></pre>\n\n<p>any help would be appreciated </p>\n"}, {"tags": ["kotlin", "module", "package", "kotlinc"], "answers": [{"tags": [], "owner": {"reputation": 380, "user_id": 3852451, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3gKlj.png?s=128&g=1", "display_name": "Dinu", "link": "https://stackoverflow.com/users/3852451/dinu"}, "is_accepted": false, "score": 0, "last_activity_date": 1571744282, "creation_date": 1571744282, "answer_id": 58503421, "question_id": 58503258, "link": "https://stackoverflow.com/questions/58503258/kotlinc-script-with-multiple-files/58503421#58503421", "title": "kotlinc -script with multiple files", "body": "<p>Looks like <a href=\"https://github.com/holgerbrandl/kscript\" rel=\"nofollow noreferrer\">kscript</a> is the answer.</p>\n\n<ol>\n<li>Install <a href=\"https://github.com/holgerbrandl/kscript\" rel=\"nofollow noreferrer\">kscript</a></li>\n<li>Import required file: <code>//INCLUDE directory/requiredFile.kts</code></li>\n<li>You can call functions from the <code>requiredFile.kts</code> now.</li>\n<li>Run your file with kscript <code>./mainScript.kts</code>, you may need to <code>chmod +x mainScript.kts</code> </li>\n</ol>\n\n<p>If anyone knows how to do it directly with <code>kotlinc</code> let me know. </p>\n"}], "owner": {"reputation": 380, "user_id": 3852451, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3gKlj.png?s=128&g=1", "display_name": "Dinu", "link": "https://stackoverflow.com/users/3852451/dinu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1571744282, "creation_date": 1571743745, "question_id": 58503258, "link": "https://stackoverflow.com/questions/58503258/kotlinc-script-with-multiple-files", "title": "kotlinc -script with multiple files", "body": "<p>I have a Kotlin script which I'm using for testing.\nIn order to run it quickly, I'm using <code>kotlinc -script</code> to evaluate it which prints me the result straight away in the console.</p>\n\n<p>Now, when the script becomes big enough, I want to split it into different submodules/packages. Is it possible to evaluate a script with multiple files with <code>kotlinc</code>?</p>\n\n<p>Note, the setup is only intended for testing purposes that's the reason I don't want to compile it, to avoid an extra step. Imagine doing it stright from the console and you don't want to set up a project with Gradle.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["java", "spring", "kotlin", "detekt"], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 5186011, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zC__ZwqKKig/AAAAAAAAAAI/AAAAAAAAUp8/wnwZvoi_wss/photo.jpg?sz=128", "display_name": "akobor", "link": "https://stackoverflow.com/users/5186011/akobor"}, "is_accepted": false, "score": 3, "last_activity_date": 1571756989, "creation_date": 1571756989, "answer_id": 58507295, "question_id": 58502969, "link": "https://stackoverflow.com/questions/58502969/how-to-get-rid-of-from-spreadoperator-performance-warning-that-was-given-by-dete/58507295#58507295", "title": "How to get rid of from SpreadOperator performance warning that was given by Detekt while using Spring Boot?", "body": "<p>You can add <code>@Suppress(\"SpreadOperator\")</code> before your expression like this:</p>\n\n<pre><code>@SpringBootApplication(exclude = [RedisAutoConfiguration::class])\n@EnableCircuitBreaker\n@EnableScheduling\nclass MyApplication {\n\n    companion object : KLogging()\n}\n\nfun main(args: Array&lt;String&gt;) {\n    Thread.setDefaultUncaughtExceptionHandler { _, exception -&gt;\n        MessCallsApplication.logger.error(exception) { \"Uncaught exception\" }\n    }\n    @Suppress(\"SpreadOperator\")\n    runApplication&lt;MessCallsApplication&gt;(*args)\n}\n</code></pre>\n"}], "owner": {"reputation": 684, "user_id": 12103573, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/srltL.png?s=128&g=1", "display_name": "Seydazimov Nurbol", "link": "https://stackoverflow.com/users/12103573/seydazimov-nurbol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1354, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1571756989, "creation_date": 1571742716, "question_id": 58502969, "link": "https://stackoverflow.com/questions/58502969/how-to-get-rid-of-from-spreadoperator-performance-warning-that-was-given-by-dete", "title": "How to get rid of from SpreadOperator performance warning that was given by Detekt while using Spring Boot?", "body": "<p>Recently, I added <a href=\"https://github.com/arturbosch/detekt\" rel=\"nofollow noreferrer\">Detekt</a> analyzer to my application. </p>\n\n<p>After I runned detekt (./gradlew detekt), I got SpreadOperator warning in my main class of application. </p>\n\n<p>Warning on code: <code>runApplication&lt;MessCallsApplication&gt;(*args)</code></p>\n\n<p>You can read about SpreadOperator warning here: <code>[SpreadOperator Warning][2]</code></p>\n\n<p>my main class: </p>\n\n<pre><code>@SpringBootApplication(exclude = [RedisAutoConfiguration::class])\n@EnableCircuitBreaker\n@EnableScheduling\nclass MyApplication {\n\n    companion object : KLogging()\n}\n\nfun main(args: Array&lt;String&gt;) {\n    Thread.setDefaultUncaughtExceptionHandler { _, exception -&gt;\n        MessCallsApplication.logger.error(exception) { \"Uncaught exception\" }\n    }\n\n    runApplication&lt;MessCallsApplication&gt;(*args)\n}\n</code></pre>\n\n<p>Question is, What is the best practice to get rid of from that SpreadOperator warning? Or is it impossible?</p>\n"}, {"tags": ["java", "android", "kotlin", "libgdx"], "comments": [{"owner": {"reputation": 17877, "user_id": 6782707, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2425200c04f326a53ef0085b703369d6?s=128&d=identicon&r=PG", "display_name": "Edric", "link": "https://stackoverflow.com/users/6782707/edric"}, "edited": false, "score": 0, "creation_date": 1571742861, "post_id": 58502906, "comment_id": 103334456, "body": "That&#39;s not how you open activities in Kotlin - you should pass the Java class of your <code>MyActivity</code> class instead of using your class&#39; file name: (in this case it should be <code>MyActivity::class.java</code> instead of <code>MyActivity.kt</code>)"}, {"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1571749364, "post_id": 58502906, "comment_id": 103338147, "body": "LibGDX has separate modules in your project for &quot;core&quot; code and &quot;android&quot; code. This is so the core code can be used in multiple platforms, like desktop JVM or iOS. For this reason, core code cannot call anything that is platform specific, like Activity classes. You need to create an interface that your <code>android</code> module can implement with the code to open the activity."}, {"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1571749411, "post_id": 58502906, "comment_id": 103338175, "body": "<a href=\"https://github.com/libgdx/libgdx/wiki/Interfacing-with-platform-specific-code\" rel=\"nofollow noreferrer\">github.com/libgdx/libgdx/wiki/&hellip;</a>"}, {"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 1, "creation_date": 1571749650, "post_id": 58502906, "comment_id": 103338307, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/12693992/android-intent-and-startactivity-in-libgdx-non-activity-or-androidapplication-c\">Android Intent and startActivity in Libgdx (non Activity or AndroidApplication class)</a>"}, {"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1571750227, "post_id": 58502906, "comment_id": 103338674, "body": "Are you wanting to close the game as you open another activity? You shouldn&#39;t be calling <code>dispose()</code> directly on your Screen unless switching literal LibGDX screens. If you&#39;re just opening another Activity, the libGDX Activity will still be alive on the task stack. If you want to close the game, you should call <code>finish()</code> on its host Activity (which must also be done with interfaces since it is platform-specific code)."}, {"owner": {"reputation": 25, "user_id": 12029277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90eb2c8390fc4d7534f5e7ab9824276c?s=128&d=identicon&r=PG&f=1", "display_name": "Tenecifer06", "link": "https://stackoverflow.com/users/12029277/tenecifer06"}, "edited": false, "score": 0, "creation_date": 1571750664, "post_id": 58502906, "comment_id": 103338918, "body": "I am not totally fluent in English so it is a bit difficult to me to explain, I am sorry. I have a menu created width libgdx (I have 2 buttons). And (for now,) when I touch the screen, I want open a new activity made with Kotlin (Camera for AR). So, I don&#39;t really know what it&#39;s should be in the logic of the process ..."}, {"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1571760469, "post_id": 58502906, "comment_id": 103344520, "body": "But do you want the user to be able to press back in the camera activity and get back into your game?"}], "answers": [{"comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 2, "creation_date": 1571745201, "post_id": 58503226, "comment_id": 103335753, "body": "You should not use ApplicationContext for navigating between Activities, because it requires the <code>FLAG_ACTIVITY_NEW_TASK</code>, and you probably don&#39;t want to start a new task for each Activity."}, {"owner": {"reputation": 573, "user_id": 1537916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a565084904efb180c6e83ad003f7c841?s=128&d=identicon&r=PG", "display_name": "mmmatey", "link": "https://stackoverflow.com/users/1537916/mmmatey"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1571745545, "post_id": 58503226, "comment_id": 103335945, "body": "@EpicPandaForce exactly, I forgot to mention that developer should also set FLAG_ACTIVITY_NEW_TASK in that case.. my answer is useful only when there is no other option to pass or request context in specific class."}, {"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1571749858, "post_id": 58503226, "comment_id": 103338454, "body": "The OP doesn&#39;t have access to Application from within this module either because they are using LibGDX."}], "tags": [], "owner": {"reputation": 573, "user_id": 1537916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a565084904efb180c6e83ad003f7c841?s=128&d=identicon&r=PG", "display_name": "mmmatey", "link": "https://stackoverflow.com/users/1537916/mmmatey"}, "is_accepted": false, "score": 0, "last_activity_date": 1571743615, "creation_date": 1571743615, "answer_id": 58503226, "question_id": 58502906, "link": "https://stackoverflow.com/questions/58502906/how-to-start-a-kotlin-activity-from-an-libgdx-android-class/58503226#58503226", "title": "How to start a kotlin Activity from an LibGDX Android class", "body": "<p>Starting activity from classes which are not context based can be done with setting context to this class, but you have to be careful, because it can cause memory leak. On the other hand you can use application context. With creating your Application class for your app. Check here how you can achieve it: <a href=\"https://stackoverflow.com/questions/43197379/application-singleton-use-in-android\">Application singleton use in Android</a></p>\n\n<p>After you have instance created, you can start your activity from any class you wanted like:</p>\n\n<pre><code>MyApplication.getInstance().startActivity(MyApplication.getInstance, MainAcitivity::class);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 25, "user_id": 12029277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90eb2c8390fc4d7534f5e7ab9824276c?s=128&d=identicon&r=PG&f=1", "display_name": "Tenecifer06", "link": "https://stackoverflow.com/users/12029277/tenecifer06"}, "is_accepted": false, "score": 0, "last_activity_date": 1571753579, "creation_date": 1571753579, "answer_id": 58506240, "question_id": 58502906, "link": "https://stackoverflow.com/questions/58502906/how-to-start-a-kotlin-activity-from-an-libgdx-android-class/58506240#58506240", "title": "How to start a kotlin Activity from an LibGDX Android class", "body": "<p>I think I find my answer here : <a href=\"https://stackoverflow.com/questions/26069759/android-libgdx-calling-another-activity-after-the-game-starts-on-button-click\">Android-Libgdx, Calling Another Activity after the Game starts on Button click</a></p>\n\n<p>I will check on my tablet...</p>\n"}], "owner": {"reputation": 25, "user_id": 12029277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90eb2c8390fc4d7534f5e7ab9824276c?s=128&d=identicon&r=PG&f=1", "display_name": "Tenecifer06", "link": "https://stackoverflow.com/users/12029277/tenecifer06"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 186, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1571753579, "creation_date": 1571742503, "last_edit_date": 1571742642, "question_id": 58502906, "link": "https://stackoverflow.com/questions/58502906/how-to-start-a-kotlin-activity-from-an-libgdx-android-class", "title": "How to start a kotlin Activity from an LibGDX Android class", "body": "<p>I try to open an Kotlin Activity from a LibGDX class but I am stuck ...</p>\n\n<p>I already read <a href=\"https://stackoverflow.com/questions/56975424/how-to-start-a-activity-of-kotlin-from-java-android\">How to start a Activity of Kotlin from Java android</a> and type something like the example : startActivity(new Intent(context, myKotlinActivity.kt))</p>\n\n<p>The purpose of my code is to redirect the user from a menu to an Kotlin Activity.    </p>\n\n<pre><code> @Override\n public void handleInput() {\n     if(Gdx.input.justTouched()) {\n          dispose();\n          startActivity(new Intent(context, MyActivity.kt))\n     }\n }\n</code></pre>\n\n<p>My error is : <code>Cannot resolve method startActivity(Intent)</code></p>\n\n<p>What am I forgetting ?</p>\n\n<p>Thank you very much and I apologize if it's a dumb question ...</p>\n"}, {"tags": ["android", "kotlin", "gson", "retrofit2"], "comments": [{"owner": {"reputation": 1958, "user_id": 1587271, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0922f54deeb6c8f79a378b1731bf8a41?s=128&d=identicon&r=PG", "display_name": "Jose Salvatierra", "link": "https://stackoverflow.com/users/1587271/jose-salvatierra"}, "edited": false, "score": 0, "creation_date": 1571742441, "post_id": 58502760, "comment_id": 103334244, "body": "Hey Neil, I&#39;m not familiar with Kotlin, but are you sending the body as form data? Errors starting with 5 generally mean &quot;server error, not your fault&quot;. Is it possible something&#39;s going wrong outside of your code?"}, {"owner": {"reputation": 669, "user_id": 1357957, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/bd94a7e74de0b1ba0b3497c14e7f643e?s=128&d=identicon&r=PG", "display_name": "androidneil", "link": "https://stackoverflow.com/users/1357957/androidneil"}, "reply_to_user": {"reputation": 1958, "user_id": 1587271, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0922f54deeb6c8f79a378b1731bf8a41?s=128&d=identicon&r=PG", "display_name": "Jose Salvatierra", "link": "https://stackoverflow.com/users/1587271/jose-salvatierra"}, "edited": false, "score": 0, "creation_date": 1571822740, "post_id": 58502760, "comment_id": 103364910, "body": "Ok, as I suspected, it was the format of the data being sent that was the problem. The server was expecting the body to contain a comma separated list, rather than the JSON I was sending. The solution here helped me: <a href=\"https://stackoverflow.com/questions/32656358/retrofit-2-0-beta1-how-to-post-raw-string-body\" title=\"retrofit 2 0 beta1 how to post raw string body\">stackoverflow.com/questions/32656358/&hellip;</a>"}], "owner": {"reputation": 669, "user_id": 1357957, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/bd94a7e74de0b1ba0b3497c14e7f643e?s=128&d=identicon&r=PG", "display_name": "androidneil", "link": "https://stackoverflow.com/users/1357957/androidneil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1613636279, "creation_date": 1571742049, "question_id": 58502760, "link": "https://stackoverflow.com/questions/58502760/500-error-using-skyscanner-api-with-kotlin-and-retrofit", "title": "500 error using Skyscanner API with Kotlin and Retrofit", "body": "<p>I want to connect to the Skyscanner API, using Kotlin and Retrofit. <a href=\"https://rapidapi.com/skyscanner/api/skyscanner-flight-search\" rel=\"nofollow noreferrer\">https://rapidapi.com/skyscanner/api/skyscanner-flight-search</a></p>\n\n<p>When attempting to POST the 'create session' call, I get a 500 error, but the logs aren't giving a specific reason. I can only assume that my post data isn't being formatted correctly, but I'm using Retrofit with GSon to handle this for me.</p>\n\n<p>One clue, is that in their Java sample code, they pass the form data in the following format: <strong>\"inboundDate=2019-09-10&amp;children=0&amp;adults=1\"</strong> whereas after GSon convertion from my sessionObject class, my data is in the format <strong>{\"adults\":1,\"country\":\"GB\",\"outboundDate\":\"2020-01-06\"}</strong> - I'm unsure how, using Retrofit, I can pass my data in that format, and whether that's the issue causing the 500.</p>\n\n<p>Here are some code snippets:</p>\n\n<pre><code>// my object for posting data\nclass SessionBody {\n\n    @SerializedName(\"country\")\n    var country: String = \"\"\n    @SerializedName(\"currency\")\n    var currency: String = \"\"\n    ...etc...\n\n// my interface\n@Headers(\"Content-Type: application/x-www-form-urlencoded\")\n@POST(\"pricing/v1.0/\")\nfun postUser(@Body sessionBody: SessionBody): Call&lt;Void&gt;\n\n\n// my connector class\nval interceptor = HttpLoggingInterceptor()\ninterceptor.level = HttpLoggingInterceptor.Level.BODY\nval client = OkHttpClient.Builder()\n    .addInterceptor(Interceptor { chain -&gt;\n    val original = chain.request()\n    val request = original.newBuilder()\n        .header(\"X-RapidAPI-Host\", \"skyscanner-skyscanner-flight-search-   v1.p.rapidapi.com\")\n        .header(\"X-RapidAPI-Key\", \"...my key here...\")\n        .method(original.method(), original.body())\n        .build()\n    return@Interceptor chain.proceed(request)\n})\n.addInterceptor(interceptor)\n.connectTimeout(30, TimeUnit.SECONDS)\n.readTimeout(30, TimeUnit.SECONDS)\n.build()\n\nval retrofit = Retrofit.Builder()\n.baseUrl(BASE_URL)\n.addConverterFactory(GsonConverterFactory.create(GsonBuilder().create()))\n.client(client)\n.build()\n\nval api = retrofit.create(TravelEzyApi::class.java)\nval call = api.postUser(sessionBody)\n</code></pre>\n\n<p>And here is the output from the logs... </p>\n\n<pre><code>D/OkHttp: --&gt; POST https://skyscanner-skyscanner-flight-search-v1.p.rapidapi.com/apiservices/pricing/v1.0/\nD/OkHttp: Content-Type: application/x-www-form-urlencoded\nContent-Length: 142\nX-RapidAPI-Host: skyscanner-skyscanner-flight-search-v1.p.rapidapi.com\nX-RapidAPI-Key: ... my key here ...\n{\"adults\":1,\"country\":\"GB\",\"currency\":\"GBP\",\"destinationPlace\":\"BKK-sky\",\"locale\":\"en-GB\",\"originPlace\":\"LHR-sky\",\"outboundDate\":\"2020-01-06\"}\n--&gt; END POST (142-byte body)\nD/OkHttp: &lt;-- 500 Internal Server Error \nD/OkHttp: Cache-Control: private\nContent-Type: application/json\nDate: Tue, 22 Oct 2019 10:48:44 GMT\nServer: RapidAPI-1.0.32\nX-RapidAPI-Region: AWS - eu-west-1\nX-RapidAPI-Version: 1.0.32\nContent-Length: 2\nConnection: keep-alive\n{}\nD/OkHttp: &lt;-- END HTTP (2-byte body)\n</code></pre>\n\n<p>Any help or clues greatly appreciated.</p>\n"}, {"tags": ["generics", "kotlin", "jvm", "overloading"], "comments": [{"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1571742420, "post_id": 58502716, "comment_id": 103334232, "body": "there are several solutions possible... what is the content of that function? You can use a generic type, e.g. <code>fun &lt;T&gt; putParams(vararg params : Pair&lt;String, T&gt;)</code> or use <code>@JvmName</code>-annotations... e.g. <code>@JvmName(&quot;putStringParams&quot;) fun putParams(vararg params : Pair&lt;String, String&gt;)</code>... maybe also just <code>fun putParams(vararg params: Pair&lt;String, Any&gt;)</code> already suites the purpose..."}, {"owner": {"reputation": 317, "user_id": 7990631, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/6713e0e3c848ec94430152b774c31947?s=128&d=identicon&r=PG&f=1", "display_name": "MrNetroful", "link": "https://stackoverflow.com/users/7990631/mrnetroful"}, "reply_to_user": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1571743184, "post_id": 58502716, "comment_id": 103334653, "body": "Ofc there could be when but one of Pair type is Pair&lt;String, () -&gt; String&gt; do you know how could I check instance ?"}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1571744192, "post_id": 58502716, "comment_id": 103335182, "body": "I think it is more interesting what you plan to do inside that function... for now it sounds like a xy problem to me..."}], "answers": [{"tags": [], "owner": {"reputation": 15, "user_id": 12212584, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EUNNu.png?s=128&g=1", "display_name": "k-var", "link": "https://stackoverflow.com/users/12212584/k-var"}, "is_accepted": false, "score": 0, "last_activity_date": 1571743574, "creation_date": 1571743574, "answer_id": 58503217, "question_id": 58502716, "link": "https://stackoverflow.com/questions/58502716/function-overloading-with-different-pair-types-throws/58503217#58503217", "title": "Function overloading with different pair types throws", "body": "<p>As in Java, Kotlin's type information about generics are available only in compile-time. At run-time <code>Pair&lt;String, Int&gt;</code> and <code>Pair&lt;String, String&gt;</code> are both appear same to the interpreter. Hence the method signatures are duplicated.</p>\n\n<p>As a solution I would create two separate types. </p>\n\n<pre><code>fun putParams(vararg params: StringPair) {..}\nfun putParams(vararg params: StringAndIntPair) {..}\n</code></pre>\n\n<p>see <a href=\"https://kotlinlang.org/docs/reference/generics.html#type-erasure\" rel=\"nofollow noreferrer\">Kotlin Type Erasure</a></p>\n"}, {"comments": [{"owner": {"reputation": 317, "user_id": 7990631, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/6713e0e3c848ec94430152b774c31947?s=128&d=identicon&r=PG&f=1", "display_name": "MrNetroful", "link": "https://stackoverflow.com/users/7990631/mrnetroful"}, "edited": false, "score": 0, "creation_date": 1571746397, "post_id": 58503594, "comment_id": 103336425, "body": "Is there any way to check in when clause if Any is instance of () -&gt; String/Int ?"}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "reply_to_user": {"reputation": 317, "user_id": 7990631, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/6713e0e3c848ec94430152b774c31947?s=128&d=identicon&r=PG&f=1", "display_name": "MrNetroful", "link": "https://stackoverflow.com/users/7990631/mrnetroful"}, "edited": false, "score": 0, "creation_date": 1571746702, "post_id": 58503594, "comment_id": 103336615, "body": "still... I guess that this isn&#39;t what you really want, but: <code>value is Function&lt;*&gt;</code>... I would rather look to partition that variants clearly... there must be a reason why you decided to have some values prepared immediately and some later... so what&#39;s the purpose behind that?"}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "reply_to_user": {"reputation": 317, "user_id": 7990631, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/6713e0e3c848ec94430152b774c31947?s=128&d=identicon&r=PG&f=1", "display_name": "MrNetroful", "link": "https://stackoverflow.com/users/7990631/mrnetroful"}, "edited": false, "score": 0, "creation_date": 1571747117, "post_id": 58503594, "comment_id": 103336895, "body": "note, that you do not need to delegate the <code>() -&gt; T</code>-function to the other... that was just an example... you may rather want to handle that function immediately if that makes more sense to you..."}], "tags": [], "owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "is_accepted": true, "score": 1, "last_activity_date": 1571745261, "last_edit_date": 1571745261, "creation_date": 1571744770, "answer_id": 58503594, "question_id": 58502716, "link": "https://stackoverflow.com/questions/58502716/function-overloading-with-different-pair-types-throws/58503594#58503594", "title": "Function overloading with different pair types throws", "body": "<p>Hard to guess what you really want to accomplish... Here is a solution, that allows either supplying the parameters with a supplier (<code>() -&gt; Any</code>) or by passing the actual value (<code>Any</code>):</p>\n\n<pre><code>@JvmName(\"putSupplierParams\")\nfun putParams(vararg params: Pair&lt;String, () -&gt; Any&gt;) = putParams(*params.map { (key, func) -&gt;\n    key to func()\n  }.toTypedArray()) // just delegated to the following putParams-function\n\nfun putParams(vararg params: Pair&lt;String, Any&gt;) {\n    // magic\n}\n</code></pre>\n\n<p>Usage would be:</p>\n\n<pre><code>putParams(\"key\" to \"value\")\nputParams(\"key via supplier\" to { \"supplied value\" })\n</code></pre>\n\n<p>An alternative could be:</p>\n\n<pre><code>class ParamContainer {\n  infix fun &lt;T&gt; String.to(supplier : () -&gt; T) = to(supplier())\n  infix fun &lt;T&gt; String.to(value : T) {\n    // magic\n  }\n}\n</code></pre>\n\n<p>(or instead of <code>T</code> just <code>Any</code>) with the following usage:</p>\n\n<pre><code>with(ParamContainer()) {\n  \"key\" to \"value\"\n  \"solution\" to 42\n  \"supplied\" to {\n    \"supplied value\"\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 317, "user_id": 7990631, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/6713e0e3c848ec94430152b774c31947?s=128&d=identicon&r=PG&f=1", "display_name": "MrNetroful", "link": "https://stackoverflow.com/users/7990631/mrnetroful"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 58503594, "answer_count": 2, "score": 0, "last_activity_date": 1571745261, "creation_date": 1571741888, "question_id": 58502716, "link": "https://stackoverflow.com/questions/58502716/function-overloading-with-different-pair-types-throws", "title": "Function overloading with different pair types throws", "body": "<p>So I've overloaded functions such as below:</p>\n\n<pre><code>fun putParams(vararg params: Pair&lt;String, String&gt;) {\n\n}\nfun putParams(vararg params: Pair&lt;String, Int&gt;) {\n\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/ReTAS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ReTAS.png\" alt=\"enter image description here\"></a>\nCould you recommend me the way to avoid this error? </p>\n"}, {"tags": ["kotlin", "kotlin-coroutines"], "answers": [{"comments": [{"owner": {"reputation": 212, "user_id": 8559800, "user_type": "registered", "profile_image": "https://graph.facebook.com/1437808362982706/picture?type=large", "display_name": "Roma  Pochanin", "link": "https://stackoverflow.com/users/8559800/roma-pochanin"}, "edited": false, "score": 0, "creation_date": 1571745930, "post_id": 58503450, "comment_id": 103336162, "body": "Thank you for the explanation! When I use this approach, <code>SecurityContextHolder.getContext().authentication</code> is equal null inside the <code>populateWithLeaveBalanceReports </code> method. I assume it&#39;s because SecurityContext is not shared between threads? I&#39;m having troubles calling the API as my token is stored inside the authentication object"}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "reply_to_user": {"reputation": 212, "user_id": 8559800, "user_type": "registered", "profile_image": "https://graph.facebook.com/1437808362982706/picture?type=large", "display_name": "Roma  Pochanin", "link": "https://stackoverflow.com/users/8559800/roma-pochanin"}, "edited": false, "score": 0, "creation_date": 1571746225, "post_id": 58503450, "comment_id": 103336331, "body": "Yes, it&#39;s a thread-local holder. It wasn&#39;t obvious from your question that you&#39;re running this inside a managed Spring app. I&#39;m not sure what&#39;s the policy in that context on launching arbitrary threads. But I think you can work around the missing token by retrieving it into a local variable before you enter the <code>launch</code> block."}], "tags": [], "owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "is_accepted": true, "score": 3, "last_activity_date": 1571744391, "creation_date": 1571744391, "answer_id": 58503450, "question_id": 58502601, "link": "https://stackoverflow.com/questions/58502601/kotlin-coroutines-run-synchronously-in-spite-of-launch-method-call/58503450#58503450", "title": "Kotlin Coroutines run synchronously in spite of launch method call", "body": "<p>Coroutines don't magically turn your blocking network API into non-blocking. Use <code>launch(Dispatchers.IO) { ... }</code> to run blocking tasks in an elastic thread pool. Just note that this doesn't do much more than the plain-old <code>executorService.submit(blockingTask)</code>. It's a bit more convenient because it uses a pre-constructed global thread pool.</p>\n"}, {"comments": [{"owner": {"reputation": 212, "user_id": 8559800, "user_type": "registered", "profile_image": "https://graph.facebook.com/1437808362982706/picture?type=large", "display_name": "Roma  Pochanin", "link": "https://stackoverflow.com/users/8559800/roma-pochanin"}, "edited": false, "score": 0, "creation_date": 1571746311, "post_id": 58503816, "comment_id": 103336380, "body": "Yes, indeed, I&#39;m using webflux&#39;s <code>WebClient</code> in order to hit the API. But I&#39;m using it in non-reactive way with the <code>block()</code> method. Which http client can be used instead? Fuel library maybe??"}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 1, "creation_date": 1571748229, "post_id": 58503816, "comment_id": 103337526, "body": "Why don&#39;t you continue using WebClient but start using it in a non-blocking way? Spring has built-in support for Kotlin coroutines."}], "tags": [], "owner": {"reputation": 171, "user_id": 11947145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/667e1f12f6b57a884b666fd59fe73863?s=128&d=identicon&r=PG&f=1", "display_name": "vitalyros", "link": "https://stackoverflow.com/users/11947145/vitalyros"}, "is_accepted": false, "score": 0, "last_activity_date": 1571746000, "last_edit_date": 1571746000, "creation_date": 1571745567, "answer_id": 58503816, "question_id": 58502601, "link": "https://stackoverflow.com/questions/58502601/kotlin-coroutines-run-synchronously-in-spite-of-launch-method-call/58503816#58503816", "title": "Kotlin Coroutines run synchronously in spite of launch method call", "body": "<p>These lines might be using a blocking code - the code that relies on blocking threads to wait for task completion.</p>\n\n<p><code>val receivedReports = reportsSource.getReports(employee.employeeId)\nreceivedReports { employee.addLeaveBalanceReport(it) }</code></p>\n\n<p>It is likely that you are using non asynchronous http client or jdbc driver under the hood of <code>reportsSource.getReports</code> call . </p>\n\n<p>If so, you should either</p>\n\n<ol>\n<li>rewrite the code of <code>reportsSource.getReports</code> so it would not rely on any blocking code. This is the new / non-blocking / challenging way</li>\n<li>use a threadPool executor to distribute executions manually instead of using coroutines. This is the old / simple way.</li>\n</ol>\n"}], "owner": {"reputation": 212, "user_id": 8559800, "user_type": "registered", "profile_image": "https://graph.facebook.com/1437808362982706/picture?type=large", "display_name": "Roma  Pochanin", "link": "https://stackoverflow.com/users/8559800/roma-pochanin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 501, "favorite_count": 0, "accepted_answer_id": 58503450, "answer_count": 2, "score": 2, "last_activity_date": 1571746000, "creation_date": 1571741465, "question_id": 58502601, "link": "https://stackoverflow.com/questions/58502601/kotlin-coroutines-run-synchronously-in-spite-of-launch-method-call", "title": "Kotlin Coroutines run synchronously in spite of launch method call", "body": "<p>I have a list of employees and I want to hit the API for each of them. In synchronous mode it takes a lot of time and I want to improve the performance with the coroutines. This is what I've done so far:</p>\n\n<pre><code>fun perform() = runBlocking {\n    employeesSource.getEmployees()\n            .map { launch { populateWithLeaveBalanceReports(it) } }\n            .joinAll()\n}\n\nsuspend fun populateWithLeaveBalanceReports(employee: EmployeeModel) {\n        println(\"Start ${COUTNER}\")\n        val receivedReports = reportsSource.getReports(employee.employeeId) // call to a very slow API\n        receivedReports { employee.addLeaveBalanceReport(it) }\n        println(\"Finish ${COUTNER++}\")\n    }\n</code></pre>\n\n<p>When I try to run this, the code is being run synchronously and in the console I see the following output:</p>\n\n<pre><code>Start 0\nFinish 0\nStart 1\nFinish 1\nStart 2\nFinish 2\n</code></pre>\n\n<p>which means that the calls are being done sequentially. If I replace this whole code in the <code>populateWithLeaveBalanceReports</code> function with <code>delay(1000)</code>, it will work asynchronously:</p>\n\n<pre><code>Start 0\nStart 0\nStart 0\nFinish 0\nFinish 1\nFinish 2\n</code></pre>\n\n<p>What am I doing wrong? Any ideas??</p>\n"}, {"tags": ["json", "kotlin", "serialization", "moshi", "codegen"], "answers": [{"comments": [{"owner": {"reputation": 387, "user_id": 985191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d4a9c1dc61c9ae70c7b64d074a67fc0?s=128&d=identicon&r=PG", "display_name": "Jignesh Shah", "link": "https://stackoverflow.com/users/985191/jignesh-shah"}, "edited": false, "score": 0, "creation_date": 1571804198, "post_id": 58502396, "comment_id": 103357459, "body": "Json serialisation/de-serialisation works without reflection and code-gen. My question is what&#39;s the advantage or real use of code gen?"}, {"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "reply_to_user": {"reputation": 387, "user_id": 985191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d4a9c1dc61c9ae70c7b64d074a67fc0?s=128&d=identicon&r=PG", "display_name": "Jignesh Shah", "link": "https://stackoverflow.com/users/985191/jignesh-shah"}, "edited": false, "score": 1, "creation_date": 1571820816, "post_id": 58502396, "comment_id": 103363887, "body": "@JigneshShah please check my updated answer. I hope it&#39;s more clear now :)"}, {"owner": {"reputation": 387, "user_id": 985191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d4a9c1dc61c9ae70c7b64d074a67fc0?s=128&d=identicon&r=PG", "display_name": "Jignesh Shah", "link": "https://stackoverflow.com/users/985191/jignesh-shah"}, "edited": false, "score": 0, "creation_date": 1571989018, "post_id": 58502396, "comment_id": 103427937, "body": "Thank you for the very detailed response! If I understand this correctly, using <code>@JsonClass(generateAdapter = true)</code> basically avoids the &quot;ClassJsonAdapter&quot; and hence reflection?"}, {"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "reply_to_user": {"reputation": 387, "user_id": 985191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d4a9c1dc61c9ae70c7b64d074a67fc0?s=128&d=identicon&r=PG", "display_name": "Jignesh Shah", "link": "https://stackoverflow.com/users/985191/jignesh-shah"}, "edited": false, "score": 1, "creation_date": 1571990361, "post_id": 58502396, "comment_id": 103428504, "body": "@JigneshShah basically yes, but only for classes annotated with <code>@JsonClass(generateAdapter=true)</code>. In other words, if you have 3 classes and only 1 has that annotation, then Moshi will generate an adapter only for the latter, while the other 2 classes will be serialized/deserialized using reflection"}, {"owner": {"reputation": 387, "user_id": 985191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d4a9c1dc61c9ae70c7b64d074a67fc0?s=128&d=identicon&r=PG", "display_name": "Jignesh Shah", "link": "https://stackoverflow.com/users/985191/jignesh-shah"}, "edited": false, "score": 0, "creation_date": 1572092849, "post_id": 58502396, "comment_id": 103458466, "body": "If generate adapter is only at the top level class, are adapters generated for nested classes or other referenced class objects?"}, {"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "reply_to_user": {"reputation": 387, "user_id": 985191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d4a9c1dc61c9ae70c7b64d074a67fc0?s=128&d=identicon&r=PG", "display_name": "Jignesh Shah", "link": "https://stackoverflow.com/users/985191/jignesh-shah"}, "edited": false, "score": 1, "creation_date": 1572112496, "post_id": 58502396, "comment_id": 103463010, "body": "@JigneshShah no, the codegen will generate adapters only for classes that are annotated, so you need to manually annotate inner and/or otherwise referenced classes"}], "tags": [], "owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "is_accepted": true, "score": 11, "last_activity_date": 1571820786, "last_edit_date": 1571820786, "creation_date": 1571740736, "answer_id": 58502396, "question_id": 58501918, "link": "https://stackoverflow.com/questions/58501918/whats-the-use-of-moshis-kotlin-codegen/58502396#58502396", "title": "What&#39;s the use of Moshi&#39;s Kotlin codegen?", "body": "<p>Earlier versions of Moshi didn't support \"codegen\", so they completely relied on reflection (i.e., the ability to introspect classes at runtime). However, that could be a problem for applications that require very high performance so they've added a \"codegen\" capability that takes advantage of annotation processing. Basically that allows generating code at compilation time, so they can perform serialisation/deserialisation without using reflection. </p>\n\n<p>In order to enable the code generation functionality you also need to enable Kapt, which is the Kotlin annotation processor, otherwise no annotation processing will happen.</p>\n\n<p><a href=\"https://kotlinlang.org/docs/reference/kapt.html\" rel=\"noreferrer\">Here</a> you'll find how to enable and configure Kapt, and <a href=\"https://github.com/square/moshi#codegen\" rel=\"noreferrer\">here</a> you'll find how to set up Moshi codegen dependencies.</p>\n\n<hr>\n\n<h2>EDIT</h2>\n\n<p>In the snippet of code you added to your question, Moshi uses <a href=\"https://github.com/square/moshi/blob/master/moshi/src/main/java/com/squareup/moshi/ClassJsonAdapter.java\" rel=\"noreferrer\">ClassJsonAdapter</a> to serialise your object. That adapter makes use of reflection to find all the fields and create the JSON string (you can see that class imports stuff from <code>java.lang.reflect</code>).</p>\n\n<p>On the other hand, Moshi code gen <em>generates a JsonAdapter</em> for your class for you. For instance, letting Moshi create an adapter for your <code>Person</code> class will generate the following:</p>\n\n<pre><code>// Code generated by moshi-kotlin-codegen. Do not edit.\nimport com.squareup.moshi.JsonAdapter\nimport com.squareup.moshi.JsonDataException\nimport com.squareup.moshi.JsonReader\nimport com.squareup.moshi.JsonWriter\nimport com.squareup.moshi.Moshi\nimport java.lang.NullPointerException\nimport kotlin.String\n\nclass PersonJsonAdapter(moshi: Moshi) : JsonAdapter&lt;Person&gt;() {\n    private val options: JsonReader.Options = JsonReader.Options.of(\"name\")\n\n    private val stringAdapter: JsonAdapter&lt;String&gt; =\n            moshi.adapter&lt;String&gt;(String::class.java, kotlin.collections.emptySet(), \"name\")\n\n    override fun toString(): String = \"GeneratedJsonAdapter(Person)\"\n\n    override fun fromJson(reader: JsonReader): Person {\n        var name: String? = null\n        reader.beginObject()\n        while (reader.hasNext()) {\n            when (reader.selectName(options)) {\n                0 -&gt; name = stringAdapter.fromJson(reader) ?: throw JsonDataException(\"Non-null value 'name' was null at ${reader.path}\")\n                -1 -&gt; {\n                    // Unknown name, skip it.\n                    reader.skipName()\n                    reader.skipValue()\n                }\n            }\n        }\n        reader.endObject()\n        var result = Person(\n                name = name ?: throw JsonDataException(\"Required property 'name' missing at ${reader.path}\"))\n        return result\n    }\n\n    override fun toJson(writer: JsonWriter, value: Person?) {\n        if (value == null) {\n            throw NullPointerException(\"value was null! Wrap in .nullSafe() to write nullable values.\")\n        }\n        writer.beginObject()\n        writer.name(\"name\")\n        stringAdapter.toJson(writer, value.name)\n        writer.endObject()\n    }\n}\n</code></pre>\n\n<p>As a result, when you ask for an adapter for <code>Person</code>, Moshi will use the generated <code>PersonJsonAdapter</code> instead of the <code>ClassJsonAdapter</code>.</p>\n\n<h2>Bonus</h2>\n\n<p>Moshi <a href=\"https://github.com/square/moshi/blob/master/moshi/src/main/java/com/squareup/moshi/internal/Util.java#L514\" rel=\"noreferrer\">uses reflection to instantiate the generated adapter</a> (which then gets cached, so that it gets reused next time you ask for an adapter for the same class), so that you don't need to add any extra code at all if you want to use the codegen functionality. </p>\n"}, {"comments": [{"owner": {"reputation": 387, "user_id": 985191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d4a9c1dc61c9ae70c7b64d074a67fc0?s=128&d=identicon&r=PG", "display_name": "Jignesh Shah", "link": "https://stackoverflow.com/users/985191/jignesh-shah"}, "edited": false, "score": 0, "creation_date": 1571989144, "post_id": 58549388, "comment_id": 103427977, "body": "Thank you! I have a question wrt @user2340612&#39;s answer: If I understand this correctly, using <code>@JsonClass(generateAdapter = true)</code> basically avoids the &quot;ClassJsonAdapter&quot; and hence reflection?"}, {"owner": {"reputation": 2845, "user_id": 3323598, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/85a1166e93654865b4dcafdafe2b2dfd?s=128&d=identicon&r=PG", "display_name": "Zac Sweers", "link": "https://stackoverflow.com/users/3323598/zac-sweers"}, "reply_to_user": {"reputation": 387, "user_id": 985191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d4a9c1dc61c9ae70c7b64d074a67fc0?s=128&d=identicon&r=PG", "display_name": "Jignesh Shah", "link": "https://stackoverflow.com/users/985191/jignesh-shah"}, "edited": false, "score": 0, "creation_date": 1572816058, "post_id": 58549388, "comment_id": 103668692, "body": "Right. It indicates to Moshi that there is a generated adapter that should be used. It\u2019s also used by the Moshi code gen annotation processor to indicate which classes should have an adapter generated for them."}], "tags": [], "owner": {"reputation": 2845, "user_id": 3323598, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/85a1166e93654865b4dcafdafe2b2dfd?s=128&d=identicon&r=PG", "display_name": "Zac Sweers", "link": "https://stackoverflow.com/users/3323598/zac-sweers"}, "is_accepted": false, "score": 17, "last_activity_date": 1571952699, "creation_date": 1571952699, "answer_id": 58549388, "question_id": 58501918, "link": "https://stackoverflow.com/questions/58501918/whats-the-use-of-moshis-kotlin-codegen/58549388#58549388", "title": "What&#39;s the use of Moshi&#39;s Kotlin codegen?", "body": "<p>This is sort of three questions</p>\n\n<ol>\n<li>Why is code gen useful</li>\n</ol>\n\n<p>Code gen is useful as a compile-time alternative to the reflective moshi-kotlin. Both of them are useful because they natively understand Kotlin code and its language features. Without them, Moshi would not be able to understand Kotlin nullability, default values, and much more. There are cases where Moshi works by coincidence with just standard Java reflection, your example above is one of them. This is super error prone though, and in Moshi 1.9 these will be rejected and require either a generated adapter or kotlin-reflect.</p>\n\n<ol start=\"2\">\n<li>How does it work</li>\n</ol>\n\n<p>Code gen is an annotation processor that looks for classes annotated with <code>@JsonClass(generateAdapter = true)</code>. It generates an optimized streaming adapter for each annotated class. These adapters are Kotlin themselves and thus capable of leveraging Kotlin language features that support the target class. At runtime, Moshi reflectively looks up the generated adapter with a very simple known name suffix, which allows these adapters to Just Work without manual adapter registration.</p>\n\n<p>You can find more info on both 1 and 2 in my blog post about it when it was released: <a href=\"https://www.zacsweers.dev/exploring-moshis-kotlin-code-gen/\" rel=\"noreferrer\">https://www.zacsweers.dev/exploring-moshis-kotlin-code-gen/</a></p>\n\n<ol start=\"3\">\n<li>When should it be used</li>\n</ol>\n\n<p>You should use moshi-kotlin or code gen any time you are trying to serialize a Kotlin class with Moshi without your own custom adapter. Reflection will have no build time overhead but be far slower at runtime while also incurring a large binary size cost due to kotlin-reflect and cannot be safely obfuscated. Code gen incurs a build time cost but is extremely fast at runtime with minimal binary size cost and mostly obfuscation-safe. It's up to you which of these is better suited to your use case! You can also use a combination, such as reflection in debug builds and code gen just for release builds.</p>\n"}], "owner": {"reputation": 387, "user_id": 985191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d4a9c1dc61c9ae70c7b64d074a67fc0?s=128&d=identicon&r=PG", "display_name": "Jignesh Shah", "link": "https://stackoverflow.com/users/985191/jignesh-shah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6805, "favorite_count": 1, "accepted_answer_id": 58502396, "answer_count": 2, "score": 12, "last_activity_date": 1571952699, "creation_date": 1571739059, "question_id": 58501918, "link": "https://stackoverflow.com/questions/58501918/whats-the-use-of-moshis-kotlin-codegen", "title": "What&#39;s the use of Moshi&#39;s Kotlin codegen?", "body": "<p>I've recently started using Moshi for my Android app and I'm curious to know more about what the annotation <code>@JsonClass(generateAdapter = true)</code> <em>really</em> does.</p>\n\n<p>Example data class:</p>\n\n<pre><code>data class Person(\n    val name: String\n)\n</code></pre>\n\n<p>I'm able to serialise/de-serialise this class as follows:</p>\n\n<pre><code>val moshi: Moshi = Moshi.Builder().build()\nmoshi.adapter(Person::class.java).toJson(Person())\n</code></pre>\n\n<p>I'm <strong>not</strong> using the @JsonClass annotation here and hence codegen won't kick in.</p>\n\n<p>My question is, why and when do I need to use <code>@JsonClass(generateAdapter = true)</code></p>\n"}, {"tags": ["android", "kotlin", "android-toolbar", "bottomnavigationview"], "comments": [{"owner": {"reputation": 2836, "user_id": 8007341, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IbCY-UgNEuA/AAAAAAAAAAI/AAAAAAAAAac/1BHnkNdpfu0/photo.jpg?sz=128", "display_name": "Kishan Maurya", "link": "https://stackoverflow.com/users/8007341/kishan-maurya"}, "edited": false, "score": 0, "creation_date": 1571737273, "post_id": 58501094, "comment_id": 103331433, "body": "Create one method to gone/visible mainToolbar in activity. Now for each fragment in onAttach() make visibility gone &amp; onDeatch() make visibility visible.   So when any fragment get attach then visibility become gone and when you backpress  then fragment get detach and toolbar become visible.  So use as per your requirements"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "reply_to_user": {"reputation": 2836, "user_id": 8007341, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IbCY-UgNEuA/AAAAAAAAAAI/AAAAAAAAAac/1BHnkNdpfu0/photo.jpg?sz=128", "display_name": "Kishan Maurya", "link": "https://stackoverflow.com/users/8007341/kishan-maurya"}, "edited": false, "score": 0, "creation_date": 1571740380, "post_id": 58501094, "comment_id": 103333218, "body": "@KishanMaurya he is trying to make CoordinatorLayout work, there is no need to mess with actual visibility."}], "answers": [{"tags": [], "owner": {"reputation": 204, "user_id": 12010124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3561293881944b392b684bf9dc4096ca?s=128&d=identicon&r=PG&f=1", "display_name": "PhillauSofia", "link": "https://stackoverflow.com/users/12010124/phillausofia"}, "is_accepted": false, "score": 0, "last_activity_date": 1571749632, "creation_date": 1571749632, "answer_id": 58505028, "question_id": 58501094, "link": "https://stackoverflow.com/questions/58501094/android-how-to-show-toolbar-after-hiding-by-scrolling-down-in-recyclerview/58505028#58505028", "title": "Android how to show toolbar after hiding (by scrolling down in RecyclerView)", "body": "<p>Can you show us some code on how are you making the toolbar disappear?</p>\n"}, {"comments": [{"owner": {"reputation": 153, "user_id": 9495357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vfWXJ.png?s=128&g=1", "display_name": "Oktawian", "link": "https://stackoverflow.com/users/9495357/oktawian"}, "edited": false, "score": 0, "creation_date": 1571755852, "post_id": 58505295, "comment_id": 103342030, "body": "That works. Thank you. But can I do it without animation?"}, {"owner": {"reputation": 633, "user_id": 12134991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5XfOD.jpg?s=128&g=1", "display_name": "Vitalii Malyi", "link": "https://stackoverflow.com/users/12134991/vitalii-malyi"}, "reply_to_user": {"reputation": 153, "user_id": 9495357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vfWXJ.png?s=128&g=1", "display_name": "Oktawian", "link": "https://stackoverflow.com/users/9495357/oktawian"}, "edited": false, "score": 1, "creation_date": 1571757277, "post_id": 58505295, "comment_id": 103342793, "body": "@Oktawian yes, there&#39;s an overloaded method <a href=\"https://developer.android.com/reference/com/google/android/material/appbar/AppBarLayout.html#setexpanded\" rel=\"nofollow noreferrer\">setExpanded(boolean expanded, boolean animate)</a>, you should just add false, like this <code>setExpanded(true, false)</code>"}, {"owner": {"reputation": 153, "user_id": 9495357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vfWXJ.png?s=128&g=1", "display_name": "Oktawian", "link": "https://stackoverflow.com/users/9495357/oktawian"}, "edited": false, "score": 0, "creation_date": 1571760139, "post_id": 58505295, "comment_id": 103344361, "body": "Works perfectly. Thanks again :)"}], "tags": [], "owner": {"reputation": 633, "user_id": 12134991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5XfOD.jpg?s=128&g=1", "display_name": "Vitalii Malyi", "link": "https://stackoverflow.com/users/12134991/vitalii-malyi"}, "is_accepted": true, "score": 1, "last_activity_date": 1571750504, "creation_date": 1571750504, "answer_id": 58505295, "question_id": 58501094, "link": "https://stackoverflow.com/questions/58501094/android-how-to-show-toolbar-after-hiding-by-scrolling-down-in-recyclerview/58505295#58505295", "title": "Android how to show toolbar after hiding (by scrolling down in RecyclerView)", "body": "<p>When you change fragments you should call <a href=\"https://developer.android.com/reference/com/google/android/material/appbar/AppBarLayout.html#setexpanded_1\" rel=\"nofollow noreferrer\">AppBarLayout.setExpanded(true)</a></p>\n"}], "owner": {"reputation": 153, "user_id": 9495357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vfWXJ.png?s=128&g=1", "display_name": "Oktawian", "link": "https://stackoverflow.com/users/9495357/oktawian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 58505295, "answer_count": 2, "score": 0, "last_activity_date": 1571750504, "creation_date": 1571736390, "last_edit_date": 1571741241, "question_id": 58501094, "link": "https://stackoverflow.com/questions/58501094/android-how-to-show-toolbar-after-hiding-by-scrolling-down-in-recyclerview", "title": "Android how to show toolbar after hiding (by scrolling down in RecyclerView)", "body": "<p>I have <em>BottomNavigationView</em> with three fragments. First one has a <em>RecyclerView</em> and I implemented to hide Toolbar after scrolling this RecyclerView and it works. When I change fragment I would like to show it again (actionbar) - but actionbar.isShowing() returns true and actionbar.show() doesn't work. Maybe somebody has an idea?</p>\n\n<p>activity_main.xml</p>\n\n<pre><code>&lt;androidx.coordinatorlayout.widget.CoordinatorLayout\n     xmlns:android=\"http://schemas.android.com/apk/res/android\"\n     xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n     xmlns:tools=\"http://schemas.android.com/tools\"\n     android:layout_width=\"match_parent\"\n     android:layout_height=\"match_parent\"\n     android:background=\"@android:color/white\"\n     tools:context=\".main.MainActivity\"&gt;\n\n&lt;com.google.android.material.appbar.AppBarLayout\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"?attr/actionBarSize\"&gt;\n\n    &lt;androidx.appcompat.widget.Toolbar\n        android:id=\"@+id/mainToolbar\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        app:layout_scrollFlags=\"scroll|enterAlways|snap\"\n        app:title=\"@string/app_name\"/&gt;\n\n&lt;/com.google.android.material.appbar.AppBarLayout&gt;\n\n&lt;com.google.android.material.bottomnavigation.BottomNavigationView\n    android:id=\"@+id/mainNav\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"56dp\"\n    android:background=\"@android:color/white\"\n    app:layout_behavior=\"com.google.android.material.bottomsheet.BottomSheetBehavior\"\n    app:menu=\"@menu/user_tabs_menu\" /&gt;\n\n&lt;FrameLayout\n    android:id=\"@+id/mainFrameLayout\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    app:layout_behavior=\"@string/appbar_scrolling_view_behavior\" /&gt;\n\n&lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;\n</code></pre>\n"}, {"tags": ["android", "facebook", "firebase", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 19, "user_id": 8145893, "user_type": "registered", "profile_image": "https://graph.facebook.com/1385909808157896/picture?type=large", "display_name": "Hakan Erba\u015f", "link": "https://stackoverflow.com/users/8145893/hakan-erba%c5%9f"}, "is_accepted": false, "score": 0, "last_activity_date": 1571766895, "creation_date": 1571766895, "answer_id": 58509884, "question_id": 58500995, "link": "https://stackoverflow.com/questions/58500995/firebase-facebook-login-even-if-cleared-cache-and-logout-after-uninstall-app/58509884#58509884", "title": "Firebase Facebook Login Even If Cleared Cache and Logout after Uninstall App", "body": "<p>While i was trying to find solution, i got this question&amp;answer. </p>\n\n<p><a href=\"https://stackoverflow.com/questions/48660300/firebase-authentication-returning-specific-user-when-app-is-uninstalled-and-inst\">Answer of question</a></p>\n"}], "owner": {"reputation": 19, "user_id": 8145893, "user_type": "registered", "profile_image": "https://graph.facebook.com/1385909808157896/picture?type=large", "display_name": "Hakan Erba\u015f", "link": "https://stackoverflow.com/users/8145893/hakan-erba%c5%9f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571766895, "creation_date": 1571736057, "last_edit_date": 1571736423, "question_id": 58500995, "link": "https://stackoverflow.com/questions/58500995/firebase-facebook-login-even-if-cleared-cache-and-logout-after-uninstall-app", "title": "Firebase Facebook Login Even If Cleared Cache and Logout after Uninstall App", "body": "<p>My app has authentication via Facebook/Firebase. Whole application is made by fragments and ofc one activity.</p>\n\n<p><strong>Case (simply):</strong></p>\n\n<p>There are <strong>2 fragments</strong> : <code>howToFragment</code> and <code>mainFragment</code> .</p>\n\n<p>I uninstalled app after clearing cache and <code>signout</code> from firebase and facebook. </p>\n\n<p>In <code>howToFragment</code>, i check that is there already a user logged-in or not. </p>\n\n<pre><code>override fun onStart() {\n    super.onStart()\n    firebaseAuth = FirebaseAuth.getInstance()\n    val user = firebaseAuth!!.currentUser\n    if (user != null) {\n        this.view?.let { Navigation.findNavController(it).navigate(R.id.action_howtoFragment_to_mainFragment) } // This will be navigated to main fragment.\n    }\n\n    /*firebaseAuth!!.signOut()\n    LoginManager.getInstance().logOut()*/\n}\n</code></pre>\n\n<p>Then i install app in debug mode. I see that user is logged-in and navigated to MainFragment. When i check the id of user, i see that it is my main facebook account id (ofc i made so many test with it, but never used for 2 week, it is not even logged-in facebook app)</p>\n\n<p>After that, i close the app (not uninstall). When i open it again, i see that there is no signed in user, firebaseAuth is null. (i dont know how it signout, because there is no code for sign out in app) But facebook is log-in status.</p>\n\n<p>I guess, i miss an obvious point, but what? </p>\n\n<p>Is there a default user, or mis cache? </p>\n"}, {"tags": ["java", "android", "kotlin", "android-room"], "comments": [{"owner": {"reputation": 9541, "user_id": 1568530, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001179991520/picture?type=large", "display_name": "Vladyslav Matviienko", "link": "https://stackoverflow.com/users/1568530/vladyslav-matviienko"}, "edited": false, "score": 1, "creation_date": 1571736118, "post_id": 58500969, "comment_id": 103330794, "body": "how exactly is it not working? What it does instead?"}, {"owner": {"reputation": 1, "user_id": 11747753, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-VakvtcrccDQ/AAAAAAAAAAI/AAAAAAAAAm0/tmJPS3WCWNs/photo.jpg?sz=128", "display_name": "D&#225;niel Miszori", "link": "https://stackoverflow.com/users/11747753/d%c3%a1niel-miszori"}, "reply_to_user": {"reputation": 9541, "user_id": 1568530, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001179991520/picture?type=large", "display_name": "Vladyslav Matviienko", "link": "https://stackoverflow.com/users/1568530/vladyslav-matviienko"}, "edited": false, "score": 0, "creation_date": 1571736468, "post_id": 58500969, "comment_id": 103330994, "body": "nothing :D no error no warning no runtimeException , Try catch- &gt; nothing exception , so is result empty array.  But valid result is ~ 100 row"}, {"owner": {"reputation": 31155, "user_id": 4744514, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RQ2Np.jpg?s=128&g=1", "display_name": "MikeT", "link": "https://stackoverflow.com/users/4744514/miket"}, "edited": false, "score": 0, "creation_date": 1571737541, "post_id": 58500969, "comment_id": 103331602, "body": "I&#39;d suggest trying without the where clause e.g. @Query(&quot;SELECT (CASE when xDataValue.id IS NULL THEN -1 ELSE xDataValue.id END) AS uid, &#39;x&#39; AS type, (CASE when xData.sentAt IS NULL THEN 0 ELSE xData.sentAt END) AS sentAt, xDataValue.Value AS value FROM xData INNER JOIN xDataValue ON (xDataValue.xDataId = xData.uid) /*WHERE xData.uid IN (SELECT uid FROM xData WHERE sentAt IS NULL AND uid IN (SELECT xDataId FROM xDataValue) */ ORDER BY uid ASC LIMIT 20)&quot;). If that produces results then progressively apply the WHERE clause (I suspect that asSent may never be null)."}, {"owner": {"reputation": 1, "user_id": 11747753, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-VakvtcrccDQ/AAAAAAAAAAI/AAAAAAAAAm0/tmJPS3WCWNs/photo.jpg?sz=128", "display_name": "D&#225;niel Miszori", "link": "https://stackoverflow.com/users/11747753/d%c3%a1niel-miszori"}, "edited": false, "score": 0, "creation_date": 1571742630, "post_id": 58500969, "comment_id": 103334333, "body": "Yes i tried but this query is result 100 row in dbBorwser , and result [] in Android on the same database. therefore i dont understand."}, {"owner": {"reputation": 1, "user_id": 11747753, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-VakvtcrccDQ/AAAAAAAAAAI/AAAAAAAAAm0/tmJPS3WCWNs/photo.jpg?sz=128", "display_name": "D&#225;niel Miszori", "link": "https://stackoverflow.com/users/11747753/d%c3%a1niel-miszori"}, "edited": false, "score": 0, "creation_date": 1571745602, "post_id": 58500969, "comment_id": 103335973, "body": "So, i tried everithing , but nothing happend, .. it was a big bugbear because i delete database and restart app,, voala worked -_- ."}], "owner": {"reputation": 1, "user_id": 11747753, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-VakvtcrccDQ/AAAAAAAAAAI/AAAAAAAAAm0/tmJPS3WCWNs/photo.jpg?sz=128", "display_name": "D&#225;niel Miszori", "link": "https://stackoverflow.com/users/11747753/d%c3%a1niel-miszori"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571739943, "creation_date": 1571735954, "last_edit_date": 1571739943, "question_id": 58500969, "link": "https://stackoverflow.com/questions/58500969/room-with-android-query-this-query-working-in-another-sqlite-browser-but-not-in", "title": "Room with Android Query. This query working in another SQLite browser but not in Android", "body": "<p>I have written one simple query and is working fine, fast in the DB browser, but query not working in Android. I don't understand why. Another simple query, \"Select * from table\" is ok. Error/warning does not occur. Path: ForgroundService - > inner class myThread</p>\n\n<p>my code:</p>\n\n<pre><code>override fun run() {\n    val xListFromDB :List&lt;xDataFromDBToServer&gt; = \n      AppDatabase.getInstance(mContext).xValueDatabaseDao().getData();\n    Log.e(TAG, \"$TAGDBTHREAD + allxData  ${xListFromDB.size}\")   //--&gt; is 0\n}\n</code></pre>\n\n<p>and DAO</p>\n\n<pre><code>@Query(\"SELECT \n         (CASE  \n         when xDataValue.id IS NULL  \n         THEN -1  \n         ELSE xDataValue.id  \n         END) AS uid,   \n        'x' AS type,\n         (CASE  \n         when xData.sentAt IS NULL  \n         THEN 0  \n         ELSE xData.sentAt  \n         END) AS sentAt,   \n         xDataValue.Value AS value\n         FROM xData   \n         INNER JOIN xDataValue ON (xDataValue.xDataId =  xData.uid)   \n        WHERE xData.uid IN (SELECT uid  \n          FROM xData  \n           WHERE sentAt IS NULL  \n            AND uid IN (SELECT xDataId  \n              FROM xDataValue)  \n            ORDER BY uid ASC  \n            LIMIT 20)\")\nfun getData(): List&lt;xDataFromDBToServer&gt;\n</code></pre>\n\n<p>Does anyone have any ideas? Thanks, guys</p>\n"}, {"tags": ["arrays", "listview", "kotlin"], "comments": [{"owner": {"reputation": 2796, "user_id": 7508302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bHYHM.jpg?s=128&g=1", "display_name": "Cililing", "link": "https://stackoverflow.com/users/7508302/cililing"}, "edited": false, "score": 0, "creation_date": 1571736002, "post_id": 58500929, "comment_id": 103330718, "body": "What is a rule to combine two items in one array? Why &quot;david&quot; was put with &quot;daniel&quot; in the same array?"}, {"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1571741436, "post_id": 58500929, "comment_id": 103333709, "body": "why should &quot;David&quot; and &quot;Daniel&quot; be in the same group, but &quot;Jane&quot; and &quot;John&quot; should not? Is there any additional logic other than grouping by the name&#39;s first letter?"}, {"owner": {"reputation": 85, "user_id": 5929213, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/934f8bec2da7f3634b7a22a676e43475?s=128&d=identicon&r=PG&f=1", "display_name": "Terry", "link": "https://stackoverflow.com/users/5929213/terry"}, "edited": false, "score": 0, "creation_date": 1571752753, "post_id": 58500929, "comment_id": 103340133, "body": "Sorry i\u2019ve changed jane to keith"}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 5929213, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/934f8bec2da7f3634b7a22a676e43475?s=128&d=identicon&r=PG&f=1", "display_name": "Terry", "link": "https://stackoverflow.com/users/5929213/terry"}, "edited": false, "score": 0, "creation_date": 1571816486, "post_id": 58505558, "comment_id": 103361775, "body": "this worked! im still figuring out how to display them in my listView adapter! hey Thanks for your help!"}], "tags": [], "owner": {"reputation": 204, "user_id": 12010124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3561293881944b392b684bf9dc4096ca?s=128&d=identicon&r=PG&f=1", "display_name": "PhillauSofia", "link": "https://stackoverflow.com/users/12010124/phillausofia"}, "is_accepted": true, "score": 1, "last_activity_date": 1571751337, "creation_date": 1571751337, "answer_id": 58505558, "question_id": 58500929, "link": "https://stackoverflow.com/questions/58500929/kotlin-add-elements-in-array-as-sections/58505558#58505558", "title": "kotlin add elements in array as sections", "body": "<p>If I am right, you're trying to create an ArrayList that contains other ArrayLists. So writing:</p>\n\n<pre><code>var d = ArrayList&lt;CustomClass&gt;(arrayListOf&lt;CustomClass&gt;())\n</code></pre>\n\n<p>Won't work because the type of the main ArrayList is not String, but ArrayList. So you need to write:</p>\n\n<pre><code>var names = ArrayList&lt;ArrayList&lt;String&gt;&gt;()\nnames.add(arrayListOf(\"jane\", \"john))\n</code></pre>\n\n<p>Regarding the second question, check out this course that has a section about RecyclerView: <a href=\"https://classroom.udacity.com/courses/ud9012\" rel=\"nofollow noreferrer\">https://classroom.udacity.com/courses/ud9012</a> If you are a beginner, I strongly encourage you to follow the whole tutorial.</p>\n"}], "owner": {"reputation": 85, "user_id": 5929213, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/934f8bec2da7f3634b7a22a676e43475?s=128&d=identicon&r=PG&f=1", "display_name": "Terry", "link": "https://stackoverflow.com/users/5929213/terry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 58505558, "answer_count": 1, "score": -1, "last_activity_date": 1571752704, "creation_date": 1571735827, "last_edit_date": 1571752704, "question_id": 58500929, "link": "https://stackoverflow.com/questions/58500929/kotlin-add-elements-in-array-as-sections", "title": "kotlin add elements in array as sections", "body": "<p>Can anyone teach me how to initiate/add items in array as section? \nsomething like - array[[\"john\"],[\"daniel\"],[\"jane\"]]\ntried a few like <code>var d = ArrayList&lt;CustomClass&gt;(arrayListOf&lt;CustomClass&gt;())</code>\nthat does not work. \nfor example, if i add \"david\" i want it look like array[[\"john\"],[\"daniel\", \"david\"],[\u201ckeith\"]] by finding the index of array contains letter \"d\"</p>\n\n<p>how can i display them on a custom base adapter / listview? currently using a viewHolder</p>\n\n<pre><code>val viewHolder = ViewHolder(row.name) to display. \n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 300, "user_id": 7528285, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212123161171300/picture?type=large", "display_name": "diAz", "link": "https://stackoverflow.com/users/7528285/diaz"}, "is_accepted": true, "score": 0, "last_activity_date": 1571759435, "last_edit_date": 1571759435, "creation_date": 1571757299, "answer_id": 58507378, "question_id": 58500717, "link": "https://stackoverflow.com/questions/58500717/consent-sdk-consentstatus-become-unknown-again/58507378#58507378", "title": "Consent SDK : consentStatus become UNKNOWN again", "body": "<p>by default, all advertisers are selected in the admob console. That's why I was able to solve my problem by going to the blocking settings section for users in the European Union.</p>\n\n<p>click <em>Blocking controls</em> and then <em>EU user consent</em></p>\n\n<p><a href=\"https://support.google.com/admob/answer/7666519#providers\" rel=\"nofollow noreferrer\">https://support.google.com/admob/answer/7666519#providers</a></p>\n"}, {"comments": [{"owner": {"reputation": 300, "user_id": 7528285, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212123161171300/picture?type=large", "display_name": "diAz", "link": "https://stackoverflow.com/users/7528285/diaz"}, "edited": false, "score": 0, "creation_date": 1583143647, "post_id": 60460717, "comment_id": 107004049, "body": "I don&#39;t think so because it seems to me that 1.0.8 didn&#39;t exist at the time I asked the question."}], "tags": [], "owner": {"reputation": 163, "user_id": 6302468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2IbRz.jpg?s=128&g=1", "display_name": "Muzzle", "link": "https://stackoverflow.com/users/6302468/muzzle"}, "is_accepted": false, "score": 1, "last_activity_date": 1582933750, "creation_date": 1582933750, "answer_id": 60460717, "question_id": 58500717, "link": "https://stackoverflow.com/questions/58500717/consent-sdk-consentstatus-become-unknown-again/60460717#60460717", "title": "Consent SDK : consentStatus become UNKNOWN again", "body": "<p>This is the first result that came up on Google and I tried your solution but it didn't resolve the issue. In my case I was using:</p>\n\n<pre><code>com.google.android.ads.consent:consent-library:1.0.6\n</code></pre>\n\n<p>The issue was resolved by upgrading to:</p>\n\n<pre><code>com.google.android.ads.consent:consent-library:1.0.8\n</code></pre>\n\n<p>Google removed the restriction on using Google rendered consent form with the commonly used set of ad technology providers in 1.0.6 and changed logic for re-consent prompts in 1.0.8 - as seen here: <a href=\"https://github.com/googleads/googleads-consent-sdk-android/blob/master/ChangeLog.md\" rel=\"nofollow noreferrer\">https://github.com/googleads/googleads-consent-sdk-android/blob/master/ChangeLog.md</a></p>\n\n<p>Could it be that you also changed your library version without realising?</p>\n"}], "owner": {"reputation": 300, "user_id": 7528285, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212123161171300/picture?type=large", "display_name": "diAz", "link": "https://stackoverflow.com/users/7528285/diaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 360, "favorite_count": 0, "accepted_answer_id": 58507378, "answer_count": 2, "score": 1, "last_activity_date": 1582933750, "creation_date": 1571735147, "last_edit_date": 1571735697, "question_id": 58500717, "link": "https://stackoverflow.com/questions/58500717/consent-sdk-consentstatus-become-unknown-again", "title": "Consent SDK : consentStatus become UNKNOWN again", "body": "<p>I'm currently trying to integrate the Google Consent SDK. \nsomething is happening that I don't understand with the <code>onConsentInfoUpdated(consentStatus:ConsentStatus)</code> function</p>\n\n<ol>\n<li><p>User opens the app for the first time and makes a choice when the popup is diplayed\n<code>Consent.Status -&gt; UNKNOWN</code></p></li>\n<li><p>User kills / re-opens the app.\nSometimes <code>Consent.Status -&gt; PERSONALIZED</code> or <code>Consent.Status -&gt; UNKNOWN</code> and user makes a choice again.</p>\n\n<ul>\n<li>here my code:</li>\n</ul></li>\n</ol>\n\n<pre class=\"lang-java prettyprint-override\"><code>    fun requestConsent(activity: Activity) {\n        val consentInformation = ConsentInformation.getInstance(activity)\n        val publisherIds = arrayOf(activity.getString(R.string.admob_publisher_id))\n        consentInformation.requestConsentInfoUpdate(publisherIds, object : ConsentInfoUpdateListener {\n            override fun onConsentInfoUpdated(consentStatus: ConsentStatus) {\n                Log.d(\"test--\", consentStatus.toString())\n                when (consentStatus) {\n                    ConsentStatus.PERSONALIZED -&gt; showPersonalizedAds()\n                    ConsentStatus.NON_PERSONALIZED -&gt; showNonPersonalizedAds()\n                    ConsentStatus.UNKNOWN -&gt; loadConsentForm(activity)\n                }\n            }\n\n            override fun onFailedToUpdateConsentInfo(errorDescription: String) {\n                 //onFailedToUpdateConsentInfo()\n            }\n        })\n    }\n\n    private fun showPersonalizedAds() {\n        ConsentInformation.getInstance(activity).consentStatus = ConsentStatus.PERSONALIZED\n    }\n\n    private fun showNonPersonalizedAds() {\n        ConsentInformation.getInstance(activity).consentStatus = ConsentStatus.NON_PERSONALIZED\n    }\n</code></pre>\n\n<ul>\n<li>here my logs: </li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/x2iWM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/x2iWM.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["kotlin", "spring-security", "kotlin-coroutines"], "answers": [{"tags": [], "owner": {"reputation": 723, "user_id": 797108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0456f790248fed936e6ced48654a91aa?s=128&d=identicon&r=PG", "display_name": "C-Shark", "link": "https://stackoverflow.com/users/797108/c-shark"}, "is_accepted": true, "score": 1, "last_activity_date": 1571766158, "last_edit_date": 1571766158, "creation_date": 1571765609, "answer_id": 58509584, "question_id": 58500643, "link": "https://stackoverflow.com/questions/58500643/why-securitycontextholder-getcontext-authentication-becomes-equal-null-inside/58509584#58509584", "title": "Why SecurityContextHolder.getContext().authentication becomes equal null inside the Kotlin async method?", "body": "<p>If I recall correctly the <code>SecurityContextHolder.getContext()</code> holds a thread-local reference to the authentication object. Using coroutines you actually switch to another thread (which does not have a thread-local authentication object).</p>\n\n<p>I think passing the authentication object could work, that was my first idea too when i started to read your question. Why do you want to avoid this?</p>\n\n<p>Perhaps you can create a coroutine context with auth object (or is there an existing one for this purpose?), but it's only a guess from me, i have no real experience with coroutines yet.</p>\n\n<p>edit:\nBy a quick search i found this. You can find interesting ideas in this thread:\n<a href=\"https://github.com/Kotlin/kotlinx.coroutines/issues/119\" rel=\"nofollow noreferrer\">https://github.com/Kotlin/kotlinx.coroutines/issues/119</a></p>\n"}], "owner": {"reputation": 212, "user_id": 8559800, "user_type": "registered", "profile_image": "https://graph.facebook.com/1437808362982706/picture?type=large", "display_name": "Roma  Pochanin", "link": "https://stackoverflow.com/users/8559800/roma-pochanin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 419, "favorite_count": 0, "accepted_answer_id": 58509584, "answer_count": 1, "score": 1, "last_activity_date": 1571766158, "creation_date": 1571734921, "last_edit_date": 1571738581, "question_id": 58500643, "link": "https://stackoverflow.com/questions/58500643/why-securitycontextholder-getcontext-authentication-becomes-equal-null-inside", "title": "Why SecurityContextHolder.getContext().authentication becomes equal null inside the Kotlin async method?", "body": "<p>I'm new to Kotlin Coroutines and I want to call the API for each of my employees in asynchronous way. But I faced the problem that iside the new coroutine I'm unable to retrieve authentication from the <code>SecurityContextHolder.getContext</code>. </p>\n\n<p>Can anybody explain please why <code>SecurityContextHolder.getContext().authentication</code> becomes equal <code>null</code> inside <code>GlobalScope.async{...}</code> block in Kotlin? Does a new coroutine have a separate security context? And how do I solve this issue? I there a way to avoid passing the authentication from the calling <code>perform()</code> function to the <code>callApi()</code> function?</p>\n\n<p>Below you can find the code snippet:</p>\n\n<pre><code>fun perform() {\n    // SecurityContextHolder.getContext().authentication contains some value!!!\n\n    val deferred = employeesRepository.getEmployees().map { callApi(it) }\n\n    runBlocking {\n        deferred.forEach { it.await() }\n    }\n\n}\n\nfun callApi(employee: EmployeeModel) = GlobalScope.async {\n    // SecurityContextHolder.getContext().authentication is null here!!!\n}\n</code></pre>\n"}, {"tags": ["android", "unit-testing", "kotlin"], "comments": [{"owner": {"reputation": 2796, "user_id": 7508302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bHYHM.jpg?s=128&g=1", "display_name": "Cililing", "link": "https://stackoverflow.com/users/7508302/cililing"}, "edited": false, "score": 0, "creation_date": 1571736089, "post_id": 58500347, "comment_id": 103330768, "body": "The first question you should ask yourself is what do you want to test? Testing only for testing is worthless. Way of writing tests is quite simple and I am almost sure you know it (prepare, execute, check). The code you published looks a good code, I mean there is no static dependencies there, so it&#39;s seems to be a something good for testing, but, like I said - the question is what you want to test."}], "owner": {"reputation": 51, "user_id": 6795397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad95fa141951f4ebf5fd909c47ec0731?s=128&d=identicon&r=PG&f=1", "display_name": "Rustam", "link": "https://stackoverflow.com/users/6795397/rustam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1571733886, "creation_date": 1571733886, "question_id": 58500347, "link": "https://stackoverflow.com/questions/58500347/how-write-unit-test-for-my-gps-interactor-class", "title": "How write unit test for my gps interactor class?", "body": "<p><em>This class work fine and now i am interesting how write unit test</em></p>\n\n<p>I have two independent flows: </p>\n\n<ul>\n<li>location </li>\n<li>gps status</li>\n</ul>\n\n<p>I use <strong>publish subject</strong> for make my interactor in reactive manner.\nBoth flows mix with function <strong>Observable.withLatestFrom</strong> where i additionally add filtration and transformation.</p>\n\n<p>Is it my gps class written correct ? </p>\n\n<p>Can this class be tested ?</p>\n\n<p>I need to test <strong>initFullLocationObservable</strong></p>\n\n<pre><code>class GpsInteractor @Inject constructor(\n        private val locationManager: LocationManager,\n        private val googleApiClient: GoogleApiClient,\n        private val locationRequest: LocationRequest): GoogleApiClient.ConnectionCallbacks, LocationListener, GpsStatus.Listener {\n\n        private var gpsStatus: GpsStatus? = null\n        val locationSubject = PublishSubject.create&lt;LocationModel&gt;()\n        val satellitesSubject = PublishSubject.create&lt;List&lt;SatelliteModel&gt;&gt;()\n        lateinit var fullLocationObservable: Observable&lt;FullLocation&gt; private set\n\n        @SuppressLint(\"MissingPermission\")\n        fun callLocationUpdates(updateInterval: Int, smallestDisplacement: Int, minAccuracy: Int, minSatellitesCount: Int, minSnr: Int) {\n            locationRequest.interval = (updateInterval * 1000).toLong()\n            locationRequest.fastestInterval = (updateInterval * 1000).toLong()\n            locationRequest.smallestDisplacement = smallestDisplacement.toFloat()\n            locationRequest.priority = LocationRequest.PRIORITY_HIGH_ACCURACY\n\n            googleApiClient.registerConnectionCallbacks(this)\n            locationManager.addGpsStatusListener(this)\n\n            fullLocationObservable = initFullLocationObservable(minAccuracy, minSatellitesCount, minSnr)\n            googleApiClient.connect()\n        }\n\n        fun removeLocationUpdates() {\n            locationManager.removeGpsStatusListener(this)\n            if (googleApiClient.isConnected) {\n                LocationServices.FusedLocationApi.removeLocationUpdates(googleApiClient, this)\n                googleApiClient.disconnect()\n            }\n        }\n\n        @SuppressLint(\"MissingPermission\")\n        override fun onConnected(p0: Bundle?) {  LocationServices.FusedLocationApi.requestLocationUpdates(googleApiClient, locationRequest, this)\n        }  \n\n        override fun onLocationChanged(location: Location) {\n            // TODO: make locationModel reusable\n            locationSubject.onNext(LocationModel(latitude = location.latitude, longitude = location.longitude,\n                time = location.time, speed = location.speed, accuracy = location.accuracy,\n                altitude = location.altitude, bearing = location.bearing))\n        }\n\n        @SuppressLint(\"MissingPermission\")\n        override fun onGpsStatusChanged(event: Int) {\n            if (event != GpsStatus.GPS_EVENT_SATELLITE_STATUS) {\n                return\n            }\n            gpsStatus = locationManager.getGpsStatus(gpsStatus)\n            if (gpsStatus != null) {\n                // TODO: make satellitesModel reusable\n                val satellites: List&lt;SatelliteModel&gt; = gpsStatus!!\n                    .satellites.filter { it.usedInFix() }\n                    .map { SatelliteModel(it.prn, it.elevation, it.azimuth, it.snr) }\n                satellitesSubject.onNext(satellites)\n            }\n        }\n\n        private fun initFullLocationObservable(minAccuracy: Int, minSatellitesCount: Int, minSnr: Int): Observable&lt;FullLocation&gt; {\n            val locationObservable = locationSubject\n                .filter { locationModel -&gt; locationModel.accuracy &lt;= minAccuracy }\n\n            val satellitesObservable = satellitesSubject\n                .map { satellites: List&lt;SatelliteModel&gt; -&gt;\n                    satellites.filter { it.snr  &gt;= minSnr }\n                }\n                .filter { it.size &gt;= minSatellitesCount }\n\n            return locationObservable.withLatestFrom(satellitesObservable, BiFunction { locationModel: LocationModel, satellitesModel: List&lt;SatelliteModel&gt; -&gt;\n                val locationData = LocationData(locationModel)\n                val satellites = satellitesModel.map { Satellite(it.snr, locationData) }\n                FullLocation(locationData, satellites)\n            })\n        }\n    }\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "owner": {"reputation": 13, "user_id": 7294785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/352208ebd7b28ade13aa0fbaeb22648e?s=128&d=identicon&r=PG&f=1", "display_name": "hsl", "link": "https://stackoverflow.com/users/7294785/hsl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1571736742, "creation_date": 1571732094, "last_edit_date": 1571736742, "question_id": 58499833, "link": "https://stackoverflow.com/questions/58499833/how-to-draw-something-on-exisiting-custom-view", "title": "How to draw something on exisiting custom view?", "body": "<p>I'm making android app with Kotlin in android studio now, and want to draw on already drawn custom view.</p>\n\n<p>This app is simple app about shows graphical information with received data with serial port. Actually I'm new on Kotlin and rookie on Java/Android. This is code that has problem.</p>\n\n<p>This is XML of custom view, (it is in the contraintlayout)</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;!--activity_main.xml--&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout ... &gt;\n    &lt;com.(...).DrawUI\n        android:id=\"@+id/DrawUI\" ...\n    /&gt;\n</code></pre>\n\n<p>Trying to call drawing function 'DrawRxData(rxData)' on this thread,</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>//BluetoothController.kt\n\nclass BluetoothClient(private val activity: MainActivity,\nprivate val socket:BluetoothSocket): Thread() {\n    override fun run() {\n        ...\n                if(inputStream.available() &gt; 0) {\n                    ...\n                    inputStream.read(buffer)\n\n                    val rxData = BluetoothRxParser(buffer)\n                    DrawRxData(rxData)\n                    ...\n                }\n        ...\n    }\n}\n</code></pre>\n\n<p>And this is DrawUI that wrote above on XML\nI want to draw something on this View with calling function in BluetoothController.kt!</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>//DrawUI.kt\n\nclass DrawUI(context: Context, attrs: AttributeSet?) : View(context, attrs) {\n    init {\n        // initializing Paint()s\n    }\n\n    override fun onMeasure(widthMeasureSpec: Int, heightMeasureSpec: Int) {\n        // measuring dimension and determine drawing sector\n    }\n\n    override fun onDraw(canvas: Canvas) {\n        // drawing background\n    }\n}\n</code></pre>\n\n<p>I tried use Canvas on DrawUI class but it didn't work properly.\nAlso tried making Bitmap but it occurs error that width and height are zero. How can I fix this problem?</p>\n\n<h1>EDIT</h1>\n\n<p>This way is how I solved this problem, maybe there is another and simple solution..</p>\n\n<ol>\n<li>Created ImageView that has same size with DrawUI on XML</li>\n</ol>\n\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;ImageView\n        android:id=\"@+id/DrawRx\" ...\n    /&gt;\n</code></pre>\n\n<ol start=\"2\">\n<li>Get View and cast to ImageView, then create bitmap and canvas.. DrawRxData() is in BluetoothClient class.</li>\n</ol>\n\n<pre class=\"lang-java prettyprint-override\"><code>    private fun DrawRxData (rxData: RxData) {\n        val v : View = activity.findViewById(R.id.DrawRx)\n        val iv : ImageView = v as ImageView\n        val bitmap = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888)\n        val canvas = Canvas(bitmap)\n        val paint = Paint(Paint.ANTI_ALIAS_FLAG)\n        paint.setColor(Color.BLACK)\n\n        canvas.drawCircle(50F, 50F, 10F, paint)\n</code></pre>\n\n<ol start=\"3\">\n<li>Attach bitmap to ImageView but for thread, it looks like Dispatcher in C#..\n<a href=\"https://stackoverflow.com/questions/5161951/android-only-the-original-thread-that-created-a-view-hierarchy-can-touch-its-vi\">Reference</a></li>\n</ol>\n\n<pre class=\"lang-java prettyprint-override\"><code>        activity.runOnUiThread(java.lang.Runnable {\n            iv.setImageBitmap(bitmap)\n        })\n</code></pre>\n\n<p>Actually just overlapped exist view, please answer if there is efficient way!</p>\n"}, {"tags": ["android", "kotlin", "retrofit", "retrofit2", "okhttp"], "comments": [{"owner": {"reputation": 69545, "user_id": 3395198, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/CJtaZ.jpg?s=128&g=1", "display_name": "IntelliJ Amiya", "link": "https://stackoverflow.com/users/3395198/intellij-amiya"}, "edited": false, "score": 0, "creation_date": 1571731002, "post_id": 58499484, "comment_id": 103327868, "body": "you should use <code>onFailure</code> method"}, {"owner": {"reputation": 45, "user_id": 2191357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RbVgP.jpg?s=128&g=1", "display_name": "Ahsan Malik", "link": "https://stackoverflow.com/users/2191357/ahsan-malik"}, "reply_to_user": {"reputation": 69545, "user_id": 3395198, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/CJtaZ.jpg?s=128&g=1", "display_name": "IntelliJ Amiya", "link": "https://stackoverflow.com/users/3395198/intellij-amiya"}, "edited": false, "score": 0, "creation_date": 1571731755, "post_id": 58499484, "comment_id": 103328265, "body": "its not going onFailure"}], "answers": [{"comments": [{"owner": {"reputation": 126, "user_id": 8193607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c58091ccefe51692d9b3be50570f3c86?s=128&d=identicon&r=PG&f=1", "display_name": "Oleksandr Martynets", "link": "https://stackoverflow.com/users/8193607/oleksandr-martynets"}, "edited": false, "score": 0, "creation_date": 1571732039, "post_id": 58499733, "comment_id": 103328391, "body": "Just re-checked what onResponse is handling. and I was not right. Sorry for that. An HTTP response may still indicate an application-level failure such as a 404 or 500."}, {"owner": {"reputation": 45, "user_id": 2191357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RbVgP.jpg?s=128&g=1", "display_name": "Ahsan Malik", "link": "https://stackoverflow.com/users/2191357/ahsan-malik"}, "edited": false, "score": 1, "creation_date": 1571732047, "post_id": 58499733, "comment_id": 103328397, "body": "its returning true... its going onSuccess and giving 400 code"}, {"owner": {"reputation": 126, "user_id": 8193607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c58091ccefe51692d9b3be50570f3c86?s=128&d=identicon&r=PG&f=1", "display_name": "Oleksandr Martynets", "link": "https://stackoverflow.com/users/8193607/oleksandr-martynets"}, "reply_to_user": {"reputation": 45, "user_id": 2191357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RbVgP.jpg?s=128&g=1", "display_name": "Ahsan Malik", "link": "https://stackoverflow.com/users/2191357/ahsan-malik"}, "edited": false, "score": 0, "creation_date": 1571732219, "post_id": 58499733, "comment_id": 103328507, "body": "Just mentioned spell mistake: var jObjErrorr = response.errorBody().string() and you are calling jObjError?.getstring(&quot;error_description&quot;). &quot;jObjErrorr&quot; and &quot;jObjError&quot;. Isn&#39;t that your problem?"}, {"owner": {"reputation": 126, "user_id": 8193607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c58091ccefe51692d9b3be50570f3c86?s=128&d=identicon&r=PG&f=1", "display_name": "Oleksandr Martynets", "link": "https://stackoverflow.com/users/8193607/oleksandr-martynets"}, "reply_to_user": {"reputation": 45, "user_id": 2191357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RbVgP.jpg?s=128&g=1", "display_name": "Ahsan Malik", "link": "https://stackoverflow.com/users/2191357/ahsan-malik"}, "edited": false, "score": 0, "creation_date": 1571732516, "post_id": 58499733, "comment_id": 103328663, "body": "You are creating nullable jObjError var. And the in try-catch block you&#39;re getting errorbody to different object you&#39;re creating right there jObjErrorr. And then you&#39;re trying to get string from first object which is still null."}], "tags": [], "owner": {"reputation": 126, "user_id": 8193607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c58091ccefe51692d9b3be50570f3c86?s=128&d=identicon&r=PG&f=1", "display_name": "Oleksandr Martynets", "link": "https://stackoverflow.com/users/8193607/oleksandr-martynets"}, "is_accepted": false, "score": 2, "last_activity_date": 1571731742, "creation_date": 1571731742, "answer_id": 58499733, "question_id": 58499484, "link": "https://stackoverflow.com/questions/58499484/unable-to-get-error-response-in-error-body-of-retrofit/58499733#58499733", "title": "Unable to get error response in error body of retrofit", "body": "<p>As IntelliJ Amiya mentioned in comment to your original post you should do this in <code>onFailure</code> method. As far as I know Retrofit's <code>onResponse</code> will not be called in cases of response code not in 200 range (200, 201, 202 etc.) so your check for <code>if (response?.code() == 400)</code> will never return true.</p>\n"}, {"tags": [], "owner": {"reputation": 126, "user_id": 8193607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c58091ccefe51692d9b3be50570f3c86?s=128&d=identicon&r=PG&f=1", "display_name": "Oleksandr Martynets", "link": "https://stackoverflow.com/users/8193607/oleksandr-martynets"}, "is_accepted": false, "score": 0, "last_activity_date": 1571732616, "creation_date": 1571732616, "answer_id": 58499953, "question_id": 58499484, "link": "https://stackoverflow.com/questions/58499484/unable-to-get-error-response-in-error-body-of-retrofit/58499953#58499953", "title": "Unable to get error response in error body of retrofit", "body": "<p>Decided to add it as separate answer:</p>\n\n<pre><code>if (response?.code() == 400) {\n                  var jObjError: JSONObject? = null\n                  try {\n                      jObjError = response.errorBody().string()\n                      CustomLogs.displayLogs(\"$TAG jObjError: $jObjError\")\n                  } catch (e: Exception) {\n                  }\n\n                  try {\n                      val string = jObjError?.optString(\"error_description\")\n\n                      CustomLogs.displayLogs(\"$TAG jObjError: $string\")\n\n                  } catch (e: Exception) {\n                      e.printStackTrace();\n                  }\n\n              }\n</code></pre>\n\n<p>Could you try this fragment?</p>\n"}, {"comments": [{"owner": {"reputation": 18393, "user_id": 1879019, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/otzDQ.jpg?s=128&g=1", "display_name": "tomRedox", "link": "https://stackoverflow.com/users/1879019/tomredox"}, "edited": false, "score": 0, "creation_date": 1572521770, "post_id": 58642332, "comment_id": 103590286, "body": "Welcome!  It&#39;s preferred to include a link to the documentation and also to copy the relevant paragraph into your answer and format it as a quote."}], "tags": [], "owner": {"reputation": 1, "user_id": 12008593, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mD7R8FX3j-h_8n-z81id-htyIFD5_mT6fx3pz9zSQ=k-s128", "display_name": "YASH PANCHOLI", "link": "https://stackoverflow.com/users/12008593/yash-pancholi"}, "is_accepted": false, "score": 0, "last_activity_date": 1572591259, "last_edit_date": 1572591259, "creation_date": 1572521091, "answer_id": 58642332, "question_id": 58499484, "link": "https://stackoverflow.com/questions/58499484/unable-to-get-error-response-in-error-body-of-retrofit/58642332#58642332", "title": "Unable to get error response in error body of retrofit", "body": "<p>If you go through the Retrofit onResponse Library...,it's clearly mentioned that Retrofit does not create Body for response with status code below 200 or above 300.You have to specify your error Response Specifically!!</p>\n"}], "owner": {"reputation": 45, "user_id": 2191357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RbVgP.jpg?s=128&g=1", "display_name": "Ahsan Malik", "link": "https://stackoverflow.com/users/2191357/ahsan-malik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 421, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1572591259, "creation_date": 1571730862, "last_edit_date": 1571731061, "question_id": 58499484, "link": "https://stackoverflow.com/questions/58499484/unable-to-get-error-response-in-error-body-of-retrofit", "title": "Unable to get error response in error body of retrofit", "body": "<p>I am unable to get 400 response in error body of retrofit. I have set logging level its showing in logs but not showing in error body i have searched a lot but didn't find any solution is anyone there who help me in this case to get rid of this problem</p>\n\n<pre><code>call_.enqueue(object : Callback&lt;ResponseBody&gt; {\n            override fun onResponse(call: Call&lt;ResponseBody&gt;?, response: Response&lt;ResponseBody&gt;?) {\n               if (response?.code() == 400) {\n                      var jObjError: JSONObject? = null\n                      try {\n                          var jObjErrorr = response.errorBody().string()\n                          CustomLogs.displayLogs(\"$TAG jObjErrorr: $jObjErrorr\")\n                      } catch (e: Exception) {\n                      }\n\n                      try {\n                          val string = jObjError?.getstring(\"error_description\")\n\n                          CustomLogs.displayLogs(\"$TAG jObjError: $string\")\n\n                      } catch (e: Exception) {\n                          e.printStackTrace();\n                      }\n\n                  }\n }    \n</code></pre>\n\n<p>i need error body to get and display message and my log shows this</p>\n\n<pre><code>{\"error\":\"Authorize\",\"error_description\":\"Error in authentication\"}\n</code></pre>\n\n<p>but error body is not showing this object</p>\n"}, {"tags": ["android", "kotlin", "architecture", "sdk", "clean-architecture"], "comments": [{"owner": {"reputation": 1271, "user_id": 3339597, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/16ea9e6ce4d4fa8bfee0982ca0844f94?s=128&d=identicon&r=PG&f=1", "display_name": "Re&#39;em", "link": "https://stackoverflow.com/users/3339597/reem"}, "edited": false, "score": 0, "creation_date": 1571730854, "post_id": 58499010, "comment_id": 103327805, "body": "I&#39;m pretty sure there are no guidelines such as &quot;clean architecture&quot; for libraries. Only the basic rule of thumb: make your library expose clean simple functions for your users.  Internally in your library, you can use all benefits from clean arch - let your <code>view</code> hold a <code>view-model</code>, propagate data using <code>live-data</code>, store to persistent using <code>room</code> e.t.c"}, {"owner": {"reputation": 1626, "user_id": 5305817, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/TyH63.jpg?s=128&g=1", "display_name": "Jaime Alc&#225;ntara Arnela", "link": "https://stackoverflow.com/users/5305817/jaime-alc%c3%a1ntara-arnela"}, "reply_to_user": {"reputation": 1271, "user_id": 3339597, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/16ea9e6ce4d4fa8bfee0982ca0844f94?s=128&d=identicon&r=PG&f=1", "display_name": "Re&#39;em", "link": "https://stackoverflow.com/users/3339597/reem"}, "edited": false, "score": 0, "creation_date": 1571731412, "post_id": 58499010, "comment_id": 103328087, "body": "@Re&#39;em but isn&#39;t there a predefined pattern to follow? It&#39;s true that I can apply good practices as I see fit but I would like to find some structure to follow at a general level, although as you say probably does not exist."}], "owner": {"reputation": 1626, "user_id": 5305817, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/TyH63.jpg?s=128&g=1", "display_name": "Jaime Alc&#225;ntara Arnela", "link": "https://stackoverflow.com/users/5305817/jaime-alc%c3%a1ntara-arnela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571728851, "creation_date": 1571728851, "question_id": 58499010, "link": "https://stackoverflow.com/questions/58499010/clean-architecture-when-developing-sdks", "title": "Clean architecture when developing SDKs", "body": "<p>I'm developing an SDK with Kotlin (I intend to use the multiplatform function). This product will be integrated into the application through a dependency (like any current library).</p>\n\n<p>The point is that I can't find information that explains how to structure this kind of projects. I would like to know if there are architectures similar to clean architecture for applications, but focused on these other needs.</p>\n\n<p>The SDK contains a view (that the user can instantiate externally), internal logic and calls to a server. Does anyone who has faced this problem have any information?</p>\n"}, {"tags": ["android", "ssl", "kotlin", "retrofit2"], "comments": [{"owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 0, "creation_date": 1571724282, "post_id": 58497704, "comment_id": 103324874, "body": "Why you pass Context to every Class? Just create an application class and get context from there"}, {"owner": {"reputation": 61, "user_id": 8327399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d7179116ec3989b53fe282a310e2f58?s=128&d=identicon&r=PG&f=1", "display_name": "dj43", "link": "https://stackoverflow.com/users/8327399/dj43"}, "reply_to_user": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 0, "creation_date": 1571726771, "post_id": 58497704, "comment_id": 103325937, "body": "i tried that it is giving me error MyApp.getContext() must not be null"}, {"owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 0, "creation_date": 1571726860, "post_id": 58497704, "comment_id": 103325981, "body": "Add your <b>MyApp</b> code. I will update"}, {"owner": {"reputation": 61, "user_id": 8327399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d7179116ec3989b53fe282a310e2f58?s=128&d=identicon&r=PG&f=1", "display_name": "dj43", "link": "https://stackoverflow.com/users/8327399/dj43"}, "reply_to_user": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 0, "creation_date": 1571727797, "post_id": 58497704, "comment_id": 103326444, "body": "class MainApplication : Application() {      init {         instance = this     }      companion object {         private var instance: MainApplication? = null          fun applicationContext() : Context {             return instance!!.applicationContext         }     }      override fun onCreate() {         super.onCreate()         val context: Context = MainApplication.applicationContext()     } }"}, {"owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 0, "creation_date": 1571728773, "post_id": 58497704, "comment_id": 103326899, "body": "class MainApplication : Application() {      companion object {          private lateinit var instance: MainApplication                  fun applicationContext() : Context {              return instance.applicationContext         }      }           override fun onCreate() {          super.onCreate()         instance = this     }  }"}, {"owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 0, "creation_date": 1571728841, "post_id": 58497704, "comment_id": 103326930, "body": "then call <b>MainApplication.applicationContext()</b> to get Context"}, {"owner": {"reputation": 61, "user_id": 8327399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d7179116ec3989b53fe282a310e2f58?s=128&d=identicon&r=PG&f=1", "display_name": "dj43", "link": "https://stackoverflow.com/users/8327399/dj43"}, "reply_to_user": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 0, "creation_date": 1571729064, "post_id": 58497704, "comment_id": 103327020, "body": "still giving error      Caused by: kotlin.UninitializedPropertyAccessException: lateinit property instance has not been initialized"}, {"owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 0, "creation_date": 1571729350, "post_id": 58497704, "comment_id": 103327161, "body": "That means you haven&#39;t set <b>MainApplication</b> as your default application in <b>AndroidManifet</b>"}, {"owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 0, "creation_date": 1571729400, "post_id": 58497704, "comment_id": 103327187, "body": "In <b>AndroidManifest</b>&#39;s application tag add this <code>android:name=&quot;.MainApplication&quot;</code>. Package name may vary"}, {"owner": {"reputation": 61, "user_id": 8327399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d7179116ec3989b53fe282a310e2f58?s=128&d=identicon&r=PG&f=1", "display_name": "dj43", "link": "https://stackoverflow.com/users/8327399/dj43"}, "reply_to_user": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 0, "creation_date": 1571731447, "post_id": 58497704, "comment_id": 103328110, "body": "thanks a lot , it is showing a memory leak warning shouldn&#39;t it be problem"}, {"owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 0, "creation_date": 1571731500, "post_id": 58497704, "comment_id": 103328151, "body": "Is it solve your problem?"}, {"owner": {"reputation": 61, "user_id": 8327399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d7179116ec3989b53fe282a310e2f58?s=128&d=identicon&r=PG&f=1", "display_name": "dj43", "link": "https://stackoverflow.com/users/8327399/dj43"}, "reply_to_user": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 0, "creation_date": 1571731635, "post_id": 58497704, "comment_id": 103328214, "body": "partially now working on ssl"}, {"owner": {"reputation": 61, "user_id": 8327399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d7179116ec3989b53fe282a310e2f58?s=128&d=identicon&r=PG&f=1", "display_name": "dj43", "link": "https://stackoverflow.com/users/8327399/dj43"}, "reply_to_user": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 0, "creation_date": 1571731957, "post_id": 58497704, "comment_id": 103328349, "body": "can the line be changed to         private lateinit var instance: Application?"}, {"owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 0, "creation_date": 1571731981, "post_id": 58497704, "comment_id": 103328364, "body": "Check my answer, I have posted it"}, {"owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 0, "creation_date": 1571732136, "post_id": 58497704, "comment_id": 103328446, "body": "Yes, you can change like this: <code>private lateinit var instance: Application</code>"}], "answers": [{"tags": [], "owner": {"reputation": 8524, "user_id": 7258332, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1162962850406223/picture?type=large", "display_name": "Santanu Sur", "link": "https://stackoverflow.com/users/7258332/santanu-sur"}, "is_accepted": false, "score": 0, "last_activity_date": 1571724522, "creation_date": 1571724522, "answer_id": 58497985, "question_id": 58497704, "link": "https://stackoverflow.com/questions/58497704/add-self-signed-certificate-using-retrofit-call/58497985#58497985", "title": "Add self signed certificate using retrofit call", "body": "<p>Dont initialize ViewModel object through constructor :- <code>NetworkViewModel(this)::class.java</code> is wrong. Use :-</p>\n\n<pre><code> networkViewModel = ViewModelProviders.of(this).get(NetworkViewModel::class.java)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16463, "user_id": 115890, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/7BJ2g.jpg?s=128&g=1", "display_name": "ibrahimyilmaz", "link": "https://stackoverflow.com/users/115890/ibrahimyilmaz"}, "is_accepted": false, "score": 0, "last_activity_date": 1571728582, "last_edit_date": 1571728582, "creation_date": 1571728256, "answer_id": 58498869, "question_id": 58497704, "link": "https://stackoverflow.com/questions/58497704/add-self-signed-certificate-using-retrofit-call/58498869#58498869", "title": "Add self signed certificate using retrofit call", "body": "<p>You can customise your OkHttpClients <code>sslSocketFactory</code></p>\n\n<p>e.g(<code>Retrofit</code>'s client setting)</p>\n\n<pre><code>val retrofit Retrofit\n    .Builder()\n    .client(client)\n    .baseUrl(BASE_URL)\n    .addConverterFactory(GsonConverterFactory.create(gson))\n    .build()\n</code></pre>\n\n<p>e.g(<code>OkHttpsClient</code>'s sslSocketFactory setting)</p>\n\n<pre><code>  val client =OkHttpClient.Builder()\n            .sslSocketFactory(sslContextWithSS.getSocketFactory())\n            .build()\n</code></pre>\n\n<p>e.g(<code>SSLSocketFactory</code> with Custom Certificate)</p>\n\n<pre><code>        val keyStore = readKeyStore() //your method to obtain KeyStore\n        val sslContext = SSLContext.getInstance(\"SSL\")\n        val trustManagerFactory = TrustManagerFactory.getInstance(getDefaultAlgorithm())\n        trustManagerFactory.init(keyStore)\n        val keyManagerFactory = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm())\n        keyManagerFactory.init(keyStore, \"keystore_pass\".toCharArray())\n        sslContext.init(keyManagerFactory.getKeyManagers(), trustManagerFactory.getTrustManagers(), SecureRandom())\n        client.setSslSocketFactory(sslContext.getSocketFactory())\n</code></pre>\n\n<p>Getting <code>KeyStore</code> with your <code>CustomCertificate</code></p>\n\n<pre><code> fun readKeyStore()= KeyStore.getInstance(KeyStore.getDefaultType()).also{\n  try (val inputStream = context.getResources().openRawResource(R.raw.custom_certificate)) {\n        it.load(inputStream, getPassword());\n    }\n}\n\n\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "is_accepted": true, "score": 0, "last_activity_date": 1571731967, "creation_date": 1571731967, "answer_id": 58499792, "question_id": 58497704, "link": "https://stackoverflow.com/questions/58497704/add-self-signed-certificate-using-retrofit-call/58499792#58499792", "title": "Add self signed certificate using retrofit call", "body": "<p>Rather passing context from class to class it is good to make an application class and use this application context when required. Please check below:</p>\n\n<pre><code>class MainApplication : Application() {\n    companion object {\n        private lateinit var instance: MainApplication\n\n        fun applicationContext() : Context {\n            return instance.applicationContext\n        }\n    }\n\n    override fun onCreate() {\n        super.onCreate()\n        instance = this\n    }\n}\n</code></pre>\n\n<p>Then, In <code>AndroidManifest</code>'s application tag add this <code>android:name=\".MainApplication\"</code></p>\n\n<p>Then call MainApplication.applicationContext() to get Context from anywhere.</p>\n"}], "owner": {"reputation": 61, "user_id": 8327399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d7179116ec3989b53fe282a310e2f58?s=128&d=identicon&r=PG&f=1", "display_name": "dj43", "link": "https://stackoverflow.com/users/8327399/dj43"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 251, "favorite_count": 0, "accepted_answer_id": 58499792, "answer_count": 3, "score": 0, "last_activity_date": 1571731967, "creation_date": 1571722768, "last_edit_date": 1571724448, "question_id": 58497704, "link": "https://stackoverflow.com/questions/58497704/add-self-signed-certificate-using-retrofit-call", "title": "Add self signed certificate using retrofit call", "body": "<p>I want to add self signed certificate using retrofit, for that I need to pass context but facing some problems passing context through MVC model</p>\n\n<p>Retrofit Client</p>\n\n<pre><code>object RetrofitClient    {\n  fun call(context: Context): Webservice {\n    val webservice by lazy {\n        Retrofit.Builder()\n            //  .baseUrl(\"http://68.183.183.255:8080\")\n            //.baseUrl(\"http://my-json-server.typicode.com\")\n            .baseUrl(\"https://54roh005p5.execute-api.us-west-2.amazonaws.com/mdv/cloud/login/\")\n            .addConverterFactory(GsonConverterFactory.create(GsonBuilder().create()))\n            .addConverterFactory(ScalarsConverterFactory.create())\n            .client(SelfSigningClientBuilder.createClient(context))\n            .build().create(Webservice::class.java)\n    }\n    return webservice\n  }\n}\n</code></pre>\n\n<p>Repository</p>\n\n<pre><code>class TodoRepository(context:Context) {\n\n   private var client:Webservice = RetrofitClient.call(context)\n   //suspend fun getTodo(id: String) = client.getTodo(id)\n   suspend fun getTodo(id: User) = client.getTodo(id)\n}\n</code></pre>\n\n<p>ViewModel</p>\n\n<pre><code>class NetworkViewModel(context: Context) : ViewModel() {\n\n  var repository: TodoRepository  = TodoRepository(context)\n  fun getTodo(arg : User):LiveData&lt;Response&lt;com.example.myapplication.entity.UserData&gt;&gt; {\n    val result = liveData(Dispatchers.IO) {\n        val retrivedTodo = repository.getTodo(arg)\n\n        emit(retrivedTodo)\n      }\n    return result\n   }\n}\n</code></pre>\n\n<p>MainActivity</p>\n\n<p><code>networkViewModel=ViewModelProviders.of(this).get(NetworkViewModel(this)::class.java)</code></p>\n\n<p>It is giving the error</p>\n\n<pre><code>java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.myapplication/com.example.myapplication.MainActivity}: java.lang.RuntimeException: Cannot create an instance of class com.example.myapplication.network.NetworkViewModel\n</code></pre>\n\n<p>what am i doing wrong. If there is a better method please suggest it</p>\n"}, {"tags": ["java", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 6499, "user_id": 1554633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cdb2108d3fd119d4d380e9e4a2b5611?s=128&d=identicon&r=PG", "display_name": "Andrei Tanana", "link": "https://stackoverflow.com/users/1554633/andrei-tanana"}, "is_accepted": true, "score": 6, "last_activity_date": 1571721676, "creation_date": 1571721676, "answer_id": 58497535, "question_id": 58497383, "link": "https://stackoverflow.com/questions/58497383/is-it-possible-to-provide-custom-name-for-internal-delegated-properties-in-kotli/58497535#58497535", "title": "is it possible to provide custom name for internal delegated properties in kotlin?", "body": "<p>You can specify your annotation target to getter like this:</p>\n\n<pre><code>class ScriptDsl {\n    @get:JvmName(\"scriptDsl\")\n    internal val scriptDsl: JScriptDsl by lazy { //... }\n}\n</code></pre>\n\n<p>and then just call it with <code>scriptDsl</code>:</p>\n\n<pre><code>ScriptDsl scriptDsl = new ScriptDsl();\nscriptDsl.scriptDsl();\n</code></pre>\n"}], "owner": {"reputation": 2070, "user_id": 5644120, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1XCDt5CBSC0/AAAAAAAAAAI/AAAAAAAAAE8/_T4rHRf8OIA/photo.jpg?sz=128", "display_name": "Pritam Kadam", "link": "https://stackoverflow.com/users/5644120/pritam-kadam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 58497535, "answer_count": 1, "score": 3, "last_activity_date": 1571721676, "creation_date": 1571720661, "question_id": 58497383, "link": "https://stackoverflow.com/questions/58497383/is-it-possible-to-provide-custom-name-for-internal-delegated-properties-in-kotli", "title": "is it possible to provide custom name for internal delegated properties in kotlin?", "body": "<p>I have the following code snippet and I want to access <code>scriptDsl</code> property from <code>Java</code> internally from the same code base. I do not want to expose <code>scriptDsl</code> publically.</p>\n\n<pre><code>class ScriptDsl {\n    internal val scriptDsl: JScriptDsl by lazy { //... }\n}\n</code></pre>\n\n<p>when compiled, <code>scriptDsl</code> becomes <code>public final JScriptDsl getScriptDsl$esw_ocs_dsl_kt()</code> but I want to provide custom name here which is possible for non delegated properties using <code>JvmName(\"scriptDsl\")</code>.\nHow to do it for <code>internal delegated properties</code>?</p>\n\n<p>I am fine if there are any other better solutions, my requirements are\"</p>\n\n<ul>\n<li>I want to call <code>scriptDsl</code> from java within the same module</li>\n<li>I am calling it using reflection so need to know the name beforehand</li>\n<li><code>ScriptDsl</code> is public and I do not want property <code>scriptDsl</code> to be accessed outside module</li>\n<li><code>scriptDsl</code> has to be lazy because it depends on other properties which might not be avaibale while declaration</li>\n</ul>\n\n<p>Note: I know <code>internal</code> in kotlin is <code>public</code> in java.</p>\n\n<p>From kotlin docs:</p>\n\n<p><strong><em>internal</strong> declarations become public in Java. Members of internal classes go through name mangling, to make it harder to accidentally use them from Java and to allow overloading for members with the same signature that don't see each other according to Kotlin rules;</em></p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 672, "user_id": 9854554, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/btJHz.jpg?s=128&g=1", "display_name": "Naresh NK", "link": "https://stackoverflow.com/users/9854554/naresh-nk"}, "edited": false, "score": 0, "creation_date": 1571717281, "post_id": 58496928, "comment_id": 103323137, "body": "Is this code inside a onClickListener, Add more code in your post."}, {"owner": {"reputation": 475, "user_id": 11877776, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-T_0LiJG5n8k/AAAAAAAAAAI/AAAAAAAAABM/GHoMFEU_6hk/photo.jpg?sz=128", "display_name": "Duy Khanh Nguyen", "link": "https://stackoverflow.com/users/11877776/duy-khanh-nguyen"}, "edited": false, "score": 0, "creation_date": 1571717760, "post_id": 58496928, "comment_id": 103323217, "body": "You should add the error log from Logcat to make the question cleaner"}, {"owner": {"reputation": 955, "user_id": 8528047, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NjFzHTpL2TU/AAAAAAAAAAI/AAAAAAAAABg/0qa122EUUf8/photo.jpg?sz=128", "display_name": "Pemba Tamang", "link": "https://stackoverflow.com/users/8528047/pemba-tamang"}, "edited": false, "score": 0, "creation_date": 1571717768, "post_id": 58496928, "comment_id": 103323219, "body": "Can anyone tell me what return@setOnClickListener does??"}, {"owner": {"reputation": 475, "user_id": 11877776, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-T_0LiJG5n8k/AAAAAAAAAAI/AAAAAAAAABM/GHoMFEU_6hk/photo.jpg?sz=128", "display_name": "Duy Khanh Nguyen", "link": "https://stackoverflow.com/users/11877776/duy-khanh-nguyen"}, "reply_to_user": {"reputation": 955, "user_id": 8528047, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NjFzHTpL2TU/AAAAAAAAAAI/AAAAAAAAABg/0qa122EUUf8/photo.jpg?sz=128", "display_name": "Pemba Tamang", "link": "https://stackoverflow.com/users/8528047/pemba-tamang"}, "edited": false, "score": 0, "creation_date": 1571717906, "post_id": 58496928, "comment_id": 103323246, "body": "@PembaTamang It&#39;s just a <code>return</code> to skip commands below (only commands inside   <code>setOnClickListener</code>)"}, {"owner": {"reputation": 9541, "user_id": 1568530, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001179991520/picture?type=large", "display_name": "Vladyslav Matviienko", "link": "https://stackoverflow.com/users/1568530/vladyslav-matviienko"}, "edited": false, "score": 0, "creation_date": 1571718913, "post_id": 58496928, "comment_id": 103323425, "body": "<code>val finalValue = Integer.parseInt(value)</code> - because <code>value</code> is empty."}, {"owner": {"reputation": 45, "user_id": 12005344, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2JxMchZNHtc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdmLDs3CLlU9_IxA2Y_Lrh7_kZrqg/photo.jpg?sz=128", "display_name": "Gyroth Games", "link": "https://stackoverflow.com/users/12005344/gyroth-games"}, "reply_to_user": {"reputation": 9541, "user_id": 1568530, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001179991520/picture?type=large", "display_name": "Vladyslav Matviienko", "link": "https://stackoverflow.com/users/1568530/vladyslav-matviienko"}, "edited": false, "score": 0, "creation_date": 1571719343, "post_id": 58496928, "comment_id": 103323538, "body": "@VladyslavMatviienko it is number"}, {"owner": {"reputation": 519, "user_id": 10608556, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WhONPBsQaIA/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBpEXiYJIpazIjVSORBU373SYOMuQ/mo/photo.jpg?sz=128", "display_name": "alireza daryani", "link": "https://stackoverflow.com/users/10608556/alireza-daryani"}, "edited": false, "score": 0, "creation_date": 1571719421, "post_id": 58496928, "comment_id": 103323560, "body": "where is &#39;RequestPinActivity.kt:83&#39;"}, {"owner": {"reputation": 9541, "user_id": 1568530, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001179991520/picture?type=large", "display_name": "Vladyslav Matviienko", "link": "https://stackoverflow.com/users/1568530/vladyslav-matviienko"}, "edited": false, "score": 0, "creation_date": 1571720371, "post_id": 58496928, "comment_id": 103323767, "body": "the exception says that it is empty. Are you sure that you are using right EditText?"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 12005344, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2JxMchZNHtc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdmLDs3CLlU9_IxA2Y_Lrh7_kZrqg/photo.jpg?sz=128", "display_name": "Gyroth Games", "link": "https://stackoverflow.com/users/12005344/gyroth-games"}, "edited": false, "score": 0, "creation_date": 1571718957, "post_id": 58497077, "comment_id": 103323432, "body": "i still confused, can you give me more specific example ?"}, {"owner": {"reputation": 239, "user_id": 12228267, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jy6Eo.jpg?s=128&g=1", "display_name": "Peter Alwin", "link": "https://stackoverflow.com/users/12228267/peter-alwin"}, "reply_to_user": {"reputation": 45, "user_id": 12005344, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2JxMchZNHtc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdmLDs3CLlU9_IxA2Y_Lrh7_kZrqg/photo.jpg?sz=128", "display_name": "Gyroth Games", "link": "https://stackoverflow.com/users/12005344/gyroth-games"}, "edited": false, "score": 0, "creation_date": 1571722752, "post_id": 58497077, "comment_id": 103324413, "body": "first check whether the string value is empty or not then parse the value , i.e if the string value is empty we are not able to parse that to string value"}], "tags": [], "owner": {"reputation": 239, "user_id": 12228267, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jy6Eo.jpg?s=128&g=1", "display_name": "Peter Alwin", "link": "https://stackoverflow.com/users/12228267/peter-alwin"}, "is_accepted": false, "score": 0, "last_activity_date": 1571723705, "last_edit_date": 1571723705, "creation_date": 1571718448, "answer_id": 58497077, "question_id": 58496928, "link": "https://stackoverflow.com/questions/58496928/progam-stopped-while-the-condition-running/58497077#58497077", "title": "Progam Stopped while the condition running", "body": "<p>You parse empty string to integer so that's why its throw the exception</p>\n\n<p>The following is correct:</p>\n\n<pre><code>String a = 50;\nint number = Integer.parseInt(a);\n</code></pre>\n\n<p>And this is an error because empty string cannot be converted to integer:</p>\n\n<pre><code>String a = \"\";\nint number = Integer.parseInt(a);\n</code></pre>\n\n<p>In your code:</p>\n\n<pre><code>val finalValue = Integer.parseInt(value); \n</code></pre>\n\n<p>change this line check if the values is empty or not before parsing and then parse only if it isn't empty</p>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 12005344, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2JxMchZNHtc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdmLDs3CLlU9_IxA2Y_Lrh7_kZrqg/photo.jpg?sz=128", "display_name": "Gyroth Games", "link": "https://stackoverflow.com/users/12005344/gyroth-games"}, "edited": false, "score": 0, "creation_date": 1571720246, "post_id": 58497250, "comment_id": 103323742, "body": "the problem at the if, if value is empty, the toast not show and the program force closed"}, {"owner": {"reputation": 475, "user_id": 11877776, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-T_0LiJG5n8k/AAAAAAAAAAI/AAAAAAAAABM/GHoMFEU_6hk/photo.jpg?sz=128", "display_name": "Duy Khanh Nguyen", "link": "https://stackoverflow.com/users/11877776/duy-khanh-nguyen"}, "reply_to_user": {"reputation": 45, "user_id": 12005344, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2JxMchZNHtc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdmLDs3CLlU9_IxA2Y_Lrh7_kZrqg/photo.jpg?sz=128", "display_name": "Gyroth Games", "link": "https://stackoverflow.com/users/12005344/gyroth-games"}, "edited": false, "score": 0, "creation_date": 1571721146, "post_id": 58497250, "comment_id": 103323956, "body": "Did you try my solution?"}], "tags": [], "owner": {"reputation": 475, "user_id": 11877776, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-T_0LiJG5n8k/AAAAAAAAAAI/AAAAAAAAABM/GHoMFEU_6hk/photo.jpg?sz=128", "display_name": "Duy Khanh Nguyen", "link": "https://stackoverflow.com/users/11877776/duy-khanh-nguyen"}, "is_accepted": false, "score": 1, "last_activity_date": 1571723250, "last_edit_date": 1571723250, "creation_date": 1571719800, "answer_id": 58497250, "question_id": 58496928, "link": "https://stackoverflow.com/questions/58496928/progam-stopped-while-the-condition-running/58497250#58497250", "title": "Progam Stopped while the condition running", "body": "<p>This issue happens because you are trying to parse a string (empty string) which is not able to parse to an integer.</p>\n\n<p>Move <code>Integer.parseInt</code> command to below checking text empty</p>\n\n<p>And remember to catch NumberFormatException when parsing number from text</p>\n\n<pre><code>if (TextUtils.isEmpty(value)){\n    Toast.makeText(this, \"Silahkan Isi Jumlah\", Toast.LENGTH_SHORT).show()\n    return@setOnClickListener\n}\n\ntry {\n   val finalValue = Integer.parseInt(value)\n   if (finalValue &lt; 5){\n       total = finalValue * 3500\n       totall = total.toString()\n       editText2.setText(totall)\n       spinner.isEnabled = false\n       spinner2.isEnabled = false\n       editText.isEnabled = false\n       editText2.isEnabled = false\n   } \n} catch (ex: NumberFormatException) {\n    //Add log for parsing error of do something else\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 136042, "user_id": 5221149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4qlq.png?s=128&g=1", "display_name": "Andreas", "link": "https://stackoverflow.com/users/5221149/andreas"}, "is_accepted": false, "score": 0, "last_activity_date": 1571719860, "creation_date": 1571719860, "answer_id": 58497265, "question_id": 58496928, "link": "https://stackoverflow.com/questions/58496928/progam-stopped-while-the-condition-running/58497265#58497265", "title": "Progam Stopped while the condition running", "body": "<p>Your code has this logic:</p>\n\n<pre><code>val finalValue = Integer.parseInt(value)\nif (TextUtils.isEmpty(value)){\n    ...\n} else if (finalValue &lt; 5){\n    ...\n}\n</code></pre>\n\n<p>So, if <code>value</code> is an empty string, which you obviously expect that it can be, <code>parseInt</code> will throw that <code>NumberFormatException: For input string: \"\"</code> exception.</p>\n\n<p>You need to check for empty string <em>before</em> trying to call <code>parseInt</code>.</p>\n\n<pre><code>if (TextUtils.isEmpty(value)){\n    ...\n} else {\n    val finalValue = Integer.parseInt(value)\n    if (finalValue &lt; 5){\n        ...\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 672, "user_id": 9854554, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/btJHz.jpg?s=128&g=1", "display_name": "Naresh NK", "link": "https://stackoverflow.com/users/9854554/naresh-nk"}, "is_accepted": false, "score": 0, "last_activity_date": 1571720306, "creation_date": 1571720306, "answer_id": 58497320, "question_id": 58496928, "link": "https://stackoverflow.com/questions/58496928/progam-stopped-while-the-condition-running/58497320#58497320", "title": "Progam Stopped while the condition running", "body": "<p>This is causing <code>NumberFormatException</code>- </p>\n\n<pre><code>val value = editText.getText().toString()\nval finalValue = Integer.parseInt(value)        //here value is \"\" empty \n</code></pre>\n\n<p>empty string or invalid string can't be converted to Int.</p>\n\n<p>So use a if condition before parsing string to int -</p>\n\n<pre><code>if(!value.isNullOrEmpty()){\n//parse here\n}\n</code></pre>\n\n<p>or use try/catch with <code>NumberFormatException</code></p>\n"}], "owner": {"reputation": 45, "user_id": 12005344, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2JxMchZNHtc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdmLDs3CLlU9_IxA2Y_Lrh7_kZrqg/photo.jpg?sz=128", "display_name": "Gyroth Games", "link": "https://stackoverflow.com/users/12005344/gyroth-games"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1571723705, "creation_date": 1571717060, "last_edit_date": 1571718010, "question_id": 58496928, "link": "https://stackoverflow.com/questions/58496928/progam-stopped-while-the-condition-running", "title": "Progam Stopped while the condition running", "body": "<pre><code>   if (TextUtils.isEmpty(value)){\n                        Toast.makeText(this, \"Silahkan Isi Jumlah\", Toast.LENGTH_SHORT).show()\n                        return@setOnClickListener\n                    }\n</code></pre>\n\n<p>the specific code</p>\n\n<pre><code>btnharga.setOnClickListener {\n            if (spinner.selectedItem.toString().equals(\"Ukuran\")){\n                Toast.makeText(this, \"Silahkan Isi Ukuran\", Toast.LENGTH_SHORT).show()\n            }\n            else if (spinner.selectedItem.toString().equals(\"44\")){\n                if (spinner2.selectedItem.toString().equals(\"Jenis Laminasi\")){\n                    Toast.makeText(this, \"Silahkan Isi Laminasi\", Toast.LENGTH_SHORT).show()\n                }\n                else if (spinner2.selectedItem.toString().equals(\"Glossy\")){\n                    val total : Int\n                    val totall : String\n                    val value = editText.getText().toString()\n                    val finalValue = Integer.parseInt(value)\n                    if (TextUtils.isEmpty(value)){\n                        Toast.makeText(this, \"Silahkan Isi Jumlah\", Toast.LENGTH_SHORT).show()\n                        return@setOnClickListener\n                    }\n                    else if (finalValue &lt; 5){\n                        total = finalValue * 3500\n                        totall = total.toString()\n                        editText2.setText(totall)\n                        spinner.isEnabled = false\n                        spinner2.isEnabled = false\n                        editText.isEnabled = false\n                        editText2.isEnabled = false\n                    }\n</code></pre>\n\n<p>why my application force closed when this program is run ??</p>\n\n<p>The erorr Log</p>\n\n<pre><code>E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: app.inisiator.com, PID: 4717\n    java.lang.NumberFormatException: For input string: \"\"\n        at java.lang.Integer.parseInt(Integer.java:620)\n        at java.lang.Integer.parseInt(Integer.java:643)\n        at app.inisiator.com.RequestPinActivity$onCreate$1.onClick(RequestPinActivity.kt:83)\n        at android.view.View.performClick(View.java:6310)\n        at android.view.View$PerformClick.run(View.java:24970)\n        at android.os.Handler.handleCallback(Handler.java:794)\n        at android.os.Handler.dispatchMessage(Handler.java:99)\n        at android.os.Looper.loop(Looper.java:176)\n        at android.app.ActivityThread.main(ActivityThread.java:6662)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:547)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:873)\n</code></pre>\n"}, {"tags": ["android", "api", "kotlin", "retrofit2"], "comments": [{"owner": {"reputation": 111, "user_id": 12180120, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7e2vlWSDn2g/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcfE-7ziNnWl6pjCDnFtZ6p_v5y3g/photo.jpg?sz=128", "display_name": "Daesik Park", "link": "https://stackoverflow.com/users/12180120/daesik-park"}, "edited": false, "score": 1, "creation_date": 1571716541, "post_id": 58496841, "comment_id": 103323004, "body": "This is splashactvity code. I already make failToConfirm()                             private fun failToConfirm() {   val intent = Intent(this, MainActivity::class.java)   startActivity(intent)   finish()   }"}, {"owner": {"reputation": 1736, "user_id": 1411723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gys3w.jpg?s=128&g=1", "display_name": "aboger", "link": "https://stackoverflow.com/users/1411723/aboger"}, "edited": false, "score": 0, "creation_date": 1571717318, "post_id": 58496841, "comment_id": 103323147, "body": "Please edit your quesion if you want to add information instead of commenting it."}], "owner": {"reputation": 111, "user_id": 12180120, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7e2vlWSDn2g/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcfE-7ziNnWl6pjCDnFtZ6p_v5y3g/photo.jpg?sz=128", "display_name": "Daesik Park", "link": "https://stackoverflow.com/users/12180120/daesik-park"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571730456, "creation_date": 1571716331, "last_edit_date": 1571730456, "question_id": 58496841, "link": "https://stackoverflow.com/questions/58496841/how-can-i-add-code-about-token-is-expired-in-kotlin", "title": "How can I add code about token is expired in kotlin?", "body": "<blockquote>\n  <p>D/OkHttp: {\"code\":60200,\"message\":\"Token is not valid\"}</p>\n</blockquote>\n\n<p>->Token is not valid. so I want to add content about the token is expired and then go to <code>mainactivity</code>. </p>\n\n<pre><code>  private fun startLoading() {\n\n    val handler = Handler()\n    handler.postDelayed(Runnable {\n        val savedToken = SaveSharedPreference.getUserInfo(this)\n        if (savedToken != null) {\n\n            val intent = Intent(this, ManagementActivity::class.java)\n            startActivity(intent)\n        }\n        if (savedToken != null) {\n            Client.retrofitService.confirm(savedToken).enqueue(object :\n                Callback&lt;LoginResponse&gt; {\n                override fun onResponse(\n                    call: Call&lt;LoginResponse&gt;?,\n                    response: Response&lt;LoginResponse&gt;?\n                ) {\n                    Log.d(_tag, \"Token: $savedToken\")\n                }\n\n                override fun onFailure(call: Call&lt;LoginResponse&gt;?, t: Throwable?) {\n                   failToConfirm()\n                }\n            })\n        }\n\n\n  },3000)\n}\n</code></pre>\n"}, {"tags": ["java", "kotlin", "jackson", "annotations"], "answers": [{"tags": [], "owner": {"reputation": 7086, "user_id": 8629960, "user_type": "registered", "profile_image": "https://graph.facebook.com/872252506173746/picture?type=large", "display_name": "Kirill Simonov", "link": "https://stackoverflow.com/users/8629960/kirill-simonov"}, "is_accepted": true, "score": 2, "last_activity_date": 1571758179, "last_edit_date": 1571758179, "creation_date": 1571710223, "answer_id": 58496220, "question_id": 58495480, "link": "https://stackoverflow.com/questions/58495480/how-to-properly-override-jacksonannotationintrospector-findannotation-to-replac/58496220#58496220", "title": "How to properly override JacksonAnnotationIntrospector._findAnnotation to replace an annotation of the element", "body": "<p>The main problem here is that you can't instantiate the annotation class. There is one solution though: you could store <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-9.html#jls-9.6.1\" rel=\"nofollow noreferrer\">one annotation as a member of another annotation</a> like this:</p>\n\n<pre><code>@Retention(AnnotationRetention.RUNTIME) // don't forget \n@Target(AnnotationTarget.FIELD)         // these annotations\nannotation class MyJsonIgnore(val value: Boolean = true, val jsonIgnore: JsonIgnore = JsonIgnore())\n</code></pre>\n\n<p>So <code>MyJsonIgnore</code> will have an instantiated <code>JsonIgnore</code> inside. And then you can use it in your <code>AnnotationIntrospector</code>:</p>\n\n<pre><code>private class MyIntrospector : JacksonAnnotationIntrospector() {\n    override fun &lt;A : Annotation&gt; _findAnnotation(\n            annotated: Annotated,\n            annoClass: Class&lt;A&gt;\n    ): A? {\n        if (annoClass == JsonIgnore::class.java &amp;&amp; _hasAnnotation(annotated, MyJsonIgnore::class.java)) {\n            val mji = _findAnnotation(annotated, MyJsonIgnore::class.java)\n            if (mji?.value == true) {\n                return mji.jsonIgnore as A // this cast should be safe because we have checked\n                                           // the annotation class\n            }\n        }\n        return super._findAnnotation(annotated, annoClass)\n    }\n}\n</code></pre>\n\n<p>I've tested this with the following class</p>\n\n<pre><code>class Test {\n    @MyJsonIgnore\n    val ignoreMe = \"IGNORE\"\n    val field = \"NOT IGNORE\"\n}\n</code></pre>\n\n<p>and method </p>\n\n<pre><code>fun main() {\n    println(Mappers.myMapper().writeValueAsString(Test()))\n    println(ObjectMapper().writeValueAsString(Test()))\n}\n</code></pre>\n\n<p>and the output was</p>\n\n<pre><code>{\"field\":\"NOT IGNORE\"}\n{\"ignoreMe\":\"IGNORE\",\"field\":\"NOT IGNORE\"}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 161, "user_id": 4138353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91c07114028f76e00650677765e35f44?s=128&d=identicon&r=PG&f=1", "display_name": "Kirill Gagarski", "link": "https://stackoverflow.com/users/4138353/kirill-gagarski"}, "is_accepted": false, "score": 1, "last_activity_date": 1571866420, "creation_date": 1571866420, "answer_id": 58531275, "question_id": 58495480, "link": "https://stackoverflow.com/questions/58495480/how-to-properly-override-jacksonannotationintrospector-findannotation-to-replac/58531275#58531275", "title": "How to properly override JacksonAnnotationIntrospector._findAnnotation to replace an annotation of the element", "body": "<p>So here are my further thoughts. Kirill Simonov's answer is right and typesafe (an alternative would be to create an annotation instance using Kotlin reflection but it is not typesafe).</p>\n\n<p>Here are some problems with my original code and thoughts about the original approach:</p>\n\n<ol>\n<li><strong>You should consistently override <code>_hasAnnotation</code> and <code>_getAnnotation</code></strong></li>\n</ol>\n\n<p>You cannot be sure that <code>_getAnnotation</code> will be called after <code>_hasAnnotation</code> check. You cannot be sure which of them will be used to check your replaced annotation (<code>@JsonIgnore</code> in my case) without looking into <code>JacksonAnnotationIntrospector</code> code. It seems that overriding them consistently would be a good practice. So we should also add the following override to our class if we want to use this approach:</p>\n\n<pre><code>override fun &lt;A : Annotation&gt; _hasAnnotation(\n    annotated: Annotated,\n    annoClass: Class&lt;A&gt;\n): Boolean {\n    if (annoClass == JsonIgnore::class.java &amp;&amp; _hasAnnotation(annotated, MyJsonIgnore::class.java)) {\n        return true\n    }\n    return super._hasAnnotation(annotated, annoClass)\n}\n</code></pre>\n\n<ol start=\"2\">\n<li><strong><code>_getAnnotation</code> return type should be nullable</strong></li>\n</ol>\n\n<p>This was correctly fixed by Kirill but was not explicitly pointed out. <code>_getAnnotation</code> can and will return null sometimes.</p>\n\n<ol start=\"3\">\n<li><strong>You (probably) cannot have one magic <code>MyConditional</code> annotation.</strong></li>\n</ol>\n\n<p>Kirill's answer may encourage you to create something like a conditional annotation for all the jackson annotation which could be used as follows:</p>\n\n<pre><code>@MyConditional([\n    JsonIgnore, JsonProperty(\"propertyName\")\n])\n</code></pre>\n\n<p>You just cannot have polymorphic annotation parameter. You would have to create <code>My*</code> for every Jackson annotation you need and for annotation with parameters it's not as neat as with <code>@MyJsonIgnore</code>.</p>\n\n<p><s>You can try to make a repeatable annotation which would be applied like below and instantiated using reflection.</p>\n\n<pre><code>@MyConditional(\n    clazz = JsonProperty::class.java,\n    args = [\n        // Ah, you probably cannot have an array of any possible args here, forget it.\n    ]\n)\n</code></pre>\n\n<p></s></p>\n\n<ol start=\"4\">\n<li><strong><code>_hasAnnotation</code> and <code>_getAnnotation</code> are not the only ways which <code>JacksonAnnotationIntrospector</code> uses to get or check for annotations</strong></li>\n</ol>\n\n<p>After using similar approach to create conditional <code>@JsonProperty</code> annotation I've noticed that it does not work for enum elements. After some debugging I found out that <code>findEnumValues</code> method uses <code>java.lang.reflect.Field::getAnnotation</code> directly (due to \"various reasons\" mentioned in deprecated <code>findEnumValue</code>). If you want your conditional annotation to work you should override (at least) <code>findEnumValues</code>.</p>\n\n<ol start=\"5\">\n<li><strong>Be careful with <code>ObjectMapper::setAnnotationIntrospector</code></strong></li>\n</ol>\n\n<p>Well, its Javadoc explicitly says it: be careful. It replaces the whole annotation introspector of your mapper removing all the added (chained) by modules Introspectors. It did not appear in my code in the question (it was for the sake of creating minimal example) but actually I've accidentally broke deserialization with <code>KotlinModule</code>. You may want to consider implementing JacksonModule and appending your introspector to existing ones.</p>\n\n<ol start=\"6\">\n<li><strong>Consider another approach: implementing functionality-specific methods in <code>NopAnnotationIntrospector</code>.</strong></li>\n</ol>\n\n<p>At the end I ended up with this approach (mostly because of 4.). I needed to override <code>findEnumValues</code> and <code>hasIgnoreMarker</code> and it was enough for me. It involved a bit of copy-paste code from <code>JacksonAnnotationMapper</code> but unless you have to make a lot of the annotation conditional it might work (in any case implementing it involves a lot of boilerplate code). This way it's likely that you really want to chain this introspector, not to <code>set</code> it.</p>\n"}], "owner": {"reputation": 161, "user_id": 4138353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91c07114028f76e00650677765e35f44?s=128&d=identicon&r=PG&f=1", "display_name": "Kirill Gagarski", "link": "https://stackoverflow.com/users/4138353/kirill-gagarski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 323, "favorite_count": 0, "accepted_answer_id": 58496220, "answer_count": 2, "score": 2, "last_activity_date": 1571866420, "creation_date": 1571702063, "last_edit_date": 1571702629, "question_id": 58495480, "link": "https://stackoverflow.com/questions/58495480/how-to-properly-override-jacksonannotationintrospector-findannotation-to-replac", "title": "How to properly override JacksonAnnotationIntrospector._findAnnotation to replace an annotation of the element", "body": "<p>I am trying to create some classes serializable by Jackson. I want to annotate some elements with standard Jackson annotation (let's consider <code>JsonIgnore</code> for this example) but I want them to have effect only in my specific mapper.</p>\n\n<p>So I decided to create my own annotations like standard ones (e. g. MyJsonIgnore) and process them only in an annotation introspector used by my mapper. I've found overridable method <code>_findAnnotation</code>. Javadoc says the following:</p>\n\n<pre><code>...overridable that sub-classes may, if they choose to, \nmangle actual access block access (\"hide\" annotations) \nor perhaps change it.\n</code></pre>\n\n<p>I've found a way to block some annotations (however it involves overriding <code>_hasAnnotation</code>, not <code>_findAnnotation</code>) but I am completely stuck with changing annotations.</p>\n\n<p>Here is some minimal example of what I am trying to do:</p>\n\n<pre><code>object Mappers {\n    /**\n     * Same as JsonIgnore but mapper-specific\n     */\n    annotation class MyJsonIgnore(val value: Boolean = true)\n\n    private class MyIntrospector : JacksonAnnotationIntrospector() {\n        override fun &lt;A : Annotation&gt; _findAnnotation(\n            annotated: Annotated,\n            annoClass: Class&lt;A&gt;\n        ): A {\n            if (annoClass == JsonIgnore::class.java &amp;&amp; _hasAnnotation(annotated, MyJsonIgnore::class.java)) {\n                val mji = _findAnnotation(annotated, MyJsonIgnore::class.java)\n                return JsonIgnore(mji.value) // Does not compile, type mismatch\n                // return JsonIgnore(mji.value) as A // Does not compile, annotation class cannot be instantiated, same as Java, see below\n            }\n            return super._findAnnotation(annotated, annoClass)\n        }\n    }\n\n    fun myMapper(): ObjectMapper {\n        return ObjectMapper().setAnnotationIntrospector(MyIntrospector())\n    }\n}\n\n</code></pre>\n\n<p>I also cannot do it with Java:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class Mappers {\n    /**\n     * Same as JsonIgnore but mapper-specific\n     */\n    public @interface MyJsonIgnore {\n        boolean value() default true;\n    }\n\n    private static class MyIntrospector extends JacksonAnnotationIntrospector {\n        @Override\n        protected &lt;A extends Annotation&gt; A _findAnnotation(Annotated annotated,\n                                                           Class&lt;A&gt; annoClass) {\n            if (annoClass == JsonIgnore.class &amp;&amp; _hasAnnotation(annotated, MyJsonIgnore.class)) {\n                MyJsonIgnore mji = _findAnnotation(annotated, MyJsonIgnore.class);\n                return new JsonIgnore(mji.value()); // Does not compile, JsonIgnore is abstract\n            }\n            return super._findAnnotation(annotated, annoClass);\n        }\n    }\n\n    static ObjectMapper myMapper() {\n        return new ObjectMapper().setAnnotationIntrospector(new MyIntrospector())\n    }\n}\n\n</code></pre>\n\n<p>So what is the supposed way to change annotations by overriding this method? Is there any? Is my approach right or should I do it other way?</p>\n"}, {"tags": ["spring-boot", "spring-mvc", "kotlin"], "owner": {"reputation": 21, "user_id": 2374991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae08a736c4b47a88be00c0001d476241?s=128&d=identicon&r=PG", "display_name": "user2374991", "link": "https://stackoverflow.com/users/2374991/user2374991"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1571699527, "creation_date": 1571699527, "question_id": 58495234, "link": "https://stackoverflow.com/questions/58495234/not-able-to-get-this-controller-to-return-files-with-correct-mime-type", "title": "Not able to get this controller to return files with correct mime type", "body": "<p>I'm having trouble getting the following simple-minded controller to work correctly with Spring Framework 5.2 and Springboot 2.2 with Kotlin 1.3.50. It's a simple FileServerController that serves files below ~ but I seem to get double invocations of the controller and the mime-type of the returned file is always application/json even when I set it explicitly. If I don't return xml files with the correct mime-type, then I can't get the browser to perform XSL transformations on it. I'm somewhat sure (but not positive) that the non-Kotlin version of it would work. Could someone suggest something else for me to try. Thanks a lot.</p>\n\n<pre><code>@Controller\nclass FileServerController {\n    @RequestMapping(value = [\"/**\"])\n    fun getFile(request: HttpServletRequest, response: HttpServletResponse): FileSystemResource {\n        var fileName = request.servletPath\n        val HOME = System.getenv(\"HOME\")\n\n        println(\"Requested ${fileName}\")\n\n        fileName = \"${HOME}${fileName}\"\n        val file = File(fileName)\n\n        if (file.canRead()) {\n            println(\"Serving ${fileName}\")\n            if(fileName.endsWith(\".xml\")) {\n                response.contentType = \"text/xml\"\n            } else if(fileName.endsWith(\".xslt\")) {\n                response.contentType = \"application/xslt+xml\"\n            }\n            return FileSystemResource(file)\n        } else {\n            println(\"Couldn't find ${fileName}\")\n            throw NotFoundException(fileName)\n        }\n    }\n}\n</code></pre>\n\n<p>The dependencies in my pom.xml are</p>\n\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n            &lt;artifactId&gt;kotlin-reflect&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n            &lt;artifactId&gt;kotlin-stdlib-jdk8&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 1750, "user_id": 5409995, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8XMCLAKhBeI/AAAAAAAAAAI/AAAAAAAAACY/F1quEwmlV4Q/photo.jpg?sz=128", "display_name": "Jamil", "link": "https://stackoverflow.com/users/5409995/jamil"}, "is_accepted": false, "score": 0, "last_activity_date": 1571695937, "creation_date": 1571695937, "answer_id": 58494756, "question_id": 58494623, "link": "https://stackoverflow.com/questions/58494623/trying-to-read-a-number-from-a-text-view-in-kotlin-for-android-all-usual-method/58494756#58494756", "title": "Trying to read a number from a text view in kotlin for android, all usual methods crash the app", "body": "<p>Without being able to run the code, I think you need to parse the text you get from the time1 variable. time1 is a TextView, you\u2019re trying to parse the Textview to a string. You will need time1.text</p>\n"}, {"tags": [], "owner": {"reputation": 44108, "user_id": 8298909, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MRxNb.jpg?s=128&g=1", "display_name": "Ben P.", "link": "https://stackoverflow.com/users/8298909/ben-p"}, "is_accepted": true, "score": 3, "last_activity_date": 1571696296, "creation_date": 1571696296, "answer_id": 58494809, "question_id": 58494623, "link": "https://stackoverflow.com/questions/58494623/trying-to-read-a-number-from-a-text-view-in-kotlin-for-android-all-usual-method/58494809#58494809", "title": "Trying to read a number from a text view in kotlin for android, all usual methods crash the app", "body": "<p>Let's talk about this code:</p>\n\n<blockquote>\n<pre><code>var time1 = findViewById&lt;TextView&gt;(R.id.time1)\nvar time1String: String = time1.toString()\n</code></pre>\n</blockquote>\n\n<p>The first line will assign a <code>TextView</code> to your <code>time1</code> variable, which is great. The second line, though, is not going to access the text being displayed in that view, but will instead convert the <code>TextView</code> itself to a <code>String</code>. You can see from the logs that this is giving you this value:</p>\n\n<blockquote>\n<pre><code>\"android.support.v7.widget.AppCompatEditText{cf45b9b VFED..CL. .F...... 42,263-592,381 #7f070089 app:id/time1}\"\n</code></pre>\n</blockquote>\n\n<p>To get the text \"inside\" the <code>TextView</code>, write this instead:</p>\n\n<pre><code>var time1String = time1.text.toString()\n</code></pre>\n\n<p>Once you have that in place, you should be able to parse the text as normal.</p>\n"}], "owner": {"reputation": 13, "user_id": 12254082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de62c097c16a677ef443d5fde97a3208?s=128&d=identicon&r=PG&f=1", "display_name": "Zane", "link": "https://stackoverflow.com/users/12254082/zane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 326, "favorite_count": 0, "accepted_answer_id": 58494809, "answer_count": 2, "score": 1, "last_activity_date": 1571696435, "creation_date": 1571694923, "last_edit_date": 1571696435, "question_id": 58494623, "link": "https://stackoverflow.com/questions/58494623/trying-to-read-a-number-from-a-text-view-in-kotlin-for-android-all-usual-method", "title": "Trying to read a number from a text view in kotlin for android, all usual methods crash the app", "body": "<p>I'm trying to read a decimal number from a text view in Kotlin on Android Studio.\nHere is my code:</p>\n\n<pre><code>var time1 = findViewById&lt;TextView&gt;(R.id.time1)\nvar time1String: String = time1.toString()\nvar time1Float: Float = time1String.toFloat()\n//var Time1Double = java.lang.Double.parseDouble(time1String)\n//time1Float = time1Float * 1000\n//var time1Long: Long = time1Double.toLong()\n</code></pre>\n\n<p>Commenting Line 3 makes the code run correctly. Uncommenting any of the commented lines results in the app compiling, loading to the android VM, then crashing as soon as the app runs. As long as they are commented it runs fine, but without the intended functionality.</p>\n\n<p>the error that results when the code is ran as shown above:</p>\n\n<pre><code>E/AndroidRuntime: FATAL EXCEPTION: main\nProcess: com.example.myapplication, PID: 1067\njava.lang.NumberFormatException: For input string: \"android.support.v7.widget.AppCompatEditText{cf45b9b VFED..CL. .F...... 42,263-592,381 #7f070089 app:id/time1}\"\n    at java.lang.FloatingDecimal.readJavaFormatString(FloatingDecimal.java:1306)\n    at java.lang.Double.parseDouble(Double.java:547)\n    at com.example.myapplication.MainActivity$onCreate$9.onClick(MainActivity.kt:149)\n    at android.view.View.performClick(View.java:5610)\n    at android.view.View$PerformClick.run(View.java:22265)\n    at android.os.Handler.handleCallback(Handler.java:751)\n    at android.os.Handler.dispatchMessage(Handler.java:95)\n    at android.os.Looper.loop(Looper.java:154)\n    at android.app.ActivityThread.main(ActivityThread.java:6077)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:756)\n</code></pre>\n\n<p>Application terminated.</p>\n\n<p>Thank you all for the Help!</p>\n"}, {"tags": ["android", "android-studio", "kotlin", "button"], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 11942399, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_OhtRj46KnE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcJ0ZKgCHOhKt75dq8p3LGrVpjsyg/photo.jpg?sz=128", "display_name": "Lukas Ma\u017eikis", "link": "https://stackoverflow.com/users/11942399/lukas-ma%c5%beikis"}, "edited": false, "score": 0, "creation_date": 1571683716, "post_id": 58491013, "comment_id": 103314840, "body": "Can&#39;t declare those variables. Should I use = instead of : ?"}, {"owner": {"reputation": 402, "user_id": 11370078, "user_type": "registered", "profile_image": "https://graph.facebook.com/2345565765508240/picture?type=large", "display_name": "Dominik Wuttke", "link": "https://stackoverflow.com/users/11370078/dominik-wuttke"}, "reply_to_user": {"reputation": 7, "user_id": 11942399, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_OhtRj46KnE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcJ0ZKgCHOhKt75dq8p3LGrVpjsyg/photo.jpg?sz=128", "display_name": "Lukas Ma\u017eikis", "link": "https://stackoverflow.com/users/11942399/lukas-ma%c5%beikis"}, "edited": false, "score": 0, "creation_date": 1571690390, "post_id": 58491013, "comment_id": 103317524, "body": "This is just an example how it could look. The : are only there to show which class these variables are. You have to assign image_1,image_2,button_1,button_2 to the appropriate objects and you should give them proper names. You could for example do: val image_2 = R.id.image_2"}], "tags": [], "owner": {"reputation": 402, "user_id": 11370078, "user_type": "registered", "profile_image": "https://graph.facebook.com/2345565765508240/picture?type=large", "display_name": "Dominik Wuttke", "link": "https://stackoverflow.com/users/11370078/dominik-wuttke"}, "is_accepted": true, "score": 1, "last_activity_date": 1571677361, "creation_date": 1571677361, "answer_id": 58491013, "question_id": 58490895, "link": "https://stackoverflow.com/questions/58490895/how-to-change-button-id-by-pressing-it/58491013#58491013", "title": "How to change button id by pressing it?", "body": "<p>You can Register OnClickListener for each Button which changes the according Picture to a Picture you want to have. You can in Addition to that use a counter for each Button which determines which picuture should be shown. </p>\n\n<pre><code>val image_1 : ImageView\n    val image_2 : ImageView\n    val button_1 : Button\n    val button_2 : Button\n    var counter_1 = 0\n    var counter_2 = 1\n    button_1.setOnClickListener {\n        when(counter_1){\n            0-&gt; image_1.setImageDrawable(R.drawable.1_1)\n            1-&gt; image_1.setImageDrawable(R.drawable.1_2)\n\n        }\n        counter_1++\n    }\n    button_2.setOnClickListener {\n        when(counter_2){\n            0-&gt; image_1.setImageDrawable(R.drawable.2_1)\n            1-&gt; image_1.setImageDrawable(R.drawable.2_2)\n        }\n        counter_2++\n    }\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 11942399, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_OhtRj46KnE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcJ0ZKgCHOhKt75dq8p3LGrVpjsyg/photo.jpg?sz=128", "display_name": "Lukas Ma\u017eikis", "link": "https://stackoverflow.com/users/11942399/lukas-ma%c5%beikis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 58491013, "answer_count": 1, "score": 0, "last_activity_date": 1598384228, "creation_date": 1571676921, "last_edit_date": 1598384228, "question_id": 58490895, "link": "https://stackoverflow.com/questions/58490895/how-to-change-button-id-by-pressing-it", "title": "How to change button id by pressing it?", "body": "<p>Imagine 2 different buttons and a picture. When you press one button, the image changes to another image. If you press the other button, it changes to different picture. And so on. It's like an interactive game.</p>\n<p>I want the button to change id also, so you don't have to make a new activity each time, just keep going thru the pictures on the single activity. I only found 1 answer to this question and it advised against changing the id...</p>\n<p>How do I change the id or is there a better solution for this program?</p>\n"}, {"tags": ["kotlin", "arraylist"], "comments": [{"owner": {"reputation": 4441, "user_id": 1168884, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/jSY9r.png?s=128&g=1", "display_name": "matt freake", "link": "https://stackoverflow.com/users/1168884/matt-freake"}, "edited": false, "score": 6, "creation_date": 1571674599, "post_id": 58489909, "comment_id": 103310789, "body": "arrayListOf() <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/array-list-of.html\" rel=\"nofollow noreferrer\">kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/&hellip;</a> ?"}, {"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 3, "creation_date": 1571675082, "post_id": 58489909, "comment_id": 103311003, "body": "BTW, that&#39;s not an extension function. It&#39;s just a function."}, {"owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "edited": false, "score": 2, "creation_date": 1571678008, "post_id": 58489909, "comment_id": 103312358, "body": "How do you know that <code>.toMutableList()</code> returns an <code>ArrayList</code>?  It&#39;s not specified in the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/to-mutable-list.html\" rel=\"nofollow noreferrer\">docs</a>, so there&#39;s no guarantee.  Even if the cast works for you today, it could well fail in a future version of Kotlin (e.g. if they find/write a different <code>MutableList</code> implementation to return)."}, {"owner": {"reputation": 1133, "user_id": 2660216, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/bfbc9819fa7d2e93e735f7edd813f0f8?s=128&d=identicon&r=PG", "display_name": "P Kuijpers", "link": "https://stackoverflow.com/users/2660216/p-kuijpers"}, "edited": false, "score": 0, "creation_date": 1571735904, "post_id": 58489909, "comment_id": 103330657, "body": "Yup, not an extension function, my wrong!  And good point gidds, it&#39;s not a great solution, but worked for me for now. I was looking for a better implementation anyway."}], "answers": [{"tags": [], "owner": {"reputation": 2283, "user_id": 8159708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b814e69bb60fb1eac83b061ff2b7337d?s=128&d=identicon&r=PG", "display_name": "TomH", "link": "https://stackoverflow.com/users/8159708/tomh"}, "is_accepted": true, "score": 4, "last_activity_date": 1571678130, "creation_date": 1571678130, "answer_id": 58491199, "question_id": 58489909, "link": "https://stackoverflow.com/questions/58489909/initialize-new-arraylist-with-custom-items-in-one-line-in-kotlin/58491199#58491199", "title": "Initialize new arraylist with (custom) items in one line in Kotlin", "body": "<p><code>arrayListOf(items)</code></p>\n\n<p>So you can just do</p>\n\n<p><code>arrayListOf(MyCustomItem(1), MyCustomItem(2))</code></p>\n"}], "owner": {"reputation": 1133, "user_id": 2660216, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/bfbc9819fa7d2e93e735f7edd813f0f8?s=128&d=identicon&r=PG", "display_name": "P Kuijpers", "link": "https://stackoverflow.com/users/2660216/p-kuijpers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 0, "accepted_answer_id": 58491199, "answer_count": 1, "score": 0, "last_activity_date": 1571678130, "creation_date": 1571673176, "question_id": 58489909, "link": "https://stackoverflow.com/questions/58489909/initialize-new-arraylist-with-custom-items-in-one-line-in-kotlin", "title": "Initialize new arraylist with (custom) items in one line in Kotlin", "body": "<p>In Kotlin I created an extension function to initialise a new ArrayList with custom items, like this:</p>\n\n<pre><code>fun &lt;T&gt; arrayListFrom(vararg item: T): ArrayList&lt;T&gt; {\n    return item.toMutableList() as ArrayList&lt;T&gt;\n}\n</code></pre>\n\n<p>In this way I can easily create an arraylist like this</p>\n\n<pre><code>arrayListFrom(MyCustomItem(1), MyCustomItem(2))\n</code></pre>\n\n<p>... without creating a new-empty one, and adding all elements to it one by one</p>\n\n<p>Kotlin has so many useful functions for collections, I cannot imagine I need this extension for easy arrayList initialisation, but couldn't find another simple way. Am I missing out on some useful Kotlin function here?</p>\n"}, {"tags": ["android", "kotlin", "kotlin-coroutines"], "answers": [{"comments": [{"owner": {"reputation": 14536, "user_id": 2463035, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wWsJR.jpg?s=128&g=1", "display_name": "Vasiliy", "link": "https://stackoverflow.com/users/2463035/vasiliy"}, "edited": false, "score": 0, "creation_date": 1571674288, "post_id": 58490079, "comment_id": 103310652, "body": "Very handy, thanks. However, if I&#39;m not mistaken, it addresses only part of the problem. What if one of the libs I import uses Dispatchers.IO internally?"}, {"owner": {"reputation": 12970, "user_id": 2741273, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71f8f37ebda905a8fffeb75e91b87a89?s=128&d=identicon&r=PG&f=1", "display_name": "Francesc", "link": "https://stackoverflow.com/users/2741273/francesc"}, "reply_to_user": {"reputation": 14536, "user_id": 2463035, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wWsJR.jpg?s=128&g=1", "display_name": "Vasiliy", "link": "https://stackoverflow.com/users/2463035/vasiliy"}, "edited": false, "score": 0, "creation_date": 1571675891, "post_id": 58490079, "comment_id": 103311394, "body": "Yes, only addresses the issue of a highly multithreaded app with blocking code, I&#39;m not certain you can alter how libs would use dispatchers."}], "tags": [], "owner": {"reputation": 12970, "user_id": 2741273, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71f8f37ebda905a8fffeb75e91b87a89?s=128&d=identicon&r=PG&f=1", "display_name": "Francesc", "link": "https://stackoverflow.com/users/2741273/francesc"}, "is_accepted": false, "score": 9, "last_activity_date": 1571673785, "creation_date": 1571673785, "answer_id": 58490079, "question_id": 58489659, "link": "https://stackoverflow.com/questions/58489659/how-to-increase-kotlin-coroutines-dispatchers-io-size-on-android/58490079#58490079", "title": "How to increase Kotlin coroutines Dispatchers.IO size on Android?", "body": "<p>You can create your own dispatcher with any number of threads, like so</p>\n\n<pre><code>val dispatcher = Executors.newFixedThreadPool(128).asCoroutineDispatcher()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 14536, "user_id": 2463035, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wWsJR.jpg?s=128&g=1", "display_name": "Vasiliy", "link": "https://stackoverflow.com/users/2463035/vasiliy"}, "edited": false, "score": 2, "creation_date": 1571678881, "post_id": 58490967, "comment_id": 103312731, "body": "It&#39;s exactly what I was looking for. Tested and it works. Thanks a lot. Do you think it will also change the size of Dispatchers.IO in libs that I might import?"}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 2, "creation_date": 1571742007, "post_id": 58490967, "comment_id": 103334013, "body": "<code>Dispatchers.IO</code> is an app-wide singleton. If a dependency uses coroutines, it will still use the same coroutine library as your own code, and therefore the same thread pool."}], "tags": [], "owner": {"reputation": 2444, "user_id": 287761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UZJAT.png?s=128&g=1", "display_name": "Enselic", "link": "https://stackoverflow.com/users/287761/enselic"}, "is_accepted": true, "score": 9, "last_activity_date": 1571678379, "last_edit_date": 1571678379, "creation_date": 1571677140, "answer_id": 58490967, "question_id": 58489659, "link": "https://stackoverflow.com/questions/58489659/how-to-increase-kotlin-coroutines-dispatchers-io-size-on-android/58490967#58490967", "title": "How to increase Kotlin coroutines Dispatchers.IO size on Android?", "body": "<p><code>IO_PARALLELISM_PROPERTY_NAME</code> does not refer to an <em>Android</em> system property, but to a <strong>Java system property</strong>. Just add this code early in your app, e.g. first in your <code>Application.onCreate()</code>, to change it to <code>1000</code>:</p>\n\n<pre><code>import static kotlinx.coroutines.DispatchersKt.IO_PARALLELISM_PROPERTY_NAME;\n\nSystem.setProperty(IO_PARALLELISM_PROPERTY_NAME, Integer.toString(1000));\n</code></pre>\n\n<p>This does <em>not</em> have to be done on a per-device basis with root or anything like that. It will work everywhere, since it is regular app code using regular app APIs.</p>\n\n<p>As long as you do this before you use <code>Dispatchers.IO</code> for the first time, your property change will be applied.</p>\n"}], "owner": {"reputation": 14536, "user_id": 2463035, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wWsJR.jpg?s=128&g=1", "display_name": "Vasiliy", "link": "https://stackoverflow.com/users/2463035/vasiliy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1518, "favorite_count": 0, "accepted_answer_id": 58490967, "answer_count": 2, "score": 7, "last_activity_date": 1571678379, "creation_date": 1571672265, "question_id": 58489659, "link": "https://stackoverflow.com/questions/58489659/how-to-increase-kotlin-coroutines-dispatchers-io-size-on-android", "title": "How to increase Kotlin coroutines Dispatchers.IO size on Android?", "body": "<p>Coroutines <code>Dispatchers.IO</code> context is limited to 64 threads. That's not enough to reliably interface with blocking code in highly-concurrent system.</p>\n\n<p><a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/-dispatchers/-i-o.html\" rel=\"noreferrer\">Documentation states</a> that:</p>\n\n<blockquote>\n  <p>Additional threads in this pool are created and are shutdown on\n  demand. The number of threads used by this dispatcher is limited by\n  the value of \u201ckotlinx.coroutines.io.parallelism\u201d\n  (IO_PARALLELISM_PROPERTY_NAME) system property. It defaults to the\n  limit of 64 threads or the number of cores (whichever is larger).</p>\n</blockquote>\n\n<p>I want to change <code>kotlinx.coroutines.io.parallelism</code> system property to something else. However, if I just do this:</p>\n\n<pre><code>adb shell \"setprop kotlinx.coroutines.io.parallelism 1000\"\n</code></pre>\n\n<p>then I get the following result:</p>\n\n<pre><code>setprop: failed to set property 'kotlinx.coroutines.io.parallelism' to '1000'\n</code></pre>\n\n<p>Furthermore, if I want to ship my app, then I'll need to change this property on users' devices as well, right? Otherwise the app won't work. However, even assuming that it's possible, as far as I understand, all apps that change this property will override the setting for one another. This doesn't sound like a reliable mode of operation.</p>\n\n<p>So, I have three questions in this context:</p>\n\n<ol>\n<li>Is the property implied in documentation is indeed the \"system property\" that I tried to change?</li>\n<li>How to change this property on non-rooted device for all users of my app?</li>\n<li>Is there better alternative?</li>\n</ol>\n\n<p>P.S. I know that if I'd only use coroutines, without blocking code, this wouldn't be a problem (probably). But let's just assume that I need to use blocking calls (e.g. legacy Java code).</p>\n"}, {"tags": ["spring", "rest", "spring-boot", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 26172, "user_id": 49746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IAAg.jpg?s=128&g=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/49746/todd"}, "is_accepted": true, "score": 7, "last_activity_date": 1571673145, "creation_date": 1571673145, "answer_id": 58489898, "question_id": 58489565, "link": "https://stackoverflow.com/questions/58489565/controller-validation-in-kotlin-spring-boot/58489898#58489898", "title": "Controller validation in Kotlin Spring Boot", "body": "<p>You can use the Bean Validation Framework for this. </p>\n\n<p>1) Annotate the request object as needing validation:</p>\n\n<pre><code>fun submit(@Valid @RequestBody formObject: FormObject): FormObject\n           ^^^^^^\n</code></pre>\n\n<p>2) Annotate the fields of your data class with the appropriate validation annotations:</p>\n\n<pre><code>data class FormObject(\n    @field:NotBlank \n    val email: String, \n\n    @field:Min(1) \n    @field:Max(150) \n    val age: Int\n)\n</code></pre>\n\n<p>Note that you have to apply the annotation to the <code>field</code> (not the parameter) or the validation won't happen the way we want. Also, if we define <code>age</code> as an <code>Int</code>, it will have a default value (<code>0</code>) if the caller does not send it, so I applied a the minimum validation on that to offset that (assuming age 0 is not ok, YMMV).</p>\n"}], "owner": {"reputation": 283, "user_id": 4938195, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/61e5166d98cbf5e6c363024165effa30?s=128&d=identicon&r=PG&f=1", "display_name": "Bartosz", "link": "https://stackoverflow.com/users/4938195/bartosz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1709, "favorite_count": 0, "accepted_answer_id": 58489898, "answer_count": 1, "score": 2, "last_activity_date": 1571673145, "creation_date": 1571671947, "question_id": 58489565, "link": "https://stackoverflow.com/questions/58489565/controller-validation-in-kotlin-spring-boot", "title": "Controller validation in Kotlin Spring Boot", "body": "<p>I have a RestController with one endpoint. That endpoint accepts object of data class. Data class has 2 attributes. How do I make sure these attributes are validated?</p>\n\n<p>My data class:</p>\n\n<p><code>data class FormObject(val email: String, val age: Int)</code></p>\n\n<p>And controller:</p>\n\n<pre><code>@PostMapping(\"submit\")\nfun submit(@RequestBody formObject: FormObject): FormObject {\n    return formObject\n}\n</code></pre>\n\n<p>How do I make sure email is email and age is not bigger than 150?\nThanks,</p>\n"}, {"tags": ["android-studio", "kotlin", "android-activity"], "comments": [{"owner": {"reputation": 1427, "user_id": 1815052, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bed5ab71b8d23d9bf07a5fa12915699c?s=128&d=identicon&r=PG", "display_name": "SqueezyMo", "link": "https://stackoverflow.com/users/1815052/squeezymo"}, "edited": false, "score": 1, "creation_date": 1571672004, "post_id": 58489395, "comment_id": 103309473, "body": "<code>TextView</code>, as well as many other built-in widgets, overrides <code>onSaveInstanceState()</code> and <code>onRestoreInstanceState()</code> and is therefore capable of restoring its state after your activity is recreated."}, {"owner": {"reputation": 69, "user_id": 11829484, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QT2DLyZCfFg/AAAAAAAAAAI/AAAAAAAAB1U/LDWRf_L56uk/photo.jpg?sz=128", "display_name": "Plaban", "link": "https://stackoverflow.com/users/11829484/plaban"}, "reply_to_user": {"reputation": 1427, "user_id": 1815052, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bed5ab71b8d23d9bf07a5fa12915699c?s=128&d=identicon&r=PG", "display_name": "SqueezyMo", "link": "https://stackoverflow.com/users/1815052/squeezymo"}, "edited": false, "score": 0, "creation_date": 1571672464, "post_id": 58489395, "comment_id": 103309717, "body": "But the Instructor in an udemy course I am following did the same thing but his activity wasn&#39;t recreated and his contents in TextView widget disappeared."}], "owner": {"reputation": 69, "user_id": 11829484, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QT2DLyZCfFg/AAAAAAAAAAI/AAAAAAAAB1U/LDWRf_L56uk/photo.jpg?sz=128", "display_name": "Plaban", "link": "https://stackoverflow.com/users/11829484/plaban"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571671287, "creation_date": 1571671287, "question_id": 58489395, "link": "https://stackoverflow.com/questions/58489395/why-my-emulator-isnt-destroying-activity-in-landscape-mode", "title": "Why my emulator isn&#39;t destroying activity in landscape mode?", "body": "<p>My android emulator should destroy the contents of textView widget when I turn it to landscape from portrait. But it isn't doing that, WHY? Isn't it destroying the activity? \nlook in the emulator \"this is the first text\"-- I added this line in emulator when it was in portrait mode.</p>\n\n<pre><code>\nimport androidx.appcompat.app.AppCompatActivity\nimport android.os.Bundle\nimport android.text.method.ScrollingMovementMethod\nimport android.view.View\nimport android.widget.Button\nimport android.widget.EditText\nimport android.widget.TextView\n\nclass MainActivity : AppCompatActivity() {\n    private var textView: TextView? = null\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        //comment\n        val userInput: EditText = findViewById&lt;EditText&gt;(R.id.editText)\n        val button: Button = findViewById&lt;Button&gt;(R.id.button)\n        textView = findViewById&lt;TextView&gt;(R.id.textView)\n        textView?.text = \"\"\n        textView?.movementMethod =\n            ScrollingMovementMethod() // It allows my text view widget to scroll upward\n        userInput.text.clear()\n\n        button.setOnClickListener(object : View.OnClickListener {\n            override fun onClick(p0: View?) {\n                textView?.append(userInput.text)\n                textView?.append(\"\\n\")\n                userInput.setText(\"\")\n            }\n        })\n    }\n}\n```[enter image description here][1]\n\n\n  [1]: https://i.stack.imgur.com/oLRr3.png\n</code></pre>\n"}, {"tags": ["kotlin", "kotlin-js", "create-react-kotlin-app"], "answers": [{"comments": [{"owner": {"reputation": 693, "user_id": 6401281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f170d7b9ff5b69f66624d2ee10aa2a4?s=128&d=identicon&r=PG&f=1", "display_name": "Funzo", "link": "https://stackoverflow.com/users/6401281/funzo"}, "edited": false, "score": 1, "creation_date": 1573467894, "post_id": 58643289, "comment_id": 103879397, "body": "But what is the point in using create-react-kotlin-app if I can&#39;t share code between front and backend?"}], "tags": [], "owner": {"reputation": 17624, "user_id": 360811, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/M35XG.jpg?s=128&g=1", "display_name": "shabunc", "link": "https://stackoverflow.com/users/360811/shabunc"}, "is_accepted": true, "score": 1, "last_activity_date": 1572524562, "creation_date": 1572524562, "answer_id": 58643289, "question_id": 58489279, "link": "https://stackoverflow.com/questions/58489279/how-to-depend-on-a-maven-local-jar-when-using-create-react-kotlin-app-https-gi/58643289#58643289", "title": "How to depend on a maven local jar when using create-react-kotlin-app https://github.com/JetBrains/create-react-kotlin-app", "body": "<p>You can not reference this in your package.json file, package.json describes only npm artifacts. If one will put jar file to an npm package in theory you'll be able to access it but again it's most likely not something you actually looking for - the physical accessibility of jar doesn't actually means it content can be used as a source code. </p>\n\n<p>You can achieve this, however, using gradle. It won't be exaggeration to say that modern Kotlin/JS development is very, very challenging (to put it mildly) without using gradle. In gradle you can download any jar, unpack it and add all relevant content to sourceset. </p>\n"}], "owner": {"reputation": 693, "user_id": 6401281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f170d7b9ff5b69f66624d2ee10aa2a4?s=128&d=identicon&r=PG&f=1", "display_name": "Funzo", "link": "https://stackoverflow.com/users/6401281/funzo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 58643289, "answer_count": 1, "score": 0, "last_activity_date": 1572524562, "creation_date": 1571670846, "last_edit_date": 1572457570, "question_id": 58489279, "link": "https://stackoverflow.com/questions/58489279/how-to-depend-on-a-maven-local-jar-when-using-create-react-kotlin-app-https-gi", "title": "How to depend on a maven local jar when using create-react-kotlin-app https://github.com/JetBrains/create-react-kotlin-app", "body": "<p>I want to build a frontend in kotlin/react. \nI want it to be able to depend on common artefacts written in kotlin.\nThese artefacts will be in my local maven repo. \nHow do I reference these in package.json? </p>\n"}, {"tags": ["kotlin", "currency", "number-formatting", "decimalformat", "currency-formatting"], "answers": [{"tags": [], "owner": {"reputation": 1427, "user_id": 1815052, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bed5ab71b8d23d9bf07a5fa12915699c?s=128&d=identicon&r=PG", "display_name": "SqueezyMo", "link": "https://stackoverflow.com/users/1815052/squeezymo"}, "is_accepted": true, "score": 1, "last_activity_date": 1571675531, "last_edit_date": 1571675531, "creation_date": 1571674945, "answer_id": 58490388, "question_id": 58489119, "link": "https://stackoverflow.com/questions/58489119/change-the-currency-to-a-currency-formatter/58490388#58490388", "title": "Change the currency to a currency formatter", "body": "<p>This seems to be due to this line:</p>\n\n<pre><code>currencyFormat.positivePrefix = currencyFormat.positivePrefix + \" \"\n</code></pre>\n\n<p>Positive prefix at this point depends on the currency of the passed locale. If, for example, you invoke your method as <code>getCurrencyDecimalFormat(Locale.US, Currency.getInstance(\"EUR\"))</code>, then your <code>currencyFormat</code> is bound to USD at this point (and <code>currencyFormat.positivePrefix</code> results in <code>$</code>).</p>\n\n<p>Move this line further down, below setting your format symbols. But TBH I'm not even sure why you need it. Having a space after the currency symbol should be locale-dependent and not hardcoded.</p>\n\n<pre><code>fun getCurrencyDecimalFormat(locale: Locale, currency: Currency): DecimalFormat {\n    val currencyFormat = NumberFormat.getCurrencyInstance(locale) as DecimalFormat\n\n    currencyFormat.roundingMode = RoundingMode.DOWN\n\n    val symbol = currency.getSymbol(locale)\n    val decimalFormatSymbols = currencyFormat.decimalFormatSymbols\n\n    decimalFormatSymbols.currencySymbol = symbol\n\n    currencyFormat.decimalFormatSymbols = decimalFormatSymbols\n    currencyFormat.isParseBigDecimal = true\n    currencyFormat.positivePrefix = currencyFormat.positivePrefix + \" \"\n\n    return currencyFormat\n}\n</code></pre>\n"}], "owner": {"reputation": 444, "user_id": 888900, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/pS3TH.jpg?s=128&g=1", "display_name": "SergiBC", "link": "https://stackoverflow.com/users/888900/sergibc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 58490388, "answer_count": 1, "score": 0, "last_activity_date": 1571675531, "creation_date": 1571670334, "question_id": 58489119, "link": "https://stackoverflow.com/questions/58489119/change-the-currency-to-a-currency-formatter", "title": "Change the currency to a currency formatter", "body": "<p>I have the following method to build a currency formatter. There are 2 input fields, the locale and the currency:</p>\n\n<pre><code>    private fun getCurrencyDecimalFormat(locale: Locale, currency: Currency): DecimalFormat {\n        val currencyFormat = NumberFormat.getCurrencyInstance(locale) as DecimalFormat\n        currencyFormat.positivePrefix = currencyFormat.positivePrefix + \" \"\n        currencyFormat.roundingMode = RoundingMode.DOWN \n        val symbol = currency.getSymbol(locale)\n        val decimalFormatSymbols = currencyFormat.decimalFormatSymbols\n        decimalFormatSymbols.currencySymbol = symbol\n        currencyFormat.decimalFormatSymbols = decimalFormatSymbols\n        currencyFormat.isParseBigDecimal = true\n        return currencyFormat\n    }\n</code></pre>\n\n<p>And it is called like this:</p>\n\n<pre><code>    val currencyFormat = getCurrencyDecimalFormat(locale, currency)\n    return currencyFormat.format(amount)\n</code></pre>\n\n<p>It works fine when the currency input is the same as the currency of the locale input, so:</p>\n\n<ul>\n<li>locale: es_ES, currency: EUR = 0,00 \u20ac -> OK</li>\n<li>locale: en_US, currency: USD = $ 0.00 -> OK</li>\n</ul>\n\n<p>But if we have the following it is wrong:</p>\n\n<ul>\n<li>locale: es_ES, currency: USD = 0,00 $ -> KO</li>\n<li>locale: en_US, currency: EUR = $ 0.00 -> KO</li>\n</ul>\n\n<p>It seems the currency is not set properly... any idea? I'm doing something wrong?</p>\n"}, {"tags": ["android", "function", "kotlin", "closures"], "answers": [{"tags": [], "owner": {"reputation": 424, "user_id": 9006779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J3yF6.png?s=128&g=1", "display_name": "Nikky", "link": "https://stackoverflow.com/users/9006779/nikky"}, "is_accepted": true, "score": 1, "last_activity_date": 1571670805, "creation_date": 1571670805, "answer_id": 58489266, "question_id": 58489030, "link": "https://stackoverflow.com/questions/58489030/create-dynamic-sorting-comparator-builder-from-api-return/58489266#58489266", "title": "Create dynamic sorting Comparator builder from API return", "body": "<p>I am guessing that the second ordering oly applies to those where the first is the same value\n<a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/sorted-with.html\" rel=\"nofollow noreferrer\"><code>sortedWith</code></a> + <a href=\"http://kotlinlang.org/api/latest/jvm/stdlib/kotlin.comparisons/compare-by.html\" rel=\"nofollow noreferrer\"><code>compareBy</code></a></p>\n\n<p><code>compareBy</code> takes a vararg of selectors which is just a array, so it can be constructed</p>\n\n<pre><code>val selectors: Array&lt;(T) -&gt; Comparable&lt;*&gt;?&gt; = orders.map { TODO() }.toArray()\nlist.sortedWith(compareBy(*selectors))\n</code></pre>\n\n<p>i am thinking some extra function go go though all possible fields you could sort and uses either <code>it.field</code> or <code>-(it.field)</code> to create the selectors</p>\n\n<p>also see this answer: <a href=\"https://stackoverflow.com/questions/37259159/sort-collection-by-multiple-fields-in-kotlin/37259451#37259451\">Sort collection by multiple fields in Kotlin</a></p>\n"}, {"tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": false, "score": 1, "last_activity_date": 1571685841, "last_edit_date": 1571685841, "creation_date": 1571685308, "answer_id": 58492791, "question_id": 58489030, "link": "https://stackoverflow.com/questions/58489030/create-dynamic-sorting-comparator-builder-from-api-return/58492791#58492791", "title": "Create dynamic sorting Comparator builder from API return", "body": "<p>You can create a map from a property name to the comparator that compares orders by that property:</p>\n\n<pre><code>    val comparators = mapOf&lt;String, Comparator&lt;Order&gt;&gt;(\n            \"field\" to compareBy { it.field },\n            \"direction\" to compareBy { it.direction }\n    )\n</code></pre>\n\n<p>Then you can pick comparators from that map by the given property names, change their sorting order with <code>Comparator.reversed()</code> extension function, and finally combine all these comparators into the single resulting comparator with <code>Comparator.then(Comparator)</code> function:</p>\n\n<pre><code>    val givenOrder = listOf(\"field\" to \"ASC\", \"direction\" to \"DESC\")\n\n    val resultingOrder = givenOrder\n        .map { (fieldName, direction) -&gt; \n            comparators[fieldName]!!.let { if (direction == \"DESC\") it.reversed() else it }\n        }\n        .reduce { order, nextComparator -&gt; order.then(nextComparator) } \n\n    val sortedList = list.sortedWith(resultingOrder)\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 11729957, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qL74tItJNgc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reD4Z_U2WIK8JMZogN5ZD3NgzGUFQ/photo.jpg?sz=128", "display_name": "Ktheo", "link": "https://stackoverflow.com/users/11729957/ktheo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 0, "accepted_answer_id": 58489266, "answer_count": 2, "score": 1, "last_activity_date": 1571685841, "creation_date": 1571670035, "last_edit_date": 1571685405, "question_id": 58489030, "link": "https://stackoverflow.com/questions/58489030/create-dynamic-sorting-comparator-builder-from-api-return", "title": "Create dynamic sorting Comparator builder from API return", "body": "<p>I have a problem that I really cannot solve.. Maybe You may help me. I need to sort an object list from API return that contains filters. The problem is those filters are dynamic, The object Order (the problematic filter) :</p>\n\n<pre><code>class Order(val field : String, val direction: String)\n</code></pre>\n\n<p>The field is an object attribute (column), the direction can be ASC or DESC.\nThe JSON can return more than one filter, so this can be : </p>\n\n<pre><code>order : {\n    field : \"id\",\n    direction : \"ASC\"\n        },\n        {\n    field : \"creationDate\"\n    direction : \"DESC\"\n        }\n</code></pre>\n\n<p>The problem is, I don't know how to create a dynamic function that can create a perfect sort in my list. I know I've got to do this : </p>\n\n<pre><code>return list.sortedWith(compareBy(List::id).thenByDescending(List::creationDate))\n</code></pre>\n\n<p>But Dynamically.. wow</p>\n\n<p>KT</p>\n"}, {"tags": ["android", "android-studio", "kotlin"], "comments": [{"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 1, "creation_date": 1571668860, "post_id": 58488276, "comment_id": 103307743, "body": "What theme do you have set on the Activity in the manifest?"}, {"owner": {"reputation": 320, "user_id": 3742929, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/100001447103526/picture?type=large", "display_name": "user3742929", "link": "https://stackoverflow.com/users/3742929/user3742929"}, "reply_to_user": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1571669086, "post_id": 58488276, "comment_id": 103307872, "body": "I&#39;ve edited my original question."}, {"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1571673712, "post_id": 58488276, "comment_id": 103310362, "body": "If you haven&#39;t edited the default theme, the default behavior is for the notification bar to stay on the screen. What have you changed as compared to a bare new project?"}, {"owner": {"reputation": 320, "user_id": 3742929, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/100001447103526/picture?type=large", "display_name": "user3742929", "link": "https://stackoverflow.com/users/3742929/user3742929"}, "reply_to_user": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1571674632, "post_id": 58488276, "comment_id": 103310806, "body": "I just tried a new empty app, in there it works. I cloned it from a sample project from Github, I&#39;ll try to find it."}, {"owner": {"reputation": 320, "user_id": 3742929, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/100001447103526/picture?type=large", "display_name": "user3742929", "link": "https://stackoverflow.com/users/3742929/user3742929"}, "reply_to_user": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1571675069, "post_id": 58488276, "comment_id": 103310995, "body": "I found it: <a href=\"https://github.com/google-ar/arcore-android-sdk/tree/master/samples/hello_ar_java\" rel=\"nofollow noreferrer\">github.com/google-ar/arcore-android-sdk/tree/master/samples/&zwnj;&#8203;&hellip;</a>."}], "answers": [{"comments": [{"owner": {"reputation": 320, "user_id": 3742929, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/100001447103526/picture?type=large", "display_name": "user3742929", "link": "https://stackoverflow.com/users/3742929/user3742929"}, "edited": false, "score": 0, "creation_date": 1571676122, "post_id": 58490663, "comment_id": 103311510, "body": "Where should I add this? In onCreate()? I&#39;m also using Java."}, {"owner": {"reputation": 320, "user_id": 3742929, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/100001447103526/picture?type=large", "display_name": "user3742929", "link": "https://stackoverflow.com/users/3742929/user3742929"}, "edited": false, "score": 0, "creation_date": 1571676328, "post_id": 58490663, "comment_id": 103311583, "body": "Found it, the app switched to fullscreen in onWindowFocusChanged."}, {"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "reply_to_user": {"reputation": 320, "user_id": 3742929, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/100001447103526/picture?type=large", "display_name": "user3742929", "link": "https://stackoverflow.com/users/3742929/user3742929"}, "edited": false, "score": 0, "creation_date": 1571676369, "post_id": 58490663, "comment_id": 103311601, "body": "Yeah, onCreate. Your question is tagged kotlin."}], "tags": [], "owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "is_accepted": true, "score": 1, "last_activity_date": 1571675975, "creation_date": 1571675975, "answer_id": 58490663, "question_id": 58488276, "link": "https://stackoverflow.com/questions/58488276/prevent-app-from-overriding-the-android-notification-bar/58490663#58490663", "title": "Prevent app from overriding the Android notification bar", "body": "<p>Looks like SceneForm's BaseARFragment makes the host Activity use immersive mode via an OnWindowFocusChangeListener. I <em>think</em> you should be able to add your own OnWindowFocusChangeListener and it would be called after the other one, so you could override this behavior.</p>\n\n<pre><code>arFragment.arSceneView?.viewTreeObserver.addOnWindowFocusChangeListener { hasFocus -&gt; \n    if (hasFocus) {\n        window.decorView\n          .setSystemUiVisibility(View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN)\n    }\n}\n</code></pre>\n\n<p>Read up on the system UI flags to decide which ones you actually want.</p>\n"}], "owner": {"reputation": 320, "user_id": 3742929, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/100001447103526/picture?type=large", "display_name": "user3742929", "link": "https://stackoverflow.com/users/3742929/user3742929"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 58490663, "answer_count": 1, "score": 0, "last_activity_date": 1571675975, "creation_date": 1571667560, "last_edit_date": 1571670020, "question_id": 58488276, "link": "https://stackoverflow.com/questions/58488276/prevent-app-from-overriding-the-android-notification-bar", "title": "Prevent app from overriding the Android notification bar", "body": "<p>I have the following simple layout:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.constraint.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".MainActivity\"&gt;\n&lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n\n<p>How can I keep the notification permanently displayed in my app? My SDK-Version is 27. I already tried a lot of the solutions available and none seemed to have worked.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;application\n    android:allowBackup=\"true\"\n    android:icon=\"@mipmap/ic_launcher\"\n    android:label=\"@string/app_name\"\n    android:roundIcon=\"@mipmap/ic_launcher_round\"\n    android:supportsRtl=\"true\"\n    android:theme=\"@style/AppTheme\"&gt;\n</code></pre>\n\n<p>My styles.xml:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;resources&gt;\n\n    &lt;!-- Base application theme. --&gt;\n    &lt;style name=\"AppTheme\" parent=\"Theme.AppCompat.Light.DarkActionBar\"&gt;\n        &lt;!-- Customize your theme here. --&gt;\n        &lt;item name=\"colorPrimary\"&gt;@color/colorPrimary&lt;/item&gt;\n        &lt;item name=\"colorPrimaryDark\"&gt;@color/colorPrimaryDark&lt;/item&gt;\n        &lt;item name=\"colorAccent\"&gt;@color/colorAccent&lt;/item&gt;\n        &lt;item name=\"android:statusBarColor\"&gt;@color/colorPrimaryDark&lt;/item&gt;\n        &lt;item name=\"android:windowLightStatusBar\"&gt;true&lt;/item&gt;\n    &lt;/style&gt;\n\n&lt;/resources&gt;\n</code></pre>\n"}, {"tags": ["java", "c#", "kotlin", "md5"], "answers": [{"comments": [{"owner": {"reputation": 1253974, "user_id": 22656, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG", "display_name": "Jon Skeet", "link": "https://stackoverflow.com/users/22656/jon-skeet"}, "edited": false, "score": 1, "creation_date": 1571667743, "post_id": 58488301, "comment_id": 103307095, "body": "&quot;You cannot take any old byte sequence and turn it into a string.&quot; - yes you can, you just can&#39;t treat it <i>as a string in an arbitrary encoding</i>. Converting it into base64 is still &quot;turning it into a string&quot;. Without the notion of an encoding, there&#39;s no concept of &quot;a valid string&quot;. (And indeed any byte sequence <i>is</i> a valid ISO-8859-1 string.) I wholeheartedly agree with the thrust of the answer, but can&#39;t in good conscience upvote it until the first paragraph is sorted :)"}, {"owner": {"reputation": 22713, "user_id": 1086121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85d145ca3d7f8490da86055b72f3d859?s=128&d=identicon&r=PG", "display_name": "canton7", "link": "https://stackoverflow.com/users/1086121/canton7"}, "reply_to_user": {"reputation": 1253974, "user_id": 22656, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG", "display_name": "Jon Skeet", "link": "https://stackoverflow.com/users/22656/jon-skeet"}, "edited": false, "score": 0, "creation_date": 1571668315, "post_id": 58488301, "comment_id": 103307431, "body": "@JonSkeet Hopefully that&#39;s a bit more correct, thanks for the feedback"}], "tags": [], "owner": {"reputation": 22713, "user_id": 1086121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85d145ca3d7f8490da86055b72f3d859?s=128&d=identicon&r=PG", "display_name": "canton7", "link": "https://stackoverflow.com/users/1086121/canton7"}, "is_accepted": true, "score": 5, "last_activity_date": 1571668396, "last_edit_date": 1571668396, "creation_date": 1571667617, "answer_id": 58488301, "question_id": 58488223, "link": "https://stackoverflow.com/questions/58488223/md5-hashcode-in-c-and-kotlinjava/58488301#58488301", "title": "MD5 Hashcode in C# and Kotlin(Java)", "body": "<p>In C#, you try and use UTF-8 encoding to turn your bytes into a string. However, this is a very bad idea -- there are many sequences of bytes which aren't valid in a UTF-8-encoded string, and further sequences which will result in unprintable characters. If the encoder encounters a sequence of bytes which don't form a valid UTF-8-encoded character (and it will do, because you're not doing anything to ensure that your sequence of bytes is a valid UTF-8-encoded string), it will insert a replacement character.</p>\n\n<p>In Kotlin, you use <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#String(byte[])\" rel=\"nofollow noreferrer\"><code>new String(byte[])</code></a> which uses your system's encoding. You've got a similar problem here: although most bytes will result in a valid character, some of those characters will be unprintable.</p>\n\n<p>So you're using two different encodings for C# and Kotlin (hence different results), but you're <em>also</em> doing something which will probably give you unprintable characters, or might replace sequences of bytes with a replacement character (so different MD5 hashes will look the same).</p>\n\n<p>(Note that \"unprintable characters\" might just not be visible, but they might do strange things like reverse the direction of text on that page, or start joining together the characters around them!)</p>\n\n<p>You'd be better off turning your bytes into a base64 string, or a sequence of hex characters. Both of these make sure that every possible sequence of bytes gets turned into printable characters, in a way which is consistent across different languages.</p>\n\n<p>For C#, use <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.convert.tobase64string?view=netframework-4.8\" rel=\"nofollow noreferrer\"><code>Convert.ToBase64String(data)</code></a> to get a base64-encoded string, and <code>BitConverter.ToString(data).Replace(\"-\",\"\")</code> to get a hex-encoded string (although there <a href=\"https://stackoverflow.com/questions/311165/how-do-you-convert-a-byte-array-to-a-hexadecimal-string-and-vice-versa\">are many way to do this</a>).</p>\n\n<p>For Kotlin, use <code>Base64.getEncoder().encodeToString(data)</code> to get a base64-encoded string, and <code>data.joinToString(\"\") { \"%02x\".format(it) }</code> to get a hex-encoded string.</p>\n"}], "owner": {"reputation": 371, "user_id": 4051774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b982c02454a9d3e76fa62730f6239681?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/4051774/pavel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 58488301, "answer_count": 1, "score": 0, "last_activity_date": 1571668396, "creation_date": 1571667378, "question_id": 58488223, "link": "https://stackoverflow.com/questions/58488223/md5-hashcode-in-c-and-kotlinjava", "title": "MD5 Hashcode in C# and Kotlin(Java)", "body": "<p>I'm struggling with difference in MD5 result consumption in Kotlin (Java) and C#. I've found this article thats suggests solution:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/2920044/how-can-you-generate-the-same-md5-hashcode-in-c-sharp-and-java\">How can you generate the same MD5 Hashcode in C# and Java?</a> </p>\n\n<p>But I would like to understand logic behind this. I've done couple of tests. \nC#: </p>\n\n<pre><code>var data = MD5.Create().ComputeHash(Encoding.UTF8.GetBytes(\"123456\"));\nvar s = Encoding.UTF8.GetString(data, 0, data.Length);\n</code></pre>\n\n<p>Produces following byte sequence (data variable):  </p>\n\n<pre><code> 225, 10, 220, 57, 73, 186, 89, 171, 190, 86, 224, 87, 242, 15, 136, 62\n</code></pre>\n\n<p>If I use Kotlin (Java): </p>\n\n<pre><code>val md = MessageDigest.getInstance(\"MD5\")\nval data = md.digest(\"123456\".toByteArray())\n\nval s = String(data)\n\nval ls2 = data.map { x-&gt; x.toUByte() }\n</code></pre>\n\n<p>So Java has bytes with sign, and c# unsigned (ls2 - contains same unsigned bytes as c# example). Fine. I would like to get string value - I convert both byte arrays to string and I got different strings (s variable). What do I miss? </p>\n\n<p>Thanks.</p>\n"}]