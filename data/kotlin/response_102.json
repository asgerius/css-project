[{"tags": ["regex", "wildcard", "kotlin"], "comments": [{"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1482421689, "post_id": 41270732, "comment_id": 69775811, "body": "1. There is no wildcard in &quot;/article/get/&quot; so it only matches itself which makes it a bit hard to understand your question. (i.e. what kind of URI matching do you really want/need?) 2. Putting verbs like &quot;get&quot; in RESTful APIs is typically frowned upon; the HTTP methods are the verbs and resources should be referenceable with the same address regardless of the verb. 3. Have you considered using a RESTful framework with routing built-in? e.g. Jersey."}], "answers": [{"comments": [{"owner": {"reputation": 333, "user_id": 2328721, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/4e809ae31cbe44d9e5a66179b5a33fdc?s=128&d=identicon&r=PG", "display_name": "Jake S.", "link": "https://stackoverflow.com/users/2328721/jake-s"}, "edited": false, "score": 0, "creation_date": 1482417206, "post_id": 41271363, "comment_id": 69772751, "body": "Thanks mate! This is not perfect, but I guess it&#39;s the best option for me right now."}, {"owner": {"reputation": 1975, "user_id": 5029307, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5481fa266e0007d9c497e95b41019fc0?s=128&d=identicon&r=PG&f=1", "display_name": "Travis", "link": "https://stackoverflow.com/users/5029307/travis"}, "reply_to_user": {"reputation": 333, "user_id": 2328721, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/4e809ae31cbe44d9e5a66179b5a33fdc?s=128&d=identicon&r=PG", "display_name": "Jake S.", "link": "https://stackoverflow.com/users/2328721/jake-s"}, "edited": false, "score": 0, "creation_date": 1482418769, "post_id": 41271363, "comment_id": 69773792, "body": "@JacobS You could use anonymous instances of <code>Regex</code> if you don&#39;t want the pattern to be visually separated from the <code>return SomeController</code> logic, but that might start taking up a lot of horizontal line space inside the <code>when</code> block..."}, {"owner": {"reputation": 1975, "user_id": 5029307, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5481fa266e0007d9c497e95b41019fc0?s=128&d=identicon&r=PG&f=1", "display_name": "Travis", "link": "https://stackoverflow.com/users/5029307/travis"}, "reply_to_user": {"reputation": 333, "user_id": 2328721, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/4e809ae31cbe44d9e5a66179b5a33fdc?s=128&d=identicon&r=PG", "display_name": "Jake S.", "link": "https://stackoverflow.com/users/2328721/jake-s"}, "edited": false, "score": 0, "creation_date": 1482444825, "post_id": 41271363, "comment_id": 69787617, "body": "@JacobS. I just edited in another approach that might be closer to what you&#39;re looking for..."}, {"owner": {"reputation": 333, "user_id": 2328721, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/4e809ae31cbe44d9e5a66179b5a33fdc?s=128&d=identicon&r=PG", "display_name": "Jake S.", "link": "https://stackoverflow.com/users/2328721/jake-s"}, "edited": false, "score": 0, "creation_date": 1482780991, "post_id": 41271363, "comment_id": 69873670, "body": "This is great! Thank you."}, {"owner": {"reputation": 351, "user_id": 3505901, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b208bf39b28fdf25bbdb9081759cc4fd?s=128&d=identicon&r=PG&f=1", "display_name": "user3505901", "link": "https://stackoverflow.com/users/3505901/user3505901"}, "edited": false, "score": 0, "creation_date": 1510805157, "post_id": 41271363, "comment_id": 81593719, "body": "Anyone else have a problem with with using import kotlin.text.regex? Like I wonder if it was moved"}], "tags": [], "owner": {"reputation": 1975, "user_id": 5029307, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5481fa266e0007d9c497e95b41019fc0?s=128&d=identicon&r=PG&f=1", "display_name": "Travis", "link": "https://stackoverflow.com/users/5029307/travis"}, "is_accepted": true, "score": 6, "last_activity_date": 1506356233, "last_edit_date": 1506356233, "creation_date": 1482352042, "answer_id": 41271363, "question_id": 41270732, "link": "https://stackoverflow.com/questions/41270732/regex-or-wildcard-in-kotlins-when-statement/41271363#41271363", "title": "Regex or Wildcard in Kotlin&#39;s when statement?", "body": "<p>Yes.</p>\n\n<pre><code>import kotlin.text.regex\n\nval regex1 = Regex( /* pattern */ )\nval regex2 = Regex( /* pattern */ )\n/* etc */\n\nwhen {\n    regex1.matches(uri) -&gt; /* do stuff */\n    regex2.matches(uri) -&gt; /* do stuff */\n    /* etc */\n}\n</code></pre>\n\n<p>You could also use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/-regex/contains-match-in.html\" rel=\"nofollow noreferrer\"><code>containsMatchIn</code></a> if that suits your needs better than <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/-regex/matches.html\" rel=\"nofollow noreferrer\"><code>matches</code></a>.</p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>The test expression of a <a href=\"https://kotlinlang.org/docs/reference/grammar.html#when\" rel=\"nofollow noreferrer\"><code>when</code></a> statement is optional.  If no test expression is included, then the <code>when</code> statement functions like an <code>if-else if</code> chain, where the <a href=\"https://kotlinlang.org/docs/reference/grammar.html#whenCondition\" rel=\"nofollow noreferrer\"><code>whenCondition</code></a> of each <a href=\"https://kotlinlang.org/docs/reference/grammar.html#whenEntry\" rel=\"nofollow noreferrer\"><code>whenEntry</code></a> shall independently evaluate to a boolean.</p>\n\n<hr>\n\n<p>EDIT:</p>\n\n<p>So I thought about it for awhile, and I came up with a different approach that might be closer to what you want.</p>\n\n<pre><code>import kotlin.text.regex\n\nwhen (RegexWhenArgument(uri)) {\n    Regex(/* pattern */) -&gt; /* do stuff */\n    Regex(/* pattern */) -&gt; /* do stuff */\n    /* etc */\n}\n</code></pre>\n\n<p>Where <code>RegexWhenArgument</code> is minimally defined as:</p>\n\n<pre><code>class RegexWhenArgument (val whenArgument: CharSequence) {\n    operator fun equals(whenEntry: Regex) = whenEntry.matches(whenArgument)\n    override operator fun equals(whenEntry: Any?) = (whenArgument == whenEntry)\n}\n</code></pre>\n\n<p>This approach lets you get as close as possible to the \"argument-ful\" <code>when</code> expression syntax.  I think it's about as streamlined and readable as it can be (assuming that you define the <code>RegexWhenArgument</code> class elsewhere).</p>\n\n<p>This approach uses something similar to the visitor design pattern in combination with Kotlin's operator overloading to redefine what constitutes a \"match\" between a <code>when</code> expression argument and a <code>whenEntry</code>.  If you really wanted to, I suppose you could take this approach a step further and generify <code>RegexWhenArgument</code> into a general-purpose <code>WhenArgument</code> and <code>WhenArgumentDecorator</code> that allows you to specify custom \"match\" criteria in a <code>when</code> expression for any sort of type, not just Regex.</p>\n"}], "owner": {"reputation": 333, "user_id": 2328721, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/4e809ae31cbe44d9e5a66179b5a33fdc?s=128&d=identicon&r=PG", "display_name": "Jake S.", "link": "https://stackoverflow.com/users/2328721/jake-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2837, "favorite_count": 1, "accepted_answer_id": 41271363, "answer_count": 1, "score": 6, "last_activity_date": 1506356233, "creation_date": 1482349396, "question_id": 41270732, "link": "https://stackoverflow.com/questions/41270732/regex-or-wildcard-in-kotlins-when-statement", "title": "Regex or Wildcard in Kotlin&#39;s when statement?", "body": "<p>I'm working on a RESTful app in Kotlin and for the router, I'm using a when statement, as it's the most readable and good looking conditional.</p>\n\n<p>Is there a way to use Regex or a wildcard in the when statement for a string?</p>\n\n<p>(So that URIs like \"/article/get/\" would all be passed to the same controller)</p>\n\n<p>The structure of my router is as follows:</p>\n\n<pre><code>when(uri) {\n    \"some/url\" -&gt; return SomeController(config).someAction(session)\n}\n</code></pre>\n"}, {"tags": ["javascript", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 175, "user_id": 2419193, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f3683adb83f1b539fc27d51d9c94ff36?s=128&d=identicon&r=PG", "display_name": "ismail", "link": "https://stackoverflow.com/users/2419193/ismail"}, "edited": false, "score": 0, "creation_date": 1483712599, "post_id": 41469054, "comment_id": 70221010, "body": "Ok, so it&#39;s basically for creating reusable libraries. That makes sense."}, {"owner": {"reputation": 2416, "user_id": 168722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2733344efeaed9e345f76193f94e9ca7?s=128&d=identicon&r=PG", "display_name": "xap4o", "link": "https://stackoverflow.com/users/168722/xap4o"}, "edited": false, "score": 2, "creation_date": 1520973596, "post_id": 41469054, "comment_id": 85534341, "body": "How to import this file in Intellij?"}], "tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": true, "score": 7, "last_activity_date": 1483622805, "last_edit_date": 1483622805, "creation_date": 1483548222, "answer_id": 41469054, "question_id": 41269270, "link": "https://stackoverflow.com/questions/41269270/kotlin-what-is-a-kjsm-file/41469054#41469054", "title": "Kotlin: What is a kjsm file?", "body": "<p>A <strong>kjsm</strong>-file is a <strong>K</strong>otlin <strong>J</strong>ava<strong>S</strong>cript <strong>M</strong>eta file (see <a href=\"https://github.com/JetBrains/kotlin/blob/5db75c993bf98ee1f1d713544963ec67ff3367f9/idea/idea-analysis/src/org/jetbrains/kotlin/idea/decompiler/js/KotlinJavaScriptMetaFileType.kt\" rel=\"noreferrer\"><code>KotlinJavaScriptMetaFileType</code></a>).</p>\n\n<p>Such a file appears to be used to provide meta data for native JavaScript objects so that the Kotlin compiler can type-check things and so that an IDE can provide code completion, etc. e.g. If you look in kotlin-js-library-1.0.6.jar you will find, among other kjsm-files, a <code>Window.kjsm</code> file which defines the <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Window\" rel=\"noreferrer\">Window Web API</a> available in web browsers.</p>\n\n<p>You would want to generate your own kjsm-files whenever you are creating a library so that your interfaces can be used by the compiler/IDE in modules which depend on your Kotlin JavaScript library.</p>\n"}], "owner": {"reputation": 175, "user_id": 2419193, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f3683adb83f1b539fc27d51d9c94ff36?s=128&d=identicon&r=PG", "display_name": "ismail", "link": "https://stackoverflow.com/users/2419193/ismail"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 968, "favorite_count": 1, "accepted_answer_id": 41469054, "answer_count": 1, "score": 10, "last_activity_date": 1483622805, "creation_date": 1482343932, "last_edit_date": 1482360453, "question_id": 41269270, "link": "https://stackoverflow.com/questions/41269270/kotlin-what-is-a-kjsm-file", "title": "Kotlin: What is a kjsm file?", "body": "<p>I have been trying to use the Kotlin -> js compiler by following <a href=\"https://kotlinlang.org/docs/tutorials/javascript/getting-started-command-line/command-line-library-js.html\" rel=\"noreferrer\">this tutorial</a>.</p>\n\n<p>When I run <code>kotlinc-js --help</code>, then the help text mentions the following:</p>\n\n<pre><code>-kjsm    Generate kjsm-files (for creating libraries)\n</code></pre>\n\n<p>What is a kjsm file?</p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 19421, "user_id": 3795501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eaeec79535337d9a96f63f2d6ef3e49d?s=128&d=identicon&r=PG", "display_name": "Luka Jacobowitz", "link": "https://stackoverflow.com/users/3795501/luka-jacobowitz"}, "is_accepted": true, "score": 5, "last_activity_date": 1482270942, "creation_date": 1482270942, "answer_id": 41251887, "question_id": 41251841, "link": "https://stackoverflow.com/questions/41251841/specifiying-k-v-type-in-pairk-v/41251887#41251887", "title": "Specifiying &lt;K,V&gt; type in `Pair&lt;K,V&gt;`", "body": "<p>Just get rid of the generic definition and use a <code>Pair&lt;String, String&gt;</code>: </p>\n\n<pre><code>fun parametersOf(vararg pairs: Pair&lt;String, String&gt;): Parameters {\n\n    val p = Parameters(pairs.size)\n\n    for ((key, value) in pairs)\n        p.put(key, value) \n\n    return p\n}\n</code></pre>\n"}], "owner": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 41251887, "answer_count": 1, "score": 4, "last_activity_date": 1482270942, "creation_date": 1482270759, "question_id": 41251841, "link": "https://stackoverflow.com/questions/41251841/specifiying-k-v-type-in-pairk-v", "title": "Specifiying &lt;K,V&gt; type in `Pair&lt;K,V&gt;`", "body": "<p>How can I get rid of these <code>as String</code> casts?</p>\n\n<p>What I want to do is to change the <code>fun</code> definition but I'm not sure how to do it... to include <code>String</code> in there</p>\n\n<pre><code> parametersOf(\"appKey\" to \"asdas3334\", \"token\" to \"433432\")\n\n/**\n * Returns a new [Parameters] with the specified contents, given as a list of pairs\n * where the first component is the key and the second is the value.\n */\nfun &lt;K, V&gt; parametersOf(vararg pairs: Pair&lt;K, V&gt;): Parameters {\n\n    val p = Parameters(pairs.size)\n\n    for ((key, value) in pairs)\n        p.put(key as String, value as String)\n\n    return p\n}\n</code></pre>\n"}, {"tags": ["kotlin", "kotlin-interop"], "answers": [{"comments": [{"owner": {"reputation": 4190, "user_id": 2207729, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/076e4de85fdcd7632642b930f525cfaf?s=128&d=identicon&r=PG&f=1", "display_name": "PedroD", "link": "https://stackoverflow.com/users/2207729/pedrod"}, "edited": false, "score": 0, "creation_date": 1482270407, "post_id": 41246719, "comment_id": 69704057, "body": "Thanks! I wasn&#39;t aware that the kotlin compiler could not check the scope in which I am using that return, it is the first time I see these behaviour in a functional language."}, {"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 3, "creation_date": 1482276186, "post_id": 41246719, "comment_id": 69706218, "body": "It&#39;s not that the compiler couldn&#39;t check the scope, indeed it checks the scope and prohibits non-local return from that scope. The return statement was deliberately designed to return from the closest non-lambda function to enable inline functions with lambdas, such as <code>forEach</code>, <code>synchronized</code>, etc, look like language constructs. More details about return statements here: <a href=\"https://kotlinlang.org/docs/reference/returns.html#return-at-labels\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/returns.html#return-at-labels</a>"}], "tags": [], "owner": {"reputation": 42524, "user_id": 936832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc1da0368f0874a66bd771c4d57f94b0?s=128&d=identicon&r=PG", "display_name": "Ingo Kegel", "link": "https://stackoverflow.com/users/936832/ingo-kegel"}, "is_accepted": true, "score": 13, "last_activity_date": 1482250508, "creation_date": 1482250508, "answer_id": 41246719, "question_id": 41246644, "link": "https://stackoverflow.com/questions/41246644/cant-have-a-return-inside-a-runnable-sam-in-kotlin/41246719#41246719", "title": "Can&#39;t have a return inside a Runnable SAM in Kotlin?", "body": "<p>A plain <code>return</code> returns from the nearest enclosing function or anonymous function. In your example, the return is non-local and returns from <code>spawnWorker</code> and not from the <code>Runnable</code> SAM adapter. For a local return, use the labeled version:</p>\n\n<pre><code>fun spawnWorker(): Runnable {\n    return Runnable {\n        LOG.info(\"I am a potato!\")\n        return@Runnable\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 2, "last_activity_date": 1482301484, "creation_date": 1482301484, "answer_id": 41256414, "question_id": 41246644, "link": "https://stackoverflow.com/questions/41246644/cant-have-a-return-inside-a-runnable-sam-in-kotlin/41256414#41256414", "title": "Can&#39;t have a return inside a Runnable SAM in Kotlin?", "body": "<p>You are using a lambda-to-SAM conversion, thus trying to return from a lambda statement, which is not allowed to have a return on its own.</p>\n\n<p>Your code</p>\n\n<pre><code>fun spawnWorker(): Runnable {\n    return Runnable { LOG.info(\"I am a potato!\") }\n}\n</code></pre>\n\n<p>Means the same as</p>\n\n<pre><code>fun spawnWorker(): Runnable {\n    return { LOG.info(\"I am a potato!\") }\n}\n</code></pre>\n\n<p>Compare it to returning an object, which is the direct translation from Java:</p>\n\n<pre><code>fun spawnWorker(): Runnable {\n    return object : Runnable {\n        override fun run() {\n            LOG.info(\"I am a potato!\")\n            return // don't really need that one\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 4190, "user_id": 2207729, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/076e4de85fdcd7632642b930f525cfaf?s=128&d=identicon&r=PG&f=1", "display_name": "PedroD", "link": "https://stackoverflow.com/users/2207729/pedrod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1419, "favorite_count": 0, "accepted_answer_id": 41246719, "answer_count": 2, "score": 6, "last_activity_date": 1482301484, "creation_date": 1482250253, "question_id": 41246644, "link": "https://stackoverflow.com/questions/41246644/cant-have-a-return-inside-a-runnable-sam-in-kotlin", "title": "Can&#39;t have a return inside a Runnable SAM in Kotlin?", "body": "<p>I am having the following error with this piece of code, which makes no sense to me:</p>\n\n<pre><code>fun spawnWorker(): Runnable {\n    return Runnable {\n        LOG.info(\"I am a potato!\")\n        return\n    }\n}\n</code></pre>\n\n<p>My IDE says this to me:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Y1yfP.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Y1yfP.png\" alt=\"enter image description here\"></a></p>\n\n<p>But the Runnable interface says otherwise:</p>\n\n<pre><code>@FunctionalInterface\npublic interface Runnable {\n    public abstract void run();\n}\n</code></pre>\n\n<p>What is the reason why I can't have a return there, but without any return it compiles fine:</p>\n\n<pre><code>fun spawnWorker(): Runnable {\n    return Runnable {\n        LOG.info(\"I am a potato!\")\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "android-studio", "intellij-idea", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1550, "user_id": 2523007, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/aCsFp.jpg?s=128&g=1", "display_name": "vanomart", "link": "https://stackoverflow.com/users/2523007/vanomart"}, "edited": false, "score": 0, "creation_date": 1482244695, "post_id": 41244372, "comment_id": 69689332, "body": "ok, that solved my problem!. Do you also know why lint tries to remove my code if it&#39;s actually used?"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "reply_to_user": {"reputation": 1550, "user_id": 2523007, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/aCsFp.jpg?s=128&g=1", "display_name": "vanomart", "link": "https://stackoverflow.com/users/2523007/vanomart"}, "edited": false, "score": 1, "creation_date": 1482252694, "post_id": 41244372, "comment_id": 69694760, "body": "The cast as such is unused; the fact that it affects the inferred variable type is a side effect."}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 3, "last_activity_date": 1482243274, "creation_date": 1482243274, "answer_id": 41244372, "question_id": 41244308, "link": "https://stackoverflow.com/questions/41244308/kotlin-possibly-incorrectly-reporting-an-unused-code/41244372#41244372", "title": "Kotlin - possibly incorrectly reporting an unused code", "body": "<p>The correct way to fix this is to specify the variable type:</p>\n\n<p><code>var activityClass: Class&lt;out BaseActivity&gt; = MainActivity::class.java</code></p>\n"}], "owner": {"reputation": 1550, "user_id": 2523007, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/aCsFp.jpg?s=128&g=1", "display_name": "vanomart", "link": "https://stackoverflow.com/users/2523007/vanomart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 41244372, "answer_count": 1, "score": 1, "last_activity_date": 1482243274, "creation_date": 1482243096, "question_id": 41244308, "link": "https://stackoverflow.com/questions/41244308/kotlin-possibly-incorrectly-reporting-an-unused-code", "title": "Kotlin - possibly incorrectly reporting an unused code", "body": "<p>I have a base class for all activities in my app. I want a variable <code>activityClass</code> to be of type <code>&lt;? extends BaseActivity&gt;</code>. This is how I declared the variable in Kotlin:</p>\n\n<pre><code> var activityClass = MainActivity::class.java as Class&lt;out BaseActivity&gt;\n</code></pre>\n\n<p>The problem is that in Android studio I get the part \"<code>as Class&lt;out BaseActivity&gt;</code>\" grayed out and the popup message says: \"No cast needed\"</p>\n\n<p>If I follow the AS advice and I remove the casting, I get compiler errors when I am trying to assign the variable using other activities deriving from BaseActivity. The following code:</p>\n\n<pre><code>activityClass = SpecificActivity::class.java\n</code></pre>\n\n<p>gives me an error \"Type inference failed. Expected type mismatch: required <code>Class&lt;MainActivity&gt;</code>, found <code>Class&lt;SpecificActivity&gt;</code>\".</p>\n\n<p>This causes problems mainly when I am committing code changes because the options \"Cleanup\" and \"Optimize imports\" in AS commit wizard are checked, which removes \"unused\" code (the \"as Class\" part), which is in fact actually used. <strong>The solution is not to turn these options off because I actually want them to be set to true.</strong></p>\n\n<p>If I commit my changes, go to the class where the casting is used and undo the changes, it asks me \"Undo Optimize Imports before commit?\". If I confirm, I get the casting back, so I know this is causing the issue.</p>\n\n<p>PS: I use Kotlin 1.0.5-3</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 5342353, "user_type": "registered", "profile_image": "https://graph.facebook.com/948900785148311/picture?type=large", "display_name": "Madalina Chis", "link": "https://stackoverflow.com/users/5342353/madalina-chis"}, "is_accepted": true, "score": 3, "last_activity_date": 1483605368, "last_edit_date": 1483605368, "creation_date": 1482245354, "answer_id": 41245044, "question_id": 41244071, "link": "https://stackoverflow.com/questions/41244071/cant-solve-content-length-and-stream-length-disagree-error/41245044#41245044", "title": "Can`t solve &quot;Content-Length and stream length disagree&quot; error", "body": "<p>I found the answer to my question. The problem was that I was trying to parse the response for the API twice, first time to show the error messages and then to get the error codes to handle them for future validations. </p>\n\n<p>This is how my code looks: </p>\n\n<pre><code>ErrorHandler.showError(activity, response)\nval errorCodes = ErrorHandler.parseErrorCodes(response)\nhandleErrorCodes(errorCodes)\n</code></pre>\n\n<p>So, both methods showError and parseErrorCodes were working with the API response. </p>\n"}], "owner": {"reputation": 51, "user_id": 5342353, "user_type": "registered", "profile_image": "https://graph.facebook.com/948900785148311/picture?type=large", "display_name": "Madalina Chis", "link": "https://stackoverflow.com/users/5342353/madalina-chis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1434, "favorite_count": 0, "accepted_answer_id": 41245044, "answer_count": 1, "score": 2, "last_activity_date": 1483605564, "creation_date": 1482242284, "last_edit_date": 1483605564, "question_id": 41244071, "link": "https://stackoverflow.com/questions/41244071/cant-solve-content-length-and-stream-length-disagree-error", "title": "Can`t solve &quot;Content-Length and stream length disagree&quot; error", "body": "<p>I get an error while trying to execute the following code: </p>\n\n<pre><code> fun parseErrorCodes(response: Response&lt;*&gt;): List&lt;String&gt; {\n        val errorCodes: MutableList&lt;String&gt; = ArrayList()\n        try {\n            val listType = object : TypeToken&lt;ArrayList&lt;ApiError&gt;&gt;() {\n            }.type\n            val errorJson = JsonParser().parse(response.errorBody().string()).asJsonObject.get(\"response\")\n            if (errorJson.isJsonArray) {\n                val errors = Gson().fromJson&lt;List&lt;ApiError&gt;&gt;(errorJson, listType)\n                for (apiError in errors) {\n                    errorCodes.add(apiError.errorCode)\n                }\n                return errorCodes\n            } else {\n                errorCodes.add(Gson().fromJson(errorJson, ApiError::class.java).errorCode)\n                return errorCodes\n            }\n        } catch (e: Exception) {\n            e.printStackTrace()\n        }\n        return errorCodes\n    }\n</code></pre>\n\n<p><strong>The error occurs at the line :</strong>     <code>val errorJson = JsonParser().parse(response.errorBody().string()).asJsonObject.get(\"response\")</code></p>\n\n<p>Can someone help me to solve this error?</p>\n"}, {"tags": ["java", "unit-testing", "kotlin", "junit", "concurrency"], "comments": [{"owner": {"reputation": 5270, "user_id": 1501234, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/2VLce.jpg?s=128&g=1", "display_name": "Jaroslaw Pawlak", "link": "https://stackoverflow.com/users/1501234/jaroslaw-pawlak"}, "edited": false, "score": 0, "creation_date": 1482232068, "post_id": 41240505, "comment_id": 69681267, "body": "Why don&#39;t you just implement that <code>Concurrently</code> class yourself? You already have the code that it is supposed to execute, it&#39;s now just a matter of refactoring. And the result will have about 30 lines of code."}], "answers": [{"tags": [], "owner": {"reputation": 7297, "user_id": 5604676, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/CQ3zk.jpg?s=128&g=1", "display_name": "Sergii Bishyr", "link": "https://stackoverflow.com/users/5604676/sergii-bishyr"}, "is_accepted": false, "score": 2, "last_activity_date": 1482231777, "last_edit_date": 1482231777, "creation_date": 1482231261, "answer_id": 41240628, "question_id": 41240505, "link": "https://stackoverflow.com/questions/41240505/how-to-write-concurrent-unit-tests/41240628#41240628", "title": "How to write concurrent unit tests", "body": "<p>Using <a href=\"http://testng.org/doc/documentation-main.html\" rel=\"nofollow noreferrer\">TestNG</a> is the easiest way as for me:</p>\n\n<pre><code> @Test(threadPoolSize = 10, invocationCount = 15, timeOut = 1000)\n public void testPut(){\n     out.put(\"Hello\");\n }\n</code></pre>\n\n<p>This test will run 15 times in 10 threads and should take no longer than 1000 ms.</p>\n\n<p>Also you can create tests which depends on other test</p>\n\n<pre><code>@Test(dependsOnMethods = \"testPut\")\npublic void testGetAfterPut{\n    String taken = out.take();\n\n    assertThat(taken).isEqualTo(\"Hello\");\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2365, "user_id": 4774054, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/LRst1.jpg?s=128&g=1", "display_name": "Frank Neblung", "link": "https://stackoverflow.com/users/4774054/frank-neblung"}, "is_accepted": false, "score": 0, "last_activity_date": 1573822911, "creation_date": 1573822911, "answer_id": 58877640, "question_id": 41240505, "link": "https://stackoverflow.com/questions/41240505/how-to-write-concurrent-unit-tests/58877640#58877640", "title": "How to write concurrent unit tests", "body": "<p>By now I'm writing all my tests in kotlin. And with kotlin testing this is easy peasy and fun!</p>\n\n<p>Worth mentioning when testing with threads is <a href=\"https://junit.org/junit5/docs/current/api/org/junit/jupiter/api/Timeout.html\" rel=\"nofollow noreferrer\">JUnit's @Timeout Annotation</a>, which prevents false tests from running infinitely.</p>\n\n<pre><code>import org.assertj.core.api.Assertions.assertThat\nimport org.junit.jupiter.api.Test\nimport org.junit.jupiter.api.Timeout\nimport java.util.concurrent.LinkedBlockingQueue\nimport kotlin.concurrent.thread\n\nclass BlockingQueueKotlinTests {\n    // objectUnderTest\n    private val out = LinkedBlockingQueue&lt;String&gt;()\n\n    @Test\n    fun `put then get`() {\n        // that's easy because it can be done in one thread\n        out.put(\"Hello\")\n\n        val taken = out.take()\n\n        assertThat(taken).isEqualTo(\"Hello\")\n    }\n\n    @Test\n    @Timeout(1)\n    fun `get before put`() {\n        // thanks to kotlin it's really easy to do that in another thread\n        thread {\n            Thread.sleep(100)\n            out.put(\"kotlin is great!\")\n        }\n\n        val taken = out.take()\n\n        assertThat(taken).isEqualTo(\"kotlin is great!\")\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 2365, "user_id": 4774054, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/LRst1.jpg?s=128&g=1", "display_name": "Frank Neblung", "link": "https://stackoverflow.com/users/4774054/frank-neblung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1572, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1574928805, "creation_date": 1482230860, "last_edit_date": 1574928805, "question_id": 41240505, "link": "https://stackoverflow.com/questions/41240505/how-to-write-concurrent-unit-tests", "title": "How to write concurrent unit tests", "body": "<p><a href=\"https://github.com/awaitility/awaitility\" rel=\"nofollow noreferrer\">Awaitility</a> is a great tool to unit-test concurrent production code.</p>\n\n<p>Question: Is there a tool to ease writing concurrent test code?</p>\n\n<p>Suppose I wanted to test <code>java.util.concurrent.LinkedBlockingQueue</code>.</p>\n\n<pre><code>public class BlockingQueueTest {\n    private LinkedBlockingQueue&lt;String&gt; out;\n\n    @Before\n    public void setUp() {\n        out = new LinkedBlockingQueue&lt;&gt;();\n    }\n\n    @Test\n    public void putThenGet() throws InterruptedException {\n        // that's easy because it can be done in one thread\n        out.put(\"Hello\");\n\n        String taken = out.take();\n\n        assertThat(taken).isEqualTo(\"Hello\");\n    }\n\n    @Test\n    public void getBeforePut() throws InterruptedException {\n        // that's more tricky because it can't be done with one thread\n        ExecutorService executorService = Executors.newSingleThreadExecutor();\n        executorService.submit(() -&gt; {\n            Thread.sleep(100);\n            out.put(\"Hello\");\n            return null;\n        });\n        executorService.shutdown();\n\n        String taken = out.take();\n\n        assertThat(taken).isEqualTo(\"Hello\");\n    }\n}\n</code></pre>\n\n<p><code>getBeforePut()</code> is no fun to code. Is there a way to make it less hard and more readable, like so?</p>\n\n<pre><code>@Test\npublic void getBeforePut2() throws InterruptedException {\n    // Wanted: DSL for concurrent test-code\n    Concurrently.sleep(100, TimeUnit.MILLISECONDS).andThen(() -&gt; out.put(\"Hello\"));\n\n    String taken = out.take();\n\n    assertThat(taken).isEqualTo(\"Hello\");\n}\n</code></pre>\n"}, {"tags": ["intellij-idea", "kotlin"], "comments": [{"owner": {"reputation": 42524, "user_id": 936832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc1da0368f0874a66bd771c4d57f94b0?s=128&d=identicon&r=PG", "display_name": "Ingo Kegel", "link": "https://stackoverflow.com/users/936832/ingo-kegel"}, "edited": false, "score": 0, "creation_date": 1482225258, "post_id": 41238447, "comment_id": 69676747, "body": "How do you expect the gradle API to appear as a dependency in your project if you don&#39;t use the gradle import?"}, {"owner": {"reputation": 9459, "user_id": 1432980, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e646027bcc545177a971230c1e23134a?s=128&d=identicon&r=PG", "display_name": "lapots", "link": "https://stackoverflow.com/users/1432980/lapots"}, "reply_to_user": {"reputation": 42524, "user_id": 936832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc1da0368f0874a66bd771c4d57f94b0?s=128&d=identicon&r=PG", "display_name": "Ingo Kegel", "link": "https://stackoverflow.com/users/936832/ingo-kegel"}, "edited": false, "score": 0, "creation_date": 1482232567, "post_id": 41238447, "comment_id": 69681542, "body": "Hm...So as long as I do not import it as gradle project it won&#39;t work? Well dead end then."}, {"owner": {"reputation": 42524, "user_id": 936832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc1da0368f0874a66bd771c4d57f94b0?s=128&d=identicon&r=PG", "display_name": "Ingo Kegel", "link": "https://stackoverflow.com/users/936832/ingo-kegel"}, "edited": false, "score": 0, "creation_date": 1482233166, "post_id": 41238447, "comment_id": 69681907, "body": "Well, you can always add JAR files from your local gradle installation to make it compile."}, {"owner": {"reputation": 9459, "user_id": 1432980, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e646027bcc545177a971230c1e23134a?s=128&d=identicon&r=PG", "display_name": "lapots", "link": "https://stackoverflow.com/users/1432980/lapots"}, "reply_to_user": {"reputation": 42524, "user_id": 936832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc1da0368f0874a66bd771c4d57f94b0?s=128&d=identicon&r=PG", "display_name": "Ingo Kegel", "link": "https://stackoverflow.com/users/936832/ingo-kegel"}, "edited": false, "score": 0, "creation_date": 1482234858, "post_id": 41238447, "comment_id": 69682920, "body": "@IngoKegel it compiles fine. It is just IDE is unable to find dependencies."}, {"owner": {"reputation": 42524, "user_id": 936832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc1da0368f0874a66bd771c4d57f94b0?s=128&d=identicon&r=PG", "display_name": "Ingo Kegel", "link": "https://stackoverflow.com/users/936832/ingo-kegel"}, "edited": false, "score": 0, "creation_date": 1482234989, "post_id": 41238447, "comment_id": 69683004, "body": "Surely it only compiles with gradle, not in IJ."}], "owner": {"reputation": 9459, "user_id": 1432980, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e646027bcc545177a971230c1e23134a?s=128&d=identicon&r=PG", "display_name": "lapots", "link": "https://stackoverflow.com/users/1432980/lapots"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 303, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1482224862, "creation_date": 1482224862, "question_id": 41238447, "link": "https://stackoverflow.com/questions/41238447/idea-cannot-find-class-to-import", "title": "idea cannot find class to import", "body": "<p>I opened <code>gradle</code> project in <code>idea</code> using <code>File -&gt; New -&gt; Project from Existing Sources -&gt; Create project from existing sources</code>. (Due to certain circumstances I am unable to import it as <code>gradle</code> project). </p>\n\n<p>The project is a <code>gradle</code> plugin. <code>build.gradle</code> looks like this</p>\n\n<pre><code>apply plugin: \"kotlin\"\n\nbuildscript {\n    repositories {\n        jcenter()\n        maven { url \"https://dl.bintray.com/kotlin/kotlin-dev/\" }\n    }\n\n    dependencies {\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n    }\n}\n\ngroup = 'com.lapots.gradle.plugins.appenv'\n\nrepositories {\n    mavenCentral()\n    maven { url \"https://dl.bintray.com/kotlin/kotlin-dev/\" }\n}\n\ndependencies {\n    compile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n    compile gradleApi()\n}\n</code></pre>\n\n<p>But in the class it marks classes with red as it is unable to find it.</p>\n\n<p><a href=\"https://i.stack.imgur.com/LXxBr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LXxBr.png\" alt=\"enter image description here\"></a></p>\n\n<p>But I am able to run <code>gradle build</code> successfully. What is the problem?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 939, "user_id": 5257935, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/32452b8b7e00aef6cd827d3cafc1fea2?s=128&d=identicon&r=PG&f=1", "display_name": "Sergei Podlipaev", "link": "https://stackoverflow.com/users/5257935/sergei-podlipaev"}, "edited": false, "score": 2, "creation_date": 1482161871, "post_id": 41226099, "comment_id": 69650955, "body": "It follows the scala syntax, another popular JVM language."}], "answers": [{"comments": [{"owner": {"reputation": 11151, "user_id": 1039278, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/NjJGg.jpg?s=128&g=1", "display_name": "TareK Khoury", "link": "https://stackoverflow.com/users/1039278/tarek-khoury"}, "edited": false, "score": 0, "creation_date": 1482168458, "post_id": 41226263, "comment_id": 69654770, "body": "I&#39;m not suggesting that Kotlin is hard to learn. But, still was wondering if we could have avoided learning YET another new syntax and still enjoy all of Kotlin&#39;s features"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "reply_to_user": {"reputation": 11151, "user_id": 1039278, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/NjJGg.jpg?s=128&g=1", "display_name": "TareK Khoury", "link": "https://stackoverflow.com/users/1039278/tarek-khoury"}, "edited": false, "score": 0, "creation_date": 1482168677, "post_id": 41226263, "comment_id": 69654905, "body": "It may have been possible to shoehorn Kotlin&#39;s features into the Java syntax using annotations, but the end result would have looked far more ugly than Kotlin and wouldn&#39;t have been easier to learn."}, {"owner": {"reputation": 8011, "user_id": 3830694, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/6TotP.jpg?s=128&g=1", "display_name": "Krupal Shah", "link": "https://stackoverflow.com/users/3830694/krupal-shah"}, "edited": false, "score": 0, "creation_date": 1482340480, "post_id": 41226263, "comment_id": 69737464, "body": "@yole that&#39;s grt,but when programmers use an IDE like Intelij, they still think about types first to use automatically generated name . Its all about trade-offs. Isn&#39;t it?"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "reply_to_user": {"reputation": 8011, "user_id": 3830694, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/6TotP.jpg?s=128&g=1", "display_name": "Krupal Shah", "link": "https://stackoverflow.com/users/3830694/krupal-shah"}, "edited": false, "score": 0, "creation_date": 1482415541, "post_id": 41226263, "comment_id": 69771655, "body": "@KrupalShah This hasn&#39;t been my experience. Note that the IntelliJ IDEA Kotlin plugin can offer completion suggestions for variable names and types together (e.g. for parameter names)."}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 14, "last_activity_date": 1482162312, "creation_date": 1482162312, "answer_id": 41226263, "question_id": 41226099, "link": "https://stackoverflow.com/questions/41226099/why-didnt-kotlin-follow-java-syntax/41226263#41226263", "title": "Why didn&#39;t Kotlin follow Java syntax?", "body": "<p>As mentioned in the <a href=\"https://kotlinlang.org/docs/reference/faq.html\" rel=\"nofollow noreferrer\">Kotlin FAQ</a>, Kotlin's syntax makes it more natural to omit type declarations when they can be inferred by the compiler (which isn't supported by Java). Also, from our experience with Kotlin, we see no evidence that Kotlin's type declaration syntax presents a difficulty for people learning Kotlin. </p>\n\n<p>(Note that your suggested syntax is also different from Java, so it's not clear why you think it would be easier to learn.)</p>\n"}, {"comments": [{"owner": {"reputation": 908, "user_id": 1313538, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/yMO9U.jpg?s=128&g=1", "display_name": "gelliott181", "link": "https://stackoverflow.com/users/1313538/gelliott181"}, "edited": false, "score": 0, "creation_date": 1482163451, "post_id": 41226316, "comment_id": 69651947, "body": "I like the answer, it&#39;s got my support, but that graph is terrible and can be misinterpretted easily. What&#39;s the horizontal axis even measuring? We could be testing the compilation time of two &quot;5kB code samples, 10kB samples, 15kB samples, etc...&quot; where each one does completely different things, but are exactly 5kB, 10kB, 15kB, etc."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6426085"}, "reply_to_user": {"reputation": 908, "user_id": 1313538, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/yMO9U.jpg?s=128&g=1", "display_name": "gelliott181", "link": "https://stackoverflow.com/users/1313538/gelliott181"}, "edited": false, "score": 0, "creation_date": 1482163937, "post_id": 41226316, "comment_id": 69652256, "body": "I did ten trails and the horizontal axis means ten consecutive incremental builds with one core file changed."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6426085"}, "reply_to_user": {"reputation": 908, "user_id": 1313538, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/yMO9U.jpg?s=128&g=1", "display_name": "gelliott181", "link": "https://stackoverflow.com/users/1313538/gelliott181"}, "edited": false, "score": 0, "creation_date": 1482164061, "post_id": 41226316, "comment_id": 69652345, "body": "You can see that the Gradle daemon still takes two or three runs to warm up, but after that the performance of both languages is very similar. With no changes, Java takes 4.6 seconds per warm build, while Kotlin averages 4.5 seconds. When we change a file that isn\u2019t used by any other files, Java requires an average of 7.0 seconds to do a warm build, and Kotlin clocks in at 6.1. And finally, when we change a file that is imported by many other files in the project, Java requires 7.1 seconds to do an incremental build once the Gradle daemon is warmed up, while Kotlin averages 6.0 seconds."}, {"owner": {"reputation": 908, "user_id": 1313538, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/yMO9U.jpg?s=128&g=1", "display_name": "gelliott181", "link": "https://stackoverflow.com/users/1313538/gelliott181"}, "edited": false, "score": 0, "creation_date": 1482164777, "post_id": 41226316, "comment_id": 69652757, "body": "Now this is just the data lover in me, but I&#39;m interested: What sort of code is being compiled? It&#39;d be neat to know how much of the JVM&#39;s instruction set is being used and to see the performance delta of specific functions which end up compiling differently, but that&#39;s way outside this question&#39;s scope."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6426085"}, "is_accepted": false, "score": 3, "last_activity_date": 1575312132, "last_edit_date": 1575312132, "creation_date": 1482162456, "answer_id": 41226316, "question_id": 41226099, "link": "https://stackoverflow.com/questions/41226099/why-didnt-kotlin-follow-java-syntax/41226316#41226316", "title": "Why didn&#39;t Kotlin follow Java syntax?", "body": "<p>Java is like a coffee, and Kotlin means that coffee with a little bit sugar in there. In some cases, Kotlin does increase the efficiency and make the programming more enjoyable.</p>\n\n<p>Comparing with Java, Kotlin is more effective and actually can work with Java pretty well.\nCheck the example in that picture here about Safe Calls on the official kotlinlang.org, </p>\n\n<p><a href=\"https://i.stack.imgur.com/o3qey.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/o3qey.png\" alt=\"enter image description here\"></a></p>\n\n<p>In Chains, when there's a <strong>null</strong> value\uff0cyou need to use if function to determine whether the value is <strong>null</strong>\uff0cbut there's only one sentence method needed for Kotlin.</p>\n\n<p>Plus, when you are using Gradle daemon and Smart Compilation\uff0cKotlin shows a faster compile speed than Java.</p>\n\n<p><a href=\"https://i.stack.imgur.com/9KlPo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9KlPo.png\" alt=\"enter image description here\"></a></p>\n\n<p>the horizontal axis means ten consecutive incremental builds with one core file changed.</p>\n\n<p>You can see that the Gradle daemon still takes two or three runs to warm up, but after that the performance of both languages is very similar. With no changes, Java takes 4.6 seconds per warm build, while Kotlin averages 4.5 seconds. When we change a file that isn\u2019t used by any other files, Java requires an average of 7.0 seconds to do a warm build, and Kotlin clocks in at 6.1. And finally, when we change a file that is imported by many other files in the project, Java requires 7.1 seconds to do an incremental build once the Gradle daemon is warmed up, while Kotlin averages 6.0 seconds.</p>\n\n<p>Citations: 1. <a href=\"https://kotlinlang.org/docs/reference/null-safety.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/null-safety.html</a></p>\n\n<ol start=\"2\">\n<li><a href=\"https://medium.com/@johnkorly/kotlin-vs-java-performance-drill-down-which-to-choose-2514bdf91916\" rel=\"nofollow noreferrer\">https://medium.com/@johnkorly/kotlin-vs-java-performance-drill-down-which-to-choose-2514bdf91916</a></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 6473, "user_id": 2660462, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e7866e763430b8848f14ffdacb61b99f?s=128&d=identicon&r=PG", "display_name": "Lukas Lechner", "link": "https://stackoverflow.com/users/2660462/lukas-lechner"}, "is_accepted": false, "score": 2, "last_activity_date": 1482223179, "last_edit_date": 1592644375, "creation_date": 1482223179, "answer_id": 41237945, "question_id": 41226099, "link": "https://stackoverflow.com/questions/41226099/why-didnt-kotlin-follow-java-syntax/41237945#41237945", "title": "Why didn&#39;t Kotlin follow Java syntax?", "body": "<p>The kotlin team describes <a href=\"https://kotlinlang.org/docs/reference/faq.html#why-have-type-declarations-on-the-right\" rel=\"nofollow noreferrer\">here</a> why the type declarations (like in your example) are on the right:</p>\n<blockquote>\n<p><strong>Why have type declarations on the right?</strong></p>\n<p>We believe it makes the code more readable. Besides, it enables some nice syntactic features. For instance, it is easy to leave type annotations out. Scala has also proven pretty well this is not a problem.</p>\n</blockquote>\n"}], "owner": {"reputation": 11151, "user_id": 1039278, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/NjJGg.jpg?s=128&g=1", "display_name": "TareK Khoury", "link": "https://stackoverflow.com/users/1039278/tarek-khoury"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 280, "favorite_count": 1, "accepted_answer_id": 41226263, "answer_count": 3, "score": 2, "last_activity_date": 1575312132, "creation_date": 1482161697, "last_edit_date": 1482162182, "question_id": 41226099, "link": "https://stackoverflow.com/questions/41226099/why-didnt-kotlin-follow-java-syntax", "title": "Why didn&#39;t Kotlin follow Java syntax?", "body": "<p>I'm in the process of learning Kotlin as an Android developer!</p>\n\n<p>Out of curiosity, why didn't the JetBrains guys follow the Java style syntax (where they could have), and <strong>made it easier on developers to learn Kotlin</strong>?</p>\n\n<p>For example, defining a simple function in Kotlin:</p>\n\n<pre><code>fun simpleFunc(x: Int): Int {\n\n// do stuff\n\n}\n</code></pre>\n\n<p>Why didn't they do:</p>\n\n<pre><code>fun Int simpleFunc(Int x) {\n\n// do stuff\n\n}\n</code></pre>\n\n<p>I would appreciate hearing your opinion on this</p>\n"}, {"tags": ["kotlin", "kotlin-extension"], "comments": [{"owner": {"reputation": 37094, "user_id": 543539, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/cCXi8.jpg?s=128&g=1", "display_name": "Egor", "link": "https://stackoverflow.com/users/543539/egor"}, "edited": false, "score": 0, "creation_date": 1482151854, "post_id": 41222941, "comment_id": 69644450, "body": "You&#39;re not defining any custom logic in getters in setters, so why do you need them? The issue is caused by incorrect setter declaration, <code>this.categories = categories</code> will call the <code>set()</code> method, which will result in an endless loop."}, {"owner": {"reputation": 1156, "user_id": 1649917, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/98f36daa955c06085670a76a55a246a6?s=128&d=identicon&r=PG&f=1", "display_name": "nmu", "link": "https://stackoverflow.com/users/1649917/nmu"}, "reply_to_user": {"reputation": 37094, "user_id": 543539, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/cCXi8.jpg?s=128&g=1", "display_name": "Egor", "link": "https://stackoverflow.com/users/543539/egor"}, "edited": false, "score": 0, "creation_date": 1482154839, "post_id": 41222941, "comment_id": 69646316, "body": "@Egor Ah that makes perfect sense. The reason I defined the get and set methods is because it refuses to compile without a get method and return statement. I assumed it was the same for a set as well and did that too. I&#39;m going to try remove the set logic and see what happens."}], "answers": [{"comments": [{"owner": {"reputation": 1156, "user_id": 1649917, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/98f36daa955c06085670a76a55a246a6?s=128&d=identicon&r=PG&f=1", "display_name": "nmu", "link": "https://stackoverflow.com/users/1649917/nmu"}, "edited": false, "score": 0, "creation_date": 1482155914, "post_id": 41223969, "comment_id": 69646950, "body": "Even after modifying my getters and setters to avoid the recursive call -  as you have pointed out. The stackOverflowError just moves to the get(). However, If I understand your post correctly this shouldn&#39;t work anyway because <code>categories</code> isn&#39;t a public field in this program, I was trying to define a new field. So I guess that&#39;s the root problem."}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 4, "creation_date": 1482155956, "post_id": 41223969, "comment_id": 69646974, "body": "I totally agree with this answer, but it might be worth mentioning that, while extensions cannot modify the class to add backing fields, additional state still can be stored somewhere outside the class, and delegates can help here. For more details on this workaround, see: <a href=\"http://stackoverflow.com/a/36511438/2196460\">stackoverflow.com/a/36511438/2196460</a>"}, {"owner": {"reputation": 1156, "user_id": 1649917, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/98f36daa955c06085670a76a55a246a6?s=128&d=identicon&r=PG&f=1", "display_name": "nmu", "link": "https://stackoverflow.com/users/1649917/nmu"}, "reply_to_user": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1482167750, "post_id": 41223969, "comment_id": 69654377, "body": "@hotkey thanks for the link. To be sure, would this work with java classes as well"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 1156, "user_id": 1649917, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/98f36daa955c06085670a76a55a246a6?s=128&d=identicon&r=PG&f=1", "display_name": "nmu", "link": "https://stackoverflow.com/users/1649917/nmu"}, "edited": false, "score": 1, "creation_date": 1482168449, "post_id": 41223969, "comment_id": 69654768, "body": "@nmu, yes, it will, you can define Kotlin extensions for Java classes as well. If you need to <b>use</b> these extensions in Java, they are visible as static functions. For example, a <code>tag</code> extension defined for <code>MyClass</code> in <code>KotlinFile.kt</code> will be seen as <code>KotlinFileKt.getTag(MyClass $receiver)</code> and a similar setter."}, {"owner": {"reputation": 1156, "user_id": 1649917, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/98f36daa955c06085670a76a55a246a6?s=128&d=identicon&r=PG&f=1", "display_name": "nmu", "link": "https://stackoverflow.com/users/1649917/nmu"}, "reply_to_user": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1482169777, "post_id": 41223969, "comment_id": 69655529, "body": "@hotkey Ah, perfect. Going to try this now. Appreciate the help"}, {"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 1, "creation_date": 1482177425, "post_id": 41223969, "comment_id": 69659314, "body": "The code snippet in my answer actually features a Java class."}], "tags": [], "owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "is_accepted": true, "score": 4, "last_activity_date": 1482310264, "last_edit_date": 1482310264, "creation_date": 1482155178, "answer_id": 41223969, "question_id": 41222941, "link": "https://stackoverflow.com/questions/41222941/setting-a-kotlin-extension/41223969#41223969", "title": "Setting a kotlin extension", "body": "<p>Your code throws a <code>StackOverflowError</code> because it calls itself recursively. <code>this.categories</code> just calls the getter it is already in and <code>this.categories = categories</code> calls the setter it is already in.</p>\n\n<p>Extension properties are only syntactic sugar for a pair of (extension) getters and setters. Inside the property accessors (i.e. the getter and the setter) you can only access what is already <code>public</code>ly accessible from the receiver class. If it has public fields, you can access them, however you can't define new fields. If you want to save additional state but the class has no API for that, you're out of luck.</p>\n\n<p>What a mutable extension property typically does is redirecting to existing mutating functions. Here's an example.</p>\n\n<pre><code>//java\nclass Foo {\n    private List&lt;String&gt; items;\n\n    public String myItems() {\n        return items;\n    }\n}\n\n\n//kotlin\nvar Foo.firstItem: String\n    get() = myItems()[0]\n    set(value) {\n        myItems()[0] = value\n    }\n</code></pre>\n"}], "owner": {"reputation": 1156, "user_id": 1649917, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/98f36daa955c06085670a76a55a246a6?s=128&d=identicon&r=PG&f=1", "display_name": "nmu", "link": "https://stackoverflow.com/users/1649917/nmu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 642, "favorite_count": 0, "accepted_answer_id": 41223969, "answer_count": 1, "score": 3, "last_activity_date": 1482310264, "creation_date": 1482151632, "last_edit_date": 1482155199, "question_id": 41222941, "link": "https://stackoverflow.com/questions/41222941/setting-a-kotlin-extension", "title": "Setting a kotlin extension", "body": "<p>I am unsure if it is possible for a kotlin extension to be set like a java object.</p>\n\n<p>In my program I have a java class called <code>Submission</code> and I wanted to create a kotlin extension of that called <code>categories</code> - an ArrayList - so I made it like this. </p>\n\n<pre><code>var Submission.categories: ArrayList&lt;String&gt;\n    get() {\n        return this.categories\n    }\n    set(categories){\n        this.categories = categories\n    }\n</code></pre>\n\n<p>However whenever I try set a category the program just crashes with a stackOverflowError like this:</p>\n\n<pre><code>ERR: stack=java.lang.StackOverflowError: stack size 8MB\n             at com.....setCategories(Extensions.kt:0)\n             at com.....setCategories(Extensions.kt:19)\n             at com.....setCategories(Extensions.kt:19)\n             at com.....setCategories(Extensions.kt:19)\n             at com.....setCategories(Extensions.kt:19)\n             at com.....setCategories(Extensions.kt:19)\n</code></pre>\n\n<p>This seems like the right syntax for declaring kotlin extensions. So I am really unsure of what direction I ought to go about fixing this in. Perhaps I should really just be using plain old inheritance?</p>\n\n<p>Thanks. </p>\n"}, {"tags": ["java", "casting", "kotlin"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1482146279, "post_id": 41219748, "comment_id": 69641314, "body": "You need to use kotlin reflection for this somehow. Java reflection won&#39;t work"}], "answers": [{"comments": [{"owner": {"reputation": 1849, "user_id": 2692102, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/irlFR.gif?s=128&g=1", "display_name": "Hanzala", "link": "https://stackoverflow.com/users/2692102/hanzala"}, "edited": false, "score": 0, "creation_date": 1602139185, "post_id": 41222239, "comment_id": 113626647, "body": "what about <code>inline fun &lt;reified T:Any&gt; Any.cast() = this as? T</code>"}], "tags": [], "owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "is_accepted": true, "score": 8, "last_activity_date": 1511398091, "last_edit_date": 1511398091, "creation_date": 1482149211, "answer_id": 41222239, "question_id": 41219748, "link": "https://stackoverflow.com/questions/41219748/dynamic-cast-in-kotlin/41222239#41222239", "title": "Dynamic cast in Kotlin", "body": "<p>Try to change your code to</p>\n\n<pre><code>fun &lt;T: Any&gt; cast(any: Any, clazz: KClass&lt;out T&gt;): T = clazz.javaObjectType.cast(any) \n</code></pre>\n\n<h2>Explanation</h2>\n\n<p>Because the type of the parameter <code>any</code> is <code>Any</code>, it's always a reference type and primitives will be boxed. For the second parameter, it seems that Kotlin reflection will prefer primitive types to reference types, which is why <code>Int::class.java</code> will default to <code>\u00ecnt</code>, not <code>Integer</code>. By using <code>javaObjectType</code> we force the usage of the boxed reference type.</p>\n\n<h2>Alternative</h2>\n\n<p>You could also use the following function definition:</p>\n\n<pre><code>inline fun &lt;reified T: Any&gt; cast(any: Any): T = T::class.javaObjectType.cast(any) \n\n// usage\n\ncast&lt;Int&gt;(0)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2577, "user_id": 3665698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/spUxp.png?s=128&g=1", "display_name": "mcoolive", "link": "https://stackoverflow.com/users/3665698/mcoolive"}, "is_accepted": false, "score": 1, "last_activity_date": 1584212227, "creation_date": 1584212227, "answer_id": 60686284, "question_id": 41219748, "link": "https://stackoverflow.com/questions/41219748/dynamic-cast-in-kotlin/60686284#60686284", "title": "Dynamic cast in Kotlin", "body": "<p>Kirill Rakhman 's answer works well for non-nullable type. But we cannot have T::class if T is nullable. So I suggest the following to deal with nullable type.</p>\n\n<pre><code>inline fun &lt;reified T&gt; cast(any: Any?): T = any as T\n</code></pre>\n\n<p>Usage</p>\n\n<pre><code>val l32: Number = cast(32L)\nval ln1: Number? = cast(null) // works\nval ln2: Number = cast(null) // fails at runtime\n</code></pre>\n"}], "owner": {"reputation": 727, "user_id": 7108266, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2123ca83dfca370821fbac4360a5a27?s=128&d=identicon&r=PG&f=1", "display_name": "mmorihiro", "link": "https://stackoverflow.com/users/7108266/mmorihiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5231, "favorite_count": 0, "accepted_answer_id": 41222239, "answer_count": 2, "score": 9, "last_activity_date": 1584212227, "creation_date": 1482140851, "question_id": 41219748, "link": "https://stackoverflow.com/questions/41219748/dynamic-cast-in-kotlin", "title": "Dynamic cast in Kotlin", "body": "<p>I want to cast <code>Any</code> to <code>Int</code> by using <code>KClass&lt;Int&gt;</code>, having a <code>KClass&lt;Int&gt;</code> and a <code>Any</code> which is actually <code>Int</code>.</p>\n\n<pre><code>fun &lt;T&gt; cast(any: Any, clazz: KClass&lt;*&gt;): T = clazz.java.cast(any) \n\ncast(0, Int::class)\n</code></pre>\n\n<p>However, I got this error.</p>\n\n<blockquote>\n  <p>java.lang.ClassCastException: Cannot cast java.lang.Integer to int</p>\n</blockquote>\n\n<p>Do you know any solution except <code>any as Int</code>?</p>\n"}, {"tags": ["kotlin", "kotlin-interop"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1482146500, "post_id": 41218881, "comment_id": 69641437, "body": "Sorry,  accomplish what? Maybe it you give us an example of usage, it will be clearer."}, {"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1482147446, "post_id": 41218881, "comment_id": 69641902, "body": "Calling <code>glm.mul()</code>"}, {"owner": {"reputation": 7351, "user_id": 1096567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ateKI.jpg?s=128&g=1", "display_name": "Lovis", "link": "https://stackoverflow.com/users/1096567/lovis"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1482149499, "post_id": 41218881, "comment_id": 69643067, "body": "@voddan I think that&#39;s not allowed in interfaces (as of 1.0.5) (however, the use of an interface is questionable here anyway)"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1482151563, "post_id": 41218881, "comment_id": 69644267, "body": "You are right. But this is not allowed in Java ether."}, {"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "edited": false, "score": 0, "creation_date": 1482154046, "post_id": 41218881, "comment_id": 69645815, "body": "I can <code>@JvmStatic</code> only on functions in named objects or companion objects in classes"}], "owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 916, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1482148067, "creation_date": 1482137717, "last_edit_date": 1482148067, "question_id": 41218881, "link": "https://stackoverflow.com/questions/41218881/kotlin-project-structure", "title": "Kotlin, project structure", "body": "<p>I am writing a kotlin port of glm and I'm gonna use it also for java projects.</p>\n\n<p>In these java projects, I'd like to call, for example, <code>glm.mul(...)</code>:</p>\n\n<p>where <code>mul()</code> is a function of the <code>mat2x2_operators</code> interface</p>\n\n<p>Now, if I have <code>glm</code> declared as an interface and its companion object extends <code>mat2x2_operators</code> in this way</p>\n\n<pre><code>interface glm {\n   companion object :\n       mat2x2_operators,\n</code></pre>\n\n<p>I have <code>mul</code> available on java via </p>\n\n<p><code>glm.Companion.mul(...)</code></p>\n\n<p>If I try to declare <code>glm</code> as an object:</p>\n\n<p><code>glm.INSTANCE.mul(...)</code></p>\n\n<p>the reason I don't write <code>mul</code> directly under <code>glm</code> is because I have hundred of functions that I'd like to keep ordered in different places (interfaces), such as <code>mat2x2_operators</code> precisely</p>\n\n<p>Is there a way to accomplish that?</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1561, "user_id": 1772342, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/pvNgt.jpg?s=128&g=1", "display_name": "breandan", "link": "https://stackoverflow.com/users/1772342/breandan"}, "edited": false, "score": 4, "creation_date": 1482287994, "post_id": 41218185, "comment_id": 69709162, "body": "Just having some difficulty understanding why adding a custom setter with an <code>init</code> block property initialization would fail to compile (since the property <i>is</i> being initialized). Is there a way to avoid code duplication in the initializer and custom setter, without delegating to another method? I would like to do some work during initialization and avoid writing to the property twice. The same work needs to be done whenever <code>set</code> is called."}, {"owner": {"reputation": 3668, "user_id": 2392960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a549fcc9b00c4ce0ede36ede98548729?s=128&d=identicon&r=PG", "display_name": "Januson", "link": "https://stackoverflow.com/users/2392960/januson"}, "reply_to_user": {"reputation": 1561, "user_id": 1772342, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/pvNgt.jpg?s=128&g=1", "display_name": "breandan", "link": "https://stackoverflow.com/users/1772342/breandan"}, "edited": false, "score": 0, "creation_date": 1482668833, "post_id": 41218185, "comment_id": 69845851, "body": "Well, init block does initializes the property. But since the property has a custom setter init block uses this custom setter to do so. And since custom setter requires the property to be initialized either with default value or by the constructor, then you need to provide one of those."}, {"owner": {"reputation": 3668, "user_id": 2392960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a549fcc9b00c4ce0ede36ede98548729?s=128&d=identicon&r=PG", "display_name": "Januson", "link": "https://stackoverflow.com/users/2392960/januson"}, "reply_to_user": {"reputation": 1561, "user_id": 1772342, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/pvNgt.jpg?s=128&g=1", "display_name": "breandan", "link": "https://stackoverflow.com/users/1772342/breandan"}, "edited": false, "score": 0, "creation_date": 1482668927, "post_id": 41218185, "comment_id": 69845877, "body": "About duplication... private method is the easiest way. But it depends on your use case."}, {"owner": {"reputation": 1105, "user_id": 3094065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UOwQS.png?s=128&g=1", "display_name": "maXp", "link": "https://stackoverflow.com/users/3094065/maxp"}, "edited": false, "score": 2, "creation_date": 1550038290, "post_id": 41218185, "comment_id": 96117774, "body": "Kotlin seems to be a good language, but in some places it does not do without a spoon of shit ... ((("}, {"owner": {"reputation": 7347, "user_id": 172274, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/886b1c9637f9742ff1074d6605a6df7e?s=128&d=identicon&r=PG", "display_name": "still_dreaming_1", "link": "https://stackoverflow.com/users/172274/still-dreaming-1"}, "reply_to_user": {"reputation": 1561, "user_id": 1772342, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/pvNgt.jpg?s=128&g=1", "display_name": "breandan", "link": "https://stackoverflow.com/users/1772342/breandan"}, "edited": false, "score": 1, "creation_date": 1569170351, "post_id": 41218185, "comment_id": 102500605, "body": "@breandan, you can avoid the duplication by initializing the value to some random value, just for the sake of satisfying this requirement. Then in a constructor initializer block, you can do the actual initialization of the property value by setting it, which which will call the custom setter. For example, you might initialize a String to &quot;&quot; in the property initializer, then have an <code>init {}</code> block just below the property that uses values passed into the constructor to set the property again, calling the setter code. Even though this works, it seems like a flaw in the design of the language."}, {"owner": {"reputation": 1561, "user_id": 1772342, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/pvNgt.jpg?s=128&g=1", "display_name": "breandan", "link": "https://stackoverflow.com/users/1772342/breandan"}, "reply_to_user": {"reputation": 7347, "user_id": 172274, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/886b1c9637f9742ff1074d6605a6df7e?s=128&d=identicon&r=PG", "display_name": "still_dreaming_1", "link": "https://stackoverflow.com/users/172274/still-dreaming-1"}, "edited": false, "score": 0, "creation_date": 1569170719, "post_id": 41218185, "comment_id": 102500713, "body": "@still_dreaming_1 Yeah, thanks for the reply. That\u2019s what I was trying to avoid, duplicate initialization. But it seems necessary in this case."}], "tags": [], "owner": {"reputation": 3668, "user_id": 2392960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a549fcc9b00c4ce0ede36ede98548729?s=128&d=identicon&r=PG", "display_name": "Januson", "link": "https://stackoverflow.com/users/2392960/januson"}, "is_accepted": true, "score": 10, "last_activity_date": 1482134645, "creation_date": 1482134645, "answer_id": 41218185, "question_id": 41214452, "link": "https://stackoverflow.com/questions/41214452/why-dont-property-initializers-call-a-custom-setter/41218185#41218185", "title": "Why don&#39;t property initializers call a custom setter?", "body": "<p>Property initializers doesn't call custom setter because their purpose is to provide the default value.</p>\n\n<p>Unlike in Java, in Kotlin not only local variables must be initialized before their first access but class properties as well.</p>\n\n<p>In Java this is valid.</p>\n\n<pre><code>public class Test {\n    public String str;\n\n    public static void main(String[] args) {\n        System.out.println(new Test().str);\n    }\n}\n</code></pre>\n\n<p>In Kotlin this is not.</p>\n\n<pre><code>class Parent {\n    var str: String?\n}\n\nfun main(args: Array&lt;String&gt;) {\n    Parent().str\n}\n</code></pre>\n\n<p>For this reason custom setter needs its property to be initialized either by property initializer or by the constructor. Take a look at the following example.</p>\n\n<pre><code>class Test {\n    var stringRepresentation: String = \"a\" // Default value. Does not call custom setter\n        get() = field\n        set(value) {\n            println(\"Setting stringRepresentation property to %s. Current value is %s.\".format(value, field))\n            field = setDataFromString(value)\n        }\n\n    init {\n        this.stringRepresentation = \"b\" // Calls custom setter\n    }\n\n    private fun setDataFromString(value: String): String {\n        println(\"Setting stringRepresentation property to %s.\".format(value))\n        return value\n    }\n}\n\nfun main(args: Array&lt;String&gt;) {\n    Test().stringRepresentation = \"c\" // Calls custom setter\n}\n</code></pre>\n\n<p>Property stringRepresentation is initialized to <strong>\"a\"</strong> opon instantiation of its class without calling setter.\nThen init block is called and sets value to <strong>\"b\"</strong> using setter.\nThen to <strong>\"c\"</strong> using setter.</p>\n"}], "owner": {"reputation": 1561, "user_id": 1772342, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/pvNgt.jpg?s=128&g=1", "display_name": "breandan", "link": "https://stackoverflow.com/users/1772342/breandan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2581, "favorite_count": 4, "accepted_answer_id": 41218185, "answer_count": 1, "score": 22, "last_activity_date": 1482134645, "creation_date": 1482108661, "question_id": 41214452, "link": "https://stackoverflow.com/questions/41214452/why-dont-property-initializers-call-a-custom-setter", "title": "Why don&#39;t property initializers call a custom setter?", "body": "<p>From the <a href=\"https://kotlinlang.org/docs/reference/properties.html#getters-and-setters\" rel=\"noreferrer\">Kotlin documentation</a>, custom setters are allowed:</p>\n\n<pre><code>class Test {\n  var stringRepresentation: String\n    get() = field\n    set(value) {\n      setDataFromString(value) \n    }\n\n  init {\n    stringRepresentation = \"test\"\n  }\n\n  private fun setDataFromString(value: String) { }\n}\n</code></pre>\n\n<p>But you cannot have a custom setter without a custom getter (and initialize from the <code>init</code> block):</p>\n\n<pre><code>class Test {\n  // Compilation error: \"Property must be initialized\"\n  var stringRepresentation: String\n    set(value) {\n      setDataFromString(value)\n    }\n\n  init {\n    stringRepresentation = \"test\"\n  }\n\n  private fun setDataFromString(value: String) { }\n}\n</code></pre>\n\n<p>Although you can have a custom getter without a custom setter, no problem here:</p>\n\n<pre><code>class Test {\n  var stringRepresentation: String\n    get() = field \n\n  init {\n    stringRepresentation = \"test\"\n  }\n\n  private fun setDataFromString(value: String) { }\n}\n</code></pre>\n\n<p>So why can't you use a custom setter with a property initialized from within the <code>init</code> block, and why does the <code>init</code> block invoke the custom setter while the property initializer assigns directly, bypassing the custom setter?</p>\n\n<pre><code>class Test {\n  var stringRepresentation: String = \"\" // Does not call custom setter\n    set(value) {\n      setDataFromString(value)\n    }\n\n  init {\n    stringRepresentation = \"test\" // Calls custom setter\n  }\n\n  private fun setDataFromString(value: String) { }\n}\n</code></pre>\n"}, {"tags": ["android", "data-binding", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 5345, "user_id": 2635436, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/0462fb1dcb997adff932a759ef212d84?s=128&d=identicon&r=PG&f=1", "display_name": "rahulrv", "link": "https://stackoverflow.com/users/2635436/rahulrv"}, "edited": false, "score": 0, "creation_date": 1482207024, "post_id": 41220138, "comment_id": 69669046, "body": "yes, I do have the kotlin-gradle-plugin. But I am still getting the error. I am trying to convert a java project to Kotlin."}, {"owner": {"reputation": 7351, "user_id": 1096567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ateKI.jpg?s=128&g=1", "display_name": "Lovis", "link": "https://stackoverflow.com/users/1096567/lovis"}, "reply_to_user": {"reputation": 5345, "user_id": 2635436, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/0462fb1dcb997adff932a759ef212d84?s=128&d=identicon&r=PG&f=1", "display_name": "rahulrv", "link": "https://stackoverflow.com/users/2635436/rahulrv"}, "edited": false, "score": 0, "creation_date": 1482219610, "post_id": 41220138, "comment_id": 69673837, "body": "@3xplore If your setup looks like mine, then maybe try to clear the Gradle cache <a href=\"http://stackoverflow.com/questions/13565082/how-can-i-force-gradle-to-redownload-dependencies\" title=\"how can i force gradle to redownload dependencies\">stackoverflow.com/questions/13565082/&hellip;</a>"}, {"owner": {"reputation": 6492, "user_id": 2529309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6kn4X.png?s=128&g=1", "display_name": "Kayvan N", "link": "https://stackoverflow.com/users/2529309/kayvan-n"}, "edited": false, "score": 2, "creation_date": 1496347379, "post_id": 41220138, "comment_id": 75637930, "body": "This solved my issue but keep in mind that it only works with <code>kotlin_version = &quot;1.1.2-3&quot;</code> and not with 1.1.2-4 on Android Studio 2.3.1"}, {"owner": {"reputation": 7351, "user_id": 1096567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ateKI.jpg?s=128&g=1", "display_name": "Lovis", "link": "https://stackoverflow.com/users/1096567/lovis"}, "reply_to_user": {"reputation": 6492, "user_id": 2529309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6kn4X.png?s=128&g=1", "display_name": "Kayvan N", "link": "https://stackoverflow.com/users/2529309/kayvan-n"}, "edited": false, "score": 0, "creation_date": 1496386096, "post_id": 41220138, "comment_id": 75649981, "body": "@KayvanN yes, but it should be possible to change the versions according to your setup. the important part is, that the gradle plugin and data binding compiler use the same version."}], "tags": [], "owner": {"reputation": 7351, "user_id": 1096567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ateKI.jpg?s=128&g=1", "display_name": "Lovis", "link": "https://stackoverflow.com/users/1096567/lovis"}, "is_accepted": false, "score": 39, "last_activity_date": 1495696837, "last_edit_date": 1495696837, "creation_date": 1482142088, "answer_id": 41220138, "question_id": 41213765, "link": "https://stackoverflow.com/questions/41213765/issue-with-databinding-using-kotlin-for-android/41220138#41220138", "title": "Issue with databinding using Kotlin for Android", "body": "<p><strong>Edit: With Kotlin 1.1 and Kapt3 it works slightly different:</strong></p>\n\n<p>in your <strong>project</strong> <code>build.gradle</code>:</p>\n\n<pre><code>buildscript {\n\n   ext {\n       ...\n       plugin_version = \"2.3.1\"\n       kotlin_version = \"1.1.2-3\"\n       ...\n   }\n\n   ...\n\n   dependencies {\n       classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n       classpath \"com.android.tools.build:gradle:$plugin_version\"\n       ...\n   }\n}\n</code></pre>\n\n<p>and in your <strong>app</strong> <code>build.gradle</code>:</p>\n\n<pre><code>    apply plugin: \"kotlin-android\"\n    apply plugin: \"kotlin-kapt\"\n    ...\n    android {\n      ...\n      dataBinding {\n            enabled = true\n        }\n      ...\n    }\n\n    dependencies {\n       ...\n       kapt \"com.android.databinding:compiler:$plugin_version\"\n       ...\n    }\n</code></pre>\n\n<p>It's really important that the databinding compiler version and the plugin version are identical.<br>\nAlso note that with <code>kapt3</code>, you shouldn't use the <code>generateStubs</code> flag anymore.</p>\n\n<hr>\n\n<p><strong>Old Answer</strong></p>\n\n<p>Having the Android Studio plugin enabled isn't enough, you also need to adjust your gradle files a little bit (add and apply the <code>kotlin-gradle-plugin</code>)\nHere are excerpts of my gradle files with working Java and Kotlin Databinding</p>\n\n<p>In your <strong>project</strong> <code>build.gradle</code>:</p>\n\n<pre><code>buildscript {\n...\n dependencies {\n   classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:1.0.5\"\n   classpath 'com.android.tools.build:gradle:2.2.3'\n   ...\n }\n}\n</code></pre>\n\n<p>and in your <strong>app</strong> <code>build.gradle</code>:</p>\n\n<pre><code>apply plugin: \"kotlin-android\"\n...\nandroid {\n  ...\n  dataBinding {\n        enabled = true\n    }\n  ...\n}\nkapt {\n    generateStubs = true\n}\ndependencies {\n   ...\n   kapt \"com.android.databinding:compiler:2.2.0\"\n   ...\n}\n</code></pre>\n\n<p>(I'm using a newer version of the databinding compiler here, you probably should do this as well)</p>\n"}, {"tags": [], "owner": {"reputation": 13483, "user_id": 2581314, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a43d08cdfd22550a7532ece34c7123f2?s=128&d=identicon&r=PG", "display_name": "erluxman", "link": "https://stackoverflow.com/users/2581314/erluxman"}, "is_accepted": false, "score": 2, "last_activity_date": 1495694652, "last_edit_date": 1495694652, "creation_date": 1495600977, "answer_id": 44149136, "question_id": 41213765, "link": "https://stackoverflow.com/questions/41213765/issue-with-databinding-using-kotlin-for-android/44149136#44149136", "title": "Issue with databinding using Kotlin for Android", "body": "<p><strong>Try to include the missing blocks in your gradle files with the help of the following reference gradle file source.</strong></p>\n\n<p><strong>App</strong>  level Build.Gradle</p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\napply plugin: 'kotlin-kapt'\n\nandroid {\n    compileSdkVersion 25\n    buildToolsVersion \"25.0.3\"\n    defaultConfig {\n        applicationId \"com.example.adventure.abc\"\n        minSdkVersion 16\n        targetSdkVersion 25\n        versionCode 1\n        versionName \"1.0\"\n        testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n\n        vectorDrawables.useSupportLibrary = true\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n    sourceSets {\n        main.java.srcDirs += 'src/main/kotlin/com/dougritter/marvelmovies'\n    }\n    dataBinding {\n        enabled = true\n    }\n}\n\n\n\n\nkapt {\n    generateStubs = true\n}\n\ndependencies {\n    //Compatibility\n    compile fileTree(dir: 'libs', include: ['*.jar'])\n    compile \"org.jetbrains.kotlin:kotlin-stdlib-jre7:$kotlin_version\"\n    androidTestCompile('com.android.support.test.espresso:espresso-core:2.2.2', {\n        exclude group: 'com.android.support', module: 'support-annotations'\n    })\n    kapt 'com.android.databinding:compiler:2.3.0'\n\n    //Libraries\n    testCompile 'junit:junit:4.12'\n    compile 'com.android.support:appcompat-v7:25.3.1'\n    compile 'com.android.support:design:25.3.1'\n    compile 'com.android.support:support-vector-drawable:25.3.1'\n    compile 'com.android.support:support-v4:25.3.1'\n    compile project(':domain')\n    compile project(':androidutils')\n    compile 'com.android.support.constraint:constraint-layout:1.0.2'\n    compile 'com.jakewharton.timber:timber:4.5.1'\n\n\n}\n</code></pre>\n\n<p><strong>Project</strong> level Build.Gradle</p>\n\n<pre><code>    // Top-level build file where you can add configuration options common to all sub-projects/modules.\n\n\nbuildscript {\n    ext.kotlin_version = '1.1.2-2'\n    repositories {\n        maven { url 'https://maven.google.com' }\n        jcenter()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:3.0.0-alpha1'\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n        classpath \"org.jetbrains.kotlin:kotlin-android-extensions:$kotlin_version\"\n// NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n}\n\nallprojects {\n    repositories {\n        jcenter()\n        maven { url 'https://maven.google.com' }\n        mavenCentral()\n    }\n}\n\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 9753111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e6b60e12f3d48697f145d7d5c070914?s=128&d=identicon&r=PG&f=1", "display_name": "mohsen dastpeyman", "link": "https://stackoverflow.com/users/9753111/mohsen-dastpeyman"}, "is_accepted": false, "score": 0, "last_activity_date": 1606774416, "last_edit_date": 1606774416, "creation_date": 1606751417, "answer_id": 65076756, "question_id": 41213765, "link": "https://stackoverflow.com/questions/41213765/issue-with-databinding-using-kotlin-for-android/65076756#65076756", "title": "Issue with databinding using Kotlin for Android", "body": "<p>You don\u2019t need to include any extra libraries to enable view binding</p>\n<p>remove  <code>kapt &quot;androidx.lifecycle:lifecycle-compiler:2.2.0&quot;</code> and add</p>\n<pre><code>android {\n..\n    buildFeatures {\n       viewBinding true\n    }\n}\n</code></pre>\n<p>to build.gradle</p>\n"}], "owner": {"reputation": 5345, "user_id": 2635436, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/0462fb1dcb997adff932a759ef212d84?s=128&d=identicon&r=PG&f=1", "display_name": "rahulrv", "link": "https://stackoverflow.com/users/2635436/rahulrv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14366, "favorite_count": 5, "answer_count": 3, "score": 21, "last_activity_date": 1606774416, "creation_date": 1482101878, "last_edit_date": 1482104471, "question_id": 41213765, "link": "https://stackoverflow.com/questions/41213765/issue-with-databinding-using-kotlin-for-android", "title": "Issue with databinding using Kotlin for Android", "body": "<p>I am trying to enable data binding for my Android project using Kotlin. I have Kotlin plugin enabled, but I am not able to enable data binding I keep getting the following error</p>\n\n<pre><code>Error:(66, 0) Could not find method kapt() for arguments [com.android.databinding:compiler:2.0.0-beta6] on object of type org.gradle.api.internal.artifacts.dsl.dependencies.DefaultDependencyHandler\n</code></pre>\n\n<p>I have the following dependencies for data binding in my gradle file</p>\n\n<pre><code>dependencies {\n ...\n kapt 'com.android.databinding:compiler:2.0.0-beta6'\n} \n\nkapt {\n    generateStubs = true\n}\n</code></pre>\n"}, {"tags": ["java", "architecture", "kotlin", "vert.x"], "comments": [{"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 1, "creation_date": 1482163560, "post_id": 41212534, "comment_id": 69652005, "body": "I&#39;m not familiar with VertX so I may be missing something that otherwise would be obvious but why not use 1..n queues (one for each VertX (V) instance) or use a queue that supports selectors so that clients can consume only messages for them (e.g. <a href=\"http://activemq.apache.org/how-do-i-consume-a-specific-message.html\" rel=\"nofollow noreferrer\">activemq.apache.org/how-do-i-consume-a-specific-message.html</a>&zwnj;&#8203;)?"}, {"owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "reply_to_user": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1482176645, "post_id": 41212534, "comment_id": 69658882, "body": "We&#39;re using RabbitMQ, I don&#39;t think RabbitMQ can do that - in other words, specifically consume specific messages from a single queue. In order to get routing to a 1000 queues, you&#39;ll need to setup a topic exchange, a topic exchange is limited to 255 topics if I remember correctly. Actually I was looking for a similar feature in RabbitMQ 2 years ago: <a href=\"https://stackoverflow.com/questions/25489301/only-consuming-messages-with-certain-headers-using-rabbitmq-and-springamqp#25491291\" title=\"only consuming messages with certain headers using rabbitmq and springamqp%2325491291\">stackoverflow.com/questions/25489301/&hellip;</a> If we were using ActiveMQ, maybe that would have been a solution."}, {"owner": {"reputation": 5057, "user_id": 4695271, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/fNlXZ.png?s=128&g=1", "display_name": "x80486", "link": "https://stackoverflow.com/users/4695271/x80486"}, "edited": false, "score": 1, "creation_date": 1482182174, "post_id": 41212534, "comment_id": 69661580, "body": "@JanVladimirMostert As a side question, why do you need the queue(s) in your &quot;formula&quot;? Vert.x is asynchronous by default, and assuming all your operations are non-blocking and asynchronous, I think you don&#39;t really need the queue...and the &quot;back-ends&quot; can be also verticles (of any type)."}, {"owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "reply_to_user": {"reputation": 5057, "user_id": 4695271, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/fNlXZ.png?s=128&g=1", "display_name": "x80486", "link": "https://stackoverflow.com/users/4695271/x80486"}, "edited": false, "score": 1, "creation_date": 1482182491, "post_id": 41212534, "comment_id": 69661726, "body": "@\u0250u\u0131\u0265\u0254\u0250\u026f It&#39;s a polyglot system, Java, Kotlin, C#, VB, perl, Python, PHP and even some bash scripts and there&#39;s close to 200 applications sitting on the queues already happily chatting to each other - I&#39;m converting them from RPC style (blocking) to async. For most of the applications, going async is easy, for frontend applications or integrations, this is tricky since there&#39;s a physical connection that waits for a response to be written to it, so it needs to be processed by the application that&#39;s keeping the connection open."}], "answers": [{"comments": [{"owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "edited": false, "score": 0, "creation_date": 1482177742, "post_id": 41228847, "comment_id": 69659483, "body": "So based on your suggestion, V1 to V1000 starts up and generates a UUID for themselves, each of them notifies the other instances of their existence with a GUID. When instance V777 sends a message to the queue, it includes its own UUID so that when instance V367 consumes the response, it can see that the response was actually meant for V777 and then forwards it to V777 and V777 then completes the cycle. If the user loses connectivity and reconnects to V12 or V777 dies, V367 won&#39;t successfully send the message and V367 will start at V1, nope, V2, nope ..., V12, yep and complete the cycle."}, {"owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "edited": false, "score": 0, "creation_date": 1482177793, "post_id": 41228847, "comment_id": 69659506, "body": "Can the VertX Eventbus be used across Docker containers? I supposed I just have to open the correct port for it to work?"}, {"owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "reply_to_user": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "edited": false, "score": 0, "creation_date": 1482186293, "post_id": 41228847, "comment_id": 69663525, "body": "You got the idea. Regarding Docker, please check this (it also refers to the original Google conversation): <a href=\"http://stackoverflow.com/questions/39812848/how-do-i-configure-vert-x-event-bus-to-work-across-cluster-of-docker-containers\" title=\"how do i configure vert x event bus to work across cluster of docker containers\">stackoverflow.com/questions/39812848/&hellip;</a>"}], "tags": [], "owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "is_accepted": true, "score": 2, "last_activity_date": 1482172398, "creation_date": 1482172398, "answer_id": 41228847, "question_id": 41212534, "link": "https://stackoverflow.com/questions/41212534/match-response-handler-with-request-in-vertx/41228847#41228847", "title": "Match response handler with request in VertX", "body": "<p>What you're missing from your diagram is the Vertx EventBus.  </p>\n\n<p>Basically you can assume that your V1...Vn are interconnected:</p>\n\n<pre><code>V1&lt;-&gt;V2&lt;-&gt;...&lt;-&gt;Vn\n</code></pre>\n\n<p>Let's assume that Va receives your outbound Q message (the red line), that is intended for Vb.<br>\nIt then should send it to Vb using EventBus:</p>\n\n<pre><code>eventBus.send(\"Vb UUID\", \"Message for Vb, also containing WebSocket UUID\", ar -&gt; {\n  if (ar.succeeded()) {\n    // All went well\n  }\n  else {\n    // Vb died or has other problems. Your choice how to handle this\n  }\n});\n</code></pre>\n"}], "owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 651, "favorite_count": 0, "accepted_answer_id": 41228847, "answer_count": 1, "score": 2, "last_activity_date": 1482172398, "creation_date": 1482092792, "last_edit_date": 1482093564, "question_id": 41212534, "link": "https://stackoverflow.com/questions/41212534/match-response-handler-with-request-in-vertx", "title": "Match response handler with request in VertX", "body": "<p>Let's say I have a Load Balancer (LB) in front of 1..n VertX (V) instances, each VertX instance is connected to a queue (Q), and I have 1..m Backends (BE).</p>\n\n<p>A user clicks on a button which makes a post request or even opens a web socket, the load balancer forwards the request to one of the VertX instances, which fires a request to the queue, one of the Backends consumes the message and sends a response back; if the correct VertX instance consumes it, it can lookup the response handler and write a response to the user, if the wrong VertX instance consumes it, there won't be a response handler to write a response to and the user will wait indefinitely for a response.</p>\n\n<p>See this sketch:</p>\n\n<p><a href=\"https://i.stack.imgur.com/1FD94.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1FD94.png\" alt=\"enter image description here\"></a></p>\n\n<p>Alternatively, V2 dies and the load balancer reconnects the user to V1 which means even if I could send it back to the exact same one that made the request, it's not guaranteed to still be there once the response comes back, but the user might still be there awaiting a response via another VertX instance.</p>\n\n<p>What I'm currently doing is to generate a GUID for each new connection, then as soon as the websocket connects, store the websocket handler inside a hashmap against the GUID and then when the BE wants to respond, it does a fanout to all 1..n VertX instances, the one that currently has the correct GUID in its hashmap can then write a response to the user.\nSame for handling POST / GET in this manner.</p>\n\n<p>Pseudocode:</p>\n\n<pre><code>queue.handler { q -&gt;\n\n  q.handler {\n    val handler = someMap.get(q.guid)\n    // only respond if handler exists\n    if (handler != null){\n        handler.writeResponse(someresponsemessagehere)\n    }\n  }\n\n}\n\nvertx.createHttpServer().websocketHandler { ws -&gt;\n  val guid = generateGUID()\n  someMap.put(guid, ws)                                                                    \n  ws.writeFinalTextFrame(\"guid=${guid}\")\n  ws.handler { \n    val guid = extractGuid(it)\n    // send request to BE including generated GUID\n    sendMessageToBE(guid, \"blahblah\")\n  }\n\n}.requestHandler { router.accept(it) }.listen(port)\n</code></pre>\n\n<p>This does however mean that if I have a 1000 VertX applications running, that the backend will need to fanout its message to a 1000 frontend instances of which only one will make use of the message.</p>\n\n<p>VertX seems like it already takes care of async operations very well, is there a way in VertX to identify each websocket connection instead of having to maintain a map of GUIDs mapped to websocket handlers / post handlers?</p>\n\n<p>Also, referring to the picture, is there a way for V3 to consume the message, but still be able to write a response back to the websocket handler that's currently connected to V2?</p>\n"}, {"tags": ["generics", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 6, "last_activity_date": 1482076419, "last_edit_date": 1482076419, "creation_date": 1482075916, "answer_id": 41210025, "question_id": 41209902, "link": "https://stackoverflow.com/questions/41209902/projections-are-not-allowed-for-immediate-subtypes-of-a-supertype/41210025#41210025", "title": "projections are not allowed for immediate subtypes of a supertype", "body": "<p>In Kotlin, unlike Java, type parameters are not implicitly copied from types to their subtypes and, even if you don't modify them, they should be redeclared in the subtype declaration:</p>\n\n<pre><code>abstract class CascadedSync&lt;out C : Configuration&lt;*&gt;&gt; : AbstractSync&lt;C&gt;() {\n    // ...\n}\n</code></pre>\n"}], "owner": {"reputation": 692, "user_id": 1841940, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/87bfa2c15daec9c35d82925b0d1adf97?s=128&d=identicon&r=PG", "display_name": "John Smith", "link": "https://stackoverflow.com/users/1841940/john-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1528, "favorite_count": 2, "accepted_answer_id": 41210025, "answer_count": 1, "score": 5, "last_activity_date": 1482276758, "creation_date": 1482075100, "last_edit_date": 1482276758, "question_id": 41209902, "link": "https://stackoverflow.com/questions/41209902/projections-are-not-allowed-for-immediate-subtypes-of-a-supertype", "title": "projections are not allowed for immediate subtypes of a supertype", "body": "<p>I have an abstract class like the following:</p>\n\n<pre><code>abstract class AbstractSync&lt;out C : Configuration&lt;*&gt;&gt; : ISync {\n    internal abstract val configuration: C\n    ...\n}\n</code></pre>\n\n<p>I want another abstract class that inherits from this:</p>\n\n<pre><code>abstract class CascadedSync : AbstractSync {}\n</code></pre>\n\n<p>The CascadedSync class should not modify the generic parameter C, it should, in fact, only implement a single method of ISync and nothing else. </p>\n\n<p>I am trying out different syntaxes to achive this seemingly simple task.\nIn Java, this would look just like this:</p>\n\n<pre><code>abstract class CascadedSync extends AbstractSync {    \n}\n</code></pre>\n\n<p>Translating it to Kotlin with the help of IntelliJ produces this:</p>\n\n<pre><code>abstract class CascadedSync : AbstractSync&lt;*&gt;()\n</code></pre>\n\n<p>But at the same time gives the following error:</p>\n\n<p><strong><em>projections are not allowed for immediate subtypes of a supertype</em></strong></p>\n\n<p>What is the right syntax?</p>\n"}, {"tags": ["parsing", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 38, "last_activity_date": 1482074539, "last_edit_date": 1482074539, "creation_date": 1482073419, "answer_id": 41209661, "question_id": 41209391, "link": "https://stackoverflow.com/questions/41209391/easiest-way-to-convert-a-string-into-a-hashmap/41209661#41209661", "title": "Easiest way to convert a string into a HashMap", "body": "<p>I can think of no solution easier than this:</p>\n\n<pre><code>val s = \"abc=123,def=456,ghi=789\"\n\nval map = s.split(\",\").associate { \n    val (left, right) = it.split(\"=\")\n    left to right.toInt() \n}\n</code></pre>\n\n<p>Or, if you need exactly a <code>HashMap</code>, use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/associate-to.html\" rel=\"noreferrer\"><code>.associateTo(HashMap()) { ... }</code></a>.</p>\n\n<p>Some details:</p>\n\n<ul>\n<li><p><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/associate.html\" rel=\"noreferrer\"><code>.associate { ... }</code></a> receives a function that produces pairs which are then stored into a map as keys and values respectively. </p></li>\n<li><p><code>val (left, right) = it.split(\"=\")</code> is the usage of <a href=\"https://kotlinlang.org/docs/reference/multi-declarations.html\" rel=\"noreferrer\">destructuring declarations</a> on the list returned from <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/split.html\" rel=\"noreferrer\"><code>it.split(\"=\")</code></a>, it takes the first two items from the list.</p></li>\n<li><p><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/to.html\" rel=\"noreferrer\"><code>left to right.toInt()</code></a> creates a <code>Pair&lt;String, Int&gt;</code> defining a single mapping.</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 1264, "user_id": 978164, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/IHZqs.jpg?s=128&g=1", "display_name": "dux2", "link": "https://stackoverflow.com/users/978164/dux2"}, "is_accepted": false, "score": 0, "last_activity_date": 1591691387, "creation_date": 1591691387, "answer_id": 62278243, "question_id": 41209391, "link": "https://stackoverflow.com/questions/41209391/easiest-way-to-convert-a-string-into-a-hashmap/62278243#62278243", "title": "Easiest way to convert a string into a HashMap", "body": "<p>You can map each key/value to a <code>Pair</code> with the <code>to</code> keyword. An iterable of <code>Pair</code> can be mapped to a Map easily with the <code>toMap()</code> extension method.</p>\n\n<pre><code>val s = \"abc=123,def=456,ghi=789\"\nval output = s.split(\",\")\n              .map { it.split(\"=\") }\n              .map { it.first() to it.last().toInt() }\n              .toMap()\n</code></pre>\n"}], "owner": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6949, "favorite_count": 1, "accepted_answer_id": 41209661, "answer_count": 2, "score": 13, "last_activity_date": 1591691387, "creation_date": 1482071864, "last_edit_date": 1482075225, "question_id": 41209391, "link": "https://stackoverflow.com/questions/41209391/easiest-way-to-convert-a-string-into-a-hashmap", "title": "Easiest way to convert a string into a HashMap", "body": "<p>if I have some text in a String like:</p>\n\n<blockquote>\n  <p>\"abc=123,def=456,ghi=789\"</p>\n</blockquote>\n\n<p>how could I create a populated <code>HashMap&lt;String,Int&gt;</code> object for it in the easiest, shortest amount of code possible in Kotlin?</p>\n"}, {"tags": ["reflection", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 11, "last_activity_date": 1482059534, "last_edit_date": 1495541364, "creation_date": 1482058563, "answer_id": 41207621, "question_id": 41207060, "link": "https://stackoverflow.com/questions/41207060/how-to-get-a-kclass-of-array/41207621#41207621", "title": "How to get a KClass of Array?", "body": "<p>On the JVM platform, <a href=\"https://kotlinlang.org/docs/reference/basic-types.html#arrays\" rel=\"nofollow noreferrer\">Kotlin <code>Array&lt;T&gt;</code> types</a> are mapped to <a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html\" rel=\"nofollow noreferrer\">Java arrays</a>, which, unlike Java generic types, are not subject to <a href=\"https://docs.oracle.com/javase/tutorial/java/generics/erasure.html\" rel=\"nofollow noreferrer\">type erasure</a>, they are <a href=\"https://stackoverflow.com/questions/16518556/arrays-are-reified-in-java\">reified</a> instead.</p>\n\n<p>It means, among other things, that arrays with different element types are represented by different classes, which have different <code>Class&lt;T&gt;</code> tokens, and these class tokens contain the information about the element type as well. There's no <em>generic</em> array type, but only array types for arrays with different element types.</p>\n\n<p>Since <em>generic</em> <code>Array&lt;T&gt;</code> doesn't exist, you cannot use its reflection either, you can only get the runtime type information of array types with specified element types:</p>\n\n<pre><code>val c = Array&lt;Int&gt;::class // corresponds to Java Integer[] type\nval d = Array&lt;Array&lt;String&gt;&gt;::class // corresponds to Java String[][]\n\nval e = IntArray::class // corresponds to Java int[]\n</code></pre>\n\n<p>If you need to check whether an arbitrary class is an array type, you can do it with Java reflection:</p>\n\n<pre><code>val c = Array&lt;Int&gt;::class\n\nprintln(c.java.isArray) // true\n</code></pre>\n"}], "owner": {"reputation": 727, "user_id": 7108266, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2123ca83dfca370821fbac4360a5a27?s=128&d=identicon&r=PG&f=1", "display_name": "mmorihiro", "link": "https://stackoverflow.com/users/7108266/mmorihiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2561, "favorite_count": 1, "accepted_answer_id": 41207621, "answer_count": 1, "score": 7, "last_activity_date": 1482059534, "creation_date": 1482053298, "last_edit_date": 1482053674, "question_id": 41207060, "link": "https://stackoverflow.com/questions/41207060/how-to-get-a-kclass-of-array", "title": "How to get a KClass of Array?", "body": "<p>I wrote the below code to get a KClass of <code>Array&lt;*&gt;</code>.</p>\n\n<pre><code>Array::class\n</code></pre>\n\n<p>However, this code has a compilation error.</p>\n\n<blockquote>\n  <p>Kotlin: Array class literal requires a type argument, please specify one in angle brackets</p>\n</blockquote>\n\n<p>Do you know the reason or solution?</p>\n"}, {"tags": ["android", "function", "generics", "types", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 8011, "user_id": 3830694, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/6TotP.jpg?s=128&g=1", "display_name": "Krupal Shah", "link": "https://stackoverflow.com/users/3830694/krupal-shah"}, "edited": false, "score": 0, "creation_date": 1482043104, "post_id": 41203975, "comment_id": 69611312, "body": "interesting...thanks. But &quot;This will make the compiler inline your function&quot;. Can you explain me what does inlining actaully do. I read the docs but it shows that inlining is associated with something different like <a href=\"http://stackoverflow.com/a/145841/3830694\">performance</a>. I am not an expert. Can you explain in simple terms what does inline actually do?"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 8011, "user_id": 3830694, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/6TotP.jpg?s=128&g=1", "display_name": "Krupal Shah", "link": "https://stackoverflow.com/users/3830694/krupal-shah"}, "edited": false, "score": 1, "creation_date": 1482057269, "post_id": 41203975, "comment_id": 69613826, "body": "@KrupalShah, in Kotlin, <a href=\"https://kotlinlang.org/docs/reference/inline-functions.html\" rel=\"nofollow noreferrer\"><code>inline</code> functions</a> are indeed not intended to be a performance tool because JVM itself manages functions inlining at runtime good enough. Instead, <code>inline</code> functions are used for flexibility. The two major use cases are <a href=\"https://kotlinlang.org/docs/reference/inline-functions.html#reified-type-parameters\" rel=\"nofollow noreferrer\">reified type parameters</a> and <a href=\"https://kotlinlang.org/docs/reference/inline-functions.html#non-local-returns\" rel=\"nofollow noreferrer\">non-local control flow</a> (<code>break</code> and <code>continue</code> might be added to <code>return</code> in future)."}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 8011, "user_id": 3830694, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/6TotP.jpg?s=128&g=1", "display_name": "Krupal Shah", "link": "https://stackoverflow.com/users/3830694/krupal-shah"}, "edited": false, "score": 1, "creation_date": 1482057577, "post_id": 41203975, "comment_id": 69613884, "body": "@KrupalShah, note that both use cases require the function body to be transformed (for reified generics, the type parameter is replaced with the type present at call site, because otherwise the type parameter would be <a href=\"https://docs.oracle.com/javase/tutorial/java/generics/erasure.html\" rel=\"nofollow noreferrer\">erased</a>, and the code could not use it; for control flow, the functional argument is inlined, so that <code>return</code> inside it would work with the outer function). These transformations are done for each of the function calls, and the transformed code is then inlined at the call sites."}, {"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 1, "creation_date": 1482277502, "post_id": 41203975, "comment_id": 69706582, "body": "Good solution, but it might be better only to get the class of T in the inline function, and extract the rest of the body to another non-inline function in order to minimize amount of code inlined at the call site."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 10, "last_activity_date": 1482229067, "last_edit_date": 1482229067, "creation_date": 1482016601, "answer_id": 41203975, "question_id": 41203881, "link": "https://stackoverflow.com/questions/41203881/kotlin-when-expression-with-return-type-of-function/41203975#41203975", "title": "Kotlin - when expression with return type of function", "body": "<p>To achieve exactly what you want, you can use <a href=\"https://kotlinlang.org/docs/reference/inline-functions.html#reified-type-parameters\" rel=\"nofollow noreferrer\">reified type parameters</a>. This will make the compiler inline your function at its call sites with <code>T</code> replaced with the type used at the call site.</p>\n\n<p>The function would look like:</p>\n\n<pre><code>@Suppress(\"IMPLICIT_CAST_TO_ANY\")\ninline operator fun &lt;reified T&gt; SharedPreferences.get(key: String): T? =\n    when (T::class) {\n        String::class -&gt; getString(key, null)\n        Int::class -&gt; getInt(key, -1)\n        Boolean::class -&gt; getBoolean(key, false)\n        Float::class -&gt; getFloat(key, -1f)\n        Long::class -&gt; getLong(key, -1)\n        else -&gt; null\n    } as T?\n</code></pre>\n\n<p><sup>If you make <code>get</code> an <a href=\"https://kotlinlang.org/docs/reference/operator-overloading.html#binary-operations\" rel=\"nofollow noreferrer\"><code>operator</code> function</a>, you can also call it using the operator syntax: <code>prefs[name]</code>.</sup></p>\n\n<p>The calls should, of course, provide enough type information for the compiler to infer <code>T</code>:</p>\n\n<pre><code>val i: Int? = prefs[\"i\"] // OK, the type information is taken from the declaration\nval j: Int = prefs[\"i\"]!! // OK\n\nval x = prefs[\"x\"] // Error, not enough type information\nval y = prefs.get&lt;String&gt;(\"y\") // OK, the type will be `String?`\n\nfun f(z: Int) = z\nf(prefs[\"z\"]!!) // OK, the type information is taken from the parameter type\n</code></pre>\n"}], "owner": {"reputation": 8011, "user_id": 3830694, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/6TotP.jpg?s=128&g=1", "display_name": "Krupal Shah", "link": "https://stackoverflow.com/users/3830694/krupal-shah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1819, "favorite_count": 1, "accepted_answer_id": 41203975, "answer_count": 1, "score": 11, "last_activity_date": 1482229067, "creation_date": 1482015633, "question_id": 41203881, "link": "https://stackoverflow.com/questions/41203881/kotlin-when-expression-with-return-type-of-function", "title": "Kotlin - when expression with return type of function", "body": "<p>I want to take advantage of kotlin's when expressions and generic methods to simplify shared preferences api of Android.</p>\n\n<p>Instead of calling  getString() &amp; getInt() etc. all the time, What I want to do is to create an extension function that would switch based on return type of function and call appropriate method. Something like below : </p>\n\n<pre><code>  fun &lt;T&gt; SharedPreferences.get(key: String): T? {\n        when (T) { //how do I switch on return type and call appropriate function?\n            is String -&gt; getString(key, null)\n            is Int -&gt; getInt(key, -1)\n            is Boolean -&gt; getBoolean(key, false)\n            is Float -&gt; getFloat(key, -1f)\n            is Long -&gt; getLong(key, -1)\n        }\n        return null\n    }\n</code></pre>\n\n<p>Of Course, it will not work. But is there any solution to use when expression for return type of a function? All suggestions are welcome.</p>\n"}, {"tags": ["reflection", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 13, "last_activity_date": 1482158732, "last_edit_date": 1495541841, "creation_date": 1482013460, "answer_id": 41203660, "question_id": 41203357, "link": "https://stackoverflow.com/questions/41203357/kotlin-invoke-getter-setter-reflectively/41203660#41203660", "title": "Kotlin invoke getter/setter reflectively", "body": "<p>You can use Kotlin reflection, which requires you to add <code>kotlin-reflect</code> as a dependency to your project.</p>\n\n<p><sup>Here you can find <code>kotlin-reflect</code> <a href=\"https://mvnrepository.com/artifact/org.jetbrains.kotlin/kotlin-reflect/1.0.5-3\" rel=\"noreferrer\">for Kotlin 1.0.5</a>, or <a href=\"https://mvnrepository.com/artifact/org.jetbrains.kotlin/kotlin-reflect\" rel=\"noreferrer\">pick another version</a> if you use different Kotlin version.</sup></p>\n\n<p>After that, you can rewrite your code as follows:</p>\n\n<pre><code>val properties = myObject.javaClass.kotlin.memberProperties\nfor (p in properties.filterIsInstance&lt;KMutableProperty&lt;*&gt;&gt;()) {\n    val data = when (p.returnType.javaType) {\n        Int::class.javaPrimitiveType,\n        Int::class.javaObjectType -&gt; foo\n        Double::class.javaPrimitiveType,\n        Double::class.javaObjectType -&gt; bar\n        String::class.java -&gt; baz\n        else -&gt; null\n    }\n    if (data != null)\n        p.setter.call(myObject, data)\n}\n</code></pre>\n\n<p>Some details:</p>\n\n<ul>\n<li><p>Despite using Kotlin reflection, this approach works with Java classes as well, their fields and accessors will be seen as properties, as described <a href=\"https://stackoverflow.com/a/37481421/2196460\">here</a>.</p></li>\n<li><p>Just like with Java reflection, <code>memberProperties</code> returns <code>public</code> properties of this type and all its supertypes. To get all the properties declared in the type (including the <code>private</code> ones, but not those from the supertypes), use <code>declaredMemberProperties</code> instead.</p></li>\n<li><p><code>.filterIsInstance&lt;KMutableProperty&lt;*&gt;</code> returns only the mutable properties, so that you can use their <code>p.setter</code> later. If you need to iterate over the getters of all the properties, remove it.</p></li>\n<li><p>In the <code>when</code> block, I compared <code>p.returnType.javaType</code> to <code>Int::class.javaPrimitiveType</code> and <code>Int::class.javaObjectType</code>, because what's <code>Int</code> in Kotlin can be mapped to either Java <code>int</code> or <code>java.lang.Integer</code> depending on its usage. In Kotlin 1.1, it will be enough to check <code>p.returnType.classifier == Int::class</code>.</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 2283, "user_id": 5993278, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/aN3Pq.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/5993278/alex"}, "is_accepted": false, "score": 1, "last_activity_date": 1562694268, "last_edit_date": 1562694268, "creation_date": 1562684945, "answer_id": 56955623, "question_id": 41203357, "link": "https://stackoverflow.com/questions/41203357/kotlin-invoke-getter-setter-reflectively/56955623#56955623", "title": "Kotlin invoke getter/setter reflectively", "body": "<p>If You need to get property getter/setter, there is a couple of built-in constructions for it YourClass::propertyName</p>\n\n<p>have a look at example bellow</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n        val myObject = Cat(\"Tom\", 3, 35)\n        println(Cat::age.getter.call(myObject)) // will print 3\n        Cat::age.setter.call(myObject, 45)\n        print(myObject) // will print Cat(name=Tom, age=45, height=35)\n    }\n\n    data class Cat(var name : String, var age : Int, val height : Int)\n</code></pre>\n\n<p>but sometimes you don't know class exactly(working with generics) or need to get list of properties, then use <code>val &lt;T : Any&gt; KClass&lt;T&gt;.declaredMemberProperties: Collection&lt;KProperty1&lt;T, *&gt;&gt;</code> it will return all properties, some of them can be mutable(var) and some immutable(val), you can find out immutability by checking belonging to <code>KMutableProperty&lt;*&gt;</code> (by filtering with <code>is</code> operator or using convenience methods such as <code>filterIsInstance&lt;KMutableProperty&lt;*&gt;&gt;</code>)</p>\n\n<p>about your code snippet</p>\n\n<p>I absolutely agree with hotkey, but now it is better to use <code>myObject::class.declaredMemberProperties</code>  instead of <code>myObject.javaClass.kotlin.memberProperties</code></p>\n\n<p>because the second one is deprecated</p>\n\n<p><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/java-class.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/java-class.html</a> </p>\n\n<pre><code>     data class Cat(var name : String, var age : Int, val height : Int)\n\n     @JvmStatic\n            fun main(args: Array&lt;String&gt;) {\n                val myObject = Cat(\"Tom\", 3, 35)\n                val properties = myObject::class.declaredMemberProperties\n                for (p in properties.filterIsInstance&lt;KMutableProperty&lt;*&gt;&gt;()) {\n                    val data = when (p.returnType.javaType) {\n                        Int::class.javaPrimitiveType,\n                        Int::class.javaObjectType -&gt; 5\n                        String::class.java -&gt; \"Rob\"\n                        else -&gt; null\n                    }\n                    if (data != null)\n                        p.setter.call(myObject, data)\n                }\n                println(myObject)\n                // it will print Cat(name=Rob, age=5, height=35),\n                // because height isn't var(immutable)\n            }\n</code></pre>\n\n<p>in general, I would approach similar problems with such construction in mind </p>\n\n<pre><code>val myObject = Cat(\"Tom\", 3, 35)\n\nCat::class.declaredMemberProperties\n                    //if we want only public ones\n                    .filter{ it.visibility == KVisibility.PUBLIC }\n                    // We only want strings\n                    .filter{ it.returnType.isSubtypeOf(String::class.starProjectedType) }\n                    .filterIsInstance&lt;KMutableProperty&lt;*&gt;&gt;()\n                    .forEach { prop -&gt;\n                        prop.setter.call(myObject, \"Rob\")\n                    }\n\nprintln(myObject)\n//it will print Cat(name=Rob, age=3, height=35),\n//because name is only eligible in this case\n</code></pre>\n"}], "owner": {"reputation": 3875, "user_id": 652101, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/10eb57143bcdb0cea1bc504810a3b633?s=128&d=identicon&r=PG", "display_name": "kliron", "link": "https://stackoverflow.com/users/652101/kliron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4352, "favorite_count": 1, "accepted_answer_id": 41203660, "answer_count": 2, "score": 7, "last_activity_date": 1562694268, "creation_date": 1482011218, "question_id": 41203357, "link": "https://stackoverflow.com/questions/41203357/kotlin-invoke-getter-setter-reflectively", "title": "Kotlin invoke getter/setter reflectively", "body": "<p>Beginner in Kotlin here. </p>\n\n<p>I try to create and populate objects by reflection in a program. I cannot find the equivalent functionality in pure kotlin so my solution resembles the code below which works fine, but requires the use of dirty references like <code>java.lang.String::class.java</code> and intelliJ, understandably, doesn't seem to like this. Is there a simpler way that I am missing to do this?</p>\n\n<pre><code>val jclass = myObject::class.java \nval setters = jclass.declaredMethods.filter { it.name.startsWith(\"set\") }\nfor (s in setters) {\n    val paramType = s.parameterTypes.first()\n    val data = when(paramType) {\n        java.lang.Integer::class.java -&gt; foo\n        java.lang.Double::class.java -&gt; bar\n        java.lang.String::class.java -&gt; baz\n    }\n    s.invoke(myObject, data)\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 1, "creation_date": 1481985358, "post_id": 41199578, "comment_id": 69598673, "body": "What&#39;s the relationship between GenericElement and ISomeElement? Show their definition."}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 3, "creation_date": 1481987658, "post_id": 41199578, "comment_id": 69599344, "body": "Then there&#39;s nothing you can do. You&#39;re effectively doing something unsafe, and the compiler can&#39;t check that what you&#39;re doing is safe. All you can do is suppressing the warning, and pray that the list indeed only contains GenericElement instances. But if it&#39;s supposed to contain only GenericElement instances, why don&#39;t you declare it as ArrayList&lt;GenericElement&gt;?"}], "answers": [{"comments": [{"owner": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "edited": false, "score": 0, "creation_date": 1482160238, "post_id": 41225478, "comment_id": 69649840, "body": "<code>ISomeElement</code> is an interface, so it can&#39;t extend the <code>GenericElement</code> class (I moved the comment describing that into the actual original post now)"}, {"owner": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "edited": false, "score": 0, "creation_date": 1482160353, "post_id": 41225478, "comment_id": 69649931, "body": "I&#39;m lazy so I guess I&#39;ll just the suppress warning. What is the scope of the suppression? just the next statement? I figure if my code got changed somehow inadvertently then at least I&#39;d get some kind of runtime exception to tell me I screwed up. As it stands now this is a safe cast, the compiler just doesn&#39;t know it."}, {"owner": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "edited": false, "score": 0, "creation_date": 1482160512, "post_id": 41225478, "comment_id": 69650026, "body": "although I didn&#39;t know about that <code>filterIsInstance()</code>, looks like a useful filter"}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "reply_to_user": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "edited": false, "score": 1, "creation_date": 1482160519, "post_id": 41225478, "comment_id": 69650031, "body": "The scope can be defined as file, fun, or statement. I had it unnecessarily defined at the fun (function) level so I&#39;ve updated my answer to only suppress it for the return statement."}], "tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": true, "score": 4, "last_activity_date": 1482160422, "last_edit_date": 1482160422, "creation_date": 1482159863, "answer_id": 41225478, "question_id": 41199578, "link": "https://stackoverflow.com/questions/41199578/how-to-fix-my-code-to-remove-the-casting-warning/41225478#41225478", "title": "How to fix my code to remove the casting warning?", "body": "<ol>\n<li>If <code>ISomeElement</code> extends <code>GenericElement</code> then you will not get such a warning; you won't even need an explicit cast with the explicit function return type present.</li>\n<li><p>If <code>ISomeElement</code> does not extend <code>GenericElement</code> then there is no safe way to \"cast\" a <code>Collection&lt;ISomeElement&gt;</code> to a <code>Collection&lt;GenericElement&gt;</code>.</p>\n\n<p>You can <code>map</code> the elements to a new collection of the desired type:</p>\n\n<pre><code>fun curElements(): Collection&lt;GenericElement&gt; {\n    return elements.map { it as GenericElement }\n}\n</code></pre>\n\n<p>You can also filter the collection if you know there may be some elements in the collection that do not implement <code>GenericElement</code> and you want to silently ignore them:</p>\n\n<pre><code>fun curElements(): Collection&lt;GenericElement&gt; {\n    return elements.filterIsInstance&lt;GenericElement&gt;()\n}\n</code></pre>\n\n<p>If you are certain that all of the <code>elements</code> implement <code>GenericElement</code> then you can suppress the warning:</p>\n\n<pre><code>fun curElements(): Collection&lt;GenericElement&gt; {\n    @Suppress(\"UNCHECKED_CAST\")\n    return elements as Collection&lt;GenericElement&gt;\n}\n</code></pre>\n\n<p>You can also change the type of <code>elements</code> to <code>ArrayList&lt;GenericElement&gt;</code> and then cast each <code>ISomeElement</code> instance to <code>GenericElement</code> as you add them to the collection:</p>\n\n<pre><code>elements.add(iSomeElement as GenericElement)\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 0, "accepted_answer_id": 41225478, "answer_count": 1, "score": 1, "last_activity_date": 1482160422, "creation_date": 1481984773, "last_edit_date": 1482160114, "question_id": 41199578, "link": "https://stackoverflow.com/questions/41199578/how-to-fix-my-code-to-remove-the-casting-warning", "title": "How to fix my code to remove the casting warning?", "body": "<p>I have some code similar to this:</p>\n\n<pre><code>private val elements: ArrayList&lt;ISomeElement&gt; = ArrayList()\n</code></pre>\n\n<p>...</p>\n\n<pre><code>override fun curElements(): Collection&lt;GenericElement&gt; {  \n  ...\n  return elements as Collection&lt;GenericElement&gt; // squigly underline here, unchecked cast warning\n\n}\n</code></pre>\n\n<p>all <code>ISomeElement</code> objects in elements are <code>GenericElement</code> objects that implement <code>ISomeElement</code></p>\n\n<p>how could I fix my code to remove this warning? The code works fine, it's just the warning I'm asking about</p>\n\n<p>I can't change the return type of the fun </p>\n"}, {"tags": ["javafx", "kotlin", "tornadofx"], "answers": [{"comments": [{"owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "edited": false, "score": 2, "creation_date": 1481983952, "post_id": 41199311, "comment_id": 69598289, "body": "As a result of this question, we&#39;re now discussing if we should add support for parameters in components, kind of like HTTP request parameters, making it even more convenient to pass messages between views, fragments and even controllers :)"}, {"owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "edited": false, "score": 1, "creation_date": 1481985874, "post_id": 41199311, "comment_id": 69598825, "body": "We just added the params option, I updated my answer above."}, {"owner": {"reputation": 319, "user_id": 2147234, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eda37aa3cd03335e2c0dccc6890e32e1?s=128&d=identicon&r=PG", "display_name": "mercy123", "link": "https://stackoverflow.com/users/2147234/mercy123"}, "edited": false, "score": 0, "creation_date": 1481987022, "post_id": 41199311, "comment_id": 69599145, "body": "WOW!! Thanks for such a great Explanation. I just implemented &quot;Use injection inside the scope&quot; part and it works like a charm."}, {"owner": {"reputation": 319, "user_id": 2147234, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eda37aa3cd03335e2c0dccc6890e32e1?s=128&d=identicon&r=PG", "display_name": "mercy123", "link": "https://stackoverflow.com/users/2147234/mercy123"}, "edited": false, "score": 1, "creation_date": 1481987136, "post_id": 41199311, "comment_id": 69599180, "body": "I commend you guys for doing such an awesome work, providing instant support and help. Thank you Edvin and team :)"}, {"owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "reply_to_user": {"reputation": 319, "user_id": 2147234, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eda37aa3cd03335e2c0dccc6890e32e1?s=128&d=identicon&r=PG", "display_name": "mercy123", "link": "https://stackoverflow.com/users/2147234/mercy123"}, "edited": false, "score": 0, "creation_date": 1481998093, "post_id": 41199311, "comment_id": 69602335, "body": "Thank you, it means a lot. All the positive feedback we&#39;re getting makes it extremely fun to keep working on this framework :) And your question spawned some new features so I&#39;m grateful for that."}, {"owner": {"reputation": 9475, "user_id": 1373258, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057cb1f71b78244924b7854605d79a9d?s=128&d=identicon&r=PG&f=1", "display_name": "tmn", "link": "https://stackoverflow.com/users/1373258/tmn"}, "reply_to_user": {"reputation": 319, "user_id": 2147234, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eda37aa3cd03335e2c0dccc6890e32e1?s=128&d=identicon&r=PG", "display_name": "mercy123", "link": "https://stackoverflow.com/users/2147234/mercy123"}, "edited": false, "score": 1, "creation_date": 1482004497, "post_id": 41199311, "comment_id": 69604131, "body": "@mercy123 feel free to join us on the #tornadofx Slack channel if you have any more questions or great ideas. We welcome new features that arise out of people&#39;s needs. <a href=\"https://kotlinlang.slack.com/\" rel=\"nofollow noreferrer\">kotlinlang.slack.com</a>"}], "tags": [], "owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "is_accepted": true, "score": 25, "last_activity_date": 1523222368, "last_edit_date": 1523222368, "creation_date": 1481982886, "answer_id": 41199311, "question_id": 41198155, "link": "https://stackoverflow.com/questions/41198155/tornadofx-how-to-pass-parameter-to-fragment-on-every-instance/41199311#41199311", "title": "Tornadofx - How to pass parameter to Fragment on every instance", "body": "<p>Let's start with the most explicit way to pass data to Fragments. For this TableView example you could expose an observable list inside the Fragment and tie your TableView to this list. Then you can update that list from outside the Fragment and have your changes reflected in the fragment. For the example I created a simple data object with an observable property called <code>SomeItem</code>:</p>\n\n<pre><code>class SomeItem(name: String) {\n    val nameProperty = SimpleStringProperty(name)\n    var name by nameProperty\n}\n</code></pre>\n\n<p>Now we can define the <code>SomeViewFragment</code> with an item property bound to the TableView:</p>\n\n<pre><code>class SomeViewFragment : Fragment() {\n    val items = FXCollections.observableArrayList&lt;SomeItem&gt;()\n\n    override val root = tableview(items) {\n        column(\"Name\", SomeItem::nameProperty)\n    }\n}\n</code></pre>\n\n<p>If you later update the items content, the changes will be reflected in the table:</p>\n\n<pre><code>class SomeView : View() {\n    override val root = stackpane {\n        this += find&lt;SomeViewFragment&gt;().apply {\n            items.setAll(SomeItem(\"Item A\"), SomeItem(\"Item B\"))\n        }\n    }\n}\n</code></pre>\n\n<p>You can then do the same for <code>SomeOtherView</code> but with other data:</p>\n\n<pre><code>class SomeOtherView : View() {\n    override val root = stackpane {\n        this += find&lt;SomeViewFragment&gt;().apply {\n            items.setAll(SomeItem(\"Item B\"), SomeItem(\"Item C\"))\n        }\n    }\n}\n</code></pre>\n\n<p>While this is easy to understand and very explicit, it creates a pretty strong coupling between your components. You might want to consider using scopes for this instead. We now have two options:</p>\n\n<ol>\n<li>Use injection inside the scope</li>\n<li>Let the scope contain the data</li>\n</ol>\n\n<h2>Use injection inside the scope</h2>\n\n<p>We will go with option 1 first, by injecting the data model. We first create a data model that can hold our items list:</p>\n\n<pre><code>class ItemsModel(val items: ObservableList&lt;SomeItem&gt;) : ViewModel()\n</code></pre>\n\n<p>Now we inject this ItemsModel into our Fragment and extract the items from that model:</p>\n\n<pre><code>class SomeViewFragment : Fragment() {\n    val model: ItemsModel by inject()\n\n    override val root = tableview(model.items) {\n        column(\"Name\", SomeItem::nameProperty)\n    }\n}\n</code></pre>\n\n<p>Lastly, we need to define a separate scope for the fragments in each view and prepare the data for that scope:</p>\n\n<pre><code>class SomeView : View() {\n\n    override val root = stackpane {\n        // Create the model and fill it with data\n        val model= ItemsModel(listOf(SomeItem(\"Item A\"), SomeItem(\"Item B\")).observable())\n\n        // Define a new scope and put the model into the scope\n        val fragmentScope = Scope()\n        setInScope(model, fragmentScope)\n\n        // Add the fragment for our created scope\n        this += find&lt;SomeViewFragment&gt;(fragmentScope)\n    }\n}\n</code></pre>\n\n<p>Please not that the <code>setInScope</code> function used above will be available in TornadoFX 1.5.9. In the mean time you can use:</p>\n\n<pre><code>FX.getComponents(fragmentScope).put(ItemsModel::class, model)\n</code></pre>\n\n<h2>Let the scope contain the data</h2>\n\n<p>Another option is to put data directly into the scope. Let's create an <code>ItemsScope</code> instead:</p>\n\n<pre><code>class ItemsScope(val items: ObservableList&lt;SomeItem&gt;) : Scope()\n</code></pre>\n\n<p>Now our fragment will expect to get an instance of <code>SomeItemScope</code> so we cast it and extract the data:</p>\n\n<pre><code>class SomeViewFragment : Fragment() {\n    override val scope = super.scope as ItemsScope\n\n    override val root = tableview(scope.items) {\n        column(\"Name\", SomeItem::nameProperty)\n    }\n}\n</code></pre>\n\n<p>The View needs to do less work now since we don't need the model:</p>\n\n<pre><code>class SomeView : View() {\n\n    override val root = stackpane {\n        // Create the scope and fill it with data\n        val itemsScope= ItemsScope(listOf(SomeItem(\"Item A\"), SomeItem(\"Item B\")).observable())\n\n        // Add the fragment for our created scope\n        this += find&lt;SomeViewFragment&gt;(itemsScope)\n    }\n}\n</code></pre>\n\n<h2>Passing parameters</h2>\n\n<p><strong>EDIT</strong>: As a result of this question, we decided to include support for passing parameters with <code>find</code> and <code>inject</code>. From TornadoFX 1.5.9 you can therefore send the items list as a parameter like this:</p>\n\n<pre><code>class SomeView : View() {\n    override val root = stackpane {\n        val params = \"items\" to listOf(SomeItem(\"Item A\"), SomeItem(\"Item B\")).observable()\n        this += find&lt;SomeViewFragment&gt;(params)\n    }\n}\n</code></pre>\n\n<p>The <code>SomeViewFragment</code> can now pick up these parameters and use them directly:</p>\n\n<pre><code>class SomeViewFragment : Fragment() {\n    val items: ObservableList&lt;SomeItem&gt; by param()\n\n    override val root = tableview(items) {\n        column(\"Name\", SomeItem::nameProperty)\n    }\n}\n</code></pre>\n\n<p>Please not that this involves an unchecked cast inside the Fragment.</p>\n\n<h2>Other options</h2>\n\n<p>You could also pass parameters and data over the EventBus, which will also be in the soon to be released TornadoFX 1.5.9. The EventBus also supports scopes which makes it easy to target your events.</p>\n\n<h2>Further reading</h2>\n\n<p>You can read more about Scopes, EventBus and ViewModel in the guide:</p>\n\n<p><a href=\"https://edvin.gitbooks.io/tornadofx-guide/content/part2/Scopes.html\" rel=\"noreferrer\" title=\"Scopes\">Scopes</a></p>\n\n<p><a href=\"https://edvin.gitbooks.io/tornadofx-guide/content/part2/EventBus.html\" rel=\"noreferrer\" title=\"EventBus\">EventBus</a></p>\n\n<p><a href=\"https://edvin.gitbooks.io/tornadofx-guide/content/11.%20ViewModel%20and%20Validation.html\" rel=\"noreferrer\" title=\"ViewModel and Validation\">ViewModel and Validation</a></p>\n"}], "owner": {"reputation": 319, "user_id": 2147234, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eda37aa3cd03335e2c0dccc6890e32e1?s=128&d=identicon&r=PG", "display_name": "mercy123", "link": "https://stackoverflow.com/users/2147234/mercy123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4447, "favorite_count": 6, "accepted_answer_id": 41199311, "answer_count": 1, "score": 11, "last_activity_date": 1523222368, "creation_date": 1481974584, "last_edit_date": 1481977199, "question_id": 41198155, "link": "https://stackoverflow.com/questions/41198155/tornadofx-how-to-pass-parameter-to-fragment-on-every-instance", "title": "Tornadofx - How to pass parameter to Fragment on every instance", "body": "<p>I am a newbie to javafx, kotlin and obviously tornadofx.<br>\n<em>Issue</em>:<br>\nHow to pass parameters to Fragment on every instance?</p>\n\n<p>Lets say I have a table view layout as my fragment. Now this fragment is used at multiple places but with different datasets.</p>\n\n<p>eg.\nAdding a fragment in: </p>\n\n<pre><code>class SomeView : View() {\n... \nroot += SomeViewFragment::class\n}\n\nclass SomeAnotherView : View() {\n... \nroot += SomeViewFragment::class\n}\n</code></pre>\n\n<p>Declaring Fragment:</p>\n\n<pre><code>class SomeViewFragment : Fragment() {\n...\n    tableview(someDataSetFromRestApiCall) {\n    ...\n    }\n}\n</code></pre>\n\n<p>How can I pass different someDataSetFromRestApiCall from SomeView and SomeAnotherView ?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 53042, "user_id": 2292812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ntpOX.jpg?s=128&g=1", "display_name": "Michael Zajac", "link": "https://stackoverflow.com/users/2292812/michael-zajac"}, "edited": false, "score": 4, "creation_date": 1481917425, "post_id": 41191413, "comment_id": 69582654, "body": "<a href=\"https://kotlinlang.org/docs/reference/object-declarations.html#companion-objects\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/&hellip;</a>"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 5, "creation_date": 1481963730, "post_id": 41191413, "comment_id": 69593040, "body": "I don&#39;t see how this question asks to recommend an off-site resource. However, this is a duplicate of <a href=\"http://stackoverflow.com/questions/38381748/why-do-we-use-companion-object-as-a-kind-of-replacement-for-java-static-fields\" title=\"why do we use companion object as a kind of replacement for java static fields\">stackoverflow.com/questions/38381748/&hellip;</a> and should be closed as such."}, {"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "edited": false, "score": 1, "creation_date": 1483088444, "post_id": 41191413, "comment_id": 69988654, "body": "<a href=\"https://twitter.com/anupcowkur/status/809609624278007810\" rel=\"nofollow noreferrer\">twitter.com/anupcowkur/status/809609624278007810</a>"}], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 5603334, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AXnzq9f-eCU/AAAAAAAAAAI/AAAAAAAAA84/-Y9IPweSbRw/photo.jpg?sz=128", "display_name": "Myeongin Woo", "link": "https://stackoverflow.com/users/5603334/myeongin-woo"}, "is_accepted": true, "score": 2, "last_activity_date": 1482125456, "creation_date": 1482125456, "answer_id": 41216259, "question_id": 41191413, "link": "https://stackoverflow.com/questions/41191413/what-is-a-companion-object-and-why-do-we-need-it/41216259#41216259", "title": "What is a Companion Object and why do we need it?", "body": "<p>Members of the companion object can be called by using simply the class name as the qualifier</p>\n\n<p>like a java static</p>\n\n<p>if  called Anothrer class's member variable or method\nyou use that companion object</p>\n"}], "owner": {"reputation": 33, "user_id": 7010521, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210949563954473/picture?type=large", "display_name": "Etherkimist", "link": "https://stackoverflow.com/users/7010521/etherkimist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 41216259, "answer_count": 1, "score": -3, "last_activity_date": 1482125456, "creation_date": 1481917254, "last_edit_date": 1482106397, "question_id": 41191413, "link": "https://stackoverflow.com/questions/41191413/what-is-a-companion-object-and-why-do-we-need-it", "title": "What is a Companion Object and why do we need it?", "body": "<p>I am currently learning the Kotlin language.</p>\n\n<p>I want to know what is a Companion Object, and why do we need it?</p>\n\n<p>I think there is a similar concept in Scala.</p>\n"}, {"tags": ["java", "android", "broadcastreceiver", "kotlin", "kotlin-android-extensions"], "answers": [{"tags": [], "owner": {"reputation": 12820, "user_id": 1031556, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b46c5b92c22c681b79a1e91825ee757b?s=128&d=identicon&r=PG", "display_name": "Stephan", "link": "https://stackoverflow.com/users/1031556/stephan"}, "is_accepted": true, "score": 3, "last_activity_date": 1481927839, "creation_date": 1481927839, "answer_id": 41193414, "question_id": 41190327, "link": "https://stackoverflow.com/questions/41190327/registerreceiver-shows-error-for-overloaded-method/41193414#41193414", "title": "registerReceiver() shows error for overloaded method", "body": "<p>First the parameter is named <code>filter</code> and not <code>intentFilter</code> and if you correct this, you get another error. Which says: \"Named arguments are not allowed for non-Kotlin functions\" Reason for this is that the method <code>public Intent registerReceiver(BroadcastReceiver receiver, IntentFilter filter)</code> is from Android and written in java. Removing the names should work fine:</p>\n\n<pre><code>registerReceiver(\n            networkChangeReceiver,\n            IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION)\n    )\n</code></pre>\n"}], "owner": {"reputation": 8011, "user_id": 3830694, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/6TotP.jpg?s=128&g=1", "display_name": "Krupal Shah", "link": "https://stackoverflow.com/users/3830694/krupal-shah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 419, "favorite_count": 0, "accepted_answer_id": 41193414, "answer_count": 1, "score": 1, "last_activity_date": 1481927839, "creation_date": 1481912754, "question_id": 41190327, "link": "https://stackoverflow.com/questions/41190327/registerreceiver-shows-error-for-overloaded-method", "title": "registerReceiver() shows error for overloaded method", "body": "<p>I was trying Kotlin in my Android project. There is a broadcast receiver for network change events in my activity. Code is as below:</p>\n\n<p><strong>BaseActivity.kt</strong></p>\n\n<pre><code>  abstract class BaseActivity : AppCompatActivity() {\n\n        private val networkChangeReceiver = NetworkChangeReceiver()\n\n\n        override fun onStart() {\n            super.onStart()\n            registerReceiver(\n                    receiver = networkChangeReceiver,\n                    intentFilter = IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION)\n            )\n        }\n\n        override fun onStop() {\n            super.onStop()\n            unregisterReceiver(receiver = networkChangeReceiver)\n        }\n    }\n</code></pre>\n\n<p>NetworkChangeReceiver.kt</p>\n\n<pre><code>class NetworkChangeReceiver : BroadcastReceiver() {\n\n    override fun onReceive(context: Context?, intent: Intent?) {\n          Log.e(\"network changed\")\n    }\n\n}\n</code></pre>\n\n<p>I don't see any problem in it. But my kotlin plugin shows me following error:</p>\n\n<p><strong>None of following functions can be called with arguments supplied</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/5ecKs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5ecKs.png\" alt=\"enter image description here\"></a></p>\n\n<p>The arguments supplied for first one is correct ASAFIK. I am not an expert in Kotlin, just learning it for fun. Is this intended behaviour of Kotlin, error in plugin or am I missing something? Can anyone explain?</p>\n"}, {"tags": ["android", "kotlin", "aar"], "comments": [{"owner": {"reputation": 18271, "user_id": 6507689, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tKmXs.png?s=128&g=1", "display_name": "R. Zag&#243;rski", "link": "https://stackoverflow.com/users/6507689/r-zag%c3%b3rski"}, "edited": false, "score": 0, "creation_date": 1481889943, "post_id": 41183762, "comment_id": 69567688, "body": "Have a look <a href=\"http://stackoverflow.com/questions/40859766/how-does-android-merge-the-custom-librarys-support-library-with-that-of-applica/40860398#40860398\">here</a> to understand better how gradle builds the applications. The same depicts plugins on the classpath. I suggest not to build <code>fatJar</code> when distributing libraries, this will cause problems with versions."}, {"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1481892036, "post_id": 41183762, "comment_id": 69568962, "body": "There are Kotlin-based libraries in the Android Arsenal, so presumably it is possible. I haven&#39;t played much with Kotlin personally, and so I do not know how they do it. But unless <code>kotlin-stdlib</code> and <code>kotlin-runtime</code> are very small, your library may get rather large if you embed them. <code>libs&#47;</code> in an AAR are for native libraries (<code>.so</code> files) IIRC."}, {"owner": {"reputation": 5483, "user_id": 1356130, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/71a884fac9d80ee3171a4018b1eaf660?s=128&d=identicon&r=PG", "display_name": "atok", "link": "https://stackoverflow.com/users/1356130/atok"}, "edited": false, "score": 1, "creation_date": 1482135930, "post_id": 41183762, "comment_id": 69635222, "body": "Thank you for your comments! Looks like the existing libraries just include the dependency: <code>compile &quot;org.jetbrains.kotlin:kotlin-stdlib:$kotlinVersion&quot;</code>"}, {"owner": {"reputation": 5483, "user_id": 1356130, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/71a884fac9d80ee3171a4018b1eaf660?s=128&d=identicon&r=PG", "display_name": "atok", "link": "https://stackoverflow.com/users/1356130/atok"}, "reply_to_user": {"reputation": 18271, "user_id": 6507689, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tKmXs.png?s=128&g=1", "display_name": "R. Zag&#243;rski", "link": "https://stackoverflow.com/users/6507689/r-zag%c3%b3rski"}, "edited": false, "score": 0, "creation_date": 1482136019, "post_id": 41183762, "comment_id": 69635262, "body": "@R.Zag&#243;rski: I understand your recomendation, that&#39;s why I&#39;m looking into changing the package names."}, {"owner": {"reputation": 10256, "user_id": 1139023, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/7e720df07b8a3ef623cf6a7587f21ab8?s=128&d=identicon&r=PG", "display_name": "Ashwin", "link": "https://stackoverflow.com/users/1139023/ashwin"}, "edited": false, "score": 1, "creation_date": 1508218368, "post_id": 41183762, "comment_id": 80512459, "body": "@atok : Why don&#39;t you write your comment as an answer. It works. It will be helpful"}], "answers": [{"tags": [], "owner": {"reputation": 17436, "user_id": 5241933, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/n9pSx.jpg?s=128&g=1", "display_name": "David Rawson", "link": "https://stackoverflow.com/users/5241933/david-rawson"}, "is_accepted": false, "score": 6, "last_activity_date": 1523180731, "creation_date": 1523180731, "answer_id": 49716556, "question_id": 41183762, "link": "https://stackoverflow.com/questions/41183762/using-kotlin-in-android-library-distributed-as-aar/49716556#49716556", "title": "Using Kotlin in Android library distributed as AAR", "body": "<p>As per the comments, there are several <code>.aar</code> libraries available that are written in Kotlin such as <a href=\"https://github.com/TradeMe/MapMe\" rel=\"noreferrer\">MapMe</a>. </p>\n\n<p>Indeed there is a curated list of such libraries in <a href=\"https://github.com/mcxiaoke/awesome-kotlin\" rel=\"noreferrer\">this GitHub repo</a></p>\n\n<p>You can see by examining the <code>build.gradle</code> for the same that these do include a dependency on <code>kotlin-stdlib</code>. </p>\n\n<p>This is not a lightweight dependency: the <code>.jar</code> size is approx 1MB. And if you make a blank project, compile the <code>.apk</code>, and upload it to a <a href=\"http://inloop.github.io/apk-method-count/\" rel=\"noreferrer\">method count site</a> it comes to <code>6086</code> methods.</p>\n\n<p>However, if the consuming project already uses Kotlin they will already have bourne the burden of the extra classes. Since they will have explicitly included <code>kotlin-stdlib</code> as a dependency in their <code>build.gradle</code> it will probably force resolution of the dependency in your library to their version. This is unlikely to cause problems with <code>stdlib</code>. </p>\n\n<p>Even if the consumer is not using Kotlin in their project, aggressive use of Proguard can eliminate unused methods. The <a href=\"https://kotlinlang.org/docs/reference/android-overview.html#using-kotlin-for-android-development\" rel=\"noreferrer\">official Kotlin website explains</a>:</p>\n\n<blockquote>\n  <p>Footprint: Kotlin has a very compact runtime library, which can be further reduced through the use of ProGuard. In a real application, the Kotlin runtime adds only a few hundred methods and less than 100K to the size of the .apk file.</p>\n</blockquote>\n\n<p>The source for the second statement is a <a href=\"https://blog.gouline.net/kotlin-production-tales-62b56057dc8a\" rel=\"noreferrer\">blog post on Medium</a> so your mileage may vary. </p>\n"}], "owner": {"reputation": 5483, "user_id": 1356130, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/71a884fac9d80ee3171a4018b1eaf660?s=128&d=identicon&r=PG", "display_name": "atok", "link": "https://stackoverflow.com/users/1356130/atok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3145, "favorite_count": 7, "answer_count": 1, "score": 13, "last_activity_date": 1523180731, "creation_date": 1481889040, "last_edit_date": 1481889435, "question_id": 41183762, "link": "https://stackoverflow.com/questions/41183762/using-kotlin-in-android-library-distributed-as-aar", "title": "Using Kotlin in Android library distributed as AAR", "body": "<p>Is it even possible to use Kotlin to write a library? </p>\n\n<p>The problem I see is that it will depend on specyfic versions of <code>kotlin-stdlib</code> and <code>kotlin-runtime</code> and force user of the library to use the same version. </p>\n\n<p>I'm considering using <code>jarjar</code> to repackage those but then, how to include those in a fatjar-type distribution? Inside the unpacked aar I see <code>/libs</code> directory - is there a way to use that?</p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 7, "last_activity_date": 1481881554, "creation_date": 1481881554, "answer_id": 41181411, "question_id": 41180972, "link": "https://stackoverflow.com/questions/41180972/annotations-when-is-arrayof-needed/41181411#41181411", "title": "Annotations: when is arrayOf needed", "body": "<p>No, this is not a bug. Java treats the <code>value</code> annotation specially and allows to omit the annotation parameter name when you use it. Kotlin follows this special treatment and also allows you to omit the parameter name, allowing you to write <code>@Hans(\"test\")</code>. Supporting this syntax for array parameters requires to treat the parameter as <code>vararg</code>, so Kotlin does that and allows you to omit the <code>arrayOf</code>.</p>\n"}], "owner": {"reputation": 319, "user_id": 109202, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/054de3b99528073c9bc12a5d95c8821d?s=128&d=identicon&r=PG", "display_name": "Raffael Schmid", "link": "https://stackoverflow.com/users/109202/raffael-schmid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "accepted_answer_id": 41181411, "answer_count": 1, "score": 7, "last_activity_date": 1481881554, "creation_date": 1481880091, "question_id": 41180972, "link": "https://stackoverflow.com/questions/41180972/annotations-when-is-arrayof-needed", "title": "Annotations: when is arrayOf needed", "body": "<p>Lets say we have a Java annotation  as follows:</p>\n\n<pre><code>@Target(ElementType.METHOD)\n@Retention(RetentionPolicy.RUNTIME)\n@Documented\npublic @interface Hans {\n    String[] value() default {};\n}\n</code></pre>\n\n<p>In Kotlin I am allowed to use the Annotation as follows: </p>\n\n<pre><code>@Hans(value = \"test\")\n</code></pre>\n\n<p>As soon as i change the property name from 'value' to 'name' it is not allowed to use this syntax anymore, instead I need to have arrayOf(..).</p>\n\n<pre><code>@Hans(name = arrayOf(\"test\"))\n</code></pre>\n\n<p>Is that a bug or a design decision and if so what is the reason behind it.</p>\n\n<p>Many thanks in advance\nKind regards</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 0, "creation_date": 1481878159, "post_id": 41180365, "comment_id": 69560707, "body": "<code>MyListener</code> needs to have just one method. Otherwise you need to create an <code>object:MyListener</code>."}], "answers": [{"tags": [], "owner": {"reputation": 4319, "user_id": 4874829, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cfECAGc8huU/AAAAAAAAAAI/AAAAAAAAAJk/Pebw5H-quLo/photo.jpg?sz=128", "display_name": "Yoav Sternberg", "link": "https://stackoverflow.com/users/4874829/yoav-sternberg"}, "is_accepted": true, "score": 13, "last_activity_date": 1481879293, "creation_date": 1481879293, "answer_id": 41180743, "question_id": 41180365, "link": "https://stackoverflow.com/questions/41180365/how-kotlin-makes-setonclicklistener-accept-functions-as-parameter/41180743#41180743", "title": "How kotlin makes setOnClickListener accept functions as parameter", "body": "<p>According to Kotlin documentations about <a href=\"https://kotlinlang.org/docs/reference/java-interop.html#sam-conversions\" rel=\"noreferrer\">Java interop</a>, for a functional interface defined in Java, you can use a SAM conversion.</p>\n\n<blockquote>\n  <p>Just like Java 8, Kotlin supports SAM conversions. This means that\n  Kotlin function literals can be automatically converted into\n  implementations of Java interfaces with a single non-default method,\n  as long as the parameter types of the interface method match the\n  parameter types of the Kotlin function.</p>\n</blockquote>\n\n<pre><code>val runnable = Runnable { println(\"This runs in a runnable\") }\n\nval executor = ThreadPoolExecutor()\n// Java signature: void execute(Runnable command)\nexecutor.execute { println(\"This runs in a thread pool\") }\n</code></pre>\n\n<p>However, Kotlin has functional types, therefore SAM conversion doesn't work for interfaces defined in Kotlin:</p>\n\n<blockquote>\n  <p>Also note that this feature works only for Java interop; since Kotlin\n  has proper function types, automatic conversion of functions into\n  implementations of Kotlin interfaces is unnecessary and therefore\n  unsupported.</p>\n</blockquote>\n\n<hr>\n\n<h2>Possible solutions:</h2>\n\n<ol>\n<li>Define the interface in Java. Useful if it is a library/code that may be used from a Java code.</li>\n<li><p>Make the method receive a function as argument:</p>\n\n<pre><code>// Example listener receives a bool and return unit.  \nfun setMyListener(listener: (isChecked: Bool) -&gt; Unit) { ... }  \n// Usage:  \nobj.setMyListener { isChecked -&gt; }\n</code></pre></li>\n<li><p>Use type alias (only supported in Kotlin 1.1+):</p>\n\n<pre><code>typealias MyListener = (Bool) -&gt; Unit\nfun setMyListener(listener: MyListener) { ... }\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 103, "user_id": 7305770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49ab85580e6525d1f6cc7d2a32ab90a8?s=128&d=identicon&r=PG&f=1", "display_name": "err0r", "link": "https://stackoverflow.com/users/7305770/err0r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5151, "favorite_count": 1, "accepted_answer_id": 41180743, "answer_count": 1, "score": 10, "last_activity_date": 1482180220, "creation_date": 1481877938, "last_edit_date": 1482180220, "question_id": 41180365, "link": "https://stackoverflow.com/questions/41180365/how-kotlin-makes-setonclicklistener-accept-functions-as-parameter", "title": "How kotlin makes setOnClickListener accept functions as parameter", "body": "<p>In kotlin, we can use <code>setOnClickListener()</code> like this:</p>\n\n<pre><code>view.setOnClickListener { println(\"Hello\") }\n</code></pre>\n\n<p>But if I define my own interface, I can only pass anonymous object like this:</p>\n\n<pre><code>obj.setMyListener(object: MyListener() {\n    ...\n})\n</code></pre>\n\n<p>I just wondering how they make <code>setOnClickListener()</code> accept a function rather than an anonymous object.</p>\n"}, {"tags": ["java", "reflection", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 3962, "user_id": 2789327, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/819a89b05f92171a5bb1e3e20f0832ae?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/2789327/dan"}, "edited": false, "score": 0, "creation_date": 1481905768, "post_id": 41179122, "comment_id": 69577076, "body": "<code>Int::class.java</code> is just <code>int</code>, not <code>java.lang.Integer</code>. Edited question with more experimentation."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "reply_to_user": {"reputation": 3962, "user_id": 2789327, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/819a89b05f92171a5bb1e3e20f0832ae?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/2789327/dan"}, "edited": false, "score": 0, "creation_date": 1481989170, "post_id": 41179122, "comment_id": 69599779, "body": "Yes, but <code>type.kotlin</code> should return <code>Int</code> no matter what was the original type"}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 1, "last_activity_date": 1481872512, "creation_date": 1481872512, "answer_id": 41179122, "question_id": 41176683, "link": "https://stackoverflow.com/questions/41176683/how-to-compare-a-class-against-a-java-boxed-primitive-type-without-kotlin-com/41179122#41179122", "title": "How to compare a Class&lt;*&gt; against a Java boxed primitive type without kotlin compiler warnings", "body": "<p><code>Int?</code> is not a class, but a type, meaning that a reference of this type is ether <code>int</code>, <code>Integer</code> or <code>null</code>.</p>\n\n<p><code>Int::class.java</code> should give you <code>java.lang.Integer</code> I think.</p>\n\n<p>I can't check it right now, but IMO converting <code>Class</code> to <code>KClass</code> is your best option:</p>\n\n<pre><code>when(type.kotlinClass) {\n    Double::class -&gt; TypesEnum.DOUBLE\n    Int::class   -&gt; TypesEnum.INT\n    else -&gt; throw IllegalArgumentException(\"type\")\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3962, "user_id": 2789327, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/819a89b05f92171a5bb1e3e20f0832ae?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/2789327/dan"}, "edited": false, "score": 0, "creation_date": 1481908651, "post_id": 41187165, "comment_id": 69578589, "body": "<code>Class.kotlin</code> works on try.kotlinlang.org but not my system, so this is clearly the right answer and my environment is messed up."}, {"owner": {"reputation": 3962, "user_id": 2789327, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/819a89b05f92171a5bb1e3e20f0832ae?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/2789327/dan"}, "edited": false, "score": 0, "creation_date": 1481911198, "post_id": 41187165, "comment_id": 69579763, "body": "<code>Class.forName(&quot;java.lang.Double&quot;).kotlin</code> matches <code>Double::class</code> in a when block, but only on kotlin 1.0.4 and above. I had an old version."}], "tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": true, "score": 3, "last_activity_date": 1482158559, "last_edit_date": 1482158559, "creation_date": 1481900585, "answer_id": 41187165, "question_id": 41176683, "link": "https://stackoverflow.com/questions/41176683/how-to-compare-a-class-against-a-java-boxed-primitive-type-without-kotlin-com/41187165#41187165", "title": "How to compare a Class&lt;*&gt; against a Java boxed primitive type without kotlin compiler warnings", "body": "<ol>\n<li><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/java.lang.-class/kotlin.html\" rel=\"nofollow noreferrer\"><code>Class.kotlin</code></a> should work. If it \"crashes on some of [your] inputs\" then I recommend filing an issue <a href=\"https://youtrack.jetbrains.com/issues/KT\" rel=\"nofollow noreferrer\">here</a>.</li>\n<li>You can use <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#forName(java.lang.String)\" rel=\"nofollow noreferrer\"><code>Class.forName(String)</code></a>. to avoid the compiler warnings. e.g. <code>Class.forName(\"java.lang.Integer\")</code>.</li>\n<li>You can <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-suppress/\" rel=\"nofollow noreferrer\">suppress</a> the warning.</li>\n<li><p>You can use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/java-object-type.html\" rel=\"nofollow noreferrer\"><code>KClass.javaObjectType</code></a> and <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/java-primitive-type.html\" rel=\"nofollow noreferrer\"><code>KClass.javaPrimitiveType</code></a>:</p>\n\n<pre><code>when (type) {\n    Double::class.javaObjectType, Double::class.javaPrimitiveType -&gt; TypesEnum.DOUBLE\n    Int::class.javaObjectType, Int::class.javaPrimitiveType -&gt; TypesEnum.INT\n    else -&gt; throw IllegalArgumentException(\"type\")\n}\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 3962, "user_id": 2789327, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/819a89b05f92171a5bb1e3e20f0832ae?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/2789327/dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 767, "favorite_count": 0, "accepted_answer_id": 41187165, "answer_count": 2, "score": 1, "last_activity_date": 1482158559, "creation_date": 1481857780, "last_edit_date": 1495542715, "question_id": 41176683, "link": "https://stackoverflow.com/questions/41176683/how-to-compare-a-class-against-a-java-boxed-primitive-type-without-kotlin-com", "title": "How to compare a Class&lt;*&gt; against a Java boxed primitive type without kotlin compiler warnings", "body": "<p>I'm using Kotlin to write something that works with Java's reflection APIs. My input is a <code>Class&lt;*&gt;</code> and I need to decide whether that type is a double or integer, but I need to support both primitives <em>and</em> the boxed nullable types that Java uses.</p>\n\n<p>This toy example does what I'm trying to do:</p>\n\n<pre><code>when(type) {\n    java.lang.Double::class.java, Double::class.java -&gt; TypesEnum.DOUBLE\n    java.lang.Integer::class.java, Int::class.java   -&gt; TypesEnum.INT\n    else -&gt; throw IllegalArgumentException(\"type\")\n}\n</code></pre>\n\n<p>But, this approach generates the following warnings from the Kotlin compiler:</p>\n\n<blockquote>\n  <p>Warning:(22, 13) Kotlin: This class shouldn't be used in Kotlin. Use kotlin.Double instead.\n  Warning:(23, 13) Kotlin: This class shouldn't be used in Kotlin. Use kotlin.Int instead.</p>\n</blockquote>\n\n<p>However, <code>Int?::class.java</code> is a syntax error, <a href=\"https://stackoverflow.com/questions/35946044/kotlin-reflection-check-nullable-types\">the approaches suggested on an earlier question</a> require a <code>KClass</code> instead of a <code>Class&lt;*&gt;</code> (and the <a href=\"https://github.com/JetBrains/kotlin/blob/master/core/runtime.jvm/src/kotlin/jvm/JvmClassMapping.kt#L86\" rel=\"nofollow noreferrer\"><code>.kotlin</code> extension method</a> crashes on some of my inputs). What's the correct Kotlin way to perform this kind of check?</p>\n\n<hr>\n\n<p><strong>Edit:</strong> Further investigation (prompted by @voddan's answer) has revealed that this problem is a symptom of a more general bit of weirdness in Kotlin's type reflection:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    // ::class.java of Kotlin's own Double type is just double\n    println(Double::class)                            // -&gt; class kotlin.Double\n    println(Double::class.java)                       // -&gt; double\n\n    // But starting from Java's nullable java.lang.Double gives an entirely different result\n    println(java.lang.Double::class)                  // -&gt; class kotlin.Double\n    println(java.lang.Double::class.java)             // -&gt; class java.lang.Double\n    println(java.lang.Double::class.java.kotlin)      // -&gt; class kotlin.Double\n    println(java.lang.Double::class.java.kotlin.java) // -&gt; class java.lang.Double\n\n    // Suggested by @mfulton26; works.\n    println(Class.forName(\"java.lang.Double\"))        // -&gt; class java.lang.Double\n}\n</code></pre>\n\n<p>So it seems not all <code>class kotlin.Double</code>s are created equal. I've played with casts and aux variables and the results seem highly consistent.</p>\n"}, {"tags": ["java", "hibernate", "gradle", "spring-boot", "kotlin"], "comments": [{"owner": {"reputation": 483, "user_id": 5381825, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/shF6d.jpg?s=128&g=1", "display_name": "dzrkot", "link": "https://stackoverflow.com/users/5381825/dzrkot"}, "edited": false, "score": 0, "creation_date": 1481899948, "post_id": 41171653, "comment_id": 69573655, "body": "why did you mark TransactionTest as a @Component?"}, {"owner": {"reputation": 3304, "user_id": 4415079, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/y5KtV.png?s=128&g=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/4415079/dan"}, "edited": false, "score": 0, "creation_date": 1484573400, "post_id": 41171653, "comment_id": 70552163, "body": "Having the same probem, I would be interested to know why adding @Transactional causes this error."}], "answers": [{"tags": [], "owner": {"reputation": 220, "user_id": 4177643, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SwN1B2Jq_G4/AAAAAAAAAAI/AAAAAAAAAHM/JrEWI05AL8s/photo.jpg?sz=128", "display_name": "David", "link": "https://stackoverflow.com/users/4177643/david"}, "is_accepted": false, "score": 0, "last_activity_date": 1486164550, "creation_date": 1486164550, "answer_id": 42034636, "question_id": 41171653, "link": "https://stackoverflow.com/questions/41171653/spring-boot-adding-transactional-produces-java-lang-classnotfoundexception-or/42034636#42034636", "title": "Spring Boot: Adding @Transactional produces java.lang.ClassNotFoundException: org.aspectj.util.PartialOrder$PartialComparable", "body": "<p>Since i think the repository code isn't the same as the code that produced the exception i will guess, that you maybe haven't declared the class as 'open'? That is necessary because the @Transactional functionality works by using Spring AOP which needs classes that aren't internally declared as static - i.e. open in kotlin... when i remember correctly that is going to be fixed with spring framework 5.0. </p>\n\n<p>Alternatively have you tried constructor injection without the @Autowired annotation (should be working since Spring Boot 1.4) like this:</p>\n\n<pre><code>@Controller\nopen class ExampleController(var repository: ExampleEntityRepository) {\n\n}\n</code></pre>\n\n<p>btw: to annotate a controller with both of</p>\n\n<pre><code>@RestController\n@ResponseBody\n</code></pre>\n\n<p>is not necessary since @RestController will add @ResponseBody internally on its own</p>\n"}], "owner": {"reputation": 207, "user_id": 492053, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9c2ce0c663875bba2319e3978d599077?s=128&d=identicon&r=PG", "display_name": "DmitryM", "link": "https://stackoverflow.com/users/492053/dmitrym"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1692, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1486164550, "creation_date": 1481829137, "question_id": 41171653, "link": "https://stackoverflow.com/questions/41171653/spring-boot-adding-transactional-produces-java-lang-classnotfoundexception-or", "title": "Spring Boot: Adding @Transactional produces java.lang.ClassNotFoundException: org.aspectj.util.PartialOrder$PartialComparable", "body": "<p>Spring Boot 1.4.2 with Kotlin and Gradle 3.0. When we try to add @Transactional to the controller method, the resulting jar is failing to start with error:</p>\n\n<pre><code>2016-12-14 15:22:57.055 ERROR 4666 --- [           main] o.s.boot.SpringApplication               : Application startup failed\n\norg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'personService': Unsatisfied dependency expressed through field 'registrator': Error creating bean with name 'personRegistrator' defined in file [/home/voksiv/projects/svc-bereg/build/classes/main/com/beget/bereg/services/internal/person/commands/PersonRegistrator.class]: Initialization of bean failed; nested exception is java.lang.NoClassDefFoundError: org/aspectj/util/PartialOrder$PartialComparable; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'personRegistrator' defined in file [/home/voksiv/projects/svc-bereg/build/classes/main/com/beget/bereg/services/internal/person/commands/PersonRegistrator.class]: Initialization of bean failed; nested exception is java.lang.NoClassDefFoundError: org/aspectj/util/PartialOrder$PartialComparable\nat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:569) ~[spring-beans-4.3.2.RELEASE.jar:4.3.2.RELEASE]\nat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:88) ~[spring-beans-4.3.2.RELEASE.jar:4.3.2.RELEASE]\nat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:349) ~[spring-beans-4.3.2.RELEASE.jar:4.3.2.RELEASE]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1214) ~[spring-beans-4.3.2.RELEASE.jar:4.3.2.RELEASE]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:543) ~[spring-beans-4.3.2.RELEASE.jar:4.3.2.RELEASE]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:482) ~[spring-beans-4.3.2.RELEASE.jar:4.3.2.RELEASE]\nat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306) ~[spring-beans-4.3.2.RELEASE.jar:4.3.2.RELEASE]\nat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230) ~[spring-beans-4.3.2.RELEASE.jar:4.3.2.RELEASE]\nat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302) ~[spring-beans-4.3.2.RELEASE.jar:4.3.2.RELEASE]\nat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197) ~[spring-beans-4.3.2.RELEASE.jar:4.3.2.RELEASE]\nat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:776) ~[spring-beans-4.3.2.RELEASE.jar:4.3.2.RELEASE]\nat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:861) ~[spring-context-4.3.2.RELEASE.jar:4.3.2.RELEASE]\nat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:541) ~[spring-context-4.3.2.RELEASE.jar:4.3.2.RELEASE]\nat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:122) ~[spring-boot-1.4.0.RELEASE.jar:1.4.0.RELEASE]\nat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:759) [spring-boot-1.4.0.RELEASE.jar:1.4.0.RELEASE]\nat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:369) [spring-boot-1.4.0.RELEASE.jar:1.4.0.RELEASE]\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:313) [spring-boot-1.4.0.RELEASE.jar:1.4.0.RELEASE]\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:1185) [spring-boot-1.4.0.RELEASE.jar:1.4.0.RELEASE]\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:1174) [spring-boot-1.4.0.RELEASE.jar:1.4.0.RELEASE]\nat com.beget.bereg.ApplicationKt.main(Application.kt:15) [main/:na]\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_111]\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_111]\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_111]\nat java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_111]\nat com.intellij.rt.execution.application.AppMain.main(AppMain.java:147) [idea_rt.jar:na]\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'personRegistrator' defined in file [/home/voksiv/projects/svc-bereg/build/classes/main/com/beget/bereg/services/internal/person/commands/PersonRegistrator.class]: Initialization of bean failed; nested exception is java.lang.NoClassDefFoundError: org/aspectj/util/PartialOrder$PartialComparable\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:553) ~[spring-beans-4.3.2.RELEASE.jar:4.3.2.RELEASE]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:482) ~[spring-beans-4.3.2.RELEASE.jar:4.3.2.RELEASE]\nat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306) ~[spring-beans-4.3.2.RELEASE.jar:4.3.2.RELEASE]\nat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230) ~[spring-beans-4.3.2.RELEASE.jar:4.3.2.RELEASE]\nat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302) ~[spring-beans-4.3.2.RELEASE.jar:4.3.2.RELEASE]\nat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202) ~[spring-beans-4.3.2.RELEASE.jar:4.3.2.RELEASE]\nat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:207) ~[spring-beans-4.3.2.RELEASE.jar:4.3.2.RELEASE]\nat org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1214) ~[spring-beans-4.3.2.RELEASE.jar:4.3.2.RELEASE]\nat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1054) ~[spring-beans-4.3.2.RELEASE.jar:4.3.2.RELEASE]\nat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1019) ~[spring-beans-4.3.2.RELEASE.jar:4.3.2.RELEASE]\nat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:566) ~[spring-beans-4.3.2.RELEASE.jar:4.3.2.RELEASE]\n... 24 common frames omitted\nCaused by: java.lang.NoClassDefFoundError: org/aspectj/util/PartialOrder$PartialComparable\nat java.lang.ClassLoader.defineClass1(Native Method) ~[na:1.8.0_111]\nat java.lang.ClassLoader.defineClass(ClassLoader.java:763) ~[na:1.8.0_111]\nat java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142) ~[na:1.8.0_111]\nat java.net.URLClassLoader.defineClass(URLClassLoader.java:467) ~[na:1.8.0_111]\nat java.net.URLClassLoader.access$100(URLClassLoader.java:73) ~[na:1.8.0_111]\nat java.net.URLClassLoader$1.run(URLClassLoader.java:368) ~[na:1.8.0_111]\nat java.net.URLClassLoader$1.run(URLClassLoader.java:362) ~[na:1.8.0_111]\nat java.security.AccessController.doPrivileged(Native Method) ~[na:1.8.0_111]\nat java.net.URLClassLoader.findClass(URLClassLoader.java:361) ~[na:1.8.0_111]\nat java.lang.ClassLoader.loadClass(ClassLoader.java:424) ~[na:1.8.0_111]\nat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331) ~[na:1.8.0_111]\nat java.lang.ClassLoader.loadClass(ClassLoader.java:357) ~[na:1.8.0_111]\nat org.springframework.aop.aspectj.autoproxy.AspectJAwareAdvisorAutoProxyCreator.sortAdvisors(AspectJAwareAdvisorAutoProxyCreator.java:73) ~[spring-aop-4.3.2.RELEASE.jar:4.3.2.RELEASE]\nat org.springframework.aop.framework.autoproxy.AbstractAdvisorAutoProxyCreator.findEligibleAdvisors(AbstractAdvisorAutoProxyCreator.java:91) ~[spring-aop-4.3.2.RELEASE.jar:4.3.2.RELEASE]\nat org.springframework.aop.framework.autoproxy.AbstractAdvisorAutoProxyCreator.getAdvicesAndAdvisorsForBean(AbstractAdvisorAutoProxyCreator.java:69) ~[spring-aop-4.3.2.RELEASE.jar:4.3.2.RELEASE]\nat org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.wrapIfNecessary(AbstractAutoProxyCreator.java:347) ~[spring-aop-4.3.2.RELEASE.jar:4.3.2.RELEASE]\nat org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.postProcessAfterInitialization(AbstractAutoProxyCreator.java:299) ~[spring-aop-4.3.2.RELEASE.jar:4.3.2.RELEASE]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsAfterInitialization(AbstractAutowireCapableBeanFactory.java:422) ~[spring-beans-4.3.2.RELEASE.jar:4.3.2.RELEASE]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1583) ~[spring-beans-4.3.2.RELEASE.jar:4.3.2.RELEASE]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:545) ~[spring-beans-4.3.2.RELEASE.jar:4.3.2.RELEASE]\n... 34 common frames omitted\nCaused by: java.lang.ClassNotFoundException: org.aspectj.util.PartialOrder$PartialComparable\nat java.net.URLClassLoader.findClass(URLClassLoader.java:381) ~[na:1.8.0_111]\nat java.lang.ClassLoader.loadClass(ClassLoader.java:424) \n</code></pre>\n\n<p>build gradle is:</p>\n\n<pre><code>group 'templateProject'\n\nbuildscript {\n    ext {\n        kotlinVersion = '1.0.5-2'\n        springBootVersion = '1.4.2.RELEASE'\n    }\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlinVersion\"\n        classpath \"org.springframework.boot:spring-boot-gradle-plugin:$springBootVersion\"\n    }\n}\n\napply plugin: 'kotlin'\napply plugin: 'idea'\napply plugin: 'org.springframework.boot'\n\ndependencies {\n    // Kotlin\n    compile  group: 'org.jetbrains.kotlin', name: 'kotlin-stdlib', version: \"$kotlinVersion\"\n\n    // Spring\n    compile group: 'org.springframework.boot', name: 'spring-boot-starter-web', version: \"$springBootVersion\"\n    compile group: 'org.springframework.data', name: 'spring-data-jpa', version: '1.10.5.RELEASE'\n\n    // https://mvnrepository.com/artifact/mysql/mysql-connector-java\n    compile group: 'mysql', name: 'mysql-connector-java', version: '6.0.5'\n\n    // https://mvnrepository.com/artifact/com.zaxxer/HikariCP\n    compile group: 'com.zaxxer', name: 'HikariCP', version: '2.5.1'\n\n    // JPA &amp; Hibernate\n    compile group: 'org.hibernate.javax.persistence', name: 'hibernate-jpa-2.1-api', version: '1.0.0.Final'\n\n    // https://mvnrepository.com/artifact/org.hibernate/hibernate\n    compile group: 'org.hibernate', name: 'hibernate', version: '3.5.4-Final'\n\n    // https://mvnrepository.com/artifact/org.hibernate/hibernate-core\n    compile group: 'org.hibernate', name: 'hibernate-core', version: '5.2.5.Final'\n\n    // Db Flyway migrations\n    compile group: 'org.flywaydb', name: 'flyway-core', version: '4.0.3'\n    compile group: 'com.h2database', name: 'h2', version: '1.3.170'\n\n\n    testCompile group: 'org.jetbrains.kotlin', name: 'kotlin-stdlib', version: \"$kotlinVersion\"\n    testCompile group: 'junit', name: 'junit', version: '4.12'\n    testCompile group: 'org.springframework.boot', name: 'spring-boot-starter-test'\n}\n\nspringBoot {\n    mainClass = \"com.example.ApplicationKt\"\n}\n\nrepositories {\n    mavenCentral()\n}\n\nsourceSets {\n    main {\n        java {\n            srcDir 'src/main/kotlin'\n        }\n    }\n}\n</code></pre>\n\n<p>Honestly - We have no idea what to do next. gradle dependencies show that aspectjweaver exists and it has a correct version.</p>\n\n<p>After spending two days with it and making no progress, we are open to any ideas.</p>\n\n<p><a href=\"https://github.com/voksiv/kotlin-spring-boot-template\" rel=\"nofollow noreferrer\">Repo</a> if anyone interested in code.</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 6571, "user_id": 244702, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/22b3a019954e1e8a25f303a5ed555340?s=128&d=identicon&r=PG", "display_name": "Kevin Robatel", "link": "https://stackoverflow.com/users/244702/kevin-robatel"}, "edited": false, "score": 0, "creation_date": 1481816662, "post_id": 41167413, "comment_id": 69536493, "body": "What is the types in your map? The two type are <code>Serializable</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 2720, "user_id": 554491, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/4b99817e71264d9531f08de3c8f601f1?s=128&d=identicon&r=PG", "display_name": "Morpheu5", "link": "https://stackoverflow.com/users/554491/morpheu5"}, "edited": false, "score": 0, "creation_date": 1481819875, "post_id": 41168247, "comment_id": 69538582, "body": "Suppose I prefer to cast to <code>Serializable</code>, how would I know for sure that a <code>Map</code> that I declare like <code>Map&lt;Int, Double&gt;</code>, for example, and initialise with <code>mapOf()</code> is going to implement <code>Serializable</code>?"}, {"owner": {"reputation": 2720, "user_id": 554491, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/4b99817e71264d9531f08de3c8f601f1?s=128&d=identicon&r=PG", "display_name": "Morpheu5", "link": "https://stackoverflow.com/users/554491/morpheu5"}, "edited": false, "score": 3, "creation_date": 1481820342, "post_id": 41168247, "comment_id": 69538881, "body": "Ah, the documentation (<a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/map-of.html\" rel=\"nofollow noreferrer\">kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/&hellip;</a>) says that these maps are serializable. In practice, I found that it generates a LinkedHashMap. This may not be true in the future, but if the doc says that <code>mapOf()</code> produces a <code>Serializable</code>, then it may be safe to assume that it&#39;ll Just Work\u2122."}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "reply_to_user": {"reputation": 2720, "user_id": 554491, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/4b99817e71264d9531f08de3c8f601f1?s=128&d=identicon&r=PG", "display_name": "Morpheu5", "link": "https://stackoverflow.com/users/554491/morpheu5"}, "edited": false, "score": 1, "creation_date": 1481823357, "post_id": 41168247, "comment_id": 69540578, "body": "@Morpheu5 I&#39;ve updated the second option in my answer based on your comments and have also added a third option (check for <code>is Serializable</code> first and then make a copy of the map if necessary)."}, {"owner": {"reputation": 2720, "user_id": 554491, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/4b99817e71264d9531f08de3c8f601f1?s=128&d=identicon&r=PG", "display_name": "Morpheu5", "link": "https://stackoverflow.com/users/554491/morpheu5"}, "edited": false, "score": 0, "creation_date": 1481871984, "post_id": 41168247, "comment_id": 69557979, "body": "I should add that, at least in this case, I really didn&#39;t care if the map was a TreeMap, that was the toe I was using when I originally coded this in Java. Thanks for your answer."}], "tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": true, "score": 8, "last_activity_date": 1585237064, "last_edit_date": 1585237064, "creation_date": 1481817266, "answer_id": 41168247, "question_id": 41167413, "link": "https://stackoverflow.com/questions/41167413/serializable-in-kotlin/41168247#41168247", "title": "Serializable in Kotlin", "body": "<p><code>TreeMap</code> and various other <code>Map</code> implementations implement <code>Serializable</code> but the <code>Map</code> interface itself does not implement <code>Serializable</code>.</p>\n\n<p>I see some options:</p>\n\n<ol>\n<li><p>Make sure the type of <code>myHappyTreeMap</code> is not simply <code>Map</code> but <code>TreeMap</code> or some other <code>Map</code> subtype that implements <code>Serializable</code>. e.g.:</p>\n\n<pre><code>val myHappyTreeMap: TreeMap = ...\n</code></pre></li>\n<li><p>Cast your <code>Map</code> instance as <code>Serializable</code> (only recommended if you <em>know</em> the <code>Map</code> instance type implements <code>Serializable</code> otherwise you will get a <code>ClassCastException</code>). e.g.:</p>\n\n<pre><code>bundle.putSerializable(\"myHappyKey\", myHappyTreeMap as Serializable)\n</code></pre></li>\n<li><p>Check your <code>Map</code> instance and if it isn't <code>Serializable</code> then make a copy of it using a <code>Map</code> implementation that is. e.g.:</p>\n\n<pre><code>bundle.putSerializable(\"myHappyKey\", when (myHappyTreeMap) {\n    is Serializable -&gt; myHappyTreeMap\n    else -&gt; LinkedHashMap(myHappyTreeMap)\n})\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 2720, "user_id": 554491, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/4b99817e71264d9531f08de3c8f601f1?s=128&d=identicon&r=PG", "display_name": "Morpheu5", "link": "https://stackoverflow.com/users/554491/morpheu5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9350, "favorite_count": 1, "accepted_answer_id": 41168247, "answer_count": 1, "score": 7, "last_activity_date": 1585237064, "creation_date": 1481814562, "last_edit_date": 1481820476, "question_id": 41167413, "link": "https://stackoverflow.com/questions/41167413/serializable-in-kotlin", "title": "Serializable in Kotlin", "body": "<p>In my Android app, I had a <code>TreeMap</code> that I could happily put in a <code>Bundle</code> like</p>\n\n<pre><code>bundle.putSerializable(\"myHappyKey\", myHappyTreeMap);\n</code></pre>\n\n<p>but now that I'm porting my app to Kotlin, Android Studio complains that <code>Serializable!</code> is required, but it's finding a <code>Map</code> instead.</p>\n\n<p>How do I deal with this?</p>\n\n<p><strong>EDIT</strong> The warning seems to vanish if I cast my map to a <code>Serializable</code>. Is this the way?</p>\n\n<p><strong>EDIT 2</strong> I am declaring and initialising <code>myHappyTreeMap</code> as</p>\n\n<pre><code>var myHappyTreeMap: Map&lt;Int, Double&gt; = mapOf()\n</code></pre>\n\n<p>The <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/map-of.html\" rel=\"noreferrer\">documentation</a> says that maps initialised using <code>mapOf()</code> are serializable. If the docs says so\u2026</p>\n"}, {"tags": ["android", "firebase", "firebase-authentication", "kotlin"], "comments": [{"owner": {"reputation": 505, "user_id": 3968247, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/106224b896ffe00e1909b4254a8bb132?s=128&d=identicon&r=PG&f=1", "display_name": "sandeepd", "link": "https://stackoverflow.com/users/3968247/sandeepd"}, "edited": false, "score": 0, "creation_date": 1490272131, "post_id": 41166195, "comment_id": 73043985, "body": "facing the same problem. did you get any solution?"}, {"owner": {"reputation": 1581, "user_id": 2087161, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e5YGG.png?s=128&g=1", "display_name": "Felipe R. Saruhashi", "link": "https://stackoverflow.com/users/2087161/felipe-r-saruhashi"}, "reply_to_user": {"reputation": 505, "user_id": 3968247, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/106224b896ffe00e1909b4254a8bb132?s=128&d=identicon&r=PG&f=1", "display_name": "sandeepd", "link": "https://stackoverflow.com/users/3968247/sandeepd"}, "edited": false, "score": 0, "creation_date": 1490275807, "post_id": 41166195, "comment_id": 73046923, "body": "I&#39;m simply didn&#39;t used this phone for a while, than i tried again on this phone, and worked!"}], "owner": {"reputation": 1581, "user_id": 2087161, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e5YGG.png?s=128&g=1", "display_name": "Felipe R. Saruhashi", "link": "https://stackoverflow.com/users/2087161/felipe-r-saruhashi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 133, "favorite_count": 1, "answer_count": 0, "score": 5, "last_activity_date": 1481872742, "creation_date": 1481810903, "last_edit_date": 1481872742, "question_id": 41166195, "link": "https://stackoverflow.com/questions/41166195/android-with-date-time-change-but-put-on-time-again-firebase-just-return-expir", "title": "Android with date time change, but put on time again, Firebase just return expired token", "body": "<p>I was doing some tests on my app, changing the mobile current date to the future. Like 2, 4, 7, 10 days forward. Then I put the mobile on the current date again.</p>\n\n<p>I'm using Firebase to authenticate, but for now on, it's only return expired token. I already tried to reboot the mobile, reinstall the app, and the issue persist.</p>\n\n<p>On others phones works correctly, which I didn't changed the date.</p>\n\n<p>PS: The issue happens on a Sansung S5.</p>\n\n<p>This is how I'm getting the token, and everytime I make a request to my server I'm getting the token again. By the way, I'm using Firebase web custom token.</p>\n\n<pre><code>        var mUser: FirebaseUser? = FirebaseAuth.getInstance().currentUser\n\n        mUser?.getToken(true)\n        ?.addOnCompleteListener { it -&gt;\n            it.result.token\n\n        }\n</code></pre>\n"}, {"tags": ["lambda", "kotlin", "bytecode"], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 4, "last_activity_date": 1481807421, "creation_date": 1481807421, "answer_id": 41165014, "question_id": 41164487, "link": "https://stackoverflow.com/questions/41164487/kotlin-generates-inner-class-for-lambda/41165014#41165014", "title": "Kotlin generates inner class for lambda", "body": "<p>A lambda is compiled to a static method if it doesn't reference anything from the surrounding context. </p>\n\n<p>In your example, you're referencing <code>presenter</code>, which is an instance field of the activity class. In order to capture that reference in the <code>onClick</code> handler, it's necessary to create an instance of a new class (in this case, Kotlin captures the reference to the activity class and accesses the presenter through its property).</p>\n\n<p>There is no way to avoid creating an extra class here, either with Kotlin or with plain Java.</p>\n"}], "owner": {"reputation": 3925, "user_id": 3806331, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ab7f221d4245947fd3260c364ffd0645?s=128&d=identicon&r=PG&f=1", "display_name": "johnny_crq", "link": "https://stackoverflow.com/users/3806331/johnny-crq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 390, "favorite_count": 0, "accepted_answer_id": 41165014, "answer_count": 1, "score": 4, "last_activity_date": 1481945451, "creation_date": 1481805791, "last_edit_date": 1481945451, "question_id": 41164487, "link": "https://stackoverflow.com/questions/41164487/kotlin-generates-inner-class-for-lambda", "title": "Kotlin generates inner class for lambda", "body": "<p>In my code, i have something like this:</p>\n\n<pre><code>override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        presenter.onCreate()\n\n        fabContainer.onClick {\n            presenter.onLoginButtonClicked(...)\n        }\n    }\n</code></pre>\n\n<p>When i decompile the apk and check byteCode, something like this appears:</p>\n\n<pre><code>protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        this.presenter.onCreate();\n        Sdk23ListenersKt.onClick((ProgressFloatingActionButton) _$_findCachedViewById(com.prozis.prozisgo.prozisgo.R.id.fabContainer), new ActAuthLogin$onCreate$1(this));\n    }\n\nfinal class ActAuthLogin$onCreate$1 extends Lambda implements Function1&lt;View, Unit&gt; {\n    final /* synthetic */ ActAuthLogin this$0;\n\n    ActAuthLogin$onCreate$1(ActAuthLogin actAuthLogin) {\n        this.this$0 = actAuthLogin;\n        super(1);\n    }\n\n    public final void invoke(View it) {\n        this.this$0.getPresenter().onLoginButtonClicked(StringsKt__StringsKt.trim(((EditText) this.this$0._$_findCachedViewById(R.id.email)).getText()).toString(), StringsKt__StringsKt.trim(((EditText) this.this$0._$_findCachedViewById(R.id.password)).getText()).toString(), ((CheckBox) this.this$0._$_findCachedViewById(R.id.rememberEmail)).isChecked());\n    }\n}\n</code></pre>\n\n<p>Why is this class created and how can i avoid it? Is this normal Kotlin byte code, i tought lambdas were resolved to static methods inside the class they were called in.</p>\n"}, {"tags": ["kotlin", "kotlin-null-safety"], "comments": [{"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 1, "creation_date": 1481801677, "post_id": 41162797, "comment_id": 69526900, "body": "Could you please edit your title to better reflect your question? Having many questions called <code>How to write this code in a Kotlin way?</code> doesn&#39;t really make it easy to look up later."}, {"owner": {"reputation": 5953, "user_id": 928315, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/af1172fff8fd14a3152231fc8186c205?s=128&d=identicon&r=PG", "display_name": "iForests", "link": "https://stackoverflow.com/users/928315/iforests"}, "reply_to_user": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 0, "creation_date": 1481805326, "post_id": 41162797, "comment_id": 69529005, "body": "@marstran Yes sure. Do you have any suggestions about the title? I cannot find a good way to explain my problem. Thanks."}, {"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 0, "creation_date": 1481805499, "post_id": 41162797, "comment_id": 69529110, "body": "Something like <code>How to idiomatically test for non-null, non-empty strings in Kotlin?</code> maybe? Basically something that describes the actual question."}, {"owner": {"reputation": 13314, "user_id": 1760984, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IcBXx.jpg?s=128&g=1", "display_name": "aldok", "link": "https://stackoverflow.com/users/1760984/aldok"}, "edited": false, "score": 0, "creation_date": 1577040369, "post_id": 41162797, "comment_id": 105076854, "body": "Since Kotlin 1.3, isNullOrEmpty and orEmpty are available on collections, maps, and array of objects. Not just on CharSequence. (<a href=\"https://kotlinlang.org/docs/reference/whatsnew13.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/whatsnew13.html</a>)"}], "answers": [{"comments": [{"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 4, "creation_date": 1481807819, "post_id": 41162825, "comment_id": 69530529, "body": "I would add that <code>if (s != null &amp;&amp; s.isNotEmpty()) { ... }</code> <i>is</i> idiomatic Kotlin for this scenario if you want to proceed to actually use <code>s</code> as non-null using smart cast."}, {"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 4, "creation_date": 1481811363, "post_id": 41162825, "comment_id": 69533014, "body": "The question is not silly at all. Another possible form would be <code>if (s?.isNotEmpty() == true) {}</code>"}, {"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "reply_to_user": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1481827761, "post_id": 41162825, "comment_id": 69542801, "body": "@mfulton26 note that <code>s</code> was declared as <code>var</code> in which case <code>if (s != null &amp;&amp; s.isNotEmpty()) </code> will not compile nor will it result in smart cast."}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1481831762, "post_id": 41162825, "comment_id": 69544954, "body": "So it was. I did not notice that before. Thank you @miensol."}, {"owner": {"reputation": 14274, "user_id": 2621917, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2ecd16dbe555b9596651e94668f71466?s=128&d=identicon&r=PG", "display_name": "Michael Piefel", "link": "https://stackoverflow.com/users/2621917/michael-piefel"}, "edited": false, "score": 1, "creation_date": 1490772519, "post_id": 41162825, "comment_id": 73256070, "body": "@miensol I notice that I get a smart cast very well even for a <code>var</code>. As long as it\u2019s a local variable, it cannot have changed in between. Has Kotlin gotten smarter about this in the meantime?"}, {"owner": {"reputation": 13935, "user_id": 11015, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zKg6n.jpg?s=128&g=1", "display_name": "miguel", "link": "https://stackoverflow.com/users/11015/miguel"}, "edited": false, "score": 0, "creation_date": 1498680591, "post_id": 41162825, "comment_id": 76603886, "body": "This kind of thing only works because isNulOrEmpty is an extension function which means you can call it on null, since under the hood it gets converted to a jvm static method call with null passed in.  In my opinion this is confusing because you have to keep track of which calls are extension functions and which calls are member functions."}, {"owner": {"reputation": 3664, "user_id": 1771055, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e72db016ef8a0d3cd83cf132964456c3?s=128&d=identicon&r=PG", "display_name": "rozina", "link": "https://stackoverflow.com/users/1771055/rozina"}, "reply_to_user": {"reputation": 13935, "user_id": 11015, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zKg6n.jpg?s=128&g=1", "display_name": "miguel", "link": "https://stackoverflow.com/users/11015/miguel"}, "edited": false, "score": 1, "creation_date": 1499167718, "post_id": 41162825, "comment_id": 76786296, "body": "@miguel Why do you have to keep track of that? If it was a member the code would not compile on a nullable type. No confusion imo."}, {"owner": {"reputation": 22949, "user_id": 6998684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqR2Z.jpg?s=128&g=1", "display_name": "IgorGanapolsky", "link": "https://stackoverflow.com/users/6998684/igorganapolsky"}, "edited": false, "score": 0, "creation_date": 1584295488, "post_id": 41162825, "comment_id": 107386743, "body": "It doesn&#39;t work with Android SharedPrefs comparison."}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 42, "last_activity_date": 1523952993, "last_edit_date": 1523952993, "creation_date": 1481800615, "answer_id": 41162825, "question_id": 41162797, "link": "https://stackoverflow.com/questions/41162797/how-to-idiomatically-test-for-non-null-non-empty-strings-in-kotlin/41162825#41162825", "title": "How to idiomatically test for non-null, non-empty strings in Kotlin?", "body": "<p>You can use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/is-null-or-empty.html\" rel=\"noreferrer\"><code>isNullOrEmpty</code></a> or its friend <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/is-null-or-blank.html\" rel=\"noreferrer\"><code>isNullOrBlank</code></a> like so:</p>\n\n<pre><code>if(!s.isNullOrEmpty()){\n    // s is not empty\n}\n</code></pre>\n\n<p>Both <code>isNullOrEmpty</code> and <code>isNullOrBlank</code> are extension methods on <code>CharSequence?</code> thus you can use them safely with <code>null</code>. Alternatively turn <code>null</code> into false like so:</p>\n\n<pre><code>if(s?.isNotEmpty() ?: false){\n    // s is not empty\n}\n</code></pre>\n\n<p>you can also do the following </p>\n\n<pre><code>if(s?.isNotEmpty() == true){ \n    // s is not empty\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1547, "user_id": 1020871, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2af0b561054a608a7f1877deaeb3f748?s=128&d=identicon&r=PG", "display_name": "Love", "link": "https://stackoverflow.com/users/1020871/love"}, "edited": false, "score": 2, "creation_date": 1491133662, "post_id": 43087051, "comment_id": 73409877, "body": "The suggestion by @Kirill Rakhman will also produce a smart cast: <code>if (s?.isNotEmpty() == true) {}</code>"}, {"owner": {"reputation": 14274, "user_id": 2621917, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2ecd16dbe555b9596651e94668f71466?s=128&d=identicon&r=PG", "display_name": "Michael Piefel", "link": "https://stackoverflow.com/users/2621917/michael-piefel"}, "reply_to_user": {"reputation": 1547, "user_id": 1020871, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2af0b561054a608a7f1877deaeb3f748?s=128&d=identicon&r=PG", "display_name": "Love", "link": "https://stackoverflow.com/users/1020871/love"}, "edited": false, "score": 1, "creation_date": 1491218635, "post_id": 43087051, "comment_id": 73439375, "body": "That\u2019s true. It\u2019s a matter of personal preference here. When I see the suspicious <code>== true</code> part I immediately think that it could be removed, which it cannot in this case. You save 4 characters, but for me it\u2019s less readable."}, {"owner": {"reputation": 14274, "user_id": 2621917, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2ecd16dbe555b9596651e94668f71466?s=128&d=identicon&r=PG", "display_name": "Michael Piefel", "link": "https://stackoverflow.com/users/2621917/michael-piefel"}, "reply_to_user": {"reputation": 1547, "user_id": 1020871, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2af0b561054a608a7f1877deaeb3f748?s=128&d=identicon&r=PG", "display_name": "Love", "link": "https://stackoverflow.com/users/1020871/love"}, "edited": false, "score": 3, "creation_date": 1584358197, "post_id": 43087051, "comment_id": 107403755, "body": "Note that my answer is outdated. <code>!s.isNullOrEmpty()</code> will perform a smart cast."}], "tags": [], "owner": {"reputation": 14274, "user_id": 2621917, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2ecd16dbe555b9596651e94668f71466?s=128&d=identicon&r=PG", "display_name": "Michael Piefel", "link": "https://stackoverflow.com/users/2621917/michael-piefel"}, "is_accepted": false, "score": 4, "last_activity_date": 1490772425, "creation_date": 1490772425, "answer_id": 43087051, "question_id": 41162797, "link": "https://stackoverflow.com/questions/41162797/how-to-idiomatically-test-for-non-null-non-empty-strings-in-kotlin/43087051#43087051", "title": "How to idiomatically test for non-null, non-empty strings in Kotlin?", "body": "<p>Although I like the answer by @miensol very much, my answer would be (and that is why I do not put it in a comment): <code>if (s != null &amp;&amp; s.isNotEmpty()) { \u2026 }</code> actually <em>is</em> the idiomatic way in Kotlin. Only this way will you get a smart cast to <code>String</code> inside the block, while with the way in the accepted answer you will have to use <code>s!!</code> inside the block.</p>\n"}, {"comments": [{"owner": {"reputation": 22949, "user_id": 6998684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqR2Z.jpg?s=128&g=1", "display_name": "IgorGanapolsky", "link": "https://stackoverflow.com/users/6998684/igorganapolsky"}, "edited": false, "score": 1, "creation_date": 1584295573, "post_id": 49158609, "comment_id": 107386771, "body": "Isn&#39;t something similar offered in Kotlin lang?"}], "tags": [], "owner": {"reputation": 992, "user_id": 1076887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a62932c4f50bc65c09d8d10d18056a2f?s=128&d=identicon&r=PG", "display_name": "mt.uulu", "link": "https://stackoverflow.com/users/1076887/mt-uulu"}, "is_accepted": false, "score": 1, "last_activity_date": 1520446150, "creation_date": 1520446150, "answer_id": 49158609, "question_id": 41162797, "link": "https://stackoverflow.com/questions/41162797/how-to-idiomatically-test-for-non-null-non-empty-strings-in-kotlin/49158609#49158609", "title": "How to idiomatically test for non-null, non-empty strings in Kotlin?", "body": "<p>or create an extension method and use it as a safe call: </p>\n\n<pre><code>fun String?.emptyToNull(): String? {\n    return if (this == null || this.isEmpty()) null else this\n}\n\nfun main(args: Array&lt;String&gt;) {\n    val str1:String?=\"\"\n    val str2:String?=null\n    val str3:String?=\"not empty &amp; not null\"\n\n    println(str1.emptyToNull()?:\"empty string\")\n    println(str2.emptyToNull()?:\"null string\")\n    println(str3.emptyToNull()?:\"will not print\")\n}\n</code></pre>\n"}], "owner": {"reputation": 5953, "user_id": 928315, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/af1172fff8fd14a3152231fc8186c205?s=128&d=identicon&r=PG", "display_name": "iForests", "link": "https://stackoverflow.com/users/928315/iforests"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11365, "favorite_count": 3, "accepted_answer_id": 41162825, "answer_count": 3, "score": 28, "last_activity_date": 1579618456, "creation_date": 1481800524, "last_edit_date": 1579618456, "question_id": 41162797, "link": "https://stackoverflow.com/questions/41162797/how-to-idiomatically-test-for-non-null-non-empty-strings-in-kotlin", "title": "How to idiomatically test for non-null, non-empty strings in Kotlin?", "body": "<p>I am new to Kotlin, and I am looking for help in rewriting the following code to be more elegant.</p>\n\n<pre><code>var s: String? = \"abc\"\nif (s != null &amp;&amp; s.isNotEmpty()) {\n    // Do something\n}\n</code></pre>\n\n<p>If I use the following code:</p>\n\n<pre><code>if (s?.isNotEmpty()) {\n</code></pre>\n\n<p>The compiler will complain that</p>\n\n<pre><code>Required: Boolean\nFound: Boolean?\n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1481793624, "post_id": 41158348, "comment_id": 69521822, "body": "Your first snipped must not have compiled, since it is an impossible code in Kotlin (<code>val date</code> is not always initialised). Please correct it or make it more specific"}, {"owner": {"reputation": 5953, "user_id": 928315, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/af1172fff8fd14a3152231fc8186c205?s=128&d=identicon&r=PG", "display_name": "iForests", "link": "https://stackoverflow.com/users/928315/iforests"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1481794058, "post_id": 41158348, "comment_id": 69522113, "body": "I&#39;m sure it&#39;s compilable (at least it works in Android Studio with Kotlin 1.0.5-2)."}, {"owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1481794976, "post_id": 41158348, "comment_id": 69522729, "body": "@voddan It&#39;s perfectly possible to declare but not initialize a <code>val</code>. The only point where compilation errors may occur is accessing it before it is assigned, and trying to assign it more than once. <a href=\"https://kotlinlang.org/docs/reference/basic-syntax.html#defining-local-variables\" rel=\"nofollow noreferrer\">Defining local variables</a>."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1481827273, "post_id": 41158348, "comment_id": 69542545, "body": "@iForests yes, it compiles, but given that code alone, you can&#39;t use <code>date</code> in any way. Please make the code complete. In other words, there must be an alternative assignment to <code>date</code> in case <code>ts</code> is a <code>null</code>. I am not being pedantic here ;)"}], "answers": [{"comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1481827002, "post_id": 41158391, "comment_id": 69542415, "body": "IMHO this is a very cryptic solution. It is most certainly not idiomatic."}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 5, "last_activity_date": 1481796885, "last_edit_date": 1481796885, "creation_date": 1481785887, "answer_id": 41158391, "question_id": 41158348, "link": "https://stackoverflow.com/questions/41158348/how-to-idiomatically-transform-nullable-types-in-kotlin/41158391#41158391", "title": "How to idiomatically transform nullable types in Kotlin?", "body": "<p>You can use result of <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/let.html\" rel=\"nofollow noreferrer\"><code>let</code></a> call like so:</p>\n\n<pre><code>val date = ts?.let(::Date)\n</code></pre>\n\n<p>You can find more about function references using <code>::</code> syntax in <a href=\"https://kotlinlang.org/docs/reference/reflection.html#function-references\" rel=\"nofollow noreferrer\">Kotlin documentation</a></p>\n"}, {"tags": [], "owner": {"reputation": 6473, "user_id": 2660462, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e7866e763430b8848f14ffdacb61b99f?s=128&d=identicon&r=PG", "display_name": "Lukas Lechner", "link": "https://stackoverflow.com/users/2660462/lukas-lechner"}, "is_accepted": false, "score": -1, "last_activity_date": 1481787375, "creation_date": 1481787375, "answer_id": 41158747, "question_id": 41158348, "link": "https://stackoverflow.com/questions/41158348/how-to-idiomatically-transform-nullable-types-in-kotlin/41158747#41158747", "title": "How to idiomatically transform nullable types in Kotlin?", "body": "<pre><code>val ts = 1481710060773L\nval date = Date(ts)\n</code></pre>\n\n<p>You don't need to specify <code>ts</code> as a nullable long type <code>Long?</code> if you are assigning a constant value to it. Then the type <code>Long</code> is inferred to <code>ts</code> and no null-check is necessary anymore.</p>\n"}], "owner": {"reputation": 5953, "user_id": 928315, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/af1172fff8fd14a3152231fc8186c205?s=128&d=identicon&r=PG", "display_name": "iForests", "link": "https://stackoverflow.com/users/928315/iforests"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 41158391, "answer_count": 2, "score": 5, "last_activity_date": 1481808153, "creation_date": 1481785710, "last_edit_date": 1481808153, "question_id": 41158348, "link": "https://stackoverflow.com/questions/41158348/how-to-idiomatically-transform-nullable-types-in-kotlin", "title": "How to idiomatically transform nullable types in Kotlin?", "body": "<p>I am new to Kotlin, and I am looking for advises rewriting the following code to more elegant way.</p>\n\n<pre><code>val ts: Long? = 1481710060773\n\nval date: Date?\nif (ts != null) {\n    date = Date(ts)\n}\n</code></pre>\n\n<p>I have tried <code>let</code>, but I think it is not better than the original one.</p>\n\n<pre><code>val ts: Long? = 1481710060773\n\nval date: Date?\nts?.let {\n    date = Date(ts)\n}\n</code></pre>\n\n<p>Thanks.</p>\n"}]