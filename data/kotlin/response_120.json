[{"tags": ["android", "retrofit", "kotlin", "rx-android"], "answers": [{"tags": [], "owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "is_accepted": true, "score": 4, "last_activity_date": 1493225528, "creation_date": 1493225528, "answer_id": 43640212, "question_id": 43639903, "link": "https://stackoverflow.com/questions/43639903/how-do-i-get-response-headers-with-rxandroid-retrofit-in-kotlin/43640212#43640212", "title": "How do I get response headers with RxAndroid + Retrofit in Kotlin?", "body": "<p>Change your retrofit definition to return <code>Observable&lt;Response&lt;CUSTOM_MODEL&gt;&gt;</code>. The headers can be accessed through the <code>Response</code> object and <code>CUSTOM_MODEL</code> will be available through <code>Response.body()</code>.</p>\n"}], "owner": {"reputation": 2369, "user_id": 2368378, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7c8279746f23ffb743727947864f71fd?s=128&d=identicon&r=PG", "display_name": "Tim Nuwin", "link": "https://stackoverflow.com/users/2368378/tim-nuwin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1062, "favorite_count": 2, "accepted_answer_id": 43640212, "answer_count": 1, "score": 3, "last_activity_date": 1493225528, "creation_date": 1493224446, "question_id": 43639903, "link": "https://stackoverflow.com/questions/43639903/how-do-i-get-response-headers-with-rxandroid-retrofit-in-kotlin", "title": "How do I get response headers with RxAndroid + Retrofit in Kotlin?", "body": "<p>I have an API observable returning a CUSTOM_MODEL.  I would like to get the response headers from this call too. </p>\n"}, {"tags": ["kotlin", "compiler-flags"], "answers": [{"tags": [], "owner": {"reputation": 4059, "user_id": 2026742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7ec3d92aa7bbe7b66476e9f1a227ea8e?s=128&d=identicon&r=PG", "display_name": "Micha\u0142 Z.", "link": "https://stackoverflow.com/users/2026742/micha%c5%82-z"}, "is_accepted": true, "score": 4, "last_activity_date": 1493208742, "last_edit_date": 1495542858, "creation_date": 1493208742, "answer_id": 43633878, "question_id": 43633085, "link": "https://stackoverflow.com/questions/43633085/what-is-the-difference-between-these-kotlin-compiler-flags/43633878#43633878", "title": "What is the difference between these Kotlin compiler flags?", "body": "<p>According to <a href=\"https://stackoverflow.com/users/2065811/alexey-tsvetkov\">Alexey Tsvetkov</a> <code>kotlin.compiler.incremental</code> is maven only, and it is named similar to other maven options.</p>\n"}, {"tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": false, "score": 2, "last_activity_date": 1493289162, "last_edit_date": 1493289162, "creation_date": 1493235572, "answer_id": 43643147, "question_id": 43633085, "link": "https://stackoverflow.com/questions/43633085/what-is-the-difference-between-these-kotlin-compiler-flags/43643147#43643147", "title": "What is the difference between these Kotlin compiler flags?", "body": "<p><code>kotlin.compiler.incremental</code> is a property, which can be set in a maven project to enable incremental kotlin compilation by default.</p>\n\n<p>It is set in the properties block in <code>pom.xml</code>:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;project&gt;\n    ...\n    &lt;properties&gt;\n        &lt;kotlin.compiler.incremental&gt;true&lt;/kotlin.compiler.incremental&gt;\n    &lt;/properties&gt;\n    ...\n&lt;/project&gt;\n</code></pre>\n\n<p>Or you can pass this option with the command line argument:</p>\n\n<pre><code>mvn install -Dkotlin.compiler.incremental=true\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 127, "user_id": 3075210, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P8L5W.jpg?s=128&g=1", "display_name": "kutsyk", "link": "https://stackoverflow.com/users/3075210/kutsyk"}, "is_accepted": false, "score": 1, "last_activity_date": 1493367994, "creation_date": 1493367994, "answer_id": 43675530, "question_id": 43633085, "link": "https://stackoverflow.com/questions/43633085/what-is-the-difference-between-these-kotlin-compiler-flags/43675530#43675530", "title": "What is the difference between these Kotlin compiler flags?", "body": "<p>It is all about maven build logic. Look here for more details: <a href=\"http://blog.soebes.de/blog/2016/08/12/maven-incremental-module-build/\" rel=\"nofollow noreferrer\">Maven Incremental Build</a></p>\n"}], "owner": {"reputation": 4059, "user_id": 2026742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7ec3d92aa7bbe7b66476e9f1a227ea8e?s=128&d=identicon&r=PG", "display_name": "Micha\u0142 Z.", "link": "https://stackoverflow.com/users/2026742/micha%c5%82-z"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 514, "favorite_count": 1, "accepted_answer_id": 43633878, "answer_count": 3, "score": 5, "last_activity_date": 1493367994, "creation_date": 1493206592, "question_id": 43633085, "link": "https://stackoverflow.com/questions/43633085/what-is-the-difference-between-these-kotlin-compiler-flags", "title": "What is the difference between these Kotlin compiler flags?", "body": "<p>For some time Kotlin allowed to set <code>kotlin.incremental=true</code> and since 1.1.2 there is also <code>kotlin.compiler.incremental=true</code>.</p>\n\n<p>I would like to know what is the difference between these two?</p>\n"}, {"tags": ["kotlin", "kotlin-null-safety"], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 17, "last_activity_date": 1493209469, "last_edit_date": 1493209469, "creation_date": 1493205631, "answer_id": 43632722, "question_id": 43632547, "link": "https://stackoverflow.com/questions/43632547/kotlin-let-null-safety-presumably-false-error/43632722#43632722", "title": "Kotlin .let {} null safety presumably false error", "body": "<p>This is the expected behavior. The <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/let.html\" rel=\"noreferrer\"><code>.let { ... }</code> function</a> is defined as</p>\n\n<pre><code>inline fun &lt;T, R&gt; T.let(block: (T) -&gt; R): R = block(this)\n</code></pre>\n\n<p><code>T</code> can be a nullable type, and <code>let</code> can be called on a null receiver, <code>null.let { }</code> is valid code.</p>\n\n<p>Now take a look at the two calls:</p>\n\n<ul>\n<li><p><code>bucket?.assignedVariantName.let { ... }</code>. </p>\n\n<p>Here, <code>let</code> is always called regardless of whether the receiver <code>bucket?.assignedVariantName</code> is null or not. </p>\n\n<p>There is a possible case when <code>bucket?.assignedVariantName</code> is null because <code>bucket</code> is null -- then <code>null</code> is just passed into <code>let</code>, and it is definitely not safe to use <code>bucket</code> inside the <code>let</code> block.</p>\n\n<p><sup><a href=\"https://try.kotlinlang.org/#/UserProjects/f0f56u4kt9nv49n61khp9kpc75/abhhfrp20208ut651bn5ek92n5\" rel=\"noreferrer\">(runnable example of the case)</a></sup></p></li>\n<li><p><code>bucket?.assignedVariantName?.let { ... }</code></p>\n\n<p>In this case, <code>let</code> is called only if the receiver <code>bucket?.assignedVariantName</code> is not null, requiring that <code>bucket</code> is not null and its <code>assignedVariantName</code> is not null. This requirement makes it safe to use <code>bucket</code> inside the <code>let</code> block.</p></li>\n</ul>\n"}], "owner": {"reputation": 2495, "user_id": 1164919, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e3c4e3eac743b6dcd3eb8b70a58ad7cf?s=128&d=identicon&r=PG", "display_name": "Dion Segijn", "link": "https://stackoverflow.com/users/1164919/dion-segijn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 763, "favorite_count": 0, "accepted_answer_id": 43632722, "answer_count": 1, "score": 4, "last_activity_date": 1502694274, "creation_date": 1493205132, "last_edit_date": 1502694274, "question_id": 43632547, "link": "https://stackoverflow.com/questions/43632547/kotlin-let-null-safety-presumably-false-error", "title": "Kotlin .let {} null safety presumably false error", "body": "<p>When using the <code>.let { }</code> function I noticed that when doing the following:</p>\n\n<pre><code>bucket?.assignedVariantName.let {\n        bucket?.determineVariant()  &lt;-- guarantee safety for bucket\n}\n</code></pre>\n\n<p>You have to guarantee safety for bucket in this case i.e.  <code>bucket?.</code> or <code>bucket!!</code> while null safety is already guaranteed by using <code>?.let</code> then I noticed when doing the following:</p>\n\n<pre><code>bucket?.assignedVariantName?.let { &lt;-- added safety check for property \n        bucket.determineVariant()  &lt;-- doesn't need to guarantee safety for bucket\n}\n</code></pre>\n\n<p>Whilst using let on the property of the bucket and not directly on bucket I'm wondering if this is intentionally or a bug in Kotlin plugin (in this case I encountered this in Android Studio)</p>\n\n<p>Additional info is that bucket is in this case a <code>local val</code> while assignedVariantName is a nullable var.</p>\n\n<pre><code>val bucket: T? = ...\n</code></pre>\n"}, {"tags": ["java", "android", "realm", "kotlin"], "comments": [{"owner": {"reputation": 2057, "user_id": 6439023, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-Z7XKDeTLdNw/AAAAAAAAAAI/AAAAAAAAACA/TlXVWsX_ZKc/photo.jpg?sz=128", "display_name": "Luca Nicoletti", "link": "https://stackoverflow.com/users/6439023/luca-nicoletti"}, "edited": false, "score": 0, "creation_date": 1493196506, "post_id": 43629026, "comment_id": 74306886, "body": "I know it&#39;s not a good idea, but your DbManager should be a Singleton, so you can access the same Realm across each thread you need to"}, {"owner": {"reputation": 4143, "user_id": 6882303, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ynTch.jpg?s=128&g=1", "display_name": "Jemo Mgebrishvili", "link": "https://stackoverflow.com/users/6882303/jemo-mgebrishvili"}, "reply_to_user": {"reputation": 2057, "user_id": 6439023, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-Z7XKDeTLdNw/AAAAAAAAAAI/AAAAAAAAACA/TlXVWsX_ZKc/photo.jpg?sz=128", "display_name": "Luca Nicoletti", "link": "https://stackoverflow.com/users/6439023/luca-nicoletti"}, "edited": false, "score": 0, "creation_date": 1493196754, "post_id": 43629026, "comment_id": 74307042, "body": "it is already singelton"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1493204442, "post_id": 43629026, "comment_id": 74312377, "body": "So if it were a global singleton, where would you close the Realm?"}, {"owner": {"reputation": 4143, "user_id": 6882303, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ynTch.jpg?s=128&g=1", "display_name": "Jemo Mgebrishvili", "link": "https://stackoverflow.com/users/6882303/jemo-mgebrishvili"}, "edited": false, "score": 0, "creation_date": 1493207443, "post_id": 43629026, "comment_id": 74314572, "body": "Every method call from DBManager closes realm automatically"}, {"owner": {"reputation": 19323, "user_id": 1389357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uy7DP.jpg?s=128&g=1", "display_name": "Christian Melchior", "link": "https://stackoverflow.com/users/1389357/christian-melchior"}, "edited": false, "score": 1, "creation_date": 1493223186, "post_id": 43629026, "comment_id": 74327257, "body": "You need to create a Realm instance in each of your methods. By having it in the constructor it will be created first time on whatever thread creates it, but none your methods would work if called from another thread. But be careful that you also close them again if doing that. Otherwise you will leak instances on background threads which is really bad."}], "answers": [{"comments": [{"owner": {"reputation": 4143, "user_id": 6882303, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ynTch.jpg?s=128&g=1", "display_name": "Jemo Mgebrishvili", "link": "https://stackoverflow.com/users/6882303/jemo-mgebrishvili"}, "edited": false, "score": 0, "creation_date": 1493198332, "post_id": 43629586, "comment_id": 74308176, "body": "Thanks, but there is no difference between your code and mine, except that your transaction is asyncronous"}, {"owner": {"reputation": 2057, "user_id": 6439023, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-Z7XKDeTLdNw/AAAAAAAAAAI/AAAAAAAAACA/TlXVWsX_ZKc/photo.jpg?sz=128", "display_name": "Luca Nicoletti", "link": "https://stackoverflow.com/users/6439023/luca-nicoletti"}, "reply_to_user": {"reputation": 4143, "user_id": 6882303, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ynTch.jpg?s=128&g=1", "display_name": "Jemo Mgebrishvili", "link": "https://stackoverflow.com/users/6882303/jemo-mgebrishvili"}, "edited": false, "score": 0, "creation_date": 1493198502, "post_id": 43629586, "comment_id": 74308287, "body": "Do you implicit use a new Transaction inside the realm.executeTransaction() function? P.s.: you used Java tag, but that&#39;s not java."}, {"owner": {"reputation": 4143, "user_id": 6882303, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ynTch.jpg?s=128&g=1", "display_name": "Jemo Mgebrishvili", "link": "https://stackoverflow.com/users/6882303/jemo-mgebrishvili"}, "edited": false, "score": 0, "creation_date": 1493198860, "post_id": 43629586, "comment_id": 74308522, "body": "Yes because everything is same, it is Kotlin"}, {"owner": {"reputation": 2057, "user_id": 6439023, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-Z7XKDeTLdNw/AAAAAAAAAAI/AAAAAAAAACA/TlXVWsX_ZKc/photo.jpg?sz=128", "display_name": "Luca Nicoletti", "link": "https://stackoverflow.com/users/6439023/luca-nicoletti"}, "reply_to_user": {"reputation": 4143, "user_id": 6882303, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ynTch.jpg?s=128&g=1", "display_name": "Jemo Mgebrishvili", "link": "https://stackoverflow.com/users/6882303/jemo-mgebrishvili"}, "edited": false, "score": 0, "creation_date": 1493198935, "post_id": 43629586, "comment_id": 74308573, "body": "That&#39;s strange because using a new Transaction force Realm to use a new Realm instance, which is created when the method is called. So you&#39;re not accessing the realm from another thread."}], "tags": [], "owner": {"reputation": 2057, "user_id": 6439023, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-Z7XKDeTLdNw/AAAAAAAAAAI/AAAAAAAAACA/TlXVWsX_ZKc/photo.jpg?sz=128", "display_name": "Luca Nicoletti", "link": "https://stackoverflow.com/users/6439023/luca-nicoletti"}, "is_accepted": false, "score": 0, "last_activity_date": 1493197330, "creation_date": 1493197330, "answer_id": 43629586, "question_id": 43629026, "link": "https://stackoverflow.com/questions/43629026/use-realm-across-all-threads/43629586#43629586", "title": "Use realm across all threads", "body": "<p>Change your function code as follow:</p>\n\n<pre><code> public void updateUploadingFileStatus(final String filePath, final Boolean uploaded) {\n        mRealm.executeTransactionAsync(new Realm.Transaction() {\n            @Override\n            public void execute(Realm realm) {\n                UploadModel model = getUploadModelByFilePath(filePath);\n                model.uploadedStatus = uploaded;\n            }\n        });\n    }\n</code></pre>\n\n<p>Time ago I solved this problem by using a new Transaction. I also was using a Singleton class to access the RealmDB, and was calling this function inside a response handler from network. This should work.</p>\n"}], "owner": {"reputation": 4143, "user_id": 6882303, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ynTch.jpg?s=128&g=1", "display_name": "Jemo Mgebrishvili", "link": "https://stackoverflow.com/users/6882303/jemo-mgebrishvili"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 171, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1493197330, "creation_date": 1493195977, "last_edit_date": 1493196314, "question_id": 43629026, "link": "https://stackoverflow.com/questions/43629026/use-realm-across-all-threads", "title": "Use realm across all threads", "body": "<p>I have DBManager class for CRUD operations and I want to use it across application, I know that Realm objects can only be accessed on the thread they were created and for that reason I'm unable to use My DBManager class methods inside threads and etc... </p>\n\n<p>what I want is to call updateUploadingFileStatus method declared inside DBManager, from thread which is running inside service.</p>\n\n<p>this is my DBManager class</p>\n\n<pre><code>object DbManager {\nprivate val realm: Realm by lazy { Realm.getDefaultInstance() }\n\nfun saveOrRemoveUploadFile(filePath: String, save: Boolean){\n    val model = getUploadModelByFilePath(filePath)\n    realm.executeTransaction {\n        model.markedForUpload = save\n        realm.insertOrUpdate(model)\n    }\n}\n\nfun updateUploadingFileStatus(filePath: String, uploaded: Boolean){\n    val model = getUploadModelByFilePath(filePath)\n    realm.executeTransaction {\n        model.uploadedStatus = uploaded\n    }\n}\n\nfun getFilesForUpload() : List&lt;UploadModel&gt; {\n    return realm\n            .where(UploadModel::class.java)\n            .equalTo(\"markedForUpload\",true)\n            .equalTo(\"uploadedStatus\",false)\n            .findAll()\n}\n\nfun getUploadModelByFilePath(filePath: String) : UploadModel {\n    return realm.where(UploadModel::class.java).equalTo(\"filePath\",filePath).findFirst() ?: UploadModel(filePath)\n}\n\n}\n</code></pre>\n\n<p>Calling this method from another thread throws <code>java.lang.IllegalStateException Realm access from incorrect thread.</code> How can be solved this problem? what is a good style for doing things like that?</p>\n"}, {"tags": ["kotlin", "sequences"], "answers": [{"comments": [{"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 14, "creation_date": 1493237265, "post_id": 43628985, "comment_id": 74335528, "body": "Note that in your example <code>seq</code> is not a <code>Sequence</code>, but an <code>IntRange</code>  which is <code>Iterable</code>. Nevertheless <code>drop</code> extension function is available both for <code>Sequence</code> and <code>Iterable</code>."}], "tags": [], "owner": {"reputation": 13487, "user_id": 808723, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/aa21b8db834bf46e629e6183cdc11f82?s=128&d=identicon&r=PG", "display_name": "GameScripting", "link": "https://stackoverflow.com/users/808723/gamescripting"}, "is_accepted": true, "score": 74, "last_activity_date": 1493195867, "creation_date": 1493195867, "answer_id": 43628985, "question_id": 43628984, "link": "https://stackoverflow.com/questions/43628984/kotlin-sequence-skip-first-n-entries/43628985#43628985", "title": "Kotlin sequence &quot;skip&quot; first N entries", "body": "<p>You are probably looking for the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/drop.html\" rel=\"noreferrer\">\"drop\" function</a> known for example from <a href=\"https://lodash.com/docs/4.17.4#drop\" rel=\"noreferrer\">from lodash</a>:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>val seq = 1..10\n\nseq.drop(5)\n&gt; [6, 7, 8, 9, 10]\n</code></pre>\n"}], "owner": {"reputation": 13487, "user_id": 808723, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/aa21b8db834bf46e629e6183cdc11f82?s=128&d=identicon&r=PG", "display_name": "GameScripting", "link": "https://stackoverflow.com/users/808723/gamescripting"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12635, "favorite_count": 1, "accepted_answer_id": 43628985, "answer_count": 1, "score": 49, "last_activity_date": 1493195867, "creation_date": 1493195867, "question_id": 43628984, "link": "https://stackoverflow.com/questions/43628984/kotlin-sequence-skip-first-n-entries", "title": "Kotlin sequence &quot;skip&quot; first N entries", "body": "<p>How can I \"skip\" the first N entries of a kotlin sequence/list?</p>\n\n<p>I am looking for the kotlin equivalent of <a href=\"https://msdn.microsoft.com/en-us/library/bb358985(v=vs.110).aspx\" rel=\"noreferrer\">C# LINQ \"skip\"</a>.</p>\n"}, {"tags": ["android", "android-contentprovider", "kotlin", "android-contentresolver", "anko"], "answers": [{"tags": [], "owner": {"reputation": 3863, "user_id": 1272303, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/VxLmR.png?s=128&g=1", "display_name": "MohammadReza", "link": "https://stackoverflow.com/users/1272303/mohammadreza"}, "is_accepted": false, "score": 0, "last_activity_date": 1493194294, "creation_date": 1493194294, "answer_id": 43628446, "question_id": 43628445, "link": "https://stackoverflow.com/questions/43628445/anko-content-provider-doesnt-update-data-on-change/43628446#43628446", "title": "Anko + Content Provider, Doesn&#39;t update data on change", "body": "<p>It took my day to figure out that using the <strong>Anko's Parser</strong> that maps a cursor into an object was the issue:</p>\n\n<pre><code>fun &lt;T: Any&gt; Cursor.parseList(parser: RowParser&lt;T&gt;): List&lt;T&gt; = AnkoInternals.useCursor(this) {\nval list = ArrayList&lt;T&gt;(count)\nmoveToFirst()\nwhile (!isAfterLast) {\n    list.add(parser.parseRow(readColumnsArray(this)))\n    moveToNext()\n}\nreturn list\n</code></pre>\n\n<p>}</p>\n\n<p>Long story short: when the user clicks on the <strong>Recyclerview</strong> item, I'd use the cursor from the adapter and moved it to current position then I tried to map the cursor to my model using:</p>\n\n<pre><code>val cursor = mAdapter?.cursor\n    cursor?.moveToPosition(it)\n    Observable.defer {\n      val uploadingItem = cursor?.parseList(UploadParser())\n      if (uploadingItem == null) {\n        Exceptions.propagate(IllegalArgumentException())\n      }\n      Observable.just(UploadInfoArgs.parseUploading(uploadingItem?.get(it)!!))\n    }.subscribeOn(Schedulers.immediate()).observeOn(AndroidSchedulers.mainThread())\n</code></pre>\n\n<p>which the line <strong>cursor?.parseList(UploadParser())</strong> was the issue that my list wouldn't get updated after changes!</p>\n"}], "owner": {"reputation": 3863, "user_id": 1272303, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/VxLmR.png?s=128&g=1", "display_name": "MohammadReza", "link": "https://stackoverflow.com/users/1272303/mohammadreza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 223, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493194294, "creation_date": 1493194294, "question_id": 43628445, "link": "https://stackoverflow.com/questions/43628445/anko-content-provider-doesnt-update-data-on-change", "title": "Anko + Content Provider, Doesn&#39;t update data on change", "body": "<p>I had this weird issue where I used <strong>Anko</strong> and Android's content provider together, I implemented my fragment using <code>LoaderCallbacks&lt;Cursor&gt;</code> and at the first time data got loaded and my <code>fun onLoadFinished(loader: Loader&lt;Cursor&gt;?, data: Cursor?) {}</code> got called and data loaded into the <strong>RecyclerView</strong>, But when I tried to update the record everything was OK until the point that the onLoadFinished() was not called!</p>\n"}, {"tags": ["android", "kotlin", "android-runonuithread"], "answers": [{"tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 26, "last_activity_date": 1493143433, "creation_date": 1493143433, "answer_id": 43617953, "question_id": 43617361, "link": "https://stackoverflow.com/questions/43617361/runonuithread-is-not-calling/43617953#43617953", "title": "runOnUiThread is not calling", "body": "<p>What you are doing is passing in a lambda to the <code>runOnUiThread</code> function. It will run that lambda, and create an <code>object</code> that inherits from <code>Runnable</code>, and then do nothing with it. Maybe you can see that a little bit better if you format it like this (added some extra log statements and explanation):</p>\n\n<pre><code>runOnUiThread({\n    Log.i(TAG, \"This is run\")\n    object : Runnable {                    // This whole expression\n        override fun run() {               // returns an object which\n            Log.i(TAG, \"runOnUiThread\")    // is a Runnable, but does\n        }                                  // not at any point invoke\n    }                                      // its \"run\" method\n    Log.i(TAG, \"And so is this\")\n})\n</code></pre>\n\n<p>The created <code>object</code> is not assigned to a variable, and is never used. If you want to pass in a <code>Runnable</code> instance to the <code>runOnUiThread</code> method, you can do that by just putting it inside the parentheses of the <code>runOnUiThread</code> call:</p>\n\n<pre><code>runOnUiThread(\n        object : Runnable {\n            override fun run() {\n                Log.i(TAG, \"runOnUiThread\")\n            }\n        }\n)\n</code></pre>\n\n<p>The simplest way to use runOnUiThread though is to pass in a lambda to it using SAM conversion, and writing the code you want to execute directly inside that.</p>\n\n<pre><code>runOnUiThread { \n    Log.i(TAG, \"runOnUiThread\") \n}\n</code></pre>\n\n<p>Here's the <a href=\"https://kotlinlang.org/docs/reference/java-interop.html#sam-conversions\" rel=\"noreferrer\">official documentation covering SAM conversions</a>, which happens to use <code>Runnable</code> in its examples.</p>\n"}, {"tags": [], "owner": {"reputation": 4869, "user_id": 6151924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d32a9252d2034b93b3eb8f743512104?s=128&d=identicon&r=PG&f=1", "display_name": "RobCo", "link": "https://stackoverflow.com/users/6151924/robco"}, "is_accepted": false, "score": 1, "last_activity_date": 1493160385, "creation_date": 1493160385, "answer_id": 43622203, "question_id": 43617361, "link": "https://stackoverflow.com/questions/43617361/runonuithread-is-not-calling/43622203#43622203", "title": "runOnUiThread is not calling", "body": "<p>The above answer is correct and should be accepted.<br>\nIn case your are coming from Java, here is an example of the equivalent Java of your code:</p>\n\n<pre><code>    runOnUiThread(new Runnable() { // This runnable is created\n        @Override                  // from lambda by SAM convention\n        public void run() {\n\n            new Runnable() {       // This Runnable is instantiated\n                @Override          // inside the lambda but never runs.\n                public void run() {\n                    Log.i(TAG, \"runOnUiThread\");\n                }\n            };\n        }\n    });\n</code></pre>\n\n<p>I hope you can see how the inner code doesn't get executed.</p>\n"}, {"tags": [], "owner": {"reputation": 354, "user_id": 8399393, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7q2qq.jpg?s=128&g=1", "display_name": "hamid keyhani", "link": "https://stackoverflow.com/users/8399393/hamid-keyhani"}, "is_accepted": false, "score": 0, "last_activity_date": 1587813020, "last_edit_date": 1587813020, "creation_date": 1585079813, "answer_id": 60838392, "question_id": 43617361, "link": "https://stackoverflow.com/questions/43617361/runonuithread-is-not-calling/60838392#60838392", "title": "runOnUiThread is not calling", "body": "<p>Rx based Answer:</p>\n\n<pre><code>import rx.Observable\n\nObservable.just(true)\n          .observeOn(AndroidSchedulers.mainThread())\n          .subscribe{\n              // your code\n           }\n</code></pre>\n"}], "owner": {"reputation": 922, "user_id": 7124362, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/663c7ea155af997408dbe0a6a8914b52?s=128&d=identicon&r=PG&f=1", "display_name": "Ankur Khandelwal", "link": "https://stackoverflow.com/users/7124362/ankur-khandelwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23210, "favorite_count": 0, "accepted_answer_id": 43617953, "answer_count": 3, "score": 10, "last_activity_date": 1587813020, "creation_date": 1493141516, "question_id": 43617361, "link": "https://stackoverflow.com/questions/43617361/runonuithread-is-not-calling", "title": "runOnUiThread is not calling", "body": "<pre><code>localChatManager.addIncomingListener { from, message, chat -&gt;\n\n                Log.v(TAG,\"listener\")\n\n\n                //You can't modify views from non-UI thread.\n                this@chatActivity.runOnUiThread { object :Runnable{\n                    override fun run() {\n                        Log.i(TAG,\"runOnUiThread\")\n                     }\n                } }\n            }\n</code></pre>\n\n<p>I am not able to figure out why runOnUiThread is not working but outside of that method everything is working as usual.</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 1, "creation_date": 1493132634, "post_id": 43614291, "comment_id": 74277712, "body": "<code>associateTo</code>/<code>associateBy</code> are your friends."}], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 7516022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92f342ce81c97d4c0887e5f9625e0ce0?s=128&d=identicon&r=PG&f=1", "display_name": "lawkai", "link": "https://stackoverflow.com/users/7516022/lawkai"}, "edited": false, "score": 0, "creation_date": 1493134397, "post_id": 43614691, "comment_id": 74279046, "body": "Thanks @hotkey! This definitely works!  Now I wonder if we can have a simpler solution if we use associateTo/associateBy @Oliver Charlesworth mentioned."}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 115, "user_id": 7516022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92f342ce81c97d4c0887e5f9625e0ce0?s=128&d=identicon&r=PG&f=1", "display_name": "lawkai", "link": "https://stackoverflow.com/users/7516022/lawkai"}, "edited": false, "score": 0, "creation_date": 1493134675, "post_id": 43614691, "comment_id": 74279255, "body": "@lawkai, I doubt it. The <code>associate*</code> functions can only transform a sequence of items into a map where each entry is somehow produced from one of the items. At least, I see no simple solution using <code>associate*</code> that would do the same. @OliverCharlesworth, could you please elaborate on that?"}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1493138317, "post_id": 43614691, "comment_id": 74281736, "body": "I misunderstood the OP&#39;s intent - <code>associate*</code> methods are unlikely to be helpful here :/"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 9, "last_activity_date": 1493140112, "last_edit_date": 1493140112, "creation_date": 1493133389, "answer_id": 43614691, "question_id": 43614291, "link": "https://stackoverflow.com/questions/43614291/how-to-create-a-map-from-a-list-with-and-inner-list-using-kotlin/43614691#43614691", "title": "How to create a Map from a List with and inner list using Kotlin", "body": "<p>Given that you have <code>orders: List&lt;Order&gt;</code>, you can first <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/flat-map.html\" rel=\"noreferrer\"><code>flatMap</code></a> the orders into pairs of <code>Order</code> and item name (so that each <code>Order</code> can occur multiple times if it has more than one <code>Item</code>), and then group these pairs by the item name using <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/group-by.html\" rel=\"noreferrer\"><code>groupBy</code></a>, taking the orders from the pairs into the groups:</p>\n\n<pre><code>val result = orders\n        .flatMap { o -&gt; o.items.map { i -&gt; o to i.name } }\n        .groupBy({ (_, name) -&gt; name }, valueTransform = { (o, _) -&gt; o })\n</code></pre>\n\n<p><sup>In the <code>groupBy</code> arguments, <code>{ (_, name) -&gt; name }</code> is the grouping key selector function that takes the name from each pair, and <code>{ (o, _) -&gt; o }</code> transforms the items when collecting them to the lists, it takes the order from the pair.</sup></p>\n\n<p><a href=\"https://try.kotlinlang.org/#/UserProjects/cgfgl02bk2ptseu4r82ln8obh5/go30h3pacg3ptm2v2gmhld4s6r\" rel=\"noreferrer\">(runnable demo of this code)</a></p>\n\n<p>If you want to eliminate multiple occurences of the same <code>Order</code> in case it contains a single <code>Item</code> multiple times, use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/distinct.html\" rel=\"noreferrer\"><code>distinct</code></a> as follows: <code>.flatMap { o -&gt; o.items.distinct().map { i -&gt; ... } }</code></p>\n"}], "owner": {"reputation": 115, "user_id": 7516022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92f342ce81c97d4c0887e5f9625e0ce0?s=128&d=identicon&r=PG&f=1", "display_name": "lawkai", "link": "https://stackoverflow.com/users/7516022/lawkai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2323, "favorite_count": 0, "accepted_answer_id": 43614691, "answer_count": 1, "score": 10, "last_activity_date": 1493140112, "creation_date": 1493132365, "question_id": 43614291, "link": "https://stackoverflow.com/questions/43614291/how-to-create-a-map-from-a-list-with-and-inner-list-using-kotlin", "title": "How to create a Map from a List with and inner list using Kotlin", "body": "<p>so I have data classes like this:</p>\n\n<pre><code>data class Item(val name: String)\ndata class Order(val id: Int, val items: List&lt;Item&gt;)\n</code></pre>\n\n<p>and I have a list of Orders.</p>\n\n<p>my question is, how can I create a map with Item name as key and list of Orders with that item as value using Kotlin's collections API?</p>\n"}, {"tags": ["gradle", "kotlin"], "comments": [{"owner": {"reputation": 18103, "user_id": 191367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/u8CLU.png?s=128&g=1", "display_name": "KeatsPeeks", "link": "https://stackoverflow.com/users/191367/keatspeeks"}, "edited": false, "score": 0, "creation_date": 1493118437, "post_id": 43606380, "comment_id": 74266587, "body": "just <code>cat hs_err_pid8.log</code> in your build script ?"}], "answers": [{"comments": [{"owner": {"reputation": 6552, "user_id": 183133, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/318e718ec9296ec9ffab5824c5c4f668?s=128&d=identicon&r=PG", "display_name": "Rohan Prabhu", "link": "https://stackoverflow.com/users/183133/rohan-prabhu"}, "edited": false, "score": 0, "creation_date": 1493735793, "post_id": 43720644, "comment_id": 74524214, "body": "Sorry, I should have updated the question with the answer. The actual problem was that this was a multi-project project, and one of the subprojects was using kotlin 1.1.1, while the main project was using 1.1.2. So your answers also spot on!"}], "tags": [], "owner": {"reputation": 26445, "user_id": 608820, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/aGmg7.jpg?s=128&g=1", "display_name": "Augusto", "link": "https://stackoverflow.com/users/608820/augusto"}, "is_accepted": true, "score": 4, "last_activity_date": 1493648462, "creation_date": 1493648462, "answer_id": 43720644, "question_id": 43606380, "link": "https://stackoverflow.com/questions/43606380/kotlin-builds-causing-jvm-to-segmentation-fault/43720644#43720644", "title": "Kotlin builds causing JVM to segmentation fault", "body": "<p>I put my money in a messed classpath. You have in there 2 versions of the Kotlin stdlib (1.1.1 and 1.1-M2) and also kotlin-annotation-processing 1.1.0.</p>\n\n<p>Ensure everything is on 1.1.1 (or 1.1.2-2 nowadays)</p>\n"}], "owner": {"reputation": 6552, "user_id": 183133, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/318e718ec9296ec9ffab5824c5c4f668?s=128&d=identicon&r=PG", "display_name": "Rohan Prabhu", "link": "https://stackoverflow.com/users/183133/rohan-prabhu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2766, "favorite_count": 1, "accepted_answer_id": 43720644, "answer_count": 1, "score": 2, "last_activity_date": 1493648462, "creation_date": 1493111657, "last_edit_date": 1493124059, "question_id": 43606380, "link": "https://stackoverflow.com/questions/43606380/kotlin-builds-causing-jvm-to-segmentation-fault", "title": "Kotlin builds causing JVM to segmentation fault", "body": "<p>I have a Kotlin+Java project which we are building using Gradle. This is the command I am using:</p>\n\n<pre><code>./gradlew \"-Pkotlin.incremental=false\" --info clean build javadoc\n</code></pre>\n\n<p>Also, my <code>GRADLE_OPTS</code> is set to:</p>\n\n<pre><code>GRADLE_OPTS: \"-Dorg.gradle.daemon=false -Dorg.gradle.parallel=false\"\n</code></pre>\n\n<p>This is the error that I get:</p>\n\n<pre><code>Could not perform non-incremental compilation with Kotlin compile daemon, non-incremental compilation in fallback mode will be performed\nCould not connect to kotlin daemon. Using fallback strategy.\n#\n# A fatal error has been detected by the Java Runtime Environment:\n#\n#  SIGSEGV (0xb) at pc=0x00007f3b93fffeee, pid=8, tid=0x00007f3b954fb700\n#\n# JRE version: Java(TM) SE Runtime Environment (8.0_121-b13) (build 1.8.0_121-b13)\n# Java VM: Java HotSpot(TM) 64-Bit Server VM (25.121-b13 mixed mode linux-amd64 compressed oops)\n# Problematic frame:\n# V  [libjvm.so+0x6e2eee]  jni_SetStaticIntField+0xee\n</code></pre>\n\n<p>There is a file that it writes to (<code>hs_err_pid8.log</code> or something similar), but this is on a CI machine and I am not able to read it because the CI destroys the container on build completion (success or failure). Is there anything I can try or any way to get further diagnostics, or if anyone has faced this issue?</p>\n\n<p><strong>EDIT</strong> Ok, so I was able to get the file that is being generated on the <code>SIGSEGV</code>. It is huge, so I am attaching it in a pastebin: <a href=\"https://pastebin.com/Jkvp6uYx\" rel=\"nofollow noreferrer\">https://pastebin.com/Jkvp6uYx</a></p>\n\n<p>Now I am not sure what the relevant parts are, but I do see a stacktrace to a possibly relevant part (the logs till now kind of had us believing that this had something to do with gradle incremental tasks):</p>\n\n<pre><code>    Stack: [0x00007fc7f0ece000,0x00007fc7f0fcf000],  sp=0x00007fc7f0fc7b20,  free space=998k\n    Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)\n    V  [libjvm.so+0x6e2eee]  jni_SetStaticIntField+0xee\n    C  [libjansi.so+0xf38]  Java_org_fusesource_jansi_internal_CLibrary_init+0x108\n    j  org.fusesource.jansi.internal.CLibrary.&lt;clinit&gt;()V+20\n    v  ~StubRoutines::call_stub\n    V  [libjvm.so+0x690dd6]  JavaCalls::call_helper(JavaValue*, methodHandle*, JavaCallArguments*, Thread*)+0x1056\n    V  [libjvm.so+0x642be7]  InstanceKlass::call_class_initializer_impl(instanceKlassHandle, Thread*)+0xd7\n    V  [libjvm.so+0x6451fc]  InstanceKlass::initialize_impl(instanceKlassHandle, Thread*)+0x1ac\n    V  [libjvm.so+0x6455c1]  InstanceKlass::initialize(Thread*)+0x41\n    V  [libjvm.so+0x7f3c2f]  LinkResolver::resolve_field(fieldDescriptor&amp;, KlassHandle, Symbol*, Symbol*, KlassHandle, Bytecodes::Code, bool, bool, Thread*)+0x4df\n    V  [libjvm.so+0x7f3e95]  LinkResolver::resolve_field_access(fieldDescriptor&amp;, constantPoolHandle, int, Bytecodes::Code, Thread*)+0x245\n    V  [libjvm.so+0x688d15]  InterpreterRuntime::resolve_get_put(JavaThread*, Bytecodes::Code)+0x125\n    j  org.jetbrains.kotlin.cli.common.messages.PlainTextMessageRenderer.&lt;clinit&gt;()V+21\n    v  ~StubRoutines::call_stub\n    V  [libjvm.so+0x690dd6]  JavaCalls::call_helper(JavaValue*, methodHandle*, JavaCallArguments*, Thread*)+0x1056\n    V  [libjvm.so+0x642be7]  InstanceKlass::call_class_initializer_impl(instanceKlassHandle, Thread*)+0xd7\n    V  [libjvm.so+0x6451fc]  InstanceKlass::initialize_impl(instanceKlassHandle, Thread*)+0x1ac\n    V  [libjvm.so+0x6455c1]  InstanceKlass::initialize(Thread*)+0x41\n    V  [libjvm.so+0x64543d]  InstanceKlass::initialize_impl(instanceKlassHandle, Thread*)+0x3ed\n    V  [libjvm.so+0x6455c1]  InstanceKlass::initialize(Thread*)+0x41\n    V  [libjvm.so+0x6854fa]  InterpreterRuntime::_new(JavaThread*, ConstantPool*, int)+0x23a\n    j  org.jetbrains.kotlin.cli.common.messages.MessageRenderer.&lt;clinit&gt;()V+10\n    v  ~StubRoutines::call_stub\n    V  [libjvm.so+0x690dd6]  JavaCalls::call_helper(JavaValue*, methodHandle*, JavaCallArguments*, Thread*)+0x1056\n    V  [libjvm.so+0x642be7]  InstanceKlass::call_class_initializer_impl(instanceKlassHandle, Thread*)+0xd7\n    V  [libjvm.so+0x6451fc]  InstanceKlass::initialize_impl(instanceKlassHandle, Thread*)+0x1ac\n    V  [libjvm.so+0x6455c1]  InstanceKlass::initialize(Thread*)+0x41\n    V  [libjvm.so+0x7f3c2f]  LinkResolver::resolve_field(fieldDescriptor&amp;, KlassHandle, Symbol*, Symbol*, KlassHandle, Bytecodes::Code, bool, bool, Thread*)+0x4df\n    V  [libjvm.so+0x7f3e95]  LinkResolver::resolve_field_access(fieldDescriptor&amp;, constantPoolHandle, int, Bytecodes::Code, Thread*)+0x245\n    V  [libjvm.so+0x688d15]  InterpreterRuntime::resolve_get_put(JavaThread*, Bytecodes::Code)+0x125\n    j  org.jetbrains.kotlin.cli.common.CLICompiler.execAndOutputXml(Ljava/io/PrintStream;Lorg/jetbrains/kotlin/config/Services;[Ljava/lang/String;)Lorg/jetbrains/kotlin/cli/common/ExitCode;+123\n    v  ~StubRoutines::call_stub\n    V  [libjvm.so+0x690dd6]  JavaCalls::call_helper(JavaValue*, methodHandle*, JavaCallArguments*, Thread*)+0x1056\n    V  [libjvm.so+0x99c357]  Reflection::invoke(instanceKlassHandle, methodHandle, Handle, bool, objArrayHandle, BasicType, objArrayHandle, bool, Thread*)+0x5d7\n    V  [libjvm.so+0x99fa67]  Reflection::invoke_method(oopDesc*, Handle, objArrayHandle, Thread*)+0x147\n    V  [libjvm.so+0x72447b]  JVM_InvokeMethod+0x26b\n    J 1277  sun.reflect.NativeMethodAccessorImpl.invoke0(Ljava/lang/reflect/Method;Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object; (0 bytes) @ 0x00007fc7d9405bad [0x00007fc7d9405ac0+0xed]\n    J 1276 C1 sun.reflect.NativeMethodAccessorImpl.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object; (104 bytes) @ 0x00007fc7d940627c [0x00007fc7d9405ee0+0x39c]\n    J 8712 C2 java.lang.reflect.Method.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object; (62 bytes) @ 0x00007fc7da72c92c [0x00007fc7da72c8a0+0x8c]\n    j  org.jetbrains.kotlin.compilerRunner.GradleCompilerRunner.compileInProcess([Ljava/lang/String;Ljava/lang/String;Lorg/jetbrains/kotlin/compilerRunner/GradleCompilerEnvironment;)Lorg/jetbrains/kotlin/cli/common/ExitCode;+142\n    j  org.jetbrains.kotlin.compilerRunner.GradleCompilerRunner.compileWithDaemonOrFallback(Ljava/lang/String;Lorg/jetbrains/kotlin/cli/common/arguments/CommonCompilerArguments;Lorg/jetbrains/kotlin/compilerRunner/GradleCompilerEnvironment;)Lorg/jetbrains/kotlin/cli/common/ExitCode;+520\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "edited": false, "score": 0, "creation_date": 1493104532, "post_id": 43603963, "comment_id": 74257198, "body": "Thanks. Is 1.1.2 Kotlin version out?"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "reply_to_user": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "edited": false, "score": 2, "creation_date": 1493104686, "post_id": 43603963, "comment_id": 74257288, "body": "Will be out very soon."}, {"owner": {"reputation": 124764, "user_id": 90848, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/tK3A3.jpg?s=128&g=1", "display_name": "Laurence Gonsalves", "link": "https://stackoverflow.com/users/90848/laurence-gonsalves"}, "edited": false, "score": 0, "creation_date": 1494629544, "post_id": 43603963, "comment_id": 74927721, "body": "I still see this warning when using 1.1.2-2. Screenshot: <a href=\"http://imgur.com/a/IjL1o\" rel=\"nofollow noreferrer\">imgur.com/a/IjL1o</a>"}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 2, "last_activity_date": 1493104353, "creation_date": 1493104353, "answer_id": 43603963, "question_id": 43603613, "link": "https://stackoverflow.com/questions/43603613/warningthe-d-option-with-a-directory-destination-is-ignored-because-module/43603963#43603963", "title": "Warning:the &#39;-d&#39; option with a directory destination is ignored because &#39;-module&#39; is specified", "body": "<p>This is a <a href=\"https://youtrack.jetbrains.com/issue/KT-14619\" rel=\"nofollow noreferrer\">Kotlin bug</a> fixed in version 1.1.2.</p>\n"}], "owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1428, "favorite_count": 0, "accepted_answer_id": 43603963, "answer_count": 1, "score": 2, "last_activity_date": 1493104353, "creation_date": 1493103105, "question_id": 43603613, "link": "https://stackoverflow.com/questions/43603613/warningthe-d-option-with-a-directory-destination-is-ignored-because-module", "title": "Warning:the &#39;-d&#39; option with a directory destination is ignored because &#39;-module&#39; is specified", "body": "<p>When I upgrade my Project Kotlin version from 1.0.5 to 1.1.1, it produce the warning </p>\n\n<p><code>Warning:the '-d' option with a directory destination is ignored because '-module' is specified</code> during compilation. What is this warning for? What do I need to fix?</p>\n"}, {"tags": ["javafx-2", "javafx-8", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 953, "user_id": 6763724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KasE6zPK7mA/AAAAAAAAAAI/AAAAAAAAABQ/r3oBivz_Atg/photo.jpg?sz=128", "display_name": "Gary LO", "link": "https://stackoverflow.com/users/6763724/gary-lo"}, "reply_to_user": {"reputation": 25, "user_id": 7914088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee789f2e408efec2e533eaee866e6473?s=128&d=identicon&r=PG&f=1", "display_name": "Name Yuri", "link": "https://stackoverflow.com/users/7914088/name-yuri"}, "edited": false, "score": 0, "creation_date": 1493055736, "post_id": 43592318, "comment_id": 74238790, "body": "@NameYuri You are welcome. If the answer is working, please mark as correct answer to let others knows :)"}], "tags": [], "owner": {"reputation": 953, "user_id": 6763724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KasE6zPK7mA/AAAAAAAAAAI/AAAAAAAAABQ/r3oBivz_Atg/photo.jpg?sz=128", "display_name": "Gary LO", "link": "https://stackoverflow.com/users/6763724/gary-lo"}, "is_accepted": true, "score": 4, "last_activity_date": 1493048260, "creation_date": 1493048260, "answer_id": 43592318, "question_id": 43590959, "link": "https://stackoverflow.com/questions/43590959/tableview-callback-in-kotlin/43592318#43592318", "title": "TableView Callback in Kotlin", "body": "<p>Your type is wrong in TextFieldTableCell.</p>\n\n<p>closely look at <code>TextFieldTableCell&lt;S,T&gt; extends TableCell&lt;S,T&gt;</code> and the method <code>TextFieldTableCell(StringConverter&lt;T&gt; converter)</code></p>\n\n<p>if the callback return type is <code>TableCell&lt;Map&lt;*, *&gt;, String&gt;&gt;</code>, then your string converter MUST be <code>StringConverter&lt;String&gt;</code> to fulfil the type constraint.</p>\n\n<pre><code>   Callback&lt;TableColumn&lt;Map&lt;*, *&gt;, String&gt;, TableCell&lt;Map&lt;*, *&gt;, String&gt;&gt; {\n        TextFieldTableCell(object: StringConverter&lt;String&gt;() {\n            override fun fromString(string: String): String {\n                return string\n            }\n\n            override fun toString(`object`: String): String {\n                return `object`\n            }\n        })\n    }\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 7914088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee789f2e408efec2e533eaee866e6473?s=128&d=identicon&r=PG&f=1", "display_name": "Name Yuri", "link": "https://stackoverflow.com/users/7914088/name-yuri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 996, "favorite_count": 0, "accepted_answer_id": 43592318, "answer_count": 1, "score": 1, "last_activity_date": 1493048260, "creation_date": 1493044531, "question_id": 43590959, "link": "https://stackoverflow.com/questions/43590959/tableview-callback-in-kotlin", "title": "TableView Callback in Kotlin", "body": "<p>I learn Using JavaFX UI Controls <a href=\"http://docs.oracle.com/javafx/2/ui_controls/table-view.htm\" rel=\"nofollow noreferrer\">Example 12-12 Adding Map Data to the Table</a></p>\n\n<p>Its works in java:</p>\n\n<pre><code>TableColumn&lt;Map, String&gt; firstDataColumn = new TableColumn&lt;&gt;(\"Class A\");\nTableColumn&lt;Map, String&gt; secondDataColumn = new TableColumn&lt;&gt;(\"Class B\");\n\nfirstDataColumn.setCellValueFactory(new MapValueFactory(Column1MapKey));\nfirstDataColumn.setMinWidth(130);\nsecondDataColumn.setCellValueFactory(new MapValueFactory(Column2MapKey));\nsecondDataColumn.setMinWidth(130);\n\nTableView table_view = new TableView&lt;&gt;(generateDataInMap());\n\ntable_view.setEditable(true);\ntable_view.getSelectionModel().setCellSelectionEnabled(true);\ntable_view.getColumns().setAll(firstDataColumn, secondDataColumn);\nCallback&lt;TableColumn&lt;Map, String&gt;, TableCell&lt;Map, String&gt;&gt;\n    cellFactoryForMap = new Callback&lt;TableColumn&lt;Map, String&gt;,\n        TableCell&lt;Map, String&gt;&gt;() {\n            @Override\n            public TableCell call(TableColumn p) {\n                return new TextFieldTableCell(new StringConverter() {\n                    @Override\n                    public String toString(Object t) {\n                        return t.toString();\n                    }\n                    @Override\n                    public Object fromString(String string) {\n                        return string;\n                    }                                    \n                });\n            }\n};\nfirstDataColumn.setCellFactory(cellFactoryForMap);\nsecondDataColumn.setCellFactory(cellFactoryForMap);\n</code></pre>\n\n<p>But this part does not work in kotlin(after converting):</p>\n\n<pre><code>     val cellFactoryForMap = \nobject : Callback&lt;TableColumn&lt;Map&lt;*, *&gt;, String&gt;, TableCell&lt;Map&lt;*, *&gt;, String&gt;&gt; {\n                override fun call(p: TableColumn&lt;*, *&gt;): TableCell&lt;*, *&gt; {\n                    return TextFieldTableCell(object : StringConverter() {\n                        override fun toString(t: Any): String {\n                            return t.toString()\n                        }\n\n                        override fun fromString(string: String): Any {\n                            return string\n                        }\n                    })\n                }\n            }\n</code></pre>\n\n<p>Error:(49, 33) Kotlin: Object must be declared abstract or implement abstract member public abstract fun call(p0: TableColumn>, String>!): TableCell, *>, String>! defined in javafx.util.Callback</p>\n\n<p>Error:(50, 13) Kotlin: 'call' overrides nothing</p>\n\n<p>Error:(51, 24) Kotlin: Type inference failed: constructor TextFieldTableCell(p0: StringConverter!)\ncannot be applied to\n()</p>\n\n<p>Error:(51, 43) Kotlin: Type mismatch: inferred type is  but StringConverter&lt;(???..???)>! was expected</p>\n\n<p>Error:(51, 52) Kotlin: One type argument expected for class StringConverter defined in javafx.util</p>\n\n<p>Error:(52, 21) Kotlin: 'toString' overrides nothing</p>\n\n<p>Error:(56, 21) Kotlin: 'fromString' overrides nothing</p>\n\n<p>How write the correct code?</p>\n"}, {"tags": ["spring", "postgresql", "spring-data-jpa", "kotlin"], "comments": [{"owner": {"reputation": 3922, "user_id": 498457, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/Ea08W.png?s=128&g=1", "display_name": "Christoph Grimmer-Dietrich", "link": "https://stackoverflow.com/users/498457/christoph-grimmer-dietrich"}, "edited": false, "score": 0, "creation_date": 1493043273, "post_id": 43590440, "comment_id": 74230422, "body": "Same happens when using ?1 to access the parameter"}, {"owner": {"reputation": 8712, "user_id": 1468919, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/30a3b57763e52344770ccdc5b6a5c94a?s=128&d=identicon&r=PG", "display_name": "Jaiwo99", "link": "https://stackoverflow.com/users/1468919/jaiwo99"}, "edited": false, "score": 0, "creation_date": 1493043502, "post_id": 43590440, "comment_id": 74230611, "body": "which version of spring-data-jpa do you have on classpath?"}, {"owner": {"reputation": 55186, "user_id": 301607, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1a7b23a820171d3370a308139556e29?s=128&d=identicon&r=PG", "display_name": "StanislavL", "link": "https://stackoverflow.com/users/301607/stanislavl"}, "edited": false, "score": 0, "creation_date": 1493044924, "post_id": 43590440, "comment_id": 74231711, "body": "Just remove the &#39; chars e.g. <code>@Query(nativeQuery = true, value = &quot;SELECT nextval(:seq_name)&quot;)</code>"}, {"owner": {"reputation": 3922, "user_id": 498457, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/Ea08W.png?s=128&g=1", "display_name": "Christoph Grimmer-Dietrich", "link": "https://stackoverflow.com/users/498457/christoph-grimmer-dietrich"}, "edited": false, "score": 0, "creation_date": 1493046027, "post_id": 43590440, "comment_id": 74232594, "body": "removing the ticks works for the select query. For the create query I now get a <code>org.hibernate.exception.SQLGrammarException: could not extract ResultSet</code>"}, {"owner": {"reputation": 4555, "user_id": 424903, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8oHZF.png?s=128&g=1", "display_name": "Gimby", "link": "https://stackoverflow.com/users/424903/gimby"}, "edited": false, "score": 0, "creation_date": 1493046545, "post_id": 43590440, "comment_id": 74232965, "body": "Probably because you&#39;re parameterising something which cannot be parameterised, such as the sequence name."}, {"owner": {"reputation": 28971, "user_id": 1499698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad28bf1565b1191c0591bf90d46299a7?s=128&d=identicon&r=PG", "display_name": "pozs", "link": "https://stackoverflow.com/users/1499698/pozs"}, "edited": false, "score": 0, "creation_date": 1493047046, "post_id": 43590440, "comment_id": 74233328, "body": "1) don&#39;t quote bound parameters 2) <code>SELECT setval(...)</code> (the <code>SELECT</code> is important there too) 3) <code>CREATE&#47;DROP SEQUENCE</code> uses the sequence name as an identifier. you cannot bind identifiers in any way. 4) <i>SQLGrammarException: could not extract ResultSet</i> is just a wrapper exception, dig deeper in the <code>cause</code> chain"}], "answers": [{"tags": [], "owner": {"reputation": 3922, "user_id": 498457, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/Ea08W.png?s=128&g=1", "display_name": "Christoph Grimmer-Dietrich", "link": "https://stackoverflow.com/users/498457/christoph-grimmer-dietrich"}, "is_accepted": true, "score": 2, "last_activity_date": 1493048110, "creation_date": 1493048110, "answer_id": 43592253, "question_id": 43590440, "link": "https://stackoverflow.com/questions/43590440/param-not-working-in-spring-data-jpa/43592253#43592253", "title": "@Param not working in Spring Data JPA", "body": "<p>Ok, based on the answer from @StanislavL and after some debugging around I have a working solution now. As @posz pointed out I cannot bind identifiers which means I have to hard code the queries. I moved the code from a JPA interface to an implemented service which is not as nice but works.</p>\n\n<pre><code>@Service\nopen class SequenceService (val entityManager: EntityManager){\n\n    @Transactional\n    fun createSequence(seq_name: String, startAt: Long = 0) {\n        val query = entityManager.createNativeQuery(\"CREATE SEQUENCE IF NOT EXISTS ${seq_name} START ${startAt}\")\n        with(query){\n            executeUpdate()\n        }\n    }\n\n    @Transactional\n    fun nextSerial(seq_name: String) : Long {\n        val query = entityManager.createNativeQuery(\"SELECT nextval(:seq_name)\")\n        with(query){\n            setParameter(\"seq_name\", seq_name)\n            val result = singleResult as BigInteger\n            return result.toLong()\n        }\n\n    }\n\n    @Transactional\n    fun dropSequence(seq_name: String) {\n        val query = entityManager.createNativeQuery(\"DROP SEQUENCE IF EXISTS ${seq_name}\")\n        with(query){\n            executeUpdate()\n        }\n    }\n\n    @Transactional\n    fun setSequence(seq_name: String, setTo: Long){\n        val query = entityManager.createNativeQuery(\"SELECT setval(:seq_name, :set_to, false)\")\n        with(query){\n            setParameter(\"seq_name\", seq_name)\n            setParameter(\"set_to\", setTo)\n            singleResult\n        }\n    }\n}\n</code></pre>\n\n<p>I hope this is helpful for the next person trying to directly work with sequences when using <code>@SequenceGenerator</code> is not an option.</p>\n"}], "owner": {"reputation": 3922, "user_id": 498457, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/Ea08W.png?s=128&g=1", "display_name": "Christoph Grimmer-Dietrich", "link": "https://stackoverflow.com/users/498457/christoph-grimmer-dietrich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 599, "favorite_count": 0, "accepted_answer_id": 43592253, "answer_count": 1, "score": 3, "last_activity_date": 1493048110, "creation_date": 1493043156, "last_edit_date": 1493045525, "question_id": 43590440, "link": "https://stackoverflow.com/questions/43590440/param-not-working-in-spring-data-jpa", "title": "@Param not working in Spring Data JPA", "body": "<p>I'm setting up a Spring Data JPA Repo to work with sequences in a postgresql database. I was assuming that this would be pretty simple:</p>\n\n<pre><code>@Query(nativeQuery = true, value = \"CREATE SEQUENCE IF NOT EXISTS ':seq_name' START WITH :startAt\")\nfun createSequence(@Param(\"seq_name\") seq_name: String, @Param(\"startAt\") startAt: Long = 0)\n\n@Query(nativeQuery = true, value = \"SELECT nextval(':seq_name')\")\nfun nextSerial(@Param(\"seq_name\") seq_name: String) : Long\n\n@Query(nativeQuery = true, value = \"DROP SEQUENCE IF EXISTS ':seq_name'\")\nfun dropSequence(@Param(\"seq_name\") seq_name: String)\n\n@Query(nativeQuery = true, value = \"setval(':seq_name', :set_to, false\")\nfun setSequence(@Param(\"seq_name\") seq_name: String, @Param(\"set_to\") setTo: Long)\n</code></pre>\n\n<p>But for some reason I get \n<code>org.springframework.dao.InvalidDataAccessApiUsageException: Parameter with that name [seq_name] did not exist;</code> whenever I'm trying to call the method. Any idea why this might happen?</p>\n"}, {"tags": ["android", "memory-leaks", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "is_accepted": true, "score": 8, "last_activity_date": 1493041282, "creation_date": 1493041282, "answer_id": 43589756, "question_id": 43589347, "link": "https://stackoverflow.com/questions/43589347/library-to-detect-memory-leak-in-android-using-kotlin/43589756#43589756", "title": "Library to detect memory leak in android using Kotlin", "body": "<p>Leak Canary does not generate any bytecode. It uses Java's <code>Reference</code> and <code>ReferenceQueue</code> objects to track objects when they are supposed to be garbage-collected and generating a report if the object is still alive after a timeout,</p>\n\n<p>In short, Leak Canary will work as expected for any language that is based on Java Bytecode. (If native code gets involved it will probably become less clear)</p>\n"}], "owner": {"reputation": 1655, "user_id": 2802802, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/aaf699017716bf13665ae81a7aba1530?s=128&d=identicon&r=PG", "display_name": "Richard Lee", "link": "https://stackoverflow.com/users/2802802/richard-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1018, "favorite_count": 2, "accepted_answer_id": 43589756, "answer_count": 1, "score": 3, "last_activity_date": 1493041959, "creation_date": 1493040293, "last_edit_date": 1493041959, "question_id": 43589347, "link": "https://stackoverflow.com/questions/43589347/library-to-detect-memory-leak-in-android-using-kotlin", "title": "Library to detect memory leak in android using Kotlin", "body": "<p>I'm using Leak Canary to prevent <em>memory leaks</em> in Android...using Kotlin, this library still works? There is another for Kotlin?</p>\n\n<p>Leak Canary can detect, based on source code (<em>i am right?</em>) and with <strong>head dumbs</strong>, the reference of context passed from activity/fragmento to <em>Async</em> class' constructors, and in case when <em>WeakReferences</em> are not used properly whenever the user leaves an activity when the <em>Async</em> does not finish its process, the LeakCanary detect a memory leak.\nHow its works for Kotlin?</p>\n\n<p>Leak Canary is based on (its analyses) generated <em>bytecode</em> and there is <strong>real</strong> no difference between using either Java code or Kolin?</p>\n"}, {"tags": ["spring", "dependency-injection", "functional-programming", "inversion-of-control", "kotlin"], "comments": [{"owner": {"reputation": 1203, "user_id": 4342515, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_oRpj7EPDWQ/AAAAAAAAAAI/AAAAAAAAAGE/Ai1BO27JJIs/photo.jpg?sz=128", "display_name": "Mario", "link": "https://stackoverflow.com/users/4342515/mario"}, "edited": false, "score": 2, "creation_date": 1493108347, "post_id": 43582389, "comment_id": 74259656, "body": "Top-level functions are equivalent to Java static methods. I&#39;m not sure whether it makes sense or would be a good practice injecting dependencies into them.  As a good practice, and IMHO, I would recommend you put these functions inside a class that you configure with dependency injection."}], "answers": [{"tags": [], "owner": {"reputation": 6162, "user_id": 1672027, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/356de98a7af65cf6dd187d3796ba04fd?s=128&d=identicon&r=PG", "display_name": "Matt Klein", "link": "https://stackoverflow.com/users/1672027/matt-klein"}, "is_accepted": false, "score": 1, "last_activity_date": 1516652279, "creation_date": 1516652279, "answer_id": 48389601, "question_id": 43582389, "link": "https://stackoverflow.com/questions/43582389/how-to-inject-with-ioc-into-kotlin-top-level-functions-do-i-even-use-ioc-contai/48389601#48389601", "title": "How to inject with IoC into Kotlin top level functions? Do I even use IoC containers?", "body": "<p>The issue is that you have a function with the signature <code>(Navigator) -&gt; MenuBar</code>, but what you probably want is a function with the signature <code>() -&gt; MenuBar</code>.</p>\n\n<p>Normally, in OO, you would accomplish this by injecting in the <code>Navigator</code> into the constructor, save the reference, and then use it when your function gets called.</p>\n\n<p>In functional programming, the analogous concept is call \"Partial Function Application\". This is when you pre-apply parameters to a function and make a new function that takes the remaining parameters. In our case, we want to pre-apply the <code>Navigator</code> which will leave us with a signature of <code>() -&gt; MenuBar</code>.</p>\n\n<p><a href=\"https://realjenius.com/2017/08/24/kotlin-curry/\" rel=\"nofollow noreferrer\">This</a> looks like a good article on the concept in Kotlin.</p>\n\n<p>What I would suggest trying something like this:</p>\n\n<pre><code>// note - returns `() -&gt; MenuBar` now, rather than `MenuBar`\nfun createMenuBar(navigator: Navigator): () -&gt; MenuBar {\n    // returning a function that takes no parameters\n    return { -&gt;\n        val menuBar = MenuBar()\n        menuBar.setHeight(null)\n        menuBar.setWidth(null)\n\n        menuBar.addItem(\"Dashboard\", VaadinIcons.COG,\n            { navigator.navigateTo(\"Dashboard\") } as MenuBar.Command)\n\n        return menuBar\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 5402, "user_id": 873139, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/r1v37.jpg?s=128&g=1", "display_name": "Aubergine", "link": "https://stackoverflow.com/users/873139/aubergine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 618, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1516652279, "creation_date": 1493019709, "question_id": 43582389, "link": "https://stackoverflow.com/questions/43582389/how-to-inject-with-ioc-into-kotlin-top-level-functions-do-i-even-use-ioc-contai", "title": "How to inject with IoC into Kotlin top level functions? Do I even use IoC containers?", "body": "<p>I am having trouble to follow FP. When people say \"more idiomatic style\" I must understand that as : 99 % of Java libs are not applicable for FP idiomatic style for Kotlin and Scala right? Well, I need Spring Boot for quick startup with Vaadin. So I need to inject some beans.</p>\n\n<pre><code>package com.x.ui\n\nimport com.vaadin.icons.VaadinIcons\nimport com.vaadin.navigator.Navigator\nimport com.vaadin.ui.MenuBar\n\nfun createMenuBar(navigator: Navigator): MenuBar {\n    val menuBar = MenuBar()\n    menuBar.setHeight(null)\n    menuBar.setWidth(null)\n\n    menuBar.addItem(\"Dashboard\", VaadinIcons.COG,\n            { navigator.navigateTo(\"Dashboard\") } as MenuBar.Command)\n\n    return menuBar\n}\n</code></pre>\n\n<p>So how would I inject <code>SpringNavigator</code> in this case into this function?</p>\n\n<p>As I have couple of top level functions so far, I have no @Component neither @Bean , what is idiomatic way to work with Spring IoC for Kotlin? Am I limited to using classes or we have tricks to do it?</p>\n"}, {"tags": ["json", "inheritance", "gson", "kotlin", "data-class"], "answers": [{"tags": [], "owner": {"reputation": 1214, "user_id": 6095439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb0a801257ee75e0987200564b0ea798?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/6095439/john"}, "is_accepted": false, "score": 1, "last_activity_date": 1493012457, "creation_date": 1493012457, "answer_id": 43580534, "question_id": 43575987, "link": "https://stackoverflow.com/questions/43575987/how-to-deserialize-inherited-kotlin-data-classes-with-gson/43580534#43580534", "title": "How to deserialize inherited Kotlin data classes with Gson", "body": "<p>Are you sure it is Gson  problem with data classes? It should work with them correctly, only non nullable fields may be a problem.</p>\n\n<p>Your error indicates that you have fields with same name in it.<br>\nIf there's any particular field you don't want to include you have to annotate it with <code>@Transient</code></p>\n"}, {"comments": [{"owner": {"reputation": 830, "user_id": 3025757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/959562bad4c1eac0884186d8946fd725?s=128&d=identicon&r=PG&f=1", "display_name": "elcolto", "link": "https://stackoverflow.com/users/3025757/elcolto"}, "edited": false, "score": 1, "creation_date": 1493062329, "post_id": 43592275, "comment_id": 74242637, "body": "Thank you. This is the solution I was looking for."}], "tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": false, "score": 15, "last_activity_date": 1499781510, "last_edit_date": 1499781510, "creation_date": 1493048173, "answer_id": 43592275, "question_id": 43575987, "link": "https://stackoverflow.com/questions/43575987/how-to-deserialize-inherited-kotlin-data-classes-with-gson/43592275#43592275", "title": "How to deserialize inherited Kotlin data classes with Gson", "body": "<p>Both <code>Shape</code> and <code>Square</code> declare fields <code>x</code> and <code>y</code>. An instance of <code>Square</code> actually stores the value for <code>x</code> and <code>y</code> twice. To avoid this you can remove <code>x</code> and <code>y</code> from the <code>Shape</code> constructor and declare them as <code>abstract</code>. The same goes for <code>Circle</code> e.g.:</p>\n\n<pre><code>abstract class Shape {\n    abstract val x: Int\n    abstract val y: Int\n}\n\ndata class Circle(val radius: Int, override val x: Int, override val y: Int) : Shape()\n\ndata class Square(val width: Int, override val x: Int, override val y: Int) : Shape()\n</code></pre>\n\n<p>Gson will now be able to successfully serialize and deserialize <code>Circle</code> and <code>Square</code> objects.</p>\n"}, {"tags": [], "owner": {"reputation": 28323, "user_id": 413254, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/VxL0m.jpg?s=128&g=1", "display_name": "loeschg", "link": "https://stackoverflow.com/users/413254/loeschg"}, "is_accepted": false, "score": 3, "last_activity_date": 1498506750, "creation_date": 1498506750, "answer_id": 44767650, "question_id": 43575987, "link": "https://stackoverflow.com/questions/43575987/how-to-deserialize-inherited-kotlin-data-classes-with-gson/44767650#44767650", "title": "How to deserialize inherited Kotlin data classes with Gson", "body": "<p>If you're not able to convert the base class to Kotlin just yet, the <code>@Transient</code> annotation worked for me.</p>\n\n<pre><code>data class Circle(val radius: Int, \n    @Transient val x: Int, \n    @Transient val y: Int): Shape(x, y)\n\ndata class Square(val width: Int, \n    @Transient val x: Int, \n    @Transient val y: Int): Shape(x, y)\n</code></pre>\n"}], "owner": {"reputation": 830, "user_id": 3025757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/959562bad4c1eac0884186d8946fd725?s=128&d=identicon&r=PG&f=1", "display_name": "elcolto", "link": "https://stackoverflow.com/users/3025757/elcolto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5841, "favorite_count": 2, "answer_count": 3, "score": 10, "last_activity_date": 1499781510, "creation_date": 1492978475, "question_id": 43575987, "link": "https://stackoverflow.com/questions/43575987/how-to-deserialize-inherited-kotlin-data-classes-with-gson", "title": "How to deserialize inherited Kotlin data classes with Gson", "body": "<p>In an Android App I need to deserialize Json data for Kotlin data classes, with a single abstraction level. But I don't have any idea, to place correct properties in constructors.</p>\n\n<p>As a simple version, let's say I have a Shape:</p>\n\n<pre><code>abstract class Shape(open val x: Int, open val y: Int)\n</code></pre>\n\n<p>with two derivations</p>\n\n<pre><code>data class Circle(val radius: Int, override val x: Int, override val y: Int): Shape(x, y)\n</code></pre>\n\n<p>and</p>\n\n<pre><code>data class Square(val width: Int, override val x: Int, override val y: Int): Shape(x, y)\n</code></pre>\n\n<p>So my target is, not to instantiate a Shape. So, instead always deserialize its derivations. Later I need to handle some collection properties in other classes like:</p>\n\n<pre><code>val shapes: List&lt;Shape&gt;\n</code></pre>\n\n<p>but I also have to know the derived type of each element.</p>\n\n<p>When I try to deserialize the given example with Gson</p>\n\n<pre><code>val square = gson.fromJson(SQUARE_JSON, Square::class.java)\n</code></pre>\n\n<p>I always get an IllegalArgumentException</p>\n\n<pre><code>java.lang.IllegalArgumentException: class com.example.shapes.model.Square declares multiple JSON fields named x\n\nat com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.getBoundFields(ReflectiveTypeAdapterFactory.java:170)\nat com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.create(ReflectiveTypeAdapterFactory.java:100)\nat com.google.gson.Gson.getAdapter(Gson.java:423)\nat com.google.gson.Gson.fromJson(Gson.java:886)\nat com.google.gson.Gson.fromJson(Gson.java:852)\nat com.google.gson.Gson.fromJson(Gson.java:801)\nat com.google.gson.Gson.fromJson(Gson.java:773)\n</code></pre>\n\n<p>Is there any possibility to deserialize this classes correctly without writing a custom Gson TypeAdapter or loosing data class advantages?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["documentation", "kotlin", "higher-order-functions"], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 5, "last_activity_date": 1493026957, "creation_date": 1493026957, "answer_id": 43584744, "question_id": 43574868, "link": "https://stackoverflow.com/questions/43574868/documenting-parameters-of-a-function-parameter-in-kotlin/43584744#43584744", "title": "Documenting parameters of a function parameter in Kotlin", "body": "<p>As of Kotlin 1.1 there is no syntax for documenting the parameters or return value of a function type used as a function parameter. There is an <a href=\"https://youtrack.jetbrains.com/issue/KT-15529\" rel=\"noreferrer\">open YouTrack issue</a> covering this.</p>\n"}], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 43584744, "answer_count": 1, "score": 2, "last_activity_date": 1493026957, "creation_date": 1492971857, "question_id": 43574868, "link": "https://stackoverflow.com/questions/43574868/documenting-parameters-of-a-function-parameter-in-kotlin", "title": "Documenting parameters of a function parameter in Kotlin", "body": "<p>Let's say I have a higher order function, which registers some sort of a click listener. I can document its purpose and the <code>listener</code> parameter that's passed in like so:</p>\n\n<pre><code>/**\n * Adds a [listener] that's called when the item is clicked.\n *\n * @param listener The listener to add\n */\nfun addClickListener(listener: (count: Int) -&gt; Unit) {\n    ...\n}\n</code></pre>\n\n<p>My question is, is there a way to document the parameters of the <code>listener</code>? This would be <code>count</code> in this example. In my actual use case, I have multiple parameters in my listener.</p>\n\n<p>What I've noticed is that the <code>[listener]</code> text is clickable in the documentation view where I'm using this function, but it just shows an empty dialog about it. Is there a way to describe the parameters there somehow?</p>\n\n<p><a href=\"https://i.stack.imgur.com/kLmNj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kLmNj.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/gShdL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gShdL.png\" alt=\"The listener documentation that comes up\"></a></p>\n\n<p>For now, I've ended up describing the parameters of the listener with <code>@param</code> blocks at the <code>addClickListener</code> method, but this results in a warning in the IDE, and I'm wondering if there's a more proper way to do it.</p>\n"}, {"tags": ["android", "function", "kotlin", "explain"], "comments": [{"owner": {"reputation": 904, "user_id": 7564239, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/OCL4G.jpg?s=128&g=1", "display_name": "Vlad Skurtolov", "link": "https://stackoverflow.com/users/7564239/vlad-skurtolov"}, "edited": false, "score": 0, "creation_date": 1492967818, "post_id": 43574172, "comment_id": 74198322, "body": "Okay my mistake. It&#39;s not a function..."}], "answers": [{"comments": [{"owner": {"reputation": 53550, "user_id": 1083957, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/vIOTT.jpg?s=128&g=1", "display_name": "azizbekian", "link": "https://stackoverflow.com/users/1083957/azizbekian"}, "edited": false, "score": 1, "creation_date": 1493049259, "post_id": 43574400, "comment_id": 74234934, "body": "And what is <code>@OnEditorActionListener</code> needed for?"}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "reply_to_user": {"reputation": 53550, "user_id": 1083957, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/vIOTT.jpg?s=128&g=1", "display_name": "azizbekian", "link": "https://stackoverflow.com/users/1083957/azizbekian"}, "edited": false, "score": 1, "creation_date": 1493049633, "post_id": 43574400, "comment_id": 74235185, "body": "That syntax can be used to specify which function you&#39;re returning from in case you have nested functions. See here: <a href=\"https://kotlinlang.org/docs/reference/returns.html#return-at-labels\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/returns.html#return-at-labels</a> . I believe it&#39;s actually redundant in this specific case though."}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 9, "last_activity_date": 1492969073, "creation_date": 1492969073, "answer_id": 43574400, "question_id": 43574172, "link": "https://stackoverflow.com/questions/43574172/explain-this-kotlin-function-structure/43574400#43574400", "title": "Explain this Kotlin function structure", "body": "<p>The feature used in your example is a <a href=\"https://kotlinlang.org/docs/reference/java-interop.html#sam-conversions\" rel=\"noreferrer\">SAM constructor</a>. The <code>setOnEditorActionListener</code> listener takes an <code>OnEditorActionListener</code> as its parameter. This interface only has a single method that you have to implement, which makes it a Single Abstract Method (SAM) interface.</p>\n\n<p>The full syntax for using this method in Java would be:</p>\n\n<pre><code>mPasswordView.setOnEditorActionListener(new TextView.OnEditorActionListener() {\n    @Override\n    public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {\n        attemptLogin();\n        return true;\n    }\n});\n</code></pre>\n\n<p>The one-to-one conversion to Kotlin would give you:</p>\n\n<pre><code>mPasswordView.setOnEditorActionListener(object: TextView.OnEditorActionListener{\n    override fun onEditorAction(v: TextView?, actionId: Int, event: KeyEvent?): Boolean {\n        attemptLogin()\n        return true\n    }\n})\n</code></pre>\n\n<p>Kotlin, however, allows you to use methods that take SAM interfaces as their parameter with a more concise syntax, by passing in a lambda instead. This is called a SAM conversion:</p>\n\n<pre><code>mPasswordView.setOnEditorActionListener { v, actionId, event -&gt;\n    attemptLogin()\n    true\n}\n</code></pre>\n\n<p>SAM conversions automatically determine which interface this lambda corresponds to, but you can specify it explicitly by using something called a SAM constructor, this is what's in your sample code. A SAM constructor returns an object that implements the given interface, and makes the lambda you've passed to it its single method's implementation.</p>\n\n<pre><code>mPasswordView.setOnEditorActionListener( TextView.OnEditorActionListener { v, actionId, event -&gt;\n    attemptLogin()\n    true\n})\n</code></pre>\n\n<p>This is redundant in this specific situation, because there is only one method called <code>setOnEditorActionListener</code>. But if there were multiple methods with this same name, that took different interfaces as parameters, you could use the SAM constructor to specify which overload of the method you want to call.</p>\n\n<p><a href=\"https://kotlinlang.org/docs/reference/java-interop.html#sam-conversions\" rel=\"noreferrer\">Official docs about SAM conversions</a></p>\n"}], "owner": {"reputation": 904, "user_id": 7564239, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/OCL4G.jpg?s=128&g=1", "display_name": "Vlad Skurtolov", "link": "https://stackoverflow.com/users/7564239/vlad-skurtolov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1543, "favorite_count": 0, "accepted_answer_id": 43574400, "answer_count": 1, "score": 2, "last_activity_date": 1493383484, "creation_date": 1492967735, "last_edit_date": 1493383484, "question_id": 43574172, "link": "https://stackoverflow.com/questions/43574172/explain-this-kotlin-function-structure", "title": "Explain this Kotlin function structure", "body": "<p>I am working with this Kotlin function. I know that we have a function called <code>mPasswordView!!.setOnEditorActionListener</code>, that take parameter <code>TextView.OnEditorActionListener</code>, but what's that after it? we have curly brackets inside parameter? </p>\n\n<pre><code>mPasswordView!!.setOnEditorActionListener(TextView.OnEditorActionListener { textView, id, keyEvent -&gt;\n    if (id == R.id.login || id == EditorInfo.IME_NULL) {\n        attemptLogin()\n        return@OnEditorActionListener true\n    }\n    false\n})\n</code></pre>\n"}, {"tags": ["functional-programming", "kotlin", "applicative"], "owner": {"reputation": 11019, "user_id": 418488, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/625af9d6f5c5062f65a43582b57c041d?s=128&d=identicon&r=PG", "display_name": "Just another metaprogrammer", "link": "https://stackoverflow.com/users/418488/just-another-metaprogrammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 210, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1492948873, "creation_date": 1492948873, "question_id": 43570896, "link": "https://stackoverflow.com/questions/43570896/can-applicative-be-implemented-nicely-in-kotlin", "title": "Can Applicative be implemented &quot;nicely&quot; in kotlin?", "body": "<p>I have defined a <code>Result</code> type like this:</p>\n\n<pre><code>sealed class BadResult {\n    data class Description(val description: String): BadResult()\n    data class Exception  (val exception  : Throwable): BadResult()\n}\n\nsealed class BadTree {\n    data class Leaf(val v: BadResult)                : BadTree()\n    data class Fork(val l: BadTree, val r: BadTree)  : BadTree()\n}\n\nsealed class Result&lt;T&gt; {\n    data class Good&lt;T&gt;     (val good     : T     )      : Result&lt;T&gt;()\n    class Empty&lt;T&gt;                                      : Result&lt;T&gt;()\n    data class Bad &lt;T&gt;     (val badTree  : BadTree   )  : Result&lt;T&gt;()\n}\n\nfun &lt;T&gt; T.good()        : Result&lt;T&gt; = Result.Good(this)\nfun &lt;T&gt; empty()         : Result&lt;T&gt; = Result.Empty()\nfun &lt;T&gt; BadTree.bad()   : Result&lt;T&gt; = Result.Bad&lt;T&gt;(this)\nfun &lt;T&gt; String.bad()    : Result&lt;T&gt; = BadTree.Leaf(BadResult.Description(this)).bad()\nfun &lt;T&gt; Throwable.bad() : Result&lt;T&gt; = BadTree.Leaf(BadResult.Exception(this)).bad()\n</code></pre>\n\n<p>For this <code>Result</code> class I have defined the monadic <code>bind</code>:</p>\n\n<pre><code>infix fun &lt;T, U&gt; Result&lt;T&gt;.bind(uf: (T) -&gt; Result&lt;U&gt;) : Result&lt;U&gt; {\n    return when(this) {\n        is Result.Good  -&gt; uf(this.good)\n        is Result.Empty -&gt; empty()\n        is Result.Bad   -&gt; this.badTree.bad()\n    }\n}\n</code></pre>\n\n<p>A very useful functional pattern is <code>Applicative</code>, if applied to <code>Result</code> this would allow me to invoke a function with arbritrary argument list if and only if all arguments are <code>Good</code>.</p>\n\n<p>This is a technique that usually relies on partial application (aka currying) which AFAIK isn't supported out of the box in kotlin. I've seen some libraries try to do currying but it seems to me currying is not a commonly recognized idiom in kotlin.</p>\n\n<p>What I ideally would like to write is something like this:</p>\n\n<pre><code>pure(::aFunctionThatTakes3Args) apply arg1 apply arg2 apply arg3\n</code></pre>\n\n<p>But I can't come up with how the signatures should look like.</p>\n\n<p>I could make a <code>lift</code> function for each arity of the function but that quickly gets cumbersome. </p>\n\n<pre><code>lift(::aFunctionThatTakes3Args, arg1, arg2, arg3) // lift is overloaded for each arity\n</code></pre>\n\n<p>(This seems to be how <a href=\"https://github.com/MarioAriasC/funKTionale/blob/master/funktionale-currying/src/main/kotlin/org/funktionale/currying/namespace.kt\" rel=\"nofollow noreferrer\">funKTionale</a> implements currying)</p>\n\n<p>Any ideas welcome.</p>\n"}, {"tags": ["generics", "reflection", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1022, "user_id": 3638966, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/720326815f0a1d2d4e35d159c163b93b?s=128&d=identicon&r=PG&f=1", "display_name": "diesieben07", "link": "https://stackoverflow.com/users/3638966/diesieben07"}, "edited": false, "score": 0, "creation_date": 1492961008, "post_id": 43572623, "comment_id": 74195604, "body": "First of all, thanks for your answer. The isInterface is a nice trick. And I know interfaces can have properties, they can&#39;t be delegated properties though, so I do not need to worry about them and allSuperclasses specifically states that there is no particular order to them. I however need them in some defined order. And while yes your answer does provide a solution, it doesn&#39;t answer why there is this constraint of not being able to call <code>declaredMemberProperties</code> on a <code>KClass&lt;in T&gt;</code>. Oh, and you also have not answered how to get the actual superclass."}], "tags": [], "owner": {"reputation": 5305, "user_id": 5818889, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6b8df2f6af3fd32042982001fac8407b?s=128&d=identicon&r=PG&f=1", "display_name": "glee8e", "link": "https://stackoverflow.com/users/5818889/glee8e"}, "is_accepted": false, "score": 0, "last_activity_date": 1492959629, "last_edit_date": 1492959629, "creation_date": 1492959173, "answer_id": 43572623, "question_id": 43569835, "link": "https://stackoverflow.com/questions/43569835/generics-on-kproperty1-getdelegate-too-restrictive/43572623#43572623", "title": "Generics on KProperty1.getDelegate too restrictive?", "body": "<p>In kotlin your <code>getProperties()</code> will probably look like this:</p>\n\n<pre><code>inline fun &lt;reified T:Any&gt; T.getProperties(): List&lt;MyProperty&gt; = T::class.declaredMemberProperties.asSequence()\n        .map { it.getDelegate(this) }\n        .filter(MyProperty::class::isInstance)\n        .map(MyProperty::class::safeCast)\n        .filterNotNull() \n        .distinct()\n        .toList()\n</code></pre>\n\n<p>And kotlin really don't have built in support for checking if a <code>KClass</code> represents an interface, which is really an awkward thing. Anyway, we have a workaround:</p>\n\n<pre><code>val KClass&lt;*&gt;.isInterface: Boolean\n    get() = constructors.isEmpty()\n</code></pre>\n\n<p>This is an extension property for arbitrary <code>KClass</code>, testing if it represents an interface. This is based on the principle that classes, be it abstract, open, inner or final, must have at least one constructor, while interface can't have any constructors at all. However, filtering interfaces away isn't a good idea, because in kotlin an <a href=\"http://kotlinlang.org/docs/reference/interfaces.html#properties-in-interfaces\" rel=\"nofollow noreferrer\">interface can also have properties</a>.</p>\n\n<p>Combining all the ideas above, we come to such result:</p>\n\n<pre><code>inline fun &lt;reified T : Any&gt; T.getProperties(): List&lt;MyProperty&gt; = T::class.allSuperclasses.asSequence()\n        .flatMap { it.declaredMemberProperties.asSequence() }\n        .map { @Suppress(\"UNCHECKED_CAST\") (it as KProperty1&lt;in T, *&gt;).getDelegate(this) }\n        .filter(MyProperty::class::isInstance)\n        .map(MyProperty::class::safeCast)\n        .filterNotNull()\n        .distinct()\n        .toList()\n</code></pre>\n\n<p>The werid unchecked cast is a workaround for the <code>allClasses</code> declaration. I didn't study its implementation too much so I don't know if it's a technical constrain or laziness of a tired programmer, but that star projection forced me to use an unchecked cast. We all know it will be safe though. </p>\n"}], "owner": {"reputation": 1022, "user_id": 3638966, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/720326815f0a1d2d4e35d159c163b93b?s=128&d=identicon&r=PG&f=1", "display_name": "diesieben07", "link": "https://stackoverflow.com/users/3638966/diesieben07"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 382, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1492959629, "creation_date": 1492942542, "last_edit_date": 1492951782, "question_id": 43569835, "link": "https://stackoverflow.com/questions/43569835/generics-on-kproperty1-getdelegate-too-restrictive", "title": "Generics on KProperty1.getDelegate too restrictive?", "body": "<p>I am trying to obtain all property delegates of a certain type in a class hierarchy. This is presenting me with some issues.\nFor a start, there seems to be no straightforward way to obtain a class' superclass in Kotlin. The first way I tried was to use Java's <code>Class.getSuperclass</code>:</p>\n\n<pre><code>private fun &lt;T : Any&gt; KClass&lt;T&gt;.getSuperclass(): KClass&lt;in T&gt;? = (java.superclass as? Class&lt;out Any&gt;)?.kotlin as KClass&lt;in T&gt;\n</code></pre>\n\n<p>But this requires an unchecked cast, because Kotlin will not allow me to convert a <code>Class&lt;in T&gt;</code> back to Kotlin, because apparently in T means it could be something that is not Any, whatever that might be (\"Type parameter has an upper bound 'Any' that cannot be satisfied capturing 'in' projection\").</p>\n\n<p>So I tried a pure Kotlin solution: First get all superclasses including interfaces (<code>KClass.superclasses</code>) and then filter out every interface. But there is nothing on <code>KClass</code> that tells me if it's an interface! So I have to go to Java for that again. And it again requires an unchecked cast, because for some reason <code>KClass.superclasses</code> is of type <code>List&lt;KClass&lt;*&gt;&gt;</code> and not <code>List&lt;KClass&lt;in T&gt;&gt;</code>:</p>\n\n<pre><code>private fun &lt;T : Any&gt; KClass&lt;T&gt;.getSuperclass123(): KClass&lt;in T&gt;? = superclasses.firstOrNull { it.java.isInterface } as KClass&lt;in T&gt;?\n</code></pre>\n\n<p>Am I missing something here? I must be.</p>\n\n<p>Now for the actual question, trying to obtain all property delegate instances in a class hierarchy. First I wrote a function to obtain the instances for one class:</p>\n\n<pre><code>private fun &lt;T : Any&gt; KClass&lt;T&gt;.getProperties(obj: T) =\n    declaredMemberProperties.also { it.forEach { it.isAccessible = true } }.asSequence().filter { it.getDelegate(obj) is MyPropertyDelegate }\n</code></pre>\n\n<p>Works fine. But of course I also need all the properties declared in superclasses. So naturally I tried to change the receiver to <code>KClass&lt;in T&gt;</code> which of course results in me not being able to call <code>declaredMemberProperties</code> anymore. How do I solve this?</p>\n\n<p>I already tried using <code>KClass.memberProperties</code>, but it falls short if a subclass overrides a property which is delegated in a parent class. In that case it will only list the overridden property, which does not allow me to access the property delegate instance.</p>\n\n<p><strong>Edit:</strong>\nI did some more testing, and the following Java code compiles just fine, as I would expect:\n</p>\n\n<pre><code>static &lt;T&gt; List&lt;MyProperty&gt; getProperties(KClass&lt;? super T&gt; clazz, T obj) {\n    return KClasses.getDeclaredMemberProperties(clazz).stream()\n            .map(p -&gt; p.getDelegate(obj))\n            .filter(MyProperty.class::isInstance)\n            .map(MyProperty.class::cast)\n            .collect(Collectors.toList());\n}\n</code></pre>\n\n<p>What would be the equivalent Kotlin code?</p>\n\n<p><strong>Edit\u00b2:</strong>\nSame for the super-class stuff. The following (albeit still ugly workaround) compiles in Java, but not in Kotlin (leaving out null-check here):\n</p>\n\n<pre><code>static &lt;T&gt; KClass&lt;? super T&gt; getSuperClass(KClass&lt;T&gt; clazz) {\n    return JvmClassMappingKt.getKotlinClass(JvmClassMappingKt.getJavaClass(clazz).getSuperclass());\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "kotlin-android-extensions", "kotlin-extension"], "answers": [{"comments": [{"owner": {"reputation": 2481, "user_id": 421467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wkFyw.jpg?s=128&g=1", "display_name": "Dr.jacky", "link": "https://stackoverflow.com/users/421467/dr-jacky"}, "edited": false, "score": 0, "creation_date": 1535021882, "post_id": 43568603, "comment_id": 90917711, "body": "In this case, it doesn&#39;t matter to write: <code>import kotlinx.android.synthetic.main.*</code>."}, {"owner": {"reputation": 1575, "user_id": 3759846, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TTvAt.png?s=128&g=1", "display_name": "Wajid", "link": "https://stackoverflow.com/users/3759846/wajid"}, "edited": false, "score": 0, "creation_date": 1542914859, "post_id": 43568603, "comment_id": 93747886, "body": "if your class is fragment or activity class then you should invalidate cache and restart, the error will be gone. If you are doing it outside fragment/activity then you need to do exactly as the answer says."}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 25, "last_activity_date": 1492933138, "creation_date": 1492933138, "answer_id": 43568603, "question_id": 43567538, "link": "https://stackoverflow.com/questions/43567538/kotlin-synthetic-extension-for-view/43568603#43568603", "title": "Kotlin synthetic extension for view", "body": "<p>What the error is trying to tell you is that you can only access views with Extensions from either within an <code>Activity</code> or a <code>Fragment</code>. This is because it does the exact same thing to find the views with the given IDs as what you'd be doing manually, it just calls <code>Activity.findViewById()</code> and <code>Fragment.getView().findViewById()</code>, and then does the type cast to the specific subclass of <code>View</code>. I'm guessing that your Controller is not an <code>Activity</code> or <code>Fragment</code>.</p>\n\n<p>There's another way to use Extensions, if you can pass in the root view of your layout to your controller somehow. Then you could do the following:</p>\n\n<pre><code>val title: TextView = rootView.title_whalemare\n</code></pre>\n\n<p>Again, this is just replacing the <code>View.findViewById()</code> call and the type cast.</p>\n"}], "owner": {"reputation": 603, "user_id": 5662244, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DQuGU.jpg?s=128&g=1", "display_name": "whalemare", "link": "https://stackoverflow.com/users/5662244/whalemare"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8324, "favorite_count": 1, "accepted_answer_id": 43568603, "answer_count": 1, "score": 17, "last_activity_date": 1613660886, "creation_date": 1492923418, "last_edit_date": 1613660886, "question_id": 43567538, "link": "https://stackoverflow.com/questions/43567538/kotlin-synthetic-extension-for-view", "title": "Kotlin synthetic extension for view", "body": "<p>I have a layout with some views, one of them has the id <code>title_whalemare</code></p>\n\n<pre><code>import kotlinx.android.synthetic.main.controller_settings.*\nimport kotlinx.android.synthetic.main.view_double_text.*\n\nclass MainSettingsController : BaseMvpController&lt;MvpView, MvpPresenter&gt;() {\n\n    val title: TextView = title_whalemare\n\n    override fun getLayout(): Int {\n        return R.layout.controller_settings\n    }\n}\n</code></pre>\n\n<p>I try find it with <code>kotlin extensions</code>, but I can't because I get the following error</p>\n\n<p><em>None of the following candidates is applicable because of receiver type mismatch</em>\n<a href=\"https://i.stack.imgur.com/chqBS.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/chqBS.png\" alt=\"None of the following candidates is applicable because of receiver type mismatch\"></a></p>\n\n<p><code>controller_settings.xml</code></p>\n\n<pre><code>&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n              xmlns:tools=\"http://schemas.android.com/tools\"\n              android:layout_width=\"match_parent\"\n              android:layout_height=\"match_parent\"\n              android:orientation=\"vertical\"&gt;\n\n    &lt;TextView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:id=\"@+id/title_whalemare\"/&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>Where is my mistake?</p>\n"}, {"tags": ["null", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 1, "creation_date": 1492933728, "post_id": 43567231, "comment_id": 74187372, "body": "To add to this, if you only had one variable with this issue, you could use <code>username?.let {}</code>, and the <code>it</code> inside would be the non-nullable type, because the <code>let</code> holds on to the value it was called on, ignoring any modifications to the actual variable. Having to do it nested here wouldn&#39;t look pretty though."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1492935264, "post_id": 43567231, "comment_id": 74187688, "body": "The easies fix is to use the not-null-assertion operator since you can guaranty the nothing bad happens here: <code>presenter.viewReady(this, username!!, projectName!!, buildNumber)</code>"}, {"owner": {"reputation": 3852, "user_id": 7079453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f35f4fd1c0eaa060ffdc533c89b481e9?s=128&d=identicon&r=PG&f=1", "display_name": "F. George", "link": "https://stackoverflow.com/users/7079453/f-george"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1492982946, "post_id": 43567231, "comment_id": 74203535, "body": "@voddan It might be the easiest fix, but getting used to <code>!!</code> will cause you difficult-to-debug problems later down the line."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1493014940, "post_id": 43567231, "comment_id": 74211372, "body": "@mEQ5aNLrK3lqs3kfSa5HbvsTWe0nIu ok, let me reformulate - using <code>!!</code> IS the correct way of solving problems sometimes, and I shell prove it in my answer"}], "tags": [], "owner": {"reputation": 3852, "user_id": 7079453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f35f4fd1c0eaa060ffdc533c89b481e9?s=128&d=identicon&r=PG&f=1", "display_name": "F. George", "link": "https://stackoverflow.com/users/7079453/f-george"}, "is_accepted": true, "score": 7, "last_activity_date": 1492920002, "last_edit_date": 1592644375, "creation_date": 1492920002, "answer_id": 43567231, "question_id": 43566907, "link": "https://stackoverflow.com/questions/43566907/why-does-smart-cast-fail-for-nullable-value-after-setting-value-and-checking-if/43567231#43567231", "title": "Why does smart cast fail for nullable value after setting value and checking if it&#39;s null?", "body": "<p>The Kotlin compiler cannot prove that either <code>username</code> or <code>projectName</code> are mutated by another thread at the same time. The field being private does not help either, as reflection may bypass this.</p>\n<p>The relevant documentation for this is under <a href=\"https://kotlinlang.org/docs/reference/typecasts.html\" rel=\"noreferrer\">Type Checks and Casts</a>:</p>\n<blockquote>\n<p>Note that smart casts do not work when the compiler cannot guarantee that the variable cannot change between the check and the usage. More specifically, smart casts are applicable according to the following rules:</p>\n<ul>\n<li>val local variables - always;</li>\n<li>val properties - if the property is private or internal or the check is performed in the same module where the property is declared. Smart casts aren't applicable to open properties or properties that have custom getters;</li>\n<li>var local variables - if the variable is not modified between the check and the usage and is not captured in a lambda that modifies it;</li>\n<li><strong>var properties - never (because the variable can be modified at any time by other code).</strong></li>\n</ul>\n</blockquote>\n<p>Capture the property reference in a local variable instead.</p>\n<blockquote>\n<p>that their use as params is wrapped in an if statement checking their value.</p>\n</blockquote>\n<p>if-statements in Kotlin do not 'capture' a property. When you declare an if-statement including a property and access it again inside the block, the compiler <em>may</em> smart cast it for you. But the rules for accessing are still the same - the getter will be invoked twice.</p>\n"}, {"tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 1, "last_activity_date": 1493016471, "last_edit_date": 1493016471, "creation_date": 1493015782, "answer_id": 43581307, "question_id": 43566907, "link": "https://stackoverflow.com/questions/43566907/why-does-smart-cast-fail-for-nullable-value-after-setting-value-and-checking-if/43581307#43581307", "title": "Why does smart cast fail for nullable value after setting value and checking if it&#39;s null?", "body": "<p>As @mEQ5aNLrK3lqs3kfSa5HbvsTWe0nIu pointed out, Kotlin does not activate smart casting for <code>var</code> properties. I am not really sure why this strategy was chosen, since <code>private var</code> could be smart-casted in pre-release versions, but that is what we have.</p>\n\n<p>Now, suppose you are sure those properties are not mutated by another thread since they are <code>private</code> and no reflection is used. Thereby the <code>if-null</code> check insures the properties do not contain nulls, but the Kotlin compiler does not believe that. </p>\n\n<p>In such a situation I would strongly recommend using the not-null-assertion operator <code>!!</code>: </p>\n\n<pre><code>presenter.viewReady(this, username!!, projectName!!, buildNumber)\n</code></pre>\n\n<p>Many recommend avoiding <code>!!</code> to improve your code style, but its meaning is literally <code>\"the compiler is dumb, it is obviously not a null, notify me if I am wrong\"</code>. Situations such as yours are the reason it was introduced in the language in the first place.</p>\n\n<p>There are other workarounds that include saving the current value of the property into a local <code>val</code> (explicitly or implicitly via helper functions), but I believe they are inappropriate here, because they do not express your intent. In some situations you need save-current-value-and-work-with-it semantics, but here you need make-the-compiler-trust-the-code semantics, and they are obviously not the same.</p>\n"}], "owner": {"reputation": 1509, "user_id": 375830, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/43aa4c0ca13734c632d1691d859aa5f7?s=128&d=identicon&r=PG", "display_name": "codysehl", "link": "https://stackoverflow.com/users/375830/codysehl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 721, "favorite_count": 0, "accepted_answer_id": 43567231, "answer_count": 2, "score": 3, "last_activity_date": 1493016471, "creation_date": 1492915965, "question_id": 43566907, "link": "https://stackoverflow.com/questions/43566907/why-does-smart-cast-fail-for-nullable-value-after-setting-value-and-checking-if", "title": "Why does smart cast fail for nullable value after setting value and checking if it&#39;s null?", "body": "<p>Lets say I have the following class:</p>\n\n<pre><code>class MyClass {\n    private var username: String? = null\n    private var projectName: String? = null\n    private var buildNumber: Int = -1\n    private val presenter: Presenter = Presenter()\n\n    fun present() {\n        username = \"\"\n        projectName = \"\"\n\n        if (username != null &amp;&amp; projectName != null &amp;&amp; buildNumber != -1) {\n            presenter.viewReady(this, username, projectName, buildNumber)\n        } else {\n            throw Exception(\"You did something bad!\")\n        }\n    }\n}\n</code></pre>\n\n<p>Why is it that I get the error <code>Smart cast to 'String' is impossible, because 'username' is a mutable property that could have been changed by this time</code>?</p>\n\n<p>Is it something to do with not being thread safe?</p>\n\n<p>Based on the <a href=\"https://kotlinlang.org/docs/reference/null-safety.html\" rel=\"nofollow noreferrer\">null safety docs</a>, I thought this would work for either one of 1. that <code>username</code> and <code>projectName</code> are set in the same function above their use as params and 2. that their use as params is wrapped in an if statement checking their value. </p>\n"}, {"tags": ["android", "proguard", "kotlin"], "comments": [{"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 1, "creation_date": 1493027040, "post_id": 43565633, "comment_id": 74218385, "body": "The information being lost is stored in @KotlinMetadata annotations. You need to make sure that your ProGuard config does not delete those annotations."}, {"owner": {"reputation": 934, "user_id": 1815209, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a6cbca63e8eae12b8959f53c6e4e5133?s=128&d=identicon&r=PG", "display_name": "quezak", "link": "https://stackoverflow.com/users/1815209/quezak"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1493033066, "post_id": 43565633, "comment_id": 74222423, "body": "@yole I have in my proguard config: <code>-keepattributes *Annotation*,Signature,InnerClasses,EnclosingMethod</code>. So no annotations should be deleted at all. And with the <code>-keep</code> commands for my model classes, they shouldn&#39;t be stripped at all, should they? Maybe do you know of any proguard trick to make it so?"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1493033454, "post_id": 43565633, "comment_id": 74222776, "body": "I personally don&#39;t have much experience with proguard. You can use javap on the .class files after proguard to make sure the annotation is there."}, {"owner": {"reputation": 934, "user_id": 1815209, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a6cbca63e8eae12b8959f53c6e4e5133?s=128&d=identicon&r=PG", "display_name": "quezak", "link": "https://stackoverflow.com/users/1815209/quezak"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1493033950, "post_id": 43565633, "comment_id": 74223124, "body": "actually, you suggested the right thing to do! I had to tell proguard to <code>-keep class kotlin.Metadata { *; }</code> and all the details are there! Thanks! It&#39;s really weird that it&#39;s not enough to tell it to keep my models intact though.  If you want to post this as an answer, I&#39;ll be happy to accept it."}], "answers": [{"tags": [], "owner": {"reputation": 934, "user_id": 1815209, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a6cbca63e8eae12b8959f53c6e4e5133?s=128&d=identicon&r=PG", "display_name": "quezak", "link": "https://stackoverflow.com/users/1815209/quezak"}, "is_accepted": true, "score": 8, "last_activity_date": 1493224487, "creation_date": 1493224487, "answer_id": 43639913, "question_id": 43565633, "link": "https://stackoverflow.com/questions/43565633/kotlin-proguard-erases-properties-attributes/43639913#43639913", "title": "Kotlin: ProGuard erases properties attributes", "body": "<p>Thanks to the suggestion from @yole in question comments, I've been able to make this work. Even though my classes were configured to be kept by ProGuard, it stripped the <code>kotlin.Metadata</code> annotations from them. These annotatons are where Kotlin stores all the attributes I was missing. The solution is to prevent ProGuard from deleting them, adding to configuration:</p>\n\n<pre><code>-keep class kotlin.Metadata { *; }\n</code></pre>\n\n<p>(on a side note: it's weird that it's not included in the default config, at least if you're using the <code>kotlin.reflect.full</code> package. Or at least it should be mentioned clearly somewhere in the docs...)</p>\n"}], "owner": {"reputation": 934, "user_id": 1815209, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a6cbca63e8eae12b8959f53c6e4e5133?s=128&d=identicon&r=PG", "display_name": "quezak", "link": "https://stackoverflow.com/users/1815209/quezak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2294, "favorite_count": 2, "accepted_answer_id": 43639913, "answer_count": 1, "score": 3, "last_activity_date": 1493224487, "creation_date": 1492902915, "last_edit_date": 1492995163, "question_id": 43565633, "link": "https://stackoverflow.com/questions/43565633/kotlin-proguard-erases-properties-attributes", "title": "Kotlin: ProGuard erases properties attributes", "body": "<p><strong>TL;DR</strong>: with proguard enabled, when using reflection, my properties look private, non-nullable and without annotations, despite proguard config that should keep all these attributes.</p>\n\n<p>I have some simple <code>data class</code>es with public properties to serve as data models in my Android app. Later, when doing generic [de]serialization of said classes, I filter the property list like this:</p>\n\n<pre><code>val properties = instance::class.memberProperties\n        .filter { it.visibility == KVisibility.PUBLIC } // &amp;&amp; some other conditions, unrelated here\n        .filterIsInstance&lt;KMutableProperty&lt;*&gt;&gt;()\n</code></pre>\n\n<p>It works normally on my debug builds (I mean it selects the properties I want it to). But, when doing a <strong>release</strong> build, where proguard is active, <strong>the result is empty</strong>. To check why, I logged all the relevant stuff about the properties of one class -- turns out their <code>visibility</code> field reads <code>PRIVATE</code> (and all other attributes remain the same as on a debug build).</p>\n\n<p>I already have a line in proguard config to keep all the models:</p>\n\n<pre><code>-keepclassmembers class * extends com.models.package.name.BaseModel { *; }\n</code></pre>\n\n<p>I tried this one before, with same result:</p>\n\n<pre><code>-keep class com.models.package.name.** { *; }\n</code></pre>\n\n<p>Why/how does proguard affect property visibility? Should I modify the config somehow? Or am I missing something else here? </p>\n\n<hr>\n\n<p><strong>UPDATE</strong>: It seems like visibility is not the only thing. <code>prop.returnType.isMarkedNullable</code> also doesn't work, it returns <code>false</code> for properties declared nullable. And annotations also seem to get lost, even though I asked proguard to keep them. Is there any way to work around this? It pretty much renders 2 weeks of my work useless...</p>\n"}, {"tags": ["kotlin", "grpc", "jsr223"], "answers": [{"tags": [], "owner": {"reputation": 326, "user_id": 5660200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a053aa187ae95a70bb030ff97abdd0ed?s=128&d=identicon&r=PG", "display_name": "Ilya Chernikov", "link": "https://stackoverflow.com/users/5660200/ilya-chernikov"}, "is_accepted": true, "score": 3, "last_activity_date": 1493023599, "creation_date": 1493023599, "answer_id": 43583533, "question_id": 43565407, "link": "https://stackoverflow.com/questions/43565407/guava-conflicts-when-using-kotlin-script-util-for-jsr-223-support-in-applicati/43583533#43583533", "title": "Guava conflicts when using kotlin-script-util (for JSR-223 support) in application that uses gRPC", "body": "<p>Unfortunately there is no ready-made solution for this problem. We'll try to address it in one of the next releases. (see <a href=\"https://youtrack.jetbrains.com/issue/KT-17561\" rel=\"nofollow noreferrer\">KT-17556</a> for the relevant issue).</p>\n\n<p>As a workaround, you can, for now, compile your own variant of the kotlin-script-utils. Just copy the project, change the appropriate dependency to the kotlin-compiler-embeddable, and then fix a few compilation errors by updating import statements (the <code>com.intellij.openapi.*</code> packages are relocated to <code>org.jetbrains.kotlin.com.intellij.openapi.*</code> in the kotlin-compiler-embeddable.) </p>\n"}], "owner": {"reputation": 68, "user_id": 5813817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835ff41fc7f0cfefc80ab96f209a5cca?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/5813817/tim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 337, "favorite_count": 0, "accepted_answer_id": 43583533, "answer_count": 1, "score": 3, "last_activity_date": 1493023599, "creation_date": 1492900869, "question_id": 43565407, "link": "https://stackoverflow.com/questions/43565407/guava-conflicts-when-using-kotlin-script-util-for-jsr-223-support-in-applicati", "title": "Guava conflicts when using kotlin-script-util (for JSR-223 support) in application that uses gRPC", "body": "<p>I have a Spring based web application which uses gRPC to communicate with my middle tier.  I would like to be able to use the kotlin-script-util for the JSR-223 scripting engine.  Being that kotlin-script-util relies on the kotlin-compiler dependency (which uses Guava), I am getting version conflicts with gRPC dependencies.</p>\n\n<p>I see that there is a shaded kotlin-compiler-embeddable jar, but no kotlin-script-util that utilizes this dependency.</p>\n\n<p>Is there something I can do to make these dependencies work together?</p>\n\n<p>kotlin-script-util: 1.1.1<br/>\ngRPC: 1.2.0</p>\n"}, {"tags": ["android", "kotlin", "rx-java2", "rx-kotlin", "kotlin-interop"], "comments": [{"owner": {"reputation": 19872, "user_id": 804967, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/JVZu9.jpg?s=128&g=1", "display_name": "fweigl", "link": "https://stackoverflow.com/users/804967/fweigl"}, "edited": false, "score": 0, "creation_date": 1492895505, "post_id": 43564621, "comment_id": 74180089, "body": "<a href=\"https://github.com/ReactiveX/RxAndroid/issues/348\" rel=\"nofollow noreferrer\">github.com/ReactiveX/RxAndroid/issues/348</a> might this help? What&#39;s your rx related imports?"}, {"owner": {"reputation": 573, "user_id": 6411538, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh5.googleusercontent.com/-GS6rh-AT3pc/AAAAAAAAAAI/AAAAAAAAABY/8ktg0X7KLrI/photo.jpg?sz=128", "display_name": "Nathan Horrigan", "link": "https://stackoverflow.com/users/6411538/nathan-horrigan"}, "reply_to_user": {"reputation": 19872, "user_id": 804967, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/JVZu9.jpg?s=128&g=1", "display_name": "fweigl", "link": "https://stackoverflow.com/users/804967/fweigl"}, "edited": false, "score": 0, "creation_date": 1492896704, "post_id": 43564621, "comment_id": 74180426, "body": "Thanks, @Ascorbin. That issue post did help and I realised that the library I was using imported &#39;rx.Observable&#39;, so I changed it to &#39;io.reactivex.Observable&#39; but that hasn&#39;t solved the issue."}], "answers": [{"comments": [{"owner": {"reputation": 573, "user_id": 6411538, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh5.googleusercontent.com/-GS6rh-AT3pc/AAAAAAAAAAI/AAAAAAAAABY/8ktg0X7KLrI/photo.jpg?sz=128", "display_name": "Nathan Horrigan", "link": "https://stackoverflow.com/users/6411538/nathan-horrigan"}, "edited": false, "score": 0, "creation_date": 1492940785, "post_id": 43565795, "comment_id": 74188993, "body": "Thanks for the clear explanation! What&#39;s weird is that I upgraded library to RxJava2 and the problem still persists."}, {"owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "reply_to_user": {"reputation": 573, "user_id": 6411538, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh5.googleusercontent.com/-GS6rh-AT3pc/AAAAAAAAAAI/AAAAAAAAABY/8ktg0X7KLrI/photo.jpg?sz=128", "display_name": "Nathan Horrigan", "link": "https://stackoverflow.com/users/6411538/nathan-horrigan"}, "edited": false, "score": 0, "creation_date": 1492950207, "post_id": 43565795, "comment_id": 74191753, "body": "RxJava and RxJava 2 use completely different packages, so if RxJava 1 is still available simply adding RxJava 2 as a dependency will change nothing."}, {"owner": {"reputation": 573, "user_id": 6411538, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh5.googleusercontent.com/-GS6rh-AT3pc/AAAAAAAAAAI/AAAAAAAAABY/8ktg0X7KLrI/photo.jpg?sz=128", "display_name": "Nathan Horrigan", "link": "https://stackoverflow.com/users/6411538/nathan-horrigan"}, "edited": false, "score": 0, "creation_date": 1493062677, "post_id": 43565795, "comment_id": 74242831, "body": "Yep I Know, I switched imports from &#39;rx.Observable&#39; to &#39;io.reactivex.Observable&#39; also. Still no success :("}, {"owner": {"reputation": 8468, "user_id": 181211, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/24e5fa9198e7d1c77bc827f16a439bc6?s=128&d=identicon&r=PG", "display_name": "CrimsonX", "link": "https://stackoverflow.com/users/181211/crimsonx"}, "edited": false, "score": 0, "creation_date": 1573158672, "post_id": 43565795, "comment_id": 103800658, "body": "In case anyone else is receiving this error while using Retrofit, this post is helpful in resolving retrofit RxJava1 to RxJava2 errors <a href=\"https://stackoverflow.com/questions/43434073/unable-to-create-call-adapter-for-io-reactivex-observable\" title=\"unable to create call adapter for io reactivex observable\">stackoverflow.com/questions/43434073/&hellip;</a>"}], "tags": [], "owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "is_accepted": false, "score": 8, "last_activity_date": 1492904208, "creation_date": 1492904208, "answer_id": 43565795, "question_id": 43564621, "link": "https://stackoverflow.com/questions/43564621/cant-observeon-main-thread-with-rxkotlin/43565795#43565795", "title": "Cant &#39;observeOn&#39; main thread with RxKotlin", "body": "<pre><code>  Required: rx.Scheduler!\n</code></pre>\n\n<p><code>Required</code> means the signature is <code>Observable.observeOn(rx.Scheduler)</code></p>\n\n<pre><code>  Found: io.reactivex.Scheduler!\n</code></pre>\n\n<p><code>Found</code> means the signature is <code>io.reactivex.Scheduler AndroidSchedulers.mainThread()</code></p>\n\n<p>This means that the <code>Observable</code> is a RxJava 1 observable, while the RxAndroid version used is built for RxJava 2. Since you mentioned that the observable is provided by a library it means that library is built using RxJava 1.</p>\n\n<p>You have 3 options to fix this:</p>\n\n<ol>\n<li>Figure out if the library in question has an RxJava 2 version, or contribute those updates to the project yourself.</li>\n<li>Use <a href=\"https://github.com/akarnokd/RxJava2Interop\" rel=\"noreferrer\">akarnokd/RxJava2Interop</a> to convert the old <code>Observable</code> to RxJava 2. (<code>RxJavaInterop.toV2Observable(Observable);</code>)</li>\n<li>Switch the other dependencies back to RxJava 1.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 264, "user_id": 2606305, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/cwcY1.jpg?s=128&g=1", "display_name": "TSG anti SO dark forces", "link": "https://stackoverflow.com/users/2606305/tsg-anti-so-dark-forces"}, "is_accepted": false, "score": 5, "last_activity_date": 1613697008, "last_edit_date": 1613697008, "creation_date": 1512028223, "answer_id": 47568369, "question_id": 43564621, "link": "https://stackoverflow.com/questions/43564621/cant-observeon-main-thread-with-rxkotlin/47568369#47568369", "title": "Cant &#39;observeOn&#39; main thread with RxKotlin", "body": "<p>please include this in your gradle import</p>\n<pre><code>rxandroid_version=&quot;2.0.1&quot;\n\nimplementation &quot;io.reactivex.rxjava2:rxandroid:$rxandroid_version&quot;\n</code></pre>\n<p>add this to your project</p>\n<pre><code>import io.reactivex.android.schedulers.AndroidSchedulers\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4200, "user_id": 10699119, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aYUPn.jpg?s=128&g=1", "display_name": "sana ebadi", "link": "https://stackoverflow.com/users/10699119/sana-ebadi"}, "is_accepted": false, "score": 5, "last_activity_date": 1591788119, "last_edit_date": 1591788119, "creation_date": 1576771025, "answer_id": 59413128, "question_id": 43564621, "link": "https://stackoverflow.com/questions/43564621/cant-observeon-main-thread-with-rxkotlin/59413128#59413128", "title": "Cant &#39;observeOn&#39; main thread with RxKotlin", "body": "<p>1.add :</p>\n\n<pre><code>   //RX JAVA\n    implementation \"io.reactivex.rxjava3:rxjava:3.0.0-RC6\"\n\n    implementation \"io.reactivex.rxjava2:rxandroid:2.0.2\"\n</code></pre>\n\n<p>2.Write this code :</p>\n\n<pre><code>  val taskObservable: Observable&lt;Task&gt; = Observable.fromIterable(DataSource.createTaskList())\n            .subscribeOn(Schedulers.io())\n            .observeOn(AndroidSchedulers.mainThread())\n\n    }\n</code></pre>\n\n<p>3.add these imports :</p>\n\n<pre><code>import io.reactivex.Observable\nimport io.reactivex.android.schedulers.AndroidSchedulers\nimport io.reactivex.disposables.Disposable\nimport io.reactivex.functions.Function\nimport io.reactivex.schedulers.Schedulers\n</code></pre>\n\n<p><strong>NOTE :</strong></p>\n\n<p>if you are using KOTLIN, So it is better to use RX Kotlin!\njust add two lines in your build.gradle :</p>\n\n<pre><code>//rxkotlin\n    implementation \"io.reactivex.rxjava2:rxkotlin:2.4.0\"\n    implementation \"io.reactivex.rxjava2:rxandroid:2.0.2\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1002, "user_id": 2049623, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/TuOks.png?s=128&g=1", "display_name": "Keval Langalia", "link": "https://stackoverflow.com/users/2049623/keval-langalia"}, "edited": false, "score": 1, "creation_date": 1613700065, "post_id": 66268837, "comment_id": 117163392, "body": "just a suggestion: When answering old question with multiple solutions with upvotes, try to provide some more details to understand the answer in context to the original question. Also provide the link to the documentation if possible."}, {"owner": {"reputation": 1, "user_id": 15238613, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GgcwwfUl2QauQ-fruODjAeG2hcl5zNPXptsbhjozg=k-s128", "display_name": "Mojtaba Sheikhy", "link": "https://stackoverflow.com/users/15238613/mojtaba-sheikhy"}, "reply_to_user": {"reputation": 1002, "user_id": 2049623, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/TuOks.png?s=128&g=1", "display_name": "Keval Langalia", "link": "https://stackoverflow.com/users/2049623/keval-langalia"}, "edited": false, "score": 0, "creation_date": 1615627595, "post_id": 66268837, "comment_id": 117753561, "body": "thx for suggestion\ud83d\udc4d\ud83d\udc4d"}], "tags": [], "owner": {"reputation": 1, "user_id": 15238613, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GgcwwfUl2QauQ-fruODjAeG2hcl5zNPXptsbhjozg=k-s128", "display_name": "Mojtaba Sheikhy", "link": "https://stackoverflow.com/users/15238613/mojtaba-sheikhy"}, "is_accepted": false, "score": 0, "last_activity_date": 1613685949, "creation_date": 1613685949, "answer_id": 66268837, "question_id": 43564621, "link": "https://stackoverflow.com/questions/43564621/cant-observeon-main-thread-with-rxkotlin/66268837#66268837", "title": "Cant &#39;observeOn&#39; main thread with RxKotlin", "body": "<p>use</p>\n<p><code>.subscribeOn(io.reactivex.rxjava3.schedulers.Schedulers.io())</code></p>\n"}], "owner": {"reputation": 573, "user_id": 6411538, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh5.googleusercontent.com/-GS6rh-AT3pc/AAAAAAAAAAI/AAAAAAAAABY/8ktg0X7KLrI/photo.jpg?sz=128", "display_name": "Nathan Horrigan", "link": "https://stackoverflow.com/users/6411538/nathan-horrigan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4096, "favorite_count": 2, "answer_count": 4, "score": 6, "last_activity_date": 1613697008, "creation_date": 1492895193, "question_id": 43564621, "link": "https://stackoverflow.com/questions/43564621/cant-observeon-main-thread-with-rxkotlin", "title": "Cant &#39;observeOn&#39; main thread with RxKotlin", "body": "<p>I'm trying to observe observable on main thread by using:</p>\n\n<pre><code>    // Kotlin Code\n    Observable\n      .observeOn(AndroidSchedulers.mainThread())\n</code></pre>\n\n<p>but I'm getting following error:</p>\n\n<pre><code>    Type Mismatch:\n      Required: rx.Scheduler!\n      Found: io.reactivex.Scheduler!\n</code></pre>\n\n<p>The Observable I'm subscribing to is from a Library that is written in Java and therefore uses RxJava.</p>\n\n<p>Am i being stupid and missing something? I'm puzzeled :$</p>\n\n<p>Thanks in advance :)</p>\n"}, {"tags": ["list", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 867, "user_id": 5500449, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/439709b90e57d0ba4f2d1f0b065bb16e?s=128&d=identicon&r=PG&f=1", "display_name": "Jefferson Tavares", "link": "https://stackoverflow.com/users/5500449/jefferson-tavares"}, "is_accepted": false, "score": 0, "last_activity_date": 1492895807, "creation_date": 1492895807, "answer_id": 43564722, "question_id": 43564616, "link": "https://stackoverflow.com/questions/43564616/create-a-list-from-another/43564722#43564722", "title": "Create a list from another", "body": "<p>You can do it like this </p>\n\n<pre><code>fun newList():List&lt;Int&gt;{    \n    val values =listOf(1,2,3,4,5,6) //Type can be inferred\n    return values.plus(7)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 14, "last_activity_date": 1492896893, "creation_date": 1492896893, "answer_id": 43564877, "question_id": 43564616, "link": "https://stackoverflow.com/questions/43564616/create-a-list-from-another/43564877#43564877", "title": "Create a list from another", "body": "<p>The Kotlin lists have <a href=\"https://kotlinlang.org/docs/reference/operator-overloading.html#operator-overloading\" rel=\"noreferrer\">the <code>plus</code> operator</a> overloaded <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/plus.html\" rel=\"noreferrer\">in <code>kotlin-stdlib</code></a>, so you can add an item to a list:</p>\n\n<pre><code>val values = listOf(1, 2, 3, 4, 5, 6)\nreturn values + 7\n</code></pre>\n\n<p>There's also an overload that adds another list:</p>\n\n<pre><code>val values = listOf(1, 2, 3, 4, 5, 6)\nreturn listOf(-1, 0) + values + listOf(7, 8)\n</code></pre>\n\n<p>Note that in both cases a new list is created, and the elements are copied into it. </p>\n\n<p>For <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-mutable-list/\" rel=\"noreferrer\"><code>MutableList&lt;T&gt;</code></a> (which has mutating functions, in contrast with <code>List&lt;T&gt;</code>), there is a <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/plus-assign.html\" rel=\"noreferrer\"><code>plusAssign</code> operator implementation</a>, that can be used as follows:</p>\n\n<pre><code>fun newList(): List&lt;Int&gt; {    \n    val values = mutableListOf(1, 2, 3, 4, 5, 6)\n    values += 7\n    values += listOf(8, 9)\n    return values\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 953, "user_id": 6763724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KasE6zPK7mA/AAAAAAAAAAI/AAAAAAAAABQ/r3oBivz_Atg/photo.jpg?sz=128", "display_name": "Gary LO", "link": "https://stackoverflow.com/users/6763724/gary-lo"}, "is_accepted": false, "score": 3, "last_activity_date": 1493049494, "creation_date": 1493049494, "answer_id": 43592750, "question_id": 43564616, "link": "https://stackoverflow.com/questions/43564616/create-a-list-from-another/43592750#43592750", "title": "Create a list from another", "body": "<p>A different approach by using spread operator. Maybe in some case would be simpler than using <code>+</code> sign or <code>mutableListOf</code></p>\n\n<pre><code>fun newList(): List&lt;Int&gt;{\n    val values = listOf(1,2,3,4,5,6)\n    return listOf(7, *values.toTypedArray(), 8, 9)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6589, "user_id": 968988, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/fRutg.jpg?s=128&g=1", "display_name": "Nicolas Zozol", "link": "https://stackoverflow.com/users/968988/nicolas-zozol"}, "is_accepted": false, "score": 0, "last_activity_date": 1493151314, "creation_date": 1493151314, "answer_id": 43620155, "question_id": 43564616, "link": "https://stackoverflow.com/questions/43564616/create-a-list-from-another/43620155#43620155", "title": "Create a list from another", "body": "<p>I wanted a Scala-like with <code>for</code> and <code>yield</code>. It's pretty good in - currently experimental - coroutines :</p>\n\n<pre><code>fun testYield(max:Int): List&lt;Int&gt; {\n\n    val values = buildSequence{\n        for (i in 1..max){\n            yield(i)\n        }\n    }\n    return values.toList();\n}\n</code></pre>\n\n<p>Or in shorter way:</p>\n\n<pre><code>fun testYieldFast(max: Int) = buildSequence {\n    for (i in 1..max)\n        yield(i)\n}.toList();\n</code></pre>\n\n<p>It allows fast immutable lazy construction, where frequent concatenation are usually slow with immutable lists.</p>\n"}], "owner": {"reputation": 6589, "user_id": 968988, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/fRutg.jpg?s=128&g=1", "display_name": "Nicolas Zozol", "link": "https://stackoverflow.com/users/968988/nicolas-zozol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8314, "favorite_count": 0, "accepted_answer_id": 43564877, "answer_count": 4, "score": 12, "last_activity_date": 1569241388, "creation_date": 1492895176, "last_edit_date": 1569241388, "question_id": 43564616, "link": "https://stackoverflow.com/questions/43564616/create-a-list-from-another", "title": "Create a list from another", "body": "<p>Let say I have some values in a List. I would like to return another list with a new element</p>\n\n<pre><code>fun newList():List&lt;Int&gt;{    \n    val values =listOf&lt;Int&gt;(1,2,3,4,5,6);\n    return 7::values; // something like that\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 867, "user_id": 5500449, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/439709b90e57d0ba4f2d1f0b065bb16e?s=128&d=identicon&r=PG&f=1", "display_name": "Jefferson Tavares", "link": "https://stackoverflow.com/users/5500449/jefferson-tavares"}, "is_accepted": true, "score": 4, "last_activity_date": 1492868028, "creation_date": 1492868028, "answer_id": 43559877, "question_id": 43559670, "link": "https://stackoverflow.com/questions/43559670/kotlin-declare-a-generic-class-with-a-type-param-which-is-generic/43559877#43559877", "title": "Kotlin - declare a generic class with a type param which is generic", "body": "<p>You need to pass the parameter to the <code>BaseMVPPresenter</code>. You can add a second parameter to your abstract class as follows</p>\n\n<pre><code>abstract class BaseMvpActivity&lt;V: BaseMvpView, T : BaseMvpPresenter&lt;V&gt;&gt; : BaseActivity(), BaseMvpView {\n}\n</code></pre>\n\n<p>so lets say you're creating a view to show posts, then you would do something like this: </p>\n\n<pre><code>class Activity : BaseMVPActivity&lt;PostsView, PostPresenter&lt;PostView&gt;() {\n    //Here comes your code\n}\n</code></pre>\n\n<p>Hope this helps :)</p>\n"}], "owner": {"reputation": 1671, "user_id": 1346390, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a4cac5a426146b5ec3d44fcd9a0854fe?s=128&d=identicon&r=PG&f=1", "display_name": "Valentin", "link": "https://stackoverflow.com/users/1346390/valentin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2471, "favorite_count": 0, "accepted_answer_id": 43559877, "answer_count": 1, "score": 3, "last_activity_date": 1492868028, "creation_date": 1492866900, "last_edit_date": 1492867475, "question_id": 43559670, "link": "https://stackoverflow.com/questions/43559670/kotlin-declare-a-generic-class-with-a-type-param-which-is-generic", "title": "Kotlin - declare a generic class with a type param which is generic", "body": "<p>So I have a BasePresenter class like so. BaseMvpView is an interface</p>\n\n<pre><code>open class BaseMvpPresenter&lt;View : BaseMvpView&gt; {\n}\n</code></pre>\n\n<p>I am trying to create a BaseMvpActivity class which is parameterized with a BaseMvpPresenter like so:</p>\n\n<pre><code>abstract class BaseMvpActivity&lt;T : BaseMvpPresenter&gt; : BaseActivity(), BaseMvpView {\n}\n</code></pre>\n\n<p>But I get the following error: </p>\n\n<pre><code>One type argument expected for class BaseMvpPresenter&lt;View: BaseMvpView&gt; \n</code></pre>\n\n<p>How do I properly declare this? I want to be able to use BaseMvpActivity as so:</p>\n\n<pre><code>abstract class BaseMvpActivity&lt;T : BaseMvpPresenter&lt;U&gt;, U : BaseMvpView&gt; : BaseActivity(), BaseMvpView {\n\n    abstract var presenter: T\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        presenter.onViewCreated(this)\n    }\n\n    override fun onDestroy() {\n        presenter.onViewDestroyed()\n        super.onDestroy()\n    }\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": false, "score": 24, "last_activity_date": 1492784399, "last_edit_date": 1492784399, "creation_date": 1492777855, "answer_id": 43542805, "question_id": 43542599, "link": "https://stackoverflow.com/questions/43542599/how-to-simplify-multiple-equals-checks-in-if-condition/43542805#43542805", "title": "How to simplify multiple equals checks in if condition?", "body": "<p>First, you can use the <a href=\"https://kotlinlang.org/docs/reference/equality.html#structural-equality\" rel=\"noreferrer\">structural equality operator <code>==</code></a>, which is translated to the <code>.equals(...)</code> calls automatically: <code>translation == TRANSLATION_X</code> instead of <code>translation.equals(TRANSLATION_X)</code>.</p>\n\n<p>Then, you can use the <a href=\"https://kotlinlang.org/docs/reference/control-flow.html#when-expression\" rel=\"noreferrer\"><code>when</code> statement</a>:</p>\n\n<pre><code>when (translation) {\n    TRANSLATION_X, TRANSLATION_Y, TRANSLATION_Z -&gt; return\n    else -&gt; translation = TRANSLATION_X\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 1, "creation_date": 1492787188, "post_id": 43542825, "comment_id": 74144298, "body": "Note: this code does not preserve the semantics of the original piece of code in the question: <code>val translation = ...</code> will just shadow the <code>translation</code> from the outer scope (or won&#39;t compile if that&#39;s a local variable), and <code>translation</code> will not be reassigned."}], "tags": [], "owner": {"reputation": 96, "user_id": 7666746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc37ba66d1fddfccb3fa39fa58f7809d?s=128&d=identicon&r=PG&f=1", "display_name": "user7666746", "link": "https://stackoverflow.com/users/7666746/user7666746"}, "is_accepted": false, "score": 5, "last_activity_date": 1492777908, "creation_date": 1492777908, "answer_id": 43542825, "question_id": 43542599, "link": "https://stackoverflow.com/questions/43542599/how-to-simplify-multiple-equals-checks-in-if-condition/43542825#43542825", "title": "How to simplify multiple equals checks in if condition?", "body": "<p>A when statement seems appropriated in this situation :</p>\n\n<pre><code>val translation = when( translation ) {\n    TRANSLATION_X -&gt; translation\n    TRANSLATION_Y -&gt; translation\n    TRANSLATION_Z -&gt; translation\n    else TRANSLATION_X\n}\n</code></pre>\n\n<p>I think you can also group the three similar cases in one sentence like this :</p>\n\n<pre><code>val translation = when( translation ) {\n    TRANSLATION_X, TRANSLATION_Y, TRANSLATION_Z -&gt; translation\n    else TRANSLATION_X\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 1, "creation_date": 1492789271, "post_id": 43546226, "comment_id": 74145710, "body": "I believe a lookup in a three-items set is faster  either when it is an <code>EnumSet</code> or when the <code>equals</code> check is quite expensive while <code>hashCode</code> calculation is not. Otherwise, especially with default <code>equals</code> implementation (i.e. identity equals) and primitives, a set will hardly give any performance improvement."}, {"owner": {"reputation": 10434, "user_id": 1007991, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a1254dabbec32d7cbc502dfd2fd0438d?s=128&d=identicon&r=PG", "display_name": "Renato", "link": "https://stackoverflow.com/users/1007991/renato"}, "reply_to_user": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 1, "creation_date": 1492789378, "post_id": 43546226, "comment_id": 74145773, "body": "This depends on a lot of things. But sure, might not be more efficient, that&#39;s why I said <code>may be more efficient</code>."}], "tags": [], "owner": {"reputation": 10434, "user_id": 1007991, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a1254dabbec32d7cbc502dfd2fd0438d?s=128&d=identicon&r=PG", "display_name": "Renato", "link": "https://stackoverflow.com/users/1007991/renato"}, "is_accepted": false, "score": 14, "last_activity_date": 1492787505, "creation_date": 1492787505, "answer_id": 43546226, "question_id": 43542599, "link": "https://stackoverflow.com/questions/43542599/how-to-simplify-multiple-equals-checks-in-if-condition/43546226#43546226", "title": "How to simplify multiple equals checks in if condition?", "body": "<p>Another alternative that may be more efficient than a <code>when</code> expression is to use a <code>Set</code>:</p>\n\n<pre><code>val options = setOf(TRANSLATION_X, TRANSLATION_Y, TRANSLATION_Z)\n\nif (translation in options) return\nelse translation = TRANSLATION_X\n</code></pre>\n"}], "owner": {"reputation": 205, "user_id": 7833421, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ca0847d1999c25567f4cf92b6b5ef479?s=128&d=identicon&r=PG&f=1", "display_name": "Eugene Surkov", "link": "https://stackoverflow.com/users/7833421/eugene-surkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7930, "favorite_count": 1, "answer_count": 3, "score": 16, "last_activity_date": 1492787505, "creation_date": 1492777237, "last_edit_date": 1492778300, "question_id": 43542599, "link": "https://stackoverflow.com/questions/43542599/how-to-simplify-multiple-equals-checks-in-if-condition", "title": "How to simplify multiple equals checks in if condition?", "body": "<p>How can I do this easier with Kotlin?</p>\n\n<pre><code>if (translation.equals(TRANSLATION_X) || \n    translation.equals(TRANSLATION_Y) || \n    translation.equals(TRANSLATION_Z)\n) {\n    return\n} else {\n    translation = TRANSLATION_X\n}\n</code></pre>\n"}, {"tags": ["android", "xmpp", "message", "kotlin", "smack"], "comments": [{"owner": {"reputation": 3069, "user_id": 4613320, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/STVAg.jpg?s=128&g=1", "display_name": "Malik Motani", "link": "https://stackoverflow.com/users/4613320/malik-motani"}, "edited": false, "score": 0, "creation_date": 1492775002, "post_id": 43541753, "comment_id": 74135452, "body": "Have you try to join room every time after successful login."}, {"owner": {"reputation": 922, "user_id": 7124362, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/663c7ea155af997408dbe0a6a8914b52?s=128&d=identicon&r=PG&f=1", "display_name": "Ankur Khandelwal", "link": "https://stackoverflow.com/users/7124362/ankur-khandelwal"}, "reply_to_user": {"reputation": 3069, "user_id": 4613320, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/STVAg.jpg?s=128&g=1", "display_name": "Malik Motani", "link": "https://stackoverflow.com/users/4613320/malik-motani"}, "edited": false, "score": 0, "creation_date": 1492775259, "post_id": 43541753, "comment_id": 74135608, "body": "yes. After login i calling multiUserChat.join(a)  @Malik"}, {"owner": {"reputation": 12634, "user_id": 578215, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/354d7ceb22e1542f80890a924352ad47?s=128&d=identicon&r=PG", "display_name": "Farhan", "link": "https://stackoverflow.com/users/578215/farhan"}, "edited": false, "score": 0, "creation_date": 1493017665, "post_id": 43541753, "comment_id": 74212742, "body": "and what are the response of joining?"}, {"owner": {"reputation": 922, "user_id": 7124362, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/663c7ea155af997408dbe0a6a8914b52?s=128&d=identicon&r=PG&f=1", "display_name": "Ankur Khandelwal", "link": "https://stackoverflow.com/users/7124362/ankur-khandelwal"}, "reply_to_user": {"reputation": 12634, "user_id": 578215, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/354d7ceb22e1542f80890a924352ad47?s=128&d=identicon&r=PG", "display_name": "Farhan", "link": "https://stackoverflow.com/users/578215/farhan"}, "edited": false, "score": 0, "creation_date": 1493018287, "post_id": 43541753, "comment_id": 74213109, "body": "what is the means of joining here @Farhan? Can you clarify it?"}, {"owner": {"reputation": 922, "user_id": 7124362, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/663c7ea155af997408dbe0a6a8914b52?s=128&d=identicon&r=PG&f=1", "display_name": "Ankur Khandelwal", "link": "https://stackoverflow.com/users/7124362/ankur-khandelwal"}, "reply_to_user": {"reputation": 12634, "user_id": 578215, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/354d7ceb22e1542f80890a924352ad47?s=128&d=identicon&r=PG", "display_name": "Farhan", "link": "https://stackoverflow.com/users/578215/farhan"}, "edited": false, "score": 0, "creation_date": 1493033444, "post_id": 43541753, "comment_id": 74222762, "body": "@Farhan multiUserChat.join(a) returns kotlin.unit"}, {"owner": {"reputation": 12634, "user_id": 578215, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/354d7ceb22e1542f80890a924352ad47?s=128&d=identicon&r=PG", "display_name": "Farhan", "link": "https://stackoverflow.com/users/578215/farhan"}, "edited": false, "score": 0, "creation_date": 1493107176, "post_id": 43541753, "comment_id": 74258963, "body": "when u join a room, your client should receive some packets as a response from server. Check those. If there is any error or u don&#39;t understand them. paste here. start your app in debug mode. and check all the logs."}, {"owner": {"reputation": 922, "user_id": 7124362, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/663c7ea155af997408dbe0a6a8914b52?s=128&d=identicon&r=PG&f=1", "display_name": "Ankur Khandelwal", "link": "https://stackoverflow.com/users/7124362/ankur-khandelwal"}, "reply_to_user": {"reputation": 12634, "user_id": 578215, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/354d7ceb22e1542f80890a924352ad47?s=128&d=identicon&r=PG", "display_name": "Farhan", "link": "https://stackoverflow.com/users/578215/farhan"}, "edited": false, "score": 0, "creation_date": 1493140029, "post_id": 43541753, "comment_id": 74282781, "body": "@Farhan I have added the log that i am getting when calling join."}, {"owner": {"reputation": 922, "user_id": 7124362, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/663c7ea155af997408dbe0a6a8914b52?s=128&d=identicon&r=PG&f=1", "display_name": "Ankur Khandelwal", "link": "https://stackoverflow.com/users/7124362/ankur-khandelwal"}, "reply_to_user": {"reputation": 12634, "user_id": 578215, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/354d7ceb22e1542f80890a924352ad47?s=128&d=identicon&r=PG", "display_name": "Farhan", "link": "https://stackoverflow.com/users/578215/farhan"}, "edited": false, "score": 0, "creation_date": 1493280922, "post_id": 43541753, "comment_id": 74351882, "body": "@Farhan I checked the log. and find that I am getting the message in XML format. How will I show this log output to the user?"}, {"owner": {"reputation": 719, "user_id": 7857355, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f66829c3dd7ed60134828557bcc3e14?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidStorm", "link": "https://stackoverflow.com/users/7857355/androidstorm"}, "edited": false, "score": 0, "creation_date": 1498060472, "post_id": 43541753, "comment_id": 76346123, "body": "@AnkurKhandelwal Did you find the solution?"}, {"owner": {"reputation": 922, "user_id": 7124362, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/663c7ea155af997408dbe0a6a8914b52?s=128&d=identicon&r=PG&f=1", "display_name": "Ankur Khandelwal", "link": "https://stackoverflow.com/users/7124362/ankur-khandelwal"}, "edited": false, "score": 0, "creation_date": 1498093840, "post_id": 43541753, "comment_id": 76360936, "body": "nops@AndroidStorm"}, {"owner": {"reputation": 139, "user_id": 7346129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38a802b628882b6acaf15bf55d5d4102?s=128&d=identicon&r=PG&f=1", "display_name": "saumil patel", "link": "https://stackoverflow.com/users/7346129/saumil-patel"}, "edited": false, "score": 0, "creation_date": 1501322885, "post_id": 43541753, "comment_id": 77736624, "body": "See my post that will help you I think. <a href=\"https://stackoverflow.com/a/45387934/7346129\">stackoverflow.com/a/45387934/7346129</a>"}], "answers": [{"tags": [], "owner": {"reputation": 719, "user_id": 7857355, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f66829c3dd7ed60134828557bcc3e14?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidStorm", "link": "https://stackoverflow.com/users/7857355/androidstorm"}, "is_accepted": false, "score": 1, "last_activity_date": 1494945464, "last_edit_date": 1494945464, "creation_date": 1494865191, "answer_id": 43984387, "question_id": 43541753, "link": "https://stackoverflow.com/questions/43541753/not-able-to-receive-group-message-using-smack/43984387#43984387", "title": "Not able to receive group message using smack", "body": "<p>What I did:</p>\n\n<p>First Join in to the GroupChat, then create a custom listener to get the missed messages and on the onSuccess add the messageListener. That is provide me the history messages in a List&lt;> and after that the app start listen the new Message coming from this GroupChat.</p>\n\n<pre><code>public void joinToGroupChat(final MultiUserChat multiUserChat, final OpenFireListener&lt;List&lt;Message&gt;&gt; listener) {\n\n    if (!multiUserChat.isJoined()) {\n       multiUserChat.join(connection.getUser().getResourcepart());\n    }\n\n    getPendingMessages(multiUserChat, new OpenFireListener&lt;List&lt;Message&gt;&gt;() {\n        @Override\n        public void onSuccess(List&lt;Message&gt; result) {\n            multiUserChat.addMessageListener(messageListener);\n            listener.onSuccess(result);\n        }\n\n        @Override\n        public void onError(String message) {\n            listener.onError(message);\n        }\n    });\n}\n\nprivate MessageListener messageListener = new MessageListener() {\n    @Override\n    public void processMessage(Message message) {\n        //I only use the subject and body in my project\n        listener.notifyMessage(message.getSubject(), message.getBody());\n    }\n};\n</code></pre>\n\n<p>Make sure that you are joined into the GroupChat in the same context and implemented your custom listener. This is my generic implementation.</p>\n\n<pre><code>public interface OpenFireListener&lt;T&gt;{\n    void onSuccess(T result);\n    void onError(String message);\n}\n\npublic interface OpenFireServerListener {\n    enum STATE {ERROR, CONNECTION_CLOSED, RECONNECTION_SUCCESS, RECONNECTION_FAILED, AUTHENTICATED, NOT_AUTHORIZED, CONNECTED}\n\n    void notifyStatusOpenFireServer(STATE state, String message);\n    void notifyMessage(String streamName, String streamId);\n\n}\n</code></pre>\n"}], "owner": {"reputation": 922, "user_id": 7124362, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/663c7ea155af997408dbe0a6a8914b52?s=128&d=identicon&r=PG&f=1", "display_name": "Ankur Khandelwal", "link": "https://stackoverflow.com/users/7124362/ankur-khandelwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 920, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1494945464, "creation_date": 1492774623, "last_edit_date": 1493281708, "question_id": 43541753, "link": "https://stackoverflow.com/questions/43541753/not-able-to-receive-group-message-using-smack", "title": "Not able to receive group message using smack", "body": "<pre><code> var multiUserManager: MultiUserChatManager = MultiUserChatManager.getInstanceFor(constants.obj.connection)\n        var multiUserChat: MultiUserChat =multiUserManager.getMultiUserChat(JidCreate.entityBareFrom(roomName))\n\n         var a: Resourcepart = Resourcepart.from(PreferenceManager.getDefaultSharedPreferences(applicationContext).getString(\"j_id\", null))\n         multiUserChat.join(a)\n\n       multiUserChat.addMessageListener { object: MessageListener {\n           override fun processMessage(message: Message?) {\n               Log.v(\"Message is \",message.toString())\n               Log.v(\"Message from \",message!!.from.toString())\n               Log.v(\"Message is \",message.getBody())\n               Log.v(\"Message subject \",message.getSubject())\n               Log.v(\"Message is \",message.body)\n           }\n\n       } }\n</code></pre>\n\n<p>and I have try this also.</p>\n\n<pre><code> multiUserChat.addMessageListener { GroupChatListener() }\n\n class GroupChatListener : StanzaListener {\n    override fun processStanza(packet: Stanza?) {\n\n        Log.v(\"Packet is \",packet.toString())\n        Log.v(\"From\",packet!!.from.toString())\n        Log.v(\"Stanza id \",packet.stanzaId)\n    }\n</code></pre>\n\n<p>I am not able to receive the message when anyone sent on the server but i am able to send the message. </p>\n\n<p>edit:</p>\n\n<p>This is the output I am getting when I press join button. I am not getting any error in the logcat.</p>\n\n<pre><code> 04-25 22:31:45.460 13376-13376/com.example.itstym.smackchat D/on\u00a0click: fbjg\n04-25 22:31:45.460 13376-13376/com.example.itstym.smackchat D/Room\u00a0name: room1\n04-25 22:31:45.460 13376-13376/com.example.itstym.smackchat D/Nick\u00a0name: ank\n04-25 22:31:45.479 13376-13376/com.example.itstym.smackchat V/Multiuser\u00a0chat: MUC: room1@conference.replica3377.cloudapp.net(user1@replica3377.cloudapp.net/1540794269789260263741678)\n04-25 22:31:45.481 13376-16060/com.example.itstym.smackchat D/SMACK: SENT (0): &lt;iq to='conference.replica3377.cloudapp.net' id='X2GPV-38' type='get'&gt;&lt;query xmlns='http://jabber.org/protocol/disco#info'&gt;&lt;/query&gt;&lt;/iq&gt;\n04-25 22:31:45.482 13376-16060/com.example.itstym.smackchat D/SMACK: SENT (0): &lt;r xmlns='urn:xmpp:sm:3'/&gt;\n04-25 22:31:47.538 13376-16061/com.example.itstym.smackchat D/SMACK: RECV (0): &lt;a h='15' xmlns='urn:xmpp:sm:3'/&gt;&lt;iq xml:lang='en' to='user1@replica3377.cloudapp.net/1540794269789260263741678' from='conference.replica3377.cloudapp.net' type='result' id='X2GPV-38'&gt;&lt;query xmlns='http://jabber.org/protocol/disco#info'&gt;&lt;identity name='Chatrooms' type='text' category='conference'/&gt;&lt;feature var='http://jabber.org/protocol/disco#info'/&gt;&lt;feature var='http://jabber.org/protocol/disco#items'/&gt;&lt;feature var='jabber:iq:register'/&gt;&lt;feature var='http://jabber.org/protocol/muc'/&gt;&lt;feature var='vcard-temp'/&gt;&lt;feature var='urn:xmpp:mucsub:0'/&gt;&lt;feature var='http://jabber.org/protocol/muc#unique'/&gt;&lt;feature var='http://jabber.org/protocol/rsm'/&gt;&lt;feature var='urn:xmpp:mam:tmp'/&gt;&lt;feature var='urn:xmpp:mam:0'/&gt;&lt;feature var='urn:xmpp:mam:1'/&gt;&lt;x type='result' xmlns='jabber:x:data'&gt;&lt;field var='FORM_TYPE' type='hidden'&gt;&lt;value&gt;http://jabber.org/network/serverinfo&lt;/value&gt;&lt;/field&gt;&lt;/x&gt;&lt;/query&gt;&lt;/iq&gt;&lt;r xmlns='urn:xmpp:sm:3'/&gt;\n04-25 22:31:47.541 13376-16060/com.example.itstym.smackchat D/SMACK: SENT (0): &lt;a xmlns='urn:xmpp:sm:3' h='16'/&gt;&lt;presence to='room1@conference.replica3377.cloudapp.net/ank' id='X2GPV-37'&gt;&lt;x xmlns='http://jabber.org/protocol/muc'&gt;&lt;/x&gt;&lt;c xmlns='http://jabber.org/protocol/caps' hash='sha-1' node='http://www.igniterealtime.org/projects/smack' ver='os2Kusj3WEOivn5n4iFr/ZEO8ls='/&gt;&lt;/presence&gt;\n04-25 22:31:47.823 13376-16061/com.example.itstym.smackchat D/SMACK: RECV (0): &lt;presence xml:lang='en' to='user1@replica3377.cloudapp.net/1540794269789260263741678' from='room1@conference.replica3377.cloudapp.net/an' id='Kd5p0-48'&gt;&lt;c xmlns='http://jabber.org/protocol/caps' hash='sha-1' node='http://www.igniterealtime.org/projects/smack' ver='os2Kusj3WEOivn5n4iFr/ZEO8ls='/&gt;&lt;x xmlns='http://jabber.org/protocol/muc#user'&gt;&lt;item role='participant' affiliation='none'/&gt;&lt;/x&gt;&lt;/presence&gt;\n04-25 22:31:47.835 13376-16061/com.example.itstym.smackchat D/SMACK: RECV (0): &lt;r xmlns='urn:xmpp:sm:3'/&gt;&lt;presence xml:lang='en' to='user1@replica3377.cloudapp.net/1540794269789260263741678' from='room1@conference.replica3377.cloudapp.net/ank' id='X2GPV-37'&gt;&lt;c xmlns='http://jabber.org/protocol/caps' hash='sha-1' node='http://www.igniterealtime.org/projects/smack' ver='os2Kusj3WEOivn5n4iFr/ZEO8ls='/&gt;&lt;x xmlns='http://jabber.org/protocol/muc#user'&gt;&lt;item jid='user1@replica3377.cloudapp.net/1540794269789260263741678' role='participant' affiliation='none'/&gt;&lt;status code='110'/&gt;&lt;/x&gt;&lt;/presence&gt;&lt;message xml:lang='en' to='user1@replica3377.cloudapp.net/1540794269789260263741678' from='room1@conference.replica3377.cloudapp.net/user1' type='groupchat' id='54f75761-b5cd-4955-8d32-5609e89a2417'&gt;&lt;x xmlns='jabber:x:event'&gt;&lt;composing/&gt;&lt;/x&gt;&lt;delay from='room1@conference.replica3377.cloudapp.net' stamp='2017-04-21T11:52:40.966514Z' xmlns='urn:xmpp:delay'/&gt;&lt;body&gt;hey&lt;/body&gt;&lt;/message&gt;&lt;message xml:lang='en' to='user1@replica3377.cloudapp.net/1540794269789260263741678' from='room1@conference.replica3377.cloudapp.net/user1' type='groupchat' id='1492776073223:msg'&gt;&lt;active xmlns='http://jabber.org/protocol/chatstates'/&gt;&lt;delay from='room1@conference.replica3377.cloudapp.net' stamp='2017-04-21T12:01:13.896472Z' xmlns='urn:xmpp:delay'/&gt;&lt;body&gt;asd&amp;apos;&lt;/body&gt;&lt;/message&gt;\n04-25 22:31:47.835 13376-16060/com.example.itstym.smackchat D/SMACK: SENT (0): &lt;a xmlns='urn:xmpp:sm:3' h='17'/&gt;\n04-25 22:31:47.836 13376-13376/com.example.itstym.smackchat V/Joined\u00a0response: kotlin.Unit\n04-25 22:31:47.836 13376-13376/com.example.itstym.smackchat V/Joined: true\n04-25 22:31:47.836 13376-13376/com.example.itstym.smackchat I/Choreographer: Skipped 142 frames!  The application may be doing too much work on its main thread.\n04-25 22:31:47.841 13376-16061/com.example.itstym.smackchat D/SMACK: RECV (0): &lt;message xml:lang='en' to='user1@replica3377.cloudapp.net/1540794269789260263741678' from='room1@conference.replica3377.cloudapp.net/ankur' type='groupchat' id='05333f72-0ffc-49ba-8180-23c3b00b5d31'&gt;&lt;x xmlns='jabber:x:event'&gt;&lt;composing/&gt;&lt;/x&gt;&lt;delay from='room1@conference.replica3377.cloudapp.net' stamp='2017-04-24T11:02:35.386083Z' xmlns='urn:xmpp:delay'/&gt;&lt;body&gt;jfdgsdk&lt;/body&gt;&lt;/message&gt;&lt;message xml:lang='en' to='user1@replica3377.cloudapp.net/1540794269789260263741678' from='room1@conference.replica3377.cloudapp.net/wefa' type='groupchat' id='e0e5cf9a-a363-4f05-a8cf-b2d1016a99d2'&gt;&lt;x xmlns='jabber:x:event'&gt;&lt;composing/&gt;&lt;/x&gt;&lt;delay from='room1@conference.replica3377.cloudapp.net' stamp='2017-04-24T11:25:57.859462Z' xmlns='urn:xmpp:delay'/&gt;&lt;body&gt;dgdfgsdfgsg&lt;/body&gt;&lt;/message&gt;&lt;message xml:lang='en' to='user1@replica3377.cloudapp.net/1540794269789260263741678' from='room1@conference.replica3377.cloudapp.net/abv' type='groupchat' id='fr3u8-51'&gt;&lt;delay from='room1@conference.replica3377.cloudapp.net' stamp='2017-04-24T11:28:05.832722Z' xmlns='urn:xmpp:delay'/&gt;&lt;body&gt;hi&lt;/body&gt;&lt;/message&gt;&lt;message xml:lang='en' to='user1@replica3377.cloudapp.net/1540794269789260263741678' from='room1@conference.replica3377.cloudapp.net/wefa' type='groupchat' id='6259ccab-5235-4367-8b57-f03f27ec8c9a'&gt;&lt;x xmlns='jabber:x:event'&gt;&lt;composing/&gt;&lt;/x&gt;&lt;delay from='room1@conference.replica3377\n04-25 22:31:47.873 13376-16061/com.example.itstym.smackchat D/SMACK: RECV (0): .cloudapp.net' stamp='2017-04-24T11:28:24.801581Z' xmlns='urn:xmpp:delay'/&gt;&lt;body&gt;welcome abv&lt;/body&gt;&lt;/message&gt;&lt;message to='user1@replica3377.cloudapp.net/1540794269789260263741678' from='room1@conference.replica3377.cloudapp.net' type='groupchat'&gt;&lt;subject/&gt;&lt;/message&gt;\n04-25 22:31:47.881 13376-16096/com.example.itstym.smackchat W/MultiUserChat: Message subject not changed by a full JID: room1@conference.replica3377.cloudapp.net\n04-25 22:31:48.030 13376-16061/com.example.itstym.smackchat D/SMACK: RECV (0): &lt;r xmlns='urn:xmpp:sm:3'/&gt;\n04-25 22:31:48.031 13376-16060/com.example.itstym.smackchat D/SMACK: SENT (0): &lt;a xmlns='urn:xmpp:sm:3' h='25'/&gt;\n</code></pre>\n\n<p><strong>edit 2:</strong></p>\n\n<pre><code>multiUserChat?.addMessageListener {\n                    Log.v(\"listener\",\"yup\")\n                    MessageListener { message -&gt;\n                        Log.v(\"Message is complete \",message.toString())\n                        Log.v(\"Message from \",message?.from.toString())\n                        Log.v(\"Message is body\",message?.getBody())\n                        Log.v(\"Message subject \",message?.getSubject())\n                        Log.v(\"Message body \",message?.body)\n                    }\n                }\n</code></pre>\n\n<p>Whenever someone send me the message                         Log.v(\"listener\",\"yup\") called. But don't go inside messagelistener. \nI have read the log output and find them I am getting the msg in the form of xml. </p>\n"}, {"tags": ["guava", "kotlin"], "comments": [{"owner": {"reputation": 5111, "user_id": 785663, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8b32f09978c0b55f375b81e9179dc568?s=128&d=identicon&r=PG", "display_name": "mabi", "link": "https://stackoverflow.com/users/785663/mabi"}, "edited": false, "score": 0, "creation_date": 1492769757, "post_id": 43539893, "comment_id": 74131835, "body": "For the time being, I do what Guava&#39;s docs say and track the mutable state in an extra data structure. The question still has value on it&#39;s own, I think."}], "answers": [{"tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": false, "score": 0, "last_activity_date": 1492785291, "creation_date": 1492785291, "answer_id": 43545387, "question_id": 43539893, "link": "https://stackoverflow.com/questions/43539893/exchanging-a-node-in-guava-mutablevaluegraph/43545387#43545387", "title": "Exchanging a node in Guava MutableValueGraph", "body": "<p>A less efficient approach but one that should certainly avoid <code>ConcurrentModificationException</code> is to induce a subgraph from the relevant nodes and then removing the old node and adding the new and finally using the induced subgraph to add the edge values back in:</p>\n\n<pre><code>fun MutableValueGraph&lt;Frame, Int&gt;.exchangeNode(old: Frame, new: Frame): Boolean {\n    if (old == new) return false\n\n    val inducedSubgraph = Graphs.inducedSubgraph(this, adjacentNodes(old) + old)\n\n    removeNode(old)\n    addNode(new)\n\n    if (isDirected) {\n        for (predecessor in inducedSubgraph.predecessors(old)) {\n            putEdgeValue(predecessor, new, inducedSubgraph.edgeValue(predecessor, old))\n        }\n        for (successor in inducedSubgraph.successors(old)) {\n            putEdgeValue(new, successor, inducedSubgraph.edgeValue(old, successor))\n        }\n    } else {\n        for (adjacentNode in inducedSubgraph.adjacentNodes(old)) {\n            putEdgeValue(adjacentNode, new, inducedSubgraph.edgeValue(adjacentNode, old))\n        }\n    }\n\n    return true\n}\n</code></pre>\n"}], "owner": {"reputation": 5111, "user_id": 785663, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8b32f09978c0b55f375b81e9179dc568?s=128&d=identicon&r=PG", "display_name": "mabi", "link": "https://stackoverflow.com/users/785663/mabi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 244, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1492785291, "creation_date": 1492769384, "question_id": 43539893, "link": "https://stackoverflow.com/questions/43539893/exchanging-a-node-in-guava-mutablevaluegraph", "title": "Exchanging a node in Guava MutableValueGraph", "body": "<p>I'm hitting a wall in trying to replace an element in a <code>com.google.common.graph.MutableValueGraph</code>.</p>\n\n<p>I need to update element state (something I know <a href=\"https://github.com/google/guava/wiki/GraphsExplained#graph-elements-nodes-and-edges\" rel=\"nofollow noreferrer\">the docs</a> advise to be careful about) on the following data class:</p>\n\n<pre><code>data class Frame(val method: String, val merged: Boolean = false)\n</code></pre>\n\n<p>Since graphs don't offer a method to exchange a node for another, I rolled my own:</p>\n\n<pre><code>fun MutableValueGraph&lt;Frame, Int&gt;.exchangeNode(old: Frame, new: Frame): Boolean {\n    if (old == new) return true\n\n    if (isDirected) {\n        this.predecessors(old).forEach { \n            this.putEdgeValue(it, new, this.edgeValue(it, old)) }\n        this.successors(old).forEach { \n            this.putEdgeValue(new, it, this.edgeValue(old, it)) }\n    } else {\n        this.adjacentNodes(old).forEach { \n            this.putEdgeValue(it, new, this.edgeValue(it, old)) }\n    }\n    return this.removeNode(old)\n}\n</code></pre>\n\n<p>However, I hit a ConcurrentModificationException:</p>\n\n<pre><code>Exception in thread \"main\" java.util.ConcurrentModificationException\nat java.util.HashMap$HashIterator.nextNode(HashMap.java:1437)\nat java.util.HashMap$EntryIterator.next(HashMap.java:1471)\nat java.util.HashMap$EntryIterator.next(HashMap.java:1469)\nat com.google.common.graph.DirectedGraphConnections$1$1.computeNext(DirectedGraphConnections.java:113)\nat com.google.common.collect.AbstractIterator.tryToComputeNext(AbstractIterator.java:145)\nat com.google.common.collect.AbstractIterator.hasNext(AbstractIterator.java:140)\nat TestKt.exchangeNode(Test.kt:292)\n...\n</code></pre>\n\n<p>Sounds fair as I'm exchanging a bunch of nodes in a for loop, probably trying to touch a adjacent node that has already been exchanged?</p>\n\n<p>My question is: how do I replace multiple nodes in a ValueGraph, keeping their edge values?</p>\n"}, {"tags": ["intellij-idea", "kotlin", "jetbrains-ide"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1492767249, "post_id": 43537382, "comment_id": 74129922, "body": "Can&#39;t you open a bug ticket yourself? It is very easy: <a href=\"https://youtrack.jetbrains.com/issues/KT\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issues/KT</a>. After all, you are the only one who knows all the details of your problem."}], "answers": [{"comments": [{"owner": {"reputation": 5402, "user_id": 873139, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/r1v37.jpg?s=128&g=1", "display_name": "Aubergine", "link": "https://stackoverflow.com/users/873139/aubergine"}, "edited": false, "score": 0, "creation_date": 1492797655, "post_id": 43537905, "comment_id": 74150731, "body": "Nobody argues with behavior of default packages, what I am complaining about is loooong defined standard IJ warning which is missed in Kotlin. Dmitrii just confirmed that this is not intentional in his answer. The issue happened to me when I was copying around the files from another project, I expect some basic such as this one to be done automatically as it always was in Java."}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": false, "score": 1, "last_activity_date": 1492764054, "creation_date": 1492764054, "answer_id": 43537905, "question_id": 43537382, "link": "https://stackoverflow.com/questions/43537382/intellij-ignorance-on-kt-files-under-package-structure-having-no-package-s/43537905#43537905", "title": "Intellij ignorance on .kt files under package structure having no &#39;package ..&#39; statement? WHY?", "body": "<p>I'm not sure this post is appropriate here, but to answer the actual question, the <a href=\"https://kotlinlang.org/docs/reference/packages.html\" rel=\"nofollow noreferrer\">official documentation</a> states that:</p>\n\n<blockquote>\n  <p>If the package is not specified, the contents of such a file belong to\n  \"default\" package that has no name.</p>\n</blockquote>\n\n<p>Since with Kotlin your files don't have to be in folders that match their packages, not having a package declaration has to be an option so that you can have files that are organized in folders, but you don't wish to put them in packages - this way they can have the same package as if they weren't nested in any folders, and were just in the root of the project.</p>\n\n<p>I do concede that it's a bit odd there is a warning for your package declaration not matching the folder your file is in, but you don't get this if you just omit the package declaration altogether. I suppose this is assumed to be intentional.</p>\n\n<p>This shouldn't generally be a problem because IDEs will generate the appropriate package declaration for the folder you've created your file in by default. I'm not sure how you created a file without a package declaration if you're using IntelliJ, unless you did it in the root <code>src</code> folder instead of inside a package folder.</p>\n"}, {"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 3, "last_activity_date": 1492770367, "creation_date": 1492770367, "answer_id": 43540286, "question_id": 43537382, "link": "https://stackoverflow.com/questions/43537382/intellij-ignorance-on-kt-files-under-package-structure-having-no-package-s/43540286#43540286", "title": "Intellij ignorance on .kt files under package structure having no &#39;package ..&#39; statement? WHY?", "body": "<p>The missing inspection warning for files with no package statement is a bug; the corresponding YouTrack issue is <a href=\"https://youtrack.jetbrains.com/issue/KT-13549\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 5402, "user_id": 873139, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/r1v37.jpg?s=128&g=1", "display_name": "Aubergine", "link": "https://stackoverflow.com/users/873139/aubergine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 384, "favorite_count": 0, "accepted_answer_id": 43540286, "answer_count": 2, "score": 1, "last_activity_date": 1492770367, "creation_date": 1492762434, "last_edit_date": 1492762879, "question_id": 43537382, "link": "https://stackoverflow.com/questions/43537382/intellij-ignorance-on-kt-files-under-package-structure-having-no-package-s", "title": "Intellij ignorance on .kt files under package structure having no &#39;package ..&#39; statement? WHY?", "body": "<pre><code>package com.yada.yada\n</code></pre>\n\n<p>What happens with IntelliJ when I create Java class 'ss' in <code>com.yada.yada</code> without package statement? - RED \"Missing Package Statement\". </p>\n\n<p>What happens when I create Kotlin file in <code>com.yada.yada</code> without package statement? - \"Keep going bro until your DI framework will fail to scan your deps during runtime\"</p>\n\n<p><strong>Why IJ package validation is non-mandatory for Kotlin? I just wasted an hour trying to figure out what's wrong with package scan only to realise this was the show stopper. Would Java 9 jigsaw quadruple the chaos for Kotlin sparked by such malformed files/classes with no warning messages? Well, you bet it will!</strong></p>\n\n<p>Please return back the \"warning\" statement for Kotlin. P.S. registration/login methods are not sufficient for myself to access Intellij bugtracker(and I am genuinely pissed off with one time access password resets, 1000 resources and 980 passwords I don't remember or care to) therefore making this public on stackoverflow.</p>\n\n<p>If anybody going to defend this behaviour please explain why? Maybe I am missing something, otherwise please reply with open bug(preferably somebody from JetBrains) and I will accept it.</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 3462, "user_id": 2094298, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/26a93895eedcc45a0ebc3bb0da2cfbe6?s=128&d=identicon&r=PG", "display_name": "Ruckus T-Boom", "link": "https://stackoverflow.com/users/2094298/ruckus-t-boom"}, "edited": false, "score": 0, "creation_date": 1492724061, "post_id": 43525608, "comment_id": 74113236, "body": "Why is <code>T</code> reified? That shouldn&#39;t be necessary in your code, unless this is just an simplified example and your actual code uses reification."}, {"owner": {"reputation": 5305, "user_id": 5818889, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6b8df2f6af3fd32042982001fac8407b?s=128&d=identicon&r=PG&f=1", "display_name": "glee8e", "link": "https://stackoverflow.com/users/5818889/glee8e"}, "edited": false, "score": 0, "creation_date": 1492749768, "post_id": 43525608, "comment_id": 74120313, "body": "<a href=\"http://kotlinlang.org/docs/reference/annotations.html#lambdas\" rel=\"nofollow noreferrer\">Lambdas can have annotations</a>. So you don&#39;t need object literals. (There will be a bridge method though, but it doesn&#39;t have that annotation so it&#39;s ok)"}, {"owner": {"reputation": 5305, "user_id": 5818889, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6b8df2f6af3fd32042982001fac8407b?s=128&d=identicon&r=PG&f=1", "display_name": "glee8e", "link": "https://stackoverflow.com/users/5818889/glee8e"}, "edited": false, "score": 1, "creation_date": 1492750082, "post_id": 43525608, "comment_id": 74120393, "body": "I&#39;m not sure if it&#39;s a bug or intented. You&#39;d better file a ticket in the <a href=\"https://youtrack.jetbrains.com/issues\" rel=\"nofollow noreferrer\">youtrack</a>"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 1, "creation_date": 1492770209, "post_id": 43525608, "comment_id": 74132174, "body": "Looks like a bug to me. Indeed, please file a YouTrack issue."}], "answers": [{"comments": [{"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 1, "creation_date": 1579468071, "post_id": 59814357, "comment_id": 105767252, "body": "The problem is exactly that the types are (were?) still partly erased <i>after inlining</i>."}], "tags": [], "owner": {"reputation": 2377, "user_id": 1160959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd2c84b77b3b8d07e85f5c7b9e3cdcaa?s=128&d=identicon&r=PG", "display_name": "asm0dey", "link": "https://stackoverflow.com/users/1160959/asm0dey"}, "is_accepted": false, "score": 0, "last_activity_date": 1579467679, "creation_date": 1579467679, "answer_id": 59814357, "question_id": 43525608, "link": "https://stackoverflow.com/questions/43525608/kotlin-reified-type-parameter-as-function-parameter/59814357#59814357", "title": "Kotlin reified type parameter as function parameter", "body": "<p>So if I understand correctly your question is: is it ok that functions with reified generics in bytecode look like functions with erased types.</p>\n\n<p>Answer is \"yes\". That's why functions with reified generics can bi inline-only. Their body is being full inlined into caller. And of course types are not erased there (at cost of bloating caller function bytecode size).</p>\n"}], "owner": {"reputation": 309, "user_id": 3087916, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/618ec96785acef9be0b776bd49312125?s=128&d=identicon&r=PG&f=1", "display_name": "LeoTietz", "link": "https://stackoverflow.com/users/3087916/leotietz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 356, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1579467679, "creation_date": 1492707518, "question_id": 43525608, "link": "https://stackoverflow.com/questions/43525608/kotlin-reified-type-parameter-as-function-parameter", "title": "Kotlin reified type parameter as function parameter", "body": "<p>I have an inline function with a reified type parameter taking a lambda, which returns a new instance of an anonymous class which has a single method taking that reified type parameter and passing it to the lambda.</p>\n\n<pre><code>inline fun &lt;reified T : Any&gt; eventHandler(crossinline handler: (T) -&gt; Unit) = object {\n    @Handler\n    fun event(event: T) = handler(event)\n}\n</code></pre>\n\n<p>It is used like <code>eventHandler&lt;ExampleEvent&gt; { println(it.data); }</code> and everything compiles. </p>\n\n<p>However investigating the generated bytecode of the class created on the mentioned call, I get this for the event method:</p>\n\n<pre><code>public final void event(example.ExampleEvent);\n    descriptor: (Ljava/lang/Object;)V\n    [...]\n    Signature: #53 // (Lexample.ExampleEvent;)V\n</code></pre>\n\n<p>So while it correctly remembers the type in the Signature, it discards it in the descriptor; therefore <code>thatEventMethod.getParameterTypes()</code> will have <code>Object</code> instead of <code>ExampleEvent</code>.</p>\n\n<p>Is this a bug or intended behavior? Furthermore, if this is intended, could there be some other way of realizing my goal (which is to prevent having to create that clumsy object everywhere, add a dummy method with @Handler etc.)?</p>\n"}, {"tags": ["android", "webview", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 546, "user_id": 2714340, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/x7F3H.jpg?s=128&g=1", "display_name": "Prateekro", "link": "https://stackoverflow.com/users/2714340/prateekro"}, "edited": false, "score": 0, "creation_date": 1492696719, "post_id": 43521624, "comment_id": 74096679, "body": "it shows: Null can not be a value of a non-null type WebView"}, {"owner": {"reputation": 546, "user_id": 2714340, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/x7F3H.jpg?s=128&g=1", "display_name": "Prateekro", "link": "https://stackoverflow.com/users/2714340/prateekro"}, "edited": false, "score": 1, "creation_date": 1492765723, "post_id": 43521624, "comment_id": 74128842, "body": "Why cant we use lateinit here?"}], "tags": [], "owner": {"reputation": 67098, "user_id": 1235698, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90fd9ad4efef8eb93209f42183c48f3e?s=128&d=identicon&r=PG", "display_name": "Marcin Orlowski", "link": "https://stackoverflow.com/users/1235698/marcin-orlowski"}, "is_accepted": true, "score": 22, "last_activity_date": 1537176392, "last_edit_date": 1537176392, "creation_date": 1492696613, "answer_id": 43521624, "question_id": 43521489, "link": "https://stackoverflow.com/questions/43521489/kotlin-define-variable-globally-for-webview/43521624#43521624", "title": "Kotlin - Define variable globally for WebView", "body": "<blockquote>\n  <p>This shows Property must be initialized or be abstract</p>\n</blockquote>\n\n<p>Then initialize it i.e. to <code>null</code>. This is not a final value and you will be able to change it later:</p>\n\n<pre><code>var mywebview : WebView? = null\n</code></pre>\n\n<p>Alternatively, you can use <a href=\"https://kotlinlang.org/docs/reference/properties.html\" rel=\"noreferrer\">lateinit</a> feature of Kotlin, which would let you prevent having nullable <code>mywebview</code> if not needed:</p>\n\n<pre><code>lateinit var webView: WebView\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4869, "user_id": 6151924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d32a9252d2034b93b3eb8f743512104?s=128&d=identicon&r=PG&f=1", "display_name": "RobCo", "link": "https://stackoverflow.com/users/6151924/robco"}, "edited": false, "score": 1, "creation_date": 1492704880, "post_id": 43523845, "comment_id": 74102887, "body": "This is much better than accepted answer. Just don&#39;t access it before assigning it."}, {"owner": {"reputation": 546, "user_id": 2714340, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/x7F3H.jpg?s=128&g=1", "display_name": "Prateekro", "link": "https://stackoverflow.com/users/2714340/prateekro"}, "reply_to_user": {"reputation": 4869, "user_id": 6151924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d32a9252d2034b93b3eb8f743512104?s=128&d=identicon&r=PG&f=1", "display_name": "RobCo", "link": "https://stackoverflow.com/users/6151924/robco"}, "edited": false, "score": 0, "creation_date": 1492765120, "post_id": 43523845, "comment_id": 74128442, "body": "@RobCo it says Expecting member declaration"}, {"owner": {"reputation": 546, "user_id": 2714340, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/x7F3H.jpg?s=128&g=1", "display_name": "Prateekro", "link": "https://stackoverflow.com/users/2714340/prateekro"}, "edited": false, "score": 0, "creation_date": 1492765167, "post_id": 43523845, "comment_id": 74128469, "body": "Also, This shows Property must be initialized or be abstract"}], "tags": [], "owner": {"reputation": 364, "user_id": 1191124, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hMV1M.png?s=128&g=1", "display_name": "burnO", "link": "https://stackoverflow.com/users/1191124/burno"}, "is_accepted": false, "score": 29, "last_activity_date": 1492702046, "creation_date": 1492702046, "answer_id": 43523845, "question_id": 43521489, "link": "https://stackoverflow.com/questions/43521489/kotlin-define-variable-globally-for-webview/43523845#43523845", "title": "Kotlin - Define variable globally for WebView", "body": "<p>You can use late initialization - you don't have to make WebView nullable</p>\n\n<pre><code>lateinit var webView: WebView\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 768, "user_id": 2015095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ffO4L.jpg?s=128&g=1", "display_name": "razzbee", "link": "https://stackoverflow.com/users/2015095/razzbee"}, "is_accepted": false, "score": 0, "last_activity_date": 1502567738, "creation_date": 1502567738, "answer_id": 45654371, "question_id": 43521489, "link": "https://stackoverflow.com/questions/43521489/kotlin-define-variable-globally-for-webview/45654371#45654371", "title": "Kotlin - Define variable globally for WebView", "body": "<p>for a global variable, this means it shouldn't be overridden accidentally , so you should instead lazyload it using kotlin's lazy which create the variable on the first call, other calls will just reference the lazy loaded variable</p>\n\n<pre><code>private val webview:WebView by lazy{\n  findViewById&lt;WebView&gt;(R.id.webview)\n}\n</code></pre>\n\n<p>That should come before the onCreate method </p>\n"}, {"tags": [], "owner": {"reputation": 24, "user_id": 6855481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33305546de61f19955ba242ecda423e0?s=128&d=identicon&r=PG&f=1", "display_name": "Android01", "link": "https://stackoverflow.com/users/6855481/android01"}, "is_accepted": false, "score": 0, "last_activity_date": 1506311148, "creation_date": 1506311148, "answer_id": 46397310, "question_id": 43521489, "link": "https://stackoverflow.com/questions/43521489/kotlin-define-variable-globally-for-webview/46397310#46397310", "title": "Kotlin - Define variable globally for WebView", "body": "<p>Below code worked for me:</p>\n\n<pre><code>val mywebviewURL = \"https://www.google.com\"\n\n  override fun onStart() {\n    super.onStart()\n\n    events_webview.setWebViewClient(object : WebViewClient() {\n        override fun shouldOverrideUrlLoading(view: WebView?, url: String?): Boolean {\n            view?.loadUrl(url);\n            return true\n        }\n    })\n    events_webview.loadUrl(mywebviewURL)\n}\n</code></pre>\n\n<p>Add internet permission to AndroidManifest.xml</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.INTERNET\"/&gt;\n</code></pre>\n"}], "owner": {"reputation": 546, "user_id": 2714340, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/x7F3H.jpg?s=128&g=1", "display_name": "Prateekro", "link": "https://stackoverflow.com/users/2714340/prateekro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21125, "favorite_count": 0, "accepted_answer_id": 43521624, "answer_count": 4, "score": 14, "last_activity_date": 1537176392, "creation_date": 1492696243, "question_id": 43521489, "link": "https://stackoverflow.com/questions/43521489/kotlin-define-variable-globally-for-webview", "title": "Kotlin - Define variable globally for WebView", "body": "<p>I'm trying to define a variable globally which is of the class WebView. In Android Java it could be easy done by writing the it </p>\n\n<p>Java for global variable</p>\n\n<pre><code> &lt; ClassName &gt; &lt; variableName &gt;\n</code></pre>\n\n<p>But in Kotlin I'm facing issue with its declaration.</p>\n\n<hr>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\nvar mywebview : WebView //&lt;- This shows Property must be initialized or be abstract\n\n\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main)\n}\n\noverride fun onStart() {\n    super.onStart()\n\n    mywebview = findViewById(R.id.webViewGyrix) as WebView\n\n    mywebview.setWebViewClient(object : WebViewClient() {\n        override fun shouldOverrideUrlLoading(view: WebView?, url: String?): Boolean {\n            view?.loadUrl(url);\n            return true\n        }\n    } )\n    mywebview.loadUrl(\"http://www.example.com/\")\n}\n</code></pre>\n"}, {"tags": ["wildfly", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1284, "user_id": 6233653, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3iNsk.jpg?s=128&g=1", "display_name": "Ant20", "link": "https://stackoverflow.com/users/6233653/ant20"}, "edited": false, "score": 0, "creation_date": 1492747166, "post_id": 43530160, "comment_id": 74119630, "body": "variable is open. For EJB defined variable as val work successfull"}], "tags": [], "owner": {"reputation": 61, "user_id": 5112514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1ccd690438cfe81e5a798ccc9e8b9d4?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Molkov", "link": "https://stackoverflow.com/users/5112514/alexander-molkov"}, "is_accepted": false, "score": 0, "last_activity_date": 1492723412, "creation_date": 1492723412, "answer_id": 43530160, "question_id": 43519780, "link": "https://stackoverflow.com/questions/43519780/observes-inject-private-final-error/43530160#43530160", "title": "Observes Inject private final error", "body": "<p>You defined variable <code>events</code> as final because of <code>val</code> keyword and already set to <code>null</code>.</p>\n\n<ul>\n<li><p>change <code>val</code> to 'var':</p>\n\n<p>@Inject\nopen var events: Event? = null</p></li>\n<li><p>use late initialization and <code>events</code> will be non-nullable type:</p>\n\n<p>@Inject\nopen lateinit var events: Event</p></li>\n</ul>\n"}], "owner": {"reputation": 1284, "user_id": 6233653, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3iNsk.jpg?s=128&g=1", "display_name": "Ant20", "link": "https://stackoverflow.com/users/6233653/ant20"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 231, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1492746638, "creation_date": 1492691871, "last_edit_date": 1492746638, "question_id": 43519780, "link": "https://stackoverflow.com/questions/43519780/observes-inject-private-final-error", "title": "Observes Inject private final error", "body": "<pre><code>data class ExeEvent(val id: Long)\n\n\n@Stateless\nopen class ExeManagerBean : IExeManagerBean {\n\n @Inject\n    open val events: Event&lt;ExeEvent&gt;? = null\n\n\noverride fun listenTo(@Observes(during = TransactionPhase.AFTER_SUCCESS) exeEvent: ExeEvent) {\n\n    try {\n        //doWork\n    } catch (ex: Exception) {\n        logger.error(\"Fail. ex:$ex\")\n    }\n}\n</code></pre>\n\n<p>On deploy app:</p>\n\n<p>16:38:56,060 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-4) MSC000001: Failed to start service jboss.deployment.unit.\"pay.ear\".WeldStartService: org.jboss.msc.service.StartException in service jboss.deployment.unit.\"bisys-pay-ear-worker.ear\".WeldStartService: Failed to start service\n    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1904)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: org.jboss.weld.exceptions.DefinitionException: WELD-000810: Cannot place qualifiers on final fields:  [EnhancedAnnotatedFieldImpl] @Inject private final ExeManagerBean.exeEvent</p>\n"}]